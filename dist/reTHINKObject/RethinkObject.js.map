{"version":3,"sources":["reTHINKObject/RethinkObject.js"],"names":["_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","exports","value","RethinkObject","undefined","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_tv","require","_tv2","this","schema","addSchema","id","result","validateMultiple","JSON","parse","stringify","errors","forEach","error","stack","valid","missing","console","warn","debug"],"mappings":"AAAA,YAqBgE,SAASA,wBAAuBC,GAAK,MAAOA,IAAKA,EAAIC,WAAWD,GAAKE,UAAQF,GAAM,QAASG,iBAAgBC,EAASC,GAAa,KAAKD,YAAoBC,IAAc,KAAM,IAAIC,WAAU,qCArBhPC,OAAOC,eAAeC,QAAQ,cAAcC,OAAM,IAAOD,QAAQE,cAAcC,MAAU,IAAIC,cAAa,WAAW,QAASC,GAAiBC,EAAOC,GAAO,IAAI,GAAIC,GAAE,EAAEA,EAAED,EAAME,OAAOD,IAAI,CAAC,GAAIE,GAAWH,EAAMC,EAAGE,GAAWC,WAAWD,EAAWC,aAAY,EAAMD,EAAWE,cAAa,EAAQ,SAAUF,KAAWA,EAAWG,UAAS,GAAKf,OAAOC,eAAeO,EAAOI,EAAWI,IAAIJ,IAAc,MAAO,UAASd,EAAYmB,EAAWC,GAAuI,MAAvHD,IAAWV,EAAiBT,EAAYqB,UAAUF,GAAeC,GAAYX,EAAiBT,EAAYoB,GAAoBpB,MAsBllBsB,IAAAC,QAAA,OAD+BC,KAAK9B,uBAAuB4B,KAG9ChB,cAHySF,QAGzSE,cAH+T,WAAW,QAASA,KAAgBR,gBAAgB2B,KAAKnB,GAUnI,MAVmJE,cAAaF,IAAgBY,IAAI,WAM/ab,MAAM,SAMAqB,GAELF,KAAAA,WAAIG,UAAUD,EAAOE,GAAIF,EAGzB,IAAIG,GAASL,KAAAA,WAAIM,iBAAiBC,KAAKC,MAAMD,KAAKE,UAAUR,OAAQC,EAYpE,OATAG,GAAOK,OAAOC,QAAQ,SAACC,SACZA,GAAMC,UAIZR,EAAOS,OAAUT,EAAOU,QAAQ1B,OAAS,KAC1C2B,QAAQC,KAAK,sBAAwBZ,EAAOS,MAAQ,8CAAgD,WAAYP,KAAKE,UAAUJ,EAAQ,KAAM,IAC7IW,QAAQE,MAAM,UAAWX,KAAKE,UAAUR,KAAM,KAAM,KAEjDI,EAAOS,UAnBmPhC,IAAkBF,SAAAA,WAwB5QE","file":"reTHINKObject/RethinkObject.js","sourcesContent":["/**\n * Copyright 2016 PT Inovação e Sistemas SA\n * Copyright 2016 INESC-ID\n * Copyright 2016 QUOBIS NETWORKS SL\n * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n * Copyright 2016 ORANGE SA\n * Copyright 2016 Deutsche Telekom AG\n * Copyright 2016 Apizee\n * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport tv4 from \"tv4\";\n\nexport class RethinkObject {\n\n    /**\n     * Validates this RethinkObject against the provided schema.\n     *\n     * LIMITATIONS: The provided schema cannot contain references to other schemas, since they can't be resolved.\n     * @param schema - schema to validate against\n     * @returns {boolean} true if valid, false otherwise\n     */\n    validate(schema) {\n        // add schema itself so local references work\n        tv4.addSchema(schema.id, schema);\n\n        // JSON stringify -> parse needed to have proper validation\n        let result = tv4.validateMultiple(JSON.parse(JSON.stringify(this)), schema);\n\n        // delete error stacks to improve logging\n        result.errors.forEach((error) => {\n            delete error.stack;\n        });\n\n        // print more details about validation if it fails or schema contains $refs\n        if (!result.valid || (result.missing.length > 0)) {\n            console.warn(\"Object validation \" + (result.valid ? \"succeeded, but schema contained references:\" : \"failed:\"), JSON.stringify(result, null, 2));\n            console.debug(\"Object:\", JSON.stringify(this, null, 2));\n        }\n        return result.valid;\n    }\n}\n\n\nexport default RethinkObject;\n\n"],"sourceRoot":"/source/"}