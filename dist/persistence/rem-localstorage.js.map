{"version":3,"sources":["persistence/rem-localstorage.js"],"names":["window","localStorage","sessionStorage","Storage","type","createCookie","name","value","days","date","expires","Date","setTime","getTime","toGMTString","document","cookie","readCookie","i","c","nameEQ","ca","split","length","charAt","substring","indexOf","setData","data","JSON","stringify","clearData","getData","parse","clear","this","getItem","key","undefined","ctr","k","removeItem","setItem"],"mappings":"AAAA,YACkC,oBAAvBA,QAAOC,cAA+D,mBAAzBD,QAAOE,gBAA+B,WAE9F,GAAIC,GAAU,SAAUC,GACtB,QAASC,GAAaC,EAAMC,EAAOC,GACjC,GAAIC,GAAMC,CAENF,IACFC,EAAO,GAAIE,MACXF,EAAKG,QAAQH,EAAKI,UAAgB,GAALL,EAAQ,GAAG,GAAG,KAC3CE,EAAU,aAAaD,EAAKK,eAE5BJ,EAAU,GAEZK,SAASC,OAASV,EAAK,IAAIC,EAAMG,EAAQ,WAG3C,QAASO,GAAWX,GAClB,GAEIY,GAAGC,EAFHC,EAASd,EAAO,IAChBe,EAAKN,SAASC,OAAOM,MAAM,IAG/B,KAAKJ,EAAE,EAAGA,EAAIG,EAAGE,OAAQL,IAAK,CAE5B,IADAC,EAAIE,EAAGH,GACa,KAAbC,EAAEK,OAAO,IACdL,EAAIA,EAAEM,UAAU,EAAEN,EAAEI,OAGtB,IAAyB,GAArBJ,EAAEO,QAAQN,GACZ,MAAOD,GAAEM,UAAUL,EAAOG,OAAOJ,EAAEI,QAGvC,MAAO,MAGT,QAASI,GAAQC,GACfA,EAAOC,KAAKC,UAAUF,GACV,WAARxB,EACFJ,OAAOM,KAAOsB,EAEdvB,EAAa,eAAgBuB,EAAM,KAIvC,QAASG,KACK,WAAR3B,EACFJ,OAAOM,KAAO,GAEdD,EAAa,eAAgB,GAAI,KAIrC,QAAS2B,KACP,GAAIJ,GAAe,WAARxB,EAAoBJ,OAAOM,KAAOW,EAAW,eACxD,OAAOW,GAAOC,KAAKI,MAAML,MAK3B,GAAIA,GAAOI,GAEX,QACET,OAAQ,EACRW,MAAO,WACLN,KACAO,KAAKZ,OAAS,EACdQ,KAEFK,QAAS,SAAUC,GACjB,MAAqBC,UAAdV,EAAKS,GAAqB,KAAOT,EAAKS,IAE/CA,IAAK,SAAUnB,GAEb,GAAIqB,GAAM,CACV,KAAK,GAAIC,KAAKZ,GAAM,CAClB,GAAIW,GAAOrB,EAAG,MAAOsB,EAChBD,KAEP,MAAO,OAETE,WAAY,SAAUJ,SACbT,GAAKS,GACZF,KAAKZ,SACLI,EAAQC,IAEVc,QAAS,SAAUL,EAAK9B,GACtBqB,EAAKS,GAAO9B,EAAM,GAClB4B,KAAKZ,SACLI,EAAQC,KAKoB,oBAAvB5B,QAAOC,eAA6BD,OAAOC,aAAe,GAAIE,GAAQ,UAC7C,mBAAzBH,QAAOE,iBAA+BF,OAAOE,eAAiB,GAAIC,GAAQ","file":"persistence/rem-localstorage.js","sourcesContent":["// By Remy Sharp https://gist.github.com/remy/350433\nif (typeof window.localStorage == 'undefined' || typeof window.sessionStorage == 'undefined') (function () {\n\nvar Storage = function (type) {\n  function createCookie(name, value, days) {\n    var date, expires;\n\n    if (days) {\n      date = new Date();\n      date.setTime(date.getTime()+(days*24*60*60*1000));\n      expires = \"; expires=\"+date.toGMTString();\n    } else {\n      expires = \"\";\n    }\n    document.cookie = name+\"=\"+value+expires+\"; path=/\";\n  }\n\n  function readCookie(name) {\n    var nameEQ = name + \"=\",\n        ca = document.cookie.split(';'),\n        i, c;\n\n    for (i=0; i < ca.length; i++) {\n      c = ca[i];\n      while (c.charAt(0)==' ') {\n        c = c.substring(1,c.length);\n      }\n\n      if (c.indexOf(nameEQ) == 0) {\n        return c.substring(nameEQ.length,c.length);\n      }\n    }\n    return null;\n  }\n\n  function setData(data) {\n    data = JSON.stringify(data);\n    if (type == 'session') {\n      window.name = data;\n    } else {\n      createCookie('localStorage', data, 365);\n    }\n  }\n\n  function clearData() {\n    if (type == 'session') {\n      window.name = '';\n    } else {\n      createCookie('localStorage', '', 365);\n    }\n  }\n\n  function getData() {\n    var data = type == 'session' ? window.name : readCookie('localStorage');\n    return data ? JSON.parse(data) : {};\n  }\n\n\n  // initialise if there's already data\n  var data = getData();\n\n  return {\n    length: 0,\n    clear: function () {\n      data = {};\n      this.length = 0;\n      clearData();\n    },\n    getItem: function (key) {\n      return data[key] === undefined ? null : data[key];\n    },\n    key: function (i) {\n      // not perfect, but works\n      var ctr = 0;\n      for (var k in data) {\n        if (ctr == i) return k;\n        else ctr++;\n      }\n      return null;\n    },\n    removeItem: function (key) {\n      delete data[key];\n      this.length--;\n      setData(data);\n    },\n    setItem: function (key, value) {\n      data[key] = value+''; // forces the value to a string\n      this.length++;\n      setData(data);\n    }\n  };\n};\n\nif (typeof window.localStorage == 'undefined') window.localStorage = new Storage('local');\nif (typeof window.sessionStorage == 'undefined') window.sessionStorage = new Storage('session');\n\n})();\n"],"sourceRoot":"/source/"}