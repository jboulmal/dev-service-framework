{
  "RuntimeUA": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuUnVudGltZVVBID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT0iZnVuY3Rpb24iJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrbysiJyIpO3Rocm93IGYuY29kZT0iTU9EVUxFX05PVF9GT1VORCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT0iZnVuY3Rpb24iJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBhc24xID0gZXhwb3J0czsKCmFzbjEuYmlnbnVtID0gcmVxdWlyZSgnYm4uanMnKTsKCmFzbjEuZGVmaW5lID0gcmVxdWlyZSgnLi9hc24xL2FwaScpLmRlZmluZTsKYXNuMS5iYXNlID0gcmVxdWlyZSgnLi9hc24xL2Jhc2UnKTsKYXNuMS5jb25zdGFudHMgPSByZXF1aXJlKCcuL2FzbjEvY29uc3RhbnRzJyk7CmFzbjEuZGVjb2RlcnMgPSByZXF1aXJlKCcuL2FzbjEvZGVjb2RlcnMnKTsKYXNuMS5lbmNvZGVycyA9IHJlcXVpcmUoJy4vYXNuMS9lbmNvZGVycycpOwoKfSx7Ii4vYXNuMS9hcGkiOjIsIi4vYXNuMS9iYXNlIjo0LCIuL2FzbjEvY29uc3RhbnRzIjo4LCIuL2FzbjEvZGVjb2RlcnMiOjEwLCIuL2FzbjEvZW5jb2RlcnMiOjEzLCJibi5qcyI6NDF9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGFzbjEgPSByZXF1aXJlKCcuLi9hc24xJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Cgp2YXIgYXBpID0gZXhwb3J0czsKCmFwaS5kZWZpbmUgPSBmdW5jdGlvbiBkZWZpbmUobmFtZSwgYm9keSkgewogIHJldHVybiBuZXcgRW50aXR5KG5hbWUsIGJvZHkpOwp9OwoKZnVuY3Rpb24gRW50aXR5KG5hbWUsIGJvZHkpIHsKICB0aGlzLm5hbWUgPSBuYW1lOwogIHRoaXMuYm9keSA9IGJvZHk7CgogIHRoaXMuZGVjb2RlcnMgPSB7fTsKICB0aGlzLmVuY29kZXJzID0ge307Cn07CgpFbnRpdHkucHJvdG90eXBlLl9jcmVhdGVOYW1lZCA9IGZ1bmN0aW9uIGNyZWF0ZU5hbWVkKGJhc2UpIHsKICB2YXIgbmFtZWQ7CiAgdHJ5IHsKICAgIG5hbWVkID0gcmVxdWlyZSgndm0nKS5ydW5JblRoaXNDb250ZXh0KAogICAgICAnKGZ1bmN0aW9uICcgKyB0aGlzLm5hbWUgKyAnKGVudGl0eSkge1xuJyArCiAgICAgICcgIHRoaXMuX2luaXROYW1lZChlbnRpdHkpO1xuJyArCiAgICAgICd9KScKICAgICk7CiAgfSBjYXRjaCAoZSkgewogICAgbmFtZWQgPSBmdW5jdGlvbiAoZW50aXR5KSB7CiAgICAgIHRoaXMuX2luaXROYW1lZChlbnRpdHkpOwogICAgfTsKICB9CiAgaW5oZXJpdHMobmFtZWQsIGJhc2UpOwogIG5hbWVkLnByb3RvdHlwZS5faW5pdE5hbWVkID0gZnVuY3Rpb24gaW5pdG5hbWVkKGVudGl0eSkgewogICAgYmFzZS5jYWxsKHRoaXMsIGVudGl0eSk7CiAgfTsKCiAgcmV0dXJuIG5ldyBuYW1lZCh0aGlzKTsKfTsKCkVudGl0eS5wcm90b3R5cGUuX2dldERlY29kZXIgPSBmdW5jdGlvbiBfZ2V0RGVjb2RlcihlbmMpIHsKICAvLyBMYXppbHkgY3JlYXRlIGRlY29kZXIKICBpZiAoIXRoaXMuZGVjb2RlcnMuaGFzT3duUHJvcGVydHkoZW5jKSkKICAgIHRoaXMuZGVjb2RlcnNbZW5jXSA9IHRoaXMuX2NyZWF0ZU5hbWVkKGFzbjEuZGVjb2RlcnNbZW5jXSk7CiAgcmV0dXJuIHRoaXMuZGVjb2RlcnNbZW5jXTsKfTsKCkVudGl0eS5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGRhdGEsIGVuYywgb3B0aW9ucykgewogIHJldHVybiB0aGlzLl9nZXREZWNvZGVyKGVuYykuZGVjb2RlKGRhdGEsIG9wdGlvbnMpOwp9OwoKRW50aXR5LnByb3RvdHlwZS5fZ2V0RW5jb2RlciA9IGZ1bmN0aW9uIF9nZXRFbmNvZGVyKGVuYykgewogIC8vIExhemlseSBjcmVhdGUgZW5jb2RlcgogIGlmICghdGhpcy5lbmNvZGVycy5oYXNPd25Qcm9wZXJ0eShlbmMpKQogICAgdGhpcy5lbmNvZGVyc1tlbmNdID0gdGhpcy5fY3JlYXRlTmFtZWQoYXNuMS5lbmNvZGVyc1tlbmNdKTsKICByZXR1cm4gdGhpcy5lbmNvZGVyc1tlbmNdOwp9OwoKRW50aXR5LnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoZGF0YSwgZW5jLCAvKiBpbnRlcm5hbCAqLyByZXBvcnRlcikgewogIHJldHVybiB0aGlzLl9nZXRFbmNvZGVyKGVuYykuZW5jb2RlKGRhdGEsIHJlcG9ydGVyKTsKfTsKCn0seyIuLi9hc24xIjoxLCJpbmhlcml0cyI6MTI4LCJ2bSI6MTc3fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CnZhciBSZXBvcnRlciA9IHJlcXVpcmUoJy4uL2Jhc2UnKS5SZXBvcnRlcjsKdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKCmZ1bmN0aW9uIERlY29kZXJCdWZmZXIoYmFzZSwgb3B0aW9ucykgewogIFJlcG9ydGVyLmNhbGwodGhpcywgb3B0aW9ucyk7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYmFzZSkpIHsKICAgIHRoaXMuZXJyb3IoJ0lucHV0IG5vdCBCdWZmZXInKTsKICAgIHJldHVybjsKICB9CgogIHRoaXMuYmFzZSA9IGJhc2U7CiAgdGhpcy5vZmZzZXQgPSAwOwogIHRoaXMubGVuZ3RoID0gYmFzZS5sZW5ndGg7Cn0KaW5oZXJpdHMoRGVjb2RlckJ1ZmZlciwgUmVwb3J0ZXIpOwpleHBvcnRzLkRlY29kZXJCdWZmZXIgPSBEZWNvZGVyQnVmZmVyOwoKRGVjb2RlckJ1ZmZlci5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIHNhdmUoKSB7CiAgcmV0dXJuIHsgb2Zmc2V0OiB0aGlzLm9mZnNldCwgcmVwb3J0ZXI6IFJlcG9ydGVyLnByb3RvdHlwZS5zYXZlLmNhbGwodGhpcykgfTsKfTsKCkRlY29kZXJCdWZmZXIucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbiByZXN0b3JlKHNhdmUpIHsKICAvLyBSZXR1cm4gc2tpcHBlZCBkYXRhCiAgdmFyIHJlcyA9IG5ldyBEZWNvZGVyQnVmZmVyKHRoaXMuYmFzZSk7CiAgcmVzLm9mZnNldCA9IHNhdmUub2Zmc2V0OwogIHJlcy5sZW5ndGggPSB0aGlzLm9mZnNldDsKCiAgdGhpcy5vZmZzZXQgPSBzYXZlLm9mZnNldDsKICBSZXBvcnRlci5wcm90b3R5cGUucmVzdG9yZS5jYWxsKHRoaXMsIHNhdmUucmVwb3J0ZXIpOwoKICByZXR1cm4gcmVzOwp9OwoKRGVjb2RlckJ1ZmZlci5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkoKSB7CiAgcmV0dXJuIHRoaXMub2Zmc2V0ID09PSB0aGlzLmxlbmd0aDsKfTsKCkRlY29kZXJCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OChmYWlsKSB7CiAgaWYgKHRoaXMub2Zmc2V0ICsgMSA8PSB0aGlzLmxlbmd0aCkKICAgIHJldHVybiB0aGlzLmJhc2UucmVhZFVJbnQ4KHRoaXMub2Zmc2V0KyssIHRydWUpOwogIGVsc2UKICAgIHJldHVybiB0aGlzLmVycm9yKGZhaWwgfHwgJ0RlY29kZXJCdWZmZXIgb3ZlcnJ1bicpOwp9CgpEZWNvZGVyQnVmZmVyLnByb3RvdHlwZS5za2lwID0gZnVuY3Rpb24gc2tpcChieXRlcywgZmFpbCkgewogIGlmICghKHRoaXMub2Zmc2V0ICsgYnl0ZXMgPD0gdGhpcy5sZW5ndGgpKQogICAgcmV0dXJuIHRoaXMuZXJyb3IoZmFpbCB8fCAnRGVjb2RlckJ1ZmZlciBvdmVycnVuJyk7CgogIHZhciByZXMgPSBuZXcgRGVjb2RlckJ1ZmZlcih0aGlzLmJhc2UpOwoKICAvLyBTaGFyZSByZXBvcnRlciBzdGF0ZQogIHJlcy5fcmVwb3J0ZXJTdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CgogIHJlcy5vZmZzZXQgPSB0aGlzLm9mZnNldDsKICByZXMubGVuZ3RoID0gdGhpcy5vZmZzZXQgKyBieXRlczsKICB0aGlzLm9mZnNldCArPSBieXRlczsKICByZXR1cm4gcmVzOwp9CgpEZWNvZGVyQnVmZmVyLnByb3RvdHlwZS5yYXcgPSBmdW5jdGlvbiByYXcoc2F2ZSkgewogIHJldHVybiB0aGlzLmJhc2Uuc2xpY2Uoc2F2ZSA/IHNhdmUub2Zmc2V0IDogdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoKTsKfQoKZnVuY3Rpb24gRW5jb2RlckJ1ZmZlcih2YWx1ZSwgcmVwb3J0ZXIpIHsKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHRoaXMubGVuZ3RoID0gMDsKICAgIHRoaXMudmFsdWUgPSB2YWx1ZS5tYXAoZnVuY3Rpb24oaXRlbSkgewogICAgICBpZiAoIShpdGVtIGluc3RhbmNlb2YgRW5jb2RlckJ1ZmZlcikpCiAgICAgICAgaXRlbSA9IG5ldyBFbmNvZGVyQnVmZmVyKGl0ZW0sIHJlcG9ydGVyKTsKICAgICAgdGhpcy5sZW5ndGggKz0gaXRlbS5sZW5ndGg7CiAgICAgIHJldHVybiBpdGVtOwogICAgfSwgdGhpcyk7CiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7CiAgICBpZiAoISgwIDw9IHZhbHVlICYmIHZhbHVlIDw9IDB4ZmYpKQogICAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ25vbi1ieXRlIEVuY29kZXJCdWZmZXIgdmFsdWUnKTsKICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgIHRoaXMubGVuZ3RoID0gMTsKICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgIHRoaXMubGVuZ3RoID0gQnVmZmVyLmJ5dGVMZW5ndGgodmFsdWUpOwogIH0gZWxzZSBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbHVlKSkgewogICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgdGhpcy5sZW5ndGggPSB2YWx1ZS5sZW5ndGg7CiAgfSBlbHNlIHsKICAgIHJldHVybiByZXBvcnRlci5lcnJvcignVW5zdXBwb3J0ZWQgdHlwZTogJyArIHR5cGVvZiB2YWx1ZSk7CiAgfQp9CmV4cG9ydHMuRW5jb2RlckJ1ZmZlciA9IEVuY29kZXJCdWZmZXI7CgpFbmNvZGVyQnVmZmVyLnByb3RvdHlwZS5qb2luID0gZnVuY3Rpb24gam9pbihvdXQsIG9mZnNldCkgewogIGlmICghb3V0KQogICAgb3V0ID0gbmV3IEJ1ZmZlcih0aGlzLmxlbmd0aCk7CiAgaWYgKCFvZmZzZXQpCiAgICBvZmZzZXQgPSAwOwoKICBpZiAodGhpcy5sZW5ndGggPT09IDApCiAgICByZXR1cm4gb3V0OwoKICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnZhbHVlKSkgewogICAgdGhpcy52YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgaXRlbS5qb2luKG91dCwgb2Zmc2V0KTsKICAgICAgb2Zmc2V0ICs9IGl0ZW0ubGVuZ3RoOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIGlmICh0eXBlb2YgdGhpcy52YWx1ZSA9PT0gJ251bWJlcicpCiAgICAgIG91dFtvZmZzZXRdID0gdGhpcy52YWx1ZTsKICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAnc3RyaW5nJykKICAgICAgb3V0LndyaXRlKHRoaXMudmFsdWUsIG9mZnNldCk7CiAgICBlbHNlIGlmIChCdWZmZXIuaXNCdWZmZXIodGhpcy52YWx1ZSkpCiAgICAgIHRoaXMudmFsdWUuY29weShvdXQsIG9mZnNldCk7CiAgICBvZmZzZXQgKz0gdGhpcy5sZW5ndGg7CiAgfQoKICByZXR1cm4gb3V0Owp9OwoKfSx7Ii4uL2Jhc2UiOjQsImJ1ZmZlciI6NzAsImluaGVyaXRzIjoxMjh9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGJhc2UgPSBleHBvcnRzOwoKYmFzZS5SZXBvcnRlciA9IHJlcXVpcmUoJy4vcmVwb3J0ZXInKS5SZXBvcnRlcjsKYmFzZS5EZWNvZGVyQnVmZmVyID0gcmVxdWlyZSgnLi9idWZmZXInKS5EZWNvZGVyQnVmZmVyOwpiYXNlLkVuY29kZXJCdWZmZXIgPSByZXF1aXJlKCcuL2J1ZmZlcicpLkVuY29kZXJCdWZmZXI7CmJhc2UuTm9kZSA9IHJlcXVpcmUoJy4vbm9kZScpOwoKfSx7Ii4vYnVmZmVyIjozLCIuL25vZGUiOjUsIi4vcmVwb3J0ZXIiOjZ9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIFJlcG9ydGVyID0gcmVxdWlyZSgnLi4vYmFzZScpLlJlcG9ydGVyOwp2YXIgRW5jb2RlckJ1ZmZlciA9IHJlcXVpcmUoJy4uL2Jhc2UnKS5FbmNvZGVyQnVmZmVyOwp2YXIgRGVjb2RlckJ1ZmZlciA9IHJlcXVpcmUoJy4uL2Jhc2UnKS5EZWNvZGVyQnVmZmVyOwp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnbWluaW1hbGlzdGljLWFzc2VydCcpOwoKLy8gU3VwcG9ydGVkIHRhZ3MKdmFyIHRhZ3MgPSBbCiAgJ3NlcScsICdzZXFvZicsICdzZXQnLCAnc2V0b2YnLCAnb2JqaWQnLCAnYm9vbCcsCiAgJ2dlbnRpbWUnLCAndXRjdGltZScsICdudWxsXycsICdlbnVtJywgJ2ludCcsCiAgJ2JpdHN0cicsICdibXBzdHInLCAnY2hhcnN0cicsICdnZW5zdHInLCAnZ3JhcGhzdHInLCAnaWE1c3RyJywgJ2lzbzY0NnN0cicsCiAgJ251bXN0cicsICdvY3RzdHInLCAncHJpbnRzdHInLCAndDYxc3RyJywgJ3VuaXN0cicsICd1dGY4c3RyJywgJ3ZpZGVvc3RyJwpdOwoKLy8gUHVibGljIG1ldGhvZHMgbGlzdAp2YXIgbWV0aG9kcyA9IFsKICAna2V5JywgJ29iaicsICd1c2UnLCAnb3B0aW9uYWwnLCAnZXhwbGljaXQnLCAnaW1wbGljaXQnLCAnZGVmJywgJ2Nob2ljZScsCiAgJ2FueScsICdjb250YWlucycKXS5jb25jYXQodGFncyk7CgovLyBPdmVycmlkZWQgbWV0aG9kcyBsaXN0CnZhciBvdmVycmlkZWQgPSBbCiAgJ19wZWVrVGFnJywgJ19kZWNvZGVUYWcnLCAnX3VzZScsCiAgJ19kZWNvZGVTdHInLCAnX2RlY29kZU9iamlkJywgJ19kZWNvZGVUaW1lJywKICAnX2RlY29kZU51bGwnLCAnX2RlY29kZUludCcsICdfZGVjb2RlQm9vbCcsICdfZGVjb2RlTGlzdCcsCgogICdfZW5jb2RlQ29tcG9zaXRlJywgJ19lbmNvZGVTdHInLCAnX2VuY29kZU9iamlkJywgJ19lbmNvZGVUaW1lJywKICAnX2VuY29kZU51bGwnLCAnX2VuY29kZUludCcsICdfZW5jb2RlQm9vbCcKXTsKCmZ1bmN0aW9uIE5vZGUoZW5jLCBwYXJlbnQpIHsKICB2YXIgc3RhdGUgPSB7fTsKICB0aGlzLl9iYXNlU3RhdGUgPSBzdGF0ZTsKCiAgc3RhdGUuZW5jID0gZW5jOwoKICBzdGF0ZS5wYXJlbnQgPSBwYXJlbnQgfHwgbnVsbDsKICBzdGF0ZS5jaGlsZHJlbiA9IG51bGw7CgogIC8vIFN0YXRlCiAgc3RhdGUudGFnID0gbnVsbDsKICBzdGF0ZS5hcmdzID0gbnVsbDsKICBzdGF0ZS5yZXZlcnNlQXJncyA9IG51bGw7CiAgc3RhdGUuY2hvaWNlID0gbnVsbDsKICBzdGF0ZS5vcHRpb25hbCA9IGZhbHNlOwogIHN0YXRlLmFueSA9IGZhbHNlOwogIHN0YXRlLm9iaiA9IGZhbHNlOwogIHN0YXRlLnVzZSA9IG51bGw7CiAgc3RhdGUudXNlRGVjb2RlciA9IG51bGw7CiAgc3RhdGUua2V5ID0gbnVsbDsKICBzdGF0ZVsnZGVmYXVsdCddID0gbnVsbDsKICBzdGF0ZS5leHBsaWNpdCA9IG51bGw7CiAgc3RhdGUuaW1wbGljaXQgPSBudWxsOwogIHN0YXRlLmNvbnRhaW5zID0gbnVsbDsKCiAgLy8gU2hvdWxkIGNyZWF0ZSBuZXcgaW5zdGFuY2Ugb24gZWFjaCBtZXRob2QKICBpZiAoIXN0YXRlLnBhcmVudCkgewogICAgc3RhdGUuY2hpbGRyZW4gPSBbXTsKICAgIHRoaXMuX3dyYXAoKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBOb2RlOwoKdmFyIHN0YXRlUHJvcHMgPSBbCiAgJ2VuYycsICdwYXJlbnQnLCAnY2hpbGRyZW4nLCAndGFnJywgJ2FyZ3MnLCAncmV2ZXJzZUFyZ3MnLCAnY2hvaWNlJywKICAnb3B0aW9uYWwnLCAnYW55JywgJ29iaicsICd1c2UnLCAnYWx0ZXJlZFVzZScsICdrZXknLCAnZGVmYXVsdCcsICdleHBsaWNpdCcsCiAgJ2ltcGxpY2l0JwpdOwoKTm9kZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgdmFyIGNzdGF0ZSA9IHt9OwogIHN0YXRlUHJvcHMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7CiAgICBjc3RhdGVbcHJvcF0gPSBzdGF0ZVtwcm9wXTsKICB9KTsKICB2YXIgcmVzID0gbmV3IHRoaXMuY29uc3RydWN0b3IoY3N0YXRlLnBhcmVudCk7CiAgcmVzLl9iYXNlU3RhdGUgPSBjc3RhdGU7CiAgcmV0dXJuIHJlczsKfTsKCk5vZGUucHJvdG90eXBlLl93cmFwID0gZnVuY3Rpb24gd3JhcCgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgbWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgdGhpc1ttZXRob2RdID0gZnVuY3Rpb24gX3dyYXBwZWRNZXRob2QoKSB7CiAgICAgIHZhciBjbG9uZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpOwogICAgICBzdGF0ZS5jaGlsZHJlbi5wdXNoKGNsb25lKTsKICAgICAgcmV0dXJuIGNsb25lW21ldGhvZF0uYXBwbHkoY2xvbmUsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0sIHRoaXMpOwp9OwoKTm9kZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0KGJvZHkpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5wYXJlbnQgPT09IG51bGwpOwogIGJvZHkuY2FsbCh0aGlzKTsKCiAgLy8gRmlsdGVyIGNoaWxkcmVuCiAgc3RhdGUuY2hpbGRyZW4gPSBzdGF0ZS5jaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24oY2hpbGQpIHsKICAgIHJldHVybiBjaGlsZC5fYmFzZVN0YXRlLnBhcmVudCA9PT0gdGhpczsKICB9LCB0aGlzKTsKICBhc3NlcnQuZXF1YWwoc3RhdGUuY2hpbGRyZW4ubGVuZ3RoLCAxLCAnUm9vdCBub2RlIGNhbiBoYXZlIG9ubHkgb25lIGNoaWxkJyk7Cn07CgpOb2RlLnByb3RvdHlwZS5fdXNlQXJncyA9IGZ1bmN0aW9uIHVzZUFyZ3MoYXJncykgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgLy8gRmlsdGVyIGNoaWxkcmVuIGFuZCBhcmdzCiAgdmFyIGNoaWxkcmVuID0gYXJncy5maWx0ZXIoZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4gYXJnIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3RvcjsKICB9LCB0aGlzKTsKICBhcmdzID0gYXJncy5maWx0ZXIoZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4gIShhcmcgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKTsKICB9LCB0aGlzKTsKCiAgaWYgKGNoaWxkcmVuLmxlbmd0aCAhPT0gMCkgewogICAgYXNzZXJ0KHN0YXRlLmNoaWxkcmVuID09PSBudWxsKTsKICAgIHN0YXRlLmNoaWxkcmVuID0gY2hpbGRyZW47CgogICAgLy8gUmVwbGFjZSBwYXJlbnQgdG8gbWFpbnRhaW4gYmFja3dhcmQgbGluawogICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkgewogICAgICBjaGlsZC5fYmFzZVN0YXRlLnBhcmVudCA9IHRoaXM7CiAgICB9LCB0aGlzKTsKICB9CiAgaWYgKGFyZ3MubGVuZ3RoICE9PSAwKSB7CiAgICBhc3NlcnQoc3RhdGUuYXJncyA9PT0gbnVsbCk7CiAgICBzdGF0ZS5hcmdzID0gYXJnczsKICAgIHN0YXRlLnJldmVyc2VBcmdzID0gYXJncy5tYXAoZnVuY3Rpb24oYXJnKSB7CiAgICAgIGlmICh0eXBlb2YgYXJnICE9PSAnb2JqZWN0JyB8fCBhcmcuY29uc3RydWN0b3IgIT09IE9iamVjdCkKICAgICAgICByZXR1cm4gYXJnOwoKICAgICAgdmFyIHJlcyA9IHt9OwogICAgICBPYmplY3Qua2V5cyhhcmcpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgaWYgKGtleSA9PSAoa2V5IHwgMCkpCiAgICAgICAgICBrZXkgfD0gMDsKICAgICAgICB2YXIgdmFsdWUgPSBhcmdba2V5XTsKICAgICAgICByZXNbdmFsdWVdID0ga2V5OwogICAgICB9KTsKICAgICAgcmV0dXJuIHJlczsKICAgIH0pOwogIH0KfTsKCi8vCi8vIE92ZXJyaWRlZCBtZXRob2RzCi8vCgpvdmVycmlkZWQuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICBOb2RlLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gX292ZXJyaWRlZCgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICAgIHRocm93IG5ldyBFcnJvcihtZXRob2QgKyAnIG5vdCBpbXBsZW1lbnRlZCBmb3IgZW5jb2Rpbmc6ICcgKyBzdGF0ZS5lbmMpOwogIH07Cn0pOwoKLy8KLy8gUHVibGljIG1ldGhvZHMKLy8KCnRhZ3MuZm9yRWFjaChmdW5jdGlvbih0YWcpIHsKICBOb2RlLnByb3RvdHlwZVt0YWddID0gZnVuY3Rpb24gX3RhZ01ldGhvZCgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKCiAgICBhc3NlcnQoc3RhdGUudGFnID09PSBudWxsKTsKICAgIHN0YXRlLnRhZyA9IHRhZzsKCiAgICB0aGlzLl91c2VBcmdzKGFyZ3MpOwoKICAgIHJldHVybiB0aGlzOwogIH07Cn0pOwoKTm9kZS5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gdXNlKGl0ZW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS51c2UgPT09IG51bGwpOwogIHN0YXRlLnVzZSA9IGl0ZW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUub3B0aW9uYWwgPSBmdW5jdGlvbiBvcHRpb25hbCgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIHN0YXRlLm9wdGlvbmFsID0gdHJ1ZTsKCiAgcmV0dXJuIHRoaXM7Cn07CgpOb2RlLnByb3RvdHlwZS5kZWYgPSBmdW5jdGlvbiBkZWYodmFsKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICBhc3NlcnQoc3RhdGVbJ2RlZmF1bHQnXSA9PT0gbnVsbCk7CiAgc3RhdGVbJ2RlZmF1bHQnXSA9IHZhbDsKICBzdGF0ZS5vcHRpb25hbCA9IHRydWU7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuZXhwbGljaXQgPSBmdW5jdGlvbiBleHBsaWNpdChudW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5leHBsaWNpdCA9PT0gbnVsbCAmJiBzdGF0ZS5pbXBsaWNpdCA9PT0gbnVsbCk7CiAgc3RhdGUuZXhwbGljaXQgPSBudW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuaW1wbGljaXQgPSBmdW5jdGlvbiBpbXBsaWNpdChudW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5leHBsaWNpdCA9PT0gbnVsbCAmJiBzdGF0ZS5pbXBsaWNpdCA9PT0gbnVsbCk7CiAgc3RhdGUuaW1wbGljaXQgPSBudW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUub2JqID0gZnVuY3Rpb24gb2JqKCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CgogIHN0YXRlLm9iaiA9IHRydWU7CgogIGlmIChhcmdzLmxlbmd0aCAhPT0gMCkKICAgIHRoaXMuX3VzZUFyZ3MoYXJncyk7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUua2V5ID0gZnVuY3Rpb24ga2V5KG5ld0tleSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLmtleSA9PT0gbnVsbCk7CiAgc3RhdGUua2V5ID0gbmV3S2V5OwoKICByZXR1cm4gdGhpczsKfTsKCk5vZGUucHJvdG90eXBlLmFueSA9IGZ1bmN0aW9uIGFueSgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIHN0YXRlLmFueSA9IHRydWU7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuY2hvaWNlID0gZnVuY3Rpb24gY2hvaWNlKG9iaikgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLmNob2ljZSA9PT0gbnVsbCk7CiAgc3RhdGUuY2hvaWNlID0gb2JqOwogIHRoaXMuX3VzZUFyZ3MoT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24oa2V5KSB7CiAgICByZXR1cm4gb2JqW2tleV07CiAgfSkpOwoKICByZXR1cm4gdGhpczsKfTsKCk5vZGUucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gY29udGFpbnMoaXRlbSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLnVzZSA9PT0gbnVsbCk7CiAgc3RhdGUuY29udGFpbnMgPSBpdGVtOwoKICByZXR1cm4gdGhpczsKfTsKCi8vCi8vIERlY29kaW5nCi8vCgpOb2RlLnByb3RvdHlwZS5fZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAvLyBEZWNvZGUgcm9vdCBub2RlCiAgaWYgKHN0YXRlLnBhcmVudCA9PT0gbnVsbCkKICAgIHJldHVybiBpbnB1dC53cmFwUmVzdWx0KHN0YXRlLmNoaWxkcmVuWzBdLl9kZWNvZGUoaW5wdXQpKTsKCiAgdmFyIHJlc3VsdCA9IHN0YXRlWydkZWZhdWx0J107CiAgdmFyIHByZXNlbnQgPSB0cnVlOwoKICB2YXIgcHJldktleTsKICBpZiAoc3RhdGUua2V5ICE9PSBudWxsKQogICAgcHJldktleSA9IGlucHV0LmVudGVyS2V5KHN0YXRlLmtleSk7CgogIC8vIENoZWNrIGlmIHRhZyBpcyB0aGVyZQogIGlmIChzdGF0ZS5vcHRpb25hbCkgewogICAgdmFyIHRhZyA9IG51bGw7CiAgICBpZiAoc3RhdGUuZXhwbGljaXQgIT09IG51bGwpCiAgICAgIHRhZyA9IHN0YXRlLmV4cGxpY2l0OwogICAgZWxzZSBpZiAoc3RhdGUuaW1wbGljaXQgIT09IG51bGwpCiAgICAgIHRhZyA9IHN0YXRlLmltcGxpY2l0OwogICAgZWxzZSBpZiAoc3RhdGUudGFnICE9PSBudWxsKQogICAgICB0YWcgPSBzdGF0ZS50YWc7CgogICAgaWYgKHRhZyA9PT0gbnVsbCAmJiAhc3RhdGUuYW55KSB7CiAgICAgIC8vIFRyaWFsIGFuZCBFcnJvcgogICAgICB2YXIgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc3RhdGUuY2hvaWNlID09PSBudWxsKQogICAgICAgICAgdGhpcy5fZGVjb2RlR2VuZXJpYyhzdGF0ZS50YWcsIGlucHV0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB0aGlzLl9kZWNvZGVDaG9pY2UoaW5wdXQpOwogICAgICAgIHByZXNlbnQgPSB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcHJlc2VudCA9IGZhbHNlOwogICAgICB9CiAgICAgIGlucHV0LnJlc3RvcmUoc2F2ZSk7CiAgICB9IGVsc2UgewogICAgICBwcmVzZW50ID0gdGhpcy5fcGVla1RhZyhpbnB1dCwgdGFnLCBzdGF0ZS5hbnkpOwoKICAgICAgaWYgKGlucHV0LmlzRXJyb3IocHJlc2VudCkpCiAgICAgICAgcmV0dXJuIHByZXNlbnQ7CiAgICB9CiAgfQoKICAvLyBQdXNoIG9iamVjdCBvbiBzdGFjawogIHZhciBwcmV2T2JqOwogIGlmIChzdGF0ZS5vYmogJiYgcHJlc2VudCkKICAgIHByZXZPYmogPSBpbnB1dC5lbnRlck9iamVjdCgpOwoKICBpZiAocHJlc2VudCkgewogICAgLy8gVW53cmFwIGV4cGxpY2l0IHZhbHVlcwogICAgaWYgKHN0YXRlLmV4cGxpY2l0ICE9PSBudWxsKSB7CiAgICAgIHZhciBleHBsaWNpdCA9IHRoaXMuX2RlY29kZVRhZyhpbnB1dCwgc3RhdGUuZXhwbGljaXQpOwogICAgICBpZiAoaW5wdXQuaXNFcnJvcihleHBsaWNpdCkpCiAgICAgICAgcmV0dXJuIGV4cGxpY2l0OwogICAgICBpbnB1dCA9IGV4cGxpY2l0OwogICAgfQoKICAgIC8vIFVud3JhcCBpbXBsaWNpdCBhbmQgbm9ybWFsIHZhbHVlcwogICAgaWYgKHN0YXRlLnVzZSA9PT0gbnVsbCAmJiBzdGF0ZS5jaG9pY2UgPT09IG51bGwpIHsKICAgICAgaWYgKHN0YXRlLmFueSkKICAgICAgICB2YXIgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgICAgdmFyIGJvZHkgPSB0aGlzLl9kZWNvZGVUYWcoCiAgICAgICAgaW5wdXQsCiAgICAgICAgc3RhdGUuaW1wbGljaXQgIT09IG51bGwgPyBzdGF0ZS5pbXBsaWNpdCA6IHN0YXRlLnRhZywKICAgICAgICBzdGF0ZS5hbnkKICAgICAgKTsKICAgICAgaWYgKGlucHV0LmlzRXJyb3IoYm9keSkpCiAgICAgICAgcmV0dXJuIGJvZHk7CgogICAgICBpZiAoc3RhdGUuYW55KQogICAgICAgIHJlc3VsdCA9IGlucHV0LnJhdyhzYXZlKTsKICAgICAgZWxzZQogICAgICAgIGlucHV0ID0gYm9keTsKICAgIH0KCiAgICAvLyBTZWxlY3QgcHJvcGVyIG1ldGhvZCBmb3IgdGFnCiAgICBpZiAoc3RhdGUuYW55KQogICAgICByZXN1bHQgPSByZXN1bHQ7CiAgICBlbHNlIGlmIChzdGF0ZS5jaG9pY2UgPT09IG51bGwpCiAgICAgIHJlc3VsdCA9IHRoaXMuX2RlY29kZUdlbmVyaWMoc3RhdGUudGFnLCBpbnB1dCk7CiAgICBlbHNlCiAgICAgIHJlc3VsdCA9IHRoaXMuX2RlY29kZUNob2ljZShpbnB1dCk7CgogICAgaWYgKGlucHV0LmlzRXJyb3IocmVzdWx0KSkKICAgICAgcmV0dXJuIHJlc3VsdDsKCiAgICAvLyBEZWNvZGUgY2hpbGRyZW4KICAgIGlmICghc3RhdGUuYW55ICYmIHN0YXRlLmNob2ljZSA9PT0gbnVsbCAmJiBzdGF0ZS5jaGlsZHJlbiAhPT0gbnVsbCkgewogICAgICBzdGF0ZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIGRlY29kZUNoaWxkcmVuKGNoaWxkKSB7CiAgICAgICAgLy8gTk9URTogV2UgYXJlIGlnbm9yaW5nIGVycm9ycyBoZXJlLCB0byBsZXQgcGFyc2VyIGNvbnRpbnVlIHdpdGggb3RoZXIKICAgICAgICAvLyBwYXJ0cyBvZiBlbmNvZGVkIGRhdGEKICAgICAgICBjaGlsZC5fZGVjb2RlKGlucHV0KTsKICAgICAgfSk7CiAgICB9CgogICAgLy8gRGVjb2RlIGNvbnRhaW5lZC9lbmNvZGVkIGJ5IHNjaGVtYSwgb25seSBpbiBiaXQgb3Igb2N0ZXQgc3RyaW5ncwogICAgaWYgKHN0YXRlLmNvbnRhaW5zICYmIChzdGF0ZS50YWcgPT09ICdvY3RzdHInIHx8IHN0YXRlLnRhZyA9PT0gJ2JpdHN0cicpKSB7CiAgICAgIHZhciBkYXRhID0gbmV3IERlY29kZXJCdWZmZXIocmVzdWx0KTsKICAgICAgcmVzdWx0ID0gdGhpcy5fZ2V0VXNlKHN0YXRlLmNvbnRhaW5zLCBpbnB1dC5fcmVwb3J0ZXJTdGF0ZS5vYmopLl9kZWNvZGUoZGF0YSk7CiAgICB9CiAgfQoKICAvLyBQb3Agb2JqZWN0CiAgaWYgKHN0YXRlLm9iaiAmJiBwcmVzZW50KQogICAgcmVzdWx0ID0gaW5wdXQubGVhdmVPYmplY3QocHJldk9iaik7CgogIC8vIFNldCBrZXkKICBpZiAoc3RhdGUua2V5ICE9PSBudWxsICYmIChyZXN1bHQgIT09IG51bGwgfHwgcHJlc2VudCA9PT0gdHJ1ZSkpCiAgICBpbnB1dC5sZWF2ZUtleShwcmV2S2V5LCBzdGF0ZS5rZXksIHJlc3VsdCk7CgogIHJldHVybiByZXN1bHQ7Cn07CgpOb2RlLnByb3RvdHlwZS5fZGVjb2RlR2VuZXJpYyA9IGZ1bmN0aW9uIGRlY29kZUdlbmVyaWModGFnLCBpbnB1dCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgaWYgKHRhZyA9PT0gJ3NlcScgfHwgdGFnID09PSAnc2V0JykKICAgIHJldHVybiBudWxsOwogIGlmICh0YWcgPT09ICdzZXFvZicgfHwgdGFnID09PSAnc2V0b2YnKQogICAgcmV0dXJuIHRoaXMuX2RlY29kZUxpc3QoaW5wdXQsIHRhZywgc3RhdGUuYXJnc1swXSk7CiAgZWxzZSBpZiAoL3N0ciQvLnRlc3QodGFnKSkKICAgIHJldHVybiB0aGlzLl9kZWNvZGVTdHIoaW5wdXQsIHRhZyk7CiAgZWxzZSBpZiAodGFnID09PSAnb2JqaWQnICYmIHN0YXRlLmFyZ3MpCiAgICByZXR1cm4gdGhpcy5fZGVjb2RlT2JqaWQoaW5wdXQsIHN0YXRlLmFyZ3NbMF0sIHN0YXRlLmFyZ3NbMV0pOwogIGVsc2UgaWYgKHRhZyA9PT0gJ29iamlkJykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVPYmppZChpbnB1dCwgbnVsbCwgbnVsbCk7CiAgZWxzZSBpZiAodGFnID09PSAnZ2VudGltZScgfHwgdGFnID09PSAndXRjdGltZScpCiAgICByZXR1cm4gdGhpcy5fZGVjb2RlVGltZShpbnB1dCwgdGFnKTsKICBlbHNlIGlmICh0YWcgPT09ICdudWxsXycpCiAgICByZXR1cm4gdGhpcy5fZGVjb2RlTnVsbChpbnB1dCk7CiAgZWxzZSBpZiAodGFnID09PSAnYm9vbCcpCiAgICByZXR1cm4gdGhpcy5fZGVjb2RlQm9vbChpbnB1dCk7CiAgZWxzZSBpZiAodGFnID09PSAnaW50JyB8fCB0YWcgPT09ICdlbnVtJykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVJbnQoaW5wdXQsIHN0YXRlLmFyZ3MgJiYgc3RhdGUuYXJnc1swXSk7CiAgZWxzZSBpZiAoc3RhdGUudXNlICE9PSBudWxsKQogICAgcmV0dXJuIHRoaXMuX2dldFVzZShzdGF0ZS51c2UsIGlucHV0Ll9yZXBvcnRlclN0YXRlLm9iaikuX2RlY29kZShpbnB1dCk7CiAgZWxzZQogICAgcmV0dXJuIGlucHV0LmVycm9yKCd1bmtub3duIHRhZzogJyArIHRhZyk7CgogIHJldHVybiBudWxsOwp9OwoKTm9kZS5wcm90b3R5cGUuX2dldFVzZSA9IGZ1bmN0aW9uIF9nZXRVc2UoZW50aXR5LCBvYmopIHsKCiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwogIC8vIENyZWF0ZSBhbHRlcmVkIHVzZSBkZWNvZGVyIGlmIGltcGxpY2l0IGlzIHNldAogIHN0YXRlLnVzZURlY29kZXIgPSB0aGlzLl91c2UoZW50aXR5LCBvYmopOwogIGFzc2VydChzdGF0ZS51c2VEZWNvZGVyLl9iYXNlU3RhdGUucGFyZW50ID09PSBudWxsKTsKICBzdGF0ZS51c2VEZWNvZGVyID0gc3RhdGUudXNlRGVjb2Rlci5fYmFzZVN0YXRlLmNoaWxkcmVuWzBdOwogIGlmIChzdGF0ZS5pbXBsaWNpdCAhPT0gc3RhdGUudXNlRGVjb2Rlci5fYmFzZVN0YXRlLmltcGxpY2l0KSB7CiAgICBzdGF0ZS51c2VEZWNvZGVyID0gc3RhdGUudXNlRGVjb2Rlci5jbG9uZSgpOwogICAgc3RhdGUudXNlRGVjb2Rlci5fYmFzZVN0YXRlLmltcGxpY2l0ID0gc3RhdGUuaW1wbGljaXQ7CiAgfQogIHJldHVybiBzdGF0ZS51c2VEZWNvZGVyOwp9OwoKTm9kZS5wcm90b3R5cGUuX2RlY29kZUNob2ljZSA9IGZ1bmN0aW9uIGRlY29kZUNob2ljZShpbnB1dCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICB2YXIgcmVzdWx0ID0gbnVsbDsKICB2YXIgbWF0Y2ggPSBmYWxzZTsKCiAgT2JqZWN0LmtleXMoc3RhdGUuY2hvaWNlKS5zb21lKGZ1bmN0aW9uKGtleSkgewogICAgdmFyIHNhdmUgPSBpbnB1dC5zYXZlKCk7CiAgICB2YXIgbm9kZSA9IHN0YXRlLmNob2ljZVtrZXldOwogICAgdHJ5IHsKICAgICAgdmFyIHZhbHVlID0gbm9kZS5fZGVjb2RlKGlucHV0KTsKICAgICAgaWYgKGlucHV0LmlzRXJyb3IodmFsdWUpKQogICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgIHJlc3VsdCA9IHsgdHlwZToga2V5LCB2YWx1ZTogdmFsdWUgfTsKICAgICAgbWF0Y2ggPSB0cnVlOwogICAgfSBjYXRjaCAoZSkgewogICAgICBpbnB1dC5yZXN0b3JlKHNhdmUpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9LCB0aGlzKTsKCiAgaWYgKCFtYXRjaCkKICAgIHJldHVybiBpbnB1dC5lcnJvcignQ2hvaWNlIG5vdCBtYXRjaGVkJyk7CgogIHJldHVybiByZXN1bHQ7Cn07CgovLwovLyBFbmNvZGluZwovLwoKTm9kZS5wcm90b3R5cGUuX2NyZWF0ZUVuY29kZXJCdWZmZXIgPSBmdW5jdGlvbiBjcmVhdGVFbmNvZGVyQnVmZmVyKGRhdGEpIHsKICByZXR1cm4gbmV3IEVuY29kZXJCdWZmZXIoZGF0YSwgdGhpcy5yZXBvcnRlcik7Cn07CgpOb2RlLnByb3RvdHlwZS5fZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKGRhdGEsIHJlcG9ydGVyLCBwYXJlbnQpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgaWYgKHN0YXRlWydkZWZhdWx0J10gIT09IG51bGwgJiYgc3RhdGVbJ2RlZmF1bHQnXSA9PT0gZGF0YSkKICAgIHJldHVybjsKCiAgdmFyIHJlc3VsdCA9IHRoaXMuX2VuY29kZVZhbHVlKGRhdGEsIHJlcG9ydGVyLCBwYXJlbnQpOwogIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkKICAgIHJldHVybjsKCiAgaWYgKHRoaXMuX3NraXBEZWZhdWx0KHJlc3VsdCwgcmVwb3J0ZXIsIHBhcmVudCkpCiAgICByZXR1cm47CgogIHJldHVybiByZXN1bHQ7Cn07CgpOb2RlLnByb3RvdHlwZS5fZW5jb2RlVmFsdWUgPSBmdW5jdGlvbiBlbmNvZGUoZGF0YSwgcmVwb3J0ZXIsIHBhcmVudCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgLy8gRGVjb2RlIHJvb3Qgbm9kZQogIGlmIChzdGF0ZS5wYXJlbnQgPT09IG51bGwpCiAgICByZXR1cm4gc3RhdGUuY2hpbGRyZW5bMF0uX2VuY29kZShkYXRhLCByZXBvcnRlciB8fCBuZXcgUmVwb3J0ZXIoKSk7CgogIHZhciByZXN1bHQgPSBudWxsOwogIHZhciBwcmVzZW50ID0gdHJ1ZTsKCiAgLy8gU2V0IHJlcG9ydGVyIHRvIHNoYXJlIGl0IHdpdGggYSBjaGlsZCBjbGFzcwogIHRoaXMucmVwb3J0ZXIgPSByZXBvcnRlcjsKCiAgLy8gQ2hlY2sgaWYgZGF0YSBpcyB0aGVyZQogIGlmIChzdGF0ZS5vcHRpb25hbCAmJiBkYXRhID09PSB1bmRlZmluZWQpIHsKICAgIGlmIChzdGF0ZVsnZGVmYXVsdCddICE9PSBudWxsKQogICAgICBkYXRhID0gc3RhdGVbJ2RlZmF1bHQnXQogICAgZWxzZQogICAgICByZXR1cm47CiAgfQoKICAvLyBGb3IgZXJyb3IgcmVwb3J0aW5nCiAgdmFyIHByZXZLZXk7CgogIC8vIEVuY29kZSBjaGlsZHJlbiBmaXJzdAogIHZhciBjb250ZW50ID0gbnVsbDsKICB2YXIgcHJpbWl0aXZlID0gZmFsc2U7CiAgaWYgKHN0YXRlLmFueSkgewogICAgLy8gQW55dGhpbmcgdGhhdCB3YXMgZ2l2ZW4gaXMgdHJhbnNsYXRlZCB0byBidWZmZXIKICAgIHJlc3VsdCA9IHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoZGF0YSk7CiAgfSBlbHNlIGlmIChzdGF0ZS5jaG9pY2UpIHsKICAgIHJlc3VsdCA9IHRoaXMuX2VuY29kZUNob2ljZShkYXRhLCByZXBvcnRlcik7CiAgfSBlbHNlIGlmIChzdGF0ZS5jb250YWlucykgewogICAgY29udGVudCA9IHRoaXMuX2dldFVzZShzdGF0ZS5jb250YWlucywgcGFyZW50KS5fZW5jb2RlKGRhdGEsIHJlcG9ydGVyKTsKICAgIHByaW1pdGl2ZSA9IHRydWU7CiAgfSBlbHNlIGlmIChzdGF0ZS5jaGlsZHJlbikgewogICAgY29udGVudCA9IHN0YXRlLmNoaWxkcmVuLm1hcChmdW5jdGlvbihjaGlsZCkgewogICAgICBpZiAoY2hpbGQuX2Jhc2VTdGF0ZS50YWcgPT09ICdudWxsXycpCiAgICAgICAgcmV0dXJuIGNoaWxkLl9lbmNvZGUobnVsbCwgcmVwb3J0ZXIsIGRhdGEpOwoKICAgICAgaWYgKGNoaWxkLl9iYXNlU3RhdGUua2V5ID09PSBudWxsKQogICAgICAgIHJldHVybiByZXBvcnRlci5lcnJvcignQ2hpbGQgc2hvdWxkIGhhdmUgYSBrZXknKTsKICAgICAgdmFyIHByZXZLZXkgPSByZXBvcnRlci5lbnRlcktleShjaGlsZC5fYmFzZVN0YXRlLmtleSk7CgogICAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKQogICAgICAgIHJldHVybiByZXBvcnRlci5lcnJvcignQ2hpbGQgZXhwZWN0ZWQsIGJ1dCBpbnB1dCBpcyBub3Qgb2JqZWN0Jyk7CgogICAgICB2YXIgcmVzID0gY2hpbGQuX2VuY29kZShkYXRhW2NoaWxkLl9iYXNlU3RhdGUua2V5XSwgcmVwb3J0ZXIsIGRhdGEpOwogICAgICByZXBvcnRlci5sZWF2ZUtleShwcmV2S2V5KTsKCiAgICAgIHJldHVybiByZXM7CiAgICB9LCB0aGlzKS5maWx0ZXIoZnVuY3Rpb24oY2hpbGQpIHsKICAgICAgcmV0dXJuIGNoaWxkOwogICAgfSk7CiAgICBjb250ZW50ID0gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihjb250ZW50KTsKICB9IGVsc2UgewogICAgaWYgKHN0YXRlLnRhZyA9PT0gJ3NlcW9mJyB8fCBzdGF0ZS50YWcgPT09ICdzZXRvZicpIHsKICAgICAgLy8gVE9ETyhpbmR1dG55KTogdGhpcyBzaG91bGQgYmUgdGhyb3duIG9uIERTTCBsZXZlbAogICAgICBpZiAoIShzdGF0ZS5hcmdzICYmIHN0YXRlLmFyZ3MubGVuZ3RoID09PSAxKSkKICAgICAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ1RvbyBtYW55IGFyZ3MgZm9yIDogJyArIHN0YXRlLnRhZyk7CgogICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkpCiAgICAgICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdzZXFvZi9zZXRvZiwgYnV0IGRhdGEgaXMgbm90IEFycmF5Jyk7CgogICAgICB2YXIgY2hpbGQgPSB0aGlzLmNsb25lKCk7CiAgICAgIGNoaWxkLl9iYXNlU3RhdGUuaW1wbGljaXQgPSBudWxsOwogICAgICBjb250ZW50ID0gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihkYXRhLm1hcChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VXNlKHN0YXRlLmFyZ3NbMF0sIGRhdGEpLl9lbmNvZGUoaXRlbSwgcmVwb3J0ZXIpOwogICAgICB9LCBjaGlsZCkpOwogICAgfSBlbHNlIGlmIChzdGF0ZS51c2UgIT09IG51bGwpIHsKICAgICAgcmVzdWx0ID0gdGhpcy5fZ2V0VXNlKHN0YXRlLnVzZSwgcGFyZW50KS5fZW5jb2RlKGRhdGEsIHJlcG9ydGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnRlbnQgPSB0aGlzLl9lbmNvZGVQcmltaXRpdmUoc3RhdGUudGFnLCBkYXRhKTsKICAgICAgcHJpbWl0aXZlID0gdHJ1ZTsKICAgIH0KICB9CgogIC8vIEVuY29kZSBkYXRhIGl0c2VsZgogIHZhciByZXN1bHQ7CiAgaWYgKCFzdGF0ZS5hbnkgJiYgc3RhdGUuY2hvaWNlID09PSBudWxsKSB7CiAgICB2YXIgdGFnID0gc3RhdGUuaW1wbGljaXQgIT09IG51bGwgPyBzdGF0ZS5pbXBsaWNpdCA6IHN0YXRlLnRhZzsKICAgIHZhciBjbHMgPSBzdGF0ZS5pbXBsaWNpdCA9PT0gbnVsbCA/ICd1bml2ZXJzYWwnIDogJ2NvbnRleHQnOwoKICAgIGlmICh0YWcgPT09IG51bGwpIHsKICAgICAgaWYgKHN0YXRlLnVzZSA9PT0gbnVsbCkKICAgICAgICByZXBvcnRlci5lcnJvcignVGFnIGNvdWxkIGJlIG9tbWl0ZWQgb25seSBmb3IgLnVzZSgpJyk7CiAgICB9IGVsc2UgewogICAgICBpZiAoc3RhdGUudXNlID09PSBudWxsKQogICAgICAgIHJlc3VsdCA9IHRoaXMuX2VuY29kZUNvbXBvc2l0ZSh0YWcsIHByaW1pdGl2ZSwgY2xzLCBjb250ZW50KTsKICAgIH0KICB9CgogIC8vIFdyYXAgaW4gZXhwbGljaXQKICBpZiAoc3RhdGUuZXhwbGljaXQgIT09IG51bGwpCiAgICByZXN1bHQgPSB0aGlzLl9lbmNvZGVDb21wb3NpdGUoc3RhdGUuZXhwbGljaXQsIGZhbHNlLCAnY29udGV4dCcsIHJlc3VsdCk7CgogIHJldHVybiByZXN1bHQ7Cn07CgpOb2RlLnByb3RvdHlwZS5fZW5jb2RlQ2hvaWNlID0gZnVuY3Rpb24gZW5jb2RlQ2hvaWNlKGRhdGEsIHJlcG9ydGVyKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICB2YXIgbm9kZSA9IHN0YXRlLmNob2ljZVtkYXRhLnR5cGVdOwogIGlmICghbm9kZSkgewogICAgYXNzZXJ0KAogICAgICAgIGZhbHNlLAogICAgICAgIGRhdGEudHlwZSArICcgbm90IGZvdW5kIGluICcgKwogICAgICAgICAgICBKU09OLnN0cmluZ2lmeShPYmplY3Qua2V5cyhzdGF0ZS5jaG9pY2UpKSk7CiAgfQogIHJldHVybiBub2RlLl9lbmNvZGUoZGF0YS52YWx1ZSwgcmVwb3J0ZXIpOwp9OwoKTm9kZS5wcm90b3R5cGUuX2VuY29kZVByaW1pdGl2ZSA9IGZ1bmN0aW9uIGVuY29kZVByaW1pdGl2ZSh0YWcsIGRhdGEpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGlmICgvc3RyJC8udGVzdCh0YWcpKQogICAgcmV0dXJuIHRoaXMuX2VuY29kZVN0cihkYXRhLCB0YWcpOwogIGVsc2UgaWYgKHRhZyA9PT0gJ29iamlkJyAmJiBzdGF0ZS5hcmdzKQogICAgcmV0dXJuIHRoaXMuX2VuY29kZU9iamlkKGRhdGEsIHN0YXRlLnJldmVyc2VBcmdzWzBdLCBzdGF0ZS5hcmdzWzFdKTsKICBlbHNlIGlmICh0YWcgPT09ICdvYmppZCcpCiAgICByZXR1cm4gdGhpcy5fZW5jb2RlT2JqaWQoZGF0YSwgbnVsbCwgbnVsbCk7CiAgZWxzZSBpZiAodGFnID09PSAnZ2VudGltZScgfHwgdGFnID09PSAndXRjdGltZScpCiAgICByZXR1cm4gdGhpcy5fZW5jb2RlVGltZShkYXRhLCB0YWcpOwogIGVsc2UgaWYgKHRhZyA9PT0gJ251bGxfJykKICAgIHJldHVybiB0aGlzLl9lbmNvZGVOdWxsKCk7CiAgZWxzZSBpZiAodGFnID09PSAnaW50JyB8fCB0YWcgPT09ICdlbnVtJykKICAgIHJldHVybiB0aGlzLl9lbmNvZGVJbnQoZGF0YSwgc3RhdGUuYXJncyAmJiBzdGF0ZS5yZXZlcnNlQXJnc1swXSk7CiAgZWxzZSBpZiAodGFnID09PSAnYm9vbCcpCiAgICByZXR1cm4gdGhpcy5fZW5jb2RlQm9vbChkYXRhKTsKICBlbHNlCiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHRhZzogJyArIHRhZyk7Cn07CgpOb2RlLnByb3RvdHlwZS5faXNOdW1zdHIgPSBmdW5jdGlvbiBpc051bXN0cihzdHIpIHsKICByZXR1cm4gL15bMC05IF0qJC8udGVzdChzdHIpOwp9OwoKTm9kZS5wcm90b3R5cGUuX2lzUHJpbnRzdHIgPSBmdW5jdGlvbiBpc1ByaW50c3RyKHN0cikgewogIHJldHVybiAvXltBLVphLXowLTkgJ1woXClcKyxcLVwuXC86PVw/XSokLy50ZXN0KHN0cik7Cn07Cgp9LHsiLi4vYmFzZSI6NCwibWluaW1hbGlzdGljLWFzc2VydCI6MTMyfV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CgpmdW5jdGlvbiBSZXBvcnRlcihvcHRpb25zKSB7CiAgdGhpcy5fcmVwb3J0ZXJTdGF0ZSA9IHsKICAgIG9iajogbnVsbCwKICAgIHBhdGg6IFtdLAogICAgb3B0aW9uczogb3B0aW9ucyB8fCB7fSwKICAgIGVycm9yczogW10KICB9Owp9CmV4cG9ydHMuUmVwb3J0ZXIgPSBSZXBvcnRlcjsKClJlcG9ydGVyLnByb3RvdHlwZS5pc0Vycm9yID0gZnVuY3Rpb24gaXNFcnJvcihvYmopIHsKICByZXR1cm4gb2JqIGluc3RhbmNlb2YgUmVwb3J0ZXJFcnJvcjsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gc2F2ZSgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICByZXR1cm4geyBvYmo6IHN0YXRlLm9iaiwgcGF0aExlbjogc3RhdGUucGF0aC5sZW5ndGggfTsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24gcmVzdG9yZShkYXRhKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVwb3J0ZXJTdGF0ZTsKCiAgc3RhdGUub2JqID0gZGF0YS5vYmo7CiAgc3RhdGUucGF0aCA9IHN0YXRlLnBhdGguc2xpY2UoMCwgZGF0YS5wYXRoTGVuKTsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS5lbnRlcktleSA9IGZ1bmN0aW9uIGVudGVyS2V5KGtleSkgewogIHJldHVybiB0aGlzLl9yZXBvcnRlclN0YXRlLnBhdGgucHVzaChrZXkpOwp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLmxlYXZlS2V5ID0gZnVuY3Rpb24gbGVhdmVLZXkoaW5kZXgsIGtleSwgdmFsdWUpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICBzdGF0ZS5wYXRoID0gc3RhdGUucGF0aC5zbGljZSgwLCBpbmRleCAtIDEpOwogIGlmIChzdGF0ZS5vYmogIT09IG51bGwpCiAgICBzdGF0ZS5vYmpba2V5XSA9IHZhbHVlOwp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLmVudGVyT2JqZWN0ID0gZnVuY3Rpb24gZW50ZXJPYmplY3QoKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVwb3J0ZXJTdGF0ZTsKCiAgdmFyIHByZXYgPSBzdGF0ZS5vYmo7CiAgc3RhdGUub2JqID0ge307CiAgcmV0dXJuIHByZXY7Cn07CgpSZXBvcnRlci5wcm90b3R5cGUubGVhdmVPYmplY3QgPSBmdW5jdGlvbiBsZWF2ZU9iamVjdChwcmV2KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVwb3J0ZXJTdGF0ZTsKCiAgdmFyIG5vdyA9IHN0YXRlLm9iajsKICBzdGF0ZS5vYmogPSBwcmV2OwogIHJldHVybiBub3c7Cn07CgpSZXBvcnRlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihtc2cpIHsKICB2YXIgZXJyOwogIHZhciBzdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CgogIHZhciBpbmhlcml0ZWQgPSBtc2cgaW5zdGFuY2VvZiBSZXBvcnRlckVycm9yOwogIGlmIChpbmhlcml0ZWQpIHsKICAgIGVyciA9IG1zZzsKICB9IGVsc2UgewogICAgZXJyID0gbmV3IFJlcG9ydGVyRXJyb3Ioc3RhdGUucGF0aC5tYXAoZnVuY3Rpb24oZWxlbSkgewogICAgICByZXR1cm4gJ1snICsgSlNPTi5zdHJpbmdpZnkoZWxlbSkgKyAnXSc7CiAgICB9KS5qb2luKCcnKSwgbXNnLm1lc3NhZ2UgfHwgbXNnLCBtc2cuc3RhY2spOwogIH0KCiAgaWYgKCFzdGF0ZS5vcHRpb25zLnBhcnRpYWwpCiAgICB0aHJvdyBlcnI7CgogIGlmICghaW5oZXJpdGVkKQogICAgc3RhdGUuZXJyb3JzLnB1c2goZXJyKTsKCiAgcmV0dXJuIGVycjsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS53cmFwUmVzdWx0ID0gZnVuY3Rpb24gd3JhcFJlc3VsdChyZXN1bHQpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwogIGlmICghc3RhdGUub3B0aW9ucy5wYXJ0aWFsKQogICAgcmV0dXJuIHJlc3VsdDsKCiAgcmV0dXJuIHsKICAgIHJlc3VsdDogdGhpcy5pc0Vycm9yKHJlc3VsdCkgPyBudWxsIDogcmVzdWx0LAogICAgZXJyb3JzOiBzdGF0ZS5lcnJvcnMKICB9Owp9OwoKZnVuY3Rpb24gUmVwb3J0ZXJFcnJvcihwYXRoLCBtc2cpIHsKICB0aGlzLnBhdGggPSBwYXRoOwogIHRoaXMucmV0aHJvdyhtc2cpOwp9Owppbmhlcml0cyhSZXBvcnRlckVycm9yLCBFcnJvcik7CgpSZXBvcnRlckVycm9yLnByb3RvdHlwZS5yZXRocm93ID0gZnVuY3Rpb24gcmV0aHJvdyhtc2cpIHsKICB0aGlzLm1lc3NhZ2UgPSBtc2cgKyAnIGF0OiAnICsgKHRoaXMucGF0aCB8fCAnKHNoYWxsb3cpJyk7CiAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgUmVwb3J0ZXJFcnJvcik7CgogIHJldHVybiB0aGlzOwp9OwoKfSx7ImluaGVyaXRzIjoxMjh9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGNvbnN0YW50cyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cycpOwoKZXhwb3J0cy50YWdDbGFzcyA9IHsKICAwOiAndW5pdmVyc2FsJywKICAxOiAnYXBwbGljYXRpb24nLAogIDI6ICdjb250ZXh0JywKICAzOiAncHJpdmF0ZScKfTsKZXhwb3J0cy50YWdDbGFzc0J5TmFtZSA9IGNvbnN0YW50cy5fcmV2ZXJzZShleHBvcnRzLnRhZ0NsYXNzKTsKCmV4cG9ydHMudGFnID0gewogIDB4MDA6ICdlbmQnLAogIDB4MDE6ICdib29sJywKICAweDAyOiAnaW50JywKICAweDAzOiAnYml0c3RyJywKICAweDA0OiAnb2N0c3RyJywKICAweDA1OiAnbnVsbF8nLAogIDB4MDY6ICdvYmppZCcsCiAgMHgwNzogJ29iakRlc2MnLAogIDB4MDg6ICdleHRlcm5hbCcsCiAgMHgwOTogJ3JlYWwnLAogIDB4MGE6ICdlbnVtJywKICAweDBiOiAnZW1iZWQnLAogIDB4MGM6ICd1dGY4c3RyJywKICAweDBkOiAncmVsYXRpdmVPaWQnLAogIDB4MTA6ICdzZXEnLAogIDB4MTE6ICdzZXQnLAogIDB4MTI6ICdudW1zdHInLAogIDB4MTM6ICdwcmludHN0cicsCiAgMHgxNDogJ3Q2MXN0cicsCiAgMHgxNTogJ3ZpZGVvc3RyJywKICAweDE2OiAnaWE1c3RyJywKICAweDE3OiAndXRjdGltZScsCiAgMHgxODogJ2dlbnRpbWUnLAogIDB4MTk6ICdncmFwaHN0cicsCiAgMHgxYTogJ2lzbzY0NnN0cicsCiAgMHgxYjogJ2dlbnN0cicsCiAgMHgxYzogJ3VuaXN0cicsCiAgMHgxZDogJ2NoYXJzdHInLAogIDB4MWU6ICdibXBzdHInCn07CmV4cG9ydHMudGFnQnlOYW1lID0gY29uc3RhbnRzLl9yZXZlcnNlKGV4cG9ydHMudGFnKTsKCn0seyIuLi9jb25zdGFudHMiOjh9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGNvbnN0YW50cyA9IGV4cG9ydHM7CgovLyBIZWxwZXIKY29uc3RhbnRzLl9yZXZlcnNlID0gZnVuY3Rpb24gcmV2ZXJzZShtYXApIHsKICB2YXIgcmVzID0ge307CgogIE9iamVjdC5rZXlzKG1hcCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgIC8vIENvbnZlcnQga2V5IHRvIGludGVnZXIgaWYgaXQgaXMgc3RyaW5naWZpZWQKICAgIGlmICgoa2V5IHwgMCkgPT0ga2V5KQogICAgICBrZXkgPSBrZXkgfCAwOwoKICAgIHZhciB2YWx1ZSA9IG1hcFtrZXldOwogICAgcmVzW3ZhbHVlXSA9IGtleTsKICB9KTsKCiAgcmV0dXJuIHJlczsKfTsKCmNvbnN0YW50cy5kZXIgPSByZXF1aXJlKCcuL2RlcicpOwoKfSx7Ii4vZGVyIjo3fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Cgp2YXIgYXNuMSA9IHJlcXVpcmUoJy4uLy4uL2FzbjEnKTsKdmFyIGJhc2UgPSBhc24xLmJhc2U7CnZhciBiaWdudW0gPSBhc24xLmJpZ251bTsKCi8vIEltcG9ydCBERVIgY29uc3RhbnRzCnZhciBkZXIgPSBhc24xLmNvbnN0YW50cy5kZXI7CgpmdW5jdGlvbiBERVJEZWNvZGVyKGVudGl0eSkgewogIHRoaXMuZW5jID0gJ2Rlcic7CiAgdGhpcy5uYW1lID0gZW50aXR5Lm5hbWU7CiAgdGhpcy5lbnRpdHkgPSBlbnRpdHk7CgogIC8vIENvbnN0cnVjdCBiYXNlIHRyZWUKICB0aGlzLnRyZWUgPSBuZXcgREVSTm9kZSgpOwogIHRoaXMudHJlZS5faW5pdChlbnRpdHkuYm9keSk7Cn07Cm1vZHVsZS5leHBvcnRzID0gREVSRGVjb2RlcjsKCkRFUkRlY29kZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShkYXRhLCBvcHRpb25zKSB7CiAgaWYgKCEoZGF0YSBpbnN0YW5jZW9mIGJhc2UuRGVjb2RlckJ1ZmZlcikpCiAgICBkYXRhID0gbmV3IGJhc2UuRGVjb2RlckJ1ZmZlcihkYXRhLCBvcHRpb25zKTsKCiAgcmV0dXJuIHRoaXMudHJlZS5fZGVjb2RlKGRhdGEsIG9wdGlvbnMpOwp9OwoKLy8gVHJlZSBtZXRob2RzCgpmdW5jdGlvbiBERVJOb2RlKHBhcmVudCkgewogIGJhc2UuTm9kZS5jYWxsKHRoaXMsICdkZXInLCBwYXJlbnQpOwp9CmluaGVyaXRzKERFUk5vZGUsIGJhc2UuTm9kZSk7CgpERVJOb2RlLnByb3RvdHlwZS5fcGVla1RhZyA9IGZ1bmN0aW9uIHBlZWtUYWcoYnVmZmVyLCB0YWcsIGFueSkgewogIGlmIChidWZmZXIuaXNFbXB0eSgpKQogICAgcmV0dXJuIGZhbHNlOwoKICB2YXIgc3RhdGUgPSBidWZmZXIuc2F2ZSgpOwogIHZhciBkZWNvZGVkVGFnID0gZGVyRGVjb2RlVGFnKGJ1ZmZlciwgJ0ZhaWxlZCB0byBwZWVrIHRhZzogIicgKyB0YWcgKyAnIicpOwogIGlmIChidWZmZXIuaXNFcnJvcihkZWNvZGVkVGFnKSkKICAgIHJldHVybiBkZWNvZGVkVGFnOwoKICBidWZmZXIucmVzdG9yZShzdGF0ZSk7CgogIHJldHVybiBkZWNvZGVkVGFnLnRhZyA9PT0gdGFnIHx8IGRlY29kZWRUYWcudGFnU3RyID09PSB0YWcgfHwKICAgIChkZWNvZGVkVGFnLnRhZ1N0ciArICdvZicpID09PSB0YWcgfHwgYW55Owp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZVRhZyA9IGZ1bmN0aW9uIGRlY29kZVRhZyhidWZmZXIsIHRhZywgYW55KSB7CiAgdmFyIGRlY29kZWRUYWcgPSBkZXJEZWNvZGVUYWcoYnVmZmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGYWlsZWQgdG8gZGVjb2RlIHRhZyBvZiAiJyArIHRhZyArICciJyk7CiAgaWYgKGJ1ZmZlci5pc0Vycm9yKGRlY29kZWRUYWcpKQogICAgcmV0dXJuIGRlY29kZWRUYWc7CgogIHZhciBsZW4gPSBkZXJEZWNvZGVMZW4oYnVmZmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlZFRhZy5wcmltaXRpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAnRmFpbGVkIHRvIGdldCBsZW5ndGggb2YgIicgKyB0YWcgKyAnIicpOwoKICAvLyBGYWlsdXJlCiAgaWYgKGJ1ZmZlci5pc0Vycm9yKGxlbikpCiAgICByZXR1cm4gbGVuOwoKICBpZiAoIWFueSAmJgogICAgICBkZWNvZGVkVGFnLnRhZyAhPT0gdGFnICYmCiAgICAgIGRlY29kZWRUYWcudGFnU3RyICE9PSB0YWcgJiYKICAgICAgZGVjb2RlZFRhZy50YWdTdHIgKyAnb2YnICE9PSB0YWcpIHsKICAgIHJldHVybiBidWZmZXIuZXJyb3IoJ0ZhaWxlZCB0byBtYXRjaCB0YWc6ICInICsgdGFnICsgJyInKTsKICB9CgogIGlmIChkZWNvZGVkVGFnLnByaW1pdGl2ZSB8fCBsZW4gIT09IG51bGwpCiAgICByZXR1cm4gYnVmZmVyLnNraXAobGVuLCAnRmFpbGVkIHRvIG1hdGNoIGJvZHkgb2Y6ICInICsgdGFnICsgJyInKTsKCiAgLy8gSW5kZWZpbml0ZSBsZW5ndGguLi4gZmluZCBFTkQgdGFnCiAgdmFyIHN0YXRlID0gYnVmZmVyLnNhdmUoKTsKICB2YXIgcmVzID0gdGhpcy5fc2tpcFVudGlsRW5kKAogICAgICBidWZmZXIsCiAgICAgICdGYWlsZWQgdG8gc2tpcCBpbmRlZmluaXRlIGxlbmd0aCBib2R5OiAiJyArIHRoaXMudGFnICsgJyInKTsKICBpZiAoYnVmZmVyLmlzRXJyb3IocmVzKSkKICAgIHJldHVybiByZXM7CgogIGxlbiA9IGJ1ZmZlci5vZmZzZXQgLSBzdGF0ZS5vZmZzZXQ7CiAgYnVmZmVyLnJlc3RvcmUoc3RhdGUpOwogIHJldHVybiBidWZmZXIuc2tpcChsZW4sICdGYWlsZWQgdG8gbWF0Y2ggYm9keSBvZjogIicgKyB0YWcgKyAnIicpOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX3NraXBVbnRpbEVuZCA9IGZ1bmN0aW9uIHNraXBVbnRpbEVuZChidWZmZXIsIGZhaWwpIHsKICB3aGlsZSAodHJ1ZSkgewogICAgdmFyIHRhZyA9IGRlckRlY29kZVRhZyhidWZmZXIsIGZhaWwpOwogICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHRhZykpCiAgICAgIHJldHVybiB0YWc7CiAgICB2YXIgbGVuID0gZGVyRGVjb2RlTGVuKGJ1ZmZlciwgdGFnLnByaW1pdGl2ZSwgZmFpbCk7CiAgICBpZiAoYnVmZmVyLmlzRXJyb3IobGVuKSkKICAgICAgcmV0dXJuIGxlbjsKCiAgICB2YXIgcmVzOwogICAgaWYgKHRhZy5wcmltaXRpdmUgfHwgbGVuICE9PSBudWxsKQogICAgICByZXMgPSBidWZmZXIuc2tpcChsZW4pCiAgICBlbHNlCiAgICAgIHJlcyA9IHRoaXMuX3NraXBVbnRpbEVuZChidWZmZXIsIGZhaWwpOwoKICAgIC8vIEZhaWx1cmUKICAgIGlmIChidWZmZXIuaXNFcnJvcihyZXMpKQogICAgICByZXR1cm4gcmVzOwoKICAgIGlmICh0YWcudGFnU3RyID09PSAnZW5kJykKICAgICAgYnJlYWs7CiAgfQp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZUxpc3QgPSBmdW5jdGlvbiBkZWNvZGVMaXN0KGJ1ZmZlciwgdGFnLCBkZWNvZGVyKSB7CiAgdmFyIHJlc3VsdCA9IFtdOwogIHdoaWxlICghYnVmZmVyLmlzRW1wdHkoKSkgewogICAgdmFyIHBvc3NpYmxlRW5kID0gdGhpcy5fcGVla1RhZyhidWZmZXIsICdlbmQnKTsKICAgIGlmIChidWZmZXIuaXNFcnJvcihwb3NzaWJsZUVuZCkpCiAgICAgIHJldHVybiBwb3NzaWJsZUVuZDsKCiAgICB2YXIgcmVzID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLCAnZGVyJyk7CiAgICBpZiAoYnVmZmVyLmlzRXJyb3IocmVzKSAmJiBwb3NzaWJsZUVuZCkKICAgICAgYnJlYWs7CiAgICByZXN1bHQucHVzaChyZXMpOwogIH0KICByZXR1cm4gcmVzdWx0Owp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZVN0ciA9IGZ1bmN0aW9uIGRlY29kZVN0cihidWZmZXIsIHRhZykgewogIGlmICh0YWcgPT09ICdiaXRzdHInKSB7CiAgICB2YXIgdW51c2VkID0gYnVmZmVyLnJlYWRVSW50OCgpOwogICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHVudXNlZCkpCiAgICAgIHJldHVybiB1bnVzZWQ7CiAgICByZXR1cm4geyB1bnVzZWQ6IHVudXNlZCwgZGF0YTogYnVmZmVyLnJhdygpIH07CiAgfSBlbHNlIGlmICh0YWcgPT09ICdibXBzdHInKSB7CiAgICB2YXIgcmF3ID0gYnVmZmVyLnJhdygpOwogICAgaWYgKHJhdy5sZW5ndGggJSAyID09PSAxKQogICAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyBvZiBzdHJpbmcgdHlwZTogYm1wc3RyIGxlbmd0aCBtaXNtYXRjaCcpOwoKICAgIHZhciBzdHIgPSAnJzsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmF3Lmxlbmd0aCAvIDI7IGkrKykgewogICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShyYXcucmVhZFVJbnQxNkJFKGkgKiAyKSk7CiAgICB9CiAgICByZXR1cm4gc3RyOwogIH0gZWxzZSBpZiAodGFnID09PSAnbnVtc3RyJykgewogICAgdmFyIG51bXN0ciA9IGJ1ZmZlci5yYXcoKS50b1N0cmluZygnYXNjaWknKTsKICAgIGlmICghdGhpcy5faXNOdW1zdHIobnVtc3RyKSkgewogICAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyBvZiBzdHJpbmcgdHlwZTogJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ251bXN0ciB1bnN1cHBvcnRlZCBjaGFyYWN0ZXJzJyk7CiAgICB9CiAgICByZXR1cm4gbnVtc3RyOwogIH0gZWxzZSBpZiAodGFnID09PSAnb2N0c3RyJykgewogICAgcmV0dXJuIGJ1ZmZlci5yYXcoKTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3ByaW50c3RyJykgewogICAgdmFyIHByaW50c3RyID0gYnVmZmVyLnJhdygpLnRvU3RyaW5nKCdhc2NpaScpOwogICAgaWYgKCF0aGlzLl9pc1ByaW50c3RyKHByaW50c3RyKSkgewogICAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyBvZiBzdHJpbmcgdHlwZTogJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ByaW50c3RyIHVuc3VwcG9ydGVkIGNoYXJhY3RlcnMnKTsKICAgIH0KICAgIHJldHVybiBwcmludHN0cjsKICB9IGVsc2UgaWYgKC9zdHIkLy50ZXN0KHRhZykpIHsKICAgIHJldHVybiBidWZmZXIucmF3KCkudG9TdHJpbmcoKTsKICB9IGVsc2UgewogICAgcmV0dXJuIGJ1ZmZlci5lcnJvcignRGVjb2Rpbmcgb2Ygc3RyaW5nIHR5cGU6ICcgKyB0YWcgKyAnIHVuc3VwcG9ydGVkJyk7CiAgfQp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZU9iamlkID0gZnVuY3Rpb24gZGVjb2RlT2JqaWQoYnVmZmVyLCB2YWx1ZXMsIHJlbGF0aXZlKSB7CiAgdmFyIHJlc3VsdDsKICB2YXIgaWRlbnRpZmllcnMgPSBbXTsKICB2YXIgaWRlbnQgPSAwOwogIHdoaWxlICghYnVmZmVyLmlzRW1wdHkoKSkgewogICAgdmFyIHN1YmlkZW50ID0gYnVmZmVyLnJlYWRVSW50OCgpOwogICAgaWRlbnQgPDw9IDc7CiAgICBpZGVudCB8PSBzdWJpZGVudCAmIDB4N2Y7CiAgICBpZiAoKHN1YmlkZW50ICYgMHg4MCkgPT09IDApIHsKICAgICAgaWRlbnRpZmllcnMucHVzaChpZGVudCk7CiAgICAgIGlkZW50ID0gMDsKICAgIH0KICB9CiAgaWYgKHN1YmlkZW50ICYgMHg4MCkKICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnQpOwoKICB2YXIgZmlyc3QgPSAoaWRlbnRpZmllcnNbMF0gLyA0MCkgfCAwOwogIHZhciBzZWNvbmQgPSBpZGVudGlmaWVyc1swXSAlIDQwOwoKICBpZiAocmVsYXRpdmUpCiAgICByZXN1bHQgPSBpZGVudGlmaWVyczsKICBlbHNlCiAgICByZXN1bHQgPSBbZmlyc3QsIHNlY29uZF0uY29uY2F0KGlkZW50aWZpZXJzLnNsaWNlKDEpKTsKCiAgaWYgKHZhbHVlcykgewogICAgdmFyIHRtcCA9IHZhbHVlc1tyZXN1bHQuam9pbignICcpXTsKICAgIGlmICh0bXAgPT09IHVuZGVmaW5lZCkKICAgICAgdG1wID0gdmFsdWVzW3Jlc3VsdC5qb2luKCcuJyldOwogICAgaWYgKHRtcCAhPT0gdW5kZWZpbmVkKQogICAgICByZXN1bHQgPSB0bXA7CiAgfQoKICByZXR1cm4gcmVzdWx0Owp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZVRpbWUgPSBmdW5jdGlvbiBkZWNvZGVUaW1lKGJ1ZmZlciwgdGFnKSB7CiAgdmFyIHN0ciA9IGJ1ZmZlci5yYXcoKS50b1N0cmluZygpOwogIGlmICh0YWcgPT09ICdnZW50aW1lJykgewogICAgdmFyIHllYXIgPSBzdHIuc2xpY2UoMCwgNCkgfCAwOwogICAgdmFyIG1vbiA9IHN0ci5zbGljZSg0LCA2KSB8IDA7CiAgICB2YXIgZGF5ID0gc3RyLnNsaWNlKDYsIDgpIHwgMDsKICAgIHZhciBob3VyID0gc3RyLnNsaWNlKDgsIDEwKSB8IDA7CiAgICB2YXIgbWluID0gc3RyLnNsaWNlKDEwLCAxMikgfCAwOwogICAgdmFyIHNlYyA9IHN0ci5zbGljZSgxMiwgMTQpIHwgMDsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3V0Y3RpbWUnKSB7CiAgICB2YXIgeWVhciA9IHN0ci5zbGljZSgwLCAyKSB8IDA7CiAgICB2YXIgbW9uID0gc3RyLnNsaWNlKDIsIDQpIHwgMDsKICAgIHZhciBkYXkgPSBzdHIuc2xpY2UoNCwgNikgfCAwOwogICAgdmFyIGhvdXIgPSBzdHIuc2xpY2UoNiwgOCkgfCAwOwogICAgdmFyIG1pbiA9IHN0ci5zbGljZSg4LCAxMCkgfCAwOwogICAgdmFyIHNlYyA9IHN0ci5zbGljZSgxMCwgMTIpIHwgMDsKICAgIGlmICh5ZWFyIDwgNzApCiAgICAgIHllYXIgPSAyMDAwICsgeWVhcjsKICAgIGVsc2UKICAgICAgeWVhciA9IDE5MDAgKyB5ZWFyOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyAnICsgdGFnICsgJyB0aW1lIGlzIG5vdCBzdXBwb3J0ZWQgeWV0Jyk7CiAgfQoKICByZXR1cm4gRGF0ZS5VVEMoeWVhciwgbW9uIC0gMSwgZGF5LCBob3VyLCBtaW4sIHNlYywgMCk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlTnVsbCA9IGZ1bmN0aW9uIGRlY29kZU51bGwoYnVmZmVyKSB7CiAgcmV0dXJuIG51bGw7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlQm9vbCA9IGZ1bmN0aW9uIGRlY29kZUJvb2woYnVmZmVyKSB7CiAgdmFyIHJlcyA9IGJ1ZmZlci5yZWFkVUludDgoKTsKICBpZiAoYnVmZmVyLmlzRXJyb3IocmVzKSkKICAgIHJldHVybiByZXM7CiAgZWxzZQogICAgcmV0dXJuIHJlcyAhPT0gMDsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9kZWNvZGVJbnQgPSBmdW5jdGlvbiBkZWNvZGVJbnQoYnVmZmVyLCB2YWx1ZXMpIHsKICAvLyBCaWdpbnQsIHJldHVybiBhcyBpdCBpcyAoYXNzdW1lIGJpZyBlbmRpYW4pCiAgdmFyIHJhdyA9IGJ1ZmZlci5yYXcoKTsKICB2YXIgcmVzID0gbmV3IGJpZ251bShyYXcpOwoKICBpZiAodmFsdWVzKQogICAgcmVzID0gdmFsdWVzW3Jlcy50b1N0cmluZygxMCldIHx8IHJlczsKCiAgcmV0dXJuIHJlczsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl91c2UgPSBmdW5jdGlvbiB1c2UoZW50aXR5LCBvYmopIHsKICBpZiAodHlwZW9mIGVudGl0eSA9PT0gJ2Z1bmN0aW9uJykKICAgIGVudGl0eSA9IGVudGl0eShvYmopOwogIHJldHVybiBlbnRpdHkuX2dldERlY29kZXIoJ2RlcicpLnRyZWU7Cn07CgovLyBVdGlsaXR5IG1ldGhvZHMKCmZ1bmN0aW9uIGRlckRlY29kZVRhZyhidWYsIGZhaWwpIHsKICB2YXIgdGFnID0gYnVmLnJlYWRVSW50OChmYWlsKTsKICBpZiAoYnVmLmlzRXJyb3IodGFnKSkKICAgIHJldHVybiB0YWc7CgogIHZhciBjbHMgPSBkZXIudGFnQ2xhc3NbdGFnID4+IDZdOwogIHZhciBwcmltaXRpdmUgPSAodGFnICYgMHgyMCkgPT09IDA7CgogIC8vIE11bHRpLW9jdGV0IHRhZyAtIGxvYWQKICBpZiAoKHRhZyAmIDB4MWYpID09PSAweDFmKSB7CiAgICB2YXIgb2N0ID0gdGFnOwogICAgdGFnID0gMDsKICAgIHdoaWxlICgob2N0ICYgMHg4MCkgPT09IDB4ODApIHsKICAgICAgb2N0ID0gYnVmLnJlYWRVSW50OChmYWlsKTsKICAgICAgaWYgKGJ1Zi5pc0Vycm9yKG9jdCkpCiAgICAgICAgcmV0dXJuIG9jdDsKCiAgICAgIHRhZyA8PD0gNzsKICAgICAgdGFnIHw9IG9jdCAmIDB4N2Y7CiAgICB9CiAgfSBlbHNlIHsKICAgIHRhZyAmPSAweDFmOwogIH0KICB2YXIgdGFnU3RyID0gZGVyLnRhZ1t0YWddOwoKICByZXR1cm4gewogICAgY2xzOiBjbHMsCiAgICBwcmltaXRpdmU6IHByaW1pdGl2ZSwKICAgIHRhZzogdGFnLAogICAgdGFnU3RyOiB0YWdTdHIKICB9Owp9CgpmdW5jdGlvbiBkZXJEZWNvZGVMZW4oYnVmLCBwcmltaXRpdmUsIGZhaWwpIHsKICB2YXIgbGVuID0gYnVmLnJlYWRVSW50OChmYWlsKTsKICBpZiAoYnVmLmlzRXJyb3IobGVuKSkKICAgIHJldHVybiBsZW47CgogIC8vIEluZGVmaW5pdGUgZm9ybQogIGlmICghcHJpbWl0aXZlICYmIGxlbiA9PT0gMHg4MCkKICAgIHJldHVybiBudWxsOwoKICAvLyBEZWZpbml0ZSBmb3JtCiAgaWYgKChsZW4gJiAweDgwKSA9PT0gMCkgewogICAgLy8gU2hvcnQgZm9ybQogICAgcmV0dXJuIGxlbjsKICB9CgogIC8vIExvbmcgZm9ybQogIHZhciBudW0gPSBsZW4gJiAweDdmOwogIGlmIChudW0gPj0gNCkKICAgIHJldHVybiBidWYuZXJyb3IoJ2xlbmd0aCBvY3RlY3QgaXMgdG9vIGxvbmcnKTsKCiAgbGVuID0gMDsKICBmb3IgKHZhciBpID0gMDsgaSA8IG51bTsgaSsrKSB7CiAgICBsZW4gPDw9IDg7CiAgICB2YXIgaiA9IGJ1Zi5yZWFkVUludDgoZmFpbCk7CiAgICBpZiAoYnVmLmlzRXJyb3IoaikpCiAgICAgIHJldHVybiBqOwogICAgbGVuIHw9IGo7CiAgfQoKICByZXR1cm4gbGVuOwp9Cgp9LHsiLi4vLi4vYXNuMSI6MSwiaW5oZXJpdHMiOjEyOH1dLDEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGRlY29kZXJzID0gZXhwb3J0czsKCmRlY29kZXJzLmRlciA9IHJlcXVpcmUoJy4vZGVyJyk7CmRlY29kZXJzLnBlbSA9IHJlcXVpcmUoJy4vcGVtJyk7Cgp9LHsiLi9kZXIiOjksIi4vcGVtIjoxMX1dLDExOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKCnZhciBhc24xID0gcmVxdWlyZSgnLi4vLi4vYXNuMScpOwp2YXIgREVSRGVjb2RlciA9IHJlcXVpcmUoJy4vZGVyJyk7CgpmdW5jdGlvbiBQRU1EZWNvZGVyKGVudGl0eSkgewogIERFUkRlY29kZXIuY2FsbCh0aGlzLCBlbnRpdHkpOwogIHRoaXMuZW5jID0gJ3BlbSc7Cn07CmluaGVyaXRzKFBFTURlY29kZXIsIERFUkRlY29kZXIpOwptb2R1bGUuZXhwb3J0cyA9IFBFTURlY29kZXI7CgpQRU1EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUoZGF0YSwgb3B0aW9ucykgewogIHZhciBsaW5lcyA9IGRhdGEudG9TdHJpbmcoKS5zcGxpdCgvW1xyXG5dKy9nKTsKCiAgdmFyIGxhYmVsID0gb3B0aW9ucy5sYWJlbC50b1VwcGVyQ2FzZSgpOwoKICB2YXIgcmUgPSAvXi0tLS0tKEJFR0lOfEVORCkgKFteLV0rKS0tLS0tJC87CiAgdmFyIHN0YXJ0ID0gLTE7CiAgdmFyIGVuZCA9IC0xOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBtYXRjaCA9IGxpbmVzW2ldLm1hdGNoKHJlKTsKICAgIGlmIChtYXRjaCA9PT0gbnVsbCkKICAgICAgY29udGludWU7CgogICAgaWYgKG1hdGNoWzJdICE9PSBsYWJlbCkKICAgICAgY29udGludWU7CgogICAgaWYgKHN0YXJ0ID09PSAtMSkgewogICAgICBpZiAobWF0Y2hbMV0gIT09ICdCRUdJTicpCiAgICAgICAgYnJlYWs7CiAgICAgIHN0YXJ0ID0gaTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChtYXRjaFsxXSAhPT0gJ0VORCcpCiAgICAgICAgYnJlYWs7CiAgICAgIGVuZCA9IGk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICBpZiAoc3RhcnQgPT09IC0xIHx8IGVuZCA9PT0gLTEpCiAgICB0aHJvdyBuZXcgRXJyb3IoJ1BFTSBzZWN0aW9uIG5vdCBmb3VuZCBmb3I6ICcgKyBsYWJlbCk7CgogIHZhciBiYXNlNjQgPSBsaW5lcy5zbGljZShzdGFydCArIDEsIGVuZCkuam9pbignJyk7CiAgLy8gUmVtb3ZlIGV4Y2Vzc2l2ZSBzeW1ib2xzCiAgYmFzZTY0LnJlcGxhY2UoL1teYS16MC05XCtcLz1dKy9naSwgJycpOwoKICB2YXIgaW5wdXQgPSBuZXcgQnVmZmVyKGJhc2U2NCwgJ2Jhc2U2NCcpOwogIHJldHVybiBERVJEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUuY2FsbCh0aGlzLCBpbnB1dCwgb3B0aW9ucyk7Cn07Cgp9LHsiLi4vLi4vYXNuMSI6MSwiLi9kZXIiOjksImJ1ZmZlciI6NzAsImluaGVyaXRzIjoxMjh9XSwxMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7Cgp2YXIgYXNuMSA9IHJlcXVpcmUoJy4uLy4uL2FzbjEnKTsKdmFyIGJhc2UgPSBhc24xLmJhc2U7CnZhciBiaWdudW0gPSBhc24xLmJpZ251bTsKCi8vIEltcG9ydCBERVIgY29uc3RhbnRzCnZhciBkZXIgPSBhc24xLmNvbnN0YW50cy5kZXI7CgpmdW5jdGlvbiBERVJFbmNvZGVyKGVudGl0eSkgewogIHRoaXMuZW5jID0gJ2Rlcic7CiAgdGhpcy5uYW1lID0gZW50aXR5Lm5hbWU7CiAgdGhpcy5lbnRpdHkgPSBlbnRpdHk7CgogIC8vIENvbnN0cnVjdCBiYXNlIHRyZWUKICB0aGlzLnRyZWUgPSBuZXcgREVSTm9kZSgpOwogIHRoaXMudHJlZS5faW5pdChlbnRpdHkuYm9keSk7Cn07Cm1vZHVsZS5leHBvcnRzID0gREVSRW5jb2RlcjsKCkRFUkVuY29kZXIucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShkYXRhLCByZXBvcnRlcikgewogIHJldHVybiB0aGlzLnRyZWUuX2VuY29kZShkYXRhLCByZXBvcnRlcikuam9pbigpOwp9OwoKLy8gVHJlZSBtZXRob2RzCgpmdW5jdGlvbiBERVJOb2RlKHBhcmVudCkgewogIGJhc2UuTm9kZS5jYWxsKHRoaXMsICdkZXInLCBwYXJlbnQpOwp9CmluaGVyaXRzKERFUk5vZGUsIGJhc2UuTm9kZSk7CgpERVJOb2RlLnByb3RvdHlwZS5fZW5jb2RlQ29tcG9zaXRlID0gZnVuY3Rpb24gZW5jb2RlQ29tcG9zaXRlKHRhZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltaXRpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQpIHsKICB2YXIgZW5jb2RlZFRhZyA9IGVuY29kZVRhZyh0YWcsIHByaW1pdGl2ZSwgY2xzLCB0aGlzLnJlcG9ydGVyKTsKCiAgLy8gU2hvcnQgZm9ybQogIGlmIChjb250ZW50Lmxlbmd0aCA8IDB4ODApIHsKICAgIHZhciBoZWFkZXIgPSBuZXcgQnVmZmVyKDIpOwogICAgaGVhZGVyWzBdID0gZW5jb2RlZFRhZzsKICAgIGhlYWRlclsxXSA9IGNvbnRlbnQubGVuZ3RoOwogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoWyBoZWFkZXIsIGNvbnRlbnQgXSk7CiAgfQoKICAvLyBMb25nIGZvcm0KICAvLyBDb3VudCBvY3RldHMgcmVxdWlyZWQgdG8gc3RvcmUgbGVuZ3RoCiAgdmFyIGxlbk9jdGV0cyA9IDE7CiAgZm9yICh2YXIgaSA9IGNvbnRlbnQubGVuZ3RoOyBpID49IDB4MTAwOyBpID4+PSA4KQogICAgbGVuT2N0ZXRzKys7CgogIHZhciBoZWFkZXIgPSBuZXcgQnVmZmVyKDEgKyAxICsgbGVuT2N0ZXRzKTsKICBoZWFkZXJbMF0gPSBlbmNvZGVkVGFnOwogIGhlYWRlclsxXSA9IDB4ODAgfCBsZW5PY3RldHM7CgogIGZvciAodmFyIGkgPSAxICsgbGVuT2N0ZXRzLCBqID0gY29udGVudC5sZW5ndGg7IGogPiAwOyBpLS0sIGogPj49IDgpCiAgICBoZWFkZXJbaV0gPSBqICYgMHhmZjsKCiAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoWyBoZWFkZXIsIGNvbnRlbnQgXSk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZW5jb2RlU3RyID0gZnVuY3Rpb24gZW5jb2RlU3RyKHN0ciwgdGFnKSB7CiAgaWYgKHRhZyA9PT0gJ2JpdHN0cicpIHsKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKFsgc3RyLnVudXNlZCB8IDAsIHN0ci5kYXRhIF0pOwogIH0gZWxzZSBpZiAodGFnID09PSAnYm1wc3RyJykgewogICAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoc3RyLmxlbmd0aCAqIDIpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsKICAgICAgYnVmLndyaXRlVUludDE2QkUoc3RyLmNoYXJDb2RlQXQoaSksIGkgKiAyKTsKICAgIH0KICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKGJ1Zik7CiAgfSBlbHNlIGlmICh0YWcgPT09ICdudW1zdHInKSB7CiAgICBpZiAoIXRoaXMuX2lzTnVtc3RyKHN0cikpIHsKICAgICAgcmV0dXJuIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ0VuY29kaW5nIG9mIHN0cmluZyB0eXBlOiBudW1zdHIgc3VwcG9ydHMgJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvbmx5IGRpZ2l0cyBhbmQgc3BhY2UnKTsKICAgIH0KICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKHN0cik7CiAgfSBlbHNlIGlmICh0YWcgPT09ICdwcmludHN0cicpIHsKICAgIGlmICghdGhpcy5faXNQcmludHN0cihzdHIpKSB7CiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdFbmNvZGluZyBvZiBzdHJpbmcgdHlwZTogcHJpbnRzdHIgc3VwcG9ydHMgJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvbmx5IGxhdGluIHVwcGVyIGFuZCBsb3dlciBjYXNlIGxldHRlcnMsICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGlnaXRzLCBzcGFjZSwgYXBvc3Ryb3BoZSwgbGVmdCBhbmQgcmlndGggJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXJlbnRoZXNpcywgcGx1cyBzaWduLCBjb21tYSwgaHlwaGVuLCAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RvdCwgc2xhc2gsIGNvbG9uLCBlcXVhbCBzaWduLCAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3F1ZXN0aW9uIG1hcmsnKTsKICAgIH0KICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKHN0cik7CiAgfSBlbHNlIGlmICgvc3RyJC8udGVzdCh0YWcpKSB7CiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihzdHIpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdGhpcy5yZXBvcnRlci5lcnJvcignRW5jb2Rpbmcgb2Ygc3RyaW5nIHR5cGU6ICcgKyB0YWcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyB1bnN1cHBvcnRlZCcpOwogIH0KfTsKCkRFUk5vZGUucHJvdG90eXBlLl9lbmNvZGVPYmppZCA9IGZ1bmN0aW9uIGVuY29kZU9iamlkKGlkLCB2YWx1ZXMsIHJlbGF0aXZlKSB7CiAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpIHsKICAgIGlmICghdmFsdWVzKQogICAgICByZXR1cm4gdGhpcy5yZXBvcnRlci5lcnJvcignc3RyaW5nIG9iamlkIGdpdmVuLCBidXQgbm8gdmFsdWVzIG1hcCBmb3VuZCcpOwogICAgaWYgKCF2YWx1ZXMuaGFzT3duUHJvcGVydHkoaWQpKQogICAgICByZXR1cm4gdGhpcy5yZXBvcnRlci5lcnJvcignb2JqaWQgbm90IGZvdW5kIGluIHZhbHVlcyBtYXAnKTsKICAgIGlkID0gdmFsdWVzW2lkXS5zcGxpdCgvW1xzXC5dKy9nKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWQubGVuZ3RoOyBpKyspCiAgICAgIGlkW2ldIHw9IDA7CiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlkKSkgewogICAgaWQgPSBpZC5zbGljZSgpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZC5sZW5ndGg7IGkrKykKICAgICAgaWRbaV0gfD0gMDsKICB9CgogIGlmICghQXJyYXkuaXNBcnJheShpZCkpIHsKICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdvYmppZCgpIHNob3VsZCBiZSBlaXRoZXIgYXJyYXkgb3Igc3RyaW5nLCAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdnb3Q6ICcgKyBKU09OLnN0cmluZ2lmeShpZCkpOwogIH0KCiAgaWYgKCFyZWxhdGl2ZSkgewogICAgaWYgKGlkWzFdID49IDQwKQogICAgICByZXR1cm4gdGhpcy5yZXBvcnRlci5lcnJvcignU2Vjb25kIG9iamlkIGlkZW50aWZpZXIgT09CJyk7CiAgICBpZC5zcGxpY2UoMCwgMiwgaWRbMF0gKiA0MCArIGlkWzFdKTsKICB9CgogIC8vIENvdW50IG51bWJlciBvZiBvY3RldHMKICB2YXIgc2l6ZSA9IDA7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZC5sZW5ndGg7IGkrKykgewogICAgdmFyIGlkZW50ID0gaWRbaV07CiAgICBmb3IgKHNpemUrKzsgaWRlbnQgPj0gMHg4MDsgaWRlbnQgPj49IDcpCiAgICAgIHNpemUrKzsKICB9CgogIHZhciBvYmppZCA9IG5ldyBCdWZmZXIoc2l6ZSk7CiAgdmFyIG9mZnNldCA9IG9iamlkLmxlbmd0aCAtIDE7CiAgZm9yICh2YXIgaSA9IGlkLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICB2YXIgaWRlbnQgPSBpZFtpXTsKICAgIG9iamlkW29mZnNldC0tXSA9IGlkZW50ICYgMHg3ZjsKICAgIHdoaWxlICgoaWRlbnQgPj49IDcpID4gMCkKICAgICAgb2JqaWRbb2Zmc2V0LS1dID0gMHg4MCB8IChpZGVudCAmIDB4N2YpOwogIH0KCiAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIob2JqaWQpOwp9OwoKZnVuY3Rpb24gdHdvKG51bSkgewogIGlmIChudW0gPCAxMCkKICAgIHJldHVybiAnMCcgKyBudW07CiAgZWxzZQogICAgcmV0dXJuIG51bTsKfQoKREVSTm9kZS5wcm90b3R5cGUuX2VuY29kZVRpbWUgPSBmdW5jdGlvbiBlbmNvZGVUaW1lKHRpbWUsIHRhZykgewogIHZhciBzdHI7CiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTsKCiAgaWYgKHRhZyA9PT0gJ2dlbnRpbWUnKSB7CiAgICBzdHIgPSBbCiAgICAgIHR3byhkYXRlLmdldEZ1bGxZZWFyKCkpLAogICAgICB0d28oZGF0ZS5nZXRVVENNb250aCgpICsgMSksCiAgICAgIHR3byhkYXRlLmdldFVUQ0RhdGUoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ0hvdXJzKCkpLAogICAgICB0d28oZGF0ZS5nZXRVVENNaW51dGVzKCkpLAogICAgICB0d28oZGF0ZS5nZXRVVENTZWNvbmRzKCkpLAogICAgICAnWicKICAgIF0uam9pbignJyk7CiAgfSBlbHNlIGlmICh0YWcgPT09ICd1dGN0aW1lJykgewogICAgc3RyID0gWwogICAgICB0d28oZGF0ZS5nZXRGdWxsWWVhcigpICUgMTAwKSwKICAgICAgdHdvKGRhdGUuZ2V0VVRDTW9udGgoKSArIDEpLAogICAgICB0d28oZGF0ZS5nZXRVVENEYXRlKCkpLAogICAgICB0d28oZGF0ZS5nZXRVVENIb3VycygpKSwKICAgICAgdHdvKGRhdGUuZ2V0VVRDTWludXRlcygpKSwKICAgICAgdHdvKGRhdGUuZ2V0VVRDU2Vjb25kcygpKSwKICAgICAgJ1onCiAgICBdLmpvaW4oJycpOwogIH0gZWxzZSB7CiAgICB0aGlzLnJlcG9ydGVyLmVycm9yKCdFbmNvZGluZyAnICsgdGFnICsgJyB0aW1lIGlzIG5vdCBzdXBwb3J0ZWQgeWV0Jyk7CiAgfQoKICByZXR1cm4gdGhpcy5fZW5jb2RlU3RyKHN0ciwgJ29jdHN0cicpOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2VuY29kZU51bGwgPSBmdW5jdGlvbiBlbmNvZGVOdWxsKCkgewogIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKCcnKTsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9lbmNvZGVJbnQgPSBmdW5jdGlvbiBlbmNvZGVJbnQobnVtLCB2YWx1ZXMpIHsKICBpZiAodHlwZW9mIG51bSA9PT0gJ3N0cmluZycpIHsKICAgIGlmICghdmFsdWVzKQogICAgICByZXR1cm4gdGhpcy5yZXBvcnRlci5lcnJvcignU3RyaW5nIGludCBvciBlbnVtIGdpdmVuLCBidXQgbm8gdmFsdWVzIG1hcCcpOwogICAgaWYgKCF2YWx1ZXMuaGFzT3duUHJvcGVydHkobnVtKSkgewogICAgICByZXR1cm4gdGhpcy5yZXBvcnRlci5lcnJvcignVmFsdWVzIG1hcCBkb2VzblwndCBjb250YWluOiAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkobnVtKSk7CiAgICB9CiAgICBudW0gPSB2YWx1ZXNbbnVtXTsKICB9CgogIC8vIEJpZ251bSwgYXNzdW1lIGJpZyBlbmRpYW4KICBpZiAodHlwZW9mIG51bSAhPT0gJ251bWJlcicgJiYgIUJ1ZmZlci5pc0J1ZmZlcihudW0pKSB7CiAgICB2YXIgbnVtQXJyYXkgPSBudW0udG9BcnJheSgpOwogICAgaWYgKCFudW0uc2lnbiAmJiBudW1BcnJheVswXSAmIDB4ODApIHsKICAgICAgbnVtQXJyYXkudW5zaGlmdCgwKTsKICAgIH0KICAgIG51bSA9IG5ldyBCdWZmZXIobnVtQXJyYXkpOwogIH0KCiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihudW0pKSB7CiAgICB2YXIgc2l6ZSA9IG51bS5sZW5ndGg7CiAgICBpZiAobnVtLmxlbmd0aCA9PT0gMCkKICAgICAgc2l6ZSsrOwoKICAgIHZhciBvdXQgPSBuZXcgQnVmZmVyKHNpemUpOwogICAgbnVtLmNvcHkob3V0KTsKICAgIGlmIChudW0ubGVuZ3RoID09PSAwKQogICAgICBvdXRbMF0gPSAwCiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihvdXQpOwogIH0KCiAgaWYgKG51bSA8IDB4ODApCiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihudW0pOwoKICBpZiAobnVtIDwgMHgxMDApCiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihbMCwgbnVtXSk7CgogIHZhciBzaXplID0gMTsKICBmb3IgKHZhciBpID0gbnVtOyBpID49IDB4MTAwOyBpID4+PSA4KQogICAgc2l6ZSsrOwoKICB2YXIgb3V0ID0gbmV3IEFycmF5KHNpemUpOwogIGZvciAodmFyIGkgPSBvdXQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIG91dFtpXSA9IG51bSAmIDB4ZmY7CiAgICBudW0gPj49IDg7CiAgfQogIGlmKG91dFswXSAmIDB4ODApIHsKICAgIG91dC51bnNoaWZ0KDApOwogIH0KCiAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIobmV3IEJ1ZmZlcihvdXQpKTsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9lbmNvZGVCb29sID0gZnVuY3Rpb24gZW5jb2RlQm9vbCh2YWx1ZSkgewogIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKHZhbHVlID8gMHhmZiA6IDApOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX3VzZSA9IGZ1bmN0aW9uIHVzZShlbnRpdHksIG9iaikgewogIGlmICh0eXBlb2YgZW50aXR5ID09PSAnZnVuY3Rpb24nKQogICAgZW50aXR5ID0gZW50aXR5KG9iaik7CiAgcmV0dXJuIGVudGl0eS5fZ2V0RW5jb2RlcignZGVyJykudHJlZTsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9za2lwRGVmYXVsdCA9IGZ1bmN0aW9uIHNraXBEZWZhdWx0KGRhdGFCdWZmZXIsIHJlcG9ydGVyLCBwYXJlbnQpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgdmFyIGk7CiAgaWYgKHN0YXRlWydkZWZhdWx0J10gPT09IG51bGwpCiAgICByZXR1cm4gZmFsc2U7CgogIHZhciBkYXRhID0gZGF0YUJ1ZmZlci5qb2luKCk7CiAgaWYgKHN0YXRlLmRlZmF1bHRCdWZmZXIgPT09IHVuZGVmaW5lZCkKICAgIHN0YXRlLmRlZmF1bHRCdWZmZXIgPSB0aGlzLl9lbmNvZGVWYWx1ZShzdGF0ZVsnZGVmYXVsdCddLCByZXBvcnRlciwgcGFyZW50KS5qb2luKCk7CgogIGlmIChkYXRhLmxlbmd0aCAhPT0gc3RhdGUuZGVmYXVsdEJ1ZmZlci5sZW5ndGgpCiAgICByZXR1cm4gZmFsc2U7CgogIGZvciAoaT0wOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykKICAgIGlmIChkYXRhW2ldICE9PSBzdGF0ZS5kZWZhdWx0QnVmZmVyW2ldKQogICAgICByZXR1cm4gZmFsc2U7CgogIHJldHVybiB0cnVlOwp9OwoKLy8gVXRpbGl0eSBtZXRob2RzCgpmdW5jdGlvbiBlbmNvZGVUYWcodGFnLCBwcmltaXRpdmUsIGNscywgcmVwb3J0ZXIpIHsKICB2YXIgcmVzOwoKICBpZiAodGFnID09PSAnc2Vxb2YnKQogICAgdGFnID0gJ3NlcSc7CiAgZWxzZSBpZiAodGFnID09PSAnc2V0b2YnKQogICAgdGFnID0gJ3NldCc7CgogIGlmIChkZXIudGFnQnlOYW1lLmhhc093blByb3BlcnR5KHRhZykpCiAgICByZXMgPSBkZXIudGFnQnlOYW1lW3RhZ107CiAgZWxzZSBpZiAodHlwZW9mIHRhZyA9PT0gJ251bWJlcicgJiYgKHRhZyB8IDApID09PSB0YWcpCiAgICByZXMgPSB0YWc7CiAgZWxzZQogICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdVbmtub3duIHRhZzogJyArIHRhZyk7CgogIGlmIChyZXMgPj0gMHgxZikKICAgIHJldHVybiByZXBvcnRlci5lcnJvcignTXVsdGktb2N0ZXQgdGFnIGVuY29kaW5nIHVuc3VwcG9ydGVkJyk7CgogIGlmICghcHJpbWl0aXZlKQogICAgcmVzIHw9IDB4MjA7CgogIHJlcyB8PSAoZGVyLnRhZ0NsYXNzQnlOYW1lW2NscyB8fCAndW5pdmVyc2FsJ10gPDwgNik7CgogIHJldHVybiByZXM7Cn0KCn0seyIuLi8uLi9hc24xIjoxLCJidWZmZXIiOjcwLCJpbmhlcml0cyI6MTI4fV0sMTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZW5jb2RlcnMgPSBleHBvcnRzOwoKZW5jb2RlcnMuZGVyID0gcmVxdWlyZSgnLi9kZXInKTsKZW5jb2RlcnMucGVtID0gcmVxdWlyZSgnLi9wZW0nKTsKCn0seyIuL2RlciI6MTIsIi4vcGVtIjoxNH1dLDE0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKCnZhciBhc24xID0gcmVxdWlyZSgnLi4vLi4vYXNuMScpOwp2YXIgREVSRW5jb2RlciA9IHJlcXVpcmUoJy4vZGVyJyk7CgpmdW5jdGlvbiBQRU1FbmNvZGVyKGVudGl0eSkgewogIERFUkVuY29kZXIuY2FsbCh0aGlzLCBlbnRpdHkpOwogIHRoaXMuZW5jID0gJ3BlbSc7Cn07CmluaGVyaXRzKFBFTUVuY29kZXIsIERFUkVuY29kZXIpOwptb2R1bGUuZXhwb3J0cyA9IFBFTUVuY29kZXI7CgpQRU1FbmNvZGVyLnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoZGF0YSwgb3B0aW9ucykgewogIHZhciBidWYgPSBERVJFbmNvZGVyLnByb3RvdHlwZS5lbmNvZGUuY2FsbCh0aGlzLCBkYXRhKTsKCiAgdmFyIHAgPSBidWYudG9TdHJpbmcoJ2Jhc2U2NCcpOwogIHZhciBvdXQgPSBbICctLS0tLUJFR0lOICcgKyBvcHRpb25zLmxhYmVsICsgJy0tLS0tJyBdOwogIGZvciAodmFyIGkgPSAwOyBpIDwgcC5sZW5ndGg7IGkgKz0gNjQpCiAgICBvdXQucHVzaChwLnNsaWNlKGksIGkgKyA2NCkpOwogIG91dC5wdXNoKCctLS0tLUVORCAnICsgb3B0aW9ucy5sYWJlbCArICctLS0tLScpOwogIHJldHVybiBvdXQuam9pbignXG4nKTsKfTsKCn0seyIuLi8uLi9hc24xIjoxLCIuL2RlciI6MTIsImJ1ZmZlciI6NzAsImluaGVyaXRzIjoxMjh9XSwxNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGh0dHA6Ly93aWtpLmNvbW1vbmpzLm9yZy93aWtpL1VuaXRfVGVzdGluZy8xLjAKLy8KLy8gVEhJUyBJUyBOT1QgVEVTVEVEIE5PUiBMSUtFTFkgVE8gV09SSyBPVVRTSURFIFY4IQovLwovLyBPcmlnaW5hbGx5IGZyb20gbmFyd2hhbC5qcyAoaHR0cDovL25hcndoYWxqcy5vcmcpCi8vIENvcHlyaWdodCAoYykgMjAwOSBUaG9tYXMgUm9iaW5zb24gPDI4MG5vcnRoLmNvbT4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weQovLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8KLy8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUKLy8gcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yCi8vIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgovLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFCi8vIEFVVEhPUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOCi8vIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04KLy8gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgovLyB3aGVuIHVzZWQgaW4gbm9kZSwgdGhpcyB3aWxsIGFjdHVhbGx5IGxvYWQgdGhlIHV0aWwgbW9kdWxlIHdlIGRlcGVuZCBvbgovLyB2ZXJzdXMgbG9hZGluZyB0aGUgYnVpbHRpbiB1dGlsIG1vZHVsZSBhcyBoYXBwZW5zIG90aGVyd2lzZQovLyB0aGlzIGlzIGEgYnVnIGluIG5vZGUgbW9kdWxlIGxvYWRpbmcgYXMgZmFyIGFzIEkgYW0gY29uY2VybmVkCnZhciB1dGlsID0gcmVxdWlyZSgndXRpbC8nKTsKCnZhciBwU2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7CnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKLy8gMS4gVGhlIGFzc2VydCBtb2R1bGUgcHJvdmlkZXMgZnVuY3Rpb25zIHRoYXQgdGhyb3cKLy8gQXNzZXJ0aW9uRXJyb3IncyB3aGVuIHBhcnRpY3VsYXIgY29uZGl0aW9ucyBhcmUgbm90IG1ldC4gVGhlCi8vIGFzc2VydCBtb2R1bGUgbXVzdCBjb25mb3JtIHRvIHRoZSBmb2xsb3dpbmcgaW50ZXJmYWNlLgoKdmFyIGFzc2VydCA9IG1vZHVsZS5leHBvcnRzID0gb2s7CgovLyAyLiBUaGUgQXNzZXJ0aW9uRXJyb3IgaXMgZGVmaW5lZCBpbiBhc3NlcnQuCi8vIG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IoeyBtZXNzYWdlOiBtZXNzYWdlLAovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiBhY3R1YWwsCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogZXhwZWN0ZWQgfSkKCmFzc2VydC5Bc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIEFzc2VydGlvbkVycm9yKG9wdGlvbnMpIHsKICB0aGlzLm5hbWUgPSAnQXNzZXJ0aW9uRXJyb3InOwogIHRoaXMuYWN0dWFsID0gb3B0aW9ucy5hY3R1YWw7CiAgdGhpcy5leHBlY3RlZCA9IG9wdGlvbnMuZXhwZWN0ZWQ7CiAgdGhpcy5vcGVyYXRvciA9IG9wdGlvbnMub3BlcmF0b3I7CiAgaWYgKG9wdGlvbnMubWVzc2FnZSkgewogICAgdGhpcy5tZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlOwogICAgdGhpcy5nZW5lcmF0ZWRNZXNzYWdlID0gZmFsc2U7CiAgfSBlbHNlIHsKICAgIHRoaXMubWVzc2FnZSA9IGdldE1lc3NhZ2UodGhpcyk7CiAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSB0cnVlOwogIH0KICB2YXIgc3RhY2tTdGFydEZ1bmN0aW9uID0gb3B0aW9ucy5zdGFja1N0YXJ0RnVuY3Rpb24gfHwgZmFpbDsKCiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7CiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBzdGFja1N0YXJ0RnVuY3Rpb24pOwogIH0KICBlbHNlIHsKICAgIC8vIG5vbiB2OCBicm93c2VycyBzbyB3ZSBjYW4gaGF2ZSBhIHN0YWNrdHJhY2UKICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoKTsKICAgIGlmIChlcnIuc3RhY2spIHsKICAgICAgdmFyIG91dCA9IGVyci5zdGFjazsKCiAgICAgIC8vIHRyeSB0byBzdHJpcCB1c2VsZXNzIGZyYW1lcwogICAgICB2YXIgZm5fbmFtZSA9IHN0YWNrU3RhcnRGdW5jdGlvbi5uYW1lOwogICAgICB2YXIgaWR4ID0gb3V0LmluZGV4T2YoJ1xuJyArIGZuX25hbWUpOwogICAgICBpZiAoaWR4ID49IDApIHsKICAgICAgICAvLyBvbmNlIHdlIGhhdmUgbG9jYXRlZCB0aGUgZnVuY3Rpb24gZnJhbWUKICAgICAgICAvLyB3ZSBuZWVkIHRvIHN0cmlwIG91dCBldmVyeXRoaW5nIGJlZm9yZSBpdCAoYW5kIGl0cyBsaW5lKQogICAgICAgIHZhciBuZXh0X2xpbmUgPSBvdXQuaW5kZXhPZignXG4nLCBpZHggKyAxKTsKICAgICAgICBvdXQgPSBvdXQuc3Vic3RyaW5nKG5leHRfbGluZSArIDEpOwogICAgICB9CgogICAgICB0aGlzLnN0YWNrID0gb3V0OwogICAgfQogIH0KfTsKCi8vIGFzc2VydC5Bc3NlcnRpb25FcnJvciBpbnN0YW5jZW9mIEVycm9yCnV0aWwuaW5oZXJpdHMoYXNzZXJ0LkFzc2VydGlvbkVycm9yLCBFcnJvcik7CgpmdW5jdGlvbiByZXBsYWNlcihrZXksIHZhbHVlKSB7CiAgaWYgKHV0aWwuaXNVbmRlZmluZWQodmFsdWUpKSB7CiAgICByZXR1cm4gJycgKyB2YWx1ZTsKICB9CiAgaWYgKHV0aWwuaXNOdW1iZXIodmFsdWUpICYmICFpc0Zpbml0ZSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpOwogIH0KICBpZiAodXRpbC5pc0Z1bmN0aW9uKHZhbHVlKSB8fCB1dGlsLmlzUmVnRXhwKHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7CiAgfQogIHJldHVybiB2YWx1ZTsKfQoKZnVuY3Rpb24gdHJ1bmNhdGUocywgbikgewogIGlmICh1dGlsLmlzU3RyaW5nKHMpKSB7CiAgICByZXR1cm4gcy5sZW5ndGggPCBuID8gcyA6IHMuc2xpY2UoMCwgbik7CiAgfSBlbHNlIHsKICAgIHJldHVybiBzOwogIH0KfQoKZnVuY3Rpb24gZ2V0TWVzc2FnZShzZWxmKSB7CiAgcmV0dXJuIHRydW5jYXRlKEpTT04uc3RyaW5naWZ5KHNlbGYuYWN0dWFsLCByZXBsYWNlciksIDEyOCkgKyAnICcgKwogICAgICAgICBzZWxmLm9wZXJhdG9yICsgJyAnICsKICAgICAgICAgdHJ1bmNhdGUoSlNPTi5zdHJpbmdpZnkoc2VsZi5leHBlY3RlZCwgcmVwbGFjZXIpLCAxMjgpOwp9CgovLyBBdCBwcmVzZW50IG9ubHkgdGhlIHRocmVlIGtleXMgbWVudGlvbmVkIGFib3ZlIGFyZSB1c2VkIGFuZAovLyB1bmRlcnN0b29kIGJ5IHRoZSBzcGVjLiBJbXBsZW1lbnRhdGlvbnMgb3Igc3ViIG1vZHVsZXMgY2FuIHBhc3MKLy8gb3RoZXIga2V5cyB0byB0aGUgQXNzZXJ0aW9uRXJyb3IncyBjb25zdHJ1Y3RvciAtIHRoZXkgd2lsbCBiZQovLyBpZ25vcmVkLgoKLy8gMy4gQWxsIG9mIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIG11c3QgdGhyb3cgYW4gQXNzZXJ0aW9uRXJyb3IKLy8gd2hlbiBhIGNvcnJlc3BvbmRpbmcgY29uZGl0aW9uIGlzIG5vdCBtZXQsIHdpdGggYSBtZXNzYWdlIHRoYXQKLy8gbWF5IGJlIHVuZGVmaW5lZCBpZiBub3QgcHJvdmlkZWQuICBBbGwgYXNzZXJ0aW9uIG1ldGhvZHMgcHJvdmlkZQovLyBib3RoIHRoZSBhY3R1YWwgYW5kIGV4cGVjdGVkIHZhbHVlcyB0byB0aGUgYXNzZXJ0aW9uIGVycm9yIGZvcgovLyBkaXNwbGF5IHB1cnBvc2VzLgoKZnVuY3Rpb24gZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCBvcGVyYXRvciwgc3RhY2tTdGFydEZ1bmN0aW9uKSB7CiAgdGhyb3cgbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7CiAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgYWN0dWFsOiBhY3R1YWwsCiAgICBleHBlY3RlZDogZXhwZWN0ZWQsCiAgICBvcGVyYXRvcjogb3BlcmF0b3IsCiAgICBzdGFja1N0YXJ0RnVuY3Rpb246IHN0YWNrU3RhcnRGdW5jdGlvbgogIH0pOwp9CgovLyBFWFRFTlNJT04hIGFsbG93cyBmb3Igd2VsbCBiZWhhdmVkIGVycm9ycyBkZWZpbmVkIGVsc2V3aGVyZS4KYXNzZXJ0LmZhaWwgPSBmYWlsOwoKLy8gNC4gUHVyZSBhc3NlcnRpb24gdGVzdHMgd2hldGhlciBhIHZhbHVlIGlzIHRydXRoeSwgYXMgZGV0ZXJtaW5lZAovLyBieSAhIWd1YXJkLgovLyBhc3NlcnQub2soZ3VhcmQsIG1lc3NhZ2Vfb3B0KTsKLy8gVGhpcyBzdGF0ZW1lbnQgaXMgZXF1aXZhbGVudCB0byBhc3NlcnQuZXF1YWwodHJ1ZSwgISFndWFyZCwKLy8gbWVzc2FnZV9vcHQpOy4gVG8gdGVzdCBzdHJpY3RseSBmb3IgdGhlIHZhbHVlIHRydWUsIHVzZQovLyBhc3NlcnQuc3RyaWN0RXF1YWwodHJ1ZSwgZ3VhcmQsIG1lc3NhZ2Vfb3B0KTsuCgpmdW5jdGlvbiBvayh2YWx1ZSwgbWVzc2FnZSkgewogIGlmICghdmFsdWUpIGZhaWwodmFsdWUsIHRydWUsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5vayk7Cn0KYXNzZXJ0Lm9rID0gb2s7CgovLyA1LiBUaGUgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHNoYWxsb3csIGNvZXJjaXZlIGVxdWFsaXR5IHdpdGgKLy8gPT0uCi8vIGFzc2VydC5lcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7Cgphc3NlcnQuZXF1YWwgPSBmdW5jdGlvbiBlcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYgKGFjdHVhbCAhPSBleHBlY3RlZCkgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQuZXF1YWwpOwp9OwoKLy8gNi4gVGhlIG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHdoZXRoZXIgdHdvIG9iamVjdHMgYXJlIG5vdCBlcXVhbAovLyB3aXRoICE9IGFzc2VydC5ub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7Cgphc3NlcnQubm90RXF1YWwgPSBmdW5jdGlvbiBub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYgKGFjdHVhbCA9PSBleHBlY3RlZCkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT0nLCBhc3NlcnQubm90RXF1YWwpOwogIH0KfTsKCi8vIDcuIFRoZSBlcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgYSBkZWVwIGVxdWFsaXR5IHJlbGF0aW9uLgovLyBhc3NlcnQuZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTsKCmFzc2VydC5kZWVwRXF1YWwgPSBmdW5jdGlvbiBkZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkgewogIGlmICghX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkKSkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnZGVlcEVxdWFsJywgYXNzZXJ0LmRlZXBFcXVhbCk7CiAgfQp9OwoKZnVuY3Rpb24gX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkKSB7CiAgLy8gNy4xLiBBbGwgaWRlbnRpY2FsIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uCiAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHsKICAgIHJldHVybiB0cnVlOwoKICB9IGVsc2UgaWYgKHV0aWwuaXNCdWZmZXIoYWN0dWFsKSAmJiB1dGlsLmlzQnVmZmVyKGV4cGVjdGVkKSkgewogICAgaWYgKGFjdHVhbC5sZW5ndGggIT0gZXhwZWN0ZWQubGVuZ3RoKSByZXR1cm4gZmFsc2U7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY3R1YWwubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGFjdHVhbFtpXSAhPT0gZXhwZWN0ZWRbaV0pIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKCiAgLy8gNy4yLiBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBEYXRlIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpcwogIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIERhdGUgb2JqZWN0IHRoYXQgcmVmZXJzIHRvIHRoZSBzYW1lIHRpbWUuCiAgfSBlbHNlIGlmICh1dGlsLmlzRGF0ZShhY3R1YWwpICYmIHV0aWwuaXNEYXRlKGV4cGVjdGVkKSkgewogICAgcmV0dXJuIGFjdHVhbC5nZXRUaW1lKCkgPT09IGV4cGVjdGVkLmdldFRpbWUoKTsKCiAgLy8gNy4zIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIFJlZ0V4cCBvYmplY3QsIHRoZSBhY3R1YWwgdmFsdWUgaXMKICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBSZWdFeHAgb2JqZWN0IHdpdGggdGhlIHNhbWUgc291cmNlIGFuZAogIC8vIHByb3BlcnRpZXMgKGBnbG9iYWxgLCBgbXVsdGlsaW5lYCwgYGxhc3RJbmRleGAsIGBpZ25vcmVDYXNlYCkuCiAgfSBlbHNlIGlmICh1dGlsLmlzUmVnRXhwKGFjdHVhbCkgJiYgdXRpbC5pc1JlZ0V4cChleHBlY3RlZCkpIHsKICAgIHJldHVybiBhY3R1YWwuc291cmNlID09PSBleHBlY3RlZC5zb3VyY2UgJiYKICAgICAgICAgICBhY3R1YWwuZ2xvYmFsID09PSBleHBlY3RlZC5nbG9iYWwgJiYKICAgICAgICAgICBhY3R1YWwubXVsdGlsaW5lID09PSBleHBlY3RlZC5tdWx0aWxpbmUgJiYKICAgICAgICAgICBhY3R1YWwubGFzdEluZGV4ID09PSBleHBlY3RlZC5sYXN0SW5kZXggJiYKICAgICAgICAgICBhY3R1YWwuaWdub3JlQ2FzZSA9PT0gZXhwZWN0ZWQuaWdub3JlQ2FzZTsKCiAgLy8gNy40LiBPdGhlciBwYWlycyB0aGF0IGRvIG5vdCBib3RoIHBhc3MgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnLAogIC8vIGVxdWl2YWxlbmNlIGlzIGRldGVybWluZWQgYnkgPT0uCiAgfSBlbHNlIGlmICghdXRpbC5pc09iamVjdChhY3R1YWwpICYmICF1dGlsLmlzT2JqZWN0KGV4cGVjdGVkKSkgewogICAgcmV0dXJuIGFjdHVhbCA9PSBleHBlY3RlZDsKCiAgLy8gNy41IEZvciBhbGwgb3RoZXIgT2JqZWN0IHBhaXJzLCBpbmNsdWRpbmcgQXJyYXkgb2JqZWN0cywgZXF1aXZhbGVuY2UgaXMKICAvLyBkZXRlcm1pbmVkIGJ5IGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoYXMgdmVyaWZpZWQKICAvLyB3aXRoIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCksIHRoZSBzYW1lIHNldCBvZiBrZXlzCiAgLy8gKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksIGVxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeQogIC8vIGNvcnJlc3BvbmRpbmcga2V5LCBhbmQgYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LiBOb3RlOiB0aGlzCiAgLy8gYWNjb3VudHMgZm9yIGJvdGggbmFtZWQgYW5kIGluZGV4ZWQgcHJvcGVydGllcyBvbiBBcnJheXMuCiAgfSBlbHNlIHsKICAgIHJldHVybiBvYmpFcXVpdihhY3R1YWwsIGV4cGVjdGVkKTsKICB9Cn0KCmZ1bmN0aW9uIGlzQXJndW1lbnRzKG9iamVjdCkgewogIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJzsKfQoKZnVuY3Rpb24gb2JqRXF1aXYoYSwgYikgewogIGlmICh1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGEpIHx8IHV0aWwuaXNOdWxsT3JVbmRlZmluZWQoYikpCiAgICByZXR1cm4gZmFsc2U7CiAgLy8gYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LgogIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpIHJldHVybiBmYWxzZTsKICAvLyBpZiBvbmUgaXMgYSBwcmltaXRpdmUsIHRoZSBvdGhlciBtdXN0IGJlIHNhbWUKICBpZiAodXRpbC5pc1ByaW1pdGl2ZShhKSB8fCB1dGlsLmlzUHJpbWl0aXZlKGIpKSB7CiAgICByZXR1cm4gYSA9PT0gYjsKICB9CiAgdmFyIGFJc0FyZ3MgPSBpc0FyZ3VtZW50cyhhKSwKICAgICAgYklzQXJncyA9IGlzQXJndW1lbnRzKGIpOwogIGlmICgoYUlzQXJncyAmJiAhYklzQXJncykgfHwgKCFhSXNBcmdzICYmIGJJc0FyZ3MpKQogICAgcmV0dXJuIGZhbHNlOwogIGlmIChhSXNBcmdzKSB7CiAgICBhID0gcFNsaWNlLmNhbGwoYSk7CiAgICBiID0gcFNsaWNlLmNhbGwoYik7CiAgICByZXR1cm4gX2RlZXBFcXVhbChhLCBiKTsKICB9CiAgdmFyIGthID0gb2JqZWN0S2V5cyhhKSwKICAgICAga2IgPSBvYmplY3RLZXlzKGIpLAogICAgICBrZXksIGk7CiAgLy8gaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChrZXlzIGluY29ycG9yYXRlcwogIC8vIGhhc093blByb3BlcnR5KQogIGlmIChrYS5sZW5ndGggIT0ga2IubGVuZ3RoKQogICAgcmV0dXJuIGZhbHNlOwogIC8vdGhlIHNhbWUgc2V0IG9mIGtleXMgKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksCiAga2Euc29ydCgpOwogIGtiLnNvcnQoKTsKICAvL35+fmNoZWFwIGtleSB0ZXN0CiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIGlmIChrYVtpXSAhPSBrYltpXSkKICAgICAgcmV0dXJuIGZhbHNlOwogIH0KICAvL2VxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeSBjb3JyZXNwb25kaW5nIGtleSwgYW5kCiAgLy9+fn5wb3NzaWJseSBleHBlbnNpdmUgZGVlcCB0ZXN0CiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIGtleSA9IGthW2ldOwogICAgaWYgKCFfZGVlcEVxdWFsKGFba2V5XSwgYltrZXldKSkgcmV0dXJuIGZhbHNlOwogIH0KICByZXR1cm4gdHJ1ZTsKfQoKLy8gOC4gVGhlIG5vbi1lcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgZm9yIGFueSBkZWVwIGluZXF1YWxpdHkuCi8vIGFzc2VydC5ub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpOwoKYXNzZXJ0Lm5vdERlZXBFcXVhbCA9IGZ1bmN0aW9uIG5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCkpIHsKICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBFcXVhbCcsIGFzc2VydC5ub3REZWVwRXF1YWwpOwogIH0KfTsKCi8vIDkuIFRoZSBzdHJpY3QgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHN0cmljdCBlcXVhbGl0eSwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uCi8vIGFzc2VydC5zdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7Cgphc3NlcnQuc3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBzdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHsKICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09PScsIGFzc2VydC5zdHJpY3RFcXVhbCk7CiAgfQp9OwoKLy8gMTAuIFRoZSBzdHJpY3Qgbm9uLWVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBmb3Igc3RyaWN0IGluZXF1YWxpdHksIGFzCi8vIGRldGVybWluZWQgYnkgIT09LiAgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTsKCmFzc2VydC5ub3RTdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIG5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT09JywgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKTsKICB9Cn07CgpmdW5jdGlvbiBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSB7CiAgaWYgKCFhY3R1YWwgfHwgIWV4cGVjdGVkKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGV4cGVjdGVkKSA9PSAnW29iamVjdCBSZWdFeHBdJykgewogICAgcmV0dXJuIGV4cGVjdGVkLnRlc3QoYWN0dWFsKTsKICB9IGVsc2UgaWYgKGFjdHVhbCBpbnN0YW5jZW9mIGV4cGVjdGVkKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9IGVsc2UgaWYgKGV4cGVjdGVkLmNhbGwoe30sIGFjdHVhbCkgPT09IHRydWUpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgcmV0dXJuIGZhbHNlOwp9CgpmdW5jdGlvbiBfdGhyb3dzKHNob3VsZFRocm93LCBibG9jaywgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICB2YXIgYWN0dWFsOwoKICBpZiAodXRpbC5pc1N0cmluZyhleHBlY3RlZCkpIHsKICAgIG1lc3NhZ2UgPSBleHBlY3RlZDsKICAgIGV4cGVjdGVkID0gbnVsbDsKICB9CgogIHRyeSB7CiAgICBibG9jaygpOwogIH0gY2F0Y2ggKGUpIHsKICAgIGFjdHVhbCA9IGU7CiAgfQoKICBtZXNzYWdlID0gKGV4cGVjdGVkICYmIGV4cGVjdGVkLm5hbWUgPyAnICgnICsgZXhwZWN0ZWQubmFtZSArICcpLicgOiAnLicpICsKICAgICAgICAgICAgKG1lc3NhZ2UgPyAnICcgKyBtZXNzYWdlIDogJy4nKTsKCiAgaWYgKHNob3VsZFRocm93ICYmICFhY3R1YWwpIHsKICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ01pc3NpbmcgZXhwZWN0ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpOwogIH0KCiAgaWYgKCFzaG91bGRUaHJvdyAmJiBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnR290IHVud2FudGVkIGV4Y2VwdGlvbicgKyBtZXNzYWdlKTsKICB9CgogIGlmICgoc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmIGV4cGVjdGVkICYmCiAgICAgICFleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkgfHwgKCFzaG91bGRUaHJvdyAmJiBhY3R1YWwpKSB7CiAgICB0aHJvdyBhY3R1YWw7CiAgfQp9CgovLyAxMS4gRXhwZWN0ZWQgdG8gdGhyb3cgYW4gZXJyb3I6Ci8vIGFzc2VydC50aHJvd3MoYmxvY2ssIEVycm9yX29wdCwgbWVzc2FnZV9vcHQpOwoKYXNzZXJ0LnRocm93cyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9lcnJvciwgLypvcHRpb25hbCovbWVzc2FnZSkgewogIF90aHJvd3MuYXBwbHkodGhpcywgW3RydWVdLmNvbmNhdChwU2xpY2UuY2FsbChhcmd1bWVudHMpKSk7Cn07CgovLyBFWFRFTlNJT04hIFRoaXMgaXMgYW5ub3lpbmcgdG8gd3JpdGUgb3V0c2lkZSB0aGlzIG1vZHVsZS4KYXNzZXJ0LmRvZXNOb3RUaHJvdyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7CiAgX3Rocm93cy5hcHBseSh0aGlzLCBbZmFsc2VdLmNvbmNhdChwU2xpY2UuY2FsbChhcmd1bWVudHMpKSk7Cn07Cgphc3NlcnQuaWZFcnJvciA9IGZ1bmN0aW9uKGVycikgeyBpZiAoZXJyKSB7dGhyb3cgZXJyO319OwoKdmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7CiAgdmFyIGtleXMgPSBbXTsKICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICBpZiAoaGFzT3duLmNhbGwob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTsKICB9CiAgcmV0dXJuIGtleXM7Cn07Cgp9LHsidXRpbC8iOjE3Nn1dLDE2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewondXNlIHN0cmljdCc7Cgp2YXIgYmFzZTY0dXJsID0gbW9kdWxlLmV4cG9ydHM7CgpiYXNlNjR1cmwudW5lc2NhcGUgPSBmdW5jdGlvbiB1bmVzY2FwZSAoc3RyKSB7CiAgcmV0dXJuIChzdHIgKyBBcnJheSg1IC0gc3RyLmxlbmd0aCAlIDQpCiAgICAuam9pbignPScpKQogICAgLnJlcGxhY2UoL1wtL2csICcrJykKICAgIC5yZXBsYWNlKC9fL2csICcvJyk7Cn07CgpiYXNlNjR1cmwuZXNjYXBlID0gZnVuY3Rpb24gZXNjYXBlIChzdHIpIHsKICByZXR1cm4gc3RyLnJlcGxhY2UoL1wrL2csICctJykKICAgIC5yZXBsYWNlKC9cLy9nLCAnXycpCiAgICAucmVwbGFjZSgvPS9nLCAnJyk7Cn07CgpiYXNlNjR1cmwuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlIChzdHIpIHsKICByZXR1cm4gdGhpcy5lc2NhcGUobmV3IEJ1ZmZlcihzdHIpLnRvU3RyaW5nKCdiYXNlNjQnKSk7Cn07CgpiYXNlNjR1cmwuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlIChzdHIpIHsKICByZXR1cm4gbmV3IEJ1ZmZlcih0aGlzLnVuZXNjYXBlKHN0ciksICdiYXNlNjQnKS50b1N0cmluZygpOwp9OwoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzB9XSwxNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIChwdWJsaWMpIENvbnN0cnVjdG9yCmZ1bmN0aW9uIEJpZ0ludGVnZXIoYSwgYiwgYykgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCaWdJbnRlZ2VyKSkKICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcihhLCBiLCBjKQoKICBpZiAoYSAhPSBudWxsKSB7CiAgICBpZiAoIm51bWJlciIgPT0gdHlwZW9mIGEpIHRoaXMuZnJvbU51bWJlcihhLCBiLCBjKQogICAgZWxzZSBpZiAoYiA9PSBudWxsICYmICJzdHJpbmciICE9IHR5cGVvZiBhKSB0aGlzLmZyb21TdHJpbmcoYSwgMjU2KQogICAgZWxzZSB0aGlzLmZyb21TdHJpbmcoYSwgYikKICB9Cn0KCnZhciBwcm90byA9IEJpZ0ludGVnZXIucHJvdG90eXBlCgovLyBkdWNrLXR5cGVkIGlzQmlnSW50ZWdlcgpwcm90by5fX2JpZ2kgPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uCkJpZ0ludGVnZXIuaXNCaWdJbnRlZ2VyID0gZnVuY3Rpb24gKG9iaiwgY2hlY2tfdmVyKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19iaWdpICYmICghY2hlY2tfdmVyIHx8IG9iai5fX2JpZ2kgPT09IHByb3RvLl9fYmlnaSkKfQoKLy8gQml0cyBwZXIgZGlnaXQKdmFyIGRiaXRzCgovLyBhbTogQ29tcHV0ZSB3X2ogKz0gKHgqdGhpc19pKSwgcHJvcGFnYXRlIGNhcnJpZXMsCi8vIGMgaXMgaW5pdGlhbCBjYXJyeSwgcmV0dXJucyBmaW5hbCBjYXJyeS4KLy8gYyA8IDMqZHZhbHVlLCB4IDwgMipkdmFsdWUsIHRoaXNfaSA8IGR2YWx1ZQovLyBXZSBuZWVkIHRvIHNlbGVjdCB0aGUgZmFzdGVzdCBvbmUgdGhhdCB3b3JrcyBpbiB0aGlzIGVudmlyb25tZW50LgoKLy8gYW0xOiB1c2UgYSBzaW5nbGUgbXVsdCBhbmQgZGl2aWRlIHRvIGdldCB0aGUgaGlnaCBiaXRzLAovLyBtYXggZGlnaXQgYml0cyBzaG91bGQgYmUgMjYgYmVjYXVzZQovLyBtYXggaW50ZXJuYWwgdmFsdWUgPSAyKmR2YWx1ZV4yLTIqZHZhbHVlICg8IDJeNTMpCmZ1bmN0aW9uIGFtMShpLCB4LCB3LCBqLCBjLCBuKSB7CiAgd2hpbGUgKC0tbiA+PSAwKSB7CiAgICB2YXIgdiA9IHggKiB0aGlzW2krK10gKyB3W2pdICsgYwogICAgYyA9IE1hdGguZmxvb3IodiAvIDB4NDAwMDAwMCkKICAgIHdbaisrXSA9IHYgJiAweDNmZmZmZmYKICB9CiAgcmV0dXJuIGMKfQovLyBhbTIgYXZvaWRzIGEgYmlnIG11bHQtYW5kLWV4dHJhY3QgY29tcGxldGVseS4KLy8gTWF4IGRpZ2l0IGJpdHMgc2hvdWxkIGJlIDw9IDMwIGJlY2F1c2Ugd2UgZG8gYml0d2lzZSBvcHMKLy8gb24gdmFsdWVzIHVwIHRvIDIqaGR2YWx1ZV4yLWhkdmFsdWUtMSAoPCAyXjMxKQpmdW5jdGlvbiBhbTIoaSwgeCwgdywgaiwgYywgbikgewogIHZhciB4bCA9IHggJiAweDdmZmYsCiAgICB4aCA9IHggPj4gMTUKICB3aGlsZSAoLS1uID49IDApIHsKICAgIHZhciBsID0gdGhpc1tpXSAmIDB4N2ZmZgogICAgdmFyIGggPSB0aGlzW2krK10gPj4gMTUKICAgIHZhciBtID0geGggKiBsICsgaCAqIHhsCiAgICBsID0geGwgKiBsICsgKChtICYgMHg3ZmZmKSA8PCAxNSkgKyB3W2pdICsgKGMgJiAweDNmZmZmZmZmKQogICAgYyA9IChsID4+PiAzMCkgKyAobSA+Pj4gMTUpICsgeGggKiBoICsgKGMgPj4+IDMwKQogICAgd1tqKytdID0gbCAmIDB4M2ZmZmZmZmYKICB9CiAgcmV0dXJuIGMKfQovLyBBbHRlcm5hdGVseSwgc2V0IG1heCBkaWdpdCBiaXRzIHRvIDI4IHNpbmNlIHNvbWUKLy8gYnJvd3NlcnMgc2xvdyBkb3duIHdoZW4gZGVhbGluZyB3aXRoIDMyLWJpdCBudW1iZXJzLgpmdW5jdGlvbiBhbTMoaSwgeCwgdywgaiwgYywgbikgewogIHZhciB4bCA9IHggJiAweDNmZmYsCiAgICB4aCA9IHggPj4gMTQKICB3aGlsZSAoLS1uID49IDApIHsKICAgIHZhciBsID0gdGhpc1tpXSAmIDB4M2ZmZgogICAgdmFyIGggPSB0aGlzW2krK10gPj4gMTQKICAgIHZhciBtID0geGggKiBsICsgaCAqIHhsCiAgICBsID0geGwgKiBsICsgKChtICYgMHgzZmZmKSA8PCAxNCkgKyB3W2pdICsgYwogICAgYyA9IChsID4+IDI4KSArIChtID4+IDE0KSArIHhoICogaAogICAgd1tqKytdID0gbCAmIDB4ZmZmZmZmZgogIH0KICByZXR1cm4gYwp9CgovLyB3dGY/CkJpZ0ludGVnZXIucHJvdG90eXBlLmFtID0gYW0xCmRiaXRzID0gMjYKCkJpZ0ludGVnZXIucHJvdG90eXBlLkRCID0gZGJpdHMKQmlnSW50ZWdlci5wcm90b3R5cGUuRE0gPSAoKDEgPDwgZGJpdHMpIC0gMSkKdmFyIERWID0gQmlnSW50ZWdlci5wcm90b3R5cGUuRFYgPSAoMSA8PCBkYml0cykKCnZhciBCSV9GUCA9IDUyCkJpZ0ludGVnZXIucHJvdG90eXBlLkZWID0gTWF0aC5wb3coMiwgQklfRlApCkJpZ0ludGVnZXIucHJvdG90eXBlLkYxID0gQklfRlAgLSBkYml0cwpCaWdJbnRlZ2VyLnByb3RvdHlwZS5GMiA9IDIgKiBkYml0cyAtIEJJX0ZQCgovLyBEaWdpdCBjb252ZXJzaW9ucwp2YXIgQklfUk0gPSAiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6Igp2YXIgQklfUkMgPSBuZXcgQXJyYXkoKQp2YXIgcnIsIHZ2CnJyID0gIjAiLmNoYXJDb2RlQXQoMCkKZm9yICh2diA9IDA7IHZ2IDw9IDk7ICsrdnYpIEJJX1JDW3JyKytdID0gdnYKcnIgPSAiYSIuY2hhckNvZGVBdCgwKQpmb3IgKHZ2ID0gMTA7IHZ2IDwgMzY7ICsrdnYpIEJJX1JDW3JyKytdID0gdnYKcnIgPSAiQSIuY2hhckNvZGVBdCgwKQpmb3IgKHZ2ID0gMTA7IHZ2IDwgMzY7ICsrdnYpIEJJX1JDW3JyKytdID0gdnYKCmZ1bmN0aW9uIGludDJjaGFyKG4pIHsKICByZXR1cm4gQklfUk0uY2hhckF0KG4pCn0KCmZ1bmN0aW9uIGludEF0KHMsIGkpIHsKICB2YXIgYyA9IEJJX1JDW3MuY2hhckNvZGVBdChpKV0KICByZXR1cm4gKGMgPT0gbnVsbCkgPyAtMSA6IGMKfQoKLy8gKHByb3RlY3RlZCkgY29weSB0aGlzIHRvIHIKZnVuY3Rpb24gYm5wQ29weVRvKHIpIHsKICBmb3IgKHZhciBpID0gdGhpcy50IC0gMTsgaSA+PSAwOyAtLWkpIHJbaV0gPSB0aGlzW2ldCiAgci50ID0gdGhpcy50CiAgci5zID0gdGhpcy5zCn0KCi8vIChwcm90ZWN0ZWQpIHNldCBmcm9tIGludGVnZXIgdmFsdWUgeCwgLURWIDw9IHggPCBEVgpmdW5jdGlvbiBibnBGcm9tSW50KHgpIHsKICB0aGlzLnQgPSAxCiAgdGhpcy5zID0gKHggPCAwKSA/IC0xIDogMAogIGlmICh4ID4gMCkgdGhpc1swXSA9IHgKICBlbHNlIGlmICh4IDwgLTEpIHRoaXNbMF0gPSB4ICsgRFYKICBlbHNlIHRoaXMudCA9IDAKfQoKLy8gcmV0dXJuIGJpZ2ludCBpbml0aWFsaXplZCB0byB2YWx1ZQpmdW5jdGlvbiBuYnYoaSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHIuZnJvbUludChpKQogIHJldHVybiByCn0KCi8vIChwcm90ZWN0ZWQpIHNldCBmcm9tIHN0cmluZyBhbmQgcmFkaXgKZnVuY3Rpb24gYm5wRnJvbVN0cmluZyhzLCBiKSB7CiAgdmFyIHNlbGYgPSB0aGlzCgogIHZhciBrCiAgaWYgKGIgPT0gMTYpIGsgPSA0CiAgZWxzZSBpZiAoYiA9PSA4KSBrID0gMwogIGVsc2UgaWYgKGIgPT0gMjU2KSBrID0gODsgLy8gYnl0ZSBhcnJheQogIGVsc2UgaWYgKGIgPT0gMikgayA9IDEKICBlbHNlIGlmIChiID09IDMyKSBrID0gNQogIGVsc2UgaWYgKGIgPT0gNCkgayA9IDIKICBlbHNlIHsKICAgIHNlbGYuZnJvbVJhZGl4KHMsIGIpCiAgICByZXR1cm4KICB9CiAgc2VsZi50ID0gMAogIHNlbGYucyA9IDAKICB2YXIgaSA9IHMubGVuZ3RoLAogICAgbWkgPSBmYWxzZSwKICAgIHNoID0gMAogIHdoaWxlICgtLWkgPj0gMCkgewogICAgdmFyIHggPSAoayA9PSA4KSA/IHNbaV0gJiAweGZmIDogaW50QXQocywgaSkKICAgIGlmICh4IDwgMCkgewogICAgICBpZiAocy5jaGFyQXQoaSkgPT0gIi0iKSBtaSA9IHRydWUKICAgICAgY29udGludWUKICAgIH0KICAgIG1pID0gZmFsc2UKICAgIGlmIChzaCA9PSAwKQogICAgICBzZWxmW3NlbGYudCsrXSA9IHgKICAgIGVsc2UgaWYgKHNoICsgayA+IHNlbGYuREIpIHsKICAgICAgc2VsZltzZWxmLnQgLSAxXSB8PSAoeCAmICgoMSA8PCAoc2VsZi5EQiAtIHNoKSkgLSAxKSkgPDwgc2gKICAgICAgc2VsZltzZWxmLnQrK10gPSAoeCA+PiAoc2VsZi5EQiAtIHNoKSkKICAgIH0gZWxzZQogICAgICBzZWxmW3NlbGYudCAtIDFdIHw9IHggPDwgc2gKICAgIHNoICs9IGsKICAgIGlmIChzaCA+PSBzZWxmLkRCKSBzaCAtPSBzZWxmLkRCCiAgfQogIGlmIChrID09IDggJiYgKHNbMF0gJiAweDgwKSAhPSAwKSB7CiAgICBzZWxmLnMgPSAtMQogICAgaWYgKHNoID4gMCkgc2VsZltzZWxmLnQgLSAxXSB8PSAoKDEgPDwgKHNlbGYuREIgLSBzaCkpIC0gMSkgPDwgc2gKICB9CiAgc2VsZi5jbGFtcCgpCiAgaWYgKG1pKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8oc2VsZiwgc2VsZikKfQoKLy8gKHByb3RlY3RlZCkgY2xhbXAgb2ZmIGV4Y2VzcyBoaWdoIHdvcmRzCmZ1bmN0aW9uIGJucENsYW1wKCkgewogIHZhciBjID0gdGhpcy5zICYgdGhpcy5ETQogIHdoaWxlICh0aGlzLnQgPiAwICYmIHRoaXNbdGhpcy50IC0gMV0gPT0gYyktLXRoaXMudAp9CgovLyAocHVibGljKSByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIGluIGdpdmVuIHJhZGl4CmZ1bmN0aW9uIGJuVG9TdHJpbmcoYikgewogIHZhciBzZWxmID0gdGhpcwogIGlmIChzZWxmLnMgPCAwKSByZXR1cm4gIi0iICsgc2VsZi5uZWdhdGUoKQogICAgLnRvU3RyaW5nKGIpCiAgdmFyIGsKICBpZiAoYiA9PSAxNikgayA9IDQKICBlbHNlIGlmIChiID09IDgpIGsgPSAzCiAgZWxzZSBpZiAoYiA9PSAyKSBrID0gMQogIGVsc2UgaWYgKGIgPT0gMzIpIGsgPSA1CiAgZWxzZSBpZiAoYiA9PSA0KSBrID0gMgogIGVsc2UgcmV0dXJuIHNlbGYudG9SYWRpeChiKQogIHZhciBrbSA9ICgxIDw8IGspIC0gMSwKICAgIGQsIG0gPSBmYWxzZSwKICAgIHIgPSAiIiwKICAgIGkgPSBzZWxmLnQKICB2YXIgcCA9IHNlbGYuREIgLSAoaSAqIHNlbGYuREIpICUgawogIGlmIChpLS0gPiAwKSB7CiAgICBpZiAocCA8IHNlbGYuREIgJiYgKGQgPSBzZWxmW2ldID4+IHApID4gMCkgewogICAgICBtID0gdHJ1ZQogICAgICByID0gaW50MmNoYXIoZCkKICAgIH0KICAgIHdoaWxlIChpID49IDApIHsKICAgICAgaWYgKHAgPCBrKSB7CiAgICAgICAgZCA9IChzZWxmW2ldICYgKCgxIDw8IHApIC0gMSkpIDw8IChrIC0gcCkKICAgICAgICBkIHw9IHNlbGZbLS1pXSA+PiAocCArPSBzZWxmLkRCIC0gaykKICAgICAgfSBlbHNlIHsKICAgICAgICBkID0gKHNlbGZbaV0gPj4gKHAgLT0gaykpICYga20KICAgICAgICBpZiAocCA8PSAwKSB7CiAgICAgICAgICBwICs9IHNlbGYuREIKICAgICAgICAgIC0taQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoZCA+IDApIG0gPSB0cnVlCiAgICAgIGlmIChtKSByICs9IGludDJjaGFyKGQpCiAgICB9CiAgfQogIHJldHVybiBtID8gciA6ICIwIgp9CgovLyAocHVibGljKSAtdGhpcwpmdW5jdGlvbiBibk5lZ2F0ZSgpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8odGhpcywgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB8dGhpc3wKZnVuY3Rpb24gYm5BYnMoKSB7CiAgcmV0dXJuICh0aGlzLnMgPCAwKSA/IHRoaXMubmVnYXRlKCkgOiB0aGlzCn0KCi8vIChwdWJsaWMpIHJldHVybiArIGlmIHRoaXMgPiBhLCAtIGlmIHRoaXMgPCBhLCAwIGlmIGVxdWFsCmZ1bmN0aW9uIGJuQ29tcGFyZVRvKGEpIHsKICB2YXIgciA9IHRoaXMucyAtIGEucwogIGlmIChyICE9IDApIHJldHVybiByCiAgdmFyIGkgPSB0aGlzLnQKICByID0gaSAtIGEudAogIGlmIChyICE9IDApIHJldHVybiAodGhpcy5zIDwgMCkgPyAtciA6IHIKICB3aGlsZSAoLS1pID49IDApCiAgICBpZiAoKHIgPSB0aGlzW2ldIC0gYVtpXSkgIT0gMCkgcmV0dXJuIHIKICByZXR1cm4gMAp9CgovLyByZXR1cm5zIGJpdCBsZW5ndGggb2YgdGhlIGludGVnZXIgeApmdW5jdGlvbiBuYml0cyh4KSB7CiAgdmFyIHIgPSAxLAogICAgdAogIGlmICgodCA9IHggPj4+IDE2KSAhPSAwKSB7CiAgICB4ID0gdAogICAgciArPSAxNgogIH0KICBpZiAoKHQgPSB4ID4+IDgpICE9IDApIHsKICAgIHggPSB0CiAgICByICs9IDgKICB9CiAgaWYgKCh0ID0geCA+PiA0KSAhPSAwKSB7CiAgICB4ID0gdAogICAgciArPSA0CiAgfQogIGlmICgodCA9IHggPj4gMikgIT0gMCkgewogICAgeCA9IHQKICAgIHIgKz0gMgogIH0KICBpZiAoKHQgPSB4ID4+IDEpICE9IDApIHsKICAgIHggPSB0CiAgICByICs9IDEKICB9CiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgcmV0dXJuIHRoZSBudW1iZXIgb2YgYml0cyBpbiAidGhpcyIKZnVuY3Rpb24gYm5CaXRMZW5ndGgoKSB7CiAgaWYgKHRoaXMudCA8PSAwKSByZXR1cm4gMAogIHJldHVybiB0aGlzLkRCICogKHRoaXMudCAtIDEpICsgbmJpdHModGhpc1t0aGlzLnQgLSAxXSBeICh0aGlzLnMgJiB0aGlzLkRNKSkKfQoKLy8gKHB1YmxpYykgcmV0dXJuIHRoZSBudW1iZXIgb2YgYnl0ZXMgaW4gInRoaXMiCmZ1bmN0aW9uIGJuQnl0ZUxlbmd0aCgpIHsKICByZXR1cm4gdGhpcy5iaXRMZW5ndGgoKSA+PiAzCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzIDw8IG4qREIKZnVuY3Rpb24gYm5wRExTaGlmdFRvKG4sIHIpIHsKICB2YXIgaQogIGZvciAoaSA9IHRoaXMudCAtIDE7IGkgPj0gMDsgLS1pKSByW2kgKyBuXSA9IHRoaXNbaV0KICBmb3IgKGkgPSBuIC0gMTsgaSA+PSAwOyAtLWkpIHJbaV0gPSAwCiAgci50ID0gdGhpcy50ICsgbgogIHIucyA9IHRoaXMucwp9CgovLyAocHJvdGVjdGVkKSByID0gdGhpcyA+PiBuKkRCCmZ1bmN0aW9uIGJucERSU2hpZnRUbyhuLCByKSB7CiAgZm9yICh2YXIgaSA9IG47IGkgPCB0aGlzLnQ7ICsraSkgcltpIC0gbl0gPSB0aGlzW2ldCiAgci50ID0gTWF0aC5tYXgodGhpcy50IC0gbiwgMCkKICByLnMgPSB0aGlzLnMKfQoKLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgPDwgbgpmdW5jdGlvbiBibnBMU2hpZnRUbyhuLCByKSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgdmFyIGJzID0gbiAlIHNlbGYuREIKICB2YXIgY2JzID0gc2VsZi5EQiAtIGJzCiAgdmFyIGJtID0gKDEgPDwgY2JzKSAtIDEKICB2YXIgZHMgPSBNYXRoLmZsb29yKG4gLyBzZWxmLkRCKSwKICAgIGMgPSAoc2VsZi5zIDw8IGJzKSAmIHNlbGYuRE0sCiAgICBpCiAgZm9yIChpID0gc2VsZi50IC0gMTsgaSA+PSAwOyAtLWkpIHsKICAgIHJbaSArIGRzICsgMV0gPSAoc2VsZltpXSA+PiBjYnMpIHwgYwogICAgYyA9IChzZWxmW2ldICYgYm0pIDw8IGJzCiAgfQogIGZvciAoaSA9IGRzIC0gMTsgaSA+PSAwOyAtLWkpIHJbaV0gPSAwCiAgcltkc10gPSBjCiAgci50ID0gc2VsZi50ICsgZHMgKyAxCiAgci5zID0gc2VsZi5zCiAgci5jbGFtcCgpCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzID4+IG4KZnVuY3Rpb24gYm5wUlNoaWZ0VG8obiwgcikgewogIHZhciBzZWxmID0gdGhpcwogIHIucyA9IHNlbGYucwogIHZhciBkcyA9IE1hdGguZmxvb3IobiAvIHNlbGYuREIpCiAgaWYgKGRzID49IHNlbGYudCkgewogICAgci50ID0gMAogICAgcmV0dXJuCiAgfQogIHZhciBicyA9IG4gJSBzZWxmLkRCCiAgdmFyIGNicyA9IHNlbGYuREIgLSBicwogIHZhciBibSA9ICgxIDw8IGJzKSAtIDEKICByWzBdID0gc2VsZltkc10gPj4gYnMKICBmb3IgKHZhciBpID0gZHMgKyAxOyBpIDwgc2VsZi50OyArK2kpIHsKICAgIHJbaSAtIGRzIC0gMV0gfD0gKHNlbGZbaV0gJiBibSkgPDwgY2JzCiAgICByW2kgLSBkc10gPSBzZWxmW2ldID4+IGJzCiAgfQogIGlmIChicyA+IDApIHJbc2VsZi50IC0gZHMgLSAxXSB8PSAoc2VsZi5zICYgYm0pIDw8IGNicwogIHIudCA9IHNlbGYudCAtIGRzCiAgci5jbGFtcCgpCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzIC0gYQpmdW5jdGlvbiBibnBTdWJUbyhhLCByKSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgdmFyIGkgPSAwLAogICAgYyA9IDAsCiAgICBtID0gTWF0aC5taW4oYS50LCBzZWxmLnQpCiAgd2hpbGUgKGkgPCBtKSB7CiAgICBjICs9IHNlbGZbaV0gLSBhW2ldCiAgICByW2krK10gPSBjICYgc2VsZi5ETQogICAgYyA+Pj0gc2VsZi5EQgogIH0KICBpZiAoYS50IDwgc2VsZi50KSB7CiAgICBjIC09IGEucwogICAgd2hpbGUgKGkgPCBzZWxmLnQpIHsKICAgICAgYyArPSBzZWxmW2ldCiAgICAgIHJbaSsrXSA9IGMgJiBzZWxmLkRNCiAgICAgIGMgPj49IHNlbGYuREIKICAgIH0KICAgIGMgKz0gc2VsZi5zCiAgfSBlbHNlIHsKICAgIGMgKz0gc2VsZi5zCiAgICB3aGlsZSAoaSA8IGEudCkgewogICAgICBjIC09IGFbaV0KICAgICAgcltpKytdID0gYyAmIHNlbGYuRE0KICAgICAgYyA+Pj0gc2VsZi5EQgogICAgfQogICAgYyAtPSBhLnMKICB9CiAgci5zID0gKGMgPCAwKSA/IC0xIDogMAogIGlmIChjIDwgLTEpIHJbaSsrXSA9IHNlbGYuRFYgKyBjCiAgZWxzZSBpZiAoYyA+IDApIHJbaSsrXSA9IGMKICByLnQgPSBpCiAgci5jbGFtcCgpCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzICogYSwgciAhPSB0aGlzLGEgKEhBQyAxNC4xMikKLy8gInRoaXMiIHNob3VsZCBiZSB0aGUgbGFyZ2VyIG9uZSBpZiBhcHByb3ByaWF0ZS4KZnVuY3Rpb24gYm5wTXVsdGlwbHlUbyhhLCByKSB7CiAgdmFyIHggPSB0aGlzLmFicygpLAogICAgeSA9IGEuYWJzKCkKICB2YXIgaSA9IHgudAogIHIudCA9IGkgKyB5LnQKICB3aGlsZSAoLS1pID49IDApIHJbaV0gPSAwCiAgZm9yIChpID0gMDsgaSA8IHkudDsgKytpKSByW2kgKyB4LnRdID0geC5hbSgwLCB5W2ldLCByLCBpLCAwLCB4LnQpCiAgci5zID0gMAogIHIuY2xhbXAoKQogIGlmICh0aGlzLnMgIT0gYS5zKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8ociwgcikKfQoKLy8gKHByb3RlY3RlZCkgciA9IHRoaXNeMiwgciAhPSB0aGlzIChIQUMgMTQuMTYpCmZ1bmN0aW9uIGJucFNxdWFyZVRvKHIpIHsKICB2YXIgeCA9IHRoaXMuYWJzKCkKICB2YXIgaSA9IHIudCA9IDIgKiB4LnQKICB3aGlsZSAoLS1pID49IDApIHJbaV0gPSAwCiAgZm9yIChpID0gMDsgaSA8IHgudCAtIDE7ICsraSkgewogICAgdmFyIGMgPSB4LmFtKGksIHhbaV0sIHIsIDIgKiBpLCAwLCAxKQogICAgaWYgKChyW2kgKyB4LnRdICs9IHguYW0oaSArIDEsIDIgKiB4W2ldLCByLCAyICogaSArIDEsIGMsIHgudCAtIGkgLSAxKSkgPj0geC5EVikgewogICAgICByW2kgKyB4LnRdIC09IHguRFYKICAgICAgcltpICsgeC50ICsgMV0gPSAxCiAgICB9CiAgfQogIGlmIChyLnQgPiAwKSByW3IudCAtIDFdICs9IHguYW0oaSwgeFtpXSwgciwgMiAqIGksIDAsIDEpCiAgci5zID0gMAogIHIuY2xhbXAoKQp9CgovLyAocHJvdGVjdGVkKSBkaXZpZGUgdGhpcyBieSBtLCBxdW90aWVudCBhbmQgcmVtYWluZGVyIHRvIHEsIHIgKEhBQyAxNC4yMCkKLy8gciAhPSBxLCB0aGlzICE9IG0uICBxIG9yIHIgbWF5IGJlIG51bGwuCmZ1bmN0aW9uIGJucERpdlJlbVRvKG0sIHEsIHIpIHsKICB2YXIgc2VsZiA9IHRoaXMKICB2YXIgcG0gPSBtLmFicygpCiAgaWYgKHBtLnQgPD0gMCkgcmV0dXJuCiAgdmFyIHB0ID0gc2VsZi5hYnMoKQogIGlmIChwdC50IDwgcG0udCkgewogICAgaWYgKHEgIT0gbnVsbCkgcS5mcm9tSW50KDApCiAgICBpZiAociAhPSBudWxsKSBzZWxmLmNvcHlUbyhyKQogICAgcmV0dXJuCiAgfQogIGlmIChyID09IG51bGwpIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdmFyIHkgPSBuZXcgQmlnSW50ZWdlcigpLAogICAgdHMgPSBzZWxmLnMsCiAgICBtcyA9IG0ucwogIHZhciBuc2ggPSBzZWxmLkRCIC0gbmJpdHMocG1bcG0udCAtIDFdKTsgLy8gbm9ybWFsaXplIG1vZHVsdXMKICBpZiAobnNoID4gMCkgewogICAgcG0ubFNoaWZ0VG8obnNoLCB5KQogICAgcHQubFNoaWZ0VG8obnNoLCByKQogIH0gZWxzZSB7CiAgICBwbS5jb3B5VG8oeSkKICAgIHB0LmNvcHlUbyhyKQogIH0KICB2YXIgeXMgPSB5LnQKICB2YXIgeTAgPSB5W3lzIC0gMV0KICBpZiAoeTAgPT0gMCkgcmV0dXJuCiAgdmFyIHl0ID0geTAgKiAoMSA8PCBzZWxmLkYxKSArICgoeXMgPiAxKSA/IHlbeXMgLSAyXSA+PiBzZWxmLkYyIDogMCkKICB2YXIgZDEgPSBzZWxmLkZWIC8geXQsCiAgICBkMiA9ICgxIDw8IHNlbGYuRjEpIC8geXQsCiAgICBlID0gMSA8PCBzZWxmLkYyCiAgdmFyIGkgPSByLnQsCiAgICBqID0gaSAtIHlzLAogICAgdCA9IChxID09IG51bGwpID8gbmV3IEJpZ0ludGVnZXIoKSA6IHEKICB5LmRsU2hpZnRUbyhqLCB0KQogIGlmIChyLmNvbXBhcmVUbyh0KSA+PSAwKSB7CiAgICByW3IudCsrXSA9IDEKICAgIHIuc3ViVG8odCwgcikKICB9CiAgQmlnSW50ZWdlci5PTkUuZGxTaGlmdFRvKHlzLCB0KQogIHQuc3ViVG8oeSwgeSk7IC8vICJuZWdhdGl2ZSIgeSBzbyB3ZSBjYW4gcmVwbGFjZSBzdWIgd2l0aCBhbSBsYXRlcgogIHdoaWxlICh5LnQgPCB5cykgeVt5LnQrK10gPSAwCiAgd2hpbGUgKC0taiA+PSAwKSB7CiAgICAvLyBFc3RpbWF0ZSBxdW90aWVudCBkaWdpdAogICAgdmFyIHFkID0gKHJbLS1pXSA9PSB5MCkgPyBzZWxmLkRNIDogTWF0aC5mbG9vcihyW2ldICogZDEgKyAocltpIC0gMV0gKyBlKSAqIGQyKQogICAgaWYgKChyW2ldICs9IHkuYW0oMCwgcWQsIHIsIGosIDAsIHlzKSkgPCBxZCkgeyAvLyBUcnkgaXQgb3V0CiAgICAgIHkuZGxTaGlmdFRvKGosIHQpCiAgICAgIHIuc3ViVG8odCwgcikKICAgICAgd2hpbGUgKHJbaV0gPCAtLXFkKSByLnN1YlRvKHQsIHIpCiAgICB9CiAgfQogIGlmIChxICE9IG51bGwpIHsKICAgIHIuZHJTaGlmdFRvKHlzLCBxKQogICAgaWYgKHRzICE9IG1zKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8ocSwgcSkKICB9CiAgci50ID0geXMKICByLmNsYW1wKCkKICBpZiAobnNoID4gMCkgci5yU2hpZnRUbyhuc2gsIHIpOyAvLyBEZW5vcm1hbGl6ZSByZW1haW5kZXIKICBpZiAodHMgPCAwKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8ociwgcikKfQoKLy8gKHB1YmxpYykgdGhpcyBtb2QgYQpmdW5jdGlvbiBibk1vZChhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5hYnMoKQogICAgLmRpdlJlbVRvKGEsIG51bGwsIHIpCiAgaWYgKHRoaXMucyA8IDAgJiYgci5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKSA+IDApIGEuc3ViVG8ociwgcikKICByZXR1cm4gcgp9CgovLyBNb2R1bGFyIHJlZHVjdGlvbiB1c2luZyAiY2xhc3NpYyIgYWxnb3JpdGhtCmZ1bmN0aW9uIENsYXNzaWMobSkgewogIHRoaXMubSA9IG0KfQoKZnVuY3Rpb24gY0NvbnZlcnQoeCkgewogIGlmICh4LnMgPCAwIHx8IHguY29tcGFyZVRvKHRoaXMubSkgPj0gMCkgcmV0dXJuIHgubW9kKHRoaXMubSkKICBlbHNlIHJldHVybiB4Cn0KCmZ1bmN0aW9uIGNSZXZlcnQoeCkgewogIHJldHVybiB4Cn0KCmZ1bmN0aW9uIGNSZWR1Y2UoeCkgewogIHguZGl2UmVtVG8odGhpcy5tLCBudWxsLCB4KQp9CgpmdW5jdGlvbiBjTXVsVG8oeCwgeSwgcikgewogIHgubXVsdGlwbHlUbyh5LCByKQogIHRoaXMucmVkdWNlKHIpCn0KCmZ1bmN0aW9uIGNTcXJUbyh4LCByKSB7CiAgeC5zcXVhcmVUbyhyKQogIHRoaXMucmVkdWNlKHIpCn0KCkNsYXNzaWMucHJvdG90eXBlLmNvbnZlcnQgPSBjQ29udmVydApDbGFzc2ljLnByb3RvdHlwZS5yZXZlcnQgPSBjUmV2ZXJ0CkNsYXNzaWMucHJvdG90eXBlLnJlZHVjZSA9IGNSZWR1Y2UKQ2xhc3NpYy5wcm90b3R5cGUubXVsVG8gPSBjTXVsVG8KQ2xhc3NpYy5wcm90b3R5cGUuc3FyVG8gPSBjU3FyVG8KCi8vIChwcm90ZWN0ZWQpIHJldHVybiAiLTEvdGhpcyAlIDJeREIiOyB1c2VmdWwgZm9yIE1vbnQuIHJlZHVjdGlvbgovLyBqdXN0aWZpY2F0aW9uOgovLyAgICAgICAgIHh5ID09IDEgKG1vZCBtKQovLyAgICAgICAgIHh5ID0gIDEra20KLy8gICB4eSgyLXh5KSA9ICgxK2ttKSgxLWttKQovLyB4W3koMi14eSldID0gMS1rXjJtXjIKLy8geFt5KDIteHkpXSA9PSAxIChtb2QgbV4yKQovLyBpZiB5IGlzIDEveCBtb2QgbSwgdGhlbiB5KDIteHkpIGlzIDEveCBtb2QgbV4yCi8vIHNob3VsZCByZWR1Y2UgeCBhbmQgeSgyLXh5KSBieSBtXjIgYXQgZWFjaCBzdGVwIHRvIGtlZXAgc2l6ZSBib3VuZGVkLgovLyBKUyBtdWx0aXBseSAib3ZlcmZsb3dzIiBkaWZmZXJlbnRseSBmcm9tIEMvQysrLCBzbyBjYXJlIGlzIG5lZWRlZCBoZXJlLgpmdW5jdGlvbiBibnBJbnZEaWdpdCgpIHsKICBpZiAodGhpcy50IDwgMSkgcmV0dXJuIDAKICB2YXIgeCA9IHRoaXNbMF0KICBpZiAoKHggJiAxKSA9PSAwKSByZXR1cm4gMAogIHZhciB5ID0geCAmIDM7IC8vIHkgPT0gMS94IG1vZCAyXjIKICB5ID0gKHkgKiAoMiAtICh4ICYgMHhmKSAqIHkpKSAmIDB4ZjsgLy8geSA9PSAxL3ggbW9kIDJeNAogIHkgPSAoeSAqICgyIC0gKHggJiAweGZmKSAqIHkpKSAmIDB4ZmY7IC8vIHkgPT0gMS94IG1vZCAyXjgKICB5ID0gKHkgKiAoMiAtICgoKHggJiAweGZmZmYpICogeSkgJiAweGZmZmYpKSkgJiAweGZmZmY7IC8vIHkgPT0gMS94IG1vZCAyXjE2CiAgLy8gbGFzdCBzdGVwIC0gY2FsY3VsYXRlIGludmVyc2UgbW9kIERWIGRpcmVjdGx5CiAgLy8gYXNzdW1lcyAxNiA8IERCIDw9IDMyIGFuZCBhc3N1bWVzIGFiaWxpdHkgdG8gaGFuZGxlIDQ4LWJpdCBpbnRzCiAgeSA9ICh5ICogKDIgLSB4ICogeSAlIHRoaXMuRFYpKSAlIHRoaXMuRFY7IC8vIHkgPT0gMS94IG1vZCAyXmRiaXRzCiAgLy8gd2UgcmVhbGx5IHdhbnQgdGhlIG5lZ2F0aXZlIGludmVyc2UsIGFuZCAtRFYgPCB5IDwgRFYKICByZXR1cm4gKHkgPiAwKSA/IHRoaXMuRFYgLSB5IDogLXkKfQoKLy8gTW9udGdvbWVyeSByZWR1Y3Rpb24KZnVuY3Rpb24gTW9udGdvbWVyeShtKSB7CiAgdGhpcy5tID0gbQogIHRoaXMubXAgPSBtLmludkRpZ2l0KCkKICB0aGlzLm1wbCA9IHRoaXMubXAgJiAweDdmZmYKICB0aGlzLm1waCA9IHRoaXMubXAgPj4gMTUKICB0aGlzLnVtID0gKDEgPDwgKG0uREIgLSAxNSkpIC0gMQogIHRoaXMubXQyID0gMiAqIG0udAp9CgovLyB4UiBtb2QgbQpmdW5jdGlvbiBtb250Q29udmVydCh4KSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgeC5hYnMoKQogICAgLmRsU2hpZnRUbyh0aGlzLm0udCwgcikKICByLmRpdlJlbVRvKHRoaXMubSwgbnVsbCwgcikKICBpZiAoeC5zIDwgMCAmJiByLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLlpFUk8pID4gMCkgdGhpcy5tLnN1YlRvKHIsIHIpCiAgcmV0dXJuIHIKfQoKLy8geC9SIG1vZCBtCmZ1bmN0aW9uIG1vbnRSZXZlcnQoeCkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHguY29weVRvKHIpCiAgdGhpcy5yZWR1Y2UocikKICByZXR1cm4gcgp9CgovLyB4ID0geC9SIG1vZCBtIChIQUMgMTQuMzIpCmZ1bmN0aW9uIG1vbnRSZWR1Y2UoeCkgewogIHdoaWxlICh4LnQgPD0gdGhpcy5tdDIpIC8vIHBhZCB4IHNvIGFtIGhhcyBlbm91Z2ggcm9vbSBsYXRlcgogICAgeFt4LnQrK10gPSAwCiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm0udDsgKytpKSB7CiAgICAvLyBmYXN0ZXIgd2F5IG9mIGNhbGN1bGF0aW5nIHUwID0geFtpXSptcCBtb2QgRFYKICAgIHZhciBqID0geFtpXSAmIDB4N2ZmZgogICAgdmFyIHUwID0gKGogKiB0aGlzLm1wbCArICgoKGogKiB0aGlzLm1waCArICh4W2ldID4+IDE1KSAqIHRoaXMubXBsKSAmIHRoaXMudW0pIDw8IDE1KSkgJiB4LkRNCiAgICAvLyB1c2UgYW0gdG8gY29tYmluZSB0aGUgbXVsdGlwbHktc2hpZnQtYWRkIGludG8gb25lIGNhbGwKICAgIGogPSBpICsgdGhpcy5tLnQKICAgIHhbal0gKz0gdGhpcy5tLmFtKDAsIHUwLCB4LCBpLCAwLCB0aGlzLm0udCkKICAgIC8vIHByb3BhZ2F0ZSBjYXJyeQogICAgd2hpbGUgKHhbal0gPj0geC5EVikgewogICAgICB4W2pdIC09IHguRFYKICAgICAgeFsrK2pdKysKICAgIH0KICB9CiAgeC5jbGFtcCgpCiAgeC5kclNoaWZ0VG8odGhpcy5tLnQsIHgpCiAgaWYgKHguY29tcGFyZVRvKHRoaXMubSkgPj0gMCkgeC5zdWJUbyh0aGlzLm0sIHgpCn0KCi8vIHIgPSAieF4yL1IgbW9kIG0iOyB4ICE9IHIKZnVuY3Rpb24gbW9udFNxclRvKHgsIHIpIHsKICB4LnNxdWFyZVRvKHIpCiAgdGhpcy5yZWR1Y2UocikKfQoKLy8gciA9ICJ4eS9SIG1vZCBtIjsgeCx5ICE9IHIKZnVuY3Rpb24gbW9udE11bFRvKHgsIHksIHIpIHsKICB4Lm11bHRpcGx5VG8oeSwgcikKICB0aGlzLnJlZHVjZShyKQp9CgpNb250Z29tZXJ5LnByb3RvdHlwZS5jb252ZXJ0ID0gbW9udENvbnZlcnQKTW9udGdvbWVyeS5wcm90b3R5cGUucmV2ZXJ0ID0gbW9udFJldmVydApNb250Z29tZXJ5LnByb3RvdHlwZS5yZWR1Y2UgPSBtb250UmVkdWNlCk1vbnRnb21lcnkucHJvdG90eXBlLm11bFRvID0gbW9udE11bFRvCk1vbnRnb21lcnkucHJvdG90eXBlLnNxclRvID0gbW9udFNxclRvCgovLyAocHJvdGVjdGVkKSB0cnVlIGlmZiB0aGlzIGlzIGV2ZW4KZnVuY3Rpb24gYm5wSXNFdmVuKCkgewogIHJldHVybiAoKHRoaXMudCA+IDApID8gKHRoaXNbMF0gJiAxKSA6IHRoaXMucykgPT0gMAp9CgovLyAocHJvdGVjdGVkKSB0aGlzXmUsIGUgPCAyXjMyLCBkb2luZyBzcXIgYW5kIG11bCB3aXRoICJyIiAoSEFDIDE0Ljc5KQpmdW5jdGlvbiBibnBFeHAoZSwgeikgewogIGlmIChlID4gMHhmZmZmZmZmZiB8fCBlIDwgMSkgcmV0dXJuIEJpZ0ludGVnZXIuT05FCiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpLAogICAgcjIgPSBuZXcgQmlnSW50ZWdlcigpLAogICAgZyA9IHouY29udmVydCh0aGlzKSwKICAgIGkgPSBuYml0cyhlKSAtIDEKICBnLmNvcHlUbyhyKQogIHdoaWxlICgtLWkgPj0gMCkgewogICAgei5zcXJUbyhyLCByMikKICAgIGlmICgoZSAmICgxIDw8IGkpKSA+IDApIHoubXVsVG8ocjIsIGcsIHIpCiAgICBlbHNlIHsKICAgICAgdmFyIHQgPSByCiAgICAgIHIgPSByMgogICAgICByMiA9IHQKICAgIH0KICB9CiAgcmV0dXJuIHoucmV2ZXJ0KHIpCn0KCi8vIChwdWJsaWMpIHRoaXNeZSAlIG0sIDAgPD0gZSA8IDJeMzIKZnVuY3Rpb24gYm5Nb2RQb3dJbnQoZSwgbSkgewogIHZhciB6CiAgaWYgKGUgPCAyNTYgfHwgbS5pc0V2ZW4oKSkgeiA9IG5ldyBDbGFzc2ljKG0pCiAgZWxzZSB6ID0gbmV3IE1vbnRnb21lcnkobSkKICByZXR1cm4gdGhpcy5leHAoZSwgeikKfQoKLy8gcHJvdGVjdGVkCnByb3RvLmNvcHlUbyA9IGJucENvcHlUbwpwcm90by5mcm9tSW50ID0gYm5wRnJvbUludApwcm90by5mcm9tU3RyaW5nID0gYm5wRnJvbVN0cmluZwpwcm90by5jbGFtcCA9IGJucENsYW1wCnByb3RvLmRsU2hpZnRUbyA9IGJucERMU2hpZnRUbwpwcm90by5kclNoaWZ0VG8gPSBibnBEUlNoaWZ0VG8KcHJvdG8ubFNoaWZ0VG8gPSBibnBMU2hpZnRUbwpwcm90by5yU2hpZnRUbyA9IGJucFJTaGlmdFRvCnByb3RvLnN1YlRvID0gYm5wU3ViVG8KcHJvdG8ubXVsdGlwbHlUbyA9IGJucE11bHRpcGx5VG8KcHJvdG8uc3F1YXJlVG8gPSBibnBTcXVhcmVUbwpwcm90by5kaXZSZW1UbyA9IGJucERpdlJlbVRvCnByb3RvLmludkRpZ2l0ID0gYm5wSW52RGlnaXQKcHJvdG8uaXNFdmVuID0gYm5wSXNFdmVuCnByb3RvLmV4cCA9IGJucEV4cAoKLy8gcHVibGljCnByb3RvLnRvU3RyaW5nID0gYm5Ub1N0cmluZwpwcm90by5uZWdhdGUgPSBibk5lZ2F0ZQpwcm90by5hYnMgPSBibkFicwpwcm90by5jb21wYXJlVG8gPSBibkNvbXBhcmVUbwpwcm90by5iaXRMZW5ndGggPSBibkJpdExlbmd0aApwcm90by5ieXRlTGVuZ3RoID0gYm5CeXRlTGVuZ3RoCnByb3RvLm1vZCA9IGJuTW9kCnByb3RvLm1vZFBvd0ludCA9IGJuTW9kUG93SW50CgovLyAocHVibGljKQpmdW5jdGlvbiBibkNsb25lKCkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuY29weVRvKHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgcmV0dXJuIHZhbHVlIGFzIGludGVnZXIKZnVuY3Rpb24gYm5JbnRWYWx1ZSgpIHsKICBpZiAodGhpcy5zIDwgMCkgewogICAgaWYgKHRoaXMudCA9PSAxKSByZXR1cm4gdGhpc1swXSAtIHRoaXMuRFYKICAgIGVsc2UgaWYgKHRoaXMudCA9PSAwKSByZXR1cm4gLTEKICB9IGVsc2UgaWYgKHRoaXMudCA9PSAxKSByZXR1cm4gdGhpc1swXQogIGVsc2UgaWYgKHRoaXMudCA9PSAwKSByZXR1cm4gMAogIC8vIGFzc3VtZXMgMTYgPCBEQiA8IDMyCiAgcmV0dXJuICgodGhpc1sxXSAmICgoMSA8PCAoMzIgLSB0aGlzLkRCKSkgLSAxKSkgPDwgdGhpcy5EQikgfCB0aGlzWzBdCn0KCi8vIChwdWJsaWMpIHJldHVybiB2YWx1ZSBhcyBieXRlCmZ1bmN0aW9uIGJuQnl0ZVZhbHVlKCkgewogIHJldHVybiAodGhpcy50ID09IDApID8gdGhpcy5zIDogKHRoaXNbMF0gPDwgMjQpID4+IDI0Cn0KCi8vIChwdWJsaWMpIHJldHVybiB2YWx1ZSBhcyBzaG9ydCAoYXNzdW1lcyBEQj49MTYpCmZ1bmN0aW9uIGJuU2hvcnRWYWx1ZSgpIHsKICByZXR1cm4gKHRoaXMudCA9PSAwKSA/IHRoaXMucyA6ICh0aGlzWzBdIDw8IDE2KSA+PiAxNgp9CgovLyAocHJvdGVjdGVkKSByZXR1cm4geCBzLnQuIHJeeCA8IERWCmZ1bmN0aW9uIGJucENodW5rU2l6ZShyKSB7CiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5MTjIgKiB0aGlzLkRCIC8gTWF0aC5sb2cocikpCn0KCi8vIChwdWJsaWMpIDAgaWYgdGhpcyA9PSAwLCAxIGlmIHRoaXMgPiAwCmZ1bmN0aW9uIGJuU2lnTnVtKCkgewogIGlmICh0aGlzLnMgPCAwKSByZXR1cm4gLTEKICBlbHNlIGlmICh0aGlzLnQgPD0gMCB8fCAodGhpcy50ID09IDEgJiYgdGhpc1swXSA8PSAwKSkgcmV0dXJuIDAKICBlbHNlIHJldHVybiAxCn0KCi8vIChwcm90ZWN0ZWQpIGNvbnZlcnQgdG8gcmFkaXggc3RyaW5nCmZ1bmN0aW9uIGJucFRvUmFkaXgoYikgewogIGlmIChiID09IG51bGwpIGIgPSAxMAogIGlmICh0aGlzLnNpZ251bSgpID09IDAgfHwgYiA8IDIgfHwgYiA+IDM2KSByZXR1cm4gIjAiCiAgdmFyIGNzID0gdGhpcy5jaHVua1NpemUoYikKICB2YXIgYSA9IE1hdGgucG93KGIsIGNzKQogIHZhciBkID0gbmJ2KGEpLAogICAgeSA9IG5ldyBCaWdJbnRlZ2VyKCksCiAgICB6ID0gbmV3IEJpZ0ludGVnZXIoKSwKICAgIHIgPSAiIgogIHRoaXMuZGl2UmVtVG8oZCwgeSwgeikKICB3aGlsZSAoeS5zaWdudW0oKSA+IDApIHsKICAgIHIgPSAoYSArIHouaW50VmFsdWUoKSkKICAgICAgLnRvU3RyaW5nKGIpCiAgICAgIC5zdWJzdHIoMSkgKyByCiAgICB5LmRpdlJlbVRvKGQsIHksIHopCiAgfQogIHJldHVybiB6LmludFZhbHVlKCkKICAgIC50b1N0cmluZyhiKSArIHIKfQoKLy8gKHByb3RlY3RlZCkgY29udmVydCBmcm9tIHJhZGl4IHN0cmluZwpmdW5jdGlvbiBibnBGcm9tUmFkaXgocywgYikgewogIHZhciBzZWxmID0gdGhpcwogIHNlbGYuZnJvbUludCgwKQogIGlmIChiID09IG51bGwpIGIgPSAxMAogIHZhciBjcyA9IHNlbGYuY2h1bmtTaXplKGIpCiAgdmFyIGQgPSBNYXRoLnBvdyhiLCBjcyksCiAgICBtaSA9IGZhbHNlLAogICAgaiA9IDAsCiAgICB3ID0gMAogIGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7ICsraSkgewogICAgdmFyIHggPSBpbnRBdChzLCBpKQogICAgaWYgKHggPCAwKSB7CiAgICAgIGlmIChzLmNoYXJBdChpKSA9PSAiLSIgJiYgc2VsZi5zaWdudW0oKSA9PSAwKSBtaSA9IHRydWUKICAgICAgY29udGludWUKICAgIH0KICAgIHcgPSBiICogdyArIHgKICAgIGlmICgrK2ogPj0gY3MpIHsKICAgICAgc2VsZi5kTXVsdGlwbHkoZCkKICAgICAgc2VsZi5kQWRkT2Zmc2V0KHcsIDApCiAgICAgIGogPSAwCiAgICAgIHcgPSAwCiAgICB9CiAgfQogIGlmIChqID4gMCkgewogICAgc2VsZi5kTXVsdGlwbHkoTWF0aC5wb3coYiwgaikpCiAgICBzZWxmLmRBZGRPZmZzZXQodywgMCkKICB9CiAgaWYgKG1pKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8oc2VsZiwgc2VsZikKfQoKLy8gKHByb3RlY3RlZCkgYWx0ZXJuYXRlIGNvbnN0cnVjdG9yCmZ1bmN0aW9uIGJucEZyb21OdW1iZXIoYSwgYiwgYykgewogIHZhciBzZWxmID0gdGhpcwogIGlmICgibnVtYmVyIiA9PSB0eXBlb2YgYikgewogICAgLy8gbmV3IEJpZ0ludGVnZXIoaW50LGludCxSTkcpCiAgICBpZiAoYSA8IDIpIHNlbGYuZnJvbUludCgxKQogICAgZWxzZSB7CiAgICAgIHNlbGYuZnJvbU51bWJlcihhLCBjKQogICAgICBpZiAoIXNlbGYudGVzdEJpdChhIC0gMSkpIC8vIGZvcmNlIE1TQiBzZXQKICAgICAgICBzZWxmLmJpdHdpc2VUbyhCaWdJbnRlZ2VyLk9ORS5zaGlmdExlZnQoYSAtIDEpLCBvcF9vciwgc2VsZikKICAgICAgaWYgKHNlbGYuaXNFdmVuKCkpIHNlbGYuZEFkZE9mZnNldCgxLCAwKTsgLy8gZm9yY2Ugb2RkCiAgICAgIHdoaWxlICghc2VsZi5pc1Byb2JhYmxlUHJpbWUoYikpIHsKICAgICAgICBzZWxmLmRBZGRPZmZzZXQoMiwgMCkKICAgICAgICBpZiAoc2VsZi5iaXRMZW5ndGgoKSA+IGEpIHNlbGYuc3ViVG8oQmlnSW50ZWdlci5PTkUuc2hpZnRMZWZ0KGEgLSAxKSwgc2VsZikKICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICAvLyBuZXcgQmlnSW50ZWdlcihpbnQsUk5HKQogICAgdmFyIHggPSBuZXcgQXJyYXkoKSwKICAgICAgdCA9IGEgJiA3CiAgICB4Lmxlbmd0aCA9IChhID4+IDMpICsgMQogICAgYi5uZXh0Qnl0ZXMoeCkKICAgIGlmICh0ID4gMCkgeFswXSAmPSAoKDEgPDwgdCkgLSAxKQogICAgZWxzZSB4WzBdID0gMAogICAgc2VsZi5mcm9tU3RyaW5nKHgsIDI1NikKICB9Cn0KCi8vIChwdWJsaWMpIGNvbnZlcnQgdG8gYmlnZW5kaWFuIGJ5dGUgYXJyYXkKZnVuY3Rpb24gYm5Ub0J5dGVBcnJheSgpIHsKICB2YXIgc2VsZiA9IHRoaXMKICB2YXIgaSA9IHNlbGYudCwKICAgIHIgPSBuZXcgQXJyYXkoKQogIHJbMF0gPSBzZWxmLnMKICB2YXIgcCA9IHNlbGYuREIgLSAoaSAqIHNlbGYuREIpICUgOCwKICAgIGQsIGsgPSAwCiAgaWYgKGktLSA+IDApIHsKICAgIGlmIChwIDwgc2VsZi5EQiAmJiAoZCA9IHNlbGZbaV0gPj4gcCkgIT0gKHNlbGYucyAmIHNlbGYuRE0pID4+IHApCiAgICAgIHJbaysrXSA9IGQgfCAoc2VsZi5zIDw8IChzZWxmLkRCIC0gcCkpCiAgICB3aGlsZSAoaSA+PSAwKSB7CiAgICAgIGlmIChwIDwgOCkgewogICAgICAgIGQgPSAoc2VsZltpXSAmICgoMSA8PCBwKSAtIDEpKSA8PCAoOCAtIHApCiAgICAgICAgZCB8PSBzZWxmWy0taV0gPj4gKHAgKz0gc2VsZi5EQiAtIDgpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgZCA9IChzZWxmW2ldID4+IChwIC09IDgpKSAmIDB4ZmYKICAgICAgICBpZiAocCA8PSAwKSB7CiAgICAgICAgICBwICs9IHNlbGYuREIKICAgICAgICAgIC0taQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoKGQgJiAweDgwKSAhPSAwKSBkIHw9IC0yNTYKICAgICAgaWYgKGsgPT09IDAgJiYgKHNlbGYucyAmIDB4ODApICE9IChkICYgMHg4MCkpKytrCiAgICAgIGlmIChrID4gMCB8fCBkICE9IHNlbGYucykgcltrKytdID0gZAogICAgfQogIH0KICByZXR1cm4gcgp9CgpmdW5jdGlvbiBibkVxdWFscyhhKSB7CiAgcmV0dXJuICh0aGlzLmNvbXBhcmVUbyhhKSA9PSAwKQp9CgpmdW5jdGlvbiBibk1pbihhKSB7CiAgcmV0dXJuICh0aGlzLmNvbXBhcmVUbyhhKSA8IDApID8gdGhpcyA6IGEKfQoKZnVuY3Rpb24gYm5NYXgoYSkgewogIHJldHVybiAodGhpcy5jb21wYXJlVG8oYSkgPiAwKSA/IHRoaXMgOiBhCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzIG9wIGEgKGJpdHdpc2UpCmZ1bmN0aW9uIGJucEJpdHdpc2VUbyhhLCBvcCwgcikgewogIHZhciBzZWxmID0gdGhpcwogIHZhciBpLCBmLCBtID0gTWF0aC5taW4oYS50LCBzZWxmLnQpCiAgZm9yIChpID0gMDsgaSA8IG07ICsraSkgcltpXSA9IG9wKHNlbGZbaV0sIGFbaV0pCiAgaWYgKGEudCA8IHNlbGYudCkgewogICAgZiA9IGEucyAmIHNlbGYuRE0KICAgIGZvciAoaSA9IG07IGkgPCBzZWxmLnQ7ICsraSkgcltpXSA9IG9wKHNlbGZbaV0sIGYpCiAgICByLnQgPSBzZWxmLnQKICB9IGVsc2UgewogICAgZiA9IHNlbGYucyAmIHNlbGYuRE0KICAgIGZvciAoaSA9IG07IGkgPCBhLnQ7ICsraSkgcltpXSA9IG9wKGYsIGFbaV0pCiAgICByLnQgPSBhLnQKICB9CiAgci5zID0gb3Aoc2VsZi5zLCBhLnMpCiAgci5jbGFtcCgpCn0KCi8vIChwdWJsaWMpIHRoaXMgJiBhCmZ1bmN0aW9uIG9wX2FuZCh4LCB5KSB7CiAgcmV0dXJuIHggJiB5Cn0KCmZ1bmN0aW9uIGJuQW5kKGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmJpdHdpc2VUbyhhLCBvcF9hbmQsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyB8IGEKZnVuY3Rpb24gb3Bfb3IoeCwgeSkgewogIHJldHVybiB4IHwgeQp9CgpmdW5jdGlvbiBibk9yKGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmJpdHdpc2VUbyhhLCBvcF9vciwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzIF4gYQpmdW5jdGlvbiBvcF94b3IoeCwgeSkgewogIHJldHVybiB4IF4geQp9CgpmdW5jdGlvbiBiblhvcihhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5iaXR3aXNlVG8oYSwgb3BfeG9yLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgJiB+YQpmdW5jdGlvbiBvcF9hbmRub3QoeCwgeSkgewogIHJldHVybiB4ICYgfnkKfQoKZnVuY3Rpb24gYm5BbmROb3QoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuYml0d2lzZVRvKGEsIG9wX2FuZG5vdCwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB+dGhpcwpmdW5jdGlvbiBibk5vdCgpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudDsgKytpKSByW2ldID0gdGhpcy5ETSAmIH50aGlzW2ldCiAgci50ID0gdGhpcy50CiAgci5zID0gfnRoaXMucwogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgPDwgbgpmdW5jdGlvbiBiblNoaWZ0TGVmdChuKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgaWYgKG4gPCAwKSB0aGlzLnJTaGlmdFRvKC1uLCByKQogIGVsc2UgdGhpcy5sU2hpZnRUbyhuLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgPj4gbgpmdW5jdGlvbiBiblNoaWZ0UmlnaHQobikgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIGlmIChuIDwgMCkgdGhpcy5sU2hpZnRUbygtbiwgcikKICBlbHNlIHRoaXMuclNoaWZ0VG8obiwgcikKICByZXR1cm4gcgp9CgovLyByZXR1cm4gaW5kZXggb2YgbG93ZXN0IDEtYml0IGluIHgsIHggPCAyXjMxCmZ1bmN0aW9uIGxiaXQoeCkgewogIGlmICh4ID09IDApIHJldHVybiAtMQogIHZhciByID0gMAogIGlmICgoeCAmIDB4ZmZmZikgPT0gMCkgewogICAgeCA+Pj0gMTYKICAgIHIgKz0gMTYKICB9CiAgaWYgKCh4ICYgMHhmZikgPT0gMCkgewogICAgeCA+Pj0gOAogICAgciArPSA4CiAgfQogIGlmICgoeCAmIDB4ZikgPT0gMCkgewogICAgeCA+Pj0gNAogICAgciArPSA0CiAgfQogIGlmICgoeCAmIDMpID09IDApIHsKICAgIHggPj49IDIKICAgIHIgKz0gMgogIH0KICBpZiAoKHggJiAxKSA9PSAwKSsrcgogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHJldHVybnMgaW5kZXggb2YgbG93ZXN0IDEtYml0IChvciAtMSBpZiBub25lKQpmdW5jdGlvbiBibkdldExvd2VzdFNldEJpdCgpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudDsgKytpKQogICAgaWYgKHRoaXNbaV0gIT0gMCkgcmV0dXJuIGkgKiB0aGlzLkRCICsgbGJpdCh0aGlzW2ldKQogIGlmICh0aGlzLnMgPCAwKSByZXR1cm4gdGhpcy50ICogdGhpcy5EQgogIHJldHVybiAtMQp9CgovLyByZXR1cm4gbnVtYmVyIG9mIDEgYml0cyBpbiB4CmZ1bmN0aW9uIGNiaXQoeCkgewogIHZhciByID0gMAogIHdoaWxlICh4ICE9IDApIHsKICAgIHggJj0geCAtIDEKICAgICsrcgogIH0KICByZXR1cm4gcgp9CgovLyAocHVibGljKSByZXR1cm4gbnVtYmVyIG9mIHNldCBiaXRzCmZ1bmN0aW9uIGJuQml0Q291bnQoKSB7CiAgdmFyIHIgPSAwLAogICAgeCA9IHRoaXMucyAmIHRoaXMuRE0KICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudDsgKytpKSByICs9IGNiaXQodGhpc1tpXSBeIHgpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdHJ1ZSBpZmYgbnRoIGJpdCBpcyBzZXQKZnVuY3Rpb24gYm5UZXN0Qml0KG4pIHsKICB2YXIgaiA9IE1hdGguZmxvb3IobiAvIHRoaXMuREIpCiAgaWYgKGogPj0gdGhpcy50KSByZXR1cm4gKHRoaXMucyAhPSAwKQogIHJldHVybiAoKHRoaXNbal0gJiAoMSA8PCAobiAlIHRoaXMuREIpKSkgIT0gMCkKfQoKLy8gKHByb3RlY3RlZCkgdGhpcyBvcCAoMTw8bikKZnVuY3Rpb24gYm5wQ2hhbmdlQml0KG4sIG9wKSB7CiAgdmFyIHIgPSBCaWdJbnRlZ2VyLk9ORS5zaGlmdExlZnQobikKICB0aGlzLmJpdHdpc2VUbyhyLCBvcCwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzIHwgKDE8PG4pCmZ1bmN0aW9uIGJuU2V0Qml0KG4pIHsKICByZXR1cm4gdGhpcy5jaGFuZ2VCaXQobiwgb3Bfb3IpCn0KCi8vIChwdWJsaWMpIHRoaXMgJiB+KDE8PG4pCmZ1bmN0aW9uIGJuQ2xlYXJCaXQobikgewogIHJldHVybiB0aGlzLmNoYW5nZUJpdChuLCBvcF9hbmRub3QpCn0KCi8vIChwdWJsaWMpIHRoaXMgXiAoMTw8bikKZnVuY3Rpb24gYm5GbGlwQml0KG4pIHsKICByZXR1cm4gdGhpcy5jaGFuZ2VCaXQobiwgb3BfeG9yKQp9CgovLyAocHJvdGVjdGVkKSByID0gdGhpcyArIGEKZnVuY3Rpb24gYm5wQWRkVG8oYSwgcikgewogIHZhciBzZWxmID0gdGhpcwoKICB2YXIgaSA9IDAsCiAgICBjID0gMCwKICAgIG0gPSBNYXRoLm1pbihhLnQsIHNlbGYudCkKICB3aGlsZSAoaSA8IG0pIHsKICAgIGMgKz0gc2VsZltpXSArIGFbaV0KICAgIHJbaSsrXSA9IGMgJiBzZWxmLkRNCiAgICBjID4+PSBzZWxmLkRCCiAgfQogIGlmIChhLnQgPCBzZWxmLnQpIHsKICAgIGMgKz0gYS5zCiAgICB3aGlsZSAoaSA8IHNlbGYudCkgewogICAgICBjICs9IHNlbGZbaV0KICAgICAgcltpKytdID0gYyAmIHNlbGYuRE0KICAgICAgYyA+Pj0gc2VsZi5EQgogICAgfQogICAgYyArPSBzZWxmLnMKICB9IGVsc2UgewogICAgYyArPSBzZWxmLnMKICAgIHdoaWxlIChpIDwgYS50KSB7CiAgICAgIGMgKz0gYVtpXQogICAgICByW2krK10gPSBjICYgc2VsZi5ETQogICAgICBjID4+PSBzZWxmLkRCCiAgICB9CiAgICBjICs9IGEucwogIH0KICByLnMgPSAoYyA8IDApID8gLTEgOiAwCiAgaWYgKGMgPiAwKSByW2krK10gPSBjCiAgZWxzZSBpZiAoYyA8IC0xKSByW2krK10gPSBzZWxmLkRWICsgYwogIHIudCA9IGkKICByLmNsYW1wKCkKfQoKLy8gKHB1YmxpYykgdGhpcyArIGEKZnVuY3Rpb24gYm5BZGQoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuYWRkVG8oYSwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzIC0gYQpmdW5jdGlvbiBiblN1YnRyYWN0KGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLnN1YlRvKGEsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyAqIGEKZnVuY3Rpb24gYm5NdWx0aXBseShhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5tdWx0aXBseVRvKGEsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpc14yCmZ1bmN0aW9uIGJuU3F1YXJlKCkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuc3F1YXJlVG8ocikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzIC8gYQpmdW5jdGlvbiBibkRpdmlkZShhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5kaXZSZW1UbyhhLCByLCBudWxsKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgJSBhCmZ1bmN0aW9uIGJuUmVtYWluZGVyKGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmRpdlJlbVRvKGEsIG51bGwsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgW3RoaXMvYSx0aGlzJWFdCmZ1bmN0aW9uIGJuRGl2aWRlQW5kUmVtYWluZGVyKGEpIHsKICB2YXIgcSA9IG5ldyBCaWdJbnRlZ2VyKCksCiAgICByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuZGl2UmVtVG8oYSwgcSwgcikKICByZXR1cm4gbmV3IEFycmF5KHEsIHIpCn0KCi8vIChwcm90ZWN0ZWQpIHRoaXMgKj0gbiwgdGhpcyA+PSAwLCAxIDwgbiA8IERWCmZ1bmN0aW9uIGJucERNdWx0aXBseShuKSB7CiAgdGhpc1t0aGlzLnRdID0gdGhpcy5hbSgwLCBuIC0gMSwgdGhpcywgMCwgMCwgdGhpcy50KQogICsrdGhpcy50CiAgdGhpcy5jbGFtcCgpCn0KCi8vIChwcm90ZWN0ZWQpIHRoaXMgKz0gbiA8PCB3IHdvcmRzLCB0aGlzID49IDAKZnVuY3Rpb24gYm5wREFkZE9mZnNldChuLCB3KSB7CiAgaWYgKG4gPT0gMCkgcmV0dXJuCiAgd2hpbGUgKHRoaXMudCA8PSB3KSB0aGlzW3RoaXMudCsrXSA9IDAKICB0aGlzW3ddICs9IG4KICB3aGlsZSAodGhpc1t3XSA+PSB0aGlzLkRWKSB7CiAgICB0aGlzW3ddIC09IHRoaXMuRFYKICAgIGlmICgrK3cgPj0gdGhpcy50KSB0aGlzW3RoaXMudCsrXSA9IDAKICAgICsrdGhpc1t3XQogIH0KfQoKLy8gQSAibnVsbCIgcmVkdWNlcgpmdW5jdGlvbiBOdWxsRXhwKCkge30KCmZ1bmN0aW9uIG5Ob3AoeCkgewogIHJldHVybiB4Cn0KCmZ1bmN0aW9uIG5NdWxUbyh4LCB5LCByKSB7CiAgeC5tdWx0aXBseVRvKHksIHIpCn0KCmZ1bmN0aW9uIG5TcXJUbyh4LCByKSB7CiAgeC5zcXVhcmVUbyhyKQp9CgpOdWxsRXhwLnByb3RvdHlwZS5jb252ZXJ0ID0gbk5vcApOdWxsRXhwLnByb3RvdHlwZS5yZXZlcnQgPSBuTm9wCk51bGxFeHAucHJvdG90eXBlLm11bFRvID0gbk11bFRvCk51bGxFeHAucHJvdG90eXBlLnNxclRvID0gblNxclRvCgovLyAocHVibGljKSB0aGlzXmUKZnVuY3Rpb24gYm5Qb3coZSkgewogIHJldHVybiB0aGlzLmV4cChlLCBuZXcgTnVsbEV4cCgpKQp9CgovLyAocHJvdGVjdGVkKSByID0gbG93ZXIgbiB3b3JkcyBvZiAidGhpcyAqIGEiLCBhLnQgPD0gbgovLyAidGhpcyIgc2hvdWxkIGJlIHRoZSBsYXJnZXIgb25lIGlmIGFwcHJvcHJpYXRlLgpmdW5jdGlvbiBibnBNdWx0aXBseUxvd2VyVG8oYSwgbiwgcikgewogIHZhciBpID0gTWF0aC5taW4odGhpcy50ICsgYS50LCBuKQogIHIucyA9IDA7IC8vIGFzc3VtZXMgYSx0aGlzID49IDAKICByLnQgPSBpCiAgd2hpbGUgKGkgPiAwKSByWy0taV0gPSAwCiAgdmFyIGoKICBmb3IgKGogPSByLnQgLSB0aGlzLnQ7IGkgPCBqOyArK2kpIHJbaSArIHRoaXMudF0gPSB0aGlzLmFtKDAsIGFbaV0sIHIsIGksIDAsIHRoaXMudCkKICBmb3IgKGogPSBNYXRoLm1pbihhLnQsIG4pOyBpIDwgajsgKytpKSB0aGlzLmFtKDAsIGFbaV0sIHIsIGksIDAsIG4gLSBpKQogIHIuY2xhbXAoKQp9CgovLyAocHJvdGVjdGVkKSByID0gInRoaXMgKiBhIiB3aXRob3V0IGxvd2VyIG4gd29yZHMsIG4gPiAwCi8vICJ0aGlzIiBzaG91bGQgYmUgdGhlIGxhcmdlciBvbmUgaWYgYXBwcm9wcmlhdGUuCmZ1bmN0aW9uIGJucE11bHRpcGx5VXBwZXJUbyhhLCBuLCByKSB7CiAgLS1uCiAgdmFyIGkgPSByLnQgPSB0aGlzLnQgKyBhLnQgLSBuCiAgci5zID0gMDsgLy8gYXNzdW1lcyBhLHRoaXMgPj0gMAogIHdoaWxlICgtLWkgPj0gMCkgcltpXSA9IDAKICBmb3IgKGkgPSBNYXRoLm1heChuIC0gdGhpcy50LCAwKTsgaSA8IGEudDsgKytpKQogICAgclt0aGlzLnQgKyBpIC0gbl0gPSB0aGlzLmFtKG4gLSBpLCBhW2ldLCByLCAwLCAwLCB0aGlzLnQgKyBpIC0gbikKICByLmNsYW1wKCkKICByLmRyU2hpZnRUbygxLCByKQp9CgovLyBCYXJyZXR0IG1vZHVsYXIgcmVkdWN0aW9uCmZ1bmN0aW9uIEJhcnJldHQobSkgewogIC8vIHNldHVwIEJhcnJldHQKICB0aGlzLnIyID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMucTMgPSBuZXcgQmlnSW50ZWdlcigpCiAgQmlnSW50ZWdlci5PTkUuZGxTaGlmdFRvKDIgKiBtLnQsIHRoaXMucjIpCiAgdGhpcy5tdSA9IHRoaXMucjIuZGl2aWRlKG0pCiAgdGhpcy5tID0gbQp9CgpmdW5jdGlvbiBiYXJyZXR0Q29udmVydCh4KSB7CiAgaWYgKHgucyA8IDAgfHwgeC50ID4gMiAqIHRoaXMubS50KSByZXR1cm4geC5tb2QodGhpcy5tKQogIGVsc2UgaWYgKHguY29tcGFyZVRvKHRoaXMubSkgPCAwKSByZXR1cm4geAogIGVsc2UgewogICAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgICB4LmNvcHlUbyhyKQogICAgdGhpcy5yZWR1Y2UocikKICAgIHJldHVybiByCiAgfQp9CgpmdW5jdGlvbiBiYXJyZXR0UmV2ZXJ0KHgpIHsKICByZXR1cm4geAp9CgovLyB4ID0geCBtb2QgbSAoSEFDIDE0LjQyKQpmdW5jdGlvbiBiYXJyZXR0UmVkdWNlKHgpIHsKICB2YXIgc2VsZiA9IHRoaXMKICB4LmRyU2hpZnRUbyhzZWxmLm0udCAtIDEsIHNlbGYucjIpCiAgaWYgKHgudCA+IHNlbGYubS50ICsgMSkgewogICAgeC50ID0gc2VsZi5tLnQgKyAxCiAgICB4LmNsYW1wKCkKICB9CiAgc2VsZi5tdS5tdWx0aXBseVVwcGVyVG8oc2VsZi5yMiwgc2VsZi5tLnQgKyAxLCBzZWxmLnEzKQogIHNlbGYubS5tdWx0aXBseUxvd2VyVG8oc2VsZi5xMywgc2VsZi5tLnQgKyAxLCBzZWxmLnIyKQogIHdoaWxlICh4LmNvbXBhcmVUbyhzZWxmLnIyKSA8IDApIHguZEFkZE9mZnNldCgxLCBzZWxmLm0udCArIDEpCiAgeC5zdWJUbyhzZWxmLnIyLCB4KQogIHdoaWxlICh4LmNvbXBhcmVUbyhzZWxmLm0pID49IDApIHguc3ViVG8oc2VsZi5tLCB4KQp9CgovLyByID0geF4yIG1vZCBtOyB4ICE9IHIKZnVuY3Rpb24gYmFycmV0dFNxclRvKHgsIHIpIHsKICB4LnNxdWFyZVRvKHIpCiAgdGhpcy5yZWR1Y2UocikKfQoKLy8gciA9IHgqeSBtb2QgbTsgeCx5ICE9IHIKZnVuY3Rpb24gYmFycmV0dE11bFRvKHgsIHksIHIpIHsKICB4Lm11bHRpcGx5VG8oeSwgcikKICB0aGlzLnJlZHVjZShyKQp9CgpCYXJyZXR0LnByb3RvdHlwZS5jb252ZXJ0ID0gYmFycmV0dENvbnZlcnQKQmFycmV0dC5wcm90b3R5cGUucmV2ZXJ0ID0gYmFycmV0dFJldmVydApCYXJyZXR0LnByb3RvdHlwZS5yZWR1Y2UgPSBiYXJyZXR0UmVkdWNlCkJhcnJldHQucHJvdG90eXBlLm11bFRvID0gYmFycmV0dE11bFRvCkJhcnJldHQucHJvdG90eXBlLnNxclRvID0gYmFycmV0dFNxclRvCgovLyAocHVibGljKSB0aGlzXmUgJSBtIChIQUMgMTQuODUpCmZ1bmN0aW9uIGJuTW9kUG93KGUsIG0pIHsKICB2YXIgaSA9IGUuYml0TGVuZ3RoKCksCiAgICBrLCByID0gbmJ2KDEpLAogICAgegogIGlmIChpIDw9IDApIHJldHVybiByCiAgZWxzZSBpZiAoaSA8IDE4KSBrID0gMQogIGVsc2UgaWYgKGkgPCA0OCkgayA9IDMKICBlbHNlIGlmIChpIDwgMTQ0KSBrID0gNAogIGVsc2UgaWYgKGkgPCA3NjgpIGsgPSA1CiAgZWxzZSBrID0gNgogIGlmIChpIDwgOCkKICAgIHogPSBuZXcgQ2xhc3NpYyhtKQogIGVsc2UgaWYgKG0uaXNFdmVuKCkpCiAgICB6ID0gbmV3IEJhcnJldHQobSkKICBlbHNlCiAgICB6ID0gbmV3IE1vbnRnb21lcnkobSkKCiAgLy8gcHJlY29tcHV0YXRpb24KICB2YXIgZyA9IG5ldyBBcnJheSgpLAogICAgbiA9IDMsCiAgICBrMSA9IGsgLSAxLAogICAga20gPSAoMSA8PCBrKSAtIDEKICBnWzFdID0gei5jb252ZXJ0KHRoaXMpCiAgaWYgKGsgPiAxKSB7CiAgICB2YXIgZzIgPSBuZXcgQmlnSW50ZWdlcigpCiAgICB6LnNxclRvKGdbMV0sIGcyKQogICAgd2hpbGUgKG4gPD0ga20pIHsKICAgICAgZ1tuXSA9IG5ldyBCaWdJbnRlZ2VyKCkKICAgICAgei5tdWxUbyhnMiwgZ1tuIC0gMl0sIGdbbl0pCiAgICAgIG4gKz0gMgogICAgfQogIH0KCiAgdmFyIGogPSBlLnQgLSAxLAogICAgdywgaXMxID0gdHJ1ZSwKICAgIHIyID0gbmV3IEJpZ0ludGVnZXIoKSwKICAgIHQKICBpID0gbmJpdHMoZVtqXSkgLSAxCiAgd2hpbGUgKGogPj0gMCkgewogICAgaWYgKGkgPj0gazEpIHcgPSAoZVtqXSA+PiAoaSAtIGsxKSkgJiBrbQogICAgZWxzZSB7CiAgICAgIHcgPSAoZVtqXSAmICgoMSA8PCAoaSArIDEpKSAtIDEpKSA8PCAoazEgLSBpKQogICAgICBpZiAoaiA+IDApIHcgfD0gZVtqIC0gMV0gPj4gKHRoaXMuREIgKyBpIC0gazEpCiAgICB9CgogICAgbiA9IGsKICAgIHdoaWxlICgodyAmIDEpID09IDApIHsKICAgICAgdyA+Pj0gMQogICAgICAtLW4KICAgIH0KICAgIGlmICgoaSAtPSBuKSA8IDApIHsKICAgICAgaSArPSB0aGlzLkRCCiAgICAgIC0tagogICAgfQogICAgaWYgKGlzMSkgeyAvLyByZXQgPT0gMSwgZG9uJ3QgYm90aGVyIHNxdWFyaW5nIG9yIG11bHRpcGx5aW5nIGl0CiAgICAgIGdbd10uY29weVRvKHIpCiAgICAgIGlzMSA9IGZhbHNlCiAgICB9IGVsc2UgewogICAgICB3aGlsZSAobiA+IDEpIHsKICAgICAgICB6LnNxclRvKHIsIHIyKQogICAgICAgIHouc3FyVG8ocjIsIHIpCiAgICAgICAgbiAtPSAyCiAgICAgIH0KICAgICAgaWYgKG4gPiAwKSB6LnNxclRvKHIsIHIyKQogICAgICBlbHNlIHsKICAgICAgICB0ID0gcgogICAgICAgIHIgPSByMgogICAgICAgIHIyID0gdAogICAgICB9CiAgICAgIHoubXVsVG8ocjIsIGdbd10sIHIpCiAgICB9CgogICAgd2hpbGUgKGogPj0gMCAmJiAoZVtqXSAmICgxIDw8IGkpKSA9PSAwKSB7CiAgICAgIHouc3FyVG8ociwgcjIpCiAgICAgIHQgPSByCiAgICAgIHIgPSByMgogICAgICByMiA9IHQKICAgICAgaWYgKC0taSA8IDApIHsKICAgICAgICBpID0gdGhpcy5EQiAtIDEKICAgICAgICAtLWoKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gei5yZXZlcnQocikKfQoKLy8gKHB1YmxpYykgZ2NkKHRoaXMsYSkgKEhBQyAxNC41NCkKZnVuY3Rpb24gYm5HQ0QoYSkgewogIHZhciB4ID0gKHRoaXMucyA8IDApID8gdGhpcy5uZWdhdGUoKSA6IHRoaXMuY2xvbmUoKQogIHZhciB5ID0gKGEucyA8IDApID8gYS5uZWdhdGUoKSA6IGEuY2xvbmUoKQogIGlmICh4LmNvbXBhcmVUbyh5KSA8IDApIHsKICAgIHZhciB0ID0geAogICAgeCA9IHkKICAgIHkgPSB0CiAgfQogIHZhciBpID0geC5nZXRMb3dlc3RTZXRCaXQoKSwKICAgIGcgPSB5LmdldExvd2VzdFNldEJpdCgpCiAgaWYgKGcgPCAwKSByZXR1cm4geAogIGlmIChpIDwgZykgZyA9IGkKICBpZiAoZyA+IDApIHsKICAgIHguclNoaWZ0VG8oZywgeCkKICAgIHkuclNoaWZ0VG8oZywgeSkKICB9CiAgd2hpbGUgKHguc2lnbnVtKCkgPiAwKSB7CiAgICBpZiAoKGkgPSB4LmdldExvd2VzdFNldEJpdCgpKSA+IDApIHguclNoaWZ0VG8oaSwgeCkKICAgIGlmICgoaSA9IHkuZ2V0TG93ZXN0U2V0Qml0KCkpID4gMCkgeS5yU2hpZnRUbyhpLCB5KQogICAgaWYgKHguY29tcGFyZVRvKHkpID49IDApIHsKICAgICAgeC5zdWJUbyh5LCB4KQogICAgICB4LnJTaGlmdFRvKDEsIHgpCiAgICB9IGVsc2UgewogICAgICB5LnN1YlRvKHgsIHkpCiAgICAgIHkuclNoaWZ0VG8oMSwgeSkKICAgIH0KICB9CiAgaWYgKGcgPiAwKSB5LmxTaGlmdFRvKGcsIHkpCiAgcmV0dXJuIHkKfQoKLy8gKHByb3RlY3RlZCkgdGhpcyAlIG4sIG4gPCAyXjI2CmZ1bmN0aW9uIGJucE1vZEludChuKSB7CiAgaWYgKG4gPD0gMCkgcmV0dXJuIDAKICB2YXIgZCA9IHRoaXMuRFYgJSBuLAogICAgciA9ICh0aGlzLnMgPCAwKSA/IG4gLSAxIDogMAogIGlmICh0aGlzLnQgPiAwKQogICAgaWYgKGQgPT0gMCkgciA9IHRoaXNbMF0gJSBuCiAgICBlbHNlCiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnQgLSAxOyBpID49IDA7IC0taSkgciA9IChkICogciArIHRoaXNbaV0pICUgbgogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIDEvdGhpcyAlIG0gKEhBQyAxNC42MSkKZnVuY3Rpb24gYm5Nb2RJbnZlcnNlKG0pIHsKICB2YXIgYWMgPSBtLmlzRXZlbigpCiAgaWYgKHRoaXMuc2lnbnVtKCkgPT09IDApIHRocm93IG5ldyBFcnJvcignZGl2aXNpb24gYnkgemVybycpCiAgaWYgKCh0aGlzLmlzRXZlbigpICYmIGFjKSB8fCBtLnNpZ251bSgpID09IDApIHJldHVybiBCaWdJbnRlZ2VyLlpFUk8KICB2YXIgdSA9IG0uY2xvbmUoKSwKICAgIHYgPSB0aGlzLmNsb25lKCkKICB2YXIgYSA9IG5idigxKSwKICAgIGIgPSBuYnYoMCksCiAgICBjID0gbmJ2KDApLAogICAgZCA9IG5idigxKQogIHdoaWxlICh1LnNpZ251bSgpICE9IDApIHsKICAgIHdoaWxlICh1LmlzRXZlbigpKSB7CiAgICAgIHUuclNoaWZ0VG8oMSwgdSkKICAgICAgaWYgKGFjKSB7CiAgICAgICAgaWYgKCFhLmlzRXZlbigpIHx8ICFiLmlzRXZlbigpKSB7CiAgICAgICAgICBhLmFkZFRvKHRoaXMsIGEpCiAgICAgICAgICBiLnN1YlRvKG0sIGIpCiAgICAgICAgfQogICAgICAgIGEuclNoaWZ0VG8oMSwgYSkKICAgICAgfSBlbHNlIGlmICghYi5pc0V2ZW4oKSkgYi5zdWJUbyhtLCBiKQogICAgICBiLnJTaGlmdFRvKDEsIGIpCiAgICB9CiAgICB3aGlsZSAodi5pc0V2ZW4oKSkgewogICAgICB2LnJTaGlmdFRvKDEsIHYpCiAgICAgIGlmIChhYykgewogICAgICAgIGlmICghYy5pc0V2ZW4oKSB8fCAhZC5pc0V2ZW4oKSkgewogICAgICAgICAgYy5hZGRUbyh0aGlzLCBjKQogICAgICAgICAgZC5zdWJUbyhtLCBkKQogICAgICAgIH0KICAgICAgICBjLnJTaGlmdFRvKDEsIGMpCiAgICAgIH0gZWxzZSBpZiAoIWQuaXNFdmVuKCkpIGQuc3ViVG8obSwgZCkKICAgICAgZC5yU2hpZnRUbygxLCBkKQogICAgfQogICAgaWYgKHUuY29tcGFyZVRvKHYpID49IDApIHsKICAgICAgdS5zdWJUbyh2LCB1KQogICAgICBpZiAoYWMpIGEuc3ViVG8oYywgYSkKICAgICAgYi5zdWJUbyhkLCBiKQogICAgfSBlbHNlIHsKICAgICAgdi5zdWJUbyh1LCB2KQogICAgICBpZiAoYWMpIGMuc3ViVG8oYSwgYykKICAgICAgZC5zdWJUbyhiLCBkKQogICAgfQogIH0KICBpZiAodi5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpICE9IDApIHJldHVybiBCaWdJbnRlZ2VyLlpFUk8KICBpZiAoZC5jb21wYXJlVG8obSkgPj0gMCkgcmV0dXJuIGQuc3VidHJhY3QobSkKICBpZiAoZC5zaWdudW0oKSA8IDApIGQuYWRkVG8obSwgZCkKICBlbHNlIHJldHVybiBkCiAgaWYgKGQuc2lnbnVtKCkgPCAwKSByZXR1cm4gZC5hZGQobSkKICBlbHNlIHJldHVybiBkCn0KCnZhciBsb3dwcmltZXMgPSBbCiAgMiwgMywgNSwgNywgMTEsIDEzLCAxNywgMTksIDIzLCAyOSwgMzEsIDM3LCA0MSwgNDMsIDQ3LCA1MywgNTksIDYxLCA2NywgNzEsCiAgNzMsIDc5LCA4MywgODksIDk3LCAxMDEsIDEwMywgMTA3LCAxMDksIDExMywgMTI3LCAxMzEsIDEzNywgMTM5LCAxNDksIDE1MSwKICAxNTcsIDE2MywgMTY3LCAxNzMsIDE3OSwgMTgxLCAxOTEsIDE5MywgMTk3LCAxOTksIDIxMSwgMjIzLCAyMjcsIDIyOSwgMjMzLAogIDIzOSwgMjQxLCAyNTEsIDI1NywgMjYzLCAyNjksIDI3MSwgMjc3LCAyODEsIDI4MywgMjkzLCAzMDcsIDMxMSwgMzEzLCAzMTcsCiAgMzMxLCAzMzcsIDM0NywgMzQ5LCAzNTMsIDM1OSwgMzY3LCAzNzMsIDM3OSwgMzgzLCAzODksIDM5NywgNDAxLCA0MDksIDQxOSwKICA0MjEsIDQzMSwgNDMzLCA0MzksIDQ0MywgNDQ5LCA0NTcsIDQ2MSwgNDYzLCA0NjcsIDQ3OSwgNDg3LCA0OTEsIDQ5OSwgNTAzLAogIDUwOSwgNTIxLCA1MjMsIDU0MSwgNTQ3LCA1NTcsIDU2MywgNTY5LCA1NzEsIDU3NywgNTg3LCA1OTMsIDU5OSwgNjAxLCA2MDcsCiAgNjEzLCA2MTcsIDYxOSwgNjMxLCA2NDEsIDY0MywgNjQ3LCA2NTMsIDY1OSwgNjYxLCA2NzMsIDY3NywgNjgzLCA2OTEsIDcwMSwKICA3MDksIDcxOSwgNzI3LCA3MzMsIDczOSwgNzQzLCA3NTEsIDc1NywgNzYxLCA3NjksIDc3MywgNzg3LCA3OTcsIDgwOSwgODExLAogIDgyMSwgODIzLCA4MjcsIDgyOSwgODM5LCA4NTMsIDg1NywgODU5LCA4NjMsIDg3NywgODgxLCA4ODMsIDg4NywgOTA3LCA5MTEsCiAgOTE5LCA5MjksIDkzNywgOTQxLCA5NDcsIDk1MywgOTY3LCA5NzEsIDk3NywgOTgzLCA5OTEsIDk5NwpdCgp2YXIgbHBsaW0gPSAoMSA8PCAyNikgLyBsb3dwcmltZXNbbG93cHJpbWVzLmxlbmd0aCAtIDFdCgovLyAocHVibGljKSB0ZXN0IHByaW1hbGl0eSB3aXRoIGNlcnRhaW50eSA+PSAxLS41XnQKZnVuY3Rpb24gYm5Jc1Byb2JhYmxlUHJpbWUodCkgewogIHZhciBpLCB4ID0gdGhpcy5hYnMoKQogIGlmICh4LnQgPT0gMSAmJiB4WzBdIDw9IGxvd3ByaW1lc1tsb3dwcmltZXMubGVuZ3RoIC0gMV0pIHsKICAgIGZvciAoaSA9IDA7IGkgPCBsb3dwcmltZXMubGVuZ3RoOyArK2kpCiAgICAgIGlmICh4WzBdID09IGxvd3ByaW1lc1tpXSkgcmV0dXJuIHRydWUKICAgIHJldHVybiBmYWxzZQogIH0KICBpZiAoeC5pc0V2ZW4oKSkgcmV0dXJuIGZhbHNlCiAgaSA9IDEKICB3aGlsZSAoaSA8IGxvd3ByaW1lcy5sZW5ndGgpIHsKICAgIHZhciBtID0gbG93cHJpbWVzW2ldLAogICAgICBqID0gaSArIDEKICAgIHdoaWxlIChqIDwgbG93cHJpbWVzLmxlbmd0aCAmJiBtIDwgbHBsaW0pIG0gKj0gbG93cHJpbWVzW2orK10KICAgIG0gPSB4Lm1vZEludChtKQogICAgd2hpbGUgKGkgPCBqKSBpZiAobSAlIGxvd3ByaW1lc1tpKytdID09IDApIHJldHVybiBmYWxzZQogIH0KICByZXR1cm4geC5taWxsZXJSYWJpbih0KQp9CgovLyAocHJvdGVjdGVkKSB0cnVlIGlmIHByb2JhYmx5IHByaW1lIChIQUMgNC4yNCwgTWlsbGVyLVJhYmluKQpmdW5jdGlvbiBibnBNaWxsZXJSYWJpbih0KSB7CiAgdmFyIG4xID0gdGhpcy5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSkKICB2YXIgayA9IG4xLmdldExvd2VzdFNldEJpdCgpCiAgaWYgKGsgPD0gMCkgcmV0dXJuIGZhbHNlCiAgdmFyIHIgPSBuMS5zaGlmdFJpZ2h0KGspCiAgdCA9ICh0ICsgMSkgPj4gMQogIGlmICh0ID4gbG93cHJpbWVzLmxlbmd0aCkgdCA9IGxvd3ByaW1lcy5sZW5ndGgKICB2YXIgYSA9IG5ldyBCaWdJbnRlZ2VyKG51bGwpCiAgdmFyIGosIGJhc2VzID0gW10KICBmb3IgKHZhciBpID0gMDsgaSA8IHQ7ICsraSkgewogICAgZm9yICg7OykgewogICAgICBqID0gbG93cHJpbWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxvd3ByaW1lcy5sZW5ndGgpXQogICAgICBpZiAoYmFzZXMuaW5kZXhPZihqKSA9PSAtMSkgYnJlYWsKICAgIH0KICAgIGJhc2VzLnB1c2goaikKICAgIGEuZnJvbUludChqKQogICAgdmFyIHkgPSBhLm1vZFBvdyhyLCB0aGlzKQogICAgaWYgKHkuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKSAhPSAwICYmIHkuY29tcGFyZVRvKG4xKSAhPSAwKSB7CiAgICAgIHZhciBqID0gMQogICAgICB3aGlsZSAoaisrIDwgayAmJiB5LmNvbXBhcmVUbyhuMSkgIT0gMCkgewogICAgICAgIHkgPSB5Lm1vZFBvd0ludCgyLCB0aGlzKQogICAgICAgIGlmICh5LmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSkgPT0gMCkgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgaWYgKHkuY29tcGFyZVRvKG4xKSAhPSAwKSByZXR1cm4gZmFsc2UKICAgIH0KICB9CiAgcmV0dXJuIHRydWUKfQoKLy8gcHJvdGVjdGVkCnByb3RvLmNodW5rU2l6ZSA9IGJucENodW5rU2l6ZQpwcm90by50b1JhZGl4ID0gYm5wVG9SYWRpeApwcm90by5mcm9tUmFkaXggPSBibnBGcm9tUmFkaXgKcHJvdG8uZnJvbU51bWJlciA9IGJucEZyb21OdW1iZXIKcHJvdG8uYml0d2lzZVRvID0gYm5wQml0d2lzZVRvCnByb3RvLmNoYW5nZUJpdCA9IGJucENoYW5nZUJpdApwcm90by5hZGRUbyA9IGJucEFkZFRvCnByb3RvLmRNdWx0aXBseSA9IGJucERNdWx0aXBseQpwcm90by5kQWRkT2Zmc2V0ID0gYm5wREFkZE9mZnNldApwcm90by5tdWx0aXBseUxvd2VyVG8gPSBibnBNdWx0aXBseUxvd2VyVG8KcHJvdG8ubXVsdGlwbHlVcHBlclRvID0gYm5wTXVsdGlwbHlVcHBlclRvCnByb3RvLm1vZEludCA9IGJucE1vZEludApwcm90by5taWxsZXJSYWJpbiA9IGJucE1pbGxlclJhYmluCgovLyBwdWJsaWMKcHJvdG8uY2xvbmUgPSBibkNsb25lCnByb3RvLmludFZhbHVlID0gYm5JbnRWYWx1ZQpwcm90by5ieXRlVmFsdWUgPSBibkJ5dGVWYWx1ZQpwcm90by5zaG9ydFZhbHVlID0gYm5TaG9ydFZhbHVlCnByb3RvLnNpZ251bSA9IGJuU2lnTnVtCnByb3RvLnRvQnl0ZUFycmF5ID0gYm5Ub0J5dGVBcnJheQpwcm90by5lcXVhbHMgPSBibkVxdWFscwpwcm90by5taW4gPSBibk1pbgpwcm90by5tYXggPSBibk1heApwcm90by5hbmQgPSBibkFuZApwcm90by5vciA9IGJuT3IKcHJvdG8ueG9yID0gYm5Yb3IKcHJvdG8uYW5kTm90ID0gYm5BbmROb3QKcHJvdG8ubm90ID0gYm5Ob3QKcHJvdG8uc2hpZnRMZWZ0ID0gYm5TaGlmdExlZnQKcHJvdG8uc2hpZnRSaWdodCA9IGJuU2hpZnRSaWdodApwcm90by5nZXRMb3dlc3RTZXRCaXQgPSBibkdldExvd2VzdFNldEJpdApwcm90by5iaXRDb3VudCA9IGJuQml0Q291bnQKcHJvdG8udGVzdEJpdCA9IGJuVGVzdEJpdApwcm90by5zZXRCaXQgPSBiblNldEJpdApwcm90by5jbGVhckJpdCA9IGJuQ2xlYXJCaXQKcHJvdG8uZmxpcEJpdCA9IGJuRmxpcEJpdApwcm90by5hZGQgPSBibkFkZApwcm90by5zdWJ0cmFjdCA9IGJuU3VidHJhY3QKcHJvdG8ubXVsdGlwbHkgPSBibk11bHRpcGx5CnByb3RvLmRpdmlkZSA9IGJuRGl2aWRlCnByb3RvLnJlbWFpbmRlciA9IGJuUmVtYWluZGVyCnByb3RvLmRpdmlkZUFuZFJlbWFpbmRlciA9IGJuRGl2aWRlQW5kUmVtYWluZGVyCnByb3RvLm1vZFBvdyA9IGJuTW9kUG93CnByb3RvLm1vZEludmVyc2UgPSBibk1vZEludmVyc2UKcHJvdG8ucG93ID0gYm5Qb3cKcHJvdG8uZ2NkID0gYm5HQ0QKcHJvdG8uaXNQcm9iYWJsZVByaW1lID0gYm5Jc1Byb2JhYmxlUHJpbWUKCi8vIEpTQk4tc3BlY2lmaWMgZXh0ZW5zaW9uCnByb3RvLnNxdWFyZSA9IGJuU3F1YXJlCgovLyBjb25zdGFudHMKQmlnSW50ZWdlci5aRVJPID0gbmJ2KDApCkJpZ0ludGVnZXIuT05FID0gbmJ2KDEpCkJpZ0ludGVnZXIudmFsdWVPZiA9IG5idgoKbW9kdWxlLmV4cG9ydHMgPSBCaWdJbnRlZ2VyCgp9LHsiLi4vcGFja2FnZS5qc29uIjoyMH1dLDE4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBGSVhNRTogS2luZCBvZiBhIHdlaXJkIHdheSB0byB0aHJvdyBleGNlcHRpb25zLCBjb25zaWRlciByZW1vdmluZwp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0JykKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCcuL2JpZ2knKQoKLyoqCiAqIFR1cm5zIGEgYnl0ZSBhcnJheSBpbnRvIGEgYmlnIGludGVnZXIuCiAqCiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBpbnRlcnByZXQgYSBieXRlIGFycmF5IGFzIGEgYmlnIGludGVnZXIgaW4gYmlnCiAqIGVuZGlhbiBub3RhdGlvbi4KICovCkJpZ0ludGVnZXIuZnJvbUJ5dGVBcnJheVVuc2lnbmVkID0gZnVuY3Rpb24oYnl0ZUFycmF5KSB7CiAgLy8gQmlnSW50ZWdlciBleHBlY3RzIGEgREVSIGludGVnZXIgY29uZm9ybWFudCBieXRlIGFycmF5CiAgaWYgKGJ5dGVBcnJheVswXSAmIDB4ODApIHsKICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcihbMF0uY29uY2F0KGJ5dGVBcnJheSkpCiAgfQoKICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoYnl0ZUFycmF5KQp9CgovKioKICogUmV0dXJucyBhIGJ5dGUgYXJyYXkgcmVwcmVzZW50YXRpb24gb2YgdGhlIGJpZyBpbnRlZ2VyLgogKgogKiBUaGlzIHJldHVybnMgdGhlIGFic29sdXRlIG9mIHRoZSBjb250YWluZWQgdmFsdWUgaW4gYmlnIGVuZGlhbgogKiBmb3JtLiBBIHZhbHVlIG9mIHplcm8gcmVzdWx0cyBpbiBhbiBlbXB0eSBhcnJheS4KICovCkJpZ0ludGVnZXIucHJvdG90eXBlLnRvQnl0ZUFycmF5VW5zaWduZWQgPSBmdW5jdGlvbigpIHsKICB2YXIgYnl0ZUFycmF5ID0gdGhpcy50b0J5dGVBcnJheSgpCiAgcmV0dXJuIGJ5dGVBcnJheVswXSA9PT0gMCA/IGJ5dGVBcnJheS5zbGljZSgxKSA6IGJ5dGVBcnJheQp9CgpCaWdJbnRlZ2VyLmZyb21ERVJJbnRlZ2VyID0gZnVuY3Rpb24oYnl0ZUFycmF5KSB7CiAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGJ5dGVBcnJheSkKfQoKLyoKICogQ29udmVydHMgQmlnSW50ZWdlciB0byBhIERFUiBpbnRlZ2VyIHJlcHJlc2VudGF0aW9uLgogKgogKiBUaGUgZm9ybWF0IGZvciB0aGlzIHZhbHVlIHVzZXMgdGhlIG1vc3Qgc2lnbmlmaWNhbnQgYml0IGFzIGEgc2lnbgogKiBiaXQuICBJZiB0aGUgbW9zdCBzaWduaWZpY2FudCBiaXQgaXMgYWxyZWFkeSBzZXQgYW5kIHRoZSBpbnRlZ2VyIGlzCiAqIHBvc2l0aXZlLCBhIDB4MDAgaXMgcHJlcGVuZGVkLgogKgogKiBFeGFtcGxlczoKICoKICogICAgICAwID0+ICAgICAweDAwCiAqICAgICAgMSA9PiAgICAgMHgwMQogKiAgICAgLTEgPT4gICAgIDB4ZmYKICogICAgMTI3ID0+ICAgICAweDdmCiAqICAgLTEyNyA9PiAgICAgMHg4MQogKiAgICAxMjggPT4gICAweDAwODAKICogICAtMTI4ID0+ICAgICAweDgwCiAqICAgIDI1NSA9PiAgIDB4MDBmZgogKiAgIC0yNTUgPT4gICAweGZmMDEKICogIDE2MzAwID0+ICAgMHgzZmFjCiAqIC0xNjMwMCA9PiAgIDB4YzA1NAogKiAgNjIzMDAgPT4gMHgwMGYzNWMKICogLTYyMzAwID0+IDB4ZmYwY2E0CiovCkJpZ0ludGVnZXIucHJvdG90eXBlLnRvREVSSW50ZWdlciA9IEJpZ0ludGVnZXIucHJvdG90eXBlLnRvQnl0ZUFycmF5CgpCaWdJbnRlZ2VyLmZyb21CdWZmZXIgPSBmdW5jdGlvbihidWZmZXIpIHsKICAvLyBCaWdJbnRlZ2VyIGV4cGVjdHMgYSBERVIgaW50ZWdlciBjb25mb3JtYW50IGJ5dGUgYXJyYXkKICBpZiAoYnVmZmVyWzBdICYgMHg4MCkgewogICAgdmFyIGJ5dGVBcnJheSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGJ1ZmZlcikKCiAgICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoWzBdLmNvbmNhdChieXRlQXJyYXkpKQogIH0KCiAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGJ1ZmZlcikKfQoKQmlnSW50ZWdlci5mcm9tSGV4ID0gZnVuY3Rpb24oaGV4KSB7CiAgaWYgKGhleCA9PT0gJycpIHJldHVybiBCaWdJbnRlZ2VyLlpFUk8KCiAgYXNzZXJ0LmVxdWFsKGhleCwgaGV4Lm1hdGNoKC9eW0EtRmEtZjAtOV0rLyksICdJbnZhbGlkIGhleCBzdHJpbmcnKQogIGFzc2VydC5lcXVhbChoZXgubGVuZ3RoICUgMiwgMCwgJ0luY29tcGxldGUgaGV4JykKICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoaGV4LCAxNikKfQoKQmlnSW50ZWdlci5wcm90b3R5cGUudG9CdWZmZXIgPSBmdW5jdGlvbihzaXplKSB7CiAgdmFyIGJ5dGVBcnJheSA9IHRoaXMudG9CeXRlQXJyYXlVbnNpZ25lZCgpCiAgdmFyIHplcm9zID0gW10KCiAgdmFyIHBhZGRpbmcgPSBzaXplIC0gYnl0ZUFycmF5Lmxlbmd0aAogIHdoaWxlICh6ZXJvcy5sZW5ndGggPCBwYWRkaW5nKSB6ZXJvcy5wdXNoKDApCgogIHJldHVybiBuZXcgQnVmZmVyKHplcm9zLmNvbmNhdChieXRlQXJyYXkpKQp9CgpCaWdJbnRlZ2VyLnByb3RvdHlwZS50b0hleCA9IGZ1bmN0aW9uKHNpemUpIHsKICByZXR1cm4gdGhpcy50b0J1ZmZlcihzaXplKS50b1N0cmluZygnaGV4JykKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYmlnaSI6MTcsImFzc2VydCI6MTUsImJ1ZmZlciI6NzB9XSwxOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnLi9iaWdpJykKCi8vYWRkb25zCnJlcXVpcmUoJy4vY29udmVydCcpCgptb2R1bGUuZXhwb3J0cyA9IEJpZ0ludGVnZXIKfSx7Ii4vYmlnaSI6MTcsIi4vY29udmVydCI6MTh9XSwyMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsKICAiX2FyZ3MiOiBbCiAgICBbCiAgICAgICJiaWdpQF4xLjQuMCIsCiAgICAgICIvaG9tZS9naWwvRGVza3RvcC9yZXRoaW5rL2Rldi1ydW50aW1lLWNvcmUvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIiCiAgICBdCiAgXSwKICAiX2Zyb20iOiAiYmlnaUA+PTEuNC4wIDwyLjAuMCIsCiAgIl9pZCI6ICJiaWdpQDEuNC4xIiwKICAiX2luQ2FjaGUiOiB0cnVlLAogICJfaW5zdGFsbGFibGUiOiB0cnVlLAogICJfbG9jYXRpb24iOiAiL2JpZ2kiLAogICJfbm9kZVZlcnNpb24iOiAiMi4xLjAiLAogICJfbnBtVXNlciI6IHsKICAgICJlbWFpbCI6ICJqcHJpY2hhcmRzb25AZ21haWwuY29tIiwKICAgICJuYW1lIjogImpwcmljaGFyZHNvbiIKICB9LAogICJfbnBtVmVyc2lvbiI6ICIyLjEwLjEiLAogICJfcGhhbnRvbUNoaWxkcmVuIjoge30sCiAgIl9yZXF1ZXN0ZWQiOiB7CiAgICAibmFtZSI6ICJiaWdpIiwKICAgICJyYXciOiAiYmlnaUBeMS40LjAiLAogICAgInJhd1NwZWMiOiAiXjEuNC4wIiwKICAgICJzY29wZSI6IG51bGwsCiAgICAic3BlYyI6ICI+PTEuNC4wIDwyLjAuMCIsCiAgICAidHlwZSI6ICJyYW5nZSIKICB9LAogICJfcmVxdWlyZWRCeSI6IFsKICAgICIvYml0Y29pbmpzLWxpYiIsCiAgICAiL2VjdXJ2ZSIKICBdLAogICJfcmVzb2x2ZWQiOiAiaHR0cHM6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvYmlnaS8tL2JpZ2ktMS40LjEudGd6IiwKICAiX3NoYXN1bSI6ICI3MjZlOGFiMDhkMWZlMWRmYjhhYTZiYjYzMDliZmZlY2Y5M2EyMWI3IiwKICAiX3Nocmlua3dyYXAiOiBudWxsLAogICJfc3BlYyI6ICJiaWdpQF4xLjQuMCIsCiAgIl93aGVyZSI6ICIvaG9tZS9naWwvRGVza3RvcC9yZXRoaW5rL2Rldi1ydW50aW1lLWNvcmUvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIiLAogICJidWdzIjogewogICAgInVybCI6ICJodHRwczovL2dpdGh1Yi5jb20vY3J5cHRvY29pbmpzL2JpZ2kvaXNzdWVzIgogIH0sCiAgImRlcGVuZGVuY2llcyI6IHt9LAogICJkZXNjcmlwdGlvbiI6ICJCaWcgaW50ZWdlcnMuIiwKICAiZGV2RGVwZW5kZW5jaWVzIjogewogICAgImNvdmVyYWxscyI6ICJeMi4xMS4yIiwKICAgICJpc3RhbmJ1bCI6ICJeMC4zLjUiLAogICAgImpzaGludCI6ICJeMi41LjEiLAogICAgIm1vY2hhIjogIl4yLjEuMCIsCiAgICAibW9jaGlmeSI6ICJeMi4xLjAiCiAgfSwKICAiZGlyZWN0b3JpZXMiOiB7fSwKICAiZGlzdCI6IHsKICAgICJzaGFzdW0iOiAiNzI2ZThhYjA4ZDFmZTFkZmI4YWE2YmI2MzA5YmZmZWNmOTNhMjFiNyIsCiAgICAidGFyYmFsbCI6ICJodHRwOi8vcmVnaXN0cnkubnBtanMub3JnL2JpZ2kvLS9iaWdpLTEuNC4xLnRneiIKICB9LAogICJnaXRIZWFkIjogIjdkMDM0YTFiMzhjYTkwZjY4ZGFhOWRlNDcyZGRhMmZiODEzODM2ZjEiLAogICJob21lcGFnZSI6ICJodHRwczovL2dpdGh1Yi5jb20vY3J5cHRvY29pbmpzL2JpZ2kjcmVhZG1lIiwKICAia2V5d29yZHMiOiBbCiAgICAiY3J5cHRvZ3JhcGh5IiwKICAgICJtYXRoIiwKICAgICJiaXRjb2luIiwKICAgICJhcmJpdHJhcnkiLAogICAgInByZWNpc2lvbiIsCiAgICAiYXJpdGhtZXRpYyIsCiAgICAiYmlnIiwKICAgICJpbnRlZ2VyIiwKICAgICJpbnQiLAogICAgIm51bWJlciIsCiAgICAiYmlnaW50ZWdlciIsCiAgICAiYmlnaW50IiwKICAgICJiaWdudW1iZXIiLAogICAgImRlY2ltYWwiLAogICAgImZsb2F0IgogIF0sCiAgIm1haW4iOiAiLi9saWIvaW5kZXguanMiLAogICJtYWludGFpbmVycyI6IFsKICAgIHsKICAgICAgImVtYWlsIjogImJveWRiQG1pZG5pZ2h0ZGVzaWduLndzIiwKICAgICAgIm5hbWUiOiAibWlkbmlnaHRsaWdodG5pbmciCiAgICB9LAogICAgewogICAgICAiZW1haWwiOiAic2lkYXpoYW5nODlAZ21haWwuY29tIiwKICAgICAgIm5hbWUiOiAic2lkYXpoYW5nIgogICAgfSwKICAgIHsKICAgICAgImVtYWlsIjogIm5wbUBzaGVzZWsuaW5mbyIsCiAgICAgICJuYW1lIjogIm5hZGF2IgogICAgfSwKICAgIHsKICAgICAgImVtYWlsIjogImpwcmljaGFyZHNvbkBnbWFpbC5jb20iLAogICAgICAibmFtZSI6ICJqcHJpY2hhcmRzb24iCiAgICB9CiAgXSwKICAibmFtZSI6ICJiaWdpIiwKICAib3B0aW9uYWxEZXBlbmRlbmNpZXMiOiB7fSwKICAicmVhZG1lIjogIkVSUk9SOiBObyBSRUFETUUgZGF0YSBmb3VuZCEiLAogICJyZXBvc2l0b3J5IjogewogICAgInR5cGUiOiAiZ2l0IiwKICAgICJ1cmwiOiAiZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9jcnlwdG9jb2luanMvYmlnaS5naXQiCiAgfSwKICAic2NyaXB0cyI6IHsKICAgICJicm93c2VyLXRlc3QiOiAibW9jaGlmeSAtLXdkIC1SIHNwZWMiLAogICAgImNvdmVyYWdlIjogImlzdGFuYnVsIGNvdmVyIC4vbm9kZV9tb2R1bGVzLy5iaW4vX21vY2hhIC0tIC0tcmVwb3J0ZXIgbGlzdCB0ZXN0LyouanMiLAogICAgImNvdmVyYWxscyI6ICJucG0gcnVuLXNjcmlwdCBjb3ZlcmFnZSAmJiBub2RlIC4vbm9kZV9tb2R1bGVzLy5iaW4vY292ZXJhbGxzIDwgY292ZXJhZ2UvbGNvdi5pbmZvIiwKICAgICJqc2hpbnQiOiAianNoaW50IC0tY29uZmlnIGpzaGludC5qc29uIGxpYi8qLmpzIDsgdHJ1ZSIsCiAgICAidGVzdCI6ICJfbW9jaGEgLS0gdGVzdC8qLmpzIiwKICAgICJ1bml0IjogIm1vY2hhIgogIH0sCiAgInRlc3RsaW5nIjogewogICAgImJyb3dzZXJzIjogWwogICAgICAiaWUvOS4ubGF0ZXN0IiwKICAgICAgImZpcmVmb3gvbGF0ZXN0IiwKICAgICAgImNocm9tZS9sYXRlc3QiLAogICAgICAic2FmYXJpLzYuMC4ubGF0ZXN0IiwKICAgICAgImlwaG9uZS82LjAuLmxhdGVzdCIsCiAgICAgICJhbmRyb2lkLWJyb3dzZXIvNC4yLi5sYXRlc3QiCiAgICBdLAogICAgImZpbGVzIjogInRlc3QvKi5qcyIsCiAgICAiaGFybmVzcyI6ICJtb2NoYSIKICB9LAogICJ2ZXJzaW9uIjogIjEuNC4xIgp9Cgp9LHt9XSwyMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFzc2VydCA9IHJlcXVpcmUoJ2Fzc2VydCcpCnZhciBjcmVhdGVIYXNoID0gcmVxdWlyZSgnY3JlYXRlLWhhc2gnKQp2YXIgcGJrZGYyID0gcmVxdWlyZSgncGJrZGYyJykucGJrZGYyU3luYwp2YXIgcmFuZG9tQnl0ZXMgPSByZXF1aXJlKCdyYW5kb21ieXRlcycpCnZhciB1bm9ybSA9IHJlcXVpcmUoJ3Vub3JtJykKCnZhciBERUZBVUxUX1dPUkRMSVNUID0gcmVxdWlyZSgnLi93b3JkbGlzdHMvZW4uanNvbicpCgpmdW5jdGlvbiBtbmVtb25pY1RvU2VlZChtbmVtb25pYywgcGFzc3dvcmQpIHsKICB2YXIgbW5lbW9uaWNCdWZmZXIgPSBuZXcgQnVmZmVyKG1uZW1vbmljLCAndXRmOCcpCiAgdmFyIHNhbHRCdWZmZXIgPSBuZXcgQnVmZmVyKHNhbHQocGFzc3dvcmQpLCAndXRmOCcpCgogIHJldHVybiBwYmtkZjIobW5lbW9uaWNCdWZmZXIsIHNhbHRCdWZmZXIsIDIwNDgsIDY0LCAnc2hhNTEyJykKfQoKZnVuY3Rpb24gbW5lbW9uaWNUb1NlZWRIZXgobW5lbW9uaWMsIHBhc3N3b3JkKSB7CiAgcmV0dXJuIG1uZW1vbmljVG9TZWVkKG1uZW1vbmljLCBwYXNzd29yZCkudG9TdHJpbmcoJ2hleCcpCn0KCmZ1bmN0aW9uIG1uZW1vbmljVG9FbnRyb3B5KG1uZW1vbmljLCB3b3JkbGlzdCkgewogIHdvcmRsaXN0ID0gd29yZGxpc3QgfHwgREVGQVVMVF9XT1JETElTVAoKICB2YXIgd29yZHMgPSBtbmVtb25pYy5zcGxpdCgnICcpCiAgYXNzZXJ0KHdvcmRzLmxlbmd0aCAlIDMgPT09IDAsICdJbnZhbGlkIG1uZW1vbmljJykKCiAgdmFyIGJlbG9uZ1RvTGlzdCA9IHdvcmRzLmV2ZXJ5KGZ1bmN0aW9uKHdvcmQpIHsKICAgIHJldHVybiB3b3JkbGlzdC5pbmRleE9mKHdvcmQpID4gLTEKICB9KQoKICBhc3NlcnQoYmVsb25nVG9MaXN0LCAnSW52YWxpZCBtbmVtb25pYycpCgogIC8vIGNvbnZlcnQgd29yZCBpbmRpY2VzIHRvIDExIGJpdCBiaW5hcnkgc3RyaW5ncwogIHZhciBiaXRzID0gd29yZHMubWFwKGZ1bmN0aW9uKHdvcmQpIHsKICAgIHZhciBpbmRleCA9IHdvcmRsaXN0LmluZGV4T2Yod29yZCkKICAgIHJldHVybiBscGFkKGluZGV4LnRvU3RyaW5nKDIpLCAnMCcsIDExKQogIH0pLmpvaW4oJycpCgogIC8vIHNwbGl0IHRoZSBiaW5hcnkgc3RyaW5nIGludG8gRU5UL0NTCiAgdmFyIGRpdmlkZXJJbmRleCA9IE1hdGguZmxvb3IoYml0cy5sZW5ndGggLyAzMykgKiAzMgogIHZhciBlbnRyb3B5ID0gYml0cy5zbGljZSgwLCBkaXZpZGVySW5kZXgpCiAgdmFyIGNoZWNrc3VtID0gYml0cy5zbGljZShkaXZpZGVySW5kZXgpCgogIC8vIGNhbGN1bGF0ZSB0aGUgY2hlY2tzdW0gYW5kIGNvbXBhcmUKICB2YXIgZW50cm9weUJ5dGVzID0gZW50cm9weS5tYXRjaCgvKC57MSw4fSkvZykubWFwKGZ1bmN0aW9uKGJpbikgewogICAgcmV0dXJuIHBhcnNlSW50KGJpbiwgMikKICB9KQogIHZhciBlbnRyb3B5QnVmZmVyID0gbmV3IEJ1ZmZlcihlbnRyb3B5Qnl0ZXMpCiAgdmFyIG5ld0NoZWNrc3VtID0gY2hlY2tzdW1CaXRzKGVudHJvcHlCdWZmZXIpCgogIGFzc2VydChuZXdDaGVja3N1bSA9PT0gY2hlY2tzdW0sICdJbnZhbGlkIG1uZW1vbmljIGNoZWNrc3VtJykKCiAgcmV0dXJuIGVudHJvcHlCdWZmZXIudG9TdHJpbmcoJ2hleCcpCn0KCmZ1bmN0aW9uIGVudHJvcHlUb01uZW1vbmljKGVudHJvcHksIHdvcmRsaXN0KSB7CiAgd29yZGxpc3QgPSB3b3JkbGlzdCB8fCBERUZBVUxUX1dPUkRMSVNUCgogIHZhciBlbnRyb3B5QnVmZmVyID0gbmV3IEJ1ZmZlcihlbnRyb3B5LCAnaGV4JykKICB2YXIgZW50cm9weUJpdHMgPSBieXRlc1RvQmluYXJ5KFtdLnNsaWNlLmNhbGwoZW50cm9weUJ1ZmZlcikpCiAgdmFyIGNoZWNrc3VtID0gY2hlY2tzdW1CaXRzKGVudHJvcHlCdWZmZXIpCgogIHZhciBiaXRzID0gZW50cm9weUJpdHMgKyBjaGVja3N1bQogIHZhciBjaHVua3MgPSBiaXRzLm1hdGNoKC8oLnsxLDExfSkvZykKCiAgdmFyIHdvcmRzID0gY2h1bmtzLm1hcChmdW5jdGlvbihiaW5hcnkpIHsKICAgIHZhciBpbmRleCA9IHBhcnNlSW50KGJpbmFyeSwgMikKCiAgICByZXR1cm4gd29yZGxpc3RbaW5kZXhdCiAgfSkKCiAgcmV0dXJuIHdvcmRzLmpvaW4oJyAnKQp9CgpmdW5jdGlvbiBnZW5lcmF0ZU1uZW1vbmljKHN0cmVuZ3RoLCBybmcsIHdvcmRsaXN0KSB7CiAgc3RyZW5ndGggPSBzdHJlbmd0aCB8fCAxMjgKICBybmcgPSBybmcgfHwgcmFuZG9tQnl0ZXMKCiAgdmFyIGhleCA9IHJuZyhzdHJlbmd0aCAvIDgpLnRvU3RyaW5nKCdoZXgnKQogIHJldHVybiBlbnRyb3B5VG9NbmVtb25pYyhoZXgsIHdvcmRsaXN0KQp9CgpmdW5jdGlvbiB2YWxpZGF0ZU1uZW1vbmljKG1uZW1vbmljLCB3b3JkbGlzdCkgewogIHRyeSB7CiAgICBtbmVtb25pY1RvRW50cm9weShtbmVtb25pYywgd29yZGxpc3QpCiAgfSBjYXRjaCAoZSkgewogICAgcmV0dXJuIGZhbHNlCiAgfQoKICByZXR1cm4gdHJ1ZQp9CgpmdW5jdGlvbiBjaGVja3N1bUJpdHMoZW50cm9weUJ1ZmZlcikgewogIHZhciBoYXNoID0gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGVudHJvcHlCdWZmZXIpLmRpZ2VzdCgpCgogIC8vIENhbGN1bGF0ZWQgY29uc3RhbnRzIGZyb20gQklQMzkKICB2YXIgRU5UID0gZW50cm9weUJ1ZmZlci5sZW5ndGggKiA4CiAgdmFyIENTID0gRU5UIC8gMzIKCiAgcmV0dXJuIGJ5dGVzVG9CaW5hcnkoW10uc2xpY2UuY2FsbChoYXNoKSkuc2xpY2UoMCwgQ1MpCn0KCmZ1bmN0aW9uIHNhbHQocGFzc3dvcmQpIHsKICByZXR1cm4gJ21uZW1vbmljJyArICh1bm9ybS5uZmtkKHBhc3N3b3JkKSB8fCAnJykgLy8gVXNlIHVub3JtIHVudGlsIFN0cmluZy5wcm90b3R5cGUubm9ybWFsaXplIGdldHMgYmV0dGVyIGJyb3dzZXIgc3VwcG9ydAp9CgovLz09PT09PT09PT09IGhlbHBlciBtZXRob2RzIGZyb20gYml0Y29pbmpzLWxpYiA9PT09PT09PQoKZnVuY3Rpb24gYnl0ZXNUb0JpbmFyeShieXRlcykgewogIHJldHVybiBieXRlcy5tYXAoZnVuY3Rpb24oeCkgewogICAgcmV0dXJuIGxwYWQoeC50b1N0cmluZygyKSwgJzAnLCA4KQogIH0pLmpvaW4oJycpOwp9CgpmdW5jdGlvbiBscGFkKHN0ciwgcGFkU3RyaW5nLCBsZW5ndGgpIHsKICB3aGlsZSAoc3RyLmxlbmd0aCA8IGxlbmd0aCkgc3RyID0gcGFkU3RyaW5nICsgc3RyOwogIHJldHVybiBzdHI7Cn0KCm1vZHVsZS5leHBvcnRzID0gewogIG1uZW1vbmljVG9TZWVkOiBtbmVtb25pY1RvU2VlZCwKICBtbmVtb25pY1RvU2VlZEhleDogbW5lbW9uaWNUb1NlZWRIZXgsCiAgbW5lbW9uaWNUb0VudHJvcHk6IG1uZW1vbmljVG9FbnRyb3B5LAogIGVudHJvcHlUb01uZW1vbmljOiBlbnRyb3B5VG9NbmVtb25pYywKICBnZW5lcmF0ZU1uZW1vbmljOiBnZW5lcmF0ZU1uZW1vbmljLAogIHZhbGlkYXRlTW5lbW9uaWM6IHZhbGlkYXRlTW5lbW9uaWMsCiAgd29yZGxpc3RzOiB7CiAgICBFTjogREVGQVVMVF9XT1JETElTVAogIH0KfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vd29yZGxpc3RzL2VuLmpzb24iOjIyLCJhc3NlcnQiOjE1LCJidWZmZXIiOjcwLCJjcmVhdGUtaGFzaCI6ODIsInBia2RmMiI6MTM3LCJyYW5kb21ieXRlcyI6MTQ2LCJ1bm9ybSI6MTczfV0sMjI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cz1bCiAgImFiYW5kb24iLAogICJhYmlsaXR5IiwKICAiYWJsZSIsCiAgImFib3V0IiwKICAiYWJvdmUiLAogICJhYnNlbnQiLAogICJhYnNvcmIiLAogICJhYnN0cmFjdCIsCiAgImFic3VyZCIsCiAgImFidXNlIiwKICAiYWNjZXNzIiwKICAiYWNjaWRlbnQiLAogICJhY2NvdW50IiwKICAiYWNjdXNlIiwKICAiYWNoaWV2ZSIsCiAgImFjaWQiLAogICJhY291c3RpYyIsCiAgImFjcXVpcmUiLAogICJhY3Jvc3MiLAogICJhY3QiLAogICJhY3Rpb24iLAogICJhY3RvciIsCiAgImFjdHJlc3MiLAogICJhY3R1YWwiLAogICJhZGFwdCIsCiAgImFkZCIsCiAgImFkZGljdCIsCiAgImFkZHJlc3MiLAogICJhZGp1c3QiLAogICJhZG1pdCIsCiAgImFkdWx0IiwKICAiYWR2YW5jZSIsCiAgImFkdmljZSIsCiAgImFlcm9iaWMiLAogICJhZmZhaXIiLAogICJhZmZvcmQiLAogICJhZnJhaWQiLAogICJhZ2FpbiIsCiAgImFnZSIsCiAgImFnZW50IiwKICAiYWdyZWUiLAogICJhaGVhZCIsCiAgImFpbSIsCiAgImFpciIsCiAgImFpcnBvcnQiLAogICJhaXNsZSIsCiAgImFsYXJtIiwKICAiYWxidW0iLAogICJhbGNvaG9sIiwKICAiYWxlcnQiLAogICJhbGllbiIsCiAgImFsbCIsCiAgImFsbGV5IiwKICAiYWxsb3ciLAogICJhbG1vc3QiLAogICJhbG9uZSIsCiAgImFscGhhIiwKICAiYWxyZWFkeSIsCiAgImFsc28iLAogICJhbHRlciIsCiAgImFsd2F5cyIsCiAgImFtYXRldXIiLAogICJhbWF6aW5nIiwKICAiYW1vbmciLAogICJhbW91bnQiLAogICJhbXVzZWQiLAogICJhbmFseXN0IiwKICAiYW5jaG9yIiwKICAiYW5jaWVudCIsCiAgImFuZ2VyIiwKICAiYW5nbGUiLAogICJhbmdyeSIsCiAgImFuaW1hbCIsCiAgImFua2xlIiwKICAiYW5ub3VuY2UiLAogICJhbm51YWwiLAogICJhbm90aGVyIiwKICAiYW5zd2VyIiwKICAiYW50ZW5uYSIsCiAgImFudGlxdWUiLAogICJhbnhpZXR5IiwKICAiYW55IiwKICAiYXBhcnQiLAogICJhcG9sb2d5IiwKICAiYXBwZWFyIiwKICAiYXBwbGUiLAogICJhcHByb3ZlIiwKICAiYXByaWwiLAogICJhcmNoIiwKICAiYXJjdGljIiwKICAiYXJlYSIsCiAgImFyZW5hIiwKICAiYXJndWUiLAogICJhcm0iLAogICJhcm1lZCIsCiAgImFybW9yIiwKICAiYXJteSIsCiAgImFyb3VuZCIsCiAgImFycmFuZ2UiLAogICJhcnJlc3QiLAogICJhcnJpdmUiLAogICJhcnJvdyIsCiAgImFydCIsCiAgImFydGVmYWN0IiwKICAiYXJ0aXN0IiwKICAiYXJ0d29yayIsCiAgImFzayIsCiAgImFzcGVjdCIsCiAgImFzc2F1bHQiLAogICJhc3NldCIsCiAgImFzc2lzdCIsCiAgImFzc3VtZSIsCiAgImFzdGhtYSIsCiAgImF0aGxldGUiLAogICJhdG9tIiwKICAiYXR0YWNrIiwKICAiYXR0ZW5kIiwKICAiYXR0aXR1ZGUiLAogICJhdHRyYWN0IiwKICAiYXVjdGlvbiIsCiAgImF1ZGl0IiwKICAiYXVndXN0IiwKICAiYXVudCIsCiAgImF1dGhvciIsCiAgImF1dG8iLAogICJhdXR1bW4iLAogICJhdmVyYWdlIiwKICAiYXZvY2FkbyIsCiAgImF2b2lkIiwKICAiYXdha2UiLAogICJhd2FyZSIsCiAgImF3YXkiLAogICJhd2Vzb21lIiwKICAiYXdmdWwiLAogICJhd2t3YXJkIiwKICAiYXhpcyIsCiAgImJhYnkiLAogICJiYWNoZWxvciIsCiAgImJhY29uIiwKICAiYmFkZ2UiLAogICJiYWciLAogICJiYWxhbmNlIiwKICAiYmFsY29ueSIsCiAgImJhbGwiLAogICJiYW1ib28iLAogICJiYW5hbmEiLAogICJiYW5uZXIiLAogICJiYXIiLAogICJiYXJlbHkiLAogICJiYXJnYWluIiwKICAiYmFycmVsIiwKICAiYmFzZSIsCiAgImJhc2ljIiwKICAiYmFza2V0IiwKICAiYmF0dGxlIiwKICAiYmVhY2giLAogICJiZWFuIiwKICAiYmVhdXR5IiwKICAiYmVjYXVzZSIsCiAgImJlY29tZSIsCiAgImJlZWYiLAogICJiZWZvcmUiLAogICJiZWdpbiIsCiAgImJlaGF2ZSIsCiAgImJlaGluZCIsCiAgImJlbGlldmUiLAogICJiZWxvdyIsCiAgImJlbHQiLAogICJiZW5jaCIsCiAgImJlbmVmaXQiLAogICJiZXN0IiwKICAiYmV0cmF5IiwKICAiYmV0dGVyIiwKICAiYmV0d2VlbiIsCiAgImJleW9uZCIsCiAgImJpY3ljbGUiLAogICJiaWQiLAogICJiaWtlIiwKICAiYmluZCIsCiAgImJpb2xvZ3kiLAogICJiaXJkIiwKICAiYmlydGgiLAogICJiaXR0ZXIiLAogICJibGFjayIsCiAgImJsYWRlIiwKICAiYmxhbWUiLAogICJibGFua2V0IiwKICAiYmxhc3QiLAogICJibGVhayIsCiAgImJsZXNzIiwKICAiYmxpbmQiLAogICJibG9vZCIsCiAgImJsb3Nzb20iLAogICJibG91c2UiLAogICJibHVlIiwKICAiYmx1ciIsCiAgImJsdXNoIiwKICAiYm9hcmQiLAogICJib2F0IiwKICAiYm9keSIsCiAgImJvaWwiLAogICJib21iIiwKICAiYm9uZSIsCiAgImJvbnVzIiwKICAiYm9vayIsCiAgImJvb3N0IiwKICAiYm9yZGVyIiwKICAiYm9yaW5nIiwKICAiYm9ycm93IiwKICAiYm9zcyIsCiAgImJvdHRvbSIsCiAgImJvdW5jZSIsCiAgImJveCIsCiAgImJveSIsCiAgImJyYWNrZXQiLAogICJicmFpbiIsCiAgImJyYW5kIiwKICAiYnJhc3MiLAogICJicmF2ZSIsCiAgImJyZWFkIiwKICAiYnJlZXplIiwKICAiYnJpY2siLAogICJicmlkZ2UiLAogICJicmllZiIsCiAgImJyaWdodCIsCiAgImJyaW5nIiwKICAiYnJpc2siLAogICJicm9jY29saSIsCiAgImJyb2tlbiIsCiAgImJyb256ZSIsCiAgImJyb29tIiwKICAiYnJvdGhlciIsCiAgImJyb3duIiwKICAiYnJ1c2giLAogICJidWJibGUiLAogICJidWRkeSIsCiAgImJ1ZGdldCIsCiAgImJ1ZmZhbG8iLAogICJidWlsZCIsCiAgImJ1bGIiLAogICJidWxrIiwKICAiYnVsbGV0IiwKICAiYnVuZGxlIiwKICAiYnVua2VyIiwKICAiYnVyZGVuIiwKICAiYnVyZ2VyIiwKICAiYnVyc3QiLAogICJidXMiLAogICJidXNpbmVzcyIsCiAgImJ1c3kiLAogICJidXR0ZXIiLAogICJidXllciIsCiAgImJ1enoiLAogICJjYWJiYWdlIiwKICAiY2FiaW4iLAogICJjYWJsZSIsCiAgImNhY3R1cyIsCiAgImNhZ2UiLAogICJjYWtlIiwKICAiY2FsbCIsCiAgImNhbG0iLAogICJjYW1lcmEiLAogICJjYW1wIiwKICAiY2FuIiwKICAiY2FuYWwiLAogICJjYW5jZWwiLAogICJjYW5keSIsCiAgImNhbm5vbiIsCiAgImNhbm9lIiwKICAiY2FudmFzIiwKICAiY2FueW9uIiwKICAiY2FwYWJsZSIsCiAgImNhcGl0YWwiLAogICJjYXB0YWluIiwKICAiY2FyIiwKICAiY2FyYm9uIiwKICAiY2FyZCIsCiAgImNhcmdvIiwKICAiY2FycGV0IiwKICAiY2FycnkiLAogICJjYXJ0IiwKICAiY2FzZSIsCiAgImNhc2giLAogICJjYXNpbm8iLAogICJjYXN0bGUiLAogICJjYXN1YWwiLAogICJjYXQiLAogICJjYXRhbG9nIiwKICAiY2F0Y2giLAogICJjYXRlZ29yeSIsCiAgImNhdHRsZSIsCiAgImNhdWdodCIsCiAgImNhdXNlIiwKICAiY2F1dGlvbiIsCiAgImNhdmUiLAogICJjZWlsaW5nIiwKICAiY2VsZXJ5IiwKICAiY2VtZW50IiwKICAiY2Vuc3VzIiwKICAiY2VudHVyeSIsCiAgImNlcmVhbCIsCiAgImNlcnRhaW4iLAogICJjaGFpciIsCiAgImNoYWxrIiwKICAiY2hhbXBpb24iLAogICJjaGFuZ2UiLAogICJjaGFvcyIsCiAgImNoYXB0ZXIiLAogICJjaGFyZ2UiLAogICJjaGFzZSIsCiAgImNoYXQiLAogICJjaGVhcCIsCiAgImNoZWNrIiwKICAiY2hlZXNlIiwKICAiY2hlZiIsCiAgImNoZXJyeSIsCiAgImNoZXN0IiwKICAiY2hpY2tlbiIsCiAgImNoaWVmIiwKICAiY2hpbGQiLAogICJjaGltbmV5IiwKICAiY2hvaWNlIiwKICAiY2hvb3NlIiwKICAiY2hyb25pYyIsCiAgImNodWNrbGUiLAogICJjaHVuayIsCiAgImNodXJuIiwKICAiY2lnYXIiLAogICJjaW5uYW1vbiIsCiAgImNpcmNsZSIsCiAgImNpdGl6ZW4iLAogICJjaXR5IiwKICAiY2l2aWwiLAogICJjbGFpbSIsCiAgImNsYXAiLAogICJjbGFyaWZ5IiwKICAiY2xhdyIsCiAgImNsYXkiLAogICJjbGVhbiIsCiAgImNsZXJrIiwKICAiY2xldmVyIiwKICAiY2xpY2siLAogICJjbGllbnQiLAogICJjbGlmZiIsCiAgImNsaW1iIiwKICAiY2xpbmljIiwKICAiY2xpcCIsCiAgImNsb2NrIiwKICAiY2xvZyIsCiAgImNsb3NlIiwKICAiY2xvdGgiLAogICJjbG91ZCIsCiAgImNsb3duIiwKICAiY2x1YiIsCiAgImNsdW1wIiwKICAiY2x1c3RlciIsCiAgImNsdXRjaCIsCiAgImNvYWNoIiwKICAiY29hc3QiLAogICJjb2NvbnV0IiwKICAiY29kZSIsCiAgImNvZmZlZSIsCiAgImNvaWwiLAogICJjb2luIiwKICAiY29sbGVjdCIsCiAgImNvbG9yIiwKICAiY29sdW1uIiwKICAiY29tYmluZSIsCiAgImNvbWUiLAogICJjb21mb3J0IiwKICAiY29taWMiLAogICJjb21tb24iLAogICJjb21wYW55IiwKICAiY29uY2VydCIsCiAgImNvbmR1Y3QiLAogICJjb25maXJtIiwKICAiY29uZ3Jlc3MiLAogICJjb25uZWN0IiwKICAiY29uc2lkZXIiLAogICJjb250cm9sIiwKICAiY29udmluY2UiLAogICJjb29rIiwKICAiY29vbCIsCiAgImNvcHBlciIsCiAgImNvcHkiLAogICJjb3JhbCIsCiAgImNvcmUiLAogICJjb3JuIiwKICAiY29ycmVjdCIsCiAgImNvc3QiLAogICJjb3R0b24iLAogICJjb3VjaCIsCiAgImNvdW50cnkiLAogICJjb3VwbGUiLAogICJjb3Vyc2UiLAogICJjb3VzaW4iLAogICJjb3ZlciIsCiAgImNveW90ZSIsCiAgImNyYWNrIiwKICAiY3JhZGxlIiwKICAiY3JhZnQiLAogICJjcmFtIiwKICAiY3JhbmUiLAogICJjcmFzaCIsCiAgImNyYXRlciIsCiAgImNyYXdsIiwKICAiY3JhenkiLAogICJjcmVhbSIsCiAgImNyZWRpdCIsCiAgImNyZWVrIiwKICAiY3JldyIsCiAgImNyaWNrZXQiLAogICJjcmltZSIsCiAgImNyaXNwIiwKICAiY3JpdGljIiwKICAiY3JvcCIsCiAgImNyb3NzIiwKICAiY3JvdWNoIiwKICAiY3Jvd2QiLAogICJjcnVjaWFsIiwKICAiY3J1ZWwiLAogICJjcnVpc2UiLAogICJjcnVtYmxlIiwKICAiY3J1bmNoIiwKICAiY3J1c2giLAogICJjcnkiLAogICJjcnlzdGFsIiwKICAiY3ViZSIsCiAgImN1bHR1cmUiLAogICJjdXAiLAogICJjdXBib2FyZCIsCiAgImN1cmlvdXMiLAogICJjdXJyZW50IiwKICAiY3VydGFpbiIsCiAgImN1cnZlIiwKICAiY3VzaGlvbiIsCiAgImN1c3RvbSIsCiAgImN1dGUiLAogICJjeWNsZSIsCiAgImRhZCIsCiAgImRhbWFnZSIsCiAgImRhbXAiLAogICJkYW5jZSIsCiAgImRhbmdlciIsCiAgImRhcmluZyIsCiAgImRhc2giLAogICJkYXVnaHRlciIsCiAgImRhd24iLAogICJkYXkiLAogICJkZWFsIiwKICAiZGViYXRlIiwKICAiZGVicmlzIiwKICAiZGVjYWRlIiwKICAiZGVjZW1iZXIiLAogICJkZWNpZGUiLAogICJkZWNsaW5lIiwKICAiZGVjb3JhdGUiLAogICJkZWNyZWFzZSIsCiAgImRlZXIiLAogICJkZWZlbnNlIiwKICAiZGVmaW5lIiwKICAiZGVmeSIsCiAgImRlZ3JlZSIsCiAgImRlbGF5IiwKICAiZGVsaXZlciIsCiAgImRlbWFuZCIsCiAgImRlbWlzZSIsCiAgImRlbmlhbCIsCiAgImRlbnRpc3QiLAogICJkZW55IiwKICAiZGVwYXJ0IiwKICAiZGVwZW5kIiwKICAiZGVwb3NpdCIsCiAgImRlcHRoIiwKICAiZGVwdXR5IiwKICAiZGVyaXZlIiwKICAiZGVzY3JpYmUiLAogICJkZXNlcnQiLAogICJkZXNpZ24iLAogICJkZXNrIiwKICAiZGVzcGFpciIsCiAgImRlc3Ryb3kiLAogICJkZXRhaWwiLAogICJkZXRlY3QiLAogICJkZXZlbG9wIiwKICAiZGV2aWNlIiwKICAiZGV2b3RlIiwKICAiZGlhZ3JhbSIsCiAgImRpYWwiLAogICJkaWFtb25kIiwKICAiZGlhcnkiLAogICJkaWNlIiwKICAiZGllc2VsIiwKICAiZGlldCIsCiAgImRpZmZlciIsCiAgImRpZ2l0YWwiLAogICJkaWduaXR5IiwKICAiZGlsZW1tYSIsCiAgImRpbm5lciIsCiAgImRpbm9zYXVyIiwKICAiZGlyZWN0IiwKICAiZGlydCIsCiAgImRpc2FncmVlIiwKICAiZGlzY292ZXIiLAogICJkaXNlYXNlIiwKICAiZGlzaCIsCiAgImRpc21pc3MiLAogICJkaXNvcmRlciIsCiAgImRpc3BsYXkiLAogICJkaXN0YW5jZSIsCiAgImRpdmVydCIsCiAgImRpdmlkZSIsCiAgImRpdm9yY2UiLAogICJkaXp6eSIsCiAgImRvY3RvciIsCiAgImRvY3VtZW50IiwKICAiZG9nIiwKICAiZG9sbCIsCiAgImRvbHBoaW4iLAogICJkb21haW4iLAogICJkb25hdGUiLAogICJkb25rZXkiLAogICJkb25vciIsCiAgImRvb3IiLAogICJkb3NlIiwKICAiZG91YmxlIiwKICAiZG92ZSIsCiAgImRyYWZ0IiwKICAiZHJhZ29uIiwKICAiZHJhbWEiLAogICJkcmFzdGljIiwKICAiZHJhdyIsCiAgImRyZWFtIiwKICAiZHJlc3MiLAogICJkcmlmdCIsCiAgImRyaWxsIiwKICAiZHJpbmsiLAogICJkcmlwIiwKICAiZHJpdmUiLAogICJkcm9wIiwKICAiZHJ1bSIsCiAgImRyeSIsCiAgImR1Y2siLAogICJkdW1iIiwKICAiZHVuZSIsCiAgImR1cmluZyIsCiAgImR1c3QiLAogICJkdXRjaCIsCiAgImR1dHkiLAogICJkd2FyZiIsCiAgImR5bmFtaWMiLAogICJlYWdlciIsCiAgImVhZ2xlIiwKICAiZWFybHkiLAogICJlYXJuIiwKICAiZWFydGgiLAogICJlYXNpbHkiLAogICJlYXN0IiwKICAiZWFzeSIsCiAgImVjaG8iLAogICJlY29sb2d5IiwKICAiZWNvbm9teSIsCiAgImVkZ2UiLAogICJlZGl0IiwKICAiZWR1Y2F0ZSIsCiAgImVmZm9ydCIsCiAgImVnZyIsCiAgImVpZ2h0IiwKICAiZWl0aGVyIiwKICAiZWxib3ciLAogICJlbGRlciIsCiAgImVsZWN0cmljIiwKICAiZWxlZ2FudCIsCiAgImVsZW1lbnQiLAogICJlbGVwaGFudCIsCiAgImVsZXZhdG9yIiwKICAiZWxpdGUiLAogICJlbHNlIiwKICAiZW1iYXJrIiwKICAiZW1ib2R5IiwKICAiZW1icmFjZSIsCiAgImVtZXJnZSIsCiAgImVtb3Rpb24iLAogICJlbXBsb3kiLAogICJlbXBvd2VyIiwKICAiZW1wdHkiLAogICJlbmFibGUiLAogICJlbmFjdCIsCiAgImVuZCIsCiAgImVuZGxlc3MiLAogICJlbmRvcnNlIiwKICAiZW5lbXkiLAogICJlbmVyZ3kiLAogICJlbmZvcmNlIiwKICAiZW5nYWdlIiwKICAiZW5naW5lIiwKICAiZW5oYW5jZSIsCiAgImVuam95IiwKICAiZW5saXN0IiwKICAiZW5vdWdoIiwKICAiZW5yaWNoIiwKICAiZW5yb2xsIiwKICAiZW5zdXJlIiwKICAiZW50ZXIiLAogICJlbnRpcmUiLAogICJlbnRyeSIsCiAgImVudmVsb3BlIiwKICAiZXBpc29kZSIsCiAgImVxdWFsIiwKICAiZXF1aXAiLAogICJlcmEiLAogICJlcmFzZSIsCiAgImVyb2RlIiwKICAiZXJvc2lvbiIsCiAgImVycm9yIiwKICAiZXJ1cHQiLAogICJlc2NhcGUiLAogICJlc3NheSIsCiAgImVzc2VuY2UiLAogICJlc3RhdGUiLAogICJldGVybmFsIiwKICAiZXRoaWNzIiwKICAiZXZpZGVuY2UiLAogICJldmlsIiwKICAiZXZva2UiLAogICJldm9sdmUiLAogICJleGFjdCIsCiAgImV4YW1wbGUiLAogICJleGNlc3MiLAogICJleGNoYW5nZSIsCiAgImV4Y2l0ZSIsCiAgImV4Y2x1ZGUiLAogICJleGN1c2UiLAogICJleGVjdXRlIiwKICAiZXhlcmNpc2UiLAogICJleGhhdXN0IiwKICAiZXhoaWJpdCIsCiAgImV4aWxlIiwKICAiZXhpc3QiLAogICJleGl0IiwKICAiZXhvdGljIiwKICAiZXhwYW5kIiwKICAiZXhwZWN0IiwKICAiZXhwaXJlIiwKICAiZXhwbGFpbiIsCiAgImV4cG9zZSIsCiAgImV4cHJlc3MiLAogICJleHRlbmQiLAogICJleHRyYSIsCiAgImV5ZSIsCiAgImV5ZWJyb3ciLAogICJmYWJyaWMiLAogICJmYWNlIiwKICAiZmFjdWx0eSIsCiAgImZhZGUiLAogICJmYWludCIsCiAgImZhaXRoIiwKICAiZmFsbCIsCiAgImZhbHNlIiwKICAiZmFtZSIsCiAgImZhbWlseSIsCiAgImZhbW91cyIsCiAgImZhbiIsCiAgImZhbmN5IiwKICAiZmFudGFzeSIsCiAgImZhcm0iLAogICJmYXNoaW9uIiwKICAiZmF0IiwKICAiZmF0YWwiLAogICJmYXRoZXIiLAogICJmYXRpZ3VlIiwKICAiZmF1bHQiLAogICJmYXZvcml0ZSIsCiAgImZlYXR1cmUiLAogICJmZWJydWFyeSIsCiAgImZlZGVyYWwiLAogICJmZWUiLAogICJmZWVkIiwKICAiZmVlbCIsCiAgImZlbWFsZSIsCiAgImZlbmNlIiwKICAiZmVzdGl2YWwiLAogICJmZXRjaCIsCiAgImZldmVyIiwKICAiZmV3IiwKICAiZmliZXIiLAogICJmaWN0aW9uIiwKICAiZmllbGQiLAogICJmaWd1cmUiLAogICJmaWxlIiwKICAiZmlsbSIsCiAgImZpbHRlciIsCiAgImZpbmFsIiwKICAiZmluZCIsCiAgImZpbmUiLAogICJmaW5nZXIiLAogICJmaW5pc2giLAogICJmaXJlIiwKICAiZmlybSIsCiAgImZpcnN0IiwKICAiZmlzY2FsIiwKICAiZmlzaCIsCiAgImZpdCIsCiAgImZpdG5lc3MiLAogICJmaXgiLAogICJmbGFnIiwKICAiZmxhbWUiLAogICJmbGFzaCIsCiAgImZsYXQiLAogICJmbGF2b3IiLAogICJmbGVlIiwKICAiZmxpZ2h0IiwKICAiZmxpcCIsCiAgImZsb2F0IiwKICAiZmxvY2siLAogICJmbG9vciIsCiAgImZsb3dlciIsCiAgImZsdWlkIiwKICAiZmx1c2giLAogICJmbHkiLAogICJmb2FtIiwKICAiZm9jdXMiLAogICJmb2ciLAogICJmb2lsIiwKICAiZm9sZCIsCiAgImZvbGxvdyIsCiAgImZvb2QiLAogICJmb290IiwKICAiZm9yY2UiLAogICJmb3Jlc3QiLAogICJmb3JnZXQiLAogICJmb3JrIiwKICAiZm9ydHVuZSIsCiAgImZvcnVtIiwKICAiZm9yd2FyZCIsCiAgImZvc3NpbCIsCiAgImZvc3RlciIsCiAgImZvdW5kIiwKICAiZm94IiwKICAiZnJhZ2lsZSIsCiAgImZyYW1lIiwKICAiZnJlcXVlbnQiLAogICJmcmVzaCIsCiAgImZyaWVuZCIsCiAgImZyaW5nZSIsCiAgImZyb2ciLAogICJmcm9udCIsCiAgImZyb3N0IiwKICAiZnJvd24iLAogICJmcm96ZW4iLAogICJmcnVpdCIsCiAgImZ1ZWwiLAogICJmdW4iLAogICJmdW5ueSIsCiAgImZ1cm5hY2UiLAogICJmdXJ5IiwKICAiZnV0dXJlIiwKICAiZ2FkZ2V0IiwKICAiZ2FpbiIsCiAgImdhbGF4eSIsCiAgImdhbGxlcnkiLAogICJnYW1lIiwKICAiZ2FwIiwKICAiZ2FyYWdlIiwKICAiZ2FyYmFnZSIsCiAgImdhcmRlbiIsCiAgImdhcmxpYyIsCiAgImdhcm1lbnQiLAogICJnYXMiLAogICJnYXNwIiwKICAiZ2F0ZSIsCiAgImdhdGhlciIsCiAgImdhdWdlIiwKICAiZ2F6ZSIsCiAgImdlbmVyYWwiLAogICJnZW5pdXMiLAogICJnZW5yZSIsCiAgImdlbnRsZSIsCiAgImdlbnVpbmUiLAogICJnZXN0dXJlIiwKICAiZ2hvc3QiLAogICJnaWFudCIsCiAgImdpZnQiLAogICJnaWdnbGUiLAogICJnaW5nZXIiLAogICJnaXJhZmZlIiwKICAiZ2lybCIsCiAgImdpdmUiLAogICJnbGFkIiwKICAiZ2xhbmNlIiwKICAiZ2xhcmUiLAogICJnbGFzcyIsCiAgImdsaWRlIiwKICAiZ2xpbXBzZSIsCiAgImdsb2JlIiwKICAiZ2xvb20iLAogICJnbG9yeSIsCiAgImdsb3ZlIiwKICAiZ2xvdyIsCiAgImdsdWUiLAogICJnb2F0IiwKICAiZ29kZGVzcyIsCiAgImdvbGQiLAogICJnb29kIiwKICAiZ29vc2UiLAogICJnb3JpbGxhIiwKICAiZ29zcGVsIiwKICAiZ29zc2lwIiwKICAiZ292ZXJuIiwKICAiZ293biIsCiAgImdyYWIiLAogICJncmFjZSIsCiAgImdyYWluIiwKICAiZ3JhbnQiLAogICJncmFwZSIsCiAgImdyYXNzIiwKICAiZ3Jhdml0eSIsCiAgImdyZWF0IiwKICAiZ3JlZW4iLAogICJncmlkIiwKICAiZ3JpZWYiLAogICJncml0IiwKICAiZ3JvY2VyeSIsCiAgImdyb3VwIiwKICAiZ3JvdyIsCiAgImdydW50IiwKICAiZ3VhcmQiLAogICJndWVzcyIsCiAgImd1aWRlIiwKICAiZ3VpbHQiLAogICJndWl0YXIiLAogICJndW4iLAogICJneW0iLAogICJoYWJpdCIsCiAgImhhaXIiLAogICJoYWxmIiwKICAiaGFtbWVyIiwKICAiaGFtc3RlciIsCiAgImhhbmQiLAogICJoYXBweSIsCiAgImhhcmJvciIsCiAgImhhcmQiLAogICJoYXJzaCIsCiAgImhhcnZlc3QiLAogICJoYXQiLAogICJoYXZlIiwKICAiaGF3ayIsCiAgImhhemFyZCIsCiAgImhlYWQiLAogICJoZWFsdGgiLAogICJoZWFydCIsCiAgImhlYXZ5IiwKICAiaGVkZ2Vob2ciLAogICJoZWlnaHQiLAogICJoZWxsbyIsCiAgImhlbG1ldCIsCiAgImhlbHAiLAogICJoZW4iLAogICJoZXJvIiwKICAiaGlkZGVuIiwKICAiaGlnaCIsCiAgImhpbGwiLAogICJoaW50IiwKICAiaGlwIiwKICAiaGlyZSIsCiAgImhpc3RvcnkiLAogICJob2JieSIsCiAgImhvY2tleSIsCiAgImhvbGQiLAogICJob2xlIiwKICAiaG9saWRheSIsCiAgImhvbGxvdyIsCiAgImhvbWUiLAogICJob25leSIsCiAgImhvb2QiLAogICJob3BlIiwKICAiaG9ybiIsCiAgImhvcnJvciIsCiAgImhvcnNlIiwKICAiaG9zcGl0YWwiLAogICJob3N0IiwKICAiaG90ZWwiLAogICJob3VyIiwKICAiaG92ZXIiLAogICJodWIiLAogICJodWdlIiwKICAiaHVtYW4iLAogICJodW1ibGUiLAogICJodW1vciIsCiAgImh1bmRyZWQiLAogICJodW5ncnkiLAogICJodW50IiwKICAiaHVyZGxlIiwKICAiaHVycnkiLAogICJodXJ0IiwKICAiaHVzYmFuZCIsCiAgImh5YnJpZCIsCiAgImljZSIsCiAgImljb24iLAogICJpZGVhIiwKICAiaWRlbnRpZnkiLAogICJpZGxlIiwKICAiaWdub3JlIiwKICAiaWxsIiwKICAiaWxsZWdhbCIsCiAgImlsbG5lc3MiLAogICJpbWFnZSIsCiAgImltaXRhdGUiLAogICJpbW1lbnNlIiwKICAiaW1tdW5lIiwKICAiaW1wYWN0IiwKICAiaW1wb3NlIiwKICAiaW1wcm92ZSIsCiAgImltcHVsc2UiLAogICJpbmNoIiwKICAiaW5jbHVkZSIsCiAgImluY29tZSIsCiAgImluY3JlYXNlIiwKICAiaW5kZXgiLAogICJpbmRpY2F0ZSIsCiAgImluZG9vciIsCiAgImluZHVzdHJ5IiwKICAiaW5mYW50IiwKICAiaW5mbGljdCIsCiAgImluZm9ybSIsCiAgImluaGFsZSIsCiAgImluaGVyaXQiLAogICJpbml0aWFsIiwKICAiaW5qZWN0IiwKICAiaW5qdXJ5IiwKICAiaW5tYXRlIiwKICAiaW5uZXIiLAogICJpbm5vY2VudCIsCiAgImlucHV0IiwKICAiaW5xdWlyeSIsCiAgImluc2FuZSIsCiAgImluc2VjdCIsCiAgImluc2lkZSIsCiAgImluc3BpcmUiLAogICJpbnN0YWxsIiwKICAiaW50YWN0IiwKICAiaW50ZXJlc3QiLAogICJpbnRvIiwKICAiaW52ZXN0IiwKICAiaW52aXRlIiwKICAiaW52b2x2ZSIsCiAgImlyb24iLAogICJpc2xhbmQiLAogICJpc29sYXRlIiwKICAiaXNzdWUiLAogICJpdGVtIiwKICAiaXZvcnkiLAogICJqYWNrZXQiLAogICJqYWd1YXIiLAogICJqYXIiLAogICJqYXp6IiwKICAiamVhbG91cyIsCiAgImplYW5zIiwKICAiamVsbHkiLAogICJqZXdlbCIsCiAgImpvYiIsCiAgImpvaW4iLAogICJqb2tlIiwKICAiam91cm5leSIsCiAgImpveSIsCiAgImp1ZGdlIiwKICAianVpY2UiLAogICJqdW1wIiwKICAianVuZ2xlIiwKICAianVuaW9yIiwKICAianVuayIsCiAgImp1c3QiLAogICJrYW5nYXJvbyIsCiAgImtlZW4iLAogICJrZWVwIiwKICAia2V0Y2h1cCIsCiAgImtleSIsCiAgImtpY2siLAogICJraWQiLAogICJraWRuZXkiLAogICJraW5kIiwKICAia2luZ2RvbSIsCiAgImtpc3MiLAogICJraXQiLAogICJraXRjaGVuIiwKICAia2l0ZSIsCiAgImtpdHRlbiIsCiAgImtpd2kiLAogICJrbmVlIiwKICAia25pZmUiLAogICJrbm9jayIsCiAgImtub3ciLAogICJsYWIiLAogICJsYWJlbCIsCiAgImxhYm9yIiwKICAibGFkZGVyIiwKICAibGFkeSIsCiAgImxha2UiLAogICJsYW1wIiwKICAibGFuZ3VhZ2UiLAogICJsYXB0b3AiLAogICJsYXJnZSIsCiAgImxhdGVyIiwKICAibGF0aW4iLAogICJsYXVnaCIsCiAgImxhdW5kcnkiLAogICJsYXZhIiwKICAibGF3IiwKICAibGF3biIsCiAgImxhd3N1aXQiLAogICJsYXllciIsCiAgImxhenkiLAogICJsZWFkZXIiLAogICJsZWFmIiwKICAibGVhcm4iLAogICJsZWF2ZSIsCiAgImxlY3R1cmUiLAogICJsZWZ0IiwKICAibGVnIiwKICAibGVnYWwiLAogICJsZWdlbmQiLAogICJsZWlzdXJlIiwKICAibGVtb24iLAogICJsZW5kIiwKICAibGVuZ3RoIiwKICAibGVucyIsCiAgImxlb3BhcmQiLAogICJsZXNzb24iLAogICJsZXR0ZXIiLAogICJsZXZlbCIsCiAgImxpYXIiLAogICJsaWJlcnR5IiwKICAibGlicmFyeSIsCiAgImxpY2Vuc2UiLAogICJsaWZlIiwKICAibGlmdCIsCiAgImxpZ2h0IiwKICAibGlrZSIsCiAgImxpbWIiLAogICJsaW1pdCIsCiAgImxpbmsiLAogICJsaW9uIiwKICAibGlxdWlkIiwKICAibGlzdCIsCiAgImxpdHRsZSIsCiAgImxpdmUiLAogICJsaXphcmQiLAogICJsb2FkIiwKICAibG9hbiIsCiAgImxvYnN0ZXIiLAogICJsb2NhbCIsCiAgImxvY2siLAogICJsb2dpYyIsCiAgImxvbmVseSIsCiAgImxvbmciLAogICJsb29wIiwKICAibG90dGVyeSIsCiAgImxvdWQiLAogICJsb3VuZ2UiLAogICJsb3ZlIiwKICAibG95YWwiLAogICJsdWNreSIsCiAgImx1Z2dhZ2UiLAogICJsdW1iZXIiLAogICJsdW5hciIsCiAgImx1bmNoIiwKICAibHV4dXJ5IiwKICAibHlyaWNzIiwKICAibWFjaGluZSIsCiAgIm1hZCIsCiAgIm1hZ2ljIiwKICAibWFnbmV0IiwKICAibWFpZCIsCiAgIm1haWwiLAogICJtYWluIiwKICAibWFqb3IiLAogICJtYWtlIiwKICAibWFtbWFsIiwKICAibWFuIiwKICAibWFuYWdlIiwKICAibWFuZGF0ZSIsCiAgIm1hbmdvIiwKICAibWFuc2lvbiIsCiAgIm1hbnVhbCIsCiAgIm1hcGxlIiwKICAibWFyYmxlIiwKICAibWFyY2giLAogICJtYXJnaW4iLAogICJtYXJpbmUiLAogICJtYXJrZXQiLAogICJtYXJyaWFnZSIsCiAgIm1hc2siLAogICJtYXNzIiwKICAibWFzdGVyIiwKICAibWF0Y2giLAogICJtYXRlcmlhbCIsCiAgIm1hdGgiLAogICJtYXRyaXgiLAogICJtYXR0ZXIiLAogICJtYXhpbXVtIiwKICAibWF6ZSIsCiAgIm1lYWRvdyIsCiAgIm1lYW4iLAogICJtZWFzdXJlIiwKICAibWVhdCIsCiAgIm1lY2hhbmljIiwKICAibWVkYWwiLAogICJtZWRpYSIsCiAgIm1lbG9keSIsCiAgIm1lbHQiLAogICJtZW1iZXIiLAogICJtZW1vcnkiLAogICJtZW50aW9uIiwKICAibWVudSIsCiAgIm1lcmN5IiwKICAibWVyZ2UiLAogICJtZXJpdCIsCiAgIm1lcnJ5IiwKICAibWVzaCIsCiAgIm1lc3NhZ2UiLAogICJtZXRhbCIsCiAgIm1ldGhvZCIsCiAgIm1pZGRsZSIsCiAgIm1pZG5pZ2h0IiwKICAibWlsayIsCiAgIm1pbGxpb24iLAogICJtaW1pYyIsCiAgIm1pbmQiLAogICJtaW5pbXVtIiwKICAibWlub3IiLAogICJtaW51dGUiLAogICJtaXJhY2xlIiwKICAibWlycm9yIiwKICAibWlzZXJ5IiwKICAibWlzcyIsCiAgIm1pc3Rha2UiLAogICJtaXgiLAogICJtaXhlZCIsCiAgIm1peHR1cmUiLAogICJtb2JpbGUiLAogICJtb2RlbCIsCiAgIm1vZGlmeSIsCiAgIm1vbSIsCiAgIm1vbWVudCIsCiAgIm1vbml0b3IiLAogICJtb25rZXkiLAogICJtb25zdGVyIiwKICAibW9udGgiLAogICJtb29uIiwKICAibW9yYWwiLAogICJtb3JlIiwKICAibW9ybmluZyIsCiAgIm1vc3F1aXRvIiwKICAibW90aGVyIiwKICAibW90aW9uIiwKICAibW90b3IiLAogICJtb3VudGFpbiIsCiAgIm1vdXNlIiwKICAibW92ZSIsCiAgIm1vdmllIiwKICAibXVjaCIsCiAgIm11ZmZpbiIsCiAgIm11bGUiLAogICJtdWx0aXBseSIsCiAgIm11c2NsZSIsCiAgIm11c2V1bSIsCiAgIm11c2hyb29tIiwKICAibXVzaWMiLAogICJtdXN0IiwKICAibXV0dWFsIiwKICAibXlzZWxmIiwKICAibXlzdGVyeSIsCiAgIm15dGgiLAogICJuYWl2ZSIsCiAgIm5hbWUiLAogICJuYXBraW4iLAogICJuYXJyb3ciLAogICJuYXN0eSIsCiAgIm5hdGlvbiIsCiAgIm5hdHVyZSIsCiAgIm5lYXIiLAogICJuZWNrIiwKICAibmVlZCIsCiAgIm5lZ2F0aXZlIiwKICAibmVnbGVjdCIsCiAgIm5laXRoZXIiLAogICJuZXBoZXciLAogICJuZXJ2ZSIsCiAgIm5lc3QiLAogICJuZXQiLAogICJuZXR3b3JrIiwKICAibmV1dHJhbCIsCiAgIm5ldmVyIiwKICAibmV3cyIsCiAgIm5leHQiLAogICJuaWNlIiwKICAibmlnaHQiLAogICJub2JsZSIsCiAgIm5vaXNlIiwKICAibm9taW5lZSIsCiAgIm5vb2RsZSIsCiAgIm5vcm1hbCIsCiAgIm5vcnRoIiwKICAibm9zZSIsCiAgIm5vdGFibGUiLAogICJub3RlIiwKICAibm90aGluZyIsCiAgIm5vdGljZSIsCiAgIm5vdmVsIiwKICAibm93IiwKICAibnVjbGVhciIsCiAgIm51bWJlciIsCiAgIm51cnNlIiwKICAibnV0IiwKICAib2FrIiwKICAib2JleSIsCiAgIm9iamVjdCIsCiAgIm9ibGlnZSIsCiAgIm9ic2N1cmUiLAogICJvYnNlcnZlIiwKICAib2J0YWluIiwKICAib2J2aW91cyIsCiAgIm9jY3VyIiwKICAib2NlYW4iLAogICJvY3RvYmVyIiwKICAib2RvciIsCiAgIm9mZiIsCiAgIm9mZmVyIiwKICAib2ZmaWNlIiwKICAib2Z0ZW4iLAogICJvaWwiLAogICJva2F5IiwKICAib2xkIiwKICAib2xpdmUiLAogICJvbHltcGljIiwKICAib21pdCIsCiAgIm9uY2UiLAogICJvbmUiLAogICJvbmlvbiIsCiAgIm9ubGluZSIsCiAgIm9ubHkiLAogICJvcGVuIiwKICAib3BlcmEiLAogICJvcGluaW9uIiwKICAib3Bwb3NlIiwKICAib3B0aW9uIiwKICAib3JhbmdlIiwKICAib3JiaXQiLAogICJvcmNoYXJkIiwKICAib3JkZXIiLAogICJvcmRpbmFyeSIsCiAgIm9yZ2FuIiwKICAib3JpZW50IiwKICAib3JpZ2luYWwiLAogICJvcnBoYW4iLAogICJvc3RyaWNoIiwKICAib3RoZXIiLAogICJvdXRkb29yIiwKICAib3V0ZXIiLAogICJvdXRwdXQiLAogICJvdXRzaWRlIiwKICAib3ZhbCIsCiAgIm92ZW4iLAogICJvdmVyIiwKICAib3duIiwKICAib3duZXIiLAogICJveHlnZW4iLAogICJveXN0ZXIiLAogICJvem9uZSIsCiAgInBhY3QiLAogICJwYWRkbGUiLAogICJwYWdlIiwKICAicGFpciIsCiAgInBhbGFjZSIsCiAgInBhbG0iLAogICJwYW5kYSIsCiAgInBhbmVsIiwKICAicGFuaWMiLAogICJwYW50aGVyIiwKICAicGFwZXIiLAogICJwYXJhZGUiLAogICJwYXJlbnQiLAogICJwYXJrIiwKICAicGFycm90IiwKICAicGFydHkiLAogICJwYXNzIiwKICAicGF0Y2giLAogICJwYXRoIiwKICAicGF0aWVudCIsCiAgInBhdHJvbCIsCiAgInBhdHRlcm4iLAogICJwYXVzZSIsCiAgInBhdmUiLAogICJwYXltZW50IiwKICAicGVhY2UiLAogICJwZWFudXQiLAogICJwZWFyIiwKICAicGVhc2FudCIsCiAgInBlbGljYW4iLAogICJwZW4iLAogICJwZW5hbHR5IiwKICAicGVuY2lsIiwKICAicGVvcGxlIiwKICAicGVwcGVyIiwKICAicGVyZmVjdCIsCiAgInBlcm1pdCIsCiAgInBlcnNvbiIsCiAgInBldCIsCiAgInBob25lIiwKICAicGhvdG8iLAogICJwaHJhc2UiLAogICJwaHlzaWNhbCIsCiAgInBpYW5vIiwKICAicGljbmljIiwKICAicGljdHVyZSIsCiAgInBpZWNlIiwKICAicGlnIiwKICAicGlnZW9uIiwKICAicGlsbCIsCiAgInBpbG90IiwKICAicGluayIsCiAgInBpb25lZXIiLAogICJwaXBlIiwKICAicGlzdG9sIiwKICAicGl0Y2giLAogICJwaXp6YSIsCiAgInBsYWNlIiwKICAicGxhbmV0IiwKICAicGxhc3RpYyIsCiAgInBsYXRlIiwKICAicGxheSIsCiAgInBsZWFzZSIsCiAgInBsZWRnZSIsCiAgInBsdWNrIiwKICAicGx1ZyIsCiAgInBsdW5nZSIsCiAgInBvZW0iLAogICJwb2V0IiwKICAicG9pbnQiLAogICJwb2xhciIsCiAgInBvbGUiLAogICJwb2xpY2UiLAogICJwb25kIiwKICAicG9ueSIsCiAgInBvb2wiLAogICJwb3B1bGFyIiwKICAicG9ydGlvbiIsCiAgInBvc2l0aW9uIiwKICAicG9zc2libGUiLAogICJwb3N0IiwKICAicG90YXRvIiwKICAicG90dGVyeSIsCiAgInBvdmVydHkiLAogICJwb3dkZXIiLAogICJwb3dlciIsCiAgInByYWN0aWNlIiwKICAicHJhaXNlIiwKICAicHJlZGljdCIsCiAgInByZWZlciIsCiAgInByZXBhcmUiLAogICJwcmVzZW50IiwKICAicHJldHR5IiwKICAicHJldmVudCIsCiAgInByaWNlIiwKICAicHJpZGUiLAogICJwcmltYXJ5IiwKICAicHJpbnQiLAogICJwcmlvcml0eSIsCiAgInByaXNvbiIsCiAgInByaXZhdGUiLAogICJwcml6ZSIsCiAgInByb2JsZW0iLAogICJwcm9jZXNzIiwKICAicHJvZHVjZSIsCiAgInByb2ZpdCIsCiAgInByb2dyYW0iLAogICJwcm9qZWN0IiwKICAicHJvbW90ZSIsCiAgInByb29mIiwKICAicHJvcGVydHkiLAogICJwcm9zcGVyIiwKICAicHJvdGVjdCIsCiAgInByb3VkIiwKICAicHJvdmlkZSIsCiAgInB1YmxpYyIsCiAgInB1ZGRpbmciLAogICJwdWxsIiwKICAicHVscCIsCiAgInB1bHNlIiwKICAicHVtcGtpbiIsCiAgInB1bmNoIiwKICAicHVwaWwiLAogICJwdXBweSIsCiAgInB1cmNoYXNlIiwKICAicHVyaXR5IiwKICAicHVycG9zZSIsCiAgInB1cnNlIiwKICAicHVzaCIsCiAgInB1dCIsCiAgInB1enpsZSIsCiAgInB5cmFtaWQiLAogICJxdWFsaXR5IiwKICAicXVhbnR1bSIsCiAgInF1YXJ0ZXIiLAogICJxdWVzdGlvbiIsCiAgInF1aWNrIiwKICAicXVpdCIsCiAgInF1aXoiLAogICJxdW90ZSIsCiAgInJhYmJpdCIsCiAgInJhY2Nvb24iLAogICJyYWNlIiwKICAicmFjayIsCiAgInJhZGFyIiwKICAicmFkaW8iLAogICJyYWlsIiwKICAicmFpbiIsCiAgInJhaXNlIiwKICAicmFsbHkiLAogICJyYW1wIiwKICAicmFuY2giLAogICJyYW5kb20iLAogICJyYW5nZSIsCiAgInJhcGlkIiwKICAicmFyZSIsCiAgInJhdGUiLAogICJyYXRoZXIiLAogICJyYXZlbiIsCiAgInJhdyIsCiAgInJhem9yIiwKICAicmVhZHkiLAogICJyZWFsIiwKICAicmVhc29uIiwKICAicmViZWwiLAogICJyZWJ1aWxkIiwKICAicmVjYWxsIiwKICAicmVjZWl2ZSIsCiAgInJlY2lwZSIsCiAgInJlY29yZCIsCiAgInJlY3ljbGUiLAogICJyZWR1Y2UiLAogICJyZWZsZWN0IiwKICAicmVmb3JtIiwKICAicmVmdXNlIiwKICAicmVnaW9uIiwKICAicmVncmV0IiwKICAicmVndWxhciIsCiAgInJlamVjdCIsCiAgInJlbGF4IiwKICAicmVsZWFzZSIsCiAgInJlbGllZiIsCiAgInJlbHkiLAogICJyZW1haW4iLAogICJyZW1lbWJlciIsCiAgInJlbWluZCIsCiAgInJlbW92ZSIsCiAgInJlbmRlciIsCiAgInJlbmV3IiwKICAicmVudCIsCiAgInJlb3BlbiIsCiAgInJlcGFpciIsCiAgInJlcGVhdCIsCiAgInJlcGxhY2UiLAogICJyZXBvcnQiLAogICJyZXF1aXJlIiwKICAicmVzY3VlIiwKICAicmVzZW1ibGUiLAogICJyZXNpc3QiLAogICJyZXNvdXJjZSIsCiAgInJlc3BvbnNlIiwKICAicmVzdWx0IiwKICAicmV0aXJlIiwKICAicmV0cmVhdCIsCiAgInJldHVybiIsCiAgInJldW5pb24iLAogICJyZXZlYWwiLAogICJyZXZpZXciLAogICJyZXdhcmQiLAogICJyaHl0aG0iLAogICJyaWIiLAogICJyaWJib24iLAogICJyaWNlIiwKICAicmljaCIsCiAgInJpZGUiLAogICJyaWRnZSIsCiAgInJpZmxlIiwKICAicmlnaHQiLAogICJyaWdpZCIsCiAgInJpbmciLAogICJyaW90IiwKICAicmlwcGxlIiwKICAicmlzayIsCiAgInJpdHVhbCIsCiAgInJpdmFsIiwKICAicml2ZXIiLAogICJyb2FkIiwKICAicm9hc3QiLAogICJyb2JvdCIsCiAgInJvYnVzdCIsCiAgInJvY2tldCIsCiAgInJvbWFuY2UiLAogICJyb29mIiwKICAicm9va2llIiwKICAicm9vbSIsCiAgInJvc2UiLAogICJyb3RhdGUiLAogICJyb3VnaCIsCiAgInJvdW5kIiwKICAicm91dGUiLAogICJyb3lhbCIsCiAgInJ1YmJlciIsCiAgInJ1ZGUiLAogICJydWciLAogICJydWxlIiwKICAicnVuIiwKICAicnVud2F5IiwKICAicnVyYWwiLAogICJzYWQiLAogICJzYWRkbGUiLAogICJzYWRuZXNzIiwKICAic2FmZSIsCiAgInNhaWwiLAogICJzYWxhZCIsCiAgInNhbG1vbiIsCiAgInNhbG9uIiwKICAic2FsdCIsCiAgInNhbHV0ZSIsCiAgInNhbWUiLAogICJzYW1wbGUiLAogICJzYW5kIiwKICAic2F0aXNmeSIsCiAgInNhdG9zaGkiLAogICJzYXVjZSIsCiAgInNhdXNhZ2UiLAogICJzYXZlIiwKICAic2F5IiwKICAic2NhbGUiLAogICJzY2FuIiwKICAic2NhcmUiLAogICJzY2F0dGVyIiwKICAic2NlbmUiLAogICJzY2hlbWUiLAogICJzY2hvb2wiLAogICJzY2llbmNlIiwKICAic2Npc3NvcnMiLAogICJzY29ycGlvbiIsCiAgInNjb3V0IiwKICAic2NyYXAiLAogICJzY3JlZW4iLAogICJzY3JpcHQiLAogICJzY3J1YiIsCiAgInNlYSIsCiAgInNlYXJjaCIsCiAgInNlYXNvbiIsCiAgInNlYXQiLAogICJzZWNvbmQiLAogICJzZWNyZXQiLAogICJzZWN0aW9uIiwKICAic2VjdXJpdHkiLAogICJzZWVkIiwKICAic2VlayIsCiAgInNlZ21lbnQiLAogICJzZWxlY3QiLAogICJzZWxsIiwKICAic2VtaW5hciIsCiAgInNlbmlvciIsCiAgInNlbnNlIiwKICAic2VudGVuY2UiLAogICJzZXJpZXMiLAogICJzZXJ2aWNlIiwKICAic2Vzc2lvbiIsCiAgInNldHRsZSIsCiAgInNldHVwIiwKICAic2V2ZW4iLAogICJzaGFkb3ciLAogICJzaGFmdCIsCiAgInNoYWxsb3ciLAogICJzaGFyZSIsCiAgInNoZWQiLAogICJzaGVsbCIsCiAgInNoZXJpZmYiLAogICJzaGllbGQiLAogICJzaGlmdCIsCiAgInNoaW5lIiwKICAic2hpcCIsCiAgInNoaXZlciIsCiAgInNob2NrIiwKICAic2hvZSIsCiAgInNob290IiwKICAic2hvcCIsCiAgInNob3J0IiwKICAic2hvdWxkZXIiLAogICJzaG92ZSIsCiAgInNocmltcCIsCiAgInNocnVnIiwKICAic2h1ZmZsZSIsCiAgInNoeSIsCiAgInNpYmxpbmciLAogICJzaWNrIiwKICAic2lkZSIsCiAgInNpZWdlIiwKICAic2lnaHQiLAogICJzaWduIiwKICAic2lsZW50IiwKICAic2lsayIsCiAgInNpbGx5IiwKICAic2lsdmVyIiwKICAic2ltaWxhciIsCiAgInNpbXBsZSIsCiAgInNpbmNlIiwKICAic2luZyIsCiAgInNpcmVuIiwKICAic2lzdGVyIiwKICAic2l0dWF0ZSIsCiAgInNpeCIsCiAgInNpemUiLAogICJza2F0ZSIsCiAgInNrZXRjaCIsCiAgInNraSIsCiAgInNraWxsIiwKICAic2tpbiIsCiAgInNraXJ0IiwKICAic2t1bGwiLAogICJzbGFiIiwKICAic2xhbSIsCiAgInNsZWVwIiwKICAic2xlbmRlciIsCiAgInNsaWNlIiwKICAic2xpZGUiLAogICJzbGlnaHQiLAogICJzbGltIiwKICAic2xvZ2FuIiwKICAic2xvdCIsCiAgInNsb3ciLAogICJzbHVzaCIsCiAgInNtYWxsIiwKICAic21hcnQiLAogICJzbWlsZSIsCiAgInNtb2tlIiwKICAic21vb3RoIiwKICAic25hY2siLAogICJzbmFrZSIsCiAgInNuYXAiLAogICJzbmlmZiIsCiAgInNub3ciLAogICJzb2FwIiwKICAic29jY2VyIiwKICAic29jaWFsIiwKICAic29jayIsCiAgInNvZGEiLAogICJzb2Z0IiwKICAic29sYXIiLAogICJzb2xkaWVyIiwKICAic29saWQiLAogICJzb2x1dGlvbiIsCiAgInNvbHZlIiwKICAic29tZW9uZSIsCiAgInNvbmciLAogICJzb29uIiwKICAic29ycnkiLAogICJzb3J0IiwKICAic291bCIsCiAgInNvdW5kIiwKICAic291cCIsCiAgInNvdXJjZSIsCiAgInNvdXRoIiwKICAic3BhY2UiLAogICJzcGFyZSIsCiAgInNwYXRpYWwiLAogICJzcGF3biIsCiAgInNwZWFrIiwKICAic3BlY2lhbCIsCiAgInNwZWVkIiwKICAic3BlbGwiLAogICJzcGVuZCIsCiAgInNwaGVyZSIsCiAgInNwaWNlIiwKICAic3BpZGVyIiwKICAic3Bpa2UiLAogICJzcGluIiwKICAic3Bpcml0IiwKICAic3BsaXQiLAogICJzcG9pbCIsCiAgInNwb25zb3IiLAogICJzcG9vbiIsCiAgInNwb3J0IiwKICAic3BvdCIsCiAgInNwcmF5IiwKICAic3ByZWFkIiwKICAic3ByaW5nIiwKICAic3B5IiwKICAic3F1YXJlIiwKICAic3F1ZWV6ZSIsCiAgInNxdWlycmVsIiwKICAic3RhYmxlIiwKICAic3RhZGl1bSIsCiAgInN0YWZmIiwKICAic3RhZ2UiLAogICJzdGFpcnMiLAogICJzdGFtcCIsCiAgInN0YW5kIiwKICAic3RhcnQiLAogICJzdGF0ZSIsCiAgInN0YXkiLAogICJzdGVhayIsCiAgInN0ZWVsIiwKICAic3RlbSIsCiAgInN0ZXAiLAogICJzdGVyZW8iLAogICJzdGljayIsCiAgInN0aWxsIiwKICAic3RpbmciLAogICJzdG9jayIsCiAgInN0b21hY2giLAogICJzdG9uZSIsCiAgInN0b29sIiwKICAic3RvcnkiLAogICJzdG92ZSIsCiAgInN0cmF0ZWd5IiwKICAic3RyZWV0IiwKICAic3RyaWtlIiwKICAic3Ryb25nIiwKICAic3RydWdnbGUiLAogICJzdHVkZW50IiwKICAic3R1ZmYiLAogICJzdHVtYmxlIiwKICAic3R5bGUiLAogICJzdWJqZWN0IiwKICAic3VibWl0IiwKICAic3Vid2F5IiwKICAic3VjY2VzcyIsCiAgInN1Y2giLAogICJzdWRkZW4iLAogICJzdWZmZXIiLAogICJzdWdhciIsCiAgInN1Z2dlc3QiLAogICJzdWl0IiwKICAic3VtbWVyIiwKICAic3VuIiwKICAic3VubnkiLAogICJzdW5zZXQiLAogICJzdXBlciIsCiAgInN1cHBseSIsCiAgInN1cHJlbWUiLAogICJzdXJlIiwKICAic3VyZmFjZSIsCiAgInN1cmdlIiwKICAic3VycHJpc2UiLAogICJzdXJyb3VuZCIsCiAgInN1cnZleSIsCiAgInN1c3BlY3QiLAogICJzdXN0YWluIiwKICAic3dhbGxvdyIsCiAgInN3YW1wIiwKICAic3dhcCIsCiAgInN3YXJtIiwKICAic3dlYXIiLAogICJzd2VldCIsCiAgInN3aWZ0IiwKICAic3dpbSIsCiAgInN3aW5nIiwKICAic3dpdGNoIiwKICAic3dvcmQiLAogICJzeW1ib2wiLAogICJzeW1wdG9tIiwKICAic3lydXAiLAogICJzeXN0ZW0iLAogICJ0YWJsZSIsCiAgInRhY2tsZSIsCiAgInRhZyIsCiAgInRhaWwiLAogICJ0YWxlbnQiLAogICJ0YWxrIiwKICAidGFuayIsCiAgInRhcGUiLAogICJ0YXJnZXQiLAogICJ0YXNrIiwKICAidGFzdGUiLAogICJ0YXR0b28iLAogICJ0YXhpIiwKICAidGVhY2giLAogICJ0ZWFtIiwKICAidGVsbCIsCiAgInRlbiIsCiAgInRlbmFudCIsCiAgInRlbm5pcyIsCiAgInRlbnQiLAogICJ0ZXJtIiwKICAidGVzdCIsCiAgInRleHQiLAogICJ0aGFuayIsCiAgInRoYXQiLAogICJ0aGVtZSIsCiAgInRoZW4iLAogICJ0aGVvcnkiLAogICJ0aGVyZSIsCiAgInRoZXkiLAogICJ0aGluZyIsCiAgInRoaXMiLAogICJ0aG91Z2h0IiwKICAidGhyZWUiLAogICJ0aHJpdmUiLAogICJ0aHJvdyIsCiAgInRodW1iIiwKICAidGh1bmRlciIsCiAgInRpY2tldCIsCiAgInRpZGUiLAogICJ0aWdlciIsCiAgInRpbHQiLAogICJ0aW1iZXIiLAogICJ0aW1lIiwKICAidGlueSIsCiAgInRpcCIsCiAgInRpcmVkIiwKICAidGlzc3VlIiwKICAidGl0bGUiLAogICJ0b2FzdCIsCiAgInRvYmFjY28iLAogICJ0b2RheSIsCiAgInRvZGRsZXIiLAogICJ0b2UiLAogICJ0b2dldGhlciIsCiAgInRvaWxldCIsCiAgInRva2VuIiwKICAidG9tYXRvIiwKICAidG9tb3Jyb3ciLAogICJ0b25lIiwKICAidG9uZ3VlIiwKICAidG9uaWdodCIsCiAgInRvb2wiLAogICJ0b290aCIsCiAgInRvcCIsCiAgInRvcGljIiwKICAidG9wcGxlIiwKICAidG9yY2giLAogICJ0b3JuYWRvIiwKICAidG9ydG9pc2UiLAogICJ0b3NzIiwKICAidG90YWwiLAogICJ0b3VyaXN0IiwKICAidG93YXJkIiwKICAidG93ZXIiLAogICJ0b3duIiwKICAidG95IiwKICAidHJhY2siLAogICJ0cmFkZSIsCiAgInRyYWZmaWMiLAogICJ0cmFnaWMiLAogICJ0cmFpbiIsCiAgInRyYW5zZmVyIiwKICAidHJhcCIsCiAgInRyYXNoIiwKICAidHJhdmVsIiwKICAidHJheSIsCiAgInRyZWF0IiwKICAidHJlZSIsCiAgInRyZW5kIiwKICAidHJpYWwiLAogICJ0cmliZSIsCiAgInRyaWNrIiwKICAidHJpZ2dlciIsCiAgInRyaW0iLAogICJ0cmlwIiwKICAidHJvcGh5IiwKICAidHJvdWJsZSIsCiAgInRydWNrIiwKICAidHJ1ZSIsCiAgInRydWx5IiwKICAidHJ1bXBldCIsCiAgInRydXN0IiwKICAidHJ1dGgiLAogICJ0cnkiLAogICJ0dWJlIiwKICAidHVpdGlvbiIsCiAgInR1bWJsZSIsCiAgInR1bmEiLAogICJ0dW5uZWwiLAogICJ0dXJrZXkiLAogICJ0dXJuIiwKICAidHVydGxlIiwKICAidHdlbHZlIiwKICAidHdlbnR5IiwKICAidHdpY2UiLAogICJ0d2luIiwKICAidHdpc3QiLAogICJ0d28iLAogICJ0eXBlIiwKICAidHlwaWNhbCIsCiAgInVnbHkiLAogICJ1bWJyZWxsYSIsCiAgInVuYWJsZSIsCiAgInVuYXdhcmUiLAogICJ1bmNsZSIsCiAgInVuY292ZXIiLAogICJ1bmRlciIsCiAgInVuZG8iLAogICJ1bmZhaXIiLAogICJ1bmZvbGQiLAogICJ1bmhhcHB5IiwKICAidW5pZm9ybSIsCiAgInVuaXF1ZSIsCiAgInVuaXQiLAogICJ1bml2ZXJzZSIsCiAgInVua25vd24iLAogICJ1bmxvY2siLAogICJ1bnRpbCIsCiAgInVudXN1YWwiLAogICJ1bnZlaWwiLAogICJ1cGRhdGUiLAogICJ1cGdyYWRlIiwKICAidXBob2xkIiwKICAidXBvbiIsCiAgInVwcGVyIiwKICAidXBzZXQiLAogICJ1cmJhbiIsCiAgInVyZ2UiLAogICJ1c2FnZSIsCiAgInVzZSIsCiAgInVzZWQiLAogICJ1c2VmdWwiLAogICJ1c2VsZXNzIiwKICAidXN1YWwiLAogICJ1dGlsaXR5IiwKICAidmFjYW50IiwKICAidmFjdXVtIiwKICAidmFndWUiLAogICJ2YWxpZCIsCiAgInZhbGxleSIsCiAgInZhbHZlIiwKICAidmFuIiwKICAidmFuaXNoIiwKICAidmFwb3IiLAogICJ2YXJpb3VzIiwKICAidmFzdCIsCiAgInZhdWx0IiwKICAidmVoaWNsZSIsCiAgInZlbHZldCIsCiAgInZlbmRvciIsCiAgInZlbnR1cmUiLAogICJ2ZW51ZSIsCiAgInZlcmIiLAogICJ2ZXJpZnkiLAogICJ2ZXJzaW9uIiwKICAidmVyeSIsCiAgInZlc3NlbCIsCiAgInZldGVyYW4iLAogICJ2aWFibGUiLAogICJ2aWJyYW50IiwKICAidmljaW91cyIsCiAgInZpY3RvcnkiLAogICJ2aWRlbyIsCiAgInZpZXciLAogICJ2aWxsYWdlIiwKICAidmludGFnZSIsCiAgInZpb2xpbiIsCiAgInZpcnR1YWwiLAogICJ2aXJ1cyIsCiAgInZpc2EiLAogICJ2aXNpdCIsCiAgInZpc3VhbCIsCiAgInZpdGFsIiwKICAidml2aWQiLAogICJ2b2NhbCIsCiAgInZvaWNlIiwKICAidm9pZCIsCiAgInZvbGNhbm8iLAogICJ2b2x1bWUiLAogICJ2b3RlIiwKICAidm95YWdlIiwKICAid2FnZSIsCiAgIndhZ29uIiwKICAid2FpdCIsCiAgIndhbGsiLAogICJ3YWxsIiwKICAid2FsbnV0IiwKICAid2FudCIsCiAgIndhcmZhcmUiLAogICJ3YXJtIiwKICAid2FycmlvciIsCiAgIndhc2giLAogICJ3YXNwIiwKICAid2FzdGUiLAogICJ3YXRlciIsCiAgIndhdmUiLAogICJ3YXkiLAogICJ3ZWFsdGgiLAogICJ3ZWFwb24iLAogICJ3ZWFyIiwKICAid2Vhc2VsIiwKICAid2VhdGhlciIsCiAgIndlYiIsCiAgIndlZGRpbmciLAogICJ3ZWVrZW5kIiwKICAid2VpcmQiLAogICJ3ZWxjb21lIiwKICAid2VzdCIsCiAgIndldCIsCiAgIndoYWxlIiwKICAid2hhdCIsCiAgIndoZWF0IiwKICAid2hlZWwiLAogICJ3aGVuIiwKICAid2hlcmUiLAogICJ3aGlwIiwKICAid2hpc3BlciIsCiAgIndpZGUiLAogICJ3aWR0aCIsCiAgIndpZmUiLAogICJ3aWxkIiwKICAid2lsbCIsCiAgIndpbiIsCiAgIndpbmRvdyIsCiAgIndpbmUiLAogICJ3aW5nIiwKICAid2luayIsCiAgIndpbm5lciIsCiAgIndpbnRlciIsCiAgIndpcmUiLAogICJ3aXNkb20iLAogICJ3aXNlIiwKICAid2lzaCIsCiAgIndpdG5lc3MiLAogICJ3b2xmIiwKICAid29tYW4iLAogICJ3b25kZXIiLAogICJ3b29kIiwKICAid29vbCIsCiAgIndvcmQiLAogICJ3b3JrIiwKICAid29ybGQiLAogICJ3b3JyeSIsCiAgIndvcnRoIiwKICAid3JhcCIsCiAgIndyZWNrIiwKICAid3Jlc3RsZSIsCiAgIndyaXN0IiwKICAid3JpdGUiLAogICJ3cm9uZyIsCiAgInlhcmQiLAogICJ5ZWFyIiwKICAieWVsbG93IiwKICAieW91IiwKICAieW91bmciLAogICJ5b3V0aCIsCiAgInplYnJhIiwKICAiemVybyIsCiAgInpvbmUiLAogICJ6b28iCl0KCn0se31dLDIzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBSZWZlcmVuY2UgaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYmlwcy9ibG9iL21hc3Rlci9iaXAtMDA2Ni5tZWRpYXdpa2kKLy8gRm9ybWF0OiAweDMwIFt0b3RhbC1sZW5ndGhdIDB4MDIgW1ItbGVuZ3RoXSBbUl0gMHgwMiBbUy1sZW5ndGhdIFtTXQovLyBOT1RFOiBTSUdIQVNIIGJ5dGUgaWdub3JlZCBBTkQgcmVzdHJpY3RlZCwgdHJ1bmNhdGUgYmVmb3JlIHVzZQoKZnVuY3Rpb24gY2hlY2sgKGJ1ZmZlcikgewogIGlmIChidWZmZXIubGVuZ3RoIDwgOCkgcmV0dXJuIGZhbHNlCiAgaWYgKGJ1ZmZlci5sZW5ndGggPiA3MikgcmV0dXJuIGZhbHNlCiAgaWYgKGJ1ZmZlclswXSAhPT0gMHgzMCkgcmV0dXJuIGZhbHNlCiAgaWYgKGJ1ZmZlclsxXSAhPT0gYnVmZmVyLmxlbmd0aCAtIDIpIHJldHVybiBmYWxzZQogIGlmIChidWZmZXJbMl0gIT09IDB4MDIpIHJldHVybiBmYWxzZQoKICB2YXIgbGVuUiA9IGJ1ZmZlclszXQogIGlmIChsZW5SID09PSAwKSByZXR1cm4gZmFsc2UKICBpZiAoNSArIGxlblIgPj0gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIGZhbHNlCiAgaWYgKGJ1ZmZlcls0ICsgbGVuUl0gIT09IDB4MDIpIHJldHVybiBmYWxzZQoKICB2YXIgbGVuUyA9IGJ1ZmZlcls1ICsgbGVuUl0KICBpZiAobGVuUyA9PT0gMCkgcmV0dXJuIGZhbHNlCiAgaWYgKCg2ICsgbGVuUiArIGxlblMpICE9PSBidWZmZXIubGVuZ3RoKSByZXR1cm4gZmFsc2UKCiAgaWYgKGJ1ZmZlcls0XSAmIDB4ODApIHJldHVybiBmYWxzZQogIGlmIChsZW5SID4gMSAmJiAoYnVmZmVyWzRdID09PSAweDAwKSAmJiAhKGJ1ZmZlcls1XSAmIDB4ODApKSByZXR1cm4gZmFsc2UKCiAgaWYgKGJ1ZmZlcltsZW5SICsgNl0gJiAweDgwKSByZXR1cm4gZmFsc2UKICBpZiAobGVuUyA+IDEgJiYgKGJ1ZmZlcltsZW5SICsgNl0gPT09IDB4MDApICYmICEoYnVmZmVyW2xlblIgKyA3XSAmIDB4ODApKSByZXR1cm4gZmFsc2UKICByZXR1cm4gdHJ1ZQp9CgpmdW5jdGlvbiBkZWNvZGUgKGJ1ZmZlcikgewogIGlmIChidWZmZXIubGVuZ3RoIDwgOCkgdGhyb3cgbmV3IEVycm9yKCdERVIgc2VxdWVuY2UgbGVuZ3RoIGlzIHRvbyBzaG9ydCcpCiAgaWYgKGJ1ZmZlci5sZW5ndGggPiA3MikgdGhyb3cgbmV3IEVycm9yKCdERVIgc2VxdWVuY2UgbGVuZ3RoIGlzIHRvbyBsb25nJykKICBpZiAoYnVmZmVyWzBdICE9PSAweDMwKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIERFUiBzZXF1ZW5jZScpCiAgaWYgKGJ1ZmZlclsxXSAhPT0gYnVmZmVyLmxlbmd0aCAtIDIpIHRocm93IG5ldyBFcnJvcignREVSIHNlcXVlbmNlIGxlbmd0aCBpcyBpbnZhbGlkJykKICBpZiAoYnVmZmVyWzJdICE9PSAweDAyKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIERFUiBpbnRlZ2VyJykKCiAgdmFyIGxlblIgPSBidWZmZXJbM10KICBpZiAobGVuUiA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdSIGxlbmd0aCBpcyB6ZXJvJykKICBpZiAoNSArIGxlblIgPj0gYnVmZmVyLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdSIGxlbmd0aCBpcyB0b28gbG9uZycpCiAgaWYgKGJ1ZmZlcls0ICsgbGVuUl0gIT09IDB4MDIpIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgREVSIGludGVnZXIgKDIpJykKCiAgdmFyIGxlblMgPSBidWZmZXJbNSArIGxlblJdCiAgaWYgKGxlblMgPT09IDApIHRocm93IG5ldyBFcnJvcignUyBsZW5ndGggaXMgemVybycpCiAgaWYgKCg2ICsgbGVuUiArIGxlblMpICE9PSBidWZmZXIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1MgbGVuZ3RoIGlzIGludmFsaWQnKQoKICBpZiAoYnVmZmVyWzRdICYgMHg4MCkgdGhyb3cgbmV3IEVycm9yKCdSIHZhbHVlIGlzIG5lZ2F0aXZlJykKICBpZiAobGVuUiA+IDEgJiYgKGJ1ZmZlcls0XSA9PT0gMHgwMCkgJiYgIShidWZmZXJbNV0gJiAweDgwKSkgdGhyb3cgbmV3IEVycm9yKCdSIHZhbHVlIGV4Y2Vzc2l2ZWx5IHBhZGRlZCcpCgogIGlmIChidWZmZXJbbGVuUiArIDZdICYgMHg4MCkgdGhyb3cgbmV3IEVycm9yKCdTIHZhbHVlIGlzIG5lZ2F0aXZlJykKICBpZiAobGVuUyA+IDEgJiYgKGJ1ZmZlcltsZW5SICsgNl0gPT09IDB4MDApICYmICEoYnVmZmVyW2xlblIgKyA3XSAmIDB4ODApKSB0aHJvdyBuZXcgRXJyb3IoJ1MgdmFsdWUgZXhjZXNzaXZlbHkgcGFkZGVkJykKCiAgLy8gbm9uLUJJUDY2IC0gZXh0cmFjdCBSLCBTIHZhbHVlcwogIHJldHVybiB7CiAgICByOiBidWZmZXIuc2xpY2UoNCwgNCArIGxlblIpLAogICAgczogYnVmZmVyLnNsaWNlKDYgKyBsZW5SKQogIH0KfQoKLyoKICogRXhwZWN0cyByIGFuZCBzIHRvIGJlIHBvc2l0aXZlIERFUiBpbnRlZ2Vycy4KICoKICogVGhlIERFUiBmb3JtYXQgdXNlcyB0aGUgbW9zdCBzaWduaWZpY2FudCBiaXQgYXMgYSBzaWduIGJpdCAoJiAweDgwKS4KICogSWYgdGhlIHNpZ25pZmljYW50IGJpdCBpcyBzZXQgQU5EIHRoZSBpbnRlZ2VyIGlzIHBvc2l0aXZlLCBhIDB4MDAgaXMgcHJlcGVuZGVkLgogKgogKiBFeGFtcGxlczoKICoKICogICAgICAwID0+ICAgICAweDAwCiAqICAgICAgMSA9PiAgICAgMHgwMQogKiAgICAgLTEgPT4gICAgIDB4ZmYKICogICAgMTI3ID0+ICAgICAweDdmCiAqICAgLTEyNyA9PiAgICAgMHg4MQogKiAgICAxMjggPT4gICAweDAwODAKICogICAtMTI4ID0+ICAgICAweDgwCiAqICAgIDI1NSA9PiAgIDB4MDBmZgogKiAgIC0yNTUgPT4gICAweGZmMDEKICogIDE2MzAwID0+ICAgMHgzZmFjCiAqIC0xNjMwMCA9PiAgIDB4YzA1NAogKiAgNjIzMDAgPT4gMHgwMGYzNWMKICogLTYyMzAwID0+IDB4ZmYwY2E0CiovCmZ1bmN0aW9uIGVuY29kZSAociwgcykgewogIHZhciBsZW5SID0gci5sZW5ndGgKICB2YXIgbGVuUyA9IHMubGVuZ3RoCiAgaWYgKGxlblIgPT09IDApIHRocm93IG5ldyBFcnJvcignUiBsZW5ndGggaXMgemVybycpCiAgaWYgKGxlblMgPT09IDApIHRocm93IG5ldyBFcnJvcignUyBsZW5ndGggaXMgemVybycpCiAgaWYgKGxlblIgPiAzMykgdGhyb3cgbmV3IEVycm9yKCdSIGxlbmd0aCBpcyB0b28gbG9uZycpCiAgaWYgKGxlblMgPiAzMykgdGhyb3cgbmV3IEVycm9yKCdTIGxlbmd0aCBpcyB0b28gbG9uZycpCiAgaWYgKHJbMF0gJiAweDgwKSB0aHJvdyBuZXcgRXJyb3IoJ1IgdmFsdWUgaXMgbmVnYXRpdmUnKQogIGlmIChzWzBdICYgMHg4MCkgdGhyb3cgbmV3IEVycm9yKCdTIHZhbHVlIGlzIG5lZ2F0aXZlJykKICBpZiAobGVuUiA+IDEgJiYgKHJbMF0gPT09IDB4MDApICYmICEoclsxXSAmIDB4ODApKSB0aHJvdyBuZXcgRXJyb3IoJ1IgdmFsdWUgZXhjZXNzaXZlbHkgcGFkZGVkJykKICBpZiAobGVuUyA+IDEgJiYgKHNbMF0gPT09IDB4MDApICYmICEoc1sxXSAmIDB4ODApKSB0aHJvdyBuZXcgRXJyb3IoJ1MgdmFsdWUgZXhjZXNzaXZlbHkgcGFkZGVkJykKCiAgdmFyIHNpZ25hdHVyZSA9IG5ldyBCdWZmZXIoNiArIGxlblIgKyBsZW5TKQoKICAvLyAweDMwIFt0b3RhbC1sZW5ndGhdIDB4MDIgW1ItbGVuZ3RoXSBbUl0gMHgwMiBbUy1sZW5ndGhdIFtTXQogIHNpZ25hdHVyZVswXSA9IDB4MzAKICBzaWduYXR1cmVbMV0gPSBzaWduYXR1cmUubGVuZ3RoIC0gMgogIHNpZ25hdHVyZVsyXSA9IDB4MDIKICBzaWduYXR1cmVbM10gPSByLmxlbmd0aAogIHIuY29weShzaWduYXR1cmUsIDQpCiAgc2lnbmF0dXJlWzQgKyBsZW5SXSA9IDB4MDIKICBzaWduYXR1cmVbNSArIGxlblJdID0gcy5sZW5ndGgKICBzLmNvcHkoc2lnbmF0dXJlLCA2ICsgbGVuUikKCiAgcmV0dXJuIHNpZ25hdHVyZQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBjaGVjazogY2hlY2ssCiAgZGVjb2RlOiBkZWNvZGUsCiAgZW5jb2RlOiBlbmNvZGUKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzB9XSwyNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJzNThjaGVjayA9IHJlcXVpcmUoJ2JzNThjaGVjaycpCnZhciBic2NyaXB0ID0gcmVxdWlyZSgnLi9zY3JpcHQnKQp2YXIgbmV0d29ya3MgPSByZXF1aXJlKCcuL25ldHdvcmtzJykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQoKZnVuY3Rpb24gZnJvbUJhc2U1OENoZWNrIChhZGRyZXNzKSB7CiAgdmFyIHBheWxvYWQgPSBiczU4Y2hlY2suZGVjb2RlKGFkZHJlc3MpCiAgaWYgKHBheWxvYWQubGVuZ3RoIDwgMjEpIHRocm93IG5ldyBUeXBlRXJyb3IoYWRkcmVzcyArICcgaXMgdG9vIHNob3J0JykKICBpZiAocGF5bG9hZC5sZW5ndGggPiAyMSkgdGhyb3cgbmV3IFR5cGVFcnJvcihhZGRyZXNzICsgJyBpcyB0b28gbG9uZycpCgogIHZhciB2ZXJzaW9uID0gcGF5bG9hZFswXQogIHZhciBoYXNoID0gcGF5bG9hZC5zbGljZSgxKQoKICByZXR1cm4geyBoYXNoOiBoYXNoLCB2ZXJzaW9uOiB2ZXJzaW9uIH0KfQoKZnVuY3Rpb24gZnJvbU91dHB1dFNjcmlwdCAoc2NyaXB0UHViS2V5LCBuZXR3b3JrKSB7CiAgbmV0d29yayA9IG5ldHdvcmsgfHwgbmV0d29ya3MuYml0Y29pbgoKICBpZiAoYnNjcmlwdC5pc1B1YktleUhhc2hPdXRwdXQoc2NyaXB0UHViS2V5KSkgcmV0dXJuIHRvQmFzZTU4Q2hlY2soYnNjcmlwdC5jb21waWxlKHNjcmlwdFB1YktleSkuc2xpY2UoMywgMjMpLCBuZXR3b3JrLnB1YktleUhhc2gpCiAgaWYgKGJzY3JpcHQuaXNTY3JpcHRIYXNoT3V0cHV0KHNjcmlwdFB1YktleSkpIHJldHVybiB0b0Jhc2U1OENoZWNrKGJzY3JpcHQuY29tcGlsZShzY3JpcHRQdWJLZXkpLnNsaWNlKDIsIDIyKSwgbmV0d29yay5zY3JpcHRIYXNoKQoKICB0aHJvdyBuZXcgRXJyb3IoYnNjcmlwdC50b0FTTShzY3JpcHRQdWJLZXkpICsgJyBoYXMgbm8gbWF0Y2hpbmcgQWRkcmVzcycpCn0KCmZ1bmN0aW9uIHRvQmFzZTU4Q2hlY2sgKGhhc2gsIHZlcnNpb24pIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuSGFzaDE2MGJpdCwgdHlwZXMuVUludDgpLCBhcmd1bWVudHMpCgogIHZhciBwYXlsb2FkID0gbmV3IEJ1ZmZlcigyMSkKICBwYXlsb2FkLndyaXRlVUludDgodmVyc2lvbiwgMCkKICBoYXNoLmNvcHkocGF5bG9hZCwgMSkKCiAgcmV0dXJuIGJzNThjaGVjay5lbmNvZGUocGF5bG9hZCkKfQoKZnVuY3Rpb24gdG9PdXRwdXRTY3JpcHQgKGFkZHJlc3MsIG5ldHdvcmspIHsKICBuZXR3b3JrID0gbmV0d29yayB8fCBuZXR3b3Jrcy5iaXRjb2luCgogIHZhciBkZWNvZGUgPSBmcm9tQmFzZTU4Q2hlY2soYWRkcmVzcykKICBpZiAoZGVjb2RlLnZlcnNpb24gPT09IG5ldHdvcmsucHViS2V5SGFzaCkgcmV0dXJuIGJzY3JpcHQucHViS2V5SGFzaE91dHB1dChkZWNvZGUuaGFzaCkKICBpZiAoZGVjb2RlLnZlcnNpb24gPT09IG5ldHdvcmsuc2NyaXB0SGFzaCkgcmV0dXJuIGJzY3JpcHQuc2NyaXB0SGFzaE91dHB1dChkZWNvZGUuaGFzaCkKCiAgdGhyb3cgbmV3IEVycm9yKGFkZHJlc3MgKyAnIGhhcyBubyBtYXRjaGluZyBTY3JpcHQnKQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBmcm9tQmFzZTU4Q2hlY2s6IGZyb21CYXNlNThDaGVjaywKICBmcm9tT3V0cHV0U2NyaXB0OiBmcm9tT3V0cHV0U2NyaXB0LAogIHRvQmFzZTU4Q2hlY2s6IHRvQmFzZTU4Q2hlY2ssCiAgdG9PdXRwdXRTY3JpcHQ6IHRvT3V0cHV0U2NyaXB0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL25ldHdvcmtzIjozNCwiLi9zY3JpcHQiOjM2LCIuL3R5cGVzIjo0MCwiYnM1OGNoZWNrIjo3NCwiYnVmZmVyIjo3MCwidHlwZWZvcmNlIjoxNzJ9XSwyNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJ1ZmZlcnV0aWxzID0gcmVxdWlyZSgnLi9idWZmZXJ1dGlscycpCnZhciBiY3J5cHRvID0gcmVxdWlyZSgnLi9jcnlwdG8nKQp2YXIgY29tcGFyZSA9IHJlcXVpcmUoJ2J1ZmZlci1jb21wYXJlJykKCnZhciBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb24nKQoKZnVuY3Rpb24gQmxvY2sgKCkgewogIHRoaXMudmVyc2lvbiA9IDEKICB0aGlzLnByZXZIYXNoID0gbnVsbAogIHRoaXMubWVya2xlUm9vdCA9IG51bGwKICB0aGlzLnRpbWVzdGFtcCA9IDAKICB0aGlzLmJpdHMgPSAwCiAgdGhpcy5ub25jZSA9IDAKfQoKQmxvY2suZnJvbUJ1ZmZlciA9IGZ1bmN0aW9uIChidWZmZXIpIHsKICBpZiAoYnVmZmVyLmxlbmd0aCA8IDgwKSB0aHJvdyBuZXcgRXJyb3IoJ0J1ZmZlciB0b28gc21hbGwgKDwgODAgYnl0ZXMpJykKCiAgdmFyIG9mZnNldCA9IDAKICBmdW5jdGlvbiByZWFkU2xpY2UgKG4pIHsKICAgIG9mZnNldCArPSBuCiAgICByZXR1cm4gYnVmZmVyLnNsaWNlKG9mZnNldCAtIG4sIG9mZnNldCkKICB9CgogIGZ1bmN0aW9uIHJlYWRVSW50MzIgKCkgewogICAgdmFyIGkgPSBidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCkKICAgIG9mZnNldCArPSA0CiAgICByZXR1cm4gaQogIH0KCiAgdmFyIGJsb2NrID0gbmV3IEJsb2NrKCkKICBibG9jay52ZXJzaW9uID0gcmVhZFVJbnQzMigpCiAgYmxvY2sucHJldkhhc2ggPSByZWFkU2xpY2UoMzIpCiAgYmxvY2subWVya2xlUm9vdCA9IHJlYWRTbGljZSgzMikKICBibG9jay50aW1lc3RhbXAgPSByZWFkVUludDMyKCkKICBibG9jay5iaXRzID0gcmVhZFVJbnQzMigpCiAgYmxvY2subm9uY2UgPSByZWFkVUludDMyKCkKCiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDgwKSByZXR1cm4gYmxvY2sKCiAgZnVuY3Rpb24gcmVhZFZhckludCAoKSB7CiAgICB2YXIgdmkgPSBidWZmZXJ1dGlscy5yZWFkVmFySW50KGJ1ZmZlciwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IHZpLnNpemUKICAgIHJldHVybiB2aS5udW1iZXIKICB9CgogIGZ1bmN0aW9uIHJlYWRUcmFuc2FjdGlvbiAoKSB7CiAgICB2YXIgdHggPSBUcmFuc2FjdGlvbi5mcm9tQnVmZmVyKGJ1ZmZlci5zbGljZShvZmZzZXQpLCB0cnVlKQoKICAgIG9mZnNldCArPSB0eC5ieXRlTGVuZ3RoKCkKICAgIHJldHVybiB0eAogIH0KCiAgdmFyIG5UcmFuc2FjdGlvbnMgPSByZWFkVmFySW50KCkKICBibG9jay50cmFuc2FjdGlvbnMgPSBbXQoKICBmb3IgKHZhciBpID0gMDsgaSA8IG5UcmFuc2FjdGlvbnM7ICsraSkgewogICAgdmFyIHR4ID0gcmVhZFRyYW5zYWN0aW9uKCkKICAgIGJsb2NrLnRyYW5zYWN0aW9ucy5wdXNoKHR4KQogIH0KCiAgcmV0dXJuIGJsb2NrCn0KCkJsb2NrLmZyb21IZXggPSBmdW5jdGlvbiAoaGV4KSB7CiAgcmV0dXJuIEJsb2NrLmZyb21CdWZmZXIobmV3IEJ1ZmZlcihoZXgsICdoZXgnKSkKfQoKQmxvY2sucHJvdG90eXBlLmdldEhhc2ggPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGJjcnlwdG8uaGFzaDI1Nih0aGlzLnRvQnVmZmVyKHRydWUpKQp9CgpCbG9jay5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIFtdLnJldmVyc2UuY2FsbCh0aGlzLmdldEhhc2goKSkudG9TdHJpbmcoJ2hleCcpCn0KCkJsb2NrLnByb3RvdHlwZS5nZXRVVENEYXRlID0gZnVuY3Rpb24gKCkgewogIHZhciBkYXRlID0gbmV3IERhdGUoMCkgLy8gZXBvY2gKICBkYXRlLnNldFVUQ1NlY29uZHModGhpcy50aW1lc3RhbXApCgogIHJldHVybiBkYXRlCn0KCkJsb2NrLnByb3RvdHlwZS50b0J1ZmZlciA9IGZ1bmN0aW9uIChoZWFkZXJzT25seSkgewogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKDgwKQoKICB2YXIgb2Zmc2V0ID0gMAogIGZ1bmN0aW9uIHdyaXRlU2xpY2UgKHNsaWNlKSB7CiAgICBzbGljZS5jb3B5KGJ1ZmZlciwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IHNsaWNlLmxlbmd0aAogIH0KCiAgZnVuY3Rpb24gd3JpdGVVSW50MzIgKGkpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQzMkxFKGksIG9mZnNldCkKICAgIG9mZnNldCArPSA0CiAgfQoKICB3cml0ZVVJbnQzMih0aGlzLnZlcnNpb24pCiAgd3JpdGVTbGljZSh0aGlzLnByZXZIYXNoKQogIHdyaXRlU2xpY2UodGhpcy5tZXJrbGVSb290KQogIHdyaXRlVUludDMyKHRoaXMudGltZXN0YW1wKQogIHdyaXRlVUludDMyKHRoaXMuYml0cykKICB3cml0ZVVJbnQzMih0aGlzLm5vbmNlKQoKICBpZiAoaGVhZGVyc09ubHkgfHwgIXRoaXMudHJhbnNhY3Rpb25zKSByZXR1cm4gYnVmZmVyCgogIHZhciB0eExlbkJ1ZmZlciA9IGJ1ZmZlcnV0aWxzLnZhckludEJ1ZmZlcih0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGgpCiAgdmFyIHR4QnVmZmVycyA9IHRoaXMudHJhbnNhY3Rpb25zLm1hcChmdW5jdGlvbiAodHgpIHsKICAgIHJldHVybiB0eC50b0J1ZmZlcigpCiAgfSkKCiAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoW2J1ZmZlciwgdHhMZW5CdWZmZXJdLmNvbmNhdCh0eEJ1ZmZlcnMpKQp9CgpCbG9jay5wcm90b3R5cGUudG9IZXggPSBmdW5jdGlvbiAoaGVhZGVyc09ubHkpIHsKICByZXR1cm4gdGhpcy50b0J1ZmZlcihoZWFkZXJzT25seSkudG9TdHJpbmcoJ2hleCcpCn0KCkJsb2NrLmNhbGN1bGF0ZVRhcmdldCA9IGZ1bmN0aW9uIChiaXRzKSB7CiAgdmFyIGV4cG9uZW50ID0gKChiaXRzICYgMHhmZjAwMDAwMCkgPj4gMjQpIC0gMwogIHZhciBtYW50aXNzYSA9IGJpdHMgJiAweDAwN2ZmZmZmCiAgdmFyIGkgPSAzMSAtIGV4cG9uZW50CgogIHZhciB0YXJnZXQgPSBuZXcgQnVmZmVyKDMyKQogIHRhcmdldC5maWxsKDApCgogIHRhcmdldFtpXSA9IG1hbnRpc3NhICYgMHhmZgogIHRhcmdldFtpIC0gMV0gPSBtYW50aXNzYSA+PiA4CiAgdGFyZ2V0W2kgLSAyXSA9IG1hbnRpc3NhID4+IDE2CiAgdGFyZ2V0W2kgLSAzXSA9IG1hbnRpc3NhID4+IDI0CgogIHJldHVybiB0YXJnZXQKfQoKQmxvY2sucHJvdG90eXBlLmNoZWNrUHJvb2ZPZldvcmsgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGhhc2ggPSBbXS5yZXZlcnNlLmNhbGwodGhpcy5nZXRIYXNoKCkpCiAgdmFyIHRhcmdldCA9IEJsb2NrLmNhbGN1bGF0ZVRhcmdldCh0aGlzLmJpdHMpCgogIHJldHVybiBjb21wYXJlKGhhc2gsIHRhcmdldCkgPD0gMAp9Cgptb2R1bGUuZXhwb3J0cyA9IEJsb2NrCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9idWZmZXJ1dGlscyI6MjYsIi4vY3J5cHRvIjoyNywiLi90cmFuc2FjdGlvbiI6MzgsImJ1ZmZlciI6NzAsImJ1ZmZlci1jb21wYXJlIjo3NX1dLDI2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgb3Bjb2RlcyA9IHJlcXVpcmUoJy4vb3Bjb2RlcycpCgovLyBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9ibG9iL21hc3Rlci9pbmRleC5qcyNMMTEyNwpmdW5jdGlvbiB2ZXJpZnVpbnQgKHZhbHVlLCBtYXgpIHsKICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3Qgd3JpdGUgYSBub24tbnVtYmVyIGFzIGEgbnVtYmVyJykKICBpZiAodmFsdWUgPCAwKSB0aHJvdyBuZXcgRXJyb3IoJ3NwZWNpZmllZCBhIG5lZ2F0aXZlIHZhbHVlIGZvciB3cml0aW5nIGFuIHVuc2lnbmVkIHZhbHVlJykKICBpZiAodmFsdWUgPiBtYXgpIHRocm93IG5ldyBFcnJvcigndmFsdWUgaXMgbGFyZ2VyIHRoYW4gbWF4aW11bSB2YWx1ZSBmb3IgdHlwZScpCiAgaWYgKE1hdGguZmxvb3IodmFsdWUpICE9PSB2YWx1ZSkgdGhyb3cgbmV3IEVycm9yKCd2YWx1ZSBoYXMgYSBmcmFjdGlvbmFsIGNvbXBvbmVudCcpCn0KCmZ1bmN0aW9uIHB1c2hEYXRhU2l6ZSAoaSkgewogIHJldHVybiBpIDwgb3Bjb2Rlcy5PUF9QVVNIREFUQTEgPyAxCiAgOiBpIDwgMHhmZiA/IDIKICA6IGkgPCAweGZmZmYgPyAzCiAgOiA1Cn0KCmZ1bmN0aW9uIHJlYWRQdXNoRGF0YUludCAoYnVmZmVyLCBvZmZzZXQpIHsKICB2YXIgb3Bjb2RlID0gYnVmZmVyLnJlYWRVSW50OChvZmZzZXQpCiAgdmFyIG51bWJlciwgc2l6ZQoKICAvLyB+NiBiaXQKICBpZiAob3Bjb2RlIDwgb3Bjb2Rlcy5PUF9QVVNIREFUQTEpIHsKICAgIG51bWJlciA9IG9wY29kZQogICAgc2l6ZSA9IDEKCiAgLy8gOCBiaXQKICB9IGVsc2UgaWYgKG9wY29kZSA9PT0gb3Bjb2Rlcy5PUF9QVVNIREFUQTEpIHsKICAgIGlmIChvZmZzZXQgKyAyID4gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGwKICAgIG51bWJlciA9IGJ1ZmZlci5yZWFkVUludDgob2Zmc2V0ICsgMSkKICAgIHNpemUgPSAyCgogIC8vIDE2IGJpdAogIH0gZWxzZSBpZiAob3Bjb2RlID09PSBvcGNvZGVzLk9QX1BVU0hEQVRBMikgewogICAgaWYgKG9mZnNldCArIDMgPiBidWZmZXIubGVuZ3RoKSByZXR1cm4gbnVsbAogICAgbnVtYmVyID0gYnVmZmVyLnJlYWRVSW50MTZMRShvZmZzZXQgKyAxKQogICAgc2l6ZSA9IDMKCiAgLy8gMzIgYml0CiAgfSBlbHNlIHsKICAgIGlmIChvZmZzZXQgKyA1ID4gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGwKICAgIGlmIChvcGNvZGUgIT09IG9wY29kZXMuT1BfUFVTSERBVEE0KSB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgb3Bjb2RlJykKCiAgICBudW1iZXIgPSBidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCArIDEpCiAgICBzaXplID0gNQogIH0KCiAgcmV0dXJuIHsKICAgIG9wY29kZTogb3Bjb2RlLAogICAgbnVtYmVyOiBudW1iZXIsCiAgICBzaXplOiBzaXplCiAgfQp9CgpmdW5jdGlvbiByZWFkVUludDY0TEUgKGJ1ZmZlciwgb2Zmc2V0KSB7CiAgdmFyIGEgPSBidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCkKICB2YXIgYiA9IGJ1ZmZlci5yZWFkVUludDMyTEUob2Zmc2V0ICsgNCkKICBiICo9IDB4MTAwMDAwMDAwCgogIHZlcmlmdWludChiICsgYSwgMHgwMDFmZmZmZmZmZmZmZmZmKQoKICByZXR1cm4gYiArIGEKfQoKZnVuY3Rpb24gcmVhZFZhckludCAoYnVmZmVyLCBvZmZzZXQpIHsKICB2YXIgdCA9IGJ1ZmZlci5yZWFkVUludDgob2Zmc2V0KQogIHZhciBudW1iZXIsIHNpemUKCiAgLy8gOCBiaXQKICBpZiAodCA8IDI1MykgewogICAgbnVtYmVyID0gdAogICAgc2l6ZSA9IDEKCiAgLy8gMTYgYml0CiAgfSBlbHNlIGlmICh0IDwgMjU0KSB7CiAgICBudW1iZXIgPSBidWZmZXIucmVhZFVJbnQxNkxFKG9mZnNldCArIDEpCiAgICBzaXplID0gMwoKICAvLyAzMiBiaXQKICB9IGVsc2UgaWYgKHQgPCAyNTUpIHsKICAgIG51bWJlciA9IGJ1ZmZlci5yZWFkVUludDMyTEUob2Zmc2V0ICsgMSkKICAgIHNpemUgPSA1CgogIC8vIDY0IGJpdAogIH0gZWxzZSB7CiAgICBudW1iZXIgPSByZWFkVUludDY0TEUoYnVmZmVyLCBvZmZzZXQgKyAxKQogICAgc2l6ZSA9IDkKICB9CgogIHJldHVybiB7CiAgICBudW1iZXI6IG51bWJlciwKICAgIHNpemU6IHNpemUKICB9Cn0KCmZ1bmN0aW9uIHdyaXRlUHVzaERhdGFJbnQgKGJ1ZmZlciwgbnVtYmVyLCBvZmZzZXQpIHsKICB2YXIgc2l6ZSA9IHB1c2hEYXRhU2l6ZShudW1iZXIpCgogIC8vIH42IGJpdAogIGlmIChzaXplID09PSAxKSB7CiAgICBidWZmZXIud3JpdGVVSW50OChudW1iZXIsIG9mZnNldCkKCiAgLy8gOCBiaXQKICB9IGVsc2UgaWYgKHNpemUgPT09IDIpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KG9wY29kZXMuT1BfUFVTSERBVEExLCBvZmZzZXQpCiAgICBidWZmZXIud3JpdGVVSW50OChudW1iZXIsIG9mZnNldCArIDEpCgogIC8vIDE2IGJpdAogIH0gZWxzZSBpZiAoc2l6ZSA9PT0gMykgewogICAgYnVmZmVyLndyaXRlVUludDgob3Bjb2Rlcy5PUF9QVVNIREFUQTIsIG9mZnNldCkKICAgIGJ1ZmZlci53cml0ZVVJbnQxNkxFKG51bWJlciwgb2Zmc2V0ICsgMSkKCiAgLy8gMzIgYml0CiAgfSBlbHNlIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KG9wY29kZXMuT1BfUFVTSERBVEE0LCBvZmZzZXQpCiAgICBidWZmZXIud3JpdGVVSW50MzJMRShudW1iZXIsIG9mZnNldCArIDEpCiAgfQoKICByZXR1cm4gc2l6ZQp9CgpmdW5jdGlvbiB3cml0ZVVJbnQ2NExFIChidWZmZXIsIHZhbHVlLCBvZmZzZXQpIHsKICB2ZXJpZnVpbnQodmFsdWUsIDB4MDAxZmZmZmZmZmZmZmZmZikKCiAgYnVmZmVyLndyaXRlSW50MzJMRSh2YWx1ZSAmIC0xLCBvZmZzZXQpCiAgYnVmZmVyLndyaXRlVUludDMyTEUoTWF0aC5mbG9vcih2YWx1ZSAvIDB4MTAwMDAwMDAwKSwgb2Zmc2V0ICsgNCkKfQoKZnVuY3Rpb24gdmFySW50U2l6ZSAoaSkgewogIHJldHVybiBpIDwgMjUzID8gMQogIDogaSA8IDB4MTAwMDAgPyAzCiAgOiBpIDwgMHgxMDAwMDAwMDAgPyA1CiAgOiA5Cn0KCmZ1bmN0aW9uIHdyaXRlVmFySW50IChidWZmZXIsIG51bWJlciwgb2Zmc2V0KSB7CiAgdmFyIHNpemUgPSB2YXJJbnRTaXplKG51bWJlcikKCiAgLy8gOCBiaXQKICBpZiAoc2l6ZSA9PT0gMSkgewogICAgYnVmZmVyLndyaXRlVUludDgobnVtYmVyLCBvZmZzZXQpCgogIC8vIDE2IGJpdAogIH0gZWxzZSBpZiAoc2l6ZSA9PT0gMykgewogICAgYnVmZmVyLndyaXRlVUludDgoMjUzLCBvZmZzZXQpCiAgICBidWZmZXIud3JpdGVVSW50MTZMRShudW1iZXIsIG9mZnNldCArIDEpCgogIC8vIDMyIGJpdAogIH0gZWxzZSBpZiAoc2l6ZSA9PT0gNSkgewogICAgYnVmZmVyLndyaXRlVUludDgoMjU0LCBvZmZzZXQpCiAgICBidWZmZXIud3JpdGVVSW50MzJMRShudW1iZXIsIG9mZnNldCArIDEpCgogIC8vIDY0IGJpdAogIH0gZWxzZSB7CiAgICBidWZmZXIud3JpdGVVSW50OCgyNTUsIG9mZnNldCkKICAgIHdyaXRlVUludDY0TEUoYnVmZmVyLCBudW1iZXIsIG9mZnNldCArIDEpCiAgfQoKICByZXR1cm4gc2l6ZQp9CgpmdW5jdGlvbiB2YXJJbnRCdWZmZXIgKGkpIHsKICB2YXIgc2l6ZSA9IHZhckludFNpemUoaSkKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcihzaXplKQogIHdyaXRlVmFySW50KGJ1ZmZlciwgaSwgMCkKCiAgcmV0dXJuIGJ1ZmZlcgp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBlcXVhbDogcmVxdWlyZSgnYnVmZmVyLWVxdWFscycpLAogIHB1c2hEYXRhU2l6ZTogcHVzaERhdGFTaXplLAogIHJlYWRQdXNoRGF0YUludDogcmVhZFB1c2hEYXRhSW50LAogIHJlYWRVSW50NjRMRTogcmVhZFVJbnQ2NExFLAogIHJlYWRWYXJJbnQ6IHJlYWRWYXJJbnQsCiAgcmV2ZXJzZTogcmVxdWlyZSgnYnVmZmVyLXJldmVyc2UnKSwKICB2YXJJbnRCdWZmZXI6IHZhckludEJ1ZmZlciwKICB2YXJJbnRTaXplOiB2YXJJbnRTaXplLAogIHdyaXRlUHVzaERhdGFJbnQ6IHdyaXRlUHVzaERhdGFJbnQsCiAgd3JpdGVVSW50NjRMRTogd3JpdGVVSW50NjRMRSwKICB3cml0ZVZhckludDogd3JpdGVWYXJJbnQKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vb3Bjb2RlcyI6MzUsImJ1ZmZlciI6NzAsImJ1ZmZlci1lcXVhbHMiOjc2LCJidWZmZXItcmV2ZXJzZSI6Nzd9XSwyNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBjcmVhdGVIYXNoID0gcmVxdWlyZSgnY3JlYXRlLWhhc2gnKQoKZnVuY3Rpb24gaGFzaDE2MCAoYnVmZmVyKSB7CiAgcmV0dXJuIHJpcGVtZDE2MChzaGEyNTYoYnVmZmVyKSkKfQoKZnVuY3Rpb24gaGFzaDI1NiAoYnVmZmVyKSB7CiAgcmV0dXJuIHNoYTI1NihzaGEyNTYoYnVmZmVyKSkKfQoKZnVuY3Rpb24gcmlwZW1kMTYwIChidWZmZXIpIHsKICByZXR1cm4gY3JlYXRlSGFzaCgncm1kMTYwJykudXBkYXRlKGJ1ZmZlcikuZGlnZXN0KCkKfQoKZnVuY3Rpb24gc2hhMSAoYnVmZmVyKSB7CiAgcmV0dXJuIGNyZWF0ZUhhc2goJ3NoYTEnKS51cGRhdGUoYnVmZmVyKS5kaWdlc3QoKQp9CgpmdW5jdGlvbiBzaGEyNTYgKGJ1ZmZlcikgewogIHJldHVybiBjcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUoYnVmZmVyKS5kaWdlc3QoKQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBoYXNoMTYwOiBoYXNoMTYwLAogIGhhc2gyNTY6IGhhc2gyNTYsCiAgcmlwZW1kMTYwOiByaXBlbWQxNjAsCiAgc2hhMTogc2hhMSwKICBzaGEyNTY6IHNoYTI1Ngp9Cgp9LHsiY3JlYXRlLWhhc2giOjgyfV0sMjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBjcmVhdGVIbWFjID0gcmVxdWlyZSgnY3JlYXRlLWhtYWMnKQp2YXIgdHlwZWZvcmNlID0gcmVxdWlyZSgndHlwZWZvcmNlJykKdmFyIHR5cGVzID0gcmVxdWlyZSgnLi90eXBlcycpCgp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJ2JpZ2knKQp2YXIgRUNTaWduYXR1cmUgPSByZXF1aXJlKCcuL2Vjc2lnbmF0dXJlJykKCnZhciBaRVJPID0gbmV3IEJ1ZmZlcihbMF0pCnZhciBPTkUgPSBuZXcgQnVmZmVyKFsxXSkKCnZhciBlY3VydmUgPSByZXF1aXJlKCdlY3VydmUnKQp2YXIgc2VjcDI1NmsxID0gZWN1cnZlLmdldEN1cnZlQnlOYW1lKCdzZWNwMjU2azEnKQoKLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY5Nzkjc2VjdGlvbi0zLjIKZnVuY3Rpb24gZGV0ZXJtaW5pc3RpY0dlbmVyYXRlSyAoaGFzaCwgeCwgY2hlY2tTaWcpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUoCiAgICB0eXBlcy5IYXNoMjU2Yml0LAogICAgdHlwZXMuQnVmZmVyMjU2Yml0LAogICAgdHlwZXMuRnVuY3Rpb24KICApLCBhcmd1bWVudHMpCgogIHZhciBrID0gbmV3IEJ1ZmZlcigzMikKICB2YXIgdiA9IG5ldyBCdWZmZXIoMzIpCgogIC8vIFN0ZXAgQSwgaWdub3JlZCBhcyBoYXNoIGFscmVhZHkgcHJvdmlkZWQKICAvLyBTdGVwIEIKICB2LmZpbGwoMSkKCiAgLy8gU3RlcCBDCiAgay5maWxsKDApCgogIC8vIFN0ZXAgRAogIGsgPSBjcmVhdGVIbWFjKCdzaGEyNTYnLCBrKQogICAgLnVwZGF0ZSh2KQogICAgLnVwZGF0ZShaRVJPKQogICAgLnVwZGF0ZSh4KQogICAgLnVwZGF0ZShoYXNoKQogICAgLmRpZ2VzdCgpCgogIC8vIFN0ZXAgRQogIHYgPSBjcmVhdGVIbWFjKCdzaGEyNTYnLCBrKS51cGRhdGUodikuZGlnZXN0KCkKCiAgLy8gU3RlcCBGCiAgayA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIGspCiAgICAudXBkYXRlKHYpCiAgICAudXBkYXRlKE9ORSkKICAgIC51cGRhdGUoeCkKICAgIC51cGRhdGUoaGFzaCkKICAgIC5kaWdlc3QoKQoKICAvLyBTdGVwIEcKICB2ID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykudXBkYXRlKHYpLmRpZ2VzdCgpCgogIC8vIFN0ZXAgSDEvSDJhLCBpZ25vcmVkIGFzIHRsZW4gPT09IHFsZW4gKDI1NiBiaXQpCiAgLy8gU3RlcCBIMmIKICB2ID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykudXBkYXRlKHYpLmRpZ2VzdCgpCgogIHZhciBUID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKHYpCgogIC8vIFN0ZXAgSDMsIHJlcGVhdCB1bnRpbCBUIGlzIHdpdGhpbiB0aGUgaW50ZXJ2YWwgWzEsIG4gLSAxXSBhbmQgaXMgc3VpdGFibGUgZm9yIEVDRFNBCiAgd2hpbGUgKFQuc2lnbnVtKCkgPD0gMCB8fCBULmNvbXBhcmVUbyhzZWNwMjU2azEubikgPj0gMCB8fCAhY2hlY2tTaWcoVCkpIHsKICAgIGsgPSBjcmVhdGVIbWFjKCdzaGEyNTYnLCBrKQogICAgICAudXBkYXRlKHYpCiAgICAgIC51cGRhdGUoWkVSTykKICAgICAgLmRpZ2VzdCgpCgogICAgdiA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIGspLnVwZGF0ZSh2KS5kaWdlc3QoKQoKICAgIC8vIFN0ZXAgSDEvSDJhLCBhZ2FpbiwgaWdub3JlZCBhcyB0bGVuID09PSBxbGVuICgyNTYgYml0KQogICAgLy8gU3RlcCBIMmIgYWdhaW4KICAgIHYgPSBjcmVhdGVIbWFjKCdzaGEyNTYnLCBrKS51cGRhdGUodikuZGlnZXN0KCkKICAgIFQgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIodikKICB9CgogIHJldHVybiBUCn0KCnZhciBOX09WRVJfVFdPID0gc2VjcDI1NmsxLm4uc2hpZnRSaWdodCgxKQoKZnVuY3Rpb24gc2lnbiAoaGFzaCwgZCkgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5IYXNoMjU2Yml0LCB0eXBlcy5CaWdJbnQpLCBhcmd1bWVudHMpCgogIHZhciB4ID0gZC50b0J1ZmZlcigzMikKICB2YXIgZSA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihoYXNoKQogIHZhciBuID0gc2VjcDI1NmsxLm4KICB2YXIgRyA9IHNlY3AyNTZrMS5HCgogIHZhciByLCBzCiAgZGV0ZXJtaW5pc3RpY0dlbmVyYXRlSyhoYXNoLCB4LCBmdW5jdGlvbiAoaykgewogICAgdmFyIFEgPSBHLm11bHRpcGx5KGspCgogICAgaWYgKHNlY3AyNTZrMS5pc0luZmluaXR5KFEpKSByZXR1cm4gZmFsc2UKCiAgICByID0gUS5hZmZpbmVYLm1vZChuKQogICAgaWYgKHIuc2lnbnVtKCkgPT09IDApIHJldHVybiBmYWxzZQoKICAgIHMgPSBrLm1vZEludmVyc2UobikubXVsdGlwbHkoZS5hZGQoZC5tdWx0aXBseShyKSkpLm1vZChuKQogICAgaWYgKHMuc2lnbnVtKCkgPT09IDApIHJldHVybiBmYWxzZQoKICAgIHJldHVybiB0cnVlCiAgfSkKCiAgLy8gZW5mb3JjZSBsb3cgUyB2YWx1ZXMsIHNlZSBiaXA2MjogJ2xvdyBzIHZhbHVlcyBpbiBzaWduYXR1cmVzJwogIGlmIChzLmNvbXBhcmVUbyhOX09WRVJfVFdPKSA+IDApIHsKICAgIHMgPSBuLnN1YnRyYWN0KHMpCiAgfQoKICByZXR1cm4gbmV3IEVDU2lnbmF0dXJlKHIsIHMpCn0KCmZ1bmN0aW9uIHZlcmlmeSAoaGFzaCwgc2lnbmF0dXJlLCBRKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKAogICAgdHlwZXMuSGFzaDI1NmJpdCwKICAgIHR5cGVzLkVDU2lnbmF0dXJlLAogICAgdHlwZXMuRUNQb2ludAogICksIGFyZ3VtZW50cykKCiAgdmFyIG4gPSBzZWNwMjU2azEubgogIHZhciBHID0gc2VjcDI1NmsxLkcKCiAgdmFyIHIgPSBzaWduYXR1cmUucgogIHZhciBzID0gc2lnbmF0dXJlLnMKCiAgLy8gMS40LjEgRW5mb3JjZSByIGFuZCBzIGFyZSBib3RoIGludGVnZXJzIGluIHRoZSBpbnRlcnZhbCBbMSwgbiDiiJIgMV0KICBpZiAoci5zaWdudW0oKSA8PSAwIHx8IHIuY29tcGFyZVRvKG4pID49IDApIHJldHVybiBmYWxzZQogIGlmIChzLnNpZ251bSgpIDw9IDAgfHwgcy5jb21wYXJlVG8obikgPj0gMCkgcmV0dXJuIGZhbHNlCgogIC8vIDEuNC4yIEggPSBIYXNoKE0pLCBhbHJlYWR5IGRvbmUgYnkgdGhlIHVzZXIKICAvLyAxLjQuMyBlID0gSAogIHZhciBlID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGhhc2gpCgogIC8vIENvbXB1dGUgc14tMQogIHZhciBzSW52ID0gcy5tb2RJbnZlcnNlKG4pCgogIC8vIDEuNC40IENvbXB1dGUgdTEgPSBlc17iiJIxIG1vZCBuCiAgLy8gICAgICAgICAgICAgICB1MiA9IHJzXuKIkjEgbW9kIG4KICB2YXIgdTEgPSBlLm11bHRpcGx5KHNJbnYpLm1vZChuKQogIHZhciB1MiA9IHIubXVsdGlwbHkoc0ludikubW9kKG4pCgogIC8vIDEuNC41IENvbXB1dGUgUiA9ICh4UiwgeVIpCiAgLy8gICAgICAgICAgICAgICBSID0gdTFHICsgdTJRCiAgdmFyIFIgPSBHLm11bHRpcGx5VHdvKHUxLCBRLCB1MikKCiAgLy8gMS40LjUgKGNvbnQuKSBFbmZvcmNlIFIgaXMgbm90IGF0IGluZmluaXR5CiAgaWYgKHNlY3AyNTZrMS5pc0luZmluaXR5KFIpKSByZXR1cm4gZmFsc2UKCiAgLy8gMS40LjYgQ29udmVydCB0aGUgZmllbGQgZWxlbWVudCBSLnggdG8gYW4gaW50ZWdlcgogIHZhciB4UiA9IFIuYWZmaW5lWAoKICAvLyAxLjQuNyBTZXQgdiA9IHhSIG1vZCBuCiAgdmFyIHYgPSB4Ui5tb2QobikKCiAgLy8gMS40LjggSWYgdiA9IHIsIG91dHB1dCAidmFsaWQiLCBhbmQgaWYgdiAhPSByLCBvdXRwdXQgImludmFsaWQiCiAgcmV0dXJuIHYuZXF1YWxzKHIpCn0KCi8qKgogICogUmVjb3ZlciBhIHB1YmxpYyBrZXkgZnJvbSBhIHNpZ25hdHVyZS4KICAqCiAgKiBTZWUgU0VDIDE6IEVsbGlwdGljIEN1cnZlIENyeXB0b2dyYXBoeSwgc2VjdGlvbiA0LjEuNiwgIlB1YmxpYwogICogS2V5IFJlY292ZXJ5IE9wZXJhdGlvbiIuCiAgKgogICogaHR0cDovL3d3dy5zZWNnLm9yZy9kb3dubG9hZC9haWQtNzgwL3NlYzEtdjIucGRmCiAgKi8KZnVuY3Rpb24gcmVjb3ZlclB1YktleSAoZSwgc2lnbmF0dXJlLCBpKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKAogICAgdHlwZXMuQmlnSW50LAogICAgdHlwZXMuRUNTaWduYXR1cmUsCiAgICB0eXBlcy5VSW50MgogICksIGFyZ3VtZW50cykKCiAgdmFyIG4gPSBzZWNwMjU2azEubgogIHZhciBHID0gc2VjcDI1NmsxLkcKICB2YXIgciA9IHNpZ25hdHVyZS5yCiAgdmFyIHMgPSBzaWduYXR1cmUucwoKICBpZiAoci5zaWdudW0oKSA8PSAwIHx8IHIuY29tcGFyZVRvKG4pID49IDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByIHZhbHVlJykKICBpZiAocy5zaWdudW0oKSA8PSAwIHx8IHMuY29tcGFyZVRvKG4pID49IDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzIHZhbHVlJykKCiAgLy8gQSBzZXQgTFNCIHNpZ25pZmllcyB0aGF0IHRoZSB5LWNvb3JkaW5hdGUgaXMgb2RkCiAgdmFyIGlzWU9kZCA9IGkgJiAxCgogIC8vIFRoZSBtb3JlIHNpZ25pZmljYW50IGJpdCBzcGVjaWZpZXMgd2hldGhlciB3ZSBzaG91bGQgdXNlIHRoZQogIC8vIGZpcnN0IG9yIHNlY29uZCBjYW5kaWRhdGUga2V5LgogIHZhciBpc1NlY29uZEtleSA9IGkgPj4gMQoKICAvLyAxLjEgTGV0IHggPSByICsgam4KICB2YXIgeCA9IGlzU2Vjb25kS2V5ID8gci5hZGQobikgOiByCiAgdmFyIFIgPSBzZWNwMjU2azEucG9pbnRGcm9tWChpc1lPZGQsIHgpCgogIC8vIDEuNCBDaGVjayB0aGF0IG5SIGlzIGF0IGluZmluaXR5CiAgdmFyIG5SID0gUi5tdWx0aXBseShuKQogIGlmICghc2VjcDI1NmsxLmlzSW5maW5pdHkoblIpKSB0aHJvdyBuZXcgRXJyb3IoJ25SIGlzIG5vdCBhIHZhbGlkIGN1cnZlIHBvaW50JykKCiAgLy8gQ29tcHV0ZSByXi0xCiAgdmFyIHJJbnYgPSByLm1vZEludmVyc2UobikKCiAgLy8gQ29tcHV0ZSAtZSBmcm9tIGUKICB2YXIgZU5lZyA9IGUubmVnYXRlKCkubW9kKG4pCgogIC8vIDEuNi4xIENvbXB1dGUgUSA9IHJeLTEgKHNSIC0gIGVHKQogIC8vICAgICAgICAgICAgICAgUSA9IHJeLTEgKHNSICsgLWVHKQogIHZhciBRID0gUi5tdWx0aXBseVR3byhzLCBHLCBlTmVnKS5tdWx0aXBseShySW52KQoKICBzZWNwMjU2azEudmFsaWRhdGUoUSkKCiAgcmV0dXJuIFEKfQoKLyoqCiAgKiBDYWxjdWxhdGUgcHVia2V5IGV4dHJhY3Rpb24gcGFyYW1ldGVyLgogICoKICAqIFdoZW4gZXh0cmFjdGluZyBhIHB1YmtleSBmcm9tIGEgc2lnbmF0dXJlLCB3ZSBoYXZlIHRvCiAgKiBkaXN0aW5ndWlzaCBmb3VyIGRpZmZlcmVudCBjYXNlcy4gUmF0aGVyIHRoYW4gcHV0dGluZyB0aGlzCiAgKiBidXJkZW4gb24gdGhlIHZlcmlmaWVyLCBCaXRjb2luIGluY2x1ZGVzIGEgMi1iaXQgdmFsdWUgd2l0aCB0aGUKICAqIHNpZ25hdHVyZS4KICAqCiAgKiBUaGlzIGZ1bmN0aW9uIHNpbXBseSB0cmllcyBhbGwgZm91ciBjYXNlcyBhbmQgcmV0dXJucyB0aGUgdmFsdWUKICAqIHRoYXQgcmVzdWx0ZWQgaW4gYSBzdWNjZXNzZnVsIHB1YmtleSByZWNvdmVyeS4KICAqLwpmdW5jdGlvbiBjYWxjUHViS2V5UmVjb3ZlcnlQYXJhbSAoZSwgc2lnbmF0dXJlLCBRKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKAogICAgdHlwZXMuQmlnSW50LAogICAgdHlwZXMuRUNTaWduYXR1cmUsCiAgICB0eXBlcy5FQ1BvaW50CiAgKSwgYXJndW1lbnRzKQoKICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgdmFyIFFwcmltZSA9IHJlY292ZXJQdWJLZXkoZSwgc2lnbmF0dXJlLCBpKQoKICAgIC8vIDEuNi4yIFZlcmlmeSBRCiAgICBpZiAoUXByaW1lLmVxdWFscyhRKSkgewogICAgICByZXR1cm4gaQogICAgfQogIH0KCiAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZmluZCB2YWxpZCByZWNvdmVyeSBmYWN0b3InKQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBjYWxjUHViS2V5UmVjb3ZlcnlQYXJhbTogY2FsY1B1YktleVJlY292ZXJ5UGFyYW0sCiAgZGV0ZXJtaW5pc3RpY0dlbmVyYXRlSzogZGV0ZXJtaW5pc3RpY0dlbmVyYXRlSywKICByZWNvdmVyUHViS2V5OiByZWNvdmVyUHViS2V5LAogIHNpZ246IHNpZ24sCiAgdmVyaWZ5OiB2ZXJpZnksCgogIC8vIFRPRE86IHJlbW92ZQogIF9fY3VydmU6IHNlY3AyNTZrMQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9lY3NpZ25hdHVyZSI6MzAsIi4vdHlwZXMiOjQwLCJiaWdpIjoxOSwiYnVmZmVyIjo3MCwiY3JlYXRlLWhtYWMiOjg1LCJlY3VydmUiOjk5LCJ0eXBlZm9yY2UiOjE3Mn1dLDI5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYmNyeXB0byA9IHJlcXVpcmUoJy4vY3J5cHRvJykKdmFyIGJzNThjaGVjayA9IHJlcXVpcmUoJ2JzNThjaGVjaycpCnZhciBlY2RzYSA9IHJlcXVpcmUoJy4vZWNkc2EnKQp2YXIgcmFuZG9tQnl0ZXMgPSByZXF1aXJlKCdyYW5kb21ieXRlcycpCnZhciB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKQp2YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJykKdmFyIHdpZiA9IHJlcXVpcmUoJ3dpZicpCgp2YXIgTkVUV09SS1MgPSByZXF1aXJlKCcuL25ldHdvcmtzJykKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKCnZhciBlY3VydmUgPSByZXF1aXJlKCdlY3VydmUnKQp2YXIgc2VjcDI1NmsxID0gZWNkc2EuX19jdXJ2ZQoKZnVuY3Rpb24gRUNQYWlyIChkLCBRLCBvcHRpb25zKSB7CiAgaWYgKG9wdGlvbnMpIHsKICAgIHR5cGVmb3JjZSh7CiAgICAgIGNvbXByZXNzZWQ6IHR5cGVzLm1heWJlKHR5cGVzLkJvb2xlYW4pLAogICAgICBuZXR3b3JrOiB0eXBlcy5tYXliZSh0eXBlcy5OZXR3b3JrKQogICAgfSwgb3B0aW9ucykKICB9CgogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9CgogIGlmIChkKSB7CiAgICBpZiAoZC5zaWdudW0oKSA8PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ1ByaXZhdGUga2V5IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAnKQogICAgaWYgKGQuY29tcGFyZVRvKHNlY3AyNTZrMS5uKSA+PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ1ByaXZhdGUga2V5IG11c3QgYmUgbGVzcyB0aGFuIHRoZSBjdXJ2ZSBvcmRlcicpCiAgICBpZiAoUSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5leHBlY3RlZCBwdWJsaWNLZXkgcGFyYW1ldGVyJykKCiAgICB0aGlzLmQgPSBkCiAgfSBlbHNlIHsKICAgIHR5cGVmb3JjZSh0eXBlcy5FQ1BvaW50LCBRKQoKICAgIHRoaXMuX19RID0gUQogIH0KCiAgdGhpcy5jb21wcmVzc2VkID0gb3B0aW9ucy5jb21wcmVzc2VkID09PSB1bmRlZmluZWQgPyB0cnVlIDogb3B0aW9ucy5jb21wcmVzc2VkCiAgdGhpcy5uZXR3b3JrID0gb3B0aW9ucy5uZXR3b3JrIHx8IE5FVFdPUktTLmJpdGNvaW4KfQoKT2JqZWN0LmRlZmluZVByb3BlcnR5KEVDUGFpci5wcm90b3R5cGUsICdRJywgewogIGdldDogZnVuY3Rpb24gKCkgewogICAgaWYgKCF0aGlzLl9fUSAmJiB0aGlzLmQpIHsKICAgICAgdGhpcy5fX1EgPSBzZWNwMjU2azEuRy5tdWx0aXBseSh0aGlzLmQpCiAgICB9CgogICAgcmV0dXJuIHRoaXMuX19RCiAgfQp9KQoKRUNQYWlyLmZyb21QdWJsaWNLZXlCdWZmZXIgPSBmdW5jdGlvbiAoYnVmZmVyLCBuZXR3b3JrKSB7CiAgdmFyIFEgPSBlY3VydmUuUG9pbnQuZGVjb2RlRnJvbShzZWNwMjU2azEsIGJ1ZmZlcikKCiAgcmV0dXJuIG5ldyBFQ1BhaXIobnVsbCwgUSwgewogICAgY29tcHJlc3NlZDogUS5jb21wcmVzc2VkLAogICAgbmV0d29yazogbmV0d29yawogIH0pCn0KCkVDUGFpci5mcm9tV0lGID0gZnVuY3Rpb24gKHN0cmluZywgbmV0d29yaykgewogIG5ldHdvcmsgPSBuZXR3b3JrIHx8IE5FVFdPUktTLmJpdGNvaW4KICB2YXIgYnVmZmVyID0gYnM1OGNoZWNrLmRlY29kZShzdHJpbmcpCgogIGlmICh0eXBlcy5BcnJheShuZXR3b3JrKSkgewogICAgdmFyIHZlcnNpb24gPSBidWZmZXJbMF0KCiAgICBuZXR3b3JrID0gbmV0d29yay5maWx0ZXIoZnVuY3Rpb24gKG5ldHdvcmspIHsKICAgICAgcmV0dXJuIHZlcnNpb24gPT09IG5ldHdvcmsud2lmCiAgICB9KS5wb3AoKSB8fCB7fQogIH0KCiAgdmFyIGRlY29kZWQgPSB3aWYuZGVjb2RlUmF3KG5ldHdvcmsud2lmLCBidWZmZXIpCiAgdmFyIGQgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoZGVjb2RlZC5kKQoKICByZXR1cm4gbmV3IEVDUGFpcihkLCBudWxsLCB7CiAgICBjb21wcmVzc2VkOiBkZWNvZGVkLmNvbXByZXNzZWQsCiAgICBuZXR3b3JrOiBuZXR3b3JrCiAgfSkKfQoKRUNQYWlyLm1ha2VSYW5kb20gPSBmdW5jdGlvbiAob3B0aW9ucykgewogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9CgogIHZhciBybmcgPSBvcHRpb25zLnJuZyB8fCByYW5kb21CeXRlcwoKICB2YXIgZAogIGRvIHsKICAgIHZhciBidWZmZXIgPSBybmcoMzIpCiAgICB0eXBlZm9yY2UodHlwZXMuQnVmZmVyMjU2Yml0LCBidWZmZXIpCgogICAgZCA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihidWZmZXIpCiAgfSB3aGlsZSAoZC5zaWdudW0oKSA8PSAwIHx8IGQuY29tcGFyZVRvKHNlY3AyNTZrMS5uKSA+PSAwKQoKICByZXR1cm4gbmV3IEVDUGFpcihkLCBudWxsLCBvcHRpb25zKQp9CgpFQ1BhaXIucHJvdG90eXBlLmdldEFkZHJlc3MgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHB1YktleSA9IHRoaXMuZ2V0UHVibGljS2V5QnVmZmVyKCkKICB2YXIgcHViS2V5SGFzaCA9IGJjcnlwdG8uaGFzaDE2MChwdWJLZXkpCgogIHZhciBwYXlsb2FkID0gbmV3IEJ1ZmZlcigyMSkKICBwYXlsb2FkLndyaXRlVUludDgodGhpcy5uZXR3b3JrLnB1YktleUhhc2gsIDApCiAgcHViS2V5SGFzaC5jb3B5KHBheWxvYWQsIDEpCgogIHJldHVybiBiczU4Y2hlY2suZW5jb2RlKHBheWxvYWQpCn0KCkVDUGFpci5wcm90b3R5cGUuZ2V0TmV0d29yayA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5uZXR3b3JrCn0KCkVDUGFpci5wcm90b3R5cGUuZ2V0UHVibGljS2V5QnVmZmVyID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLlEuZ2V0RW5jb2RlZCh0aGlzLmNvbXByZXNzZWQpCn0KCkVDUGFpci5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIChoYXNoKSB7CiAgaWYgKCF0aGlzLmQpIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBwcml2YXRlIGtleScpCgogIHJldHVybiBlY2RzYS5zaWduKGhhc2gsIHRoaXMuZCkKfQoKRUNQYWlyLnByb3RvdHlwZS50b1dJRiA9IGZ1bmN0aW9uICgpIHsKICBpZiAoIXRoaXMuZCkgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHByaXZhdGUga2V5JykKCiAgcmV0dXJuIHdpZi5lbmNvZGUodGhpcy5uZXR3b3JrLndpZiwgdGhpcy5kLnRvQnVmZmVyKDMyKSwgdGhpcy5jb21wcmVzc2VkKQp9CgpFQ1BhaXIucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uIChoYXNoLCBzaWduYXR1cmUpIHsKICByZXR1cm4gZWNkc2EudmVyaWZ5KGhhc2gsIHNpZ25hdHVyZSwgdGhpcy5RKQp9Cgptb2R1bGUuZXhwb3J0cyA9IEVDUGFpcgoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vY3J5cHRvIjoyNywiLi9lY2RzYSI6MjgsIi4vbmV0d29ya3MiOjM0LCIuL3R5cGVzIjo0MCwiYmlnaSI6MTksImJzNThjaGVjayI6NzQsImJ1ZmZlciI6NzAsImVjdXJ2ZSI6OTksInJhbmRvbWJ5dGVzIjoxNDYsInR5cGVmb3JjZSI6MTcyLCJ3aWYiOjE3OH1dLDMwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYmlwNjYgPSByZXF1aXJlKCdiaXA2NicpCnZhciB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKQp2YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJykKCnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnYmlnaScpCgpmdW5jdGlvbiBFQ1NpZ25hdHVyZSAociwgcykgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5CaWdJbnQsIHR5cGVzLkJpZ0ludCksIGFyZ3VtZW50cykKCiAgdGhpcy5yID0gcgogIHRoaXMucyA9IHMKfQoKRUNTaWduYXR1cmUucGFyc2VDb21wYWN0ID0gZnVuY3Rpb24gKGJ1ZmZlcikgewogIGlmIChidWZmZXIubGVuZ3RoICE9PSA2NSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNpZ25hdHVyZSBsZW5ndGgnKQoKICB2YXIgZmxhZ0J5dGUgPSBidWZmZXIucmVhZFVJbnQ4KDApIC0gMjcKICBpZiAoZmxhZ0J5dGUgIT09IChmbGFnQnl0ZSAmIDcpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc2lnbmF0dXJlIHBhcmFtZXRlcicpCgogIHZhciBjb21wcmVzc2VkID0gISEoZmxhZ0J5dGUgJiA0KQogIHZhciByZWNvdmVyeVBhcmFtID0gZmxhZ0J5dGUgJiAzCgogIHZhciByID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGJ1ZmZlci5zbGljZSgxLCAzMykpCiAgdmFyIHMgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoYnVmZmVyLnNsaWNlKDMzKSkKCiAgcmV0dXJuIHsKICAgIGNvbXByZXNzZWQ6IGNvbXByZXNzZWQsCiAgICBpOiByZWNvdmVyeVBhcmFtLAogICAgc2lnbmF0dXJlOiBuZXcgRUNTaWduYXR1cmUociwgcykKICB9Cn0KCkVDU2lnbmF0dXJlLmZyb21ERVIgPSBmdW5jdGlvbiAoYnVmZmVyKSB7CiAgdmFyIGRlY29kZSA9IGJpcDY2LmRlY29kZShidWZmZXIpCiAgdmFyIHIgPSBCaWdJbnRlZ2VyLmZyb21ERVJJbnRlZ2VyKGRlY29kZS5yKQogIHZhciBzID0gQmlnSW50ZWdlci5mcm9tREVSSW50ZWdlcihkZWNvZGUucykKCiAgcmV0dXJuIG5ldyBFQ1NpZ25hdHVyZShyLCBzKQp9CgovLyBCSVA2MjogMSBieXRlIGhhc2hUeXBlIGZsYWcgKG9ubHkgMHgwMSwgMHgwMiwgMHgwMywgMHg4MSwgMHg4MiBhbmQgMHg4MyBhcmUgYWxsb3dlZCkKRUNTaWduYXR1cmUucGFyc2VTY3JpcHRTaWduYXR1cmUgPSBmdW5jdGlvbiAoYnVmZmVyKSB7CiAgdmFyIGhhc2hUeXBlID0gYnVmZmVyLnJlYWRVSW50OChidWZmZXIubGVuZ3RoIC0gMSkKICB2YXIgaGFzaFR5cGVNb2QgPSBoYXNoVHlwZSAmIH4weDgwCgogIGlmIChoYXNoVHlwZU1vZCA8PSAweDAwIHx8IGhhc2hUeXBlTW9kID49IDB4MDQpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoYXNoVHlwZSAnICsgaGFzaFR5cGUpCgogIHJldHVybiB7CiAgICBzaWduYXR1cmU6IEVDU2lnbmF0dXJlLmZyb21ERVIoYnVmZmVyLnNsaWNlKDAsIC0xKSksCiAgICBoYXNoVHlwZTogaGFzaFR5cGUKICB9Cn0KCkVDU2lnbmF0dXJlLnByb3RvdHlwZS50b0NvbXBhY3QgPSBmdW5jdGlvbiAoaSwgY29tcHJlc3NlZCkgewogIGlmIChjb21wcmVzc2VkKSB7CiAgICBpICs9IDQKICB9CgogIGkgKz0gMjcKCiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIoNjUpCiAgYnVmZmVyLndyaXRlVUludDgoaSwgMCkKCiAgdGhpcy5yLnRvQnVmZmVyKDMyKS5jb3B5KGJ1ZmZlciwgMSkKICB0aGlzLnMudG9CdWZmZXIoMzIpLmNvcHkoYnVmZmVyLCAzMykKCiAgcmV0dXJuIGJ1ZmZlcgp9CgpFQ1NpZ25hdHVyZS5wcm90b3R5cGUudG9ERVIgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHIgPSBuZXcgQnVmZmVyKHRoaXMuci50b0RFUkludGVnZXIoKSkKICB2YXIgcyA9IG5ldyBCdWZmZXIodGhpcy5zLnRvREVSSW50ZWdlcigpKQoKICByZXR1cm4gYmlwNjYuZW5jb2RlKHIsIHMpCn0KCkVDU2lnbmF0dXJlLnByb3RvdHlwZS50b1NjcmlwdFNpZ25hdHVyZSA9IGZ1bmN0aW9uIChoYXNoVHlwZSkgewogIHZhciBoYXNoVHlwZU1vZCA9IGhhc2hUeXBlICYgfjB4ODAKICBpZiAoaGFzaFR5cGVNb2QgPD0gMCB8fCBoYXNoVHlwZU1vZCA+PSA0KSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGFzaFR5cGUgJyArIGhhc2hUeXBlKQoKICB2YXIgaGFzaFR5cGVCdWZmZXIgPSBuZXcgQnVmZmVyKDEpCiAgaGFzaFR5cGVCdWZmZXIud3JpdGVVSW50OChoYXNoVHlwZSwgMCkKCiAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoW3RoaXMudG9ERVIoKSwgaGFzaFR5cGVCdWZmZXJdKQp9Cgptb2R1bGUuZXhwb3J0cyA9IEVDU2lnbmF0dXJlCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi90eXBlcyI6NDAsImJpZ2kiOjE5LCJiaXA2NiI6MjMsImJ1ZmZlciI6NzAsInR5cGVmb3JjZSI6MTcyfV0sMzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBiYXNlNThjaGVjayA9IHJlcXVpcmUoJ2JzNThjaGVjaycpCnZhciBiY3J5cHRvID0gcmVxdWlyZSgnLi9jcnlwdG8nKQp2YXIgY3JlYXRlSG1hYyA9IHJlcXVpcmUoJ2NyZWF0ZS1obWFjJykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQp2YXIgTkVUV09SS1MgPSByZXF1aXJlKCcuL25ldHdvcmtzJykKCnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnYmlnaScpCnZhciBFQ1BhaXIgPSByZXF1aXJlKCcuL2VjcGFpcicpCgp2YXIgZWN1cnZlID0gcmVxdWlyZSgnZWN1cnZlJykKdmFyIGN1cnZlID0gZWN1cnZlLmdldEN1cnZlQnlOYW1lKCdzZWNwMjU2azEnKQoKZnVuY3Rpb24gSEROb2RlIChrZXlQYWlyLCBjaGFpbkNvZGUpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUoJ0VDUGFpcicsIHR5cGVzLkJ1ZmZlcjI1NmJpdCksIGFyZ3VtZW50cykKCiAgaWYgKCFrZXlQYWlyLmNvbXByZXNzZWQpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JJUDMyIG9ubHkgYWxsb3dzIGNvbXByZXNzZWQga2V5UGFpcnMnKQoKICB0aGlzLmtleVBhaXIgPSBrZXlQYWlyCiAgdGhpcy5jaGFpbkNvZGUgPSBjaGFpbkNvZGUKICB0aGlzLmRlcHRoID0gMAogIHRoaXMuaW5kZXggPSAwCiAgdGhpcy5wYXJlbnRGaW5nZXJwcmludCA9IDB4MDAwMDAwMDAKfQoKSEROb2RlLkhJR0hFU1RfQklUID0gMHg4MDAwMDAwMApIRE5vZGUuTEVOR1RIID0gNzgKSEROb2RlLk1BU1RFUl9TRUNSRVQgPSBuZXcgQnVmZmVyKCdCaXRjb2luIHNlZWQnKQoKSEROb2RlLmZyb21TZWVkQnVmZmVyID0gZnVuY3Rpb24gKHNlZWQsIG5ldHdvcmspIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuQnVmZmVyLCB0eXBlcy5tYXliZSh0eXBlcy5OZXR3b3JrKSksIGFyZ3VtZW50cykKCiAgaWYgKHNlZWQubGVuZ3RoIDwgMTYpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1NlZWQgc2hvdWxkIGJlIGF0IGxlYXN0IDEyOCBiaXRzJykKICBpZiAoc2VlZC5sZW5ndGggPiA2NCkgdGhyb3cgbmV3IFR5cGVFcnJvcignU2VlZCBzaG91bGQgYmUgYXQgbW9zdCA1MTIgYml0cycpCgogIHZhciBJID0gY3JlYXRlSG1hYygnc2hhNTEyJywgSEROb2RlLk1BU1RFUl9TRUNSRVQpLnVwZGF0ZShzZWVkKS5kaWdlc3QoKQogIHZhciBJTCA9IEkuc2xpY2UoMCwgMzIpCiAgdmFyIElSID0gSS5zbGljZSgzMikKCiAgLy8gSW4gY2FzZSBJTCBpcyAwIG9yID49IG4sIHRoZSBtYXN0ZXIga2V5IGlzIGludmFsaWQKICAvLyBUaGlzIGlzIGhhbmRsZWQgYnkgdGhlIEVDUGFpciBjb25zdHJ1Y3RvcgogIHZhciBwSUwgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoSUwpCiAgdmFyIGtleVBhaXIgPSBuZXcgRUNQYWlyKHBJTCwgbnVsbCwgewogICAgbmV0d29yazogbmV0d29yawogIH0pCgogIHJldHVybiBuZXcgSEROb2RlKGtleVBhaXIsIElSKQp9CgpIRE5vZGUuZnJvbVNlZWRIZXggPSBmdW5jdGlvbiAoaGV4LCBuZXR3b3JrKSB7CiAgcmV0dXJuIEhETm9kZS5mcm9tU2VlZEJ1ZmZlcihuZXcgQnVmZmVyKGhleCwgJ2hleCcpLCBuZXR3b3JrKQp9CgpIRE5vZGUuZnJvbUJhc2U1OCA9IGZ1bmN0aW9uIChzdHJpbmcsIG5ldHdvcmtzKSB7CiAgdmFyIGJ1ZmZlciA9IGJhc2U1OGNoZWNrLmRlY29kZShzdHJpbmcpCiAgaWYgKGJ1ZmZlci5sZW5ndGggIT09IDc4KSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYnVmZmVyIGxlbmd0aCcpCgogIC8vIDQgYnl0ZXM6IHZlcnNpb24gYnl0ZXMKICB2YXIgdmVyc2lvbiA9IGJ1ZmZlci5yZWFkVUludDMyQkUoMCkKICB2YXIgbmV0d29yawoKICAvLyBsaXN0IG9mIG5ldHdvcmtzPwogIGlmIChBcnJheS5pc0FycmF5KG5ldHdvcmtzKSkgewogICAgbmV0d29yayA9IG5ldHdvcmtzLmZpbHRlcihmdW5jdGlvbiAobmV0d29yaykgewogICAgICByZXR1cm4gdmVyc2lvbiA9PT0gbmV0d29yay5iaXAzMi5wcml2YXRlIHx8CiAgICAgICAgICAgICB2ZXJzaW9uID09PSBuZXR3b3JrLmJpcDMyLnB1YmxpYwogICAgfSkucG9wKCkgfHwge30KCiAgLy8gb3RoZXJ3aXNlLCBhc3N1bWUgYSBuZXR3b3JrIG9iamVjdCAob3IgZGVmYXVsdCB0byBiaXRjb2luKQogIH0gZWxzZSB7CiAgICBuZXR3b3JrID0gbmV0d29ya3MgfHwgTkVUV09SS1MuYml0Y29pbgogIH0KCiAgaWYgKHZlcnNpb24gIT09IG5ldHdvcmsuYmlwMzIucHJpdmF0ZSAmJgogICAgdmVyc2lvbiAhPT0gbmV0d29yay5iaXAzMi5wdWJsaWMpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBuZXR3b3JrJykKCiAgLy8gMSBieXRlOiBkZXB0aDogMHgwMCBmb3IgbWFzdGVyIG5vZGVzLCAweDAxIGZvciBsZXZlbC0xIGRlc2NlbmRhbnRzLCAuLi4KICB2YXIgZGVwdGggPSBidWZmZXJbNF0KCiAgLy8gNCBieXRlczogdGhlIGZpbmdlcnByaW50IG9mIHRoZSBwYXJlbnQncyBrZXkgKDB4MDAwMDAwMDAgaWYgbWFzdGVyIGtleSkKICB2YXIgcGFyZW50RmluZ2VycHJpbnQgPSBidWZmZXIucmVhZFVJbnQzMkJFKDUpCiAgaWYgKGRlcHRoID09PSAwKSB7CiAgICBpZiAocGFyZW50RmluZ2VycHJpbnQgIT09IDB4MDAwMDAwMDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwYXJlbnQgZmluZ2VycHJpbnQnKQogIH0KCiAgLy8gNCBieXRlczogY2hpbGQgbnVtYmVyLiBUaGlzIGlzIHRoZSBudW1iZXIgaSBpbiB4aSA9IHhwYXIvaSwgd2l0aCB4aSB0aGUga2V5IGJlaW5nIHNlcmlhbGl6ZWQuCiAgLy8gVGhpcyBpcyBlbmNvZGVkIGluIE1TQiBvcmRlci4gKDB4MDAwMDAwMDAgaWYgbWFzdGVyIGtleSkKICB2YXIgaW5kZXggPSBidWZmZXIucmVhZFVJbnQzMkJFKDkpCiAgaWYgKGRlcHRoID09PSAwICYmIGluZGV4ICE9PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5kZXgnKQoKICAvLyAzMiBieXRlczogdGhlIGNoYWluIGNvZGUKICB2YXIgY2hhaW5Db2RlID0gYnVmZmVyLnNsaWNlKDEzLCA0NSkKICB2YXIga2V5UGFpcgoKICAvLyAzMyBieXRlczogcHJpdmF0ZSBrZXkgZGF0YSAoMHgwMCArIGspCiAgaWYgKHZlcnNpb24gPT09IG5ldHdvcmsuYmlwMzIucHJpdmF0ZSkgewogICAgaWYgKGJ1ZmZlci5yZWFkVUludDgoNDUpICE9PSAweDAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcHJpdmF0ZSBrZXknKQoKICAgIHZhciBkID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGJ1ZmZlci5zbGljZSg0NiwgNzgpKQoKICAgIGtleVBhaXIgPSBuZXcgRUNQYWlyKGQsIG51bGwsIHsKICAgICAgbmV0d29yazogbmV0d29yawogICAgfSkKCiAgLy8gMzMgYnl0ZXM6IHB1YmxpYyBrZXkgZGF0YSAoMHgwMiArIFggb3IgMHgwMyArIFgpCiAgfSBlbHNlIHsKICAgIHZhciBRID0gZWN1cnZlLlBvaW50LmRlY29kZUZyb20oY3VydmUsIGJ1ZmZlci5zbGljZSg0NSwgNzgpKQogICAgaWYgKCFRLmNvbXByZXNzZWQpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwdWJsaWMga2V5JykKCiAgICAvLyBWZXJpZnkgdGhhdCB0aGUgWCBjb29yZGluYXRlIGluIHRoZSBwdWJsaWMgcG9pbnQgY29ycmVzcG9uZHMgdG8gYSBwb2ludCBvbiB0aGUgY3VydmUuCiAgICAvLyBJZiBub3QsIHRoZSBleHRlbmRlZCBwdWJsaWMga2V5IGlzIGludmFsaWQuCiAgICBjdXJ2ZS52YWxpZGF0ZShRKQoKICAgIGtleVBhaXIgPSBuZXcgRUNQYWlyKG51bGwsIFEsIHsKICAgICAgbmV0d29yazogbmV0d29yawogICAgfSkKICB9CgogIHZhciBoZCA9IG5ldyBIRE5vZGUoa2V5UGFpciwgY2hhaW5Db2RlKQogIGhkLmRlcHRoID0gZGVwdGgKICBoZC5pbmRleCA9IGluZGV4CiAgaGQucGFyZW50RmluZ2VycHJpbnQgPSBwYXJlbnRGaW5nZXJwcmludAoKICByZXR1cm4gaGQKfQoKSEROb2RlLnByb3RvdHlwZS5nZXRBZGRyZXNzID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLmtleVBhaXIuZ2V0QWRkcmVzcygpCn0KCkhETm9kZS5wcm90b3R5cGUuZ2V0SWRlbnRpZmllciA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gYmNyeXB0by5oYXNoMTYwKHRoaXMua2V5UGFpci5nZXRQdWJsaWNLZXlCdWZmZXIoKSkKfQoKSEROb2RlLnByb3RvdHlwZS5nZXRGaW5nZXJwcmludCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5nZXRJZGVudGlmaWVyKCkuc2xpY2UoMCwgNCkKfQoKSEROb2RlLnByb3RvdHlwZS5nZXROZXR3b3JrID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLmtleVBhaXIuZ2V0TmV0d29yaygpCn0KCkhETm9kZS5wcm90b3R5cGUuZ2V0UHVibGljS2V5QnVmZmVyID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLmtleVBhaXIuZ2V0UHVibGljS2V5QnVmZmVyKCkKfQoKSEROb2RlLnByb3RvdHlwZS5uZXV0ZXJlZCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgbmV1dGVyZWRLZXlQYWlyID0gbmV3IEVDUGFpcihudWxsLCB0aGlzLmtleVBhaXIuUSwgewogICAgbmV0d29yazogdGhpcy5rZXlQYWlyLm5ldHdvcmsKICB9KQoKICB2YXIgbmV1dGVyZWQgPSBuZXcgSEROb2RlKG5ldXRlcmVkS2V5UGFpciwgdGhpcy5jaGFpbkNvZGUpCiAgbmV1dGVyZWQuZGVwdGggPSB0aGlzLmRlcHRoCiAgbmV1dGVyZWQuaW5kZXggPSB0aGlzLmluZGV4CiAgbmV1dGVyZWQucGFyZW50RmluZ2VycHJpbnQgPSB0aGlzLnBhcmVudEZpbmdlcnByaW50CgogIHJldHVybiBuZXV0ZXJlZAp9CgpIRE5vZGUucHJvdG90eXBlLnNpZ24gPSBmdW5jdGlvbiAoaGFzaCkgewogIHJldHVybiB0aGlzLmtleVBhaXIuc2lnbihoYXNoKQp9CgpIRE5vZGUucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uIChoYXNoLCBzaWduYXR1cmUpIHsKICByZXR1cm4gdGhpcy5rZXlQYWlyLnZlcmlmeShoYXNoLCBzaWduYXR1cmUpCn0KCkhETm9kZS5wcm90b3R5cGUudG9CYXNlNTggPSBmdW5jdGlvbiAoX19pc1ByaXZhdGUpIHsKICBpZiAoX19pc1ByaXZhdGUgIT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5zdXBwb3J0ZWQgYXJndW1lbnQgaW4gMi4wLjAnKQoKICAvLyBWZXJzaW9uCiAgdmFyIG5ldHdvcmsgPSB0aGlzLmtleVBhaXIubmV0d29yawogIHZhciB2ZXJzaW9uID0gdGhpcy5rZXlQYWlyLmQgPyBuZXR3b3JrLmJpcDMyLnByaXZhdGUgOiBuZXR3b3JrLmJpcDMyLnB1YmxpYwogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKDc4KQoKICAvLyA0IGJ5dGVzOiB2ZXJzaW9uIGJ5dGVzCiAgYnVmZmVyLndyaXRlVUludDMyQkUodmVyc2lvbiwgMCkKCiAgLy8gMSBieXRlOiBkZXB0aDogMHgwMCBmb3IgbWFzdGVyIG5vZGVzLCAweDAxIGZvciBsZXZlbC0xIGRlc2NlbmRhbnRzLCAuLi4uCiAgYnVmZmVyLndyaXRlVUludDgodGhpcy5kZXB0aCwgNCkKCiAgLy8gNCBieXRlczogdGhlIGZpbmdlcnByaW50IG9mIHRoZSBwYXJlbnQncyBrZXkgKDB4MDAwMDAwMDAgaWYgbWFzdGVyIGtleSkKICBidWZmZXIud3JpdGVVSW50MzJCRSh0aGlzLnBhcmVudEZpbmdlcnByaW50LCA1KQoKICAvLyA0IGJ5dGVzOiBjaGlsZCBudW1iZXIuIFRoaXMgaXMgdGhlIG51bWJlciBpIGluIHhpID0geHBhci9pLCB3aXRoIHhpIHRoZSBrZXkgYmVpbmcgc2VyaWFsaXplZC4KICAvLyBUaGlzIGlzIGVuY29kZWQgaW4gYmlnIGVuZGlhbi4gKDB4MDAwMDAwMDAgaWYgbWFzdGVyIGtleSkKICBidWZmZXIud3JpdGVVSW50MzJCRSh0aGlzLmluZGV4LCA5KQoKICAvLyAzMiBieXRlczogdGhlIGNoYWluIGNvZGUKICB0aGlzLmNoYWluQ29kZS5jb3B5KGJ1ZmZlciwgMTMpCgogIC8vIDMzIGJ5dGVzOiB0aGUgcHVibGljIGtleSBvciBwcml2YXRlIGtleSBkYXRhCiAgaWYgKHRoaXMua2V5UGFpci5kKSB7CiAgICAvLyAweDAwICsgayBmb3IgcHJpdmF0ZSBrZXlzCiAgICBidWZmZXIud3JpdGVVSW50OCgwLCA0NSkKICAgIHRoaXMua2V5UGFpci5kLnRvQnVmZmVyKDMyKS5jb3B5KGJ1ZmZlciwgNDYpCgogIC8vIDMzIGJ5dGVzOiB0aGUgcHVibGljIGtleQogIH0gZWxzZSB7CiAgICAvLyBYOS42MiBlbmNvZGluZyBmb3IgcHVibGljIGtleXMKICAgIHRoaXMua2V5UGFpci5nZXRQdWJsaWNLZXlCdWZmZXIoKS5jb3B5KGJ1ZmZlciwgNDUpCiAgfQoKICByZXR1cm4gYmFzZTU4Y2hlY2suZW5jb2RlKGJ1ZmZlcikKfQoKLy8gaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYmlwcy9ibG9iL21hc3Rlci9iaXAtMDAzMi5tZWRpYXdpa2kjY2hpbGQta2V5LWRlcml2YXRpb24tY2tkLWZ1bmN0aW9ucwpIRE5vZGUucHJvdG90eXBlLmRlcml2ZSA9IGZ1bmN0aW9uIChpbmRleCkgewogIHZhciBpc0hhcmRlbmVkID0gaW5kZXggPj0gSEROb2RlLkhJR0hFU1RfQklUCiAgdmFyIGRhdGEgPSBuZXcgQnVmZmVyKDM3KQoKICAvLyBIYXJkZW5lZCBjaGlsZAogIGlmIChpc0hhcmRlbmVkKSB7CiAgICBpZiAoIXRoaXMua2V5UGFpci5kKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdDb3VsZCBub3QgZGVyaXZlIGhhcmRlbmVkIGNoaWxkIGtleScpCgogICAgLy8gZGF0YSA9IDB4MDAgfHwgc2VyMjU2KGtwYXIpIHx8IHNlcjMyKGluZGV4KQogICAgZGF0YVswXSA9IDB4MDAKICAgIHRoaXMua2V5UGFpci5kLnRvQnVmZmVyKDMyKS5jb3B5KGRhdGEsIDEpCiAgICBkYXRhLndyaXRlVUludDMyQkUoaW5kZXgsIDMzKQoKICAvLyBOb3JtYWwgY2hpbGQKICB9IGVsc2UgewogICAgLy8gZGF0YSA9IHNlclAocG9pbnQoa3BhcikpIHx8IHNlcjMyKGluZGV4KQogICAgLy8gICAgICA9IHNlclAoS3BhcikgfHwgc2VyMzIoaW5kZXgpCiAgICB0aGlzLmtleVBhaXIuZ2V0UHVibGljS2V5QnVmZmVyKCkuY29weShkYXRhLCAwKQogICAgZGF0YS53cml0ZVVJbnQzMkJFKGluZGV4LCAzMykKICB9CgogIHZhciBJID0gY3JlYXRlSG1hYygnc2hhNTEyJywgdGhpcy5jaGFpbkNvZGUpLnVwZGF0ZShkYXRhKS5kaWdlc3QoKQogIHZhciBJTCA9IEkuc2xpY2UoMCwgMzIpCiAgdmFyIElSID0gSS5zbGljZSgzMikKCiAgdmFyIHBJTCA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihJTCkKCiAgLy8gSW4gY2FzZSBwYXJzZTI1NihJTCkgPj0gbiwgcHJvY2VlZCB3aXRoIHRoZSBuZXh0IHZhbHVlIGZvciBpCiAgaWYgKHBJTC5jb21wYXJlVG8oY3VydmUubikgPj0gMCkgewogICAgcmV0dXJuIHRoaXMuZGVyaXZlKGluZGV4ICsgMSkKICB9CgogIC8vIFByaXZhdGUgcGFyZW50IGtleSAtPiBwcml2YXRlIGNoaWxkIGtleQogIHZhciBkZXJpdmVkS2V5UGFpcgogIGlmICh0aGlzLmtleVBhaXIuZCkgewogICAgLy8ga2kgPSBwYXJzZTI1NihJTCkgKyBrcGFyIChtb2QgbikKICAgIHZhciBraSA9IHBJTC5hZGQodGhpcy5rZXlQYWlyLmQpLm1vZChjdXJ2ZS5uKQoKICAgIC8vIEluIGNhc2Uga2kgPT0gMCwgcHJvY2VlZCB3aXRoIHRoZSBuZXh0IHZhbHVlIGZvciBpCiAgICBpZiAoa2kuc2lnbnVtKCkgPT09IDApIHsKICAgICAgcmV0dXJuIHRoaXMuZGVyaXZlKGluZGV4ICsgMSkKICAgIH0KCiAgICBkZXJpdmVkS2V5UGFpciA9IG5ldyBFQ1BhaXIoa2ksIG51bGwsIHsKICAgICAgbmV0d29yazogdGhpcy5rZXlQYWlyLm5ldHdvcmsKICAgIH0pCgogIC8vIFB1YmxpYyBwYXJlbnQga2V5IC0+IHB1YmxpYyBjaGlsZCBrZXkKICB9IGVsc2UgewogICAgLy8gS2kgPSBwb2ludChwYXJzZTI1NihJTCkpICsgS3BhcgogICAgLy8gICAgPSBHKklMICsgS3BhcgogICAgdmFyIEtpID0gY3VydmUuRy5tdWx0aXBseShwSUwpLmFkZCh0aGlzLmtleVBhaXIuUSkKCiAgICAvLyBJbiBjYXNlIEtpIGlzIHRoZSBwb2ludCBhdCBpbmZpbml0eSwgcHJvY2VlZCB3aXRoIHRoZSBuZXh0IHZhbHVlIGZvciBpCiAgICBpZiAoY3VydmUuaXNJbmZpbml0eShLaSkpIHsKICAgICAgcmV0dXJuIHRoaXMuZGVyaXZlKGluZGV4ICsgMSkKICAgIH0KCiAgICBkZXJpdmVkS2V5UGFpciA9IG5ldyBFQ1BhaXIobnVsbCwgS2ksIHsKICAgICAgbmV0d29yazogdGhpcy5rZXlQYWlyLm5ldHdvcmsKICAgIH0pCiAgfQoKICB2YXIgaGQgPSBuZXcgSEROb2RlKGRlcml2ZWRLZXlQYWlyLCBJUikKICBoZC5kZXB0aCA9IHRoaXMuZGVwdGggKyAxCiAgaGQuaW5kZXggPSBpbmRleAogIGhkLnBhcmVudEZpbmdlcnByaW50ID0gdGhpcy5nZXRGaW5nZXJwcmludCgpLnJlYWRVSW50MzJCRSgwKQoKICByZXR1cm4gaGQKfQoKSEROb2RlLnByb3RvdHlwZS5kZXJpdmVIYXJkZW5lZCA9IGZ1bmN0aW9uIChpbmRleCkgewogIC8vIE9ubHkgZGVyaXZlcyBoYXJkZW5lZCBwcml2YXRlIGtleXMgYnkgZGVmYXVsdAogIHJldHVybiB0aGlzLmRlcml2ZShpbmRleCArIEhETm9kZS5ISUdIRVNUX0JJVCkKfQoKSEROb2RlLnByb3RvdHlwZS50b1N0cmluZyA9IEhETm9kZS5wcm90b3R5cGUudG9CYXNlNTgKCm1vZHVsZS5leHBvcnRzID0gSEROb2RlCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9jcnlwdG8iOjI3LCIuL2VjcGFpciI6MjksIi4vbmV0d29ya3MiOjM0LCIuL3R5cGVzIjo0MCwiYmlnaSI6MTksImJzNThjaGVjayI6NzQsImJ1ZmZlciI6NzAsImNyZWF0ZS1obWFjIjo4NSwiZWN1cnZlIjo5OSwidHlwZWZvcmNlIjoxNzJ9XSwzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gewogIEJsb2NrOiByZXF1aXJlKCcuL2Jsb2NrJyksCiAgRUNQYWlyOiByZXF1aXJlKCcuL2VjcGFpcicpLAogIEVDU2lnbmF0dXJlOiByZXF1aXJlKCcuL2Vjc2lnbmF0dXJlJyksCiAgSEROb2RlOiByZXF1aXJlKCcuL2hkbm9kZScpLAogIFRyYW5zYWN0aW9uOiByZXF1aXJlKCcuL3RyYW5zYWN0aW9uJyksCiAgVHJhbnNhY3Rpb25CdWlsZGVyOiByZXF1aXJlKCcuL3RyYW5zYWN0aW9uX2J1aWxkZXInKSwKCiAgYWRkcmVzczogcmVxdWlyZSgnLi9hZGRyZXNzJyksCiAgYnVmZmVydXRpbHM6IHJlcXVpcmUoJy4vYnVmZmVydXRpbHMnKSwKICBjcnlwdG86IHJlcXVpcmUoJy4vY3J5cHRvJyksCiAgbWVzc2FnZTogcmVxdWlyZSgnLi9tZXNzYWdlJyksCiAgbmV0d29ya3M6IHJlcXVpcmUoJy4vbmV0d29ya3MnKSwKICBvcGNvZGVzOiByZXF1aXJlKCcuL29wY29kZXMnKSwKICBzY3JpcHQ6IHJlcXVpcmUoJy4vc2NyaXB0JykKfQoKfSx7Ii4vYWRkcmVzcyI6MjQsIi4vYmxvY2siOjI1LCIuL2J1ZmZlcnV0aWxzIjoyNiwiLi9jcnlwdG8iOjI3LCIuL2VjcGFpciI6MjksIi4vZWNzaWduYXR1cmUiOjMwLCIuL2hkbm9kZSI6MzEsIi4vbWVzc2FnZSI6MzMsIi4vbmV0d29ya3MiOjM0LCIuL29wY29kZXMiOjM1LCIuL3NjcmlwdCI6MzYsIi4vdHJhbnNhY3Rpb24iOjM4LCIuL3RyYW5zYWN0aW9uX2J1aWxkZXIiOjM5fV0sMzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBidWZmZXJ1dGlscyA9IHJlcXVpcmUoJy4vYnVmZmVydXRpbHMnKQp2YXIgYmNyeXB0byA9IHJlcXVpcmUoJy4vY3J5cHRvJykKdmFyIGVjZHNhID0gcmVxdWlyZSgnLi9lY2RzYScpCnZhciBuZXR3b3JrcyA9IHJlcXVpcmUoJy4vbmV0d29ya3MnKQoKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKdmFyIEVDUGFpciA9IHJlcXVpcmUoJy4vZWNwYWlyJykKdmFyIEVDU2lnbmF0dXJlID0gcmVxdWlyZSgnLi9lY3NpZ25hdHVyZScpCgpmdW5jdGlvbiBtYWdpY0hhc2ggKG1lc3NhZ2UsIG5ldHdvcmspIHsKICB2YXIgbWVzc2FnZVByZWZpeCA9IG5ldyBCdWZmZXIobmV0d29yay5tZXNzYWdlUHJlZml4KQogIHZhciBtZXNzYWdlQnVmZmVyID0gbmV3IEJ1ZmZlcihtZXNzYWdlKQogIHZhciBsZW5ndGhCdWZmZXIgPSBidWZmZXJ1dGlscy52YXJJbnRCdWZmZXIobWVzc2FnZUJ1ZmZlci5sZW5ndGgpCgogIHZhciBidWZmZXIgPSBCdWZmZXIuY29uY2F0KFttZXNzYWdlUHJlZml4LCBsZW5ndGhCdWZmZXIsIG1lc3NhZ2VCdWZmZXJdKQogIHJldHVybiBiY3J5cHRvLmhhc2gyNTYoYnVmZmVyKQp9CgpmdW5jdGlvbiBzaWduIChrZXlQYWlyLCBtZXNzYWdlLCBuZXR3b3JrKSB7CiAgbmV0d29yayA9IG5ldHdvcmsgfHwgbmV0d29ya3MuYml0Y29pbgoKICB2YXIgaGFzaCA9IG1hZ2ljSGFzaChtZXNzYWdlLCBuZXR3b3JrKQogIHZhciBzaWduYXR1cmUgPSBrZXlQYWlyLnNpZ24oaGFzaCkKICB2YXIgZSA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihoYXNoKQogIHZhciBpID0gZWNkc2EuY2FsY1B1YktleVJlY292ZXJ5UGFyYW0oZSwgc2lnbmF0dXJlLCBrZXlQYWlyLlEpCgogIHJldHVybiBzaWduYXR1cmUudG9Db21wYWN0KGksIGtleVBhaXIuY29tcHJlc3NlZCkKfQoKZnVuY3Rpb24gdmVyaWZ5IChhZGRyZXNzLCBzaWduYXR1cmUsIG1lc3NhZ2UsIG5ldHdvcmspIHsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihzaWduYXR1cmUpKSB7CiAgICBzaWduYXR1cmUgPSBuZXcgQnVmZmVyKHNpZ25hdHVyZSwgJ2Jhc2U2NCcpCiAgfQoKICBuZXR3b3JrID0gbmV0d29yayB8fCBuZXR3b3Jrcy5iaXRjb2luCgogIHZhciBoYXNoID0gbWFnaWNIYXNoKG1lc3NhZ2UsIG5ldHdvcmspCiAgdmFyIHBhcnNlZCA9IEVDU2lnbmF0dXJlLnBhcnNlQ29tcGFjdChzaWduYXR1cmUpCiAgdmFyIGUgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoaGFzaCkKICB2YXIgUSA9IGVjZHNhLnJlY292ZXJQdWJLZXkoZSwgcGFyc2VkLnNpZ25hdHVyZSwgcGFyc2VkLmkpCgogIHZhciBrZXlQYWlyID0gbmV3IEVDUGFpcihudWxsLCBRLCB7CiAgICBjb21wcmVzc2VkOiBwYXJzZWQuY29tcHJlc3NlZCwKICAgIG5ldHdvcms6IG5ldHdvcmsKICB9KQoKICByZXR1cm4ga2V5UGFpci5nZXRBZGRyZXNzKCkgPT09IGFkZHJlc3MKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgbWFnaWNIYXNoOiBtYWdpY0hhc2gsCiAgc2lnbjogc2lnbiwKICB2ZXJpZnk6IHZlcmlmeQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9idWZmZXJ1dGlscyI6MjYsIi4vY3J5cHRvIjoyNywiLi9lY2RzYSI6MjgsIi4vZWNwYWlyIjoyOSwiLi9lY3NpZ25hdHVyZSI6MzAsIi4vbmV0d29ya3MiOjM0LCJiaWdpIjoxOSwiYnVmZmVyIjo3MH1dLDM0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gaHR0cHM6Ly9lbi5iaXRjb2luLml0L3dpa2kvTGlzdF9vZl9hZGRyZXNzX3ByZWZpeGVzCi8vIERvZ2Vjb2luIEJJUDMyIGlzIGEgcHJvcG9zZWQgc3RhbmRhcmQ6IGh0dHBzOi8vYml0Y29pbnRhbGsub3JnL2luZGV4LnBocD90b3BpYz00MDk3MzEKCm1vZHVsZS5leHBvcnRzID0gewogIGJpdGNvaW46IHsKICAgIG1lc3NhZ2VQcmVmaXg6ICdceDE4Qml0Y29pbiBTaWduZWQgTWVzc2FnZTpcbicsCiAgICBiaXAzMjogewogICAgICBwdWJsaWM6IDB4MDQ4OGIyMWUsCiAgICAgIHByaXZhdGU6IDB4MDQ4OGFkZTQKICAgIH0sCiAgICBwdWJLZXlIYXNoOiAweDAwLAogICAgc2NyaXB0SGFzaDogMHgwNSwKICAgIHdpZjogMHg4MCwKICAgIGR1c3RUaHJlc2hvbGQ6IDU0NiAvLyBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbi9iaXRjb2luL2Jsb2IvdjAuOS4yL3NyYy9jb3JlLmgjTDE1MS1MMTYyCiAgfSwKICB0ZXN0bmV0OiB7CiAgICBtZXNzYWdlUHJlZml4OiAnXHgxOEJpdGNvaW4gU2lnbmVkIE1lc3NhZ2U6XG4nLAogICAgYmlwMzI6IHsKICAgICAgcHVibGljOiAweDA0MzU4N2NmLAogICAgICBwcml2YXRlOiAweDA0MzU4Mzk0CiAgICB9LAogICAgcHViS2V5SGFzaDogMHg2ZiwKICAgIHNjcmlwdEhhc2g6IDB4YzQsCiAgICB3aWY6IDB4ZWYsCiAgICBkdXN0VGhyZXNob2xkOiA1NDYKICB9LAogIGxpdGVjb2luOiB7CiAgICBtZXNzYWdlUHJlZml4OiAnXHgxOUxpdGVjb2luIFNpZ25lZCBNZXNzYWdlOlxuJywKICAgIGJpcDMyOiB7CiAgICAgIHB1YmxpYzogMHgwMTlkYTQ2MiwKICAgICAgcHJpdmF0ZTogMHgwMTlkOWNmZQogICAgfSwKICAgIHB1YktleUhhc2g6IDB4MzAsCiAgICBzY3JpcHRIYXNoOiAweDA1LAogICAgd2lmOiAweGIwLAogICAgZHVzdFRocmVzaG9sZDogMCAvLyBodHRwczovL2dpdGh1Yi5jb20vbGl0ZWNvaW4tcHJvamVjdC9saXRlY29pbi9ibG9iL3YwLjguNy4yL3NyYy9tYWluLmNwcCNMMzYwLUwzNjUKICB9LAogIGRvZ2Vjb2luOiB7CiAgICBtZXNzYWdlUHJlZml4OiAnXHgxOURvZ2Vjb2luIFNpZ25lZCBNZXNzYWdlOlxuJywKICAgIGJpcDMyOiB7CiAgICAgIHB1YmxpYzogMHgwMmZhY2FmZCwKICAgICAgcHJpdmF0ZTogMHgwMmZhYzM5OAogICAgfSwKICAgIHB1YktleUhhc2g6IDB4MWUsCiAgICBzY3JpcHRIYXNoOiAweDE2LAogICAgd2lmOiAweDllLAogICAgZHVzdFRocmVzaG9sZDogMCAvLyBodHRwczovL2dpdGh1Yi5jb20vZG9nZWNvaW4vZG9nZWNvaW4vYmxvYi92MS43LjEvc3JjL2NvcmUuaCNMMTU1LUwxNjAKICB9Cn0KCn0se31dLDM1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHM9ewogICJPUF9GQUxTRSI6IDAsCiAgIk9QXzAiOiAwLAogICJPUF9QVVNIREFUQTEiOiA3NiwKICAiT1BfUFVTSERBVEEyIjogNzcsCiAgIk9QX1BVU0hEQVRBNCI6IDc4LAogICJPUF8xTkVHQVRFIjogNzksCiAgIk9QX1JFU0VSVkVEIjogODAsCiAgIk9QXzEiOiA4MSwKICAiT1BfVFJVRSI6IDgxLAogICJPUF8yIjogODIsCiAgIk9QXzMiOiA4MywKICAiT1BfNCI6IDg0LAogICJPUF81IjogODUsCiAgIk9QXzYiOiA4NiwKICAiT1BfNyI6IDg3LAogICJPUF84IjogODgsCiAgIk9QXzkiOiA4OSwKICAiT1BfMTAiOiA5MCwKICAiT1BfMTEiOiA5MSwKICAiT1BfMTIiOiA5MiwKICAiT1BfMTMiOiA5MywKICAiT1BfMTQiOiA5NCwKICAiT1BfMTUiOiA5NSwKICAiT1BfMTYiOiA5NiwKCiAgIk9QX05PUCI6IDk3LAogICJPUF9WRVIiOiA5OCwKICAiT1BfSUYiOiA5OSwKICAiT1BfTk9USUYiOiAxMDAsCiAgIk9QX1ZFUklGIjogMTAxLAogICJPUF9WRVJOT1RJRiI6IDEwMiwKICAiT1BfRUxTRSI6IDEwMywKICAiT1BfRU5ESUYiOiAxMDQsCiAgIk9QX1ZFUklGWSI6IDEwNSwKICAiT1BfUkVUVVJOIjogMTA2LAoKICAiT1BfVE9BTFRTVEFDSyI6IDEwNywKICAiT1BfRlJPTUFMVFNUQUNLIjogMTA4LAogICJPUF8yRFJPUCI6IDEwOSwKICAiT1BfMkRVUCI6IDExMCwKICAiT1BfM0RVUCI6IDExMSwKICAiT1BfMk9WRVIiOiAxMTIsCiAgIk9QXzJST1QiOiAxMTMsCiAgIk9QXzJTV0FQIjogMTE0LAogICJPUF9JRkRVUCI6IDExNSwKICAiT1BfREVQVEgiOiAxMTYsCiAgIk9QX0RST1AiOiAxMTcsCiAgIk9QX0RVUCI6IDExOCwKICAiT1BfTklQIjogMTE5LAogICJPUF9PVkVSIjogMTIwLAogICJPUF9QSUNLIjogMTIxLAogICJPUF9ST0xMIjogMTIyLAogICJPUF9ST1QiOiAxMjMsCiAgIk9QX1NXQVAiOiAxMjQsCiAgIk9QX1RVQ0siOiAxMjUsCgogICJPUF9DQVQiOiAxMjYsCiAgIk9QX1NVQlNUUiI6IDEyNywKICAiT1BfTEVGVCI6IDEyOCwKICAiT1BfUklHSFQiOiAxMjksCiAgIk9QX1NJWkUiOiAxMzAsCgogICJPUF9JTlZFUlQiOiAxMzEsCiAgIk9QX0FORCI6IDEzMiwKICAiT1BfT1IiOiAxMzMsCiAgIk9QX1hPUiI6IDEzNCwKICAiT1BfRVFVQUwiOiAxMzUsCiAgIk9QX0VRVUFMVkVSSUZZIjogMTM2LAogICJPUF9SRVNFUlZFRDEiOiAxMzcsCiAgIk9QX1JFU0VSVkVEMiI6IDEzOCwKCiAgIk9QXzFBREQiOiAxMzksCiAgIk9QXzFTVUIiOiAxNDAsCiAgIk9QXzJNVUwiOiAxNDEsCiAgIk9QXzJESVYiOiAxNDIsCiAgIk9QX05FR0FURSI6IDE0MywKICAiT1BfQUJTIjogMTQ0LAogICJPUF9OT1QiOiAxNDUsCiAgIk9QXzBOT1RFUVVBTCI6IDE0NiwKICAiT1BfQUREIjogMTQ3LAogICJPUF9TVUIiOiAxNDgsCiAgIk9QX01VTCI6IDE0OSwKICAiT1BfRElWIjogMTUwLAogICJPUF9NT0QiOiAxNTEsCiAgIk9QX0xTSElGVCI6IDE1MiwKICAiT1BfUlNISUZUIjogMTUzLAoKICAiT1BfQk9PTEFORCI6IDE1NCwKICAiT1BfQk9PTE9SIjogMTU1LAogICJPUF9OVU1FUVVBTCI6IDE1NiwKICAiT1BfTlVNRVFVQUxWRVJJRlkiOiAxNTcsCiAgIk9QX05VTU5PVEVRVUFMIjogMTU4LAogICJPUF9MRVNTVEhBTiI6IDE1OSwKICAiT1BfR1JFQVRFUlRIQU4iOiAxNjAsCiAgIk9QX0xFU1NUSEFOT1JFUVVBTCI6IDE2MSwKICAiT1BfR1JFQVRFUlRIQU5PUkVRVUFMIjogMTYyLAogICJPUF9NSU4iOiAxNjMsCiAgIk9QX01BWCI6IDE2NCwKCiAgIk9QX1dJVEhJTiI6IDE2NSwKCiAgIk9QX1JJUEVNRDE2MCI6IDE2NiwKICAiT1BfU0hBMSI6IDE2NywKICAiT1BfU0hBMjU2IjogMTY4LAogICJPUF9IQVNIMTYwIjogMTY5LAogICJPUF9IQVNIMjU2IjogMTcwLAogICJPUF9DT0RFU0VQQVJBVE9SIjogMTcxLAogICJPUF9DSEVDS1NJRyI6IDE3MiwKICAiT1BfQ0hFQ0tTSUdWRVJJRlkiOiAxNzMsCiAgIk9QX0NIRUNLTVVMVElTSUciOiAxNzQsCiAgIk9QX0NIRUNLTVVMVElTSUdWRVJJRlkiOiAxNzUsCgogICJPUF9OT1AxIjogMTc2LAogICJPUF9OT1AyIjogMTc3LAogICJPUF9DSEVDS0xPQ0tUSU1FVkVSSUZZIjogMTc3LAoKICAiT1BfTk9QMyI6IDE3OCwKICAiT1BfTk9QNCI6IDE3OSwKICAiT1BfTk9QNSI6IDE4MCwKICAiT1BfTk9QNiI6IDE4MSwKICAiT1BfTk9QNyI6IDE4MiwKICAiT1BfTk9QOCI6IDE4MywKICAiT1BfTk9QOSI6IDE4NCwKICAiT1BfTk9QMTAiOiAxODUsCgogICJPUF9QVUJLRVlIQVNIIjogMjUzLAogICJPUF9QVUJLRVkiOiAyNTQsCiAgIk9QX0lOVkFMSURPUENPREUiOiAyNTUKfQoKfSx7fV0sMzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBiaXA2NiA9IHJlcXVpcmUoJ2JpcDY2JykKdmFyIGJ1ZmZlcnV0aWxzID0gcmVxdWlyZSgnLi9idWZmZXJ1dGlscycpCnZhciB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKQp2YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJykKCnZhciBPUFMgPSByZXF1aXJlKCcuL29wY29kZXMnKQp2YXIgUkVWRVJTRV9PUFMgPSAoZnVuY3Rpb24gKCkgewogIHZhciByZXN1bHQgPSB7fQogIGZvciAodmFyIG9wIGluIE9QUykgewogICAgdmFyIGNvZGUgPSBPUFNbb3BdCiAgICByZXN1bHRbY29kZV0gPSBvcAogIH0KICByZXR1cm4gcmVzdWx0Cn0pKCkKCnZhciBPUF9JTlRfQkFTRSA9IE9QUy5PUF9SRVNFUlZFRCAvLyBPUF8xIC0gMQoKZnVuY3Rpb24gdG9BU00gKGNodW5rcykgewogIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmtzKSkgewogICAgY2h1bmtzID0gZGVjb21waWxlKGNodW5rcykKICB9CgogIHJldHVybiBjaHVua3MubWFwKGZ1bmN0aW9uIChjaHVuaykgewogICAgLy8gZGF0YT8KICAgIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSByZXR1cm4gY2h1bmsudG9TdHJpbmcoJ2hleCcpCgogICAgLy8gb3Bjb2RlIQogICAgcmV0dXJuIFJFVkVSU0VfT1BTW2NodW5rXQogIH0pLmpvaW4oJyAnKQp9CgpmdW5jdGlvbiBmcm9tQVNNIChhc20pIHsKICB0eXBlZm9yY2UodHlwZXMuU3RyaW5nLCBhc20pCgogIHJldHVybiBjb21waWxlKGFzbS5zcGxpdCgnICcpLm1hcChmdW5jdGlvbiAoY2h1bmtTdHIpIHsKICAgIC8vIG9wY29kZT8KICAgIGlmIChPUFNbY2h1bmtTdHJdICE9PSB1bmRlZmluZWQpIHJldHVybiBPUFNbY2h1bmtTdHJdCgogICAgLy8gZGF0YSEKICAgIHJldHVybiBuZXcgQnVmZmVyKGNodW5rU3RyLCAnaGV4JykKICB9KSkKfQoKZnVuY3Rpb24gY29tcGlsZSAoY2h1bmtzKSB7CiAgLy8gVE9ETzogcmVtb3ZlIG1lCiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVua3MpKSByZXR1cm4gY2h1bmtzCgogIHR5cGVmb3JjZSh0eXBlcy5BcnJheSwgY2h1bmtzKQoKICB2YXIgYnVmZmVyU2l6ZSA9IGNodW5rcy5yZWR1Y2UoZnVuY3Rpb24gKGFjY3VtLCBjaHVuaykgewogICAgLy8gZGF0YSBjaHVuawogICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpIHsKICAgICAgcmV0dXJuIGFjY3VtICsgYnVmZmVydXRpbHMucHVzaERhdGFTaXplKGNodW5rLmxlbmd0aCkgKyBjaHVuay5sZW5ndGgKICAgIH0KCiAgICAvLyBvcGNvZGUKICAgIHJldHVybiBhY2N1bSArIDEKICB9LCAwLjApCgogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKGJ1ZmZlclNpemUpCiAgdmFyIG9mZnNldCA9IDAKCiAgY2h1bmtzLmZvckVhY2goZnVuY3Rpb24gKGNodW5rKSB7CiAgICAvLyBkYXRhIGNodW5rCiAgICBpZiAoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgewogICAgICBvZmZzZXQgKz0gYnVmZmVydXRpbHMud3JpdGVQdXNoRGF0YUludChidWZmZXIsIGNodW5rLmxlbmd0aCwgb2Zmc2V0KQoKICAgICAgY2h1bmsuY29weShidWZmZXIsIG9mZnNldCkKICAgICAgb2Zmc2V0ICs9IGNodW5rLmxlbmd0aAoKICAgIC8vIG9wY29kZQogICAgfSBlbHNlIHsKICAgICAgYnVmZmVyLndyaXRlVUludDgoY2h1bmssIG9mZnNldCkKICAgICAgb2Zmc2V0ICs9IDEKICAgIH0KICB9KQoKICBpZiAob2Zmc2V0ICE9PSBidWZmZXIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBkZWNvZGUgY2h1bmtzJykKICByZXR1cm4gYnVmZmVyCn0KCmZ1bmN0aW9uIGRlY29tcGlsZSAoYnVmZmVyKSB7CiAgLy8gVE9ETzogcmVtb3ZlIG1lCiAgaWYgKHR5cGVzLkFycmF5KGJ1ZmZlcikpIHJldHVybiBidWZmZXIKCiAgdHlwZWZvcmNlKHR5cGVzLkJ1ZmZlciwgYnVmZmVyKQoKICB2YXIgY2h1bmtzID0gW10KICB2YXIgaSA9IDAKCiAgd2hpbGUgKGkgPCBidWZmZXIubGVuZ3RoKSB7CiAgICB2YXIgb3Bjb2RlID0gYnVmZmVyW2ldCgogICAgLy8gZGF0YSBjaHVuawogICAgaWYgKChvcGNvZGUgPiBPUFMuT1BfMCkgJiYgKG9wY29kZSA8PSBPUFMuT1BfUFVTSERBVEE0KSkgewogICAgICB2YXIgZCA9IGJ1ZmZlcnV0aWxzLnJlYWRQdXNoRGF0YUludChidWZmZXIsIGkpCgogICAgICAvLyBkaWQgcmVhZGluZyBhIHB1c2hEYXRhSW50IGZhaWw/IGVtcHR5IHNjcmlwdAogICAgICBpZiAoZCA9PT0gbnVsbCkgcmV0dXJuIFtdCiAgICAgIGkgKz0gZC5zaXplCgogICAgICAvLyBhdHRlbXB0IHRvIHJlYWQgdG9vIG11Y2ggZGF0YT8gZW1wdHkgc2NyaXB0CiAgICAgIGlmIChpICsgZC5udW1iZXIgPiBidWZmZXIubGVuZ3RoKSByZXR1cm4gW10KCiAgICAgIHZhciBkYXRhID0gYnVmZmVyLnNsaWNlKGksIGkgKyBkLm51bWJlcikKICAgICAgaSArPSBkLm51bWJlcgoKICAgICAgY2h1bmtzLnB1c2goZGF0YSkKCiAgICAvLyBvcGNvZGUKICAgIH0gZWxzZSB7CiAgICAgIGNodW5rcy5wdXNoKG9wY29kZSkKCiAgICAgIGkgKz0gMQogICAgfQogIH0KCiAgcmV0dXJuIGNodW5rcwp9CgpmdW5jdGlvbiBpc0Nhbm9uaWNhbFB1YktleSAoYnVmZmVyKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSkgcmV0dXJuIGZhbHNlCiAgaWYgKGJ1ZmZlci5sZW5ndGggPCAzMykgcmV0dXJuIGZhbHNlCgogIHN3aXRjaCAoYnVmZmVyWzBdKSB7CiAgICBjYXNlIDB4MDI6CiAgICBjYXNlIDB4MDM6CiAgICAgIHJldHVybiBidWZmZXIubGVuZ3RoID09PSAzMwogICAgY2FzZSAweDA0OgogICAgICByZXR1cm4gYnVmZmVyLmxlbmd0aCA9PT0gNjUKICB9CgogIHJldHVybiBmYWxzZQp9CgpmdW5jdGlvbiBpc0Nhbm9uaWNhbFNpZ25hdHVyZSAoYnVmZmVyKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSkgcmV0dXJuIGZhbHNlCiAgaWYgKCFpc0RlZmluZWRIYXNoVHlwZShidWZmZXJbYnVmZmVyLmxlbmd0aCAtIDFdKSkgcmV0dXJuIGZhbHNlCgogIHJldHVybiBiaXA2Ni5jaGVjayhidWZmZXIuc2xpY2UoMCwgLTEpKQp9CgpmdW5jdGlvbiBpc0RlZmluZWRIYXNoVHlwZSAoaGFzaFR5cGUpIHsKICB2YXIgaGFzaFR5cGVNb2QgPSBoYXNoVHlwZSAmIH4weDgwCgovLyByZXR1cm4gaGFzaFR5cGVNb2QgPiBTSUdIQVNIX0FMTCAmJiBoYXNoVHlwZU1vZCA8IFNJR0hBU0hfU0lOR0xFCiAgcmV0dXJuIGhhc2hUeXBlTW9kID4gMHgwMCAmJiBoYXNoVHlwZU1vZCA8IDB4MDQKfQoKZnVuY3Rpb24gaXNQdWJLZXlIYXNoSW5wdXQgKHNjcmlwdCkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQoKICByZXR1cm4gY2h1bmtzLmxlbmd0aCA9PT0gMiAmJgogICAgaXNDYW5vbmljYWxTaWduYXR1cmUoY2h1bmtzWzBdKSAmJgogICAgaXNDYW5vbmljYWxQdWJLZXkoY2h1bmtzWzFdKQp9CgpmdW5jdGlvbiBpc1B1YktleUhhc2hPdXRwdXQgKHNjcmlwdCkgewogIHZhciBidWZmZXIgPSBjb21waWxlKHNjcmlwdCkKCiAgcmV0dXJuIGJ1ZmZlci5sZW5ndGggPT09IDI1ICYmCiAgICBidWZmZXJbMF0gPT09IE9QUy5PUF9EVVAgJiYKICAgIGJ1ZmZlclsxXSA9PT0gT1BTLk9QX0hBU0gxNjAgJiYKICAgIGJ1ZmZlclsyXSA9PT0gMHgxNCAmJgogICAgYnVmZmVyWzIzXSA9PT0gT1BTLk9QX0VRVUFMVkVSSUZZICYmCiAgICBidWZmZXJbMjRdID09PSBPUFMuT1BfQ0hFQ0tTSUcKfQoKZnVuY3Rpb24gaXNQdWJLZXlJbnB1dCAoc2NyaXB0KSB7CiAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHQpCgogIHJldHVybiBjaHVua3MubGVuZ3RoID09PSAxICYmCiAgICBpc0Nhbm9uaWNhbFNpZ25hdHVyZShjaHVua3NbMF0pCn0KCmZ1bmN0aW9uIGlzUHViS2V5T3V0cHV0IChzY3JpcHQpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKCiAgcmV0dXJuIGNodW5rcy5sZW5ndGggPT09IDIgJiYKICAgIGlzQ2Fub25pY2FsUHViS2V5KGNodW5rc1swXSkgJiYKICAgIGNodW5rc1sxXSA9PT0gT1BTLk9QX0NIRUNLU0lHCn0KCmZ1bmN0aW9uIGlzU2NyaXB0SGFzaElucHV0IChzY3JpcHQsIGFsbG93SW5jb21wbGV0ZSkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQogIGlmIChjaHVua3MubGVuZ3RoIDwgMikgcmV0dXJuIGZhbHNlCgogIHZhciBsYXN0Q2h1bmsgPSBjaHVua3NbY2h1bmtzLmxlbmd0aCAtIDFdCiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIobGFzdENodW5rKSkgcmV0dXJuIGZhbHNlCgogIHZhciBzY3JpcHRTaWdDaHVua3MgPSBjaHVua3Muc2xpY2UoMCwgLTEpCiAgdmFyIHJlZGVlbVNjcmlwdENodW5rcyA9IGRlY29tcGlsZShsYXN0Q2h1bmspCgogIC8vIGlzIHJlZGVlbVNjcmlwdCBhIHZhbGlkIHNjcmlwdD8KICBpZiAocmVkZWVtU2NyaXB0Q2h1bmtzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlCgogIHJldHVybiBjbGFzc2lmeUlucHV0KHNjcmlwdFNpZ0NodW5rcywgYWxsb3dJbmNvbXBsZXRlKSA9PT0gY2xhc3NpZnlPdXRwdXQocmVkZWVtU2NyaXB0Q2h1bmtzKQp9CgpmdW5jdGlvbiBpc1NjcmlwdEhhc2hPdXRwdXQgKHNjcmlwdCkgewogIHZhciBidWZmZXIgPSBjb21waWxlKHNjcmlwdCkKCiAgcmV0dXJuIGJ1ZmZlci5sZW5ndGggPT09IDIzICYmCiAgICBidWZmZXJbMF0gPT09IE9QUy5PUF9IQVNIMTYwICYmCiAgICBidWZmZXJbMV0gPT09IDB4MTQgJiYKICAgIGJ1ZmZlclsyMl0gPT09IE9QUy5PUF9FUVVBTAp9CgovLyBhbGxvd0luY29tcGxldGUgaXMgdG8gYWNjb3VudCBmb3IgY29tYmluaW5nIHNpZ25hdHVyZXMKLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpdGNvaW4vYmxvYi9mNDI1MDUwNTQ2NjQ0YTM2YjBiOGUwZWIyZjY5MzRhM2UwZjZmODBmL3NyYy9zY3JpcHQvc2lnbi5jcHAjTDE5NS1MMTk3CmZ1bmN0aW9uIGlzTXVsdGlzaWdJbnB1dCAoc2NyaXB0LCBhbGxvd0luY29tcGxldGUpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKICBpZiAoY2h1bmtzLmxlbmd0aCA8IDIpIHJldHVybiBmYWxzZQogIGlmIChjaHVua3NbMF0gIT09IE9QUy5PUF8wKSByZXR1cm4gZmFsc2UKCiAgaWYgKGFsbG93SW5jb21wbGV0ZSkgewogICAgcmV0dXJuIGNodW5rcy5zbGljZSgxKS5ldmVyeShmdW5jdGlvbiAoY2h1bmspIHsKICAgICAgcmV0dXJuIGNodW5rID09PSBPUFMuT1BfMCB8fCBpc0Nhbm9uaWNhbFNpZ25hdHVyZShjaHVuaykKICAgIH0pCiAgfQoKICByZXR1cm4gY2h1bmtzLnNsaWNlKDEpLmV2ZXJ5KGlzQ2Fub25pY2FsU2lnbmF0dXJlKQp9CgpmdW5jdGlvbiBpc011bHRpc2lnT3V0cHV0IChzY3JpcHQpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKICBpZiAoY2h1bmtzLmxlbmd0aCA8IDQpIHJldHVybiBmYWxzZQogIGlmIChjaHVua3NbY2h1bmtzLmxlbmd0aCAtIDFdICE9PSBPUFMuT1BfQ0hFQ0tNVUxUSVNJRykgcmV0dXJuIGZhbHNlCgogIHZhciBtT3AgPSBjaHVua3NbMF0KICB2YXIgbk9wID0gY2h1bmtzW2NodW5rcy5sZW5ndGggLSAyXQoKICBpZiAoIXR5cGVzLk51bWJlcihtT3ApKSByZXR1cm4gZmFsc2UKICBpZiAoIXR5cGVzLk51bWJlcihuT3ApKSByZXR1cm4gZmFsc2UKCiAgdmFyIG0gPSBtT3AgLSBPUF9JTlRfQkFTRQogIHZhciBuID0gbk9wIC0gT1BfSU5UX0JBU0UKCiAgLy8gMCA8IG0gPD0gbiA8PSAxNgogIGlmIChtIDw9IDApIHJldHVybiBmYWxzZQogIGlmIChtID4gbikgcmV0dXJuIGZhbHNlCiAgaWYgKG4gPiAxNikgcmV0dXJuIGZhbHNlCiAgaWYgKG4gIT09IGNodW5rcy5sZW5ndGggLSAzKSByZXR1cm4gZmFsc2UKCiAgcmV0dXJuIGNodW5rcy5zbGljZSgxLCAtMikuZXZlcnkoaXNDYW5vbmljYWxQdWJLZXkpCn0KCmZ1bmN0aW9uIGlzTnVsbERhdGFPdXRwdXQgKHNjcmlwdCkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQogIHJldHVybiBjaHVua3NbMF0gPT09IE9QUy5PUF9SRVRVUk4KfQoKZnVuY3Rpb24gY2xhc3NpZnlPdXRwdXQgKHNjcmlwdCkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQoKICBpZiAoaXNQdWJLZXlIYXNoT3V0cHV0KGNodW5rcykpIHsKICAgIHJldHVybiAncHVia2V5aGFzaCcKICB9IGVsc2UgaWYgKGlzU2NyaXB0SGFzaE91dHB1dChjaHVua3MpKSB7CiAgICByZXR1cm4gJ3NjcmlwdGhhc2gnCiAgfSBlbHNlIGlmIChpc011bHRpc2lnT3V0cHV0KGNodW5rcykpIHsKICAgIHJldHVybiAnbXVsdGlzaWcnCiAgfSBlbHNlIGlmIChpc1B1YktleU91dHB1dChjaHVua3MpKSB7CiAgICByZXR1cm4gJ3B1YmtleScKICB9IGVsc2UgaWYgKGlzTnVsbERhdGFPdXRwdXQoY2h1bmtzKSkgewogICAgcmV0dXJuICdudWxsZGF0YScKICB9CgogIHJldHVybiAnbm9uc3RhbmRhcmQnCn0KCmZ1bmN0aW9uIGNsYXNzaWZ5SW5wdXQgKHNjcmlwdCwgYWxsb3dJbmNvbXBsZXRlKSB7CiAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHQpCgogIGlmIChpc1B1YktleUhhc2hJbnB1dChjaHVua3MpKSB7CiAgICByZXR1cm4gJ3B1YmtleWhhc2gnCiAgfSBlbHNlIGlmIChpc011bHRpc2lnSW5wdXQoY2h1bmtzLCBhbGxvd0luY29tcGxldGUpKSB7CiAgICByZXR1cm4gJ211bHRpc2lnJwogIH0gZWxzZSBpZiAoaXNTY3JpcHRIYXNoSW5wdXQoY2h1bmtzLCBhbGxvd0luY29tcGxldGUpKSB7CiAgICByZXR1cm4gJ3NjcmlwdGhhc2gnCiAgfSBlbHNlIGlmIChpc1B1YktleUlucHV0KGNodW5rcykpIHsKICAgIHJldHVybiAncHVia2V5JwogIH0KCiAgcmV0dXJuICdub25zdGFuZGFyZCcKfQoKLy8gU3RhbmRhcmQgU2NyaXB0IFRlbXBsYXRlcwovLyB7cHViS2V5fSBPUF9DSEVDS1NJRwpmdW5jdGlvbiBwdWJLZXlPdXRwdXQgKHB1YktleSkgewogIHJldHVybiBjb21waWxlKFtwdWJLZXksIE9QUy5PUF9DSEVDS1NJR10pCn0KCi8vIE9QX0RVUCBPUF9IQVNIMTYwIHtwdWJLZXlIYXNofSBPUF9FUVVBTFZFUklGWSBPUF9DSEVDS1NJRwpmdW5jdGlvbiBwdWJLZXlIYXNoT3V0cHV0IChwdWJLZXlIYXNoKSB7CiAgdHlwZWZvcmNlKHR5cGVzLkhhc2gxNjBiaXQsIHB1YktleUhhc2gpCgogIHJldHVybiBjb21waWxlKFtPUFMuT1BfRFVQLCBPUFMuT1BfSEFTSDE2MCwgcHViS2V5SGFzaCwgT1BTLk9QX0VRVUFMVkVSSUZZLCBPUFMuT1BfQ0hFQ0tTSUddKQp9CgovLyBPUF9IQVNIMTYwIHtzY3JpcHRIYXNofSBPUF9FUVVBTApmdW5jdGlvbiBzY3JpcHRIYXNoT3V0cHV0IChzY3JpcHRIYXNoKSB7CiAgdHlwZWZvcmNlKHR5cGVzLkhhc2gxNjBiaXQsIHNjcmlwdEhhc2gpCgogIHJldHVybiBjb21waWxlKFtPUFMuT1BfSEFTSDE2MCwgc2NyaXB0SGFzaCwgT1BTLk9QX0VRVUFMXSkKfQoKLy8gbSBbcHViS2V5cyAuLi5dIG4gT1BfQ0hFQ0tNVUxUSVNJRwpmdW5jdGlvbiBtdWx0aXNpZ091dHB1dCAobSwgcHViS2V5cykgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5OdW1iZXIsIFt0eXBlcy5CdWZmZXJdKSwgYXJndW1lbnRzKQoKICB2YXIgbiA9IHB1YktleXMubGVuZ3RoCiAgaWYgKG4gPCBtKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBlbm91Z2ggcHViS2V5cyBwcm92aWRlZCcpCgogIHJldHVybiBjb21waWxlKFtdLmNvbmNhdCgKICAgIE9QX0lOVF9CQVNFICsgbSwKICAgIHB1YktleXMsCiAgICBPUF9JTlRfQkFTRSArIG4sCiAgICBPUFMuT1BfQ0hFQ0tNVUxUSVNJRwogICkpCn0KCi8vIHtzaWduYXR1cmV9CmZ1bmN0aW9uIHB1YktleUlucHV0IChzaWduYXR1cmUpIHsKICB0eXBlZm9yY2UodHlwZXMuQnVmZmVyLCBzaWduYXR1cmUpCgogIHJldHVybiBjb21waWxlKFtzaWduYXR1cmVdKQp9CgovLyB7c2lnbmF0dXJlfSB7cHViS2V5fQpmdW5jdGlvbiBwdWJLZXlIYXNoSW5wdXQgKHNpZ25hdHVyZSwgcHViS2V5KSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkJ1ZmZlciwgdHlwZXMuQnVmZmVyKSwgYXJndW1lbnRzKQoKICByZXR1cm4gY29tcGlsZShbc2lnbmF0dXJlLCBwdWJLZXldKQp9CgovLyA8c2NyaXB0U2lnPiB7c2VyaWFsaXplZCBzY3JpcHRQdWJLZXkgc2NyaXB0fQpmdW5jdGlvbiBzY3JpcHRIYXNoSW5wdXQgKHNjcmlwdFNpZywgc2NyaXB0UHViS2V5KSB7CiAgdmFyIHNjcmlwdFNpZ0NodW5rcyA9IGRlY29tcGlsZShzY3JpcHRTaWcpCiAgdmFyIHNlcmlhbGl6ZWRTY3JpcHRQdWJLZXkgPSBjb21waWxlKHNjcmlwdFB1YktleSkKCiAgcmV0dXJuIGNvbXBpbGUoW10uY29uY2F0KAogICAgc2NyaXB0U2lnQ2h1bmtzLAogICAgc2VyaWFsaXplZFNjcmlwdFB1YktleQogICkpCn0KCi8vIE9QXzAgW3NpZ25hdHVyZXMgLi4uXQpmdW5jdGlvbiBtdWx0aXNpZ0lucHV0IChzaWduYXR1cmVzLCBzY3JpcHRQdWJLZXkpIHsKICBpZiAoc2NyaXB0UHViS2V5KSB7CiAgICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdFB1YktleSkKICAgIGlmICghaXNNdWx0aXNpZ091dHB1dChjaHVua3MpKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIG11bHRpc2lnIHNjcmlwdFB1YktleScpCgogICAgdmFyIG1PcCA9IGNodW5rc1swXQogICAgdmFyIG5PcCA9IGNodW5rc1tjaHVua3MubGVuZ3RoIC0gMl0KICAgIHZhciBtID0gbU9wIC0gT1BfSU5UX0JBU0UKICAgIHZhciBuID0gbk9wIC0gT1BfSU5UX0JBU0UKCiAgICBpZiAoc2lnbmF0dXJlcy5sZW5ndGggPCBtKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBlbm91Z2ggc2lnbmF0dXJlcyBwcm92aWRlZCcpCiAgICBpZiAoc2lnbmF0dXJlcy5sZW5ndGggPiBuKSB0aHJvdyBuZXcgRXJyb3IoJ1RvbyBtYW55IHNpZ25hdHVyZXMgcHJvdmlkZWQnKQogIH0KCiAgcmV0dXJuIGNvbXBpbGUoW10uY29uY2F0KE9QUy5PUF8wLCBzaWduYXR1cmVzKSkKfQoKZnVuY3Rpb24gbnVsbERhdGFPdXRwdXQgKGRhdGEpIHsKICByZXR1cm4gY29tcGlsZShbT1BTLk9QX1JFVFVSTiwgZGF0YV0pCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGNvbXBpbGU6IGNvbXBpbGUsCiAgZGVjb21waWxlOiBkZWNvbXBpbGUsCiAgZnJvbUFTTTogZnJvbUFTTSwKICB0b0FTTTogdG9BU00sCgogIG51bWJlcjogcmVxdWlyZSgnLi9zY3JpcHRfbnVtYmVyJyksCgogIGlzQ2Fub25pY2FsUHViS2V5OiBpc0Nhbm9uaWNhbFB1YktleSwKICBpc0Nhbm9uaWNhbFNpZ25hdHVyZTogaXNDYW5vbmljYWxTaWduYXR1cmUsCiAgaXNEZWZpbmVkSGFzaFR5cGU6IGlzRGVmaW5lZEhhc2hUeXBlLAogIGlzUHViS2V5SGFzaElucHV0OiBpc1B1YktleUhhc2hJbnB1dCwKICBpc1B1YktleUhhc2hPdXRwdXQ6IGlzUHViS2V5SGFzaE91dHB1dCwKICBpc1B1YktleUlucHV0OiBpc1B1YktleUlucHV0LAogIGlzUHViS2V5T3V0cHV0OiBpc1B1YktleU91dHB1dCwKICBpc1NjcmlwdEhhc2hJbnB1dDogaXNTY3JpcHRIYXNoSW5wdXQsCiAgaXNTY3JpcHRIYXNoT3V0cHV0OiBpc1NjcmlwdEhhc2hPdXRwdXQsCiAgaXNNdWx0aXNpZ0lucHV0OiBpc011bHRpc2lnSW5wdXQsCiAgaXNNdWx0aXNpZ091dHB1dDogaXNNdWx0aXNpZ091dHB1dCwKICBpc051bGxEYXRhT3V0cHV0OiBpc051bGxEYXRhT3V0cHV0LAogIGNsYXNzaWZ5T3V0cHV0OiBjbGFzc2lmeU91dHB1dCwKICBjbGFzc2lmeUlucHV0OiBjbGFzc2lmeUlucHV0LAogIHB1YktleU91dHB1dDogcHViS2V5T3V0cHV0LAogIHB1YktleUhhc2hPdXRwdXQ6IHB1YktleUhhc2hPdXRwdXQsCiAgc2NyaXB0SGFzaE91dHB1dDogc2NyaXB0SGFzaE91dHB1dCwKICBtdWx0aXNpZ091dHB1dDogbXVsdGlzaWdPdXRwdXQsCiAgcHViS2V5SW5wdXQ6IHB1YktleUlucHV0LAogIHB1YktleUhhc2hJbnB1dDogcHViS2V5SGFzaElucHV0LAogIHNjcmlwdEhhc2hJbnB1dDogc2NyaXB0SGFzaElucHV0LAogIG11bHRpc2lnSW5wdXQ6IG11bHRpc2lnSW5wdXQsCiAgbnVsbERhdGFPdXRwdXQ6IG51bGxEYXRhT3V0cHV0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2J1ZmZlcnV0aWxzIjoyNiwiLi9vcGNvZGVzIjozNSwiLi9zY3JpcHRfbnVtYmVyIjozNywiLi90eXBlcyI6NDAsImJpcDY2IjoyMywiYnVmZmVyIjo3MCwidHlwZWZvcmNlIjoxNzJ9XSwzNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKZnVuY3Rpb24gZGVjb2RlIChidWZmZXIsIG1heExlbmd0aCwgbWluaW1hbCkgewogIG1heExlbmd0aCA9IG1heExlbmd0aCB8fCA0CiAgbWluaW1hbCA9IG1pbmltYWwgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBtaW5pbWFsCgogIHZhciBsZW5ndGggPSBidWZmZXIubGVuZ3RoCiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuIDAKICBpZiAobGVuZ3RoID4gbWF4TGVuZ3RoKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdTY3JpcHQgbnVtYmVyIG92ZXJmbG93JykKICBpZiAobWluaW1hbCkgewogICAgaWYgKChidWZmZXJbbGVuZ3RoIC0gMV0gJiAweDdmKSA9PT0gMCkgewogICAgICBpZiAobGVuZ3RoIDw9IDEgfHwgKGJ1ZmZlcltsZW5ndGggLSAyXSAmIDB4ODApID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ05vbi1taW5pbWFsbHkgZW5jb2RlZCBzY3JpcHQgbnVtYmVyJykKICAgIH0KICB9CgogIC8vIDQwLWJpdAogIGlmIChsZW5ndGggPT09IDUpIHsKICAgIHZhciBhID0gYnVmZmVyLnJlYWRVSW50MzJMRSgwKQogICAgdmFyIGIgPSBidWZmZXIucmVhZFVJbnQ4KDQpCgogICAgaWYgKGIgJiAweDgwKSByZXR1cm4gLSgoYiAmIH4weDgwKSAqIDB4MTAwMDAwMDAwICsgYSkKICAgIHJldHVybiBiICogMHgxMDAwMDAwMDAgKyBhCiAgfQoKICB2YXIgcmVzdWx0ID0gMAoKICAvLyAzMi1iaXQgLyAyNC1iaXQgLyAxNi1iaXQgLyA4LWJpdAogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKICAgIHJlc3VsdCB8PSBidWZmZXJbaV0gPDwgKDggKiBpKQogIH0KCiAgaWYgKGJ1ZmZlcltsZW5ndGggLSAxXSAmIDB4ODApIHJldHVybiAtKHJlc3VsdCAmIH4oMHg4MCA8PCAoOCAqIChsZW5ndGggLSAxKSkpKQogIHJldHVybiByZXN1bHQKfQoKZnVuY3Rpb24gc2NyaXB0TnVtU2l6ZSAoaSkgewogIHJldHVybiBpID4gMHg3ZmZmZmZmZiA/IDUKICA6IGkgPiAweDdmZmZmZiA/IDQKICA6IGkgPiAweDdmZmYgPyAzCiAgOiBpID4gMHg3ZiA/IDIKICA6IGkgPiAweDAwID8gMQogIDogMAp9CgpmdW5jdGlvbiBlbmNvZGUgKG51bWJlcikgewogIHZhciB2YWx1ZSA9IE1hdGguYWJzKG51bWJlcikKICB2YXIgc2l6ZSA9IHNjcmlwdE51bVNpemUodmFsdWUpCiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIoc2l6ZSkKICB2YXIgbmVnYXRpdmUgPSBudW1iZXIgPCAwCgogIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7CiAgICBidWZmZXIud3JpdGVVSW50OCh2YWx1ZSAmIDB4ZmYsIGkpCiAgICB2YWx1ZSA+Pj0gOAogIH0KCiAgaWYgKGJ1ZmZlcltzaXplIC0gMV0gJiAweDgwKSB7CiAgICBidWZmZXIud3JpdGVVSW50OChuZWdhdGl2ZSA/IDB4ODAgOiAweDAwLCBzaXplIC0gMSkKICB9IGVsc2UgaWYgKG5lZ2F0aXZlKSB7CiAgICBidWZmZXJbc2l6ZSAtIDFdIHw9IDB4ODAKICB9CgogIHJldHVybiBidWZmZXIKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgZGVjb2RlOiBkZWNvZGUsCiAgZW5jb2RlOiBlbmNvZGUKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzB9XSwzODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJjcnlwdG8gPSByZXF1aXJlKCcuL2NyeXB0bycpCnZhciBic2NyaXB0ID0gcmVxdWlyZSgnLi9zY3JpcHQnKQp2YXIgYnVmZmVydXRpbHMgPSByZXF1aXJlKCcuL2J1ZmZlcnV0aWxzJykKdmFyIG9wY29kZXMgPSByZXF1aXJlKCcuL29wY29kZXMnKQp2YXIgdHlwZWZvcmNlID0gcmVxdWlyZSgndHlwZWZvcmNlJykKdmFyIHR5cGVzID0gcmVxdWlyZSgnLi90eXBlcycpCgpmdW5jdGlvbiBUcmFuc2FjdGlvbiAoKSB7CiAgdGhpcy52ZXJzaW9uID0gMQogIHRoaXMubG9ja3RpbWUgPSAwCiAgdGhpcy5pbnMgPSBbXQogIHRoaXMub3V0cyA9IFtdCn0KClRyYW5zYWN0aW9uLkRFRkFVTFRfU0VRVUVOQ0UgPSAweGZmZmZmZmZmClRyYW5zYWN0aW9uLlNJR0hBU0hfQUxMID0gMHgwMQpUcmFuc2FjdGlvbi5TSUdIQVNIX05PTkUgPSAweDAyClRyYW5zYWN0aW9uLlNJR0hBU0hfU0lOR0xFID0gMHgwMwpUcmFuc2FjdGlvbi5TSUdIQVNIX0FOWU9ORUNBTlBBWSA9IDB4ODAKClRyYW5zYWN0aW9uLmZyb21CdWZmZXIgPSBmdW5jdGlvbiAoYnVmZmVyLCBfX25vU3RyaWN0KSB7CiAgdmFyIG9mZnNldCA9IDAKICBmdW5jdGlvbiByZWFkU2xpY2UgKG4pIHsKICAgIG9mZnNldCArPSBuCiAgICByZXR1cm4gYnVmZmVyLnNsaWNlKG9mZnNldCAtIG4sIG9mZnNldCkKICB9CgogIGZ1bmN0aW9uIHJlYWRVSW50MzIgKCkgewogICAgdmFyIGkgPSBidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCkKICAgIG9mZnNldCArPSA0CiAgICByZXR1cm4gaQogIH0KCiAgZnVuY3Rpb24gcmVhZFVJbnQ2NCAoKSB7CiAgICB2YXIgaSA9IGJ1ZmZlcnV0aWxzLnJlYWRVSW50NjRMRShidWZmZXIsIG9mZnNldCkKICAgIG9mZnNldCArPSA4CiAgICByZXR1cm4gaQogIH0KCiAgZnVuY3Rpb24gcmVhZFZhckludCAoKSB7CiAgICB2YXIgdmkgPSBidWZmZXJ1dGlscy5yZWFkVmFySW50KGJ1ZmZlciwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IHZpLnNpemUKICAgIHJldHVybiB2aS5udW1iZXIKICB9CgogIGZ1bmN0aW9uIHJlYWRTY3JpcHQgKCkgewogICAgcmV0dXJuIHJlYWRTbGljZShyZWFkVmFySW50KCkpCiAgfQoKICB2YXIgdHggPSBuZXcgVHJhbnNhY3Rpb24oKQogIHR4LnZlcnNpb24gPSByZWFkVUludDMyKCkKCiAgdmFyIHZpbkxlbiA9IHJlYWRWYXJJbnQoKQogIGZvciAodmFyIGkgPSAwOyBpIDwgdmluTGVuOyArK2kpIHsKICAgIHR4Lmlucy5wdXNoKHsKICAgICAgaGFzaDogcmVhZFNsaWNlKDMyKSwKICAgICAgaW5kZXg6IHJlYWRVSW50MzIoKSwKICAgICAgc2NyaXB0OiByZWFkU2NyaXB0KCksCiAgICAgIHNlcXVlbmNlOiByZWFkVUludDMyKCkKICAgIH0pCiAgfQoKICB2YXIgdm91dExlbiA9IHJlYWRWYXJJbnQoKQogIGZvciAoaSA9IDA7IGkgPCB2b3V0TGVuOyArK2kpIHsKICAgIHR4Lm91dHMucHVzaCh7CiAgICAgIHZhbHVlOiByZWFkVUludDY0KCksCiAgICAgIHNjcmlwdDogcmVhZFNjcmlwdCgpCiAgICB9KQogIH0KCiAgdHgubG9ja3RpbWUgPSByZWFkVUludDMyKCkKCiAgaWYgKF9fbm9TdHJpY3QpIHJldHVybiB0eAogIGlmIChvZmZzZXQgIT09IGJ1ZmZlci5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignVHJhbnNhY3Rpb24gaGFzIHVuZXhwZWN0ZWQgZGF0YScpCgogIHJldHVybiB0eAp9CgpUcmFuc2FjdGlvbi5mcm9tSGV4ID0gZnVuY3Rpb24gKGhleCkgewogIHJldHVybiBUcmFuc2FjdGlvbi5mcm9tQnVmZmVyKG5ldyBCdWZmZXIoaGV4LCAnaGV4JykpCn0KClRyYW5zYWN0aW9uLmlzQ29pbmJhc2VIYXNoID0gZnVuY3Rpb24gKGJ1ZmZlcikgewogIHJldHVybiBBcnJheS5wcm90b3R5cGUuZXZlcnkuY2FsbChidWZmZXIsIGZ1bmN0aW9uICh4KSB7CiAgICByZXR1cm4geCA9PT0gMAogIH0pCn0KCnZhciBFTVBUWV9TQ1JJUFQgPSBuZXcgQnVmZmVyKDApCgpUcmFuc2FjdGlvbi5wcm90b3R5cGUuYWRkSW5wdXQgPSBmdW5jdGlvbiAoaGFzaCwgaW5kZXgsIHNlcXVlbmNlLCBzY3JpcHRTaWcpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUoCiAgICB0eXBlcy5IYXNoMjU2Yml0LAogICAgdHlwZXMuVUludDMyLAogICAgdHlwZXMubWF5YmUodHlwZXMuVUludDMyKSwKICAgIHR5cGVzLm1heWJlKHR5cGVzLkJ1ZmZlcikKICApLCBhcmd1bWVudHMpCgogIGlmICh0eXBlcy5OdWxsKHNlcXVlbmNlKSkgewogICAgc2VxdWVuY2UgPSBUcmFuc2FjdGlvbi5ERUZBVUxUX1NFUVVFTkNFCiAgfQoKICAvLyBBZGQgdGhlIGlucHV0IGFuZCByZXR1cm4gdGhlIGlucHV0J3MgaW5kZXgKICByZXR1cm4gKHRoaXMuaW5zLnB1c2goewogICAgaGFzaDogaGFzaCwKICAgIGluZGV4OiBpbmRleCwKICAgIHNjcmlwdDogc2NyaXB0U2lnIHx8IEVNUFRZX1NDUklQVCwKICAgIHNlcXVlbmNlOiBzZXF1ZW5jZQogIH0pIC0gMSkKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLmFkZE91dHB1dCA9IGZ1bmN0aW9uIChzY3JpcHRQdWJLZXksIHZhbHVlKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkJ1ZmZlciwgdHlwZXMuVUludDUzKSwgYXJndW1lbnRzKQoKICAvLyBBZGQgdGhlIG91dHB1dCBhbmQgcmV0dXJuIHRoZSBvdXRwdXQncyBpbmRleAogIHJldHVybiAodGhpcy5vdXRzLnB1c2goewogICAgc2NyaXB0OiBzY3JpcHRQdWJLZXksCiAgICB2YWx1ZTogdmFsdWUKICB9KSAtIDEpCn0KClRyYW5zYWN0aW9uLnByb3RvdHlwZS5ieXRlTGVuZ3RoID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIHNjcmlwdFNpemUgKHNvbWVTY3JpcHQpIHsKICAgIHZhciBsZW5ndGggPSBzb21lU2NyaXB0Lmxlbmd0aAoKICAgIHJldHVybiBidWZmZXJ1dGlscy52YXJJbnRTaXplKGxlbmd0aCkgKyBsZW5ndGgKICB9CgogIHJldHVybiAoCiAgICA4ICsKICAgIGJ1ZmZlcnV0aWxzLnZhckludFNpemUodGhpcy5pbnMubGVuZ3RoKSArCiAgICBidWZmZXJ1dGlscy52YXJJbnRTaXplKHRoaXMub3V0cy5sZW5ndGgpICsKICAgIHRoaXMuaW5zLnJlZHVjZShmdW5jdGlvbiAoc3VtLCBpbnB1dCkgeyByZXR1cm4gc3VtICsgNDAgKyBzY3JpcHRTaXplKGlucHV0LnNjcmlwdCkgfSwgMCkgKwogICAgdGhpcy5vdXRzLnJlZHVjZShmdW5jdGlvbiAoc3VtLCBvdXRwdXQpIHsgcmV0dXJuIHN1bSArIDggKyBzY3JpcHRTaXplKG91dHB1dC5zY3JpcHQpIH0sIDApCiAgKQp9CgpUcmFuc2FjdGlvbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIG5ld1R4ID0gbmV3IFRyYW5zYWN0aW9uKCkKICBuZXdUeC52ZXJzaW9uID0gdGhpcy52ZXJzaW9uCiAgbmV3VHgubG9ja3RpbWUgPSB0aGlzLmxvY2t0aW1lCgogIG5ld1R4LmlucyA9IHRoaXMuaW5zLm1hcChmdW5jdGlvbiAodHhJbikgewogICAgcmV0dXJuIHsKICAgICAgaGFzaDogdHhJbi5oYXNoLAogICAgICBpbmRleDogdHhJbi5pbmRleCwKICAgICAgc2NyaXB0OiB0eEluLnNjcmlwdCwKICAgICAgc2VxdWVuY2U6IHR4SW4uc2VxdWVuY2UKICAgIH0KICB9KQoKICBuZXdUeC5vdXRzID0gdGhpcy5vdXRzLm1hcChmdW5jdGlvbiAodHhPdXQpIHsKICAgIHJldHVybiB7CiAgICAgIHNjcmlwdDogdHhPdXQuc2NyaXB0LAogICAgICB2YWx1ZTogdHhPdXQudmFsdWUKICAgIH0KICB9KQoKICByZXR1cm4gbmV3VHgKfQoKdmFyIE9ORSA9IG5ldyBCdWZmZXIoJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEnLCAnaGV4JykKdmFyIFZBTFVFX1VJTlQ2NF9NQVggPSBuZXcgQnVmZmVyKCdmZmZmZmZmZmZmZmZmZmZmJywgJ2hleCcpCgovKioKICogSGFzaCB0cmFuc2FjdGlvbiBmb3Igc2lnbmluZyBhIHNwZWNpZmljIGlucHV0LgogKgogKiBCaXRjb2luIHVzZXMgYSBkaWZmZXJlbnQgaGFzaCBmb3IgZWFjaCBzaWduZWQgdHJhbnNhY3Rpb24gaW5wdXQuCiAqIFRoaXMgbWV0aG9kIGNvcGllcyB0aGUgdHJhbnNhY3Rpb24sIG1ha2VzIHRoZSBuZWNlc3NhcnkgY2hhbmdlcyBiYXNlZCBvbiB0aGUKICogaGFzaFR5cGUsIGFuZCB0aGVuIGhhc2hlcyB0aGUgcmVzdWx0LgogKiBUaGlzIGhhc2ggY2FuIHRoZW4gYmUgdXNlZCB0byBzaWduIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbiBpbnB1dC4KICovClRyYW5zYWN0aW9uLnByb3RvdHlwZS5oYXNoRm9yU2lnbmF0dXJlID0gZnVuY3Rpb24gKGluSW5kZXgsIHByZXZPdXRTY3JpcHQsIGhhc2hUeXBlKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLlVJbnQzMiwgdHlwZXMuQnVmZmVyLCAvKiB0eXBlcy5VSW50OCAqLyB0eXBlcy5OdW1iZXIpLCBhcmd1bWVudHMpCgogIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpdGNvaW4vYmxvYi9tYXN0ZXIvc3JjL3Rlc3Qvc2lnaGFzaF90ZXN0cy5jcHAjTDI5CiAgaWYgKGluSW5kZXggPj0gdGhpcy5pbnMubGVuZ3RoKSByZXR1cm4gT05FCgogIHZhciB0eFRtcCA9IHRoaXMuY2xvbmUoKQoKICAvLyBpbiBjYXNlIGNvbmNhdGVuYXRpbmcgdHdvIHNjcmlwdHMgZW5kcyB1cCB3aXRoIHR3byBjb2Rlc2VwYXJhdG9ycywKICAvLyBvciBhbiBleHRyYSBvbmUgYXQgdGhlIGVuZCwgdGhpcyBwcmV2ZW50cyBhbGwgdGhvc2UgcG9zc2libGUgaW5jb21wYXRpYmlsaXRpZXMuCiAgdmFyIGhhc2hTY3JpcHQgPSBic2NyaXB0LmNvbXBpbGUoYnNjcmlwdC5kZWNvbXBpbGUocHJldk91dFNjcmlwdCkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICByZXR1cm4geCAhPT0gb3Bjb2Rlcy5PUF9DT0RFU0VQQVJBVE9SCiAgfSkpCiAgdmFyIGkKCiAgLy8gYmxhbmsgb3V0IG90aGVyIGlucHV0cycgc2lnbmF0dXJlcwogIHR4VG1wLmlucy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCkgeyBpbnB1dC5zY3JpcHQgPSBFTVBUWV9TQ1JJUFQgfSkKICB0eFRtcC5pbnNbaW5JbmRleF0uc2NyaXB0ID0gaGFzaFNjcmlwdAoKICAvLyBibGFuayBvdXQgc29tZSBvZiB0aGUgaW5wdXRzCiAgaWYgKChoYXNoVHlwZSAmIDB4MWYpID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX05PTkUpIHsKICAgIC8vIHdpbGRjYXJkIHBheWVlCiAgICB0eFRtcC5vdXRzID0gW10KCiAgICAvLyBsZXQgdGhlIG90aGVycyB1cGRhdGUgYXQgd2lsbAogICAgdHhUbXAuaW5zLmZvckVhY2goZnVuY3Rpb24gKGlucHV0LCBpKSB7CiAgICAgIGlmIChpICE9PSBpbkluZGV4KSB7CiAgICAgICAgaW5wdXQuc2VxdWVuY2UgPSAwCiAgICAgIH0KICAgIH0pCiAgfSBlbHNlIGlmICgoaGFzaFR5cGUgJiAweDFmKSA9PT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9TSU5HTEUpIHsKICAgIHZhciBuT3V0ID0gaW5JbmRleAoKICAgIC8vIG9ubHkgbG9jay1pbiB0aGUgdHhPdXQgcGF5ZWUgYXQgc2FtZSBpbmRleCBhcyB0eEluCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbi9iaXRjb2luL2Jsb2IvbWFzdGVyL3NyYy90ZXN0L3NpZ2hhc2hfdGVzdHMuY3BwI0w2MAogICAgaWYgKG5PdXQgPj0gdGhpcy5vdXRzLmxlbmd0aCkgcmV0dXJuIE9ORQoKICAgIHR4VG1wLm91dHMgPSB0eFRtcC5vdXRzLnNsaWNlKDAsIG5PdXQgKyAxKQoKICAgIC8vIGJsYW5rIGFsbCBvdGhlciBvdXRwdXRzIChjbGVhciBzY3JpcHRQdWJLZXksIHZhbHVlID09PSAtMSkKICAgIHZhciBzdHViT3V0ID0gewogICAgICBzY3JpcHQ6IEVNUFRZX1NDUklQVCwKICAgICAgdmFsdWVCdWZmZXI6IFZBTFVFX1VJTlQ2NF9NQVgKICAgIH0KCiAgICBmb3IgKGkgPSAwOyBpIDwgbk91dDsgaSsrKSB7CiAgICAgIHR4VG1wLm91dHNbaV0gPSBzdHViT3V0CiAgICB9CgogICAgLy8gbGV0IHRoZSBvdGhlcnMgdXBkYXRlIGF0IHdpbGwKICAgIHR4VG1wLmlucy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCwgaSkgewogICAgICBpZiAoaSAhPT0gaW5JbmRleCkgewogICAgICAgIGlucHV0LnNlcXVlbmNlID0gMAogICAgICB9CiAgICB9KQogIH0KCiAgLy8gYmxhbmsgb3V0IG90aGVyIGlucHV0cyBjb21wbGV0ZWx5LCBub3QgcmVjb21tZW5kZWQgZm9yIG9wZW4gdHJhbnNhY3Rpb25zCiAgaWYgKGhhc2hUeXBlICYgVHJhbnNhY3Rpb24uU0lHSEFTSF9BTllPTkVDQU5QQVkpIHsKICAgIHR4VG1wLmluc1swXSA9IHR4VG1wLmluc1tpbkluZGV4XQogICAgdHhUbXAuaW5zID0gdHhUbXAuaW5zLnNsaWNlKDAsIDEpCiAgfQoKICAvLyBzZXJpYWxpemUgYW5kIGhhc2gKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcih0eFRtcC5ieXRlTGVuZ3RoKCkgKyA0KQogIGJ1ZmZlci53cml0ZUludDMyTEUoaGFzaFR5cGUsIGJ1ZmZlci5sZW5ndGggLSA0KQogIHR4VG1wLnRvQnVmZmVyKCkuY29weShidWZmZXIsIDApCgogIHJldHVybiBiY3J5cHRvLmhhc2gyNTYoYnVmZmVyKQp9CgpUcmFuc2FjdGlvbi5wcm90b3R5cGUuZ2V0SGFzaCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gYmNyeXB0by5oYXNoMjU2KHRoaXMudG9CdWZmZXIoKSkKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLmdldElkID0gZnVuY3Rpb24gKCkgewogIC8vIHRyYW5zYWN0aW9uIGhhc2gncyBhcmUgZGlzcGxheWVkIGluIHJldmVyc2Ugb3JkZXIKICByZXR1cm4gW10ucmV2ZXJzZS5jYWxsKHRoaXMuZ2V0SGFzaCgpKS50b1N0cmluZygnaGV4JykKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRvQnVmZmVyID0gZnVuY3Rpb24gKCkgewogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKHRoaXMuYnl0ZUxlbmd0aCgpKQoKICB2YXIgb2Zmc2V0ID0gMAogIGZ1bmN0aW9uIHdyaXRlU2xpY2UgKHNsaWNlKSB7CiAgICBzbGljZS5jb3B5KGJ1ZmZlciwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IHNsaWNlLmxlbmd0aAogIH0KCiAgZnVuY3Rpb24gd3JpdGVVSW50MzIgKGkpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQzMkxFKGksIG9mZnNldCkKICAgIG9mZnNldCArPSA0CiAgfQoKICBmdW5jdGlvbiB3cml0ZVVJbnQ2NCAoaSkgewogICAgYnVmZmVydXRpbHMud3JpdGVVSW50NjRMRShidWZmZXIsIGksIG9mZnNldCkKICAgIG9mZnNldCArPSA4CiAgfQoKICBmdW5jdGlvbiB3cml0ZVZhckludCAoaSkgewogICAgdmFyIG4gPSBidWZmZXJ1dGlscy53cml0ZVZhckludChidWZmZXIsIGksIG9mZnNldCkKICAgIG9mZnNldCArPSBuCiAgfQoKICB3cml0ZVVJbnQzMih0aGlzLnZlcnNpb24pCiAgd3JpdGVWYXJJbnQodGhpcy5pbnMubGVuZ3RoKQoKICB0aGlzLmlucy5mb3JFYWNoKGZ1bmN0aW9uICh0eEluKSB7CiAgICB3cml0ZVNsaWNlKHR4SW4uaGFzaCkKICAgIHdyaXRlVUludDMyKHR4SW4uaW5kZXgpCiAgICB3cml0ZVZhckludCh0eEluLnNjcmlwdC5sZW5ndGgpCiAgICB3cml0ZVNsaWNlKHR4SW4uc2NyaXB0KQogICAgd3JpdGVVSW50MzIodHhJbi5zZXF1ZW5jZSkKICB9KQoKICB3cml0ZVZhckludCh0aGlzLm91dHMubGVuZ3RoKQogIHRoaXMub3V0cy5mb3JFYWNoKGZ1bmN0aW9uICh0eE91dCkgewogICAgaWYgKCF0eE91dC52YWx1ZUJ1ZmZlcikgewogICAgICB3cml0ZVVJbnQ2NCh0eE91dC52YWx1ZSkKICAgIH0gZWxzZSB7CiAgICAgIHdyaXRlU2xpY2UodHhPdXQudmFsdWVCdWZmZXIpCiAgICB9CgogICAgd3JpdGVWYXJJbnQodHhPdXQuc2NyaXB0Lmxlbmd0aCkKICAgIHdyaXRlU2xpY2UodHhPdXQuc2NyaXB0KQogIH0pCgogIHdyaXRlVUludDMyKHRoaXMubG9ja3RpbWUpCgogIHJldHVybiBidWZmZXIKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRvSGV4ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLnRvQnVmZmVyKCkudG9TdHJpbmcoJ2hleCcpCn0KClRyYW5zYWN0aW9uLnByb3RvdHlwZS5zZXRJbnB1dFNjcmlwdCA9IGZ1bmN0aW9uIChpbmRleCwgc2NyaXB0U2lnKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLk51bWJlciwgdHlwZXMuQnVmZmVyKSwgYXJndW1lbnRzKQoKICB0aGlzLmluc1tpbmRleF0uc2NyaXB0ID0gc2NyaXB0U2lnCn0KCm1vZHVsZS5leHBvcnRzID0gVHJhbnNhY3Rpb24KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2J1ZmZlcnV0aWxzIjoyNiwiLi9jcnlwdG8iOjI3LCIuL29wY29kZXMiOjM1LCIuL3NjcmlwdCI6MzYsIi4vdHlwZXMiOjQwLCJidWZmZXIiOjcwLCJ0eXBlZm9yY2UiOjE3Mn1dLDM5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYmFkZHJlc3MgPSByZXF1aXJlKCcuL2FkZHJlc3MnKQp2YXIgYmNyeXB0byA9IHJlcXVpcmUoJy4vY3J5cHRvJykKdmFyIGJzY3JpcHQgPSByZXF1aXJlKCcuL3NjcmlwdCcpCnZhciBidWZmZXJFcXVhbHMgPSByZXF1aXJlKCdidWZmZXItZXF1YWxzJykKdmFyIG5ldHdvcmtzID0gcmVxdWlyZSgnLi9uZXR3b3JrcycpCnZhciBvcHMgPSByZXF1aXJlKCcuL29wY29kZXMnKQp2YXIgdHlwZWZvcmNlID0gcmVxdWlyZSgndHlwZWZvcmNlJykKdmFyIHR5cGVzID0gcmVxdWlyZSgnLi90eXBlcycpCgp2YXIgRUNQYWlyID0gcmVxdWlyZSgnLi9lY3BhaXInKQp2YXIgRUNTaWduYXR1cmUgPSByZXF1aXJlKCcuL2Vjc2lnbmF0dXJlJykKdmFyIFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi90cmFuc2FjdGlvbicpCgovLyByZS1vcmRlcnMgc2lnbmF0dXJlcyB0byBtYXRjaCBwdWJLZXlzLCBmaWxscyB1bmRlZmluZWQgb3RoZXJ3aXNlCmZ1bmN0aW9uIGZpeE1TU2lnbmF0dXJlcyAodHJhbnNhY3Rpb24sIHZpbiwgcHViS2V5cywgc2lnbmF0dXJlcywgcHJldk91dFNjcmlwdCwgaGFzaFR5cGUsIHNraXBQdWJLZXkpIHsKICAvLyBtYWludGFpbiBhIGxvY2FsIGNvcHkgb2YgdW5tYXRjaGVkIHNpZ25hdHVyZXMKICB2YXIgdW5tYXRjaGVkID0gc2lnbmF0dXJlcy5zbGljZSgpCiAgdmFyIGNhY2hlID0ge30KCiAgcmV0dXJuIHB1YktleXMubWFwKGZ1bmN0aW9uIChwdWJLZXkpIHsKICAgIC8vIHNraXAgb3B0aW9uYWxseSBwcm92aWRlZCBwdWJLZXkKICAgIGlmIChza2lwUHViS2V5ICYmIGJ1ZmZlckVxdWFscyhza2lwUHViS2V5LCBwdWJLZXkpKSByZXR1cm4gdW5kZWZpbmVkCgogICAgdmFyIG1hdGNoZWQKICAgIHZhciBrZXlQYWlyMiA9IEVDUGFpci5mcm9tUHVibGljS2V5QnVmZmVyKHB1YktleSkKCiAgICAvLyBjaGVjayBmb3IgYSBtYXRjaGluZyBzaWduYXR1cmUKICAgIHVubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChzaWduYXR1cmUsIGkpIHsKICAgICAgLy8gc2tpcCBpZiB1bmRlZmluZWQgfHwgT1BfMAogICAgICBpZiAoIXNpZ25hdHVyZSkgcmV0dXJuIGZhbHNlCgogICAgICB2YXIgc2lnbmF0dXJlSGFzaCA9IGNhY2hlW2hhc2hUeXBlXSA9IGNhY2hlW2hhc2hUeXBlXSB8fCB0cmFuc2FjdGlvbi5oYXNoRm9yU2lnbmF0dXJlKHZpbiwgcHJldk91dFNjcmlwdCwgaGFzaFR5cGUpCiAgICAgIGlmICgha2V5UGFpcjIudmVyaWZ5KHNpZ25hdHVyZUhhc2gsIHNpZ25hdHVyZSkpIHJldHVybiBmYWxzZQoKICAgICAgLy8gcmVtb3ZlIG1hdGNoZWQgc2lnbmF0dXJlIGZyb20gdW5tYXRjaGVkCiAgICAgIHVubWF0Y2hlZFtpXSA9IHVuZGVmaW5lZAogICAgICBtYXRjaGVkID0gc2lnbmF0dXJlCgogICAgICByZXR1cm4gdHJ1ZQogICAgfSkKCiAgICByZXR1cm4gbWF0Y2hlZCB8fCB1bmRlZmluZWQKICB9KQp9CgpmdW5jdGlvbiBleHRyYWN0SW5wdXQgKHRyYW5zYWN0aW9uLCB0eEluLCB2aW4pIHsKICB2YXIgcmVkZWVtU2NyaXB0CiAgdmFyIHNjcmlwdFNpZyA9IHR4SW4uc2NyaXB0CiAgdmFyIHNjcmlwdFNpZ0NodW5rcyA9IGJzY3JpcHQuZGVjb21waWxlKHNjcmlwdFNpZykKCiAgdmFyIHByZXZPdXRTY3JpcHQKICB2YXIgcHJldk91dFR5cGUgPSBic2NyaXB0LmNsYXNzaWZ5SW5wdXQoc2NyaXB0U2lnLCB0cnVlKQogIHZhciBzY3JpcHRUeXBlCgogIC8vIFJlLWNsYXNzaWZ5IGlmIHNjcmlwdEhhc2gKICBpZiAocHJldk91dFR5cGUgPT09ICdzY3JpcHRoYXNoJykgewogICAgcmVkZWVtU2NyaXB0ID0gc2NyaXB0U2lnQ2h1bmtzLnNsaWNlKC0xKVswXQogICAgcHJldk91dFNjcmlwdCA9IGJzY3JpcHQuc2NyaXB0SGFzaE91dHB1dChiY3J5cHRvLmhhc2gxNjAocmVkZWVtU2NyaXB0KSkKCiAgICBzY3JpcHRTaWcgPSBic2NyaXB0LmNvbXBpbGUoc2NyaXB0U2lnQ2h1bmtzLnNsaWNlKDAsIC0xKSkKICAgIHNjcmlwdFNpZ0NodW5rcyA9IHNjcmlwdFNpZ0NodW5rcy5zbGljZSgwLCAtMSkKCiAgICBzY3JpcHRUeXBlID0gYnNjcmlwdC5jbGFzc2lmeUlucHV0KHNjcmlwdFNpZywgdHJ1ZSkKICB9IGVsc2UgewogICAgc2NyaXB0VHlwZSA9IHByZXZPdXRUeXBlCiAgfQoKICAvLyBwcmUtZW1wdCByZWRlZW1TY3JpcHQgZGVjb21waWxhdGlvbgogIHZhciByZWRlZW1TY3JpcHRDaHVua3MKICBpZiAocmVkZWVtU2NyaXB0KSB7CiAgICByZWRlZW1TY3JpcHRDaHVua3MgPSBic2NyaXB0LmRlY29tcGlsZShyZWRlZW1TY3JpcHQpCiAgfQoKICAvLyBFeHRyYWN0IGhhc2hUeXBlLCBwdWJLZXlzIGFuZCBzaWduYXR1cmVzCiAgdmFyIGhhc2hUeXBlLCBwYXJzZWQsIHB1YktleXMsIHNpZ25hdHVyZXMKCiAgc3dpdGNoIChzY3JpcHRUeXBlKSB7CiAgICBjYXNlICdwdWJrZXloYXNoJzoKICAgICAgcGFyc2VkID0gRUNTaWduYXR1cmUucGFyc2VTY3JpcHRTaWduYXR1cmUoc2NyaXB0U2lnQ2h1bmtzWzBdKQogICAgICBoYXNoVHlwZSA9IHBhcnNlZC5oYXNoVHlwZQogICAgICBwdWJLZXlzID0gc2NyaXB0U2lnQ2h1bmtzLnNsaWNlKDEpCiAgICAgIHNpZ25hdHVyZXMgPSBbcGFyc2VkLnNpZ25hdHVyZV0KICAgICAgcHJldk91dFNjcmlwdCA9IGJzY3JpcHQucHViS2V5SGFzaE91dHB1dChiY3J5cHRvLmhhc2gxNjAocHViS2V5c1swXSkpCgogICAgICBicmVhawoKICAgIGNhc2UgJ3B1YmtleSc6CiAgICAgIHBhcnNlZCA9IEVDU2lnbmF0dXJlLnBhcnNlU2NyaXB0U2lnbmF0dXJlKHNjcmlwdFNpZ0NodW5rc1swXSkKICAgICAgaGFzaFR5cGUgPSBwYXJzZWQuaGFzaFR5cGUKICAgICAgc2lnbmF0dXJlcyA9IFtwYXJzZWQuc2lnbmF0dXJlXQoKICAgICAgaWYgKHJlZGVlbVNjcmlwdCkgewogICAgICAgIHB1YktleXMgPSByZWRlZW1TY3JpcHRDaHVua3Muc2xpY2UoMCwgMSkKICAgICAgfQoKICAgICAgYnJlYWsKCiAgICBjYXNlICdtdWx0aXNpZyc6CiAgICAgIHNpZ25hdHVyZXMgPSBzY3JpcHRTaWdDaHVua3Muc2xpY2UoMSkubWFwKGZ1bmN0aW9uIChjaHVuaykgewogICAgICAgIGlmIChjaHVuayA9PT0gb3BzLk9QXzApIHJldHVybiB1bmRlZmluZWQKCiAgICAgICAgdmFyIHBhcnNlZCA9IEVDU2lnbmF0dXJlLnBhcnNlU2NyaXB0U2lnbmF0dXJlKGNodW5rKQogICAgICAgIGhhc2hUeXBlID0gcGFyc2VkLmhhc2hUeXBlCgogICAgICAgIHJldHVybiBwYXJzZWQuc2lnbmF0dXJlCiAgICAgIH0pCgogICAgICBpZiAocmVkZWVtU2NyaXB0KSB7CiAgICAgICAgcHViS2V5cyA9IHJlZGVlbVNjcmlwdENodW5rcy5zbGljZSgxLCAtMikKCiAgICAgICAgaWYgKHB1YktleXMubGVuZ3RoICE9PSBzaWduYXR1cmVzLmxlbmd0aCkgewogICAgICAgICAgc2lnbmF0dXJlcyA9IGZpeE1TU2lnbmF0dXJlcyh0cmFuc2FjdGlvbiwgdmluLCBwdWJLZXlzLCBzaWduYXR1cmVzLCByZWRlZW1TY3JpcHQsIGhhc2hUeXBlLCByZWRlZW1TY3JpcHQpCiAgICAgICAgfQogICAgICB9CgogICAgICBicmVhawogIH0KCiAgcmV0dXJuIHsKICAgIGhhc2hUeXBlOiBoYXNoVHlwZSwKICAgIHByZXZPdXRTY3JpcHQ6IHByZXZPdXRTY3JpcHQsCiAgICBwcmV2T3V0VHlwZTogcHJldk91dFR5cGUsCiAgICBwdWJLZXlzOiBwdWJLZXlzLAogICAgcmVkZWVtU2NyaXB0OiByZWRlZW1TY3JpcHQsCiAgICBzY3JpcHRUeXBlOiBzY3JpcHRUeXBlLAogICAgc2lnbmF0dXJlczogc2lnbmF0dXJlcwogIH0KfQoKZnVuY3Rpb24gVHJhbnNhY3Rpb25CdWlsZGVyIChuZXR3b3JrKSB7CiAgdGhpcy5wcmV2VHhNYXAgPSB7fQogIHRoaXMucHJldk91dFNjcmlwdHMgPSB7fQogIHRoaXMucHJldk91dFR5cGVzID0ge30KICB0aGlzLm5ldHdvcmsgPSBuZXR3b3JrIHx8IG5ldHdvcmtzLmJpdGNvaW4KCiAgdGhpcy5pbnB1dHMgPSBbXQogIHRoaXMudHggPSBuZXcgVHJhbnNhY3Rpb24oKQp9CgpUcmFuc2FjdGlvbkJ1aWxkZXIucHJvdG90eXBlLnNldExvY2tUaW1lID0gZnVuY3Rpb24gKGxvY2t0aW1lKSB7CiAgdHlwZWZvcmNlKHR5cGVzLlVJbnQzMiwgbG9ja3RpbWUpCgogIC8vIGlmIGFueSBzaWduYXR1cmVzIGV4aXN0LCB0aHJvdwogIGlmICh0aGlzLmlucHV0cy5zb21lKGZ1bmN0aW9uIChpbnB1dCkgewogICAgaWYgKCFpbnB1dC5zaWduYXR1cmVzKSByZXR1cm4gZmFsc2UKCiAgICByZXR1cm4gaW5wdXQuc2lnbmF0dXJlcy5zb21lKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzIH0pCiAgfSkpIHsKICAgIHRocm93IG5ldyBFcnJvcignTm8sIHRoaXMgd291bGQgaW52YWxpZGF0ZSBzaWduYXR1cmVzJykKICB9CgogIHRoaXMudHgubG9ja3RpbWUgPSBsb2NrdGltZQp9CgpUcmFuc2FjdGlvbkJ1aWxkZXIuZnJvbVRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBuZXR3b3JrKSB7CiAgdmFyIHR4YiA9IG5ldyBUcmFuc2FjdGlvbkJ1aWxkZXIobmV0d29yaykKCiAgLy8gQ29weSBvdGhlciB0cmFuc2FjdGlvbiBmaWVsZHMKICB0eGIudHgudmVyc2lvbiA9IHRyYW5zYWN0aW9uLnZlcnNpb24KICB0eGIudHgubG9ja3RpbWUgPSB0cmFuc2FjdGlvbi5sb2NrdGltZQoKICAvLyBFeHRyYWN0L2FkZCBpbnB1dHMKICB0cmFuc2FjdGlvbi5pbnMuZm9yRWFjaChmdW5jdGlvbiAodHhJbikgewogICAgdHhiLmFkZElucHV0KHR4SW4uaGFzaCwgdHhJbi5pbmRleCwgdHhJbi5zZXF1ZW5jZSkKICB9KQoKICAvLyBFeHRyYWN0L2FkZCBvdXRwdXRzCiAgdHJhbnNhY3Rpb24ub3V0cy5mb3JFYWNoKGZ1bmN0aW9uICh0eE91dCkgewogICAgdHhiLmFkZE91dHB1dCh0eE91dC5zY3JpcHQsIHR4T3V0LnZhbHVlKQogIH0pCgogIC8vIEV4dHJhY3QvYWRkIHNpZ25hdHVyZXMKICB0eGIuaW5wdXRzID0gdHJhbnNhY3Rpb24uaW5zLm1hcChmdW5jdGlvbiAodHhJbiwgdmluKSB7CiAgICAvLyBUT0RPOiB2ZXJpZnkgd2hldGhlciBleHRyYWN0SW5wdXQgaXMgc2FuZSB3aXRoIGNvaW5iYXNlIHNjcmlwdHMKICAgIGlmIChUcmFuc2FjdGlvbi5pc0NvaW5iYXNlSGFzaCh0eEluLmhhc2gpKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29pbmJhc2UgaW5wdXRzIG5vdCBzdXBwb3J0ZWQnKQogICAgfQoKICAgIC8vIElnbm9yZSBlbXB0eSBzY3JpcHRzCiAgICBpZiAodHhJbi5zY3JpcHQubGVuZ3RoID09PSAwKSByZXR1cm4ge30KCiAgICByZXR1cm4gZXh0cmFjdElucHV0KHRyYW5zYWN0aW9uLCB0eEluLCB2aW4pCiAgfSkKCiAgcmV0dXJuIHR4Ygp9CgpUcmFuc2FjdGlvbkJ1aWxkZXIucHJvdG90eXBlLmFkZElucHV0ID0gZnVuY3Rpb24gKHR4SGFzaCwgdm91dCwgc2VxdWVuY2UsIHByZXZPdXRTY3JpcHQpIHsKICAvLyBpcyBpdCBhIGhleCBzdHJpbmc/CiAgaWYgKHR5cGVvZiB0eEhhc2ggPT09ICdzdHJpbmcnKSB7CiAgICAvLyB0cmFuc2FjdGlvbiBoYXNocydzIGFyZSBkaXNwbGF5ZWQgaW4gcmV2ZXJzZSBvcmRlciwgdW4tcmV2ZXJzZSBpdAogICAgdHhIYXNoID0gW10ucmV2ZXJzZS5jYWxsKG5ldyBCdWZmZXIodHhIYXNoLCAnaGV4JykpCgogIC8vIGlzIGl0IGEgVHJhbnNhY3Rpb24gb2JqZWN0PwogIH0gZWxzZSBpZiAodHhIYXNoIGluc3RhbmNlb2YgVHJhbnNhY3Rpb24pIHsKICAgIHByZXZPdXRTY3JpcHQgPSB0eEhhc2gub3V0c1t2b3V0XS5zY3JpcHQKICAgIHR4SGFzaCA9IHR4SGFzaC5nZXRIYXNoKCkKICB9CgogIHZhciBpbnB1dCA9IHt9CiAgaWYgKHByZXZPdXRTY3JpcHQpIHsKICAgIHZhciBwcmV2T3V0U2NyaXB0Q2h1bmtzID0gYnNjcmlwdC5kZWNvbXBpbGUocHJldk91dFNjcmlwdCkKICAgIHZhciBwcmV2T3V0VHlwZSA9IGJzY3JpcHQuY2xhc3NpZnlPdXRwdXQocHJldk91dFNjcmlwdENodW5rcykKCiAgICAvLyBpZiB3ZSBjYW4sIGV4dHJhY3QgcHViS2V5IGluZm9ybWF0aW9uCiAgICBzd2l0Y2ggKHByZXZPdXRUeXBlKSB7CiAgICAgIGNhc2UgJ211bHRpc2lnJzoKICAgICAgICBpbnB1dC5wdWJLZXlzID0gcHJldk91dFNjcmlwdENodW5rcy5zbGljZSgxLCAtMikKICAgICAgICBpbnB1dC5zaWduYXR1cmVzID0gaW5wdXQucHViS2V5cy5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkIH0pCgogICAgICAgIGJyZWFrCgogICAgICBjYXNlICdwdWJrZXknOgogICAgICAgIGlucHV0LnB1YktleXMgPSBwcmV2T3V0U2NyaXB0Q2h1bmtzLnNsaWNlKDAsIDEpCiAgICAgICAgaW5wdXQuc2lnbmF0dXJlcyA9IFt1bmRlZmluZWRdCgogICAgICAgIGJyZWFrCiAgICB9CgogICAgaWYgKHByZXZPdXRUeXBlICE9PSAnc2NyaXB0aGFzaCcpIHsKICAgICAgaW5wdXQuc2NyaXB0VHlwZSA9IHByZXZPdXRUeXBlCiAgICB9CgogICAgaW5wdXQucHJldk91dFNjcmlwdCA9IHByZXZPdXRTY3JpcHQKICAgIGlucHV0LnByZXZPdXRUeXBlID0gcHJldk91dFR5cGUKICB9CgogIC8vIGlmIHNpZ25hdHVyZXMgZXhpc3QsIGFkZGluZyBpbnB1dHMgaXMgb25seSBhY2NlcHRhYmxlIGlmIFNJR0hBU0hfQU5ZT05FQ0FOUEFZIGlzIHVzZWQKICAvLyB0aHJvdyBpZiBhbnkgc2lnbmF0dXJlcyAqZGlkbid0KiB1c2UgU0lHSEFTSF9BTllPTkVDQU5QQVkKICBpZiAoIXRoaXMuaW5wdXRzLmV2ZXJ5KGZ1bmN0aW9uIChvdGhlcklucHV0KSB7CiAgICAvLyBubyBzaWduYXR1cmUKICAgIGlmIChvdGhlcklucHV0Lmhhc2hUeXBlID09PSB1bmRlZmluZWQpIHJldHVybiB0cnVlCgogICAgcmV0dXJuIG90aGVySW5wdXQuaGFzaFR5cGUgJiBUcmFuc2FjdGlvbi5TSUdIQVNIX0FOWU9ORUNBTlBBWQogIH0pKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vLCB0aGlzIHdvdWxkIGludmFsaWRhdGUgc2lnbmF0dXJlcycpCiAgfQoKICB2YXIgcHJldk91dCA9IHR4SGFzaC50b1N0cmluZygnaGV4JykgKyAnOicgKyB2b3V0CiAgaWYgKHRoaXMucHJldlR4TWFwW3ByZXZPdXRdKSB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGlzIGFscmVhZHkgYW4gaW5wdXQnKQoKICB2YXIgdmluID0gdGhpcy50eC5hZGRJbnB1dCh0eEhhc2gsIHZvdXQsIHNlcXVlbmNlKQogIHRoaXMuaW5wdXRzW3Zpbl0gPSBpbnB1dAogIHRoaXMucHJldlR4TWFwW3ByZXZPdXRdID0gdmluCgogIHJldHVybiB2aW4KfQoKVHJhbnNhY3Rpb25CdWlsZGVyLnByb3RvdHlwZS5hZGRPdXRwdXQgPSBmdW5jdGlvbiAoc2NyaXB0UHViS2V5LCB2YWx1ZSkgewogIHZhciBuT3V0cHV0cyA9IHRoaXMudHgub3V0cy5sZW5ndGgKCiAgLy8gaWYgc2lnbmF0dXJlcyBleGlzdCwgYWRkaW5nIG91dHB1dHMgaXMgb25seSBhY2NlcHRhYmxlIGlmIFNJR0hBU0hfTk9ORSBvciBTSUdIQVNIX1NJTkdMRSBpcyB1c2VkCiAgLy8gdGhyb3dzIGlmIGFueSBzaWduYXR1cmVzIGRpZG4ndCB1c2UgU0lHSEFTSF9OT05FfFNJR0hBU0hfU0lOR0xFCiAgaWYgKCF0aGlzLmlucHV0cy5ldmVyeShmdW5jdGlvbiAoaW5wdXQsIGluZGV4KSB7CiAgICAvLyBubyBzaWduYXR1cmUKICAgIGlmIChpbnB1dC5oYXNoVHlwZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdHJ1ZQoKICAgIHZhciBoYXNoVHlwZU1vZCA9IGlucHV0Lmhhc2hUeXBlICYgMHgxZgogICAgaWYgKGhhc2hUeXBlTW9kID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX05PTkUpIHJldHVybiB0cnVlCiAgICBpZiAoaGFzaFR5cGVNb2QgPT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfU0lOR0xFKSB7CiAgICAgIC8vIGFjY291bnQgZm9yIFNJR0hBU0hfU0lOR0xFIHNpZ25pbmcgb2YgYSBub24tZXhpc3Rpbmcgb3V0cHV0LCBha2EgdGhlICJTSUdIQVNIX1NJTkdMRSIgYnVnCiAgICAgIHJldHVybiBpbmRleCA8IG5PdXRwdXRzCiAgICB9CgogICAgcmV0dXJuIGZhbHNlCiAgfSkpIHsKICAgIHRocm93IG5ldyBFcnJvcignTm8sIHRoaXMgd291bGQgaW52YWxpZGF0ZSBzaWduYXR1cmVzJykKICB9CgogIC8vIEF0dGVtcHQgdG8gZ2V0IGEgc2NyaXB0IGlmIGl0J3MgYSBiYXNlNTggYWRkcmVzcyBzdHJpbmcKICBpZiAodHlwZW9mIHNjcmlwdFB1YktleSA9PT0gJ3N0cmluZycpIHsKICAgIHNjcmlwdFB1YktleSA9IGJhZGRyZXNzLnRvT3V0cHV0U2NyaXB0KHNjcmlwdFB1YktleSwgdGhpcy5uZXR3b3JrKQogIH0KCiAgcmV0dXJuIHRoaXMudHguYWRkT3V0cHV0KHNjcmlwdFB1YktleSwgdmFsdWUpCn0KClRyYW5zYWN0aW9uQnVpbGRlci5wcm90b3R5cGUuYnVpbGQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuX19idWlsZChmYWxzZSkKfQpUcmFuc2FjdGlvbkJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkSW5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5fX2J1aWxkKHRydWUpCn0KCnZhciBjYW5CdWlsZFR5cGVzID0gewogICdtdWx0aXNpZyc6IHRydWUsCiAgJ3B1YmtleSc6IHRydWUsCiAgJ3B1YmtleWhhc2gnOiB0cnVlCn0KClRyYW5zYWN0aW9uQnVpbGRlci5wcm90b3R5cGUuX19idWlsZCA9IGZ1bmN0aW9uIChhbGxvd0luY29tcGxldGUpIHsKICBpZiAoIWFsbG93SW5jb21wbGV0ZSkgewogICAgaWYgKCF0aGlzLnR4Lmlucy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignVHJhbnNhY3Rpb24gaGFzIG5vIGlucHV0cycpCiAgICBpZiAoIXRoaXMudHgub3V0cy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignVHJhbnNhY3Rpb24gaGFzIG5vIG91dHB1dHMnKQogIH0KCiAgdmFyIHR4ID0gdGhpcy50eC5jbG9uZSgpCgogIC8vIENyZWF0ZSBzY3JpcHQgc2lnbmF0dXJlcyBmcm9tIGlucHV0cwogIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGlucHV0LCBpbmRleCkgewogICAgdmFyIHNjcmlwdFR5cGUgPSBpbnB1dC5zY3JpcHRUeXBlCiAgICB2YXIgc2NyaXB0U2lnCgogICAgaWYgKCFhbGxvd0luY29tcGxldGUpIHsKICAgICAgaWYgKCFzY3JpcHRUeXBlKSB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGlzIG5vdCBjb21wbGV0ZScpCiAgICAgIGlmICghY2FuQnVpbGRUeXBlc1tzY3JpcHRUeXBlXSkgdGhyb3cgbmV3IEVycm9yKHNjcmlwdFR5cGUgKyAnIG5vdCBzdXBwb3J0ZWQnKQoKICAgICAgLy8gWFhYOiBvbmx5IHJlbGV2YW50IHRvIHR5cGVzIHRoYXQgbmVlZCBzaWduYXR1cmVzCiAgICAgIGlmICghaW5wdXQuc2lnbmF0dXJlcykgdGhyb3cgbmV3IEVycm9yKCdUcmFuc2FjdGlvbiBpcyBtaXNzaW5nIHNpZ25hdHVyZXMnKQogICAgfQoKICAgIGlmIChpbnB1dC5zaWduYXR1cmVzKSB7CiAgICAgIHN3aXRjaCAoc2NyaXB0VHlwZSkgewogICAgICAgIGNhc2UgJ3B1YmtleWhhc2gnOgogICAgICAgICAgdmFyIHBraFNpZ25hdHVyZSA9IGlucHV0LnNpZ25hdHVyZXNbMF0udG9TY3JpcHRTaWduYXR1cmUoaW5wdXQuaGFzaFR5cGUpCiAgICAgICAgICBzY3JpcHRTaWcgPSBic2NyaXB0LnB1YktleUhhc2hJbnB1dChwa2hTaWduYXR1cmUsIGlucHV0LnB1YktleXNbMF0pCiAgICAgICAgICBicmVhawoKICAgICAgICBjYXNlICdtdWx0aXNpZyc6CiAgICAgICAgICB2YXIgbXNTaWduYXR1cmVzID0gaW5wdXQuc2lnbmF0dXJlcy5tYXAoZnVuY3Rpb24gKHNpZ25hdHVyZSkgewogICAgICAgICAgICByZXR1cm4gc2lnbmF0dXJlICYmIHNpZ25hdHVyZS50b1NjcmlwdFNpZ25hdHVyZShpbnB1dC5oYXNoVHlwZSkKICAgICAgICAgIH0pCgogICAgICAgICAgLy8gZmlsbCBpbiBibGFua3Mgd2l0aCBPUF8wCiAgICAgICAgICBpZiAoYWxsb3dJbmNvbXBsZXRlKSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNTaWduYXR1cmVzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgICAgbXNTaWduYXR1cmVzW2ldID0gbXNTaWduYXR1cmVzW2ldIHx8IG9wcy5PUF8wCiAgICAgICAgICAgIH0KCiAgICAgICAgICAvLyByZW1vdmUgYmxhbmsgc2lnbmF0dXJlcwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbXNTaWduYXR1cmVzID0gbXNTaWduYXR1cmVzLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geCB9KQogICAgICAgICAgfQoKICAgICAgICAgIHZhciByZWRlZW1TY3JpcHQgPSBhbGxvd0luY29tcGxldGUgPyB1bmRlZmluZWQgOiBpbnB1dC5yZWRlZW1TY3JpcHQKICAgICAgICAgIHNjcmlwdFNpZyA9IGJzY3JpcHQubXVsdGlzaWdJbnB1dChtc1NpZ25hdHVyZXMsIHJlZGVlbVNjcmlwdCkKICAgICAgICAgIGJyZWFrCgogICAgICAgIGNhc2UgJ3B1YmtleSc6CiAgICAgICAgICB2YXIgcGtTaWduYXR1cmUgPSBpbnB1dC5zaWduYXR1cmVzWzBdLnRvU2NyaXB0U2lnbmF0dXJlKGlucHV0Lmhhc2hUeXBlKQogICAgICAgICAgc2NyaXB0U2lnID0gYnNjcmlwdC5wdWJLZXlJbnB1dChwa1NpZ25hdHVyZSkKICAgICAgICAgIGJyZWFrCiAgICAgIH0KICAgIH0KCiAgICAvLyBkaWQgd2UgYnVpbGQgYSBzY3JpcHRTaWc/CiAgICBpZiAoc2NyaXB0U2lnKSB7CiAgICAgIC8vIHdyYXAgYXMgc2NyaXB0SGFzaCBpZiBuZWNlc3NhcnkKICAgICAgaWYgKGlucHV0LnByZXZPdXRUeXBlID09PSAnc2NyaXB0aGFzaCcpIHsKICAgICAgICBzY3JpcHRTaWcgPSBic2NyaXB0LnNjcmlwdEhhc2hJbnB1dChzY3JpcHRTaWcsIGlucHV0LnJlZGVlbVNjcmlwdCkKICAgICAgfQoKICAgICAgdHguc2V0SW5wdXRTY3JpcHQoaW5kZXgsIHNjcmlwdFNpZykKICAgIH0KICB9KQoKICByZXR1cm4gdHgKfQoKVHJhbnNhY3Rpb25CdWlsZGVyLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gKGluZGV4LCBrZXlQYWlyLCByZWRlZW1TY3JpcHQsIGhhc2hUeXBlKSB7CiAgaWYgKGtleVBhaXIubmV0d29yayAhPT0gdGhpcy5uZXR3b3JrKSB0aHJvdyBuZXcgRXJyb3IoJ0luY29uc2lzdGVudCBuZXR3b3JrJykKICBpZiAoIXRoaXMuaW5wdXRzW2luZGV4XSkgdGhyb3cgbmV3IEVycm9yKCdObyBpbnB1dCBhdCBpbmRleDogJyArIGluZGV4KQogIGhhc2hUeXBlID0gaGFzaFR5cGUgfHwgVHJhbnNhY3Rpb24uU0lHSEFTSF9BTEwKCiAgdmFyIGlucHV0ID0gdGhpcy5pbnB1dHNbaW5kZXhdCiAgdmFyIGNhblNpZ24gPSBpbnB1dC5oYXNoVHlwZSAmJgogICAgaW5wdXQucHJldk91dFNjcmlwdCAmJgogICAgaW5wdXQucHJldk91dFR5cGUgJiYKICAgIGlucHV0LnB1YktleXMgJiYKICAgIGlucHV0LnNjcmlwdFR5cGUgJiYKICAgIGlucHV0LnNpZ25hdHVyZXMgJiYKICAgIGlucHV0LnNpZ25hdHVyZXMubGVuZ3RoID09PSBpbnB1dC5wdWJLZXlzLmxlbmd0aAoKICB2YXIga3BQdWJLZXkgPSBrZXlQYWlyLmdldFB1YmxpY0tleUJ1ZmZlcigpCgogIC8vIGFyZSB3ZSByZWFkeSB0byBzaWduPwogIGlmIChjYW5TaWduKSB7CiAgICAvLyBpZiByZWRlZW1TY3JpcHQgd2FzIHByb3ZpZGVkLCBlbmZvcmNlIGNvbnNpc3RlbmN5CiAgICBpZiAocmVkZWVtU2NyaXB0KSB7CiAgICAgIGlmICghYnVmZmVyRXF1YWxzKGlucHV0LnJlZGVlbVNjcmlwdCwgcmVkZWVtU2NyaXB0KSkgdGhyb3cgbmV3IEVycm9yKCdJbmNvbnNpc3RlbnQgcmVkZWVtU2NyaXB0JykKICAgIH0KCiAgICBpZiAoaW5wdXQuaGFzaFR5cGUgIT09IGhhc2hUeXBlKSB0aHJvdyBuZXcgRXJyb3IoJ0luY29uc2lzdGVudCBoYXNoVHlwZScpCgogIC8vIG5vPyBwcmVwYXJlCiAgfSBlbHNlIHsKICAgIC8vIG11c3QgYmUgcGF5LXRvLXNjcmlwdEhhc2g/CiAgICBpZiAocmVkZWVtU2NyaXB0KSB7CiAgICAgIC8vIGlmIHdlIGhhdmUgYSBwcmV2T3V0U2NyaXB0LCBlbmZvcmNlIHNjcmlwdEhhc2ggZXF1YWxpdHkgdG8gdGhlIHJlZGVlbVNjcmlwdAogICAgICBpZiAoaW5wdXQucHJldk91dFNjcmlwdCkgewogICAgICAgIGlmIChpbnB1dC5wcmV2T3V0VHlwZSAhPT0gJ3NjcmlwdGhhc2gnKSB0aHJvdyBuZXcgRXJyb3IoJ1ByZXZPdXRTY3JpcHQgbXVzdCBiZSBQMlNIJykKCiAgICAgICAgdmFyIHNjcmlwdEhhc2ggPSBic2NyaXB0LmRlY29tcGlsZShpbnB1dC5wcmV2T3V0U2NyaXB0KVsxXQogICAgICAgIGlmICghYnVmZmVyRXF1YWxzKHNjcmlwdEhhc2gsIGJjcnlwdG8uaGFzaDE2MChyZWRlZW1TY3JpcHQpKSkgdGhyb3cgbmV3IEVycm9yKCdSZWRlZW1TY3JpcHQgZG9lcyBub3QgbWF0Y2ggJyArIHNjcmlwdEhhc2gudG9TdHJpbmcoJ2hleCcpKQogICAgICB9CgogICAgICB2YXIgc2NyaXB0VHlwZSA9IGJzY3JpcHQuY2xhc3NpZnlPdXRwdXQocmVkZWVtU2NyaXB0KQogICAgICB2YXIgcmVkZWVtU2NyaXB0Q2h1bmtzID0gYnNjcmlwdC5kZWNvbXBpbGUocmVkZWVtU2NyaXB0KQogICAgICB2YXIgcHViS2V5cwoKICAgICAgc3dpdGNoIChzY3JpcHRUeXBlKSB7CiAgICAgICAgY2FzZSAnbXVsdGlzaWcnOgogICAgICAgICAgcHViS2V5cyA9IHJlZGVlbVNjcmlwdENodW5rcy5zbGljZSgxLCAtMikKCiAgICAgICAgICBicmVhawoKICAgICAgICBjYXNlICdwdWJrZXloYXNoJzoKICAgICAgICAgIHZhciBwa2gxID0gcmVkZWVtU2NyaXB0Q2h1bmtzWzJdCiAgICAgICAgICB2YXIgcGtoMiA9IGJjcnlwdG8uaGFzaDE2MChrZXlQYWlyLmdldFB1YmxpY0tleUJ1ZmZlcigpKQoKICAgICAgICAgIGlmICghYnVmZmVyRXF1YWxzKHBraDEsIHBraDIpKSB0aHJvdyBuZXcgRXJyb3IoJ3ByaXZhdGVLZXkgY2Fubm90IHNpZ24gZm9yIHRoaXMgaW5wdXQnKQogICAgICAgICAgcHViS2V5cyA9IFtrcFB1YktleV0KCiAgICAgICAgICBicmVhawoKICAgICAgICBjYXNlICdwdWJrZXknOgogICAgICAgICAgcHViS2V5cyA9IHJlZGVlbVNjcmlwdENodW5rcy5zbGljZSgwLCAxKQoKICAgICAgICAgIGJyZWFrCgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZGVlbVNjcmlwdCBub3Qgc3VwcG9ydGVkICgnICsgc2NyaXB0VHlwZSArICcpJykKICAgICAgfQoKICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIHByZXZPdXRTY3JpcHQsIGdlbmVyYXRlIGEgUDJTSCBzY3JpcHQKICAgICAgaWYgKCFpbnB1dC5wcmV2T3V0U2NyaXB0KSB7CiAgICAgICAgaW5wdXQucHJldk91dFNjcmlwdCA9IGJzY3JpcHQuc2NyaXB0SGFzaE91dHB1dChiY3J5cHRvLmhhc2gxNjAocmVkZWVtU2NyaXB0KSkKICAgICAgICBpbnB1dC5wcmV2T3V0VHlwZSA9ICdzY3JpcHRoYXNoJwogICAgICB9CgogICAgICBpbnB1dC5wdWJLZXlzID0gcHViS2V5cwogICAgICBpbnB1dC5yZWRlZW1TY3JpcHQgPSByZWRlZW1TY3JpcHQKICAgICAgaW5wdXQuc2NyaXB0VHlwZSA9IHNjcmlwdFR5cGUKICAgICAgaW5wdXQuc2lnbmF0dXJlcyA9IHB1YktleXMubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZCB9KQogICAgfSBlbHNlIHsKICAgICAgLy8gcGF5LXRvLXNjcmlwdEhhc2ggaXMgbm90IHBvc3NpYmxlIHdpdGhvdXQgYSByZWRlZW1TY3JpcHQKICAgICAgaWYgKGlucHV0LnByZXZPdXRUeXBlID09PSAnc2NyaXB0aGFzaCcpIHRocm93IG5ldyBFcnJvcignUHJldk91dFNjcmlwdCBpcyBQMlNILCBtaXNzaW5nIHJlZGVlbVNjcmlwdCcpCgogICAgICAvLyBpZiB3ZSBkb24ndCBoYXZlIGEgc2NyaXB0VHlwZSwgYXNzdW1lIHB1YktleUhhc2ggb3RoZXJ3aXNlCiAgICAgIGlmICghaW5wdXQuc2NyaXB0VHlwZSkgewogICAgICAgIGlucHV0LnByZXZPdXRTY3JpcHQgPSBic2NyaXB0LnB1YktleUhhc2hPdXRwdXQoYmNyeXB0by5oYXNoMTYwKGtleVBhaXIuZ2V0UHVibGljS2V5QnVmZmVyKCkpKQogICAgICAgIGlucHV0LnByZXZPdXRUeXBlID0gJ3B1YmtleWhhc2gnCiAgICAgICAgaW5wdXQucHViS2V5cyA9IFtrcFB1YktleV0KICAgICAgICBpbnB1dC5zY3JpcHRUeXBlID0gaW5wdXQucHJldk91dFR5cGUKICAgICAgICBpbnB1dC5zaWduYXR1cmVzID0gW3VuZGVmaW5lZF0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB0aHJvdyBpZiB3ZSBjYW4ndCBzaWduIHdpdGggaXQKICAgICAgICBpZiAoIWlucHV0LnB1YktleXMgfHwgIWlucHV0LnNpZ25hdHVyZXMpIHRocm93IG5ldyBFcnJvcihpbnB1dC5zY3JpcHRUeXBlICsgJyBub3Qgc3VwcG9ydGVkJykKICAgICAgfQogICAgfQoKICAgIGlucHV0Lmhhc2hUeXBlID0gaGFzaFR5cGUKICB9CgogIC8vIHJlYWR5IHRvIHNpZ24/CiAgdmFyIHNpZ25hdHVyZVNjcmlwdCA9IGlucHV0LnJlZGVlbVNjcmlwdCB8fCBpbnB1dC5wcmV2T3V0U2NyaXB0CiAgdmFyIHNpZ25hdHVyZUhhc2ggPSB0aGlzLnR4Lmhhc2hGb3JTaWduYXR1cmUoaW5kZXgsIHNpZ25hdHVyZVNjcmlwdCwgaGFzaFR5cGUpCgogIC8vIGVuZm9yY2UgaW4gb3JkZXIgc2lnbmluZyBvZiBwdWJsaWMga2V5cwogIHZhciB2YWxpZCA9IGlucHV0LnB1YktleXMuc29tZShmdW5jdGlvbiAocHViS2V5LCBpKSB7CiAgICBpZiAoIWJ1ZmZlckVxdWFscyhrcFB1YktleSwgcHViS2V5KSkgcmV0dXJuIGZhbHNlCiAgICBpZiAoaW5wdXQuc2lnbmF0dXJlc1tpXSkgdGhyb3cgbmV3IEVycm9yKCdTaWduYXR1cmUgYWxyZWFkeSBleGlzdHMnKQoKICAgIHZhciBzaWduYXR1cmUgPSBrZXlQYWlyLnNpZ24oc2lnbmF0dXJlSGFzaCkKICAgIGlucHV0LnNpZ25hdHVyZXNbaV0gPSBzaWduYXR1cmUKCiAgICByZXR1cm4gdHJ1ZQogIH0pCgogIGlmICghdmFsaWQpIHRocm93IG5ldyBFcnJvcignS2V5IHBhaXIgY2Fubm90IHNpZ24gZm9yIHRoaXMgaW5wdXQnKQp9Cgptb2R1bGUuZXhwb3J0cyA9IFRyYW5zYWN0aW9uQnVpbGRlcgoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYWRkcmVzcyI6MjQsIi4vY3J5cHRvIjoyNywiLi9lY3BhaXIiOjI5LCIuL2Vjc2lnbmF0dXJlIjozMCwiLi9uZXR3b3JrcyI6MzQsIi4vb3Bjb2RlcyI6MzUsIi4vc2NyaXB0IjozNiwiLi90cmFuc2FjdGlvbiI6MzgsIi4vdHlwZXMiOjQwLCJidWZmZXIiOjcwLCJidWZmZXItZXF1YWxzIjo3NiwidHlwZWZvcmNlIjoxNzJ9XSw0MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKQoKZnVuY3Rpb24gbkJ1ZmZlciAodmFsdWUsIG4pIHsKICB0eXBlZm9yY2UodHlwZXMuQnVmZmVyLCB2YWx1ZSkKICBpZiAodmFsdWUubGVuZ3RoICE9PSBuKSB0aHJvdyBuZXcgdHlwZWZvcmNlLlRmVHlwZUVycm9yKCdFeHBlY3RlZCAnICsgKG4gKiA4KSArICctYml0IEJ1ZmZlciwgZ290ICcgKyAodmFsdWUubGVuZ3RoICogOCkgKyAnLWJpdCBCdWZmZXInKQoKICByZXR1cm4gdHJ1ZQp9CgpmdW5jdGlvbiBIYXNoMTYwYml0ICh2YWx1ZSkgeyByZXR1cm4gbkJ1ZmZlcih2YWx1ZSwgMjApIH0KZnVuY3Rpb24gSGFzaDI1NmJpdCAodmFsdWUpIHsgcmV0dXJuIG5CdWZmZXIodmFsdWUsIDMyKSB9CmZ1bmN0aW9uIEJ1ZmZlcjI1NmJpdCAodmFsdWUpIHsgcmV0dXJuIG5CdWZmZXIodmFsdWUsIDMyKSB9Cgp2YXIgVUlOVDUzX01BWCA9IE1hdGgucG93KDIsIDUzKSAtIDEKZnVuY3Rpb24gVUludDIgKHZhbHVlKSB7IHJldHVybiAodmFsdWUgJiAzKSA9PT0gdmFsdWUgfQpmdW5jdGlvbiBVSW50OCAodmFsdWUpIHsgcmV0dXJuICh2YWx1ZSAmIDB4ZmYpID09PSB2YWx1ZSB9CmZ1bmN0aW9uIFVJbnQzMiAodmFsdWUpIHsgcmV0dXJuICh2YWx1ZSA+Pj4gMCkgPT09IHZhbHVlIH0KZnVuY3Rpb24gVUludDUzICh2YWx1ZSkgewogIHJldHVybiB0eXBlZm9yY2UuTnVtYmVyKHZhbHVlKSAmJgogICAgdmFsdWUgPj0gMCAmJgogICAgdmFsdWUgPD0gVUlOVDUzX01BWCAmJgogICAgTWF0aC5mbG9vcih2YWx1ZSkgPT09IHZhbHVlCn0KCi8vIGV4dGVybmFsIGRlcGVuZGVudCB0eXBlcwp2YXIgQmlnSW50ID0gdHlwZWZvcmNlLnF1YWNrc0xpa2UoJ0JpZ0ludGVnZXInKQp2YXIgRUNQb2ludCA9IHR5cGVmb3JjZS5xdWFja3NMaWtlKCdQb2ludCcpCgovLyBleHBvc2VkLCBleHRlcm5hbCBBUEkKdmFyIEVDU2lnbmF0dXJlID0gdHlwZWZvcmNlLmNvbXBpbGUoeyByOiBCaWdJbnQsIHM6IEJpZ0ludCB9KQp2YXIgTmV0d29yayA9IHR5cGVmb3JjZS5jb21waWxlKHsKICBtZXNzYWdlUHJlZml4OiB0eXBlZm9yY2Uub25lT2YodHlwZWZvcmNlLkJ1ZmZlciwgdHlwZWZvcmNlLlN0cmluZyksCiAgYmlwMzI6IHsKICAgIHB1YmxpYzogVUludDMyLAogICAgcHJpdmF0ZTogVUludDMyCiAgfSwKICBwdWJLZXlIYXNoOiBVSW50OCwKICBzY3JpcHRIYXNoOiBVSW50OCwKICB3aWY6IFVJbnQ4LAogIGR1c3RUaHJlc2hvbGQ6IFVJbnQ1Mwp9KQoKLy8gZXh0ZW5kIHR5cGVmb3JjZSB0eXBlcyB3aXRoIG91cnMKdmFyIHR5cGVzID0gewogIEJpZ0ludDogQmlnSW50LAogIEJ1ZmZlcjI1NmJpdDogQnVmZmVyMjU2Yml0LAogIEVDUG9pbnQ6IEVDUG9pbnQsCiAgRUNTaWduYXR1cmU6IEVDU2lnbmF0dXJlLAogIEhhc2gxNjBiaXQ6IEhhc2gxNjBiaXQsCiAgSGFzaDI1NmJpdDogSGFzaDI1NmJpdCwKICBOZXR3b3JrOiBOZXR3b3JrLAogIFVJbnQyOiBVSW50MiwKICBVSW50ODogVUludDgsCiAgVUludDMyOiBVSW50MzIsCiAgVUludDUzOiBVSW50NTMKfQoKZm9yICh2YXIgdHlwZU5hbWUgaW4gdHlwZWZvcmNlKSB7CiAgdHlwZXNbdHlwZU5hbWVdID0gdHlwZWZvcmNlW3R5cGVOYW1lXQp9Cgptb2R1bGUuZXhwb3J0cyA9IHR5cGVzCgp9LHsidHlwZWZvcmNlIjoxNzJ9XSw0MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgJ3VzZSBzdHJpY3QnOwoKICAvLyBVdGlscwogIGZ1bmN0aW9uIGFzc2VydCAodmFsLCBtc2cpIHsKICAgIGlmICghdmFsKSB0aHJvdyBuZXcgRXJyb3IobXNnIHx8ICdBc3NlcnRpb24gZmFpbGVkJyk7CiAgfQoKICAvLyBDb3VsZCB1c2UgYGluaGVyaXRzYCBtb2R1bGUsIGJ1dCBkb24ndCB3YW50IHRvIG1vdmUgZnJvbSBzaW5nbGUgZmlsZQogIC8vIGFyY2hpdGVjdHVyZSB5ZXQuCiAgZnVuY3Rpb24gaW5oZXJpdHMgKGN0b3IsIHN1cGVyQ3RvcikgewogICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3I7CiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fTsKICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGU7CiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpOwogICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yOwogIH0KCiAgLy8gQk4KCiAgZnVuY3Rpb24gQk4gKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICBpZiAoQk4uaXNCTihudW1iZXIpKSB7CiAgICAgIHJldHVybiBudW1iZXI7CiAgICB9CgogICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICB0aGlzLndvcmRzID0gbnVsbDsKICAgIHRoaXMubGVuZ3RoID0gMDsKCiAgICAvLyBSZWR1Y3Rpb24gY29udGV4dAogICAgdGhpcy5yZWQgPSBudWxsOwoKICAgIGlmIChudW1iZXIgIT09IG51bGwpIHsKICAgICAgaWYgKGJhc2UgPT09ICdsZScgfHwgYmFzZSA9PT0gJ2JlJykgewogICAgICAgIGVuZGlhbiA9IGJhc2U7CiAgICAgICAgYmFzZSA9IDEwOwogICAgICB9CgogICAgICB0aGlzLl9pbml0KG51bWJlciB8fCAwLCBiYXNlIHx8IDEwLCBlbmRpYW4gfHwgJ2JlJyk7CiAgICB9CiAgfQogIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykgewogICAgbW9kdWxlLmV4cG9ydHMgPSBCTjsKICB9IGVsc2UgewogICAgZXhwb3J0cy5CTiA9IEJOOwogIH0KCiAgQk4uQk4gPSBCTjsKICBCTi53b3JkU2l6ZSA9IDI2OwoKICB2YXIgQnVmZmVyOwogIHRyeSB7CiAgICBCdWZmZXIgPSByZXF1aXJlKCdidWYnICsgJ2ZlcicpLkJ1ZmZlcjsKICB9IGNhdGNoIChlKSB7CiAgfQoKICBCTi5pc0JOID0gZnVuY3Rpb24gaXNCTiAobnVtKSB7CiAgICByZXR1cm4gbnVtICE9PSBudWxsICYmIHR5cGVvZiBudW0gPT09ICdvYmplY3QnICYmCiAgICAgIG51bS5jb25zdHJ1Y3Rvci5uYW1lID09PSAnQk4nICYmIEFycmF5LmlzQXJyYXkobnVtLndvcmRzKTsKICB9OwoKICBCTi5tYXggPSBmdW5jdGlvbiBtYXggKGxlZnQsIHJpZ2h0KSB7CiAgICBpZiAobGVmdC5jbXAocmlnaHQpID4gMCkgcmV0dXJuIGxlZnQ7CiAgICByZXR1cm4gcmlnaHQ7CiAgfTsKCiAgQk4ubWluID0gZnVuY3Rpb24gbWluIChsZWZ0LCByaWdodCkgewogICAgaWYgKGxlZnQuY21wKHJpZ2h0KSA8IDApIHJldHVybiBsZWZ0OwogICAgcmV0dXJuIHJpZ2h0OwogIH07CgogIEJOLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIGluaXQgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICBpZiAodHlwZW9mIG51bWJlciA9PT0gJ251bWJlcicpIHsKICAgICAgcmV0dXJuIHRoaXMuX2luaXROdW1iZXIobnVtYmVyLCBiYXNlLCBlbmRpYW4pOwogICAgfQoKICAgIGlmICh0eXBlb2YgbnVtYmVyID09PSAnb2JqZWN0JykgewogICAgICByZXR1cm4gdGhpcy5faW5pdEFycmF5KG51bWJlciwgYmFzZSwgZW5kaWFuKTsKICAgIH0KCiAgICBpZiAoYmFzZSA9PT0gJ2hleCcpIHsKICAgICAgYmFzZSA9IDE2OwogICAgfQogICAgYXNzZXJ0KGJhc2UgPT09IChiYXNlIHwgMCkgJiYgYmFzZSA+PSAyICYmIGJhc2UgPD0gMzYpOwoKICAgIG51bWJlciA9IG51bWJlci50b1N0cmluZygpLnJlcGxhY2UoL1xzKy9nLCAnJyk7CiAgICB2YXIgc3RhcnQgPSAwOwogICAgaWYgKG51bWJlclswXSA9PT0gJy0nKSB7CiAgICAgIHN0YXJ0Kys7CiAgICB9CgogICAgaWYgKGJhc2UgPT09IDE2KSB7CiAgICAgIHRoaXMuX3BhcnNlSGV4KG51bWJlciwgc3RhcnQpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5fcGFyc2VCYXNlKG51bWJlciwgYmFzZSwgc3RhcnQpOwogICAgfQoKICAgIGlmIChudW1iZXJbMF0gPT09ICctJykgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgIH0KCiAgICB0aGlzLnN0cmlwKCk7CgogICAgaWYgKGVuZGlhbiAhPT0gJ2xlJykgcmV0dXJuOwoKICAgIHRoaXMuX2luaXRBcnJheSh0aGlzLnRvQXJyYXkoKSwgYmFzZSwgZW5kaWFuKTsKICB9OwoKICBCTi5wcm90b3R5cGUuX2luaXROdW1iZXIgPSBmdW5jdGlvbiBfaW5pdE51bWJlciAobnVtYmVyLCBiYXNlLCBlbmRpYW4pIHsKICAgIGlmIChudW1iZXIgPCAwKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICBudW1iZXIgPSAtbnVtYmVyOwogICAgfQogICAgaWYgKG51bWJlciA8IDB4NDAwMDAwMCkgewogICAgICB0aGlzLndvcmRzID0gWyBudW1iZXIgJiAweDNmZmZmZmYgXTsKICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgfSBlbHNlIGlmIChudW1iZXIgPCAweDEwMDAwMDAwMDAwMDAwKSB7CiAgICAgIHRoaXMud29yZHMgPSBbCiAgICAgICAgbnVtYmVyICYgMHgzZmZmZmZmLAogICAgICAgIChudW1iZXIgLyAweDQwMDAwMDApICYgMHgzZmZmZmZmCiAgICAgIF07CiAgICAgIHRoaXMubGVuZ3RoID0gMjsKICAgIH0gZWxzZSB7CiAgICAgIGFzc2VydChudW1iZXIgPCAweDIwMDAwMDAwMDAwMDAwKTsgLy8gMiBeIDUzICh1bnNhZmUpCiAgICAgIHRoaXMud29yZHMgPSBbCiAgICAgICAgbnVtYmVyICYgMHgzZmZmZmZmLAogICAgICAgIChudW1iZXIgLyAweDQwMDAwMDApICYgMHgzZmZmZmZmLAogICAgICAgIDEKICAgICAgXTsKICAgICAgdGhpcy5sZW5ndGggPSAzOwogICAgfQoKICAgIGlmIChlbmRpYW4gIT09ICdsZScpIHJldHVybjsKCiAgICAvLyBSZXZlcnNlIHRoZSBieXRlcwogICAgdGhpcy5faW5pdEFycmF5KHRoaXMudG9BcnJheSgpLCBiYXNlLCBlbmRpYW4pOwogIH07CgogIEJOLnByb3RvdHlwZS5faW5pdEFycmF5ID0gZnVuY3Rpb24gX2luaXRBcnJheSAobnVtYmVyLCBiYXNlLCBlbmRpYW4pIHsKICAgIC8vIFBlcmhhcHMgYSBVaW50OEFycmF5CiAgICBhc3NlcnQodHlwZW9mIG51bWJlci5sZW5ndGggPT09ICdudW1iZXInKTsKICAgIGlmIChudW1iZXIubGVuZ3RoIDw9IDApIHsKICAgICAgdGhpcy53b3JkcyA9IFsgMCBdOwogICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIHRoaXMubGVuZ3RoID0gTWF0aC5jZWlsKG51bWJlci5sZW5ndGggLyAzKTsKICAgIHRoaXMud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSAwOwogICAgfQoKICAgIHZhciBqLCB3OwogICAgdmFyIG9mZiA9IDA7CiAgICBpZiAoZW5kaWFuID09PSAnYmUnKSB7CiAgICAgIGZvciAoaSA9IG51bWJlci5sZW5ndGggLSAxLCBqID0gMDsgaSA+PSAwOyBpIC09IDMpIHsKICAgICAgICB3ID0gbnVtYmVyW2ldIHwgKG51bWJlcltpIC0gMV0gPDwgOCkgfCAobnVtYmVyW2kgLSAyXSA8PCAxNik7CiAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSAodyA8PCBvZmYpICYgMHgzZmZmZmZmOwogICAgICAgIHRoaXMud29yZHNbaiArIDFdID0gKHcgPj4+ICgyNiAtIG9mZikpICYgMHgzZmZmZmZmOwogICAgICAgIG9mZiArPSAyNDsKICAgICAgICBpZiAob2ZmID49IDI2KSB7CiAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICBqKys7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKGVuZGlhbiA9PT0gJ2xlJykgewogICAgICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IG51bWJlci5sZW5ndGg7IGkgKz0gMykgewogICAgICAgIHcgPSBudW1iZXJbaV0gfCAobnVtYmVyW2kgKyAxXSA8PCA4KSB8IChudW1iZXJbaSArIDJdIDw8IDE2KTsKICAgICAgICB0aGlzLndvcmRzW2pdIHw9ICh3IDw8IG9mZikgJiAweDNmZmZmZmY7CiAgICAgICAgdGhpcy53b3Jkc1tqICsgMV0gPSAodyA+Pj4gKDI2IC0gb2ZmKSkgJiAweDNmZmZmZmY7CiAgICAgICAgb2ZmICs9IDI0OwogICAgICAgIGlmIChvZmYgPj0gMjYpIHsKICAgICAgICAgIG9mZiAtPSAyNjsKICAgICAgICAgIGorKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgZnVuY3Rpb24gcGFyc2VIZXggKHN0ciwgc3RhcnQsIGVuZCkgewogICAgdmFyIHIgPSAwOwogICAgdmFyIGxlbiA9IE1hdGgubWluKHN0ci5sZW5ndGgsIGVuZCk7CiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBsZW47IGkrKykgewogICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gNDg7CgogICAgICByIDw8PSA0OwoKICAgICAgLy8gJ2EnIC0gJ2YnCiAgICAgIGlmIChjID49IDQ5ICYmIGMgPD0gNTQpIHsKICAgICAgICByIHw9IGMgLSA0OSArIDB4YTsKCiAgICAgIC8vICdBJyAtICdGJwogICAgICB9IGVsc2UgaWYgKGMgPj0gMTcgJiYgYyA8PSAyMikgewogICAgICAgIHIgfD0gYyAtIDE3ICsgMHhhOwoKICAgICAgLy8gJzAnIC0gJzknCiAgICAgIH0gZWxzZSB7CiAgICAgICAgciB8PSBjICYgMHhmOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcjsKICB9CgogIEJOLnByb3RvdHlwZS5fcGFyc2VIZXggPSBmdW5jdGlvbiBfcGFyc2VIZXggKG51bWJlciwgc3RhcnQpIHsKICAgIC8vIENyZWF0ZSBwb3NzaWJseSBiaWdnZXIgYXJyYXkgdG8gZW5zdXJlIHRoYXQgaXQgZml0cyB0aGUgbnVtYmVyCiAgICB0aGlzLmxlbmd0aCA9IE1hdGguY2VpbCgobnVtYmVyLmxlbmd0aCAtIHN0YXJ0KSAvIDYpOwogICAgdGhpcy53b3JkcyA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICB9CgogICAgdmFyIGosIHc7CiAgICAvLyBTY2FuIDI0LWJpdCBjaHVua3MgYW5kIGFkZCB0aGVtIHRvIHRoZSBudW1iZXIKICAgIHZhciBvZmYgPSAwOwogICAgZm9yIChpID0gbnVtYmVyLmxlbmd0aCAtIDYsIGogPSAwOyBpID49IHN0YXJ0OyBpIC09IDYpIHsKICAgICAgdyA9IHBhcnNlSGV4KG51bWJlciwgaSwgaSArIDYpOwogICAgICB0aGlzLndvcmRzW2pdIHw9ICh3IDw8IG9mZikgJiAweDNmZmZmZmY7CiAgICAgIHRoaXMud29yZHNbaiArIDFdIHw9IHcgPj4+ICgyNiAtIG9mZikgJiAweDNmZmZmZjsKICAgICAgb2ZmICs9IDI0OwogICAgICBpZiAob2ZmID49IDI2KSB7CiAgICAgICAgb2ZmIC09IDI2OwogICAgICAgIGorKzsKICAgICAgfQogICAgfQogICAgaWYgKGkgKyA2ICE9PSBzdGFydCkgewogICAgICB3ID0gcGFyc2VIZXgobnVtYmVyLCBzdGFydCwgaSArIDYpOwogICAgICB0aGlzLndvcmRzW2pdIHw9ICh3IDw8IG9mZikgJiAweDNmZmZmZmY7CiAgICAgIHRoaXMud29yZHNbaiArIDFdIHw9IHcgPj4+ICgyNiAtIG9mZikgJiAweDNmZmZmZjsKICAgIH0KICAgIHRoaXMuc3RyaXAoKTsKICB9OwoKICBmdW5jdGlvbiBwYXJzZUJhc2UgKHN0ciwgc3RhcnQsIGVuZCwgbXVsKSB7CiAgICB2YXIgciA9IDA7CiAgICB2YXIgbGVuID0gTWF0aC5taW4oc3RyLmxlbmd0aCwgZW5kKTsKICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSkgLSA0ODsKCiAgICAgIHIgKj0gbXVsOwoKICAgICAgLy8gJ2EnCiAgICAgIGlmIChjID49IDQ5KSB7CiAgICAgICAgciArPSBjIC0gNDkgKyAweGE7CgogICAgICAvLyAnQScKICAgICAgfSBlbHNlIGlmIChjID49IDE3KSB7CiAgICAgICAgciArPSBjIC0gMTcgKyAweGE7CgogICAgICAvLyAnMCcgLSAnOScKICAgICAgfSBlbHNlIHsKICAgICAgICByICs9IGM7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByOwogIH0KCiAgQk4ucHJvdG90eXBlLl9wYXJzZUJhc2UgPSBmdW5jdGlvbiBfcGFyc2VCYXNlIChudW1iZXIsIGJhc2UsIHN0YXJ0KSB7CiAgICAvLyBJbml0aWFsaXplIGFzIHplcm8KICAgIHRoaXMud29yZHMgPSBbIDAgXTsKICAgIHRoaXMubGVuZ3RoID0gMTsKCiAgICAvLyBGaW5kIGxlbmd0aCBvZiBsaW1iIGluIGJhc2UKICAgIGZvciAodmFyIGxpbWJMZW4gPSAwLCBsaW1iUG93ID0gMTsgbGltYlBvdyA8PSAweDNmZmZmZmY7IGxpbWJQb3cgKj0gYmFzZSkgewogICAgICBsaW1iTGVuKys7CiAgICB9CiAgICBsaW1iTGVuLS07CiAgICBsaW1iUG93ID0gKGxpbWJQb3cgLyBiYXNlKSB8IDA7CgogICAgdmFyIHRvdGFsID0gbnVtYmVyLmxlbmd0aCAtIHN0YXJ0OwogICAgdmFyIG1vZCA9IHRvdGFsICUgbGltYkxlbjsKICAgIHZhciBlbmQgPSBNYXRoLm1pbih0b3RhbCwgdG90YWwgLSBtb2QpICsgc3RhcnQ7CgogICAgdmFyIHdvcmQgPSAwOwogICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IGxpbWJMZW4pIHsKICAgICAgd29yZCA9IHBhcnNlQmFzZShudW1iZXIsIGksIGkgKyBsaW1iTGVuLCBiYXNlKTsKCiAgICAgIHRoaXMuaW11bG4obGltYlBvdyk7CiAgICAgIGlmICh0aGlzLndvcmRzWzBdICsgd29yZCA8IDB4NDAwMDAwMCkgewogICAgICAgIHRoaXMud29yZHNbMF0gKz0gd29yZDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9pYWRkbih3b3JkKTsKICAgICAgfQogICAgfQoKICAgIGlmIChtb2QgIT09IDApIHsKICAgICAgdmFyIHBvdyA9IDE7CiAgICAgIHdvcmQgPSBwYXJzZUJhc2UobnVtYmVyLCBpLCBudW1iZXIubGVuZ3RoLCBiYXNlKTsKCiAgICAgIGZvciAoaSA9IDA7IGkgPCBtb2Q7IGkrKykgewogICAgICAgIHBvdyAqPSBiYXNlOwogICAgICB9CgogICAgICB0aGlzLmltdWxuKHBvdyk7CiAgICAgIGlmICh0aGlzLndvcmRzWzBdICsgd29yZCA8IDB4NDAwMDAwMCkgewogICAgICAgIHRoaXMud29yZHNbMF0gKz0gd29yZDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9pYWRkbih3b3JkKTsKICAgICAgfQogICAgfQogIH07CgogIEJOLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAoZGVzdCkgewogICAgZGVzdC53b3JkcyA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgZGVzdC53b3Jkc1tpXSA9IHRoaXMud29yZHNbaV07CiAgICB9CiAgICBkZXN0Lmxlbmd0aCA9IHRoaXMubGVuZ3RoOwogICAgZGVzdC5uZWdhdGl2ZSA9IHRoaXMubmVnYXRpdmU7CiAgICBkZXN0LnJlZCA9IHRoaXMucmVkOwogIH07CgogIEJOLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIGNsb25lICgpIHsKICAgIHZhciByID0gbmV3IEJOKG51bGwpOwogICAgdGhpcy5jb3B5KHIpOwogICAgcmV0dXJuIHI7CiAgfTsKCiAgQk4ucHJvdG90eXBlLl9leHBhbmQgPSBmdW5jdGlvbiBfZXhwYW5kIChzaXplKSB7CiAgICB3aGlsZSAodGhpcy5sZW5ndGggPCBzaXplKSB7CiAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGgrK10gPSAwOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgLy8gUmVtb3ZlIGxlYWRpbmcgYDBgIGZyb20gYHRoaXNgCiAgQk4ucHJvdG90eXBlLnN0cmlwID0gZnVuY3Rpb24gc3RyaXAgKCkgewogICAgd2hpbGUgKHRoaXMubGVuZ3RoID4gMSAmJiB0aGlzLndvcmRzW3RoaXMubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgdGhpcy5sZW5ndGgtLTsKICAgIH0KICAgIHJldHVybiB0aGlzLl9ub3JtU2lnbigpOwogIH07CgogIEJOLnByb3RvdHlwZS5fbm9ybVNpZ24gPSBmdW5jdGlvbiBfbm9ybVNpZ24gKCkgewogICAgLy8gLTAgPSAwCiAgICBpZiAodGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy53b3Jkc1swXSA9PT0gMCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH07CgogIEJOLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7CiAgICByZXR1cm4gKHRoaXMucmVkID8gJzxCTi1SOiAnIDogJzxCTjogJykgKyB0aGlzLnRvU3RyaW5nKDE2KSArICc+JzsKICB9OwoKICAvKgoKICB2YXIgemVyb3MgPSBbXTsKICB2YXIgZ3JvdXBTaXplcyA9IFtdOwogIHZhciBncm91cEJhc2VzID0gW107CgogIHZhciBzID0gJyc7CiAgdmFyIGkgPSAtMTsKICB3aGlsZSAoKytpIDwgQk4ud29yZFNpemUpIHsKICAgIHplcm9zW2ldID0gczsKICAgIHMgKz0gJzAnOwogIH0KICBncm91cFNpemVzWzBdID0gMDsKICBncm91cFNpemVzWzFdID0gMDsKICBncm91cEJhc2VzWzBdID0gMDsKICBncm91cEJhc2VzWzFdID0gMDsKICB2YXIgYmFzZSA9IDIgLSAxOwogIHdoaWxlICgrK2Jhc2UgPCAzNiArIDEpIHsKICAgIHZhciBncm91cFNpemUgPSAwOwogICAgdmFyIGdyb3VwQmFzZSA9IDE7CiAgICB3aGlsZSAoZ3JvdXBCYXNlIDwgKDEgPDwgQk4ud29yZFNpemUpIC8gYmFzZSkgewogICAgICBncm91cEJhc2UgKj0gYmFzZTsKICAgICAgZ3JvdXBTaXplICs9IDE7CiAgICB9CiAgICBncm91cFNpemVzW2Jhc2VdID0gZ3JvdXBTaXplOwogICAgZ3JvdXBCYXNlc1tiYXNlXSA9IGdyb3VwQmFzZTsKICB9CgogICovCgogIHZhciB6ZXJvcyA9IFsKICAgICcnLAogICAgJzAnLAogICAgJzAwJywKICAgICcwMDAnLAogICAgJzAwMDAnLAogICAgJzAwMDAwJywKICAgICcwMDAwMDAnLAogICAgJzAwMDAwMDAnLAogICAgJzAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnCiAgXTsKCiAgdmFyIGdyb3VwU2l6ZXMgPSBbCiAgICAwLCAwLAogICAgMjUsIDE2LCAxMiwgMTEsIDEwLCA5LCA4LAogICAgOCwgNywgNywgNywgNywgNiwgNiwKICAgIDYsIDYsIDYsIDYsIDYsIDUsIDUsCiAgICA1LCA1LCA1LCA1LCA1LCA1LCA1LAogICAgNSwgNSwgNSwgNSwgNSwgNSwgNQogIF07CgogIHZhciBncm91cEJhc2VzID0gWwogICAgMCwgMCwKICAgIDMzNTU0NDMyLCA0MzA0NjcyMSwgMTY3NzcyMTYsIDQ4ODI4MTI1LCA2MDQ2NjE3NiwgNDAzNTM2MDcsIDE2Nzc3MjE2LAogICAgNDMwNDY3MjEsIDEwMDAwMDAwLCAxOTQ4NzE3MSwgMzU4MzE4MDgsIDYyNzQ4NTE3LCA3NTI5NTM2LCAxMTM5MDYyNSwKICAgIDE2Nzc3MjE2LCAyNDEzNzU2OSwgMzQwMTIyMjQsIDQ3MDQ1ODgxLCA2NDAwMDAwMCwgNDA4NDEwMSwgNTE1MzYzMiwKICAgIDY0MzYzNDMsIDc5NjI2MjQsIDk3NjU2MjUsIDExODgxMzc2LCAxNDM0ODkwNywgMTcyMTAzNjgsIDIwNTExMTQ5LAogICAgMjQzMDAwMDAsIDI4NjI5MTUxLCAzMzU1NDQzMiwgMzkxMzUzOTMsIDQ1NDM1NDI0LCA1MjUyMTg3NSwgNjA0NjYxNzYKICBdOwoKICBCTi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoYmFzZSwgcGFkZGluZykgewogICAgYmFzZSA9IGJhc2UgfHwgMTA7CiAgICBwYWRkaW5nID0gcGFkZGluZyB8IDAgfHwgMTsKCiAgICB2YXIgb3V0OwogICAgaWYgKGJhc2UgPT09IDE2IHx8IGJhc2UgPT09ICdoZXgnKSB7CiAgICAgIG91dCA9ICcnOwogICAgICB2YXIgb2ZmID0gMDsKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW2ldOwogICAgICAgIHZhciB3b3JkID0gKCgodyA8PCBvZmYpIHwgY2FycnkpICYgMHhmZmZmZmYpLnRvU3RyaW5nKDE2KTsKICAgICAgICBjYXJyeSA9ICh3ID4+PiAoMjQgLSBvZmYpKSAmIDB4ZmZmZmZmOwogICAgICAgIGlmIChjYXJyeSAhPT0gMCB8fCBpICE9PSB0aGlzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIG91dCA9IHplcm9zWzYgLSB3b3JkLmxlbmd0aF0gKyB3b3JkICsgb3V0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvdXQgPSB3b3JkICsgb3V0OwogICAgICAgIH0KICAgICAgICBvZmYgKz0gMjsKICAgICAgICBpZiAob2ZmID49IDI2KSB7CiAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICBpLS07CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIG91dCA9IGNhcnJ5LnRvU3RyaW5nKDE2KSArIG91dDsKICAgICAgfQogICAgICB3aGlsZSAob3V0Lmxlbmd0aCAlIHBhZGRpbmcgIT09IDApIHsKICAgICAgICBvdXQgPSAnMCcgKyBvdXQ7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBvdXQgPSAnLScgKyBvdXQ7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KCiAgICBpZiAoYmFzZSA9PT0gKGJhc2UgfCAwKSAmJiBiYXNlID49IDIgJiYgYmFzZSA8PSAzNikgewogICAgICAvLyB2YXIgZ3JvdXBTaXplID0gTWF0aC5mbG9vcihCTi53b3JkU2l6ZSAqIE1hdGguTE4yIC8gTWF0aC5sb2coYmFzZSkpOwogICAgICB2YXIgZ3JvdXBTaXplID0gZ3JvdXBTaXplc1tiYXNlXTsKICAgICAgLy8gdmFyIGdyb3VwQmFzZSA9IE1hdGgucG93KGJhc2UsIGdyb3VwU2l6ZSk7CiAgICAgIHZhciBncm91cEJhc2UgPSBncm91cEJhc2VzW2Jhc2VdOwogICAgICBvdXQgPSAnJzsKICAgICAgdmFyIGMgPSB0aGlzLmNsb25lKCk7CiAgICAgIGMubmVnYXRpdmUgPSAwOwogICAgICB3aGlsZSAoIWMuaXNaZXJvKCkpIHsKICAgICAgICB2YXIgciA9IGMubW9kbihncm91cEJhc2UpLnRvU3RyaW5nKGJhc2UpOwogICAgICAgIGMgPSBjLmlkaXZuKGdyb3VwQmFzZSk7CgogICAgICAgIGlmICghYy5pc1plcm8oKSkgewogICAgICAgICAgb3V0ID0gemVyb3NbZ3JvdXBTaXplIC0gci5sZW5ndGhdICsgciArIG91dDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb3V0ID0gciArIG91dDsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKICAgICAgICBvdXQgPSAnMCcgKyBvdXQ7CiAgICAgIH0KICAgICAgd2hpbGUgKG91dC5sZW5ndGggJSBwYWRkaW5nICE9PSAwKSB7CiAgICAgICAgb3V0ID0gJzAnICsgb3V0OwogICAgICB9CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgb3V0ID0gJy0nICsgb3V0OwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CgogICAgYXNzZXJ0KGZhbHNlLCAnQmFzZSBzaG91bGQgYmUgYmV0d2VlbiAyIGFuZCAzNicpOwogIH07CgogIEJOLnByb3RvdHlwZS50b051bWJlciA9IGZ1bmN0aW9uIHRvTnVtYmVyICgpIHsKICAgIHZhciBsZW5ndGggPSB0aGlzLmJpdExlbmd0aCgpOwogICAgdmFyIHJldDsKICAgIGlmIChsZW5ndGggPD0gMjYpIHsKICAgICAgcmV0ID0gdGhpcy53b3Jkc1swXTsKICAgIH0gZWxzZSBpZiAobGVuZ3RoIDw9IDUyKSB7CiAgICAgIHJldCA9ICh0aGlzLndvcmRzWzFdICogMHg0MDAwMDAwKSArIHRoaXMud29yZHNbMF07CiAgICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gNTMpIHsKICAgICAgLy8gTk9URTogYXQgdGhpcyBzdGFnZSBpdCBpcyBrbm93biB0aGF0IHRoZSB0b3AgYml0IGlzIHNldAogICAgICByZXQgPSAweDEwMDAwMDAwMDAwMDAwICsgKHRoaXMud29yZHNbMV0gKiAweDQwMDAwMDApICsgdGhpcy53b3Jkc1swXTsKICAgIH0gZWxzZSB7CiAgICAgIGFzc2VydChmYWxzZSwgJ051bWJlciBjYW4gb25seSBzYWZlbHkgc3RvcmUgdXAgdG8gNTMgYml0cycpOwogICAgfQogICAgcmV0dXJuICh0aGlzLm5lZ2F0aXZlICE9PSAwKSA/IC1yZXQgOiByZXQ7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7CiAgICByZXR1cm4gdGhpcy50b1N0cmluZygxNik7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnRvQnVmZmVyID0gZnVuY3Rpb24gdG9CdWZmZXIgKGVuZGlhbiwgbGVuZ3RoKSB7CiAgICBhc3NlcnQodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpOwogICAgcmV0dXJuIHRoaXMudG9BcnJheUxpa2UoQnVmZmVyLCBlbmRpYW4sIGxlbmd0aCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiB0b0FycmF5IChlbmRpYW4sIGxlbmd0aCkgewogICAgcmV0dXJuIHRoaXMudG9BcnJheUxpa2UoQXJyYXksIGVuZGlhbiwgbGVuZ3RoKTsKICB9OwoKICBCTi5wcm90b3R5cGUudG9BcnJheUxpa2UgPSBmdW5jdGlvbiB0b0FycmF5TGlrZSAoQXJyYXlUeXBlLCBlbmRpYW4sIGxlbmd0aCkgewogICAgdmFyIGJ5dGVMZW5ndGggPSB0aGlzLmJ5dGVMZW5ndGgoKTsKICAgIHZhciByZXFMZW5ndGggPSBsZW5ndGggfHwgTWF0aC5tYXgoMSwgYnl0ZUxlbmd0aCk7CiAgICBhc3NlcnQoYnl0ZUxlbmd0aCA8PSByZXFMZW5ndGgsICdieXRlIGFycmF5IGxvbmdlciB0aGFuIGRlc2lyZWQgbGVuZ3RoJyk7CiAgICBhc3NlcnQocmVxTGVuZ3RoID4gMCwgJ1JlcXVlc3RlZCBhcnJheSBsZW5ndGggPD0gMCcpOwoKICAgIHRoaXMuc3RyaXAoKTsKICAgIHZhciBsaXR0bGVFbmRpYW4gPSBlbmRpYW4gPT09ICdsZSc7CiAgICB2YXIgcmVzID0gbmV3IEFycmF5VHlwZShyZXFMZW5ndGgpOwoKICAgIHZhciBiLCBpOwogICAgdmFyIHEgPSB0aGlzLmNsb25lKCk7CiAgICBpZiAoIWxpdHRsZUVuZGlhbikgewogICAgICAvLyBBc3N1bWUgYmlnLWVuZGlhbgogICAgICBmb3IgKGkgPSAwOyBpIDwgcmVxTGVuZ3RoIC0gYnl0ZUxlbmd0aDsgaSsrKSB7CiAgICAgICAgcmVzW2ldID0gMDsKICAgICAgfQoKICAgICAgZm9yIChpID0gMDsgIXEuaXNaZXJvKCk7IGkrKykgewogICAgICAgIGIgPSBxLmFuZGxuKDB4ZmYpOwogICAgICAgIHEuaXVzaHJuKDgpOwoKICAgICAgICByZXNbcmVxTGVuZ3RoIC0gaSAtIDFdID0gYjsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgZm9yIChpID0gMDsgIXEuaXNaZXJvKCk7IGkrKykgewogICAgICAgIGIgPSBxLmFuZGxuKDB4ZmYpOwogICAgICAgIHEuaXVzaHJuKDgpOwoKICAgICAgICByZXNbaV0gPSBiOwogICAgICB9CgogICAgICBmb3IgKDsgaSA8IHJlcUxlbmd0aDsgaSsrKSB7CiAgICAgICAgcmVzW2ldID0gMDsKICAgICAgfQogICAgfQoKICAgIHJldHVybiByZXM7CiAgfTsKCiAgaWYgKE1hdGguY2x6MzIpIHsKICAgIEJOLnByb3RvdHlwZS5fY291bnRCaXRzID0gZnVuY3Rpb24gX2NvdW50Qml0cyAodykgewogICAgICByZXR1cm4gMzIgLSBNYXRoLmNsejMyKHcpOwogICAgfTsKICB9IGVsc2UgewogICAgQk4ucHJvdG90eXBlLl9jb3VudEJpdHMgPSBmdW5jdGlvbiBfY291bnRCaXRzICh3KSB7CiAgICAgIHZhciB0ID0gdzsKICAgICAgdmFyIHIgPSAwOwogICAgICBpZiAodCA+PSAweDEwMDApIHsKICAgICAgICByICs9IDEzOwogICAgICAgIHQgPj4+PSAxMzsKICAgICAgfQogICAgICBpZiAodCA+PSAweDQwKSB7CiAgICAgICAgciArPSA3OwogICAgICAgIHQgPj4+PSA3OwogICAgICB9CiAgICAgIGlmICh0ID49IDB4OCkgewogICAgICAgIHIgKz0gNDsKICAgICAgICB0ID4+Pj0gNDsKICAgICAgfQogICAgICBpZiAodCA+PSAweDAyKSB7CiAgICAgICAgciArPSAyOwogICAgICAgIHQgPj4+PSAyOwogICAgICB9CiAgICAgIHJldHVybiByICsgdDsKICAgIH07CiAgfQoKICBCTi5wcm90b3R5cGUuX3plcm9CaXRzID0gZnVuY3Rpb24gX3plcm9CaXRzICh3KSB7CiAgICAvLyBTaG9ydC1jdXQKICAgIGlmICh3ID09PSAwKSByZXR1cm4gMjY7CgogICAgdmFyIHQgPSB3OwogICAgdmFyIHIgPSAwOwogICAgaWYgKCh0ICYgMHgxZmZmKSA9PT0gMCkgewogICAgICByICs9IDEzOwogICAgICB0ID4+Pj0gMTM7CiAgICB9CiAgICBpZiAoKHQgJiAweDdmKSA9PT0gMCkgewogICAgICByICs9IDc7CiAgICAgIHQgPj4+PSA3OwogICAgfQogICAgaWYgKCh0ICYgMHhmKSA9PT0gMCkgewogICAgICByICs9IDQ7CiAgICAgIHQgPj4+PSA0OwogICAgfQogICAgaWYgKCh0ICYgMHgzKSA9PT0gMCkgewogICAgICByICs9IDI7CiAgICAgIHQgPj4+PSAyOwogICAgfQogICAgaWYgKCh0ICYgMHgxKSA9PT0gMCkgewogICAgICByKys7CiAgICB9CiAgICByZXR1cm4gcjsKICB9OwoKICAvLyBSZXR1cm4gbnVtYmVyIG9mIHVzZWQgYml0cyBpbiBhIEJOCiAgQk4ucHJvdG90eXBlLmJpdExlbmd0aCA9IGZ1bmN0aW9uIGJpdExlbmd0aCAoKSB7CiAgICB2YXIgdyA9IHRoaXMud29yZHNbdGhpcy5sZW5ndGggLSAxXTsKICAgIHZhciBoaSA9IHRoaXMuX2NvdW50Qml0cyh3KTsKICAgIHJldHVybiAodGhpcy5sZW5ndGggLSAxKSAqIDI2ICsgaGk7CiAgfTsKCiAgZnVuY3Rpb24gdG9CaXRBcnJheSAobnVtKSB7CiAgICB2YXIgdyA9IG5ldyBBcnJheShudW0uYml0TGVuZ3RoKCkpOwoKICAgIGZvciAodmFyIGJpdCA9IDA7IGJpdCA8IHcubGVuZ3RoOyBiaXQrKykgewogICAgICB2YXIgb2ZmID0gKGJpdCAvIDI2KSB8IDA7CiAgICAgIHZhciB3Yml0ID0gYml0ICUgMjY7CgogICAgICB3W2JpdF0gPSAobnVtLndvcmRzW29mZl0gJiAoMSA8PCB3Yml0KSkgPj4+IHdiaXQ7CiAgICB9CgogICAgcmV0dXJuIHc7CiAgfQoKICAvLyBOdW1iZXIgb2YgdHJhaWxpbmcgemVybyBiaXRzCiAgQk4ucHJvdG90eXBlLnplcm9CaXRzID0gZnVuY3Rpb24gemVyb0JpdHMgKCkgewogICAgaWYgKHRoaXMuaXNaZXJvKCkpIHJldHVybiAwOwoKICAgIHZhciByID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgYiA9IHRoaXMuX3plcm9CaXRzKHRoaXMud29yZHNbaV0pOwogICAgICByICs9IGI7CiAgICAgIGlmIChiICE9PSAyNikgYnJlYWs7CiAgICB9CiAgICByZXR1cm4gcjsKICB9OwoKICBCTi5wcm90b3R5cGUuYnl0ZUxlbmd0aCA9IGZ1bmN0aW9uIGJ5dGVMZW5ndGggKCkgewogICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmJpdExlbmd0aCgpIC8gOCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnRvVHdvcyA9IGZ1bmN0aW9uIHRvVHdvcyAod2lkdGgpIHsKICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIHJldHVybiB0aGlzLmFicygpLmlub3RuKHdpZHRoKS5pYWRkbigxKTsKICAgIH0KICAgIHJldHVybiB0aGlzLmNsb25lKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmZyb21Ud29zID0gZnVuY3Rpb24gZnJvbVR3b3MgKHdpZHRoKSB7CiAgICBpZiAodGhpcy50ZXN0bih3aWR0aCAtIDEpKSB7CiAgICAgIHJldHVybiB0aGlzLm5vdG4od2lkdGgpLmlhZGRuKDEpLmluZWcoKTsKICAgIH0KICAgIHJldHVybiB0aGlzLmNsb25lKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlzTmVnID0gZnVuY3Rpb24gaXNOZWcgKCkgewogICAgcmV0dXJuIHRoaXMubmVnYXRpdmUgIT09IDA7CiAgfTsKCiAgLy8gUmV0dXJuIG5lZ2F0aXZlIGNsb25lIG9mIGB0aGlzYAogIEJOLnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcgKCkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbmVnKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmluZWcgPSBmdW5jdGlvbiBpbmVnICgpIHsKICAgIGlmICghdGhpcy5pc1plcm8oKSkgewogICAgICB0aGlzLm5lZ2F0aXZlIF49IDE7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgLy8gT3IgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICBCTi5wcm90b3R5cGUuaXVvciA9IGZ1bmN0aW9uIGl1b3IgKG51bSkgewogICAgd2hpbGUgKHRoaXMubGVuZ3RoIDwgbnVtLmxlbmd0aCkgewogICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoKytdID0gMDsKICAgIH0KCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bS5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXSB8IG51bS53b3Jkc1tpXTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIEJOLnByb3RvdHlwZS5pb3IgPSBmdW5jdGlvbiBpb3IgKG51bSkgewogICAgYXNzZXJ0KCh0aGlzLm5lZ2F0aXZlIHwgbnVtLm5lZ2F0aXZlKSA9PT0gMCk7CiAgICByZXR1cm4gdGhpcy5pdW9yKG51bSk7CiAgfTsKCiAgLy8gT3IgYG51bWAgd2l0aCBgdGhpc2AKICBCTi5wcm90b3R5cGUub3IgPSBmdW5jdGlvbiBvciAobnVtKSB7CiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLmlvcihudW0pOwogICAgcmV0dXJuIG51bS5jbG9uZSgpLmlvcih0aGlzKTsKICB9OwoKICBCTi5wcm90b3R5cGUudW9yID0gZnVuY3Rpb24gdW9yIChudW0pIHsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaXVvcihudW0pOwogICAgcmV0dXJuIG51bS5jbG9uZSgpLml1b3IodGhpcyk7CiAgfTsKCiAgLy8gQW5kIGBudW1gIHdpdGggYHRoaXNgIGluLXBsYWNlCiAgQk4ucHJvdG90eXBlLml1YW5kID0gZnVuY3Rpb24gaXVhbmQgKG51bSkgewogICAgLy8gYiA9IG1pbi1sZW5ndGgobnVtLCB0aGlzKQogICAgdmFyIGI7CiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSB7CiAgICAgIGIgPSBudW07CiAgICB9IGVsc2UgewogICAgICBiID0gdGhpczsKICAgIH0KCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgdGhpcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaV0gJiBudW0ud29yZHNbaV07CiAgICB9CgogICAgdGhpcy5sZW5ndGggPSBiLmxlbmd0aDsKCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIEJOLnByb3RvdHlwZS5pYW5kID0gZnVuY3Rpb24gaWFuZCAobnVtKSB7CiAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgIHJldHVybiB0aGlzLml1YW5kKG51bSk7CiAgfTsKCiAgLy8gQW5kIGBudW1gIHdpdGggYHRoaXNgCiAgQk4ucHJvdG90eXBlLmFuZCA9IGZ1bmN0aW9uIGFuZCAobnVtKSB7CiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLmlhbmQobnVtKTsKICAgIHJldHVybiBudW0uY2xvbmUoKS5pYW5kKHRoaXMpOwogIH07CgogIEJOLnByb3RvdHlwZS51YW5kID0gZnVuY3Rpb24gdWFuZCAobnVtKSB7CiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1YW5kKG51bSk7CiAgICByZXR1cm4gbnVtLmNsb25lKCkuaXVhbmQodGhpcyk7CiAgfTsKCiAgLy8gWG9yIGBudW1gIHdpdGggYHRoaXNgIGluLXBsYWNlCiAgQk4ucHJvdG90eXBlLml1eG9yID0gZnVuY3Rpb24gaXV4b3IgKG51bSkgewogICAgLy8gYS5sZW5ndGggPiBiLmxlbmd0aAogICAgdmFyIGE7CiAgICB2YXIgYjsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHsKICAgICAgYSA9IHRoaXM7CiAgICAgIGIgPSBudW07CiAgICB9IGVsc2UgewogICAgICBhID0gbnVtOwogICAgICBiID0gdGhpczsKICAgIH0KCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgdGhpcy53b3Jkc1tpXSA9IGEud29yZHNbaV0gXiBiLndvcmRzW2ldOwogICAgfQoKICAgIGlmICh0aGlzICE9PSBhKSB7CiAgICAgIGZvciAoOyBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gPSBhLndvcmRzW2ldOwogICAgICB9CiAgICB9CgogICAgdGhpcy5sZW5ndGggPSBhLmxlbmd0aDsKCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIEJOLnByb3RvdHlwZS5peG9yID0gZnVuY3Rpb24gaXhvciAobnVtKSB7CiAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgIHJldHVybiB0aGlzLml1eG9yKG51bSk7CiAgfTsKCiAgLy8gWG9yIGBudW1gIHdpdGggYHRoaXNgCiAgQk4ucHJvdG90eXBlLnhvciA9IGZ1bmN0aW9uIHhvciAobnVtKSB7CiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml4b3IobnVtKTsKICAgIHJldHVybiBudW0uY2xvbmUoKS5peG9yKHRoaXMpOwogIH07CgogIEJOLnByb3RvdHlwZS51eG9yID0gZnVuY3Rpb24gdXhvciAobnVtKSB7CiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1eG9yKG51bSk7CiAgICByZXR1cm4gbnVtLmNsb25lKCkuaXV4b3IodGhpcyk7CiAgfTsKCiAgLy8gTm90IGBgdGhpc2BgIHdpdGggYGB3aWR0aGBgIGJpdHdpZHRoCiAgQk4ucHJvdG90eXBlLmlub3RuID0gZnVuY3Rpb24gaW5vdG4gKHdpZHRoKSB7CiAgICBhc3NlcnQodHlwZW9mIHdpZHRoID09PSAnbnVtYmVyJyAmJiB3aWR0aCA+PSAwKTsKCiAgICB2YXIgYnl0ZXNOZWVkZWQgPSBNYXRoLmNlaWwod2lkdGggLyAyNikgfCAwOwogICAgdmFyIGJpdHNMZWZ0ID0gd2lkdGggJSAyNjsKCiAgICAvLyBFeHRlbmQgdGhlIGJ1ZmZlciB3aXRoIGxlYWRpbmcgemVyb2VzCiAgICB0aGlzLl9leHBhbmQoYnl0ZXNOZWVkZWQpOwoKICAgIGlmIChiaXRzTGVmdCA+IDApIHsKICAgICAgYnl0ZXNOZWVkZWQtLTsKICAgIH0KCiAgICAvLyBIYW5kbGUgY29tcGxldGUgd29yZHMKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXNOZWVkZWQ7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldID0gfnRoaXMud29yZHNbaV0gJiAweDNmZmZmZmY7CiAgICB9CgogICAgLy8gSGFuZGxlIHRoZSByZXNpZHVlCiAgICBpZiAoYml0c0xlZnQgPiAwKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSB+dGhpcy53b3Jkc1tpXSAmICgweDNmZmZmZmYgPj4gKDI2IC0gYml0c0xlZnQpKTsKICAgIH0KCiAgICAvLyBBbmQgcmVtb3ZlIGxlYWRpbmcgemVyb2VzCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIEJOLnByb3RvdHlwZS5ub3RuID0gZnVuY3Rpb24gbm90biAod2lkdGgpIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaW5vdG4od2lkdGgpOwogIH07CgogIC8vIFNldCBgYml0YCBvZiBgdGhpc2AKICBCTi5wcm90b3R5cGUuc2V0biA9IGZ1bmN0aW9uIHNldG4gKGJpdCwgdmFsKSB7CiAgICBhc3NlcnQodHlwZW9mIGJpdCA9PT0gJ251bWJlcicgJiYgYml0ID49IDApOwoKICAgIHZhciBvZmYgPSAoYml0IC8gMjYpIHwgMDsKICAgIHZhciB3Yml0ID0gYml0ICUgMjY7CgogICAgdGhpcy5fZXhwYW5kKG9mZiArIDEpOwoKICAgIGlmICh2YWwpIHsKICAgICAgdGhpcy53b3Jkc1tvZmZdID0gdGhpcy53b3Jkc1tvZmZdIHwgKDEgPDwgd2JpdCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLndvcmRzW29mZl0gPSB0aGlzLndvcmRzW29mZl0gJiB+KDEgPDwgd2JpdCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICAvLyBBZGQgYG51bWAgdG8gYHRoaXNgIGluLXBsYWNlCiAgQk4ucHJvdG90eXBlLmlhZGQgPSBmdW5jdGlvbiBpYWRkIChudW0pIHsKICAgIHZhciByOwoKICAgIC8vIG5lZ2F0aXZlICsgcG9zaXRpdmUKICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwICYmIG51bS5uZWdhdGl2ZSA9PT0gMCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgciA9IHRoaXMuaXN1YihudW0pOwogICAgICB0aGlzLm5lZ2F0aXZlIF49IDE7CiAgICAgIHJldHVybiB0aGlzLl9ub3JtU2lnbigpOwoKICAgIC8vIHBvc2l0aXZlICsgbmVnYXRpdmUKICAgIH0gZWxzZSBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBudW0ubmVnYXRpdmUgIT09IDApIHsKICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgciA9IHRoaXMuaXN1YihudW0pOwogICAgICBudW0ubmVnYXRpdmUgPSAxOwogICAgICByZXR1cm4gci5fbm9ybVNpZ24oKTsKICAgIH0KCiAgICAvLyBhLmxlbmd0aCA+IGIubGVuZ3RoCiAgICB2YXIgYSwgYjsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHsKICAgICAgYSA9IHRoaXM7CiAgICAgIGIgPSBudW07CiAgICB9IGVsc2UgewogICAgICBhID0gbnVtOwogICAgICBiID0gdGhpczsKICAgIH0KCiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgIHIgPSAoYS53b3Jkc1tpXSB8IDApICsgKGIud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICB0aGlzLndvcmRzW2ldID0gciAmIDB4M2ZmZmZmZjsKICAgICAgY2FycnkgPSByID4+PiAyNjsKICAgIH0KICAgIGZvciAoOyBjYXJyeSAhPT0gMCAmJiBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICByID0gKGEud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICB0aGlzLndvcmRzW2ldID0gciAmIDB4M2ZmZmZmZjsKICAgICAgY2FycnkgPSByID4+PiAyNjsKICAgIH0KCiAgICB0aGlzLmxlbmd0aCA9IGEubGVuZ3RoOwogICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGhdID0gY2Fycnk7CiAgICAgIHRoaXMubGVuZ3RoKys7CiAgICAvLyBDb3B5IHRoZSByZXN0IG9mIHRoZSB3b3JkcwogICAgfSBlbHNlIGlmIChhICE9PSB0aGlzKSB7CiAgICAgIGZvciAoOyBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gPSBhLndvcmRzW2ldOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgLy8gQWRkIGBudW1gIHRvIGB0aGlzYAogIEJOLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQgKG51bSkgewogICAgdmFyIHJlczsKICAgIGlmIChudW0ubmVnYXRpdmUgIT09IDAgJiYgdGhpcy5uZWdhdGl2ZSA9PT0gMCkgewogICAgICBudW0ubmVnYXRpdmUgPSAwOwogICAgICByZXMgPSB0aGlzLnN1YihudW0pOwogICAgICBudW0ubmVnYXRpdmUgXj0gMTsKICAgICAgcmV0dXJuIHJlczsKICAgIH0gZWxzZSBpZiAobnVtLm5lZ2F0aXZlID09PSAwICYmIHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIHJlcyA9IG51bS5zdWIodGhpcyk7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICByZXR1cm4gcmVzOwogICAgfQoKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaWFkZChudW0pOwoKICAgIHJldHVybiBudW0uY2xvbmUoKS5pYWRkKHRoaXMpOwogIH07CgogIC8vIFN1YnRyYWN0IGBudW1gIGZyb20gYHRoaXNgIGluLXBsYWNlCiAgQk4ucHJvdG90eXBlLmlzdWIgPSBmdW5jdGlvbiBpc3ViIChudW0pIHsKICAgIC8vIHRoaXMgLSAoLW51bSkgPSB0aGlzICsgbnVtCiAgICBpZiAobnVtLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIG51bS5uZWdhdGl2ZSA9IDA7CiAgICAgIHZhciByID0gdGhpcy5pYWRkKG51bSk7CiAgICAgIG51bS5uZWdhdGl2ZSA9IDE7CiAgICAgIHJldHVybiByLl9ub3JtU2lnbigpOwoKICAgIC8vIC10aGlzIC0gbnVtID0gLSh0aGlzICsgbnVtKQogICAgfSBlbHNlIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICB0aGlzLmlhZGQobnVtKTsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgIHJldHVybiB0aGlzLl9ub3JtU2lnbigpOwogICAgfQoKICAgIC8vIEF0IHRoaXMgcG9pbnQgYm90aCBudW1iZXJzIGFyZSBwb3NpdGl2ZQogICAgdmFyIGNtcCA9IHRoaXMuY21wKG51bSk7CgogICAgLy8gT3B0aW1pemF0aW9uIC0gemVyb2lmeQogICAgaWYgKGNtcCA9PT0gMCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICB0aGlzLndvcmRzWzBdID0gMDsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgLy8gYSA+IGIKICAgIHZhciBhLCBiOwogICAgaWYgKGNtcCA+IDApIHsKICAgICAgYSA9IHRoaXM7CiAgICAgIGIgPSBudW07CiAgICB9IGVsc2UgewogICAgICBhID0gbnVtOwogICAgICBiID0gdGhpczsKICAgIH0KCiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgIHIgPSAoYS53b3Jkc1tpXSB8IDApIC0gKGIud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICBjYXJyeSA9IHIgPj4gMjY7CiAgICAgIHRoaXMud29yZHNbaV0gPSByICYgMHgzZmZmZmZmOwogICAgfQogICAgZm9yICg7IGNhcnJ5ICE9PSAwICYmIGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgIHIgPSAoYS53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgIGNhcnJ5ID0gciA+PiAyNjsKICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICB9CgogICAgLy8gQ29weSByZXN0IG9mIHRoZSB3b3JkcwogICAgaWYgKGNhcnJ5ID09PSAwICYmIGkgPCBhLmxlbmd0aCAmJiBhICE9PSB0aGlzKSB7CiAgICAgIGZvciAoOyBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gPSBhLndvcmRzW2ldOwogICAgICB9CiAgICB9CgogICAgdGhpcy5sZW5ndGggPSBNYXRoLm1heCh0aGlzLmxlbmd0aCwgaSk7CgogICAgaWYgKGEgIT09IHRoaXMpIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICAvLyBTdWJ0cmFjdCBgbnVtYCBmcm9tIGB0aGlzYAogIEJOLnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbiBzdWIgKG51bSkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pc3ViKG51bSk7CiAgfTsKCiAgZnVuY3Rpb24gc21hbGxNdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgIG91dC5uZWdhdGl2ZSA9IG51bS5uZWdhdGl2ZSBeIHNlbGYubmVnYXRpdmU7CiAgICB2YXIgbGVuID0gKHNlbGYubGVuZ3RoICsgbnVtLmxlbmd0aCkgfCAwOwogICAgb3V0Lmxlbmd0aCA9IGxlbjsKICAgIGxlbiA9IChsZW4gLSAxKSB8IDA7CgogICAgLy8gUGVlbCBvbmUgaXRlcmF0aW9uIChjb21waWxlciBjYW4ndCBkbyBpdCwgYmVjYXVzZSBvZiBjb2RlIGNvbXBsZXhpdHkpCiAgICB2YXIgYSA9IHNlbGYud29yZHNbMF0gfCAwOwogICAgdmFyIGIgPSBudW0ud29yZHNbMF0gfCAwOwogICAgdmFyIHIgPSBhICogYjsKCiAgICB2YXIgbG8gPSByICYgMHgzZmZmZmZmOwogICAgdmFyIGNhcnJ5ID0gKHIgLyAweDQwMDAwMDApIHwgMDsKICAgIG91dC53b3Jkc1swXSA9IGxvOwoKICAgIGZvciAodmFyIGsgPSAxOyBrIDwgbGVuOyBrKyspIHsKICAgICAgLy8gU3VtIGFsbCB3b3JkcyB3aXRoIHRoZSBzYW1lIGBpICsgaiA9IGtgIGFuZCBhY2N1bXVsYXRlIGBuY2FycnlgLAogICAgICAvLyBub3RlIHRoYXQgbmNhcnJ5IGNvdWxkIGJlID49IDB4M2ZmZmZmZgogICAgICB2YXIgbmNhcnJ5ID0gY2FycnkgPj4+IDI2OwogICAgICB2YXIgcndvcmQgPSBjYXJyeSAmIDB4M2ZmZmZmZjsKICAgICAgdmFyIG1heEogPSBNYXRoLm1pbihrLCBudW0ubGVuZ3RoIC0gMSk7CiAgICAgIGZvciAodmFyIGogPSBNYXRoLm1heCgwLCBrIC0gc2VsZi5sZW5ndGggKyAxKTsgaiA8PSBtYXhKOyBqKyspIHsKICAgICAgICB2YXIgaSA9IChrIC0gaikgfCAwOwogICAgICAgIGEgPSBzZWxmLndvcmRzW2ldIHwgMDsKICAgICAgICBiID0gbnVtLndvcmRzW2pdIHwgMDsKICAgICAgICByID0gYSAqIGIgKyByd29yZDsKICAgICAgICBuY2FycnkgKz0gKHIgLyAweDQwMDAwMDApIHwgMDsKICAgICAgICByd29yZCA9IHIgJiAweDNmZmZmZmY7CiAgICAgIH0KICAgICAgb3V0LndvcmRzW2tdID0gcndvcmQgfCAwOwogICAgICBjYXJyeSA9IG5jYXJyeSB8IDA7CiAgICB9CiAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgb3V0LndvcmRzW2tdID0gY2FycnkgfCAwOwogICAgfSBlbHNlIHsKICAgICAgb3V0Lmxlbmd0aC0tOwogICAgfQoKICAgIHJldHVybiBvdXQuc3RyaXAoKTsKICB9CgogIC8vIFRPRE8oaW5kdXRueSk6IGl0IG1heSBiZSByZWFzb25hYmxlIHRvIG9taXQgaXQgZm9yIHVzZXJzIHdobyBkb24ndCBuZWVkCiAgLy8gdG8gd29yayB3aXRoIDI1Ni1iaXQgbnVtYmVycywgb3RoZXJ3aXNlIGl0IGdpdmVzIDIwJSBpbXByb3ZlbWVudCBmb3IgMjU2LWJpdAogIC8vIG11bHRpcGxpY2F0aW9uIChsaWtlIGVsbGlwdGljIHNlY3AyNTZrMSkuCiAgdmFyIGNvbWIxME11bFRvID0gZnVuY3Rpb24gY29tYjEwTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICB2YXIgYSA9IHNlbGYud29yZHM7CiAgICB2YXIgYiA9IG51bS53b3JkczsKICAgIHZhciBvID0gb3V0LndvcmRzOwogICAgdmFyIGMgPSAwOwogICAgdmFyIGxvOwogICAgdmFyIG1pZDsKICAgIHZhciBoaTsKICAgIHZhciBhMCA9IGFbMF0gfCAwOwogICAgdmFyIGFsMCA9IGEwICYgMHgxZmZmOwogICAgdmFyIGFoMCA9IGEwID4+PiAxMzsKICAgIHZhciBhMSA9IGFbMV0gfCAwOwogICAgdmFyIGFsMSA9IGExICYgMHgxZmZmOwogICAgdmFyIGFoMSA9IGExID4+PiAxMzsKICAgIHZhciBhMiA9IGFbMl0gfCAwOwogICAgdmFyIGFsMiA9IGEyICYgMHgxZmZmOwogICAgdmFyIGFoMiA9IGEyID4+PiAxMzsKICAgIHZhciBhMyA9IGFbM10gfCAwOwogICAgdmFyIGFsMyA9IGEzICYgMHgxZmZmOwogICAgdmFyIGFoMyA9IGEzID4+PiAxMzsKICAgIHZhciBhNCA9IGFbNF0gfCAwOwogICAgdmFyIGFsNCA9IGE0ICYgMHgxZmZmOwogICAgdmFyIGFoNCA9IGE0ID4+PiAxMzsKICAgIHZhciBhNSA9IGFbNV0gfCAwOwogICAgdmFyIGFsNSA9IGE1ICYgMHgxZmZmOwogICAgdmFyIGFoNSA9IGE1ID4+PiAxMzsKICAgIHZhciBhNiA9IGFbNl0gfCAwOwogICAgdmFyIGFsNiA9IGE2ICYgMHgxZmZmOwogICAgdmFyIGFoNiA9IGE2ID4+PiAxMzsKICAgIHZhciBhNyA9IGFbN10gfCAwOwogICAgdmFyIGFsNyA9IGE3ICYgMHgxZmZmOwogICAgdmFyIGFoNyA9IGE3ID4+PiAxMzsKICAgIHZhciBhOCA9IGFbOF0gfCAwOwogICAgdmFyIGFsOCA9IGE4ICYgMHgxZmZmOwogICAgdmFyIGFoOCA9IGE4ID4+PiAxMzsKICAgIHZhciBhOSA9IGFbOV0gfCAwOwogICAgdmFyIGFsOSA9IGE5ICYgMHgxZmZmOwogICAgdmFyIGFoOSA9IGE5ID4+PiAxMzsKICAgIHZhciBiMCA9IGJbMF0gfCAwOwogICAgdmFyIGJsMCA9IGIwICYgMHgxZmZmOwogICAgdmFyIGJoMCA9IGIwID4+PiAxMzsKICAgIHZhciBiMSA9IGJbMV0gfCAwOwogICAgdmFyIGJsMSA9IGIxICYgMHgxZmZmOwogICAgdmFyIGJoMSA9IGIxID4+PiAxMzsKICAgIHZhciBiMiA9IGJbMl0gfCAwOwogICAgdmFyIGJsMiA9IGIyICYgMHgxZmZmOwogICAgdmFyIGJoMiA9IGIyID4+PiAxMzsKICAgIHZhciBiMyA9IGJbM10gfCAwOwogICAgdmFyIGJsMyA9IGIzICYgMHgxZmZmOwogICAgdmFyIGJoMyA9IGIzID4+PiAxMzsKICAgIHZhciBiNCA9IGJbNF0gfCAwOwogICAgdmFyIGJsNCA9IGI0ICYgMHgxZmZmOwogICAgdmFyIGJoNCA9IGI0ID4+PiAxMzsKICAgIHZhciBiNSA9IGJbNV0gfCAwOwogICAgdmFyIGJsNSA9IGI1ICYgMHgxZmZmOwogICAgdmFyIGJoNSA9IGI1ID4+PiAxMzsKICAgIHZhciBiNiA9IGJbNl0gfCAwOwogICAgdmFyIGJsNiA9IGI2ICYgMHgxZmZmOwogICAgdmFyIGJoNiA9IGI2ID4+PiAxMzsKICAgIHZhciBiNyA9IGJbN10gfCAwOwogICAgdmFyIGJsNyA9IGI3ICYgMHgxZmZmOwogICAgdmFyIGJoNyA9IGI3ID4+PiAxMzsKICAgIHZhciBiOCA9IGJbOF0gfCAwOwogICAgdmFyIGJsOCA9IGI4ICYgMHgxZmZmOwogICAgdmFyIGJoOCA9IGI4ID4+PiAxMzsKICAgIHZhciBiOSA9IGJbOV0gfCAwOwogICAgdmFyIGJsOSA9IGI5ICYgMHgxZmZmOwogICAgdmFyIGJoOSA9IGI5ID4+PiAxMzsKCiAgICBvdXQubmVnYXRpdmUgPSBzZWxmLm5lZ2F0aXZlIF4gbnVtLm5lZ2F0aXZlOwogICAgb3V0Lmxlbmd0aCA9IDE5OwogICAgLyogayA9IDAgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsMCwgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDAsIGJoMCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMCwgYmwwKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoMCwgYmgwKTsKICAgIHZhciB3MCA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzAgPj4+IDI2KTsKICAgIHcwICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxICovCiAgICBsbyA9IE1hdGguaW11bChhbDEsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWwxLCBiaDApOwogICAgbWlkICs9IE1hdGguaW11bChhaDEsIGJsMCk7CiAgICBoaSA9IE1hdGguaW11bChhaDEsIGJoMCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwwLCBibDEpOwogICAgbWlkICs9IE1hdGguaW11bChhbDAsIGJoMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMCwgYmwxKTsKICAgIGhpICs9IE1hdGguaW11bChhaDAsIGJoMSk7CiAgICB2YXIgdzEgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcxID4+PiAyNik7CiAgICB3MSAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMiAqLwogICAgbG8gPSBNYXRoLmltdWwoYWwyLCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsMiwgYmgwKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgyLCBibDApOwogICAgaGkgPSBNYXRoLmltdWwoYWgyLCBiaDApOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMSwgYmwxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwxLCBiaDEpOwogICAgbWlkICs9IE1hdGguaW11bChhaDEsIGJsMSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgxLCBiaDEpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMCwgYmwyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwwLCBiaDIpOwogICAgbWlkICs9IE1hdGguaW11bChhaDAsIGJsMik7CiAgICBoaSArPSBNYXRoLmltdWwoYWgwLCBiaDIpOwogICAgdmFyIHcyID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MiA+Pj4gMjYpOwogICAgdzIgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDMgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsMywgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDMsIGJoMCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMywgYmwwKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoMywgYmgwKTsKICAgIGxvICs9IE1hdGguaW11bChhbDIsIGJsMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMiwgYmgxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgyLCBibDEpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMiwgYmgxKTsKICAgIGxvICs9IE1hdGguaW11bChhbDEsIGJsMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMSwgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDIpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMSwgYmgyKTsKICAgIGxvICs9IE1hdGguaW11bChhbDAsIGJsMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMCwgYmgzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgwLCBibDMpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMCwgYmgzKTsKICAgIHZhciB3MyA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzMgPj4+IDI2KTsKICAgIHczICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSA0ICovCiAgICBsbyA9IE1hdGguaW11bChhbDQsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw0LCBiaDApOwogICAgbWlkICs9IE1hdGguaW11bChhaDQsIGJsMCk7CiAgICBoaSA9IE1hdGguaW11bChhaDQsIGJoMCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwzLCBibDEpOwogICAgbWlkICs9IE1hdGguaW11bChhbDMsIGJoMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMywgYmwxKTsKICAgIGhpICs9IE1hdGguaW11bChhaDMsIGJoMSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwyLCBibDIpOwogICAgbWlkICs9IE1hdGguaW11bChhbDIsIGJoMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMiwgYmwyKTsKICAgIGhpICs9IE1hdGguaW11bChhaDIsIGJoMik7CiAgICBsbyArPSBNYXRoLmltdWwoYWwxLCBibDMpOwogICAgbWlkICs9IE1hdGguaW11bChhbDEsIGJoMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMSwgYmwzKTsKICAgIGhpICs9IE1hdGguaW11bChhaDEsIGJoMyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwwLCBibDQpOwogICAgbWlkICs9IE1hdGguaW11bChhbDAsIGJoNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMCwgYmw0KTsKICAgIGhpICs9IE1hdGguaW11bChhaDAsIGJoNCk7CiAgICB2YXIgdzQgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHc0ID4+PiAyNik7CiAgICB3NCAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gNSAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw1LCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsNSwgYmgwKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg1LCBibDApOwogICAgaGkgPSBNYXRoLmltdWwoYWg1LCBiaDApOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNCwgYmwxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw0LCBiaDEpOwogICAgbWlkICs9IE1hdGguaW11bChhaDQsIGJsMSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg0LCBiaDEpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMywgYmwyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwzLCBiaDIpOwogICAgbWlkICs9IE1hdGguaW11bChhaDMsIGJsMik7CiAgICBoaSArPSBNYXRoLmltdWwoYWgzLCBiaDIpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMiwgYmwzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwyLCBiaDMpOwogICAgbWlkICs9IE1hdGguaW11bChhaDIsIGJsMyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgyLCBiaDMpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMSwgYmw0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwxLCBiaDQpOwogICAgbWlkICs9IE1hdGguaW11bChhaDEsIGJsNCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgxLCBiaDQpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMCwgYmw1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwwLCBiaDUpOwogICAgbWlkICs9IE1hdGguaW11bChhaDAsIGJsNSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgwLCBiaDUpOwogICAgdmFyIHc1ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3NSA+Pj4gMjYpOwogICAgdzUgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDYgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsNiwgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDYsIGJoMCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNiwgYmwwKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoNiwgYmgwKTsKICAgIGxvICs9IE1hdGguaW11bChhbDUsIGJsMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNSwgYmgxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg1LCBibDEpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNSwgYmgxKTsKICAgIGxvICs9IE1hdGguaW11bChhbDQsIGJsMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNCwgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDIpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNCwgYmgyKTsKICAgIGxvICs9IE1hdGguaW11bChhbDMsIGJsMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMywgYmgzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgzLCBibDMpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMywgYmgzKTsKICAgIGxvICs9IE1hdGguaW11bChhbDIsIGJsNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMiwgYmg0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgyLCBibDQpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMiwgYmg0KTsKICAgIGxvICs9IE1hdGguaW11bChhbDEsIGJsNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMSwgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDUpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMSwgYmg1KTsKICAgIGxvICs9IE1hdGguaW11bChhbDAsIGJsNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMCwgYmg2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgwLCBibDYpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMCwgYmg2KTsKICAgIHZhciB3NiA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzYgPj4+IDI2KTsKICAgIHc2ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSA3ICovCiAgICBsbyA9IE1hdGguaW11bChhbDcsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw3LCBiaDApOwogICAgbWlkICs9IE1hdGguaW11bChhaDcsIGJsMCk7CiAgICBoaSA9IE1hdGguaW11bChhaDcsIGJoMCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw2LCBibDEpOwogICAgbWlkICs9IE1hdGguaW11bChhbDYsIGJoMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNiwgYmwxKTsKICAgIGhpICs9IE1hdGguaW11bChhaDYsIGJoMSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw1LCBibDIpOwogICAgbWlkICs9IE1hdGguaW11bChhbDUsIGJoMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNSwgYmwyKTsKICAgIGhpICs9IE1hdGguaW11bChhaDUsIGJoMik7CiAgICBsbyArPSBNYXRoLmltdWwoYWw0LCBibDMpOwogICAgbWlkICs9IE1hdGguaW11bChhbDQsIGJoMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNCwgYmwzKTsKICAgIGhpICs9IE1hdGguaW11bChhaDQsIGJoMyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwzLCBibDQpOwogICAgbWlkICs9IE1hdGguaW11bChhbDMsIGJoNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMywgYmw0KTsKICAgIGhpICs9IE1hdGguaW11bChhaDMsIGJoNCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwyLCBibDUpOwogICAgbWlkICs9IE1hdGguaW11bChhbDIsIGJoNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMiwgYmw1KTsKICAgIGhpICs9IE1hdGguaW11bChhaDIsIGJoNSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwxLCBibDYpOwogICAgbWlkICs9IE1hdGguaW11bChhbDEsIGJoNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMSwgYmw2KTsKICAgIGhpICs9IE1hdGguaW11bChhaDEsIGJoNik7CiAgICBsbyArPSBNYXRoLmltdWwoYWwwLCBibDcpOwogICAgbWlkICs9IE1hdGguaW11bChhbDAsIGJoNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMCwgYmw3KTsKICAgIGhpICs9IE1hdGguaW11bChhaDAsIGJoNyk7CiAgICB2YXIgdzcgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHc3ID4+PiAyNik7CiAgICB3NyAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gOCAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw4LCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOCwgYmgwKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg4LCBibDApOwogICAgaGkgPSBNYXRoLmltdWwoYWg4LCBiaDApOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNywgYmwxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw3LCBiaDEpOwogICAgbWlkICs9IE1hdGguaW11bChhaDcsIGJsMSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg3LCBiaDEpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNiwgYmwyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw2LCBiaDIpOwogICAgbWlkICs9IE1hdGguaW11bChhaDYsIGJsMik7CiAgICBoaSArPSBNYXRoLmltdWwoYWg2LCBiaDIpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNSwgYmwzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw1LCBiaDMpOwogICAgbWlkICs9IE1hdGguaW11bChhaDUsIGJsMyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg1LCBiaDMpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNCwgYmw0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw0LCBiaDQpOwogICAgbWlkICs9IE1hdGguaW11bChhaDQsIGJsNCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg0LCBiaDQpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMywgYmw1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwzLCBiaDUpOwogICAgbWlkICs9IE1hdGguaW11bChhaDMsIGJsNSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgzLCBiaDUpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMiwgYmw2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwyLCBiaDYpOwogICAgbWlkICs9IE1hdGguaW11bChhaDIsIGJsNik7CiAgICBoaSArPSBNYXRoLmltdWwoYWgyLCBiaDYpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMSwgYmw3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwxLCBiaDcpOwogICAgbWlkICs9IE1hdGguaW11bChhaDEsIGJsNyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgxLCBiaDcpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMCwgYmw4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwwLCBiaDgpOwogICAgbWlkICs9IE1hdGguaW11bChhaDAsIGJsOCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgwLCBiaDgpOwogICAgdmFyIHc4ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3OCA+Pj4gMjYpOwogICAgdzggJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDkgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOSwgYmwwKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgwKTsKICAgIGxvICs9IE1hdGguaW11bChhbDgsIGJsMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsOCwgYmgxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg4LCBibDEpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoOCwgYmgxKTsKICAgIGxvICs9IE1hdGguaW11bChhbDcsIGJsMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNywgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDIpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNywgYmgyKTsKICAgIGxvICs9IE1hdGguaW11bChhbDYsIGJsMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNiwgYmgzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg2LCBibDMpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNiwgYmgzKTsKICAgIGxvICs9IE1hdGguaW11bChhbDUsIGJsNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNSwgYmg0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg1LCBibDQpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNSwgYmg0KTsKICAgIGxvICs9IE1hdGguaW11bChhbDQsIGJsNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNCwgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDUpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNCwgYmg1KTsKICAgIGxvICs9IE1hdGguaW11bChhbDMsIGJsNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMywgYmg2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgzLCBibDYpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMywgYmg2KTsKICAgIGxvICs9IE1hdGguaW11bChhbDIsIGJsNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMiwgYmg3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgyLCBibDcpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMiwgYmg3KTsKICAgIGxvICs9IE1hdGguaW11bChhbDEsIGJsOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMSwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDgpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMSwgYmg4KTsKICAgIGxvICs9IE1hdGguaW11bChhbDAsIGJsOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMCwgYmg5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgwLCBibDkpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMCwgYmg5KTsKICAgIHZhciB3OSA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzkgPj4+IDI2KTsKICAgIHc5ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxMCAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDEpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmgxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg5LCBibDEpOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDEpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsOCwgYmwyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw4LCBiaDIpOwogICAgbWlkICs9IE1hdGguaW11bChhaDgsIGJsMik7CiAgICBoaSArPSBNYXRoLmltdWwoYWg4LCBiaDIpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNywgYmwzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw3LCBiaDMpOwogICAgbWlkICs9IE1hdGguaW11bChhaDcsIGJsMyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg3LCBiaDMpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNiwgYmw0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw2LCBiaDQpOwogICAgbWlkICs9IE1hdGguaW11bChhaDYsIGJsNCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg2LCBiaDQpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNSwgYmw1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw1LCBiaDUpOwogICAgbWlkICs9IE1hdGguaW11bChhaDUsIGJsNSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg1LCBiaDUpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNCwgYmw2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw0LCBiaDYpOwogICAgbWlkICs9IE1hdGguaW11bChhaDQsIGJsNik7CiAgICBoaSArPSBNYXRoLmltdWwoYWg0LCBiaDYpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMywgYmw3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwzLCBiaDcpOwogICAgbWlkICs9IE1hdGguaW11bChhaDMsIGJsNyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgzLCBiaDcpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMiwgYmw4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwyLCBiaDgpOwogICAgbWlkICs9IE1hdGguaW11bChhaDIsIGJsOCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgyLCBiaDgpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMSwgYmw5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwxLCBiaDkpOwogICAgbWlkICs9IE1hdGguaW11bChhaDEsIGJsOSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgxLCBiaDkpOwogICAgdmFyIHcxMCA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzEwID4+PiAyNik7CiAgICB3MTAgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDExICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMik7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDIpOwogICAgbWlkICs9IE1hdGguaW11bChhaDksIGJsMik7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMik7CiAgICBsbyArPSBNYXRoLmltdWwoYWw4LCBibDMpOwogICAgbWlkICs9IE1hdGguaW11bChhbDgsIGJoMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOCwgYmwzKTsKICAgIGhpICs9IE1hdGguaW11bChhaDgsIGJoMyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw3LCBibDQpOwogICAgbWlkICs9IE1hdGguaW11bChhbDcsIGJoNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNywgYmw0KTsKICAgIGhpICs9IE1hdGguaW11bChhaDcsIGJoNCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw2LCBibDUpOwogICAgbWlkICs9IE1hdGguaW11bChhbDYsIGJoNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNiwgYmw1KTsKICAgIGhpICs9IE1hdGguaW11bChhaDYsIGJoNSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw1LCBibDYpOwogICAgbWlkICs9IE1hdGguaW11bChhbDUsIGJoNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNSwgYmw2KTsKICAgIGhpICs9IE1hdGguaW11bChhaDUsIGJoNik7CiAgICBsbyArPSBNYXRoLmltdWwoYWw0LCBibDcpOwogICAgbWlkICs9IE1hdGguaW11bChhbDQsIGJoNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNCwgYmw3KTsKICAgIGhpICs9IE1hdGguaW11bChhaDQsIGJoNyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwzLCBibDgpOwogICAgbWlkICs9IE1hdGguaW11bChhbDMsIGJoOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMywgYmw4KTsKICAgIGhpICs9IE1hdGguaW11bChhaDMsIGJoOCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwyLCBibDkpOwogICAgbWlkICs9IE1hdGguaW11bChhbDIsIGJoOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMiwgYmw5KTsKICAgIGhpICs9IE1hdGguaW11bChhaDIsIGJoOSk7CiAgICB2YXIgdzExID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MTEgPj4+IDI2KTsKICAgIHcxMSAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTIgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmwzKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOSwgYmwzKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgzKTsKICAgIGxvICs9IE1hdGguaW11bChhbDgsIGJsNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsOCwgYmg0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg4LCBibDQpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoOCwgYmg0KTsKICAgIGxvICs9IE1hdGguaW11bChhbDcsIGJsNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNywgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDUpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNywgYmg1KTsKICAgIGxvICs9IE1hdGguaW11bChhbDYsIGJsNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNiwgYmg2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg2LCBibDYpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNiwgYmg2KTsKICAgIGxvICs9IE1hdGguaW11bChhbDUsIGJsNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNSwgYmg3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg1LCBibDcpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNSwgYmg3KTsKICAgIGxvICs9IE1hdGguaW11bChhbDQsIGJsOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNCwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDgpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNCwgYmg4KTsKICAgIGxvICs9IE1hdGguaW11bChhbDMsIGJsOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMywgYmg5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgzLCBibDkpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMywgYmg5KTsKICAgIHZhciB3MTIgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcxMiA+Pj4gMjYpOwogICAgdzEyICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxMyAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDQpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg5LCBibDQpOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDQpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsOCwgYmw1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw4LCBiaDUpOwogICAgbWlkICs9IE1hdGguaW11bChhaDgsIGJsNSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg4LCBiaDUpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNywgYmw2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw3LCBiaDYpOwogICAgbWlkICs9IE1hdGguaW11bChhaDcsIGJsNik7CiAgICBoaSArPSBNYXRoLmltdWwoYWg3LCBiaDYpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNiwgYmw3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw2LCBiaDcpOwogICAgbWlkICs9IE1hdGguaW11bChhaDYsIGJsNyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg2LCBiaDcpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNSwgYmw4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw1LCBiaDgpOwogICAgbWlkICs9IE1hdGguaW11bChhaDUsIGJsOCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg1LCBiaDgpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNCwgYmw5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw0LCBiaDkpOwogICAgbWlkICs9IE1hdGguaW11bChhaDQsIGJsOSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg0LCBiaDkpOwogICAgdmFyIHcxMyA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzEzID4+PiAyNik7CiAgICB3MTMgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDE0ICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNSk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDUpOwogICAgbWlkICs9IE1hdGguaW11bChhaDksIGJsNSk7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw4LCBibDYpOwogICAgbWlkICs9IE1hdGguaW11bChhbDgsIGJoNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOCwgYmw2KTsKICAgIGhpICs9IE1hdGguaW11bChhaDgsIGJoNik7CiAgICBsbyArPSBNYXRoLmltdWwoYWw3LCBibDcpOwogICAgbWlkICs9IE1hdGguaW11bChhbDcsIGJoNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNywgYmw3KTsKICAgIGhpICs9IE1hdGguaW11bChhaDcsIGJoNyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw2LCBibDgpOwogICAgbWlkICs9IE1hdGguaW11bChhbDYsIGJoOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNiwgYmw4KTsKICAgIGhpICs9IE1hdGguaW11bChhaDYsIGJoOCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw1LCBibDkpOwogICAgbWlkICs9IE1hdGguaW11bChhbDUsIGJoOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNSwgYmw5KTsKICAgIGhpICs9IE1hdGguaW11bChhaDUsIGJoOSk7CiAgICB2YXIgdzE0ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MTQgPj4+IDI2KTsKICAgIHcxNCAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTUgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw2KTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOSwgYmw2KTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg2KTsKICAgIGxvICs9IE1hdGguaW11bChhbDgsIGJsNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsOCwgYmg3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg4LCBibDcpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoOCwgYmg3KTsKICAgIGxvICs9IE1hdGguaW11bChhbDcsIGJsOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNywgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDgpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNywgYmg4KTsKICAgIGxvICs9IE1hdGguaW11bChhbDYsIGJsOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNiwgYmg5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg2LCBibDkpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNiwgYmg5KTsKICAgIHZhciB3MTUgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcxNSA+Pj4gMjYpOwogICAgdzE1ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxNiAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDcpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg5LCBibDcpOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDcpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsOCwgYmw4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw4LCBiaDgpOwogICAgbWlkICs9IE1hdGguaW11bChhaDgsIGJsOCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg4LCBiaDgpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNywgYmw5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw3LCBiaDkpOwogICAgbWlkICs9IE1hdGguaW11bChhaDcsIGJsOSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg3LCBiaDkpOwogICAgdmFyIHcxNiA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzE2ID4+PiAyNik7CiAgICB3MTYgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDE3ICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsOCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDgpOwogICAgbWlkICs9IE1hdGguaW11bChhaDksIGJsOCk7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoOCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw4LCBibDkpOwogICAgbWlkICs9IE1hdGguaW11bChhbDgsIGJoOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOCwgYmw5KTsKICAgIGhpICs9IE1hdGguaW11bChhaDgsIGJoOSk7CiAgICB2YXIgdzE3ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MTcgPj4+IDI2KTsKICAgIHcxNyAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTggKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw5KTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOSwgYmw5KTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg5KTsKICAgIHZhciB3MTggPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcxOCA+Pj4gMjYpOwogICAgdzE4ICY9IDB4M2ZmZmZmZjsKICAgIG9bMF0gPSB3MDsKICAgIG9bMV0gPSB3MTsKICAgIG9bMl0gPSB3MjsKICAgIG9bM10gPSB3MzsKICAgIG9bNF0gPSB3NDsKICAgIG9bNV0gPSB3NTsKICAgIG9bNl0gPSB3NjsKICAgIG9bN10gPSB3NzsKICAgIG9bOF0gPSB3ODsKICAgIG9bOV0gPSB3OTsKICAgIG9bMTBdID0gdzEwOwogICAgb1sxMV0gPSB3MTE7CiAgICBvWzEyXSA9IHcxMjsKICAgIG9bMTNdID0gdzEzOwogICAgb1sxNF0gPSB3MTQ7CiAgICBvWzE1XSA9IHcxNTsKICAgIG9bMTZdID0gdzE2OwogICAgb1sxN10gPSB3MTc7CiAgICBvWzE4XSA9IHcxODsKICAgIGlmIChjICE9PSAwKSB7CiAgICAgIG9bMTldID0gYzsKICAgICAgb3V0Lmxlbmd0aCsrOwogICAgfQogICAgcmV0dXJuIG91dDsKICB9OwoKICAvLyBQb2x5ZmlsbCBjb21iCiAgaWYgKCFNYXRoLmltdWwpIHsKICAgIGNvbWIxME11bFRvID0gc21hbGxNdWxUbzsKICB9CgogIGZ1bmN0aW9uIGJpZ011bFRvIChzZWxmLCBudW0sIG91dCkgewogICAgb3V0Lm5lZ2F0aXZlID0gbnVtLm5lZ2F0aXZlIF4gc2VsZi5uZWdhdGl2ZTsKICAgIG91dC5sZW5ndGggPSBzZWxmLmxlbmd0aCArIG51bS5sZW5ndGg7CgogICAgdmFyIGNhcnJ5ID0gMDsKICAgIHZhciBobmNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb3V0Lmxlbmd0aCAtIDE7IGsrKykgewogICAgICAvLyBTdW0gYWxsIHdvcmRzIHdpdGggdGhlIHNhbWUgYGkgKyBqID0ga2AgYW5kIGFjY3VtdWxhdGUgYG5jYXJyeWAsCiAgICAgIC8vIG5vdGUgdGhhdCBuY2FycnkgY291bGQgYmUgPj0gMHgzZmZmZmZmCiAgICAgIHZhciBuY2FycnkgPSBobmNhcnJ5OwogICAgICBobmNhcnJ5ID0gMDsKICAgICAgdmFyIHJ3b3JkID0gY2FycnkgJiAweDNmZmZmZmY7CiAgICAgIHZhciBtYXhKID0gTWF0aC5taW4oaywgbnVtLmxlbmd0aCAtIDEpOwogICAgICBmb3IgKHZhciBqID0gTWF0aC5tYXgoMCwgayAtIHNlbGYubGVuZ3RoICsgMSk7IGogPD0gbWF4SjsgaisrKSB7CiAgICAgICAgdmFyIGkgPSBrIC0gajsKICAgICAgICB2YXIgYSA9IHNlbGYud29yZHNbaV0gfCAwOwogICAgICAgIHZhciBiID0gbnVtLndvcmRzW2pdIHwgMDsKICAgICAgICB2YXIgciA9IGEgKiBiOwoKICAgICAgICB2YXIgbG8gPSByICYgMHgzZmZmZmZmOwogICAgICAgIG5jYXJyeSA9IChuY2FycnkgKyAoKHIgLyAweDQwMDAwMDApIHwgMCkpIHwgMDsKICAgICAgICBsbyA9IChsbyArIHJ3b3JkKSB8IDA7CiAgICAgICAgcndvcmQgPSBsbyAmIDB4M2ZmZmZmZjsKICAgICAgICBuY2FycnkgPSAobmNhcnJ5ICsgKGxvID4+PiAyNikpIHwgMDsKCiAgICAgICAgaG5jYXJyeSArPSBuY2FycnkgPj4+IDI2OwogICAgICAgIG5jYXJyeSAmPSAweDNmZmZmZmY7CiAgICAgIH0KICAgICAgb3V0LndvcmRzW2tdID0gcndvcmQ7CiAgICAgIGNhcnJ5ID0gbmNhcnJ5OwogICAgICBuY2FycnkgPSBobmNhcnJ5OwogICAgfQogICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgIG91dC53b3Jkc1trXSA9IGNhcnJ5OwogICAgfSBlbHNlIHsKICAgICAgb3V0Lmxlbmd0aC0tOwogICAgfQoKICAgIHJldHVybiBvdXQuc3RyaXAoKTsKICB9CgogIGZ1bmN0aW9uIGp1bWJvTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICB2YXIgZmZ0bSA9IG5ldyBGRlRNKCk7CiAgICByZXR1cm4gZmZ0bS5tdWxwKHNlbGYsIG51bSwgb3V0KTsKICB9CgogIEJOLnByb3RvdHlwZS5tdWxUbyA9IGZ1bmN0aW9uIG11bFRvIChudW0sIG91dCkgewogICAgdmFyIHJlczsKICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aCArIG51bS5sZW5ndGg7CiAgICBpZiAodGhpcy5sZW5ndGggPT09IDEwICYmIG51bS5sZW5ndGggPT09IDEwKSB7CiAgICAgIHJlcyA9IGNvbWIxME11bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgIH0gZWxzZSBpZiAobGVuIDwgNjMpIHsKICAgICAgcmVzID0gc21hbGxNdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgICB9IGVsc2UgaWYgKGxlbiA8IDEwMjQpIHsKICAgICAgcmVzID0gYmlnTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgfSBlbHNlIHsKICAgICAgcmVzID0ganVtYm9NdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgICB9CgogICAgcmV0dXJuIHJlczsKICB9OwoKICAvLyBDb29sZXktVHVrZXkgYWxnb3JpdGhtIGZvciBGRlQKICAvLyBzbGlnaHRseSByZXZpc2l0ZWQgdG8gcmVseSBvbiBsb29waW5nIGluc3RlYWQgb2YgcmVjdXJzaW9uCgogIGZ1bmN0aW9uIEZGVE0gKHgsIHkpIHsKICAgIHRoaXMueCA9IHg7CiAgICB0aGlzLnkgPSB5OwogIH0KCiAgRkZUTS5wcm90b3R5cGUubWFrZVJCVCA9IGZ1bmN0aW9uIG1ha2VSQlQgKE4pIHsKICAgIHZhciB0ID0gbmV3IEFycmF5KE4pOwogICAgdmFyIGwgPSBCTi5wcm90b3R5cGUuX2NvdW50Qml0cyhOKSAtIDE7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE47IGkrKykgewogICAgICB0W2ldID0gdGhpcy5yZXZCaW4oaSwgbCwgTik7CiAgICB9CgogICAgcmV0dXJuIHQ7CiAgfTsKCiAgLy8gUmV0dXJucyBiaW5hcnktcmV2ZXJzZWQgcmVwcmVzZW50YXRpb24gb2YgYHhgCiAgRkZUTS5wcm90b3R5cGUucmV2QmluID0gZnVuY3Rpb24gcmV2QmluICh4LCBsLCBOKSB7CiAgICBpZiAoeCA9PT0gMCB8fCB4ID09PSBOIC0gMSkgcmV0dXJuIHg7CgogICAgdmFyIHJiID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7CiAgICAgIHJiIHw9ICh4ICYgMSkgPDwgKGwgLSBpIC0gMSk7CiAgICAgIHggPj49IDE7CiAgICB9CgogICAgcmV0dXJuIHJiOwogIH07CgogIC8vIFBlcmZvcm1zICJ0d2VlZGxpbmciIHBoYXNlLCB0aGVyZWZvcmUgJ2VtdWxhdGluZycKICAvLyBiZWhhdmlvdXIgb2YgdGhlIHJlY3Vyc2l2ZSBhbGdvcml0aG0KICBGRlRNLnByb3RvdHlwZS5wZXJtdXRlID0gZnVuY3Rpb24gcGVybXV0ZSAocmJ0LCByd3MsIGl3cywgcnR3cywgaXR3cywgTikgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgcnR3c1tpXSA9IHJ3c1tyYnRbaV1dOwogICAgICBpdHdzW2ldID0gaXdzW3JidFtpXV07CiAgICB9CiAgfTsKCiAgRkZUTS5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtIChyd3MsIGl3cywgcnR3cywgaXR3cywgTiwgcmJ0KSB7CiAgICB0aGlzLnBlcm11dGUocmJ0LCByd3MsIGl3cywgcnR3cywgaXR3cywgTik7CgogICAgZm9yICh2YXIgcyA9IDE7IHMgPCBOOyBzIDw8PSAxKSB7CiAgICAgIHZhciBsID0gcyA8PCAxOwoKICAgICAgdmFyIHJ0d2RmID0gTWF0aC5jb3MoMiAqIE1hdGguUEkgLyBsKTsKICAgICAgdmFyIGl0d2RmID0gTWF0aC5zaW4oMiAqIE1hdGguUEkgLyBsKTsKCiAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgTjsgcCArPSBsKSB7CiAgICAgICAgdmFyIHJ0d2RmXyA9IHJ0d2RmOwogICAgICAgIHZhciBpdHdkZl8gPSBpdHdkZjsKCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKICAgICAgICAgIHZhciByZSA9IHJ0d3NbcCArIGpdOwogICAgICAgICAgdmFyIGllID0gaXR3c1twICsgal07CgogICAgICAgICAgdmFyIHJvID0gcnR3c1twICsgaiArIHNdOwogICAgICAgICAgdmFyIGlvID0gaXR3c1twICsgaiArIHNdOwoKICAgICAgICAgIHZhciByeCA9IHJ0d2RmXyAqIHJvIC0gaXR3ZGZfICogaW87CgogICAgICAgICAgaW8gPSBydHdkZl8gKiBpbyArIGl0d2RmXyAqIHJvOwogICAgICAgICAgcm8gPSByeDsKCiAgICAgICAgICBydHdzW3AgKyBqXSA9IHJlICsgcm87CiAgICAgICAgICBpdHdzW3AgKyBqXSA9IGllICsgaW87CgogICAgICAgICAgcnR3c1twICsgaiArIHNdID0gcmUgLSBybzsKICAgICAgICAgIGl0d3NbcCArIGogKyBzXSA9IGllIC0gaW87CgogICAgICAgICAgLyoganNoaW50IG1heGRlcHRoIDogZmFsc2UgKi8KICAgICAgICAgIGlmIChqICE9PSBsKSB7CiAgICAgICAgICAgIHJ4ID0gcnR3ZGYgKiBydHdkZl8gLSBpdHdkZiAqIGl0d2RmXzsKCiAgICAgICAgICAgIGl0d2RmXyA9IHJ0d2RmICogaXR3ZGZfICsgaXR3ZGYgKiBydHdkZl87CiAgICAgICAgICAgIHJ0d2RmXyA9IHJ4OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIEZGVE0ucHJvdG90eXBlLmd1ZXNzTGVuMTNiID0gZnVuY3Rpb24gZ3Vlc3NMZW4xM2IgKG4sIG0pIHsKICAgIHZhciBOID0gTWF0aC5tYXgobSwgbikgfCAxOwogICAgdmFyIG9kZCA9IE4gJiAxOwogICAgdmFyIGkgPSAwOwogICAgZm9yIChOID0gTiAvIDIgfCAwOyBOOyBOID0gTiA+Pj4gMSkgewogICAgICBpKys7CiAgICB9CgogICAgcmV0dXJuIDEgPDwgaSArIDEgKyBvZGQ7CiAgfTsKCiAgRkZUTS5wcm90b3R5cGUuY29uanVnYXRlID0gZnVuY3Rpb24gY29uanVnYXRlIChyd3MsIGl3cywgTikgewogICAgaWYgKE4gPD0gMSkgcmV0dXJuOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTiAvIDI7IGkrKykgewogICAgICB2YXIgdCA9IHJ3c1tpXTsKCiAgICAgIHJ3c1tpXSA9IHJ3c1tOIC0gaSAtIDFdOwogICAgICByd3NbTiAtIGkgLSAxXSA9IHQ7CgogICAgICB0ID0gaXdzW2ldOwoKICAgICAgaXdzW2ldID0gLWl3c1tOIC0gaSAtIDFdOwogICAgICBpd3NbTiAtIGkgLSAxXSA9IC10OwogICAgfQogIH07CgogIEZGVE0ucHJvdG90eXBlLm5vcm1hbGl6ZTEzYiA9IGZ1bmN0aW9uIG5vcm1hbGl6ZTEzYiAod3MsIE4pIHsKICAgIHZhciBjYXJyeSA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE4gLyAyOyBpKyspIHsKICAgICAgdmFyIHcgPSBNYXRoLnJvdW5kKHdzWzIgKiBpICsgMV0gLyBOKSAqIDB4MjAwMCArCiAgICAgICAgTWF0aC5yb3VuZCh3c1syICogaV0gLyBOKSArCiAgICAgICAgY2Fycnk7CgogICAgICB3c1tpXSA9IHcgJiAweDNmZmZmZmY7CgogICAgICBpZiAodyA8IDB4NDAwMDAwMCkgewogICAgICAgIGNhcnJ5ID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYXJyeSA9IHcgLyAweDQwMDAwMDAgfCAwOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHdzOwogIH07CgogIEZGVE0ucHJvdG90eXBlLmNvbnZlcnQxM2IgPSBmdW5jdGlvbiBjb252ZXJ0MTNiICh3cywgbGVuLCByd3MsIE4pIHsKICAgIHZhciBjYXJyeSA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIGNhcnJ5ID0gY2FycnkgKyAod3NbaV0gfCAwKTsKCiAgICAgIHJ3c1syICogaV0gPSBjYXJyeSAmIDB4MWZmZjsgY2FycnkgPSBjYXJyeSA+Pj4gMTM7CiAgICAgIHJ3c1syICogaSArIDFdID0gY2FycnkgJiAweDFmZmY7IGNhcnJ5ID0gY2FycnkgPj4+IDEzOwogICAgfQoKICAgIC8vIFBhZCB3aXRoIHplcm9lcwogICAgZm9yIChpID0gMiAqIGxlbjsgaSA8IE47ICsraSkgewogICAgICByd3NbaV0gPSAwOwogICAgfQoKICAgIGFzc2VydChjYXJyeSA9PT0gMCk7CiAgICBhc3NlcnQoKGNhcnJ5ICYgfjB4MWZmZikgPT09IDApOwogIH07CgogIEZGVE0ucHJvdG90eXBlLnN0dWIgPSBmdW5jdGlvbiBzdHViIChOKSB7CiAgICB2YXIgcGggPSBuZXcgQXJyYXkoTik7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE47IGkrKykgewogICAgICBwaFtpXSA9IDA7CiAgICB9CgogICAgcmV0dXJuIHBoOwogIH07CgogIEZGVE0ucHJvdG90eXBlLm11bHAgPSBmdW5jdGlvbiBtdWxwICh4LCB5LCBvdXQpIHsKICAgIHZhciBOID0gMiAqIHRoaXMuZ3Vlc3NMZW4xM2IoeC5sZW5ndGgsIHkubGVuZ3RoKTsKCiAgICB2YXIgcmJ0ID0gdGhpcy5tYWtlUkJUKE4pOwoKICAgIHZhciBfID0gdGhpcy5zdHViKE4pOwoKICAgIHZhciByd3MgPSBuZXcgQXJyYXkoTik7CiAgICB2YXIgcndzdCA9IG5ldyBBcnJheShOKTsKICAgIHZhciBpd3N0ID0gbmV3IEFycmF5KE4pOwoKICAgIHZhciBucndzID0gbmV3IEFycmF5KE4pOwogICAgdmFyIG5yd3N0ID0gbmV3IEFycmF5KE4pOwogICAgdmFyIG5pd3N0ID0gbmV3IEFycmF5KE4pOwoKICAgIHZhciBybXdzID0gb3V0LndvcmRzOwogICAgcm13cy5sZW5ndGggPSBOOwoKICAgIHRoaXMuY29udmVydDEzYih4LndvcmRzLCB4Lmxlbmd0aCwgcndzLCBOKTsKICAgIHRoaXMuY29udmVydDEzYih5LndvcmRzLCB5Lmxlbmd0aCwgbnJ3cywgTik7CgogICAgdGhpcy50cmFuc2Zvcm0ocndzLCBfLCByd3N0LCBpd3N0LCBOLCByYnQpOwogICAgdGhpcy50cmFuc2Zvcm0obnJ3cywgXywgbnJ3c3QsIG5pd3N0LCBOLCByYnQpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgIHZhciByeCA9IHJ3c3RbaV0gKiBucndzdFtpXSAtIGl3c3RbaV0gKiBuaXdzdFtpXTsKICAgICAgaXdzdFtpXSA9IHJ3c3RbaV0gKiBuaXdzdFtpXSArIGl3c3RbaV0gKiBucndzdFtpXTsKICAgICAgcndzdFtpXSA9IHJ4OwogICAgfQoKICAgIHRoaXMuY29uanVnYXRlKHJ3c3QsIGl3c3QsIE4pOwogICAgdGhpcy50cmFuc2Zvcm0ocndzdCwgaXdzdCwgcm13cywgXywgTiwgcmJ0KTsKICAgIHRoaXMuY29uanVnYXRlKHJtd3MsIF8sIE4pOwogICAgdGhpcy5ub3JtYWxpemUxM2Iocm13cywgTik7CgogICAgb3V0Lm5lZ2F0aXZlID0geC5uZWdhdGl2ZSBeIHkubmVnYXRpdmU7CiAgICBvdXQubGVuZ3RoID0geC5sZW5ndGggKyB5Lmxlbmd0aDsKICAgIHJldHVybiBvdXQuc3RyaXAoKTsKICB9OwoKICAvLyBNdWx0aXBseSBgdGhpc2AgYnkgYG51bWAKICBCTi5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsIChudW0pIHsKICAgIHZhciBvdXQgPSBuZXcgQk4obnVsbCk7CiAgICBvdXQud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoKTsKICAgIHJldHVybiB0aGlzLm11bFRvKG51bSwgb3V0KTsKICB9OwoKICAvLyBNdWx0aXBseSBlbXBsb3lpbmcgRkZUCiAgQk4ucHJvdG90eXBlLm11bGYgPSBmdW5jdGlvbiBtdWxmIChudW0pIHsKICAgIHZhciBvdXQgPSBuZXcgQk4obnVsbCk7CiAgICBvdXQud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoKTsKICAgIHJldHVybiBqdW1ib011bFRvKHRoaXMsIG51bSwgb3V0KTsKICB9OwoKICAvLyBJbi1wbGFjZSBNdWx0aXBsaWNhdGlvbgogIEJOLnByb3RvdHlwZS5pbXVsID0gZnVuY3Rpb24gaW11bCAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLm11bFRvKG51bSwgdGhpcyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmltdWxuID0gZnVuY3Rpb24gaW11bG4gKG51bSkgewogICAgYXNzZXJ0KHR5cGVvZiBudW0gPT09ICdudW1iZXInKTsKICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwoKICAgIC8vIENhcnJ5CiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciB3ID0gKHRoaXMud29yZHNbaV0gfCAwKSAqIG51bTsKICAgICAgdmFyIGxvID0gKHcgJiAweDNmZmZmZmYpICsgKGNhcnJ5ICYgMHgzZmZmZmZmKTsKICAgICAgY2FycnkgPj49IDI2OwogICAgICBjYXJyeSArPSAodyAvIDB4NDAwMDAwMCkgfCAwOwogICAgICAvLyBOT1RFOiBsbyBpcyAyN2JpdCBtYXhpbXVtCiAgICAgIGNhcnJ5ICs9IGxvID4+PiAyNjsKICAgICAgdGhpcy53b3Jkc1tpXSA9IGxvICYgMHgzZmZmZmZmOwogICAgfQoKICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICB0aGlzLndvcmRzW2ldID0gY2Fycnk7CiAgICAgIHRoaXMubGVuZ3RoKys7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgQk4ucHJvdG90eXBlLm11bG4gPSBmdW5jdGlvbiBtdWxuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaW11bG4obnVtKTsKICB9OwoKICAvLyBgdGhpc2AgKiBgdGhpc2AKICBCTi5wcm90b3R5cGUuc3FyID0gZnVuY3Rpb24gc3FyICgpIHsKICAgIHJldHVybiB0aGlzLm11bCh0aGlzKTsKICB9OwoKICAvLyBgdGhpc2AgKiBgdGhpc2AgaW4tcGxhY2UKICBCTi5wcm90b3R5cGUuaXNxciA9IGZ1bmN0aW9uIGlzcXIgKCkgewogICAgcmV0dXJuIHRoaXMuaW11bCh0aGlzLmNsb25lKCkpOwogIH07CgogIC8vIE1hdGgucG93KGB0aGlzYCwgYG51bWApCiAgQk4ucHJvdG90eXBlLnBvdyA9IGZ1bmN0aW9uIHBvdyAobnVtKSB7CiAgICB2YXIgdyA9IHRvQml0QXJyYXkobnVtKTsKICAgIGlmICh3Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG5ldyBCTigxKTsKCiAgICAvLyBTa2lwIGxlYWRpbmcgemVyb2VzCiAgICB2YXIgcmVzID0gdGhpczsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdy5sZW5ndGg7IGkrKywgcmVzID0gcmVzLnNxcigpKSB7CiAgICAgIGlmICh3W2ldICE9PSAwKSBicmVhazsKICAgIH0KCiAgICBpZiAoKytpIDwgdy5sZW5ndGgpIHsKICAgICAgZm9yICh2YXIgcSA9IHJlcy5zcXIoKTsgaSA8IHcubGVuZ3RoOyBpKyssIHEgPSBxLnNxcigpKSB7CiAgICAgICAgaWYgKHdbaV0gPT09IDApIGNvbnRpbnVlOwoKICAgICAgICByZXMgPSByZXMubXVsKHEpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHJlczsKICB9OwoKICAvLyBTaGlmdC1sZWZ0IGluLXBsYWNlCiAgQk4ucHJvdG90eXBlLml1c2hsbiA9IGZ1bmN0aW9uIGl1c2hsbiAoYml0cykgewogICAgYXNzZXJ0KHR5cGVvZiBiaXRzID09PSAnbnVtYmVyJyAmJiBiaXRzID49IDApOwogICAgdmFyIHIgPSBiaXRzICUgMjY7CiAgICB2YXIgcyA9IChiaXRzIC0gcikgLyAyNjsKICAgIHZhciBjYXJyeU1hc2sgPSAoMHgzZmZmZmZmID4+PiAoMjYgLSByKSkgPDwgKDI2IC0gcik7CiAgICB2YXIgaTsKCiAgICBpZiAociAhPT0gMCkgewogICAgICB2YXIgY2FycnkgPSAwOwoKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbmV3Q2FycnkgPSB0aGlzLndvcmRzW2ldICYgY2FycnlNYXNrOwogICAgICAgIHZhciBjID0gKCh0aGlzLndvcmRzW2ldIHwgMCkgLSBuZXdDYXJyeSkgPDwgcjsKICAgICAgICB0aGlzLndvcmRzW2ldID0gYyB8IGNhcnJ5OwogICAgICAgIGNhcnJ5ID0gbmV3Q2FycnkgPj4+ICgyNiAtIHIpOwogICAgICB9CgogICAgICBpZiAoY2FycnkpIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gY2Fycnk7CiAgICAgICAgdGhpcy5sZW5ndGgrKzsKICAgICAgfQogICAgfQoKICAgIGlmIChzICE9PSAwKSB7CiAgICAgIGZvciAoaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB0aGlzLndvcmRzW2kgKyBzXSA9IHRoaXMud29yZHNbaV07CiAgICAgIH0KCiAgICAgIGZvciAoaSA9IDA7IGkgPCBzOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gMDsKICAgICAgfQoKICAgICAgdGhpcy5sZW5ndGggKz0gczsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIEJOLnByb3RvdHlwZS5pc2hsbiA9IGZ1bmN0aW9uIGlzaGxuIChiaXRzKSB7CiAgICAvLyBUT0RPKGluZHV0bnkpOiBpbXBsZW1lbnQgbWUKICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwKTsKICAgIHJldHVybiB0aGlzLml1c2hsbihiaXRzKTsKICB9OwoKICAvLyBTaGlmdC1yaWdodCBpbi1wbGFjZQogIC8vIE5PVEU6IGBoaW50YCBpcyBhIGxvd2VzdCBiaXQgYmVmb3JlIHRyYWlsaW5nIHplcm9lcwogIC8vIE5PVEU6IGlmIGBleHRlbmRlZGAgaXMgcHJlc2VudCAtIGl0IHdpbGwgYmUgZmlsbGVkIHdpdGggZGVzdHJveWVkIGJpdHMKICBCTi5wcm90b3R5cGUuaXVzaHJuID0gZnVuY3Rpb24gaXVzaHJuIChiaXRzLCBoaW50LCBleHRlbmRlZCkgewogICAgYXNzZXJ0KHR5cGVvZiBiaXRzID09PSAnbnVtYmVyJyAmJiBiaXRzID49IDApOwogICAgdmFyIGg7CiAgICBpZiAoaGludCkgewogICAgICBoID0gKGhpbnQgLSAoaGludCAlIDI2KSkgLyAyNjsKICAgIH0gZWxzZSB7CiAgICAgIGggPSAwOwogICAgfQoKICAgIHZhciByID0gYml0cyAlIDI2OwogICAgdmFyIHMgPSBNYXRoLm1pbigoYml0cyAtIHIpIC8gMjYsIHRoaXMubGVuZ3RoKTsKICAgIHZhciBtYXNrID0gMHgzZmZmZmZmIF4gKCgweDNmZmZmZmYgPj4+IHIpIDw8IHIpOwogICAgdmFyIG1hc2tlZFdvcmRzID0gZXh0ZW5kZWQ7CgogICAgaCAtPSBzOwogICAgaCA9IE1hdGgubWF4KDAsIGgpOwoKICAgIC8vIEV4dGVuZGVkIG1vZGUsIGNvcHkgbWFza2VkIHBhcnQKICAgIGlmIChtYXNrZWRXb3JkcykgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHM7IGkrKykgewogICAgICAgIG1hc2tlZFdvcmRzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXTsKICAgICAgfQogICAgICBtYXNrZWRXb3Jkcy5sZW5ndGggPSBzOwogICAgfQoKICAgIGlmIChzID09PSAwKSB7CiAgICAgIC8vIE5vLW9wLCB3ZSBzaG91bGQgbm90IG1vdmUgYW55dGhpbmcgYXQgYWxsCiAgICB9IGVsc2UgaWYgKHRoaXMubGVuZ3RoID4gcykgewogICAgICB0aGlzLmxlbmd0aCAtPSBzOwogICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gPSB0aGlzLndvcmRzW2kgKyBzXTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhpcy53b3Jkc1swXSA9IDA7CiAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgIH0KCiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yIChpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDAgJiYgKGNhcnJ5ICE9PSAwIHx8IGkgPj0gaCk7IGktLSkgewogICAgICB2YXIgd29yZCA9IHRoaXMud29yZHNbaV0gfCAwOwogICAgICB0aGlzLndvcmRzW2ldID0gKGNhcnJ5IDw8ICgyNiAtIHIpKSB8ICh3b3JkID4+PiByKTsKICAgICAgY2FycnkgPSB3b3JkICYgbWFzazsKICAgIH0KCiAgICAvLyBQdXNoIGNhcnJpZWQgYml0cyBhcyBhIG1hc2sKICAgIGlmIChtYXNrZWRXb3JkcyAmJiBjYXJyeSAhPT0gMCkgewogICAgICBtYXNrZWRXb3Jkcy53b3Jkc1ttYXNrZWRXb3Jkcy5sZW5ndGgrK10gPSBjYXJyeTsKICAgIH0KCiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHsKICAgICAgdGhpcy53b3Jkc1swXSA9IDA7CiAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIEJOLnByb3RvdHlwZS5pc2hybiA9IGZ1bmN0aW9uIGlzaHJuIChiaXRzLCBoaW50LCBleHRlbmRlZCkgewogICAgLy8gVE9ETyhpbmR1dG55KTogaW1wbGVtZW50IG1lCiAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCk7CiAgICByZXR1cm4gdGhpcy5pdXNocm4oYml0cywgaGludCwgZXh0ZW5kZWQpOwogIH07CgogIC8vIFNoaWZ0LWxlZnQKICBCTi5wcm90b3R5cGUuc2hsbiA9IGZ1bmN0aW9uIHNobG4gKGJpdHMpIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXNobG4oYml0cyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnVzaGxuID0gZnVuY3Rpb24gdXNobG4gKGJpdHMpIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXVzaGxuKGJpdHMpOwogIH07CgogIC8vIFNoaWZ0LXJpZ2h0CiAgQk4ucHJvdG90eXBlLnNocm4gPSBmdW5jdGlvbiBzaHJuIChiaXRzKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzaHJuKGJpdHMpOwogIH07CgogIEJOLnByb3RvdHlwZS51c2hybiA9IGZ1bmN0aW9uIHVzaHJuIChiaXRzKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLml1c2hybihiaXRzKTsKICB9OwoKICAvLyBUZXN0IGlmIG4gYml0IGlzIHNldAogIEJOLnByb3RvdHlwZS50ZXN0biA9IGZ1bmN0aW9uIHRlc3RuIChiaXQpIHsKICAgIGFzc2VydCh0eXBlb2YgYml0ID09PSAnbnVtYmVyJyAmJiBiaXQgPj0gMCk7CiAgICB2YXIgciA9IGJpdCAlIDI2OwogICAgdmFyIHMgPSAoYml0IC0gcikgLyAyNjsKICAgIHZhciBxID0gMSA8PCByOwoKICAgIC8vIEZhc3QgY2FzZTogYml0IGlzIG11Y2ggaGlnaGVyIHRoYW4gYWxsIGV4aXN0aW5nIHdvcmRzCiAgICBpZiAodGhpcy5sZW5ndGggPD0gcykgcmV0dXJuIGZhbHNlOwoKICAgIC8vIENoZWNrIGJpdCBhbmQgcmV0dXJuCiAgICB2YXIgdyA9IHRoaXMud29yZHNbc107CgogICAgcmV0dXJuICEhKHcgJiBxKTsKICB9OwoKICAvLyBSZXR1cm4gb25seSBsb3dlcnMgYml0cyBvZiBudW1iZXIgKGluLXBsYWNlKQogIEJOLnByb3RvdHlwZS5pbWFza24gPSBmdW5jdGlvbiBpbWFza24gKGJpdHMpIHsKICAgIGFzc2VydCh0eXBlb2YgYml0cyA9PT0gJ251bWJlcicgJiYgYml0cyA+PSAwKTsKICAgIHZhciByID0gYml0cyAlIDI2OwogICAgdmFyIHMgPSAoYml0cyAtIHIpIC8gMjY7CgogICAgYXNzZXJ0KHRoaXMubmVnYXRpdmUgPT09IDAsICdpbWFza24gd29ya3Mgb25seSB3aXRoIHBvc2l0aXZlIG51bWJlcnMnKTsKCiAgICBpZiAociAhPT0gMCkgewogICAgICBzKys7CiAgICB9CiAgICB0aGlzLmxlbmd0aCA9IE1hdGgubWluKHMsIHRoaXMubGVuZ3RoKTsKCiAgICBpZiAociAhPT0gMCkgewogICAgICB2YXIgbWFzayA9IDB4M2ZmZmZmZiBeICgoMHgzZmZmZmZmID4+PiByKSA8PCByKTsKICAgICAgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCAtIDFdICY9IG1hc2s7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICAvLyBSZXR1cm4gb25seSBsb3dlcnMgYml0cyBvZiBudW1iZXIKICBCTi5wcm90b3R5cGUubWFza24gPSBmdW5jdGlvbiBtYXNrbiAoYml0cykgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbWFza24oYml0cyk7CiAgfTsKCiAgLy8gQWRkIHBsYWluIG51bWJlciBgbnVtYCB0byBgdGhpc2AKICBCTi5wcm90b3R5cGUuaWFkZG4gPSBmdW5jdGlvbiBpYWRkbiAobnVtKSB7CiAgICBhc3NlcnQodHlwZW9mIG51bSA9PT0gJ251bWJlcicpOwogICAgYXNzZXJ0KG51bSA8IDB4NDAwMDAwMCk7CiAgICBpZiAobnVtIDwgMCkgcmV0dXJuIHRoaXMuaXN1Ym4oLW51bSk7CgogICAgLy8gUG9zc2libGUgc2lnbiBjaGFuZ2UKICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSAmJiAodGhpcy53b3Jkc1swXSB8IDApIDwgbnVtKSB7CiAgICAgICAgdGhpcy53b3Jkc1swXSA9IG51bSAtICh0aGlzLndvcmRzWzBdIHwgMCk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICB0aGlzLmlzdWJuKG51bSk7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvLyBBZGQgd2l0aG91dCBjaGVja3MKICAgIHJldHVybiB0aGlzLl9pYWRkbihudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5faWFkZG4gPSBmdW5jdGlvbiBfaWFkZG4gKG51bSkgewogICAgdGhpcy53b3Jkc1swXSArPSBudW07CgogICAgLy8gQ2FycnkKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGggJiYgdGhpcy53b3Jkc1tpXSA+PSAweDQwMDAwMDA7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldIC09IDB4NDAwMDAwMDsKICAgICAgaWYgKGkgPT09IHRoaXMubGVuZ3RoIC0gMSkgewogICAgICAgIHRoaXMud29yZHNbaSArIDFdID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLndvcmRzW2kgKyAxXSsrOwogICAgICB9CiAgICB9CiAgICB0aGlzLmxlbmd0aCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoLCBpICsgMSk7CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgLy8gU3VidHJhY3QgcGxhaW4gbnVtYmVyIGBudW1gIGZyb20gYHRoaXNgCiAgQk4ucHJvdG90eXBlLmlzdWJuID0gZnVuY3Rpb24gaXN1Ym4gKG51bSkgewogICAgYXNzZXJ0KHR5cGVvZiBudW0gPT09ICdudW1iZXInKTsKICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwogICAgaWYgKG51bSA8IDApIHJldHVybiB0aGlzLmlhZGRuKC1udW0pOwoKICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICB0aGlzLmlhZGRuKG51bSk7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICB0aGlzLndvcmRzWzBdIC09IG51bTsKCiAgICBpZiAodGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy53b3Jkc1swXSA8IDApIHsKICAgICAgdGhpcy53b3Jkc1swXSA9IC10aGlzLndvcmRzWzBdOwogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIENhcnJ5CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGggJiYgdGhpcy53b3Jkc1tpXSA8IDA7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gKz0gMHg0MDAwMDAwOwogICAgICAgIHRoaXMud29yZHNbaSArIDFdIC09IDE7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIEJOLnByb3RvdHlwZS5hZGRuID0gZnVuY3Rpb24gYWRkbiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlhZGRuKG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnN1Ym4gPSBmdW5jdGlvbiBzdWJuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXN1Ym4obnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaWFicyA9IGZ1bmN0aW9uIGlhYnMgKCkgewogICAgdGhpcy5uZWdhdGl2ZSA9IDA7CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmFicyA9IGZ1bmN0aW9uIGFicyAoKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlhYnMoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuX2lzaGxuc3VibXVsID0gZnVuY3Rpb24gX2lzaGxuc3VibXVsIChudW0sIG11bCwgc2hpZnQpIHsKICAgIHZhciBsZW4gPSBudW0ubGVuZ3RoICsgc2hpZnQ7CiAgICB2YXIgaTsKCiAgICB0aGlzLl9leHBhbmQobGVuKTsKCiAgICB2YXIgdzsKICAgIHZhciBjYXJyeSA9IDA7CiAgICBmb3IgKGkgPSAwOyBpIDwgbnVtLmxlbmd0aDsgaSsrKSB7CiAgICAgIHcgPSAodGhpcy53b3Jkc1tpICsgc2hpZnRdIHwgMCkgKyBjYXJyeTsKICAgICAgdmFyIHJpZ2h0ID0gKG51bS53b3Jkc1tpXSB8IDApICogbXVsOwogICAgICB3IC09IHJpZ2h0ICYgMHgzZmZmZmZmOwogICAgICBjYXJyeSA9ICh3ID4+IDI2KSAtICgocmlnaHQgLyAweDQwMDAwMDApIHwgMCk7CiAgICAgIHRoaXMud29yZHNbaSArIHNoaWZ0XSA9IHcgJiAweDNmZmZmZmY7CiAgICB9CiAgICBmb3IgKDsgaSA8IHRoaXMubGVuZ3RoIC0gc2hpZnQ7IGkrKykgewogICAgICB3ID0gKHRoaXMud29yZHNbaSArIHNoaWZ0XSB8IDApICsgY2Fycnk7CiAgICAgIGNhcnJ5ID0gdyA+PiAyNjsKICAgICAgdGhpcy53b3Jkc1tpICsgc2hpZnRdID0gdyAmIDB4M2ZmZmZmZjsKICAgIH0KCiAgICBpZiAoY2FycnkgPT09IDApIHJldHVybiB0aGlzLnN0cmlwKCk7CgogICAgLy8gU3VidHJhY3Rpb24gb3ZlcmZsb3cKICAgIGFzc2VydChjYXJyeSA9PT0gLTEpOwogICAgY2FycnkgPSAwOwogICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgdyA9IC0odGhpcy53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgIGNhcnJ5ID0gdyA+PiAyNjsKICAgICAgdGhpcy53b3Jkc1tpXSA9IHcgJiAweDNmZmZmZmY7CiAgICB9CiAgICB0aGlzLm5lZ2F0aXZlID0gMTsKCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIEJOLnByb3RvdHlwZS5fd29yZERpdiA9IGZ1bmN0aW9uIF93b3JkRGl2IChudW0sIG1vZGUpIHsKICAgIHZhciBzaGlmdCA9IHRoaXMubGVuZ3RoIC0gbnVtLmxlbmd0aDsKCiAgICB2YXIgYSA9IHRoaXMuY2xvbmUoKTsKICAgIHZhciBiID0gbnVtOwoKICAgIC8vIE5vcm1hbGl6ZQogICAgdmFyIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICB2YXIgYmhpQml0cyA9IHRoaXMuX2NvdW50Qml0cyhiaGkpOwogICAgc2hpZnQgPSAyNiAtIGJoaUJpdHM7CiAgICBpZiAoc2hpZnQgIT09IDApIHsKICAgICAgYiA9IGIudXNobG4oc2hpZnQpOwogICAgICBhLml1c2hsbihzaGlmdCk7CiAgICAgIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICB9CgogICAgLy8gSW5pdGlhbGl6ZSBxdW90aWVudAogICAgdmFyIG0gPSBhLmxlbmd0aCAtIGIubGVuZ3RoOwogICAgdmFyIHE7CgogICAgaWYgKG1vZGUgIT09ICdtb2QnKSB7CiAgICAgIHEgPSBuZXcgQk4obnVsbCk7CiAgICAgIHEubGVuZ3RoID0gbSArIDE7CiAgICAgIHEud29yZHMgPSBuZXcgQXJyYXkocS5sZW5ndGgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHEubGVuZ3RoOyBpKyspIHsKICAgICAgICBxLndvcmRzW2ldID0gMDsKICAgICAgfQogICAgfQoKICAgIHZhciBkaWZmID0gYS5jbG9uZSgpLl9pc2hsbnN1Ym11bChiLCAxLCBtKTsKICAgIGlmIChkaWZmLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgIGEgPSBkaWZmOwogICAgICBpZiAocSkgewogICAgICAgIHEud29yZHNbbV0gPSAxOwogICAgICB9CiAgICB9CgogICAgZm9yICh2YXIgaiA9IG0gLSAxOyBqID49IDA7IGotLSkgewogICAgICB2YXIgcWogPSAoYS53b3Jkc1tiLmxlbmd0aCArIGpdIHwgMCkgKiAweDQwMDAwMDAgKwogICAgICAgIChhLndvcmRzW2IubGVuZ3RoICsgaiAtIDFdIHwgMCk7CgogICAgICAvLyBOT1RFOiAocWogLyBiaGkpIGlzICgweDNmZmZmZmYgKiAweDQwMDAwMDAgKyAweDNmZmZmZmYpIC8gMHgyMDAwMDAwIG1heAogICAgICAvLyAoMHg3ZmZmZmZmKQogICAgICBxaiA9IE1hdGgubWluKChxaiAvIGJoaSkgfCAwLCAweDNmZmZmZmYpOwoKICAgICAgYS5faXNobG5zdWJtdWwoYiwgcWosIGopOwogICAgICB3aGlsZSAoYS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIHFqLS07CiAgICAgICAgYS5uZWdhdGl2ZSA9IDA7CiAgICAgICAgYS5faXNobG5zdWJtdWwoYiwgMSwgaik7CiAgICAgICAgaWYgKCFhLmlzWmVybygpKSB7CiAgICAgICAgICBhLm5lZ2F0aXZlIF49IDE7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChxKSB7CiAgICAgICAgcS53b3Jkc1tqXSA9IHFqOwogICAgICB9CiAgICB9CiAgICBpZiAocSkgewogICAgICBxLnN0cmlwKCk7CiAgICB9CiAgICBhLnN0cmlwKCk7CgogICAgLy8gRGVub3JtYWxpemUKICAgIGlmIChtb2RlICE9PSAnZGl2JyAmJiBzaGlmdCAhPT0gMCkgewogICAgICBhLml1c2hybihzaGlmdCk7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgZGl2OiBxIHx8IG51bGwsCiAgICAgIG1vZDogYQogICAgfTsKICB9OwoKICAvLyBOT1RFOiAxKSBgbW9kZWAgY2FuIGJlIHNldCB0byBgbW9kYCB0byByZXF1ZXN0IG1vZCBvbmx5LAogIC8vICAgICAgIHRvIGBkaXZgIHRvIHJlcXVlc3QgZGl2IG9ubHksIG9yIGJlIGFic2VudCB0bwogIC8vICAgICAgIHJlcXVlc3QgYm90aCBkaXYgJiBtb2QKICAvLyAgICAgICAyKSBgcG9zaXRpdmVgIGlzIHRydWUgaWYgdW5zaWduZWQgbW9kIGlzIHJlcXVlc3RlZAogIEJOLnByb3RvdHlwZS5kaXZtb2QgPSBmdW5jdGlvbiBkaXZtb2QgKG51bSwgbW9kZSwgcG9zaXRpdmUpIHsKICAgIGFzc2VydCghbnVtLmlzWmVybygpKTsKCiAgICBpZiAodGhpcy5pc1plcm8oKSkgewogICAgICByZXR1cm4gewogICAgICAgIGRpdjogbmV3IEJOKDApLAogICAgICAgIG1vZDogbmV3IEJOKDApCiAgICAgIH07CiAgICB9CgogICAgdmFyIGRpdiwgbW9kLCByZXM7CiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiBudW0ubmVnYXRpdmUgPT09IDApIHsKICAgICAgcmVzID0gdGhpcy5uZWcoKS5kaXZtb2QobnVtLCBtb2RlKTsKCiAgICAgIGlmIChtb2RlICE9PSAnbW9kJykgewogICAgICAgIGRpdiA9IHJlcy5kaXYubmVnKCk7CiAgICAgIH0KCiAgICAgIGlmIChtb2RlICE9PSAnZGl2JykgewogICAgICAgIG1vZCA9IHJlcy5tb2QubmVnKCk7CiAgICAgICAgaWYgKHBvc2l0aXZlICYmIG1vZC5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgbW9kLmlhZGQobnVtKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZGl2OiBkaXYsCiAgICAgICAgbW9kOiBtb2QKICAgICAgfTsKICAgIH0KCiAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBudW0ubmVnYXRpdmUgIT09IDApIHsKICAgICAgcmVzID0gdGhpcy5kaXZtb2QobnVtLm5lZygpLCBtb2RlKTsKCiAgICAgIGlmIChtb2RlICE9PSAnbW9kJykgewogICAgICAgIGRpdiA9IHJlcy5kaXYubmVnKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZGl2OiBkaXYsCiAgICAgICAgbW9kOiByZXMubW9kCiAgICAgIH07CiAgICB9CgogICAgaWYgKCh0aGlzLm5lZ2F0aXZlICYgbnVtLm5lZ2F0aXZlKSAhPT0gMCkgewogICAgICByZXMgPSB0aGlzLm5lZygpLmRpdm1vZChudW0ubmVnKCksIG1vZGUpOwoKICAgICAgaWYgKG1vZGUgIT09ICdkaXYnKSB7CiAgICAgICAgbW9kID0gcmVzLm1vZC5uZWcoKTsKICAgICAgICBpZiAocG9zaXRpdmUgJiYgbW9kLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgICBtb2QuaXN1YihudW0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXY6IHJlcy5kaXYsCiAgICAgICAgbW9kOiBtb2QKICAgICAgfTsKICAgIH0KCiAgICAvLyBCb3RoIG51bWJlcnMgYXJlIHBvc2l0aXZlIGF0IHRoaXMgcG9pbnQKCiAgICAvLyBTdHJpcCBib3RoIG51bWJlcnMgdG8gYXBwcm94aW1hdGUgc2hpZnQgdmFsdWUKICAgIGlmIChudW0ubGVuZ3RoID4gdGhpcy5sZW5ndGggfHwgdGhpcy5jbXAobnVtKSA8IDApIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXY6IG5ldyBCTigwKSwKICAgICAgICBtb2Q6IHRoaXMKICAgICAgfTsKICAgIH0KCiAgICAvLyBWZXJ5IHNob3J0IHJlZHVjdGlvbgogICAgaWYgKG51bS5sZW5ndGggPT09IDEpIHsKICAgICAgaWYgKG1vZGUgPT09ICdkaXYnKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogdGhpcy5kaXZuKG51bS53b3Jkc1swXSksCiAgICAgICAgICBtb2Q6IG51bGwKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAobW9kZSA9PT0gJ21vZCcpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGl2OiBudWxsLAogICAgICAgICAgbW9kOiBuZXcgQk4odGhpcy5tb2RuKG51bS53b3Jkc1swXSkpCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXY6IHRoaXMuZGl2bihudW0ud29yZHNbMF0pLAogICAgICAgIG1vZDogbmV3IEJOKHRoaXMubW9kbihudW0ud29yZHNbMF0pKQogICAgICB9OwogICAgfQoKICAgIHJldHVybiB0aGlzLl93b3JkRGl2KG51bSwgbW9kZSk7CiAgfTsKCiAgLy8gRmluZCBgdGhpc2AgLyBgbnVtYAogIEJOLnByb3RvdHlwZS5kaXYgPSBmdW5jdGlvbiBkaXYgKG51bSkgewogICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ2RpdicsIGZhbHNlKS5kaXY7CiAgfTsKCiAgLy8gRmluZCBgdGhpc2AgJSBgbnVtYAogIEJOLnByb3RvdHlwZS5tb2QgPSBmdW5jdGlvbiBtb2QgKG51bSkgewogICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ21vZCcsIGZhbHNlKS5tb2Q7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnVtb2QgPSBmdW5jdGlvbiB1bW9kIChudW0pIHsKICAgIHJldHVybiB0aGlzLmRpdm1vZChudW0sICdtb2QnLCB0cnVlKS5tb2Q7CiAgfTsKCiAgLy8gRmluZCBSb3VuZChgdGhpc2AgLyBgbnVtYCkKICBCTi5wcm90b3R5cGUuZGl2Um91bmQgPSBmdW5jdGlvbiBkaXZSb3VuZCAobnVtKSB7CiAgICB2YXIgZG0gPSB0aGlzLmRpdm1vZChudW0pOwoKICAgIC8vIEZhc3QgY2FzZSAtIGV4YWN0IGRpdmlzaW9uCiAgICBpZiAoZG0ubW9kLmlzWmVybygpKSByZXR1cm4gZG0uZGl2OwoKICAgIHZhciBtb2QgPSBkbS5kaXYubmVnYXRpdmUgIT09IDAgPyBkbS5tb2QuaXN1YihudW0pIDogZG0ubW9kOwoKICAgIHZhciBoYWxmID0gbnVtLnVzaHJuKDEpOwogICAgdmFyIHIyID0gbnVtLmFuZGxuKDEpOwogICAgdmFyIGNtcCA9IG1vZC5jbXAoaGFsZik7CgogICAgLy8gUm91bmQgZG93bgogICAgaWYgKGNtcCA8IDAgfHwgcjIgPT09IDEgJiYgY21wID09PSAwKSByZXR1cm4gZG0uZGl2OwoKICAgIC8vIFJvdW5kIHVwCiAgICByZXR1cm4gZG0uZGl2Lm5lZ2F0aXZlICE9PSAwID8gZG0uZGl2LmlzdWJuKDEpIDogZG0uZGl2LmlhZGRuKDEpOwogIH07CgogIEJOLnByb3RvdHlwZS5tb2RuID0gZnVuY3Rpb24gbW9kbiAobnVtKSB7CiAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZik7CiAgICB2YXIgcCA9ICgxIDw8IDI2KSAlIG51bTsKCiAgICB2YXIgYWNjID0gMDsKICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIGFjYyA9IChwICogYWNjICsgKHRoaXMud29yZHNbaV0gfCAwKSkgJSBudW07CiAgICB9CgogICAgcmV0dXJuIGFjYzsKICB9OwoKICAvLyBJbi1wbGFjZSBkaXZpc2lvbiBieSBudW1iZXIKICBCTi5wcm90b3R5cGUuaWRpdm4gPSBmdW5jdGlvbiBpZGl2biAobnVtKSB7CiAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZik7CgogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIHZhciB3ID0gKHRoaXMud29yZHNbaV0gfCAwKSArIGNhcnJ5ICogMHg0MDAwMDAwOwogICAgICB0aGlzLndvcmRzW2ldID0gKHcgLyBudW0pIHwgMDsKICAgICAgY2FycnkgPSB3ICUgbnVtOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmRpdm4gPSBmdW5jdGlvbiBkaXZuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaWRpdm4obnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUuZWdjZCA9IGZ1bmN0aW9uIGVnY2QgKHApIHsKICAgIGFzc2VydChwLm5lZ2F0aXZlID09PSAwKTsKICAgIGFzc2VydCghcC5pc1plcm8oKSk7CgogICAgdmFyIHggPSB0aGlzOwogICAgdmFyIHkgPSBwLmNsb25lKCk7CgogICAgaWYgKHgubmVnYXRpdmUgIT09IDApIHsKICAgICAgeCA9IHgudW1vZChwKTsKICAgIH0gZWxzZSB7CiAgICAgIHggPSB4LmNsb25lKCk7CiAgICB9CgogICAgLy8gQSAqIHggKyBCICogeSA9IHgKICAgIHZhciBBID0gbmV3IEJOKDEpOwogICAgdmFyIEIgPSBuZXcgQk4oMCk7CgogICAgLy8gQyAqIHggKyBEICogeSA9IHkKICAgIHZhciBDID0gbmV3IEJOKDApOwogICAgdmFyIEQgPSBuZXcgQk4oMSk7CgogICAgdmFyIGcgPSAwOwoKICAgIHdoaWxlICh4LmlzRXZlbigpICYmIHkuaXNFdmVuKCkpIHsKICAgICAgeC5pdXNocm4oMSk7CiAgICAgIHkuaXVzaHJuKDEpOwogICAgICArK2c7CiAgICB9CgogICAgdmFyIHlwID0geS5jbG9uZSgpOwogICAgdmFyIHhwID0geC5jbG9uZSgpOwoKICAgIHdoaWxlICgheC5pc1plcm8oKSkgewogICAgICBmb3IgKHZhciBpID0gMCwgaW0gPSAxOyAoeC53b3Jkc1swXSAmIGltKSA9PT0gMCAmJiBpIDwgMjY7ICsraSwgaW0gPDw9IDEpOwogICAgICBpZiAoaSA+IDApIHsKICAgICAgICB4Lml1c2hybihpKTsKICAgICAgICB3aGlsZSAoaS0tID4gMCkgewogICAgICAgICAgaWYgKEEuaXNPZGQoKSB8fCBCLmlzT2RkKCkpIHsKICAgICAgICAgICAgQS5pYWRkKHlwKTsKICAgICAgICAgICAgQi5pc3ViKHhwKTsKICAgICAgICAgIH0KCiAgICAgICAgICBBLml1c2hybigxKTsKICAgICAgICAgIEIuaXVzaHJuKDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yICh2YXIgaiA9IDAsIGptID0gMTsgKHkud29yZHNbMF0gJiBqbSkgPT09IDAgJiYgaiA8IDI2OyArK2osIGptIDw8PSAxKTsKICAgICAgaWYgKGogPiAwKSB7CiAgICAgICAgeS5pdXNocm4oaik7CiAgICAgICAgd2hpbGUgKGotLSA+IDApIHsKICAgICAgICAgIGlmIChDLmlzT2RkKCkgfHwgRC5pc09kZCgpKSB7CiAgICAgICAgICAgIEMuaWFkZCh5cCk7CiAgICAgICAgICAgIEQuaXN1Yih4cCk7CiAgICAgICAgICB9CgogICAgICAgICAgQy5pdXNocm4oMSk7CiAgICAgICAgICBELml1c2hybigxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh4LmNtcCh5KSA+PSAwKSB7CiAgICAgICAgeC5pc3ViKHkpOwogICAgICAgIEEuaXN1YihDKTsKICAgICAgICBCLmlzdWIoRCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgeS5pc3ViKHgpOwogICAgICAgIEMuaXN1YihBKTsKICAgICAgICBELmlzdWIoQik7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gewogICAgICBhOiBDLAogICAgICBiOiBELAogICAgICBnY2Q6IHkuaXVzaGxuKGcpCiAgICB9OwogIH07CgogIC8vIFRoaXMgaXMgcmVkdWNlZCBpbmNhcm5hdGlvbiBvZiB0aGUgYmluYXJ5IEVFQQogIC8vIGFib3ZlLCBkZXNpZ25hdGVkIHRvIGludmVydCBtZW1iZXJzIG9mIHRoZQogIC8vIF9wcmltZV8gZmllbGRzIEYocCkgYXQgYSBtYXhpbWFsIHNwZWVkCiAgQk4ucHJvdG90eXBlLl9pbnZtcCA9IGZ1bmN0aW9uIF9pbnZtcCAocCkgewogICAgYXNzZXJ0KHAubmVnYXRpdmUgPT09IDApOwogICAgYXNzZXJ0KCFwLmlzWmVybygpKTsKCiAgICB2YXIgYSA9IHRoaXM7CiAgICB2YXIgYiA9IHAuY2xvbmUoKTsKCiAgICBpZiAoYS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICBhID0gYS51bW9kKHApOwogICAgfSBlbHNlIHsKICAgICAgYSA9IGEuY2xvbmUoKTsKICAgIH0KCiAgICB2YXIgeDEgPSBuZXcgQk4oMSk7CiAgICB2YXIgeDIgPSBuZXcgQk4oMCk7CgogICAgdmFyIGRlbHRhID0gYi5jbG9uZSgpOwoKICAgIHdoaWxlIChhLmNtcG4oMSkgPiAwICYmIGIuY21wbigxKSA+IDApIHsKICAgICAgZm9yICh2YXIgaSA9IDAsIGltID0gMTsgKGEud29yZHNbMF0gJiBpbSkgPT09IDAgJiYgaSA8IDI2OyArK2ksIGltIDw8PSAxKTsKICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgYS5pdXNocm4oaSk7CiAgICAgICAgd2hpbGUgKGktLSA+IDApIHsKICAgICAgICAgIGlmICh4MS5pc09kZCgpKSB7CiAgICAgICAgICAgIHgxLmlhZGQoZGVsdGEpOwogICAgICAgICAgfQoKICAgICAgICAgIHgxLml1c2hybigxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGogPSAwLCBqbSA9IDE7IChiLndvcmRzWzBdICYgam0pID09PSAwICYmIGogPCAyNjsgKytqLCBqbSA8PD0gMSk7CiAgICAgIGlmIChqID4gMCkgewogICAgICAgIGIuaXVzaHJuKGopOwogICAgICAgIHdoaWxlIChqLS0gPiAwKSB7CiAgICAgICAgICBpZiAoeDIuaXNPZGQoKSkgewogICAgICAgICAgICB4Mi5pYWRkKGRlbHRhKTsKICAgICAgICAgIH0KCiAgICAgICAgICB4Mi5pdXNocm4oMSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoYS5jbXAoYikgPj0gMCkgewogICAgICAgIGEuaXN1YihiKTsKICAgICAgICB4MS5pc3ViKHgyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBiLmlzdWIoYSk7CiAgICAgICAgeDIuaXN1Yih4MSk7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgcmVzOwogICAgaWYgKGEuY21wbigxKSA9PT0gMCkgewogICAgICByZXMgPSB4MTsKICAgIH0gZWxzZSB7CiAgICAgIHJlcyA9IHgyOwogICAgfQoKICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgcmVzLmlhZGQocCk7CiAgICB9CgogICAgcmV0dXJuIHJlczsKICB9OwoKICBCTi5wcm90b3R5cGUuZ2NkID0gZnVuY3Rpb24gZ2NkIChudW0pIHsKICAgIGlmICh0aGlzLmlzWmVybygpKSByZXR1cm4gbnVtLmFicygpOwogICAgaWYgKG51bS5pc1plcm8oKSkgcmV0dXJuIHRoaXMuYWJzKCk7CgogICAgdmFyIGEgPSB0aGlzLmNsb25lKCk7CiAgICB2YXIgYiA9IG51bS5jbG9uZSgpOwogICAgYS5uZWdhdGl2ZSA9IDA7CiAgICBiLm5lZ2F0aXZlID0gMDsKCiAgICAvLyBSZW1vdmUgY29tbW9uIGZhY3RvciBvZiB0d28KICAgIGZvciAodmFyIHNoaWZ0ID0gMDsgYS5pc0V2ZW4oKSAmJiBiLmlzRXZlbigpOyBzaGlmdCsrKSB7CiAgICAgIGEuaXVzaHJuKDEpOwogICAgICBiLml1c2hybigxKTsKICAgIH0KCiAgICBkbyB7CiAgICAgIHdoaWxlIChhLmlzRXZlbigpKSB7CiAgICAgICAgYS5pdXNocm4oMSk7CiAgICAgIH0KICAgICAgd2hpbGUgKGIuaXNFdmVuKCkpIHsKICAgICAgICBiLml1c2hybigxKTsKICAgICAgfQoKICAgICAgdmFyIHIgPSBhLmNtcChiKTsKICAgICAgaWYgKHIgPCAwKSB7CiAgICAgICAgLy8gU3dhcCBgYWAgYW5kIGBiYCB0byBtYWtlIGBhYCBhbHdheXMgYmlnZ2VyIHRoYW4gYGJgCiAgICAgICAgdmFyIHQgPSBhOwogICAgICAgIGEgPSBiOwogICAgICAgIGIgPSB0OwogICAgICB9IGVsc2UgaWYgKHIgPT09IDAgfHwgYi5jbXBuKDEpID09PSAwKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIGEuaXN1YihiKTsKICAgIH0gd2hpbGUgKHRydWUpOwoKICAgIHJldHVybiBiLml1c2hsbihzaGlmdCk7CiAgfTsKCiAgLy8gSW52ZXJ0IG51bWJlciBpbiB0aGUgZmllbGQgRihudW0pCiAgQk4ucHJvdG90eXBlLmludm0gPSBmdW5jdGlvbiBpbnZtIChudW0pIHsKICAgIHJldHVybiB0aGlzLmVnY2QobnVtKS5hLnVtb2QobnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaXNFdmVuID0gZnVuY3Rpb24gaXNFdmVuICgpIHsKICAgIHJldHVybiAodGhpcy53b3Jkc1swXSAmIDEpID09PSAwOwogIH07CgogIEJOLnByb3RvdHlwZS5pc09kZCA9IGZ1bmN0aW9uIGlzT2RkICgpIHsKICAgIHJldHVybiAodGhpcy53b3Jkc1swXSAmIDEpID09PSAxOwogIH07CgogIC8vIEFuZCBmaXJzdCB3b3JkIGFuZCBudW0KICBCTi5wcm90b3R5cGUuYW5kbG4gPSBmdW5jdGlvbiBhbmRsbiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy53b3Jkc1swXSAmIG51bTsKICB9OwoKICAvLyBJbmNyZW1lbnQgYXQgdGhlIGJpdCBwb3NpdGlvbiBpbi1saW5lCiAgQk4ucHJvdG90eXBlLmJpbmNuID0gZnVuY3Rpb24gYmluY24gKGJpdCkgewogICAgYXNzZXJ0KHR5cGVvZiBiaXQgPT09ICdudW1iZXInKTsKICAgIHZhciByID0gYml0ICUgMjY7CiAgICB2YXIgcyA9IChiaXQgLSByKSAvIDI2OwogICAgdmFyIHEgPSAxIDw8IHI7CgogICAgLy8gRmFzdCBjYXNlOiBiaXQgaXMgbXVjaCBoaWdoZXIgdGhhbiBhbGwgZXhpc3Rpbmcgd29yZHMKICAgIGlmICh0aGlzLmxlbmd0aCA8PSBzKSB7CiAgICAgIHRoaXMuX2V4cGFuZChzICsgMSk7CiAgICAgIHRoaXMud29yZHNbc10gfD0gcTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgLy8gQWRkIGJpdCBhbmQgcHJvcGFnYXRlLCBpZiBuZWVkZWQKICAgIHZhciBjYXJyeSA9IHE7CiAgICBmb3IgKHZhciBpID0gczsgY2FycnkgIT09IDAgJiYgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgdyArPSBjYXJyeTsKICAgICAgY2FycnkgPSB3ID4+PiAyNjsKICAgICAgdyAmPSAweDNmZmZmZmY7CiAgICAgIHRoaXMud29yZHNbaV0gPSB3OwogICAgfQogICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSBjYXJyeTsKICAgICAgdGhpcy5sZW5ndGgrKzsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH07CgogIEJOLnByb3RvdHlwZS5pc1plcm8gPSBmdW5jdGlvbiBpc1plcm8gKCkgewogICAgcmV0dXJuIHRoaXMubGVuZ3RoID09PSAxICYmIHRoaXMud29yZHNbMF0gPT09IDA7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmNtcG4gPSBmdW5jdGlvbiBjbXBuIChudW0pIHsKICAgIHZhciBuZWdhdGl2ZSA9IG51bSA8IDA7CgogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgIW5lZ2F0aXZlKSByZXR1cm4gLTE7CiAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBuZWdhdGl2ZSkgcmV0dXJuIDE7CgogICAgdGhpcy5zdHJpcCgpOwoKICAgIHZhciByZXM7CiAgICBpZiAodGhpcy5sZW5ndGggPiAxKSB7CiAgICAgIHJlcyA9IDE7CiAgICB9IGVsc2UgewogICAgICBpZiAobmVnYXRpdmUpIHsKICAgICAgICBudW0gPSAtbnVtOwogICAgICB9CgogICAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZiwgJ051bWJlciBpcyB0b28gYmlnJyk7CgogICAgICB2YXIgdyA9IHRoaXMud29yZHNbMF0gfCAwOwogICAgICByZXMgPSB3ID09PSBudW0gPyAwIDogdyA8IG51bSA/IC0xIDogMTsKICAgIH0KICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSByZXR1cm4gLXJlcyB8IDA7CiAgICByZXR1cm4gcmVzOwogIH07CgogIC8vIENvbXBhcmUgdHdvIG51bWJlcnMgYW5kIHJldHVybjoKICAvLyAxIC0gaWYgYHRoaXNgID4gYG51bWAKICAvLyAwIC0gaWYgYHRoaXNgID09IGBudW1gCiAgLy8gLTEgLSBpZiBgdGhpc2AgPCBgbnVtYAogIEJOLnByb3RvdHlwZS5jbXAgPSBmdW5jdGlvbiBjbXAgKG51bSkgewogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgbnVtLm5lZ2F0aXZlID09PSAwKSByZXR1cm4gLTE7CiAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBudW0ubmVnYXRpdmUgIT09IDApIHJldHVybiAxOwoKICAgIHZhciByZXMgPSB0aGlzLnVjbXAobnVtKTsKICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSByZXR1cm4gLXJlcyB8IDA7CiAgICByZXR1cm4gcmVzOwogIH07CgogIC8vIFVuc2lnbmVkIGNvbXBhcmlzb24KICBCTi5wcm90b3R5cGUudWNtcCA9IGZ1bmN0aW9uIHVjbXAgKG51bSkgewogICAgLy8gQXQgdGhpcyBwb2ludCBib3RoIG51bWJlcnMgaGF2ZSB0aGUgc2FtZSBzaWduCiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gMTsKICAgIGlmICh0aGlzLmxlbmd0aCA8IG51bS5sZW5ndGgpIHJldHVybiAtMTsKCiAgICB2YXIgcmVzID0gMDsKICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIHZhciBhID0gdGhpcy53b3Jkc1tpXSB8IDA7CiAgICAgIHZhciBiID0gbnVtLndvcmRzW2ldIHwgMDsKCiAgICAgIGlmIChhID09PSBiKSBjb250aW51ZTsKICAgICAgaWYgKGEgPCBiKSB7CiAgICAgICAgcmVzID0gLTE7CiAgICAgIH0gZWxzZSBpZiAoYSA+IGIpIHsKICAgICAgICByZXMgPSAxOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgcmV0dXJuIHJlczsKICB9OwoKICBCTi5wcm90b3R5cGUuZ3RuID0gZnVuY3Rpb24gZ3RuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA9PT0gMTsKICB9OwoKICBCTi5wcm90b3R5cGUuZ3QgPSBmdW5jdGlvbiBndCAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA9PT0gMTsKICB9OwoKICBCTi5wcm90b3R5cGUuZ3RlbiA9IGZ1bmN0aW9uIGd0ZW4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wbihudW0pID49IDA7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmd0ZSA9IGZ1bmN0aW9uIGd0ZSAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA+PSAwOwogIH07CgogIEJOLnByb3RvdHlwZS5sdG4gPSBmdW5jdGlvbiBsdG4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wbihudW0pID09PSAtMTsKICB9OwoKICBCTi5wcm90b3R5cGUubHQgPSBmdW5jdGlvbiBsdCAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA9PT0gLTE7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmx0ZW4gPSBmdW5jdGlvbiBsdGVuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA8PSAwOwogIH07CgogIEJOLnByb3RvdHlwZS5sdGUgPSBmdW5jdGlvbiBsdGUgKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPD0gMDsKICB9OwoKICBCTi5wcm90b3R5cGUuZXFuID0gZnVuY3Rpb24gZXFuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA9PT0gMDsKICB9OwoKICBCTi5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcSAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA9PT0gMDsKICB9OwoKICAvLwogIC8vIEEgcmVkdWNlIGNvbnRleHQsIGNvdWxkIGJlIHVzaW5nIG1vbnRnb21lcnkgb3Igc29tZXRoaW5nIGJldHRlciwgZGVwZW5kaW5nCiAgLy8gb24gdGhlIGBtYCBpdHNlbGYuCiAgLy8KICBCTi5yZWQgPSBmdW5jdGlvbiByZWQgKG51bSkgewogICAgcmV0dXJuIG5ldyBSZWQobnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUudG9SZWQgPSBmdW5jdGlvbiB0b1JlZCAoY3R4KSB7CiAgICBhc3NlcnQoIXRoaXMucmVkLCAnQWxyZWFkeSBhIG51bWJlciBpbiByZWR1Y3Rpb24gY29udGV4dCcpOwogICAgYXNzZXJ0KHRoaXMubmVnYXRpdmUgPT09IDAsICdyZWQgd29ya3Mgb25seSB3aXRoIHBvc2l0aXZlcycpOwogICAgcmV0dXJuIGN0eC5jb252ZXJ0VG8odGhpcykuX2ZvcmNlUmVkKGN0eCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmZyb21SZWQgPSBmdW5jdGlvbiBmcm9tUmVkICgpIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ2Zyb21SZWQgd29ya3Mgb25seSB3aXRoIG51bWJlcnMgaW4gcmVkdWN0aW9uIGNvbnRleHQnKTsKICAgIHJldHVybiB0aGlzLnJlZC5jb252ZXJ0RnJvbSh0aGlzKTsKICB9OwoKICBCTi5wcm90b3R5cGUuX2ZvcmNlUmVkID0gZnVuY3Rpb24gX2ZvcmNlUmVkIChjdHgpIHsKICAgIHRoaXMucmVkID0gY3R4OwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmZvcmNlUmVkID0gZnVuY3Rpb24gZm9yY2VSZWQgKGN0eCkgewogICAgYXNzZXJ0KCF0aGlzLnJlZCwgJ0FscmVhZHkgYSBudW1iZXIgaW4gcmVkdWN0aW9uIGNvbnRleHQnKTsKICAgIHJldHVybiB0aGlzLl9mb3JjZVJlZChjdHgpOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRBZGQgPSBmdW5jdGlvbiByZWRBZGQgKG51bSkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkQWRkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgcmV0dXJuIHRoaXMucmVkLmFkZCh0aGlzLCBudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRJQWRkID0gZnVuY3Rpb24gcmVkSUFkZCAobnVtKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJQWRkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgcmV0dXJuIHRoaXMucmVkLmlhZGQodGhpcywgbnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkU3ViID0gZnVuY3Rpb24gcmVkU3ViIChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZFN1YiB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHJldHVybiB0aGlzLnJlZC5zdWIodGhpcywgbnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkSVN1YiA9IGZ1bmN0aW9uIHJlZElTdWIgKG51bSkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkSVN1YiB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHJldHVybiB0aGlzLnJlZC5pc3ViKHRoaXMsIG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZFNobCA9IGZ1bmN0aW9uIHJlZFNobCAobnVtKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTaGwgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICByZXR1cm4gdGhpcy5yZWQuc2hsKHRoaXMsIG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZE11bCA9IGZ1bmN0aW9uIHJlZE11bCAobnVtKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRNdWwgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICB0aGlzLnJlZC5fdmVyaWZ5Mih0aGlzLCBudW0pOwogICAgcmV0dXJuIHRoaXMucmVkLm11bCh0aGlzLCBudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRJTXVsID0gZnVuY3Rpb24gcmVkSU11bCAobnVtKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRNdWwgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICB0aGlzLnJlZC5fdmVyaWZ5Mih0aGlzLCBudW0pOwogICAgcmV0dXJuIHRoaXMucmVkLmltdWwodGhpcywgbnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkU3FyID0gZnVuY3Rpb24gcmVkU3FyICgpIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZFNxciB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgcmV0dXJuIHRoaXMucmVkLnNxcih0aGlzKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkSVNxciA9IGZ1bmN0aW9uIHJlZElTcXIgKCkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkSVNxciB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgcmV0dXJuIHRoaXMucmVkLmlzcXIodGhpcyk7CiAgfTsKCiAgLy8gU3F1YXJlIHJvb3Qgb3ZlciBwCiAgQk4ucHJvdG90eXBlLnJlZFNxcnQgPSBmdW5jdGlvbiByZWRTcXJ0ICgpIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZFNxcnQgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgIHJldHVybiB0aGlzLnJlZC5zcXJ0KHRoaXMpOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRJbnZtID0gZnVuY3Rpb24gcmVkSW52bSAoKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJbnZtIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICByZXR1cm4gdGhpcy5yZWQuaW52bSh0aGlzKTsKICB9OwoKICAvLyBSZXR1cm4gbmVnYXRpdmUgY2xvbmUgb2YgYHRoaXNgICUgYHJlZCBtb2R1bG9gCiAgQk4ucHJvdG90eXBlLnJlZE5lZyA9IGZ1bmN0aW9uIHJlZE5lZyAoKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWROZWcgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgIHJldHVybiB0aGlzLnJlZC5uZWcodGhpcyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZFBvdyA9IGZ1bmN0aW9uIHJlZFBvdyAobnVtKSB7CiAgICBhc3NlcnQodGhpcy5yZWQgJiYgIW51bS5yZWQsICdyZWRQb3cobm9ybWFsTnVtKScpOwogICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICByZXR1cm4gdGhpcy5yZWQucG93KHRoaXMsIG51bSk7CiAgfTsKCiAgLy8gUHJpbWUgbnVtYmVycyB3aXRoIGVmZmljaWVudCByZWR1Y3Rpb24KICB2YXIgcHJpbWVzID0gewogICAgazI1NjogbnVsbCwKICAgIHAyMjQ6IG51bGwsCiAgICBwMTkyOiBudWxsLAogICAgcDI1NTE5OiBudWxsCiAgfTsKCiAgLy8gUHNldWRvLU1lcnNlbm5lIHByaW1lCiAgZnVuY3Rpb24gTVByaW1lIChuYW1lLCBwKSB7CiAgICAvLyBQID0gMiBeIE4gLSBLCiAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgdGhpcy5wID0gbmV3IEJOKHAsIDE2KTsKICAgIHRoaXMubiA9IHRoaXMucC5iaXRMZW5ndGgoKTsKICAgIHRoaXMuayA9IG5ldyBCTigxKS5pdXNobG4odGhpcy5uKS5pc3ViKHRoaXMucCk7CgogICAgdGhpcy50bXAgPSB0aGlzLl90bXAoKTsKICB9CgogIE1QcmltZS5wcm90b3R5cGUuX3RtcCA9IGZ1bmN0aW9uIF90bXAgKCkgewogICAgdmFyIHRtcCA9IG5ldyBCTihudWxsKTsKICAgIHRtcC53b3JkcyA9IG5ldyBBcnJheShNYXRoLmNlaWwodGhpcy5uIC8gMTMpKTsKICAgIHJldHVybiB0bXA7CiAgfTsKCiAgTVByaW1lLnByb3RvdHlwZS5pcmVkdWNlID0gZnVuY3Rpb24gaXJlZHVjZSAobnVtKSB7CiAgICAvLyBBc3N1bWVzIHRoYXQgYG51bWAgaXMgbGVzcyB0aGFuIGBQXjJgCiAgICAvLyBudW0gPSBISSAqICgyIF4gTiAtIEspICsgSEkgKiBLICsgTE8gPSBISSAqIEsgKyBMTyAobW9kIFApCiAgICB2YXIgciA9IG51bTsKICAgIHZhciBybGVuOwoKICAgIGRvIHsKICAgICAgdGhpcy5zcGxpdChyLCB0aGlzLnRtcCk7CiAgICAgIHIgPSB0aGlzLmltdWxLKHIpOwogICAgICByID0gci5pYWRkKHRoaXMudG1wKTsKICAgICAgcmxlbiA9IHIuYml0TGVuZ3RoKCk7CiAgICB9IHdoaWxlIChybGVuID4gdGhpcy5uKTsKCiAgICB2YXIgY21wID0gcmxlbiA8IHRoaXMubiA/IC0xIDogci51Y21wKHRoaXMucCk7CiAgICBpZiAoY21wID09PSAwKSB7CiAgICAgIHIud29yZHNbMF0gPSAwOwogICAgICByLmxlbmd0aCA9IDE7CiAgICB9IGVsc2UgaWYgKGNtcCA+IDApIHsKICAgICAgci5pc3ViKHRoaXMucCk7CiAgICB9IGVsc2UgewogICAgICByLnN0cmlwKCk7CiAgICB9CgogICAgcmV0dXJuIHI7CiAgfTsKCiAgTVByaW1lLnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uIHNwbGl0IChpbnB1dCwgb3V0KSB7CiAgICBpbnB1dC5pdXNocm4odGhpcy5uLCAwLCBvdXQpOwogIH07CgogIE1QcmltZS5wcm90b3R5cGUuaW11bEsgPSBmdW5jdGlvbiBpbXVsSyAobnVtKSB7CiAgICByZXR1cm4gbnVtLmltdWwodGhpcy5rKTsKICB9OwoKICBmdW5jdGlvbiBLMjU2ICgpIHsKICAgIE1QcmltZS5jYWxsKAogICAgICB0aGlzLAogICAgICAnazI1NicsCiAgICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZSBmZmZmZmMyZicpOwogIH0KICBpbmhlcml0cyhLMjU2LCBNUHJpbWUpOwoKICBLMjU2LnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uIHNwbGl0IChpbnB1dCwgb3V0cHV0KSB7CiAgICAvLyAyNTYgPSA5ICogMjYgKyAyMgogICAgdmFyIG1hc2sgPSAweDNmZmZmZjsKCiAgICB2YXIgb3V0TGVuID0gTWF0aC5taW4oaW5wdXQubGVuZ3RoLCA5KTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3V0TGVuOyBpKyspIHsKICAgICAgb3V0cHV0LndvcmRzW2ldID0gaW5wdXQud29yZHNbaV07CiAgICB9CiAgICBvdXRwdXQubGVuZ3RoID0gb3V0TGVuOwoKICAgIGlmIChpbnB1dC5sZW5ndGggPD0gOSkgewogICAgICBpbnB1dC53b3Jkc1swXSA9IDA7CiAgICAgIGlucHV0Lmxlbmd0aCA9IDE7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBTaGlmdCBieSA5IGxpbWJzCiAgICB2YXIgcHJldiA9IGlucHV0LndvcmRzWzldOwogICAgb3V0cHV0LndvcmRzW291dHB1dC5sZW5ndGgrK10gPSBwcmV2ICYgbWFzazsKCiAgICBmb3IgKGkgPSAxMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBuZXh0ID0gaW5wdXQud29yZHNbaV0gfCAwOwogICAgICBpbnB1dC53b3Jkc1tpIC0gMTBdID0gKChuZXh0ICYgbWFzaykgPDwgNCkgfCAocHJldiA+Pj4gMjIpOwogICAgICBwcmV2ID0gbmV4dDsKICAgIH0KICAgIHByZXYgPj4+PSAyMjsKICAgIGlucHV0LndvcmRzW2kgLSAxMF0gPSBwcmV2OwogICAgaWYgKHByZXYgPT09IDAgJiYgaW5wdXQubGVuZ3RoID4gMTApIHsKICAgICAgaW5wdXQubGVuZ3RoIC09IDEwOwogICAgfSBlbHNlIHsKICAgICAgaW5wdXQubGVuZ3RoIC09IDk7CiAgICB9CiAgfTsKCiAgSzI1Ni5wcm90b3R5cGUuaW11bEsgPSBmdW5jdGlvbiBpbXVsSyAobnVtKSB7CiAgICAvLyBLID0gMHgxMDAwMDAzZDEgPSBbIDB4NDAsIDB4M2QxIF0KICAgIG51bS53b3Jkc1tudW0ubGVuZ3RoXSA9IDA7CiAgICBudW0ud29yZHNbbnVtLmxlbmd0aCArIDFdID0gMDsKICAgIG51bS5sZW5ndGggKz0gMjsKCiAgICAvLyBib3VuZGVkIGF0OiAweDQwICogMHgzZmZmZmZmICsgMHgzZDAgPSAweDEwMDAwMDM5MAogICAgdmFyIGxvID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciB3ID0gbnVtLndvcmRzW2ldIHwgMDsKICAgICAgbG8gKz0gdyAqIDB4M2QxOwogICAgICBudW0ud29yZHNbaV0gPSBsbyAmIDB4M2ZmZmZmZjsKICAgICAgbG8gPSB3ICogMHg0MCArICgobG8gLyAweDQwMDAwMDApIHwgMCk7CiAgICB9CgogICAgLy8gRmFzdCBsZW5ndGggcmVkdWN0aW9uCiAgICBpZiAobnVtLndvcmRzW251bS5sZW5ndGggLSAxXSA9PT0gMCkgewogICAgICBudW0ubGVuZ3RoLS07CiAgICAgIGlmIChudW0ud29yZHNbbnVtLmxlbmd0aCAtIDFdID09PSAwKSB7CiAgICAgICAgbnVtLmxlbmd0aC0tOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbnVtOwogIH07CgogIGZ1bmN0aW9uIFAyMjQgKCkgewogICAgTVByaW1lLmNhbGwoCiAgICAgIHRoaXMsCiAgICAgICdwMjI0JywKICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIDAwMDAwMDAwIDAwMDAwMDAwIDAwMDAwMDAxJyk7CiAgfQogIGluaGVyaXRzKFAyMjQsIE1QcmltZSk7CgogIGZ1bmN0aW9uIFAxOTIgKCkgewogICAgTVByaW1lLmNhbGwoCiAgICAgIHRoaXMsCiAgICAgICdwMTkyJywKICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZmJyk7CiAgfQogIGluaGVyaXRzKFAxOTIsIE1QcmltZSk7CgogIGZ1bmN0aW9uIFAyNTUxOSAoKSB7CiAgICAvLyAyIF4gMjU1IC0gMTkKICAgIE1QcmltZS5jYWxsKAogICAgICB0aGlzLAogICAgICAnMjU1MTknLAogICAgICAnN2ZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZlZCcpOwogIH0KICBpbmhlcml0cyhQMjU1MTksIE1QcmltZSk7CgogIFAyNTUxOS5wcm90b3R5cGUuaW11bEsgPSBmdW5jdGlvbiBpbXVsSyAobnVtKSB7CiAgICAvLyBLID0gMHgxMwogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBoaSA9IChudW0ud29yZHNbaV0gfCAwKSAqIDB4MTMgKyBjYXJyeTsKICAgICAgdmFyIGxvID0gaGkgJiAweDNmZmZmZmY7CiAgICAgIGhpID4+Pj0gMjY7CgogICAgICBudW0ud29yZHNbaV0gPSBsbzsKICAgICAgY2FycnkgPSBoaTsKICAgIH0KICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICBudW0ud29yZHNbbnVtLmxlbmd0aCsrXSA9IGNhcnJ5OwogICAgfQogICAgcmV0dXJuIG51bTsKICB9OwoKICAvLyBFeHBvcnRlZCBtb3N0bHkgZm9yIHRlc3RpbmcgcHVycG9zZXMsIHVzZSBwbGFpbiBuYW1lIGluc3RlYWQKICBCTi5fcHJpbWUgPSBmdW5jdGlvbiBwcmltZSAobmFtZSkgewogICAgLy8gQ2FjaGVkIHZlcnNpb24gb2YgcHJpbWUKICAgIGlmIChwcmltZXNbbmFtZV0pIHJldHVybiBwcmltZXNbbmFtZV07CgogICAgdmFyIHByaW1lOwogICAgaWYgKG5hbWUgPT09ICdrMjU2JykgewogICAgICBwcmltZSA9IG5ldyBLMjU2KCk7CiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdwMjI0JykgewogICAgICBwcmltZSA9IG5ldyBQMjI0KCk7CiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdwMTkyJykgewogICAgICBwcmltZSA9IG5ldyBQMTkyKCk7CiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdwMjU1MTknKSB7CiAgICAgIHByaW1lID0gbmV3IFAyNTUxOSgpOwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHByaW1lICcgKyBuYW1lKTsKICAgIH0KICAgIHByaW1lc1tuYW1lXSA9IHByaW1lOwoKICAgIHJldHVybiBwcmltZTsKICB9OwoKICAvLwogIC8vIEJhc2UgcmVkdWN0aW9uIGVuZ2luZQogIC8vCiAgZnVuY3Rpb24gUmVkIChtKSB7CiAgICBpZiAodHlwZW9mIG0gPT09ICdzdHJpbmcnKSB7CiAgICAgIHZhciBwcmltZSA9IEJOLl9wcmltZShtKTsKICAgICAgdGhpcy5tID0gcHJpbWUucDsKICAgICAgdGhpcy5wcmltZSA9IHByaW1lOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5tID0gbTsKICAgICAgdGhpcy5wcmltZSA9IG51bGw7CiAgICB9CiAgfQoKICBSZWQucHJvdG90eXBlLl92ZXJpZnkxID0gZnVuY3Rpb24gX3ZlcmlmeTEgKGEpIHsKICAgIGFzc2VydChhLm5lZ2F0aXZlID09PSAwLCAncmVkIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZXMnKTsKICAgIGFzc2VydChhLnJlZCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICB9OwoKICBSZWQucHJvdG90eXBlLl92ZXJpZnkyID0gZnVuY3Rpb24gX3ZlcmlmeTIgKGEsIGIpIHsKICAgIGFzc2VydCgoYS5uZWdhdGl2ZSB8IGIubmVnYXRpdmUpID09PSAwLCAncmVkIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZXMnKTsKICAgIGFzc2VydChhLnJlZCAmJiBhLnJlZCA9PT0gYi5yZWQsCiAgICAgICdyZWQgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5pbW9kID0gZnVuY3Rpb24gaW1vZCAoYSkgewogICAgaWYgKHRoaXMucHJpbWUpIHJldHVybiB0aGlzLnByaW1lLmlyZWR1Y2UoYSkuX2ZvcmNlUmVkKHRoaXMpOwogICAgcmV0dXJuIGEudW1vZCh0aGlzLm0pLl9mb3JjZVJlZCh0aGlzKTsKICB9OwoKICBSZWQucHJvdG90eXBlLm5lZyA9IGZ1bmN0aW9uIG5lZyAoYSkgewogICAgaWYgKGEuaXNaZXJvKCkpIHsKICAgICAgcmV0dXJuIGEuY2xvbmUoKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5tLnN1YihhKS5fZm9yY2VSZWQodGhpcyk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQgKGEsIGIpIHsKICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgdmFyIHJlcyA9IGEuYWRkKGIpOwogICAgaWYgKHJlcy5jbXAodGhpcy5tKSA+PSAwKSB7CiAgICAgIHJlcy5pc3ViKHRoaXMubSk7CiAgICB9CiAgICByZXR1cm4gcmVzLl9mb3JjZVJlZCh0aGlzKTsKICB9OwoKICBSZWQucHJvdG90eXBlLmlhZGQgPSBmdW5jdGlvbiBpYWRkIChhLCBiKSB7CiAgICB0aGlzLl92ZXJpZnkyKGEsIGIpOwoKICAgIHZhciByZXMgPSBhLmlhZGQoYik7CiAgICBpZiAocmVzLmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgcmVzLmlzdWIodGhpcy5tKTsKICAgIH0KICAgIHJldHVybiByZXM7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbiBzdWIgKGEsIGIpIHsKICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgdmFyIHJlcyA9IGEuc3ViKGIpOwogICAgaWYgKHJlcy5jbXBuKDApIDwgMCkgewogICAgICByZXMuaWFkZCh0aGlzLm0pOwogICAgfQogICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5pc3ViID0gZnVuY3Rpb24gaXN1YiAoYSwgYikgewogICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICB2YXIgcmVzID0gYS5pc3ViKGIpOwogICAgaWYgKHJlcy5jbXBuKDApIDwgMCkgewogICAgICByZXMuaWFkZCh0aGlzLm0pOwogICAgfQogICAgcmV0dXJuIHJlczsKICB9OwoKICBSZWQucHJvdG90eXBlLnNobCA9IGZ1bmN0aW9uIHNobCAoYSwgbnVtKSB7CiAgICB0aGlzLl92ZXJpZnkxKGEpOwogICAgcmV0dXJuIHRoaXMuaW1vZChhLnVzaGxuKG51bSkpOwogIH07CgogIFJlZC5wcm90b3R5cGUuaW11bCA9IGZ1bmN0aW9uIGltdWwgKGEsIGIpIHsKICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CiAgICByZXR1cm4gdGhpcy5pbW9kKGEuaW11bChiKSk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwgKGEsIGIpIHsKICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CiAgICByZXR1cm4gdGhpcy5pbW9kKGEubXVsKGIpKTsKICB9OwoKICBSZWQucHJvdG90eXBlLmlzcXIgPSBmdW5jdGlvbiBpc3FyIChhKSB7CiAgICByZXR1cm4gdGhpcy5pbXVsKGEsIGEuY2xvbmUoKSk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5zcXIgPSBmdW5jdGlvbiBzcXIgKGEpIHsKICAgIHJldHVybiB0aGlzLm11bChhLCBhKTsKICB9OwoKICBSZWQucHJvdG90eXBlLnNxcnQgPSBmdW5jdGlvbiBzcXJ0IChhKSB7CiAgICBpZiAoYS5pc1plcm8oKSkgcmV0dXJuIGEuY2xvbmUoKTsKCiAgICB2YXIgbW9kMyA9IHRoaXMubS5hbmRsbigzKTsKICAgIGFzc2VydChtb2QzICUgMiA9PT0gMSk7CgogICAgLy8gRmFzdCBjYXNlCiAgICBpZiAobW9kMyA9PT0gMykgewogICAgICB2YXIgcG93ID0gdGhpcy5tLmFkZChuZXcgQk4oMSkpLml1c2hybigyKTsKICAgICAgcmV0dXJuIHRoaXMucG93KGEsIHBvdyk7CiAgICB9CgogICAgLy8gVG9uZWxsaS1TaGFua3MgYWxnb3JpdGhtIChUb3RhbGx5IHVub3B0aW1pemVkIGFuZCBzbG93KQogICAgLy8KICAgIC8vIEZpbmQgUSBhbmQgUywgdGhhdCBRICogMiBeIFMgPSAoUCAtIDEpCiAgICB2YXIgcSA9IHRoaXMubS5zdWJuKDEpOwogICAgdmFyIHMgPSAwOwogICAgd2hpbGUgKCFxLmlzWmVybygpICYmIHEuYW5kbG4oMSkgPT09IDApIHsKICAgICAgcysrOwogICAgICBxLml1c2hybigxKTsKICAgIH0KICAgIGFzc2VydCghcS5pc1plcm8oKSk7CgogICAgdmFyIG9uZSA9IG5ldyBCTigxKS50b1JlZCh0aGlzKTsKICAgIHZhciBuT25lID0gb25lLnJlZE5lZygpOwoKICAgIC8vIEZpbmQgcXVhZHJhdGljIG5vbi1yZXNpZHVlCiAgICAvLyBOT1RFOiBNYXggaXMgc3VjaCBiZWNhdXNlIG9mIGdlbmVyYWxpemVkIFJpZW1hbm4gaHlwb3RoZXNpcy4KICAgIHZhciBscG93ID0gdGhpcy5tLnN1Ym4oMSkuaXVzaHJuKDEpOwogICAgdmFyIHogPSB0aGlzLm0uYml0TGVuZ3RoKCk7CiAgICB6ID0gbmV3IEJOKDIgKiB6ICogeikudG9SZWQodGhpcyk7CgogICAgd2hpbGUgKHRoaXMucG93KHosIGxwb3cpLmNtcChuT25lKSAhPT0gMCkgewogICAgICB6LnJlZElBZGQobk9uZSk7CiAgICB9CgogICAgdmFyIGMgPSB0aGlzLnBvdyh6LCBxKTsKICAgIHZhciByID0gdGhpcy5wb3coYSwgcS5hZGRuKDEpLml1c2hybigxKSk7CiAgICB2YXIgdCA9IHRoaXMucG93KGEsIHEpOwogICAgdmFyIG0gPSBzOwogICAgd2hpbGUgKHQuY21wKG9uZSkgIT09IDApIHsKICAgICAgdmFyIHRtcCA9IHQ7CiAgICAgIGZvciAodmFyIGkgPSAwOyB0bXAuY21wKG9uZSkgIT09IDA7IGkrKykgewogICAgICAgIHRtcCA9IHRtcC5yZWRTcXIoKTsKICAgICAgfQogICAgICBhc3NlcnQoaSA8IG0pOwogICAgICB2YXIgYiA9IHRoaXMucG93KGMsIG5ldyBCTigxKS5pdXNobG4obSAtIGkgLSAxKSk7CgogICAgICByID0gci5yZWRNdWwoYik7CiAgICAgIGMgPSBiLnJlZFNxcigpOwogICAgICB0ID0gdC5yZWRNdWwoYyk7CiAgICAgIG0gPSBpOwogICAgfQoKICAgIHJldHVybiByOwogIH07CgogIFJlZC5wcm90b3R5cGUuaW52bSA9IGZ1bmN0aW9uIGludm0gKGEpIHsKICAgIHZhciBpbnYgPSBhLl9pbnZtcCh0aGlzLm0pOwogICAgaWYgKGludi5uZWdhdGl2ZSAhPT0gMCkgewogICAgICBpbnYubmVnYXRpdmUgPSAwOwogICAgICByZXR1cm4gdGhpcy5pbW9kKGludikucmVkTmVnKCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdGhpcy5pbW9kKGludik7CiAgICB9CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5wb3cgPSBmdW5jdGlvbiBwb3cgKGEsIG51bSkgewogICAgaWYgKG51bS5pc1plcm8oKSkgcmV0dXJuIG5ldyBCTigxKTsKICAgIGlmIChudW0uY21wbigxKSA9PT0gMCkgcmV0dXJuIGEuY2xvbmUoKTsKCiAgICB2YXIgd2luZG93U2l6ZSA9IDQ7CiAgICB2YXIgd25kID0gbmV3IEFycmF5KDEgPDwgd2luZG93U2l6ZSk7CiAgICB3bmRbMF0gPSBuZXcgQk4oMSkudG9SZWQodGhpcyk7CiAgICB3bmRbMV0gPSBhOwogICAgZm9yICh2YXIgaSA9IDI7IGkgPCB3bmQubGVuZ3RoOyBpKyspIHsKICAgICAgd25kW2ldID0gdGhpcy5tdWwod25kW2kgLSAxXSwgYSk7CiAgICB9CgogICAgdmFyIHJlcyA9IHduZFswXTsKICAgIHZhciBjdXJyZW50ID0gMDsKICAgIHZhciBjdXJyZW50TGVuID0gMDsKICAgIHZhciBzdGFydCA9IG51bS5iaXRMZW5ndGgoKSAlIDI2OwogICAgaWYgKHN0YXJ0ID09PSAwKSB7CiAgICAgIHN0YXJ0ID0gMjY7CiAgICB9CgogICAgZm9yIChpID0gbnVtLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIHZhciB3b3JkID0gbnVtLndvcmRzW2ldOwogICAgICBmb3IgKHZhciBqID0gc3RhcnQgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgIHZhciBiaXQgPSAod29yZCA+PiBqKSAmIDE7CiAgICAgICAgaWYgKHJlcyAhPT0gd25kWzBdKSB7CiAgICAgICAgICByZXMgPSB0aGlzLnNxcihyZXMpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGJpdCA9PT0gMCAmJiBjdXJyZW50ID09PSAwKSB7CiAgICAgICAgICBjdXJyZW50TGVuID0gMDsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgY3VycmVudCA8PD0gMTsKICAgICAgICBjdXJyZW50IHw9IGJpdDsKICAgICAgICBjdXJyZW50TGVuKys7CiAgICAgICAgaWYgKGN1cnJlbnRMZW4gIT09IHdpbmRvd1NpemUgJiYgKGkgIT09IDAgfHwgaiAhPT0gMCkpIGNvbnRpbnVlOwoKICAgICAgICByZXMgPSB0aGlzLm11bChyZXMsIHduZFtjdXJyZW50XSk7CiAgICAgICAgY3VycmVudExlbiA9IDA7CiAgICAgICAgY3VycmVudCA9IDA7CiAgICAgIH0KICAgICAgc3RhcnQgPSAyNjsKICAgIH0KCiAgICByZXR1cm4gcmVzOwogIH07CgogIFJlZC5wcm90b3R5cGUuY29udmVydFRvID0gZnVuY3Rpb24gY29udmVydFRvIChudW0pIHsKICAgIHZhciByID0gbnVtLnVtb2QodGhpcy5tKTsKCiAgICByZXR1cm4gciA9PT0gbnVtID8gci5jbG9uZSgpIDogcjsKICB9OwoKICBSZWQucHJvdG90eXBlLmNvbnZlcnRGcm9tID0gZnVuY3Rpb24gY29udmVydEZyb20gKG51bSkgewogICAgdmFyIHJlcyA9IG51bS5jbG9uZSgpOwogICAgcmVzLnJlZCA9IG51bGw7CiAgICByZXR1cm4gcmVzOwogIH07CgogIC8vCiAgLy8gTW9udGdvbWVyeSBtZXRob2QgZW5naW5lCiAgLy8KCiAgQk4ubW9udCA9IGZ1bmN0aW9uIG1vbnQgKG51bSkgewogICAgcmV0dXJuIG5ldyBNb250KG51bSk7CiAgfTsKCiAgZnVuY3Rpb24gTW9udCAobSkgewogICAgUmVkLmNhbGwodGhpcywgbSk7CgogICAgdGhpcy5zaGlmdCA9IHRoaXMubS5iaXRMZW5ndGgoKTsKICAgIGlmICh0aGlzLnNoaWZ0ICUgMjYgIT09IDApIHsKICAgICAgdGhpcy5zaGlmdCArPSAyNiAtICh0aGlzLnNoaWZ0ICUgMjYpOwogICAgfQoKICAgIHRoaXMuciA9IG5ldyBCTigxKS5pdXNobG4odGhpcy5zaGlmdCk7CiAgICB0aGlzLnIyID0gdGhpcy5pbW9kKHRoaXMuci5zcXIoKSk7CiAgICB0aGlzLnJpbnYgPSB0aGlzLnIuX2ludm1wKHRoaXMubSk7CgogICAgdGhpcy5taW52ID0gdGhpcy5yaW52Lm11bCh0aGlzLnIpLmlzdWJuKDEpLmRpdih0aGlzLm0pOwogICAgdGhpcy5taW52ID0gdGhpcy5taW52LnVtb2QodGhpcy5yKTsKICAgIHRoaXMubWludiA9IHRoaXMuci5zdWIodGhpcy5taW52KTsKICB9CiAgaW5oZXJpdHMoTW9udCwgUmVkKTsKCiAgTW9udC5wcm90b3R5cGUuY29udmVydFRvID0gZnVuY3Rpb24gY29udmVydFRvIChudW0pIHsKICAgIHJldHVybiB0aGlzLmltb2QobnVtLnVzaGxuKHRoaXMuc2hpZnQpKTsKICB9OwoKICBNb250LnByb3RvdHlwZS5jb252ZXJ0RnJvbSA9IGZ1bmN0aW9uIGNvbnZlcnRGcm9tIChudW0pIHsKICAgIHZhciByID0gdGhpcy5pbW9kKG51bS5tdWwodGhpcy5yaW52KSk7CiAgICByLnJlZCA9IG51bGw7CiAgICByZXR1cm4gcjsKICB9OwoKICBNb250LnByb3RvdHlwZS5pbXVsID0gZnVuY3Rpb24gaW11bCAoYSwgYikgewogICAgaWYgKGEuaXNaZXJvKCkgfHwgYi5pc1plcm8oKSkgewogICAgICBhLndvcmRzWzBdID0gMDsKICAgICAgYS5sZW5ndGggPSAxOwogICAgICByZXR1cm4gYTsKICAgIH0KCiAgICB2YXIgdCA9IGEuaW11bChiKTsKICAgIHZhciBjID0gdC5tYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5taW52KS5pbWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubSk7CiAgICB2YXIgdSA9IHQuaXN1YihjKS5pdXNocm4odGhpcy5zaGlmdCk7CiAgICB2YXIgcmVzID0gdTsKCiAgICBpZiAodS5jbXAodGhpcy5tKSA+PSAwKSB7CiAgICAgIHJlcyA9IHUuaXN1Yih0aGlzLm0pOwogICAgfSBlbHNlIGlmICh1LmNtcG4oMCkgPCAwKSB7CiAgICAgIHJlcyA9IHUuaWFkZCh0aGlzLm0pOwogICAgfQoKICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogIH07CgogIE1vbnQucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bCAoYSwgYikgewogICAgaWYgKGEuaXNaZXJvKCkgfHwgYi5pc1plcm8oKSkgcmV0dXJuIG5ldyBCTigwKS5fZm9yY2VSZWQodGhpcyk7CgogICAgdmFyIHQgPSBhLm11bChiKTsKICAgIHZhciBjID0gdC5tYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5taW52KS5pbWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubSk7CiAgICB2YXIgdSA9IHQuaXN1YihjKS5pdXNocm4odGhpcy5zaGlmdCk7CiAgICB2YXIgcmVzID0gdTsKICAgIGlmICh1LmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgcmVzID0gdS5pc3ViKHRoaXMubSk7CiAgICB9IGVsc2UgaWYgKHUuY21wbigwKSA8IDApIHsKICAgICAgcmVzID0gdS5pYWRkKHRoaXMubSk7CiAgICB9CgogICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgfTsKCiAgTW9udC5wcm90b3R5cGUuaW52bSA9IGZ1bmN0aW9uIGludm0gKGEpIHsKICAgIC8vIChBUileLTEgKiBSXjIgPSAoQV4tMSAqIFJeLTEpICogUl4yID0gQV4tMSAqIFIKICAgIHZhciByZXMgPSB0aGlzLmltb2QoYS5faW52bXAodGhpcy5tKS5tdWwodGhpcy5yMikpOwogICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgfTsKfSkodHlwZW9mIG1vZHVsZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbW9kdWxlLCB0aGlzKTsKCn0se31dLDQyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIHI7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJhbmQobGVuKSB7CiAgaWYgKCFyKQogICAgciA9IG5ldyBSYW5kKG51bGwpOwoKICByZXR1cm4gci5nZW5lcmF0ZShsZW4pOwp9OwoKZnVuY3Rpb24gUmFuZChyYW5kKSB7CiAgdGhpcy5yYW5kID0gcmFuZDsKfQptb2R1bGUuZXhwb3J0cy5SYW5kID0gUmFuZDsKClJhbmQucHJvdG90eXBlLmdlbmVyYXRlID0gZnVuY3Rpb24gZ2VuZXJhdGUobGVuKSB7CiAgcmV0dXJuIHRoaXMuX3JhbmQobGVuKTsKfTsKCmlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgewogIGlmICh3aW5kb3cuY3J5cHRvICYmIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7CiAgICAvLyBNb2Rlcm4gYnJvd3NlcnMKICAgIFJhbmQucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogICAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkobik7CiAgICAgIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycik7CiAgICAgIHJldHVybiBhcnI7CiAgICB9OwogIH0gZWxzZSBpZiAod2luZG93Lm1zQ3J5cHRvICYmIHdpbmRvdy5tc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMpIHsKICAgIC8vIElFCiAgICBSYW5kLnByb3RvdHlwZS5fcmFuZCA9IGZ1bmN0aW9uIF9yYW5kKG4pIHsKICAgICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KG4pOwogICAgICB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycik7CiAgICAgIHJldHVybiBhcnI7CiAgICB9OwogIH0gZWxzZSB7CiAgICAvLyBPbGQganVuawogICAgUmFuZC5wcm90b3R5cGUuX3JhbmQgPSBmdW5jdGlvbigpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQgeWV0Jyk7CiAgICB9OwogIH0KfSBlbHNlIHsKICAvLyBOb2RlLmpzIG9yIFdlYiB3b3JrZXIKICB0cnkgewogICAgdmFyIGNyeXB0byA9IHJlcXVpcmUoJ2NyeScgKyAncHRvJyk7CgogICAgUmFuZC5wcm90b3R5cGUuX3JhbmQgPSBmdW5jdGlvbiBfcmFuZChuKSB7CiAgICAgIHJldHVybiBjcnlwdG8ucmFuZG9tQnl0ZXMobik7CiAgICB9OwogIH0gY2F0Y2ggKGUpIHsKICAgIC8vIEVtdWxhdGUgY3J5cHRvIEFQSSB1c2luZyByYW5keQogICAgUmFuZC5wcm90b3R5cGUuX3JhbmQgPSBmdW5jdGlvbiBfcmFuZChuKSB7CiAgICAgIHZhciByZXMgPSBuZXcgVWludDhBcnJheShuKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMubGVuZ3RoOyBpKyspCiAgICAgICAgcmVzW2ldID0gdGhpcy5yYW5kLmdldEJ5dGUoKTsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CiAgfQp9Cgp9LHt9XSw0MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cgp9LHt9XSw0NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLy8gYmFzZWQgb24gdGhlIGFlcyBpbXBsaW1lbnRhdGlvbiBpbiB0cmlwbGUgc2VjCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9rZXliYXNlL3RyaXBsZXNlYwoKLy8gd2hpY2ggaXMgaW4gdHVybiBiYXNlZCBvbiB0aGUgb25lIGZyb20gY3J5cHRvLWpzCi8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzLwoKdmFyIHVpbnRfbWF4ID0gTWF0aC5wb3coMiwgMzIpCmZ1bmN0aW9uIGZpeHVwX3VpbnQzMiAoeCkgewogIHZhciByZXQsIHhfcG9zCiAgcmV0ID0geCA+IHVpbnRfbWF4IHx8IHggPCAwID8gKHhfcG9zID0gTWF0aC5hYnMoeCkgJSB1aW50X21heCwgeCA8IDAgPyB1aW50X21heCAtIHhfcG9zIDogeF9wb3MpIDogeAogIHJldHVybiByZXQKfQpmdW5jdGlvbiBzY3J1Yl92ZWMgKHYpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHYubGVuZ3RoOyB2KyspIHsKICAgIHZbaV0gPSAwCiAgfQogIHJldHVybiBmYWxzZQp9CgpmdW5jdGlvbiBHbG9iYWwgKCkgewogIHRoaXMuU0JPWCA9IFtdCiAgdGhpcy5JTlZfU0JPWCA9IFtdCiAgdGhpcy5TVUJfTUlYID0gW1tdLCBbXSwgW10sIFtdXQogIHRoaXMuSU5WX1NVQl9NSVggPSBbW10sIFtdLCBbXSwgW11dCiAgdGhpcy5pbml0KCkKICB0aGlzLlJDT04gPSBbMHgwMCwgMHgwMSwgMHgwMiwgMHgwNCwgMHgwOCwgMHgxMCwgMHgyMCwgMHg0MCwgMHg4MCwgMHgxYiwgMHgzNl0KfQoKR2xvYmFsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkgewogIHZhciBkLCBpLCBzeCwgdCwgeCwgeDIsIHg0LCB4OCwgeGksIF9pCiAgZCA9IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2ksIF9yZXN1bHRzCiAgICBfcmVzdWx0cyA9IFtdCiAgICBmb3IgKGkgPSBfaSA9IDA7IF9pIDwgMjU2OyBpID0gKytfaSkgewogICAgICBpZiAoaSA8IDEyOCkgewogICAgICAgIF9yZXN1bHRzLnB1c2goaSA8PCAxKQogICAgICB9IGVsc2UgewogICAgICAgIF9yZXN1bHRzLnB1c2goKGkgPDwgMSkgXiAweDExYikKICAgICAgfQogICAgfQogICAgcmV0dXJuIF9yZXN1bHRzCiAgfSkoKQogIHggPSAwCiAgeGkgPSAwCiAgZm9yIChpID0gX2kgPSAwOyBfaSA8IDI1NjsgaSA9ICsrX2kpIHsKICAgIHN4ID0geGkgXiAoeGkgPDwgMSkgXiAoeGkgPDwgMikgXiAoeGkgPDwgMykgXiAoeGkgPDwgNCkKICAgIHN4ID0gKHN4ID4+PiA4KSBeIChzeCAmIDB4ZmYpIF4gMHg2MwogICAgdGhpcy5TQk9YW3hdID0gc3gKICAgIHRoaXMuSU5WX1NCT1hbc3hdID0geAogICAgeDIgPSBkW3hdCiAgICB4NCA9IGRbeDJdCiAgICB4OCA9IGRbeDRdCiAgICB0ID0gKGRbc3hdICogMHgxMDEpIF4gKHN4ICogMHgxMDEwMTAwKQogICAgdGhpcy5TVUJfTUlYWzBdW3hdID0gKHQgPDwgMjQpIHwgKHQgPj4+IDgpCiAgICB0aGlzLlNVQl9NSVhbMV1beF0gPSAodCA8PCAxNikgfCAodCA+Pj4gMTYpCiAgICB0aGlzLlNVQl9NSVhbMl1beF0gPSAodCA8PCA4KSB8ICh0ID4+PiAyNCkKICAgIHRoaXMuU1VCX01JWFszXVt4XSA9IHQKICAgIHQgPSAoeDggKiAweDEwMTAxMDEpIF4gKHg0ICogMHgxMDAwMSkgXiAoeDIgKiAweDEwMSkgXiAoeCAqIDB4MTAxMDEwMCkKICAgIHRoaXMuSU5WX1NVQl9NSVhbMF1bc3hdID0gKHQgPDwgMjQpIHwgKHQgPj4+IDgpCiAgICB0aGlzLklOVl9TVUJfTUlYWzFdW3N4XSA9ICh0IDw8IDE2KSB8ICh0ID4+PiAxNikKICAgIHRoaXMuSU5WX1NVQl9NSVhbMl1bc3hdID0gKHQgPDwgOCkgfCAodCA+Pj4gMjQpCiAgICB0aGlzLklOVl9TVUJfTUlYWzNdW3N4XSA9IHQKICAgIGlmICh4ID09PSAwKSB7CiAgICAgIHggPSB4aSA9IDEKICAgIH0gZWxzZSB7CiAgICAgIHggPSB4MiBeIGRbZFtkW3g4IF4geDJdXV0KICAgICAgeGkgXj0gZFtkW3hpXV0KICAgIH0KICB9CiAgcmV0dXJuIHRydWUKfQoKdmFyIEcgPSBuZXcgR2xvYmFsKCkKCkFFUy5ibG9ja1NpemUgPSA0ICogNAoKQUVTLnByb3RvdHlwZS5ibG9ja1NpemUgPSBBRVMuYmxvY2tTaXplCgpBRVMua2V5U2l6ZSA9IDI1NiAvIDgKCkFFUy5wcm90b3R5cGUua2V5U2l6ZSA9IEFFUy5rZXlTaXplCgpmdW5jdGlvbiBidWZmZXJUb0FycmF5IChidWYpIHsKICB2YXIgbGVuID0gYnVmLmxlbmd0aCAvIDQKICB2YXIgb3V0ID0gbmV3IEFycmF5KGxlbikKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgb3V0W2ldID0gYnVmLnJlYWRVSW50MzJCRShpICogNCkKICB9CiAgcmV0dXJuIG91dAp9CmZ1bmN0aW9uIEFFUyAoa2V5KSB7CiAgdGhpcy5fa2V5ID0gYnVmZmVyVG9BcnJheShrZXkpCiAgdGhpcy5fZG9SZXNldCgpCn0KCkFFUy5wcm90b3R5cGUuX2RvUmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGludktzUm93LCBrZXlTaXplLCBrZXlXb3Jkcywga3NSb3csIGtzUm93cywgdAogIGtleVdvcmRzID0gdGhpcy5fa2V5CiAga2V5U2l6ZSA9IGtleVdvcmRzLmxlbmd0aAogIHRoaXMuX25Sb3VuZHMgPSBrZXlTaXplICsgNgogIGtzUm93cyA9ICh0aGlzLl9uUm91bmRzICsgMSkgKiA0CiAgdGhpcy5fa2V5U2NoZWR1bGUgPSBbXQogIGZvciAoa3NSb3cgPSAwOyBrc1JvdyA8IGtzUm93czsga3NSb3crKykgewogICAgdGhpcy5fa2V5U2NoZWR1bGVba3NSb3ddID0ga3NSb3cgPCBrZXlTaXplID8ga2V5V29yZHNba3NSb3ddIDogKHQgPSB0aGlzLl9rZXlTY2hlZHVsZVtrc1JvdyAtIDFdLCAoa3NSb3cgJSBrZXlTaXplKSA9PT0gMCA/ICh0ID0gKHQgPDwgOCkgfCAodCA+Pj4gMjQpLCB0ID0gKEcuU0JPWFt0ID4+PiAyNF0gPDwgMjQpIHwgKEcuU0JPWFsodCA+Pj4gMTYpICYgMHhmZl0gPDwgMTYpIHwgKEcuU0JPWFsodCA+Pj4gOCkgJiAweGZmXSA8PCA4KSB8IEcuU0JPWFt0ICYgMHhmZl0sIHQgXj0gRy5SQ09OWyhrc1JvdyAvIGtleVNpemUpIHwgMF0gPDwgMjQpIDoga2V5U2l6ZSA+IDYgJiYga3NSb3cgJSBrZXlTaXplID09PSA0ID8gdCA9IChHLlNCT1hbdCA+Pj4gMjRdIDw8IDI0KSB8IChHLlNCT1hbKHQgPj4+IDE2KSAmIDB4ZmZdIDw8IDE2KSB8IChHLlNCT1hbKHQgPj4+IDgpICYgMHhmZl0gPDwgOCkgfCBHLlNCT1hbdCAmIDB4ZmZdIDogdm9pZCAwLCB0aGlzLl9rZXlTY2hlZHVsZVtrc1JvdyAtIGtleVNpemVdIF4gdCkKICB9CiAgdGhpcy5faW52S2V5U2NoZWR1bGUgPSBbXQogIGZvciAoaW52S3NSb3cgPSAwOyBpbnZLc1JvdyA8IGtzUm93czsgaW52S3NSb3crKykgewogICAga3NSb3cgPSBrc1Jvd3MgLSBpbnZLc1JvdwogICAgdCA9IHRoaXMuX2tleVNjaGVkdWxlW2tzUm93IC0gKGludktzUm93ICUgNCA/IDAgOiA0KV0KICAgIHRoaXMuX2ludktleVNjaGVkdWxlW2ludktzUm93XSA9IGludktzUm93IDwgNCB8fCBrc1JvdyA8PSA0ID8gdCA6IEcuSU5WX1NVQl9NSVhbMF1bRy5TQk9YW3QgPj4+IDI0XV0gXiBHLklOVl9TVUJfTUlYWzFdW0cuU0JPWFsodCA+Pj4gMTYpICYgMHhmZl1dIF4gRy5JTlZfU1VCX01JWFsyXVtHLlNCT1hbKHQgPj4+IDgpICYgMHhmZl1dIF4gRy5JTlZfU1VCX01JWFszXVtHLlNCT1hbdCAmIDB4ZmZdXQogIH0KICByZXR1cm4gdHJ1ZQp9CgpBRVMucHJvdG90eXBlLmVuY3J5cHRCbG9jayA9IGZ1bmN0aW9uIChNKSB7CiAgTSA9IGJ1ZmZlclRvQXJyYXkobmV3IEJ1ZmZlcihNKSkKICB2YXIgb3V0ID0gdGhpcy5fZG9DcnlwdEJsb2NrKE0sIHRoaXMuX2tleVNjaGVkdWxlLCBHLlNVQl9NSVgsIEcuU0JPWCkKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcigxNikKICBidWYud3JpdGVVSW50MzJCRShvdXRbMF0sIDApCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzFdLCA0KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFsyXSwgOCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbM10sIDEyKQogIHJldHVybiBidWYKfQoKQUVTLnByb3RvdHlwZS5kZWNyeXB0QmxvY2sgPSBmdW5jdGlvbiAoTSkgewogIE0gPSBidWZmZXJUb0FycmF5KG5ldyBCdWZmZXIoTSkpCiAgdmFyIHRlbXAgPSBbTVszXSwgTVsxXV0KICBNWzFdID0gdGVtcFswXQogIE1bM10gPSB0ZW1wWzFdCiAgdmFyIG91dCA9IHRoaXMuX2RvQ3J5cHRCbG9jayhNLCB0aGlzLl9pbnZLZXlTY2hlZHVsZSwgRy5JTlZfU1VCX01JWCwgRy5JTlZfU0JPWCkKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcigxNikKICBidWYud3JpdGVVSW50MzJCRShvdXRbMF0sIDApCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzNdLCA0KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFsyXSwgOCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbMV0sIDEyKQogIHJldHVybiBidWYKfQoKQUVTLnByb3RvdHlwZS5zY3J1YiA9IGZ1bmN0aW9uICgpIHsKICBzY3J1Yl92ZWModGhpcy5fa2V5U2NoZWR1bGUpCiAgc2NydWJfdmVjKHRoaXMuX2ludktleVNjaGVkdWxlKQogIHNjcnViX3ZlYyh0aGlzLl9rZXkpCn0KCkFFUy5wcm90b3R5cGUuX2RvQ3J5cHRCbG9jayA9IGZ1bmN0aW9uIChNLCBrZXlTY2hlZHVsZSwgU1VCX01JWCwgU0JPWCkgewogIHZhciBrc1JvdywgczAsIHMxLCBzMiwgczMsIHQwLCB0MSwgdDIsIHQzCgogIHMwID0gTVswXSBeIGtleVNjaGVkdWxlWzBdCiAgczEgPSBNWzFdIF4ga2V5U2NoZWR1bGVbMV0KICBzMiA9IE1bMl0gXiBrZXlTY2hlZHVsZVsyXQogIHMzID0gTVszXSBeIGtleVNjaGVkdWxlWzNdCiAga3NSb3cgPSA0CiAgZm9yICh2YXIgcm91bmQgPSAxOyByb3VuZCA8IHRoaXMuX25Sb3VuZHM7IHJvdW5kKyspIHsKICAgIHQwID0gU1VCX01JWFswXVtzMCA+Pj4gMjRdIF4gU1VCX01JWFsxXVsoczEgPj4+IDE2KSAmIDB4ZmZdIF4gU1VCX01JWFsyXVsoczIgPj4+IDgpICYgMHhmZl0gXiBTVUJfTUlYWzNdW3MzICYgMHhmZl0gXiBrZXlTY2hlZHVsZVtrc1JvdysrXQogICAgdDEgPSBTVUJfTUlYWzBdW3MxID4+PiAyNF0gXiBTVUJfTUlYWzFdWyhzMiA+Pj4gMTYpICYgMHhmZl0gXiBTVUJfTUlYWzJdWyhzMyA+Pj4gOCkgJiAweGZmXSBeIFNVQl9NSVhbM11bczAgJiAweGZmXSBeIGtleVNjaGVkdWxlW2tzUm93KytdCiAgICB0MiA9IFNVQl9NSVhbMF1bczIgPj4+IDI0XSBeIFNVQl9NSVhbMV1bKHMzID4+PiAxNikgJiAweGZmXSBeIFNVQl9NSVhbMl1bKHMwID4+PiA4KSAmIDB4ZmZdIF4gU1VCX01JWFszXVtzMSAmIDB4ZmZdIF4ga2V5U2NoZWR1bGVba3NSb3crK10KICAgIHQzID0gU1VCX01JWFswXVtzMyA+Pj4gMjRdIF4gU1VCX01JWFsxXVsoczAgPj4+IDE2KSAmIDB4ZmZdIF4gU1VCX01JWFsyXVsoczEgPj4+IDgpICYgMHhmZl0gXiBTVUJfTUlYWzNdW3MyICYgMHhmZl0gXiBrZXlTY2hlZHVsZVtrc1JvdysrXQogICAgczAgPSB0MAogICAgczEgPSB0MQogICAgczIgPSB0MgogICAgczMgPSB0MwogIH0KICB0MCA9ICgoU0JPWFtzMCA+Pj4gMjRdIDw8IDI0KSB8IChTQk9YWyhzMSA+Pj4gMTYpICYgMHhmZl0gPDwgMTYpIHwgKFNCT1hbKHMyID4+PiA4KSAmIDB4ZmZdIDw8IDgpIHwgU0JPWFtzMyAmIDB4ZmZdKSBeIGtleVNjaGVkdWxlW2tzUm93KytdCiAgdDEgPSAoKFNCT1hbczEgPj4+IDI0XSA8PCAyNCkgfCAoU0JPWFsoczIgPj4+IDE2KSAmIDB4ZmZdIDw8IDE2KSB8IChTQk9YWyhzMyA+Pj4gOCkgJiAweGZmXSA8PCA4KSB8IFNCT1hbczAgJiAweGZmXSkgXiBrZXlTY2hlZHVsZVtrc1JvdysrXQogIHQyID0gKChTQk9YW3MyID4+PiAyNF0gPDwgMjQpIHwgKFNCT1hbKHMzID4+PiAxNikgJiAweGZmXSA8PCAxNikgfCAoU0JPWFsoczAgPj4+IDgpICYgMHhmZl0gPDwgOCkgfCBTQk9YW3MxICYgMHhmZl0pIF4ga2V5U2NoZWR1bGVba3NSb3crK10KICB0MyA9ICgoU0JPWFtzMyA+Pj4gMjRdIDw8IDI0KSB8IChTQk9YWyhzMCA+Pj4gMTYpICYgMHhmZl0gPDwgMTYpIHwgKFNCT1hbKHMxID4+PiA4KSAmIDB4ZmZdIDw8IDgpIHwgU0JPWFtzMiAmIDB4ZmZdKSBeIGtleVNjaGVkdWxlW2tzUm93KytdCiAgcmV0dXJuIFsKICAgIGZpeHVwX3VpbnQzMih0MCksCiAgICBmaXh1cF91aW50MzIodDEpLAogICAgZml4dXBfdWludDMyKHQyKSwKICAgIGZpeHVwX3VpbnQzMih0MykKICBdCn0KCmV4cG9ydHMuQUVTID0gQUVTCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MH1dLDQ1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYWVzID0gcmVxdWlyZSgnLi9hZXMnKQp2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnY2lwaGVyLWJhc2UnKQp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBHSEFTSCA9IHJlcXVpcmUoJy4vZ2hhc2gnKQp2YXIgeG9yID0gcmVxdWlyZSgnYnVmZmVyLXhvcicpCmluaGVyaXRzKFN0cmVhbUNpcGhlciwgVHJhbnNmb3JtKQptb2R1bGUuZXhwb3J0cyA9IFN0cmVhbUNpcGhlcgoKZnVuY3Rpb24gU3RyZWFtQ2lwaGVyIChtb2RlLCBrZXksIGl2LCBkZWNyeXB0KSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFN0cmVhbUNpcGhlcikpIHsKICAgIHJldHVybiBuZXcgU3RyZWFtQ2lwaGVyKG1vZGUsIGtleSwgaXYpCiAgfQogIFRyYW5zZm9ybS5jYWxsKHRoaXMpCiAgdGhpcy5fZmluSUQgPSBCdWZmZXIuY29uY2F0KFtpdiwgbmV3IEJ1ZmZlcihbMCwgMCwgMCwgMV0pXSkKICBpdiA9IEJ1ZmZlci5jb25jYXQoW2l2LCBuZXcgQnVmZmVyKFswLCAwLCAwLCAyXSldKQogIHRoaXMuX2NpcGhlciA9IG5ldyBhZXMuQUVTKGtleSkKICB0aGlzLl9wcmV2ID0gbmV3IEJ1ZmZlcihpdi5sZW5ndGgpCiAgdGhpcy5fY2FjaGUgPSBuZXcgQnVmZmVyKCcnKQogIHRoaXMuX3NlY0NhY2hlID0gbmV3IEJ1ZmZlcignJykKICB0aGlzLl9kZWNyeXB0ID0gZGVjcnlwdAogIHRoaXMuX2FsZW4gPSAwCiAgdGhpcy5fbGVuID0gMAogIGl2LmNvcHkodGhpcy5fcHJldikKICB0aGlzLl9tb2RlID0gbW9kZQogIHZhciBoID0gbmV3IEJ1ZmZlcig0KQogIGguZmlsbCgwKQogIHRoaXMuX2doYXNoID0gbmV3IEdIQVNIKHRoaXMuX2NpcGhlci5lbmNyeXB0QmxvY2soaCkpCiAgdGhpcy5fYXV0aFRhZyA9IG51bGwKICB0aGlzLl9jYWxsZWQgPSBmYWxzZQp9ClN0cmVhbUNpcGhlci5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChjaHVuaykgewogIGlmICghdGhpcy5fY2FsbGVkICYmIHRoaXMuX2FsZW4pIHsKICAgIHZhciBydW1wID0gMTYgLSAodGhpcy5fYWxlbiAlIDE2KQogICAgaWYgKHJ1bXAgPCAxNikgewogICAgICBydW1wID0gbmV3IEJ1ZmZlcihydW1wKQogICAgICBydW1wLmZpbGwoMCkKICAgICAgdGhpcy5fZ2hhc2gudXBkYXRlKHJ1bXApCiAgICB9CiAgfQogIHRoaXMuX2NhbGxlZCA9IHRydWUKICB2YXIgb3V0ID0gdGhpcy5fbW9kZS5lbmNyeXB0KHRoaXMsIGNodW5rKQogIGlmICh0aGlzLl9kZWNyeXB0KSB7CiAgICB0aGlzLl9naGFzaC51cGRhdGUoY2h1bmspCiAgfSBlbHNlIHsKICAgIHRoaXMuX2doYXNoLnVwZGF0ZShvdXQpCiAgfQogIHRoaXMuX2xlbiArPSBjaHVuay5sZW5ndGgKICByZXR1cm4gb3V0Cn0KU3RyZWFtQ2lwaGVyLnByb3RvdHlwZS5fZmluYWwgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKHRoaXMuX2RlY3J5cHQgJiYgIXRoaXMuX2F1dGhUYWcpIHsKICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgc3RhdGUgb3IgdW5hYmxlIHRvIGF1dGhlbnRpY2F0ZSBkYXRhJykKICB9CiAgdmFyIHRhZyA9IHhvcih0aGlzLl9naGFzaC5maW5hbCh0aGlzLl9hbGVuICogOCwgdGhpcy5fbGVuICogOCksIHRoaXMuX2NpcGhlci5lbmNyeXB0QmxvY2sodGhpcy5fZmluSUQpKQogIGlmICh0aGlzLl9kZWNyeXB0KSB7CiAgICBpZiAoeG9yVGVzdCh0YWcsIHRoaXMuX2F1dGhUYWcpKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgc3RhdGUgb3IgdW5hYmxlIHRvIGF1dGhlbnRpY2F0ZSBkYXRhJykKICAgIH0KICB9IGVsc2UgewogICAgdGhpcy5fYXV0aFRhZyA9IHRhZwogIH0KICB0aGlzLl9jaXBoZXIuc2NydWIoKQp9ClN0cmVhbUNpcGhlci5wcm90b3R5cGUuZ2V0QXV0aFRhZyA9IGZ1bmN0aW9uIGdldEF1dGhUYWcgKCkgewogIGlmICghdGhpcy5fZGVjcnlwdCAmJiBCdWZmZXIuaXNCdWZmZXIodGhpcy5fYXV0aFRhZykpIHsKICAgIHJldHVybiB0aGlzLl9hdXRoVGFnCiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBFcnJvcignQXR0ZW1wdGluZyB0byBnZXQgYXV0aCB0YWcgaW4gdW5zdXBwb3J0ZWQgc3RhdGUnKQogIH0KfQpTdHJlYW1DaXBoZXIucHJvdG90eXBlLnNldEF1dGhUYWcgPSBmdW5jdGlvbiBzZXRBdXRoVGFnICh0YWcpIHsKICBpZiAodGhpcy5fZGVjcnlwdCkgewogICAgdGhpcy5fYXV0aFRhZyA9IHRhZwogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0F0dGVtcHRpbmcgdG8gc2V0IGF1dGggdGFnIGluIHVuc3VwcG9ydGVkIHN0YXRlJykKICB9Cn0KU3RyZWFtQ2lwaGVyLnByb3RvdHlwZS5zZXRBQUQgPSBmdW5jdGlvbiBzZXRBQUQgKGJ1ZikgewogIGlmICghdGhpcy5fY2FsbGVkKSB7CiAgICB0aGlzLl9naGFzaC51cGRhdGUoYnVmKQogICAgdGhpcy5fYWxlbiArPSBidWYubGVuZ3RoCiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBFcnJvcignQXR0ZW1wdGluZyB0byBzZXQgQUFEIGluIHVuc3VwcG9ydGVkIHN0YXRlJykKICB9Cn0KZnVuY3Rpb24geG9yVGVzdCAoYSwgYikgewogIHZhciBvdXQgPSAwCiAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkgewogICAgb3V0KysKICB9CiAgdmFyIGxlbiA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCkKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgb3V0ICs9IChhW2ldIF4gYltpXSkKICB9CiAgcmV0dXJuIG91dAp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9hZXMiOjQ0LCIuL2doYXNoIjo0OSwiYnVmZmVyIjo3MCwiYnVmZmVyLXhvciI6NzgsImNpcGhlci1iYXNlIjo3OSwiaW5oZXJpdHMiOjEyOH1dLDQ2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGNpcGhlcnMgPSByZXF1aXJlKCcuL2VuY3J5cHRlcicpCmV4cG9ydHMuY3JlYXRlQ2lwaGVyID0gZXhwb3J0cy5DaXBoZXIgPSBjaXBoZXJzLmNyZWF0ZUNpcGhlcgpleHBvcnRzLmNyZWF0ZUNpcGhlcml2ID0gZXhwb3J0cy5DaXBoZXJpdiA9IGNpcGhlcnMuY3JlYXRlQ2lwaGVyaXYKdmFyIGRlY2lwaGVycyA9IHJlcXVpcmUoJy4vZGVjcnlwdGVyJykKZXhwb3J0cy5jcmVhdGVEZWNpcGhlciA9IGV4cG9ydHMuRGVjaXBoZXIgPSBkZWNpcGhlcnMuY3JlYXRlRGVjaXBoZXIKZXhwb3J0cy5jcmVhdGVEZWNpcGhlcml2ID0gZXhwb3J0cy5EZWNpcGhlcml2ID0gZGVjaXBoZXJzLmNyZWF0ZURlY2lwaGVyaXYKdmFyIG1vZGVzID0gcmVxdWlyZSgnLi9tb2RlcycpCmZ1bmN0aW9uIGdldENpcGhlcnMgKCkgewogIHJldHVybiBPYmplY3Qua2V5cyhtb2RlcykKfQpleHBvcnRzLmxpc3RDaXBoZXJzID0gZXhwb3J0cy5nZXRDaXBoZXJzID0gZ2V0Q2lwaGVycwoKfSx7Ii4vZGVjcnlwdGVyIjo0NywiLi9lbmNyeXB0ZXIiOjQ4LCIuL21vZGVzIjo1MH1dLDQ3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYWVzID0gcmVxdWlyZSgnLi9hZXMnKQp2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnY2lwaGVyLWJhc2UnKQp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBtb2RlcyA9IHJlcXVpcmUoJy4vbW9kZXMnKQp2YXIgU3RyZWFtQ2lwaGVyID0gcmVxdWlyZSgnLi9zdHJlYW1DaXBoZXInKQp2YXIgQXV0aENpcGhlciA9IHJlcXVpcmUoJy4vYXV0aENpcGhlcicpCnZhciBlYnRrID0gcmVxdWlyZSgnZXZwX2J5dGVzdG9rZXknKQoKaW5oZXJpdHMoRGVjaXBoZXIsIFRyYW5zZm9ybSkKZnVuY3Rpb24gRGVjaXBoZXIgKG1vZGUsIGtleSwgaXYpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRGVjaXBoZXIpKSB7CiAgICByZXR1cm4gbmV3IERlY2lwaGVyKG1vZGUsIGtleSwgaXYpCiAgfQogIFRyYW5zZm9ybS5jYWxsKHRoaXMpCiAgdGhpcy5fY2FjaGUgPSBuZXcgU3BsaXR0ZXIoKQogIHRoaXMuX2xhc3QgPSB2b2lkIDAKICB0aGlzLl9jaXBoZXIgPSBuZXcgYWVzLkFFUyhrZXkpCiAgdGhpcy5fcHJldiA9IG5ldyBCdWZmZXIoaXYubGVuZ3RoKQogIGl2LmNvcHkodGhpcy5fcHJldikKICB0aGlzLl9tb2RlID0gbW9kZQogIHRoaXMuX2F1dG9wYWRkaW5nID0gdHJ1ZQp9CkRlY2lwaGVyLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHsKICB0aGlzLl9jYWNoZS5hZGQoZGF0YSkKICB2YXIgY2h1bmsKICB2YXIgdGhpbmcKICB2YXIgb3V0ID0gW10KICB3aGlsZSAoKGNodW5rID0gdGhpcy5fY2FjaGUuZ2V0KHRoaXMuX2F1dG9wYWRkaW5nKSkpIHsKICAgIHRoaW5nID0gdGhpcy5fbW9kZS5kZWNyeXB0KHRoaXMsIGNodW5rKQogICAgb3V0LnB1c2godGhpbmcpCiAgfQogIHJldHVybiBCdWZmZXIuY29uY2F0KG91dCkKfQpEZWNpcGhlci5wcm90b3R5cGUuX2ZpbmFsID0gZnVuY3Rpb24gKCkgewogIHZhciBjaHVuayA9IHRoaXMuX2NhY2hlLmZsdXNoKCkKICBpZiAodGhpcy5fYXV0b3BhZGRpbmcpIHsKICAgIHJldHVybiB1bnBhZCh0aGlzLl9tb2RlLmRlY3J5cHQodGhpcywgY2h1bmspKQogIH0gZWxzZSBpZiAoY2h1bmspIHsKICAgIHRocm93IG5ldyBFcnJvcignZGF0YSBub3QgbXVsdGlwbGUgb2YgYmxvY2sgbGVuZ3RoJykKICB9Cn0KRGVjaXBoZXIucHJvdG90eXBlLnNldEF1dG9QYWRkaW5nID0gZnVuY3Rpb24gKHNldFRvKSB7CiAgdGhpcy5fYXV0b3BhZGRpbmcgPSAhIXNldFRvCiAgcmV0dXJuIHRoaXMKfQpmdW5jdGlvbiBTcGxpdHRlciAoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNwbGl0dGVyKSkgewogICAgcmV0dXJuIG5ldyBTcGxpdHRlcigpCiAgfQogIHRoaXMuY2FjaGUgPSBuZXcgQnVmZmVyKCcnKQp9ClNwbGl0dGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZGF0YSkgewogIHRoaXMuY2FjaGUgPSBCdWZmZXIuY29uY2F0KFt0aGlzLmNhY2hlLCBkYXRhXSkKfQoKU3BsaXR0ZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChhdXRvUGFkZGluZykgewogIHZhciBvdXQKICBpZiAoYXV0b1BhZGRpbmcpIHsKICAgIGlmICh0aGlzLmNhY2hlLmxlbmd0aCA+IDE2KSB7CiAgICAgIG91dCA9IHRoaXMuY2FjaGUuc2xpY2UoMCwgMTYpCiAgICAgIHRoaXMuY2FjaGUgPSB0aGlzLmNhY2hlLnNsaWNlKDE2KQogICAgICByZXR1cm4gb3V0CiAgICB9CiAgfSBlbHNlIHsKICAgIGlmICh0aGlzLmNhY2hlLmxlbmd0aCA+PSAxNikgewogICAgICBvdXQgPSB0aGlzLmNhY2hlLnNsaWNlKDAsIDE2KQogICAgICB0aGlzLmNhY2hlID0gdGhpcy5jYWNoZS5zbGljZSgxNikKICAgICAgcmV0dXJuIG91dAogICAgfQogIH0KICByZXR1cm4gbnVsbAp9ClNwbGl0dGVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHsKICBpZiAodGhpcy5jYWNoZS5sZW5ndGgpIHsKICAgIHJldHVybiB0aGlzLmNhY2hlCiAgfQp9CmZ1bmN0aW9uIHVucGFkIChsYXN0KSB7CiAgdmFyIHBhZGRlZCA9IGxhc3RbMTVdCiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCBwYWRkZWQpIHsKICAgIGlmIChsYXN0WyhpICsgKDE2IC0gcGFkZGVkKSldICE9PSBwYWRkZWQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gZGVjcnlwdCBkYXRhJykKICAgIH0KICB9CiAgaWYgKHBhZGRlZCA9PT0gMTYpIHsKICAgIHJldHVybgogIH0KICByZXR1cm4gbGFzdC5zbGljZSgwLCAxNiAtIHBhZGRlZCkKfQoKdmFyIG1vZGVsaXN0ID0gewogIEVDQjogcmVxdWlyZSgnLi9tb2Rlcy9lY2InKSwKICBDQkM6IHJlcXVpcmUoJy4vbW9kZXMvY2JjJyksCiAgQ0ZCOiByZXF1aXJlKCcuL21vZGVzL2NmYicpLAogIENGQjg6IHJlcXVpcmUoJy4vbW9kZXMvY2ZiOCcpLAogIENGQjE6IHJlcXVpcmUoJy4vbW9kZXMvY2ZiMScpLAogIE9GQjogcmVxdWlyZSgnLi9tb2Rlcy9vZmInKSwKICBDVFI6IHJlcXVpcmUoJy4vbW9kZXMvY3RyJyksCiAgR0NNOiByZXF1aXJlKCcuL21vZGVzL2N0cicpCn0KCmZ1bmN0aW9uIGNyZWF0ZURlY2lwaGVyaXYgKHN1aXRlLCBwYXNzd29yZCwgaXYpIHsKICB2YXIgY29uZmlnID0gbW9kZXNbc3VpdGUudG9Mb3dlckNhc2UoKV0KICBpZiAoIWNvbmZpZykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9CiAgaWYgKHR5cGVvZiBpdiA9PT0gJ3N0cmluZycpIHsKICAgIGl2ID0gbmV3IEJ1ZmZlcihpdikKICB9CiAgaWYgKHR5cGVvZiBwYXNzd29yZCA9PT0gJ3N0cmluZycpIHsKICAgIHBhc3N3b3JkID0gbmV3IEJ1ZmZlcihwYXNzd29yZCkKICB9CiAgaWYgKHBhc3N3b3JkLmxlbmd0aCAhPT0gY29uZmlnLmtleSAvIDgpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQga2V5IGxlbmd0aCAnICsgcGFzc3dvcmQubGVuZ3RoKQogIH0KICBpZiAoaXYubGVuZ3RoICE9PSBjb25maWcuaXYpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgaXYgbGVuZ3RoICcgKyBpdi5sZW5ndGgpCiAgfQogIGlmIChjb25maWcudHlwZSA9PT0gJ3N0cmVhbScpIHsKICAgIHJldHVybiBuZXcgU3RyZWFtQ2lwaGVyKG1vZGVsaXN0W2NvbmZpZy5tb2RlXSwgcGFzc3dvcmQsIGl2LCB0cnVlKQogIH0gZWxzZSBpZiAoY29uZmlnLnR5cGUgPT09ICdhdXRoJykgewogICAgcmV0dXJuIG5ldyBBdXRoQ2lwaGVyKG1vZGVsaXN0W2NvbmZpZy5tb2RlXSwgcGFzc3dvcmQsIGl2LCB0cnVlKQogIH0KICByZXR1cm4gbmV3IERlY2lwaGVyKG1vZGVsaXN0W2NvbmZpZy5tb2RlXSwgcGFzc3dvcmQsIGl2KQp9CgpmdW5jdGlvbiBjcmVhdGVEZWNpcGhlciAoc3VpdGUsIHBhc3N3b3JkKSB7CiAgdmFyIGNvbmZpZyA9IG1vZGVzW3N1aXRlLnRvTG93ZXJDYXNlKCldCiAgaWYgKCFjb25maWcpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgc3VpdGUgdHlwZScpCiAgfQogIHZhciBrZXlzID0gZWJ0ayhwYXNzd29yZCwgZmFsc2UsIGNvbmZpZy5rZXksIGNvbmZpZy5pdikKICByZXR1cm4gY3JlYXRlRGVjaXBoZXJpdihzdWl0ZSwga2V5cy5rZXksIGtleXMuaXYpCn0KZXhwb3J0cy5jcmVhdGVEZWNpcGhlciA9IGNyZWF0ZURlY2lwaGVyCmV4cG9ydHMuY3JlYXRlRGVjaXBoZXJpdiA9IGNyZWF0ZURlY2lwaGVyaXYKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2FlcyI6NDQsIi4vYXV0aENpcGhlciI6NDUsIi4vbW9kZXMiOjUwLCIuL21vZGVzL2NiYyI6NTEsIi4vbW9kZXMvY2ZiIjo1MiwiLi9tb2Rlcy9jZmIxIjo1MywiLi9tb2Rlcy9jZmI4Ijo1NCwiLi9tb2Rlcy9jdHIiOjU1LCIuL21vZGVzL2VjYiI6NTYsIi4vbW9kZXMvb2ZiIjo1NywiLi9zdHJlYW1DaXBoZXIiOjU4LCJidWZmZXIiOjcwLCJjaXBoZXItYmFzZSI6NzksImV2cF9ieXRlc3Rva2V5IjoxMTksImluaGVyaXRzIjoxMjh9XSw0ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFlcyA9IHJlcXVpcmUoJy4vYWVzJykKdmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJ2NpcGhlci1iYXNlJykKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQp2YXIgbW9kZXMgPSByZXF1aXJlKCcuL21vZGVzJykKdmFyIGVidGsgPSByZXF1aXJlKCdldnBfYnl0ZXN0b2tleScpCnZhciBTdHJlYW1DaXBoZXIgPSByZXF1aXJlKCcuL3N0cmVhbUNpcGhlcicpCnZhciBBdXRoQ2lwaGVyID0gcmVxdWlyZSgnLi9hdXRoQ2lwaGVyJykKaW5oZXJpdHMoQ2lwaGVyLCBUcmFuc2Zvcm0pCmZ1bmN0aW9uIENpcGhlciAobW9kZSwga2V5LCBpdikgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBDaXBoZXIpKSB7CiAgICByZXR1cm4gbmV3IENpcGhlcihtb2RlLCBrZXksIGl2KQogIH0KICBUcmFuc2Zvcm0uY2FsbCh0aGlzKQogIHRoaXMuX2NhY2hlID0gbmV3IFNwbGl0dGVyKCkKICB0aGlzLl9jaXBoZXIgPSBuZXcgYWVzLkFFUyhrZXkpCiAgdGhpcy5fcHJldiA9IG5ldyBCdWZmZXIoaXYubGVuZ3RoKQogIGl2LmNvcHkodGhpcy5fcHJldikKICB0aGlzLl9tb2RlID0gbW9kZQogIHRoaXMuX2F1dG9wYWRkaW5nID0gdHJ1ZQp9CkNpcGhlci5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgdGhpcy5fY2FjaGUuYWRkKGRhdGEpCiAgdmFyIGNodW5rCiAgdmFyIHRoaW5nCiAgdmFyIG91dCA9IFtdCiAgd2hpbGUgKChjaHVuayA9IHRoaXMuX2NhY2hlLmdldCgpKSkgewogICAgdGhpbmcgPSB0aGlzLl9tb2RlLmVuY3J5cHQodGhpcywgY2h1bmspCiAgICBvdXQucHVzaCh0aGluZykKICB9CiAgcmV0dXJuIEJ1ZmZlci5jb25jYXQob3V0KQp9CkNpcGhlci5wcm90b3R5cGUuX2ZpbmFsID0gZnVuY3Rpb24gKCkgewogIHZhciBjaHVuayA9IHRoaXMuX2NhY2hlLmZsdXNoKCkKICBpZiAodGhpcy5fYXV0b3BhZGRpbmcpIHsKICAgIGNodW5rID0gdGhpcy5fbW9kZS5lbmNyeXB0KHRoaXMsIGNodW5rKQogICAgdGhpcy5fY2lwaGVyLnNjcnViKCkKICAgIHJldHVybiBjaHVuawogIH0gZWxzZSBpZiAoY2h1bmsudG9TdHJpbmcoJ2hleCcpICE9PSAnMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAnKSB7CiAgICB0aGlzLl9jaXBoZXIuc2NydWIoKQogICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIG5vdCBtdWx0aXBsZSBvZiBibG9jayBsZW5ndGgnKQogIH0KfQpDaXBoZXIucHJvdG90eXBlLnNldEF1dG9QYWRkaW5nID0gZnVuY3Rpb24gKHNldFRvKSB7CiAgdGhpcy5fYXV0b3BhZGRpbmcgPSAhIXNldFRvCiAgcmV0dXJuIHRoaXMKfQoKZnVuY3Rpb24gU3BsaXR0ZXIgKCkgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTcGxpdHRlcikpIHsKICAgIHJldHVybiBuZXcgU3BsaXR0ZXIoKQogIH0KICB0aGlzLmNhY2hlID0gbmV3IEJ1ZmZlcignJykKfQpTcGxpdHRlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGRhdGEpIHsKICB0aGlzLmNhY2hlID0gQnVmZmVyLmNvbmNhdChbdGhpcy5jYWNoZSwgZGF0YV0pCn0KClNwbGl0dGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKHRoaXMuY2FjaGUubGVuZ3RoID4gMTUpIHsKICAgIHZhciBvdXQgPSB0aGlzLmNhY2hlLnNsaWNlKDAsIDE2KQogICAgdGhpcy5jYWNoZSA9IHRoaXMuY2FjaGUuc2xpY2UoMTYpCiAgICByZXR1cm4gb3V0CiAgfQogIHJldHVybiBudWxsCn0KU3BsaXR0ZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBsZW4gPSAxNiAtIHRoaXMuY2FjaGUubGVuZ3RoCiAgdmFyIHBhZEJ1ZmYgPSBuZXcgQnVmZmVyKGxlbikKCiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIHBhZEJ1ZmYud3JpdGVVSW50OChsZW4sIGkpCiAgfQogIHZhciBvdXQgPSBCdWZmZXIuY29uY2F0KFt0aGlzLmNhY2hlLCBwYWRCdWZmXSkKICByZXR1cm4gb3V0Cn0KdmFyIG1vZGVsaXN0ID0gewogIEVDQjogcmVxdWlyZSgnLi9tb2Rlcy9lY2InKSwKICBDQkM6IHJlcXVpcmUoJy4vbW9kZXMvY2JjJyksCiAgQ0ZCOiByZXF1aXJlKCcuL21vZGVzL2NmYicpLAogIENGQjg6IHJlcXVpcmUoJy4vbW9kZXMvY2ZiOCcpLAogIENGQjE6IHJlcXVpcmUoJy4vbW9kZXMvY2ZiMScpLAogIE9GQjogcmVxdWlyZSgnLi9tb2Rlcy9vZmInKSwKICBDVFI6IHJlcXVpcmUoJy4vbW9kZXMvY3RyJyksCiAgR0NNOiByZXF1aXJlKCcuL21vZGVzL2N0cicpCn0KCmZ1bmN0aW9uIGNyZWF0ZUNpcGhlcml2IChzdWl0ZSwgcGFzc3dvcmQsIGl2KSB7CiAgdmFyIGNvbmZpZyA9IG1vZGVzW3N1aXRlLnRvTG93ZXJDYXNlKCldCiAgaWYgKCFjb25maWcpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgc3VpdGUgdHlwZScpCiAgfQogIGlmICh0eXBlb2YgaXYgPT09ICdzdHJpbmcnKSB7CiAgICBpdiA9IG5ldyBCdWZmZXIoaXYpCiAgfQogIGlmICh0eXBlb2YgcGFzc3dvcmQgPT09ICdzdHJpbmcnKSB7CiAgICBwYXNzd29yZCA9IG5ldyBCdWZmZXIocGFzc3dvcmQpCiAgfQogIGlmIChwYXNzd29yZC5sZW5ndGggIT09IGNvbmZpZy5rZXkgLyA4KSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGtleSBsZW5ndGggJyArIHBhc3N3b3JkLmxlbmd0aCkKICB9CiAgaWYgKGl2Lmxlbmd0aCAhPT0gY29uZmlnLml2KSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGl2IGxlbmd0aCAnICsgaXYubGVuZ3RoKQogIH0KICBpZiAoY29uZmlnLnR5cGUgPT09ICdzdHJlYW0nKSB7CiAgICByZXR1cm4gbmV3IFN0cmVhbUNpcGhlcihtb2RlbGlzdFtjb25maWcubW9kZV0sIHBhc3N3b3JkLCBpdikKICB9IGVsc2UgaWYgKGNvbmZpZy50eXBlID09PSAnYXV0aCcpIHsKICAgIHJldHVybiBuZXcgQXV0aENpcGhlcihtb2RlbGlzdFtjb25maWcubW9kZV0sIHBhc3N3b3JkLCBpdikKICB9CiAgcmV0dXJuIG5ldyBDaXBoZXIobW9kZWxpc3RbY29uZmlnLm1vZGVdLCBwYXNzd29yZCwgaXYpCn0KZnVuY3Rpb24gY3JlYXRlQ2lwaGVyIChzdWl0ZSwgcGFzc3dvcmQpIHsKICB2YXIgY29uZmlnID0gbW9kZXNbc3VpdGUudG9Mb3dlckNhc2UoKV0KICBpZiAoIWNvbmZpZykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9CiAgdmFyIGtleXMgPSBlYnRrKHBhc3N3b3JkLCBmYWxzZSwgY29uZmlnLmtleSwgY29uZmlnLml2KQogIHJldHVybiBjcmVhdGVDaXBoZXJpdihzdWl0ZSwga2V5cy5rZXksIGtleXMuaXYpCn0KCmV4cG9ydHMuY3JlYXRlQ2lwaGVyaXYgPSBjcmVhdGVDaXBoZXJpdgpleHBvcnRzLmNyZWF0ZUNpcGhlciA9IGNyZWF0ZUNpcGhlcgoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYWVzIjo0NCwiLi9hdXRoQ2lwaGVyIjo0NSwiLi9tb2RlcyI6NTAsIi4vbW9kZXMvY2JjIjo1MSwiLi9tb2Rlcy9jZmIiOjUyLCIuL21vZGVzL2NmYjEiOjUzLCIuL21vZGVzL2NmYjgiOjU0LCIuL21vZGVzL2N0ciI6NTUsIi4vbW9kZXMvZWNiIjo1NiwiLi9tb2Rlcy9vZmIiOjU3LCIuL3N0cmVhbUNpcGhlciI6NTgsImJ1ZmZlciI6NzAsImNpcGhlci1iYXNlIjo3OSwiZXZwX2J5dGVzdG9rZXkiOjExOSwiaW5oZXJpdHMiOjEyOH1dLDQ5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgemVyb3MgPSBuZXcgQnVmZmVyKDE2KQp6ZXJvcy5maWxsKDApCm1vZHVsZS5leHBvcnRzID0gR0hBU0gKZnVuY3Rpb24gR0hBU0ggKGtleSkgewogIHRoaXMuaCA9IGtleQogIHRoaXMuc3RhdGUgPSBuZXcgQnVmZmVyKDE2KQogIHRoaXMuc3RhdGUuZmlsbCgwKQogIHRoaXMuY2FjaGUgPSBuZXcgQnVmZmVyKCcnKQp9Ci8vIGZyb20gaHR0cDovL2JpdHdpc2VzaGlmdGxlZnQuZ2l0aHViLmlvL3NqY2wvZG9jL3N5bWJvbHMvc3JjL2NvcmVfZ2NtLmpzLmh0bWwKLy8gYnkgSnVobyBWw6Row6QtSGVydHR1YQpHSEFTSC5wcm90b3R5cGUuZ2hhc2ggPSBmdW5jdGlvbiAoYmxvY2spIHsKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGJsb2NrLmxlbmd0aCkgewogICAgdGhpcy5zdGF0ZVtpXSBePSBibG9ja1tpXQogIH0KICB0aGlzLl9tdWx0aXBseSgpCn0KCkdIQVNILnByb3RvdHlwZS5fbXVsdGlwbHkgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIFZpID0gdG9BcnJheSh0aGlzLmgpCiAgdmFyIFppID0gWzAsIDAsIDAsIDBdCiAgdmFyIGosIHhpLCBsc2JfVmkKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IDEyOCkgewogICAgeGkgPSAodGhpcy5zdGF0ZVt+fihpIC8gOCldICYgKDEgPDwgKDcgLSBpICUgOCkpKSAhPT0gMAogICAgaWYgKHhpKSB7CiAgICAgIC8vIFpfaSsxID0gWl9pIF4gVl9pCiAgICAgIFppID0geG9yKFppLCBWaSkKICAgIH0KCiAgICAvLyBTdG9yZSB0aGUgdmFsdWUgb2YgTFNCKFZfaSkKICAgIGxzYl9WaSA9IChWaVszXSAmIDEpICE9PSAwCgogICAgLy8gVl9pKzEgPSBWX2kgPj4gMQogICAgZm9yIChqID0gMzsgaiA+IDA7IGotLSkgewogICAgICBWaVtqXSA9IChWaVtqXSA+Pj4gMSkgfCAoKFZpW2ogLSAxXSAmIDEpIDw8IDMxKQogICAgfQogICAgVmlbMF0gPSBWaVswXSA+Pj4gMQoKICAgIC8vIElmIExTQihWX2kpIGlzIDEsIFZfaSsxID0gKFZfaSA+PiAxKSBeIFIKICAgIGlmIChsc2JfVmkpIHsKICAgICAgVmlbMF0gPSBWaVswXSBeICgweGUxIDw8IDI0KQogICAgfQogIH0KICB0aGlzLnN0YXRlID0gZnJvbUFycmF5KFppKQp9CkdIQVNILnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoYnVmKSB7CiAgdGhpcy5jYWNoZSA9IEJ1ZmZlci5jb25jYXQoW3RoaXMuY2FjaGUsIGJ1Zl0pCiAgdmFyIGNodW5rCiAgd2hpbGUgKHRoaXMuY2FjaGUubGVuZ3RoID49IDE2KSB7CiAgICBjaHVuayA9IHRoaXMuY2FjaGUuc2xpY2UoMCwgMTYpCiAgICB0aGlzLmNhY2hlID0gdGhpcy5jYWNoZS5zbGljZSgxNikKICAgIHRoaXMuZ2hhc2goY2h1bmspCiAgfQp9CkdIQVNILnByb3RvdHlwZS5maW5hbCA9IGZ1bmN0aW9uIChhYmwsIGJsKSB7CiAgaWYgKHRoaXMuY2FjaGUubGVuZ3RoKSB7CiAgICB0aGlzLmdoYXNoKEJ1ZmZlci5jb25jYXQoW3RoaXMuY2FjaGUsIHplcm9zXSwgMTYpKQogIH0KICB0aGlzLmdoYXNoKGZyb21BcnJheShbCiAgICAwLCBhYmwsCiAgICAwLCBibAogIF0pKQogIHJldHVybiB0aGlzLnN0YXRlCn0KCmZ1bmN0aW9uIHRvQXJyYXkgKGJ1ZikgewogIHJldHVybiBbCiAgICBidWYucmVhZFVJbnQzMkJFKDApLAogICAgYnVmLnJlYWRVSW50MzJCRSg0KSwKICAgIGJ1Zi5yZWFkVUludDMyQkUoOCksCiAgICBidWYucmVhZFVJbnQzMkJFKDEyKQogIF0KfQpmdW5jdGlvbiBmcm9tQXJyYXkgKG91dCkgewogIG91dCA9IG91dC5tYXAoZml4dXBfdWludDMyKQogIHZhciBidWYgPSBuZXcgQnVmZmVyKDE2KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFswXSwgMCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbMV0sIDQpCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzJdLCA4KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFszXSwgMTIpCiAgcmV0dXJuIGJ1Zgp9CnZhciB1aW50X21heCA9IE1hdGgucG93KDIsIDMyKQpmdW5jdGlvbiBmaXh1cF91aW50MzIgKHgpIHsKICB2YXIgcmV0LCB4X3BvcwogIHJldCA9IHggPiB1aW50X21heCB8fCB4IDwgMCA/ICh4X3BvcyA9IE1hdGguYWJzKHgpICUgdWludF9tYXgsIHggPCAwID8gdWludF9tYXggLSB4X3BvcyA6IHhfcG9zKSA6IHgKICByZXR1cm4gcmV0Cn0KZnVuY3Rpb24geG9yIChhLCBiKSB7CiAgcmV0dXJuIFsKICAgIGFbMF0gXiBiWzBdLAogICAgYVsxXSBeIGJbMV0sCiAgICBhWzJdIF4gYlsyXSwKICAgIGFbM10gXiBiWzNdCiAgXQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MH1dLDUwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKZXhwb3J0c1snYWVzLTEyOC1lY2InXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAwLAogIG1vZGU6ICdFQ0InLAogIHR5cGU6ICdibG9jaycKfQpleHBvcnRzWydhZXMtMTkyLWVjYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxOTIsCiAgaXY6IDAsCiAgbW9kZTogJ0VDQicsCiAgdHlwZTogJ2Jsb2NrJwp9CmV4cG9ydHNbJ2Flcy0yNTYtZWNiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMCwKICBtb2RlOiAnRUNCJywKICB0eXBlOiAnYmxvY2snCn0KZXhwb3J0c1snYWVzLTEyOC1jYmMnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxNiwKICBtb2RlOiAnQ0JDJywKICB0eXBlOiAnYmxvY2snCn0KZXhwb3J0c1snYWVzLTE5Mi1jYmMnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTkyLAogIGl2OiAxNiwKICBtb2RlOiAnQ0JDJywKICB0eXBlOiAnYmxvY2snCn0KZXhwb3J0c1snYWVzLTI1Ni1jYmMnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMjU2LAogIGl2OiAxNiwKICBtb2RlOiAnQ0JDJywKICB0eXBlOiAnYmxvY2snCn0KZXhwb3J0c1snYWVzMTI4J10gPSBleHBvcnRzWydhZXMtMTI4LWNiYyddCmV4cG9ydHNbJ2FlczE5MiddID0gZXhwb3J0c1snYWVzLTE5Mi1jYmMnXQpleHBvcnRzWydhZXMyNTYnXSA9IGV4cG9ydHNbJ2Flcy0yNTYtY2JjJ10KZXhwb3J0c1snYWVzLTEyOC1jZmInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxNiwKICBtb2RlOiAnQ0ZCJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xOTItY2ZiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTYsCiAgbW9kZTogJ0NGQicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMjU2LWNmYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAyNTYsCiAgaXY6IDE2LAogIG1vZGU6ICdDRkInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTEyOC1jZmI4J10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDEyOCwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjgnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTE5Mi1jZmI4J10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjgnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTI1Ni1jZmI4J10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjgnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTEyOC1jZmIxJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDEyOCwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjEnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTE5Mi1jZmIxJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjEnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTI1Ni1jZmIxJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjEnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTEyOC1vZmInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxNiwKICBtb2RlOiAnT0ZCJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xOTItb2ZiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTYsCiAgbW9kZTogJ09GQicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMjU2LW9mYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAyNTYsCiAgaXY6IDE2LAogIG1vZGU6ICdPRkInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTEyOC1jdHInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxNiwKICBtb2RlOiAnQ1RSJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xOTItY3RyJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTYsCiAgbW9kZTogJ0NUUicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMjU2LWN0ciddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAyNTYsCiAgaXY6IDE2LAogIG1vZGU6ICdDVFInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTEyOC1nY20nXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxMiwKICBtb2RlOiAnR0NNJywKICB0eXBlOiAnYXV0aCcKfQpleHBvcnRzWydhZXMtMTkyLWdjbSddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxOTIsCiAgaXY6IDEyLAogIG1vZGU6ICdHQ00nLAogIHR5cGU6ICdhdXRoJwp9CmV4cG9ydHNbJ2Flcy0yNTYtZ2NtJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMTIsCiAgbW9kZTogJ0dDTScsCiAgdHlwZTogJ2F1dGgnCn0KCn0se31dLDUxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIHhvciA9IHJlcXVpcmUoJ2J1ZmZlci14b3InKQoKZXhwb3J0cy5lbmNyeXB0ID0gZnVuY3Rpb24gKHNlbGYsIGJsb2NrKSB7CiAgdmFyIGRhdGEgPSB4b3IoYmxvY2ssIHNlbGYuX3ByZXYpCgogIHNlbGYuX3ByZXYgPSBzZWxmLl9jaXBoZXIuZW5jcnlwdEJsb2NrKGRhdGEpCiAgcmV0dXJuIHNlbGYuX3ByZXYKfQoKZXhwb3J0cy5kZWNyeXB0ID0gZnVuY3Rpb24gKHNlbGYsIGJsb2NrKSB7CiAgdmFyIHBhZCA9IHNlbGYuX3ByZXYKCiAgc2VsZi5fcHJldiA9IGJsb2NrCiAgdmFyIG91dCA9IHNlbGYuX2NpcGhlci5kZWNyeXB0QmxvY2soYmxvY2spCgogIHJldHVybiB4b3Iob3V0LCBwYWQpCn0KCn0seyJidWZmZXIteG9yIjo3OH1dLDUyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgeG9yID0gcmVxdWlyZSgnYnVmZmVyLXhvcicpCgpleHBvcnRzLmVuY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgZGF0YSwgZGVjcnlwdCkgewogIHZhciBvdXQgPSBuZXcgQnVmZmVyKCcnKQogIHZhciBsZW4KCiAgd2hpbGUgKGRhdGEubGVuZ3RoKSB7CiAgICBpZiAoc2VsZi5fY2FjaGUubGVuZ3RoID09PSAwKSB7CiAgICAgIHNlbGYuX2NhY2hlID0gc2VsZi5fY2lwaGVyLmVuY3J5cHRCbG9jayhzZWxmLl9wcmV2KQogICAgICBzZWxmLl9wcmV2ID0gbmV3IEJ1ZmZlcignJykKICAgIH0KCiAgICBpZiAoc2VsZi5fY2FjaGUubGVuZ3RoIDw9IGRhdGEubGVuZ3RoKSB7CiAgICAgIGxlbiA9IHNlbGYuX2NhY2hlLmxlbmd0aAogICAgICBvdXQgPSBCdWZmZXIuY29uY2F0KFtvdXQsIGVuY3J5cHRTdGFydChzZWxmLCBkYXRhLnNsaWNlKDAsIGxlbiksIGRlY3J5cHQpXSkKICAgICAgZGF0YSA9IGRhdGEuc2xpY2UobGVuKQogICAgfSBlbHNlIHsKICAgICAgb3V0ID0gQnVmZmVyLmNvbmNhdChbb3V0LCBlbmNyeXB0U3RhcnQoc2VsZiwgZGF0YSwgZGVjcnlwdCldKQogICAgICBicmVhawogICAgfQogIH0KCiAgcmV0dXJuIG91dAp9CmZ1bmN0aW9uIGVuY3J5cHRTdGFydCAoc2VsZiwgZGF0YSwgZGVjcnlwdCkgewogIHZhciBsZW4gPSBkYXRhLmxlbmd0aAogIHZhciBvdXQgPSB4b3IoZGF0YSwgc2VsZi5fY2FjaGUpCiAgc2VsZi5fY2FjaGUgPSBzZWxmLl9jYWNoZS5zbGljZShsZW4pCiAgc2VsZi5fcHJldiA9IEJ1ZmZlci5jb25jYXQoW3NlbGYuX3ByZXYsIGRlY3J5cHQgPyBkYXRhIDogb3V0XSkKICByZXR1cm4gb3V0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwLCJidWZmZXIteG9yIjo3OH1dLDUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewpmdW5jdGlvbiBlbmNyeXB0Qnl0ZSAoc2VsZiwgYnl0ZVBhcmFtLCBkZWNyeXB0KSB7CiAgdmFyIHBhZAogIHZhciBpID0gLTEKICB2YXIgbGVuID0gOAogIHZhciBvdXQgPSAwCiAgdmFyIGJpdCwgdmFsdWUKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBwYWQgPSBzZWxmLl9jaXBoZXIuZW5jcnlwdEJsb2NrKHNlbGYuX3ByZXYpCiAgICBiaXQgPSAoYnl0ZVBhcmFtICYgKDEgPDwgKDcgLSBpKSkpID8gMHg4MCA6IDAKICAgIHZhbHVlID0gcGFkWzBdIF4gYml0CiAgICBvdXQgKz0gKCh2YWx1ZSAmIDB4ODApID4+IChpICUgOCkpCiAgICBzZWxmLl9wcmV2ID0gc2hpZnRJbihzZWxmLl9wcmV2LCBkZWNyeXB0ID8gYml0IDogdmFsdWUpCiAgfQogIHJldHVybiBvdXQKfQpleHBvcnRzLmVuY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgY2h1bmssIGRlY3J5cHQpIHsKICB2YXIgbGVuID0gY2h1bmsubGVuZ3RoCiAgdmFyIG91dCA9IG5ldyBCdWZmZXIobGVuKQogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBvdXRbaV0gPSBlbmNyeXB0Qnl0ZShzZWxmLCBjaHVua1tpXSwgZGVjcnlwdCkKICB9CiAgcmV0dXJuIG91dAp9CmZ1bmN0aW9uIHNoaWZ0SW4gKGJ1ZmZlciwgdmFsdWUpIHsKICB2YXIgbGVuID0gYnVmZmVyLmxlbmd0aAogIHZhciBpID0gLTEKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcihidWZmZXIubGVuZ3RoKQogIGJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW2J1ZmZlciwgbmV3IEJ1ZmZlcihbdmFsdWVdKV0pCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgb3V0W2ldID0gYnVmZmVyW2ldIDw8IDEgfCBidWZmZXJbaSArIDFdID4+ICg3KQogIH0KICByZXR1cm4gb3V0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwfV0sNTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CmZ1bmN0aW9uIGVuY3J5cHRCeXRlIChzZWxmLCBieXRlUGFyYW0sIGRlY3J5cHQpIHsKICB2YXIgcGFkID0gc2VsZi5fY2lwaGVyLmVuY3J5cHRCbG9jayhzZWxmLl9wcmV2KQogIHZhciBvdXQgPSBwYWRbMF0gXiBieXRlUGFyYW0KICBzZWxmLl9wcmV2ID0gQnVmZmVyLmNvbmNhdChbc2VsZi5fcHJldi5zbGljZSgxKSwgbmV3IEJ1ZmZlcihbZGVjcnlwdCA/IGJ5dGVQYXJhbSA6IG91dF0pXSkKICByZXR1cm4gb3V0Cn0KZXhwb3J0cy5lbmNyeXB0ID0gZnVuY3Rpb24gKHNlbGYsIGNodW5rLCBkZWNyeXB0KSB7CiAgdmFyIGxlbiA9IGNodW5rLmxlbmd0aAogIHZhciBvdXQgPSBuZXcgQnVmZmVyKGxlbikKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgb3V0W2ldID0gZW5jcnlwdEJ5dGUoc2VsZiwgY2h1bmtbaV0sIGRlY3J5cHQpCiAgfQogIHJldHVybiBvdXQKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzB9XSw1NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHhvciA9IHJlcXVpcmUoJ2J1ZmZlci14b3InKQoKZnVuY3Rpb24gaW5jcjMyIChpdikgewogIHZhciBsZW4gPSBpdi5sZW5ndGgKICB2YXIgaXRlbQogIHdoaWxlIChsZW4tLSkgewogICAgaXRlbSA9IGl2LnJlYWRVSW50OChsZW4pCiAgICBpZiAoaXRlbSA9PT0gMjU1KSB7CiAgICAgIGl2LndyaXRlVUludDgoMCwgbGVuKQogICAgfSBlbHNlIHsKICAgICAgaXRlbSsrCiAgICAgIGl2LndyaXRlVUludDgoaXRlbSwgbGVuKQogICAgICBicmVhawogICAgfQogIH0KfQoKZnVuY3Rpb24gZ2V0QmxvY2sgKHNlbGYpIHsKICB2YXIgb3V0ID0gc2VsZi5fY2lwaGVyLmVuY3J5cHRCbG9jayhzZWxmLl9wcmV2KQogIGluY3IzMihzZWxmLl9wcmV2KQogIHJldHVybiBvdXQKfQoKZXhwb3J0cy5lbmNyeXB0ID0gZnVuY3Rpb24gKHNlbGYsIGNodW5rKSB7CiAgd2hpbGUgKHNlbGYuX2NhY2hlLmxlbmd0aCA8IGNodW5rLmxlbmd0aCkgewogICAgc2VsZi5fY2FjaGUgPSBCdWZmZXIuY29uY2F0KFtzZWxmLl9jYWNoZSwgZ2V0QmxvY2soc2VsZildKQogIH0KICB2YXIgcGFkID0gc2VsZi5fY2FjaGUuc2xpY2UoMCwgY2h1bmsubGVuZ3RoKQogIHNlbGYuX2NhY2hlID0gc2VsZi5fY2FjaGUuc2xpY2UoY2h1bmsubGVuZ3RoKQogIHJldHVybiB4b3IoY2h1bmssIHBhZCkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzAsImJ1ZmZlci14b3IiOjc4fV0sNTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzLmVuY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgYmxvY2spIHsKICByZXR1cm4gc2VsZi5fY2lwaGVyLmVuY3J5cHRCbG9jayhibG9jaykKfQpleHBvcnRzLmRlY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgYmxvY2spIHsKICByZXR1cm4gc2VsZi5fY2lwaGVyLmRlY3J5cHRCbG9jayhibG9jaykKfQoKfSx7fV0sNTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciB4b3IgPSByZXF1aXJlKCdidWZmZXIteG9yJykKCmZ1bmN0aW9uIGdldEJsb2NrIChzZWxmKSB7CiAgc2VsZi5fcHJldiA9IHNlbGYuX2NpcGhlci5lbmNyeXB0QmxvY2soc2VsZi5fcHJldikKICByZXR1cm4gc2VsZi5fcHJldgp9CgpleHBvcnRzLmVuY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgY2h1bmspIHsKICB3aGlsZSAoc2VsZi5fY2FjaGUubGVuZ3RoIDwgY2h1bmsubGVuZ3RoKSB7CiAgICBzZWxmLl9jYWNoZSA9IEJ1ZmZlci5jb25jYXQoW3NlbGYuX2NhY2hlLCBnZXRCbG9jayhzZWxmKV0pCiAgfQoKICB2YXIgcGFkID0gc2VsZi5fY2FjaGUuc2xpY2UoMCwgY2h1bmsubGVuZ3RoKQogIHNlbGYuX2NhY2hlID0gc2VsZi5fY2FjaGUuc2xpY2UoY2h1bmsubGVuZ3RoKQogIHJldHVybiB4b3IoY2h1bmssIHBhZCkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzAsImJ1ZmZlci14b3IiOjc4fV0sNTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBhZXMgPSByZXF1aXJlKCcuL2FlcycpCnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdjaXBoZXItYmFzZScpCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKCmluaGVyaXRzKFN0cmVhbUNpcGhlciwgVHJhbnNmb3JtKQptb2R1bGUuZXhwb3J0cyA9IFN0cmVhbUNpcGhlcgpmdW5jdGlvbiBTdHJlYW1DaXBoZXIgKG1vZGUsIGtleSwgaXYsIGRlY3J5cHQpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU3RyZWFtQ2lwaGVyKSkgewogICAgcmV0dXJuIG5ldyBTdHJlYW1DaXBoZXIobW9kZSwga2V5LCBpdikKICB9CiAgVHJhbnNmb3JtLmNhbGwodGhpcykKICB0aGlzLl9jaXBoZXIgPSBuZXcgYWVzLkFFUyhrZXkpCiAgdGhpcy5fcHJldiA9IG5ldyBCdWZmZXIoaXYubGVuZ3RoKQogIHRoaXMuX2NhY2hlID0gbmV3IEJ1ZmZlcignJykKICB0aGlzLl9zZWNDYWNoZSA9IG5ldyBCdWZmZXIoJycpCiAgdGhpcy5fZGVjcnlwdCA9IGRlY3J5cHQKICBpdi5jb3B5KHRoaXMuX3ByZXYpCiAgdGhpcy5fbW9kZSA9IG1vZGUKfQpTdHJlYW1DaXBoZXIucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoY2h1bmspIHsKICByZXR1cm4gdGhpcy5fbW9kZS5lbmNyeXB0KHRoaXMsIGNodW5rLCB0aGlzLl9kZWNyeXB0KQp9ClN0cmVhbUNpcGhlci5wcm90b3R5cGUuX2ZpbmFsID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2NpcGhlci5zY3J1YigpCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2FlcyI6NDQsImJ1ZmZlciI6NzAsImNpcGhlci1iYXNlIjo3OSwiaW5oZXJpdHMiOjEyOH1dLDU5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGVidGsgPSByZXF1aXJlKCdldnBfYnl0ZXN0b2tleScpCnZhciBhZXMgPSByZXF1aXJlKCdicm93c2VyaWZ5LWFlcy9icm93c2VyJykKdmFyIERFUyA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktZGVzJykKdmFyIGRlc01vZGVzID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1kZXMvbW9kZXMnKQp2YXIgYWVzTW9kZXMgPSByZXF1aXJlKCdicm93c2VyaWZ5LWFlcy9tb2RlcycpCmZ1bmN0aW9uIGNyZWF0ZUNpcGhlciAoc3VpdGUsIHBhc3N3b3JkKSB7CiAgdmFyIGtleUxlbiwgaXZMZW4KICBzdWl0ZSA9IHN1aXRlLnRvTG93ZXJDYXNlKCkKICBpZiAoYWVzTW9kZXNbc3VpdGVdKSB7CiAgICBrZXlMZW4gPSBhZXNNb2Rlc1tzdWl0ZV0ua2V5CiAgICBpdkxlbiA9IGFlc01vZGVzW3N1aXRlXS5pdgogIH0gZWxzZSBpZiAoZGVzTW9kZXNbc3VpdGVdKSB7CiAgICBrZXlMZW4gPSBkZXNNb2Rlc1tzdWl0ZV0ua2V5ICogOAogICAgaXZMZW4gPSBkZXNNb2Rlc1tzdWl0ZV0uaXYKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9CiAgdmFyIGtleXMgPSBlYnRrKHBhc3N3b3JkLCBmYWxzZSwga2V5TGVuLCBpdkxlbikKICByZXR1cm4gY3JlYXRlQ2lwaGVyaXYoc3VpdGUsIGtleXMua2V5LCBrZXlzLml2KQp9CmZ1bmN0aW9uIGNyZWF0ZURlY2lwaGVyIChzdWl0ZSwgcGFzc3dvcmQpIHsKICB2YXIga2V5TGVuLCBpdkxlbgogIHN1aXRlID0gc3VpdGUudG9Mb3dlckNhc2UoKQogIGlmIChhZXNNb2Rlc1tzdWl0ZV0pIHsKICAgIGtleUxlbiA9IGFlc01vZGVzW3N1aXRlXS5rZXkKICAgIGl2TGVuID0gYWVzTW9kZXNbc3VpdGVdLml2CiAgfSBlbHNlIGlmIChkZXNNb2Rlc1tzdWl0ZV0pIHsKICAgIGtleUxlbiA9IGRlc01vZGVzW3N1aXRlXS5rZXkgKiA4CiAgICBpdkxlbiA9IGRlc01vZGVzW3N1aXRlXS5pdgogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHN1aXRlIHR5cGUnKQogIH0KICB2YXIga2V5cyA9IGVidGsocGFzc3dvcmQsIGZhbHNlLCBrZXlMZW4sIGl2TGVuKQogIHJldHVybiBjcmVhdGVEZWNpcGhlcml2KHN1aXRlLCBrZXlzLmtleSwga2V5cy5pdikKfQoKZnVuY3Rpb24gY3JlYXRlQ2lwaGVyaXYgKHN1aXRlLCBrZXksIGl2KSB7CiAgc3VpdGUgPSBzdWl0ZS50b0xvd2VyQ2FzZSgpCiAgaWYgKGFlc01vZGVzW3N1aXRlXSkgewogICAgcmV0dXJuIGFlcy5jcmVhdGVDaXBoZXJpdihzdWl0ZSwga2V5LCBpdikKICB9IGVsc2UgaWYgKGRlc01vZGVzW3N1aXRlXSkgewogICAgcmV0dXJuIG5ldyBERVMoewogICAgICBrZXk6IGtleSwKICAgICAgaXY6IGl2LAogICAgICBtb2RlOiBzdWl0ZQogICAgfSkKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9Cn0KZnVuY3Rpb24gY3JlYXRlRGVjaXBoZXJpdiAoc3VpdGUsIGtleSwgaXYpIHsKICBzdWl0ZSA9IHN1aXRlLnRvTG93ZXJDYXNlKCkKICBpZiAoYWVzTW9kZXNbc3VpdGVdKSB7CiAgICByZXR1cm4gYWVzLmNyZWF0ZURlY2lwaGVyaXYoc3VpdGUsIGtleSwgaXYpCiAgfSBlbHNlIGlmIChkZXNNb2Rlc1tzdWl0ZV0pIHsKICAgIHJldHVybiBuZXcgREVTKHsKICAgICAga2V5OiBrZXksCiAgICAgIGl2OiBpdiwKICAgICAgbW9kZTogc3VpdGUsCiAgICAgIGRlY3J5cHQ6IHRydWUKICAgIH0pCiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgc3VpdGUgdHlwZScpCiAgfQp9CmV4cG9ydHMuY3JlYXRlQ2lwaGVyID0gZXhwb3J0cy5DaXBoZXIgPSBjcmVhdGVDaXBoZXIKZXhwb3J0cy5jcmVhdGVDaXBoZXJpdiA9IGV4cG9ydHMuQ2lwaGVyaXYgPSBjcmVhdGVDaXBoZXJpdgpleHBvcnRzLmNyZWF0ZURlY2lwaGVyID0gZXhwb3J0cy5EZWNpcGhlciA9IGNyZWF0ZURlY2lwaGVyCmV4cG9ydHMuY3JlYXRlRGVjaXBoZXJpdiA9IGV4cG9ydHMuRGVjaXBoZXJpdiA9IGNyZWF0ZURlY2lwaGVyaXYKZnVuY3Rpb24gZ2V0Q2lwaGVycyAoKSB7CiAgcmV0dXJuIE9iamVjdC5rZXlzKGRlc01vZGVzKS5jb25jYXQoYWVzLmdldENpcGhlcnMoKSkKfQpleHBvcnRzLmxpc3RDaXBoZXJzID0gZXhwb3J0cy5nZXRDaXBoZXJzID0gZ2V0Q2lwaGVycwoKfSx7ImJyb3dzZXJpZnktYWVzL2Jyb3dzZXIiOjQ2LCJicm93c2VyaWZ5LWFlcy9tb2RlcyI6NTAsImJyb3dzZXJpZnktZGVzIjo2MCwiYnJvd3NlcmlmeS1kZXMvbW9kZXMiOjYxLCJldnBfYnl0ZXN0b2tleSI6MTE5fV0sNjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBDaXBoZXJCYXNlID0gcmVxdWlyZSgnY2lwaGVyLWJhc2UnKQp2YXIgZGVzID0gcmVxdWlyZSgnZGVzLmpzJykKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQoKdmFyIG1vZGVzID0gewogICdkZXMtZWRlMy1jYmMnOiBkZXMuQ0JDLmluc3RhbnRpYXRlKGRlcy5FREUpLAogICdkZXMtZWRlMyc6IGRlcy5FREUsCiAgJ2Rlcy1lZGUtY2JjJzogZGVzLkNCQy5pbnN0YW50aWF0ZShkZXMuRURFKSwKICAnZGVzLWVkZSc6IGRlcy5FREUsCiAgJ2Rlcy1jYmMnOiBkZXMuQ0JDLmluc3RhbnRpYXRlKGRlcy5ERVMpLAogICdkZXMtZWNiJzogZGVzLkRFUwp9Cm1vZGVzLmRlcyA9IG1vZGVzWydkZXMtY2JjJ10KbW9kZXMuZGVzMyA9IG1vZGVzWydkZXMtZWRlMy1jYmMnXQptb2R1bGUuZXhwb3J0cyA9IERFUwppbmhlcml0cyhERVMsIENpcGhlckJhc2UpCmZ1bmN0aW9uIERFUyAob3B0cykgewogIENpcGhlckJhc2UuY2FsbCh0aGlzKQogIHZhciBtb2RlTmFtZSA9IG9wdHMubW9kZS50b0xvd2VyQ2FzZSgpCiAgdmFyIG1vZGUgPSBtb2Rlc1ttb2RlTmFtZV0KICB2YXIgdHlwZQogIGlmIChvcHRzLmRlY3J5cHQpIHsKICAgIHR5cGUgPSAnZGVjcnlwdCcKICB9IGVsc2UgewogICAgdHlwZSA9ICdlbmNyeXB0JwogIH0KICB2YXIga2V5ID0gb3B0cy5rZXkKICBpZiAobW9kZU5hbWUgPT09ICdkZXMtZWRlJyB8fCBtb2RlTmFtZSA9PT0gJ2Rlcy1lZGUtY2JjJykgewogICAga2V5ID0gQnVmZmVyLmNvbmNhdChba2V5LCBrZXkuc2xpY2UoMCwgOCldKQogIH0KICB2YXIgaXYgPSBvcHRzLml2CiAgdGhpcy5fZGVzID0gbW9kZS5jcmVhdGUoewogICAga2V5OiBrZXksCiAgICBpdjogaXYsCiAgICB0eXBlOiB0eXBlCiAgfSkKfQpERVMucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkgewogIHJldHVybiBuZXcgQnVmZmVyKHRoaXMuX2Rlcy51cGRhdGUoZGF0YSkpCn0KREVTLnByb3RvdHlwZS5fZmluYWwgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIG5ldyBCdWZmZXIodGhpcy5fZGVzLmZpbmFsKCkpCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwLCJjaXBoZXItYmFzZSI6NzksImRlcy5qcyI6ODcsImluaGVyaXRzIjoxMjh9XSw2MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmV4cG9ydHNbJ2Rlcy1lY2InXSA9IHsKICBrZXk6IDgsCiAgaXY6IDAKfQpleHBvcnRzWydkZXMtY2JjJ10gPSBleHBvcnRzLmRlcyA9IHsKICBrZXk6IDgsCiAgaXY6IDgKfQpleHBvcnRzWydkZXMtZWRlMy1jYmMnXSA9IGV4cG9ydHMuZGVzMyA9IHsKICBrZXk6IDI0LAogIGl2OiA4Cn0KZXhwb3J0c1snZGVzLWVkZTMnXSA9IHsKICBrZXk6IDI0LAogIGl2OiAwCn0KZXhwb3J0c1snZGVzLWVkZS1jYmMnXSA9IHsKICBrZXk6IDE2LAogIGl2OiA4Cn0KZXhwb3J0c1snZGVzLWVkZSddID0gewogIGtleTogMTYsCiAgaXY6IDAKfQoKfSx7fV0sNjI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBibiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciByYW5kb21CeXRlcyA9IHJlcXVpcmUoJ3JhbmRvbWJ5dGVzJyk7Cm1vZHVsZS5leHBvcnRzID0gY3J0OwpmdW5jdGlvbiBibGluZChwcml2KSB7CiAgdmFyIHIgPSBnZXRyKHByaXYpOwogIHZhciBibGluZGVyID0gci50b1JlZChibi5tb250KHByaXYubW9kdWx1cykpCiAgLnJlZFBvdyhuZXcgYm4ocHJpdi5wdWJsaWNFeHBvbmVudCkpLmZyb21SZWQoKTsKICByZXR1cm4gewogICAgYmxpbmRlcjogYmxpbmRlciwKICAgIHVuYmxpbmRlcjpyLmludm0ocHJpdi5tb2R1bHVzKQogIH07Cn0KZnVuY3Rpb24gY3J0KG1zZywgcHJpdikgewogIHZhciBibGluZHMgPSBibGluZChwcml2KTsKICB2YXIgbGVuID0gcHJpdi5tb2R1bHVzLmJ5dGVMZW5ndGgoKTsKICB2YXIgbW9kID0gYm4ubW9udChwcml2Lm1vZHVsdXMpOwogIHZhciBibGluZGVkID0gbmV3IGJuKG1zZykubXVsKGJsaW5kcy5ibGluZGVyKS51bW9kKHByaXYubW9kdWx1cyk7CiAgdmFyIGMxID0gYmxpbmRlZC50b1JlZChibi5tb250KHByaXYucHJpbWUxKSk7CiAgdmFyIGMyID0gYmxpbmRlZC50b1JlZChibi5tb250KHByaXYucHJpbWUyKSk7CiAgdmFyIHFpbnYgPSBwcml2LmNvZWZmaWNpZW50OwogIHZhciBwID0gcHJpdi5wcmltZTE7CiAgdmFyIHEgPSBwcml2LnByaW1lMjsKICB2YXIgbTEgPSBjMS5yZWRQb3cocHJpdi5leHBvbmVudDEpOwogIHZhciBtMiA9IGMyLnJlZFBvdyhwcml2LmV4cG9uZW50Mik7CiAgbTEgPSBtMS5mcm9tUmVkKCk7CiAgbTIgPSBtMi5mcm9tUmVkKCk7CiAgdmFyIGggPSBtMS5pc3ViKG0yKS5pbXVsKHFpbnYpLnVtb2QocCk7CiAgaC5pbXVsKHEpOwogIG0yLmlhZGQoaCk7CiAgcmV0dXJuIG5ldyBCdWZmZXIobTIuaW11bChibGluZHMudW5ibGluZGVyKS51bW9kKHByaXYubW9kdWx1cykudG9BcnJheShmYWxzZSwgbGVuKSk7Cn0KY3J0LmdldHIgPSBnZXRyOwpmdW5jdGlvbiBnZXRyKHByaXYpIHsKICB2YXIgbGVuID0gcHJpdi5tb2R1bHVzLmJ5dGVMZW5ndGgoKTsKICB2YXIgciA9IG5ldyBibihyYW5kb21CeXRlcyhsZW4pKTsKICB3aGlsZSAoci5jbXAocHJpdi5tb2R1bHVzKSA+PSAgMCB8fCAhci51bW9kKHByaXYucHJpbWUxKSB8fCAhci51bW9kKHByaXYucHJpbWUyKSkgewogICAgciA9IG5ldyBibihyYW5kb21CeXRlcyhsZW4pKTsKICB9CiAgcmV0dXJuIHI7Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJibi5qcyI6NDEsImJ1ZmZlciI6NzAsInJhbmRvbWJ5dGVzIjoxNDZ9XSw2MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKJ3VzZSBzdHJpY3QnCmV4cG9ydHNbJ1JTQS1TSEEyMjQnXSA9IGV4cG9ydHMuc2hhMjI0V2l0aFJTQUVuY3J5cHRpb24gPSB7CiAgc2lnbjogJ3JzYScsCiAgaGFzaDogJ3NoYTIyNCcsCiAgaWQ6IG5ldyBCdWZmZXIoJzMwMmQzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwNDA1MDAwNDFjJywgJ2hleCcpCn0KZXhwb3J0c1snUlNBLVNIQTI1NiddID0gZXhwb3J0cy5zaGEyNTZXaXRoUlNBRW5jcnlwdGlvbiA9IHsKICBzaWduOiAncnNhJywKICBoYXNoOiAnc2hhMjU2JywKICBpZDogbmV3IEJ1ZmZlcignMzAzMTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAxMDUwMDA0MjAnLCAnaGV4JykKfQpleHBvcnRzWydSU0EtU0hBMzg0J10gPSBleHBvcnRzLnNoYTM4NFdpdGhSU0FFbmNyeXB0aW9uID0gewogIHNpZ246ICdyc2EnLAogIGhhc2g6ICdzaGEzODQnLAogIGlkOiBuZXcgQnVmZmVyKCczMDQxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDIwNTAwMDQzMCcsICdoZXgnKQp9CmV4cG9ydHNbJ1JTQS1TSEE1MTInXSA9IGV4cG9ydHMuc2hhNTEyV2l0aFJTQUVuY3J5cHRpb24gPSB7CiAgc2lnbjogJ3JzYScsCiAgaGFzaDogJ3NoYTUxMicsCiAgaWQ6IG5ldyBCdWZmZXIoJzMwNTEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMzA1MDAwNDQwJywgJ2hleCcpCn0KZXhwb3J0c1snUlNBLVNIQTEnXSA9IHsKICBzaWduOiAncnNhJywKICBoYXNoOiAnc2hhMScsCiAgaWQ6IG5ldyBCdWZmZXIoJzMwMjEzMDA5MDYwNTJiMGUwMzAyMWEwNTAwMDQxNCcsICdoZXgnKQp9CmV4cG9ydHNbJ2VjZHNhLXdpdGgtU0hBMSddID0gewogIHNpZ246ICdlY2RzYScsCiAgaGFzaDogJ3NoYTEnLAogIGlkOiBuZXcgQnVmZmVyKCcnLCAnaGV4JykKfQoKZXhwb3J0cy5EU0EgPSBleHBvcnRzWydEU0EtU0hBMSddID0gZXhwb3J0c1snRFNBLVNIQSddID0gewogIHNpZ246ICdkc2EnLAogIGhhc2g6ICdzaGExJywKICBpZDogbmV3IEJ1ZmZlcignJywgJ2hleCcpCn0KZXhwb3J0c1snRFNBLVNIQTIyNCddID0gZXhwb3J0c1snRFNBLVdJVEgtU0hBMjI0J10gPSB7CiAgc2lnbjogJ2RzYScsCiAgaGFzaDogJ3NoYTIyNCcsCiAgaWQ6IG5ldyBCdWZmZXIoJycsICdoZXgnKQp9CmV4cG9ydHNbJ0RTQS1TSEEyNTYnXSA9IGV4cG9ydHNbJ0RTQS1XSVRILVNIQTI1NiddID0gewogIHNpZ246ICdkc2EnLAogIGhhc2g6ICdzaGEyNTYnLAogIGlkOiBuZXcgQnVmZmVyKCcnLCAnaGV4JykKfQpleHBvcnRzWydEU0EtU0hBMzg0J10gPSBleHBvcnRzWydEU0EtV0lUSC1TSEEzODQnXSA9IHsKICBzaWduOiAnZHNhJywKICBoYXNoOiAnc2hhMzg0JywKICBpZDogbmV3IEJ1ZmZlcignJywgJ2hleCcpCn0KZXhwb3J0c1snRFNBLVNIQTUxMiddID0gZXhwb3J0c1snRFNBLVdJVEgtU0hBNTEyJ10gPSB7CiAgc2lnbjogJ2RzYScsCiAgaGFzaDogJ3NoYTUxMicsCiAgaWQ6IG5ldyBCdWZmZXIoJycsICdoZXgnKQp9CmV4cG9ydHNbJ0RTQS1SSVBFTUQxNjAnXSA9IHsKICBzaWduOiAnZHNhJywKICBoYXNoOiAncm1kMTYwJywKICBpZDogbmV3IEJ1ZmZlcignJywgJ2hleCcpCn0KZXhwb3J0c1snUlNBLVJJUEVNRDE2MCddID0gZXhwb3J0cy5yaXBlbWQxNjBXaXRoUlNBID0gewogIHNpZ246ICdyc2EnLAogIGhhc2g6ICdybWQxNjAnLAogIGlkOiBuZXcgQnVmZmVyKCczMDIxMzAwOTA2MDUyYjI0MDMwMjAxMDUwMDA0MTQnLCAnaGV4JykKfQpleHBvcnRzWydSU0EtTUQ1J10gPSBleHBvcnRzLm1kNVdpdGhSU0FFbmNyeXB0aW9uID0gewogIHNpZ246ICdyc2EnLAogIGhhc2g6ICdtZDUnLAogIGlkOiBuZXcgQnVmZmVyKCczMDIwMzAwYzA2MDgyYTg2NDg4NmY3MGQwMjA1MDUwMDA0MTAnLCAnaGV4JykKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzB9XSw2NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIF9hbGdvcyA9IHJlcXVpcmUoJy4vYWxnb3MnKQp2YXIgY3JlYXRlSGFzaCA9IHJlcXVpcmUoJ2NyZWF0ZS1oYXNoJykKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQp2YXIgc2lnbiA9IHJlcXVpcmUoJy4vc2lnbicpCnZhciBzdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKQp2YXIgdmVyaWZ5ID0gcmVxdWlyZSgnLi92ZXJpZnknKQoKdmFyIGFsZ29zID0ge30KT2JqZWN0LmtleXMoX2FsZ29zKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICBhbGdvc1trZXldID0gYWxnb3Nba2V5LnRvTG93ZXJDYXNlKCldID0gX2FsZ29zW2tleV0KfSkKCmZ1bmN0aW9uIFNpZ24gKGFsZ29yaXRobSkgewogIHN0cmVhbS5Xcml0YWJsZS5jYWxsKHRoaXMpCgogIHZhciBkYXRhID0gYWxnb3NbYWxnb3JpdGhtXQogIGlmICghZGF0YSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIG1lc3NhZ2UgZGlnZXN0JykKICB9CgogIHRoaXMuX2hhc2hUeXBlID0gZGF0YS5oYXNoCiAgdGhpcy5faGFzaCA9IGNyZWF0ZUhhc2goZGF0YS5oYXNoKQogIHRoaXMuX3RhZyA9IGRhdGEuaWQKICB0aGlzLl9zaWduVHlwZSA9IGRhdGEuc2lnbgp9CmluaGVyaXRzKFNpZ24sIHN0cmVhbS5Xcml0YWJsZSkKClNpZ24ucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIF93cml0ZSAoZGF0YSwgXywgZG9uZSkgewogIHRoaXMuX2hhc2gudXBkYXRlKGRhdGEpCiAgZG9uZSgpCn0KClNpZ24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAoZGF0YSwgZW5jKSB7CiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykgewogICAgZGF0YSA9IG5ldyBCdWZmZXIoZGF0YSwgZW5jKQogIH0KCiAgdGhpcy5faGFzaC51cGRhdGUoZGF0YSkKICByZXR1cm4gdGhpcwp9CgpTaWduLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gc2lnbk1ldGhvZCAoa2V5LCBlbmMpIHsKICB0aGlzLmVuZCgpCiAgdmFyIGhhc2ggPSB0aGlzLl9oYXNoLmRpZ2VzdCgpCiAgdmFyIHNpZyA9IHNpZ24oQnVmZmVyLmNvbmNhdChbdGhpcy5fdGFnLCBoYXNoXSksIGtleSwgdGhpcy5faGFzaFR5cGUsIHRoaXMuX3NpZ25UeXBlKQoKICByZXR1cm4gZW5jID8gc2lnLnRvU3RyaW5nKGVuYykgOiBzaWcKfQoKZnVuY3Rpb24gVmVyaWZ5IChhbGdvcml0aG0pIHsKICBzdHJlYW0uV3JpdGFibGUuY2FsbCh0aGlzKQoKICB2YXIgZGF0YSA9IGFsZ29zW2FsZ29yaXRobV0KICBpZiAoIWRhdGEpIHsKICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBtZXNzYWdlIGRpZ2VzdCcpCiAgfQoKICB0aGlzLl9oYXNoID0gY3JlYXRlSGFzaChkYXRhLmhhc2gpCiAgdGhpcy5fdGFnID0gZGF0YS5pZAogIHRoaXMuX3NpZ25UeXBlID0gZGF0YS5zaWduCn0KaW5oZXJpdHMoVmVyaWZ5LCBzdHJlYW0uV3JpdGFibGUpCgpWZXJpZnkucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIF93cml0ZSAoZGF0YSwgXywgZG9uZSkgewogIHRoaXMuX2hhc2gudXBkYXRlKGRhdGEpCgogIGRvbmUoKQp9CgpWZXJpZnkucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAoZGF0YSwgZW5jKSB7CiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykgewogICAgZGF0YSA9IG5ldyBCdWZmZXIoZGF0YSwgZW5jKQogIH0KCiAgdGhpcy5faGFzaC51cGRhdGUoZGF0YSkKICByZXR1cm4gdGhpcwp9CgpWZXJpZnkucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeU1ldGhvZCAoa2V5LCBzaWcsIGVuYykgewogIGlmICh0eXBlb2Ygc2lnID09PSAnc3RyaW5nJykgewogICAgc2lnID0gbmV3IEJ1ZmZlcihzaWcsIGVuYykKICB9CgogIHRoaXMuZW5kKCkKICB2YXIgaGFzaCA9IHRoaXMuX2hhc2guZGlnZXN0KCkKCiAgcmV0dXJuIHZlcmlmeShzaWcsIEJ1ZmZlci5jb25jYXQoW3RoaXMuX3RhZywgaGFzaF0pLCBrZXksIHRoaXMuX3NpZ25UeXBlKQp9CgpmdW5jdGlvbiBjcmVhdGVTaWduIChhbGdvcml0aG0pIHsKICByZXR1cm4gbmV3IFNpZ24oYWxnb3JpdGhtKQp9CgpmdW5jdGlvbiBjcmVhdGVWZXJpZnkgKGFsZ29yaXRobSkgewogIHJldHVybiBuZXcgVmVyaWZ5KGFsZ29yaXRobSkKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgU2lnbjogY3JlYXRlU2lnbiwKICBWZXJpZnk6IGNyZWF0ZVZlcmlmeSwKICBjcmVhdGVTaWduOiBjcmVhdGVTaWduLAogIGNyZWF0ZVZlcmlmeTogY3JlYXRlVmVyaWZ5Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2FsZ29zIjo2MywiLi9zaWduIjo2NiwiLi92ZXJpZnkiOjY3LCJidWZmZXIiOjcwLCJjcmVhdGUtaGFzaCI6ODIsImluaGVyaXRzIjoxMjgsInN0cmVhbSI6MTcwfV0sNjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCcKZXhwb3J0c1snMS4zLjEzMi4wLjEwJ10gPSAnc2VjcDI1NmsxJwoKZXhwb3J0c1snMS4zLjEzMi4wLjMzJ10gPSAncDIyNCcKCmV4cG9ydHNbJzEuMi44NDAuMTAwNDUuMy4xLjEnXSA9ICdwMTkyJwoKZXhwb3J0c1snMS4yLjg0MC4xMDA0NS4zLjEuNyddID0gJ3AyNTYnCgpleHBvcnRzWycxLjMuMTMyLjAuMzQnXSA9ICdwMzg0JwoKZXhwb3J0c1snMS4zLjEzMi4wLjM1J10gPSAncDUyMScKCn0se31dLDY2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBtdWNoIG9mIHRoaXMgYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvc2VsZi1zaWduZWQvYmxvYi9naC1wYWdlcy9saWIvcnNhLmpzCnZhciBjcmVhdGVIbWFjID0gcmVxdWlyZSgnY3JlYXRlLWhtYWMnKQp2YXIgY3J0ID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1yc2EnKQp2YXIgY3VydmVzID0gcmVxdWlyZSgnLi9jdXJ2ZXMnKQp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCdlbGxpcHRpYycpCnZhciBwYXJzZUtleXMgPSByZXF1aXJlKCdwYXJzZS1hc24xJykKCnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJykKdmFyIEVDID0gZWxsaXB0aWMuZWMKCmZ1bmN0aW9uIHNpZ24gKGhhc2gsIGtleSwgaGFzaFR5cGUsIHNpZ25UeXBlKSB7CiAgdmFyIHByaXYgPSBwYXJzZUtleXMoa2V5KQogIGlmIChwcml2LmN1cnZlKSB7CiAgICBpZiAoc2lnblR5cGUgIT09ICdlY2RzYScpIHRocm93IG5ldyBFcnJvcignd3JvbmcgcHJpdmF0ZSBrZXkgdHlwZScpCgogICAgcmV0dXJuIGVjU2lnbihoYXNoLCBwcml2KQogIH0gZWxzZSBpZiAocHJpdi50eXBlID09PSAnZHNhJykgewogICAgaWYgKHNpZ25UeXBlICE9PSAnZHNhJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIHByaXZhdGUga2V5IHR5cGUnKQogICAgfQogICAgcmV0dXJuIGRzYVNpZ24oaGFzaCwgcHJpdiwgaGFzaFR5cGUpCiAgfSBlbHNlIHsKICAgIGlmIChzaWduVHlwZSAhPT0gJ3JzYScpIHRocm93IG5ldyBFcnJvcignd3JvbmcgcHJpdmF0ZSBrZXkgdHlwZScpCiAgfQoKICB2YXIgbGVuID0gcHJpdi5tb2R1bHVzLmJ5dGVMZW5ndGgoKQogIHZhciBwYWQgPSBbIDAsIDEgXQogIHdoaWxlIChoYXNoLmxlbmd0aCArIHBhZC5sZW5ndGggKyAxIDwgbGVuKSB7CiAgICBwYWQucHVzaCgweGZmKQogIH0KICBwYWQucHVzaCgweDAwKQogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgaGFzaC5sZW5ndGgpIHsKICAgIHBhZC5wdXNoKGhhc2hbaV0pCiAgfQoKICB2YXIgb3V0ID0gY3J0KHBhZCwgcHJpdikKICByZXR1cm4gb3V0Cn0KCmZ1bmN0aW9uIGVjU2lnbiAoaGFzaCwgcHJpdikgewogIHZhciBjdXJ2ZUlkID0gY3VydmVzW3ByaXYuY3VydmUuam9pbignLicpXQogIGlmICghY3VydmVJZCkgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGN1cnZlICcgKyBwcml2LmN1cnZlLmpvaW4oJy4nKSkKCiAgdmFyIGN1cnZlID0gbmV3IEVDKGN1cnZlSWQpCiAgdmFyIGtleSA9IGN1cnZlLmdlbktleVBhaXIoKQoKICBrZXkuX2ltcG9ydFByaXZhdGUocHJpdi5wcml2YXRlS2V5KQogIHZhciBvdXQgPSBrZXkuc2lnbihoYXNoKQoKICByZXR1cm4gbmV3IEJ1ZmZlcihvdXQudG9ERVIoKSkKfQoKZnVuY3Rpb24gZHNhU2lnbiAoaGFzaCwgcHJpdiwgYWxnbykgewogIHZhciB4ID0gcHJpdi5wYXJhbXMucHJpdl9rZXkKICB2YXIgcCA9IHByaXYucGFyYW1zLnAKICB2YXIgcSA9IHByaXYucGFyYW1zLnEKICB2YXIgZyA9IHByaXYucGFyYW1zLmcKICB2YXIgciA9IG5ldyBCTigwKQogIHZhciBrCiAgdmFyIEggPSBiaXRzMmludChoYXNoLCBxKS5tb2QocSkKICB2YXIgcyA9IGZhbHNlCiAgdmFyIGt2ID0gZ2V0S2V5KHgsIHEsIGhhc2gsIGFsZ28pCiAgd2hpbGUgKHMgPT09IGZhbHNlKSB7CiAgICBrID0gbWFrZUtleShxLCBrdiwgYWxnbykKICAgIHIgPSBtYWtlUihnLCBrLCBwLCBxKQogICAgcyA9IGsuaW52bShxKS5pbXVsKEguYWRkKHgubXVsKHIpKSkubW9kKHEpCiAgICBpZiAoIXMuY21wbigwKSkgewogICAgICBzID0gZmFsc2UKICAgICAgciA9IG5ldyBCTigwKQogICAgfQogIH0KICByZXR1cm4gdG9ERVIociwgcykKfQoKZnVuY3Rpb24gdG9ERVIgKHIsIHMpIHsKICByID0gci50b0FycmF5KCkKICBzID0gcy50b0FycmF5KCkKCiAgLy8gUGFkIHZhbHVlcwogIGlmIChyWzBdICYgMHg4MCkgewogICAgciA9IFsgMCBdLmNvbmNhdChyKQogIH0KICAvLyBQYWQgdmFsdWVzCiAgaWYgKHNbMF0gJiAweDgwKSB7CiAgICBzID0gWzBdLmNvbmNhdChzKQogIH0KCiAgdmFyIHRvdGFsID0gci5sZW5ndGggKyBzLmxlbmd0aCArIDQKICB2YXIgcmVzID0gWyAweDMwLCB0b3RhbCwgMHgwMiwgci5sZW5ndGggXQogIHJlcyA9IHJlcy5jb25jYXQociwgWyAweDAyLCBzLmxlbmd0aCBdLCBzKQogIHJldHVybiBuZXcgQnVmZmVyKHJlcykKfQoKZnVuY3Rpb24gZ2V0S2V5ICh4LCBxLCBoYXNoLCBhbGdvKSB7CiAgeCA9IG5ldyBCdWZmZXIoeC50b0FycmF5KCkpCiAgaWYgKHgubGVuZ3RoIDwgcS5ieXRlTGVuZ3RoKCkpIHsKICAgIHZhciB6ZXJvcyA9IG5ldyBCdWZmZXIocS5ieXRlTGVuZ3RoKCkgLSB4Lmxlbmd0aCkKICAgIHplcm9zLmZpbGwoMCkKICAgIHggPSBCdWZmZXIuY29uY2F0KFt6ZXJvcywgeF0pCiAgfQogIHZhciBobGVuID0gaGFzaC5sZW5ndGgKICB2YXIgaGJpdHMgPSBiaXRzMm9jdGV0cyhoYXNoLCBxKQogIHZhciB2ID0gbmV3IEJ1ZmZlcihobGVuKQogIHYuZmlsbCgxKQogIHZhciBrID0gbmV3IEJ1ZmZlcihobGVuKQogIGsuZmlsbCgwKQogIGsgPSBjcmVhdGVIbWFjKGFsZ28sIGspCiAgICAudXBkYXRlKHYpCiAgICAudXBkYXRlKG5ldyBCdWZmZXIoWzBdKSkKICAgIC51cGRhdGUoeCkKICAgIC51cGRhdGUoaGJpdHMpCiAgICAuZGlnZXN0KCkKICB2ID0gY3JlYXRlSG1hYyhhbGdvLCBrKQogICAgLnVwZGF0ZSh2KQogICAgLmRpZ2VzdCgpCiAgayA9IGNyZWF0ZUhtYWMoYWxnbywgaykKICAgIC51cGRhdGUodikKICAgIC51cGRhdGUobmV3IEJ1ZmZlcihbMV0pKQogICAgLnVwZGF0ZSh4KQogICAgLnVwZGF0ZShoYml0cykKICAgIC5kaWdlc3QoKQogIHYgPSBjcmVhdGVIbWFjKGFsZ28sIGspCiAgICAudXBkYXRlKHYpCiAgICAuZGlnZXN0KCkKICByZXR1cm4gewogICAgazogaywKICAgIHY6IHYKICB9Cn0KCmZ1bmN0aW9uIGJpdHMyaW50IChvYml0cywgcSkgewogIHZhciBiaXRzID0gbmV3IEJOKG9iaXRzKQogIHZhciBzaGlmdCA9IChvYml0cy5sZW5ndGggPDwgMykgLSBxLmJpdExlbmd0aCgpCiAgaWYgKHNoaWZ0ID4gMCkgewogICAgYml0cy5pc2hybihzaGlmdCkKICB9CiAgcmV0dXJuIGJpdHMKfQoKZnVuY3Rpb24gYml0czJvY3RldHMgKGJpdHMsIHEpIHsKICBiaXRzID0gYml0czJpbnQoYml0cywgcSkKICBiaXRzID0gYml0cy5tb2QocSkKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcihiaXRzLnRvQXJyYXkoKSkKICBpZiAob3V0Lmxlbmd0aCA8IHEuYnl0ZUxlbmd0aCgpKSB7CiAgICB2YXIgemVyb3MgPSBuZXcgQnVmZmVyKHEuYnl0ZUxlbmd0aCgpIC0gb3V0Lmxlbmd0aCkKICAgIHplcm9zLmZpbGwoMCkKICAgIG91dCA9IEJ1ZmZlci5jb25jYXQoW3plcm9zLCBvdXRdKQogIH0KICByZXR1cm4gb3V0Cn0KCmZ1bmN0aW9uIG1ha2VLZXkgKHEsIGt2LCBhbGdvKSB7CiAgdmFyIHQsIGsKCiAgZG8gewogICAgdCA9IG5ldyBCdWZmZXIoJycpCgogICAgd2hpbGUgKHQubGVuZ3RoICogOCA8IHEuYml0TGVuZ3RoKCkpIHsKICAgICAga3YudiA9IGNyZWF0ZUhtYWMoYWxnbywga3YuaykKICAgICAgICAudXBkYXRlKGt2LnYpCiAgICAgICAgLmRpZ2VzdCgpCiAgICAgIHQgPSBCdWZmZXIuY29uY2F0KFt0LCBrdi52XSkKICAgIH0KCiAgICBrID0gYml0czJpbnQodCwgcSkKICAgIGt2LmsgPSBjcmVhdGVIbWFjKGFsZ28sIGt2LmspCiAgICAgIC51cGRhdGUoa3YudikKICAgICAgLnVwZGF0ZShuZXcgQnVmZmVyKFswXSkpCiAgICAgIC5kaWdlc3QoKQogICAga3YudiA9IGNyZWF0ZUhtYWMoYWxnbywga3YuaykKICAgICAgLnVwZGF0ZShrdi52KQogICAgICAuZGlnZXN0KCkKICB9IHdoaWxlIChrLmNtcChxKSAhPT0gLTEpCgogIHJldHVybiBrCn0KCmZ1bmN0aW9uIG1ha2VSIChnLCBrLCBwLCBxKSB7CiAgcmV0dXJuIGcudG9SZWQoQk4ubW9udChwKSkucmVkUG93KGspLmZyb21SZWQoKS5tb2QocSkKfQoKbW9kdWxlLmV4cG9ydHMgPSBzaWduCm1vZHVsZS5leHBvcnRzLmdldEtleSA9IGdldEtleQptb2R1bGUuZXhwb3J0cy5tYWtlS2V5ID0gbWFrZUtleQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vY3VydmVzIjo2NSwiYm4uanMiOjQxLCJicm93c2VyaWZ5LXJzYSI6NjIsImJ1ZmZlciI6NzAsImNyZWF0ZS1obWFjIjo4NSwiZWxsaXB0aWMiOjEwMiwicGFyc2UtYXNuMSI6MTM2fV0sNjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8vIG11Y2ggb2YgdGhpcyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9zZWxmLXNpZ25lZC9ibG9iL2doLXBhZ2VzL2xpYi9yc2EuanMKdmFyIGN1cnZlcyA9IHJlcXVpcmUoJy4vY3VydmVzJykKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnZWxsaXB0aWMnKQp2YXIgcGFyc2VLZXlzID0gcmVxdWlyZSgncGFyc2UtYXNuMScpCgp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpCnZhciBFQyA9IGVsbGlwdGljLmVjCgpmdW5jdGlvbiB2ZXJpZnkgKHNpZywgaGFzaCwga2V5LCBzaWduVHlwZSkgewogIHZhciBwdWIgPSBwYXJzZUtleXMoa2V5KQogIGlmIChwdWIudHlwZSA9PT0gJ2VjJykgewogICAgaWYgKHNpZ25UeXBlICE9PSAnZWNkc2EnKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignd3JvbmcgcHVibGljIGtleSB0eXBlJykKICAgIH0KICAgIHJldHVybiBlY1ZlcmlmeShzaWcsIGhhc2gsIHB1YikKICB9IGVsc2UgaWYgKHB1Yi50eXBlID09PSAnZHNhJykgewogICAgaWYgKHNpZ25UeXBlICE9PSAnZHNhJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIHB1YmxpYyBrZXkgdHlwZScpCiAgICB9CiAgICByZXR1cm4gZHNhVmVyaWZ5KHNpZywgaGFzaCwgcHViKQogIH0gZWxzZSB7CiAgICBpZiAoc2lnblR5cGUgIT09ICdyc2EnKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignd3JvbmcgcHVibGljIGtleSB0eXBlJykKICAgIH0KICB9CiAgdmFyIGxlbiA9IHB1Yi5tb2R1bHVzLmJ5dGVMZW5ndGgoKQogIHZhciBwYWQgPSBbIDEgXQogIHZhciBwYWROdW0gPSAwCiAgd2hpbGUgKGhhc2gubGVuZ3RoICsgcGFkLmxlbmd0aCArIDIgPCBsZW4pIHsKICAgIHBhZC5wdXNoKDB4ZmYpCiAgICBwYWROdW0rKwogIH0KICBwYWQucHVzaCgweDAwKQogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgaGFzaC5sZW5ndGgpIHsKICAgIHBhZC5wdXNoKGhhc2hbaV0pCiAgfQogIHBhZCA9IG5ldyBCdWZmZXIocGFkKQogIHZhciByZWQgPSBCTi5tb250KHB1Yi5tb2R1bHVzKQogIHNpZyA9IG5ldyBCTihzaWcpLnRvUmVkKHJlZCkKCiAgc2lnID0gc2lnLnJlZFBvdyhuZXcgQk4ocHViLnB1YmxpY0V4cG9uZW50KSkKCiAgc2lnID0gbmV3IEJ1ZmZlcihzaWcuZnJvbVJlZCgpLnRvQXJyYXkoKSkKICB2YXIgb3V0ID0gMAogIGlmIChwYWROdW0gPCA4KSB7CiAgICBvdXQgPSAxCiAgfQogIGxlbiA9IE1hdGgubWluKHNpZy5sZW5ndGgsIHBhZC5sZW5ndGgpCiAgaWYgKHNpZy5sZW5ndGggIT09IHBhZC5sZW5ndGgpIHsKICAgIG91dCA9IDEKICB9CgogIGkgPSAtMQogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIG91dCB8PSAoc2lnW2ldIF4gcGFkW2ldKQogIH0KICByZXR1cm4gb3V0ID09PSAwCn0KCmZ1bmN0aW9uIGVjVmVyaWZ5IChzaWcsIGhhc2gsIHB1YikgewogIHZhciBjdXJ2ZUlkID0gY3VydmVzW3B1Yi5kYXRhLmFsZ29yaXRobS5jdXJ2ZS5qb2luKCcuJyldCiAgaWYgKCFjdXJ2ZUlkKSB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gY3VydmUgJyArIHB1Yi5kYXRhLmFsZ29yaXRobS5jdXJ2ZS5qb2luKCcuJykpCgogIHZhciBjdXJ2ZSA9IG5ldyBFQyhjdXJ2ZUlkKQogIHZhciBwdWJrZXkgPSBwdWIuZGF0YS5zdWJqZWN0UHJpdmF0ZUtleS5kYXRhCgogIHJldHVybiBjdXJ2ZS52ZXJpZnkoaGFzaCwgc2lnLCBwdWJrZXkpCn0KCmZ1bmN0aW9uIGRzYVZlcmlmeSAoc2lnLCBoYXNoLCBwdWIpIHsKICB2YXIgcCA9IHB1Yi5kYXRhLnAKICB2YXIgcSA9IHB1Yi5kYXRhLnEKICB2YXIgZyA9IHB1Yi5kYXRhLmcKICB2YXIgeSA9IHB1Yi5kYXRhLnB1Yl9rZXkKICB2YXIgdW5wYWNrZWQgPSBwYXJzZUtleXMuc2lnbmF0dXJlLmRlY29kZShzaWcsICdkZXInKQogIHZhciBzID0gdW5wYWNrZWQucwogIHZhciByID0gdW5wYWNrZWQucgogIGNoZWNrVmFsdWUocywgcSkKICBjaGVja1ZhbHVlKHIsIHEpCiAgdmFyIG1vbnRwID0gQk4ubW9udChwKQogIHZhciB3ID0gcy5pbnZtKHEpCiAgdmFyIHYgPSBnLnRvUmVkKG1vbnRwKQogICAgLnJlZFBvdyhuZXcgQk4oaGFzaCkubXVsKHcpLm1vZChxKSkKICAgIC5mcm9tUmVkKCkKICAgIC5tdWwoCiAgICAgIHkudG9SZWQobW9udHApCiAgICAgICAgLnJlZFBvdyhyLm11bCh3KS5tb2QocSkpCiAgICAgICAgLmZyb21SZWQoKQogICkubW9kKHApLm1vZChxKQogIHJldHVybiAhdi5jbXAocikKfQoKZnVuY3Rpb24gY2hlY2tWYWx1ZSAoYiwgcSkgewogIGlmIChiLmNtcG4oMCkgPD0gMCkgewogICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHNpZycpCiAgfQogIGlmIChiLmNtcChxKSA+PSBxKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc2lnJykKICB9Cn0KCm1vZHVsZS5leHBvcnRzID0gdmVyaWZ5Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9jdXJ2ZXMiOjY1LCJibi5qcyI6NDEsImJ1ZmZlciI6NzAsImVsbGlwdGljIjoxMDIsInBhcnNlLWFzbjEiOjEzNn1dLDY4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQzXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NDN9XSw2OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JwoKZXhwb3J0cy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5CmV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IGZyb21CeXRlQXJyYXkKCnZhciBsb29rdXAgPSBbXQp2YXIgcmV2TG9va3VwID0gW10KdmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheQoKZnVuY3Rpb24gaW5pdCAoKSB7CiAgdmFyIGNvZGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLycKICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkgewogICAgbG9va3VwW2ldID0gY29kZVtpXQogICAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpCiAgfQoKICByZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjIKICByZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjMKfQoKaW5pdCgpCgpmdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7CiAgdmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnIKICB2YXIgbGVuID0gYjY0Lmxlbmd0aAoKICBpZiAobGVuICUgNCA+IDApIHsKICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpCiAgfQoKICAvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKQogIC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXQKICAvLyByZXByZXNlbnQgb25lIGJ5dGUKICAvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXMKICAvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlCiAgcGxhY2VIb2xkZXJzID0gYjY0W2xlbiAtIDJdID09PSAnPScgPyAyIDogYjY0W2xlbiAtIDFdID09PSAnPScgPyAxIDogMAoKICAvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKQoKICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzCiAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBsZW4gLSA0IDogbGVuCgogIHZhciBMID0gMAoKICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7CiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV0KICAgIGFycltMKytdID0gKHRtcCA+PiAxNikgJiAweEZGCiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9CgogIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHsKICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkgewogICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpCiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9CgogIHJldHVybiBhcnIKfQoKZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHsKICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl0KfQoKZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7CiAgdmFyIHRtcAogIHZhciBvdXRwdXQgPSBbXQogIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7CiAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pCiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSkKICB9CiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKQp9CgpmdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkgewogIHZhciB0bXAKICB2YXIgbGVuID0gdWludDgubGVuZ3RoCiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzCiAgdmFyIG91dHB1dCA9ICcnCiAgdmFyIHBhcnRzID0gW10KICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDMKCiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlcgogIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHsKICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpCiAgfQoKICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzCiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHsKICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdCiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAyXQogICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl0KICAgIG91dHB1dCArPSAnPT0nCiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7CiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pCiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAxMF0KICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdCiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXQogICAgb3V0cHV0ICs9ICc9JwogIH0KCiAgcGFydHMucHVzaChvdXRwdXQpCgogIHJldHVybiBwYXJ0cy5qb2luKCcnKQp9Cgp9LHt9XSw3MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyohCiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLgogKgogKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz4KICogQGxpY2Vuc2UgIE1JVAogKi8KLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi8KCid1c2Ugc3RyaWN0JwoKdmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpCnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpCnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpCgpleHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlcgpleHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyCmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MApCdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb24KCnZhciByb290UGFyZW50ID0ge30KCi8qKgogKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOgogKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KQogKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpCiAqCiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKywKICogT3BlcmEgMTEuNissIGlPUyA0LjIrLgogKgogKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuCiAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLgogKgogKiBOb3RlOgogKgogKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLAogKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguCiAqCiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLgogKgogKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZgogKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuCgogKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleQogKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS4KICovCkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZAogID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQKICA6IHR5cGVkQXJyYXlTdXBwb3J0KCkKCmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHsKICB0cnkgewogICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpCiAgICBhcnIuZm9vID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfQogICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWQKICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YAogICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgCiAgfSBjYXRjaCAoZSkgewogICAgcmV0dXJuIGZhbHNlCiAgfQp9CgpmdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHsKICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQKICAgID8gMHg3ZmZmZmZmZgogICAgOiAweDNmZmZmZmZmCn0KCi8qKgogKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXIKICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZgogKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzCiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0CiAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuCiAqCiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC4KICovCmZ1bmN0aW9uIEJ1ZmZlciAoYXJnKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHsKICAgIC8vIEF2b2lkIGdvaW5nIHRocm91Z2ggYW4gQXJndW1lbnRzQWRhcHRvclRyYW1wb2xpbmUgaW4gdGhlIGNvbW1vbiBjYXNlLgogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGFyZ3VtZW50c1sxXSkKICAgIHJldHVybiBuZXcgQnVmZmVyKGFyZykKICB9CgogIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXMubGVuZ3RoID0gMAogICAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWQKICB9CgogIC8vIENvbW1vbiBjYXNlLgogIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewogICAgcmV0dXJuIGZyb21OdW1iZXIodGhpcywgYXJnKQogIH0KCiAgLy8gU2xpZ2h0bHkgbGVzcyBjb21tb24gY2FzZS4KICBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHsKICAgIHJldHVybiBmcm9tU3RyaW5nKHRoaXMsIGFyZywgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiAndXRmOCcpCiAgfQoKICAvLyBVbnVzdWFsLgogIHJldHVybiBmcm9tT2JqZWN0KHRoaXMsIGFyZykKfQoKLy8gVE9ETzogTGVnYWN5LCBub3QgbmVlZGVkIGFueW1vcmUuIFJlbW92ZSBpbiBuZXh0IG1ham9yIHZlcnNpb24uCkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHsKICBhcnIuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZQogIHJldHVybiBhcnIKfQoKZnVuY3Rpb24gZnJvbU51bWJlciAodGhhdCwgbGVuZ3RoKSB7CiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChsZW5ndGgpIHwgMCkKICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIHRoYXRbaV0gPSAwCiAgICB9CiAgfQogIHJldHVybiB0aGF0Cn0KCmZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHsKICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIGVuY29kaW5nID0gJ3V0ZjgnCgogIC8vIEFzc3VtcHRpb246IGJ5dGVMZW5ndGgoKSByZXR1cm4gdmFsdWUgaXMgYWx3YXlzIDwga01heExlbmd0aC4KICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDAKICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKQoKICB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpCiAgcmV0dXJuIHRoYXQKfQoKZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqZWN0KSB7CiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmplY3QpKSByZXR1cm4gZnJvbUJ1ZmZlcih0aGF0LCBvYmplY3QpCgogIGlmIChpc0FycmF5KG9iamVjdCkpIHJldHVybiBmcm9tQXJyYXkodGhhdCwgb2JqZWN0KQoKICBpZiAob2JqZWN0ID09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ211c3Qgc3RhcnQgd2l0aCBudW1iZXIsIGJ1ZmZlciwgYXJyYXkgb3Igc3RyaW5nJykKICB9CgogIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7CiAgICBpZiAob2JqZWN0LmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CiAgICAgIHJldHVybiBmcm9tVHlwZWRBcnJheSh0aGF0LCBvYmplY3QpCiAgICB9CiAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCBvYmplY3QpCiAgICB9CiAgfQoKICBpZiAob2JqZWN0Lmxlbmd0aCkgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqZWN0KQoKICByZXR1cm4gZnJvbUpzb25PYmplY3QodGhhdCwgb2JqZWN0KQp9CgpmdW5jdGlvbiBmcm9tQnVmZmVyICh0aGF0LCBidWZmZXIpIHsKICB2YXIgbGVuZ3RoID0gY2hlY2tlZChidWZmZXIubGVuZ3RoKSB8IDAKICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKQogIGJ1ZmZlci5jb3B5KHRoYXQsIDAsIDAsIGxlbmd0aCkKICByZXR1cm4gdGhhdAp9CgpmdW5jdGlvbiBmcm9tQXJyYXkgKHRoYXQsIGFycmF5KSB7CiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDAKICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKQogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHsKICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NQogIH0KICByZXR1cm4gdGhhdAp9CgovLyBEdXBsaWNhdGUgb2YgZnJvbUFycmF5KCkgdG8ga2VlcCBmcm9tQXJyYXkoKSBtb25vbW9ycGhpYy4KZnVuY3Rpb24gZnJvbVR5cGVkQXJyYXkgKHRoYXQsIGFycmF5KSB7CiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDAKICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKQogIC8vIFRydW5jYXRpbmcgdGhlIGVsZW1lbnRzIGlzIHByb2JhYmx5IG5vdCB3aGF0IHBlb3BsZSBleHBlY3QgZnJvbSB0eXBlZAogIC8vIGFycmF5cyB3aXRoIEJZVEVTX1BFUl9FTEVNRU5UID4gMSBidXQgaXQncyBjb21wYXRpYmxlIHdpdGggdGhlIGJlaGF2aW9yCiAgLy8gb2YgdGhlIG9sZCBCdWZmZXIgY29uc3RydWN0b3IuCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgewogICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1CiAgfQogIHJldHVybiB0aGF0Cn0KCmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXkpIHsKICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXIKCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2UKICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShhcnJheSkKICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZQogIH0gZWxzZSB7CiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzCiAgICB0aGF0ID0gZnJvbVR5cGVkQXJyYXkodGhhdCwgbmV3IFVpbnQ4QXJyYXkoYXJyYXkpKQogIH0KICByZXR1cm4gdGhhdAp9CgpmdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkgewogIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwCiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aCkKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7CiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTUKICB9CiAgcmV0dXJuIHRoYXQKfQoKLy8gRGVzZXJpYWxpemUgeyB0eXBlOiAnQnVmZmVyJywgZGF0YTogWzEsMiwzLC4uLl0gfSBpbnRvIGEgQnVmZmVyIG9iamVjdC4KLy8gUmV0dXJucyBhIHplcm8tbGVuZ3RoIGJ1ZmZlciBmb3IgaW5wdXRzIHRoYXQgZG9uJ3QgY29uZm9ybSB0byB0aGUgc3BlYy4KZnVuY3Rpb24gZnJvbUpzb25PYmplY3QgKHRoYXQsIG9iamVjdCkgewogIHZhciBhcnJheQogIHZhciBsZW5ndGggPSAwCgogIGlmIChvYmplY3QudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmplY3QuZGF0YSkpIHsKICAgIGFycmF5ID0gb2JqZWN0LmRhdGEKICAgIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDAKICB9CiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aCkKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgewogICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1CiAgfQogIHJldHVybiB0aGF0Cn0KCmlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGUKICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheQogIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuc3BlY2llcyAmJgogICAgICBCdWZmZXJbU3ltYm9sLnNwZWNpZXNdID09PSBCdWZmZXIpIHsKICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLCBTeW1ib2wuc3BlY2llcywgewogICAgICB2YWx1ZTogbnVsbCwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9KQogIH0KfSBlbHNlIHsKICAvLyBwcmUtc2V0IGZvciB2YWx1ZXMgdGhhdCBtYXkgZXhpc3QgaW4gdGhlIGZ1dHVyZQogIEJ1ZmZlci5wcm90b3R5cGUubGVuZ3RoID0gdW5kZWZpbmVkCiAgQnVmZmVyLnByb3RvdHlwZS5wYXJlbnQgPSB1bmRlZmluZWQKfQoKZnVuY3Rpb24gYWxsb2NhdGUgKHRoYXQsIGxlbmd0aCkgewogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlCiAgICB0aGF0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKQogICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlCiAgfSBlbHNlIHsKICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3MKICAgIHRoYXQubGVuZ3RoID0gbGVuZ3RoCiAgfQoKICB2YXIgZnJvbVBvb2wgPSBsZW5ndGggIT09IDAgJiYgbGVuZ3RoIDw9IEJ1ZmZlci5wb29sU2l6ZSA+Pj4gMQogIGlmIChmcm9tUG9vbCkgdGhhdC5wYXJlbnQgPSByb290UGFyZW50CgogIHJldHVybiB0aGF0Cn0KCmZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkgewogIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGhgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW4KICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLikKICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKQogIH0KICByZXR1cm4gbGVuZ3RoIHwgMAp9CgpmdW5jdGlvbiBTbG93QnVmZmVyIChzdWJqZWN0LCBlbmNvZGluZykgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTbG93QnVmZmVyKSkgcmV0dXJuIG5ldyBTbG93QnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKQoKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdWJqZWN0LCBlbmNvZGluZykKICBkZWxldGUgYnVmLnBhcmVudAogIHJldHVybiBidWYKfQoKQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHsKICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKQp9CgpCdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJykKICB9CgogIGlmIChhID09PSBiKSByZXR1cm4gMAoKICB2YXIgeCA9IGEubGVuZ3RoCiAgdmFyIHkgPSBiLmxlbmd0aAoKICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkgewogICAgaWYgKGFbaV0gIT09IGJbaV0pIHsKICAgICAgeCA9IGFbaV0KICAgICAgeSA9IGJbaV0KICAgICAgYnJlYWsKICAgIH0KICB9CgogIGlmICh4IDwgeSkgcmV0dXJuIC0xCiAgaWYgKHkgPCB4KSByZXR1cm4gMQogIHJldHVybiAwCn0KCkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHsKICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkgewogICAgY2FzZSAnaGV4JzoKICAgIGNhc2UgJ3V0ZjgnOgogICAgY2FzZSAndXRmLTgnOgogICAgY2FzZSAnYXNjaWknOgogICAgY2FzZSAnYmluYXJ5JzoKICAgIGNhc2UgJ2Jhc2U2NCc6CiAgICBjYXNlICdyYXcnOgogICAgY2FzZSAndWNzMic6CiAgICBjYXNlICd1Y3MtMic6CiAgICBjYXNlICd1dGYxNmxlJzoKICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgcmV0dXJuIHRydWUKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBmYWxzZQogIH0KfQoKQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7CiAgaWYgKCFpc0FycmF5KGxpc3QpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdsaXN0IGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycy4nKQoKICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiBuZXcgQnVmZmVyKDApCiAgfQoKICB2YXIgaQogIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkgewogICAgbGVuZ3RoID0gMAogICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoCiAgICB9CiAgfQoKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihsZW5ndGgpCiAgdmFyIHBvcyA9IDAKICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgdmFyIGl0ZW0gPSBsaXN0W2ldCiAgICBpdGVtLmNvcHkoYnVmLCBwb3MpCiAgICBwb3MgKz0gaXRlbS5sZW5ndGgKICB9CiAgcmV0dXJuIGJ1Zgp9CgpmdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7CiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSBzdHJpbmcgPSAnJyArIHN0cmluZwoKICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aAogIGlmIChsZW4gPT09IDApIHJldHVybiAwCgogIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvbgogIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlCiAgZm9yICg7OykgewogICAgc3dpdGNoIChlbmNvZGluZykgewogICAgICBjYXNlICdhc2NpaSc6CiAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgIC8vIERlcHJlY2F0ZWQKICAgICAgY2FzZSAncmF3JzoKICAgICAgY2FzZSAncmF3cyc6CiAgICAgICAgcmV0dXJuIGxlbgogICAgICBjYXNlICd1dGY4JzoKICAgICAgY2FzZSAndXRmLTgnOgogICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aAogICAgICBjYXNlICd1Y3MyJzoKICAgICAgY2FzZSAndWNzLTInOgogICAgICBjYXNlICd1dGYxNmxlJzoKICAgICAgY2FzZSAndXRmLTE2bGUnOgogICAgICAgIHJldHVybiBsZW4gKiAyCiAgICAgIGNhc2UgJ2hleCc6CiAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMQogICAgICBjYXNlICdiYXNlNjQnOgogICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjgKICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpCiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlCiAgICB9CiAgfQp9CkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aAoKZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkgewogIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlCgogIHN0YXJ0ID0gc3RhcnQgfCAwCiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID09PSBJbmZpbml0eSA/IHRoaXMubGVuZ3RoIDogZW5kIHwgMAoKICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4JwogIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMAogIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGgKICBpZiAoZW5kIDw9IHN0YXJ0KSByZXR1cm4gJycKCiAgd2hpbGUgKHRydWUpIHsKICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKICAgICAgY2FzZSAnaGV4JzoKICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCiAgICAgIGNhc2UgJ3V0ZjgnOgogICAgICBjYXNlICd1dGYtOCc6CiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgY2FzZSAnYXNjaWknOgogICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgogICAgICBjYXNlICdiaW5hcnknOgogICAgICAgIHJldHVybiBiaW5hcnlTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgY2FzZSAnYmFzZTY0JzoKICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCiAgICAgIGNhc2UgJ3VjczInOgogICAgICBjYXNlICd1Y3MtMic6CiAgICAgIGNhc2UgJ3V0ZjE2bGUnOgogICAgICBjYXNlICd1dGYtMTZsZSc6CiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgZGVmYXVsdDoKICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpCiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlCiAgICB9CiAgfQp9CgovLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdAovLyBCdWZmZXIgaW5zdGFuY2VzLgpCdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWUKCkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7CiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMAogIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJwogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aCkKICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKfQoKQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpCiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlCiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwCn0KCkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkgewogIHZhciBzdHIgPSAnJwogIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTCiAgaWYgKHRoaXMubGVuZ3RoID4gMCkgewogICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJykKICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICcKICB9CiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPicKfQoKQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYikgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJykKICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikKfQoKQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0KSB7CiAgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZgogIGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwCiAgYnl0ZU9mZnNldCA+Pj0gMAoKICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiAtMQogIGlmIChieXRlT2Zmc2V0ID49IHRoaXMubGVuZ3RoKSByZXR1cm4gLTEKCiAgLy8gTmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlcgogIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoICsgYnl0ZU9mZnNldCwgMCkKCiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7CiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xIC8vIHNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nIGFsd2F5cyBmYWlscwogICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCkKICB9CiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7CiAgICByZXR1cm4gYXJyYXlJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCkKICB9CiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCkKICAgIH0KICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgWyB2YWwgXSwgYnl0ZU9mZnNldCkKICB9CgogIGZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQpIHsKICAgIHZhciBmb3VuZEluZGV4ID0gLTEKICAgIGZvciAodmFyIGkgPSAwOyBieXRlT2Zmc2V0ICsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBpZiAoYXJyW2J5dGVPZmZzZXQgKyBpXSA9PT0gdmFsW2ZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4XSkgewogICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGkKICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWwubGVuZ3RoKSByZXR1cm4gYnl0ZU9mZnNldCArIGZvdW5kSW5kZXgKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3VuZEluZGV4ID0gLTEKICAgICAgfQogICAgfQogICAgcmV0dXJuIC0xCiAgfQoKICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKQp9CgpmdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMAogIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0CiAgaWYgKCFsZW5ndGgpIHsKICAgIGxlbmd0aCA9IHJlbWFpbmluZwogIH0gZWxzZSB7CiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKQogICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykgewogICAgICBsZW5ndGggPSByZW1haW5pbmcKICAgIH0KICB9CgogIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzCiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGgKICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKQoKICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikgewogICAgbGVuZ3RoID0gc3RyTGVuIC8gMgogIH0KICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KQogICAgaWYgKGlzTmFOKHBhcnNlZCkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJykKICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZAogIH0KICByZXR1cm4gaQp9CgpmdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCn0KCmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQp9CgpmdW5jdGlvbiBiaW5hcnlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQp9CgpmdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQp9CgpmdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHsKICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKQogIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkgewogICAgZW5jb2RpbmcgPSAndXRmOCcKICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoCiAgICBvZmZzZXQgPSAwCiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpCiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykgewogICAgZW5jb2RpbmcgPSBvZmZzZXQKICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoCiAgICBvZmZzZXQgPSAwCiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSkKICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHsKICAgIG9mZnNldCA9IG9mZnNldCB8IDAKICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7CiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDAKICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnCiAgICB9IGVsc2UgewogICAgICBlbmNvZGluZyA9IGxlbmd0aAogICAgICBsZW5ndGggPSB1bmRlZmluZWQKICAgIH0KICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzCiAgfSBlbHNlIHsKICAgIHZhciBzd2FwID0gZW5jb2RpbmcKICAgIGVuY29kaW5nID0gb2Zmc2V0CiAgICBvZmZzZXQgPSBsZW5ndGggfCAwCiAgICBsZW5ndGggPSBzd2FwCiAgfQoKICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXQKICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmcKCiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpCiAgfQoKICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4JwoKICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZQogIGZvciAoOzspIHsKICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKICAgICAgY2FzZSAnaGV4JzoKICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCiAgICAgIGNhc2UgJ3V0ZjgnOgogICAgICBjYXNlICd1dGYtOCc6CiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgY2FzZSAnYXNjaWknOgogICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICBjYXNlICdiaW5hcnknOgogICAgICAgIHJldHVybiBiaW5hcnlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgY2FzZSAnYmFzZTY0JzoKICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZQogICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgY2FzZSAndWNzMic6CiAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICBkZWZhdWx0OgogICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKQogICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkKICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWUKICAgIH0KICB9Cn0KCkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHsKICByZXR1cm4gewogICAgdHlwZTogJ0J1ZmZlcicsCiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMCkKICB9Cn0KCmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7CiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKQogIH0gZWxzZSB7CiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKQogIH0KfQoKZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpCiAgdmFyIHJlcyA9IFtdCgogIHZhciBpID0gc3RhcnQKICB3aGlsZSAoaSA8IGVuZCkgewogICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXQogICAgdmFyIGNvZGVQb2ludCA9IG51bGwKICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNAogICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDMKICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyCiAgICAgIDogMQoKICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHsKICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludAoKICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHsKICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlCiAgICAgICAgICB9CiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdCiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewogICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRikKICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7CiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdCiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdCiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHsKICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpCiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHsKICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV0KICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl0KICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdCiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewogICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRikKICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7CiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7CiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGEKICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZQogICAgICBjb2RlUG9pbnQgPSAweEZGRkQKICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDEKICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7CiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpCiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwCiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCkKICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkYKICAgIH0KCiAgICByZXMucHVzaChjb2RlUG9pbnQpCiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2UKICB9CgogIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKQp9CgovLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGgKLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLgovLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5CnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMAoKZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7CiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoCiAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkgewogICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpCiAgfQoKICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkICJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWQiLgogIHZhciByZXMgPSAnJwogIHZhciBpID0gMAogIHdoaWxlIChpIDwgbGVuKSB7CiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseSgKICAgICAgU3RyaW5nLAogICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpCiAgICApCiAgfQogIHJldHVybiByZXMKfQoKZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgdmFyIHJldCA9ICcnCiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKQoKICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykgewogICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RikKICB9CiAgcmV0dXJuIHJldAp9CgpmdW5jdGlvbiBiaW5hcnlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgdmFyIHJldCA9ICcnCiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKQoKICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykgewogICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKQogIH0KICByZXR1cm4gcmV0Cn0KCmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICB2YXIgbGVuID0gYnVmLmxlbmd0aAoKICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwCiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlbgoKICB2YXIgb3V0ID0gJycKICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykgewogICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSkKICB9CiAgcmV0dXJuIG91dAp9CgpmdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKQogIHZhciByZXMgPSAnJwogIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHsKICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KQogIH0KICByZXR1cm4gcmVzCn0KCkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkgewogIHZhciBsZW4gPSB0aGlzLmxlbmd0aAogIHN0YXJ0ID0gfn5zdGFydAogIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmQKCiAgaWYgKHN0YXJ0IDwgMCkgewogICAgc3RhcnQgKz0gbGVuCiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDAKICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7CiAgICBzdGFydCA9IGxlbgogIH0KCiAgaWYgKGVuZCA8IDApIHsKICAgIGVuZCArPSBsZW4KICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwCiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHsKICAgIGVuZCA9IGxlbgogIH0KCiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydAoKICB2YXIgbmV3QnVmCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpCiAgICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZQogIH0gZWxzZSB7CiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydAogICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7CiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XQogICAgfQogIH0KCiAgaWYgKG5ld0J1Zi5sZW5ndGgpIG5ld0J1Zi5wYXJlbnQgPSB0aGlzLnBhcmVudCB8fCB0aGlzCgogIHJldHVybiBuZXdCdWYKfQoKLyoKICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuCiAqLwpmdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkgewogIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpCiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCgogIHZhciB2YWwgPSB0aGlzW29mZnNldF0KICB2YXIgbXVsID0gMQogIHZhciBpID0gMAogIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bAogIH0KCiAgcmV0dXJuIHZhbAp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIHsKICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCiAgfQoKICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdCiAgdmFyIG11bCA9IDEKICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWwKICB9CgogIHJldHVybiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKQogIHJldHVybiB0aGlzW29mZnNldF0KfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKQogIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8CiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArCiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgogIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArCiAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHwKICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHwKICAgIHRoaXNbb2Zmc2V0ICsgM10pCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCgogIHZhciB2YWwgPSB0aGlzW29mZnNldF0KICB2YXIgbXVsID0gMQogIHZhciBpID0gMAogIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bAogIH0KICBtdWwgKj0gMHg4MAoKICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKQoKICByZXR1cm4gdmFsCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCgogIHZhciBpID0gYnl0ZUxlbmd0aAogIHZhciBtdWwgPSAxCiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXQogIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bAogIH0KICBtdWwgKj0gMHg4MAoKICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKQoKICByZXR1cm4gdmFsCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpCiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKQogIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKQogIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KQogIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCkKICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOCkKICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgogIHJldHVybiAodGhpc1tvZmZzZXRdKSB8CiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8CiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfAogICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgogIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8CiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfAogICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfAogICAgKHRoaXNbb2Zmc2V0ICsgM10pCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKQogIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCkKICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCkKICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KQp9CgpmdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYnVmZmVyIG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKQogIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKQogIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJykKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMCkKCiAgdmFyIG11bCA9IDEKICB2YXIgaSA9IDAKICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkYKICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGCiAgfQoKICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpLCAwKQoKICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxCiAgdmFyIG11bCA9IDEKICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGCiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkYKICB9CgogIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMCkKICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpCiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICByZXR1cm4gb2Zmc2V0ICsgMQp9CgpmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHsKICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMQogIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyBpKyspIHsKICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+CiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOAogIH0KfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQogICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCkKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDIKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZikKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpCiAgfQogIHJldHVybiBvZmZzZXQgKyAyCn0KCmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikgewogIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMQogIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyBpKyspIHsKICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmYKICB9Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMCkKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KQogICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KQogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDQKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNCkKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KQogICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOCkKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDQKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSB7CiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpCgogICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpCiAgfQoKICB2YXIgaSA9IDAKICB2YXIgbXVsID0gMQogIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMAogIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRgogIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGCiAgfQoKICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIHsKICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSkKCiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdCkKICB9CgogIHZhciBpID0gYnl0ZUxlbmd0aCAtIDEKICB2YXIgbXVsID0gMQogIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMAogIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkYKICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkYKICB9CgogIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKQogIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSkKICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDEKICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQogIHJldHVybiBvZmZzZXQgKyAxCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMCkKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKQogIH0KICByZXR1cm4gb2Zmc2V0ICsgMgp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZikKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpCiAgfQogIHJldHVybiBvZmZzZXQgKyAyCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpCiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNikKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKQogIH0KICByZXR1cm4gb2Zmc2V0ICsgNAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMCkKICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDEKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNikKICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpCiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZikKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpCiAgfQogIHJldHVybiBvZmZzZXQgKyA0Cn0KCmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7CiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKQogIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJykKfQoKZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgewogICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpCiAgfQogIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KQogIHJldHVybiBvZmZzZXQgKyA0Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KQp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpCn0KCmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSB7CiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KQogIH0KICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOCkKICByZXR1cm4gb2Zmc2V0ICsgOAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydCkKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KQp9CgovLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpCkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHsKICBpZiAoIXN0YXJ0KSBzdGFydCA9IDAKICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoCiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aAogIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMAogIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydAoKICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmUKICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDAKICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDAKCiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9ucwogIGlmICh0YXJnZXRTdGFydCA8IDApIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJykKICB9CiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKQogIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKQoKICAvLyBBcmUgd2Ugb29iPwogIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGgKICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHsKICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0CiAgfQoKICB2YXIgbGVuID0gZW5kIC0gc3RhcnQKICB2YXIgaQoKICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHsKICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZAogICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF0KICAgIH0KICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0CiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF0KICAgIH0KICB9IGVsc2UgewogICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoCiAgICAgIHRhcmdldCwKICAgICAgdGhpcy5zdWJhcnJheShzdGFydCwgc3RhcnQgKyBsZW4pLAogICAgICB0YXJnZXRTdGFydAogICAgKQogIH0KCiAgcmV0dXJuIGxlbgp9CgovLyBmaWxsKHZhbHVlLCBzdGFydD0wLCBlbmQ9YnVmZmVyLmxlbmd0aCkKQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsdWUsIHN0YXJ0LCBlbmQpIHsKICBpZiAoIXZhbHVlKSB2YWx1ZSA9IDAKICBpZiAoIXN0YXJ0KSBzdGFydCA9IDAKICBpZiAoIWVuZCkgZW5kID0gdGhpcy5sZW5ndGgKCiAgaWYgKGVuZCA8IHN0YXJ0KSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIDwgc3RhcnQnKQoKICAvLyBGaWxsIDAgYnl0ZXM7IHdlJ3JlIGRvbmUKICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuCiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4KCiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3N0YXJ0IG91dCBvZiBib3VuZHMnKQogIGlmIChlbmQgPCAwIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIG91dCBvZiBib3VuZHMnKQoKICB2YXIgaQogIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7CiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7CiAgICAgIHRoaXNbaV0gPSB2YWx1ZQogICAgfQogIH0gZWxzZSB7CiAgICB2YXIgYnl0ZXMgPSB1dGY4VG9CeXRlcyh2YWx1ZS50b1N0cmluZygpKQogICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aAogICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykgewogICAgICB0aGlzW2ldID0gYnl0ZXNbaSAlIGxlbl0KICAgIH0KICB9CgogIHJldHVybiB0aGlzCn0KCi8vIEhFTFBFUiBGVU5DVElPTlMKLy8gPT09PT09PT09PT09PT09PQoKdmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1wvMC05QS1aYS16LV9dL2cKCmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHsKICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXG4gYW5kIFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90CiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKQogIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJycKICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJwogIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdAogIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkgewogICAgc3RyID0gc3RyICsgJz0nCiAgfQogIHJldHVybiBzdHIKfQoKZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7CiAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKQogIHJldHVybiBzdHIucmVwbGFjZSgvXlxzK3xccyskL2csICcnKQp9CgpmdW5jdGlvbiB0b0hleCAobikgewogIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KQogIHJldHVybiBuLnRvU3RyaW5nKDE2KQp9CgpmdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykgewogIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHkKICB2YXIgY29kZVBvaW50CiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGgKICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGwKICB2YXIgYnl0ZXMgPSBbXQoKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKQoKICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnQKICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7CiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkCiAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkgewogICAgICAgIC8vIG5vIGxlYWQgeWV0CiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikgewogICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbAogICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpCiAgICAgICAgICBjb250aW51ZQogICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkgewogICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZAogICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpCiAgICAgICAgICBjb250aW51ZQogICAgICAgIH0KCiAgICAgICAgLy8gdmFsaWQgbGVhZAogICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnQKCiAgICAgICAgY29udGludWUKICAgICAgfQoKICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvdwogICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7CiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpCiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludAogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KCiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyCiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDAKICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkgewogICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkCiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKQogICAgfQoKICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsCgogICAgLy8gZW5jb2RlIHV0ZjgKICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7CiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVhawogICAgICBieXRlcy5wdXNoKGNvZGVQb2ludCkKICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHsKICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrCiAgICAgIGJ5dGVzLnB1c2goCiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsCiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODAKICAgICAgKQogICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7CiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVhawogICAgICBieXRlcy5wdXNoKAogICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLAogICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCwKICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MAogICAgICApCiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7CiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVhawogICAgICBieXRlcy5wdXNoKAogICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCwKICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsCiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLAogICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCiAgICAgICkKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JykKICAgIH0KICB9CgogIHJldHVybiBieXRlcwp9CgpmdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikgewogIHZhciBieXRlQXJyYXkgPSBbXQogIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi4KICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRikKICB9CiAgcmV0dXJuIGJ5dGVBcnJheQp9CgpmdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykgewogIHZhciBjLCBoaSwgbG8KICB2YXIgYnl0ZUFycmF5ID0gW10KICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewogICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrCgogICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpCiAgICBoaSA9IGMgPj4gOAogICAgbG8gPSBjICUgMjU2CiAgICBieXRlQXJyYXkucHVzaChsbykKICAgIGJ5dGVBcnJheS5wdXNoKGhpKQogIH0KCiAgcmV0dXJuIGJ5dGVBcnJheQp9CgpmdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHsKICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpCn0KCmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkgewogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWsKICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXQogIH0KICByZXR1cm4gaQp9Cgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7ImJhc2U2NC1qcyI6NjksImllZWU3NTQiOjEyNiwiaXNhcnJheSI6NzF9XSw3MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nOwoKbW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHsKICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7Cn07Cgp9LHt9XSw3MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQovLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCi8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAovLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0Ci8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQovLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgovLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHsKICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307CiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDsKfQptb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjsKCi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueApFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyOwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkOwpFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7CgovLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmUKLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy4KRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDsKCi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93cwovLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC4KRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7CiAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSkKICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7CiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjsKICByZXR1cm4gdGhpczsKfTsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHsKICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzOwoKICBpZiAoIXRoaXMuX2V2ZW50cykKICAgIHRoaXMuX2V2ZW50cyA9IHt9OwoKICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuCiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHsKICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8CiAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7CiAgICAgIGVyID0gYXJndW1lbnRzWzFdOwogICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudAogICAgICB9CiAgICAgIHRocm93IFR5cGVFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkICJlcnJvciIgZXZlbnQuJyk7CiAgICB9CiAgfQoKICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdOwoKICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpCiAgICByZXR1cm4gZmFsc2U7CgogIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7CiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHsKICAgICAgLy8gZmFzdCBjYXNlcwogICAgICBjYXNlIDE6CiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDI6CiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgMzoKICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pOwogICAgICAgIGJyZWFrOwogICAgICAvLyBzbG93ZXIKICAgICAgZGVmYXVsdDoKICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgfQogIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHsKICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpOwogICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDsKICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpOwogIH0KCiAgcmV0dXJuIHRydWU7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHsKICB2YXIgbTsKCiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSkKICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CgogIGlmICghdGhpcy5fZXZlbnRzKQogICAgdGhpcy5fZXZlbnRzID0ge307CgogIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09ICJuZXdMaXN0ZW5lciIhIEJlZm9yZQogIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0ICJuZXdMaXN0ZW5lciIuCiAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcikKICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLAogICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID8KICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTsKCiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pCiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC4KICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyOwogIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpCiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuCiAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7CiAgZWxzZQogICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuCiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07CgogIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrCiAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHsKICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkgewogICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzOwogICAgfSBlbHNlIHsKICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzOwogICAgfQoKICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7CiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlOwogICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICsKICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICsKICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJywKICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTsKICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMAogICAgICAgIGNvbnNvbGUudHJhY2UoKTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIHRoaXM7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7CiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSkKICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CgogIHZhciBmaXJlZCA9IGZhbHNlOwoKICBmdW5jdGlvbiBnKCkgewogICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTsKCiAgICBpZiAoIWZpcmVkKSB7CiAgICAgIGZpcmVkID0gdHJ1ZTsKICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KICB9CgogIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjsKICB0aGlzLm9uKHR5cGUsIGcpOwoKICByZXR1cm4gdGhpczsKfTsKCi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkCkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikgewogIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpOwoKICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKQogICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTsKCiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSkKICAgIHJldHVybiB0aGlzOwoKICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdOwogIGxlbmd0aCA9IGxpc3QubGVuZ3RoOwogIHBvc2l0aW9uID0gLTE7CgogIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fAogICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHsKICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07CiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKQogICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpOwoKICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7CiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7CiAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fAogICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7CiAgICAgICAgcG9zaXRpb24gPSBpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgaWYgKHBvc2l0aW9uIDwgMCkKICAgICAgcmV0dXJuIHRoaXM7CgogICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7CiAgICAgIGxpc3QubGVuZ3RoID0gMDsKICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKICAgIH0gZWxzZSB7CiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTsKICAgIH0KCiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKQogICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpOwogIH0KCiAgcmV0dXJuIHRoaXM7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHsKICB2YXIga2V5LCBsaXN0ZW5lcnM7CgogIGlmICghdGhpcy5fZXZlbnRzKQogICAgcmV0dXJuIHRoaXM7CgogIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXQKICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApCiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9OwogICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKQogICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHMKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7CiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlOwogICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpOwogICAgfQogICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7CiAgICB0aGlzLl9ldmVudHMgPSB7fTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdOwoKICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7CiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7CiAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHsKICAgIC8vIExJRk8gb3JkZXIKICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKQogICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pOwogIH0KICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdOwoKICByZXR1cm4gdGhpczsKfTsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkgewogIHZhciByZXQ7CiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSkKICAgIHJldCA9IFtdOwogIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSkKICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dOwogIGVsc2UKICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpOwogIHJldHVybiByZXQ7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7CiAgaWYgKHRoaXMuX2V2ZW50cykgewogICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07CgogICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpCiAgICAgIHJldHVybiAxOwogICAgZWxzZSBpZiAoZXZsaXN0ZW5lcikKICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoOwogIH0KICByZXR1cm4gMDsKfTsKCkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkgewogIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7Cn07CgpmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nOwp9CgpmdW5jdGlvbiBpc051bWJlcihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7Cn0KCmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7Cn0KCmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykgewogIHJldHVybiBhcmcgPT09IHZvaWQgMDsKfQoKfSx7fV0sNzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBCYXNlNTggZW5jb2RpbmcvZGVjb2RpbmcKLy8gT3JpZ2luYWxseSB3cml0dGVuIGJ5IE1pa2UgSGVhcm4gZm9yIEJpdGNvaW5KCi8vIENvcHlyaWdodCAoYykgMjAxMSBHb29nbGUgSW5jCi8vIFBvcnRlZCB0byBKYXZhU2NyaXB0IGJ5IFN0ZWZhbiBUaG9tYXMKLy8gTWVyZ2VkIEJ1ZmZlciByZWZhY3RvcmluZ3MgZnJvbSBiYXNlNTgtbmF0aXZlIGJ5IFN0ZXBoZW4gUGFpcgovLyBDb3B5cmlnaHQgKGMpIDIwMTMgQml0UGF5IEluYwoKdmFyIEFMUEhBQkVUID0gJzEyMzQ1Njc4OUFCQ0RFRkdISktMTU5QUVJTVFVWV1hZWmFiY2RlZmdoaWprbW5vcHFyc3R1dnd4eXonCnZhciBBTFBIQUJFVF9NQVAgPSB7fQpmb3IodmFyIGkgPSAwOyBpIDwgQUxQSEFCRVQubGVuZ3RoOyBpKyspIHsKICBBTFBIQUJFVF9NQVBbQUxQSEFCRVQuY2hhckF0KGkpXSA9IGkKfQp2YXIgQkFTRSA9IDU4CgpmdW5jdGlvbiBlbmNvZGUoYnVmZmVyKSB7CiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiAnJwoKICB2YXIgaSwgaiwgZGlnaXRzID0gWzBdCiAgZm9yIChpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykgewogICAgZm9yIChqID0gMDsgaiA8IGRpZ2l0cy5sZW5ndGg7IGorKykgZGlnaXRzW2pdIDw8PSA4CgogICAgZGlnaXRzWzBdICs9IGJ1ZmZlcltpXQoKICAgIHZhciBjYXJyeSA9IDAKICAgIGZvciAoaiA9IDA7IGogPCBkaWdpdHMubGVuZ3RoOyArK2opIHsKICAgICAgZGlnaXRzW2pdICs9IGNhcnJ5CgogICAgICBjYXJyeSA9IChkaWdpdHNbal0gLyBCQVNFKSB8IDAKICAgICAgZGlnaXRzW2pdICU9IEJBU0UKICAgIH0KCiAgICB3aGlsZSAoY2FycnkpIHsKICAgICAgZGlnaXRzLnB1c2goY2FycnkgJSBCQVNFKQoKICAgICAgY2FycnkgPSAoY2FycnkgLyBCQVNFKSB8IDAKICAgIH0KICB9CgogIC8vIGRlYWwgd2l0aCBsZWFkaW5nIHplcm9zCiAgZm9yIChpID0gMDsgYnVmZmVyW2ldID09PSAwICYmIGkgPCBidWZmZXIubGVuZ3RoIC0gMTsgaSsrKSBkaWdpdHMucHVzaCgwKQoKICAvLyBjb252ZXJ0IGRpZ2l0cyB0byBhIHN0cmluZwogIHZhciBzdHJpbmdPdXRwdXQgPSAiIgogIGZvciAodmFyIGkgPSBkaWdpdHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIHN0cmluZ091dHB1dCA9IHN0cmluZ091dHB1dCArIEFMUEhBQkVUW2RpZ2l0c1tpXV0KICB9CiAgcmV0dXJuIHN0cmluZ091dHB1dAp9CgpmdW5jdGlvbiBkZWNvZGUoc3RyaW5nKSB7CiAgaWYgKHN0cmluZy5sZW5ndGggPT09IDApIHJldHVybiBbXQoKICB2YXIgaSwgaiwgYnl0ZXMgPSBbMF0KICBmb3IgKGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgYyA9IHN0cmluZ1tpXQogICAgaWYgKCEoYyBpbiBBTFBIQUJFVF9NQVApKSB0aHJvdyBuZXcgRXJyb3IoJ05vbi1iYXNlNTggY2hhcmFjdGVyJykKCiAgICBmb3IgKGogPSAwOyBqIDwgYnl0ZXMubGVuZ3RoOyBqKyspIGJ5dGVzW2pdICo9IEJBU0UKICAgIGJ5dGVzWzBdICs9IEFMUEhBQkVUX01BUFtjXQoKICAgIHZhciBjYXJyeSA9IDAKICAgIGZvciAoaiA9IDA7IGogPCBieXRlcy5sZW5ndGg7ICsraikgewogICAgICBieXRlc1tqXSArPSBjYXJyeQoKICAgICAgY2FycnkgPSBieXRlc1tqXSA+PiA4CiAgICAgIGJ5dGVzW2pdICY9IDB4ZmYKICAgIH0KCiAgICB3aGlsZSAoY2FycnkpIHsKICAgICAgYnl0ZXMucHVzaChjYXJyeSAmIDB4ZmYpCgogICAgICBjYXJyeSA+Pj0gOAogICAgfQogIH0KCiAgLy8gZGVhbCB3aXRoIGxlYWRpbmcgemVyb3MKICBmb3IgKGkgPSAwOyBzdHJpbmdbaV0gPT09ICcxJyAmJiBpIDwgc3RyaW5nLmxlbmd0aCAtIDE7IGkrKykgYnl0ZXMucHVzaCgwKQoKICByZXR1cm4gYnl0ZXMucmV2ZXJzZSgpCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGVuY29kZTogZW5jb2RlLAogIGRlY29kZTogZGVjb2RlCn0KCn0se31dLDc0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewondXNlIHN0cmljdCcKCnZhciBiYXNlNTggPSByZXF1aXJlKCdiczU4JykKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpCgovLyBTSEEyNTYoU0hBMjU2KGJ1ZmZlcikpCmZ1bmN0aW9uIHNoYTI1NngyIChidWZmZXIpIHsKICB2YXIgdG1wID0gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGJ1ZmZlcikuZGlnZXN0KCkKICByZXR1cm4gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHRtcCkuZGlnZXN0KCkKfQoKLy8gRW5jb2RlIGEgYnVmZmVyIGFzIGEgYmFzZTU4LWNoZWNrIGVuY29kZWQgc3RyaW5nCmZ1bmN0aW9uIGVuY29kZSAocGF5bG9hZCkgewogIHZhciBjaGVja3N1bSA9IHNoYTI1NngyKHBheWxvYWQpCgogIHJldHVybiBiYXNlNTguZW5jb2RlKEJ1ZmZlci5jb25jYXQoWwogICAgcGF5bG9hZCwKICAgIGNoZWNrc3VtCiAgXSwgcGF5bG9hZC5sZW5ndGggKyA0KSkKfQoKLy8gRGVjb2RlIGEgYmFzZTU4LWNoZWNrIGVuY29kZWQgc3RyaW5nIHRvIGEgYnVmZmVyCmZ1bmN0aW9uIGRlY29kZSAoc3RyaW5nKSB7CiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYmFzZTU4LmRlY29kZShzdHJpbmcpKQoKICB2YXIgcGF5bG9hZCA9IGJ1ZmZlci5zbGljZSgwLCAtNCkKICB2YXIgY2hlY2tzdW0gPSBidWZmZXIuc2xpY2UoLTQpCiAgdmFyIG5ld0NoZWNrc3VtID0gc2hhMjU2eDIocGF5bG9hZCkKCiAgaWYgKGNoZWNrc3VtWzBdIF4gbmV3Q2hlY2tzdW1bMF0gfAogICAgICBjaGVja3N1bVsxXSBeIG5ld0NoZWNrc3VtWzFdIHwKICAgICAgY2hlY2tzdW1bMl0gXiBuZXdDaGVja3N1bVsyXSB8CiAgICAgIGNoZWNrc3VtWzNdIF4gbmV3Q2hlY2tzdW1bM10pIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjaGVja3N1bScpCgogIHJldHVybiBwYXlsb2FkCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGVuY29kZTogZW5jb2RlLAogIGRlY29kZTogZGVjb2RlCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJiczU4Ijo3MywiYnVmZmVyIjo3MCwiY3JlYXRlLWhhc2giOjgyfV0sNzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGEsIGIpIHsKICBpZiAodHlwZW9mIGEuY29tcGFyZSA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGEuY29tcGFyZShiKQogIGlmIChhID09PSBiKSByZXR1cm4gMAoKICB2YXIgeCA9IGEubGVuZ3RoCiAgdmFyIHkgPSBiLmxlbmd0aAoKICB2YXIgaSA9IDAKICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSkKICB3aGlsZSAoaSA8IGxlbikgewogICAgaWYgKGFbaV0gIT09IGJbaV0pIGJyZWFrCgogICAgKytpCiAgfQoKICBpZiAoaSAhPT0gbGVuKSB7CiAgICB4ID0gYVtpXQogICAgeSA9IGJbaV0KICB9CgogIGlmICh4IDwgeSkgcmV0dXJuIC0xCiAgaWYgKHkgPCB4KSByZXR1cm4gMQogIHJldHVybiAwCn0KCgp9LHt9XSw3NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKJ3VzZSBzdHJpY3QnOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhLCBiKSB7CglpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7CgkJdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpOwoJfQoKCWlmIChhID09PSBiKSB7CgkJcmV0dXJuIHRydWU7Cgl9CgoJaWYgKHR5cGVvZiBhLmVxdWFscyA9PT0gJ2Z1bmN0aW9uJykgewoJCXJldHVybiBhLmVxdWFscyhiKTsKCX0KCglpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCWZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykgewoJCWlmIChhW2ldICE9PSBiW2ldKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CgoJcmV0dXJuIHRydWU7Cn07Cgp9KS5jYWxsKHRoaXMseyJpc0J1ZmZlciI6cmVxdWlyZSgiLi4vaXMtYnVmZmVyL2luZGV4LmpzIil9KQp9LHsiLi4vaXMtYnVmZmVyL2luZGV4LmpzIjoxMjl9XSw3NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXZlcnNlIChzcmMpIHsKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcihzcmMubGVuZ3RoKQoKICBmb3IgKHZhciBpID0gMCwgaiA9IHNyYy5sZW5ndGggLSAxOyBpIDw9IGo7ICsraSwgLS1qKSB7CiAgICBidWZmZXJbaV0gPSBzcmNbal0KICAgIGJ1ZmZlcltqXSA9IHNyY1tpXQogIH0KCiAgcmV0dXJuIGJ1ZmZlcgp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MH1dLDc4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhvciAoYSwgYikgewogIHZhciBsZW5ndGggPSBNYXRoLm1pbihhLmxlbmd0aCwgYi5sZW5ndGgpCiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIobGVuZ3RoKQoKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CiAgICBidWZmZXJbaV0gPSBhW2ldIF4gYltpXQogIH0KCiAgcmV0dXJuIGJ1ZmZlcgp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MH1dLDc5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnc3RyZWFtJykuVHJhbnNmb3JtCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2RlcicpLlN0cmluZ0RlY29kZXIKbW9kdWxlLmV4cG9ydHMgPSBDaXBoZXJCYXNlCmluaGVyaXRzKENpcGhlckJhc2UsIFRyYW5zZm9ybSkKZnVuY3Rpb24gQ2lwaGVyQmFzZSAoaGFzaE1vZGUpIHsKICBUcmFuc2Zvcm0uY2FsbCh0aGlzKQogIHRoaXMuaGFzaE1vZGUgPSB0eXBlb2YgaGFzaE1vZGUgPT09ICdzdHJpbmcnCiAgaWYgKHRoaXMuaGFzaE1vZGUpIHsKICAgIHRoaXNbaGFzaE1vZGVdID0gdGhpcy5fZmluYWxPckRpZ2VzdAogIH0gZWxzZSB7CiAgICB0aGlzLmZpbmFsID0gdGhpcy5fZmluYWxPckRpZ2VzdAogIH0KICB0aGlzLl9kZWNvZGVyID0gbnVsbAogIHRoaXMuX2VuY29kaW5nID0gbnVsbAp9CkNpcGhlckJhc2UucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhLCBpbnB1dEVuYywgb3V0cHV0RW5jKSB7CiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykgewogICAgZGF0YSA9IG5ldyBCdWZmZXIoZGF0YSwgaW5wdXRFbmMpCiAgfQogIHZhciBvdXREYXRhID0gdGhpcy5fdXBkYXRlKGRhdGEpCiAgaWYgKHRoaXMuaGFzaE1vZGUpIHsKICAgIHJldHVybiB0aGlzCiAgfQogIGlmIChvdXRwdXRFbmMpIHsKICAgIG91dERhdGEgPSB0aGlzLl90b1N0cmluZyhvdXREYXRhLCBvdXRwdXRFbmMpCiAgfQogIHJldHVybiBvdXREYXRhCn0KCkNpcGhlckJhc2UucHJvdG90eXBlLnNldEF1dG9QYWRkaW5nID0gZnVuY3Rpb24gKCkge30KCkNpcGhlckJhc2UucHJvdG90eXBlLmdldEF1dGhUYWcgPSBmdW5jdGlvbiAoKSB7CiAgdGhyb3cgbmV3IEVycm9yKCd0cnlpbmcgdG8gZ2V0IGF1dGggdGFnIGluIHVuc3VwcG9ydGVkIHN0YXRlJykKfQoKQ2lwaGVyQmFzZS5wcm90b3R5cGUuc2V0QXV0aFRhZyA9IGZ1bmN0aW9uICgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ3RyeWluZyB0byBzZXQgYXV0aCB0YWcgaW4gdW5zdXBwb3J0ZWQgc3RhdGUnKQp9CgpDaXBoZXJCYXNlLnByb3RvdHlwZS5zZXRBQUQgPSBmdW5jdGlvbiAoKSB7CiAgdGhyb3cgbmV3IEVycm9yKCd0cnlpbmcgdG8gc2V0IGFhZCBpbiB1bnN1cHBvcnRlZCBzdGF0ZScpCn0KCkNpcGhlckJhc2UucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoZGF0YSwgXywgbmV4dCkgewogIHZhciBlcnIKICB0cnkgewogICAgaWYgKHRoaXMuaGFzaE1vZGUpIHsKICAgICAgdGhpcy5fdXBkYXRlKGRhdGEpCiAgICB9IGVsc2UgewogICAgICB0aGlzLnB1c2godGhpcy5fdXBkYXRlKGRhdGEpKQogICAgfQogIH0gY2F0Y2ggKGUpIHsKICAgIGVyciA9IGUKICB9IGZpbmFsbHkgewogICAgbmV4dChlcnIpCiAgfQp9CkNpcGhlckJhc2UucHJvdG90eXBlLl9mbHVzaCA9IGZ1bmN0aW9uIChkb25lKSB7CiAgdmFyIGVycgogIHRyeSB7CiAgICB0aGlzLnB1c2godGhpcy5fZmluYWwoKSkKICB9IGNhdGNoIChlKSB7CiAgICBlcnIgPSBlCiAgfSBmaW5hbGx5IHsKICAgIGRvbmUoZXJyKQogIH0KfQpDaXBoZXJCYXNlLnByb3RvdHlwZS5fZmluYWxPckRpZ2VzdCA9IGZ1bmN0aW9uIChvdXRwdXRFbmMpIHsKICB2YXIgb3V0RGF0YSA9IHRoaXMuX2ZpbmFsKCkgfHwgbmV3IEJ1ZmZlcignJykKICBpZiAob3V0cHV0RW5jKSB7CiAgICBvdXREYXRhID0gdGhpcy5fdG9TdHJpbmcob3V0RGF0YSwgb3V0cHV0RW5jLCB0cnVlKQogIH0KICByZXR1cm4gb3V0RGF0YQp9CgpDaXBoZXJCYXNlLnByb3RvdHlwZS5fdG9TdHJpbmcgPSBmdW5jdGlvbiAodmFsdWUsIGVuYywgZmluYWwpIHsKICBpZiAoIXRoaXMuX2RlY29kZXIpIHsKICAgIHRoaXMuX2RlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpCiAgICB0aGlzLl9lbmNvZGluZyA9IGVuYwogIH0KICBpZiAodGhpcy5fZW5jb2RpbmcgIT09IGVuYykgewogICAgdGhyb3cgbmV3IEVycm9yKCdjYW5cJ3Qgc3dpdGNoIGVuY29kaW5ncycpCiAgfQogIHZhciBvdXQgPSB0aGlzLl9kZWNvZGVyLndyaXRlKHZhbHVlKQogIGlmIChmaW5hbCkgewogICAgb3V0ICs9IHRoaXMuX2RlY29kZXIuZW5kKCkKICB9CiAgcmV0dXJuIG91dAp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MCwiaW5oZXJpdHMiOjEyOCwic3RyZWFtIjoxNzAsInN0cmluZ19kZWNvZGVyIjoxNzF9XSw4MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuCi8vCi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKLy8gIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwovLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQKLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlCi8vIGZvbGxvd2luZyBjb25kaXRpb25zOgovLwovLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZAovLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KLy8KLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MKLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgovLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOCi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLAovLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRQovLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoKLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgCi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLgoKZnVuY3Rpb24gaXNBcnJheShhcmcpIHsKICBpZiAoQXJyYXkuaXNBcnJheSkgewogICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJnKTsKICB9CiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7Cn0KZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTsKCmZ1bmN0aW9uIGlzQm9vbGVhbihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nOwp9CmV4cG9ydHMuaXNCb29sZWFuID0gaXNCb29sZWFuOwoKZnVuY3Rpb24gaXNOdWxsKGFyZykgewogIHJldHVybiBhcmcgPT09IG51bGw7Cn0KZXhwb3J0cy5pc051bGwgPSBpc051bGw7CgpmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHsKICByZXR1cm4gYXJnID09IG51bGw7Cn0KZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkOwoKZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInOwp9CmV4cG9ydHMuaXNOdW1iZXIgPSBpc051bWJlcjsKCmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJzsKfQpleHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7CgpmdW5jdGlvbiBpc1N5bWJvbChhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7Cn0KZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sOwoKZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwOwp9CmV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDsKCmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7CiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7Cn0KZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwOwoKZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDsKfQpleHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7CgpmdW5jdGlvbiBpc0RhdGUoZCkgewogIHJldHVybiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nOwp9CmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlOwoKZnVuY3Rpb24gaXNFcnJvcihlKSB7CiAgcmV0dXJuIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpOwp9CmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7CgpmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nOwp9CmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247CgpmdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHsKICByZXR1cm4gYXJnID09PSBudWxsIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbAogICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJzsKfQpleHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7CgpleHBvcnRzLmlzQnVmZmVyID0gQnVmZmVyLmlzQnVmZmVyOwoKZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykgewogIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7Cn0KCn0pLmNhbGwodGhpcyx7ImlzQnVmZmVyIjpyZXF1aXJlKCIuLi8uLi9pcy1idWZmZXIvaW5kZXguanMiKX0pCn0seyIuLi8uLi9pcy1idWZmZXIvaW5kZXguanMiOjEyOX1dLDgxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCdlbGxpcHRpYycpOwp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFQ0RIKGN1cnZlKSB7CglyZXR1cm4gbmV3IEVDREgoY3VydmUpOwp9OwoKdmFyIGFsaWFzZXMgPSB7CglzZWNwMjU2azE6IHsKCQluYW1lOiAnc2VjcDI1NmsxJywKCQlieXRlTGVuZ3RoOiAzMgoJfSwKCXNlY3AyMjRyMTogewoJCW5hbWU6ICdwMjI0JywKCQlieXRlTGVuZ3RoOiAyOAoJfSwKCXByaW1lMjU2djE6IHsKCQluYW1lOiAncDI1NicsCgkJYnl0ZUxlbmd0aDogMzIKCX0sCglwcmltZTE5MnYxOiB7CgkJbmFtZTogJ3AxOTInLAoJCWJ5dGVMZW5ndGg6IDI0Cgl9LAoJZWQyNTUxOTogewoJCW5hbWU6ICdlZDI1NTE5JywKCQlieXRlTGVuZ3RoOiAzMgoJfSwKCXNlY3AzODRyMTogewoJCW5hbWU6ICdwMzg0JywKCQlieXRlTGVuZ3RoOiA0OAoJfSwKCXNlY3A1MjFyMTogewoJCW5hbWU6ICdwNTIxJywKCQlieXRlTGVuZ3RoOiA2NgoJfQp9OwoKYWxpYXNlcy5wMjI0ID0gYWxpYXNlcy5zZWNwMjI0cjE7CmFsaWFzZXMucDI1NiA9IGFsaWFzZXMuc2VjcDI1NnIxID0gYWxpYXNlcy5wcmltZTI1NnYxOwphbGlhc2VzLnAxOTIgPSBhbGlhc2VzLnNlY3AxOTJyMSA9IGFsaWFzZXMucHJpbWUxOTJ2MTsKYWxpYXNlcy5wMzg0ID0gYWxpYXNlcy5zZWNwMzg0cjE7CmFsaWFzZXMucDUyMSA9IGFsaWFzZXMuc2VjcDUyMXIxOwoKZnVuY3Rpb24gRUNESChjdXJ2ZSkgewoJdGhpcy5jdXJ2ZVR5cGUgPSBhbGlhc2VzW2N1cnZlXTsKCWlmICghdGhpcy5jdXJ2ZVR5cGUgKSB7CgkJdGhpcy5jdXJ2ZVR5cGUgPSB7CgkJCW5hbWU6IGN1cnZlCgkJfTsKCX0KCXRoaXMuY3VydmUgPSBuZXcgZWxsaXB0aWMuZWModGhpcy5jdXJ2ZVR5cGUubmFtZSk7Cgl0aGlzLmtleXMgPSB2b2lkIDA7Cn0KCkVDREgucHJvdG90eXBlLmdlbmVyYXRlS2V5cyA9IGZ1bmN0aW9uIChlbmMsIGZvcm1hdCkgewoJdGhpcy5rZXlzID0gdGhpcy5jdXJ2ZS5nZW5LZXlQYWlyKCk7CglyZXR1cm4gdGhpcy5nZXRQdWJsaWNLZXkoZW5jLCBmb3JtYXQpOwp9OwoKRUNESC5wcm90b3R5cGUuY29tcHV0ZVNlY3JldCA9IGZ1bmN0aW9uIChvdGhlciwgaW5lbmMsIGVuYykgewoJaW5lbmMgPSBpbmVuYyB8fCAndXRmOCc7CglpZiAoIUJ1ZmZlci5pc0J1ZmZlcihvdGhlcikpIHsKCQlvdGhlciA9IG5ldyBCdWZmZXIob3RoZXIsIGluZW5jKTsKCX0KCXZhciBvdGhlclB1YiA9IHRoaXMuY3VydmUua2V5RnJvbVB1YmxpYyhvdGhlcikuZ2V0UHVibGljKCk7Cgl2YXIgb3V0ID0gb3RoZXJQdWIubXVsKHRoaXMua2V5cy5nZXRQcml2YXRlKCkpLmdldFgoKTsKCXJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZShvdXQsIGVuYywgdGhpcy5jdXJ2ZVR5cGUuYnl0ZUxlbmd0aCk7Cn07CgpFQ0RILnByb3RvdHlwZS5nZXRQdWJsaWNLZXkgPSBmdW5jdGlvbiAoZW5jLCBmb3JtYXQpIHsKCXZhciBrZXkgPSB0aGlzLmtleXMuZ2V0UHVibGljKGZvcm1hdCA9PT0gJ2NvbXByZXNzZWQnLCB0cnVlKTsKCWlmIChmb3JtYXQgPT09ICdoeWJyaWQnKSB7CgkJaWYgKGtleVtrZXkubGVuZ3RoIC0gMV0gJSAyKSB7CgkJCWtleVswXSA9IDc7CgkJfSBlbHNlIHsKCQkJa2V5IFswXSA9IDY7CgkJfQoJfQoJcmV0dXJuIGZvcm1hdFJldHVyblZhbHVlKGtleSwgZW5jKTsKfTsKCkVDREgucHJvdG90eXBlLmdldFByaXZhdGVLZXkgPSBmdW5jdGlvbiAoZW5jKSB7CglyZXR1cm4gZm9ybWF0UmV0dXJuVmFsdWUodGhpcy5rZXlzLmdldFByaXZhdGUoKSwgZW5jKTsKfTsKCkVDREgucHJvdG90eXBlLnNldFB1YmxpY0tleSA9IGZ1bmN0aW9uIChwdWIsIGVuYykgewoJZW5jID0gZW5jIHx8ICd1dGY4JzsKCWlmICghQnVmZmVyLmlzQnVmZmVyKHB1YikpIHsKCQlwdWIgPSBuZXcgQnVmZmVyKHB1YiwgZW5jKTsKCX0KCXRoaXMua2V5cy5faW1wb3J0UHVibGljKHB1Yik7CglyZXR1cm4gdGhpczsKfTsKCkVDREgucHJvdG90eXBlLnNldFByaXZhdGVLZXkgPSBmdW5jdGlvbiAocHJpdiwgZW5jKSB7CgllbmMgPSBlbmMgfHwgJ3V0ZjgnOwoJaWYgKCFCdWZmZXIuaXNCdWZmZXIocHJpdikpIHsKCQlwcml2ID0gbmV3IEJ1ZmZlcihwcml2LCBlbmMpOwoJfQoJdmFyIF9wcml2ID0gbmV3IEJOKHByaXYpOwoJX3ByaXYgPSBfcHJpdi50b1N0cmluZygxNik7Cgl0aGlzLmtleXMuX2ltcG9ydFByaXZhdGUoX3ByaXYpOwoJcmV0dXJuIHRoaXM7Cn07CgpmdW5jdGlvbiBmb3JtYXRSZXR1cm5WYWx1ZShibiwgZW5jLCBsZW4pIHsKCWlmICghQXJyYXkuaXNBcnJheShibikpIHsKCQlibiA9IGJuLnRvQXJyYXkoKTsKCX0KCXZhciBidWYgPSBuZXcgQnVmZmVyKGJuKTsKCWlmIChsZW4gJiYgYnVmLmxlbmd0aCA8IGxlbikgewoJCXZhciB6ZXJvcyA9IG5ldyBCdWZmZXIobGVuIC0gYnVmLmxlbmd0aCk7CgkJemVyb3MuZmlsbCgwKTsKCQlidWYgPSBCdWZmZXIuY29uY2F0KFt6ZXJvcywgYnVmXSk7Cgl9CglpZiAoIWVuYykgewoJCXJldHVybiBidWY7Cgl9IGVsc2UgewoJCXJldHVybiBidWYudG9TdHJpbmcoZW5jKTsKCX0KfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJuLmpzIjo0MSwiYnVmZmVyIjo3MCwiZWxsaXB0aWMiOjEwMn1dLDgyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewondXNlIHN0cmljdCc7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIG1kNSA9IHJlcXVpcmUoJy4vbWQ1JykKdmFyIHJtZDE2MCA9IHJlcXVpcmUoJ3JpcGVtZDE2MCcpCnZhciBzaGEgPSByZXF1aXJlKCdzaGEuanMnKQoKdmFyIEJhc2UgPSByZXF1aXJlKCdjaXBoZXItYmFzZScpCgpmdW5jdGlvbiBIYXNoTm9Db25zdHJ1Y3RvcihoYXNoKSB7CiAgQmFzZS5jYWxsKHRoaXMsICdkaWdlc3QnKQoKICB0aGlzLl9oYXNoID0gaGFzaAogIHRoaXMuYnVmZmVycyA9IFtdCn0KCmluaGVyaXRzKEhhc2hOb0NvbnN0cnVjdG9yLCBCYXNlKQoKSGFzaE5vQ29uc3RydWN0b3IucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkgewogIHRoaXMuYnVmZmVycy5wdXNoKGRhdGEpCn0KCkhhc2hOb0NvbnN0cnVjdG9yLnByb3RvdHlwZS5fZmluYWwgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGJ1ZiA9IEJ1ZmZlci5jb25jYXQodGhpcy5idWZmZXJzKQogIHZhciByID0gdGhpcy5faGFzaChidWYpCiAgdGhpcy5idWZmZXJzID0gbnVsbAoKICByZXR1cm4gcgp9CgpmdW5jdGlvbiBIYXNoKGhhc2gpIHsKICBCYXNlLmNhbGwodGhpcywgJ2RpZ2VzdCcpCgogIHRoaXMuX2hhc2ggPSBoYXNoCn0KCmluaGVyaXRzKEhhc2gsIEJhc2UpCgpIYXNoLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHsKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhKQp9CgpIYXNoLnByb3RvdHlwZS5fZmluYWwgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuX2hhc2guZGlnZXN0KCkKfQoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVIYXNoIChhbGcpIHsKICBhbGcgPSBhbGcudG9Mb3dlckNhc2UoKQogIGlmICgnbWQ1JyA9PT0gYWxnKSByZXR1cm4gbmV3IEhhc2hOb0NvbnN0cnVjdG9yKG1kNSkKICBpZiAoJ3JtZDE2MCcgPT09IGFsZyB8fCAncmlwZW1kMTYwJyA9PT0gYWxnKSByZXR1cm4gbmV3IEhhc2hOb0NvbnN0cnVjdG9yKHJtZDE2MCkKCiAgcmV0dXJuIG5ldyBIYXNoKHNoYShhbGcpKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9tZDUiOjg0LCJidWZmZXIiOjcwLCJjaXBoZXItYmFzZSI6NzksImluaGVyaXRzIjoxMjgsInJpcGVtZDE2MCI6MTU4LCJzaGEuanMiOjE2Mn1dLDgzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewondXNlIHN0cmljdCc7CnZhciBpbnRTaXplID0gNDsKdmFyIHplcm9CdWZmZXIgPSBuZXcgQnVmZmVyKGludFNpemUpOyB6ZXJvQnVmZmVyLmZpbGwoMCk7CnZhciBjaHJzeiA9IDg7CgpmdW5jdGlvbiB0b0FycmF5KGJ1ZiwgYmlnRW5kaWFuKSB7CiAgaWYgKChidWYubGVuZ3RoICUgaW50U2l6ZSkgIT09IDApIHsKICAgIHZhciBsZW4gPSBidWYubGVuZ3RoICsgKGludFNpemUgLSAoYnVmLmxlbmd0aCAlIGludFNpemUpKTsKICAgIGJ1ZiA9IEJ1ZmZlci5jb25jYXQoW2J1ZiwgemVyb0J1ZmZlcl0sIGxlbik7CiAgfQoKICB2YXIgYXJyID0gW107CiAgdmFyIGZuID0gYmlnRW5kaWFuID8gYnVmLnJlYWRJbnQzMkJFIDogYnVmLnJlYWRJbnQzMkxFOwogIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmLmxlbmd0aDsgaSArPSBpbnRTaXplKSB7CiAgICBhcnIucHVzaChmbi5jYWxsKGJ1ZiwgaSkpOwogIH0KICByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiB0b0J1ZmZlcihhcnIsIHNpemUsIGJpZ0VuZGlhbikgewogIHZhciBidWYgPSBuZXcgQnVmZmVyKHNpemUpOwogIHZhciBmbiA9IGJpZ0VuZGlhbiA/IGJ1Zi53cml0ZUludDMyQkUgOiBidWYud3JpdGVJbnQzMkxFOwogIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICBmbi5jYWxsKGJ1ZiwgYXJyW2ldLCBpICogNCwgdHJ1ZSk7CiAgfQogIHJldHVybiBidWY7Cn0KCmZ1bmN0aW9uIGhhc2goYnVmLCBmbiwgaGFzaFNpemUsIGJpZ0VuZGlhbikgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIGJ1ZiA9IG5ldyBCdWZmZXIoYnVmKTsKICB2YXIgYXJyID0gZm4odG9BcnJheShidWYsIGJpZ0VuZGlhbiksIGJ1Zi5sZW5ndGggKiBjaHJzeik7CiAgcmV0dXJuIHRvQnVmZmVyKGFyciwgaGFzaFNpemUsIGJpZ0VuZGlhbik7Cn0KZXhwb3J0cy5oYXNoID0gaGFzaDsKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzB9XSw4NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLyoKICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBSU0EgRGF0YSBTZWN1cml0eSwgSW5jLiBNRDUgTWVzc2FnZQogKiBEaWdlc3QgQWxnb3JpdGhtLCBhcyBkZWZpbmVkIGluIFJGQyAxMzIxLgogKiBWZXJzaW9uIDIuMSBDb3B5cmlnaHQgKEMpIFBhdWwgSm9obnN0b24gMTk5OSAtIDIwMDIuCiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXQKICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlCiAqIFNlZSBodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1IGZvciBtb3JlIGluZm8uCiAqLwoKdmFyIGhlbHBlcnMgPSByZXF1aXJlKCcuL2hlbHBlcnMnKTsKCi8qCiAqIENhbGN1bGF0ZSB0aGUgTUQ1IG9mIGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHMsIGFuZCBhIGJpdCBsZW5ndGgKICovCmZ1bmN0aW9uIGNvcmVfbWQ1KHgsIGxlbikKewogIC8qIGFwcGVuZCBwYWRkaW5nICovCiAgeFtsZW4gPj4gNV0gfD0gMHg4MCA8PCAoKGxlbikgJSAzMik7CiAgeFsoKChsZW4gKyA2NCkgPj4+IDkpIDw8IDQpICsgMTRdID0gbGVuOwoKICB2YXIgYSA9ICAxNzMyNTg0MTkzOwogIHZhciBiID0gLTI3MTczMzg3OTsKICB2YXIgYyA9IC0xNzMyNTg0MTk0OwogIHZhciBkID0gIDI3MTczMzg3ODsKCiAgZm9yKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpICs9IDE2KQogIHsKICAgIHZhciBvbGRhID0gYTsKICAgIHZhciBvbGRiID0gYjsKICAgIHZhciBvbGRjID0gYzsKICAgIHZhciBvbGRkID0gZDsKCiAgICBhID0gbWQ1X2ZmKGEsIGIsIGMsIGQsIHhbaSsgMF0sIDcgLCAtNjgwODc2OTM2KTsKICAgIGQgPSBtZDVfZmYoZCwgYSwgYiwgYywgeFtpKyAxXSwgMTIsIC0zODk1NjQ1ODYpOwogICAgYyA9IG1kNV9mZihjLCBkLCBhLCBiLCB4W2krIDJdLCAxNywgIDYwNjEwNTgxOSk7CiAgICBiID0gbWQ1X2ZmKGIsIGMsIGQsIGEsIHhbaSsgM10sIDIyLCAtMTA0NDUyNTMzMCk7CiAgICBhID0gbWQ1X2ZmKGEsIGIsIGMsIGQsIHhbaSsgNF0sIDcgLCAtMTc2NDE4ODk3KTsKICAgIGQgPSBtZDVfZmYoZCwgYSwgYiwgYywgeFtpKyA1XSwgMTIsICAxMjAwMDgwNDI2KTsKICAgIGMgPSBtZDVfZmYoYywgZCwgYSwgYiwgeFtpKyA2XSwgMTcsIC0xNDczMjMxMzQxKTsKICAgIGIgPSBtZDVfZmYoYiwgYywgZCwgYSwgeFtpKyA3XSwgMjIsIC00NTcwNTk4Myk7CiAgICBhID0gbWQ1X2ZmKGEsIGIsIGMsIGQsIHhbaSsgOF0sIDcgLCAgMTc3MDAzNTQxNik7CiAgICBkID0gbWQ1X2ZmKGQsIGEsIGIsIGMsIHhbaSsgOV0sIDEyLCAtMTk1ODQxNDQxNyk7CiAgICBjID0gbWQ1X2ZmKGMsIGQsIGEsIGIsIHhbaSsxMF0sIDE3LCAtNDIwNjMpOwogICAgYiA9IG1kNV9mZihiLCBjLCBkLCBhLCB4W2krMTFdLCAyMiwgLTE5OTA0MDQxNjIpOwogICAgYSA9IG1kNV9mZihhLCBiLCBjLCBkLCB4W2krMTJdLCA3ICwgIDE4MDQ2MDM2ODIpOwogICAgZCA9IG1kNV9mZihkLCBhLCBiLCBjLCB4W2krMTNdLCAxMiwgLTQwMzQxMTAxKTsKICAgIGMgPSBtZDVfZmYoYywgZCwgYSwgYiwgeFtpKzE0XSwgMTcsIC0xNTAyMDAyMjkwKTsKICAgIGIgPSBtZDVfZmYoYiwgYywgZCwgYSwgeFtpKzE1XSwgMjIsICAxMjM2NTM1MzI5KTsKCiAgICBhID0gbWQ1X2dnKGEsIGIsIGMsIGQsIHhbaSsgMV0sIDUgLCAtMTY1Nzk2NTEwKTsKICAgIGQgPSBtZDVfZ2coZCwgYSwgYiwgYywgeFtpKyA2XSwgOSAsIC0xMDY5NTAxNjMyKTsKICAgIGMgPSBtZDVfZ2coYywgZCwgYSwgYiwgeFtpKzExXSwgMTQsICA2NDM3MTc3MTMpOwogICAgYiA9IG1kNV9nZyhiLCBjLCBkLCBhLCB4W2krIDBdLCAyMCwgLTM3Mzg5NzMwMik7CiAgICBhID0gbWQ1X2dnKGEsIGIsIGMsIGQsIHhbaSsgNV0sIDUgLCAtNzAxNTU4NjkxKTsKICAgIGQgPSBtZDVfZ2coZCwgYSwgYiwgYywgeFtpKzEwXSwgOSAsICAzODAxNjA4Myk7CiAgICBjID0gbWQ1X2dnKGMsIGQsIGEsIGIsIHhbaSsxNV0sIDE0LCAtNjYwNDc4MzM1KTsKICAgIGIgPSBtZDVfZ2coYiwgYywgZCwgYSwgeFtpKyA0XSwgMjAsIC00MDU1Mzc4NDgpOwogICAgYSA9IG1kNV9nZyhhLCBiLCBjLCBkLCB4W2krIDldLCA1ICwgIDU2ODQ0NjQzOCk7CiAgICBkID0gbWQ1X2dnKGQsIGEsIGIsIGMsIHhbaSsxNF0sIDkgLCAtMTAxOTgwMzY5MCk7CiAgICBjID0gbWQ1X2dnKGMsIGQsIGEsIGIsIHhbaSsgM10sIDE0LCAtMTg3MzYzOTYxKTsKICAgIGIgPSBtZDVfZ2coYiwgYywgZCwgYSwgeFtpKyA4XSwgMjAsICAxMTYzNTMxNTAxKTsKICAgIGEgPSBtZDVfZ2coYSwgYiwgYywgZCwgeFtpKzEzXSwgNSAsIC0xNDQ0NjgxNDY3KTsKICAgIGQgPSBtZDVfZ2coZCwgYSwgYiwgYywgeFtpKyAyXSwgOSAsIC01MTQwMzc4NCk7CiAgICBjID0gbWQ1X2dnKGMsIGQsIGEsIGIsIHhbaSsgN10sIDE0LCAgMTczNTMyODQ3Myk7CiAgICBiID0gbWQ1X2dnKGIsIGMsIGQsIGEsIHhbaSsxMl0sIDIwLCAtMTkyNjYwNzczNCk7CgogICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2krIDVdLCA0ICwgLTM3ODU1OCk7CiAgICBkID0gbWQ1X2hoKGQsIGEsIGIsIGMsIHhbaSsgOF0sIDExLCAtMjAyMjU3NDQ2Myk7CiAgICBjID0gbWQ1X2hoKGMsIGQsIGEsIGIsIHhbaSsxMV0sIDE2LCAgMTgzOTAzMDU2Mik7CiAgICBiID0gbWQ1X2hoKGIsIGMsIGQsIGEsIHhbaSsxNF0sIDIzLCAtMzUzMDk1NTYpOwogICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2krIDFdLCA0ICwgLTE1MzA5OTIwNjApOwogICAgZCA9IG1kNV9oaChkLCBhLCBiLCBjLCB4W2krIDRdLCAxMSwgIDEyNzI4OTMzNTMpOwogICAgYyA9IG1kNV9oaChjLCBkLCBhLCBiLCB4W2krIDddLCAxNiwgLTE1NTQ5NzYzMik7CiAgICBiID0gbWQ1X2hoKGIsIGMsIGQsIGEsIHhbaSsxMF0sIDIzLCAtMTA5NDczMDY0MCk7CiAgICBhID0gbWQ1X2hoKGEsIGIsIGMsIGQsIHhbaSsxM10sIDQgLCAgNjgxMjc5MTc0KTsKICAgIGQgPSBtZDVfaGgoZCwgYSwgYiwgYywgeFtpKyAwXSwgMTEsIC0zNTg1MzcyMjIpOwogICAgYyA9IG1kNV9oaChjLCBkLCBhLCBiLCB4W2krIDNdLCAxNiwgLTcyMjUyMTk3OSk7CiAgICBiID0gbWQ1X2hoKGIsIGMsIGQsIGEsIHhbaSsgNl0sIDIzLCAgNzYwMjkxODkpOwogICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2krIDldLCA0ICwgLTY0MDM2NDQ4Nyk7CiAgICBkID0gbWQ1X2hoKGQsIGEsIGIsIGMsIHhbaSsxMl0sIDExLCAtNDIxODE1ODM1KTsKICAgIGMgPSBtZDVfaGgoYywgZCwgYSwgYiwgeFtpKzE1XSwgMTYsICA1MzA3NDI1MjApOwogICAgYiA9IG1kNV9oaChiLCBjLCBkLCBhLCB4W2krIDJdLCAyMywgLTk5NTMzODY1MSk7CgogICAgYSA9IG1kNV9paShhLCBiLCBjLCBkLCB4W2krIDBdLCA2ICwgLTE5ODYzMDg0NCk7CiAgICBkID0gbWQ1X2lpKGQsIGEsIGIsIGMsIHhbaSsgN10sIDEwLCAgMTEyNjg5MTQxNSk7CiAgICBjID0gbWQ1X2lpKGMsIGQsIGEsIGIsIHhbaSsxNF0sIDE1LCAtMTQxNjM1NDkwNSk7CiAgICBiID0gbWQ1X2lpKGIsIGMsIGQsIGEsIHhbaSsgNV0sIDIxLCAtNTc0MzQwNTUpOwogICAgYSA9IG1kNV9paShhLCBiLCBjLCBkLCB4W2krMTJdLCA2ICwgIDE3MDA0ODU1NzEpOwogICAgZCA9IG1kNV9paShkLCBhLCBiLCBjLCB4W2krIDNdLCAxMCwgLTE4OTQ5ODY2MDYpOwogICAgYyA9IG1kNV9paShjLCBkLCBhLCBiLCB4W2krMTBdLCAxNSwgLTEwNTE1MjMpOwogICAgYiA9IG1kNV9paShiLCBjLCBkLCBhLCB4W2krIDFdLCAyMSwgLTIwNTQ5MjI3OTkpOwogICAgYSA9IG1kNV9paShhLCBiLCBjLCBkLCB4W2krIDhdLCA2ICwgIDE4NzMzMTMzNTkpOwogICAgZCA9IG1kNV9paShkLCBhLCBiLCBjLCB4W2krMTVdLCAxMCwgLTMwNjExNzQ0KTsKICAgIGMgPSBtZDVfaWkoYywgZCwgYSwgYiwgeFtpKyA2XSwgMTUsIC0xNTYwMTk4MzgwKTsKICAgIGIgPSBtZDVfaWkoYiwgYywgZCwgYSwgeFtpKzEzXSwgMjEsICAxMzA5MTUxNjQ5KTsKICAgIGEgPSBtZDVfaWkoYSwgYiwgYywgZCwgeFtpKyA0XSwgNiAsIC0xNDU1MjMwNzApOwogICAgZCA9IG1kNV9paShkLCBhLCBiLCBjLCB4W2krMTFdLCAxMCwgLTExMjAyMTAzNzkpOwogICAgYyA9IG1kNV9paShjLCBkLCBhLCBiLCB4W2krIDJdLCAxNSwgIDcxODc4NzI1OSk7CiAgICBiID0gbWQ1X2lpKGIsIGMsIGQsIGEsIHhbaSsgOV0sIDIxLCAtMzQzNDg1NTUxKTsKCiAgICBhID0gc2FmZV9hZGQoYSwgb2xkYSk7CiAgICBiID0gc2FmZV9hZGQoYiwgb2xkYik7CiAgICBjID0gc2FmZV9hZGQoYywgb2xkYyk7CiAgICBkID0gc2FmZV9hZGQoZCwgb2xkZCk7CiAgfQogIHJldHVybiBBcnJheShhLCBiLCBjLCBkKTsKCn0KCi8qCiAqIFRoZXNlIGZ1bmN0aW9ucyBpbXBsZW1lbnQgdGhlIGZvdXIgYmFzaWMgb3BlcmF0aW9ucyB0aGUgYWxnb3JpdGhtIHVzZXMuCiAqLwpmdW5jdGlvbiBtZDVfY21uKHEsIGEsIGIsIHgsIHMsIHQpCnsKICByZXR1cm4gc2FmZV9hZGQoYml0X3JvbChzYWZlX2FkZChzYWZlX2FkZChhLCBxKSwgc2FmZV9hZGQoeCwgdCkpLCBzKSxiKTsKfQpmdW5jdGlvbiBtZDVfZmYoYSwgYiwgYywgZCwgeCwgcywgdCkKewogIHJldHVybiBtZDVfY21uKChiICYgYykgfCAoKH5iKSAmIGQpLCBhLCBiLCB4LCBzLCB0KTsKfQpmdW5jdGlvbiBtZDVfZ2coYSwgYiwgYywgZCwgeCwgcywgdCkKewogIHJldHVybiBtZDVfY21uKChiICYgZCkgfCAoYyAmICh+ZCkpLCBhLCBiLCB4LCBzLCB0KTsKfQpmdW5jdGlvbiBtZDVfaGgoYSwgYiwgYywgZCwgeCwgcywgdCkKewogIHJldHVybiBtZDVfY21uKGIgXiBjIF4gZCwgYSwgYiwgeCwgcywgdCk7Cn0KZnVuY3Rpb24gbWQ1X2lpKGEsIGIsIGMsIGQsIHgsIHMsIHQpCnsKICByZXR1cm4gbWQ1X2NtbihjIF4gKGIgfCAofmQpKSwgYSwgYiwgeCwgcywgdCk7Cn0KCi8qCiAqIEFkZCBpbnRlZ2Vycywgd3JhcHBpbmcgYXQgMl4zMi4gVGhpcyB1c2VzIDE2LWJpdCBvcGVyYXRpb25zIGludGVybmFsbHkKICogdG8gd29yayBhcm91bmQgYnVncyBpbiBzb21lIEpTIGludGVycHJldGVycy4KICovCmZ1bmN0aW9uIHNhZmVfYWRkKHgsIHkpCnsKICB2YXIgbHN3ID0gKHggJiAweEZGRkYpICsgKHkgJiAweEZGRkYpOwogIHZhciBtc3cgPSAoeCA+PiAxNikgKyAoeSA+PiAxNikgKyAobHN3ID4+IDE2KTsKICByZXR1cm4gKG1zdyA8PCAxNikgfCAobHN3ICYgMHhGRkZGKTsKfQoKLyoKICogQml0d2lzZSByb3RhdGUgYSAzMi1iaXQgbnVtYmVyIHRvIHRoZSBsZWZ0LgogKi8KZnVuY3Rpb24gYml0X3JvbChudW0sIGNudCkKewogIHJldHVybiAobnVtIDw8IGNudCkgfCAobnVtID4+PiAoMzIgLSBjbnQpKTsKfQoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtZDUoYnVmKSB7CiAgcmV0dXJuIGhlbHBlcnMuaGFzaChidWYsIGNvcmVfbWQ1LCAxNik7Cn07Cn0seyIuL2hlbHBlcnMiOjgzfV0sODU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cid1c2Ugc3RyaWN0JzsKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaC9icm93c2VyJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKCnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdzdHJlYW0nKS5UcmFuc2Zvcm0KCnZhciBaRVJPUyA9IG5ldyBCdWZmZXIoMTI4KQpaRVJPUy5maWxsKDApCgpmdW5jdGlvbiBIbWFjKGFsZywga2V5KSB7CiAgVHJhbnNmb3JtLmNhbGwodGhpcykKICBhbGcgPSBhbGcudG9Mb3dlckNhc2UoKQogIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykgewogICAga2V5ID0gbmV3IEJ1ZmZlcihrZXkpCiAgfQoKICB2YXIgYmxvY2tzaXplID0gKGFsZyA9PT0gJ3NoYTUxMicgfHwgYWxnID09PSAnc2hhMzg0JykgPyAxMjggOiA2NAoKICB0aGlzLl9hbGcgPSBhbGcKICB0aGlzLl9rZXkgPSBrZXkKCiAgaWYgKGtleS5sZW5ndGggPiBibG9ja3NpemUpIHsKICAgIGtleSA9IGNyZWF0ZUhhc2goYWxnKS51cGRhdGUoa2V5KS5kaWdlc3QoKQoKICB9IGVsc2UgaWYgKGtleS5sZW5ndGggPCBibG9ja3NpemUpIHsKICAgIGtleSA9IEJ1ZmZlci5jb25jYXQoW2tleSwgWkVST1NdLCBibG9ja3NpemUpCiAgfQoKICB2YXIgaXBhZCA9IHRoaXMuX2lwYWQgPSBuZXcgQnVmZmVyKGJsb2Nrc2l6ZSkKICB2YXIgb3BhZCA9IHRoaXMuX29wYWQgPSBuZXcgQnVmZmVyKGJsb2Nrc2l6ZSkKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBibG9ja3NpemU7IGkrKykgewogICAgaXBhZFtpXSA9IGtleVtpXSBeIDB4MzYKICAgIG9wYWRbaV0gPSBrZXlbaV0gXiAweDVDCiAgfQoKICB0aGlzLl9oYXNoID0gY3JlYXRlSGFzaChhbGcpLnVwZGF0ZShpcGFkKQp9Cgppbmhlcml0cyhIbWFjLCBUcmFuc2Zvcm0pCgpIbWFjLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSwgZW5jKSB7CiAgdGhpcy5faGFzaC51cGRhdGUoZGF0YSwgZW5jKQoKICByZXR1cm4gdGhpcwp9CgpIbWFjLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGRhdGEsIF8sIG5leHQpIHsKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhKQoKICBuZXh0KCkKfQoKSG1hYy5wcm90b3R5cGUuX2ZsdXNoID0gZnVuY3Rpb24gKG5leHQpIHsKICB0aGlzLnB1c2godGhpcy5kaWdlc3QoKSkKCiAgbmV4dCgpCn0KCkhtYWMucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uIChlbmMpIHsKICB2YXIgaCA9IHRoaXMuX2hhc2guZGlnZXN0KCkKCiAgcmV0dXJuIGNyZWF0ZUhhc2godGhpcy5fYWxnKS51cGRhdGUodGhpcy5fb3BhZCkudXBkYXRlKGgpLmRpZ2VzdChlbmMpCn0KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlSG1hYyhhbGcsIGtleSkgewogIHJldHVybiBuZXcgSG1hYyhhbGcsIGtleSkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzAsImNyZWF0ZS1oYXNoL2Jyb3dzZXIiOjgyLCJpbmhlcml0cyI6MTI4LCJzdHJlYW0iOjE3MH1dLDg2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnCgpleHBvcnRzLnJhbmRvbUJ5dGVzID0gZXhwb3J0cy5ybmcgPSBleHBvcnRzLnBzZXVkb1JhbmRvbUJ5dGVzID0gZXhwb3J0cy5wcm5nID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKQpleHBvcnRzLmNyZWF0ZUhhc2ggPSBleHBvcnRzLkhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpCmV4cG9ydHMuY3JlYXRlSG1hYyA9IGV4cG9ydHMuSG1hYyA9IHJlcXVpcmUoJ2NyZWF0ZS1obWFjJykKCnZhciBoYXNoZXMgPSBbJ3NoYTEnLCAnc2hhMjI0JywgJ3NoYTI1NicsICdzaGEzODQnLCAnc2hhNTEyJywgJ21kNScsICdybWQxNjAnXS5jb25jYXQoT2JqZWN0LmtleXMocmVxdWlyZSgnYnJvd3NlcmlmeS1zaWduL2FsZ29zJykpKQpleHBvcnRzLmdldEhhc2hlcyA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gaGFzaGVzCn0KCnZhciBwID0gcmVxdWlyZSgncGJrZGYyJykKZXhwb3J0cy5wYmtkZjIgPSBwLnBia2RmMgpleHBvcnRzLnBia2RmMlN5bmMgPSBwLnBia2RmMlN5bmMKCnZhciBhZXMgPSByZXF1aXJlKCdicm93c2VyaWZ5LWNpcGhlcicpCjtbCiAgJ0NpcGhlcicsCiAgJ2NyZWF0ZUNpcGhlcicsCiAgJ0NpcGhlcml2JywKICAnY3JlYXRlQ2lwaGVyaXYnLAogICdEZWNpcGhlcicsCiAgJ2NyZWF0ZURlY2lwaGVyJywKICAnRGVjaXBoZXJpdicsCiAgJ2NyZWF0ZURlY2lwaGVyaXYnLAogICdnZXRDaXBoZXJzJywKICAnbGlzdENpcGhlcnMnCl0uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgZXhwb3J0c1trZXldID0gYWVzW2tleV0KfSkKCnZhciBkaCA9IHJlcXVpcmUoJ2RpZmZpZS1oZWxsbWFuJykKO1sKICAnRGlmZmllSGVsbG1hbkdyb3VwJywKICAnY3JlYXRlRGlmZmllSGVsbG1hbkdyb3VwJywKICAnZ2V0RGlmZmllSGVsbG1hbicsCiAgJ2NyZWF0ZURpZmZpZUhlbGxtYW4nLAogICdEaWZmaWVIZWxsbWFuJwpdLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogIGV4cG9ydHNba2V5XSA9IGRoW2tleV0KfSkKCnZhciBzaWduID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1zaWduJykKO1sKICAnY3JlYXRlU2lnbicsCiAgJ1NpZ24nLAogICdjcmVhdGVWZXJpZnknLAogICdWZXJpZnknCl0uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgZXhwb3J0c1trZXldID0gc2lnbltrZXldCn0pCgpleHBvcnRzLmNyZWF0ZUVDREggPSByZXF1aXJlKCdjcmVhdGUtZWNkaCcpCgp2YXIgcHVibGljRW5jcnlwdCA9IHJlcXVpcmUoJ3B1YmxpYy1lbmNyeXB0JykKCjtbCiAgJ3B1YmxpY0VuY3J5cHQnLAogICdwcml2YXRlRW5jcnlwdCcsCiAgJ3B1YmxpY0RlY3J5cHQnLAogICdwcml2YXRlRGVjcnlwdCcKXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICBleHBvcnRzW2tleV0gPSBwdWJsaWNFbmNyeXB0W2tleV0KfSkKCi8vIHRoZSBsZWFzdCBJIGNhbiBkbyBpcyBtYWtlIGVycm9yIG1lc3NhZ2VzIGZvciB0aGUgcmVzdCBvZiB0aGUgbm9kZS5qcy9jcnlwdG8gYXBpLgo7WwogICdjcmVhdGVDcmVkZW50aWFscycKXS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgZXhwb3J0c1tuYW1lXSA9IGZ1bmN0aW9uICgpIHsKICAgIHRocm93IG5ldyBFcnJvcihbCiAgICAgICdzb3JyeSwgJyArIG5hbWUgKyAnIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQnLAogICAgICAnd2UgYWNjZXB0IHB1bGwgcmVxdWVzdHMnLAogICAgICAnaHR0cHM6Ly9naXRodWIuY29tL2NyeXB0by1icm93c2VyaWZ5L2NyeXB0by1icm93c2VyaWZ5JwogICAgXS5qb2luKCdcbicpKQogIH0KfSkKCn0seyJicm93c2VyaWZ5LWNpcGhlciI6NTksImJyb3dzZXJpZnktc2lnbiI6NjQsImJyb3dzZXJpZnktc2lnbi9hbGdvcyI6NjMsImNyZWF0ZS1lY2RoIjo4MSwiY3JlYXRlLWhhc2giOjgyLCJjcmVhdGUtaG1hYyI6ODUsImRpZmZpZS1oZWxsbWFuIjo5MywicGJrZGYyIjoxMzcsInB1YmxpYy1lbmNyeXB0IjoxNDAsInJhbmRvbWJ5dGVzIjoxNDZ9XSw4NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCmV4cG9ydHMudXRpbHMgPSByZXF1aXJlKCcuL2Rlcy91dGlscycpOwpleHBvcnRzLkNpcGhlciA9IHJlcXVpcmUoJy4vZGVzL2NpcGhlcicpOwpleHBvcnRzLkRFUyA9IHJlcXVpcmUoJy4vZGVzL2RlcycpOwpleHBvcnRzLkNCQyA9IHJlcXVpcmUoJy4vZGVzL2NiYycpOwpleHBvcnRzLkVERSA9IHJlcXVpcmUoJy4vZGVzL2VkZScpOwoKfSx7Ii4vZGVzL2NiYyI6ODgsIi4vZGVzL2NpcGhlciI6ODksIi4vZGVzL2RlcyI6OTAsIi4vZGVzL2VkZSI6OTEsIi4vZGVzL3V0aWxzIjo5Mn1dLDg4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGFzc2VydCA9IHJlcXVpcmUoJ21pbmltYWxpc3RpYy1hc3NlcnQnKTsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCnZhciBwcm90byA9IHt9OwoKZnVuY3Rpb24gQ0JDU3RhdGUoaXYpIHsKICBhc3NlcnQuZXF1YWwoaXYubGVuZ3RoLCA4LCAnSW52YWxpZCBJViBsZW5ndGgnKTsKCiAgdGhpcy5pdiA9IG5ldyBBcnJheSg4KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXYubGVuZ3RoOyBpKyspCiAgICB0aGlzLml2W2ldID0gaXZbaV07Cn0KCmZ1bmN0aW9uIGluc3RhbnRpYXRlKEJhc2UpIHsKICBmdW5jdGlvbiBDQkMob3B0aW9ucykgewogICAgQmFzZS5jYWxsKHRoaXMsIG9wdGlvbnMpOwogICAgdGhpcy5fY2JjSW5pdCgpOwogIH0KICBpbmhlcml0cyhDQkMsIEJhc2UpOwoKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3RvKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBrZXkgPSBrZXlzW2ldOwogICAgQ0JDLnByb3RvdHlwZVtrZXldID0gcHJvdG9ba2V5XTsKICB9CgogIENCQy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUob3B0aW9ucykgewogICAgcmV0dXJuIG5ldyBDQkMob3B0aW9ucyk7CiAgfTsKCiAgcmV0dXJuIENCQzsKfQoKZXhwb3J0cy5pbnN0YW50aWF0ZSA9IGluc3RhbnRpYXRlOwoKcHJvdG8uX2NiY0luaXQgPSBmdW5jdGlvbiBfY2JjSW5pdCgpIHsKICB2YXIgc3RhdGUgPSBuZXcgQ0JDU3RhdGUodGhpcy5vcHRpb25zLml2KTsKICB0aGlzLl9jYmNTdGF0ZSA9IHN0YXRlOwp9OwoKcHJvdG8uX3VwZGF0ZSA9IGZ1bmN0aW9uIF91cGRhdGUoaW5wLCBpbk9mZiwgb3V0LCBvdXRPZmYpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9jYmNTdGF0ZTsKICB2YXIgc3VwZXJQcm90byA9IHRoaXMuY29uc3RydWN0b3Iuc3VwZXJfLnByb3RvdHlwZTsKCiAgdmFyIGl2ID0gc3RhdGUuaXY7CiAgaWYgKHRoaXMudHlwZSA9PT0gJ2VuY3J5cHQnKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspCiAgICAgIGl2W2ldIF49IGlucFtpbk9mZiArIGldOwoKICAgIHN1cGVyUHJvdG8uX3VwZGF0ZS5jYWxsKHRoaXMsIGl2LCAwLCBvdXQsIG91dE9mZik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgaSsrKQogICAgICBpdltpXSA9IG91dFtvdXRPZmYgKyBpXTsKICB9IGVsc2UgewogICAgc3VwZXJQcm90by5fdXBkYXRlLmNhbGwodGhpcywgaW5wLCBpbk9mZiwgb3V0LCBvdXRPZmYpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ibG9ja1NpemU7IGkrKykKICAgICAgb3V0W291dE9mZiArIGldIF49IGl2W2ldOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ibG9ja1NpemU7IGkrKykKICAgICAgaXZbaV0gPSBpbnBbaW5PZmYgKyBpXTsKICB9Cn07Cgp9LHsiaW5oZXJpdHMiOjEyOCwibWluaW1hbGlzdGljLWFzc2VydCI6MTMyfV0sODk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnbWluaW1hbGlzdGljLWFzc2VydCcpOwoKZnVuY3Rpb24gQ2lwaGVyKG9wdGlvbnMpIHsKICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwoKICB0aGlzLnR5cGUgPSB0aGlzLm9wdGlvbnMudHlwZTsKICB0aGlzLmJsb2NrU2l6ZSA9IDg7CiAgdGhpcy5faW5pdCgpOwoKICB0aGlzLmJ1ZmZlciA9IG5ldyBBcnJheSh0aGlzLmJsb2NrU2l6ZSk7CiAgdGhpcy5idWZmZXJPZmYgPSAwOwp9Cm1vZHVsZS5leHBvcnRzID0gQ2lwaGVyOwoKQ2lwaGVyLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIF9pbml0KCkgewogIC8vIE1pZ2h0IGJlIG92ZXJyaWRlZAp9OwoKQ2lwaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZGF0YSkgewogIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkKICAgIHJldHVybiBbXTsKCiAgaWYgKHRoaXMudHlwZSA9PT0gJ2RlY3J5cHQnKQogICAgcmV0dXJuIHRoaXMuX3VwZGF0ZURlY3J5cHQoZGF0YSk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuX3VwZGF0ZUVuY3J5cHQoZGF0YSk7Cn07CgpDaXBoZXIucHJvdG90eXBlLl9idWZmZXIgPSBmdW5jdGlvbiBfYnVmZmVyKGRhdGEsIG9mZikgewogIC8vIEFwcGVuZCBkYXRhIHRvIGJ1ZmZlcgogIHZhciBtaW4gPSBNYXRoLm1pbih0aGlzLmJ1ZmZlci5sZW5ndGggLSB0aGlzLmJ1ZmZlck9mZiwgZGF0YS5sZW5ndGggLSBvZmYpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbWluOyBpKyspCiAgICB0aGlzLmJ1ZmZlclt0aGlzLmJ1ZmZlck9mZiArIGldID0gZGF0YVtvZmYgKyBpXTsKICB0aGlzLmJ1ZmZlck9mZiArPSBtaW47CgogIC8vIFNoaWZ0IG5leHQKICByZXR1cm4gbWluOwp9OwoKQ2lwaGVyLnByb3RvdHlwZS5fZmx1c2hCdWZmZXIgPSBmdW5jdGlvbiBfZmx1c2hCdWZmZXIob3V0LCBvZmYpIHsKICB0aGlzLl91cGRhdGUodGhpcy5idWZmZXIsIDAsIG91dCwgb2ZmKTsKICB0aGlzLmJ1ZmZlck9mZiA9IDA7CiAgcmV0dXJuIHRoaXMuYmxvY2tTaXplOwp9OwoKQ2lwaGVyLnByb3RvdHlwZS5fdXBkYXRlRW5jcnlwdCA9IGZ1bmN0aW9uIF91cGRhdGVFbmNyeXB0KGRhdGEpIHsKICB2YXIgaW5wdXRPZmYgPSAwOwogIHZhciBvdXRwdXRPZmYgPSAwOwoKICB2YXIgY291bnQgPSAoKHRoaXMuYnVmZmVyT2ZmICsgZGF0YS5sZW5ndGgpIC8gdGhpcy5ibG9ja1NpemUpIHwgMDsKICB2YXIgb3V0ID0gbmV3IEFycmF5KGNvdW50ICogdGhpcy5ibG9ja1NpemUpOwoKICBpZiAodGhpcy5idWZmZXJPZmYgIT09IDApIHsKICAgIGlucHV0T2ZmICs9IHRoaXMuX2J1ZmZlcihkYXRhLCBpbnB1dE9mZik7CgogICAgaWYgKHRoaXMuYnVmZmVyT2ZmID09PSB0aGlzLmJ1ZmZlci5sZW5ndGgpCiAgICAgIG91dHB1dE9mZiArPSB0aGlzLl9mbHVzaEJ1ZmZlcihvdXQsIG91dHB1dE9mZik7CiAgfQoKICAvLyBXcml0ZSBibG9ja3MKICB2YXIgbWF4ID0gZGF0YS5sZW5ndGggLSAoKGRhdGEubGVuZ3RoIC0gaW5wdXRPZmYpICUgdGhpcy5ibG9ja1NpemUpOwogIGZvciAoOyBpbnB1dE9mZiA8IG1heDsgaW5wdXRPZmYgKz0gdGhpcy5ibG9ja1NpemUpIHsKICAgIHRoaXMuX3VwZGF0ZShkYXRhLCBpbnB1dE9mZiwgb3V0LCBvdXRwdXRPZmYpOwogICAgb3V0cHV0T2ZmICs9IHRoaXMuYmxvY2tTaXplOwogIH0KCiAgLy8gUXVldWUgcmVzdAogIGZvciAoOyBpbnB1dE9mZiA8IGRhdGEubGVuZ3RoOyBpbnB1dE9mZisrLCB0aGlzLmJ1ZmZlck9mZisrKQogICAgdGhpcy5idWZmZXJbdGhpcy5idWZmZXJPZmZdID0gZGF0YVtpbnB1dE9mZl07CgogIHJldHVybiBvdXQ7Cn07CgpDaXBoZXIucHJvdG90eXBlLl91cGRhdGVEZWNyeXB0ID0gZnVuY3Rpb24gX3VwZGF0ZURlY3J5cHQoZGF0YSkgewogIHZhciBpbnB1dE9mZiA9IDA7CiAgdmFyIG91dHB1dE9mZiA9IDA7CgogIHZhciBjb3VudCA9IE1hdGguY2VpbCgodGhpcy5idWZmZXJPZmYgKyBkYXRhLmxlbmd0aCkgLyB0aGlzLmJsb2NrU2l6ZSkgLSAxOwogIHZhciBvdXQgPSBuZXcgQXJyYXkoY291bnQgKiB0aGlzLmJsb2NrU2l6ZSk7CgogIC8vIFRPRE8oaW5kdXRueSk6IG9wdGltaXplIGl0LCB0aGlzIGlzIGZhciBmcm9tIG9wdGltYWwKICBmb3IgKDsgY291bnQgPiAwOyBjb3VudC0tKSB7CiAgICBpbnB1dE9mZiArPSB0aGlzLl9idWZmZXIoZGF0YSwgaW5wdXRPZmYpOwogICAgb3V0cHV0T2ZmICs9IHRoaXMuX2ZsdXNoQnVmZmVyKG91dCwgb3V0cHV0T2ZmKTsKICB9CgogIC8vIEJ1ZmZlciByZXN0IG9mIHRoZSBpbnB1dAogIGlucHV0T2ZmICs9IHRoaXMuX2J1ZmZlcihkYXRhLCBpbnB1dE9mZik7CgogIHJldHVybiBvdXQ7Cn07CgpDaXBoZXIucHJvdG90eXBlLmZpbmFsID0gZnVuY3Rpb24gZmluYWwoYnVmZmVyKSB7CiAgdmFyIGZpcnN0OwogIGlmIChidWZmZXIpCiAgICBmaXJzdCA9IHRoaXMudXBkYXRlKGJ1ZmZlcik7CgogIHZhciBsYXN0OwogIGlmICh0aGlzLnR5cGUgPT09ICdlbmNyeXB0JykKICAgIGxhc3QgPSB0aGlzLl9maW5hbEVuY3J5cHQoKTsKICBlbHNlCiAgICBsYXN0ID0gdGhpcy5fZmluYWxEZWNyeXB0KCk7CgogIGlmIChmaXJzdCkKICAgIHJldHVybiBmaXJzdC5jb25jYXQobGFzdCk7CiAgZWxzZQogICAgcmV0dXJuIGxhc3Q7Cn07CgpDaXBoZXIucHJvdG90eXBlLl9wYWQgPSBmdW5jdGlvbiBfcGFkKGJ1ZmZlciwgb2ZmKSB7CiAgaWYgKG9mZiA9PT0gMCkKICAgIHJldHVybiBmYWxzZTsKCiAgd2hpbGUgKG9mZiA8IGJ1ZmZlci5sZW5ndGgpCiAgICBidWZmZXJbb2ZmKytdID0gMDsKCiAgcmV0dXJuIHRydWU7Cn07CgpDaXBoZXIucHJvdG90eXBlLl9maW5hbEVuY3J5cHQgPSBmdW5jdGlvbiBfZmluYWxFbmNyeXB0KCkgewogIGlmICghdGhpcy5fcGFkKHRoaXMuYnVmZmVyLCB0aGlzLmJ1ZmZlck9mZikpCiAgICByZXR1cm4gW107CgogIHZhciBvdXQgPSBuZXcgQXJyYXkodGhpcy5ibG9ja1NpemUpOwogIHRoaXMuX3VwZGF0ZSh0aGlzLmJ1ZmZlciwgMCwgb3V0LCAwKTsKICByZXR1cm4gb3V0Owp9OwoKQ2lwaGVyLnByb3RvdHlwZS5fdW5wYWQgPSBmdW5jdGlvbiBfdW5wYWQoYnVmZmVyKSB7CiAgcmV0dXJuIGJ1ZmZlcjsKfTsKCkNpcGhlci5wcm90b3R5cGUuX2ZpbmFsRGVjcnlwdCA9IGZ1bmN0aW9uIF9maW5hbERlY3J5cHQoKSB7CiAgYXNzZXJ0LmVxdWFsKHRoaXMuYnVmZmVyT2ZmLCB0aGlzLmJsb2NrU2l6ZSwgJ05vdCBlbm91Z2ggZGF0YSB0byBkZWNyeXB0Jyk7CiAgdmFyIG91dCA9IG5ldyBBcnJheSh0aGlzLmJsb2NrU2l6ZSk7CiAgdGhpcy5fZmx1c2hCdWZmZXIob3V0LCAwKTsKCiAgcmV0dXJuIHRoaXMuX3VucGFkKG91dCk7Cn07Cgp9LHsibWluaW1hbGlzdGljLWFzc2VydCI6MTMyfV0sOTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnbWluaW1hbGlzdGljLWFzc2VydCcpOwp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwoKdmFyIGRlcyA9IHJlcXVpcmUoJy4uL2RlcycpOwp2YXIgdXRpbHMgPSBkZXMudXRpbHM7CnZhciBDaXBoZXIgPSBkZXMuQ2lwaGVyOwoKZnVuY3Rpb24gREVTU3RhdGUoKSB7CiAgdGhpcy50bXAgPSBuZXcgQXJyYXkoMik7CiAgdGhpcy5rZXlzID0gbnVsbDsKfQoKZnVuY3Rpb24gREVTKG9wdGlvbnMpIHsKICBDaXBoZXIuY2FsbCh0aGlzLCBvcHRpb25zKTsKCiAgdmFyIHN0YXRlID0gbmV3IERFU1N0YXRlKCk7CiAgdGhpcy5fZGVzU3RhdGUgPSBzdGF0ZTsKCiAgdGhpcy5kZXJpdmVLZXlzKHN0YXRlLCBvcHRpb25zLmtleSk7Cn0KaW5oZXJpdHMoREVTLCBDaXBoZXIpOwptb2R1bGUuZXhwb3J0cyA9IERFUzsKCkRFUy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUob3B0aW9ucykgewogIHJldHVybiBuZXcgREVTKG9wdGlvbnMpOwp9OwoKdmFyIHNoaWZ0VGFibGUgPSBbCiAgMSwgMSwgMiwgMiwgMiwgMiwgMiwgMiwKICAxLCAyLCAyLCAyLCAyLCAyLCAyLCAxCl07CgpERVMucHJvdG90eXBlLmRlcml2ZUtleXMgPSBmdW5jdGlvbiBkZXJpdmVLZXlzKHN0YXRlLCBrZXkpIHsKICBzdGF0ZS5rZXlzID0gbmV3IEFycmF5KDE2ICogMik7CgogIGFzc2VydC5lcXVhbChrZXkubGVuZ3RoLCB0aGlzLmJsb2NrU2l6ZSwgJ0ludmFsaWQga2V5IGxlbmd0aCcpOwoKICB2YXIga0wgPSB1dGlscy5yZWFkVUludDMyQkUoa2V5LCAwKTsKICB2YXIga1IgPSB1dGlscy5yZWFkVUludDMyQkUoa2V5LCA0KTsKCiAgdXRpbHMucGMxKGtMLCBrUiwgc3RhdGUudG1wLCAwKTsKICBrTCA9IHN0YXRlLnRtcFswXTsKICBrUiA9IHN0YXRlLnRtcFsxXTsKICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLmtleXMubGVuZ3RoOyBpICs9IDIpIHsKICAgIHZhciBzaGlmdCA9IHNoaWZ0VGFibGVbaSA+Pj4gMV07CiAgICBrTCA9IHV0aWxzLnIyOHNobChrTCwgc2hpZnQpOwogICAga1IgPSB1dGlscy5yMjhzaGwoa1IsIHNoaWZ0KTsKICAgIHV0aWxzLnBjMihrTCwga1IsIHN0YXRlLmtleXMsIGkpOwogIH0KfTsKCkRFUy5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIF91cGRhdGUoaW5wLCBpbk9mZiwgb3V0LCBvdXRPZmYpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9kZXNTdGF0ZTsKCiAgdmFyIGwgPSB1dGlscy5yZWFkVUludDMyQkUoaW5wLCBpbk9mZik7CiAgdmFyIHIgPSB1dGlscy5yZWFkVUludDMyQkUoaW5wLCBpbk9mZiArIDQpOwoKICAvLyBJbml0aWFsIFBlcm11dGF0aW9uCiAgdXRpbHMuaXAobCwgciwgc3RhdGUudG1wLCAwKTsKICBsID0gc3RhdGUudG1wWzBdOwogIHIgPSBzdGF0ZS50bXBbMV07CgogIGlmICh0aGlzLnR5cGUgPT09ICdlbmNyeXB0JykKICAgIHRoaXMuX2VuY3J5cHQoc3RhdGUsIGwsIHIsIHN0YXRlLnRtcCwgMCk7CiAgZWxzZQogICAgdGhpcy5fZGVjcnlwdChzdGF0ZSwgbCwgciwgc3RhdGUudG1wLCAwKTsKCiAgbCA9IHN0YXRlLnRtcFswXTsKICByID0gc3RhdGUudG1wWzFdOwoKICB1dGlscy53cml0ZVVJbnQzMkJFKG91dCwgbCwgb3V0T2ZmKTsKICB1dGlscy53cml0ZVVJbnQzMkJFKG91dCwgciwgb3V0T2ZmICsgNCk7Cn07CgpERVMucHJvdG90eXBlLl9wYWQgPSBmdW5jdGlvbiBfcGFkKGJ1ZmZlciwgb2ZmKSB7CiAgdmFyIHZhbHVlID0gYnVmZmVyLmxlbmd0aCAtIG9mZjsKICBmb3IgKHZhciBpID0gb2ZmOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKQogICAgYnVmZmVyW2ldID0gdmFsdWU7CgogIHJldHVybiB0cnVlOwp9OwoKREVTLnByb3RvdHlwZS5fdW5wYWQgPSBmdW5jdGlvbiBfdW5wYWQoYnVmZmVyKSB7CiAgdmFyIHBhZCA9IGJ1ZmZlcltidWZmZXIubGVuZ3RoIC0gMV07CiAgZm9yICh2YXIgaSA9IGJ1ZmZlci5sZW5ndGggLSBwYWQ7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspCiAgICBhc3NlcnQuZXF1YWwoYnVmZmVyW2ldLCBwYWQpOwoKICByZXR1cm4gYnVmZmVyLnNsaWNlKDAsIGJ1ZmZlci5sZW5ndGggLSBwYWQpOwp9OwoKREVTLnByb3RvdHlwZS5fZW5jcnlwdCA9IGZ1bmN0aW9uIF9lbmNyeXB0KHN0YXRlLCBsU3RhcnQsIHJTdGFydCwgb3V0LCBvZmYpIHsKICB2YXIgbCA9IGxTdGFydDsKICB2YXIgciA9IHJTdGFydDsKCiAgLy8gQXBwbHkgZigpIHgxNiB0aW1lcwogIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUua2V5cy5sZW5ndGg7IGkgKz0gMikgewogICAgdmFyIGtleUwgPSBzdGF0ZS5rZXlzW2ldOwogICAgdmFyIGtleVIgPSBzdGF0ZS5rZXlzW2kgKyAxXTsKCiAgICAvLyBmKHIsIGspCiAgICB1dGlscy5leHBhbmQociwgc3RhdGUudG1wLCAwKTsKCiAgICBrZXlMIF49IHN0YXRlLnRtcFswXTsKICAgIGtleVIgXj0gc3RhdGUudG1wWzFdOwogICAgdmFyIHMgPSB1dGlscy5zdWJzdGl0dXRlKGtleUwsIGtleVIpOwogICAgdmFyIGYgPSB1dGlscy5wZXJtdXRlKHMpOwoKICAgIHZhciB0ID0gcjsKICAgIHIgPSAobCBeIGYpID4+PiAwOwogICAgbCA9IHQ7CiAgfQoKICAvLyBSZXZlcnNlIEluaXRpYWwgUGVybXV0YXRpb24KICB1dGlscy5yaXAociwgbCwgb3V0LCBvZmYpOwp9OwoKREVTLnByb3RvdHlwZS5fZGVjcnlwdCA9IGZ1bmN0aW9uIF9kZWNyeXB0KHN0YXRlLCBsU3RhcnQsIHJTdGFydCwgb3V0LCBvZmYpIHsKICB2YXIgbCA9IHJTdGFydDsKICB2YXIgciA9IGxTdGFydDsKCiAgLy8gQXBwbHkgZigpIHgxNiB0aW1lcwogIGZvciAodmFyIGkgPSBzdGF0ZS5rZXlzLmxlbmd0aCAtIDI7IGkgPj0gMDsgaSAtPSAyKSB7CiAgICB2YXIga2V5TCA9IHN0YXRlLmtleXNbaV07CiAgICB2YXIga2V5UiA9IHN0YXRlLmtleXNbaSArIDFdOwoKICAgIC8vIGYociwgaykKICAgIHV0aWxzLmV4cGFuZChsLCBzdGF0ZS50bXAsIDApOwoKICAgIGtleUwgXj0gc3RhdGUudG1wWzBdOwogICAga2V5UiBePSBzdGF0ZS50bXBbMV07CiAgICB2YXIgcyA9IHV0aWxzLnN1YnN0aXR1dGUoa2V5TCwga2V5Uik7CiAgICB2YXIgZiA9IHV0aWxzLnBlcm11dGUocyk7CgogICAgdmFyIHQgPSBsOwogICAgbCA9IChyIF4gZikgPj4+IDA7CiAgICByID0gdDsKICB9CgogIC8vIFJldmVyc2UgSW5pdGlhbCBQZXJtdXRhdGlvbgogIHV0aWxzLnJpcChsLCByLCBvdXQsIG9mZik7Cn07Cgp9LHsiLi4vZGVzIjo4NywiaW5oZXJpdHMiOjEyOCwibWluaW1hbGlzdGljLWFzc2VydCI6MTMyfV0sOTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnbWluaW1hbGlzdGljLWFzc2VydCcpOwp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwoKdmFyIGRlcyA9IHJlcXVpcmUoJy4uL2RlcycpOwp2YXIgQ2lwaGVyID0gZGVzLkNpcGhlcjsKdmFyIERFUyA9IGRlcy5ERVM7CgpmdW5jdGlvbiBFREVTdGF0ZSh0eXBlLCBrZXkpIHsKICBhc3NlcnQuZXF1YWwoa2V5Lmxlbmd0aCwgMjQsICdJbnZhbGlkIGtleSBsZW5ndGgnKTsKCiAgdmFyIGsxID0ga2V5LnNsaWNlKDAsIDgpOwogIHZhciBrMiA9IGtleS5zbGljZSg4LCAxNik7CiAgdmFyIGszID0ga2V5LnNsaWNlKDE2LCAyNCk7CgogIGlmICh0eXBlID09PSAnZW5jcnlwdCcpIHsKICAgIHRoaXMuY2lwaGVycyA9IFsKICAgICAgREVTLmNyZWF0ZSh7IHR5cGU6ICdlbmNyeXB0Jywga2V5OiBrMSB9KSwKICAgICAgREVTLmNyZWF0ZSh7IHR5cGU6ICdkZWNyeXB0Jywga2V5OiBrMiB9KSwKICAgICAgREVTLmNyZWF0ZSh7IHR5cGU6ICdlbmNyeXB0Jywga2V5OiBrMyB9KQogICAgXTsKICB9IGVsc2UgewogICAgdGhpcy5jaXBoZXJzID0gWwogICAgICBERVMuY3JlYXRlKHsgdHlwZTogJ2RlY3J5cHQnLCBrZXk6IGszIH0pLAogICAgICBERVMuY3JlYXRlKHsgdHlwZTogJ2VuY3J5cHQnLCBrZXk6IGsyIH0pLAogICAgICBERVMuY3JlYXRlKHsgdHlwZTogJ2RlY3J5cHQnLCBrZXk6IGsxIH0pCiAgICBdOwogIH0KfQoKZnVuY3Rpb24gRURFKG9wdGlvbnMpIHsKICBDaXBoZXIuY2FsbCh0aGlzLCBvcHRpb25zKTsKCiAgdmFyIHN0YXRlID0gbmV3IEVERVN0YXRlKHRoaXMudHlwZSwgdGhpcy5vcHRpb25zLmtleSk7CiAgdGhpcy5fZWRlU3RhdGUgPSBzdGF0ZTsKfQppbmhlcml0cyhFREUsIENpcGhlcik7Cgptb2R1bGUuZXhwb3J0cyA9IEVERTsKCkVERS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUob3B0aW9ucykgewogIHJldHVybiBuZXcgRURFKG9wdGlvbnMpOwp9OwoKRURFLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gX3VwZGF0ZShpbnAsIGluT2ZmLCBvdXQsIG91dE9mZikgewogIHZhciBzdGF0ZSA9IHRoaXMuX2VkZVN0YXRlOwoKICBzdGF0ZS5jaXBoZXJzWzBdLl91cGRhdGUoaW5wLCBpbk9mZiwgb3V0LCBvdXRPZmYpOwogIHN0YXRlLmNpcGhlcnNbMV0uX3VwZGF0ZShvdXQsIG91dE9mZiwgb3V0LCBvdXRPZmYpOwogIHN0YXRlLmNpcGhlcnNbMl0uX3VwZGF0ZShvdXQsIG91dE9mZiwgb3V0LCBvdXRPZmYpOwp9OwoKRURFLnByb3RvdHlwZS5fcGFkID0gREVTLnByb3RvdHlwZS5fcGFkOwpFREUucHJvdG90eXBlLl91bnBhZCA9IERFUy5wcm90b3R5cGUuX3VucGFkOwoKfSx7Ii4uL2RlcyI6ODcsImluaGVyaXRzIjoxMjgsIm1pbmltYWxpc3RpYy1hc3NlcnQiOjEzMn1dLDkyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKZXhwb3J0cy5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUoYnl0ZXMsIG9mZikgewogIHZhciByZXMgPSAgKGJ5dGVzWzAgKyBvZmZdIDw8IDI0KSB8CiAgICAgICAgICAgICAoYnl0ZXNbMSArIG9mZl0gPDwgMTYpIHwKICAgICAgICAgICAgIChieXRlc1syICsgb2ZmXSA8PCA4KSB8CiAgICAgICAgICAgICBieXRlc1szICsgb2ZmXTsKICByZXR1cm4gcmVzID4+PiAwOwp9OwoKZXhwb3J0cy53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRShieXRlcywgdmFsdWUsIG9mZikgewogIGJ5dGVzWzAgKyBvZmZdID0gdmFsdWUgPj4+IDI0OwogIGJ5dGVzWzEgKyBvZmZdID0gKHZhbHVlID4+PiAxNikgJiAweGZmOwogIGJ5dGVzWzIgKyBvZmZdID0gKHZhbHVlID4+PiA4KSAmIDB4ZmY7CiAgYnl0ZXNbMyArIG9mZl0gPSB2YWx1ZSAmIDB4ZmY7Cn07CgpleHBvcnRzLmlwID0gZnVuY3Rpb24gaXAoaW5MLCBpblIsIG91dCwgb2ZmKSB7CiAgdmFyIG91dEwgPSAwOwogIHZhciBvdXRSID0gMDsKCiAgZm9yICh2YXIgaSA9IDY7IGkgPj0gMDsgaSAtPSAyKSB7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8PSAyNDsgaiArPSA4KSB7CiAgICAgIG91dEwgPDw9IDE7CiAgICAgIG91dEwgfD0gKGluUiA+Pj4gKGogKyBpKSkgJiAxOwogICAgfQogICAgZm9yICh2YXIgaiA9IDA7IGogPD0gMjQ7IGogKz0gOCkgewogICAgICBvdXRMIDw8PSAxOwogICAgICBvdXRMIHw9IChpbkwgPj4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CgogIGZvciAodmFyIGkgPSA2OyBpID49IDA7IGkgLT0gMikgewogICAgZm9yICh2YXIgaiA9IDE7IGogPD0gMjU7IGogKz0gOCkgewogICAgICBvdXRSIDw8PSAxOwogICAgICBvdXRSIHw9IChpblIgPj4+IChqICsgaSkpICYgMTsKICAgIH0KICAgIGZvciAodmFyIGogPSAxOyBqIDw9IDI1OyBqICs9IDgpIHsKICAgICAgb3V0UiA8PD0gMTsKICAgICAgb3V0UiB8PSAoaW5MID4+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgfQoKICBvdXRbb2ZmICsgMF0gPSBvdXRMID4+PiAwOwogIG91dFtvZmYgKyAxXSA9IG91dFIgPj4+IDA7Cn07CgpleHBvcnRzLnJpcCA9IGZ1bmN0aW9uIHJpcChpbkwsIGluUiwgb3V0LCBvZmYpIHsKICB2YXIgb3V0TCA9IDA7CiAgdmFyIG91dFIgPSAwOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgZm9yICh2YXIgaiA9IDI0OyBqID49IDA7IGogLT0gOCkgewogICAgICBvdXRMIDw8PSAxOwogICAgICBvdXRMIHw9IChpblIgPj4+IChqICsgaSkpICYgMTsKICAgICAgb3V0TCA8PD0gMTsKICAgICAgb3V0TCB8PSAoaW5MID4+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgfQogIGZvciAodmFyIGkgPSA0OyBpIDwgODsgaSsrKSB7CiAgICBmb3IgKHZhciBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7CiAgICAgIG91dFIgPDw9IDE7CiAgICAgIG91dFIgfD0gKGluUiA+Pj4gKGogKyBpKSkgJiAxOwogICAgICBvdXRSIDw8PSAxOwogICAgICBvdXRSIHw9IChpbkwgPj4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CgogIG91dFtvZmYgKyAwXSA9IG91dEwgPj4+IDA7CiAgb3V0W29mZiArIDFdID0gb3V0UiA+Pj4gMDsKfTsKCmV4cG9ydHMucGMxID0gZnVuY3Rpb24gcGMxKGluTCwgaW5SLCBvdXQsIG9mZikgewogIHZhciBvdXRMID0gMDsKICB2YXIgb3V0UiA9IDA7CgogIC8vIDcsIDE1LCAyMywgMzEsIDM5LCA0NywgNTUsIDYzCiAgLy8gNiwgMTQsIDIyLCAzMCwgMzksIDQ3LCA1NSwgNjMKICAvLyA1LCAxMywgMjEsIDI5LCAzOSwgNDcsIDU1LCA2MwogIC8vIDQsIDEyLCAyMCwgMjgKICBmb3IgKHZhciBpID0gNzsgaSA+PSA1OyBpLS0pIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgICAgb3V0TCA8PD0gMTsKICAgICAgb3V0TCB8PSAoaW5SID4+IChqICsgaSkpICYgMTsKICAgIH0KICAgIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgICAgb3V0TCA8PD0gMTsKICAgICAgb3V0TCB8PSAoaW5MID4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CiAgZm9yICh2YXIgaiA9IDA7IGogPD0gMjQ7IGogKz0gOCkgewogICAgb3V0TCA8PD0gMTsKICAgIG91dEwgfD0gKGluUiA+PiAoaiArIGkpKSAmIDE7CiAgfQoKICAvLyAxLCA5LCAxNywgMjUsIDMzLCA0MSwgNDksIDU3CiAgLy8gMiwgMTAsIDE4LCAyNiwgMzQsIDQyLCA1MCwgNTgKICAvLyAzLCAxMSwgMTksIDI3LCAzNSwgNDMsIDUxLCA1OQogIC8vIDM2LCA0NCwgNTIsIDYwCiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMzsgaSsrKSB7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8PSAyNDsgaiArPSA4KSB7CiAgICAgIG91dFIgPDw9IDE7CiAgICAgIG91dFIgfD0gKGluUiA+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgICBmb3IgKHZhciBqID0gMDsgaiA8PSAyNDsgaiArPSA4KSB7CiAgICAgIG91dFIgPDw9IDE7CiAgICAgIG91dFIgfD0gKGluTCA+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgfQogIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgIG91dFIgPDw9IDE7CiAgICBvdXRSIHw9IChpbkwgPj4gKGogKyBpKSkgJiAxOwogIH0KCiAgb3V0W29mZiArIDBdID0gb3V0TCA+Pj4gMDsKICBvdXRbb2ZmICsgMV0gPSBvdXRSID4+PiAwOwp9OwoKZXhwb3J0cy5yMjhzaGwgPSBmdW5jdGlvbiByMjhzaGwobnVtLCBzaGlmdCkgewogIHJldHVybiAoKG51bSA8PCBzaGlmdCkgJiAweGZmZmZmZmYpIHwgKG51bSA+Pj4gKDI4IC0gc2hpZnQpKTsKfTsKCnZhciBwYzJ0YWJsZSA9IFsKICAvLyBpbkwgPT4gb3V0TAogIDE0LCAxMSwgMTcsIDQsIDI3LCAyMywgMjUsIDAsCiAgMTMsIDIyLCA3LCAxOCwgNSwgOSwgMTYsIDI0LAogIDIsIDIwLCAxMiwgMjEsIDEsIDgsIDE1LCAyNiwKCiAgLy8gaW5SID0+IG91dFIKICAxNSwgNCwgMjUsIDE5LCA5LCAxLCAyNiwgMTYsCiAgNSwgMTEsIDIzLCA4LCAxMiwgNywgMTcsIDAsCiAgMjIsIDMsIDEwLCAxNCwgNiwgMjAsIDI3LCAyNApdOwoKZXhwb3J0cy5wYzIgPSBmdW5jdGlvbiBwYzIoaW5MLCBpblIsIG91dCwgb2ZmKSB7CiAgdmFyIG91dEwgPSAwOwogIHZhciBvdXRSID0gMDsKCiAgdmFyIGxlbiA9IHBjMnRhYmxlLmxlbmd0aCA+Pj4gMTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBvdXRMIDw8PSAxOwogICAgb3V0TCB8PSAoaW5MID4+PiBwYzJ0YWJsZVtpXSkgJiAweDE7CiAgfQogIGZvciAodmFyIGkgPSBsZW47IGkgPCBwYzJ0YWJsZS5sZW5ndGg7IGkrKykgewogICAgb3V0UiA8PD0gMTsKICAgIG91dFIgfD0gKGluUiA+Pj4gcGMydGFibGVbaV0pICYgMHgxOwogIH0KCiAgb3V0W29mZiArIDBdID0gb3V0TCA+Pj4gMDsKICBvdXRbb2ZmICsgMV0gPSBvdXRSID4+PiAwOwp9OwoKZXhwb3J0cy5leHBhbmQgPSBmdW5jdGlvbiBleHBhbmQociwgb3V0LCBvZmYpIHsKICB2YXIgb3V0TCA9IDA7CiAgdmFyIG91dFIgPSAwOwoKICBvdXRMID0gKChyICYgMSkgPDwgNSkgfCAociA+Pj4gMjcpOwogIGZvciAodmFyIGkgPSAyMzsgaSA+PSAxNTsgaSAtPSA0KSB7CiAgICBvdXRMIDw8PSA2OwogICAgb3V0TCB8PSAociA+Pj4gaSkgJiAweDNmOwogIH0KICBmb3IgKHZhciBpID0gMTE7IGkgPj0gMzsgaSAtPSA0KSB7CiAgICBvdXRSIHw9IChyID4+PiBpKSAmIDB4M2Y7CiAgICBvdXRSIDw8PSA2OwogIH0KICBvdXRSIHw9ICgociAmIDB4MWYpIDw8IDEpIHwgKHIgPj4+IDMxKTsKCiAgb3V0W29mZiArIDBdID0gb3V0TCA+Pj4gMDsKICBvdXRbb2ZmICsgMV0gPSBvdXRSID4+PiAwOwp9OwoKdmFyIHNUYWJsZSA9IFsKICAxNCwgMCwgNCwgMTUsIDEzLCA3LCAxLCA0LCAyLCAxNCwgMTUsIDIsIDExLCAxMywgOCwgMSwKICAzLCAxMCwgMTAsIDYsIDYsIDEyLCAxMiwgMTEsIDUsIDksIDksIDUsIDAsIDMsIDcsIDgsCiAgNCwgMTUsIDEsIDEyLCAxNCwgOCwgOCwgMiwgMTMsIDQsIDYsIDksIDIsIDEsIDExLCA3LAogIDE1LCA1LCAxMiwgMTEsIDksIDMsIDcsIDE0LCAzLCAxMCwgMTAsIDAsIDUsIDYsIDAsIDEzLAoKICAxNSwgMywgMSwgMTMsIDgsIDQsIDE0LCA3LCA2LCAxNSwgMTEsIDIsIDMsIDgsIDQsIDE0LAogIDksIDEyLCA3LCAwLCAyLCAxLCAxMywgMTAsIDEyLCA2LCAwLCA5LCA1LCAxMSwgMTAsIDUsCiAgMCwgMTMsIDE0LCA4LCA3LCAxMCwgMTEsIDEsIDEwLCAzLCA0LCAxNSwgMTMsIDQsIDEsIDIsCiAgNSwgMTEsIDgsIDYsIDEyLCA3LCA2LCAxMiwgOSwgMCwgMywgNSwgMiwgMTQsIDE1LCA5LAoKICAxMCwgMTMsIDAsIDcsIDksIDAsIDE0LCA5LCA2LCAzLCAzLCA0LCAxNSwgNiwgNSwgMTAsCiAgMSwgMiwgMTMsIDgsIDEyLCA1LCA3LCAxNCwgMTEsIDEyLCA0LCAxMSwgMiwgMTUsIDgsIDEsCiAgMTMsIDEsIDYsIDEwLCA0LCAxMywgOSwgMCwgOCwgNiwgMTUsIDksIDMsIDgsIDAsIDcsCiAgMTEsIDQsIDEsIDE1LCAyLCAxNCwgMTIsIDMsIDUsIDExLCAxMCwgNSwgMTQsIDIsIDcsIDEyLAoKICA3LCAxMywgMTMsIDgsIDE0LCAxMSwgMywgNSwgMCwgNiwgNiwgMTUsIDksIDAsIDEwLCAzLAogIDEsIDQsIDIsIDcsIDgsIDIsIDUsIDEyLCAxMSwgMSwgMTIsIDEwLCA0LCAxNCwgMTUsIDksCiAgMTAsIDMsIDYsIDE1LCA5LCAwLCAwLCA2LCAxMiwgMTAsIDExLCAxLCA3LCAxMywgMTMsIDgsCiAgMTUsIDksIDEsIDQsIDMsIDUsIDE0LCAxMSwgNSwgMTIsIDIsIDcsIDgsIDIsIDQsIDE0LAoKICAyLCAxNCwgMTIsIDExLCA0LCAyLCAxLCAxMiwgNywgNCwgMTAsIDcsIDExLCAxMywgNiwgMSwKICA4LCA1LCA1LCAwLCAzLCAxNSwgMTUsIDEwLCAxMywgMywgMCwgOSwgMTQsIDgsIDksIDYsCiAgNCwgMTEsIDIsIDgsIDEsIDEyLCAxMSwgNywgMTAsIDEsIDEzLCAxNCwgNywgMiwgOCwgMTMsCiAgMTUsIDYsIDksIDE1LCAxMiwgMCwgNSwgOSwgNiwgMTAsIDMsIDQsIDAsIDUsIDE0LCAzLAoKICAxMiwgMTAsIDEsIDE1LCAxMCwgNCwgMTUsIDIsIDksIDcsIDIsIDEyLCA2LCA5LCA4LCA1LAogIDAsIDYsIDEzLCAxLCAzLCAxMywgNCwgMTQsIDE0LCAwLCA3LCAxMSwgNSwgMywgMTEsIDgsCiAgOSwgNCwgMTQsIDMsIDE1LCAyLCA1LCAxMiwgMiwgOSwgOCwgNSwgMTIsIDE1LCAzLCAxMCwKICA3LCAxMSwgMCwgMTQsIDQsIDEsIDEwLCA3LCAxLCA2LCAxMywgMCwgMTEsIDgsIDYsIDEzLAoKICA0LCAxMywgMTEsIDAsIDIsIDExLCAxNCwgNywgMTUsIDQsIDAsIDksIDgsIDEsIDEzLCAxMCwKICAzLCAxNCwgMTIsIDMsIDksIDUsIDcsIDEyLCA1LCAyLCAxMCwgMTUsIDYsIDgsIDEsIDYsCiAgMSwgNiwgNCwgMTEsIDExLCAxMywgMTMsIDgsIDEyLCAxLCAzLCA0LCA3LCAxMCwgMTQsIDcsCiAgMTAsIDksIDE1LCA1LCA2LCAwLCA4LCAxNSwgMCwgMTQsIDUsIDIsIDksIDMsIDIsIDEyLAoKICAxMywgMSwgMiwgMTUsIDgsIDEzLCA0LCA4LCA2LCAxMCwgMTUsIDMsIDExLCA3LCAxLCA0LAogIDEwLCAxMiwgOSwgNSwgMywgNiwgMTQsIDExLCA1LCAwLCAwLCAxNCwgMTIsIDksIDcsIDIsCiAgNywgMiwgMTEsIDEsIDQsIDE0LCAxLCA3LCA5LCA0LCAxMiwgMTAsIDE0LCA4LCAyLCAxMywKICAwLCAxNSwgNiwgMTIsIDEwLCA5LCAxMywgMCwgMTUsIDMsIDMsIDUsIDUsIDYsIDgsIDExCl07CgpleHBvcnRzLnN1YnN0aXR1dGUgPSBmdW5jdGlvbiBzdWJzdGl0dXRlKGluTCwgaW5SKSB7CiAgdmFyIG91dCA9IDA7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgIHZhciBiID0gKGluTCA+Pj4gKDE4IC0gaSAqIDYpKSAmIDB4M2Y7CiAgICB2YXIgc2IgPSBzVGFibGVbaSAqIDB4NDAgKyBiXTsKCiAgICBvdXQgPDw9IDQ7CiAgICBvdXQgfD0gc2I7CiAgfQogIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICB2YXIgYiA9IChpblIgPj4+ICgxOCAtIGkgKiA2KSkgJiAweDNmOwogICAgdmFyIHNiID0gc1RhYmxlWzQgKiAweDQwICsgaSAqIDB4NDAgKyBiXTsKCiAgICBvdXQgPDw9IDQ7CiAgICBvdXQgfD0gc2I7CiAgfQogIHJldHVybiBvdXQgPj4+IDA7Cn07Cgp2YXIgcGVybXV0ZVRhYmxlID0gWwogIDE2LCAyNSwgMTIsIDExLCAzLCAyMCwgNCwgMTUsIDMxLCAxNywgOSwgNiwgMjcsIDE0LCAxLCAyMiwKICAzMCwgMjQsIDgsIDE4LCAwLCA1LCAyOSwgMjMsIDEzLCAxOSwgMiwgMjYsIDEwLCAyMSwgMjgsIDcKXTsKCmV4cG9ydHMucGVybXV0ZSA9IGZ1bmN0aW9uIHBlcm11dGUobnVtKSB7CiAgdmFyIG91dCA9IDA7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZXJtdXRlVGFibGUubGVuZ3RoOyBpKyspIHsKICAgIG91dCA8PD0gMTsKICAgIG91dCB8PSAobnVtID4+PiBwZXJtdXRlVGFibGVbaV0pICYgMHgxOwogIH0KICByZXR1cm4gb3V0ID4+PiAwOwp9OwoKZXhwb3J0cy5wYWRTcGxpdCA9IGZ1bmN0aW9uIHBhZFNwbGl0KG51bSwgc2l6ZSwgZ3JvdXApIHsKICB2YXIgc3RyID0gbnVtLnRvU3RyaW5nKDIpOwogIHdoaWxlIChzdHIubGVuZ3RoIDwgc2l6ZSkKICAgIHN0ciA9ICcwJyArIHN0cjsKCiAgdmFyIG91dCA9IFtdOwogIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSArPSBncm91cCkKICAgIG91dC5wdXNoKHN0ci5zbGljZShpLCBpICsgZ3JvdXApKTsKICByZXR1cm4gb3V0LmpvaW4oJyAnKTsKfTsKCn0se31dLDkzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgZ2VuZXJhdGVQcmltZSA9IHJlcXVpcmUoJy4vbGliL2dlbmVyYXRlUHJpbWUnKQp2YXIgcHJpbWVzID0gcmVxdWlyZSgnLi9saWIvcHJpbWVzLmpzb24nKQoKdmFyIERIID0gcmVxdWlyZSgnLi9saWIvZGgnKQoKZnVuY3Rpb24gZ2V0RGlmZmllSGVsbG1hbiAobW9kKSB7CiAgdmFyIHByaW1lID0gbmV3IEJ1ZmZlcihwcmltZXNbbW9kXS5wcmltZSwgJ2hleCcpCiAgdmFyIGdlbiA9IG5ldyBCdWZmZXIocHJpbWVzW21vZF0uZ2VuLCAnaGV4JykKCiAgcmV0dXJuIG5ldyBESChwcmltZSwgZ2VuKQp9Cgp2YXIgRU5DT0RJTkdTID0gewogICdiaW5hcnknOiB0cnVlLCAnaGV4JzogdHJ1ZSwgJ2Jhc2U2NCc6IHRydWUKfQoKZnVuY3Rpb24gY3JlYXRlRGlmZmllSGVsbG1hbiAocHJpbWUsIGVuYywgZ2VuZXJhdG9yLCBnZW5jKSB7CiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihlbmMpIHx8IEVOQ09ESU5HU1tlbmNdID09PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiBjcmVhdGVEaWZmaWVIZWxsbWFuKHByaW1lLCAnYmluYXJ5JywgZW5jLCBnZW5lcmF0b3IpCiAgfQoKICBlbmMgPSBlbmMgfHwgJ2JpbmFyeScKICBnZW5jID0gZ2VuYyB8fCAnYmluYXJ5JwogIGdlbmVyYXRvciA9IGdlbmVyYXRvciB8fCBuZXcgQnVmZmVyKFsyXSkKCiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoZ2VuZXJhdG9yKSkgewogICAgZ2VuZXJhdG9yID0gbmV3IEJ1ZmZlcihnZW5lcmF0b3IsIGdlbmMpCiAgfQoKICBpZiAodHlwZW9mIHByaW1lID09PSAnbnVtYmVyJykgewogICAgcmV0dXJuIG5ldyBESChnZW5lcmF0ZVByaW1lKHByaW1lLCBnZW5lcmF0b3IpLCBnZW5lcmF0b3IsIHRydWUpCiAgfQoKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihwcmltZSkpIHsKICAgIHByaW1lID0gbmV3IEJ1ZmZlcihwcmltZSwgZW5jKQogIH0KCiAgcmV0dXJuIG5ldyBESChwcmltZSwgZ2VuZXJhdG9yLCB0cnVlKQp9CgpleHBvcnRzLkRpZmZpZUhlbGxtYW5Hcm91cCA9IGV4cG9ydHMuY3JlYXRlRGlmZmllSGVsbG1hbkdyb3VwID0gZXhwb3J0cy5nZXREaWZmaWVIZWxsbWFuID0gZ2V0RGlmZmllSGVsbG1hbgpleHBvcnRzLmNyZWF0ZURpZmZpZUhlbGxtYW4gPSBleHBvcnRzLkRpZmZpZUhlbGxtYW4gPSBjcmVhdGVEaWZmaWVIZWxsbWFuCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9saWIvZGgiOjk0LCIuL2xpYi9nZW5lcmF0ZVByaW1lIjo5NSwiLi9saWIvcHJpbWVzLmpzb24iOjk2LCJidWZmZXIiOjcwfV0sOTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBNaWxsZXJSYWJpbiA9IHJlcXVpcmUoJ21pbGxlci1yYWJpbicpOwp2YXIgbWlsbGVyUmFiaW4gPSBuZXcgTWlsbGVyUmFiaW4oKTsKdmFyIFRXRU5UWUZPVVIgPSBuZXcgQk4oMjQpOwp2YXIgRUxFVkVOID0gbmV3IEJOKDExKTsKdmFyIFRFTiA9IG5ldyBCTigxMCk7CnZhciBUSFJFRSA9IG5ldyBCTigzKTsKdmFyIFNFVkVOID0gbmV3IEJOKDcpOwp2YXIgcHJpbWVzID0gcmVxdWlyZSgnLi9nZW5lcmF0ZVByaW1lJyk7CnZhciByYW5kb21CeXRlcyA9IHJlcXVpcmUoJ3JhbmRvbWJ5dGVzJyk7Cm1vZHVsZS5leHBvcnRzID0gREg7CgpmdW5jdGlvbiBzZXRQdWJsaWNLZXkocHViLCBlbmMpIHsKICBlbmMgPSBlbmMgfHwgJ3V0ZjgnOwogIGlmICghQnVmZmVyLmlzQnVmZmVyKHB1YikpIHsKICAgIHB1YiA9IG5ldyBCdWZmZXIocHViLCBlbmMpOwogIH0KICB0aGlzLl9wdWIgPSBuZXcgQk4ocHViKTsKICByZXR1cm4gdGhpczsKfQoKZnVuY3Rpb24gc2V0UHJpdmF0ZUtleShwcml2LCBlbmMpIHsKICBlbmMgPSBlbmMgfHwgJ3V0ZjgnOwogIGlmICghQnVmZmVyLmlzQnVmZmVyKHByaXYpKSB7CiAgICBwcml2ID0gbmV3IEJ1ZmZlcihwcml2LCBlbmMpOwogIH0KICB0aGlzLl9wcml2ID0gbmV3IEJOKHByaXYpOwogIHJldHVybiB0aGlzOwp9Cgp2YXIgcHJpbWVDYWNoZSA9IHt9OwpmdW5jdGlvbiBjaGVja1ByaW1lKHByaW1lLCBnZW5lcmF0b3IpIHsKICB2YXIgZ2VuID0gZ2VuZXJhdG9yLnRvU3RyaW5nKCdoZXgnKTsKICB2YXIgaGV4ID0gW2dlbiwgcHJpbWUudG9TdHJpbmcoMTYpXS5qb2luKCdfJyk7CiAgaWYgKGhleCBpbiBwcmltZUNhY2hlKSB7CiAgICByZXR1cm4gcHJpbWVDYWNoZVtoZXhdOwogIH0KICB2YXIgZXJyb3IgPSAwOwoKICBpZiAocHJpbWUuaXNFdmVuKCkgfHwKICAgICFwcmltZXMuc2ltcGxlU2lldmUgfHwKICAgICFwcmltZXMuZmVybWF0VGVzdChwcmltZSkgfHwKICAgICFtaWxsZXJSYWJpbi50ZXN0KHByaW1lKSkgewogICAgLy9ub3QgYSBwcmltZSBzbyArMQogICAgZXJyb3IgKz0gMTsKCiAgICBpZiAoZ2VuID09PSAnMDInIHx8IGdlbiA9PT0gJzA1JykgewogICAgICAvLyB3ZSdkIGJlIGFibGUgdG8gY2hlY2sgdGhlIGdlbmVyYXRvcgogICAgICAvLyBpdCB3b3VsZCBmYWlsIHNvICs4CiAgICAgIGVycm9yICs9IDg7CiAgICB9IGVsc2UgewogICAgICAvL3dlIHdvdWxkbid0IGJlIGFibGUgdG8gdGVzdCB0aGUgZ2VuZXJhdG9yCiAgICAgIC8vIHNvICs0CiAgICAgIGVycm9yICs9IDQ7CiAgICB9CiAgICBwcmltZUNhY2hlW2hleF0gPSBlcnJvcjsKICAgIHJldHVybiBlcnJvcjsKICB9CiAgaWYgKCFtaWxsZXJSYWJpbi50ZXN0KHByaW1lLnNocm4oMSkpKSB7CiAgICAvL25vdCBhIHNhZmUgcHJpbWUKICAgIGVycm9yICs9IDI7CiAgfQogIHZhciByZW07CiAgc3dpdGNoIChnZW4pIHsKICAgIGNhc2UgJzAyJzoKICAgICAgaWYgKHByaW1lLm1vZChUV0VOVFlGT1VSKS5jbXAoRUxFVkVOKSkgewogICAgICAgIC8vIHVuc3VpZGFibGUgZ2VuZXJhdG9yCiAgICAgICAgZXJyb3IgKz0gODsKICAgICAgfQogICAgICBicmVhazsKICAgIGNhc2UgJzA1JzoKICAgICAgcmVtID0gcHJpbWUubW9kKFRFTik7CiAgICAgIGlmIChyZW0uY21wKFRIUkVFKSAmJiByZW0uY21wKFNFVkVOKSkgewogICAgICAgIC8vIHByaW1lIG1vZCAxMCBuZWVkcyB0byBlcXVhbCAzIG9yIDcKICAgICAgICBlcnJvciArPSA4OwogICAgICB9CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgZXJyb3IgKz0gNDsKICB9CiAgcHJpbWVDYWNoZVtoZXhdID0gZXJyb3I7CiAgcmV0dXJuIGVycm9yOwp9CgpmdW5jdGlvbiBESChwcmltZSwgZ2VuZXJhdG9yLCBtYWxsZWFibGUpIHsKICB0aGlzLnNldEdlbmVyYXRvcihnZW5lcmF0b3IpOwogIHRoaXMuX19wcmltZSA9IG5ldyBCTihwcmltZSk7CiAgdGhpcy5fcHJpbWUgPSBCTi5tb250KHRoaXMuX19wcmltZSk7CiAgdGhpcy5fcHJpbWVMZW4gPSBwcmltZS5sZW5ndGg7CiAgdGhpcy5fcHViID0gdW5kZWZpbmVkOwogIHRoaXMuX3ByaXYgPSB1bmRlZmluZWQ7CiAgdGhpcy5fcHJpbWVDb2RlID0gdW5kZWZpbmVkOwogIGlmIChtYWxsZWFibGUpIHsKICAgIHRoaXMuc2V0UHVibGljS2V5ID0gc2V0UHVibGljS2V5OwogICAgdGhpcy5zZXRQcml2YXRlS2V5ID0gc2V0UHJpdmF0ZUtleTsKICB9IGVsc2UgewogICAgdGhpcy5fcHJpbWVDb2RlID0gODsKICB9Cn0KT2JqZWN0LmRlZmluZVByb3BlcnR5KERILnByb3RvdHlwZSwgJ3ZlcmlmeUVycm9yJywgewogIGVudW1lcmFibGU6IHRydWUsCiAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodHlwZW9mIHRoaXMuX3ByaW1lQ29kZSAhPT0gJ251bWJlcicpIHsKICAgICAgdGhpcy5fcHJpbWVDb2RlID0gY2hlY2tQcmltZSh0aGlzLl9fcHJpbWUsIHRoaXMuX19nZW4pOwogICAgfQogICAgcmV0dXJuIHRoaXMuX3ByaW1lQ29kZTsKICB9Cn0pOwpESC5wcm90b3R5cGUuZ2VuZXJhdGVLZXlzID0gZnVuY3Rpb24gKCkgewogIGlmICghdGhpcy5fcHJpdikgewogICAgdGhpcy5fcHJpdiA9IG5ldyBCTihyYW5kb21CeXRlcyh0aGlzLl9wcmltZUxlbikpOwogIH0KICB0aGlzLl9wdWIgPSB0aGlzLl9nZW4udG9SZWQodGhpcy5fcHJpbWUpLnJlZFBvdyh0aGlzLl9wcml2KS5mcm9tUmVkKCk7CiAgcmV0dXJuIHRoaXMuZ2V0UHVibGljS2V5KCk7Cn07CgpESC5wcm90b3R5cGUuY29tcHV0ZVNlY3JldCA9IGZ1bmN0aW9uIChvdGhlcikgewogIG90aGVyID0gbmV3IEJOKG90aGVyKTsKICBvdGhlciA9IG90aGVyLnRvUmVkKHRoaXMuX3ByaW1lKTsKICB2YXIgc2VjcmV0ID0gb3RoZXIucmVkUG93KHRoaXMuX3ByaXYpLmZyb21SZWQoKTsKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcihzZWNyZXQudG9BcnJheSgpKTsKICB2YXIgcHJpbWUgPSB0aGlzLmdldFByaW1lKCk7CiAgaWYgKG91dC5sZW5ndGggPCBwcmltZS5sZW5ndGgpIHsKICAgIHZhciBmcm9udCA9IG5ldyBCdWZmZXIocHJpbWUubGVuZ3RoIC0gb3V0Lmxlbmd0aCk7CiAgICBmcm9udC5maWxsKDApOwogICAgb3V0ID0gQnVmZmVyLmNvbmNhdChbZnJvbnQsIG91dF0pOwogIH0KICByZXR1cm4gb3V0Owp9OwoKREgucHJvdG90eXBlLmdldFB1YmxpY0tleSA9IGZ1bmN0aW9uIGdldFB1YmxpY0tleShlbmMpIHsKICByZXR1cm4gZm9ybWF0UmV0dXJuVmFsdWUodGhpcy5fcHViLCBlbmMpOwp9OwoKREgucHJvdG90eXBlLmdldFByaXZhdGVLZXkgPSBmdW5jdGlvbiBnZXRQcml2YXRlS2V5KGVuYykgewogIHJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZSh0aGlzLl9wcml2LCBlbmMpOwp9OwoKREgucHJvdG90eXBlLmdldFByaW1lID0gZnVuY3Rpb24gKGVuYykgewogIHJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZSh0aGlzLl9fcHJpbWUsIGVuYyk7Cn07CgpESC5wcm90b3R5cGUuZ2V0R2VuZXJhdG9yID0gZnVuY3Rpb24gKGVuYykgewogIHJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZSh0aGlzLl9nZW4sIGVuYyk7Cn07CgpESC5wcm90b3R5cGUuc2V0R2VuZXJhdG9yID0gZnVuY3Rpb24gKGdlbiwgZW5jKSB7CiAgZW5jID0gZW5jIHx8ICd1dGY4JzsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihnZW4pKSB7CiAgICBnZW4gPSBuZXcgQnVmZmVyKGdlbiwgZW5jKTsKICB9CiAgdGhpcy5fX2dlbiA9IGdlbjsKICB0aGlzLl9nZW4gPSBuZXcgQk4oZ2VuKTsKICByZXR1cm4gdGhpczsKfTsKCmZ1bmN0aW9uIGZvcm1hdFJldHVyblZhbHVlKGJuLCBlbmMpIHsKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihibi50b0FycmF5KCkpOwogIGlmICghZW5jKSB7CiAgICByZXR1cm4gYnVmOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYnVmLnRvU3RyaW5nKGVuYyk7CiAgfQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9nZW5lcmF0ZVByaW1lIjo5NSwiYm4uanMiOjQxLCJidWZmZXIiOjcwLCJtaWxsZXItcmFiaW4iOjEzMSwicmFuZG9tYnl0ZXMiOjE0Nn1dLDk1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIHJhbmRvbUJ5dGVzID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKTsKbW9kdWxlLmV4cG9ydHMgPSBmaW5kUHJpbWU7CmZpbmRQcmltZS5zaW1wbGVTaWV2ZSA9IHNpbXBsZVNpZXZlOwpmaW5kUHJpbWUuZmVybWF0VGVzdCA9IGZlcm1hdFRlc3Q7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBUV0VOVFlGT1VSID0gbmV3IEJOKDI0KTsKdmFyIE1pbGxlclJhYmluID0gcmVxdWlyZSgnbWlsbGVyLXJhYmluJyk7CnZhciBtaWxsZXJSYWJpbiA9IG5ldyBNaWxsZXJSYWJpbigpOwp2YXIgT05FID0gbmV3IEJOKDEpOwp2YXIgVFdPID0gbmV3IEJOKDIpOwp2YXIgRklWRSA9IG5ldyBCTig1KTsKdmFyIFNJWFRFRU4gPSBuZXcgQk4oMTYpOwp2YXIgRUlHSFQgPSBuZXcgQk4oOCk7CnZhciBURU4gPSBuZXcgQk4oMTApOwp2YXIgVEhSRUUgPSBuZXcgQk4oMyk7CnZhciBTRVZFTiA9IG5ldyBCTig3KTsKdmFyIEVMRVZFTiA9IG5ldyBCTigxMSk7CnZhciBGT1VSID0gbmV3IEJOKDQpOwp2YXIgVFdFTFZFID0gbmV3IEJOKDEyKTsKdmFyIHByaW1lcyA9IG51bGw7CgpmdW5jdGlvbiBfZ2V0UHJpbWVzKCkgewogIGlmIChwcmltZXMgIT09IG51bGwpCiAgICByZXR1cm4gcHJpbWVzOwoKICB2YXIgbGltaXQgPSAweDEwMDAwMDsKICB2YXIgcmVzID0gW107CiAgcmVzWzBdID0gMjsKICBmb3IgKHZhciBpID0gMSwgayA9IDM7IGsgPCBsaW1pdDsgayArPSAyKSB7CiAgICB2YXIgc3FydCA9IE1hdGguY2VpbChNYXRoLnNxcnQoaykpOwogICAgZm9yICh2YXIgaiA9IDA7IGogPCBpICYmIHJlc1tqXSA8PSBzcXJ0OyBqKyspCiAgICAgIGlmIChrICUgcmVzW2pdID09PSAwKQogICAgICAgIGJyZWFrOwoKICAgIGlmIChpICE9PSBqICYmIHJlc1tqXSA8PSBzcXJ0KQogICAgICBjb250aW51ZTsKCiAgICByZXNbaSsrXSA9IGs7CiAgfQogIHByaW1lcyA9IHJlczsKICByZXR1cm4gcmVzOwp9CgpmdW5jdGlvbiBzaW1wbGVTaWV2ZShwKSB7CiAgdmFyIHByaW1lcyA9IF9nZXRQcmltZXMoKTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmltZXMubGVuZ3RoOyBpKyspCiAgICBpZiAocC5tb2RuKHByaW1lc1tpXSkgPT09IDApIHsKICAgICAgaWYgKHAuY21wbihwcmltZXNbaV0pID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogIHJldHVybiB0cnVlOwp9CgpmdW5jdGlvbiBmZXJtYXRUZXN0KHApIHsKICB2YXIgcmVkID0gQk4ubW9udChwKTsKICByZXR1cm4gVFdPLnRvUmVkKHJlZCkucmVkUG93KHAuc3VibigxKSkuZnJvbVJlZCgpLmNtcG4oMSkgPT09IDA7Cn0KCmZ1bmN0aW9uIGZpbmRQcmltZShiaXRzLCBnZW4pIHsKICBpZiAoYml0cyA8IDE2KSB7CiAgICAvLyB0aGlzIGlzIHdoYXQgb3BlbnNzbCBkb2VzCiAgICBpZiAoZ2VuID09PSAyIHx8IGdlbiA9PT0gNSkgewogICAgICByZXR1cm4gbmV3IEJOKFsweDhjLCAweDdiXSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmV3IEJOKFsweDhjLCAweDI3XSk7CiAgICB9CiAgfQogIGdlbiA9IG5ldyBCTihnZW4pOwoKICB2YXIgbnVtLCBuMjsKCiAgd2hpbGUgKHRydWUpIHsKICAgIG51bSA9IG5ldyBCTihyYW5kb21CeXRlcyhNYXRoLmNlaWwoYml0cyAvIDgpKSk7CiAgICB3aGlsZSAobnVtLmJpdExlbmd0aCgpID4gYml0cykgewogICAgICBudW0uaXNocm4oMSk7CiAgICB9CiAgICBpZiAobnVtLmlzRXZlbigpKSB7CiAgICAgIG51bS5pYWRkKE9ORSk7CiAgICB9CiAgICBpZiAoIW51bS50ZXN0bigxKSkgewogICAgICBudW0uaWFkZChUV08pOwogICAgfQogICAgaWYgKCFnZW4uY21wKFRXTykpIHsKICAgICAgd2hpbGUgKG51bS5tb2QoVFdFTlRZRk9VUikuY21wKEVMRVZFTikpIHsKICAgICAgICBudW0uaWFkZChGT1VSKTsKICAgICAgfQogICAgfSBlbHNlIGlmICghZ2VuLmNtcChGSVZFKSkgewogICAgICB3aGlsZSAobnVtLm1vZChURU4pLmNtcChUSFJFRSkpIHsKICAgICAgICBudW0uaWFkZChGT1VSKTsKICAgICAgfQogICAgfQogICAgbjIgPSBudW0uc2hybigxKTsKICAgIGlmIChzaW1wbGVTaWV2ZShuMikgJiYgc2ltcGxlU2lldmUobnVtKSAmJgogICAgICBmZXJtYXRUZXN0KG4yKSAmJiBmZXJtYXRUZXN0KG51bSkgJiYKICAgICAgbWlsbGVyUmFiaW4udGVzdChuMikgJiYgbWlsbGVyUmFiaW4udGVzdChudW0pKSB7CiAgICAgIHJldHVybiBudW07CiAgICB9CiAgfQoKfQoKfSx7ImJuLmpzIjo0MSwibWlsbGVyLXJhYmluIjoxMzEsInJhbmRvbWJ5dGVzIjoxNDZ9XSw5NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsKICAgICJtb2RwMSI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzYTM2MjBmZmZmZmZmZmZmZmZmZmZmIgogICAgfSwKICAgICJtb2RwMiI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzN2VkNmIwYmZmNWNiNmY0MDZiN2VkZWUzODZiZmI1YTg5OWZhNWFlOWYyNDExN2M0YjFmZTY0OTI4NjY1MWVjZTY1MzgxZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0sCiAgICAibW9kcDUiOiB7CiAgICAgICAgImdlbiI6ICIwMiIsCiAgICAgICAgInByaW1lIjogImZmZmZmZmZmZmZmZmZmZmZjOTBmZGFhMjIxNjhjMjM0YzRjNjYyOGI4MGRjMWNkMTI5MDI0ZTA4OGE2N2NjNzQwMjBiYmVhNjNiMTM5YjIyNTE0YTA4Nzk4ZTM0MDRkZGVmOTUxOWIzY2QzYTQzMWIzMDJiMGE2ZGYyNWYxNDM3NGZlMTM1NmQ2ZDUxYzI0NWU0ODViNTc2NjI1ZTdlYzZmNDRjNDJlOWE2MzdlZDZiMGJmZjVjYjZmNDA2YjdlZGVlMzg2YmZiNWE4OTlmYTVhZTlmMjQxMTdjNGIxZmU2NDkyODY2NTFlY2U0NWIzZGMyMDA3Y2I4YTE2M2JmMDU5OGRhNDgzNjFjNTVkMzlhNjkxNjNmYThmZDI0Y2Y1ZjgzNjU1ZDIzZGNhM2FkOTYxYzYyZjM1NjIwODU1MmJiOWVkNTI5MDc3MDk2OTY2ZDY3MGMzNTRlNGFiYzk4MDRmMTc0NmMwOGNhMjM3MzI3ZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0sCiAgICAibW9kcDE0IjogewogICAgICAgICJnZW4iOiAiMDIiLAogICAgICAgICJwcmltZSI6ICJmZmZmZmZmZmZmZmZmZmZmYzkwZmRhYTIyMTY4YzIzNGM0YzY2MjhiODBkYzFjZDEyOTAyNGUwODhhNjdjYzc0MDIwYmJlYTYzYjEzOWIyMjUxNGEwODc5OGUzNDA0ZGRlZjk1MTliM2NkM2E0MzFiMzAyYjBhNmRmMjVmMTQzNzRmZTEzNTZkNmQ1MWMyNDVlNDg1YjU3NjYyNWU3ZWM2ZjQ0YzQyZTlhNjM3ZWQ2YjBiZmY1Y2I2ZjQwNmI3ZWRlZTM4NmJmYjVhODk5ZmE1YWU5ZjI0MTE3YzRiMWZlNjQ5Mjg2NjUxZWNlNDViM2RjMjAwN2NiOGExNjNiZjA1OThkYTQ4MzYxYzU1ZDM5YTY5MTYzZmE4ZmQyNGNmNWY4MzY1NWQyM2RjYTNhZDk2MWM2MmYzNTYyMDg1NTJiYjllZDUyOTA3NzA5Njk2NmQ2NzBjMzU0ZTRhYmM5ODA0ZjE3NDZjMDhjYTE4MjE3YzMyOTA1ZTQ2MmUzNmNlM2JlMzllNzcyYzE4MGU4NjAzOWIyNzgzYTJlYzA3YTI4ZmI1YzU1ZGYwNmY0YzUyYzlkZTJiY2JmNjk1NTgxNzE4Mzk5NTQ5N2NlYTk1NmFlNTE1ZDIyNjE4OThmYTA1MTAxNTcyOGU1YThhYWNhYTY4ZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0sCiAgICAibW9kcDE1IjogewogICAgICAgICJnZW4iOiAiMDIiLAogICAgICAgICJwcmltZSI6ICJmZmZmZmZmZmZmZmZmZmZmYzkwZmRhYTIyMTY4YzIzNGM0YzY2MjhiODBkYzFjZDEyOTAyNGUwODhhNjdjYzc0MDIwYmJlYTYzYjEzOWIyMjUxNGEwODc5OGUzNDA0ZGRlZjk1MTliM2NkM2E0MzFiMzAyYjBhNmRmMjVmMTQzNzRmZTEzNTZkNmQ1MWMyNDVlNDg1YjU3NjYyNWU3ZWM2ZjQ0YzQyZTlhNjM3ZWQ2YjBiZmY1Y2I2ZjQwNmI3ZWRlZTM4NmJmYjVhODk5ZmE1YWU5ZjI0MTE3YzRiMWZlNjQ5Mjg2NjUxZWNlNDViM2RjMjAwN2NiOGExNjNiZjA1OThkYTQ4MzYxYzU1ZDM5YTY5MTYzZmE4ZmQyNGNmNWY4MzY1NWQyM2RjYTNhZDk2MWM2MmYzNTYyMDg1NTJiYjllZDUyOTA3NzA5Njk2NmQ2NzBjMzU0ZTRhYmM5ODA0ZjE3NDZjMDhjYTE4MjE3YzMyOTA1ZTQ2MmUzNmNlM2JlMzllNzcyYzE4MGU4NjAzOWIyNzgzYTJlYzA3YTI4ZmI1YzU1ZGYwNmY0YzUyYzlkZTJiY2JmNjk1NTgxNzE4Mzk5NTQ5N2NlYTk1NmFlNTE1ZDIyNjE4OThmYTA1MTAxNTcyOGU1YThhYWFjNDJkYWQzMzE3MGQwNDUwN2EzM2E4NTUyMWFiZGYxY2JhNjRlY2ZiODUwNDU4ZGJlZjBhOGFlYTcxNTc1ZDA2MGM3ZGIzOTcwZjg1YTZlMWU0YzdhYmY1YWU4Y2RiMDkzM2Q3MWU4Yzk0ZTA0YTI1NjE5ZGNlZTNkMjI2MWFkMmVlNmJmMTJmZmEwNmQ5OGEwODY0ZDg3NjAyNzMzZWM4NmE2NDUyMWYyYjE4MTc3YjIwMGNiYmUxMTc1NzdhNjE1ZDZjNzcwOTg4YzBiYWQ5NDZlMjA4ZTI0ZmEwNzRlNWFiMzE0M2RiNWJmY2UwZmQxMDhlNGI4MmQxMjBhOTNhZDJjYWZmZmZmZmZmZmZmZmZmZmYiCiAgICB9LAogICAgIm1vZHAxNiI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzN2VkNmIwYmZmNWNiNmY0MDZiN2VkZWUzODZiZmI1YTg5OWZhNWFlOWYyNDExN2M0YjFmZTY0OTI4NjY1MWVjZTQ1YjNkYzIwMDdjYjhhMTYzYmYwNTk4ZGE0ODM2MWM1NWQzOWE2OTE2M2ZhOGZkMjRjZjVmODM2NTVkMjNkY2EzYWQ5NjFjNjJmMzU2MjA4NTUyYmI5ZWQ1MjkwNzcwOTY5NjZkNjcwYzM1NGU0YWJjOTgwNGYxNzQ2YzA4Y2ExODIxN2MzMjkwNWU0NjJlMzZjZTNiZTM5ZTc3MmMxODBlODYwMzliMjc4M2EyZWMwN2EyOGZiNWM1NWRmMDZmNGM1MmM5ZGUyYmNiZjY5NTU4MTcxODM5OTU0OTdjZWE5NTZhZTUxNWQyMjYxODk4ZmEwNTEwMTU3MjhlNWE4YWFhYzQyZGFkMzMxNzBkMDQ1MDdhMzNhODU1MjFhYmRmMWNiYTY0ZWNmYjg1MDQ1OGRiZWYwYThhZWE3MTU3NWQwNjBjN2RiMzk3MGY4NWE2ZTFlNGM3YWJmNWFlOGNkYjA5MzNkNzFlOGM5NGUwNGEyNTYxOWRjZWUzZDIyNjFhZDJlZTZiZjEyZmZhMDZkOThhMDg2NGQ4NzYwMjczM2VjODZhNjQ1MjFmMmIxODE3N2IyMDBjYmJlMTE3NTc3YTYxNWQ2Yzc3MDk4OGMwYmFkOTQ2ZTIwOGUyNGZhMDc0ZTVhYjMxNDNkYjViZmNlMGZkMTA4ZTRiODJkMTIwYTkyMTA4MDExYTcyM2MxMmE3ODdlNmQ3ODg3MTlhMTBiZGJhNWIyNjk5YzMyNzE4NmFmNGUyM2MxYTk0NjgzNGI2MTUwYmRhMjU4M2U5Y2EyYWQ0NGNlOGRiYmJjMmRiMDRkZThlZjkyZThlZmMxNDFmYmVjYWE2Mjg3YzU5NDc0ZTZiYzA1ZDk5YjI5NjRmYTA5MGMzYTIyMzNiYTE4NjUxNWJlN2VkMWY2MTI5NzBjZWUyZDdhZmI4MWJkZDc2MjE3MDQ4MWNkMDA2OTEyN2Q1YjA1YWE5OTNiNGVhOTg4ZDhmZGRjMTg2ZmZiN2RjOTBhNmMwOGY0ZGY0MzVjOTM0MDYzMTk5ZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0sCiAgICAibW9kcDE3IjogewogICAgICAgICJnZW4iOiAiMDIiLAogICAgICAgICJwcmltZSI6ICJmZmZmZmZmZmZmZmZmZmZmYzkwZmRhYTIyMTY4YzIzNGM0YzY2MjhiODBkYzFjZDEyOTAyNGUwODhhNjdjYzc0MDIwYmJlYTYzYjEzOWIyMjUxNGEwODc5OGUzNDA0ZGRlZjk1MTliM2NkM2E0MzFiMzAyYjBhNmRmMjVmMTQzNzRmZTEzNTZkNmQ1MWMyNDVlNDg1YjU3NjYyNWU3ZWM2ZjQ0YzQyZTlhNjM3ZWQ2YjBiZmY1Y2I2ZjQwNmI3ZWRlZTM4NmJmYjVhODk5ZmE1YWU5ZjI0MTE3YzRiMWZlNjQ5Mjg2NjUxZWNlNDViM2RjMjAwN2NiOGExNjNiZjA1OThkYTQ4MzYxYzU1ZDM5YTY5MTYzZmE4ZmQyNGNmNWY4MzY1NWQyM2RjYTNhZDk2MWM2MmYzNTYyMDg1NTJiYjllZDUyOTA3NzA5Njk2NmQ2NzBjMzU0ZTRhYmM5ODA0ZjE3NDZjMDhjYTE4MjE3YzMyOTA1ZTQ2MmUzNmNlM2JlMzllNzcyYzE4MGU4NjAzOWIyNzgzYTJlYzA3YTI4ZmI1YzU1ZGYwNmY0YzUyYzlkZTJiY2JmNjk1NTgxNzE4Mzk5NTQ5N2NlYTk1NmFlNTE1ZDIyNjE4OThmYTA1MTAxNTcyOGU1YThhYWFjNDJkYWQzMzE3MGQwNDUwN2EzM2E4NTUyMWFiZGYxY2JhNjRlY2ZiODUwNDU4ZGJlZjBhOGFlYTcxNTc1ZDA2MGM3ZGIzOTcwZjg1YTZlMWU0YzdhYmY1YWU4Y2RiMDkzM2Q3MWU4Yzk0ZTA0YTI1NjE5ZGNlZTNkMjI2MWFkMmVlNmJmMTJmZmEwNmQ5OGEwODY0ZDg3NjAyNzMzZWM4NmE2NDUyMWYyYjE4MTc3YjIwMGNiYmUxMTc1NzdhNjE1ZDZjNzcwOTg4YzBiYWQ5NDZlMjA4ZTI0ZmEwNzRlNWFiMzE0M2RiNWJmY2UwZmQxMDhlNGI4MmQxMjBhOTIxMDgwMTFhNzIzYzEyYTc4N2U2ZDc4ODcxOWExMGJkYmE1YjI2OTljMzI3MTg2YWY0ZTIzYzFhOTQ2ODM0YjYxNTBiZGEyNTgzZTljYTJhZDQ0Y2U4ZGJiYmMyZGIwNGRlOGVmOTJlOGVmYzE0MWZiZWNhYTYyODdjNTk0NzRlNmJjMDVkOTliMjk2NGZhMDkwYzNhMjIzM2JhMTg2NTE1YmU3ZWQxZjYxMjk3MGNlZTJkN2FmYjgxYmRkNzYyMTcwNDgxY2QwMDY5MTI3ZDViMDVhYTk5M2I0ZWE5ODhkOGZkZGMxODZmZmI3ZGM5MGE2YzA4ZjRkZjQzNWM5MzQwMjg0OTIzNmMzZmFiNGQyN2M3MDI2YzFkNGRjYjI2MDI2NDZkZWM5NzUxZTc2M2RiYTM3YmRmOGZmOTQwNmFkOWU1MzBlZTVkYjM4MmY0MTMwMDFhZWIwNmE1M2VkOTAyN2Q4MzExNzk3MjdiMDg2NWE4OTE4ZGEzZWRiZWJjZjliMTRlZDQ0Y2U2Y2JhY2VkNGJiMWJkYjdmMTQ0N2U2Y2MyNTRiMzMyMDUxNTEyYmQ3YWY0MjZmYjhmNDAxMzc4Y2QyYmY1OTgzY2EwMWM2NGI5MmVjZjAzMmVhMTVkMTcyMWQwM2Y0ODJkN2NlNmU3NGZlZjZkNTVlNzAyZjQ2OTgwYzgyYjVhODQwMzE5MDBiMWM5ZTU5ZTdjOTdmYmVjN2U4ZjMyM2E5N2E3ZTM2Y2M4OGJlMGYxZDQ1YjdmZjU4NWFjNTRiZDQwN2IyMmI0MTU0YWFjYzhmNmQ3ZWJmNDhlMWQ4MTRjYzVlZDIwZjgwMzdlMGE3OTcxNWVlZjI5YmUzMjgwNmExZDU4YmI3YzVkYTc2ZjU1MGFhM2Q4YTFmYmZmMGViMTljY2IxYTMxM2Q1NWNkYTU2YzllYzJlZjI5NjMyMzg3ZmU4ZDc2ZTNjMDQ2ODA0M2U4ZjY2M2Y0ODYwZWUxMmJmMmQ1YjBiNzQ3NGQ2ZTY5NGY5MWU2ZGNjNDAyNGZmZmZmZmZmZmZmZmZmZmYiCiAgICB9LAogICAgIm1vZHAxOCI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzN2VkNmIwYmZmNWNiNmY0MDZiN2VkZWUzODZiZmI1YTg5OWZhNWFlOWYyNDExN2M0YjFmZTY0OTI4NjY1MWVjZTQ1YjNkYzIwMDdjYjhhMTYzYmYwNTk4ZGE0ODM2MWM1NWQzOWE2OTE2M2ZhOGZkMjRjZjVmODM2NTVkMjNkY2EzYWQ5NjFjNjJmMzU2MjA4NTUyYmI5ZWQ1MjkwNzcwOTY5NjZkNjcwYzM1NGU0YWJjOTgwNGYxNzQ2YzA4Y2ExODIxN2MzMjkwNWU0NjJlMzZjZTNiZTM5ZTc3MmMxODBlODYwMzliMjc4M2EyZWMwN2EyOGZiNWM1NWRmMDZmNGM1MmM5ZGUyYmNiZjY5NTU4MTcxODM5OTU0OTdjZWE5NTZhZTUxNWQyMjYxODk4ZmEwNTEwMTU3MjhlNWE4YWFhYzQyZGFkMzMxNzBkMDQ1MDdhMzNhODU1MjFhYmRmMWNiYTY0ZWNmYjg1MDQ1OGRiZWYwYThhZWE3MTU3NWQwNjBjN2RiMzk3MGY4NWE2ZTFlNGM3YWJmNWFlOGNkYjA5MzNkNzFlOGM5NGUwNGEyNTYxOWRjZWUzZDIyNjFhZDJlZTZiZjEyZmZhMDZkOThhMDg2NGQ4NzYwMjczM2VjODZhNjQ1MjFmMmIxODE3N2IyMDBjYmJlMTE3NTc3YTYxNWQ2Yzc3MDk4OGMwYmFkOTQ2ZTIwOGUyNGZhMDc0ZTVhYjMxNDNkYjViZmNlMGZkMTA4ZTRiODJkMTIwYTkyMTA4MDExYTcyM2MxMmE3ODdlNmQ3ODg3MTlhMTBiZGJhNWIyNjk5YzMyNzE4NmFmNGUyM2MxYTk0NjgzNGI2MTUwYmRhMjU4M2U5Y2EyYWQ0NGNlOGRiYmJjMmRiMDRkZThlZjkyZThlZmMxNDFmYmVjYWE2Mjg3YzU5NDc0ZTZiYzA1ZDk5YjI5NjRmYTA5MGMzYTIyMzNiYTE4NjUxNWJlN2VkMWY2MTI5NzBjZWUyZDdhZmI4MWJkZDc2MjE3MDQ4MWNkMDA2OTEyN2Q1YjA1YWE5OTNiNGVhOTg4ZDhmZGRjMTg2ZmZiN2RjOTBhNmMwOGY0ZGY0MzVjOTM0MDI4NDkyMzZjM2ZhYjRkMjdjNzAyNmMxZDRkY2IyNjAyNjQ2ZGVjOTc1MWU3NjNkYmEzN2JkZjhmZjk0MDZhZDllNTMwZWU1ZGIzODJmNDEzMDAxYWViMDZhNTNlZDkwMjdkODMxMTc5NzI3YjA4NjVhODkxOGRhM2VkYmViY2Y5YjE0ZWQ0NGNlNmNiYWNlZDRiYjFiZGI3ZjE0NDdlNmNjMjU0YjMzMjA1MTUxMmJkN2FmNDI2ZmI4ZjQwMTM3OGNkMmJmNTk4M2NhMDFjNjRiOTJlY2YwMzJlYTE1ZDE3MjFkMDNmNDgyZDdjZTZlNzRmZWY2ZDU1ZTcwMmY0Njk4MGM4MmI1YTg0MDMxOTAwYjFjOWU1OWU3Yzk3ZmJlYzdlOGYzMjNhOTdhN2UzNmNjODhiZTBmMWQ0NWI3ZmY1ODVhYzU0YmQ0MDdiMjJiNDE1NGFhY2M4ZjZkN2ViZjQ4ZTFkODE0Y2M1ZWQyMGY4MDM3ZTBhNzk3MTVlZWYyOWJlMzI4MDZhMWQ1OGJiN2M1ZGE3NmY1NTBhYTNkOGExZmJmZjBlYjE5Y2NiMWEzMTNkNTVjZGE1NmM5ZWMyZWYyOTYzMjM4N2ZlOGQ3NmUzYzA0NjgwNDNlOGY2NjNmNDg2MGVlMTJiZjJkNWIwYjc0NzRkNmU2OTRmOTFlNmRiZTExNTk3NGEzOTI2ZjEyZmVlNWU0Mzg3NzdjYjZhOTMyZGY4Y2Q4YmVjNGQwNzNiOTMxYmEzYmM4MzJiNjhkOWRkMzAwNzQxZmE3YmY4YWZjNDdlZDI1NzZmNjkzNmJhNDI0NjYzYWFiNjM5YzVhZTRmNTY4MzQyM2I0NzQyYmYxYzk3ODIzOGYxNmNiZTM5ZDY1MmRlM2ZkYjhiZWZjODQ4YWQ5MjIyMjJlMDRhNDAzN2MwNzEzZWI1N2E4MWEyM2YwYzczNDczZmM2NDZjZWEzMDZiNGJjYmM4ODYyZjgzODVkZGZhOWQ0YjdmYTJjMDg3ZTg3OTY4MzMwM2VkNWJkZDNhMDYyYjNjZjViM2EyNzhhNjZkMmExM2Y4M2Y0NGY4MmRkZjMxMGVlMDc0YWI2YTM2NDU5N2U4OTlhMDI1NWRjMTY0ZjMxY2M1MDg0Njg1MWRmOWFiNDgxOTVkZWQ3ZWExYjFkNTEwYmQ3ZWU3NGQ3M2ZhZjM2YmMzMWVjZmEyNjgzNTkwNDZmNGViODc5ZjkyNDAwOTQzOGI0ODFjNmNkNzg4OWEwMDJlZDVlZTM4MmJjOTE5MGRhNmZjMDI2ZTQ3OTU1OGU0NDc1Njc3ZTlhYTllMzA1MGUyNzY1Njk0ZGZjODFmNTZlODgwYjk2ZTcxNjBjOTgwZGQ5OGVkZDNkZmZmZmZmZmZmZmZmZmZmZmYiCiAgICB9Cn0KfSx7fV0sOTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0JykKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKCnZhciBQb2ludCA9IHJlcXVpcmUoJy4vcG9pbnQnKQoKZnVuY3Rpb24gQ3VydmUocCwgYSwgYiwgR3gsIEd5LCBuLCBoKSB7CiAgdGhpcy5wID0gcAogIHRoaXMuYSA9IGEKICB0aGlzLmIgPSBiCiAgdGhpcy5HID0gUG9pbnQuZnJvbUFmZmluZSh0aGlzLCBHeCwgR3kpCiAgdGhpcy5uID0gbgogIHRoaXMuaCA9IGgKCiAgdGhpcy5pbmZpbml0eSA9IG5ldyBQb2ludCh0aGlzLCBudWxsLCBudWxsLCBCaWdJbnRlZ2VyLlpFUk8pCgogIC8vIHJlc3VsdCBjYWNoaW5nCiAgdGhpcy5wT3ZlckZvdXIgPSBwLmFkZChCaWdJbnRlZ2VyLk9ORSkuc2hpZnRSaWdodCgyKQp9CgpDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tWCA9IGZ1bmN0aW9uKGlzT2RkLCB4KSB7CiAgdmFyIGFscGhhID0geC5wb3coMykuYWRkKHRoaXMuYS5tdWx0aXBseSh4KSkuYWRkKHRoaXMuYikubW9kKHRoaXMucCkKICB2YXIgYmV0YSA9IGFscGhhLm1vZFBvdyh0aGlzLnBPdmVyRm91ciwgdGhpcy5wKSAvLyBYWFg6IG5vdCBjb21wYXRpYmxlIHdpdGggYWxsIGN1cnZlcwoKICB2YXIgeSA9IGJldGEKICBpZiAoYmV0YS5pc0V2ZW4oKSBeICFpc09kZCkgewogICAgeSA9IHRoaXMucC5zdWJ0cmFjdCh5KSAvLyAteSAlIHAKICB9CgogIHJldHVybiBQb2ludC5mcm9tQWZmaW5lKHRoaXMsIHgsIHkpCn0KCkN1cnZlLnByb3RvdHlwZS5pc0luZmluaXR5ID0gZnVuY3Rpb24oUSkgewogIGlmIChRID09PSB0aGlzLmluZmluaXR5KSByZXR1cm4gdHJ1ZQoKICByZXR1cm4gUS56LnNpZ251bSgpID09PSAwICYmIFEueS5zaWdudW0oKSAhPT0gMAp9CgpDdXJ2ZS5wcm90b3R5cGUuaXNPbkN1cnZlID0gZnVuY3Rpb24oUSkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoUSkpIHJldHVybiB0cnVlCgogIHZhciB4ID0gUS5hZmZpbmVYCiAgdmFyIHkgPSBRLmFmZmluZVkKICB2YXIgYSA9IHRoaXMuYQogIHZhciBiID0gdGhpcy5iCiAgdmFyIHAgPSB0aGlzLnAKCiAgLy8gQ2hlY2sgdGhhdCB4USBhbmQgeVEgYXJlIGludGVnZXJzIGluIHRoZSBpbnRlcnZhbCBbMCwgcCAtIDFdCiAgaWYgKHguc2lnbnVtKCkgPCAwIHx8IHguY29tcGFyZVRvKHApID49IDApIHJldHVybiBmYWxzZQogIGlmICh5LnNpZ251bSgpIDwgMCB8fCB5LmNvbXBhcmVUbyhwKSA+PSAwKSByZXR1cm4gZmFsc2UKCiAgLy8gYW5kIGNoZWNrIHRoYXQgeV4yID0geF4zICsgYXggKyBiIChtb2QgcCkKICB2YXIgbGhzID0geS5zcXVhcmUoKS5tb2QocCkKICB2YXIgcmhzID0geC5wb3coMykuYWRkKGEubXVsdGlwbHkoeCkpLmFkZChiKS5tb2QocCkKICByZXR1cm4gbGhzLmVxdWFscyhyaHMpCn0KCi8qKgogKiBWYWxpZGF0ZSBhbiBlbGxpcHRpYyBjdXJ2ZSBwb2ludC4KICoKICogU2VlIFNFQyAxLCBzZWN0aW9uIDMuMi4yLjE6IEVsbGlwdGljIEN1cnZlIFB1YmxpYyBLZXkgVmFsaWRhdGlvbiBQcmltaXRpdmUKICovCkN1cnZlLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uKFEpIHsKICAvLyBDaGVjayBRICE9IE8KICBhc3NlcnQoIXRoaXMuaXNJbmZpbml0eShRKSwgJ1BvaW50IGlzIGF0IGluZmluaXR5JykKICBhc3NlcnQodGhpcy5pc09uQ3VydmUoUSksICdQb2ludCBpcyBub3Qgb24gdGhlIGN1cnZlJykKCiAgLy8gQ2hlY2sgblEgPSBPICh3aGVyZSBRIGlzIGEgc2NhbGFyIG11bHRpcGxlIG9mIEcpCiAgdmFyIG5RID0gUS5tdWx0aXBseSh0aGlzLm4pCiAgYXNzZXJ0KHRoaXMuaXNJbmZpbml0eShuUSksICdQb2ludCBpcyBub3QgYSBzY2FsYXIgbXVsdGlwbGUgb2YgRycpCgogIHJldHVybiB0cnVlCn0KCm1vZHVsZS5leHBvcnRzID0gQ3VydmUKCn0seyIuL3BvaW50IjoxMDEsImFzc2VydCI6MTUsImJpZ2kiOjE5fV0sOTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cz17CiAgInNlY3AxMjhyMSI6IHsKICAgICJwIjogImZmZmZmZmZkZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmIiwKICAgICJhIjogImZmZmZmZmZkZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjIiwKICAgICJiIjogImU4NzU3OWMxMTA3OWY0M2RkODI0OTkzYzJjZWU1ZWQzIiwKICAgICJuIjogImZmZmZmZmZlMDAwMDAwMDA3NWEzMGQxYjkwMzhhMTE1IiwKICAgICJoIjogIjAxIiwKICAgICJHeCI6ICIxNjFmZjc1MjhiODk5YjJkMGMyODYwN2NhNTJjNWI4NiIsCiAgICAiR3kiOiAiY2Y1YWM4Mzk1YmFmZWIxM2MwMmRhMjkyZGRlZDdhODMiCiAgfSwKICAic2VjcDE2MGsxIjogewogICAgInAiOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmYWM3MyIsCiAgICAiYSI6ICIwMCIsCiAgICAiYiI6ICIwNyIsCiAgICAibiI6ICIwMTAwMDAwMDAwMDAwMDAwMDAwMDAxYjhmYTE2ZGZhYjlhY2ExNmI2YjMiLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogIjNiNGMzODJjZTM3YWExOTJhNDAxOWU3NjMwMzZmNGY1ZGQ0ZDdlYmIiLAogICAgIkd5IjogIjkzOGNmOTM1MzE4ZmRjZWQ2YmMyODI4NjUzMTczM2MzZjAzYzRmZWUiCiAgfSwKICAic2VjcDE2MHIxIjogewogICAgInAiOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmY3ZmZmZmZmZiIsCiAgICAiYSI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjdmZmZmZmZjIiwKICAgICJiIjogIjFjOTdiZWZjNTRiZDdhOGI2NWFjZjg5ZjgxZDRkNGFkYzU2NWZhNDUiLAogICAgIm4iOiAiMDEwMDAwMDAwMDAwMDAwMDAwMDAwMWY0YzhmOTI3YWVkM2NhNzUyMjU3IiwKICAgICJoIjogIjAxIiwKICAgICJHeCI6ICI0YTk2YjU2ODhlZjU3MzI4NDY2NDY5ODk2OGMzOGJiOTEzY2JmYzgyIiwKICAgICJHeSI6ICIyM2E2Mjg1NTMxNjg5NDdkNTlkY2M5MTIwNDIzNTEzNzdhYzVmYjMyIgogIH0sCiAgInNlY3AxOTJrMSI6IHsKICAgICJwIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmZWUzNyIsCiAgICAiYSI6ICIwMCIsCiAgICAiYiI6ICIwMyIsCiAgICAibiI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmUyNmYyZmMxNzBmNjk0NjZhNzRkZWZkOGQiLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogImRiNGZmMTBlYzA1N2U5YWUyNmIwN2QwMjgwYjdmNDM0MWRhNWQxYjFlYWUwNmM3ZCIsCiAgICAiR3kiOiAiOWIyZjJmNmQ5YzU2MjhhNzg0NDE2M2QwMTViZTg2MzQ0MDgyYWE4OGQ5NWUyZjlkIgogIH0sCiAgInNlY3AxOTJyMSI6IHsKICAgICJwIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZlZmZmZmZmZmZmZmZmZmZmZiIsCiAgICAiYSI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWZmZmZmZmZmZmZmZmZmZmMiLAogICAgImIiOiAiNjQyMTA1MTllNTljODBlNzBmYTdlOWFiNzIyNDMwNDlmZWI4ZGVlY2MxNDZiOWIxIiwKICAgICJuIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjk5ZGVmODM2MTQ2YmM5YjFiNGQyMjgzMSIsCiAgICAiaCI6ICIwMSIsCiAgICAiR3giOiAiMTg4ZGE4MGViMDMwOTBmNjdjYmYyMGViNDNhMTg4MDBmNGZmMGFmZDgyZmYxMDEyIiwKICAgICJHeSI6ICIwNzE5MmI5NWZmYzhkYTc4NjMxMDExZWQ2YjI0Y2RkNTczZjk3N2ExMWU3OTQ4MTEiCiAgfSwKICAic2VjcDI1NmsxIjogewogICAgInAiOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmZmMyZiIsCiAgICAiYSI6ICIwMCIsCiAgICAiYiI6ICIwNyIsCiAgICAibiI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWJhYWVkY2U2YWY0OGEwM2JiZmQyNWU4Y2QwMzY0MTQxIiwKICAgICJoIjogIjAxIiwKICAgICJHeCI6ICI3OWJlNjY3ZWY5ZGNiYmFjNTVhMDYyOTVjZTg3MGIwNzAyOWJmY2RiMmRjZTI4ZDk1OWYyODE1YjE2ZjgxNzk4IiwKICAgICJHeSI6ICI0ODNhZGE3NzI2YTNjNDY1NWRhNGZiZmMwZTExMDhhOGZkMTdiNDQ4YTY4NTU0MTk5YzQ3ZDA4ZmZiMTBkNGI4IgogIH0sCiAgInNlY3AyNTZyMSI6IHsKICAgICJwIjogImZmZmZmZmZmMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYiLAogICAgImEiOiAiZmZmZmZmZmYwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYyIsCiAgICAiYiI6ICI1YWM2MzVkOGFhM2E5M2U3YjNlYmJkNTU3Njk4ODZiYzY1MWQwNmIwY2M1M2IwZjYzYmNlM2MzZTI3ZDI2MDRiIiwKICAgICJuIjogImZmZmZmZmZmMDAwMDAwMDBmZmZmZmZmZmZmZmZmZmZmYmNlNmZhYWRhNzE3OWU4NGYzYjljYWMyZmM2MzI1NTEiLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogIjZiMTdkMWYyZTEyYzQyNDdmOGJjZTZlNTYzYTQ0MGYyNzcwMzdkODEyZGViMzNhMGY0YTEzOTQ1ZDg5OGMyOTYiLAogICAgIkd5IjogIjRmZTM0MmUyZmUxYTdmOWI4ZWU3ZWI0YTdjMGY5ZTE2MmJjZTMzNTc2YjMxNWVjZWNiYjY0MDY4MzdiZjUxZjUiCiAgfQp9Cgp9LHt9XSw5OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBQb2ludCA9IHJlcXVpcmUoJy4vcG9pbnQnKQp2YXIgQ3VydmUgPSByZXF1aXJlKCcuL2N1cnZlJykKCnZhciBnZXRDdXJ2ZUJ5TmFtZSA9IHJlcXVpcmUoJy4vbmFtZXMnKQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgQ3VydmU6IEN1cnZlLAogIFBvaW50OiBQb2ludCwKICBnZXRDdXJ2ZUJ5TmFtZTogZ2V0Q3VydmVCeU5hbWUKfQoKfSx7Ii4vY3VydmUiOjk3LCIuL25hbWVzIjoxMDAsIi4vcG9pbnQiOjEwMX1dLDEwMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnYmlnaScpCgp2YXIgY3VydmVzID0gcmVxdWlyZSgnLi9jdXJ2ZXMnKQp2YXIgQ3VydmUgPSByZXF1aXJlKCcuL2N1cnZlJykKCmZ1bmN0aW9uIGdldEN1cnZlQnlOYW1lKG5hbWUpIHsKICB2YXIgY3VydmUgPSBjdXJ2ZXNbbmFtZV0KICBpZiAoIWN1cnZlKSByZXR1cm4gbnVsbAoKICB2YXIgcCA9IG5ldyBCaWdJbnRlZ2VyKGN1cnZlLnAsIDE2KQogIHZhciBhID0gbmV3IEJpZ0ludGVnZXIoY3VydmUuYSwgMTYpCiAgdmFyIGIgPSBuZXcgQmlnSW50ZWdlcihjdXJ2ZS5iLCAxNikKICB2YXIgbiA9IG5ldyBCaWdJbnRlZ2VyKGN1cnZlLm4sIDE2KQogIHZhciBoID0gbmV3IEJpZ0ludGVnZXIoY3VydmUuaCwgMTYpCiAgdmFyIEd4ID0gbmV3IEJpZ0ludGVnZXIoY3VydmUuR3gsIDE2KQogIHZhciBHeSA9IG5ldyBCaWdJbnRlZ2VyKGN1cnZlLkd5LCAxNikKCiAgcmV0dXJuIG5ldyBDdXJ2ZShwLCBhLCBiLCBHeCwgR3ksIG4sIGgpCn0KCm1vZHVsZS5leHBvcnRzID0gZ2V0Q3VydmVCeU5hbWUKCn0seyIuL2N1cnZlIjo5NywiLi9jdXJ2ZXMiOjk4LCJiaWdpIjoxOX1dLDEwMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFzc2VydCA9IHJlcXVpcmUoJ2Fzc2VydCcpCnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnYmlnaScpCgp2YXIgVEhSRUUgPSBCaWdJbnRlZ2VyLnZhbHVlT2YoMykKCmZ1bmN0aW9uIFBvaW50KGN1cnZlLCB4LCB5LCB6KSB7CiAgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKHosIHVuZGVmaW5lZCwgJ01pc3NpbmcgWiBjb29yZGluYXRlJykKCiAgdGhpcy5jdXJ2ZSA9IGN1cnZlCiAgdGhpcy54ID0geAogIHRoaXMueSA9IHkKICB0aGlzLnogPSB6CiAgdGhpcy5fekludiA9IG51bGwKCiAgdGhpcy5jb21wcmVzc2VkID0gdHJ1ZQp9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoUG9pbnQucHJvdG90eXBlLCAnekludicsIHsKICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuX3pJbnYgPT09IG51bGwpIHsKICAgICAgdGhpcy5fekludiA9IHRoaXMuei5tb2RJbnZlcnNlKHRoaXMuY3VydmUucCkKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fekludgogIH0KfSkKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQb2ludC5wcm90b3R5cGUsICdhZmZpbmVYJywgewogIGdldDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy54Lm11bHRpcGx5KHRoaXMuekludikubW9kKHRoaXMuY3VydmUucCkKICB9Cn0pCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoUG9pbnQucHJvdG90eXBlLCAnYWZmaW5lWScsIHsKICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMueS5tdWx0aXBseSh0aGlzLnpJbnYpLm1vZCh0aGlzLmN1cnZlLnApCiAgfQp9KQoKUG9pbnQuZnJvbUFmZmluZSA9IGZ1bmN0aW9uKGN1cnZlLCB4LCB5KSB7CiAgcmV0dXJuIG5ldyBQb2ludChjdXJ2ZSwgeCwgeSwgQmlnSW50ZWdlci5PTkUpCn0KClBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbihvdGhlcikgewogIGlmIChvdGhlciA9PT0gdGhpcykgcmV0dXJuIHRydWUKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpKSByZXR1cm4gdGhpcy5jdXJ2ZS5pc0luZmluaXR5KG90aGVyKQogIGlmICh0aGlzLmN1cnZlLmlzSW5maW5pdHkob3RoZXIpKSByZXR1cm4gdGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpCgogIC8vIHUgPSBZMiAqIFoxIC0gWTEgKiBaMgogIHZhciB1ID0gb3RoZXIueS5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueS5tdWx0aXBseShvdGhlci56KSkubW9kKHRoaXMuY3VydmUucCkKCiAgaWYgKHUuc2lnbnVtKCkgIT09IDApIHJldHVybiBmYWxzZQoKICAvLyB2ID0gWDIgKiBaMSAtIFgxICogWjIKICB2YXIgdiA9IG90aGVyLngubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLngubXVsdGlwbHkob3RoZXIueikpLm1vZCh0aGlzLmN1cnZlLnApCgogIHJldHVybiB2LnNpZ251bSgpID09PSAwCn0KClBvaW50LnByb3RvdHlwZS5uZWdhdGUgPSBmdW5jdGlvbigpIHsKICB2YXIgeSA9IHRoaXMuY3VydmUucC5zdWJ0cmFjdCh0aGlzLnkpCgogIHJldHVybiBuZXcgUG9pbnQodGhpcy5jdXJ2ZSwgdGhpcy54LCB5LCB0aGlzLnopCn0KClBvaW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihiKSB7CiAgaWYgKHRoaXMuY3VydmUuaXNJbmZpbml0eSh0aGlzKSkgcmV0dXJuIGIKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KGIpKSByZXR1cm4gdGhpcwoKICB2YXIgeDEgPSB0aGlzLngKICB2YXIgeTEgPSB0aGlzLnkKICB2YXIgeDIgPSBiLngKICB2YXIgeTIgPSBiLnkKCiAgLy8gdSA9IFkyICogWjEgLSBZMSAqIFoyCiAgdmFyIHUgPSB5Mi5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHkxLm11bHRpcGx5KGIueikpLm1vZCh0aGlzLmN1cnZlLnApCiAgLy8gdiA9IFgyICogWjEgLSBYMSAqIFoyCiAgdmFyIHYgPSB4Mi5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHgxLm11bHRpcGx5KGIueikpLm1vZCh0aGlzLmN1cnZlLnApCgogIGlmICh2LnNpZ251bSgpID09PSAwKSB7CiAgICBpZiAodS5zaWdudW0oKSA9PT0gMCkgewogICAgICByZXR1cm4gdGhpcy50d2ljZSgpIC8vIHRoaXMgPT0gYiwgc28gZG91YmxlCiAgICB9CgogICAgcmV0dXJuIHRoaXMuY3VydmUuaW5maW5pdHkgLy8gdGhpcyA9IC1iLCBzbyBpbmZpbml0eQogIH0KCiAgdmFyIHYyID0gdi5zcXVhcmUoKQogIHZhciB2MyA9IHYyLm11bHRpcGx5KHYpCiAgdmFyIHgxdjIgPSB4MS5tdWx0aXBseSh2MikKICB2YXIgenUyID0gdS5zcXVhcmUoKS5tdWx0aXBseSh0aGlzLnopCgogIC8vIHgzID0gdiAqICh6MiAqICh6MSAqIHVeMiAtIDIgKiB4MSAqIHZeMikgLSB2XjMpCiAgdmFyIHgzID0genUyLnN1YnRyYWN0KHgxdjIuc2hpZnRMZWZ0KDEpKS5tdWx0aXBseShiLnopLnN1YnRyYWN0KHYzKS5tdWx0aXBseSh2KS5tb2QodGhpcy5jdXJ2ZS5wKQogIC8vIHkzID0gejIgKiAoMyAqIHgxICogdSAqIHZeMiAtIHkxICogdl4zIC0gejEgKiB1XjMpICsgdSAqIHZeMwogIHZhciB5MyA9IHgxdjIubXVsdGlwbHkoVEhSRUUpLm11bHRpcGx5KHUpLnN1YnRyYWN0KHkxLm11bHRpcGx5KHYzKSkuc3VidHJhY3QoenUyLm11bHRpcGx5KHUpKS5tdWx0aXBseShiLnopLmFkZCh1Lm11bHRpcGx5KHYzKSkubW9kKHRoaXMuY3VydmUucCkKICAvLyB6MyA9IHZeMyAqIHoxICogejIKICB2YXIgejMgPSB2My5tdWx0aXBseSh0aGlzLnopLm11bHRpcGx5KGIueikubW9kKHRoaXMuY3VydmUucCkKCiAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLmN1cnZlLCB4MywgeTMsIHozKQp9CgpQb2ludC5wcm90b3R5cGUudHdpY2UgPSBmdW5jdGlvbigpIHsKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpKSByZXR1cm4gdGhpcwogIGlmICh0aGlzLnkuc2lnbnVtKCkgPT09IDApIHJldHVybiB0aGlzLmN1cnZlLmluZmluaXR5CgogIHZhciB4MSA9IHRoaXMueAogIHZhciB5MSA9IHRoaXMueQoKICB2YXIgeTF6MSA9IHkxLm11bHRpcGx5KHRoaXMueikKICB2YXIgeTFzcXoxID0geTF6MS5tdWx0aXBseSh5MSkubW9kKHRoaXMuY3VydmUucCkKICB2YXIgYSA9IHRoaXMuY3VydmUuYQoKICAvLyB3ID0gMyAqIHgxXjIgKyBhICogejFeMgogIHZhciB3ID0geDEuc3F1YXJlKCkubXVsdGlwbHkoVEhSRUUpCgogIGlmIChhLnNpZ251bSgpICE9PSAwKSB7CiAgICB3ID0gdy5hZGQodGhpcy56LnNxdWFyZSgpLm11bHRpcGx5KGEpKQogIH0KCiAgdyA9IHcubW9kKHRoaXMuY3VydmUucCkKICAvLyB4MyA9IDIgKiB5MSAqIHoxICogKHdeMiAtIDggKiB4MSAqIHkxXjIgKiB6MSkKICB2YXIgeDMgPSB3LnNxdWFyZSgpLnN1YnRyYWN0KHgxLnNoaWZ0TGVmdCgzKS5tdWx0aXBseSh5MXNxejEpKS5zaGlmdExlZnQoMSkubXVsdGlwbHkoeTF6MSkubW9kKHRoaXMuY3VydmUucCkKICAvLyB5MyA9IDQgKiB5MV4yICogejEgKiAoMyAqIHcgKiB4MSAtIDIgKiB5MV4yICogejEpIC0gd14zCiAgdmFyIHkzID0gdy5tdWx0aXBseShUSFJFRSkubXVsdGlwbHkoeDEpLnN1YnRyYWN0KHkxc3F6MS5zaGlmdExlZnQoMSkpLnNoaWZ0TGVmdCgyKS5tdWx0aXBseSh5MXNxejEpLnN1YnRyYWN0KHcucG93KDMpKS5tb2QodGhpcy5jdXJ2ZS5wKQogIC8vIHozID0gOCAqICh5MSAqIHoxKV4zCiAgdmFyIHozID0geTF6MS5wb3coMykuc2hpZnRMZWZ0KDMpLm1vZCh0aGlzLmN1cnZlLnApCgogIHJldHVybiBuZXcgUG9pbnQodGhpcy5jdXJ2ZSwgeDMsIHkzLCB6MykKfQoKLy8gU2ltcGxlIE5BRiAoTm9uLUFkamFjZW50IEZvcm0pIG11bHRpcGxpY2F0aW9uIGFsZ29yaXRobQovLyBUT0RPOiBtb2R1bGFyaXplIHRoZSBtdWx0aXBsaWNhdGlvbiBhbGdvcml0aG0KUG9pbnQucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24oaykgewogIGlmICh0aGlzLmN1cnZlLmlzSW5maW5pdHkodGhpcykpIHJldHVybiB0aGlzCiAgaWYgKGsuc2lnbnVtKCkgPT09IDApIHJldHVybiB0aGlzLmN1cnZlLmluZmluaXR5CgogIHZhciBlID0gawogIHZhciBoID0gZS5tdWx0aXBseShUSFJFRSkKCiAgdmFyIG5lZyA9IHRoaXMubmVnYXRlKCkKICB2YXIgUiA9IHRoaXMKCiAgZm9yICh2YXIgaSA9IGguYml0TGVuZ3RoKCkgLSAyOyBpID4gMDsgLS1pKSB7CiAgICB2YXIgaEJpdCA9IGgudGVzdEJpdChpKQogICAgdmFyIGVCaXQgPSBlLnRlc3RCaXQoaSkKCiAgICBSID0gUi50d2ljZSgpCgogICAgaWYgKGhCaXQgIT09IGVCaXQpIHsKICAgICAgUiA9IFIuYWRkKGhCaXQgPyB0aGlzIDogbmVnKQogICAgfQogIH0KCiAgcmV0dXJuIFIKfQoKLy8gQ29tcHV0ZSB0aGlzKmogKyB4KmsgKHNpbXVsdGFuZW91cyBtdWx0aXBsaWNhdGlvbikKUG9pbnQucHJvdG90eXBlLm11bHRpcGx5VHdvID0gZnVuY3Rpb24oaiwgeCwgaykgewogIHZhciBpID0gTWF0aC5tYXgoai5iaXRMZW5ndGgoKSwgay5iaXRMZW5ndGgoKSkgLSAxCiAgdmFyIFIgPSB0aGlzLmN1cnZlLmluZmluaXR5CiAgdmFyIGJvdGggPSB0aGlzLmFkZCh4KQoKICB3aGlsZSAoaSA+PSAwKSB7CiAgICB2YXIgakJpdCA9IGoudGVzdEJpdChpKQogICAgdmFyIGtCaXQgPSBrLnRlc3RCaXQoaSkKCiAgICBSID0gUi50d2ljZSgpCgogICAgaWYgKGpCaXQpIHsKICAgICAgaWYgKGtCaXQpIHsKICAgICAgICBSID0gUi5hZGQoYm90aCkKCiAgICAgIH0gZWxzZSB7CiAgICAgICAgUiA9IFIuYWRkKHRoaXMpCiAgICAgIH0KCiAgICB9IGVsc2UgaWYgKGtCaXQpIHsKICAgICAgUiA9IFIuYWRkKHgpCiAgICB9CiAgICAtLWkKICB9CgogIHJldHVybiBSCn0KClBvaW50LnByb3RvdHlwZS5nZXRFbmNvZGVkID0gZnVuY3Rpb24oY29tcHJlc3NlZCkgewogIGlmIChjb21wcmVzc2VkID09IHVuZGVmaW5lZCkgY29tcHJlc3NlZCA9IHRoaXMuY29tcHJlc3NlZAogIGlmICh0aGlzLmN1cnZlLmlzSW5maW5pdHkodGhpcykpIHJldHVybiBuZXcgQnVmZmVyKCcwMCcsICdoZXgnKSAvLyBJbmZpbml0eSBwb2ludCBlbmNvZGVkIGlzIHNpbXBseSAnMDAnCgogIHZhciB4ID0gdGhpcy5hZmZpbmVYCiAgdmFyIHkgPSB0aGlzLmFmZmluZVkKCiAgdmFyIGJ1ZmZlcgoKICAvLyBEZXRlcm1pbmUgc2l6ZSBvZiBxIGluIGJ5dGVzCiAgdmFyIGJ5dGVMZW5ndGggPSBNYXRoLmZsb29yKCh0aGlzLmN1cnZlLnAuYml0TGVuZ3RoKCkgKyA3KSAvIDgpCgogIC8vIDB4MDIvMHgwMyB8IFgKICBpZiAoY29tcHJlc3NlZCkgewogICAgYnVmZmVyID0gbmV3IEJ1ZmZlcigxICsgYnl0ZUxlbmd0aCkKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KHkuaXNFdmVuKCkgPyAweDAyIDogMHgwMywgMCkKCiAgLy8gMHgwNCB8IFggfCBZCiAgfSBlbHNlIHsKICAgIGJ1ZmZlciA9IG5ldyBCdWZmZXIoMSArIGJ5dGVMZW5ndGggKyBieXRlTGVuZ3RoKQogICAgYnVmZmVyLndyaXRlVUludDgoMHgwNCwgMCkKCiAgICB5LnRvQnVmZmVyKGJ5dGVMZW5ndGgpLmNvcHkoYnVmZmVyLCAxICsgYnl0ZUxlbmd0aCkKICB9CgogIHgudG9CdWZmZXIoYnl0ZUxlbmd0aCkuY29weShidWZmZXIsIDEpCgogIHJldHVybiBidWZmZXIKfQoKUG9pbnQuZGVjb2RlRnJvbSA9IGZ1bmN0aW9uKGN1cnZlLCBidWZmZXIpIHsKICB2YXIgdHlwZSA9IGJ1ZmZlci5yZWFkVUludDgoMCkKICB2YXIgY29tcHJlc3NlZCA9ICh0eXBlICE9PSA0KQoKICB2YXIgYnl0ZUxlbmd0aCA9IE1hdGguZmxvb3IoKGN1cnZlLnAuYml0TGVuZ3RoKCkgKyA3KSAvIDgpCiAgdmFyIHggPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoYnVmZmVyLnNsaWNlKDEsIDEgKyBieXRlTGVuZ3RoKSkKCiAgdmFyIFEKICBpZiAoY29tcHJlc3NlZCkgewogICAgYXNzZXJ0LmVxdWFsKGJ1ZmZlci5sZW5ndGgsIGJ5dGVMZW5ndGggKyAxLCAnSW52YWxpZCBzZXF1ZW5jZSBsZW5ndGgnKQogICAgYXNzZXJ0KHR5cGUgPT09IDB4MDIgfHwgdHlwZSA9PT0gMHgwMywgJ0ludmFsaWQgc2VxdWVuY2UgdGFnJykKCiAgICB2YXIgaXNPZGQgPSAodHlwZSA9PT0gMHgwMykKICAgIFEgPSBjdXJ2ZS5wb2ludEZyb21YKGlzT2RkLCB4KQoKICB9IGVsc2UgewogICAgYXNzZXJ0LmVxdWFsKGJ1ZmZlci5sZW5ndGgsIDEgKyBieXRlTGVuZ3RoICsgYnl0ZUxlbmd0aCwgJ0ludmFsaWQgc2VxdWVuY2UgbGVuZ3RoJykKCiAgICB2YXIgeSA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihidWZmZXIuc2xpY2UoMSArIGJ5dGVMZW5ndGgpKQogICAgUSA9IFBvaW50LmZyb21BZmZpbmUoY3VydmUsIHgsIHkpCiAgfQoKICBRLmNvbXByZXNzZWQgPSBjb21wcmVzc2VkCiAgcmV0dXJuIFEKfQoKUG9pbnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogIGlmICh0aGlzLmN1cnZlLmlzSW5maW5pdHkodGhpcykpIHJldHVybiAnKElORklOSVRZKScKCiAgcmV0dXJuICcoJyArIHRoaXMuYWZmaW5lWC50b1N0cmluZygpICsgJywnICsgdGhpcy5hZmZpbmVZLnRvU3RyaW5nKCkgKyAnKScKfQoKbW9kdWxlLmV4cG9ydHMgPSBQb2ludAoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImFzc2VydCI6MTUsImJpZ2kiOjE5LCJidWZmZXIiOjcwfV0sMTAyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGVsbGlwdGljID0gZXhwb3J0czsKCmVsbGlwdGljLnZlcnNpb24gPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uOwplbGxpcHRpYy51dGlscyA9IHJlcXVpcmUoJy4vZWxsaXB0aWMvdXRpbHMnKTsKZWxsaXB0aWMucmFuZCA9IHJlcXVpcmUoJ2Jyb3JhbmQnKTsKZWxsaXB0aWMuaG1hY0RSQkcgPSByZXF1aXJlKCcuL2VsbGlwdGljL2htYWMtZHJiZycpOwplbGxpcHRpYy5jdXJ2ZSA9IHJlcXVpcmUoJy4vZWxsaXB0aWMvY3VydmUnKTsKZWxsaXB0aWMuY3VydmVzID0gcmVxdWlyZSgnLi9lbGxpcHRpYy9jdXJ2ZXMnKTsKCi8vIFByb3RvY29scwplbGxpcHRpYy5lYyA9IHJlcXVpcmUoJy4vZWxsaXB0aWMvZWMnKTsKZWxsaXB0aWMuZWRkc2EgPSByZXF1aXJlKCcuL2VsbGlwdGljL2VkZHNhJyk7Cgp9LHsiLi4vcGFja2FnZS5qc29uIjoxMTgsIi4vZWxsaXB0aWMvY3VydmUiOjEwNSwiLi9lbGxpcHRpYy9jdXJ2ZXMiOjEwOCwiLi9lbGxpcHRpYy9lYyI6MTA5LCIuL2VsbGlwdGljL2VkZHNhIjoxMTIsIi4vZWxsaXB0aWMvaG1hYy1kcmJnIjoxMTUsIi4vZWxsaXB0aWMvdXRpbHMiOjExNywiYnJvcmFuZCI6NDJ9XSwxMDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCcuLi8uLi9lbGxpcHRpYycpOwp2YXIgdXRpbHMgPSBlbGxpcHRpYy51dGlsczsKdmFyIGdldE5BRiA9IHV0aWxzLmdldE5BRjsKdmFyIGdldEpTRiA9IHV0aWxzLmdldEpTRjsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKCmZ1bmN0aW9uIEJhc2VDdXJ2ZSh0eXBlLCBjb25mKSB7CiAgdGhpcy50eXBlID0gdHlwZTsKICB0aGlzLnAgPSBuZXcgQk4oY29uZi5wLCAxNik7CgogIC8vIFVzZSBNb250Z29tZXJ5LCB3aGVuIHRoZXJlIGlzIG5vIGZhc3QgcmVkdWN0aW9uIGZvciB0aGUgcHJpbWUKICB0aGlzLnJlZCA9IGNvbmYucHJpbWUgPyBCTi5yZWQoY29uZi5wcmltZSkgOiBCTi5tb250KHRoaXMucCk7CgogIC8vIFVzZWZ1bCBmb3IgbWFueSBjdXJ2ZXMKICB0aGlzLnplcm8gPSBuZXcgQk4oMCkudG9SZWQodGhpcy5yZWQpOwogIHRoaXMub25lID0gbmV3IEJOKDEpLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLnR3byA9IG5ldyBCTigyKS50b1JlZCh0aGlzLnJlZCk7CgogIC8vIEN1cnZlIGNvbmZpZ3VyYXRpb24sIG9wdGlvbmFsCiAgdGhpcy5uID0gY29uZi5uICYmIG5ldyBCTihjb25mLm4sIDE2KTsKICB0aGlzLmcgPSBjb25mLmcgJiYgdGhpcy5wb2ludEZyb21KU09OKGNvbmYuZywgY29uZi5nUmVkKTsKCiAgLy8gVGVtcG9yYXJ5IGFycmF5cwogIHRoaXMuX3duYWZUMSA9IG5ldyBBcnJheSg0KTsKICB0aGlzLl93bmFmVDIgPSBuZXcgQXJyYXkoNCk7CiAgdGhpcy5fd25hZlQzID0gbmV3IEFycmF5KDQpOwogIHRoaXMuX3duYWZUNCA9IG5ldyBBcnJheSg0KTsKfQptb2R1bGUuZXhwb3J0cyA9IEJhc2VDdXJ2ZTsKCkJhc2VDdXJ2ZS5wcm90b3R5cGUucG9pbnQgPSBmdW5jdGlvbiBwb2ludCgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOwp9OwoKQmFzZUN1cnZlLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkJyk7Cn07CgpCYXNlQ3VydmUucHJvdG90eXBlLl9maXhlZE5hZk11bCA9IGZ1bmN0aW9uIF9maXhlZE5hZk11bChwLCBrKSB7CiAgYXNzZXJ0KHAucHJlY29tcHV0ZWQpOwogIHZhciBkb3VibGVzID0gcC5fZ2V0RG91YmxlcygpOwoKICB2YXIgbmFmID0gZ2V0TkFGKGssIDEpOwogIHZhciBJID0gKDEgPDwgKGRvdWJsZXMuc3RlcCArIDEpKSAtIChkb3VibGVzLnN0ZXAgJSAyID09PSAwID8gMiA6IDEpOwogIEkgLz0gMzsKCiAgLy8gVHJhbnNsYXRlIGludG8gbW9yZSB3aW5kb3dlZCBmb3JtCiAgdmFyIHJlcHIgPSBbXTsKICBmb3IgKHZhciBqID0gMDsgaiA8IG5hZi5sZW5ndGg7IGogKz0gZG91Ymxlcy5zdGVwKSB7CiAgICB2YXIgbmFmVyA9IDA7CiAgICBmb3IgKHZhciBrID0gaiArIGRvdWJsZXMuc3RlcCAtIDE7IGsgPj0gajsgay0tKQogICAgICBuYWZXID0gKG5hZlcgPDwgMSkgKyBuYWZba107CiAgICByZXByLnB1c2gobmFmVyk7CiAgfQoKICB2YXIgYSA9IHRoaXMuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwogIHZhciBiID0gdGhpcy5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CiAgZm9yICh2YXIgaSA9IEk7IGkgPiAwOyBpLS0pIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVwci5sZW5ndGg7IGorKykgewogICAgICB2YXIgbmFmVyA9IHJlcHJbal07CiAgICAgIGlmIChuYWZXID09PSBpKQogICAgICAgIGIgPSBiLm1peGVkQWRkKGRvdWJsZXMucG9pbnRzW2pdKTsKICAgICAgZWxzZSBpZiAobmFmVyA9PT0gLWkpCiAgICAgICAgYiA9IGIubWl4ZWRBZGQoZG91Ymxlcy5wb2ludHNbal0ubmVnKCkpOwogICAgfQogICAgYSA9IGEuYWRkKGIpOwogIH0KICByZXR1cm4gYS50b1AoKTsKfTsKCkJhc2VDdXJ2ZS5wcm90b3R5cGUuX3duYWZNdWwgPSBmdW5jdGlvbiBfd25hZk11bChwLCBrKSB7CiAgdmFyIHcgPSA0OwoKICAvLyBQcmVjb21wdXRlIHdpbmRvdwogIHZhciBuYWZQb2ludHMgPSBwLl9nZXROQUZQb2ludHModyk7CiAgdyA9IG5hZlBvaW50cy53bmQ7CiAgdmFyIHduZCA9IG5hZlBvaW50cy5wb2ludHM7CgogIC8vIEdldCBOQUYgZm9ybQogIHZhciBuYWYgPSBnZXROQUYoaywgdyk7CgogIC8vIEFkZCBgdGhpc2AqKE4rMSkgZm9yIGV2ZXJ5IHctTkFGIGluZGV4CiAgdmFyIGFjYyA9IHRoaXMuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwogIGZvciAodmFyIGkgPSBuYWYubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIC8vIENvdW50IHplcm9lcwogICAgZm9yICh2YXIgayA9IDA7IGkgPj0gMCAmJiBuYWZbaV0gPT09IDA7IGktLSkKICAgICAgaysrOwogICAgaWYgKGkgPj0gMCkKICAgICAgaysrOwogICAgYWNjID0gYWNjLmRibHAoayk7CgogICAgaWYgKGkgPCAwKQogICAgICBicmVhazsKICAgIHZhciB6ID0gbmFmW2ldOwogICAgYXNzZXJ0KHogIT09IDApOwogICAgaWYgKHAudHlwZSA9PT0gJ2FmZmluZScpIHsKICAgICAgLy8gSiArLSBQCiAgICAgIGlmICh6ID4gMCkKICAgICAgICBhY2MgPSBhY2MubWl4ZWRBZGQod25kWyh6IC0gMSkgPj4gMV0pOwogICAgICBlbHNlCiAgICAgICAgYWNjID0gYWNjLm1peGVkQWRkKHduZFsoLXogLSAxKSA+PiAxXS5uZWcoKSk7CiAgICB9IGVsc2UgewogICAgICAvLyBKICstIEoKICAgICAgaWYgKHogPiAwKQogICAgICAgIGFjYyA9IGFjYy5hZGQod25kWyh6IC0gMSkgPj4gMV0pOwogICAgICBlbHNlCiAgICAgICAgYWNjID0gYWNjLmFkZCh3bmRbKC16IC0gMSkgPj4gMV0ubmVnKCkpOwogICAgfQogIH0KICByZXR1cm4gcC50eXBlID09PSAnYWZmaW5lJyA/IGFjYy50b1AoKSA6IGFjYzsKfTsKCkJhc2VDdXJ2ZS5wcm90b3R5cGUuX3duYWZNdWxBZGQgPSBmdW5jdGlvbiBfd25hZk11bEFkZChkZWZXLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29lZmZzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuKSB7CiAgdmFyIHduZFdpZHRoID0gdGhpcy5fd25hZlQxOwogIHZhciB3bmQgPSB0aGlzLl93bmFmVDI7CiAgdmFyIG5hZiA9IHRoaXMuX3duYWZUMzsKCiAgLy8gRmlsbCBhbGwgYXJyYXlzCiAgdmFyIG1heCA9IDA7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgdmFyIHAgPSBwb2ludHNbaV07CiAgICB2YXIgbmFmUG9pbnRzID0gcC5fZ2V0TkFGUG9pbnRzKGRlZlcpOwogICAgd25kV2lkdGhbaV0gPSBuYWZQb2ludHMud25kOwogICAgd25kW2ldID0gbmFmUG9pbnRzLnBvaW50czsKICB9CgogIC8vIENvbWIgc21hbGwgd2luZG93IE5BRnMKICBmb3IgKHZhciBpID0gbGVuIC0gMTsgaSA+PSAxOyBpIC09IDIpIHsKICAgIHZhciBhID0gaSAtIDE7CiAgICB2YXIgYiA9IGk7CiAgICBpZiAod25kV2lkdGhbYV0gIT09IDEgfHwgd25kV2lkdGhbYl0gIT09IDEpIHsKICAgICAgbmFmW2FdID0gZ2V0TkFGKGNvZWZmc1thXSwgd25kV2lkdGhbYV0pOwogICAgICBuYWZbYl0gPSBnZXROQUYoY29lZmZzW2JdLCB3bmRXaWR0aFtiXSk7CiAgICAgIG1heCA9IE1hdGgubWF4KG5hZlthXS5sZW5ndGgsIG1heCk7CiAgICAgIG1heCA9IE1hdGgubWF4KG5hZltiXS5sZW5ndGgsIG1heCk7CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIHZhciBjb21iID0gWwogICAgICBwb2ludHNbYV0sIC8qIDEgKi8KICAgICAgbnVsbCwgLyogMyAqLwogICAgICBudWxsLCAvKiA1ICovCiAgICAgIHBvaW50c1tiXSAvKiA3ICovCiAgICBdOwoKICAgIC8vIFRyeSB0byBhdm9pZCBQcm9qZWN0aXZlIHBvaW50cywgaWYgcG9zc2libGUKICAgIGlmIChwb2ludHNbYV0ueS5jbXAocG9pbnRzW2JdLnkpID09PSAwKSB7CiAgICAgIGNvbWJbMV0gPSBwb2ludHNbYV0uYWRkKHBvaW50c1tiXSk7CiAgICAgIGNvbWJbMl0gPSBwb2ludHNbYV0udG9KKCkubWl4ZWRBZGQocG9pbnRzW2JdLm5lZygpKTsKICAgIH0gZWxzZSBpZiAocG9pbnRzW2FdLnkuY21wKHBvaW50c1tiXS55LnJlZE5lZygpKSA9PT0gMCkgewogICAgICBjb21iWzFdID0gcG9pbnRzW2FdLnRvSigpLm1peGVkQWRkKHBvaW50c1tiXSk7CiAgICAgIGNvbWJbMl0gPSBwb2ludHNbYV0uYWRkKHBvaW50c1tiXS5uZWcoKSk7CiAgICB9IGVsc2UgewogICAgICBjb21iWzFdID0gcG9pbnRzW2FdLnRvSigpLm1peGVkQWRkKHBvaW50c1tiXSk7CiAgICAgIGNvbWJbMl0gPSBwb2ludHNbYV0udG9KKCkubWl4ZWRBZGQocG9pbnRzW2JdLm5lZygpKTsKICAgIH0KCiAgICB2YXIgaW5kZXggPSBbCiAgICAgIC0zLCAvKiAtMSAtMSAqLwogICAgICAtMSwgLyogLTEgMCAqLwogICAgICAtNSwgLyogLTEgMSAqLwogICAgICAtNywgLyogMCAtMSAqLwogICAgICAwLCAvKiAwIDAgKi8KICAgICAgNywgLyogMCAxICovCiAgICAgIDUsIC8qIDEgLTEgKi8KICAgICAgMSwgLyogMSAwICovCiAgICAgIDMgIC8qIDEgMSAqLwogICAgXTsKCiAgICB2YXIganNmID0gZ2V0SlNGKGNvZWZmc1thXSwgY29lZmZzW2JdKTsKICAgIG1heCA9IE1hdGgubWF4KGpzZlswXS5sZW5ndGgsIG1heCk7CiAgICBuYWZbYV0gPSBuZXcgQXJyYXkobWF4KTsKICAgIG5hZltiXSA9IG5ldyBBcnJheShtYXgpOwogICAgZm9yICh2YXIgaiA9IDA7IGogPCBtYXg7IGorKykgewogICAgICB2YXIgamEgPSBqc2ZbMF1bal0gfCAwOwogICAgICB2YXIgamIgPSBqc2ZbMV1bal0gfCAwOwoKICAgICAgbmFmW2FdW2pdID0gaW5kZXhbKGphICsgMSkgKiAzICsgKGpiICsgMSldOwogICAgICBuYWZbYl1bal0gPSAwOwogICAgICB3bmRbYV0gPSBjb21iOwogICAgfQogIH0KCiAgdmFyIGFjYyA9IHRoaXMuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwogIHZhciB0bXAgPSB0aGlzLl93bmFmVDQ7CiAgZm9yICh2YXIgaSA9IG1heDsgaSA+PSAwOyBpLS0pIHsKICAgIHZhciBrID0gMDsKCiAgICB3aGlsZSAoaSA+PSAwKSB7CiAgICAgIHZhciB6ZXJvID0gdHJ1ZTsKICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsZW47IGorKykgewogICAgICAgIHRtcFtqXSA9IG5hZltqXVtpXSB8IDA7CiAgICAgICAgaWYgKHRtcFtqXSAhPT0gMCkKICAgICAgICAgIHplcm8gPSBmYWxzZTsKICAgICAgfQogICAgICBpZiAoIXplcm8pCiAgICAgICAgYnJlYWs7CiAgICAgIGsrKzsKICAgICAgaS0tOwogICAgfQogICAgaWYgKGkgPj0gMCkKICAgICAgaysrOwogICAgYWNjID0gYWNjLmRibHAoayk7CiAgICBpZiAoaSA8IDApCiAgICAgIGJyZWFrOwoKICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVuOyBqKyspIHsKICAgICAgdmFyIHogPSB0bXBbal07CiAgICAgIHZhciBwOwogICAgICBpZiAoeiA9PT0gMCkKICAgICAgICBjb250aW51ZTsKICAgICAgZWxzZSBpZiAoeiA+IDApCiAgICAgICAgcCA9IHduZFtqXVsoeiAtIDEpID4+IDFdOwogICAgICBlbHNlIGlmICh6IDwgMCkKICAgICAgICBwID0gd25kW2pdWygteiAtIDEpID4+IDFdLm5lZygpOwoKICAgICAgaWYgKHAudHlwZSA9PT0gJ2FmZmluZScpCiAgICAgICAgYWNjID0gYWNjLm1peGVkQWRkKHApOwogICAgICBlbHNlCiAgICAgICAgYWNjID0gYWNjLmFkZChwKTsKICAgIH0KICB9CiAgLy8gWmVyb2lmeSByZWZlcmVuY2VzCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgIHduZFtpXSA9IG51bGw7CiAgcmV0dXJuIGFjYy50b1AoKTsKfTsKCmZ1bmN0aW9uIEJhc2VQb2ludChjdXJ2ZSwgdHlwZSkgewogIHRoaXMuY3VydmUgPSBjdXJ2ZTsKICB0aGlzLnR5cGUgPSB0eXBlOwogIHRoaXMucHJlY29tcHV0ZWQgPSBudWxsOwp9CkJhc2VDdXJ2ZS5CYXNlUG9pbnQgPSBCYXNlUG9pbnQ7CgpCYXNlUG9pbnQucHJvdG90eXBlLmVxID0gZnVuY3Rpb24gZXEoLypvdGhlciovKSB7CiAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZSgpIHsKICByZXR1cm4gdGhpcy5jdXJ2ZS52YWxpZGF0ZSh0aGlzKTsKfTsKCkJhc2VDdXJ2ZS5wcm90b3R5cGUuZGVjb2RlUG9pbnQgPSBmdW5jdGlvbiBkZWNvZGVQb2ludChieXRlcywgZW5jKSB7CiAgYnl0ZXMgPSB1dGlscy50b0FycmF5KGJ5dGVzLCBlbmMpOwoKICB2YXIgbGVuID0gdGhpcy5wLmJ5dGVMZW5ndGgoKTsKICBpZiAoYnl0ZXNbMF0gPT09IDB4MDQgJiYgYnl0ZXMubGVuZ3RoIC0gMSA9PT0gMiAqIGxlbikgewogICAgcmV0dXJuIHRoaXMucG9pbnQoYnl0ZXMuc2xpY2UoMSwgMSArIGxlbiksCiAgICAgICAgICAgICAgICAgICAgICBieXRlcy5zbGljZSgxICsgbGVuLCAxICsgMiAqIGxlbikpOwogIH0gZWxzZSBpZiAoKGJ5dGVzWzBdID09PSAweDAyIHx8IGJ5dGVzWzBdID09PSAweDAzKSAmJgogICAgICAgICAgICAgIGJ5dGVzLmxlbmd0aCAtIDEgPT09IGxlbikgewogICAgcmV0dXJuIHRoaXMucG9pbnRGcm9tWChieXRlcy5zbGljZSgxLCAxICsgbGVuKSwgYnl0ZXNbMF0gPT09IDB4MDMpOwogIH0KICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gcG9pbnQgZm9ybWF0Jyk7Cn07CgpCYXNlUG9pbnQucHJvdG90eXBlLmVuY29kZUNvbXByZXNzZWQgPSBmdW5jdGlvbiBlbmNvZGVDb21wcmVzc2VkKGVuYykgewogIHJldHVybiB0aGlzLmVuY29kZShlbmMsIHRydWUpOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5fZW5jb2RlID0gZnVuY3Rpb24gX2VuY29kZShjb21wYWN0KSB7CiAgdmFyIGxlbiA9IHRoaXMuY3VydmUucC5ieXRlTGVuZ3RoKCk7CiAgdmFyIHggPSB0aGlzLmdldFgoKS50b0FycmF5KCdiZScsIGxlbik7CgogIGlmIChjb21wYWN0KQogICAgcmV0dXJuIFsgdGhpcy5nZXRZKCkuaXNFdmVuKCkgPyAweDAyIDogMHgwMyBdLmNvbmNhdCh4KTsKCiAgcmV0dXJuIFsgMHgwNCBdLmNvbmNhdCh4LCB0aGlzLmdldFkoKS50b0FycmF5KCdiZScsIGxlbikpIDsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKGVuYywgY29tcGFjdCkgewogIHJldHVybiB1dGlscy5lbmNvZGUodGhpcy5fZW5jb2RlKGNvbXBhY3QpLCBlbmMpOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5wcmVjb21wdXRlID0gZnVuY3Rpb24gcHJlY29tcHV0ZShwb3dlcikgewogIGlmICh0aGlzLnByZWNvbXB1dGVkKQogICAgcmV0dXJuIHRoaXM7CgogIHZhciBwcmVjb21wdXRlZCA9IHsKICAgIGRvdWJsZXM6IG51bGwsCiAgICBuYWY6IG51bGwsCiAgICBiZXRhOiBudWxsCiAgfTsKICBwcmVjb21wdXRlZC5uYWYgPSB0aGlzLl9nZXROQUZQb2ludHMoOCk7CiAgcHJlY29tcHV0ZWQuZG91YmxlcyA9IHRoaXMuX2dldERvdWJsZXMoNCwgcG93ZXIpOwogIHByZWNvbXB1dGVkLmJldGEgPSB0aGlzLl9nZXRCZXRhKCk7CiAgdGhpcy5wcmVjb21wdXRlZCA9IHByZWNvbXB1dGVkOwoKICByZXR1cm4gdGhpczsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUuX2hhc0RvdWJsZXMgPSBmdW5jdGlvbiBfaGFzRG91YmxlcyhrKSB7CiAgaWYgKCF0aGlzLnByZWNvbXB1dGVkKQogICAgcmV0dXJuIGZhbHNlOwoKICB2YXIgZG91YmxlcyA9IHRoaXMucHJlY29tcHV0ZWQuZG91YmxlczsKICBpZiAoIWRvdWJsZXMpCiAgICByZXR1cm4gZmFsc2U7CgogIHJldHVybiBkb3VibGVzLnBvaW50cy5sZW5ndGggPj0gTWF0aC5jZWlsKChrLmJpdExlbmd0aCgpICsgMSkgLyBkb3VibGVzLnN0ZXApOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5fZ2V0RG91YmxlcyA9IGZ1bmN0aW9uIF9nZXREb3VibGVzKHN0ZXAsIHBvd2VyKSB7CiAgaWYgKHRoaXMucHJlY29tcHV0ZWQgJiYgdGhpcy5wcmVjb21wdXRlZC5kb3VibGVzKQogICAgcmV0dXJuIHRoaXMucHJlY29tcHV0ZWQuZG91YmxlczsKCiAgdmFyIGRvdWJsZXMgPSBbIHRoaXMgXTsKICB2YXIgYWNjID0gdGhpczsKICBmb3IgKHZhciBpID0gMDsgaSA8IHBvd2VyOyBpICs9IHN0ZXApIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3RlcDsgaisrKQogICAgICBhY2MgPSBhY2MuZGJsKCk7CiAgICBkb3VibGVzLnB1c2goYWNjKTsKICB9CiAgcmV0dXJuIHsKICAgIHN0ZXA6IHN0ZXAsCiAgICBwb2ludHM6IGRvdWJsZXMKICB9Owp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5fZ2V0TkFGUG9pbnRzID0gZnVuY3Rpb24gX2dldE5BRlBvaW50cyh3bmQpIHsKICBpZiAodGhpcy5wcmVjb21wdXRlZCAmJiB0aGlzLnByZWNvbXB1dGVkLm5hZikKICAgIHJldHVybiB0aGlzLnByZWNvbXB1dGVkLm5hZjsKCiAgdmFyIHJlcyA9IFsgdGhpcyBdOwogIHZhciBtYXggPSAoMSA8PCB3bmQpIC0gMTsKICB2YXIgZGJsID0gbWF4ID09PSAxID8gbnVsbCA6IHRoaXMuZGJsKCk7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBtYXg7IGkrKykKICAgIHJlc1tpXSA9IHJlc1tpIC0gMV0uYWRkKGRibCk7CiAgcmV0dXJuIHsKICAgIHduZDogd25kLAogICAgcG9pbnRzOiByZXMKICB9Owp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5fZ2V0QmV0YSA9IGZ1bmN0aW9uIF9nZXRCZXRhKCkgewogIHJldHVybiBudWxsOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5kYmxwID0gZnVuY3Rpb24gZGJscChrKSB7CiAgdmFyIHIgPSB0aGlzOwogIGZvciAodmFyIGkgPSAwOyBpIDwgazsgaSsrKQogICAgciA9IHIuZGJsKCk7CiAgcmV0dXJuIHI7Cn07Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjEwMiwiYm4uanMiOjQxfV0sMTA0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGN1cnZlID0gcmVxdWlyZSgnLi4vY3VydmUnKTsKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKdmFyIEJhc2UgPSBjdXJ2ZS5iYXNlOwoKdmFyIGFzc2VydCA9IGVsbGlwdGljLnV0aWxzLmFzc2VydDsKCmZ1bmN0aW9uIEVkd2FyZHNDdXJ2ZShjb25mKSB7CiAgLy8gTk9URTogSW1wb3J0YW50IGFzIHdlIGFyZSBjcmVhdGluZyBwb2ludCBpbiBCYXNlLmNhbGwoKQogIHRoaXMudHdpc3RlZCA9IChjb25mLmEgfCAwKSAhPT0gMTsKICB0aGlzLm1PbmVBID0gdGhpcy50d2lzdGVkICYmIChjb25mLmEgfCAwKSA9PT0gLTE7CiAgdGhpcy5leHRlbmRlZCA9IHRoaXMubU9uZUE7CgogIEJhc2UuY2FsbCh0aGlzLCAnZWR3YXJkcycsIGNvbmYpOwoKICB0aGlzLmEgPSBuZXcgQk4oY29uZi5hLCAxNikudW1vZCh0aGlzLnJlZC5tKTsKICB0aGlzLmEgPSB0aGlzLmEudG9SZWQodGhpcy5yZWQpOwogIHRoaXMuYyA9IG5ldyBCTihjb25mLmMsIDE2KS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy5jMiA9IHRoaXMuYy5yZWRTcXIoKTsKICB0aGlzLmQgPSBuZXcgQk4oY29uZi5kLCAxNikudG9SZWQodGhpcy5yZWQpOwogIHRoaXMuZGQgPSB0aGlzLmQucmVkQWRkKHRoaXMuZCk7CgogIGFzc2VydCghdGhpcy50d2lzdGVkIHx8IHRoaXMuYy5mcm9tUmVkKCkuY21wbigxKSA9PT0gMCk7CiAgdGhpcy5vbmVDID0gKGNvbmYuYyB8IDApID09PSAxOwp9CmluaGVyaXRzKEVkd2FyZHNDdXJ2ZSwgQmFzZSk7Cm1vZHVsZS5leHBvcnRzID0gRWR3YXJkc0N1cnZlOwoKRWR3YXJkc0N1cnZlLnByb3RvdHlwZS5fbXVsQSA9IGZ1bmN0aW9uIF9tdWxBKG51bSkgewogIGlmICh0aGlzLm1PbmVBKQogICAgcmV0dXJuIG51bS5yZWROZWcoKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5hLnJlZE11bChudW0pOwp9OwoKRWR3YXJkc0N1cnZlLnByb3RvdHlwZS5fbXVsQyA9IGZ1bmN0aW9uIF9tdWxDKG51bSkgewogIGlmICh0aGlzLm9uZUMpCiAgICByZXR1cm4gbnVtOwogIGVsc2UKICAgIHJldHVybiB0aGlzLmMucmVkTXVsKG51bSk7Cn07CgovLyBKdXN0IGZvciBjb21wYXRpYmlsaXR5IHdpdGggU2hvcnQgY3VydmUKRWR3YXJkc0N1cnZlLnByb3RvdHlwZS5qcG9pbnQgPSBmdW5jdGlvbiBqcG9pbnQoeCwgeSwgeiwgdCkgewogIHJldHVybiB0aGlzLnBvaW50KHgsIHksIHosIHQpOwp9OwoKRWR3YXJkc0N1cnZlLnByb3RvdHlwZS5wb2ludEZyb21YID0gZnVuY3Rpb24gcG9pbnRGcm9tWCh4LCBvZGQpIHsKICB4ID0gbmV3IEJOKHgsIDE2KTsKICBpZiAoIXgucmVkKQogICAgeCA9IHgudG9SZWQodGhpcy5yZWQpOwoKICB2YXIgeDIgPSB4LnJlZFNxcigpOwogIHZhciByaHMgPSB0aGlzLmMyLnJlZFN1Yih0aGlzLmEucmVkTXVsKHgyKSk7CiAgdmFyIGxocyA9IHRoaXMub25lLnJlZFN1Yih0aGlzLmMyLnJlZE11bCh0aGlzLmQpLnJlZE11bCh4MikpOwoKICB2YXIgeTIgPSByaHMucmVkTXVsKGxocy5yZWRJbnZtKCkpOwogIHZhciB5ID0geTIucmVkU3FydCgpOwogIGlmICh5LnJlZFNxcigpLnJlZFN1Yih5MikuY21wKHRoaXMuemVybykgIT09IDApCiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcG9pbnQnKTsKCiAgdmFyIGlzT2RkID0geS5mcm9tUmVkKCkuaXNPZGQoKTsKICBpZiAob2RkICYmICFpc09kZCB8fCAhb2RkICYmIGlzT2RkKQogICAgeSA9IHkucmVkTmVnKCk7CgogIHJldHVybiB0aGlzLnBvaW50KHgsIHkpOwp9OwoKRWR3YXJkc0N1cnZlLnByb3RvdHlwZS5wb2ludEZyb21ZID0gZnVuY3Rpb24gcG9pbnRGcm9tWSh5LCBvZGQpIHsKICB5ID0gbmV3IEJOKHksIDE2KTsKICBpZiAoIXkucmVkKQogICAgeSA9IHkudG9SZWQodGhpcy5yZWQpOwoKICAvLyB4XjIgPSAoeV4yIC0gMSkgLyAoZCB5XjIgKyAxKQogIHZhciB5MiA9IHkucmVkU3FyKCk7CiAgdmFyIGxocyA9IHkyLnJlZFN1Yih0aGlzLm9uZSk7CiAgdmFyIHJocyA9IHkyLnJlZE11bCh0aGlzLmQpLnJlZEFkZCh0aGlzLm9uZSk7CiAgdmFyIHgyID0gbGhzLnJlZE11bChyaHMucmVkSW52bSgpKTsKCiAgaWYgKHgyLmNtcCh0aGlzLnplcm8pID09PSAwKSB7CiAgICBpZiAob2RkKQogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcG9pbnQnKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIHRoaXMucG9pbnQodGhpcy56ZXJvLCB5KTsKICB9CgogIHZhciB4ID0geDIucmVkU3FydCgpOwogIGlmICh4LnJlZFNxcigpLnJlZFN1Yih4MikuY21wKHRoaXMuemVybykgIT09IDApCiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcG9pbnQnKTsKCiAgaWYgKHguaXNPZGQoKSAhPT0gb2RkKQogICAgeCA9IHgucmVkTmVnKCk7CgogIHJldHVybiB0aGlzLnBvaW50KHgsIHkpOwp9OwoKRWR3YXJkc0N1cnZlLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKHBvaW50KSB7CiAgaWYgKHBvaW50LmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0cnVlOwoKICAvLyBDdXJ2ZTogQSAqIFheMiArIFleMiA9IENeMiAqICgxICsgRCAqIFheMiAqIFleMikKICBwb2ludC5ub3JtYWxpemUoKTsKCiAgdmFyIHgyID0gcG9pbnQueC5yZWRTcXIoKTsKICB2YXIgeTIgPSBwb2ludC55LnJlZFNxcigpOwogIHZhciBsaHMgPSB4Mi5yZWRNdWwodGhpcy5hKS5yZWRBZGQoeTIpOwogIHZhciByaHMgPSB0aGlzLmMyLnJlZE11bCh0aGlzLm9uZS5yZWRBZGQodGhpcy5kLnJlZE11bCh4MikucmVkTXVsKHkyKSkpOwoKICByZXR1cm4gbGhzLmNtcChyaHMpID09PSAwOwp9OwoKZnVuY3Rpb24gUG9pbnQoY3VydmUsIHgsIHksIHosIHQpIHsKICBCYXNlLkJhc2VQb2ludC5jYWxsKHRoaXMsIGN1cnZlLCAncHJvamVjdGl2ZScpOwogIGlmICh4ID09PSBudWxsICYmIHkgPT09IG51bGwgJiYgeiA9PT0gbnVsbCkgewogICAgdGhpcy54ID0gdGhpcy5jdXJ2ZS56ZXJvOwogICAgdGhpcy55ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgICB0aGlzLnogPSB0aGlzLmN1cnZlLm9uZTsKICAgIHRoaXMudCA9IHRoaXMuY3VydmUuemVybzsKICAgIHRoaXMuek9uZSA9IHRydWU7CiAgfSBlbHNlIHsKICAgIHRoaXMueCA9IG5ldyBCTih4LCAxNik7CiAgICB0aGlzLnkgPSBuZXcgQk4oeSwgMTYpOwogICAgdGhpcy56ID0geiA/IG5ldyBCTih6LCAxNikgOiB0aGlzLmN1cnZlLm9uZTsKICAgIHRoaXMudCA9IHQgJiYgbmV3IEJOKHQsIDE2KTsKICAgIGlmICghdGhpcy54LnJlZCkKICAgICAgdGhpcy54ID0gdGhpcy54LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgIGlmICghdGhpcy55LnJlZCkKICAgICAgdGhpcy55ID0gdGhpcy55LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgIGlmICghdGhpcy56LnJlZCkKICAgICAgdGhpcy56ID0gdGhpcy56LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgIGlmICh0aGlzLnQgJiYgIXRoaXMudC5yZWQpCiAgICAgIHRoaXMudCA9IHRoaXMudC50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICB0aGlzLnpPbmUgPSB0aGlzLnogPT09IHRoaXMuY3VydmUub25lOwoKICAgIC8vIFVzZSBleHRlbmRlZCBjb29yZGluYXRlcwogICAgaWYgKHRoaXMuY3VydmUuZXh0ZW5kZWQgJiYgIXRoaXMudCkgewogICAgICB0aGlzLnQgPSB0aGlzLngucmVkTXVsKHRoaXMueSk7CiAgICAgIGlmICghdGhpcy56T25lKQogICAgICAgIHRoaXMudCA9IHRoaXMudC5yZWRNdWwodGhpcy56LnJlZEludm0oKSk7CiAgICB9CiAgfQp9CmluaGVyaXRzKFBvaW50LCBCYXNlLkJhc2VQb2ludCk7CgpFZHdhcmRzQ3VydmUucHJvdG90eXBlLnBvaW50RnJvbUpTT04gPSBmdW5jdGlvbiBwb2ludEZyb21KU09OKG9iaikgewogIHJldHVybiBQb2ludC5mcm9tSlNPTih0aGlzLCBvYmopOwp9OwoKRWR3YXJkc0N1cnZlLnByb3RvdHlwZS5wb2ludCA9IGZ1bmN0aW9uIHBvaW50KHgsIHksIHosIHQpIHsKICByZXR1cm4gbmV3IFBvaW50KHRoaXMsIHgsIHksIHosIHQpOwp9OwoKUG9pbnQuZnJvbUpTT04gPSBmdW5jdGlvbiBmcm9tSlNPTihjdXJ2ZSwgb2JqKSB7CiAgcmV0dXJuIG5ldyBQb2ludChjdXJ2ZSwgb2JqWzBdLCBvYmpbMV0sIG9ialsyXSk7Cn07CgpQb2ludC5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QoKSB7CiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuICc8RUMgUG9pbnQgSW5maW5pdHk+JzsKICByZXR1cm4gJzxFQyBQb2ludCB4OiAnICsgdGhpcy54LmZyb21SZWQoKS50b1N0cmluZygxNiwgMikgKwogICAgICAnIHk6ICcgKyB0aGlzLnkuZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArCiAgICAgICcgejogJyArIHRoaXMuei5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsgJz4nOwp9OwoKUG9pbnQucHJvdG90eXBlLmlzSW5maW5pdHkgPSBmdW5jdGlvbiBpc0luZmluaXR5KCkgewogIC8vIFhYWCBUaGlzIGNvZGUgYXNzdW1lcyB0aGF0IHplcm8gaXMgYWx3YXlzIHplcm8gaW4gcmVkCiAgcmV0dXJuIHRoaXMueC5jbXBuKDApID09PSAwICYmCiAgICAgICAgIHRoaXMueS5jbXAodGhpcy56KSA9PT0gMDsKfTsKClBvaW50LnByb3RvdHlwZS5fZXh0RGJsID0gZnVuY3Rpb24gX2V4dERibCgpIHsKICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tdHdpc3RlZC1leHRlbmRlZC0xLmh0bWwKICAvLyAgICAgI2RvdWJsaW5nLWRibC0yMDA4LWh3Y2QKICAvLyA0TSArIDRTCgogIC8vIEEgPSBYMV4yCiAgdmFyIGEgPSB0aGlzLngucmVkU3FyKCk7CiAgLy8gQiA9IFkxXjIKICB2YXIgYiA9IHRoaXMueS5yZWRTcXIoKTsKICAvLyBDID0gMiAqIFoxXjIKICB2YXIgYyA9IHRoaXMuei5yZWRTcXIoKTsKICBjID0gYy5yZWRJQWRkKGMpOwogIC8vIEQgPSBhICogQQogIHZhciBkID0gdGhpcy5jdXJ2ZS5fbXVsQShhKTsKICAvLyBFID0gKFgxICsgWTEpXjIgLSBBIC0gQgogIHZhciBlID0gdGhpcy54LnJlZEFkZCh0aGlzLnkpLnJlZFNxcigpLnJlZElTdWIoYSkucmVkSVN1YihiKTsKICAvLyBHID0gRCArIEIKICB2YXIgZyA9IGQucmVkQWRkKGIpOwogIC8vIEYgPSBHIC0gQwogIHZhciBmID0gZy5yZWRTdWIoYyk7CiAgLy8gSCA9IEQgLSBCCiAgdmFyIGggPSBkLnJlZFN1YihiKTsKICAvLyBYMyA9IEUgKiBGCiAgdmFyIG54ID0gZS5yZWRNdWwoZik7CiAgLy8gWTMgPSBHICogSAogIHZhciBueSA9IGcucmVkTXVsKGgpOwogIC8vIFQzID0gRSAqIEgKICB2YXIgbnQgPSBlLnJlZE11bChoKTsKICAvLyBaMyA9IEYgKiBHCiAgdmFyIG56ID0gZi5yZWRNdWwoZyk7CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobngsIG55LCBueiwgbnQpOwp9OwoKUG9pbnQucHJvdG90eXBlLl9wcm9qRGJsID0gZnVuY3Rpb24gX3Byb2pEYmwoKSB7CiAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXR3aXN0ZWQtcHJvamVjdGl2ZS5odG1sCiAgLy8gICAgICNkb3VibGluZy1kYmwtMjAwOC1iYmpscAogIC8vICAgICAjZG91YmxpbmctZGJsLTIwMDctYmwKICAvLyBhbmQgb3RoZXJzCiAgLy8gR2VuZXJhbGx5IDNNICsgNFMgb3IgMk0gKyA0UwoKICAvLyBCID0gKFgxICsgWTEpXjIKICB2YXIgYiA9IHRoaXMueC5yZWRBZGQodGhpcy55KS5yZWRTcXIoKTsKICAvLyBDID0gWDFeMgogIHZhciBjID0gdGhpcy54LnJlZFNxcigpOwogIC8vIEQgPSBZMV4yCiAgdmFyIGQgPSB0aGlzLnkucmVkU3FyKCk7CgogIHZhciBueDsKICB2YXIgbnk7CiAgdmFyIG56OwogIGlmICh0aGlzLmN1cnZlLnR3aXN0ZWQpIHsKICAgIC8vIEUgPSBhICogQwogICAgdmFyIGUgPSB0aGlzLmN1cnZlLl9tdWxBKGMpOwogICAgLy8gRiA9IEUgKyBECiAgICB2YXIgZiA9IGUucmVkQWRkKGQpOwogICAgaWYgKHRoaXMuek9uZSkgewogICAgICAvLyBYMyA9IChCIC0gQyAtIEQpICogKEYgLSAyKQogICAgICBueCA9IGIucmVkU3ViKGMpLnJlZFN1YihkKS5yZWRNdWwoZi5yZWRTdWIodGhpcy5jdXJ2ZS50d28pKTsKICAgICAgLy8gWTMgPSBGICogKEUgLSBEKQogICAgICBueSA9IGYucmVkTXVsKGUucmVkU3ViKGQpKTsKICAgICAgLy8gWjMgPSBGXjIgLSAyICogRgogICAgICBueiA9IGYucmVkU3FyKCkucmVkU3ViKGYpLnJlZFN1YihmKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEggPSBaMV4yCiAgICAgIHZhciBoID0gdGhpcy56LnJlZFNxcigpOwogICAgICAvLyBKID0gRiAtIDIgKiBICiAgICAgIHZhciBqID0gZi5yZWRTdWIoaCkucmVkSVN1YihoKTsKICAgICAgLy8gWDMgPSAoQi1DLUQpKkoKICAgICAgbnggPSBiLnJlZFN1YihjKS5yZWRJU3ViKGQpLnJlZE11bChqKTsKICAgICAgLy8gWTMgPSBGICogKEUgLSBEKQogICAgICBueSA9IGYucmVkTXVsKGUucmVkU3ViKGQpKTsKICAgICAgLy8gWjMgPSBGICogSgogICAgICBueiA9IGYucmVkTXVsKGopOwogICAgfQogIH0gZWxzZSB7CiAgICAvLyBFID0gQyArIEQKICAgIHZhciBlID0gYy5yZWRBZGQoZCk7CiAgICAvLyBIID0gKGMgKiBaMSleMgogICAgdmFyIGggPSB0aGlzLmN1cnZlLl9tdWxDKHRoaXMuYy5yZWRNdWwodGhpcy56KSkucmVkU3FyKCk7CiAgICAvLyBKID0gRSAtIDIgKiBICiAgICB2YXIgaiA9IGUucmVkU3ViKGgpLnJlZFN1YihoKTsKICAgIC8vIFgzID0gYyAqIChCIC0gRSkgKiBKCiAgICBueCA9IHRoaXMuY3VydmUuX211bEMoYi5yZWRJU3ViKGUpKS5yZWRNdWwoaik7CiAgICAvLyBZMyA9IGMgKiBFICogKEMgLSBEKQogICAgbnkgPSB0aGlzLmN1cnZlLl9tdWxDKGUpLnJlZE11bChjLnJlZElTdWIoZCkpOwogICAgLy8gWjMgPSBFICogSgogICAgbnogPSBlLnJlZE11bChqKTsKICB9CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobngsIG55LCBueik7Cn07CgpQb2ludC5wcm90b3R5cGUuZGJsID0gZnVuY3Rpb24gZGJsKCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzOwoKICAvLyBEb3VibGUgaW4gZXh0ZW5kZWQgY29vcmRpbmF0ZXMKICBpZiAodGhpcy5jdXJ2ZS5leHRlbmRlZCkKICAgIHJldHVybiB0aGlzLl9leHREYmwoKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5fcHJvakRibCgpOwp9OwoKUG9pbnQucHJvdG90eXBlLl9leHRBZGQgPSBmdW5jdGlvbiBfZXh0QWRkKHApIHsKICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tdHdpc3RlZC1leHRlbmRlZC0xLmh0bWwKICAvLyAgICAgI2FkZGl0aW9uLWFkZC0yMDA4LWh3Y2QtMwogIC8vIDhNCgogIC8vIEEgPSAoWTEgLSBYMSkgKiAoWTIgLSBYMikKICB2YXIgYSA9IHRoaXMueS5yZWRTdWIodGhpcy54KS5yZWRNdWwocC55LnJlZFN1YihwLngpKTsKICAvLyBCID0gKFkxICsgWDEpICogKFkyICsgWDIpCiAgdmFyIGIgPSB0aGlzLnkucmVkQWRkKHRoaXMueCkucmVkTXVsKHAueS5yZWRBZGQocC54KSk7CiAgLy8gQyA9IFQxICogayAqIFQyCiAgdmFyIGMgPSB0aGlzLnQucmVkTXVsKHRoaXMuY3VydmUuZGQpLnJlZE11bChwLnQpOwogIC8vIEQgPSBaMSAqIDIgKiBaMgogIHZhciBkID0gdGhpcy56LnJlZE11bChwLnoucmVkQWRkKHAueikpOwogIC8vIEUgPSBCIC0gQQogIHZhciBlID0gYi5yZWRTdWIoYSk7CiAgLy8gRiA9IEQgLSBDCiAgdmFyIGYgPSBkLnJlZFN1YihjKTsKICAvLyBHID0gRCArIEMKICB2YXIgZyA9IGQucmVkQWRkKGMpOwogIC8vIEggPSBCICsgQQogIHZhciBoID0gYi5yZWRBZGQoYSk7CiAgLy8gWDMgPSBFICogRgogIHZhciBueCA9IGUucmVkTXVsKGYpOwogIC8vIFkzID0gRyAqIEgKICB2YXIgbnkgPSBnLnJlZE11bChoKTsKICAvLyBUMyA9IEUgKiBICiAgdmFyIG50ID0gZS5yZWRNdWwoaCk7CiAgLy8gWjMgPSBGICogRwogIHZhciBueiA9IGYucmVkTXVsKGcpOwogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueSwgbnosIG50KTsKfTsKClBvaW50LnByb3RvdHlwZS5fcHJvakFkZCA9IGZ1bmN0aW9uIF9wcm9qQWRkKHApIHsKICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tdHdpc3RlZC1wcm9qZWN0aXZlLmh0bWwKICAvLyAgICAgI2FkZGl0aW9uLWFkZC0yMDA4LWJiamxwCiAgLy8gICAgICNhZGRpdGlvbi1hZGQtMjAwNy1ibAogIC8vIDEwTSArIDFTCgogIC8vIEEgPSBaMSAqIFoyCiAgdmFyIGEgPSB0aGlzLnoucmVkTXVsKHAueik7CiAgLy8gQiA9IEFeMgogIHZhciBiID0gYS5yZWRTcXIoKTsKICAvLyBDID0gWDEgKiBYMgogIHZhciBjID0gdGhpcy54LnJlZE11bChwLngpOwogIC8vIEQgPSBZMSAqIFkyCiAgdmFyIGQgPSB0aGlzLnkucmVkTXVsKHAueSk7CiAgLy8gRSA9IGQgKiBDICogRAogIHZhciBlID0gdGhpcy5jdXJ2ZS5kLnJlZE11bChjKS5yZWRNdWwoZCk7CiAgLy8gRiA9IEIgLSBFCiAgdmFyIGYgPSBiLnJlZFN1YihlKTsKICAvLyBHID0gQiArIEUKICB2YXIgZyA9IGIucmVkQWRkKGUpOwogIC8vIFgzID0gQSAqIEYgKiAoKFgxICsgWTEpICogKFgyICsgWTIpIC0gQyAtIEQpCiAgdmFyIHRtcCA9IHRoaXMueC5yZWRBZGQodGhpcy55KS5yZWRNdWwocC54LnJlZEFkZChwLnkpKS5yZWRJU3ViKGMpLnJlZElTdWIoZCk7CiAgdmFyIG54ID0gYS5yZWRNdWwoZikucmVkTXVsKHRtcCk7CiAgdmFyIG55OwogIHZhciBuejsKICBpZiAodGhpcy5jdXJ2ZS50d2lzdGVkKSB7CiAgICAvLyBZMyA9IEEgKiBHICogKEQgLSBhICogQykKICAgIG55ID0gYS5yZWRNdWwoZykucmVkTXVsKGQucmVkU3ViKHRoaXMuY3VydmUuX211bEEoYykpKTsKICAgIC8vIFozID0gRiAqIEcKICAgIG56ID0gZi5yZWRNdWwoZyk7CiAgfSBlbHNlIHsKICAgIC8vIFkzID0gQSAqIEcgKiAoRCAtIEMpCiAgICBueSA9IGEucmVkTXVsKGcpLnJlZE11bChkLnJlZFN1YihjKSk7CiAgICAvLyBaMyA9IGMgKiBGICogRwogICAgbnogPSB0aGlzLmN1cnZlLl9tdWxDKGYpLnJlZE11bChnKTsKICB9CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobngsIG55LCBueik7Cn07CgpQb2ludC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkKHApIHsKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gcDsKICBpZiAocC5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gdGhpczsKCiAgaWYgKHRoaXMuY3VydmUuZXh0ZW5kZWQpCiAgICByZXR1cm4gdGhpcy5fZXh0QWRkKHApOwogIGVsc2UKICAgIHJldHVybiB0aGlzLl9wcm9qQWRkKHApOwp9OwoKUG9pbnQucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bChrKSB7CiAgaWYgKHRoaXMuX2hhc0RvdWJsZXMoaykpCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fZml4ZWROYWZNdWwodGhpcywgayk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuY3VydmUuX3duYWZNdWwodGhpcywgayk7Cn07CgpQb2ludC5wcm90b3R5cGUubXVsQWRkID0gZnVuY3Rpb24gbXVsQWRkKGsxLCBwLCBrMikgewogIHJldHVybiB0aGlzLmN1cnZlLl93bmFmTXVsQWRkKDEsIFsgdGhpcywgcCBdLCBbIGsxLCBrMiBdLCAyKTsKfTsKClBvaW50LnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiBub3JtYWxpemUoKSB7CiAgaWYgKHRoaXMuek9uZSkKICAgIHJldHVybiB0aGlzOwoKICAvLyBOb3JtYWxpemUgY29vcmRpbmF0ZXMKICB2YXIgemkgPSB0aGlzLnoucmVkSW52bSgpOwogIHRoaXMueCA9IHRoaXMueC5yZWRNdWwoemkpOwogIHRoaXMueSA9IHRoaXMueS5yZWRNdWwoemkpOwogIGlmICh0aGlzLnQpCiAgICB0aGlzLnQgPSB0aGlzLnQucmVkTXVsKHppKTsKICB0aGlzLnogPSB0aGlzLmN1cnZlLm9uZTsKICB0aGlzLnpPbmUgPSB0cnVlOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnQucHJvdG90eXBlLm5lZyA9IGZ1bmN0aW9uIG5lZygpIHsKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludCh0aGlzLngucmVkTmVnKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55LAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueiwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnQgJiYgdGhpcy50LnJlZE5lZygpKTsKfTsKClBvaW50LnByb3RvdHlwZS5nZXRYID0gZnVuY3Rpb24gZ2V0WCgpIHsKICB0aGlzLm5vcm1hbGl6ZSgpOwogIHJldHVybiB0aGlzLnguZnJvbVJlZCgpOwp9OwoKUG9pbnQucHJvdG90eXBlLmdldFkgPSBmdW5jdGlvbiBnZXRZKCkgewogIHRoaXMubm9ybWFsaXplKCk7CiAgcmV0dXJuIHRoaXMueS5mcm9tUmVkKCk7Cn07CgpQb2ludC5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcShvdGhlcikgewogIHJldHVybiB0aGlzID09PSBvdGhlciB8fAogICAgICAgICB0aGlzLmdldFgoKS5jbXAob3RoZXIuZ2V0WCgpKSA9PT0gMCAmJgogICAgICAgICB0aGlzLmdldFkoKS5jbXAob3RoZXIuZ2V0WSgpKSA9PT0gMDsKfTsKCi8vIENvbXBhdGliaWxpdHkgd2l0aCBCYXNlQ3VydmUKUG9pbnQucHJvdG90eXBlLnRvUCA9IFBvaW50LnByb3RvdHlwZS5ub3JtYWxpemU7ClBvaW50LnByb3RvdHlwZS5taXhlZEFkZCA9IFBvaW50LnByb3RvdHlwZS5hZGQ7Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjEwMiwiLi4vY3VydmUiOjEwNSwiYm4uanMiOjQxLCJpbmhlcml0cyI6MTI4fV0sMTA1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGN1cnZlID0gZXhwb3J0czsKCmN1cnZlLmJhc2UgPSByZXF1aXJlKCcuL2Jhc2UnKTsKY3VydmUuc2hvcnQgPSByZXF1aXJlKCcuL3Nob3J0Jyk7CmN1cnZlLm1vbnQgPSByZXF1aXJlKCcuL21vbnQnKTsKY3VydmUuZWR3YXJkcyA9IHJlcXVpcmUoJy4vZWR3YXJkcycpOwoKfSx7Ii4vYmFzZSI6MTAzLCIuL2Vkd2FyZHMiOjEwNCwiLi9tb250IjoxMDYsIi4vc2hvcnQiOjEwN31dLDEwNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBjdXJ2ZSA9IHJlcXVpcmUoJy4uL2N1cnZlJyk7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CnZhciBCYXNlID0gY3VydmUuYmFzZTsKCnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwoKZnVuY3Rpb24gTW9udEN1cnZlKGNvbmYpIHsKICBCYXNlLmNhbGwodGhpcywgJ21vbnQnLCBjb25mKTsKCiAgdGhpcy5hID0gbmV3IEJOKGNvbmYuYSwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLmIgPSBuZXcgQk4oY29uZi5iLCAxNikudG9SZWQodGhpcy5yZWQpOwogIHRoaXMuaTQgPSBuZXcgQk4oNCkudG9SZWQodGhpcy5yZWQpLnJlZEludm0oKTsKICB0aGlzLnR3byA9IG5ldyBCTigyKS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy5hMjQgPSB0aGlzLmk0LnJlZE11bCh0aGlzLmEucmVkQWRkKHRoaXMudHdvKSk7Cn0KaW5oZXJpdHMoTW9udEN1cnZlLCBCYXNlKTsKbW9kdWxlLmV4cG9ydHMgPSBNb250Q3VydmU7CgpNb250Q3VydmUucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUocG9pbnQpIHsKICB2YXIgeCA9IHBvaW50Lm5vcm1hbGl6ZSgpLng7CiAgdmFyIHgyID0geC5yZWRTcXIoKTsKICB2YXIgcmhzID0geDIucmVkTXVsKHgpLnJlZEFkZCh4Mi5yZWRNdWwodGhpcy5hKSkucmVkQWRkKHgpOwogIHZhciB5ID0gcmhzLnJlZFNxcnQoKTsKCiAgcmV0dXJuIHkucmVkU3FyKCkuY21wKHJocykgPT09IDA7Cn07CgpmdW5jdGlvbiBQb2ludChjdXJ2ZSwgeCwgeikgewogIEJhc2UuQmFzZVBvaW50LmNhbGwodGhpcywgY3VydmUsICdwcm9qZWN0aXZlJyk7CiAgaWYgKHggPT09IG51bGwgJiYgeiA9PT0gbnVsbCkgewogICAgdGhpcy54ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgICB0aGlzLnogPSB0aGlzLmN1cnZlLnplcm87CiAgfSBlbHNlIHsKICAgIHRoaXMueCA9IG5ldyBCTih4LCAxNik7CiAgICB0aGlzLnogPSBuZXcgQk4oeiwgMTYpOwogICAgaWYgKCF0aGlzLngucmVkKQogICAgICB0aGlzLnggPSB0aGlzLngudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgaWYgKCF0aGlzLnoucmVkKQogICAgICB0aGlzLnogPSB0aGlzLnoudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogIH0KfQppbmhlcml0cyhQb2ludCwgQmFzZS5CYXNlUG9pbnQpOwoKTW9udEN1cnZlLnByb3RvdHlwZS5kZWNvZGVQb2ludCA9IGZ1bmN0aW9uIGRlY29kZVBvaW50KGJ5dGVzLCBlbmMpIHsKICByZXR1cm4gdGhpcy5wb2ludCh1dGlscy50b0FycmF5KGJ5dGVzLCBlbmMpLCAxKTsKfTsKCk1vbnRDdXJ2ZS5wcm90b3R5cGUucG9pbnQgPSBmdW5jdGlvbiBwb2ludCh4LCB6KSB7CiAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLCB4LCB6KTsKfTsKCk1vbnRDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tSlNPTiA9IGZ1bmN0aW9uIHBvaW50RnJvbUpTT04ob2JqKSB7CiAgcmV0dXJuIFBvaW50LmZyb21KU09OKHRoaXMsIG9iaik7Cn07CgpQb2ludC5wcm90b3R5cGUucHJlY29tcHV0ZSA9IGZ1bmN0aW9uIHByZWNvbXB1dGUoKSB7CiAgLy8gTm8tb3AKfTsKClBvaW50LnByb3RvdHlwZS5fZW5jb2RlID0gZnVuY3Rpb24gX2VuY29kZSgpIHsKICByZXR1cm4gdGhpcy5nZXRYKCkudG9BcnJheSgnYmUnLCB0aGlzLmN1cnZlLnAuYnl0ZUxlbmd0aCgpKTsKfTsKClBvaW50LmZyb21KU09OID0gZnVuY3Rpb24gZnJvbUpTT04oY3VydmUsIG9iaikgewogIHJldHVybiBuZXcgUG9pbnQoY3VydmUsIG9ialswXSwgb2JqWzFdIHx8IGN1cnZlLm9uZSk7Cn07CgpQb2ludC5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QoKSB7CiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuICc8RUMgUG9pbnQgSW5maW5pdHk+JzsKICByZXR1cm4gJzxFQyBQb2ludCB4OiAnICsgdGhpcy54LmZyb21SZWQoKS50b1N0cmluZygxNiwgMikgKwogICAgICAnIHo6ICcgKyB0aGlzLnouZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArICc+JzsKfTsKClBvaW50LnByb3RvdHlwZS5pc0luZmluaXR5ID0gZnVuY3Rpb24gaXNJbmZpbml0eSgpIHsKICAvLyBYWFggVGhpcyBjb2RlIGFzc3VtZXMgdGhhdCB6ZXJvIGlzIGFsd2F5cyB6ZXJvIGluIHJlZAogIHJldHVybiB0aGlzLnouY21wbigwKSA9PT0gMDsKfTsKClBvaW50LnByb3RvdHlwZS5kYmwgPSBmdW5jdGlvbiBkYmwoKSB7CiAgLy8gaHR0cDovL2h5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1tb250Z29tLXh6Lmh0bWwjZG91YmxpbmctZGJsLTE5ODctbS0zCiAgLy8gMk0gKyAyUyArIDRBCgogIC8vIEEgPSBYMSArIFoxCiAgdmFyIGEgPSB0aGlzLngucmVkQWRkKHRoaXMueik7CiAgLy8gQUEgPSBBXjIKICB2YXIgYWEgPSBhLnJlZFNxcigpOwogIC8vIEIgPSBYMSAtIFoxCiAgdmFyIGIgPSB0aGlzLngucmVkU3ViKHRoaXMueik7CiAgLy8gQkIgPSBCXjIKICB2YXIgYmIgPSBiLnJlZFNxcigpOwogIC8vIEMgPSBBQSAtIEJCCiAgdmFyIGMgPSBhYS5yZWRTdWIoYmIpOwogIC8vIFgzID0gQUEgKiBCQgogIHZhciBueCA9IGFhLnJlZE11bChiYik7CiAgLy8gWjMgPSBDICogKEJCICsgQTI0ICogQykKICB2YXIgbnogPSBjLnJlZE11bChiYi5yZWRBZGQodGhpcy5jdXJ2ZS5hMjQucmVkTXVsKGMpKSk7CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobngsIG56KTsKfTsKClBvaW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQoKSB7CiAgdGhyb3cgbmV3IEVycm9yKCdOb3Qgc3VwcG9ydGVkIG9uIE1vbnRnb21lcnkgY3VydmUnKTsKfTsKClBvaW50LnByb3RvdHlwZS5kaWZmQWRkID0gZnVuY3Rpb24gZGlmZkFkZChwLCBkaWZmKSB7CiAgLy8gaHR0cDovL2h5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1tb250Z29tLXh6Lmh0bWwjZGlmZmFkZC1kYWRkLTE5ODctbS0zCiAgLy8gNE0gKyAyUyArIDZBCgogIC8vIEEgPSBYMiArIFoyCiAgdmFyIGEgPSB0aGlzLngucmVkQWRkKHRoaXMueik7CiAgLy8gQiA9IFgyIC0gWjIKICB2YXIgYiA9IHRoaXMueC5yZWRTdWIodGhpcy56KTsKICAvLyBDID0gWDMgKyBaMwogIHZhciBjID0gcC54LnJlZEFkZChwLnopOwogIC8vIEQgPSBYMyAtIFozCiAgdmFyIGQgPSBwLngucmVkU3ViKHAueik7CiAgLy8gREEgPSBEICogQQogIHZhciBkYSA9IGQucmVkTXVsKGEpOwogIC8vIENCID0gQyAqIEIKICB2YXIgY2IgPSBjLnJlZE11bChiKTsKICAvLyBYNSA9IFoxICogKERBICsgQ0IpXjIKICB2YXIgbnggPSBkaWZmLnoucmVkTXVsKGRhLnJlZEFkZChjYikucmVkU3FyKCkpOwogIC8vIFo1ID0gWDEgKiAoREEgLSBDQileMgogIHZhciBueiA9IGRpZmYueC5yZWRNdWwoZGEucmVkSVN1YihjYikucmVkU3FyKCkpOwogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueik7Cn07CgpQb2ludC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsKGspIHsKICB2YXIgdCA9IGsuY2xvbmUoKTsKICB2YXIgYSA9IHRoaXM7IC8vIChOIC8gMikgKiBRICsgUQogIHZhciBiID0gdGhpcy5jdXJ2ZS5wb2ludChudWxsLCBudWxsKTsgLy8gKE4gLyAyKSAqIFEKICB2YXIgYyA9IHRoaXM7IC8vIFEKCiAgZm9yICh2YXIgYml0cyA9IFtdOyB0LmNtcG4oMCkgIT09IDA7IHQuaXVzaHJuKDEpKQogICAgYml0cy5wdXNoKHQuYW5kbG4oMSkpOwoKICBmb3IgKHZhciBpID0gYml0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgaWYgKGJpdHNbaV0gPT09IDApIHsKICAgICAgLy8gTiAqIFEgKyBRID0gKChOIC8gMikgKiBRICsgUSkpICsgKE4gLyAyKSAqIFEKICAgICAgYSA9IGEuZGlmZkFkZChiLCBjKTsKICAgICAgLy8gTiAqIFEgPSAyICogKChOIC8gMikgKiBRICsgUSkpCiAgICAgIGIgPSBiLmRibCgpOwogICAgfSBlbHNlIHsKICAgICAgLy8gTiAqIFEgPSAoKE4gLyAyKSAqIFEgKyBRKSArICgoTiAvIDIpICogUSkKICAgICAgYiA9IGEuZGlmZkFkZChiLCBjKTsKICAgICAgLy8gTiAqIFEgKyBRID0gMiAqICgoTiAvIDIpICogUSArIFEpCiAgICAgIGEgPSBhLmRibCgpOwogICAgfQogIH0KICByZXR1cm4gYjsKfTsKClBvaW50LnByb3RvdHlwZS5tdWxBZGQgPSBmdW5jdGlvbiBtdWxBZGQoKSB7CiAgdGhyb3cgbmV3IEVycm9yKCdOb3Qgc3VwcG9ydGVkIG9uIE1vbnRnb21lcnkgY3VydmUnKTsKfTsKClBvaW50LnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxKG90aGVyKSB7CiAgcmV0dXJuIHRoaXMuZ2V0WCgpLmNtcChvdGhlci5nZXRYKCkpID09PSAwOwp9OwoKUG9pbnQucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIG5vcm1hbGl6ZSgpIHsKICB0aGlzLnggPSB0aGlzLngucmVkTXVsKHRoaXMuei5yZWRJbnZtKCkpOwogIHRoaXMueiA9IHRoaXMuY3VydmUub25lOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnQucHJvdG90eXBlLmdldFggPSBmdW5jdGlvbiBnZXRYKCkgewogIC8vIE5vcm1hbGl6ZSBjb29yZGluYXRlcwogIHRoaXMubm9ybWFsaXplKCk7CgogIHJldHVybiB0aGlzLnguZnJvbVJlZCgpOwp9OwoKfSx7Ii4uLy4uL2VsbGlwdGljIjoxMDIsIi4uL2N1cnZlIjoxMDUsImJuLmpzIjo0MSwiaW5oZXJpdHMiOjEyOH1dLDEwNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBjdXJ2ZSA9IHJlcXVpcmUoJy4uL2N1cnZlJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CnZhciBCYXNlID0gY3VydmUuYmFzZTsKCnZhciBhc3NlcnQgPSBlbGxpcHRpYy51dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBTaG9ydEN1cnZlKGNvbmYpIHsKICBCYXNlLmNhbGwodGhpcywgJ3Nob3J0JywgY29uZik7CgogIHRoaXMuYSA9IG5ldyBCTihjb25mLmEsIDE2KS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy5iID0gbmV3IEJOKGNvbmYuYiwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLnRpbnYgPSB0aGlzLnR3by5yZWRJbnZtKCk7CgogIHRoaXMuemVyb0EgPSB0aGlzLmEuZnJvbVJlZCgpLmNtcG4oMCkgPT09IDA7CiAgdGhpcy50aHJlZUEgPSB0aGlzLmEuZnJvbVJlZCgpLnN1Yih0aGlzLnApLmNtcG4oLTMpID09PSAwOwoKICAvLyBJZiB0aGUgY3VydmUgaXMgZW5kb21vcnBoaWMsIHByZWNhbGN1bGF0ZSBiZXRhIGFuZCBsYW1iZGEKICB0aGlzLmVuZG8gPSB0aGlzLl9nZXRFbmRvbW9ycGhpc20oY29uZik7CiAgdGhpcy5fZW5kb1duYWZUMSA9IG5ldyBBcnJheSg0KTsKICB0aGlzLl9lbmRvV25hZlQyID0gbmV3IEFycmF5KDQpOwp9CmluaGVyaXRzKFNob3J0Q3VydmUsIEJhc2UpOwptb2R1bGUuZXhwb3J0cyA9IFNob3J0Q3VydmU7CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5fZ2V0RW5kb21vcnBoaXNtID0gZnVuY3Rpb24gX2dldEVuZG9tb3JwaGlzbShjb25mKSB7CiAgLy8gTm8gZWZmaWNpZW50IGVuZG9tb3JwaGlzbQogIGlmICghdGhpcy56ZXJvQSB8fCAhdGhpcy5nIHx8ICF0aGlzLm4gfHwgdGhpcy5wLm1vZG4oMykgIT09IDEpCiAgICByZXR1cm47CgogIC8vIENvbXB1dGUgYmV0YSBhbmQgbGFtYmRhLCB0aGF0IGxhbWJkYSAqIFAgPSAoYmV0YSAqIFB4OyBQeSkKICB2YXIgYmV0YTsKICB2YXIgbGFtYmRhOwogIGlmIChjb25mLmJldGEpIHsKICAgIGJldGEgPSBuZXcgQk4oY29uZi5iZXRhLCAxNikudG9SZWQodGhpcy5yZWQpOwogIH0gZWxzZSB7CiAgICB2YXIgYmV0YXMgPSB0aGlzLl9nZXRFbmRvUm9vdHModGhpcy5wKTsKICAgIC8vIENob29zZSB0aGUgc21hbGxlc3QgYmV0YQogICAgYmV0YSA9IGJldGFzWzBdLmNtcChiZXRhc1sxXSkgPCAwID8gYmV0YXNbMF0gOiBiZXRhc1sxXTsKICAgIGJldGEgPSBiZXRhLnRvUmVkKHRoaXMucmVkKTsKICB9CiAgaWYgKGNvbmYubGFtYmRhKSB7CiAgICBsYW1iZGEgPSBuZXcgQk4oY29uZi5sYW1iZGEsIDE2KTsKICB9IGVsc2UgewogICAgLy8gQ2hvb3NlIHRoZSBsYW1iZGEgdGhhdCBpcyBtYXRjaGluZyBzZWxlY3RlZCBiZXRhCiAgICB2YXIgbGFtYmRhcyA9IHRoaXMuX2dldEVuZG9Sb290cyh0aGlzLm4pOwogICAgaWYgKHRoaXMuZy5tdWwobGFtYmRhc1swXSkueC5jbXAodGhpcy5nLngucmVkTXVsKGJldGEpKSA9PT0gMCkgewogICAgICBsYW1iZGEgPSBsYW1iZGFzWzBdOwogICAgfSBlbHNlIHsKICAgICAgbGFtYmRhID0gbGFtYmRhc1sxXTsKICAgICAgYXNzZXJ0KHRoaXMuZy5tdWwobGFtYmRhKS54LmNtcCh0aGlzLmcueC5yZWRNdWwoYmV0YSkpID09PSAwKTsKICAgIH0KICB9CgogIC8vIEdldCBiYXNpcyB2ZWN0b3JzLCB1c2VkIGZvciBiYWxhbmNlZCBsZW5ndGgtdHdvIHJlcHJlc2VudGF0aW9uCiAgdmFyIGJhc2lzOwogIGlmIChjb25mLmJhc2lzKSB7CiAgICBiYXNpcyA9IGNvbmYuYmFzaXMubWFwKGZ1bmN0aW9uKHZlYykgewogICAgICByZXR1cm4gewogICAgICAgIGE6IG5ldyBCTih2ZWMuYSwgMTYpLAogICAgICAgIGI6IG5ldyBCTih2ZWMuYiwgMTYpCiAgICAgIH07CiAgICB9KTsKICB9IGVsc2UgewogICAgYmFzaXMgPSB0aGlzLl9nZXRFbmRvQmFzaXMobGFtYmRhKTsKICB9CgogIHJldHVybiB7CiAgICBiZXRhOiBiZXRhLAogICAgbGFtYmRhOiBsYW1iZGEsCiAgICBiYXNpczogYmFzaXMKICB9Owp9OwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUuX2dldEVuZG9Sb290cyA9IGZ1bmN0aW9uIF9nZXRFbmRvUm9vdHMobnVtKSB7CiAgLy8gRmluZCByb290cyBvZiBmb3IgeF4yICsgeCArIDEgaW4gRgogIC8vIFJvb3QgPSAoLTEgKy0gU3FydCgtMykpIC8gMgogIC8vCiAgdmFyIHJlZCA9IG51bSA9PT0gdGhpcy5wID8gdGhpcy5yZWQgOiBCTi5tb250KG51bSk7CiAgdmFyIHRpbnYgPSBuZXcgQk4oMikudG9SZWQocmVkKS5yZWRJbnZtKCk7CiAgdmFyIG50aW52ID0gdGludi5yZWROZWcoKTsKCiAgdmFyIHMgPSBuZXcgQk4oMykudG9SZWQocmVkKS5yZWROZWcoKS5yZWRTcXJ0KCkucmVkTXVsKHRpbnYpOwoKICB2YXIgbDEgPSBudGludi5yZWRBZGQocykuZnJvbVJlZCgpOwogIHZhciBsMiA9IG50aW52LnJlZFN1YihzKS5mcm9tUmVkKCk7CiAgcmV0dXJuIFsgbDEsIGwyIF07Cn07CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5fZ2V0RW5kb0Jhc2lzID0gZnVuY3Rpb24gX2dldEVuZG9CYXNpcyhsYW1iZGEpIHsKICAvLyBhcHJ4U3FydCA+PSBzcXJ0KHRoaXMubikKICB2YXIgYXByeFNxcnQgPSB0aGlzLm4udXNocm4oTWF0aC5mbG9vcih0aGlzLm4uYml0TGVuZ3RoKCkgLyAyKSk7CgogIC8vIDMuNzQKICAvLyBSdW4gRUdDRCwgdW50aWwgcihMICsgMSkgPCBhcHJ4U3FydAogIHZhciB1ID0gbGFtYmRhOwogIHZhciB2ID0gdGhpcy5uLmNsb25lKCk7CiAgdmFyIHgxID0gbmV3IEJOKDEpOwogIHZhciB5MSA9IG5ldyBCTigwKTsKICB2YXIgeDIgPSBuZXcgQk4oMCk7CiAgdmFyIHkyID0gbmV3IEJOKDEpOwoKICAvLyBOT1RFOiBhbGwgdmVjdG9ycyBhcmUgcm9vdHMgb2Y6IGEgKyBiICogbGFtYmRhID0gMCAobW9kIG4pCiAgdmFyIGEwOwogIHZhciBiMDsKICAvLyBGaXJzdCB2ZWN0b3IKICB2YXIgYTE7CiAgdmFyIGIxOwogIC8vIFNlY29uZCB2ZWN0b3IKICB2YXIgYTI7CiAgdmFyIGIyOwoKICB2YXIgcHJldlI7CiAgdmFyIGkgPSAwOwogIHZhciByOwogIHZhciB4OwogIHdoaWxlICh1LmNtcG4oMCkgIT09IDApIHsKICAgIHZhciBxID0gdi5kaXYodSk7CiAgICByID0gdi5zdWIocS5tdWwodSkpOwogICAgeCA9IHgyLnN1YihxLm11bCh4MSkpOwogICAgdmFyIHkgPSB5Mi5zdWIocS5tdWwoeTEpKTsKCiAgICBpZiAoIWExICYmIHIuY21wKGFwcnhTcXJ0KSA8IDApIHsKICAgICAgYTAgPSBwcmV2Ui5uZWcoKTsKICAgICAgYjAgPSB4MTsKICAgICAgYTEgPSByLm5lZygpOwogICAgICBiMSA9IHg7CiAgICB9IGVsc2UgaWYgKGExICYmICsraSA9PT0gMikgewogICAgICBicmVhazsKICAgIH0KICAgIHByZXZSID0gcjsKCiAgICB2ID0gdTsKICAgIHUgPSByOwogICAgeDIgPSB4MTsKICAgIHgxID0geDsKICAgIHkyID0geTE7CiAgICB5MSA9IHk7CiAgfQogIGEyID0gci5uZWcoKTsKICBiMiA9IHg7CgogIHZhciBsZW4xID0gYTEuc3FyKCkuYWRkKGIxLnNxcigpKTsKICB2YXIgbGVuMiA9IGEyLnNxcigpLmFkZChiMi5zcXIoKSk7CiAgaWYgKGxlbjIuY21wKGxlbjEpID49IDApIHsKICAgIGEyID0gYTA7CiAgICBiMiA9IGIwOwogIH0KCiAgLy8gTm9ybWFsaXplIHNpZ25zCiAgaWYgKGExLm5lZ2F0aXZlKSB7CiAgICBhMSA9IGExLm5lZygpOwogICAgYjEgPSBiMS5uZWcoKTsKICB9CiAgaWYgKGEyLm5lZ2F0aXZlKSB7CiAgICBhMiA9IGEyLm5lZygpOwogICAgYjIgPSBiMi5uZWcoKTsKICB9CgogIHJldHVybiBbCiAgICB7IGE6IGExLCBiOiBiMSB9LAogICAgeyBhOiBhMiwgYjogYjIgfQogIF07Cn07CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5fZW5kb1NwbGl0ID0gZnVuY3Rpb24gX2VuZG9TcGxpdChrKSB7CiAgdmFyIGJhc2lzID0gdGhpcy5lbmRvLmJhc2lzOwogIHZhciB2MSA9IGJhc2lzWzBdOwogIHZhciB2MiA9IGJhc2lzWzFdOwoKICB2YXIgYzEgPSB2Mi5iLm11bChrKS5kaXZSb3VuZCh0aGlzLm4pOwogIHZhciBjMiA9IHYxLmIubmVnKCkubXVsKGspLmRpdlJvdW5kKHRoaXMubik7CgogIHZhciBwMSA9IGMxLm11bCh2MS5hKTsKICB2YXIgcDIgPSBjMi5tdWwodjIuYSk7CiAgdmFyIHExID0gYzEubXVsKHYxLmIpOwogIHZhciBxMiA9IGMyLm11bCh2Mi5iKTsKCiAgLy8gQ2FsY3VsYXRlIGFuc3dlcgogIHZhciBrMSA9IGsuc3ViKHAxKS5zdWIocDIpOwogIHZhciBrMiA9IHExLmFkZChxMikubmVnKCk7CiAgcmV0dXJuIHsgazE6IGsxLCBrMjogazIgfTsKfTsKClNob3J0Q3VydmUucHJvdG90eXBlLnBvaW50RnJvbVggPSBmdW5jdGlvbiBwb2ludEZyb21YKHgsIG9kZCkgewogIHggPSBuZXcgQk4oeCwgMTYpOwogIGlmICgheC5yZWQpCiAgICB4ID0geC50b1JlZCh0aGlzLnJlZCk7CgogIHZhciB5MiA9IHgucmVkU3FyKCkucmVkTXVsKHgpLnJlZElBZGQoeC5yZWRNdWwodGhpcy5hKSkucmVkSUFkZCh0aGlzLmIpOwogIHZhciB5ID0geTIucmVkU3FydCgpOwogIGlmICh5LnJlZFNxcigpLnJlZFN1Yih5MikuY21wKHRoaXMuemVybykgIT09IDApCiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcG9pbnQnKTsKCiAgLy8gWFhYIElzIHRoZXJlIGFueSB3YXkgdG8gdGVsbCBpZiB0aGUgbnVtYmVyIGlzIG9kZCB3aXRob3V0IGNvbnZlcnRpbmcgaXQKICAvLyB0byBub24tcmVkIGZvcm0/CiAgdmFyIGlzT2RkID0geS5mcm9tUmVkKCkuaXNPZGQoKTsKICBpZiAob2RkICYmICFpc09kZCB8fCAhb2RkICYmIGlzT2RkKQogICAgeSA9IHkucmVkTmVnKCk7CgogIHJldHVybiB0aGlzLnBvaW50KHgsIHkpOwp9OwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZShwb2ludCkgewogIGlmIChwb2ludC5pbmYpCiAgICByZXR1cm4gdHJ1ZTsKCiAgdmFyIHggPSBwb2ludC54OwogIHZhciB5ID0gcG9pbnQueTsKCiAgdmFyIGF4ID0gdGhpcy5hLnJlZE11bCh4KTsKICB2YXIgcmhzID0geC5yZWRTcXIoKS5yZWRNdWwoeCkucmVkSUFkZChheCkucmVkSUFkZCh0aGlzLmIpOwogIHJldHVybiB5LnJlZFNxcigpLnJlZElTdWIocmhzKS5jbXBuKDApID09PSAwOwp9OwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUuX2VuZG9XbmFmTXVsQWRkID0KICAgIGZ1bmN0aW9uIF9lbmRvV25hZk11bEFkZChwb2ludHMsIGNvZWZmcykgewogIHZhciBucG9pbnRzID0gdGhpcy5fZW5kb1duYWZUMTsKICB2YXIgbmNvZWZmcyA9IHRoaXMuX2VuZG9XbmFmVDI7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzcGxpdCA9IHRoaXMuX2VuZG9TcGxpdChjb2VmZnNbaV0pOwogICAgdmFyIHAgPSBwb2ludHNbaV07CiAgICB2YXIgYmV0YSA9IHAuX2dldEJldGEoKTsKCiAgICBpZiAoc3BsaXQuazEubmVnYXRpdmUpIHsKICAgICAgc3BsaXQuazEuaW5lZygpOwogICAgICBwID0gcC5uZWcodHJ1ZSk7CiAgICB9CiAgICBpZiAoc3BsaXQuazIubmVnYXRpdmUpIHsKICAgICAgc3BsaXQuazIuaW5lZygpOwogICAgICBiZXRhID0gYmV0YS5uZWcodHJ1ZSk7CiAgICB9CgogICAgbnBvaW50c1tpICogMl0gPSBwOwogICAgbnBvaW50c1tpICogMiArIDFdID0gYmV0YTsKICAgIG5jb2VmZnNbaSAqIDJdID0gc3BsaXQuazE7CiAgICBuY29lZmZzW2kgKiAyICsgMV0gPSBzcGxpdC5rMjsKICB9CiAgdmFyIHJlcyA9IHRoaXMuX3duYWZNdWxBZGQoMSwgbnBvaW50cywgbmNvZWZmcywgaSAqIDIpOwoKICAvLyBDbGVhbi11cCByZWZlcmVuY2VzIHRvIHBvaW50cyBhbmQgY29lZmZpY2llbnRzCiAgZm9yICh2YXIgaiA9IDA7IGogPCBpICogMjsgaisrKSB7CiAgICBucG9pbnRzW2pdID0gbnVsbDsKICAgIG5jb2VmZnNbal0gPSBudWxsOwogIH0KICByZXR1cm4gcmVzOwp9OwoKZnVuY3Rpb24gUG9pbnQoY3VydmUsIHgsIHksIGlzUmVkKSB7CiAgQmFzZS5CYXNlUG9pbnQuY2FsbCh0aGlzLCBjdXJ2ZSwgJ2FmZmluZScpOwogIGlmICh4ID09PSBudWxsICYmIHkgPT09IG51bGwpIHsKICAgIHRoaXMueCA9IG51bGw7CiAgICB0aGlzLnkgPSBudWxsOwogICAgdGhpcy5pbmYgPSB0cnVlOwogIH0gZWxzZSB7CiAgICB0aGlzLnggPSBuZXcgQk4oeCwgMTYpOwogICAgdGhpcy55ID0gbmV3IEJOKHksIDE2KTsKICAgIC8vIEZvcmNlIHJlZGdvbWVyeSByZXByZXNlbnRhdGlvbiB3aGVuIGxvYWRpbmcgZnJvbSBKU09OCiAgICBpZiAoaXNSZWQpIHsKICAgICAgdGhpcy54LmZvcmNlUmVkKHRoaXMuY3VydmUucmVkKTsKICAgICAgdGhpcy55LmZvcmNlUmVkKHRoaXMuY3VydmUucmVkKTsKICAgIH0KICAgIGlmICghdGhpcy54LnJlZCkKICAgICAgdGhpcy54ID0gdGhpcy54LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgIGlmICghdGhpcy55LnJlZCkKICAgICAgdGhpcy55ID0gdGhpcy55LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgIHRoaXMuaW5mID0gZmFsc2U7CiAgfQp9CmluaGVyaXRzKFBvaW50LCBCYXNlLkJhc2VQb2ludCk7CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5wb2ludCA9IGZ1bmN0aW9uIHBvaW50KHgsIHksIGlzUmVkKSB7CiAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLCB4LCB5LCBpc1JlZCk7Cn07CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5wb2ludEZyb21KU09OID0gZnVuY3Rpb24gcG9pbnRGcm9tSlNPTihvYmosIHJlZCkgewogIHJldHVybiBQb2ludC5mcm9tSlNPTih0aGlzLCBvYmosIHJlZCk7Cn07CgpQb2ludC5wcm90b3R5cGUuX2dldEJldGEgPSBmdW5jdGlvbiBfZ2V0QmV0YSgpIHsKICBpZiAoIXRoaXMuY3VydmUuZW5kbykKICAgIHJldHVybjsKCiAgdmFyIHByZSA9IHRoaXMucHJlY29tcHV0ZWQ7CiAgaWYgKHByZSAmJiBwcmUuYmV0YSkKICAgIHJldHVybiBwcmUuYmV0YTsKCiAgdmFyIGJldGEgPSB0aGlzLmN1cnZlLnBvaW50KHRoaXMueC5yZWRNdWwodGhpcy5jdXJ2ZS5lbmRvLmJldGEpLCB0aGlzLnkpOwogIGlmIChwcmUpIHsKICAgIHZhciBjdXJ2ZSA9IHRoaXMuY3VydmU7CiAgICB2YXIgZW5kb011bCA9IGZ1bmN0aW9uKHApIHsKICAgICAgcmV0dXJuIGN1cnZlLnBvaW50KHAueC5yZWRNdWwoY3VydmUuZW5kby5iZXRhKSwgcC55KTsKICAgIH07CiAgICBwcmUuYmV0YSA9IGJldGE7CiAgICBiZXRhLnByZWNvbXB1dGVkID0gewogICAgICBiZXRhOiBudWxsLAogICAgICBuYWY6IHByZS5uYWYgJiYgewogICAgICAgIHduZDogcHJlLm5hZi53bmQsCiAgICAgICAgcG9pbnRzOiBwcmUubmFmLnBvaW50cy5tYXAoZW5kb011bCkKICAgICAgfSwKICAgICAgZG91YmxlczogcHJlLmRvdWJsZXMgJiYgewogICAgICAgIHN0ZXA6IHByZS5kb3VibGVzLnN0ZXAsCiAgICAgICAgcG9pbnRzOiBwcmUuZG91Ymxlcy5wb2ludHMubWFwKGVuZG9NdWwpCiAgICAgIH0KICAgIH07CiAgfQogIHJldHVybiBiZXRhOwp9OwoKUG9pbnQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHsKICBpZiAoIXRoaXMucHJlY29tcHV0ZWQpCiAgICByZXR1cm4gWyB0aGlzLngsIHRoaXMueSBdOwoKICByZXR1cm4gWyB0aGlzLngsIHRoaXMueSwgdGhpcy5wcmVjb21wdXRlZCAmJiB7CiAgICBkb3VibGVzOiB0aGlzLnByZWNvbXB1dGVkLmRvdWJsZXMgJiYgewogICAgICBzdGVwOiB0aGlzLnByZWNvbXB1dGVkLmRvdWJsZXMuc3RlcCwKICAgICAgcG9pbnRzOiB0aGlzLnByZWNvbXB1dGVkLmRvdWJsZXMucG9pbnRzLnNsaWNlKDEpCiAgICB9LAogICAgbmFmOiB0aGlzLnByZWNvbXB1dGVkLm5hZiAmJiB7CiAgICAgIHduZDogdGhpcy5wcmVjb21wdXRlZC5uYWYud25kLAogICAgICBwb2ludHM6IHRoaXMucHJlY29tcHV0ZWQubmFmLnBvaW50cy5zbGljZSgxKQogICAgfQogIH0gXTsKfTsKClBvaW50LmZyb21KU09OID0gZnVuY3Rpb24gZnJvbUpTT04oY3VydmUsIG9iaiwgcmVkKSB7CiAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKQogICAgb2JqID0gSlNPTi5wYXJzZShvYmopOwogIHZhciByZXMgPSBjdXJ2ZS5wb2ludChvYmpbMF0sIG9ialsxXSwgcmVkKTsKICBpZiAoIW9ialsyXSkKICAgIHJldHVybiByZXM7CgogIGZ1bmN0aW9uIG9iajJwb2ludChvYmopIHsKICAgIHJldHVybiBjdXJ2ZS5wb2ludChvYmpbMF0sIG9ialsxXSwgcmVkKTsKICB9CgogIHZhciBwcmUgPSBvYmpbMl07CiAgcmVzLnByZWNvbXB1dGVkID0gewogICAgYmV0YTogbnVsbCwKICAgIGRvdWJsZXM6IHByZS5kb3VibGVzICYmIHsKICAgICAgc3RlcDogcHJlLmRvdWJsZXMuc3RlcCwKICAgICAgcG9pbnRzOiBbIHJlcyBdLmNvbmNhdChwcmUuZG91Ymxlcy5wb2ludHMubWFwKG9iajJwb2ludCkpCiAgICB9LAogICAgbmFmOiBwcmUubmFmICYmIHsKICAgICAgd25kOiBwcmUubmFmLnduZCwKICAgICAgcG9pbnRzOiBbIHJlcyBdLmNvbmNhdChwcmUubmFmLnBvaW50cy5tYXAob2JqMnBvaW50KSkKICAgIH0KICB9OwogIHJldHVybiByZXM7Cn07CgpQb2ludC5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QoKSB7CiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuICc8RUMgUG9pbnQgSW5maW5pdHk+JzsKICByZXR1cm4gJzxFQyBQb2ludCB4OiAnICsgdGhpcy54LmZyb21SZWQoKS50b1N0cmluZygxNiwgMikgKwogICAgICAnIHk6ICcgKyB0aGlzLnkuZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArICc+JzsKfTsKClBvaW50LnByb3RvdHlwZS5pc0luZmluaXR5ID0gZnVuY3Rpb24gaXNJbmZpbml0eSgpIHsKICByZXR1cm4gdGhpcy5pbmY7Cn07CgpQb2ludC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkKHApIHsKICAvLyBPICsgUCA9IFAKICBpZiAodGhpcy5pbmYpCiAgICByZXR1cm4gcDsKCiAgLy8gUCArIE8gPSBQCiAgaWYgKHAuaW5mKQogICAgcmV0dXJuIHRoaXM7CgogIC8vIFAgKyBQID0gMlAKICBpZiAodGhpcy5lcShwKSkKICAgIHJldHVybiB0aGlzLmRibCgpOwoKICAvLyBQICsgKC1QKSA9IE8KICBpZiAodGhpcy5uZWcoKS5lcShwKSkKICAgIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG51bGwsIG51bGwpOwoKICAvLyBQICsgUSA9IE8KICBpZiAodGhpcy54LmNtcChwLngpID09PSAwKQogICAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobnVsbCwgbnVsbCk7CgogIHZhciBjID0gdGhpcy55LnJlZFN1YihwLnkpOwogIGlmIChjLmNtcG4oMCkgIT09IDApCiAgICBjID0gYy5yZWRNdWwodGhpcy54LnJlZFN1YihwLngpLnJlZEludm0oKSk7CiAgdmFyIG54ID0gYy5yZWRTcXIoKS5yZWRJU3ViKHRoaXMueCkucmVkSVN1YihwLngpOwogIHZhciBueSA9IGMucmVkTXVsKHRoaXMueC5yZWRTdWIobngpKS5yZWRJU3ViKHRoaXMueSk7CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobngsIG55KTsKfTsKClBvaW50LnByb3RvdHlwZS5kYmwgPSBmdW5jdGlvbiBkYmwoKSB7CiAgaWYgKHRoaXMuaW5mKQogICAgcmV0dXJuIHRoaXM7CgogIC8vIDJQID0gTwogIHZhciB5czEgPSB0aGlzLnkucmVkQWRkKHRoaXMueSk7CiAgaWYgKHlzMS5jbXBuKDApID09PSAwKQogICAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobnVsbCwgbnVsbCk7CgogIHZhciBhID0gdGhpcy5jdXJ2ZS5hOwoKICB2YXIgeDIgPSB0aGlzLngucmVkU3FyKCk7CiAgdmFyIGR5aW52ID0geXMxLnJlZEludm0oKTsKICB2YXIgYyA9IHgyLnJlZEFkZCh4MikucmVkSUFkZCh4MikucmVkSUFkZChhKS5yZWRNdWwoZHlpbnYpOwoKICB2YXIgbnggPSBjLnJlZFNxcigpLnJlZElTdWIodGhpcy54LnJlZEFkZCh0aGlzLngpKTsKICB2YXIgbnkgPSBjLnJlZE11bCh0aGlzLngucmVkU3ViKG54KSkucmVkSVN1Yih0aGlzLnkpOwogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueSk7Cn07CgpQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uIGdldFgoKSB7CiAgcmV0dXJuIHRoaXMueC5mcm9tUmVkKCk7Cn07CgpQb2ludC5wcm90b3R5cGUuZ2V0WSA9IGZ1bmN0aW9uIGdldFkoKSB7CiAgcmV0dXJuIHRoaXMueS5mcm9tUmVkKCk7Cn07CgpQb2ludC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsKGspIHsKICBrID0gbmV3IEJOKGssIDE2KTsKCiAgaWYgKHRoaXMuX2hhc0RvdWJsZXMoaykpCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fZml4ZWROYWZNdWwodGhpcywgayk7CiAgZWxzZSBpZiAodGhpcy5jdXJ2ZS5lbmRvKQogICAgcmV0dXJuIHRoaXMuY3VydmUuX2VuZG9XbmFmTXVsQWRkKFsgdGhpcyBdLCBbIGsgXSk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuY3VydmUuX3duYWZNdWwodGhpcywgayk7Cn07CgpQb2ludC5wcm90b3R5cGUubXVsQWRkID0gZnVuY3Rpb24gbXVsQWRkKGsxLCBwMiwgazIpIHsKICB2YXIgcG9pbnRzID0gWyB0aGlzLCBwMiBdOwogIHZhciBjb2VmZnMgPSBbIGsxLCBrMiBdOwogIGlmICh0aGlzLmN1cnZlLmVuZG8pCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fZW5kb1duYWZNdWxBZGQocG9pbnRzLCBjb2VmZnMpOwogIGVsc2UKICAgIHJldHVybiB0aGlzLmN1cnZlLl93bmFmTXVsQWRkKDEsIHBvaW50cywgY29lZmZzLCAyKTsKfTsKClBvaW50LnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxKHApIHsKICByZXR1cm4gdGhpcyA9PT0gcCB8fAogICAgICAgICB0aGlzLmluZiA9PT0gcC5pbmYgJiYKICAgICAgICAgICAgICh0aGlzLmluZiB8fCB0aGlzLnguY21wKHAueCkgPT09IDAgJiYgdGhpcy55LmNtcChwLnkpID09PSAwKTsKfTsKClBvaW50LnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcoX3ByZWNvbXB1dGUpIHsKICBpZiAodGhpcy5pbmYpCiAgICByZXR1cm4gdGhpczsKCiAgdmFyIHJlcyA9IHRoaXMuY3VydmUucG9pbnQodGhpcy54LCB0aGlzLnkucmVkTmVnKCkpOwogIGlmIChfcHJlY29tcHV0ZSAmJiB0aGlzLnByZWNvbXB1dGVkKSB7CiAgICB2YXIgcHJlID0gdGhpcy5wcmVjb21wdXRlZDsKICAgIHZhciBuZWdhdGUgPSBmdW5jdGlvbihwKSB7CiAgICAgIHJldHVybiBwLm5lZygpOwogICAgfTsKICAgIHJlcy5wcmVjb21wdXRlZCA9IHsKICAgICAgbmFmOiBwcmUubmFmICYmIHsKICAgICAgICB3bmQ6IHByZS5uYWYud25kLAogICAgICAgIHBvaW50czogcHJlLm5hZi5wb2ludHMubWFwKG5lZ2F0ZSkKICAgICAgfSwKICAgICAgZG91YmxlczogcHJlLmRvdWJsZXMgJiYgewogICAgICAgIHN0ZXA6IHByZS5kb3VibGVzLnN0ZXAsCiAgICAgICAgcG9pbnRzOiBwcmUuZG91Ymxlcy5wb2ludHMubWFwKG5lZ2F0ZSkKICAgICAgfQogICAgfTsKICB9CiAgcmV0dXJuIHJlczsKfTsKClBvaW50LnByb3RvdHlwZS50b0ogPSBmdW5jdGlvbiB0b0ooKSB7CiAgaWYgKHRoaXMuaW5mKQogICAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwoKICB2YXIgcmVzID0gdGhpcy5jdXJ2ZS5qcG9pbnQodGhpcy54LCB0aGlzLnksIHRoaXMuY3VydmUub25lKTsKICByZXR1cm4gcmVzOwp9OwoKZnVuY3Rpb24gSlBvaW50KGN1cnZlLCB4LCB5LCB6KSB7CiAgQmFzZS5CYXNlUG9pbnQuY2FsbCh0aGlzLCBjdXJ2ZSwgJ2phY29iaWFuJyk7CiAgaWYgKHggPT09IG51bGwgJiYgeSA9PT0gbnVsbCAmJiB6ID09PSBudWxsKSB7CiAgICB0aGlzLnggPSB0aGlzLmN1cnZlLm9uZTsKICAgIHRoaXMueSA9IHRoaXMuY3VydmUub25lOwogICAgdGhpcy56ID0gbmV3IEJOKDApOwogIH0gZWxzZSB7CiAgICB0aGlzLnggPSBuZXcgQk4oeCwgMTYpOwogICAgdGhpcy55ID0gbmV3IEJOKHksIDE2KTsKICAgIHRoaXMueiA9IG5ldyBCTih6LCAxNik7CiAgfQogIGlmICghdGhpcy54LnJlZCkKICAgIHRoaXMueCA9IHRoaXMueC50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgaWYgKCF0aGlzLnkucmVkKQogICAgdGhpcy55ID0gdGhpcy55LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICBpZiAoIXRoaXMuei5yZWQpCiAgICB0aGlzLnogPSB0aGlzLnoudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwoKICB0aGlzLnpPbmUgPSB0aGlzLnogPT09IHRoaXMuY3VydmUub25lOwp9CmluaGVyaXRzKEpQb2ludCwgQmFzZS5CYXNlUG9pbnQpOwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUuanBvaW50ID0gZnVuY3Rpb24ganBvaW50KHgsIHksIHopIHsKICByZXR1cm4gbmV3IEpQb2ludCh0aGlzLCB4LCB5LCB6KTsKfTsKCkpQb2ludC5wcm90b3R5cGUudG9QID0gZnVuY3Rpb24gdG9QKCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG51bGwsIG51bGwpOwoKICB2YXIgemludiA9IHRoaXMuei5yZWRJbnZtKCk7CiAgdmFyIHppbnYyID0gemludi5yZWRTcXIoKTsKICB2YXIgYXggPSB0aGlzLngucmVkTXVsKHppbnYyKTsKICB2YXIgYXkgPSB0aGlzLnkucmVkTXVsKHppbnYyKS5yZWRNdWwoemludik7CgogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KGF4LCBheSk7Cn07CgpKUG9pbnQucHJvdG90eXBlLm5lZyA9IGZ1bmN0aW9uIG5lZygpIHsKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQodGhpcy54LCB0aGlzLnkucmVkTmVnKCksIHRoaXMueik7Cn07CgpKUG9pbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZChwKSB7CiAgLy8gTyArIFAgPSBQCiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHA7CgogIC8vIFAgKyBPID0gUAogIGlmIChwLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzOwoKICAvLyAxMk0gKyA0UyArIDdBCiAgdmFyIHB6MiA9IHAuei5yZWRTcXIoKTsKICB2YXIgejIgPSB0aGlzLnoucmVkU3FyKCk7CiAgdmFyIHUxID0gdGhpcy54LnJlZE11bChwejIpOwogIHZhciB1MiA9IHAueC5yZWRNdWwoejIpOwogIHZhciBzMSA9IHRoaXMueS5yZWRNdWwocHoyLnJlZE11bChwLnopKTsKICB2YXIgczIgPSBwLnkucmVkTXVsKHoyLnJlZE11bCh0aGlzLnopKTsKCiAgdmFyIGggPSB1MS5yZWRTdWIodTIpOwogIHZhciByID0gczEucmVkU3ViKHMyKTsKICBpZiAoaC5jbXBuKDApID09PSAwKSB7CiAgICBpZiAoci5jbXBuKDApICE9PSAwKQogICAgICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CiAgICBlbHNlCiAgICAgIHJldHVybiB0aGlzLmRibCgpOwogIH0KCiAgdmFyIGgyID0gaC5yZWRTcXIoKTsKICB2YXIgaDMgPSBoMi5yZWRNdWwoaCk7CiAgdmFyIHYgPSB1MS5yZWRNdWwoaDIpOwoKICB2YXIgbnggPSByLnJlZFNxcigpLnJlZElBZGQoaDMpLnJlZElTdWIodikucmVkSVN1Yih2KTsKICB2YXIgbnkgPSByLnJlZE11bCh2LnJlZElTdWIobngpKS5yZWRJU3ViKHMxLnJlZE11bChoMykpOwogIHZhciBueiA9IHRoaXMuei5yZWRNdWwocC56KS5yZWRNdWwoaCk7CgogIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChueCwgbnksIG56KTsKfTsKCkpQb2ludC5wcm90b3R5cGUubWl4ZWRBZGQgPSBmdW5jdGlvbiBtaXhlZEFkZChwKSB7CiAgLy8gTyArIFAgPSBQCiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHAudG9KKCk7CgogIC8vIFAgKyBPID0gUAogIGlmIChwLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzOwoKICAvLyA4TSArIDNTICsgN0EKICB2YXIgejIgPSB0aGlzLnoucmVkU3FyKCk7CiAgdmFyIHUxID0gdGhpcy54OwogIHZhciB1MiA9IHAueC5yZWRNdWwoejIpOwogIHZhciBzMSA9IHRoaXMueTsKICB2YXIgczIgPSBwLnkucmVkTXVsKHoyKS5yZWRNdWwodGhpcy56KTsKCiAgdmFyIGggPSB1MS5yZWRTdWIodTIpOwogIHZhciByID0gczEucmVkU3ViKHMyKTsKICBpZiAoaC5jbXBuKDApID09PSAwKSB7CiAgICBpZiAoci5jbXBuKDApICE9PSAwKQogICAgICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CiAgICBlbHNlCiAgICAgIHJldHVybiB0aGlzLmRibCgpOwogIH0KCiAgdmFyIGgyID0gaC5yZWRTcXIoKTsKICB2YXIgaDMgPSBoMi5yZWRNdWwoaCk7CiAgdmFyIHYgPSB1MS5yZWRNdWwoaDIpOwoKICB2YXIgbnggPSByLnJlZFNxcigpLnJlZElBZGQoaDMpLnJlZElTdWIodikucmVkSVN1Yih2KTsKICB2YXIgbnkgPSByLnJlZE11bCh2LnJlZElTdWIobngpKS5yZWRJU3ViKHMxLnJlZE11bChoMykpOwogIHZhciBueiA9IHRoaXMuei5yZWRNdWwoaCk7CgogIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChueCwgbnksIG56KTsKfTsKCkpQb2ludC5wcm90b3R5cGUuZGJscCA9IGZ1bmN0aW9uIGRibHAocG93KSB7CiAgaWYgKHBvdyA9PT0gMCkKICAgIHJldHVybiB0aGlzOwogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzOwogIGlmICghcG93KQogICAgcmV0dXJuIHRoaXMuZGJsKCk7CgogIGlmICh0aGlzLmN1cnZlLnplcm9BIHx8IHRoaXMuY3VydmUudGhyZWVBKSB7CiAgICB2YXIgciA9IHRoaXM7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvdzsgaSsrKQogICAgICByID0gci5kYmwoKTsKICAgIHJldHVybiByOwogIH0KCiAgLy8gMU0gKyAyUyArIDFBICsgTiAqICg0UyArIDVNICsgOEEpCiAgLy8gTiA9IDEgPT4gNk0gKyA2UyArIDlBCiAgdmFyIGEgPSB0aGlzLmN1cnZlLmE7CiAgdmFyIHRpbnYgPSB0aGlzLmN1cnZlLnRpbnY7CgogIHZhciBqeCA9IHRoaXMueDsKICB2YXIgankgPSB0aGlzLnk7CiAgdmFyIGp6ID0gdGhpcy56OwogIHZhciBqejQgPSBqei5yZWRTcXIoKS5yZWRTcXIoKTsKCiAgLy8gUmV1c2UgcmVzdWx0cwogIHZhciBqeWQgPSBqeS5yZWRBZGQoankpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgcG93OyBpKyspIHsKICAgIHZhciBqeDIgPSBqeC5yZWRTcXIoKTsKICAgIHZhciBqeWQyID0ganlkLnJlZFNxcigpOwogICAgdmFyIGp5ZDQgPSBqeWQyLnJlZFNxcigpOwogICAgdmFyIGMgPSBqeDIucmVkQWRkKGp4MikucmVkSUFkZChqeDIpLnJlZElBZGQoYS5yZWRNdWwoano0KSk7CgogICAgdmFyIHQxID0gangucmVkTXVsKGp5ZDIpOwogICAgdmFyIG54ID0gYy5yZWRTcXIoKS5yZWRJU3ViKHQxLnJlZEFkZCh0MSkpOwogICAgdmFyIHQyID0gdDEucmVkSVN1YihueCk7CiAgICB2YXIgZG55ID0gYy5yZWRNdWwodDIpOwogICAgZG55ID0gZG55LnJlZElBZGQoZG55KS5yZWRJU3ViKGp5ZDQpOwogICAgdmFyIG56ID0ganlkLnJlZE11bChqeik7CiAgICBpZiAoaSArIDEgPCBwb3cpCiAgICAgIGp6NCA9IGp6NC5yZWRNdWwoanlkNCk7CgogICAganggPSBueDsKICAgIGp6ID0gbno7CiAgICBqeWQgPSBkbnk7CiAgfQoKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQoangsIGp5ZC5yZWRNdWwodGludiksIGp6KTsKfTsKCkpQb2ludC5wcm90b3R5cGUuZGJsID0gZnVuY3Rpb24gZGJsKCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzOwoKICBpZiAodGhpcy5jdXJ2ZS56ZXJvQSkKICAgIHJldHVybiB0aGlzLl96ZXJvRGJsKCk7CiAgZWxzZSBpZiAodGhpcy5jdXJ2ZS50aHJlZUEpCiAgICByZXR1cm4gdGhpcy5fdGhyZWVEYmwoKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5fZGJsKCk7Cn07CgpKUG9pbnQucHJvdG90eXBlLl96ZXJvRGJsID0gZnVuY3Rpb24gX3plcm9EYmwoKSB7CiAgdmFyIG54OwogIHZhciBueTsKICB2YXIgbno7CiAgLy8gWiA9IDEKICBpZiAodGhpcy56T25lKSB7CiAgICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tc2hvcnR3LWphY29iaWFuLTAuaHRtbAogICAgLy8gICAgICNkb3VibGluZy1tZGJsLTIwMDctYmwKICAgIC8vIDFNICsgNVMgKyAxNEEKCiAgICAvLyBYWCA9IFgxXjIKICAgIHZhciB4eCA9IHRoaXMueC5yZWRTcXIoKTsKICAgIC8vIFlZID0gWTFeMgogICAgdmFyIHl5ID0gdGhpcy55LnJlZFNxcigpOwogICAgLy8gWVlZWSA9IFlZXjIKICAgIHZhciB5eXl5ID0geXkucmVkU3FyKCk7CiAgICAvLyBTID0gMiAqICgoWDEgKyBZWSleMiAtIFhYIC0gWVlZWSkKICAgIHZhciBzID0gdGhpcy54LnJlZEFkZCh5eSkucmVkU3FyKCkucmVkSVN1Yih4eCkucmVkSVN1Yih5eXl5KTsKICAgIHMgPSBzLnJlZElBZGQocyk7CiAgICAvLyBNID0gMyAqIFhYICsgYTsgYSA9IDAKICAgIHZhciBtID0geHgucmVkQWRkKHh4KS5yZWRJQWRkKHh4KTsKICAgIC8vIFQgPSBNIF4gMiAtIDIqUwogICAgdmFyIHQgPSBtLnJlZFNxcigpLnJlZElTdWIocykucmVkSVN1YihzKTsKCiAgICAvLyA4ICogWVlZWQogICAgdmFyIHl5eXk4ID0geXl5eS5yZWRJQWRkKHl5eXkpOwogICAgeXl5eTggPSB5eXl5OC5yZWRJQWRkKHl5eXk4KTsKICAgIHl5eXk4ID0geXl5eTgucmVkSUFkZCh5eXl5OCk7CgogICAgLy8gWDMgPSBUCiAgICBueCA9IHQ7CiAgICAvLyBZMyA9IE0gKiAoUyAtIFQpIC0gOCAqIFlZWVkKICAgIG55ID0gbS5yZWRNdWwocy5yZWRJU3ViKHQpKS5yZWRJU3ViKHl5eXk4KTsKICAgIC8vIFozID0gMipZMQogICAgbnogPSB0aGlzLnkucmVkQWRkKHRoaXMueSk7CiAgfSBlbHNlIHsKICAgIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1zaG9ydHctamFjb2JpYW4tMC5odG1sCiAgICAvLyAgICAgI2RvdWJsaW5nLWRibC0yMDA5LWwKICAgIC8vIDJNICsgNVMgKyAxM0EKCiAgICAvLyBBID0gWDFeMgogICAgdmFyIGEgPSB0aGlzLngucmVkU3FyKCk7CiAgICAvLyBCID0gWTFeMgogICAgdmFyIGIgPSB0aGlzLnkucmVkU3FyKCk7CiAgICAvLyBDID0gQl4yCiAgICB2YXIgYyA9IGIucmVkU3FyKCk7CiAgICAvLyBEID0gMiAqICgoWDEgKyBCKV4yIC0gQSAtIEMpCiAgICB2YXIgZCA9IHRoaXMueC5yZWRBZGQoYikucmVkU3FyKCkucmVkSVN1YihhKS5yZWRJU3ViKGMpOwogICAgZCA9IGQucmVkSUFkZChkKTsKICAgIC8vIEUgPSAzICogQQogICAgdmFyIGUgPSBhLnJlZEFkZChhKS5yZWRJQWRkKGEpOwogICAgLy8gRiA9IEVeMgogICAgdmFyIGYgPSBlLnJlZFNxcigpOwoKICAgIC8vIDggKiBDCiAgICB2YXIgYzggPSBjLnJlZElBZGQoYyk7CiAgICBjOCA9IGM4LnJlZElBZGQoYzgpOwogICAgYzggPSBjOC5yZWRJQWRkKGM4KTsKCiAgICAvLyBYMyA9IEYgLSAyICogRAogICAgbnggPSBmLnJlZElTdWIoZCkucmVkSVN1YihkKTsKICAgIC8vIFkzID0gRSAqIChEIC0gWDMpIC0gOCAqIEMKICAgIG55ID0gZS5yZWRNdWwoZC5yZWRJU3ViKG54KSkucmVkSVN1YihjOCk7CiAgICAvLyBaMyA9IDIgKiBZMSAqIFoxCiAgICBueiA9IHRoaXMueS5yZWRNdWwodGhpcy56KTsKICAgIG56ID0gbnoucmVkSUFkZChueik7CiAgfQoKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobngsIG55LCBueik7Cn07CgpKUG9pbnQucHJvdG90eXBlLl90aHJlZURibCA9IGZ1bmN0aW9uIF90aHJlZURibCgpIHsKICB2YXIgbng7CiAgdmFyIG55OwogIHZhciBuejsKICAvLyBaID0gMQogIGlmICh0aGlzLnpPbmUpIHsKICAgIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1zaG9ydHctamFjb2JpYW4tMy5odG1sCiAgICAvLyAgICAgI2RvdWJsaW5nLW1kYmwtMjAwNy1ibAogICAgLy8gMU0gKyA1UyArIDE1QQoKICAgIC8vIFhYID0gWDFeMgogICAgdmFyIHh4ID0gdGhpcy54LnJlZFNxcigpOwogICAgLy8gWVkgPSBZMV4yCiAgICB2YXIgeXkgPSB0aGlzLnkucmVkU3FyKCk7CiAgICAvLyBZWVlZID0gWVleMgogICAgdmFyIHl5eXkgPSB5eS5yZWRTcXIoKTsKICAgIC8vIFMgPSAyICogKChYMSArIFlZKV4yIC0gWFggLSBZWVlZKQogICAgdmFyIHMgPSB0aGlzLngucmVkQWRkKHl5KS5yZWRTcXIoKS5yZWRJU3ViKHh4KS5yZWRJU3ViKHl5eXkpOwogICAgcyA9IHMucmVkSUFkZChzKTsKICAgIC8vIE0gPSAzICogWFggKyBhCiAgICB2YXIgbSA9IHh4LnJlZEFkZCh4eCkucmVkSUFkZCh4eCkucmVkSUFkZCh0aGlzLmN1cnZlLmEpOwogICAgLy8gVCA9IE1eMiAtIDIgKiBTCiAgICB2YXIgdCA9IG0ucmVkU3FyKCkucmVkSVN1YihzKS5yZWRJU3ViKHMpOwogICAgLy8gWDMgPSBUCiAgICBueCA9IHQ7CiAgICAvLyBZMyA9IE0gKiAoUyAtIFQpIC0gOCAqIFlZWVkKICAgIHZhciB5eXl5OCA9IHl5eXkucmVkSUFkZCh5eXl5KTsKICAgIHl5eXk4ID0geXl5eTgucmVkSUFkZCh5eXl5OCk7CiAgICB5eXl5OCA9IHl5eXk4LnJlZElBZGQoeXl5eTgpOwogICAgbnkgPSBtLnJlZE11bChzLnJlZElTdWIodCkpLnJlZElTdWIoeXl5eTgpOwogICAgLy8gWjMgPSAyICogWTEKICAgIG56ID0gdGhpcy55LnJlZEFkZCh0aGlzLnkpOwogIH0gZWxzZSB7CiAgICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tc2hvcnR3LWphY29iaWFuLTMuaHRtbCNkb3VibGluZy1kYmwtMjAwMS1iCiAgICAvLyAzTSArIDVTCgogICAgLy8gZGVsdGEgPSBaMV4yCiAgICB2YXIgZGVsdGEgPSB0aGlzLnoucmVkU3FyKCk7CiAgICAvLyBnYW1tYSA9IFkxXjIKICAgIHZhciBnYW1tYSA9IHRoaXMueS5yZWRTcXIoKTsKICAgIC8vIGJldGEgPSBYMSAqIGdhbW1hCiAgICB2YXIgYmV0YSA9IHRoaXMueC5yZWRNdWwoZ2FtbWEpOwogICAgLy8gYWxwaGEgPSAzICogKFgxIC0gZGVsdGEpICogKFgxICsgZGVsdGEpCiAgICB2YXIgYWxwaGEgPSB0aGlzLngucmVkU3ViKGRlbHRhKS5yZWRNdWwodGhpcy54LnJlZEFkZChkZWx0YSkpOwogICAgYWxwaGEgPSBhbHBoYS5yZWRBZGQoYWxwaGEpLnJlZElBZGQoYWxwaGEpOwogICAgLy8gWDMgPSBhbHBoYV4yIC0gOCAqIGJldGEKICAgIHZhciBiZXRhNCA9IGJldGEucmVkSUFkZChiZXRhKTsKICAgIGJldGE0ID0gYmV0YTQucmVkSUFkZChiZXRhNCk7CiAgICB2YXIgYmV0YTggPSBiZXRhNC5yZWRBZGQoYmV0YTQpOwogICAgbnggPSBhbHBoYS5yZWRTcXIoKS5yZWRJU3ViKGJldGE4KTsKICAgIC8vIFozID0gKFkxICsgWjEpXjIgLSBnYW1tYSAtIGRlbHRhCiAgICBueiA9IHRoaXMueS5yZWRBZGQodGhpcy56KS5yZWRTcXIoKS5yZWRJU3ViKGdhbW1hKS5yZWRJU3ViKGRlbHRhKTsKICAgIC8vIFkzID0gYWxwaGEgKiAoNCAqIGJldGEgLSBYMykgLSA4ICogZ2FtbWFeMgogICAgdmFyIGdnYW1tYTggPSBnYW1tYS5yZWRTcXIoKTsKICAgIGdnYW1tYTggPSBnZ2FtbWE4LnJlZElBZGQoZ2dhbW1hOCk7CiAgICBnZ2FtbWE4ID0gZ2dhbW1hOC5yZWRJQWRkKGdnYW1tYTgpOwogICAgZ2dhbW1hOCA9IGdnYW1tYTgucmVkSUFkZChnZ2FtbWE4KTsKICAgIG55ID0gYWxwaGEucmVkTXVsKGJldGE0LnJlZElTdWIobngpKS5yZWRJU3ViKGdnYW1tYTgpOwogIH0KCiAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG54LCBueSwgbnopOwp9OwoKSlBvaW50LnByb3RvdHlwZS5fZGJsID0gZnVuY3Rpb24gX2RibCgpIHsKICB2YXIgYSA9IHRoaXMuY3VydmUuYTsKCiAgLy8gNE0gKyA2UyArIDEwQQogIHZhciBqeCA9IHRoaXMueDsKICB2YXIgankgPSB0aGlzLnk7CiAgdmFyIGp6ID0gdGhpcy56OwogIHZhciBqejQgPSBqei5yZWRTcXIoKS5yZWRTcXIoKTsKCiAgdmFyIGp4MiA9IGp4LnJlZFNxcigpOwogIHZhciBqeTIgPSBqeS5yZWRTcXIoKTsKCiAgdmFyIGMgPSBqeDIucmVkQWRkKGp4MikucmVkSUFkZChqeDIpLnJlZElBZGQoYS5yZWRNdWwoano0KSk7CgogIHZhciBqeGQ0ID0gangucmVkQWRkKGp4KTsKICBqeGQ0ID0ganhkNC5yZWRJQWRkKGp4ZDQpOwogIHZhciB0MSA9IGp4ZDQucmVkTXVsKGp5Mik7CiAgdmFyIG54ID0gYy5yZWRTcXIoKS5yZWRJU3ViKHQxLnJlZEFkZCh0MSkpOwogIHZhciB0MiA9IHQxLnJlZElTdWIobngpOwoKICB2YXIganlkOCA9IGp5Mi5yZWRTcXIoKTsKICBqeWQ4ID0ganlkOC5yZWRJQWRkKGp5ZDgpOwogIGp5ZDggPSBqeWQ4LnJlZElBZGQoanlkOCk7CiAganlkOCA9IGp5ZDgucmVkSUFkZChqeWQ4KTsKICB2YXIgbnkgPSBjLnJlZE11bCh0MikucmVkSVN1YihqeWQ4KTsKICB2YXIgbnogPSBqeS5yZWRBZGQoankpLnJlZE11bChqeik7CgogIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChueCwgbnksIG56KTsKfTsKCkpQb2ludC5wcm90b3R5cGUudHJwbCA9IGZ1bmN0aW9uIHRycGwoKSB7CiAgaWYgKCF0aGlzLmN1cnZlLnplcm9BKQogICAgcmV0dXJuIHRoaXMuZGJsKCkuYWRkKHRoaXMpOwoKICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tc2hvcnR3LWphY29iaWFuLTAuaHRtbCN0cmlwbGluZy10cGwtMjAwNy1ibAogIC8vIDVNICsgMTBTICsgLi4uCgogIC8vIFhYID0gWDFeMgogIHZhciB4eCA9IHRoaXMueC5yZWRTcXIoKTsKICAvLyBZWSA9IFkxXjIKICB2YXIgeXkgPSB0aGlzLnkucmVkU3FyKCk7CiAgLy8gWlogPSBaMV4yCiAgdmFyIHp6ID0gdGhpcy56LnJlZFNxcigpOwogIC8vIFlZWVkgPSBZWV4yCiAgdmFyIHl5eXkgPSB5eS5yZWRTcXIoKTsKICAvLyBNID0gMyAqIFhYICsgYSAqIFpaMjsgYSA9IDAKICB2YXIgbSA9IHh4LnJlZEFkZCh4eCkucmVkSUFkZCh4eCk7CiAgLy8gTU0gPSBNXjIKICB2YXIgbW0gPSBtLnJlZFNxcigpOwogIC8vIEUgPSA2ICogKChYMSArIFlZKV4yIC0gWFggLSBZWVlZKSAtIE1NCiAgdmFyIGUgPSB0aGlzLngucmVkQWRkKHl5KS5yZWRTcXIoKS5yZWRJU3ViKHh4KS5yZWRJU3ViKHl5eXkpOwogIGUgPSBlLnJlZElBZGQoZSk7CiAgZSA9IGUucmVkQWRkKGUpLnJlZElBZGQoZSk7CiAgZSA9IGUucmVkSVN1YihtbSk7CiAgLy8gRUUgPSBFXjIKICB2YXIgZWUgPSBlLnJlZFNxcigpOwogIC8vIFQgPSAxNipZWVlZCiAgdmFyIHQgPSB5eXl5LnJlZElBZGQoeXl5eSk7CiAgdCA9IHQucmVkSUFkZCh0KTsKICB0ID0gdC5yZWRJQWRkKHQpOwogIHQgPSB0LnJlZElBZGQodCk7CiAgLy8gVSA9IChNICsgRSleMiAtIE1NIC0gRUUgLSBUCiAgdmFyIHUgPSBtLnJlZElBZGQoZSkucmVkU3FyKCkucmVkSVN1YihtbSkucmVkSVN1YihlZSkucmVkSVN1Yih0KTsKICAvLyBYMyA9IDQgKiAoWDEgKiBFRSAtIDQgKiBZWSAqIFUpCiAgdmFyIHl5dTQgPSB5eS5yZWRNdWwodSk7CiAgeXl1NCA9IHl5dTQucmVkSUFkZCh5eXU0KTsKICB5eXU0ID0geXl1NC5yZWRJQWRkKHl5dTQpOwogIHZhciBueCA9IHRoaXMueC5yZWRNdWwoZWUpLnJlZElTdWIoeXl1NCk7CiAgbnggPSBueC5yZWRJQWRkKG54KTsKICBueCA9IG54LnJlZElBZGQobngpOwogIC8vIFkzID0gOCAqIFkxICogKFUgKiAoVCAtIFUpIC0gRSAqIEVFKQogIHZhciBueSA9IHRoaXMueS5yZWRNdWwodS5yZWRNdWwodC5yZWRJU3ViKHUpKS5yZWRJU3ViKGUucmVkTXVsKGVlKSkpOwogIG55ID0gbnkucmVkSUFkZChueSk7CiAgbnkgPSBueS5yZWRJQWRkKG55KTsKICBueSA9IG55LnJlZElBZGQobnkpOwogIC8vIFozID0gKFoxICsgRSleMiAtIFpaIC0gRUUKICB2YXIgbnogPSB0aGlzLnoucmVkQWRkKGUpLnJlZFNxcigpLnJlZElTdWIoenopLnJlZElTdWIoZWUpOwoKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobngsIG55LCBueik7Cn07CgpKUG9pbnQucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bChrLCBrYmFzZSkgewogIGsgPSBuZXcgQk4oaywga2Jhc2UpOwoKICByZXR1cm4gdGhpcy5jdXJ2ZS5fd25hZk11bCh0aGlzLCBrKTsKfTsKCkpQb2ludC5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcShwKSB7CiAgaWYgKHAudHlwZSA9PT0gJ2FmZmluZScpCiAgICByZXR1cm4gdGhpcy5lcShwLnRvSigpKTsKCiAgaWYgKHRoaXMgPT09IHApCiAgICByZXR1cm4gdHJ1ZTsKCiAgLy8geDEgKiB6Ml4yID09IHgyICogejFeMgogIHZhciB6MiA9IHRoaXMuei5yZWRTcXIoKTsKICB2YXIgcHoyID0gcC56LnJlZFNxcigpOwogIGlmICh0aGlzLngucmVkTXVsKHB6MikucmVkSVN1YihwLngucmVkTXVsKHoyKSkuY21wbigwKSAhPT0gMCkKICAgIHJldHVybiBmYWxzZTsKCiAgLy8geTEgKiB6Ml4zID09IHkyICogejFeMwogIHZhciB6MyA9IHoyLnJlZE11bCh0aGlzLnopOwogIHZhciBwejMgPSBwejIucmVkTXVsKHAueik7CiAgcmV0dXJuIHRoaXMueS5yZWRNdWwocHozKS5yZWRJU3ViKHAueS5yZWRNdWwoejMpKS5jbXBuKDApID09PSAwOwp9OwoKSlBvaW50LnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCgpIHsKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gJzxFQyBKUG9pbnQgSW5maW5pdHk+JzsKICByZXR1cm4gJzxFQyBKUG9pbnQgeDogJyArIHRoaXMueC50b1N0cmluZygxNiwgMikgKwogICAgICAnIHk6ICcgKyB0aGlzLnkudG9TdHJpbmcoMTYsIDIpICsKICAgICAgJyB6OiAnICsgdGhpcy56LnRvU3RyaW5nKDE2LCAyKSArICc+JzsKfTsKCkpQb2ludC5wcm90b3R5cGUuaXNJbmZpbml0eSA9IGZ1bmN0aW9uIGlzSW5maW5pdHkoKSB7CiAgLy8gWFhYIFRoaXMgY29kZSBhc3N1bWVzIHRoYXQgemVybyBpcyBhbHdheXMgemVybyBpbiByZWQKICByZXR1cm4gdGhpcy56LmNtcG4oMCkgPT09IDA7Cn07Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjEwMiwiLi4vY3VydmUiOjEwNSwiYm4uanMiOjQxLCJpbmhlcml0cyI6MTI4fV0sMTA4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGN1cnZlcyA9IGV4cG9ydHM7Cgp2YXIgaGFzaCA9IHJlcXVpcmUoJ2hhc2guanMnKTsKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vZWxsaXB0aWMnKTsKCnZhciBhc3NlcnQgPSBlbGxpcHRpYy51dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBQcmVzZXRDdXJ2ZShvcHRpb25zKSB7CiAgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ3Nob3J0JykKICAgIHRoaXMuY3VydmUgPSBuZXcgZWxsaXB0aWMuY3VydmUuc2hvcnQob3B0aW9ucyk7CiAgZWxzZSBpZiAob3B0aW9ucy50eXBlID09PSAnZWR3YXJkcycpCiAgICB0aGlzLmN1cnZlID0gbmV3IGVsbGlwdGljLmN1cnZlLmVkd2FyZHMob3B0aW9ucyk7CiAgZWxzZQogICAgdGhpcy5jdXJ2ZSA9IG5ldyBlbGxpcHRpYy5jdXJ2ZS5tb250KG9wdGlvbnMpOwogIHRoaXMuZyA9IHRoaXMuY3VydmUuZzsKICB0aGlzLm4gPSB0aGlzLmN1cnZlLm47CiAgdGhpcy5oYXNoID0gb3B0aW9ucy5oYXNoOwoKICBhc3NlcnQodGhpcy5nLnZhbGlkYXRlKCksICdJbnZhbGlkIGN1cnZlJyk7CiAgYXNzZXJ0KHRoaXMuZy5tdWwodGhpcy5uKS5pc0luZmluaXR5KCksICdJbnZhbGlkIGN1cnZlLCBHKk4gIT0gTycpOwp9CmN1cnZlcy5QcmVzZXRDdXJ2ZSA9IFByZXNldEN1cnZlOwoKZnVuY3Rpb24gZGVmaW5lQ3VydmUobmFtZSwgb3B0aW9ucykgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdXJ2ZXMsIG5hbWUsIHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgY3VydmUgPSBuZXcgUHJlc2V0Q3VydmUob3B0aW9ucyk7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdXJ2ZXMsIG5hbWUsIHsKICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZTogY3VydmUKICAgICAgfSk7CiAgICAgIHJldHVybiBjdXJ2ZTsKICAgIH0KICB9KTsKfQoKZGVmaW5lQ3VydmUoJ3AxOTInLCB7CiAgdHlwZTogJ3Nob3J0JywKICBwcmltZTogJ3AxOTInLAogIHA6ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZSBmZmZmZmZmZiBmZmZmZmZmZicsCiAgYTogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZjJywKICBiOiAnNjQyMTA1MTkgZTU5YzgwZTcgMGZhN2U5YWIgNzIyNDMwNDkgZmViOGRlZWMgYzE0NmI5YjEnLAogIG46ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiA5OWRlZjgzNiAxNDZiYzliMSBiNGQyMjgzMScsCiAgaGFzaDogaGFzaC5zaGEyNTYsCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJzE4OGRhODBlIGIwMzA5MGY2IDdjYmYyMGViIDQzYTE4ODAwIGY0ZmYwYWZkIDgyZmYxMDEyJywKICAgICcwNzE5MmI5NSBmZmM4ZGE3OCA2MzEwMTFlZCA2YjI0Y2RkNSA3M2Y5NzdhMSAxZTc5NDgxMScKICBdCn0pOwoKZGVmaW5lQ3VydmUoJ3AyMjQnLCB7CiAgdHlwZTogJ3Nob3J0JywKICBwcmltZTogJ3AyMjQnLAogIHA6ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMScsCiAgYTogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlJywKICBiOiAnYjQwNTBhODUgMGMwNGIzYWIgZjU0MTMyNTYgNTA0NGIwYjcgZDdiZmQ4YmEgMjcwYjM5NDMgMjM1NWZmYjQnLAogIG46ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmMTZhMiBlMGI4ZjAzZSAxM2RkMjk0NSA1YzVjMmEzZCcsCiAgaGFzaDogaGFzaC5zaGEyNTYsCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJ2I3MGUwY2JkIDZiYjRiZjdmIDMyMTM5MGI5IDRhMDNjMWQzIDU2YzIxMTIyIDM0MzI4MGQ2IDExNWMxZDIxJywKICAgICdiZDM3NjM4OCBiNWY3MjNmYiA0YzIyZGZlNiBjZDQzNzVhMCA1YTA3NDc2NCA0NGQ1ODE5OSA4NTAwN2UzNCcKICBdCn0pOwoKZGVmaW5lQ3VydmUoJ3AyNTYnLCB7CiAgdHlwZTogJ3Nob3J0JywKICBwcmltZTogbnVsbCwKICBwOiAnZmZmZmZmZmYgMDAwMDAwMDEgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDAgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYnLAogIGE6ICdmZmZmZmZmZiAwMDAwMDAwMSAwMDAwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMCBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmYycsCiAgYjogJzVhYzYzNWQ4IGFhM2E5M2U3IGIzZWJiZDU1IDc2OTg4NmJjIDY1MWQwNmIwIGNjNTNiMGY2IDNiY2UzYzNlIDI3ZDI2MDRiJywKICBuOiAnZmZmZmZmZmYgMDAwMDAwMDAgZmZmZmZmZmYgZmZmZmZmZmYgYmNlNmZhYWQgYTcxNzllODQgZjNiOWNhYzIgZmM2MzI1NTEnLAogIGhhc2g6IGhhc2guc2hhMjU2LAogIGdSZWQ6IGZhbHNlLAogIGc6IFsKICAgICc2YjE3ZDFmMiBlMTJjNDI0NyBmOGJjZTZlNSA2M2E0NDBmMiA3NzAzN2Q4MSAyZGViMzNhMCBmNGExMzk0NSBkODk4YzI5NicsCiAgICAnNGZlMzQyZTIgZmUxYTdmOWIgOGVlN2ViNGEgN2MwZjllMTYgMmJjZTMzNTcgNmIzMTVlY2UgY2JiNjQwNjggMzdiZjUxZjUnCiAgXQp9KTsKCmRlZmluZUN1cnZlKCdwMzg0JywgewogIHR5cGU6ICdzaG9ydCcsCiAgcHJpbWU6IG51bGwsCiAgcDogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICdmZmZmZmZmZSBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCBmZmZmZmZmZicsCiAgYTogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICdmZmZmZmZmZSBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCBmZmZmZmZmYycsCiAgYjogJ2IzMzEyZmE3IGUyM2VlN2U0IDk4OGUwNTZiIGUzZjgyZDE5IDE4MWQ5YzZlIGZlODE0MTEyIDAzMTQwODhmICcgKwogICAgICc1MDEzODc1YSBjNjU2Mzk4ZCA4YTJlZDE5ZCAyYTg1YzhlZCBkM2VjMmFlZicsCiAgbjogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGM3NjM0ZDgxICcgKwogICAgICdmNDM3MmRkZiA1ODFhMGRiMiA0OGIwYTc3YSBlY2VjMTk2YSBjY2M1Mjk3MycsCiAgaGFzaDogaGFzaC5zaGEzODQsCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJ2FhODdjYTIyIGJlOGIwNTM3IDhlYjFjNzFlIGYzMjBhZDc0IDZlMWQzYjYyIDhiYTc5Yjk4IDU5Zjc0MWUwIDgyNTQyYTM4ICcgKwogICAgJzU1MDJmMjVkIGJmNTUyOTZjIDNhNTQ1ZTM4IDcyNzYwYWI3JywKICAgICczNjE3ZGU0YSA5NjI2MmM2ZiA1ZDllOThiZiA5MjkyZGMyOSBmOGY0MWRiZCAyODlhMTQ3YyBlOWRhMzExMyBiNWYwYjhjMCAnICsKICAgICcwYTYwYjFjZSAxZDdlODE5ZCA3YTQzMWQ3YyA5MGVhMGU1ZicKICBdCn0pOwoKZGVmaW5lQ3VydmUoJ3A1MjEnLCB7CiAgdHlwZTogJ3Nob3J0JywKICBwcmltZTogbnVsbCwKICBwOiAnMDAwMDAxZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgJyArCiAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZicsCiAgYTogJzAwMDAwMWZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAnICsKICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmMnLAogIGI6ICcwMDAwMDA1MSA5NTNlYjk2MSA4ZTFjOWExZiA5MjlhMjFhMCBiNjg1NDBlZSBhMmRhNzI1YiAnICsKICAgICAnOTliMzE1ZjMgYjhiNDg5OTEgOGVmMTA5ZTEgNTYxOTM5NTEgZWM3ZTkzN2IgMTY1MmMwYmQgJyArCiAgICAgJzNiYjFiZjA3IDM1NzNkZjg4IDNkMmMzNGYxIGVmNDUxZmQ0IDZiNTAzZjAwJywKICBuOiAnMDAwMDAxZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgJyArCiAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZhIDUxODY4NzgzIGJmMmY5NjZiIDdmY2MwMTQ4ICcgKwogICAgICdmNzA5YTVkMCAzYmI1YzliOCA4OTljNDdhZSBiYjZmYjcxZSA5MTM4NjQwOScsCiAgaGFzaDogaGFzaC5zaGE1MTIsCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJzAwMDAwMGM2IDg1OGUwNmI3IDA0MDRlOWNkIDllM2VjYjY2IDIzOTViNDQyIDljNjQ4MTM5ICcgKwogICAgJzA1M2ZiNTIxIGY4MjhhZjYwIDZiNGQzZGJhIGExNGI1ZTc3IGVmZTc1OTI4IGZlMWRjMTI3ICcgKwogICAgJ2EyZmZhOGRlIDMzNDhiM2MxIDg1NmE0MjliIGY5N2U3ZTMxIGMyZTViZDY2JywKICAgICcwMDAwMDExOCAzOTI5NmE3OCA5YTNiYzAwNCA1YzhhNWZiNCAyYzdkMWJkOSA5OGY1NDQ0OSAnICsKICAgICc1NzliNDQ2OCAxN2FmYmQxNyAyNzNlNjYyYyA5N2VlNzI5OSA1ZWY0MjY0MCBjNTUwYjkwMSAnICsKICAgICczZmFkMDc2MSAzNTNjNzA4NiBhMjcyYzI0MCA4OGJlOTQ3NiA5ZmQxNjY1MCcKICBdCn0pOwoKZGVmaW5lQ3VydmUoJ2N1cnZlMjU1MTknLCB7CiAgdHlwZTogJ21vbnQnLAogIHByaW1lOiAncDI1NTE5JywKICBwOiAnN2ZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZlZCcsCiAgYTogJzc2ZDA2JywKICBiOiAnMCcsCiAgbjogJzEwMDAwMDAwMDAwMDAwMDAgMDAwMDAwMDAwMDAwMDAwMCAxNGRlZjlkZWEyZjc5Y2Q2IDU4MTI2MzFhNWNmNWQzZWQnLAogIGhhc2g6IGhhc2guc2hhMjU2LAogIGdSZWQ6IGZhbHNlLAogIGc6IFsKICAgICc5JwogIF0KfSk7CgpkZWZpbmVDdXJ2ZSgnZWQyNTUxOScsIHsKICB0eXBlOiAnZWR3YXJkcycsCiAgcHJpbWU6ICdwMjU1MTknLAogIHA6ICc3ZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmVkJywKICBhOiAnLTEnLAogIGM6ICcxJywKICAvLyAtMTIxNjY1ICogKDEyMTY2Nl4oLTEpKSAobW9kIFApCiAgZDogJzUyMDM2Y2VlMmI2ZmZlNzMgOGNjNzQwNzk3Nzc5ZTg5OCAwMDcwMGE0ZDQxNDFkOGFiIDc1ZWI0ZGNhMTM1OTc4YTMnLAogIG46ICcxMDAwMDAwMDAwMDAwMDAwIDAwMDAwMDAwMDAwMDAwMDAgMTRkZWY5ZGVhMmY3OWNkNiA1ODEyNjMxYTVjZjVkM2VkJywKICBoYXNoOiBoYXNoLnNoYTI1NiwKICBnUmVkOiBmYWxzZSwKICBnOiBbCiAgICAnMjE2OTM2ZDNjZDZlNTNmZWMwYTRlMjMxZmRkNmRjNWM2OTJjYzc2MDk1MjVhN2IyYzk1NjJkNjA4ZjI1ZDUxYScsCgogICAgLy8gNC81CiAgICAnNjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY1OCcKICBdCn0pOwoKdmFyIHByZTsKdHJ5IHsKICBwcmUgPSByZXF1aXJlKCcuL3ByZWNvbXB1dGVkL3NlY3AyNTZrMScpOwp9IGNhdGNoIChlKSB7CiAgcHJlID0gdW5kZWZpbmVkOwp9CgpkZWZpbmVDdXJ2ZSgnc2VjcDI1NmsxJywgewogIHR5cGU6ICdzaG9ydCcsCiAgcHJpbWU6ICdrMjU2JywKICBwOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUgZmZmZmZjMmYnLAogIGE6ICcwJywKICBiOiAnNycsCiAgbjogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGJhYWVkY2U2IGFmNDhhMDNiIGJmZDI1ZThjIGQwMzY0MTQxJywKICBoOiAnMScsCiAgaGFzaDogaGFzaC5zaGEyNTYsCgogIC8vIFByZWNvbXB1dGVkIGVuZG9tb3JwaGlzbQogIGJldGE6ICc3YWU5NmEyYjY1N2MwNzEwNmU2NDQ3OWVhYzM0MzRlOTljZjA0OTc1MTJmNTg5OTVjMTM5NmMyODcxOTUwMWVlJywKICBsYW1iZGE6ICc1MzYzYWQ0Y2MwNWMzMGUwYTUyNjFjMDI4ODEyNjQ1YTEyMmUyMmVhMjA4MTY2NzhkZjAyOTY3YzFiMjNiZDcyJywKICBiYXNpczogWwogICAgewogICAgICBhOiAnMzA4NmQyMjFhN2Q0NmJjZGU4NmM5MGU0OTI4NGViMTUnLAogICAgICBiOiAnLWU0NDM3ZWQ2MDEwZTg4Mjg2ZjU0N2ZhOTBhYmZlNGMzJwogICAgfSwKICAgIHsKICAgICAgYTogJzExNGNhNTBmN2E4ZTJmM2Y2NTdjMTEwOGQ5ZDQ0Y2ZkOCcsCiAgICAgIGI6ICczMDg2ZDIyMWE3ZDQ2YmNkZTg2YzkwZTQ5Mjg0ZWIxNScKICAgIH0KICBdLAoKICBnUmVkOiBmYWxzZSwKICBnOiBbCiAgICAnNzliZTY2N2VmOWRjYmJhYzU1YTA2Mjk1Y2U4NzBiMDcwMjliZmNkYjJkY2UyOGQ5NTlmMjgxNWIxNmY4MTc5OCcsCiAgICAnNDgzYWRhNzcyNmEzYzQ2NTVkYTRmYmZjMGUxMTA4YThmZDE3YjQ0OGE2ODU1NDE5OWM0N2QwOGZmYjEwZDRiOCcsCiAgICBwcmUKICBdCn0pOwoKfSx7Ii4uL2VsbGlwdGljIjoxMDIsIi4vcHJlY29tcHV0ZWQvc2VjcDI1NmsxIjoxMTYsImhhc2guanMiOjEyMH1dLDEwOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0OwoKdmFyIEtleVBhaXIgPSByZXF1aXJlKCcuL2tleScpOwp2YXIgU2lnbmF0dXJlID0gcmVxdWlyZSgnLi9zaWduYXR1cmUnKTsKCmZ1bmN0aW9uIEVDKG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRUMpKQogICAgcmV0dXJuIG5ldyBFQyhvcHRpb25zKTsKCiAgLy8gU2hvcnRjdXQgYGVsbGlwdGljLmVjKGN1cnZlLW5hbWUpYAogIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHsKICAgIGFzc2VydChlbGxpcHRpYy5jdXJ2ZXMuaGFzT3duUHJvcGVydHkob3B0aW9ucyksICdVbmtub3duIGN1cnZlICcgKyBvcHRpb25zKTsKCiAgICBvcHRpb25zID0gZWxsaXB0aWMuY3VydmVzW29wdGlvbnNdOwogIH0KCiAgLy8gU2hvcnRjdXQgZm9yIGBlbGxpcHRpYy5lYyhlbGxpcHRpYy5jdXJ2ZXMuY3VydmVOYW1lKWAKICBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIGVsbGlwdGljLmN1cnZlcy5QcmVzZXRDdXJ2ZSkKICAgIG9wdGlvbnMgPSB7IGN1cnZlOiBvcHRpb25zIH07CgogIHRoaXMuY3VydmUgPSBvcHRpb25zLmN1cnZlLmN1cnZlOwogIHRoaXMubiA9IHRoaXMuY3VydmUubjsKICB0aGlzLm5oID0gdGhpcy5uLnVzaHJuKDEpOwogIHRoaXMuZyA9IHRoaXMuY3VydmUuZzsKCiAgLy8gUG9pbnQgb24gY3VydmUKICB0aGlzLmcgPSBvcHRpb25zLmN1cnZlLmc7CiAgdGhpcy5nLnByZWNvbXB1dGUob3B0aW9ucy5jdXJ2ZS5uLmJpdExlbmd0aCgpICsgMSk7CgogIC8vIEhhc2ggZm9yIGZ1bmN0aW9uIGZvciBEUkJHCiAgdGhpcy5oYXNoID0gb3B0aW9ucy5oYXNoIHx8IG9wdGlvbnMuY3VydmUuaGFzaDsKfQptb2R1bGUuZXhwb3J0cyA9IEVDOwoKRUMucHJvdG90eXBlLmtleVBhaXIgPSBmdW5jdGlvbiBrZXlQYWlyKG9wdGlvbnMpIHsKICByZXR1cm4gbmV3IEtleVBhaXIodGhpcywgb3B0aW9ucyk7Cn07CgpFQy5wcm90b3R5cGUua2V5RnJvbVByaXZhdGUgPSBmdW5jdGlvbiBrZXlGcm9tUHJpdmF0ZShwcml2LCBlbmMpIHsKICByZXR1cm4gS2V5UGFpci5mcm9tUHJpdmF0ZSh0aGlzLCBwcml2LCBlbmMpOwp9OwoKRUMucHJvdG90eXBlLmtleUZyb21QdWJsaWMgPSBmdW5jdGlvbiBrZXlGcm9tUHVibGljKHB1YiwgZW5jKSB7CiAgcmV0dXJuIEtleVBhaXIuZnJvbVB1YmxpYyh0aGlzLCBwdWIsIGVuYyk7Cn07CgpFQy5wcm90b3R5cGUuZ2VuS2V5UGFpciA9IGZ1bmN0aW9uIGdlbktleVBhaXIob3B0aW9ucykgewogIGlmICghb3B0aW9ucykKICAgIG9wdGlvbnMgPSB7fTsKCiAgLy8gSW5zdGFudGlhdGUgSG1hY19EUkJHCiAgdmFyIGRyYmcgPSBuZXcgZWxsaXB0aWMuaG1hY0RSQkcoewogICAgaGFzaDogdGhpcy5oYXNoLAogICAgcGVyczogb3B0aW9ucy5wZXJzLAogICAgZW50cm9weTogb3B0aW9ucy5lbnRyb3B5IHx8IGVsbGlwdGljLnJhbmQodGhpcy5oYXNoLmhtYWNTdHJlbmd0aCksCiAgICBub25jZTogdGhpcy5uLnRvQXJyYXkoKQogIH0pOwoKICB2YXIgYnl0ZXMgPSB0aGlzLm4uYnl0ZUxlbmd0aCgpOwogIHZhciBuczIgPSB0aGlzLm4uc3ViKG5ldyBCTigyKSk7CiAgZG8gewogICAgdmFyIHByaXYgPSBuZXcgQk4oZHJiZy5nZW5lcmF0ZShieXRlcykpOwogICAgaWYgKHByaXYuY21wKG5zMikgPiAwKQogICAgICBjb250aW51ZTsKCiAgICBwcml2LmlhZGRuKDEpOwogICAgcmV0dXJuIHRoaXMua2V5RnJvbVByaXZhdGUocHJpdik7CiAgfSB3aGlsZSAodHJ1ZSk7Cn07CgpFQy5wcm90b3R5cGUuX3RydW5jYXRlVG9OID0gZnVuY3Rpb24gdHJ1bmNhdGVUb04obXNnLCB0cnVuY09ubHkpIHsKICB2YXIgZGVsdGEgPSBtc2cuYnl0ZUxlbmd0aCgpICogOCAtIHRoaXMubi5iaXRMZW5ndGgoKTsKICBpZiAoZGVsdGEgPiAwKQogICAgbXNnID0gbXNnLnVzaHJuKGRlbHRhKTsKICBpZiAoIXRydW5jT25seSAmJiBtc2cuY21wKHRoaXMubikgPj0gMCkKICAgIHJldHVybiBtc2cuc3ViKHRoaXMubik7CiAgZWxzZQogICAgcmV0dXJuIG1zZzsKfTsKCkVDLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gc2lnbihtc2csIGtleSwgZW5jLCBvcHRpb25zKSB7CiAgaWYgKHR5cGVvZiBlbmMgPT09ICdvYmplY3QnKSB7CiAgICBvcHRpb25zID0gZW5jOwogICAgZW5jID0gbnVsbDsKICB9CiAgaWYgKCFvcHRpb25zKQogICAgb3B0aW9ucyA9IHt9OwoKICBrZXkgPSB0aGlzLmtleUZyb21Qcml2YXRlKGtleSwgZW5jKTsKICBtc2cgPSB0aGlzLl90cnVuY2F0ZVRvTihuZXcgQk4obXNnLCAxNikpOwoKICAvLyBaZXJvLWV4dGVuZCBrZXkgdG8gcHJvdmlkZSBlbm91Z2ggZW50cm9weQogIHZhciBieXRlcyA9IHRoaXMubi5ieXRlTGVuZ3RoKCk7CiAgdmFyIGJrZXkgPSBrZXkuZ2V0UHJpdmF0ZSgpLnRvQXJyYXkoJ2JlJywgYnl0ZXMpOwoKICAvLyBaZXJvLWV4dGVuZCBub25jZSB0byBoYXZlIHRoZSBzYW1lIGJ5dGUgc2l6ZSBhcyBOCiAgdmFyIG5vbmNlID0gbXNnLnRvQXJyYXkoJ2JlJywgYnl0ZXMpOwoKICAvLyBJbnN0YW50aWF0ZSBIbWFjX0RSQkcKICB2YXIgZHJiZyA9IG5ldyBlbGxpcHRpYy5obWFjRFJCRyh7CiAgICBoYXNoOiB0aGlzLmhhc2gsCiAgICBlbnRyb3B5OiBia2V5LAogICAgbm9uY2U6IG5vbmNlLAogICAgcGVyczogb3B0aW9ucy5wZXJzLAogICAgcGVyc0VuYzogb3B0aW9ucy5wZXJzRW5jCiAgfSk7CgogIC8vIE51bWJlciBvZiBieXRlcyB0byBnZW5lcmF0ZQogIHZhciBuczEgPSB0aGlzLm4uc3ViKG5ldyBCTigxKSk7CgogIGZvciAodmFyIGl0ZXIgPSAwOyB0cnVlOyBpdGVyKyspIHsKICAgIHZhciBrID0gb3B0aW9ucy5rID8KICAgICAgICBvcHRpb25zLmsoaXRlcikgOgogICAgICAgIG5ldyBCTihkcmJnLmdlbmVyYXRlKHRoaXMubi5ieXRlTGVuZ3RoKCkpKTsKICAgIGsgPSB0aGlzLl90cnVuY2F0ZVRvTihrLCB0cnVlKTsKICAgIGlmIChrLmNtcG4oMSkgPD0gMCB8fCBrLmNtcChuczEpID49IDApCiAgICAgIGNvbnRpbnVlOwoKICAgIHZhciBrcCA9IHRoaXMuZy5tdWwoayk7CiAgICBpZiAoa3AuaXNJbmZpbml0eSgpKQogICAgICBjb250aW51ZTsKCiAgICB2YXIga3BYID0ga3AuZ2V0WCgpOwogICAgdmFyIHIgPSBrcFgudW1vZCh0aGlzLm4pOwogICAgaWYgKHIuY21wbigwKSA9PT0gMCkKICAgICAgY29udGludWU7CgogICAgdmFyIHMgPSBrLmludm0odGhpcy5uKS5tdWwoci5tdWwoa2V5LmdldFByaXZhdGUoKSkuaWFkZChtc2cpKTsKICAgIHMgPSBzLnVtb2QodGhpcy5uKTsKICAgIGlmIChzLmNtcG4oMCkgPT09IDApCiAgICAgIGNvbnRpbnVlOwoKICAgIHZhciByZWNvdmVyeVBhcmFtID0gKGtwLmdldFkoKS5pc09kZCgpID8gMSA6IDApIHwKICAgICAgICAgICAgICAgICAgICAgICAgKGtwWC5jbXAocikgIT09IDAgPyAyIDogMCk7CgogICAgLy8gVXNlIGNvbXBsZW1lbnQgb2YgYHNgLCBpZiBpdCBpcyA+IGBuIC8gMmAKICAgIGlmIChvcHRpb25zLmNhbm9uaWNhbCAmJiBzLmNtcCh0aGlzLm5oKSA+IDApIHsKICAgICAgcyA9IHRoaXMubi5zdWIocyk7CiAgICAgIHJlY292ZXJ5UGFyYW0gXj0gMTsKICAgIH0KCiAgICByZXR1cm4gbmV3IFNpZ25hdHVyZSh7IHI6IHIsIHM6IHMsIHJlY292ZXJ5UGFyYW06IHJlY292ZXJ5UGFyYW0gfSk7CiAgfQp9OwoKRUMucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtc2csIHNpZ25hdHVyZSwga2V5LCBlbmMpIHsKICBtc2cgPSB0aGlzLl90cnVuY2F0ZVRvTihuZXcgQk4obXNnLCAxNikpOwogIGtleSA9IHRoaXMua2V5RnJvbVB1YmxpYyhrZXksIGVuYyk7CiAgc2lnbmF0dXJlID0gbmV3IFNpZ25hdHVyZShzaWduYXR1cmUsICdoZXgnKTsKCiAgLy8gUGVyZm9ybSBwcmltaXRpdmUgdmFsdWVzIHZhbGlkYXRpb24KICB2YXIgciA9IHNpZ25hdHVyZS5yOwogIHZhciBzID0gc2lnbmF0dXJlLnM7CiAgaWYgKHIuY21wbigxKSA8IDAgfHwgci5jbXAodGhpcy5uKSA+PSAwKQogICAgcmV0dXJuIGZhbHNlOwogIGlmIChzLmNtcG4oMSkgPCAwIHx8IHMuY21wKHRoaXMubikgPj0gMCkKICAgIHJldHVybiBmYWxzZTsKCiAgLy8gVmFsaWRhdGUgc2lnbmF0dXJlCiAgdmFyIHNpbnYgPSBzLmludm0odGhpcy5uKTsKICB2YXIgdTEgPSBzaW52Lm11bChtc2cpLnVtb2QodGhpcy5uKTsKICB2YXIgdTIgPSBzaW52Lm11bChyKS51bW9kKHRoaXMubik7CgogIHZhciBwID0gdGhpcy5nLm11bEFkZCh1MSwga2V5LmdldFB1YmxpYygpLCB1Mik7CiAgaWYgKHAuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIGZhbHNlOwoKICByZXR1cm4gcC5nZXRYKCkudW1vZCh0aGlzLm4pLmNtcChyKSA9PT0gMDsKfTsKCkVDLnByb3RvdHlwZS5yZWNvdmVyUHViS2V5ID0gZnVuY3Rpb24obXNnLCBzaWduYXR1cmUsIGosIGVuYykgewogIGFzc2VydCgoMyAmIGopID09PSBqLCAnVGhlIHJlY292ZXJ5IHBhcmFtIGlzIG1vcmUgdGhhbiB0d28gYml0cycpOwogIHNpZ25hdHVyZSA9IG5ldyBTaWduYXR1cmUoc2lnbmF0dXJlLCBlbmMpOwoKICB2YXIgbiA9IHRoaXMubjsKICB2YXIgZSA9IG5ldyBCTihtc2cpOwogIHZhciByID0gc2lnbmF0dXJlLnI7CiAgdmFyIHMgPSBzaWduYXR1cmUuczsKCiAgLy8gQSBzZXQgTFNCIHNpZ25pZmllcyB0aGF0IHRoZSB5LWNvb3JkaW5hdGUgaXMgb2RkCiAgdmFyIGlzWU9kZCA9IGogJiAxOwogIHZhciBpc1NlY29uZEtleSA9IGogPj4gMTsKICBpZiAoci5jbXAodGhpcy5jdXJ2ZS5wLnVtb2QodGhpcy5jdXJ2ZS5uKSkgPj0gMCAmJiBpc1NlY29uZEtleSkKICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGZpbmQgc2VuY29uZCBrZXkgY2FuZGluYXRlJyk7CgogIC8vIDEuMS4gTGV0IHggPSByICsgam4uCiAgaWYgKGlzU2Vjb25kS2V5KQogICAgciA9IHRoaXMuY3VydmUucG9pbnRGcm9tWChyLmFkZCh0aGlzLmN1cnZlLm4pLCBpc1lPZGQpOwogIGVsc2UKICAgIHIgPSB0aGlzLmN1cnZlLnBvaW50RnJvbVgociwgaXNZT2RkKTsKCiAgdmFyIGVOZWcgPSBuLnN1YihlKTsKCiAgLy8gMS42LjEgQ29tcHV0ZSBRID0gcl4tMSAoc1IgLSAgZUcpCiAgLy8gICAgICAgICAgICAgICBRID0gcl4tMSAoc1IgKyAtZUcpCiAgdmFyIHJJbnYgPSBzaWduYXR1cmUuci5pbnZtKG4pOwogIHJldHVybiB0aGlzLmcubXVsQWRkKGVOZWcsIHIsIHMpLm11bChySW52KTsKfTsKCkVDLnByb3RvdHlwZS5nZXRLZXlSZWNvdmVyeVBhcmFtID0gZnVuY3Rpb24oZSwgc2lnbmF0dXJlLCBRLCBlbmMpIHsKICBzaWduYXR1cmUgPSBuZXcgU2lnbmF0dXJlKHNpZ25hdHVyZSwgZW5jKTsKICBpZiAoc2lnbmF0dXJlLnJlY292ZXJ5UGFyYW0gIT09IG51bGwpCiAgICByZXR1cm4gc2lnbmF0dXJlLnJlY292ZXJ5UGFyYW07CgogIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICB2YXIgUXByaW1lOwogICAgdHJ5IHsKICAgICAgUXByaW1lID0gdGhpcy5yZWNvdmVyUHViS2V5KGUsIHNpZ25hdHVyZSwgaSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIGlmIChRcHJpbWUuZXEoUSkpCiAgICAgIHJldHVybiBpOwogIH0KICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBmaW5kIHZhbGlkIHJlY292ZXJ5IGZhY3RvcicpOwp9OwoKfSx7Ii4uLy4uL2VsbGlwdGljIjoxMDIsIi4va2V5IjoxMTAsIi4vc2lnbmF0dXJlIjoxMTEsImJuLmpzIjo0MX1dLDExMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CgpmdW5jdGlvbiBLZXlQYWlyKGVjLCBvcHRpb25zKSB7CiAgdGhpcy5lYyA9IGVjOwogIHRoaXMucHJpdiA9IG51bGw7CiAgdGhpcy5wdWIgPSBudWxsOwoKICAvLyBLZXlQYWlyKGVjLCB7IHByaXY6IC4uLiwgcHViOiAuLi4gfSkKICBpZiAob3B0aW9ucy5wcml2KQogICAgdGhpcy5faW1wb3J0UHJpdmF0ZShvcHRpb25zLnByaXYsIG9wdGlvbnMucHJpdkVuYyk7CiAgaWYgKG9wdGlvbnMucHViKQogICAgdGhpcy5faW1wb3J0UHVibGljKG9wdGlvbnMucHViLCBvcHRpb25zLnB1YkVuYyk7Cn0KbW9kdWxlLmV4cG9ydHMgPSBLZXlQYWlyOwoKS2V5UGFpci5mcm9tUHVibGljID0gZnVuY3Rpb24gZnJvbVB1YmxpYyhlYywgcHViLCBlbmMpIHsKICBpZiAocHViIGluc3RhbmNlb2YgS2V5UGFpcikKICAgIHJldHVybiBwdWI7CgogIHJldHVybiBuZXcgS2V5UGFpcihlYywgewogICAgcHViOiBwdWIsCiAgICBwdWJFbmM6IGVuYwogIH0pOwp9OwoKS2V5UGFpci5mcm9tUHJpdmF0ZSA9IGZ1bmN0aW9uIGZyb21Qcml2YXRlKGVjLCBwcml2LCBlbmMpIHsKICBpZiAocHJpdiBpbnN0YW5jZW9mIEtleVBhaXIpCiAgICByZXR1cm4gcHJpdjsKCiAgcmV0dXJuIG5ldyBLZXlQYWlyKGVjLCB7CiAgICBwcml2OiBwcml2LAogICAgcHJpdkVuYzogZW5jCiAgfSk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogIHZhciBwdWIgPSB0aGlzLmdldFB1YmxpYygpOwoKICBpZiAocHViLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB7IHJlc3VsdDogZmFsc2UsIHJlYXNvbjogJ0ludmFsaWQgcHVibGljIGtleScgfTsKICBpZiAoIXB1Yi52YWxpZGF0ZSgpKQogICAgcmV0dXJuIHsgcmVzdWx0OiBmYWxzZSwgcmVhc29uOiAnUHVibGljIGtleSBpcyBub3QgYSBwb2ludCcgfTsKICBpZiAoIXB1Yi5tdWwodGhpcy5lYy5jdXJ2ZS5uKS5pc0luZmluaXR5KCkpCiAgICByZXR1cm4geyByZXN1bHQ6IGZhbHNlLCByZWFzb246ICdQdWJsaWMga2V5ICogTiAhPSBPJyB9OwoKICByZXR1cm4geyByZXN1bHQ6IHRydWUsIHJlYXNvbjogbnVsbCB9Owp9OwoKS2V5UGFpci5wcm90b3R5cGUuZ2V0UHVibGljID0gZnVuY3Rpb24gZ2V0UHVibGljKGNvbXBhY3QsIGVuYykgewogIC8vIGNvbXBhY3QgaXMgb3B0aW9uYWwgYXJndW1lbnQKICBpZiAodHlwZW9mIGNvbXBhY3QgPT09ICdzdHJpbmcnKSB7CiAgICBlbmMgPSBjb21wYWN0OwogICAgY29tcGFjdCA9IG51bGw7CiAgfQoKICBpZiAoIXRoaXMucHViKQogICAgdGhpcy5wdWIgPSB0aGlzLmVjLmcubXVsKHRoaXMucHJpdik7CgogIGlmICghZW5jKQogICAgcmV0dXJuIHRoaXMucHViOwoKICByZXR1cm4gdGhpcy5wdWIuZW5jb2RlKGVuYywgY29tcGFjdCk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5nZXRQcml2YXRlID0gZnVuY3Rpb24gZ2V0UHJpdmF0ZShlbmMpIHsKICBpZiAoZW5jID09PSAnaGV4JykKICAgIHJldHVybiB0aGlzLnByaXYudG9TdHJpbmcoMTYsIDIpOwogIGVsc2UKICAgIHJldHVybiB0aGlzLnByaXY7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5faW1wb3J0UHJpdmF0ZSA9IGZ1bmN0aW9uIF9pbXBvcnRQcml2YXRlKGtleSwgZW5jKSB7CiAgdGhpcy5wcml2ID0gbmV3IEJOKGtleSwgZW5jIHx8IDE2KTsKCiAgLy8gRW5zdXJlIHRoYXQgdGhlIHByaXYgd29uJ3QgYmUgYmlnZ2VyIHRoYW4gbiwgb3RoZXJ3aXNlIHdlIG1heSBmYWlsCiAgLy8gaW4gZml4ZWQgbXVsdGlwbGljYXRpb24gbWV0aG9kCiAgdGhpcy5wcml2ID0gdGhpcy5wcml2LnVtb2QodGhpcy5lYy5jdXJ2ZS5uKTsKfTsKCktleVBhaXIucHJvdG90eXBlLl9pbXBvcnRQdWJsaWMgPSBmdW5jdGlvbiBfaW1wb3J0UHVibGljKGtleSwgZW5jKSB7CiAgaWYgKGtleS54IHx8IGtleS55KSB7CiAgICB0aGlzLnB1YiA9IHRoaXMuZWMuY3VydmUucG9pbnQoa2V5LngsIGtleS55KTsKICAgIHJldHVybjsKICB9CiAgdGhpcy5wdWIgPSB0aGlzLmVjLmN1cnZlLmRlY29kZVBvaW50KGtleSwgZW5jKTsKfTsKCi8vIEVDREgKS2V5UGFpci5wcm90b3R5cGUuZGVyaXZlID0gZnVuY3Rpb24gZGVyaXZlKHB1YikgewogIHJldHVybiBwdWIubXVsKHRoaXMucHJpdikuZ2V0WCgpOwp9OwoKLy8gRUNEU0EKS2V5UGFpci5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIHNpZ24obXNnLCBlbmMsIG9wdGlvbnMpIHsKICByZXR1cm4gdGhpcy5lYy5zaWduKG1zZywgdGhpcywgZW5jLCBvcHRpb25zKTsKfTsKCktleVBhaXIucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtc2csIHNpZ25hdHVyZSkgewogIHJldHVybiB0aGlzLmVjLnZlcmlmeShtc2csIHNpZ25hdHVyZSwgdGhpcyk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCgpIHsKICByZXR1cm4gJzxLZXkgcHJpdjogJyArICh0aGlzLnByaXYgJiYgdGhpcy5wcml2LnRvU3RyaW5nKDE2LCAyKSkgKwogICAgICAgICAnIHB1YjogJyArICh0aGlzLnB1YiAmJiB0aGlzLnB1Yi5pbnNwZWN0KCkpICsgJyA+JzsKfTsKCn0seyJibi5qcyI6NDF9XSwxMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwoKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIHV0aWxzID0gZWxsaXB0aWMudXRpbHM7CnZhciBhc3NlcnQgPSB1dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBTaWduYXR1cmUob3B0aW9ucywgZW5jKSB7CiAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBTaWduYXR1cmUpCiAgICByZXR1cm4gb3B0aW9uczsKCiAgaWYgKHRoaXMuX2ltcG9ydERFUihvcHRpb25zLCBlbmMpKQogICAgcmV0dXJuOwoKICBhc3NlcnQob3B0aW9ucy5yICYmIG9wdGlvbnMucywgJ1NpZ25hdHVyZSB3aXRob3V0IHIgb3IgcycpOwogIHRoaXMuciA9IG5ldyBCTihvcHRpb25zLnIsIDE2KTsKICB0aGlzLnMgPSBuZXcgQk4ob3B0aW9ucy5zLCAxNik7CiAgaWYgKG9wdGlvbnMucmVjb3ZlcnlQYXJhbSA9PT0gdW5kZWZpbmVkKQogICAgdGhpcy5yZWNvdmVyeVBhcmFtID0gbnVsbDsKICBlbHNlCiAgICB0aGlzLnJlY292ZXJ5UGFyYW0gPSBvcHRpb25zLnJlY292ZXJ5UGFyYW07Cn0KbW9kdWxlLmV4cG9ydHMgPSBTaWduYXR1cmU7CgpmdW5jdGlvbiBQb3NpdGlvbigpIHsKICB0aGlzLnBsYWNlID0gMDsKfQoKZnVuY3Rpb24gZ2V0TGVuZ3RoKGJ1ZiwgcCkgewogIHZhciBpbml0aWFsID0gYnVmW3AucGxhY2UrK107CiAgaWYgKCEoaW5pdGlhbCAmIDB4ODApKSB7CiAgICByZXR1cm4gaW5pdGlhbDsKICB9CiAgdmFyIG9jdGV0TGVuID0gaW5pdGlhbCAmIDB4ZjsKICB2YXIgdmFsID0gMDsKICBmb3IgKHZhciBpID0gMCwgb2ZmID0gcC5wbGFjZTsgaSA8IG9jdGV0TGVuOyBpKyssIG9mZisrKSB7CiAgICB2YWwgPDw9IDg7CiAgICB2YWwgfD0gYnVmW29mZl07CiAgfQogIHAucGxhY2UgPSBvZmY7CiAgcmV0dXJuIHZhbDsKfQoKZnVuY3Rpb24gcm1QYWRkaW5nKGJ1ZikgewogIHZhciBpID0gMDsKICB2YXIgbGVuID0gYnVmLmxlbmd0aCAtIDE7CiAgd2hpbGUgKCFidWZbaV0gJiYgIShidWZbaSArIDFdICYgMHg4MCkgJiYgaSA8IGxlbikgewogICAgaSsrOwogIH0KICBpZiAoaSA9PT0gMCkgewogICAgcmV0dXJuIGJ1ZjsKICB9CiAgcmV0dXJuIGJ1Zi5zbGljZShpKTsKfQoKU2lnbmF0dXJlLnByb3RvdHlwZS5faW1wb3J0REVSID0gZnVuY3Rpb24gX2ltcG9ydERFUihkYXRhLCBlbmMpIHsKICBkYXRhID0gdXRpbHMudG9BcnJheShkYXRhLCBlbmMpOwogIHZhciBwID0gbmV3IFBvc2l0aW9uKCk7CiAgaWYgKGRhdGFbcC5wbGFjZSsrXSAhPT0gMHgzMCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB2YXIgbGVuID0gZ2V0TGVuZ3RoKGRhdGEsIHApOwogIGlmICgobGVuICsgcC5wbGFjZSkgIT09IGRhdGEubGVuZ3RoKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmIChkYXRhW3AucGxhY2UrK10gIT09IDB4MDIpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgdmFyIHJsZW4gPSBnZXRMZW5ndGgoZGF0YSwgcCk7CiAgdmFyIHIgPSBkYXRhLnNsaWNlKHAucGxhY2UsIHJsZW4gKyBwLnBsYWNlKTsKICBwLnBsYWNlICs9IHJsZW47CiAgaWYgKGRhdGFbcC5wbGFjZSsrXSAhPT0gMHgwMikgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB2YXIgc2xlbiA9IGdldExlbmd0aChkYXRhLCBwKTsKICBpZiAoZGF0YS5sZW5ndGggIT09IHNsZW4gKyBwLnBsYWNlKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHZhciBzID0gZGF0YS5zbGljZShwLnBsYWNlLCBzbGVuICsgcC5wbGFjZSk7CiAgaWYgKHJbMF0gPT09IDAgJiYgKHJbMV0gJiAweDgwKSkgewogICAgciA9IHIuc2xpY2UoMSk7CiAgfQogIGlmIChzWzBdID09PSAwICYmIChzWzFdICYgMHg4MCkpIHsKICAgIHMgPSBzLnNsaWNlKDEpOwogIH0KCiAgdGhpcy5yID0gbmV3IEJOKHIpOwogIHRoaXMucyA9IG5ldyBCTihzKTsKICB0aGlzLnJlY292ZXJ5UGFyYW0gPSBudWxsOwoKICByZXR1cm4gdHJ1ZTsKfTsKCmZ1bmN0aW9uIGNvbnN0cnVjdExlbmd0aChhcnIsIGxlbikgewogIGlmIChsZW4gPCAweDgwKSB7CiAgICBhcnIucHVzaChsZW4pOwogICAgcmV0dXJuOwogIH0KICB2YXIgb2N0ZXRzID0gMSArIChNYXRoLmxvZyhsZW4pIC8gTWF0aC5MTjIgPj4+IDMpOwogIGFyci5wdXNoKG9jdGV0cyB8IDB4ODApOwogIHdoaWxlICgtLW9jdGV0cykgewogICAgYXJyLnB1c2goKGxlbiA+Pj4gKG9jdGV0cyA8PCAzKSkgJiAweGZmKTsKICB9CiAgYXJyLnB1c2gobGVuKTsKfQoKU2lnbmF0dXJlLnByb3RvdHlwZS50b0RFUiA9IGZ1bmN0aW9uIHRvREVSKGVuYykgewogIHZhciByID0gdGhpcy5yLnRvQXJyYXkoKTsKICB2YXIgcyA9IHRoaXMucy50b0FycmF5KCk7CgogIC8vIFBhZCB2YWx1ZXMKICBpZiAoclswXSAmIDB4ODApCiAgICByID0gWyAwIF0uY29uY2F0KHIpOwogIC8vIFBhZCB2YWx1ZXMKICBpZiAoc1swXSAmIDB4ODApCiAgICBzID0gWyAwIF0uY29uY2F0KHMpOwoKICByID0gcm1QYWRkaW5nKHIpOwogIHMgPSBybVBhZGRpbmcocyk7CgogIHdoaWxlICghc1swXSAmJiAhKHNbMV0gJiAweDgwKSkgewogICAgcyA9IHMuc2xpY2UoMSk7CiAgfQogIHZhciBhcnIgPSBbIDB4MDIgXTsKICBjb25zdHJ1Y3RMZW5ndGgoYXJyLCByLmxlbmd0aCk7CiAgYXJyID0gYXJyLmNvbmNhdChyKTsKICBhcnIucHVzaCgweDAyKTsKICBjb25zdHJ1Y3RMZW5ndGgoYXJyLCBzLmxlbmd0aCk7CiAgdmFyIGJhY2tIYWxmID0gYXJyLmNvbmNhdChzKTsKICB2YXIgcmVzID0gWyAweDMwIF07CiAgY29uc3RydWN0TGVuZ3RoKHJlcywgYmFja0hhbGYubGVuZ3RoKTsKICByZXMgPSByZXMuY29uY2F0KGJhY2tIYWxmKTsKICByZXR1cm4gdXRpbHMuZW5jb2RlKHJlcywgZW5jKTsKfTsKCn0seyIuLi8uLi9lbGxpcHRpYyI6MTAyLCJibi5qcyI6NDF9XSwxMTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgaGFzaCA9IHJlcXVpcmUoJ2hhc2guanMnKTsKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIHV0aWxzID0gZWxsaXB0aWMudXRpbHM7CnZhciBhc3NlcnQgPSB1dGlscy5hc3NlcnQ7CnZhciBwYXJzZUJ5dGVzID0gdXRpbHMucGFyc2VCeXRlczsKdmFyIEtleVBhaXIgPSByZXF1aXJlKCcuL2tleScpOwp2YXIgU2lnbmF0dXJlID0gcmVxdWlyZSgnLi9zaWduYXR1cmUnKTsKCmZ1bmN0aW9uIEVERFNBKGN1cnZlKSB7CiAgYXNzZXJ0KGN1cnZlID09PSAnZWQyNTUxOScsICdvbmx5IHRlc3RlZCB3aXRoIGVkMjU1MTkgc28gZmFyJyk7CgogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBFRERTQSkpCiAgICByZXR1cm4gbmV3IEVERFNBKGN1cnZlKTsKCiAgdmFyIGN1cnZlID0gZWxsaXB0aWMuY3VydmVzW2N1cnZlXS5jdXJ2ZTsKICB0aGlzLmN1cnZlID0gY3VydmU7CiAgdGhpcy5nID0gY3VydmUuZzsKICB0aGlzLmcucHJlY29tcHV0ZShjdXJ2ZS5uLmJpdExlbmd0aCgpICsgMSk7CgogIHRoaXMucG9pbnRDbGFzcyA9IGN1cnZlLnBvaW50KCkuY29uc3RydWN0b3I7CiAgdGhpcy5lbmNvZGluZ0xlbmd0aCA9IE1hdGguY2VpbChjdXJ2ZS5uLmJpdExlbmd0aCgpIC8gOCk7CiAgdGhpcy5oYXNoID0gaGFzaC5zaGE1MTI7Cn0KCm1vZHVsZS5leHBvcnRzID0gRUREU0E7CgovKioKKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gbWVzc2FnZSAtIG1lc3NhZ2UgYnl0ZXMKKiBAcGFyYW0ge0FycmF5fFN0cmluZ3xLZXlQYWlyfSBzZWNyZXQgLSBzZWNyZXQgYnl0ZXMgb3IgYSBrZXlwYWlyCiogQHJldHVybnMge1NpZ25hdHVyZX0gLSBzaWduYXR1cmUKKi8KRUREU0EucHJvdG90eXBlLnNpZ24gPSBmdW5jdGlvbiBzaWduKG1lc3NhZ2UsIHNlY3JldCkgewogIG1lc3NhZ2UgPSBwYXJzZUJ5dGVzKG1lc3NhZ2UpOwogIHZhciBrZXkgPSB0aGlzLmtleUZyb21TZWNyZXQoc2VjcmV0KTsKICB2YXIgciA9IHRoaXMuaGFzaEludChrZXkubWVzc2FnZVByZWZpeCgpLCBtZXNzYWdlKTsKICB2YXIgUiA9IHRoaXMuZy5tdWwocik7CiAgdmFyIFJlbmNvZGVkID0gdGhpcy5lbmNvZGVQb2ludChSKTsKICB2YXIgc18gPSB0aGlzLmhhc2hJbnQoUmVuY29kZWQsIGtleS5wdWJCeXRlcygpLCBtZXNzYWdlKQogICAgICAgICAgICAgICAubXVsKGtleS5wcml2KCkpOwogIHZhciBTID0gci5hZGQoc18pLnVtb2QodGhpcy5jdXJ2ZS5uKTsKICByZXR1cm4gdGhpcy5tYWtlU2lnbmF0dXJlKHsgUjogUiwgUzogUywgUmVuY29kZWQ6IFJlbmNvZGVkIH0pOwp9OwoKLyoqCiogQHBhcmFtIHtBcnJheX0gbWVzc2FnZSAtIG1lc3NhZ2UgYnl0ZXMKKiBAcGFyYW0ge0FycmF5fFN0cmluZ3xTaWduYXR1cmV9IHNpZyAtIHNpZyBieXRlcwoqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfFBvaW50fEtleVBhaXJ9IHB1YiAtIHB1YmxpYyBrZXkKKiBAcmV0dXJucyB7Qm9vbGVhbn0gLSB0cnVlIGlmIHB1YmxpYyBrZXkgbWF0Y2hlcyBzaWcgb2YgbWVzc2FnZQoqLwpFRERTQS5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UsIHNpZywgcHViKSB7CiAgbWVzc2FnZSA9IHBhcnNlQnl0ZXMobWVzc2FnZSk7CiAgc2lnID0gdGhpcy5tYWtlU2lnbmF0dXJlKHNpZyk7CiAgdmFyIGtleSA9IHRoaXMua2V5RnJvbVB1YmxpYyhwdWIpOwogIHZhciBoID0gdGhpcy5oYXNoSW50KHNpZy5SZW5jb2RlZCgpLCBrZXkucHViQnl0ZXMoKSwgbWVzc2FnZSk7CiAgdmFyIFNHID0gdGhpcy5nLm11bChzaWcuUygpKTsKICB2YXIgUnBsdXNBaCA9IHNpZy5SKCkuYWRkKGtleS5wdWIoKS5tdWwoaCkpOwogIHJldHVybiBScGx1c0FoLmVxKFNHKTsKfTsKCkVERFNBLnByb3RvdHlwZS5oYXNoSW50ID0gZnVuY3Rpb24gaGFzaEludCgpIHsKICB2YXIgaGFzaCA9IHRoaXMuaGFzaCgpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKQogICAgaGFzaC51cGRhdGUoYXJndW1lbnRzW2ldKTsKICByZXR1cm4gdXRpbHMuaW50RnJvbUxFKGhhc2guZGlnZXN0KCkpLnVtb2QodGhpcy5jdXJ2ZS5uKTsKfTsKCkVERFNBLnByb3RvdHlwZS5rZXlGcm9tUHVibGljID0gZnVuY3Rpb24ga2V5RnJvbVB1YmxpYyhwdWIpIHsKICByZXR1cm4gS2V5UGFpci5mcm9tUHVibGljKHRoaXMsIHB1Yik7Cn07CgpFRERTQS5wcm90b3R5cGUua2V5RnJvbVNlY3JldCA9IGZ1bmN0aW9uIGtleUZyb21TZWNyZXQoc2VjcmV0KSB7CiAgcmV0dXJuIEtleVBhaXIuZnJvbVNlY3JldCh0aGlzLCBzZWNyZXQpOwp9OwoKRUREU0EucHJvdG90eXBlLm1ha2VTaWduYXR1cmUgPSBmdW5jdGlvbiBtYWtlU2lnbmF0dXJlKHNpZykgewogIGlmIChzaWcgaW5zdGFuY2VvZiBTaWduYXR1cmUpCiAgICByZXR1cm4gc2lnOwogIHJldHVybiBuZXcgU2lnbmF0dXJlKHRoaXMsIHNpZyk7Cn07CgovKioKKiAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1qb3NlZnNzb24tZWRkc2EtZWQyNTUxOS0wMyNzZWN0aW9uLTUuMgoqCiogRUREU0EgZGVmaW5lcyBtZXRob2RzIGZvciBlbmNvZGluZyBhbmQgZGVjb2RpbmcgcG9pbnRzIGFuZCBpbnRlZ2Vycy4gVGhlc2UgYXJlCiogaGVscGVyIGNvbnZlbmllbmNlIG1ldGhvZHMsIHRoYXQgcGFzcyBhbG9uZyB0byB1dGlsaXR5IGZ1bmN0aW9ucyBpbXBsaWVkCiogcGFyYW1ldGVycy4KKgoqLwpFRERTQS5wcm90b3R5cGUuZW5jb2RlUG9pbnQgPSBmdW5jdGlvbiBlbmNvZGVQb2ludChwb2ludCkgewogIHZhciBlbmMgPSBwb2ludC5nZXRZKCkudG9BcnJheSgnbGUnLCB0aGlzLmVuY29kaW5nTGVuZ3RoKTsKICBlbmNbdGhpcy5lbmNvZGluZ0xlbmd0aCAtIDFdIHw9IHBvaW50LmdldFgoKS5pc09kZCgpID8gMHg4MCA6IDA7CiAgcmV0dXJuIGVuYzsKfTsKCkVERFNBLnByb3RvdHlwZS5kZWNvZGVQb2ludCA9IGZ1bmN0aW9uIGRlY29kZVBvaW50KGJ5dGVzKSB7CiAgYnl0ZXMgPSB1dGlscy5wYXJzZUJ5dGVzKGJ5dGVzKTsKCiAgdmFyIGxhc3RJeCA9IGJ5dGVzLmxlbmd0aCAtIDE7CiAgdmFyIG5vcm1lZCA9IGJ5dGVzLnNsaWNlKDAsIGxhc3RJeCkuY29uY2F0KGJ5dGVzW2xhc3RJeF0gJiB+MHg4MCk7CiAgdmFyIHhJc09kZCA9IChieXRlc1tsYXN0SXhdICYgMHg4MCkgIT09IDA7CgogIHZhciB5ID0gdXRpbHMuaW50RnJvbUxFKG5vcm1lZCk7CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnRGcm9tWSh5LCB4SXNPZGQpOwp9OwoKRUREU0EucHJvdG90eXBlLmVuY29kZUludCA9IGZ1bmN0aW9uIGVuY29kZUludChudW0pIHsKICByZXR1cm4gbnVtLnRvQXJyYXkoJ2xlJywgdGhpcy5lbmNvZGluZ0xlbmd0aCk7Cn07CgpFRERTQS5wcm90b3R5cGUuZGVjb2RlSW50ID0gZnVuY3Rpb24gZGVjb2RlSW50KGJ5dGVzKSB7CiAgcmV0dXJuIHV0aWxzLmludEZyb21MRShieXRlcyk7Cn07CgpFRERTQS5wcm90b3R5cGUuaXNQb2ludCA9IGZ1bmN0aW9uIGlzUG9pbnQodmFsKSB7CiAgcmV0dXJuIHZhbCBpbnN0YW5jZW9mIHRoaXMucG9pbnRDbGFzczsKfTsKCn0seyIuLi8uLi9lbGxpcHRpYyI6MTAyLCIuL2tleSI6MTEzLCIuL3NpZ25hdHVyZSI6MTE0LCJoYXNoLmpzIjoxMjB9XSwxMTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCcuLi8uLi9lbGxpcHRpYycpOwp2YXIgdXRpbHMgPSBlbGxpcHRpYy51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKdmFyIHBhcnNlQnl0ZXMgPSB1dGlscy5wYXJzZUJ5dGVzOwp2YXIgY2FjaGVkUHJvcGVydHkgPSB1dGlscy5jYWNoZWRQcm9wZXJ0eTsKCi8qKgoqIEBwYXJhbSB7RUREU0F9IGVkZHNhIC0gaW5zdGFuY2UKKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gcHVibGljL3ByaXZhdGUga2V5IHBhcmFtZXRlcnMKKgoqIEBwYXJhbSB7QXJyYXk8Qnl0ZT59IFtwYXJhbXMuc2VjcmV0XSAtIHNlY3JldCBzZWVkIGJ5dGVzCiogQHBhcmFtIHtQb2ludH0gW3BhcmFtcy5wdWJdIC0gcHVibGljIGtleSBwb2ludCAoYWthIGBBYCBpbiBlZGRzYSB0ZXJtcykKKiBAcGFyYW0ge0FycmF5PEJ5dGU+fSBbcGFyYW1zLnB1Yl0gLSBwdWJsaWMga2V5IHBvaW50IGVuY29kZWQgYXMgYnl0ZXMKKgoqLwpmdW5jdGlvbiBLZXlQYWlyKGVkZHNhLCBwYXJhbXMpIHsKICB0aGlzLmVkZHNhID0gZWRkc2E7CiAgdGhpcy5fc2VjcmV0ID0gcGFyc2VCeXRlcyhwYXJhbXMuc2VjcmV0KTsKICBpZiAoZWRkc2EuaXNQb2ludChwYXJhbXMucHViKSkKICAgIHRoaXMuX3B1YiA9IHBhcmFtcy5wdWI7CiAgZWxzZQogICAgdGhpcy5fcHViQnl0ZXMgPSBwYXJzZUJ5dGVzKHBhcmFtcy5wdWIpOwp9CgpLZXlQYWlyLmZyb21QdWJsaWMgPSBmdW5jdGlvbiBmcm9tUHVibGljKGVkZHNhLCBwdWIpIHsKICBpZiAocHViIGluc3RhbmNlb2YgS2V5UGFpcikKICAgIHJldHVybiBwdWI7CiAgcmV0dXJuIG5ldyBLZXlQYWlyKGVkZHNhLCB7IHB1YjogcHViIH0pOwp9OwoKS2V5UGFpci5mcm9tU2VjcmV0ID0gZnVuY3Rpb24gZnJvbVNlY3JldChlZGRzYSwgc2VjcmV0KSB7CiAgaWYgKHNlY3JldCBpbnN0YW5jZW9mIEtleVBhaXIpCiAgICByZXR1cm4gc2VjcmV0OwogIHJldHVybiBuZXcgS2V5UGFpcihlZGRzYSwgeyBzZWNyZXQ6IHNlY3JldCB9KTsKfTsKCktleVBhaXIucHJvdG90eXBlLnNlY3JldCA9IGZ1bmN0aW9uIHNlY3JldCgpIHsKICByZXR1cm4gdGhpcy5fc2VjcmV0Owp9OwoKY2FjaGVkUHJvcGVydHkoS2V5UGFpciwgZnVuY3Rpb24gcHViQnl0ZXMoKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EuZW5jb2RlUG9pbnQodGhpcy5wdWIoKSk7Cn0pOwoKY2FjaGVkUHJvcGVydHkoS2V5UGFpciwgZnVuY3Rpb24gcHViKCkgewogIGlmICh0aGlzLl9wdWJCeXRlcykKICAgIHJldHVybiB0aGlzLmVkZHNhLmRlY29kZVBvaW50KHRoaXMuX3B1YkJ5dGVzKTsKICByZXR1cm4gdGhpcy5lZGRzYS5nLm11bCh0aGlzLnByaXYoKSk7Cn0pOwoKY2FjaGVkUHJvcGVydHkoS2V5UGFpciwgZnVuY3Rpb24gcHJpdkJ5dGVzKCkgewogIHZhciBlZGRzYSA9IHRoaXMuZWRkc2E7CiAgdmFyIGhhc2ggPSB0aGlzLmhhc2goKTsKICB2YXIgbGFzdEl4ID0gZWRkc2EuZW5jb2RpbmdMZW5ndGggLSAxOwoKICB2YXIgYSA9IGhhc2guc2xpY2UoMCwgZWRkc2EuZW5jb2RpbmdMZW5ndGgpOwogIGFbMF0gJj0gMjQ4OwogIGFbbGFzdEl4XSAmPSAxMjc7CiAgYVtsYXN0SXhdIHw9IDY0OwoKICByZXR1cm4gYTsKfSk7CgpjYWNoZWRQcm9wZXJ0eShLZXlQYWlyLCBmdW5jdGlvbiBwcml2KCkgewogIHJldHVybiB0aGlzLmVkZHNhLmRlY29kZUludCh0aGlzLnByaXZCeXRlcygpKTsKfSk7CgpjYWNoZWRQcm9wZXJ0eShLZXlQYWlyLCBmdW5jdGlvbiBoYXNoKCkgewogIHJldHVybiB0aGlzLmVkZHNhLmhhc2goKS51cGRhdGUodGhpcy5zZWNyZXQoKSkuZGlnZXN0KCk7Cn0pOwoKY2FjaGVkUHJvcGVydHkoS2V5UGFpciwgZnVuY3Rpb24gbWVzc2FnZVByZWZpeCgpIHsKICByZXR1cm4gdGhpcy5oYXNoKCkuc2xpY2UodGhpcy5lZGRzYS5lbmNvZGluZ0xlbmd0aCk7Cn0pOwoKS2V5UGFpci5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIHNpZ24obWVzc2FnZSkgewogIGFzc2VydCh0aGlzLl9zZWNyZXQsICdLZXlQYWlyIGNhbiBvbmx5IHZlcmlmeScpOwogIHJldHVybiB0aGlzLmVkZHNhLnNpZ24obWVzc2FnZSwgdGhpcyk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSwgc2lnKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EudmVyaWZ5KG1lc3NhZ2UsIHNpZywgdGhpcyk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5nZXRTZWNyZXQgPSBmdW5jdGlvbiBnZXRTZWNyZXQoZW5jKSB7CiAgYXNzZXJ0KHRoaXMuX3NlY3JldCwgJ0tleVBhaXIgaXMgcHVibGljIG9ubHknKTsKICByZXR1cm4gdXRpbHMuZW5jb2RlKHRoaXMuc2VjcmV0KCksIGVuYyk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5nZXRQdWJsaWMgPSBmdW5jdGlvbiBnZXRQdWJsaWMoZW5jKSB7CiAgcmV0dXJuIHV0aWxzLmVuY29kZSh0aGlzLnB1YkJ5dGVzKCksIGVuYyk7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IEtleVBhaXI7Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjEwMn1dLDExNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0Owp2YXIgY2FjaGVkUHJvcGVydHkgPSB1dGlscy5jYWNoZWRQcm9wZXJ0eTsKdmFyIHBhcnNlQnl0ZXMgPSB1dGlscy5wYXJzZUJ5dGVzOwoKLyoqCiogQHBhcmFtIHtFRERTQX0gZWRkc2EgLSBlZGRzYSBpbnN0YW5jZQoqIEBwYXJhbSB7QXJyYXk8Qnl0ZXM+fE9iamVjdH0gc2lnIC0KKiBAcGFyYW0ge0FycmF5PEJ5dGVzPnxQb2ludH0gW3NpZy5SXSAtIFIgcG9pbnQgYXMgUG9pbnQgb3IgYnl0ZXMKKiBAcGFyYW0ge0FycmF5PEJ5dGVzPnxibn0gW3NpZy5TXSAtIFMgc2NhbGFyIGFzIGJuIG9yIGJ5dGVzCiogQHBhcmFtIHtBcnJheTxCeXRlcz59IFtzaWcuUmVuY29kZWRdIC0gUiBwb2ludCBlbmNvZGVkCiogQHBhcmFtIHtBcnJheTxCeXRlcz59IFtzaWcuU2VuY29kZWRdIC0gUyBzY2FsYXIgZW5jb2RlZAoqLwpmdW5jdGlvbiBTaWduYXR1cmUoZWRkc2EsIHNpZykgewogIHRoaXMuZWRkc2EgPSBlZGRzYTsKCiAgaWYgKHR5cGVvZiBzaWcgIT09ICdvYmplY3QnKQogICAgc2lnID0gcGFyc2VCeXRlcyhzaWcpOwoKICBpZiAoQXJyYXkuaXNBcnJheShzaWcpKSB7CiAgICBzaWcgPSB7CiAgICAgIFI6IHNpZy5zbGljZSgwLCBlZGRzYS5lbmNvZGluZ0xlbmd0aCksCiAgICAgIFM6IHNpZy5zbGljZShlZGRzYS5lbmNvZGluZ0xlbmd0aCkKICAgIH07CiAgfQoKICBhc3NlcnQoc2lnLlIgJiYgc2lnLlMsICdTaWduYXR1cmUgd2l0aG91dCBSIG9yIFMnKTsKCiAgaWYgKGVkZHNhLmlzUG9pbnQoc2lnLlIpKQogICAgdGhpcy5fUiA9IHNpZy5SOwogIGlmIChzaWcuUyBpbnN0YW5jZW9mIEJOKQogICAgdGhpcy5fUyA9IHNpZy5TOwoKICB0aGlzLl9SZW5jb2RlZCA9IEFycmF5LmlzQXJyYXkoc2lnLlIpID8gc2lnLlIgOiBzaWcuUmVuY29kZWQ7CiAgdGhpcy5fU2VuY29kZWQgPSBBcnJheS5pc0FycmF5KHNpZy5TKSA/IHNpZy5TIDogc2lnLlNlbmNvZGVkOwp9CgpjYWNoZWRQcm9wZXJ0eShTaWduYXR1cmUsIGZ1bmN0aW9uIFMoKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EuZGVjb2RlSW50KHRoaXMuU2VuY29kZWQoKSk7Cn0pOwoKY2FjaGVkUHJvcGVydHkoU2lnbmF0dXJlLCBmdW5jdGlvbiBSKCkgewogIHJldHVybiB0aGlzLmVkZHNhLmRlY29kZVBvaW50KHRoaXMuUmVuY29kZWQoKSk7Cn0pOwoKY2FjaGVkUHJvcGVydHkoU2lnbmF0dXJlLCBmdW5jdGlvbiBSZW5jb2RlZCgpIHsKICByZXR1cm4gdGhpcy5lZGRzYS5lbmNvZGVQb2ludCh0aGlzLlIoKSk7Cn0pOwoKY2FjaGVkUHJvcGVydHkoU2lnbmF0dXJlLCBmdW5jdGlvbiBTZW5jb2RlZCgpIHsKICByZXR1cm4gdGhpcy5lZGRzYS5lbmNvZGVJbnQodGhpcy5TKCkpOwp9KTsKClNpZ25hdHVyZS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIHRvQnl0ZXMoKSB7CiAgcmV0dXJuIHRoaXMuUmVuY29kZWQoKS5jb25jYXQodGhpcy5TZW5jb2RlZCgpKTsKfTsKClNpZ25hdHVyZS5wcm90b3R5cGUudG9IZXggPSBmdW5jdGlvbiB0b0hleCgpIHsKICByZXR1cm4gdXRpbHMuZW5jb2RlKHRoaXMudG9CeXRlcygpLCAnaGV4JykudG9VcHBlckNhc2UoKTsKfTsKCm1vZHVsZS5leHBvcnRzID0gU2lnbmF0dXJlOwoKfSx7Ii4uLy4uL2VsbGlwdGljIjoxMDIsImJuLmpzIjo0MX1dLDExNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBoYXNoID0gcmVxdWlyZSgnaGFzaC5qcycpOwp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCcuLi9lbGxpcHRpYycpOwp2YXIgdXRpbHMgPSBlbGxpcHRpYy51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKCmZ1bmN0aW9uIEhtYWNEUkJHKG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSG1hY0RSQkcpKQogICAgcmV0dXJuIG5ldyBIbWFjRFJCRyhvcHRpb25zKTsKICB0aGlzLmhhc2ggPSBvcHRpb25zLmhhc2g7CiAgdGhpcy5wcmVkUmVzaXN0ID0gISFvcHRpb25zLnByZWRSZXNpc3Q7CgogIHRoaXMub3V0TGVuID0gdGhpcy5oYXNoLm91dFNpemU7CiAgdGhpcy5taW5FbnRyb3B5ID0gb3B0aW9ucy5taW5FbnRyb3B5IHx8IHRoaXMuaGFzaC5obWFjU3RyZW5ndGg7CgogIHRoaXMucmVzZWVkID0gbnVsbDsKICB0aGlzLnJlc2VlZEludGVydmFsID0gbnVsbDsKICB0aGlzLksgPSBudWxsOwogIHRoaXMuViA9IG51bGw7CgogIHZhciBlbnRyb3B5ID0gdXRpbHMudG9BcnJheShvcHRpb25zLmVudHJvcHksIG9wdGlvbnMuZW50cm9weUVuYyk7CiAgdmFyIG5vbmNlID0gdXRpbHMudG9BcnJheShvcHRpb25zLm5vbmNlLCBvcHRpb25zLm5vbmNlRW5jKTsKICB2YXIgcGVycyA9IHV0aWxzLnRvQXJyYXkob3B0aW9ucy5wZXJzLCBvcHRpb25zLnBlcnNFbmMpOwogIGFzc2VydChlbnRyb3B5Lmxlbmd0aCA+PSAodGhpcy5taW5FbnRyb3B5IC8gOCksCiAgICAgICAgICdOb3QgZW5vdWdoIGVudHJvcHkuIE1pbmltdW0gaXM6ICcgKyB0aGlzLm1pbkVudHJvcHkgKyAnIGJpdHMnKTsKICB0aGlzLl9pbml0KGVudHJvcHksIG5vbmNlLCBwZXJzKTsKfQptb2R1bGUuZXhwb3J0cyA9IEhtYWNEUkJHOwoKSG1hY0RSQkcucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gaW5pdChlbnRyb3B5LCBub25jZSwgcGVycykgewogIHZhciBzZWVkID0gZW50cm9weS5jb25jYXQobm9uY2UpLmNvbmNhdChwZXJzKTsKCiAgdGhpcy5LID0gbmV3IEFycmF5KHRoaXMub3V0TGVuIC8gOCk7CiAgdGhpcy5WID0gbmV3IEFycmF5KHRoaXMub3V0TGVuIC8gOCk7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLlYubGVuZ3RoOyBpKyspIHsKICAgIHRoaXMuS1tpXSA9IDB4MDA7CiAgICB0aGlzLlZbaV0gPSAweDAxOwogIH0KCiAgdGhpcy5fdXBkYXRlKHNlZWQpOwogIHRoaXMucmVzZWVkID0gMTsKICB0aGlzLnJlc2VlZEludGVydmFsID0gMHgxMDAwMDAwMDAwMDAwOyAgLy8gMl40OAp9OwoKSG1hY0RSQkcucHJvdG90eXBlLl9obWFjID0gZnVuY3Rpb24gaG1hYygpIHsKICByZXR1cm4gbmV3IGhhc2guaG1hYyh0aGlzLmhhc2gsIHRoaXMuSyk7Cn07CgpIbWFjRFJCRy5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShzZWVkKSB7CiAgdmFyIGttYWMgPSB0aGlzLl9obWFjKCkKICAgICAgICAgICAgICAgICAudXBkYXRlKHRoaXMuVikKICAgICAgICAgICAgICAgICAudXBkYXRlKFsgMHgwMCBdKTsKICBpZiAoc2VlZCkKICAgIGttYWMgPSBrbWFjLnVwZGF0ZShzZWVkKTsKICB0aGlzLksgPSBrbWFjLmRpZ2VzdCgpOwogIHRoaXMuViA9IHRoaXMuX2htYWMoKS51cGRhdGUodGhpcy5WKS5kaWdlc3QoKTsKICBpZiAoIXNlZWQpCiAgICByZXR1cm47CgogIHRoaXMuSyA9IHRoaXMuX2htYWMoKQogICAgICAgICAgICAgICAudXBkYXRlKHRoaXMuVikKICAgICAgICAgICAgICAgLnVwZGF0ZShbIDB4MDEgXSkKICAgICAgICAgICAgICAgLnVwZGF0ZShzZWVkKQogICAgICAgICAgICAgICAuZGlnZXN0KCk7CiAgdGhpcy5WID0gdGhpcy5faG1hYygpLnVwZGF0ZSh0aGlzLlYpLmRpZ2VzdCgpOwp9OwoKSG1hY0RSQkcucHJvdG90eXBlLnJlc2VlZCA9IGZ1bmN0aW9uIHJlc2VlZChlbnRyb3B5LCBlbnRyb3B5RW5jLCBhZGQsIGFkZEVuYykgewogIC8vIE9wdGlvbmFsIGVudHJvcHkgZW5jCiAgaWYgKHR5cGVvZiBlbnRyb3B5RW5jICE9PSAnc3RyaW5nJykgewogICAgYWRkRW5jID0gYWRkOwogICAgYWRkID0gZW50cm9weUVuYzsKICAgIGVudHJvcHlFbmMgPSBudWxsOwogIH0KCiAgZW50cm9weSA9IHV0aWxzLnRvQnVmZmVyKGVudHJvcHksIGVudHJvcHlFbmMpOwogIGFkZCA9IHV0aWxzLnRvQnVmZmVyKGFkZCwgYWRkRW5jKTsKCiAgYXNzZXJ0KGVudHJvcHkubGVuZ3RoID49ICh0aGlzLm1pbkVudHJvcHkgLyA4KSwKICAgICAgICAgJ05vdCBlbm91Z2ggZW50cm9weS4gTWluaW11bSBpczogJyArIHRoaXMubWluRW50cm9weSArICcgYml0cycpOwoKICB0aGlzLl91cGRhdGUoZW50cm9weS5jb25jYXQoYWRkIHx8IFtdKSk7CiAgdGhpcy5yZXNlZWQgPSAxOwp9OwoKSG1hY0RSQkcucHJvdG90eXBlLmdlbmVyYXRlID0gZnVuY3Rpb24gZ2VuZXJhdGUobGVuLCBlbmMsIGFkZCwgYWRkRW5jKSB7CiAgaWYgKHRoaXMucmVzZWVkID4gdGhpcy5yZXNlZWRJbnRlcnZhbCkKICAgIHRocm93IG5ldyBFcnJvcignUmVzZWVkIGlzIHJlcXVpcmVkJyk7CgogIC8vIE9wdGlvbmFsIGVuY29kaW5nCiAgaWYgKHR5cGVvZiBlbmMgIT09ICdzdHJpbmcnKSB7CiAgICBhZGRFbmMgPSBhZGQ7CiAgICBhZGQgPSBlbmM7CiAgICBlbmMgPSBudWxsOwogIH0KCiAgLy8gT3B0aW9uYWwgYWRkaXRpb25hbCBkYXRhCiAgaWYgKGFkZCkgewogICAgYWRkID0gdXRpbHMudG9BcnJheShhZGQsIGFkZEVuYyk7CiAgICB0aGlzLl91cGRhdGUoYWRkKTsKICB9CgogIHZhciB0ZW1wID0gW107CiAgd2hpbGUgKHRlbXAubGVuZ3RoIDwgbGVuKSB7CiAgICB0aGlzLlYgPSB0aGlzLl9obWFjKCkudXBkYXRlKHRoaXMuVikuZGlnZXN0KCk7CiAgICB0ZW1wID0gdGVtcC5jb25jYXQodGhpcy5WKTsKICB9CgogIHZhciByZXMgPSB0ZW1wLnNsaWNlKDAsIGxlbik7CiAgdGhpcy5fdXBkYXRlKGFkZCk7CiAgdGhpcy5yZXNlZWQrKzsKICByZXR1cm4gdXRpbHMuZW5jb2RlKHJlcywgZW5jKTsKfTsKCn0seyIuLi9lbGxpcHRpYyI6MTAyLCJoYXNoLmpzIjoxMjB9XSwxMTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHsKICBkb3VibGVzOiB7CiAgICBzdGVwOiA0LAogICAgcG9pbnRzOiBbCiAgICAgIFsKICAgICAgICAnZTYwZmNlOTNiNTllOWVjNTMwMTFhYWJjMjFjMjNlOTdiMmEzMTM2OWI4N2E1YWU5YzQ0ZWU4OWUyYTZkZWMwYScsCiAgICAgICAgJ2Y3ZTM1MDczOTllNTk1OTI5ZGI5OWYzNGY1NzkzNzEwMTI5Njg5MWU0NGQyM2YwYmUxZjMyY2NlNjk2MTY4MjEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODI4MjI2MzIxMmM2MDlkOWVhMmE2ZTNlMTcyZGUyMzhkOGMzOWNhYmQ1YWMxY2ExMDY0NmUyM2ZkNWY1MTUwOCcsCiAgICAgICAgJzExZjhhODA5ODU1N2RmZTQ1ZTgyNTZlODMwYjYwYWNlNjJkNjEzYWMyZjdiMTdiZWQzMWI2ZWFmZjZlMjZjYWYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTc1ZTE1OWY3MjhiODY1YTcyZjk5Y2M2YzZmYzg0NmRlMGI5MzgzM2ZkMjIyMmVkNzNmY2U1YjU1MWU1YjczOScsCiAgICAgICAgJ2QzNTA2ZTBkOWUzYzc5ZWJhNGVmOTdhNTFmZjcxZjVlYWNiNTk1NWFkZDI0MzQ1YzZlZmE2ZmZlZTlmZWQ2OTUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzYzZDkwZDQ0N2IwMGM5Yzk5Y2VhYzA1YjYyNjJlZTA1MzQ0MWM3ZTU1NTUyZmZlNTI2YmFkOGY4M2ZmNDY0MCcsCiAgICAgICAgJzRlMjczYWRmYzczMjIyMTk1M2I0NDUzOTdmMzM2MzE0NWI5YTg5MDA4MTk5ZWNiNjIwMDNjN2YzYmVlOWRlOScKICAgICAgXSwKICAgICAgWwogICAgICAgICc4YjRiNWYxNjVkZjNjMmJlOGM2MjQ0YjViNzQ1NjM4ODQzZTRhNzgxYTE1YmNkMWI2OWY3OWE1NWRmZmRmODBjJywKICAgICAgICAnNGFhZDBhNmY2OGQzMDhiNGIzZmJkNzgxM2FiMGRhMDRmOWUzMzY1NDYxNjJlZTU2YjNlZmYwYzY1ZmQ0ZmQzNicKICAgICAgXSwKICAgICAgWwogICAgICAgICc3MjNjYmFhNmU1ZGI5OTZkNmJmNzcxYzAwYmQ1NDhjN2I3MDBkYmZmYTZjMGU3N2JjYjYxMTU5MjUyMzJmY2RhJywKICAgICAgICAnOTZlODY3YjU1OTVjYzQ5OGE5MjExMzc0ODg4MjRkNmUyNjYwYTA2NTM3Nzk0OTQ4MDFkYzA2OWQ5ZWIzOWY1ZicKICAgICAgXSwKICAgICAgWwogICAgICAgICdlZWJmYTRkNDkzYmViZjk4YmE1ZmVlYzgxMmMyZDNiNTA5NDc5NjEyMzdhOTE5ODM5YTUzM2VjYTBlN2RkN2ZhJywKICAgICAgICAnNWQ5YThjYTM5NzBlZjBmMjY5ZWU3ZWRhZjE3ODA4OWQ5YWU0Y2RjM2E3MTFmNzEyZGRmZDRmZGFlMWRlODk5OScKICAgICAgXSwKICAgICAgWwogICAgICAgICcxMDBmNDRkYTY5NmU3MTY3Mjc5MWQwYTA5YjdiZGU0NTlmMTIxNWEyOWIzYzAzYmZlZmQ3ODM1YjM5YTQ4ZGIwJywKICAgICAgICAnY2RkOWUxMzE5MmEwMGI3NzJlYzhmMzMwMGMwOTA2NjZiN2ZmNGExOGZmNTE5NWFjMGZiZDVjZDYyYmM2NWEwOScKICAgICAgXSwKICAgICAgWwogICAgICAgICdlMTAzMWJlMjYyYzdlZDFiMWRjOTIyN2E0YTA0YzAxN2E3N2Y4ZDQ0NjRmM2IzODUyYzhhY2RlNmU1MzRmZDJkJywKICAgICAgICAnOWQ3MDYxOTI4OTQwNDA1ZTZiYjZhNDE3NjU5NzUzNWFmMjkyZGQ0MTllMWNlZDc5YTQ0ZjE4ZjI5NDU2YTAwZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdmZWVhNmNhZTQ2ZDU1YjUzMGFjMjgzOWYxNDNiZDdlYzVjZjhiMjY2YTQxZDZhZjUyZDVlNjg4ZDkwOTQ2OTZkJywKICAgICAgICAnZTU3YzZiNmM5N2RjZTFiYWIwNmU0ZTEyYmYzZWNkNWM5ODFjODk1N2NjNDE0NDJkMzE1NWRlYmYxODA5MDA4OCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdkYTY3YTkxZDkxMDQ5Y2RjYjM2N2JlNGJlNmZmY2EzY2ZlZWQ2NTdkODA4NTgzZGUzM2ZhOTc4YmMxZWM2Y2IxJywKICAgICAgICAnOWJhY2FhMzU0ODE2NDJiYzQxZjQ2M2Y3ZWM5NzgwZTVkZWM3YWRjNTA4Zjc0MGExN2U5ZWE4ZTI3YTY4YmUxZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc1MzkwNGZhYTBiMzM0Y2RkYTZlMDAwOTM1ZWYyMjE1MWVjMDhkMGY3YmIxMTA2OWY1NzU0NWNjYzFhMzdiN2MwJywKICAgICAgICAnNWJjMDg3ZDBiYzgwMTA2ZDg4YzllY2NhYzIwZDNjMWMxMzk5OTk4MWUxNDQzNDY5OWRjYjA5NmIwMjI3NzFjOCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc4ZTdiY2QwYmQzNTk4M2E3NzE5Y2NhNzc2NGNhOTA2Nzc5YjUzYTA0M2E5YjhiY2FlZmY5NTlmNDNhZDg2MDQ3JywKICAgICAgICAnMTBiNzc3MGIyYTNkYTRiMzk0MDMxMDQyMGNhOTUxNDU3OWU4OGUyZTQ3ZmQ2OGIzZWExMDA0N2U4NDYwMzcyYScKICAgICAgXSwKICAgICAgWwogICAgICAgICczODVlZWQzNGMxY2RmZjIxZTZkMDgxODY4OWI4MWJkZTcxYTdmNGYxODM5N2U2NjkwYTg0MWUxNTk5YzQzODYyJywKICAgICAgICAnMjgzYmViYzNlOGVhMjNmNTY3MDFkZTE5ZTllYmY0NTc2YjMwNGVlYzIwODZkYzhjYzA0NThmZTU1NDJlNTQ1MycKICAgICAgXSwKICAgICAgWwogICAgICAgICc2ZjlkOWI4MDNlY2YxOTE2MzdjNzNhNDQxM2RmYTE4MGZkZGY4NGE1OTQ3ZmJjOWM2MDZlZDg2YzNmYWMzYTcnLAogICAgICAgICc3YzgwYzY4ZTYwMzA1OWJhNjliOGUyYTMwZTQ1YzRkNDdlYTRkZDJmNWMyODEwMDJkODY4OTA2MDNhODQyMTYwJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzMzMjJkNDAxMjQzYzRlMjU4MmEyMTQ3YzEwNGQ2ZWNiZjc3NGQxNjNkYjBmNWU1MzEzYjdlMGU3NDJkMGU2YmQnLAogICAgICAgICc1NmU3MDc5N2U5NjY0ZWY1YmZiMDE5YmM0ZGRhZjliNzI4MDVmNjNlYTI4NzNhZjYyNGYzYTJlOTZjMjhiMmEwJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzg1NjcyYzdkMmRlMGI3ZGEyYmQxNzcwZDg5NjY1ODY4NzQxYjNmOWFmNzY0MzM5NzcyMWQ3NGQyODEzNGFiODMnLAogICAgICAgICc3YzQ4MWI5YjViNDNiMmViNjM3NDA0OWJmYTYyYzJlNWU3N2YxN2ZjYzUyOThmNDRjOGUzMDk0Zjc5MDMxM2E2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzk0OGJmODA5YjE5ODhhNDZiMDZjOWYxOTE5NDEzYjEwZjkyMjZjNjBmNjY4ODMyZmZkOTU5YWY2MGM4MmEwYScsCiAgICAgICAgJzUzYTU2Mjg1NmRjYjY2NDZkYzZiNzRjNWQxYzM0MThjNmQ0ZGZmMDhjOTdjZDJiZWQ0Y2I3Zjg4ZDhjOGU1ODknCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNjI2MGNlN2Y0NjE4MDFjMzRmMDY3Y2UwZjAyODczYThmMWIwZTQ0ZGZjNjk3NTJhY2NlY2Q4MTlmMzhmZDhlOCcsCiAgICAgICAgJ2JjMmRhODJiNmZhNWI1NzFhN2YwOTA0OTc3NmExZWY3ZWNkMjkyMjM4MDUxYzE5OGMxYTg0ZTk1YjJiNGFlMTcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTUwMzdkZTBhZmMxZDhkNDNkODM0ODQxNGJiZjQxMDMwNDNlYzhmNTc1YmZkYzQzMjk1M2NjOGQyMDM3ZmEyZCcsCiAgICAgICAgJzQ1NzE1MzRiYWE5NGQzYjVmOWY5OGQwOWZiOTkwYmRkYmQ1ZjViMDNlYzQ4MWYxMGUwZTVkYzg0MWQ3NTViZGEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTA2MzcyYjBmNGEyMDdhZGY1ZWE5MDVlOGYxNzcxYjRlN2U4ZGJkMWM2YTZjNWI3MjU4NjZhMGFlNGZjZTcyNScsCiAgICAgICAgJzdhOTA4OTc0YmNlMThjZmUxMmEyN2JiMmFkNWE0ODhjZDc0ODRhNzc4NzEwNDg3MGIyNzAzNGY5NGVlZTMxZGQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMjEzYzdhNzE1Y2Q1ZDQ1MzU4ZDBiYmY5ZGMwY2UwMjIwNGIxMGJkZGUyYTNmNTg1NDBhZDY5MDhkMDU1OTc1NCcsCiAgICAgICAgJzRiNmRhZDBiNWFlNDYyNTA3MDEzYWQwNjI0NWJhMTkwYmI0ODUwZjVmMzZhN2VlZGRmZjJjMjc1MzRiNDU4ZjInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNGU3YzI3MmE3YWY0YjM0ZThkYmI5MzUyYTU0MTlhODdlMjgzOGM3MGFkYzYyY2RkZjBjYzNhM2IwOGZiZDUzYycsCiAgICAgICAgJzE3NzQ5Yzc2NmM5ZDBiMThlMTZmZDA5ZjZkZWY2ODFiNTMwYjk2MTRiZmY3ZGQzM2UwYjM5NDE4MTdkY2FhZTYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZmVhNzRlM2RiZTc3OGIxYjEwZjIzOGFkNjE2ODZhYTVjNzZlM2RiMmJlNDMwNTc2MzI0MjdlMjg0MGZiMjdiNicsCiAgICAgICAgJzZlMDU2OGRiOWIwYjEzMjk3Y2Y2NzRkZWNjYjZhZjkzMTI2YjU5NmI5NzNmN2I3NzcwMWQzZGI3ZjIzY2I5NmYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzZlNjQxMTNmNjc3Y2YwZTEwYTI1NzBkNTk5OTY4ZDMxNTQ0ZTE3OWI3NjA0MzI5NTJjMDJhNDQxN2JkZGUzOScsCiAgICAgICAgJ2M5MGRkZjhkZWU0ZTk1Y2Y1NzcwNjZkNzA2ODFmMGQzNWUyYTMzZDJiNTZkMjAzMmI0YjE3NTJkMTkwMWFjMDEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYzczOGM1NmIwM2IyYWJlMWU4MjgxYmFhNzQzZjhmOWE4ZjdjYzY0M2RmMjZjYmVlM2FiMTUwMjQyYmNiYjg5MScsCiAgICAgICAgJzg5M2ZiNTc4OTUxYWQyNTM3ZjcxOGYyZWFjYmZiYmJiODIzMTRlZWY3ODgwY2ZlOTE3ZTczNWQ5Njk5YTg0YzMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDg5NTYyNjU0OGI2NWI4MWUyNjRjNzYzN2M5NzI4NzdkMWQ3MmU1ZjNhOTI1MDE0MzcyZTlmNjU4OGY2YzE0YicsCiAgICAgICAgJ2ZlYmZhYTM4ZjJiYzdlYWU3MjhlYzYwODE4YzM0MGViMDM0MjhkNjMyYmIwNjdlMTc5MzYzZWQ3NWQ3ZDk5MWYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYjhkYTk0MDMyYTk1NzUxOGViMGY2NDMzNTcxZTg3NjFjZWZmYzczNjkzZTg0ZWRkNDkxNTBhNTY0ZjY3NmUwMycsCiAgICAgICAgJzI4MDRkZmE0NDgwNWExZTRkN2M5OWNjOTc2MjgwOGIwOTJjYzU4NGQ5NWZmM2I1MTE0ODhlNGU3NGVmZGY2ZTcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTgwZmVhMTQ0NDFmYjMzYTdkOGFkYWI5NDc1ZDdmYWIyMDE5ZWZmYjUxNTZhNzkyZjFhMTE3NzhlM2MwZGY1ZCcsCiAgICAgICAgJ2VlZDFkZTdmNjM4ZTAwNzcxZTg5NzY4Y2EzY2E5NDQ3MmQxNTVlODBhZjMyMmVhOWZjYjQyOTFiNmFjOWVjNzgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYTMwMTY5N2JkZmNkNzA0MzEzYmE0OGU1MWQ1Njc1NDNmMmExODIwMzFlZmQ2OTE1ZGRjMDdiYmNjNGUxNjA3MCcsCiAgICAgICAgJzczNzBmOTFjZmI2N2U0ZjUwODE4MDlmYTI1ZDQwZjliMTczNWRiZjdjMGExMWExMzBjMGQxYTA0MWUxNzdlYTEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOTBhZDg1YjM4OWQ2YjkzNjQ2M2Y5ZDA1MTI2NzhkZTIwOGNjMzMwYjExMzA3ZmZmYWI3YWM2M2UzZmIwNGVkNCcsCiAgICAgICAgJ2U1MDdhMzYyMGEzODI2MWFmZmRjYmQ5NDI3MjIyYjgzOWFlZmFiZTE1ODI4OTRkOTkxZDRkNDhjYjZlZjE1MCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc4ZjY4YjlkMmY2M2I1ZjMzOTIzOWMxYWQ5ODFmMTYyZWU4OGM1Njc4NzIzZWEzMzUxYjdiNDQ0YzllYzRjMGRhJywKICAgICAgICAnNjYyYTlmMmRiYTA2Mzk4NmRlMWQ5MGMyYjZiZTIxNWRiYmVhMmNmZTk1NTEwYmZkZjIzY2JmNzk1MDFmZmY4MicKICAgICAgXSwKICAgICAgWwogICAgICAgICdlNGYzZmIwMTc2YWY4NWQ2NWZmOTlmZjkxOThjMzYwOTFmNDhlODY1MDM2ODFlM2U2Njg2ZmQ1MDUzMjMxZTExJywKICAgICAgICAnMWU2MzYzM2FkMGVmNGYxYzE2NjFhNmQwZWEwMmI3Mjg2Y2M3ZTc0ZWM5NTFkMWM5ODIyYzM4NTc2ZmViNzNiYycKICAgICAgXSwKICAgICAgWwogICAgICAgICc4YzAwZmE5YjE4ZWJmMzMxZWI5NjE1MzdhNDVhNDI2NmM3MDM0ZjJmMGQ0ZTFkMDcxNmZiNmVhZTIwZWFlMjllJywKICAgICAgICAnZWZhNDcyNjdmZWE1MjFhMWE5ZGMzNDNhMzczNmM5NzRjMmZhZGFmYTgxZTM2YzU0ZTdkMmE0YzY2NzAyNDE0YicKICAgICAgXSwKICAgICAgWwogICAgICAgICdlN2EyNmNlNjlkZDQ4MjlmM2UxMGNlYzBhOWU5OGVkMzE0M2QwODRmMzA4YjkyYzA5OTdmZGRmYzYwY2IzZTQxJywKICAgICAgICAnMmE3NThlMzAwZmE3OTg0YjQ3MWIwMDZhMWFhZmJiMThkMGE2YjJjMDQyMGU4M2UyMGU4YTk0MjFjZjJjZmQ1MScKICAgICAgXSwKICAgICAgWwogICAgICAgICdiNjQ1OWUwZWUzNjYyZWM4ZDIzNTQwYzIyM2JjYmRjNTcxY2JjYjk2N2Q3OTQyNGYzY2YyOWViM2RlNmI4MGVmJywKICAgICAgICAnNjdjODc2ZDA2ZjNlMDZkZTFkYWRmMTZlNTY2MWRiM2M0YjNhZTZkNDhlMzViMmZmMzBiZjBiNjFhNzFiYTQ1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2Q2OGE4MGM4MjgwYmI4NDA3OTMyMzRhYTExOGYwNjIzMWQ2ZjFmYzY3ZTczYzVhNWRlZGEwZjViNDk2OTQzZTgnLAogICAgICAgICdkYjhiYTlmZmY0YjU4NmQwMGM0YjFmOTE3N2IwZTI4YjViMGU3YjhmNzg0NTI5NWEyOTRjODQyNjZiMTMzMTIwJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzMyNGFlZDdkZjY1YzgwNDI1MmRjMDI3MDkwN2EzMGIwOTYxMmFlYjk3MzQ0OWNlYTQwOTU5ODBmYzI4ZDNkNWQnLAogICAgICAgICc2NDhhMzY1Nzc0YjYxZjJmZjEzMGMwYzM1YWVjMWY0ZjE5MjEzYjBjN2UzMzI4NDM5NjcyMjRhZjk2YWI3Yzg0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzRkZjljMTQ5MTljZGU2MWY2ZDUxZGZkYmU1ZmVlNWRjZWVjNDE0M2JhOGQxY2E4ODhlOGJkMzczZmQwNTRjOTYnLAogICAgICAgICczNWVjNTEwOTJkODcyODA1MDk3NGMyM2ExZDg1ZDRiNWQ1MDZjZGMyODg0OTAxOTJlYmFjMDZjYWQxMGQ1ZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc5YzM5MTlhODRhNDc0ODcwZmFlZDhhOWMxY2M2NjAyMTUyMzQ4OTA1NGQ3ZjAzMDhjYmZjOTljOGFjMWY5OGNkJywKICAgICAgICAnZGRiODRmMGY0YTRkZGQ1NzU4NGYwNDRiZjI2MGU2NDE5MDUzMjZmNzZjNjRjOGU2YmU3ZTVlMDNkNGZjNTk5ZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc2MDU3MTcwYjFkZDEyZmRmOGRlMDVmMjgxZDhlMDZiYjkxZTE0OTNhOGI5MWQ0Y2M1YTIxMzgyMTIwYTk1OWU1JywKICAgICAgICAnOWExYWYwYjI2YTZhNDgwN2FkZDlhMmRhZjcxZGYyNjI0NjUxNTJiYzNlZTI0YzY1ZTg5OWJlOTMyMzg1YTJhOCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdhNTc2ZGY4ZTIzYTA4NDExNDIxNDM5YTQ1MThkYTMxODgwY2VmMGZiYTdkNGRmMTJiMWE2OTczZWVjYjk0MjY2JywKICAgICAgICAnNDBhNmJmMjBlNzY2NDBiMmM5MmI5N2FmZTU4Y2Q4MmM0MzJlMTBhN2Y1MTRkOWYzZWU4YmUxMWFlMWIyOGVjOCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc3Nzc4YTc4YzI4ZGVjM2UzMGEwNWZlOTYyOWRlOGMzOGJiMzBkMWY1Y2Y5YTNhMjA4Zjc2Mzg4OWJlNThhZDcxJywKICAgICAgICAnMzQ2MjZkOWFiNWE1YjIyZmY3MDk4ZTEyZjJmZjU4MDA4N2IzODQxMWZmMjRhYzU2M2I1MTNmYzFmZDlmNDNhYycKICAgICAgXSwKICAgICAgWwogICAgICAgICc5Mjg5NTVlZTYzN2E4NDQ2MzcyOWZkMzBlN2FmZDJlZDVmOTYyNzRlNWFkN2U1Y2IwOWVkYTljMDZkOTAzYWMnLAogICAgICAgICdjMjU2MjEwMDNkM2Y0MmE4MjdiNzhhMTMwOTNhOTVlZWFjM2QyNmVmYThhOGQ4M2ZjNTE4MGU5MzViY2QwOTFmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzg1ZDBmZWYzZWM2ZGIxMDkzOTkwNjRmM2EwZTNiMjg1NTY0NWI0YTkwN2FkMzU0NTI3YWFlNzUxNjNkODI3NTEnLAogICAgICAgICcxZjAzNjQ4NDEzYTM4YzBiZTI5ZDQ5NmU1ODJjZjU2NjNlODc1MWU5Njg3NzMzMTU4MmMyMzdhMjRlYjFmOTYyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2ZmMmIwZGNlOTdlZWNlOTdjMWM5YjYwNDE3OThiODVkZmRmYjZkODg4MmRhMjAzMDhmNTQwNDgyNDUyNjA4N2UnLAogICAgICAgICc0OTNkMTNmZWY1MjRiYTE4OGFmNGM0ZGM1NGQwNzkzNmM3YjdlZDZmYjkwZTJjZWIyYzk1MWUwMWYwYzI5OTA3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzgyN2ZiYmU0YjFlODgwZWE5ZWQyYjJlNjMwMWIyMTJiNTdmMWVlMTQ4Y2Q2ZGQyODc4MGU1ZTJjZjg1NmUyNDEnLAogICAgICAgICdjNjBmOWM5MjNjNzI3YjBiNzFiZWYyYzY3ZDFkMTI2ODdmZjdhNjMxODY5MDMxNjZkNjA1YjY4YmFlYzI5M2VjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2VhYTY0OWYyMWY1MWJkYmFlN2JlNGFlMzRjZTZlNTIxN2E1OGZkY2U3ZjQ3ZjlhYTdmM2I1OGZhMjEyMGUyYjMnLAogICAgICAgICdiZTMyNzllZDViYmJiMDNhYzY5YTgwZjg5ODc5YWE1YTAxYTZiOTY1ZjEzZjdlNTlkNDdhNTMwNWJhNWFkOTNkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2U0YTQyZDQzYzVjZjE2OWQ5MzkxZGY2ZGVjZjQyZWU1NDFiNmQ4ZjBjOWExMzc0MDFlMjM2MzJkZGEzNGQyNGYnLAogICAgICAgICc0ZDlmOTJlNzE2ZDFjNzM1MjZmYzk5Y2NmYjhhZDM0Y2U4ODZlZWRmYThkOGU0ZjEzYTdmNzEzMWRlYmE5NDE0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzFlYzgwZmVmMzYwY2JkZDk1NDE2MGZhZGFiMzUyYjZiOTJiNTM1NzZhODhmZWE0OTQ3MTczYjlkNDMwMGJmMTknLAogICAgICAgICdhZWVmZTkzNzU2YjUzNDBkMmYzYTQ5NThhN2FiYmY1ZTAxNDZlNzdmNjI5NWEwN2I2NzFjZGMxY2MxMDdjZWZkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzE0NmE3NzhjMDQ2NzBjMmY5MWIwMGFmNDY4MGRmYThiY2UzNDkwNzE3ZDU4YmE4ODlkZGI1OTI4MzY2NjQyYmUnLAogICAgICAgICdiMzE4ZTBlYzMzNTQwMjhhZGQ2Njk4MjdmOWQ0YjI4NzBhYWE5NzFkMmY3ZTVlZDFkMGIyOTc0ODNkODNlZmQwJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2ZhNTBjMGY2MWQyMmU1ZjA3ZTNhY2ViYjFhYTA3YjEyOGQwMDEyMjA5YTI4Yjk3NzZkNzZhODc5MzE4MGVlZjknLAogICAgICAgICc2Yjg0YzY5MjIzOTdlYmE5YjcyY2QyODcyMjgxYTY4YTVlNjgzMjkzYTU3YTIxM2IzOGNkOGQ3ZDNmNGYyODExJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2RhMWQ2MWQwY2E3MjFhMTFiMWE1YmY2YjdkODhlODQyMWEyODhhYjVkNWJiYTUyMjBlNTNkMzJiNWYwNjdlYzInLAogICAgICAgICc4MTU3ZjU1YTdjOTkzMDZjNzljMDc2NjE2MWM5MWUyOTY2YTczODk5ZDI3OWI0OGE2NTVmYmEwZjFhZDgzNmYxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2E4ZTI4MmZmMGM5NzA2OTA3MjE1ZmY5OGU4ZmQ0MTY2MTUzMTFkZTA0NDZmMWUwNjJhNzNiMDYxMGQwNjRlMTMnLAogICAgICAgICc3Zjk3MzU1YjhkYjgxYzA5YWJmYjdmM2M1YjI1MTU4ODhiNjc5YTNlNTBkZDZiZDZjZWY3YzczMTExZjRjYzBjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzE3NGE1M2I5YzlhMjg1ODcyZDM5ZTU2ZTY5MTNjYWIxNWQ1OWIxZmE1MTI1MDhjMDIyZjM4MmRlODMxOTQ5N2MnLAogICAgICAgICdjY2M5ZGMzN2FiZmM5YzE2NTdiNDE1NWYyYzQ3ZjllNjY0NmIzYTFkOGNiOTg1NDM4M2RhMTNhYzA3OWFmYTczJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzk1OTM5Njk4MTk0Mzc4NWMzZDNlNTdlZGY1MDE4Y2RiZTAzOWU3MzBlNDkxOGIzZDg4NGZkZmYwOTQ3NWI3YmEnLAogICAgICAgICcyZTdlNTUyODg4YzMzMWRkOGJhMDM4NmE0YjljZDY4NDljNjUzZjY0Yzg3MDkzODVlOWI4YWJmODc1MjRmMmZkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2QyYTYzYTUwYWU0MDFlNTZkNjQ1YTExNTNiMTA5YThmY2NhMGE0M2Q1NjFmYmEyZGJiNTEzNDBjOWQ4MmIxNTEnLAogICAgICAgICdlODJkODZmYjY0NDNmY2I3NTY1YWVlNThiMjk0ODIyMGE3MGY3NTBhZjQ4NGNhNTJkNDE0MjE3NGRjZjg5NDA1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzY0NTg3ZTIzMzU0NzFlYjg5MGVlNzg5NmQ3Y2ZkYzg2NmJhY2JkYmQzODM5MzE3YjM0MzZmOWI0NTYxN2UwNzMnLAogICAgICAgICdkOTlmY2RkNWJmNjkwMmUyYWU5NmRkNjQ0N2MyOTlhMTg1YjkwYTM5MTMzYWVhYjM1ODI5OWU1ZTlmYWY2NTg5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzg0ODFiZGUwZTRlNGQ4ODViM2E1NDZkM2U1NDlkZTA0MmYwYWE2Y2VhMjUwZTdmZDM1OGQ2Yzg2ZGQ0NWU0NTgnLAogICAgICAgICczOGVlN2I4Y2JhNTQwNGRkODRhMjViZjM5Y2VjYjJjYTkwMGE3OWM0MmIyNjJlNTU2ZDY0YjFiNTk3NzkwNTdlJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzEzNDY0YTU3YTc4MTAyYWE2MmI2OTc5YWU4MTdmNDYzN2ZmY2ZlZDNjNGIxY2UzMGJjZDYzMDNmNmNhZjY2NmInLAogICAgICAgICc2OWJlMTU5MDA0NjE0NTgwZWY3ZTQzMzQ1M2NjYjBjYTQ4ZjMwMGE4MWQwOTQyZTEzZjQ5NWE5MDdmNmVjYzI3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2JjNGE5ZGY1YjcxM2ZlMmU5YWVmNDMwYmNjMWRjOTdhMGNkOWNjZWRlMmYyODU4OGNhZGEzYTBkMmQ4M2YzNjYnLAogICAgICAgICdkM2E4MWNhNmU3ODVjMDYzODM5MzdhZGY0Yjc5OGNhYTZlOGE5ZmJmYTU0N2IxNmQ3NThkNjY2NTgxZjMzYzEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOGMyOGE5N2JmODI5OGJjMGQyM2Q4Yzc0OTQ1MmEzMmU2OTRiNjVlMzBhOTQ3MmEzOTU0YWIzMGZlNTMyNGNhYScsCiAgICAgICAgJzQwYTMwNDYzYTMzMDUxOTMzNzhmZWRmMzFmN2NjMGViN2FlNzg0ZjA0NTFjYjk0NTllNzFkYzczY2JlZjk0ODInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOGVhOTY2NjEzOTUyN2E4YzFkZDk0Y2U0ZjA3MWZkMjNjOGIzNTBjNWE0YmIzMzc0OGM0YmExMTFmYWNjYWUwJywKICAgICAgICAnNjIwZWZhYmJjOGVlMjc4MmUyNGU3YzBjZmI5NWM1ZDczNWI3ODNiZTljZjBmOGU5NTVhZjM0YTMwZTYyYjk0NScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkZDM2MjVmYWVmNWJhMDYwNzQ2Njk3MTZiYmQzNzg4ZDg5YmRkZTgxNTk1OTk2ODA5MmY3NmNjNGViOWE5Nzg3JywKICAgICAgICAnN2ExODhmYTM1MjBlMzBkNDYxZGEyNTAxMDQ1NzMxY2E5NDE0NjE5ODI4ODMzOTU5MzdmNjhkMDBjNjQ0YTU3MycKICAgICAgXSwKICAgICAgWwogICAgICAgICdmNzEwZDc5ZDllYjk2MjI5N2U0ZjYyMzJiNDBlOGY3ZmViMmJjNjM4MTQ2MTRkNjkyYzEyZGU3NTI0MDgyMjFlJywKICAgICAgICAnZWE5OGU2NzIzMmQzYjMyOTVkM2I1MzU1MzIxMTVjY2FjODYxMmM3MjE4NTE2MTc1MjZhZTQ3YTljNzdiZmM4MicKICAgICAgXQogICAgXQogIH0sCiAgbmFmOiB7CiAgICB3bmQ6IDcsCiAgICBwb2ludHM6IFsKICAgICAgWwogICAgICAgICdmOTMwOGEwMTkyNThjMzEwNDkzNDRmODVmODlkNTIyOWI1MzFjODQ1ODM2Zjk5YjA4NjAxZjExM2JjZTAzNmY5JywKICAgICAgICAnMzg4ZjdiMGY2MzJkZTgxNDBmZTMzN2U2MmEzN2YzNTY2NTAwYTk5OTM0YzIyMzFiNmNiOWZkNzU4NGI4ZTY3MicKICAgICAgXSwKICAgICAgWwogICAgICAgICcyZjhiZGU0ZDFhMDcyMDkzNTViNGE3MjUwYTVjNTEyOGU4OGI4NGJkZGM2MTlhYjdjYmE4ZDU2OWIyNDBlZmU0JywKICAgICAgICAnZDhhYzIyMjYzNmU1ZTNkNmQ0ZGJhOWRkYTZjOWM0MjZmNzg4MjcxYmFiMGQ2ODQwZGNhODdkM2FhNmFjNjJkNicKICAgICAgXSwKICAgICAgWwogICAgICAgICc1Y2JkZjA2NDZlNWRiNGVhYTM5OGYzNjVmMmVhN2EwZTNkNDE5YjdlMDMzMGUzOWNlOTJiZGRlZGNhYzRmOWJjJywKICAgICAgICAnNmFlYmNhNDBiYTI1NTk2MGEzMTc4ZDZkODYxYTU0ZGJhODEzZDBiODEzZmRlN2I1YTUwODI2MjgwODcyNjRkYScKICAgICAgXSwKICAgICAgWwogICAgICAgICdhY2Q0ODRlMmYwYzdmNjUzMDlhZDE3OGE5ZjU1OWFiZGUwOTc5Njk3NGM1N2U3MTRjMzVmMTEwZGZjMjdjY2JlJywKICAgICAgICAnY2MzMzg5MjFiMGE3ZDlmZDY0MzgwOTcxNzYzYjYxZTlhZGQ4ODhhNDM3NWY4ZTBmMDVjYzI2MmFjNjRmOWMzNycKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NzRhZTdmODU4YTk0MTFlNWVmNDI0NmI3MGM2NWFhYzU2NDk5ODBiZTVjMTc4OTFiYmVjMTc4OTVkYTAwOGNiJywKICAgICAgICAnZDk4NGEwMzJlYjZiNWUxOTAyNDNkZDU2ZDdiN2IzNjUzNzJkYjFlMmRmZjlkNmE4MzAxZDc0YzljOTUzYzYxYicKICAgICAgXSwKICAgICAgWwogICAgICAgICdmMjg3NzNjMmQ5NzUyODhiYzdkMWQyMDVjMzc0ODY1MWIwNzVmYmM2NjEwZTU4Y2RkZWVkZGY4ZjE5NDA1YWE4JywKICAgICAgICAnYWIwOTAyZThkODgwYTg5NzU4MjEyZWI2NWNkYWY0NzNhMWEwNmRhNTIxZmE5MWYyOWI1Y2I1MmRiMDNlZDgxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2Q3OTI0ZDRmN2Q0M2VhOTY1YTQ2NWFlMzA5NWZmNDExMzFlNTk0NmYzYzg1Zjc5ZTQ0YWRiY2Y4ZTI3ZTA4MGUnLAogICAgICAgICc1ODFlMjg3MmE4NmM3MmE2ODM4NDJlYzIyOGNjNmRlZmVhNDBhZjJiZDg5NmQzYTVjNTA0ZGM5ZmY2YTI2YjU4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2RlZmRlYTRjZGI2Nzc3NTBhNDIwZmVlODA3ZWFjZjIxZWI5ODk4YWU3OWI5NzY4NzY2ZTRmYWEwNGEyZDRhMzQnLAogICAgICAgICc0MjExYWIwNjk0NjM1MTY4ZTk5N2IwZWFkMmE5M2RhZWNlZDFmNGEwNGE5NWMwZjZjZmIxOTlmNjllNTZlYjc3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzJiNGVhMGE3OTdhNDQzZDI5M2VmNWNmZjQ0NGY0OTc5ZjA2YWNmZWJkN2U4NmQyNzc0NzU2NTYxMzgzODViNmMnLAogICAgICAgICc4NWU4OWJjMDM3OTQ1ZDkzYjM0MzA4M2I1YTFjODYxMzFhMDFmNjBjNTAyNjk3NjNiNTcwYzg1NGU1YzA5YjdhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzM1MmJiZjRhNGNkZDEyNTY0ZjkzZmEzMzJjZTMzMzMwMWQ5YWQ0MDI3MWY4MTA3MTgxMzQwYWVmMjViZTU5ZDUnLAogICAgICAgICczMjFlYjQwNzUzNDhmNTM0ZDU5YzE4MjU5ZGRhM2UxZjRhMWIzYjJlNzFiMTAzOWM2N2JkM2Q4YmNmODE5OThjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzJmYTIxMDRkNmIzOGQxMWIwMjMwMDEwNTU5ODc5MTI0ZTQyYWI4ZGZlZmY1ZmYyOWRjOWNkYWRkNGVjYWNjM2YnLAogICAgICAgICcyZGUxMDY4Mjk1ZGQ4NjViNjQ1NjkzMzViZDVkZDgwMTgxZDcwZWNmYzg4MjY0ODQyM2JhNzZiNTMyYjdkNjcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOTI0ODI3OWIwOWI0ZDY4ZGFiMjFhOWIwNjZlZGRhODMyNjNjM2Q4NGUwOTU3MmUyNjljYTBjZDdmNTQ1MzcxNCcsCiAgICAgICAgJzczMDE2ZjdiZjIzNGFhZGU1ZDFhYTcxYmRlYTJiMWZmM2ZjMGRlMmE4ODc5MTJmZmU1NGEzMmNlOTdjYjM0MDInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZGFlZDRmMmJlM2E4YmYyNzhlNzAxMzJmYjBiZWI3NTIyZjU3MGUxNDRiZjYxNWMwN2U5OTZkNDQzZGVlODcyOScsCiAgICAgICAgJ2E2OWRjZTRhN2Q2Yzk4ZThkNGExYWNhODdlZjhkNzAwM2Y4M2MyMzBmM2FmYTcyNmFiNDBlNTIyOTBiZTFjNTUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYzQ0ZDEyYzcwNjVkODEyZThhY2YyOGQ3Y2JiMTlmOTAxMWVjZDllOWZkZjI4MWIwZTZhM2I1ZTg3ZDIyZTdkYicsCiAgICAgICAgJzIxMTlhNDYwY2UzMjZjZGM3NmM0NTkyNmM5ODJmZGFjMGUxMDZlODYxZWRmNjFjNWEwMzkwNjNmMGUwZTY0ODInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNmEyNDViZjZkYzY5ODUwNGM4OWEyMGNmZGVkNjA4NTMxNTJiNjk1MzM2YzI4MDYzYjYxYzY1Y2JkMjY5ZTZiNCcsCiAgICAgICAgJ2UwMjJjZjQyYzJiZDRhNzA4YjNmNTEyNmYxNmEyNGFkOGIzM2JhNDhkMDQyM2I2ZWZkNWU2MzQ4MTAwZDhhODInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTY5N2ZmYTZmZDlkZTYyN2MwNzdlM2QyZmU1NDEwODRjZTEzMzAwYjBiZWMxMTQ2Zjk1YWU1N2YwZDBiZDZhNScsCiAgICAgICAgJ2I5YzM5OGYxODY4MDZmNWQyNzU2MTUwNmU0NTU3NDMzYTJjZjE1MDA5ZTQ5OGFlN2FkZWU5ZDYzZDAxYjIzOTYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNjA1YmRiMDE5OTgxNzE4Yjk4NmQwZjA3ZTgzNGNiMGQ5ZGViODM2MGZmYjdmNjFkZjk4MjM0NWVmMjdhNzQ3OScsCiAgICAgICAgJzI5NzJkMmRlNGY4ZDIwNjgxYTc4ZDkzZWM5NmZlMjNjMjZiZmFlODRmYjE0ZGI0M2IwMWUxZTkwNTZiOGM0OScKICAgICAgXSwKICAgICAgWwogICAgICAgICc2MmQxNGRhYjQxNTBiZjQ5NzQwMmZkYzQ1YTIxNWUxMGRjYjAxYzM1NDk1OWIxMGNmZTMxYzdlOWQ4N2ZmMzNkJywKICAgICAgICAnODBmYzA2YmQ4Y2M1YjAxMDk4MDg4YTE5NTBlZWQwZGIwMWFhMTMyOTY3YWI0NzIyMzVmNTY0MjQ4M2IyNWVhZicKICAgICAgXSwKICAgICAgWwogICAgICAgICc4MGM2MGFkMDA0MGYyN2RhZGU1YjRiMDZjNDA4ZTU2YjJjNTBlOWY1NmI5YjhiNDI1ZTU1NWMyZjg2MzA4YjZmJywKICAgICAgICAnMWMzODMwM2YxY2M1YzMwZjI2ZTY2YmFkN2ZlNzJmNzBhNjVlZWQ0Y2JlNzAyNGViMWFhMDFmNTY0MzBiZDU3YScKICAgICAgXSwKICAgICAgWwogICAgICAgICc3YTkzNzVhZDYxNjdhZDU0YWE3NGM2MzQ4Y2M1NGQzNDRjYzVkYzk0ODdkODQ3MDQ5ZDVlYWJiMGZhMDNjOGZiJywKICAgICAgICAnZDBlM2ZhOWVjYTg3MjY5MDk1NTllMGQ3OTI2OTA0NmJkYzU5ZWExMGM3MGNlMmIwMmQ0OTllYzIyNGRjN2Y3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2Q1MjhlY2Q5YjY5NmI1NGM5MDdhOWVkMDQ1NDQ3YTc5YmI0MDhlYzM5YjY4ZGY1MDRiYjUxZjQ1OWJjM2ZmYzknLAogICAgICAgICdlZWNmNDEyNTMxMzZlNWY5OTk2NmYyMTg4MWZkNjU2ZWJjNDM0NTQwNWM1MjBkYmMwNjM0NjViNTIxNDA5OTMzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzQ5MzcwYTRiNWY0MzQxMmVhMjVmNTE0ZThlY2RhZDA1MjY2MTE1ZTRhN2VjYjEzODcyMzE4MDhmOGI0NTk2MycsCiAgICAgICAgJzc1OGYzZjQxYWZkNmVkNDI4YjMwODFiMDUxMmZkNjJhNTRjM2YzYWZiYjViNjc2NGI2NTMwNTJhMTI5NDljOWEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzdmMjMwOTM2ZWU4OGNiYmQ3M2RmOTMwZDY0NzAyZWY4ODFkODExZTBlMTQ5OGUyZjFjMTNlYjFmYzM0NWQ3NCcsCiAgICAgICAgJzk1OGVmNDJhNzg4NmI2NDAwYTA4MjY2ZTliYTFiMzc4OTZjOTUzMzBkOTcwNzdjYmJlOGViM2M3NjcxYzYwZDYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZjJkYWM5OTFjYzRjZTRiOWVhNDQ4ODdlNWM3YzBiY2U1OGM4MDA3NGFiOWQ0ZGJhZWIyODUzMWI3NzM5ZjUzMCcsCiAgICAgICAgJ2UwZGVkYzliM2IyZjhkYWQ0ZGExZjMyZGVjMjUzMWRmOWViNWZiZWIwNTk4ZTRmZDFhMTE3ZGJhNzAzYTNjMzcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNDYzYjNkOWY2NjI2MjFmYjFiNGJlOGZiYmUyNTIwMTI1YTIxNmNkZmM5ZGFlM2RlYmNiYTQ4NTBjNjkwZDQ1YicsCiAgICAgICAgJzVlZDQzMGQ3OGMyOTZjMzU0MzExNDMwNmRkODYyMmQ3YzYyMmUyN2M5NzBhMWRlMzFjYjM3N2IwMWFmNzMwN2UnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZjE2ZjgwNDI0NGU0NmUyYTA5MjMyZDRhZmYzYjU5OTc2Yjk4ZmFjMTQzMjhhMmQxYTMyNDk2YjQ5OTk4ZjI0NycsCiAgICAgICAgJ2NlZGFiZDliODIyMDNmN2UxM2QyMDZmY2RmNGUzM2Q5MmE2YzUzYzI2ZTVjY2UyNmQ2NTc5OTYyYzRlMzFkZjYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnY2FmNzU0MjcyZGM4NDU2M2IwMzUyYjdhMTQzMTFhZjU1ZDI0NTMxNWFjZTI3YzY1MzY5ZTE1ZjcxNTFkNDFkMScsCiAgICAgICAgJ2NiNDc0NjYwZWYzNWY1ZjJhNDFiNjQzZmE1ZTQ2MDU3NWY0ZmE5Yjc5NjIyMzJhNWMzMmY5MDgzMThhMDQ0NzYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMjYwMGNhNGIyODJjYjk4NmY4NWQwZjE3MDk5NzlkOGI0NGEwOWMwN2NiODZkN2MxMjQ0OTdiYzg2ZjA4MjEyMCcsCiAgICAgICAgJzQxMTliODg3NTNjMTViZDZhNjkzYjAzZmNkZGJiNDVkNWFjNmJlNzRhYjVmMGVmNDRiMGJlOTQ3NWE3ZTRiNDAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzYzNWNhNzJkN2U4NDMyYzMzOGVjNTNjZDEyMjIwYmMwMWM0ODY4NWUyNGY3ZGM4YzYwMmE3NzQ2OTk4ZTQzNScsCiAgICAgICAgJzkxYjY0OTYwOTQ4OWQ2MTNkMWQ1ZTU5MGY3OGU2ZDc0ZWNmYzA2MWQ1NzA0OGJhZDllNzZmMzAyYzViOWM2MScKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NTRlMzIzOWYzMjU1NzBjZGJiZjRhODdkZWVlOGE2NmI3ZjJiMzM0NzlkNDY4ZmJjMWE1MDc0M2JmNTZjYzE4JywKICAgICAgICAnNjczZmI4NmU1YmRhMzBmYjNjZDBlZDMwNGVhNDlhMDIzZWUzM2QwMTk3YTY5NWQwYzVkOTgwOTNjNTM2NjgzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2UzZTZiZDEwNzFhMWU5NmFmZjU3ODU5YzgyZDU3MGYwMzMwODAwNjYxZDFjOTUyZjlmZTI2OTQ2OTFkOWI5ZTgnLAogICAgICAgICc1OWM5ZTBiYmEzOTRlNzZmNDBjMGFhNTgzNzlhM2NiNmE1YTIyODM5OTNlOTBjNDE2NzAwMmFmNDkyMGUzN2Y1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzE4NmI0ODNkMDU2YTAzMzgyNmFlNzNkODhmNzMyOTg1YzRjY2IxZjMyYmEzNWY0YjRjYzQ3ZmRjZjA0YWE2ZWInLAogICAgICAgICczYjk1MmQzMmM2N2NmNzdlMmUxNzQ0NmUyMDQxODBhYjIxZmI4MDkwODk1MTM4YjRhNGE3OTdmODZlODA4ODhiJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2RmOWQ3MGE2Yjk4NzZjZTU0NGM5ODU2MWY0YmU0ZjcyNTQ0MmU2ZDJiNzM3ZDljOTFhODMyMTcyNGNlMDk2M2YnLAogICAgICAgICc1NWViMmRhZmQ4NGQ2Y2NkNWY4NjJiNzg1ZGMzOWQ0YWIxNTcyMjI3MjBlZjlkYTIxN2I4YzQ1Y2YyYmEyNDE3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzVlZGQ1Y2MyM2M1MWU4N2E0OTdjYTgxNWQ1ZGNlMGY4YWI1MjU1NGY4NDllZDg5OTVkZTY0YzVmMzRjZTcxNDMnLAogICAgICAgICdlZmFlOWM4ZGJjMTQxMzA2NjFlOGNlYzAzMGM4OWFkMGMxM2M2NmMwZDE3YTI5MDVjZGM3MDZhYjczOTlhODY4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzI5MDc5OGMyYjY0NzY4MzBkYTEyZmUwMjI4N2U5ZTc3N2FhM2ZiYTFjMzU1YjE3YTcyMmQzNjJmODQ2MTRmYmEnLAogICAgICAgICdlMzhkYTc2ZGNkNDQwNjIxOTg4ZDAwYmNmNzlhZjI1ZDViMjljMDk0ZGIyYTIzMTQ2ZDAwM2FmZDQxOTQzZTdhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2FmM2M0MjNhOTVkOWY1YjMwNTQ3NTRlZmExNTBhYzM5Y2QyOTU1MmZlMzYwMjU3MzYyZGZkZWNlZjQwNTNiNDUnLAogICAgICAgICdmOThhM2ZkODMxZWIyYjc0OWE5M2IwZTZmMzVjZmI0MGM4Y2Q1YWE2NjdhMTU1ODFiYzJmZWRlZDQ5OGZkOWM2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc2NmRiYjI0ZDEzNGU3NDVjY2NhYTI4Yzk5YmYyNzQ5MDZiYjY2YjI2ZGNmOThkZjhkMmZlZDUwZDg4NDI0OWEnLAogICAgICAgICc3NDRiMTE1MmVhY2JlNWUzOGRjYzg4Nzk4MGRhMzhiODk3NTg0YTY1ZmEwNmNlZGQyYzkyNGY5N2NiYWM1OTk2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzU5ZGJmNDZmOGM5NDc1OWJhMjEyNzdjMzM3ODRmNDE2NDVmN2I0NGY2YzU5NmE1OGNlOTJlNjY2MTkxYWJlM2UnLAogICAgICAgICdjNTM0YWQ0NDE3NWZiYzMwMGY0ZWE2Y2U2NDgzMDlhMDQyY2U3MzlhNzkxOTc5OGNkODVlMjE2YzRhMzA3ZjZlJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2YxM2FkYTk1MTAzYzQ1MzczMDVlNjkxZTc0ZTlhNGE4ZGQ2NDdlNzExYTk1ZTczY2I2MmRjNjAxOGNmZDg3YjgnLAogICAgICAgICdlMTM4MTdiNDRlZTE0ZGU2NjNiZjRiYzgwODM0MWYzMjY5NDllMjFhNmE3NWMyNTcwNzc4NDE5YmRhZjU3MzNkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc3NTRiNGZhMGU4YWNlZDA2ZDQxNjdhMmM1OWNjYTRjZGExODY5YzA2ZWJhZGZiNjQ4ODU1MDAxNWE4ODUyMmMnLAogICAgICAgICczMGU5M2U4NjRlNjY5ZDgyMjI0Yjk2N2MzMDIwYjhmYThkMWU0ZTM1MGI2Y2JjYzUzN2E0OGI1Nzg0MTE2M2EyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzk0OGRjYWRmNTk5MGUwNDhhYTM4NzRkNDZhYmVmOWQ3MDE4NThmOTVkZTgwNDFkMmE2ODI4Yzk5ZTIyNjI1MTknLAogICAgICAgICdlNDkxYTQyNTM3ZjZlNTk3ZDVkMjhhMzIyNGIxYmMyNWRmOTE1NGVmYmQyZWYxZDJjYmJhMmNhZTUzNDdkNTdlJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc5NjI0MTQ0NTBjNzZjMTY4OWM3YjQ4ZjgyMDJlYzM3ZmIyMjRjZjVhYzBiZmExNTcwMzI4YThhM2Q3Yzc3YWInLAogICAgICAgICcxMDBiNjEwZWM0ZmZiNDc2MGQ1YzFmYzEzM2VmNmY2YjEyNTA3YTA1MWYwNGFjNTc2MGFmYTViMjlkYjgzNDM3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzM1MTQwODc4MzQ5NjRiNTRiMTViMTYwNjQ0ZDkxNTQ4NWExNjk3NzIyNWI4ODQ3YmIwZGQwODUxMzdlYzQ3Y2EnLAogICAgICAgICdlZjBhZmJiMjA1NjIwNTQ0OGUxNjUyYzQ4ZTgxMjdmYzYwMzllNzdjMTVjMjM3OGI3ZTdkMTVhMGRlMjkzMzExJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2QzY2MzMGFkNmI0ODNlNGJjNzljZTJjOWRkOGJjNTQ5OTNlOTQ3ZWI4ZGY3ODdiNDQyOTQzZDNmN2I1MjdlYWYnLAogICAgICAgICc4YjM3OGEyMmQ4MjcyNzhkODljNWU5YmU4Zjk1MDhhZTNjMmFkNDYyOTAzNTg2MzBhZmIzNGRiMDRlZWRlMGE0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzE2MjRkODQ3ODA3MzI4NjBjZTFjNzhmY2JmZWZlMDhiMmIyOTgyM2RiOTEzZjY0OTM5NzViYTBmZjQ4NDc2MTAnLAogICAgICAgICc2ODY1MWNmOWI2ZGE5MDNlMDkxNDQ0OGM2Y2Q5ZDRjYTg5Njg3OGY1MjgyYmU0YzhjYzA2ZTJhNDA0MDc4NTc1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzczM2NlODBkYTk1NWE4YTI2OTAyYzk1NjMzZTYyYTk4NTE5MjQ3NGI1YWYyMDdkYTZkZjdiNGZkNWZjNjFjZDQnLAogICAgICAgICdmNTQzNWEyYmQyYmFkZjdkNDg1YTRkOGI4ZGI5ZmNjZTNlMWVmOGUwMjAxZTQ1NzhjNTQ2NzNiYzFkYzVlYTFkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzE1ZDk0NDEyNTQ5NDUwNjRjZjFhMWMzM2JiZDNiNDlmODk2NmM1MDkyMTcxZTY5OWVmMjU4ZGZhYjgxYzA0NWMnLAogICAgICAgICdkNTZlYjMwYjY5NDYzZTcyMzRmNTEzN2I3M2I4NDE3NzQzNDgwMGJhY2ViZmM2ODVmYzM3YmJlOWVmZTQwNzBkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2ExZDBmY2YyZWM5ZGU2NzViNjEyMTM2ZTVjZTcwZDI3MWMyMTQxN2M5ZDJiOGFhYWFjMTM4NTk5ZDA3MTc5NDAnLAogICAgICAgICdlZGQ3N2Y1MGJjYjVhM2NhYjJlOTA3MzczMDk2NjdmMjY0MTQ2MmE1NDA3MGYzZDUxOTIxMmQzOWMxOTdhNjI5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2UyMmZiZTE1YzBhZjhjY2M1NzgwYzA3MzVmODRkYmU5YTc5MGJhZGVlODI0NWMwNmM3Y2EzNzMzMWNiMzY5ODAnLAogICAgICAgICdhODU1YmFiYWQ1Y2Q2MGM4OGI0MzBhNjlmNTNhMWE3YTM4Mjg5MTU0OTY0Nzk5YmU0M2QwNmQ3N2QzMWRhMDYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzExMDkxZGQ5ODYwZThlMjBlZTEzNDczYzExNTVmNWY2OTYzNWUzOTQ3MDRlYWE3NDAwOTQ1MjI0NmNmYTliMycsCiAgICAgICAgJzY2ZGI2NTZmODdkMWYwNGZmZmQxZjA0Nzg4YzA2ODMwODcxZWM1YTY0ZmVlZTY4NWJkODBmMGIxMjg2ZDgzNzQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzRjMWZkMDRkMzAxYmU4OWIzMWMwNDQyZDNlNmFjMjQ4ODM5MjhiNDVhOTM0MDc4MTg2N2Q0MjMyZWMyZGJkZicsCiAgICAgICAgJzk0MTQ2ODVlOTdiMWI1OTU0YmQ0NmY3MzAxNzQxMzZkNTdmMWNlZWI0ODc0NDNkYzUzMjE4NTdiYTczYWJlZScKICAgICAgXSwKICAgICAgWwogICAgICAgICdmMjE5ZWE1ZDZiNTQ3MDFjMWMxNGRlNWI1NTdlYjQyYThkMTNmM2FiYmNkMDhhZmZjYzJhNWU2YjA0OWI4ZDYzJywKICAgICAgICAnNGNiOTU5NTdlODNkNDBiMGY3M2FmNDU0NGNjY2Y2YjFmNGIwOGQzYzA3YjI3ZmI4ZDhjMjk2MmE0MDA3NjZkMScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkN2I4NzQwZjc0YThmYmFhYjFmNjgzZGI4ZjQ1ZGUyNjU0M2E1NDkwYmNhNjI3MDg3MjM2OTEyNDY5YTBiNDQ4JywKICAgICAgICAnZmE3Nzk2ODEyOGQ5YzkyZWUxMDEwZjMzN2FkNDcxN2VmZjE1ZGI1ZWQzYzA0OWIzNDExZTAzMTVlYWE0NTkzYicKICAgICAgXSwKICAgICAgWwogICAgICAgICczMmQzMWMyMjJmOGY2ZjBlZjg2ZjdjOThkM2EzMzM1ZWFkNWJjZDMyYWJkZDk0Mjg5ZmU0ZDMwOTFhYTgyNGJmJywKICAgICAgICAnNWYzMDMyZjU4OTIxNTZlMzljY2QzZDc5MTViOWUxZGEyZTZkYWM5ZTZmMjZlOTYxMTE4ZDE0Yjg0NjJlMTY2MScKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NDYxZjM3MTkxNGFiMzI2NzEwNDVhMTU1ZDk4MzFlYTg3OTNkNzdjZDU5NTkyYzQzNDBmODZjYmMxODM0N2I1JywKICAgICAgICAnOGVjMGJhMjM4Yjk2YmVjMGNiZGRkY2FlMGFhNDQyNTQyZWVlMWZmNTBjOTg2ZWE2YjM5ODQ3YjNjYzA5MmZmNicKICAgICAgXSwKICAgICAgWwogICAgICAgICdlZTA3OWFkYjFkZjE4NjAwNzQzNTZhMjVhYTM4MjA2YTZkNzE2YjJjM2U2NzQ1M2QyODc2OThiYWQ3YjJiMmQ2JywKICAgICAgICAnOGRjMjQxMmFhZmUzYmU1YzRjNWYzN2UwZWNjNWY5ZjZhNDQ2OTg5YWYwNGM0ZTI1ZWJhYWM0NzllYzFjOGMxZScKICAgICAgXSwKICAgICAgWwogICAgICAgICcxNmVjOTNlNDQ3ZWM4M2YwNDY3YjE4MzAyZWU2MjBmN2U2NWRlMzMxODc0YzlkYzcyYmZkODYxNmJhOWRhNmI1JywKICAgICAgICAnNWU0NjMxMTUwZTYyZmI0MGQwZThjMmE3Y2E1ODA0YTM5ZDU4MTg2YTUwZTQ5NzEzOTYyNjc3OGUyNWIwNjc0ZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdlYWE1Zjk4MGMyNDVmNmYwMzg5NzgyOTBhZmE3MGI2YmQ4ODU1ODk3Zjk4YjZhYTQ4NWI5NjA2NWQ1MzdiZDk5JywKICAgICAgICAnZjY1ZjVkM2UyOTJjMmUwODE5YTUyODM5MWM5OTQ2MjRkNzg0ODY5ZDdlNmVhNjdmYjE4MDQxMDI0ZWRjMDdkYycKICAgICAgXSwKICAgICAgWwogICAgICAgICc3OGM5NDA3NTQ0YWMxMzI2OTJlZTE5MTBhMDI0Mzk5NThhZTA0ODc3MTUxMzQyZWE5NmM0YjZiMzVhNDlmNTEnLAogICAgICAgICdmM2UwMzE5MTY5ZWI5Yjg1ZDU0MDQ3OTU1MzlhNWU2OGZhMWZiZDU4M2MwNjRkMjQ2MmI2NzVmMTk0YTNkZGI0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzQ5NGY0YmUyMTlhMWE3NzAxNmRjZDgzODQzMWFlYTAwMDFjZGM4YWU3YTZmYzY4ODcyNjU3OGQ5NzAyODU3YTUnLAogICAgICAgICc0MjI0MmE5NjkyODNhNWYzMzliYTdmMDc1ZTM2YmEyYWY5MjVjZTMwZDc2N2VkNmU1NWY0YjAzMTg4MGQ1NjJjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2E1OThhODAzMGRhNmQ4NmM2YmM3ZjJmNTE0NGVhNTQ5ZDI4MjExZWE1OGZhYTcwZWJmNGMxZTY2NWMxZmU5YjUnLAogICAgICAgICcyMDRiNWQ2Zjg0ODIyYzMwN2U0YjRhNzE0MDczN2FlYzIzZmM2M2I2NWIzNWY4NmExMDAyNmRiZDJkODY0ZTZiJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2M0MTkxNjM2NWFiYjJiNWQwOTE5MmY1ZjJkYmVhZmVjMjA4ZjAyMGYxMjU3MGExODRkYmFkYzNlNTg1OTU5OTcnLAogICAgICAgICc0ZjE0MzUxZDAwODdlZmE0OWQyNDViMzI4OTg0OTg5ZDVjYWY5NDUwZjM0YmZjMGVkMTZlOTZiNThmYTk5MTMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODQxZDYwNjNhNTg2ZmE0NzVhNzI0NjA0ZGEwM2JjNWI5MmEyZTBkMmUwYTM2YWNmZTRjNzNhNTUxNDc0Mjg4MScsCiAgICAgICAgJzczODY3ZjU5YzA2NTllODE5MDRmOWExYzc1NDM2OThlNjI1NjJkNjc0NGMxNjljZTdhMzZkZTAxYThkNjE1NCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc1ZTk1YmIzOTlhNjk3MWQzNzYwMjY5NDdmODliZGUyZjI4MmIzMzgxMDkyOGJlNGRlZDExMmFjNGQ3MGUyMGQ1JywKICAgICAgICAnMzlmMjNmMzY2ODA5MDg1YmVlYmZjNzExODEzMTM3NzVhOTljOWFlZDdkOGJhMzhiMTYxMzg0Yzc0NjAxMjg2NScKICAgICAgXSwKICAgICAgWwogICAgICAgICczNmU0NjQxYTUzOTQ4ZmQ0NzZjMzlmOGE5OWZkOTc0ZTVlYzA3NTY0YjUzMTVkOGJmOTk0NzFiY2EwZWYyZjY2JywKICAgICAgICAnZDI0MjRiMWIxYWJlNGViODE2NDIyN2IwODVjOWFhOTQ1NmVhMTM0OTNmZDU2M2UwNmZkNTFjZjU2OTRjNzhmYycKICAgICAgXSwKICAgICAgWwogICAgICAgICczMzY1ODFlYTdiZmJiYjI5MGMxOTFhMmY1MDdhNDFjZjU2NDM4NDIxNzBlOTE0ZmFlYWIyN2MyYzU3OWY3MjYnLAogICAgICAgICdlYWQxMjE2ODU5NWZlMWJlOTkyNTIxMjliNmU1NmIzMzkxZjdhYjE0MTBjZDFlMGVmM2RjZGNhYmQyZmRhMjI0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhhYjg5ODE2ZGFkZmQ2YjZhMWYyNjM0ZmNmMDBlYzg0MDM3ODEwMjVlZDY4OTBjNDg0OTc0MjcwNmJkNDNlZGUnLAogICAgICAgICc2ZmRjZWYwOWYyZjZkMGEwNDRlNjU0YWVmNjI0MTM2ZjUwM2Q0NTljM2U4OTg0NTg1OGE0N2E5MTI5Y2RkMjRlJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzFlMzNmMWE3NDZjOWM1Nzc4MTMzMzQ0ZDkyOTlmY2FhMjBiMDkzOGU4YWNmZjI1NDRiYjQwMjg0YjhjNWZiOTQnLAogICAgICAgICc2MDY2MDI1N2RkMTFiM2FhOWM4ZWQ2MThkMjRlZGZmMjMwNmQzMjBmMWQwMzAxMGUzM2E3ZDIwNTdmM2IzYjYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODViN2MxZGNiM2NlYzFiN2VlN2YzMGRlZDc5ZGQyMGEwZWQxZjRjYzE4Y2JjZmNmYTQxMDM2MWZkOGYwOGYzMScsCiAgICAgICAgJzNkOThhOWNkZDAyNmRkNDNmMzkwNDhmMjVhODg0N2Y0ZmNhZmFkMTg5NWQ3YTYzM2M2ZmVkM2MzNWU5OTk1MTEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMjlkZjlmYmQ4ZDllNDY1MDkyNzVmNGIxMjVkNmQ0NWQ3ZmJlOWEzYjg3OGE3YWY4NzJhMjgwMDY2MWFjNWY1MScsCiAgICAgICAgJ2I0YzRmZTk5Yzc3NWE2MDZlMmQ4ODYyMTc5MTM5ZmZkYTYxZGM4NjFjMDE5ZTU1Y2QyODc2ZWIyYTI3ZDg0YicKICAgICAgXSwKICAgICAgWwogICAgICAgICdhMGIxY2FlMDZiMGE4NDdhM2ZlYTZlNjcxYWFmOGFkZmRmZTU4Y2EyZjc2ODEwNWM4MDgyYjJlNDQ5ZmNlMjUyJywKICAgICAgICAnYWU0MzQxMDJlZGRlMDk1OGVjNGIxOWQ5MTdhNmEyOGU2YjcyZGExODM0YWZmMGU2NTBmMDQ5NTAzYTI5NmNmMicKICAgICAgXSwKICAgICAgWwogICAgICAgICc0ZThjZWFmYjliM2U5YTEzNmRjN2ZmNjdlODQwMjk1YjQ5OWRmYjNiMjEzM2U0YmExMTNmMmU0YzBlMTIxZTUnLAogICAgICAgICdjZjIxNzQxMThjOGI2ZDdhNGI0OGY2ZDUzNGNlNWM3OTQyMmMwODZhNjM0NjA1MDJiODI3Y2U2MmEzMjY2ODNjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2QyNGE0NGUwNDdlMTliNmY1YWZiODFjN2NhMmY2OTA4MGE1MDc2Njg5YTAxMDkxOWY0MjcyNWMyYjc4OWEzM2InLAogICAgICAgICc2ZmI4ZDU1OTFiNDY2ZjhmYzYzZGI1MGYxYzBmMWM2OTAxM2Y5OTY4ODdiODI0NGQyY2RlYzQxN2FmZWE4ZmEzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2VhMDE2MDZhN2E2YzljZGQyNDlmZGZjZmFjYjk5NTg0MDAxZWRkMjhhYmJhYjc3YjUxMDRlOThlOGUzYjM1ZDQnLAogICAgICAgICczMjJhZjQ5MDhjNzMxMmIwY2ZiZmUzNjlmN2E3YjNjZGI3ZDQ0OTRiYzI4MjM3MDBjZmQ2NTIxODhhM2VhOThkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2FmOGFkZGJmMmI2NjFjOGE2YzYzMjg2NTVlYjk2NjUxMjUyMDA3ZDhjNWVhMzFiZTRhZDE5NmRlOGNlMjEzMWYnLAogICAgICAgICc2NzQ5ZTY3YzAyOWI4NWY1MmEwMzRlYWZkMDk2ODM2YjI1MjA4MTg2ODBlMjZhYzhmM2RmYmNkYjcxNzQ5NzAwJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2UzYWUxOTc0NTY2Y2EwNmNjNTE2ZDQ3ZTBmYjE2NWE2NzRhM2RhYmNmY2ExNWU3MjJmMGUzNDUwZjQ1ODg5JywKICAgICAgICAnMmFlYWJlN2U0NTMxNTEwMTE2MjE3ZjA3YmY0ZDA3MzAwZGU5N2U0ODc0ZjgxZjUzMzQyMGE3MmVlYjBiZDZhNCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc1OTFlZTM1NTMxM2Q5OTcyMWNmNjk5M2ZmZWQxZTNlMzAxOTkzZmYzZWQyNTg4MDIwNzVlYThjZWQzOTdlMjQ2JywKICAgICAgICAnYjBlYTU1OGExMTNjMzBiZWE2MGZjNDc3NTQ2MGM3OTAxZmYwYjA1M2QyNWNhMmJkZWVlOThmMWE0YmU1ZDE5NicKICAgICAgXSwKICAgICAgWwogICAgICAgICcxMTM5NmQ1NWZkYTU0YzQ5ZjE5YWE5NzMxOGQ4ZGE2MWZhODU4NGU0N2IwODQ5NDUwNzdjZjAzMjU1YjUyOTg0JywKICAgICAgICAnOTk4Yzc0YThjZDQ1YWMwMTI4OWQ1ODMzYTdiZWI0NzQ0ZmY1MzZiMDFiMjU3YmU0YzU3NjdiZWE5M2VhNTdhNCcKICAgICAgXSwKICAgICAgWwogICAgICAgICczYzVkMmExYmEzOWM1YTE3OTAwMDA3MzhjOWUwYzQwYjhkY2RmZDU0Njg3NTRiNjQwNTU0MDE1N2UwMTdhYTdhJywKICAgICAgICAnYjIyODQyNzk5OTVhMzRlMmY5ZDRkZTczOTZmYzE4YjgwZjliOGI5ZmRkMjcwZjY2NjFmNzljYTRjODFiZDI1NycKICAgICAgXSwKICAgICAgWwogICAgICAgICdjYzg3MDRiOGE2MGEwZGVmYTNhOTlhNzI5OWYyZTljM2ZiYzM5NWFmYjA0YWMwNzg0MjVlZjhhMTc5M2NjMDMwJywKICAgICAgICAnYmRkNDYwMzlmZWVkMTc4ODFkMWUwODYyZGIzNDdmOGNmMzk1Yjc0ZmM0YmNkYzRlOTQwYjc0ZTNhYzFmMWIxMycKICAgICAgXSwKICAgICAgWwogICAgICAgICdjNTMzZTRmN2VhODU1NWFhY2Q5Nzc3YWM1Y2FkMjliOTdkZDRkZWZjY2M1M2VlN2VhMjA0MTE5YjI4ODliMTk3JywKICAgICAgICAnNmYwYTI1NmJjNWVmZGY0MjlhMmZiNjI0MmYxYTQzYTJkOWI5MjViYjRhNGIzYTI2YmI4ZTBmNDVlYjU5NjA5NicKICAgICAgXSwKICAgICAgWwogICAgICAgICdjMTRmOGYyY2NiMjdkNmYxMDlmNmQwOGQwM2NjOTZhNjliYThjMzRlZWMwN2JiY2Y1NjZkNDhlMzNkYTY1OTMnLAogICAgICAgICdjMzU5ZDY5MjNiYjM5OGY3ZmQ0NDczZTE2ZmUxYzI4NDc1Yjc0MGRkMDk4MDc1ZTZjMGU4NjQ5MTEzZGMzYTM4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2E2Y2JjMzA0NmJjNmE0NTBiYWMyNDc4OWZhMTcxMTVhNGM5NzM5ZWQ3NWY4ZjIxY2U0NDFmNzJlMGI5MGU2ZWYnLAogICAgICAgICcyMWFlN2Y0NjgwZTg4OWJiMTMwNjE5ZTJjMGY5NWEzNjBjZWI1NzNjNzA2MDMxMzk4NjJhZmQ2MTdmYTliOWYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzQ3ZDZkOWEwMmM0ODkyN2ViZmI4NmMxMzU5YjFjYWYxMzBhM2MwMjY3ZDExY2U2MzQ0YjM5Zjk5ZDQzY2MzOCcsCiAgICAgICAgJzYwZWE3ZjYxYTM1MzUyNGQxYzk4N2Y2ZWNlYzkyZjA4NmQ1NjVhYjY4Nzg3MGNiMTI2ODlmZjFlMzFjNzQ0NDgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZGE2NTQ1ZDIxODFkYjhkOTgzZjdkY2IzNzVlZjU4NjZkNDdjNjdiMWJmMzFjOGNmODU1ZWY3NDM3YjcyNjU2YScsCiAgICAgICAgJzQ5Yjk2NzE1YWI2ODc4YTc5ZTc4ZjA3Y2U1NjgwYzVkNjY3MzA1MWI0OTM1YmQ4OTdmZWE4MjRiNzdkYzIwOGEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYzQwNzQ3Y2M5ZDAxMmNiMWExM2I4MTQ4MzA5YzZkZTdlYzI1ZDY5NDVkNjU3MTQ2YjlkNTk5NGI4ZmViMTExMScsCiAgICAgICAgJzVjYTU2MDc1M2JlMmExMmZjNmRlNmNhZjJjYjQ4OTU2NWRiOTM2MTU2Yjk1MTRlMWJiNWU4MzAzN2UwZmEyZDQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNGU0MmM4ZWM4MmM5OTc5OGNjZjNhNjEwYmU4NzBlNzgzMzhjN2Y3MTMzNDhiZDM0YzgyMDNlZjQwMzdmMzUwMicsCiAgICAgICAgJzc1NzFkNzRlZTVlMGZiOTJhN2E4YjMzYTA3NzgzMzQxYTU0OTIxNDRjYzU0YmNjNDBhOTQ0NzM2OTM2MDY0MzcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzc3NWFiNzA4OWJjNmFmODIzYWJhMmUxYWY3MGIyMzZkMjUxY2FkYjBjODY3NDMyODc1MjJhMWIzYjBkZWRlYScsCiAgICAgICAgJ2JlNTJkMTA3YmNmYTA5ZDhiY2I5NzM2YTgyOGNmYTdmYWM4ZGIxN2JmN2E3NmEyYzQyYWQ5NjE0MDkwMThjZjcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnY2VlMzFjYmY3ZTM0ZWMzNzlkOTRmYjgxNGQzZDc3NWFkOTU0NTk1ZDEzMTRiYTg4NDY5NTllM2U4MmY3NGUyNicsCiAgICAgICAgJzhmZDY0YTE0YzA2YjU4OWMyNmI5NDdhZTJiY2Y2YmZhMDE0OWVmMGJlMTRlZDRkODBmNDQ4YTAxYzQzYjFjNmQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYjRmOWVhZWEwOWI2OTE3NjE5ZjZlYTZhNGViNTQ2NGVmZGRiNThmZDQ1YjFlYmVmY2RjMWEwMWQwOGI0Nzk4NicsCiAgICAgICAgJzM5ZTVjOTkyNWI1YTU0YjA3NDMzYTRmMThjNjE3MjZmOGJiMTMxYzAxMmNhNTQyZWIyNGE4YWMwNzIwMDY4MmEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDQyNjNkZmMzZDJkZjkyM2EwMTc5YTQ4OTY2ZDMwY2U4NGUyNTE1YWZjM2RjY2MxYjc3OTA3NzkyZWJjYzYwZScsCiAgICAgICAgJzYyZGZhZjA3YTBmNzhmZWIzMGUzMGQ2Mjk1ODUzY2UxODllMTI3NzYwYWQ2Y2Y3ZmFlMTY0ZTEyMmEyMDhkNTQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNDg0NTc1MjQ4MjBmYTY1YTRmOGQzNWViNjkzMDg1N2MwMDMyYWNjMGE0YTJkZTQyMjIzM2VlZGE4OTc2MTJjNCcsCiAgICAgICAgJzI1YTc0OGFiMzY3OTc5ZDk4NzMzYzM4YTFmYTFjMmU3ZGM2Y2MwN2RiMmQ2MGE5YWU3YTc2YWFhNDliZDBmNzcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZGZlZWVmMTg4MTEwMWYyY2IxMTY0NGYzYTJhZmRmYzIwNDVlMTk5MTkxNTI5MjNmMzY3YTE3NjdjMTFjY2VkYScsCiAgICAgICAgJ2VjZmI3MDU2Y2YxZGUwNDJmOTQyMGJhYjM5Njc5M2MwYzM5MGJkZTc0YjRiYmRmZjE2YTgzYWUwOWE5YTc1MTcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNmQ3ZWY2YjE3NTQzZjgzNzNjNTczZjQ0ZTFmMzg5ODM1ZDg5YmNiYzYwNjJjZWQzNmM4MmRmODNiOGZhZTg1OScsCiAgICAgICAgJ2NkNDUwZWMzMzU0Mzg5ODZkZmVmYTEwYzU3ZmVhOWJjYzUyMWEwOTU5YjJkODBiYmY3NGIxOTBkY2E3MTJkMTAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTc1NjA1ZDU5MTAyYTVhMjY4NDUwMGQzYjk5MWYyZTNmM2M4OGI5MzIyNTU0NzAzNWFmMjVhZjY2ZTA0NTQxZicsCiAgICAgICAgJ2Y1YzU0NzU0YThmNzFlZTU0MGI5YjQ4NzI4NDczZTMxNGY3MjlhYzUzMDhiMDY5MzgzNjA5OTBlMmJmYWQxMjUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZWI5ODY2MGY0YzRkZmFhMDZhMmJlNDUzZDUwMjBiYzk5YTBjMmU2MGFiZTM4ODQ1N2RkNDNmZWZiMWVkNjIwYycsCiAgICAgICAgJzZjYjlhODg3NmQ5Y2I4NTIwNjA5YWYzYWRkMjZjZDIwYTBhN2NkOGE5NDExMTMxY2U4NWY0NDEwMDA5OTIyM2UnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTNlODdiMDI3ZDg1MTRkMzU5MzlmMmU2ODkyYjE5OTIyMTU0NTk2OTQxODg4MzM2ZGMzNTYzZTNiOGRiYTk0MicsCiAgICAgICAgJ2ZlZjVhM2M2ODA1OWE2ZGVjNWQ2MjQxMTRiZjFlOTFhYWMyYjlkYTU2OGQ2YWJlYjI1NzBkNTU2NDZiOGFkZjEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZWUxNjMwMjZlOWZkNmZlMDE3YzM4ZjA2YTViZTZmYzEyNTQyNGIzNzFjZTI3MDhlN2JmNDQ5MTY5MWU1NzY0YScsCiAgICAgICAgJzFhY2IyNTBmMjU1ZGQ2MWM0M2Q5NGNjYzY3MGQwZjU4ZjQ5YWUzZmExNWI5NjYyM2U1NDMwZGEwYWQ2YzYyYjInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYjI2OGY1ZWY5YWQ1MWU0ZDc4ZGUzYTc1MGMyZGM4OWIxZTYyNmQ0MzUwNTg2Nzk5OTkzMmU1ZGIzM2FmM2Q4MCcsCiAgICAgICAgJzVmMzEwZDRiM2M5OWI5ZWJiMTlmNzdkNDFjMWRlZTAxOGNmMGQzNGZkNDE5MTYxNDAwM2U5NDVhMTIxNmU0MjMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZmYwN2YzMTE4YTlkZjAzNWU5ZmFkODVlYjZjN2JmZTQyYjAyZjAxY2E5OWNlZWEzYmY3ZmZkYmE5M2M0NzUwZCcsCiAgICAgICAgJzQzODEzNmQ2MDNlODU4YTNhNWM0NDBjMzhlY2NiYWRkYzFkMjk0MjExNGUyZWRkZDQ3NDBkMDk4Y2VkMWYwZDgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOGQ4Yjk4NTVjN2MwNTJhMzQxNDZmZDIwZmZiNjU4YmVhNGI5ZjY5ZTBkODI1ZWJlYzE2ZThjM2NlMmI1MjZhMScsCiAgICAgICAgJ2NkYjU1OWVlZGMyZDc5ZjkyNmJhZjQ0ZmI4NGVhNGQ0NGJjZjUwZmVlNTFkN2NlYjMwZTJlN2Y0NjMwMzY3NTgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNTJkYjBiNTM4NGRmYmYwNWJmYTlkNDcyZDdhZTI2ZGZlNGI4NTFjZWNhOTFiMWViYTU0MjYzMTgwZGEzMmI2MycsCiAgICAgICAgJ2MzYjk5N2QwNTBlZTVkNDIzZWJhZjY2YTZkYjlmNTdiMzE4MGM5MDI4NzU2NzlkZTkyNGI2OWQ4NGE3YjM3NScKICAgICAgXSwKICAgICAgWwogICAgICAgICdlNjJmOTQ5MGQzZDUxZGE2Mzk1ZWZkMjRlODA5MTljYzdkMGYyOWMzZjNmYTQ4YzZmZmY1NDNiZWNiZDQzMzUyJywKICAgICAgICAnNmQ4OWFkN2JhNDg3NmIwYjIyYzJjYTI4MGM2ODI4NjJmMzQyYzg1OTFmMWRhZjUxNzBlMDdiZmQ5Y2NhZmE3ZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc3ZjMwZWEyNDc2YjM5OWI0OTU3NTA5Yzg4Zjc3ZDAxOTFhZmEyZmY1Y2I3YjE0ZmQ2ZDhlN2Q2NWFhYWIxMTkzJywKICAgICAgICAnY2E1ZWY3ZDRiMjMxYzk0YzNiMTUzODlhNWY2MzExZTlkYWZmN2JiNjdiMTAzZTk4ODBlZjRiZmY2MzdhY2FlYycKICAgICAgXSwKICAgICAgWwogICAgICAgICc1MDk4ZmYxZTFkOWYxNGZiNDZhMjEwZmFkYTZjOTAzZmVmMGZiN2I0YTFkZDFkOWFjNjBhMDM2MTgwMGI3YTAwJywKICAgICAgICAnOTczMTE0MWQ4MWZjOGY4MDg0ZDM3YzZlNzU0MjAwNmIzZWUxYjQwZDYwZGZlNTM2MmE1YjEzMmZkMTdkZGMwJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzMyYjc4YzdkZTllZTUxMmE3Mjg5NWJlNmI5Y2JlZmE2ZTJmM2M0Y2NjZTQ0NWM5NmI5ZjJjODFlMjc3OGFkNTgnLAogICAgICAgICdlZTE4NDlmNTEzZGY3MWUzMmVmYzM4OTZlZTI4MjYwYzczYmI4MDU0N2FlMjI3NWJhNDk3MjM3Nzk0Yzg3NTNjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2UyY2I3NGZkZGM4ZTlmYmNkMDc2ZWVmMmE3YzcyYjBjZTM3ZDUwZjA4MjY5ZGZjMDc0YjU4MTU1MDU0N2E0ZjcnLAogICAgICAgICdkM2FhMmVkNzFjOWRkMjI0N2E2MmRmMDYyNzM2ZWIwYmFkZGVhOWUzNjEyMmQyYmU4NjQxYWJjYjAwNWNjNGE0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzg0Mzg0NDc1NjZkNGQ3YmVkYWRjMjk5NDk2YWIzNTc0MjYwMDlhMzVmMjM1Y2IxNDFiZTBkOTljZDEwYWUzYTgnLAogICAgICAgICdjNGUxMDIwOTE2OTgwYTRkYTVkMDFhYzVlNmFkMzMwNzM0ZWYwZDc5MDY2MzFjNGYyMzkwNDI2YjJlZGQ3OTFmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzQxNjJkNDg4Yjg5NDAyMDM5YjU4NGM2ZmM2YzMwODg3MDU4N2Q5YzQ2ZjY2MGI4NzhhYjY1YzgyYzcxMWQ2N2UnLAogICAgICAgICc2NzE2M2U5MDMyMzYyODlmNzc2ZjIyYzI1ZmI4YTNhZmMxNzMyZjJiODRiNGU5NWRiZGE0N2FlNWEwODUyNjQ5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzNmYWQzZmE4NGNhZjBmMzRmMGY4OWJmZDJkY2Y1NGZjMTc1ZDc2N2FlYzNlNTA2ODRmM2JhNGE0YmY1ZjY4M2QnLAogICAgICAgICdjZDFiYzdjYjZjYzQwN2JiMmYwY2E2NDdjNzE4YTczMGNmNzE4NzJlN2QwZDJhNTNmYTIwZWZjZGZlNjE4MjYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNjc0ZjI2MDBhMzAwN2EwMDU2OGMxYTdjZTA1ZDA4MTZjMWZiODRiZjEzNzA3OThmMWM2OTUzMmZhZWIxYTg2YicsCiAgICAgICAgJzI5OWQyMWY5NDEzZjMzYjNlZGY0M2IyNTcwMDQ1ODBiNzBkYjU3ZGEwYjE4MjI1OWUwOWVlY2M2OWUwZDM4YTUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDMyZjRkYTU0YWRlNzRhYmI4MWI4MTVhZDFmYjNiMjYzZDgyZDZjNjkyNzE0YmNmZjg3ZDI5YmQ1ZWU5ZjA4ZicsCiAgICAgICAgJ2Y5NDI5ZTczOGI4ZTUzYjk2OGU5OTAxNmMwNTk3MDc3ODJlMTRmNDUzNTM1OWQ1ODJmYzQxNjkxMGIzZWVhODcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzBlNGU2NzA0MzUzODU1NTZlNTkzNjU3MTM1ODQ1ZDM2ZmJiNjkzMWY3MmIwOGNiMWVkOTU0ZjFlM2NlM2ZmNicsCiAgICAgICAgJzQ2MmY5YmNlNjE5ODk4NjM4NDk5MzUwMTEzYmJjOWIxMGE4NzhkMzVkYTcwNzQwZGM2OTVhNTU5ZWI4OGRiN2InCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYmUyMDYyMDAzYzUxY2MzMDA0NjgyOTA0MzMwZTRkZWU3ZjNkY2QxMGIwMWU1ODBiZjE5NzFiMDRkNGNhZDI5NycsCiAgICAgICAgJzYyMTg4YmM0OWQ2MWU1NDI4NTczZDQ4YTc0ZTFjNjU1YjFjNjEwOTA5MDU2ODJhMGQ1NTU4ZWQ3MmRjY2I5YmMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOTMxNDQ0MjNhY2UzNDUxZWQyOWUwZmI5YWMyYWYyMTFjYjZlODRhNjAxZGY1OTkzYzQxOTg1OWZmZjVkZjA0YScsCiAgICAgICAgJzdjMTBkZmIxNjRjMzQyNWY1YzcxYTNmOWQ3OTkyMDM4ZjEwNjUyMjRmNzJiYjlkMWQ5MDJhNmQxMzAzN2I0N2MnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYjAxNWY4MDQ0ZjVmY2JkY2YyMWNhMjZkNmMzNGZiODE5NzgyOTIwNWM3YjdkMmE3Y2I2NjQxOGMxNTdiMTEyYycsCiAgICAgICAgJ2FiOGMxZTA4NmQwNGU4MTM3NDRhNjU1YjJkZjhkNWY4M2IzY2RjNmZhYTMwODhjMWQzYWVhMTQ1NGUzYTFkNWYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDVlOWUxZGE2NDlkOTdkODllNDg2ODExN2E0NjVhM2E0ZjhhMThkZTU3YTE0MGQzNmIzZjJhZjM0MWEyMWI1MicsCiAgICAgICAgJzRjYjA0NDM3ZjM5MWVkNzMxMTFhMTNjYzFkNGRkMGRiMTY5MzQ2NWMyMjQwNDgwZDg5NTVlODU5MmYyNzQ0N2EnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDNhZTQxMDQ3ZGQ3Y2EwNjVkYmY4ZWQ3N2I5OTI0Mzk5ODMwMDVjZDcyZTE2ZDZmOTk2YTUzMTZkMzY5NjZiYicsCiAgICAgICAgJ2JkMWFlYjIxYWQyMmViYjIyYTEwZjAzMDM0MTdjNmQ5NjRmOGNkZDdkZjBhY2E2MTRiMTBkYzE0ZDEyNWFjNDYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNDYzZTI3NjNkODg1Zjk1OGZjNjZjZGQyMjgwMGYwYTQ4NzE5N2QwYTgyZTM3N2I0OWY4MGFmODdjODk3YjA2NScsCiAgICAgICAgJ2JmZWZhY2RiMGU1ZDBmZDdkZjNhMzExYTk0ZGUwNjJiMjZiODBjNjFmYmM5NzUwOGI3OTk5MjY3MWVmN2NhN2YnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzk4NWZkZmQxMjdjMDU2N2M2ZjUzZWMxYmI2M2VjMzE1OGU1OTdjNDBiZmU3NDdjODNjZGRmYzkxMDY0MTkxNycsCiAgICAgICAgJzYwM2MxMmRhZjNkOTg2MmVmMmIyNWZlMWRlMjg5YWVkMjRlZDI5MWUwZWM2NzA4NzAzYTViZDU2N2YzMmVkMDMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzRhMWFkNmI1Zjc2ZTM5ZGIyZGQyNDk0MTBlYWM3Zjk5ZTc0YzU5Y2I4M2QyZDBlZDVmZjE1NDNkYTc3MDNlOScsCiAgICAgICAgJ2NjNjE1N2VmMThjOWM2M2NkNjE5M2Q4MzYzMWJiZWEwMDkzZTA5Njg5NDJlOGMzM2Q1NzM3ZmQ3OTBlMGRiMDgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzA2ODJhNTA3MDMzNzVmNjAyZDQxNjY2NGJhMTliN2ZjOWJhYjQyYzcyNzQ3NDYzYTcxZDA4OTZiMjJmNmRhMycsCiAgICAgICAgJzU1M2UwNGY2YjAxOGI0ZmE2YzhmMzllN2YzMTFkMzE3NjI5MGQwZTBmMTljYTczZjE3NzE0ZDk5NzdhMjJmZjgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOWUyMTU4ZjBkN2MwZDVmMjZjMzc5MWVmZWZhNzk1OTc2NTRlN2EyYjI0NjRmNTJiMWVlNmMxMzQ3NzY5ZWY1NycsCiAgICAgICAgJzcxMmZjZGQxYjkwNTNmMDkwMDNhMzQ4MWZhNzc2MmU5ZmZkN2M4ZWYzNWEzODUwOWUyZmJmMjYyOTAwODM3MycKICAgICAgXSwKICAgICAgWwogICAgICAgICcxNzZlMjY5ODlhNDNjOWNmZWJhNDAyOWMyMDI1MzhjMjgxNzJlNTY2ZTNjNGZjZTczMjI4NTdmM2JlMzI3ZDY2JywKICAgICAgICAnZWQ4Y2M5ZDA0YjI5ZWI4NzdkMjcwYjQ4NzhkYzQzYzE5YWVmZDMxZjRlZWUwOWVlN2I0NzgzNGMxZmE0YjFjMycKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NWQ0NmVmZWEzNzcxZTZlNjhhYmI4OWExM2FkNzQ3ZWNmMTg5MjM5M2RmYzRmMWI3MDA0Nzg4YzUwMzc0ZGE4JywKICAgICAgICAnOTg1MjM5MGE5OTUwNzY3OWZkMGI4NmZkMmIzOWE4NjhkN2VmYzIyMTUxMzQ2ZTFhM2NhNDcyNjU4NmE2YmVkOCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc4MDlhMjBjNjdkNjQ5MDBmZmI2OThjNGM4MjVmNmQ1ZjIzMTBmYjA0NTFjODY5MzQ1YjczMTlmNjQ1NjA1NzIxJywKICAgICAgICAnOWU5OTQ5ODBkOTkxN2UyMmI3NmIwNjE5MjdmYTA0MTQzZDA5NmNjYzU0OTYzZTZhNWViZmE1ZjNmOGUyODZjMScKICAgICAgXSwKICAgICAgWwogICAgICAgICcxYjM4OTAzYTQzZjdmMTE0ZWQ0NTAwYjRlYWM3MDgzZmRlZmVjZTFjZjI5YzYzNTI4ZDU2MzQ0NmY5NzJjMTgwJywKICAgICAgICAnNDAzNmVkYzkzMWE2MGFlODg5MzUzZjc3ZmQ1M2RlNGEyNzA4YjI2YjZmNWRhNzJhZDMzOTQxMTlkYWY0MDhmOScKICAgICAgXQogICAgXQogIH0KfTsKCn0se31dLDExNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciB1dGlscyA9IGV4cG9ydHM7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7Cgp1dGlscy5hc3NlcnQgPSBmdW5jdGlvbiBhc3NlcnQodmFsLCBtc2cpIHsKICBpZiAoIXZhbCkKICAgIHRocm93IG5ldyBFcnJvcihtc2cgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnKTsKfTsKCmZ1bmN0aW9uIHRvQXJyYXkobXNnLCBlbmMpIHsKICBpZiAoQXJyYXkuaXNBcnJheShtc2cpKQogICAgcmV0dXJuIG1zZy5zbGljZSgpOwogIGlmICghbXNnKQogICAgcmV0dXJuIFtdOwogIHZhciByZXMgPSBbXTsKICBpZiAodHlwZW9mIG1zZyAhPT0gJ3N0cmluZycpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSsrKQogICAgICByZXNbaV0gPSBtc2dbaV0gfCAwOwogICAgcmV0dXJuIHJlczsKICB9CiAgaWYgKCFlbmMpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBjID0gbXNnLmNoYXJDb2RlQXQoaSk7CiAgICAgIHZhciBoaSA9IGMgPj4gODsKICAgICAgdmFyIGxvID0gYyAmIDB4ZmY7CiAgICAgIGlmIChoaSkKICAgICAgICByZXMucHVzaChoaSwgbG8pOwogICAgICBlbHNlCiAgICAgICAgcmVzLnB1c2gobG8pOwogICAgfQogIH0gZWxzZSBpZiAoZW5jID09PSAnaGV4JykgewogICAgbXNnID0gbXNnLnJlcGxhY2UoL1teYS16MC05XSsvaWcsICcnKTsKICAgIGlmIChtc2cubGVuZ3RoICUgMiAhPT0gMCkKICAgICAgbXNnID0gJzAnICsgbXNnOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpICs9IDIpCiAgICAgIHJlcy5wdXNoKHBhcnNlSW50KG1zZ1tpXSArIG1zZ1tpICsgMV0sIDE2KSk7CiAgfQogIHJldHVybiByZXM7Cn0KdXRpbHMudG9BcnJheSA9IHRvQXJyYXk7CgpmdW5jdGlvbiB6ZXJvMih3b3JkKSB7CiAgaWYgKHdvcmQubGVuZ3RoID09PSAxKQogICAgcmV0dXJuICcwJyArIHdvcmQ7CiAgZWxzZQogICAgcmV0dXJuIHdvcmQ7Cn0KdXRpbHMuemVybzIgPSB6ZXJvMjsKCmZ1bmN0aW9uIHRvSGV4KG1zZykgewogIHZhciByZXMgPSAnJzsKICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykKICAgIHJlcyArPSB6ZXJvMihtc2dbaV0udG9TdHJpbmcoMTYpKTsKICByZXR1cm4gcmVzOwp9CnV0aWxzLnRvSGV4ID0gdG9IZXg7Cgp1dGlscy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoYXJyLCBlbmMpIHsKICBpZiAoZW5jID09PSAnaGV4JykKICAgIHJldHVybiB0b0hleChhcnIpOwogIGVsc2UKICAgIHJldHVybiBhcnI7Cn07CgovLyBSZXByZXNlbnQgbnVtIGluIGEgdy1OQUYgZm9ybQpmdW5jdGlvbiBnZXROQUYobnVtLCB3KSB7CiAgdmFyIG5hZiA9IFtdOwogIHZhciB3cyA9IDEgPDwgKHcgKyAxKTsKICB2YXIgayA9IG51bS5jbG9uZSgpOwogIHdoaWxlIChrLmNtcG4oMSkgPj0gMCkgewogICAgdmFyIHo7CiAgICBpZiAoay5pc09kZCgpKSB7CiAgICAgIHZhciBtb2QgPSBrLmFuZGxuKHdzIC0gMSk7CiAgICAgIGlmIChtb2QgPiAod3MgPj4gMSkgLSAxKQogICAgICAgIHogPSAod3MgPj4gMSkgLSBtb2Q7CiAgICAgIGVsc2UKICAgICAgICB6ID0gbW9kOwogICAgICBrLmlzdWJuKHopOwogICAgfSBlbHNlIHsKICAgICAgeiA9IDA7CiAgICB9CiAgICBuYWYucHVzaCh6KTsKCiAgICAvLyBPcHRpbWl6YXRpb24sIHNoaWZ0IGJ5IHdvcmQgaWYgcG9zc2libGUKICAgIHZhciBzaGlmdCA9IChrLmNtcG4oMCkgIT09IDAgJiYgay5hbmRsbih3cyAtIDEpID09PSAwKSA/ICh3ICsgMSkgOiAxOwogICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzaGlmdDsgaSsrKQogICAgICBuYWYucHVzaCgwKTsKICAgIGsuaXVzaHJuKHNoaWZ0KTsKICB9CgogIHJldHVybiBuYWY7Cn0KdXRpbHMuZ2V0TkFGID0gZ2V0TkFGOwoKLy8gUmVwcmVzZW50IGsxLCBrMiBpbiBhIEpvaW50IFNwYXJzZSBGb3JtCmZ1bmN0aW9uIGdldEpTRihrMSwgazIpIHsKICB2YXIganNmID0gWwogICAgW10sCiAgICBbXQogIF07CgogIGsxID0gazEuY2xvbmUoKTsKICBrMiA9IGsyLmNsb25lKCk7CiAgdmFyIGQxID0gMDsKICB2YXIgZDIgPSAwOwogIHdoaWxlIChrMS5jbXBuKC1kMSkgPiAwIHx8IGsyLmNtcG4oLWQyKSA+IDApIHsKCiAgICAvLyBGaXJzdCBwaGFzZQogICAgdmFyIG0xNCA9IChrMS5hbmRsbigzKSArIGQxKSAmIDM7CiAgICB2YXIgbTI0ID0gKGsyLmFuZGxuKDMpICsgZDIpICYgMzsKICAgIGlmIChtMTQgPT09IDMpCiAgICAgIG0xNCA9IC0xOwogICAgaWYgKG0yNCA9PT0gMykKICAgICAgbTI0ID0gLTE7CiAgICB2YXIgdTE7CiAgICBpZiAoKG0xNCAmIDEpID09PSAwKSB7CiAgICAgIHUxID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBtOCA9IChrMS5hbmRsbig3KSArIGQxKSAmIDc7CiAgICAgIGlmICgobTggPT09IDMgfHwgbTggPT09IDUpICYmIG0yNCA9PT0gMikKICAgICAgICB1MSA9IC1tMTQ7CiAgICAgIGVsc2UKICAgICAgICB1MSA9IG0xNDsKICAgIH0KICAgIGpzZlswXS5wdXNoKHUxKTsKCiAgICB2YXIgdTI7CiAgICBpZiAoKG0yNCAmIDEpID09PSAwKSB7CiAgICAgIHUyID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBtOCA9IChrMi5hbmRsbig3KSArIGQyKSAmIDc7CiAgICAgIGlmICgobTggPT09IDMgfHwgbTggPT09IDUpICYmIG0xNCA9PT0gMikKICAgICAgICB1MiA9IC1tMjQ7CiAgICAgIGVsc2UKICAgICAgICB1MiA9IG0yNDsKICAgIH0KICAgIGpzZlsxXS5wdXNoKHUyKTsKCiAgICAvLyBTZWNvbmQgcGhhc2UKICAgIGlmICgyICogZDEgPT09IHUxICsgMSkKICAgICAgZDEgPSAxIC0gZDE7CiAgICBpZiAoMiAqIGQyID09PSB1MiArIDEpCiAgICAgIGQyID0gMSAtIGQyOwogICAgazEuaXVzaHJuKDEpOwogICAgazIuaXVzaHJuKDEpOwogIH0KCiAgcmV0dXJuIGpzZjsKfQp1dGlscy5nZXRKU0YgPSBnZXRKU0Y7CgpmdW5jdGlvbiBjYWNoZWRQcm9wZXJ0eShvYmosIGNvbXB1dGVyKSB7CiAgdmFyIG5hbWUgPSBjb21wdXRlci5uYW1lOwogIHZhciBrZXkgPSAnXycgKyBuYW1lOwogIG9iai5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbiBjYWNoZWRQcm9wZXJ0eSgpIHsKICAgIHJldHVybiB0aGlzW2tleV0gIT09IHVuZGVmaW5lZCA/IHRoaXNba2V5XSA6CiAgICAgICAgICAgdGhpc1trZXldID0gY29tcHV0ZXIuY2FsbCh0aGlzKTsKICB9Owp9CnV0aWxzLmNhY2hlZFByb3BlcnR5ID0gY2FjaGVkUHJvcGVydHk7CgpmdW5jdGlvbiBwYXJzZUJ5dGVzKGJ5dGVzKSB7CiAgcmV0dXJuIHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycgPyB1dGlscy50b0FycmF5KGJ5dGVzLCAnaGV4JykgOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXM7Cn0KdXRpbHMucGFyc2VCeXRlcyA9IHBhcnNlQnl0ZXM7CgpmdW5jdGlvbiBpbnRGcm9tTEUoYnl0ZXMpIHsKICByZXR1cm4gbmV3IEJOKGJ5dGVzLCAnaGV4JywgJ2xlJyk7Cn0KdXRpbHMuaW50RnJvbUxFID0gaW50RnJvbUxFOwoKCn0seyJibi5qcyI6NDF9XSwxMTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cz17CiAgIl9hcmdzIjogWwogICAgWwogICAgICAiZWxsaXB0aWNAXjYuMC4wIiwKICAgICAgIi9ob21lL2dpbC9EZXNrdG9wL3JldGhpbmsvZGV2LXJ1bnRpbWUtY29yZS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS1zaWduIgogICAgXQogIF0sCiAgIl9mcm9tIjogImVsbGlwdGljQD49Ni4wLjAgPDcuMC4wIiwKICAiX2lkIjogImVsbGlwdGljQDYuMi4zIiwKICAiX2luQ2FjaGUiOiB0cnVlLAogICJfaW5zdGFsbGFibGUiOiB0cnVlLAogICJfbG9jYXRpb24iOiAiL2VsbGlwdGljIiwKICAiX25vZGVWZXJzaW9uIjogIjUuNC4xIiwKICAiX25wbVVzZXIiOiB7CiAgICAiZW1haWwiOiAiZmVkb3JAaW5kdXRueS5jb20iLAogICAgIm5hbWUiOiAiaW5kdXRueSIKICB9LAogICJfbnBtVmVyc2lvbiI6ICIzLjMuMTIiLAogICJfcGhhbnRvbUNoaWxkcmVuIjoge30sCiAgIl9yZXF1ZXN0ZWQiOiB7CiAgICAibmFtZSI6ICJlbGxpcHRpYyIsCiAgICAicmF3IjogImVsbGlwdGljQF42LjAuMCIsCiAgICAicmF3U3BlYyI6ICJeNi4wLjAiLAogICAgInNjb3BlIjogbnVsbCwKICAgICJzcGVjIjogIj49Ni4wLjAgPDcuMC4wIiwKICAgICJ0eXBlIjogInJhbmdlIgogIH0sCiAgIl9yZXF1aXJlZEJ5IjogWwogICAgIi9icm93c2VyaWZ5LXNpZ24iLAogICAgIi9jcmVhdGUtZWNkaCIKICBdLAogICJfcmVzb2x2ZWQiOiAiaHR0cHM6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvZWxsaXB0aWMvLS9lbGxpcHRpYy02LjIuMy50Z3oiLAogICJfc2hhc3VtIjogIjE4ZTQ2ZDczMDZiMDk1MTI3NWEyZDQyMDYzMjcwYTE0Yjc0ZWJlOTkiLAogICJfc2hyaW5rd3JhcCI6IG51bGwsCiAgIl9zcGVjIjogImVsbGlwdGljQF42LjAuMCIsCiAgIl93aGVyZSI6ICIvaG9tZS9naWwvRGVza3RvcC9yZXRoaW5rL2Rldi1ydW50aW1lLWNvcmUvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnktc2lnbiIsCiAgImF1dGhvciI6IHsKICAgICJlbWFpbCI6ICJmZWRvckBpbmR1dG55LmNvbSIsCiAgICAibmFtZSI6ICJGZWRvciBJbmR1dG55IgogIH0sCiAgImJ1Z3MiOiB7CiAgICAidXJsIjogImh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2VsbGlwdGljL2lzc3VlcyIKICB9LAogICJkZXBlbmRlbmNpZXMiOiB7CiAgICAiYm4uanMiOiAiXjQuMC4wIiwKICAgICJicm9yYW5kIjogIl4xLjAuMSIsCiAgICAiaGFzaC5qcyI6ICJeMS4wLjAiLAogICAgImluaGVyaXRzIjogIl4yLjAuMSIKICB9LAogICJkZXNjcmlwdGlvbiI6ICJFQyBjcnlwdG9ncmFwaHkiLAogICJkZXZEZXBlbmRlbmNpZXMiOiB7CiAgICAiY292ZXJhbGxzIjogIl4yLjExLjMiLAogICAgImlzdGFuYnVsIjogIl4wLjQuMiIsCiAgICAianNjcyI6ICJeMi45LjAiLAogICAgImpzaGludCI6ICJeMi42LjAiLAogICAgIm1vY2hhIjogIl4yLjEuMCIKICB9LAogICJkaXJlY3RvcmllcyI6IHt9LAogICJkaXN0IjogewogICAgInNoYXN1bSI6ICIxOGU0NmQ3MzA2YjA5NTEyNzVhMmQ0MjA2MzI3MGExNGI3NGViZTk5IiwKICAgICJ0YXJiYWxsIjogImh0dHA6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvZWxsaXB0aWMvLS9lbGxpcHRpYy02LjIuMy50Z3oiCiAgfSwKICAiZmlsZXMiOiBbCiAgICAibGliIgogIF0sCiAgImdpdEhlYWQiOiAiYzMyZjIwYjIyYjQyMGViNmFmM2M2ZGRhMjg5NjNkZWI3ZmFjZjgyMyIsCiAgImhvbWVwYWdlIjogImh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2VsbGlwdGljIiwKICAia2V5d29yZHMiOiBbCiAgICAiRUMiLAogICAgIkVsbGlwdGljIiwKICAgICJjdXJ2ZSIsCiAgICAiQ3J5cHRvZ3JhcGh5IgogIF0sCiAgImxpY2Vuc2UiOiAiTUlUIiwKICAibWFpbiI6ICJsaWIvZWxsaXB0aWMuanMiLAogICJtYWludGFpbmVycyI6IFsKICAgIHsKICAgICAgImVtYWlsIjogImZlZG9yQGluZHV0bnkuY29tIiwKICAgICAgIm5hbWUiOiAiaW5kdXRueSIKICAgIH0KICBdLAogICJuYW1lIjogImVsbGlwdGljIiwKICAib3B0aW9uYWxEZXBlbmRlbmNpZXMiOiB7fSwKICAicmVhZG1lIjogIkVSUk9SOiBObyBSRUFETUUgZGF0YSBmb3VuZCEiLAogICJyZXBvc2l0b3J5IjogewogICAgInR5cGUiOiAiZ2l0IiwKICAgICJ1cmwiOiAiZ2l0K3NzaDovL2dpdEBnaXRodWIuY29tL2luZHV0bnkvZWxsaXB0aWMuZ2l0IgogIH0sCiAgInNjcmlwdHMiOiB7CiAgICAiY292ZXJhZ2UiOiAibnBtIHJ1biB1bml0IC0tY292ZXJhZ2UiLAogICAgImNvdmVyYWxscyI6ICJucG0gcnVuIGNvdmVyYWdlICYmIGNhdCAuL2NvdmVyYWdlL2xjb3YuaW5mbyB8IGNvdmVyYWxscyIsCiAgICAianNjcyI6ICJqc2NzIGJlbmNobWFya3MvKi5qcyBsaWIvKi5qcyBsaWIvKiovKi5qcyBsaWIvKiovKiovKi5qcyB0ZXN0LyouanMiLAogICAgImpzaGludCI6ICJqc2NzIGJlbmNobWFya3MvKi5qcyBsaWIvKi5qcyBsaWIvKiovKi5qcyBsaWIvKiovKiovKi5qcyB0ZXN0LyouanMiLAogICAgImxpbnQiOiAibnBtIHJ1biBqc2NzICYmIG5wbSBydW4ganNoaW50IiwKICAgICJ0ZXN0IjogIm5wbSBydW4gbGludCAmJiBucG0gcnVuIHVuaXQiLAogICAgInVuaXQiOiAiaXN0YW5idWwgdGVzdCBfbW9jaGEgLS1yZXBvcnRlcj1zcGVjIHRlc3QvKi10ZXN0LmpzIgogIH0sCiAgInZlcnNpb24iOiAiNi4yLjMiCn0KCn0se31dLDExOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIG1kNSA9IHJlcXVpcmUoJ2NyZWF0ZS1oYXNoL21kNScpCm1vZHVsZS5leHBvcnRzID0gRVZQX0J5dGVzVG9LZXkKZnVuY3Rpb24gRVZQX0J5dGVzVG9LZXkgKHBhc3N3b3JkLCBzYWx0LCBrZXlMZW4sIGl2TGVuKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIocGFzc3dvcmQpKSB7CiAgICBwYXNzd29yZCA9IG5ldyBCdWZmZXIocGFzc3dvcmQsICdiaW5hcnknKQogIH0KICBpZiAoc2FsdCAmJiAhQnVmZmVyLmlzQnVmZmVyKHNhbHQpKSB7CiAgICBzYWx0ID0gbmV3IEJ1ZmZlcihzYWx0LCAnYmluYXJ5JykKICB9CiAga2V5TGVuID0ga2V5TGVuIC8gOAogIGl2TGVuID0gaXZMZW4gfHwgMAogIHZhciBraSA9IDAKICB2YXIgaWkgPSAwCiAgdmFyIGtleSA9IG5ldyBCdWZmZXIoa2V5TGVuKQogIHZhciBpdiA9IG5ldyBCdWZmZXIoaXZMZW4pCiAgdmFyIGFkZG1kID0gMAogIHZhciBtZF9idWYKICB2YXIgaQogIHZhciBidWZzID0gW10KICB3aGlsZSAodHJ1ZSkgewogICAgaWYgKGFkZG1kKysgPiAwKSB7CiAgICAgIGJ1ZnMucHVzaChtZF9idWYpCiAgICB9CiAgICBidWZzLnB1c2gocGFzc3dvcmQpCiAgICBpZiAoc2FsdCkgewogICAgICBidWZzLnB1c2goc2FsdCkKICAgIH0KICAgIG1kX2J1ZiA9IG1kNShCdWZmZXIuY29uY2F0KGJ1ZnMpKQogICAgYnVmcyA9IFtdCiAgICBpID0gMAogICAgaWYgKGtleUxlbiA+IDApIHsKICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICBpZiAoa2V5TGVuID09PSAwKSB7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgICBpZiAoaSA9PT0gbWRfYnVmLmxlbmd0aCkgewogICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICAgICAga2V5W2tpKytdID0gbWRfYnVmW2ldCiAgICAgICAga2V5TGVuLS0KICAgICAgICBpKysKICAgICAgfQogICAgfQogICAgaWYgKGl2TGVuID4gMCAmJiBpICE9PSBtZF9idWYubGVuZ3RoKSB7CiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgaWYgKGl2TGVuID09PSAwKSB7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgICBpZiAoaSA9PT0gbWRfYnVmLmxlbmd0aCkgewogICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICAgICAgaXZbaWkrK10gPSBtZF9idWZbaV0KICAgICAgICBpdkxlbi0tCiAgICAgICAgaSsrCiAgICAgIH0KICAgIH0KICAgIGlmIChrZXlMZW4gPT09IDAgJiYgaXZMZW4gPT09IDApIHsKICAgICAgYnJlYWsKICAgIH0KICB9CiAgZm9yIChpID0gMDsgaSA8IG1kX2J1Zi5sZW5ndGg7IGkrKykgewogICAgbWRfYnVmW2ldID0gMAogIH0KICByZXR1cm4gewogICAga2V5OiBrZXksCiAgICBpdjogaXYKICB9Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwLCJjcmVhdGUtaGFzaC9tZDUiOjg0fV0sMTIwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGhhc2ggPSBleHBvcnRzOwoKaGFzaC51dGlscyA9IHJlcXVpcmUoJy4vaGFzaC91dGlscycpOwpoYXNoLmNvbW1vbiA9IHJlcXVpcmUoJy4vaGFzaC9jb21tb24nKTsKaGFzaC5zaGEgPSByZXF1aXJlKCcuL2hhc2gvc2hhJyk7Cmhhc2gucmlwZW1kID0gcmVxdWlyZSgnLi9oYXNoL3JpcGVtZCcpOwpoYXNoLmhtYWMgPSByZXF1aXJlKCcuL2hhc2gvaG1hYycpOwoKLy8gUHJveHkgaGFzaCBmdW5jdGlvbnMgdG8gdGhlIG1haW4gb2JqZWN0Cmhhc2guc2hhMSA9IGhhc2guc2hhLnNoYTE7Cmhhc2guc2hhMjU2ID0gaGFzaC5zaGEuc2hhMjU2OwpoYXNoLnNoYTIyNCA9IGhhc2guc2hhLnNoYTIyNDsKaGFzaC5zaGEzODQgPSBoYXNoLnNoYS5zaGEzODQ7Cmhhc2guc2hhNTEyID0gaGFzaC5zaGEuc2hhNTEyOwpoYXNoLnJpcGVtZDE2MCA9IGhhc2gucmlwZW1kLnJpcGVtZDE2MDsKCn0seyIuL2hhc2gvY29tbW9uIjoxMjEsIi4vaGFzaC9obWFjIjoxMjIsIi4vaGFzaC9yaXBlbWQiOjEyMywiLi9oYXNoL3NoYSI6MTI0LCIuL2hhc2gvdXRpbHMiOjEyNX1dLDEyMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBoYXNoID0gcmVxdWlyZSgnLi4vaGFzaCcpOwp2YXIgdXRpbHMgPSBoYXNoLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0OwoKZnVuY3Rpb24gQmxvY2tIYXNoKCkgewogIHRoaXMucGVuZGluZyA9IG51bGw7CiAgdGhpcy5wZW5kaW5nVG90YWwgPSAwOwogIHRoaXMuYmxvY2tTaXplID0gdGhpcy5jb25zdHJ1Y3Rvci5ibG9ja1NpemU7CiAgdGhpcy5vdXRTaXplID0gdGhpcy5jb25zdHJ1Y3Rvci5vdXRTaXplOwogIHRoaXMuaG1hY1N0cmVuZ3RoID0gdGhpcy5jb25zdHJ1Y3Rvci5obWFjU3RyZW5ndGg7CiAgdGhpcy5wYWRMZW5ndGggPSB0aGlzLmNvbnN0cnVjdG9yLnBhZExlbmd0aCAvIDg7CiAgdGhpcy5lbmRpYW4gPSAnYmlnJzsKCiAgdGhpcy5fZGVsdGE4ID0gdGhpcy5ibG9ja1NpemUgLyA4OwogIHRoaXMuX2RlbHRhMzIgPSB0aGlzLmJsb2NrU2l6ZSAvIDMyOwp9CmV4cG9ydHMuQmxvY2tIYXNoID0gQmxvY2tIYXNoOwoKQmxvY2tIYXNoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUobXNnLCBlbmMpIHsKICAvLyBDb252ZXJ0IG1lc3NhZ2UgdG8gYXJyYXksIHBhZCBpdCwgYW5kIGpvaW4gaW50byAzMmJpdCBibG9ja3MKICBtc2cgPSB1dGlscy50b0FycmF5KG1zZywgZW5jKTsKICBpZiAoIXRoaXMucGVuZGluZykKICAgIHRoaXMucGVuZGluZyA9IG1zZzsKICBlbHNlCiAgICB0aGlzLnBlbmRpbmcgPSB0aGlzLnBlbmRpbmcuY29uY2F0KG1zZyk7CiAgdGhpcy5wZW5kaW5nVG90YWwgKz0gbXNnLmxlbmd0aDsKCiAgLy8gRW5vdWdoIGRhdGEsIHRyeSB1cGRhdGluZwogIGlmICh0aGlzLnBlbmRpbmcubGVuZ3RoID49IHRoaXMuX2RlbHRhOCkgewogICAgbXNnID0gdGhpcy5wZW5kaW5nOwoKICAgIC8vIFByb2Nlc3MgcGVuZGluZyBkYXRhIGluIGJsb2NrcwogICAgdmFyIHIgPSBtc2cubGVuZ3RoICUgdGhpcy5fZGVsdGE4OwogICAgdGhpcy5wZW5kaW5nID0gbXNnLnNsaWNlKG1zZy5sZW5ndGggLSByLCBtc2cubGVuZ3RoKTsKICAgIGlmICh0aGlzLnBlbmRpbmcubGVuZ3RoID09PSAwKQogICAgICB0aGlzLnBlbmRpbmcgPSBudWxsOwoKICAgIG1zZyA9IHV0aWxzLmpvaW4zMihtc2csIDAsIG1zZy5sZW5ndGggLSByLCB0aGlzLmVuZGlhbik7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkgKz0gdGhpcy5fZGVsdGEzMikKICAgICAgdGhpcy5fdXBkYXRlKG1zZywgaSwgaSArIHRoaXMuX2RlbHRhMzIpOwogIH0KCiAgcmV0dXJuIHRoaXM7Cn07CgpCbG9ja0hhc2gucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICB0aGlzLnVwZGF0ZSh0aGlzLl9wYWQoKSk7CiAgYXNzZXJ0KHRoaXMucGVuZGluZyA9PT0gbnVsbCk7CgogIHJldHVybiB0aGlzLl9kaWdlc3QoZW5jKTsKfTsKCkJsb2NrSGFzaC5wcm90b3R5cGUuX3BhZCA9IGZ1bmN0aW9uIHBhZCgpIHsKICB2YXIgbGVuID0gdGhpcy5wZW5kaW5nVG90YWw7CiAgdmFyIGJ5dGVzID0gdGhpcy5fZGVsdGE4OwogIHZhciBrID0gYnl0ZXMgLSAoKGxlbiArIHRoaXMucGFkTGVuZ3RoKSAlIGJ5dGVzKTsKICB2YXIgcmVzID0gbmV3IEFycmF5KGsgKyB0aGlzLnBhZExlbmd0aCk7CiAgcmVzWzBdID0gMHg4MDsKICBmb3IgKHZhciBpID0gMTsgaSA8IGs7IGkrKykKICAgIHJlc1tpXSA9IDA7CgogIC8vIEFwcGVuZCBsZW5ndGgKICBsZW4gPDw9IDM7CiAgaWYgKHRoaXMuZW5kaWFuID09PSAnYmlnJykgewogICAgZm9yICh2YXIgdCA9IDg7IHQgPCB0aGlzLnBhZExlbmd0aDsgdCsrKQogICAgICByZXNbaSsrXSA9IDA7CgogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAobGVuID4+PiAyNCkgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiAxNikgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiA4KSAmIDB4ZmY7CiAgICByZXNbaSsrXSA9IGxlbiAmIDB4ZmY7CiAgfSBlbHNlIHsKICAgIHJlc1tpKytdID0gbGVuICYgMHhmZjsKICAgIHJlc1tpKytdID0gKGxlbiA+Pj4gOCkgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiAxNikgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiAyNCkgJiAweGZmOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwoKICAgIGZvciAodmFyIHQgPSA4OyB0IDwgdGhpcy5wYWRMZW5ndGg7IHQrKykKICAgICAgcmVzW2krK10gPSAwOwogIH0KCiAgcmV0dXJuIHJlczsKfTsKCn0seyIuLi9oYXNoIjoxMjB9XSwxMjI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaG1hYyA9IGV4cG9ydHM7Cgp2YXIgaGFzaCA9IHJlcXVpcmUoJy4uL2hhc2gnKTsKdmFyIHV0aWxzID0gaGFzaC51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKCmZ1bmN0aW9uIEhtYWMoaGFzaCwga2V5LCBlbmMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSG1hYykpCiAgICByZXR1cm4gbmV3IEhtYWMoaGFzaCwga2V5LCBlbmMpOwogIHRoaXMuSGFzaCA9IGhhc2g7CiAgdGhpcy5ibG9ja1NpemUgPSBoYXNoLmJsb2NrU2l6ZSAvIDg7CiAgdGhpcy5vdXRTaXplID0gaGFzaC5vdXRTaXplIC8gODsKICB0aGlzLmlubmVyID0gbnVsbDsKICB0aGlzLm91dGVyID0gbnVsbDsKCiAgdGhpcy5faW5pdCh1dGlscy50b0FycmF5KGtleSwgZW5jKSk7Cn0KbW9kdWxlLmV4cG9ydHMgPSBIbWFjOwoKSG1hYy5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0KGtleSkgewogIC8vIFNob3J0ZW4ga2V5LCBpZiBuZWVkZWQKICBpZiAoa2V5Lmxlbmd0aCA+IHRoaXMuYmxvY2tTaXplKQogICAga2V5ID0gbmV3IHRoaXMuSGFzaCgpLnVwZGF0ZShrZXkpLmRpZ2VzdCgpOwogIGFzc2VydChrZXkubGVuZ3RoIDw9IHRoaXMuYmxvY2tTaXplKTsKCiAgLy8gQWRkIHBhZGRpbmcgdG8ga2V5CiAgZm9yICh2YXIgaSA9IGtleS5sZW5ndGg7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgaSsrKQogICAga2V5LnB1c2goMCk7CgogIGZvciAodmFyIGkgPSAwOyBpIDwga2V5Lmxlbmd0aDsgaSsrKQogICAga2V5W2ldIF49IDB4MzY7CiAgdGhpcy5pbm5lciA9IG5ldyB0aGlzLkhhc2goKS51cGRhdGUoa2V5KTsKCiAgLy8gMHgzNiBeIDB4NWMgPSAweDZhCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyBpKyspCiAgICBrZXlbaV0gXj0gMHg2YTsKICB0aGlzLm91dGVyID0gbmV3IHRoaXMuSGFzaCgpLnVwZGF0ZShrZXkpOwp9OwoKSG1hYy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKG1zZywgZW5jKSB7CiAgdGhpcy5pbm5lci51cGRhdGUobXNnLCBlbmMpOwogIHJldHVybiB0aGlzOwp9OwoKSG1hYy5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogIHRoaXMub3V0ZXIudXBkYXRlKHRoaXMuaW5uZXIuZGlnZXN0KCkpOwogIHJldHVybiB0aGlzLm91dGVyLmRpZ2VzdChlbmMpOwp9OwoKfSx7Ii4uL2hhc2giOjEyMH1dLDEyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBoYXNoID0gcmVxdWlyZSgnLi4vaGFzaCcpOwp2YXIgdXRpbHMgPSBoYXNoLnV0aWxzOwoKdmFyIHJvdGwzMiA9IHV0aWxzLnJvdGwzMjsKdmFyIHN1bTMyID0gdXRpbHMuc3VtMzI7CnZhciBzdW0zMl8zID0gdXRpbHMuc3VtMzJfMzsKdmFyIHN1bTMyXzQgPSB1dGlscy5zdW0zMl80Owp2YXIgQmxvY2tIYXNoID0gaGFzaC5jb21tb24uQmxvY2tIYXNoOwoKZnVuY3Rpb24gUklQRU1EMTYwKCkgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSSVBFTUQxNjApKQogICAgcmV0dXJuIG5ldyBSSVBFTUQxNjAoKTsKCiAgQmxvY2tIYXNoLmNhbGwodGhpcyk7CgogIHRoaXMuaCA9IFsgMHg2NzQ1MjMwMSwgMHhlZmNkYWI4OSwgMHg5OGJhZGNmZSwgMHgxMDMyNTQ3NiwgMHhjM2QyZTFmMCBdOwogIHRoaXMuZW5kaWFuID0gJ2xpdHRsZSc7Cn0KdXRpbHMuaW5oZXJpdHMoUklQRU1EMTYwLCBCbG9ja0hhc2gpOwpleHBvcnRzLnJpcGVtZDE2MCA9IFJJUEVNRDE2MDsKClJJUEVNRDE2MC5ibG9ja1NpemUgPSA1MTI7ClJJUEVNRDE2MC5vdXRTaXplID0gMTYwOwpSSVBFTUQxNjAuaG1hY1N0cmVuZ3RoID0gMTkyOwpSSVBFTUQxNjAucGFkTGVuZ3RoID0gNjQ7CgpSSVBFTUQxNjAucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUobXNnLCBzdGFydCkgewogIHZhciBBID0gdGhpcy5oWzBdOwogIHZhciBCID0gdGhpcy5oWzFdOwogIHZhciBDID0gdGhpcy5oWzJdOwogIHZhciBEID0gdGhpcy5oWzNdOwogIHZhciBFID0gdGhpcy5oWzRdOwogIHZhciBBaCA9IEE7CiAgdmFyIEJoID0gQjsKICB2YXIgQ2ggPSBDOwogIHZhciBEaCA9IEQ7CiAgdmFyIEVoID0gRTsKICBmb3IgKHZhciBqID0gMDsgaiA8IDgwOyBqKyspIHsKICAgIHZhciBUID0gc3VtMzIoCiAgICAgIHJvdGwzMigKICAgICAgICBzdW0zMl80KEEsIGYoaiwgQiwgQywgRCksIG1zZ1tyW2pdICsgc3RhcnRdLCBLKGopKSwKICAgICAgICBzW2pdKSwKICAgICAgRSk7CiAgICBBID0gRTsKICAgIEUgPSBEOwogICAgRCA9IHJvdGwzMihDLCAxMCk7CiAgICBDID0gQjsKICAgIEIgPSBUOwogICAgVCA9IHN1bTMyKAogICAgICByb3RsMzIoCiAgICAgICAgc3VtMzJfNChBaCwgZig3OSAtIGosIEJoLCBDaCwgRGgpLCBtc2dbcmhbal0gKyBzdGFydF0sIEtoKGopKSwKICAgICAgICBzaFtqXSksCiAgICAgIEVoKTsKICAgIEFoID0gRWg7CiAgICBFaCA9IERoOwogICAgRGggPSByb3RsMzIoQ2gsIDEwKTsKICAgIENoID0gQmg7CiAgICBCaCA9IFQ7CiAgfQogIFQgPSBzdW0zMl8zKHRoaXMuaFsxXSwgQywgRGgpOwogIHRoaXMuaFsxXSA9IHN1bTMyXzModGhpcy5oWzJdLCBELCBFaCk7CiAgdGhpcy5oWzJdID0gc3VtMzJfMyh0aGlzLmhbM10sIEUsIEFoKTsKICB0aGlzLmhbM10gPSBzdW0zMl8zKHRoaXMuaFs0XSwgQSwgQmgpOwogIHRoaXMuaFs0XSA9IHN1bTMyXzModGhpcy5oWzBdLCBCLCBDaCk7CiAgdGhpcy5oWzBdID0gVDsKfTsKClJJUEVNRDE2MC5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICBpZiAoZW5jID09PSAnaGV4JykKICAgIHJldHVybiB1dGlscy50b0hleDMyKHRoaXMuaCwgJ2xpdHRsZScpOwogIGVsc2UKICAgIHJldHVybiB1dGlscy5zcGxpdDMyKHRoaXMuaCwgJ2xpdHRsZScpOwp9OwoKZnVuY3Rpb24gZihqLCB4LCB5LCB6KSB7CiAgaWYgKGogPD0gMTUpCiAgICByZXR1cm4geCBeIHkgXiB6OwogIGVsc2UgaWYgKGogPD0gMzEpCiAgICByZXR1cm4gKHggJiB5KSB8ICgofngpICYgeik7CiAgZWxzZSBpZiAoaiA8PSA0NykKICAgIHJldHVybiAoeCB8ICh+eSkpIF4gejsKICBlbHNlIGlmIChqIDw9IDYzKQogICAgcmV0dXJuICh4ICYgeikgfCAoeSAmICh+eikpOwogIGVsc2UKICAgIHJldHVybiB4IF4gKHkgfCAofnopKTsKfQoKZnVuY3Rpb24gSyhqKSB7CiAgaWYgKGogPD0gMTUpCiAgICByZXR1cm4gMHgwMDAwMDAwMDsKICBlbHNlIGlmIChqIDw9IDMxKQogICAgcmV0dXJuIDB4NWE4Mjc5OTk7CiAgZWxzZSBpZiAoaiA8PSA0NykKICAgIHJldHVybiAweDZlZDllYmExOwogIGVsc2UgaWYgKGogPD0gNjMpCiAgICByZXR1cm4gMHg4ZjFiYmNkYzsKICBlbHNlCiAgICByZXR1cm4gMHhhOTUzZmQ0ZTsKfQoKZnVuY3Rpb24gS2goaikgewogIGlmIChqIDw9IDE1KQogICAgcmV0dXJuIDB4NTBhMjhiZTY7CiAgZWxzZSBpZiAoaiA8PSAzMSkKICAgIHJldHVybiAweDVjNGRkMTI0OwogIGVsc2UgaWYgKGogPD0gNDcpCiAgICByZXR1cm4gMHg2ZDcwM2VmMzsKICBlbHNlIGlmIChqIDw9IDYzKQogICAgcmV0dXJuIDB4N2E2ZDc2ZTk7CiAgZWxzZQogICAgcmV0dXJuIDB4MDAwMDAwMDA7Cn0KCnZhciByID0gWwogIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsCiAgNywgNCwgMTMsIDEsIDEwLCA2LCAxNSwgMywgMTIsIDAsIDksIDUsIDIsIDE0LCAxMSwgOCwKICAzLCAxMCwgMTQsIDQsIDksIDE1LCA4LCAxLCAyLCA3LCAwLCA2LCAxMywgMTEsIDUsIDEyLAogIDEsIDksIDExLCAxMCwgMCwgOCwgMTIsIDQsIDEzLCAzLCA3LCAxNSwgMTQsIDUsIDYsIDIsCiAgNCwgMCwgNSwgOSwgNywgMTIsIDIsIDEwLCAxNCwgMSwgMywgOCwgMTEsIDYsIDE1LCAxMwpdOwoKdmFyIHJoID0gWwogIDUsIDE0LCA3LCAwLCA5LCAyLCAxMSwgNCwgMTMsIDYsIDE1LCA4LCAxLCAxMCwgMywgMTIsCiAgNiwgMTEsIDMsIDcsIDAsIDEzLCA1LCAxMCwgMTQsIDE1LCA4LCAxMiwgNCwgOSwgMSwgMiwKICAxNSwgNSwgMSwgMywgNywgMTQsIDYsIDksIDExLCA4LCAxMiwgMiwgMTAsIDAsIDQsIDEzLAogIDgsIDYsIDQsIDEsIDMsIDExLCAxNSwgMCwgNSwgMTIsIDIsIDEzLCA5LCA3LCAxMCwgMTQsCiAgMTIsIDE1LCAxMCwgNCwgMSwgNSwgOCwgNywgNiwgMiwgMTMsIDE0LCAwLCAzLCA5LCAxMQpdOwoKdmFyIHMgPSBbCiAgMTEsIDE0LCAxNSwgMTIsIDUsIDgsIDcsIDksIDExLCAxMywgMTQsIDE1LCA2LCA3LCA5LCA4LAogIDcsIDYsIDgsIDEzLCAxMSwgOSwgNywgMTUsIDcsIDEyLCAxNSwgOSwgMTEsIDcsIDEzLCAxMiwKICAxMSwgMTMsIDYsIDcsIDE0LCA5LCAxMywgMTUsIDE0LCA4LCAxMywgNiwgNSwgMTIsIDcsIDUsCiAgMTEsIDEyLCAxNCwgMTUsIDE0LCAxNSwgOSwgOCwgOSwgMTQsIDUsIDYsIDgsIDYsIDUsIDEyLAogIDksIDE1LCA1LCAxMSwgNiwgOCwgMTMsIDEyLCA1LCAxMiwgMTMsIDE0LCAxMSwgOCwgNSwgNgpdOwoKdmFyIHNoID0gWwogIDgsIDksIDksIDExLCAxMywgMTUsIDE1LCA1LCA3LCA3LCA4LCAxMSwgMTQsIDE0LCAxMiwgNiwKICA5LCAxMywgMTUsIDcsIDEyLCA4LCA5LCAxMSwgNywgNywgMTIsIDcsIDYsIDE1LCAxMywgMTEsCiAgOSwgNywgMTUsIDExLCA4LCA2LCA2LCAxNCwgMTIsIDEzLCA1LCAxNCwgMTMsIDEzLCA3LCA1LAogIDE1LCA1LCA4LCAxMSwgMTQsIDE0LCA2LCAxNCwgNiwgOSwgMTIsIDksIDEyLCA1LCAxNSwgOCwKICA4LCA1LCAxMiwgOSwgMTIsIDUsIDE0LCA2LCA4LCAxMywgNiwgNSwgMTUsIDEzLCAxMSwgMTEKXTsKCn0seyIuLi9oYXNoIjoxMjB9XSwxMjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaGFzaCA9IHJlcXVpcmUoJy4uL2hhc2gnKTsKdmFyIHV0aWxzID0gaGFzaC51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKCnZhciByb3RyMzIgPSB1dGlscy5yb3RyMzI7CnZhciByb3RsMzIgPSB1dGlscy5yb3RsMzI7CnZhciBzdW0zMiA9IHV0aWxzLnN1bTMyOwp2YXIgc3VtMzJfNCA9IHV0aWxzLnN1bTMyXzQ7CnZhciBzdW0zMl81ID0gdXRpbHMuc3VtMzJfNTsKdmFyIHJvdHI2NF9oaSA9IHV0aWxzLnJvdHI2NF9oaTsKdmFyIHJvdHI2NF9sbyA9IHV0aWxzLnJvdHI2NF9sbzsKdmFyIHNocjY0X2hpID0gdXRpbHMuc2hyNjRfaGk7CnZhciBzaHI2NF9sbyA9IHV0aWxzLnNocjY0X2xvOwp2YXIgc3VtNjQgPSB1dGlscy5zdW02NDsKdmFyIHN1bTY0X2hpID0gdXRpbHMuc3VtNjRfaGk7CnZhciBzdW02NF9sbyA9IHV0aWxzLnN1bTY0X2xvOwp2YXIgc3VtNjRfNF9oaSA9IHV0aWxzLnN1bTY0XzRfaGk7CnZhciBzdW02NF80X2xvID0gdXRpbHMuc3VtNjRfNF9sbzsKdmFyIHN1bTY0XzVfaGkgPSB1dGlscy5zdW02NF81X2hpOwp2YXIgc3VtNjRfNV9sbyA9IHV0aWxzLnN1bTY0XzVfbG87CnZhciBCbG9ja0hhc2ggPSBoYXNoLmNvbW1vbi5CbG9ja0hhc2g7Cgp2YXIgc2hhMjU2X0sgPSBbCiAgMHg0MjhhMmY5OCwgMHg3MTM3NDQ5MSwgMHhiNWMwZmJjZiwgMHhlOWI1ZGJhNSwKICAweDM5NTZjMjViLCAweDU5ZjExMWYxLCAweDkyM2Y4MmE0LCAweGFiMWM1ZWQ1LAogIDB4ZDgwN2FhOTgsIDB4MTI4MzViMDEsIDB4MjQzMTg1YmUsIDB4NTUwYzdkYzMsCiAgMHg3MmJlNWQ3NCwgMHg4MGRlYjFmZSwgMHg5YmRjMDZhNywgMHhjMTliZjE3NCwKICAweGU0OWI2OWMxLCAweGVmYmU0Nzg2LCAweDBmYzE5ZGM2LCAweDI0MGNhMWNjLAogIDB4MmRlOTJjNmYsIDB4NGE3NDg0YWEsIDB4NWNiMGE5ZGMsIDB4NzZmOTg4ZGEsCiAgMHg5ODNlNTE1MiwgMHhhODMxYzY2ZCwgMHhiMDAzMjdjOCwgMHhiZjU5N2ZjNywKICAweGM2ZTAwYmYzLCAweGQ1YTc5MTQ3LCAweDA2Y2E2MzUxLCAweDE0MjkyOTY3LAogIDB4MjdiNzBhODUsIDB4MmUxYjIxMzgsIDB4NGQyYzZkZmMsIDB4NTMzODBkMTMsCiAgMHg2NTBhNzM1NCwgMHg3NjZhMGFiYiwgMHg4MWMyYzkyZSwgMHg5MjcyMmM4NSwKICAweGEyYmZlOGExLCAweGE4MWE2NjRiLCAweGMyNGI4YjcwLCAweGM3NmM1MWEzLAogIDB4ZDE5MmU4MTksIDB4ZDY5OTA2MjQsIDB4ZjQwZTM1ODUsIDB4MTA2YWEwNzAsCiAgMHgxOWE0YzExNiwgMHgxZTM3NmMwOCwgMHgyNzQ4Nzc0YywgMHgzNGIwYmNiNSwKICAweDM5MWMwY2IzLCAweDRlZDhhYTRhLCAweDViOWNjYTRmLCAweDY4MmU2ZmYzLAogIDB4NzQ4ZjgyZWUsIDB4NzhhNTYzNmYsIDB4ODRjODc4MTQsIDB4OGNjNzAyMDgsCiAgMHg5MGJlZmZmYSwgMHhhNDUwNmNlYiwgMHhiZWY5YTNmNywgMHhjNjcxNzhmMgpdOwoKdmFyIHNoYTUxMl9LID0gWwogIDB4NDI4YTJmOTgsIDB4ZDcyOGFlMjIsIDB4NzEzNzQ0OTEsIDB4MjNlZjY1Y2QsCiAgMHhiNWMwZmJjZiwgMHhlYzRkM2IyZiwgMHhlOWI1ZGJhNSwgMHg4MTg5ZGJiYywKICAweDM5NTZjMjViLCAweGYzNDhiNTM4LCAweDU5ZjExMWYxLCAweGI2MDVkMDE5LAogIDB4OTIzZjgyYTQsIDB4YWYxOTRmOWIsIDB4YWIxYzVlZDUsIDB4ZGE2ZDgxMTgsCiAgMHhkODA3YWE5OCwgMHhhMzAzMDI0MiwgMHgxMjgzNWIwMSwgMHg0NTcwNmZiZSwKICAweDI0MzE4NWJlLCAweDRlZTRiMjhjLCAweDU1MGM3ZGMzLCAweGQ1ZmZiNGUyLAogIDB4NzJiZTVkNzQsIDB4ZjI3Yjg5NmYsIDB4ODBkZWIxZmUsIDB4M2IxNjk2YjEsCiAgMHg5YmRjMDZhNywgMHgyNWM3MTIzNSwgMHhjMTliZjE3NCwgMHhjZjY5MjY5NCwKICAweGU0OWI2OWMxLCAweDllZjE0YWQyLCAweGVmYmU0Nzg2LCAweDM4NGYyNWUzLAogIDB4MGZjMTlkYzYsIDB4OGI4Y2Q1YjUsIDB4MjQwY2ExY2MsIDB4NzdhYzljNjUsCiAgMHgyZGU5MmM2ZiwgMHg1OTJiMDI3NSwgMHg0YTc0ODRhYSwgMHg2ZWE2ZTQ4MywKICAweDVjYjBhOWRjLCAweGJkNDFmYmQ0LCAweDc2Zjk4OGRhLCAweDgzMTE1M2I1LAogIDB4OTgzZTUxNTIsIDB4ZWU2NmRmYWIsIDB4YTgzMWM2NmQsIDB4MmRiNDMyMTAsCiAgMHhiMDAzMjdjOCwgMHg5OGZiMjEzZiwgMHhiZjU5N2ZjNywgMHhiZWVmMGVlNCwKICAweGM2ZTAwYmYzLCAweDNkYTg4ZmMyLCAweGQ1YTc5MTQ3LCAweDkzMGFhNzI1LAogIDB4MDZjYTYzNTEsIDB4ZTAwMzgyNmYsIDB4MTQyOTI5NjcsIDB4MGEwZTZlNzAsCiAgMHgyN2I3MGE4NSwgMHg0NmQyMmZmYywgMHgyZTFiMjEzOCwgMHg1YzI2YzkyNiwKICAweDRkMmM2ZGZjLCAweDVhYzQyYWVkLCAweDUzMzgwZDEzLCAweDlkOTViM2RmLAogIDB4NjUwYTczNTQsIDB4OGJhZjYzZGUsIDB4NzY2YTBhYmIsIDB4M2M3N2IyYTgsCiAgMHg4MWMyYzkyZSwgMHg0N2VkYWVlNiwgMHg5MjcyMmM4NSwgMHgxNDgyMzUzYiwKICAweGEyYmZlOGExLCAweDRjZjEwMzY0LCAweGE4MWE2NjRiLCAweGJjNDIzMDAxLAogIDB4YzI0YjhiNzAsIDB4ZDBmODk3OTEsIDB4Yzc2YzUxYTMsIDB4MDY1NGJlMzAsCiAgMHhkMTkyZTgxOSwgMHhkNmVmNTIxOCwgMHhkNjk5MDYyNCwgMHg1NTY1YTkxMCwKICAweGY0MGUzNTg1LCAweDU3NzEyMDJhLCAweDEwNmFhMDcwLCAweDMyYmJkMWI4LAogIDB4MTlhNGMxMTYsIDB4YjhkMmQwYzgsIDB4MWUzNzZjMDgsIDB4NTE0MWFiNTMsCiAgMHgyNzQ4Nzc0YywgMHhkZjhlZWI5OSwgMHgzNGIwYmNiNSwgMHhlMTliNDhhOCwKICAweDM5MWMwY2IzLCAweGM1Yzk1YTYzLCAweDRlZDhhYTRhLCAweGUzNDE4YWNiLAogIDB4NWI5Y2NhNGYsIDB4Nzc2M2UzNzMsIDB4NjgyZTZmZjMsIDB4ZDZiMmI4YTMsCiAgMHg3NDhmODJlZSwgMHg1ZGVmYjJmYywgMHg3OGE1NjM2ZiwgMHg0MzE3MmY2MCwKICAweDg0Yzg3ODE0LCAweGExZjBhYjcyLCAweDhjYzcwMjA4LCAweDFhNjQzOWVjLAogIDB4OTBiZWZmZmEsIDB4MjM2MzFlMjgsIDB4YTQ1MDZjZWIsIDB4ZGU4MmJkZTksCiAgMHhiZWY5YTNmNywgMHhiMmM2NzkxNSwgMHhjNjcxNzhmMiwgMHhlMzcyNTMyYiwKICAweGNhMjczZWNlLCAweGVhMjY2MTljLCAweGQxODZiOGM3LCAweDIxYzBjMjA3LAogIDB4ZWFkYTdkZDYsIDB4Y2RlMGViMWUsIDB4ZjU3ZDRmN2YsIDB4ZWU2ZWQxNzgsCiAgMHgwNmYwNjdhYSwgMHg3MjE3NmZiYSwgMHgwYTYzN2RjNSwgMHhhMmM4OThhNiwKICAweDExM2Y5ODA0LCAweGJlZjkwZGFlLCAweDFiNzEwYjM1LCAweDEzMWM0NzFiLAogIDB4MjhkYjc3ZjUsIDB4MjMwNDdkODQsIDB4MzJjYWFiN2IsIDB4NDBjNzI0OTMsCiAgMHgzYzllYmUwYSwgMHgxNWM5YmViYywgMHg0MzFkNjdjNCwgMHg5YzEwMGQ0YywKICAweDRjYzVkNGJlLCAweGNiM2U0MmI2LCAweDU5N2YyOTljLCAweGZjNjU3ZTJhLAogIDB4NWZjYjZmYWIsIDB4M2FkNmZhZWMsIDB4NmM0NDE5OGMsIDB4NGE0NzU4MTcKXTsKCnZhciBzaGExX0sgPSBbCiAgMHg1QTgyNzk5OSwgMHg2RUQ5RUJBMSwKICAweDhGMUJCQ0RDLCAweENBNjJDMUQ2Cl07CgpmdW5jdGlvbiBTSEEyNTYoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNIQTI1NikpCiAgICByZXR1cm4gbmV3IFNIQTI1NigpOwoKICBCbG9ja0hhc2guY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4NmEwOWU2NjcsIDB4YmI2N2FlODUsIDB4M2M2ZWYzNzIsIDB4YTU0ZmY1M2EsCiAgICAgICAgICAgICAweDUxMGU1MjdmLCAweDliMDU2ODhjLCAweDFmODNkOWFiLCAweDViZTBjZDE5IF07CiAgdGhpcy5rID0gc2hhMjU2X0s7CiAgdGhpcy5XID0gbmV3IEFycmF5KDY0KTsKfQp1dGlscy5pbmhlcml0cyhTSEEyNTYsIEJsb2NrSGFzaCk7CmV4cG9ydHMuc2hhMjU2ID0gU0hBMjU2OwoKU0hBMjU2LmJsb2NrU2l6ZSA9IDUxMjsKU0hBMjU2Lm91dFNpemUgPSAyNTY7ClNIQTI1Ni5obWFjU3RyZW5ndGggPSAxOTI7ClNIQTI1Ni5wYWRMZW5ndGggPSA2NDsKClNIQTI1Ni5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIF91cGRhdGUobXNnLCBzdGFydCkgewogIHZhciBXID0gdGhpcy5XOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspCiAgICBXW2ldID0gbXNnW3N0YXJ0ICsgaV07CiAgZm9yICg7IGkgPCBXLmxlbmd0aDsgaSsrKQogICAgV1tpXSA9IHN1bTMyXzQoZzFfMjU2KFdbaSAtIDJdKSwgV1tpIC0gN10sIGcwXzI1NihXW2kgLSAxNV0pLCBXW2kgLSAxNl0pOwoKICB2YXIgYSA9IHRoaXMuaFswXTsKICB2YXIgYiA9IHRoaXMuaFsxXTsKICB2YXIgYyA9IHRoaXMuaFsyXTsKICB2YXIgZCA9IHRoaXMuaFszXTsKICB2YXIgZSA9IHRoaXMuaFs0XTsKICB2YXIgZiA9IHRoaXMuaFs1XTsKICB2YXIgZyA9IHRoaXMuaFs2XTsKICB2YXIgaCA9IHRoaXMuaFs3XTsKCiAgYXNzZXJ0KHRoaXMuay5sZW5ndGggPT09IFcubGVuZ3RoKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IFcubGVuZ3RoOyBpKyspIHsKICAgIHZhciBUMSA9IHN1bTMyXzUoaCwgczFfMjU2KGUpLCBjaDMyKGUsIGYsIGcpLCB0aGlzLmtbaV0sIFdbaV0pOwogICAgdmFyIFQyID0gc3VtMzIoczBfMjU2KGEpLCBtYWozMihhLCBiLCBjKSk7CiAgICBoID0gZzsKICAgIGcgPSBmOwogICAgZiA9IGU7CiAgICBlID0gc3VtMzIoZCwgVDEpOwogICAgZCA9IGM7CiAgICBjID0gYjsKICAgIGIgPSBhOwogICAgYSA9IHN1bTMyKFQxLCBUMik7CiAgfQoKICB0aGlzLmhbMF0gPSBzdW0zMih0aGlzLmhbMF0sIGEpOwogIHRoaXMuaFsxXSA9IHN1bTMyKHRoaXMuaFsxXSwgYik7CiAgdGhpcy5oWzJdID0gc3VtMzIodGhpcy5oWzJdLCBjKTsKICB0aGlzLmhbM10gPSBzdW0zMih0aGlzLmhbM10sIGQpOwogIHRoaXMuaFs0XSA9IHN1bTMyKHRoaXMuaFs0XSwgZSk7CiAgdGhpcy5oWzVdID0gc3VtMzIodGhpcy5oWzVdLCBmKTsKICB0aGlzLmhbNl0gPSBzdW0zMih0aGlzLmhbNl0sIGcpOwogIHRoaXMuaFs3XSA9IHN1bTMyKHRoaXMuaFs3XSwgaCk7Cn07CgpTSEEyNTYucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiBkaWdlc3QoZW5jKSB7CiAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICByZXR1cm4gdXRpbHMudG9IZXgzMih0aGlzLmgsICdiaWcnKTsKICBlbHNlCiAgICByZXR1cm4gdXRpbHMuc3BsaXQzMih0aGlzLmgsICdiaWcnKTsKfTsKCmZ1bmN0aW9uIFNIQTIyNCgpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0hBMjI0KSkKICAgIHJldHVybiBuZXcgU0hBMjI0KCk7CgogIFNIQTI1Ni5jYWxsKHRoaXMpOwogIHRoaXMuaCA9IFsgMHhjMTA1OWVkOCwgMHgzNjdjZDUwNywgMHgzMDcwZGQxNywgMHhmNzBlNTkzOSwKICAgICAgICAgICAgIDB4ZmZjMDBiMzEsIDB4Njg1ODE1MTEsIDB4NjRmOThmYTcsIDB4YmVmYTRmYTQgXTsKfQp1dGlscy5pbmhlcml0cyhTSEEyMjQsIFNIQTI1Nik7CmV4cG9ydHMuc2hhMjI0ID0gU0hBMjI0OwoKU0hBMjI0LmJsb2NrU2l6ZSA9IDUxMjsKU0hBMjI0Lm91dFNpemUgPSAyMjQ7ClNIQTIyNC5obWFjU3RyZW5ndGggPSAxOTI7ClNIQTIyNC5wYWRMZW5ndGggPSA2NDsKClNIQTIyNC5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICAvLyBKdXN0IHRydW5jYXRlIG91dHB1dAogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHV0aWxzLnRvSGV4MzIodGhpcy5oLnNsaWNlKDAsIDcpLCAnYmlnJyk7CiAgZWxzZQogICAgcmV0dXJuIHV0aWxzLnNwbGl0MzIodGhpcy5oLnNsaWNlKDAsIDcpLCAnYmlnJyk7Cn07CgpmdW5jdGlvbiBTSEE1MTIoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNIQTUxMikpCiAgICByZXR1cm4gbmV3IFNIQTUxMigpOwoKICBCbG9ja0hhc2guY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4NmEwOWU2NjcsIDB4ZjNiY2M5MDgsCiAgICAgICAgICAgICAweGJiNjdhZTg1LCAweDg0Y2FhNzNiLAogICAgICAgICAgICAgMHgzYzZlZjM3MiwgMHhmZTk0ZjgyYiwKICAgICAgICAgICAgIDB4YTU0ZmY1M2EsIDB4NWYxZDM2ZjEsCiAgICAgICAgICAgICAweDUxMGU1MjdmLCAweGFkZTY4MmQxLAogICAgICAgICAgICAgMHg5YjA1Njg4YywgMHgyYjNlNmMxZiwKICAgICAgICAgICAgIDB4MWY4M2Q5YWIsIDB4ZmI0MWJkNmIsCiAgICAgICAgICAgICAweDViZTBjZDE5LCAweDEzN2UyMTc5IF07CiAgdGhpcy5rID0gc2hhNTEyX0s7CiAgdGhpcy5XID0gbmV3IEFycmF5KDE2MCk7Cn0KdXRpbHMuaW5oZXJpdHMoU0hBNTEyLCBCbG9ja0hhc2gpOwpleHBvcnRzLnNoYTUxMiA9IFNIQTUxMjsKClNIQTUxMi5ibG9ja1NpemUgPSAxMDI0OwpTSEE1MTIub3V0U2l6ZSA9IDUxMjsKU0hBNTEyLmhtYWNTdHJlbmd0aCA9IDE5MjsKU0hBNTEyLnBhZExlbmd0aCA9IDEyODsKClNIQTUxMi5wcm90b3R5cGUuX3ByZXBhcmVCbG9jayA9IGZ1bmN0aW9uIF9wcmVwYXJlQmxvY2sobXNnLCBzdGFydCkgewogIHZhciBXID0gdGhpcy5XOwoKICAvLyAzMiB4IDMyYml0IHdvcmRzCiAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgaSsrKQogICAgV1tpXSA9IG1zZ1tzdGFydCArIGldOwogIGZvciAoOyBpIDwgVy5sZW5ndGg7IGkgKz0gMikgewogICAgdmFyIGMwX2hpID0gZzFfNTEyX2hpKFdbaSAtIDRdLCBXW2kgLSAzXSk7ICAvLyBpIC0gMgogICAgdmFyIGMwX2xvID0gZzFfNTEyX2xvKFdbaSAtIDRdLCBXW2kgLSAzXSk7CiAgICB2YXIgYzFfaGkgPSBXW2kgLSAxNF07ICAvLyBpIC0gNwogICAgdmFyIGMxX2xvID0gV1tpIC0gMTNdOwogICAgdmFyIGMyX2hpID0gZzBfNTEyX2hpKFdbaSAtIDMwXSwgV1tpIC0gMjldKTsgIC8vIGkgLSAxNQogICAgdmFyIGMyX2xvID0gZzBfNTEyX2xvKFdbaSAtIDMwXSwgV1tpIC0gMjldKTsKICAgIHZhciBjM19oaSA9IFdbaSAtIDMyXTsgIC8vIGkgLSAxNgogICAgdmFyIGMzX2xvID0gV1tpIC0gMzFdOwoKICAgIFdbaV0gPSBzdW02NF80X2hpKGMwX2hpLCBjMF9sbywKICAgICAgICAgICAgICAgICAgICAgIGMxX2hpLCBjMV9sbywKICAgICAgICAgICAgICAgICAgICAgIGMyX2hpLCBjMl9sbywKICAgICAgICAgICAgICAgICAgICAgIGMzX2hpLCBjM19sbyk7CiAgICBXW2kgKyAxXSA9IHN1bTY0XzRfbG8oYzBfaGksIGMwX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgIGMxX2hpLCBjMV9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICBjMl9oaSwgYzJfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgYzNfaGksIGMzX2xvKTsKICB9Cn07CgpTSEE1MTIucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiBfdXBkYXRlKG1zZywgc3RhcnQpIHsKICB0aGlzLl9wcmVwYXJlQmxvY2sobXNnLCBzdGFydCk7CgogIHZhciBXID0gdGhpcy5XOwoKICB2YXIgYWggPSB0aGlzLmhbMF07CiAgdmFyIGFsID0gdGhpcy5oWzFdOwogIHZhciBiaCA9IHRoaXMuaFsyXTsKICB2YXIgYmwgPSB0aGlzLmhbM107CiAgdmFyIGNoID0gdGhpcy5oWzRdOwogIHZhciBjbCA9IHRoaXMuaFs1XTsKICB2YXIgZGggPSB0aGlzLmhbNl07CiAgdmFyIGRsID0gdGhpcy5oWzddOwogIHZhciBlaCA9IHRoaXMuaFs4XTsKICB2YXIgZWwgPSB0aGlzLmhbOV07CiAgdmFyIGZoID0gdGhpcy5oWzEwXTsKICB2YXIgZmwgPSB0aGlzLmhbMTFdOwogIHZhciBnaCA9IHRoaXMuaFsxMl07CiAgdmFyIGdsID0gdGhpcy5oWzEzXTsKICB2YXIgaGggPSB0aGlzLmhbMTRdOwogIHZhciBobCA9IHRoaXMuaFsxNV07CgogIGFzc2VydCh0aGlzLmsubGVuZ3RoID09PSBXLmxlbmd0aCk7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBXLmxlbmd0aDsgaSArPSAyKSB7CiAgICB2YXIgYzBfaGkgPSBoaDsKICAgIHZhciBjMF9sbyA9IGhsOwogICAgdmFyIGMxX2hpID0gczFfNTEyX2hpKGVoLCBlbCk7CiAgICB2YXIgYzFfbG8gPSBzMV81MTJfbG8oZWgsIGVsKTsKICAgIHZhciBjMl9oaSA9IGNoNjRfaGkoZWgsIGVsLCBmaCwgZmwsIGdoLCBnbCk7CiAgICB2YXIgYzJfbG8gPSBjaDY0X2xvKGVoLCBlbCwgZmgsIGZsLCBnaCwgZ2wpOwogICAgdmFyIGMzX2hpID0gdGhpcy5rW2ldOwogICAgdmFyIGMzX2xvID0gdGhpcy5rW2kgKyAxXTsKICAgIHZhciBjNF9oaSA9IFdbaV07CiAgICB2YXIgYzRfbG8gPSBXW2kgKyAxXTsKCiAgICB2YXIgVDFfaGkgPSBzdW02NF81X2hpKGMwX2hpLCBjMF9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgYzFfaGksIGMxX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjMl9oaSwgYzJfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGMzX2hpLCBjM19sbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgYzRfaGksIGM0X2xvKTsKICAgIHZhciBUMV9sbyA9IHN1bTY0XzVfbG8oYzBfaGksIGMwX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjMV9oaSwgYzFfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGMyX2hpLCBjMl9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgYzNfaGksIGMzX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjNF9oaSwgYzRfbG8pOwoKICAgIHZhciBjMF9oaSA9IHMwXzUxMl9oaShhaCwgYWwpOwogICAgdmFyIGMwX2xvID0gczBfNTEyX2xvKGFoLCBhbCk7CiAgICB2YXIgYzFfaGkgPSBtYWo2NF9oaShhaCwgYWwsIGJoLCBibCwgY2gsIGNsKTsKICAgIHZhciBjMV9sbyA9IG1hajY0X2xvKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wpOwoKICAgIHZhciBUMl9oaSA9IHN1bTY0X2hpKGMwX2hpLCBjMF9sbywgYzFfaGksIGMxX2xvKTsKICAgIHZhciBUMl9sbyA9IHN1bTY0X2xvKGMwX2hpLCBjMF9sbywgYzFfaGksIGMxX2xvKTsKCiAgICBoaCA9IGdoOwogICAgaGwgPSBnbDsKCiAgICBnaCA9IGZoOwogICAgZ2wgPSBmbDsKCiAgICBmaCA9IGVoOwogICAgZmwgPSBlbDsKCiAgICBlaCA9IHN1bTY0X2hpKGRoLCBkbCwgVDFfaGksIFQxX2xvKTsKICAgIGVsID0gc3VtNjRfbG8oZGwsIGRsLCBUMV9oaSwgVDFfbG8pOwoKICAgIGRoID0gY2g7CiAgICBkbCA9IGNsOwoKICAgIGNoID0gYmg7CiAgICBjbCA9IGJsOwoKICAgIGJoID0gYWg7CiAgICBibCA9IGFsOwoKICAgIGFoID0gc3VtNjRfaGkoVDFfaGksIFQxX2xvLCBUMl9oaSwgVDJfbG8pOwogICAgYWwgPSBzdW02NF9sbyhUMV9oaSwgVDFfbG8sIFQyX2hpLCBUMl9sbyk7CiAgfQoKICBzdW02NCh0aGlzLmgsIDAsIGFoLCBhbCk7CiAgc3VtNjQodGhpcy5oLCAyLCBiaCwgYmwpOwogIHN1bTY0KHRoaXMuaCwgNCwgY2gsIGNsKTsKICBzdW02NCh0aGlzLmgsIDYsIGRoLCBkbCk7CiAgc3VtNjQodGhpcy5oLCA4LCBlaCwgZWwpOwogIHN1bTY0KHRoaXMuaCwgMTAsIGZoLCBmbCk7CiAgc3VtNjQodGhpcy5oLCAxMiwgZ2gsIGdsKTsKICBzdW02NCh0aGlzLmgsIDE0LCBoaCwgaGwpOwp9OwoKU0hBNTEyLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHV0aWxzLnRvSGV4MzIodGhpcy5oLCAnYmlnJyk7CiAgZWxzZQogICAgcmV0dXJuIHV0aWxzLnNwbGl0MzIodGhpcy5oLCAnYmlnJyk7Cn07CgpmdW5jdGlvbiBTSEEzODQoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNIQTM4NCkpCiAgICByZXR1cm4gbmV3IFNIQTM4NCgpOwoKICBTSEE1MTIuY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4Y2JiYjlkNWQsIDB4YzEwNTllZDgsCiAgICAgICAgICAgICAweDYyOWEyOTJhLCAweDM2N2NkNTA3LAogICAgICAgICAgICAgMHg5MTU5MDE1YSwgMHgzMDcwZGQxNywKICAgICAgICAgICAgIDB4MTUyZmVjZDgsIDB4ZjcwZTU5MzksCiAgICAgICAgICAgICAweDY3MzMyNjY3LCAweGZmYzAwYjMxLAogICAgICAgICAgICAgMHg4ZWI0NGE4NywgMHg2ODU4MTUxMSwKICAgICAgICAgICAgIDB4ZGIwYzJlMGQsIDB4NjRmOThmYTcsCiAgICAgICAgICAgICAweDQ3YjU0ODFkLCAweGJlZmE0ZmE0IF07Cn0KdXRpbHMuaW5oZXJpdHMoU0hBMzg0LCBTSEE1MTIpOwpleHBvcnRzLnNoYTM4NCA9IFNIQTM4NDsKClNIQTM4NC5ibG9ja1NpemUgPSAxMDI0OwpTSEEzODQub3V0U2l6ZSA9IDM4NDsKU0hBMzg0LmhtYWNTdHJlbmd0aCA9IDE5MjsKU0hBMzg0LnBhZExlbmd0aCA9IDEyODsKClNIQTM4NC5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICBpZiAoZW5jID09PSAnaGV4JykKICAgIHJldHVybiB1dGlscy50b0hleDMyKHRoaXMuaC5zbGljZSgwLCAxMiksICdiaWcnKTsKICBlbHNlCiAgICByZXR1cm4gdXRpbHMuc3BsaXQzMih0aGlzLmguc2xpY2UoMCwgMTIpLCAnYmlnJyk7Cn07CgpmdW5jdGlvbiBTSEExKCkgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTSEExKSkKICAgIHJldHVybiBuZXcgU0hBMSgpOwoKICBCbG9ja0hhc2guY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4Njc0NTIzMDEsIDB4ZWZjZGFiODksIDB4OThiYWRjZmUsCiAgICAgICAgICAgICAweDEwMzI1NDc2LCAweGMzZDJlMWYwIF07CiAgdGhpcy5XID0gbmV3IEFycmF5KDgwKTsKfQoKdXRpbHMuaW5oZXJpdHMoU0hBMSwgQmxvY2tIYXNoKTsKZXhwb3J0cy5zaGExID0gU0hBMTsKClNIQTEuYmxvY2tTaXplID0gNTEyOwpTSEExLm91dFNpemUgPSAxNjA7ClNIQTEuaG1hY1N0cmVuZ3RoID0gODA7ClNIQTEucGFkTGVuZ3RoID0gNjQ7CgpTSEExLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gX3VwZGF0ZShtc2csIHN0YXJ0KSB7CiAgdmFyIFcgPSB0aGlzLlc7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykKICAgIFdbaV0gPSBtc2dbc3RhcnQgKyBpXTsKCiAgZm9yKDsgaSA8IFcubGVuZ3RoOyBpKyspCiAgICBXW2ldID0gcm90bDMyKFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl0sIDEpOwoKICB2YXIgYSA9IHRoaXMuaFswXTsKICB2YXIgYiA9IHRoaXMuaFsxXTsKICB2YXIgYyA9IHRoaXMuaFsyXTsKICB2YXIgZCA9IHRoaXMuaFszXTsKICB2YXIgZSA9IHRoaXMuaFs0XTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBXLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgcyA9IH5+KGkgLyAyMCk7CiAgICB2YXIgdCA9IHN1bTMyXzUocm90bDMyKGEsIDUpLCBmdF8xKHMsIGIsIGMsIGQpLCBlLCBXW2ldLCBzaGExX0tbc10pOwogICAgZSA9IGQ7CiAgICBkID0gYzsKICAgIGMgPSByb3RsMzIoYiwgMzApOwogICAgYiA9IGE7CiAgICBhID0gdDsKICB9CgogIHRoaXMuaFswXSA9IHN1bTMyKHRoaXMuaFswXSwgYSk7CiAgdGhpcy5oWzFdID0gc3VtMzIodGhpcy5oWzFdLCBiKTsKICB0aGlzLmhbMl0gPSBzdW0zMih0aGlzLmhbMl0sIGMpOwogIHRoaXMuaFszXSA9IHN1bTMyKHRoaXMuaFszXSwgZCk7CiAgdGhpcy5oWzRdID0gc3VtMzIodGhpcy5oWzRdLCBlKTsKfTsKClNIQTEucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiBkaWdlc3QoZW5jKSB7CiAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICByZXR1cm4gdXRpbHMudG9IZXgzMih0aGlzLmgsICdiaWcnKTsKICBlbHNlCiAgICByZXR1cm4gdXRpbHMuc3BsaXQzMih0aGlzLmgsICdiaWcnKTsKfTsKCmZ1bmN0aW9uIGNoMzIoeCwgeSwgeikgewogIHJldHVybiAoeCAmIHkpIF4gKCh+eCkgJiB6KTsKfQoKZnVuY3Rpb24gbWFqMzIoeCwgeSwgeikgewogIHJldHVybiAoeCAmIHkpIF4gKHggJiB6KSBeICh5ICYgeik7Cn0KCmZ1bmN0aW9uIHAzMih4LCB5LCB6KSB7CiAgcmV0dXJuIHggXiB5IF4gejsKfQoKZnVuY3Rpb24gczBfMjU2KHgpIHsKICByZXR1cm4gcm90cjMyKHgsIDIpIF4gcm90cjMyKHgsIDEzKSBeIHJvdHIzMih4LCAyMik7Cn0KCmZ1bmN0aW9uIHMxXzI1Nih4KSB7CiAgcmV0dXJuIHJvdHIzMih4LCA2KSBeIHJvdHIzMih4LCAxMSkgXiByb3RyMzIoeCwgMjUpOwp9CgpmdW5jdGlvbiBnMF8yNTYoeCkgewogIHJldHVybiByb3RyMzIoeCwgNykgXiByb3RyMzIoeCwgMTgpIF4gKHggPj4+IDMpOwp9CgpmdW5jdGlvbiBnMV8yNTYoeCkgewogIHJldHVybiByb3RyMzIoeCwgMTcpIF4gcm90cjMyKHgsIDE5KSBeICh4ID4+PiAxMCk7Cn0KCmZ1bmN0aW9uIGZ0XzEocywgeCwgeSwgeikgewogIGlmIChzID09PSAwKQogICAgcmV0dXJuIGNoMzIoeCwgeSwgeik7CiAgaWYgKHMgPT09IDEgfHwgcyA9PT0gMykKICAgIHJldHVybiBwMzIoeCwgeSwgeik7CiAgaWYgKHMgPT09IDIpCiAgICByZXR1cm4gbWFqMzIoeCwgeSwgeik7Cn0KCmZ1bmN0aW9uIGNoNjRfaGkoeGgsIHhsLCB5aCwgeWwsIHpoLCB6bCkgewogIHZhciByID0gKHhoICYgeWgpIF4gKCh+eGgpICYgemgpOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIGNoNjRfbG8oeGgsIHhsLCB5aCwgeWwsIHpoLCB6bCkgewogIHZhciByID0gKHhsICYgeWwpIF4gKCh+eGwpICYgemwpOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIG1hajY0X2hpKHhoLCB4bCwgeWgsIHlsLCB6aCwgemwpIHsKICB2YXIgciA9ICh4aCAmIHloKSBeICh4aCAmIHpoKSBeICh5aCAmIHpoKTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBtYWo2NF9sbyh4aCwgeGwsIHloLCB5bCwgemgsIHpsKSB7CiAgdmFyIHIgPSAoeGwgJiB5bCkgXiAoeGwgJiB6bCkgXiAoeWwgJiB6bCk7CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gczBfNTEyX2hpKHhoLCB4bCkgewogIHZhciBjMF9oaSA9IHJvdHI2NF9oaSh4aCwgeGwsIDI4KTsKICB2YXIgYzFfaGkgPSByb3RyNjRfaGkoeGwsIHhoLCAyKTsgIC8vIDM0CiAgdmFyIGMyX2hpID0gcm90cjY0X2hpKHhsLCB4aCwgNyk7ICAvLyAzOQoKICB2YXIgciA9IGMwX2hpIF4gYzFfaGkgXiBjMl9oaTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBzMF81MTJfbG8oeGgsIHhsKSB7CiAgdmFyIGMwX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgMjgpOwogIHZhciBjMV9sbyA9IHJvdHI2NF9sbyh4bCwgeGgsIDIpOyAgLy8gMzQKICB2YXIgYzJfbG8gPSByb3RyNjRfbG8oeGwsIHhoLCA3KTsgIC8vIDM5CgogIHZhciByID0gYzBfbG8gXiBjMV9sbyBeIGMyX2xvOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIHMxXzUxMl9oaSh4aCwgeGwpIHsKICB2YXIgYzBfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCAxNCk7CiAgdmFyIGMxX2hpID0gcm90cjY0X2hpKHhoLCB4bCwgMTgpOwogIHZhciBjMl9oaSA9IHJvdHI2NF9oaSh4bCwgeGgsIDkpOyAgLy8gNDEKCiAgdmFyIHIgPSBjMF9oaSBeIGMxX2hpIF4gYzJfaGk7CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gczFfNTEyX2xvKHhoLCB4bCkgewogIHZhciBjMF9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDE0KTsKICB2YXIgYzFfbG8gPSByb3RyNjRfbG8oeGgsIHhsLCAxOCk7CiAgdmFyIGMyX2xvID0gcm90cjY0X2xvKHhsLCB4aCwgOSk7ICAvLyA0MQoKICB2YXIgciA9IGMwX2xvIF4gYzFfbG8gXiBjMl9sbzsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBnMF81MTJfaGkoeGgsIHhsKSB7CiAgdmFyIGMwX2hpID0gcm90cjY0X2hpKHhoLCB4bCwgMSk7CiAgdmFyIGMxX2hpID0gcm90cjY0X2hpKHhoLCB4bCwgOCk7CiAgdmFyIGMyX2hpID0gc2hyNjRfaGkoeGgsIHhsLCA3KTsKCiAgdmFyIHIgPSBjMF9oaSBeIGMxX2hpIF4gYzJfaGk7CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gZzBfNTEyX2xvKHhoLCB4bCkgewogIHZhciBjMF9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDEpOwogIHZhciBjMV9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDgpOwogIHZhciBjMl9sbyA9IHNocjY0X2xvKHhoLCB4bCwgNyk7CgogIHZhciByID0gYzBfbG8gXiBjMV9sbyBeIGMyX2xvOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIGcxXzUxMl9oaSh4aCwgeGwpIHsKICB2YXIgYzBfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCAxOSk7CiAgdmFyIGMxX2hpID0gcm90cjY0X2hpKHhsLCB4aCwgMjkpOyAgLy8gNjEKICB2YXIgYzJfaGkgPSBzaHI2NF9oaSh4aCwgeGwsIDYpOwoKICB2YXIgciA9IGMwX2hpIF4gYzFfaGkgXiBjMl9oaTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBnMV81MTJfbG8oeGgsIHhsKSB7CiAgdmFyIGMwX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgMTkpOwogIHZhciBjMV9sbyA9IHJvdHI2NF9sbyh4bCwgeGgsIDI5KTsgIC8vIDYxCiAgdmFyIGMyX2xvID0gc2hyNjRfbG8oeGgsIHhsLCA2KTsKCiAgdmFyIHIgPSBjMF9sbyBeIGMxX2xvIF4gYzJfbG87CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKfSx7Ii4uL2hhc2giOjEyMH1dLDEyNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB1dGlscyA9IGV4cG9ydHM7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CgpmdW5jdGlvbiB0b0FycmF5KG1zZywgZW5jKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkobXNnKSkKICAgIHJldHVybiBtc2cuc2xpY2UoKTsKICBpZiAoIW1zZykKICAgIHJldHVybiBbXTsKICB2YXIgcmVzID0gW107CiAgaWYgKHR5cGVvZiBtc2cgPT09ICdzdHJpbmcnKSB7CiAgICBpZiAoIWVuYykgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBjID0gbXNnLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgdmFyIGhpID0gYyA+PiA4OwogICAgICAgIHZhciBsbyA9IGMgJiAweGZmOwogICAgICAgIGlmIChoaSkKICAgICAgICAgIHJlcy5wdXNoKGhpLCBsbyk7CiAgICAgICAgZWxzZQogICAgICAgICAgcmVzLnB1c2gobG8pOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGVuYyA9PT0gJ2hleCcpIHsKICAgICAgbXNnID0gbXNnLnJlcGxhY2UoL1teYS16MC05XSsvaWcsICcnKTsKICAgICAgaWYgKG1zZy5sZW5ndGggJSAyICE9PSAwKQogICAgICAgIG1zZyA9ICcwJyArIG1zZzsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpICs9IDIpCiAgICAgICAgcmVzLnB1c2gocGFyc2VJbnQobXNnW2ldICsgbXNnW2kgKyAxXSwgMTYpKTsKICAgIH0KICB9IGVsc2UgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspCiAgICAgIHJlc1tpXSA9IG1zZ1tpXSB8IDA7CiAgfQogIHJldHVybiByZXM7Cn0KdXRpbHMudG9BcnJheSA9IHRvQXJyYXk7CgpmdW5jdGlvbiB0b0hleChtc2cpIHsKICB2YXIgcmVzID0gJyc7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspCiAgICByZXMgKz0gemVybzIobXNnW2ldLnRvU3RyaW5nKDE2KSk7CiAgcmV0dXJuIHJlczsKfQp1dGlscy50b0hleCA9IHRvSGV4OwoKZnVuY3Rpb24gaHRvbmwodykgewogIHZhciByZXMgPSAodyA+Pj4gMjQpIHwKICAgICAgICAgICAgKCh3ID4+PiA4KSAmIDB4ZmYwMCkgfAogICAgICAgICAgICAoKHcgPDwgOCkgJiAweGZmMDAwMCkgfAogICAgICAgICAgICAoKHcgJiAweGZmKSA8PCAyNCk7CiAgcmV0dXJuIHJlcyA+Pj4gMDsKfQp1dGlscy5odG9ubCA9IGh0b25sOwoKZnVuY3Rpb24gdG9IZXgzMihtc2csIGVuZGlhbikgewogIHZhciByZXMgPSAnJzsKICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykgewogICAgdmFyIHcgPSBtc2dbaV07CiAgICBpZiAoZW5kaWFuID09PSAnbGl0dGxlJykKICAgICAgdyA9IGh0b25sKHcpOwogICAgcmVzICs9IHplcm84KHcudG9TdHJpbmcoMTYpKTsKICB9CiAgcmV0dXJuIHJlczsKfQp1dGlscy50b0hleDMyID0gdG9IZXgzMjsKCmZ1bmN0aW9uIHplcm8yKHdvcmQpIHsKICBpZiAod29yZC5sZW5ndGggPT09IDEpCiAgICByZXR1cm4gJzAnICsgd29yZDsKICBlbHNlCiAgICByZXR1cm4gd29yZDsKfQp1dGlscy56ZXJvMiA9IHplcm8yOwoKZnVuY3Rpb24gemVybzgod29yZCkgewogIGlmICh3b3JkLmxlbmd0aCA9PT0gNykKICAgIHJldHVybiAnMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSA2KQogICAgcmV0dXJuICcwMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSA1KQogICAgcmV0dXJuICcwMDAnICsgd29yZDsKICBlbHNlIGlmICh3b3JkLmxlbmd0aCA9PT0gNCkKICAgIHJldHVybiAnMDAwMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSAzKQogICAgcmV0dXJuICcwMDAwMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSAyKQogICAgcmV0dXJuICcwMDAwMDAnICsgd29yZDsKICBlbHNlIGlmICh3b3JkLmxlbmd0aCA9PT0gMSkKICAgIHJldHVybiAnMDAwMDAwMCcgKyB3b3JkOwogIGVsc2UKICAgIHJldHVybiB3b3JkOwp9CnV0aWxzLnplcm84ID0gemVybzg7CgpmdW5jdGlvbiBqb2luMzIobXNnLCBzdGFydCwgZW5kLCBlbmRpYW4pIHsKICB2YXIgbGVuID0gZW5kIC0gc3RhcnQ7CiAgYXNzZXJ0KGxlbiAlIDQgPT09IDApOwogIHZhciByZXMgPSBuZXcgQXJyYXkobGVuIC8gNCk7CiAgZm9yICh2YXIgaSA9IDAsIGsgPSBzdGFydDsgaSA8IHJlcy5sZW5ndGg7IGkrKywgayArPSA0KSB7CiAgICB2YXIgdzsKICAgIGlmIChlbmRpYW4gPT09ICdiaWcnKQogICAgICB3ID0gKG1zZ1trXSA8PCAyNCkgfCAobXNnW2sgKyAxXSA8PCAxNikgfCAobXNnW2sgKyAyXSA8PCA4KSB8IG1zZ1trICsgM107CiAgICBlbHNlCiAgICAgIHcgPSAobXNnW2sgKyAzXSA8PCAyNCkgfCAobXNnW2sgKyAyXSA8PCAxNikgfCAobXNnW2sgKyAxXSA8PCA4KSB8IG1zZ1trXTsKICAgIHJlc1tpXSA9IHcgPj4+IDA7CiAgfQogIHJldHVybiByZXM7Cn0KdXRpbHMuam9pbjMyID0gam9pbjMyOwoKZnVuY3Rpb24gc3BsaXQzMihtc2csIGVuZGlhbikgewogIHZhciByZXMgPSBuZXcgQXJyYXkobXNnLmxlbmd0aCAqIDQpOwogIGZvciAodmFyIGkgPSAwLCBrID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKywgayArPSA0KSB7CiAgICB2YXIgbSA9IG1zZ1tpXTsKICAgIGlmIChlbmRpYW4gPT09ICdiaWcnKSB7CiAgICAgIHJlc1trXSA9IG0gPj4+IDI0OwogICAgICByZXNbayArIDFdID0gKG0gPj4+IDE2KSAmIDB4ZmY7CiAgICAgIHJlc1trICsgMl0gPSAobSA+Pj4gOCkgJiAweGZmOwogICAgICByZXNbayArIDNdID0gbSAmIDB4ZmY7CiAgICB9IGVsc2UgewogICAgICByZXNbayArIDNdID0gbSA+Pj4gMjQ7CiAgICAgIHJlc1trICsgMl0gPSAobSA+Pj4gMTYpICYgMHhmZjsKICAgICAgcmVzW2sgKyAxXSA9IChtID4+PiA4KSAmIDB4ZmY7CiAgICAgIHJlc1trXSA9IG0gJiAweGZmOwogICAgfQogIH0KICByZXR1cm4gcmVzOwp9CnV0aWxzLnNwbGl0MzIgPSBzcGxpdDMyOwoKZnVuY3Rpb24gcm90cjMyKHcsIGIpIHsKICByZXR1cm4gKHcgPj4+IGIpIHwgKHcgPDwgKDMyIC0gYikpOwp9CnV0aWxzLnJvdHIzMiA9IHJvdHIzMjsKCmZ1bmN0aW9uIHJvdGwzMih3LCBiKSB7CiAgcmV0dXJuICh3IDw8IGIpIHwgKHcgPj4+ICgzMiAtIGIpKTsKfQp1dGlscy5yb3RsMzIgPSByb3RsMzI7CgpmdW5jdGlvbiBzdW0zMihhLCBiKSB7CiAgcmV0dXJuIChhICsgYikgPj4+IDA7Cn0KdXRpbHMuc3VtMzIgPSBzdW0zMjsKCmZ1bmN0aW9uIHN1bTMyXzMoYSwgYiwgYykgewogIHJldHVybiAoYSArIGIgKyBjKSA+Pj4gMDsKfQp1dGlscy5zdW0zMl8zID0gc3VtMzJfMzsKCmZ1bmN0aW9uIHN1bTMyXzQoYSwgYiwgYywgZCkgewogIHJldHVybiAoYSArIGIgKyBjICsgZCkgPj4+IDA7Cn0KdXRpbHMuc3VtMzJfNCA9IHN1bTMyXzQ7CgpmdW5jdGlvbiBzdW0zMl81KGEsIGIsIGMsIGQsIGUpIHsKICByZXR1cm4gKGEgKyBiICsgYyArIGQgKyBlKSA+Pj4gMDsKfQp1dGlscy5zdW0zMl81ID0gc3VtMzJfNTsKCmZ1bmN0aW9uIGFzc2VydChjb25kLCBtc2cpIHsKICBpZiAoIWNvbmQpCiAgICB0aHJvdyBuZXcgRXJyb3IobXNnIHx8ICdBc3NlcnRpb24gZmFpbGVkJyk7Cn0KdXRpbHMuYXNzZXJ0ID0gYXNzZXJ0OwoKdXRpbHMuaW5oZXJpdHMgPSBpbmhlcml0czsKCmZ1bmN0aW9uIHN1bTY0KGJ1ZiwgcG9zLCBhaCwgYWwpIHsKICB2YXIgYmggPSBidWZbcG9zXTsKICB2YXIgYmwgPSBidWZbcG9zICsgMV07CgogIHZhciBsbyA9IChhbCArIGJsKSA+Pj4gMDsKICB2YXIgaGkgPSAobG8gPCBhbCA/IDEgOiAwKSArIGFoICsgYmg7CiAgYnVmW3Bvc10gPSBoaSA+Pj4gMDsKICBidWZbcG9zICsgMV0gPSBsbzsKfQpleHBvcnRzLnN1bTY0ID0gc3VtNjQ7CgpmdW5jdGlvbiBzdW02NF9oaShhaCwgYWwsIGJoLCBibCkgewogIHZhciBsbyA9IChhbCArIGJsKSA+Pj4gMDsKICB2YXIgaGkgPSAobG8gPCBhbCA/IDEgOiAwKSArIGFoICsgYmg7CiAgcmV0dXJuIGhpID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0X2hpID0gc3VtNjRfaGk7CgpmdW5jdGlvbiBzdW02NF9sbyhhaCwgYWwsIGJoLCBibCkgewogIHZhciBsbyA9IGFsICsgYmw7CiAgcmV0dXJuIGxvID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0X2xvID0gc3VtNjRfbG87CgpmdW5jdGlvbiBzdW02NF80X2hpKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wsIGRoLCBkbCkgewogIHZhciBjYXJyeSA9IDA7CiAgdmFyIGxvID0gYWw7CiAgbG8gPSAobG8gKyBibCkgPj4+IDA7CiAgY2FycnkgKz0gbG8gPCBhbCA/IDEgOiAwOwogIGxvID0gKGxvICsgY2wpID4+PiAwOwogIGNhcnJ5ICs9IGxvIDwgY2wgPyAxIDogMDsKICBsbyA9IChsbyArIGRsKSA+Pj4gMDsKICBjYXJyeSArPSBsbyA8IGRsID8gMSA6IDA7CgogIHZhciBoaSA9IGFoICsgYmggKyBjaCArIGRoICsgY2Fycnk7CiAgcmV0dXJuIGhpID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0XzRfaGkgPSBzdW02NF80X2hpOwoKZnVuY3Rpb24gc3VtNjRfNF9sbyhhaCwgYWwsIGJoLCBibCwgY2gsIGNsLCBkaCwgZGwpIHsKICB2YXIgbG8gPSBhbCArIGJsICsgY2wgKyBkbDsKICByZXR1cm4gbG8gPj4+IDA7Cn07CmV4cG9ydHMuc3VtNjRfNF9sbyA9IHN1bTY0XzRfbG87CgpmdW5jdGlvbiBzdW02NF81X2hpKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wsIGRoLCBkbCwgZWgsIGVsKSB7CiAgdmFyIGNhcnJ5ID0gMDsKICB2YXIgbG8gPSBhbDsKICBsbyA9IChsbyArIGJsKSA+Pj4gMDsKICBjYXJyeSArPSBsbyA8IGFsID8gMSA6IDA7CiAgbG8gPSAobG8gKyBjbCkgPj4+IDA7CiAgY2FycnkgKz0gbG8gPCBjbCA/IDEgOiAwOwogIGxvID0gKGxvICsgZGwpID4+PiAwOwogIGNhcnJ5ICs9IGxvIDwgZGwgPyAxIDogMDsKICBsbyA9IChsbyArIGVsKSA+Pj4gMDsKICBjYXJyeSArPSBsbyA8IGVsID8gMSA6IDA7CgogIHZhciBoaSA9IGFoICsgYmggKyBjaCArIGRoICsgZWggKyBjYXJyeTsKICByZXR1cm4gaGkgPj4+IDA7Cn07CmV4cG9ydHMuc3VtNjRfNV9oaSA9IHN1bTY0XzVfaGk7CgpmdW5jdGlvbiBzdW02NF81X2xvKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wsIGRoLCBkbCwgZWgsIGVsKSB7CiAgdmFyIGxvID0gYWwgKyBibCArIGNsICsgZGwgKyBlbDsKCiAgcmV0dXJuIGxvID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0XzVfbG8gPSBzdW02NF81X2xvOwoKZnVuY3Rpb24gcm90cjY0X2hpKGFoLCBhbCwgbnVtKSB7CiAgdmFyIHIgPSAoYWwgPDwgKDMyIC0gbnVtKSkgfCAoYWggPj4+IG51bSk7CiAgcmV0dXJuIHIgPj4+IDA7Cn07CmV4cG9ydHMucm90cjY0X2hpID0gcm90cjY0X2hpOwoKZnVuY3Rpb24gcm90cjY0X2xvKGFoLCBhbCwgbnVtKSB7CiAgdmFyIHIgPSAoYWggPDwgKDMyIC0gbnVtKSkgfCAoYWwgPj4+IG51bSk7CiAgcmV0dXJuIHIgPj4+IDA7Cn07CmV4cG9ydHMucm90cjY0X2xvID0gcm90cjY0X2xvOwoKZnVuY3Rpb24gc2hyNjRfaGkoYWgsIGFsLCBudW0pIHsKICByZXR1cm4gYWggPj4+IG51bTsKfTsKZXhwb3J0cy5zaHI2NF9oaSA9IHNocjY0X2hpOwoKZnVuY3Rpb24gc2hyNjRfbG8oYWgsIGFsLCBudW0pIHsKICB2YXIgciA9IChhaCA8PCAoMzIgLSBudW0pKSB8IChhbCA+Pj4gbnVtKTsKICByZXR1cm4gciA+Pj4gMDsKfTsKZXhwb3J0cy5zaHI2NF9sbyA9IHNocjY0X2xvOwoKfSx7ImluaGVyaXRzIjoxMjh9XSwxMjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykgewogIHZhciBlLCBtCiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDEKICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMQogIHZhciBlQmlhcyA9IGVNYXggPj4gMQogIHZhciBuQml0cyA9IC03CiAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMAogIHZhciBkID0gaXNMRSA/IC0xIDogMQogIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldCgogIGkgKz0gZAoKICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKQogIHMgPj49ICgtbkJpdHMpCiAgbkJpdHMgKz0gZUxlbgogIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9CgogIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpCiAgZSA+Pj0gKC1uQml0cykKICBuQml0cyArPSBtTGVuCiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge30KCiAgaWYgKGUgPT09IDApIHsKICAgIGUgPSAxIC0gZUJpYXMKICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHsKICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KQogIH0gZWxzZSB7CiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pCiAgICBlID0gZSAtIGVCaWFzCiAgfQogIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pCn0KCmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHsKICB2YXIgZSwgbSwgYwogIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxCiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDEKICB2YXIgZUJpYXMgPSBlTWF4ID4+IDEKICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApCiAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKQogIHZhciBkID0gaXNMRSA/IDEgOiAtMQogIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwCgogIHZhbHVlID0gTWF0aC5hYnModmFsdWUpCgogIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7CiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDAKICAgIGUgPSBlTWF4CiAgfSBlbHNlIHsKICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKQogICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkgewogICAgICBlLS0KICAgICAgYyAqPSAyCiAgICB9CiAgICBpZiAoZSArIGVCaWFzID49IDEpIHsKICAgICAgdmFsdWUgKz0gcnQgLyBjCiAgICB9IGVsc2UgewogICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcykKICAgIH0KICAgIGlmICh2YWx1ZSAqIGMgPj0gMikgewogICAgICBlKysKICAgICAgYyAvPSAyCiAgICB9CgogICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7CiAgICAgIG0gPSAwCiAgICAgIGUgPSBlTWF4CiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7CiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKQogICAgICBlID0gZSArIGVCaWFzCiAgICB9IGVsc2UgewogICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbikKICAgICAgZSA9IDAKICAgIH0KICB9CgogIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9CgogIGUgPSAoZSA8PCBtTGVuKSB8IG0KICBlTGVuICs9IG1MZW4KICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9CgogIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOAp9Cgp9LHt9XSwxMjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoKdmFyIGluZGV4T2YgPSBbXS5pbmRleE9mOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcnIsIG9iail7CiAgaWYgKGluZGV4T2YpIHJldHVybiBhcnIuaW5kZXhPZihvYmopOwogIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7CiAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpOwogIH0KICByZXR1cm4gLTE7Cn07Cn0se31dLDEyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykgewogIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlCiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHsKICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yCiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwgewogICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgIHZhbHVlOiBjdG9yLAogICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICB9CiAgICB9KTsKICB9Owp9IGVsc2UgewogIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzCiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHsKICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yCiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fQogICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZQogICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKQogICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yCiAgfQp9Cgp9LHt9XSwxMjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKioKICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBCdWZmZXIKICoKICogQXV0aG9yOiAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+CiAqIExpY2Vuc2U6ICBNSVQKICoKICogYG5wbSBpbnN0YWxsIGlzLWJ1ZmZlcmAKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmopIHsKICByZXR1cm4gISEob2JqICE9IG51bGwgJiYKICAgIChvYmouX2lzQnVmZmVyIHx8IC8vIEZvciBTYWZhcmkgNS03IChtaXNzaW5nIE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IpCiAgICAgIChvYmouY29uc3RydWN0b3IgJiYKICAgICAgdHlwZW9mIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgICBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIob2JqKSkKICAgICkpCn0KCn0se31dLDEzMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKCnZhciBuYXZpZ2F0b3IgPSB7fTsKbmF2aWdhdG9yLnVzZXJBZ2VudCA9IGZhbHNlOwoKdmFyIHdpbmRvdyA9IHt9OwovKgogKiBqc3JzYXNpZ24gNS4wLjcgKGMpIDIwMTAtMjAxNiBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KCi8qCnlhaG9vLW1pbi5qcwpDb3B5cmlnaHQgKGMpIDIwMTEsIFlhaG9vISBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCkNvZGUgbGljZW5zZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlOgpodHRwOi8vZGV2ZWxvcGVyLnlhaG9vLmNvbS95dWkvbGljZW5zZS5odG1sCnZlcnNpb246IDIuOS4wCiovCmlmKHR5cGVvZiBZQUhPTz09InVuZGVmaW5lZCJ8fCFZQUhPTyl7dmFyIFlBSE9PPXt9O31ZQUhPTy5uYW1lc3BhY2U9ZnVuY3Rpb24oKXt2YXIgYj1hcmd1bWVudHMsZz1udWxsLGUsYyxmO2ZvcihlPTA7ZTxiLmxlbmd0aDtlPWUrMSl7Zj0oIiIrYltlXSkuc3BsaXQoIi4iKTtnPVlBSE9PO2ZvcihjPShmWzBdPT0iWUFIT08iKT8xOjA7YzxmLmxlbmd0aDtjPWMrMSl7Z1tmW2NdXT1nW2ZbY11dfHx7fTtnPWdbZltjXV07fX1yZXR1cm4gZzt9O1lBSE9PLmxvZz1mdW5jdGlvbihkLGEsYyl7dmFyIGI9WUFIT08ud2lkZ2V0LkxvZ2dlcjtpZihiJiZiLmxvZyl7cmV0dXJuIGIubG9nKGQsYSxjKTt9ZWxzZXtyZXR1cm4gZmFsc2U7fX07WUFIT08ucmVnaXN0ZXI9ZnVuY3Rpb24oYSxmLGUpe3ZhciBrPVlBSE9PLmVudi5tb2R1bGVzLGMsaixoLGcsZDtpZigha1thXSl7a1thXT17dmVyc2lvbnM6W10sYnVpbGRzOltdfTt9Yz1rW2FdO2o9ZS52ZXJzaW9uO2g9ZS5idWlsZDtnPVlBSE9PLmVudi5saXN0ZW5lcnM7Yy5uYW1lPWE7Yy52ZXJzaW9uPWo7Yy5idWlsZD1oO2MudmVyc2lvbnMucHVzaChqKTtjLmJ1aWxkcy5wdXNoKGgpO2MubWFpbkNsYXNzPWY7Zm9yKGQ9MDtkPGcubGVuZ3RoO2Q9ZCsxKXtnW2RdKGMpO31pZihmKXtmLlZFUlNJT049ajtmLkJVSUxEPWg7fWVsc2V7WUFIT08ubG9nKCJtYWluQ2xhc3MgaXMgdW5kZWZpbmVkIGZvciBtb2R1bGUgIithLCJ3YXJuIik7fX07WUFIT08uZW52PVlBSE9PLmVudnx8e21vZHVsZXM6W10sbGlzdGVuZXJzOltdfTtZQUhPTy5lbnYuZ2V0VmVyc2lvbj1mdW5jdGlvbihhKXtyZXR1cm4gWUFIT08uZW52Lm1vZHVsZXNbYV18fG51bGw7fTtZQUhPTy5lbnYucGFyc2VVQT1mdW5jdGlvbihkKXt2YXIgZT1mdW5jdGlvbihpKXt2YXIgaj0wO3JldHVybiBwYXJzZUZsb2F0KGkucmVwbGFjZSgvXC4vZyxmdW5jdGlvbigpe3JldHVybihqKys9PTEpPyIiOiIuIjt9KSk7fSxoPW5hdmlnYXRvcixnPXtpZTowLG9wZXJhOjAsZ2Vja286MCx3ZWJraXQ6MCxjaHJvbWU6MCxtb2JpbGU6bnVsbCxhaXI6MCxpcGFkOjAsaXBob25lOjAsaXBvZDowLGlvczpudWxsLGFuZHJvaWQ6MCx3ZWJvczowLGNhamE6aCYmaC5jYWphVmVyc2lvbixzZWN1cmU6ZmFsc2Usb3M6bnVsbH0sYz1kfHwobmF2aWdhdG9yJiZuYXZpZ2F0b3IudXNlckFnZW50KSxmPXdpbmRvdyYmd2luZG93LmxvY2F0aW9uLGI9ZiYmZi5ocmVmLGE7Zy5zZWN1cmU9YiYmKGIudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJodHRwcyIpPT09MCk7aWYoYyl7aWYoKC93aW5kb3dzfHdpbjMyL2kpLnRlc3QoYykpe2cub3M9IndpbmRvd3MiO31lbHNle2lmKCgvbWFjaW50b3NoL2kpLnRlc3QoYykpe2cub3M9Im1hY2ludG9zaCI7fWVsc2V7aWYoKC9yaGluby9pKS50ZXN0KGMpKXtnLm9zPSJyaGlubyI7fX19aWYoKC9LSFRNTC8pLnRlc3QoYykpe2cud2Via2l0PTE7fWE9Yy5tYXRjaCgvQXBwbGVXZWJLaXRcLyhbXlxzXSopLyk7aWYoYSYmYVsxXSl7Zy53ZWJraXQ9ZShhWzFdKTtpZigvIE1vYmlsZVwvLy50ZXN0KGMpKXtnLm1vYmlsZT0iQXBwbGUiO2E9Yy5tYXRjaCgvT1MgKFteXHNdKikvKTtpZihhJiZhWzFdKXthPWUoYVsxXS5yZXBsYWNlKCJfIiwiLiIpKTt9Zy5pb3M9YTtnLmlwYWQ9Zy5pcG9kPWcuaXBob25lPTA7YT1jLm1hdGNoKC9pUGFkfGlQb2R8aVBob25lLyk7aWYoYSYmYVswXSl7Z1thWzBdLnRvTG93ZXJDYXNlKCldPWcuaW9zO319ZWxzZXthPWMubWF0Y2goL05va2lhTlteXC9dKnxBbmRyb2lkIFxkXC5cZHx3ZWJPU1wvXGRcLlxkLyk7aWYoYSl7Zy5tb2JpbGU9YVswXTt9aWYoL3dlYk9TLy50ZXN0KGMpKXtnLm1vYmlsZT0iV2ViT1MiO2E9Yy5tYXRjaCgvd2ViT1NcLyhbXlxzXSopOy8pO2lmKGEmJmFbMV0pe2cud2Vib3M9ZShhWzFdKTt9fWlmKC8gQW5kcm9pZC8udGVzdChjKSl7Zy5tb2JpbGU9IkFuZHJvaWQiO2E9Yy5tYXRjaCgvQW5kcm9pZCAoW15cc10qKTsvKTtpZihhJiZhWzFdKXtnLmFuZHJvaWQ9ZShhWzFdKTt9fX1hPWMubWF0Y2goL0Nocm9tZVwvKFteXHNdKikvKTtpZihhJiZhWzFdKXtnLmNocm9tZT1lKGFbMV0pO31lbHNle2E9Yy5tYXRjaCgvQWRvYmVBSVJcLyhbXlxzXSopLyk7aWYoYSl7Zy5haXI9YVswXTt9fX1pZighZy53ZWJraXQpe2E9Yy5tYXRjaCgvT3BlcmFbXHNcL10oW15cc10qKS8pO2lmKGEmJmFbMV0pe2cub3BlcmE9ZShhWzFdKTthPWMubWF0Y2goL1ZlcnNpb25cLyhbXlxzXSopLyk7aWYoYSYmYVsxXSl7Zy5vcGVyYT1lKGFbMV0pO31hPWMubWF0Y2goL09wZXJhIE1pbmlbXjtdKi8pO2lmKGEpe2cubW9iaWxlPWFbMF07fX1lbHNle2E9Yy5tYXRjaCgvTVNJRVxzKFteO10qKS8pO2lmKGEmJmFbMV0pe2cuaWU9ZShhWzFdKTt9ZWxzZXthPWMubWF0Y2goL0dlY2tvXC8oW15cc10qKS8pO2lmKGEpe2cuZ2Vja289MTthPWMubWF0Y2goL3J2OihbXlxzXCldKikvKTtpZihhJiZhWzFdKXtnLmdlY2tvPWUoYVsxXSk7fX19fX19cmV0dXJuIGc7fTtZQUhPTy5lbnYudWE9WUFIT08uZW52LnBhcnNlVUEoKTsoZnVuY3Rpb24oKXtZQUhPTy5uYW1lc3BhY2UoInV0aWwiLCJ3aWRnZXQiLCJleGFtcGxlIik7aWYoInVuZGVmaW5lZCIhPT10eXBlb2YgWUFIT09fY29uZmlnKXt2YXIgYj1ZQUhPT19jb25maWcubGlzdGVuZXIsYT1ZQUhPTy5lbnYubGlzdGVuZXJzLGQ9dHJ1ZSxjO2lmKGIpe2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspe2lmKGFbY109PWIpe2Q9ZmFsc2U7YnJlYWs7fX1pZihkKXthLnB1c2goYik7fX19fSkoKTtZQUhPTy5sYW5nPVlBSE9PLmxhbmd8fHt9OyhmdW5jdGlvbigpe3ZhciBmPVlBSE9PLmxhbmcsYT1PYmplY3QucHJvdG90eXBlLGM9IltvYmplY3QgQXJyYXldIixoPSJbb2JqZWN0IEZ1bmN0aW9uXSIsaT0iW29iamVjdCBPYmplY3RdIixiPVtdLGc9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImI3gyNzsiLCIvIjoiJiN4MkY7IiwiYCI6IiYjeDYwOyJ9LGQ9WyJ0b1N0cmluZyIsInZhbHVlT2YiXSxlPXtpc0FycmF5OmZ1bmN0aW9uKGope3JldHVybiBhLnRvU3RyaW5nLmFwcGx5KGopPT09Yzt9LGlzQm9vbGVhbjpmdW5jdGlvbihqKXtyZXR1cm4gdHlwZW9mIGo9PT0iYm9vbGVhbiI7fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGope3JldHVybih0eXBlb2Ygaj09PSJmdW5jdGlvbiIpfHxhLnRvU3RyaW5nLmFwcGx5KGopPT09aDt9LGlzTnVsbDpmdW5jdGlvbihqKXtyZXR1cm4gaj09PW51bGw7fSxpc051bWJlcjpmdW5jdGlvbihqKXtyZXR1cm4gdHlwZW9mIGo9PT0ibnVtYmVyIiYmaXNGaW5pdGUoaik7fSxpc09iamVjdDpmdW5jdGlvbihqKXtyZXR1cm4oaiYmKHR5cGVvZiBqPT09Im9iamVjdCJ8fGYuaXNGdW5jdGlvbihqKSkpfHxmYWxzZTt9LGlzU3RyaW5nOmZ1bmN0aW9uKGope3JldHVybiB0eXBlb2Ygaj09PSJzdHJpbmciO30saXNVbmRlZmluZWQ6ZnVuY3Rpb24oail7cmV0dXJuIHR5cGVvZiBqPT09InVuZGVmaW5lZCI7fSxfSUVFbnVtRml4OihZQUhPTy5lbnYudWEuaWUpP2Z1bmN0aW9uKGwsayl7dmFyIGosbixtO2ZvcihqPTA7ajxkLmxlbmd0aDtqPWorMSl7bj1kW2pdO209a1tuXTtpZihmLmlzRnVuY3Rpb24obSkmJm0hPWFbbl0pe2xbbl09bTt9fX06ZnVuY3Rpb24oKXt9LGVzY2FwZUhUTUw6ZnVuY3Rpb24oail7cmV0dXJuIGoucmVwbGFjZSgvWyY8PiInXC9gXS9nLGZ1bmN0aW9uKGspe3JldHVybiBnW2tdO30pO30sZXh0ZW5kOmZ1bmN0aW9uKG0sbixsKXtpZighbnx8IW0pe3Rocm93IG5ldyBFcnJvcigiZXh0ZW5kIGZhaWxlZCwgcGxlYXNlIGNoZWNrIHRoYXQgIisiYWxsIGRlcGVuZGVuY2llcyBhcmUgaW5jbHVkZWQuIik7fXZhciBrPWZ1bmN0aW9uKCl7fSxqO2sucHJvdG90eXBlPW4ucHJvdG90eXBlO20ucHJvdG90eXBlPW5ldyBrKCk7bS5wcm90b3R5cGUuY29uc3RydWN0b3I9bTttLnN1cGVyY2xhc3M9bi5wcm90b3R5cGU7aWYobi5wcm90b3R5cGUuY29uc3RydWN0b3I9PWEuY29uc3RydWN0b3Ipe24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW47fWlmKGwpe2ZvcihqIGluIGwpe2lmKGYuaGFzT3duUHJvcGVydHkobCxqKSl7bS5wcm90b3R5cGVbal09bFtqXTt9fWYuX0lFRW51bUZpeChtLnByb3RvdHlwZSxsKTt9fSxhdWdtZW50T2JqZWN0OmZ1bmN0aW9uKG4sbSl7aWYoIW18fCFuKXt0aHJvdyBuZXcgRXJyb3IoIkFic29yYiBmYWlsZWQsIHZlcmlmeSBkZXBlbmRlbmNpZXMuIik7fXZhciBqPWFyZ3VtZW50cyxsLG8saz1qWzJdO2lmKGsmJmshPT10cnVlKXtmb3IobD0yO2w8ai5sZW5ndGg7bD1sKzEpe25baltsXV09bVtqW2xdXTt9fWVsc2V7Zm9yKG8gaW4gbSl7aWYoa3x8IShvIGluIG4pKXtuW29dPW1bb107fX1mLl9JRUVudW1GaXgobixtKTt9cmV0dXJuIG47fSxhdWdtZW50UHJvdG86ZnVuY3Rpb24obSxsKXtpZighbHx8IW0pe3Rocm93IG5ldyBFcnJvcigiQXVnbWVudCBmYWlsZWQsIHZlcmlmeSBkZXBlbmRlbmNpZXMuIik7fXZhciBqPVttLnByb3RvdHlwZSxsLnByb3RvdHlwZV0saztmb3Ioaz0yO2s8YXJndW1lbnRzLmxlbmd0aDtrPWsrMSl7ai5wdXNoKGFyZ3VtZW50c1trXSk7fWYuYXVnbWVudE9iamVjdC5hcHBseSh0aGlzLGopO3JldHVybiBtO30sZHVtcDpmdW5jdGlvbihqLHApe3ZhciBsLG4scj1bXSx0PSJ7Li4ufSIsaz0iZigpey4uLn0iLHE9IiwgIixtPSIgPT4gIjtpZighZi5pc09iamVjdChqKSl7cmV0dXJuIGorIiI7fWVsc2V7aWYoaiBpbnN0YW5jZW9mIERhdGV8fCgibm9kZVR5cGUiIGluIGomJiJ0YWdOYW1lIiBpbiBqKSl7cmV0dXJuIGo7fWVsc2V7aWYoZi5pc0Z1bmN0aW9uKGopKXtyZXR1cm4gazt9fX1wPShmLmlzTnVtYmVyKHApKT9wOjM7aWYoZi5pc0FycmF5KGopKXtyLnB1c2goIlsiKTtmb3IobD0wLG49ai5sZW5ndGg7bDxuO2w9bCsxKXtpZihmLmlzT2JqZWN0KGpbbF0pKXtyLnB1c2goKHA+MCk/Zi5kdW1wKGpbbF0scC0xKTp0KTt9ZWxzZXtyLnB1c2goaltsXSk7fXIucHVzaChxKTt9aWYoci5sZW5ndGg+MSl7ci5wb3AoKTt9ci5wdXNoKCJdIik7fWVsc2V7ci5wdXNoKCJ7Iik7Zm9yKGwgaW4gail7aWYoZi5oYXNPd25Qcm9wZXJ0eShqLGwpKXtyLnB1c2gobCttKTtpZihmLmlzT2JqZWN0KGpbbF0pKXtyLnB1c2goKHA+MCk/Zi5kdW1wKGpbbF0scC0xKTp0KTt9ZWxzZXtyLnB1c2goaltsXSk7fXIucHVzaChxKTt9fWlmKHIubGVuZ3RoPjEpe3IucG9wKCk7fXIucHVzaCgifSIpO31yZXR1cm4gci5qb2luKCIiKTt9LHN1YnN0aXR1dGU6ZnVuY3Rpb24oeCx5LEUsbCl7dmFyIEQsQyxCLEcsdCx1LEY9W10scCx6PXgubGVuZ3RoLEE9ImR1bXAiLHI9IiAiLHE9InsiLG09In0iLG4sdztmb3IoOzspe0Q9eC5sYXN0SW5kZXhPZihxLHopO2lmKEQ8MCl7YnJlYWs7fUM9eC5pbmRleE9mKG0sRCk7aWYoRCsxPkMpe2JyZWFrO31wPXguc3Vic3RyaW5nKEQrMSxDKTtHPXA7dT1udWxsO0I9Ry5pbmRleE9mKHIpO2lmKEI+LTEpe3U9Ry5zdWJzdHJpbmcoQisxKTtHPUcuc3Vic3RyaW5nKDAsQik7fXQ9eVtHXTtpZihFKXt0PUUoRyx0LHUpO31pZihmLmlzT2JqZWN0KHQpKXtpZihmLmlzQXJyYXkodCkpe3Q9Zi5kdW1wKHQscGFyc2VJbnQodSwxMCkpO31lbHNle3U9dXx8IiI7bj11LmluZGV4T2YoQSk7aWYobj4tMSl7dT11LnN1YnN0cmluZyg0KTt9dz10LnRvU3RyaW5nKCk7aWYodz09PWl8fG4+LTEpe3Q9Zi5kdW1wKHQscGFyc2VJbnQodSwxMCkpO31lbHNle3Q9dzt9fX1lbHNle2lmKCFmLmlzU3RyaW5nKHQpJiYhZi5pc051bWJlcih0KSl7dD0ifi0iK0YubGVuZ3RoKyItfiI7RltGLmxlbmd0aF09cDt9fXg9eC5zdWJzdHJpbmcoMCxEKSt0K3guc3Vic3RyaW5nKEMrMSk7aWYobD09PWZhbHNlKXt6PUQtMTt9fWZvcihEPUYubGVuZ3RoLTE7RD49MDtEPUQtMSl7eD14LnJlcGxhY2UobmV3IFJlZ0V4cCgifi0iK0QrIi1+IiksInsiK0ZbRF0rIn0iLCJnIik7fXJldHVybiB4O30sdHJpbTpmdW5jdGlvbihqKXt0cnl7cmV0dXJuIGoucmVwbGFjZSgvXlxzK3xccyskL2csIiIpO31jYXRjaChrKXtyZXR1cm4gajsKfX0sbWVyZ2U6ZnVuY3Rpb24oKXt2YXIgbj17fSxrPWFyZ3VtZW50cyxqPWsubGVuZ3RoLG07Zm9yKG09MDttPGo7bT1tKzEpe2YuYXVnbWVudE9iamVjdChuLGtbbV0sdHJ1ZSk7fXJldHVybiBuO30sbGF0ZXI6ZnVuY3Rpb24odCxrLHUsbixwKXt0PXR8fDA7az1rfHx7fTt2YXIgbD11LHM9bixxLGo7aWYoZi5pc1N0cmluZyh1KSl7bD1rW3VdO31pZighbCl7dGhyb3cgbmV3IFR5cGVFcnJvcigibWV0aG9kIHVuZGVmaW5lZCIpO31pZighZi5pc1VuZGVmaW5lZChuKSYmIWYuaXNBcnJheShzKSl7cz1bbl07fXE9ZnVuY3Rpb24oKXtsLmFwcGx5KGssc3x8Yik7fTtqPShwKT9zZXRJbnRlcnZhbChxLHQpOnNldFRpbWVvdXQocSx0KTtyZXR1cm57aW50ZXJ2YWw6cCxjYW5jZWw6ZnVuY3Rpb24oKXtpZih0aGlzLmludGVydmFsKXtjbGVhckludGVydmFsKGopO31lbHNle2NsZWFyVGltZW91dChqKTt9fX07fSxpc1ZhbHVlOmZ1bmN0aW9uKGope3JldHVybihmLmlzT2JqZWN0KGopfHxmLmlzU3RyaW5nKGopfHxmLmlzTnVtYmVyKGopfHxmLmlzQm9vbGVhbihqKSk7fX07Zi5oYXNPd25Qcm9wZXJ0eT0oYS5oYXNPd25Qcm9wZXJ0eSk/ZnVuY3Rpb24oaixrKXtyZXR1cm4gaiYmai5oYXNPd25Qcm9wZXJ0eSYmai5oYXNPd25Qcm9wZXJ0eShrKTt9OmZ1bmN0aW9uKGosayl7cmV0dXJuICFmLmlzVW5kZWZpbmVkKGpba10pJiZqLmNvbnN0cnVjdG9yLnByb3RvdHlwZVtrXSE9PWpba107fTtlLmF1Z21lbnRPYmplY3QoZixlLHRydWUpO1lBSE9PLnV0aWwuTGFuZz1mO2YuYXVnbWVudD1mLmF1Z21lbnRQcm90bztZQUhPTy5hdWdtZW50PWYuYXVnbWVudFByb3RvO1lBSE9PLmV4dGVuZD1mLmV4dGVuZDt9KSgpO1lBSE9PLnJlZ2lzdGVyKCJ5YWhvbyIsWUFIT08se3ZlcnNpb246IjIuOS4wIixidWlsZDoiMjgwMCJ9KTsKCi8qISBDcnlwdG9KUyB2My4xLjIgY29yZS1maXguanMKICogY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCiAqIChjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiAqIFRISVMgSVMgRklYIG9mICdjb3JlLmpzJyB0byBmaXggSG1hYyBpc3N1ZS4KICogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvaXNzdWVzL2RldGFpbD9pZD04NAogKiBodHRwczovL2NyeXB0by1qcy5nb29nbGVjb2RlLmNvbS9zdm4taGlzdG9yeS9yNjY3L2JyYW5jaGVzLzMueC9zcmMvY29yZS5qcwogKi8KdmFyIENyeXB0b0pTPUNyeXB0b0pTfHwoZnVuY3Rpb24oZSxnKXt2YXIgYT17fTt2YXIgYj1hLmxpYj17fTt2YXIgaj1iLkJhc2U9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe31yZXR1cm57ZXh0ZW5kOmZ1bmN0aW9uKHApe24ucHJvdG90eXBlPXRoaXM7dmFyIG89bmV3IG4oKTtpZihwKXtvLm1peEluKHApfWlmKCFvLmhhc093blByb3BlcnR5KCJpbml0Iikpe28uaW5pdD1mdW5jdGlvbigpe28uJHN1cGVyLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1vLmluaXQucHJvdG90eXBlPW87by4kc3VwZXI9dGhpcztyZXR1cm4gb30sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIG89dGhpcy5leHRlbmQoKTtvLmluaXQuYXBwbHkobyxhcmd1bWVudHMpO3JldHVybiBvfSxpbml0OmZ1bmN0aW9uKCl7fSxtaXhJbjpmdW5jdGlvbihwKXtmb3IodmFyIG8gaW4gcCl7aWYocC5oYXNPd25Qcm9wZXJ0eShvKSl7dGhpc1tvXT1wW29dfX1pZihwLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpKXt0aGlzLnRvU3RyaW5nPXAudG9TdHJpbmd9fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19fSgpKTt2YXIgbD1iLldvcmRBcnJheT1qLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihvLG4pe289dGhpcy53b3Jkcz1vfHxbXTtpZihuIT1nKXt0aGlzLnNpZ0J5dGVzPW59ZWxzZXt0aGlzLnNpZ0J5dGVzPW8ubGVuZ3RoKjR9fSx0b1N0cmluZzpmdW5jdGlvbihuKXtyZXR1cm4obnx8aCkuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24odCl7dmFyIHE9dGhpcy53b3Jkczt2YXIgcD10LndvcmRzO3ZhciBuPXRoaXMuc2lnQnl0ZXM7dmFyIHM9dC5zaWdCeXRlczt0aGlzLmNsYW1wKCk7aWYobiU0KXtmb3IodmFyIHI9MDtyPHM7cisrKXt2YXIgbz0ocFtyPj4+Ml0+Pj4oMjQtKHIlNCkqOCkpJjI1NTtxWyhuK3IpPj4+Ml18PW88PCgyNC0oKG4rciklNCkqOCl9fWVsc2V7Zm9yKHZhciByPTA7cjxzO3IrPTQpe3FbKG4rcik+Pj4yXT1wW3I+Pj4yXX19dGhpcy5zaWdCeXRlcys9cztyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgbz10aGlzLndvcmRzO3ZhciBuPXRoaXMuc2lnQnl0ZXM7b1tuPj4+Ml0mPTQyOTQ5NjcyOTU8PCgzMi0obiU0KSo4KTtvLmxlbmd0aD1lLmNlaWwobi80KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgbj1qLmNsb25lLmNhbGwodGhpcyk7bi53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApO3JldHVybiBufSxyYW5kb206ZnVuY3Rpb24ocCl7dmFyIG89W107Zm9yKHZhciBuPTA7bjxwO24rPTQpe28ucHVzaCgoZS5yYW5kb20oKSo0Mjk0OTY3Mjk2KXwwKX1yZXR1cm4gbmV3IGwuaW5pdChvLHApfX0pO3ZhciBtPWEuZW5jPXt9O3ZhciBoPW0uSGV4PXtzdHJpbmdpZnk6ZnVuY3Rpb24ocCl7dmFyIHI9cC53b3Jkczt2YXIgbz1wLnNpZ0J5dGVzO3ZhciBxPVtdO2Zvcih2YXIgbj0wO248bztuKyspe3ZhciBzPShyW24+Pj4yXT4+PigyNC0obiU0KSo4KSkmMjU1O3EucHVzaCgocz4+PjQpLnRvU3RyaW5nKDE2KSk7cS5wdXNoKChzJjE1KS50b1N0cmluZygxNikpfXJldHVybiBxLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihwKXt2YXIgbj1wLmxlbmd0aDt2YXIgcT1bXTtmb3IodmFyIG89MDtvPG47bys9Mil7cVtvPj4+M118PXBhcnNlSW50KHAuc3Vic3RyKG8sMiksMTYpPDwoMjQtKG8lOCkqNCl9cmV0dXJuIG5ldyBsLmluaXQocSxuLzIpfX07dmFyIGQ9bS5MYXRpbjE9e3N0cmluZ2lmeTpmdW5jdGlvbihxKXt2YXIgcj1xLndvcmRzO3ZhciBwPXEuc2lnQnl0ZXM7dmFyIG49W107Zm9yKHZhciBvPTA7bzxwO28rKyl7dmFyIHM9KHJbbz4+PjJdPj4+KDI0LShvJTQpKjgpKSYyNTU7bi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUocykpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihwKXt2YXIgbj1wLmxlbmd0aDt2YXIgcT1bXTtmb3IodmFyIG89MDtvPG47bysrKXtxW28+Pj4yXXw9KHAuY2hhckNvZGVBdChvKSYyNTUpPDwoMjQtKG8lNCkqOCl9cmV0dXJuIG5ldyBsLmluaXQocSxuKX19O3ZhciBjPW0uVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKG4pe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShkLnN0cmluZ2lmeShuKSkpfWNhdGNoKG8pe3Rocm93IG5ldyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKX19LHBhcnNlOmZ1bmN0aW9uKG4pe3JldHVybiBkLnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChuKSkpfX07dmFyIGk9Yi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPWouZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IGwuaW5pdCgpO3RoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihuKXtpZih0eXBlb2Ygbj09InN0cmluZyIpe249Yy5wYXJzZShuKX10aGlzLl9kYXRhLmNvbmNhdChuKTt0aGlzLl9uRGF0YUJ5dGVzKz1uLnNpZ0J5dGVzfSxfcHJvY2VzczpmdW5jdGlvbih3KXt2YXIgcT10aGlzLl9kYXRhO3ZhciB4PXEud29yZHM7dmFyIG49cS5zaWdCeXRlczt2YXIgdD10aGlzLmJsb2NrU2l6ZTt2YXIgdj10KjQ7dmFyIHU9bi92O2lmKHcpe3U9ZS5jZWlsKHUpfWVsc2V7dT1lLm1heCgodXwwKS10aGlzLl9taW5CdWZmZXJTaXplLDApfXZhciBzPXUqdDt2YXIgcj1lLm1pbihzKjQsbik7aWYocyl7Zm9yKHZhciBwPTA7cDxzO3ArPXQpe3RoaXMuX2RvUHJvY2Vzc0Jsb2NrKHgscCl9dmFyIG89eC5zcGxpY2UoMCxzKTtxLnNpZ0J5dGVzLT1yfXJldHVybiBuZXcgbC5pbml0KG8scil9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIG49ai5jbG9uZS5jYWxsKHRoaXMpO24uX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBufSxfbWluQnVmZmVyU2l6ZTowfSk7dmFyIGY9Yi5IYXNoZXI9aS5leHRlbmQoe2NmZzpqLmV4dGVuZCgpLGluaXQ6ZnVuY3Rpb24obil7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKG4pO3RoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXtpLnJlc2V0LmNhbGwodGhpcyk7dGhpcy5fZG9SZXNldCgpfSx1cGRhdGU6ZnVuY3Rpb24obil7dGhpcy5fYXBwZW5kKG4pO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpc30sZmluYWxpemU6ZnVuY3Rpb24obil7aWYobil7dGhpcy5fYXBwZW5kKG4pfXZhciBvPXRoaXMuX2RvRmluYWxpemUoKTtyZXR1cm4gb30sYmxvY2tTaXplOjUxMi8zMixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbihwLG8pe3JldHVybiBuZXcgbi5pbml0KG8pLmZpbmFsaXplKHApfX0sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKHAsbyl7cmV0dXJuIG5ldyBrLkhNQUMuaW5pdChuLG8pLmZpbmFsaXplKHApfX19KTt2YXIgaz1hLmFsZ289e307cmV0dXJuIGF9KE1hdGgpKTsKLyoKQ3J5cHRvSlMgdjMuMS4yIHg2NC1jb3JlLW1pbi5qcwpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMKKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2UKKi8KKGZ1bmN0aW9uKGcpe3ZhciBhPUNyeXB0b0pTLGY9YS5saWIsZT1mLkJhc2UsaD1mLldvcmRBcnJheSxhPWEueDY0PXt9O2EuV29yZD1lLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihiLGMpe3RoaXMuaGlnaD1iO3RoaXMubG93PWN9fSk7YS5Xb3JkQXJyYXk9ZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oYixjKXtiPXRoaXMud29yZHM9Ynx8W107dGhpcy5zaWdCeXRlcz1jIT1nP2M6OCpiLmxlbmd0aH0sdG9YMzI6ZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcy53b3JkcyxjPWIubGVuZ3RoLGE9W10sZD0wO2Q8YztkKyspe3ZhciBlPWJbZF07YS5wdXNoKGUuaGlnaCk7YS5wdXNoKGUubG93KX1yZXR1cm4gaC5jcmVhdGUoYSx0aGlzLnNpZ0J5dGVzKX0sY2xvbmU6ZnVuY3Rpb24oKXtmb3IodmFyIGI9ZS5jbG9uZS5jYWxsKHRoaXMpLGM9Yi53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApLGE9Yy5sZW5ndGgsZD0wO2Q8YTtkKyspY1tkXT1jW2RdLmNsb25lKCk7cmV0dXJuIGJ9fSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIGNpcGhlci1jb3JlLW1pbi5qcwpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMKKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2UKKi8KQ3J5cHRvSlMubGliLkNpcGhlcnx8ZnVuY3Rpb24odSl7dmFyIGc9Q3J5cHRvSlMsZj1nLmxpYixrPWYuQmFzZSxsPWYuV29yZEFycmF5LHE9Zi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtLHI9Zy5lbmMuQmFzZTY0LHY9Zy5hbGdvLkV2cEtERixuPWYuQ2lwaGVyPXEuZXh0ZW5kKHtjZmc6ay5leHRlbmQoKSxjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fRU5DX1hGT1JNX01PREUsYSxiKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLGEsYil9LGluaXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChjKTt0aGlzLl94Zm9ybU1vZGU9YTt0aGlzLl9rZXk9Yjt0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7cS5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKX0scHJvY2VzczpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7CnJldHVybiB0aGlzLl9wcm9jZXNzKCl9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpfSxrZXlTaXplOjQsaXZTaXplOjQsX0VOQ19YRk9STV9NT0RFOjEsX0RFQ19YRk9STV9NT0RFOjIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm57ZW5jcnlwdDpmdW5jdGlvbihiLGMsZCl7cmV0dXJuKCJzdHJpbmciPT10eXBlb2YgYz9zOmopLmVuY3J5cHQoYSxiLGMsZCl9LGRlY3J5cHQ6ZnVuY3Rpb24oYixjLGQpe3JldHVybigic3RyaW5nIj09dHlwZW9mIGM/czpqKS5kZWNyeXB0KGEsYixjLGQpfX19fSk7Zi5TdHJlYW1DaXBoZXI9bi5leHRlbmQoe19kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb2Nlc3MoITApfSxibG9ja1NpemU6MX0pO3ZhciBtPWcubW9kZT17fSx0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9pdjtkP3RoaXMuX2l2PXU6ZD10aGlzLl9wcmV2QmxvY2s7Zm9yKHZhciBlPQowO2U8YztlKyspYVtiK2VdXj1kW2VdfSxoPShmLkJsb2NrQ2lwaGVyTW9kZT1rLmV4dGVuZCh7Y3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZShhLGIpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5EZWNyeXB0b3IuY3JlYXRlKGEsYil9LGluaXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLl9jaXBoZXI9YTt0aGlzLl9pdj1ifX0pKS5leHRlbmQoKTtoLkVuY3J5cHRvcj1oLmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fY2lwaGVyLGQ9Yy5ibG9ja1NpemU7dC5jYWxsKHRoaXMsYSxiLGQpO2MuZW5jcnlwdEJsb2NrKGEsYik7dGhpcy5fcHJldkJsb2NrPWEuc2xpY2UoYixiK2QpfX0pO2guRGVjcnlwdG9yPWguZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9jaXBoZXIsZD1jLmJsb2NrU2l6ZSxlPWEuc2xpY2UoYixiK2QpO2MuZGVjcnlwdEJsb2NrKGEsCmIpO3QuY2FsbCh0aGlzLGEsYixkKTt0aGlzLl9wcmV2QmxvY2s9ZX19KTttPW0uQ0JDPWg7aD0oZy5wYWQ9e30pLlBrY3M3PXtwYWQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9NCpiLGM9Yy1hLnNpZ0J5dGVzJWMsZD1jPDwyNHxjPDwxNnxjPDw4fGMsZT1bXSxmPTA7ZjxjO2YrPTQpZS5wdXNoKGQpO2M9bC5jcmVhdGUoZSxjKTthLmNvbmNhdChjKX0sdW5wYWQ6ZnVuY3Rpb24oYSl7YS5zaWdCeXRlcy09YS53b3Jkc1thLnNpZ0J5dGVzLTE+Pj4yXSYyNTV9fTtmLkJsb2NrQ2lwaGVyPW4uZXh0ZW5kKHtjZmc6bi5jZmcuZXh0ZW5kKHttb2RlOm0scGFkZGluZzpofSkscmVzZXQ6ZnVuY3Rpb24oKXtuLnJlc2V0LmNhbGwodGhpcyk7dmFyIGE9dGhpcy5jZmcsYj1hLml2LGE9YS5tb2RlO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpdmFyIGM9YS5jcmVhdGVFbmNyeXB0b3I7ZWxzZSBjPWEuY3JlYXRlRGVjcnlwdG9yLHRoaXMuX21pbkJ1ZmZlclNpemU9MTsKdGhpcy5fbW9kZT1jLmNhbGwoYSx0aGlzLGImJmIud29yZHMpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oYSxiKXt0aGlzLl9tb2RlLnByb2Nlc3NCbG9jayhhLGIpfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2ZnLnBhZGRpbmc7aWYodGhpcy5feGZvcm1Nb2RlPT10aGlzLl9FTkNfWEZPUk1fTU9ERSl7YS5wYWQodGhpcy5fZGF0YSx0aGlzLmJsb2NrU2l6ZSk7dmFyIGI9dGhpcy5fcHJvY2VzcyghMCl9ZWxzZSBiPXRoaXMuX3Byb2Nlc3MoITApLGEudW5wYWQoYik7cmV0dXJuIGJ9LGJsb2NrU2l6ZTo0fSk7dmFyIHA9Zi5DaXBoZXJQYXJhbXM9ay5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oYSl7dGhpcy5taXhJbihhKX0sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHRoaXMuZm9ybWF0dGVyKS5zdHJpbmdpZnkodGhpcyl9fSksbT0oZy5mb3JtYXQ9e30pLk9wZW5TU0w9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt2YXIgYj1hLmNpcGhlcnRleHQ7YT1hLnNhbHQ7CnJldHVybihhP2wuY3JlYXRlKFsxMzk4ODkzNjg0LDE3MDEwNzY4MzFdKS5jb25jYXQoYSkuY29uY2F0KGIpOmIpLnRvU3RyaW5nKHIpfSxwYXJzZTpmdW5jdGlvbihhKXthPXIucGFyc2UoYSk7dmFyIGI9YS53b3JkcztpZigxMzk4ODkzNjg0PT1iWzBdJiYxNzAxMDc2ODMxPT1iWzFdKXt2YXIgYz1sLmNyZWF0ZShiLnNsaWNlKDIsNCkpO2Iuc3BsaWNlKDAsNCk7YS5zaWdCeXRlcy09MTZ9cmV0dXJuIHAuY3JlYXRlKHtjaXBoZXJ0ZXh0OmEsc2FsdDpjfSl9fSxqPWYuU2VyaWFsaXphYmxlQ2lwaGVyPWsuZXh0ZW5kKHtjZmc6ay5leHRlbmQoe2Zvcm1hdDptfSksZW5jcnlwdDpmdW5jdGlvbihhLGIsYyxkKXtkPXRoaXMuY2ZnLmV4dGVuZChkKTt2YXIgZT1hLmNyZWF0ZUVuY3J5cHRvcihjLGQpO2I9ZS5maW5hbGl6ZShiKTtlPWUuY2ZnO3JldHVybiBwLmNyZWF0ZSh7Y2lwaGVydGV4dDpiLGtleTpjLGl2OmUuaXYsYWxnb3JpdGhtOmEsbW9kZTplLm1vZGUscGFkZGluZzplLnBhZGRpbmcsCmJsb2NrU2l6ZTphLmJsb2NrU2l6ZSxmb3JtYXR0ZXI6ZC5mb3JtYXR9KX0sZGVjcnlwdDpmdW5jdGlvbihhLGIsYyxkKXtkPXRoaXMuY2ZnLmV4dGVuZChkKTtiPXRoaXMuX3BhcnNlKGIsZC5mb3JtYXQpO3JldHVybiBhLmNyZWF0ZURlY3J5cHRvcihjLGQpLmZpbmFsaXplKGIuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbihhLGIpe3JldHVybiJzdHJpbmciPT10eXBlb2YgYT9iLnBhcnNlKGEsdGhpcyk6YX19KSxnPShnLmtkZj17fSkuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbihhLGIsYyxkKXtkfHwoZD1sLnJhbmRvbSg4KSk7YT12LmNyZWF0ZSh7a2V5U2l6ZTpiK2N9KS5jb21wdXRlKGEsZCk7Yz1sLmNyZWF0ZShhLndvcmRzLnNsaWNlKGIpLDQqYyk7YS5zaWdCeXRlcz00KmI7cmV0dXJuIHAuY3JlYXRlKHtrZXk6YSxpdjpjLHNhbHQ6ZH0pfX0scz1mLlBhc3N3b3JkQmFzZWRDaXBoZXI9ai5leHRlbmQoe2NmZzpqLmNmZy5leHRlbmQoe2tkZjpnfSksZW5jcnlwdDpmdW5jdGlvbihhLApiLGMsZCl7ZD10aGlzLmNmZy5leHRlbmQoZCk7Yz1kLmtkZi5leGVjdXRlKGMsYS5rZXlTaXplLGEuaXZTaXplKTtkLml2PWMuaXY7YT1qLmVuY3J5cHQuY2FsbCh0aGlzLGEsYixjLmtleSxkKTthLm1peEluKGMpO3JldHVybiBhfSxkZWNyeXB0OmZ1bmN0aW9uKGEsYixjLGQpe2Q9dGhpcy5jZmcuZXh0ZW5kKGQpO2I9dGhpcy5fcGFyc2UoYixkLmZvcm1hdCk7Yz1kLmtkZi5leGVjdXRlKGMsYS5rZXlTaXplLGEuaXZTaXplLGIuc2FsdCk7ZC5pdj1jLml2O3JldHVybiBqLmRlY3J5cHQuY2FsbCh0aGlzLGEsYixjLmtleSxkKX19KX0oKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBhZXMtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmb3IodmFyIHE9Q3J5cHRvSlMseD1xLmxpYi5CbG9ja0NpcGhlcixyPXEuYWxnbyxqPVtdLHk9W10sej1bXSxBPVtdLEI9W10sQz1bXSxzPVtdLHU9W10sdj1bXSx3PVtdLGc9W10saz0wOzI1Nj5rO2srKylnW2tdPTEyOD5rP2s8PDE6azw8MV4yODM7Zm9yKHZhciBuPTAsbD0wLGs9MDsyNTY+aztrKyspe3ZhciBmPWxebDw8MV5sPDwyXmw8PDNebDw8NCxmPWY+Pj44XmYmMjU1Xjk5O2pbbl09Zjt5W2ZdPW47dmFyIHQ9Z1tuXSxEPWdbdF0sRT1nW0RdLGI9MjU3KmdbZl1eMTY4NDMwMDgqZjt6W25dPWI8PDI0fGI+Pj44O0Fbbl09Yjw8MTZ8Yj4+PjE2O0Jbbl09Yjw8OHxiPj4+MjQ7Q1tuXT1iO2I9MTY4NDMwMDkqRV42NTUzNypEXjI1Nyp0XjE2ODQzMDA4Km47c1tmXT1iPDwyNHxiPj4+ODt1W2ZdPWI8PDE2fGI+Pj4xNjt2W2ZdPWI8PDh8Yj4+PjI0O3dbZl09YjtuPyhuPXReZ1tnW2dbRV50XV1dLGxePWdbZ1tsXV0pOm49bD0xfXZhciBGPVswLDEsMiw0LDgsCjE2LDMyLDY0LDEyOCwyNyw1NF0scj1yLkFFUz14LmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGM9dGhpcy5fa2V5LGU9Yy53b3JkcyxhPWMuc2lnQnl0ZXMvNCxjPTQqKCh0aGlzLl9uUm91bmRzPWErNikrMSksYj10aGlzLl9rZXlTY2hlZHVsZT1bXSxoPTA7aDxjO2grKylpZihoPGEpYltoXT1lW2hdO2Vsc2V7dmFyIGQ9YltoLTFdO2glYT82PGEmJjQ9PWglYSYmKGQ9altkPj4+MjRdPDwyNHxqW2Q+Pj4xNiYyNTVdPDwxNnxqW2Q+Pj44JjI1NV08PDh8altkJjI1NV0pOihkPWQ8PDh8ZD4+PjI0LGQ9altkPj4+MjRdPDwyNHxqW2Q+Pj4xNiYyNTVdPDwxNnxqW2Q+Pj44JjI1NV08PDh8altkJjI1NV0sZF49RltoL2F8MF08PDI0KTtiW2hdPWJbaC1hXV5kfWU9dGhpcy5faW52S2V5U2NoZWR1bGU9W107Zm9yKGE9MDthPGM7YSsrKWg9Yy1hLGQ9YSU0P2JbaF06YltoLTRdLGVbYV09ND5hfHw0Pj1oP2Q6c1tqW2Q+Pj4yNF1dXnVbaltkPj4+MTYmMjU1XV1edltqW2Q+Pj4KOCYyNTVdXV53W2pbZCYyNTVdXX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGMsZSl7dGhpcy5fZG9DcnlwdEJsb2NrKGMsZSx0aGlzLl9rZXlTY2hlZHVsZSx6LEEsQixDLGopfSxkZWNyeXB0QmxvY2s6ZnVuY3Rpb24oYyxlKXt2YXIgYT1jW2UrMV07Y1tlKzFdPWNbZSszXTtjW2UrM109YTt0aGlzLl9kb0NyeXB0QmxvY2soYyxlLHRoaXMuX2ludktleVNjaGVkdWxlLHMsdSx2LHcseSk7YT1jW2UrMV07Y1tlKzFdPWNbZSszXTtjW2UrM109YX0sX2RvQ3J5cHRCbG9jazpmdW5jdGlvbihjLGUsYSxiLGgsZCxqLG0pe2Zvcih2YXIgbj10aGlzLl9uUm91bmRzLGY9Y1tlXV5hWzBdLGc9Y1tlKzFdXmFbMV0saz1jW2UrMl1eYVsyXSxwPWNbZSszXV5hWzNdLGw9NCx0PTE7dDxuO3QrKyl2YXIgcT1iW2Y+Pj4yNF1eaFtnPj4+MTYmMjU1XV5kW2s+Pj44JjI1NV1ealtwJjI1NV1eYVtsKytdLHI9YltnPj4+MjRdXmhbaz4+PjE2JjI1NV1eZFtwPj4+OCYyNTVdXmpbZiYyNTVdXmFbbCsrXSxzPQpiW2s+Pj4yNF1eaFtwPj4+MTYmMjU1XV5kW2Y+Pj44JjI1NV1ealtnJjI1NV1eYVtsKytdLHA9YltwPj4+MjRdXmhbZj4+PjE2JjI1NV1eZFtnPj4+OCYyNTVdXmpbayYyNTVdXmFbbCsrXSxmPXEsZz1yLGs9cztxPShtW2Y+Pj4yNF08PDI0fG1bZz4+PjE2JjI1NV08PDE2fG1baz4+PjgmMjU1XTw8OHxtW3AmMjU1XSleYVtsKytdO3I9KG1bZz4+PjI0XTw8MjR8bVtrPj4+MTYmMjU1XTw8MTZ8bVtwPj4+OCYyNTVdPDw4fG1bZiYyNTVdKV5hW2wrK107cz0obVtrPj4+MjRdPDwyNHxtW3A+Pj4xNiYyNTVdPDwxNnxtW2Y+Pj44JjI1NV08PDh8bVtnJjI1NV0pXmFbbCsrXTtwPShtW3A+Pj4yNF08PDI0fG1bZj4+PjE2JjI1NV08PDE2fG1bZz4+PjgmMjU1XTw8OHxtW2smMjU1XSleYVtsKytdO2NbZV09cTtjW2UrMV09cjtjW2UrMl09cztjW2UrM109cH0sa2V5U2l6ZTo4fSk7cS5BRVM9eC5fY3JlYXRlSGVscGVyKHIpfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiB0cmlwbGVkZXMtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmdW5jdGlvbiBqKGIsYyl7dmFyIGE9KHRoaXMuX2xCbG9jaz4+PmJedGhpcy5fckJsb2NrKSZjO3RoaXMuX3JCbG9ja149YTt0aGlzLl9sQmxvY2tePWE8PGJ9ZnVuY3Rpb24gbChiLGMpe3ZhciBhPSh0aGlzLl9yQmxvY2s+Pj5iXnRoaXMuX2xCbG9jaykmYzt0aGlzLl9sQmxvY2tePWE7dGhpcy5fckJsb2NrXj1hPDxifXZhciBoPUNyeXB0b0pTLGU9aC5saWIsbj1lLldvcmRBcnJheSxlPWUuQmxvY2tDaXBoZXIsZz1oLmFsZ28scT1bNTcsNDksNDEsMzMsMjUsMTcsOSwxLDU4LDUwLDQyLDM0LDI2LDE4LDEwLDIsNTksNTEsNDMsMzUsMjcsMTksMTEsMyw2MCw1Miw0NCwzNiw2Myw1NSw0NywzOSwzMSwyMywxNSw3LDYyLDU0LDQ2LDM4LDMwLDIyLDE0LDYsNjEsNTMsNDUsMzcsMjksMjEsMTMsNSwyOCwyMCwxMiw0XSxwPVsxNCwxNywxMSwyNCwxLDUsMywyOCwxNSw2LDIxLDEwLDIzLDE5LDEyLDQsMjYsOCwxNiw3LDI3LDIwLDEzLDIsNDEsNTIsMzEsMzcsNDcsCjU1LDMwLDQwLDUxLDQ1LDMzLDQ4LDQ0LDQ5LDM5LDU2LDM0LDUzLDQ2LDQyLDUwLDM2LDI5LDMyXSxyPVsxLDIsNCw2LDgsMTAsMTIsMTQsMTUsMTcsMTksMjEsMjMsMjUsMjcsMjhdLHM9W3siMCI6ODQyMTg4OCwyNjg0MzU0NTY6MzI3NjgsNTM2ODcwOTEyOjg0MjEzNzgsODA1MzA2MzY4OjIsMTA3Mzc0MTgyNDo1MTIsMTM0MjE3NzI4MDo4NDIxODkwLDE2MTA2MTI3MzY6ODM4OTEyMiwxODc5MDQ4MTkyOjgzODg2MDgsMjE0NzQ4MzY0ODo1MTQsMjQxNTkxOTEwNDo4Mzg5MTIwLDI2ODQzNTQ1NjA6MzMyODAsMjk1Mjc5MDAxNjo4NDIxMzc2LDMyMjEyMjU0NzI6MzI3NzAsMzQ4OTY2MDkyODo4Mzg4NjEwLDM3NTgwOTYzODQ6MCw0MDI2NTMxODQwOjMzMjgyLDEzNDIxNzcyODowLDQwMjY1MzE4NDo4NDIxODkwLDY3MTA4ODY0MDozMzI4Miw5Mzk1MjQwOTY6MzI3NjgsMTIwNzk1OTU1Mjo4NDIxODg4LDE0NzYzOTUwMDg6NTEyLDE3NDQ4MzA0NjQ6ODQyMTM3OCwyMDEzMjY1OTIwOjIsCjIyODE3MDEzNzY6ODM4OTEyMCwyNTUwMTM2ODMyOjMzMjgwLDI4MTg1NzIyODg6ODQyMTM3NiwzMDg3MDA3NzQ0OjgzODkxMjIsMzM1NTQ0MzIwMDo4Mzg4NjEwLDM2MjM4Nzg2NTY6MzI3NzAsMzg5MjMxNDExMjo1MTQsNDE2MDc0OTU2ODo4Mzg4NjA4LDE6MzI3NjgsMjY4NDM1NDU3OjIsNTM2ODcwOTEzOjg0MjE4ODgsODA1MzA2MzY5OjgzODg2MDgsMTA3Mzc0MTgyNTo4NDIxMzc4LDEzNDIxNzcyODE6MzMyODAsMTYxMDYxMjczNzo1MTIsMTg3OTA0ODE5Mzo4Mzg5MTIyLDIxNDc0ODM2NDk6ODQyMTg5MCwyNDE1OTE5MTA1Ojg0MjEzNzYsMjY4NDM1NDU2MTo4Mzg4NjEwLDI5NTI3OTAwMTc6MzMyODIsMzIyMTIyNTQ3Mzo1MTQsMzQ4OTY2MDkyOTo4Mzg5MTIwLDM3NTgwOTYzODU6MzI3NzAsNDAyNjUzMTg0MTowLDEzNDIxNzcyOTo4NDIxODkwLDQwMjY1MzE4NTo4NDIxMzc2LDY3MTA4ODY0MTo4Mzg4NjA4LDkzOTUyNDA5Nzo1MTIsMTIwNzk1OTU1MzozMjc2OCwxNDc2Mzk1MDA5OjgzODg2MTAsCjE3NDQ4MzA0NjU6MiwyMDEzMjY1OTIxOjMzMjgyLDIyODE3MDEzNzc6MzI3NzAsMjU1MDEzNjgzMzo4Mzg5MTIyLDI4MTg1NzIyODk6NTE0LDMwODcwMDc3NDU6ODQyMTg4OCwzMzU1NDQzMjAxOjgzODkxMjAsMzYyMzg3ODY1NzowLDM4OTIzMTQxMTM6MzMyODAsNDE2MDc0OTU2OTo4NDIxMzc4fSx7IjAiOjEwNzQyODI1MTIsMTY3NzcyMTY6MTYzODQsMzM1NTQ0MzI6NTI0Mjg4LDUwMzMxNjQ4OjEwNzQyNjYxMjgsNjcxMDg4NjQ6MTA3Mzc0MTg0MCw4Mzg4NjA4MDoxMDc0MjgyNDk2LDEwMDY2MzI5NjoxMDczNzU4MjA4LDExNzQ0MDUxMjoxNiwxMzQyMTc3Mjg6NTQwNjcyLDE1MDk5NDk0NDoxMDczNzU4MjI0LDE2Nzc3MjE2MDoxMDczNzQxODI0LDE4NDU0OTM3Njo1NDA2ODgsMjAxMzI2NTkyOjUyNDMwNCwyMTgxMDM4MDg6MCwyMzQ4ODEwMjQ6MTY0MDAsMjUxNjU4MjQwOjEwNzQyNjYxMTIsODM4ODYwODoxMDczNzU4MjA4LDI1MTY1ODI0OjU0MDY4OCw0MTk0MzA0MDoxNiw1ODcyMDI1NjoxMDczNzU4MjI0LAo3NTQ5NzQ3MjoxMDc0MjgyNTEyLDkyMjc0Njg4OjEwNzM3NDE4MjQsMTA5MDUxOTA0OjUyNDI4OCwxMjU4MjkxMjA6MTA3NDI2NjEyOCwxNDI2MDYzMzY6NTI0MzA0LDE1OTM4MzU1MjowLDE3NjE2MDc2ODoxNjM4NCwxOTI5Mzc5ODQ6MTA3NDI2NjExMiwyMDk3MTUyMDA6MTA3Mzc0MTg0MCwyMjY0OTI0MTY6NTQwNjcyLDI0MzI2OTYzMjoxMDc0MjgyNDk2LDI2MDA0Njg0ODoxNjQwMCwyNjg0MzU0NTY6MCwyODUyMTI2NzI6MTA3NDI2NjEyOCwzMDE5ODk4ODg6MTA3Mzc1ODIyNCwzMTg3NjcxMDQ6MTA3NDI4MjQ5NiwzMzU1NDQzMjA6MTA3NDI2NjExMiwzNTIzMjE1MzY6MTYsMzY5MDk4NzUyOjU0MDY4OCwzODU4NzU5Njg6MTYzODQsNDAyNjUzMTg0OjE2NDAwLDQxOTQzMDQwMDo1MjQyODgsNDM2MjA3NjE2OjUyNDMwNCw0NTI5ODQ4MzI6MTA3Mzc0MTg0MCw0Njk3NjIwNDg6NTQwNjcyLDQ4NjUzOTI2NDoxMDczNzU4MjA4LDUwMzMxNjQ4MDoxMDczNzQxODI0LDUyMDA5MzY5NjoxMDc0MjgyNTEyLAoyNzY4MjQwNjQ6NTQwNjg4LDI5MzYwMTI4MDo1MjQyODgsMzEwMzc4NDk2OjEwNzQyNjYxMTIsMzI3MTU1NzEyOjE2Mzg0LDM0MzkzMjkyODoxMDczNzU4MjA4LDM2MDcxMDE0NDoxMDc0MjgyNTEyLDM3NzQ4NzM2MDoxNiwzOTQyNjQ1NzY6MTA3Mzc0MTgyNCw0MTEwNDE3OTI6MTA3NDI4MjQ5Niw0Mjc4MTkwMDg6MTA3Mzc0MTg0MCw0NDQ1OTYyMjQ6MTA3Mzc1ODIyNCw0NjEzNzM0NDA6NTI0MzA0LDQ3ODE1MDY1NjowLDQ5NDkyNzg3MjoxNjQwMCw1MTE3MDUwODg6MTA3NDI2NjEyOCw1Mjg0ODIzMDQ6NTQwNjcyfSx7IjAiOjI2MCwxMDQ4NTc2OjAsMjA5NzE1Mjo2NzEwOTEyMCwzMTQ1NzI4OjY1Nzk2LDQxOTQzMDQ6NjU1NDAsNTI0Mjg4MDo2NzEwODg2OCw2MjkxNDU2OjY3MTc0NjYwLDczNDAwMzI6NjcxNzQ0MDAsODM4ODYwODo2NzEwODg2NCw5NDM3MTg0OjY3MTc0NjU2LDEwNDg1NzYwOjY1NzkyLDExNTM0MzM2OjY3MTc0NDA0LDEyNTgyOTEyOjY3MTA5MTI0LDEzNjMxNDg4OjY1NTM2LAoxNDY4MDA2NDo0LDE1NzI4NjQwOjI1Niw1MjQyODg6NjcxNzQ2NTYsMTU3Mjg2NDo2NzE3NDQwNCwyNjIxNDQwOjAsMzY3MDAxNjo2NzEwOTEyMCw0NzE4NTkyOjY3MTA4ODY4LDU3NjcxNjg6NjU1MzYsNjgxNTc0NDo2NTU0MCw3ODY0MzIwOjI2MCw4OTEyODk2OjQsOTk2MTQ3MjoyNTYsMTEwMTAwNDg6NjcxNzQ0MDAsMTIwNTg2MjQ6NjU3OTYsMTMxMDcyMDA6NjU3OTIsMTQxNTU3NzY6NjcxMDkxMjQsMTUyMDQzNTI6NjcxNzQ2NjAsMTYyNTI5Mjg6NjcxMDg4NjQsMTY3NzcyMTY6NjcxNzQ2NTYsMTc4MjU3OTI6NjU1NDAsMTg4NzQzNjg6NjU1MzYsMTk5MjI5NDQ6NjcxMDkxMjAsMjA5NzE1MjA6MjU2LDIyMDIwMDk2OjY3MTc0NjYwLDIzMDY4NjcyOjY3MTA4ODY4LDI0MTE3MjQ4OjAsMjUxNjU4MjQ6NjcxMDkxMjQsMjYyMTQ0MDA6NjcxMDg4NjQsMjcyNjI5NzY6NCwyODMxMTU1Mjo2NTc5MiwyOTM2MDEyODo2NzE3NDQwMCwzMDQwODcwNDoyNjAsMzE0NTcyODA6NjU3OTYsMzI1MDU4NTY6NjcxNzQ0MDQsCjE3MzAxNTA0OjY3MTA4ODY0LDE4MzUwMDgwOjI2MCwxOTM5ODY1Njo2NzE3NDY1NiwyMDQ0NzIzMjowLDIxNDk1ODA4OjY1NTQwLDIyNTQ0Mzg0OjY3MTA5MTIwLDIzNTkyOTYwOjI1NiwyNDY0MTUzNjo2NzE3NDQwNCwyNTY5MDExMjo2NTUzNiwyNjczODY4ODo2NzE3NDY2MCwyNzc4NzI2NDo2NTc5NiwyODgzNTg0MDo2NzEwODg2OCwyOTg4NDQxNjo2NzEwOTEyNCwzMDkzMjk5Mjo2NzE3NDQwMCwzMTk4MTU2ODo0LDMzMDMwMTQ0OjY1NzkyfSx7IjAiOjIxNTE2ODIwNDgsNjU1MzY6MjE0NzQ4NzgwOCwxMzEwNzI6NDE5ODQ2NCwxOTY2MDg6MjE1MTY3Nzk1MiwyNjIxNDQ6MCwzMjc2ODA6NDE5ODQwMCwzOTMyMTY6MjE0NzQ4MzcxMiw0NTg3NTI6NDE5NDM2OCw1MjQyODg6MjE0NzQ4MzY0OCw1ODk4MjQ6NDE5NDMwNCw2NTUzNjA6NjQsNzIwODk2OjIxNDc0ODc3NDQsNzg2NDMyOjIxNTE2NzgwMTYsODUxOTY4OjQxNjAsOTE3NTA0OjQwOTYsOTgzMDQwOjIxNTE2ODIxMTIsMzI3Njg6MjE0NzQ4NzgwOCwKOTgzMDQ6NjQsMTYzODQwOjIxNTE2NzgwMTYsMjI5Mzc2OjIxNDc0ODc3NDQsMjk0OTEyOjQxOTg0MDAsMzYwNDQ4OjIxNTE2ODIxMTIsNDI1OTg0OjAsNDkxNTIwOjIxNTE2Nzc5NTIsNTU3MDU2OjQwOTYsNjIyNTkyOjIxNTE2ODIwNDgsNjg4MTI4OjQxOTQzMDQsNzUzNjY0OjQxNjAsODE5MjAwOjIxNDc0ODM2NDgsODg0NzM2OjQxOTQzNjgsOTUwMjcyOjQxOTg0NjQsMTAxNTgwODoyMTQ3NDgzNzEyLDEwNDg1NzY6NDE5NDM2OCwxMTE0MTEyOjQxOTg0MDAsMTE3OTY0ODoyMTQ3NDgzNzEyLDEyNDUxODQ6MCwxMzEwNzIwOjQxNjAsMTM3NjI1NjoyMTUxNjc4MDE2LDE0NDE3OTI6MjE1MTY4MjA0OCwxNTA3MzI4OjIxNDc0ODc4MDgsMTU3Mjg2NDoyMTUxNjgyMTEyLDE2Mzg0MDA6MjE0NzQ4MzY0OCwxNzAzOTM2OjIxNTE2Nzc5NTIsMTc2OTQ3Mjo0MTk4NDY0LDE4MzUwMDg6MjE0NzQ4Nzc0NCwxOTAwNTQ0OjQxOTQzMDQsMTk2NjA4MDo2NCwyMDMxNjE2OjQwOTYsMTA4MTM0NDoyMTUxNjc3OTUyLAoxMTQ2ODgwOjIxNTE2ODIxMTIsMTIxMjQxNjowLDEyNzc5NTI6NDE5ODQwMCwxMzQzNDg4OjQxOTQzNjgsMTQwOTAyNDoyMTQ3NDgzNjQ4LDE0NzQ1NjA6MjE0NzQ4NzgwOCwxNTQwMDk2OjY0LDE2MDU2MzI6MjE0NzQ4MzcxMiwxNjcxMTY4OjQwOTYsMTczNjcwNDoyMTQ3NDg3NzQ0LDE4MDIyNDA6MjE1MTY3ODAxNiwxODY3Nzc2OjQxNjAsMTkzMzMxMjoyMTUxNjgyMDQ4LDE5OTg4NDg6NDE5NDMwNCwyMDY0Mzg0OjQxOTg0NjR9LHsiMCI6MTI4LDQwOTY6MTcwMzkzNjAsODE5MjoyNjIxNDQsMTIyODg6NTM2ODcwOTEyLDE2Mzg0OjUzNzEzMzE4NCwyMDQ4MDoxNjc3NzM0NCwyNDU3Njo1NTM2NDgyNTYsMjg2NzI6MjYyMjcyLDMyNzY4OjE2Nzc3MjE2LDM2ODY0OjUzNzEzMzA1Niw0MDk2MDo1MzY4NzEwNDAsNDUwNTY6NTUzOTEwNDAwLDQ5MTUyOjU1MzkxMDI3Miw1MzI0ODowLDU3MzQ0OjE3MDM5NDg4LDYxNDQwOjU1MzY0ODEyOCwyMDQ4OjE3MDM5NDg4LDYxNDQ6NTUzNjQ4MjU2LAoxMDI0MDoxMjgsMTQzMzY6MTcwMzkzNjAsMTg0MzI6MjYyMTQ0LDIyNTI4OjUzNzEzMzE4NCwyNjYyNDo1NTM5MTAyNzIsMzA3MjA6NTM2ODcwOTEyLDM0ODE2OjUzNzEzMzA1NiwzODkxMjowLDQzMDA4OjU1MzkxMDQwMCw0NzEwNDoxNjc3NzM0NCw1MTIwMDo1MzY4NzEwNDAsNTUyOTY6NTUzNjQ4MTI4LDU5MzkyOjE2Nzc3MjE2LDYzNDg4OjI2MjI3Miw2NTUzNjoyNjIxNDQsNjk2MzI6MTI4LDczNzI4OjUzNjg3MDkxMiw3NzgyNDo1NTM2NDgyNTYsODE5MjA6MTY3NzczNDQsODYwMTY6NTUzOTEwMjcyLDkwMTEyOjUzNzEzMzE4NCw5NDIwODoxNjc3NzIxNiw5ODMwNDo1NTM5MTA0MDAsMTAyNDAwOjU1MzY0ODEyOCwxMDY0OTY6MTcwMzkzNjAsMTEwNTkyOjUzNzEzMzA1NiwxMTQ2ODg6MjYyMjcyLDExODc4NDo1MzY4NzEwNDAsMTIyODgwOjAsMTI2OTc2OjE3MDM5NDg4LDY3NTg0OjU1MzY0ODI1Niw3MTY4MDoxNjc3NzIxNiw3NTc3NjoxNzAzOTM2MCw3OTg3Mjo1MzcxMzMxODQsCjgzOTY4OjUzNjg3MDkxMiw4ODA2NDoxNzAzOTQ4OCw5MjE2MDoxMjgsOTYyNTY6NTUzOTEwMjcyLDEwMDM1MjoyNjIyNzIsMTA0NDQ4OjU1MzkxMDQwMCwxMDg1NDQ6MCwxMTI2NDA6NTUzNjQ4MTI4LDExNjczNjoxNjc3NzM0NCwxMjA4MzI6MjYyMTQ0LDEyNDkyODo1MzcxMzMwNTYsMTI5MDI0OjUzNjg3MTA0MH0seyIwIjoyNjg0MzU0NjQsMjU2OjgxOTIsNTEyOjI3MDUzMjYwOCw3Njg6MjcwNTQwODA4LDEwMjQ6MjY4NDQzNjQ4LDEyODA6MjA5NzE1MiwxNTM2OjIwOTcxNjAsMTc5MjoyNjg0MzU0NTYsMjA0ODowLDIzMDQ6MjY4NDQzNjU2LDI1NjA6MjEwNTM0NCwyODE2OjgsMzA3MjoyNzA1MzI2MTYsMzMyODoyMTA1MzUyLDM1ODQ6ODIwMCwzODQwOjI3MDU0MDgwMCwxMjg6MjcwNTMyNjA4LDM4NDoyNzA1NDA4MDgsNjQwOjgsODk2OjIwOTcxNTIsMTE1MjoyMTA1MzUyLDE0MDg6MjY4NDM1NDY0LDE2NjQ6MjY4NDQzNjQ4LDE5MjA6ODIwMCwyMTc2OjIwOTcxNjAsMjQzMjo4MTkyLAoyNjg4OjI2ODQ0MzY1NiwyOTQ0OjI3MDUzMjYxNiwzMjAwOjAsMzQ1NjoyNzA1NDA4MDAsMzcxMjoyMTA1MzQ0LDM5Njg6MjY4NDM1NDU2LDQwOTY6MjY4NDQzNjQ4LDQzNTI6MjcwNTMyNjE2LDQ2MDg6MjcwNTQwODA4LDQ4NjQ6ODIwMCw1MTIwOjIwOTcxNTIsNTM3NjoyNjg0MzU0NTYsNTYzMjoyNjg0MzU0NjQsNTg4ODoyMTA1MzQ0LDYxNDQ6MjEwNTM1Miw2NDAwOjAsNjY1Njo4LDY5MTI6MjcwNTMyNjA4LDcxNjg6ODE5Miw3NDI0OjI2ODQ0MzY1Niw3NjgwOjI3MDU0MDgwMCw3OTM2OjIwOTcxNjAsNDIyNDo4LDQ0ODA6MjEwNTM0NCw0NzM2OjIwOTcxNTIsNDk5MjoyNjg0MzU0NjQsNTI0ODoyNjg0NDM2NDgsNTUwNDo4MjAwLDU3NjA6MjcwNTQwODA4LDYwMTY6MjcwNTMyNjA4LDYyNzI6MjcwNTQwODAwLDY1Mjg6MjcwNTMyNjE2LDY3ODQ6ODE5Miw3MDQwOjIxMDUzNTIsNzI5NjoyMDk3MTYwLDc1NTI6MCw3ODA4OjI2ODQzNTQ1Niw4MDY0OjI2ODQ0MzY1Nn0seyIwIjoxMDQ4NTc2LAoxNjozMzU1NTQ1NywzMjoxMDI0LDQ4OjEwNDk2MDEsNjQ6MzQ2MDQwMzMsODA6MCw5NjoxLDExMjozNDYwMzAwOSwxMjg6MzM1NTU0NTYsMTQ0OjEwNDg1NzcsMTYwOjMzNTU0NDMzLDE3NjozNDYwNDAzMiwxOTI6MzQ2MDMwMDgsMjA4OjEwMjUsMjI0OjEwNDk2MDAsMjQwOjMzNTU0NDMyLDg6MzQ2MDMwMDksMjQ6MCw0MDozMzU1NTQ1Nyw1NjozNDYwNDAzMiw3MjoxMDQ4NTc2LDg4OjMzNTU0NDMzLDEwNDozMzU1NDQzMiwxMjA6MTAyNSwxMzY6MTA0OTYwMSwxNTI6MzM1NTU0NTYsMTY4OjM0NjAzMDA4LDE4NDoxMDQ4NTc3LDIwMDoxMDI0LDIxNjozNDYwNDAzMywyMzI6MSwyNDg6MTA0OTYwMCwyNTY6MzM1NTQ0MzIsMjcyOjEwNDg1NzYsMjg4OjMzNTU1NDU3LDMwNDozNDYwMzAwOSwzMjA6MTA0ODU3NywzMzY6MzM1NTU0NTYsMzUyOjM0NjA0MDMyLDM2ODoxMDQ5NjAxLDM4NDoxMDI1LDQwMDozNDYwNDAzMyw0MTY6MTA0OTYwMCw0MzI6MSw0NDg6MCw0NjQ6MzQ2MDMwMDgsNDgwOjMzNTU0NDMzLAo0OTY6MTAyNCwyNjQ6MTA0OTYwMCwyODA6MzM1NTU0NTcsMjk2OjM0NjAzMDA5LDMxMjoxLDMyODozMzU1NDQzMiwzNDQ6MTA0ODU3NiwzNjA6MTAyNSwzNzY6MzQ2MDQwMzIsMzkyOjMzNTU0NDMzLDQwODozNDYwMzAwOCw0MjQ6MCw0NDA6MzQ2MDQwMzMsNDU2OjEwNDk2MDEsNDcyOjEwMjQsNDg4OjMzNTU1NDU2LDUwNDoxMDQ4NTc3fSx7IjAiOjEzNDIxOTgwOCwxOjEzMTA3MiwyOjEzNDIxNzcyOCwzOjMyLDQ6MTMxMTA0LDU6MTM0MzUwODgwLDY6MTM0MzUwODQ4LDc6MjA0OCw4OjEzNDM0ODgwMCw5OjEzNDIxOTc3NiwxMDoxMzMxMjAsMTE6MTM0MzQ4ODMyLDEyOjIwODAsMTM6MCwxNDoxMzQyMTc3NjAsMTU6MTMzMTUyLDIxNDc0ODM2NDg6MjA0OCwyMTQ3NDgzNjQ5OjEzNDM1MDg4MCwyMTQ3NDgzNjUwOjEzNDIxOTgwOCwyMTQ3NDgzNjUxOjEzNDIxNzcyOCwyMTQ3NDgzNjUyOjEzNDM0ODgwMCwyMTQ3NDgzNjUzOjEzMzEyMCwyMTQ3NDgzNjU0OjEzMzE1MiwyMTQ3NDgzNjU1OjMyLAoyMTQ3NDgzNjU2OjEzNDIxNzc2MCwyMTQ3NDgzNjU3OjIwODAsMjE0NzQ4MzY1ODoxMzExMDQsMjE0NzQ4MzY1OToxMzQzNTA4NDgsMjE0NzQ4MzY2MDowLDIxNDc0ODM2NjE6MTM0MzQ4ODMyLDIxNDc0ODM2NjI6MTM0MjE5Nzc2LDIxNDc0ODM2NjM6MTMxMDcyLDE2OjEzMzE1MiwxNzoxMzQzNTA4NDgsMTg6MzIsMTk6MjA0OCwyMDoxMzQyMTk3NzYsMjE6MTM0MjE3NzYwLDIyOjEzNDM0ODgzMiwyMzoxMzEwNzIsMjQ6MCwyNToxMzExMDQsMjY6MTM0MzQ4ODAwLDI3OjEzNDIxOTgwOCwyODoxMzQzNTA4ODAsMjk6MTMzMTIwLDMwOjIwODAsMzE6MTM0MjE3NzI4LDIxNDc0ODM2NjQ6MTMxMDcyLDIxNDc0ODM2NjU6MjA0OCwyMTQ3NDgzNjY2OjEzNDM0ODgzMiwyMTQ3NDgzNjY3OjEzMzE1MiwyMTQ3NDgzNjY4OjMyLDIxNDc0ODM2Njk6MTM0MzQ4ODAwLDIxNDc0ODM2NzA6MTM0MjE3NzI4LDIxNDc0ODM2NzE6MTM0MjE5ODA4LDIxNDc0ODM2NzI6MTM0MzUwODgwLDIxNDc0ODM2NzM6MTM0MjE3NzYwLAoyMTQ3NDgzNjc0OjEzNDIxOTc3NiwyMTQ3NDgzNjc1OjAsMjE0NzQ4MzY3NjoxMzMxMjAsMjE0NzQ4MzY3NzoyMDgwLDIxNDc0ODM2Nzg6MTMxMTA0LDIxNDc0ODM2Nzk6MTM0MzUwODQ4fV0sdD1bNDE2MDc0OTU2OSw1Mjg0ODIzMDQsMzMwMzAxNDQsMjA2NDM4NCwxMjkwMjQsODA2NCw1MDQsMjE0NzQ4MzY3OV0sbT1nLkRFUz1lLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcy5fa2V5LndvcmRzLGM9W10sYT0wOzU2PmE7YSsrKXt2YXIgZj1xW2FdLTE7Y1thXT1iW2Y+Pj41XT4+PjMxLWYlMzImMX1iPXRoaXMuX3N1YktleXM9W107Zm9yKGY9MDsxNj5mO2YrKyl7Zm9yKHZhciBkPWJbZl09W10sZT1yW2ZdLGE9MDsyND5hO2ErKylkW2EvNnwwXXw9Y1socFthXS0xK2UpJTI4XTw8MzEtYSU2LGRbNCsoYS82fDApXXw9Y1syOCsocFthKzI0XS0xK2UpJTI4XTw8MzEtYSU2O2RbMF09ZFswXTw8MXxkWzBdPj4+MzE7Zm9yKGE9MTs3PmE7YSsrKWRbYV0+Pj49CjQqKGEtMSkrMztkWzddPWRbN108PDV8ZFs3XT4+PjI3fWM9dGhpcy5faW52U3ViS2V5cz1bXTtmb3IoYT0wOzE2PmE7YSsrKWNbYV09YlsxNS1hXX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZG9DcnlwdEJsb2NrKGIsYyx0aGlzLl9zdWJLZXlzKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZG9DcnlwdEJsb2NrKGIsYyx0aGlzLl9pbnZTdWJLZXlzKX0sX2RvQ3J5cHRCbG9jazpmdW5jdGlvbihiLGMsYSl7dGhpcy5fbEJsb2NrPWJbY107dGhpcy5fckJsb2NrPWJbYysxXTtqLmNhbGwodGhpcyw0LDI1MjY0NTEzNSk7ai5jYWxsKHRoaXMsMTYsNjU1MzUpO2wuY2FsbCh0aGlzLDIsODU4OTkzNDU5KTtsLmNhbGwodGhpcyw4LDE2NzExOTM1KTtqLmNhbGwodGhpcywxLDE0MzE2NTU3NjUpO2Zvcih2YXIgZj0wOzE2PmY7ZisrKXtmb3IodmFyIGQ9YVtmXSxlPXRoaXMuX2xCbG9jayxoPXRoaXMuX3JCbG9jayxnPTAsaz0wOzg+aztrKyspZ3w9c1trXVsoKGheCmRba10pJnRba10pPj4+MF07dGhpcy5fbEJsb2NrPWg7dGhpcy5fckJsb2NrPWVeZ31hPXRoaXMuX2xCbG9jazt0aGlzLl9sQmxvY2s9dGhpcy5fckJsb2NrO3RoaXMuX3JCbG9jaz1hO2ouY2FsbCh0aGlzLDEsMTQzMTY1NTc2NSk7bC5jYWxsKHRoaXMsOCwxNjcxMTkzNSk7bC5jYWxsKHRoaXMsMiw4NTg5OTM0NTkpO2ouY2FsbCh0aGlzLDE2LDY1NTM1KTtqLmNhbGwodGhpcyw0LDI1MjY0NTEzNSk7YltjXT10aGlzLl9sQmxvY2s7YltjKzFdPXRoaXMuX3JCbG9ja30sa2V5U2l6ZToyLGl2U2l6ZToyLGJsb2NrU2l6ZToyfSk7aC5ERVM9ZS5fY3JlYXRlSGVscGVyKG0pO2c9Zy5UcmlwbGVERVM9ZS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fa2V5LndvcmRzO3RoaXMuX2RlczE9bS5jcmVhdGVFbmNyeXB0b3Iobi5jcmVhdGUoYi5zbGljZSgwLDIpKSk7dGhpcy5fZGVzMj1tLmNyZWF0ZUVuY3J5cHRvcihuLmNyZWF0ZShiLnNsaWNlKDIsNCkpKTt0aGlzLl9kZXMzPQptLmNyZWF0ZUVuY3J5cHRvcihuLmNyZWF0ZShiLnNsaWNlKDQsNikpKX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZGVzMS5lbmNyeXB0QmxvY2soYixjKTt0aGlzLl9kZXMyLmRlY3J5cHRCbG9jayhiLGMpO3RoaXMuX2RlczMuZW5jcnlwdEJsb2NrKGIsYyl9LGRlY3J5cHRCbG9jazpmdW5jdGlvbihiLGMpe3RoaXMuX2RlczMuZGVjcnlwdEJsb2NrKGIsYyk7dGhpcy5fZGVzMi5lbmNyeXB0QmxvY2soYixjKTt0aGlzLl9kZXMxLmRlY3J5cHRCbG9jayhiLGMpfSxrZXlTaXplOjYsaXZTaXplOjIsYmxvY2tTaXplOjJ9KTtoLlRyaXBsZURFUz1lLl9jcmVhdGVIZWxwZXIoZyl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIGVuYy1iYXNlNjQtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgaD1DcnlwdG9KUyxqPWgubGliLldvcmRBcnJheTtoLmVuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbihiKXt2YXIgZT1iLndvcmRzLGY9Yi5zaWdCeXRlcyxjPXRoaXMuX21hcDtiLmNsYW1wKCk7Yj1bXTtmb3IodmFyIGE9MDthPGY7YSs9Mylmb3IodmFyIGQ9KGVbYT4+PjJdPj4+MjQtOCooYSU0KSYyNTUpPDwxNnwoZVthKzE+Pj4yXT4+PjI0LTgqKChhKzEpJTQpJjI1NSk8PDh8ZVthKzI+Pj4yXT4+PjI0LTgqKChhKzIpJTQpJjI1NSxnPTA7ND5nJiZhKzAuNzUqZzxmO2crKyliLnB1c2goYy5jaGFyQXQoZD4+PjYqKDMtZykmNjMpKTtpZihlPWMuY2hhckF0KDY0KSlmb3IoO2IubGVuZ3RoJTQ7KWIucHVzaChlKTtyZXR1cm4gYi5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oYil7dmFyIGU9Yi5sZW5ndGgsZj10aGlzLl9tYXAsYz1mLmNoYXJBdCg2NCk7YyYmKGM9Yi5pbmRleE9mKGMpLC0xIT1jJiYoZT1jKSk7Zm9yKHZhciBjPVtdLGE9MCxkPTA7ZDwKZTtkKyspaWYoZCU0KXt2YXIgZz1mLmluZGV4T2YoYi5jaGFyQXQoZC0xKSk8PDIqKGQlNCksaD1mLmluZGV4T2YoYi5jaGFyQXQoZCkpPj4+Ni0yKihkJTQpO2NbYT4+PjJdfD0oZ3xoKTw8MjQtOCooYSU0KTthKyt9cmV0dXJuIGouY3JlYXRlKGMsYSl9LF9tYXA6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89In19KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIG1kNS1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbihFKXtmdW5jdGlvbiBoKGEsZixnLGoscCxoLGspe2E9YSsoZiZnfH5mJmopK3AraztyZXR1cm4oYTw8aHxhPj4+MzItaCkrZn1mdW5jdGlvbiBrKGEsZixnLGoscCxoLGspe2E9YSsoZiZqfGcmfmopK3AraztyZXR1cm4oYTw8aHxhPj4+MzItaCkrZn1mdW5jdGlvbiBsKGEsZixnLGosaCxrLGwpe2E9YSsoZl5nXmopK2grbDtyZXR1cm4oYTw8a3xhPj4+MzItaykrZn1mdW5jdGlvbiBuKGEsZixnLGosaCxrLGwpe2E9YSsoZ14oZnx+aikpK2grbDtyZXR1cm4oYTw8a3xhPj4+MzItaykrZn1mb3IodmFyIHI9Q3J5cHRvSlMscT1yLmxpYixGPXEuV29yZEFycmF5LHM9cS5IYXNoZXIscT1yLmFsZ28sYT1bXSx0PTA7NjQ+dDt0KyspYVt0XT00Mjk0OTY3Mjk2KkUuYWJzKEUuc2luKHQrMSkpfDA7cT1xLk1ENT1zLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBGLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OF0pfSwKX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKG0sZil7Zm9yKHZhciBnPTA7MTY+ZztnKyspe3ZhciBqPWYrZyxwPW1bal07bVtqXT0ocDw8OHxwPj4+MjQpJjE2NzExOTM1fChwPDwyNHxwPj4+OCkmNDI3ODI1NTM2MH12YXIgZz10aGlzLl9oYXNoLndvcmRzLGo9bVtmKzBdLHA9bVtmKzFdLHE9bVtmKzJdLHI9bVtmKzNdLHM9bVtmKzRdLHQ9bVtmKzVdLHU9bVtmKzZdLHY9bVtmKzddLHc9bVtmKzhdLHg9bVtmKzldLHk9bVtmKzEwXSx6PW1bZisxMV0sQT1tW2YrMTJdLEI9bVtmKzEzXSxDPW1bZisxNF0sRD1tW2YrMTVdLGI9Z1swXSxjPWdbMV0sZD1nWzJdLGU9Z1szXSxiPWgoYixjLGQsZSxqLDcsYVswXSksZT1oKGUsYixjLGQscCwxMixhWzFdKSxkPWgoZCxlLGIsYyxxLDE3LGFbMl0pLGM9aChjLGQsZSxiLHIsMjIsYVszXSksYj1oKGIsYyxkLGUscyw3LGFbNF0pLGU9aChlLGIsYyxkLHQsMTIsYVs1XSksZD1oKGQsZSxiLGMsdSwxNyxhWzZdKSxjPWgoYyxkLGUsYix2LDIyLGFbN10pLApiPWgoYixjLGQsZSx3LDcsYVs4XSksZT1oKGUsYixjLGQseCwxMixhWzldKSxkPWgoZCxlLGIsYyx5LDE3LGFbMTBdKSxjPWgoYyxkLGUsYix6LDIyLGFbMTFdKSxiPWgoYixjLGQsZSxBLDcsYVsxMl0pLGU9aChlLGIsYyxkLEIsMTIsYVsxM10pLGQ9aChkLGUsYixjLEMsMTcsYVsxNF0pLGM9aChjLGQsZSxiLEQsMjIsYVsxNV0pLGI9ayhiLGMsZCxlLHAsNSxhWzE2XSksZT1rKGUsYixjLGQsdSw5LGFbMTddKSxkPWsoZCxlLGIsYyx6LDE0LGFbMThdKSxjPWsoYyxkLGUsYixqLDIwLGFbMTldKSxiPWsoYixjLGQsZSx0LDUsYVsyMF0pLGU9ayhlLGIsYyxkLHksOSxhWzIxXSksZD1rKGQsZSxiLGMsRCwxNCxhWzIyXSksYz1rKGMsZCxlLGIscywyMCxhWzIzXSksYj1rKGIsYyxkLGUseCw1LGFbMjRdKSxlPWsoZSxiLGMsZCxDLDksYVsyNV0pLGQ9ayhkLGUsYixjLHIsMTQsYVsyNl0pLGM9ayhjLGQsZSxiLHcsMjAsYVsyN10pLGI9ayhiLGMsZCxlLEIsNSxhWzI4XSksZT1rKGUsYiwKYyxkLHEsOSxhWzI5XSksZD1rKGQsZSxiLGMsdiwxNCxhWzMwXSksYz1rKGMsZCxlLGIsQSwyMCxhWzMxXSksYj1sKGIsYyxkLGUsdCw0LGFbMzJdKSxlPWwoZSxiLGMsZCx3LDExLGFbMzNdKSxkPWwoZCxlLGIsYyx6LDE2LGFbMzRdKSxjPWwoYyxkLGUsYixDLDIzLGFbMzVdKSxiPWwoYixjLGQsZSxwLDQsYVszNl0pLGU9bChlLGIsYyxkLHMsMTEsYVszN10pLGQ9bChkLGUsYixjLHYsMTYsYVszOF0pLGM9bChjLGQsZSxiLHksMjMsYVszOV0pLGI9bChiLGMsZCxlLEIsNCxhWzQwXSksZT1sKGUsYixjLGQsaiwxMSxhWzQxXSksZD1sKGQsZSxiLGMsciwxNixhWzQyXSksYz1sKGMsZCxlLGIsdSwyMyxhWzQzXSksYj1sKGIsYyxkLGUseCw0LGFbNDRdKSxlPWwoZSxiLGMsZCxBLDExLGFbNDVdKSxkPWwoZCxlLGIsYyxELDE2LGFbNDZdKSxjPWwoYyxkLGUsYixxLDIzLGFbNDddKSxiPW4oYixjLGQsZSxqLDYsYVs0OF0pLGU9bihlLGIsYyxkLHYsMTAsYVs0OV0pLGQ9bihkLGUsYixjLApDLDE1LGFbNTBdKSxjPW4oYyxkLGUsYix0LDIxLGFbNTFdKSxiPW4oYixjLGQsZSxBLDYsYVs1Ml0pLGU9bihlLGIsYyxkLHIsMTAsYVs1M10pLGQ9bihkLGUsYixjLHksMTUsYVs1NF0pLGM9bihjLGQsZSxiLHAsMjEsYVs1NV0pLGI9bihiLGMsZCxlLHcsNixhWzU2XSksZT1uKGUsYixjLGQsRCwxMCxhWzU3XSksZD1uKGQsZSxiLGMsdSwxNSxhWzU4XSksYz1uKGMsZCxlLGIsQiwyMSxhWzU5XSksYj1uKGIsYyxkLGUscyw2LGFbNjBdKSxlPW4oZSxiLGMsZCx6LDEwLGFbNjFdKSxkPW4oZCxlLGIsYyxxLDE1LGFbNjJdKSxjPW4oYyxkLGUsYix4LDIxLGFbNjNdKTtnWzBdPWdbMF0rYnwwO2dbMV09Z1sxXStjfDA7Z1syXT1nWzJdK2R8MDtnWzNdPWdbM10rZXwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2RhdGEsZj1hLndvcmRzLGc9OCp0aGlzLl9uRGF0YUJ5dGVzLGo9OCphLnNpZ0J5dGVzO2Zbaj4+PjVdfD0xMjg8PDI0LWolMzI7dmFyIGg9RS5mbG9vcihnLwo0Mjk0OTY3Mjk2KTtmWyhqKzY0Pj4+OTw8NCkrMTVdPShoPDw4fGg+Pj4yNCkmMTY3MTE5MzV8KGg8PDI0fGg+Pj44KSY0Mjc4MjU1MzYwO2ZbKGorNjQ+Pj45PDw0KSsxNF09KGc8PDh8Zz4+PjI0KSYxNjcxMTkzNXwoZzw8MjR8Zz4+PjgpJjQyNzgyNTUzNjA7YS5zaWdCeXRlcz00KihmLmxlbmd0aCsxKTt0aGlzLl9wcm9jZXNzKCk7YT10aGlzLl9oYXNoO2Y9YS53b3Jkcztmb3IoZz0wOzQ+ZztnKyspaj1mW2ddLGZbZ109KGo8PDh8aj4+PjI0KSYxNjcxMTkzNXwoajw8MjR8aj4+PjgpJjQyNzgyNTUzNjA7cmV0dXJuIGF9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9cy5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhfX0pO3IuTUQ1PXMuX2NyZWF0ZUhlbHBlcihxKTtyLkhtYWNNRDU9cy5fY3JlYXRlSG1hY0hlbHBlcihxKX0pKE1hdGgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTEtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgaz1DcnlwdG9KUyxiPWsubGliLG09Yi5Xb3JkQXJyYXksbD1iLkhhc2hlcixkPVtdLGI9ay5hbGdvLlNIQTE9bC5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgbS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24obixwKXtmb3IodmFyIGE9dGhpcy5faGFzaC53b3JkcyxlPWFbMF0sZj1hWzFdLGg9YVsyXSxqPWFbM10sYj1hWzRdLGM9MDs4MD5jO2MrKyl7aWYoMTY+YylkW2NdPW5bcCtjXXwwO2Vsc2V7dmFyIGc9ZFtjLTNdXmRbYy04XV5kW2MtMTRdXmRbYy0xNl07ZFtjXT1nPDwxfGc+Pj4zMX1nPShlPDw1fGU+Pj4yNykrYitkW2NdO2c9MjA+Yz9nKygoZiZofH5mJmopKzE1MTg1MDAyNDkpOjQwPmM/ZysoKGZeaF5qKSsxODU5Nzc1MzkzKTo2MD5jP2crKChmJmh8ZiZqfGgmaiktMTg5NDAwNzU4OCk6ZysoKGZeaF4KaiktODk5NDk3NTE0KTtiPWo7aj1oO2g9Zjw8MzB8Zj4+PjI7Zj1lO2U9Z31hWzBdPWFbMF0rZXwwO2FbMV09YVsxXStmfDA7YVsyXT1hWzJdK2h8MDthWzNdPWFbM10ranwwO2FbNF09YVs0XStifDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fZGF0YSxkPWIud29yZHMsYT04KnRoaXMuX25EYXRhQnl0ZXMsZT04KmIuc2lnQnl0ZXM7ZFtlPj4+NV18PTEyODw8MjQtZSUzMjtkWyhlKzY0Pj4+OTw8NCkrMTRdPU1hdGguZmxvb3IoYS80Mjk0OTY3Mjk2KTtkWyhlKzY0Pj4+OTw8NCkrMTVdPWE7Yi5zaWdCeXRlcz00KmQubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYj1sLmNsb25lLmNhbGwodGhpcyk7Yi5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGJ9fSk7ay5TSEExPWwuX2NyZWF0ZUhlbHBlcihiKTtrLkhtYWNTSEExPWwuX2NyZWF0ZUhtYWNIZWxwZXIoYil9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTI1Ni1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbihrKXtmb3IodmFyIGc9Q3J5cHRvSlMsaD1nLmxpYix2PWguV29yZEFycmF5LGo9aC5IYXNoZXIsaD1nLmFsZ28scz1bXSx0PVtdLHU9ZnVuY3Rpb24ocSl7cmV0dXJuIDQyOTQ5NjcyOTYqKHEtKHF8MCkpfDB9LGw9MixiPTA7NjQ+Yjspe3ZhciBkO2E6e2Q9bDtmb3IodmFyIHc9ay5zcXJ0KGQpLHI9MjtyPD13O3IrKylpZighKGQlcikpe2Q9ITE7YnJlYWsgYX1kPSEwfWQmJig4PmImJihzW2JdPXUoay5wb3cobCwwLjUpKSksdFtiXT11KGsucG93KGwsMS8zKSksYisrKTtsKyt9dmFyIG49W10saD1oLlNIQTI1Nj1qLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyB2LmluaXQocy5zbGljZSgwKSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihxLGgpe2Zvcih2YXIgYT10aGlzLl9oYXNoLndvcmRzLGM9YVswXSxkPWFbMV0sYj1hWzJdLGs9YVszXSxmPWFbNF0sZz1hWzVdLGo9YVs2XSxsPWFbN10sZT0wOzY0PmU7ZSsrKXtpZigxNj5lKW5bZV09CnFbaCtlXXwwO2Vsc2V7dmFyIG09bltlLTE1XSxwPW5bZS0yXTtuW2VdPSgobTw8MjV8bT4+PjcpXihtPDwxNHxtPj4+MTgpXm0+Pj4zKStuW2UtN10rKChwPDwxNXxwPj4+MTcpXihwPDwxM3xwPj4+MTkpXnA+Pj4xMCkrbltlLTE2XX1tPWwrKChmPDwyNnxmPj4+NileKGY8PDIxfGY+Pj4xMSleKGY8PDd8Zj4+PjI1KSkrKGYmZ15+ZiZqKSt0W2VdK25bZV07cD0oKGM8PDMwfGM+Pj4yKV4oYzw8MTl8Yz4+PjEzKV4oYzw8MTB8Yz4+PjIyKSkrKGMmZF5jJmJeZCZiKTtsPWo7aj1nO2c9ZjtmPWsrbXwwO2s9YjtiPWQ7ZD1jO2M9bStwfDB9YVswXT1hWzBdK2N8MDthWzFdPWFbMV0rZHwwO2FbMl09YVsyXStifDA7YVszXT1hWzNdK2t8MDthWzRdPWFbNF0rZnwwO2FbNV09YVs1XStnfDA7YVs2XT1hWzZdK2p8MDthWzddPWFbN10rbHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMuX2RhdGEsYj1kLndvcmRzLGE9OCp0aGlzLl9uRGF0YUJ5dGVzLGM9OCpkLnNpZ0J5dGVzOwpiW2M+Pj41XXw9MTI4PDwyNC1jJTMyO2JbKGMrNjQ+Pj45PDw0KSsxNF09ay5mbG9vcihhLzQyOTQ5NjcyOTYpO2JbKGMrNjQ+Pj45PDw0KSsxNV09YTtkLnNpZ0J5dGVzPTQqYi5sZW5ndGg7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciBiPWouY2xvbmUuY2FsbCh0aGlzKTtiLl9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKTtyZXR1cm4gYn19KTtnLlNIQTI1Nj1qLl9jcmVhdGVIZWxwZXIoaCk7Zy5IbWFjU0hBMjU2PWouX2NyZWF0ZUhtYWNIZWxwZXIoaCl9KShNYXRoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBzaGEyMjQtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgYj1DcnlwdG9KUyxkPWIubGliLldvcmRBcnJheSxhPWIuYWxnbyxjPWEuU0hBMjU2LGE9YS5TSEEyMjQ9Yy5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgZC5pbml0KFszMjM4MzcxMDMyLDkxNDE1MDY2Myw4MTI3MDI5OTksNDE0NDkxMjY5Nyw0MjkwNzc1ODU3LDE3NTA2MDMwMjUsMTY5NDA3NjgzOSwzMjA0MDc1NDI4XSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9Yy5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTQ7cmV0dXJuIGF9fSk7Yi5TSEEyMjQ9Yy5fY3JlYXRlSGVscGVyKGEpO2IuSG1hY1NIQTIyND1jLl9jcmVhdGVIbWFjSGVscGVyKGEpfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBzaGE1MTItbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7cmV0dXJuIGQuY3JlYXRlLmFwcGx5KGQsYXJndW1lbnRzKX1mb3IodmFyIG49Q3J5cHRvSlMscj1uLmxpYi5IYXNoZXIsZT1uLng2NCxkPWUuV29yZCxUPWUuV29yZEFycmF5LGU9bi5hbGdvLGVhPVthKDExMTYzNTI0MDgsMzYwOTc2NzQ1OCksYSgxODk5NDQ3NDQxLDYwMjg5MTcyNSksYSgzMDQ5MzIzNDcxLDM5NjQ0ODQzOTkpLGEoMzkyMTAwOTU3MywyMTczMjk1NTQ4KSxhKDk2MTk4NzE2Myw0MDgxNjI4NDcyKSxhKDE1MDg5NzA5OTMsMzA1MzgzNDI2NSksYSgyNDUzNjM1NzQ4LDI5Mzc2NzE1NzkpLGEoMjg3MDc2MzIyMSwzNjY0NjA5NTYwKSxhKDM2MjQzODEwODAsMjczNDg4MzM5NCksYSgzMTA1OTg0MDEsMTE2NDk5NjU0MiksYSg2MDcyMjUyNzgsMTMyMzYxMDc2NCksYSgxNDI2ODgxOTg3LDM1OTAzMDQ5OTQpLGEoMTkyNTA3ODM4OCw0MDY4MTgyMzgzKSxhKDIxNjIwNzgyMDYsOTkxMzM2MTEzKSxhKDI2MTQ4ODgxMDMsNjMzODAzMzE3KSwKYSgzMjQ4MjIyNTgwLDM0Nzk3NzQ4NjgpLGEoMzgzNTM5MDQwMSwyNjY2NjEzNDU4KSxhKDQwMjIyMjQ3NzQsOTQ0NzExMTM5KSxhKDI2NDM0NzA3OCwyMzQxMjYyNzczKSxhKDYwNDgwNzYyOCwyMDA3ODAwOTMzKSxhKDc3MDI1NTk4MywxNDk1OTkwOTAxKSxhKDEyNDkxNTAxMjIsMTg1NjQzMTIzNSksYSgxNTU1MDgxNjkyLDMxNzUyMTgxMzIpLGEoMTk5NjA2NDk4NiwyMTk4OTUwODM3KSxhKDI1NTQyMjA4ODIsMzk5OTcxOTMzOSksYSgyODIxODM0MzQ5LDc2Njc4NDAxNiksYSgyOTUyOTk2ODA4LDI1NjY1OTQ4NzkpLGEoMzIxMDMxMzY3MSwzMjAzMzM3OTU2KSxhKDMzMzY1NzE4OTEsMTAzNDQ1NzAyNiksYSgzNTg0NTI4NzExLDI0NjY5NDg5MDEpLGEoMTEzOTI2OTkzLDM3NTgzMjYzODMpLGEoMzM4MjQxODk1LDE2ODcxNzkzNiksYSg2NjYzMDcyMDUsMTE4ODE3OTk2NCksYSg3NzM1Mjk5MTIsMTU0NjA0NTczNCksYSgxMjk0NzU3MzcyLDE1MjI4MDU0ODUpLGEoMTM5NjE4MjI5MSwKMjY0MzgzMzgyMyksYSgxNjk1MTgzNzAwLDIzNDM1MjczOTApLGEoMTk4NjY2MTA1MSwxMDE0NDc3NDgwKSxhKDIxNzcwMjYzNTAsMTIwNjc1OTE0MiksYSgyNDU2OTU2MDM3LDM0NDA3NzYyNyksYSgyNzMwNDg1OTIxLDEyOTA4NjM0NjApLGEoMjgyMDMwMjQxMSwzMTU4NDU0MjczKSxhKDMyNTk3MzA4MDAsMzUwNTk1MjY1NyksYSgzMzQ1NzY0NzcxLDEwNjIxNzAwOCksYSgzNTE2MDY1ODE3LDM2MDYwMDgzNDQpLGEoMzYwMDM1MjgwNCwxNDMyNzI1Nzc2KSxhKDQwOTQ1NzE5MDksMTQ2NzAzMTU5NCksYSgyNzU0MjMzNDQsODUxMTY5NzIwKSxhKDQzMDIyNzczNCwzMTAwODIzNzUyKSxhKDUwNjk0ODYxNiwxMzYzMjU4MTk1KSxhKDY1OTA2MDU1NiwzNzUwNjg1NTkzKSxhKDg4Mzk5Nzg3NywzNzg1MDUwMjgwKSxhKDk1ODEzOTU3MSwzMzE4MzA3NDI3KSxhKDEzMjI4MjIyMTgsMzgxMjcyMzQwMyksYSgxNTM3MDAyMDYzLDIwMDMwMzQ5OTUpLGEoMTc0Nzg3Mzc3OSwzNjAyMDM2ODk5KSwKYSgxOTU1NTYyMjIyLDE1NzU5OTAwMTIpLGEoMjAyNDEwNDgxNSwxMTI1NTkyOTI4KSxhKDIyMjc3MzA0NTIsMjcxNjkwNDMwNiksYSgyMzYxODUyNDI0LDQ0Mjc3NjA0NCksYSgyNDI4NDM2NDc0LDU5MzY5ODM0NCksYSgyNzU2NzM0MTg3LDM3MzMxMTAyNDkpLGEoMzIwNDAzMTQ3OSwyOTk5MzUxNTczKSxhKDMzMjkzMjUyOTgsMzgxNTkyMDQyNyksYSgzMzkxNTY5NjE0LDM5MjgzODM5MDApLGEoMzUxNTI2NzI3MSw1NjYyODA3MTEpLGEoMzk0MDE4NzYwNiwzNDU0MDY5NTM0KSxhKDQxMTg2MzAyNzEsNDAwMDIzOTk5MiksYSgxMTY0MTg0NzQsMTkxNDEzODU1NCksYSgxNzQyOTI0MjEsMjczMTA1NTI3MCksYSgyODkzODAzNTYsMzIwMzk5MzAwNiksYSg0NjAzOTMyNjksMzIwNjIwMzE1KSxhKDY4NTQ3MTczMyw1ODc0OTY4MzYpLGEoODUyMTQyOTcxLDEwODY3OTI4NTEpLGEoMTAxNzAzNjI5OCwzNjU1NDMxMDApLGEoMTEyNjAwMDU4MCwyNjE4Mjk3Njc2KSxhKDEyODgwMzM0NzAsCjM0MDk4NTUxNTgpLGEoMTUwMTUwNTk0OCw0MjM0NTA5ODY2KSxhKDE2MDcxNjc5MTUsOTg3MTY3NDY4KSxhKDE4MTY0MDIzMTYsMTI0NjE4OTU5MSldLHY9W10sdz0wOzgwPnc7dysrKXZbd109YSgpO2U9ZS5TSEE1MTI9ci5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgVC5pbml0KFtuZXcgZC5pbml0KDE3NzkwMzM3MDMsNDA4OTIzNTcyMCksbmV3IGQuaW5pdCgzMTQ0MTM0Mjc3LDIyMjc4NzM1OTUpLG5ldyBkLmluaXQoMTAxMzkwNDI0Miw0MjcxMTc1NzIzKSxuZXcgZC5pbml0KDI3NzM0ODA3NjIsMTU5NTc1MDEyOSksbmV3IGQuaW5pdCgxMzU5ODkzMTE5LDI5MTc1NjUxMzcpLG5ldyBkLmluaXQoMjYwMDgyMjkyNCw3MjU1MTExOTkpLG5ldyBkLmluaXQoNTI4NzM0NjM1LDQyMTUzODk1NDcpLG5ldyBkLmluaXQoMTU0MTQ1OTIyNSwzMjcwMzMyMDkpXSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihhLGQpe2Zvcih2YXIgZj10aGlzLl9oYXNoLndvcmRzLApGPWZbMF0sZT1mWzFdLG49ZlsyXSxyPWZbM10sRz1mWzRdLEg9Zls1XSxJPWZbNl0sZj1mWzddLHc9Ri5oaWdoLEo9Ri5sb3csWD1lLmhpZ2gsSz1lLmxvdyxZPW4uaGlnaCxMPW4ubG93LFo9ci5oaWdoLE09ci5sb3csJD1HLmhpZ2gsTj1HLmxvdyxhYT1ILmhpZ2gsTz1ILmxvdyxiYT1JLmhpZ2gsUD1JLmxvdyxjYT1mLmhpZ2gsUT1mLmxvdyxrPXcsZz1KLHo9WCx4PUssQT1ZLHk9TCxVPVosQj1NLGw9JCxoPU4sUj1hYSxDPU8sUz1iYSxEPVAsVj1jYSxFPVEsbT0wOzgwPm07bSsrKXt2YXIgcz12W21dO2lmKDE2Pm0pdmFyIGo9cy5oaWdoPWFbZCsyKm1dfDAsYj1zLmxvdz1hW2QrMiptKzFdfDA7ZWxzZXt2YXIgaj12W20tMTVdLGI9ai5oaWdoLHA9ai5sb3csaj0oYj4+PjF8cDw8MzEpXihiPj4+OHxwPDwyNCleYj4+PjcscD0ocD4+PjF8Yjw8MzEpXihwPj4+OHxiPDwyNCleKHA+Pj43fGI8PDI1KSx1PXZbbS0yXSxiPXUuaGlnaCxjPXUubG93LHU9KGI+Pj4xOXxjPDwxMyleKGI8PAozfGM+Pj4yOSleYj4+PjYsYz0oYz4+PjE5fGI8PDEzKV4oYzw8M3xiPj4+MjkpXihjPj4+NnxiPDwyNiksYj12W20tN10sVz1iLmhpZ2gsdD12W20tMTZdLHE9dC5oaWdoLHQ9dC5sb3csYj1wK2IubG93LGo9aitXKyhiPj4+MDxwPj4+MD8xOjApLGI9YitjLGo9ait1KyhiPj4+MDxjPj4+MD8xOjApLGI9Yit0LGo9aitxKyhiPj4+MDx0Pj4+MD8xOjApO3MuaGlnaD1qO3MubG93PWJ9dmFyIFc9bCZSXn5sJlMsdD1oJkNefmgmRCxzPWsmel5rJkFeeiZBLFQ9ZyZ4XmcmeV54JnkscD0oaz4+PjI4fGc8PDQpXihrPDwzMHxnPj4+MileKGs8PDI1fGc+Pj43KSx1PShnPj4+Mjh8azw8NCleKGc8PDMwfGs+Pj4yKV4oZzw8MjV8az4+PjcpLGM9ZWFbbV0sZmE9Yy5oaWdoLGRhPWMubG93LGM9RSsoKGg+Pj4xNHxsPDwxOCleKGg+Pj4xOHxsPDwxNCleKGg8PDIzfGw+Pj45KSkscT1WKygobD4+PjE0fGg8PDE4KV4obD4+PjE4fGg8PDE0KV4obDw8MjN8aD4+PjkpKSsoYz4+PjA8RT4+PjA/MToKMCksYz1jK3QscT1xK1crKGM+Pj4wPHQ+Pj4wPzE6MCksYz1jK2RhLHE9cStmYSsoYz4+PjA8ZGE+Pj4wPzE6MCksYz1jK2IscT1xK2orKGM+Pj4wPGI+Pj4wPzE6MCksYj11K1Qscz1wK3MrKGI+Pj4wPHU+Pj4wPzE6MCksVj1TLEU9RCxTPVIsRD1DLFI9bCxDPWgsaD1CK2N8MCxsPVUrcSsoaD4+PjA8Qj4+PjA/MTowKXwwLFU9QSxCPXksQT16LHk9eCx6PWsseD1nLGc9YytifDAsaz1xK3MrKGc+Pj4wPGM+Pj4wPzE6MCl8MH1KPUYubG93PUorZztGLmhpZ2g9dytrKyhKPj4+MDxnPj4+MD8xOjApO0s9ZS5sb3c9Syt4O2UuaGlnaD1YK3orKEs+Pj4wPHg+Pj4wPzE6MCk7TD1uLmxvdz1MK3k7bi5oaWdoPVkrQSsoTD4+PjA8eT4+PjA/MTowKTtNPXIubG93PU0rQjtyLmhpZ2g9WitVKyhNPj4+MDxCPj4+MD8xOjApO049Ry5sb3c9TitoO0cuaGlnaD0kK2wrKE4+Pj4wPGg+Pj4wPzE6MCk7Tz1ILmxvdz1PK0M7SC5oaWdoPWFhK1IrKE8+Pj4wPEM+Pj4wPzE6MCk7UD1JLmxvdz1QK0Q7CkkuaGlnaD1iYStTKyhQPj4+MDxEPj4+MD8xOjApO1E9Zi5sb3c9UStFO2YuaGlnaD1jYStWKyhRPj4+MDxFPj4+MD8xOjApfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2RhdGEsZD1hLndvcmRzLGY9OCp0aGlzLl9uRGF0YUJ5dGVzLGU9OCphLnNpZ0J5dGVzO2RbZT4+PjVdfD0xMjg8PDI0LWUlMzI7ZFsoZSsxMjg+Pj4xMDw8NSkrMzBdPU1hdGguZmxvb3IoZi80Mjk0OTY3Mjk2KTtkWyhlKzEyOD4+PjEwPDw1KSszMV09ZjthLnNpZ0J5dGVzPTQqZC5sZW5ndGg7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzLl9oYXNoLnRvWDMyKCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9ci5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhfSxibG9ja1NpemU6MzJ9KTtuLlNIQTUxMj1yLl9jcmVhdGVIZWxwZXIoZSk7bi5IbWFjU0hBNTEyPXIuX2NyZWF0ZUhtYWNIZWxwZXIoZSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTM4NC1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbigpe3ZhciBjPUNyeXB0b0pTLGE9Yy54NjQsYj1hLldvcmQsZT1hLldvcmRBcnJheSxhPWMuYWxnbyxkPWEuU0hBNTEyLGE9YS5TSEEzODQ9ZC5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgZS5pbml0KFtuZXcgYi5pbml0KDM0MTgwNzAzNjUsMzIzODM3MTAzMiksbmV3IGIuaW5pdCgxNjU0MjcwMjUwLDkxNDE1MDY2MyksbmV3IGIuaW5pdCgyNDM4NTI5MzcwLDgxMjcwMjk5OSksbmV3IGIuaW5pdCgzNTU0NjIzNjAsNDE0NDkxMjY5NyksbmV3IGIuaW5pdCgxNzMxNDA1NDE1LDQyOTA3NzU4NTcpLG5ldyBiLmluaXQoMjM5NDE4MDIzMSwxNzUwNjAzMDI1KSxuZXcgYi5pbml0KDM2NzUwMDg1MjUsMTY5NDA3NjgzOSksbmV3IGIuaW5pdCgxMjAzMDYyODEzLDMyMDQwNzU0MjgpXSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9ZC5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTE2O3JldHVybiBhfX0pO2MuU0hBMzg0PQpkLl9jcmVhdGVIZWxwZXIoYSk7Yy5IbWFjU0hBMzg0PWQuX2NyZWF0ZUhtYWNIZWxwZXIoYSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHJpcGVtZDE2MC1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCi8qCgooYykgMjAxMiBieSBDZWRyaWMgTWVzbmlsLiBBbGwgcmlnaHRzIHJlc2VydmVkLgoKUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0IG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OgoKICAgIC0gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLgogICAgLSBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCgpUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTICJBUyBJUyIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgoqLwooZnVuY3Rpb24oKXt2YXIgcT1DcnlwdG9KUyxkPXEubGliLG49ZC5Xb3JkQXJyYXkscD1kLkhhc2hlcixkPXEuYWxnbyx4PW4uY3JlYXRlKFswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDcsNCwxMywxLDEwLDYsMTUsMywxMiwwLDksNSwyLDE0LDExLDgsMywxMCwxNCw0LDksMTUsOCwxLDIsNywwLDYsMTMsMTEsNSwxMiwxLDksMTEsMTAsMCw4LDEyLDQsMTMsMyw3LDE1LDE0LDUsNiwyLDQsMCw1LDksNywxMiwyLDEwLDE0LDEsMyw4LDExLDYsMTUsMTNdKSx5PW4uY3JlYXRlKFs1LDE0LDcsMCw5LDIsMTEsNCwxMyw2LDE1LDgsMSwxMCwzLDEyLDYsMTEsMyw3LDAsMTMsNSwxMCwxNCwxNSw4LDEyLDQsOSwxLDIsMTUsNSwxLDMsNywxNCw2LDksMTEsOCwxMiwyLDEwLDAsNCwxMyw4LDYsNCwxLDMsMTEsMTUsMCw1LDEyLDIsMTMsOSw3LDEwLDE0LDEyLDE1LDEwLDQsMSw1LDgsNyw2LDIsMTMsMTQsMCwzLDksMTFdKSx6PW4uY3JlYXRlKFsxMSwxNCwxNSwxMiwKNSw4LDcsOSwxMSwxMywxNCwxNSw2LDcsOSw4LDcsNiw4LDEzLDExLDksNywxNSw3LDEyLDE1LDksMTEsNywxMywxMiwxMSwxMyw2LDcsMTQsOSwxMywxNSwxNCw4LDEzLDYsNSwxMiw3LDUsMTEsMTIsMTQsMTUsMTQsMTUsOSw4LDksMTQsNSw2LDgsNiw1LDEyLDksMTUsNSwxMSw2LDgsMTMsMTIsNSwxMiwxMywxNCwxMSw4LDUsNl0pLEE9bi5jcmVhdGUoWzgsOSw5LDExLDEzLDE1LDE1LDUsNyw3LDgsMTEsMTQsMTQsMTIsNiw5LDEzLDE1LDcsMTIsOCw5LDExLDcsNywxMiw3LDYsMTUsMTMsMTEsOSw3LDE1LDExLDgsNiw2LDE0LDEyLDEzLDUsMTQsMTMsMTMsNyw1LDE1LDUsOCwxMSwxNCwxNCw2LDE0LDYsOSwxMiw5LDEyLDUsMTUsOCw4LDUsMTIsOSwxMiw1LDE0LDYsOCwxMyw2LDUsMTUsMTMsMTEsMTFdKSxCPW4uY3JlYXRlKFswLDE1MTg1MDAyNDksMTg1OTc3NTM5MywyNDAwOTU5NzA4LDI4NDA4NTM4MzhdKSxDPW4uY3JlYXRlKFsxMzUyODI5OTI2LDE1NDg2MDM2ODQsMTgzNjA3MjY5MSwKMjA1Mzk5NDIxNywwXSksZD1kLlJJUEVNRDE2MD1wLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW4uY3JlYXRlKFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZSx2KXtmb3IodmFyIGI9MDsxNj5iO2IrKyl7dmFyIGM9ditiLGY9ZVtjXTtlW2NdPShmPDw4fGY+Pj4yNCkmMTY3MTE5MzV8KGY8PDI0fGY+Pj44KSY0Mjc4MjU1MzYwfXZhciBjPXRoaXMuX2hhc2gud29yZHMsZj1CLndvcmRzLGQ9Qy53b3JkcyxuPXgud29yZHMscT15LndvcmRzLHA9ei53b3Jkcyx3PUEud29yZHMsdCxnLGgsaixyLHUsayxsLG0sczt1PXQ9Y1swXTtrPWc9Y1sxXTtsPWg9Y1syXTttPWo9Y1szXTtzPXI9Y1s0XTtmb3IodmFyIGEsYj0wOzgwPmI7Yis9MSlhPXQrZVt2K25bYl1dfDAsYT0xNj5iP2ErKChnXmheaikrZlswXSk6MzI+Yj9hKygoZyZofH5nJmopK2ZbMV0pOjQ4PmI/CmErKCgoZ3x+aCleaikrZlsyXSk6NjQ+Yj9hKygoZyZqfGgmfmopK2ZbM10pOmErKChnXihofH5qKSkrZls0XSksYXw9MCxhPWE8PHBbYl18YT4+PjMyLXBbYl0sYT1hK3J8MCx0PXIscj1qLGo9aDw8MTB8aD4+PjIyLGg9ZyxnPWEsYT11K2VbditxW2JdXXwwLGE9MTY+Yj9hKygoa14obHx+bSkpK2RbMF0pOjMyPmI/YSsoKGsmbXxsJn5tKStkWzFdKTo0OD5iP2ErKCgoa3x+bClebSkrZFsyXSk6NjQ+Yj9hKygoayZsfH5rJm0pK2RbM10pOmErKChrXmxebSkrZFs0XSksYXw9MCxhPWE8PHdbYl18YT4+PjMyLXdbYl0sYT1hK3N8MCx1PXMscz1tLG09bDw8MTB8bD4+PjIyLGw9ayxrPWE7YT1jWzFdK2grbXwwO2NbMV09Y1syXStqK3N8MDtjWzJdPWNbM10rcit1fDA7Y1szXT1jWzRdK3Qra3wwO2NbNF09Y1swXStnK2x8MDtjWzBdPWF9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGF0YSxkPWUud29yZHMsYj04KnRoaXMuX25EYXRhQnl0ZXMsYz04KmUuc2lnQnl0ZXM7CmRbYz4+PjVdfD0xMjg8PDI0LWMlMzI7ZFsoYys2ND4+Pjk8PDQpKzE0XT0oYjw8OHxiPj4+MjQpJjE2NzExOTM1fChiPDwyNHxiPj4+OCkmNDI3ODI1NTM2MDtlLnNpZ0J5dGVzPTQqKGQubGVuZ3RoKzEpO3RoaXMuX3Byb2Nlc3MoKTtlPXRoaXMuX2hhc2g7ZD1lLndvcmRzO2ZvcihiPTA7NT5iO2IrKyljPWRbYl0sZFtiXT0oYzw8OHxjPj4+MjQpJjE2NzExOTM1fChjPDwyNHxjPj4+OCkmNDI3ODI1NTM2MDtyZXR1cm4gZX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZD1wLmNsb25lLmNhbGwodGhpcyk7ZC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGR9fSk7cS5SSVBFTUQxNjA9cC5fY3JlYXRlSGVscGVyKGQpO3EuSG1hY1JJUEVNRDE2MD1wLl9jcmVhdGVIbWFjSGVscGVyKGQpfSkoTWF0aCk7CgovKgpDcnlwdG9KUyB2My4xLjIgaG1hYy1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbigpe3ZhciBjPUNyeXB0b0pTLGs9Yy5lbmMuVXRmODtjLmFsZ28uSE1BQz1jLmxpYi5CYXNlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy5faGFzaGVyPW5ldyBhLmluaXQ7InN0cmluZyI9PXR5cGVvZiBiJiYoYj1rLnBhcnNlKGIpKTt2YXIgYz1hLmJsb2NrU2l6ZSxlPTQqYztiLnNpZ0J5dGVzPmUmJihiPWEuZmluYWxpemUoYikpO2IuY2xhbXAoKTtmb3IodmFyIGY9dGhpcy5fb0tleT1iLmNsb25lKCksZz10aGlzLl9pS2V5PWIuY2xvbmUoKSxoPWYud29yZHMsaj1nLndvcmRzLGQ9MDtkPGM7ZCsrKWhbZF1ePTE1NDk1NTY4MjgsaltkXV49OTA5NTIyNDg2O2Yuc2lnQnl0ZXM9Zy5zaWdCeXRlcz1lO3RoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9oYXNoZXI7YS5yZXNldCgpO2EudXBkYXRlKHRoaXMuX2lLZXkpfSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5faGFzaGVyLnVwZGF0ZShhKTtyZXR1cm4gdGhpc30sZmluYWxpemU6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuX2hhc2hlcjthPWIuZmluYWxpemUoYSk7Yi5yZXNldCgpO3JldHVybiBiLmZpbmFsaXplKHRoaXMuX29LZXkuY2xvbmUoKS5jb25jYXQoYSkpfX0pfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBwYmtkZjItbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgYj1DcnlwdG9KUyxhPWIubGliLGQ9YS5CYXNlLG09YS5Xb3JkQXJyYXksYT1iLmFsZ28scT1hLkhNQUMsbD1hLlBCS0RGMj1kLmV4dGVuZCh7Y2ZnOmQuZXh0ZW5kKHtrZXlTaXplOjQsaGFzaGVyOmEuU0hBMSxpdGVyYXRpb25zOjF9KSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKX0sY29tcHV0ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLmNmZyxmPXEuY3JlYXRlKGMuaGFzaGVyLGEpLGc9bS5jcmVhdGUoKSxkPW0uY3JlYXRlKFsxXSksbD1nLndvcmRzLHI9ZC53b3JkcyxuPWMua2V5U2l6ZSxjPWMuaXRlcmF0aW9ucztsLmxlbmd0aDxuOyl7dmFyIGg9Zi51cGRhdGUoYikuZmluYWxpemUoZCk7Zi5yZXNldCgpO2Zvcih2YXIgaj1oLndvcmRzLHM9ai5sZW5ndGgsaz1oLHA9MTtwPGM7cCsrKXtrPWYuZmluYWxpemUoayk7Zi5yZXNldCgpO2Zvcih2YXIgdD1rLndvcmRzLGU9MDtlPHM7ZSsrKWpbZV1ePXRbZV19Zy5jb25jYXQoaCk7CnJbMF0rK31nLnNpZ0J5dGVzPTQqbjtyZXR1cm4gZ319KTtiLlBCS0RGMj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGwuY3JlYXRlKGMpLmNvbXB1dGUoYSxiKX19KSgpOwoKLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vCiAqLwp2YXIgYjY0bWFwPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIjt2YXIgYjY0cGFkPSI9IjtmdW5jdGlvbiBoZXgyYjY0KGQpe3ZhciBiO3ZhciBlO3ZhciBhPSIiO2ZvcihiPTA7YiszPD1kLmxlbmd0aDtiKz0zKXtlPXBhcnNlSW50KGQuc3Vic3RyaW5nKGIsYiszKSwxNik7YSs9YjY0bWFwLmNoYXJBdChlPj42KStiNjRtYXAuY2hhckF0KGUmNjMpfWlmKGIrMT09ZC5sZW5ndGgpe2U9cGFyc2VJbnQoZC5zdWJzdHJpbmcoYixiKzEpLDE2KTthKz1iNjRtYXAuY2hhckF0KGU8PDIpfWVsc2V7aWYoYisyPT1kLmxlbmd0aCl7ZT1wYXJzZUludChkLnN1YnN0cmluZyhiLGIrMiksMTYpO2ErPWI2NG1hcC5jaGFyQXQoZT4+MikrYjY0bWFwLmNoYXJBdCgoZSYzKTw8NCl9fWlmKGI2NHBhZCl7d2hpbGUoKGEubGVuZ3RoJjMpPjApe2ErPWI2NHBhZH19cmV0dXJuIGF9ZnVuY3Rpb24gYjY0dG9oZXgoZil7dmFyIGQ9IiI7dmFyIGU7dmFyIGI9MDt2YXIgYzt2YXIgYTtmb3IoZT0wO2U8Zi5sZW5ndGg7KytlKXtpZihmLmNoYXJBdChlKT09YjY0cGFkKXticmVha31hPWI2NG1hcC5pbmRleE9mKGYuY2hhckF0KGUpKTtpZihhPDApe2NvbnRpbnVlfWlmKGI9PTApe2QrPWludDJjaGFyKGE+PjIpO2M9YSYzO2I9MX1lbHNle2lmKGI9PTEpe2QrPWludDJjaGFyKChjPDwyKXwoYT4+NCkpO2M9YSYxNTtiPTJ9ZWxzZXtpZihiPT0yKXtkKz1pbnQyY2hhcihjKTtkKz1pbnQyY2hhcihhPj4yKTtjPWEmMztiPTN9ZWxzZXtkKz1pbnQyY2hhcigoYzw8Mil8KGE+PjQpKTtkKz1pbnQyY2hhcihhJjE1KTtiPTB9fX19aWYoYj09MSl7ZCs9aW50MmNoYXIoYzw8Mil9cmV0dXJuIGR9ZnVuY3Rpb24gYjY0dG9CQShlKXt2YXIgZD1iNjR0b2hleChlKTt2YXIgYzt2YXIgYj1uZXcgQXJyYXkoKTtmb3IoYz0wOzIqYzxkLmxlbmd0aDsrK2Mpe2JbY109cGFyc2VJbnQoZC5zdWJzdHJpbmcoMipjLDIqYysyKSwxNil9cmV0dXJuIGJ9OwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCnZhciBkYml0czt2YXIgY2FuYXJ5PTI0NDgzNzgxNDA5NDU5MDt2YXIgal9sbT0oKGNhbmFyeSYxNjc3NzIxNSk9PTE1NzE1MDcwKTtmdW5jdGlvbiBCaWdJbnRlZ2VyKGUsZCxmKXtpZihlIT1udWxsKXtpZigibnVtYmVyIj09dHlwZW9mIGUpe3RoaXMuZnJvbU51bWJlcihlLGQsZil9ZWxzZXtpZihkPT1udWxsJiYic3RyaW5nIiE9dHlwZW9mIGUpe3RoaXMuZnJvbVN0cmluZyhlLDI1Nil9ZWxzZXt0aGlzLmZyb21TdHJpbmcoZSxkKX19fX1mdW5jdGlvbiBuYmkoKXtyZXR1cm4gbmV3IEJpZ0ludGVnZXIobnVsbCl9ZnVuY3Rpb24gYW0xKGYsYSxiLGUsaCxnKXt3aGlsZSgtLWc+PTApe3ZhciBkPWEqdGhpc1tmKytdK2JbZV0raDtoPU1hdGguZmxvb3IoZC82NzEwODg2NCk7YltlKytdPWQmNjcxMDg4NjN9cmV0dXJuIGh9ZnVuY3Rpb24gYW0yKGYscSxyLGUsbyxhKXt2YXIgaz1xJjMyNzY3LHA9cT4+MTU7d2hpbGUoLS1hPj0wKXt2YXIgZD10aGlzW2ZdJjMyNzY3O3ZhciBnPXRoaXNbZisrXT4+MTU7dmFyIGI9cCpkK2cqaztkPWsqZCsoKGImMzI3NjcpPDwxNSkrcltlXSsobyYxMDczNzQxODIzKTtvPShkPj4+MzApKyhiPj4+MTUpK3AqZysobz4+PjMwKTtyW2UrK109ZCYxMDczNzQxODIzfXJldHVybiBvfWZ1bmN0aW9uIGFtMyhmLHEscixlLG8sYSl7dmFyIGs9cSYxNjM4MyxwPXE+PjE0O3doaWxlKC0tYT49MCl7dmFyIGQ9dGhpc1tmXSYxNjM4Mzt2YXIgZz10aGlzW2YrK10+PjE0O3ZhciBiPXAqZCtnKms7ZD1rKmQrKChiJjE2MzgzKTw8MTQpK3JbZV0rbztvPShkPj4yOCkrKGI+PjE0KStwKmc7cltlKytdPWQmMjY4NDM1NDU1fXJldHVybiBvfWlmKGpfbG0mJihuYXZpZ2F0b3IuYXBwTmFtZT09Ik1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlciIpKXtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbT1hbTI7ZGJpdHM9MzB9ZWxzZXtpZihqX2xtJiYobmF2aWdhdG9yLmFwcE5hbWUhPSJOZXRzY2FwZSIpKXtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbT1hbTE7ZGJpdHM9MjZ9ZWxzZXtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbT1hbTM7ZGJpdHM9Mjh9fUJpZ0ludGVnZXIucHJvdG90eXBlLkRCPWRiaXRzO0JpZ0ludGVnZXIucHJvdG90eXBlLkRNPSgoMTw8ZGJpdHMpLTEpO0JpZ0ludGVnZXIucHJvdG90eXBlLkRWPSgxPDxkYml0cyk7dmFyIEJJX0ZQPTUyO0JpZ0ludGVnZXIucHJvdG90eXBlLkZWPU1hdGgucG93KDIsQklfRlApO0JpZ0ludGVnZXIucHJvdG90eXBlLkYxPUJJX0ZQLWRiaXRzO0JpZ0ludGVnZXIucHJvdG90eXBlLkYyPTIqZGJpdHMtQklfRlA7dmFyIEJJX1JNPSIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiO3ZhciBCSV9SQz1uZXcgQXJyYXkoKTt2YXIgcnIsdnY7cnI9IjAiLmNoYXJDb2RlQXQoMCk7Zm9yKHZ2PTA7dnY8PTk7Kyt2dil7QklfUkNbcnIrK109dnZ9cnI9ImEiLmNoYXJDb2RlQXQoMCk7Zm9yKHZ2PTEwO3Z2PDM2OysrdnYpe0JJX1JDW3JyKytdPXZ2fXJyPSJBIi5jaGFyQ29kZUF0KDApO2Zvcih2dj0xMDt2djwzNjsrK3Z2KXtCSV9SQ1tycisrXT12dn1mdW5jdGlvbiBpbnQyY2hhcihhKXtyZXR1cm4gQklfUk0uY2hhckF0KGEpfWZ1bmN0aW9uIGludEF0KGIsYSl7dmFyIGQ9QklfUkNbYi5jaGFyQ29kZUF0KGEpXTtyZXR1cm4oZD09bnVsbCk/LTE6ZH1mdW5jdGlvbiBibnBDb3B5VG8oYil7Zm9yKHZhciBhPXRoaXMudC0xO2E+PTA7LS1hKXtiW2FdPXRoaXNbYV19Yi50PXRoaXMudDtiLnM9dGhpcy5zfWZ1bmN0aW9uIGJucEZyb21JbnQoYSl7dGhpcy50PTE7dGhpcy5zPShhPDApPy0xOjA7aWYoYT4wKXt0aGlzWzBdPWF9ZWxzZXtpZihhPC0xKXt0aGlzWzBdPWErdGhpcy5EVn1lbHNle3RoaXMudD0wfX19ZnVuY3Rpb24gbmJ2KGEpe3ZhciBiPW5iaSgpO2IuZnJvbUludChhKTtyZXR1cm4gYn1mdW5jdGlvbiBibnBGcm9tU3RyaW5nKGgsYyl7dmFyIGU7aWYoYz09MTYpe2U9NH1lbHNle2lmKGM9PTgpe2U9M31lbHNle2lmKGM9PTI1Nil7ZT04fWVsc2V7aWYoYz09Mil7ZT0xfWVsc2V7aWYoYz09MzIpe2U9NX1lbHNle2lmKGM9PTQpe2U9Mn1lbHNle3RoaXMuZnJvbVJhZGl4KGgsYyk7cmV0dXJufX19fX19dGhpcy50PTA7dGhpcy5zPTA7dmFyIGc9aC5sZW5ndGgsZD1mYWxzZSxmPTA7d2hpbGUoLS1nPj0wKXt2YXIgYT0oZT09OCk/aFtnXSYyNTU6aW50QXQoaCxnKTtpZihhPDApe2lmKGguY2hhckF0KGcpPT0iLSIpe2Q9dHJ1ZX1jb250aW51ZX1kPWZhbHNlO2lmKGY9PTApe3RoaXNbdGhpcy50KytdPWF9ZWxzZXtpZihmK2U+dGhpcy5EQil7dGhpc1t0aGlzLnQtMV18PShhJigoMTw8KHRoaXMuREItZikpLTEpKTw8Zjt0aGlzW3RoaXMudCsrXT0oYT4+KHRoaXMuREItZikpfWVsc2V7dGhpc1t0aGlzLnQtMV18PWE8PGZ9fWYrPWU7aWYoZj49dGhpcy5EQil7Zi09dGhpcy5EQn19aWYoZT09OCYmKGhbMF0mMTI4KSE9MCl7dGhpcy5zPS0xO2lmKGY+MCl7dGhpc1t0aGlzLnQtMV18PSgoMTw8KHRoaXMuREItZikpLTEpPDxmfX10aGlzLmNsYW1wKCk7aWYoZCl7QmlnSW50ZWdlci5aRVJPLnN1YlRvKHRoaXMsdGhpcyl9fWZ1bmN0aW9uIGJucENsYW1wKCl7dmFyIGE9dGhpcy5zJnRoaXMuRE07d2hpbGUodGhpcy50PjAmJnRoaXNbdGhpcy50LTFdPT1hKXstLXRoaXMudH19ZnVuY3Rpb24gYm5Ub1N0cmluZyhjKXtpZih0aGlzLnM8MCl7cmV0dXJuIi0iK3RoaXMubmVnYXRlKCkudG9TdHJpbmcoYyl9dmFyIGU7aWYoYz09MTYpe2U9NH1lbHNle2lmKGM9PTgpe2U9M31lbHNle2lmKGM9PTIpe2U9MX1lbHNle2lmKGM9PTMyKXtlPTV9ZWxzZXtpZihjPT00KXtlPTJ9ZWxzZXtyZXR1cm4gdGhpcy50b1JhZGl4KGMpfX19fX12YXIgZz0oMTw8ZSktMSxsLGE9ZmFsc2UsaD0iIixmPXRoaXMudDt2YXIgaj10aGlzLkRCLShmKnRoaXMuREIpJWU7aWYoZi0tPjApe2lmKGo8dGhpcy5EQiYmKGw9dGhpc1tmXT4+aik+MCl7YT10cnVlO2g9aW50MmNoYXIobCl9d2hpbGUoZj49MCl7aWYoajxlKXtsPSh0aGlzW2ZdJigoMTw8aiktMSkpPDwoZS1qKTtsfD10aGlzWy0tZl0+PihqKz10aGlzLkRCLWUpfWVsc2V7bD0odGhpc1tmXT4+KGotPWUpKSZnO2lmKGo8PTApe2orPXRoaXMuREI7LS1mfX1pZihsPjApe2E9dHJ1ZX1pZihhKXtoKz1pbnQyY2hhcihsKX19fXJldHVybiBhP2g6IjAifWZ1bmN0aW9uIGJuTmVnYXRlKCl7dmFyIGE9bmJpKCk7QmlnSW50ZWdlci5aRVJPLnN1YlRvKHRoaXMsYSk7cmV0dXJuIGF9ZnVuY3Rpb24gYm5BYnMoKXtyZXR1cm4odGhpcy5zPDApP3RoaXMubmVnYXRlKCk6dGhpc31mdW5jdGlvbiBibkNvbXBhcmVUbyhiKXt2YXIgZD10aGlzLnMtYi5zO2lmKGQhPTApe3JldHVybiBkfXZhciBjPXRoaXMudDtkPWMtYi50O2lmKGQhPTApe3JldHVybih0aGlzLnM8MCk/LWQ6ZH13aGlsZSgtLWM+PTApe2lmKChkPXRoaXNbY10tYltjXSkhPTApe3JldHVybiBkfX1yZXR1cm4gMH1mdW5jdGlvbiBuYml0cyhhKXt2YXIgYz0xLGI7aWYoKGI9YT4+PjE2KSE9MCl7YT1iO2MrPTE2fWlmKChiPWE+PjgpIT0wKXthPWI7Yys9OH1pZigoYj1hPj40KSE9MCl7YT1iO2MrPTR9aWYoKGI9YT4+MikhPTApe2E9YjtjKz0yfWlmKChiPWE+PjEpIT0wKXthPWI7Yys9MX1yZXR1cm4gY31mdW5jdGlvbiBibkJpdExlbmd0aCgpe2lmKHRoaXMudDw9MCl7cmV0dXJuIDB9cmV0dXJuIHRoaXMuREIqKHRoaXMudC0xKStuYml0cyh0aGlzW3RoaXMudC0xXV4odGhpcy5zJnRoaXMuRE0pKX1mdW5jdGlvbiBibnBETFNoaWZ0VG8oYyxiKXt2YXIgYTtmb3IoYT10aGlzLnQtMTthPj0wOy0tYSl7YlthK2NdPXRoaXNbYV19Zm9yKGE9Yy0xO2E+PTA7LS1hKXtiW2FdPTB9Yi50PXRoaXMudCtjO2Iucz10aGlzLnN9ZnVuY3Rpb24gYm5wRFJTaGlmdFRvKGMsYil7Zm9yKHZhciBhPWM7YTx0aGlzLnQ7KythKXtiW2EtY109dGhpc1thXX1iLnQ9TWF0aC5tYXgodGhpcy50LWMsMCk7Yi5zPXRoaXMuc31mdW5jdGlvbiBibnBMU2hpZnRUbyhqLGUpe3ZhciBiPWoldGhpcy5EQjt2YXIgYT10aGlzLkRCLWI7dmFyIGc9KDE8PGEpLTE7dmFyIGY9TWF0aC5mbG9vcihqL3RoaXMuREIpLGg9KHRoaXMuczw8YikmdGhpcy5ETSxkO2ZvcihkPXRoaXMudC0xO2Q+PTA7LS1kKXtlW2QrZisxXT0odGhpc1tkXT4+YSl8aDtoPSh0aGlzW2RdJmcpPDxifWZvcihkPWYtMTtkPj0wOy0tZCl7ZVtkXT0wfWVbZl09aDtlLnQ9dGhpcy50K2YrMTtlLnM9dGhpcy5zO2UuY2xhbXAoKX1mdW5jdGlvbiBibnBSU2hpZnRUbyhnLGQpe2Qucz10aGlzLnM7dmFyIGU9TWF0aC5mbG9vcihnL3RoaXMuREIpO2lmKGU+PXRoaXMudCl7ZC50PTA7cmV0dXJufXZhciBiPWcldGhpcy5EQjt2YXIgYT10aGlzLkRCLWI7dmFyIGY9KDE8PGIpLTE7ZFswXT10aGlzW2VdPj5iO2Zvcih2YXIgYz1lKzE7Yzx0aGlzLnQ7KytjKXtkW2MtZS0xXXw9KHRoaXNbY10mZik8PGE7ZFtjLWVdPXRoaXNbY10+PmJ9aWYoYj4wKXtkW3RoaXMudC1lLTFdfD0odGhpcy5zJmYpPDxhfWQudD10aGlzLnQtZTtkLmNsYW1wKCl9ZnVuY3Rpb24gYm5wU3ViVG8oZCxmKXt2YXIgZT0wLGc9MCxiPU1hdGgubWluKGQudCx0aGlzLnQpO3doaWxlKGU8Yil7Zys9dGhpc1tlXS1kW2VdO2ZbZSsrXT1nJnRoaXMuRE07Zz4+PXRoaXMuREJ9aWYoZC50PHRoaXMudCl7Zy09ZC5zO3doaWxlKGU8dGhpcy50KXtnKz10aGlzW2VdO2ZbZSsrXT1nJnRoaXMuRE07Zz4+PXRoaXMuREJ9Zys9dGhpcy5zfWVsc2V7Zys9dGhpcy5zO3doaWxlKGU8ZC50KXtnLT1kW2VdO2ZbZSsrXT1nJnRoaXMuRE07Zz4+PXRoaXMuREJ9Zy09ZC5zfWYucz0oZzwwKT8tMTowO2lmKGc8LTEpe2ZbZSsrXT10aGlzLkRWK2d9ZWxzZXtpZihnPjApe2ZbZSsrXT1nfX1mLnQ9ZTtmLmNsYW1wKCl9ZnVuY3Rpb24gYm5wTXVsdGlwbHlUbyhjLGUpe3ZhciBiPXRoaXMuYWJzKCksZj1jLmFicygpO3ZhciBkPWIudDtlLnQ9ZCtmLnQ7d2hpbGUoLS1kPj0wKXtlW2RdPTB9Zm9yKGQ9MDtkPGYudDsrK2Qpe2VbZCtiLnRdPWIuYW0oMCxmW2RdLGUsZCwwLGIudCl9ZS5zPTA7ZS5jbGFtcCgpO2lmKHRoaXMucyE9Yy5zKXtCaWdJbnRlZ2VyLlpFUk8uc3ViVG8oZSxlKX19ZnVuY3Rpb24gYm5wU3F1YXJlVG8oZCl7dmFyIGE9dGhpcy5hYnMoKTt2YXIgYj1kLnQ9MiphLnQ7d2hpbGUoLS1iPj0wKXtkW2JdPTB9Zm9yKGI9MDtiPGEudC0xOysrYil7dmFyIGU9YS5hbShiLGFbYl0sZCwyKmIsMCwxKTtpZigoZFtiK2EudF0rPWEuYW0oYisxLDIqYVtiXSxkLDIqYisxLGUsYS50LWItMSkpPj1hLkRWKXtkW2IrYS50XS09YS5EVjtkW2IrYS50KzFdPTF9fWlmKGQudD4wKXtkW2QudC0xXSs9YS5hbShiLGFbYl0sZCwyKmIsMCwxKX1kLnM9MDtkLmNsYW1wKCl9ZnVuY3Rpb24gYm5wRGl2UmVtVG8obixoLGcpe3ZhciB3PW4uYWJzKCk7aWYody50PD0wKXtyZXR1cm59dmFyIGs9dGhpcy5hYnMoKTtpZihrLnQ8dy50KXtpZihoIT1udWxsKXtoLmZyb21JbnQoMCl9aWYoZyE9bnVsbCl7dGhpcy5jb3B5VG8oZyl9cmV0dXJufWlmKGc9PW51bGwpe2c9bmJpKCl9dmFyIGQ9bmJpKCksYT10aGlzLnMsbD1uLnM7dmFyIHY9dGhpcy5EQi1uYml0cyh3W3cudC0xXSk7aWYodj4wKXt3LmxTaGlmdFRvKHYsZCk7ay5sU2hpZnRUbyh2LGcpfWVsc2V7dy5jb3B5VG8oZCk7ay5jb3B5VG8oZyl9dmFyIHA9ZC50O3ZhciBiPWRbcC0xXTtpZihiPT0wKXtyZXR1cm59dmFyIG89YiooMTw8dGhpcy5GMSkrKChwPjEpP2RbcC0yXT4+dGhpcy5GMjowKTt2YXIgQT10aGlzLkZWL28sej0oMTw8dGhpcy5GMSkvbyx4PTE8PHRoaXMuRjI7dmFyIHU9Zy50LHM9dS1wLGY9KGg9PW51bGwpP25iaSgpOmg7ZC5kbFNoaWZ0VG8ocyxmKTtpZihnLmNvbXBhcmVUbyhmKT49MCl7Z1tnLnQrK109MTtnLnN1YlRvKGYsZyl9QmlnSW50ZWdlci5PTkUuZGxTaGlmdFRvKHAsZik7Zi5zdWJUbyhkLGQpO3doaWxlKGQudDxwKXtkW2QudCsrXT0wfXdoaWxlKC0tcz49MCl7dmFyIGM9KGdbLS11XT09Yik/dGhpcy5ETTpNYXRoLmZsb29yKGdbdV0qQSsoZ1t1LTFdK3gpKnopO2lmKChnW3VdKz1kLmFtKDAsYyxnLHMsMCxwKSk8Yyl7ZC5kbFNoaWZ0VG8ocyxmKTtnLnN1YlRvKGYsZyk7d2hpbGUoZ1t1XTwtLWMpe2cuc3ViVG8oZixnKX19fWlmKGghPW51bGwpe2cuZHJTaGlmdFRvKHAsaCk7aWYoYSE9bCl7QmlnSW50ZWdlci5aRVJPLnN1YlRvKGgsaCl9fWcudD1wO2cuY2xhbXAoKTtpZih2PjApe2cuclNoaWZ0VG8odixnKX1pZihhPDApe0JpZ0ludGVnZXIuWkVSTy5zdWJUbyhnLGcpfX1mdW5jdGlvbiBibk1vZChiKXt2YXIgYz1uYmkoKTt0aGlzLmFicygpLmRpdlJlbVRvKGIsbnVsbCxjKTtpZih0aGlzLnM8MCYmYy5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKT4wKXtiLnN1YlRvKGMsYyl9cmV0dXJuIGN9ZnVuY3Rpb24gQ2xhc3NpYyhhKXt0aGlzLm09YX1mdW5jdGlvbiBjQ29udmVydChhKXtpZihhLnM8MHx8YS5jb21wYXJlVG8odGhpcy5tKT49MCl7cmV0dXJuIGEubW9kKHRoaXMubSl9ZWxzZXtyZXR1cm4gYX19ZnVuY3Rpb24gY1JldmVydChhKXtyZXR1cm4gYX1mdW5jdGlvbiBjUmVkdWNlKGEpe2EuZGl2UmVtVG8odGhpcy5tLG51bGwsYSl9ZnVuY3Rpb24gY011bFRvKGEsYyxiKXthLm11bHRpcGx5VG8oYyxiKTt0aGlzLnJlZHVjZShiKX1mdW5jdGlvbiBjU3FyVG8oYSxiKXthLnNxdWFyZVRvKGIpO3RoaXMucmVkdWNlKGIpfUNsYXNzaWMucHJvdG90eXBlLmNvbnZlcnQ9Y0NvbnZlcnQ7Q2xhc3NpYy5wcm90b3R5cGUucmV2ZXJ0PWNSZXZlcnQ7Q2xhc3NpYy5wcm90b3R5cGUucmVkdWNlPWNSZWR1Y2U7Q2xhc3NpYy5wcm90b3R5cGUubXVsVG89Y011bFRvO0NsYXNzaWMucHJvdG90eXBlLnNxclRvPWNTcXJUbztmdW5jdGlvbiBibnBJbnZEaWdpdCgpe2lmKHRoaXMudDwxKXtyZXR1cm4gMH12YXIgYT10aGlzWzBdO2lmKChhJjEpPT0wKXtyZXR1cm4gMH12YXIgYj1hJjM7Yj0oYiooMi0oYSYxNSkqYikpJjE1O2I9KGIqKDItKGEmMjU1KSpiKSkmMjU1O2I9KGIqKDItKCgoYSY2NTUzNSkqYikmNjU1MzUpKSkmNjU1MzU7Yj0oYiooMi1hKmIldGhpcy5EVikpJXRoaXMuRFY7cmV0dXJuKGI+MCk/dGhpcy5EVi1iOi1ifWZ1bmN0aW9uIE1vbnRnb21lcnkoYSl7dGhpcy5tPWE7dGhpcy5tcD1hLmludkRpZ2l0KCk7dGhpcy5tcGw9dGhpcy5tcCYzMjc2Nzt0aGlzLm1waD10aGlzLm1wPj4xNTt0aGlzLnVtPSgxPDwoYS5EQi0xNSkpLTE7dGhpcy5tdDI9MiphLnR9ZnVuY3Rpb24gbW9udENvbnZlcnQoYSl7dmFyIGI9bmJpKCk7YS5hYnMoKS5kbFNoaWZ0VG8odGhpcy5tLnQsYik7Yi5kaXZSZW1Ubyh0aGlzLm0sbnVsbCxiKTtpZihhLnM8MCYmYi5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKT4wKXt0aGlzLm0uc3ViVG8oYixiKX1yZXR1cm4gYn1mdW5jdGlvbiBtb250UmV2ZXJ0KGEpe3ZhciBiPW5iaSgpO2EuY29weVRvKGIpO3RoaXMucmVkdWNlKGIpO3JldHVybiBifWZ1bmN0aW9uIG1vbnRSZWR1Y2UoYSl7d2hpbGUoYS50PD10aGlzLm10Mil7YVthLnQrK109MH1mb3IodmFyIGM9MDtjPHRoaXMubS50OysrYyl7dmFyIGI9YVtjXSYzMjc2Nzt2YXIgZD0oYip0aGlzLm1wbCsoKChiKnRoaXMubXBoKyhhW2NdPj4xNSkqdGhpcy5tcGwpJnRoaXMudW0pPDwxNSkpJmEuRE07Yj1jK3RoaXMubS50O2FbYl0rPXRoaXMubS5hbSgwLGQsYSxjLDAsdGhpcy5tLnQpO3doaWxlKGFbYl0+PWEuRFYpe2FbYl0tPWEuRFY7YVsrK2JdKyt9fWEuY2xhbXAoKTthLmRyU2hpZnRUbyh0aGlzLm0udCxhKTtpZihhLmNvbXBhcmVUbyh0aGlzLm0pPj0wKXthLnN1YlRvKHRoaXMubSxhKX19ZnVuY3Rpb24gbW9udFNxclRvKGEsYil7YS5zcXVhcmVUbyhiKTt0aGlzLnJlZHVjZShiKX1mdW5jdGlvbiBtb250TXVsVG8oYSxjLGIpe2EubXVsdGlwbHlUbyhjLGIpO3RoaXMucmVkdWNlKGIpfU1vbnRnb21lcnkucHJvdG90eXBlLmNvbnZlcnQ9bW9udENvbnZlcnQ7TW9udGdvbWVyeS5wcm90b3R5cGUucmV2ZXJ0PW1vbnRSZXZlcnQ7TW9udGdvbWVyeS5wcm90b3R5cGUucmVkdWNlPW1vbnRSZWR1Y2U7TW9udGdvbWVyeS5wcm90b3R5cGUubXVsVG89bW9udE11bFRvO01vbnRnb21lcnkucHJvdG90eXBlLnNxclRvPW1vbnRTcXJUbztmdW5jdGlvbiBibnBJc0V2ZW4oKXtyZXR1cm4oKHRoaXMudD4wKT8odGhpc1swXSYxKTp0aGlzLnMpPT0wfWZ1bmN0aW9uIGJucEV4cChoLGope2lmKGg+NDI5NDk2NzI5NXx8aDwxKXtyZXR1cm4gQmlnSW50ZWdlci5PTkV9dmFyIGY9bmJpKCksYT1uYmkoKSxkPWouY29udmVydCh0aGlzKSxjPW5iaXRzKGgpLTE7ZC5jb3B5VG8oZik7d2hpbGUoLS1jPj0wKXtqLnNxclRvKGYsYSk7aWYoKGgmKDE8PGMpKT4wKXtqLm11bFRvKGEsZCxmKX1lbHNle3ZhciBiPWY7Zj1hO2E9Yn19cmV0dXJuIGoucmV2ZXJ0KGYpfWZ1bmN0aW9uIGJuTW9kUG93SW50KGIsYSl7dmFyIGM7aWYoYjwyNTZ8fGEuaXNFdmVuKCkpe2M9bmV3IENsYXNzaWMoYSl9ZWxzZXtjPW5ldyBNb250Z29tZXJ5KGEpfXJldHVybiB0aGlzLmV4cChiLGMpfUJpZ0ludGVnZXIucHJvdG90eXBlLmNvcHlUbz1ibnBDb3B5VG87QmlnSW50ZWdlci5wcm90b3R5cGUuZnJvbUludD1ibnBGcm9tSW50O0JpZ0ludGVnZXIucHJvdG90eXBlLmZyb21TdHJpbmc9Ym5wRnJvbVN0cmluZztCaWdJbnRlZ2VyLnByb3RvdHlwZS5jbGFtcD1ibnBDbGFtcDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5kbFNoaWZ0VG89Ym5wRExTaGlmdFRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmRyU2hpZnRUbz1ibnBEUlNoaWZ0VG87QmlnSW50ZWdlci5wcm90b3R5cGUubFNoaWZ0VG89Ym5wTFNoaWZ0VG87QmlnSW50ZWdlci5wcm90b3R5cGUuclNoaWZ0VG89Ym5wUlNoaWZ0VG87QmlnSW50ZWdlci5wcm90b3R5cGUuc3ViVG89Ym5wU3ViVG87QmlnSW50ZWdlci5wcm90b3R5cGUubXVsdGlwbHlUbz1ibnBNdWx0aXBseVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLnNxdWFyZVRvPWJucFNxdWFyZVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmRpdlJlbVRvPWJucERpdlJlbVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmludkRpZ2l0PWJucEludkRpZ2l0O0JpZ0ludGVnZXIucHJvdG90eXBlLmlzRXZlbj1ibnBJc0V2ZW47QmlnSW50ZWdlci5wcm90b3R5cGUuZXhwPWJucEV4cDtCaWdJbnRlZ2VyLnByb3RvdHlwZS50b1N0cmluZz1iblRvU3RyaW5nO0JpZ0ludGVnZXIucHJvdG90eXBlLm5lZ2F0ZT1ibk5lZ2F0ZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hYnM9Ym5BYnM7QmlnSW50ZWdlci5wcm90b3R5cGUuY29tcGFyZVRvPWJuQ29tcGFyZVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmJpdExlbmd0aD1ibkJpdExlbmd0aDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5tb2Q9Ym5Nb2Q7QmlnSW50ZWdlci5wcm90b3R5cGUubW9kUG93SW50PWJuTW9kUG93SW50O0JpZ0ludGVnZXIuWkVSTz1uYnYoMCk7QmlnSW50ZWdlci5PTkU9bmJ2KDEpOwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCmZ1bmN0aW9uIGJuQ2xvbmUoKXt2YXIgYT1uYmkoKTt0aGlzLmNvcHlUbyhhKTtyZXR1cm4gYX1mdW5jdGlvbiBibkludFZhbHVlKCl7aWYodGhpcy5zPDApe2lmKHRoaXMudD09MSl7cmV0dXJuIHRoaXNbMF0tdGhpcy5EVn1lbHNle2lmKHRoaXMudD09MCl7cmV0dXJuIC0xfX19ZWxzZXtpZih0aGlzLnQ9PTEpe3JldHVybiB0aGlzWzBdfWVsc2V7aWYodGhpcy50PT0wKXtyZXR1cm4gMH19fXJldHVybigodGhpc1sxXSYoKDE8PCgzMi10aGlzLkRCKSktMSkpPDx0aGlzLkRCKXx0aGlzWzBdfWZ1bmN0aW9uIGJuQnl0ZVZhbHVlKCl7cmV0dXJuKHRoaXMudD09MCk/dGhpcy5zOih0aGlzWzBdPDwyNCk+PjI0fWZ1bmN0aW9uIGJuU2hvcnRWYWx1ZSgpe3JldHVybih0aGlzLnQ9PTApP3RoaXMuczoodGhpc1swXTw8MTYpPj4xNn1mdW5jdGlvbiBibnBDaHVua1NpemUoYSl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5MTjIqdGhpcy5EQi9NYXRoLmxvZyhhKSl9ZnVuY3Rpb24gYm5TaWdOdW0oKXtpZih0aGlzLnM8MCl7cmV0dXJuIC0xfWVsc2V7aWYodGhpcy50PD0wfHwodGhpcy50PT0xJiZ0aGlzWzBdPD0wKSl7cmV0dXJuIDB9ZWxzZXtyZXR1cm4gMX19fWZ1bmN0aW9uIGJucFRvUmFkaXgoYyl7aWYoYz09bnVsbCl7Yz0xMH1pZih0aGlzLnNpZ251bSgpPT0wfHxjPDJ8fGM+MzYpe3JldHVybiIwIn12YXIgZj10aGlzLmNodW5rU2l6ZShjKTt2YXIgZT1NYXRoLnBvdyhjLGYpO3ZhciBpPW5idihlKSxqPW5iaSgpLGg9bmJpKCksZz0iIjt0aGlzLmRpdlJlbVRvKGksaixoKTt3aGlsZShqLnNpZ251bSgpPjApe2c9KGUraC5pbnRWYWx1ZSgpKS50b1N0cmluZyhjKS5zdWJzdHIoMSkrZztqLmRpdlJlbVRvKGksaixoKX1yZXR1cm4gaC5pbnRWYWx1ZSgpLnRvU3RyaW5nKGMpK2d9ZnVuY3Rpb24gYm5wRnJvbVJhZGl4KG0saCl7dGhpcy5mcm9tSW50KDApO2lmKGg9PW51bGwpe2g9MTB9dmFyIGY9dGhpcy5jaHVua1NpemUoaCk7dmFyIGc9TWF0aC5wb3coaCxmKSxlPWZhbHNlLGE9MCxsPTA7Zm9yKHZhciBjPTA7YzxtLmxlbmd0aDsrK2Mpe3ZhciBrPWludEF0KG0sYyk7aWYoazwwKXtpZihtLmNoYXJBdChjKT09Ii0iJiZ0aGlzLnNpZ251bSgpPT0wKXtlPXRydWV9Y29udGludWV9bD1oKmwraztpZigrK2E+PWYpe3RoaXMuZE11bHRpcGx5KGcpO3RoaXMuZEFkZE9mZnNldChsLDApO2E9MDtsPTB9fWlmKGE+MCl7dGhpcy5kTXVsdGlwbHkoTWF0aC5wb3coaCxhKSk7dGhpcy5kQWRkT2Zmc2V0KGwsMCl9aWYoZSl7QmlnSW50ZWdlci5aRVJPLnN1YlRvKHRoaXMsdGhpcyl9fWZ1bmN0aW9uIGJucEZyb21OdW1iZXIoZixlLGgpe2lmKCJudW1iZXIiPT10eXBlb2YgZSl7aWYoZjwyKXt0aGlzLmZyb21JbnQoMSl9ZWxzZXt0aGlzLmZyb21OdW1iZXIoZixoKTtpZighdGhpcy50ZXN0Qml0KGYtMSkpe3RoaXMuYml0d2lzZVRvKEJpZ0ludGVnZXIuT05FLnNoaWZ0TGVmdChmLTEpLG9wX29yLHRoaXMpfWlmKHRoaXMuaXNFdmVuKCkpe3RoaXMuZEFkZE9mZnNldCgxLDApfXdoaWxlKCF0aGlzLmlzUHJvYmFibGVQcmltZShlKSl7dGhpcy5kQWRkT2Zmc2V0KDIsMCk7aWYodGhpcy5iaXRMZW5ndGgoKT5mKXt0aGlzLnN1YlRvKEJpZ0ludGVnZXIuT05FLnNoaWZ0TGVmdChmLTEpLHRoaXMpfX19fWVsc2V7dmFyIGQ9bmV3IEFycmF5KCksZz1mJjc7ZC5sZW5ndGg9KGY+PjMpKzE7ZS5uZXh0Qnl0ZXMoZCk7aWYoZz4wKXtkWzBdJj0oKDE8PGcpLTEpfWVsc2V7ZFswXT0wfXRoaXMuZnJvbVN0cmluZyhkLDI1Nil9fWZ1bmN0aW9uIGJuVG9CeXRlQXJyYXkoKXt2YXIgYj10aGlzLnQsYz1uZXcgQXJyYXkoKTtjWzBdPXRoaXMuczt2YXIgZT10aGlzLkRCLShiKnRoaXMuREIpJTgsZixhPTA7aWYoYi0tPjApe2lmKGU8dGhpcy5EQiYmKGY9dGhpc1tiXT4+ZSkhPSh0aGlzLnMmdGhpcy5ETSk+PmUpe2NbYSsrXT1mfCh0aGlzLnM8PCh0aGlzLkRCLWUpKX13aGlsZShiPj0wKXtpZihlPDgpe2Y9KHRoaXNbYl0mKCgxPDxlKS0xKSk8PCg4LWUpO2Z8PXRoaXNbLS1iXT4+KGUrPXRoaXMuREItOCl9ZWxzZXtmPSh0aGlzW2JdPj4oZS09OCkpJjI1NTtpZihlPD0wKXtlKz10aGlzLkRCOy0tYn19aWYoKGYmMTI4KSE9MCl7Znw9LTI1Nn1pZihhPT0wJiYodGhpcy5zJjEyOCkhPShmJjEyOCkpeysrYX1pZihhPjB8fGYhPXRoaXMucyl7Y1thKytdPWZ9fX1yZXR1cm4gY31mdW5jdGlvbiBibkVxdWFscyhiKXtyZXR1cm4odGhpcy5jb21wYXJlVG8oYik9PTApfWZ1bmN0aW9uIGJuTWluKGIpe3JldHVybih0aGlzLmNvbXBhcmVUbyhiKTwwKT90aGlzOmJ9ZnVuY3Rpb24gYm5NYXgoYil7cmV0dXJuKHRoaXMuY29tcGFyZVRvKGIpPjApP3RoaXM6Yn1mdW5jdGlvbiBibnBCaXR3aXNlVG8oYyxoLGUpe3ZhciBkLGcsYj1NYXRoLm1pbihjLnQsdGhpcy50KTtmb3IoZD0wO2Q8YjsrK2Qpe2VbZF09aCh0aGlzW2RdLGNbZF0pfWlmKGMudDx0aGlzLnQpe2c9Yy5zJnRoaXMuRE07Zm9yKGQ9YjtkPHRoaXMudDsrK2Qpe2VbZF09aCh0aGlzW2RdLGcpfWUudD10aGlzLnR9ZWxzZXtnPXRoaXMucyZ0aGlzLkRNO2ZvcihkPWI7ZDxjLnQ7KytkKXtlW2RdPWgoZyxjW2RdKX1lLnQ9Yy50fWUucz1oKHRoaXMucyxjLnMpO2UuY2xhbXAoKX1mdW5jdGlvbiBvcF9hbmQoYSxiKXtyZXR1cm4gYSZifWZ1bmN0aW9uIGJuQW5kKGIpe3ZhciBjPW5iaSgpO3RoaXMuYml0d2lzZVRvKGIsb3BfYW5kLGMpO3JldHVybiBjfWZ1bmN0aW9uIG9wX29yKGEsYil7cmV0dXJuIGF8Yn1mdW5jdGlvbiBibk9yKGIpe3ZhciBjPW5iaSgpO3RoaXMuYml0d2lzZVRvKGIsb3Bfb3IsYyk7cmV0dXJuIGN9ZnVuY3Rpb24gb3BfeG9yKGEsYil7cmV0dXJuIGFeYn1mdW5jdGlvbiBiblhvcihiKXt2YXIgYz1uYmkoKTt0aGlzLmJpdHdpc2VUbyhiLG9wX3hvcixjKTtyZXR1cm4gY31mdW5jdGlvbiBvcF9hbmRub3QoYSxiKXtyZXR1cm4gYSZ+Yn1mdW5jdGlvbiBibkFuZE5vdChiKXt2YXIgYz1uYmkoKTt0aGlzLmJpdHdpc2VUbyhiLG9wX2FuZG5vdCxjKTtyZXR1cm4gY31mdW5jdGlvbiBibk5vdCgpe3ZhciBiPW5iaSgpO2Zvcih2YXIgYT0wO2E8dGhpcy50OysrYSl7YlthXT10aGlzLkRNJn50aGlzW2FdfWIudD10aGlzLnQ7Yi5zPX50aGlzLnM7cmV0dXJuIGJ9ZnVuY3Rpb24gYm5TaGlmdExlZnQoYil7dmFyIGE9bmJpKCk7aWYoYjwwKXt0aGlzLnJTaGlmdFRvKC1iLGEpfWVsc2V7dGhpcy5sU2hpZnRUbyhiLGEpfXJldHVybiBhfWZ1bmN0aW9uIGJuU2hpZnRSaWdodChiKXt2YXIgYT1uYmkoKTtpZihiPDApe3RoaXMubFNoaWZ0VG8oLWIsYSl9ZWxzZXt0aGlzLnJTaGlmdFRvKGIsYSl9cmV0dXJuIGF9ZnVuY3Rpb24gbGJpdChhKXtpZihhPT0wKXtyZXR1cm4gLTF9dmFyIGI9MDtpZigoYSY2NTUzNSk9PTApe2E+Pj0xNjtiKz0xNn1pZigoYSYyNTUpPT0wKXthPj49ODtiKz04fWlmKChhJjE1KT09MCl7YT4+PTQ7Yis9NH1pZigoYSYzKT09MCl7YT4+PTI7Yis9Mn1pZigoYSYxKT09MCl7KytifXJldHVybiBifWZ1bmN0aW9uIGJuR2V0TG93ZXN0U2V0Qml0KCl7Zm9yKHZhciBhPTA7YTx0aGlzLnQ7KythKXtpZih0aGlzW2FdIT0wKXtyZXR1cm4gYSp0aGlzLkRCK2xiaXQodGhpc1thXSl9fWlmKHRoaXMuczwwKXtyZXR1cm4gdGhpcy50KnRoaXMuREJ9cmV0dXJuIC0xfWZ1bmN0aW9uIGNiaXQoYSl7dmFyIGI9MDt3aGlsZShhIT0wKXthJj1hLTE7KytifXJldHVybiBifWZ1bmN0aW9uIGJuQml0Q291bnQoKXt2YXIgYz0wLGE9dGhpcy5zJnRoaXMuRE07Zm9yKHZhciBiPTA7Yjx0aGlzLnQ7KytiKXtjKz1jYml0KHRoaXNbYl1eYSl9cmV0dXJuIGN9ZnVuY3Rpb24gYm5UZXN0Qml0KGIpe3ZhciBhPU1hdGguZmxvb3IoYi90aGlzLkRCKTtpZihhPj10aGlzLnQpe3JldHVybih0aGlzLnMhPTApfXJldHVybigodGhpc1thXSYoMTw8KGIldGhpcy5EQikpKSE9MCl9ZnVuY3Rpb24gYm5wQ2hhbmdlQml0KGMsYil7dmFyIGE9QmlnSW50ZWdlci5PTkUuc2hpZnRMZWZ0KGMpO3RoaXMuYml0d2lzZVRvKGEsYixhKTtyZXR1cm4gYX1mdW5jdGlvbiBiblNldEJpdChhKXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQoYSxvcF9vcil9ZnVuY3Rpb24gYm5DbGVhckJpdChhKXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQoYSxvcF9hbmRub3QpfWZ1bmN0aW9uIGJuRmxpcEJpdChhKXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQoYSxvcF94b3IpfWZ1bmN0aW9uIGJucEFkZFRvKGQsZil7dmFyIGU9MCxnPTAsYj1NYXRoLm1pbihkLnQsdGhpcy50KTt3aGlsZShlPGIpe2crPXRoaXNbZV0rZFtlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWlmKGQudDx0aGlzLnQpe2crPWQuczt3aGlsZShlPHRoaXMudCl7Zys9dGhpc1tlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWcrPXRoaXMuc31lbHNle2crPXRoaXMuczt3aGlsZShlPGQudCl7Zys9ZFtlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWcrPWQuc31mLnM9KGc8MCk/LTE6MDtpZihnPjApe2ZbZSsrXT1nfWVsc2V7aWYoZzwtMSl7ZltlKytdPXRoaXMuRFYrZ319Zi50PWU7Zi5jbGFtcCgpfWZ1bmN0aW9uIGJuQWRkKGIpe3ZhciBjPW5iaSgpO3RoaXMuYWRkVG8oYixjKTtyZXR1cm4gY31mdW5jdGlvbiBiblN1YnRyYWN0KGIpe3ZhciBjPW5iaSgpO3RoaXMuc3ViVG8oYixjKTtyZXR1cm4gY31mdW5jdGlvbiBibk11bHRpcGx5KGIpe3ZhciBjPW5iaSgpO3RoaXMubXVsdGlwbHlUbyhiLGMpO3JldHVybiBjfWZ1bmN0aW9uIGJuU3F1YXJlKCl7dmFyIGE9bmJpKCk7dGhpcy5zcXVhcmVUbyhhKTtyZXR1cm4gYX1mdW5jdGlvbiBibkRpdmlkZShiKXt2YXIgYz1uYmkoKTt0aGlzLmRpdlJlbVRvKGIsYyxudWxsKTtyZXR1cm4gY31mdW5jdGlvbiBiblJlbWFpbmRlcihiKXt2YXIgYz1uYmkoKTt0aGlzLmRpdlJlbVRvKGIsbnVsbCxjKTtyZXR1cm4gY31mdW5jdGlvbiBibkRpdmlkZUFuZFJlbWFpbmRlcihiKXt2YXIgZD1uYmkoKSxjPW5iaSgpO3RoaXMuZGl2UmVtVG8oYixkLGMpO3JldHVybiBuZXcgQXJyYXkoZCxjKX1mdW5jdGlvbiBibnBETXVsdGlwbHkoYSl7dGhpc1t0aGlzLnRdPXRoaXMuYW0oMCxhLTEsdGhpcywwLDAsdGhpcy50KTsrK3RoaXMudDt0aGlzLmNsYW1wKCl9ZnVuY3Rpb24gYm5wREFkZE9mZnNldChiLGEpe2lmKGI9PTApe3JldHVybn13aGlsZSh0aGlzLnQ8PWEpe3RoaXNbdGhpcy50KytdPTB9dGhpc1thXSs9Yjt3aGlsZSh0aGlzW2FdPj10aGlzLkRWKXt0aGlzW2FdLT10aGlzLkRWO2lmKCsrYT49dGhpcy50KXt0aGlzW3RoaXMudCsrXT0wfSsrdGhpc1thXX19ZnVuY3Rpb24gTnVsbEV4cCgpe31mdW5jdGlvbiBuTm9wKGEpe3JldHVybiBhfWZ1bmN0aW9uIG5NdWxUbyhhLGMsYil7YS5tdWx0aXBseVRvKGMsYil9ZnVuY3Rpb24gblNxclRvKGEsYil7YS5zcXVhcmVUbyhiKX1OdWxsRXhwLnByb3RvdHlwZS5jb252ZXJ0PW5Ob3A7TnVsbEV4cC5wcm90b3R5cGUucmV2ZXJ0PW5Ob3A7TnVsbEV4cC5wcm90b3R5cGUubXVsVG89bk11bFRvO051bGxFeHAucHJvdG90eXBlLnNxclRvPW5TcXJUbztmdW5jdGlvbiBiblBvdyhhKXtyZXR1cm4gdGhpcy5leHAoYSxuZXcgTnVsbEV4cCgpKX1mdW5jdGlvbiBibnBNdWx0aXBseUxvd2VyVG8oYixmLGUpe3ZhciBkPU1hdGgubWluKHRoaXMudCtiLnQsZik7ZS5zPTA7ZS50PWQ7d2hpbGUoZD4wKXtlWy0tZF09MH12YXIgYztmb3IoYz1lLnQtdGhpcy50O2Q8YzsrK2Qpe2VbZCt0aGlzLnRdPXRoaXMuYW0oMCxiW2RdLGUsZCwwLHRoaXMudCl9Zm9yKGM9TWF0aC5taW4oYi50LGYpO2Q8YzsrK2Qpe3RoaXMuYW0oMCxiW2RdLGUsZCwwLGYtZCl9ZS5jbGFtcCgpfWZ1bmN0aW9uIGJucE11bHRpcGx5VXBwZXJUbyhiLGUsZCl7LS1lO3ZhciBjPWQudD10aGlzLnQrYi50LWU7ZC5zPTA7d2hpbGUoLS1jPj0wKXtkW2NdPTB9Zm9yKGM9TWF0aC5tYXgoZS10aGlzLnQsMCk7YzxiLnQ7KytjKXtkW3RoaXMudCtjLWVdPXRoaXMuYW0oZS1jLGJbY10sZCwwLDAsdGhpcy50K2MtZSl9ZC5jbGFtcCgpO2QuZHJTaGlmdFRvKDEsZCl9ZnVuY3Rpb24gQmFycmV0dChhKXt0aGlzLnIyPW5iaSgpO3RoaXMucTM9bmJpKCk7QmlnSW50ZWdlci5PTkUuZGxTaGlmdFRvKDIqYS50LHRoaXMucjIpO3RoaXMubXU9dGhpcy5yMi5kaXZpZGUoYSk7dGhpcy5tPWF9ZnVuY3Rpb24gYmFycmV0dENvbnZlcnQoYSl7aWYoYS5zPDB8fGEudD4yKnRoaXMubS50KXtyZXR1cm4gYS5tb2QodGhpcy5tKX1lbHNle2lmKGEuY29tcGFyZVRvKHRoaXMubSk8MCl7cmV0dXJuIGF9ZWxzZXt2YXIgYj1uYmkoKTthLmNvcHlUbyhiKTt0aGlzLnJlZHVjZShiKTtyZXR1cm4gYn19fWZ1bmN0aW9uIGJhcnJldHRSZXZlcnQoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gYmFycmV0dFJlZHVjZShhKXthLmRyU2hpZnRUbyh0aGlzLm0udC0xLHRoaXMucjIpO2lmKGEudD50aGlzLm0udCsxKXthLnQ9dGhpcy5tLnQrMTthLmNsYW1wKCl9dGhpcy5tdS5tdWx0aXBseVVwcGVyVG8odGhpcy5yMix0aGlzLm0udCsxLHRoaXMucTMpO3RoaXMubS5tdWx0aXBseUxvd2VyVG8odGhpcy5xMyx0aGlzLm0udCsxLHRoaXMucjIpO3doaWxlKGEuY29tcGFyZVRvKHRoaXMucjIpPDApe2EuZEFkZE9mZnNldCgxLHRoaXMubS50KzEpfWEuc3ViVG8odGhpcy5yMixhKTt3aGlsZShhLmNvbXBhcmVUbyh0aGlzLm0pPj0wKXthLnN1YlRvKHRoaXMubSxhKX19ZnVuY3Rpb24gYmFycmV0dFNxclRvKGEsYil7YS5zcXVhcmVUbyhiKTt0aGlzLnJlZHVjZShiKX1mdW5jdGlvbiBiYXJyZXR0TXVsVG8oYSxjLGIpe2EubXVsdGlwbHlUbyhjLGIpO3RoaXMucmVkdWNlKGIpfUJhcnJldHQucHJvdG90eXBlLmNvbnZlcnQ9YmFycmV0dENvbnZlcnQ7QmFycmV0dC5wcm90b3R5cGUucmV2ZXJ0PWJhcnJldHRSZXZlcnQ7QmFycmV0dC5wcm90b3R5cGUucmVkdWNlPWJhcnJldHRSZWR1Y2U7QmFycmV0dC5wcm90b3R5cGUubXVsVG89YmFycmV0dE11bFRvO0JhcnJldHQucHJvdG90eXBlLnNxclRvPWJhcnJldHRTcXJUbztmdW5jdGlvbiBibk1vZFBvdyhxLGYpe3ZhciBvPXEuYml0TGVuZ3RoKCksaCxiPW5idigxKSx2O2lmKG88PTApe3JldHVybiBifWVsc2V7aWYobzwxOCl7aD0xfWVsc2V7aWYobzw0OCl7aD0zfWVsc2V7aWYobzwxNDQpe2g9NH1lbHNle2lmKG88NzY4KXtoPTV9ZWxzZXtoPTZ9fX19fWlmKG88OCl7dj1uZXcgQ2xhc3NpYyhmKX1lbHNle2lmKGYuaXNFdmVuKCkpe3Y9bmV3IEJhcnJldHQoZil9ZWxzZXt2PW5ldyBNb250Z29tZXJ5KGYpfX12YXIgcD1uZXcgQXJyYXkoKSxkPTMscz1oLTEsYT0oMTw8aCktMTtwWzFdPXYuY29udmVydCh0aGlzKTtpZihoPjEpe3ZhciBBPW5iaSgpO3Yuc3FyVG8ocFsxXSxBKTt3aGlsZShkPD1hKXtwW2RdPW5iaSgpO3YubXVsVG8oQSxwW2QtMl0scFtkXSk7ZCs9Mn19dmFyIGw9cS50LTEseCx1PXRydWUsYz1uYmkoKSx5O289bmJpdHMocVtsXSktMTt3aGlsZShsPj0wKXtpZihvPj1zKXt4PShxW2xdPj4oby1zKSkmYX1lbHNle3g9KHFbbF0mKCgxPDwobysxKSktMSkpPDwocy1vKTtpZihsPjApe3h8PXFbbC0xXT4+KHRoaXMuREIrby1zKX19ZD1oO3doaWxlKCh4JjEpPT0wKXt4Pj49MTstLWR9aWYoKG8tPWQpPDApe28rPXRoaXMuREI7LS1sfWlmKHUpe3BbeF0uY29weVRvKGIpO3U9ZmFsc2V9ZWxzZXt3aGlsZShkPjEpe3Yuc3FyVG8oYixjKTt2LnNxclRvKGMsYik7ZC09Mn1pZihkPjApe3Yuc3FyVG8oYixjKX1lbHNle3k9YjtiPWM7Yz15fXYubXVsVG8oYyxwW3hdLGIpfXdoaWxlKGw+PTAmJihxW2xdJigxPDxvKSk9PTApe3Yuc3FyVG8oYixjKTt5PWI7Yj1jO2M9eTtpZigtLW88MCl7bz10aGlzLkRCLTE7LS1sfX19cmV0dXJuIHYucmV2ZXJ0KGIpfWZ1bmN0aW9uIGJuR0NEKGMpe3ZhciBiPSh0aGlzLnM8MCk/dGhpcy5uZWdhdGUoKTp0aGlzLmNsb25lKCk7dmFyIGg9KGMuczwwKT9jLm5lZ2F0ZSgpOmMuY2xvbmUoKTtpZihiLmNvbXBhcmVUbyhoKTwwKXt2YXIgZT1iO2I9aDtoPWV9dmFyIGQ9Yi5nZXRMb3dlc3RTZXRCaXQoKSxmPWguZ2V0TG93ZXN0U2V0Qml0KCk7aWYoZjwwKXtyZXR1cm4gYn1pZihkPGYpe2Y9ZH1pZihmPjApe2IuclNoaWZ0VG8oZixiKTtoLnJTaGlmdFRvKGYsaCl9d2hpbGUoYi5zaWdudW0oKT4wKXtpZigoZD1iLmdldExvd2VzdFNldEJpdCgpKT4wKXtiLnJTaGlmdFRvKGQsYil9aWYoKGQ9aC5nZXRMb3dlc3RTZXRCaXQoKSk+MCl7aC5yU2hpZnRUbyhkLGgpfWlmKGIuY29tcGFyZVRvKGgpPj0wKXtiLnN1YlRvKGgsYik7Yi5yU2hpZnRUbygxLGIpfWVsc2V7aC5zdWJUbyhiLGgpO2guclNoaWZ0VG8oMSxoKX19aWYoZj4wKXtoLmxTaGlmdFRvKGYsaCl9cmV0dXJuIGh9ZnVuY3Rpb24gYm5wTW9kSW50KGUpe2lmKGU8PTApe3JldHVybiAwfXZhciBjPXRoaXMuRFYlZSxiPSh0aGlzLnM8MCk/ZS0xOjA7aWYodGhpcy50PjApe2lmKGM9PTApe2I9dGhpc1swXSVlfWVsc2V7Zm9yKHZhciBhPXRoaXMudC0xO2E+PTA7LS1hKXtiPShjKmIrdGhpc1thXSklZX19fXJldHVybiBifWZ1bmN0aW9uIGJuTW9kSW52ZXJzZShmKXt2YXIgaj1mLmlzRXZlbigpO2lmKCh0aGlzLmlzRXZlbigpJiZqKXx8Zi5zaWdudW0oKT09MCl7cmV0dXJuIEJpZ0ludGVnZXIuWkVST312YXIgaT1mLmNsb25lKCksaD10aGlzLmNsb25lKCk7dmFyIGc9bmJ2KDEpLGU9bmJ2KDApLGw9bmJ2KDApLGs9bmJ2KDEpO3doaWxlKGkuc2lnbnVtKCkhPTApe3doaWxlKGkuaXNFdmVuKCkpe2kuclNoaWZ0VG8oMSxpKTtpZihqKXtpZighZy5pc0V2ZW4oKXx8IWUuaXNFdmVuKCkpe2cuYWRkVG8odGhpcyxnKTtlLnN1YlRvKGYsZSl9Zy5yU2hpZnRUbygxLGcpfWVsc2V7aWYoIWUuaXNFdmVuKCkpe2Uuc3ViVG8oZixlKX19ZS5yU2hpZnRUbygxLGUpfXdoaWxlKGguaXNFdmVuKCkpe2guclNoaWZ0VG8oMSxoKTtpZihqKXtpZighbC5pc0V2ZW4oKXx8IWsuaXNFdmVuKCkpe2wuYWRkVG8odGhpcyxsKTtrLnN1YlRvKGYsayl9bC5yU2hpZnRUbygxLGwpfWVsc2V7aWYoIWsuaXNFdmVuKCkpe2suc3ViVG8oZixrKX19ay5yU2hpZnRUbygxLGspfWlmKGkuY29tcGFyZVRvKGgpPj0wKXtpLnN1YlRvKGgsaSk7aWYoail7Zy5zdWJUbyhsLGcpfWUuc3ViVG8oayxlKX1lbHNle2guc3ViVG8oaSxoKTtpZihqKXtsLnN1YlRvKGcsbCl9ay5zdWJUbyhlLGspfX1pZihoLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSkhPTApe3JldHVybiBCaWdJbnRlZ2VyLlpFUk99aWYoay5jb21wYXJlVG8oZik+PTApe3JldHVybiBrLnN1YnRyYWN0KGYpfWlmKGsuc2lnbnVtKCk8MCl7ay5hZGRUbyhmLGspfWVsc2V7cmV0dXJuIGt9aWYoay5zaWdudW0oKTwwKXtyZXR1cm4gay5hZGQoZil9ZWxzZXtyZXR1cm4ga319dmFyIGxvd3ByaW1lcz1bMiwzLDUsNywxMSwxMywxNywxOSwyMywyOSwzMSwzNyw0MSw0Myw0Nyw1Myw1OSw2MSw2Nyw3MSw3Myw3OSw4Myw4OSw5NywxMDEsMTAzLDEwNywxMDksMTEzLDEyNywxMzEsMTM3LDEzOSwxNDksMTUxLDE1NywxNjMsMTY3LDE3MywxNzksMTgxLDE5MSwxOTMsMTk3LDE5OSwyMTEsMjIzLDIyNywyMjksMjMzLDIzOSwyNDEsMjUxLDI1NywyNjMsMjY5LDI3MSwyNzcsMjgxLDI4MywyOTMsMzA3LDMxMSwzMTMsMzE3LDMzMSwzMzcsMzQ3LDM0OSwzNTMsMzU5LDM2NywzNzMsMzc5LDM4MywzODksMzk3LDQwMSw0MDksNDE5LDQyMSw0MzEsNDMzLDQzOSw0NDMsNDQ5LDQ1Nyw0NjEsNDYzLDQ2Nyw0NzksNDg3LDQ5MSw0OTksNTAzLDUwOSw1MjEsNTIzLDU0MSw1NDcsNTU3LDU2Myw1NjksNTcxLDU3Nyw1ODcsNTkzLDU5OSw2MDEsNjA3LDYxMyw2MTcsNjE5LDYzMSw2NDEsNjQzLDY0Nyw2NTMsNjU5LDY2MSw2NzMsNjc3LDY4Myw2OTEsNzAxLDcwOSw3MTksNzI3LDczMyw3MzksNzQzLDc1MSw3NTcsNzYxLDc2OSw3NzMsNzg3LDc5Nyw4MDksODExLDgyMSw4MjMsODI3LDgyOSw4MzksODUzLDg1Nyw4NTksODYzLDg3Nyw4ODEsODgzLDg4Nyw5MDcsOTExLDkxOSw5MjksOTM3LDk0MSw5NDcsOTUzLDk2Nyw5NzEsOTc3LDk4Myw5OTEsOTk3XTt2YXIgbHBsaW09KDE8PDI2KS9sb3dwcmltZXNbbG93cHJpbWVzLmxlbmd0aC0xXTtmdW5jdGlvbiBibklzUHJvYmFibGVQcmltZShlKXt2YXIgZCxiPXRoaXMuYWJzKCk7aWYoYi50PT0xJiZiWzBdPD1sb3dwcmltZXNbbG93cHJpbWVzLmxlbmd0aC0xXSl7Zm9yKGQ9MDtkPGxvd3ByaW1lcy5sZW5ndGg7KytkKXtpZihiWzBdPT1sb3dwcmltZXNbZF0pe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9aWYoYi5pc0V2ZW4oKSl7cmV0dXJuIGZhbHNlfWQ9MTt3aGlsZShkPGxvd3ByaW1lcy5sZW5ndGgpe3ZhciBhPWxvd3ByaW1lc1tkXSxjPWQrMTt3aGlsZShjPGxvd3ByaW1lcy5sZW5ndGgmJmE8bHBsaW0pe2EqPWxvd3ByaW1lc1tjKytdfWE9Yi5tb2RJbnQoYSk7d2hpbGUoZDxjKXtpZihhJWxvd3ByaW1lc1tkKytdPT0wKXtyZXR1cm4gZmFsc2V9fX1yZXR1cm4gYi5taWxsZXJSYWJpbihlKX1mdW5jdGlvbiBibnBNaWxsZXJSYWJpbihmKXt2YXIgZz10aGlzLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKTt2YXIgYz1nLmdldExvd2VzdFNldEJpdCgpO2lmKGM8PTApe3JldHVybiBmYWxzZX12YXIgaD1nLnNoaWZ0UmlnaHQoYyk7Zj0oZisxKT4+MTtpZihmPmxvd3ByaW1lcy5sZW5ndGgpe2Y9bG93cHJpbWVzLmxlbmd0aH12YXIgYj1uYmkoKTtmb3IodmFyIGU9MDtlPGY7KytlKXtiLmZyb21JbnQobG93cHJpbWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpsb3dwcmltZXMubGVuZ3RoKV0pO3ZhciBsPWIubW9kUG93KGgsdGhpcyk7aWYobC5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpIT0wJiZsLmNvbXBhcmVUbyhnKSE9MCl7dmFyIGQ9MTt3aGlsZShkKys8YyYmbC5jb21wYXJlVG8oZykhPTApe2w9bC5tb2RQb3dJbnQoMix0aGlzKTtpZihsLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSk9PTApe3JldHVybiBmYWxzZX19aWYobC5jb21wYXJlVG8oZykhPTApe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfUJpZ0ludGVnZXIucHJvdG90eXBlLmNodW5rU2l6ZT1ibnBDaHVua1NpemU7QmlnSW50ZWdlci5wcm90b3R5cGUudG9SYWRpeD1ibnBUb1JhZGl4O0JpZ0ludGVnZXIucHJvdG90eXBlLmZyb21SYWRpeD1ibnBGcm9tUmFkaXg7QmlnSW50ZWdlci5wcm90b3R5cGUuZnJvbU51bWJlcj1ibnBGcm9tTnVtYmVyO0JpZ0ludGVnZXIucHJvdG90eXBlLmJpdHdpc2VUbz1ibnBCaXR3aXNlVG87QmlnSW50ZWdlci5wcm90b3R5cGUuY2hhbmdlQml0PWJucENoYW5nZUJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hZGRUbz1ibnBBZGRUbztCaWdJbnRlZ2VyLnByb3RvdHlwZS5kTXVsdGlwbHk9Ym5wRE11bHRpcGx5O0JpZ0ludGVnZXIucHJvdG90eXBlLmRBZGRPZmZzZXQ9Ym5wREFkZE9mZnNldDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5tdWx0aXBseUxvd2VyVG89Ym5wTXVsdGlwbHlMb3dlclRvO0JpZ0ludGVnZXIucHJvdG90eXBlLm11bHRpcGx5VXBwZXJUbz1ibnBNdWx0aXBseVVwcGVyVG87QmlnSW50ZWdlci5wcm90b3R5cGUubW9kSW50PWJucE1vZEludDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5taWxsZXJSYWJpbj1ibnBNaWxsZXJSYWJpbjtCaWdJbnRlZ2VyLnByb3RvdHlwZS5jbG9uZT1ibkNsb25lO0JpZ0ludGVnZXIucHJvdG90eXBlLmludFZhbHVlPWJuSW50VmFsdWU7QmlnSW50ZWdlci5wcm90b3R5cGUuYnl0ZVZhbHVlPWJuQnl0ZVZhbHVlO0JpZ0ludGVnZXIucHJvdG90eXBlLnNob3J0VmFsdWU9Ym5TaG9ydFZhbHVlO0JpZ0ludGVnZXIucHJvdG90eXBlLnNpZ251bT1iblNpZ051bTtCaWdJbnRlZ2VyLnByb3RvdHlwZS50b0J5dGVBcnJheT1iblRvQnl0ZUFycmF5O0JpZ0ludGVnZXIucHJvdG90eXBlLmVxdWFscz1ibkVxdWFscztCaWdJbnRlZ2VyLnByb3RvdHlwZS5taW49Ym5NaW47QmlnSW50ZWdlci5wcm90b3R5cGUubWF4PWJuTWF4O0JpZ0ludGVnZXIucHJvdG90eXBlLmFuZD1ibkFuZDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5vcj1ibk9yO0JpZ0ludGVnZXIucHJvdG90eXBlLnhvcj1iblhvcjtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbmROb3Q9Ym5BbmROb3Q7QmlnSW50ZWdlci5wcm90b3R5cGUubm90PWJuTm90O0JpZ0ludGVnZXIucHJvdG90eXBlLnNoaWZ0TGVmdD1iblNoaWZ0TGVmdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zaGlmdFJpZ2h0PWJuU2hpZnRSaWdodDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5nZXRMb3dlc3RTZXRCaXQ9Ym5HZXRMb3dlc3RTZXRCaXQ7QmlnSW50ZWdlci5wcm90b3R5cGUuYml0Q291bnQ9Ym5CaXRDb3VudDtCaWdJbnRlZ2VyLnByb3RvdHlwZS50ZXN0Qml0PWJuVGVzdEJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zZXRCaXQ9Ym5TZXRCaXQ7QmlnSW50ZWdlci5wcm90b3R5cGUuY2xlYXJCaXQ9Ym5DbGVhckJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5mbGlwQml0PWJuRmxpcEJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hZGQ9Ym5BZGQ7QmlnSW50ZWdlci5wcm90b3R5cGUuc3VidHJhY3Q9Ym5TdWJ0cmFjdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5tdWx0aXBseT1ibk11bHRpcGx5O0JpZ0ludGVnZXIucHJvdG90eXBlLmRpdmlkZT1ibkRpdmlkZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5yZW1haW5kZXI9Ym5SZW1haW5kZXI7QmlnSW50ZWdlci5wcm90b3R5cGUuZGl2aWRlQW5kUmVtYWluZGVyPWJuRGl2aWRlQW5kUmVtYWluZGVyO0JpZ0ludGVnZXIucHJvdG90eXBlLm1vZFBvdz1ibk1vZFBvdztCaWdJbnRlZ2VyLnByb3RvdHlwZS5tb2RJbnZlcnNlPWJuTW9kSW52ZXJzZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5wb3c9Ym5Qb3c7QmlnSW50ZWdlci5wcm90b3R5cGUuZ2NkPWJuR0NEO0JpZ0ludGVnZXIucHJvdG90eXBlLmlzUHJvYmFibGVQcmltZT1ibklzUHJvYmFibGVQcmltZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zcXVhcmU9Ym5TcXVhcmU7Ci8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuLwogKi8KZnVuY3Rpb24gQXJjZm91cigpe3RoaXMuaT0wO3RoaXMuaj0wO3RoaXMuUz1uZXcgQXJyYXkoKX1mdW5jdGlvbiBBUkM0aW5pdChkKXt2YXIgYyxhLGI7Zm9yKGM9MDtjPDI1NjsrK2Mpe3RoaXMuU1tjXT1jfWE9MDtmb3IoYz0wO2M8MjU2OysrYyl7YT0oYSt0aGlzLlNbY10rZFtjJWQubGVuZ3RoXSkmMjU1O2I9dGhpcy5TW2NdO3RoaXMuU1tjXT10aGlzLlNbYV07dGhpcy5TW2FdPWJ9dGhpcy5pPTA7dGhpcy5qPTB9ZnVuY3Rpb24gQVJDNG5leHQoKXt2YXIgYTt0aGlzLmk9KHRoaXMuaSsxKSYyNTU7dGhpcy5qPSh0aGlzLmordGhpcy5TW3RoaXMuaV0pJjI1NTthPXRoaXMuU1t0aGlzLmldO3RoaXMuU1t0aGlzLmldPXRoaXMuU1t0aGlzLmpdO3RoaXMuU1t0aGlzLmpdPWE7cmV0dXJuIHRoaXMuU1soYSt0aGlzLlNbdGhpcy5pXSkmMjU1XX1BcmNmb3VyLnByb3RvdHlwZS5pbml0PUFSQzRpbml0O0FyY2ZvdXIucHJvdG90eXBlLm5leHQ9QVJDNG5leHQ7ZnVuY3Rpb24gcHJuZ19uZXdzdGF0ZSgpe3JldHVybiBuZXcgQXJjZm91cigpfXZhciBybmdfcHNpemU9MjU2OwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCnZhciBybmdfc3RhdGU7dmFyIHJuZ19wb29sO3ZhciBybmdfcHB0cjtmdW5jdGlvbiBybmdfc2VlZF9pbnQoYSl7cm5nX3Bvb2xbcm5nX3BwdHIrK11ePWEmMjU1O3JuZ19wb29sW3JuZ19wcHRyKytdXj0oYT4+OCkmMjU1O3JuZ19wb29sW3JuZ19wcHRyKytdXj0oYT4+MTYpJjI1NTtybmdfcG9vbFtybmdfcHB0cisrXV49KGE+PjI0KSYyNTU7aWYocm5nX3BwdHI+PXJuZ19wc2l6ZSl7cm5nX3BwdHItPXJuZ19wc2l6ZX19ZnVuY3Rpb24gcm5nX3NlZWRfdGltZSgpe3JuZ19zZWVkX2ludChuZXcgRGF0ZSgpLmdldFRpbWUoKSl9aWYocm5nX3Bvb2w9PW51bGwpe3JuZ19wb29sPW5ldyBBcnJheSgpO3JuZ19wcHRyPTA7dmFyIHQ7aWYobmF2aWdhdG9yLmFwcE5hbWU9PSJOZXRzY2FwZSImJm5hdmlnYXRvci5hcHBWZXJzaW9uPCI1IiYmd2luZG93LmNyeXB0byl7dmFyIHo9d2luZG93LmNyeXB0by5yYW5kb20oMzIpO2Zvcih0PTA7dDx6Lmxlbmd0aDsrK3Qpe3JuZ19wb29sW3JuZ19wcHRyKytdPXouY2hhckNvZGVBdCh0KSYyNTV9fXdoaWxlKHJuZ19wcHRyPHJuZ19wc2l6ZSl7dD1NYXRoLmZsb29yKDY1NTM2Kk1hdGgucmFuZG9tKCkpO3JuZ19wb29sW3JuZ19wcHRyKytdPXQ+Pj44O3JuZ19wb29sW3JuZ19wcHRyKytdPXQmMjU1fXJuZ19wcHRyPTA7cm5nX3NlZWRfdGltZSgpfWZ1bmN0aW9uIHJuZ19nZXRfYnl0ZSgpe2lmKHJuZ19zdGF0ZT09bnVsbCl7cm5nX3NlZWRfdGltZSgpO3JuZ19zdGF0ZT1wcm5nX25ld3N0YXRlKCk7cm5nX3N0YXRlLmluaXQocm5nX3Bvb2wpO2ZvcihybmdfcHB0cj0wO3JuZ19wcHRyPHJuZ19wb29sLmxlbmd0aDsrK3JuZ19wcHRyKXtybmdfcG9vbFtybmdfcHB0cl09MH1ybmdfcHB0cj0wfXJldHVybiBybmdfc3RhdGUubmV4dCgpfWZ1bmN0aW9uIHJuZ19nZXRfYnl0ZXMoYil7dmFyIGE7Zm9yKGE9MDthPGIubGVuZ3RoOysrYSl7YlthXT1ybmdfZ2V0X2J5dGUoKX19ZnVuY3Rpb24gU2VjdXJlUmFuZG9tKCl7fVNlY3VyZVJhbmRvbS5wcm90b3R5cGUubmV4dEJ5dGVzPXJuZ19nZXRfYnl0ZXM7Ci8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuLwogKi8KZnVuY3Rpb24gcGFyc2VCaWdJbnQoYixhKXtyZXR1cm4gbmV3IEJpZ0ludGVnZXIoYixhKX1mdW5jdGlvbiBsaW5lYnJrKGMsZCl7dmFyIGE9IiI7dmFyIGI9MDt3aGlsZShiK2Q8Yy5sZW5ndGgpe2ErPWMuc3Vic3RyaW5nKGIsYitkKSsiXG4iO2IrPWR9cmV0dXJuIGErYy5zdWJzdHJpbmcoYixjLmxlbmd0aCl9ZnVuY3Rpb24gYnl0ZTJIZXgoYSl7aWYoYTwxNil7cmV0dXJuIjAiK2EudG9TdHJpbmcoMTYpfWVsc2V7cmV0dXJuIGEudG9TdHJpbmcoMTYpfX1mdW5jdGlvbiBwa2NzMXBhZDIoZSxoKXtpZihoPGUubGVuZ3RoKzExKXthbGVydCgiTWVzc2FnZSB0b28gbG9uZyBmb3IgUlNBIik7cmV0dXJuIG51bGx9dmFyIGc9bmV3IEFycmF5KCk7dmFyIGQ9ZS5sZW5ndGgtMTt3aGlsZShkPj0wJiZoPjApe3ZhciBmPWUuY2hhckNvZGVBdChkLS0pO2lmKGY8MTI4KXtnWy0taF09Zn1lbHNle2lmKChmPjEyNykmJihmPDIwNDgpKXtnWy0taF09KGYmNjMpfDEyODtnWy0taF09KGY+PjYpfDE5Mn1lbHNle2dbLS1oXT0oZiY2Myl8MTI4O2dbLS1oXT0oKGY+PjYpJjYzKXwxMjg7Z1stLWhdPShmPj4xMil8MjI0fX19Z1stLWhdPTA7dmFyIGI9bmV3IFNlY3VyZVJhbmRvbSgpO3ZhciBhPW5ldyBBcnJheSgpO3doaWxlKGg+Mil7YVswXT0wO3doaWxlKGFbMF09PTApe2IubmV4dEJ5dGVzKGEpfWdbLS1oXT1hWzBdfWdbLS1oXT0yO2dbLS1oXT0wO3JldHVybiBuZXcgQmlnSW50ZWdlcihnKX1mdW5jdGlvbiBvYWVwX21nZjFfYXJyKGMsYSxlKXt2YXIgYj0iIixkPTA7d2hpbGUoYi5sZW5ndGg8YSl7Yis9ZShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxjLmNvbmNhdChbKGQmNDI3ODE5MDA4MCk+PjI0LChkJjE2NzExNjgwKT4+MTYsKGQmNjUyODApPj44LGQmMjU1XSkpKTtkKz0xfXJldHVybiBifXZhciBTSEExX1NJWkU9MjA7ZnVuY3Rpb24gb2FlcF9wYWQobCxhLGMpe2lmKGwubGVuZ3RoKzIqU0hBMV9TSVpFKzI+YSl7dGhyb3ciTWVzc2FnZSB0b28gbG9uZyBmb3IgUlNBIn12YXIgaD0iIixkO2ZvcihkPTA7ZDxhLWwubGVuZ3RoLTIqU0hBMV9TSVpFLTI7ZCs9MSl7aCs9Ilx4MDAifXZhciBlPXJzdHJfc2hhMSgiIikraCsiXHgwMSIrbDt2YXIgZj1uZXcgQXJyYXkoU0hBMV9TSVpFKTtuZXcgU2VjdXJlUmFuZG9tKCkubmV4dEJ5dGVzKGYpO3ZhciBnPW9hZXBfbWdmMV9hcnIoZixlLmxlbmd0aCxjfHxyc3RyX3NoYTEpO3ZhciBrPVtdO2ZvcihkPTA7ZDxlLmxlbmd0aDtkKz0xKXtrW2RdPWUuY2hhckNvZGVBdChkKV5nLmNoYXJDb2RlQXQoZCl9dmFyIGo9b2FlcF9tZ2YxX2FycihrLGYubGVuZ3RoLHJzdHJfc2hhMSk7dmFyIGI9WzBdO2ZvcihkPTA7ZDxmLmxlbmd0aDtkKz0xKXtiW2QrMV09ZltkXV5qLmNoYXJDb2RlQXQoZCl9cmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGIuY29uY2F0KGspKX1mdW5jdGlvbiBSU0FLZXkoKXt0aGlzLm49bnVsbDt0aGlzLmU9MDt0aGlzLmQ9bnVsbDt0aGlzLnA9bnVsbDt0aGlzLnE9bnVsbDt0aGlzLmRtcDE9bnVsbDt0aGlzLmRtcTE9bnVsbDt0aGlzLmNvZWZmPW51bGx9ZnVuY3Rpb24gUlNBU2V0UHVibGljKGIsYSl7dGhpcy5pc1B1YmxpYz10cnVlO2lmKHR5cGVvZiBiIT09InN0cmluZyIpe3RoaXMubj1iO3RoaXMuZT1hfWVsc2V7aWYoYiE9bnVsbCYmYSE9bnVsbCYmYi5sZW5ndGg+MCYmYS5sZW5ndGg+MCl7dGhpcy5uPXBhcnNlQmlnSW50KGIsMTYpO3RoaXMuZT1wYXJzZUludChhLDE2KX1lbHNle2FsZXJ0KCJJbnZhbGlkIFJTQSBwdWJsaWMga2V5Iil9fX1mdW5jdGlvbiBSU0FEb1B1YmxpYyhhKXtyZXR1cm4gYS5tb2RQb3dJbnQodGhpcy5lLHRoaXMubil9ZnVuY3Rpb24gUlNBRW5jcnlwdChkKXt2YXIgYT1wa2NzMXBhZDIoZCwodGhpcy5uLmJpdExlbmd0aCgpKzcpPj4zKTtpZihhPT1udWxsKXtyZXR1cm4gbnVsbH12YXIgZT10aGlzLmRvUHVibGljKGEpO2lmKGU9PW51bGwpe3JldHVybiBudWxsfXZhciBiPWUudG9TdHJpbmcoMTYpO2lmKChiLmxlbmd0aCYxKT09MCl7cmV0dXJuIGJ9ZWxzZXtyZXR1cm4iMCIrYn19ZnVuY3Rpb24gUlNBRW5jcnlwdE9BRVAoZSxkKXt2YXIgYT1vYWVwX3BhZChlLCh0aGlzLm4uYml0TGVuZ3RoKCkrNyk+PjMsZCk7aWYoYT09bnVsbCl7cmV0dXJuIG51bGx9dmFyIGY9dGhpcy5kb1B1YmxpYyhhKTtpZihmPT1udWxsKXtyZXR1cm4gbnVsbH12YXIgYj1mLnRvU3RyaW5nKDE2KTtpZigoYi5sZW5ndGgmMSk9PTApe3JldHVybiBifWVsc2V7cmV0dXJuIjAiK2J9fVJTQUtleS5wcm90b3R5cGUuZG9QdWJsaWM9UlNBRG9QdWJsaWM7UlNBS2V5LnByb3RvdHlwZS5zZXRQdWJsaWM9UlNBU2V0UHVibGljO1JTQUtleS5wcm90b3R5cGUuZW5jcnlwdD1SU0FFbmNyeXB0O1JTQUtleS5wcm90b3R5cGUuZW5jcnlwdE9BRVA9UlNBRW5jcnlwdE9BRVA7UlNBS2V5LnByb3RvdHlwZS50eXBlPSJSU0EiOwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCmZ1bmN0aW9uIHBrY3MxdW5wYWQyKGcsail7dmFyIGE9Zy50b0J5dGVBcnJheSgpO3ZhciBmPTA7d2hpbGUoZjxhLmxlbmd0aCYmYVtmXT09MCl7KytmfWlmKGEubGVuZ3RoLWYhPWotMXx8YVtmXSE9Mil7cmV0dXJuIG51bGx9KytmO3doaWxlKGFbZl0hPTApe2lmKCsrZj49YS5sZW5ndGgpe3JldHVybiBudWxsfX12YXIgZT0iIjt3aGlsZSgrK2Y8YS5sZW5ndGgpe3ZhciBoPWFbZl0mMjU1O2lmKGg8MTI4KXtlKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGgpfWVsc2V7aWYoKGg+MTkxKSYmKGg8MjI0KSl7ZSs9U3RyaW5nLmZyb21DaGFyQ29kZSgoKGgmMzEpPDw2KXwoYVtmKzFdJjYzKSk7KytmfWVsc2V7ZSs9U3RyaW5nLmZyb21DaGFyQ29kZSgoKGgmMTUpPDwxMil8KChhW2YrMV0mNjMpPDw2KXwoYVtmKzJdJjYzKSk7Zis9Mn19fXJldHVybiBlfWZ1bmN0aW9uIG9hZXBfbWdmMV9zdHIoYyxhLGUpe3ZhciBiPSIiLGQ9MDt3aGlsZShiLmxlbmd0aDxhKXtiKz1lKGMrU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsWyhkJjQyNzgxOTAwODApPj4yNCwoZCYxNjcxMTY4MCk+PjE2LChkJjY1MjgwKT4+OCxkJjI1NV0pKTtkKz0xfXJldHVybiBifXZhciBTSEExX1NJWkU9MjA7ZnVuY3Rpb24gb2FlcF91bnBhZChsLGIsZSl7bD1sLnRvQnl0ZUFycmF5KCk7dmFyIGY7Zm9yKGY9MDtmPGwubGVuZ3RoO2YrPTEpe2xbZl0mPTI1NX13aGlsZShsLmxlbmd0aDxiKXtsLnVuc2hpZnQoMCl9bD1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxsKTtpZihsLmxlbmd0aDwyKlNIQTFfU0laRSsyKXt0aHJvdyJDaXBoZXIgdG9vIHNob3J0In12YXIgYz1sLnN1YnN0cigxLFNIQTFfU0laRSk7dmFyIG89bC5zdWJzdHIoU0hBMV9TSVpFKzEpO3ZhciBtPW9hZXBfbWdmMV9zdHIobyxTSEExX1NJWkUsZXx8cnN0cl9zaGExKTt2YXIgaD1bXSxmO2ZvcihmPTA7ZjxjLmxlbmd0aDtmKz0xKXtoW2ZdPWMuY2hhckNvZGVBdChmKV5tLmNoYXJDb2RlQXQoZil9dmFyIGo9b2FlcF9tZ2YxX3N0cihTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxoKSxsLmxlbmd0aC1TSEExX1NJWkUscnN0cl9zaGExKTt2YXIgZz1bXTtmb3IoZj0wO2Y8by5sZW5ndGg7Zis9MSl7Z1tmXT1vLmNoYXJDb2RlQXQoZileai5jaGFyQ29kZUF0KGYpfWc9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZyk7aWYoZy5zdWJzdHIoMCxTSEExX1NJWkUpIT09cnN0cl9zaGExKCIiKSl7dGhyb3ciSGFzaCBtaXNtYXRjaCJ9Zz1nLnN1YnN0cihTSEExX1NJWkUpO3ZhciBhPWcuaW5kZXhPZigiXHgwMSIpO3ZhciBrPShhIT0tMSk/Zy5zdWJzdHIoMCxhKS5sYXN0SW5kZXhPZigiXHgwMCIpOi0xO2lmKGsrMSE9YSl7dGhyb3ciTWFsZm9ybWVkIGRhdGEifXJldHVybiBnLnN1YnN0cihhKzEpfWZ1bmN0aW9uIFJTQVNldFByaXZhdGUoYyxhLGIpe3RoaXMuaXNQcml2YXRlPXRydWU7aWYodHlwZW9mIGMhPT0ic3RyaW5nIil7dGhpcy5uPWM7dGhpcy5lPWE7dGhpcy5kPWJ9ZWxzZXtpZihjIT1udWxsJiZhIT1udWxsJiZjLmxlbmd0aD4wJiZhLmxlbmd0aD4wKXt0aGlzLm49cGFyc2VCaWdJbnQoYywxNik7dGhpcy5lPXBhcnNlSW50KGEsMTYpO3RoaXMuZD1wYXJzZUJpZ0ludChiLDE2KX1lbHNle2FsZXJ0KCJJbnZhbGlkIFJTQSBwcml2YXRlIGtleSIpfX19ZnVuY3Rpb24gUlNBU2V0UHJpdmF0ZUV4KGcsZCxlLGMsYixhLGgsZil7dGhpcy5pc1ByaXZhdGU9dHJ1ZTtpZihnPT1udWxsKXt0aHJvdyJSU0FTZXRQcml2YXRlRXggTiA9PSBudWxsIn1pZihkPT1udWxsKXt0aHJvdyJSU0FTZXRQcml2YXRlRXggRSA9PSBudWxsIn1pZihnLmxlbmd0aD09MCl7dGhyb3ciUlNBU2V0UHJpdmF0ZUV4IE4ubGVuZ3RoID09IDAifWlmKGQubGVuZ3RoPT0wKXt0aHJvdyJSU0FTZXRQcml2YXRlRXggRS5sZW5ndGggPT0gMCJ9aWYoZyE9bnVsbCYmZCE9bnVsbCYmZy5sZW5ndGg+MCYmZC5sZW5ndGg+MCl7dGhpcy5uPXBhcnNlQmlnSW50KGcsMTYpO3RoaXMuZT1wYXJzZUludChkLDE2KTt0aGlzLmQ9cGFyc2VCaWdJbnQoZSwxNik7dGhpcy5wPXBhcnNlQmlnSW50KGMsMTYpO3RoaXMucT1wYXJzZUJpZ0ludChiLDE2KTt0aGlzLmRtcDE9cGFyc2VCaWdJbnQoYSwxNik7dGhpcy5kbXExPXBhcnNlQmlnSW50KGgsMTYpO3RoaXMuY29lZmY9cGFyc2VCaWdJbnQoZiwxNil9ZWxzZXthbGVydCgiSW52YWxpZCBSU0EgcHJpdmF0ZSBrZXkgaW4gUlNBU2V0UHJpdmF0ZUV4Iil9fWZ1bmN0aW9uIFJTQUdlbmVyYXRlKGIsaSl7dmFyIGE9bmV3IFNlY3VyZVJhbmRvbSgpO3ZhciBmPWI+PjE7dGhpcy5lPXBhcnNlSW50KGksMTYpO3ZhciBjPW5ldyBCaWdJbnRlZ2VyKGksMTYpO2Zvcig7Oyl7Zm9yKDs7KXt0aGlzLnA9bmV3IEJpZ0ludGVnZXIoYi1mLDEsYSk7aWYodGhpcy5wLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKS5nY2QoYykuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKT09MCYmdGhpcy5wLmlzUHJvYmFibGVQcmltZSgxMCkpe2JyZWFrfX1mb3IoOzspe3RoaXMucT1uZXcgQmlnSW50ZWdlcihmLDEsYSk7aWYodGhpcy5xLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKS5nY2QoYykuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKT09MCYmdGhpcy5xLmlzUHJvYmFibGVQcmltZSgxMCkpe2JyZWFrfX1pZih0aGlzLnAuY29tcGFyZVRvKHRoaXMucSk8PTApe3ZhciBoPXRoaXMucDt0aGlzLnA9dGhpcy5xO3RoaXMucT1ofXZhciBnPXRoaXMucC5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSk7dmFyIGQ9dGhpcy5xLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKTt2YXIgZT1nLm11bHRpcGx5KGQpO2lmKGUuZ2NkKGMpLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSk9PTApe3RoaXMubj10aGlzLnAubXVsdGlwbHkodGhpcy5xKTt0aGlzLmQ9Yy5tb2RJbnZlcnNlKGUpO3RoaXMuZG1wMT10aGlzLmQubW9kKGcpO3RoaXMuZG1xMT10aGlzLmQubW9kKGQpO3RoaXMuY29lZmY9dGhpcy5xLm1vZEludmVyc2UodGhpcy5wKTticmVha319fWZ1bmN0aW9uIFJTQURvUHJpdmF0ZShhKXtpZih0aGlzLnA9PW51bGx8fHRoaXMucT09bnVsbCl7cmV0dXJuIGEubW9kUG93KHRoaXMuZCx0aGlzLm4pfXZhciBjPWEubW9kKHRoaXMucCkubW9kUG93KHRoaXMuZG1wMSx0aGlzLnApO3ZhciBiPWEubW9kKHRoaXMucSkubW9kUG93KHRoaXMuZG1xMSx0aGlzLnEpO3doaWxlKGMuY29tcGFyZVRvKGIpPDApe2M9Yy5hZGQodGhpcy5wKX1yZXR1cm4gYy5zdWJ0cmFjdChiKS5tdWx0aXBseSh0aGlzLmNvZWZmKS5tb2QodGhpcy5wKS5tdWx0aXBseSh0aGlzLnEpLmFkZChiKX1mdW5jdGlvbiBSU0FEZWNyeXB0KGIpe3ZhciBkPXBhcnNlQmlnSW50KGIsMTYpO3ZhciBhPXRoaXMuZG9Qcml2YXRlKGQpO2lmKGE9PW51bGwpe3JldHVybiBudWxsfXJldHVybiBwa2NzMXVucGFkMihhLCh0aGlzLm4uYml0TGVuZ3RoKCkrNyk+PjMpfWZ1bmN0aW9uIFJTQURlY3J5cHRPQUVQKGQsYil7dmFyIGU9cGFyc2VCaWdJbnQoZCwxNik7dmFyIGE9dGhpcy5kb1ByaXZhdGUoZSk7aWYoYT09bnVsbCl7cmV0dXJuIG51bGx9cmV0dXJuIG9hZXBfdW5wYWQoYSwodGhpcy5uLmJpdExlbmd0aCgpKzcpPj4zLGIpfVJTQUtleS5wcm90b3R5cGUuZG9Qcml2YXRlPVJTQURvUHJpdmF0ZTtSU0FLZXkucHJvdG90eXBlLnNldFByaXZhdGU9UlNBU2V0UHJpdmF0ZTtSU0FLZXkucHJvdG90eXBlLnNldFByaXZhdGVFeD1SU0FTZXRQcml2YXRlRXg7UlNBS2V5LnByb3RvdHlwZS5nZW5lcmF0ZT1SU0FHZW5lcmF0ZTtSU0FLZXkucHJvdG90eXBlLmRlY3J5cHQ9UlNBRGVjcnlwdDtSU0FLZXkucHJvdG90eXBlLmRlY3J5cHRPQUVQPVJTQURlY3J5cHRPQUVQOwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCmZ1bmN0aW9uIEVDRmllbGRFbGVtZW50RnAoYixhKXt0aGlzLng9YTt0aGlzLnE9Yn1mdW5jdGlvbiBmZUZwRXF1YWxzKGEpe2lmKGE9PXRoaXMpe3JldHVybiB0cnVlfXJldHVybih0aGlzLnEuZXF1YWxzKGEucSkmJnRoaXMueC5lcXVhbHMoYS54KSl9ZnVuY3Rpb24gZmVGcFRvQmlnSW50ZWdlcigpe3JldHVybiB0aGlzLnh9ZnVuY3Rpb24gZmVGcE5lZ2F0ZSgpe3JldHVybiBuZXcgRUNGaWVsZEVsZW1lbnRGcCh0aGlzLnEsdGhpcy54Lm5lZ2F0ZSgpLm1vZCh0aGlzLnEpKX1mdW5jdGlvbiBmZUZwQWRkKGEpe3JldHVybiBuZXcgRUNGaWVsZEVsZW1lbnRGcCh0aGlzLnEsdGhpcy54LmFkZChhLnRvQmlnSW50ZWdlcigpKS5tb2QodGhpcy5xKSl9ZnVuY3Rpb24gZmVGcFN1YnRyYWN0KGEpe3JldHVybiBuZXcgRUNGaWVsZEVsZW1lbnRGcCh0aGlzLnEsdGhpcy54LnN1YnRyYWN0KGEudG9CaWdJbnRlZ2VyKCkpLm1vZCh0aGlzLnEpKX1mdW5jdGlvbiBmZUZwTXVsdGlwbHkoYSl7cmV0dXJuIG5ldyBFQ0ZpZWxkRWxlbWVudEZwKHRoaXMucSx0aGlzLngubXVsdGlwbHkoYS50b0JpZ0ludGVnZXIoKSkubW9kKHRoaXMucSkpfWZ1bmN0aW9uIGZlRnBTcXVhcmUoKXtyZXR1cm4gbmV3IEVDRmllbGRFbGVtZW50RnAodGhpcy5xLHRoaXMueC5zcXVhcmUoKS5tb2QodGhpcy5xKSl9ZnVuY3Rpb24gZmVGcERpdmlkZShhKXtyZXR1cm4gbmV3IEVDRmllbGRFbGVtZW50RnAodGhpcy5xLHRoaXMueC5tdWx0aXBseShhLnRvQmlnSW50ZWdlcigpLm1vZEludmVyc2UodGhpcy5xKSkubW9kKHRoaXMucSkpfUVDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLmVxdWFscz1mZUZwRXF1YWxzO0VDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLnRvQmlnSW50ZWdlcj1mZUZwVG9CaWdJbnRlZ2VyO0VDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLm5lZ2F0ZT1mZUZwTmVnYXRlO0VDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLmFkZD1mZUZwQWRkO0VDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLnN1YnRyYWN0PWZlRnBTdWJ0cmFjdDtFQ0ZpZWxkRWxlbWVudEZwLnByb3RvdHlwZS5tdWx0aXBseT1mZUZwTXVsdGlwbHk7RUNGaWVsZEVsZW1lbnRGcC5wcm90b3R5cGUuc3F1YXJlPWZlRnBTcXVhcmU7RUNGaWVsZEVsZW1lbnRGcC5wcm90b3R5cGUuZGl2aWRlPWZlRnBEaXZpZGU7ZnVuY3Rpb24gRUNQb2ludEZwKGMsYSxkLGIpe3RoaXMuY3VydmU9Yzt0aGlzLng9YTt0aGlzLnk9ZDtpZihiPT1udWxsKXt0aGlzLno9QmlnSW50ZWdlci5PTkV9ZWxzZXt0aGlzLno9Yn10aGlzLnppbnY9bnVsbH1mdW5jdGlvbiBwb2ludEZwR2V0WCgpe2lmKHRoaXMuemludj09bnVsbCl7dGhpcy56aW52PXRoaXMuei5tb2RJbnZlcnNlKHRoaXMuY3VydmUucSl9cmV0dXJuIHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIodGhpcy54LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMuemludikubW9kKHRoaXMuY3VydmUucSkpfWZ1bmN0aW9uIHBvaW50RnBHZXRZKCl7aWYodGhpcy56aW52PT1udWxsKXt0aGlzLnppbnY9dGhpcy56Lm1vZEludmVyc2UodGhpcy5jdXJ2ZS5xKX1yZXR1cm4gdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcih0aGlzLnkudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56aW52KS5tb2QodGhpcy5jdXJ2ZS5xKSl9ZnVuY3Rpb24gcG9pbnRGcEVxdWFscyhhKXtpZihhPT10aGlzKXtyZXR1cm4gdHJ1ZX1pZih0aGlzLmlzSW5maW5pdHkoKSl7cmV0dXJuIGEuaXNJbmZpbml0eSgpfWlmKGEuaXNJbmZpbml0eSgpKXtyZXR1cm4gdGhpcy5pc0luZmluaXR5KCl9dmFyIGMsYjtjPWEueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseShhLnopKS5tb2QodGhpcy5jdXJ2ZS5xKTtpZighYy5lcXVhbHMoQmlnSW50ZWdlci5aRVJPKSl7cmV0dXJuIGZhbHNlfWI9YS54LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QodGhpcy54LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KGEueikpLm1vZCh0aGlzLmN1cnZlLnEpO3JldHVybiBiLmVxdWFscyhCaWdJbnRlZ2VyLlpFUk8pfWZ1bmN0aW9uIHBvaW50RnBJc0luZmluaXR5KCl7aWYoKHRoaXMueD09bnVsbCkmJih0aGlzLnk9PW51bGwpKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gdGhpcy56LmVxdWFscyhCaWdJbnRlZ2VyLlpFUk8pJiYhdGhpcy55LnRvQmlnSW50ZWdlcigpLmVxdWFscyhCaWdJbnRlZ2VyLlpFUk8pfWZ1bmN0aW9uIHBvaW50RnBOZWdhdGUoKXtyZXR1cm4gbmV3IEVDUG9pbnRGcCh0aGlzLmN1cnZlLHRoaXMueCx0aGlzLnkubmVnYXRlKCksdGhpcy56KX1mdW5jdGlvbiBwb2ludEZwQWRkKGwpe2lmKHRoaXMuaXNJbmZpbml0eSgpKXtyZXR1cm4gbH1pZihsLmlzSW5maW5pdHkoKSl7cmV0dXJuIHRoaXN9dmFyIHA9bC55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QodGhpcy55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KGwueikpLm1vZCh0aGlzLmN1cnZlLnEpO3ZhciBvPWwueC50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueC50b0JpZ0ludGVnZXIoKS5tdWx0aXBseShsLnopKS5tb2QodGhpcy5jdXJ2ZS5xKTtpZihCaWdJbnRlZ2VyLlpFUk8uZXF1YWxzKG8pKXtpZihCaWdJbnRlZ2VyLlpFUk8uZXF1YWxzKHApKXtyZXR1cm4gdGhpcy50d2ljZSgpfXJldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCl9dmFyIGo9bmV3IEJpZ0ludGVnZXIoIjMiKTt2YXIgZT10aGlzLngudG9CaWdJbnRlZ2VyKCk7dmFyIG49dGhpcy55LnRvQmlnSW50ZWdlcigpO3ZhciBjPWwueC50b0JpZ0ludGVnZXIoKTt2YXIgaz1sLnkudG9CaWdJbnRlZ2VyKCk7dmFyIG09by5zcXVhcmUoKTt2YXIgaT1tLm11bHRpcGx5KG8pO3ZhciBkPWUubXVsdGlwbHkobSk7dmFyIGc9cC5zcXVhcmUoKS5tdWx0aXBseSh0aGlzLnopO3ZhciBhPWcuc3VidHJhY3QoZC5zaGlmdExlZnQoMSkpLm11bHRpcGx5KGwueikuc3VidHJhY3QoaSkubXVsdGlwbHkobykubW9kKHRoaXMuY3VydmUucSk7dmFyIGg9ZC5tdWx0aXBseShqKS5tdWx0aXBseShwKS5zdWJ0cmFjdChuLm11bHRpcGx5KGkpKS5zdWJ0cmFjdChnLm11bHRpcGx5KHApKS5tdWx0aXBseShsLnopLmFkZChwLm11bHRpcGx5KGkpKS5tb2QodGhpcy5jdXJ2ZS5xKTt2YXIgZj1pLm11bHRpcGx5KHRoaXMueikubXVsdGlwbHkobC56KS5tb2QodGhpcy5jdXJ2ZS5xKTtyZXR1cm4gbmV3IEVDUG9pbnRGcCh0aGlzLmN1cnZlLHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIoYSksdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcihoKSxmKX1mdW5jdGlvbiBwb2ludEZwVHdpY2UoKXtpZih0aGlzLmlzSW5maW5pdHkoKSl7cmV0dXJuIHRoaXN9aWYodGhpcy55LnRvQmlnSW50ZWdlcigpLnNpZ251bSgpPT0wKXtyZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpfXZhciBnPW5ldyBCaWdJbnRlZ2VyKCIzIik7dmFyIGM9dGhpcy54LnRvQmlnSW50ZWdlcigpO3ZhciBoPXRoaXMueS50b0JpZ0ludGVnZXIoKTt2YXIgZT1oLm11bHRpcGx5KHRoaXMueik7dmFyIGo9ZS5tdWx0aXBseShoKS5tb2QodGhpcy5jdXJ2ZS5xKTt2YXIgaT10aGlzLmN1cnZlLmEudG9CaWdJbnRlZ2VyKCk7dmFyIGs9Yy5zcXVhcmUoKS5tdWx0aXBseShnKTtpZighQmlnSW50ZWdlci5aRVJPLmVxdWFscyhpKSl7az1rLmFkZCh0aGlzLnouc3F1YXJlKCkubXVsdGlwbHkoaSkpfWs9ay5tb2QodGhpcy5jdXJ2ZS5xKTt2YXIgYj1rLnNxdWFyZSgpLnN1YnRyYWN0KGMuc2hpZnRMZWZ0KDMpLm11bHRpcGx5KGopKS5zaGlmdExlZnQoMSkubXVsdGlwbHkoZSkubW9kKHRoaXMuY3VydmUucSk7dmFyIGY9ay5tdWx0aXBseShnKS5tdWx0aXBseShjKS5zdWJ0cmFjdChqLnNoaWZ0TGVmdCgxKSkuc2hpZnRMZWZ0KDIpLm11bHRpcGx5KGopLnN1YnRyYWN0KGsuc3F1YXJlKCkubXVsdGlwbHkoaykpLm1vZCh0aGlzLmN1cnZlLnEpO3ZhciBkPWUuc3F1YXJlKCkubXVsdGlwbHkoZSkuc2hpZnRMZWZ0KDMpLm1vZCh0aGlzLmN1cnZlLnEpO3JldHVybiBuZXcgRUNQb2ludEZwKHRoaXMuY3VydmUsdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcihiKSx0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKGYpLGQpfWZ1bmN0aW9uIHBvaW50RnBNdWx0aXBseShiKXtpZih0aGlzLmlzSW5maW5pdHkoKSl7cmV0dXJuIHRoaXN9aWYoYi5zaWdudW0oKT09MCl7cmV0dXJuIHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKX12YXIgZz1iO3ZhciBmPWcubXVsdGlwbHkobmV3IEJpZ0ludGVnZXIoIjMiKSk7dmFyIGw9dGhpcy5uZWdhdGUoKTt2YXIgZD10aGlzO3ZhciBjO2ZvcihjPWYuYml0TGVuZ3RoKCktMjtjPjA7LS1jKXtkPWQudHdpY2UoKTt2YXIgYT1mLnRlc3RCaXQoYyk7dmFyIGo9Zy50ZXN0Qml0KGMpO2lmKGEhPWope2Q9ZC5hZGQoYT90aGlzOmwpfX1yZXR1cm4gZH1mdW5jdGlvbiBwb2ludEZwTXVsdGlwbHlUd28oYyxhLGIpe3ZhciBkO2lmKGMuYml0TGVuZ3RoKCk+Yi5iaXRMZW5ndGgoKSl7ZD1jLmJpdExlbmd0aCgpLTF9ZWxzZXtkPWIuYml0TGVuZ3RoKCktMX12YXIgZj10aGlzLmN1cnZlLmdldEluZmluaXR5KCk7dmFyIGU9dGhpcy5hZGQoYSk7d2hpbGUoZD49MCl7Zj1mLnR3aWNlKCk7aWYoYy50ZXN0Qml0KGQpKXtpZihiLnRlc3RCaXQoZCkpe2Y9Zi5hZGQoZSl9ZWxzZXtmPWYuYWRkKHRoaXMpfX1lbHNle2lmKGIudGVzdEJpdChkKSl7Zj1mLmFkZChhKX19LS1kfXJldHVybiBmfUVDUG9pbnRGcC5wcm90b3R5cGUuZ2V0WD1wb2ludEZwR2V0WDtFQ1BvaW50RnAucHJvdG90eXBlLmdldFk9cG9pbnRGcEdldFk7RUNQb2ludEZwLnByb3RvdHlwZS5lcXVhbHM9cG9pbnRGcEVxdWFscztFQ1BvaW50RnAucHJvdG90eXBlLmlzSW5maW5pdHk9cG9pbnRGcElzSW5maW5pdHk7RUNQb2ludEZwLnByb3RvdHlwZS5uZWdhdGU9cG9pbnRGcE5lZ2F0ZTtFQ1BvaW50RnAucHJvdG90eXBlLmFkZD1wb2ludEZwQWRkO0VDUG9pbnRGcC5wcm90b3R5cGUudHdpY2U9cG9pbnRGcFR3aWNlO0VDUG9pbnRGcC5wcm90b3R5cGUubXVsdGlwbHk9cG9pbnRGcE11bHRpcGx5O0VDUG9pbnRGcC5wcm90b3R5cGUubXVsdGlwbHlUd289cG9pbnRGcE11bHRpcGx5VHdvO2Z1bmN0aW9uIEVDQ3VydmVGcChlLGQsYyl7dGhpcy5xPWU7dGhpcy5hPXRoaXMuZnJvbUJpZ0ludGVnZXIoZCk7dGhpcy5iPXRoaXMuZnJvbUJpZ0ludGVnZXIoYyk7dGhpcy5pbmZpbml0eT1uZXcgRUNQb2ludEZwKHRoaXMsbnVsbCxudWxsKX1mdW5jdGlvbiBjdXJ2ZUZwR2V0USgpe3JldHVybiB0aGlzLnF9ZnVuY3Rpb24gY3VydmVGcEdldEEoKXtyZXR1cm4gdGhpcy5hfWZ1bmN0aW9uIGN1cnZlRnBHZXRCKCl7cmV0dXJuIHRoaXMuYn1mdW5jdGlvbiBjdXJ2ZUZwRXF1YWxzKGEpe2lmKGE9PXRoaXMpe3JldHVybiB0cnVlfXJldHVybih0aGlzLnEuZXF1YWxzKGEucSkmJnRoaXMuYS5lcXVhbHMoYS5hKSYmdGhpcy5iLmVxdWFscyhhLmIpKX1mdW5jdGlvbiBjdXJ2ZUZwR2V0SW5maW5pdHkoKXtyZXR1cm4gdGhpcy5pbmZpbml0eX1mdW5jdGlvbiBjdXJ2ZUZwRnJvbUJpZ0ludGVnZXIoYSl7cmV0dXJuIG5ldyBFQ0ZpZWxkRWxlbWVudEZwKHRoaXMucSxhKX1mdW5jdGlvbiBjdXJ2ZUZwRGVjb2RlUG9pbnRIZXgoZCl7c3dpdGNoKHBhcnNlSW50KGQuc3Vic3RyKDAsMiksMTYpKXtjYXNlIDA6cmV0dXJuIHRoaXMuaW5maW5pdHk7Y2FzZSAyOmNhc2UgMzpyZXR1cm4gbnVsbDtjYXNlIDQ6Y2FzZSA2OmNhc2UgNzp2YXIgYT0oZC5sZW5ndGgtMikvMjt2YXIgYz1kLnN1YnN0cigyLGEpO3ZhciBiPWQuc3Vic3RyKGErMixhKTtyZXR1cm4gbmV3IEVDUG9pbnRGcCh0aGlzLHRoaXMuZnJvbUJpZ0ludGVnZXIobmV3IEJpZ0ludGVnZXIoYywxNikpLHRoaXMuZnJvbUJpZ0ludGVnZXIobmV3IEJpZ0ludGVnZXIoYiwxNikpKTtkZWZhdWx0OnJldHVybiBudWxsfX1FQ0N1cnZlRnAucHJvdG90eXBlLmdldFE9Y3VydmVGcEdldFE7RUNDdXJ2ZUZwLnByb3RvdHlwZS5nZXRBPWN1cnZlRnBHZXRBO0VDQ3VydmVGcC5wcm90b3R5cGUuZ2V0Qj1jdXJ2ZUZwR2V0QjtFQ0N1cnZlRnAucHJvdG90eXBlLmVxdWFscz1jdXJ2ZUZwRXF1YWxzO0VDQ3VydmVGcC5wcm90b3R5cGUuZ2V0SW5maW5pdHk9Y3VydmVGcEdldEluZmluaXR5O0VDQ3VydmVGcC5wcm90b3R5cGUuZnJvbUJpZ0ludGVnZXI9Y3VydmVGcEZyb21CaWdJbnRlZ2VyO0VDQ3VydmVGcC5wcm90b3R5cGUuZGVjb2RlUG9pbnRIZXg9Y3VydmVGcERlY29kZVBvaW50SGV4OwovKiEgKGMpIFN0ZWZhbiBUaG9tYXMgfCBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbmpzL2JpdGNvaW5qcy1saWIKICovCkVDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLmdldEJ5dGVMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5mbG9vcigodGhpcy50b0JpZ0ludGVnZXIoKS5iaXRMZW5ndGgoKSs3KS84KX07RUNQb2ludEZwLnByb3RvdHlwZS5nZXRFbmNvZGVkPWZ1bmN0aW9uKGMpe3ZhciBkPWZ1bmN0aW9uKGgsZil7dmFyIGc9aC50b0J5dGVBcnJheVVuc2lnbmVkKCk7aWYoZjxnLmxlbmd0aCl7Zz1nLnNsaWNlKGcubGVuZ3RoLWYpfWVsc2V7d2hpbGUoZj5nLmxlbmd0aCl7Zy51bnNoaWZ0KDApfX1yZXR1cm4gZ307dmFyIGE9dGhpcy5nZXRYKCkudG9CaWdJbnRlZ2VyKCk7dmFyIGU9dGhpcy5nZXRZKCkudG9CaWdJbnRlZ2VyKCk7dmFyIGI9ZChhLDMyKTtpZihjKXtpZihlLmlzRXZlbigpKXtiLnVuc2hpZnQoMil9ZWxzZXtiLnVuc2hpZnQoMyl9fWVsc2V7Yi51bnNoaWZ0KDQpO2I9Yi5jb25jYXQoZChlLDMyKSl9cmV0dXJuIGJ9O0VDUG9pbnRGcC5kZWNvZGVGcm9tPWZ1bmN0aW9uKGcsYyl7dmFyIGY9Y1swXTt2YXIgZT1jLmxlbmd0aC0xO3ZhciBkPWMuc2xpY2UoMSwxK2UvMik7dmFyIGI9Yy5zbGljZSgxK2UvMiwxK2UpO2QudW5zaGlmdCgwKTtiLnVuc2hpZnQoMCk7dmFyIGE9bmV3IEJpZ0ludGVnZXIoZCk7dmFyIGg9bmV3IEJpZ0ludGVnZXIoYik7cmV0dXJuIG5ldyBFQ1BvaW50RnAoZyxnLmZyb21CaWdJbnRlZ2VyKGEpLGcuZnJvbUJpZ0ludGVnZXIoaCkpfTtFQ1BvaW50RnAuZGVjb2RlRnJvbUhleD1mdW5jdGlvbihnLGMpe3ZhciBmPWMuc3Vic3RyKDAsMik7dmFyIGU9Yy5sZW5ndGgtMjt2YXIgZD1jLnN1YnN0cigyLGUvMik7dmFyIGI9Yy5zdWJzdHIoMitlLzIsZS8yKTt2YXIgYT1uZXcgQmlnSW50ZWdlcihkLDE2KTt2YXIgaD1uZXcgQmlnSW50ZWdlcihiLDE2KTtyZXR1cm4gbmV3IEVDUG9pbnRGcChnLGcuZnJvbUJpZ0ludGVnZXIoYSksZy5mcm9tQmlnSW50ZWdlcihoKSl9O0VDUG9pbnRGcC5wcm90b3R5cGUuYWRkMkQ9ZnVuY3Rpb24oYyl7aWYodGhpcy5pc0luZmluaXR5KCkpe3JldHVybiBjfWlmKGMuaXNJbmZpbml0eSgpKXtyZXR1cm4gdGhpc31pZih0aGlzLnguZXF1YWxzKGMueCkpe2lmKHRoaXMueS5lcXVhbHMoYy55KSl7cmV0dXJuIHRoaXMudHdpY2UoKX1yZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpfXZhciBnPWMueC5zdWJ0cmFjdCh0aGlzLngpO3ZhciBlPWMueS5zdWJ0cmFjdCh0aGlzLnkpO3ZhciBhPWUuZGl2aWRlKGcpO3ZhciBkPWEuc3F1YXJlKCkuc3VidHJhY3QodGhpcy54KS5zdWJ0cmFjdChjLngpO3ZhciBmPWEubXVsdGlwbHkodGhpcy54LnN1YnRyYWN0KGQpKS5zdWJ0cmFjdCh0aGlzLnkpO3JldHVybiBuZXcgRUNQb2ludEZwKHRoaXMuY3VydmUsZCxmKX07RUNQb2ludEZwLnByb3RvdHlwZS50d2ljZTJEPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0luZmluaXR5KCkpe3JldHVybiB0aGlzfWlmKHRoaXMueS50b0JpZ0ludGVnZXIoKS5zaWdudW0oKT09MCl7cmV0dXJuIHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKX12YXIgYj10aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKEJpZ0ludGVnZXIudmFsdWVPZigyKSk7dmFyIGU9dGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcihCaWdJbnRlZ2VyLnZhbHVlT2YoMykpO3ZhciBhPXRoaXMueC5zcXVhcmUoKS5tdWx0aXBseShlKS5hZGQodGhpcy5jdXJ2ZS5hKS5kaXZpZGUodGhpcy55Lm11bHRpcGx5KGIpKTt2YXIgYz1hLnNxdWFyZSgpLnN1YnRyYWN0KHRoaXMueC5tdWx0aXBseShiKSk7dmFyIGQ9YS5tdWx0aXBseSh0aGlzLnguc3VidHJhY3QoYykpLnN1YnRyYWN0KHRoaXMueSk7cmV0dXJuIG5ldyBFQ1BvaW50RnAodGhpcy5jdXJ2ZSxjLGQpfTtFQ1BvaW50RnAucHJvdG90eXBlLm11bHRpcGx5MkQ9ZnVuY3Rpb24oYil7aWYodGhpcy5pc0luZmluaXR5KCkpe3JldHVybiB0aGlzfWlmKGIuc2lnbnVtKCk9PTApe3JldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCl9dmFyIGc9Yjt2YXIgZj1nLm11bHRpcGx5KG5ldyBCaWdJbnRlZ2VyKCIzIikpO3ZhciBsPXRoaXMubmVnYXRlKCk7dmFyIGQ9dGhpczt2YXIgYztmb3IoYz1mLmJpdExlbmd0aCgpLTI7Yz4wOy0tYyl7ZD1kLnR3aWNlKCk7dmFyIGE9Zi50ZXN0Qml0KGMpO3ZhciBqPWcudGVzdEJpdChjKTtpZihhIT1qKXtkPWQuYWRkMkQoYT90aGlzOmwpfX1yZXR1cm4gZH07RUNQb2ludEZwLnByb3RvdHlwZS5pc09uQ3VydmU9ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmdldFgoKS50b0JpZ0ludGVnZXIoKTt2YXIgaT10aGlzLmdldFkoKS50b0JpZ0ludGVnZXIoKTt2YXIgZj10aGlzLmN1cnZlLmdldEEoKS50b0JpZ0ludGVnZXIoKTt2YXIgYz10aGlzLmN1cnZlLmdldEIoKS50b0JpZ0ludGVnZXIoKTt2YXIgaD10aGlzLmN1cnZlLmdldFEoKTt2YXIgZT1pLm11bHRpcGx5KGkpLm1vZChoKTt2YXIgZz1kLm11bHRpcGx5KGQpLm11bHRpcGx5KGQpLmFkZChmLm11bHRpcGx5KGQpKS5hZGQoYykubW9kKGgpO3JldHVybiBlLmVxdWFscyhnKX07RUNQb2ludEZwLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiIoIit0aGlzLmdldFgoKS50b0JpZ0ludGVnZXIoKS50b1N0cmluZygpKyIsIit0aGlzLmdldFkoKS50b0JpZ0ludGVnZXIoKS50b1N0cmluZygpKyIpIn07RUNQb2ludEZwLnByb3RvdHlwZS52YWxpZGF0ZT1mdW5jdGlvbigpe3ZhciBjPXRoaXMuY3VydmUuZ2V0USgpO2lmKHRoaXMuaXNJbmZpbml0eSgpKXt0aHJvdyBuZXcgRXJyb3IoIlBvaW50IGlzIGF0IGluZmluaXR5LiIpfXZhciBhPXRoaXMuZ2V0WCgpLnRvQmlnSW50ZWdlcigpO3ZhciBiPXRoaXMuZ2V0WSgpLnRvQmlnSW50ZWdlcigpO2lmKGEuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKTwwfHxhLmNvbXBhcmVUbyhjLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKSk+MCl7dGhyb3cgbmV3IEVycm9yKCJ4IGNvb3JkaW5hdGUgb3V0IG9mIGJvdW5kcyIpfWlmKGIuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKTwwfHxiLmNvbXBhcmVUbyhjLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKSk+MCl7dGhyb3cgbmV3IEVycm9yKCJ5IGNvb3JkaW5hdGUgb3V0IG9mIGJvdW5kcyIpfWlmKCF0aGlzLmlzT25DdXJ2ZSgpKXt0aHJvdyBuZXcgRXJyb3IoIlBvaW50IGlzIG5vdCBvbiB0aGUgY3VydmUuIil9aWYodGhpcy5tdWx0aXBseShjKS5pc0luZmluaXR5KCkpe3Rocm93IG5ldyBFcnJvcigiUG9pbnQgaXMgbm90IGEgc2NhbGFyIG11bHRpcGxlIG9mIEcuIil9cmV0dXJuIHRydWV9OwovKiEgYXNuMS0xLjAuOS5qcyAoYykgMjAxMy0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjE9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xKXtLSlVSLmFzbjE9e319S0pVUi5hc24xLkFTTjFVdGlsPW5ldyBmdW5jdGlvbigpe3RoaXMuaW50ZWdlclRvQnl0ZUhleD1mdW5jdGlvbihhKXt2YXIgYj1hLnRvU3RyaW5nKDE2KTtpZigoYi5sZW5ndGglMik9PTEpe2I9IjAiK2J9cmV0dXJuIGJ9O3RoaXMuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXg9ZnVuY3Rpb24oail7dmFyIGY9ai50b1N0cmluZygxNik7aWYoZi5zdWJzdHIoMCwxKSE9Ii0iKXtpZihmLmxlbmd0aCUyPT0xKXtmPSIwIitmfWVsc2V7aWYoIWYubWF0Y2goL15bMC03XS8pKXtmPSIwMCIrZn19fWVsc2V7dmFyIGE9Zi5zdWJzdHIoMSk7dmFyIGU9YS5sZW5ndGg7aWYoZSUyPT0xKXtlKz0xfWVsc2V7aWYoIWYubWF0Y2goL15bMC03XS8pKXtlKz0yfX12YXIgZz0iIjtmb3IodmFyIGQ9MDtkPGU7ZCsrKXtnKz0iZiJ9dmFyIGM9bmV3IEJpZ0ludGVnZXIoZywxNik7dmFyIGI9Yy54b3IoaikuYWRkKEJpZ0ludGVnZXIuT05FKTtmPWIudG9TdHJpbmcoMTYpLnJlcGxhY2UoL14tLywiIil9cmV0dXJuIGZ9O3RoaXMuZ2V0UEVNU3RyaW5nRnJvbUhleD1mdW5jdGlvbihhLGIpe3ZhciBjPUtKVVIuYXNuMTt2YXIgZj1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGEpO3ZhciBkPUNyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KGYpO3ZhciBlPWQucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTtlPWUucmVwbGFjZSgvXHJcbiQvLCIiKTtyZXR1cm4iLS0tLS1CRUdJTiAiK2IrIi0tLS0tXHJcbiIrZSsiXHJcbi0tLS0tRU5EICIrYisiLS0tLS1cclxuIn07dGhpcy5uZXdPYmplY3Q9ZnVuY3Rpb24oYil7dmFyIGc9S0pVUi5hc24xO3ZhciBrPU9iamVjdC5rZXlzKGIpO2lmKGsubGVuZ3RoIT0xKXt0aHJvdyJrZXkgb2YgcGFyYW0gc2hhbGwgYmUgb25seSBvbmUuIn12YXIgaj1rWzBdO2lmKCI6Ym9vbDppbnQ6Yml0c3RyOm9jdHN0cjpudWxsOm9pZDplbnVtOnV0ZjhzdHI6bnVtc3RyOnBybnN0cjp0ZWxzdHI6aWE1c3RyOnV0Y3RpbWU6Z2VudGltZTpzZXE6c2V0OnRhZzoiLmluZGV4T2YoIjoiK2orIjoiKT09LTEpe3Rocm93InVuZGVmaW5lZCBrZXk6ICIran1pZihqPT0iYm9vbCIpe3JldHVybiBuZXcgZy5ERVJCb29sZWFuKGJbal0pfWlmKGo9PSJpbnQiKXtyZXR1cm4gbmV3IGcuREVSSW50ZWdlcihiW2pdKX1pZihqPT0iYml0c3RyIil7cmV0dXJuIG5ldyBnLkRFUkJpdFN0cmluZyhiW2pdKX1pZihqPT0ib2N0c3RyIil7cmV0dXJuIG5ldyBnLkRFUk9jdGV0U3RyaW5nKGJbal0pfWlmKGo9PSJudWxsIil7cmV0dXJuIG5ldyBnLkRFUk51bGwoYltqXSl9aWYoaj09Im9pZCIpe3JldHVybiBuZXcgZy5ERVJPYmplY3RJZGVudGlmaWVyKGJbal0pfWlmKGo9PSJlbnVtIil7cmV0dXJuIG5ldyBnLkRFUkVudW1lcmF0ZWQoYltqXSl9aWYoaj09InV0ZjhzdHIiKXtyZXR1cm4gbmV3IGcuREVSVVRGOFN0cmluZyhiW2pdKX1pZihqPT0ibnVtc3RyIil7cmV0dXJuIG5ldyBnLkRFUk51bWVyaWNTdHJpbmcoYltqXSl9aWYoaj09InBybnN0ciIpe3JldHVybiBuZXcgZy5ERVJQcmludGFibGVTdHJpbmcoYltqXSl9aWYoaj09InRlbHN0ciIpe3JldHVybiBuZXcgZy5ERVJUZWxldGV4U3RyaW5nKGJbal0pfWlmKGo9PSJpYTVzdHIiKXtyZXR1cm4gbmV3IGcuREVSSUE1U3RyaW5nKGJbal0pfWlmKGo9PSJ1dGN0aW1lIil7cmV0dXJuIG5ldyBnLkRFUlVUQ1RpbWUoYltqXSl9aWYoaj09ImdlbnRpbWUiKXtyZXR1cm4gbmV3IGcuREVSR2VuZXJhbGl6ZWRUaW1lKGJbal0pfWlmKGo9PSJzZXEiKXt2YXIgbT1iW2pdO3ZhciBoPVtdO2Zvcih2YXIgZT0wO2U8bS5sZW5ndGg7ZSsrKXt2YXIgbD1nLkFTTjFVdGlsLm5ld09iamVjdChtW2VdKTtoLnB1c2gobCl9cmV0dXJuIG5ldyBnLkRFUlNlcXVlbmNlKHthcnJheTpofSl9aWYoaj09InNldCIpe3ZhciBtPWJbal07dmFyIGg9W107Zm9yKHZhciBlPTA7ZTxtLmxlbmd0aDtlKyspe3ZhciBsPWcuQVNOMVV0aWwubmV3T2JqZWN0KG1bZV0pO2gucHVzaChsKX1yZXR1cm4gbmV3IGcuREVSU2V0KHthcnJheTpofSl9aWYoaj09InRhZyIpe3ZhciBjPWJbal07aWYoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGMpPT09IltvYmplY3QgQXJyYXldIiYmYy5sZW5ndGg9PTMpe3ZhciBkPWcuQVNOMVV0aWwubmV3T2JqZWN0KGNbMl0pO3JldHVybiBuZXcgZy5ERVJUYWdnZWRPYmplY3Qoe3RhZzpjWzBdLGV4cGxpY2l0OmNbMV0sb2JqOmR9KX1lbHNle3ZhciBmPXt9O2lmKGMuZXhwbGljaXQhPT11bmRlZmluZWQpe2YuZXhwbGljaXQ9Yy5leHBsaWNpdH1pZihjLnRhZyE9PXVuZGVmaW5lZCl7Zi50YWc9Yy50YWd9aWYoYy5vYmo9PT11bmRlZmluZWQpe3Rocm93Im9iaiBzaGFsbCBiZSBzcGVjaWZpZWQgZm9yICd0YWcnLiJ9Zi5vYmo9Zy5BU04xVXRpbC5uZXdPYmplY3QoYy5vYmopO3JldHVybiBuZXcgZy5ERVJUYWdnZWRPYmplY3QoZil9fX07dGhpcy5qc29uVG9BU04xSEVYPWZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubmV3T2JqZWN0KGIpO3JldHVybiBhLmdldEVuY29kZWRIZXgoKX19O0tKVVIuYXNuMS5BU04xVXRpbC5vaWRIZXhUb0ludD1mdW5jdGlvbihhKXt2YXIgaj0iIjt2YXIgaz1wYXJzZUludChhLnN1YnN0cigwLDIpLDE2KTt2YXIgZD1NYXRoLmZsb29yKGsvNDApO3ZhciBjPWslNDA7dmFyIGo9ZCsiLiIrYzt2YXIgZT0iIjtmb3IodmFyIGY9MjtmPGEubGVuZ3RoO2YrPTIpe3ZhciBnPXBhcnNlSW50KGEuc3Vic3RyKGYsMiksMTYpO3ZhciBoPSgiMDAwMDAwMDAiK2cudG9TdHJpbmcoMikpLnNsaWNlKC04KTtlPWUraC5zdWJzdHIoMSw3KTtpZihoLnN1YnN0cigwLDEpPT0iMCIpe3ZhciBiPW5ldyBCaWdJbnRlZ2VyKGUsMik7aj1qKyIuIitiLnRvU3RyaW5nKDEwKTtlPSIifX1yZXR1cm4gan07S0pVUi5hc24xLkFTTjFVdGlsLm9pZEludFRvSGV4PWZ1bmN0aW9uKGYpe3ZhciBlPWZ1bmN0aW9uKGEpe3ZhciBrPWEudG9TdHJpbmcoMTYpO2lmKGsubGVuZ3RoPT0xKXtrPSIwIitrfXJldHVybiBrfTt2YXIgZD1mdW5jdGlvbihvKXt2YXIgbj0iIjt2YXIgaz1uZXcgQmlnSW50ZWdlcihvLDEwKTt2YXIgYT1rLnRvU3RyaW5nKDIpO3ZhciBsPTctYS5sZW5ndGglNztpZihsPT03KXtsPTB9dmFyIHE9IiI7Zm9yKHZhciBtPTA7bTxsO20rKyl7cSs9IjAifWE9cSthO2Zvcih2YXIgbT0wO208YS5sZW5ndGgtMTttKz03KXt2YXIgcD1hLnN1YnN0cihtLDcpO2lmKG0hPWEubGVuZ3RoLTcpe3A9IjEiK3B9bis9ZShwYXJzZUludChwLDIpKX1yZXR1cm4gbn07aWYoIWYubWF0Y2goL15bMC05Ll0rJC8pKXt0aHJvdyJtYWxmb3JtZWQgb2lkIHN0cmluZzogIitmfXZhciBnPSIiO3ZhciBiPWYuc3BsaXQoIi4iKTt2YXIgaj1wYXJzZUludChiWzBdKSo0MCtwYXJzZUludChiWzFdKTtnKz1lKGopO2Iuc3BsaWNlKDAsMik7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe2crPWQoYltjXSl9cmV0dXJuIGd9O0tKVVIuYXNuMS5BU04xT2JqZWN0PWZ1bmN0aW9uKCl7dmFyIGM9dHJ1ZTt2YXIgYj1udWxsO3ZhciBkPSIwMCI7dmFyIGU9IjAwIjt2YXIgYT0iIjt0aGlzLmdldExlbmd0aEhleEZyb21WYWx1ZT1mdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLmhWPT0idW5kZWZpbmVkInx8dGhpcy5oVj09bnVsbCl7dGhyb3cidGhpcy5oViBpcyBudWxsIG9yIHVuZGVmaW5lZC4ifWlmKHRoaXMuaFYubGVuZ3RoJTI9PTEpe3Rocm93InZhbHVlIGhleCBtdXN0IGJlIGV2ZW4gbGVuZ3RoOiBuPSIrYS5sZW5ndGgrIix2PSIrdGhpcy5oVn12YXIgaT10aGlzLmhWLmxlbmd0aC8yO3ZhciBoPWkudG9TdHJpbmcoMTYpO2lmKGgubGVuZ3RoJTI9PTEpe2g9IjAiK2h9aWYoaTwxMjgpe3JldHVybiBofWVsc2V7dmFyIGc9aC5sZW5ndGgvMjtpZihnPjE1KXt0aHJvdyJBU04uMSBsZW5ndGggdG9vIGxvbmcgdG8gcmVwcmVzZW50IGJ5IDh4OiBuID0gIitpLnRvU3RyaW5nKDE2KX12YXIgZj0xMjgrZztyZXR1cm4gZi50b1N0cmluZygxNikraH19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuaFRMVj09bnVsbHx8dGhpcy5pc01vZGlmaWVkKXt0aGlzLmhWPXRoaXMuZ2V0RnJlc2hWYWx1ZUhleCgpO3RoaXMuaEw9dGhpcy5nZXRMZW5ndGhIZXhGcm9tVmFsdWUoKTt0aGlzLmhUTFY9dGhpcy5oVCt0aGlzLmhMK3RoaXMuaFY7dGhpcy5pc01vZGlmaWVkPWZhbHNlfXJldHVybiB0aGlzLmhUTFZ9O3RoaXMuZ2V0VmFsdWVIZXg9ZnVuY3Rpb24oKXt0aGlzLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVn07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIiJ9fTtLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmc9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYj1udWxsO3ZhciBhPW51bGw7dGhpcy5nZXRTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zfTt0aGlzLnNldFN0cmluZz1mdW5jdGlvbihkKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLnM9ZDt0aGlzLmhWPXN0b2hleCh0aGlzLnMpfTt0aGlzLnNldFN0cmluZ0hleD1mdW5jdGlvbihkKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLnM9bnVsbDt0aGlzLmhWPWR9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjPT0ic3RyaW5nIil7dGhpcy5zZXRTdHJpbmcoYyl9ZWxzZXtpZih0eXBlb2YgYy5zdHIhPSJ1bmRlZmluZWQiKXt0aGlzLnNldFN0cmluZyhjLnN0cil9ZWxzZXtpZih0eXBlb2YgYy5oZXghPSJ1bmRlZmluZWQiKXt0aGlzLnNldFN0cmluZ0hleChjLmhleCl9fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5ERVJBYnN0cmFjdFRpbWU9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLkRFUkFic3RyYWN0VGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgYT1udWxsO3RoaXMubG9jYWxEYXRlVG9VVEM9ZnVuY3Rpb24oZil7dXRjPWYuZ2V0VGltZSgpKyhmLmdldFRpbWV6b25lT2Zmc2V0KCkqNjAwMDApO3ZhciBlPW5ldyBEYXRlKHV0Yyk7cmV0dXJuIGV9O3RoaXMuZm9ybWF0RGF0ZT1mdW5jdGlvbihtLG8sZSl7dmFyIGc9dGhpcy56ZXJvUGFkZGluZzt2YXIgbj10aGlzLmxvY2FsRGF0ZVRvVVRDKG0pO3ZhciBwPVN0cmluZyhuLmdldEZ1bGxZZWFyKCkpO2lmKG89PSJ1dGMiKXtwPXAuc3Vic3RyKDIsMil9dmFyIGw9ZyhTdHJpbmcobi5nZXRNb250aCgpKzEpLDIpO3ZhciBxPWcoU3RyaW5nKG4uZ2V0RGF0ZSgpKSwyKTt2YXIgaD1nKFN0cmluZyhuLmdldEhvdXJzKCkpLDIpO3ZhciBpPWcoU3RyaW5nKG4uZ2V0TWludXRlcygpKSwyKTt2YXIgaj1nKFN0cmluZyhuLmdldFNlY29uZHMoKSksMik7dmFyIHI9cCtsK3EraCtpK2o7aWYoZT09PXRydWUpe3ZhciBmPW4uZ2V0TWlsbGlzZWNvbmRzKCk7aWYoZiE9MCl7dmFyIGs9ZyhTdHJpbmcoZiksMyk7az1rLnJlcGxhY2UoL1swXSskLywiIik7cj1yKyIuIitrfX1yZXR1cm4gcisiWiJ9O3RoaXMuemVyb1BhZGRpbmc9ZnVuY3Rpb24oZSxkKXtpZihlLmxlbmd0aD49ZCl7cmV0dXJuIGV9cmV0dXJuIG5ldyBBcnJheShkLWUubGVuZ3RoKzEpLmpvaW4oIjAiKStlfTt0aGlzLmdldFN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN9O3RoaXMuc2V0U3RyaW5nPWZ1bmN0aW9uKGQpe3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMucz1kO3RoaXMuaFY9c3RvaGV4KGQpfTt0aGlzLnNldEJ5RGF0ZVZhbHVlPWZ1bmN0aW9uKGgsaixlLGQsZixnKXt2YXIgaT1uZXcgRGF0ZShEYXRlLlVUQyhoLGotMSxlLGQsZixnLDApKTt0aGlzLnNldEJ5RGF0ZShpKX07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQWJzdHJhY3RUaW1lLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS5ERVJBYnN0cmFjdFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9bnVsbDt0aGlzLnNldEJ5QVNOMU9iamVjdEFycmF5PWZ1bmN0aW9uKGMpe3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMuYXNuMUFycmF5PWN9O3RoaXMuYXBwZW5kQVNOMU9iamVjdD1mdW5jdGlvbihjKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLmFzbjFBcnJheS5wdXNoKGMpfTt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLmFycmF5IT0idW5kZWZpbmVkIil7dGhpcy5hc24xQXJyYXk9Yi5hcnJheX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuREVSQm9vbGVhbj1mdW5jdGlvbigpe0tKVVIuYXNuMS5ERVJCb29sZWFuLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSIwMSI7dGhpcy5oVExWPSIwMTAxZmYifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQm9vbGVhbixLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUkludGVnZXI9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUkludGVnZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuaFQ9IjAyIjt0aGlzLnNldEJ5QmlnSW50ZWdlcj1mdW5jdGlvbihiKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLmhWPUtKVVIuYXNuMS5BU04xVXRpbC5iaWdJbnRUb01pblR3b3NDb21wbGVtZW50c0hleChiKX07dGhpcy5zZXRCeUludGVnZXI9ZnVuY3Rpb24oYyl7dmFyIGI9bmV3IEJpZ0ludGVnZXIoU3RyaW5nKGMpLDEwKTt0aGlzLnNldEJ5QmlnSW50ZWdlcihiKX07dGhpcy5zZXRWYWx1ZUhleD1mdW5jdGlvbihiKXt0aGlzLmhWPWJ9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfTtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLmJpZ2ludCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlCaWdJbnRlZ2VyKGEuYmlnaW50KX1lbHNle2lmKHR5cGVvZiBhWyJpbnQiXSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlJbnRlZ2VyKGFbImludCJdKX1lbHNle2lmKHR5cGVvZiBhPT0ibnVtYmVyIil7dGhpcy5zZXRCeUludGVnZXIoYSl9ZWxzZXtpZih0eXBlb2YgYS5oZXghPSJ1bmRlZmluZWQiKXt0aGlzLnNldFZhbHVlSGV4KGEuaGV4KX19fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSSW50ZWdlcixLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUkJpdFN0cmluZz1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSQml0U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSIwMyI7dGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHM9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5oVj1ifTt0aGlzLnNldFVudXNlZEJpdHNBbmRIZXhWYWx1ZT1mdW5jdGlvbihiLGQpe2lmKGI8MHx8NzxiKXt0aHJvdyJ1bnVzZWQgYml0cyBzaGFsbCBiZSBmcm9tIDAgdG8gNzogdSA9ICIrYn12YXIgYz0iMCIrYjt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLmhWPWMrZH07dGhpcy5zZXRCeUJpbmFyeVN0cmluZz1mdW5jdGlvbihlKXtlPWUucmVwbGFjZSgvMCskLywiIik7dmFyIGY9OC1lLmxlbmd0aCU4O2lmKGY9PTgpe2Y9MH1mb3IodmFyIGc9MDtnPD1mO2crKyl7ZSs9IjAifXZhciBqPSIiO2Zvcih2YXIgZz0wO2c8ZS5sZW5ndGgtMTtnKz04KXt2YXIgZD1lLnN1YnN0cihnLDgpO3ZhciBjPXBhcnNlSW50KGQsMikudG9TdHJpbmcoMTYpO2lmKGMubGVuZ3RoPT0xKXtjPSIwIitjfWorPWN9dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5oVj0iMCIrZitqfTt0aGlzLnNldEJ5Qm9vbGVhbkFycmF5PWZ1bmN0aW9uKGQpe3ZhciBjPSIiO2Zvcih2YXIgYj0wO2I8ZC5sZW5ndGg7YisrKXtpZihkW2JdPT10cnVlKXtjKz0iMSJ9ZWxzZXtjKz0iMCJ9fXRoaXMuc2V0QnlCaW5hcnlTdHJpbmcoYyl9O3RoaXMubmV3RmFsc2VBcnJheT1mdW5jdGlvbihkKXt2YXIgYj1uZXcgQXJyYXkoZCk7Zm9yKHZhciBjPTA7YzxkO2MrKyl7YltjXT1mYWxzZX1yZXR1cm4gYn07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGE9PSJzdHJpbmciJiZhLnRvTG93ZXJDYXNlKCkubWF0Y2goL15bMC05YS1mXSskLykpe3RoaXMuc2V0SGV4VmFsdWVJbmNsdWRpbmdVbnVzZWRCaXRzKGEpfWVsc2V7aWYodHlwZW9mIGEuaGV4IT0idW5kZWZpbmVkIil7dGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHMoYS5oZXgpfWVsc2V7aWYodHlwZW9mIGEuYmluIT0idW5kZWZpbmVkIil7dGhpcy5zZXRCeUJpbmFyeVN0cmluZyhhLmJpbil9ZWxzZXtpZih0eXBlb2YgYS5hcnJheSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlCb29sZWFuQXJyYXkoYS5hcnJheSl9fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkJpdFN0cmluZyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUk9jdGV0U3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJPY3RldFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIwNCJ9O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJPY3RldFN0cmluZyxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO0tKVVIuYXNuMS5ERVJOdWxsPWZ1bmN0aW9uKCl7S0pVUi5hc24xLkRFUk51bGwuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuaFQ9IjA1Ijt0aGlzLmhUTFY9IjA1MDAifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSTnVsbCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXI9ZnVuY3Rpb24oYyl7dmFyIGI9ZnVuY3Rpb24oZCl7dmFyIGU9ZC50b1N0cmluZygxNik7aWYoZS5sZW5ndGg9PTEpe2U9IjAiK2V9cmV0dXJuIGV9O3ZhciBhPWZ1bmN0aW9uKGspe3ZhciBqPSIiO3ZhciBlPW5ldyBCaWdJbnRlZ2VyKGssMTApO3ZhciBkPWUudG9TdHJpbmcoMik7dmFyIGY9Ny1kLmxlbmd0aCU3O2lmKGY9PTcpe2Y9MH12YXIgbT0iIjtmb3IodmFyIGc9MDtnPGY7ZysrKXttKz0iMCJ9ZD1tK2Q7Zm9yKHZhciBnPTA7ZzxkLmxlbmd0aC0xO2crPTcpe3ZhciBsPWQuc3Vic3RyKGcsNyk7aWYoZyE9ZC5sZW5ndGgtNyl7bD0iMSIrbH1qKz1iKHBhcnNlSW50KGwsMikpfXJldHVybiBqfTtLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5oVD0iMDYiO3RoaXMuc2V0VmFsdWVIZXg9ZnVuY3Rpb24oZCl7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5zPW51bGw7dGhpcy5oVj1kfTt0aGlzLnNldFZhbHVlT2lkU3RyaW5nPWZ1bmN0aW9uKGYpe2lmKCFmLm1hdGNoKC9eWzAtOS5dKyQvKSl7dGhyb3cibWFsZm9ybWVkIG9pZCBzdHJpbmc6ICIrZn12YXIgZz0iIjt2YXIgZD1mLnNwbGl0KCIuIik7dmFyIGo9cGFyc2VJbnQoZFswXSkqNDArcGFyc2VJbnQoZFsxXSk7Zys9YihqKTtkLnNwbGljZSgwLDIpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXtnKz1hKGRbZV0pfXRoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMucz1udWxsO3RoaXMuaFY9Z307dGhpcy5zZXRWYWx1ZU5hbWU9ZnVuY3Rpb24oZSl7aWYodHlwZW9mIEtKVVIuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZExpc3RbZV0hPSJ1bmRlZmluZWQiKXt2YXIgZD1LSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0W2VdO3RoaXMuc2V0VmFsdWVPaWRTdHJpbmcoZCl9ZWxzZXt0aHJvdyJERVJPYmplY3RJZGVudGlmaWVyIG9pZE5hbWUgdW5kZWZpbmVkOiAiK2V9fTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYz09InN0cmluZyImJmMubWF0Y2goL15bMC0yXS5bMC05Ll0rJC8pKXt0aGlzLnNldFZhbHVlT2lkU3RyaW5nKGMpfWVsc2V7aWYoS0pVUi5hc24xLng1MDkuT0lELm5hbWUyb2lkTGlzdFtjXSE9PXVuZGVmaW5lZCl7dGhpcy5zZXRWYWx1ZU9pZFN0cmluZyhLSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0W2NdKX1lbHNle2lmKHR5cGVvZiBjLm9pZCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0VmFsdWVPaWRTdHJpbmcoYy5vaWQpfWVsc2V7aWYodHlwZW9mIGMuaGV4IT0idW5kZWZpbmVkIil7dGhpcy5zZXRWYWx1ZUhleChjLmhleCl9ZWxzZXtpZih0eXBlb2YgYy5uYW1lIT0idW5kZWZpbmVkIil7dGhpcy5zZXRWYWx1ZU5hbWUoYy5uYW1lKX19fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXIsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5ERVJFbnVtZXJhdGVkPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJFbnVtZXJhdGVkLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSIwYSI7dGhpcy5zZXRCeUJpZ0ludGVnZXI9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5oVj1LSlVSLmFzbjEuQVNOMVV0aWwuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXgoYil9O3RoaXMuc2V0QnlJbnRlZ2VyPWZ1bmN0aW9uKGMpe3ZhciBiPW5ldyBCaWdJbnRlZ2VyKFN0cmluZyhjKSwxMCk7dGhpcy5zZXRCeUJpZ0ludGVnZXIoYil9O3RoaXMuc2V0VmFsdWVIZXg9ZnVuY3Rpb24oYil7dGhpcy5oVj1ifTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYVsiaW50Il0hPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5SW50ZWdlcihhWyJpbnQiXSl9ZWxzZXtpZih0eXBlb2YgYT09Im51bWJlciIpe3RoaXMuc2V0QnlJbnRlZ2VyKGEpfWVsc2V7aWYodHlwZW9mIGEuaGV4IT0idW5kZWZpbmVkIil7dGhpcy5zZXRWYWx1ZUhleChhLmhleCl9fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSRW51bWVyYXRlZCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUlVURjhTdHJpbmc9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUlVURjhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMGMifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSVVRGOFN0cmluZyxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO0tKVVIuYXNuMS5ERVJOdW1lcmljU3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJOdW1lcmljU3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjEyIn07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUk51bWVyaWNTdHJpbmcsS0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtLSlVSLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJQcmludGFibGVTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMTMifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nLEtKVVIuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7S0pVUi5hc24xLkRFUlRlbGV0ZXhTdHJpbmc9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUlRlbGV0ZXhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMTQifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSVGVsZXRleFN0cmluZyxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO0tKVVIuYXNuMS5ERVJJQTVTdHJpbmc9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUklBNVN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIxNiJ9O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJJQTVTdHJpbmcsS0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtLSlVSLmFzbjEuREVSVVRDVGltZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSVVRDVGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIxNyI7dGhpcy5zZXRCeURhdGU9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5kYXRlPWI7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsInV0YyIpO3RoaXMuaFY9c3RvaGV4KHRoaXMucyl9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLmRhdGU9PSJ1bmRlZmluZWQiJiZ0eXBlb2YgdGhpcy5zPT0idW5kZWZpbmVkIil7dGhpcy5kYXRlPW5ldyBEYXRlKCk7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsInV0YyIpO3RoaXMuaFY9c3RvaGV4KHRoaXMucyl9cmV0dXJuIHRoaXMuaFZ9O2lmKGEhPT11bmRlZmluZWQpe2lmKGEuc3RyIT09dW5kZWZpbmVkKXt0aGlzLnNldFN0cmluZyhhLnN0cil9ZWxzZXtpZih0eXBlb2YgYT09InN0cmluZyImJmEubWF0Y2goL15bMC05XXsxMn1aJC8pKXt0aGlzLnNldFN0cmluZyhhKX1lbHNle2lmKGEuaGV4IT09dW5kZWZpbmVkKXt0aGlzLnNldFN0cmluZ0hleChhLmhleCl9ZWxzZXtpZihhLmRhdGUhPT11bmRlZmluZWQpe3RoaXMuc2V0QnlEYXRlKGEuZGF0ZSl9fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUlVUQ1RpbWUsS0pVUi5hc24xLkRFUkFic3RyYWN0VGltZSk7S0pVUi5hc24xLkRFUkdlbmVyYWxpemVkVGltZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjE4Ijt0aGlzLndpdGhNaWxsaXM9ZmFsc2U7dGhpcy5zZXRCeURhdGU9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5kYXRlPWI7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsImdlbiIsdGhpcy53aXRoTWlsbGlzKTt0aGlzLmhWPXN0b2hleCh0aGlzLnMpfTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmRhdGU9PT11bmRlZmluZWQmJnRoaXMucz09PXVuZGVmaW5lZCl7dGhpcy5kYXRlPW5ldyBEYXRlKCk7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsImdlbiIsdGhpcy53aXRoTWlsbGlzKTt0aGlzLmhWPXN0b2hleCh0aGlzLnMpfXJldHVybiB0aGlzLmhWfTtpZihhIT09dW5kZWZpbmVkKXtpZihhLnN0ciE9PXVuZGVmaW5lZCl7dGhpcy5zZXRTdHJpbmcoYS5zdHIpfWVsc2V7aWYodHlwZW9mIGE9PSJzdHJpbmciJiZhLm1hdGNoKC9eWzAtOV17MTR9WiQvKSl7dGhpcy5zZXRTdHJpbmcoYSl9ZWxzZXtpZihhLmhleCE9PXVuZGVmaW5lZCl7dGhpcy5zZXRTdHJpbmdIZXgoYS5oZXgpfWVsc2V7aWYoYS5kYXRlIT09dW5kZWZpbmVkKXt0aGlzLnNldEJ5RGF0ZShhLmRhdGUpfX19fWlmKGEubWlsbGlzPT09dHJ1ZSl7dGhpcy53aXRoTWlsbGlzPXRydWV9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkdlbmVyYWxpemVkVGltZSxLSlVSLmFzbjEuREVSQWJzdHJhY3RUaW1lKTtLSlVSLmFzbjEuREVSU2VxdWVuY2U9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUlNlcXVlbmNlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjMwIjt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXt2YXIgYz0iIjtmb3IodmFyIGI9MDtiPHRoaXMuYXNuMUFycmF5Lmxlbmd0aDtiKyspe3ZhciBkPXRoaXMuYXNuMUFycmF5W2JdO2MrPWQuZ2V0RW5jb2RlZEhleCgpfXRoaXMuaFY9YztyZXR1cm4gdGhpcy5oVn19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkKTtLSlVSLmFzbjEuREVSU2V0PWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJTZXQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMzEiO3RoaXMuc29ydEZsYWc9dHJ1ZTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXt2YXIgYj1uZXcgQXJyYXkoKTtmb3IodmFyIGM9MDtjPHRoaXMuYXNuMUFycmF5Lmxlbmd0aDtjKyspe3ZhciBkPXRoaXMuYXNuMUFycmF5W2NdO2IucHVzaChkLmdldEVuY29kZWRIZXgoKSl9aWYodGhpcy5zb3J0RmxhZz09dHJ1ZSl7Yi5zb3J0KCl9dGhpcy5oVj1iLmpvaW4oIiIpO3JldHVybiB0aGlzLmhWfTtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLnNvcnRmbGFnIT0idW5kZWZpbmVkIiYmYS5zb3J0ZmxhZz09ZmFsc2Upe3RoaXMuc29ydEZsYWc9ZmFsc2V9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUlNldCxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkKTtLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0PWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuaFQ9ImEwIjt0aGlzLmhWPSIiO3RoaXMuaXNFeHBsaWNpdD10cnVlO3RoaXMuYXNuMU9iamVjdD1udWxsO3RoaXMuc2V0QVNOMU9iamVjdD1mdW5jdGlvbihiLGMsZCl7dGhpcy5oVD1jO3RoaXMuaXNFeHBsaWNpdD1iO3RoaXMuYXNuMU9iamVjdD1kO2lmKHRoaXMuaXNFeHBsaWNpdCl7dGhpcy5oVj10aGlzLmFzbjFPYmplY3QuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlfWVsc2V7dGhpcy5oVj1udWxsO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTt0aGlzLmhUTFY9dGhpcy5oVExWLnJlcGxhY2UoL14uLi8sYyk7dGhpcy5pc01vZGlmaWVkPWZhbHNlfX07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEudGFnIT0idW5kZWZpbmVkIil7dGhpcy5oVD1hLnRhZ31pZih0eXBlb2YgYS5leHBsaWNpdCE9InVuZGVmaW5lZCIpe3RoaXMuaXNFeHBsaWNpdD1hLmV4cGxpY2l0fWlmKHR5cGVvZiBhLm9iaiE9InVuZGVmaW5lZCIpe3RoaXMuYXNuMU9iamVjdD1hLm9iajt0aGlzLnNldEFTTjFPYmplY3QodGhpcy5pc0V4cGxpY2l0LHRoaXMuaFQsdGhpcy5hc24xT2JqZWN0KX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0LEtKVVIuYXNuMS5BU04xT2JqZWN0KTsKLyohIGFzbjFoZXgtMS4xLjYuanMgKGMpIDIwMTItMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KdmFyIEFTTjFIRVg9bmV3IGZ1bmN0aW9uKCl7dGhpcy5nZXRCeXRlTGVuZ3RoT2ZMX0F0T2JqPWZ1bmN0aW9uKGIsYyl7aWYoYi5zdWJzdHJpbmcoYysyLGMrMykhPSI4Iil7cmV0dXJuIDF9dmFyIGE9cGFyc2VJbnQoYi5zdWJzdHJpbmcoYyszLGMrNCkpO2lmKGE9PTApe3JldHVybiAtMX1pZigwPGEmJmE8MTApe3JldHVybiBhKzF9cmV0dXJuIC0yfTt0aGlzLmdldEhleE9mTF9BdE9iaj1mdW5jdGlvbihiLGMpe3ZhciBhPXRoaXMuZ2V0Qnl0ZUxlbmd0aE9mTF9BdE9iaihiLGMpO2lmKGE8MSl7cmV0dXJuIiJ9cmV0dXJuIGIuc3Vic3RyaW5nKGMrMixjKzIrYSoyKX07dGhpcy5nZXRJbnRPZkxfQXRPYmo9ZnVuY3Rpb24oYyxkKXt2YXIgYj10aGlzLmdldEhleE9mTF9BdE9iaihjLGQpO2lmKGI9PSIiKXtyZXR1cm4gLTF9dmFyIGE7aWYocGFyc2VJbnQoYi5zdWJzdHJpbmcoMCwxKSk8OCl7YT1uZXcgQmlnSW50ZWdlcihiLDE2KX1lbHNle2E9bmV3IEJpZ0ludGVnZXIoYi5zdWJzdHJpbmcoMiksMTYpfXJldHVybiBhLmludFZhbHVlKCl9O3RoaXMuZ2V0U3RhcnRQb3NPZlZfQXRPYmo9ZnVuY3Rpb24oYixjKXt2YXIgYT10aGlzLmdldEJ5dGVMZW5ndGhPZkxfQXRPYmooYixjKTtpZihhPDApe3JldHVybiBhfXJldHVybiBjKyhhKzEpKjJ9O3RoaXMuZ2V0SGV4T2ZWX0F0T2JqPWZ1bmN0aW9uKGMsZCl7dmFyIGI9dGhpcy5nZXRTdGFydFBvc09mVl9BdE9iaihjLGQpO3ZhciBhPXRoaXMuZ2V0SW50T2ZMX0F0T2JqKGMsZCk7cmV0dXJuIGMuc3Vic3RyaW5nKGIsYithKjIpfTt0aGlzLmdldEhleE9mVExWX0F0T2JqPWZ1bmN0aW9uKGMsZSl7dmFyIGI9Yy5zdWJzdHIoZSwyKTt2YXIgZD10aGlzLmdldEhleE9mTF9BdE9iaihjLGUpO3ZhciBhPXRoaXMuZ2V0SGV4T2ZWX0F0T2JqKGMsZSk7cmV0dXJuIGIrZCthfTt0aGlzLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmo9ZnVuY3Rpb24oYyxkKXt2YXIgYj10aGlzLmdldFN0YXJ0UG9zT2ZWX0F0T2JqKGMsZCk7dmFyIGE9dGhpcy5nZXRJbnRPZkxfQXRPYmooYyxkKTtyZXR1cm4gYithKjJ9O3RoaXMuZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqPWZ1bmN0aW9uKGYsail7dmFyIGM9bmV3IEFycmF5KCk7dmFyIGk9dGhpcy5nZXRTdGFydFBvc09mVl9BdE9iaihmLGopO2MucHVzaChpKTt2YXIgYj10aGlzLmdldEludE9mTF9BdE9iaihmLGopO3ZhciBnPWk7dmFyIGQ9MDt3aGlsZSgxKXt2YXIgZT10aGlzLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmooZixnKTtpZihlPT1udWxsfHwoZS1pPj0oYioyKSkpe2JyZWFrfWlmKGQ+PTIwMCl7YnJlYWt9Yy5wdXNoKGUpO2c9ZTtkKyt9cmV0dXJuIGN9O3RoaXMuZ2V0TnRoQ2hpbGRJbmRleF9BdE9iaj1mdW5jdGlvbihkLGIsZSl7dmFyIGM9dGhpcy5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZCxiKTtyZXR1cm4gY1tlXX07dGhpcy5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdD1mdW5jdGlvbihlLGQsYyl7aWYoYy5sZW5ndGg9PTApe3JldHVybiBkfXZhciBmPWMuc2hpZnQoKTt2YXIgYj10aGlzLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihlLGQpO3JldHVybiB0aGlzLmdldERlY2VuZGFudEluZGV4QnlOdGhMaXN0KGUsYltmXSxjKX07dGhpcy5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3Q9ZnVuY3Rpb24oZCxjLGIpe3ZhciBhPXRoaXMuZ2V0RGVjZW5kYW50SW5kZXhCeU50aExpc3QoZCxjLGIpO3JldHVybiB0aGlzLmdldEhleE9mVExWX0F0T2JqKGQsYSl9O3RoaXMuZ2V0RGVjZW5kYW50SGV4VkJ5TnRoTGlzdD1mdW5jdGlvbihkLGMsYil7dmFyIGE9dGhpcy5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdChkLGMsYik7cmV0dXJuIHRoaXMuZ2V0SGV4T2ZWX0F0T2JqKGQsYSl9fTtBU04xSEVYLmdldFZieUxpc3Q9ZnVuY3Rpb24oZCxjLGIsZSl7dmFyIGE9dGhpcy5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdChkLGMsYik7aWYoYT09PXVuZGVmaW5lZCl7dGhyb3ciY2FuJ3QgZmluZCBudGhMaXN0IG9iamVjdCJ9aWYoZSE9PXVuZGVmaW5lZCl7aWYoZC5zdWJzdHIoYSwyKSE9ZSl7dGhyb3ciY2hlY2tpbmcgdGFnIGRvZXNuJ3QgbWF0Y2g6ICIrZC5zdWJzdHIoYSwyKSsiIT0iK2V9fXJldHVybiB0aGlzLmdldEhleE9mVl9BdE9iaihkLGEpfTtBU04xSEVYLmhleHRvb2lkc3RyPWZ1bmN0aW9uKGUpe3ZhciBoPWZ1bmN0aW9uKGIsYSl7aWYoYi5sZW5ndGg+PWEpe3JldHVybiBifXJldHVybiBuZXcgQXJyYXkoYS1iLmxlbmd0aCsxKS5qb2luKCIwIikrYn07dmFyIGw9W107dmFyIG89ZS5zdWJzdHIoMCwyKTt2YXIgZj1wYXJzZUludChvLDE2KTtsWzBdPW5ldyBTdHJpbmcoTWF0aC5mbG9vcihmLzQwKSk7bFsxXT1uZXcgU3RyaW5nKGYlNDApO3ZhciBtPWUuc3Vic3RyKDIpO3ZhciBrPVtdO2Zvcih2YXIgZz0wO2c8bS5sZW5ndGgvMjtnKyspe2sucHVzaChwYXJzZUludChtLnN1YnN0cihnKjIsMiksMTYpKX12YXIgaj1bXTt2YXIgZD0iIjtmb3IodmFyIGc9MDtnPGsubGVuZ3RoO2crKyl7aWYoa1tnXSYxMjgpe2Q9ZCtoKChrW2ddJjEyNykudG9TdHJpbmcoMiksNyl9ZWxzZXtkPWQraCgoa1tnXSYxMjcpLnRvU3RyaW5nKDIpLDcpO2oucHVzaChuZXcgU3RyaW5nKHBhcnNlSW50KGQsMikpKTtkPSIifX12YXIgbj1sLmpvaW4oIi4iKTtpZihqLmxlbmd0aD4wKXtuPW4rIi4iK2ouam9pbigiLiIpfXJldHVybiBufTtBU04xSEVYLmR1bXA9ZnVuY3Rpb24oZSxjLGssZyl7dmFyIG89ZnVuY3Rpb24odyxpKXtpZih3Lmxlbmd0aDw9aSoyKXtyZXR1cm4gd31lbHNle3ZhciB2PXcuc3Vic3RyKDAsaSkrIi4uKHRvdGFsICIrdy5sZW5ndGgvMisiYnl0ZXMpLi4iK3cuc3Vic3RyKHcubGVuZ3RoLWksaSk7cmV0dXJuIHZ9fTtpZihjPT09dW5kZWZpbmVkKXtjPXtvbW1pdF9sb25nX29jdGV0OjMyfX1pZihrPT09dW5kZWZpbmVkKXtrPTB9aWYoZz09PXVuZGVmaW5lZCl7Zz0iIn12YXIgcj1jLm9tbWl0X2xvbmdfb2N0ZXQ7aWYoZS5zdWJzdHIoaywyKT09IjAxIil7dmFyIGg9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKTtpZihoPT0iMDAiKXtyZXR1cm4gZysiQk9PTEVBTiBGQUxTRVxuIn1lbHNle3JldHVybiBnKyJCT09MRUFOIFRSVUVcbiJ9fWlmKGUuc3Vic3RyKGssMik9PSIwMiIpe3ZhciBoPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsayk7cmV0dXJuIGcrIklOVEVHRVIgIitvKGgscikrIlxuIn1pZihlLnN1YnN0cihrLDIpPT0iMDMiKXt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspO3JldHVybiBnKyJCSVRTVFJJTkcgIitvKGgscikrIlxuIn1pZihlLnN1YnN0cihrLDIpPT0iMDQiKXt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspO2lmKEFTTjFIRVguaXNBU04xSEVYKGgpKXt2YXIgaj1nKyJPQ1RFVFNUUklORywgZW5jYXBzdWxhdGVzXG4iO2o9aitBU04xSEVYLmR1bXAoaCxjLDAsZysiICAiKTtyZXR1cm4gan1lbHNle3JldHVybiBnKyJPQ1RFVFNUUklORyAiK28oaCxyKSsiXG4ifX1pZihlLnN1YnN0cihrLDIpPT0iMDUiKXtyZXR1cm4gZysiTlVMTFxuIn1pZihlLnN1YnN0cihrLDIpPT0iMDYiKXt2YXIgbD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspO3ZhciBhPUtKVVIuYXNuMS5BU04xVXRpbC5vaWRIZXhUb0ludChsKTt2YXIgbj1LSlVSLmFzbjEueDUwOS5PSUQub2lkMm5hbWUoYSk7dmFyIGI9YS5yZXBsYWNlKC9cLi9nLCIgIik7aWYobiE9IiIpe3JldHVybiBnKyJPYmplY3RJZGVudGlmaWVyICIrbisiICgiK2IrIilcbiJ9ZWxzZXtyZXR1cm4gZysiT2JqZWN0SWRlbnRpZmllciAoIitiKyIpXG4ifX1pZihlLnN1YnN0cihrLDIpPT0iMGMiKXtyZXR1cm4gZysiVVRGOFN0cmluZyAnIitoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKSkrIidcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjEzIil7cmV0dXJuIGcrIlByaW50YWJsZVN0cmluZyAnIitoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKSkrIidcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjE0Iil7cmV0dXJuIGcrIlRlbGV0ZXhTdHJpbmcgJyIraGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykpKyInXG4ifWlmKGUuc3Vic3RyKGssMik9PSIxNiIpe3JldHVybiBnKyJJQTVTdHJpbmcgJyIraGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykpKyInXG4ifWlmKGUuc3Vic3RyKGssMik9PSIxNyIpe3JldHVybiBnKyJVVENUaW1lICIraGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykpKyJcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjE4Iil7cmV0dXJuIGcrIkdlbmVyYWxpemVkVGltZSAiK2hleHRvdXRmOChBU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspKSsiXG4ifWlmKGUuc3Vic3RyKGssMik9PSIzMCIpe2lmKGUuc3Vic3RyKGssNCk9PSIzMDAwIil7cmV0dXJuIGcrIlNFUVVFTkNFIHt9XG4ifXZhciBqPWcrIlNFUVVFTkNFXG4iO3ZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGUsayk7dmFyIGY9YztpZigoZC5sZW5ndGg9PTJ8fGQubGVuZ3RoPT0zKSYmZS5zdWJzdHIoZFswXSwyKT09IjA2IiYmZS5zdWJzdHIoZFtkLmxlbmd0aC0xXSwyKT09IjA0Iil7dmFyIHQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxkWzBdKTt2YXIgYT1LSlVSLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQodCk7dmFyIG49S0pVUi5hc24xLng1MDkuT0lELm9pZDJuYW1lKGEpO3ZhciBwPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpO3AueDUwOUV4dE5hbWU9bjtmPXB9Zm9yKHZhciBxPTA7cTxkLmxlbmd0aDtxKyspe2o9aitBU04xSEVYLmR1bXAoZSxmLGRbcV0sZysiICAiKX1yZXR1cm4gan1pZihlLnN1YnN0cihrLDIpPT0iMzEiKXt2YXIgaj1nKyJTRVRcbiI7dmFyIGQ9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZSxrKTtmb3IodmFyIHE9MDtxPGQubGVuZ3RoO3ErKyl7aj1qK0FTTjFIRVguZHVtcChlLGMsZFtxXSxnKyIgICIpfXJldHVybiBqfXZhciB1PXBhcnNlSW50KGUuc3Vic3RyKGssMiksMTYpO2lmKCh1JjEyOCkhPTApe3ZhciBtPXUmMzE7aWYoKHUmMzIpIT0wKXt2YXIgaj1nKyJbIittKyJdXG4iO3ZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGUsayk7Zm9yKHZhciBxPTA7cTxkLmxlbmd0aDtxKyspe2o9aitBU04xSEVYLmR1bXAoZSxjLGRbcV0sZysiICAiKX1yZXR1cm4gan1lbHNle3ZhciBoPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsayk7aWYoaC5zdWJzdHIoMCw4KT09IjY4NzQ3NDcwIil7aD1oZXh0b3V0ZjgoaCl9aWYoYy54NTA5RXh0TmFtZT09PSJzdWJqZWN0QWx0TmFtZSImJm09PTIpe2g9aGV4dG91dGY4KGgpfXZhciBqPWcrIlsiK20rIl0gIitoKyJcbiI7cmV0dXJuIGp9fXJldHVybiBnKyJVTktOT1dOKCIrZS5zdWJzdHIoaywyKSsiKSAiK0FTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykrIlxuIn07QVNOMUhFWC5pc0FTTjFIRVg9ZnVuY3Rpb24oZCl7aWYoZC5sZW5ndGglMj09MSl7cmV0dXJuIGZhbHNlfXZhciBjPUFTTjFIRVguZ2V0SW50T2ZMX0F0T2JqKGQsMCk7dmFyIGI9ZC5zdWJzdHIoMCwyKTt2YXIgZT1BU04xSEVYLmdldEhleE9mTF9BdE9iaihkLDApO3ZhciBhPWQubGVuZ3RoLWIubGVuZ3RoLWUubGVuZ3RoO2lmKGE9PWMqMil7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfTsKLyohIGFzbjF4NTA5LTEuMC4xMy5qcyAoYykgMjAxMy0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjE9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xKXtLSlVSLmFzbjE9e319aWYodHlwZW9mIEtKVVIuYXNuMS54NTA5PT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMS54NTA5KXtLSlVSLmFzbjEueDUwOT17fX1LSlVSLmFzbjEueDUwOS5DZXJ0aWZpY2F0ZT1mdW5jdGlvbihnKXtLSlVSLmFzbjEueDUwOS5DZXJ0aWZpY2F0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgZD1udWxsO3ZhciBmPW51bGw7dmFyIGM9bnVsbDt2YXIgYT1udWxsO3ZhciBlPW51bGw7dGhpcy5zZXRSc2FQcnZLZXlCeVBFTWFuZFBhc3M9ZnVuY3Rpb24oaSxrKXt2YXIgaD1QS0NTNVBLRVkuZ2V0RGVjcnlwdGVkS2V5SGV4KGksayk7dmFyIGo9bmV3IFJTQUtleSgpO2oucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhoKTt0aGlzLnBydktleT1qfTt0aGlzLnNpZ249ZnVuY3Rpb24oKXt0aGlzLmFzbjFTaWduYXR1cmVBbGc9dGhpcy5hc24xVEJTQ2VydC5hc24xU2lnbmF0dXJlQWxnO3NpZz1uZXcgS0pVUi5jcnlwdG8uU2lnbmF0dXJlKHthbGc6IlNIQTF3aXRoUlNBIn0pO3NpZy5pbml0KHRoaXMucHJ2S2V5KTtzaWcudXBkYXRlSGV4KHRoaXMuYXNuMVRCU0NlcnQuZ2V0RW5jb2RlZEhleCgpKTt0aGlzLmhleFNpZz1zaWcuc2lnbigpO3RoaXMuYXNuMVNpZz1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIrdGhpcy5oZXhTaWd9KTt2YXIgaD1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbdGhpcy5hc24xVEJTQ2VydCx0aGlzLmFzbjFTaWduYXR1cmVBbGcsdGhpcy5hc24xU2lnXX0pO3RoaXMuaFRMVj1oLmdldEVuY29kZWRIZXgoKTt0aGlzLmlzTW9kaWZpZWQ9ZmFsc2V9O3RoaXMuc2V0U2lnbmF0dXJlSGV4PWZ1bmN0aW9uKGgpe3RoaXMuYXNuMVNpZ25hdHVyZUFsZz10aGlzLmFzbjFUQlNDZXJ0LmFzbjFTaWduYXR1cmVBbGc7dGhpcy5oZXhTaWc9aDt0aGlzLmFzbjFTaWc9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK3RoaXMuaGV4U2lnfSk7dmFyIGk9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuYXNuMVRCU0NlcnQsdGhpcy5hc24xU2lnbmF0dXJlQWxnLHRoaXMuYXNuMVNpZ119KTt0aGlzLmhUTFY9aS5nZXRFbmNvZGVkSGV4KCk7dGhpcy5pc01vZGlmaWVkPWZhbHNlfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmlzTW9kaWZpZWQ9PWZhbHNlJiZ0aGlzLmhUTFYhPW51bGwpe3JldHVybiB0aGlzLmhUTFZ9dGhyb3cibm90IHNpZ25lZCB5ZXQifTt0aGlzLmdldFBFTVN0cmluZz1mdW5jdGlvbigpe3ZhciBqPXRoaXMuZ2V0RW5jb2RlZEhleCgpO3ZhciBoPUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uoaik7dmFyIGk9Q3J5cHRvSlMuZW5jLkJhc2U2NC5zdHJpbmdpZnkoaCk7dmFyIGs9aS5yZXBsYWNlKC8oLns2NH0pL2csIiQxXHJcbiIpO3JldHVybiItLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS1cclxuIitrKyJcclxuLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLVxyXG4ifTtpZih0eXBlb2YgZyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBnLnRic2NlcnRvYmohPSJ1bmRlZmluZWQiKXt0aGlzLmFzbjFUQlNDZXJ0PWcudGJzY2VydG9ian1pZih0eXBlb2YgZy5wcnZrZXlvYmohPSJ1bmRlZmluZWQiKXt0aGlzLnBydktleT1nLnBydmtleW9ian1lbHNle2lmKHR5cGVvZiBnLnJzYXBydmtleSE9InVuZGVmaW5lZCIpe3RoaXMucHJ2S2V5PWcucnNhcHJ2a2V5fWVsc2V7aWYoKHR5cGVvZiBnLnJzYXBydnBlbSE9InVuZGVmaW5lZCIpJiYodHlwZW9mIGcucnNhcHJ2cGFzIT0idW5kZWZpbmVkIikpe3RoaXMuc2V0UnNhUHJ2S2V5QnlQRU1hbmRQYXNzKGcucnNhcHJ2cGVtLGcucnNhcHJ2cGFzKX19fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNlcnRpZmljYXRlLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5UQlNDZXJ0aWZpY2F0ZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEueDUwOS5UQlNDZXJ0aWZpY2F0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5faW5pdGlhbGl6ZT1mdW5jdGlvbigpe3RoaXMuYXNuMUFycmF5PW5ldyBBcnJheSgpO3RoaXMuYXNuMVZlcnNpb249bmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe29iajpuZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOjJ9KX0pO3RoaXMuYXNuMVNlcmlhbE51bWJlcj1udWxsO3RoaXMuYXNuMVNpZ25hdHVyZUFsZz1udWxsO3RoaXMuYXNuMUlzc3Vlcj1udWxsO3RoaXMuYXNuMU5vdEJlZm9yZT1udWxsO3RoaXMuYXNuMU5vdEFmdGVyPW51bGw7dGhpcy5hc24xU3ViamVjdD1udWxsO3RoaXMuYXNuMVN1YmpQS2V5PW51bGw7dGhpcy5leHRlbnNpb25zQXJyYXk9bmV3IEFycmF5KCl9O3RoaXMuc2V0U2VyaWFsTnVtYmVyQnlQYXJhbT1mdW5jdGlvbihiKXt0aGlzLmFzbjFTZXJpYWxOdW1iZXI9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKGIpfTt0aGlzLnNldFNpZ25hdHVyZUFsZ0J5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU2lnbmF0dXJlQWxnPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKGIpfTt0aGlzLnNldElzc3VlckJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xSXNzdWVyPW5ldyBLSlVSLmFzbjEueDUwOS5YNTAwTmFtZShiKX07dGhpcy5zZXROb3RCZWZvcmVCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMU5vdEJlZm9yZT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShiKX07dGhpcy5zZXROb3RBZnRlckJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xTm90QWZ0ZXI9bmV3IEtKVVIuYXNuMS54NTA5LlRpbWUoYil9O3RoaXMuc2V0U3ViamVjdEJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU3ViamVjdD1uZXcgS0pVUi5hc24xLng1MDkuWDUwME5hbWUoYil9O3RoaXMuc2V0U3ViamVjdFB1YmxpY0tleUJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU3VialBLZXk9bmV3IEtKVVIuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvKGIpfTt0aGlzLnNldFN1YmplY3RQdWJsaWNLZXlCeUdldEtleT1mdW5jdGlvbihjKXt2YXIgYj1LRVlVVElMLmdldEtleShjKTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8oYil9O3RoaXMuYXBwZW5kRXh0ZW5zaW9uPWZ1bmN0aW9uKGIpe3RoaXMuZXh0ZW5zaW9uc0FycmF5LnB1c2goYil9O3RoaXMuYXBwZW5kRXh0ZW5zaW9uQnlOYW1lPWZ1bmN0aW9uKGQsYil7aWYoZC50b0xvd2VyQ2FzZSgpPT0iYmFzaWNjb25zdHJhaW50cyIpe3ZhciBjPW5ldyBLSlVSLmFzbjEueDUwOS5CYXNpY0NvbnN0cmFpbnRzKGIpO3RoaXMuYXBwZW5kRXh0ZW5zaW9uKGMpfWVsc2V7aWYoZC50b0xvd2VyQ2FzZSgpPT0ia2V5dXNhZ2UiKXt2YXIgYz1uZXcgS0pVUi5hc24xLng1MDkuS2V5VXNhZ2UoYik7dGhpcy5hcHBlbmRFeHRlbnNpb24oYyl9ZWxzZXtpZihkLnRvTG93ZXJDYXNlKCk9PSJjcmxkaXN0cmlidXRpb25wb2ludHMiKXt2YXIgYz1uZXcgS0pVUi5hc24xLng1MDkuQ1JMRGlzdHJpYnV0aW9uUG9pbnRzKGIpO3RoaXMuYXBwZW5kRXh0ZW5zaW9uKGMpfWVsc2V7aWYoZC50b0xvd2VyQ2FzZSgpPT0iZXh0a2V5dXNhZ2UiKXt2YXIgYz1uZXcgS0pVUi5hc24xLng1MDkuRXh0S2V5VXNhZ2UoYik7dGhpcy5hcHBlbmRFeHRlbnNpb24oYyl9ZWxzZXtpZihkLnRvTG93ZXJDYXNlKCk9PSJhdXRob3JpdHlrZXlpZGVudGlmaWVyIil7dmFyIGM9bmV3IEtKVVIuYXNuMS54NTA5LkF1dGhvcml0eUtleUlkZW50aWZpZXIoYik7dGhpcy5hcHBlbmRFeHRlbnNpb24oYyl9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBleHRlbnNpb24gbmFtZTogIitkfX19fX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuYXNuMU5vdEJlZm9yZT09bnVsbHx8dGhpcy5hc24xTm90QWZ0ZXI9PW51bGwpe3Rocm93Im5vdEJlZm9yZSBhbmQvb3Igbm90QWZ0ZXIgbm90IHNldCJ9dmFyIGM9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuYXNuMU5vdEJlZm9yZSx0aGlzLmFzbjFOb3RBZnRlcl19KTt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVZlcnNpb24pO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xU2VyaWFsTnVtYmVyKTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVNpZ25hdHVyZUFsZyk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFJc3N1ZXIpO3RoaXMuYXNuMUFycmF5LnB1c2goYyk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFTdWJqZWN0KTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVN1YmpQS2V5KTtpZih0aGlzLmV4dGVuc2lvbnNBcnJheS5sZW5ndGg+MCl7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5leHRlbnNpb25zQXJyYXl9KTt2YXIgYj1uZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6dHJ1ZSx0YWc6ImEzIixvYmo6ZH0pO3RoaXMuYXNuMUFycmF5LnB1c2goYil9dmFyIGU9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5hc24xQXJyYXl9KTt0aGlzLmhUTFY9ZS5nZXRFbmNvZGVkSGV4KCk7dGhpcy5pc01vZGlmaWVkPWZhbHNlO3JldHVybiB0aGlzLmhUTFZ9O3RoaXMuX2luaXRpYWxpemUoKX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuVEJTQ2VydGlmaWNhdGUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LkV4dGVuc2lvbj1mdW5jdGlvbihiKXtLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGY9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtvaWQ6dGhpcy5vaWR9KTt2YXIgZT1uZXcgS0pVUi5hc24xLkRFUk9jdGV0U3RyaW5nKHtoZXg6dGhpcy5nZXRFeHRuVmFsdWVIZXgoKX0pO3ZhciBkPW5ldyBBcnJheSgpO2QucHVzaChmKTtpZih0aGlzLmNyaXRpY2FsKXtkLnB1c2gobmV3IEtKVVIuYXNuMS5ERVJCb29sZWFuKCkpfWQucHVzaChlKTt2YXIgYz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpkfSk7cmV0dXJuIGMuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLmNyaXRpY2FsPWZhbHNlO2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGIuY3JpdGljYWwhPSJ1bmRlZmluZWQiKXt0aGlzLmNyaXRpY2FsPWIuY3JpdGljYWx9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5LZXlVc2FnZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEueDUwOS5LZXlVc2FnZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmdldEV4dG5WYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLm9pZD0iMi41LjI5LjE1IjtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLmJpbiE9InVuZGVmaW5lZCIpe3RoaXMuYXNuMUV4dG5WYWx1ZT1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyhhKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5LZXlVc2FnZSxLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24pO0tKVVIuYXNuMS54NTA5LkJhc2ljQ29uc3RyYWludHM9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLng1MDkuQmFzaWNDb25zdHJhaW50cy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxjKTt2YXIgYT1mYWxzZTt2YXIgYj0tMTt0aGlzLmdldEV4dG5WYWx1ZUhleD1mdW5jdGlvbigpe3ZhciBlPW5ldyBBcnJheSgpO2lmKHRoaXMuY0Epe2UucHVzaChuZXcgS0pVUi5hc24xLkRFUkJvb2xlYW4oKSl9aWYodGhpcy5wYXRoTGVuPi0xKXtlLnB1c2gobmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHsiaW50Ijp0aGlzLnBhdGhMZW59KSl9dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6ZX0pO3RoaXMuYXNuMUV4dG5WYWx1ZT1kO3JldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLm9pZD0iMi41LjI5LjE5Ijt0aGlzLmNBPWZhbHNlO3RoaXMucGF0aExlbj0tMTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLmNBIT0idW5kZWZpbmVkIil7dGhpcy5jQT1jLmNBfWlmKHR5cGVvZiBjLnBhdGhMZW4hPSJ1bmRlZmluZWQiKXt0aGlzLnBhdGhMZW49Yy5wYXRoTGVufX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkJhc2ljQ29uc3RyYWludHMsS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uKTtLSlVSLmFzbjEueDUwOS5DUkxEaXN0cmlidXRpb25Qb2ludHM9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLng1MDkuQ1JMRGlzdHJpYnV0aW9uUG9pbnRzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuZ2V0RXh0blZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZS5nZXRFbmNvZGVkSGV4KCl9O3RoaXMuc2V0QnlEUEFycmF5PWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUV4dG5WYWx1ZT1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpifSl9O3RoaXMuc2V0QnlPbmVVUkk9ZnVuY3Rpb24oZSl7dmFyIGI9bmV3IEtKVVIuYXNuMS54NTA5LkdlbmVyYWxOYW1lcyhbe3VyaTplfV0pO3ZhciBkPW5ldyBLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludE5hbWUoYik7dmFyIGM9bmV3IEtKVVIuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50KHtkcG9iajpkfSk7dGhpcy5zZXRCeURQQXJyYXkoW2NdKX07dGhpcy5vaWQ9IjIuNS4yOS4zMSI7aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYS5hcnJheSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlEUEFycmF5KGEuYXJyYXkpfWVsc2V7aWYodHlwZW9mIGEudXJpIT0idW5kZWZpbmVkIil7dGhpcy5zZXRCeU9uZVVSSShhLnVyaSl9fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNSTERpc3RyaWJ1dGlvblBvaW50cyxLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24pO0tKVVIuYXNuMS54NTA5LkV4dEtleVVzYWdlPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS54NTA5LkV4dEtleVVzYWdlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuc2V0UHVycG9zZUFycmF5PWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUV4dG5WYWx1ZT1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKCk7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcihiW2NdKTt0aGlzLmFzbjFFeHRuVmFsdWUuYXBwZW5kQVNOMU9iamVjdChkKX19O3RoaXMuZ2V0RXh0blZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZS5nZXRFbmNvZGVkSGV4KCl9O3RoaXMub2lkPSIyLjUuMjkuMzciO2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEuYXJyYXkhPSJ1bmRlZmluZWQiKXt0aGlzLnNldFB1cnBvc2VBcnJheShhLmFycmF5KX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5FeHRLZXlVc2FnZSxLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24pO0tKVVIuYXNuMS54NTA5LkF1dGhvcml0eUtleUlkZW50aWZpZXI9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLng1MDkuQXV0aG9yaXR5S2V5SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmFzbjFLSUQ9bnVsbDt0aGlzLmFzbjFDZXJ0SXNzdWVyPW51bGw7dGhpcy5hc24xQ2VydFNOPW51bGw7dGhpcy5nZXRFeHRuVmFsdWVIZXg9ZnVuY3Rpb24oKXt2YXIgYz1uZXcgQXJyYXkoKTtpZih0aGlzLmFzbjFLSUQpe2MucHVzaChuZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6ZmFsc2UsdGFnOiI4MCIsb2JqOnRoaXMuYXNuMUtJRH0pKX1pZih0aGlzLmFzbjFDZXJ0SXNzdWVyKXtjLnB1c2gobmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OmZhbHNlLHRhZzoiYTEiLG9iajp0aGlzLmFzbjFDZXJ0SXNzdWVyfSkpfWlmKHRoaXMuYXNuMUNlcnRTTil7Yy5wdXNoKG5ldyBLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0KHtleHBsaWNpdDpmYWxzZSx0YWc6IjgyIixvYmo6dGhpcy5hc24xQ2VydFNOfSkpfXZhciBiPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OmN9KTt0aGlzLmFzbjFFeHRuVmFsdWU9YjtyZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlLmdldEVuY29kZWRIZXgoKX07dGhpcy5zZXRLSURCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUtJRD1uZXcgS0pVUi5hc24xLkRFUk9jdGV0U3RyaW5nKGIpfTt0aGlzLnNldENlcnRJc3N1ZXJCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUNlcnRJc3N1ZXI9bmV3IEtKVVIuYXNuMS54NTA5Llg1MDBOYW1lKGIpfTt0aGlzLnNldENlcnRTTkJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xQ2VydFNOPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcihiKX07dGhpcy5vaWQ9IjIuNS4yOS4zNSI7aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYS5raWQhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEtJREJ5UGFyYW0oYS5raWQpfWlmKHR5cGVvZiBhLmlzc3VlciE9InVuZGVmaW5lZCIpe3RoaXMuc2V0Q2VydElzc3VlckJ5UGFyYW0oYS5pc3N1ZXIpfWlmKHR5cGVvZiBhLnNuIT0idW5kZWZpbmVkIil7dGhpcy5zZXRDZXJ0U05CeVBhcmFtKGEuc24pfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkF1dGhvcml0eUtleUlkZW50aWZpZXIsS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uKTtLSlVSLmFzbjEueDUwOS5DUkw9ZnVuY3Rpb24oZil7S0pVUi5hc24xLng1MDkuQ1JMLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3ZhciBjPW51bGw7dmFyIGU9bnVsbDt2YXIgYj1udWxsO3ZhciBkPW51bGw7dGhpcy5zZXRSc2FQcnZLZXlCeVBFTWFuZFBhc3M9ZnVuY3Rpb24oaCxqKXt2YXIgZz1QS0NTNVBLRVkuZ2V0RGVjcnlwdGVkS2V5SGV4KGgsaik7dmFyIGk9bmV3IFJTQUtleSgpO2kucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhnKTt0aGlzLnJzYVBydktleT1pfTt0aGlzLnNpZ249ZnVuY3Rpb24oKXt0aGlzLmFzbjFTaWduYXR1cmVBbGc9dGhpcy5hc24xVEJTQ2VydExpc3QuYXNuMVNpZ25hdHVyZUFsZztzaWc9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOiJTSEExd2l0aFJTQSIscHJvdjoiY3J5cHRvanMvanNyc2EifSk7c2lnLmluaXRTaWduKHRoaXMucnNhUHJ2S2V5KTtzaWcudXBkYXRlSGV4KHRoaXMuYXNuMVRCU0NlcnRMaXN0LmdldEVuY29kZWRIZXgoKSk7dGhpcy5oZXhTaWc9c2lnLnNpZ24oKTt0aGlzLmFzbjFTaWc9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK3RoaXMuaGV4U2lnfSk7dmFyIGc9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuYXNuMVRCU0NlcnRMaXN0LHRoaXMuYXNuMVNpZ25hdHVyZUFsZyx0aGlzLmFzbjFTaWddfSk7dGhpcy5oVExWPWcuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaXNNb2RpZmllZD1mYWxzZX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5pc01vZGlmaWVkPT1mYWxzZSYmdGhpcy5oVExWIT1udWxsKXtyZXR1cm4gdGhpcy5oVExWfXRocm93Im5vdCBzaWduZWQgeWV0In07dGhpcy5nZXRQRU1TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgaT10aGlzLmdldEVuY29kZWRIZXgoKTt2YXIgZz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGkpO3ZhciBoPUNyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KGcpO3ZhciBqPWgucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTtyZXR1cm4iLS0tLS1CRUdJTiBYNTA5IENSTC0tLS0tXHJcbiIraisiXHJcbi0tLS0tRU5EIFg1MDkgQ1JMLS0tLS1cclxuIn07aWYodHlwZW9mIGYhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZi50YnNvYmohPSJ1bmRlZmluZWQiKXt0aGlzLmFzbjFUQlNDZXJ0TGlzdD1mLnRic29ian1pZih0eXBlb2YgZi5yc2FwcnZrZXkhPSJ1bmRlZmluZWQiKXt0aGlzLnJzYVBydktleT1mLnJzYXBydmtleX1pZigodHlwZW9mIGYucnNhcHJ2cGVtIT0idW5kZWZpbmVkIikmJih0eXBlb2YgZi5yc2FwcnZwYXMhPSJ1bmRlZmluZWQiKSl7dGhpcy5zZXRSc2FQcnZLZXlCeVBFTWFuZFBhc3MoZi5yc2FwcnZwZW0sZi5yc2FwcnZwYXMpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNSTCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuVEJTQ2VydExpc3Q9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuVEJTQ2VydExpc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPW51bGw7dGhpcy5zZXRTaWduYXR1cmVBbGdCeVBhcmFtPWZ1bmN0aW9uKGMpe3RoaXMuYXNuMVNpZ25hdHVyZUFsZz1uZXcgS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcihjKX07dGhpcy5zZXRJc3N1ZXJCeVBhcmFtPWZ1bmN0aW9uKGMpe3RoaXMuYXNuMUlzc3Vlcj1uZXcgS0pVUi5hc24xLng1MDkuWDUwME5hbWUoYyl9O3RoaXMuc2V0VGhpc1VwZGF0ZUJ5UGFyYW09ZnVuY3Rpb24oYyl7dGhpcy5hc24xVGhpc1VwZGF0ZT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShjKX07dGhpcy5zZXROZXh0VXBkYXRlQnlQYXJhbT1mdW5jdGlvbihjKXt0aGlzLmFzbjFOZXh0VXBkYXRlPW5ldyBLSlVSLmFzbjEueDUwOS5UaW1lKGMpfTt0aGlzLmFkZFJldm9rZWRDZXJ0PWZ1bmN0aW9uKGMsZCl7dmFyIGY9e307aWYoYyE9dW5kZWZpbmVkJiZjIT1udWxsKXtmLnNuPWN9aWYoZCE9dW5kZWZpbmVkJiZkIT1udWxsKXtmLnRpbWU9ZH12YXIgZT1uZXcgS0pVUi5hc24xLng1MDkuQ1JMRW50cnkoZik7dGhpcy5hUmV2b2tlZENlcnQucHVzaChlKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7aWYodGhpcy5hc24xVmVyc2lvbiE9bnVsbCl7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFWZXJzaW9uKX10aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVNpZ25hdHVyZUFsZyk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFJc3N1ZXIpO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xVGhpc1VwZGF0ZSk7aWYodGhpcy5hc24xTmV4dFVwZGF0ZSE9bnVsbCl7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFOZXh0VXBkYXRlKX1pZih0aGlzLmFSZXZva2VkQ2VydC5sZW5ndGg+MCl7dmFyIGM9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5hUmV2b2tlZENlcnR9KTt0aGlzLmFzbjFBcnJheS5wdXNoKGMpfXZhciBkPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OnRoaXMuYXNuMUFycmF5fSk7dGhpcy5oVExWPWQuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaXNNb2RpZmllZD1mYWxzZTtyZXR1cm4gdGhpcy5oVExWfTt0aGlzLl9pbml0aWFsaXplPWZ1bmN0aW9uKCl7dGhpcy5hc24xVmVyc2lvbj1udWxsO3RoaXMuYXNuMVNpZ25hdHVyZUFsZz1udWxsO3RoaXMuYXNuMUlzc3Vlcj1udWxsO3RoaXMuYXNuMVRoaXNVcGRhdGU9bnVsbDt0aGlzLmFzbjFOZXh0VXBkYXRlPW51bGw7dGhpcy5hUmV2b2tlZENlcnQ9bmV3IEFycmF5KCl9O3RoaXMuX2luaXRpYWxpemUoKX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuVEJTQ2VydExpc3QsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LkNSTEVudHJ5PWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS54NTA5LkNSTEVudHJ5LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYj1udWxsO3ZhciBhPW51bGw7dGhpcy5zZXRDZXJ0U2VyaWFsPWZ1bmN0aW9uKGQpe3RoaXMuc249bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKGQpfTt0aGlzLnNldFJldm9jYXRpb25EYXRlPWZ1bmN0aW9uKGQpe3RoaXMudGltZT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShkKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuc24sdGhpcy50aW1lXX0pO3RoaXMuVExWPWQuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLlRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy50aW1lIT0idW5kZWZpbmVkIil7dGhpcy5zZXRSZXZvY2F0aW9uRGF0ZShjLnRpbWUpfWlmKHR5cGVvZiBjLnNuIT0idW5kZWZpbmVkIil7dGhpcy5zZXRDZXJ0U2VyaWFsKGMuc24pfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNSTEVudHJ5LEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5YNTAwTmFtZT1mdW5jdGlvbihiKXtLSlVSLmFzbjEueDUwOS5YNTAwTmFtZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7dGhpcy5zZXRCeVN0cmluZz1mdW5jdGlvbihjKXt2YXIgZD1jLnNwbGl0KCIvIik7ZC5zaGlmdCgpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt0aGlzLmFzbjFBcnJheS5wdXNoKG5ldyBLSlVSLmFzbjEueDUwOS5SRE4oe3N0cjpkW2VdfSkpfX07dGhpcy5zZXRCeU9iamVjdD1mdW5jdGlvbihlKXtmb3IodmFyIGMgaW4gZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eShjKSl7dmFyIGQ9bmV3IEtKVVIuYXNuMS54NTA5LlJETih7c3RyOmMrIj0iK2VbY119KTt0aGlzLmFzbjFBcnJheT90aGlzLmFzbjFBcnJheS5wdXNoKGQpOnRoaXMuYXNuMUFycmF5PVtkXX19fTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5oVExWPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMuaFRMVn12YXIgYz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTp0aGlzLmFzbjFBcnJheX0pO3RoaXMuaFRMVj1jLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLnN0ciE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlTdHJpbmcoYi5zdHIpfWVsc2V7aWYodHlwZW9mIGI9PT0ib2JqZWN0Iil7dGhpcy5zZXRCeU9iamVjdChiKX19aWYodHlwZW9mIGIuY2VydGlzc3VlciE9InVuZGVmaW5lZCIpe3ZhciBhPW5ldyBYNTA5KCk7YS5oZXg9WDUwOS5wZW1Ub0hleChiLmNlcnRpc3N1ZXIpO3RoaXMuaFRMVj1hLmdldElzc3VlckhleCgpfWlmKHR5cGVvZiBiLmNlcnRzdWJqZWN0IT0idW5kZWZpbmVkIil7dmFyIGE9bmV3IFg1MDkoKTthLmhleD1YNTA5LnBlbVRvSGV4KGIuY2VydHN1YmplY3QpO3RoaXMuaFRMVj1hLmdldFN1YmplY3RIZXgoKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5YNTAwTmFtZSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuUkROPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS54NTA5LlJETi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7dGhpcy5hZGRCeVN0cmluZz1mdW5jdGlvbihiKXt0aGlzLmFzbjFBcnJheS5wdXNoKG5ldyBLSlVSLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWUoe3N0cjpifSkpfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgYj1uZXcgS0pVUi5hc24xLkRFUlNldCh7YXJyYXk6dGhpcy5hc24xQXJyYXl9KTt0aGlzLlRMVj1iLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5UTFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEuc3RyIT0idW5kZWZpbmVkIil7dGhpcy5hZGRCeVN0cmluZyhhLnN0cil9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuUkROLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWU9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuQXR0cmlidXRlVHlwZUFuZFZhbHVlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgZD1udWxsO3ZhciBjPW51bGw7dmFyIGE9InV0ZjgiO3RoaXMuc2V0QnlTdHJpbmc9ZnVuY3Rpb24oZSl7aWYoZS5tYXRjaCgvXihbXj1dKyk9KC4rKSQvKSl7dGhpcy5zZXRCeUF0dHJUeXBlQW5kVmFsdWVTdHIoUmVnRXhwLiQxLFJlZ0V4cC4kMil9ZWxzZXt0aHJvdyJtYWxmb3JtZWQgYXR0clR5cGVBbmRWYWx1ZVN0cjogIitlfX07dGhpcy5zZXRCeUF0dHJUeXBlQW5kVmFsdWVTdHI9ZnVuY3Rpb24oZyxmKXt0aGlzLnR5cGVPYmo9S0pVUi5hc24xLng1MDkuT0lELmF0eXBlMm9iaihnKTt2YXIgZT1hO2lmKGc9PSJDIil7ZT0icHJuIn10aGlzLnZhbHVlT2JqPXRoaXMuZ2V0VmFsdWVPYmooZSxmKX07dGhpcy5nZXRWYWx1ZU9iaj1mdW5jdGlvbihmLGUpe2lmKGY9PSJ1dGY4Iil7cmV0dXJuIG5ldyBLSlVSLmFzbjEuREVSVVRGOFN0cmluZyh7c3RyOmV9KX1pZihmPT0icHJuIil7cmV0dXJuIG5ldyBLSlVSLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nKHtzdHI6ZX0pfWlmKGY9PSJ0ZWwiKXtyZXR1cm4gbmV3IEtKVVIuYXNuMS5ERVJUZWxldGV4U3RyaW5nKHtzdHI6ZX0pfWlmKGY9PSJpYTUiKXtyZXR1cm4gbmV3IEtKVVIuYXNuMS5ERVJJQTVTdHJpbmcoe3N0cjplfSl9dGhyb3cidW5zdXBwb3J0ZWQgZGlyZWN0b3J5IHN0cmluZyB0eXBlOiB0eXBlPSIrZisiIHZhbHVlPSIrZX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGU9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMudHlwZU9iaix0aGlzLnZhbHVlT2JqXX0pO3RoaXMuVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLlRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5zdHIhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5U3RyaW5nKGIuc3RyKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvPWZ1bmN0aW9uKGQpe0tKVVIuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYj1udWxsO3ZhciBjPW51bGw7dmFyIGE9bnVsbDt0aGlzLnNldFJTQUtleT1mdW5jdGlvbihlKXtpZighUlNBS2V5LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGUpKXt0aHJvdyJhcmd1bWVudCBpcyBub3QgUlNBS2V5IGluc3RhbmNlIn10aGlzLnJzYUtleT1lO3ZhciBnPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmUubn0pO3ZhciBmPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6ZS5lfSk7dmFyIGk9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W2csZl19KTt2YXIgaD1pLmdldEVuY29kZWRIZXgoKTt0aGlzLmFzbjFBbGdJZD1uZXcgS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZToicnNhRW5jcnlwdGlvbiJ9KTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIraH0pfTt0aGlzLnNldFJTQVBFTT1mdW5jdGlvbihnKXtpZihnLm1hdGNoKC8tLS0tLUJFR0lOIFBVQkxJQyBLRVktLS0tLS8pKXt2YXIgbj1nO249bi5yZXBsYWNlKC9eLS0tLS1bXi1dKy0tLS0tLywiIik7bj1uLnJlcGxhY2UoLy0tLS0tW14tXSstLS0tLVxzKiQvLCIiKTt2YXIgbT1uLnJlcGxhY2UoL1xzKy9nLCIiKTt2YXIgZj1DcnlwdG9KUy5lbmMuQmFzZTY0LnBhcnNlKG0pO3ZhciBpPUNyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KGYpO3ZhciBrPV9yc2FwZW1fZ2V0SGV4VmFsdWVBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGkpO3ZhciBoPWtbMV07dmFyIGw9aC5zdWJzdHIoMik7dmFyIGU9X3JzYXBlbV9nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXgobCk7dmFyIGo9bmV3IFJTQUtleSgpO2ouc2V0UHVibGljKGVbMF0sZVsxXSk7dGhpcy5zZXRSU0FLZXkoail9ZWxzZXt0aHJvdyJrZXkgbm90IHN1cHBvcnRlZCJ9fTt0aGlzLmdldEFTTjFPYmplY3Q9ZnVuY3Rpb24oKXtpZih0aGlzLmFzbjFBbGdJZD09bnVsbHx8dGhpcy5hc24xU3VialBLZXk9PW51bGwpe3Rocm93ImFsZ0lkIGFuZC9vciBzdWJqUHViS2V5IG5vdCBzZXQifXZhciBlPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmFzbjFBbGdJZCx0aGlzLmFzbjFTdWJqUEtleV19KTtyZXR1cm4gZX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRBU04xT2JqZWN0KCk7dGhpcy5oVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O3RoaXMuX3NldFJTQUtleT1mdW5jdGlvbihlKXt2YXIgZz1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50Ijp7YmlnaW50OmUubn19LHsiaW50Ijp7ImludCI6ZS5lfX1dfSk7dmFyIGY9Zy5nZXRFbmNvZGVkSGV4KCk7dGhpcy5hc24xQWxnSWQ9bmV3IEtKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6InJzYUVuY3J5cHRpb24ifSk7dGhpcy5hc24xU3VialBLZXk9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK2Z9KX07dGhpcy5fc2V0RUM9ZnVuY3Rpb24oZSl7dmFyIGY9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtuYW1lOmUuY3VydmVOYW1lfSk7dGhpcy5hc24xQWxnSWQ9bmV3IEtKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6ImVjUHVibGljS2V5Iixhc24xcGFyYW1zOmZ9KTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIrZS5wdWJLZXlIZXh9KX07dGhpcy5fc2V0RFNBPWZ1bmN0aW9uKGUpe3ZhciBmPW5ldyBLSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50Ijp7YmlnaW50OmUucH19LHsiaW50Ijp7YmlnaW50OmUucX19LHsiaW50Ijp7YmlnaW50OmUuZ319XX0pO3RoaXMuYXNuMUFsZ0lkPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOiJkc2EiLGFzbjFwYXJhbXM6Zn0pO3ZhciBnPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmUueX0pO3RoaXMuYXNuMVN1YmpQS2V5PW5ldyBLSlVSLmFzbjEuREVSQml0U3RyaW5nKHtoZXg6IjAwIitnLmdldEVuY29kZWRIZXgoKX0pfTtpZih0eXBlb2YgZCE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZkIGluc3RhbmNlb2YgUlNBS2V5KXt0aGlzLl9zZXRSU0FLZXkoZCl9ZWxzZXtpZih0eXBlb2YgS0pVUi5jcnlwdG8uRUNEU0EhPSJ1bmRlZmluZWQiJiZkIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0Epe3RoaXMuX3NldEVDKGQpfWVsc2V7aWYodHlwZW9mIEtKVVIuY3J5cHRvLkRTQSE9InVuZGVmaW5lZCImJmQgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0Epe3RoaXMuX3NldERTQShkKX1lbHNle2lmKHR5cGVvZiBkLnJzYWtleSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0UlNBS2V5KGQucnNha2V5KX1lbHNle2lmKHR5cGVvZiBkLnJzYXBlbSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0UlNBUEVNKGQucnNhcGVtKX19fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LlRpbWU9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLng1MDkuVGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgYT1udWxsO3RoaXMuc2V0VGltZVBhcmFtcz1mdW5jdGlvbihkKXt0aGlzLnRpbWVQYXJhbXM9ZH07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGQ9bnVsbDtpZih0aGlzLnRpbWVQYXJhbXMhPW51bGwpe2lmKHRoaXMudHlwZT09InV0YyIpe2Q9bmV3IEtKVVIuYXNuMS5ERVJVVENUaW1lKHRoaXMudGltZVBhcmFtcyl9ZWxzZXtkPW5ldyBLSlVSLmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lKHRoaXMudGltZVBhcmFtcyl9fWVsc2V7aWYodGhpcy50eXBlPT0idXRjIil7ZD1uZXcgS0pVUi5hc24xLkRFUlVUQ1RpbWUoKX1lbHNle2Q9bmV3IEtKVVIuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWUoKX19dGhpcy5UTFY9ZC5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuVExWfTt0aGlzLnR5cGU9InV0YyI7aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy50eXBlIT0idW5kZWZpbmVkIil7dGhpcy50eXBlPWMudHlwZX1lbHNle2lmKHR5cGVvZiBjLnN0ciE9InVuZGVmaW5lZCIpe2lmKGMuc3RyLm1hdGNoKC9eWzAtOV17MTJ9WiQvKSl7dGhpcy50eXBlPSJ1dGMifWlmKGMuc3RyLm1hdGNoKC9eWzAtOV17MTR9WiQvKSl7dGhpcy50eXBlPSJnZW4ifX19dGhpcy50aW1lUGFyYW1zPWN9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5UaW1lLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyPWZ1bmN0aW9uKGUpe0tKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPW51bGw7dmFyIGQ9bnVsbDt2YXIgYj1udWxsO3ZhciBjPWZhbHNlO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMubmFtZUFsZz09bnVsbCYmdGhpcy5hc24xQWxnPT1udWxsKXt0aHJvdyJhbGdvcml0aG0gbm90IHNwZWNpZmllZCJ9aWYodGhpcy5uYW1lQWxnIT1udWxsJiZ0aGlzLmFzbjFBbGc9PW51bGwpe3RoaXMuYXNuMUFsZz1LSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvYmoodGhpcy5uYW1lQWxnKX12YXIgZj1bdGhpcy5hc24xQWxnXTtpZighdGhpcy5wYXJhbUVtcHR5KXtmLnB1c2godGhpcy5hc24xUGFyYW1zKX12YXIgZz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpmfSk7dGhpcy5oVExWPWcuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBlIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGUubmFtZSE9InVuZGVmaW5lZCIpe3RoaXMubmFtZUFsZz1lLm5hbWV9aWYodHlwZW9mIGUuYXNuMXBhcmFtcyE9InVuZGVmaW5lZCIpe3RoaXMuYXNuMVBhcmFtcz1lLmFzbjFwYXJhbXN9aWYodHlwZW9mIGUucGFyYW1lbXB0eSE9InVuZGVmaW5lZCIpe3RoaXMucGFyYW1FbXB0eT1lLnBhcmFtZW1wdHl9fWlmKHRoaXMuYXNuMVBhcmFtcz09bnVsbCl7dGhpcy5hc24xUGFyYW1zPW5ldyBLSlVSLmFzbjEuREVSTnVsbCgpfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcixLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWU9ZnVuY3Rpb24oZCl7S0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBjPW51bGw7dmFyIGI9bnVsbDt2YXIgYT17cmZjODIyOiI4MSIsZG5zOiI4MiIsZG46ImE0Iix1cmk6Ijg2In07dGhpcy5leHBsaWNpdD1mYWxzZTt0aGlzLnNldEJ5UGFyYW09ZnVuY3Rpb24oayl7dmFyIGo9bnVsbDt2YXIgZz1udWxsO2lmKHR5cGVvZiBrPT0idW5kZWZpbmVkIil7cmV0dXJufWlmKHR5cGVvZiBrLnJmYzgyMiE9InVuZGVmaW5lZCIpe3RoaXMudHlwZT0icmZjODIyIjtnPW5ldyBLSlVSLmFzbjEuREVSSUE1U3RyaW5nKHtzdHI6a1t0aGlzLnR5cGVdfSl9aWYodHlwZW9mIGsuZG5zIT0idW5kZWZpbmVkIil7dGhpcy50eXBlPSJkbnMiO2c9bmV3IEtKVVIuYXNuMS5ERVJJQTVTdHJpbmcoe3N0cjprW3RoaXMudHlwZV19KX1pZih0eXBlb2Ygay51cmkhPSJ1bmRlZmluZWQiKXt0aGlzLnR5cGU9InVyaSI7Zz1uZXcgS0pVUi5hc24xLkRFUklBNVN0cmluZyh7c3RyOmtbdGhpcy50eXBlXX0pfWlmKHR5cGVvZiBrLmNlcnRpc3N1ZXIhPSJ1bmRlZmluZWQiKXt0aGlzLnR5cGU9ImRuIjt0aGlzLmV4cGxpY2l0PXRydWU7dmFyIGg9ay5jZXJ0aXNzdWVyO3ZhciBmPW51bGw7aWYoaC5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKSl7Zj09aH1pZihoLmluZGV4T2YoIi0tLS0tQkVHSU4gIikhPS0xKXtmPVg1MDkucGVtVG9IZXgoaCl9aWYoZj09bnVsbCl7dGhyb3ciY2VydGlzc3VlciBwYXJhbSBub3QgY2VydCJ9dmFyIGU9bmV3IFg1MDkoKTtlLmhleD1mO3ZhciBpPWUuZ2V0SXNzdWVySGV4KCk7Zz1uZXcgS0pVUi5hc24xLkFTTjFPYmplY3QoKTtnLmhUTFY9aX1pZih0eXBlb2Ygay5jZXJ0c3ViaiE9InVuZGVmaW5lZCIpe3RoaXMudHlwZT0iZG4iO3RoaXMuZXhwbGljaXQ9dHJ1ZTt2YXIgaD1rLmNlcnRzdWJqO3ZhciBmPW51bGw7aWYoaC5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKSl7Zj09aH1pZihoLmluZGV4T2YoIi0tLS0tQkVHSU4gIikhPS0xKXtmPVg1MDkucGVtVG9IZXgoaCl9aWYoZj09bnVsbCl7dGhyb3ciY2VydHN1YmogcGFyYW0gbm90IGNlcnQifXZhciBlPW5ldyBYNTA5KCk7ZS5oZXg9Zjt2YXIgaT1lLmdldFN1YmplY3RIZXgoKTtnPW5ldyBLSlVSLmFzbjEuQVNOMU9iamVjdCgpO2cuaFRMVj1pfWlmKHRoaXMudHlwZT09bnVsbCl7dGhyb3cidW5zdXBwb3J0ZWQgdHlwZSBpbiBwYXJhbXM9IitrfXRoaXMuYXNuMU9iaj1uZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6dGhpcy5leHBsaWNpdCx0YWc6YVt0aGlzLnR5cGVdLG9iajpnfSl9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzbjFPYmouZ2V0RW5jb2RlZEhleCgpfTtpZih0eXBlb2YgZCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlQYXJhbShkKX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkdlbmVyYWxOYW1lLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5HZW5lcmFsTmFtZXM9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWVzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3RoaXMuc2V0QnlQYXJhbUFycmF5PWZ1bmN0aW9uKGUpe2Zvcih2YXIgYz0wO2M8ZS5sZW5ndGg7YysrKXt2YXIgZD1uZXcgS0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWUoZVtjXSk7dGhpcy5hc24xQXJyYXkucHVzaChkKX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBjPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OnRoaXMuYXNuMUFycmF5fSk7cmV0dXJuIGMuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlQYXJhbUFycmF5KGIpfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWVzLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludE5hbWU9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuRGlzdHJpYnV0aW9uUG9pbnROYW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgZT1udWxsO3ZhciBjPW51bGw7dmFyIGE9bnVsbDt2YXIgZD1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMudHlwZSE9ImZ1bGwiKXt0aHJvdyJjdXJyZW50bHkgdHlwZSBzaGFsbCBiZSAnZnVsbCc6ICIrdGhpcy50eXBlfXRoaXMuYXNuMU9iaj1uZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6ZmFsc2UsdGFnOnRoaXMudGFnLG9iajp0aGlzLmFzbjFWfSk7dGhpcy5oVExWPXRoaXMuYXNuMU9iai5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZihLSlVSLmFzbjEueDUwOS5HZW5lcmFsTmFtZXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYikpe3RoaXMudHlwZT0iZnVsbCI7dGhpcy50YWc9ImEwIjt0aGlzLmFzbjFWPWJ9ZWxzZXt0aHJvdyJUaGlzIGNsYXNzIHN1cHBvcnRzIEdlbmVyYWxOYW1lcyBvbmx5IGFzIGFyZ3VtZW50In19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludE5hbWUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50PWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBjPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2UoKTtpZih0aGlzLmFzbjFEUCE9bnVsbCl7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OnRydWUsdGFnOiJhMCIsb2JqOnRoaXMuYXNuMURQfSk7Yy5hcHBlbmRBU04xT2JqZWN0KGQpfXRoaXMuaFRMVj1jLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLmRwb2JqIT0idW5kZWZpbmVkIil7dGhpcy5hc24xRFA9Yi5kcG9ian19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuT0lEPW5ldyBmdW5jdGlvbihhKXt0aGlzLmF0eXBlMm9pZExpc3Q9e0M6IjIuNS40LjYiLE86IjIuNS40LjEwIixPVToiMi41LjQuMTEiLFNUOiIyLjUuNC44IixMOiIyLjUuNC43IixDTjoiMi41LjQuMyIsRE46IjIuNS40LjQ5IixEQzoiMC45LjIzNDIuMTkyMDAzMDAuMTAwLjEuMjUiLH07dGhpcy5uYW1lMm9pZExpc3Q9e3NoYTE6IjEuMy4xNC4zLjIuMjYiLHNoYTI1NjoiMi4xNi44NDAuMS4xMDEuMy40LjIuMSIsc2hhMzg0OiIyLjE2Ljg0MC4xLjEwMS4zLjQuMi4yIixzaGE1MTI6IjIuMTYuODQwLjEuMTAxLjMuNC4yLjMiLHNoYTIyNDoiMi4xNi44NDAuMS4xMDEuMy40LjIuNCIsbWQ1OiIxLjIuODQwLjExMzU0OS4yLjUiLG1kMjoiMS4zLjE0LjcuMi4yLjEiLHJpcGVtZDE2MDoiMS4zLjM2LjMuMi4xIixNRDJ3aXRoUlNBOiIxLjIuODQwLjExMzU0OS4xLjEuMiIsTUQ0d2l0aFJTQToiMS4yLjg0MC4xMTM1NDkuMS4xLjMiLE1ENXdpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS40IixTSEExd2l0aFJTQToiMS4yLjg0MC4xMTM1NDkuMS4xLjUiLFNIQTIyNHdpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS4xNCIsU0hBMjU2d2l0aFJTQToiMS4yLjg0MC4xMTM1NDkuMS4xLjExIixTSEEzODR3aXRoUlNBOiIxLjIuODQwLjExMzU0OS4xLjEuMTIiLFNIQTUxMndpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS4xMyIsU0hBMXdpdGhFQ0RTQToiMS4yLjg0MC4xMDA0NS40LjEiLFNIQTIyNHdpdGhFQ0RTQToiMS4yLjg0MC4xMDA0NS40LjMuMSIsU0hBMjU2d2l0aEVDRFNBOiIxLjIuODQwLjEwMDQ1LjQuMy4yIixTSEEzODR3aXRoRUNEU0E6IjEuMi44NDAuMTAwNDUuNC4zLjMiLFNIQTUxMndpdGhFQ0RTQToiMS4yLjg0MC4xMDA0NS40LjMuNCIsZHNhOiIxLjIuODQwLjEwMDQwLjQuMSIsU0hBMXdpdGhEU0E6IjEuMi44NDAuMTAwNDAuNC4zIixTSEEyMjR3aXRoRFNBOiIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4xIixTSEEyNTZ3aXRoRFNBOiIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4yIixyc2FFbmNyeXB0aW9uOiIxLjIuODQwLjExMzU0OS4xLjEuMSIsY291bnRyeU5hbWU6IjIuNS40LjYiLG9yZ2FuaXphdGlvbjoiMi41LjQuMTAiLG9yZ2FuaXphdGlvbmFsVW5pdDoiMi41LjQuMTEiLHN0YXRlT3JQcm92aW5jZU5hbWU6IjIuNS40LjgiLGxvY2FsaXR5OiIyLjUuNC43Iixjb21tb25OYW1lOiIyLjUuNC4zIixzdWJqZWN0S2V5SWRlbnRpZmllcjoiMi41LjI5LjE0IixrZXlVc2FnZToiMi41LjI5LjE1IixzdWJqZWN0QWx0TmFtZToiMi41LjI5LjE3IixiYXNpY0NvbnN0cmFpbnRzOiIyLjUuMjkuMTkiLG5hbWVDb25zdHJhaW50czoiMi41LjI5LjMwIixjUkxEaXN0cmlidXRpb25Qb2ludHM6IjIuNS4yOS4zMSIsY2VydGlmaWNhdGVQb2xpY2llczoiMi41LjI5LjMyIixhdXRob3JpdHlLZXlJZGVudGlmaWVyOiIyLjUuMjkuMzUiLHBvbGljeUNvbnN0cmFpbnRzOiIyLjUuMjkuMzYiLGV4dEtleVVzYWdlOiIyLjUuMjkuMzciLGF1dGhvcml0eUluZm9BY2Nlc3M6IjEuMy42LjEuNS41LjcuMS4xIixhbnlFeHRlbmRlZEtleVVzYWdlOiIyLjUuMjkuMzcuMCIsc2VydmVyQXV0aDoiMS4zLjYuMS41LjUuNy4zLjEiLGNsaWVudEF1dGg6IjEuMy42LjEuNS41LjcuMy4yIixjb2RlU2lnbmluZzoiMS4zLjYuMS41LjUuNy4zLjMiLGVtYWlsUHJvdGVjdGlvbjoiMS4zLjYuMS41LjUuNy4zLjQiLHRpbWVTdGFtcGluZzoiMS4zLjYuMS41LjUuNy4zLjgiLG9jc3BTaWduaW5nOiIxLjMuNi4xLjUuNS43LjMuOSIsZWNQdWJsaWNLZXk6IjEuMi44NDAuMTAwNDUuMi4xIixzZWNwMjU2cjE6IjEuMi44NDAuMTAwNDUuMy4xLjciLHNlY3AyNTZrMToiMS4zLjEzMi4wLjEwIixzZWNwMzg0cjE6IjEuMy4xMzIuMC4zNCIscGtjczVQQkVTMjoiMS4yLjg0MC4xMTM1NDkuMS41LjEzIixwa2NzNVBCS0RGMjoiMS4yLjg0MC4xMTM1NDkuMS41LjEyIiwiZGVzLUVERTMtQ0JDIjoiMS4yLjg0MC4xMTM1NDkuMy43IixkYXRhOiIxLjIuODQwLjExMzU0OS4xLjcuMSIsInNpZ25lZC1kYXRhIjoiMS4yLjg0MC4xMTM1NDkuMS43LjIiLCJlbnZlbG9wZWQtZGF0YSI6IjEuMi44NDAuMTEzNTQ5LjEuNy4zIiwiZGlnZXN0ZWQtZGF0YSI6IjEuMi44NDAuMTEzNTQ5LjEuNy41IiwiZW5jcnlwdGVkLWRhdGEiOiIxLjIuODQwLjExMzU0OS4xLjcuNiIsImF1dGhlbnRpY2F0ZWQtZGF0YSI6IjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4xLjIiLHRzdGluZm86IjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4xLjQiLH07dGhpcy5vYmpDYWNoZT17fTt0aGlzLm5hbWUyb2JqPWZ1bmN0aW9uKGIpe2lmKHR5cGVvZiB0aGlzLm9iakNhY2hlW2JdIT0idW5kZWZpbmVkIil7cmV0dXJuIHRoaXMub2JqQ2FjaGVbYl19aWYodHlwZW9mIHRoaXMubmFtZTJvaWRMaXN0W2JdPT0idW5kZWZpbmVkIil7dGhyb3ciTmFtZSBvZiBPYmplY3RJZGVudGlmaWVyIG5vdCBkZWZpbmVkOiAiK2J9dmFyIGM9dGhpcy5uYW1lMm9pZExpc3RbYl07dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtvaWQ6Y30pO3RoaXMub2JqQ2FjaGVbYl09ZDtyZXR1cm4gZH07dGhpcy5hdHlwZTJvYmo9ZnVuY3Rpb24oYil7aWYodHlwZW9mIHRoaXMub2JqQ2FjaGVbYl0hPSJ1bmRlZmluZWQiKXtyZXR1cm4gdGhpcy5vYmpDYWNoZVtiXX1pZih0eXBlb2YgdGhpcy5hdHlwZTJvaWRMaXN0W2JdPT0idW5kZWZpbmVkIil7dGhyb3ciQXR0cmlidXRlVHlwZSBuYW1lIHVuZGVmaW5lZDogIitifXZhciBjPXRoaXMuYXR5cGUyb2lkTGlzdFtiXTt2YXIgZD1uZXcgS0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXIoe29pZDpjfSk7dGhpcy5vYmpDYWNoZVtiXT1kO3JldHVybiBkfX07S0pVUi5hc24xLng1MDkuT0lELm9pZDJuYW1lPWZ1bmN0aW9uKGIpe3ZhciBjPUtKVVIuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZExpc3Q7Zm9yKHZhciBhIGluIGMpe2lmKGNbYV09PWIpe3JldHVybiBhfX1yZXR1cm4iIn07S0pVUi5hc24xLng1MDkuT0lELm5hbWUyb2lkPWZ1bmN0aW9uKGEpe3ZhciBiPUtKVVIuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZExpc3Q7aWYoYlthXT09PXVuZGVmaW5lZCl7cmV0dXJuIiJ9cmV0dXJuIGJbYV19O0tKVVIuYXNuMS54NTA5Llg1MDlVdGlsPW5ldyBmdW5jdGlvbigpe3RoaXMuZ2V0UEtDUzhQdWJLZXlQRU1mcm9tUlNBS2V5PWZ1bmN0aW9uKGkpe3ZhciBoPW51bGw7dmFyIGY9S0pVUi5hc24xLkFTTjFVdGlsLmJpZ0ludFRvTWluVHdvc0NvbXBsZW1lbnRzSGV4KGkubik7dmFyIGo9S0pVUi5hc24xLkFTTjFVdGlsLmludGVnZXJUb0J5dGVIZXgoaS5lKTt2YXIgYT1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2hleDpmfSk7dmFyIGc9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtoZXg6an0pO3ZhciBsPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OlthLGddfSk7dmFyIGM9bC5nZXRFbmNvZGVkSGV4KCk7dmFyIGQ9bmV3IEtKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6InJzYUVuY3J5cHRpb24ifSk7dmFyIGI9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK2N9KTt2YXIgaz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbZCxiXX0pO3ZhciBlPWsuZ2V0RW5jb2RlZEhleCgpO3ZhciBoPUtKVVIuYXNuMS5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGUsIlBVQkxJQyBLRVkiKTtyZXR1cm4gaH19O0tKVVIuYXNuMS54NTA5Llg1MDlVdGlsLm5ld0NlcnRQRU09ZnVuY3Rpb24oZil7dmFyIGM9S0pVUi5hc24xLng1MDk7dmFyIGU9bmV3IGMuVEJTQ2VydGlmaWNhdGUoKTtpZihmLnNlcmlhbCE9PXVuZGVmaW5lZCl7ZS5zZXRTZXJpYWxOdW1iZXJCeVBhcmFtKGYuc2VyaWFsKX1lbHNle3Rocm93InNlcmlhbCBudW1iZXIgdW5kZWZpbmVkLiJ9aWYodHlwZW9mIGYuc2lnYWxnLm5hbWU9PSJzdHJpbmciKXtlLnNldFNpZ25hdHVyZUFsZ0J5UGFyYW0oZi5zaWdhbGcpfWVsc2V7dGhyb3cidW5wcm9wZXIgc2lnbmF0dXJlIGFsZ29yaXRobSBuYW1lIn1pZihmLmlzc3VlciE9PXVuZGVmaW5lZCl7ZS5zZXRJc3N1ZXJCeVBhcmFtKGYuaXNzdWVyKX1lbHNle3Rocm93Imlzc3VlciBuYW1lIHVuZGVmaW5lZC4ifWlmKGYubm90YmVmb3JlIT09dW5kZWZpbmVkKXtlLnNldE5vdEJlZm9yZUJ5UGFyYW0oZi5ub3RiZWZvcmUpfWVsc2V7dGhyb3cibm90YmVmb3JlIHVuZGVmaW5lZC4ifWlmKGYubm90YWZ0ZXIhPT11bmRlZmluZWQpe2Uuc2V0Tm90QWZ0ZXJCeVBhcmFtKGYubm90YWZ0ZXIpfWVsc2V7dGhyb3cibm90YWZ0ZXIgdW5kZWZpbmVkLiJ9aWYoZi5zdWJqZWN0IT09dW5kZWZpbmVkKXtlLnNldFN1YmplY3RCeVBhcmFtKGYuc3ViamVjdCl9ZWxzZXt0aHJvdyJzdWJqZWN0IG5hbWUgdW5kZWZpbmVkLiJ9aWYoZi5zYmpwdWJrZXkhPT11bmRlZmluZWQpe2Uuc2V0U3ViamVjdFB1YmxpY0tleUJ5R2V0S2V5KGYuc2JqcHVia2V5KX1lbHNle3Rocm93InN1YmplY3QgcHVibGljIGtleSB1bmRlZmluZWQuIn1pZihmLmV4dCE9PXVuZGVmaW5lZCYmZi5leHQubGVuZ3RoIT09dW5kZWZpbmVkKXtmb3IodmFyIGI9MDtiPGYuZXh0Lmxlbmd0aDtiKyspe2ZvcihrZXkgaW4gZi5leHRbYl0pe2UuYXBwZW5kRXh0ZW5zaW9uQnlOYW1lKGtleSxmLmV4dFtiXVtrZXldKX19fWlmKGYuY2FrZXk9PT11bmRlZmluZWQmJmYuc2lnaGV4PT09dW5kZWZpbmVkKXt0aHJvdyJwYXJhbSBjYWtleSBhbmQgc2lnaGV4IHVuZGVmaW5lZC4ifXZhciBkPW51bGw7dmFyIGE9bnVsbDtpZihmLmNha2V5KXtkPUtFWVVUSUwuZ2V0S2V5LmFwcGx5KG51bGwsZi5jYWtleSk7YT1uZXcgYy5DZXJ0aWZpY2F0ZSh7dGJzY2VydG9iajplLHBydmtleW9iajpkfSk7YS5zaWduKCl9aWYoZi5zaWdoZXgpe2E9bmV3IGMuQ2VydGlmaWNhdGUoe3Ric2NlcnRvYmo6ZX0pO2Euc2V0U2lnbmF0dXJlSGV4KGYuc2lnaGV4KX1yZXR1cm4gYS5nZXRQRU1TdHJpbmcoKX07Ci8qISBhc24xY21zLTEuMC4yLmpzIChjKSAyMDEzLTIwMTQgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSPT0idW5kZWZpbmVkInx8IUtKVVIpe0tKVVI9e319aWYodHlwZW9mIEtKVVIuYXNuMT09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEpe0tKVVIuYXNuMT17fX1pZih0eXBlb2YgS0pVUi5hc24xLmNtcz09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEuY21zKXtLSlVSLmFzbjEuY21zPXt9fUtKVVIuYXNuMS5jbXMuQXR0cmlidXRlPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS5jbXMuQXR0cmlidXRlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1bXTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZixlLGM7Zj1uZXcgS0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXIoe29pZDp0aGlzLmF0dHJUeXBlT2lkfSk7ZT1uZXcgS0pVUi5hc24xLkRFUlNldCh7YXJyYXk6dGhpcy52YWx1ZUxpc3R9KTt0cnl7ZS5nZXRFbmNvZGVkSGV4KCl9Y2F0Y2goZCl7dGhyb3ciZmFpbCB2YWx1ZVNldC5nZXRFbmNvZGVkSGV4IGluIEF0dHJpYnV0ZSgxKS8iK2R9Yz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbZixlXX0pO3RyeXt0aGlzLmhUTFY9Yy5nZXRFbmNvZGVkSGV4KCl9Y2F0Y2goZCl7dGhyb3ciZmFpbGVkIHNlcS5nZXRFbmNvZGVkSGV4IGluIEF0dHJpYnV0ZSgyKS8iK2R9cmV0dXJuIHRoaXMuaFRMVn19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY21zLkNvbnRlbnRUeXBlPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS5jbXMuQ29udGVudFR5cGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS4zIjt2YXIgYT1udWxsO2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7dmFyIGE9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKGIpO3RoaXMudmFsdWVMaXN0PVthXX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuQ29udGVudFR5cGUsS0pVUi5hc24xLmNtcy5BdHRyaWJ1dGUpO0tKVVIuYXNuMS5jbXMuTWVzc2FnZURpZ2VzdD1mdW5jdGlvbihlKXtLSlVSLmFzbjEuY21zLk1lc3NhZ2VEaWdlc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS40IjtpZih0eXBlb2YgZSE9InVuZGVmaW5lZCIpe2lmKGUuZWNpT2JqIGluc3RhbmNlb2YgS0pVUi5hc24xLmNtcy5FbmNhcHN1bGF0ZWRDb250ZW50SW5mbyYmdHlwZW9mIGUuaGFzaEFsZz09InN0cmluZyIpe3ZhciBiPWUuZWNpT2JqLmVDb250ZW50VmFsdWVIZXg7dmFyIGE9ZS5oYXNoQWxnO3ZhciBjPUtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChiLGEpO3ZhciBkPW5ldyBLSlVSLmFzbjEuREVST2N0ZXRTdHJpbmcoe2hleDpjfSk7ZC5nZXRFbmNvZGVkSGV4KCk7dGhpcy52YWx1ZUxpc3Q9W2RdfWVsc2V7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJPY3RldFN0cmluZyhlKTtkLmdldEVuY29kZWRIZXgoKTt0aGlzLnZhbHVlTGlzdD1bZF19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5NZXNzYWdlRGlnZXN0LEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKTtLSlVSLmFzbjEuY21zLlNpZ25pbmdUaW1lPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuU2lnbmluZ1RpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS41IjtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe3ZhciBhPW5ldyBLSlVSLmFzbjEueDUwOS5UaW1lKGMpO3RyeXthLmdldEVuY29kZWRIZXgoKX1jYXRjaChiKXt0aHJvdyJTaWduaW5nVGltZS5nZXRFbmNvZGVkSGV4KCkgZmFpbGVkLyIrYn10aGlzLnZhbHVlTGlzdD1bYV19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLlNpZ25pbmdUaW1lLEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKTtLSlVSLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZT1mdW5jdGlvbihkKXtLSlVSLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hdHRyVHlwZU9pZD0iMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMTIiO3ZhciBhPUtKVVIuYXNuMTt2YXIgYz1LSlVSLmFzbjEuY21zO3ZhciBiPUtKVVIuY3J5cHRvO3RoaXMuc2V0Q2VydHM9ZnVuY3Rpb24obCl7dmFyIGo9W107Zm9yKHZhciBoPTA7aDxsLmxlbmd0aDtoKyspe3ZhciBmPUtFWVVUSUwuZ2V0SGV4RnJvbVBFTShsW2hdKTt2YXIgZT1iLlV0aWwuaGFzaEhleChmLCJzaGExIik7dmFyIG09bmV3IGEuREVST2N0ZXRTdHJpbmcoe2hleDplfSk7bS5nZXRFbmNvZGVkSGV4KCk7dmFyIGs9bmV3IGMuSXNzdWVyQW5kU2VyaWFsTnVtYmVyKHtjZXJ0OmxbaF19KTtrLmdldEVuY29kZWRIZXgoKTt2YXIgbj1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6W20sa119KTtuLmdldEVuY29kZWRIZXgoKTtqLnB1c2gobil9dmFyIGc9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5Omp9KTtnLmdldEVuY29kZWRIZXgoKTt0aGlzLnZhbHVlTGlzdD1bZ119O2lmKHR5cGVvZiBkIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGQuYXJyYXk9PSJvYmplY3QiKXt0aGlzLnNldENlcnRzKGQuYXJyYXkpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuU2lnbmluZ0NlcnRpZmljYXRlLEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKTtLSlVSLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZVYyPWZ1bmN0aW9uKGUpe0tKVVIuYXNuMS5jbXMuU2lnbmluZ0NlcnRpZmljYXRlVjIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjQ3Ijt2YXIgYj1LSlVSLmFzbjE7dmFyIGY9S0pVUi5hc24xLng1MDk7dmFyIGQ9S0pVUi5hc24xLmNtczt2YXIgYz1LSlVSLmNyeXB0bzt0aGlzLnNldENlcnRzPWZ1bmN0aW9uKHAsaCl7dmFyIG49W107Zm9yKHZhciBsPTA7bDxwLmxlbmd0aDtsKyspe3ZhciBqPUtFWVVUSUwuZ2V0SGV4RnJvbVBFTShwW2xdKTt2YXIgcj1bXTtpZihoIT0ic2hhMjU2Iil7ci5wdXNoKG5ldyBmLkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6aH0pKX12YXIgZz1jLlV0aWwuaGFzaEhleChqLGgpO3ZhciBxPW5ldyBiLkRFUk9jdGV0U3RyaW5nKHtoZXg6Z30pO3EuZ2V0RW5jb2RlZEhleCgpO3IucHVzaChxKTt2YXIgbT1uZXcgZC5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIoe2NlcnQ6cFtsXX0pO20uZ2V0RW5jb2RlZEhleCgpO3IucHVzaChtKTt2YXIgbz1uZXcgYi5ERVJTZXF1ZW5jZSh7YXJyYXk6cn0pO28uZ2V0RW5jb2RlZEhleCgpO24ucHVzaChvKX12YXIgaz1uZXcgYi5ERVJTZXF1ZW5jZSh7YXJyYXk6bn0pO2suZ2V0RW5jb2RlZEhleCgpO3RoaXMudmFsdWVMaXN0PVtrXX07aWYodHlwZW9mIGUhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZS5hcnJheT09Im9iamVjdCIpe3ZhciBhPSJzaGEyNTYiO2lmKHR5cGVvZiBlLmhhc2hBbGc9PSJzdHJpbmciKXthPWUuaGFzaEFsZ310aGlzLnNldENlcnRzKGUuYXJyYXksYSl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5TaWduaW5nQ2VydGlmaWNhdGVWMixLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNtcy5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXI9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLmNtcy5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBlPW51bGw7dmFyIGI9bnVsbDt2YXIgYT1LSlVSLmFzbjE7dmFyIGQ9YS54NTA5O3RoaXMuc2V0QnlDZXJ0UEVNPWZ1bmN0aW9uKGkpe3ZhciBnPUtFWVVUSUwuZ2V0SGV4RnJvbVBFTShpKTt2YXIgZj1uZXcgWDUwOSgpO2YuaGV4PWc7dmFyIGo9Zi5nZXRJc3N1ZXJIZXgoKTt0aGlzLmRJc3N1ZXI9bmV3IGQuWDUwME5hbWUoKTt0aGlzLmRJc3N1ZXIuaFRMVj1qO3ZhciBoPWYuZ2V0U2VyaWFsTnVtYmVySGV4KCk7dGhpcy5kU2VyaWFsPW5ldyBhLkRFUkludGVnZXIoe2hleDpofSl9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBmPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmRJc3N1ZXIsdGhpcy5kU2VyaWFsXX0pO3RoaXMuaFRMVj1mLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjPT0ic3RyaW5nIiYmYy5pbmRleE9mKCItLS0tLUJFR0lOICIpIT0tMSl7dGhpcy5zZXRCeUNlcnRQRU0oYyl9aWYoYy5pc3N1ZXImJmMuc2VyaWFsKXtpZihjLmlzc3VlciBpbnN0YW5jZW9mIEtKVVIuYXNuMS54NTA5Llg1MDBOYW1lKXt0aGlzLmRJc3N1ZXI9Yy5pc3N1ZXJ9ZWxzZXt0aGlzLmRJc3N1ZXI9bmV3IEtKVVIuYXNuMS54NTA5Llg1MDBOYW1lKGMuaXNzdWVyKX1pZihjLnNlcmlhbCBpbnN0YW5jZW9mIEtKVVIuYXNuMS5ERVJJbnRlZ2VyKXt0aGlzLmRTZXJpYWw9Yy5zZXJpYWx9ZWxzZXt0aGlzLmRTZXJpYWw9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKGMuc2VyaWFsKX19aWYodHlwZW9mIGMuY2VydD09InN0cmluZyIpe3RoaXMuc2V0QnlDZXJ0UEVNKGMuY2VydCl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jbXMuQXR0cmlidXRlTGlzdD1mdW5jdGlvbihhKXtLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZUxpc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMubGlzdD1uZXcgQXJyYXkoKTt0aGlzLnNvcnRGbGFnPXRydWU7dGhpcy5hZGQ9ZnVuY3Rpb24oYil7aWYoYiBpbnN0YW5jZW9mIEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKXt0aGlzLmxpc3QucHVzaChiKX19O3RoaXMubGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGlzdC5sZW5ndGh9O3RoaXMuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmxpc3Q9bmV3IEFycmF5KCk7dGhpcy5oVExWPW51bGw7dGhpcy5oVj1udWxsfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5oVExWPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMuaFRMVn12YXIgYj1uZXcgS0pVUi5hc24xLkRFUlNldCh7YXJyYXk6dGhpcy5saXN0LHNvcnRmbGFnOnRoaXMuc29ydEZsYWd9KTt0aGlzLmhUTFY9Yi5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYS5zb3J0ZmxhZyE9InVuZGVmaW5lZCImJmEuc29ydGZsYWc9PWZhbHNlKXt0aGlzLnNvcnRGbGFnPWZhbHNlfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlTGlzdCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNtcy5TaWduZXJJbmZvPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuU2lnbmVySW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS5jbXM7dmFyIGQ9S0pVUi5hc24xLng1MDk7dGhpcy5kQ01TVmVyc2lvbj1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50IjoxfSk7dGhpcy5kU2lnbmVySWRlbnRpZmllcj1udWxsO3RoaXMuZERpZ2VzdEFsZ29yaXRobT1udWxsO3RoaXMuZFNpZ25lZEF0dHJzPW5ldyBiLkF0dHJpYnV0ZUxpc3QoKTt0aGlzLmRTaWdBbGc9bnVsbDt0aGlzLmRTaWc9bnVsbDt0aGlzLmRVbnNpZ25lZEF0dHJzPW5ldyBiLkF0dHJpYnV0ZUxpc3QoKTt0aGlzLnNldFNpZ25lcklkZW50aWZpZXI9ZnVuY3Rpb24oZil7aWYodHlwZW9mIGY9PSJzdHJpbmciJiZmLmluZGV4T2YoIkNFUlRJRklDQVRFIikhPS0xJiZmLmluZGV4T2YoIkJFR0lOIikhPS0xJiZmLmluZGV4T2YoIkVORCIpIT0tMSl7dmFyIGU9Zjt0aGlzLmRTaWduZXJJZGVudGlmaWVyPW5ldyBiLklzc3VlckFuZFNlcmlhbE51bWJlcih7Y2VydDpmfSl9fTt0aGlzLnNldEZvckNvbnRlbnRBbmRIYXNoPWZ1bmN0aW9uKGUpe2lmKHR5cGVvZiBlIT0idW5kZWZpbmVkIil7aWYoZS5lY2lPYmogaW5zdGFuY2VvZiBLSlVSLmFzbjEuY21zLkVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvKXt0aGlzLmRTaWduZWRBdHRycy5hZGQobmV3IGIuQ29udGVudFR5cGUoe29pZDoiMS4yLjg0MC4xMTM1NDkuMS43LjEifSkpO3RoaXMuZFNpZ25lZEF0dHJzLmFkZChuZXcgYi5NZXNzYWdlRGlnZXN0KHtlY2lPYmo6ZS5lY2lPYmosaGFzaEFsZzplLmhhc2hBbGd9KSl9aWYodHlwZW9mIGUuc2RPYmohPSJ1bmRlZmluZWQiJiZlLnNkT2JqIGluc3RhbmNlb2YgS0pVUi5hc24xLmNtcy5TaWduZWREYXRhKXtpZihlLnNkT2JqLmRpZ2VzdEFsZ05hbWVMaXN0LmpvaW4oIjoiKS5pbmRleE9mKGUuaGFzaEFsZyk9PS0xKXtlLnNkT2JqLmRpZ2VzdEFsZ05hbWVMaXN0LnB1c2goZS5oYXNoQWxnKX19aWYodHlwZW9mIGUuaGFzaEFsZz09InN0cmluZyIpe3RoaXMuZERpZ2VzdEFsZ29yaXRobT1uZXcgZC5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOmUuaGFzaEFsZ30pfX19O3RoaXMuc2lnbj1mdW5jdGlvbihqLGYpe3RoaXMuZFNpZ0FsZz1uZXcgZC5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOmZ9KTt2YXIgZz10aGlzLmRTaWduZWRBdHRycy5nZXRFbmNvZGVkSGV4KCk7dmFyIGU9S0VZVVRJTC5nZXRLZXkoaik7dmFyIGk9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOmZ9KTtpLmluaXQoZSk7aS51cGRhdGVIZXgoZyk7dmFyIGg9aS5zaWduKCk7dGhpcy5kU2lnPW5ldyBhLkRFUk9jdGV0U3RyaW5nKHtoZXg6aH0pfTt0aGlzLmFkZFVuc2lnbmVkPWZ1bmN0aW9uKGUpe3RoaXMuaFRMVj1udWxsO3RoaXMuZFVuc2lnbmVkQXR0cnMuaFRMVj1udWxsO3RoaXMuZFVuc2lnbmVkQXR0cnMuYWRkKGUpfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmRTaWduZWRBdHRycyBpbnN0YW5jZW9mIEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlTGlzdCYmdGhpcy5kU2lnbmVkQXR0cnMubGVuZ3RoKCk9PTApe3Rocm93IlNpZ25lZEF0dHJzIGxlbmd0aCA9IDAgKGVtcHR5KSJ9dmFyIGU9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6dGhpcy5kU2lnbmVkQXR0cnMsdGFnOiJhMCIsZXhwbGljaXQ6ZmFsc2V9KTt2YXIgaD1udWxsO2lmKHRoaXMuZFVuc2lnbmVkQXR0cnMubGVuZ3RoKCk+MCl7aD1uZXcgYS5ERVJUYWdnZWRPYmplY3Qoe29iajp0aGlzLmRVbnNpZ25lZEF0dHJzLHRhZzoiYTEiLGV4cGxpY2l0OmZhbHNlfSl9dmFyIGc9W3RoaXMuZENNU1ZlcnNpb24sdGhpcy5kU2lnbmVySWRlbnRpZmllcix0aGlzLmREaWdlc3RBbGdvcml0aG0sZSx0aGlzLmRTaWdBbGcsdGhpcy5kU2lnLF07aWYoaCE9bnVsbCl7Zy5wdXNoKGgpfXZhciBmPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpnfSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLlNpZ25lckluZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jbXMuRW5jYXBzdWxhdGVkQ29udGVudEluZm89ZnVuY3Rpb24oYyl7S0pVUi5hc24xLmNtcy5FbmNhcHN1bGF0ZWRDb250ZW50SW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS5jbXM7dmFyIGQ9S0pVUi5hc24xLng1MDk7dGhpcy5kRUNvbnRlbnRUeXBlPW5ldyBhLkRFUk9iamVjdElkZW50aWZpZXIoe25hbWU6ImRhdGEifSk7dGhpcy5kRUNvbnRlbnQ9bnVsbDt0aGlzLmlzRGV0YWNoZWQ9ZmFsc2U7dGhpcy5lQ29udGVudFZhbHVlSGV4PW51bGw7dGhpcy5zZXRDb250ZW50VHlwZT1mdW5jdGlvbihlKXtpZihlLm1hdGNoKC9eWzAtMl1bLl1bMC05Ll0rJC8pKXt0aGlzLmRFQ29udGVudFR5cGU9bmV3IGEuREVST2JqZWN0SWRlbnRpZmllcih7b2lkOmV9KX1lbHNle3RoaXMuZEVDb250ZW50VHlwZT1uZXcgYS5ERVJPYmplY3RJZGVudGlmaWVyKHtuYW1lOmV9KX19O3RoaXMuc2V0Q29udGVudFZhbHVlPWZ1bmN0aW9uKGUpe2lmKHR5cGVvZiBlIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGUuaGV4PT0ic3RyaW5nIil7dGhpcy5lQ29udGVudFZhbHVlSGV4PWUuaGV4fWVsc2V7aWYodHlwZW9mIGUuc3RyPT0ic3RyaW5nIil7dGhpcy5lQ29udGVudFZhbHVlSGV4PXV0Zjh0b2hleChlLnN0cil9fX19O3RoaXMuc2V0Q29udGVudFZhbHVlSGV4PWZ1bmN0aW9uKGUpe3RoaXMuZUNvbnRlbnRWYWx1ZUhleD1lfTt0aGlzLnNldENvbnRlbnRWYWx1ZVN0cj1mdW5jdGlvbihlKXt0aGlzLmVDb250ZW50VmFsdWVIZXg9dXRmOHRvaGV4KGUpfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5lQ29udGVudFZhbHVlSGV4IT0ic3RyaW5nIil7dGhyb3ciZUNvbnRlbnRWYWx1ZSBub3QgeWV0IHNldCJ9dmFyIGc9bmV3IGEuREVST2N0ZXRTdHJpbmcoe2hleDp0aGlzLmVDb250ZW50VmFsdWVIZXh9KTt0aGlzLmRFQ29udGVudD1uZXcgYS5ERVJUYWdnZWRPYmplY3Qoe29iajpnLHRhZzoiYTAiLGV4cGxpY2l0OnRydWV9KTt2YXIgZT1bdGhpcy5kRUNvbnRlbnRUeXBlXTtpZighdGhpcy5pc0RldGFjaGVkKXtlLnB1c2godGhpcy5kRUNvbnRlbnQpfXZhciBmPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTplfSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLkVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY21zLkNvbnRlbnRJbmZvPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuQ29udGVudEluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY21zO3ZhciBkPUtKVVIuYXNuMS54NTA5O3RoaXMuZENvbnRlbnRUeXBlPW51bGw7dGhpcy5kQ29udGVudD1udWxsO3RoaXMuc2V0Q29udGVudFR5cGU9ZnVuY3Rpb24oZSl7aWYodHlwZW9mIGU9PSJzdHJpbmciKXt0aGlzLmRDb250ZW50VHlwZT1kLk9JRC5uYW1lMm9iaihlKX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBmPW5ldyBhLkRFUlRhZ2dlZE9iamVjdCh7b2JqOnRoaXMuZENvbnRlbnQsdGFnOiJhMCIsZXhwbGljaXQ6dHJ1ZX0pO3ZhciBlPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpbdGhpcy5kQ29udGVudFR5cGUsZl19KTt0aGlzLmhUTFY9ZS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZihjLnR5cGUpe3RoaXMuc2V0Q29udGVudFR5cGUoYy50eXBlKX1pZihjLm9iaiYmYy5vYmogaW5zdGFuY2VvZiBhLkFTTjFPYmplY3Qpe3RoaXMuZENvbnRlbnQ9Yy5vYmp9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5Db250ZW50SW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNtcy5TaWduZWREYXRhPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuU2lnbmVkRGF0YS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS5jbXM7dmFyIGQ9S0pVUi5hc24xLng1MDk7dGhpcy5kQ01TVmVyc2lvbj1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50IjoxfSk7dGhpcy5kRGlnZXN0QWxncz1udWxsO3RoaXMuZGlnZXN0QWxnTmFtZUxpc3Q9W107dGhpcy5kRW5jYXBDb250ZW50SW5mbz1uZXcgYi5FbmNhcHN1bGF0ZWRDb250ZW50SW5mbygpO3RoaXMuZENlcnRzPW51bGw7dGhpcy5jZXJ0aWZpY2F0ZUxpc3Q9W107dGhpcy5jcmxMaXN0PVtdO3RoaXMuc2lnbmVySW5mb0xpc3Q9W25ldyBiLlNpZ25lckluZm8oKV07dGhpcy5hZGRDZXJ0aWZpY2F0ZXNCeVBFTT1mdW5jdGlvbihlKXt2YXIgZj1LRVlVVElMLmdldEhleEZyb21QRU0oZSk7dmFyIGc9bmV3IGEuQVNOMU9iamVjdCgpO2cuaFRMVj1mO3RoaXMuY2VydGlmaWNhdGVMaXN0LnB1c2goZyl9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLmhUTFY9PSJzdHJpbmciKXtyZXR1cm4gdGhpcy5oVExWfWlmKHRoaXMuZERpZ2VzdEFsZ3M9PW51bGwpe3ZhciBrPVtdO2Zvcih2YXIgaj0wO2o8dGhpcy5kaWdlc3RBbGdOYW1lTGlzdC5sZW5ndGg7aisrKXt2YXIgaD10aGlzLmRpZ2VzdEFsZ05hbWVMaXN0W2pdO3ZhciBtPW5ldyBkLkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6aH0pO2sucHVzaChtKX10aGlzLmREaWdlc3RBbGdzPW5ldyBhLkRFUlNldCh7YXJyYXk6a30pfXZhciBlPVt0aGlzLmRDTVNWZXJzaW9uLHRoaXMuZERpZ2VzdEFsZ3MsdGhpcy5kRW5jYXBDb250ZW50SW5mb107aWYodGhpcy5kQ2VydHM9PW51bGwpe2lmKHRoaXMuY2VydGlmaWNhdGVMaXN0Lmxlbmd0aD4wKXt2YXIgbD1uZXcgYS5ERVJTZXQoe2FycmF5OnRoaXMuY2VydGlmaWNhdGVMaXN0fSk7dGhpcy5kQ2VydHM9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6bCx0YWc6ImEwIixleHBsaWNpdDpmYWxzZX0pfX1pZih0aGlzLmRDZXJ0cyE9bnVsbCl7ZS5wdXNoKHRoaXMuZENlcnRzKX12YXIgZz1uZXcgYS5ERVJTZXQoe2FycmF5OnRoaXMuc2lnbmVySW5mb0xpc3R9KTtlLnB1c2goZyk7dmFyIGY9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmV9KTt0aGlzLmhUTFY9Zi5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07dGhpcy5nZXRDb250ZW50SW5mbz1mdW5jdGlvbigpe3RoaXMuZ2V0RW5jb2RlZEhleCgpO3ZhciBlPW5ldyBiLkNvbnRlbnRJbmZvKHt0eXBlOiJzaWduZWQtZGF0YSIsb2JqOnRoaXN9KTtyZXR1cm4gZX07dGhpcy5nZXRDb250ZW50SW5mb0VuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldENvbnRlbnRJbmZvKCk7dmFyIGY9ZS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIGZ9O3RoaXMuZ2V0UEVNPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRDb250ZW50SW5mb0VuY29kZWRIZXgoKTt2YXIgZj1hLkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgoZSwiQ01TIik7cmV0dXJuIGZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLlNpZ25lZERhdGEsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jbXMuQ01TVXRpbD1uZXcgZnVuY3Rpb24oKXt9O0tKVVIuYXNuMS5jbXMuQ01TVXRpbC5uZXdTaWduZWREYXRhPWZ1bmN0aW9uKGEpe3ZhciBoPUtKVVIuYXNuMS5jbXM7dmFyIGc9S0pVUi5hc24xLmNhZGVzO3ZhciBmPW5ldyBoLlNpZ25lZERhdGEoKTtmLmRFbmNhcENvbnRlbnRJbmZvLnNldENvbnRlbnRWYWx1ZShhLmNvbnRlbnQpO2lmKHR5cGVvZiBhLmNlcnRzPT0ib2JqZWN0Iil7Zm9yKHZhciBiPTA7YjxhLmNlcnRzLmxlbmd0aDtiKyspe2YuYWRkQ2VydGlmaWNhdGVzQnlQRU0oYS5jZXJ0c1tiXSl9fWYuc2lnbmVySW5mb0xpc3Q9W107Zm9yKHZhciBiPTA7YjxhLnNpZ25lckluZm9zLmxlbmd0aDtiKyspe3ZhciBkPWEuc2lnbmVySW5mb3NbYl07dmFyIGM9bmV3IGguU2lnbmVySW5mbygpO2Muc2V0U2lnbmVySWRlbnRpZmllcihkLnNpZ25lckNlcnQpO2Muc2V0Rm9yQ29udGVudEFuZEhhc2goe3NkT2JqOmYsZWNpT2JqOmYuZEVuY2FwQ29udGVudEluZm8saGFzaEFsZzpkLmhhc2hBbGd9KTtmb3IoYXR0ck5hbWUgaW4gZC5zQXR0cil7dmFyIGo9ZC5zQXR0clthdHRyTmFtZV07aWYoYXR0ck5hbWU9PSJTaWduaW5nVGltZSIpe3ZhciBlPW5ldyBoLlNpZ25pbmdUaW1lKGopO2MuZFNpZ25lZEF0dHJzLmFkZChlKX1pZihhdHRyTmFtZT09IlNpZ25pbmdDZXJ0aWZpY2F0ZSIpe3ZhciBlPW5ldyBoLlNpZ25pbmdDZXJ0aWZpY2F0ZShqKTtjLmRTaWduZWRBdHRycy5hZGQoZSl9aWYoYXR0ck5hbWU9PSJTaWduaW5nQ2VydGlmaWNhdGVWMiIpe3ZhciBlPW5ldyBoLlNpZ25pbmdDZXJ0aWZpY2F0ZVYyKGopO2MuZFNpZ25lZEF0dHJzLmFkZChlKX1pZihhdHRyTmFtZT09IlNpZ25hdHVyZVBvbGljeUlkZW50aWZpZXIiKXt2YXIgZT1uZXcgZy5TaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyKGopO2MuZFNpZ25lZEF0dHJzLmFkZChlKX19Yy5zaWduKGQuc2lnbmVyUHJ2S2V5LGQuc2lnQWxnKTtmLnNpZ25lckluZm9MaXN0LnB1c2goYyl9cmV0dXJuIGZ9OwovKiEgYXNuMXRzcC0xLjAuMS5qcyAoYykgMjAxNCBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5hc24xPT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMSl7S0pVUi5hc24xPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjEudHNwPT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMS50c3Ape0tKVVIuYXNuMS50c3A9e319S0pVUi5hc24xLnRzcC5BY2N1cmFjeT1mdW5jdGlvbihiKXtLSlVSLmFzbjEudHNwLkFjY3VyYWN5LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dGhpcy5zZWNvbmRzPW51bGw7dGhpcy5taWxsaXM9bnVsbDt0aGlzLm1pY3Jvcz1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBlPW51bGw7dmFyIGc9bnVsbDt2YXIgaT1udWxsO3ZhciBjPVtdO2lmKHRoaXMuc2Vjb25kcyE9bnVsbCl7ZT1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50Ijp0aGlzLnNlY29uZHN9KTtjLnB1c2goZSl9aWYodGhpcy5taWxsaXMhPW51bGwpe3ZhciBoPW5ldyBhLkRFUkludGVnZXIoeyJpbnQiOnRoaXMubWlsbGlzfSk7Zz1uZXcgYS5ERVJUYWdnZWRPYmplY3Qoe29iajpoLHRhZzoiODAiLGV4cGxpY2l0OmZhbHNlfSk7Yy5wdXNoKGcpfWlmKHRoaXMubWljcm9zIT1udWxsKXt2YXIgZj1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50Ijp0aGlzLm1pY3Jvc30pO2k9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6Zix0YWc6IjgxIixleHBsaWNpdDpmYWxzZX0pO2MucHVzaChpKX12YXIgZD1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6Y30pO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLnNlY29uZHM9PSJudW1iZXIiKXt0aGlzLnNlY29uZHM9Yi5zZWNvbmRzfWlmKHR5cGVvZiBiLm1pbGxpcz09Im51bWJlciIpe3RoaXMubWlsbGlzPWIubWlsbGlzfWlmKHR5cGVvZiBiLm1pY3Jvcz09Im51bWJlciIpe3RoaXMubWljcm9zPWIubWljcm9zfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuQWNjdXJhY3ksS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuTWVzc2FnZUltcHJpbnQ9ZnVuY3Rpb24oYil7S0pVUi5hc24xLnRzcC5NZXNzYWdlSW1wcmludC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBjPUtKVVIuYXNuMS54NTA5O3RoaXMuZEhhc2hBbGc9bnVsbDt0aGlzLmRIYXNoVmFsdWU9bnVsbDt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5oVExWPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMuaFRMVn12YXIgZD1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuZEhhc2hBbGcsdGhpcy5kSGFzaFZhbHVlXX0pO3JldHVybiBkLmdldEVuY29kZWRIZXgoKX07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5oYXNoQWxnPT0ic3RyaW5nIil7dGhpcy5kSGFzaEFsZz1uZXcgYy5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOmIuaGFzaEFsZ30pfWlmKHR5cGVvZiBiLmhhc2hWYWx1ZT09InN0cmluZyIpe3RoaXMuZEhhc2hWYWx1ZT1uZXcgYS5ERVJPY3RldFN0cmluZyh7aGV4OmIuaGFzaFZhbHVlfSl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5NZXNzYWdlSW1wcmludCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5UaW1lU3RhbXBSZXE9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLnRzcC5UaW1lU3RhbXBSZXEuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEudHNwO3RoaXMuZFZlcnNpb249bmV3IGEuREVSSW50ZWdlcih7ImludCI6MX0pO3RoaXMuZE1lc3NhZ2VJbXByaW50PW51bGw7dGhpcy5kUG9saWN5PW51bGw7dGhpcy5kTm9uY2U9bnVsbDt0aGlzLmNlcnRSZXE9dHJ1ZTt0aGlzLnNldE1lc3NhZ2VJbXByaW50PWZ1bmN0aW9uKGQpe2lmKGQgaW5zdGFuY2VvZiBLSlVSLmFzbjEudHNwLk1lc3NhZ2VJbXByaW50KXt0aGlzLmRNZXNzYWdlSW1wcmludD1kO3JldHVybn1pZih0eXBlb2YgZD09Im9iamVjdCIpe3RoaXMuZE1lc3NhZ2VJbXByaW50PW5ldyBiLk1lc3NhZ2VJbXByaW50KGQpfX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5kTWVzc2FnZUltcHJpbnQ9PW51bGwpe3Rocm93Im1lc3NhZ2VJbXByaW50IHNoYWxsIGJlIHNwZWNpZmllZCJ9dmFyIGQ9W3RoaXMuZFZlcnNpb24sdGhpcy5kTWVzc2FnZUltcHJpbnRdO2lmKHRoaXMuZFBvbGljeSE9bnVsbCl7ZC5wdXNoKHRoaXMuZFBvbGljeSl9aWYodGhpcy5kTm9uY2UhPW51bGwpe2QucHVzaCh0aGlzLmROb25jZSl9aWYodGhpcy5jZXJ0UmVxKXtkLnB1c2gobmV3IGEuREVSQm9vbGVhbigpKX12YXIgZT1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6ZH0pO3RoaXMuaFRMVj1lLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLm1pPT0ib2JqZWN0Iil7dGhpcy5zZXRNZXNzYWdlSW1wcmludChjLm1pKX1pZih0eXBlb2YgYy5wb2xpY3k9PSJvYmplY3QiKXt0aGlzLmRQb2xpY3k9bmV3IGEuREVST2JqZWN0SWRlbnRpZmllcihjLnBvbGljeSl9aWYodHlwZW9mIGMubm9uY2U9PSJvYmplY3QiKXt0aGlzLmROb25jZT1uZXcgYS5ERVJJbnRlZ2VyKGMubm9uY2UpfWlmKHR5cGVvZiBjLmNlcnRyZXE9PSJib29sZWFuIil7dGhpcy5jZXJ0UmVxPWMuY2VydHJlcX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLlRpbWVTdGFtcFJlcSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5UU1RJbmZvPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS50c3AuVFNUSW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBkPUtKVVIuYXNuMS54NTA5O3ZhciBiPUtKVVIuYXNuMS50c3A7dGhpcy5kVmVyc2lvbj1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50IjoxfSk7dGhpcy5kUG9saWN5PW51bGw7dGhpcy5kTWVzc2FnZUltcHJpbnQ9bnVsbDt0aGlzLmRTZXJpYWxOdW1iZXI9bnVsbDt0aGlzLmRHZW5UaW1lPW51bGw7dGhpcy5kQWNjdXJhY3k9bnVsbDt0aGlzLmRPcmRlcmluZz1udWxsO3RoaXMuZE5vbmNlPW51bGw7dGhpcy5kVHNhPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGU9W3RoaXMuZFZlcnNpb25dO2lmKHRoaXMuZFBvbGljeT09bnVsbCl7dGhyb3cicG9saWN5IHNoYWxsIGJlIHNwZWNpZmllZC4ifWUucHVzaCh0aGlzLmRQb2xpY3kpO2lmKHRoaXMuZE1lc3NhZ2VJbXByaW50PT1udWxsKXt0aHJvdyJtZXNzYWdlSW1wcmludCBzaGFsbCBiZSBzcGVjaWZpZWQuIn1lLnB1c2godGhpcy5kTWVzc2FnZUltcHJpbnQpO2lmKHRoaXMuZFNlcmlhbE51bWJlcj09bnVsbCl7dGhyb3cic2VyaWFsTnVtYmVyIHNoYWxsIGJlIHNwZWNpZmllZC4ifWUucHVzaCh0aGlzLmRTZXJpYWxOdW1iZXIpO2lmKHRoaXMuZEdlblRpbWU9PW51bGwpe3Rocm93ImdlblRpbWUgc2hhbGwgYmUgc3BlY2lmaWVkLiJ9ZS5wdXNoKHRoaXMuZEdlblRpbWUpO2lmKHRoaXMuZEFjY3VyYWN5IT1udWxsKXtlLnB1c2godGhpcy5kQWNjdXJhY3kpfWlmKHRoaXMuZE9yZGVyaW5nIT1udWxsKXtlLnB1c2godGhpcy5kT3JkZXJpbmcpfWlmKHRoaXMuZE5vbmNlIT1udWxsKXtlLnB1c2godGhpcy5kTm9uY2UpfWlmKHRoaXMuZFRzYSE9bnVsbCl7ZS5wdXNoKHRoaXMuZFRzYSl9dmFyIGY9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmV9KTt0aGlzLmhUTFY9Zi5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy5wb2xpY3k9PSJzdHJpbmciKXtpZighYy5wb2xpY3kubWF0Y2goL15bMC05Ll0rJC8pKXt0aHJvdyJwb2xpY3kgc2hhbGwgYmUgb2lkIGxpa2UgMC4xLjQuMTM0In10aGlzLmRQb2xpY3k9bmV3IGEuREVST2JqZWN0SWRlbnRpZmllcih7b2lkOmMucG9saWN5fSl9aWYodHlwZW9mIGMubWVzc2FnZUltcHJpbnQhPSJ1bmRlZmluZWQiKXt0aGlzLmRNZXNzYWdlSW1wcmludD1uZXcgYi5NZXNzYWdlSW1wcmludChjLm1lc3NhZ2VJbXByaW50KX1pZih0eXBlb2YgYy5zZXJpYWxOdW1iZXIhPSJ1bmRlZmluZWQiKXt0aGlzLmRTZXJpYWxOdW1iZXI9bmV3IGEuREVSSW50ZWdlcihjLnNlcmlhbE51bWJlcil9aWYodHlwZW9mIGMuZ2VuVGltZSE9InVuZGVmaW5lZCIpe3RoaXMuZEdlblRpbWU9bmV3IGEuREVSR2VuZXJhbGl6ZWRUaW1lKGMuZ2VuVGltZSl9aWYodHlwZW9mIGMuYWNjdXJhY3khPSJ1bmRlZmluZCIpe3RoaXMuZEFjY3VyYWN5PW5ldyBiLkFjY3VyYWN5KGMuYWNjdXJhY3kpfWlmKHR5cGVvZiBjLm9yZGVyaW5nIT0idW5kZWZpbmVkIiYmYy5vcmRlcmluZz09dHJ1ZSl7dGhpcy5kT3JkZXJpbmc9bmV3IGEuREVSQm9vbGVhbigpfWlmKHR5cGVvZiBjLm5vbmNlIT0idW5kZWZpbmVkIil7dGhpcy5kTm9uY2U9bmV3IGEuREVSSW50ZWdlcihjLm5vbmNlKX1pZih0eXBlb2YgYy50c2EhPSJ1bmRlZmluZWQiKXt0aGlzLmRUc2E9bmV3IGQuWDUwME5hbWUoYy50c2EpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuVFNUSW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5UaW1lU3RhbXBSZXNwPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS50c3AuVGltZVN0YW1wUmVzcC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS50c3A7dGhpcy5kU3RhdHVzPW51bGw7dGhpcy5kVFNUPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5kU3RhdHVzPT1udWxsKXt0aHJvdyJzdGF0dXMgc2hhbGwgYmUgc3BlY2lmaWVkIn12YXIgZD1bdGhpcy5kU3RhdHVzXTtpZih0aGlzLmRUU1QhPW51bGwpe2QucHVzaCh0aGlzLmRUU1QpfXZhciBlPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpkfSk7dGhpcy5oVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMuc3RhdHVzPT0ib2JqZWN0Iil7dGhpcy5kU3RhdHVzPW5ldyBiLlBLSVN0YXR1c0luZm8oYy5zdGF0dXMpfWlmKHR5cGVvZiBjLnRzdCE9InVuZGVmaW5lZCImJmMudHN0IGluc3RhbmNlb2YgS0pVUi5hc24xLkFTTjFPYmplY3Qpe3RoaXMuZFRTVD1jLnRzdC5nZXRDb250ZW50SW5mbygpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuVGltZVN0YW1wUmVzcCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5QS0lTdGF0dXNJbmZvPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS50c3AuUEtJU3RhdHVzSW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS50c3A7dGhpcy5kU3RhdHVzPW51bGw7dGhpcy5kU3RhdHVzU3RyaW5nPW51bGw7dGhpcy5kRmFpbHVyZUluZm89bnVsbDt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmRTdGF0dXM9PW51bGwpe3Rocm93InN0YXR1cyBzaGFsbCBiZSBzcGVjaWZpZWQifXZhciBkPVt0aGlzLmRTdGF0dXNdO2lmKHRoaXMuZFN0YXR1c1N0cmluZyE9bnVsbCl7ZC5wdXNoKHRoaXMuZFN0YXR1c1N0cmluZyl9aWYodGhpcy5kRmFpbHVyZUluZm8hPW51bGwpe2QucHVzaCh0aGlzLmRGYWlsdXJlSW5mbyl9dmFyIGU9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmR9KTt0aGlzLmhUTFY9ZS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy5zdGF0dXM9PSJvYmplY3QiKXt0aGlzLmRTdGF0dXM9bmV3IGIuUEtJU3RhdHVzKGMuc3RhdHVzKX1pZih0eXBlb2YgYy5zdGF0c3RyPT0ib2JqZWN0Iil7dGhpcy5kU3RhdHVzU3RyaW5nPW5ldyBiLlBLSUZyZWVUZXh0KHthcnJheTpjLnN0YXRzdHJ9KX1pZih0eXBlb2YgYy5mYWlsaW5mbz09Im9iamVjdCIpe3RoaXMuZEZhaWx1cmVJbmZvPW5ldyBiLlBLSUZhaWx1cmVJbmZvKGMuZmFpbGluZm8pfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuUEtJU3RhdHVzSW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5QS0lTdGF0dXM9ZnVuY3Rpb24oZSl7S0pVUi5hc24xLnRzcC5QS0lTdGF0dXMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEudHNwO3ZhciBkPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dGhpcy5oVExWPXRoaXMuZFN0YXR1cy5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGUhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZS5uYW1lIT0idW5kZWZpbmVkIil7dmFyIGM9Yi5QS0lTdGF0dXMudmFsdWVMaXN0O2lmKHR5cGVvZiBjW2UubmFtZV09PSJ1bmRlZmluZWQiKXt0aHJvdyJuYW1lIHVuZGVmaW5lZDogIitlLm5hbWV9dGhpcy5kU3RhdHVzPW5ldyBhLkRFUkludGVnZXIoeyJpbnQiOmNbZS5uYW1lXX0pfWVsc2V7dGhpcy5kU3RhdHVzPW5ldyBhLkRFUkludGVnZXIoZSl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5QS0lTdGF0dXMsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuUEtJU3RhdHVzLnZhbHVlTGlzdD17Z3JhbnRlZDowLGdyYW50ZWRXaXRoTW9kczoxLHJlamVjdGlvbjoyLHdhaXRpbmc6MyxyZXZvY2F0aW9uV2FybmluZzo0LHJldm9jYXRpb25Ob3RpZmljYXRpb246NX07S0pVUi5hc24xLnRzcC5QS0lGcmVlVGV4dD1mdW5jdGlvbihiKXtLSlVSLmFzbjEudHNwLlBLSUZyZWVUZXh0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dGhpcy50ZXh0TGlzdD1bXTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgYz1bXTtmb3IodmFyIGU9MDtlPHRoaXMudGV4dExpc3QubGVuZ3RoO2UrKyl7Yy5wdXNoKG5ldyBhLkRFUlVURjhTdHJpbmcoe3N0cjp0aGlzLnRleHRMaXN0W2VdfSkpfXZhciBkPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpjfSk7dGhpcy5oVExWPWQuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGIuYXJyYXk9PSJvYmplY3QiKXt0aGlzLnRleHRMaXN0PWIuYXJyYXl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5QS0lGcmVlVGV4dCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5QS0lGYWlsdXJlSW5mbz1mdW5jdGlvbihkKXtLSlVSLmFzbjEudHNwLlBLSUZhaWx1cmVJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dmFyIGI9S0pVUi5hc24xLnRzcDt0aGlzLnZhbHVlPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy52YWx1ZT09bnVsbCl7dGhyb3cidmFsdWUgc2hhbGwgYmUgc3BlY2lmaWVkIn12YXIgZT1uZXcgTnVtYmVyKHRoaXMudmFsdWUpLnRvU3RyaW5nKDIpO3ZhciBmPW5ldyBhLkRFUkJpdFN0cmluZygpO2Yuc2V0QnlCaW5hcnlTdHJpbmcoZSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBkIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGQubmFtZT09InN0cmluZyIpe3ZhciBjPWIuUEtJRmFpbHVyZUluZm8udmFsdWVMaXN0O2lmKHR5cGVvZiBjW2QubmFtZV09PSJ1bmRlZmluZWQiKXt0aHJvdyJuYW1lIHVuZGVmaW5lZDogIitkLm5hbWV9dGhpcy52YWx1ZT1jW2QubmFtZV19ZWxzZXtpZih0eXBlb2YgZFsiaW50Il09PSJudW1iZXIiKXt0aGlzLnZhbHVlPWRbImludCJdfX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLlBLSUZhaWx1cmVJbmZvLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEudHNwLlBLSUZhaWx1cmVJbmZvLnZhbHVlTGlzdD17YmFkQWxnOjAsYmFkUmVxdWVzdDoyLGJhZERhdGFGb3JtYXQ6NSx0aW1lTm90QXZhaWxhYmxlOjE0LHVuYWNjZXB0ZWRQb2xpY3k6MTUsdW5hY2NlcHRlZEV4dGVuc2lvbjoxNixhZGRJbmZvTm90QXZhaWxhYmxlOjE3LHN5c3RlbUZhaWx1cmU6MjV9O0tKVVIuYXNuMS50c3AuQWJzdHJhY3RUU0FBZGFwdGVyPWZ1bmN0aW9uKGEpe3RoaXMuZ2V0VFNUSGV4PWZ1bmN0aW9uKGMsYil7dGhyb3cibm90IGltcGxlbWVudGVkIHlldCJ9fTtLSlVSLmFzbjEudHNwLlNpbXBsZVRTQUFkYXB0ZXI9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLnRzcC5TaW1wbGVUU0FBZGFwdGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLnBhcmFtcz1udWxsO3RoaXMuc2VyaWFsPTA7dGhpcy5nZXRUU1RIZXg9ZnVuY3Rpb24oYyxiKXt2YXIgZT1LSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoYyxiKTt0aGlzLnBhcmFtcy50c3RJbmZvLm1lc3NhZ2VJbXByaW50PXtoYXNoQWxnOmIsaGFzaFZhbHVlOmV9O3RoaXMucGFyYW1zLnRzdEluZm8uc2VyaWFsTnVtYmVyPXsiaW50Ijp0aGlzLnNlcmlhbCsrfTt2YXIgZD1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMDAwMDAwMCk7dGhpcy5wYXJhbXMudHN0SW5mby5ub25jZT17ImludCI6ZH07dmFyIGY9S0pVUi5hc24xLnRzcC5UU1BVdGlsLm5ld1RpbWVTdGFtcFRva2VuKHRoaXMucGFyYW1zKTtyZXR1cm4gZi5nZXRDb250ZW50SW5mb0VuY29kZWRIZXgoKX07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXt0aGlzLnBhcmFtcz1hfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5TaW1wbGVUU0FBZGFwdGVyLEtKVVIuYXNuMS50c3AuQWJzdHJhY3RUU0FBZGFwdGVyKTtLSlVSLmFzbjEudHNwLkZpeGVkVFNBQWRhcHRlcj1mdW5jdGlvbihhKXtLSlVSLmFzbjEudHNwLkZpeGVkVFNBQWRhcHRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5wYXJhbXM9bnVsbDt0aGlzLmdldFRTVEhleD1mdW5jdGlvbihjLGIpe3ZhciBkPUtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChjLGIpO3RoaXMucGFyYW1zLnRzdEluZm8ubWVzc2FnZUltcHJpbnQ9e2hhc2hBbGc6YixoYXNoVmFsdWU6ZH07dmFyIGU9S0pVUi5hc24xLnRzcC5UU1BVdGlsLm5ld1RpbWVTdGFtcFRva2VuKHRoaXMucGFyYW1zKTtyZXR1cm4gZS5nZXRDb250ZW50SW5mb0VuY29kZWRIZXgoKX07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXt0aGlzLnBhcmFtcz1hfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5GaXhlZFRTQUFkYXB0ZXIsS0pVUi5hc24xLnRzcC5BYnN0cmFjdFRTQUFkYXB0ZXIpO0tKVVIuYXNuMS50c3AuVFNQVXRpbD1uZXcgZnVuY3Rpb24oKXt9O0tKVVIuYXNuMS50c3AuVFNQVXRpbC5uZXdUaW1lU3RhbXBUb2tlbj1mdW5jdGlvbihiKXt2YXIgaj1LSlVSLmFzbjEuY21zO3ZhciBhPUtKVVIuYXNuMS50c3A7dmFyIGc9bmV3IGouU2lnbmVkRGF0YSgpO3ZhciBlPW5ldyBhLlRTVEluZm8oYi50c3RJbmZvKTt2YXIgZj1lLmdldEVuY29kZWRIZXgoKTtnLmRFbmNhcENvbnRlbnRJbmZvLnNldENvbnRlbnRWYWx1ZSh7aGV4OmZ9KTtnLmRFbmNhcENvbnRlbnRJbmZvLnNldENvbnRlbnRUeXBlKCJ0c3RpbmZvIik7aWYodHlwZW9mIGIuY2VydHM9PSJvYmplY3QiKXtmb3IodmFyIGM9MDtjPGIuY2VydHMubGVuZ3RoO2MrKyl7Zy5hZGRDZXJ0aWZpY2F0ZXNCeVBFTShiLmNlcnRzW2NdKX19dmFyIGQ9Zy5zaWduZXJJbmZvTGlzdFswXTtkLnNldFNpZ25lcklkZW50aWZpZXIoYi5zaWduZXJDZXJ0KTtkLnNldEZvckNvbnRlbnRBbmRIYXNoKHtzZE9iajpnLGVjaU9iajpnLmRFbmNhcENvbnRlbnRJbmZvLGhhc2hBbGc6Yi5oYXNoQWxnfSk7dmFyIGg9bmV3IGouU2lnbmluZ0NlcnRpZmljYXRlKHthcnJheTpbYi5zaWduZXJDZXJ0XX0pO2QuZFNpZ25lZEF0dHJzLmFkZChoKTtkLnNpZ24oYi5zaWduZXJQcnZLZXksYi5zaWdBbGcpO3JldHVybiBnfTtLSlVSLmFzbjEudHNwLlRTUFV0aWwucGFyc2VUaW1lU3RhbXBSZXE9ZnVuY3Rpb24oZCl7dmFyIGY9e307Zi5jZXJ0cmVxPWZhbHNlO3ZhciBoPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGQsMCk7aWYoaC5sZW5ndGg8Mil7dGhyb3ciVGltZVN0YW1wUmVxIG11c3QgaGF2ZSBhdCBsZWFzdCAyIGl0ZW1zIn12YXIgYz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsaFsxXSk7Zi5taT1LSlVSLmFzbjEudHNwLlRTUFV0aWwucGFyc2VNZXNzYWdlSW1wcmludChjKTtmb3IodmFyIGU9MjtlPGgubGVuZ3RoO2UrKyl7dmFyIGI9aFtlXTt2YXIgYT1kLnN1YnN0cihiLDIpO2lmKGE9PSIwNiIpe3ZhciBnPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGQsYik7Zi5wb2xpY3k9QVNOMUhFWC5oZXh0b29pZHN0cihnKX1pZihhPT0iMDIiKXtmLm5vbmNlPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGQsYil9aWYoYT09IjAxIil7Zi5jZXJ0cmVxPXRydWV9fXJldHVybiBmfTtLSlVSLmFzbjEudHNwLlRTUFV0aWwucGFyc2VNZXNzYWdlSW1wcmludD1mdW5jdGlvbihjKXt2YXIgaD17fTtpZihjLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJoZWFkIG9mIG1lc3NhZ2VJbXByaW50IGhleCBzaGFsbCBiZSAnMzAnIn12YXIgYT1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihjLDApO3ZhciBpPUFTTjFIRVguZ2V0RGVjZW5kYW50SW5kZXhCeU50aExpc3QoYywwLFswLDBdKTt2YXIgZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihjLGkpO3ZhciBlPUFTTjFIRVguaGV4dG9vaWRzdHIoZCk7dmFyIGc9S0pVUi5hc24xLng1MDkuT0lELm9pZDJuYW1lKGUpO2lmKGc9PSIiKXt0aHJvdyJoYXNoQWxnIG5hbWUgdW5kZWZpbmVkOiAiK2V9dmFyIGI9Zzt2YXIgZj1BU04xSEVYLmdldERlY2VuZGFudEluZGV4QnlOdGhMaXN0KGMsMCxbMV0pO2guaGFzaEFsZz1iO2guaGFzaFZhbHVlPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGMsZik7cmV0dXJuIGh9OwovKiEgYXNuMWNhZGVzLTEuMC4wLmpzIChjKSAyMDEzLTIwMTQgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSPT0idW5kZWZpbmVkInx8IUtKVVIpe0tKVVI9e319aWYodHlwZW9mIEtKVVIuYXNuMT09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEpe0tKVVIuYXNuMT17fX1pZih0eXBlb2YgS0pVUi5hc24xLmNhZGVzPT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMS5jYWRlcyl7S0pVUi5hc24xLmNhZGVzPXt9fUtKVVIuYXNuMS5jYWRlcy5TaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyPWZ1bmN0aW9uKGUpe0tKVVIuYXNuMS5jYWRlcy5TaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi4xNSI7dmFyIGI9S0pVUi5hc24xO3ZhciBkPUtKVVIuYXNuMS5jYWRlcztpZih0eXBlb2YgZSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBlLm9pZD09InN0cmluZyImJnR5cGVvZiBlLmhhc2g9PSJvYmplY3QiKXt2YXIgZj1uZXcgYi5ERVJPYmplY3RJZGVudGlmaWVyKHtvaWQ6ZS5vaWR9KTt2YXIgYT1uZXcgZC5PdGhlckhhc2hBbGdBbmRWYWx1ZShlLmhhc2gpO3ZhciBjPW5ldyBiLkRFUlNlcXVlbmNlKHthcnJheTpbZixhXX0pO3RoaXMudmFsdWVMaXN0PVtjXX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY2FkZXMuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllcixLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNhZGVzLk90aGVySGFzaEFsZ0FuZFZhbHVlPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS5jYWRlcy5PdGhlckhhc2hBbGdBbmRWYWx1ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBjPUtKVVIuYXNuMS54NTA5O3RoaXMuZEFsZz1udWxsO3RoaXMuZEhhc2g9bnVsbDt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZD1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuZEFsZyx0aGlzLmRIYXNoXX0pO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLmFsZz09InN0cmluZyImJnR5cGVvZiBiLmhhc2g9PSJzdHJpbmciKXt0aGlzLmRBbGc9bmV3IGMuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZTpiLmFsZ30pO3RoaXMuZEhhc2g9bmV3IGEuREVST2N0ZXRTdHJpbmcoe2hleDpiLmhhc2h9KX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY2FkZXMuT3RoZXJIYXNoQWxnQW5kVmFsdWUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jYWRlcy5TaWduYXR1cmVUaW1lU3RhbXA9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLmNhZGVzLlNpZ25hdHVyZVRpbWVTdGFtcC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hdHRyVHlwZU9pZD0iMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMTQiO3RoaXMudHN0SGV4PW51bGw7dmFyIGE9S0pVUi5hc24xO2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMucmVzIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMucmVzPT0ic3RyaW5nIiYmYy5yZXMubWF0Y2goL15bMC05QS1GYS1mXSskLykpe31lbHNle2lmKGMucmVzIGluc3RhbmNlb2YgS0pVUi5hc24xLkFTTjFPYmplY3Qpe31lbHNle3Rocm93InJlcyBwYXJhbSBzaGFsbCBiZSBBU04xT2JqZWN0IG9yIGhleCBzdHJpbmcifX19aWYodHlwZW9mIGMudHN0IT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMudHN0PT0ic3RyaW5nIiYmYy50c3QubWF0Y2goL15bMC05QS1GYS1mXSskLykpe3ZhciBiPW5ldyBhLkFTTjFPYmplY3QoKTt0aGlzLnRzdEhleD1jLnRzdDtiLmhUTFY9dGhpcy50c3RIZXg7Yi5nZXRFbmNvZGVkSGV4KCk7dGhpcy52YWx1ZUxpc3Q9W2JdfWVsc2V7aWYoYy50c3QgaW5zdGFuY2VvZiBLSlVSLmFzbjEuQVNOMU9iamVjdCl7fWVsc2V7dGhyb3cidHN0IHBhcmFtIHNoYWxsIGJlIEFTTjFPYmplY3Qgb3IgaGV4IHN0cmluZyJ9fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY2FkZXMuU2lnbmF0dXJlVGltZVN0YW1wLEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKTtLSlVSLmFzbjEuY2FkZXMuQ29tcGxldGVDZXJ0aWZpY2F0ZVJlZnM9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLmNhZGVzLkNvbXBsZXRlQ2VydGlmaWNhdGVSZWZzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi4yMSI7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS5jYWRlczt0aGlzLnNldEJ5QXJyYXk9ZnVuY3Rpb24oZCl7dGhpcy52YWx1ZUxpc3Q9W107Zm9yKHZhciBlPTA7ZTxkLmxlbmd0aDtlKyspe3ZhciBmPW5ldyBiLk90aGVyQ2VydElEKGRbZV0pO3RoaXMudmFsdWVMaXN0LnB1c2goZil9fTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjPT0ib2JqZWN0IiYmdHlwZW9mIGMubGVuZ3RoPT0ibnVtYmVyIil7dGhpcy5zZXRCeUFycmF5KGMpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jYWRlcy5Db21wbGV0ZUNlcnRpZmljYXRlUmVmcyxLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNhZGVzLk90aGVyQ2VydElEPWZ1bmN0aW9uKGQpe0tKVVIuYXNuMS5jYWRlcy5PdGhlckNlcnRJRC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBjPUtKVVIuYXNuMS5jbXM7dmFyIGI9S0pVUi5hc24xLmNhZGVzO3RoaXMuaGFzSXNzdWVyU2VyaWFsPXRydWU7dGhpcy5kT3RoZXJDZXJ0SGFzaD1udWxsO3RoaXMuZElzc3VlclNlcmlhbD1udWxsO3RoaXMuc2V0QnlDZXJ0UEVNPWZ1bmN0aW9uKGUpe3RoaXMuZE90aGVyQ2VydEhhc2g9bmV3IGIuT3RoZXJIYXNoKGUpO2lmKHRoaXMuaGFzSXNzdWVyU2VyaWFsKXt0aGlzLmRJc3N1ZXJTZXJpYWw9bmV3IGMuSXNzdWVyQW5kU2VyaWFsTnVtYmVyKGUpfX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5oVExWIT1udWxsKXtyZXR1cm4gdGhpcy5oVExWfWlmKHRoaXMuZE90aGVyQ2VydEhhc2g9PW51bGwpe3Rocm93Im90aGVyQ2VydEhhc2ggbm90IHNldCJ9dmFyIGU9W3RoaXMuZE90aGVyQ2VydEhhc2hdO2lmKHRoaXMuZElzc3VlclNlcmlhbCE9bnVsbCl7ZS5wdXNoKHRoaXMuZElzc3VlclNlcmlhbCl9dmFyIGY9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmV9KTt0aGlzLmhUTFY9Zi5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGQhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZD09InN0cmluZyImJmQuaW5kZXhPZigiLS0tLS1CRUdJTiAiKSE9LTEpe3RoaXMuc2V0QnlDZXJ0UEVNKGQpfWlmKHR5cGVvZiBkPT0ib2JqZWN0Iil7aWYoZC5oYXNpcz09PWZhbHNlKXt0aGlzLmhhc0lzc3VlclNlcmlhbD1mYWxzZX1pZih0eXBlb2YgZC5jZXJ0PT0ic3RyaW5nIil7dGhpcy5zZXRCeUNlcnRQRU0oZC5jZXJ0KX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNhZGVzLk90aGVyQ2VydElELEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY2FkZXMuT3RoZXJIYXNoPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jYWRlcy5PdGhlckhhc2guc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY2FkZXM7dGhpcy5hbGc9InNoYTI1NiI7dGhpcy5kT3RoZXJIYXNoPW51bGw7dGhpcy5zZXRCeUNlcnRQRU09ZnVuY3Rpb24oZCl7aWYoZC5pbmRleE9mKCItLS0tLUJFR0lOICIpPT0tMSl7dGhyb3ciY2VydFBFTSBub3QgdG8gc2VlbSBQRU0gZm9ybWF0In12YXIgZT1YNTA5LnBlbVRvSGV4KGQpO3ZhciBmPUtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChlLHRoaXMuYWxnKTt0aGlzLmRPdGhlckhhc2g9bmV3IGIuT3RoZXJIYXNoQWxnQW5kVmFsdWUoe2FsZzp0aGlzLmFsZyxoYXNoOmZ9KX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5kT3RoZXJIYXNoPT1udWxsKXt0aHJvdyJPdGhlckhhc2ggbm90IHNldCJ9cmV0dXJuIHRoaXMuZE90aGVySGFzaC5nZXRFbmNvZGVkSGV4KCl9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGM9PSJzdHJpbmciKXtpZihjLmluZGV4T2YoIi0tLS0tQkVHSU4gIikhPS0xKXt0aGlzLnNldEJ5Q2VydFBFTShjKX1lbHNle2lmKGMubWF0Y2goL15bMC05QS1GYS1mXSskLykpe3RoaXMuZE90aGVySGFzaD1uZXcgYS5ERVJPY3RldFN0cmluZyh7aGV4OmN9KX1lbHNle3Rocm93InVuc3VwcG9ydGVkIHN0cmluZyB2YWx1ZSBmb3IgcGFyYW1zIn19fWVsc2V7aWYodHlwZW9mIGM9PSJvYmplY3QiKXtpZih0eXBlb2YgYy5jZXJ0PT0ic3RyaW5nIil7aWYodHlwZW9mIGMuYWxnPT0ic3RyaW5nIil7dGhpcy5hbGc9Yy5hbGd9dGhpcy5zZXRCeUNlcnRQRU0oYy5jZXJ0KX1lbHNle3RoaXMuZE90aGVySGFzaD1uZXcgYi5PdGhlckhhc2hBbGdBbmRWYWx1ZShjKX19fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jYWRlcy5PdGhlckhhc2gsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jYWRlcy5DQWRFU1V0aWw9bmV3IGZ1bmN0aW9uKCl7fTtLSlVSLmFzbjEuY2FkZXMuQ0FkRVNVdGlsLmFkZFNpZ1RTPWZ1bmN0aW9uKGMsYixhKXt9O0tKVVIuYXNuMS5jYWRlcy5DQWRFU1V0aWwucGFyc2VTaWduZWREYXRhRm9yQWRkaW5nVW5zaWduZWQ9ZnVuY3Rpb24oZCl7dmFyIHE9S0pVUi5hc24xO3ZhciBwPUtKVVIuYXNuMS5jbXM7dmFyIGM9S0pVUi5hc24xLmNhZGVzLkNBZEVTVXRpbDt2YXIgYT17fTtpZihBU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdChkLDAsWzBdKSE9IjA2MDkyYTg2NDg4NmY3MGQwMTA3MDIiKXt0aHJvdyJoZXggaXMgbm90IENNUyBTaWduZWREYXRhIn12YXIgcz1BU04xSEVYLmdldERlY2VuZGFudEluZGV4QnlOdGhMaXN0KGQsMCxbMSwwXSk7dmFyIGI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZCxzKTtpZihiLmxlbmd0aDw0KXt0aHJvdyJudW0gb2YgU2lnbmVkRGF0YSBlbGVtIHNoYWxsIGJlIDQgYXQgbGVhc3QifXZhciBmPWIuc2hpZnQoKTthLnZlcnNpb249QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGYpO3ZhciBsPWIuc2hpZnQoKTthLmFsZ3M9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGwpO3ZhciBtPWIuc2hpZnQoKTthLmVuY2FwY29udGVudD1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsbSk7YS5jZXJ0cz1udWxsO2EucmV2cz1udWxsO2Euc2k9W107dmFyIG49Yi5zaGlmdCgpO2lmKGQuc3Vic3RyKG4sMik9PSJhMCIpe2EuY2VydHM9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLG4pO249Yi5zaGlmdCgpfWlmKGQuc3Vic3RyKG4sMik9PSJhMSIpe2EucmV2cz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsbik7bj1iLnNoaWZ0KCl9dmFyIGs9bjtpZihkLnN1YnN0cihrLDIpIT0iMzEiKXt0aHJvdyJDYW4ndCBmaW5kIHNpZ25lckluZm9zIn12YXIgaj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihkLGspO2Zvcih2YXIgaD0wO2g8ai5sZW5ndGg7aCsrKXt2YXIgbz1qW2hdO3ZhciBlPWMucGFyc2VTaWduZXJJbmZvRm9yQWRkaW5nVW5zaWduZWQoZCxvLGgpO2Euc2lbaF09ZX12YXIgZz1udWxsO2Eub2JqPW5ldyBwLlNpZ25lZERhdGEoKTtnPW5ldyBxLkFTTjFPYmplY3QoKTtnLmhUTFY9YS52ZXJzaW9uO2Eub2JqLmRDTVNWZXJzaW9uPWc7Zz1uZXcgcS5BU04xT2JqZWN0KCk7Zy5oVExWPWEuYWxnczthLm9iai5kRGlnZXN0QWxncz1nO2c9bmV3IHEuQVNOMU9iamVjdCgpO2cuaFRMVj1hLmVuY2FwY29udGVudDthLm9iai5kRW5jYXBDb250ZW50SW5mbz1nO2c9bmV3IHEuQVNOMU9iamVjdCgpO2cuaFRMVj1hLmNlcnRzO2Eub2JqLmRDZXJ0cz1nO2Eub2JqLnNpZ25lckluZm9MaXN0PVtdO2Zvcih2YXIgaD0wO2g8YS5zaS5sZW5ndGg7aCsrKXthLm9iai5zaWduZXJJbmZvTGlzdC5wdXNoKGEuc2lbaF0ub2JqKX1yZXR1cm4gYX07S0pVUi5hc24xLmNhZGVzLkNBZEVTVXRpbC5wYXJzZVNpZ25lckluZm9Gb3JBZGRpbmdVbnNpZ25lZD1mdW5jdGlvbihkLGssYSl7dmFyIG09S0pVUi5hc24xO3ZhciBsPUtKVVIuYXNuMS5jbXM7dmFyIGI9e307dmFyIGU9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZCxrKTtpZihlLmxlbmd0aCE9Nil7dGhyb3cibm90IHN1cHBvcnRlZCBpdGVtcyBmb3IgU2lnbmVySW5mbyAoIT02KSJ9dmFyIGY9ZS5zaGlmdCgpO2IudmVyc2lvbj1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsZik7dmFyIG49ZS5zaGlmdCgpO2Iuc2k9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLG4pO3ZhciBoPWUuc2hpZnQoKTtiLmRpZ2FsZz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsaCk7dmFyIGM9ZS5zaGlmdCgpO2Iuc2F0dHJzPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxjKTt2YXIgaT1lLnNoaWZ0KCk7Yi5zaWdhbGc9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGkpO3ZhciBqPWUuc2hpZnQoKTtiLnNpZz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsaik7Yi5zaWd2YWw9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZCxqKTt2YXIgZz1udWxsO2Iub2JqPW5ldyBsLlNpZ25lckluZm8oKTtnPW5ldyBtLkFTTjFPYmplY3QoKTtnLmhUTFY9Yi52ZXJzaW9uO2Iub2JqLmRDTVNWZXJzaW9uPWc7Zz1uZXcgbS5BU04xT2JqZWN0KCk7Zy5oVExWPWIuc2k7Yi5vYmouZFNpZ25lcklkZW50aWZpZXI9ZztnPW5ldyBtLkFTTjFPYmplY3QoKTtnLmhUTFY9Yi5kaWdhbGc7Yi5vYmouZERpZ2VzdEFsZ29yaXRobT1nO2c9bmV3IG0uQVNOMU9iamVjdCgpO2cuaFRMVj1iLnNhdHRycztiLm9iai5kU2lnbmVkQXR0cnM9ZztnPW5ldyBtLkFTTjFPYmplY3QoKTtnLmhUTFY9Yi5zaWdhbGc7Yi5vYmouZFNpZ0FsZz1nO2c9bmV3IG0uQVNOMU9iamVjdCgpO2cuaFRMVj1iLnNpZztiLm9iai5kU2lnPWc7Yi5vYmouZFVuc2lnbmVkQXR0cnM9bmV3IGwuQXR0cmlidXRlTGlzdCgpO3JldHVybiBifTsKLyohIGFzbjFjc3ItMS4wLjAuanMgKGMpIDIwMTUgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSLmFzbjEuY3NyPT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMS5jc3Ipe0tKVVIuYXNuMS5jc3I9e319S0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdD1mdW5jdGlvbihmKXtLSlVSLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYj1udWxsO3ZhciBkPW51bGw7dmFyIGU9bnVsbDt2YXIgYz1udWxsO3ZhciBhPW51bGw7dGhpcy5zaWduPWZ1bmN0aW9uKGksaCl7aWYodGhpcy5wcnZLZXk9PW51bGwpe3RoaXMucHJ2S2V5PWh9dGhpcy5hc24xU2lnbmF0dXJlQWxnPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOml9KTtzaWc9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOml9KTtzaWcuaW5pdFNpZ24odGhpcy5wcnZLZXkpO3NpZy51cGRhdGVIZXgodGhpcy5hc24xQ1NSSW5mby5nZXRFbmNvZGVkSGV4KCkpO3RoaXMuaGV4U2lnPXNpZy5zaWduKCk7dGhpcy5hc24xU2lnPW5ldyBLSlVSLmFzbjEuREVSQml0U3RyaW5nKHtoZXg6IjAwIit0aGlzLmhleFNpZ30pO3ZhciBnPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmFzbjFDU1JJbmZvLHRoaXMuYXNuMVNpZ25hdHVyZUFsZyx0aGlzLmFzbjFTaWddfSk7dGhpcy5oVExWPWcuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaXNNb2RpZmllZD1mYWxzZX07dGhpcy5nZXRQRU1TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgZz1LSlVSLmFzbjEuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleCh0aGlzLmdldEVuY29kZWRIZXgoKSwiQ0VSVElGSUNBVEUgUkVRVUVTVCIpO3JldHVybiBnfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmlzTW9kaWZpZWQ9PWZhbHNlJiZ0aGlzLmhUTFYhPW51bGwpe3JldHVybiB0aGlzLmhUTFZ9dGhyb3cibm90IHNpZ25lZCB5ZXQifTtpZih0eXBlb2YgZiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBmLmNzcmluZm8hPSJ1bmRlZmluZWQiKXt0aGlzLmFzbjFDU1JJbmZvPWYuY3NyaW5mb319fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0LEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mbz1mdW5jdGlvbihhKXtLSlVSLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5faW5pdGlhbGl6ZT1mdW5jdGlvbigpe3RoaXMuYXNuMUFycmF5PW5ldyBBcnJheSgpO3RoaXMuYXNuMVZlcnNpb249bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHsiaW50IjowfSk7dGhpcy5hc24xU3ViamVjdD1udWxsO3RoaXMuYXNuMVN1YmpQS2V5PW51bGw7dGhpcy5leHRlbnNpb25zQXJyYXk9bmV3IEFycmF5KCl9O3RoaXMuc2V0U3ViamVjdEJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU3ViamVjdD1uZXcgS0pVUi5hc24xLng1MDkuWDUwME5hbWUoYil9O3RoaXMuc2V0U3ViamVjdFB1YmxpY0tleUJ5R2V0S2V5PWZ1bmN0aW9uKGMpe3ZhciBiPUtFWVVUSUwuZ2V0S2V5KGMpO3RoaXMuYXNuMVN1YmpQS2V5PW5ldyBLSlVSLmFzbjEueDUwOS5TdWJqZWN0UHVibGljS2V5SW5mbyhiKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFWZXJzaW9uKTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVN1YmplY3QpO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xU3VialBLZXkpO3ZhciBjPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OnRoaXMuZXh0ZW5zaW9uc0FycmF5fSk7dmFyIGI9bmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OmZhbHNlLHRhZzoiYTAiLG9iajpjfSk7dGhpcy5hc24xQXJyYXkucHVzaChiKTt2YXIgZD1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTp0aGlzLmFzbjFBcnJheX0pO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTt0aGlzLmlzTW9kaWZpZWQ9ZmFsc2U7cmV0dXJuIHRoaXMuaFRMVn07dGhpcy5faW5pdGlhbGl6ZSgpfTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNzci5DU1JVdGlsPW5ldyBmdW5jdGlvbigpe307S0pVUi5hc24xLmNzci5DU1JVdGlsLm5ld0NTUlBFTT1mdW5jdGlvbihmKXt2YXIgYz1LSlVSLmFzbjEuY3NyO2lmKGYuc3ViamVjdD09PXVuZGVmaW5lZCl7dGhyb3cicGFyYW1ldGVyIHN1YmplY3QgdW5kZWZpbmVkIn1pZihmLnNianB1YmtleT09PXVuZGVmaW5lZCl7dGhyb3cicGFyYW1ldGVyIHNianB1YmtleSB1bmRlZmluZWQifWlmKGYuc2lnYWxnPT09dW5kZWZpbmVkKXt0aHJvdyJwYXJhbWV0ZXIgc2lnYWxnIHVuZGVmaW5lZCJ9aWYoZi5zYmpwcnZrZXk9PT11bmRlZmluZWQpe3Rocm93InBhcmFtZXRlciBzYmpwdWJrZXkgdW5kZWZpbmVkIn12YXIgYj1uZXcgYy5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8oKTtiLnNldFN1YmplY3RCeVBhcmFtKGYuc3ViamVjdCk7Yi5zZXRTdWJqZWN0UHVibGljS2V5QnlHZXRLZXkoZi5zYmpwdWJrZXkpO3ZhciBkPW5ldyBjLkNlcnRpZmljYXRpb25SZXF1ZXN0KHtjc3JpbmZvOmJ9KTt2YXIgYT1LRVlVVElMLmdldEtleShmLnNianBydmtleSk7ZC5zaWduKGYuc2lnYWxnLGEpO3ZhciBlPWQuZ2V0UEVNU3RyaW5nKCk7cmV0dXJuIGV9OwovKiEgYmFzZTY0eC0xLjEuNiAoYykgMjAxMi0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwpmdW5jdGlvbiBCYXNlNjR4KCl7fWZ1bmN0aW9uIHN0b0JBKGQpe3ZhciBiPW5ldyBBcnJheSgpO2Zvcih2YXIgYz0wO2M8ZC5sZW5ndGg7YysrKXtiW2NdPWQuY2hhckNvZGVBdChjKX1yZXR1cm4gYn1mdW5jdGlvbiBCQXRvcyhiKXt2YXIgZD0iIjtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7ZD1kK1N0cmluZy5mcm9tQ2hhckNvZGUoYltjXSl9cmV0dXJuIGR9ZnVuY3Rpb24gQkF0b2hleChiKXt2YXIgZT0iIjtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGM9YltkXS50b1N0cmluZygxNik7aWYoYy5sZW5ndGg9PTEpe2M9IjAiK2N9ZT1lK2N9cmV0dXJuIGV9ZnVuY3Rpb24gc3RvaGV4KGEpe3JldHVybiBCQXRvaGV4KHN0b0JBKGEpKX1mdW5jdGlvbiBzdG9iNjQoYSl7cmV0dXJuIGhleDJiNjQoc3RvaGV4KGEpKX1mdW5jdGlvbiBzdG9iNjR1KGEpe3JldHVybiBiNjR0b2I2NHUoaGV4MmI2NChzdG9oZXgoYSkpKX1mdW5jdGlvbiBiNjR1dG9zKGEpe3JldHVybiBCQXRvcyhiNjR0b0JBKGI2NHV0b2I2NChhKSkpfWZ1bmN0aW9uIGI2NHRvYjY0dShhKXthPWEucmVwbGFjZSgvXD0vZywiIik7YT1hLnJlcGxhY2UoL1wrL2csIi0iKTthPWEucmVwbGFjZSgvXC8vZywiXyIpO3JldHVybiBhfWZ1bmN0aW9uIGI2NHV0b2I2NChhKXtpZihhLmxlbmd0aCU0PT0yKXthPWErIj09In1lbHNle2lmKGEubGVuZ3RoJTQ9PTMpe2E9YSsiPSJ9fWE9YS5yZXBsYWNlKC8tL2csIisiKTthPWEucmVwbGFjZSgvXy9nLCIvIik7cmV0dXJuIGF9ZnVuY3Rpb24gaGV4dG9iNjR1KGEpe2lmKGEubGVuZ3RoJTI9PTEpe2E9IjAiK2F9cmV0dXJuIGI2NHRvYjY0dShoZXgyYjY0KGEpKX1mdW5jdGlvbiBiNjR1dG9oZXgoYSl7cmV0dXJuIGI2NHRvaGV4KGI2NHV0b2I2NChhKSl9dmFyIHV0Zjh0b2I2NHUsYjY0dXRvdXRmODtpZih0eXBlb2YgQnVmZmVyPT09ImZ1bmN0aW9uIil7dXRmOHRvYjY0dT1mdW5jdGlvbihhKXtyZXR1cm4gYjY0dG9iNjR1KG5ldyBCdWZmZXIoYSwidXRmOCIpLnRvU3RyaW5nKCJiYXNlNjQiKSl9O2I2NHV0b3V0Zjg9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBCdWZmZXIoYjY0dXRvYjY0KGEpLCJiYXNlNjQiKS50b1N0cmluZygidXRmOCIpfX1lbHNle3V0Zjh0b2I2NHU9ZnVuY3Rpb24oYSl7cmV0dXJuIGhleHRvYjY0dSh1cmljbXB0b2hleChlbmNvZGVVUklDb21wb25lbnRBbGwoYSkpKX07YjY0dXRvdXRmOD1mdW5jdGlvbihhKXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGhleHRvdXJpY21wKGI2NHV0b2hleChhKSkpfX1mdW5jdGlvbiB1dGY4dG9iNjQoYSl7cmV0dXJuIGhleDJiNjQodXJpY21wdG9oZXgoZW5jb2RlVVJJQ29tcG9uZW50QWxsKGEpKSl9ZnVuY3Rpb24gYjY0dG91dGY4KGEpe3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoaGV4dG91cmljbXAoYjY0dG9oZXgoYSkpKX1mdW5jdGlvbiB1dGY4dG9oZXgoYSl7cmV0dXJuIHVyaWNtcHRvaGV4KGVuY29kZVVSSUNvbXBvbmVudEFsbChhKSl9ZnVuY3Rpb24gaGV4dG91dGY4KGEpe3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoaGV4dG91cmljbXAoYSkpfWZ1bmN0aW9uIGhleHRvcnN0cihjKXt2YXIgYj0iIjtmb3IodmFyIGE9MDthPGMubGVuZ3RoLTE7YSs9Mil7Yis9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChjLnN1YnN0cihhLDIpLDE2KSl9cmV0dXJuIGJ9ZnVuY3Rpb24gcnN0cnRvaGV4KGMpe3ZhciBhPSIiO2Zvcih2YXIgYj0wO2I8Yy5sZW5ndGg7YisrKXthKz0oIjAiK2MuY2hhckNvZGVBdChiKS50b1N0cmluZygxNikpLnNsaWNlKC0yKX1yZXR1cm4gYX1mdW5jdGlvbiBoZXh0b2I2NChhKXtyZXR1cm4gaGV4MmI2NChhKX1mdW5jdGlvbiBoZXh0b2I2NG5sKGIpe3ZhciBhPWhleHRvYjY0KGIpO3ZhciBjPWEucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTtjPWMucmVwbGFjZSgvXHJcbiQvLCIiKTtyZXR1cm4gY31mdW5jdGlvbiBiNjRubHRvaGV4KGIpe3ZhciBhPWIucmVwbGFjZSgvW14wLTlBLVphLXpcLys9XSovZywiIik7dmFyIGM9YjY0dG9oZXgoYSk7cmV0dXJuIGN9ZnVuY3Rpb24gdXJpY21wdG9oZXgoYSl7cmV0dXJuIGEucmVwbGFjZSgvJS9nLCIiKX1mdW5jdGlvbiBoZXh0b3VyaWNtcChhKXtyZXR1cm4gYS5yZXBsYWNlKC8oLi4pL2csIiUkMSIpfWZ1bmN0aW9uIGVuY29kZVVSSUNvbXBvbmVudEFsbChhKXt2YXIgZD1lbmNvZGVVUklDb21wb25lbnQoYSk7dmFyIGI9IiI7Zm9yKHZhciBjPTA7YzxkLmxlbmd0aDtjKyspe2lmKGRbY109PSIlIil7Yj1iK2Quc3Vic3RyKGMsMyk7Yz1jKzJ9ZWxzZXtiPWIrIiUiK3N0b2hleChkW2NdKX19cmV0dXJuIGJ9ZnVuY3Rpb24gbmV3bGluZV90b1VuaXgoYSl7YT1hLnJlcGxhY2UoL1xyXG4vbWcsIlxuIik7cmV0dXJuIGF9ZnVuY3Rpb24gbmV3bGluZV90b0RvcyhhKXthPWEucmVwbGFjZSgvXHJcbi9tZywiXG4iKTthPWEucmVwbGFjZSgvXG4vbWcsIlxyXG4iKTtyZXR1cm4gYX1mdW5jdGlvbiBpbnRhcnlzdHJ0b2hleChiKXtiPWIucmVwbGFjZSgvXlxzKlxbXHMqLywiIik7Yj1iLnJlcGxhY2UoL1xzKlxdXHMqJC8sIiIpO2I9Yi5yZXBsYWNlKC9ccyovZywiIik7dHJ5e3ZhciBjPWIuc3BsaXQoLywvKS5tYXAoZnVuY3Rpb24oZyxlLGgpe3ZhciBmPXBhcnNlSW50KGcpO2lmKGY8MHx8MjU1PGYpe3Rocm93ImludGVnZXIgbm90IGluIHJhbmdlIDAtMjU1In12YXIgZD0oIjAwIitmLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO3JldHVybiBkfSkuam9pbigiIik7cmV0dXJuIGN9Y2F0Y2goYSl7dGhyb3cibWFsZm9ybWVkIGludGVnZXIgYXJyYXkgc3RyaW5nOiAiK2F9fXZhciBzdHJkaWZmaWR4PWZ1bmN0aW9uKGMsYSl7dmFyIGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+YS5sZW5ndGgpe2Q9YS5sZW5ndGh9Zm9yKHZhciBiPTA7YjxkO2IrKyl7aWYoYy5jaGFyQ29kZUF0KGIpIT1hLmNoYXJDb2RlQXQoYikpe3JldHVybiBifX1pZihjLmxlbmd0aCE9YS5sZW5ndGgpe3JldHVybiBkfXJldHVybiAtMX07Ci8qISBjcnlwdG8tMS4xLjguanMgKGMpIDIwMTMtMjAxNiBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5jcnlwdG89PSJ1bmRlZmluZWQifHwhS0pVUi5jcnlwdG8pe0tKVVIuY3J5cHRvPXt9fUtKVVIuY3J5cHRvLlV0aWw9bmV3IGZ1bmN0aW9uKCl7dGhpcy5ESUdFU1RJTkZPSEVBRD17c2hhMToiMzAyMTMwMDkwNjA1MmIwZTAzMDIxYTA1MDAwNDE0IixzaGEyMjQ6IjMwMmQzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwNDA1MDAwNDFjIixzaGEyNTY6IjMwMzEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMTA1MDAwNDIwIixzaGEzODQ6IjMwNDEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMjA1MDAwNDMwIixzaGE1MTI6IjMwNTEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMzA1MDAwNDQwIixtZDI6IjMwMjAzMDBjMDYwODJhODY0ODg2ZjcwZDAyMDIwNTAwMDQxMCIsbWQ1OiIzMDIwMzAwYzA2MDgyYTg2NDg4NmY3MGQwMjA1MDUwMDA0MTAiLHJpcGVtZDE2MDoiMzAyMTMwMDkwNjA1MmIyNDAzMDIwMTA1MDAwNDE0Iix9O3RoaXMuREVGQVVMVFBST1ZJREVSPXttZDU6ImNyeXB0b2pzIixzaGExOiJjcnlwdG9qcyIsc2hhMjI0OiJjcnlwdG9qcyIsc2hhMjU2OiJjcnlwdG9qcyIsc2hhMzg0OiJjcnlwdG9qcyIsc2hhNTEyOiJjcnlwdG9qcyIscmlwZW1kMTYwOiJjcnlwdG9qcyIsaG1hY21kNToiY3J5cHRvanMiLGhtYWNzaGExOiJjcnlwdG9qcyIsaG1hY3NoYTIyNDoiY3J5cHRvanMiLGhtYWNzaGEyNTY6ImNyeXB0b2pzIixobWFjc2hhMzg0OiJjcnlwdG9qcyIsaG1hY3NoYTUxMjoiY3J5cHRvanMiLGhtYWNyaXBlbWQxNjA6ImNyeXB0b2pzIixNRDV3aXRoUlNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMXdpdGhSU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEyMjR3aXRoUlNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjU2d2l0aFJTQToiY3J5cHRvanMvanNyc2EiLFNIQTM4NHdpdGhSU0E6ImNyeXB0b2pzL2pzcnNhIixTSEE1MTJ3aXRoUlNBOiJjcnlwdG9qcy9qc3JzYSIsUklQRU1EMTYwd2l0aFJTQToiY3J5cHRvanMvanNyc2EiLE1ENXdpdGhFQ0RTQToiY3J5cHRvanMvanNyc2EiLFNIQTF3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEyMjR3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEyNTZ3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEzODR3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEE1MTJ3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixSSVBFTUQxNjB3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEExd2l0aERTQToiY3J5cHRvanMvanNyc2EiLFNIQTIyNHdpdGhEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEyNTZ3aXRoRFNBOiJjcnlwdG9qcy9qc3JzYSIsTUQ1d2l0aFJTQWFuZE1HRjE6ImNyeXB0b2pzL2pzcnNhIixTSEExd2l0aFJTQWFuZE1HRjE6ImNyeXB0b2pzL2pzcnNhIixTSEEyMjR3aXRoUlNBYW5kTUdGMToiY3J5cHRvanMvanNyc2EiLFNIQTI1NndpdGhSU0FhbmRNR0YxOiJjcnlwdG9qcy9qc3JzYSIsU0hBMzg0d2l0aFJTQWFuZE1HRjE6ImNyeXB0b2pzL2pzcnNhIixTSEE1MTJ3aXRoUlNBYW5kTUdGMToiY3J5cHRvanMvanNyc2EiLFJJUEVNRDE2MHdpdGhSU0FhbmRNR0YxOiJjcnlwdG9qcy9qc3JzYSIsfTt0aGlzLkNSWVBUT0pTTUVTU0FHRURJR0VTVE5BTUU9e21kNTpDcnlwdG9KUy5hbGdvLk1ENSxzaGExOkNyeXB0b0pTLmFsZ28uU0hBMSxzaGEyMjQ6Q3J5cHRvSlMuYWxnby5TSEEyMjQsc2hhMjU2OkNyeXB0b0pTLmFsZ28uU0hBMjU2LHNoYTM4NDpDcnlwdG9KUy5hbGdvLlNIQTM4NCxzaGE1MTI6Q3J5cHRvSlMuYWxnby5TSEE1MTIscmlwZW1kMTYwOkNyeXB0b0pTLmFsZ28uUklQRU1EMTYwfTt0aGlzLmdldERpZ2VzdEluZm9IZXg9ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgdGhpcy5ESUdFU1RJTkZPSEVBRFtiXT09InVuZGVmaW5lZCIpe3Rocm93ImFsZyBub3Qgc3VwcG9ydGVkIGluIFV0aWwuRElHRVNUSU5GT0hFQUQ6ICIrYn1yZXR1cm4gdGhpcy5ESUdFU1RJTkZPSEVBRFtiXSthfTt0aGlzLmdldFBhZGRlZERpZ2VzdEluZm9IZXg9ZnVuY3Rpb24oaCxhLGope3ZhciBjPXRoaXMuZ2V0RGlnZXN0SW5mb0hleChoLGEpO3ZhciBkPWovNDtpZihjLmxlbmd0aCsyMj5kKXt0aHJvdyJrZXkgaXMgdG9vIHNob3J0IGZvciBTaWdBbGc6IGtleWxlbj0iK2orIiwiK2F9dmFyIGI9IjAwMDEiO3ZhciBrPSIwMCIrYzt2YXIgZz0iIjt2YXIgbD1kLWIubGVuZ3RoLWsubGVuZ3RoO2Zvcih2YXIgZj0wO2Y8bDtmKz0yKXtnKz0iZmYifXZhciBlPWIrZytrO3JldHVybiBlfTt0aGlzLmhhc2hTdHJpbmc9ZnVuY3Rpb24oYSxjKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOmN9KTtyZXR1cm4gYi5kaWdlc3RTdHJpbmcoYSl9O3RoaXMuaGFzaEhleD1mdW5jdGlvbihiLGMpe3ZhciBhPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6Y30pO3JldHVybiBhLmRpZ2VzdEhleChiKX07dGhpcy5zaGExPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6InNoYTEiLHByb3Y6ImNyeXB0b2pzIn0pO3JldHVybiBiLmRpZ2VzdFN0cmluZyhhKX07dGhpcy5zaGEyNTY9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzoic2hhMjU2Iixwcm92OiJjcnlwdG9qcyJ9KTtyZXR1cm4gYi5kaWdlc3RTdHJpbmcoYSl9O3RoaXMuc2hhMjU2SGV4PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6InNoYTI1NiIscHJvdjoiY3J5cHRvanMifSk7cmV0dXJuIGIuZGlnZXN0SGV4KGEpfTt0aGlzLnNoYTUxMj1mdW5jdGlvbihhKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOiJzaGE1MTIiLHByb3Y6ImNyeXB0b2pzIn0pO3JldHVybiBiLmRpZ2VzdFN0cmluZyhhKX07dGhpcy5zaGE1MTJIZXg9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzoic2hhNTEyIixwcm92OiJjcnlwdG9qcyJ9KTtyZXR1cm4gYi5kaWdlc3RIZXgoYSl9O3RoaXMubWQ1PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6Im1kNSIscHJvdjoiY3J5cHRvanMifSk7cmV0dXJuIGIuZGlnZXN0U3RyaW5nKGEpfTt0aGlzLnJpcGVtZDE2MD1mdW5jdGlvbihhKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOiJyaXBlbWQxNjAiLHByb3Y6ImNyeXB0b2pzIn0pO3JldHVybiBiLmRpZ2VzdFN0cmluZyhhKX07dGhpcy5nZXRDcnlwdG9KU01EQnlOYW1lPWZ1bmN0aW9uKGEpe319O0tKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Q9ZnVuY3Rpb24oYyl7dmFyIGI9bnVsbDt2YXIgYT1udWxsO3ZhciBkPW51bGw7dGhpcy5zZXRBbGdBbmRQcm92aWRlcj1mdW5jdGlvbihnLGYpe2lmKGchPW51bGwmJmY9PT11bmRlZmluZWQpe2Y9S0pVUi5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbZ119aWYoIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOiIuaW5kZXhPZihnKSE9LTEmJmY9PSJjcnlwdG9qcyIpe3RyeXt0aGlzLm1kPUtKVVIuY3J5cHRvLlV0aWwuQ1JZUFRPSlNNRVNTQUdFRElHRVNUTkFNRVtnXS5jcmVhdGUoKX1jYXRjaChlKXt0aHJvdyJzZXRBbGdBbmRQcm92aWRlciBoYXNoIGFsZyBzZXQgZmFpbCBhbGc9IitnKyIvIitlfXRoaXMudXBkYXRlU3RyaW5nPWZ1bmN0aW9uKGgpe3RoaXMubWQudXBkYXRlKGgpfTt0aGlzLnVwZGF0ZUhleD1mdW5jdGlvbihoKXt2YXIgaT1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGgpO3RoaXMubWQudXBkYXRlKGkpfTt0aGlzLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBoPXRoaXMubWQuZmluYWxpemUoKTtyZXR1cm4gaC50b1N0cmluZyhDcnlwdG9KUy5lbmMuSGV4KX07dGhpcy5kaWdlc3RTdHJpbmc9ZnVuY3Rpb24oaCl7dGhpcy51cGRhdGVTdHJpbmcoaCk7cmV0dXJuIHRoaXMuZGlnZXN0KCl9O3RoaXMuZGlnZXN0SGV4PWZ1bmN0aW9uKGgpe3RoaXMudXBkYXRlSGV4KGgpO3JldHVybiB0aGlzLmRpZ2VzdCgpfX1pZigiOnNoYTI1NjoiLmluZGV4T2YoZykhPS0xJiZmPT0ic2pjbCIpe3RyeXt0aGlzLm1kPW5ldyBzamNsLmhhc2guc2hhMjU2KCl9Y2F0Y2goZSl7dGhyb3cic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgYWxnPSIrZysiLyIrZX10aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbihoKXt0aGlzLm1kLnVwZGF0ZShoKX07dGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24oaSl7dmFyIGg9c2pjbC5jb2RlYy5oZXgudG9CaXRzKGkpO3RoaXMubWQudXBkYXRlKGgpfTt0aGlzLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBoPXRoaXMubWQuZmluYWxpemUoKTtyZXR1cm4gc2pjbC5jb2RlYy5oZXguZnJvbUJpdHMoaCl9O3RoaXMuZGlnZXN0U3RyaW5nPWZ1bmN0aW9uKGgpe3RoaXMudXBkYXRlU3RyaW5nKGgpO3JldHVybiB0aGlzLmRpZ2VzdCgpfTt0aGlzLmRpZ2VzdEhleD1mdW5jdGlvbihoKXt0aGlzLnVwZGF0ZUhleChoKTtyZXR1cm4gdGhpcy5kaWdlc3QoKX19fTt0aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbihlKXt0aHJvdyJ1cGRhdGVTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnTmFtZSsiLyIrdGhpcy5wcm92TmFtZX07dGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24oZSl7dGhyb3cidXBkYXRlSGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ05hbWUrIi8iK3RoaXMucHJvdk5hbWV9O3RoaXMuZGlnZXN0PWZ1bmN0aW9uKCl7dGhyb3ciZGlnZXN0KCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ05hbWUrIi8iK3RoaXMucHJvdk5hbWV9O3RoaXMuZGlnZXN0U3RyaW5nPWZ1bmN0aW9uKGUpe3Rocm93ImRpZ2VzdFN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6ICIrdGhpcy5hbGdOYW1lKyIvIit0aGlzLnByb3ZOYW1lfTt0aGlzLmRpZ2VzdEhleD1mdW5jdGlvbihlKXt0aHJvdyJkaWdlc3RIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnTmFtZSsiLyIrdGhpcy5wcm92TmFtZX07aWYoYyE9PXVuZGVmaW5lZCl7aWYoYy5hbGchPT11bmRlZmluZWQpe3RoaXMuYWxnTmFtZT1jLmFsZztpZihjLnByb3Y9PT11bmRlZmluZWQpe3RoaXMucHJvdk5hbWU9S0pVUi5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdGhpcy5hbGdOYW1lXX10aGlzLnNldEFsZ0FuZFByb3ZpZGVyKHRoaXMuYWxnTmFtZSx0aGlzLnByb3ZOYW1lKX19fTtLSlVSLmNyeXB0by5NYWM9ZnVuY3Rpb24oZCl7dmFyIGY9bnVsbDt2YXIgYz1udWxsO3ZhciBhPW51bGw7dmFyIGU9bnVsbDt2YXIgYj1udWxsO3RoaXMuc2V0QWxnQW5kUHJvdmlkZXI9ZnVuY3Rpb24oayxpKXtrPWsudG9Mb3dlckNhc2UoKTtpZihrPT1udWxsKXtrPSJobWFjc2hhMSJ9az1rLnRvTG93ZXJDYXNlKCk7aWYoay5zdWJzdHIoMCw0KSE9ImhtYWMiKXt0aHJvdyJzZXRBbGdBbmRQcm92aWRlciB1bnN1cHBvcnRlZCBITUFDIGFsZzogIitrfWlmKGk9PT11bmRlZmluZWQpe2k9S0pVUi5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJba119dGhpcy5hbGdQcm92PWsrIi8iK2k7dmFyIGc9ay5zdWJzdHIoNCk7aWYoIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOiIuaW5kZXhPZihnKSE9LTEmJmk9PSJjcnlwdG9qcyIpe3RyeXt2YXIgaj1LSlVSLmNyeXB0by5VdGlsLkNSWVBUT0pTTUVTU0FHRURJR0VTVE5BTUVbZ107dGhpcy5tYWM9Q3J5cHRvSlMuYWxnby5ITUFDLmNyZWF0ZShqLHRoaXMucGFzcyl9Y2F0Y2goaCl7dGhyb3cic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgaGFzaEFsZz0iK2crIi8iK2h9dGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24obCl7dGhpcy5tYWMudXBkYXRlKGwpfTt0aGlzLnVwZGF0ZUhleD1mdW5jdGlvbihsKXt2YXIgbT1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGwpO3RoaXMubWFjLnVwZGF0ZShtKX07dGhpcy5kb0ZpbmFsPWZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5tYWMuZmluYWxpemUoKTtyZXR1cm4gbC50b1N0cmluZyhDcnlwdG9KUy5lbmMuSGV4KX07dGhpcy5kb0ZpbmFsU3RyaW5nPWZ1bmN0aW9uKGwpe3RoaXMudXBkYXRlU3RyaW5nKGwpO3JldHVybiB0aGlzLmRvRmluYWwoKX07dGhpcy5kb0ZpbmFsSGV4PWZ1bmN0aW9uKGwpe3RoaXMudXBkYXRlSGV4KGwpO3JldHVybiB0aGlzLmRvRmluYWwoKX19fTt0aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbihnKXt0aHJvdyJ1cGRhdGVTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnUHJvdn07dGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24oZyl7dGhyb3cidXBkYXRlSGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ1Byb3Z9O3RoaXMuZG9GaW5hbD1mdW5jdGlvbigpe3Rocm93ImRpZ2VzdCgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6ICIrdGhpcy5hbGdQcm92fTt0aGlzLmRvRmluYWxTdHJpbmc9ZnVuY3Rpb24oZyl7dGhyb3ciZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ1Byb3Z9O3RoaXMuZG9GaW5hbEhleD1mdW5jdGlvbihnKXt0aHJvdyJkaWdlc3RIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnUHJvdn07dGhpcy5zZXRQYXNzd29yZD1mdW5jdGlvbihoKXtpZih0eXBlb2YgaD09InN0cmluZyIpe3ZhciBnPWg7aWYoaC5sZW5ndGglMj09MXx8IWgubWF0Y2goL15bMC05QS1GYS1mXSskLykpe2c9cnN0cnRvaGV4KGgpfXRoaXMucGFzcz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGcpO3JldHVybn1pZih0eXBlb2YgaCE9Im9iamVjdCIpe3Rocm93IktKVVIuY3J5cHRvLk1hYyB1bnN1cHBvcnRlZCBwYXNzd29yZCB0eXBlOiAiK2h9dmFyIGc9bnVsbDtpZihoLmhleCE9PXVuZGVmaW5lZCl7aWYoaC5oZXgubGVuZ3RoJTIhPTB8fCFoLmhleC5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKSl7dGhyb3ciTWFjOiB3cm9uZyBoZXggcGFzc3dvcmQ6ICIraC5oZXh9Zz1oLmhleH1pZihoLnV0ZjghPT11bmRlZmluZWQpe2c9dXRmOHRvaGV4KGgudXRmOCl9aWYoaC5yc3RyIT09dW5kZWZpbmVkKXtnPXJzdHJ0b2hleChoLnJzdHIpfWlmKGguYjY0IT09dW5kZWZpbmVkKXtnPWI2NHRvaGV4KGguYjY0KX1pZihoLmI2NHUhPT11bmRlZmluZWQpe2c9YjY0dXRvaGV4KGguYjY0dSl9aWYoZz09bnVsbCl7dGhyb3ciS0pVUi5jcnlwdG8uTWFjIHVuc3VwcG9ydGVkIHBhc3N3b3JkIHR5cGU6ICIraH10aGlzLnBhc3M9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShnKX07aWYoZCE9PXVuZGVmaW5lZCl7aWYoZC5wYXNzIT09dW5kZWZpbmVkKXt0aGlzLnNldFBhc3N3b3JkKGQucGFzcyl9aWYoZC5hbGchPT11bmRlZmluZWQpe3RoaXMuYWxnTmFtZT1kLmFsZztpZihkLnByb3Y9PT11bmRlZmluZWQpe3RoaXMucHJvdk5hbWU9S0pVUi5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdGhpcy5hbGdOYW1lXX10aGlzLnNldEFsZ0FuZFByb3ZpZGVyKHRoaXMuYWxnTmFtZSx0aGlzLnByb3ZOYW1lKX19fTtLSlVSLmNyeXB0by5TaWduYXR1cmU9ZnVuY3Rpb24obyl7dmFyIHE9bnVsbDt2YXIgbj1udWxsO3ZhciByPW51bGw7dmFyIGM9bnVsbDt2YXIgbD1udWxsO3ZhciBkPW51bGw7dmFyIGs9bnVsbDt2YXIgaD1udWxsO3ZhciBwPW51bGw7dmFyIGU9bnVsbDt2YXIgYj0tMTt2YXIgZz1udWxsO3ZhciBqPW51bGw7dmFyIGE9bnVsbDt2YXIgaT1udWxsO3ZhciBmPW51bGw7dGhpcy5fc2V0QWxnTmFtZXM9ZnVuY3Rpb24oKXtpZih0aGlzLmFsZ05hbWUubWF0Y2goL14oLispd2l0aCguKykkLykpe3RoaXMubWRBbGdOYW1lPVJlZ0V4cC4kMS50b0xvd2VyQ2FzZSgpO3RoaXMucHVia2V5QWxnTmFtZT1SZWdFeHAuJDIudG9Mb3dlckNhc2UoKX19O3RoaXMuX3plcm9QYWRkaW5nT2ZTaWduYXR1cmU9ZnVuY3Rpb24oeCx3KXt2YXIgdj0iIjt2YXIgdD13LzQteC5sZW5ndGg7Zm9yKHZhciB1PTA7dTx0O3UrKyl7dj12KyIwIn1yZXR1cm4gdit4fTt0aGlzLnNldEFsZ0FuZFByb3ZpZGVyPWZ1bmN0aW9uKHUsdCl7dGhpcy5fc2V0QWxnTmFtZXMoKTtpZih0IT0iY3J5cHRvanMvanNyc2EiKXt0aHJvdyJwcm92aWRlciBub3Qgc3VwcG9ydGVkOiAiK3R9aWYoIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOiIuaW5kZXhPZih0aGlzLm1kQWxnTmFtZSkhPS0xKXt0cnl7dGhpcy5tZD1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOnRoaXMubWRBbGdOYW1lfSl9Y2F0Y2gocyl7dGhyb3cic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgYWxnPSIrdGhpcy5tZEFsZ05hbWUrIi8iK3N9dGhpcy5pbml0PWZ1bmN0aW9uKHcseCl7dmFyIHk9bnVsbDt0cnl7aWYoeD09PXVuZGVmaW5lZCl7eT1LRVlVVElMLmdldEtleSh3KX1lbHNle3k9S0VZVVRJTC5nZXRLZXkodyx4KX19Y2F0Y2godil7dGhyb3ciaW5pdCBmYWlsZWQ6Iit2fWlmKHkuaXNQcml2YXRlPT09dHJ1ZSl7dGhpcy5wcnZLZXk9eTt0aGlzLnN0YXRlPSJTSUdOIn1lbHNle2lmKHkuaXNQdWJsaWM9PT10cnVlKXt0aGlzLnB1YktleT15O3RoaXMuc3RhdGU9IlZFUklGWSJ9ZWxzZXt0aHJvdyJpbml0IGZhaWxlZC46Iit5fX19O3RoaXMuaW5pdFNpZ249ZnVuY3Rpb24odil7aWYodHlwZW9mIHYuZWNwcnZoZXg9PSJzdHJpbmciJiZ0eXBlb2Ygdi5lY2N1cnZlbmFtZT09InN0cmluZyIpe3RoaXMuZWNwcnZoZXg9di5lY3BydmhleDt0aGlzLmVjY3VydmVuYW1lPXYuZWNjdXJ2ZW5hbWV9ZWxzZXt0aGlzLnBydktleT12fXRoaXMuc3RhdGU9IlNJR04ifTt0aGlzLmluaXRWZXJpZnlCeVB1YmxpY0tleT1mdW5jdGlvbih2KXtpZih0eXBlb2Ygdi5lY3B1YmhleD09InN0cmluZyImJnR5cGVvZiB2LmVjY3VydmVuYW1lPT0ic3RyaW5nIil7dGhpcy5lY3B1YmhleD12LmVjcHViaGV4O3RoaXMuZWNjdXJ2ZW5hbWU9di5lY2N1cnZlbmFtZX1lbHNle2lmKHYgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5FQ0RTQSl7dGhpcy5wdWJLZXk9dn1lbHNle2lmKHYgaW5zdGFuY2VvZiBSU0FLZXkpe3RoaXMucHViS2V5PXZ9fX10aGlzLnN0YXRlPSJWRVJJRlkifTt0aGlzLmluaXRWZXJpZnlCeUNlcnRpZmljYXRlUEVNPWZ1bmN0aW9uKHYpe3ZhciB3PW5ldyBYNTA5KCk7dy5yZWFkQ2VydFBFTSh2KTt0aGlzLnB1YktleT13LnN1YmplY3RQdWJsaWNLZXlSU0E7dGhpcy5zdGF0ZT0iVkVSSUZZIn07dGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24odil7dGhpcy5tZC51cGRhdGVTdHJpbmcodil9O3RoaXMudXBkYXRlSGV4PWZ1bmN0aW9uKHYpe3RoaXMubWQudXBkYXRlSGV4KHYpfTt0aGlzLnNpZ249ZnVuY3Rpb24oKXt0aGlzLnNIYXNoSGV4PXRoaXMubWQuZGlnZXN0KCk7aWYodHlwZW9mIHRoaXMuZWNwcnZoZXghPSJ1bmRlZmluZWQiJiZ0eXBlb2YgdGhpcy5lY2N1cnZlbmFtZSE9InVuZGVmaW5lZCIpe3ZhciB2PW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6dGhpcy5lY2N1cnZlbmFtZX0pO3RoaXMuaFNpZ249di5zaWduSGV4KHRoaXMuc0hhc2hIZXgsdGhpcy5lY3BydmhleCl9ZWxzZXtpZih0aGlzLnBydktleSBpbnN0YW5jZW9mIFJTQUtleSYmdGhpcy5wdWJrZXlBbGdOYW1lPT0icnNhYW5kbWdmMSIpe3RoaXMuaFNpZ249dGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaFBTUyh0aGlzLnNIYXNoSGV4LHRoaXMubWRBbGdOYW1lLHRoaXMucHNzU2FsdExlbil9ZWxzZXtpZih0aGlzLnBydktleSBpbnN0YW5jZW9mIFJTQUtleSYmdGhpcy5wdWJrZXlBbGdOYW1lPT0icnNhIil7dGhpcy5oU2lnbj10aGlzLnBydktleS5zaWduV2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgsdGhpcy5tZEFsZ05hbWUpfWVsc2V7aWYodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5FQ0RTQSl7dGhpcy5oU2lnbj10aGlzLnBydktleS5zaWduV2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgpfWVsc2V7aWYodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0Epe3RoaXMuaFNpZ249dGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4KX1lbHNle3Rocm93IlNpZ25hdHVyZTogdW5zdXBwb3J0ZWQgcHVibGljIGtleSBhbGc6ICIrdGhpcy5wdWJrZXlBbGdOYW1lfX19fX1yZXR1cm4gdGhpcy5oU2lnbn07dGhpcy5zaWduU3RyaW5nPWZ1bmN0aW9uKHYpe3RoaXMudXBkYXRlU3RyaW5nKHYpO3JldHVybiB0aGlzLnNpZ24oKX07dGhpcy5zaWduSGV4PWZ1bmN0aW9uKHYpe3RoaXMudXBkYXRlSGV4KHYpO3JldHVybiB0aGlzLnNpZ24oKX07dGhpcy52ZXJpZnk9ZnVuY3Rpb24odil7dGhpcy5zSGFzaEhleD10aGlzLm1kLmRpZ2VzdCgpO2lmKHR5cGVvZiB0aGlzLmVjcHViaGV4IT0idW5kZWZpbmVkIiYmdHlwZW9mIHRoaXMuZWNjdXJ2ZW5hbWUhPSJ1bmRlZmluZWQiKXt2YXIgdz1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOnRoaXMuZWNjdXJ2ZW5hbWV9KTtyZXR1cm4gdy52ZXJpZnlIZXgodGhpcy5zSGFzaEhleCx2LHRoaXMuZWNwdWJoZXgpfWVsc2V7aWYodGhpcy5wdWJLZXkgaW5zdGFuY2VvZiBSU0FLZXkmJnRoaXMucHVia2V5QWxnTmFtZT09InJzYWFuZG1nZjEiKXtyZXR1cm4gdGhpcy5wdWJLZXkudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoUFNTKHRoaXMuc0hhc2hIZXgsdix0aGlzLm1kQWxnTmFtZSx0aGlzLnBzc1NhbHRMZW4pfWVsc2V7aWYodGhpcy5wdWJLZXkgaW5zdGFuY2VvZiBSU0FLZXkmJnRoaXMucHVia2V5QWxnTmFtZT09InJzYSIpe3JldHVybiB0aGlzLnB1YktleS52ZXJpZnlXaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCx2KX1lbHNle2lmKHRoaXMucHViS2V5IGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0Epe3JldHVybiB0aGlzLnB1YktleS52ZXJpZnlXaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCx2KX1lbHNle2lmKHRoaXMucHViS2V5IGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRFNBKXtyZXR1cm4gdGhpcy5wdWJLZXkudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgsdil9ZWxzZXt0aHJvdyJTaWduYXR1cmU6IHVuc3VwcG9ydGVkIHB1YmxpYyBrZXkgYWxnOiAiK3RoaXMucHVia2V5QWxnTmFtZX19fX19fX19O3RoaXMuaW5pdD1mdW5jdGlvbihzLHQpe3Rocm93ImluaXQoa2V5LCBwYXNzKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy5pbml0VmVyaWZ5QnlQdWJsaWNLZXk9ZnVuY3Rpb24ocyl7dGhyb3ciaW5pdFZlcmlmeUJ5UHVibGljS2V5KHJzYVB1YktleXkpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLmluaXRWZXJpZnlCeUNlcnRpZmljYXRlUEVNPWZ1bmN0aW9uKHMpe3Rocm93ImluaXRWZXJpZnlCeUNlcnRpZmljYXRlUEVNKGNlcnRQRU0pIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLmluaXRTaWduPWZ1bmN0aW9uKHMpe3Rocm93ImluaXRTaWduKHBydktleSkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj0iK3RoaXMuYWxnUHJvdk5hbWV9O3RoaXMudXBkYXRlU3RyaW5nPWZ1bmN0aW9uKHMpe3Rocm93InVwZGF0ZVN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLnVwZGF0ZUhleD1mdW5jdGlvbihzKXt0aHJvdyJ1cGRhdGVIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy5zaWduPWZ1bmN0aW9uKCl7dGhyb3cic2lnbigpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLnNpZ25TdHJpbmc9ZnVuY3Rpb24ocyl7dGhyb3ciZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj0iK3RoaXMuYWxnUHJvdk5hbWV9O3RoaXMuc2lnbkhleD1mdW5jdGlvbihzKXt0aHJvdyJkaWdlc3RIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy52ZXJpZnk9ZnVuY3Rpb24ocyl7dGhyb3cidmVyaWZ5KGhTaWdWYWwpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLmluaXRQYXJhbXM9bztpZihvIT09dW5kZWZpbmVkKXtpZihvLmFsZyE9PXVuZGVmaW5lZCl7dGhpcy5hbGdOYW1lPW8uYWxnO2lmKG8ucHJvdj09PXVuZGVmaW5lZCl7dGhpcy5wcm92TmFtZT1LSlVSLmNyeXB0by5VdGlsLkRFRkFVTFRQUk9WSURFUlt0aGlzLmFsZ05hbWVdfWVsc2V7dGhpcy5wcm92TmFtZT1vLnByb3Z9dGhpcy5hbGdQcm92TmFtZT10aGlzLmFsZ05hbWUrIjoiK3RoaXMucHJvdk5hbWU7dGhpcy5zZXRBbGdBbmRQcm92aWRlcih0aGlzLmFsZ05hbWUsdGhpcy5wcm92TmFtZSk7dGhpcy5fc2V0QWxnTmFtZXMoKX1pZihvLnBzc3NhbHRsZW4hPT11bmRlZmluZWQpe3RoaXMucHNzU2FsdExlbj1vLnBzc3NhbHRsZW59aWYoby5wcnZrZXlwZW0hPT11bmRlZmluZWQpe2lmKG8ucHJ2a2V5cGFzIT09dW5kZWZpbmVkKXt0aHJvdyJib3RoIHBydmtleXBlbSBhbmQgcHJ2a2V5cGFzIHBhcmFtZXRlcnMgbm90IHN1cHBvcnRlZCJ9ZWxzZXt0cnl7dmFyIHE9bmV3IFJTQUtleSgpO3EucmVhZFByaXZhdGVLZXlGcm9tUEVNU3RyaW5nKG8ucHJ2a2V5cGVtKTt0aGlzLmluaXRTaWduKHEpfWNhdGNoKG0pe3Rocm93ImZhdGFsIGVycm9yIHRvIGxvYWQgcGVtIHByaXZhdGUga2V5OiAiK219fX19fTtLSlVSLmNyeXB0by5PSUQ9bmV3IGZ1bmN0aW9uKCl7dGhpcy5vaWRoZXgybmFtZT17IjJhODY0ODg2ZjcwZDAxMDEwMSI6InJzYUVuY3J5cHRpb24iLCIyYTg2NDhjZTNkMDIwMSI6ImVjUHVibGljS2V5IiwiMmE4NjQ4Y2UzODA0MDEiOiJkc2EiLCIyYTg2NDhjZTNkMDMwMTA3Ijoic2VjcDI1NnIxIiwiMmI4MTA0MDAxZiI6InNlY3AxOTJrMSIsIjJiODEwNDAwMjEiOiJzZWNwMjI0cjEiLCIyYjgxMDQwMDBhIjoic2VjcDI1NmsxIiwiMmI4MTA0MDAyMyI6InNlY3A1MjFyMSIsIjJiODEwNDAwMjIiOiJzZWNwMzg0cjEiLCIyYTg2NDhjZTM4MDQwMyI6IlNIQTF3aXRoRFNBIiwiNjA4NjQ4MDE2NTAzMDQwMzAxIjoiU0hBMjI0d2l0aERTQSIsIjYwODY0ODAxNjUwMzA0MDMwMiI6IlNIQTI1NndpdGhEU0EiLH19OwovKiEgZWNkc2EtbW9kaWZpZWQtMS4wLjQuanMgKGMpIFN0ZXBoYW4gVGhvbWFzLCBLZW5qaSBVcnVzaGltYSB8IGdpdGh1Yi5jb20vYml0Y29pbmpzL2JpdGNvaW5qcy1saWIvYmxvYi9tYXN0ZXIvTElDRU5TRQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5jcnlwdG89PSJ1bmRlZmluZWQifHwhS0pVUi5jcnlwdG8pe0tKVVIuY3J5cHRvPXt9fUtKVVIuY3J5cHRvLkVDRFNBPWZ1bmN0aW9uKGgpe3ZhciBlPSJzZWNwMjU2cjEiO3ZhciBnPW51bGw7dmFyIGI9bnVsbDt2YXIgZj1udWxsO3ZhciBhPW5ldyBTZWN1cmVSYW5kb20oKTt2YXIgZD1udWxsO3RoaXMudHlwZT0iRUMiO2Z1bmN0aW9uIGMocyxvLHIsbil7dmFyIGo9TWF0aC5tYXgoby5iaXRMZW5ndGgoKSxuLmJpdExlbmd0aCgpKTt2YXIgdD1zLmFkZDJEKHIpO3ZhciBxPXMuY3VydmUuZ2V0SW5maW5pdHkoKTtmb3IodmFyIHA9ai0xO3A+PTA7LS1wKXtxPXEudHdpY2UyRCgpO3Euej1CaWdJbnRlZ2VyLk9ORTtpZihvLnRlc3RCaXQocCkpe2lmKG4udGVzdEJpdChwKSl7cT1xLmFkZDJEKHQpfWVsc2V7cT1xLmFkZDJEKHMpfX1lbHNle2lmKG4udGVzdEJpdChwKSl7cT1xLmFkZDJEKHIpfX19cmV0dXJuIHF9dGhpcy5nZXRCaWdSYW5kb209ZnVuY3Rpb24oaSl7cmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGkuYml0TGVuZ3RoKCksYSkubW9kKGkuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpKS5hZGQoQmlnSW50ZWdlci5PTkUpfTt0aGlzLnNldE5hbWVkQ3VydmU9ZnVuY3Rpb24oaSl7dGhpcy5lY3BhcmFtcz1LSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCLmdldEJ5TmFtZShpKTt0aGlzLnBydktleUhleD1udWxsO3RoaXMucHViS2V5SGV4PW51bGw7dGhpcy5jdXJ2ZU5hbWU9aX07dGhpcy5zZXRQcml2YXRlS2V5SGV4PWZ1bmN0aW9uKGkpe3RoaXMuaXNQcml2YXRlPXRydWU7dGhpcy5wcnZLZXlIZXg9aX07dGhpcy5zZXRQdWJsaWNLZXlIZXg9ZnVuY3Rpb24oaSl7dGhpcy5pc1B1YmxpYz10cnVlO3RoaXMucHViS2V5SGV4PWl9O3RoaXMuZ2VuZXJhdGVLZXlQYWlySGV4PWZ1bmN0aW9uKCl7dmFyIGs9dGhpcy5lY3BhcmFtcy5uO3ZhciBuPXRoaXMuZ2V0QmlnUmFuZG9tKGspO3ZhciBsPXRoaXMuZWNwYXJhbXMuRy5tdWx0aXBseShuKTt2YXIgcT1sLmdldFgoKS50b0JpZ0ludGVnZXIoKTt2YXIgbz1sLmdldFkoKS50b0JpZ0ludGVnZXIoKTt2YXIgaT10aGlzLmVjcGFyYW1zLmtleWxlbi80O3ZhciBtPSgiMDAwMDAwMDAwMCIrbi50b1N0cmluZygxNikpLnNsaWNlKC1pKTt2YXIgcj0oIjAwMDAwMDAwMDAiK3EudG9TdHJpbmcoMTYpKS5zbGljZSgtaSk7dmFyIHA9KCIwMDAwMDAwMDAwIitvLnRvU3RyaW5nKDE2KSkuc2xpY2UoLWkpO3ZhciBqPSIwNCIrcitwO3RoaXMuc2V0UHJpdmF0ZUtleUhleChtKTt0aGlzLnNldFB1YmxpY0tleUhleChqKTtyZXR1cm57ZWNwcnZoZXg6bSxlY3B1YmhleDpqfX07dGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLnNpZ25IZXgoaSx0aGlzLnBydktleUhleCl9O3RoaXMuc2lnbkhleD1mdW5jdGlvbihvLGope3ZhciB0PW5ldyBCaWdJbnRlZ2VyKGosMTYpO3ZhciBsPXRoaXMuZWNwYXJhbXMubjt2YXIgcT1uZXcgQmlnSW50ZWdlcihvLDE2KTtkb3t2YXIgbT10aGlzLmdldEJpZ1JhbmRvbShsKTt2YXIgdT10aGlzLmVjcGFyYW1zLkc7dmFyIHA9dS5tdWx0aXBseShtKTt2YXIgaT1wLmdldFgoKS50b0JpZ0ludGVnZXIoKS5tb2QobCl9d2hpbGUoaS5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKTw9MCk7dmFyIHY9bS5tb2RJbnZlcnNlKGwpLm11bHRpcGx5KHEuYWRkKHQubXVsdGlwbHkoaSkpKS5tb2QobCk7cmV0dXJuIEtKVVIuY3J5cHRvLkVDRFNBLmJpUlNTaWdUb0FTTjFTaWcoaSx2KX07dGhpcy5zaWduPWZ1bmN0aW9uKG0sdSl7dmFyIHE9dTt2YXIgaj10aGlzLmVjcGFyYW1zLm47dmFyIHA9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobSk7ZG97dmFyIGw9dGhpcy5nZXRCaWdSYW5kb20oaik7dmFyIHQ9dGhpcy5lY3BhcmFtcy5HO3ZhciBvPXQubXVsdGlwbHkobCk7dmFyIGk9by5nZXRYKCkudG9CaWdJbnRlZ2VyKCkubW9kKGopfXdoaWxlKGkuY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTyk8PTApO3ZhciB2PWwubW9kSW52ZXJzZShqKS5tdWx0aXBseShwLmFkZChxLm11bHRpcGx5KGkpKSkubW9kKGopO3JldHVybiB0aGlzLnNlcmlhbGl6ZVNpZyhpLHYpfTt0aGlzLnZlcmlmeVdpdGhNZXNzYWdlSGFzaD1mdW5jdGlvbihqLGkpe3JldHVybiB0aGlzLnZlcmlmeUhleChqLGksdGhpcy5wdWJLZXlIZXgpfTt0aGlzLnZlcmlmeUhleD1mdW5jdGlvbihtLGkscCl7dmFyIGwsajt2YXIgbz1LSlVSLmNyeXB0by5FQ0RTQS5wYXJzZVNpZ0hleChpKTtsPW8ucjtqPW8uczt2YXIgaztrPUVDUG9pbnRGcC5kZWNvZGVGcm9tSGV4KHRoaXMuZWNwYXJhbXMuY3VydmUscCk7dmFyIG49bmV3IEJpZ0ludGVnZXIobSwxNik7cmV0dXJuIHRoaXMudmVyaWZ5UmF3KG4sbCxqLGspfTt0aGlzLnZlcmlmeT1mdW5jdGlvbihvLHAsail7dmFyIGwsaTtpZihCaXRjb2luLlV0aWwuaXNBcnJheShwKSl7dmFyIG49dGhpcy5wYXJzZVNpZyhwKTtsPW4ucjtpPW4uc31lbHNle2lmKCJvYmplY3QiPT09dHlwZW9mIHAmJnAuciYmcC5zKXtsPXAucjtpPXAuc31lbHNle3Rocm93IkludmFsaWQgdmFsdWUgZm9yIHNpZ25hdHVyZSJ9fXZhciBrO2lmKGogaW5zdGFuY2VvZiBFQ1BvaW50RnApe2s9an1lbHNle2lmKEJpdGNvaW4uVXRpbC5pc0FycmF5KGopKXtrPUVDUG9pbnRGcC5kZWNvZGVGcm9tKHRoaXMuZWNwYXJhbXMuY3VydmUsail9ZWxzZXt0aHJvdyJJbnZhbGlkIGZvcm1hdCBmb3IgcHVia2V5IHZhbHVlLCBtdXN0IGJlIGJ5dGUgYXJyYXkgb3IgRUNQb2ludEZwIn19dmFyIG09QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobyk7cmV0dXJuIHRoaXMudmVyaWZ5UmF3KG0sbCxpLGspfTt0aGlzLnZlcmlmeVJhdz1mdW5jdGlvbihvLGksdyxtKXt2YXIgbD10aGlzLmVjcGFyYW1zLm47dmFyIHU9dGhpcy5lY3BhcmFtcy5HO2lmKGkuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKTwwfHxpLmNvbXBhcmVUbyhsKT49MCl7cmV0dXJuIGZhbHNlfWlmKHcuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKTwwfHx3LmNvbXBhcmVUbyhsKT49MCl7cmV0dXJuIGZhbHNlfXZhciBwPXcubW9kSW52ZXJzZShsKTt2YXIgaz1vLm11bHRpcGx5KHApLm1vZChsKTt2YXIgaj1pLm11bHRpcGx5KHApLm1vZChsKTt2YXIgcT11Lm11bHRpcGx5KGspLmFkZChtLm11bHRpcGx5KGopKTt2YXIgdD1xLmdldFgoKS50b0JpZ0ludGVnZXIoKS5tb2QobCk7cmV0dXJuIHQuZXF1YWxzKGkpfTt0aGlzLnNlcmlhbGl6ZVNpZz1mdW5jdGlvbihrLGope3ZhciBsPWsudG9CeXRlQXJyYXlTaWduZWQoKTt2YXIgaT1qLnRvQnl0ZUFycmF5U2lnbmVkKCk7dmFyIG09W107bS5wdXNoKDIpO20ucHVzaChsLmxlbmd0aCk7bT1tLmNvbmNhdChsKTttLnB1c2goMik7bS5wdXNoKGkubGVuZ3RoKTttPW0uY29uY2F0KGkpO20udW5zaGlmdChtLmxlbmd0aCk7bS51bnNoaWZ0KDQ4KTtyZXR1cm4gbX07dGhpcy5wYXJzZVNpZz1mdW5jdGlvbihuKXt2YXIgbTtpZihuWzBdIT00OCl7dGhyb3cgbmV3IEVycm9yKCJTaWduYXR1cmUgbm90IGEgdmFsaWQgREVSU2VxdWVuY2UiKX1tPTI7aWYoblttXSE9Mil7dGhyb3cgbmV3IEVycm9yKCJGaXJzdCBlbGVtZW50IGluIHNpZ25hdHVyZSBtdXN0IGJlIGEgREVSSW50ZWdlciIpfXZhciBsPW4uc2xpY2UobSsyLG0rMituW20rMV0pO20rPTIrblttKzFdO2lmKG5bbV0hPTIpe3Rocm93IG5ldyBFcnJvcigiU2Vjb25kIGVsZW1lbnQgaW4gc2lnbmF0dXJlIG11c3QgYmUgYSBERVJJbnRlZ2VyIil9dmFyIGk9bi5zbGljZShtKzIsbSsyK25bbSsxXSk7bSs9MituW20rMV07dmFyIGs9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobCk7dmFyIGo9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQoaSk7cmV0dXJue3I6ayxzOmp9fTt0aGlzLnBhcnNlU2lnQ29tcGFjdD1mdW5jdGlvbihtKXtpZihtLmxlbmd0aCE9PTY1KXt0aHJvdyJTaWduYXR1cmUgaGFzIHRoZSB3cm9uZyBsZW5ndGgifXZhciBqPW1bMF0tMjc7aWYoajwwfHxqPjcpe3Rocm93IkludmFsaWQgc2lnbmF0dXJlIHR5cGUifXZhciBvPXRoaXMuZWNwYXJhbXMubjt2YXIgbD1CaWdJbnRlZ2VyLmZyb21CeXRlQXJyYXlVbnNpZ25lZChtLnNsaWNlKDEsMzMpKS5tb2Qobyk7dmFyIGs9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobS5zbGljZSgzMyw2NSkpLm1vZChvKTtyZXR1cm57cjpsLHM6ayxpOmp9fTtpZihoIT09dW5kZWZpbmVkKXtpZihoLmN1cnZlIT09dW5kZWZpbmVkKXt0aGlzLmN1cnZlTmFtZT1oLmN1cnZlfX1pZih0aGlzLmN1cnZlTmFtZT09PXVuZGVmaW5lZCl7dGhpcy5jdXJ2ZU5hbWU9ZX10aGlzLnNldE5hbWVkQ3VydmUodGhpcy5jdXJ2ZU5hbWUpO2lmKGghPT11bmRlZmluZWQpe2lmKGgucHJ2IT09dW5kZWZpbmVkKXt0aGlzLnNldFByaXZhdGVLZXlIZXgoaC5wcnYpfWlmKGgucHViIT09dW5kZWZpbmVkKXt0aGlzLnNldFB1YmxpY0tleUhleChoLnB1Yil9fX07S0pVUi5jcnlwdG8uRUNEU0EucGFyc2VTaWdIZXg9ZnVuY3Rpb24oYSl7dmFyIGI9S0pVUi5jcnlwdG8uRUNEU0EucGFyc2VTaWdIZXhJbkhleFJTKGEpO3ZhciBkPW5ldyBCaWdJbnRlZ2VyKGIuciwxNik7dmFyIGM9bmV3IEJpZ0ludGVnZXIoYi5zLDE2KTtyZXR1cm57cjpkLHM6Y319O0tKVVIuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUz1mdW5jdGlvbihjKXtpZihjLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJzaWduYXR1cmUgaXMgbm90IGEgQVNOLjEgc2VxdWVuY2UifXZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGMsMCk7aWYoYi5sZW5ndGghPTIpe3Rocm93Im51bWJlciBvZiBzaWduYXR1cmUgQVNOLjEgc2VxdWVuY2UgZWxlbWVudHMgc2VlbSB3cm9uZyJ9dmFyIGc9YlswXTt2YXIgZj1iWzFdO2lmKGMuc3Vic3RyKGcsMikhPSIwMiIpe3Rocm93IjFzdCBpdGVtIG9mIHNlcXVlbmUgb2Ygc2lnbmF0dXJlIGlzIG5vdCBBU04uMSBpbnRlZ2VyIn1pZihjLnN1YnN0cihmLDIpIT0iMDIiKXt0aHJvdyIybmQgaXRlbSBvZiBzZXF1ZW5lIG9mIHNpZ25hdHVyZSBpcyBub3QgQVNOLjEgaW50ZWdlciJ9dmFyIGU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooYyxnKTt2YXIgZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihjLGYpO3JldHVybntyOmUsczpkfX07S0pVUi5jcnlwdG8uRUNEU0EuYXNuMVNpZ1RvQ29uY2F0U2lnPWZ1bmN0aW9uKGMpe3ZhciBkPUtKVVIuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUyhjKTt2YXIgYj1kLnI7dmFyIGE9ZC5zO2lmKGIuc3Vic3RyKDAsMik9PSIwMCImJigoKGIubGVuZ3RoLzIpKjgpJSgxNio4KSk9PTgpe2I9Yi5zdWJzdHIoMil9aWYoYS5zdWJzdHIoMCwyKT09IjAwIiYmKCgoYS5sZW5ndGgvMikqOCklKDE2KjgpKT09OCl7YT1hLnN1YnN0cigyKX1pZigoKChiLmxlbmd0aC8yKSo4KSUoMTYqOCkpIT0wKXt0aHJvdyJ1bmtub3duIEVDRFNBIHNpZyByIGxlbmd0aCBlcnJvciJ9aWYoKCgoYS5sZW5ndGgvMikqOCklKDE2KjgpKSE9MCl7dGhyb3cidW5rbm93biBFQ0RTQSBzaWcgcyBsZW5ndGggZXJyb3IifXJldHVybiBiK2F9O0tKVVIuY3J5cHRvLkVDRFNBLmNvbmNhdFNpZ1RvQVNOMVNpZz1mdW5jdGlvbihhKXtpZigoKChhLmxlbmd0aC8yKSo4KSUoMTYqOCkpIT0wKXt0aHJvdyJ1bmtub3duIEVDRFNBIGNvbmNhdGluYXRlZCByLXMgc2lnICBsZW5ndGggZXJyb3IifXZhciBjPWEuc3Vic3RyKDAsYS5sZW5ndGgvMik7dmFyIGI9YS5zdWJzdHIoYS5sZW5ndGgvMik7cmV0dXJuIEtKVVIuY3J5cHRvLkVDRFNBLmhleFJTU2lnVG9BU04xU2lnKGMsYil9O0tKVVIuY3J5cHRvLkVDRFNBLmhleFJTU2lnVG9BU04xU2lnPWZ1bmN0aW9uKGIsYSl7dmFyIGQ9bmV3IEJpZ0ludGVnZXIoYiwxNik7dmFyIGM9bmV3IEJpZ0ludGVnZXIoYSwxNik7cmV0dXJuIEtKVVIuY3J5cHRvLkVDRFNBLmJpUlNTaWdUb0FTTjFTaWcoZCxjKX07S0pVUi5jcnlwdG8uRUNEU0EuYmlSU1NpZ1RvQVNOMVNpZz1mdW5jdGlvbihlLGMpe3ZhciBiPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmV9KTt2YXIgYT1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpjfSk7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W2IsYV19KTtyZXR1cm4gZC5nZXRFbmNvZGVkSGV4KCl9OwovKiEgZWNwYXJhbS0xLjAuMC5qcyAoYykgMjAxMyBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5jcnlwdG89PSJ1bmRlZmluZWQifHwhS0pVUi5jcnlwdG8pe0tKVVIuY3J5cHRvPXt9fUtKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREI9bmV3IGZ1bmN0aW9uKCl7dmFyIGI9e307dmFyIGM9e307ZnVuY3Rpb24gYShkKXtyZXR1cm4gbmV3IEJpZ0ludGVnZXIoZCwxNil9dGhpcy5nZXRCeU5hbWU9ZnVuY3Rpb24oZSl7dmFyIGQ9ZTtpZih0eXBlb2YgY1tkXSE9InVuZGVmaW5lZCIpe2Q9Y1tlXX1pZih0eXBlb2YgYltkXSE9InVuZGVmaW5lZCIpe3JldHVybiBiW2RdfXRocm93InVucmVnaXN0ZXJlZCBFQyBjdXJ2ZSBuYW1lOiAiK2R9O3RoaXMucmVnaXN0PWZ1bmN0aW9uKEEsbCxvLGcsbSxlLGosZixrLHUsZCx4KXtiW0FdPXt9O3ZhciBzPWEobyk7dmFyIHo9YShnKTt2YXIgeT1hKG0pO3ZhciB0PWEoZSk7dmFyIHc9YShqKTt2YXIgcj1uZXcgRUNDdXJ2ZUZwKHMseix5KTt2YXIgcT1yLmRlY29kZVBvaW50SGV4KCIwNCIrZitrKTtiW0FdWyJuYW1lIl09QTtiW0FdWyJrZXlsZW4iXT1sO2JbQV1bImN1cnZlIl09cjtiW0FdWyJHIl09cTtiW0FdWyJuIl09dDtiW0FdWyJoIl09dztiW0FdWyJvaWQiXT1kO2JbQV1bImluZm8iXT14O2Zvcih2YXIgdj0wO3Y8dS5sZW5ndGg7disrKXtjW3Vbdl1dPUF9fX07S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AxMjhyMSIsMTI4LCJGRkZGRkZGREZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRiIsIkZGRkZGRkZERkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDIiwiRTg3NTc5QzExMDc5RjQzREQ4MjQ5OTNDMkNFRTVFRDMiLCJGRkZGRkZGRTAwMDAwMDAwNzVBMzBEMUI5MDM4QTExNSIsIjEiLCIxNjFGRjc1MjhCODk5QjJEMEMyODYwN0NBNTJDNUI4NiIsIkNGNUFDODM5NUJBRkVCMTNDMDJEQTI5MkRERUQ3QTgzIixbXSwiIiwic2VjcDEyOHIxIDogU0VDRyBjdXJ2ZSBvdmVyIGEgMTI4IGJpdCBwcmltZSBmaWVsZCIpO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMTYwazEiLDE2MCwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGQUM3MyIsIjAiLCI3IiwiMDEwMDAwMDAwMDAwMDAwMDAwMDAwMUI4RkExNkRGQUI5QUNBMTZCNkIzIiwiMSIsIjNCNEMzODJDRTM3QUExOTJBNDAxOUU3NjMwMzZGNEY1REQ0RDdFQkIiLCI5MzhDRjkzNTMxOEZEQ0VENkJDMjgyODY1MzE3MzNDM0YwM0M0RkVFIixbXSwiIiwic2VjcDE2MGsxIDogU0VDRyBjdXJ2ZSBvdmVyIGEgMTYwIGJpdCBwcmltZSBmaWVsZCIpO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMTYwcjEiLDE2MCwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY3RkZGRkZGRiIsIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGN0ZGRkZGRkMiLCIxQzk3QkVGQzU0QkQ3QThCNjVBQ0Y4OUY4MUQ0RDRBREM1NjVGQTQ1IiwiMDEwMDAwMDAwMDAwMDAwMDAwMDAwMUY0QzhGOTI3QUVEM0NBNzUyMjU3IiwiMSIsIjRBOTZCNTY4OEVGNTczMjg0NjY0Njk4OTY4QzM4QkI5MTNDQkZDODIiLCIyM0E2Mjg1NTMxNjg5NDdENTlEQ0M5MTIwNDIzNTEzNzdBQzVGQjMyIixbXSwiIiwic2VjcDE2MHIxIDogU0VDRyBjdXJ2ZSBvdmVyIGEgMTYwIGJpdCBwcmltZSBmaWVsZCIpO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMTkyazEiLDE5MiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZFRTM3IiwiMCIsIjMiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkUyNkYyRkMxNzBGNjk0NjZBNzRERUZEOEQiLCIxIiwiREI0RkYxMEVDMDU3RTlBRTI2QjA3RDAyODBCN0Y0MzQxREE1RDFCMUVBRTA2QzdEIiwiOUIyRjJGNkQ5QzU2MjhBNzg0NDE2M0QwMTVCRTg2MzQ0MDgyQUE4OEQ5NUUyRjlEIixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AxOTJyMSIsMTkyLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkYiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkMiLCI2NDIxMDUxOUU1OUM4MEU3MEZBN0U5QUI3MjI0MzA0OUZFQjhERUVDQzE0NkI5QjEiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY5OURFRjgzNjE0NkJDOUIxQjREMjI4MzEiLCIxIiwiMTg4REE4MEVCMDMwOTBGNjdDQkYyMEVCNDNBMTg4MDBGNEZGMEFGRDgyRkYxMDEyIiwiMDcxOTJCOTVGRkM4REE3ODYzMTAxMUVENkIyNENERDU3M0Y5NzdBMTFFNzk0ODExIixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AyMjRyMSIsMjI0LCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMSIsIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFIiwiQjQwNTBBODUwQzA0QjNBQkY1NDEzMjU2NTA0NEIwQjdEN0JGRDhCQTI3MEIzOTQzMjM1NUZGQjQiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGMTZBMkUwQjhGMDNFMTNERDI5NDU1QzVDMkEzRCIsIjEiLCJCNzBFMENCRDZCQjRCRjdGMzIxMzkwQjk0QTAzQzFEMzU2QzIxMTIyMzQzMjgwRDYxMTVDMUQyMSIsIkJEMzc2Mzg4QjVGNzIzRkI0QzIyREZFNkNENDM3NUEwNUEwNzQ3NjQ0NEQ1ODE5OTg1MDA3RTM0IixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AyNTZrMSIsMjU2LCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGQzJGIiwiMCIsIjciLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUJBQUVEQ0U2QUY0OEEwM0JCRkQyNUU4Q0QwMzY0MTQxIiwiMSIsIjc5QkU2NjdFRjlEQ0JCQUM1NUEwNjI5NUNFODcwQjA3MDI5QkZDREIyRENFMjhEOTU5RjI4MTVCMTZGODE3OTgiLCI0ODNBREE3NzI2QTNDNDY1NURBNEZCRkMwRTExMDhBOEZEMTdCNDQ4QTY4NTU0MTk5QzQ3RDA4RkZCMTBENEI4IixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AyNTZyMSIsMjU2LCJGRkZGRkZGRjAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGIiwiRkZGRkZGRkYwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQyIsIjVBQzYzNUQ4QUEzQTkzRTdCM0VCQkQ1NTc2OTg4NkJDNjUxRDA2QjBDQzUzQjBGNjNCQ0UzQzNFMjdEMjYwNEIiLCJGRkZGRkZGRjAwMDAwMDAwRkZGRkZGRkZGRkZGRkZGRkJDRTZGQUFEQTcxNzlFODRGM0I5Q0FDMkZDNjMyNTUxIiwiMSIsIjZCMTdEMUYyRTEyQzQyNDdGOEJDRTZFNTYzQTQ0MEYyNzcwMzdEODEyREVCMzNBMEY0QTEzOTQ1RDg5OEMyOTYiLCI0RkUzNDJFMkZFMUE3RjlCOEVFN0VCNEE3QzBGOUUxNjJCQ0UzMzU3NkIzMTVFQ0VDQkI2NDA2ODM3QkY1MUY1IixbIk5JU1QgUC0yNTYiLCJQLTI1NiIsInByaW1lMjU2djEiXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AzODRyMSIsMzg0LCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkYwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkYiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkYwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkMiLCJCMzMxMkZBN0UyM0VFN0U0OTg4RTA1NkJFM0Y4MkQxOTE4MUQ5QzZFRkU4MTQxMTIwMzE0MDg4RjUwMTM4NzVBQzY1NjM5OEQ4QTJFRDE5RDJBODVDOEVERDNFQzJBRUYiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDNzYzNEQ4MUY0MzcyRERGNTgxQTBEQjI0OEIwQTc3QUVDRUMxOTZBQ0NDNTI5NzMiLCIxIiwiQUE4N0NBMjJCRThCMDUzNzhFQjFDNzFFRjMyMEFENzQ2RTFEM0I2MjhCQTc5Qjk4NTlGNzQxRTA4MjU0MkEzODU1MDJGMjVEQkY1NTI5NkMzQTU0NUUzODcyNzYwQUI3IiwiMzYxN2RlNGE5NjI2MmM2ZjVkOWU5OGJmOTI5MmRjMjlmOGY0MWRiZDI4OWExNDdjZTlkYTMxMTNiNWYwYjhjMDBhNjBiMWNlMWQ3ZTgxOWQ3YTQzMWQ3YzkwZWEwZTVmIixbIk5JU1QgUC0zODQiLCJQLTM4NCJdKTtLSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdCgic2VjcDUyMXIxIiw1MjEsIjFGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGIiwiMUZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkMiLCIwNTE5NTNFQjk2MThFMUM5QTFGOTI5QTIxQTBCNjg1NDBFRUEyREE3MjVCOTlCMzE1RjNCOEI0ODk5MThFRjEwOUUxNTYxOTM5NTFFQzdFOTM3QjE2NTJDMEJEM0JCMUJGMDczNTczREY4ODNEMkMzNEYxRUY0NTFGRDQ2QjUwM0YwMCIsIjFGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkE1MTg2ODc4M0JGMkY5NjZCN0ZDQzAxNDhGNzA5QTVEMDNCQjVDOUI4ODk5QzQ3QUVCQjZGQjcxRTkxMzg2NDA5IiwiMSIsIkM2ODU4RTA2QjcwNDA0RTlDRDlFM0VDQjY2MjM5NUI0NDI5QzY0ODEzOTA1M0ZCNTIxRjgyOEFGNjA2QjREM0RCQUExNEI1RTc3RUZFNzU5MjhGRTFEQzEyN0EyRkZBOERFMzM0OEIzQzE4NTZBNDI5QkY5N0U3RTMxQzJFNUJENjYiLCIwMTE4MzkyOTZhNzg5YTNiYzAwNDVjOGE1ZmI0MmM3ZDFiZDk5OGY1NDQ0OTU3OWI0NDY4MTdhZmJkMTcyNzNlNjYyYzk3ZWU3Mjk5NWVmNDI2NDBjNTUwYjkwMTNmYWQwNzYxMzUzYzcwODZhMjcyYzI0MDg4YmU5NDc2OWZkMTY2NTAiLFsiTklTVCBQLTUyMSIsIlAtNTIxIl0pOwovKiEgZHNhLW1vZGlmaWVkLTEuMC4xLmpzIChjKSBSZWN1cml0eSBMYWJzIEdtYkgsIEtlbmppIFVydXNoaW1tYSB8IGdpdGh1Yi5jb20vb3BlbnBncGpzL29wZW5wZ3Bqcy9ibG9iL21hc3Rlci9MSUNFTlNFCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmNyeXB0bz09InVuZGVmaW5lZCJ8fCFLSlVSLmNyeXB0byl7S0pVUi5jcnlwdG89e319S0pVUi5jcnlwdG8uRFNBPWZ1bmN0aW9uKCl7dGhpcy5wPW51bGw7dGhpcy5xPW51bGw7dGhpcy5nPW51bGw7dGhpcy55PW51bGw7dGhpcy54PW51bGw7dGhpcy50eXBlPSJEU0EiO3RoaXMuc2V0UHJpdmF0ZT1mdW5jdGlvbih6LHcsdixBLHUpe3RoaXMuaXNQcml2YXRlPXRydWU7dGhpcy5wPXo7dGhpcy5xPXc7dGhpcy5nPXY7dGhpcy55PUE7dGhpcy54PXV9O3RoaXMuc2V0UHVibGljPWZ1bmN0aW9uKHcsdix1LHope3RoaXMuaXNQdWJsaWM9dHJ1ZTt0aGlzLnA9dzt0aGlzLnE9djt0aGlzLmc9dTt0aGlzLnk9ejt0aGlzLng9bnVsbH07dGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoPWZ1bmN0aW9uKHope3ZhciB2PXRoaXMucDt2YXIgdT10aGlzLnE7dmFyIEM9dGhpcy5nO3ZhciBEPXRoaXMueTt2YXIgRT10aGlzLng7dmFyIEE9ei5zdWJzdHIoMCx1LmJpdExlbmd0aCgpLzQpO3ZhciBCPW5ldyBCaWdJbnRlZ2VyKHosMTYpO3ZhciB3PW4oQmlnSW50ZWdlci5PTkUuYWRkKEJpZ0ludGVnZXIuT05FKSx1LnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKSk7dmFyIEc9KEMubW9kUG93KHcsdikpLm1vZCh1KTt2YXIgRj0ody5tb2RJbnZlcnNlKHUpLm11bHRpcGx5KEIuYWRkKEUubXVsdGlwbHkoRykpKSkubW9kKHUpO3ZhciBIPUtKVVIuYXNuMS5BU04xVXRpbC5qc29uVG9BU04xSEVYKHtzZXE6W3siaW50Ijp7YmlnaW50Okd9fSx7ImludCI6e2JpZ2ludDpGfX1dfSk7cmV0dXJuIEh9O3RoaXMudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoPWZ1bmN0aW9uKEMsQil7dmFyIHo9dGhpcy5wO3ZhciB1PXRoaXMucTt2YXIgRz10aGlzLmc7dmFyIEg9dGhpcy55O3ZhciBFPXRoaXMucGFyc2VBU04xU2lnbmF0dXJlKEIpO3ZhciBLPUVbMF07dmFyIEo9RVsxXTt2YXIgQz1DLnN1YnN0cigwLHUuYml0TGVuZ3RoKCkvNCk7dmFyIEQ9bmV3IEJpZ0ludGVnZXIoQywxNik7aWYoQmlnSW50ZWdlci5aRVJPLmNvbXBhcmVUbyhLKT4wfHxLLmNvbXBhcmVUbyh1KT4wfHxCaWdJbnRlZ2VyLlpFUk8uY29tcGFyZVRvKEopPjB8fEouY29tcGFyZVRvKHUpPjApe3Rocm93ImludmFsaWQgRFNBIHNpZ25hdHVyZSJ9dmFyIEk9Si5tb2RJbnZlcnNlKHUpO3ZhciBBPUQubXVsdGlwbHkoSSkubW9kKHUpO3ZhciB2PUsubXVsdGlwbHkoSSkubW9kKHUpO3ZhciBGPUcubW9kUG93KEEseikubXVsdGlwbHkoSC5tb2RQb3codix6KSkubW9kKHopLm1vZCh1KTtyZXR1cm4gRi5jb21wYXJlVG8oSyk9PTB9O3RoaXMucGFyc2VBU04xU2lnbmF0dXJlPWZ1bmN0aW9uKHUpe3RyeXt2YXIgeT1uZXcgQmlnSW50ZWdlcihBU04xSEVYLmdldFZieUxpc3QodSwwLFswXSwiMDIiKSwxNik7dmFyIHY9bmV3IEJpZ0ludGVnZXIoQVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMV0sIjAyIiksMTYpO3JldHVyblt5LHZdfWNhdGNoKHcpe3Rocm93Im1hbGZvcm1lZCBEU0Egc2lnbmF0dXJlIn19O2Z1bmN0aW9uIGQoRSx3LEIsdix1LEMpe3ZhciB6PUtKVVIuY3J5cHRvLlV0aWwuaGFzaFN0cmluZyh3LEUudG9Mb3dlckNhc2UoKSk7dmFyIHo9ei5zdWJzdHIoMCx1LmJpdExlbmd0aCgpLzQpO3ZhciBBPW5ldyBCaWdJbnRlZ2VyKHosMTYpO3ZhciB5PW4oQmlnSW50ZWdlci5PTkUuYWRkKEJpZ0ludGVnZXIuT05FKSx1LnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKSk7dmFyIEY9KEIubW9kUG93KHksdikpLm1vZCh1KTt2YXIgRD0oeS5tb2RJbnZlcnNlKHUpLm11bHRpcGx5KEEuYWRkKEMubXVsdGlwbHkoRikpKSkubW9kKHUpO3ZhciBHPW5ldyBBcnJheSgpO0dbMF09RjtHWzFdPUQ7cmV0dXJuIEd9ZnVuY3Rpb24gcih2KXt2YXIgdT1vcGVucGdwLmNvbmZpZy5jb25maWcucHJlZmVyX2hhc2hfYWxnb3JpdGhtO3N3aXRjaChNYXRoLnJvdW5kKHYuYml0TGVuZ3RoKCkvOCkpe2Nhc2UgMjA6aWYodSE9MiYmdT4xMSYmdSE9MTAmJnU8OCl7cmV0dXJuIDJ9cmV0dXJuIHU7Y2FzZSAyODppZih1PjExJiZ1PDgpe3JldHVybiAxMX1yZXR1cm4gdTtjYXNlIDMyOmlmKHU+MTAmJnU8OCl7cmV0dXJuIDh9cmV0dXJuIHU7ZGVmYXVsdDp1dGlsLnByaW50X2RlYnVnKCJEU0Egc2VsZWN0IGhhc2ggYWxnb3JpdGhtOiByZXR1cm5pbmcgbnVsbCBmb3IgYW4gdW5rbm93biBsZW5ndGggb2YgcSIpO3JldHVybiBudWxsfX10aGlzLnNlbGVjdF9oYXNoX2FsZ29yaXRobT1yO2Z1bmN0aW9uIG0oSSxLLEosQix6LHUsRixHKXt2YXIgQz1LSlVSLmNyeXB0by5VdGlsLmhhc2hTdHJpbmcoQixJLnRvTG93ZXJDYXNlKCkpO3ZhciBDPUMuc3Vic3RyKDAsdS5iaXRMZW5ndGgoKS80KTt2YXIgRD1uZXcgQmlnSW50ZWdlcihDLDE2KTtpZihCaWdJbnRlZ2VyLlpFUk8uY29tcGFyZVRvKEspPjB8fEsuY29tcGFyZVRvKHUpPjB8fEJpZ0ludGVnZXIuWkVSTy5jb21wYXJlVG8oSik+MHx8Si5jb21wYXJlVG8odSk+MCl7dXRpbC5wcmludF9lcnJvcigiaW52YWxpZCBEU0EgU2lnbmF0dXJlIik7cmV0dXJuIG51bGx9dmFyIEg9Si5tb2RJbnZlcnNlKHUpO3ZhciBBPUQubXVsdGlwbHkoSCkubW9kKHUpO3ZhciB2PUsubXVsdGlwbHkoSCkubW9kKHUpO3ZhciBFPUYubW9kUG93KEEseikubXVsdGlwbHkoRy5tb2RQb3codix6KSkubW9kKHopLm1vZCh1KTtyZXR1cm4gRS5jb21wYXJlVG8oSyk9PTB9ZnVuY3Rpb24gYSh6KXt2YXIgQT1uZXcgQmlnSW50ZWdlcih6LHByaW1lQ2VudGVyaWUpO3ZhciB5PWoocSw1MTIpO3ZhciB1PXQocCxxLHopO3ZhciB2O2Rve3Y9bmV3IEJpZ0ludGVnZXIocS5iaXRDb3VudCgpLHJhbmQpfXdoaWxlKHguY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTykhPTEmJnguY29tcGFyZVRvKHEpIT0tMSk7dmFyIHc9Zy5tb2RQb3coeCxwKTtyZXR1cm57eDp2LHE6QSxwOnksZzp1LHk6d319ZnVuY3Rpb24gaih5LHosdyl7aWYoeiU2NCE9MCl7cmV0dXJuIGZhbHNlfXZhciB1O3ZhciB2O2Rve3U9dyhiaXRjb3VudCx0cnVlKTt2PXUuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpO3U9dS5zdWJ0cmFjdCh2LnJlbWFpbmRlcih5KSl9d2hpbGUoIXUuaXNQcm9iYWJsZVByaW1lKHByaW1lQ2VudGVyaWUpfHx1LmJpdExlbmd0aCgpIT1sKTtyZXR1cm4gdX1mdW5jdGlvbiB0KEIseixBLHcpe3ZhciB1PUIuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpO3ZhciB5PXUuZGl2aWRlKHopO3ZhciB2O2Rve3Y9dyhBKX13aGlsZSh2LmNvbXBhcmVUbyh1KSE9LTEmJnYuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKSE9MSk7cmV0dXJuIHYubW9kUG93KHksQil9ZnVuY3Rpb24gbyh3LHksdSl7dmFyIHY7ZG97dj11KHksZmFsc2UpfXdoaWxlKHYuY29tcGFyZVRvKHcpIT0tMSYmdi5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKSE9MSk7cmV0dXJuIHZ9ZnVuY3Rpb24gaSh2LHcpe2s9byh2KTt2YXIgdT1nLm1vZFBvdyhrLHcpLm1vZCh2KTtyZXR1cm4gdX1mdW5jdGlvbiBoKEIsdyx5LHYseix1KXt2YXIgQT1CKHYpO3M9KHcubW9kSW52ZXJzZSh6KS5tdWx0aXBseShBLmFkZCh1Lm11bHRpcGx5KHkpKSkpLm1vZCh6KTtyZXR1cm4gc310aGlzLnNpZ249ZDt0aGlzLnZlcmlmeT1tO2Z1bmN0aW9uIG4odyx1KXtpZih1LmNvbXBhcmVUbyh3KTw9MCl7cmV0dXJufXZhciB2PXUuc3VidHJhY3Qodyk7dmFyIHk9ZSh2LmJpdExlbmd0aCgpKTt3aGlsZSh5PnYpe3k9ZSh2LmJpdExlbmd0aCgpKX1yZXR1cm4gdy5hZGQoeSl9ZnVuY3Rpb24gZSh3KXtpZih3PDApe3JldHVybiBudWxsfXZhciB1PU1hdGguZmxvb3IoKHcrNykvOCk7dmFyIHY9Yyh1KTtpZih3JTg+MCl7dj1TdHJpbmcuZnJvbUNoYXJDb2RlKChNYXRoLnBvdygyLHclOCktMSkmdi5jaGFyQ29kZUF0KDApKSt2LnN1YnN0cmluZygxKX1yZXR1cm4gbmV3IEJpZ0ludGVnZXIoZih2KSwxNil9ZnVuY3Rpb24gYyh3KXt2YXIgdT0iIjtmb3IodmFyIHY9MDt2PHc7disrKXt1Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKGIoKSl9cmV0dXJuIHV9ZnVuY3Rpb24gYigpe3ZhciB1PW5ldyBVaW50MzJBcnJheSgxKTt3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyh1KTtyZXR1cm4gdVswXSYyNTV9ZnVuY3Rpb24gZih5KXtpZih5PT1udWxsKXtyZXR1cm4iIn12YXIgdj1bXTt2YXIgdz15Lmxlbmd0aDt2YXIgej0wO3ZhciB1O3doaWxlKHo8dyl7dT15W3orK10uY2hhckNvZGVBdCgpLnRvU3RyaW5nKDE2KTt3aGlsZSh1Lmxlbmd0aDwyKXt1PSIwIit1fXYucHVzaCgiIit1KX1yZXR1cm4gdi5qb2luKCIiKX10aGlzLmdldFJhbmRvbUJpZ0ludGVnZXJJblJhbmdlPW47dGhpcy5nZXRSYW5kb21CaWdJbnRlZ2VyPWU7dGhpcy5nZXRSYW5kb21CeXRlcz1jfTsKLyohIHBrY3M1cGtleS0xLjAuNi5qcyAoYykgMjAxMy0yMDE0IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwp2YXIgUEtDUzVQS0VZPWZ1bmN0aW9uKCl7dmFyIGM9ZnVuY3Rpb24obixwLG8pe3JldHVybiBpKENyeXB0b0pTLkFFUyxuLHAsbyl9O3ZhciBkPWZ1bmN0aW9uKG4scCxvKXtyZXR1cm4gaShDcnlwdG9KUy5UcmlwbGVERVMsbixwLG8pfTt2YXIgaT1mdW5jdGlvbihxLHYscyxvKXt2YXIgcD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHYpO3ZhciB1PUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uocyk7dmFyIG49Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShvKTt2YXIgcj17fTtyLmtleT11O3IuaXY9bjtyLmNpcGhlcnRleHQ9cDt2YXIgdD1xLmRlY3J5cHQocix1LHtpdjpufSk7cmV0dXJuIENyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KHQpfTt2YXIgaj1mdW5jdGlvbihuLHAsbyl7cmV0dXJuIGUoQ3J5cHRvSlMuQUVTLG4scCxvKX07dmFyIG09ZnVuY3Rpb24obixwLG8pe3JldHVybiBlKENyeXB0b0pTLlRyaXBsZURFUyxuLHAsbyl9O3ZhciBlPWZ1bmN0aW9uKHMseCx2LHApe3ZhciByPUNyeXB0b0pTLmVuYy5IZXgucGFyc2UoeCk7dmFyIHc9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh2KTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHApO3ZhciBuPXt9O3ZhciB1PXMuZW5jcnlwdChyLHcse2l2Om99KTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHUudG9TdHJpbmcoKSk7dmFyIHQ9Q3J5cHRvSlMuZW5jLkJhc2U2NC5zdHJpbmdpZnkocSk7cmV0dXJuIHR9O3ZhciBnPXsiQUVTLTI1Ni1DQkMiOntwcm9jOmMsZXByb2M6aixrZXlsZW46MzIsaXZsZW46MTZ9LCJBRVMtMTkyLUNCQyI6e3Byb2M6YyxlcHJvYzpqLGtleWxlbjoyNCxpdmxlbjoxNn0sIkFFUy0xMjgtQ0JDIjp7cHJvYzpjLGVwcm9jOmosa2V5bGVuOjE2LGl2bGVuOjE2fSwiREVTLUVERTMtQ0JDIjp7cHJvYzpkLGVwcm9jOm0sa2V5bGVuOjI0LGl2bGVuOjh9fTt2YXIgYj1mdW5jdGlvbihuKXtyZXR1cm4gZ1tuXVsicHJvYyJdfTt2YXIgaz1mdW5jdGlvbihuKXt2YXIgcD1DcnlwdG9KUy5saWIuV29yZEFycmF5LnJhbmRvbShuKTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShwKTtyZXR1cm4gb307dmFyIGw9ZnVuY3Rpb24ocSl7dmFyIHI9e307aWYocS5tYXRjaChuZXcgUmVnRXhwKCJERUstSW5mbzogKFteLF0rKSwoWzAtOUEtRmEtZl0rKSIsIm0iKSkpe3IuY2lwaGVyPVJlZ0V4cC4kMTtyLml2c2FsdD1SZWdFeHAuJDJ9aWYocS5tYXRjaChuZXcgUmVnRXhwKCItLS0tLUJFR0lOIChbQS1aXSspIFBSSVZBVEUgS0VZLS0tLS0iKSkpe3IudHlwZT1SZWdFeHAuJDF9dmFyIHA9LTE7dmFyIHQ9MDtpZihxLmluZGV4T2YoIlxyXG5cclxuIikhPS0xKXtwPXEuaW5kZXhPZigiXHJcblxyXG4iKTt0PTJ9aWYocS5pbmRleE9mKCJcblxuIikhPS0xKXtwPXEuaW5kZXhPZigiXG5cbiIpO3Q9MX12YXIgbz1xLmluZGV4T2YoIi0tLS0tRU5EIik7aWYocCE9LTEmJm8hPS0xKXt2YXIgbj1xLnN1YnN0cmluZyhwK3QqMixvLXQpO249bi5yZXBsYWNlKC9ccysvZywiIik7ci5kYXRhPW59cmV0dXJuIHJ9O3ZhciBoPWZ1bmN0aW9uKG8sdyxuKXt2YXIgdD1uLnN1YnN0cmluZygwLDE2KTt2YXIgcj1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHQpO3ZhciBwPUNyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKHcpO3ZhciBzPWdbb11bImtleWxlbiJdK2dbb11bIml2bGVuIl07dmFyIHY9IiI7dmFyIHU9bnVsbDtmb3IoOzspe3ZhciBxPUNyeXB0b0pTLmFsZ28uTUQ1LmNyZWF0ZSgpO2lmKHUhPW51bGwpe3EudXBkYXRlKHUpfXEudXBkYXRlKHApO3EudXBkYXRlKHIpO3U9cS5maW5hbGl6ZSgpO3Y9ditDcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeSh1KTtpZih2Lmxlbmd0aD49cyoyKXticmVha319dmFyIHg9e307eC5rZXloZXg9di5zdWJzdHIoMCxnW29dWyJrZXlsZW4iXSoyKTt4Lml2aGV4PXYuc3Vic3RyKGdbb11bImtleWxlbiJdKjIsZ1tvXVsiaXZsZW4iXSoyKTtyZXR1cm4geH07dmFyIGE9ZnVuY3Rpb24obix0LHAsdSl7dmFyIHE9Q3J5cHRvSlMuZW5jLkJhc2U2NC5wYXJzZShuKTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShxKTt2YXIgcz1nW3RdWyJwcm9jIl07dmFyIHI9cyhvLHAsdSk7cmV0dXJuIHJ9O3ZhciBmPWZ1bmN0aW9uKG4scSxvLHMpe3ZhciBwPWdbcV1bImVwcm9jIl07dmFyIHI9cChuLG8scyk7cmV0dXJuIHJ9O3JldHVybnt2ZXJzaW9uOiIxLjAuNSIsZ2V0SGV4RnJvbVBFTTpmdW5jdGlvbihvLHIpe3ZhciBwPW87aWYocC5pbmRleE9mKCJCRUdJTiAiK3IpPT0tMSl7dGhyb3ciY2FuJ3QgZmluZCBQRU0gaGVhZGVyOiAiK3J9cD1wLnJlcGxhY2UoIi0tLS0tQkVHSU4gIityKyItLS0tLSIsIiIpO3A9cC5yZXBsYWNlKCItLS0tLUVORCAiK3IrIi0tLS0tIiwiIik7dmFyIHE9cC5yZXBsYWNlKC9ccysvZywiIik7dmFyIG49YjY0dG9oZXgocSk7cmV0dXJuIG59LGdldERlY3J5cHRlZEtleUhleEJ5S2V5SVY6ZnVuY3Rpb24obyxyLHEscCl7dmFyIG49YihyKTtyZXR1cm4gbihvLHEscCl9LHBhcnNlUEtDUzVQRU06ZnVuY3Rpb24obil7cmV0dXJuIGwobil9LGdldEtleUFuZFVudXNlZEl2QnlQYXNzY29kZUFuZEl2c2FsdDpmdW5jdGlvbihvLG4scCl7cmV0dXJuIGgobyxuLHApfSxkZWNyeXB0S2V5QjY0OmZ1bmN0aW9uKG4scCxvLHEpe3JldHVybiBhKG4scCxvLHEpfSxnZXREZWNyeXB0ZWRLZXlIZXg6ZnVuY3Rpb24odyx2KXt2YXIgbz1sKHcpO3ZhciByPW8udHlwZTt2YXIgcD1vLmNpcGhlcjt2YXIgbj1vLml2c2FsdDt2YXIgcT1vLmRhdGE7dmFyIHU9aChwLHYsbik7dmFyIHQ9dS5rZXloZXg7dmFyIHM9YShxLHAsdCxuKTtyZXR1cm4gc30sZ2V0UlNBS2V5RnJvbUVuY3J5cHRlZFBLQ1M1UEVNOmZ1bmN0aW9uKHAsbyl7dmFyIHE9dGhpcy5nZXREZWNyeXB0ZWRLZXlIZXgocCxvKTt2YXIgbj1uZXcgUlNBS2V5KCk7bi5yZWFkUHJpdmF0ZUtleUZyb21BU04xSGV4U3RyaW5nKHEpO3JldHVybiBufSxnZXRFcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4OmZ1bmN0aW9uKHEseCxyLHApe3ZhciBuPSIiO2lmKHR5cGVvZiByPT0idW5kZWZpbmVkInx8cj09bnVsbCl7cj0iQUVTLTI1Ni1DQkMifWlmKHR5cGVvZiBnW3JdPT0idW5kZWZpbmVkIil7dGhyb3ciUEtDUzVQS0VZIHVuc3VwcG9ydGVkIGFsZ29yaXRobTogIityfWlmKHR5cGVvZiBwPT0idW5kZWZpbmVkInx8cD09bnVsbCl7dmFyIHQ9Z1tyXVsiaXZsZW4iXTt2YXIgcz1rKHQpO3A9cy50b1VwcGVyQ2FzZSgpfXZhciB3PWgocix4LHApO3ZhciB2PXcua2V5aGV4O3ZhciB1PWYocSxyLHYscCk7dmFyIG89dS5yZXBsYWNlKC8oLns2NH0pL2csIiQxXHJcbiIpO3ZhciBuPSItLS0tLUJFR0lOIFJTQSBQUklWQVRFIEtFWS0tLS0tXHJcbiI7bis9IlByb2MtVHlwZTogNCxFTkNSWVBURURcclxuIjtuKz0iREVLLUluZm86ICIrcisiLCIrcCsiXHJcbiI7bis9IlxyXG4iO24rPW87bis9IlxyXG4tLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLVxyXG4iO3JldHVybiBufSxnZXRFcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5OmZ1bmN0aW9uKEMsRCxvLHMpe3ZhciBBPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6MH0pO3ZhciB2PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkMubn0pO3ZhciB6PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6Qy5lfSk7dmFyIEI9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5kfSk7dmFyIHQ9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5wfSk7dmFyIHI9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5xfSk7dmFyIHk9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5kbXAxfSk7dmFyIHU9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5kbXExfSk7dmFyIHg9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5jb2VmZn0pO3ZhciBFPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OltBLHYseixCLHQscix5LHUseF19KTt2YXIgdz1FLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5nZXRFcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KHcsRCxvLHMpfSxuZXdFbmNyeXB0ZWRQS0NTNVBFTTpmdW5jdGlvbihuLG8scixzKXtpZih0eXBlb2Ygbz09InVuZGVmaW5lZCJ8fG89PW51bGwpe289MTAyNH1pZih0eXBlb2Ygcj09InVuZGVmaW5lZCJ8fHI9PW51bGwpe3I9IjEwMDAxIn12YXIgcD1uZXcgUlNBS2V5KCk7cC5nZW5lcmF0ZShvLHIpO3ZhciBxPW51bGw7aWYodHlwZW9mIHM9PSJ1bmRlZmluZWQifHxzPT1udWxsKXtxPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHBrZXksbil9ZWxzZXtxPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHBrZXksbixzKX1yZXR1cm4gcX0sZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhQRU06ZnVuY3Rpb24ocCl7aWYocC5tYXRjaCgvRU5DUllQVEVELykpe3Rocm93InBlbSBzaGFsbCBiZSBub3QgRU5DUllQVEVEIn12YXIgbz10aGlzLmdldEhleEZyb21QRU0ocCwiUFJJVkFURSBLRVkiKTt2YXIgbj10aGlzLmdldFJTQUtleUZyb21QbGFpblBLQ1M4SGV4KG8pO3JldHVybiBufSxnZXRSU0FLZXlGcm9tUGxhaW5QS0NTOEhleDpmdW5jdGlvbihxKXt2YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihxLDApO2lmKHAubGVuZ3RoIT0zKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDMgZWxlbWVudHM6ICIrcC5sZW5ndGh9dmFyIG89QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihxLHBbMV0pO2lmKG8hPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZGVudGlmaWVyIGlzIG5vdCByc2FFbmM6ICIrb312YXIgbz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKHEscFsxXSk7dmFyIHI9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihxLHBbMl0pO3ZhciBzPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHIsMCk7dmFyIG49bmV3IFJTQUtleSgpO24ucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhzKTtyZXR1cm4gbn0scGFyc2VIZXhPZkVuY3J5cHRlZFBLQ1M4OmZ1bmN0aW9uKHUpe3ZhciBxPXt9O3ZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHUsMCk7aWYocC5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDApLml0ZW1zICE9IDI6ICIrcC5sZW5ndGh9cS5jaXBoZXJ0ZXh0PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHUscFsxXSk7dmFyIHc9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSxwWzBdKTtpZih3Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wKS5pdGVtcyAhPSAyOiAiK3cubGVuZ3RofWlmKEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHUsd1swXSkhPSIyYTg2NDg4NmY3MGQwMTA1MGQiKXt0aHJvdyJ0aGlzIG9ubHkgc3VwcG9ydHMgcGtjczVQQkVTMiJ9dmFyIG49QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSx3WzFdKTtpZih3Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEpLml0ZW1zICE9IDI6ICIrbi5sZW5ndGh9dmFyIG89QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSxuWzFdKTtpZihvLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEuMSkuaXRlbXMgIT0gMjogIitvLmxlbmd0aH1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaih1LG9bMF0pIT0iMmE4NjQ4ODZmNzBkMDMwNyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBUcmlwbGVERVMifXEuZW5jcnlwdGlvblNjaGVtZUFsZz0iVHJpcGxlREVTIjtxLmVuY3J5cHRpb25TY2hlbWVJVj1BU04xSEVYLmdldEhleE9mVl9BdE9iaih1LG9bMV0pO3ZhciByPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHUsblswXSk7aWYoci5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjApLml0ZW1zICE9IDI6ICIrci5sZW5ndGh9aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodSxyWzBdKSE9IjJhODY0ODg2ZjcwZDAxMDUwYyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBwa2NzNVBCS0RGMiJ9dmFyIHY9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSxyWzFdKTtpZih2Lmxlbmd0aDwyKXt0aHJvdyJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMS4wLjEpLml0ZW1zIDwgMjogIit2Lmxlbmd0aH1xLnBia2RmMlNhbHQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodSx2WzBdKTt2YXIgcz1BU04xSEVYLmdldEhleE9mVl9BdE9iaih1LHZbMV0pO3RyeXtxLnBia2RmMkl0ZXI9cGFyc2VJbnQocywxNil9Y2F0Y2godCl7dGhyb3cibWFsZm9ybWVkIGZvcm1hdCBwYmtkZjJJdGVyOiAiK3N9cmV0dXJuIHF9LGdldFBCS0RGMktleUhleEZyb21QYXJhbTpmdW5jdGlvbihzLG4pe3ZhciByPUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uocy5wYmtkZjJTYWx0KTt2YXIgbz1zLnBia2RmMkl0ZXI7dmFyIHE9Q3J5cHRvSlMuUEJLREYyKG4scix7a2V5U2l6ZToxOTIvMzIsaXRlcmF0aW9uczpvfSk7dmFyIHA9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocSk7cmV0dXJuIHB9LGdldFBsYWluUEtDUzhIZXhGcm9tRW5jcnlwdGVkUEtDUzhQRU06ZnVuY3Rpb24odix3KXt2YXIgcD10aGlzLmdldEhleEZyb21QRU0odiwiRU5DUllQVEVEIFBSSVZBVEUgS0VZIik7dmFyIG49dGhpcy5wYXJzZUhleE9mRW5jcnlwdGVkUEtDUzgocCk7dmFyIHM9UEtDUzVQS0VZLmdldFBCS0RGMktleUhleEZyb21QYXJhbShuLHcpO3ZhciB0PXt9O3QuY2lwaGVydGV4dD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKG4uY2lwaGVydGV4dCk7dmFyIHI9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShzKTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKG4uZW5jcnlwdGlvblNjaGVtZUlWKTt2YXIgdT1DcnlwdG9KUy5UcmlwbGVERVMuZGVjcnlwdCh0LHIse2l2OnF9KTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeSh1KTtyZXR1cm4gb30sZ2V0UlNBS2V5RnJvbUVuY3J5cHRlZFBLQ1M4UEVNOmZ1bmN0aW9uKHEscCl7dmFyIG89dGhpcy5nZXRQbGFpblBLQ1M4SGV4RnJvbUVuY3J5cHRlZFBLQ1M4UEVNKHEscCk7dmFyIG49dGhpcy5nZXRSU0FLZXlGcm9tUGxhaW5QS0NTOEhleChvKTtyZXR1cm4gbn0sZ2V0S2V5RnJvbUVuY3J5cHRlZFBLQ1M4UEVNOmZ1bmN0aW9uKHEsbyl7dmFyIG49dGhpcy5nZXRQbGFpblBLQ1M4SGV4RnJvbUVuY3J5cHRlZFBLQ1M4UEVNKHEsbyk7dmFyIHA9dGhpcy5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXgobik7cmV0dXJuIHB9LHBhcnNlUGxhaW5Qcml2YXRlUEtDUzhIZXg6ZnVuY3Rpb24ocSl7dmFyIG89e307by5hbGdwYXJhbT1udWxsO2lmKHEuc3Vic3RyKDAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBwbGFpbiBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwMSkifXZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEsMCk7aWYocC5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBwbGFpbiBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwMikifWlmKHEuc3Vic3RyKHBbMV0sMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwMykifXZhciBuPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEscFsxXSk7aWYobi5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwNCkifWlmKHEuc3Vic3RyKG5bMF0sMikhPSIwNiIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwNSkifW8uYWxnb2lkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEsblswXSk7aWYocS5zdWJzdHIoblsxXSwyKT09IjA2Iil7by5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLG5bMV0pfWlmKHEuc3Vic3RyKHBbMl0sMikhPSIwNCIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwNikifW8ua2V5aWR4PUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmoocSxwWzJdKTtyZXR1cm4gb30sZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4UEVNOmZ1bmN0aW9uKG8pe3ZhciBuPXRoaXMuZ2V0SGV4RnJvbVBFTShvLCJQUklWQVRFIEtFWSIpO3ZhciBwPXRoaXMuZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4KG4pO3JldHVybiBwfSxnZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXg6ZnVuY3Rpb24obil7dmFyIHA9dGhpcy5wYXJzZVBsYWluUHJpdmF0ZVBLQ1M4SGV4KG4pO2lmKHAuYWxnb2lkPT0iMmE4NjQ4ODZmNzBkMDEwMTAxIil7dGhpcy5wYXJzZVByaXZhdGVSYXdSU0FLZXlIZXhBdE9iaihuLHApO3ZhciBvPXAua2V5O3ZhciBxPW5ldyBSU0FLZXkoKTtxLnNldFByaXZhdGVFeChvLm4sby5lLG8uZCxvLnAsby5xLG8uZHAsby5kcSxvLmNvKTtyZXR1cm4gcX1lbHNle2lmKHAuYWxnb2lkPT0iMmE4NjQ4Y2UzZDAyMDEiKXt0aGlzLnBhcnNlUHJpdmF0ZVJhd0VDS2V5SGV4QXRPYmoobixwKTtpZihLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWVbcC5hbGdwYXJhbV09PT11bmRlZmluZWQpe3Rocm93IktKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZSB1bmRlZmluZWQ6ICIrcC5hbGdwYXJhbX12YXIgcj1LSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWVbcC5hbGdwYXJhbV07dmFyIHE9bmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtjdXJ2ZTpyLHBydjpwLmtleX0pO3JldHVybiBxfWVsc2V7dGhyb3cidW5zdXBwb3J0ZWQgcHJpdmF0ZSBrZXkgYWxnb3JpdGhtIn19fSxnZXRSU0FLZXlGcm9tUHVibGljUEtDUzhQRU06ZnVuY3Rpb24obyl7dmFyIHA9dGhpcy5nZXRIZXhGcm9tUEVNKG8sIlBVQkxJQyBLRVkiKTt2YXIgbj10aGlzLmdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleChwKTtyZXR1cm4gbn0sZ2V0S2V5RnJvbVB1YmxpY1BLQ1M4UEVNOmZ1bmN0aW9uKG8pe3ZhciBwPXRoaXMuZ2V0SGV4RnJvbVBFTShvLCJQVUJMSUMgS0VZIik7dmFyIG49dGhpcy5nZXRLZXlGcm9tUHVibGljUEtDUzhIZXgocCk7cmV0dXJuIG59LGdldEtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbihvKXt2YXIgbj10aGlzLnBhcnNlUHVibGljUEtDUzhIZXgobyk7aWYobi5hbGdvaWQ9PSIyYTg2NDg4NmY3MGQwMTAxMDEiKXt2YXIgcj10aGlzLnBhcnNlUHVibGljUmF3UlNBS2V5SGV4KG4ua2V5KTt2YXIgcD1uZXcgUlNBS2V5KCk7cC5zZXRQdWJsaWMoci5uLHIuZSk7cmV0dXJuIHB9ZWxzZXtpZihuLmFsZ29pZD09IjJhODY0OGNlM2QwMjAxIil7aWYoS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW24uYWxncGFyYW1dPT09dW5kZWZpbmVkKXt0aHJvdyJLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWUgdW5kZWZpbmVkOiAiK24uYWxncGFyYW19dmFyIHE9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW24uYWxncGFyYW1dO3ZhciBwPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6cSxwdWI6bi5rZXl9KTtyZXR1cm4gcH1lbHNle3Rocm93InVuc3VwcG9ydGVkIHB1YmxpYyBrZXkgYWxnb3JpdGhtIn19fSxwYXJzZVB1YmxpY1Jhd1JTQUtleUhleDpmdW5jdGlvbihwKXt2YXIgbj17fTtpZihwLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwMSkifXZhciBvPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHAsMCk7aWYoby5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDAyKSJ9aWYocC5zdWJzdHIob1swXSwyKSE9IjAyIil7dGhyb3cibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDMpIn1uLm49QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocCxvWzBdKTtpZihwLnN1YnN0cihvWzFdLDIpIT0iMDIiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwNCkifW4uZT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihwLG9bMV0pO3JldHVybiBufSxwYXJzZVByaXZhdGVSYXdSU0FLZXlIZXhBdE9iajpmdW5jdGlvbihvLHEpe3ZhciBwPXEua2V5aWR4O2lmKG8uc3Vic3RyKHAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBSU0EgcHJpdmF0ZSBrZXkoY29kZTowMDEpIn12YXIgbj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihvLHApO2lmKG4ubGVuZ3RoIT05KXt0aHJvdyJtYWxmb3JtZWQgUlNBIHByaXZhdGUga2V5KGNvZGU6MDAyKSJ9cS5rZXk9e307cS5rZXkubj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bMV0pO3Eua2V5LmU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzJdKTtxLmtleS5kPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sblszXSk7cS5rZXkucD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bNF0pO3Eua2V5LnE9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzVdKTtxLmtleS5kcD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bNl0pO3Eua2V5LmRxPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sbls3XSk7cS5rZXkuY289QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzhdKX0scGFyc2VQcml2YXRlUmF3RUNLZXlIZXhBdE9iajpmdW5jdGlvbihvLHEpe3ZhciBwPXEua2V5aWR4O2lmKG8uc3Vic3RyKHAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBFQ0MgcHJpdmF0ZSBrZXkoY29kZTowMDEpIn12YXIgbj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihvLHApO2lmKG4ubGVuZ3RoIT0zKXt0aHJvdyJtYWxmb3JtZWQgRUNDIHByaXZhdGUga2V5KGNvZGU6MDAyKSJ9aWYoby5zdWJzdHIoblsxXSwyKSE9IjA0Iil7dGhyb3cibWFsZm9ybWVkIEVDQyBwcml2YXRlIGtleShjb2RlOjAwMykifXEua2V5PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sblsxXSl9LHBhcnNlUHVibGljUEtDUzhIZXg6ZnVuY3Rpb24ocSl7dmFyIG89e307by5hbGdwYXJhbT1udWxsO3ZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEsMCk7aWYocC5sZW5ndGghPTIpe3Rocm93Im91dGVyIERFUlNlcXVlbmNlIHNoYWxsIGhhdmUgMiBlbGVtZW50czogIitwLmxlbmd0aH12YXIgcj1wWzBdO2lmKHEuc3Vic3RyKHIsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAxKSJ9dmFyIG49QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoocSxyKTtpZihuLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDIpIn1pZihxLnN1YnN0cihuWzBdLDIpIT0iMDYiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwMykifW8uYWxnb2lkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEsblswXSk7aWYocS5zdWJzdHIoblsxXSwyKT09IjA2Iil7by5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLG5bMV0pfWlmKHEuc3Vic3RyKHBbMV0sMikhPSIwMyIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDA0KSJ9by5rZXk9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzFdKS5zdWJzdHIoMik7cmV0dXJuIG99LGdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbihyKXt2YXIgcT1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihyLDApO2lmKHEubGVuZ3RoIT0yKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrcS5sZW5ndGh9dmFyIHA9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihyLHFbMF0pO2lmKHAhPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZCBpcyBub3QgcnNhRW5jcnlwdGlvbiJ9aWYoci5zdWJzdHIocVsxXSwyKSE9IjAzIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgQklUU1RSSU5HIGVuY2Fwc2xhdGVkLiJ9dmFyIHQ9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihyLHFbMV0pKzI7aWYoci5zdWJzdHIodCwyKSE9IjMwIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgU0VRVUVOQ0UuIn12YXIgbj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihyLHQpO2lmKG4ubGVuZ3RoIT0yKXt0aHJvdyJpbm5lciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrbi5sZW5ndGh9aWYoci5zdWJzdHIoblswXSwyKSE9IjAyIil7dGhyb3ciTiBpcyBub3QgQVNOLjEgSU5URUdFUiJ9aWYoci5zdWJzdHIoblsxXSwyKSE9IjAyIil7dGhyb3ciRSBpcyBub3QgQVNOLjEgSU5URUdFUiJ9dmFyIHU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocixuWzBdKTt2YXIgcz1BU04xSEVYLmdldEhleE9mVl9BdE9iaihyLG5bMV0pO3ZhciBvPW5ldyBSU0FLZXkoKTtvLnNldFB1YmxpYyh1LHMpO3JldHVybiBvfSx9fSgpOwovKiEga2V5dXRpbC0xLjAuMTIuanMgKGMpIDIwMTMtMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KdmFyIEtFWVVUSUw9ZnVuY3Rpb24oKXt2YXIgZD1mdW5jdGlvbihwLHIscSl7cmV0dXJuIGsoQ3J5cHRvSlMuQUVTLHAscixxKX07dmFyIGU9ZnVuY3Rpb24ocCxyLHEpe3JldHVybiBrKENyeXB0b0pTLlRyaXBsZURFUyxwLHIscSl9O3ZhciBhPWZ1bmN0aW9uKHAscixxKXtyZXR1cm4gayhDcnlwdG9KUy5ERVMscCxyLHEpfTt2YXIgaz1mdW5jdGlvbihzLHgsdSxxKXt2YXIgcj1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHgpO3ZhciB3PUNyeXB0b0pTLmVuYy5IZXgucGFyc2UodSk7dmFyIHA9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShxKTt2YXIgdD17fTt0LmtleT13O3QuaXY9cDt0LmNpcGhlcnRleHQ9cjt2YXIgdj1zLmRlY3J5cHQodCx3LHtpdjpwfSk7cmV0dXJuIENyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KHYpfTt2YXIgbD1mdW5jdGlvbihwLHIscSl7cmV0dXJuIGcoQ3J5cHRvSlMuQUVTLHAscixxKX07dmFyIG89ZnVuY3Rpb24ocCxyLHEpe3JldHVybiBnKENyeXB0b0pTLlRyaXBsZURFUyxwLHIscSl9O3ZhciBmPWZ1bmN0aW9uKHAscixxKXtyZXR1cm4gZyhDcnlwdG9KUy5ERVMscCxyLHEpfTt2YXIgZz1mdW5jdGlvbih0LHksdixxKXt2YXIgcz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHkpO3ZhciB4PUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uodik7dmFyIHA9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShxKTt2YXIgdz10LmVuY3J5cHQocyx4LHtpdjpwfSk7dmFyIHI9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh3LnRvU3RyaW5nKCkpO3ZhciB1PUNyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KHIpO3JldHVybiB1fTt2YXIgaT17IkFFUy0yNTYtQ0JDIjp7cHJvYzpkLGVwcm9jOmwsa2V5bGVuOjMyLGl2bGVuOjE2fSwiQUVTLTE5Mi1DQkMiOntwcm9jOmQsZXByb2M6bCxrZXlsZW46MjQsaXZsZW46MTZ9LCJBRVMtMTI4LUNCQyI6e3Byb2M6ZCxlcHJvYzpsLGtleWxlbjoxNixpdmxlbjoxNn0sIkRFUy1FREUzLUNCQyI6e3Byb2M6ZSxlcHJvYzpvLGtleWxlbjoyNCxpdmxlbjo4fSwiREVTLUNCQyI6e3Byb2M6YSxlcHJvYzpmLGtleWxlbjo4LGl2bGVuOjh9fTt2YXIgYz1mdW5jdGlvbihwKXtyZXR1cm4gaVtwXVsicHJvYyJdfTt2YXIgbT1mdW5jdGlvbihwKXt2YXIgcj1DcnlwdG9KUy5saWIuV29yZEFycmF5LnJhbmRvbShwKTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShyKTtyZXR1cm4gcX07dmFyIG49ZnVuY3Rpb24odCl7dmFyIHU9e307aWYodC5tYXRjaChuZXcgUmVnRXhwKCJERUstSW5mbzogKFteLF0rKSwoWzAtOUEtRmEtZl0rKSIsIm0iKSkpe3UuY2lwaGVyPVJlZ0V4cC4kMTt1Lml2c2FsdD1SZWdFeHAuJDJ9aWYodC5tYXRjaChuZXcgUmVnRXhwKCItLS0tLUJFR0lOIChbQS1aXSspIFBSSVZBVEUgS0VZLS0tLS0iKSkpe3UudHlwZT1SZWdFeHAuJDF9dmFyIHI9LTE7dmFyIHY9MDtpZih0LmluZGV4T2YoIlxyXG5cclxuIikhPS0xKXtyPXQuaW5kZXhPZigiXHJcblxyXG4iKTt2PTJ9aWYodC5pbmRleE9mKCJcblxuIikhPS0xKXtyPXQuaW5kZXhPZigiXG5cbiIpO3Y9MX12YXIgcT10LmluZGV4T2YoIi0tLS0tRU5EIik7aWYociE9LTEmJnEhPS0xKXt2YXIgcD10LnN1YnN0cmluZyhyK3YqMixxLXYpO3A9cC5yZXBsYWNlKC9ccysvZywiIik7dS5kYXRhPXB9cmV0dXJuIHV9O3ZhciBqPWZ1bmN0aW9uKHEseSxwKXt2YXIgdj1wLnN1YnN0cmluZygwLDE2KTt2YXIgdD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHYpO3ZhciByPUNyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKHkpO3ZhciB1PWlbcV1bImtleWxlbiJdK2lbcV1bIml2bGVuIl07dmFyIHg9IiI7dmFyIHc9bnVsbDtmb3IoOzspe3ZhciBzPUNyeXB0b0pTLmFsZ28uTUQ1LmNyZWF0ZSgpO2lmKHchPW51bGwpe3MudXBkYXRlKHcpfXMudXBkYXRlKHIpO3MudXBkYXRlKHQpO3c9cy5maW5hbGl6ZSgpO3g9eCtDcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeSh3KTtpZih4Lmxlbmd0aD49dSoyKXticmVha319dmFyIHo9e307ei5rZXloZXg9eC5zdWJzdHIoMCxpW3FdWyJrZXlsZW4iXSoyKTt6Lml2aGV4PXguc3Vic3RyKGlbcV1bImtleWxlbiJdKjIsaVtxXVsiaXZsZW4iXSoyKTtyZXR1cm4gen07dmFyIGI9ZnVuY3Rpb24ocCx2LHIsdyl7dmFyIHM9Q3J5cHRvSlMuZW5jLkJhc2U2NC5wYXJzZShwKTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShzKTt2YXIgdT1pW3ZdWyJwcm9jIl07dmFyIHQ9dShxLHIsdyk7cmV0dXJuIHR9O3ZhciBoPWZ1bmN0aW9uKHAscyxxLHUpe3ZhciByPWlbc11bImVwcm9jIl07dmFyIHQ9cihwLHEsdSk7cmV0dXJuIHR9O3JldHVybnt2ZXJzaW9uOiIxLjAuMCIsZ2V0SGV4RnJvbVBFTTpmdW5jdGlvbihxLHUpe3ZhciByPXE7aWYoci5pbmRleE9mKCItLS0tLUJFR0lOICIpPT0tMSl7dGhyb3ciY2FuJ3QgZmluZCBQRU0gaGVhZGVyOiAiK3V9aWYodHlwZW9mIHU9PSJzdHJpbmciJiZ1IT0iIil7cj1yLnJlcGxhY2UoIi0tLS0tQkVHSU4gIit1KyItLS0tLSIsIiIpO3I9ci5yZXBsYWNlKCItLS0tLUVORCAiK3UrIi0tLS0tIiwiIil9ZWxzZXtyPXIucmVwbGFjZSgvLS0tLS1CRUdJTiBbXi1dKy0tLS0tLywiIik7cj1yLnJlcGxhY2UoLy0tLS0tRU5EIFteLV0rLS0tLS0vLCIiKX12YXIgdD1yLnJlcGxhY2UoL1xzKy9nLCIiKTt2YXIgcD1iNjR0b2hleCh0KTtyZXR1cm4gcH0sZ2V0RGVjcnlwdGVkS2V5SGV4QnlLZXlJVjpmdW5jdGlvbihxLHQscyxyKXt2YXIgcD1jKHQpO3JldHVybiBwKHEscyxyKX0scGFyc2VQS0NTNVBFTTpmdW5jdGlvbihwKXtyZXR1cm4gbihwKX0sZ2V0S2V5QW5kVW51c2VkSXZCeVBhc3Njb2RlQW5kSXZzYWx0OmZ1bmN0aW9uKHEscCxyKXtyZXR1cm4gaihxLHAscil9LGRlY3J5cHRLZXlCNjQ6ZnVuY3Rpb24ocCxyLHEscyl7cmV0dXJuIGIocCxyLHEscyl9LGdldERlY3J5cHRlZEtleUhleDpmdW5jdGlvbih5LHgpe3ZhciBxPW4oeSk7dmFyIHQ9cS50eXBlO3ZhciByPXEuY2lwaGVyO3ZhciBwPXEuaXZzYWx0O3ZhciBzPXEuZGF0YTt2YXIgdz1qKHIseCxwKTt2YXIgdj13LmtleWhleDt2YXIgdT1iKHMscix2LHApO3JldHVybiB1fSxnZXRSU0FLZXlGcm9tRW5jcnlwdGVkUEtDUzVQRU06ZnVuY3Rpb24ocixxKXt2YXIgcz10aGlzLmdldERlY3J5cHRlZEtleUhleChyLHEpO3ZhciBwPW5ldyBSU0FLZXkoKTtwLnJlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmcocyk7cmV0dXJuIHB9LGdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVBydktleUhleDpmdW5jdGlvbih4LHMsQSx0LHIpe3ZhciBwPSIiO2lmKHR5cGVvZiB0PT0idW5kZWZpbmVkInx8dD09bnVsbCl7dD0iQUVTLTI1Ni1DQkMifWlmKHR5cGVvZiBpW3RdPT0idW5kZWZpbmVkIil7dGhyb3ciS0VZVVRJTCB1bnN1cHBvcnRlZCBhbGdvcml0aG06ICIrdH1pZih0eXBlb2Ygcj09InVuZGVmaW5lZCJ8fHI9PW51bGwpe3ZhciB2PWlbdF1bIml2bGVuIl07dmFyIHU9bSh2KTtyPXUudG9VcHBlckNhc2UoKX12YXIgej1qKHQsQSxyKTt2YXIgeT16LmtleWhleDt2YXIgdz1oKHMsdCx5LHIpO3ZhciBxPXcucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTt2YXIgcD0iLS0tLS1CRUdJTiAiK3grIiBQUklWQVRFIEtFWS0tLS0tXHJcbiI7cCs9IlByb2MtVHlwZTogNCxFTkNSWVBURURcclxuIjtwKz0iREVLLUluZm86ICIrdCsiLCIrcisiXHJcbiI7cCs9IlxyXG4iO3ArPXE7cCs9IlxyXG4tLS0tLUVORCAiK3grIiBQUklWQVRFIEtFWS0tLS0tXHJcbiI7cmV0dXJuIHB9LGdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVJTQUtleTpmdW5jdGlvbihELEUscix0KXt2YXIgQj1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOjB9KTt2YXIgdz1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpELm59KTt2YXIgQT1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOkQuZX0pO3ZhciBDPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuZH0pO3ZhciB1PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQucH0pO3ZhciBzPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQucX0pO3ZhciB6PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuZG1wMX0pO3ZhciB2PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuZG1xMX0pO3ZhciB5PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuY29lZmZ9KTt2YXIgRj1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbQix3LEEsQyx1LHMseix2LHldfSk7dmFyIHg9Ri5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KCJSU0EiLHgsRSxyLHQpfSxuZXdFbmNyeXB0ZWRQS0NTNVBFTTpmdW5jdGlvbihwLHEsdCx1KXtpZih0eXBlb2YgcT09InVuZGVmaW5lZCJ8fHE9PW51bGwpe3E9MTAyNH1pZih0eXBlb2YgdD09InVuZGVmaW5lZCJ8fHQ9PW51bGwpe3Q9IjEwMDAxIn12YXIgcj1uZXcgUlNBS2V5KCk7ci5nZW5lcmF0ZShxLHQpO3ZhciBzPW51bGw7aWYodHlwZW9mIHU9PSJ1bmRlZmluZWQifHx1PT1udWxsKXtzPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHIscCl9ZWxzZXtzPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHIscCx1KX1yZXR1cm4gc30sZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhQRU06ZnVuY3Rpb24ocil7aWYoci5tYXRjaCgvRU5DUllQVEVELykpe3Rocm93InBlbSBzaGFsbCBiZSBub3QgRU5DUllQVEVEIn12YXIgcT10aGlzLmdldEhleEZyb21QRU0ociwiUFJJVkFURSBLRVkiKTt2YXIgcD10aGlzLmdldFJTQUtleUZyb21QbGFpblBLQ1M4SGV4KHEpO3JldHVybiBwfSxnZXRSU0FLZXlGcm9tUGxhaW5QS0NTOEhleDpmdW5jdGlvbihzKXt2YXIgcj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLDApO2lmKHIubGVuZ3RoIT0zKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDMgZWxlbWVudHM6ICIrci5sZW5ndGh9dmFyIHE9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihzLHJbMV0pO2lmKHEhPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZGVudGlmaWVyIGlzIG5vdCByc2FFbmM6ICIrcX12YXIgcT1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKHMsclsxXSk7dmFyIHQ9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihzLHJbMl0pO3ZhciB1PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHQsMCk7dmFyIHA9bmV3IFJTQUtleSgpO3AucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyh1KTtyZXR1cm4gcH0scGFyc2VIZXhPZkVuY3J5cHRlZFBLQ1M4OmZ1bmN0aW9uKHcpe3ZhciBzPXt9O3ZhciByPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHcsMCk7aWYoci5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDApLml0ZW1zICE9IDI6ICIrci5sZW5ndGh9cy5jaXBoZXJ0ZXh0PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHcsclsxXSk7dmFyIHk9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyxyWzBdKTtpZih5Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wKS5pdGVtcyAhPSAyOiAiK3kubGVuZ3RofWlmKEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHcseVswXSkhPSIyYTg2NDg4NmY3MGQwMTA1MGQiKXt0aHJvdyJ0aGlzIG9ubHkgc3VwcG9ydHMgcGtjczVQQkVTMiJ9dmFyIHA9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyx5WzFdKTtpZih5Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEpLml0ZW1zICE9IDI6ICIrcC5sZW5ndGh9dmFyIHE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyxwWzFdKTtpZihxLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEuMSkuaXRlbXMgIT0gMjogIitxLmxlbmd0aH1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaih3LHFbMF0pIT0iMmE4NjQ4ODZmNzBkMDMwNyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBUcmlwbGVERVMifXMuZW5jcnlwdGlvblNjaGVtZUFsZz0iVHJpcGxlREVTIjtzLmVuY3J5cHRpb25TY2hlbWVJVj1BU04xSEVYLmdldEhleE9mVl9BdE9iaih3LHFbMV0pO3ZhciB0PUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHcscFswXSk7aWYodC5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjApLml0ZW1zICE9IDI6ICIrdC5sZW5ndGh9aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodyx0WzBdKSE9IjJhODY0ODg2ZjcwZDAxMDUwYyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBwa2NzNVBCS0RGMiJ9dmFyIHg9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyx0WzFdKTtpZih4Lmxlbmd0aDwyKXt0aHJvdyJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMS4wLjEpLml0ZW1zIDwgMjogIit4Lmxlbmd0aH1zLnBia2RmMlNhbHQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodyx4WzBdKTt2YXIgdT1BU04xSEVYLmdldEhleE9mVl9BdE9iaih3LHhbMV0pO3RyeXtzLnBia2RmMkl0ZXI9cGFyc2VJbnQodSwxNil9Y2F0Y2godil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdCBwYmtkZjJJdGVyOiAiK3V9cmV0dXJuIHN9LGdldFBCS0RGMktleUhleEZyb21QYXJhbTpmdW5jdGlvbih1LHApe3ZhciB0PUNyeXB0b0pTLmVuYy5IZXgucGFyc2UodS5wYmtkZjJTYWx0KTt2YXIgcT11LnBia2RmMkl0ZXI7dmFyIHM9Q3J5cHRvSlMuUEJLREYyKHAsdCx7a2V5U2l6ZToxOTIvMzIsaXRlcmF0aW9uczpxfSk7dmFyIHI9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocyk7cmV0dXJuIHJ9LGdldFBsYWluUEtDUzhIZXhGcm9tRW5jcnlwdGVkUEtDUzhQRU06ZnVuY3Rpb24oeCx5KXt2YXIgcj10aGlzLmdldEhleEZyb21QRU0oeCwiRU5DUllQVEVEIFBSSVZBVEUgS0VZIik7dmFyIHA9dGhpcy5wYXJzZUhleE9mRW5jcnlwdGVkUEtDUzgocik7dmFyIHU9S0VZVVRJTC5nZXRQQktERjJLZXlIZXhGcm9tUGFyYW0ocCx5KTt2YXIgdj17fTt2LmNpcGhlcnRleHQ9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShwLmNpcGhlcnRleHQpO3ZhciB0PUNyeXB0b0pTLmVuYy5IZXgucGFyc2UodSk7dmFyIHM9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShwLmVuY3J5cHRpb25TY2hlbWVJVik7dmFyIHc9Q3J5cHRvSlMuVHJpcGxlREVTLmRlY3J5cHQodix0LHtpdjpzfSk7dmFyIHE9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkodyk7cmV0dXJuIHF9LGdldFJTQUtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTTpmdW5jdGlvbihzLHIpe3ZhciBxPXRoaXMuZ2V0UGxhaW5QS0NTOEhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTShzLHIpO3ZhciBwPXRoaXMuZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhIZXgocSk7cmV0dXJuIHB9LGdldEtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTTpmdW5jdGlvbihzLHEpe3ZhciBwPXRoaXMuZ2V0UGxhaW5QS0NTOEhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTShzLHEpO3ZhciByPXRoaXMuZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4KHApO3JldHVybiByfSxwYXJzZVBsYWluUHJpdmF0ZVBLQ1M4SGV4OmZ1bmN0aW9uKHMpe3ZhciBxPXt9O3EuYWxncGFyYW09bnVsbDtpZihzLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgcGxhaW4gUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDEpIn12YXIgcj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLDApO2lmKHIubGVuZ3RoIT0zKXt0aHJvdyJtYWxmb3JtZWQgcGxhaW4gUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDIpIn1pZihzLnN1YnN0cihyWzFdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDMpIn12YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLHJbMV0pO2lmKHAubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDQpIn1pZihzLnN1YnN0cihwWzBdLDIpIT0iMDYiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDUpIn1xLmFsZ29pZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihzLHBbMF0pO2lmKHMuc3Vic3RyKHBbMV0sMik9PSIwNiIpe3EuYWxncGFyYW09QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocyxwWzFdKX1pZihzLnN1YnN0cihyWzJdLDIpIT0iMDQiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDYpIn1xLmtleWlkeD1BU04xSEVYLmdldFN0YXJ0UG9zT2ZWX0F0T2JqKHMsclsyXSk7cmV0dXJuIHF9LGdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOFBFTTpmdW5jdGlvbihxKXt2YXIgcD10aGlzLmdldEhleEZyb21QRU0ocSwiUFJJVkFURSBLRVkiKTt2YXIgcj10aGlzLmdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOEhleChwKTtyZXR1cm4gcn0sZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4OmZ1bmN0aW9uKHApe3ZhciB3PXRoaXMucGFyc2VQbGFpblByaXZhdGVQS0NTOEhleChwKTtpZih3LmFsZ29pZD09IjJhODY0ODg2ZjcwZDAxMDEwMSIpe3RoaXMucGFyc2VQcml2YXRlUmF3UlNBS2V5SGV4QXRPYmoocCx3KTt2YXIgdT13LmtleTt2YXIgej1uZXcgUlNBS2V5KCk7ei5zZXRQcml2YXRlRXgodS5uLHUuZSx1LmQsdS5wLHUucSx1LmRwLHUuZHEsdS5jbyk7cmV0dXJuIHp9ZWxzZXtpZih3LmFsZ29pZD09IjJhODY0OGNlM2QwMjAxIil7dGhpcy5wYXJzZVByaXZhdGVSYXdFQ0tleUhleEF0T2JqKHAsdyk7aWYoS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3cuYWxncGFyYW1dPT09dW5kZWZpbmVkKXt0aHJvdyJLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWUgdW5kZWZpbmVkOiAiK3cuYWxncGFyYW19dmFyIHY9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3cuYWxncGFyYW1dO3ZhciB6PW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6dn0pO3ouc2V0UHVibGljS2V5SGV4KHcucHVia2V5KTt6LnNldFByaXZhdGVLZXlIZXgody5rZXkpO3ouaXNQdWJsaWM9ZmFsc2U7cmV0dXJuIHp9ZWxzZXtpZih3LmFsZ29pZD09IjJhODY0OGNlMzgwNDAxIil7dmFyIHQ9QVNOMUhFWC5nZXRWYnlMaXN0KHAsMCxbMSwxLDBdLCIwMiIpO3ZhciBzPUFTTjFIRVguZ2V0VmJ5TGlzdChwLDAsWzEsMSwxXSwiMDIiKTt2YXIgeT1BU04xSEVYLmdldFZieUxpc3QocCwwLFsxLDEsMl0sIjAyIik7dmFyIEI9QVNOMUhFWC5nZXRWYnlMaXN0KHAsMCxbMiwwXSwiMDIiKTt2YXIgcj1uZXcgQmlnSW50ZWdlcih0LDE2KTt2YXIgcT1uZXcgQmlnSW50ZWdlcihzLDE2KTt2YXIgeD1uZXcgQmlnSW50ZWdlcih5LDE2KTt2YXIgQT1uZXcgQmlnSW50ZWdlcihCLDE2KTt2YXIgej1uZXcgS0pVUi5jcnlwdG8uRFNBKCk7ei5zZXRQcml2YXRlKHIscSx4LG51bGwsQSk7cmV0dXJuIHp9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBwcml2YXRlIGtleSBhbGdvcml0aG0ifX19fSxnZXRSU0FLZXlGcm9tUHVibGljUEtDUzhQRU06ZnVuY3Rpb24ocSl7dmFyIHI9dGhpcy5nZXRIZXhGcm9tUEVNKHEsIlBVQkxJQyBLRVkiKTt2YXIgcD10aGlzLmdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleChyKTtyZXR1cm4gcH0sZ2V0S2V5RnJvbVB1YmxpY1BLQ1M4UEVNOmZ1bmN0aW9uKHEpe3ZhciByPXRoaXMuZ2V0SGV4RnJvbVBFTShxLCJQVUJMSUMgS0VZIik7dmFyIHA9dGhpcy5nZXRLZXlGcm9tUHVibGljUEtDUzhIZXgocik7cmV0dXJuIHB9LGdldEtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbihxKXt2YXIgcD10aGlzLnBhcnNlUHVibGljUEtDUzhIZXgocSk7aWYocC5hbGdvaWQ9PSIyYTg2NDg4NmY3MGQwMTAxMDEiKXt2YXIgdT10aGlzLnBhcnNlUHVibGljUmF3UlNBS2V5SGV4KHAua2V5KTt2YXIgcj1uZXcgUlNBS2V5KCk7ci5zZXRQdWJsaWModS5uLHUuZSk7cmV0dXJuIHJ9ZWxzZXtpZihwLmFsZ29pZD09IjJhODY0OGNlM2QwMjAxIil7aWYoS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3AuYWxncGFyYW1dPT09dW5kZWZpbmVkKXt0aHJvdyJLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWUgdW5kZWZpbmVkOiAiK3AuYWxncGFyYW19dmFyIHM9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3AuYWxncGFyYW1dO3ZhciByPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6cyxwdWI6cC5rZXl9KTtyZXR1cm4gcn1lbHNle2lmKHAuYWxnb2lkPT0iMmE4NjQ4Y2UzODA0MDEiKXt2YXIgdD1wLmFsZ3BhcmFtO3ZhciB2PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHAua2V5LDApO3ZhciByPW5ldyBLSlVSLmNyeXB0by5EU0EoKTtyLnNldFB1YmxpYyhuZXcgQmlnSW50ZWdlcih0LnAsMTYpLG5ldyBCaWdJbnRlZ2VyKHQucSwxNiksbmV3IEJpZ0ludGVnZXIodC5nLDE2KSxuZXcgQmlnSW50ZWdlcih2LDE2KSk7cmV0dXJuIHJ9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBwdWJsaWMga2V5IGFsZ29yaXRobSJ9fX19LHBhcnNlUHVibGljUmF3UlNBS2V5SGV4OmZ1bmN0aW9uKHIpe3ZhciBwPXt9O2lmKHIuc3Vic3RyKDAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDAxKSJ9dmFyIHE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoociwwKTtpZihxLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDIpIn1pZihyLnN1YnN0cihxWzBdLDIpIT0iMDIiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwMykifXAubj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihyLHFbMF0pO2lmKHIuc3Vic3RyKHFbMV0sMikhPSIwMiIpe3Rocm93Im1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDA0KSJ9cC5lPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHIscVsxXSk7cmV0dXJuIHB9LHBhcnNlUHJpdmF0ZVJhd1JTQUtleUhleEF0T2JqOmZ1bmN0aW9uKHEscyl7dmFyIHI9cy5rZXlpZHg7aWYocS5zdWJzdHIociwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFJTQSBwcml2YXRlIGtleShjb2RlOjAwMSkifXZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEscik7aWYocC5sZW5ndGghPTkpe3Rocm93Im1hbGZvcm1lZCBSU0EgcHJpdmF0ZSBrZXkoY29kZTowMDIpIn1zLmtleT17fTtzLmtleS5uPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFsxXSk7cy5rZXkuZT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbMl0pO3Mua2V5LmQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzNdKTtzLmtleS5wPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFs0XSk7cy5rZXkucT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbNV0pO3Mua2V5LmRwPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFs2XSk7cy5rZXkuZHE9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzddKTtzLmtleS5jbz1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbOF0pfSxwYXJzZVByaXZhdGVSYXdFQ0tleUhleEF0T2JqOmZ1bmN0aW9uKHAsdCl7dmFyIHE9dC5rZXlpZHg7dmFyIHI9QVNOMUhFWC5nZXRWYnlMaXN0KHAscSxbMV0sIjA0Iik7dmFyIHM9QVNOMUhFWC5nZXRWYnlMaXN0KHAscSxbMiwwXSwiMDMiKS5zdWJzdHIoMik7dC5rZXk9cjt0LnB1YmtleT1zfSxwYXJzZVB1YmxpY1BLQ1M4SGV4OmZ1bmN0aW9uKHMpe3ZhciBxPXt9O3EuYWxncGFyYW09bnVsbDt2YXIgcj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLDApO2lmKHIubGVuZ3RoIT0yKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrci5sZW5ndGh9dmFyIHQ9clswXTtpZihzLnN1YnN0cih0LDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwMSkifXZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHMsdCk7aWYocC5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAyKSJ9aWYocy5zdWJzdHIocFswXSwyKSE9IjA2Iil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDMpIn1xLmFsZ29pZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihzLHBbMF0pO2lmKHMuc3Vic3RyKHBbMV0sMik9PSIwNiIpe3EuYWxncGFyYW09QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocyxwWzFdKX1lbHNle2lmKHMuc3Vic3RyKHBbMV0sMik9PSIzMCIpe3EuYWxncGFyYW09e307cS5hbGdwYXJhbS5wPUFTTjFIRVguZ2V0VmJ5TGlzdChzLHBbMV0sWzBdLCIwMiIpO3EuYWxncGFyYW0ucT1BU04xSEVYLmdldFZieUxpc3QocyxwWzFdLFsxXSwiMDIiKTtxLmFsZ3BhcmFtLmc9QVNOMUhFWC5nZXRWYnlMaXN0KHMscFsxXSxbMl0sIjAyIil9fWlmKHMuc3Vic3RyKHJbMV0sMikhPSIwMyIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDA0KSJ9cS5rZXk9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocyxyWzFdKS5zdWJzdHIoMik7cmV0dXJuIHF9LGdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbih0KXt2YXIgcz1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaih0LDApO2lmKHMubGVuZ3RoIT0yKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrcy5sZW5ndGh9dmFyIHI9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaih0LHNbMF0pO2lmKHIhPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZCBpcyBub3QgcnNhRW5jcnlwdGlvbiJ9aWYodC5zdWJzdHIoc1sxXSwyKSE9IjAzIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgQklUU1RSSU5HIGVuY2Fwc2xhdGVkLiJ9dmFyIHY9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaih0LHNbMV0pKzI7aWYodC5zdWJzdHIodiwyKSE9IjMwIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgU0VRVUVOQ0UuIn12YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaih0LHYpO2lmKHAubGVuZ3RoIT0yKXt0aHJvdyJpbm5lciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrcC5sZW5ndGh9aWYodC5zdWJzdHIocFswXSwyKSE9IjAyIil7dGhyb3ciTiBpcyBub3QgQVNOLjEgSU5URUdFUiJ9aWYodC5zdWJzdHIocFsxXSwyKSE9IjAyIil7dGhyb3ciRSBpcyBub3QgQVNOLjEgSU5URUdFUiJ9dmFyIHc9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodCxwWzBdKTt2YXIgdT1BU04xSEVYLmdldEhleE9mVl9BdE9iaih0LHBbMV0pO3ZhciBxPW5ldyBSU0FLZXkoKTtxLnNldFB1YmxpYyh3LHUpO3JldHVybiBxfSx9fSgpO0tFWVVUSUwuZ2V0S2V5PWZ1bmN0aW9uKGYsZSxoKXtpZih0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmZiBpbnN0YW5jZW9mIFJTQUtleSl7cmV0dXJuIGZ9aWYodHlwZW9mIEtKVVIuY3J5cHRvLkVDRFNBIT0idW5kZWZpbmVkIiYmZiBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBKXtyZXR1cm4gZn1pZih0eXBlb2YgS0pVUi5jcnlwdG8uRFNBIT0idW5kZWZpbmVkIiYmZiBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkRTQSl7cmV0dXJuIGZ9aWYoZi5jdXJ2ZSE9PXVuZGVmaW5lZCYmZi54eSE9PXVuZGVmaW5lZCYmZi5kPT09dW5kZWZpbmVkKXtyZXR1cm4gbmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtwdWI6Zi54eSxjdXJ2ZTpmLmN1cnZlfSl9aWYoZi5jdXJ2ZSE9PXVuZGVmaW5lZCYmZi5kIT09dW5kZWZpbmVkKXtyZXR1cm4gbmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtwcnY6Zi5kLGN1cnZlOmYuY3VydmV9KX1pZihmLmt0eT09PXVuZGVmaW5lZCYmZi5uIT09dW5kZWZpbmVkJiZmLmUhPT11bmRlZmluZWQmJmYuZD09PXVuZGVmaW5lZCl7dmFyIHc9bmV3IFJTQUtleSgpO3cuc2V0UHVibGljKGYubixmLmUpO3JldHVybiB3fWlmKGYua3R5PT09dW5kZWZpbmVkJiZmLm4hPT11bmRlZmluZWQmJmYuZSE9PXVuZGVmaW5lZCYmZi5kIT09dW5kZWZpbmVkJiZmLnAhPT11bmRlZmluZWQmJmYucSE9PXVuZGVmaW5lZCYmZi5kcCE9PXVuZGVmaW5lZCYmZi5kcSE9PXVuZGVmaW5lZCYmZi5jbyE9PXVuZGVmaW5lZCYmZi5xaT09PXVuZGVmaW5lZCl7dmFyIHc9bmV3IFJTQUtleSgpO3cuc2V0UHJpdmF0ZUV4KGYubixmLmUsZi5kLGYucCxmLnEsZi5kcCxmLmRxLGYuY28pO3JldHVybiB3fWlmKGYua3R5PT09dW5kZWZpbmVkJiZmLm4hPT11bmRlZmluZWQmJmYuZSE9PXVuZGVmaW5lZCYmZi5kIT09dW5kZWZpbmVkJiZmLnA9PT11bmRlZmluZWQpe3ZhciB3PW5ldyBSU0FLZXkoKTt3LnNldFByaXZhdGUoZi5uLGYuZSxmLmQpO3JldHVybiB3fWlmKGYucCE9PXVuZGVmaW5lZCYmZi5xIT09dW5kZWZpbmVkJiZmLmchPT11bmRlZmluZWQmJmYueSE9PXVuZGVmaW5lZCYmZi54PT09dW5kZWZpbmVkKXt2YXIgdz1uZXcgS0pVUi5jcnlwdG8uRFNBKCk7dy5zZXRQdWJsaWMoZi5wLGYucSxmLmcsZi55KTtyZXR1cm4gd31pZihmLnAhPT11bmRlZmluZWQmJmYucSE9PXVuZGVmaW5lZCYmZi5nIT09dW5kZWZpbmVkJiZmLnkhPT11bmRlZmluZWQmJmYueCE9PXVuZGVmaW5lZCl7dmFyIHc9bmV3IEtKVVIuY3J5cHRvLkRTQSgpO3cuc2V0UHJpdmF0ZShmLnAsZi5xLGYuZyxmLnksZi54KTtyZXR1cm4gd31pZihmLmt0eT09PSJSU0EiJiZmLm4hPT11bmRlZmluZWQmJmYuZSE9PXVuZGVmaW5lZCYmZi5kPT09dW5kZWZpbmVkKXt2YXIgdz1uZXcgUlNBS2V5KCk7dy5zZXRQdWJsaWMoYjY0dXRvaGV4KGYubiksYjY0dXRvaGV4KGYuZSkpO3JldHVybiB3fWlmKGYua3R5PT09IlJTQSImJmYubiE9PXVuZGVmaW5lZCYmZi5lIT09dW5kZWZpbmVkJiZmLmQhPT11bmRlZmluZWQmJmYucCE9PXVuZGVmaW5lZCYmZi5xIT09dW5kZWZpbmVkJiZmLmRwIT09dW5kZWZpbmVkJiZmLmRxIT09dW5kZWZpbmVkJiZmLnFpIT09dW5kZWZpbmVkKXt2YXIgdz1uZXcgUlNBS2V5KCk7dy5zZXRQcml2YXRlRXgoYjY0dXRvaGV4KGYubiksYjY0dXRvaGV4KGYuZSksYjY0dXRvaGV4KGYuZCksYjY0dXRvaGV4KGYucCksYjY0dXRvaGV4KGYucSksYjY0dXRvaGV4KGYuZHApLGI2NHV0b2hleChmLmRxKSxiNjR1dG9oZXgoZi5xaSkpO3JldHVybiB3fWlmKGYua3R5PT09IlJTQSImJmYubiE9PXVuZGVmaW5lZCYmZi5lIT09dW5kZWZpbmVkJiZmLmQhPT11bmRlZmluZWQpe3ZhciB3PW5ldyBSU0FLZXkoKTt3LnNldFByaXZhdGUoYjY0dXRvaGV4KGYubiksYjY0dXRvaGV4KGYuZSksYjY0dXRvaGV4KGYuZCkpO3JldHVybiB3fWlmKGYua3R5PT09IkVDIiYmZi5jcnYhPT11bmRlZmluZWQmJmYueCE9PXVuZGVmaW5lZCYmZi55IT09dW5kZWZpbmVkJiZmLmQ9PT11bmRlZmluZWQpe3ZhciBkPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6Zi5jcnZ9KTt2YXIgbD1kLmVjcGFyYW1zLmtleWxlbi80O3ZhciByPSgiMDAwMDAwMDAwMCIrYjY0dXRvaGV4KGYueCkpLnNsaWNlKC1sKTt2YXIgbj0oIjAwMDAwMDAwMDAiK2I2NHV0b2hleChmLnkpKS5zbGljZSgtbCk7dmFyIG09IjA0IityK247ZC5zZXRQdWJsaWNLZXlIZXgobSk7cmV0dXJuIGR9aWYoZi5rdHk9PT0iRUMiJiZmLmNydiE9PXVuZGVmaW5lZCYmZi54IT09dW5kZWZpbmVkJiZmLnkhPT11bmRlZmluZWQmJmYuZCE9PXVuZGVmaW5lZCl7dmFyIGQ9bmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtjdXJ2ZTpmLmNydn0pO3ZhciBsPWQuZWNwYXJhbXMua2V5bGVuLzQ7dmFyIGE9KCIwMDAwMDAwMDAwIitiNjR1dG9oZXgoZi5kKSkuc2xpY2UoLWwpO2Quc2V0UHJpdmF0ZUtleUhleChhKTtyZXR1cm4gZH1pZihmLmluZGV4T2YoIi1FTkQgQ0VSVElGSUNBVEUtIiwwKSE9LTF8fGYuaW5kZXhPZigiLUVORCBYNTA5IENFUlRJRklDQVRFLSIsMCkhPS0xfHxmLmluZGV4T2YoIi1FTkQgVFJVU1RFRCBDRVJUSUZJQ0FURS0iLDApIT0tMSl7cmV0dXJuIFg1MDkuZ2V0UHVibGljS2V5RnJvbUNlcnRQRU0oZil9aWYoaD09PSJwa2NzOHB1YiIpe3JldHVybiBLRVlVVElMLmdldEtleUZyb21QdWJsaWNQS0NTOEhleChmKX1pZihmLmluZGV4T2YoIi1FTkQgUFVCTElDIEtFWS0iKSE9LTEpe3JldHVybiBLRVlVVElMLmdldEtleUZyb21QdWJsaWNQS0NTOFBFTShmKX1pZihoPT09InBrY3M1cHJ2Iil7dmFyIHc9bmV3IFJTQUtleSgpO3cucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhmKTtyZXR1cm4gd31pZihoPT09InBrY3M1cHJ2Iil7dmFyIHc9bmV3IFJTQUtleSgpO3cucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhmKTtyZXR1cm4gd31pZihmLmluZGV4T2YoIi1FTkQgUlNBIFBSSVZBVEUgS0VZLSIpIT0tMSYmZi5pbmRleE9mKCI0LEVOQ1JZUFRFRCIpPT0tMSl7dmFyIGk9S0VZVVRJTC5nZXRIZXhGcm9tUEVNKGYsIlJTQSBQUklWQVRFIEtFWSIpO3JldHVybiBLRVlVVElMLmdldEtleShpLG51bGwsInBrY3M1cHJ2Iil9aWYoZi5pbmRleE9mKCItRU5EIERTQSBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKT09LTEpe3ZhciB1PXRoaXMuZ2V0SGV4RnJvbVBFTShmLCJEU0EgUFJJVkFURSBLRVkiKTt2YXIgdD1BU04xSEVYLmdldFZieUxpc3QodSwwLFsxXSwiMDIiKTt2YXIgcz1BU04xSEVYLmdldFZieUxpc3QodSwwLFsyXSwiMDIiKTt2YXIgdj1BU04xSEVYLmdldFZieUxpc3QodSwwLFszXSwiMDIiKTt2YXIgaj1BU04xSEVYLmdldFZieUxpc3QodSwwLFs0XSwiMDIiKTt2YXIgaz1BU04xSEVYLmdldFZieUxpc3QodSwwLFs1XSwiMDIiKTt2YXIgdz1uZXcgS0pVUi5jcnlwdG8uRFNBKCk7dy5zZXRQcml2YXRlKG5ldyBCaWdJbnRlZ2VyKHQsMTYpLG5ldyBCaWdJbnRlZ2VyKHMsMTYpLG5ldyBCaWdJbnRlZ2VyKHYsMTYpLG5ldyBCaWdJbnRlZ2VyKGosMTYpLG5ldyBCaWdJbnRlZ2VyKGssMTYpKTtyZXR1cm4gd31pZihmLmluZGV4T2YoIi1FTkQgUFJJVkFURSBLRVktIikhPS0xKXtyZXR1cm4gS0VZVVRJTC5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhQRU0oZil9aWYoZi5pbmRleE9mKCItRU5EIFJTQSBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKSE9LTEpe3JldHVybiBLRVlVVElMLmdldFJTQUtleUZyb21FbmNyeXB0ZWRQS0NTNVBFTShmLGUpfWlmKGYuaW5kZXhPZigiLUVORCBFQyBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKSE9LTEpe3ZhciB1PUtFWVVUSUwuZ2V0RGVjcnlwdGVkS2V5SGV4KGYsZSk7dmFyIHc9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMV0sIjA0Iik7dmFyIGM9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMiwwXSwiMDYiKTt2YXIgbz1BU04xSEVYLmdldFZieUxpc3QodSwwLFszLDBdLCIwMyIpLnN1YnN0cigyKTt2YXIgYj0iIjtpZihLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWVbY10hPT11bmRlZmluZWQpe2I9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW2NdfWVsc2V7dGhyb3cidW5kZWZpbmVkIE9JRChoZXgpIGluIEtKVVIuY3J5cHRvLk9JRDogIitjfXZhciBkPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7bmFtZTpifSk7ZC5zZXRQdWJsaWNLZXlIZXgobyk7ZC5zZXRQcml2YXRlS2V5SGV4KHcpO2QuaXNQdWJsaWM9ZmFsc2U7cmV0dXJuIGR9aWYoZi5pbmRleE9mKCItRU5EIERTQSBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKSE9LTEpe3ZhciB1PUtFWVVUSUwuZ2V0RGVjcnlwdGVkS2V5SGV4KGYsZSk7dmFyIHQ9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMV0sIjAyIik7dmFyIHM9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMl0sIjAyIik7dmFyIHY9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbM10sIjAyIik7dmFyIGo9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbNF0sIjAyIik7dmFyIGs9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbNV0sIjAyIik7dmFyIHc9bmV3IEtKVVIuY3J5cHRvLkRTQSgpO3cuc2V0UHJpdmF0ZShuZXcgQmlnSW50ZWdlcih0LDE2KSxuZXcgQmlnSW50ZWdlcihzLDE2KSxuZXcgQmlnSW50ZWdlcih2LDE2KSxuZXcgQmlnSW50ZWdlcihqLDE2KSxuZXcgQmlnSW50ZWdlcihrLDE2KSk7cmV0dXJuIHd9aWYoZi5pbmRleE9mKCItRU5EIEVOQ1JZUFRFRCBQUklWQVRFIEtFWS0iKSE9LTEpe3JldHVybiBLRVlVVElMLmdldEtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTShmLGUpfXRocm93Im5vdCBzdXBwb3J0ZWQgYXJndW1lbnQifTtLRVlVVElMLmdlbmVyYXRlS2V5cGFpcj1mdW5jdGlvbihhLGMpe2lmKGE9PSJSU0EiKXt2YXIgYj1jO3ZhciBoPW5ldyBSU0FLZXkoKTtoLmdlbmVyYXRlKGIsIjEwMDAxIik7aC5pc1ByaXZhdGU9dHJ1ZTtoLmlzUHVibGljPXRydWU7dmFyIGY9bmV3IFJTQUtleSgpO3ZhciBlPWgubi50b1N0cmluZygxNik7dmFyIGk9aC5lLnRvU3RyaW5nKDE2KTtmLnNldFB1YmxpYyhlLGkpO2YuaXNQcml2YXRlPWZhbHNlO2YuaXNQdWJsaWM9dHJ1ZTt2YXIgaz17fTtrLnBydktleU9iaj1oO2sucHViS2V5T2JqPWY7cmV0dXJuIGt9ZWxzZXtpZihhPT0iRUMiKXt2YXIgZD1jO3ZhciBnPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6ZH0pO3ZhciBqPWcuZ2VuZXJhdGVLZXlQYWlySGV4KCk7dmFyIGg9bmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtjdXJ2ZTpkfSk7aC5zZXRQcml2YXRlS2V5SGV4KGouZWNwcnZoZXgpO2guaXNQcml2YXRlPXRydWU7aC5pc1B1YmxpYz1mYWxzZTt2YXIgZj1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOmR9KTtmLnNldFB1YmxpY0tleUhleChqLmVjcHViaGV4KTtmLmlzUHJpdmF0ZT1mYWxzZTtmLmlzUHVibGljPXRydWU7dmFyIGs9e307ay5wcnZLZXlPYmo9aDtrLnB1YktleU9iaj1mO3JldHVybiBrfWVsc2V7dGhyb3cidW5rbm93biBhbGdvcml0aG06ICIrYX19fTtLRVlVVElMLmdldFBFTT1mdW5jdGlvbihhLHIsbyxnLGope3ZhciB2PUtKVVIuYXNuMTt2YXIgdT1LSlVSLmNyeXB0bztmdW5jdGlvbiBwKHMpe3ZhciB3PUtKVVIuYXNuMS5BU04xVXRpbC5uZXdPYmplY3Qoe3NlcTpbeyJpbnQiOjB9LHsiaW50Ijp7YmlnaW50OnMubn19LHsiaW50IjpzLmV9LHsiaW50Ijp7YmlnaW50OnMuZH19LHsiaW50Ijp7YmlnaW50OnMucH19LHsiaW50Ijp7YmlnaW50OnMucX19LHsiaW50Ijp7YmlnaW50OnMuZG1wMX19LHsiaW50Ijp7YmlnaW50OnMuZG1xMX19LHsiaW50Ijp7YmlnaW50OnMuY29lZmZ9fV19KTtyZXR1cm4gd31mdW5jdGlvbiBxKHcpe3ZhciBzPUtKVVIuYXNuMS5BU04xVXRpbC5uZXdPYmplY3Qoe3NlcTpbeyJpbnQiOjF9LHtvY3RzdHI6e2hleDp3LnBydktleUhleH19LHt0YWc6WyJhMCIsdHJ1ZSx7b2lkOntuYW1lOncuY3VydmVOYW1lfX1dfSx7dGFnOlsiYTEiLHRydWUse2JpdHN0cjp7aGV4OiIwMCIrdy5wdWJLZXlIZXh9fV19XX0pO3JldHVybiBzfWZ1bmN0aW9uIG4ocyl7dmFyIHc9S0pVUi5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh7c2VxOlt7ImludCI6MH0seyJpbnQiOntiaWdpbnQ6cy5wfX0seyJpbnQiOntiaWdpbnQ6cy5xfX0seyJpbnQiOntiaWdpbnQ6cy5nfX0seyJpbnQiOntiaWdpbnQ6cy55fX0seyJpbnQiOntiaWdpbnQ6cy54fX1dfSk7cmV0dXJuIHd9aWYoKCh0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIFJTQUtleSl8fCh0eXBlb2YgdS5EU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgdS5EU0EpfHwodHlwZW9mIHUuRUNEU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgdS5FQ0RTQSkpJiZhLmlzUHVibGljPT10cnVlJiYocj09PXVuZGVmaW5lZHx8cj09IlBLQ1M4UFVCIikpe3ZhciB0PW5ldyBLSlVSLmFzbjEueDUwOS5TdWJqZWN0UHVibGljS2V5SW5mbyhhKTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIlBVQkxJQyBLRVkiKX1pZihyPT0iUEtDUzFQUlYiJiZ0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIFJTQUtleSYmKG89PT11bmRlZmluZWR8fG89PW51bGwpJiZhLmlzUHJpdmF0ZT09dHJ1ZSl7dmFyIHQ9cChhKTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIlJTQSBQUklWQVRFIEtFWSIpfWlmKHI9PSJQS0NTMVBSViImJnR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0EmJihvPT09dW5kZWZpbmVkfHxvPT1udWxsKSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciBmPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcih7bmFtZTphLmN1cnZlTmFtZX0pO3ZhciBsPWYuZ2V0RW5jb2RlZEhleCgpO3ZhciBlPXEoYSk7dmFyIGs9ZS5nZXRFbmNvZGVkSGV4KCk7dmFyIGk9IiI7aSs9di5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGwsIkVDIFBBUkFNRVRFUlMiKTtpKz12LkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgoaywiRUMgUFJJVkFURSBLRVkiKTtyZXR1cm4gaX1pZihyPT0iUEtDUzFQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRFNBIT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkRTQSYmKG89PT11bmRlZmluZWR8fG89PW51bGwpJiZhLmlzUHJpdmF0ZT09dHJ1ZSl7dmFyIHQ9bihhKTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIkRTQSBQUklWQVRFIEtFWSIpfWlmKHI9PSJQS0NTNVBSViImJnR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgUlNBS2V5JiYobyE9PXVuZGVmaW5lZCYmbyE9bnVsbCkmJmEuaXNQcml2YXRlPT10cnVlKXt2YXIgdD1wKGEpO3ZhciBtPXQuZ2V0RW5jb2RlZEhleCgpO2lmKGc9PT11bmRlZmluZWQpe2c9IkRFUy1FREUzLUNCQyJ9cmV0dXJuIHRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KCJSU0EiLG0sbyxnKX1pZihyPT0iUEtDUzVQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRUNEU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0EmJihvIT09dW5kZWZpbmVkJiZvIT1udWxsKSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciB0PXEoYSk7dmFyIG09dC5nZXRFbmNvZGVkSGV4KCk7aWYoZz09PXVuZGVmaW5lZCl7Zz0iREVTLUVERTMtQ0JDIn1yZXR1cm4gdGhpcy5nZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21QcnZLZXlIZXgoIkVDIixtLG8sZyl9aWYocj09IlBLQ1M1UFJWIiYmdHlwZW9mIEtKVVIuY3J5cHRvLkRTQSE9InVuZGVmaW5lZCImJmEgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0EmJihvIT09dW5kZWZpbmVkJiZvIT1udWxsKSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciB0PW4oYSk7dmFyIG09dC5nZXRFbmNvZGVkSGV4KCk7aWYoZz09PXVuZGVmaW5lZCl7Zz0iREVTLUVERTMtQ0JDIn1yZXR1cm4gdGhpcy5nZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21QcnZLZXlIZXgoIkRTQSIsbSxvLGcpfXZhciBoPWZ1bmN0aW9uKHcscyl7dmFyIHk9Yih3LHMpO3ZhciB4PW5ldyBLSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3tzZXE6W3tvaWQ6e25hbWU6InBrY3M1UEJFUzIifX0se3NlcTpbe3NlcTpbe29pZDp7bmFtZToicGtjczVQQktERjIifX0se3NlcTpbe29jdHN0cjp7aGV4OnkucGJrZGYyU2FsdH19LHsiaW50Ijp5LnBia2RmMkl0ZXJ9XX1dfSx7c2VxOlt7b2lkOntuYW1lOiJkZXMtRURFMy1DQkMifX0se29jdHN0cjp7aGV4OnkuZW5jcnlwdGlvblNjaGVtZUlWfX1dfV19XX0se29jdHN0cjp7aGV4OnkuY2lwaGVydGV4dH19XX0pO3JldHVybiB4LmdldEVuY29kZWRIZXgoKX07dmFyIGI9ZnVuY3Rpb24oRCxFKXt2YXIgeD0xMDA7dmFyIEM9Q3J5cHRvSlMubGliLldvcmRBcnJheS5yYW5kb20oOCk7dmFyIEI9IkRFUy1FREUzLUNCQyI7dmFyIHM9Q3J5cHRvSlMubGliLldvcmRBcnJheS5yYW5kb20oOCk7dmFyIHk9Q3J5cHRvSlMuUEJLREYyKEUsQyx7a2V5U2l6ZToxOTIvMzIsaXRlcmF0aW9uczp4fSk7dmFyIHo9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShEKTt2YXIgQT1DcnlwdG9KUy5UcmlwbGVERVMuZW5jcnlwdCh6LHkse2l2OnN9KSsiIjt2YXIgdz17fTt3LmNpcGhlcnRleHQ9QTt3LnBia2RmMlNhbHQ9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkoQyk7dy5wYmtkZjJJdGVyPXg7dy5lbmNyeXB0aW9uU2NoZW1lQWxnPUI7dy5lbmNyeXB0aW9uU2NoZW1lSVY9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocyk7cmV0dXJuIHd9O2lmKHI9PSJQS0NTOFBSViImJnR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgUlNBS2V5JiZhLmlzUHJpdmF0ZT09dHJ1ZSl7dmFyIGQ9cChhKTt2YXIgYz1kLmdldEVuY29kZWRIZXgoKTt2YXIgdD1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50IjowfSx7c2VxOlt7b2lkOntuYW1lOiJyc2FFbmNyeXB0aW9uIn19LHsibnVsbCI6dHJ1ZX1dfSx7b2N0c3RyOntoZXg6Y319XX0pO3ZhciBtPXQuZ2V0RW5jb2RlZEhleCgpO2lmKG89PT11bmRlZmluZWR8fG89PW51bGwpe3JldHVybiB2LkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgobSwiUFJJVkFURSBLRVkiKX1lbHNle3ZhciBrPWgobSxvKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGssIkVOQ1JZUFRFRCBQUklWQVRFIEtFWSIpfX1pZihyPT0iUEtDUzhQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRUNEU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0EmJmEuaXNQcml2YXRlPT10cnVlKXt2YXIgZD1uZXcgS0pVUi5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh7c2VxOlt7ImludCI6MX0se29jdHN0cjp7aGV4OmEucHJ2S2V5SGV4fX0se3RhZzpbImExIix0cnVlLHtiaXRzdHI6e2hleDoiMDAiK2EucHViS2V5SGV4fX1dfV19KTt2YXIgYz1kLmdldEVuY29kZWRIZXgoKTt2YXIgdD1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50IjowfSx7c2VxOlt7b2lkOntuYW1lOiJlY1B1YmxpY0tleSJ9fSx7b2lkOntuYW1lOmEuY3VydmVOYW1lfX1dfSx7b2N0c3RyOntoZXg6Y319XX0pO3ZhciBtPXQuZ2V0RW5jb2RlZEhleCgpO2lmKG89PT11bmRlZmluZWR8fG89PW51bGwpe3JldHVybiB2LkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgobSwiUFJJVkFURSBLRVkiKX1lbHNle3ZhciBrPWgobSxvKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGssIkVOQ1JZUFRFRCBQUklWQVRFIEtFWSIpfX1pZihyPT0iUEtDUzhQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRFNBIT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkRTQSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciBkPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmEueH0pO3ZhciBjPWQuZ2V0RW5jb2RlZEhleCgpO3ZhciB0PUtKVVIuYXNuMS5BU04xVXRpbC5uZXdPYmplY3Qoe3NlcTpbeyJpbnQiOjB9LHtzZXE6W3tvaWQ6e25hbWU6ImRzYSJ9fSx7c2VxOlt7ImludCI6e2JpZ2ludDphLnB9fSx7ImludCI6e2JpZ2ludDphLnF9fSx7ImludCI6e2JpZ2ludDphLmd9fV19XX0se29jdHN0cjp7aGV4OmN9fV19KTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtpZihvPT09dW5kZWZpbmVkfHxvPT1udWxsKXtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIlBSSVZBVEUgS0VZIil9ZWxzZXt2YXIgaz1oKG0sbyk7cmV0dXJuIHYuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChrLCJFTkNSWVBURUQgUFJJVkFURSBLRVkiKX19dGhyb3cidW5zdXBwb3J0ZWQgb2JqZWN0IG5vciBmb3JtYXQifTtLRVlVVElMLmdldEtleUZyb21DU1JQRU09ZnVuY3Rpb24oYil7dmFyIGE9S0VZVVRJTC5nZXRIZXhGcm9tUEVNKGIsIkNFUlRJRklDQVRFIFJFUVVFU1QiKTt2YXIgYz1LRVlVVElMLmdldEtleUZyb21DU1JIZXgoYSk7cmV0dXJuIGN9O0tFWVVUSUwuZ2V0S2V5RnJvbUNTUkhleD1mdW5jdGlvbihhKXt2YXIgYz1LRVlVVElMLnBhcnNlQ1NSSGV4KGEpO3ZhciBiPUtFWVVUSUwuZ2V0S2V5KGMucDhwdWJrZXloZXgsbnVsbCwicGtjczhwdWIiKTtyZXR1cm4gYn07S0VZVVRJTC5wYXJzZUNTUkhleD1mdW5jdGlvbihjKXt2YXIgYj17fTt2YXIgZT1jO2lmKGUuc3Vic3RyKDAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBDU1IoY29kZTowMDEpIn12YXIgZD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihlLDApO2lmKGQubGVuZ3RoPDEpe3Rocm93Im1hbGZvcm1lZCBDU1IoY29kZTowMDIpIn1pZihlLnN1YnN0cihkWzBdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgQ1NSKGNvZGU6MDAzKSJ9dmFyIGE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZSxkWzBdKTtpZihhLmxlbmd0aDwzKXt0aHJvdyJtYWxmb3JtZWQgQ1NSKGNvZGU6MDA0KSJ9Yi5wOHB1YmtleWhleD1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGUsYVsyXSk7cmV0dXJuIGJ9OwovKiEgcnNhcGVtLTEuMS5qcyAoYykgMjAxMiBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KZnVuY3Rpb24gX3JzYXBlbV9wZW1Ub0Jhc2U2NChiKXt2YXIgYT1iO2E9YS5yZXBsYWNlKCItLS0tLUJFR0lOIFJTQSBQUklWQVRFIEtFWS0tLS0tIiwiIik7YT1hLnJlcGxhY2UoIi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tIiwiIik7YT1hLnJlcGxhY2UoL1sgXG5dKy9nLCIiKTtyZXR1cm4gYX1mdW5jdGlvbiBfcnNhcGVtX2dldFBvc0FycmF5T2ZDaGlsZHJlbkZyb21IZXgoZCl7dmFyIGo9bmV3IEFycmF5KCk7dmFyIGs9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihkLDApO3ZhciBmPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGspO3ZhciBoPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGYpO3ZhciBiPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGgpO3ZhciBsPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGIpO3ZhciBlPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGwpO3ZhciBnPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGUpO3ZhciBjPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGcpO3ZhciBpPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGMpO2oucHVzaChrLGYsaCxiLGwsZSxnLGMsaSk7cmV0dXJuIGp9ZnVuY3Rpb24gX3JzYXBlbV9nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXgoaSl7dmFyIG89X3JzYXBlbV9nZXRQb3NBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGkpO3ZhciByPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1swXSk7dmFyIGY9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzFdKTt2YXIgaj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bMl0pO3ZhciBrPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1szXSk7dmFyIGM9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzRdKTt2YXIgYj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bNV0pO3ZhciBoPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1s2XSk7dmFyIGc9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzddKTt2YXIgbD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bOF0pO3ZhciBtPW5ldyBBcnJheSgpO20ucHVzaChyLGYsaixrLGMsYixoLGcsbCk7cmV0dXJuIG19ZnVuY3Rpb24gX3JzYXBlbV9yZWFkUHJpdmF0ZUtleUZyb21BU04xSGV4U3RyaW5nKGMpe3ZhciBiPV9yc2FwZW1fZ2V0SGV4VmFsdWVBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGMpO3RoaXMuc2V0UHJpdmF0ZUV4KGJbMV0sYlsyXSxiWzNdLGJbNF0sYls1XSxiWzZdLGJbN10sYls4XSl9ZnVuY3Rpb24gX3JzYXBlbV9yZWFkUHJpdmF0ZUtleUZyb21QRU1TdHJpbmcoZSl7dmFyIGM9X3JzYXBlbV9wZW1Ub0Jhc2U2NChlKTt2YXIgZD1iNjR0b2hleChjKTt2YXIgYj1fcnNhcGVtX2dldEhleFZhbHVlQXJyYXlPZkNoaWxkcmVuRnJvbUhleChkKTt0aGlzLnNldFByaXZhdGVFeChiWzFdLGJbMl0sYlszXSxiWzRdLGJbNV0sYls2XSxiWzddLGJbOF0pfVJTQUtleS5wcm90b3R5cGUucmVhZFByaXZhdGVLZXlGcm9tUEVNU3RyaW5nPV9yc2FwZW1fcmVhZFByaXZhdGVLZXlGcm9tUEVNU3RyaW5nO1JTQUtleS5wcm90b3R5cGUucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZz1fcnNhcGVtX3JlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmc7Ci8qISByc2FzaWduLTEuMi43LmpzIChjKSAyMDEyIEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwp2YXIgX1JFX0hFWERFQ09OTFk9bmV3IFJlZ0V4cCgiIik7X1JFX0hFWERFQ09OTFkuY29tcGlsZSgiW14wLTlhLWZdIiwiZ2kiKTtmdW5jdGlvbiBfcnNhc2lnbl9nZXRIZXhQYWRkZWREaWdlc3RJbmZvRm9yU3RyaW5nKGQsZSxhKXt2YXIgYj1mdW5jdGlvbihmKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGYsYSl9O3ZhciBjPWIoZCk7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuZ2V0UGFkZGVkRGlnZXN0SW5mb0hleChjLGEsZSl9ZnVuY3Rpb24gX3plcm9QYWRkaW5nT2ZTaWduYXR1cmUoZSxkKXt2YXIgYz0iIjt2YXIgYT1kLzQtZS5sZW5ndGg7Zm9yKHZhciBiPTA7YjxhO2IrKyl7Yz1jKyIwIn1yZXR1cm4gYytlfWZ1bmN0aW9uIF9yc2FzaWduX3NpZ25TdHJpbmcoZCxhKXt2YXIgYj1mdW5jdGlvbihlKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGUsYSl9O3ZhciBjPWIoZCk7cmV0dXJuIHRoaXMuc2lnbldpdGhNZXNzYWdlSGFzaChjLGEpfWZ1bmN0aW9uIF9yc2FzaWduX3NpZ25XaXRoTWVzc2FnZUhhc2goZSxjKXt2YXIgZj1LSlVSLmNyeXB0by5VdGlsLmdldFBhZGRlZERpZ2VzdEluZm9IZXgoZSxjLHRoaXMubi5iaXRMZW5ndGgoKSk7dmFyIGI9cGFyc2VCaWdJbnQoZiwxNik7dmFyIGQ9dGhpcy5kb1ByaXZhdGUoYik7dmFyIGE9ZC50b1N0cmluZygxNik7cmV0dXJuIF96ZXJvUGFkZGluZ09mU2lnbmF0dXJlKGEsdGhpcy5uLmJpdExlbmd0aCgpKX1mdW5jdGlvbiBfcnNhc2lnbl9zaWduU3RyaW5nV2l0aFNIQTEoYSl7cmV0dXJuIF9yc2FzaWduX3NpZ25TdHJpbmcuY2FsbCh0aGlzLGEsInNoYTEiKX1mdW5jdGlvbiBfcnNhc2lnbl9zaWduU3RyaW5nV2l0aFNIQTI1NihhKXtyZXR1cm4gX3JzYXNpZ25fc2lnblN0cmluZy5jYWxsKHRoaXMsYSwic2hhMjU2Iil9ZnVuY3Rpb24gcHNzX21nZjFfc3RyKGMsYSxlKXt2YXIgYj0iIixkPTA7d2hpbGUoYi5sZW5ndGg8YSl7Yis9aGV4dG9yc3RyKGUocnN0cnRvaGV4KGMrU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsWyhkJjQyNzgxOTAwODApPj4yNCwoZCYxNjcxMTY4MCk+PjE2LChkJjY1MjgwKT4+OCxkJjI1NV0pKSkpO2QrPTF9cmV0dXJuIGJ9ZnVuY3Rpb24gX3JzYXNpZ25fc2lnblN0cmluZ1BTUyhlLGEsZCl7dmFyIGM9ZnVuY3Rpb24oZil7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChmLGEpfTt2YXIgYj1jKHJzdHJ0b2hleChlKSk7aWYoZD09PXVuZGVmaW5lZCl7ZD0tMX1yZXR1cm4gdGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoUFNTKGIsYSxkKX1mdW5jdGlvbiBfcnNhc2lnbl9zaWduV2l0aE1lc3NhZ2VIYXNoUFNTKGwsYSxrKXt2YXIgYj1oZXh0b3JzdHIobCk7dmFyIGc9Yi5sZW5ndGg7dmFyIG09dGhpcy5uLmJpdExlbmd0aCgpLTE7dmFyIGM9TWF0aC5jZWlsKG0vOCk7dmFyIGQ7dmFyIG89ZnVuY3Rpb24oaSl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChpLGEpfTtpZihrPT09LTF8fGs9PT11bmRlZmluZWQpe2s9Z31lbHNle2lmKGs9PT0tMil7az1jLWctMn1lbHNle2lmKGs8LTIpe3Rocm93ImludmFsaWQgc2FsdCBsZW5ndGgifX19aWYoYzwoZytrKzIpKXt0aHJvdyJkYXRhIHRvbyBsb25nIn12YXIgZj0iIjtpZihrPjApe2Y9bmV3IEFycmF5KGspO25ldyBTZWN1cmVSYW5kb20oKS5uZXh0Qnl0ZXMoZik7Zj1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxmKX12YXIgbj1oZXh0b3JzdHIobyhyc3RydG9oZXgoIlx4MDBceDAwXHgwMFx4MDBceDAwXHgwMFx4MDBceDAwIitiK2YpKSk7dmFyIGo9W107Zm9yKGQ9MDtkPGMtay1nLTI7ZCs9MSl7altkXT0wfXZhciBlPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGopKyJceDAxIitmO3ZhciBoPXBzc19tZ2YxX3N0cihuLGUubGVuZ3RoLG8pO3ZhciBxPVtdO2ZvcihkPTA7ZDxlLmxlbmd0aDtkKz0xKXtxW2RdPWUuY2hhckNvZGVBdChkKV5oLmNoYXJDb2RlQXQoZCl9dmFyIHA9KDY1MjgwPj4oOCpjLW0pKSYyNTU7cVswXSY9fnA7Zm9yKGQ9MDtkPGc7ZCsrKXtxLnB1c2gobi5jaGFyQ29kZUF0KGQpKX1xLnB1c2goMTg4KTtyZXR1cm4gX3plcm9QYWRkaW5nT2ZTaWduYXR1cmUodGhpcy5kb1ByaXZhdGUobmV3IEJpZ0ludGVnZXIocSkpLnRvU3RyaW5nKDE2KSx0aGlzLm4uYml0TGVuZ3RoKCkpfWZ1bmN0aW9uIF9yc2FzaWduX2dldERlY3J5cHRTaWduYXR1cmVCSShhLGQsYyl7dmFyIGI9bmV3IFJTQUtleSgpO2Iuc2V0UHVibGljKGQsYyk7dmFyIGU9Yi5kb1B1YmxpYyhhKTtyZXR1cm4gZX1mdW5jdGlvbiBfcnNhc2lnbl9nZXRIZXhEaWdlc3RJbmZvRnJvbVNpZyhhLGMsYil7dmFyIGU9X3JzYXNpZ25fZ2V0RGVjcnlwdFNpZ25hdHVyZUJJKGEsYyxiKTt2YXIgZD1lLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLCIiKTtyZXR1cm4gZH1mdW5jdGlvbiBfcnNhc2lnbl9nZXRBbGdOYW1lQW5kSGFzaEZyb21IZXhEaXNnZXN0SW5mbyhmKXtmb3IodmFyIGUgaW4gS0pVUi5jcnlwdG8uVXRpbC5ESUdFU1RJTkZPSEVBRCl7dmFyIGQ9S0pVUi5jcnlwdG8uVXRpbC5ESUdFU1RJTkZPSEVBRFtlXTt2YXIgYj1kLmxlbmd0aDtpZihmLnN1YnN0cmluZygwLGIpPT1kKXt2YXIgYz1bZSxmLnN1YnN0cmluZyhiKV07cmV0dXJuIGN9fXJldHVybltdfWZ1bmN0aW9uIF9yc2FzaWduX3ZlcmlmeVNpZ25hdHVyZVdpdGhBcmdzKGYsYixnLGope3ZhciBlPV9yc2FzaWduX2dldEhleERpZ2VzdEluZm9Gcm9tU2lnKGIsZyxqKTt2YXIgaD1fcnNhc2lnbl9nZXRBbGdOYW1lQW5kSGFzaEZyb21IZXhEaXNnZXN0SW5mbyhlKTtpZihoLmxlbmd0aD09MCl7cmV0dXJuIGZhbHNlfXZhciBkPWhbMF07dmFyIGk9aFsxXTt2YXIgYT1mdW5jdGlvbihrKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGssZCl9O3ZhciBjPWEoZik7cmV0dXJuKGk9PWMpfWZ1bmN0aW9uIF9yc2FzaWduX3ZlcmlmeUhleFNpZ25hdHVyZUZvck1lc3NhZ2UoYyxiKXt2YXIgZD1wYXJzZUJpZ0ludChjLDE2KTt2YXIgYT1fcnNhc2lnbl92ZXJpZnlTaWduYXR1cmVXaXRoQXJncyhiLGQsdGhpcy5uLnRvU3RyaW5nKDE2KSx0aGlzLmUudG9TdHJpbmcoMTYpKTtyZXR1cm4gYX1mdW5jdGlvbiBfcnNhc2lnbl92ZXJpZnlTdHJpbmcoZixqKXtqPWoucmVwbGFjZShfUkVfSEVYREVDT05MWSwiIik7aj1qLnJlcGxhY2UoL1sgXG5dKy9nLCIiKTt2YXIgYj1wYXJzZUJpZ0ludChqLDE2KTtpZihiLmJpdExlbmd0aCgpPnRoaXMubi5iaXRMZW5ndGgoKSl7cmV0dXJuIDB9dmFyIGk9dGhpcy5kb1B1YmxpYyhiKTt2YXIgZT1pLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLCIiKTt2YXIgZz1fcnNhc2lnbl9nZXRBbGdOYW1lQW5kSGFzaEZyb21IZXhEaXNnZXN0SW5mbyhlKTtpZihnLmxlbmd0aD09MCl7cmV0dXJuIGZhbHNlfXZhciBkPWdbMF07dmFyIGg9Z1sxXTt2YXIgYT1mdW5jdGlvbihrKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGssZCl9O3ZhciBjPWEoZik7cmV0dXJuKGg9PWMpfWZ1bmN0aW9uIF9yc2FzaWduX3ZlcmlmeVdpdGhNZXNzYWdlSGFzaChlLGEpe2E9YS5yZXBsYWNlKF9SRV9IRVhERUNPTkxZLCIiKTthPWEucmVwbGFjZSgvWyBcbl0rL2csIiIpO3ZhciBiPXBhcnNlQmlnSW50KGEsMTYpO2lmKGIuYml0TGVuZ3RoKCk+dGhpcy5uLmJpdExlbmd0aCgpKXtyZXR1cm4gMH12YXIgaD10aGlzLmRvUHVibGljKGIpO3ZhciBnPWgudG9TdHJpbmcoMTYpLnJlcGxhY2UoL14xZiswMC8sIiIpO3ZhciBjPV9yc2FzaWduX2dldEFsZ05hbWVBbmRIYXNoRnJvbUhleERpc2dlc3RJbmZvKGcpO2lmKGMubGVuZ3RoPT0wKXtyZXR1cm4gZmFsc2V9dmFyIGQ9Y1swXTt2YXIgZj1jWzFdO3JldHVybihmPT1lKX1mdW5jdGlvbiBfcnNhc2lnbl92ZXJpZnlTdHJpbmdQU1MoYyxiLGEsZil7dmFyIGU9ZnVuY3Rpb24oZyl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChnLGEpfTt2YXIgZD1lKHJzdHJ0b2hleChjKSk7aWYoZj09PXVuZGVmaW5lZCl7Zj0tMX1yZXR1cm4gdGhpcy52ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1MoZCxiLGEsZil9ZnVuY3Rpb24gX3JzYXNpZ25fdmVyaWZ5V2l0aE1lc3NhZ2VIYXNoUFNTKGYscyxsLGMpe3ZhciBrPW5ldyBCaWdJbnRlZ2VyKHMsMTYpO2lmKGsuYml0TGVuZ3RoKCk+dGhpcy5uLmJpdExlbmd0aCgpKXtyZXR1cm4gZmFsc2V9dmFyIHI9ZnVuY3Rpb24oaSl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChpLGwpfTt2YXIgaj1oZXh0b3JzdHIoZik7dmFyIGg9ai5sZW5ndGg7dmFyIGc9dGhpcy5uLmJpdExlbmd0aCgpLTE7dmFyIG09TWF0aC5jZWlsKGcvOCk7dmFyIHE7aWYoYz09PS0xfHxjPT09dW5kZWZpbmVkKXtjPWh9ZWxzZXtpZihjPT09LTIpe2M9bS1oLTJ9ZWxzZXtpZihjPC0yKXt0aHJvdyJpbnZhbGlkIHNhbHQgbGVuZ3RoIn19fWlmKG08KGgrYysyKSl7dGhyb3ciZGF0YSB0b28gbG9uZyJ9dmFyIGE9dGhpcy5kb1B1YmxpYyhrKS50b0J5dGVBcnJheSgpO2ZvcihxPTA7cTxhLmxlbmd0aDtxKz0xKXthW3FdJj0yNTV9d2hpbGUoYS5sZW5ndGg8bSl7YS51bnNoaWZ0KDApfWlmKGFbbS0xXSE9PTE4OCl7dGhyb3ciZW5jb2RlZCBtZXNzYWdlIGRvZXMgbm90IGVuZCBpbiAweGJjIn1hPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGEpO3ZhciBkPWEuc3Vic3RyKDAsbS1oLTEpO3ZhciBlPWEuc3Vic3RyKGQubGVuZ3RoLGgpO3ZhciBwPSg2NTI4MD4+KDgqbS1nKSkmMjU1O2lmKChkLmNoYXJDb2RlQXQoMCkmcCkhPT0wKXt0aHJvdyJiaXRzIGJleW9uZCBrZXlzaXplIG5vdCB6ZXJvIn12YXIgbj1wc3NfbWdmMV9zdHIoZSxkLmxlbmd0aCxyKTt2YXIgbz1bXTtmb3IocT0wO3E8ZC5sZW5ndGg7cSs9MSl7b1txXT1kLmNoYXJDb2RlQXQocSlebi5jaGFyQ29kZUF0KHEpfW9bMF0mPX5wO3ZhciBiPW0taC1jLTI7Zm9yKHE9MDtxPGI7cSs9MSl7aWYob1txXSE9PTApe3Rocm93ImxlZnRtb3N0IG9jdGV0cyBub3QgemVybyJ9fWlmKG9bYl0hPT0xKXt0aHJvdyIweDAxIG1hcmtlciBub3QgZm91bmQifXJldHVybiBlPT09aGV4dG9yc3RyKHIocnN0cnRvaGV4KCJceDAwXHgwMFx4MDBceDAwXHgwMFx4MDBceDAwXHgwMCIraitTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxvLnNsaWNlKC1jKSkpKSl9UlNBS2V5LnByb3RvdHlwZS5zaWduV2l0aE1lc3NhZ2VIYXNoPV9yc2FzaWduX3NpZ25XaXRoTWVzc2FnZUhhc2g7UlNBS2V5LnByb3RvdHlwZS5zaWduU3RyaW5nPV9yc2FzaWduX3NpZ25TdHJpbmc7UlNBS2V5LnByb3RvdHlwZS5zaWduU3RyaW5nV2l0aFNIQTE9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEExO1JTQUtleS5wcm90b3R5cGUuc2lnblN0cmluZ1dpdGhTSEEyNTY9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEEyNTY7UlNBS2V5LnByb3RvdHlwZS5zaWduPV9yc2FzaWduX3NpZ25TdHJpbmc7UlNBS2V5LnByb3RvdHlwZS5zaWduV2l0aFNIQTE9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEExO1JTQUtleS5wcm90b3R5cGUuc2lnbldpdGhTSEEyNTY9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEEyNTY7UlNBS2V5LnByb3RvdHlwZS5zaWduV2l0aE1lc3NhZ2VIYXNoUFNTPV9yc2FzaWduX3NpZ25XaXRoTWVzc2FnZUhhc2hQU1M7UlNBS2V5LnByb3RvdHlwZS5zaWduU3RyaW5nUFNTPV9yc2FzaWduX3NpZ25TdHJpbmdQU1M7UlNBS2V5LnByb3RvdHlwZS5zaWduUFNTPV9yc2FzaWduX3NpZ25TdHJpbmdQU1M7UlNBS2V5LlNBTFRfTEVOX0hMRU49LTE7UlNBS2V5LlNBTFRfTEVOX01BWD0tMjtSU0FLZXkucHJvdG90eXBlLnZlcmlmeVdpdGhNZXNzYWdlSGFzaD1fcnNhc2lnbl92ZXJpZnlXaXRoTWVzc2FnZUhhc2g7UlNBS2V5LnByb3RvdHlwZS52ZXJpZnlTdHJpbmc9X3JzYXNpZ25fdmVyaWZ5U3RyaW5nO1JTQUtleS5wcm90b3R5cGUudmVyaWZ5SGV4U2lnbmF0dXJlRm9yTWVzc2FnZT1fcnNhc2lnbl92ZXJpZnlIZXhTaWduYXR1cmVGb3JNZXNzYWdlO1JTQUtleS5wcm90b3R5cGUudmVyaWZ5PV9yc2FzaWduX3ZlcmlmeVN0cmluZztSU0FLZXkucHJvdG90eXBlLnZlcmlmeUhleFNpZ25hdHVyZUZvckJ5dGVBcnJheU1lc3NhZ2U9X3JzYXNpZ25fdmVyaWZ5SGV4U2lnbmF0dXJlRm9yTWVzc2FnZTtSU0FLZXkucHJvdG90eXBlLnZlcmlmeVdpdGhNZXNzYWdlSGFzaFBTUz1fcnNhc2lnbl92ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1M7UlNBS2V5LnByb3RvdHlwZS52ZXJpZnlTdHJpbmdQU1M9X3JzYXNpZ25fdmVyaWZ5U3RyaW5nUFNTO1JTQUtleS5wcm90b3R5cGUudmVyaWZ5UFNTPV9yc2FzaWduX3ZlcmlmeVN0cmluZ1BTUztSU0FLZXkuU0FMVF9MRU5fUkVDT1ZFUj0tMjsKLyohIHg1MDktMS4xLjYuanMgKGMpIDIwMTItMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KZnVuY3Rpb24gWDUwOSgpe3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQT1udWxsO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oTj1udWxsO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oRT1udWxsO3RoaXMuaGV4PW51bGw7dGhpcy5nZXRTZXJpYWxOdW1iZXJIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhWQnlOdGhMaXN0KHRoaXMuaGV4LDAsWzAsMV0pfTt0aGlzLmdldElzc3VlckhleD1mdW5jdGlvbigpe3JldHVybiBBU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdCh0aGlzLmhleCwwLFswLDNdKX07dGhpcy5nZXRJc3N1ZXJTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gWDUwOS5oZXgyZG4oQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3QodGhpcy5oZXgsMCxbMCwzXSkpfTt0aGlzLmdldFN1YmplY3RIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3QodGhpcy5oZXgsMCxbMCw1XSl9O3RoaXMuZ2V0U3ViamVjdFN0cmluZz1mdW5jdGlvbigpe3JldHVybiBYNTA5LmhleDJkbihBU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdCh0aGlzLmhleCwwLFswLDVdKSl9O3RoaXMuZ2V0Tm90QmVmb3JlPWZ1bmN0aW9uKCl7dmFyIGE9QVNOMUhFWC5nZXREZWNlbmRhbnRIZXhWQnlOdGhMaXN0KHRoaXMuaGV4LDAsWzAsNCwwXSk7YT1hLnJlcGxhY2UoLyguLikvZywiJSQxIik7YT1kZWNvZGVVUklDb21wb25lbnQoYSk7cmV0dXJuIGF9O3RoaXMuZ2V0Tm90QWZ0ZXI9ZnVuY3Rpb24oKXt2YXIgYT1BU04xSEVYLmdldERlY2VuZGFudEhleFZCeU50aExpc3QodGhpcy5oZXgsMCxbMCw0LDFdKTthPWEucmVwbGFjZSgvKC4uKS9nLCIlJDEiKTthPWRlY29kZVVSSUNvbXBvbmVudChhKTtyZXR1cm4gYX07dGhpcy5yZWFkQ2VydFBFTT1mdW5jdGlvbihjKXt2YXIgZT1YNTA5LnBlbVRvSGV4KGMpO3ZhciBiPVg1MDkuZ2V0UHVibGljS2V5SGV4QXJyYXlGcm9tQ2VydEhleChlKTt2YXIgZD1uZXcgUlNBS2V5KCk7ZC5zZXRQdWJsaWMoYlswXSxiWzFdKTt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0E9ZDt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0FfaE49YlswXTt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0FfaEU9YlsxXTt0aGlzLmhleD1lfTt0aGlzLnJlYWRDZXJ0UEVNV2l0aG91dFJTQUluaXQ9ZnVuY3Rpb24oYyl7dmFyIGQ9WDUwOS5wZW1Ub0hleChjKTt2YXIgYj1YNTA5LmdldFB1YmxpY0tleUhleEFycmF5RnJvbUNlcnRIZXgoZCk7dGhpcy5zdWJqZWN0UHVibGljS2V5UlNBLnNldFB1YmxpYyhiWzBdLGJbMV0pO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oTj1iWzBdO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oRT1iWzFdO3RoaXMuaGV4PWR9fVg1MDkucGVtVG9CYXNlNjQ9ZnVuY3Rpb24oYSl7dmFyIGI9YTtiPWIucmVwbGFjZSgiLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tIiwiIik7Yj1iLnJlcGxhY2UoIi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0iLCIiKTtiPWIucmVwbGFjZSgvWyBcbl0rL2csIiIpO3JldHVybiBifTtYNTA5LnBlbVRvSGV4PWZ1bmN0aW9uKGEpe3ZhciBjPVg1MDkucGVtVG9CYXNlNjQoYSk7dmFyIGI9YjY0dG9oZXgoYyk7cmV0dXJuIGJ9O1g1MDkuZ2V0U3ViamVjdFB1YmxpY0tleVBvc0Zyb21DZXJ0SGV4PWZ1bmN0aW9uKGYpe3ZhciBlPVg1MDkuZ2V0U3ViamVjdFB1YmxpY0tleUluZm9Qb3NGcm9tQ2VydEhleChmKTtpZihlPT0tMSl7cmV0dXJuIC0xfXZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGYsZSk7aWYoYi5sZW5ndGghPTIpe3JldHVybiAtMX12YXIgZD1iWzFdO2lmKGYuc3Vic3RyaW5nKGQsZCsyKSE9IjAzIil7cmV0dXJuIC0xfXZhciBjPUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmooZixkKTtpZihmLnN1YnN0cmluZyhjLGMrMikhPSIwMCIpe3JldHVybiAtMX1yZXR1cm4gYysyfTtYNTA5LmdldFN1YmplY3RQdWJsaWNLZXlJbmZvUG9zRnJvbUNlcnRIZXg9ZnVuY3Rpb24oZCl7dmFyIGM9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihkLDApO3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGQsYyk7aWYoYi5sZW5ndGg8MSl7cmV0dXJuIC0xfWlmKGQuc3Vic3RyaW5nKGJbMF0sYlswXSsxMCk9PSJhMDAzMDIwMTAyIil7aWYoYi5sZW5ndGg8Nil7cmV0dXJuIC0xfXJldHVybiBiWzZdfWVsc2V7aWYoYi5sZW5ndGg8NSl7cmV0dXJuIC0xfXJldHVybiBiWzVdfX07WDUwOS5nZXRQdWJsaWNLZXlIZXhBcnJheUZyb21DZXJ0SGV4PWZ1bmN0aW9uKGYpe3ZhciBlPVg1MDkuZ2V0U3ViamVjdFB1YmxpY0tleVBvc0Zyb21DZXJ0SGV4KGYpO3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGYsZSk7aWYoYi5sZW5ndGghPTIpe3JldHVybltdfXZhciBkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGYsYlswXSk7dmFyIGM9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZixiWzFdKTtpZihkIT1udWxsJiZjIT1udWxsKXtyZXR1cm5bZCxjXX1lbHNle3JldHVybltdfX07WDUwOS5nZXRIZXhUYnNDZXJ0aWZpY2F0ZUZyb21DZXJ0PWZ1bmN0aW9uKGIpe3ZhciBhPUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmooYiwwKTtyZXR1cm4gYX07WDUwOS5nZXRQdWJsaWNLZXlIZXhBcnJheUZyb21DZXJ0UEVNPWZ1bmN0aW9uKGMpe3ZhciBkPVg1MDkucGVtVG9IZXgoYyk7dmFyIGI9WDUwOS5nZXRQdWJsaWNLZXlIZXhBcnJheUZyb21DZXJ0SGV4KGQpO3JldHVybiBifTtYNTA5LmhleDJkbj1mdW5jdGlvbihlKXt2YXIgZj0iIjt2YXIgYz1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihlLDApO2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgYj1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGUsY1tkXSk7Zj1mKyIvIitYNTA5LmhleDJyZG4oYil9cmV0dXJuIGZ9O1g1MDkuaGV4MnJkbj1mdW5jdGlvbihhKXt2YXIgZj1BU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdChhLDAsWzAsMF0pO3ZhciBlPUFTTjFIRVguZ2V0RGVjZW5kYW50SGV4VkJ5TnRoTGlzdChhLDAsWzAsMV0pO3ZhciBjPSIiO3RyeXtjPVg1MDkuRE5fQVRUUkhFWFtmXX1jYXRjaChiKXtjPWZ9ZT1lLnJlcGxhY2UoLyguLikvZywiJSQxIik7dmFyIGQ9ZGVjb2RlVVJJQ29tcG9uZW50KGUpO3JldHVybiBjKyI9IitkfTtYNTA5LkROX0FUVFJIRVg9eyIwNjAzNTUwNDA2IjoiQyIsIjA2MDM1NTA0MGEiOiJPIiwiMDYwMzU1MDQwYiI6Ik9VIiwiMDYwMzU1MDQwMyI6IkNOIiwiMDYwMzU1MDQwNSI6IlNOIiwiMDYwMzU1MDQwOCI6IlNUIiwiMDYwMzU1MDQwNyI6IkwiLH07WDUwOS5nZXRQdWJsaWNLZXlGcm9tQ2VydFBFTT1mdW5jdGlvbihmKXt2YXIgYz1YNTA5LmdldFB1YmxpY0tleUluZm9Qcm9wT2ZDZXJ0UEVNKGYpO2lmKGMuYWxnb2lkPT0iMmE4NjQ4ODZmNzBkMDEwMTAxIil7dmFyIGk9S0VZVVRJTC5wYXJzZVB1YmxpY1Jhd1JTQUtleUhleChjLmtleWhleCk7dmFyIGo9bmV3IFJTQUtleSgpO2ouc2V0UHVibGljKGkubixpLmUpO3JldHVybiBqfWVsc2V7aWYoYy5hbGdvaWQ9PSIyYTg2NDhjZTNkMDIwMSIpe3ZhciBlPUtKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVtjLmFsZ3BhcmFtXTt2YXIgaj1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOmUsaW5mbzpjLmtleWhleH0pO2ouc2V0UHVibGljS2V5SGV4KGMua2V5aGV4KTtyZXR1cm4gan1lbHNle2lmKGMuYWxnb2lkPT0iMmE4NjQ4Y2UzODA0MDEiKXt2YXIgYj1BU04xSEVYLmdldFZieUxpc3QoYy5hbGdwYXJhbSwwLFswXSwiMDIiKTt2YXIgYT1BU04xSEVYLmdldFZieUxpc3QoYy5hbGdwYXJhbSwwLFsxXSwiMDIiKTt2YXIgZD1BU04xSEVYLmdldFZieUxpc3QoYy5hbGdwYXJhbSwwLFsyXSwiMDIiKTt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihjLmtleWhleCwwKTtoPWguc3Vic3RyKDIpO3ZhciBqPW5ldyBLSlVSLmNyeXB0by5EU0EoKTtqLnNldFB1YmxpYyhuZXcgQmlnSW50ZWdlcihiLDE2KSxuZXcgQmlnSW50ZWdlcihhLDE2KSxuZXcgQmlnSW50ZWdlcihkLDE2KSxuZXcgQmlnSW50ZWdlcihoLDE2KSk7cmV0dXJuIGp9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBrZXkifX19fTtYNTA5LmdldFB1YmxpY0tleUluZm9Qcm9wT2ZDZXJ0UEVNPWZ1bmN0aW9uKGUpe3ZhciBjPXt9O2MuYWxncGFyYW09bnVsbDt2YXIgZz1YNTA5LnBlbVRvSGV4KGUpO3ZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGcsMCk7aWYoZC5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAxKSJ9aWYoZy5zdWJzdHIoZFswXSwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDIpIn12YXIgYj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihnLGRbMF0pO2lmKGIubGVuZ3RoPDcpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAzKSJ9dmFyIGg9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxiWzZdKTtpZihoLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDQpIn12YXIgZj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihnLGhbMF0pO2lmKGYubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwNSkifWMuYWxnb2lkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGcsZlswXSk7aWYoZy5zdWJzdHIoZlsxXSwyKT09IjA2Iil7Yy5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihnLGZbMV0pfWVsc2V7aWYoZy5zdWJzdHIoZlsxXSwyKT09IjMwIil7Yy5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGcsZlsxXSl9fWlmKGcuc3Vic3RyKGhbMV0sMikhPSIwMyIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDA2KSJ9dmFyIGE9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxoWzFdKTtjLmtleWhleD1hLnN1YnN0cigyKTtyZXR1cm4gY307WDUwOS5nZXRQdWJsaWNLZXlJbmZvUG9zT2ZDZXJ0SEVYPWZ1bmN0aW9uKGMpe3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGMsMCk7aWYoYi5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAxKSJ9aWYoYy5zdWJzdHIoYlswXSwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDIpIn12YXIgYT1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihjLGJbMF0pO2lmKGEubGVuZ3RoPDcpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAzKSJ9cmV0dXJuIGFbNl19O1g1MDkuZ2V0VjNFeHRJbmZvTGlzdE9mQ2VydEhleD1mdW5jdGlvbihnKXt2YXIgYj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihnLDApO2lmKGIubGVuZ3RoIT0zKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwMSkifWlmKGcuc3Vic3RyKGJbMF0sMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAyKSJ9dmFyIGE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxiWzBdKTtpZihhLmxlbmd0aDw4KXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwMykifWlmKGcuc3Vic3RyKGFbN10sMikhPSJhMyIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDA0KSJ9dmFyIGg9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxhWzddKTtpZihoLmxlbmd0aCE9MSl7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDUpIn1pZihnLnN1YnN0cihoWzBdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwNikifXZhciBmPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGcsaFswXSk7dmFyIGU9Zi5sZW5ndGg7dmFyIGQ9bmV3IEFycmF5KGUpO2Zvcih2YXIgYz0wO2M8ZTtjKyspe2RbY109WDUwOS5nZXRWM0V4dEl0ZW1JbmZvX0F0T2JqKGcsZltjXSl9cmV0dXJuIGR9O1g1MDkuZ2V0VjNFeHRJdGVtSW5mb19BdE9iaj1mdW5jdGlvbihmLGcpe3ZhciBlPXt9O2UucG9zVExWPWc7dmFyIGI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZixnKTtpZihiLmxlbmd0aCE9MiYmYi5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBYLjUwOXYzIEV4dCAoY29kZTowMDEpIn1pZihmLnN1YnN0cihiWzBdLDIpIT0iMDYiKXt0aHJvdyJtYWxmb3JtZWQgWC41MDl2MyBFeHQgKGNvZGU6MDAyKSJ9dmFyIGQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZixiWzBdKTtlLm9pZD1BU04xSEVYLmhleHRvb2lkc3RyKGQpO2UuY3JpdGljYWw9ZmFsc2U7aWYoYi5sZW5ndGg9PTMpe2UuY3JpdGljYWw9dHJ1ZX12YXIgYz1iW2IubGVuZ3RoLTFdO2lmKGYuc3Vic3RyKGMsMikhPSIwNCIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOXYzIEV4dCAoY29kZTowMDMpIn1lLnBvc1Y9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihmLGMpO3JldHVybiBlfTtYNTA5LmdldEhleE9mVExWX1YzRXh0VmFsdWU9ZnVuY3Rpb24oYixhKXt2YXIgYz1YNTA5LmdldFBvc09mVExWX1YzRXh0VmFsdWUoYixhKTtpZihjPT0tMSl7cmV0dXJuIiJ9cmV0dXJuIEFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooYixjKX07WDUwOS5nZXRIZXhPZlZfVjNFeHRWYWx1ZT1mdW5jdGlvbihiLGEpe3ZhciBjPVg1MDkuZ2V0UG9zT2ZUTFZfVjNFeHRWYWx1ZShiLGEpO2lmKGM9PS0xKXtyZXR1cm4iIn1yZXR1cm4gQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooYixjKX07WDUwOS5nZXRQb3NPZlRMVl9WM0V4dFZhbHVlPWZ1bmN0aW9uKGYsYil7dmFyIGQ9YjtpZighYi5tYXRjaCgvXlswLTkuXSskLykpe2Q9S0pVUi5hc24xLng1MDkuT0lELm5hbWUyb2lkKGIpfWlmKGQ9PSIiKXtyZXR1cm4gLTF9dmFyIGM9WDUwOS5nZXRWM0V4dEluZm9MaXN0T2ZDZXJ0SGV4KGYpO2Zvcih2YXIgYT0wO2E8Yy5sZW5ndGg7YSsrKXt2YXIgZT1jW2FdO2lmKGUub2lkPT1kKXtyZXR1cm4gZS5wb3NWfX1yZXR1cm4gLTF9O1g1MDkuS0VZVVNBR0VfTkFNRT1bImRpZ2l0YWxTaWduYXR1cmUiLCJub25SZXB1ZGlhdGlvbiIsImtleUVuY2lwaGVybWVudCIsImRhdGFFbmNpcGhlcm1lbnQiLCJrZXlBZ3JlZW1lbnQiLCJrZXlDZXJ0U2lnbiIsImNSTFNpZ24iLCJlbmNpcGhlck9ubHkiLCJkZWNpcGhlck9ubHkiXTtYNTA5LmdldEV4dEtleVVzYWdlQmluPWZ1bmN0aW9uKGQpe3ZhciBiPVg1MDkuZ2V0SGV4T2ZWX1YzRXh0VmFsdWUoZCwia2V5VXNhZ2UiKTtpZihiPT0iIil7cmV0dXJuIiJ9aWYoYi5sZW5ndGglMiE9MHx8Yi5sZW5ndGg8PTIpe3Rocm93Im1hbGZvcm1lZCBrZXkgdXNhZ2UgdmFsdWUifXZhciBhPXBhcnNlSW50KGIuc3Vic3RyKDAsMikpO3ZhciBjPXBhcnNlSW50KGIuc3Vic3RyKDIpLDE2KS50b1N0cmluZygyKTtyZXR1cm4gYy5zdWJzdHIoMCxjLmxlbmd0aC1hKX07WDUwOS5nZXRFeHRLZXlVc2FnZVN0cmluZz1mdW5jdGlvbihlKXt2YXIgZD1YNTA5LmdldEV4dEtleVVzYWdlQmluKGUpO3ZhciBiPW5ldyBBcnJheSgpO2Zvcih2YXIgYz0wO2M8ZC5sZW5ndGg7YysrKXtpZihkLnN1YnN0cihjLDEpPT0iMSIpe2IucHVzaChYNTA5LktFWVVTQUdFX05BTUVbY10pfX1yZXR1cm4gYi5qb2luKCIsIil9O1g1MDkuZ2V0RXh0QUlBSW5mbz1mdW5jdGlvbihnKXt2YXIgaj17fTtqLm9jc3A9W107ai5jYWlzc3Vlcj1bXTt2YXIgaD1YNTA5LmdldFBvc09mVExWX1YzRXh0VmFsdWUoZywiYXV0aG9yaXR5SW5mb0FjY2VzcyIpO2lmKGg9PS0xKXtyZXR1cm4gbnVsbH1pZihnLnN1YnN0cihoLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgQUlBIEV4dG4gVmFsdWUifXZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGcsaCk7Zm9yKHZhciBjPTA7YzxkLmxlbmd0aDtjKyspe3ZhciBhPWRbY107dmFyIGI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxhKTtpZihiLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIEFjY2Vzc0Rlc2NyaXB0aW9uIG9mIEFJQSBFeHRuIn12YXIgZT1iWzBdO3ZhciBmPWJbMV07aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxlKT09IjJiMDYwMTA1MDUwNzMwMDEiKXtpZihnLnN1YnN0cihmLDIpPT0iODYiKXtqLm9jc3AucHVzaChoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxmKSkpfX1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaihnLGUpPT0iMmIwNjAxMDUwNTA3MzAwMiIpe2lmKGcuc3Vic3RyKGYsMik9PSI4NiIpe2ouY2Fpc3N1ZXIucHVzaChoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxmKSkpfX19cmV0dXJuIGp9OwovKiEgTWlrZSBTYW11ZWwgKGMpIDIwMDkgfCBjb2RlLmdvb2dsZS5jb20vcC9qc29uLXNhbnMtZXZhbAogKi8KdmFyIGpzb25QYXJzZT0oZnVuY3Rpb24oKXt2YXIgZT0iKD86LT9cXGIoPzowfFsxLTldWzAtOV0qKSg/OlxcLlswLTldKyk/KD86W2VFXVsrLV0/WzAtOV0rKT9cXGIpIjt2YXIgaj0nKD86W15cXDAtXFx4MDhcXHgwYS1cXHgxZiJcXFxcXXxcXFxcKD86WyIvXFxcXGJmbnJ0XXx1WzAtOUEtRmEtZl17NH0pKSc7dmFyIGk9Jyg/OiInK2orJyoiKSc7dmFyIGQ9bmV3IFJlZ0V4cCgiKD86ZmFsc2V8dHJ1ZXxudWxsfFtcXHtcXH1cXFtcXF1dfCIrZSsifCIraSsiKSIsImciKTt2YXIgaz1uZXcgUmVnRXhwKCJcXFxcKD86KFtedV0pfHUoLns0fSkpIiwiZyIpO3ZhciBnPXsnIic6JyInLCIvIjoiLyIsIlxcIjoiXFwiLGI6IlxiIixmOiJcZiIsbjoiXG4iLHI6IlxyIix0OiJcdCJ9O2Z1bmN0aW9uIGgobCxtLG4pe3JldHVybiBtP2dbbV06U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChuLDE2KSl9dmFyIGM9bmV3IFN0cmluZygiIik7dmFyIGE9IlxcIjt2YXIgZj17InsiOk9iamVjdCwiWyI6QXJyYXl9O3ZhciBiPU9iamVjdC5oYXNPd25Qcm9wZXJ0eTtyZXR1cm4gZnVuY3Rpb24odSxxKXt2YXIgcD11Lm1hdGNoKGQpO3ZhciB4O3ZhciB2PXBbMF07dmFyIGw9ZmFsc2U7aWYoInsiPT09dil7eD17fX1lbHNle2lmKCJbIj09PXYpe3g9W119ZWxzZXt4PVtdO2w9dHJ1ZX19dmFyIHQ7dmFyIHI9W3hdO2Zvcih2YXIgbz0xLWwsbT1wLmxlbmd0aDtvPG07KytvKXt2PXBbb107dmFyIHc7c3dpdGNoKHYuY2hhckNvZGVBdCgwKSl7ZGVmYXVsdDp3PXJbMF07d1t0fHx3Lmxlbmd0aF09Kyh2KTt0PXZvaWQgMDticmVhaztjYXNlIDM0OnY9di5zdWJzdHJpbmcoMSx2Lmxlbmd0aC0xKTtpZih2LmluZGV4T2YoYSkhPT0tMSl7dj12LnJlcGxhY2UoayxoKX13PXJbMF07aWYoIXQpe2lmKHcgaW5zdGFuY2VvZiBBcnJheSl7dD13Lmxlbmd0aH1lbHNle3Q9dnx8YzticmVha319d1t0XT12O3Q9dm9pZCAwO2JyZWFrO2Nhc2UgOTE6dz1yWzBdO3IudW5zaGlmdCh3W3R8fHcubGVuZ3RoXT1bXSk7dD12b2lkIDA7YnJlYWs7Y2FzZSA5MzpyLnNoaWZ0KCk7YnJlYWs7Y2FzZSAxMDI6dz1yWzBdO3dbdHx8dy5sZW5ndGhdPWZhbHNlO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTEwOnc9clswXTt3W3R8fHcubGVuZ3RoXT1udWxsO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTE2Onc9clswXTt3W3R8fHcubGVuZ3RoXT10cnVlO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTIzOnc9clswXTtyLnVuc2hpZnQod1t0fHx3Lmxlbmd0aF09e30pO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTI1OnIuc2hpZnQoKTticmVha319aWYobCl7aWYoci5sZW5ndGghPT0xKXt0aHJvdyBuZXcgRXJyb3IoKX14PXhbMF19ZWxzZXtpZihyLmxlbmd0aCl7dGhyb3cgbmV3IEVycm9yKCl9fWlmKHEpe3ZhciBzPWZ1bmN0aW9uKEMsQil7dmFyIEQ9Q1tCXTtpZihEJiZ0eXBlb2YgRD09PSJvYmplY3QiKXt2YXIgbj1udWxsO2Zvcih2YXIgeiBpbiBEKXtpZihiLmNhbGwoRCx6KSYmRCE9PUMpe3ZhciB5PXMoRCx6KTtpZih5IT09dm9pZCAwKXtEW3pdPXl9ZWxzZXtpZighbil7bj1bXX1uLnB1c2goeil9fX1pZihuKXtmb3IodmFyIEE9bi5sZW5ndGg7LS1BPj0wOyl7ZGVsZXRlIERbbltBXV19fX1yZXR1cm4gcS5jYWxsKEMsQixEKX07eD1zKHsiIjp4fSwiIil9cmV0dXJuIHh9fSkoKTsKLyohIGp3cy0zLjMuMyAoYykgMjAxMy0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmp3cz09InVuZGVmaW5lZCJ8fCFLSlVSLmp3cyl7S0pVUi5qd3M9e319S0pVUi5qd3MuSldTPWZ1bmN0aW9uKCl7dmFyIGE9S0pVUi5qd3MuSldTO3RoaXMucGFyc2VKV1M9ZnVuY3Rpb24oZSxnKXtpZigodGhpcy5wYXJzZWRKV1MhPT11bmRlZmluZWQpJiYoZ3x8KHRoaXMucGFyc2VkSldTLnNpZ3ZhbEghPT11bmRlZmluZWQpKSl7cmV0dXJufWlmKGUubWF0Y2goL14oW14uXSspXC4oW14uXSspXC4oW14uXSspJC8pPT1udWxsKXt0aHJvdyJKV1Mgc2lnbmF0dXJlIGlzIG5vdCBhIGZvcm0gb2YgJ0hlYWQuUGF5bG9hZC5TaWdWYWx1ZScuIn12YXIgaD1SZWdFeHAuJDE7dmFyIGM9UmVnRXhwLiQyO3ZhciBpPVJlZ0V4cC4kMzt2YXIgaz1oKyIuIitjO3RoaXMucGFyc2VkSldTPXt9O3RoaXMucGFyc2VkSldTLmhlYWRCNjRVPWg7dGhpcy5wYXJzZWRKV1MucGF5bG9hZEI2NFU9Yzt0aGlzLnBhcnNlZEpXUy5zaWd2YWxCNjRVPWk7dGhpcy5wYXJzZWRKV1Muc2k9aztpZighZyl7dmFyIGY9YjY0dXRvaGV4KGkpO3ZhciBkPXBhcnNlQmlnSW50KGYsMTYpO3RoaXMucGFyc2VkSldTLnNpZ3ZhbEg9Zjt0aGlzLnBhcnNlZEpXUy5zaWd2YWxCST1kfXZhciBiPWI2NHV0b3V0ZjgoaCk7dmFyIGo9YjY0dXRvdXRmOChjKTt0aGlzLnBhcnNlZEpXUy5oZWFkUz1iO3RoaXMucGFyc2VkSldTLnBheWxvYWRTPWo7aWYoIWEuaXNTYWZlSlNPTlN0cmluZyhiLHRoaXMucGFyc2VkSldTLCJoZWFkUCIpKXt0aHJvdyJtYWxmb3JtZWQgSlNPTiBzdHJpbmcgZm9yIEpXUyBIZWFkOiAiK2J9fX07S0pVUi5qd3MuSldTLnNpZ249ZnVuY3Rpb24oYSxpLGMsbSxsKXt2YXIgaz1LSlVSLmp3cy5KV1M7dmFyIHEsZSxqO2lmKHR5cGVvZiBpIT0ic3RyaW5nIiYmdHlwZW9mIGkhPSJvYmplY3QiKXt0aHJvdyJzcEhlYWRlciBtdXN0IGJlIEpTT04gc3RyaW5nIG9yIG9iamVjdDogIitpfWlmKHR5cGVvZiBpPT0ib2JqZWN0Iil7ZT1pO3E9SlNPTi5zdHJpbmdpZnkoZSl9aWYodHlwZW9mIGk9PSJzdHJpbmciKXtxPWk7aWYoIWsuaXNTYWZlSlNPTlN0cmluZyhxKSl7dGhyb3ciSldTIEhlYWQgaXMgbm90IHNhZmUgSlNPTiBzdHJpbmc6ICIrcX1lPWsucmVhZFNhZmVKU09OU3RyaW5nKHEpfWo9YztpZih0eXBlb2YgYz09Im9iamVjdCIpe2o9SlNPTi5zdHJpbmdpZnkoYyl9aWYoKGE9PSIifHxhPT1udWxsKSYmZS5hbGchPT11bmRlZmluZWQpe2E9ZS5hbGd9aWYoKGEhPSIiJiZhIT1udWxsKSYmZS5hbGc9PT11bmRlZmluZWQpe2UuYWxnPWE7cT1KU09OLnN0cmluZ2lmeShlKX1pZihhIT09ZS5hbGcpe3Rocm93ImFsZyBhbmQgc0hlYWRlci5hbGcgZG9lc24ndCBtYXRjaDogIithKyIhPSIrZS5hbGd9dmFyIGQ9bnVsbDtpZihrLmp3c2FsZzJzaWdhbGdbYV09PT11bmRlZmluZWQpe3Rocm93InVuc3VwcG9ydGVkIGFsZyBuYW1lOiAiK2F9ZWxzZXtkPWsuandzYWxnMnNpZ2FsZ1thXX12YXIgYj11dGY4dG9iNjR1KHEpO3ZhciBnPXV0Zjh0b2I2NHUoaik7dmFyIG89YisiLiIrZzt2YXIgbj0iIjtpZihkLnN1YnN0cigwLDQpPT0iSG1hYyIpe2lmKG09PT11bmRlZmluZWQpe3Rocm93Im1hYyBrZXkgc2hhbGwgYmUgc3BlY2lmaWVkIGZvciBIUyogYWxnIn12YXIgaD1uZXcgS0pVUi5jcnlwdG8uTWFjKHthbGc6ZCxwcm92OiJjcnlwdG9qcyIscGFzczptfSk7aC51cGRhdGVTdHJpbmcobyk7bj1oLmRvRmluYWwoKX1lbHNle2lmKGQuaW5kZXhPZigid2l0aEVDRFNBIikhPS0xKXt2YXIgcD1uZXcgS0pVUi5jcnlwdG8uU2lnbmF0dXJlKHthbGc6ZH0pO3AuaW5pdChtLGwpO3AudXBkYXRlU3RyaW5nKG8pO2hBU04xU2lnPXAuc2lnbigpO249S0pVUi5jcnlwdG8uRUNEU0EuYXNuMVNpZ1RvQ29uY2F0U2lnKGhBU04xU2lnKX1lbHNle2lmKGQhPSJub25lIil7dmFyIHA9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOmR9KTtwLmluaXQobSxsKTtwLnVwZGF0ZVN0cmluZyhvKTtuPXAuc2lnbigpfX19dmFyIGY9aGV4dG9iNjR1KG4pO3JldHVybiBvKyIuIitmfTtLSlVSLmp3cy5KV1MudmVyaWZ5PWZ1bmN0aW9uKHAsdCxqKXt2YXIgbT1LSlVSLmp3cy5KV1M7dmFyIHE9cC5zcGxpdCgiLiIpO3ZhciBkPXFbMF07dmFyIGw9cVsxXTt2YXIgYj1kKyIuIitsO3ZhciByPWI2NHV0b2hleChxWzJdKTt2YXIgaT1tLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KHFbMF0pKTt2YXIgaD1udWxsO3ZhciBzPW51bGw7aWYoaS5hbGc9PT11bmRlZmluZWQpe3Rocm93ImFsZ29yaXRobSBub3Qgc3BlY2lmaWVkIGluIGhlYWRlciJ9ZWxzZXtoPWkuYWxnO3M9aC5zdWJzdHIoMCwyKX1pZihqIT1udWxsJiZPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaik9PT0iW29iamVjdCBBcnJheV0iJiZqLmxlbmd0aD4wKXt2YXIgYz0iOiIrai5qb2luKCI6IikrIjoiO2lmKGMuaW5kZXhPZigiOiIraCsiOiIpPT0tMSl7dGhyb3ciYWxnb3JpdGhtICciK2grIicgbm90IGFjY2VwdGVkIGluIHRoZSBsaXN0In19aWYoaCE9Im5vbmUiJiZ0PT09bnVsbCl7dGhyb3cia2V5IHNoYWxsIGJlIHNwZWNpZmllZCB0byB2ZXJpZnkuIn1pZih0eXBlb2YgdD09InN0cmluZyImJnQuaW5kZXhPZigiLS0tLS1CRUdJTiAiKSE9LTEpe3Q9S0VZVVRJTC5nZXRLZXkodCl9aWYocz09IlJTInx8cz09IlBTIil7aWYoISh0IGluc3RhbmNlb2YgUlNBS2V5KSl7dGhyb3cia2V5IHNoYWxsIGJlIGEgUlNBS2V5IG9iaiBmb3IgUlMqIGFuZCBQUyogYWxncyJ9fWlmKHM9PSJFUyIpe2lmKCEodCBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBKSl7dGhyb3cia2V5IHNoYWxsIGJlIGEgRUNEU0Egb2JqIGZvciBFUyogYWxncyJ9fWlmKGg9PSJub25lIil7fXZhciBuPW51bGw7aWYobS5qd3NhbGcyc2lnYWxnW2kuYWxnXT09PXVuZGVmaW5lZCl7dGhyb3cidW5zdXBwb3J0ZWQgYWxnIG5hbWU6ICIraH1lbHNle249bS5qd3NhbGcyc2lnYWxnW2hdfWlmKG49PSJub25lIil7dGhyb3cibm90IHN1cHBvcnRlZCJ9ZWxzZXtpZihuLnN1YnN0cigwLDQpPT0iSG1hYyIpe3ZhciBrPW51bGw7aWYodD09PXVuZGVmaW5lZCl7dGhyb3ciaGV4YWRlY2ltYWwga2V5IHNoYWxsIGJlIHNwZWNpZmllZCBmb3IgSE1BQyJ9dmFyIGc9bmV3IEtKVVIuY3J5cHRvLk1hYyh7YWxnOm4scGFzczp0fSk7Zy51cGRhdGVTdHJpbmcoYik7az1nLmRvRmluYWwoKTtyZXR1cm4gcj09a31lbHNle2lmKG4uaW5kZXhPZigid2l0aEVDRFNBIikhPS0xKXt2YXIgZj1udWxsO3RyeXtmPUtKVVIuY3J5cHRvLkVDRFNBLmNvbmNhdFNpZ1RvQVNOMVNpZyhyKX1jYXRjaChvKXtyZXR1cm4gZmFsc2V9dmFyIGU9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOm59KTtlLmluaXQodCk7ZS51cGRhdGVTdHJpbmcoYik7cmV0dXJuIGUudmVyaWZ5KGYpfWVsc2V7dmFyIGU9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOm59KTtlLmluaXQodCk7ZS51cGRhdGVTdHJpbmcoYik7cmV0dXJuIGUudmVyaWZ5KHIpfX19fTtLSlVSLmp3cy5KV1MucGFyc2U9ZnVuY3Rpb24oZyl7dmFyIGM9Zy5zcGxpdCgiLiIpO3ZhciBiPXt9O3ZhciBmLGUsZDtpZihjLmxlbmd0aCE9MiYmYy5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBzSldTOiB3cm9uZyBudW1iZXIgb2YgJy4nIHNwbGl0dGVkIGVsZW1lbnRzIn1mPWNbMF07ZT1jWzFdO2lmKGMubGVuZ3RoPT0zKXtkPWNbMl19Yi5oZWFkZXJPYmo9S0pVUi5qd3MuSldTLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGYpKTtiLnBheWxvYWRPYmo9S0pVUi5qd3MuSldTLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGUpKTtiLmhlYWRlclBQPUpTT04uc3RyaW5naWZ5KGIuaGVhZGVyT2JqLG51bGwsIiAgIik7aWYoYi5wYXlsb2FkT2JqPT1udWxsKXtiLnBheWxvYWRQUD1iNjR1dG91dGY4KGUpfWVsc2V7Yi5wYXlsb2FkUFA9SlNPTi5zdHJpbmdpZnkoYi5wYXlsb2FkT2JqLG51bGwsIiAgIil9aWYoZCE9PXVuZGVmaW5lZCl7Yi5zaWdIZXg9YjY0dXRvaGV4KGQpfXJldHVybiBifTtLSlVSLmp3cy5KV1MudmVyaWZ5SldUPWZ1bmN0aW9uKGQsaixsKXt2YXIgaD1LSlVSLmp3cy5KV1M7dmFyIGk9ZC5zcGxpdCgiLiIpO3ZhciBjPWlbMF07dmFyIGc9aVsxXTt2YXIgbT1jKyIuIitnO3ZhciBrPWI2NHV0b2hleChpWzJdKTt2YXIgZj1oLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGMpKTt2YXIgZT1oLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGcpKTtpZihmLmFsZz09PXVuZGVmaW5lZCl7cmV0dXJuIGZhbHNlfWlmKGwuYWxnPT09dW5kZWZpbmVkKXt0aHJvdyJhY2NlcHRGaWVsZC5hbGcgc2hhbGwgYmUgc3BlY2lmaWVkIn1pZighaC5pbkFycmF5KGYuYWxnLGwuYWxnKSl7cmV0dXJuIGZhbHNlfWlmKGUuaXNzIT09dW5kZWZpbmVkJiZ0eXBlb2YgbC5pc3M9PT0ib2JqZWN0Iil7aWYoIWguaW5BcnJheShlLmlzcyxsLmlzcykpe3JldHVybiBmYWxzZX19aWYoZS5zdWIhPT11bmRlZmluZWQmJnR5cGVvZiBsLnN1Yj09PSJvYmplY3QiKXtpZighaC5pbkFycmF5KGUuc3ViLGwuc3ViKSl7cmV0dXJuIGZhbHNlfX1pZihlLmF1ZCE9PXVuZGVmaW5lZCYmdHlwZW9mIGwuYXVkPT09Im9iamVjdCIpe2lmKHR5cGVvZiBlLmF1ZD09InN0cmluZyIpe2lmKCFoLmluQXJyYXkoZS5hdWQsbC5hdWQpKXtyZXR1cm4gZmFsc2V9fWVsc2V7aWYodHlwZW9mIGUuYXVkPT0ib2JqZWN0Iil7aWYoIWguaW5jbHVkZWRBcnJheShlLmF1ZCxsLmF1ZCkpe3JldHVybiBmYWxzZX19fX12YXIgYj1LSlVSLmp3cy5JbnREYXRlLmdldE5vdygpO2lmKGwudmVyaWZ5QXQhPT11bmRlZmluZWQmJnR5cGVvZiBsLnZlcmlmeUF0PT0ibnVtYmVyIil7Yj1sLnZlcmlmeUF0fWlmKGUuZXhwIT09dW5kZWZpbmVkJiZ0eXBlb2YgZS5leHA9PSJudW1iZXIiKXtpZihlLmV4cDxiKXtyZXR1cm4gZmFsc2V9fWlmKGUubmJmIT09dW5kZWZpbmVkJiZ0eXBlb2YgZS5uYmY9PSJudW1iZXIiKXtpZihiPGUubmJmKXtyZXR1cm4gZmFsc2V9fWlmKGUuaWF0IT09dW5kZWZpbmVkJiZ0eXBlb2YgZS5pYXQ9PSJudW1iZXIiKXtpZihiPGUuaWF0KXtyZXR1cm4gZmFsc2V9fWlmKGUuanRpIT09dW5kZWZpbmVkJiZsLmp0aSE9PXVuZGVmaW5lZCl7aWYoZS5qdGkhPT1sLmp0aSl7cmV0dXJuIGZhbHNlfX1pZighS0pVUi5qd3MuSldTLnZlcmlmeShkLGosbC5hbGcpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9O0tKVVIuandzLkpXUy5pbmNsdWRlZEFycmF5PWZ1bmN0aW9uKGIsYSl7dmFyIGQ9S0pVUi5qd3MuSldTLmluQXJyYXk7aWYoYj09PW51bGwpe3JldHVybiBmYWxzZX1pZih0eXBlb2YgYiE9PSJvYmplY3QiKXtyZXR1cm4gZmFsc2V9aWYodHlwZW9mIGIubGVuZ3RoIT09Im51bWJlciIpe3JldHVybiBmYWxzZX1mb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7aWYoIWQoYltjXSxhKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX07S0pVUi5qd3MuSldTLmluQXJyYXk9ZnVuY3Rpb24oZCxiKXtpZihiPT09bnVsbCl7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBiIT09Im9iamVjdCIpe3JldHVybiBmYWxzZX1pZih0eXBlb2YgYi5sZW5ndGghPT0ibnVtYmVyIil7cmV0dXJuIGZhbHNlfWZvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXtpZihiW2NdPT1kKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfTtLSlVSLmp3cy5KV1MuandzYWxnMnNpZ2FsZz17SFMyNTY6IkhtYWNTSEEyNTYiLEhTMzg0OiJIbWFjU0hBMzg0IixIUzUxMjoiSG1hY1NIQTUxMiIsUlMyNTY6IlNIQTI1NndpdGhSU0EiLFJTMzg0OiJTSEEzODR3aXRoUlNBIixSUzUxMjoiU0hBNTEyd2l0aFJTQSIsRVMyNTY6IlNIQTI1NndpdGhFQ0RTQSIsRVMzODQ6IlNIQTM4NHdpdGhFQ0RTQSIsUFMyNTY6IlNIQTI1NndpdGhSU0FhbmRNR0YxIixQUzM4NDoiU0hBMzg0d2l0aFJTQWFuZE1HRjEiLFBTNTEyOiJTSEE1MTJ3aXRoUlNBYW5kTUdGMSIsbm9uZToibm9uZSIsfTtLSlVSLmp3cy5KV1MuaXNTYWZlSlNPTlN0cmluZz1mdW5jdGlvbihjLGIsZCl7dmFyIGU9bnVsbDt0cnl7ZT1qc29uUGFyc2UoYyk7aWYodHlwZW9mIGUhPSJvYmplY3QiKXtyZXR1cm4gMH1pZihlLmNvbnN0cnVjdG9yPT09QXJyYXkpe3JldHVybiAwfWlmKGIpe2JbZF09ZX1yZXR1cm4gMX1jYXRjaChhKXtyZXR1cm4gMH19O0tKVVIuandzLkpXUy5yZWFkU2FmZUpTT05TdHJpbmc9ZnVuY3Rpb24oYil7dmFyIGM9bnVsbDt0cnl7Yz1qc29uUGFyc2UoYik7aWYodHlwZW9mIGMhPSJvYmplY3QiKXtyZXR1cm4gbnVsbH1pZihjLmNvbnN0cnVjdG9yPT09QXJyYXkpe3JldHVybiBudWxsfXJldHVybiBjfWNhdGNoKGEpe3JldHVybiBudWxsfX07S0pVUi5qd3MuSldTLmdldEVuY29kZWRTaWduYXR1cmVWYWx1ZUZyb21KV1M9ZnVuY3Rpb24oYSl7aWYoYS5tYXRjaCgvXlteLl0rXC5bXi5dK1wuKFteLl0rKSQvKT09bnVsbCl7dGhyb3ciSldTIHNpZ25hdHVyZSBpcyBub3QgYSBmb3JtIG9mICdIZWFkLlBheWxvYWQuU2lnVmFsdWUnLiJ9cmV0dXJuIFJlZ0V4cC4kMX07S0pVUi5qd3MuSldTLmdldEpXS3RodW1icHJpbnQ9ZnVuY3Rpb24oZCl7aWYoZC5rdHkhPT0iUlNBIiYmZC5rdHkhPT0iRUMiJiZkLmt0eSE9PSJvY3QiKXt0aHJvdyJ1bnN1cHBvcnRlZCBhbGdvcml0aG0gZm9yIEpXSyBUaHVtcHJpbnQifXZhciBhPSJ7IjtpZihkLmt0eT09PSJSU0EiKXtpZih0eXBlb2YgZC5uIT0ic3RyaW5nInx8dHlwZW9mIGQuZSE9InN0cmluZyIpe3Rocm93Indyb25nIG4gYW5kIGUgdmFsdWUgZm9yIFJTQSBrZXkifWErPSciZSI6IicrZC5lKyciLCc7YSs9JyJrdHkiOiInK2Qua3R5KyciLCc7YSs9JyJuIjoiJytkLm4rJyJ9J31lbHNle2lmKGQua3R5PT09IkVDIil7aWYodHlwZW9mIGQuY3J2IT0ic3RyaW5nInx8dHlwZW9mIGQueCE9InN0cmluZyJ8fHR5cGVvZiBkLnkhPSJzdHJpbmciKXt0aHJvdyJ3cm9uZyBjcnYsIHggYW5kIHkgdmFsdWUgZm9yIEVDIGtleSJ9YSs9JyJjcnYiOiInK2QuY3J2KyciLCc7YSs9JyJrdHkiOiInK2Qua3R5KyciLCc7YSs9JyJ4IjoiJytkLngrJyIsJzthKz0nInkiOiInK2QueSsnIn0nfWVsc2V7aWYoZC5rdHk9PT0ib2N0Iil7aWYodHlwZW9mIGQuayE9InN0cmluZyIpe3Rocm93Indyb25nIGsgdmFsdWUgZm9yIG9jdChzeW1tZXRyaWMpIGtleSJ9YSs9JyJrdHkiOiInK2Qua3R5KyciLCc7YSs9JyJrIjoiJytkLmsrJyJ9J319fXZhciBiPXJzdHJ0b2hleChhKTt2YXIgYz1LSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoYiwic2hhMjU2Iik7dmFyIGU9aGV4dG9iNjR1KGMpO3JldHVybiBlfTtLSlVSLmp3cy5JbnREYXRlPXt9O0tKVVIuandzLkludERhdGUuZ2V0PWZ1bmN0aW9uKGEpe2lmKGE9PSJub3ciKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXROb3coKX1lbHNle2lmKGE9PSJub3cgKyAxaG91ciIpe3JldHVybiBLSlVSLmp3cy5JbnREYXRlLmdldE5vdygpKzYwKjYwfWVsc2V7aWYoYT09Im5vdyArIDFkYXkiKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXROb3coKSs2MCo2MCoyNH1lbHNle2lmKGE9PSJub3cgKyAxbW9udGgiKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXROb3coKSs2MCo2MCoyNCozMH1lbHNle2lmKGE9PSJub3cgKyAxeWVhciIpe3JldHVybiBLSlVSLmp3cy5JbnREYXRlLmdldE5vdygpKzYwKjYwKjI0KjM2NX1lbHNle2lmKGEubWF0Y2goL1okLykpe3JldHVybiBLSlVSLmp3cy5JbnREYXRlLmdldFp1bHUoYSl9ZWxzZXtpZihhLm1hdGNoKC9eWzAtOV0rJC8pKXtyZXR1cm4gcGFyc2VJbnQoYSl9fX19fX19dGhyb3cidW5zdXBwb3J0ZWQgZm9ybWF0OiAiK2F9O0tKVVIuandzLkludERhdGUuZ2V0WnVsdT1mdW5jdGlvbihsKXt2YXIgaztpZihrPWwubWF0Y2goLyhcZCspKFxkXGQpKFxkXGQpKFxkXGQpKFxkXGQpKFxkXGQpWi8pKXt2YXIgYj1SZWdFeHAuJDE7dmFyIGk9cGFyc2VJbnQoYik7aWYoYi5sZW5ndGg9PTQpe31lbHNle2lmKGIubGVuZ3RoPT0yKXtpZig1MDw9aSYmaTwxMDApe2k9MTkwMCtpfWVsc2V7aWYoMDw9aSYmaTw1MCl7aT0yMDAwK2l9ZWxzZXt0aHJvdyJtYWxmb3JtZWQgeWVhciBzdHJpbmcgZm9yIFVUQ1RpbWUifX19ZWxzZXt0aHJvdyJtYWxmb3JtZWQgeWVhciBzdHJpbmcifX12YXIgZz1wYXJzZUludChSZWdFeHAuJDIpLTE7dmFyIGo9cGFyc2VJbnQoUmVnRXhwLiQzKTt2YXIgYz1wYXJzZUludChSZWdFeHAuJDQpO3ZhciBlPXBhcnNlSW50KFJlZ0V4cC4kNSk7dmFyIGY9cGFyc2VJbnQoUmVnRXhwLiQ2KTt2YXIgaD1uZXcgRGF0ZShEYXRlLlVUQyhpLGcsaixjLGUsZikpO3JldHVybiB+fihoLzEwMDApfXRocm93InVuc3VwcG9ydGVkIGZvcm1hdDogIitsfTtLSlVSLmp3cy5JbnREYXRlLmdldE5vdz1mdW5jdGlvbigpe3ZhciBhPX5+KG5ldyBEYXRlKCkvMTAwMCk7cmV0dXJuIGF9O0tKVVIuandzLkludERhdGUuaW50RGF0ZTJVVENTdHJpbmc9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IERhdGUoYSoxMDAwKTtyZXR1cm4gYi50b1VUQ1N0cmluZygpfTtLSlVSLmp3cy5JbnREYXRlLmludERhdGUyWnVsdT1mdW5jdGlvbihlKXt2YXIgaT1uZXcgRGF0ZShlKjEwMDApO3ZhciBoPSgiMDAwMCIraS5nZXRVVENGdWxsWWVhcigpKS5zbGljZSgtNCk7dmFyIGc9KCIwMCIrKGkuZ2V0VVRDTW9udGgoKSsxKSkuc2xpY2UoLTIpO3ZhciBiPSgiMDAiK2kuZ2V0VVRDRGF0ZSgpKS5zbGljZSgtMik7dmFyIGE9KCIwMCIraS5nZXRVVENIb3VycygpKS5zbGljZSgtMik7dmFyIGM9KCIwMCIraS5nZXRVVENNaW51dGVzKCkpLnNsaWNlKC0yKTt2YXIgZj0oIjAwIitpLmdldFVUQ1NlY29uZHMoKSkuc2xpY2UoLTIpO3JldHVybiBoK2crYithK2MrZisiWiJ9OwovKiEgandzanMtMi4wLjEgKGMpIDIwMTAtMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc2p3cy9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmp3cz09InVuZGVmaW5lZCJ8fCFLSlVSLmp3cyl7S0pVUi5qd3M9e319S0pVUi5qd3MuSldTSlM9ZnVuY3Rpb24oKXt2YXIgYT1LSlVSLmp3cy5KV1M7dGhpcy5hSGVhZGVyPVtdO3RoaXMuc1BheWxvYWQ9IiI7dGhpcy5hU2lnbmF0dXJlPVtdO3RoaXMuaW5pdD1mdW5jdGlvbigpe3RoaXMuYUhlYWRlcj1bXTt0aGlzLnNQYXlsb2FkPSIiO3RoaXMuYVNpZ25hdHVyZT1bXX07dGhpcy5pbml0V2l0aEpXUz1mdW5jdGlvbihjKXt0aGlzLmluaXQoKTt2YXIgYj1uZXcgS0pVUi5qd3MuSldTKCk7Yi5wYXJzZUpXUyhjKTt0aGlzLmFIZWFkZXIucHVzaChiLnBhcnNlZEpXUy5oZWFkQjY0VSk7dGhpcy5zUGF5bG9hZD1iLnBhcnNlZEpXUy5wYXlsb2FkQjY0VTt0aGlzLmFTaWduYXR1cmUucHVzaChiLnBhcnNlZEpXUy5zaWd2YWxCNjRVKX07dGhpcy5hZGRTaWduYXR1cmVCeUhlYWRlcktleT1mdW5jdGlvbihlLGIpe3ZhciBkPWI2NHV0b3V0ZjgodGhpcy5zUGF5bG9hZCk7dmFyIGM9bmV3IEtKVVIuandzLkpXUygpO3ZhciBmPWMuZ2VuZXJhdGVKV1NCeVAxUHJ2S2V5KGUsZCxiKTt0aGlzLmFIZWFkZXIucHVzaChjLnBhcnNlZEpXUy5oZWFkQjY0VSk7dGhpcy5hU2lnbmF0dXJlLnB1c2goYy5wYXJzZWRKV1Muc2lndmFsQjY0VSl9O3RoaXMuYWRkU2lnbmF0dXJlQnlIZWFkZXJQYXlsb2FkS2V5PWZ1bmN0aW9uKGUsZCxiKXt2YXIgYz1uZXcgS0pVUi5qd3MuSldTKCk7dmFyIGY9Yy5nZW5lcmF0ZUpXU0J5UDFQcnZLZXkoZSxkLGIpO3RoaXMuYUhlYWRlci5wdXNoKGMucGFyc2VkSldTLmhlYWRCNjRVKTt0aGlzLnNQYXlsb2FkPWMucGFyc2VkSldTLnBheWxvYWRCNjRVO3RoaXMuYVNpZ25hdHVyZS5wdXNoKGMucGFyc2VkSldTLnNpZ3ZhbEI2NFUpfTt0aGlzLnZlcmlmeVdpdGhDZXJ0cz1mdW5jdGlvbihjKXtpZih0aGlzLmFIZWFkZXIubGVuZ3RoIT1jLmxlbmd0aCl7dGhyb3cibnVtIGhlYWRlcnMgZG9lcyBub3QgbWF0Y2ggd2l0aCBudW0gY2VydHMifWlmKHRoaXMuYVNpZ25hdHVyZS5sZW5ndGghPWMubGVuZ3RoKXt0aHJvdyJudW0gc2lnbmF0dXJlcyBkb2VzIG5vdCBtYXRjaCB3aXRoIG51bSBjZXJ0cyJ9dmFyIGs9dGhpcy5zUGF5bG9hZDt2YXIgZz0iIjtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTt2YXIgZj10aGlzLmFIZWFkZXJbZF07dmFyIG09dGhpcy5hU2lnbmF0dXJlW2RdO3ZhciBiPWYrIi4iK2srIi4iK207dmFyIGo9bmV3IEtKVVIuandzLkpXUygpO3RyeXt2YXIgbD1qLnZlcmlmeUpXU0J5UGVtWDUwOUNlcnQoYixlKTtpZihsIT0xKXtnKz0oZCsxKSsidGggc2lnbmF0dXJlIHVubWF0Y2guICJ9fWNhdGNoKGgpe2crPShkKzEpKyJ0aCBzaWduYXR1cmUgZmFpbCgiK2grIikuICJ9fWlmKGc9PSIiKXtyZXR1cm4gMX1lbHNle3Rocm93IGd9fTt0aGlzLnJlYWRKV1NKUz1mdW5jdGlvbihiKXt2YXIgYz1hLnJlYWRTYWZlSlNPTlN0cmluZyhiKTtpZihjPT1udWxsKXt0aHJvdyJhcmd1bWVudCBpcyBub3QgSlNPTiBzdHJpbmc6ICIrYn10aGlzLmFIZWFkZXI9Yy5oZWFkZXJzO3RoaXMuc1BheWxvYWQ9Yy5wYXlsb2FkO3RoaXMuYVNpZ25hdHVyZT1jLnNpZ25hdHVyZXN9O3RoaXMuZ2V0SlNPTj1mdW5jdGlvbigpe3JldHVybntoZWFkZXJzOnRoaXMuYUhlYWRlcixwYXlsb2FkOnRoaXMuc1BheWxvYWQsc2lnbmF0dXJlczp0aGlzLmFTaWduYXR1cmV9fTt0aGlzLmlzRW1wdHk9ZnVuY3Rpb24oKXtpZih0aGlzLmFIZWFkZXIubGVuZ3RoPT0wKXtyZXR1cm4gMX1yZXR1cm4gMH19OwovKiEgbm9kZXV0aWwtMS4wLjAgKGMpIDIwMTUgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmZ1bmN0aW9uIHJlYWRGaWxlVVRGOChhKXtyZXR1cm4gcmVxdWlyZSgiZnMiKS5yZWFkRmlsZVN5bmMoYSwidXRmOCIpfWZ1bmN0aW9uIHJlYWRGaWxlSGV4QnlCaW4oYyl7dmFyIGI9cmVxdWlyZSgianNyc2FzaWduIik7dmFyIGE9cmVxdWlyZSgiZnMiKTtyZXR1cm4gYi5yc3RydG9oZXgoYS5yZWFkRmlsZVN5bmMoYywiYmluYXJ5IikpfWZ1bmN0aW9uIHJlYWRGaWxlKGIpe3ZhciBhPXJlcXVpcmUoImZzIik7cmV0dXJuIGEucmVhZEZpbGVTeW5jKGIsImJpbmFyeSIpfWZ1bmN0aW9uIHNhdmVGaWxlKGMsYil7dmFyIGE9cmVxdWlyZSgiZnMiKTthLndyaXRlRmlsZVN5bmMoYyxiLCJiaW5hcnkiKX1mdW5jdGlvbiBzYXZlRmlsZUJpbkJ5SGV4KGUsYil7dmFyIGE9cmVxdWlyZSgiZnMiKTt2YXIgYz1yZXF1aXJlKCJqc3JzYXNpZ24iKTt2YXIgZD1jLmhleHRvcnN0cihiKTthLndyaXRlRmlsZVN5bmMoZSxkLCJiaW5hcnkiKX07CgpleHBvcnRzLkJpZ0ludGVnZXIgPSBCaWdJbnRlZ2VyOwpleHBvcnRzLlJTQUtleSA9IFJTQUtleTsKZXhwb3J0cy5FQ0RTQSA9IEtKVVIuY3J5cHRvLkVDRFNBOwpleHBvcnRzLkRTQSA9IEtKVVIuY3J5cHRvLkRTQTsKZXhwb3J0cy5TaWduYXR1cmUgPSBLSlVSLmNyeXB0by5TaWduYXR1cmU7CmV4cG9ydHMuTWVzc2FnZURpZ2VzdCA9IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Q7CmV4cG9ydHMuTWFjID0gS0pVUi5jcnlwdG8uTWFjOwpleHBvcnRzLktFWVVUSUwgPSBLRVlVVElMOwpleHBvcnRzLkFTTjFIRVggPSBBU04xSEVYOwpleHBvcnRzLlg1MDkgPSBYNTA5OwpleHBvcnRzLkNyeXB0b0pTID0gQ3J5cHRvSlM7CgovLyBleHQvYmFzZTY0LmpzCmV4cG9ydHMuYjY0dG9oZXggPSBiNjR0b2hleDsKZXhwb3J0cy5iNjR0b0JBID0gYjY0dG9CQTsKCi8vIGJhc2U2NHguanMKZXhwb3J0cy5zdG9CQSA9IHN0b0JBOwpleHBvcnRzLkJBdG9zID0gQkF0b3M7CmV4cG9ydHMuQkF0b2hleCA9IEJBdG9oZXg7CmV4cG9ydHMuc3RvaGV4ID0gc3RvaGV4OwpleHBvcnRzLnN0b2I2NCA9IHN0b2I2NDsKZXhwb3J0cy5zdG9iNjR1ID0gc3RvYjY0dTsKZXhwb3J0cy5iNjR1dG9zID0gYjY0dXRvczsKZXhwb3J0cy5iNjR0b2I2NHUgPSBiNjR0b2I2NHU7CmV4cG9ydHMuYjY0dXRvYjY0ID0gYjY0dXRvYjY0OwpleHBvcnRzLmhleDJiNjQgPSBoZXgyYjY0OwpleHBvcnRzLmhleHRvYjY0dSA9IGhleHRvYjY0dTsKZXhwb3J0cy5iNjR1dG9oZXggPSBiNjR1dG9oZXg7CmV4cG9ydHMuYjY0dG9oZXggPSBiNjR0b2hleDsKZXhwb3J0cy51dGY4dG9iNjR1ID0gdXRmOHRvYjY0dTsKZXhwb3J0cy5iNjR1dG91dGY4ID0gYjY0dXRvdXRmODsKZXhwb3J0cy51dGY4dG9iNjQgPSB1dGY4dG9iNjQ7CmV4cG9ydHMuYjY0dG91dGY4ID0gYjY0dG91dGY4OwpleHBvcnRzLnV0Zjh0b2hleCA9IHV0Zjh0b2hleDsKZXhwb3J0cy5oZXh0b3V0ZjggPSBoZXh0b3V0Zjg7CmV4cG9ydHMuaGV4dG9yc3RyID0gaGV4dG9yc3RyOwpleHBvcnRzLnJzdHJ0b2hleCA9IHJzdHJ0b2hleDsKZXhwb3J0cy5uZXdsaW5lX3RvVW5peCA9IG5ld2xpbmVfdG9Vbml4OwpleHBvcnRzLm5ld2xpbmVfdG9Eb3MgPSBuZXdsaW5lX3RvRG9zOwpleHBvcnRzLmludGFyeXN0cnRvaGV4ID0gaW50YXJ5c3RydG9oZXg7CmV4cG9ydHMuc3RyZGlmZmlkeCA9IHN0cmRpZmZpZHg7CgpleHBvcnRzLmNyeXB0byA9IEtKVVIuY3J5cHRvOwpleHBvcnRzLmFzbjEgPSBLSlVSLmFzbjE7CmV4cG9ydHMuandzID0gS0pVUi5qd3M7CgpleHBvcnRzLnJlYWRGaWxlVVRGOCA9IHJlYWRGaWxlVVRGODsKZXhwb3J0cy5yZWFkRmlsZUhleEJ5QmluID0gcmVhZEZpbGVIZXhCeUJpbjsKZXhwb3J0cy5yZWFkRmlsZSA9IHJlYWRGaWxlOwpleHBvcnRzLnNhdmVGaWxlID0gc2F2ZUZpbGU7CmV4cG9ydHMuc2F2ZUZpbGVCaW5CeUhleCA9IHNhdmVGaWxlQmluQnlIZXg7CgoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzAsImZzIjo2OCwianNyc2FzaWduIjoxMzB9XSwxMzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgYm4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgYnJvcmFuZCA9IHJlcXVpcmUoJ2Jyb3JhbmQnKTsKCmZ1bmN0aW9uIE1pbGxlclJhYmluKHJhbmQpIHsKICB0aGlzLnJhbmQgPSByYW5kIHx8IG5ldyBicm9yYW5kLlJhbmQoKTsKfQptb2R1bGUuZXhwb3J0cyA9IE1pbGxlclJhYmluOwoKTWlsbGVyUmFiaW4uY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHJhbmQpIHsKICByZXR1cm4gbmV3IE1pbGxlclJhYmluKHJhbmQpOwp9OwoKTWlsbGVyUmFiaW4ucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogIHZhciBsZW4gPSBuLmJpdExlbmd0aCgpOwogIHZhciBidWYgPSB0aGlzLnJhbmQuZ2VuZXJhdGUoTWF0aC5jZWlsKGxlbiAvIDgpKTsKCiAgLy8gU2V0IGxvdyBiaXRzCiAgYnVmWzBdIHw9IDM7CgogIC8vIE1hc2sgaGlnaCBiaXRzCiAgdmFyIG1hc2sgPSBsZW4gJiAweDc7CiAgaWYgKG1hc2sgIT09IDApCiAgICBidWZbYnVmLmxlbmd0aCAtIDFdID4+PSA3IC0gbWFzazsKCiAgcmV0dXJuIG5ldyBibihidWYpOwp9CgpNaWxsZXJSYWJpbi5wcm90b3R5cGUudGVzdCA9IGZ1bmN0aW9uIHRlc3QobiwgaywgY2IpIHsKICB2YXIgbGVuID0gbi5iaXRMZW5ndGgoKTsKICB2YXIgcmVkID0gYm4ubW9udChuKTsKICB2YXIgcm9uZSA9IG5ldyBibigxKS50b1JlZChyZWQpOwoKICBpZiAoIWspCiAgICBrID0gTWF0aC5tYXgoMSwgKGxlbiAvIDQ4KSB8IDApOwoKICAvLyBGaW5kIGQgYW5kIHMsIChuIC0gMSkgPSAoMiBeIHMpICogZDsKICB2YXIgbjEgPSBuLnN1Ym4oMSk7CiAgdmFyIG4yID0gbjEuc3VibigxKTsKICBmb3IgKHZhciBzID0gMDsgIW4xLnRlc3RuKHMpOyBzKyspIHt9CiAgdmFyIGQgPSBuLnNocm4ocyk7CgogIHZhciBybjEgPSBuMS50b1JlZChyZWQpOwoKICB2YXIgcHJpbWUgPSB0cnVlOwogIGZvciAoOyBrID4gMDsgay0tKSB7CiAgICB2YXIgYSA9IHRoaXMuX3JhbmQobjIpOwogICAgaWYgKGNiKQogICAgICBjYihhKTsKCiAgICB2YXIgeCA9IGEudG9SZWQocmVkKS5yZWRQb3coZCk7CiAgICBpZiAoeC5jbXAocm9uZSkgPT09IDAgfHwgeC5jbXAocm4xKSA9PT0gMCkKICAgICAgY29udGludWU7CgogICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzOyBpKyspIHsKICAgICAgeCA9IHgucmVkU3FyKCk7CgogICAgICBpZiAoeC5jbXAocm9uZSkgPT09IDApCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICBpZiAoeC5jbXAocm4xKSA9PT0gMCkKICAgICAgICBicmVhazsKICAgIH0KCiAgICBpZiAoaSA9PT0gcykKICAgICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIHByaW1lOwp9OwoKTWlsbGVyUmFiaW4ucHJvdG90eXBlLmdldERpdmlzb3IgPSBmdW5jdGlvbiBnZXREaXZpc29yKG4sIGspIHsKICB2YXIgbGVuID0gbi5iaXRMZW5ndGgoKTsKICB2YXIgcmVkID0gYm4ubW9udChuKTsKICB2YXIgcm9uZSA9IG5ldyBibigxKS50b1JlZChyZWQpOwoKICBpZiAoIWspCiAgICBrID0gTWF0aC5tYXgoMSwgKGxlbiAvIDQ4KSB8IDApOwoKICAvLyBGaW5kIGQgYW5kIHMsIChuIC0gMSkgPSAoMiBeIHMpICogZDsKICB2YXIgbjEgPSBuLnN1Ym4oMSk7CiAgdmFyIG4yID0gbjEuc3VibigxKTsKICBmb3IgKHZhciBzID0gMDsgIW4xLnRlc3RuKHMpOyBzKyspIHt9CiAgdmFyIGQgPSBuLnNocm4ocyk7CgogIHZhciBybjEgPSBuMS50b1JlZChyZWQpOwoKICBmb3IgKDsgayA+IDA7IGstLSkgewogICAgdmFyIGEgPSB0aGlzLl9yYW5kKG4yKTsKCiAgICB2YXIgZyA9IG4uZ2NkKGEpOwogICAgaWYgKGcuY21wbigxKSAhPT0gMCkKICAgICAgcmV0dXJuIGc7CgogICAgdmFyIHggPSBhLnRvUmVkKHJlZCkucmVkUG93KGQpOwogICAgaWYgKHguY21wKHJvbmUpID09PSAwIHx8IHguY21wKHJuMSkgPT09IDApCiAgICAgIGNvbnRpbnVlOwoKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgczsgaSsrKSB7CiAgICAgIHggPSB4LnJlZFNxcigpOwoKICAgICAgaWYgKHguY21wKHJvbmUpID09PSAwKQogICAgICAgIHJldHVybiB4LmZyb21SZWQoKS5zdWJuKDEpLmdjZChuKTsKICAgICAgaWYgKHguY21wKHJuMSkgPT09IDApCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgaWYgKGkgPT09IHMpIHsKICAgICAgeCA9IHgucmVkU3FyKCk7CiAgICAgIHJldHVybiB4LmZyb21SZWQoKS5zdWJuKDEpLmdjZChuKTsKICAgIH0KICB9CgogIHJldHVybiBmYWxzZTsKfTsKCn0seyJibi5qcyI6NDEsImJyb3JhbmQiOjQyfV0sMTMyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBhc3NlcnQ7CgpmdW5jdGlvbiBhc3NlcnQodmFsLCBtc2cpIHsKICBpZiAoIXZhbCkKICAgIHRocm93IG5ldyBFcnJvcihtc2cgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnKTsKfQoKYXNzZXJ0LmVxdWFsID0gZnVuY3Rpb24gYXNzZXJ0RXF1YWwobCwgciwgbXNnKSB7CiAgaWYgKGwgIT0gcikKICAgIHRocm93IG5ldyBFcnJvcihtc2cgfHwgKCdBc3NlcnRpb24gZmFpbGVkOiAnICsgbCArICcgIT0gJyArIHIpKTsKfTsKCn0se31dLDEzMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsiMi4xNi44NDAuMS4xMDEuMy40LjEuMSI6ICJhZXMtMTI4LWVjYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yIjogImFlcy0xMjgtY2JjIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjMiOiAiYWVzLTEyOC1vZmIiLAoiMi4xNi44NDAuMS4xMDEuMy40LjEuNCI6ICJhZXMtMTI4LWNmYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yMSI6ICJhZXMtMTkyLWVjYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yMiI6ICJhZXMtMTkyLWNiYyIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yMyI6ICJhZXMtMTkyLW9mYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yNCI6ICJhZXMtMTkyLWNmYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40MSI6ICJhZXMtMjU2LWVjYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40MiI6ICJhZXMtMjU2LWNiYyIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40MyI6ICJhZXMtMjU2LW9mYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40NCI6ICJhZXMtMjU2LWNmYiIKfQp9LHt9XSwxMzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L3NlbGYtc2lnbmVkL2Jsb2IvZ2gtcGFnZXMvbGliL2FzbjEuanMKLy8gRmVkb3IsIHlvdSBhcmUgYW1hemluZy4KCnZhciBhc24xID0gcmVxdWlyZSgnYXNuMS5qcycpCgp2YXIgUlNBUHJpdmF0ZUtleSA9IGFzbjEuZGVmaW5lKCdSU0FQcml2YXRlS2V5JywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ3ZlcnNpb24nKS5pbnQoKSwKICAgIHRoaXMua2V5KCdtb2R1bHVzJykuaW50KCksCiAgICB0aGlzLmtleSgncHVibGljRXhwb25lbnQnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwcml2YXRlRXhwb25lbnQnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwcmltZTEnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwcmltZTInKS5pbnQoKSwKICAgIHRoaXMua2V5KCdleHBvbmVudDEnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdleHBvbmVudDInKS5pbnQoKSwKICAgIHRoaXMua2V5KCdjb2VmZmljaWVudCcpLmludCgpCiAgKQp9KQpleHBvcnRzLlJTQVByaXZhdGVLZXkgPSBSU0FQcml2YXRlS2V5Cgp2YXIgUlNBUHVibGljS2V5ID0gYXNuMS5kZWZpbmUoJ1JTQVB1YmxpY0tleScsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCdtb2R1bHVzJykuaW50KCksCiAgICB0aGlzLmtleSgncHVibGljRXhwb25lbnQnKS5pbnQoKQogICkKfSkKZXhwb3J0cy5SU0FQdWJsaWNLZXkgPSBSU0FQdWJsaWNLZXkKCnZhciBQdWJsaWNLZXkgPSBhc24xLmRlZmluZSgnU3ViamVjdFB1YmxpY0tleUluZm8nLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgnYWxnb3JpdGhtJykudXNlKEFsZ29yaXRobUlkZW50aWZpZXIpLAogICAgdGhpcy5rZXkoJ3N1YmplY3RQdWJsaWNLZXknKS5iaXRzdHIoKQogICkKfSkKZXhwb3J0cy5QdWJsaWNLZXkgPSBQdWJsaWNLZXkKCnZhciBBbGdvcml0aG1JZGVudGlmaWVyID0gYXNuMS5kZWZpbmUoJ0FsZ29yaXRobUlkZW50aWZpZXInLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgnYWxnb3JpdGhtJykub2JqaWQoKSwKICAgIHRoaXMua2V5KCdub25lJykubnVsbF8oKS5vcHRpb25hbCgpLAogICAgdGhpcy5rZXkoJ2N1cnZlJykub2JqaWQoKS5vcHRpb25hbCgpLAogICAgdGhpcy5rZXkoJ3BhcmFtcycpLnNlcSgpLm9iaigKICAgICAgdGhpcy5rZXkoJ3AnKS5pbnQoKSwKICAgICAgdGhpcy5rZXkoJ3EnKS5pbnQoKSwKICAgICAgdGhpcy5rZXkoJ2cnKS5pbnQoKQogICAgKS5vcHRpb25hbCgpCiAgKQp9KQoKdmFyIFByaXZhdGVLZXlJbmZvID0gYXNuMS5kZWZpbmUoJ1ByaXZhdGVLZXlJbmZvJywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ3ZlcnNpb24nKS5pbnQoKSwKICAgIHRoaXMua2V5KCdhbGdvcml0aG0nKS51c2UoQWxnb3JpdGhtSWRlbnRpZmllciksCiAgICB0aGlzLmtleSgnc3ViamVjdFByaXZhdGVLZXknKS5vY3RzdHIoKQogICkKfSkKZXhwb3J0cy5Qcml2YXRlS2V5ID0gUHJpdmF0ZUtleUluZm8KdmFyIEVuY3J5cHRlZFByaXZhdGVLZXlJbmZvID0gYXNuMS5kZWZpbmUoJ0VuY3J5cHRlZFByaXZhdGVLZXlJbmZvJywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ2FsZ29yaXRobScpLnNlcSgpLm9iaigKICAgICAgdGhpcy5rZXkoJ2lkJykub2JqaWQoKSwKICAgICAgdGhpcy5rZXkoJ2RlY3J5cHQnKS5zZXEoKS5vYmooCiAgICAgICAgdGhpcy5rZXkoJ2tkZScpLnNlcSgpLm9iaigKICAgICAgICAgIHRoaXMua2V5KCdpZCcpLm9iamlkKCksCiAgICAgICAgICB0aGlzLmtleSgna2RlcGFyYW1zJykuc2VxKCkub2JqKAogICAgICAgICAgICB0aGlzLmtleSgnc2FsdCcpLm9jdHN0cigpLAogICAgICAgICAgICB0aGlzLmtleSgnaXRlcnMnKS5pbnQoKQogICAgICAgICAgKQogICAgICAgICksCiAgICAgICAgdGhpcy5rZXkoJ2NpcGhlcicpLnNlcSgpLm9iaigKICAgICAgICAgIHRoaXMua2V5KCdhbGdvJykub2JqaWQoKSwKICAgICAgICAgIHRoaXMua2V5KCdpdicpLm9jdHN0cigpCiAgICAgICAgKQogICAgICApCiAgICApLAogICAgdGhpcy5rZXkoJ3N1YmplY3RQcml2YXRlS2V5Jykub2N0c3RyKCkKICApCn0pCgpleHBvcnRzLkVuY3J5cHRlZFByaXZhdGVLZXkgPSBFbmNyeXB0ZWRQcml2YXRlS2V5SW5mbwoKdmFyIERTQVByaXZhdGVLZXkgPSBhc24xLmRlZmluZSgnRFNBUHJpdmF0ZUtleScsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCd2ZXJzaW9uJykuaW50KCksCiAgICB0aGlzLmtleSgncCcpLmludCgpLAogICAgdGhpcy5rZXkoJ3EnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdnJykuaW50KCksCiAgICB0aGlzLmtleSgncHViX2tleScpLmludCgpLAogICAgdGhpcy5rZXkoJ3ByaXZfa2V5JykuaW50KCkKICApCn0pCmV4cG9ydHMuRFNBUHJpdmF0ZUtleSA9IERTQVByaXZhdGVLZXkKCmV4cG9ydHMuRFNBcGFyYW0gPSBhc24xLmRlZmluZSgnRFNBcGFyYW0nLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5pbnQoKQp9KQp2YXIgRUNQcml2YXRlS2V5ID0gYXNuMS5kZWZpbmUoJ0VDUHJpdmF0ZUtleScsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCd2ZXJzaW9uJykuaW50KCksCiAgICB0aGlzLmtleSgncHJpdmF0ZUtleScpLm9jdHN0cigpLAogICAgdGhpcy5rZXkoJ3BhcmFtZXRlcnMnKS5vcHRpb25hbCgpLmV4cGxpY2l0KDApLnVzZShFQ1BhcmFtZXRlcnMpLAogICAgdGhpcy5rZXkoJ3B1YmxpY0tleScpLm9wdGlvbmFsKCkuZXhwbGljaXQoMSkuYml0c3RyKCkKICApCn0pCmV4cG9ydHMuRUNQcml2YXRlS2V5ID0gRUNQcml2YXRlS2V5CnZhciBFQ1BhcmFtZXRlcnMgPSBhc24xLmRlZmluZSgnRUNQYXJhbWV0ZXJzJywgZnVuY3Rpb24gKCkgewogIHRoaXMuY2hvaWNlKHsKICAgIG5hbWVkQ3VydmU6IHRoaXMub2JqaWQoKQogIH0pCn0pCgpleHBvcnRzLnNpZ25hdHVyZSA9IGFzbjEuZGVmaW5lKCdzaWduYXR1cmUnLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgncicpLmludCgpLAogICAgdGhpcy5rZXkoJ3MnKS5pbnQoKQogICkKfSkKCn0seyJhc24xLmpzIjoxfV0sMTM1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBhZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2FwYXRpbC9wZW1zdHJpcAp2YXIgZmluZFByb2MgPSAvUHJvYy1UeXBlOiA0LEVOQ1JZUFRFRFxyP1xuREVLLUluZm86IEFFUy0oKD86MTI4KXwoPzoxOTIpfCg/OjI1NikpLUNCQywoWzAtOUEtSF0rKVxyP1xuXHI/XG4oWzAtOUEtelxuXHJcK1wvXD1dKylccj9cbi9tCnZhciBzdGFydFJlZ2V4ID0gL14tLS0tLUJFR0lOICguKikgS0VZLS0tLS1ccj9cbi9tCnZhciBmdWxsUmVnZXggPSAvXi0tLS0tQkVHSU4gKC4qKSBLRVktLS0tLVxyP1xuKFswLTlBLXpcblxyXCtcL1w9XSspXHI/XG4tLS0tLUVORCBcMSBLRVktLS0tLSQvbQp2YXIgZXZwID0gcmVxdWlyZSgnZXZwX2J5dGVzdG9rZXknKQp2YXIgY2lwaGVycyA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktYWVzJykKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2tleSwgcGFzc3dvcmQpIHsKICB2YXIga2V5ID0gb2tleS50b1N0cmluZygpCiAgdmFyIG1hdGNoID0ga2V5Lm1hdGNoKGZpbmRQcm9jKQogIHZhciBkZWNyeXB0ZWQKICBpZiAoIW1hdGNoKSB7CiAgICB2YXIgbWF0Y2gyID0ga2V5Lm1hdGNoKGZ1bGxSZWdleCkKICAgIGRlY3J5cHRlZCA9IG5ldyBCdWZmZXIobWF0Y2gyWzJdLnJlcGxhY2UoL1xyP1xuL2csICcnKSwgJ2Jhc2U2NCcpCiAgfSBlbHNlIHsKICAgIHZhciBzdWl0ZSA9ICdhZXMnICsgbWF0Y2hbMV0KICAgIHZhciBpdiA9IG5ldyBCdWZmZXIobWF0Y2hbMl0sICdoZXgnKQogICAgdmFyIGNpcGhlclRleHQgPSBuZXcgQnVmZmVyKG1hdGNoWzNdLnJlcGxhY2UoL1xyP1xuL2csICcnKSwgJ2Jhc2U2NCcpCiAgICB2YXIgY2lwaGVyS2V5ID0gZXZwKHBhc3N3b3JkLCBpdi5zbGljZSgwLCA4KSwgcGFyc2VJbnQobWF0Y2hbMV0sIDEwKSkua2V5CiAgICB2YXIgb3V0ID0gW10KICAgIHZhciBjaXBoZXIgPSBjaXBoZXJzLmNyZWF0ZURlY2lwaGVyaXYoc3VpdGUsIGNpcGhlcktleSwgaXYpCiAgICBvdXQucHVzaChjaXBoZXIudXBkYXRlKGNpcGhlclRleHQpKQogICAgb3V0LnB1c2goY2lwaGVyLmZpbmFsKCkpCiAgICBkZWNyeXB0ZWQgPSBCdWZmZXIuY29uY2F0KG91dCkKICB9CiAgdmFyIHRhZyA9IGtleS5tYXRjaChzdGFydFJlZ2V4KVsxXSArICcgS0VZJwogIHJldHVybiB7CiAgICB0YWc6IHRhZywKICAgIGRhdGE6IGRlY3J5cHRlZAogIH0KfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJyb3dzZXJpZnktYWVzIjo0NiwiYnVmZmVyIjo3MCwiZXZwX2J5dGVzdG9rZXkiOjExOX1dLDEzNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFzbjEgPSByZXF1aXJlKCcuL2FzbjEnKQp2YXIgYWVzaWQgPSByZXF1aXJlKCcuL2Flc2lkLmpzb24nKQp2YXIgZml4UHJvYyA9IHJlcXVpcmUoJy4vZml4UHJvYycpCnZhciBjaXBoZXJzID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1hZXMnKQp2YXIgY29tcGF0ID0gcmVxdWlyZSgncGJrZGYyJykKbW9kdWxlLmV4cG9ydHMgPSBwYXJzZUtleXMKCmZ1bmN0aW9uIHBhcnNlS2V5cyAoYnVmZmVyKSB7CiAgdmFyIHBhc3N3b3JkCiAgaWYgKHR5cGVvZiBidWZmZXIgPT09ICdvYmplY3QnICYmICFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSkgewogICAgcGFzc3dvcmQgPSBidWZmZXIucGFzc3BocmFzZQogICAgYnVmZmVyID0gYnVmZmVyLmtleQogIH0KICBpZiAodHlwZW9mIGJ1ZmZlciA9PT0gJ3N0cmluZycpIHsKICAgIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyKQogIH0KCiAgdmFyIHN0cmlwcGVkID0gZml4UHJvYyhidWZmZXIsIHBhc3N3b3JkKQoKICB2YXIgdHlwZSA9IHN0cmlwcGVkLnRhZwogIHZhciBkYXRhID0gc3RyaXBwZWQuZGF0YQogIHZhciBzdWJ0eXBlLCBuZGF0YQogIHN3aXRjaCAodHlwZSkgewogICAgY2FzZSAnUFVCTElDIEtFWSc6CiAgICAgIG5kYXRhID0gYXNuMS5QdWJsaWNLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICBzdWJ0eXBlID0gbmRhdGEuYWxnb3JpdGhtLmFsZ29yaXRobS5qb2luKCcuJykKICAgICAgc3dpdGNoIChzdWJ0eXBlKSB7CiAgICAgICAgY2FzZSAnMS4yLjg0MC4xMTM1NDkuMS4xLjEnOgogICAgICAgICAgcmV0dXJuIGFzbjEuUlNBUHVibGljS2V5LmRlY29kZShuZGF0YS5zdWJqZWN0UHVibGljS2V5LmRhdGEsICdkZXInKQogICAgICAgIGNhc2UgJzEuMi44NDAuMTAwNDUuMi4xJzoKICAgICAgICAgIG5kYXRhLnN1YmplY3RQcml2YXRlS2V5ID0gbmRhdGEuc3ViamVjdFB1YmxpY0tleQogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdHlwZTogJ2VjJywKICAgICAgICAgICAgZGF0YTogbmRhdGEKICAgICAgICAgIH0KICAgICAgICBjYXNlICcxLjIuODQwLjEwMDQwLjQuMSc6CiAgICAgICAgICBuZGF0YS5hbGdvcml0aG0ucGFyYW1zLnB1Yl9rZXkgPSBhc24xLkRTQXBhcmFtLmRlY29kZShuZGF0YS5zdWJqZWN0UHVibGljS2V5LmRhdGEsICdkZXInKQogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdHlwZTogJ2RzYScsCiAgICAgICAgICAgIGRhdGE6IG5kYXRhLmFsZ29yaXRobS5wYXJhbXMKICAgICAgICAgIH0KICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24ga2V5IGlkICcgKyBzdWJ0eXBlKQogICAgICB9CiAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBrZXkgdHlwZSAnICsgdHlwZSkKICAgIGNhc2UgJ0VOQ1JZUFRFRCBQUklWQVRFIEtFWSc6CiAgICAgIGRhdGEgPSBhc24xLkVuY3J5cHRlZFByaXZhdGVLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICBkYXRhID0gZGVjcnlwdChkYXRhLCBwYXNzd29yZCkKICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgY2FzZSAnUFJJVkFURSBLRVknOgogICAgICBuZGF0YSA9IGFzbjEuUHJpdmF0ZUtleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICAgIHN1YnR5cGUgPSBuZGF0YS5hbGdvcml0aG0uYWxnb3JpdGhtLmpvaW4oJy4nKQogICAgICBzd2l0Y2ggKHN1YnR5cGUpIHsKICAgICAgICBjYXNlICcxLjIuODQwLjExMzU0OS4xLjEuMSc6CiAgICAgICAgICByZXR1cm4gYXNuMS5SU0FQcml2YXRlS2V5LmRlY29kZShuZGF0YS5zdWJqZWN0UHJpdmF0ZUtleSwgJ2RlcicpCiAgICAgICAgY2FzZSAnMS4yLjg0MC4xMDA0NS4yLjEnOgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY3VydmU6IG5kYXRhLmFsZ29yaXRobS5jdXJ2ZSwKICAgICAgICAgICAgcHJpdmF0ZUtleTogYXNuMS5FQ1ByaXZhdGVLZXkuZGVjb2RlKG5kYXRhLnN1YmplY3RQcml2YXRlS2V5LCAnZGVyJykucHJpdmF0ZUtleQogICAgICAgICAgfQogICAgICAgIGNhc2UgJzEuMi44NDAuMTAwNDAuNC4xJzoKICAgICAgICAgIG5kYXRhLmFsZ29yaXRobS5wYXJhbXMucHJpdl9rZXkgPSBhc24xLkRTQXBhcmFtLmRlY29kZShuZGF0YS5zdWJqZWN0UHJpdmF0ZUtleSwgJ2RlcicpCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0eXBlOiAnZHNhJywKICAgICAgICAgICAgcGFyYW1zOiBuZGF0YS5hbGdvcml0aG0ucGFyYW1zCiAgICAgICAgICB9CiAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSBpZCAnICsgc3VidHlwZSkKICAgICAgfQogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24ga2V5IHR5cGUgJyArIHR5cGUpCiAgICBjYXNlICdSU0EgUFVCTElDIEtFWSc6CiAgICAgIHJldHVybiBhc24xLlJTQVB1YmxpY0tleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICBjYXNlICdSU0EgUFJJVkFURSBLRVknOgogICAgICByZXR1cm4gYXNuMS5SU0FQcml2YXRlS2V5LmRlY29kZShkYXRhLCAnZGVyJykKICAgIGNhc2UgJ0RTQSBQUklWQVRFIEtFWSc6CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogJ2RzYScsCiAgICAgICAgcGFyYW1zOiBhc24xLkRTQVByaXZhdGVLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICB9CiAgICBjYXNlICdFQyBQUklWQVRFIEtFWSc6CiAgICAgIGRhdGEgPSBhc24xLkVDUHJpdmF0ZUtleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICAgIHJldHVybiB7CiAgICAgICAgY3VydmU6IGRhdGEucGFyYW1ldGVycy52YWx1ZSwKICAgICAgICBwcml2YXRlS2V5OiBkYXRhLnByaXZhdGVLZXkKICAgICAgfQogICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSB0eXBlICcgKyB0eXBlKQogIH0KfQpwYXJzZUtleXMuc2lnbmF0dXJlID0gYXNuMS5zaWduYXR1cmUKZnVuY3Rpb24gZGVjcnlwdCAoZGF0YSwgcGFzc3dvcmQpIHsKICB2YXIgc2FsdCA9IGRhdGEuYWxnb3JpdGhtLmRlY3J5cHQua2RlLmtkZXBhcmFtcy5zYWx0CiAgdmFyIGl0ZXJzID0gcGFyc2VJbnQoZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5rZGUua2RlcGFyYW1zLml0ZXJzLnRvU3RyaW5nKCksIDEwKQogIHZhciBhbGdvID0gYWVzaWRbZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5jaXBoZXIuYWxnby5qb2luKCcuJyldCiAgdmFyIGl2ID0gZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5jaXBoZXIuaXYKICB2YXIgY2lwaGVyVGV4dCA9IGRhdGEuc3ViamVjdFByaXZhdGVLZXkKICB2YXIga2V5bGVuID0gcGFyc2VJbnQoYWxnby5zcGxpdCgnLScpWzFdLCAxMCkgLyA4CiAgdmFyIGtleSA9IGNvbXBhdC5wYmtkZjJTeW5jKHBhc3N3b3JkLCBzYWx0LCBpdGVycywga2V5bGVuKQogIHZhciBjaXBoZXIgPSBjaXBoZXJzLmNyZWF0ZURlY2lwaGVyaXYoYWxnbywga2V5LCBpdikKICB2YXIgb3V0ID0gW10KICBvdXQucHVzaChjaXBoZXIudXBkYXRlKGNpcGhlclRleHQpKQogIG91dC5wdXNoKGNpcGhlci5maW5hbCgpKQogIHJldHVybiBCdWZmZXIuY29uY2F0KG91dCkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYWVzaWQuanNvbiI6MTMzLCIuL2FzbjEiOjEzNCwiLi9maXhQcm9jIjoxMzUsImJyb3dzZXJpZnktYWVzIjo0NiwiYnVmZmVyIjo3MCwicGJrZGYyIjoxMzd9XSwxMzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBjcmVhdGVIbWFjID0gcmVxdWlyZSgnY3JlYXRlLWhtYWMnKQp2YXIgTUFYX0FMTE9DID0gTWF0aC5wb3coMiwgMzApIC0gMSAvLyBkZWZhdWx0IGluIGlvanMKCmV4cG9ydHMucGJrZGYyID0gcGJrZGYyCmZ1bmN0aW9uIHBia2RmMiAocGFzc3dvcmQsIHNhbHQsIGl0ZXJhdGlvbnMsIGtleWxlbiwgZGlnZXN0LCBjYWxsYmFjaykgewogIGlmICh0eXBlb2YgZGlnZXN0ID09PSAnZnVuY3Rpb24nKSB7CiAgICBjYWxsYmFjayA9IGRpZ2VzdAogICAgZGlnZXN0ID0gdW5kZWZpbmVkCiAgfQoKICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNhbGxiYWNrIHByb3ZpZGVkIHRvIHBia2RmMicpCiAgfQoKICB2YXIgcmVzdWx0ID0gcGJrZGYyU3luYyhwYXNzd29yZCwgc2FsdCwgaXRlcmF0aW9ucywga2V5bGVuLCBkaWdlc3QpCiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICBjYWxsYmFjayh1bmRlZmluZWQsIHJlc3VsdCkKICB9KQp9CgpleHBvcnRzLnBia2RmMlN5bmMgPSBwYmtkZjJTeW5jCmZ1bmN0aW9uIHBia2RmMlN5bmMgKHBhc3N3b3JkLCBzYWx0LCBpdGVyYXRpb25zLCBrZXlsZW4sIGRpZ2VzdCkgewogIGlmICh0eXBlb2YgaXRlcmF0aW9ucyAhPT0gJ251bWJlcicpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0l0ZXJhdGlvbnMgbm90IGEgbnVtYmVyJykKICB9CgogIGlmIChpdGVyYXRpb25zIDwgMCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQmFkIGl0ZXJhdGlvbnMnKQogIH0KCiAgaWYgKHR5cGVvZiBrZXlsZW4gIT09ICdudW1iZXInKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdLZXkgbGVuZ3RoIG5vdCBhIG51bWJlcicpCiAgfQoKICBpZiAoa2V5bGVuIDwgMCB8fCBrZXlsZW4gPiBNQVhfQUxMT0MpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JhZCBrZXkgbGVuZ3RoJykKICB9CgogIGRpZ2VzdCA9IGRpZ2VzdCB8fCAnc2hhMScKCiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIocGFzc3dvcmQpKSBwYXNzd29yZCA9IG5ldyBCdWZmZXIocGFzc3dvcmQsICdiaW5hcnknKQogIGlmICghQnVmZmVyLmlzQnVmZmVyKHNhbHQpKSBzYWx0ID0gbmV3IEJ1ZmZlcihzYWx0LCAnYmluYXJ5JykKCiAgdmFyIGhMZW4KICB2YXIgbCA9IDEKICB2YXIgREsgPSBuZXcgQnVmZmVyKGtleWxlbikKICB2YXIgYmxvY2sxID0gbmV3IEJ1ZmZlcihzYWx0Lmxlbmd0aCArIDQpCiAgc2FsdC5jb3B5KGJsb2NrMSwgMCwgMCwgc2FsdC5sZW5ndGgpCgogIHZhciByCiAgdmFyIFQKCiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gbDsgaSsrKSB7CiAgICBibG9jazEud3JpdGVVSW50MzJCRShpLCBzYWx0Lmxlbmd0aCkKICAgIHZhciBVID0gY3JlYXRlSG1hYyhkaWdlc3QsIHBhc3N3b3JkKS51cGRhdGUoYmxvY2sxKS5kaWdlc3QoKQoKICAgIGlmICghaExlbikgewogICAgICBoTGVuID0gVS5sZW5ndGgKICAgICAgVCA9IG5ldyBCdWZmZXIoaExlbikKICAgICAgbCA9IE1hdGguY2VpbChrZXlsZW4gLyBoTGVuKQogICAgICByID0ga2V5bGVuIC0gKGwgLSAxKSAqIGhMZW4KICAgIH0KCiAgICBVLmNvcHkoVCwgMCwgMCwgaExlbikKCiAgICBmb3IgKHZhciBqID0gMTsgaiA8IGl0ZXJhdGlvbnM7IGorKykgewogICAgICBVID0gY3JlYXRlSG1hYyhkaWdlc3QsIHBhc3N3b3JkKS51cGRhdGUoVSkuZGlnZXN0KCkKCiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgaExlbjsgaysrKSB7CiAgICAgICAgVFtrXSBePSBVW2tdCiAgICAgIH0KICAgIH0KCiAgICB2YXIgZGVzdFBvcyA9IChpIC0gMSkgKiBoTGVuCiAgICB2YXIgbGVuID0gKGkgPT09IGwgPyByIDogaExlbikKICAgIFQuY29weShESywgZGVzdFBvcywgMCwgbGVuKQogIH0KCiAgcmV0dXJuIERLCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwLCJjcmVhdGUtaG1hYyI6ODV9XSwxMzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKHByb2Nlc3MpewondXNlIHN0cmljdCc7CgppZiAoIXByb2Nlc3MudmVyc2lvbiB8fAogICAgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YwLicpID09PSAwIHx8CiAgICBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjEuJykgPT09IDAgJiYgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YxLjguJykgIT09IDApIHsKICBtb2R1bGUuZXhwb3J0cyA9IG5leHRUaWNrOwp9IGVsc2UgewogIG1vZHVsZS5leHBvcnRzID0gcHJvY2Vzcy5uZXh0VGljazsKfQoKZnVuY3Rpb24gbmV4dFRpY2soZm4pIHsKICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7CiAgdmFyIGkgPSAwOwogIHdoaWxlIChpIDwgYXJncy5sZW5ndGgpIHsKICAgIGFyZ3NbaSsrXSA9IGFyZ3VtZW50c1tpXTsKICB9CiAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2soKSB7CiAgICBmbi5hcHBseShudWxsLCBhcmdzKTsKICB9KTsKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpCn0seyJfcHJvY2VzcyI6MTM5fV0sMTM5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyCgp2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307CnZhciBxdWV1ZSA9IFtdOwp2YXIgZHJhaW5pbmcgPSBmYWxzZTsKdmFyIGN1cnJlbnRRdWV1ZTsKdmFyIHF1ZXVlSW5kZXggPSAtMTsKCmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHsKICAgIGRyYWluaW5nID0gZmFsc2U7CiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkgewogICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7CiAgICB9IGVsc2UgewogICAgICAgIHF1ZXVlSW5kZXggPSAtMTsKICAgIH0KICAgIGlmIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgICBkcmFpblF1ZXVlKCk7CiAgICB9Cn0KCmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7CiAgICBpZiAoZHJhaW5pbmcpIHsKICAgICAgICByZXR1cm47CiAgICB9CiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTsKICAgIGRyYWluaW5nID0gdHJ1ZTsKCiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoOwogICAgd2hpbGUobGVuKSB7CiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7CiAgICAgICAgcXVldWUgPSBbXTsKICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBxdWV1ZUluZGV4ID0gLTE7CiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoOwogICAgfQogICAgY3VycmVudFF1ZXVlID0gbnVsbDsKICAgIGRyYWluaW5nID0gZmFsc2U7CiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7Cn0KCnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7CiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTsKICAgICAgICB9CiAgICB9CiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpOwogICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHsKICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApOwogICAgfQp9OwoKLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0cwpmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHsKICAgIHRoaXMuZnVuID0gZnVuOwogICAgdGhpcy5hcnJheSA9IGFycmF5Owp9Ckl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpOwp9Owpwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInOwpwcm9jZXNzLmJyb3dzZXIgPSB0cnVlOwpwcm9jZXNzLmVudiA9IHt9Owpwcm9jZXNzLmFyZ3YgPSBbXTsKcHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzCnByb2Nlc3MudmVyc2lvbnMgPSB7fTsKCmZ1bmN0aW9uIG5vb3AoKSB7fQoKcHJvY2Vzcy5vbiA9IG5vb3A7CnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wOwpwcm9jZXNzLm9uY2UgPSBub29wOwpwcm9jZXNzLm9mZiA9IG5vb3A7CnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wOwpwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7CnByb2Nlc3MuZW1pdCA9IG5vb3A7Cgpwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpOwp9OwoKcHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTsKcHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHsKICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7Cn07CnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07Cgp9LHt9XSwxNDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzLnB1YmxpY0VuY3J5cHQgPSByZXF1aXJlKCcuL3B1YmxpY0VuY3J5cHQnKTsKZXhwb3J0cy5wcml2YXRlRGVjcnlwdCA9IHJlcXVpcmUoJy4vcHJpdmF0ZURlY3J5cHQnKTsKCmV4cG9ydHMucHJpdmF0ZUVuY3J5cHQgPSBmdW5jdGlvbiBwcml2YXRlRW5jcnlwdChrZXksIGJ1ZikgewogIHJldHVybiBleHBvcnRzLnB1YmxpY0VuY3J5cHQoa2V5LCBidWYsIHRydWUpOwp9OwoKZXhwb3J0cy5wdWJsaWNEZWNyeXB0ID0gZnVuY3Rpb24gcHVibGljRGVjcnlwdChrZXksIGJ1ZikgewogIHJldHVybiBleHBvcnRzLnByaXZhdGVEZWNyeXB0KGtleSwgYnVmLCB0cnVlKTsKfTsKfSx7Ii4vcHJpdmF0ZURlY3J5cHQiOjE0MiwiLi9wdWJsaWNFbmNyeXB0IjoxNDN9XSwxNDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBjcmVhdGVIYXNoID0gcmVxdWlyZSgnY3JlYXRlLWhhc2gnKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VlZCwgbGVuKSB7CiAgdmFyIHQgPSBuZXcgQnVmZmVyKCcnKTsKICB2YXIgIGkgPSAwLCBjOwogIHdoaWxlICh0Lmxlbmd0aCA8IGxlbikgewogICAgYyA9IGkyb3BzKGkrKyk7CiAgICB0ID0gQnVmZmVyLmNvbmNhdChbdCwgY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShzZWVkKS51cGRhdGUoYykuZGlnZXN0KCldKTsKICB9CiAgcmV0dXJuIHQuc2xpY2UoMCwgbGVuKTsKfTsKCmZ1bmN0aW9uIGkyb3BzKGMpIHsKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcig0KTsKICBvdXQud3JpdGVVSW50MzJCRShjLDApOwogIHJldHVybiBvdXQ7Cn0KfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzAsImNyZWF0ZS1oYXNoIjo4Mn1dLDE0MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHBhcnNlS2V5cyA9IHJlcXVpcmUoJ3BhcnNlLWFzbjEnKTsKdmFyIG1nZiA9IHJlcXVpcmUoJy4vbWdmJyk7CnZhciB4b3IgPSByZXF1aXJlKCcuL3hvcicpOwp2YXIgYm4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgY3J0ID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1yc2EnKTsKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpOwp2YXIgd2l0aFB1YmxpYyA9IHJlcXVpcmUoJy4vd2l0aFB1YmxpYycpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHByaXZhdGVEZWNyeXB0KHByaXZhdGVfa2V5LCBlbmMsIHJldmVyc2UpIHsKICB2YXIgcGFkZGluZzsKICBpZiAocHJpdmF0ZV9rZXkucGFkZGluZykgewogICAgcGFkZGluZyA9IHByaXZhdGVfa2V5LnBhZGRpbmc7CiAgfSBlbHNlIGlmIChyZXZlcnNlKSB7CiAgICBwYWRkaW5nID0gMTsKICB9IGVsc2UgewogICAgcGFkZGluZyA9IDQ7CiAgfQogIAogIHZhciBrZXkgPSBwYXJzZUtleXMocHJpdmF0ZV9rZXkpOwogIHZhciBrID0ga2V5Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpOwogIGlmIChlbmMubGVuZ3RoID4gayB8fCBuZXcgYm4oZW5jKS5jbXAoa2V5Lm1vZHVsdXMpID49IDApIHsKICAgIHRocm93IG5ldyBFcnJvcignZGVjcnlwdGlvbiBlcnJvcicpOwogIH0KICB2YXIgbXNnOwogIGlmIChyZXZlcnNlKSB7CiAgICBtc2cgPSB3aXRoUHVibGljKG5ldyBibihlbmMpLCBrZXkpOwogIH0gZWxzZSB7CiAgICBtc2cgPSBjcnQoZW5jLCBrZXkpOwogIH0KICB2YXIgekJ1ZmZlciA9IG5ldyBCdWZmZXIoayAtIG1zZy5sZW5ndGgpOwogIHpCdWZmZXIuZmlsbCgwKTsKICBtc2cgPSBCdWZmZXIuY29uY2F0KFt6QnVmZmVyLCBtc2ddLCBrKTsKICBpZiAocGFkZGluZyA9PT0gNCkgewogICAgcmV0dXJuIG9hZXAoa2V5LCBtc2cpOwogIH0gZWxzZSBpZiAocGFkZGluZyA9PT0gMSkgewogICAgcmV0dXJuIHBrY3MxKGtleSwgbXNnLCByZXZlcnNlKTsKICB9IGVsc2UgaWYgKHBhZGRpbmcgPT09IDMpIHsKICAgIHJldHVybiBtc2c7CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBwYWRkaW5nJyk7CiAgfQp9OwoKZnVuY3Rpb24gb2FlcChrZXksIG1zZyl7CiAgdmFyIG4gPSBrZXkubW9kdWx1czsKICB2YXIgayA9IGtleS5tb2R1bHVzLmJ5dGVMZW5ndGgoKTsKICB2YXIgbUxlbiA9IG1zZy5sZW5ndGg7CiAgdmFyIGlIYXNoID0gY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShuZXcgQnVmZmVyKCcnKSkuZGlnZXN0KCk7CiAgdmFyIGhMZW4gPSBpSGFzaC5sZW5ndGg7CiAgdmFyIGhMZW4yID0gMiAqIGhMZW47CiAgaWYgKG1zZ1swXSAhPT0gMCkgewogICAgdGhyb3cgbmV3IEVycm9yKCdkZWNyeXB0aW9uIGVycm9yJyk7CiAgfQogIHZhciBtYXNrZWRTZWVkID0gbXNnLnNsaWNlKDEsIGhMZW4gKyAxKTsKICB2YXIgbWFza2VkRGIgPSAgbXNnLnNsaWNlKGhMZW4gKyAxKTsKICB2YXIgc2VlZCA9IHhvcihtYXNrZWRTZWVkLCBtZ2YobWFza2VkRGIsIGhMZW4pKTsKICB2YXIgZGIgPSB4b3IobWFza2VkRGIsIG1nZihzZWVkLCBrIC0gaExlbiAtIDEpKTsKICBpZiAoY29tcGFyZShpSGFzaCwgZGIuc2xpY2UoMCwgaExlbikpKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlY3J5cHRpb24gZXJyb3InKTsKICB9CiAgdmFyIGkgPSBoTGVuOwogIHdoaWxlIChkYltpXSA9PT0gMCkgewogICAgaSsrOwogIH0KICBpZiAoZGJbaSsrXSAhPT0gMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdkZWNyeXB0aW9uIGVycm9yJyk7CiAgfQogIHJldHVybiBkYi5zbGljZShpKTsKfQoKZnVuY3Rpb24gcGtjczEoa2V5LCBtc2csIHJldmVyc2UpewogIHZhciBwMSA9IG1zZy5zbGljZSgwLCAyKTsKICB2YXIgaSA9IDI7CiAgdmFyIHN0YXR1cyA9IDA7CiAgd2hpbGUgKG1zZ1tpKytdICE9PSAwKSB7CiAgICBpZiAoaSA+PSBtc2cubGVuZ3RoKSB7CiAgICAgIHN0YXR1cysrOwogICAgICBicmVhazsKICAgIH0KICB9CiAgdmFyIHBzID0gbXNnLnNsaWNlKDIsIGkgLSAxKTsKICB2YXIgcDIgPSBtc2cuc2xpY2UoaSAtIDEsIGkpOwoKICBpZiAoKHAxLnRvU3RyaW5nKCdoZXgnKSAhPT0gJzAwMDInICYmICFyZXZlcnNlKSB8fCAocDEudG9TdHJpbmcoJ2hleCcpICE9PSAnMDAwMScgJiYgcmV2ZXJzZSkpewogICAgc3RhdHVzKys7CiAgfQogIGlmIChwcy5sZW5ndGggPCA4KSB7CiAgICBzdGF0dXMrKzsKICB9CiAgaWYgKHN0YXR1cykgewogICAgdGhyb3cgbmV3IEVycm9yKCdkZWNyeXB0aW9uIGVycm9yJyk7CiAgfQogIHJldHVybiAgbXNnLnNsaWNlKGkpOwp9CmZ1bmN0aW9uIGNvbXBhcmUoYSwgYil7CiAgYSA9IG5ldyBCdWZmZXIoYSk7CiAgYiA9IG5ldyBCdWZmZXIoYik7CiAgdmFyIGRpZiA9IDA7CiAgdmFyIGxlbiA9IGEubGVuZ3RoOwogIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHsKICAgIGRpZisrOwogICAgbGVuID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKTsKICB9CiAgdmFyIGkgPSAtMTsKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBkaWYgKz0gKGFbaV0gXiBiW2ldKTsKICB9CiAgcmV0dXJuIGRpZjsKfQp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9tZ2YiOjE0MSwiLi93aXRoUHVibGljIjoxNDQsIi4veG9yIjoxNDUsImJuLmpzIjo0MSwiYnJvd3NlcmlmeS1yc2EiOjYyLCJidWZmZXIiOjcwLCJjcmVhdGUtaGFzaCI6ODIsInBhcnNlLWFzbjEiOjEzNn1dLDE0MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHBhcnNlS2V5cyA9IHJlcXVpcmUoJ3BhcnNlLWFzbjEnKTsKdmFyIHJhbmRvbUJ5dGVzID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKTsKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpOwp2YXIgbWdmID0gcmVxdWlyZSgnLi9tZ2YnKTsKdmFyIHhvciA9IHJlcXVpcmUoJy4veG9yJyk7CnZhciBibiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciB3aXRoUHVibGljID0gcmVxdWlyZSgnLi93aXRoUHVibGljJyk7CnZhciBjcnQgPSByZXF1aXJlKCdicm93c2VyaWZ5LXJzYScpOwoKdmFyIGNvbnN0YW50cyA9IHsKICBSU0FfUEtDUzFfT0FFUF9QQURESU5HOiA0LAogIFJTQV9QS0NTMV9QQURESU46IDEsCiAgUlNBX05PX1BBRERJTkc6IDMKfTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcHVibGljRW5jcnlwdChwdWJsaWNfa2V5LCBtc2csIHJldmVyc2UpIHsKICB2YXIgcGFkZGluZzsKICBpZiAocHVibGljX2tleS5wYWRkaW5nKSB7CiAgICBwYWRkaW5nID0gcHVibGljX2tleS5wYWRkaW5nOwogIH0gZWxzZSBpZiAocmV2ZXJzZSkgewogICAgcGFkZGluZyA9IDE7CiAgfSBlbHNlIHsKICAgIHBhZGRpbmcgPSA0OwogIH0KICB2YXIga2V5ID0gcGFyc2VLZXlzKHB1YmxpY19rZXkpOwogIHZhciBwYWRkZWRNc2c7CiAgaWYgKHBhZGRpbmcgPT09IDQpIHsKICAgIHBhZGRlZE1zZyA9IG9hZXAoa2V5LCBtc2cpOwogIH0gZWxzZSBpZiAocGFkZGluZyA9PT0gMSkgewogICAgcGFkZGVkTXNnID0gcGtjczEoa2V5LCBtc2csIHJldmVyc2UpOwogIH0gZWxzZSBpZiAocGFkZGluZyA9PT0gMykgewogICAgcGFkZGVkTXNnID0gbmV3IGJuKG1zZyk7CiAgICBpZiAocGFkZGVkTXNnLmNtcChrZXkubW9kdWx1cykgPj0gMCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdG9vIGxvbmcgZm9yIG1vZHVsdXMnKTsKICAgIH0KICB9IGVsc2UgewogICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIHBhZGRpbmcnKTsKICB9CiAgaWYgKHJldmVyc2UpIHsKICAgIHJldHVybiBjcnQocGFkZGVkTXNnLCBrZXkpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gd2l0aFB1YmxpYyhwYWRkZWRNc2csIGtleSk7CiAgfQp9OwoKZnVuY3Rpb24gb2FlcChrZXksIG1zZyl7CiAgdmFyIGsgPSBrZXkubW9kdWx1cy5ieXRlTGVuZ3RoKCk7CiAgdmFyIG1MZW4gPSBtc2cubGVuZ3RoOwogIHZhciBpSGFzaCA9IGNyZWF0ZUhhc2goJ3NoYTEnKS51cGRhdGUobmV3IEJ1ZmZlcignJykpLmRpZ2VzdCgpOwogIHZhciBoTGVuID0gaUhhc2gubGVuZ3RoOwogIHZhciBoTGVuMiA9IDIgKiBoTGVuOwogIGlmIChtTGVuID4gayAtIGhMZW4yIC0gMikgewogICAgdGhyb3cgbmV3IEVycm9yKCdtZXNzYWdlIHRvbyBsb25nJyk7CiAgfQogIHZhciBwcyA9IG5ldyBCdWZmZXIoayAtIG1MZW4gLSBoTGVuMiAtIDIpOwogIHBzLmZpbGwoMCk7CiAgdmFyIGRibGVuID0gayAtIGhMZW4gLSAxOwogIHZhciBzZWVkID0gcmFuZG9tQnl0ZXMoaExlbik7CiAgdmFyIG1hc2tlZERiID0geG9yKEJ1ZmZlci5jb25jYXQoW2lIYXNoLCBwcywgbmV3IEJ1ZmZlcihbMV0pLCBtc2ddLCBkYmxlbiksIG1nZihzZWVkLCBkYmxlbikpOwogIHZhciBtYXNrZWRTZWVkID0geG9yKHNlZWQsIG1nZihtYXNrZWREYiwgaExlbikpOwogIHJldHVybiBuZXcgYm4oQnVmZmVyLmNvbmNhdChbbmV3IEJ1ZmZlcihbMF0pLCBtYXNrZWRTZWVkLCBtYXNrZWREYl0sIGspKTsKfQpmdW5jdGlvbiBwa2NzMShrZXksIG1zZywgcmV2ZXJzZSl7CiAgdmFyIG1MZW4gPSBtc2cubGVuZ3RoOwogIHZhciBrID0ga2V5Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpOwogIGlmIChtTGVuID4gayAtIDExKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ21lc3NhZ2UgdG9vIGxvbmcnKTsKICB9CiAgdmFyIHBzOwogIGlmIChyZXZlcnNlKSB7CiAgICBwcyA9IG5ldyBCdWZmZXIoayAtIG1MZW4gLSAzKTsKICAgIHBzLmZpbGwoMHhmZik7CiAgfSBlbHNlIHsKICAgIHBzID0gbm9uWmVybyhrIC0gbUxlbiAtIDMpOwogIH0KICByZXR1cm4gbmV3IGJuKEJ1ZmZlci5jb25jYXQoW25ldyBCdWZmZXIoWzAsIHJldmVyc2U/MToyXSksIHBzLCBuZXcgQnVmZmVyKFswXSksIG1zZ10sIGspKTsKfQpmdW5jdGlvbiBub25aZXJvKGxlbiwgY3J5cHRvKSB7CiAgdmFyIG91dCA9IG5ldyBCdWZmZXIobGVuKTsKICB2YXIgaSA9IDA7CiAgdmFyIGNhY2hlID0gcmFuZG9tQnl0ZXMobGVuKjIpOwogIHZhciBjdXIgPSAwOwogIHZhciBudW07CiAgd2hpbGUgKGkgPCBsZW4pIHsKICAgIGlmIChjdXIgPT09IGNhY2hlLmxlbmd0aCkgewogICAgICBjYWNoZSA9IHJhbmRvbUJ5dGVzKGxlbioyKTsKICAgICAgY3VyID0gMDsKICAgIH0KICAgIG51bSA9IGNhY2hlW2N1cisrXTsKICAgIGlmIChudW0pIHsKICAgICAgb3V0W2krK10gPSBudW07CiAgICB9CiAgfQogIHJldHVybiBvdXQ7Cn0KfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vbWdmIjoxNDEsIi4vd2l0aFB1YmxpYyI6MTQ0LCIuL3hvciI6MTQ1LCJibi5qcyI6NDEsImJyb3dzZXJpZnktcnNhIjo2MiwiYnVmZmVyIjo3MCwiY3JlYXRlLWhhc2giOjgyLCJwYXJzZS1hc24xIjoxMzYsInJhbmRvbWJ5dGVzIjoxNDZ9XSwxNDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBibiA9IHJlcXVpcmUoJ2JuLmpzJyk7CmZ1bmN0aW9uIHdpdGhQdWJsaWMocGFkZGVkTXNnLCBrZXkpIHsKICByZXR1cm4gbmV3IEJ1ZmZlcihwYWRkZWRNc2cKICAgIC50b1JlZChibi5tb250KGtleS5tb2R1bHVzKSkKICAgIC5yZWRQb3cobmV3IGJuKGtleS5wdWJsaWNFeHBvbmVudCkpCiAgICAuZnJvbVJlZCgpCiAgICAudG9BcnJheSgpKTsKfQoKbW9kdWxlLmV4cG9ydHMgPSB3aXRoUHVibGljOwp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYm4uanMiOjQxLCJidWZmZXIiOjcwfV0sMTQ1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB4b3IoYSwgYikgewogIHZhciBsZW4gPSBhLmxlbmd0aDsKICB2YXIgaSA9IC0xOwogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIGFbaV0gXj0gYltpXTsKICB9CiAgcmV0dXJuIGEKfTsKfSx7fV0sMTQ2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCxCdWZmZXIpewondXNlIHN0cmljdCcKCmZ1bmN0aW9uIG9sZEJyb3dzZXIgKCkgewogIHRocm93IG5ldyBFcnJvcignc2VjdXJlIHJhbmRvbSBudW1iZXIgZ2VuZXJhdGlvbiBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3NlclxudXNlIGNocm9tZSwgRmlyZUZveCBvciBJbnRlcm5ldCBFeHBsb3JlciAxMScpCn0KCnZhciBjcnlwdG8gPSBnbG9iYWwuY3J5cHRvIHx8IGdsb2JhbC5tc0NyeXB0bwoKaWYgKGNyeXB0byAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7CiAgbW9kdWxlLmV4cG9ydHMgPSByYW5kb21CeXRlcwp9IGVsc2UgewogIG1vZHVsZS5leHBvcnRzID0gb2xkQnJvd3Nlcgp9CgpmdW5jdGlvbiByYW5kb21CeXRlcyAoc2l6ZSwgY2IpIHsKICAvLyBwaGFudG9tanMgbmVlZHMgdG8gdGhyb3cKICBpZiAoc2l6ZSA+IDY1NTM2KSB0aHJvdyBuZXcgRXJyb3IoJ3JlcXVlc3RlZCB0b28gbWFueSByYW5kb20gYnl0ZXMnKQogIC8vIGluIGNhc2UgYnJvd3NlcmlmeSAgaXNuJ3QgdXNpbmcgdGhlIFVpbnQ4QXJyYXkgdmVyc2lvbgogIHZhciByYXdCeXRlcyA9IG5ldyBnbG9iYWwuVWludDhBcnJheShzaXplKQoKICAvLyBUaGlzIHdpbGwgbm90IHdvcmsgaW4gb2xkZXIgYnJvd3NlcnMuCiAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS93aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcwogIGlmIChzaXplID4gMCkgeyAgLy8gZ2V0UmFuZG9tVmFsdWVzIGZhaWxzIG9uIElFIGlmIHNpemUgPT0gMAogICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhyYXdCeXRlcykKICB9CiAgLy8gcGhhbnRvbWpzIGRvZXNuJ3QgbGlrZSBhIGJ1ZmZlciBiZWluZyBwYXNzZWQgaGVyZQogIHZhciBieXRlcyA9IG5ldyBCdWZmZXIocmF3Qnl0ZXMuYnVmZmVyKQoKICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIGNiKG51bGwsIGJ5dGVzKQogICAgfSkKICB9CgogIHJldHVybiBieXRlcwp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9LHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Il9wcm9jZXNzIjoxMzksImJ1ZmZlciI6NzB9XSwxNDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoIi4vbGliL19zdHJlYW1fZHVwbGV4LmpzIikKCn0seyIuL2xpYi9fc3RyZWFtX2R1cGxleC5qcyI6MTQ4fV0sMTQ4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gYSBkdXBsZXggc3RyZWFtIGlzIGp1c3QgYSBzdHJlYW0gdGhhdCBpcyBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZS4KLy8gU2luY2UgSlMgZG9lc24ndCBoYXZlIG11bHRpcGxlIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UsIHRoaXMgY2xhc3MKLy8gcHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gUmVhZGFibGUsIGFuZCB0aGVuIHBhcmFzaXRpY2FsbHkgZnJvbQovLyBXcml0YWJsZS4KCid1c2Ugc3RyaWN0JzsKCi8qPHJlcGxhY2VtZW50PiovCgp2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHsKICB2YXIga2V5cyA9IFtdOwogIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgIGtleXMucHVzaChrZXkpOwogIH1yZXR1cm4ga2V5czsKfTsKLyo8L3JlcGxhY2VtZW50PiovCgptb2R1bGUuZXhwb3J0cyA9IER1cGxleDsKCi8qPHJlcGxhY2VtZW50PiovCnZhciBwcm9jZXNzTmV4dFRpY2sgPSByZXF1aXJlKCdwcm9jZXNzLW5leHRpY2stYXJncycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7CnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCnZhciBSZWFkYWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV9yZWFkYWJsZScpOwp2YXIgV3JpdGFibGUgPSByZXF1aXJlKCcuL19zdHJlYW1fd3JpdGFibGUnKTsKCnV0aWwuaW5oZXJpdHMoRHVwbGV4LCBSZWFkYWJsZSk7Cgp2YXIga2V5cyA9IG9iamVjdEtleXMoV3JpdGFibGUucHJvdG90eXBlKTsKZm9yICh2YXIgdiA9IDA7IHYgPCBrZXlzLmxlbmd0aDsgdisrKSB7CiAgdmFyIG1ldGhvZCA9IGtleXNbdl07CiAgaWYgKCFEdXBsZXgucHJvdG90eXBlW21ldGhvZF0pIER1cGxleC5wcm90b3R5cGVbbWV0aG9kXSA9IFdyaXRhYmxlLnByb3RvdHlwZVttZXRob2RdOwp9CgpmdW5jdGlvbiBEdXBsZXgob3B0aW9ucykgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKSByZXR1cm4gbmV3IER1cGxleChvcHRpb25zKTsKCiAgUmVhZGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTsKICBXcml0YWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpOwoKICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJlYWRhYmxlID09PSBmYWxzZSkgdGhpcy5yZWFkYWJsZSA9IGZhbHNlOwoKICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLndyaXRhYmxlID09PSBmYWxzZSkgdGhpcy53cml0YWJsZSA9IGZhbHNlOwoKICB0aGlzLmFsbG93SGFsZk9wZW4gPSB0cnVlOwogIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWxsb3dIYWxmT3BlbiA9PT0gZmFsc2UpIHRoaXMuYWxsb3dIYWxmT3BlbiA9IGZhbHNlOwoKICB0aGlzLm9uY2UoJ2VuZCcsIG9uZW5kKTsKfQoKLy8gdGhlIG5vLWhhbGYtb3BlbiBlbmZvcmNlcgpmdW5jdGlvbiBvbmVuZCgpIHsKICAvLyBpZiB3ZSBhbGxvdyBoYWxmLW9wZW4gc3RhdGUsIG9yIGlmIHRoZSB3cml0YWJsZSBzaWRlIGVuZGVkLAogIC8vIHRoZW4gd2UncmUgb2suCiAgaWYgKHRoaXMuYWxsb3dIYWxmT3BlbiB8fCB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkKSByZXR1cm47CgogIC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi4KICAvLyBCdXQgYWxsb3cgbW9yZSB3cml0ZXMgdG8gaGFwcGVuIGluIHRoaXMgdGljay4KICBwcm9jZXNzTmV4dFRpY2sob25FbmROVCwgdGhpcyk7Cn0KCmZ1bmN0aW9uIG9uRW5kTlQoc2VsZikgewogIHNlbGYuZW5kKCk7Cn0KCmZ1bmN0aW9uIGZvckVhY2goeHMsIGYpIHsKICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgZih4c1tpXSwgaSk7CiAgfQp9Cn0seyIuL19zdHJlYW1fcmVhZGFibGUiOjE1MCwiLi9fc3RyZWFtX3dyaXRhYmxlIjoxNTIsImNvcmUtdXRpbC1pcyI6ODAsImluaGVyaXRzIjoxMjgsInByb2Nlc3MtbmV4dGljay1hcmdzIjoxMzh9XSwxNDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBhIHBhc3N0aHJvdWdoIHN0cmVhbS4KLy8gYmFzaWNhbGx5IGp1c3QgdGhlIG1vc3QgbWluaW1hbCBzb3J0IG9mIFRyYW5zZm9ybSBzdHJlYW0uCi8vIEV2ZXJ5IHdyaXR0ZW4gY2h1bmsgZ2V0cyBvdXRwdXQgYXMtaXMuCgondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IFBhc3NUaHJvdWdoOwoKdmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vX3N0cmVhbV90cmFuc2Zvcm0nKTsKCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7CnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCnV0aWwuaW5oZXJpdHMoUGFzc1Rocm91Z2gsIFRyYW5zZm9ybSk7CgpmdW5jdGlvbiBQYXNzVGhyb3VnaChvcHRpb25zKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFBhc3NUaHJvdWdoKSkgcmV0dXJuIG5ldyBQYXNzVGhyb3VnaChvcHRpb25zKTsKCiAgVHJhbnNmb3JtLmNhbGwodGhpcywgb3B0aW9ucyk7Cn0KClBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICBjYihudWxsLCBjaHVuayk7Cn07Cn0seyIuL19zdHJlYW1fdHJhbnNmb3JtIjoxNTEsImNvcmUtdXRpbC1pcyI6ODAsImluaGVyaXRzIjoxMjh9XSwxNTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKHByb2Nlc3MpewondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlOwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIHByb2Nlc3NOZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MtbmV4dGljay1hcmdzJyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKLyo8L3JlcGxhY2VtZW50PiovCgpSZWFkYWJsZS5SZWFkYWJsZVN0YXRlID0gUmVhZGFibGVTdGF0ZTsKCnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpOwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIEVFbGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uIChlbWl0dGVyLCB0eXBlKSB7CiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJzKHR5cGUpLmxlbmd0aDsKfTsKLyo8L3JlcGxhY2VtZW50PiovCgovKjxyZXBsYWNlbWVudD4qLwp2YXIgU3RyZWFtOwooZnVuY3Rpb24gKCkgewogIHRyeSB7CiAgICBTdHJlYW0gPSByZXF1aXJlKCdzdCcgKyAncmVhbScpOwogIH0gY2F0Y2ggKF8pIHt9IGZpbmFsbHkgewogICAgaWYgKCFTdHJlYW0pIFN0cmVhbSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjsKICB9Cn0pKCk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7CnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciBkZWJ1Z1V0aWwgPSByZXF1aXJlKCd1dGlsJyk7CnZhciBkZWJ1ZyA9IHVuZGVmaW5lZDsKaWYgKGRlYnVnVXRpbCAmJiBkZWJ1Z1V0aWwuZGVidWdsb2cpIHsKICBkZWJ1ZyA9IGRlYnVnVXRpbC5kZWJ1Z2xvZygnc3RyZWFtJyk7Cn0gZWxzZSB7CiAgZGVidWcgPSBmdW5jdGlvbiAoKSB7fTsKfQovKjwvcmVwbGFjZW1lbnQ+Ki8KCnZhciBTdHJpbmdEZWNvZGVyOwoKdXRpbC5pbmhlcml0cyhSZWFkYWJsZSwgU3RyZWFtKTsKCnZhciBEdXBsZXg7CmZ1bmN0aW9uIFJlYWRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7CiAgRHVwbGV4ID0gRHVwbGV4IHx8IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTsKCiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogIC8vIG9iamVjdCBzdHJlYW0gZmxhZy4gVXNlZCB0byBtYWtlIHJlYWQobikgaWdub3JlIG4gYW5kIHRvCiAgLy8gbWFrZSBhbGwgdGhlIGJ1ZmZlciBtZXJnaW5nIGFuZCBsZW5ndGggY2hlY2tzIGdvIGF3YXkKICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTsKCiAgaWYgKHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleCkgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy5yZWFkYWJsZU9iamVjdE1vZGU7CgogIC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyCiAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyAiZG9uJ3QgY2FsbCBfcmVhZCBwcmVlbXB0aXZlbHkgZXZlciIKICB2YXIgaHdtID0gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrOwogIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7CiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gaHdtIHx8IGh3bSA9PT0gMCA/IGh3bSA6IGRlZmF1bHRId207CgogIC8vIGNhc3QgdG8gaW50cy4KICB0aGlzLmhpZ2hXYXRlck1hcmsgPSB+IH50aGlzLmhpZ2hXYXRlck1hcms7CgogIHRoaXMuYnVmZmVyID0gW107CiAgdGhpcy5sZW5ndGggPSAwOwogIHRoaXMucGlwZXMgPSBudWxsOwogIHRoaXMucGlwZXNDb3VudCA9IDA7CiAgdGhpcy5mbG93aW5nID0gbnVsbDsKICB0aGlzLmVuZGVkID0gZmFsc2U7CiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7CiAgdGhpcy5yZWFkaW5nID0gZmFsc2U7CgogIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LAogIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55CiAgLy8gYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgImxhdGVyIiBzaG91bGQgZ2VuZXJhbGx5IGFsc28KICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC4KICB0aGlzLnN5bmMgPSB0cnVlOwoKICAvLyB3aGVuZXZlciB3ZSByZXR1cm4gbnVsbCwgdGhlbiB3ZSBzZXQgYSBmbGFnIHRvIHNheQogIC8vIHRoYXQgd2UncmUgYXdhaXRpbmcgYSAncmVhZGFibGUnIGV2ZW50IGVtaXNzaW9uLgogIHRoaXMubmVlZFJlYWRhYmxlID0gZmFsc2U7CiAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsKICB0aGlzLnJlYWRhYmxlTGlzdGVuaW5nID0gZmFsc2U7CiAgdGhpcy5yZXN1bWVTY2hlZHVsZWQgPSBmYWxzZTsKCiAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZwogIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS4KICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guCiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7CgogIC8vIHdoZW4gcGlwaW5nLCB3ZSBvbmx5IGNhcmUgYWJvdXQgJ3JlYWRhYmxlJyBldmVudHMgdGhhdCBoYXBwZW4KICAvLyBhZnRlciByZWFkKClpbmcgYWxsIHRoZSBieXRlcyBhbmQgbm90IGdldHRpbmcgYW55IHB1c2hiYWNrLgogIHRoaXMucmFuT3V0ID0gZmFsc2U7CgogIC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzCiAgdGhpcy5hd2FpdERyYWluID0gMDsKCiAgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZAogIHRoaXMucmVhZGluZ01vcmUgPSBmYWxzZTsKCiAgdGhpcy5kZWNvZGVyID0gbnVsbDsKICB0aGlzLmVuY29kaW5nID0gbnVsbDsKICBpZiAob3B0aW9ucy5lbmNvZGluZykgewogICAgaWYgKCFTdHJpbmdEZWNvZGVyKSBTdHJpbmdEZWNvZGVyID0gcmVxdWlyZSgnc3RyaW5nX2RlY29kZXIvJykuU3RyaW5nRGVjb2RlcjsKICAgIHRoaXMuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKG9wdGlvbnMuZW5jb2RpbmcpOwogICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7CiAgfQp9Cgp2YXIgRHVwbGV4OwpmdW5jdGlvbiBSZWFkYWJsZShvcHRpb25zKSB7CiAgRHVwbGV4ID0gRHVwbGV4IHx8IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTsKCiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlYWRhYmxlKSkgcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTsKCiAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpOwoKICAvLyBsZWdhY3kKICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTsKCiAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMucmVhZCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fcmVhZCA9IG9wdGlvbnMucmVhZDsKCiAgU3RyZWFtLmNhbGwodGhpcyk7Cn0KCi8vIE1hbnVhbGx5IHNob3ZlIHNvbWV0aGluZyBpbnRvIHRoZSByZWFkKCkgYnVmZmVyLgovLyBUaGlzIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGlnaFdhdGVyTWFyayBoYXMgbm90IGJlZW4gaGl0IHlldCwKLy8gc2ltaWxhciB0byBob3cgV3JpdGFibGUud3JpdGUoKSByZXR1cm5zIHRydWUgaWYgeW91IHNob3VsZAovLyB3cml0ZSgpIHNvbWUgbW9yZS4KUmVhZGFibGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmIHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHsKICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgc3RhdGUuZGVmYXVsdEVuY29kaW5nOwogICAgaWYgKGVuY29kaW5nICE9PSBzdGF0ZS5lbmNvZGluZykgewogICAgICBjaHVuayA9IG5ldyBCdWZmZXIoY2h1bmssIGVuY29kaW5nKTsKICAgICAgZW5jb2RpbmcgPSAnJzsKICAgIH0KICB9CgogIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGZhbHNlKTsKfTsKCi8vIFVuc2hpZnQgc2hvdWxkICphbHdheXMqIGJlIHNvbWV0aGluZyBkaXJlY3RseSBvdXQgb2YgcmVhZCgpClJlYWRhYmxlLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssICcnLCB0cnVlKTsKfTsKClJlYWRhYmxlLnByb3RvdHlwZS5pc1BhdXNlZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID09PSBmYWxzZTsKfTsKCmZ1bmN0aW9uIHJlYWRhYmxlQWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBhZGRUb0Zyb250KSB7CiAgdmFyIGVyID0gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuayk7CiAgaWYgKGVyKSB7CiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CiAgfSBlbHNlIGlmIChjaHVuayA9PT0gbnVsbCkgewogICAgc3RhdGUucmVhZGluZyA9IGZhbHNlOwogICAgb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKTsKICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkgewogICAgaWYgKHN0YXRlLmVuZGVkICYmICFhZGRUb0Zyb250KSB7CiAgICAgIHZhciBlID0gbmV3IEVycm9yKCdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpOwogICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlKTsKICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kRW1pdHRlZCAmJiBhZGRUb0Zyb250KSB7CiAgICAgIHZhciBlID0gbmV3IEVycm9yKCdzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudCcpOwogICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBza2lwQWRkOwogICAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhYWRkVG9Gcm9udCAmJiAhZW5jb2RpbmcpIHsKICAgICAgICBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspOwogICAgICAgIHNraXBBZGQgPSAhc3RhdGUub2JqZWN0TW9kZSAmJiBjaHVuay5sZW5ndGggPT09IDA7CiAgICAgIH0KCiAgICAgIGlmICghYWRkVG9Gcm9udCkgc3RhdGUucmVhZGluZyA9IGZhbHNlOwoKICAgICAgLy8gRG9uJ3QgYWRkIHRvIHRoZSBidWZmZXIgaWYgd2UndmUgZGVjb2RlZCB0byBhbiBlbXB0eSBzdHJpbmcgY2h1bmsgYW5kCiAgICAgIC8vIHdlJ3JlIG5vdCBpbiBvYmplY3QgbW9kZQogICAgICBpZiAoIXNraXBBZGQpIHsKICAgICAgICAvLyBpZiB3ZSB3YW50IHRoZSBkYXRhIG5vdywganVzdCBlbWl0IGl0LgogICAgICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykgewogICAgICAgICAgc3RyZWFtLmVtaXQoJ2RhdGEnLCBjaHVuayk7CiAgICAgICAgICBzdHJlYW0ucmVhZCgwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gdXBkYXRlIHRoZSBidWZmZXIgaW5mby4KICAgICAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDsKICAgICAgICAgIGlmIChhZGRUb0Zyb250KSBzdGF0ZS5idWZmZXIudW5zaGlmdChjaHVuayk7ZWxzZSBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7CgogICAgICAgICAgaWYgKHN0YXRlLm5lZWRSZWFkYWJsZSkgZW1pdFJlYWRhYmxlKHN0cmVhbSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpOwogICAgfQogIH0gZWxzZSBpZiAoIWFkZFRvRnJvbnQpIHsKICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKICB9CgogIHJldHVybiBuZWVkTW9yZURhdGEoc3RhdGUpOwp9CgovLyBpZiBpdCdzIHBhc3QgdGhlIGhpZ2ggd2F0ZXIgbWFyaywgd2UgY2FuIHB1c2ggaW4gc29tZSBtb3JlLgovLyBBbHNvLCBpZiB3ZSBoYXZlIG5vIGRhdGEgeWV0LCB3ZSBjYW4gc3RhbmQgc29tZQovLyBtb3JlIGJ5dGVzLiAgVGhpcyBpcyB0byB3b3JrIGFyb3VuZCBjYXNlcyB3aGVyZSBod209MCwKLy8gc3VjaCBhcyB0aGUgcmVwbC4gIEFsc28sIGlmIHRoZSBwdXNoKCkgdHJpZ2dlcmVkIGEKLy8gcmVhZGFibGUgZXZlbnQsIGFuZCB0aGUgdXNlciBjYWxsZWQgcmVhZChsYXJnZU51bWJlcikgc3VjaCB0aGF0Ci8vIG5lZWRSZWFkYWJsZSB3YXMgc2V0LCB0aGVuIHdlIG91Z2h0IHRvIHB1c2ggbW9yZSwgc28gdGhhdCBhbm90aGVyCi8vICdyZWFkYWJsZScgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQuCmZ1bmN0aW9uIG5lZWRNb3JlRGF0YShzdGF0ZSkgewogIHJldHVybiAhc3RhdGUuZW5kZWQgJiYgKHN0YXRlLm5lZWRSZWFkYWJsZSB8fCBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCk7Cn0KCi8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgpSZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbiAoZW5jKSB7CiAgaWYgKCFTdHJpbmdEZWNvZGVyKSBTdHJpbmdEZWNvZGVyID0gcmVxdWlyZSgnc3RyaW5nX2RlY29kZXIvJykuU3RyaW5nRGVjb2RlcjsKICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpOwogIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSBlbmM7CiAgcmV0dXJuIHRoaXM7Cn07CgovLyBEb24ndCByYWlzZSB0aGUgaHdtID4gOE1CCnZhciBNQVhfSFdNID0gMHg4MDAwMDA7CmZ1bmN0aW9uIGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pIHsKICBpZiAobiA+PSBNQVhfSFdNKSB7CiAgICBuID0gTUFYX0hXTTsKICB9IGVsc2UgewogICAgLy8gR2V0IHRoZSBuZXh0IGhpZ2hlc3QgcG93ZXIgb2YgMgogICAgbi0tOwogICAgbiB8PSBuID4+PiAxOwogICAgbiB8PSBuID4+PiAyOwogICAgbiB8PSBuID4+PiA0OwogICAgbiB8PSBuID4+PiA4OwogICAgbiB8PSBuID4+PiAxNjsKICAgIG4rKzsKICB9CiAgcmV0dXJuIG47Cn0KCmZ1bmN0aW9uIGhvd011Y2hUb1JlYWQobiwgc3RhdGUpIHsKICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSByZXR1cm4gMDsKCiAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldHVybiBuID09PSAwID8gMCA6IDE7CgogIGlmIChuID09PSBudWxsIHx8IGlzTmFOKG4pKSB7CiAgICAvLyBvbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWUKICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmJ1ZmZlci5sZW5ndGgpIHJldHVybiBzdGF0ZS5idWZmZXJbMF0ubGVuZ3RoO2Vsc2UgcmV0dXJuIHN0YXRlLmxlbmd0aDsKICB9CgogIGlmIChuIDw9IDApIHJldHVybiAwOwoKICAvLyBJZiB3ZSdyZSBhc2tpbmcgZm9yIG1vcmUgdGhhbiB0aGUgdGFyZ2V0IGJ1ZmZlciBsZXZlbCwKICAvLyB0aGVuIHJhaXNlIHRoZSB3YXRlciBtYXJrLiAgQnVtcCB1cCB0byB0aGUgbmV4dCBoaWdoZXN0CiAgLy8gcG93ZXIgb2YgMiwgdG8gcHJldmVudCBpbmNyZWFzaW5nIGl0IGV4Y2Vzc2l2ZWx5IGluIHRpbnkKICAvLyBhbW91bnRzLgogIGlmIChuID4gc3RhdGUuaGlnaFdhdGVyTWFyaykgc3RhdGUuaGlnaFdhdGVyTWFyayA9IGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pOwoKICAvLyBkb24ndCBoYXZlIHRoYXQgbXVjaC4gIHJldHVybiBudWxsLCB1bmxlc3Mgd2UndmUgZW5kZWQuCiAgaWYgKG4gPiBzdGF0ZS5sZW5ndGgpIHsKICAgIGlmICghc3RhdGUuZW5kZWQpIHsKICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgICAgcmV0dXJuIDA7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc3RhdGUubGVuZ3RoOwogICAgfQogIH0KCiAgcmV0dXJuIG47Cn0KCi8vIHlvdSBjYW4gb3ZlcnJpZGUgZWl0aGVyIHRoaXMgbWV0aG9kLCBvciB0aGUgYXN5bmMgX3JlYWQobikgYmVsb3cuClJlYWRhYmxlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKG4pIHsKICBkZWJ1ZygncmVhZCcsIG4pOwogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgdmFyIG5PcmlnID0gbjsKCiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuID4gMCkgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7CgogIC8vIGlmIHdlJ3JlIGRvaW5nIHJlYWQoMCkgdG8gdHJpZ2dlciBhIHJlYWRhYmxlIGV2ZW50LCBidXQgd2UKICAvLyBhbHJlYWR5IGhhdmUgYSBidW5jaCBvZiBkYXRhIGluIHRoZSBidWZmZXIsIHRoZW4ganVzdCB0cmlnZ2VyCiAgLy8gdGhlICdyZWFkYWJsZScgZXZlbnQgYW5kIG1vdmUgb24uCiAgaWYgKG4gPT09IDAgJiYgc3RhdGUubmVlZFJlYWRhYmxlICYmIChzdGF0ZS5sZW5ndGggPj0gc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5lbmRlZCkpIHsKICAgIGRlYnVnKCdyZWFkOiBlbWl0UmVhZGFibGUnLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTsKICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpIGVuZFJlYWRhYmxlKHRoaXMpO2Vsc2UgZW1pdFJlYWRhYmxlKHRoaXMpOwogICAgcmV0dXJuIG51bGw7CiAgfQoKICBuID0gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSk7CgogIC8vIGlmIHdlJ3ZlIGVuZGVkLCBhbmQgd2UncmUgbm93IGNsZWFyLCB0aGVuIGZpbmlzaCBpdCB1cC4KICBpZiAobiA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgewogICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgZW5kUmVhZGFibGUodGhpcyk7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIC8vIEFsbCB0aGUgYWN0dWFsIGNodW5rIGdlbmVyYXRpb24gbG9naWMgbmVlZHMgdG8gYmUKICAvLyAqYmVsb3cqIHRoZSBjYWxsIHRvIF9yZWFkLiAgVGhlIHJlYXNvbiBpcyB0aGF0IGluIGNlcnRhaW4KICAvLyBzeW50aGV0aWMgc3RyZWFtIGNhc2VzLCBzdWNoIGFzIHBhc3N0aHJvdWdoIHN0cmVhbXMsIF9yZWFkCiAgLy8gbWF5IGJlIGEgY29tcGxldGVseSBzeW5jaHJvbm91cyBvcGVyYXRpb24gd2hpY2ggbWF5IGNoYW5nZQogIC8vIHRoZSBzdGF0ZSBvZiB0aGUgcmVhZCBidWZmZXIsIHByb3ZpZGluZyBlbm91Z2ggZGF0YSB3aGVuCiAgLy8gYmVmb3JlIHRoZXJlIHdhcyAqbm90KiBlbm91Z2guCiAgLy8KICAvLyBTbywgdGhlIHN0ZXBzIGFyZToKICAvLyAxLiBGaWd1cmUgb3V0IHdoYXQgdGhlIHN0YXRlIG9mIHRoaW5ncyB3aWxsIGJlIGFmdGVyIHdlIGRvCiAgLy8gYSByZWFkIGZyb20gdGhlIGJ1ZmZlci4KICAvLwogIC8vIDIuIElmIHRoYXQgcmVzdWx0aW5nIHN0YXRlIHdpbGwgdHJpZ2dlciBhIF9yZWFkLCB0aGVuIGNhbGwgX3JlYWQuCiAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IGJlIGFzeW5jaHJvbm91cywgb3Igc3luY2hyb25vdXMuICBZZXMsIGl0IGlzCiAgLy8gZGVlcGx5IHVnbHkgdG8gd3JpdGUgQVBJcyB0aGlzIHdheSwgYnV0IHRoYXQgc3RpbGwgZG9lc24ndCBtZWFuCiAgLy8gdGhhdCB0aGUgUmVhZGFibGUgY2xhc3Mgc2hvdWxkIGJlaGF2ZSBpbXByb3Blcmx5LCBhcyBzdHJlYW1zIGFyZQogIC8vIGRlc2lnbmVkIHRvIGJlIHN5bmMvYXN5bmMgYWdub3N0aWMuCiAgLy8gVGFrZSBub3RlIGlmIHRoZSBfcmVhZCBjYWxsIGlzIHN5bmMgb3IgYXN5bmMgKGllLCBpZiB0aGUgcmVhZCBjYWxsCiAgLy8gaGFzIHJldHVybmVkIHlldCksIHNvIHRoYXQgd2Uga25vdyB3aGV0aGVyIG9yIG5vdCBpdCdzIHNhZmUgdG8gZW1pdAogIC8vICdyZWFkYWJsZScgZXRjLgogIC8vCiAgLy8gMy4gQWN0dWFsbHkgcHVsbCB0aGUgcmVxdWVzdGVkIGNodW5rcyBvdXQgb2YgdGhlIGJ1ZmZlciBhbmQgcmV0dXJuLgoKICAvLyBpZiB3ZSBuZWVkIGEgcmVhZGFibGUgZXZlbnQsIHRoZW4gd2UgbmVlZCB0byBkbyBzb21lIHJlYWRpbmcuCiAgdmFyIGRvUmVhZCA9IHN0YXRlLm5lZWRSZWFkYWJsZTsKICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7CgogIC8vIGlmIHdlIGN1cnJlbnRseSBoYXZlIGxlc3MgdGhhbiB0aGUgaGlnaFdhdGVyTWFyaywgdGhlbiBhbHNvIHJlYWQgc29tZQogIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgfHwgc3RhdGUubGVuZ3RoIC0gbiA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHsKICAgIGRvUmVhZCA9IHRydWU7CiAgICBkZWJ1ZygnbGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsnLCBkb1JlYWQpOwogIH0KCiAgLy8gaG93ZXZlciwgaWYgd2UndmUgZW5kZWQsIHRoZW4gdGhlcmUncyBubyBwb2ludCwgYW5kIGlmIHdlJ3JlIGFscmVhZHkKICAvLyByZWFkaW5nLCB0aGVuIGl0J3MgdW5uZWNlc3NhcnkuCiAgaWYgKHN0YXRlLmVuZGVkIHx8IHN0YXRlLnJlYWRpbmcpIHsKICAgIGRvUmVhZCA9IGZhbHNlOwogICAgZGVidWcoJ3JlYWRpbmcgb3IgZW5kZWQnLCBkb1JlYWQpOwogIH0KCiAgaWYgKGRvUmVhZCkgewogICAgZGVidWcoJ2RvIHJlYWQnKTsKICAgIHN0YXRlLnJlYWRpbmcgPSB0cnVlOwogICAgc3RhdGUuc3luYyA9IHRydWU7CiAgICAvLyBpZiB0aGUgbGVuZ3RoIGlzIGN1cnJlbnRseSB6ZXJvLCB0aGVuIHdlICpuZWVkKiBhIHJlYWRhYmxlIGV2ZW50LgogICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgIC8vIGNhbGwgaW50ZXJuYWwgcmVhZCBtZXRob2QKICAgIHRoaXMuX3JlYWQoc3RhdGUuaGlnaFdhdGVyTWFyayk7CiAgICBzdGF0ZS5zeW5jID0gZmFsc2U7CiAgfQoKICAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLAogIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci4KICBpZiAoZG9SZWFkICYmICFzdGF0ZS5yZWFkaW5nKSBuID0gaG93TXVjaFRvUmVhZChuT3JpZywgc3RhdGUpOwoKICB2YXIgcmV0OwogIGlmIChuID4gMCkgcmV0ID0gZnJvbUxpc3Qobiwgc3RhdGUpO2Vsc2UgcmV0ID0gbnVsbDsKCiAgaWYgKHJldCA9PT0gbnVsbCkgewogICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgIG4gPSAwOwogIH0KCiAgc3RhdGUubGVuZ3RoIC09IG47CgogIC8vIElmIHdlIGhhdmUgbm90aGluZyBpbiB0aGUgYnVmZmVyLCB0aGVuIHdlIHdhbnQgdG8ga25vdwogIC8vIGFzIHNvb24gYXMgd2UgKmRvKiBnZXQgc29tZXRoaW5nIGludG8gdGhlIGJ1ZmZlci4KICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5lbmRlZCkgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKCiAgLy8gSWYgd2UgdHJpZWQgdG8gcmVhZCgpIHBhc3QgdGhlIEVPRiwgdGhlbiBlbWl0IGVuZCBvbiB0aGUgbmV4dCB0aWNrLgogIGlmIChuT3JpZyAhPT0gbiAmJiBzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApIGVuZFJlYWRhYmxlKHRoaXMpOwoKICBpZiAocmV0ICE9PSBudWxsKSB0aGlzLmVtaXQoJ2RhdGEnLCByZXQpOwoKICByZXR1cm4gcmV0Owp9OwoKZnVuY3Rpb24gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuaykgewogIHZhciBlciA9IG51bGw7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoY2h1bmspICYmIHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhc3RhdGUub2JqZWN0TW9kZSkgewogICAgZXIgPSBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG5vbi1zdHJpbmcvYnVmZmVyIGNodW5rJyk7CiAgfQogIHJldHVybiBlcjsKfQoKZnVuY3Rpb24gb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKSB7CiAgaWYgKHN0YXRlLmVuZGVkKSByZXR1cm47CiAgaWYgKHN0YXRlLmRlY29kZXIpIHsKICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7CiAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSB7CiAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTsKICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwogICAgfQogIH0KICBzdGF0ZS5lbmRlZCA9IHRydWU7CgogIC8vIGVtaXQgJ3JlYWRhYmxlJyBub3cgdG8gbWFrZSBzdXJlIGl0IGdldHMgcGlja2VkIHVwLgogIGVtaXRSZWFkYWJsZShzdHJlYW0pOwp9CgovLyBEb24ndCBlbWl0IHJlYWRhYmxlIHJpZ2h0IGF3YXkgaW4gc3luYyBtb2RlLCBiZWNhdXNlIHRoaXMgY2FuIHRyaWdnZXIKLy8gYW5vdGhlciByZWFkKCkgY2FsbCA9PiBzdGFjayBvdmVyZmxvdy4gIFRoaXMgd2F5LCBpdCBtaWdodCB0cmlnZ2VyCi8vIGEgbmV4dFRpY2sgcmVjdXJzaW9uIHdhcm5pbmcsIGJ1dCB0aGF0J3Mgbm90IHNvIGJhZC4KZnVuY3Rpb24gZW1pdFJlYWRhYmxlKHN0cmVhbSkgewogIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKICBzdGF0ZS5uZWVkUmVhZGFibGUgPSBmYWxzZTsKICBpZiAoIXN0YXRlLmVtaXR0ZWRSZWFkYWJsZSkgewogICAgZGVidWcoJ2VtaXRSZWFkYWJsZScsIHN0YXRlLmZsb3dpbmcpOwogICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTsKICAgIGlmIChzdGF0ZS5zeW5jKSBwcm9jZXNzTmV4dFRpY2soZW1pdFJlYWRhYmxlXywgc3RyZWFtKTtlbHNlIGVtaXRSZWFkYWJsZV8oc3RyZWFtKTsKICB9Cn0KCmZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7CiAgZGVidWcoJ2VtaXQgcmVhZGFibGUnKTsKICBzdHJlYW0uZW1pdCgncmVhZGFibGUnKTsKICBmbG93KHN0cmVhbSk7Cn0KCi8vIGF0IHRoaXMgcG9pbnQsIHRoZSB1c2VyIGhhcyBwcmVzdW1hYmx5IHNlZW4gdGhlICdyZWFkYWJsZScgZXZlbnQsCi8vIGFuZCBjYWxsZWQgcmVhZCgpIHRvIGNvbnN1bWUgc29tZSBkYXRhLiAgdGhhdCBtYXkgaGF2ZSB0cmlnZ2VyZWQKLy8gaW4gdHVybiBhbm90aGVyIF9yZWFkKG4pIGNhbGwsIGluIHdoaWNoIGNhc2UgcmVhZGluZyA9IHRydWUgaWYKLy8gaXQncyBpbiBwcm9ncmVzcy4KLy8gSG93ZXZlciwgaWYgd2UncmUgbm90IGVuZGVkLCBvciByZWFkaW5nLCBhbmQgdGhlIGxlbmd0aCA8IGh3bSwKLy8gdGhlbiBnbyBhaGVhZCBhbmQgdHJ5IHRvIHJlYWQgc29tZSBtb3JlIHByZWVtcHRpdmVseS4KZnVuY3Rpb24gbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKSB7CiAgaWYgKCFzdGF0ZS5yZWFkaW5nTW9yZSkgewogICAgc3RhdGUucmVhZGluZ01vcmUgPSB0cnVlOwogICAgcHJvY2Vzc05leHRUaWNrKG1heWJlUmVhZE1vcmVfLCBzdHJlYW0sIHN0YXRlKTsKICB9Cn0KCmZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpIHsKICB2YXIgbGVuID0gc3RhdGUubGVuZ3RoOwogIHdoaWxlICghc3RhdGUucmVhZGluZyAmJiAhc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUuZW5kZWQgJiYgc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykgewogICAgZGVidWcoJ21heWJlUmVhZE1vcmUgcmVhZCAwJyk7CiAgICBzdHJlYW0ucmVhZCgwKTsKICAgIGlmIChsZW4gPT09IHN0YXRlLmxlbmd0aCkKICAgICAgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy4KICAgICAgYnJlYWs7ZWxzZSBsZW4gPSBzdGF0ZS5sZW5ndGg7CiAgfQogIHN0YXRlLnJlYWRpbmdNb3JlID0gZmFsc2U7Cn0KCi8vIGFic3RyYWN0IG1ldGhvZC4gIHRvIGJlIG92ZXJyaWRkZW4gaW4gc3BlY2lmaWMgaW1wbGVtZW50YXRpb24gY2xhc3Nlcy4KLy8gY2FsbCBjYihlciwgZGF0YSkgd2hlcmUgZGF0YSBpcyA8PSBuIGluIGxlbmd0aC4KLy8gZm9yIHZpcnR1YWwgKG5vbi1zdHJpbmcsIG5vbi1idWZmZXIpIHN0cmVhbXMsICJsZW5ndGgiIGlzIHNvbWV3aGF0Ci8vIGFyYml0cmFyeSwgYW5kIHBlcmhhcHMgbm90IHZlcnkgbWVhbmluZ2Z1bC4KUmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKG4pIHsKICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKSk7Cn07CgpSZWFkYWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uIChkZXN0LCBwaXBlT3B0cykgewogIHZhciBzcmMgPSB0aGlzOwogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgogIHN3aXRjaCAoc3RhdGUucGlwZXNDb3VudCkgewogICAgY2FzZSAwOgogICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7CiAgICAgIGJyZWFrOwogICAgY2FzZSAxOgogICAgICBzdGF0ZS5waXBlcyA9IFtzdGF0ZS5waXBlcywgZGVzdF07CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgc3RhdGUucGlwZXMucHVzaChkZXN0KTsKICAgICAgYnJlYWs7CiAgfQogIHN0YXRlLnBpcGVzQ291bnQgKz0gMTsKICBkZWJ1ZygncGlwZSBjb3VudD0lZCBvcHRzPSVqJywgc3RhdGUucGlwZXNDb3VudCwgcGlwZU9wdHMpOwoKICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmIGRlc3QgIT09IHByb2Nlc3Muc3Rkb3V0ICYmIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyOwoKICB2YXIgZW5kRm4gPSBkb0VuZCA/IG9uZW5kIDogY2xlYW51cDsKICBpZiAoc3RhdGUuZW5kRW1pdHRlZCkgcHJvY2Vzc05leHRUaWNrKGVuZEZuKTtlbHNlIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7CgogIGRlc3Qub24oJ3VucGlwZScsIG9udW5waXBlKTsKICBmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSkgewogICAgZGVidWcoJ29udW5waXBlJyk7CiAgICBpZiAocmVhZGFibGUgPT09IHNyYykgewogICAgICBjbGVhbnVwKCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvbmVuZCgpIHsKICAgIGRlYnVnKCdvbmVuZCcpOwogICAgZGVzdC5lbmQoKTsKICB9CgogIC8vIHdoZW4gdGhlIGRlc3QgZHJhaW5zLCBpdCByZWR1Y2VzIHRoZSBhd2FpdERyYWluIGNvdW50ZXIKICAvLyBvbiB0aGUgc291cmNlLiAgVGhpcyB3b3VsZCBiZSBtb3JlIGVsZWdhbnQgd2l0aCBhIC5vbmNlKCkKICAvLyBoYW5kbGVyIGluIGZsb3coKSwgYnV0IGFkZGluZyBhbmQgcmVtb3ZpbmcgcmVwZWF0ZWRseSBpcwogIC8vIHRvbyBzbG93LgogIHZhciBvbmRyYWluID0gcGlwZU9uRHJhaW4oc3JjKTsKICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pOwoKICB2YXIgY2xlYW5lZFVwID0gZmFsc2U7CiAgZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgIGRlYnVnKCdjbGVhbnVwJyk7CiAgICAvLyBjbGVhbnVwIGV2ZW50IGhhbmRsZXJzIG9uY2UgdGhlIHBpcGUgaXMgYnJva2VuCiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCd1bnBpcGUnLCBvbnVucGlwZSk7CiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTsKICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7CiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpOwoKICAgIGNsZWFuZWRVcCA9IHRydWU7CgogICAgLy8gaWYgdGhlIHJlYWRlciBpcyB3YWl0aW5nIGZvciBhIGRyYWluIGV2ZW50IGZyb20gdGhpcwogICAgLy8gc3BlY2lmaWMgd3JpdGVyLCB0aGVuIGl0IHdvdWxkIGNhdXNlIGl0IHRvIG5ldmVyIHN0YXJ0CiAgICAvLyBmbG93aW5nIGFnYWluLgogICAgLy8gU28sIGlmIHRoaXMgaXMgYXdhaXRpbmcgYSBkcmFpbiwgdGhlbiB3ZSBqdXN0IGNhbGwgaXQgbm93LgogICAgLy8gSWYgd2UgZG9uJ3Qga25vdywgdGhlbiBhc3N1bWUgdGhhdCB3ZSBhcmUgd2FpdGluZyBmb3Igb25lLgogICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gJiYgKCFkZXN0Ll93cml0YWJsZVN0YXRlIHx8IGRlc3QuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSkgb25kcmFpbigpOwogIH0KCiAgc3JjLm9uKCdkYXRhJywgb25kYXRhKTsKICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHsKICAgIGRlYnVnKCdvbmRhdGEnKTsKICAgIHZhciByZXQgPSBkZXN0LndyaXRlKGNodW5rKTsKICAgIGlmIChmYWxzZSA9PT0gcmV0KSB7CiAgICAgIC8vIElmIHRoZSB1c2VyIHVucGlwZWQgZHVyaW5nIGBkZXN0LndyaXRlKClgLCBpdCBpcyBwb3NzaWJsZQogICAgICAvLyB0byBnZXQgc3R1Y2sgaW4gYSBwZXJtYW5lbnRseSBwYXVzZWQgc3RhdGUgaWYgdGhhdCB3cml0ZQogICAgICAvLyBhbHNvIHJldHVybmVkIGZhbHNlLgogICAgICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSAmJiBzdGF0ZS5waXBlc1swXSA9PT0gZGVzdCAmJiBzcmMubGlzdGVuZXJDb3VudCgnZGF0YScpID09PSAxICYmICFjbGVhbmVkVXApIHsKICAgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJywgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4pOwogICAgICAgIHNyYy5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKys7CiAgICAgIH0KICAgICAgc3JjLnBhdXNlKCk7CiAgICB9CiAgfQoKICAvLyBpZiB0aGUgZGVzdCBoYXMgYW4gZXJyb3IsIHRoZW4gc3RvcCBwaXBpbmcgaW50byBpdC4KICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuCiAgZnVuY3Rpb24gb25lcnJvcihlcikgewogICAgZGVidWcoJ29uZXJyb3InLCBlcik7CiAgICB1bnBpcGUoKTsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CiAgICBpZiAoRUVsaXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKSBkZXN0LmVtaXQoJ2Vycm9yJywgZXIpOwogIH0KICAvLyBUaGlzIGlzIGEgYnJ1dGFsbHkgdWdseSBoYWNrIHRvIG1ha2Ugc3VyZSB0aGF0IG91ciBlcnJvciBoYW5kbGVyCiAgLy8gaXMgYXR0YWNoZWQgYmVmb3JlIGFueSB1c2VybGFuZCBvbmVzLiAgTkVWRVIgRE8gVEhJUy4KICBpZiAoIWRlc3QuX2V2ZW50cyB8fCAhZGVzdC5fZXZlbnRzLmVycm9yKSBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpO2Vsc2UgaWYgKGlzQXJyYXkoZGVzdC5fZXZlbnRzLmVycm9yKSkgZGVzdC5fZXZlbnRzLmVycm9yLnVuc2hpZnQob25lcnJvcik7ZWxzZSBkZXN0Ll9ldmVudHMuZXJyb3IgPSBbb25lcnJvciwgZGVzdC5fZXZlbnRzLmVycm9yXTsKCiAgLy8gQm90aCBjbG9zZSBhbmQgZmluaXNoIHNob3VsZCB0cmlnZ2VyIHVucGlwZSwgYnV0IG9ubHkgb25jZS4KICBmdW5jdGlvbiBvbmNsb3NlKCkgewogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpOwogICAgdW5waXBlKCk7CiAgfQogIGRlc3Qub25jZSgnY2xvc2UnLCBvbmNsb3NlKTsKICBmdW5jdGlvbiBvbmZpbmlzaCgpIHsKICAgIGRlYnVnKCdvbmZpbmlzaCcpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTsKICAgIHVucGlwZSgpOwogIH0KICBkZXN0Lm9uY2UoJ2ZpbmlzaCcsIG9uZmluaXNoKTsKCiAgZnVuY3Rpb24gdW5waXBlKCkgewogICAgZGVidWcoJ3VucGlwZScpOwogICAgc3JjLnVucGlwZShkZXN0KTsKICB9CgogIC8vIHRlbGwgdGhlIGRlc3QgdGhhdCBpdCdzIGJlaW5nIHBpcGVkIHRvCiAgZGVzdC5lbWl0KCdwaXBlJywgc3JjKTsKCiAgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LgogIGlmICghc3RhdGUuZmxvd2luZykgewogICAgZGVidWcoJ3BpcGUgcmVzdW1lJyk7CiAgICBzcmMucmVzdW1lKCk7CiAgfQoKICByZXR1cm4gZGVzdDsKfTsKCmZ1bmN0aW9uIHBpcGVPbkRyYWluKHNyYykgewogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc3RhdGUgPSBzcmMuX3JlYWRhYmxlU3RhdGU7CiAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTsKICAgIGlmIChzdGF0ZS5hd2FpdERyYWluKSBzdGF0ZS5hd2FpdERyYWluLS07CiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiA9PT0gMCAmJiBFRWxpc3RlbmVyQ291bnQoc3JjLCAnZGF0YScpKSB7CiAgICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlOwogICAgICBmbG93KHNyYyk7CiAgICB9CiAgfTsKfQoKUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCiAgLy8gaWYgd2UncmUgbm90IHBpcGluZyBhbnl3aGVyZSwgdGhlbiBkbyBub3RoaW5nLgogIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAwKSByZXR1cm4gdGhpczsKCiAgLy8ganVzdCBvbmUgZGVzdGluYXRpb24uICBtb3N0IGNvbW1vbiBjYXNlLgogIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSB7CiAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS4KICAgIGlmIChkZXN0ICYmIGRlc3QgIT09IHN0YXRlLnBpcGVzKSByZXR1cm4gdGhpczsKCiAgICBpZiAoIWRlc3QpIGRlc3QgPSBzdGF0ZS5waXBlczsKCiAgICAvLyBnb3QgYSBtYXRjaC4KICAgIHN0YXRlLnBpcGVzID0gbnVsbDsKICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwOwogICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwogICAgaWYgKGRlc3QpIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcyk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuCgogIGlmICghZGVzdCkgewogICAgLy8gcmVtb3ZlIGFsbC4KICAgIHZhciBkZXN0cyA9IHN0YXRlLnBpcGVzOwogICAgdmFyIGxlbiA9IHN0YXRlLnBpcGVzQ291bnQ7CiAgICBzdGF0ZS5waXBlcyA9IG51bGw7CiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDsKICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTsKCiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGVuOyBfaSsrKSB7CiAgICAgIGRlc3RzW19pXS5lbWl0KCd1bnBpcGUnLCB0aGlzKTsKICAgIH1yZXR1cm4gdGhpczsKICB9CgogIC8vIHRyeSB0byBmaW5kIHRoZSByaWdodCBvbmUuCiAgdmFyIGkgPSBpbmRleE9mKHN0YXRlLnBpcGVzLCBkZXN0KTsKICBpZiAoaSA9PT0gLTEpIHJldHVybiB0aGlzOwoKICBzdGF0ZS5waXBlcy5zcGxpY2UoaSwgMSk7CiAgc3RhdGUucGlwZXNDb3VudCAtPSAxOwogIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdOwoKICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMpOwoKICByZXR1cm4gdGhpczsKfTsKCi8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3IKLy8gRW5zdXJlIHJlYWRhYmxlIGxpc3RlbmVycyBldmVudHVhbGx5IGdldCBzb21ldGhpbmcKUmVhZGFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2LCBmbikgewogIHZhciByZXMgPSBTdHJlYW0ucHJvdG90eXBlLm9uLmNhbGwodGhpcywgZXYsIGZuKTsKCiAgLy8gSWYgbGlzdGVuaW5nIHRvIGRhdGEsIGFuZCBpdCBoYXMgbm90IGV4cGxpY2l0bHkgYmVlbiBwYXVzZWQsCiAgLy8gdGhlbiBjYWxsIHJlc3VtZSB0byBzdGFydCB0aGUgZmxvdyBvZiBkYXRhIG9uIHRoZSBuZXh0IHRpY2suCiAgaWYgKGV2ID09PSAnZGF0YScgJiYgZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykgewogICAgdGhpcy5yZXN1bWUoKTsKICB9CgogIGlmIChldiA9PT0gJ3JlYWRhYmxlJyAmJiAhdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkKSB7CiAgICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogICAgaWYgKCFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZykgewogICAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHRydWU7CiAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwogICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwogICAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIHsKICAgICAgICBwcm9jZXNzTmV4dFRpY2soblJlYWRpbmdOZXh0VGljaywgdGhpcyk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGVuZ3RoKSB7CiAgICAgICAgZW1pdFJlYWRhYmxlKHRoaXMsIHN0YXRlKTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIHJlczsKfTsKUmVhZGFibGUucHJvdG90eXBlLmFkZExpc3RlbmVyID0gUmVhZGFibGUucHJvdG90eXBlLm9uOwoKZnVuY3Rpb24gblJlYWRpbmdOZXh0VGljayhzZWxmKSB7CiAgZGVidWcoJ3JlYWRhYmxlIG5leHR0aWNrIHJlYWQgMCcpOwogIHNlbGYucmVhZCgwKTsKfQoKLy8gcGF1c2UoKSBhbmQgcmVzdW1lKCkgYXJlIHJlbW5hbnRzIG9mIHRoZSBsZWdhY3kgcmVhZGFibGUgc3RyZWFtIEFQSQovLyBJZiB0aGUgdXNlciB1c2VzIHRoZW0sIHRoZW4gc3dpdGNoIGludG8gb2xkIG1vZGUuClJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICBpZiAoIXN0YXRlLmZsb3dpbmcpIHsKICAgIGRlYnVnKCdyZXN1bWUnKTsKICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlOwogICAgcmVzdW1lKHRoaXMsIHN0YXRlKTsKICB9CiAgcmV0dXJuIHRoaXM7Cn07CgpmdW5jdGlvbiByZXN1bWUoc3RyZWFtLCBzdGF0ZSkgewogIGlmICghc3RhdGUucmVzdW1lU2NoZWR1bGVkKSB7CiAgICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSB0cnVlOwogICAgcHJvY2Vzc05leHRUaWNrKHJlc3VtZV8sIHN0cmVhbSwgc3RhdGUpOwogIH0KfQoKZnVuY3Rpb24gcmVzdW1lXyhzdHJlYW0sIHN0YXRlKSB7CiAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7CiAgICBkZWJ1ZygncmVzdW1lIHJlYWQgMCcpOwogICAgc3RyZWFtLnJlYWQoMCk7CiAgfQoKICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSBmYWxzZTsKICBzdHJlYW0uZW1pdCgncmVzdW1lJyk7CiAgZmxvdyhzdHJlYW0pOwogIGlmIChzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5yZWFkaW5nKSBzdHJlYW0ucmVhZCgwKTsKfQoKUmVhZGFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkgewogIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpOwogIGlmIChmYWxzZSAhPT0gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKSB7CiAgICBkZWJ1ZygncGF1c2UnKTsKICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IGZhbHNlOwogICAgdGhpcy5lbWl0KCdwYXVzZScpOwogIH0KICByZXR1cm4gdGhpczsKfTsKCmZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7CiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwogIGRlYnVnKCdmbG93Jywgc3RhdGUuZmxvd2luZyk7CiAgaWYgKHN0YXRlLmZsb3dpbmcpIHsKICAgIGRvIHsKICAgICAgdmFyIGNodW5rID0gc3RyZWFtLnJlYWQoKTsKICAgIH0gd2hpbGUgKG51bGwgIT09IGNodW5rICYmIHN0YXRlLmZsb3dpbmcpOwogIH0KfQoKLy8gd3JhcCBhbiBvbGQtc3R5bGUgc3RyZWFtIGFzIHRoZSBhc3luYyBkYXRhIHNvdXJjZS4KLy8gVGhpcyBpcyAqbm90KiBwYXJ0IG9mIHRoZSByZWFkYWJsZSBzdHJlYW0gaW50ZXJmYWNlLgovLyBJdCBpcyBhbiB1Z2x5IHVuZm9ydHVuYXRlIG1lc3Mgb2YgaGlzdG9yeS4KUmVhZGFibGUucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbiAoc3RyZWFtKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICB2YXIgcGF1c2VkID0gZmFsc2U7CgogIHZhciBzZWxmID0gdGhpczsKICBzdHJlYW0ub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHsKICAgIGRlYnVnKCd3cmFwcGVkIGVuZCcpOwogICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7CiAgICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7CiAgICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHNlbGYucHVzaChjaHVuayk7CiAgICB9CgogICAgc2VsZi5wdXNoKG51bGwpOwogIH0pOwoKICBzdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbiAoY2h1bmspIHsKICAgIGRlYnVnKCd3cmFwcGVkIGRhdGEnKTsKICAgIGlmIChzdGF0ZS5kZWNvZGVyKSBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspOwoKICAgIC8vIGRvbid0IHNraXAgb3ZlciBmYWxzeSB2YWx1ZXMgaW4gb2JqZWN0TW9kZQogICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgJiYgKGNodW5rID09PSBudWxsIHx8IGNodW5rID09PSB1bmRlZmluZWQpKSByZXR1cm47ZWxzZSBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgKCFjaHVuayB8fCAhY2h1bmsubGVuZ3RoKSkgcmV0dXJuOwoKICAgIHZhciByZXQgPSBzZWxmLnB1c2goY2h1bmspOwogICAgaWYgKCFyZXQpIHsKICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgICAgc3RyZWFtLnBhdXNlKCk7CiAgICB9CiAgfSk7CgogIC8vIHByb3h5IGFsbCB0aGUgb3RoZXIgbWV0aG9kcy4KICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy4KICBmb3IgKHZhciBpIGluIHN0cmVhbSkgewogICAgaWYgKHRoaXNbaV0gPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc3RyZWFtW2ldID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRoaXNbaV0gPSBmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBzdHJlYW1bbWV0aG9kXS5hcHBseShzdHJlYW0sIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfShpKTsKICAgIH0KICB9CgogIC8vIHByb3h5IGNlcnRhaW4gaW1wb3J0YW50IGV2ZW50cy4KICB2YXIgZXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddOwogIGZvckVhY2goZXZlbnRzLCBmdW5jdGlvbiAoZXYpIHsKICAgIHN0cmVhbS5vbihldiwgc2VsZi5lbWl0LmJpbmQoc2VsZiwgZXYpKTsKICB9KTsKCiAgLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZQogIC8vIHVuZGVybHlpbmcgc3RyZWFtLgogIHNlbGYuX3JlYWQgPSBmdW5jdGlvbiAobikgewogICAgZGVidWcoJ3dyYXBwZWQgX3JlYWQnLCBuKTsKICAgIGlmIChwYXVzZWQpIHsKICAgICAgcGF1c2VkID0gZmFsc2U7CiAgICAgIHN0cmVhbS5yZXN1bWUoKTsKICAgIH0KICB9OwoKICByZXR1cm4gc2VsZjsKfTsKCi8vIGV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS4KUmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7CgovLyBQbHVjayBvZmYgbiBieXRlcyBmcm9tIGFuIGFycmF5IG9mIGJ1ZmZlcnMuCi8vIExlbmd0aCBpcyB0aGUgY29tYmluZWQgbGVuZ3RocyBvZiBhbGwgdGhlIGJ1ZmZlcnMgaW4gdGhlIGxpc3QuCmZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlKSB7CiAgdmFyIGxpc3QgPSBzdGF0ZS5idWZmZXI7CiAgdmFyIGxlbmd0aCA9IHN0YXRlLmxlbmd0aDsKICB2YXIgc3RyaW5nTW9kZSA9ICEhc3RhdGUuZGVjb2RlcjsKICB2YXIgb2JqZWN0TW9kZSA9ICEhc3RhdGUub2JqZWN0TW9kZTsKICB2YXIgcmV0OwoKICAvLyBub3RoaW5nIGluIHRoZSBsaXN0LCBkZWZpbml0ZWx5IGVtcHR5LgogIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7CgogIGlmIChsZW5ndGggPT09IDApIHJldCA9IG51bGw7ZWxzZSBpZiAob2JqZWN0TW9kZSkgcmV0ID0gbGlzdC5zaGlmdCgpO2Vsc2UgaWYgKCFuIHx8IG4gPj0gbGVuZ3RoKSB7CiAgICAvLyByZWFkIGl0IGFsbCwgdHJ1bmNhdGUgdGhlIGFycmF5LgogICAgaWYgKHN0cmluZ01vZGUpIHJldCA9IGxpc3Quam9pbignJyk7ZWxzZSBpZiAobGlzdC5sZW5ndGggPT09IDEpIHJldCA9IGxpc3RbMF07ZWxzZSByZXQgPSBCdWZmZXIuY29uY2F0KGxpc3QsIGxlbmd0aCk7CiAgICBsaXN0Lmxlbmd0aCA9IDA7CiAgfSBlbHNlIHsKICAgIC8vIHJlYWQganVzdCBzb21lIG9mIGl0LgogICAgaWYgKG4gPCBsaXN0WzBdLmxlbmd0aCkgewogICAgICAvLyBqdXN0IHRha2UgYSBwYXJ0IG9mIHRoZSBmaXJzdCBsaXN0IGl0ZW0uCiAgICAgIC8vIHNsaWNlIGlzIHRoZSBzYW1lIGZvciBidWZmZXJzIGFuZCBzdHJpbmdzLgogICAgICB2YXIgYnVmID0gbGlzdFswXTsKICAgICAgcmV0ID0gYnVmLnNsaWNlKDAsIG4pOwogICAgICBsaXN0WzBdID0gYnVmLnNsaWNlKG4pOwogICAgfSBlbHNlIGlmIChuID09PSBsaXN0WzBdLmxlbmd0aCkgewogICAgICAvLyBmaXJzdCBsaXN0IGlzIGEgcGVyZmVjdCBtYXRjaAogICAgICByZXQgPSBsaXN0LnNoaWZ0KCk7CiAgICB9IGVsc2UgewogICAgICAvLyBjb21wbGV4IGNhc2UuCiAgICAgIC8vIHdlIGhhdmUgZW5vdWdoIHRvIGNvdmVyIGl0LCBidXQgaXQgc3BhbnMgcGFzdCB0aGUgZmlyc3QgYnVmZmVyLgogICAgICBpZiAoc3RyaW5nTW9kZSkgcmV0ID0gJyc7ZWxzZSByZXQgPSBuZXcgQnVmZmVyKG4pOwoKICAgICAgdmFyIGMgPSAwOwogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxpc3QubGVuZ3RoOyBpIDwgbCAmJiBjIDwgbjsgaSsrKSB7CiAgICAgICAgdmFyIGJ1ZiA9IGxpc3RbMF07CiAgICAgICAgdmFyIGNweSA9IE1hdGgubWluKG4gLSBjLCBidWYubGVuZ3RoKTsKCiAgICAgICAgaWYgKHN0cmluZ01vZGUpIHJldCArPSBidWYuc2xpY2UoMCwgY3B5KTtlbHNlIGJ1Zi5jb3B5KHJldCwgYywgMCwgY3B5KTsKCiAgICAgICAgaWYgKGNweSA8IGJ1Zi5sZW5ndGgpIGxpc3RbMF0gPSBidWYuc2xpY2UoY3B5KTtlbHNlIGxpc3Quc2hpZnQoKTsKCiAgICAgICAgYyArPSBjcHk7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkgewogIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKCiAgLy8gSWYgd2UgZ2V0IGhlcmUgYmVmb3JlIGNvbnN1bWluZyBhbGwgdGhlIGJ5dGVzLCB0aGVuIHRoYXQgaXMgYQogIC8vIGJ1ZyBpbiBub2RlLiAgU2hvdWxkIG5ldmVyIGhhcHBlbi4KICBpZiAoc3RhdGUubGVuZ3RoID4gMCkgdGhyb3cgbmV3IEVycm9yKCdlbmRSZWFkYWJsZSBjYWxsZWQgb24gbm9uLWVtcHR5IHN0cmVhbScpOwoKICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQpIHsKICAgIHN0YXRlLmVuZGVkID0gdHJ1ZTsKICAgIHByb2Nlc3NOZXh0VGljayhlbmRSZWFkYWJsZU5ULCBzdGF0ZSwgc3RyZWFtKTsKICB9Cn0KCmZ1bmN0aW9uIGVuZFJlYWRhYmxlTlQoc3RhdGUsIHN0cmVhbSkgewogIC8vIENoZWNrIHRoYXQgd2UgZGlkbid0IGdldCBvbmUgbGFzdCB1bnNoaWZ0LgogIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApIHsKICAgIHN0YXRlLmVuZEVtaXR0ZWQgPSB0cnVlOwogICAgc3RyZWFtLnJlYWRhYmxlID0gZmFsc2U7CiAgICBzdHJlYW0uZW1pdCgnZW5kJyk7CiAgfQp9CgpmdW5jdGlvbiBmb3JFYWNoKHhzLCBmKSB7CiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgIGYoeHNbaV0sIGkpOwogIH0KfQoKZnVuY3Rpb24gaW5kZXhPZih4cywgeCkgewogIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICBpZiAoeHNbaV0gPT09IHgpIHJldHVybiBpOwogIH0KICByZXR1cm4gLTE7Cn0KfSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpCn0seyIuL19zdHJlYW1fZHVwbGV4IjoxNDgsIl9wcm9jZXNzIjoxMzksImJ1ZmZlciI6NzAsImNvcmUtdXRpbC1pcyI6ODAsImV2ZW50cyI6NzIsImluaGVyaXRzIjoxMjgsImlzYXJyYXkiOjE1MywicHJvY2Vzcy1uZXh0aWNrLWFyZ3MiOjEzOCwic3RyaW5nX2RlY29kZXIvIjoxNzEsInV0aWwiOjQzfV0sMTUxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gYSB0cmFuc2Zvcm0gc3RyZWFtIGlzIGEgcmVhZGFibGUvd3JpdGFibGUgc3RyZWFtIHdoZXJlIHlvdSBkbwovLyBzb21ldGhpbmcgd2l0aCB0aGUgZGF0YS4gIFNvbWV0aW1lcyBpdCdzIGNhbGxlZCBhICJmaWx0ZXIiLAovLyBidXQgdGhhdCdzIG5vdCBhIGdyZWF0IG5hbWUgZm9yIGl0LCBzaW5jZSB0aGF0IGltcGxpZXMgYSB0aGluZyB3aGVyZQovLyBzb21lIGJpdHMgcGFzcyB0aHJvdWdoLCBhbmQgb3RoZXJzIGFyZSBzaW1wbHkgaWdub3JlZC4gIChUaGF0IHdvdWxkCi8vIGJlIGEgdmFsaWQgZXhhbXBsZSBvZiBhIHRyYW5zZm9ybSwgb2YgY291cnNlLikKLy8KLy8gV2hpbGUgdGhlIG91dHB1dCBpcyBjYXVzYWxseSByZWxhdGVkIHRvIHRoZSBpbnB1dCwgaXQncyBub3QgYQovLyBuZWNlc3NhcmlseSBzeW1tZXRyaWMgb3Igc3luY2hyb25vdXMgdHJhbnNmb3JtYXRpb24uICBGb3IgZXhhbXBsZSwKLy8gYSB6bGliIHN0cmVhbSBtaWdodCB0YWtlIG11bHRpcGxlIHBsYWluLXRleHQgd3JpdGVzKCksIGFuZCB0aGVuCi8vIGVtaXQgYSBzaW5nbGUgY29tcHJlc3NlZCBjaHVuayBzb21lIHRpbWUgaW4gdGhlIGZ1dHVyZS4KLy8KLy8gSGVyZSdzIGhvdyB0aGlzIHdvcmtzOgovLwovLyBUaGUgVHJhbnNmb3JtIHN0cmVhbSBoYXMgYWxsIHRoZSBhc3BlY3RzIG9mIHRoZSByZWFkYWJsZSBhbmQgd3JpdGFibGUKLy8gc3RyZWFtIGNsYXNzZXMuICBXaGVuIHlvdSB3cml0ZShjaHVuayksIHRoYXQgY2FsbHMgX3dyaXRlKGNodW5rLGNiKQovLyBpbnRlcm5hbGx5LCBhbmQgcmV0dXJucyBmYWxzZSBpZiB0aGVyZSdzIGEgbG90IG9mIHBlbmRpbmcgd3JpdGVzCi8vIGJ1ZmZlcmVkIHVwLiAgV2hlbiB5b3UgY2FsbCByZWFkKCksIHRoYXQgY2FsbHMgX3JlYWQobikgdW50aWwKLy8gdGhlcmUncyBlbm91Z2ggcGVuZGluZyByZWFkYWJsZSBkYXRhIGJ1ZmZlcmVkIHVwLgovLwovLyBJbiBhIHRyYW5zZm9ybSBzdHJlYW0sIHRoZSB3cml0dGVuIGRhdGEgaXMgcGxhY2VkIGluIGEgYnVmZmVyLiAgV2hlbgovLyBfcmVhZChuKSBpcyBjYWxsZWQsIGl0IHRyYW5zZm9ybXMgdGhlIHF1ZXVlZCB1cCBkYXRhLCBjYWxsaW5nIHRoZQovLyBidWZmZXJlZCBfd3JpdGUgY2IncyBhcyBpdCBjb25zdW1lcyBjaHVua3MuICBJZiBjb25zdW1pbmcgYSBzaW5nbGUKLy8gd3JpdHRlbiBjaHVuayB3b3VsZCByZXN1bHQgaW4gbXVsdGlwbGUgb3V0cHV0IGNodW5rcywgdGhlbiB0aGUgZmlyc3QKLy8gb3V0cHV0dGVkIGJpdCBjYWxscyB0aGUgcmVhZGNiLCBhbmQgc3Vic2VxdWVudCBjaHVua3MganVzdCBnbyBpbnRvCi8vIHRoZSByZWFkIGJ1ZmZlciwgYW5kIHdpbGwgY2F1c2UgaXQgdG8gZW1pdCAncmVhZGFibGUnIGlmIG5lY2Vzc2FyeS4KLy8KLy8gVGhpcyB3YXksIGJhY2stcHJlc3N1cmUgaXMgYWN0dWFsbHkgZGV0ZXJtaW5lZCBieSB0aGUgcmVhZGluZyBzaWRlLAovLyBzaW5jZSBfcmVhZCBoYXMgdG8gYmUgY2FsbGVkIHRvIHN0YXJ0IHByb2Nlc3NpbmcgYSBuZXcgY2h1bmsuICBIb3dldmVyLAovLyBhIHBhdGhvbG9naWNhbCBpbmZsYXRlIHR5cGUgb2YgdHJhbnNmb3JtIGNhbiBjYXVzZSBleGNlc3NpdmUgYnVmZmVyaW5nCi8vIGhlcmUuICBGb3IgZXhhbXBsZSwgaW1hZ2luZSBhIHN0cmVhbSB3aGVyZSBldmVyeSBieXRlIG9mIGlucHV0IGlzCi8vIGludGVycHJldGVkIGFzIGFuIGludGVnZXIgZnJvbSAwLTI1NSwgYW5kIHRoZW4gcmVzdWx0cyBpbiB0aGF0IG1hbnkKLy8gYnl0ZXMgb2Ygb3V0cHV0LiAgV3JpdGluZyB0aGUgNCBieXRlcyB7ZmYsZmYsZmYsZmZ9IHdvdWxkIHJlc3VsdCBpbgovLyAxa2Igb2YgZGF0YSBiZWluZyBvdXRwdXQuICBJbiB0aGlzIGNhc2UsIHlvdSBjb3VsZCB3cml0ZSBhIHZlcnkgc21hbGwKLy8gYW1vdW50IG9mIGlucHV0LCBhbmQgZW5kIHVwIHdpdGggYSB2ZXJ5IGxhcmdlIGFtb3VudCBvZiBvdXRwdXQuICBJbgovLyBzdWNoIGEgcGF0aG9sb2dpY2FsIGluZmxhdGluZyBtZWNoYW5pc20sIHRoZXJlJ2QgYmUgbm8gd2F5IHRvIHRlbGwKLy8gdGhlIHN5c3RlbSB0byBzdG9wIGRvaW5nIHRoZSB0cmFuc2Zvcm0uICBBIHNpbmdsZSA0TUIgd3JpdGUgY291bGQKLy8gY2F1c2UgdGhlIHN5c3RlbSB0byBydW4gb3V0IG9mIG1lbW9yeS4KLy8KLy8gSG93ZXZlciwgZXZlbiBpbiBzdWNoIGEgcGF0aG9sb2dpY2FsIGNhc2UsIG9ubHkgYSBzaW5nbGUgd3JpdHRlbiBjaHVuawovLyB3b3VsZCBiZSBjb25zdW1lZCwgYW5kIHRoZW4gdGhlIHJlc3Qgd291bGQgd2FpdCAodW4tdHJhbnNmb3JtZWQpIHVudGlsCi8vIHRoZSByZXN1bHRzIG9mIHRoZSBwcmV2aW91cyB0cmFuc2Zvcm1lZCBjaHVuayB3ZXJlIGNvbnN1bWVkLgoKJ3VzZSBzdHJpY3QnOwoKbW9kdWxlLmV4cG9ydHMgPSBUcmFuc2Zvcm07Cgp2YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpOwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTsKdXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKdXRpbC5pbmhlcml0cyhUcmFuc2Zvcm0sIER1cGxleCk7CgpmdW5jdGlvbiBUcmFuc2Zvcm1TdGF0ZShzdHJlYW0pIHsKICB0aGlzLmFmdGVyVHJhbnNmb3JtID0gZnVuY3Rpb24gKGVyLCBkYXRhKSB7CiAgICByZXR1cm4gYWZ0ZXJUcmFuc2Zvcm0oc3RyZWFtLCBlciwgZGF0YSk7CiAgfTsKCiAgdGhpcy5uZWVkVHJhbnNmb3JtID0gZmFsc2U7CiAgdGhpcy50cmFuc2Zvcm1pbmcgPSBmYWxzZTsKICB0aGlzLndyaXRlY2IgPSBudWxsOwogIHRoaXMud3JpdGVjaHVuayA9IG51bGw7CiAgdGhpcy53cml0ZWVuY29kaW5nID0gbnVsbDsKfQoKZnVuY3Rpb24gYWZ0ZXJUcmFuc2Zvcm0oc3RyZWFtLCBlciwgZGF0YSkgewogIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7CiAgdHMudHJhbnNmb3JtaW5nID0gZmFsc2U7CgogIHZhciBjYiA9IHRzLndyaXRlY2I7CgogIGlmICghY2IpIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ25vIHdyaXRlY2IgaW4gVHJhbnNmb3JtIGNsYXNzJykpOwoKICB0cy53cml0ZWNodW5rID0gbnVsbDsKICB0cy53cml0ZWNiID0gbnVsbDsKCiAgaWYgKGRhdGEgIT09IG51bGwgJiYgZGF0YSAhPT0gdW5kZWZpbmVkKSBzdHJlYW0ucHVzaChkYXRhKTsKCiAgY2IoZXIpOwoKICB2YXIgcnMgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CiAgcnMucmVhZGluZyA9IGZhbHNlOwogIGlmIChycy5uZWVkUmVhZGFibGUgfHwgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaykgewogICAgc3RyZWFtLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspOwogIH0KfQoKZnVuY3Rpb24gVHJhbnNmb3JtKG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHJhbnNmb3JtKSkgcmV0dXJuIG5ldyBUcmFuc2Zvcm0ob3B0aW9ucyk7CgogIER1cGxleC5jYWxsKHRoaXMsIG9wdGlvbnMpOwoKICB0aGlzLl90cmFuc2Zvcm1TdGF0ZSA9IG5ldyBUcmFuc2Zvcm1TdGF0ZSh0aGlzKTsKCiAgLy8gd2hlbiB0aGUgd3JpdGFibGUgc2lkZSBmaW5pc2hlcywgdGhlbiBmbHVzaCBvdXQgYW55dGhpbmcgcmVtYWluaW5nLgogIHZhciBzdHJlYW0gPSB0aGlzOwoKICAvLyBzdGFydCBvdXQgYXNraW5nIGZvciBhIHJlYWRhYmxlIGV2ZW50IG9uY2UgZGF0YSBpcyB0cmFuc2Zvcm1lZC4KICB0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CgogIC8vIHdlIGhhdmUgaW1wbGVtZW50ZWQgdGhlIF9yZWFkIG1ldGhvZCwgYW5kIGRvbmUgdGhlIG90aGVyIHRoaW5ncwogIC8vIHRoYXQgUmVhZGFibGUgd2FudHMgYmVmb3JlIHRoZSBmaXJzdCBfcmVhZCBjYWxsLCBzbyB1bnNldCB0aGUKICAvLyBzeW5jIGd1YXJkIGZsYWcuCiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5zeW5jID0gZmFsc2U7CgogIGlmIChvcHRpb25zKSB7CiAgICBpZiAodHlwZW9mIG9wdGlvbnMudHJhbnNmb3JtID09PSAnZnVuY3Rpb24nKSB0aGlzLl90cmFuc2Zvcm0gPSBvcHRpb25zLnRyYW5zZm9ybTsKCiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmx1c2ggPT09ICdmdW5jdGlvbicpIHRoaXMuX2ZsdXNoID0gb3B0aW9ucy5mbHVzaDsKICB9CgogIHRoaXMub25jZSgncHJlZmluaXNoJywgZnVuY3Rpb24gKCkgewogICAgaWYgKHR5cGVvZiB0aGlzLl9mbHVzaCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZmx1c2goZnVuY3Rpb24gKGVyKSB7CiAgICAgIGRvbmUoc3RyZWFtLCBlcik7CiAgICB9KTtlbHNlIGRvbmUoc3RyZWFtKTsKICB9KTsKfQoKVHJhbnNmb3JtLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZykgewogIHRoaXMuX3RyYW5zZm9ybVN0YXRlLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTsKICByZXR1cm4gRHVwbGV4LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgY2h1bmssIGVuY29kaW5nKTsKfTsKCi8vIFRoaXMgaXMgdGhlIHBhcnQgd2hlcmUgeW91IGRvIHN0dWZmIQovLyBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uIGluIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuCi8vICdjaHVuaycgaXMgYW4gaW5wdXQgY2h1bmsuCi8vCi8vIENhbGwgYHB1c2gobmV3Q2h1bmspYCB0byBwYXNzIGFsb25nIHRyYW5zZm9ybWVkIG91dHB1dAovLyB0byB0aGUgcmVhZGFibGUgc2lkZS4gIFlvdSBtYXkgY2FsbCAncHVzaCcgemVybyBvciBtb3JlIHRpbWVzLgovLwovLyBDYWxsIGBjYihlcnIpYCB3aGVuIHlvdSBhcmUgZG9uZSB3aXRoIHRoaXMgY2h1bmsuICBJZiB5b3UgcGFzcwovLyBhbiBlcnJvciwgdGhlbiB0aGF0J2xsIHB1dCB0aGUgaHVydCBvbiB0aGUgd2hvbGUgb3BlcmF0aW9uLiAgSWYgeW91Ci8vIG5ldmVyIGNhbGwgY2IoKSwgdGhlbiB5b3UnbGwgbmV2ZXIgZ2V0IGFub3RoZXIgY2h1bmsuClRyYW5zZm9ybS5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgdGhyb3cgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKTsKfTsKClRyYW5zZm9ybS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTsKICB0cy53cml0ZWNiID0gY2I7CiAgdHMud3JpdGVjaHVuayA9IGNodW5rOwogIHRzLndyaXRlZW5jb2RpbmcgPSBlbmNvZGluZzsKICBpZiAoIXRzLnRyYW5zZm9ybWluZykgewogICAgdmFyIHJzID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICAgIGlmICh0cy5uZWVkVHJhbnNmb3JtIHx8IHJzLm5lZWRSZWFkYWJsZSB8fCBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKSB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspOwogIH0KfTsKCi8vIERvZXNuJ3QgbWF0dGVyIHdoYXQgdGhlIGFyZ3MgYXJlIGhlcmUuCi8vIF90cmFuc2Zvcm0gZG9lcyBhbGwgdGhlIHdvcmsuCi8vIFRoYXQgd2UgZ290IGhlcmUgbWVhbnMgdGhhdCB0aGUgcmVhZGFibGUgc2lkZSB3YW50cyBtb3JlIGRhdGEuClRyYW5zZm9ybS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAobikgewogIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlOwoKICBpZiAodHMud3JpdGVjaHVuayAhPT0gbnVsbCAmJiB0cy53cml0ZWNiICYmICF0cy50cmFuc2Zvcm1pbmcpIHsKICAgIHRzLnRyYW5zZm9ybWluZyA9IHRydWU7CiAgICB0aGlzLl90cmFuc2Zvcm0odHMud3JpdGVjaHVuaywgdHMud3JpdGVlbmNvZGluZywgdHMuYWZ0ZXJUcmFuc2Zvcm0pOwogIH0gZWxzZSB7CiAgICAvLyBtYXJrIHRoYXQgd2UgbmVlZCBhIHRyYW5zZm9ybSwgc28gdGhhdCBhbnkgZGF0YSB0aGF0IGNvbWVzIGluCiAgICAvLyB3aWxsIGdldCBwcm9jZXNzZWQsIG5vdyB0aGF0IHdlJ3ZlIGFza2VkIGZvciBpdC4KICAgIHRzLm5lZWRUcmFuc2Zvcm0gPSB0cnVlOwogIH0KfTsKCmZ1bmN0aW9uIGRvbmUoc3RyZWFtLCBlcikgewogIGlmIChlcikgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTsKCiAgLy8gaWYgdGhlcmUncyBub3RoaW5nIGluIHRoZSB3cml0ZSBidWZmZXIsIHRoZW4gdGhhdCBtZWFucwogIC8vIHRoYXQgbm90aGluZyBtb3JlIHdpbGwgZXZlciBiZSBwcm92aWRlZAogIHZhciB3cyA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTsKICB2YXIgdHMgPSBzdHJlYW0uX3RyYW5zZm9ybVN0YXRlOwoKICBpZiAod3MubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiB3cy5sZW5ndGggIT0gMCcpOwoKICBpZiAodHMudHJhbnNmb3JtaW5nKSB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmcnKTsKCiAgcmV0dXJuIHN0cmVhbS5wdXNoKG51bGwpOwp9Cn0seyIuL19zdHJlYW1fZHVwbGV4IjoxNDgsImNvcmUtdXRpbC1pcyI6ODAsImluaGVyaXRzIjoxMjh9XSwxNTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKHByb2Nlc3MpewovLyBBIGJpdCBzaW1wbGVyIHRoYW4gcmVhZGFibGUgc3RyZWFtcy4KLy8gSW1wbGVtZW50IGFuIGFzeW5jIC5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYiksIGFuZCBpdCdsbCBoYW5kbGUgYWxsCi8vIHRoZSBkcmFpbiBldmVudCBlbWlzc2lvbiBhbmQgYnVmZmVyaW5nLgoKJ3VzZSBzdHJpY3QnOwoKbW9kdWxlLmV4cG9ydHMgPSBXcml0YWJsZTsKCi8qPHJlcGxhY2VtZW50PiovCnZhciBwcm9jZXNzTmV4dFRpY2sgPSByZXF1aXJlKCdwcm9jZXNzLW5leHRpY2stYXJncycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciBhc3luY1dyaXRlID0gIXByb2Nlc3MuYnJvd3NlciAmJiBbJ3YwLjEwJywgJ3YwLjkuJ10uaW5kZXhPZihwcm9jZXNzLnZlcnNpb24uc2xpY2UoMCwgNSkpID4gLTEgPyBzZXRJbW1lZGlhdGUgOiBwcm9jZXNzTmV4dFRpY2s7Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKLyo8L3JlcGxhY2VtZW50PiovCgpXcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTsKCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7CnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciBpbnRlcm5hbFV0aWwgPSB7CiAgZGVwcmVjYXRlOiByZXF1aXJlKCd1dGlsLWRlcHJlY2F0ZScpCn07Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIFN0cmVhbTsKKGZ1bmN0aW9uICgpIHsKICB0cnkgewogICAgU3RyZWFtID0gcmVxdWlyZSgnc3QnICsgJ3JlYW0nKTsKICB9IGNhdGNoIChfKSB7fSBmaW5hbGx5IHsKICAgIGlmICghU3RyZWFtKSBTdHJlYW0gPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7CiAgfQp9KSgpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7Cgp1dGlsLmluaGVyaXRzKFdyaXRhYmxlLCBTdHJlYW0pOwoKZnVuY3Rpb24gbm9wKCkge30KCmZ1bmN0aW9uIFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICB0aGlzLmNodW5rID0gY2h1bms7CiAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwogIHRoaXMuY2FsbGJhY2sgPSBjYjsKICB0aGlzLm5leHQgPSBudWxsOwp9Cgp2YXIgRHVwbGV4OwpmdW5jdGlvbiBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkgewogIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciBvciBub3QgdGhpcyBzdHJlYW0KICAvLyBjb250YWlucyBidWZmZXJzIG9yIG9iamVjdHMuCiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7CgogIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMud3JpdGFibGVPYmplY3RNb2RlOwoKICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggd3JpdGUoKSBzdGFydHMgcmV0dXJuaW5nIGZhbHNlCiAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyB0aGF0IHdlIGFsd2F5cyByZXR1cm4gZmFsc2UgaWYKICAvLyB0aGUgZW50aXJlIGJ1ZmZlciBpcyBub3QgZmx1c2hlZCBpbW1lZGlhdGVseSBvbiB3cml0ZSgpCiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyazsKICB2YXIgZGVmYXVsdEh3bSA9IHRoaXMub2JqZWN0TW9kZSA/IDE2IDogMTYgKiAxMDI0OwogIHRoaXMuaGlnaFdhdGVyTWFyayA9IGh3bSB8fCBod20gPT09IDAgPyBod20gOiBkZWZhdWx0SHdtOwoKICAvLyBjYXN0IHRvIGludHMuCiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gfiB+dGhpcy5oaWdoV2F0ZXJNYXJrOwoKICB0aGlzLm5lZWREcmFpbiA9IGZhbHNlOwogIC8vIGF0IHRoZSBzdGFydCBvZiBjYWxsaW5nIGVuZCgpCiAgdGhpcy5lbmRpbmcgPSBmYWxzZTsKICAvLyB3aGVuIGVuZCgpIGhhcyBiZWVuIGNhbGxlZCwgYW5kIHJldHVybmVkCiAgdGhpcy5lbmRlZCA9IGZhbHNlOwogIC8vIHdoZW4gJ2ZpbmlzaCcgaXMgZW1pdHRlZAogIHRoaXMuZmluaXNoZWQgPSBmYWxzZTsKCiAgLy8gc2hvdWxkIHdlIGRlY29kZSBzdHJpbmdzIGludG8gYnVmZmVycyBiZWZvcmUgcGFzc2luZyB0byBfd3JpdGU/CiAgLy8gdGhpcyBpcyBoZXJlIHNvIHRoYXQgc29tZSBub2RlLWNvcmUgc3RyZWFtcyBjYW4gb3B0aW1pemUgc3RyaW5nCiAgLy8gaGFuZGxpbmcgYXQgYSBsb3dlciBsZXZlbC4KICB2YXIgbm9EZWNvZGUgPSBvcHRpb25zLmRlY29kZVN0cmluZ3MgPT09IGZhbHNlOwogIHRoaXMuZGVjb2RlU3RyaW5ncyA9ICFub0RlY29kZTsKCiAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZwogIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS4KICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guCiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7CgogIC8vIG5vdCBhbiBhY3R1YWwgYnVmZmVyIHdlIGtlZXAgdHJhY2sgb2YsIGJ1dCBhIG1lYXN1cmVtZW50CiAgLy8gb2YgaG93IG11Y2ggd2UncmUgd2FpdGluZyB0byBnZXQgcHVzaGVkIHRvIHNvbWUgdW5kZXJseWluZwogIC8vIHNvY2tldCBvciBmaWxlLgogIHRoaXMubGVuZ3RoID0gMDsKCiAgLy8gYSBmbGFnIHRvIHNlZSB3aGVuIHdlJ3JlIGluIHRoZSBtaWRkbGUgb2YgYSB3cml0ZS4KICB0aGlzLndyaXRpbmcgPSBmYWxzZTsKCiAgLy8gd2hlbiB0cnVlIGFsbCB3cml0ZXMgd2lsbCBiZSBidWZmZXJlZCB1bnRpbCAudW5jb3JrKCkgY2FsbAogIHRoaXMuY29ya2VkID0gMDsKCiAgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksCiAgLy8gb3Igb24gYSBsYXRlciB0aWNrLiAgV2Ugc2V0IHRoaXMgdG8gdHJ1ZSBhdCBmaXJzdCwgYmVjYXVzZSBhbnkKICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCAibGF0ZXIiIHNob3VsZCBnZW5lcmFsbHkgYWxzbwogIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLgogIHRoaXMuc3luYyA9IHRydWU7CgogIC8vIGEgZmxhZyB0byBrbm93IGlmIHdlJ3JlIHByb2Nlc3NpbmcgcHJldmlvdXNseSBidWZmZXJlZCBpdGVtcywgd2hpY2gKICAvLyBtYXkgY2FsbCB0aGUgX3dyaXRlKCkgY2FsbGJhY2sgaW4gdGhlIHNhbWUgdGljaywgc28gdGhhdCB3ZSBkb24ndAogIC8vIGVuZCB1cCBpbiBhbiBvdmVybGFwcGVkIG9ud3JpdGUgc2l0dWF0aW9uLgogIHRoaXMuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlOwoKICAvLyB0aGUgY2FsbGJhY2sgdGhhdCdzIHBhc3NlZCB0byBfd3JpdGUoY2h1bmssY2IpCiAgdGhpcy5vbndyaXRlID0gZnVuY3Rpb24gKGVyKSB7CiAgICBvbndyaXRlKHN0cmVhbSwgZXIpOwogIH07CgogIC8vIHRoZSBjYWxsYmFjayB0aGF0IHRoZSB1c2VyIHN1cHBsaWVzIHRvIHdyaXRlKGNodW5rLGVuY29kaW5nLGNiKQogIHRoaXMud3JpdGVjYiA9IG51bGw7CgogIC8vIHRoZSBhbW91bnQgdGhhdCBpcyBiZWluZyB3cml0dGVuIHdoZW4gX3dyaXRlIGlzIGNhbGxlZC4KICB0aGlzLndyaXRlbGVuID0gMDsKCiAgdGhpcy5idWZmZXJlZFJlcXVlc3QgPSBudWxsOwogIHRoaXMubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7CgogIC8vIG51bWJlciBvZiBwZW5kaW5nIHVzZXItc3VwcGxpZWQgd3JpdGUgY2FsbGJhY2tzCiAgLy8gdGhpcyBtdXN0IGJlIDAgYmVmb3JlICdmaW5pc2gnIGNhbiBiZSBlbWl0dGVkCiAgdGhpcy5wZW5kaW5nY2IgPSAwOwoKICAvLyBlbWl0IHByZWZpbmlzaCBpZiB0aGUgb25seSB0aGluZyB3ZSdyZSB3YWl0aW5nIGZvciBpcyBfd3JpdGUgY2JzCiAgLy8gVGhpcyBpcyByZWxldmFudCBmb3Igc3luY2hyb25vdXMgVHJhbnNmb3JtIHN0cmVhbXMKICB0aGlzLnByZWZpbmlzaGVkID0gZmFsc2U7CgogIC8vIFRydWUgaWYgdGhlIGVycm9yIHdhcyBhbHJlYWR5IGVtaXR0ZWQgYW5kIHNob3VsZCBub3QgYmUgdGhyb3duIGFnYWluCiAgdGhpcy5lcnJvckVtaXR0ZWQgPSBmYWxzZTsKCiAgLy8gY291bnQgYnVmZmVyZWQgcmVxdWVzdHMKICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdENvdW50ID0gMDsKCiAgLy8gY3JlYXRlIHRoZSB0d28gb2JqZWN0cyBuZWVkZWQgdG8gc3RvcmUgdGhlIGNvcmtlZCByZXF1ZXN0cwogIC8vIHRoZXkgYXJlIG5vdCBhIGxpbmtlZCBsaXN0LCBhcyBubyBuZXcgZWxlbWVudHMgYXJlIGluc2VydGVkIGluIHRoZXJlCiAgdGhpcy5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdCh0aGlzKTsKICB0aGlzLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gbmV3IENvcmtlZFJlcXVlc3QodGhpcyk7Cn0KCldyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIHdyaXRhYmxlU3RhdGVHZXRCdWZmZXIoKSB7CiAgdmFyIGN1cnJlbnQgPSB0aGlzLmJ1ZmZlcmVkUmVxdWVzdDsKICB2YXIgb3V0ID0gW107CiAgd2hpbGUgKGN1cnJlbnQpIHsKICAgIG91dC5wdXNoKGN1cnJlbnQpOwogICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDsKICB9CiAgcmV0dXJuIG91dDsKfTsKCihmdW5jdGlvbiAoKSB7CiAgdHJ5IHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZVN0YXRlLnByb3RvdHlwZSwgJ2J1ZmZlcicsIHsKICAgICAgZ2V0OiBpbnRlcm5hbFV0aWwuZGVwcmVjYXRlKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5nZXRCdWZmZXIoKTsKICAgICAgfSwgJ193cml0YWJsZVN0YXRlLmJ1ZmZlciBpcyBkZXByZWNhdGVkLiBVc2UgX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyICcgKyAnaW5zdGVhZC4nKQogICAgfSk7CiAgfSBjYXRjaCAoXykge30KfSkoKTsKCnZhciBEdXBsZXg7CmZ1bmN0aW9uIFdyaXRhYmxlKG9wdGlvbnMpIHsKICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpOwoKICAvLyBXcml0YWJsZSBjdG9yIGlzIGFwcGxpZWQgdG8gRHVwbGV4ZXMsIHRob3VnaCB0aGV5J3JlIG5vdAogIC8vIGluc3RhbmNlb2YgV3JpdGFibGUsIHRoZXkncmUgaW5zdGFuY2VvZiBSZWFkYWJsZS4KICBpZiAoISh0aGlzIGluc3RhbmNlb2YgV3JpdGFibGUpICYmICEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpIHJldHVybiBuZXcgV3JpdGFibGUob3B0aW9ucyk7CgogIHRoaXMuX3dyaXRhYmxlU3RhdGUgPSBuZXcgV3JpdGFibGVTdGF0ZShvcHRpb25zLCB0aGlzKTsKCiAgLy8gbGVnYWN5LgogIHRoaXMud3JpdGFibGUgPSB0cnVlOwoKICBpZiAob3B0aW9ucykgewogICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRlID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZSA9IG9wdGlvbnMud3JpdGU7CgogICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRldiA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fd3JpdGV2ID0gb3B0aW9ucy53cml0ZXY7CiAgfQoKICBTdHJlYW0uY2FsbCh0aGlzKTsKfQoKLy8gT3RoZXJ3aXNlIHBlb3BsZSBjYW4gcGlwZSBXcml0YWJsZSBzdHJlYW1zLCB3aGljaCBpcyBqdXN0IHdyb25nLgpXcml0YWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdDYW5ub3QgcGlwZS4gTm90IHJlYWRhYmxlLicpKTsKfTsKCmZ1bmN0aW9uIHdyaXRlQWZ0ZXJFbmQoc3RyZWFtLCBjYikgewogIHZhciBlciA9IG5ldyBFcnJvcignd3JpdGUgYWZ0ZXIgZW5kJyk7CiAgLy8gVE9ETzogZGVmZXIgZXJyb3IgZXZlbnRzIGNvbnNpc3RlbnRseSBldmVyeXdoZXJlLCBub3QganVzdCB0aGUgY2IKICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CiAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7Cn0KCi8vIElmIHdlIGdldCBzb21ldGhpbmcgdGhhdCBpcyBub3QgYSBidWZmZXIsIHN0cmluZywgbnVsbCwgb3IgdW5kZWZpbmVkLAovLyBhbmQgd2UncmUgbm90IGluIG9iamVjdE1vZGUsIHRoZW4gdGhhdCdzIGFuIGVycm9yLgovLyBPdGhlcndpc2Ugc3RyZWFtIGNodW5rcyBhcmUgYWxsIGNvbnNpZGVyZWQgdG8gYmUgb2YgbGVuZ3RoPTEsIGFuZCB0aGUKLy8gd2F0ZXJtYXJrcyBkZXRlcm1pbmUgaG93IG1hbnkgb2JqZWN0cyB0byBrZWVwIGluIHRoZSBidWZmZXIsIHJhdGhlciB0aGFuCi8vIGhvdyBtYW55IGJ5dGVzIG9yIGNoYXJhY3RlcnMuCmZ1bmN0aW9uIHZhbGlkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGNiKSB7CiAgdmFyIHZhbGlkID0gdHJ1ZTsKCiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoY2h1bmspICYmIHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhc3RhdGUub2JqZWN0TW9kZSkgewogICAgdmFyIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpOwogICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpOwogICAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7CiAgICB2YWxpZCA9IGZhbHNlOwogIH0KICByZXR1cm4gdmFsaWQ7Cn0KCldyaXRhYmxlLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTsKICB2YXIgcmV0ID0gZmFsc2U7CgogIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHsKICAgIGNiID0gZW5jb2Rpbmc7CiAgICBlbmNvZGluZyA9IG51bGw7CiAgfQoKICBpZiAoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgZW5jb2RpbmcgPSAnYnVmZmVyJztlbHNlIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gc3RhdGUuZGVmYXVsdEVuY29kaW5nOwoKICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSBjYiA9IG5vcDsKCiAgaWYgKHN0YXRlLmVuZGVkKSB3cml0ZUFmdGVyRW5kKHRoaXMsIGNiKTtlbHNlIGlmICh2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7CiAgICBzdGF0ZS5wZW5kaW5nY2IrKzsKICAgIHJldCA9IHdyaXRlT3JCdWZmZXIodGhpcywgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgY2IpOwogIH0KCiAgcmV0dXJuIHJldDsKfTsKCldyaXRhYmxlLnByb3RvdHlwZS5jb3JrID0gZnVuY3Rpb24gKCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7CgogIHN0YXRlLmNvcmtlZCsrOwp9OwoKV3JpdGFibGUucHJvdG90eXBlLnVuY29yayA9IGZ1bmN0aW9uICgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoKICBpZiAoc3RhdGUuY29ya2VkKSB7CiAgICBzdGF0ZS5jb3JrZWQtLTsKCiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiYgIXN0YXRlLmNvcmtlZCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSBjbGVhckJ1ZmZlcih0aGlzLCBzdGF0ZSk7CiAgfQp9OwoKV3JpdGFibGUucHJvdG90eXBlLnNldERlZmF1bHRFbmNvZGluZyA9IGZ1bmN0aW9uIHNldERlZmF1bHRFbmNvZGluZyhlbmNvZGluZykgewogIC8vIG5vZGU6OlBhcnNlRW5jb2RpbmcoKSByZXF1aXJlcyBsb3dlciBjYXNlLgogIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7CiAgaWYgKCEoWydoZXgnLCAndXRmOCcsICd1dGYtOCcsICdhc2NpaScsICdiaW5hcnknLCAnYmFzZTY0JywgJ3VjczInLCAndWNzLTInLCAndXRmMTZsZScsICd1dGYtMTZsZScsICdyYXcnXS5pbmRleE9mKChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpKSA+IC0xKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKTsKICB0aGlzLl93cml0YWJsZVN0YXRlLmRlZmF1bHRFbmNvZGluZyA9IGVuY29kaW5nOwp9OwoKZnVuY3Rpb24gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZykgewogIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJiBzdGF0ZS5kZWNvZGVTdHJpbmdzICE9PSBmYWxzZSAmJiB0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7CiAgICBjaHVuayA9IG5ldyBCdWZmZXIoY2h1bmssIGVuY29kaW5nKTsKICB9CiAgcmV0dXJuIGNodW5rOwp9CgovLyBpZiB3ZSdyZSBhbHJlYWR5IHdyaXRpbmcgc29tZXRoaW5nLCB0aGVuIGp1c3QgcHV0IHRoaXMKLy8gaW4gdGhlIHF1ZXVlLCBhbmQgd2FpdCBvdXIgdHVybi4gIE90aGVyd2lzZSwgY2FsbCBfd3JpdGUKLy8gSWYgd2UgcmV0dXJuIGZhbHNlLCB0aGVuIHdlIG5lZWQgYSBkcmFpbiBldmVudCwgc28gc2V0IHRoYXQgZmxhZy4KZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgY2h1bmsgPSBkZWNvZGVDaHVuayhzdGF0ZSwgY2h1bmssIGVuY29kaW5nKTsKCiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpIGVuY29kaW5nID0gJ2J1ZmZlcic7CiAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwoKICBzdGF0ZS5sZW5ndGggKz0gbGVuOwoKICB2YXIgcmV0ID0gc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyazsKICAvLyB3ZSBtdXN0IGVuc3VyZSB0aGF0IHByZXZpb3VzIG5lZWREcmFpbiB3aWxsIG5vdCBiZSByZXNldCB0byBmYWxzZS4KICBpZiAoIXJldCkgc3RhdGUubmVlZERyYWluID0gdHJ1ZTsKCiAgaWYgKHN0YXRlLndyaXRpbmcgfHwgc3RhdGUuY29ya2VkKSB7CiAgICB2YXIgbGFzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CiAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbmV3IFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpOwogICAgaWYgKGxhc3QpIHsKICAgICAgbGFzdC5uZXh0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKICAgIH0gZWxzZSB7CiAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CiAgICB9CiAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudCArPSAxOwogIH0gZWxzZSB7CiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKZnVuY3Rpb24gZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB3cml0ZXYsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYikgewogIHN0YXRlLndyaXRlbGVuID0gbGVuOwogIHN0YXRlLndyaXRlY2IgPSBjYjsKICBzdGF0ZS53cml0aW5nID0gdHJ1ZTsKICBzdGF0ZS5zeW5jID0gdHJ1ZTsKICBpZiAod3JpdGV2KSBzdHJlYW0uX3dyaXRldihjaHVuaywgc3RhdGUub253cml0ZSk7ZWxzZSBzdHJlYW0uX3dyaXRlKGNodW5rLCBlbmNvZGluZywgc3RhdGUub253cml0ZSk7CiAgc3RhdGUuc3luYyA9IGZhbHNlOwp9CgpmdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKSB7CiAgLS1zdGF0ZS5wZW5kaW5nY2I7CiAgaWYgKHN5bmMpIHByb2Nlc3NOZXh0VGljayhjYiwgZXIpO2Vsc2UgY2IoZXIpOwoKICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTsKICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7Cn0KCmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkgewogIHN0YXRlLndyaXRpbmcgPSBmYWxzZTsKICBzdGF0ZS53cml0ZWNiID0gbnVsbDsKICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47CiAgc3RhdGUud3JpdGVsZW4gPSAwOwp9CgpmdW5jdGlvbiBvbndyaXRlKHN0cmVhbSwgZXIpIHsKICB2YXIgc3RhdGUgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7CiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jOwogIHZhciBjYiA9IHN0YXRlLndyaXRlY2I7CgogIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7CgogIGlmIChlcikgb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYik7ZWxzZSB7CiAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldAogICAgdmFyIGZpbmlzaGVkID0gbmVlZEZpbmlzaChzdGF0ZSk7CgogICAgaWYgKCFmaW5pc2hlZCAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkgewogICAgICBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKTsKICAgIH0KCiAgICBpZiAoc3luYykgewogICAgICAvKjxyZXBsYWNlbWVudD4qLwogICAgICBhc3luY1dyaXRlKGFmdGVyV3JpdGUsIHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7CiAgICAgIC8qPC9yZXBsYWNlbWVudD4qLwogICAgfSBlbHNlIHsKICAgICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7CiAgICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKSB7CiAgaWYgKCFmaW5pc2hlZCkgb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpOwogIHN0YXRlLnBlbmRpbmdjYi0tOwogIGNiKCk7CiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7Cn0KCi8vIE11c3QgZm9yY2UgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIG9uIG5leHRUaWNrLCBzbyB0aGF0IHdlIGRvbid0Ci8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm4KLy8gdmFsdWUsIGFuZCBoYXMgYSBjaGFuY2UgdG8gYXR0YWNoIGEgJ2RyYWluJyBsaXN0ZW5lci4KZnVuY3Rpb24gb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpIHsKICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLm5lZWREcmFpbikgewogICAgc3RhdGUubmVlZERyYWluID0gZmFsc2U7CiAgICBzdHJlYW0uZW1pdCgnZHJhaW4nKTsKICB9Cn0KCi8vIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGluIHRoZSBidWZmZXIgd2FpdGluZywgdGhlbiBwcm9jZXNzIGl0CmZ1bmN0aW9uIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpIHsKICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gdHJ1ZTsKICB2YXIgZW50cnkgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3Q7CgogIGlmIChzdHJlYW0uX3dyaXRldiAmJiBlbnRyeSAmJiBlbnRyeS5uZXh0KSB7CiAgICAvLyBGYXN0IGNhc2UsIHdyaXRlIGV2ZXJ5dGhpbmcgdXNpbmcgX3dyaXRldigpCiAgICB2YXIgbCA9IHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50OwogICAgdmFyIGJ1ZmZlciA9IG5ldyBBcnJheShsKTsKICAgIHZhciBob2xkZXIgPSBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWU7CiAgICBob2xkZXIuZW50cnkgPSBlbnRyeTsKCiAgICB2YXIgY291bnQgPSAwOwogICAgd2hpbGUgKGVudHJ5KSB7CiAgICAgIGJ1ZmZlcltjb3VudF0gPSBlbnRyeTsKICAgICAgZW50cnkgPSBlbnRyeS5uZXh0OwogICAgICBjb3VudCArPSAxOwogICAgfQoKICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgdHJ1ZSwgc3RhdGUubGVuZ3RoLCBidWZmZXIsICcnLCBob2xkZXIuZmluaXNoKTsKCiAgICAvLyBkb1dyaXRlIGlzIGFsd2F5cyBhc3luYywgZGVmZXIgdGhlc2UgdG8gc2F2ZSBhIGJpdCBvZiB0aW1lCiAgICAvLyBhcyB0aGUgaG90IHBhdGggZW5kcyB3aXRoIGRvV3JpdGUKICAgIHN0YXRlLnBlbmRpbmdjYisrOwogICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7CiAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBob2xkZXIubmV4dDsKICAgIGhvbGRlci5uZXh0ID0gbnVsbDsKICB9IGVsc2UgewogICAgLy8gU2xvdyBjYXNlLCB3cml0ZSBjaHVua3Mgb25lLWJ5LW9uZQogICAgd2hpbGUgKGVudHJ5KSB7CiAgICAgIHZhciBjaHVuayA9IGVudHJ5LmNodW5rOwogICAgICB2YXIgZW5jb2RpbmcgPSBlbnRyeS5lbmNvZGluZzsKICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7CiAgICAgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDsKCiAgICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDsKICAgICAgLy8gaWYgd2UgZGlkbid0IGNhbGwgdGhlIG9ud3JpdGUgaW1tZWRpYXRlbHksIHRoZW4KICAgICAgLy8gaXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHdhaXQgdW50aWwgaXQgZG9lcy4KICAgICAgLy8gYWxzbywgdGhhdCBtZWFucyB0aGF0IHRoZSBjaHVuayBhbmQgY2IgYXJlIGN1cnJlbnRseQogICAgICAvLyBiZWluZyBwcm9jZXNzZWQsIHNvIG1vdmUgdGhlIGJ1ZmZlciBjb3VudGVyIHBhc3QgdGhlbS4KICAgICAgaWYgKHN0YXRlLndyaXRpbmcpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChlbnRyeSA9PT0gbnVsbCkgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7CiAgfQoKICBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7CiAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gZW50cnk7CiAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlOwp9CgpXcml0YWJsZS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICBjYihuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpKTsKfTsKCldyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGV2ID0gbnVsbDsKCldyaXRhYmxlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewogIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7CgogIGlmICh0eXBlb2YgY2h1bmsgPT09ICdmdW5jdGlvbicpIHsKICAgIGNiID0gY2h1bms7CiAgICBjaHVuayA9IG51bGw7CiAgICBlbmNvZGluZyA9IG51bGw7CiAgfSBlbHNlIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHsKICAgIGNiID0gZW5jb2Rpbmc7CiAgICBlbmNvZGluZyA9IG51bGw7CiAgfQoKICBpZiAoY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCkgdGhpcy53cml0ZShjaHVuaywgZW5jb2RpbmcpOwoKICAvLyAuZW5kKCkgZnVsbHkgdW5jb3JrcwogIGlmIChzdGF0ZS5jb3JrZWQpIHsKICAgIHN0YXRlLmNvcmtlZCA9IDE7CiAgICB0aGlzLnVuY29yaygpOwogIH0KCiAgLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLgogIGlmICghc3RhdGUuZW5kaW5nICYmICFzdGF0ZS5maW5pc2hlZCkgZW5kV3JpdGFibGUodGhpcywgc3RhdGUsIGNiKTsKfTsKCmZ1bmN0aW9uIG5lZWRGaW5pc2goc3RhdGUpIHsKICByZXR1cm4gc3RhdGUuZW5kaW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPT09IG51bGwgJiYgIXN0YXRlLmZpbmlzaGVkICYmICFzdGF0ZS53cml0aW5nOwp9CgpmdW5jdGlvbiBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSkgewogIGlmICghc3RhdGUucHJlZmluaXNoZWQpIHsKICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTsKICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTsKICB9Cn0KCmZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHsKICB2YXIgbmVlZCA9IG5lZWRGaW5pc2goc3RhdGUpOwogIGlmIChuZWVkKSB7CiAgICBpZiAoc3RhdGUucGVuZGluZ2NiID09PSAwKSB7CiAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTsKICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlOwogICAgICBzdHJlYW0uZW1pdCgnZmluaXNoJyk7CiAgICB9IGVsc2UgewogICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7CiAgICB9CiAgfQogIHJldHVybiBuZWVkOwp9CgpmdW5jdGlvbiBlbmRXcml0YWJsZShzdHJlYW0sIHN0YXRlLCBjYikgewogIHN0YXRlLmVuZGluZyA9IHRydWU7CiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7CiAgaWYgKGNiKSB7CiAgICBpZiAoc3RhdGUuZmluaXNoZWQpIHByb2Nlc3NOZXh0VGljayhjYik7ZWxzZSBzdHJlYW0ub25jZSgnZmluaXNoJywgY2IpOwogIH0KICBzdGF0ZS5lbmRlZCA9IHRydWU7CiAgc3RyZWFtLndyaXRhYmxlID0gZmFsc2U7Cn0KCi8vIEl0IHNlZW1zIGEgbGlua2VkIGxpc3QgYnV0IGl0IGlzIG5vdAovLyB0aGVyZSB3aWxsIGJlIG9ubHkgMiBvZiB0aGVzZSBmb3IgZWFjaCBzdHJlYW0KZnVuY3Rpb24gQ29ya2VkUmVxdWVzdChzdGF0ZSkgewogIHZhciBfdGhpcyA9IHRoaXM7CgogIHRoaXMubmV4dCA9IG51bGw7CiAgdGhpcy5lbnRyeSA9IG51bGw7CgogIHRoaXMuZmluaXNoID0gZnVuY3Rpb24gKGVycikgewogICAgdmFyIGVudHJ5ID0gX3RoaXMuZW50cnk7CiAgICBfdGhpcy5lbnRyeSA9IG51bGw7CiAgICB3aGlsZSAoZW50cnkpIHsKICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7CiAgICAgIHN0YXRlLnBlbmRpbmdjYi0tOwogICAgICBjYihlcnIpOwogICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7CiAgICB9CiAgICBpZiAoc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlKSB7CiAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gX3RoaXM7CiAgICB9IGVsc2UgewogICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBfdGhpczsKICAgIH0KICB9Owp9Cn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKQp9LHsiLi9fc3RyZWFtX2R1cGxleCI6MTQ4LCJfcHJvY2VzcyI6MTM5LCJidWZmZXIiOjcwLCJjb3JlLXV0aWwtaXMiOjgwLCJldmVudHMiOjcyLCJpbmhlcml0cyI6MTI4LCJwcm9jZXNzLW5leHRpY2stYXJncyI6MTM4LCJ1dGlsLWRlcHJlY2F0ZSI6MTc0fV0sMTUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzcxXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NzF9XSwxNTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoIi4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiKQoKfSx7Ii4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiOjE0OX1dLDE1NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBTdHJlYW0gPSAoZnVuY3Rpb24gKCl7CiAgdHJ5IHsKICAgIHJldHVybiByZXF1aXJlKCdzdCcgKyAncmVhbScpOyAvLyBoYWNrIHRvIGZpeCBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgaXNzdWUgd2hlbiB1c2VkIHdpdGggYnJvd3NlcmlmeQogIH0gY2F0Y2goXyl7fQp9KCkpOwpleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzJyk7CmV4cG9ydHMuU3RyZWFtID0gU3RyZWFtIHx8IGV4cG9ydHM7CmV4cG9ydHMuUmVhZGFibGUgPSBleHBvcnRzOwpleHBvcnRzLldyaXRhYmxlID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcycpOwpleHBvcnRzLkR1cGxleCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fZHVwbGV4LmpzJyk7CmV4cG9ydHMuVHJhbnNmb3JtID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMnKTsKZXhwb3J0cy5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMnKTsKCn0seyIuL2xpYi9fc3RyZWFtX2R1cGxleC5qcyI6MTQ4LCIuL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzIjoxNDksIi4vbGliL19zdHJlYW1fcmVhZGFibGUuanMiOjE1MCwiLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMiOjE1MSwiLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcyI6MTUyfV0sMTU2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCIuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcyIpCgp9LHsiLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMiOjE1MX1dLDE1NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgiLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcyIpCgp9LHsiLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcyI6MTUyfV0sMTU4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKgpDcnlwdG9KUyB2My4xLjIKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCi8qKiBAcHJlc2VydmUKKGMpIDIwMTIgYnkgQ8OpZHJpYyBNZXNuaWwuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCgpSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6CgogICAgLSBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAgICAtIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KClRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTIElTIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiovCgovLyBjb25zdGFudHMgdGFibGUKdmFyIHpsID0gWwogIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsCiAgNywgNCwgMTMsIDEsIDEwLCA2LCAxNSwgMywgMTIsIDAsIDksIDUsIDIsIDE0LCAxMSwgOCwKICAzLCAxMCwgMTQsIDQsIDksIDE1LCA4LCAxLCAyLCA3LCAwLCA2LCAxMywgMTEsIDUsIDEyLAogIDEsIDksIDExLCAxMCwgMCwgOCwgMTIsIDQsIDEzLCAzLCA3LCAxNSwgMTQsIDUsIDYsIDIsCiAgNCwgMCwgNSwgOSwgNywgMTIsIDIsIDEwLCAxNCwgMSwgMywgOCwgMTEsIDYsIDE1LCAxMwpdCgp2YXIgenIgPSBbCiAgNSwgMTQsIDcsIDAsIDksIDIsIDExLCA0LCAxMywgNiwgMTUsIDgsIDEsIDEwLCAzLCAxMiwKICA2LCAxMSwgMywgNywgMCwgMTMsIDUsIDEwLCAxNCwgMTUsIDgsIDEyLCA0LCA5LCAxLCAyLAogIDE1LCA1LCAxLCAzLCA3LCAxNCwgNiwgOSwgMTEsIDgsIDEyLCAyLCAxMCwgMCwgNCwgMTMsCiAgOCwgNiwgNCwgMSwgMywgMTEsIDE1LCAwLCA1LCAxMiwgMiwgMTMsIDksIDcsIDEwLCAxNCwKICAxMiwgMTUsIDEwLCA0LCAxLCA1LCA4LCA3LCA2LCAyLCAxMywgMTQsIDAsIDMsIDksIDExCl0KCnZhciBzbCA9IFsKICAxMSwgMTQsIDE1LCAxMiwgNSwgOCwgNywgOSwgMTEsIDEzLCAxNCwgMTUsIDYsIDcsIDksIDgsCiAgNywgNiwgOCwgMTMsIDExLCA5LCA3LCAxNSwgNywgMTIsIDE1LCA5LCAxMSwgNywgMTMsIDEyLAogIDExLCAxMywgNiwgNywgMTQsIDksIDEzLCAxNSwgMTQsIDgsIDEzLCA2LCA1LCAxMiwgNywgNSwKICAxMSwgMTIsIDE0LCAxNSwgMTQsIDE1LCA5LCA4LCA5LCAxNCwgNSwgNiwgOCwgNiwgNSwgMTIsCiAgOSwgMTUsIDUsIDExLCA2LCA4LCAxMywgMTIsIDUsIDEyLCAxMywgMTQsIDExLCA4LCA1LCA2Cl0KCnZhciBzciA9IFsKICA4LCA5LCA5LCAxMSwgMTMsIDE1LCAxNSwgNSwgNywgNywgOCwgMTEsIDE0LCAxNCwgMTIsIDYsCiAgOSwgMTMsIDE1LCA3LCAxMiwgOCwgOSwgMTEsIDcsIDcsIDEyLCA3LCA2LCAxNSwgMTMsIDExLAogIDksIDcsIDE1LCAxMSwgOCwgNiwgNiwgMTQsIDEyLCAxMywgNSwgMTQsIDEzLCAxMywgNywgNSwKICAxNSwgNSwgOCwgMTEsIDE0LCAxNCwgNiwgMTQsIDYsIDksIDEyLCA5LCAxMiwgNSwgMTUsIDgsCiAgOCwgNSwgMTIsIDksIDEyLCA1LCAxNCwgNiwgOCwgMTMsIDYsIDUsIDE1LCAxMywgMTEsIDExCl0KCnZhciBobCA9IFsweDAwMDAwMDAwLCAweDVBODI3OTk5LCAweDZFRDlFQkExLCAweDhGMUJCQ0RDLCAweEE5NTNGRDRFXQp2YXIgaHIgPSBbMHg1MEEyOEJFNiwgMHg1QzRERDEyNCwgMHg2RDcwM0VGMywgMHg3QTZENzZFOSwgMHgwMDAwMDAwMF0KCmZ1bmN0aW9uIGJ5dGVzVG9Xb3JkcyAoYnl0ZXMpIHsKICB2YXIgd29yZHMgPSBbXQogIGZvciAodmFyIGkgPSAwLCBiID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrLCBiICs9IDgpIHsKICAgIHdvcmRzW2IgPj4+IDVdIHw9IGJ5dGVzW2ldIDw8ICgyNCAtIGIgJSAzMikKICB9CiAgcmV0dXJuIHdvcmRzCn0KCmZ1bmN0aW9uIHdvcmRzVG9CeXRlcyAod29yZHMpIHsKICB2YXIgYnl0ZXMgPSBbXQogIGZvciAodmFyIGIgPSAwOyBiIDwgd29yZHMubGVuZ3RoICogMzI7IGIgKz0gOCkgewogICAgYnl0ZXMucHVzaCgod29yZHNbYiA+Pj4gNV0gPj4+ICgyNCAtIGIgJSAzMikpICYgMHhGRikKICB9CiAgcmV0dXJuIGJ5dGVzCn0KCmZ1bmN0aW9uIHByb2Nlc3NCbG9jayAoSCwgTSwgb2Zmc2V0KSB7CiAgLy8gc3dhcCBlbmRpYW4KICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHsKICAgIHZhciBvZmZzZXRfaSA9IG9mZnNldCArIGkKICAgIHZhciBNX29mZnNldF9pID0gTVtvZmZzZXRfaV0KCiAgICAvLyBTd2FwCiAgICBNW29mZnNldF9pXSA9ICgKICAgICAgKCgoTV9vZmZzZXRfaSA8PCA4KSB8IChNX29mZnNldF9pID4+PiAyNCkpICYgMHgwMGZmMDBmZikgfAogICAgICAoKChNX29mZnNldF9pIDw8IDI0KSB8IChNX29mZnNldF9pID4+PiA4KSkgJiAweGZmMDBmZjAwKQogICAgKQogIH0KCiAgLy8gV29ya2luZyB2YXJpYWJsZXMKICB2YXIgYWwsIGJsLCBjbCwgZGwsIGVsCiAgdmFyIGFyLCBiciwgY3IsIGRyLCBlcgoKICBhciA9IGFsID0gSFswXQogIGJyID0gYmwgPSBIWzFdCiAgY3IgPSBjbCA9IEhbMl0KICBkciA9IGRsID0gSFszXQogIGVyID0gZWwgPSBIWzRdCgogIC8vIGNvbXB1dGF0aW9uCiAgdmFyIHQKICBmb3IgKGkgPSAwOyBpIDwgODA7IGkgKz0gMSkgewogICAgdCA9IChhbCArIE1bb2Zmc2V0ICsgemxbaV1dKSB8IDAKICAgIGlmIChpIDwgMTYpIHsKICAgICAgdCArPSBmMShibCwgY2wsIGRsKSArIGhsWzBdCiAgICB9IGVsc2UgaWYgKGkgPCAzMikgewogICAgICB0ICs9IGYyKGJsLCBjbCwgZGwpICsgaGxbMV0KICAgIH0gZWxzZSBpZiAoaSA8IDQ4KSB7CiAgICAgIHQgKz0gZjMoYmwsIGNsLCBkbCkgKyBobFsyXQogICAgfSBlbHNlIGlmIChpIDwgNjQpIHsKICAgICAgdCArPSBmNChibCwgY2wsIGRsKSArIGhsWzNdCiAgICB9IGVsc2Ugey8vIGlmIChpPDgwKSB7CiAgICAgIHQgKz0gZjUoYmwsIGNsLCBkbCkgKyBobFs0XQogICAgfQogICAgdCA9IHQgfCAwCiAgICB0ID0gcm90bCh0LCBzbFtpXSkKICAgIHQgPSAodCArIGVsKSB8IDAKICAgIGFsID0gZWwKICAgIGVsID0gZGwKICAgIGRsID0gcm90bChjbCwgMTApCiAgICBjbCA9IGJsCiAgICBibCA9IHQKCiAgICB0ID0gKGFyICsgTVtvZmZzZXQgKyB6cltpXV0pIHwgMAogICAgaWYgKGkgPCAxNikgewogICAgICB0ICs9IGY1KGJyLCBjciwgZHIpICsgaHJbMF0KICAgIH0gZWxzZSBpZiAoaSA8IDMyKSB7CiAgICAgIHQgKz0gZjQoYnIsIGNyLCBkcikgKyBoclsxXQogICAgfSBlbHNlIGlmIChpIDwgNDgpIHsKICAgICAgdCArPSBmMyhiciwgY3IsIGRyKSArIGhyWzJdCiAgICB9IGVsc2UgaWYgKGkgPCA2NCkgewogICAgICB0ICs9IGYyKGJyLCBjciwgZHIpICsgaHJbM10KICAgIH0gZWxzZSB7Ly8gaWYgKGk8ODApIHsKICAgICAgdCArPSBmMShiciwgY3IsIGRyKSArIGhyWzRdCiAgICB9CgogICAgdCA9IHQgfCAwCiAgICB0ID0gcm90bCh0LCBzcltpXSkKICAgIHQgPSAodCArIGVyKSB8IDAKICAgIGFyID0gZXIKICAgIGVyID0gZHIKICAgIGRyID0gcm90bChjciwgMTApCiAgICBjciA9IGJyCiAgICBiciA9IHQKICB9CgogIC8vIGludGVybWVkaWF0ZSBoYXNoIHZhbHVlCiAgdCA9IChIWzFdICsgY2wgKyBkcikgfCAwCiAgSFsxXSA9IChIWzJdICsgZGwgKyBlcikgfCAwCiAgSFsyXSA9IChIWzNdICsgZWwgKyBhcikgfCAwCiAgSFszXSA9IChIWzRdICsgYWwgKyBicikgfCAwCiAgSFs0XSA9IChIWzBdICsgYmwgKyBjcikgfCAwCiAgSFswXSA9IHQKfQoKZnVuY3Rpb24gZjEgKHgsIHksIHopIHsKICByZXR1cm4gKCh4KSBeICh5KSBeICh6KSkKfQoKZnVuY3Rpb24gZjIgKHgsIHksIHopIHsKICByZXR1cm4gKCgoeCkgJiAoeSkpIHwgKCh+eCkgJiAoeikpKQp9CgpmdW5jdGlvbiBmMyAoeCwgeSwgeikgewogIHJldHVybiAoKCh4KSB8ICh+KHkpKSkgXiAoeikpCn0KCmZ1bmN0aW9uIGY0ICh4LCB5LCB6KSB7CiAgcmV0dXJuICgoKHgpICYgKHopKSB8ICgoeSkgJiAofih6KSkpKQp9CgpmdW5jdGlvbiBmNSAoeCwgeSwgeikgewogIHJldHVybiAoKHgpIF4gKCh5KSB8ICh+KHopKSkpCn0KCmZ1bmN0aW9uIHJvdGwgKHgsIG4pIHsKICByZXR1cm4gKHggPDwgbikgfCAoeCA+Pj4gKDMyIC0gbikpCn0KCmZ1bmN0aW9uIHJpcGVtZDE2MCAobWVzc2FnZSkgewogIHZhciBIID0gWzB4Njc0NTIzMDEsIDB4RUZDREFCODksIDB4OThCQURDRkUsIDB4MTAzMjU0NzYsIDB4QzNEMkUxRjBdCgogIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHsKICAgIG1lc3NhZ2UgPSBuZXcgQnVmZmVyKG1lc3NhZ2UsICd1dGY4JykKICB9CgogIHZhciBtID0gYnl0ZXNUb1dvcmRzKG1lc3NhZ2UpCgogIHZhciBuQml0c0xlZnQgPSBtZXNzYWdlLmxlbmd0aCAqIDgKICB2YXIgbkJpdHNUb3RhbCA9IG1lc3NhZ2UubGVuZ3RoICogOAoKICAvLyBBZGQgcGFkZGluZwogIG1bbkJpdHNMZWZ0ID4+PiA1XSB8PSAweDgwIDw8ICgyNCAtIG5CaXRzTGVmdCAlIDMyKQogIG1bKCgobkJpdHNMZWZ0ICsgNjQpID4+PiA5KSA8PCA0KSArIDE0XSA9ICgKICAgICgoKG5CaXRzVG90YWwgPDwgOCkgfCAobkJpdHNUb3RhbCA+Pj4gMjQpKSAmIDB4MDBmZjAwZmYpIHwKICAgICgoKG5CaXRzVG90YWwgPDwgMjQpIHwgKG5CaXRzVG90YWwgPj4+IDgpKSAmIDB4ZmYwMGZmMDApCiAgKQoKICBmb3IgKHZhciBpID0gMDsgaSA8IG0ubGVuZ3RoOyBpICs9IDE2KSB7CiAgICBwcm9jZXNzQmxvY2soSCwgbSwgaSkKICB9CgogIC8vIHN3YXAgZW5kaWFuCiAgZm9yIChpID0gMDsgaSA8IDU7IGkrKykgewogICAgLy8gc2hvcnRjdXQKICAgIHZhciBIX2kgPSBIW2ldCgogICAgLy8gU3dhcAogICAgSFtpXSA9ICgoKEhfaSA8PCA4KSB8IChIX2kgPj4+IDI0KSkgJiAweDAwZmYwMGZmKSB8CiAgICAgICgoKEhfaSA8PCAyNCkgfCAoSF9pID4+PiA4KSkgJiAweGZmMDBmZjAwKQogIH0KCiAgdmFyIGRpZ2VzdGJ5dGVzID0gd29yZHNUb0J5dGVzKEgpCiAgcmV0dXJuIG5ldyBCdWZmZXIoZGlnZXN0Ynl0ZXMpCn0KCm1vZHVsZS5leHBvcnRzID0gcmlwZW1kMTYwCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MH1dLDE1OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3IgUnVudGltZUNhdGFsb2d1ZS5qcyAKLy8gdmVyc2lvbjogMC4xLjAKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5SdW50aW1lQ2F0YWxvZ3VlPWUoKX19KGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIGZ1bmN0aW9uIHQoZSxyLG4pe2Z1bmN0aW9uIGkoYSxzKXtpZighclthXSl7aWYoIWVbYV0pe3ZhciBjPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFzJiZjKXJldHVybiBjKGEsITApO2lmKG8pcmV0dXJuIG8oYSwhMCk7dmFyIHU9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrYSsiJyIpO3Rocm93IHUuY29kZT0iTU9EVUxFX05PVF9GT1VORCIsdX12YXIgbD1yW2FdPXtleHBvcnRzOnt9fTtlW2FdWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKHQpe3ZhciByPWVbYV1bMV1bdF07cmV0dXJuIGkocj9yOnQpfSxsLGwuZXhwb3J0cyx0LGUscixuKX1yZXR1cm4gclthXS5leHBvcnRzfWZvcih2YXIgbz0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxhPTA7YTxuLmxlbmd0aDthKyspaShuW2FdKTtyZXR1cm4gaX0oezE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2NyZWF0ZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIjoxOH1dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoxOX1dLDM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjoyMH1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjIxfV0sNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6MjJ9XSw2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSI6MjN9XSw3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wiOjI0fV0sODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wvaXRlcmF0b3IiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sL2l0ZXJhdG9yIjoyNX1dLDk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi9jbGFzc0NhbGxDaGVjay5qcyIpfSx7Ii4vY2xhc3NDYWxsQ2hlY2suanMiOjEwfV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDExOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vY3JlYXRlQ2xhc3MuanMiKX0seyIuL2NyZWF0ZUNsYXNzLmpzIjoxMn1dLDEyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBpPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5Iiksbz1uKGkpO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLG9bImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjJ9XSwxMzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgaT1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxvPW4oaSksYT1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLHM9bihhKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24gYyhlLHQscil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG49KDAsc1siZGVmYXVsdCJdKShlLHQpO2lmKHZvaWQgMD09PW4pe3ZhciBpPSgwLG9bImRlZmF1bHQiXSkoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDpjKGksdCxyKX1pZigidmFsdWUiaW4gbilyZXR1cm4gbi52YWx1ZTt2YXIgYT1uLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwocil9fSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjozLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjR9XSwxNDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgaT1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxvPW4oaSksYT1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZSIpLHM9bihhKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy90eXBlb2YiKSx1PW4oYyk7clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIisoInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOigwLHVbImRlZmF1bHQiXSkodCkpKTtlLnByb3RvdHlwZT0oMCxzWyJkZWZhdWx0Il0pKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYob1siZGVmYXVsdCJdPygwLG9bImRlZmF1bHQiXSkoZSx0KTplLl9fcHJvdG9fXz10KX19LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjEsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6NSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3R5cGVvZiI6MTd9XSwxNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpfSx7Ii4vaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIjoxNn1dLDE2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3IuX19lc01vZHVsZT0hMCxyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19fSx7fV0sMTc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbC9pdGVyYXRvciIpLG89bihpKSxhPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9zeW1ib2wiKSxzPW4oYSksYz0iZnVuY3Rpb24iPT10eXBlb2Ygc1siZGVmYXVsdCJdJiYic3ltYm9sIj09dHlwZW9mIG9bImRlZmF1bHQiXT9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2Ygc1siZGVmYXVsdCJdJiZlLmNvbnN0cnVjdG9yPT09c1siZGVmYXVsdCJdPyJzeW1ib2wiOnR5cGVvZiBlfTtyWyJkZWZhdWx0Il09ImZ1bmN0aW9uIj09dHlwZW9mIHNbImRlZmF1bHQiXSYmInN5bWJvbCI9PT1jKG9bImRlZmF1bHQiXSk/ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBlPyJ1bmRlZmluZWQiOmMoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2Ygc1siZGVmYXVsdCJdJiZlLmNvbnN0cnVjdG9yPT09c1siZGVmYXVsdCJdPyJzeW1ib2wiOiJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjpjKGUpfX0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sIjo3LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yIjo4fV0sMTg6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuY3JlYXRlIik7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLk9iamVjdDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jcmVhdGUoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzMsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5jcmVhdGUiOjk2fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnR5Iik7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLk9iamVjdDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmRlZmluZVByb3BlcnR5KGUsdCxyKX19LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzMsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOjk3fV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIik7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLk9iamVjdDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzMsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjk4fV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzL19jb3JlIikuT2JqZWN0LmdldFByb3RvdHlwZU9mfSx7Ii4uLy4uL21vZHVsZXMvX2NvcmUiOjMzLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiI6OTl9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvX2NvcmUiKS5PYmplY3Quc2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzMsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIjoxMDB9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvX2NvcmUiKS5Qcm9taXNlfSx7Ii4uL21vZHVsZXMvX2NvcmUiOjMzLCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjoxMDEsIi4uL21vZHVsZXMvZXM2LnByb21pc2UiOjEwMiwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjoxMDMsIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI6MTA1fV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiKSxlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvX2NvcmUiKS5TeW1ib2x9LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzMsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjEwMSwiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIjoxMDR9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uLy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzL193a3MiKSgiaXRlcmF0b3IiKX0seyIuLi8uLi9tb2R1bGVzL193a3MiOjkzLCIuLi8uLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjEwMywiLi4vLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjoxMDV9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIGZ1bmN0aW9uISIpO3JldHVybiBlfX0se31dLDI3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKCl7fX0se31dLDI4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4pe2lmKCEoZSBpbnN0YW5jZW9mIHQpfHx2b2lkIDAhPT1uJiZuIGluIGUpdGhyb3cgVHlwZUVycm9yKHIrIjogaW5jb3JyZWN0IGludm9jYXRpb24hIik7cmV0dXJuIGV9fSx7fV0sMjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuL19pcy1vYmplY3QiOjUyfV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL190by1pb2JqZWN0IiksaT1lKCIuL190by1sZW5ndGgiKSxvPWUoIi4vX3RvLWluZGV4Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsYSl7dmFyIHMsYz1uKHQpLHU9aShjLmxlbmd0aCksbD1vKGEsdSk7aWYoZSYmciE9cil7Zm9yKDt1Pmw7KWlmKHM9Y1tsKytdLHMhPXMpcmV0dXJuITB9ZWxzZSBmb3IoO3U+bDtsKyspaWYoKGV8fGwgaW4gYykmJmNbbF09PT1yKXJldHVybiBlfHxsO3JldHVybiFlJiYtMX19fSx7Ii4vX3RvLWluZGV4Ijo4NiwiLi9fdG8taW9iamVjdCI6ODgsIi4vX3RvLWxlbmd0aCI6ODl9XSwzMTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2NvZiIpLGk9ZSgiLi9fd2tzIikoInRvU3RyaW5nVGFnIiksbz0iQXJndW1lbnRzIj09bihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpLGE9ZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIGVbdF19Y2F0Y2gocil7fX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPWEodD1PYmplY3QoZSksaSkpP3I6bz9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vX2NvZiI6MzIsIi4vX3drcyI6OTN9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbi5jYWxsKGUpLnNsaWNlKDgsLTEpfX0se31dLDMzOltmdW5jdGlvbihlLHQscil7dmFyIG49dC5leHBvcnRzPXt2ZXJzaW9uOiIyLjIuMSJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPW4pfSx7fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLGkpe3JldHVybiBlLmNhbGwodCxyLG4saSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vX2EtZnVuY3Rpb24iOjI2fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vX2ZhaWxzIikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSx7Ii4vX2ZhaWxzIjo0MX1dLDM3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9faXMtb2JqZWN0IiksaT1lKCIuL19nbG9iYWwiKS5kb2N1bWVudCxvPW4oaSkmJm4oaS5jcmVhdGVFbGVtZW50KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG8/aS5jcmVhdGVFbGVtZW50KGUpOnt9fX0seyIuL19nbG9iYWwiOjQzLCIuL19pcy1vYmplY3QiOjUyfV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZiIuc3BsaXQoIiwiKX0se31dLDM5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fb2JqZWN0LWtleXMiKSxpPWUoIi4vX29iamVjdC1nb3BzIiksbz1lKCIuL19vYmplY3QtcGllIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4oZSkscj1pLmY7aWYocilmb3IodmFyIGEscz1yKGUpLGM9by5mLHU9MDtzLmxlbmd0aD51OyljLmNhbGwoZSxhPXNbdSsrXSkmJnQucHVzaChhKTtyZXR1cm4gdH19LHsiLi9fb2JqZWN0LWdvcHMiOjY5LCIuL19vYmplY3Qta2V5cyI6NzIsIi4vX29iamVjdC1waWUiOjczfV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19nbG9iYWwiKSxpPWUoIi4vX2NvcmUiKSxvPWUoIi4vX2N0eCIpLGE9ZSgiLi9faGlkZSIpLHM9InByb3RvdHlwZSIsYz1mdW5jdGlvbihlLHQscil7dmFyIHUsbCxmLHA9ZSZjLkYsaD1lJmMuRyxkPWUmYy5TLHk9ZSZjLlAsXz1lJmMuQixtPWUmYy5XLGI9aD9pOmlbdF18fChpW3RdPXt9KSx2PWJbc10sZz1oP246ZD9uW3RdOihuW3RdfHx7fSlbc107aCYmKHI9dCk7Zm9yKHUgaW4gcilsPSFwJiZnJiZ2b2lkIDAhPT1nW3VdLGwmJnUgaW4gYnx8KGY9bD9nW3VdOnJbdV0sYlt1XT1oJiYiZnVuY3Rpb24iIT10eXBlb2YgZ1t1XT9yW3VdOl8mJmw/byhmLG4pOm0mJmdbdV09PWY/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCxyLG4pe2lmKHRoaXMgaW5zdGFuY2VvZiBlKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgZTtjYXNlIDE6cmV0dXJuIG5ldyBlKHQpO2Nhc2UgMjpyZXR1cm4gbmV3IGUodCxyKX1yZXR1cm4gbmV3IGUodCxyLG4pfXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIHRbc109ZVtzXSx0fShmKTp5JiYiZnVuY3Rpb24iPT10eXBlb2YgZj9vKEZ1bmN0aW9uLmNhbGwsZik6Zix5JiYoKGIudmlydHVhbHx8KGIudmlydHVhbD17fSkpW3VdPWYsZSZjLlImJnYmJiF2W3VdJiZhKHYsdSxmKSkpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLGMuVT02NCxjLlI9MTI4LHQuZXhwb3J0cz1jfSx7Ii4vX2NvcmUiOjMzLCIuL19jdHgiOjM0LCIuL19nbG9iYWwiOjQzLCIuL19oaWRlIjo0NX1dLDQxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaCh0KXtyZXR1cm4hMH19fSx7fV0sNDI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19jdHgiKSxpPWUoIi4vX2l0ZXItY2FsbCIpLG89ZSgiLi9faXMtYXJyYXktaXRlciIpLGE9ZSgiLi9fYW4tb2JqZWN0Iikscz1lKCIuL190by1sZW5ndGgiKSxjPWUoIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLHUsbCl7dmFyIGYscCxoLGQ9bD9mdW5jdGlvbigpe3JldHVybiBlfTpjKGUpLHk9bihyLHUsdD8yOjEpLF89MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihvKGQpKWZvcihmPXMoZS5sZW5ndGgpO2Y+XztfKyspdD95KGEocD1lW19dKVswXSxwWzFdKTp5KGVbX10pO2Vsc2UgZm9yKGg9ZC5jYWxsKGUpOyEocD1oLm5leHQoKSkuZG9uZTspaShoLHkscC52YWx1ZSx0KX19LHsiLi9fYW4tb2JqZWN0IjoyOSwiLi9fY3R4IjozNCwiLi9faXMtYXJyYXktaXRlciI6NTAsIi4vX2l0ZXItY2FsbCI6NTMsIi4vX3RvLWxlbmd0aCI6ODksIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIjo5NH1dLDQzOltmdW5jdGlvbihlLHQscil7dmFyIG49dC5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPW4pfSx7fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jYWxsKGUsdCl9fSx7fV0sNDU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19vYmplY3QtZHAiKSxpPWUoIi4vX3Byb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi9fZGVzY3JpcHRvcnMiKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsaSgxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LHsiLi9fZGVzY3JpcHRvcnMiOjM2LCIuL19vYmplY3QtZHAiOjY0LCIuL19wcm9wZXJ0eS1kZXNjIjo3NX1dLDQ2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vX2dsb2JhbCIpLmRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LHsiLi9fZ2xvYmFsIjo0M31dLDQ3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuL19kZXNjcmlwdG9ycyIpJiYhZSgiLi9fZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSgiLi9fZG9tLWNyZWF0ZSIpKCJkaXYiKSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuL19kZXNjcmlwdG9ycyI6MzYsIi4vX2RvbS1jcmVhdGUiOjM3LCIuL19mYWlscyI6NDF9XSw0ODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSx7fV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19jb2YiKTt0LmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiJTdHJpbmciPT1uKGUpP2Uuc3BsaXQoIiIpOk9iamVjdChlKX19LHsiLi9fY29mIjozMn1dLDUwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9faXRlcmF0b3JzIiksaT1lKCIuL193a3MiKSgiaXRlcmF0b3IiKSxvPUFycmF5LnByb3RvdHlwZTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihuLkFycmF5PT09ZXx8b1tpXT09PWUpfX0seyIuL19pdGVyYXRvcnMiOjU4LCIuL193a3MiOjkzfV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19jb2YiKTt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIkFycmF5Ij09bihlKX19LHsiLi9fY29mIjozMn1dLDUyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2FuLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixpKXt0cnl7cmV0dXJuIGk/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2gobyl7dmFyIGE9ZVsicmV0dXJuIl07dGhyb3cgdm9pZCAwIT09YSYmbihhLmNhbGwoZSkpLG99fX0seyIuL19hbi1vYmplY3QiOjI5fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi9fb2JqZWN0LWNyZWF0ZSIpLGk9ZSgiLi9fcHJvcGVydHktZGVzYyIpLG89ZSgiLi9fc2V0LXRvLXN0cmluZy10YWciKSxhPXt9O2UoIi4vX2hpZGUiKShhLGUoIi4vX3drcyIpKCJpdGVyYXRvciIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UucHJvdG90eXBlPW4oYSx7bmV4dDppKDEscil9KSxvKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vX2hpZGUiOjQ1LCIuL19vYmplY3QtY3JlYXRlIjo2MywiLi9fcHJvcGVydHktZGVzYyI6NzUsIi4vX3NldC10by1zdHJpbmctdGFnIjo4MCwiLi9fd2tzIjo5M31dLDU1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vX2xpYnJhcnkiKSxpPWUoIi4vX2V4cG9ydCIpLG89ZSgiLi9fcmVkZWZpbmUiKSxhPWUoIi4vX2hpZGUiKSxzPWUoIi4vX2hhcyIpLGM9ZSgiLi9faXRlcmF0b3JzIiksdT1lKCIuL19pdGVyLWNyZWF0ZSIpLGw9ZSgiLi9fc2V0LXRvLXN0cmluZy10YWciKSxmPWUoIi4vX29iamVjdC1ncG8iKSxwPWUoIi4vX3drcyIpKCJpdGVyYXRvciIpLGg9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSksZD0iQEBpdGVyYXRvciIseT0ia2V5cyIsXz0idmFsdWVzIixtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixiLHYsZyxqKXt1KHIsdCxiKTt2YXIgTyxFLFAsaz1mdW5jdGlvbihlKXtpZighaCYmZSBpbiB4KXJldHVybiB4W2VdO3N3aXRjaChlKXtjYXNlIHk6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgXzpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxTPXQrIiBJdGVyYXRvciIsdz12PT1fLFI9ITEseD1lLnByb3RvdHlwZSxNPXhbcF18fHhbZF18fHYmJnhbdl0sQT1NfHxrKHYpLFQ9dj93P2soImVudHJpZXMiKTpBOnZvaWQgMCxOPSJBcnJheSI9PXQ/eC5lbnRyaWVzfHxNOk07aWYoTiYmKFA9ZihOLmNhbGwobmV3IGUpKSxQIT09T2JqZWN0LnByb3RvdHlwZSYmKGwoUCxTLCEwKSxufHxzKFAscCl8fGEoUCxwLG0pKSksdyYmTSYmTS5uYW1lIT09XyYmKFI9ITAsQT1mdW5jdGlvbigpe3JldHVybiBNLmNhbGwodGhpcyl9KSxuJiYhanx8IWgmJiFSJiZ4W3BdfHxhKHgscCxBKSxjW3RdPUEsY1tTXT1tLHYpaWYoTz17dmFsdWVzOnc/QTprKF8pLGtleXM6Zz9BOmsoeSksZW50cmllczpUfSxqKWZvcihFIGluIE8pRSBpbiB4fHxvKHgsRSxPW0VdKTtlbHNlIGkoaS5QK2kuRiooaHx8UiksdCxPKTtyZXR1cm4gT319LHsiLi9fZXhwb3J0Ijo0MCwiLi9faGFzIjo0NCwiLi9faGlkZSI6NDUsIi4vX2l0ZXItY3JlYXRlIjo1NCwiLi9faXRlcmF0b3JzIjo1OCwiLi9fbGlicmFyeSI6NjAsIi4vX29iamVjdC1ncG8iOjcwLCIuL19yZWRlZmluZSI6NzcsIi4vX3NldC10by1zdHJpbmctdGFnIjo4MCwiLi9fd2tzIjo5M31dLDU2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fd2tzIikoIml0ZXJhdG9yIiksaT0hMTt0cnl7dmFyIG89WzddW25dKCk7b1sicmV0dXJuIl09ZnVuY3Rpb24oKXtpPSEwfSxBcnJheS5mcm9tKG8sZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2goYSl7fXQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhaSlyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIG89WzddLGE9b1tuXSgpO2EubmV4dD1mdW5jdGlvbigpe3I9ITB9LG9bbl09ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZShvKX1jYXRjaChzKXt9cmV0dXJuIHJ9fSx7Ii4vX3drcyI6OTN9XSw1NzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTp0LGRvbmU6ISFlfX19LHt9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17fX0se31dLDU5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fb2JqZWN0LWtleXMiKSxpPWUoIi4vX3RvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsbz1pKGUpLGE9bihvKSxzPWEubGVuZ3RoLGM9MDtzPmM7KWlmKG9bcj1hW2MrK11dPT09dClyZXR1cm4gcn19LHsiLi9fb2JqZWN0LWtleXMiOjcyLCIuL190by1pb2JqZWN0Ijo4OH1dLDYwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSEwfSx7fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL191aWQiKSgibWV0YSIpLGk9ZSgiLi9faXMtb2JqZWN0Iiksbz1lKCIuL19oYXMiKSxhPWUoIi4vX29iamVjdC1kcCIpLmYscz0wLGM9T2JqZWN0LmlzRXh0ZW5zaWJsZXx8ZnVuY3Rpb24oKXtyZXR1cm4hMH0sdT0hZSgiLi9fZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiBjKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpfSksbD1mdW5jdGlvbihlKXthKGUsbix7dmFsdWU6e2k6Ik8iKyArK3Msdzp7fX19KX0sZj1mdW5jdGlvbihlLHQpe2lmKCFpKGUpKXJldHVybiJzeW1ib2wiPT10eXBlb2YgZT9lOigic3RyaW5nIj09dHlwZW9mIGU/IlMiOiJQIikrZTtpZighbyhlLG4pKXtpZighYyhlKSlyZXR1cm4iRiI7aWYoIXQpcmV0dXJuIkUiO2woZSl9cmV0dXJuIGVbbl0uaX0scD1mdW5jdGlvbihlLHQpe2lmKCFvKGUsbikpe2lmKCFjKGUpKXJldHVybiEwO2lmKCF0KXJldHVybiExO2woZSl9cmV0dXJuIGVbbl0ud30saD1mdW5jdGlvbihlKXtyZXR1cm4gdSYmZC5ORUVEJiZjKGUpJiYhbyhlLG4pJiZsKGUpLGV9LGQ9dC5leHBvcnRzPXtLRVk6bixORUVEOiExLGZhc3RLZXk6ZixnZXRXZWFrOnAsb25GcmVlemU6aH19LHsiLi9fZmFpbHMiOjQxLCIuL19oYXMiOjQ0LCIuL19pcy1vYmplY3QiOjUyLCIuL19vYmplY3QtZHAiOjY0LCIuL191aWQiOjkyfV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixpLG8sYT1lKCIuL19nbG9iYWwiKSxzPWUoIi4vX3Rhc2siKS5zZXQsYz1hLk11dGF0aW9uT2JzZXJ2ZXJ8fGEuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PWEucHJvY2VzcyxsPWEuUHJvbWlzZSxmPSJwcm9jZXNzIj09ZSgiLi9fY29mIikodSkscD1mdW5jdGlvbigpe3ZhciBlLHQ7Zm9yKGYmJihlPXUuZG9tYWluKSYmZS5leGl0KCk7bjspdD1uLmZuLHQoKSxuPW4ubmV4dDtpPXZvaWQgMCxlJiZlLmVudGVyKCl9O2lmKGYpbz1mdW5jdGlvbigpe3UubmV4dFRpY2socCl9O2Vsc2UgaWYoYyl7dmFyIGg9ITAsZD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGMocCkub2JzZXJ2ZShkLHtjaGFyYWN0ZXJEYXRhOiEwfSksbz1mdW5jdGlvbigpe2QuZGF0YT1oPSFofX1lbHNlIG89bCYmbC5yZXNvbHZlP2Z1bmN0aW9uKCl7bC5yZXNvbHZlKCkudGhlbihwKX06ZnVuY3Rpb24oKXtzLmNhbGwoYSxwKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwfTtpJiYoaS5uZXh0PXQpLG58fChuPXQsbygpKSxpPXR9fSx7Ii4vX2NvZiI6MzIsIi4vX2dsb2JhbCI6NDMsIi4vX3Rhc2siOjg1fV0sNjM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19hbi1vYmplY3QiKSxpPWUoIi4vX29iamVjdC1kcHMiKSxvPWUoIi4vX2VudW0tYnVnLWtleXMiKSxhPWUoIi4vX3NoYXJlZC1rZXkiKSgiSUVfUFJPVE8iKSxzPWZ1bmN0aW9uKCl7fSxjPSJwcm90b3R5cGUiLHU9ZnVuY3Rpb24oKXt2YXIgdCxyPWUoIi4vX2RvbS1jcmVhdGUiKSgiaWZyYW1lIiksbj1vLmxlbmd0aCxpPSI+Ijtmb3Ioci5zdHlsZS5kaXNwbGF5PSJub25lIixlKCIuL19odG1sIikuYXBwZW5kQ2hpbGQociksci5zcmM9ImphdmFzY3JpcHQ6Iix0PXIuY29udGVudFdpbmRvdy5kb2N1bWVudCx0Lm9wZW4oKSx0LndyaXRlKCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PC9zY3JpcHQiK2kpLHQuY2xvc2UoKSx1PXQuRjtuLS07KWRlbGV0ZSB1W2NdW29bbl1dO3JldHVybiB1KCl9O3QuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbihlLHQpe3ZhciByO3JldHVybiBudWxsIT09ZT8oc1tjXT1uKGUpLHI9bmV3IHMsc1tjXT1udWxsLHJbYV09ZSk6cj11KCksdm9pZCAwPT09dD9yOmkocix0KX19LHsiLi9fYW4tb2JqZWN0IjoyOSwiLi9fZG9tLWNyZWF0ZSI6MzcsIi4vX2VudW0tYnVnLWtleXMiOjM4LCIuL19odG1sIjo0NiwiLi9fb2JqZWN0LWRwcyI6NjUsIi4vX3NoYXJlZC1rZXkiOjgxfV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19hbi1vYmplY3QiKSxpPWUoIi4vX2llOC1kb20tZGVmaW5lIiksbz1lKCIuL190by1wcmltaXRpdmUiKSxhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTtyLmY9ZSgiLi9fZGVzY3JpcHRvcnMiKT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdD1vKHQsITApLG4ociksaSl0cnl7cmV0dXJuIGEoZSx0LHIpfWNhdGNoKHMpe31pZigiZ2V0ImluIHJ8fCJzZXQiaW4gcil0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkISIpO3JldHVybiJ2YWx1ZSJpbiByJiYoZVt0XT1yLnZhbHVlKSxlfX0seyIuL19hbi1vYmplY3QiOjI5LCIuL19kZXNjcmlwdG9ycyI6MzYsIi4vX2llOC1kb20tZGVmaW5lIjo0NywiLi9fdG8tcHJpbWl0aXZlIjo5MX1dLDY1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fb2JqZWN0LWRwIiksaT1lKCIuL19hbi1vYmplY3QiKSxvPWUoIi4vX29iamVjdC1rZXlzIik7dC5leHBvcnRzPWUoIi4vX2Rlc2NyaXB0b3JzIik/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24oZSx0KXtpKGUpO2Zvcih2YXIgcixhPW8odCkscz1hLmxlbmd0aCxjPTA7cz5jOyluLmYoZSxyPWFbYysrXSx0W3JdKTtyZXR1cm4gZX19LHsiLi9fYW4tb2JqZWN0IjoyOSwiLi9fZGVzY3JpcHRvcnMiOjM2LCIuL19vYmplY3QtZHAiOjY0LCIuL19vYmplY3Qta2V5cyI6NzJ9XSw2NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX29iamVjdC1waWUiKSxpPWUoIi4vX3Byb3BlcnR5LWRlc2MiKSxvPWUoIi4vX3RvLWlvYmplY3QiKSxhPWUoIi4vX3RvLXByaW1pdGl2ZSIpLHM9ZSgiLi9faGFzIiksYz1lKCIuL19pZTgtZG9tLWRlZmluZSIpLHU9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtyLmY9ZSgiLi9fZGVzY3JpcHRvcnMiKT91OmZ1bmN0aW9uKGUsdCl7aWYoZT1vKGUpLHQ9YSh0LCEwKSxjKXRyeXtyZXR1cm4gdShlLHQpfWNhdGNoKHIpe31yZXR1cm4gcyhlLHQpP2koIW4uZi5jYWxsKGUsdCksZVt0XSk6dm9pZCAwfX0seyIuL19kZXNjcmlwdG9ycyI6MzYsIi4vX2hhcyI6NDQsIi4vX2llOC1kb20tZGVmaW5lIjo0NywiLi9fb2JqZWN0LXBpZSI6NzMsIi4vX3Byb3BlcnR5LWRlc2MiOjc1LCIuL190by1pb2JqZWN0Ijo4OCwiLi9fdG8tcHJpbWl0aXZlIjo5MX1dLDY3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fdG8taW9iamVjdCIpLGk9ZSgiLi9fb2JqZWN0LWdvcG4iKS5mLG89e30udG9TdHJpbmcsYT0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBpKGUpfWNhdGNoKHQpe3JldHVybiBhLnNsaWNlKCl9fTt0LmV4cG9ydHMuZj1mdW5jdGlvbihlKXtyZXR1cm4gYSYmIltvYmplY3QgV2luZG93XSI9PW8uY2FsbChlKT9zKGUpOmkobihlKSl9fSx7Ii4vX29iamVjdC1nb3BuIjo2OCwiLi9fdG8taW9iamVjdCI6ODh9XSw2ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX29iamVjdC1rZXlzLWludGVybmFsIiksaT1lKCIuL19lbnVtLWJ1Zy1rZXlzIikuY29uY2F0KCJsZW5ndGgiLCJwcm90b3R5cGUiKTtyLmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKGUpe3JldHVybiBuKGUsaSl9fSx7Ii4vX2VudW0tYnVnLWtleXMiOjM4LCIuL19vYmplY3Qta2V5cy1pbnRlcm5hbCI6NzF9XSw2OTpbZnVuY3Rpb24oZSx0LHIpe3IuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSx7fV0sNzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19oYXMiKSxpPWUoIi4vX3RvLW9iamVjdCIpLG89ZSgiLi9fc2hhcmVkLWtleSIpKCJJRV9QUk9UTyIpLGE9T2JqZWN0LnByb3RvdHlwZTt0LmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlKXtyZXR1cm4gZT1pKGUpLG4oZSxvKT9lW29dOiJmdW5jdGlvbiI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yJiZlIGluc3RhbmNlb2YgZS5jb25zdHJ1Y3Rvcj9lLmNvbnN0cnVjdG9yLnByb3RvdHlwZTplIGluc3RhbmNlb2YgT2JqZWN0P2E6bnVsbH19LHsiLi9faGFzIjo0NCwiLi9fc2hhcmVkLWtleSI6ODEsIi4vX3RvLW9iamVjdCI6OTB9XSw3MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2hhcyIpLGk9ZSgiLi9fdG8taW9iamVjdCIpLG89ZSgiLi9fYXJyYXktaW5jbHVkZXMiKSghMSksYT1lKCIuL19zaGFyZWQta2V5IikoIklFX1BST1RPIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIscz1pKGUpLGM9MCx1PVtdO2ZvcihyIGluIHMpciE9YSYmbihzLHIpJiZ1LnB1c2gocik7Zm9yKDt0Lmxlbmd0aD5jOyluKHMscj10W2MrK10pJiYofm8odSxyKXx8dS5wdXNoKHIpKTtyZXR1cm4gdX19LHsiLi9fYXJyYXktaW5jbHVkZXMiOjMwLCIuL19oYXMiOjQ0LCIuL19zaGFyZWQta2V5Ijo4MSwiLi9fdG8taW9iamVjdCI6ODh9XSw3MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX29iamVjdC1rZXlzLWludGVybmFsIiksaT1lKCIuL19lbnVtLWJ1Zy1rZXlzIik7dC5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbihlKXtyZXR1cm4gbihlLGkpfX0seyIuL19lbnVtLWJ1Zy1rZXlzIjozOCwiLi9fb2JqZWN0LWtleXMtaW50ZXJuYWwiOjcxfV0sNzM6W2Z1bmN0aW9uKGUsdCxyKXtyLmY9e30ucHJvcGVydHlJc0VudW1lcmFibGV9LHt9XSw3NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2V4cG9ydCIpLGk9ZSgiLi9fY29yZSIpLG89ZSgiLi9fZmFpbHMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oaS5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLGE9e307YVtlXT10KHIpLG4obi5TK24uRipvKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLGEpfX0seyIuL19jb3JlIjozMywiLi9fZXhwb3J0Ijo0MCwiLi9fZmFpbHMiOjQxfV0sNzU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSx7fV0sNzY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19oaWRlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGkgaW4gdClyJiZlW2ldP2VbaV09dFtpXTpuKGUsaSx0W2ldKTtyZXR1cm4gZX19LHsiLi9faGlkZSI6NDV9XSw3NzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuL19oaWRlIil9LHsiLi9faGlkZSI6NDV9XSw3ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2lzLW9iamVjdCIpLGk9ZSgiLi9fYW4tb2JqZWN0Iiksbz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW4odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbil7dHJ5e249ZSgiLi9fY3R4IikoRnVuY3Rpb24uY2FsbCxlKCIuL19vYmplY3QtZ29wZCIpLmYoT2JqZWN0LnByb3RvdHlwZSwiX19wcm90b19fIikuc2V0LDIpLG4odCxbXSkscj0hKHQgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goaSl7cj0hMH1yZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gbyhlLHQpLHI/ZS5fX3Byb3RvX189dDpuKGUsdCksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOm99fSx7Ii4vX2FuLW9iamVjdCI6MjksIi4vX2N0eCI6MzQsIi4vX2lzLW9iamVjdCI6NTIsIi4vX29iamVjdC1nb3BkIjo2Nn1dLDc5OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vX2dsb2JhbCIpLGk9ZSgiLi9fY29yZSIpLG89ZSgiLi9fb2JqZWN0LWRwIiksYT1lKCIuL19kZXNjcmlwdG9ycyIpLHM9ZSgiLi9fd2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIGlbZV0/aVtlXTpuW2VdO2EmJnQmJiF0W3NdJiZvLmYodCxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSx7Ii4vX2NvcmUiOjMzLCIuL19kZXNjcmlwdG9ycyI6MzYsIi4vX2dsb2JhbCI6NDMsIi4vX29iamVjdC1kcCI6NjQsIi4vX3drcyI6OTN9XSw4MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX29iamVjdC1kcCIpLmYsaT1lKCIuL19oYXMiKSxvPWUoIi4vX3drcyIpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIWkoZT1yP2U6ZS5wcm90b3R5cGUsbykmJm4oZSxvLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0seyIuL19oYXMiOjQ0LCIuL19vYmplY3QtZHAiOjY0LCIuL193a3MiOjkzfV0sODE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19zaGFyZWQiKSgia2V5cyIpLGk9ZSgiLi9fdWlkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1pKGUpKX19LHsiLi9fc2hhcmVkIjo4MiwiLi9fdWlkIjo5Mn1dLDgyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fZ2xvYmFsIiksaT0iX19jb3JlLWpzX3NoYXJlZF9fIixvPW5baV18fChuW2ldPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG9bZV18fChvW2VdPXt9KX19LHsiLi9fZ2xvYmFsIjo0M31dLDgzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fYW4tb2JqZWN0IiksaT1lKCIuL19hLWZ1bmN0aW9uIiksbz1lKCIuL193a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLGE9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09YXx8dm9pZCAwPT0ocj1uKGEpW29dKT90Omkocil9fSx7Ii4vX2EtZnVuY3Rpb24iOjI2LCIuL19hbi1vYmplY3QiOjI5LCIuL193a3MiOjkzfV0sODQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL190by1pbnRlZ2VyIiksaT1lKCIuL19kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBvLGEscz1TdHJpbmcoaSh0KSksYz1uKHIpLHU9cy5sZW5ndGg7cmV0dXJuIDA+Y3x8Yz49dT9lPyIiOnZvaWQgMDoobz1zLmNoYXJDb2RlQXQoYyksNTUyOTY+b3x8bz41NjMxOXx8YysxPT09dXx8KGE9cy5jaGFyQ29kZUF0KGMrMSkpPDU2MzIwfHxhPjU3MzQzP2U/cy5jaGFyQXQoYyk6bzplP3Muc2xpY2UoYyxjKzIpOihvLTU1Mjk2PDwxMCkrKGEtNTYzMjApKzY1NTM2KX19fSx7Ii4vX2RlZmluZWQiOjM1LCIuL190by1pbnRlZ2VyIjo4N31dLDg1OltmdW5jdGlvbihlLHQscil7dmFyIG4saSxvLGE9ZSgiLi9fY3R4Iikscz1lKCIuL19pbnZva2UiKSxjPWUoIi4vX2h0bWwiKSx1PWUoIi4vX2RvbS1jcmVhdGUiKSxsPWUoIi4vX2dsb2JhbCIpLGY9bC5wcm9jZXNzLHA9bC5zZXRJbW1lZGlhdGUsaD1sLmNsZWFySW1tZWRpYXRlLGQ9bC5NZXNzYWdlQ2hhbm5lbCx5PTAsXz17fSxtPSJvbnJlYWR5c3RhdGVjaGFuZ2UiLGI9ZnVuY3Rpb24oKXt2YXIgZT0rdGhpcztpZihfLmhhc093blByb3BlcnR5KGUpKXt2YXIgdD1fW2VdO2RlbGV0ZSBfW2VdLHQoKX19LHY9ZnVuY3Rpb24oZSl7Yi5jYWxsKGUuZGF0YSl9O3AmJmh8fChwPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7YXJndW1lbnRzLmxlbmd0aD5yOyl0LnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiBfWysreV09ZnVuY3Rpb24oKXtzKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4oeSkseX0saD1mdW5jdGlvbihlKXtkZWxldGUgX1tlXX0sInByb2Nlc3MiPT1lKCIuL19jb2YiKShmKT9uPWZ1bmN0aW9uKGUpe2YubmV4dFRpY2soYShiLGUsMSkpfTpkPyhpPW5ldyBkLG89aS5wb3J0MixpLnBvcnQxLm9ubWVzc2FnZT12LG49YShvLnBvc3RNZXNzYWdlLG8sMSkpOmwuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhbC5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2wucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxsLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHYsITEpKTpuPW0gaW4gdSgic2NyaXB0Iik/ZnVuY3Rpb24oZSl7Yy5hcHBlbmRDaGlsZCh1KCJzY3JpcHQiKSlbbV09ZnVuY3Rpb24oKXtjLnJlbW92ZUNoaWxkKHRoaXMpLGIuY2FsbChlKX19OmZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoYShiLGUsMSksMCl9KSx0LmV4cG9ydHM9e3NldDpwLGNsZWFyOmh9fSx7Ii4vX2NvZiI6MzIsIi4vX2N0eCI6MzQsIi4vX2RvbS1jcmVhdGUiOjM3LCIuL19nbG9iYWwiOjQzLCIuL19odG1sIjo0NiwiLi9faW52b2tlIjo0OH1dLDg2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fdG8taW50ZWdlciIpLGk9TWF0aC5tYXgsbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1uKGUpLDA+ZT9pKGUrdCwwKTpvKGUsdCl9fSx7Ii4vX3RvLWludGVnZXIiOjg3fV0sODc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsaT1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP2k6bikoZSl9fSx7fV0sODg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19pb2JqZWN0IiksaT1lKCIuL19kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKGkoZSkpfX0seyIuL19kZWZpbmVkIjozNSwiLi9faW9iamVjdCI6NDl9XSw4OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX3RvLWludGVnZXIiKSxpPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZT4wP2kobihlKSw5MDA3MTk5MjU0NzQwOTkxKTowfX0seyIuL190by1pbnRlZ2VyIjo4N31dLDkwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0seyIuL19kZWZpbmVkIjozNX1dLDkxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9faXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIW4oZSkpcmV0dXJuIGU7dmFyIHIsaTtpZih0JiYiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnRvU3RyaW5nKSYmIW4oaT1yLmNhbGwoZSkpKXJldHVybiBpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZihyPWUudmFsdWVPZikmJiFuKGk9ci5jYWxsKGUpKSlyZXR1cm4gaTtpZighdCYmImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKGk9ci5jYWxsKGUpKSlyZXR1cm4gaTt0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZSIpfX0seyIuL19pcy1vYmplY3QiOjUyfV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLGk9TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK2kpLnRvU3RyaW5nKDM2KSl9fSx7fV0sOTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19zaGFyZWQiKSgid2tzIiksaT1lKCIuL191aWQiKSxvPWUoIi4vX2dsb2JhbCIpLlN5bWJvbCxhPSJmdW5jdGlvbiI9PXR5cGVvZiBvO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09YSYmb1tlXXx8KGE/bzppKSgiU3ltYm9sLiIrZSkpfX0seyIuL19nbG9iYWwiOjQzLCIuL19zaGFyZWQiOjgyLCIuL191aWQiOjkyfV0sOTQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19jbGFzc29mIiksaT1lKCIuL193a3MiKSgiaXRlcmF0b3IiKSxvPWUoIi4vX2l0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuL19jb3JlIikuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZT9lW2ldfHxlWyJAQGl0ZXJhdG9yIl18fG9bbihlKV06dm9pZCAwfX0seyIuL19jbGFzc29mIjozMSwiLi9fY29yZSI6MzMsIi4vX2l0ZXJhdG9ycyI6NTgsIi4vX3drcyI6OTN9XSw5NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuL19hZGQtdG8tdW5zY29wYWJsZXMiKSxpPWUoIi4vX2l0ZXItc3RlcCIpLG89ZSgiLi9faXRlcmF0b3JzIiksYT1lKCIuL190by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vX2l0ZXItZGVmaW5lIikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9YShlKSx0aGlzLl9pPTAsdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsaSgxKSk6ImtleXMiPT10P2koMCxyKToidmFsdWVzIj09dD9pKDAsZVtyXSk6aSgwLFtyLGVbcl1dKX0sInZhbHVlcyIpLG8uQXJndW1lbnRzPW8uQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0seyIuL19hZGQtdG8tdW5zY29wYWJsZXMiOjI3LCIuL19pdGVyLWRlZmluZSI6NTUsIi4vX2l0ZXItc3RlcCI6NTcsIi4vX2l0ZXJhdG9ycyI6NTgsIi4vX3RvLWlvYmplY3QiOjg4fV0sOTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19leHBvcnQiKTtuKG4uUywiT2JqZWN0Iix7Y3JlYXRlOmUoIi4vX29iamVjdC1jcmVhdGUiKX0pfSx7Ii4vX2V4cG9ydCI6NDAsIi4vX29iamVjdC1jcmVhdGUiOjYzfV0sOTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19leHBvcnQiKTtuKG4uUytuLkYqIWUoIi4vX2Rlc2NyaXB0b3JzIiksIk9iamVjdCIse2RlZmluZVByb3BlcnR5OmUoIi4vX29iamVjdC1kcCIpLmZ9KX0seyIuL19kZXNjcmlwdG9ycyI6MzYsIi4vX2V4cG9ydCI6NDAsIi4vX29iamVjdC1kcCI6NjR9XSw5ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX3RvLWlvYmplY3QiKSxpPWUoIi4vX29iamVjdC1nb3BkIikuZjtlKCIuL19vYmplY3Qtc2FwIikoImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gaShuKGUpLHQpfX0pfSx7Ii4vX29iamVjdC1nb3BkIjo2NiwiLi9fb2JqZWN0LXNhcCI6NzQsIi4vX3RvLWlvYmplY3QiOjg4fV0sOTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL190by1vYmplY3QiKSxpPWUoIi4vX29iamVjdC1ncG8iKTtlKCIuL19vYmplY3Qtc2FwIikoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gaShuKGUpKX19KX0seyIuL19vYmplY3QtZ3BvIjo3MCwiLi9fb2JqZWN0LXNhcCI6NzQsIi4vX3RvLW9iamVjdCI6OTB9XSwxMDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19leHBvcnQiKTtuKG4uUywiT2JqZWN0Iix7c2V0UHJvdG90eXBlT2Y6ZSgiLi9fc2V0LXByb3RvIikuc2V0fSl9LHsiLi9fZXhwb3J0Ijo0MCwiLi9fc2V0LXByb3RvIjo3OH1dLDEwMTpbZnVuY3Rpb24oZSx0LHIpe30se31dLDEwMjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixpLG8sYT1lKCIuL19saWJyYXJ5Iikscz1lKCIuL19nbG9iYWwiKSxjPWUoIi4vX2N0eCIpLHU9ZSgiLi9fY2xhc3NvZiIpLGw9ZSgiLi9fZXhwb3J0IiksZj1lKCIuL19pcy1vYmplY3QiKSxwPShlKCIuL19hbi1vYmplY3QiKSxlKCIuL19hLWZ1bmN0aW9uIikpLGg9ZSgiLi9fYW4taW5zdGFuY2UiKSxkPWUoIi4vX2Zvci1vZiIpLHk9KGUoIi4vX3NldC1wcm90byIpLnNldCxlKCIuL19zcGVjaWVzLWNvbnN0cnVjdG9yIikpLF89ZSgiLi9fdGFzayIpLnNldCxtPWUoIi4vX21pY3JvdGFzayIpLGI9IlByb21pc2UiLHY9cy5UeXBlRXJyb3IsZz1zLnByb2Nlc3Msaj1zW2JdLGc9cy5wcm9jZXNzLE89InByb2Nlc3MiPT11KGcpLEU9ZnVuY3Rpb24oKXt9LFA9ISFmdW5jdGlvbigpe3RyeXt2YXIgdD1qLnJlc29sdmUoMSkscj0odC5jb25zdHJ1Y3Rvcj17fSlbZSgiLi9fd2tzIikoInNwZWNpZXMiKV09ZnVuY3Rpb24oZSl7ZShFLEUpfTtyZXR1cm4oT3x8ImZ1bmN0aW9uIj09dHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCkmJnQudGhlbihFKWluc3RhbmNlb2Ygcn1jYXRjaChuKXt9fSgpLGs9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXR8fGU9PT1qJiZ0PT09b30sUz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZihlKSYmImZ1bmN0aW9uIj09dHlwZW9mKHQ9ZS50aGVuKT90OiExfSx3PWZ1bmN0aW9uKGUpe3JldHVybiBrKGosZSk/bmV3IFIoZSk6bmV3IGkoZSl9LFI9aT1mdW5jdGlvbihlKXt2YXIgdCxyO3RoaXMucHJvbWlzZT1uZXcgZShmdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PXIpdGhyb3cgdigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPXAodCksdGhpcy5yZWplY3Q9cChyKX0seD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LE09ZnVuY3Rpb24oZSx0KXtpZighZS5fbil7ZS5fbj0hMDt2YXIgcj1lLl9jO20oZnVuY3Rpb24oKXtmb3IodmFyIG49ZS5fdixpPTE9PWUuX3Msbz0wLGE9ZnVuY3Rpb24odCl7dmFyIHIsbyxhPWk/dC5vazp0LmZhaWwscz10LnJlc29sdmUsYz10LnJlamVjdCx1PXQuZG9tYWluO3RyeXthPyhpfHwoMj09ZS5faCYmTihlKSxlLl9oPTEpLGE9PT0hMD9yPW46KHUmJnUuZW50ZXIoKSxyPWEobiksdSYmdS5leGl0KCkpLHI9PT10LnByb21pc2U/Yyh2KCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihvPVMocikpP28uY2FsbChyLHMsYyk6cyhyKSk6YyhuKX1jYXRjaChsKXtjKGwpfX07ci5sZW5ndGg+bzspYShyW28rK10pO2UuX2M9W10sZS5fbj0hMSx0JiYhZS5faCYmQShlKX0pfX0sQT1mdW5jdGlvbihlKXtfLmNhbGwocyxmdW5jdGlvbigpe3ZhciB0LHIsbixpPWUuX3Y7aWYoVChlKSYmKHQ9eChmdW5jdGlvbigpe08/Zy5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLGksZSk6KHI9cy5vbnVuaGFuZGxlZHJlamVjdGlvbik/cih7cHJvbWlzZTplLHJlYXNvbjppfSk6KG49cy5jb25zb2xlKSYmbi5lcnJvciYmbi5lcnJvcigiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIixpKX0pLGUuX2g9T3x8VChlKT8yOjEpLGUuX2E9dm9pZCAwLHQpdGhyb3cgdC5lcnJvcn0pfSxUPWZ1bmN0aW9uKGUpe2lmKDE9PWUuX2gpcmV0dXJuITE7Zm9yKHZhciB0LHI9ZS5fYXx8ZS5fYyxuPTA7ci5sZW5ndGg+bjspaWYodD1yW24rK10sdC5mYWlsfHwhVCh0LnByb21pc2UpKXJldHVybiExO3JldHVybiEwfSxOPWZ1bmN0aW9uKGUpe18uY2FsbChzLGZ1bmN0aW9uKCl7dmFyIHQ7Tz9nLmVtaXQoInJlamVjdGlvbkhhbmRsZWQiLGUpOih0PXMub25yZWplY3Rpb25oYW5kbGVkKSYmdCh7cHJvbWlzZTplLHJlYXNvbjplLl92fSl9KX0sST1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2R8fCh0Ll9kPSEwLHQ9dC5fd3x8dCx0Ll92PWUsdC5fcz0yLHQuX2F8fCh0Ll9hPXQuX2Muc2xpY2UoKSksTSh0LCEwKSl9LEM9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzO2lmKCFyLl9kKXtyLl9kPSEwLHI9ci5fd3x8cjt0cnl7aWYocj09PWUpdGhyb3cgdigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsodD1TKGUpKT9tKGZ1bmN0aW9uKCl7dmFyIG49e193OnIsX2Q6ITF9O3RyeXt0LmNhbGwoZSxjKEMsbiwxKSxjKEksbiwxKSl9Y2F0Y2goaSl7SS5jYWxsKG4saSl9fSk6KHIuX3Y9ZSxyLl9zPTEsTShyLCExKSl9Y2F0Y2gobil7SS5jYWxsKHtfdzpyLF9kOiExfSxuKX19fTtQfHwoaj1mdW5jdGlvbihlKXtoKHRoaXMsaixiLCJfaCIpLHAoZSksbi5jYWxsKHRoaXMpO3RyeXtlKGMoQyx0aGlzLDEpLGMoSSx0aGlzLDEpKX1jYXRjaCh0KXtJLmNhbGwodGhpcyx0KX19LG49ZnVuY3Rpb24oZSl7dGhpcy5fYz1bXSx0aGlzLl9hPXZvaWQgMCx0aGlzLl9zPTAsdGhpcy5fZD0hMSx0aGlzLl92PXZvaWQgMCx0aGlzLl9oPTAsdGhpcy5fbj0hMX0sbi5wcm90b3R5cGU9ZSgiLi9fcmVkZWZpbmUtYWxsIikoai5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj13KHkodGhpcyxqKSk7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsci5kb21haW49Tz9nLmRvbWFpbjp2b2lkIDAsdGhpcy5fYy5wdXNoKHIpLHRoaXMuX2EmJnRoaXMuX2EucHVzaChyKSx0aGlzLl9zJiZNKHRoaXMsITEpLHIucHJvbWlzZX0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSxSPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IG47dGhpcy5wcm9taXNlPWUsdGhpcy5yZXNvbHZlPWMoQyxlLDEpLHRoaXMucmVqZWN0PWMoSSxlLDEpfSksbChsLkcrbC5XK2wuRiohUCx7UHJvbWlzZTpqfSksZSgiLi9fc2V0LXRvLXN0cmluZy10YWciKShqLGIpLGUoIi4vX3NldC1zcGVjaWVzIikoYiksbz1lKCIuL19jb3JlIilbYl0sbChsLlMrbC5GKiFQLGIse3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD13KHRoaXMpLHI9dC5yZWplY3Q7cmV0dXJuIHIoZSksdC5wcm9taXNlfX0pLGwobC5TK2wuRiooYXx8IVApLGIse3Jlc29sdmU6ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGomJmsoZS5jb25zdHJ1Y3Rvcix0aGlzKSlyZXR1cm4gZTt2YXIgdD13KHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSxsKGwuUytsLkYqIShQJiZlKCIuL19pdGVyLWRldGVjdCIpKGZ1bmN0aW9uKGUpe2ouYWxsKGUpWyJjYXRjaCJdKEUpfSkpLGIse2FsbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dyh0KSxuPXIucmVzb2x2ZSxpPXIucmVqZWN0LG89eChmdW5jdGlvbigpe3ZhciByPVtdLG89MCxhPTE7ZChlLCExLGZ1bmN0aW9uKGUpe3ZhciBzPW8rKyxjPSExO3IucHVzaCh2b2lkIDApLGErKyx0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtjfHwoYz0hMCxyW3NdPWUsLS1hfHxuKHIpKX0saSl9KSwtLWF8fG4ocil9KTtyZXR1cm4gbyYmaShvLmVycm9yKSxyLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXcodCksbj1yLnJlamVjdCxpPXgoZnVuY3Rpb24oKXtkKGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gaSYmbihpLmVycm9yKSxyLnByb21pc2V9fSl9LHsiLi9fYS1mdW5jdGlvbiI6MjYsIi4vX2FuLWluc3RhbmNlIjoyOCwiLi9fYW4tb2JqZWN0IjoyOSwiLi9fY2xhc3NvZiI6MzEsIi4vX2NvcmUiOjMzLCIuL19jdHgiOjM0LCIuL19leHBvcnQiOjQwLCIuL19mb3Itb2YiOjQyLCIuL19nbG9iYWwiOjQzLCIuL19pcy1vYmplY3QiOjUyLCIuL19pdGVyLWRldGVjdCI6NTYsIi4vX2xpYnJhcnkiOjYwLCIuL19taWNyb3Rhc2siOjYyLCIuL19yZWRlZmluZS1hbGwiOjc2LCIuL19zZXQtcHJvdG8iOjc4LCIuL19zZXQtc3BlY2llcyI6NzksIi4vX3NldC10by1zdHJpbmctdGFnIjo4MCwiLi9fc3BlY2llcy1jb25zdHJ1Y3RvciI6ODMsIi4vX3Rhc2siOjg1LCIuL193a3MiOjkzfV0sMTAzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vX3N0cmluZy1hdCIpKCEwKTtlKCIuL19pdGVyLWRlZmluZSIpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihlKXt0aGlzLl90PVN0cmluZyhlKSx0aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLl90LHI9dGhpcy5faTtyZXR1cm4gcj49dC5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfTooZT1uKHQsciksdGhpcy5faSs9ZS5sZW5ndGgse3ZhbHVlOmUsZG9uZTohMX0pfSl9LHsiLi9faXRlci1kZWZpbmUiOjU1LCIuL19zdHJpbmctYXQiOjg0fV0sMTA0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vX2dsb2JhbCIpLGk9ZSgiLi9fY29yZSIpLG89ZSgiLi9faGFzIiksYT1lKCIuL19kZXNjcmlwdG9ycyIpLHM9ZSgiLi9fZXhwb3J0IiksYz1lKCIuL19yZWRlZmluZSIpLHU9ZSgiLi9fbWV0YSIpLktFWSxsPWUoIi4vX2ZhaWxzIiksZj1lKCIuL19zaGFyZWQiKSxwPWUoIi4vX3NldC10by1zdHJpbmctdGFnIiksaD1lKCIuL191aWQiKSxkPWUoIi4vX3drcyIpLHk9ZSgiLi9fa2V5b2YiKSxfPWUoIi4vX2VudW0ta2V5cyIpLG09ZSgiLi9faXMtYXJyYXkiKSxiPWUoIi4vX2FuLW9iamVjdCIpLHY9ZSgiLi9fdG8taW9iamVjdCIpLGc9ZSgiLi9fdG8tcHJpbWl0aXZlIiksaj1lKCIuL19wcm9wZXJ0eS1kZXNjIiksTz1lKCIuL19vYmplY3QtY3JlYXRlIiksRT1lKCIuL19vYmplY3QtZ29wbi1leHQiKSxQPWUoIi4vX29iamVjdC1nb3BkIiksaz1lKCIuL19vYmplY3QtZHAiKSxTPVAuZix3PWsuZixSPUUuZix4PW4uU3ltYm9sLE09bi5KU09OLEE9TSYmTS5zdHJpbmdpZnksVD0hMSxOPSJwcm90b3R5cGUiLEk9ZCgiX2hpZGRlbiIpLEM9ZCgidG9QcmltaXRpdmUiKSxVPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLEQ9Zigic3ltYm9sLXJlZ2lzdHJ5IiksTD1mKCJzeW1ib2xzIiksRj1PYmplY3RbTl0sSD0iZnVuY3Rpb24iPT10eXBlb2YgeCxZPW4uUU9iamVjdCxCPWEmJmwoZnVuY3Rpb24oKXtyZXR1cm4gNyE9Tyh3KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPVMoRix0KTtuJiZkZWxldGUgRlt0XSx3KGUsdCxyKSxuJiZlIT09RiYmdyhGLHQsbil9OncscT1mdW5jdGlvbihlKXt2YXIgdD1MW2VdPU8oeFtOXSk7cmV0dXJuIHQuX2s9ZSxhJiZUJiZCKEYsZSx7Y29uZmlndXJhYmxlOiEwLHNldDpmdW5jdGlvbih0KXtvKHRoaXMsSSkmJm8odGhpc1tJXSxlKSYmKHRoaXNbSV1bZV09ITEpLEIodGhpcyxlLGooMSx0KSl9fSksdH0sSz1IJiYic3ltYm9sIj09dHlwZW9mIHguaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHh9LEo9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBiKGUpLHQ9Zyh0LCEwKSxiKHIpLG8oTCx0KT8oci5lbnVtZXJhYmxlPyhvKGUsSSkmJmVbSV1bdF0mJihlW0ldW3RdPSExKSwKcj1PKHIse2VudW1lcmFibGU6aigwLCExKX0pKToobyhlLEkpfHx3KGUsSSxqKDEse30pKSxlW0ldW3RdPSEwKSxCKGUsdCxyKSk6dyhlLHQscil9LEc9ZnVuY3Rpb24oZSx0KXtiKGUpO2Zvcih2YXIgcixuPV8odD12KHQpKSxpPTAsbz1uLmxlbmd0aDtvPmk7KUooZSxyPW5baSsrXSx0W3JdKTtyZXR1cm4gZX0sVz1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P08oZSk6RyhPKGUpLHQpfSxWPWZ1bmN0aW9uKGUpe3ZhciB0PVUuY2FsbCh0aGlzLGU9ZyhlLCEwKSk7cmV0dXJuIHR8fCFvKHRoaXMsZSl8fCFvKEwsZSl8fG8odGhpcyxJKSYmdGhpc1tJXVtlXT90OiEwfSx6PWZ1bmN0aW9uKGUsdCl7dmFyIHI9UyhlPXYoZSksdD1nKHQsITApKTtyZXR1cm4hcnx8IW8oTCx0KXx8byhlLEkpJiZlW0ldW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfSwkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPVIodihlKSksbj1bXSxpPTA7ci5sZW5ndGg+aTspbyhMLHQ9cltpKytdKXx8dD09SXx8dD09dXx8bi5wdXNoKHQpO3JldHVybiBufSxYPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPVIodihlKSksbj1bXSxpPTA7ci5sZW5ndGg+aTspbyhMLHQ9cltpKytdKSYmbi5wdXNoKExbdF0pO3JldHVybiBufSxRPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUmJiFLKGUpKXtmb3IodmFyIHQscixuPVtlXSxpPTE7YXJndW1lbnRzLmxlbmd0aD5pOyluLnB1c2goYXJndW1lbnRzW2krK10pO3JldHVybiB0PW5bMV0sImZ1bmN0aW9uIj09dHlwZW9mIHQmJihyPXQpLCFyJiZtKHQpfHwodD1mdW5jdGlvbihlLHQpe3JldHVybiByJiYodD1yLmNhbGwodGhpcyxlLHQpKSxLKHQpP3ZvaWQgMDp0fSksblsxXT10LEEuYXBwbHkoTSxuKX19LFo9bChmdW5jdGlvbigpe3ZhciBlPXgoKTtyZXR1cm4iW251bGxdIiE9QShbZV0pfHwie30iIT1BKHthOmV9KXx8Int9IiE9QShPYmplY3QoZSkpfSk7SHx8KHg9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgeCl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEiKTtyZXR1cm4gcShoKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSl9LGMoeFtOXSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxQLmY9eixrLmY9SixlKCIuL19vYmplY3QtZ29wbiIpLmY9RS5mPSQsZSgiLi9fb2JqZWN0LXBpZSIpLmY9VixlKCIuL19vYmplY3QtZ29wcyIpLmY9WCxhJiYhZSgiLi9fbGlicmFyeSIpJiZjKEYsInByb3BlcnR5SXNFbnVtZXJhYmxlIixWLCEwKSkscyhzLkcrcy5XK3MuRiohSCx7U3ltYm9sOnh9KTtmb3IodmFyIGVlPSJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSx0ZT0wO2VlLmxlbmd0aD50ZTspe3ZhciByZT1lZVt0ZSsrXSxuZT1pLlN5bWJvbCxpZT1kKHJlKTtyZSBpbiBuZXx8dyhuZSxyZSx7dmFsdWU6SD9pZTpxKGllKX0pfVkmJllbTl0mJllbTl0uZmluZENoaWxkfHwoVD0hMCkscyhzLlMrcy5GKiFILCJTeW1ib2wiLHsiZm9yIjpmdW5jdGlvbihlKXtyZXR1cm4gbyhELGUrPSIiKT9EW2VdOkRbZV09eChlKX0sa2V5Rm9yOmZ1bmN0aW9uKGUpe2lmKEsoZSkpcmV0dXJuIHkoRCxlKTt0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIHN5bWJvbCEiKX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7VD0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7VD0hMX19KSxzKHMuUytzLkYqIUgsIk9iamVjdCIse2NyZWF0ZTpXLGRlZmluZVByb3BlcnR5OkosZGVmaW5lUHJvcGVydGllczpHLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjp6LGdldE93blByb3BlcnR5TmFtZXM6JCxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6WH0pLE0mJnMocy5TK3MuRiooIUh8fFopLCJKU09OIix7c3RyaW5naWZ5OlF9KSx4W05dW0NdfHxlKCIuL19oaWRlIikoeFtOXSxDLHhbTl0udmFsdWVPZikscCh4LCJTeW1ib2wiKSxwKE1hdGgsIk1hdGgiLCEwKSxwKG4uSlNPTiwiSlNPTiIsITApfSx7Ii4vX2FuLW9iamVjdCI6MjksIi4vX2NvcmUiOjMzLCIuL19kZXNjcmlwdG9ycyI6MzYsIi4vX2VudW0ta2V5cyI6MzksIi4vX2V4cG9ydCI6NDAsIi4vX2ZhaWxzIjo0MSwiLi9fZ2xvYmFsIjo0MywiLi9faGFzIjo0NCwiLi9faGlkZSI6NDUsIi4vX2lzLWFycmF5Ijo1MSwiLi9fa2V5b2YiOjU5LCIuL19saWJyYXJ5Ijo2MCwiLi9fbWV0YSI6NjEsIi4vX29iamVjdC1jcmVhdGUiOjYzLCIuL19vYmplY3QtZHAiOjY0LCIuL19vYmplY3QtZ29wZCI6NjYsIi4vX29iamVjdC1nb3BuIjo2OCwiLi9fb2JqZWN0LWdvcG4tZXh0Ijo2NywiLi9fb2JqZWN0LWdvcHMiOjY5LCIuL19vYmplY3QtcGllIjo3MywiLi9fcHJvcGVydHktZGVzYyI6NzUsIi4vX3JlZGVmaW5lIjo3NywiLi9fc2V0LXRvLXN0cmluZy10YWciOjgwLCIuL19zaGFyZWQiOjgyLCIuL190by1pb2JqZWN0Ijo4OCwiLi9fdG8tcHJpbWl0aXZlIjo5MSwiLi9fdWlkIjo5MiwiLi9fd2tzIjo5M31dLDEwNTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4vZXM2LmFycmF5Lml0ZXJhdG9yIik7Zm9yKHZhciBuPWUoIi4vX2dsb2JhbCIpLGk9ZSgiLi9faGlkZSIpLG89ZSgiLi9faXRlcmF0b3JzIiksYT1lKCIuL193a3MiKSgidG9TdHJpbmdUYWciKSxzPVsiTm9kZUxpc3QiLCJET01Ub2tlbkxpc3QiLCJNZWRpYUxpc3QiLCJTdHlsZVNoZWV0TGlzdCIsIkNTU1J1bGVMaXN0Il0sYz0wOzU+YztjKyspe3ZhciB1PXNbY10sbD1uW3VdLGY9bCYmbC5wcm90b3R5cGU7ZiYmIWZbYV0mJmkoZixhLHUpLG9bdV09by5BcnJheX19LHsiLi9fZ2xvYmFsIjo0MywiLi9faGlkZSI6NDUsIi4vX2l0ZXJhdG9ycyI6NTgsIi4vX3drcyI6OTMsIi4vZXM2LmFycmF5Lml0ZXJhdG9yIjo5NX1dLDEwNjpbZnVuY3Rpb24odCxyLG4peyFmdW5jdGlvbih0LG4peyJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFtZD9lKFtdLG4pOiJ1bmRlZmluZWQiIT10eXBlb2YgciYmci5leHBvcnRzP3IuZXhwb3J0cz1uKCk6dC50djQ9bigpfSh0aGlzLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZW5jb2RlVVJJKGUpLnJlcGxhY2UoLyUyNVswLTldWzAtOV0vZyxmdW5jdGlvbihlKXtyZXR1cm4iJSIrZS5zdWJzdHJpbmcoMyl9KX1mdW5jdGlvbiB0KHQpe3ZhciByPSIiO3BbdC5jaGFyQXQoMCldJiYocj10LmNoYXJBdCgwKSx0PXQuc3Vic3RyaW5nKDEpKTt2YXIgbj0iIixpPSIiLG89ITAsYT0hMSxzPSExOyIrIj09PXI/bz0hMToiLiI9PT1yPyhpPSIuIixuPSIuIik6Ii8iPT09cj8oaT0iLyIsbj0iLyIpOiIjIj09PXI/KGk9IiMiLG89ITEpOiI7Ij09PXI/KGk9IjsiLG49IjsiLGE9ITAscz0hMCk6Ij8iPT09cj8oaT0iPyIsbj0iJiIsYT0hMCk6IiYiPT09ciYmKGk9IiYiLG49IiYiLGE9ITApO2Zvcih2YXIgYz1bXSx1PXQuc3BsaXQoIiwiKSxsPVtdLGY9e30sZD0wO2Q8dS5sZW5ndGg7ZCsrKXt2YXIgeT11W2RdLF89bnVsbDtpZigtMSE9PXkuaW5kZXhPZigiOiIpKXt2YXIgbT15LnNwbGl0KCI6Iik7eT1tWzBdLF89cGFyc2VJbnQobVsxXSwxMCl9Zm9yKHZhciBiPXt9O2hbeS5jaGFyQXQoeS5sZW5ndGgtMSldOyliW3kuY2hhckF0KHkubGVuZ3RoLTEpXT0hMCx5PXkuc3Vic3RyaW5nKDAseS5sZW5ndGgtMSk7dmFyIHY9e3RydW5jYXRlOl8sbmFtZTp5LHN1ZmZpY2VzOmJ9O2wucHVzaCh2KSxmW3ldPXYsYy5wdXNoKHkpfXZhciBnPWZ1bmN0aW9uKHQpe2Zvcih2YXIgcj0iIixjPTAsdT0wO3U8bC5sZW5ndGg7dSsrKXt2YXIgZj1sW3VdLHA9dChmLm5hbWUpO2lmKG51bGw9PT1wfHx2b2lkIDA9PT1wfHxBcnJheS5pc0FycmF5KHApJiYwPT09cC5sZW5ndGh8fCJvYmplY3QiPT10eXBlb2YgcCYmMD09PU9iamVjdC5rZXlzKHApLmxlbmd0aCljKys7ZWxzZSBpZihyKz11PT09Yz9pOm58fCIsIixBcnJheS5pc0FycmF5KHApKXthJiYocis9Zi5uYW1lKyI9Iik7Zm9yKHZhciBoPTA7aDxwLmxlbmd0aDtoKyspaD4wJiYocis9Zi5zdWZmaWNlc1siKiJdP258fCIsIjoiLCIsZi5zdWZmaWNlc1siKiJdJiZhJiYocis9Zi5uYW1lKyI9IikpLHIrPW8/ZW5jb2RlVVJJQ29tcG9uZW50KHBbaF0pLnJlcGxhY2UoLyEvZywiJTIxIik6ZShwW2hdKX1lbHNlIGlmKCJvYmplY3QiPT10eXBlb2YgcCl7YSYmIWYuc3VmZmljZXNbIioiXSYmKHIrPWYubmFtZSsiPSIpO3ZhciBkPSEwO2Zvcih2YXIgeSBpbiBwKWR8fChyKz1mLnN1ZmZpY2VzWyIqIl0/bnx8IiwiOiIsIiksZD0hMSxyKz1vP2VuY29kZVVSSUNvbXBvbmVudCh5KS5yZXBsYWNlKC8hL2csIiUyMSIpOmUoeSkscis9Zi5zdWZmaWNlc1siKiJdPyI9IjoiLCIscis9bz9lbmNvZGVVUklDb21wb25lbnQocFt5XSkucmVwbGFjZSgvIS9nLCIlMjEiKTplKHBbeV0pfWVsc2UgYSYmKHIrPWYubmFtZSxzJiYiIj09PXB8fChyKz0iPSIpKSxudWxsIT1mLnRydW5jYXRlJiYocD1wLnN1YnN0cmluZygwLGYudHJ1bmNhdGUpKSxyKz1vP2VuY29kZVVSSUNvbXBvbmVudChwKS5yZXBsYWNlKC8hL2csIiUyMSIpOmUocCl9cmV0dXJuIHJ9O3JldHVybiBnLnZhck5hbWVzPWMse3ByZWZpeDppLHN1YnN0aXR1dGlvbjpnfX1mdW5jdGlvbiByKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHIpKXJldHVybiBuZXcgcihlKTtmb3IodmFyIG49ZS5zcGxpdCgieyIpLGk9W24uc2hpZnQoKV0sbz1bXSxhPVtdLHM9W107bi5sZW5ndGg+MDspe3ZhciBjPW4uc2hpZnQoKSx1PWMuc3BsaXQoIn0iKVswXSxsPWMuc3Vic3RyaW5nKHUubGVuZ3RoKzEpLGY9dCh1KTthLnB1c2goZi5zdWJzdGl0dXRpb24pLG8ucHVzaChmLnByZWZpeCksaS5wdXNoKGwpLHM9cy5jb25jYXQoZi5zdWJzdGl0dXRpb24udmFyTmFtZXMpfXRoaXMuZmlsbD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9aVswXSxyPTA7cjxhLmxlbmd0aDtyKyspe3ZhciBuPWFbcl07dCs9bihlKSx0Kz1pW3IrMV19cmV0dXJuIHR9LHRoaXMudmFyTmFtZXM9cyx0aGlzLnRlbXBsYXRlPWV9ZnVuY3Rpb24gbihlLHQpe2lmKGU9PT10KXJldHVybiEwO2lmKGUmJnQmJiJvYmplY3QiPT10eXBlb2YgZSYmIm9iamVjdCI9PXR5cGVvZiB0KXtpZihBcnJheS5pc0FycmF5KGUpIT09QXJyYXkuaXNBcnJheSh0KSlyZXR1cm4hMTtpZihBcnJheS5pc0FycmF5KGUpKXtpZihlLmxlbmd0aCE9PXQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWlmKCFuKGVbcl0sdFtyXSkpcmV0dXJuITF9ZWxzZXt2YXIgaTtmb3IoaSBpbiBlKWlmKHZvaWQgMD09PXRbaV0mJnZvaWQgMCE9PWVbaV0pcmV0dXJuITE7Zm9yKGkgaW4gdClpZih2b2lkIDA9PT1lW2ldJiZ2b2lkIDAhPT10W2ldKXJldHVybiExO2ZvcihpIGluIGUpaWYoIW4oZVtpXSx0W2ldKSlyZXR1cm4hMX1yZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBpKGUpe3ZhciB0PVN0cmluZyhlKS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIikubWF0Y2goL14oW146XC8/I10rOik/KFwvXC8oPzpbXjpAXSooPzo6W146QF0qKT9AKT8oKFteOlwvPyNdKikoPzo6KFxkKikpPykpPyhbXj8jXSopKFw/W14jXSopPygjW1xzXFNdKik/Lyk7cmV0dXJuIHQ/e2hyZWY6dFswXXx8IiIscHJvdG9jb2w6dFsxXXx8IiIsYXV0aG9yaXR5OnRbMl18fCIiLGhvc3Q6dFszXXx8IiIsaG9zdG5hbWU6dFs0XXx8IiIscG9ydDp0WzVdfHwiIixwYXRobmFtZTp0WzZdfHwiIixzZWFyY2g6dFs3XXx8IiIsaGFzaDp0WzhdfHwiIn06bnVsbH1mdW5jdGlvbiBvKGUsdCl7ZnVuY3Rpb24gcihlKXt2YXIgdD1bXTtyZXR1cm4gZS5yZXBsYWNlKC9eKFwuXC4/KFwvfCQpKSsvLCIiKS5yZXBsYWNlKC9cLyhcLihcL3wkKSkrL2csIi8iKS5yZXBsYWNlKC9cL1wuXC4kLywiLy4uLyIpLnJlcGxhY2UoL1wvP1teXC9dKi9nLGZ1bmN0aW9uKGUpeyIvLi4iPT09ZT90LnBvcCgpOnQucHVzaChlKX0pLHQuam9pbigiIikucmVwbGFjZSgvXlwvLywiLyI9PT1lLmNoYXJBdCgwKT8iLyI6IiIpfXJldHVybiB0PWkodHx8IiIpLGU9aShlfHwiIiksdCYmZT8odC5wcm90b2NvbHx8ZS5wcm90b2NvbCkrKHQucHJvdG9jb2x8fHQuYXV0aG9yaXR5P3QuYXV0aG9yaXR5OmUuYXV0aG9yaXR5KStyKHQucHJvdG9jb2x8fHQuYXV0aG9yaXR5fHwiLyI9PT10LnBhdGhuYW1lLmNoYXJBdCgwKT90LnBhdGhuYW1lOnQucGF0aG5hbWU/KGUuYXV0aG9yaXR5JiYhZS5wYXRobmFtZT8iLyI6IiIpK2UucGF0aG5hbWUuc2xpY2UoMCxlLnBhdGhuYW1lLmxhc3RJbmRleE9mKCIvIikrMSkrdC5wYXRobmFtZTplLnBhdGhuYW1lKSsodC5wcm90b2NvbHx8dC5hdXRob3JpdHl8fHQucGF0aG5hbWU/dC5zZWFyY2g6dC5zZWFyY2h8fGUuc2VhcmNoKSt0Lmhhc2g6bnVsbH1mdW5jdGlvbiBhKGUpe3JldHVybiBlLnNwbGl0KCIjIilbMF19ZnVuY3Rpb24gcyhlLHQpe2lmKGUmJiJvYmplY3QiPT10eXBlb2YgZSlpZih2b2lkIDA9PT10P3Q9ZS5pZDoic3RyaW5nIj09dHlwZW9mIGUuaWQmJih0PW8odCxlLmlkKSxlLmlkPXQpLEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspcyhlW3JdLHQpO2Vsc2V7InN0cmluZyI9PXR5cGVvZiBlLiRyZWYmJihlLiRyZWY9byh0LGUuJHJlZikpO2Zvcih2YXIgbiBpbiBlKSJlbnVtIiE9PW4mJnMoZVtuXSx0KX19ZnVuY3Rpb24gYyhlKXtlPWV8fCJlbiI7dmFyIHQ9altlXTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9dFtlLmNvZGVdfHxnW2UuY29kZV07aWYoInN0cmluZyIhPXR5cGVvZiByKXJldHVybiJVbmtub3duIGVycm9yIGNvZGUgIitlLmNvZGUrIjogIitKU09OLnN0cmluZ2lmeShlLm1lc3NhZ2VQYXJhbXMpO3ZhciBuPWUucGFyYW1zO3JldHVybiByLnJlcGxhY2UoL1x7KFtee31dKilcfS9nLGZ1bmN0aW9uKGUsdCl7dmFyIHI9blt0XTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHJ8fCJudW1iZXIiPT10eXBlb2Ygcj9yOmV9KX19ZnVuY3Rpb24gdShlLHQscixuLGkpe2lmKEVycm9yLmNhbGwodGhpcyksdm9pZCAwPT09ZSl0aHJvdyBuZXcgRXJyb3IoIk5vIGVycm9yIGNvZGUgc3VwcGxpZWQ6ICIrbik7dGhpcy5tZXNzYWdlPSIiLHRoaXMucGFyYW1zPXQsdGhpcy5jb2RlPWUsdGhpcy5kYXRhUGF0aD1yfHwiIix0aGlzLnNjaGVtYVBhdGg9bnx8IiIsdGhpcy5zdWJFcnJvcnM9aXx8bnVsbDt2YXIgbz1uZXcgRXJyb3IodGhpcy5tZXNzYWdlKTtpZih0aGlzLnN0YWNrPW8uc3RhY2t8fG8uc3RhY2t0cmFjZSwhdGhpcy5zdGFjayl0cnl7dGhyb3cgb31jYXRjaChvKXt0aGlzLnN0YWNrPW8uc3RhY2t8fG8uc3RhY2t0cmFjZX19ZnVuY3Rpb24gbChlLHQpe2lmKHQuc3Vic3RyaW5nKDAsZS5sZW5ndGgpPT09ZSl7dmFyIHI9dC5zdWJzdHJpbmcoZS5sZW5ndGgpO2lmKHQubGVuZ3RoPjAmJiIvIj09PXQuY2hhckF0KGUubGVuZ3RoLTEpfHwiIyI9PT1yLmNoYXJBdCgwKXx8Ij8iPT09ci5jaGFyQXQoMCkpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gZihlKXt2YXIgdCxyLG49bmV3IGQsaT17c2V0RXJyb3JSZXBvcnRlcjpmdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/dGhpcy5sYW5ndWFnZShlKToocj1lLCEwKX0sYWRkRm9ybWF0OmZ1bmN0aW9uKCl7bi5hZGRGb3JtYXQuYXBwbHkobixhcmd1bWVudHMpfSxsYW5ndWFnZTpmdW5jdGlvbihlKXtyZXR1cm4gZT8oaltlXXx8KGU9ZS5zcGxpdCgiLSIpWzBdKSxqW2VdPyh0PWUsZSk6ITEpOnR9LGFkZExhbmd1YWdlOmZ1bmN0aW9uKGUsdCl7dmFyIHI7Zm9yKHIgaW4gbSl0W3JdJiYhdFttW3JdXSYmKHRbbVtyXV09dFtyXSk7dmFyIG49ZS5zcGxpdCgiLSIpWzBdO2lmKGpbbl0pe2pbZV09T2JqZWN0LmNyZWF0ZShqW25dKTtmb3IociBpbiB0KSJ1bmRlZmluZWQiPT10eXBlb2YgaltuXVtyXSYmKGpbbl1bcl09dFtyXSksaltlXVtyXT10W3JdfWVsc2UgaltlXT10LGpbbl09dDtyZXR1cm4gdGhpc30sZnJlc2hBcGk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZigpO3JldHVybiBlJiZ0Lmxhbmd1YWdlKGUpLHR9LHZhbGlkYXRlOmZ1bmN0aW9uKGUsaSxvLGEpe3ZhciBzPWModCksdT1yP2Z1bmN0aW9uKGUsdCxuKXtyZXR1cm4gcihlLHQsbil8fHMoZSx0LG4pfTpzLGw9bmV3IGQobiwhMSx1LG8sYSk7InN0cmluZyI9PXR5cGVvZiBpJiYoaT17JHJlZjppfSksbC5hZGRTY2hlbWEoIiIsaSk7dmFyIGY9bC52YWxpZGF0ZUFsbChlLGksbnVsbCxudWxsLCIiKTtyZXR1cm4hZiYmYSYmKGY9bC5iYW5Vbmtub3duUHJvcGVydGllcyhlLGkpKSx0aGlzLmVycm9yPWYsdGhpcy5taXNzaW5nPWwubWlzc2luZyx0aGlzLnZhbGlkPW51bGw9PT1mLHRoaXMudmFsaWR9LHZhbGlkYXRlUmVzdWx0OmZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIHRoaXMudmFsaWRhdGUuYXBwbHkoZSxhcmd1bWVudHMpLGV9LHZhbGlkYXRlTXVsdGlwbGU6ZnVuY3Rpb24oZSxpLG8sYSl7dmFyIHM9Yyh0KSx1PXI/ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByKGUsdCxuKXx8cyhlLHQsbil9OnMsbD1uZXcgZChuLCEwLHUsbyxhKTsic3RyaW5nIj09dHlwZW9mIGkmJihpPXskcmVmOml9KSxsLmFkZFNjaGVtYSgiIixpKSxsLnZhbGlkYXRlQWxsKGUsaSxudWxsLG51bGwsIiIpLGEmJmwuYmFuVW5rbm93blByb3BlcnRpZXMoZSxpKTt2YXIgZj17fTtyZXR1cm4gZi5lcnJvcnM9bC5lcnJvcnMsZi5taXNzaW5nPWwubWlzc2luZyxmLnZhbGlkPTA9PT1mLmVycm9ycy5sZW5ndGgsZn0sYWRkU2NoZW1hOmZ1bmN0aW9uKCl7cmV0dXJuIG4uYWRkU2NoZW1hLmFwcGx5KG4sYXJndW1lbnRzKX0sZ2V0U2NoZW1hOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0U2NoZW1hLmFwcGx5KG4sYXJndW1lbnRzKX0sZ2V0U2NoZW1hTWFwOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0U2NoZW1hTWFwLmFwcGx5KG4sYXJndW1lbnRzKX0sZ2V0U2NoZW1hVXJpczpmdW5jdGlvbigpe3JldHVybiBuLmdldFNjaGVtYVVyaXMuYXBwbHkobixhcmd1bWVudHMpfSxnZXRNaXNzaW5nVXJpczpmdW5jdGlvbigpe3JldHVybiBuLmdldE1pc3NpbmdVcmlzLmFwcGx5KG4sYXJndW1lbnRzKX0sZHJvcFNjaGVtYXM6ZnVuY3Rpb24oKXtuLmRyb3BTY2hlbWFzLmFwcGx5KG4sYXJndW1lbnRzKX0sZGVmaW5lS2V5d29yZDpmdW5jdGlvbigpe24uZGVmaW5lS2V5d29yZC5hcHBseShuLGFyZ3VtZW50cyl9LGRlZmluZUVycm9yOmZ1bmN0aW9uKGUsdCxyKXtpZigic3RyaW5nIiE9dHlwZW9mIGV8fCEvXltBLVpdKyhfW0EtWl0rKSokLy50ZXN0KGUpKXRocm93IG5ldyBFcnJvcigiQ29kZSBuYW1lIG11c3QgYmUgYSBzdHJpbmcgaW4gVVBQRVJfQ0FTRV9XSVRIX1VOREVSU0NPUkVTIik7aWYoIm51bWJlciIhPXR5cGVvZiB0fHx0JTEhPT0wfHwxZTQ+dCl0aHJvdyBuZXcgRXJyb3IoIkNvZGUgbnVtYmVyIG11c3QgYmUgYW4gaW50ZWdlciA+IDEwMDAwIik7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBtW2VdKXRocm93IG5ldyBFcnJvcigiRXJyb3IgYWxyZWFkeSBkZWZpbmVkOiAiK2UrIiBhcyAiK21bZV0pO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYlt0XSl0aHJvdyBuZXcgRXJyb3IoIkVycm9yIGNvZGUgYWxyZWFkeSB1c2VkOiAiK2JbdF0rIiBhcyAiK3QpO21bZV09dCxiW3RdPWUsZ1tlXT1nW3RdPXI7Zm9yKHZhciBuIGluIGope3ZhciBpPWpbbl07aVtlXSYmKGlbdF09aVt0XXx8aVtlXSl9fSxyZXNldDpmdW5jdGlvbigpe24ucmVzZXQoKSx0aGlzLmVycm9yPW51bGwsdGhpcy5taXNzaW5nPVtdLHRoaXMudmFsaWQ9ITB9LG1pc3Npbmc6W10sZXJyb3I6bnVsbCx2YWxpZDohMCxub3JtU2NoZW1hOnMscmVzb2x2ZVVybDpvLGdldERvY3VtZW50VXJpOmEsZXJyb3JDb2RlczptfTtyZXR1cm4gaS5sYW5ndWFnZShlfHwiZW4iKSxpfU9iamVjdC5rZXlzfHwoT2JqZWN0LmtleXM9ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHQ9IXt0b1N0cmluZzpudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgidG9TdHJpbmciKSxyPVsidG9TdHJpbmciLCJ0b0xvY2FsZVN0cmluZyIsInZhbHVlT2YiLCJoYXNPd25Qcm9wZXJ0eSIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImNvbnN0cnVjdG9yIl0sbj1yLmxlbmd0aDtyZXR1cm4gZnVuY3Rpb24oaSl7aWYoIm9iamVjdCIhPXR5cGVvZiBpJiYiZnVuY3Rpb24iIT10eXBlb2YgaXx8bnVsbD09PWkpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmtleXMgY2FsbGVkIG9uIG5vbi1vYmplY3QiKTt2YXIgbz1bXTtmb3IodmFyIGEgaW4gaSllLmNhbGwoaSxhKSYmby5wdXNoKGEpO2lmKHQpZm9yKHZhciBzPTA7bj5zO3MrKyllLmNhbGwoaSxyW3NdKSYmby5wdXNoKHJbc10pO3JldHVybiBvfX0oKSksT2JqZWN0LmNyZWF0ZXx8KE9iamVjdC5jcmVhdGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBmdW5jdGlvbih0KXtpZigxIT09YXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIk9iamVjdC5jcmVhdGUgaW1wbGVtZW50YXRpb24gb25seSBhY2NlcHRzIG9uZSBwYXJhbWV0ZXIuIik7cmV0dXJuIGUucHJvdG90eXBlPXQsbmV3IGV9fSgpKSxBcnJheS5pc0FycmF5fHwoQXJyYXkuaXNBcnJheT1mdW5jdGlvbihlKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSksQXJyYXkucHJvdG90eXBlLmluZGV4T2Z8fChBcnJheS5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbihlKXtpZihudWxsPT09dGhpcyl0aHJvdyBuZXcgVHlwZUVycm9yO3ZhciB0PU9iamVjdCh0aGlzKSxyPXQubGVuZ3RoPj4+MDtpZigwPT09cilyZXR1cm4tMTt2YXIgbj0wO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSYmKG49TnVtYmVyKGFyZ3VtZW50c1sxXSksbiE9PW4/bj0wOjAhPT1uJiZuIT09MS8wJiZuIT09LSgxLzApJiYobj0obj4wfHwtMSkqTWF0aC5mbG9vcihNYXRoLmFicyhuKSkpKSxuPj1yKXJldHVybi0xO2Zvcih2YXIgaT1uPj0wP246TWF0aC5tYXgoci1NYXRoLmFicyhuKSwwKTtyPmk7aSsrKWlmKGkgaW4gdCYmdFtpXT09PWUpcmV0dXJuIGk7cmV0dXJuLTF9KSxPYmplY3QuaXNGcm96ZW58fChPYmplY3QuaXNGcm96ZW49ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PSJ0djRfdGVzdF9mcm96ZW5fa2V5IjtlLmhhc093blByb3BlcnR5KHQpOyl0Kz1NYXRoLnJhbmRvbSgpO3RyeXtyZXR1cm4gZVt0XT0hMCxkZWxldGUgZVt0XSwhMX1jYXRjaChyKXtyZXR1cm4hMH19KTt2YXIgcD17IisiOiEwLCIjIjohMCwiLiI6ITAsIi8iOiEwLCI7IjohMCwiPyI6ITAsIiYiOiEwfSxoPXsiKiI6ITB9O3IucHJvdG90eXBlPXt0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRlbXBsYXRlfSxmaWxsRnJvbU9iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5maWxsKGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfSl9fTt2YXIgZD1mdW5jdGlvbihlLHQscixuLGkpe2lmKHRoaXMubWlzc2luZz1bXSx0aGlzLm1pc3NpbmdNYXA9e30sdGhpcy5mb3JtYXRWYWxpZGF0b3JzPWU/T2JqZWN0LmNyZWF0ZShlLmZvcm1hdFZhbGlkYXRvcnMpOnt9LHRoaXMuc2NoZW1hcz1lP09iamVjdC5jcmVhdGUoZS5zY2hlbWFzKTp7fSx0aGlzLmNvbGxlY3RNdWx0aXBsZT10LHRoaXMuZXJyb3JzPVtdLHRoaXMuaGFuZGxlRXJyb3I9dD90aGlzLmNvbGxlY3RFcnJvcjp0aGlzLnJldHVybkVycm9yLG4mJih0aGlzLmNoZWNrUmVjdXJzaXZlPSEwLHRoaXMuc2Nhbm5lZD1bXSx0aGlzLnNjYW5uZWRGcm96ZW49W10sdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcz1bXSx0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzPVtdLHRoaXMudmFsaWRhdGVkU2NoZW1hc0tleT0idHY0X3ZhbGlkYXRpb25faWQiLHRoaXMudmFsaWRhdGlvbkVycm9yc0tleT0idHY0X3ZhbGlkYXRpb25fZXJyb3JzX2lkIiksaSYmKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcz0hMCx0aGlzLmtub3duUHJvcGVydHlQYXRocz17fSx0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPXt9KSx0aGlzLmVycm9yUmVwb3J0ZXI9cnx8YygiZW4iKSwic3RyaW5nIj09dHlwZW9mIHRoaXMuZXJyb3JSZXBvcnRlcil0aHJvdyBuZXcgRXJyb3IoImRlYnVnIik7aWYodGhpcy5kZWZpbmVkS2V5d29yZHM9e30sZSlmb3IodmFyIG8gaW4gZS5kZWZpbmVkS2V5d29yZHMpdGhpcy5kZWZpbmVkS2V5d29yZHNbb109ZS5kZWZpbmVkS2V5d29yZHNbb10uc2xpY2UoMCl9O2QucHJvdG90eXBlLmRlZmluZUtleXdvcmQ9ZnVuY3Rpb24oZSx0KXt0aGlzLmRlZmluZWRLZXl3b3Jkc1tlXT10aGlzLmRlZmluZWRLZXl3b3Jkc1tlXXx8W10sdGhpcy5kZWZpbmVkS2V5d29yZHNbZV0ucHVzaCh0KX0sZC5wcm90b3R5cGUuY3JlYXRlRXJyb3I9ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSl7dmFyIHM9bmV3IHUoZSx0LHIsbixpKTtyZXR1cm4gcy5tZXNzYWdlPXRoaXMuZXJyb3JSZXBvcnRlcihzLG8sYSksc30sZC5wcm90b3R5cGUucmV0dXJuRXJyb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGQucHJvdG90eXBlLmNvbGxlY3RFcnJvcj1mdW5jdGlvbihlKXtyZXR1cm4gZSYmdGhpcy5lcnJvcnMucHVzaChlKSxudWxsfSxkLnByb3RvdHlwZS5wcmVmaXhFcnJvcnM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj1lO248dGhpcy5lcnJvcnMubGVuZ3RoO24rKyl0aGlzLmVycm9yc1tuXT10aGlzLmVycm9yc1tuXS5wcmVmaXhXaXRoKHQscik7cmV0dXJuIHRoaXN9LGQucHJvdG90eXBlLmJhblVua25vd25Qcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMpe3ZhciBuPXRoaXMuY3JlYXRlRXJyb3IobS5VTktOT1dOX1BST1BFUlRZLHtwYXRoOnJ9LHIsIiIsbnVsbCxlLHQpLGk9dGhpcy5oYW5kbGVFcnJvcihuKTtpZihpKXJldHVybiBpfXJldHVybiBudWxsfSxkLnByb3RvdHlwZS5hZGRGb3JtYXQ9ZnVuY3Rpb24oZSx0KXtpZigib2JqZWN0Ij09dHlwZW9mIGUpe2Zvcih2YXIgciBpbiBlKXRoaXMuYWRkRm9ybWF0KHIsZVtyXSk7cmV0dXJuIHRoaXN9dGhpcy5mb3JtYXRWYWxpZGF0b3JzW2VdPXR9LGQucHJvdG90eXBlLnJlc29sdmVSZWZzPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09ZS4kcmVmKXtpZih0PXR8fHt9LHRbZS4kcmVmXSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihtLkNJUkNVTEFSX1JFRkVSRU5DRSx7dXJsczpPYmplY3Qua2V5cyh0KS5qb2luKCIsICIpfSwiIiwiIixudWxsLHZvaWQgMCxlKTt0W2UuJHJlZl09ITAsZT10aGlzLmdldFNjaGVtYShlLiRyZWYsdCl9cmV0dXJuIGV9LGQucHJvdG90eXBlLmdldFNjaGVtYT1mdW5jdGlvbihlLHQpe3ZhciByO2lmKHZvaWQgMCE9PXRoaXMuc2NoZW1hc1tlXSlyZXR1cm4gcj10aGlzLnNjaGVtYXNbZV0sdGhpcy5yZXNvbHZlUmVmcyhyLHQpO3ZhciBuPWUsaT0iIjtpZigtMSE9PWUuaW5kZXhPZigiIyIpJiYoaT1lLnN1YnN0cmluZyhlLmluZGV4T2YoIiMiKSsxKSxuPWUuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCIjIikpKSwib2JqZWN0Ij09dHlwZW9mIHRoaXMuc2NoZW1hc1tuXSl7cj10aGlzLnNjaGVtYXNbbl07dmFyIG89ZGVjb2RlVVJJQ29tcG9uZW50KGkpO2lmKCIiPT09bylyZXR1cm4gdGhpcy5yZXNvbHZlUmVmcyhyLHQpO2lmKCIvIiE9PW8uY2hhckF0KDApKXJldHVybjtmb3IodmFyIGE9by5zcGxpdCgiLyIpLnNsaWNlKDEpLHM9MDtzPGEubGVuZ3RoO3MrKyl7dmFyIGM9YVtzXS5yZXBsYWNlKC9+MS9nLCIvIikucmVwbGFjZSgvfjAvZywifiIpO2lmKHZvaWQgMD09PXJbY10pe3I9dm9pZCAwO2JyZWFrfXI9cltjXX1pZih2b2lkIDAhPT1yKXJldHVybiB0aGlzLnJlc29sdmVSZWZzKHIsdCl9dm9pZCAwPT09dGhpcy5taXNzaW5nW25dJiYodGhpcy5taXNzaW5nLnB1c2gobiksdGhpcy5taXNzaW5nW25dPW4sdGhpcy5taXNzaW5nTWFwW25dPW4pfSxkLnByb3RvdHlwZS5zZWFyY2hTY2hlbWFzPWZ1bmN0aW9uKGUsdCl7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl0aGlzLnNlYXJjaFNjaGVtYXMoZVtyXSx0KTtlbHNlIGlmKGUmJiJvYmplY3QiPT10eXBlb2YgZSl7InN0cmluZyI9PXR5cGVvZiBlLmlkJiZsKHQsZS5pZCkmJnZvaWQgMD09PXRoaXMuc2NoZW1hc1tlLmlkXSYmKHRoaXMuc2NoZW1hc1tlLmlkXT1lKTtmb3IodmFyIG4gaW4gZSlpZigiZW51bSIhPT1uKWlmKCJvYmplY3QiPT10eXBlb2YgZVtuXSl0aGlzLnNlYXJjaFNjaGVtYXMoZVtuXSx0KTtlbHNlIGlmKCIkcmVmIj09PW4pe3ZhciBpPWEoZVtuXSk7aSYmdm9pZCAwPT09dGhpcy5zY2hlbWFzW2ldJiZ2b2lkIDA9PT10aGlzLm1pc3NpbmdNYXBbaV0mJih0aGlzLm1pc3NpbmdNYXBbaV09aSl9fX0sZC5wcm90b3R5cGUuYWRkU2NoZW1hPWZ1bmN0aW9uKGUsdCl7aWYoInN0cmluZyIhPXR5cGVvZiBlfHwidW5kZWZpbmVkIj09dHlwZW9mIHQpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8InN0cmluZyIhPXR5cGVvZiBlLmlkKXJldHVybjt0PWUsZT10LmlkfWU9PT1hKGUpKyIjIiYmKGU9YShlKSksdGhpcy5zY2hlbWFzW2VdPXQsZGVsZXRlIHRoaXMubWlzc2luZ01hcFtlXSxzKHQsZSksdGhpcy5zZWFyY2hTY2hlbWFzKHQsZSl9LGQucHJvdG90eXBlLmdldFNjaGVtYU1hcD1mdW5jdGlvbigpe3ZhciBlPXt9O2Zvcih2YXIgdCBpbiB0aGlzLnNjaGVtYXMpZVt0XT10aGlzLnNjaGVtYXNbdF07cmV0dXJuIGV9LGQucHJvdG90eXBlLmdldFNjaGVtYVVyaXM9ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciByIGluIHRoaXMuc2NoZW1hcyllJiYhZS50ZXN0KHIpfHx0LnB1c2gocik7cmV0dXJuIHR9LGQucHJvdG90eXBlLmdldE1pc3NpbmdVcmlzPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiB0aGlzLm1pc3NpbmdNYXApZSYmIWUudGVzdChyKXx8dC5wdXNoKHIpO3JldHVybiB0fSxkLnByb3RvdHlwZS5kcm9wU2NoZW1hcz1mdW5jdGlvbigpe3RoaXMuc2NoZW1hcz17fSx0aGlzLnJlc2V0KCl9LGQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5taXNzaW5nPVtdLHRoaXMubWlzc2luZ01hcD17fSx0aGlzLmVycm9ycz1bXX0sZC5wcm90b3R5cGUudmFsaWRhdGVBbGw9ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbztpZih0PXRoaXMucmVzb2x2ZVJlZnModCksIXQpcmV0dXJuIG51bGw7aWYodCBpbnN0YW5jZW9mIHUpcmV0dXJuIHRoaXMuZXJyb3JzLnB1c2godCksdDt2YXIgYSxzPXRoaXMuZXJyb3JzLmxlbmd0aCxjPW51bGwsbD1udWxsO2lmKHRoaXMuY2hlY2tSZWN1cnNpdmUmJmUmJiJvYmplY3QiPT10eXBlb2YgZSl7aWYobz0hdGhpcy5zY2FubmVkLmxlbmd0aCxlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pe3ZhciBmPWVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XS5pbmRleE9mKHQpO2lmKC0xIT09ZilyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuY29uY2F0KGVbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XVtmXSksbnVsbH1pZihPYmplY3QuaXNGcm96ZW4oZSkmJihhPXRoaXMuc2Nhbm5lZEZyb3plbi5pbmRleE9mKGUpLC0xIT09YSkpe3ZhciBwPXRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbYV0uaW5kZXhPZih0KTtpZigtMSE9PXApcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLmNvbmNhdCh0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW2FdW3BdKSxudWxsfWlmKHRoaXMuc2Nhbm5lZC5wdXNoKGUpLE9iamVjdC5pc0Zyb3plbihlKSktMT09PWEmJihhPXRoaXMuc2Nhbm5lZEZyb3plbi5sZW5ndGgsdGhpcy5zY2FubmVkRnJvemVuLnB1c2goZSksdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcy5wdXNoKFtdKSksYz10aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW2FdLmxlbmd0aCx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW2FdW2NdPXQsdGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9yc1thXVtjXT1bXTtlbHNle2lmKCFlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pdHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHRoaXMudmFsaWRhdGVkU2NoZW1hc0tleSx7dmFsdWU6W10sY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5LHt2YWx1ZTpbXSxjb25maWd1cmFibGU6ITB9KX1jYXRjaChoKXtlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV09W10sZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldPVtdfWw9ZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldLmxlbmd0aCxlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV1bbF09dCxlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV1bbF09W119fXZhciBkPXRoaXMuZXJyb3JzLmxlbmd0aCx5PXRoaXMudmFsaWRhdGVCYXNpYyhlLHQsaSl8fHRoaXMudmFsaWRhdGVOdW1lcmljKGUsdCxpKXx8dGhpcy52YWxpZGF0ZVN0cmluZyhlLHQsaSl8fHRoaXMudmFsaWRhdGVBcnJheShlLHQsaSl8fHRoaXMudmFsaWRhdGVPYmplY3QoZSx0LGkpfHx0aGlzLnZhbGlkYXRlQ29tYmluYXRpb25zKGUsdCxpKXx8dGhpcy52YWxpZGF0ZUh5cGVybWVkaWEoZSx0LGkpfHx0aGlzLnZhbGlkYXRlRm9ybWF0KGUsdCxpKXx8dGhpcy52YWxpZGF0ZURlZmluZWRLZXl3b3JkcyhlLHQsaSl8fG51bGw7aWYobyl7Zm9yKDt0aGlzLnNjYW5uZWQubGVuZ3RoOyl7dmFyIF89dGhpcy5zY2FubmVkLnBvcCgpO2RlbGV0ZSBfW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV19dGhpcy5zY2FubmVkRnJvemVuPVtdLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXM9W119aWYoeXx8ZCE9PXRoaXMuZXJyb3JzLmxlbmd0aClmb3IoO3ImJnIubGVuZ3RofHxuJiZuLmxlbmd0aDspe3ZhciBtPXImJnIubGVuZ3RoPyIiK3IucG9wKCk6bnVsbCxiPW4mJm4ubGVuZ3RoPyIiK24ucG9wKCk6bnVsbDt5JiYoeT15LnByZWZpeFdpdGgobSxiKSksdGhpcy5wcmVmaXhFcnJvcnMoZCxtLGIpfXJldHVybiBudWxsIT09Yz90aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW2FdW2NdPXRoaXMuZXJyb3JzLnNsaWNlKHMpOm51bGwhPT1sJiYoZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW2xdPXRoaXMuZXJyb3JzLnNsaWNlKHMpKSx0aGlzLmhhbmRsZUVycm9yKHkpfSxkLnByb3RvdHlwZS52YWxpZGF0ZUZvcm1hdD1mdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgdC5mb3JtYXR8fCF0aGlzLmZvcm1hdFZhbGlkYXRvcnNbdC5mb3JtYXRdKXJldHVybiBudWxsO3ZhciByPXRoaXMuZm9ybWF0VmFsaWRhdG9yc1t0LmZvcm1hdF0uY2FsbChudWxsLGUsdCk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiByfHwibnVtYmVyIj09dHlwZW9mIHI/dGhpcy5jcmVhdGVFcnJvcihtLkZPUk1BVF9DVVNUT00se21lc3NhZ2U6cn0sIiIsIi9mb3JtYXQiLG51bGwsZSx0KTpyJiYib2JqZWN0Ij09dHlwZW9mIHI/dGhpcy5jcmVhdGVFcnJvcihtLkZPUk1BVF9DVVNUT00se21lc3NhZ2U6ci5tZXNzYWdlfHwiPyJ9LHIuZGF0YVBhdGh8fCIiLHIuc2NoZW1hUGF0aHx8Ii9mb3JtYXQiLG51bGwsZSx0KTpudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZURlZmluZWRLZXl3b3Jkcz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuIGluIHRoaXMuZGVmaW5lZEtleXdvcmRzKWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgdFtuXSlmb3IodmFyIGk9dGhpcy5kZWZpbmVkS2V5d29yZHNbbl0sbz0wO288aS5sZW5ndGg7bysrKXt2YXIgYT1pW29dLHM9YShlLHRbbl0sdCxyKTtpZigic3RyaW5nIj09dHlwZW9mIHN8fCJudW1iZXIiPT10eXBlb2YgcylyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihtLktFWVdPUkRfQ1VTVE9NLHtrZXk6bixtZXNzYWdlOnN9LCIiLCIiLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsbik7aWYocyYmIm9iamVjdCI9PXR5cGVvZiBzKXt2YXIgYz1zLmNvZGU7aWYoInN0cmluZyI9PXR5cGVvZiBjKXtpZighbVtjXSl0aHJvdyBuZXcgRXJyb3IoIlVuZGVmaW5lZCBlcnJvciBjb2RlICh1c2UgZGVmaW5lRXJyb3IpOiAiK2MpO2M9bVtjXX1lbHNlIm51bWJlciIhPXR5cGVvZiBjJiYoYz1tLktFWVdPUkRfQ1VTVE9NKTt2YXIgdT0ib2JqZWN0Ij09dHlwZW9mIHMubWVzc2FnZT9zLm1lc3NhZ2U6e2tleTpuLG1lc3NhZ2U6cy5tZXNzYWdlfHwiPyJ9LGw9cy5zY2hlbWFQYXRofHwiLyIrbi5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKTtyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihjLHUscy5kYXRhUGF0aHx8bnVsbCxsLG51bGwsZSx0KX19cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQmFzaWM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO3JldHVybihuPXRoaXMudmFsaWRhdGVUeXBlKGUsdCxyKSk/bi5wcmVmaXhXaXRoKG51bGwsInR5cGUiKToobj10aGlzLnZhbGlkYXRlRW51bShlLHQscikpP24ucHJlZml4V2l0aChudWxsLCJ0eXBlIik6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVUeXBlPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dC50eXBlKXJldHVybiBudWxsO3ZhciByPXR5cGVvZiBlO251bGw9PT1lP3I9Im51bGwiOkFycmF5LmlzQXJyYXkoZSkmJihyPSJhcnJheSIpO3ZhciBuPXQudHlwZTtBcnJheS5pc0FycmF5KG4pfHwobj1bbl0pO2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXt2YXIgbz1uW2ldO2lmKG89PT1yfHwiaW50ZWdlciI9PT1vJiYibnVtYmVyIj09PXImJmUlMT09PTApcmV0dXJuIG51bGx9cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IobS5JTlZBTElEX1RZUEUse3R5cGU6cixleHBlY3RlZDpuLmpvaW4oIi8iKX0sIiIsIiIsbnVsbCxlLHQpfSxkLnByb3RvdHlwZS52YWxpZGF0ZUVudW09ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10WyJlbnVtIl0pcmV0dXJuIG51bGw7Zm9yKHZhciByPTA7cjx0WyJlbnVtIl0ubGVuZ3RoO3IrKyl7dmFyIGk9dFsiZW51bSJdW3JdO2lmKG4oZSxpKSlyZXR1cm4gbnVsbH1yZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihtLkVOVU1fTUlTTUFUQ0gse3ZhbHVlOiJ1bmRlZmluZWQiIT10eXBlb2YgSlNPTj9KU09OLnN0cmluZ2lmeShlKTplfSwiIiwiIixudWxsLGUsdCl9LGQucHJvdG90eXBlLnZhbGlkYXRlTnVtZXJpYz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVNdWx0aXBsZU9mKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU1pbk1heChlLHQscil8fHRoaXMudmFsaWRhdGVOYU4oZSx0LHIpfHxudWxsfTt2YXIgeT1NYXRoLnBvdygyLC01MSksXz0xLXk7ZC5wcm90b3R5cGUudmFsaWRhdGVNdWx0aXBsZU9mPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5tdWx0aXBsZU9mfHx0LmRpdmlzaWJsZUJ5O2lmKHZvaWQgMD09PXIpcmV0dXJuIG51bGw7aWYoIm51bWJlciI9PXR5cGVvZiBlKXt2YXIgbj1lL3IlMTtpZihuPj15JiZfPm4pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IobS5OVU1CRVJfTVVMVElQTEVfT0Yse3ZhbHVlOmUsbXVsdGlwbGVPZjpyfSwiIiwiIixudWxsLGUsdCl9cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlTWluTWF4PWZ1bmN0aW9uKGUsdCl7aWYoIm51bWJlciIhPXR5cGVvZiBlKXJldHVybiBudWxsO2lmKHZvaWQgMCE9PXQubWluaW11bSl7aWYoZTx0Lm1pbmltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IobS5OVU1CRVJfTUlOSU1VTSx7dmFsdWU6ZSxtaW5pbXVtOnQubWluaW11bX0sIiIsIi9taW5pbXVtIixudWxsLGUsdCk7aWYodC5leGNsdXNpdmVNaW5pbXVtJiZlPT09dC5taW5pbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKG0uTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFLHt2YWx1ZTplLG1pbmltdW06dC5taW5pbXVtfSwiIiwiL2V4Y2x1c2l2ZU1pbmltdW0iLG51bGwsZSx0KX1pZih2b2lkIDAhPT10Lm1heGltdW0pe2lmKGU+dC5tYXhpbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKG0uTlVNQkVSX01BWElNVU0se3ZhbHVlOmUsbWF4aW11bTp0Lm1heGltdW19LCIiLCIvbWF4aW11bSIsbnVsbCxlLHQpO2lmKHQuZXhjbHVzaXZlTWF4aW11bSYmZT09PXQubWF4aW11bSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihtLk5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRSx7dmFsdWU6ZSxtYXhpbXVtOnQubWF4aW11bX0sIiIsIi9leGNsdXNpdmVNYXhpbXVtIixudWxsLGUsdCl9cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlTmFOPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBlP251bGw6aXNOYU4oZSk9PT0hMHx8ZT09PTEvMHx8ZT09PS0oMS8wKT90aGlzLmNyZWF0ZUVycm9yKG0uTlVNQkVSX05PVF9BX05VTUJFUix7dmFsdWU6ZX0sIiIsIi90eXBlIixudWxsLGUsdCk6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVTdHJpbmc9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLnZhbGlkYXRlU3RyaW5nTGVuZ3RoKGUsdCxyKXx8dGhpcy52YWxpZGF0ZVN0cmluZ1BhdHRlcm4oZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZ0xlbmd0aD1mdW5jdGlvbihlLHQpe3JldHVybiJzdHJpbmciIT10eXBlb2YgZT9udWxsOnZvaWQgMCE9PXQubWluTGVuZ3RoJiZlLmxlbmd0aDx0Lm1pbkxlbmd0aD90aGlzLmNyZWF0ZUVycm9yKG0uU1RSSU5HX0xFTkdUSF9TSE9SVCx7bGVuZ3RoOmUubGVuZ3RoLG1pbmltdW06dC5taW5MZW5ndGh9LCIiLCIvbWluTGVuZ3RoIixudWxsLGUsdCk6dm9pZCAwIT09dC5tYXhMZW5ndGgmJmUubGVuZ3RoPnQubWF4TGVuZ3RoP3RoaXMuY3JlYXRlRXJyb3IobS5TVFJJTkdfTEVOR1RIX0xPTkcse2xlbmd0aDplLmxlbmd0aCxtYXhpbXVtOnQubWF4TGVuZ3RofSwiIiwiL21heExlbmd0aCIsbnVsbCxlLHQpOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlU3RyaW5nUGF0dGVybj1mdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8InN0cmluZyIhPXR5cGVvZiB0LnBhdHRlcm4mJiEodC5wYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKSlyZXR1cm4gbnVsbDt2YXIgcjtpZih0LnBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApcj10LnBhdHRlcm47ZWxzZXt2YXIgbixpPSIiLG89dC5wYXR0ZXJuLm1hdGNoKC9eXC8oLispXC8oW2ltZ10qKSQvKTtvPyhuPW9bMV0saT1vWzJdKTpuPXQucGF0dGVybixyPW5ldyBSZWdFeHAobixpKX1yZXR1cm4gci50ZXN0KGUpP251bGw6dGhpcy5jcmVhdGVFcnJvcihtLlNUUklOR19QQVRURVJOLHtwYXR0ZXJuOnQucGF0dGVybn0sIiIsIi9wYXR0ZXJuIixudWxsLGUsdCl9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXk9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP3RoaXMudmFsaWRhdGVBcnJheUxlbmd0aChlLHQscil8fHRoaXMudmFsaWRhdGVBcnJheVVuaXF1ZUl0ZW1zKGUsdCxyKXx8dGhpcy52YWxpZGF0ZUFycmF5SXRlbXMoZSx0LHIpfHxudWxsOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlMZW5ndGg9ZnVuY3Rpb24oZSx0KXt2YXIgcjtyZXR1cm4gdm9pZCAwIT09dC5taW5JdGVtcyYmZS5sZW5ndGg8dC5taW5JdGVtcyYmKHI9dGhpcy5jcmVhdGVFcnJvcihtLkFSUkFZX0xFTkdUSF9TSE9SVCx7bGVuZ3RoOmUubGVuZ3RoLG1pbmltdW06dC5taW5JdGVtc30sIiIsIi9taW5JdGVtcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6dm9pZCAwIT09dC5tYXhJdGVtcyYmZS5sZW5ndGg+dC5tYXhJdGVtcyYmKHI9dGhpcy5jcmVhdGVFcnJvcihtLkFSUkFZX0xFTkdUSF9MT05HLHtsZW5ndGg6ZS5sZW5ndGgsbWF4aW11bTp0Lm1heEl0ZW1zfSwiIiwiL21heEl0ZW1zIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjpudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5VW5pcXVlSXRlbXM9ZnVuY3Rpb24oZSx0KXtpZih0LnVuaXF1ZUl0ZW1zKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWZvcih2YXIgaT1yKzE7aTxlLmxlbmd0aDtpKyspaWYobihlW3JdLGVbaV0pKXt2YXIgbz10aGlzLmNyZWF0ZUVycm9yKG0uQVJSQVlfVU5JUVVFLHttYXRjaDE6cixtYXRjaDI6aX0sIiIsIi91bmlxdWVJdGVtcyIsbnVsbCxlLHQpO2lmKHRoaXMuaGFuZGxlRXJyb3IobykpcmV0dXJuIG99cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlJdGVtcz1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5pdGVtcylyZXR1cm4gbnVsbDt2YXIgbixpO2lmKEFycmF5LmlzQXJyYXkodC5pdGVtcykpe2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspaWYoaTx0Lml0ZW1zLmxlbmd0aCl7aWYobj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5pdGVtc1tpXSxbaV0sWyJpdGVtcyIsaV0scisiLyIraSkpcmV0dXJuIG59ZWxzZSBpZih2b2lkIDAhPT10LmFkZGl0aW9uYWxJdGVtcylpZigiYm9vbGVhbiI9PXR5cGVvZiB0LmFkZGl0aW9uYWxJdGVtcyl7aWYoIXQuYWRkaXRpb25hbEl0ZW1zJiYobj10aGlzLmNyZWF0ZUVycm9yKG0uQVJSQVlfQURESVRJT05BTF9JVEVNUyx7fSwiLyIraSwiL2FkZGl0aW9uYWxJdGVtcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5hZGRpdGlvbmFsSXRlbXMsW2ldLFsiYWRkaXRpb25hbEl0ZW1zIl0scisiLyIraSkpcmV0dXJuIG59ZWxzZSBmb3IoaT0wO2k8ZS5sZW5ndGg7aSsrKWlmKG49dGhpcy52YWxpZGF0ZUFsbChlW2ldLHQuaXRlbXMsW2ldLFsiaXRlbXMiXSxyKyIvIitpKSlyZXR1cm4gbjtyZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3Q9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWV8fEFycmF5LmlzQXJyYXkoZSk/bnVsbDp0aGlzLnZhbGlkYXRlT2JqZWN0TWluTWF4UHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3RSZXF1aXJlZFByb3BlcnRpZXMoZSx0LHIpfHx0aGlzLnZhbGlkYXRlT2JqZWN0UHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXMoZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdE1pbk1heFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXt2YXIgcixuPU9iamVjdC5rZXlzKGUpO3JldHVybiB2b2lkIDAhPT10Lm1pblByb3BlcnRpZXMmJm4ubGVuZ3RoPHQubWluUHJvcGVydGllcyYmKHI9dGhpcy5jcmVhdGVFcnJvcihtLk9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU0se3Byb3BlcnR5Q291bnQ6bi5sZW5ndGgsbWluaW11bTp0Lm1pblByb3BlcnRpZXN9LCIiLCIvbWluUHJvcGVydGllcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6dm9pZCAwIT09dC5tYXhQcm9wZXJ0aWVzJiZuLmxlbmd0aD50Lm1heFByb3BlcnRpZXMmJihyPXRoaXMuY3JlYXRlRXJyb3IobS5PQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNLHtwcm9wZXJ0eUNvdW50Om4ubGVuZ3RoLG1heGltdW06dC5tYXhQcm9wZXJ0aWVzfSwiIiwiL21heFByb3BlcnRpZXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0UmVxdWlyZWRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09dC5yZXF1aXJlZClmb3IodmFyIHI9MDtyPHQucmVxdWlyZWQubGVuZ3RoO3IrKyl7dmFyIG49dC5yZXF1aXJlZFtyXTtpZih2b2lkIDA9PT1lW25dKXt2YXIgaT10aGlzLmNyZWF0ZUVycm9yKG0uT0JKRUNUX1JFUVVJUkVELHtrZXk6bn0sIiIsIi9yZXF1aXJlZC8iK3IsbnVsbCxlLHQpO2lmKHRoaXMuaGFuZGxlRXJyb3IoaSkpcmV0dXJuIGl9fXJldHVybiBudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO2Zvcih2YXIgaSBpbiBlKXt2YXIgbz1yKyIvIitpLnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpLGE9ITE7aWYodm9pZCAwIT09dC5wcm9wZXJ0aWVzJiZ2b2lkIDAhPT10LnByb3BlcnRpZXNbaV0mJihhPSEwLG49dGhpcy52YWxpZGF0ZUFsbChlW2ldLHQucHJvcGVydGllc1tpXSxbaV0sWyJwcm9wZXJ0aWVzIixpXSxvKSkpcmV0dXJuIG47aWYodm9pZCAwIT09dC5wYXR0ZXJuUHJvcGVydGllcylmb3IodmFyIHMgaW4gdC5wYXR0ZXJuUHJvcGVydGllcyl7dmFyIGM9bmV3IFJlZ0V4cChzKTtpZihjLnRlc3QoaSkmJihhPSEwLG49dGhpcy52YWxpZGF0ZUFsbChlW2ldLHQucGF0dGVyblByb3BlcnRpZXNbc10sW2ldLFsicGF0dGVyblByb3BlcnRpZXMiLHNdLG8pKSlyZXR1cm4gbn1pZihhKXRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW29dPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW29dKTtlbHNlIGlmKHZvaWQgMCE9PXQuYWRkaXRpb25hbFByb3BlcnRpZXMpe2lmKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW29dPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW29dKSwiYm9vbGVhbiI9PXR5cGVvZiB0LmFkZGl0aW9uYWxQcm9wZXJ0aWVzKXtpZighdC5hZGRpdGlvbmFsUHJvcGVydGllcyYmKG49dGhpcy5jcmVhdGVFcnJvcihtLk9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVMse2tleTppfSwiIiwiL2FkZGl0aW9uYWxQcm9wZXJ0aWVzIixudWxsLGUsdCkucHJlZml4V2l0aChpLG51bGwpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5hZGRpdGlvbmFsUHJvcGVydGllcyxbaV0sWyJhZGRpdGlvbmFsUHJvcGVydGllcyJdLG8pKXJldHVybiBufWVsc2UgdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYhdGhpcy5rbm93blByb3BlcnR5UGF0aHNbb10mJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW29dPSEwKX1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO2lmKHZvaWQgMCE9PXQuZGVwZW5kZW5jaWVzKWZvcih2YXIgaSBpbiB0LmRlcGVuZGVuY2llcylpZih2b2lkIDAhPT1lW2ldKXt2YXIgbz10LmRlcGVuZGVuY2llc1tpXTtpZigic3RyaW5nIj09dHlwZW9mIG8pe2lmKHZvaWQgMD09PWVbb10mJihuPXRoaXMuY3JlYXRlRXJyb3IobS5PQkpFQ1RfREVQRU5ERU5DWV9LRVkse2tleTppLG1pc3Npbmc6b30sIiIsIiIsbnVsbCxlLHQpLnByZWZpeFdpdGgobnVsbCxpKS5wcmVmaXhXaXRoKG51bGwsImRlcGVuZGVuY2llcyIpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYoQXJyYXkuaXNBcnJheShvKSlmb3IodmFyIGE9MDthPG8ubGVuZ3RoO2ErKyl7dmFyIHM9b1thXTtpZih2b2lkIDA9PT1lW3NdJiYobj10aGlzLmNyZWF0ZUVycm9yKG0uT0JKRUNUX0RFUEVOREVOQ1lfS0VZLHtrZXk6aSxtaXNzaW5nOnN9LCIiLCIvIithLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsaSkucHJlZml4V2l0aChudWxsLCJkZXBlbmRlbmNpZXMiKSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKG49dGhpcy52YWxpZGF0ZUFsbChlLG8sW10sWyJkZXBlbmRlbmNpZXMiLGldLHIpKXJldHVybiBufXJldHVybiBudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUNvbWJpbmF0aW9ucz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVBbGxPZihlLHQscil8fHRoaXMudmFsaWRhdGVBbnlPZihlLHQscil8fHRoaXMudmFsaWRhdGVPbmVPZihlLHQscil8fHRoaXMudmFsaWRhdGVOb3QoZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUFsbE9mPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10LmFsbE9mKXJldHVybiBudWxsO2Zvcih2YXIgbixpPTA7aTx0LmFsbE9mLmxlbmd0aDtpKyspe3ZhciBvPXQuYWxsT2ZbaV07aWYobj10aGlzLnZhbGlkYXRlQWxsKGUsbyxbXSxbImFsbE9mIixpXSxyKSlyZXR1cm4gbn1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVBbnlPZj1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5hbnlPZilyZXR1cm4gbnVsbDt2YXIgbixpLG89W10sYT10aGlzLmVycm9ycy5sZW5ndGg7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYobj10aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzLGk9dGhpcy5rbm93blByb3BlcnR5UGF0aHMpO2Zvcih2YXIgcz0hMCxjPTA7Yzx0LmFueU9mLmxlbmd0aDtjKyspe3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciB1PXQuYW55T2ZbY10sbD10aGlzLmVycm9ycy5sZW5ndGgsZj10aGlzLnZhbGlkYXRlQWxsKGUsdSxbXSxbImFueU9mIixjXSxyKTtpZihudWxsPT09ZiYmbD09PXRoaXMuZXJyb3JzLmxlbmd0aCl7aWYodGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxhKSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpe2Zvcih2YXIgcCBpbiB0aGlzLmtub3duUHJvcGVydHlQYXRocylpW3BdPSEwLGRlbGV0ZSBuW3BdO2Zvcih2YXIgaCBpbiB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzKWlbaF18fChuW2hdPSEwKTtzPSExO2NvbnRpbnVlfXJldHVybiBudWxsfWYmJm8ucHVzaChmLnByZWZpeFdpdGgobnVsbCwiIitjKS5wcmVmaXhXaXRoKG51bGwsImFueU9mIikpfXJldHVybiB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9aSkscz8obz1vLmNvbmNhdCh0aGlzLmVycm9ycy5zbGljZShhKSksdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxhKSx0aGlzLmNyZWF0ZUVycm9yKG0uQU5ZX09GX01JU1NJTkcse30sIiIsIi9hbnlPZiIsbyxlLHQpKTp2b2lkIDB9LGQucHJvdG90eXBlLnZhbGlkYXRlT25lT2Y9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQub25lT2YpcmV0dXJuIG51bGw7dmFyIG4saSxvPW51bGwsYT1bXSxzPXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsaT10aGlzLmtub3duUHJvcGVydHlQYXRocyk7Zm9yKHZhciBjPTA7Yzx0Lm9uZU9mLmxlbmd0aDtjKyspe3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciB1PXQub25lT2ZbY10sbD10aGlzLmVycm9ycy5sZW5ndGgsZj10aGlzLnZhbGlkYXRlQWxsKGUsdSxbXSxbIm9uZU9mIixjXSxyKTtpZihudWxsPT09ZiYmbD09PXRoaXMuZXJyb3JzLmxlbmd0aCl7aWYobnVsbCE9PW8pcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAscyksdGhpcy5jcmVhdGVFcnJvcihtLk9ORV9PRl9NVUxUSVBMRSx7aW5kZXgxOm8saW5kZXgyOmN9LCIiLCIvb25lT2YiLG51bGwsZSx0KTtpZihvPWMsdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKXtmb3IodmFyIHAgaW4gdGhpcy5rbm93blByb3BlcnR5UGF0aHMpaVtwXT0hMCxkZWxldGUgbltwXTtmb3IodmFyIGggaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocylpW2hdfHwobltoXT0hMCl9fWVsc2UgZiYmYS5wdXNoKGYpfXJldHVybiB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9aSksbnVsbD09PW8/KGE9YS5jb25jYXQodGhpcy5lcnJvcnMuc2xpY2UocykpLHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAscyksdGhpcy5jcmVhdGVFcnJvcihtLk9ORV9PRl9NSVNTSU5HLHt9LCIiLCIvb25lT2YiLGEsZSx0KSk6KHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAscyksbnVsbCl9LGQucHJvdG90eXBlLnZhbGlkYXRlTm90PWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10Lm5vdClyZXR1cm4gbnVsbDt2YXIgbixpLG89dGhpcy5lcnJvcnMubGVuZ3RoO3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKG49dGhpcy51bmtub3duUHJvcGVydHlQYXRocyxpPXRoaXMua25vd25Qcm9wZXJ0eVBhdGhzLHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBhPXRoaXMudmFsaWRhdGVBbGwoZSx0Lm5vdCxudWxsLG51bGwscikscz10aGlzLmVycm9ycy5zbGljZShvKTtyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxvKSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9aSksbnVsbD09PWEmJjA9PT1zLmxlbmd0aD90aGlzLmNyZWF0ZUVycm9yKG0uTk9UX1BBU1NFRCx7fSwiIiwiL25vdCIsbnVsbCxlLHQpOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlSHlwZXJtZWRpYT1mdW5jdGlvbihlLHQsbil7aWYoIXQubGlua3MpcmV0dXJuIG51bGw7Zm9yKHZhciBpLG89MDtvPHQubGlua3MubGVuZ3RoO28rKyl7dmFyIGE9dC5saW5rc1tvXTtpZigiZGVzY3JpYmVkYnkiPT09YS5yZWwpe2Zvcih2YXIgcz1uZXcgcihhLmhyZWYpLGM9ITAsdT0wO3U8cy52YXJOYW1lcy5sZW5ndGg7dSsrKWlmKCEocy52YXJOYW1lc1t1XWluIGUpKXtjPSExO2JyZWFrfWlmKGMpe3ZhciBsPXMuZmlsbEZyb21PYmplY3QoZSksZj17JHJlZjpsfTtpZihpPXRoaXMudmFsaWRhdGVBbGwoZSxmLFtdLFsibGlua3MiLG9dLG4pKXJldHVybiBpfX19fTt2YXIgbT17SU5WQUxJRF9UWVBFOjAsRU5VTV9NSVNNQVRDSDoxLEFOWV9PRl9NSVNTSU5HOjEwLE9ORV9PRl9NSVNTSU5HOjExLE9ORV9PRl9NVUxUSVBMRToxMixOT1RfUEFTU0VEOjEzLE5VTUJFUl9NVUxUSVBMRV9PRjoxMDAsTlVNQkVSX01JTklNVU06MTAxLE5VTUJFUl9NSU5JTVVNX0VYQ0xVU0lWRToxMDIsTlVNQkVSX01BWElNVU06MTAzLE5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRToxMDQsTlVNQkVSX05PVF9BX05VTUJFUjoxMDUsU1RSSU5HX0xFTkdUSF9TSE9SVDoyMDAsU1RSSU5HX0xFTkdUSF9MT05HOjIwMSxTVFJJTkdfUEFUVEVSTjoyMDIsT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTTozMDAsT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTTozMDEsT0JKRUNUX1JFUVVJUkVEOjMwMixPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOjMwMyxPQkpFQ1RfREVQRU5ERU5DWV9LRVk6MzA0LEFSUkFZX0xFTkdUSF9TSE9SVDo0MDAsQVJSQVlfTEVOR1RIX0xPTkc6NDAxLEFSUkFZX1VOSVFVRTo0MDIsQVJSQVlfQURESVRJT05BTF9JVEVNUzo0MDMsRk9STUFUX0NVU1RPTTo1MDAsS0VZV09SRF9DVVNUT006NTAxLENJUkNVTEFSX1JFRkVSRU5DRTo2MDAsVU5LTk9XTl9QUk9QRVJUWToxZTN9LGI9e307Zm9yKHZhciB2IGluIG0pYlttW3ZdXT12O3ZhciBnPXtJTlZBTElEX1RZUEU6IkludmFsaWQgdHlwZToge3R5cGV9IChleHBlY3RlZCB7ZXhwZWN0ZWR9KSIsRU5VTV9NSVNNQVRDSDoiTm8gZW51bSBtYXRjaCBmb3I6IHt2YWx1ZX0iLEFOWV9PRl9NSVNTSU5HOidEYXRhIGRvZXMgbm90IG1hdGNoIGFueSBzY2hlbWFzIGZyb20gImFueU9mIicsT05FX09GX01JU1NJTkc6J0RhdGEgZG9lcyBub3QgbWF0Y2ggYW55IHNjaGVtYXMgZnJvbSAib25lT2YiJyxPTkVfT0ZfTVVMVElQTEU6J0RhdGEgaXMgdmFsaWQgYWdhaW5zdCBtb3JlIHRoYW4gb25lIHNjaGVtYSBmcm9tICJvbmVPZiI6IGluZGljZXMge2luZGV4MX0gYW5kIHtpbmRleDJ9JyxOT1RfUEFTU0VEOidEYXRhIG1hdGNoZXMgc2NoZW1hIGZyb20gIm5vdCInLE5VTUJFUl9NVUxUSVBMRV9PRjoiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSBtdWx0aXBsZSBvZiB7bXVsdGlwbGVPZn0iLE5VTUJFUl9NSU5JTVVNOiJWYWx1ZSB7dmFsdWV9IGlzIGxlc3MgdGhhbiBtaW5pbXVtIHttaW5pbXVtfSIsTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFOiJWYWx1ZSB7dmFsdWV9IGlzIGVxdWFsIHRvIGV4Y2x1c2l2ZSBtaW5pbXVtIHttaW5pbXVtfSIsTlVNQkVSX01BWElNVU06IlZhbHVlIHt2YWx1ZX0gaXMgZ3JlYXRlciB0aGFuIG1heGltdW0ge21heGltdW19IixOVU1CRVJfTUFYSU1VTV9FWENMVVNJVkU6IlZhbHVlIHt2YWx1ZX0gaXMgZXF1YWwgdG8gZXhjbHVzaXZlIG1heGltdW0ge21heGltdW19IixOVU1CRVJfTk9UX0FfTlVNQkVSOiJWYWx1ZSB7dmFsdWV9IGlzIG5vdCBhIHZhbGlkIG51bWJlciIsU1RSSU5HX0xFTkdUSF9TSE9SVDoiU3RyaW5nIGlzIHRvbyBzaG9ydCAoe2xlbmd0aH0gY2hhcnMpLCBtaW5pbXVtIHttaW5pbXVtfSIsU1RSSU5HX0xFTkdUSF9MT05HOiJTdHJpbmcgaXMgdG9vIGxvbmcgKHtsZW5ndGh9IGNoYXJzKSwgbWF4aW11bSB7bWF4aW11bX0iLFNUUklOR19QQVRURVJOOiJTdHJpbmcgZG9lcyBub3QgbWF0Y2ggcGF0dGVybjoge3BhdHRlcm59IixPQkpFQ1RfUFJPUEVSVElFU19NSU5JTVVNOiJUb28gZmV3IHByb3BlcnRpZXMgZGVmaW5lZCAoe3Byb3BlcnR5Q291bnR9KSwgbWluaW11bSB7bWluaW11bX0iLE9CSkVDVF9QUk9QRVJUSUVTX01BWElNVU06IlRvbyBtYW55IHByb3BlcnRpZXMgZGVmaW5lZCAoe3Byb3BlcnR5Q291bnR9KSwgbWF4aW11bSB7bWF4aW11bX0iLE9CSkVDVF9SRVFVSVJFRDoiTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eToge2tleX0iLE9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVM6IkFkZGl0aW9uYWwgcHJvcGVydGllcyBub3QgYWxsb3dlZCIsT0JKRUNUX0RFUEVOREVOQ1lfS0VZOiJEZXBlbmRlbmN5IGZhaWxlZCAtIGtleSBtdXN0IGV4aXN0OiB7bWlzc2luZ30gKGR1ZSB0byBrZXk6IHtrZXl9KSIsQVJSQVlfTEVOR1RIX1NIT1JUOiJBcnJheSBpcyB0b28gc2hvcnQgKHtsZW5ndGh9KSwgbWluaW11bSB7bWluaW11bX0iLEFSUkFZX0xFTkdUSF9MT05HOiJBcnJheSBpcyB0b28gbG9uZyAoe2xlbmd0aH0pLCBtYXhpbXVtIHttYXhpbXVtfSIsQVJSQVlfVU5JUVVFOiJBcnJheSBpdGVtcyBhcmUgbm90IHVuaXF1ZSAoaW5kaWNlcyB7bWF0Y2gxfSBhbmQge21hdGNoMn0pIixBUlJBWV9BRERJVElPTkFMX0lURU1TOiJBZGRpdGlvbmFsIGl0ZW1zIG5vdCBhbGxvd2VkIixGT1JNQVRfQ1VTVE9NOiJGb3JtYXQgdmFsaWRhdGlvbiBmYWlsZWQgKHttZXNzYWdlfSkiLEtFWVdPUkRfQ1VTVE9NOiJLZXl3b3JkIGZhaWxlZDoge2tleX0gKHttZXNzYWdlfSkiLENJUkNVTEFSX1JFRkVSRU5DRToiQ2lyY3VsYXIgJHJlZnM6IHt1cmxzfSIsVU5LTk9XTl9QUk9QRVJUWToiVW5rbm93biBwcm9wZXJ0eSAobm90IGluIHNjaGVtYSkifTt1LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksdS5wcm90b3R5cGUuY29uc3RydWN0b3I9dSx1LnByb3RvdHlwZS5uYW1lPSJWYWxpZGF0aW9uRXJyb3IiLHUucHJvdG90eXBlLnByZWZpeFdpdGg9ZnVuY3Rpb24oZSx0KXtpZihudWxsIT09ZSYmKGU9ZS5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKSx0aGlzLmRhdGFQYXRoPSIvIitlK3RoaXMuZGF0YVBhdGgpLG51bGwhPT10JiYodD10LnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpLHRoaXMuc2NoZW1hUGF0aD0iLyIrdCt0aGlzLnNjaGVtYVBhdGgpLG51bGwhPT10aGlzLnN1YkVycm9ycylmb3IodmFyIHI9MDtyPHRoaXMuc3ViRXJyb3JzLmxlbmd0aDtyKyspdGhpcy5zdWJFcnJvcnNbcl0ucHJlZml4V2l0aChlLHQpO3JldHVybiB0aGlzfTt2YXIgaj17fSxPPWYoKTtyZXR1cm4gTy5hZGRMYW5ndWFnZSgiZW4tZ2IiLGcpLE8udHY0PU8sT30pfSx7fV0sMTA3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWUoIi4vcnVudGltZS1jYXRhbG9ndWUvUnVudGltZUNhdGFsb2d1ZS1Mb2NhbCIpLG89bihpKTtyWyJkZWZhdWx0Il09b1siZGVmYXVsdCJdLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9ydW50aW1lLWNhdGFsb2d1ZS9SdW50aW1lQ2F0YWxvZ3VlLUxvY2FsIjoxMTcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTV9XSwxMDg6W2Z1bmN0aW9uKGUsdCxyKXsKInVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxhLHMsYyl7aSh0aGlzLGUpLHRoaXMuX2d1aWQ9dCx0aGlzLl90eXBlPXIsdGhpcy5fdmVyc2lvbj1uLHRoaXMuX29iamVjdE5hbWU9byx0aGlzLl9kZXNjcmlwdGlvbj1hLHRoaXMuX2xhbmd1YWdlPXMsdGhpcy5fc291cmNlUGFja2FnZVVSTD1jLHRoaXMuX3NpZ25hdHVyZT1udWxsLHRoaXMuX3NvdXJjZVBhY2thZ2U9bnVsbH1yZXR1cm4gbihlLFt7a2V5OiJndWlkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ3VpZH0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9ndWlkPWUpfX0se2tleToidHlwZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fdHlwZT1lKX19LHtrZXk6InZlcnNpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92ZXJzaW9ufSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3ZlcnNpb249ZSl9fSx7a2V5OiJvYmplY3ROYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JqZWN0TmFtZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9vYmplY3ROYW1lPWUpfX0se2tleToiZGVzY3JpcHRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXNjcmlwdGlvbn0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9kZXNjcmlwdGlvbj1lKX19LHtrZXk6Imxhbmd1YWdlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGFuZ3VhZ2V9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fbGFuZ3VhZ2U9ZSl9fSx7a2V5OiJzaWduYXR1cmUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaWduYXR1cmV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc2lnbmF0dXJlPWUpfX0se2tleToic291cmNlUGFja2FnZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZVBhY2thZ2V9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc291cmNlUGFja2FnZT1lKX19LHtrZXk6InNvdXJjZVBhY2thZ2VVUkwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VQYWNrYWdlVVJMfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NvdXJjZVBhY2thZ2VVUkw9ZSl9fV0pLGV9KCksYT17SFlQRVJUWToiaHlwZXJ0eSIsUFJPVE9TVFVCOiJwcm90b3N0dWIiLEhZUEVSVFlfUlVOVElNRToiaHlwZXJ0eV9ydW50aW1lIixIWVBFUlRZX0lOVEVSQ0VQVE9SOiJoeXBlcnR5X2luc3BlY3RvciIsSFlQRVJUWV9EQVRBX09CSkVDVDoiaHlwZXJ0eV9kYXRhX29iamVjdCIsUE9MSUNZX0VORk9SQ0VSOiJwb2xpY3lfZW5mb3JjZXIiLERBVEFfU0NIRU1BOiJkYXRhX3NjaGVtYSJ9O3IuQ2F0YWxvZ3VlT2JqZWN0VHlwZT1hO3ZhciBzPXtKQVZBU0NSSVBUX0VDTUE2OiJqYXZhc2NyaXB0X2VjbWE2IixKQVZBU0NSSVBUX0VDTUE1OiJqYXZhc2NyaXB0X2VjbWE1IixKU09OX1NDSEVNQV9WNDoianNvbl9zY2hlbWFfdjQiLFBZVEhPTjoicHl0aG9uIixUWVBFU0NSSVBUOiJ0eXBlc2NyaXB0In07ci5EYXRhT2JqZWN0U291cmNlTGFuZ3VhZ2U9cyxyWyJkZWZhdWx0Il09b30seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTF9XSwxMDk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYz1lKCIuLi9yZVRISU5LT2JqZWN0L1JldGhpbmtPYmplY3QiKSx1PXMoYyksbD1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSxmPXMobCkscD1lKCIuL1NvdXJjZVBhY2thZ2UiKSxoPXMocCksZD1lKCIuL0h5cGVydHlEZXNjcmlwdG9yIikseT1zKGQpLF89ZSgiLi9Qcm90b2NvbFN0dWJEZXNjcmlwdG9yIiksbT1zKF8pLGI9ZSgiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiKSx2PXMoYiksZz1lKCIuL1BvbGljeUVuZm9yY2VyRGVzY3JpcHRvciIpLGo9cyhnKSxPPWUoIi4vRGF0YU9iamVjdFNjaGVtYSIpLEU9cyhPKSxQPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyKXthKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscil9cmV0dXJuIGkodCxlKSxvKHQsW3trZXk6ImNyZWF0ZUNhdGFsb2d1ZURhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSxvLGEpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIG98fCJ1bmRlZmluZWQiPT10eXBlb2YgYSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IGZbImRlZmF1bHQiXShlLHQscixuLGksbyxhKX19LHtrZXk6ImNyZWF0ZUh5cGVydHlEZXNjcmlwdG9yT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLGksbyxhLHMpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIG98fCJ1bmRlZmluZWQiPT10eXBlb2YgYXx8InVuZGVmaW5lZCI9PXR5cGVvZiBzKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgeVsiZGVmYXVsdCJdKGUsbC5DYXRhbG9ndWVPYmplY3RUeXBlLkhZUEVSVFksdCxyLG4saSxvLGEscyl9fSx7a2V5OiJjcmVhdGVQcm90b1N0dWJEZXNjcmlwdG9yT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLGksbyxhLHMsYyl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBlfHwidW5kZWZpbmVkIj09dHlwZW9mIHR8fCJ1bmRlZmluZWQiPT10eXBlb2Ygcnx8InVuZGVmaW5lZCI9PXR5cGVvZiBufHwidW5kZWZpbmVkIj09dHlwZW9mIGl8fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBhfHwidW5kZWZpbmVkIj09dHlwZW9mIHN8fCJ1bmRlZmluZWQiPT10eXBlb2YgYyl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IG1bImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5QUk9UT1NUVUIsdCxyLG4saSxvLGEscyxjKX19LHtrZXk6ImNyZWF0ZUh5cGVydHlSdW50aW1lRGVzY3JpcHRvck9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSxzLGMpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIG98fCJ1bmRlZmluZWQiPT10eXBlb2YgYXx8InVuZGVmaW5lZCI9PXR5cGVvZiBzfHwidW5kZWZpbmVkIj09dHlwZW9mIGMpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyB2WyJkZWZhdWx0Il0oZSxsLkNhdGFsb2d1ZU9iamVjdFR5cGUuSFlQRVJUWV9SVU5USU1FLHQscixuLGksbyxhLHMsYyl9fSx7a2V5OiJjcmVhdGVQb2xpY3lFbmZvcmNlckRlc2NyaXB0b3JPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSxvLGEscyl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBlfHwidW5kZWZpbmVkIj09dHlwZW9mIHR8fCJ1bmRlZmluZWQiPT10eXBlb2Ygcnx8InVuZGVmaW5lZCI9PXR5cGVvZiBufHwidW5kZWZpbmVkIj09dHlwZW9mIGl8fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBhfHwidW5kZWZpbmVkIj09dHlwZW9mIHMpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyBqWyJkZWZhdWx0Il0oZSxsLkNhdGFsb2d1ZU9iamVjdFR5cGUuUE9MSUNZX0VORk9SQ0VSLHQscixuLGksbyxhLHMpfX0se2tleToiY3JlYXRlRGF0YU9iamVjdFNjaGVtYSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpLG8pe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIG8pdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyBFWyJkZWZhdWx0Il0oZSxsLkNhdGFsb2d1ZU9iamVjdFR5cGUuREFUQV9TQ0hFTUEsdCxyLG4saSxvKX19LHtrZXk6ImNyZWF0ZVNvdXJjZVBhY2thZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyBoWyJkZWZhdWx0Il0oZSx0KX19XSksdH0odVsiZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09UCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3JlVEhJTktPYmplY3QvUmV0aGlua09iamVjdCI6MTE2LCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiOjEwOCwiLi9EYXRhT2JqZWN0U2NoZW1hIjoxMTAsIi4vSHlwZXJ0eURlc2NyaXB0b3IiOjExMSwiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiOjExMiwiLi9Qb2xpY3lFbmZvcmNlckRlc2NyaXB0b3IiOjExMywiLi9Qcm90b2NvbFN0dWJEZXNjcmlwdG9yIjoxMTQsIi4vU291cmNlUGFja2FnZSI6MTE1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE1fV0sMTEwOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBzPWUoIi4vQ2F0YWxvZ3VlRGF0YU9iamVjdCIpLGM9YShzKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLGksYSxzLGMsdSl7byh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsaSxhLHMsYyx1KX1yZXR1cm4gaSh0LGUpLHR9KGNbImRlZmF1bHQiXSksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLGEscyxjLHUpe28odGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksYSxzLGMsdSl9cmV0dXJuIGkodCxlKSx0fSh1KTtyLk1lc3NhZ2VEYXRhT2JqZWN0U2NoZW1hPWw7dmFyIGY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsaSxhLHMsYyx1LGwpe28odGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksYSxzLGMsdSksdGhpcy5fYWNjZXNzQ29udHJvbFBvbGljeT1sfXJldHVybiBpKHQsZSksdH0odSk7ci5IeXBlcnR5RGF0YU9iamVjdFNjaGVtYT1mO3ZhciBwPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLGksYSxzLGMsdSxsKXtvKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixpLGEscyxjLHUsbCl9cmV0dXJuIGkodCxlKSx0fShmKTtyLkNvbW11bmljYXRpb25EYXRhT2JqZWN0U2NoZW1hPXA7dmFyIGg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsaSxhLHMsYyx1LGwpe28odGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksYSxzLGMsdSxsKX1yZXR1cm4gaSh0LGUpLHR9KGYpO3IuQ29ubmVjdGlvbkRhdGFPYmplY3RTY2hlbWE9aDt2YXIgZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLGEscyxjLHUsbCl7byh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsaSxhLHMsYyx1LGwpfXJldHVybiBpKHQsZSksdH0oZik7ci5JZGVudGlmeURhdGFPYmplY3RTY2hlbWE9ZDt2YXIgeT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLGEscyxjLHUsbCl7byh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsaSxhLHMsYyx1LGwpfXJldHVybiBpKHQsZSksdH0oZik7ci5Db250ZXh0RGF0YU9iamVjdFNjaGVtYT15LHJbImRlZmF1bHQiXT11fSx7Ii4vQ2F0YWxvZ3VlRGF0YU9iamVjdCI6MTA4LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTV9XSwxMTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYz1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSx1PXMoYyksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLG8scyxjLHUsbCxmKXthKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixpLG8scyxjLHUpLHRoaXMuX2NvbmZpZ3VyYXRpb249e30sdGhpcy5fY29uc3RyYWludHM9e30sdGhpcy5fcG9saWNpZXM9e30sdGhpcy5fbWVzc2FnZVNjaGVtYT1udWxsLHRoaXMuX2h5cGVydHlUeXBlPWwsdGhpcy5fZGF0YU9iamVjdHM9Zn1yZXR1cm4gaSh0LGUpLG8odCxbe2tleToiaHlwZXJ0eVR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oeXBlcnR5VHlwZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9oeXBlcnR5VHlwZT1lKX19LHtrZXk6ImRhdGFPYmplY3RzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YU9iamVjdHN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fZGF0YU9iamVjdHM9ZSl9fSx7a2V5OiJjb25maWd1cmF0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uZmlndXJhdGlvbn0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9jb25maWd1cmF0aW9uPWUpfX0se2tleToiY29uc3RyYWludHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25zdHJhaW50c30sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9jb25zdHJhaW50cz1lKX19LHtrZXk6Im1lc3NhZ2VTY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlU2NoZW1hfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX21lc3NhZ2VTY2hlbWE9ZSl9fSx7a2V5OiJwb2xpY2llcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvbGljaWVzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3BvbGljaWVzPWUpfX1dKSx0fSh1WyJkZWZhdWx0Il0pLGY9e307ci5SdW50aW1lSHlwZXJ0eUNhcGFiaWxpdHlUeXBlPWY7dmFyIHA9e0NPTU1VTklDQVRPUjoiY29tbXVuaWNhdG9yIixJREVOVElUWToiaWRlbnRpdHkiLENPTlRFWFQ6ImNvbnRleHQifTtyLkh5cGVydHlUeXBlPXAsclsiZGVmYXVsdCJdPWx9LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IjoxMDgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTV9XSwxMTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYz1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSx1PXMoYyksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLG8scyxjLHUsbCxmLHApe2EodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksbyxzLGMsdSksdGhpcy5fcnVudGltZVR5cGU9bCxmP3RoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXM9Zjp0aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzPXt9LHA/dGhpcy5fcHJvdG9jb2xDYXBhYmlsaXRpZXM9cDp0aGlzLl9wcm90b2NvbENhcGFiaWxpdGllcz17fX1yZXR1cm4gaSh0LGUpLG8odCxbe2tleToicnVudGltZVR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ydW50aW1lVHlwZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9ydW50aW1lVHlwZT1lKX19LHtrZXk6Imh5cGVydHlDYXBhYmlsaXRpZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXM9ZSl9fSx7a2V5OiJwcm90b2NvbENhcGFiaWxpdGllcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fcHJvdG9jb2xDYXBhYmlsaXRpZXM9ZSl9fV0pLHR9KHVbImRlZmF1bHQiXSksZj17QlJPV1NFUjoiYnJvd3NlciIsU1RBTkRBTE9ORToic3RhbmRhbG9uZSIsU0VSVkVSOiJzZXJ2ZXIiLEdBVEVXQVk6ImdhdGV3YXkifTtyLlJ1bnRpbWVUeXBlPWY7dmFyIHA9e01JQzoibWljIixDQU1FUkE6ImNhbWVyYSIsU0VOU09SOiJzZW5zb3IiLFdFQlJUQzoid2VicnRjIixPUlRDOiJvcnRjIn07ci5SdW50aW1lSHlwZXJ0eUNhcGFiaWxpdHlUeXBlPXA7dmFyIGg9e0hUVFA6Imh0dHAiLEhUVFBTOiJodHRwcyIsV1M6IndzIixXU1M6IndzcyIsQ09BUDoiY29hcCIsREFUQUNIQU5FTDoiZGF0YWNoYW5uZWwifTtyLlJ1bnRpbWVQcm90b2NvbENhcGFiaWxpdHlUeXBlPWgsclsiZGVmYXVsdCJdPWx9LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IjoxMDgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTV9XSwxMTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYz1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSx1PXMoYyksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLG8scyxjLHUsbCxmKXthKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixpLG8scyxjLHUpLHRoaXMuX2NvbmZpZ3VyYXRpb249bCx0aGlzLl9wb2xpY2llcz1mfXJldHVybiBpKHQsZSksbyh0LFt7a2V5OiJjb25maWd1cmF0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uZmlndXJhdGlvbn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2NvbmZpZ3VyYXRpb249ZX19LHtrZXk6InBvbGljaWVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9saWNpZXN9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9wb2xpY2llcz1lfX1dKSx0fSh1WyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT1sLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IjoxMDgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTV9XSwxMTQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYz1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSx1PXMoYyksbD1lKCIuL0h5cGVydHlSdW50aW1lRGVzY3JpcHRvciIpLGY9KHMobCksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsaSxvLHMsYyx1LGwsZixwKXthKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixpLG8scyxjLHUpLHRoaXMuX21lc3NhZ2VTY2hlbWFzPWwsZj90aGlzLl9jb25maWd1cmF0aW9uPWY6dGhpcy5fY29uZmlndXJhdGlvbj17fSxwP3RoaXMuX2NvbnN0cmFpbnRzPXA6dGhpcy5fY29uc3RyYWludHM9e319cmV0dXJuIGkodCxlKSxvKHQsW3trZXk6Im1lc3NhZ2VTY2hlbWFzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZVNjaGVtYXN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fbWVzc2FnZVNjaGVtYXM9ZSl9fSx7a2V5OiJjb25zdHJhaW50cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnN0cmFpbnRzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2NvbnN0cmFpbnRzPWUpfX0se2tleToiY29uZmlndXJhdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ3VyYXRpb259LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fY29uZmlndXJhdGlvbj1lKX19XSksdH0odVsiZGVmYXVsdCJdKSk7clsiZGVmYXVsdCJdPWYsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL0NhdGFsb2d1ZURhdGFPYmplY3QiOjEwOCwiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiOjExMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxNX1dLDExNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7aSh0aGlzLGUpLHRoaXMuX3NvdXJjZUNvZGU9cix0aGlzLl9zb3VyY2VDb2RlQ2xhc3NuYW1lPXQsdGhpcy5fZW5jb2Rpbmc9bnVsbCx0aGlzLl9zaWduYXR1cmU9bnVsbH1yZXR1cm4gbihlLFt7a2V5OiJzb3VyY2VDb2RlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlQ29kZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9zb3VyY2VDb2RlPWUpfX0se2tleToic291cmNlQ29kZUNsYXNzbmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZUNvZGVDbGFzc25hbWV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc291cmNlQ29kZUNsYXNzbmFtZT1lKX19LHtrZXk6ImVuY29kaW5nIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5jb2Rpbmd9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fZW5jb2Rpbmc9ZSl9fSx7a2V5OiJzaWduYXR1cmUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaWduYXR1cmV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc2lnbmF0dXJlPWUpfX1dKSxlfSgpO3JbImRlZmF1bHQiXT1vLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjExfV0sMTE2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGE9ZSgidHY0Iikscz1vKGEpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7aSh0aGlzLGUpO3RoaXMudmFsaWRhdGlvbj10LHRoaXMuc2NoZW1hPXJ9cmV0dXJuIG4oZSxbe2tleToidmFsaWRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNjaGVtYT9zWyJkZWZhdWx0Il0udmFsaWRhdGUoZSx0aGlzLnNjaGVtYSk6ITF9fV0pLGV9KCk7ci5SZXRoaW5rT2JqZWN0PWMsclsiZGVmYXVsdCJdPWN9LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE1LHR2NDoxMDZ9XSwxMTc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcz1lKCIuLi91dGlscy91dGlscyIpLGM9ZSgiLi4vY2F0YWxvZ3VlLWZhY3RvcnkvQ2F0YWxvZ3VlRGF0YU9iamVjdEZhY3RvcnkiKSx1PWEoYyksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7aWYoaSh0aGlzLGUpLCF0KXRocm93IEVycm9yKCJUaGUgY2F0YWxvZ3VlIG5lZWRzIHRoZSBydW50aW1lRmFjdG9yeSIpO3ZhciByPXRoaXM7ci5fZmFjdG9yeT1uZXcgdVsiZGVmYXVsdCJdKCExLHZvaWQgMCksci5odHRwUmVxdWVzdD10LmNyZWF0ZUh0dHBSZXF1ZXN0KCl9cmV0dXJuIG4oZSxbe2tleToiZ2V0SHlwZXJ0eVJ1bnRpbWVVUkwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5faHlwZXJ0eVJ1bnRpbWVVUkx9fSx7a2V5OiJnZXRIeXBlcnR5RGVzY3JpcHRvciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8oZnVuY3Rpb24ocixuKXt2YXIgaT0oMCxzLmRpdmlkZVVSTCkoZSksbz1pLnR5cGUsYT1pLmRvbWFpbixjPWkuaWRlbnRpdHk7YXx8KGE9ZSksYyYmKGM9Yy5zdWJzdHJpbmcoYy5sYXN0SW5kZXhPZigiLyIpKzEpKSx0Lmh0dHBSZXF1ZXN0LmdldChvKyI6Ly8iK2ErIi9yZXNvdXJjZXMvZGVzY3JpcHRvcnMvSHlwZXJ0aWVzLmpzb24iKS50aGVuKGZ1bmN0aW9uKGUpe3QuSHlwZXJ0aWVzPUpTT04ucGFyc2UoZSk7dmFyIGk9dC5IeXBlcnRpZXNbY107aWYoaS5lcnJvciluKGkpO2Vsc2V7dmFyIG89dC5fZmFjdG9yeS5jcmVhdGVIeXBlcnR5RGVzY3JpcHRvck9iamVjdChpLmNndWlkLGkudmVyc2lvbixpLm9iamVjdE5hbWUsaS5kZXNjcmlwdGlvbixpLmxhbmd1YWdlLGkuc291cmNlUGFja2FnZVVSTCxpLnR5cGV8fGkuaHlwZXJ0eVR5cGUsaS5kYXRhT2JqZWN0cyk7by5jb25maWd1cmF0aW9uPWkuY29uZmlndXJhdGlvbixvLmNvbnN0cmFpbnRzPWkuY29uc3RyYWludHMsby5tZXNzYWdlU2NoZW1hPWkubWVzc2FnZVNjaGVtYSxvLnBvbGljaWVzPWkucG9saWNpZXMsby5zaWduYXR1cmU9aS5zaWduYXR1cmU7dmFyIGE9aS5zb3VyY2VQYWNrYWdlO2EmJihvLnNvdXJjZVBhY2thZ2U9dC5fY3JlYXRlU291cmNlUGFja2FnZSh0Ll9mYWN0b3J5LGEpKSxjb25zb2xlLmxvZygiaHlwZXJ0eSBoYXMgc291cmNlUGFja2FnZToiLG8pLHIobyl9fSl9KX19LHtrZXk6ImdldFJ1bnRpbWVEZXNjcmlwdG9yIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgbyhmdW5jdGlvbihyLG4pe3ZhciBpPSgwLHMuZGl2aWRlVVJMKShlKSxvPWkudHlwZSxhPWkuZG9tYWluLGM9aS5pZGVudGl0eTtjJiYoYz1jLnN1YnN0cmluZyhjLmxhc3RJbmRleE9mKCIvIikrMSkpLHQuaHR0cFJlcXVlc3QuZ2V0KG8rIjovLyIrYSsiL3Jlc291cmNlcy9kZXNjcmlwdG9ycy9SdW50aW1lcy5qc29uIikudGhlbihmdW5jdGlvbihlKXt0LlJ1bnRpbWVzPUpTT04ucGFyc2UoZSk7dmFyIGk9dC5SdW50aW1lc1tjXTtpZihpLkVSUk9SKW4oaSk7ZWxzZXt0cnl7aS5oeXBlcnR5Q2FwYWJpbGl0aWVzPUpTT04ucGFyc2UoaS5oeXBlcnR5Q2FwYWJpbGl0aWVzKSxpLnByb3RvY29sQ2FwYWJpbGl0aWVzPUpTT04ucGFyc2UoaS5wcm90b2NvbENhcGFiaWxpdGllcyl9Y2F0Y2gobyl7fWNvbnNvbGUubG9nKCJjcmVhdGluZyBydW50aW1lIGRlc2NyaXB0b3IgYmFzZWQgb246ICIsaSk7dmFyIGE9dC5fZmFjdG9yeS5jcmVhdGVIeXBlcnR5UnVudGltZURlc2NyaXB0b3JPYmplY3QoaS5jZ3VpZCxpLnZlcnNpb24saS5vYmplY3ROYW1lLGkuZGVzY3JpcHRpb24saS5sYW5ndWFnZSxpLnNvdXJjZVBhY2thZ2VVUkwsaS50eXBlfHxpLnJ1bnRpbWVUeXBlLGkuaHlwZXJ0eUNhcGFiaWxpdGllcyxpLnByb3RvY29sQ2FwYWJpbGl0aWVzKTtjb25zb2xlLmxvZygiY3JlYXRlZCBydW50aW1lIGRlc2NyaXB0b3Igb2JqZWN0OiIsYSk7dmFyIHM9aS5zb3VyY2VQYWNrYWdlO3MmJihhLnNvdXJjZVBhY2thZ2U9dC5fY3JlYXRlU291cmNlUGFja2FnZSh0Ll9mYWN0b3J5LHMpKSxyKGEpfX0pfSl9fSx7a2V5OiJnZXRJZHBQcm94eURlc2NyaXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvKGZ1bmN0aW9uKHIsbil7dmFyIGk9KDAscy5kaXZpZGVVUkwpKGUpLG89aS50eXBlLGE9aS5kb21haW4sYz1pLmlkZW50aXR5O2MmJihjPWMuc3Vic3RyaW5nKGMubGFzdEluZGV4T2YoIi8iKSsxKSksdC5odHRwUmVxdWVzdC5nZXQobysiOi8vIithKyIvcmVzb3VyY2VzL2Rlc2NyaXB0b3JzL0lEUFByb3h5cy5qc29uIikudGhlbihmdW5jdGlvbihlKXt0LklEUFByb3h5cz1KU09OLnBhcnNlKGUpO3ZhciBpPXQuSURQUHJveHlzW2NdO2lmKGkuRVJST1IpbihpKTtlbHNle3ZhciBvPXQuX2ZhY3RvcnkuY3JlYXRlUHJvdG9TdHViRGVzY3JpcHRvck9iamVjdChpLmNndWlkLGkudmVyc2lvbixpLm9iamVjdE5hbWUsaS5kZXNjcmlwdGlvbixpLmxhbmd1YWdlLGkuc291cmNlUGFja2FnZVVSTCxpLm1lc3NhZ2VTY2hlbWFzLEpTT04uc3RyaW5naWZ5KGkuY29uZmlndXJhdGlvbiksaS5jb25zdHJhaW50cyk7by5zaWduYXR1cmU9aS5zaWduYXR1cmU7dmFyIGE9aS5zb3VyY2VQYWNrYWdlO2EmJihhPXQuX2NyZWF0ZVNvdXJjZVBhY2thZ2UodC5fZmFjdG9yeSxhKSxvLnNvdXJjZVBhY2thZ2U9YSkscihvKX19KX0pfX0se2tleToiZ2V0U3R1YkRlc2NyaXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvKGZ1bmN0aW9uKHIsbil7dmFyIGk9KDAscy5kaXZpZGVVUkwpKGUpLG89aS50eXBlLGE9aS5kb21haW4sYz1pLmlkZW50aXR5LHU9KDAscy5kaXZpZGVVUkwpKHQucnVudGltZVVSTCksbD11LmRvbWFpbjthfHwoYT1lKSxjPWEhPT1sJiZjP2Muc3Vic3RyaW5nKGMubGFzdEluZGV4T2YoIi8iKSsxKToiZGVmYXVsdCIsdC5odHRwUmVxdWVzdC5nZXQobysiOi8vIithKyIvcmVzb3VyY2VzL2Rlc2NyaXB0b3JzL1Byb3RvU3R1YnMuanNvbiIpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGV9KVsiY2F0Y2giXShmdW5jdGlvbihlKXtyZXR1cm4gYz1hLGE9bCxjb25zb2xlLmxvZygiR2V0IGFuIHNwZWNpZmljIHByb3Rvc3R1YiBmb3IgZG9tYWluIixhLCIgc3BlY2lmaWMgZm9yOiAiLGMpLHQuaHR0cFJlcXVlc3QuZ2V0KG8rIjovLyIrYSsiL3Jlc291cmNlcy9kZXNjcmlwdG9ycy9Qcm90b1N0dWJzLmpzb24iKX0pLnRoZW4oZnVuY3Rpb24oZSl7dC5wcm9jZXNzU3R1YkRlc2NyaXB0b3IoZSxjKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KVsiY2F0Y2giXShmdW5jdGlvbihlKXtuKGUpfSl9KVsiY2F0Y2giXShmdW5jdGlvbihlKXtuKGUpfSl9KX19LHtrZXk6InByb2Nlc3NTdHViRGVzY3JpcHRvciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgbyhmdW5jdGlvbihuLGkpe3RyeXtyLlByb3RvU3R1YnM9SlNPTi5wYXJzZShlKX1jYXRjaChvKXtjb25zb2xlLmxvZygiQWxyZWFkeSBwYXJzZWQiKX12YXIgYT1yLlByb3RvU3R1YnNbdF07aWYoYS5lcnJvcilpKGEpO2Vsc2V7Y29uc29sZS5sb2coImNyZWF0aW5nIHN0dWIgZGVzY3JpcHRvciBiYXNlZCBvbjogIixhKTt2YXIgcz1yLl9mYWN0b3J5LmNyZWF0ZVByb3RvU3R1YkRlc2NyaXB0b3JPYmplY3QoYS5jZ3VpZCxhLnZlcnNpb24sYS5vYmplY3ROYW1lLGEuZGVzY3JpcHRpb24sYS5sYW5ndWFnZSxhLnNvdXJjZVBhY2thZ2VVUkwsYS5tZXNzYWdlU2NoZW1hcyxKU09OLnN0cmluZ2lmeShhLmNvbmZpZ3VyYXRpb24pLGEuY29uc3RyYWludHMpLGM9YS5zb3VyY2VQYWNrYWdlO2MmJihjPXIuX2NyZWF0ZVNvdXJjZVBhY2thZ2Uoci5fZmFjdG9yeSxjKSxzLnNvdXJjZVBhY2thZ2U9YyksbihzKX19KX19LHtrZXk6ImdldERhdGFTY2hlbWFEZXNjcmlwdG9yIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgbyhmdW5jdGlvbihyLG4pe3ZhciBpPSgwLHMuZGl2aWRlVVJMKShlKSxvPWkudHlwZSxhPWkuZG9tYWluLGM9aS5pZGVudGl0eTtjJiYoYz1jLnN1YnN0cmluZyhjLmxhc3RJbmRleE9mKCIvIikrMSkpLGNvbnNvbGUubG9nKCJnZXREYXRhU2NoZW1hRGVzY3JpcHRvcjogIixlLGkpLHQuaHR0cFJlcXVlc3QuZ2V0KG8rIjovLyIrYSsiL3Jlc291cmNlcy9kZXNjcmlwdG9ycy9EYXRhU2NoZW1hcy5qc29uIikudGhlbihmdW5jdGlvbihlKXt0LkRhdGFTY2hlbWFzPUpTT04ucGFyc2UoZSk7dmFyIGk9dC5EYXRhU2NoZW1hc1tjXTtpZihpLkVSUk9SKW4oaSk7ZWxzZXtjb25zb2xlLmxvZygiY3JlYXRpbmcgZGF0YVNjaGVtYSBiYXNlZCBvbjogIixpKTt2YXIgbz10Ll9mYWN0b3J5LmNyZWF0ZURhdGFPYmplY3RTY2hlbWEoaS5jZ3VpZCxpLnZlcnNpb24saS5vYmplY3ROYW1lLGkuZGVzY3JpcHRpb24saS5sYW5ndWFnZSxpLnNvdXJjZVBhY2thZ2VVUkwpO28uc2lnbmF0dXJlPWkuc2lnbmF0dXJlLGNvbnNvbGUubG9nKCJjcmVhdGVkIGRhdGFTY2hlbWEgZGVzY3JpcHRvciBvYmplY3Q6IixvKTt2YXIgYT1pLnNvdXJjZVBhY2thZ2U7YSYmKG8uc291cmNlUGFja2FnZT10Ll9jcmVhdGVTb3VyY2VQYWNrYWdlKHQuX2ZhY3RvcnksYSksInN0cmluZyI9PXR5cGVvZiBvLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZSYmKG8uc291cmNlUGFja2FnZS5zb3VyY2VDb2RlPUpTT04ucGFyc2Uoby5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUpKSkscihvKX19KX0pfX0se2tleToiZ2V0U291cmNlUGFja2FnZUZyb21VUkwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvKGZ1bmN0aW9uKHIsbil7Ii9zb3VyY2VQYWNrYWdlIj09PWUmJm4oInNvdXJjZVBhY2thZ2UgaXMgYWxyZWFkeSBjb250YWluZWQgaW4gZGVzY3JpcHRvciwgcGxlYXNlIHVzZSBpdCBkaXJlY3RseSIpLHQuaHR0cFJlcXVlc3QuZ2V0KGUpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZS5lcnJvciluKGUpO2Vsc2V7ZT1KU09OLnBhcnNlKGUpO3ZhciBpPWUuc291cmNlUGFja2FnZTtpPyhpPXQuX2NyZWF0ZVNvdXJjZVBhY2thZ2UodC5fZmFjdG9yeSxpKSxyKGkpKTpuKCJubyBzb3VyY2UgcGFja2FnZSIpfX0pWyJjYXRjaCJdKGZ1bmN0aW9uKGUpe24oZSl9KX0pfX0se2tleToiX2NyZWF0ZVNvdXJjZVBhY2thZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dHJ5e3Q9SlNPTi5wYXJzZSh0KX1jYXRjaChyKXtjb25zb2xlLmxvZygicGFyc2luZyBzb3VyY2VQYWNrYWdlIGZhaWxlZC4gYWxyZWFkeSBwYXJzZWQ/IC0+ICIsdCl9ImJhc2U2NCI9PT10LmVuY29kaW5nJiYodC5zb3VyY2VDb2RlPWF0b2IodC5zb3VyY2VDb2RlKSx0LmVuY29kaW5nPSJVVEYtOCIpO3ZhciBuPWUuY3JlYXRlU291cmNlUGFja2FnZSh0LnNvdXJjZUNvZGVDbGFzc25hbWUsdC5zb3VyY2VDb2RlKTtyZXR1cm4gdC5oYXNPd25Qcm9wZXJ0eSgiZW5jb2RpbmciKSYmKG4uZW5jb2Rpbmc9dC5lbmNvZGluZyksdC5oYXNPd25Qcm9wZXJ0eSgic2lnbmF0dXJlIikmJihuLnNpZ25hdHVyZT10LnNpZ25hdHVyZSksbn19LHtrZXk6InJ1bnRpbWVVUkwiLHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX3J1bnRpbWVVUkw9ZX0sZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5fcnVudGltZVVSTH19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL2NhdGFsb2d1ZS1mYWN0b3J5L0NhdGFsb2d1ZURhdGFPYmplY3RGYWN0b3J5IjoxMDksIi4uL3V0aWxzL3V0aWxzIjoxMTgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTV9XSwxMTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXt2YXIgdD0vKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naSxyPSIkMSwkMiwkMyIsbj1lLnJlcGxhY2UodCxyKS5zcGxpdCgiLCIpO25bMF09PT1lJiYoblswXT0iaHR0cHMiLG5bMV09ZSk7dmFyIGk9e3R5cGU6blswXSxkb21haW46blsxXSxpZGVudGl0eTpuWzJdfTtyZXR1cm4gaX1mdW5jdGlvbiBpKGUpe3JldHVybiBlP0pTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpOnZvaWQgMH1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5kaXZpZGVVUkw9bixyLmRlZXBDbG9uZT1pfSx7fV19LHt9LFsxMDddKSgxMDcpfSk7Cn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwxNjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKGdsb2JhbCl7Ci8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKLy8gRGlzdHJpYnV0aW9uIGZpbGUgZm9yIHNlcnZpY2UtZnJhbWV3b3JrLmpzIAovLyB2ZXJzaW9uOiAwLjEuMAoKIWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyx0LnNlcnZpY2VGcmFtZXdvcms9ZSgpfX0oZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gZnVuY3Rpb24gdChlLHIsbil7ZnVuY3Rpb24gbyhzLGEpe2lmKCFyW3NdKXtpZighZVtzXSl7dmFyIHU9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWEmJnUpcmV0dXJuIHUocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgYz1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgYy5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixjfXZhciBsPXJbc109e2V4cG9ydHM6e319O2Vbc11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24odCl7dmFyIHI9ZVtzXVsxXVt0XTtyZXR1cm4gbyhyP3I6dCl9LGwsbC5leHBvcnRzLHQsZSxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiOjIyfV0sMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjIzfV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZnJlZXplIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9mcmVlemUiOjI0fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjI1fV0sNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MjZ9XSw2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjoyN31dLDc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjI4fV0sODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjI5fV0sOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sIjozMH1dLDEwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbC9pdGVyYXRvciIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wvaXRlcmF0b3IiOjMxfV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi9jbGFzc0NhbGxDaGVjay5qcyIpfSx7Ii4vY2xhc3NDYWxsQ2hlY2suanMiOjEyfV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDEzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vY3JlYXRlQ2xhc3MuanMiKX0seyIuL2NyZWF0ZUNsYXNzLmpzIjoxNH1dLDE0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjJ9XSwxNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLGE9bihzKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24gdShlLHQscil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG49KDAsYVsiZGVmYXVsdCJdKShlLHQpO2lmKHZvaWQgMD09PW4pe3ZhciBvPSgwLGlbImRlZmF1bHQiXSkoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp1KG8sdCxyKX1pZigidmFsdWUiaW4gbilyZXR1cm4gbi52YWx1ZTt2YXIgcz1uLmdldDtpZih2b2lkIDAhPT1zKXJldHVybiBzLmNhbGwocil9fSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjo0LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjV9XSwxNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZSIpLGE9bihzKSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy90eXBlb2YiKSxjPW4odSk7clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIisoInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOigwLGNbImRlZmF1bHQiXSkodCkpKTtlLnByb3RvdHlwZT0oMCxhWyJkZWZhdWx0Il0pKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoaVsiZGVmYXVsdCJdPygwLGlbImRlZmF1bHQiXSkoZSx0KTplLl9fcHJvdG9fXz10KX19LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjEsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6NywiYmFiZWwtcnVudGltZS9oZWxwZXJzL3R5cGVvZiI6MTl9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpfSx7Ii4vaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIjoxOH1dLDE4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3IuX19lc01vZHVsZT0hMCxyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19fSx7fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbC9pdGVyYXRvciIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9zeW1ib2wiKSxhPW4ocyksdT0iZnVuY3Rpb24iPT10eXBlb2YgYVsiZGVmYXVsdCJdJiYic3ltYm9sIj09dHlwZW9mIGlbImRlZmF1bHQiXT9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgYVsiZGVmYXVsdCJdJiZlLmNvbnN0cnVjdG9yPT09YVsiZGVmYXVsdCJdPyJzeW1ib2wiOnR5cGVvZiBlfTtyWyJkZWZhdWx0Il09ImZ1bmN0aW9uIj09dHlwZW9mIGFbImRlZmF1bHQiXSYmInN5bWJvbCI9PT11KGlbImRlZmF1bHQiXSk/ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBlPyJ1bmRlZmluZWQiOnUoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgYVsiZGVmYXVsdCJdJiZlLmNvbnN0cnVjdG9yPT09YVsiZGVmYXVsdCJdPyJzeW1ib2wiOiJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjp1KGUpfX0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sIjo5LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yIjoxMH1dLDIwOltmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKHIpe3ZhciBuPSJvYmplY3QiPT10eXBlb2Ygcj9yOiJvYmplY3QiPT10eXBlb2Ygd2luZG93P3dpbmRvdzoib2JqZWN0Ij09dHlwZW9mIHNlbGY/c2VsZjp0aGlzLG89bi5yZWdlbmVyYXRvclJ1bnRpbWUmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG4pLmluZGV4T2YoInJlZ2VuZXJhdG9yUnVudGltZSIpPj0wLGk9byYmbi5yZWdlbmVyYXRvclJ1bnRpbWU7aWYobi5yZWdlbmVyYXRvclJ1bnRpbWU9dm9pZCAwLHQuZXhwb3J0cz1lKCIuL3J1bnRpbWUiKSxvKW4ucmVnZW5lcmF0b3JSdW50aW1lPWk7ZWxzZSB0cnl7ZGVsZXRlIG4ucmVnZW5lcmF0b3JSdW50aW1lfWNhdGNoKHMpe24ucmVnZW5lcmF0b3JSdW50aW1lPXZvaWQgMH10LmV4cG9ydHM9eyJkZWZhdWx0Ijp0LmV4cG9ydHMsX19lc01vZHVsZTohMH19KS5jYWxsKHRoaXMsInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHsiLi9ydW50aW1lIjoyMX1dLDIxOltmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKHIsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19dmFyIGk9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxzPW8oaSksYT1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSx1PW8oYSksYz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZSIpLGw9byhjKSxmPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy90eXBlb2YiKSxwPW8oZiksZD1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yIiksaD1vKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCIpLHk9byhiKTshZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbihlLHQscixuKXt2YXIgbz0oMCxsWyJkZWZhdWx0Il0pKCh0fHxpKS5wcm90b3R5cGUpLHM9bmV3IGcobnx8W10pO3JldHVybiBvLl9pbnZva2U9XyhlLHIscyksb31mdW5jdGlvbiBvKGUsdCxyKXt0cnl7cmV0dXJue3R5cGU6Im5vcm1hbCIsYXJnOmUuY2FsbCh0LHIpfX1jYXRjaChuKXtyZXR1cm57dHlwZToidGhyb3ciLGFyZzpufX19ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBhKCl7fWZ1bmN0aW9uIGMoKXt9ZnVuY3Rpb24gZihlKXtbIm5leHQiLCJ0aHJvdyIsInJldHVybiJdLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faW52b2tlKHQsZSl9fSl9ZnVuY3Rpb24gZChlKXt0aGlzLmFyZz1lfWZ1bmN0aW9uIGIoZSl7ZnVuY3Rpb24gdCh0LHIpe3ZhciBuPWVbdF0ociksbz1uLnZhbHVlO3JldHVybiBvIGluc3RhbmNlb2YgZD9zWyJkZWZhdWx0Il0ucmVzb2x2ZShvLmFyZykudGhlbihpLGEpOnNbImRlZmF1bHQiXS5yZXNvbHZlKG8pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIG4udmFsdWU9ZSxufSl9ZnVuY3Rpb24gbihlLHIpe2Z1bmN0aW9uIG4oKXtyZXR1cm4gdChlLHIpfXJldHVybiBvPW8/by50aGVuKG4sbik6bmV3IHNbImRlZmF1bHQiXShmdW5jdGlvbihlKXtlKG4oKSl9KX0ib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIHI/InVuZGVmaW5lZCI6KDAscFsiZGVmYXVsdCJdKShyKSkmJnIuZG9tYWluJiYodD1yLmRvbWFpbi5iaW5kKHQpKTt2YXIgbyxpPXQuYmluZChlLCJuZXh0IiksYT10LmJpbmQoZSwidGhyb3ciKTt0LmJpbmQoZSwicmV0dXJuIik7dGhpcy5faW52b2tlPW59ZnVuY3Rpb24gXyhlLHQscil7dmFyIG49UztyZXR1cm4gZnVuY3Rpb24oaSxzKXtpZihuPT09eCl0aHJvdyBuZXcgRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmciKTtpZihuPT09VCl7aWYoInRocm93Ij09PWkpdGhyb3cgcztyZXR1cm4gTygpfWZvcig7Oyl7dmFyIGE9ci5kZWxlZ2F0ZTtpZihhKXtpZigicmV0dXJuIj09PWl8fCJ0aHJvdyI9PT1pJiZhLml0ZXJhdG9yW2ldPT09RSl7ci5kZWxlZ2F0ZT1udWxsO3ZhciB1PWEuaXRlcmF0b3JbInJldHVybiJdO2lmKHUpe3ZhciBjPW8odSxhLml0ZXJhdG9yLHMpO2lmKCJ0aHJvdyI9PT1jLnR5cGUpe2k9InRocm93IixzPWMuYXJnO2NvbnRpbnVlfX1pZigicmV0dXJuIj09PWkpY29udGludWV9dmFyIGM9byhhLml0ZXJhdG9yW2ldLGEuaXRlcmF0b3Iscyk7aWYoInRocm93Ij09PWMudHlwZSl7ci5kZWxlZ2F0ZT1udWxsLGk9InRocm93IixzPWMuYXJnO2NvbnRpbnVlfWk9Im5leHQiLHM9RTt2YXIgbD1jLmFyZztpZighbC5kb25lKXJldHVybiBuPU0sbDtyW2EucmVzdWx0TmFtZV09bC52YWx1ZSxyLm5leHQ9YS5uZXh0TG9jLHIuZGVsZWdhdGU9bnVsbH1pZigibmV4dCI9PT1pKXIuX3NlbnQ9cyxuPT09TT9yLnNlbnQ9czpyLnNlbnQ9RTtlbHNlIGlmKCJ0aHJvdyI9PT1pKXtpZihuPT09Uyl0aHJvdyBuPVQscztyLmRpc3BhdGNoRXhjZXB0aW9uKHMpJiYoaT0ibmV4dCIscz1FKX1lbHNlInJldHVybiI9PT1pJiZyLmFicnVwdCgicmV0dXJuIixzKTtuPXg7dmFyIGM9byhlLHQscik7aWYoIm5vcm1hbCI9PT1jLnR5cGUpe249ci5kb25lP1Q6TTt2YXIgbD17dmFsdWU6Yy5hcmcsZG9uZTpyLmRvbmV9O2lmKGMuYXJnIT09QSlyZXR1cm4gbDtyLmRlbGVnYXRlJiYibmV4dCI9PT1pJiYocz1FKX1lbHNlInRocm93Ij09PWMudHlwZSYmKG49VCxpPSJ0aHJvdyIscz1jLmFyZyl9fX1mdW5jdGlvbiB2KGUpe3ZhciB0PXt0cnlMb2M6ZVswXX07MSBpbiBlJiYodC5jYXRjaExvYz1lWzFdKSwyIGluIGUmJih0LmZpbmFsbHlMb2M9ZVsyXSx0LmFmdGVyTG9jPWVbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKHQpfWZ1bmN0aW9uIG0oZSl7dmFyIHQ9ZS5jb21wbGV0aW9ufHx7fTt0LnR5cGU9Im5vcm1hbCIsZGVsZXRlIHQuYXJnLGUuY29tcGxldGlvbj10fWZ1bmN0aW9uIGcoZSl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOiJyb290In1dLGUuZm9yRWFjaCh2LHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIGooZSl7aWYoZSl7dmFyIHQ9ZVtrXTtpZih0KXJldHVybiB0LmNhbGwoZSk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUubmV4dClyZXR1cm4gZTtpZighaXNOYU4oZS5sZW5ndGgpKXt2YXIgcj0tMSxuPWZ1bmN0aW9uIG8oKXtmb3IoOysrcjxlLmxlbmd0aDspaWYody5jYWxsKGUscikpcmV0dXJuIG8udmFsdWU9ZVtyXSxvLmRvbmU9ITEsbztyZXR1cm4gby52YWx1ZT1FLG8uZG9uZT0hMCxvfTtyZXR1cm4gbi5uZXh0PW59fXJldHVybntuZXh0Ok99fWZ1bmN0aW9uIE8oKXtyZXR1cm57dmFsdWU6RSxkb25lOiEwfX12YXIgRSx3PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksaz0iZnVuY3Rpb24iPT10eXBlb2YgeVsiZGVmYXVsdCJdJiZoWyJkZWZhdWx0Il18fCJAQGl0ZXJhdG9yIixQPSJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjooMCxwWyJkZWZhdWx0Il0pKHQpKSxSPWUucmVnZW5lcmF0b3JSdW50aW1lO2lmKFIpcmV0dXJuIHZvaWQoUCYmKHQuZXhwb3J0cz1SKSk7Uj1lLnJlZ2VuZXJhdG9yUnVudGltZT1QP3QuZXhwb3J0czp7fSxSLndyYXA9bjt2YXIgUz0ic3VzcGVuZGVkU3RhcnQiLE09InN1c3BlbmRlZFlpZWxkIix4PSJleGVjdXRpbmciLFQ9ImNvbXBsZXRlZCIsQT17fSxOPWMucHJvdG90eXBlPWkucHJvdG90eXBlO2EucHJvdG90eXBlPU4uY29uc3RydWN0b3I9YyxjLmNvbnN0cnVjdG9yPWEsYS5kaXNwbGF5TmFtZT0iR2VuZXJhdG9yRnVuY3Rpb24iLFIuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgZSYmZS5jb25zdHJ1Y3RvcjtyZXR1cm4gdD90PT09YXx8IkdlbmVyYXRvckZ1bmN0aW9uIj09PSh0LmRpc3BsYXlOYW1lfHx0Lm5hbWUpOiExfSxSLm1hcms9ZnVuY3Rpb24oZSl7cmV0dXJuIHVbImRlZmF1bHQiXT8oMCx1WyJkZWZhdWx0Il0pKGUsYyk6ZS5fX3Byb3RvX189YyxlLnByb3RvdHlwZT0oMCxsWyJkZWZhdWx0Il0pKE4pLGV9LFIuYXdyYXA9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBkKGUpfSxmKGIucHJvdG90eXBlKSxSLmFzeW5jPWZ1bmN0aW9uKGUsdCxyLG8pe3ZhciBpPW5ldyBiKG4oZSx0LHIsbykpO3JldHVybiBSLmlzR2VuZXJhdG9yRnVuY3Rpb24odCk/aTppLm5leHQoKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRvbmU/ZS52YWx1ZTppLm5leHQoKX0pfSxmKE4pLE5ba109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sTi50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IEdlbmVyYXRvcl0ifSxSLmtleXM9ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciByIGluIGUpdC5wdXNoKHIpO3JldHVybiB0LnJldmVyc2UoKSxmdW5jdGlvbiBuKCl7Zm9yKDt0Lmxlbmd0aDspe3ZhciByPXQucG9wKCk7aWYociBpbiBlKXJldHVybiBuLnZhbHVlPXIsbi5kb25lPSExLG59cmV0dXJuIG4uZG9uZT0hMCxufX0sUi52YWx1ZXM9aixnLnByb3RvdHlwZT17Y29uc3RydWN0b3I6ZyxyZXNldDpmdW5jdGlvbihlKXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9RSx0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKG0pLCFlKWZvcih2YXIgdCBpbiB0aGlzKSJ0Ij09PXQuY2hhckF0KDApJiZ3LmNhbGwodGhpcyx0KSYmIWlzTmFOKCt0LnNsaWNlKDEpKSYmKHRoaXNbdF09RSl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9ITA7dmFyIGU9dGhpcy50cnlFbnRyaWVzWzBdLHQ9ZS5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4pe3JldHVybiBpLnR5cGU9InRocm93IixpLmFyZz1lLHIubmV4dD10LCEhbn1pZih0aGlzLmRvbmUpdGhyb3cgZTtmb3IodmFyIHI9dGhpcyxuPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtuPj0wOy0tbil7dmFyIG89dGhpcy50cnlFbnRyaWVzW25dLGk9by5jb21wbGV0aW9uO2lmKCJyb290Ij09PW8udHJ5TG9jKXJldHVybiB0KCJlbmQiKTtpZihvLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgcz13LmNhbGwobywiY2F0Y2hMb2MiKSxhPXcuY2FsbChvLCJmaW5hbGx5TG9jIik7aWYocyYmYSl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIHQoby5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gdChvLmZpbmFsbHlMb2MpfWVsc2UgaWYocyl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIHQoby5jYXRjaExvYywhMCl9ZWxzZXtpZighYSl0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gdChvLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgbj10aGlzLnRyeUVudHJpZXNbcl07aWYobi50cnlMb2M8PXRoaXMucHJldiYmdy5jYWxsKG4sImZpbmFsbHlMb2MiKSYmdGhpcy5wcmV2PG4uZmluYWxseUxvYyl7dmFyIG89bjticmVha319byYmKCJicmVhayI9PT1lfHwiY29udGludWUiPT09ZSkmJm8udHJ5TG9jPD10JiZ0PD1vLmZpbmFsbHlMb2MmJihvPW51bGwpO3ZhciBpPW8/by5jb21wbGV0aW9uOnt9O3JldHVybiBpLnR5cGU9ZSxpLmFyZz10LG8/dGhpcy5uZXh0PW8uZmluYWxseUxvYzp0aGlzLmNvbXBsZXRlKGkpLEF9LGNvbXBsZXRlOmZ1bmN0aW9uKGUsdCl7aWYoInRocm93Ij09PWUudHlwZSl0aHJvdyBlLmFyZzsiYnJlYWsiPT09ZS50eXBlfHwiY29udGludWUiPT09ZS50eXBlP3RoaXMubmV4dD1lLmFyZzoicmV0dXJuIj09PWUudHlwZT8odGhpcy5ydmFsPWUuYXJnLHRoaXMubmV4dD0iZW5kIik6Im5vcm1hbCI9PT1lLnR5cGUmJnQmJih0aGlzLm5leHQ9dCl9LGZpbmlzaDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3Q+PTA7LS10KXt2YXIgcj10aGlzLnRyeUVudHJpZXNbdF07aWYoci5maW5hbGx5TG9jPT09ZSlyZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sci5hZnRlckxvYyksbShyKSxBfX0sImNhdGNoIjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3Q+PTA7LS10KXt2YXIgcj10aGlzLnRyeUVudHJpZXNbdF07aWYoci50cnlMb2M9PT1lKXt2YXIgbj1yLmNvbXBsZXRpb247aWYoInRocm93Ij09PW4udHlwZSl7dmFyIG89bi5hcmc7bShyKX1yZXR1cm4gb319dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOmooZSkscmVzdWx0TmFtZTp0LG5leHRMb2M6cn0sQX19fSgib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIG4/InVuZGVmaW5lZCI6KDAscFsiZGVmYXVsdCJdKShuKSk/bjoib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdz8idW5kZWZpbmVkIjooMCxwWyJkZWZhdWx0Il0pKHdpbmRvdykpP3dpbmRvdzoib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIHNlbGY/InVuZGVmaW5lZCI6KDAscFsiZGVmYXVsdCJdKShzZWxmKSk/c2VsZjp2b2lkIDApfSkuY2FsbCh0aGlzLGUoIl9wcm9jZXNzIiksInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtfcHJvY2VzczoxMTQsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIjoxLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjcsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo4LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sIjo5LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yIjoxMCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3R5cGVvZiI6MTl9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5jcmVhdGUiKTt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzL19jb3JlIikuT2JqZWN0O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNyZWF0ZShlLHQpfX0seyIuLi8uLi9tb2R1bGVzL19jb3JlIjozOSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmNyZWF0ZSI6MTAyfV0sMjM6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnR5Iik7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLk9iamVjdDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmRlZmluZVByb3BlcnR5KGUsdCxyKX19LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzksIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOjEwM31dLDI0OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmZyZWV6ZSIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzL19jb3JlIikuT2JqZWN0LmZyZWV6ZX0seyIuLi8uLi9tb2R1bGVzL19jb3JlIjozOSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmZyZWV6ZSI6MTA0fV0sMjU6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIik7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLk9iamVjdDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzksIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjEwNX1dLDI2OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLk9iamVjdC5nZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzL19jb3JlIjozOSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiOjEwNn1dLDI3OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLk9iamVjdC5rZXlzfSx7Ii4uLy4uL21vZHVsZXMvX2NvcmUiOjM5LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6MTA3fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzL19jb3JlIikuT2JqZWN0LnNldFByb3RvdHlwZU9mfSx7Ii4uLy4uL21vZHVsZXMvX2NvcmUiOjM5LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiI6MTA4fV0sMjk6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksZSgiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIiksZSgiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIiksZSgiLi4vbW9kdWxlcy9lczYucHJvbWlzZSIpLHQuZXhwb3J0cz1lKCIuLi9tb2R1bGVzL19jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzL19jb3JlIjozOSwiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6MTA5LCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjoxMTAsIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI6MTExLCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjExM31dLDMwOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIiksZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzL19jb3JlIikuU3ltYm9sfSx7Ii4uLy4uL21vZHVsZXMvX2NvcmUiOjM5LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjoxMDksIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCI6MTEyfV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi8uLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy9fd2tzIikoIml0ZXJhdG9yIil9LHsiLi4vLi4vbW9kdWxlcy9fd2tzIjo5OSwiLi4vLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjoxMTEsIi4uLy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI6MTEzfV0sMzI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwzMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwzNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuKXtpZighKGUgaW5zdGFuY2VvZiB0KXx8dm9pZCAwIT09biYmbiBpbiBlKXRocm93IFR5cGVFcnJvcihyKyI6IGluY29ycmVjdCBpbnZvY2F0aW9uISIpO3JldHVybiBlfX0se31dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9faXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi9faXMtb2JqZWN0Ijo1OH1dLDM2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fdG8taW9iamVjdCIpLG89ZSgiLi9fdG8tbGVuZ3RoIiksaT1lKCIuL190by1pbmRleCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLHMpe3ZhciBhLHU9bih0KSxjPW8odS5sZW5ndGgpLGw9aShzLGMpO2lmKGUmJnIhPXIpe2Zvcig7Yz5sOylpZihhPXVbbCsrXSxhIT1hKXJldHVybiEwfWVsc2UgZm9yKDtjPmw7bCsrKWlmKChlfHxsIGluIHUpJiZ1W2xdPT09cilyZXR1cm4gZXx8bDtyZXR1cm4hZSYmLTF9fX0seyIuL190by1pbmRleCI6OTIsIi4vX3RvLWlvYmplY3QiOjk0LCIuL190by1sZW5ndGgiOjk1fV0sMzc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19jb2YiKSxvPWUoIi4vX3drcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSxzPWZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBlW3RdfWNhdGNoKHIpe319O3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyLGE7cmV0dXJuIHZvaWQgMD09PWU/IlVuZGVmaW5lZCI6bnVsbD09PWU/Ik51bGwiOiJzdHJpbmciPT10eXBlb2Yocj1zKHQ9T2JqZWN0KGUpLG8pKT9yOmk/bih0KToiT2JqZWN0Ij09KGE9bih0KSkmJiJmdW5jdGlvbiI9PXR5cGVvZiB0LmNhbGxlZT8iQXJndW1lbnRzIjphfX0seyIuL19jb2YiOjM4LCIuL193a3MiOjk5fV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMi4yLjEifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fYS1mdW5jdGlvbiIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixvKXtyZXR1cm4gZS5jYWxsKHQscixuLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0seyIuL19hLWZ1bmN0aW9uIjozMn1dLDQxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDQyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuL19mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuL19mYWlscyI6NDd9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2lzLW9iamVjdCIpLG89ZSgiLi9fZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi9fZ2xvYmFsIjo0OSwiLi9faXMtb2JqZWN0Ijo1OH1dLDQ0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSJjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YiLnNwbGl0KCIsIil9LHt9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX29iamVjdC1rZXlzIiksbz1lKCIuL19vYmplY3QtZ29wcyIpLGk9ZSgiLi9fb2JqZWN0LXBpZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uKGUpLHI9by5mO2lmKHIpZm9yKHZhciBzLGE9cihlKSx1PWkuZixjPTA7YS5sZW5ndGg+YzspdS5jYWxsKGUscz1hW2MrK10pJiZ0LnB1c2gocyk7cmV0dXJuIHR9fSx7Ii4vX29iamVjdC1nb3BzIjo3NSwiLi9fb2JqZWN0LWtleXMiOjc4LCIuL19vYmplY3QtcGllIjo3OX1dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fZ2xvYmFsIiksbz1lKCIuL19jb3JlIiksaT1lKCIuL19jdHgiKSxzPWUoIi4vX2hpZGUiKSxhPSJwcm90b3R5cGUiLHU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBjLGwsZixwPWUmdS5GLGQ9ZSZ1LkcsaD1lJnUuUyxiPWUmdS5QLHk9ZSZ1LkIsXz1lJnUuVyx2PWQ/bzpvW3RdfHwob1t0XT17fSksbT12W2FdLGc9ZD9uOmg/blt0XTooblt0XXx8e30pW2FdO2QmJihyPXQpO2ZvcihjIGluIHIpbD0hcCYmZyYmdm9pZCAwIT09Z1tjXSxsJiZjIGluIHZ8fChmPWw/Z1tjXTpyW2NdLHZbY109ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGdbY10/cltjXTp5JiZsP2koZixuKTpfJiZnW2NdPT1mP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQscixuKXtpZih0aGlzIGluc3RhbmNlb2YgZSl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IGU7Y2FzZSAxOnJldHVybiBuZXcgZSh0KTtjYXNlIDI6cmV0dXJuIG5ldyBlKHQscil9cmV0dXJuIG5ldyBlKHQscixuKX1yZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiB0W2FdPWVbYV0sdH0oZik6YiYmImZ1bmN0aW9uIj09dHlwZW9mIGY/aShGdW5jdGlvbi5jYWxsLGYpOmYsYiYmKCh2LnZpcnR1YWx8fCh2LnZpcnR1YWw9e30pKVtjXT1mLGUmdS5SJiZtJiYhbVtjXSYmcyhtLGMsZikpKX07dS5GPTEsdS5HPTIsdS5TPTQsdS5QPTgsdS5CPTE2LHUuVz0zMix1LlU9NjQsdS5SPTEyOCx0LmV4cG9ydHM9dX0seyIuL19jb3JlIjozOSwiLi9fY3R4Ijo0MCwiLi9fZ2xvYmFsIjo0OSwiLi9faGlkZSI6NTF9XSw0NzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fX0se31dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fY3R4Iiksbz1lKCIuL19pdGVyLWNhbGwiKSxpPWUoIi4vX2lzLWFycmF5LWl0ZXIiKSxzPWUoIi4vX2FuLW9iamVjdCIpLGE9ZSgiLi9fdG8tbGVuZ3RoIiksdT1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixjLGwpe3ZhciBmLHAsZCxoPWw/ZnVuY3Rpb24oKXtyZXR1cm4gZX06dShlKSxiPW4ocixjLHQ/MjoxKSx5PTA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGgpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgaXRlcmFibGUhIik7aWYoaShoKSlmb3IoZj1hKGUubGVuZ3RoKTtmPnk7eSsrKXQ/YihzKHA9ZVt5XSlbMF0scFsxXSk6YihlW3ldKTtlbHNlIGZvcihkPWguY2FsbChlKTshKHA9ZC5uZXh0KCkpLmRvbmU7KW8oZCxiLHAudmFsdWUsdCl9fSx7Ii4vX2FuLW9iamVjdCI6MzUsIi4vX2N0eCI6NDAsIi4vX2lzLWFycmF5LWl0ZXIiOjU2LCIuL19pdGVyLWNhbGwiOjU5LCIuL190by1sZW5ndGgiOjk1LCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6MTAwfV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSw1MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX29iamVjdC1kcCIpLG89ZSgiLi9fcHJvcGVydHktZGVzYyIpO3QuZXhwb3J0cz1lKCIuL19kZXNjcmlwdG9ycyIpP2Z1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5mKGUsdCxvKDEscikpfTpmdW5jdGlvbihlLHQscil7cmV0dXJuIGVbdF09cixlfX0seyIuL19kZXNjcmlwdG9ycyI6NDIsIi4vX29iamVjdC1kcCI6NzAsIi4vX3Byb3BlcnR5LWRlc2MiOjgxfV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi9fZ2xvYmFsIikuZG9jdW1lbnQmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudH0seyIuL19nbG9iYWwiOjQ5fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vX2Rlc2NyaXB0b3JzIikmJiFlKCIuL19mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlKCIuL19kb20tY3JlYXRlIikoImRpdiIpLCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSx7Ii4vX2Rlc2NyaXB0b3JzIjo0MiwiLi9fZG9tLWNyZWF0ZSI6NDMsIi4vX2ZhaWxzIjo0N31dLDU0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj12b2lkIDA9PT1yO3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuP2UoKTplLmNhbGwocik7Y2FzZSAxOnJldHVybiBuP2UodFswXSk6ZS5jYWxsKHIsdFswXSk7Y2FzZSAyOnJldHVybiBuP2UodFswXSx0WzFdKTplLmNhbGwocix0WzBdLHRbMV0pO2Nhc2UgMzpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSk7Y2FzZSA0OnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0sdFszXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0sdFszXSl9cmV0dXJuIGUuYXBwbHkocix0KX19LHt9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2NvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuL19jb2YiOjM4fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19pdGVyYXRvcnMiKSxvPWUoIi4vX3drcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vX2l0ZXJhdG9ycyI6NjQsIi4vX3drcyI6OTl9XSw1NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2NvZiIpO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4iQXJyYXkiPT1uKGUpfX0seyIuL19jb2YiOjM4fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0se31dLDU5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fYW4tb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG8pe3RyeXtyZXR1cm4gbz90KG4ocilbMF0sclsxXSk6dChyKX1jYXRjaChpKXt2YXIgcz1lWyJyZXR1cm4iXTt0aHJvdyB2b2lkIDAhPT1zJiZuKHMuY2FsbChlKSksaX19fSx7Ii4vX2FuLW9iamVjdCI6MzV9XSw2MDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuL19vYmplY3QtY3JlYXRlIiksbz1lKCIuL19wcm9wZXJ0eS1kZXNjIiksaT1lKCIuL19zZXQtdG8tc3RyaW5nLXRhZyIpLHM9e307ZSgiLi9faGlkZSIpKHMsZSgiLi9fd2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bihzLHtuZXh0Om8oMSxyKX0pLGkoZSx0KyIgSXRlcmF0b3IiKX19LHsiLi9faGlkZSI6NTEsIi4vX29iamVjdC1jcmVhdGUiOjY5LCIuL19wcm9wZXJ0eS1kZXNjIjo4MSwiLi9fc2V0LXRvLXN0cmluZy10YWciOjg2LCIuL193a3MiOjk5fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi9fbGlicmFyeSIpLG89ZSgiLi9fZXhwb3J0IiksaT1lKCIuL19yZWRlZmluZSIpLHM9ZSgiLi9faGlkZSIpLGE9ZSgiLi9faGFzIiksdT1lKCIuL19pdGVyYXRvcnMiKSxjPWUoIi4vX2l0ZXItY3JlYXRlIiksbD1lKCIuL19zZXQtdG8tc3RyaW5nLXRhZyIpLGY9ZSgiLi9fb2JqZWN0LWdwbyIpLHA9ZSgiLi9fd2tzIikoIml0ZXJhdG9yIiksZD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSxoPSJAQGl0ZXJhdG9yIixiPSJrZXlzIix5PSJ2YWx1ZXMiLF89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLHYsbSxnLGope2Mocix0LHYpO3ZhciBPLEUsdyxrPWZ1bmN0aW9uKGUpe2lmKCFkJiZlIGluIE0pcmV0dXJuIE1bZV07c3dpdGNoKGUpe2Nhc2UgYjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX07Y2FzZSB5OnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LFA9dCsiIEl0ZXJhdG9yIixSPW09PXksUz0hMSxNPWUucHJvdG90eXBlLHg9TVtwXXx8TVtoXXx8bSYmTVttXSxUPXh8fGsobSksQT1tP1I/aygiZW50cmllcyIpOlQ6dm9pZCAwLE49IkFycmF5Ij09dD9NLmVudHJpZXN8fHg6eDtpZihOJiYodz1mKE4uY2FsbChuZXcgZSkpLHchPT1PYmplY3QucHJvdG90eXBlJiYobCh3LFAsITApLG58fGEodyxwKXx8cyh3LHAsXykpKSxSJiZ4JiZ4Lm5hbWUhPT15JiYoUz0hMCxUPWZ1bmN0aW9uKCl7cmV0dXJuIHguY2FsbCh0aGlzKX0pLG4mJiFqfHwhZCYmIVMmJk1bcF18fHMoTSxwLFQpLHVbdF09VCx1W1BdPV8sbSlpZihPPXt2YWx1ZXM6Uj9UOmsoeSksa2V5czpnP1Q6ayhiKSxlbnRyaWVzOkF9LGopZm9yKEUgaW4gTylFIGluIE18fGkoTSxFLE9bRV0pO2Vsc2UgbyhvLlArby5GKihkfHxTKSx0LE8pO3JldHVybiBPfX0seyIuL19leHBvcnQiOjQ2LCIuL19oYXMiOjUwLCIuL19oaWRlIjo1MSwiLi9faXRlci1jcmVhdGUiOjYwLCIuL19pdGVyYXRvcnMiOjY0LCIuL19saWJyYXJ5Ijo2NiwiLi9fb2JqZWN0LWdwbyI6NzYsIi4vX3JlZGVmaW5lIjo4MywiLi9fc2V0LXRvLXN0cmluZy10YWciOjg2LCIuL193a3MiOjk5fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL193a3MiKSgiaXRlcmF0b3IiKSxvPSExO3RyeXt2YXIgaT1bN11bbl0oKTtpWyJyZXR1cm4iXT1mdW5jdGlvbigpe289ITB9LEFycmF5LmZyb20oaSxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaChzKXt9dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFvKXJldHVybiExO3ZhciByPSExO3RyeXt2YXIgaT1bN10scz1pW25dKCk7cy5uZXh0PWZ1bmN0aW9uKCl7cj0hMH0saVtuXT1mdW5jdGlvbigpe3JldHVybiBzfSxlKGkpfWNhdGNoKGEpe31yZXR1cm4gcn19LHsiLi9fd2tzIjo5OX1dLDYzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDY0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19vYmplY3Qta2V5cyIpLG89ZSgiLi9fdG8taW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcixpPW8oZSkscz1uKGkpLGE9cy5sZW5ndGgsdT0wO2E+dTspaWYoaVtyPXNbdSsrXV09PT10KXJldHVybiByfX0seyIuL19vYmplY3Qta2V5cyI6NzgsIi4vX3RvLWlvYmplY3QiOjk0fV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ITB9LHt9XSw2NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX3VpZCIpKCJtZXRhIiksbz1lKCIuL19pcy1vYmplY3QiKSxpPWUoIi4vX2hhcyIpLHM9ZSgiLi9fb2JqZWN0LWRwIikuZixhPTAsdT1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxjPSFlKCIuL19mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIHUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxsPWZ1bmN0aW9uKGUpe3MoZSxuLHt2YWx1ZTp7aToiTyIrICsrYSx3Ont9fX0pfSxmPWZ1bmN0aW9uKGUsdCl7aWYoIW8oZSkpcmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlP2U6KCJzdHJpbmciPT10eXBlb2YgZT8iUyI6IlAiKStlO2lmKCFpKGUsbikpe2lmKCF1KGUpKXJldHVybiJGIjtpZighdClyZXR1cm4iRSI7bChlKX1yZXR1cm4gZVtuXS5pfSxwPWZ1bmN0aW9uKGUsdCl7aWYoIWkoZSxuKSl7aWYoIXUoZSkpcmV0dXJuITA7aWYoIXQpcmV0dXJuITE7bChlKX1yZXR1cm4gZVtuXS53fSxkPWZ1bmN0aW9uKGUpe3JldHVybiBjJiZoLk5FRUQmJnUoZSkmJiFpKGUsbikmJmwoZSksZX0saD10LmV4cG9ydHM9e0tFWTpuLE5FRUQ6ITEsZmFzdEtleTpmLGdldFdlYWs6cCxvbkZyZWV6ZTpkfX0seyIuL19mYWlscyI6NDcsIi4vX2hhcyI6NTAsIi4vX2lzLW9iamVjdCI6NTgsIi4vX29iamVjdC1kcCI6NzAsIi4vX3VpZCI6OTh9XSw2ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vX2dsb2JhbCIpLGE9ZSgiLi9fdGFzayIpLnNldCx1PXMuTXV0YXRpb25PYnNlcnZlcnx8cy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGM9cy5wcm9jZXNzLGw9cy5Qcm9taXNlLGY9InByb2Nlc3MiPT1lKCIuL19jb2YiKShjKSxwPWZ1bmN0aW9uKCl7dmFyIGUsdDtmb3IoZiYmKGU9Yy5kb21haW4pJiZlLmV4aXQoKTtuOyl0PW4uZm4sdCgpLG49bi5uZXh0O289dm9pZCAwLGUmJmUuZW50ZXIoKX07aWYoZilpPWZ1bmN0aW9uKCl7Yy5uZXh0VGljayhwKX07ZWxzZSBpZih1KXt2YXIgZD0hMCxoPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgdShwKS5vYnNlcnZlKGgse2NoYXJhY3RlckRhdGE6ITB9KSxpPWZ1bmN0aW9uKCl7aC5kYXRhPWQ9IWR9fWVsc2UgaT1sJiZsLnJlc29sdmU/ZnVuY3Rpb24oKXtsLnJlc29sdmUoKS50aGVuKHApfTpmdW5jdGlvbigpe2EuY2FsbChzLHApfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDB9O28mJihvLm5leHQ9dCksbnx8KG49dCxpKCkpLG89dH19LHsiLi9fY29mIjozOCwiLi9fZ2xvYmFsIjo0OSwiLi9fdGFzayI6OTF9XSw2OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2FuLW9iamVjdCIpLG89ZSgiLi9fb2JqZWN0LWRwcyIpLGk9ZSgiLi9fZW51bS1idWcta2V5cyIpLHM9ZSgiLi9fc2hhcmVkLWtleSIpKCJJRV9QUk9UTyIpLGE9ZnVuY3Rpb24oKXt9LHU9InByb3RvdHlwZSIsYz1mdW5jdGlvbigpe3ZhciB0LHI9ZSgiLi9fZG9tLWNyZWF0ZSIpKCJpZnJhbWUiKSxuPWkubGVuZ3RoLG89Ij4iO2ZvcihyLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGUoIi4vX2h0bWwiKS5hcHBlbmRDaGlsZChyKSxyLnNyYz0iamF2YXNjcmlwdDoiLHQ9ci5jb250ZW50V2luZG93LmRvY3VtZW50LHQub3BlbigpLHQud3JpdGUoIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8L3NjcmlwdCIrbyksdC5jbG9zZSgpLGM9dC5GO24tLTspZGVsZXRlIGNbdV1baVtuXV07cmV0dXJuIGMoKX07dC5leHBvcnRzPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUsdCl7dmFyIHI7cmV0dXJuIG51bGwhPT1lPyhhW3VdPW4oZSkscj1uZXcgYSxhW3VdPW51bGwscltzXT1lKTpyPWMoKSx2b2lkIDA9PT10P3I6byhyLHQpfX0seyIuL19hbi1vYmplY3QiOjM1LCIuL19kb20tY3JlYXRlIjo0MywiLi9fZW51bS1idWcta2V5cyI6NDQsIi4vX2h0bWwiOjUyLCIuL19vYmplY3QtZHBzIjo3MSwiLi9fc2hhcmVkLWtleSI6ODd9XSw3MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2FuLW9iamVjdCIpLG89ZSgiLi9faWU4LWRvbS1kZWZpbmUiKSxpPWUoIi4vX3RvLXByaW1pdGl2ZSIpLHM9T2JqZWN0LmRlZmluZVByb3BlcnR5O3IuZj1lKCIuL19kZXNjcmlwdG9ycyIpP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihlLHQscil7aWYobihlKSx0PWkodCwhMCksbihyKSxvKXRyeXtyZXR1cm4gcyhlLHQscil9Y2F0Y2goYSl7fWlmKCJnZXQiaW4gcnx8InNldCJpbiByKXRocm93IFR5cGVFcnJvcigiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhIik7cmV0dXJuInZhbHVlImluIHImJihlW3RdPXIudmFsdWUpLGV9fSx7Ii4vX2FuLW9iamVjdCI6MzUsIi4vX2Rlc2NyaXB0b3JzIjo0MiwiLi9faWU4LWRvbS1kZWZpbmUiOjUzLCIuL190by1wcmltaXRpdmUiOjk3fV0sNzE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19vYmplY3QtZHAiKSxvPWUoIi4vX2FuLW9iamVjdCIpLGk9ZSgiLi9fb2JqZWN0LWtleXMiKTt0LmV4cG9ydHM9ZSgiLi9fZGVzY3JpcHRvcnMiKT9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbihlLHQpe28oZSk7Zm9yKHZhciByLHM9aSh0KSxhPXMubGVuZ3RoLHU9MDthPnU7KW4uZihlLHI9c1t1KytdLHRbcl0pO3JldHVybiBlfX0seyIuL19hbi1vYmplY3QiOjM1LCIuL19kZXNjcmlwdG9ycyI6NDIsIi4vX29iamVjdC1kcCI6NzAsIi4vX29iamVjdC1rZXlzIjo3OH1dLDcyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fb2JqZWN0LXBpZSIpLG89ZSgiLi9fcHJvcGVydHktZGVzYyIpLGk9ZSgiLi9fdG8taW9iamVjdCIpLHM9ZSgiLi9fdG8tcHJpbWl0aXZlIiksYT1lKCIuL19oYXMiKSx1PWUoIi4vX2llOC1kb20tZGVmaW5lIiksYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO3IuZj1lKCIuL19kZXNjcmlwdG9ycyIpP2M6ZnVuY3Rpb24oZSx0KXtpZihlPWkoZSksdD1zKHQsITApLHUpdHJ5e3JldHVybiBjKGUsdCl9Y2F0Y2gocil7fXJldHVybiBhKGUsdCk/byghbi5mLmNhbGwoZSx0KSxlW3RdKTp2b2lkIDB9fSx7Ii4vX2Rlc2NyaXB0b3JzIjo0MiwiLi9faGFzIjo1MCwiLi9faWU4LWRvbS1kZWZpbmUiOjUzLCIuL19vYmplY3QtcGllIjo3OSwiLi9fcHJvcGVydHktZGVzYyI6ODEsIi4vX3RvLWlvYmplY3QiOjk0LCIuL190by1wcmltaXRpdmUiOjk3fV0sNzM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL190by1pb2JqZWN0Iiksbz1lKCIuL19vYmplY3QtZ29wbiIpLmYsaT17fS50b1N0cmluZyxzPSJvYmplY3QiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10sYT1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIG8oZSl9Y2F0Y2godCl7cmV0dXJuIHMuc2xpY2UoKX19O3QuZXhwb3J0cy5mPWZ1bmN0aW9uKGUpe3JldHVybiBzJiYiW29iamVjdCBXaW5kb3ddIj09aS5jYWxsKGUpP2EoZSk6byhuKGUpKX19LHsiLi9fb2JqZWN0LWdvcG4iOjc0LCIuL190by1pb2JqZWN0Ijo5NH1dLDc0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fb2JqZWN0LWtleXMtaW50ZXJuYWwiKSxvPWUoIi4vX2VudW0tYnVnLWtleXMiKS5jb25jYXQoImxlbmd0aCIsInByb3RvdHlwZSIpO3IuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc3x8ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSxvKX19LHsiLi9fZW51bS1idWcta2V5cyI6NDQsIi4vX29iamVjdC1rZXlzLWludGVybmFsIjo3N31dLDc1OltmdW5jdGlvbihlLHQscil7ci5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LHt9XSw3NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2hhcyIpLG89ZSgiLi9fdG8tb2JqZWN0IiksaT1lKCIuL19zaGFyZWQta2V5IikoIklFX1BST1RPIikscz1PYmplY3QucHJvdG90eXBlO3QuZXhwb3J0cz1PYmplY3QuZ2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUpe3JldHVybiBlPW8oZSksbihlLGkpP2VbaV06ImZ1bmN0aW9uIj09dHlwZW9mIGUuY29uc3RydWN0b3ImJmUgaW5zdGFuY2VvZiBlLmNvbnN0cnVjdG9yP2UuY29uc3RydWN0b3IucHJvdG90eXBlOmUgaW5zdGFuY2VvZiBPYmplY3Q/czpudWxsfX0seyIuL19oYXMiOjUwLCIuL19zaGFyZWQta2V5Ijo4NywiLi9fdG8tb2JqZWN0Ijo5Nn1dLDc3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9faGFzIiksbz1lKCIuL190by1pb2JqZWN0IiksaT1lKCIuL19hcnJheS1pbmNsdWRlcyIpKCExKSxzPWUoIi4vX3NoYXJlZC1rZXkiKSgiSUVfUFJPVE8iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixhPW8oZSksdT0wLGM9W107Zm9yKHIgaW4gYSlyIT1zJiZuKGEscikmJmMucHVzaChyKTtmb3IoO3QubGVuZ3RoPnU7KW4oYSxyPXRbdSsrXSkmJih+aShjLHIpfHxjLnB1c2gocikpO3JldHVybiBjfX0seyIuL19hcnJheS1pbmNsdWRlcyI6MzYsIi4vX2hhcyI6NTAsIi4vX3NoYXJlZC1rZXkiOjg3LCIuL190by1pb2JqZWN0Ijo5NH1dLDc4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fb2JqZWN0LWtleXMtaW50ZXJuYWwiKSxvPWUoIi4vX2VudW0tYnVnLWtleXMiKTt0LmV4cG9ydHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGUpe3JldHVybiBuKGUsbyl9fSx7Ii4vX2VudW0tYnVnLWtleXMiOjQ0LCIuL19vYmplY3Qta2V5cy1pbnRlcm5hbCI6Nzd9XSw3OTpbZnVuY3Rpb24oZSx0LHIpe3IuZj17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZX0se31dLDgwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fZXhwb3J0Iiksbz1lKCIuL19jb3JlIiksaT1lKCIuL19mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vX2NvcmUiOjM5LCIuL19leHBvcnQiOjQ2LCIuL19mYWlscyI6NDd9XSw4MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw4MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2hpZGUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbyBpbiB0KXImJmVbb10/ZVtvXT10W29dOm4oZSxvLHRbb10pO3JldHVybiBlfX0seyIuL19oaWRlIjo1MX1dLDgzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vX2hpZGUiKX0seyIuL19oaWRlIjo1MX1dLDg0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9faXMtb2JqZWN0Iiksbz1lKCIuL19hbi1vYmplY3QiKSxpPWZ1bmN0aW9uKGUsdCl7aWYobyhlKSwhbih0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHQscixuKXt0cnl7bj1lKCIuL19jdHgiKShGdW5jdGlvbi5jYWxsLGUoIi4vX29iamVjdC1nb3BkIikuZihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbih0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChvKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBpKGUsdCkscj9lLl9fcHJvdG9fXz10Om4oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6aX19LHsiLi9fYW4tb2JqZWN0IjozNSwiLi9fY3R4Ijo0MCwiLi9faXMtb2JqZWN0Ijo1OCwiLi9fb2JqZWN0LWdvcGQiOjcyfV0sODU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi9fZ2xvYmFsIiksbz1lKCIuL19jb3JlIiksaT1lKCIuL19vYmplY3QtZHAiKSxzPWUoIi4vX2Rlc2NyaXB0b3JzIiksYT1lKCIuL193a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2Ygb1tlXT9vW2VdOm5bZV07cyYmdCYmIXRbYV0mJmkuZih0LGEse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi9fY29yZSI6MzksIi4vX2Rlc2NyaXB0b3JzIjo0MiwiLi9fZ2xvYmFsIjo0OSwiLi9fb2JqZWN0LWRwIjo3MCwiLi9fd2tzIjo5OX1dLDg2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fb2JqZWN0LWRwIikuZixvPWUoIi4vX2hhcyIpLGk9ZSgiLi9fd2tzIikoInRvU3RyaW5nVGFnIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlJiYhbyhlPXI/ZTplLnByb3RvdHlwZSxpKSYmbihlLGkse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0fSl9fSx7Ii4vX2hhcyI6NTAsIi4vX29iamVjdC1kcCI6NzAsIi4vX3drcyI6OTl9XSw4NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX3NoYXJlZCIpKCJrZXlzIiksbz1lKCIuL191aWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPW8oZSkpfX0seyIuL19zaGFyZWQiOjg4LCIuL191aWQiOjk4fV0sODg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19nbG9iYWwiKSxvPSJfX2NvcmUtanNfc2hhcmVkX18iLGk9bltvXXx8KG5bb109e30pO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaVtlXXx8KGlbZV09e30pfX0seyIuL19nbG9iYWwiOjQ5fV0sODk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19hbi1vYmplY3QiKSxvPWUoIi4vX2EtZnVuY3Rpb24iKSxpPWUoIi4vX3drcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIscz1uKGUpLmNvbnN0cnVjdG9yO3JldHVybiB2b2lkIDA9PT1zfHx2b2lkIDA9PShyPW4ocylbaV0pP3Q6byhyKX19LHsiLi9fYS1mdW5jdGlvbiI6MzIsIi4vX2FuLW9iamVjdCI6MzUsIi4vX3drcyI6OTl9XSw5MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX3RvLWludGVnZXIiKSxvPWUoIi4vX2RlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIGkscyxhPVN0cmluZyhvKHQpKSx1PW4ociksYz1hLmxlbmd0aDtyZXR1cm4gMD51fHx1Pj1jP2U/IiI6dm9pZCAwOihpPWEuY2hhckNvZGVBdCh1KSw1NTI5Nj5pfHxpPjU2MzE5fHx1KzE9PT1jfHwocz1hLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fHM+NTczNDM/ZT9hLmNoYXJBdCh1KTppOmU/YS5zbGljZSh1LHUrMik6KGktNTUyOTY8PDEwKSsocy01NjMyMCkrNjU1MzYpfX19LHsiLi9fZGVmaW5lZCI6NDEsIi4vX3RvLWludGVnZXIiOjkzfV0sOTE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuL19jdHgiKSxhPWUoIi4vX2ludm9rZSIpLHU9ZSgiLi9faHRtbCIpLGM9ZSgiLi9fZG9tLWNyZWF0ZSIpLGw9ZSgiLi9fZ2xvYmFsIiksZj1sLnByb2Nlc3MscD1sLnNldEltbWVkaWF0ZSxkPWwuY2xlYXJJbW1lZGlhdGUsaD1sLk1lc3NhZ2VDaGFubmVsLGI9MCx5PXt9LF89Im9ucmVhZHlzdGF0ZWNoYW5nZSIsdj1mdW5jdGlvbigpe3ZhciBlPSt0aGlzO2lmKHkuaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PXlbZV07ZGVsZXRlIHlbZV0sdCgpfX0sbT1mdW5jdGlvbihlKXt2LmNhbGwoZS5kYXRhKX07cCYmZHx8KHA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTthcmd1bWVudHMubGVuZ3RoPnI7KXQucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIHlbKytiXT1mdW5jdGlvbigpe2EoImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTpGdW5jdGlvbihlKSx0KX0sbihiKSxifSxkPWZ1bmN0aW9uKGUpe2RlbGV0ZSB5W2VdfSwicHJvY2VzcyI9PWUoIi4vX2NvZiIpKGYpP249ZnVuY3Rpb24oZSl7Zi5uZXh0VGljayhzKHYsZSwxKSl9Omg/KG89bmV3IGgsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPW0sbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6bC5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFsLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7bC5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGwuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbSwhMSkpOm49XyBpbiBjKCJzY3JpcHQiKT9mdW5jdGlvbihlKXt1LmFwcGVuZENoaWxkKGMoInNjcmlwdCIpKVtfXT1mdW5jdGlvbigpe3UucmVtb3ZlQ2hpbGQodGhpcyksdi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKHYsZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OnAsY2xlYXI6ZH19LHsiLi9fY29mIjozOCwiLi9fY3R4Ijo0MCwiLi9fZG9tLWNyZWF0ZSI6NDMsIi4vX2dsb2JhbCI6NDksIi4vX2h0bWwiOjUyLCIuL19pbnZva2UiOjU0fV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL190by1pbnRlZ2VyIiksbz1NYXRoLm1heCxpPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBlPW4oZSksMD5lP28oZSt0LDApOmkoZSx0KX19LHsiLi9fdG8taW50ZWdlciI6OTN9XSw5MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguY2VpbCxvPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bzpuKShlKX19LHt9XSw5NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2lvYmplY3QiKSxvPWUoIi4vX2RlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vX2RlZmluZWQiOjQxLCIuL19pb2JqZWN0Ijo1NX1dLDk1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fdG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vX3RvLWludGVnZXIiOjkzfV0sOTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QobihlKSl9fSx7Ii4vX2RlZmluZWQiOjQxfV0sOTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighbihlKSlyZXR1cm4gZTt2YXIgcixvO2lmKHQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87aWYoImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS52YWx1ZU9mKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvO2lmKCF0JiYiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnRvU3RyaW5nKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvOwp0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZSIpfX0seyIuL19pcy1vYmplY3QiOjU4fV0sOTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sOTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19zaGFyZWQiKSgid2tzIiksbz1lKCIuL191aWQiKSxpPWUoIi4vX2dsb2JhbCIpLlN5bWJvbCxzPSJmdW5jdGlvbiI9PXR5cGVvZiBpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09cyYmaVtlXXx8KHM/aTpvKSgiU3ltYm9sLiIrZSkpfX0seyIuL19nbG9iYWwiOjQ5LCIuL19zaGFyZWQiOjg4LCIuL191aWQiOjk4fV0sMTAwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fY2xhc3NvZiIpLG89ZSgiLi9fd2tzIikoIml0ZXJhdG9yIiksaT1lKCIuL19pdGVyYXRvcnMiKTt0LmV4cG9ydHM9ZSgiLi9fY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi9fY2xhc3NvZiI6MzcsIi4vX2NvcmUiOjM5LCIuL19pdGVyYXRvcnMiOjY0LCIuL193a3MiOjk5fV0sMTAxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vX2FkZC10by11bnNjb3BhYmxlcyIpLG89ZSgiLi9faXRlci1zdGVwIiksaT1lKCIuL19pdGVyYXRvcnMiKSxzPWUoIi4vX3RvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZSgiLi9faXRlci1kZWZpbmUiKShBcnJheSwiQXJyYXkiLGZ1bmN0aW9uKGUsdCl7dGhpcy5fdD1zKGUpLHRoaXMuX2k9MCx0aGlzLl9rPXR9LGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdCx0PXRoaXMuX2sscj10aGlzLl9pKys7cmV0dXJuIWV8fHI+PWUubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKToia2V5cyI9PXQ/bygwLHIpOiJ2YWx1ZXMiPT10P28oMCxlW3JdKTpvKDAsW3IsZVtyXV0pfSwidmFsdWVzIiksaS5Bcmd1bWVudHM9aS5BcnJheSxuKCJrZXlzIiksbigidmFsdWVzIiksbigiZW50cmllcyIpfSx7Ii4vX2FkZC10by11bnNjb3BhYmxlcyI6MzMsIi4vX2l0ZXItZGVmaW5lIjo2MSwiLi9faXRlci1zdGVwIjo2MywiLi9faXRlcmF0b3JzIjo2NCwiLi9fdG8taW9iamVjdCI6OTR9XSwxMDI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19leHBvcnQiKTtuKG4uUywiT2JqZWN0Iix7Y3JlYXRlOmUoIi4vX29iamVjdC1jcmVhdGUiKX0pfSx7Ii4vX2V4cG9ydCI6NDYsIi4vX29iamVjdC1jcmVhdGUiOjY5fV0sMTAzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fZXhwb3J0Iik7bihuLlMrbi5GKiFlKCIuL19kZXNjcmlwdG9ycyIpLCJPYmplY3QiLHtkZWZpbmVQcm9wZXJ0eTplKCIuL19vYmplY3QtZHAiKS5mfSl9LHsiLi9fZGVzY3JpcHRvcnMiOjQyLCIuL19leHBvcnQiOjQ2LCIuL19vYmplY3QtZHAiOjcwfV0sMTA0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9faXMtb2JqZWN0Iiksbz1lKCIuL19tZXRhIikub25GcmVlemU7ZSgiLi9fb2JqZWN0LXNhcCIpKCJmcmVlemUiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSYmbih0KT9lKG8odCkpOnR9fSl9LHsiLi9faXMtb2JqZWN0Ijo1OCwiLi9fbWV0YSI6NjcsIi4vX29iamVjdC1zYXAiOjgwfV0sMTA1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fdG8taW9iamVjdCIpLG89ZSgiLi9fb2JqZWN0LWdvcGQiKS5mO2UoIi4vX29iamVjdC1zYXAiKSgiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBvKG4oZSksdCl9fSl9LHsiLi9fb2JqZWN0LWdvcGQiOjcyLCIuL19vYmplY3Qtc2FwIjo4MCwiLi9fdG8taW9iamVjdCI6OTR9XSwxMDY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL190by1vYmplY3QiKSxvPWUoIi4vX29iamVjdC1ncG8iKTtlKCIuL19vYmplY3Qtc2FwIikoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbyhuKGUpKX19KX0seyIuL19vYmplY3QtZ3BvIjo3NiwiLi9fb2JqZWN0LXNhcCI6ODAsIi4vX3RvLW9iamVjdCI6OTZ9XSwxMDc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL190by1vYmplY3QiKSxvPWUoIi4vX29iamVjdC1rZXlzIik7ZSgiLi9fb2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbyhuKGUpKX19KX0seyIuL19vYmplY3Qta2V5cyI6NzgsIi4vX29iamVjdC1zYXAiOjgwLCIuL190by1vYmplY3QiOjk2fV0sMTA4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fZXhwb3J0Iik7bihuLlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOmUoIi4vX3NldC1wcm90byIpLnNldH0pfSx7Ii4vX2V4cG9ydCI6NDYsIi4vX3NldC1wcm90byI6ODR9XSwxMDk6W2Z1bmN0aW9uKGUsdCxyKXt9LHt9XSwxMTA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG4sbyxpLHM9ZSgiLi9fbGlicmFyeSIpLGE9ZSgiLi9fZ2xvYmFsIiksdT1lKCIuL19jdHgiKSxjPWUoIi4vX2NsYXNzb2YiKSxsPWUoIi4vX2V4cG9ydCIpLGY9ZSgiLi9faXMtb2JqZWN0IikscD0oZSgiLi9fYW4tb2JqZWN0IiksZSgiLi9fYS1mdW5jdGlvbiIpKSxkPWUoIi4vX2FuLWluc3RhbmNlIiksaD1lKCIuL19mb3Itb2YiKSxiPShlKCIuL19zZXQtcHJvdG8iKS5zZXQsZSgiLi9fc3BlY2llcy1jb25zdHJ1Y3RvciIpKSx5PWUoIi4vX3Rhc2siKS5zZXQsXz1lKCIuL19taWNyb3Rhc2siKSx2PSJQcm9taXNlIixtPWEuVHlwZUVycm9yLGc9YS5wcm9jZXNzLGo9YVt2XSxnPWEucHJvY2VzcyxPPSJwcm9jZXNzIj09YyhnKSxFPWZ1bmN0aW9uKCl7fSx3PSEhZnVuY3Rpb24oKXt0cnl7dmFyIHQ9ai5yZXNvbHZlKDEpLHI9KHQuY29uc3RydWN0b3I9e30pW2UoIi4vX3drcyIpKCJzcGVjaWVzIildPWZ1bmN0aW9uKGUpe2UoRSxFKX07cmV0dXJuKE98fCJmdW5jdGlvbiI9PXR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQpJiZ0LnRoZW4oRSlpbnN0YW5jZW9mIHJ9Y2F0Y2gobil7fX0oKSxrPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10fHxlPT09aiYmdD09PWl9LFA9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGYoZSkmJiJmdW5jdGlvbiI9PXR5cGVvZih0PWUudGhlbik/dDohMX0sUj1mdW5jdGlvbihlKXtyZXR1cm4gayhqLGUpP25ldyBTKGUpOm5ldyBvKGUpfSxTPW89ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IG0oIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yIik7dD1lLHI9bn0pLHRoaXMucmVzb2x2ZT1wKHQpLHRoaXMucmVqZWN0PXAocil9LE09ZnVuY3Rpb24oZSl7dHJ5e2UoKX1jYXRjaCh0KXtyZXR1cm57ZXJyb3I6dH19fSx4PWZ1bmN0aW9uKGUsdCl7aWYoIWUuX24pe2UuX249ITA7dmFyIHI9ZS5fYztfKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUuX3Ysbz0xPT1lLl9zLGk9MCxzPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGE9dC5yZXNvbHZlLHU9dC5yZWplY3QsYz10LmRvbWFpbjt0cnl7cz8ob3x8KDI9PWUuX2gmJk4oZSksZS5faD0xKSxzPT09ITA/cj1uOihjJiZjLmVudGVyKCkscj1zKG4pLGMmJmMuZXhpdCgpKSxyPT09dC5wcm9taXNlP3UobSgiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKTooaT1QKHIpKT9pLmNhbGwocixhLHUpOmEocikpOnUobil9Y2F0Y2gobCl7dShsKX19O3IubGVuZ3RoPmk7KXMocltpKytdKTtlLl9jPVtdLGUuX249ITEsdCYmIWUuX2gmJlQoZSl9KX19LFQ9ZnVuY3Rpb24oZSl7eS5jYWxsKGEsZnVuY3Rpb24oKXt2YXIgdCxyLG4sbz1lLl92O2lmKEEoZSkmJih0PU0oZnVuY3Rpb24oKXtPP2cuZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixvLGUpOihyPWEub251bmhhbmRsZWRyZWplY3Rpb24pP3Ioe3Byb21pc2U6ZSxyZWFzb246b30pOihuPWEuY29uc29sZSkmJm4uZXJyb3ImJm4uZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbyl9KSxlLl9oPU98fEEoZSk/MjoxKSxlLl9hPXZvaWQgMCx0KXRocm93IHQuZXJyb3J9KX0sQT1mdW5jdGlvbihlKXtpZigxPT1lLl9oKXJldHVybiExO2Zvcih2YXIgdCxyPWUuX2F8fGUuX2Msbj0wO3IubGVuZ3RoPm47KWlmKHQ9cltuKytdLHQuZmFpbHx8IUEodC5wcm9taXNlKSlyZXR1cm4hMTtyZXR1cm4hMH0sTj1mdW5jdGlvbihlKXt5LmNhbGwoYSxmdW5jdGlvbigpe3ZhciB0O08/Zy5lbWl0KCJyZWplY3Rpb25IYW5kbGVkIixlKToodD1hLm9ucmVqZWN0aW9uaGFuZGxlZCkmJnQoe3Byb21pc2U6ZSxyZWFzb246ZS5fdn0pfSl9LEM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9kfHwodC5fZD0hMCx0PXQuX3d8fHQsdC5fdj1lLHQuX3M9Mix0Ll9hfHwodC5fYT10Ll9jLnNsaWNlKCkpLHgodCwhMCkpfSxJPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5fZCl7ci5fZD0hMCxyPXIuX3d8fHI7dHJ5e2lmKHI9PT1lKXRocm93IG0oIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7KHQ9UChlKSk/XyhmdW5jdGlvbigpe3ZhciBuPXtfdzpyLF9kOiExfTt0cnl7dC5jYWxsKGUsdShJLG4sMSksdShDLG4sMSkpfWNhdGNoKG8pe0MuY2FsbChuLG8pfX0pOihyLl92PWUsci5fcz0xLHgociwhMSkpfWNhdGNoKG4pe0MuY2FsbCh7X3c6cixfZDohMX0sbil9fX07d3x8KGo9ZnVuY3Rpb24oZSl7ZCh0aGlzLGosdiwiX2giKSxwKGUpLG4uY2FsbCh0aGlzKTt0cnl7ZSh1KEksdGhpcywxKSx1KEMsdGhpcywxKSl9Y2F0Y2godCl7Qy5jYWxsKHRoaXMsdCl9fSxuPWZ1bmN0aW9uKGUpe3RoaXMuX2M9W10sdGhpcy5fYT12b2lkIDAsdGhpcy5fcz0wLHRoaXMuX2Q9ITEsdGhpcy5fdj12b2lkIDAsdGhpcy5faD0wLHRoaXMuX249ITF9LG4ucHJvdG90eXBlPWUoIi4vX3JlZGVmaW5lLWFsbCIpKGoucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9UihiKHRoaXMsaikpO3JldHVybiByLm9rPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6ITAsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LHIuZG9tYWluPU8/Zy5kb21haW46dm9pZCAwLHRoaXMuX2MucHVzaChyKSx0aGlzLl9hJiZ0aGlzLl9hLnB1c2gociksdGhpcy5fcyYmeCh0aGlzLCExKSxyLnByb21pc2V9LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSksUz1mdW5jdGlvbigpe3ZhciBlPW5ldyBuO3RoaXMucHJvbWlzZT1lLHRoaXMucmVzb2x2ZT11KEksZSwxKSx0aGlzLnJlamVjdD11KEMsZSwxKX0pLGwobC5HK2wuVytsLkYqIXcse1Byb21pc2U6an0pLGUoIi4vX3NldC10by1zdHJpbmctdGFnIikoaix2KSxlKCIuL19zZXQtc3BlY2llcyIpKHYpLGk9ZSgiLi9fY29yZSIpW3ZdLGwobC5TK2wuRiohdyx2LHtyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9Uih0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSxsKGwuUytsLkYqKHN8fCF3KSx2LHtyZXNvbHZlOmZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBqJiZrKGUuY29uc3RydWN0b3IsdGhpcykpcmV0dXJuIGU7dmFyIHQ9Uih0aGlzKSxyPXQucmVzb2x2ZTtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksbChsLlMrbC5GKiEodyYmZSgiLi9faXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXtqLmFsbChlKVsiY2F0Y2giXShFKX0pKSx2LHthbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPVIodCksbj1yLnJlc29sdmUsbz1yLnJlamVjdCxpPU0oZnVuY3Rpb24oKXt2YXIgcj1bXSxpPTAscz0xO2goZSwhMSxmdW5jdGlvbihlKXt2YXIgYT1pKyssdT0hMTtyLnB1c2godm9pZCAwKSxzKyssdC5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7dXx8KHU9ITAsclthXT1lLC0tc3x8bihyKSl9LG8pfSksLS1zfHxuKHIpfSk7cmV0dXJuIGkmJm8oaS5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1SKHQpLG49ci5yZWplY3Qsbz1NKGZ1bmN0aW9uKCl7aChlLCExLGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKHIucmVzb2x2ZSxuKX0pfSk7cmV0dXJuIG8mJm4oby5lcnJvciksci5wcm9taXNlfX0pfSx7Ii4vX2EtZnVuY3Rpb24iOjMyLCIuL19hbi1pbnN0YW5jZSI6MzQsIi4vX2FuLW9iamVjdCI6MzUsIi4vX2NsYXNzb2YiOjM3LCIuL19jb3JlIjozOSwiLi9fY3R4Ijo0MCwiLi9fZXhwb3J0Ijo0NiwiLi9fZm9yLW9mIjo0OCwiLi9fZ2xvYmFsIjo0OSwiLi9faXMtb2JqZWN0Ijo1OCwiLi9faXRlci1kZXRlY3QiOjYyLCIuL19saWJyYXJ5Ijo2NiwiLi9fbWljcm90YXNrIjo2OCwiLi9fcmVkZWZpbmUtYWxsIjo4MiwiLi9fc2V0LXByb3RvIjo4NCwiLi9fc2V0LXNwZWNpZXMiOjg1LCIuL19zZXQtdG8tc3RyaW5nLXRhZyI6ODYsIi4vX3NwZWNpZXMtY29uc3RydWN0b3IiOjg5LCIuL190YXNrIjo5MSwiLi9fd2tzIjo5OX1dLDExMTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuL19zdHJpbmctYXQiKSghMCk7ZSgiLi9faXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vX2l0ZXItZGVmaW5lIjo2MSwiLi9fc3RyaW5nLWF0Ijo5MH1dLDExMjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuL19nbG9iYWwiKSxvPWUoIi4vX2NvcmUiKSxpPWUoIi4vX2hhcyIpLHM9ZSgiLi9fZGVzY3JpcHRvcnMiKSxhPWUoIi4vX2V4cG9ydCIpLHU9ZSgiLi9fcmVkZWZpbmUiKSxjPWUoIi4vX21ldGEiKS5LRVksbD1lKCIuL19mYWlscyIpLGY9ZSgiLi9fc2hhcmVkIikscD1lKCIuL19zZXQtdG8tc3RyaW5nLXRhZyIpLGQ9ZSgiLi9fdWlkIiksaD1lKCIuL193a3MiKSxiPWUoIi4vX2tleW9mIikseT1lKCIuL19lbnVtLWtleXMiKSxfPWUoIi4vX2lzLWFycmF5Iiksdj1lKCIuL19hbi1vYmplY3QiKSxtPWUoIi4vX3RvLWlvYmplY3QiKSxnPWUoIi4vX3RvLXByaW1pdGl2ZSIpLGo9ZSgiLi9fcHJvcGVydHktZGVzYyIpLE89ZSgiLi9fb2JqZWN0LWNyZWF0ZSIpLEU9ZSgiLi9fb2JqZWN0LWdvcG4tZXh0Iiksdz1lKCIuL19vYmplY3QtZ29wZCIpLGs9ZSgiLi9fb2JqZWN0LWRwIiksUD13LmYsUj1rLmYsUz1FLmYsTT1uLlN5bWJvbCx4PW4uSlNPTixUPXgmJnguc3RyaW5naWZ5LEE9ITEsTj0icHJvdG90eXBlIixDPWgoIl9oaWRkZW4iKSxJPWgoInRvUHJpbWl0aXZlIiksVT17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxEPWYoInN5bWJvbC1yZWdpc3RyeSIpLEw9Zigic3ltYm9scyIpLEY9T2JqZWN0W05dLEI9ImZ1bmN0aW9uIj09dHlwZW9mIE0sSD1uLlFPYmplY3QscT1zJiZsKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU8oUih7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiBSKHRoaXMsImEiLHt2YWx1ZTo3fSkuYX19KSkuYX0pP2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1QKEYsdCk7biYmZGVsZXRlIEZbdF0sUihlLHQsciksbiYmZSE9PUYmJlIoRix0LG4pfTpSLFk9ZnVuY3Rpb24oZSl7dmFyIHQ9TFtlXT1PKE1bTl0pO3JldHVybiB0Ll9rPWUscyYmQSYmcShGLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6ZnVuY3Rpb24odCl7aSh0aGlzLEMpJiZpKHRoaXNbQ10sZSkmJih0aGlzW0NdW2VdPSExKSxxKHRoaXMsZSxqKDEsdCkpfX0pLHR9LEc9QiYmInN5bWJvbCI9PXR5cGVvZiBNLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBNfSxLPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdihlKSx0PWcodCwhMCksdihyKSxpKEwsdCk/KHIuZW51bWVyYWJsZT8oaShlLEMpJiZlW0NdW3RdJiYoZVtDXVt0XT0hMSkscj1PKHIse2VudW1lcmFibGU6aigwLCExKX0pKTooaShlLEMpfHxSKGUsQyxqKDEse30pKSxlW0NdW3RdPSEwKSxxKGUsdCxyKSk6UihlLHQscil9LFY9ZnVuY3Rpb24oZSx0KXt2KGUpO2Zvcih2YXIgcixuPXkodD1tKHQpKSxvPTAsaT1uLmxlbmd0aDtpPm87KUsoZSxyPW5bbysrXSx0W3JdKTtyZXR1cm4gZX0sVz1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P08oZSk6VihPKGUpLHQpfSx6PWZ1bmN0aW9uKGUpe3ZhciB0PVUuY2FsbCh0aGlzLGU9ZyhlLCEwKSk7cmV0dXJuIHR8fCFpKHRoaXMsZSl8fCFpKEwsZSl8fGkodGhpcyxDKSYmdGhpc1tDXVtlXT90OiEwfSxKPWZ1bmN0aW9uKGUsdCl7dmFyIHI9UChlPW0oZSksdD1nKHQsITApKTtyZXR1cm4hcnx8IWkoTCx0KXx8aShlLEMpJiZlW0NdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfSwkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPVMobShlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShMLHQ9cltvKytdKXx8dD09Q3x8dD09Y3x8bi5wdXNoKHQpO3JldHVybiBufSxYPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPVMobShlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShMLHQ9cltvKytdKSYmbi5wdXNoKExbdF0pO3JldHVybiBufSxRPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUmJiFHKGUpKXtmb3IodmFyIHQscixuPVtlXSxvPTE7YXJndW1lbnRzLmxlbmd0aD5vOyluLnB1c2goYXJndW1lbnRzW28rK10pO3JldHVybiB0PW5bMV0sImZ1bmN0aW9uIj09dHlwZW9mIHQmJihyPXQpLCFyJiZfKHQpfHwodD1mdW5jdGlvbihlLHQpe3JldHVybiByJiYodD1yLmNhbGwodGhpcyxlLHQpKSxHKHQpP3ZvaWQgMDp0fSksblsxXT10LFQuYXBwbHkoeCxuKX19LFo9bChmdW5jdGlvbigpe3ZhciBlPU0oKTtyZXR1cm4iW251bGxdIiE9VChbZV0pfHwie30iIT1UKHthOmV9KXx8Int9IiE9VChPYmplY3QoZSkpfSk7Qnx8KE09ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgTSl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEiKTtyZXR1cm4gWShkKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSl9LHUoTVtOXSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSx3LmY9SixrLmY9SyxlKCIuL19vYmplY3QtZ29wbiIpLmY9RS5mPSQsZSgiLi9fb2JqZWN0LXBpZSIpLmY9eixlKCIuL19vYmplY3QtZ29wcyIpLmY9WCxzJiYhZSgiLi9fbGlicmFyeSIpJiZ1KEYsInByb3BlcnR5SXNFbnVtZXJhYmxlIix6LCEwKSksYShhLkcrYS5XK2EuRiohQix7U3ltYm9sOk19KTtmb3IodmFyIGVlPSJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSx0ZT0wO2VlLmxlbmd0aD50ZTspe3ZhciByZT1lZVt0ZSsrXSxuZT1vLlN5bWJvbCxvZT1oKHJlKTtyZSBpbiBuZXx8UihuZSxyZSx7dmFsdWU6Qj9vZTpZKG9lKX0pfUgmJkhbTl0mJkhbTl0uZmluZENoaWxkfHwoQT0hMCksYShhLlMrYS5GKiFCLCJTeW1ib2wiLHsiZm9yIjpmdW5jdGlvbihlKXtyZXR1cm4gaShELGUrPSIiKT9EW2VdOkRbZV09TShlKX0sa2V5Rm9yOmZ1bmN0aW9uKGUpe2lmKEcoZSkpcmV0dXJuIGIoRCxlKTt0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIHN5bWJvbCEiKX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7QT0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7QT0hMX19KSxhKGEuUythLkYqIUIsIk9iamVjdCIse2NyZWF0ZTpXLGRlZmluZVByb3BlcnR5OkssZGVmaW5lUHJvcGVydGllczpWLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjpKLGdldE93blByb3BlcnR5TmFtZXM6JCxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6WH0pLHgmJmEoYS5TK2EuRiooIUJ8fFopLCJKU09OIix7c3RyaW5naWZ5OlF9KSxNW05dW0ldfHxlKCIuL19oaWRlIikoTVtOXSxJLE1bTl0udmFsdWVPZikscChNLCJTeW1ib2wiKSxwKE1hdGgsIk1hdGgiLCEwKSxwKG4uSlNPTiwiSlNPTiIsITApfSx7Ii4vX2FuLW9iamVjdCI6MzUsIi4vX2NvcmUiOjM5LCIuL19kZXNjcmlwdG9ycyI6NDIsIi4vX2VudW0ta2V5cyI6NDUsIi4vX2V4cG9ydCI6NDYsIi4vX2ZhaWxzIjo0NywiLi9fZ2xvYmFsIjo0OSwiLi9faGFzIjo1MCwiLi9faGlkZSI6NTEsIi4vX2lzLWFycmF5Ijo1NywiLi9fa2V5b2YiOjY1LCIuL19saWJyYXJ5Ijo2NiwiLi9fbWV0YSI6NjcsIi4vX29iamVjdC1jcmVhdGUiOjY5LCIuL19vYmplY3QtZHAiOjcwLCIuL19vYmplY3QtZ29wZCI6NzIsIi4vX29iamVjdC1nb3BuIjo3NCwiLi9fb2JqZWN0LWdvcG4tZXh0Ijo3MywiLi9fb2JqZWN0LWdvcHMiOjc1LCIuL19vYmplY3QtcGllIjo3OSwiLi9fcHJvcGVydHktZGVzYyI6ODEsIi4vX3JlZGVmaW5lIjo4MywiLi9fc2V0LXRvLXN0cmluZy10YWciOjg2LCIuL19zaGFyZWQiOjg4LCIuL190by1pb2JqZWN0Ijo5NCwiLi9fdG8tcHJpbWl0aXZlIjo5NywiLi9fdWlkIjo5OCwiLi9fd2tzIjo5OX1dLDExMzpbZnVuY3Rpb24oZSx0LHIpe2UoIi4vZXM2LmFycmF5Lml0ZXJhdG9yIik7Zm9yKHZhciBuPWUoIi4vX2dsb2JhbCIpLG89ZSgiLi9faGlkZSIpLGk9ZSgiLi9faXRlcmF0b3JzIikscz1lKCIuL193a3MiKSgidG9TdHJpbmdUYWciKSxhPVsiTm9kZUxpc3QiLCJET01Ub2tlbkxpc3QiLCJNZWRpYUxpc3QiLCJTdHlsZVNoZWV0TGlzdCIsIkNTU1J1bGVMaXN0Il0sdT0wOzU+dTt1Kyspe3ZhciBjPWFbdV0sbD1uW2NdLGY9bCYmbC5wcm90b3R5cGU7ZiYmIWZbc10mJm8oZixzLGMpLGlbY109aS5BcnJheX19LHsiLi9fZ2xvYmFsIjo0OSwiLi9faGlkZSI6NTEsIi4vX2l0ZXJhdG9ycyI6NjQsIi4vX3drcyI6OTksIi4vZXM2LmFycmF5Lml0ZXJhdG9yIjoxMDF9XSwxMTQ6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBuKCl7bD0hMSxhLmxlbmd0aD9jPWEuY29uY2F0KGMpOmY9LTEsYy5sZW5ndGgmJm8oKX1mdW5jdGlvbiBvKCl7aWYoIWwpe3ZhciBlPXNldFRpbWVvdXQobik7bD0hMDtmb3IodmFyIHQ9Yy5sZW5ndGg7dDspe2ZvcihhPWMsYz1bXTsrK2Y8dDspYSYmYVtmXS5ydW4oKTtmPS0xLHQ9Yy5sZW5ndGh9YT1udWxsLGw9ITEsY2xlYXJUaW1lb3V0KGUpfX1mdW5jdGlvbiBpKGUsdCl7dGhpcy5mdW49ZSx0aGlzLmFycmF5PXR9ZnVuY3Rpb24gcygpe312YXIgYSx1PXQuZXhwb3J0cz17fSxjPVtdLGw9ITEsZj0tMTt1Lm5leHRUaWNrPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07Yy5wdXNoKG5ldyBpKGUsdCkpLDEhPT1jLmxlbmd0aHx8bHx8c2V0VGltZW91dChvLDApfSxpLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfSx1LnRpdGxlPSJicm93c2VyIix1LmJyb3dzZXI9ITAsdS5lbnY9e30sdS5hcmd2PVtdLHUudmVyc2lvbj0iIix1LnZlcnNpb25zPXt9LHUub249cyx1LmFkZExpc3RlbmVyPXMsdS5vbmNlPXMsdS5vZmY9cyx1LnJlbW92ZUxpc3RlbmVyPXMsdS5yZW1vdmVBbGxMaXN0ZW5lcnM9cyx1LmVtaXQ9cyx1LmJpbmRpbmc9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCIpfSx1LmN3ZD1mdW5jdGlvbigpe3JldHVybiIvIn0sdS5jaGRpcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCIpfSx1LnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fSx7fV0sMTE1OltmdW5jdGlvbih0LHIsbil7IWZ1bmN0aW9uKHQsbil7ImZ1bmN0aW9uIj09dHlwZW9mIGUmJmUuYW1kP2UoW10sbik6InVuZGVmaW5lZCIhPXR5cGVvZiByJiZyLmV4cG9ydHM/ci5leHBvcnRzPW4oKTp0LnR2ND1uKCl9KHRoaXMsZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybiBlbmNvZGVVUkkoZSkucmVwbGFjZSgvJTI1WzAtOV1bMC05XS9nLGZ1bmN0aW9uKGUpe3JldHVybiIlIitlLnN1YnN0cmluZygzKX0pfWZ1bmN0aW9uIHQodCl7dmFyIHI9IiI7cFt0LmNoYXJBdCgwKV0mJihyPXQuY2hhckF0KDApLHQ9dC5zdWJzdHJpbmcoMSkpO3ZhciBuPSIiLG89IiIsaT0hMCxzPSExLGE9ITE7IisiPT09cj9pPSExOiIuIj09PXI/KG89Ii4iLG49Ii4iKToiLyI9PT1yPyhvPSIvIixuPSIvIik6IiMiPT09cj8obz0iIyIsaT0hMSk6IjsiPT09cj8obz0iOyIsbj0iOyIscz0hMCxhPSEwKToiPyI9PT1yPyhvPSI/IixuPSImIixzPSEwKToiJiI9PT1yJiYobz0iJiIsbj0iJiIscz0hMCk7Zm9yKHZhciB1PVtdLGM9dC5zcGxpdCgiLCIpLGw9W10sZj17fSxoPTA7aDxjLmxlbmd0aDtoKyspe3ZhciBiPWNbaF0seT1udWxsO2lmKC0xIT09Yi5pbmRleE9mKCI6Iikpe3ZhciBfPWIuc3BsaXQoIjoiKTtiPV9bMF0seT1wYXJzZUludChfWzFdLDEwKX1mb3IodmFyIHY9e307ZFtiLmNoYXJBdChiLmxlbmd0aC0xKV07KXZbYi5jaGFyQXQoYi5sZW5ndGgtMSldPSEwLGI9Yi5zdWJzdHJpbmcoMCxiLmxlbmd0aC0xKTt2YXIgbT17dHJ1bmNhdGU6eSxuYW1lOmIsc3VmZmljZXM6dn07bC5wdXNoKG0pLGZbYl09bSx1LnB1c2goYil9dmFyIGc9ZnVuY3Rpb24odCl7Zm9yKHZhciByPSIiLHU9MCxjPTA7YzxsLmxlbmd0aDtjKyspe3ZhciBmPWxbY10scD10KGYubmFtZSk7aWYobnVsbD09PXB8fHZvaWQgMD09PXB8fEFycmF5LmlzQXJyYXkocCkmJjA9PT1wLmxlbmd0aHx8Im9iamVjdCI9PXR5cGVvZiBwJiYwPT09T2JqZWN0LmtleXMocCkubGVuZ3RoKXUrKztlbHNlIGlmKHIrPWM9PT11P286bnx8IiwiLEFycmF5LmlzQXJyYXkocCkpe3MmJihyKz1mLm5hbWUrIj0iKTtmb3IodmFyIGQ9MDtkPHAubGVuZ3RoO2QrKylkPjAmJihyKz1mLnN1ZmZpY2VzWyIqIl0/bnx8IiwiOiIsIixmLnN1ZmZpY2VzWyIqIl0mJnMmJihyKz1mLm5hbWUrIj0iKSkscis9aT9lbmNvZGVVUklDb21wb25lbnQocFtkXSkucmVwbGFjZSgvIS9nLCIlMjEiKTplKHBbZF0pfWVsc2UgaWYoIm9iamVjdCI9PXR5cGVvZiBwKXtzJiYhZi5zdWZmaWNlc1siKiJdJiYocis9Zi5uYW1lKyI9Iik7dmFyIGg9ITA7Zm9yKHZhciBiIGluIHApaHx8KHIrPWYuc3VmZmljZXNbIioiXT9ufHwiLCI6IiwiKSxoPSExLHIrPWk/ZW5jb2RlVVJJQ29tcG9uZW50KGIpLnJlcGxhY2UoLyEvZywiJTIxIik6ZShiKSxyKz1mLnN1ZmZpY2VzWyIqIl0/Ij0iOiIsIixyKz1pP2VuY29kZVVSSUNvbXBvbmVudChwW2JdKS5yZXBsYWNlKC8hL2csIiUyMSIpOmUocFtiXSl9ZWxzZSBzJiYocis9Zi5uYW1lLGEmJiIiPT09cHx8KHIrPSI9IikpLG51bGwhPWYudHJ1bmNhdGUmJihwPXAuc3Vic3RyaW5nKDAsZi50cnVuY2F0ZSkpLHIrPWk/ZW5jb2RlVVJJQ29tcG9uZW50KHApLnJlcGxhY2UoLyEvZywiJTIxIik6ZShwKX1yZXR1cm4gcn07cmV0dXJuIGcudmFyTmFtZXM9dSx7cHJlZml4Om8sc3Vic3RpdHV0aW9uOmd9fWZ1bmN0aW9uIHIoZSl7aWYoISh0aGlzIGluc3RhbmNlb2YgcikpcmV0dXJuIG5ldyByKGUpO2Zvcih2YXIgbj1lLnNwbGl0KCJ7Iiksbz1bbi5zaGlmdCgpXSxpPVtdLHM9W10sYT1bXTtuLmxlbmd0aD4wOyl7dmFyIHU9bi5zaGlmdCgpLGM9dS5zcGxpdCgifSIpWzBdLGw9dS5zdWJzdHJpbmcoYy5sZW5ndGgrMSksZj10KGMpO3MucHVzaChmLnN1YnN0aXR1dGlvbiksaS5wdXNoKGYucHJlZml4KSxvLnB1c2gobCksYT1hLmNvbmNhdChmLnN1YnN0aXR1dGlvbi52YXJOYW1lcyl9dGhpcy5maWxsPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1vWzBdLHI9MDtyPHMubGVuZ3RoO3IrKyl7dmFyIG49c1tyXTt0Kz1uKGUpLHQrPW9bcisxXX1yZXR1cm4gdH0sdGhpcy52YXJOYW1lcz1hLHRoaXMudGVtcGxhdGU9ZX1mdW5jdGlvbiBuKGUsdCl7aWYoZT09PXQpcmV0dXJuITA7aWYoZSYmdCYmIm9iamVjdCI9PXR5cGVvZiBlJiYib2JqZWN0Ij09dHlwZW9mIHQpe2lmKEFycmF5LmlzQXJyYXkoZSkhPT1BcnJheS5pc0FycmF5KHQpKXJldHVybiExO2lmKEFycmF5LmlzQXJyYXkoZSkpe2lmKGUubGVuZ3RoIT09dC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspaWYoIW4oZVtyXSx0W3JdKSlyZXR1cm4hMX1lbHNle3ZhciBvO2ZvcihvIGluIGUpaWYodm9pZCAwPT09dFtvXSYmdm9pZCAwIT09ZVtvXSlyZXR1cm4hMTtmb3IobyBpbiB0KWlmKHZvaWQgMD09PWVbb10mJnZvaWQgMCE9PXRbb10pcmV0dXJuITE7Zm9yKG8gaW4gZSlpZighbihlW29dLHRbb10pKXJldHVybiExfXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9U3RyaW5nKGUpLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKS5tYXRjaCgvXihbXjpcLz8jXSs6KT8oXC9cLyg/OlteOkBdKig/OjpbXjpAXSopP0ApPygoW146XC8/I10qKSg/OjooXGQqKSk/KSk/KFtePyNdKikoXD9bXiNdKik/KCNbXHNcU10qKT8vKTtyZXR1cm4gdD97aHJlZjp0WzBdfHwiIixwcm90b2NvbDp0WzFdfHwiIixhdXRob3JpdHk6dFsyXXx8IiIsaG9zdDp0WzNdfHwiIixob3N0bmFtZTp0WzRdfHwiIixwb3J0OnRbNV18fCIiLHBhdGhuYW1lOnRbNl18fCIiLHNlYXJjaDp0WzddfHwiIixoYXNoOnRbOF18fCIifTpudWxsfWZ1bmN0aW9uIGkoZSx0KXtmdW5jdGlvbiByKGUpe3ZhciB0PVtdO3JldHVybiBlLnJlcGxhY2UoL14oXC5cLj8oXC98JCkpKy8sIiIpLnJlcGxhY2UoL1wvKFwuKFwvfCQpKSsvZywiLyIpLnJlcGxhY2UoL1wvXC5cLiQvLCIvLi4vIikucmVwbGFjZSgvXC8/W15cL10qL2csZnVuY3Rpb24oZSl7Ii8uLiI9PT1lP3QucG9wKCk6dC5wdXNoKGUpfSksdC5qb2luKCIiKS5yZXBsYWNlKC9eXC8vLCIvIj09PWUuY2hhckF0KDApPyIvIjoiIil9cmV0dXJuIHQ9byh0fHwiIiksZT1vKGV8fCIiKSx0JiZlPyh0LnByb3RvY29sfHxlLnByb3RvY29sKSsodC5wcm90b2NvbHx8dC5hdXRob3JpdHk/dC5hdXRob3JpdHk6ZS5hdXRob3JpdHkpK3IodC5wcm90b2NvbHx8dC5hdXRob3JpdHl8fCIvIj09PXQucGF0aG5hbWUuY2hhckF0KDApP3QucGF0aG5hbWU6dC5wYXRobmFtZT8oZS5hdXRob3JpdHkmJiFlLnBhdGhuYW1lPyIvIjoiIikrZS5wYXRobmFtZS5zbGljZSgwLGUucGF0aG5hbWUubGFzdEluZGV4T2YoIi8iKSsxKSt0LnBhdGhuYW1lOmUucGF0aG5hbWUpKyh0LnByb3RvY29sfHx0LmF1dGhvcml0eXx8dC5wYXRobmFtZT90LnNlYXJjaDp0LnNlYXJjaHx8ZS5zZWFyY2gpK3QuaGFzaDpudWxsfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGUuc3BsaXQoIiMiKVswXX1mdW5jdGlvbiBhKGUsdCl7aWYoZSYmIm9iamVjdCI9PXR5cGVvZiBlKWlmKHZvaWQgMD09PXQ/dD1lLmlkOiJzdHJpbmciPT10eXBlb2YgZS5pZCYmKHQ9aSh0LGUuaWQpLGUuaWQ9dCksQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKylhKGVbcl0sdCk7ZWxzZXsic3RyaW5nIj09dHlwZW9mIGUuJHJlZiYmKGUuJHJlZj1pKHQsZS4kcmVmKSk7Zm9yKHZhciBuIGluIGUpImVudW0iIT09biYmYShlW25dLHQpfX1mdW5jdGlvbiB1KGUpe2U9ZXx8ImVuIjt2YXIgdD1qW2VdO3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj10W2UuY29kZV18fGdbZS5jb2RlXTtpZigic3RyaW5nIiE9dHlwZW9mIHIpcmV0dXJuIlVua25vd24gZXJyb3IgY29kZSAiK2UuY29kZSsiOiAiK0pTT04uc3RyaW5naWZ5KGUubWVzc2FnZVBhcmFtcyk7dmFyIG49ZS5wYXJhbXM7cmV0dXJuIHIucmVwbGFjZSgvXHsoW157fV0qKVx9L2csZnVuY3Rpb24oZSx0KXt2YXIgcj1uW3RdO3JldHVybiJzdHJpbmciPT10eXBlb2Ygcnx8Im51bWJlciI9PXR5cGVvZiByP3I6ZX0pfX1mdW5jdGlvbiBjKGUsdCxyLG4sbyl7aWYoRXJyb3IuY2FsbCh0aGlzKSx2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcigiTm8gZXJyb3IgY29kZSBzdXBwbGllZDogIituKTt0aGlzLm1lc3NhZ2U9IiIsdGhpcy5wYXJhbXM9dCx0aGlzLmNvZGU9ZSx0aGlzLmRhdGFQYXRoPXJ8fCIiLHRoaXMuc2NoZW1hUGF0aD1ufHwiIix0aGlzLnN1YkVycm9ycz1vfHxudWxsO3ZhciBpPW5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpO2lmKHRoaXMuc3RhY2s9aS5zdGFja3x8aS5zdGFja3RyYWNlLCF0aGlzLnN0YWNrKXRyeXt0aHJvdyBpfWNhdGNoKGkpe3RoaXMuc3RhY2s9aS5zdGFja3x8aS5zdGFja3RyYWNlfX1mdW5jdGlvbiBsKGUsdCl7aWYodC5zdWJzdHJpbmcoMCxlLmxlbmd0aCk9PT1lKXt2YXIgcj10LnN1YnN0cmluZyhlLmxlbmd0aCk7aWYodC5sZW5ndGg+MCYmIi8iPT09dC5jaGFyQXQoZS5sZW5ndGgtMSl8fCIjIj09PXIuY2hhckF0KDApfHwiPyI9PT1yLmNoYXJBdCgwKSlyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBmKGUpe3ZhciB0LHIsbj1uZXcgaCxvPXtzZXRFcnJvclJlcG9ydGVyOmZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZT90aGlzLmxhbmd1YWdlKGUpOihyPWUsITApfSxhZGRGb3JtYXQ6ZnVuY3Rpb24oKXtuLmFkZEZvcm1hdC5hcHBseShuLGFyZ3VtZW50cyl9LGxhbmd1YWdlOmZ1bmN0aW9uKGUpe3JldHVybiBlPyhqW2VdfHwoZT1lLnNwbGl0KCItIilbMF0pLGpbZV0/KHQ9ZSxlKTohMSk6dH0sYWRkTGFuZ3VhZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgcjtmb3IociBpbiBfKXRbcl0mJiF0W19bcl1dJiYodFtfW3JdXT10W3JdKTt2YXIgbj1lLnNwbGl0KCItIilbMF07aWYoaltuXSl7altlXT1PYmplY3QuY3JlYXRlKGpbbl0pO2ZvcihyIGluIHQpInVuZGVmaW5lZCI9PXR5cGVvZiBqW25dW3JdJiYoaltuXVtyXT10W3JdKSxqW2VdW3JdPXRbcl19ZWxzZSBqW2VdPXQsaltuXT10O3JldHVybiB0aGlzfSxmcmVzaEFwaTpmdW5jdGlvbihlKXt2YXIgdD1mKCk7cmV0dXJuIGUmJnQubGFuZ3VhZ2UoZSksdH0sdmFsaWRhdGU6ZnVuY3Rpb24oZSxvLGkscyl7dmFyIGE9dSh0KSxjPXI/ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByKGUsdCxuKXx8YShlLHQsbil9OmEsbD1uZXcgaChuLCExLGMsaSxzKTsic3RyaW5nIj09dHlwZW9mIG8mJihvPXskcmVmOm99KSxsLmFkZFNjaGVtYSgiIixvKTt2YXIgZj1sLnZhbGlkYXRlQWxsKGUsbyxudWxsLG51bGwsIiIpO3JldHVybiFmJiZzJiYoZj1sLmJhblVua25vd25Qcm9wZXJ0aWVzKGUsbykpLHRoaXMuZXJyb3I9Zix0aGlzLm1pc3Npbmc9bC5taXNzaW5nLHRoaXMudmFsaWQ9bnVsbD09PWYsdGhpcy52YWxpZH0sdmFsaWRhdGVSZXN1bHQ6ZnVuY3Rpb24oKXt2YXIgZT17fTtyZXR1cm4gdGhpcy52YWxpZGF0ZS5hcHBseShlLGFyZ3VtZW50cyksZX0sdmFsaWRhdGVNdWx0aXBsZTpmdW5jdGlvbihlLG8saSxzKXt2YXIgYT11KHQpLGM9cj9mdW5jdGlvbihlLHQsbil7cmV0dXJuIHIoZSx0LG4pfHxhKGUsdCxuKX06YSxsPW5ldyBoKG4sITAsYyxpLHMpOyJzdHJpbmciPT10eXBlb2YgbyYmKG89eyRyZWY6b30pLGwuYWRkU2NoZW1hKCIiLG8pLGwudmFsaWRhdGVBbGwoZSxvLG51bGwsbnVsbCwiIikscyYmbC5iYW5Vbmtub3duUHJvcGVydGllcyhlLG8pO3ZhciBmPXt9O3JldHVybiBmLmVycm9ycz1sLmVycm9ycyxmLm1pc3Npbmc9bC5taXNzaW5nLGYudmFsaWQ9MD09PWYuZXJyb3JzLmxlbmd0aCxmfSxhZGRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gbi5hZGRTY2hlbWEuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRTY2hlbWEuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWFNYXA6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRTY2hlbWFNYXAuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWFVcmlzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0U2NoZW1hVXJpcy5hcHBseShuLGFyZ3VtZW50cyl9LGdldE1pc3NpbmdVcmlzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0TWlzc2luZ1VyaXMuYXBwbHkobixhcmd1bWVudHMpfSxkcm9wU2NoZW1hczpmdW5jdGlvbigpe24uZHJvcFNjaGVtYXMuYXBwbHkobixhcmd1bWVudHMpfSxkZWZpbmVLZXl3b3JkOmZ1bmN0aW9uKCl7bi5kZWZpbmVLZXl3b3JkLmFwcGx5KG4sYXJndW1lbnRzKX0sZGVmaW5lRXJyb3I6ZnVuY3Rpb24oZSx0LHIpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8IS9eW0EtWl0rKF9bQS1aXSspKiQvLnRlc3QoZSkpdGhyb3cgbmV3IEVycm9yKCJDb2RlIG5hbWUgbXVzdCBiZSBhIHN0cmluZyBpbiBVUFBFUl9DQVNFX1dJVEhfVU5ERVJTQ09SRVMiKTtpZigibnVtYmVyIiE9dHlwZW9mIHR8fHQlMSE9PTB8fDFlND50KXRocm93IG5ldyBFcnJvcigiQ29kZSBudW1iZXIgbXVzdCBiZSBhbiBpbnRlZ2VyID4gMTAwMDAiKTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIF9bZV0pdGhyb3cgbmV3IEVycm9yKCJFcnJvciBhbHJlYWR5IGRlZmluZWQ6ICIrZSsiIGFzICIrX1tlXSk7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB2W3RdKXRocm93IG5ldyBFcnJvcigiRXJyb3IgY29kZSBhbHJlYWR5IHVzZWQ6ICIrdlt0XSsiIGFzICIrdCk7X1tlXT10LHZbdF09ZSxnW2VdPWdbdF09cjtmb3IodmFyIG4gaW4gail7dmFyIG89altuXTtvW2VdJiYob1t0XT1vW3RdfHxvW2VdKX19LHJlc2V0OmZ1bmN0aW9uKCl7bi5yZXNldCgpLHRoaXMuZXJyb3I9bnVsbCx0aGlzLm1pc3Npbmc9W10sdGhpcy52YWxpZD0hMH0sbWlzc2luZzpbXSxlcnJvcjpudWxsLHZhbGlkOiEwLG5vcm1TY2hlbWE6YSxyZXNvbHZlVXJsOmksZ2V0RG9jdW1lbnRVcmk6cyxlcnJvckNvZGVzOl99O3JldHVybiBvLmxhbmd1YWdlKGV8fCJlbiIpLG99T2JqZWN0LmtleXN8fChPYmplY3Qua2V5cz1mdW5jdGlvbigpe3ZhciBlPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdD0he3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCJ0b1N0cmluZyIpLHI9WyJ0b1N0cmluZyIsInRvTG9jYWxlU3RyaW5nIiwidmFsdWVPZiIsImhhc093blByb3BlcnR5IiwiaXNQcm90b3R5cGVPZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiY29uc3RydWN0b3IiXSxuPXIubGVuZ3RoO3JldHVybiBmdW5jdGlvbihvKXtpZigib2JqZWN0IiE9dHlwZW9mIG8mJiJmdW5jdGlvbiIhPXR5cGVvZiBvfHxudWxsPT09byl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdCIpO3ZhciBpPVtdO2Zvcih2YXIgcyBpbiBvKWUuY2FsbChvLHMpJiZpLnB1c2gocyk7aWYodClmb3IodmFyIGE9MDtuPmE7YSsrKWUuY2FsbChvLHJbYV0pJiZpLnB1c2goclthXSk7cmV0dXJuIGl9fSgpKSxPYmplY3QuY3JlYXRlfHwoT2JqZWN0LmNyZWF0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKDEhPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiT2JqZWN0LmNyZWF0ZSBpbXBsZW1lbnRhdGlvbiBvbmx5IGFjY2VwdHMgb25lIHBhcmFtZXRlci4iKTtyZXR1cm4gZS5wcm90b3R5cGU9dCxuZXcgZX19KCkpLEFycmF5LmlzQXJyYXl8fChBcnJheS5pc0FycmF5PWZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9KSxBcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8KEFycmF5LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKGUpe2lmKG51bGw9PT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIHQ9T2JqZWN0KHRoaXMpLHI9dC5sZW5ndGg+Pj4wO2lmKDA9PT1yKXJldHVybi0xO3ZhciBuPTA7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiYobj1OdW1iZXIoYXJndW1lbnRzWzFdKSxuIT09bj9uPTA6MCE9PW4mJm4hPT0xLzAmJm4hPT0tKDEvMCkmJihuPShuPjB8fC0xKSpNYXRoLmZsb29yKE1hdGguYWJzKG4pKSkpLG4+PXIpcmV0dXJuLTE7Zm9yKHZhciBvPW4+PTA/bjpNYXRoLm1heChyLU1hdGguYWJzKG4pLDApO3I+bztvKyspaWYobyBpbiB0JiZ0W29dPT09ZSlyZXR1cm4gbztyZXR1cm4tMX0pLE9iamVjdC5pc0Zyb3plbnx8KE9iamVjdC5pc0Zyb3plbj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9InR2NF90ZXN0X2Zyb3plbl9rZXkiO2UuaGFzT3duUHJvcGVydHkodCk7KXQrPU1hdGgucmFuZG9tKCk7dHJ5e3JldHVybiBlW3RdPSEwLGRlbGV0ZSBlW3RdLCExfWNhdGNoKHIpe3JldHVybiEwfX0pO3ZhciBwPXsiKyI6ITAsIiMiOiEwLCIuIjohMCwiLyI6ITAsIjsiOiEwLCI/IjohMCwiJiI6ITB9LGQ9eyIqIjohMH07ci5wcm90b3R5cGU9e3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVtcGxhdGV9LGZpbGxGcm9tT2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmZpbGwoZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19KX19O3ZhciBoPWZ1bmN0aW9uKGUsdCxyLG4sbyl7aWYodGhpcy5taXNzaW5nPVtdLHRoaXMubWlzc2luZ01hcD17fSx0aGlzLmZvcm1hdFZhbGlkYXRvcnM9ZT9PYmplY3QuY3JlYXRlKGUuZm9ybWF0VmFsaWRhdG9ycyk6e30sdGhpcy5zY2hlbWFzPWU/T2JqZWN0LmNyZWF0ZShlLnNjaGVtYXMpOnt9LHRoaXMuY29sbGVjdE11bHRpcGxlPXQsdGhpcy5lcnJvcnM9W10sdGhpcy5oYW5kbGVFcnJvcj10P3RoaXMuY29sbGVjdEVycm9yOnRoaXMucmV0dXJuRXJyb3IsbiYmKHRoaXMuY2hlY2tSZWN1cnNpdmU9ITAsdGhpcy5zY2FubmVkPVtdLHRoaXMuc2Nhbm5lZEZyb3plbj1bXSx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzPVtdLHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnM9W10sdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5PSJ0djRfdmFsaWRhdGlvbl9pZCIsdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5PSJ0djRfdmFsaWRhdGlvbl9lcnJvcnNfaWQiKSxvJiYodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzPSEwLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30pLHRoaXMuZXJyb3JSZXBvcnRlcj1yfHx1KCJlbiIpLCJzdHJpbmciPT10eXBlb2YgdGhpcy5lcnJvclJlcG9ydGVyKXRocm93IG5ldyBFcnJvcigiZGVidWciKTtpZih0aGlzLmRlZmluZWRLZXl3b3Jkcz17fSxlKWZvcih2YXIgaSBpbiBlLmRlZmluZWRLZXl3b3Jkcyl0aGlzLmRlZmluZWRLZXl3b3Jkc1tpXT1lLmRlZmluZWRLZXl3b3Jkc1tpXS5zbGljZSgwKX07aC5wcm90b3R5cGUuZGVmaW5lS2V5d29yZD1mdW5jdGlvbihlLHQpe3RoaXMuZGVmaW5lZEtleXdvcmRzW2VdPXRoaXMuZGVmaW5lZEtleXdvcmRzW2VdfHxbXSx0aGlzLmRlZmluZWRLZXl3b3Jkc1tlXS5wdXNoKHQpfSxoLnByb3RvdHlwZS5jcmVhdGVFcnJvcj1mdW5jdGlvbihlLHQscixuLG8saSxzKXt2YXIgYT1uZXcgYyhlLHQscixuLG8pO3JldHVybiBhLm1lc3NhZ2U9dGhpcy5lcnJvclJlcG9ydGVyKGEsaSxzKSxhfSxoLnByb3RvdHlwZS5yZXR1cm5FcnJvcj1mdW5jdGlvbihlKXtyZXR1cm4gZX0saC5wcm90b3R5cGUuY29sbGVjdEVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZ0aGlzLmVycm9ycy5wdXNoKGUpLG51bGx9LGgucHJvdG90eXBlLnByZWZpeEVycm9ycz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPWU7bjx0aGlzLmVycm9ycy5sZW5ndGg7bisrKXRoaXMuZXJyb3JzW25dPXRoaXMuZXJyb3JzW25dLnByZWZpeFdpdGgodCxyKTtyZXR1cm4gdGhpc30saC5wcm90b3R5cGUuYmFuVW5rbm93blByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocyl7dmFyIG49dGhpcy5jcmVhdGVFcnJvcihfLlVOS05PV05fUFJPUEVSVFkse3BhdGg6cn0sciwiIixudWxsLGUsdCksbz10aGlzLmhhbmRsZUVycm9yKG4pO2lmKG8pcmV0dXJuIG99cmV0dXJuIG51bGx9LGgucHJvdG90eXBlLmFkZEZvcm1hdD1mdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKHZhciByIGluIGUpdGhpcy5hZGRGb3JtYXQocixlW3JdKTtyZXR1cm4gdGhpc310aGlzLmZvcm1hdFZhbGlkYXRvcnNbZV09dH0saC5wcm90b3R5cGUucmVzb2x2ZVJlZnM9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT1lLiRyZWYpe2lmKHQ9dHx8e30sdFtlLiRyZWZdKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKF8uQ0lSQ1VMQVJfUkVGRVJFTkNFLHt1cmxzOk9iamVjdC5rZXlzKHQpLmpvaW4oIiwgIil9LCIiLCIiLG51bGwsdm9pZCAwLGUpO3RbZS4kcmVmXT0hMCxlPXRoaXMuZ2V0U2NoZW1hKGUuJHJlZix0KX1yZXR1cm4gZX0saC5wcm90b3R5cGUuZ2V0U2NoZW1hPWZ1bmN0aW9uKGUsdCl7dmFyIHI7aWYodm9pZCAwIT09dGhpcy5zY2hlbWFzW2VdKXJldHVybiByPXRoaXMuc2NoZW1hc1tlXSx0aGlzLnJlc29sdmVSZWZzKHIsdCk7dmFyIG49ZSxvPSIiO2lmKC0xIT09ZS5pbmRleE9mKCIjIikmJihvPWUuc3Vic3RyaW5nKGUuaW5kZXhPZigiIyIpKzEpLG49ZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIiMiKSkpLCJvYmplY3QiPT10eXBlb2YgdGhpcy5zY2hlbWFzW25dKXtyPXRoaXMuc2NoZW1hc1tuXTt2YXIgaT1kZWNvZGVVUklDb21wb25lbnQobyk7aWYoIiI9PT1pKXJldHVybiB0aGlzLnJlc29sdmVSZWZzKHIsdCk7aWYoIi8iIT09aS5jaGFyQXQoMCkpcmV0dXJuO2Zvcih2YXIgcz1pLnNwbGl0KCIvIikuc2xpY2UoMSksYT0wO2E8cy5sZW5ndGg7YSsrKXt2YXIgdT1zW2FdLnJlcGxhY2UoL34xL2csIi8iKS5yZXBsYWNlKC9+MC9nLCJ+Iik7aWYodm9pZCAwPT09clt1XSl7cj12b2lkIDA7YnJlYWt9cj1yW3VdfWlmKHZvaWQgMCE9PXIpcmV0dXJuIHRoaXMucmVzb2x2ZVJlZnMocix0KX12b2lkIDA9PT10aGlzLm1pc3Npbmdbbl0mJih0aGlzLm1pc3NpbmcucHVzaChuKSx0aGlzLm1pc3Npbmdbbl09bix0aGlzLm1pc3NpbmdNYXBbbl09bil9LGgucHJvdG90eXBlLnNlYXJjaFNjaGVtYXM9ZnVuY3Rpb24oZSx0KXtpZihBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXRoaXMuc2VhcmNoU2NoZW1hcyhlW3JdLHQpO2Vsc2UgaWYoZSYmIm9iamVjdCI9PXR5cGVvZiBlKXsic3RyaW5nIj09dHlwZW9mIGUuaWQmJmwodCxlLmlkKSYmdm9pZCAwPT09dGhpcy5zY2hlbWFzW2UuaWRdJiYodGhpcy5zY2hlbWFzW2UuaWRdPWUpO2Zvcih2YXIgbiBpbiBlKWlmKCJlbnVtIiE9PW4paWYoIm9iamVjdCI9PXR5cGVvZiBlW25dKXRoaXMuc2VhcmNoU2NoZW1hcyhlW25dLHQpO2Vsc2UgaWYoIiRyZWYiPT09bil7dmFyIG89cyhlW25dKTtvJiZ2b2lkIDA9PT10aGlzLnNjaGVtYXNbb10mJnZvaWQgMD09PXRoaXMubWlzc2luZ01hcFtvXSYmKHRoaXMubWlzc2luZ01hcFtvXT1vKX19fSxoLnByb3RvdHlwZS5hZGRTY2hlbWE9ZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIiE9dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHwic3RyaW5nIiE9dHlwZW9mIGUuaWQpcmV0dXJuO3Q9ZSxlPXQuaWR9ZT09PXMoZSkrIiMiJiYoZT1zKGUpKSx0aGlzLnNjaGVtYXNbZV09dCxkZWxldGUgdGhpcy5taXNzaW5nTWFwW2VdLGEodCxlKSx0aGlzLnNlYXJjaFNjaGVtYXModCxlKX0saC5wcm90b3R5cGUuZ2V0U2NoZW1hTWFwPWZ1bmN0aW9uKCl7dmFyIGU9e307Zm9yKHZhciB0IGluIHRoaXMuc2NoZW1hcyllW3RdPXRoaXMuc2NoZW1hc1t0XTtyZXR1cm4gZX0saC5wcm90b3R5cGUuZ2V0U2NoZW1hVXJpcz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gdGhpcy5zY2hlbWFzKWUmJiFlLnRlc3Qocil8fHQucHVzaChyKTtyZXR1cm4gdH0saC5wcm90b3R5cGUuZ2V0TWlzc2luZ1VyaXM9ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciByIGluIHRoaXMubWlzc2luZ01hcCllJiYhZS50ZXN0KHIpfHx0LnB1c2gocik7cmV0dXJuIHR9LGgucHJvdG90eXBlLmRyb3BTY2hlbWFzPWZ1bmN0aW9uKCl7dGhpcy5zY2hlbWFzPXt9LHRoaXMucmVzZXQoKX0saC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLm1pc3Npbmc9W10sdGhpcy5taXNzaW5nTWFwPXt9LHRoaXMuZXJyb3JzPVtdfSxoLnByb3RvdHlwZS52YWxpZGF0ZUFsbD1mdW5jdGlvbihlLHQscixuLG8pe3ZhciBpO2lmKHQ9dGhpcy5yZXNvbHZlUmVmcyh0KSwhdClyZXR1cm4gbnVsbDtpZih0IGluc3RhbmNlb2YgYylyZXR1cm4gdGhpcy5lcnJvcnMucHVzaCh0KSx0O3ZhciBzLGE9dGhpcy5lcnJvcnMubGVuZ3RoLHU9bnVsbCxsPW51bGw7aWYodGhpcy5jaGVja1JlY3Vyc2l2ZSYmZSYmIm9iamVjdCI9PXR5cGVvZiBlKXtpZihpPSF0aGlzLnNjYW5uZWQubGVuZ3RoLGVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XSl7dmFyIGY9ZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldLmluZGV4T2YodCk7aWYoLTEhPT1mKXJldHVybiB0aGlzLmVycm9ycz10aGlzLmVycm9ycy5jb25jYXQoZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW2ZdKSxudWxsfWlmKE9iamVjdC5pc0Zyb3plbihlKSYmKHM9dGhpcy5zY2FubmVkRnJvemVuLmluZGV4T2YoZSksLTEhPT1zKSl7dmFyIHA9dGhpcy5zY2FubmVkRnJvemVuU2NoZW1hc1tzXS5pbmRleE9mKHQpO2lmKC0xIT09cClyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuY29uY2F0KHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnNbc11bcF0pLG51bGx9aWYodGhpcy5zY2FubmVkLnB1c2goZSksT2JqZWN0LmlzRnJvemVuKGUpKS0xPT09cyYmKHM9dGhpcy5zY2FubmVkRnJvemVuLmxlbmd0aCx0aGlzLnNjYW5uZWRGcm96ZW4ucHVzaChlKSx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzLnB1c2goW10pKSx1PXRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbc10ubGVuZ3RoLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbc11bdV09dCx0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW3NdW3VdPVtdO2Vsc2V7aWYoIWVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XSl0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5LHt2YWx1ZTpbXSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXkse3ZhbHVlOltdLGNvbmZpZ3VyYWJsZTohMH0pfWNhdGNoKGQpe2VbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XT1bXSxlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV09W119bD1lW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0ubGVuZ3RoLGVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XVtsXT10LGVbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XVtsXT1bXX19dmFyIGg9dGhpcy5lcnJvcnMubGVuZ3RoLGI9dGhpcy52YWxpZGF0ZUJhc2ljKGUsdCxvKXx8dGhpcy52YWxpZGF0ZU51bWVyaWMoZSx0LG8pfHx0aGlzLnZhbGlkYXRlU3RyaW5nKGUsdCxvKXx8dGhpcy52YWxpZGF0ZUFycmF5KGUsdCxvKXx8dGhpcy52YWxpZGF0ZU9iamVjdChlLHQsbyl8fHRoaXMudmFsaWRhdGVDb21iaW5hdGlvbnMoZSx0LG8pfHx0aGlzLnZhbGlkYXRlSHlwZXJtZWRpYShlLHQsbyl8fHRoaXMudmFsaWRhdGVGb3JtYXQoZSx0LG8pfHx0aGlzLnZhbGlkYXRlRGVmaW5lZEtleXdvcmRzKGUsdCxvKXx8bnVsbDtpZihpKXtmb3IoO3RoaXMuc2Nhbm5lZC5sZW5ndGg7KXt2YXIgeT10aGlzLnNjYW5uZWQucG9wKCk7ZGVsZXRlIHlbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XX10aGlzLnNjYW5uZWRGcm96ZW49W10sdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcz1bXX1pZihifHxoIT09dGhpcy5lcnJvcnMubGVuZ3RoKWZvcig7ciYmci5sZW5ndGh8fG4mJm4ubGVuZ3RoOyl7dmFyIF89ciYmci5sZW5ndGg/IiIrci5wb3AoKTpudWxsLHY9biYmbi5sZW5ndGg/IiIrbi5wb3AoKTpudWxsO2ImJihiPWIucHJlZml4V2l0aChfLHYpKSx0aGlzLnByZWZpeEVycm9ycyhoLF8sdil9cmV0dXJuIG51bGwhPT11P3RoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnNbc11bdV09dGhpcy5lcnJvcnMuc2xpY2UoYSk6bnVsbCE9PWwmJihlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV1bbF09dGhpcy5lcnJvcnMuc2xpY2UoYSkpLHRoaXMuaGFuZGxlRXJyb3IoYil9LGgucHJvdG90eXBlLnZhbGlkYXRlRm9ybWF0PWZ1bmN0aW9uKGUsdCl7aWYoInN0cmluZyIhPXR5cGVvZiB0LmZvcm1hdHx8IXRoaXMuZm9ybWF0VmFsaWRhdG9yc1t0LmZvcm1hdF0pcmV0dXJuIG51bGw7dmFyIHI9dGhpcy5mb3JtYXRWYWxpZGF0b3JzW3QuZm9ybWF0XS5jYWxsKG51bGwsZSx0KTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHJ8fCJudW1iZXIiPT10eXBlb2Ygcj90aGlzLmNyZWF0ZUVycm9yKF8uRk9STUFUX0NVU1RPTSx7bWVzc2FnZTpyfSwiIiwiL2Zvcm1hdCIsbnVsbCxlLHQpOnImJiJvYmplY3QiPT10eXBlb2Ygcj90aGlzLmNyZWF0ZUVycm9yKF8uRk9STUFUX0NVU1RPTSx7bWVzc2FnZTpyLm1lc3NhZ2V8fCI/In0sci5kYXRhUGF0aHx8IiIsci5zY2hlbWFQYXRofHwiL2Zvcm1hdCIsbnVsbCxlLHQpOm51bGx9LGgucHJvdG90eXBlLnZhbGlkYXRlRGVmaW5lZEtleXdvcmRzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG4gaW4gdGhpcy5kZWZpbmVkS2V5d29yZHMpaWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0W25dKWZvcih2YXIgbz10aGlzLmRlZmluZWRLZXl3b3Jkc1tuXSxpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1zKGUsdFtuXSx0LHIpO2lmKCJzdHJpbmciPT10eXBlb2YgYXx8Im51bWJlciI9PXR5cGVvZiBhKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKF8uS0VZV09SRF9DVVNUT00se2tleTpuLG1lc3NhZ2U6YX0sIiIsIiIsbnVsbCxlLHQpLnByZWZpeFdpdGgobnVsbCxuKTtpZihhJiYib2JqZWN0Ij09dHlwZW9mIGEpe3ZhciB1PWEuY29kZTtpZigic3RyaW5nIj09dHlwZW9mIHUpe2lmKCFfW3VdKXRocm93IG5ldyBFcnJvcigiVW5kZWZpbmVkIGVycm9yIGNvZGUgKHVzZSBkZWZpbmVFcnJvcik6ICIrdSk7dT1fW3VdfWVsc2UibnVtYmVyIiE9dHlwZW9mIHUmJih1PV8uS0VZV09SRF9DVVNUT00pO3ZhciBjPSJvYmplY3QiPT10eXBlb2YgYS5tZXNzYWdlP2EubWVzc2FnZTp7a2V5Om4sbWVzc2FnZTphLm1lc3NhZ2V8fCI/In0sbD1hLnNjaGVtYVBhdGh8fCIvIituLnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpO3JldHVybiB0aGlzLmNyZWF0ZUVycm9yKHUsYyxhLmRhdGFQYXRofHxudWxsLGwsbnVsbCxlLHQpfX1yZXR1cm4gbnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVCYXNpYz1mdW5jdGlvbihlLHQscil7dmFyIG47cmV0dXJuKG49dGhpcy52YWxpZGF0ZVR5cGUoZSx0LHIpKT9uLnByZWZpeFdpdGgobnVsbCwidHlwZSIpOihuPXRoaXMudmFsaWRhdGVFbnVtKGUsdCxyKSk/bi5wcmVmaXhXaXRoKG51bGwsInR5cGUiKTpudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZVR5cGU9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10LnR5cGUpcmV0dXJuIG51bGw7dmFyIHI9dHlwZW9mIGU7bnVsbD09PWU/cj0ibnVsbCI6QXJyYXkuaXNBcnJheShlKSYmKHI9ImFycmF5Iik7dmFyIG49dC50eXBlO0FycmF5LmlzQXJyYXkobil8fChuPVtuXSk7Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciBpPW5bb107aWYoaT09PXJ8fCJpbnRlZ2VyIj09PWkmJiJudW1iZXIiPT09ciYmZSUxPT09MClyZXR1cm4gbnVsbH1yZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihfLklOVkFMSURfVFlQRSx7dHlwZTpyLGV4cGVjdGVkOm4uam9pbigiLyIpfSwiIiwiIixudWxsLGUsdCl9LGgucHJvdG90eXBlLnZhbGlkYXRlRW51bT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXRbImVudW0iXSlyZXR1cm4gbnVsbDtmb3IodmFyIHI9MDtyPHRbImVudW0iXS5sZW5ndGg7cisrKXt2YXIgbz10WyJlbnVtIl1bcl07aWYobihlLG8pKXJldHVybiBudWxsfXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKF8uRU5VTV9NSVNNQVRDSCx7dmFsdWU6InVuZGVmaW5lZCIhPXR5cGVvZiBKU09OP0pTT04uc3RyaW5naWZ5KGUpOmV9LCIiLCIiLG51bGwsZSx0KX0saC5wcm90b3R5cGUudmFsaWRhdGVOdW1lcmljPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy52YWxpZGF0ZU11bHRpcGxlT2YoZSx0LHIpfHx0aGlzLnZhbGlkYXRlTWluTWF4KGUsdCxyKXx8dGhpcy52YWxpZGF0ZU5hTihlLHQscil8fG51bGx9O3ZhciBiPU1hdGgucG93KDIsLTUxKSx5PTEtYjtoLnByb3RvdHlwZS52YWxpZGF0ZU11bHRpcGxlT2Y9ZnVuY3Rpb24oZSx0KXt2YXIgcj10Lm11bHRpcGxlT2Z8fHQuZGl2aXNpYmxlQnk7aWYodm9pZCAwPT09cilyZXR1cm4gbnVsbDtpZigibnVtYmVyIj09dHlwZW9mIGUpe3ZhciBuPWUvciUxO2lmKG4+PWImJnk+bilyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihfLk5VTUJFUl9NVUxUSVBMRV9PRix7dmFsdWU6ZSxtdWx0aXBsZU9mOnJ9LCIiLCIiLG51bGwsZSx0KX1yZXR1cm4gbnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVNaW5NYXg9ZnVuY3Rpb24oZSx0KXtpZigibnVtYmVyIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7aWYodm9pZCAwIT09dC5taW5pbXVtKXtpZihlPHQubWluaW11bSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihfLk5VTUJFUl9NSU5JTVVNLHt2YWx1ZTplLG1pbmltdW06dC5taW5pbXVtfSwiIiwiL21pbmltdW0iLG51bGwsZSx0KTtpZih0LmV4Y2x1c2l2ZU1pbmltdW0mJmU9PT10Lm1pbmltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoXy5OVU1CRVJfTUlOSU1VTV9FWENMVVNJVkUse3ZhbHVlOmUsbWluaW11bTp0Lm1pbmltdW19LCIiLCIvZXhjbHVzaXZlTWluaW11bSIsbnVsbCxlLHQpfWlmKHZvaWQgMCE9PXQubWF4aW11bSl7aWYoZT50Lm1heGltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoXy5OVU1CRVJfTUFYSU1VTSx7dmFsdWU6ZSxtYXhpbXVtOnQubWF4aW11bX0sIiIsIi9tYXhpbXVtIixudWxsLGUsdCk7aWYodC5leGNsdXNpdmVNYXhpbXVtJiZlPT09dC5tYXhpbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKF8uTlVNQkVSX01BWElNVU1fRVhDTFVTSVZFLHt2YWx1ZTplLG1heGltdW06dC5tYXhpbXVtfSwiIiwiL2V4Y2x1c2l2ZU1heGltdW0iLG51bGwsZSx0KX1yZXR1cm4gbnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVOYU49ZnVuY3Rpb24oZSx0KXtyZXR1cm4ibnVtYmVyIiE9dHlwZW9mIGU/bnVsbDppc05hTihlKT09PSEwfHxlPT09MS8wfHxlPT09LSgxLzApP3RoaXMuY3JlYXRlRXJyb3IoXy5OVU1CRVJfTk9UX0FfTlVNQkVSLHt2YWx1ZTplfSwiIiwiL3R5cGUiLG51bGwsZSx0KTpudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVTdHJpbmdMZW5ndGgoZSx0LHIpfHx0aGlzLnZhbGlkYXRlU3RyaW5nUGF0dGVybihlLHQscil8fG51bGx9LGgucHJvdG90eXBlLnZhbGlkYXRlU3RyaW5nTGVuZ3RoPWZ1bmN0aW9uKGUsdCl7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlP251bGw6dm9pZCAwIT09dC5taW5MZW5ndGgmJmUubGVuZ3RoPHQubWluTGVuZ3RoP3RoaXMuY3JlYXRlRXJyb3IoXy5TVFJJTkdfTEVOR1RIX1NIT1JULHtsZW5ndGg6ZS5sZW5ndGgsbWluaW11bTp0Lm1pbkxlbmd0aH0sIiIsIi9taW5MZW5ndGgiLG51bGwsZSx0KTp2b2lkIDAhPT10Lm1heExlbmd0aCYmZS5sZW5ndGg+dC5tYXhMZW5ndGg/dGhpcy5jcmVhdGVFcnJvcihfLlNUUklOR19MRU5HVEhfTE9ORyx7bGVuZ3RoOmUubGVuZ3RoLG1heGltdW06dC5tYXhMZW5ndGh9LCIiLCIvbWF4TGVuZ3RoIixudWxsLGUsdCk6bnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVTdHJpbmdQYXR0ZXJuPWZ1bmN0aW9uKGUsdCl7aWYoInN0cmluZyIhPXR5cGVvZiBlfHwic3RyaW5nIiE9dHlwZW9mIHQucGF0dGVybiYmISh0LnBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApKXJldHVybiBudWxsO3ZhciByO2lmKHQucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cClyPXQucGF0dGVybjtlbHNle3ZhciBuLG89IiIsaT10LnBhdHRlcm4ubWF0Y2goL15cLyguKylcLyhbaW1nXSopJC8pO2k/KG49aVsxXSxvPWlbMl0pOm49dC5wYXR0ZXJuLHI9bmV3IFJlZ0V4cChuLG8pfXJldHVybiByLnRlc3QoZSk/bnVsbDp0aGlzLmNyZWF0ZUVycm9yKF8uU1RSSU5HX1BBVFRFUk4se3BhdHRlcm46dC5wYXR0ZXJufSwiIiwiL3BhdHRlcm4iLG51bGwsZSx0KX0saC5wcm90b3R5cGUudmFsaWRhdGVBcnJheT1mdW5jdGlvbihlLHQscil7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/dGhpcy52YWxpZGF0ZUFycmF5TGVuZ3RoKGUsdCxyKXx8dGhpcy52YWxpZGF0ZUFycmF5VW5pcXVlSXRlbXMoZSx0LHIpfHx0aGlzLnZhbGlkYXRlQXJyYXlJdGVtcyhlLHQscil8fG51bGw6bnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVBcnJheUxlbmd0aD1mdW5jdGlvbihlLHQpe3ZhciByO3JldHVybiB2b2lkIDAhPT10Lm1pbkl0ZW1zJiZlLmxlbmd0aDx0Lm1pbkl0ZW1zJiYocj10aGlzLmNyZWF0ZUVycm9yKF8uQVJSQVlfTEVOR1RIX1NIT1JULHtsZW5ndGg6ZS5sZW5ndGgsbWluaW11bTp0Lm1pbkl0ZW1zfSwiIiwiL21pbkl0ZW1zIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjp2b2lkIDAhPT10Lm1heEl0ZW1zJiZlLmxlbmd0aD50Lm1heEl0ZW1zJiYocj10aGlzLmNyZWF0ZUVycm9yKF8uQVJSQVlfTEVOR1RIX0xPTkcse2xlbmd0aDplLmxlbmd0aCxtYXhpbXVtOnQubWF4SXRlbXN9LCIiLCIvbWF4SXRlbXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOm51bGx9LGgucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlVbmlxdWVJdGVtcz1mdW5jdGlvbihlLHQpe2lmKHQudW5pcXVlSXRlbXMpZm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspZm9yKHZhciBvPXIrMTtvPGUubGVuZ3RoO28rKylpZihuKGVbcl0sZVtvXSkpe3ZhciBpPXRoaXMuY3JlYXRlRXJyb3IoXy5BUlJBWV9VTklRVUUse21hdGNoMTpyLG1hdGNoMjpvfSwiIiwiL3VuaXF1ZUl0ZW1zIixudWxsLGUsdCk7aWYodGhpcy5oYW5kbGVFcnJvcihpKSlyZXR1cm4gaX1yZXR1cm4gbnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVBcnJheUl0ZW1zPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10Lml0ZW1zKXJldHVybiBudWxsO3ZhciBuLG87aWYoQXJyYXkuaXNBcnJheSh0Lml0ZW1zKSl7Zm9yKG89MDtvPGUubGVuZ3RoO28rKylpZihvPHQuaXRlbXMubGVuZ3RoKXtpZihuPXRoaXMudmFsaWRhdGVBbGwoZVtvXSx0Lml0ZW1zW29dLFtvXSxbIml0ZW1zIixvXSxyKyIvIitvKSlyZXR1cm4gbn1lbHNlIGlmKHZvaWQgMCE9PXQuYWRkaXRpb25hbEl0ZW1zKWlmKCJib29sZWFuIj09dHlwZW9mIHQuYWRkaXRpb25hbEl0ZW1zKXtpZighdC5hZGRpdGlvbmFsSXRlbXMmJihuPXRoaXMuY3JlYXRlRXJyb3IoXy5BUlJBWV9BRERJVElPTkFMX0lURU1TLHt9LCIvIitvLCIvYWRkaXRpb25hbEl0ZW1zIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihuKSkpcmV0dXJuIG59ZWxzZSBpZihuPXRoaXMudmFsaWRhdGVBbGwoZVtvXSx0LmFkZGl0aW9uYWxJdGVtcyxbb10sWyJhZGRpdGlvbmFsSXRlbXMiXSxyKyIvIitvKSlyZXR1cm4gbn1lbHNlIGZvcihvPTA7bzxlLmxlbmd0aDtvKyspaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbb10sdC5pdGVtcyxbb10sWyJpdGVtcyJdLHIrIi8iK28pKXJldHVybiBuO3JldHVybiBudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdD1mdW5jdGlvbihlLHQscil7cmV0dXJuIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZXx8QXJyYXkuaXNBcnJheShlKT9udWxsOnRoaXMudmFsaWRhdGVPYmplY3RNaW5NYXhQcm9wZXJ0aWVzKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU9iamVjdFJlcXVpcmVkUHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3RQcm9wZXJ0aWVzKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU9iamVjdERlcGVuZGVuY2llcyhlLHQscil8fG51bGx9LGgucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0TWluTWF4UHJvcGVydGllcz1mdW5jdGlvbihlLHQpe3ZhciByLG49T2JqZWN0LmtleXMoZSk7CnJldHVybiB2b2lkIDAhPT10Lm1pblByb3BlcnRpZXMmJm4ubGVuZ3RoPHQubWluUHJvcGVydGllcyYmKHI9dGhpcy5jcmVhdGVFcnJvcihfLk9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU0se3Byb3BlcnR5Q291bnQ6bi5sZW5ndGgsbWluaW11bTp0Lm1pblByb3BlcnRpZXN9LCIiLCIvbWluUHJvcGVydGllcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6dm9pZCAwIT09dC5tYXhQcm9wZXJ0aWVzJiZuLmxlbmd0aD50Lm1heFByb3BlcnRpZXMmJihyPXRoaXMuY3JlYXRlRXJyb3IoXy5PQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNLHtwcm9wZXJ0eUNvdW50Om4ubGVuZ3RoLG1heGltdW06dC5tYXhQcm9wZXJ0aWVzfSwiIiwiL21heFByb3BlcnRpZXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOm51bGx9LGgucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0UmVxdWlyZWRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09dC5yZXF1aXJlZClmb3IodmFyIHI9MDtyPHQucmVxdWlyZWQubGVuZ3RoO3IrKyl7dmFyIG49dC5yZXF1aXJlZFtyXTtpZih2b2lkIDA9PT1lW25dKXt2YXIgbz10aGlzLmNyZWF0ZUVycm9yKF8uT0JKRUNUX1JFUVVJUkVELHtrZXk6bn0sIiIsIi9yZXF1aXJlZC8iK3IsbnVsbCxlLHQpO2lmKHRoaXMuaGFuZGxlRXJyb3IobykpcmV0dXJuIG99fXJldHVybiBudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO2Zvcih2YXIgbyBpbiBlKXt2YXIgaT1yKyIvIitvLnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpLHM9ITE7aWYodm9pZCAwIT09dC5wcm9wZXJ0aWVzJiZ2b2lkIDAhPT10LnByb3BlcnRpZXNbb10mJihzPSEwLG49dGhpcy52YWxpZGF0ZUFsbChlW29dLHQucHJvcGVydGllc1tvXSxbb10sWyJwcm9wZXJ0aWVzIixvXSxpKSkpcmV0dXJuIG47aWYodm9pZCAwIT09dC5wYXR0ZXJuUHJvcGVydGllcylmb3IodmFyIGEgaW4gdC5wYXR0ZXJuUHJvcGVydGllcyl7dmFyIHU9bmV3IFJlZ0V4cChhKTtpZih1LnRlc3QobykmJihzPSEwLG49dGhpcy52YWxpZGF0ZUFsbChlW29dLHQucGF0dGVyblByb3BlcnRpZXNbYV0sW29dLFsicGF0dGVyblByb3BlcnRpZXMiLGFdLGkpKSlyZXR1cm4gbn1pZihzKXRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW2ldPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW2ldKTtlbHNlIGlmKHZvaWQgMCE9PXQuYWRkaXRpb25hbFByb3BlcnRpZXMpe2lmKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW2ldPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW2ldKSwiYm9vbGVhbiI9PXR5cGVvZiB0LmFkZGl0aW9uYWxQcm9wZXJ0aWVzKXtpZighdC5hZGRpdGlvbmFsUHJvcGVydGllcyYmKG49dGhpcy5jcmVhdGVFcnJvcihfLk9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVMse2tleTpvfSwiIiwiL2FkZGl0aW9uYWxQcm9wZXJ0aWVzIixudWxsLGUsdCkucHJlZml4V2l0aChvLG51bGwpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbb10sdC5hZGRpdGlvbmFsUHJvcGVydGllcyxbb10sWyJhZGRpdGlvbmFsUHJvcGVydGllcyJdLGkpKXJldHVybiBufWVsc2UgdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYhdGhpcy5rbm93blByb3BlcnR5UGF0aHNbaV0mJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW2ldPSEwKX1yZXR1cm4gbnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO2lmKHZvaWQgMCE9PXQuZGVwZW5kZW5jaWVzKWZvcih2YXIgbyBpbiB0LmRlcGVuZGVuY2llcylpZih2b2lkIDAhPT1lW29dKXt2YXIgaT10LmRlcGVuZGVuY2llc1tvXTtpZigic3RyaW5nIj09dHlwZW9mIGkpe2lmKHZvaWQgMD09PWVbaV0mJihuPXRoaXMuY3JlYXRlRXJyb3IoXy5PQkpFQ1RfREVQRU5ERU5DWV9LRVkse2tleTpvLG1pc3Npbmc6aX0sIiIsIiIsbnVsbCxlLHQpLnByZWZpeFdpdGgobnVsbCxvKS5wcmVmaXhXaXRoKG51bGwsImRlcGVuZGVuY2llcyIpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYoQXJyYXkuaXNBcnJheShpKSlmb3IodmFyIHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGE9aVtzXTtpZih2b2lkIDA9PT1lW2FdJiYobj10aGlzLmNyZWF0ZUVycm9yKF8uT0JKRUNUX0RFUEVOREVOQ1lfS0VZLHtrZXk6byxtaXNzaW5nOmF9LCIiLCIvIitzLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsbykucHJlZml4V2l0aChudWxsLCJkZXBlbmRlbmNpZXMiKSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKG49dGhpcy52YWxpZGF0ZUFsbChlLGksW10sWyJkZXBlbmRlbmNpZXMiLG9dLHIpKXJldHVybiBufXJldHVybiBudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZUNvbWJpbmF0aW9ucz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVBbGxPZihlLHQscil8fHRoaXMudmFsaWRhdGVBbnlPZihlLHQscil8fHRoaXMudmFsaWRhdGVPbmVPZihlLHQscil8fHRoaXMudmFsaWRhdGVOb3QoZSx0LHIpfHxudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZUFsbE9mPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10LmFsbE9mKXJldHVybiBudWxsO2Zvcih2YXIgbixvPTA7bzx0LmFsbE9mLmxlbmd0aDtvKyspe3ZhciBpPXQuYWxsT2Zbb107aWYobj10aGlzLnZhbGlkYXRlQWxsKGUsaSxbXSxbImFsbE9mIixvXSxyKSlyZXR1cm4gbn1yZXR1cm4gbnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVBbnlPZj1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5hbnlPZilyZXR1cm4gbnVsbDt2YXIgbixvLGk9W10scz10aGlzLmVycm9ycy5sZW5ndGg7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYobj10aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzLG89dGhpcy5rbm93blByb3BlcnR5UGF0aHMpO2Zvcih2YXIgYT0hMCx1PTA7dTx0LmFueU9mLmxlbmd0aDt1Kyspe3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBjPXQuYW55T2ZbdV0sbD10aGlzLmVycm9ycy5sZW5ndGgsZj10aGlzLnZhbGlkYXRlQWxsKGUsYyxbXSxbImFueU9mIix1XSxyKTtpZihudWxsPT09ZiYmbD09PXRoaXMuZXJyb3JzLmxlbmd0aCl7aWYodGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpe2Zvcih2YXIgcCBpbiB0aGlzLmtub3duUHJvcGVydHlQYXRocylvW3BdPSEwLGRlbGV0ZSBuW3BdO2Zvcih2YXIgZCBpbiB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzKW9bZF18fChuW2RdPSEwKTthPSExO2NvbnRpbnVlfXJldHVybiBudWxsfWYmJmkucHVzaChmLnByZWZpeFdpdGgobnVsbCwiIit1KS5wcmVmaXhXaXRoKG51bGwsImFueU9mIikpfXJldHVybiB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9byksYT8oaT1pLmNvbmNhdCh0aGlzLmVycm9ycy5zbGljZShzKSksdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSx0aGlzLmNyZWF0ZUVycm9yKF8uQU5ZX09GX01JU1NJTkcse30sIiIsIi9hbnlPZiIsaSxlLHQpKTp2b2lkIDB9LGgucHJvdG90eXBlLnZhbGlkYXRlT25lT2Y9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQub25lT2YpcmV0dXJuIG51bGw7dmFyIG4sbyxpPW51bGwscz1bXSxhPXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsbz10aGlzLmtub3duUHJvcGVydHlQYXRocyk7Zm9yKHZhciB1PTA7dTx0Lm9uZU9mLmxlbmd0aDt1Kyspe3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBjPXQub25lT2ZbdV0sbD10aGlzLmVycm9ycy5sZW5ndGgsZj10aGlzLnZhbGlkYXRlQWxsKGUsYyxbXSxbIm9uZU9mIix1XSxyKTtpZihudWxsPT09ZiYmbD09PXRoaXMuZXJyb3JzLmxlbmd0aCl7aWYobnVsbCE9PWkpcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksdGhpcy5jcmVhdGVFcnJvcihfLk9ORV9PRl9NVUxUSVBMRSx7aW5kZXgxOmksaW5kZXgyOnV9LCIiLCIvb25lT2YiLG51bGwsZSx0KTtpZihpPXUsdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKXtmb3IodmFyIHAgaW4gdGhpcy5rbm93blByb3BlcnR5UGF0aHMpb1twXT0hMCxkZWxldGUgbltwXTtmb3IodmFyIGQgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocylvW2RdfHwobltkXT0hMCl9fWVsc2UgZiYmcy5wdXNoKGYpfXJldHVybiB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9byksbnVsbD09PWk/KHM9cy5jb25jYXQodGhpcy5lcnJvcnMuc2xpY2UoYSkpLHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksdGhpcy5jcmVhdGVFcnJvcihfLk9ORV9PRl9NSVNTSU5HLHt9LCIiLCIvb25lT2YiLHMsZSx0KSk6KHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksbnVsbCl9LGgucHJvdG90eXBlLnZhbGlkYXRlTm90PWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10Lm5vdClyZXR1cm4gbnVsbDt2YXIgbixvLGk9dGhpcy5lcnJvcnMubGVuZ3RoO3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKG49dGhpcy51bmtub3duUHJvcGVydHlQYXRocyxvPXRoaXMua25vd25Qcm9wZXJ0eVBhdGhzLHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBzPXRoaXMudmFsaWRhdGVBbGwoZSx0Lm5vdCxudWxsLG51bGwsciksYT10aGlzLmVycm9ycy5zbGljZShpKTtyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxpKSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9byksbnVsbD09PXMmJjA9PT1hLmxlbmd0aD90aGlzLmNyZWF0ZUVycm9yKF8uTk9UX1BBU1NFRCx7fSwiIiwiL25vdCIsbnVsbCxlLHQpOm51bGx9LGgucHJvdG90eXBlLnZhbGlkYXRlSHlwZXJtZWRpYT1mdW5jdGlvbihlLHQsbil7aWYoIXQubGlua3MpcmV0dXJuIG51bGw7Zm9yKHZhciBvLGk9MDtpPHQubGlua3MubGVuZ3RoO2krKyl7dmFyIHM9dC5saW5rc1tpXTtpZigiZGVzY3JpYmVkYnkiPT09cy5yZWwpe2Zvcih2YXIgYT1uZXcgcihzLmhyZWYpLHU9ITAsYz0wO2M8YS52YXJOYW1lcy5sZW5ndGg7YysrKWlmKCEoYS52YXJOYW1lc1tjXWluIGUpKXt1PSExO2JyZWFrfWlmKHUpe3ZhciBsPWEuZmlsbEZyb21PYmplY3QoZSksZj17JHJlZjpsfTtpZihvPXRoaXMudmFsaWRhdGVBbGwoZSxmLFtdLFsibGlua3MiLGldLG4pKXJldHVybiBvfX19fTt2YXIgXz17SU5WQUxJRF9UWVBFOjAsRU5VTV9NSVNNQVRDSDoxLEFOWV9PRl9NSVNTSU5HOjEwLE9ORV9PRl9NSVNTSU5HOjExLE9ORV9PRl9NVUxUSVBMRToxMixOT1RfUEFTU0VEOjEzLE5VTUJFUl9NVUxUSVBMRV9PRjoxMDAsTlVNQkVSX01JTklNVU06MTAxLE5VTUJFUl9NSU5JTVVNX0VYQ0xVU0lWRToxMDIsTlVNQkVSX01BWElNVU06MTAzLE5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRToxMDQsTlVNQkVSX05PVF9BX05VTUJFUjoxMDUsU1RSSU5HX0xFTkdUSF9TSE9SVDoyMDAsU1RSSU5HX0xFTkdUSF9MT05HOjIwMSxTVFJJTkdfUEFUVEVSTjoyMDIsT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTTozMDAsT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTTozMDEsT0JKRUNUX1JFUVVJUkVEOjMwMixPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOjMwMyxPQkpFQ1RfREVQRU5ERU5DWV9LRVk6MzA0LEFSUkFZX0xFTkdUSF9TSE9SVDo0MDAsQVJSQVlfTEVOR1RIX0xPTkc6NDAxLEFSUkFZX1VOSVFVRTo0MDIsQVJSQVlfQURESVRJT05BTF9JVEVNUzo0MDMsRk9STUFUX0NVU1RPTTo1MDAsS0VZV09SRF9DVVNUT006NTAxLENJUkNVTEFSX1JFRkVSRU5DRTo2MDAsVU5LTk9XTl9QUk9QRVJUWToxZTN9LHY9e307Zm9yKHZhciBtIGluIF8pdltfW21dXT1tO3ZhciBnPXtJTlZBTElEX1RZUEU6IkludmFsaWQgdHlwZToge3R5cGV9IChleHBlY3RlZCB7ZXhwZWN0ZWR9KSIsRU5VTV9NSVNNQVRDSDoiTm8gZW51bSBtYXRjaCBmb3I6IHt2YWx1ZX0iLEFOWV9PRl9NSVNTSU5HOidEYXRhIGRvZXMgbm90IG1hdGNoIGFueSBzY2hlbWFzIGZyb20gImFueU9mIicsT05FX09GX01JU1NJTkc6J0RhdGEgZG9lcyBub3QgbWF0Y2ggYW55IHNjaGVtYXMgZnJvbSAib25lT2YiJyxPTkVfT0ZfTVVMVElQTEU6J0RhdGEgaXMgdmFsaWQgYWdhaW5zdCBtb3JlIHRoYW4gb25lIHNjaGVtYSBmcm9tICJvbmVPZiI6IGluZGljZXMge2luZGV4MX0gYW5kIHtpbmRleDJ9JyxOT1RfUEFTU0VEOidEYXRhIG1hdGNoZXMgc2NoZW1hIGZyb20gIm5vdCInLE5VTUJFUl9NVUxUSVBMRV9PRjoiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSBtdWx0aXBsZSBvZiB7bXVsdGlwbGVPZn0iLE5VTUJFUl9NSU5JTVVNOiJWYWx1ZSB7dmFsdWV9IGlzIGxlc3MgdGhhbiBtaW5pbXVtIHttaW5pbXVtfSIsTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFOiJWYWx1ZSB7dmFsdWV9IGlzIGVxdWFsIHRvIGV4Y2x1c2l2ZSBtaW5pbXVtIHttaW5pbXVtfSIsTlVNQkVSX01BWElNVU06IlZhbHVlIHt2YWx1ZX0gaXMgZ3JlYXRlciB0aGFuIG1heGltdW0ge21heGltdW19IixOVU1CRVJfTUFYSU1VTV9FWENMVVNJVkU6IlZhbHVlIHt2YWx1ZX0gaXMgZXF1YWwgdG8gZXhjbHVzaXZlIG1heGltdW0ge21heGltdW19IixOVU1CRVJfTk9UX0FfTlVNQkVSOiJWYWx1ZSB7dmFsdWV9IGlzIG5vdCBhIHZhbGlkIG51bWJlciIsU1RSSU5HX0xFTkdUSF9TSE9SVDoiU3RyaW5nIGlzIHRvbyBzaG9ydCAoe2xlbmd0aH0gY2hhcnMpLCBtaW5pbXVtIHttaW5pbXVtfSIsU1RSSU5HX0xFTkdUSF9MT05HOiJTdHJpbmcgaXMgdG9vIGxvbmcgKHtsZW5ndGh9IGNoYXJzKSwgbWF4aW11bSB7bWF4aW11bX0iLFNUUklOR19QQVRURVJOOiJTdHJpbmcgZG9lcyBub3QgbWF0Y2ggcGF0dGVybjoge3BhdHRlcm59IixPQkpFQ1RfUFJPUEVSVElFU19NSU5JTVVNOiJUb28gZmV3IHByb3BlcnRpZXMgZGVmaW5lZCAoe3Byb3BlcnR5Q291bnR9KSwgbWluaW11bSB7bWluaW11bX0iLE9CSkVDVF9QUk9QRVJUSUVTX01BWElNVU06IlRvbyBtYW55IHByb3BlcnRpZXMgZGVmaW5lZCAoe3Byb3BlcnR5Q291bnR9KSwgbWF4aW11bSB7bWF4aW11bX0iLE9CSkVDVF9SRVFVSVJFRDoiTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eToge2tleX0iLE9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVM6IkFkZGl0aW9uYWwgcHJvcGVydGllcyBub3QgYWxsb3dlZCIsT0JKRUNUX0RFUEVOREVOQ1lfS0VZOiJEZXBlbmRlbmN5IGZhaWxlZCAtIGtleSBtdXN0IGV4aXN0OiB7bWlzc2luZ30gKGR1ZSB0byBrZXk6IHtrZXl9KSIsQVJSQVlfTEVOR1RIX1NIT1JUOiJBcnJheSBpcyB0b28gc2hvcnQgKHtsZW5ndGh9KSwgbWluaW11bSB7bWluaW11bX0iLEFSUkFZX0xFTkdUSF9MT05HOiJBcnJheSBpcyB0b28gbG9uZyAoe2xlbmd0aH0pLCBtYXhpbXVtIHttYXhpbXVtfSIsQVJSQVlfVU5JUVVFOiJBcnJheSBpdGVtcyBhcmUgbm90IHVuaXF1ZSAoaW5kaWNlcyB7bWF0Y2gxfSBhbmQge21hdGNoMn0pIixBUlJBWV9BRERJVElPTkFMX0lURU1TOiJBZGRpdGlvbmFsIGl0ZW1zIG5vdCBhbGxvd2VkIixGT1JNQVRfQ1VTVE9NOiJGb3JtYXQgdmFsaWRhdGlvbiBmYWlsZWQgKHttZXNzYWdlfSkiLEtFWVdPUkRfQ1VTVE9NOiJLZXl3b3JkIGZhaWxlZDoge2tleX0gKHttZXNzYWdlfSkiLENJUkNVTEFSX1JFRkVSRU5DRToiQ2lyY3VsYXIgJHJlZnM6IHt1cmxzfSIsVU5LTk9XTl9QUk9QRVJUWToiVW5rbm93biBwcm9wZXJ0eSAobm90IGluIHNjaGVtYSkifTtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksYy5wcm90b3R5cGUuY29uc3RydWN0b3I9YyxjLnByb3RvdHlwZS5uYW1lPSJWYWxpZGF0aW9uRXJyb3IiLGMucHJvdG90eXBlLnByZWZpeFdpdGg9ZnVuY3Rpb24oZSx0KXtpZihudWxsIT09ZSYmKGU9ZS5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKSx0aGlzLmRhdGFQYXRoPSIvIitlK3RoaXMuZGF0YVBhdGgpLG51bGwhPT10JiYodD10LnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpLHRoaXMuc2NoZW1hUGF0aD0iLyIrdCt0aGlzLnNjaGVtYVBhdGgpLG51bGwhPT10aGlzLnN1YkVycm9ycylmb3IodmFyIHI9MDtyPHRoaXMuc3ViRXJyb3JzLmxlbmd0aDtyKyspdGhpcy5zdWJFcnJvcnNbcl0ucHJlZml4V2l0aChlLHQpO3JldHVybiB0aGlzfTt2YXIgaj17fSxPPWYoKTtyZXR1cm4gTy5hZGRMYW5ndWFnZSgiZW4tZ2IiLGcpLE8udHY0PU8sT30pfSx7fV0sMTE2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4saSxzLGEsdSl7byh0aGlzLGUpLHRoaXMuX2d1aWQ9dCx0aGlzLl90eXBlPXIsdGhpcy5fdmVyc2lvbj1uLHRoaXMuX29iamVjdE5hbWU9aSx0aGlzLl9kZXNjcmlwdGlvbj1zLHRoaXMuX2xhbmd1YWdlPWEsdGhpcy5fc291cmNlUGFja2FnZVVSTD11LHRoaXMuX3NpZ25hdHVyZT1udWxsLHRoaXMuX3NvdXJjZVBhY2thZ2U9bnVsbH1yZXR1cm4gbihlLFt7a2V5OiJndWlkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ3VpZH0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9ndWlkPWUpfX0se2tleToidHlwZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fdHlwZT1lKX19LHtrZXk6InZlcnNpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92ZXJzaW9ufSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3ZlcnNpb249ZSl9fSx7a2V5OiJvYmplY3ROYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JqZWN0TmFtZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9vYmplY3ROYW1lPWUpfX0se2tleToiZGVzY3JpcHRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXNjcmlwdGlvbn0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9kZXNjcmlwdGlvbj1lKX19LHtrZXk6Imxhbmd1YWdlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGFuZ3VhZ2V9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fbGFuZ3VhZ2U9ZSl9fSx7a2V5OiJzaWduYXR1cmUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaWduYXR1cmV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc2lnbmF0dXJlPWUpfX0se2tleToic291cmNlUGFja2FnZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZVBhY2thZ2V9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc291cmNlUGFja2FnZT1lKX19LHtrZXk6InNvdXJjZVBhY2thZ2VVUkwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VQYWNrYWdlVVJMfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NvdXJjZVBhY2thZ2VVUkw9ZSl9fV0pLGV9KCkscz17SFlQRVJUWToiaHlwZXJ0eSIsUFJPVE9TVFVCOiJwcm90b3N0dWIiLEhZUEVSVFlfUlVOVElNRToiaHlwZXJ0eV9ydW50aW1lIixIWVBFUlRZX0lOVEVSQ0VQVE9SOiJoeXBlcnR5X2luc3BlY3RvciIsSFlQRVJUWV9EQVRBX09CSkVDVDoiaHlwZXJ0eV9kYXRhX29iamVjdCIsUE9MSUNZX0VORk9SQ0VSOiJwb2xpY3lfZW5mb3JjZXIiLERBVEFfU0NIRU1BOiJkYXRhX3NjaGVtYSJ9O3IuQ2F0YWxvZ3VlT2JqZWN0VHlwZT1zO3ZhciBhPXtKQVZBU0NSSVBUX0VDTUE2OiJqYXZhc2NyaXB0X2VjbWE2IixKQVZBU0NSSVBUX0VDTUE1OiJqYXZhc2NyaXB0X2VjbWE1IixKU09OX1NDSEVNQV9WNDoianNvbl9zY2hlbWFfdjQiLFBZVEhPTjoicHl0aG9uIixUWVBFU0NSSVBUOiJ0eXBlc2NyaXB0In07ci5EYXRhT2JqZWN0U291cmNlTGFuZ3VhZ2U9YSxyWyJkZWZhdWx0Il09aX0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzfV0sMTE3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHU9ZSgiLi4vcmVUSElOS09iamVjdC9SZXRoaW5rT2JqZWN0IiksYz1hKHUpLGw9ZSgiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IiksZj1hKGwpLHA9ZSgiLi9Tb3VyY2VQYWNrYWdlIiksZD1hKHApLGg9ZSgiLi9IeXBlcnR5RGVzY3JpcHRvciIpLGI9YShoKSx5PWUoIi4vUHJvdG9jb2xTdHViRGVzY3JpcHRvciIpLF89YSh5KSx2PWUoIi4vSHlwZXJ0eVJ1bnRpbWVEZXNjcmlwdG9yIiksbT1hKHYpLGc9ZSgiLi9Qb2xpY3lFbmZvcmNlckRlc2NyaXB0b3IiKSxqPWEoZyksTz1lKCIuL0RhdGFPYmplY3RTY2hlbWEiKSxFPWEoTyksdz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscil7cyh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIpfXJldHVybiBvKHQsZSksaSh0LFt7a2V5OiJjcmVhdGVDYXRhbG9ndWVEYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8saSxzKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIHMpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyBmWyJkZWZhdWx0Il0oZSx0LHIsbixvLGkscyl9fSx7a2V5OiJjcmVhdGVIeXBlcnR5RGVzY3JpcHRvck9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvLGkscyxhKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIHN8fCJ1bmRlZmluZWQiPT10eXBlb2YgYSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IGJbImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5IWVBFUlRZLHQscixuLG8saSxzLGEpfX0se2tleToiY3JlYXRlUHJvdG9TdHViRGVzY3JpcHRvck9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvLGkscyxhLHUpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBvfHwidW5kZWZpbmVkIj09dHlwZW9mIGl8fCJ1bmRlZmluZWQiPT10eXBlb2Ygc3x8InVuZGVmaW5lZCI9PXR5cGVvZiBhfHwidW5kZWZpbmVkIj09dHlwZW9mIHUpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyBfWyJkZWZhdWx0Il0oZSxsLkNhdGFsb2d1ZU9iamVjdFR5cGUuUFJPVE9TVFVCLHQscixuLG8saSxzLGEsdSl9fSx7a2V5OiJjcmVhdGVIeXBlcnR5UnVudGltZURlc2NyaXB0b3JPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyxpLHMsYSx1KXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIHN8fCJ1bmRlZmluZWQiPT10eXBlb2YgYXx8InVuZGVmaW5lZCI9PXR5cGVvZiB1KXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgbVsiZGVmYXVsdCJdKGUsbC5DYXRhbG9ndWVPYmplY3RUeXBlLkhZUEVSVFlfUlVOVElNRSx0LHIsbixvLGkscyxhLHUpfX0se2tleToiY3JlYXRlUG9saWN5RW5mb3JjZXJEZXNjcmlwdG9yT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8saSxzLGEpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBvfHwidW5kZWZpbmVkIj09dHlwZW9mIGl8fCJ1bmRlZmluZWQiPT10eXBlb2Ygc3x8InVuZGVmaW5lZCI9PXR5cGVvZiBhKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgalsiZGVmYXVsdCJdKGUsbC5DYXRhbG9ndWVPYmplY3RUeXBlLlBPTElDWV9FTkZPUkNFUix0LHIsbixvLGkscyxhKX19LHtrZXk6ImNyZWF0ZURhdGFPYmplY3RTY2hlbWEiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyxpKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgRVsiZGVmYXVsdCJdKGUsbC5DYXRhbG9ndWVPYmplY3RUeXBlLkRBVEFfU0NIRU1BLHQscixuLG8saSl9fSx7a2V5OiJjcmVhdGVTb3VyY2VQYWNrYWdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgZFsiZGVmYXVsdCJdKGUsdCl9fV0pLHR9KGNbImRlZmF1bHQiXSk7clsiZGVmYXVsdCJdPXcsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi9yZVRISU5LT2JqZWN0L1JldGhpbmtPYmplY3QiOjEyNywiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IjoxMTYsIi4vRGF0YU9iamVjdFNjaGVtYSI6MTE4LCIuL0h5cGVydHlEZXNjcmlwdG9yIjoxMTksIi4vSHlwZXJ0eVJ1bnRpbWVEZXNjcmlwdG9yIjoxMjAsIi4vUG9saWN5RW5mb3JjZXJEZXNjcmlwdG9yIjoxMjEsIi4vUHJvdG9jb2xTdHViRGVzY3JpcHRvciI6MTIyLCIuL1NvdXJjZVBhY2thZ2UiOjEyMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGE9ZSgiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IiksdT1zKGEpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbyxzLGEsdSxjKXtpKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLHMsYSx1LGMpfXJldHVybiBvKHQsZSksdH0odVsiZGVmYXVsdCJdKSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8scyxhLHUsYyl7aSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxzLGEsdSxjKX1yZXR1cm4gbyh0LGUpLHR9KGMpO3IuTWVzc2FnZURhdGFPYmplY3RTY2hlbWE9bDt2YXIgZj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLHMsYSx1LGMsbCl7aSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxzLGEsdSxjKSx0aGlzLl9hY2Nlc3NDb250cm9sUG9saWN5PWx9cmV0dXJuIG8odCxlKSx0fShjKTtyLkh5cGVydHlEYXRhT2JqZWN0U2NoZW1hPWY7dmFyIHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbyxzLGEsdSxjLGwpe2kodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8scyxhLHUsYyxsKX1yZXR1cm4gbyh0LGUpLHR9KGYpO3IuQ29tbXVuaWNhdGlvbkRhdGFPYmplY3RTY2hlbWE9cDt2YXIgZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLHMsYSx1LGMsbCl7aSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxzLGEsdSxjLGwpfXJldHVybiBvKHQsZSksdH0oZik7ci5Db25uZWN0aW9uRGF0YU9iamVjdFNjaGVtYT1kO3ZhciBoPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8scyxhLHUsYyxsKXtpKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLHMsYSx1LGMsbCl9cmV0dXJuIG8odCxlKSx0fShmKTtyLklkZW50aWZ5RGF0YU9iamVjdFNjaGVtYT1oO3ZhciBiPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8scyxhLHUsYyxsKXtpKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLHMsYSx1LGMsbCl9cmV0dXJuIG8odCxlKSx0fShmKTtyLkNvbnRleHREYXRhT2JqZWN0U2NoZW1hPWIsclsiZGVmYXVsdCJdPWN9LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IjoxMTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMTk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSxjPWEodSksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLGksYSx1LGMsbCxmKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLGksYSx1LGMpLHRoaXMuX2NvbmZpZ3VyYXRpb249e30sdGhpcy5fY29uc3RyYWludHM9e30sdGhpcy5fcG9saWNpZXM9e30sdGhpcy5fbWVzc2FnZVNjaGVtYT1udWxsLHRoaXMuX2h5cGVydHlUeXBlPWwsdGhpcy5fZGF0YU9iamVjdHM9Zn1yZXR1cm4gbyh0LGUpLGkodCxbe2tleToiaHlwZXJ0eVR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oeXBlcnR5VHlwZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9oeXBlcnR5VHlwZT1lKX19LHtrZXk6ImRhdGFPYmplY3RzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YU9iamVjdHN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fZGF0YU9iamVjdHM9ZSl9fSx7a2V5OiJjb25maWd1cmF0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uZmlndXJhdGlvbn0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9jb25maWd1cmF0aW9uPWUpfX0se2tleToiY29uc3RyYWludHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25zdHJhaW50c30sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9jb25zdHJhaW50cz1lKX19LHtrZXk6Im1lc3NhZ2VTY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlU2NoZW1hfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX21lc3NhZ2VTY2hlbWE9ZSl9fSx7a2V5OiJwb2xpY2llcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvbGljaWVzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3BvbGljaWVzPWUpfX1dKSx0fShjWyJkZWZhdWx0Il0pLGY9e307ci5SdW50aW1lSHlwZXJ0eUNhcGFiaWxpdHlUeXBlPWY7dmFyIHA9e0NPTU1VTklDQVRPUjoiY29tbXVuaWNhdG9yIixJREVOVElUWToiaWRlbnRpdHkiLENPTlRFWFQ6ImNvbnRleHQifTtyLkh5cGVydHlUeXBlPXAsclsiZGVmYXVsdCJdPWx9LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IjoxMTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjE1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTIwOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHU9ZSgiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IiksYz1hKHUpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbyxpLGEsdSxjLGwsZixwKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLGksYSx1LGMpLHRoaXMuX3J1bnRpbWVUeXBlPWwsZj90aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzPWY6dGhpcy5faHlwZXJ0eUNhcGFiaWxpdGllcz17fSxwP3RoaXMuX3Byb3RvY29sQ2FwYWJpbGl0aWVzPXA6dGhpcy5fcHJvdG9jb2xDYXBhYmlsaXRpZXM9e319cmV0dXJuIG8odCxlKSxpKHQsW3trZXk6InJ1bnRpbWVUeXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVudGltZVR5cGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fcnVudGltZVR5cGU9ZSl9fSx7a2V5OiJoeXBlcnR5Q2FwYWJpbGl0aWVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHlwZXJ0eUNhcGFiaWxpdGllc30sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzPWUpfX0se2tleToicHJvdG9jb2xDYXBhYmlsaXRpZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3Byb3RvY29sQ2FwYWJpbGl0aWVzPWUpfX1dKSx0fShjWyJkZWZhdWx0Il0pLGY9e0JST1dTRVI6ImJyb3dzZXIiLFNUQU5EQUxPTkU6InN0YW5kYWxvbmUiLFNFUlZFUjoic2VydmVyIixHQVRFV0FZOiJnYXRld2F5In07ci5SdW50aW1lVHlwZT1mO3ZhciBwPXtNSUM6Im1pYyIsQ0FNRVJBOiJjYW1lcmEiLFNFTlNPUjoic2Vuc29yIixXRUJSVEM6IndlYnJ0YyIsT1JUQzoib3J0YyJ9O3IuUnVudGltZUh5cGVydHlDYXBhYmlsaXR5VHlwZT1wO3ZhciBkPXtIVFRQOiJodHRwIixIVFRQUzoiaHR0cHMiLFdTOiJ3cyIsV1NTOiJ3c3MiLENPQVA6ImNvYXAiLERBVEFDSEFORUw6ImRhdGFjaGFubmVsIn07ci5SdW50aW1lUHJvdG9jb2xDYXBhYmlsaXR5VHlwZT1kLHJbImRlZmF1bHQiXT1sfSx7Ii4vQ2F0YWxvZ3VlRGF0YU9iamVjdCI6MTE2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxNSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxN31dLDEyMTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciB1PWUoIi4vQ2F0YWxvZ3VlRGF0YU9iamVjdCIpLGM9YSh1KSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8saSxhLHUsYyxsLGYpe3ModGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8saSxhLHUsYyksdGhpcy5fY29uZmlndXJhdGlvbj1sLHRoaXMuX3BvbGljaWVzPWZ9cmV0dXJuIG8odCxlKSxpKHQsW3trZXk6ImNvbmZpZ3VyYXRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25maWd1cmF0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fY29uZmlndXJhdGlvbj1lfX0se2tleToicG9saWNpZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2xpY2llc30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3BvbGljaWVzPWV9fV0pLHR9KGNbImRlZmF1bHQiXSk7clsiZGVmYXVsdCJdPWwsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL0NhdGFsb2d1ZURhdGFPYmplY3QiOjExNiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMjI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSxjPWEodSksbD1lKCIuL0h5cGVydHlSdW50aW1lRGVzY3JpcHRvciIpLGY9KGEobCksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbyxpLGEsdSxjLGwsZixwKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLGksYSx1LGMpLHRoaXMuX21lc3NhZ2VTY2hlbWFzPWwsZj90aGlzLl9jb25maWd1cmF0aW9uPWY6dGhpcy5fY29uZmlndXJhdGlvbj17fSxwP3RoaXMuX2NvbnN0cmFpbnRzPXA6dGhpcy5fY29uc3RyYWludHM9e319cmV0dXJuIG8odCxlKSxpKHQsW3trZXk6Im1lc3NhZ2VTY2hlbWFzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZVNjaGVtYXN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fbWVzc2FnZVNjaGVtYXM9ZSl9fSx7a2V5OiJjb25zdHJhaW50cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnN0cmFpbnRzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2NvbnN0cmFpbnRzPWUpfX0se2tleToiY29uZmlndXJhdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ3VyYXRpb259LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fY29uZmlndXJhdGlvbj1lKX19XSksdH0oY1siZGVmYXVsdCJdKSk7clsiZGVmYXVsdCJdPWYsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL0NhdGFsb2d1ZURhdGFPYmplY3QiOjExNiwiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiOjEyMCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMjM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpe28odGhpcyxlKSx0aGlzLl9zb3VyY2VDb2RlPXIsdGhpcy5fc291cmNlQ29kZUNsYXNzbmFtZT10LHRoaXMuX2VuY29kaW5nPW51bGwsdGhpcy5fc2lnbmF0dXJlPW51bGx9cmV0dXJuIG4oZSxbe2tleToic291cmNlQ29kZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZUNvZGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc291cmNlQ29kZT1lKX19LHtrZXk6InNvdXJjZUNvZGVDbGFzc25hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VDb2RlQ2xhc3NuYW1lfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NvdXJjZUNvZGVDbGFzc25hbWU9ZSl9fSx7a2V5OiJlbmNvZGluZyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuY29kaW5nfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2VuY29kaW5nPWUpfX0se2tleToic2lnbmF0dXJlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2lnbmF0dXJlfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NpZ25hdHVyZT1lKX19XSksZX0oKTtyWyJkZWZhdWx0Il09aSx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTN9XSwxMjQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixpLHMpe28odGhpcyxlKSx0aGlzLmlkPXQsdGhpcy5mcm9tPXIsdGhpcy50bz1uLHRoaXMudHlwZT1pLHRoaXMuYm9keT1zfXJldHVybiBuKGUsW3trZXk6ImFzc2VydElkZW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCFlfHwhdCl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UsIHRva2VuIHRvIGJlIHJlbW92ZWQsIGFuZCBhc3NlcnRlZElkZW50aXR5IG11c3QgYmUgcHJvdmlkZWQiKTt2YXIgcj10aGlzLmJvZHk7cmV0dXJuIHIuaWRUb2tlbj1udWxsLHIuYXNzZXJ0ZWRJZGVudGl0eT10LHRoaXMuYm9keT1yLHRoaXN9fSx7a2V5OiJhZGRJZFRva2VuIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UsIHRva2VuIHRvIGJlIGFkZGVkLCBtdXN0IGJlIHByb3ZpZGVkIik7dmFyIHQ9dGhpcy5ib2R5O3JldHVybiB0LmlkVG9rZW49ZSx0aGlzLmJvZHk9dCx0aGlzfX0se2tleToiYWRkQWNjZXNzVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigibWVzc2FnZSwgdG9rZW4gdG8gYmUgYWRkZWQsIG11c3QgYmUgcHJvdmlkZWQiKTt2YXIgdD10aGlzLmJvZHk7cmV0dXJuIHQuYWNjZXNzVG9rZW49ZSx0aGlzLmJvZHk9dCx0aGlzfX1dKSxlfSgpO3IuTWVzc2FnZT1pO3ZhciBzPXtDUkVBVEU6ImNyZWF0ZSIsUkVBRDoicmVhZCIsVVBEQVRFOiJ1cGRhdGUiLERFTEVURToiZGVsZXRlIixTVUJTQ1JJQkU6InN1YnNjcmliZSIsVU5TVUJTQ1JJQkU6InVuc3Vic2NyaWJlIixSRVNQT05TRToicmVzcG9uc2UiLEZPUldBUkQ6ImZvcndhcmQifTtyLk1lc3NhZ2VUeXBlPXMsclsiZGVmYXVsdCJdPWl9LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxM31dLDEyNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3ZhciB0PWEoZSkucmVkdWNlKGZ1bmN0aW9uKHQscil7cmV0dXJuIHRbZVtyXV09cix0fSx7fSk7cmV0dXJuIHUoYShlKS5yZWR1Y2UoZnVuY3Rpb24odCxyKXtyZXR1cm4gdFtyXT1lW3JdLHR9LGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSkpfXZhciBvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpWyJkZWZhdWx0Il0sdT1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2ZyZWV6ZSIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuRW51bT1uO3ZhciBjPWZ1bmN0aW9uIHYoZSx0LHIsbixpKXtvKHRoaXMsdiksdGhpcy5pZFRva2VuPWUsdGhpcy5hY2Nlc3NUb2tlbj10LHRoaXMucmVzb3VyY2U9cix0aGlzLnNjaGVtYT1uLHRoaXMuYXNzZXJ0ZWRJZGVudGl0eT1pfTtyLk1lc3NhZ2VCb2R5PWM7dmFyIGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixzLGEsdSxjKXtpZihvKHRoaXMsdCksIWUpdGhyb3cgbmV3IEVycm9yKCJUaGUgdmFsdWUgcGFyYW1ldGVyIGlzIG51bGwiKTtpKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsbixzLGEsdSxjLHUsYyksdGhpcy52YWx1ZT1lLHImJih0aGlzLnBvbGljeT1yKX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuQ3JlYXRlTWVzc2FnZUJvZHk9bDt2YXIgZj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLHMsYSx1LGMsbCl7byh0aGlzLHQpLGkoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbixzLGEpLHUmJih0aGlzLmF0dHJpYnV0ZT11KSxjJiYodGhpcy5jcml0ZXJpYVN5bnRheD1jKSxsJiYodGhpcy5jcml0ZXJpYT1sKX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuUmVhZE1lc3NhZ2VCb2R5PWY7dmFyIHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixzLGEsdSl7byh0aGlzLHQpLGkoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbixzLGEpLHUmJih0aGlzLmF0dHJpYnV0ZT11KX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuRGVsZXRlTWVzc2FnZUJvZHk9cDt2YXIgZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLHMsYSx1LGMpe28odGhpcyx0KSxpKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG4scyxhKSx0aGlzLmF0dHJpYnV0ZT11LHRoaXMudmFsdWU9Y31yZXR1cm4gcyh0LGUpLHR9KGMpO3IuVXBkYXRlTWVzc2FnZUJvZHk9ZDt2YXIgaD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLHMsYSx1KXtvKHRoaXMsdCksaShPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixuLHMsYSksdGhpcy5tZXNzYWdlPXV9cmV0dXJuIHModCxlKSx0fShjKTtyLkZvcndhcmRNZXNzYWdlQm9keT1oO3ZhciBiPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG4scyxhKXtvKHRoaXMsdCksaShPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixuKSxzJiYodGhpcy5jb2RlPXMsdGhpcy5kZXNjcmlwdGlvbj1fW3NdKSxhJiYodGhpcy52YWx1ZT1hKX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuUmVzcG9uc2VNZXNzYWdlQm9keT1iO3ZhciB5PW4oezEwMDoiMTAwIiwxMDE6IjEwMSIsMjAwOiIyMDAiLDIwMToiMjAxIiwyMDI6IjIwMiIsMjAzOiIyMDMiLDIwNDoiMjA0IiwyMDU6IjIwNSIsMjA2OiIyMDYiLDMwMDoiMzAwIiwzMDE6IjMwMSIsMzAyOiIzMDIiLDMwMzoiMzAzIiwzMDQ6IjMwNCIsMzA1OiIzMDUiLDMwNzoiMzA3Iiw0MDA6IjQwMCIsNDAxOiI0MDEiLDQwMjoiNDAyIiw0MDM6IjQwMyIsNDA0OiI0MDQiLDQwNToiNDA1Iiw0MDY6IjQwNiIsNDA3OiI0MDciLDQwODoiNDA4Iiw0MDk6IjQwOSIsNDEwOiI0MTAiLDQxMToiNDExIiw0MTI6IjQxMiIsNDEzOiI0MTMiLDQxNDoiNDE0Iiw0MTU6IjQxNSIsNDE2OiI0MTYiLDQxNzoiNDE3Iiw0MjY6IjQyNiIsNTAwOiI1MDAiLDUwMToiNTAxIiw1MDI6IjUwMiIsNTAzOiI1MDMiLDUwNDoiNTA0Iiw1MDU6IjUwNSJ9KTtyLlJFU1BPTlNFX0NPREU9eTt2YXIgXz1uKHsxMDA6IkNvbnRpbnVlIiwxMDE6IlN3aXRjaGluZyBQcm90b2NvbHMiLDIwMDoiT0siLDIwMToiQ3JlYXRlZCIsMjAyOiJBY2NlcHRlZCIsMjAzOiJOb24tQXV0aG9yaXRhdGl2ZSBJbmZvcm1hdGlvbiIsMjA0OiJObyBDb250ZW50IiwyMDU6IlJlc2V0IENvbnRlbnQiLDIwNjoiUGFydGlhbCBDb250ZW50IiwzMDA6Ik11bHRpcGxlIENob2ljZXMiLDMwMToiTW92ZWQgUGVybWFuZW50bHkiLDMwMjoiRm91bmQiLDMwMzoiU2VlIE90aGVyIiwzMDQ6Ik5vdCBNb2RpZmllZCIsMzA1OiJVc2UgUHJveHkiLDMwNzoiVGVtcG9yYXJ5IFJlZGlyZWN0Iiw0MDA6IkJhZCBSZXF1ZXN0Iiw0MDE6IlVuYXV0aG9yaXplZCIsNDAyOiJQYXltZW50IFJlcXVpcmVkIiw0MDM6IkZvcmJpZGRlbiIsNDA0OiJOb3QgRm91bmQiLDQwNToiTWV0aG9kIE5vdCBBbGxvd2VkIiw0MDY6Ik5vdCBBY2NlcHRhYmxlIiw0MDc6IlByb3h5IEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkIiw0MDg6IlJlcXVlc3QgVGltZW91dCIsNDA5OiJDb25mbGljdCIsNDEwOiJHb25lIiw0MTE6Ikxlbmd0aCBSZXF1aXJlZCIsNDEyOiJQcmVjb25kaXRpb24gRmFpbGVkIiw0MTM6IlBheWxvYWQgVG9vIExhcmdlIiw0MTQ6IlJlcXVlc3QtVVJJIFRvbyBMb25nIiw0MTU6IlVuc3VwcG9ydGVkIE1lZGlhIFR5cGUiLDQxNjoiUmFuZ2UgTm90IFNhdGlzZmlhYmxlIiw0MTc6IkV4cGVjdGF0aW9uIEZhaWxlZCIsNDI2OiJVcGdyYWRlIFJlcXVpcmVkIiw1MDA6IkludGVybmFsIFNlcnZlciBFcnJvciIsNTAxOiJOb3QgSW1wbGVtZW50ZWQiLDUwMjoiQmFkIEdhdGV3YXkiLDUwMzoiU2VydmljZSBVbmF2YWlsYWJsZSIsNTA0OiJHYXRld2F5IFRpbWUtb3V0Iiw1MDU6IkhUVFAgVmVyc2lvbiBOb3QgU3VwcG9ydGVkIn0pO3IuUkVBU09OX1BIUkFTRT1fLHJbImRlZmF1bHQiXT1jfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZnJlZXplIjozLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTZ9XSwxMjY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL3JlZ2VuZXJhdG9yIilbImRlZmF1bHQiXSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBjPWUoIi4uL3JlVEhJTktPYmplY3QvUmV0aGlua09iamVjdC5qcyIpLGw9dShjKSxmPWUoIi4vTWVzc2FnZS5qcyIpLHA9dShmKSxkPWUoIi4vTWVzc2FnZUJvZHkuanMiKSxoPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUsciksdGhpcy5teUdlbmVyYXRvcj0obmV3IGIpLmlkTWFrZXIoKX1yZXR1cm4gbyh0LGUpLGkodCxbe2tleToidmFsaWRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksInZhbGlkYXRlIix0aGlzKS5jYWxsKHRoaXMsZSl9fSx7a2V5OiJjcmVhdGVDcmVhdGVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7aWYoIWV8fCF0fHwhcil0aHJvdyBuZXcgRXJyb3IoImZyb20sIHRvLCBhbmQgdmFsdWUgb2Ygb2JqZWN0IHRvIGJlIGNyZWF0ZWQgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBkLkNyZWF0ZU1lc3NhZ2VCb2R5KHIsbixudWxsLG51bGwsbnVsbCxudWxsLG51bGwpLHM9bmV3IHBbImRlZmF1bHQiXShvLGUsdCxmLk1lc3NhZ2VUeXBlLkNSRUFURSxpKTtyZXR1cm4gc319LHtrZXk6ImNyZWF0ZUZvcndhcmRNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2lmKCFlfHwhdHx8IXIpdGhyb3cgbmV3IEVycm9yKCJmcm9tLCB0bywgYW5kIG1lc3NhZ2UgdG8gZm9yd2FyZCBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBuPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLG89bmV3IGQuRm9yd2FyZE1lc3NhZ2VCb2R5KG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxyKSxpPW5ldyBwWyJkZWZhdWx0Il0obixlLHQsZi5NZXNzYWdlVHlwZS5GT1JXQVJELG8pO3JldHVybiBpfX0se2tleToiY3JlYXRlRGVsZXRlTWVzc2FnZVJlcXVlc3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe2lmKCFlfHwhdCl0aHJvdyBuZXcgRXJyb3IoImZyb20gYW5kIHRvIHBhcmFtZXRlcnMgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBkLkRlbGV0ZU1lc3NhZ2VCb2R5KG51bGwsbnVsbCxyLG4sbnVsbCxudWxsKSxzPW5ldyBwWyJkZWZhdWx0Il0obyxlLHQsZi5NZXNzYWdlVHlwZS5ERUxFVEUsaSk7cmV0dXJuIHN9fSx7a2V5OiJjcmVhdGVVcGRhdGVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvKXtpZighZXx8IXR8fCFyKXRocm93IG5ldyBFcnJvcigiZnJvbSwgYW5kIHRvIGFuZCB2YWx1ZSBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBpPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLHM9bmV3IGQuVXBkYXRlTWVzc2FnZUJvZHkobnVsbCxudWxsLG4sbnVsbCxudWxsLG8sciksYT1uZXcgcFsiZGVmYXVsdCJdKGksZSx0LGYuTWVzc2FnZVR5cGUuVVBEQVRFLHMpO3JldHVybiBhfX0se2tleToiY3JlYXRlUmVhZE1lc3NhZ2VSZXF1ZXN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZighZXx8IXR8fCFyKXRocm93IG5ldyBFcnJvcigiZnJvbSwgdG8gYW5kIHRoZSByZXNvdXJjZSB0byByZWFkIGZyb20gTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBkLlJlYWRNZXNzYWdlQm9keShudWxsLG51bGwscixudWxsLG51bGwsbixudWxsLG51bGwpLHM9bmV3IHBbImRlZmF1bHQiXShvLGUsdCxmLk1lc3NhZ2VUeXBlLlJFQUQsaSk7cmV0dXJuIHN9fSx7a2V5OiJjcmVhdGVTdWJzY3JpYmVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2lmKCFlfHwhdHx8IXIpdGhyb3cgbmV3IEVycm9yKCJmcm9tLCB0byBhbmQgdGhlIHJlc291cmNlIHRvIHN1YnNjcmliZSB0byBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBuPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLG89bmV3IGQuTWVzc2FnZUJvZHkobnVsbCxudWxsLHIsbnVsbCxudWxsKSxpPW5ldyBwWyJkZWZhdWx0Il0obixlLHQsZi5NZXNzYWdlVHlwZS5TVUJTQ1JJQkUsbyk7cmV0dXJuIGl9fSx7a2V5OiJjcmVhdGVVbnN1YnNjcmliZU1lc3NhZ2VSZXF1ZXN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscil7aWYoIWV8fCF0fHwhcil0aHJvdyBuZXcgRXJyb3IoImZyb20sIHRvIGFuZCB0aGUgcmVzb3VyY2UgdG8gc3Vic2NyaWJlIHRvIE1VU1QgYmUgc3BlY2lmaWVkIik7dmFyIG49dGhpcy5teUdlbmVyYXRvci5uZXh0KCkudmFsdWUsbz1uZXcgZC5NZXNzYWdlQm9keShudWxsLG51bGwscixudWxsLG51bGwpLGk9bmV3IHBbImRlZmF1bHQiXShuLGUsdCxmLk1lc3NhZ2VUeXBlLlVOU1VCU0NSSUJFLG8pO3JldHVybiBpfX0se2tleToiY3JlYXRlTWVzc2FnZVJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoInJlc3BvbnNlIENvZGUgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz1uZXcgZC5SZXNwb25zZU1lc3NhZ2VCb2R5KG51bGwsbnVsbCxudWxsLHQscixuKTtyZXR1cm4gbmV3IHBbImRlZmF1bHQiXShlLmlkLGUudG8sZS5mcm9tLGYuTWVzc2FnZVR5cGUuUkVTUE9OU0Usbyl9fSx7a2V5OiJnZW5lcmF0ZU1lc3NhZ2VSZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2lmKCFlfHwhdCl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UgYW5kIHJlc3BvbnNlIGNvZGUgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbj1lLmJvZHksbz1uLmlkVG9rZW4saT1uLmFjY2Vzc1Rva2VuLHM9bi5yZXNvdXJjZSxhPW5ldyBkLlJlc3BvbnNlTWVzc2FnZUJvZHkobyxpLHMsdCxyKSx1PXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlO3JldHVybiBuZXcgcFsiZGVmYXVsdCJdKHUsZS50byxlLmZyb20sZi5NZXNzYWdlVHlwZS5SRVNQT05TRSxhKX19XSksdH0obFsiZGVmYXVsdCJdKSxiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ModGhpcyxlKX1yZXR1cm4gaShlLFt7a2V5OiJpZE1ha2VyIix2YWx1ZTphLm1hcmsoZnVuY3Rpb24gdCgpe3ZhciBlO3JldHVybiBhLndyYXAoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6ZT0xO2Nhc2UgMTppZighKDFlNT5lKSl7dC5uZXh0PTY7YnJlYWt9cmV0dXJuIHQubmV4dD00LGUrKztjYXNlIDQ6dC5uZXh0PTE7YnJlYWs7Y2FzZSA2OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSx0LHRoaXMpfSl9XSksZX0oKTtyLklkR2VuZXJhdG9yPWIsclsiZGVmYXVsdCJdPWh9LHsiLi4vcmVUSElOS09iamVjdC9SZXRoaW5rT2JqZWN0LmpzIjoxMjcsIi4vTWVzc2FnZS5qcyI6MTI0LCIuL01lc3NhZ2VCb2R5LmpzIjoxMjUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjE1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3LCJiYWJlbC1ydW50aW1lL3JlZ2VuZXJhdG9yIjoyMH1dLDEyNzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBzPWUoInR2NCIpLGE9aShzKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpe28odGhpcyxlKTt0aGlzLnZhbGlkYXRpb249dCx0aGlzLnNjaGVtYT1yfXJldHVybiBuKGUsW3trZXk6InZhbGlkYXRlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zY2hlbWE/YVsiZGVmYXVsdCJdLnZhbGlkYXRlKGUsdGhpcy5zY2hlbWEpOiExfX1dKSxlfSgpO3IuUmV0aGlua09iamVjdD11LHJbImRlZmF1bHQiXT11fSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTcsCnR2NDoxMTV9XSwxMjg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiLi9jYXRhbG9ndWUtZmFjdG9yeS9DYXRhbG9ndWVEYXRhT2JqZWN0RmFjdG9yeSIpLGk9bihvKSxzPWUoIi4vbWVzc2FnZS1mYWN0b3J5L01lc3NhZ2VGYWN0b3J5IiksYT1uKHMpLHU9ZSgiLi9zeW5jaGVyL1N5bmNoZXIiKSxjPW4odSksbD1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdFJlcG9ydGVyIiksZj1uKGwpLHA9ZSgiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciIpLGQ9bihwKSxoPWUoIi4vY2F0YWxvZ3VlLWZhY3RvcnkvSHlwZXJ0eURlc2NyaXB0b3IiKSxiPW4oaCkseT1lKCIuL2NhdGFsb2d1ZS1mYWN0b3J5L1Byb3RvY29sU3R1YkRlc2NyaXB0b3IiKSxfPW4oeSksdj1lKCIuL2NhdGFsb2d1ZS1mYWN0b3J5L1NvdXJjZVBhY2thZ2UiKSxtPW4odik7ci5DYXRhbG9ndWVGYWN0b3J5PWlbImRlZmF1bHQiXSxyLk1lc3NhZ2VGYWN0b3J5PWFbImRlZmF1bHQiXSxyLlN5bmNoZXI9Y1siZGVmYXVsdCJdLHIuRGF0YU9iamVjdFJlcG9ydGVyPWZbImRlZmF1bHQiXSxyLkRhdGFPYmplY3RPYnNlcnZlcj1kWyJkZWZhdWx0Il0sci5IeXBlcnR5RGVzY3JpcHRvcj1iWyJkZWZhdWx0Il0sci5Qcm90b2NvbFN0dWJEZXNjcmlwdG9yPV9bImRlZmF1bHQiXSxyLlNvdXJjZVBhY2thZ2U9bVsiZGVmYXVsdCJdfSx7Ii4vY2F0YWxvZ3VlLWZhY3RvcnkvQ2F0YWxvZ3VlRGF0YU9iamVjdEZhY3RvcnkiOjExNywiLi9jYXRhbG9ndWUtZmFjdG9yeS9IeXBlcnR5RGVzY3JpcHRvciI6MTE5LCIuL2NhdGFsb2d1ZS1mYWN0b3J5L1Byb3RvY29sU3R1YkRlc2NyaXB0b3IiOjEyMiwiLi9jYXRhbG9ndWUtZmFjdG9yeS9Tb3VyY2VQYWNrYWdlIjoxMjMsIi4vbWVzc2FnZS1mYWN0b3J5L01lc3NhZ2VGYWN0b3J5IjoxMjYsIi4vc3luY2hlci9EYXRhT2JqZWN0T2JzZXJ2ZXIiOjEzMSwiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciI6MTMyLCIuL3N5bmNoZXIvU3luY2hlciI6MTM1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTI5OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIilbImRlZmF1bHQiXSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciB1PWUoIi4vU3luY09iamVjdCIpLGM9YSh1KSxsPWUoIi4vRGF0YU9iamVjdENoaWxkIiksZj1hKGwpLHA9ZSgiLi4vdXRpbHMvdXRpbHMuanMiKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixpLHMsYSl7byh0aGlzLGUpO3ZhciB1PXRoaXM7dS5fc3luY2hlcj10LHUuX3VybD1yLHUuX3NjaGVtYT1uLHUuX3N0YXR1cz1pLHUuX3N5bmNPYmo9bmV3IGNbImRlZmF1bHQiXShzKSx1Ll9jaGlsZHJlbnM9YSx1Ll92ZXJzaW9uPTAsdS5fY2hpbGRJZD0wLHUuX2NoaWxkcmVuT2JqZWN0cz17fSx1Ll9jaGlsZHJlbkxpc3RlbmVycz1bXSx1Ll9vd25lcj10Ll9vd25lcix1Ll9idXM9dC5fYnVzfXJldHVybiBuKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcyxyPXQuX3VybCsiL2NoaWxkcmVuLyI7dC5fY2hpbGRyZW5zJiZ0Ll9jaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgbz1yK24saT10Ll9idXMuYWRkTGlzdGVuZXIobyxmdW5jdGlvbihyKXtpZihyLmZyb20hPT1lLl9vd25lcilzd2l0Y2goY29uc29sZS5sb2coIkRhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAiLHIpLHIudHlwZSl7Y2FzZSJjcmVhdGUiOnQuX29uQ2hpbGRyZW5DcmVhdGUocik7YnJlYWs7Y2FzZSJkZWxldGUiOmNvbnNvbGUubG9nKHIpO2JyZWFrO2RlZmF1bHQ6dC5fY2hhbmdlQ2hpbGRyZW4ocil9fSk7dC5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KSxpKGUuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jaGlsZHJlbk9iamVjdHNbdF0uX3JlbGVhc2VMaXN0ZW5lcnMoKX0pfX0se2tleToicGF1c2UiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InJlc3VtZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToic3RvcCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToiYWRkQ2hpbGRyZW4iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyLl9jaGlsZElkKys7dmFyIG49ci5fb3duZXIrIiMiK3IuX2NoaWxkSWQsbz1yLl91cmwrIi9jaGlsZHJlbi8iK2UsaT17dHlwZToiY3JlYXRlIixmcm9tOnIuX293bmVyLHRvOm8sYm9keTp7cmVzb3VyY2U6bix2YWx1ZTp0fX07cmV0dXJuIG5ldyBzKGZ1bmN0aW9uKGUpe3ZhciBzPXIuX2J1cy5wb3N0TWVzc2FnZShpKTtjb25zb2xlLmxvZygiY3JlYXRlLXJlcG9ydGVyLWNoaWxkKCAiK3IuX293bmVyKyIgKTogIixpKTt2YXIgYT1uZXcgZlsiZGVmYXVsdCJdKHIsbix0LHIuX293bmVyLHMpO2Eub25DaGFuZ2UoZnVuY3Rpb24oZSl7ci5fb25DaGFuZ2UoZSx7cGF0aDpvLGNoaWxkSWQ6bn0pfSksci5fY2hpbGRyZW5PYmplY3RzW25dPWEsZShhKX0pfX0se2tleToib25BZGRDaGlsZHJlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkNoaWxkcmVuQ3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlO2NvbnNvbGUubG9nKCJjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICIrdC5fb3duZXIrIiApOiAiLGUpO3ZhciBuPW5ldyBmWyJkZWZhdWx0Il0odCxyLGUuYm9keS52YWx1ZSk7dC5fY2hpbGRyZW5PYmplY3RzW3JdPW4sc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzb3VyY2U6dC5fb3duZXJ9fSl9KTt2YXIgbz17dHlwZTplLnR5cGUsZnJvbTplLmZyb20sdXJsOmUudG8sdmFsdWU6ZS5ib2R5LnZhbHVlLGNoaWxkSWQ6cn07dC5fb25BZGRDaGlsZHJlbkhhbmRsZXImJihjb25zb2xlLmxvZygiQURELUNISUxEUkVOLUVWRU5UOiAiLG8pLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG8pKX19LHtrZXk6Il9vbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rKywib24iPT09ci5fc3RhdHVzKXt2YXIgbj17dHlwZToidXBkYXRlIixmcm9tOnIuX3VybCx0bzpyLl91cmwrIi9jaGFuZ2VzIixib2R5Ont2ZXJzaW9uOnIuX3ZlcnNpb24sc291cmNlOnIuX293bmVyLGF0dHJpYnV0ZTplLmZpZWxkfX07ZS5vVHlwZT09PXUuT2JqZWN0VHlwZS5PQkpFQ1Q/ZS5jVHlwZSE9PXUuQ2hhbmdlVHlwZS5SRU1PVkUmJihuLmJvZHkudmFsdWU9ZS5kYXRhKToobi5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxuLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT11LkNoYW5nZVR5cGUuVVBEQVRFJiYobi5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKG4udG89dC5wYXRoLG4uYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLHIuX2J1cy5wb3N0TWVzc2FnZShuKX19fSx7a2V5OiJfY2hhbmdlT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5fdmVyc2lvbisxPT09dC5ib2R5LnZlcnNpb24pe3IuX3ZlcnNpb24rKzt2YXIgbj10LmJvZHkuYXR0cmlidXRlLG89KDAscC5kZWVwQ2xvbmUpKHQuYm9keS52YWx1ZSksaT1lLmZpbmRCZWZvcmUobik7aWYodC5ib2R5LmF0dHJpYnV0ZVR5cGU9PT11Lk9iamVjdFR5cGUuQVJSQVkpaWYodC5ib2R5Lm9wZXJhdGlvbj09PXUuQ2hhbmdlVHlwZS5BREQpe3ZhciBzPWkub2JqLGE9aS5sYXN0O0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkocyxbYSwwXS5jb25jYXQobykpfWVsc2UgaWYodC5ib2R5Lm9wZXJhdGlvbj09PXUuQ2hhbmdlVHlwZS5SRU1PVkUpe3ZhciBzPWkub2JqLGE9aS5sYXN0O3Muc3BsaWNlKGEsbyl9ZWxzZSBpLm9ialtpLmxhc3RdPW87ZWxzZSB0LmJvZHkudmFsdWU/aS5vYmpbaS5sYXN0XT1vOmRlbGV0ZSBpLm9ialtpLmxhc3RdfWVsc2UgY29uc29sZS5sb2coIlVOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICIrci5fdmVyc2lvbisiLCBtc2cgPT4gIit0LmJvZHkudmVyc2lvbisiKSIpfX0se2tleToiX2NoYW5nZUNoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NvbnNvbGUubG9nKCJDaGFuZ2UgY2hpbGRyZW46ICIsdC5fb3duZXIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlLG49dC5fY2hpbGRyZW5PYmplY3RzW3JdO24/dC5fY2hhbmdlT2JqZWN0KG4uX3N5bmNPYmosZSk6Y29uc29sZS5sb2coIk5vIGNoaWxkcmVuIGZvdW5kIGZvcjogIixyKX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYX19LHtrZXk6InN0YXR1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c319LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fSx7a2V5OiJjaGlsZHJlbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPWQsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTM2LCIuL0RhdGFPYmplY3RDaGlsZCI6MTMwLCIuL1N5bmNPYmplY3QiOjEzNCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSI6OCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxN31dLDEzMDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBzPWUoIi4vU3luY09iamVjdCIpLGE9aShzKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixpLHMpe28odGhpcyxlKTt2YXIgdT10aGlzO3UuX3BhcmVudD10LHUuX2NoaWxkSWQ9cix1Ll9vd25lcj1pLHUuX21zZ0lkPXMsdS5fc3luY09iaj1uZXcgYVsiZGVmYXVsdCJdKG4pLHUuX2J1cz10Ll9idXMsdS5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4gbihlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9vd25lciYmKGUuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9vd25lcixmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6Iix0KSxlLl9vblJlc3BvbnNlKHQpKX0pKX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXImJmUuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZGVsZXRlIGUuX3BhcmVudC5fY2hpbGRyZW5bZS5fY2hpbGRJZF0sZS5fcmVsZWFzZUxpc3RlbmVycygpfX0se2tleToib25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbih0KXtlKHQpfSl9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuYm9keS5zb3VyY2UsY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJnQuX29uUmVzcG9uc2VIYW5kbGVyKHIpfX0se2tleToiY2hpbGRJZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkSWR9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX1dKSxlfSgpO3JbImRlZmF1bHQiXT11LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9TeW5jT2JqZWN0IjoxMzQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMzE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKVsiZGVmYXVsdCJdLHU9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGM9ZSgiLi9EYXRhT2JqZWN0IiksbD11KGMpLGY9ZSgiLi9EYXRhT2JqZWN0Q2hpbGQiKSxwPXUoZiksZD17QU5ZOiJhbnkiLFNUQVJUOiJzdGFydCIsRVhBQ1Q6ImV4YWN0In0saD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLGksdSxjLGwpe3ModGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8saSx1LmRhdGEsYyk7dmFyIGY9dGhpcztmLl92ZXJzaW9uPWwsZi5fZmlsdGVycz17fSxmLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7Zi5fb25GaWx0ZXIoZSl9KSxhKHUuY2hpbGRyZW5zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXUuY2hpbGRyZW5zW2VdO2YuX2NoaWxkcmVuT2JqZWN0c1tlXT1uZXcgcFsiZGVmYXVsdCJdKGYsZSx0KX0pLGYuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuIG8odCxlKSxpKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXtuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX2NoYW5nZUxpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwrIi9jaGFuZ2VzIixmdW5jdGlvbih0KXsidXBkYXRlIj09PXQudHlwZSYmKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0T2JzZXJ2ZXItIitlLl91cmwrIi1SQ1Y6ICIsdCksZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCkpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXtuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX29ic2VydmVyc1tlLl91cmxdfX0se2tleToidW5zdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLG49e3R5cGU6ZC5FWEFDVCxjYWxsYmFjazp0fSxvPWUuaW5kZXhPZigiKiIpO289PT1lLmxlbmd0aC0xJiYoMD09PW8/bi50eXBlPWQuQU5ZOihuLnR5cGU9ZC5TVEFSVCxyPWUuc3Vic3RyKDAsZS5sZW5ndGgtMSkpKSx0aGlzLl9maWx0ZXJzW3JdPW59fSx7a2V5OiJfb25GaWx0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7YSh0Ll9maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX2ZpbHRlcnNbcl07bi50eXBlPT09ZC5BTlk/bi5jYWxsYmFjayhlKTpuLnR5cGU9PT1kLlNUQVJUPzA9PT1lLmZpZWxkLmluZGV4T2YocikmJm4uY2FsbGJhY2soZSk6bi50eXBlPT09ZC5FWEFDVCYmZS5maWVsZD09PXImJm4uY2FsbGJhY2soZSl9KX19XSksdH0obFsiZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09aCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdCI6MTI5LCIuL0RhdGFPYmplY3RDaGlsZCI6MTMwLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjE1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTMyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIilbImRlZmF1bHQiXSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBjPWUoIi4vRGF0YU9iamVjdCIpLGw9dShjKSxmPWUoIi4uL3V0aWxzL3V0aWxzLmpzIikscD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLGksYSx1KXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLGksYSx1KTt2YXIgYz10aGlzO2MuX3N1YnNjcmlwdGlvbnM9e30sYy5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItIityKyItU0VORDogIixlKSxjLl9vbkNoYW5nZShlKX0pLGMuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuIG8odCxlKSxpKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXtuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX3Jlc3BvbnNlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCxmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZlLl9vblJlc3BvbnNlKHQpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXtuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fcmVzcG9uc2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6ImRlbGV0ZSIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RSZXBvcnRlci1ERUxFVEU6ICIsdCksMjAwPT09dC5ib2R5LmNvZGUmJihlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX3JlcG9ydGVyc1tlLl91cmxdKX0pfX0se2tleToib25TdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcj1lfX0se2tleToib25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAiLGUpLGUuYm9keS50eXBlKXtjYXNlInN1YnNjcmliZSI6dC5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6dC5fb25VblN1YnNjcmliZShlKX19fSx7a2V5OiJfb25TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXt0eXBlOmUuYm9keS50eXBlLHVybDpyLGFjY2VwdDpmdW5jdGlvbigpe3ZhciBuPXt1cmw6cixzdGF0dXM6Im9uIn07dC5fc3Vic2NyaXB0aW9uc1tyXT1uO3ZhciBvPXt9O3JldHVybiBhKHQuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10Ll9jaGlsZHJlbk9iamVjdHNbZV0uZGF0YTtvW2VdPSgwLGYuZGVlcENsb25lKShyKX0pLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzY2hlbWE6dC5fc2NoZW1hLHZlcnNpb246dC5fdmVyc2lvbix2YWx1ZTp7ZGF0YTooMCxmLmRlZXBDbG9uZSkodC5kYXRhKSxjaGlsZHJlbnM6b319fSksbn0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMyxkZXNjOnJ9fSl9fTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiU1VCU0NSSVBUSU9OLUVWRU5UOiAiLG4pLHQuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihuKSl9fSx7a2V5OiJfb25VblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5mcm9tLG49dC5fc3Vic2NyaXB0aW9uc1tyXTtkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1tyXTt2YXIgbz17dHlwZTplLmJvZHkudHlwZSx1cmw6cixvYmplY3Q6bn07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlVOLVNVQlNDUklQVElPTi1FVkVOVDogIixvKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobykpfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxjb2RlOmUuYm9keS5jb2RlfTt0Ll9vblJlc3BvbnNlSGFuZGxlciYmKGNvbnNvbGUubG9nKCJSRVNQT05TRS1FVkVOVDogIixyKSx0Ll9vblJlc3BvbnNlSGFuZGxlcihyKSl9fSx7a2V5OiJzdWJzY3JpcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uc319XSksdH0obFsiZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09cCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMzYsIi4vRGF0YU9iamVjdCI6MTI5LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjE1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTMzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4saSl7byh0aGlzLGUpO3ZhciBzPXRoaXM7cy5fb3duZXI9dCxzLl91cmw9cixzLl9idXM9bixzLl9jaGlsZHJlbj1pLHMuX2NoYW5nZXM9W10scy5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4gbihlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhUHJvdmlzaW9uYWwtIitlLl91cmwrIi1SQ1Y6ICIsdCksZS5fY2hhbmdlcy5wdXNoKHQpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiYXBwbHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpfSl9fSx7a2V5OiJjaGlsZHJlbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVufX1dKSxlfSgpO3JbImRlZmF1bHQiXT1pLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxM31dLDEzNDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBzPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpO3ZhciByPXRoaXM7ci5fb2JzZXJ2ZXJzPVtdLHIuX2ZpbHRlcnM9e30sdD9yLl9kYXRhPSgwLHMuZGVlcENsb25lKSh0KTpyLl9kYXRhPXt9LHIuX2ludGVybmFsT2JzZXJ2ZShuZXcgdSxyLl9kYXRhKX1yZXR1cm4gbihlLFt7a2V5OiJvYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vYnNlcnZlcnMucHVzaChlKX19LHtrZXk6ImZpbmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoIi4iKTtyZXR1cm4gdGhpcy5fZmluZFdpdGhTcGxpdCh0KX19LHtrZXk6ImZpbmRCZWZvcmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXt9LHI9ZS5zcGxpdCgiLiIpO3JldHVybiB0Lmxhc3Q9ci5wb3AoKSx0Lm9iaj10aGlzLl9maW5kV2l0aFNwbGl0KHIpLHR9fSx7a2V5OiJfZmluZFdpdGhTcGxpdCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Q9dFtlXX0pLHR9fSx7a2V5OiJfZmlyZUV2ZW50Iix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt0KGUpfSl9fSx7a2V5OiJfaXNPYnNlcnZhYmxlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb25zdHJ1Y3Rvcj09PU9iamVjdHx8ZS5jb25zdHJ1Y3Rvcj09PUFycmF5fX0se2tleToiX2ludGVybmFsT2JzZXJ2ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX2lzT2JzZXJ2YWJsZSh0KSl7dmFyIG49ZnVuY3Rpb24odCl7ci5fb25DaGFuZ2VzKGUsdCl9O2lmKHQuY29uc3RydWN0b3I9PT1PYmplY3Qpe09iamVjdC5vYnNlcnZlKHQsbik7Zm9yKHZhciBvIGluIHQpci5faXNPYnNlcnZhYmxlKHRbb10pJiZyLl9pbnRlcm5hbE9ic2VydmUoZVsibmV3Il0obyksdFtvXSl9ZWxzZSBpZih0LmNvbnN0cnVjdG9yPT09QXJyYXkpe0FycmF5Lm9ic2VydmUodCxuKTtmb3IodmFyIG8gaW4gdClpZihyLl9pc09ic2VydmFibGUodFtvXSkpe3ZhciBpPWVbIm5ldyJdKG5ldyBjKHRbb10sbykpO3IuX2ludGVybmFsT2JzZXJ2ZShpLHRbb10pfX19fX0se2tleToiX29uQ2hhbmdlcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2Zvcih2YXIgbiBpbiB0KXt2YXIgbz10W25dLm9iamVjdCxpPXZvaWQgMDtpZihvLmNvbnN0cnVjdG9yPT09T2JqZWN0JiYoaT1mLk9CSkVDVCksby5jb25zdHJ1Y3Rvcj09PUFycmF5JiYoaT1mLkFSUkFZKSwic3BsaWNlIj09PXRbbl0udHlwZSkhZnVuY3Rpb24oKXt2YXIgYT10W25dLmluZGV4LHU9ZVsibmV3Il0oIiIrYSksZj11LnRvU3RyaW5nKCkscD10W25dLnJlbW92ZWQubGVuZ3RoO2lmKDAhPT1wKXt2YXIgZD10W25dLnJlbW92ZWQ7ZC5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7ci5faXNPYnNlcnZhYmxlKHQpJiZlLnJlbW92ZUluZGV4KGErbil9KSxyLl9maXJlRXZlbnQoe2NUeXBlOmwuUkVNT1ZFLG9UeXBlOmksZmllbGQ6ZixkYXRhOnB9KX12YXIgaD10W25dLmFkZGVkQ291bnQ7aWYoMCE9PWgpe3ZhciBiPW8uc2xpY2UoYSxhK2gpO2IuZm9yRWFjaChmdW5jdGlvbih0LG4pe2lmKHIuX2lzT2JzZXJ2YWJsZSh0KSl7dmFyIG89ZVsibmV3Il0obmV3IGModCxhK24pKTtyLl9pbnRlcm5hbE9ic2VydmUobyx0KX19KSxyLl9maXJlRXZlbnQoe2NUeXBlOmwuQURELG9UeXBlOmksZmllbGQ6ZixkYXRhOigwLHMuZGVlcENsb25lKShiKX0pfWEhPT1vLmxlbmd0aC0xJiZlLnJlSW5kZXhGcm9tKG8pfSgpO2Vsc2V7dmFyIGE9ZVsibmV3Il0odFtuXS5uYW1lKSx1PWEudG9TdHJpbmcoKTtpZigtMSE9PXUuaW5kZXhPZigiU3ltYm9sIikpY29udGludWU7dmFyIHA9b1t0W25dLm5hbWVdOyJ1cGRhdGUiPT09dFtuXS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmwuVVBEQVRFLG9UeXBlOmksZmllbGQ6dSxkYXRhOigwLHMuZGVlcENsb25lKShwKX0pLCJhZGQiPT09dFtuXS50eXBlJiYodGhpcy5faW50ZXJuYWxPYnNlcnZlKGEscCksdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpsLkFERCxvVHlwZTppLGZpZWxkOnUsZGF0YTooMCxzLmRlZXBDbG9uZSkocCl9KSksImRlbGV0ZSI9PT10W25dLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6bC5SRU1PVkUsb1R5cGU6aSxmaWVsZDp1fSl9fX19LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhfX1dKSxlfSgpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpLHRoaXMuX3BhdGg9W10sdGhpcy5fb2JzZXJ2YWJsZXM9e319cmV0dXJuIG4oZSxbe2tleToicmVtb3ZlSW5kZXgiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9vYnNlcnZhYmxlc1tlXX19LHtrZXk6InJlSW5kZXhGcm9tIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2kodGhpcy5fb2JzZXJ2YWJsZXMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fb2JzZXJ2YWJsZXNbcl0sbz1lLmluZGV4T2Yobi5vYmopO24uaWR4IT1vJiYobi5pZHg9byxkZWxldGUgdC5fb2JzZXJ2YWJsZXNbcl0sdC5fb2JzZXJ2YWJsZXNbb109bil9KX19LHtrZXk6Im5ldyIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5jb25zdHJ1Y3Rvcj09YyYmKHRoaXMuX29ic2VydmFibGVzW2UuaWR4XT1lKTt2YXIgdD10aGlzLmNsb25lKCk7cmV0dXJuIHQuX3BhdGgucHVzaChlKSx0fX0se2tleToiY2xvbmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9wYXRoLnB1c2goZSl9KSx0fX0se2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IiI7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbih0LHIpezA9PT1yP2U9dC50b1N0cmluZygpOmUrPSIuIit0LnRvU3RyaW5nKCl9KSxlfX1dKSxlfSgpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7byh0aGlzLGUpLHRoaXMub2JqPXQsdGhpcy5pZHg9cn1yZXR1cm4gbihlLFt7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZHgudG9TdHJpbmcoKX19XSksZX0oKSxsPXtVUERBVEU6InVwZGF0ZSIsQUREOiJhZGQiLFJFTU9WRToicmVtb3ZlIn07ci5DaGFuZ2VUeXBlPWw7dmFyIGY9e09CSkVDVDoib2JqZWN0IixBUlJBWToiYXJyYXkifTtyLk9iamVjdFR5cGU9ZixyWyJkZWZhdWx0Il09YX0seyIuLi91dGlscy91dGlscy5qcyI6MTM2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTN9XSwxMzU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYT1lKCIuL0RhdGFPYmplY3RSZXBvcnRlciIpLHU9cyhhKSxjPWUoIi4vRGF0YU9iamVjdE9ic2VydmVyIiksbD1zKGMpLGY9ZSgiLi9EYXRhUHJvdmlzaW9uYWwiKSxwPXMoZiksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4pe28odGhpcyxlKTt2YXIgaT10aGlzO2kuX293bmVyPXQsaS5fYnVzPXIsaS5fc3ViVVJMPW4ucnVudGltZVVSTCsiL3NtIixpLl9yZXBvcnRlcnM9e30saS5fb2JzZXJ2ZXJzPXt9LGkuX3Byb3Zpc2lvbmFscz17fSxyLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24oZSl7aWYoZS5mcm9tIT09dClzd2l0Y2goY29uc29sZS5sb2coIlN5bmNoZXItUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJmb3J3YXJkIjppLl9vbkZvcndhcmQoZSk7YnJlYWs7Y2FzZSJjcmVhdGUiOmkuX29uUmVtb3RlQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjppLl9vblJlbW90ZURlbGV0ZShlKX19KX1yZXR1cm4gbihlLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLG89e3R5cGU6ImNyZWF0ZSIsZnJvbTpuLl9vd25lcix0bzpuLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUsdmFsdWU6cixhdXRob3Jpc2U6dH19O3JldHVybiBuZXcgaShmdW5jdGlvbih0LGkpe24uX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKG8pe2lmKGNvbnNvbGUubG9nKCJjcmVhdGUtcmVzcG9uc2U6ICIsbyksMjAwPT09by5ib2R5LmNvZGUpe3ZhciBzPW8uYm9keS5yZXNvdXJjZSxhPW5ldyB1WyJkZWZhdWx0Il0obixzLGUsIm9uIixyLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyk7bi5fcmVwb3J0ZXJzW3NdPWEsdChhKX1lbHNlIGkoby5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e3R5cGU6InN1YnNjcmliZSIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUscmVzb3VyY2U6dH19O3JldHVybiBuZXcgaShmdW5jdGlvbihvLGkpe3IuX2J1cy5wb3N0TWVzc2FnZShuLGZ1bmN0aW9uKG4pe2NvbnNvbGUubG9nKCJzdWJzY3JpYmUtcmVzcG9uc2U6ICIsbik7dmFyIHM9ci5fcHJvdmlzaW9uYWxzW3RdO2lmKGRlbGV0ZSByLl9wcm92aXNpb25hbHNbdF0scyYmcy5fcmVsZWFzZUxpc3RlbmVycygpLG4uYm9keS5jb2RlPDIwMClzPW5ldyBwWyJkZWZhdWx0Il0oci5fb3duZXIsdCxyLl9idXMsbi5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKSxyLl9wcm92aXNpb25hbHNbdF09cztlbHNlIGlmKDIwMD09PW4uYm9keS5jb2RlKXt2YXIgYT1uZXcgbFsiZGVmYXVsdCJdKHIsdCxlLCJvbiIsbi5ib2R5LnZhbHVlLHMuY2hpbGRyZW4sbi5ib2R5LnZlcnNpb24pO3IuX29ic2VydmVyc1t0XT1hLG8oYSkscy5hcHBseShhKX1lbHNlIGkobi5ib2R5LmRlc2MpfSl9KX19LHtrZXk6Im9uTm90aWZpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10Ll9yZXBvcnRlcnNbZS5ib2R5LnRvXTtyLl9vbkZvcndhcmQoZSl9fSx7a2V5OiJfb25SZW1vdGVDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20uc2xpY2UoMCwtMTMpLG49e3R5cGU6ZS50eXBlLGZyb206ZS5ib2R5LnNvdXJjZSx1cmw6cixzY2hlbWE6ZS5ib2R5LnNjaGVtYSx2YWx1ZTplLmJvZHkudmFsdWUsaWRlbnRpdHk6ZS5ib2R5LmlkVG9rZW4sYWNrOmZ1bmN0aW9uKHIpe3ZhciBuPTIwMDtyJiYobj1yKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpufX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixuKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uUmVtb3RlRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fb2JzZXJ2ZXJzW3JdO2lmKG4pe3ZhciBvPXt0eXBlOmUudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRUb2tlbixhY2s6ZnVuY3Rpb24ocil7dmFyIG89MjAwO3ImJihvPXIpLDIwMD09PW8mJm5bImRlbGV0ZSJdKCksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6byxzb3VyY2U6dC5fb3duZXJ9fSl9fTt0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiTk9USUZJQ0FUSU9OLUVWRU5UOiAiLG8pLHQuX29uTm90aWZpY2F0aW9uSGFuZGxlcihvKSl9ZWxzZSB0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDQsc291cmNlOnQuX293bmVyfX0pfX0se2tleToib3duZXIiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vd25lcn19LHtrZXk6InJlcG9ydGVycyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcG9ydGVyc319LHtrZXk6Im9ic2VydmVycyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29ic2VydmVyc319XSksZX0oKTtyWyJkZWZhdWx0Il09ZCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdE9ic2VydmVyIjoxMzEsIi4vRGF0YU9iamVjdFJlcG9ydGVyIjoxMzIsIi4vRGF0YVByb3Zpc2lvbmFsIjoxMzMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo4LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTM2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTp2b2lkIDB9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuZGl2aWRlVVJMPW4sci5kZWVwQ2xvbmU9b30se31dfSx7fSxbMTI4XSkoMTI4KX0pOwp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sMTYxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBwcm90b3R5cGUgY2xhc3MgZm9yIGhhc2ggZnVuY3Rpb25zCmZ1bmN0aW9uIEhhc2ggKGJsb2NrU2l6ZSwgZmluYWxTaXplKSB7CiAgdGhpcy5fYmxvY2sgPSBuZXcgQnVmZmVyKGJsb2NrU2l6ZSkKICB0aGlzLl9maW5hbFNpemUgPSBmaW5hbFNpemUKICB0aGlzLl9ibG9ja1NpemUgPSBibG9ja1NpemUKICB0aGlzLl9sZW4gPSAwCiAgdGhpcy5fcyA9IDAKfQoKSGFzaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRhdGEsIGVuYykgewogIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgIGVuYyA9IGVuYyB8fCAndXRmOCcKICAgIGRhdGEgPSBuZXcgQnVmZmVyKGRhdGEsIGVuYykKICB9CgogIHZhciBsID0gdGhpcy5fbGVuICs9IGRhdGEubGVuZ3RoCiAgdmFyIHMgPSB0aGlzLl9zIHx8IDAKICB2YXIgZiA9IDAKICB2YXIgYnVmZmVyID0gdGhpcy5fYmxvY2sKCiAgd2hpbGUgKHMgPCBsKSB7CiAgICB2YXIgdCA9IE1hdGgubWluKGRhdGEubGVuZ3RoLCBmICsgdGhpcy5fYmxvY2tTaXplIC0gKHMgJSB0aGlzLl9ibG9ja1NpemUpKQogICAgdmFyIGNoID0gKHQgLSBmKQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2g7IGkrKykgewogICAgICBidWZmZXJbKHMgJSB0aGlzLl9ibG9ja1NpemUpICsgaV0gPSBkYXRhW2kgKyBmXQogICAgfQoKICAgIHMgKz0gY2gKICAgIGYgKz0gY2gKCiAgICBpZiAoKHMgJSB0aGlzLl9ibG9ja1NpemUpID09PSAwKSB7CiAgICAgIHRoaXMuX3VwZGF0ZShidWZmZXIpCiAgICB9CiAgfQogIHRoaXMuX3MgPSBzCgogIHJldHVybiB0aGlzCn0KCkhhc2gucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uIChlbmMpIHsKICAvLyBTdXBwb3NlIHRoZSBsZW5ndGggb2YgdGhlIG1lc3NhZ2UgTSwgaW4gYml0cywgaXMgbAogIHZhciBsID0gdGhpcy5fbGVuICogOAoKICAvLyBBcHBlbmQgdGhlIGJpdCAxIHRvIHRoZSBlbmQgb2YgdGhlIG1lc3NhZ2UKICB0aGlzLl9ibG9ja1t0aGlzLl9sZW4gJSB0aGlzLl9ibG9ja1NpemVdID0gMHg4MAoKICAvLyBhbmQgdGhlbiBrIHplcm8gYml0cywgd2hlcmUgayBpcyB0aGUgc21hbGxlc3Qgbm9uLW5lZ2F0aXZlIHNvbHV0aW9uIHRvIHRoZSBlcXVhdGlvbiAobCArIDEgKyBrKSA9PT0gZmluYWxTaXplIG1vZCBibG9ja1NpemUKICB0aGlzLl9ibG9jay5maWxsKDAsIHRoaXMuX2xlbiAlIHRoaXMuX2Jsb2NrU2l6ZSArIDEpCgogIGlmIChsICUgKHRoaXMuX2Jsb2NrU2l6ZSAqIDgpID49IHRoaXMuX2ZpbmFsU2l6ZSAqIDgpIHsKICAgIHRoaXMuX3VwZGF0ZSh0aGlzLl9ibG9jaykKICAgIHRoaXMuX2Jsb2NrLmZpbGwoMCkKICB9CgogIC8vIHRvIHRoaXMgYXBwZW5kIHRoZSBibG9jayB3aGljaCBpcyBlcXVhbCB0byB0aGUgbnVtYmVyIGwgd3JpdHRlbiBpbiBiaW5hcnkKICAvLyBUT0RPOiBoYW5kbGUgY2FzZSB3aGVyZSBsIGlzID4gTWF0aC5wb3coMiwgMjkpCiAgdGhpcy5fYmxvY2sud3JpdGVJbnQzMkJFKGwsIHRoaXMuX2Jsb2NrU2l6ZSAtIDQpCgogIHZhciBoYXNoID0gdGhpcy5fdXBkYXRlKHRoaXMuX2Jsb2NrKSB8fCB0aGlzLl9oYXNoKCkKCiAgcmV0dXJuIGVuYyA/IGhhc2gudG9TdHJpbmcoZW5jKSA6IGhhc2gKfQoKSGFzaC5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ191cGRhdGUgbXVzdCBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzcycpCn0KCm1vZHVsZS5leHBvcnRzID0gSGFzaAoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzB9XSwxNjI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gU0hBIChhbGdvcml0aG0pIHsKICBhbGdvcml0aG0gPSBhbGdvcml0aG0udG9Mb3dlckNhc2UoKQoKICB2YXIgQWxnb3JpdGhtID0gZXhwb3J0c1thbGdvcml0aG1dCiAgaWYgKCFBbGdvcml0aG0pIHRocm93IG5ldyBFcnJvcihhbGdvcml0aG0gKyAnIGlzIG5vdCBzdXBwb3J0ZWQgKHdlIGFjY2VwdCBwdWxsIHJlcXVlc3RzKScpCgogIHJldHVybiBuZXcgQWxnb3JpdGhtKCkKfQoKZXhwb3J0cy5zaGEgPSByZXF1aXJlKCcuL3NoYScpCmV4cG9ydHMuc2hhMSA9IHJlcXVpcmUoJy4vc2hhMScpCmV4cG9ydHMuc2hhMjI0ID0gcmVxdWlyZSgnLi9zaGEyMjQnKQpleHBvcnRzLnNoYTI1NiA9IHJlcXVpcmUoJy4vc2hhMjU2JykKZXhwb3J0cy5zaGEzODQgPSByZXF1aXJlKCcuL3NoYTM4NCcpCmV4cG9ydHMuc2hhNTEyID0gcmVxdWlyZSgnLi9zaGE1MTInKQoKfSx7Ii4vc2hhIjoxNjMsIi4vc2hhMSI6MTY0LCIuL3NoYTIyNCI6MTY1LCIuL3NoYTI1NiI6MTY2LCIuL3NoYTM4NCI6MTY3LCIuL3NoYTUxMiI6MTY4fV0sMTYzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKgogKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNlY3VyZSBIYXNoIEFsZ29yaXRobSwgU0hBLTAsIGFzIGRlZmluZWQKICogaW4gRklQUyBQVUIgMTgwLTEKICogVGhpcyBzb3VyY2UgY29kZSBpcyBkZXJpdmVkIGZyb20gc2hhMS5qcyBvZiB0aGUgc2FtZSByZXBvc2l0b3J5LgogKiBUaGUgZGlmZmVyZW5jZSBiZXR3ZWVuIFNIQS0wIGFuZCBTSEEtMSBpcyBqdXN0IGEgYml0d2lzZSByb3RhdGUgbGVmdAogKiBvcGVyYXRpb24gd2FzIGFkZGVkLgogKi8KCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIEsgPSBbCiAgMHg1YTgyNzk5OSwgMHg2ZWQ5ZWJhMSwgMHg4ZjFiYmNkYyB8IDAsIDB4Y2E2MmMxZDYgfCAwCl0KCnZhciBXID0gbmV3IEFycmF5KDgwKQoKZnVuY3Rpb24gU2hhICgpIHsKICB0aGlzLmluaXQoKQogIHRoaXMuX3cgPSBXCgogIEhhc2guY2FsbCh0aGlzLCA2NCwgNTYpCn0KCmluaGVyaXRzKFNoYSwgSGFzaCkKClNoYS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLl9hID0gMHg2NzQ1MjMwMQogIHRoaXMuX2IgPSAweGVmY2RhYjg5CiAgdGhpcy5fYyA9IDB4OThiYWRjZmUKICB0aGlzLl9kID0gMHgxMDMyNTQ3NgogIHRoaXMuX2UgPSAweGMzZDJlMWYwCgogIHJldHVybiB0aGlzCn0KCmZ1bmN0aW9uIHJvdGw1IChudW0pIHsKICByZXR1cm4gKG51bSA8PCA1KSB8IChudW0gPj4+IDI3KQp9CgpmdW5jdGlvbiByb3RsMzAgKG51bSkgewogIHJldHVybiAobnVtIDw8IDMwKSB8IChudW0gPj4+IDIpCn0KCmZ1bmN0aW9uIGZ0IChzLCBiLCBjLCBkKSB7CiAgaWYgKHMgPT09IDApIHJldHVybiAoYiAmIGMpIHwgKCh+YikgJiBkKQogIGlmIChzID09PSAyKSByZXR1cm4gKGIgJiBjKSB8IChiICYgZCkgfCAoYyAmIGQpCiAgcmV0dXJuIGIgXiBjIF4gZAp9CgpTaGEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoTSkgewogIHZhciBXID0gdGhpcy5fdwoKICB2YXIgYSA9IHRoaXMuX2EgfCAwCiAgdmFyIGIgPSB0aGlzLl9iIHwgMAogIHZhciBjID0gdGhpcy5fYyB8IDAKICB2YXIgZCA9IHRoaXMuX2QgfCAwCiAgdmFyIGUgPSB0aGlzLl9lIHwgMAoKICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIFdbaV0gPSBNLnJlYWRJbnQzMkJFKGkgKiA0KQogIGZvciAoOyBpIDwgODA7ICsraSkgV1tpXSA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl0KCiAgZm9yICh2YXIgaiA9IDA7IGogPCA4MDsgKytqKSB7CiAgICB2YXIgcyA9IH5+KGogLyAyMCkKICAgIHZhciB0ID0gKHJvdGw1KGEpICsgZnQocywgYiwgYywgZCkgKyBlICsgV1tqXSArIEtbc10pIHwgMAoKICAgIGUgPSBkCiAgICBkID0gYwogICAgYyA9IHJvdGwzMChiKQogICAgYiA9IGEKICAgIGEgPSB0CiAgfQoKICB0aGlzLl9hID0gKGEgKyB0aGlzLl9hKSB8IDAKICB0aGlzLl9iID0gKGIgKyB0aGlzLl9iKSB8IDAKICB0aGlzLl9jID0gKGMgKyB0aGlzLl9jKSB8IDAKICB0aGlzLl9kID0gKGQgKyB0aGlzLl9kKSB8IDAKICB0aGlzLl9lID0gKGUgKyB0aGlzLl9lKSB8IDAKfQoKU2hhLnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgSCA9IG5ldyBCdWZmZXIoMjApCgogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2EgfCAwLCAwKQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2IgfCAwLCA0KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2MgfCAwLCA4KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2QgfCAwLCAxMikKICBILndyaXRlSW50MzJCRSh0aGlzLl9lIHwgMCwgMTYpCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjoxNjEsImJ1ZmZlciI6NzAsImluaGVyaXRzIjoxMjh9XSwxNjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8qCiAqIEEgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgU2VjdXJlIEhhc2ggQWxnb3JpdGhtLCBTSEEtMSwgYXMgZGVmaW5lZAogKiBpbiBGSVBTIFBVQiAxODAtMQogKiBWZXJzaW9uIDIuMWEgQ29weXJpZ2h0IFBhdWwgSm9obnN0b24gMjAwMCAtIDIwMDIuCiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXQKICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlCiAqIFNlZSBodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1IGZvciBkZXRhaWxzLgogKi8KCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIEsgPSBbCiAgMHg1YTgyNzk5OSwgMHg2ZWQ5ZWJhMSwgMHg4ZjFiYmNkYyB8IDAsIDB4Y2E2MmMxZDYgfCAwCl0KCnZhciBXID0gbmV3IEFycmF5KDgwKQoKZnVuY3Rpb24gU2hhMSAoKSB7CiAgdGhpcy5pbml0KCkKICB0aGlzLl93ID0gVwoKICBIYXNoLmNhbGwodGhpcywgNjQsIDU2KQp9Cgppbmhlcml0cyhTaGExLCBIYXNoKQoKU2hhMS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLl9hID0gMHg2NzQ1MjMwMQogIHRoaXMuX2IgPSAweGVmY2RhYjg5CiAgdGhpcy5fYyA9IDB4OThiYWRjZmUKICB0aGlzLl9kID0gMHgxMDMyNTQ3NgogIHRoaXMuX2UgPSAweGMzZDJlMWYwCgogIHJldHVybiB0aGlzCn0KCmZ1bmN0aW9uIHJvdGwxIChudW0pIHsKICByZXR1cm4gKG51bSA8PCAxKSB8IChudW0gPj4+IDMxKQp9CgpmdW5jdGlvbiByb3RsNSAobnVtKSB7CiAgcmV0dXJuIChudW0gPDwgNSkgfCAobnVtID4+PiAyNykKfQoKZnVuY3Rpb24gcm90bDMwIChudW0pIHsKICByZXR1cm4gKG51bSA8PCAzMCkgfCAobnVtID4+PiAyKQp9CgpmdW5jdGlvbiBmdCAocywgYiwgYywgZCkgewogIGlmIChzID09PSAwKSByZXR1cm4gKGIgJiBjKSB8ICgofmIpICYgZCkKICBpZiAocyA9PT0gMikgcmV0dXJuIChiICYgYykgfCAoYiAmIGQpIHwgKGMgJiBkKQogIHJldHVybiBiIF4gYyBeIGQKfQoKU2hhMS5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChNKSB7CiAgdmFyIFcgPSB0aGlzLl93CgogIHZhciBhID0gdGhpcy5fYSB8IDAKICB2YXIgYiA9IHRoaXMuX2IgfCAwCiAgdmFyIGMgPSB0aGlzLl9jIHwgMAogIHZhciBkID0gdGhpcy5fZCB8IDAKICB2YXIgZSA9IHRoaXMuX2UgfCAwCgogIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkgV1tpXSA9IE0ucmVhZEludDMyQkUoaSAqIDQpCiAgZm9yICg7IGkgPCA4MDsgKytpKSBXW2ldID0gcm90bDEoV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XSkKCiAgZm9yICh2YXIgaiA9IDA7IGogPCA4MDsgKytqKSB7CiAgICB2YXIgcyA9IH5+KGogLyAyMCkKICAgIHZhciB0ID0gKHJvdGw1KGEpICsgZnQocywgYiwgYywgZCkgKyBlICsgV1tqXSArIEtbc10pIHwgMAoKICAgIGUgPSBkCiAgICBkID0gYwogICAgYyA9IHJvdGwzMChiKQogICAgYiA9IGEKICAgIGEgPSB0CiAgfQoKICB0aGlzLl9hID0gKGEgKyB0aGlzLl9hKSB8IDAKICB0aGlzLl9iID0gKGIgKyB0aGlzLl9iKSB8IDAKICB0aGlzLl9jID0gKGMgKyB0aGlzLl9jKSB8IDAKICB0aGlzLl9kID0gKGQgKyB0aGlzLl9kKSB8IDAKICB0aGlzLl9lID0gKGUgKyB0aGlzLl9lKSB8IDAKfQoKU2hhMS5wcm90b3R5cGUuX2hhc2ggPSBmdW5jdGlvbiAoKSB7CiAgdmFyIEggPSBuZXcgQnVmZmVyKDIwKQoKICBILndyaXRlSW50MzJCRSh0aGlzLl9hIHwgMCwgMCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9iIHwgMCwgNCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9jIHwgMCwgOCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9kIHwgMCwgMTIpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZSB8IDAsIDE2KQoKICByZXR1cm4gSAp9Cgptb2R1bGUuZXhwb3J0cyA9IFNoYTEKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2hhc2giOjE2MSwiYnVmZmVyIjo3MCwiaW5oZXJpdHMiOjEyOH1dLDE2NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLyoqCiAqIEEgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgU2VjdXJlIEhhc2ggQWxnb3JpdGhtLCBTSEEtMjU2LCBhcyBkZWZpbmVkCiAqIGluIEZJUFMgMTgwLTIKICogVmVyc2lvbiAyLjItYmV0YSBDb3B5cmlnaHQgQW5nZWwgTWFyaW4sIFBhdWwgSm9obnN0b24gMjAwMCAtIDIwMDkuCiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXQKICoKICovCgp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBTaGEyNTYgPSByZXF1aXJlKCcuL3NoYTI1NicpCnZhciBIYXNoID0gcmVxdWlyZSgnLi9oYXNoJykKCnZhciBXID0gbmV3IEFycmF5KDY0KQoKZnVuY3Rpb24gU2hhMjI0ICgpIHsKICB0aGlzLmluaXQoKQoKICB0aGlzLl93ID0gVyAvLyBuZXcgQXJyYXkoNjQpCgogIEhhc2guY2FsbCh0aGlzLCA2NCwgNTYpCn0KCmluaGVyaXRzKFNoYTIyNCwgU2hhMjU2KQoKU2hhMjI0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2EgPSAweGMxMDU5ZWQ4CiAgdGhpcy5fYiA9IDB4MzY3Y2Q1MDcKICB0aGlzLl9jID0gMHgzMDcwZGQxNwogIHRoaXMuX2QgPSAweGY3MGU1OTM5CiAgdGhpcy5fZSA9IDB4ZmZjMDBiMzEKICB0aGlzLl9mID0gMHg2ODU4MTUxMQogIHRoaXMuX2cgPSAweDY0Zjk4ZmE3CiAgdGhpcy5faCA9IDB4YmVmYTRmYTQKCiAgcmV0dXJuIHRoaXMKfQoKU2hhMjI0LnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgSCA9IG5ldyBCdWZmZXIoMjgpCgogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2EsIDApCiAgSC53cml0ZUludDMyQkUodGhpcy5fYiwgNCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9jLCA4KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2QsIDEyKQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2UsIDE2KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2YsIDIwKQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2csIDI0KQoKICByZXR1cm4gSAp9Cgptb2R1bGUuZXhwb3J0cyA9IFNoYTIyNAoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vaGFzaCI6MTYxLCIuL3NoYTI1NiI6MTY2LCJidWZmZXIiOjcwLCJpbmhlcml0cyI6MTI4fV0sMTY2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKioKICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBTZWN1cmUgSGFzaCBBbGdvcml0aG0sIFNIQS0yNTYsIGFzIGRlZmluZWQKICogaW4gRklQUyAxODAtMgogKiBWZXJzaW9uIDIuMi1iZXRhIENvcHlyaWdodCBBbmdlbCBNYXJpbiwgUGF1bCBKb2huc3RvbiAyMDAwIC0gMjAwOS4KICogT3RoZXIgY29udHJpYnV0b3JzOiBHcmVnIEhvbHQsIEFuZHJldyBLZXBlcnQsIFlkbmFyLCBMb3N0aW5ldAogKgogKi8KCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIEsgPSBbCiAgMHg0MjhBMkY5OCwgMHg3MTM3NDQ5MSwgMHhCNUMwRkJDRiwgMHhFOUI1REJBNSwKICAweDM5NTZDMjVCLCAweDU5RjExMUYxLCAweDkyM0Y4MkE0LCAweEFCMUM1RUQ1LAogIDB4RDgwN0FBOTgsIDB4MTI4MzVCMDEsIDB4MjQzMTg1QkUsIDB4NTUwQzdEQzMsCiAgMHg3MkJFNUQ3NCwgMHg4MERFQjFGRSwgMHg5QkRDMDZBNywgMHhDMTlCRjE3NCwKICAweEU0OUI2OUMxLCAweEVGQkU0Nzg2LCAweDBGQzE5REM2LCAweDI0MENBMUNDLAogIDB4MkRFOTJDNkYsIDB4NEE3NDg0QUEsIDB4NUNCMEE5REMsIDB4NzZGOTg4REEsCiAgMHg5ODNFNTE1MiwgMHhBODMxQzY2RCwgMHhCMDAzMjdDOCwgMHhCRjU5N0ZDNywKICAweEM2RTAwQkYzLCAweEQ1QTc5MTQ3LCAweDA2Q0E2MzUxLCAweDE0MjkyOTY3LAogIDB4MjdCNzBBODUsIDB4MkUxQjIxMzgsIDB4NEQyQzZERkMsIDB4NTMzODBEMTMsCiAgMHg2NTBBNzM1NCwgMHg3NjZBMEFCQiwgMHg4MUMyQzkyRSwgMHg5MjcyMkM4NSwKICAweEEyQkZFOEExLCAweEE4MUE2NjRCLCAweEMyNEI4QjcwLCAweEM3NkM1MUEzLAogIDB4RDE5MkU4MTksIDB4RDY5OTA2MjQsIDB4RjQwRTM1ODUsIDB4MTA2QUEwNzAsCiAgMHgxOUE0QzExNiwgMHgxRTM3NkMwOCwgMHgyNzQ4Nzc0QywgMHgzNEIwQkNCNSwKICAweDM5MUMwQ0IzLCAweDRFRDhBQTRBLCAweDVCOUNDQTRGLCAweDY4MkU2RkYzLAogIDB4NzQ4RjgyRUUsIDB4NzhBNTYzNkYsIDB4ODRDODc4MTQsIDB4OENDNzAyMDgsCiAgMHg5MEJFRkZGQSwgMHhBNDUwNkNFQiwgMHhCRUY5QTNGNywgMHhDNjcxNzhGMgpdCgp2YXIgVyA9IG5ldyBBcnJheSg2NCkKCmZ1bmN0aW9uIFNoYTI1NiAoKSB7CiAgdGhpcy5pbml0KCkKCiAgdGhpcy5fdyA9IFcgLy8gbmV3IEFycmF5KDY0KQoKICBIYXNoLmNhbGwodGhpcywgNjQsIDU2KQp9Cgppbmhlcml0cyhTaGEyNTYsIEhhc2gpCgpTaGEyNTYucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgdGhpcy5fYSA9IDB4NmEwOWU2NjcKICB0aGlzLl9iID0gMHhiYjY3YWU4NQogIHRoaXMuX2MgPSAweDNjNmVmMzcyCiAgdGhpcy5fZCA9IDB4YTU0ZmY1M2EKICB0aGlzLl9lID0gMHg1MTBlNTI3ZgogIHRoaXMuX2YgPSAweDliMDU2ODhjCiAgdGhpcy5fZyA9IDB4MWY4M2Q5YWIKICB0aGlzLl9oID0gMHg1YmUwY2QxOQoKICByZXR1cm4gdGhpcwp9CgpmdW5jdGlvbiBjaCAoeCwgeSwgeikgewogIHJldHVybiB6IF4gKHggJiAoeSBeIHopKQp9CgpmdW5jdGlvbiBtYWogKHgsIHksIHopIHsKICByZXR1cm4gKHggJiB5KSB8ICh6ICYgKHggfCB5KSkKfQoKZnVuY3Rpb24gc2lnbWEwICh4KSB7CiAgcmV0dXJuICh4ID4+PiAyIHwgeCA8PCAzMCkgXiAoeCA+Pj4gMTMgfCB4IDw8IDE5KSBeICh4ID4+PiAyMiB8IHggPDwgMTApCn0KCmZ1bmN0aW9uIHNpZ21hMSAoeCkgewogIHJldHVybiAoeCA+Pj4gNiB8IHggPDwgMjYpIF4gKHggPj4+IDExIHwgeCA8PCAyMSkgXiAoeCA+Pj4gMjUgfCB4IDw8IDcpCn0KCmZ1bmN0aW9uIGdhbW1hMCAoeCkgewogIHJldHVybiAoeCA+Pj4gNyB8IHggPDwgMjUpIF4gKHggPj4+IDE4IHwgeCA8PCAxNCkgXiAoeCA+Pj4gMykKfQoKZnVuY3Rpb24gZ2FtbWExICh4KSB7CiAgcmV0dXJuICh4ID4+PiAxNyB8IHggPDwgMTUpIF4gKHggPj4+IDE5IHwgeCA8PCAxMykgXiAoeCA+Pj4gMTApCn0KClNoYTI1Ni5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChNKSB7CiAgdmFyIFcgPSB0aGlzLl93CgogIHZhciBhID0gdGhpcy5fYSB8IDAKICB2YXIgYiA9IHRoaXMuX2IgfCAwCiAgdmFyIGMgPSB0aGlzLl9jIHwgMAogIHZhciBkID0gdGhpcy5fZCB8IDAKICB2YXIgZSA9IHRoaXMuX2UgfCAwCiAgdmFyIGYgPSB0aGlzLl9mIHwgMAogIHZhciBnID0gdGhpcy5fZyB8IDAKICB2YXIgaCA9IHRoaXMuX2ggfCAwCgogIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkgV1tpXSA9IE0ucmVhZEludDMyQkUoaSAqIDQpCiAgZm9yICg7IGkgPCA2NDsgKytpKSBXW2ldID0gKGdhbW1hMShXW2kgLSAyXSkgKyBXW2kgLSA3XSArIGdhbW1hMChXW2kgLSAxNV0pICsgV1tpIC0gMTZdKSB8IDAKCiAgZm9yICh2YXIgaiA9IDA7IGogPCA2NDsgKytqKSB7CiAgICB2YXIgVDEgPSAoaCArIHNpZ21hMShlKSArIGNoKGUsIGYsIGcpICsgS1tqXSArIFdbal0pIHwgMAogICAgdmFyIFQyID0gKHNpZ21hMChhKSArIG1haihhLCBiLCBjKSkgfCAwCgogICAgaCA9IGcKICAgIGcgPSBmCiAgICBmID0gZQogICAgZSA9IChkICsgVDEpIHwgMAogICAgZCA9IGMKICAgIGMgPSBiCiAgICBiID0gYQogICAgYSA9IChUMSArIFQyKSB8IDAKICB9CgogIHRoaXMuX2EgPSAoYSArIHRoaXMuX2EpIHwgMAogIHRoaXMuX2IgPSAoYiArIHRoaXMuX2IpIHwgMAogIHRoaXMuX2MgPSAoYyArIHRoaXMuX2MpIHwgMAogIHRoaXMuX2QgPSAoZCArIHRoaXMuX2QpIHwgMAogIHRoaXMuX2UgPSAoZSArIHRoaXMuX2UpIHwgMAogIHRoaXMuX2YgPSAoZiArIHRoaXMuX2YpIHwgMAogIHRoaXMuX2cgPSAoZyArIHRoaXMuX2cpIHwgMAogIHRoaXMuX2ggPSAoaCArIHRoaXMuX2gpIHwgMAp9CgpTaGEyNTYucHJvdG90eXBlLl9oYXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBIID0gbmV3IEJ1ZmZlcigzMikKCiAgSC53cml0ZUludDMyQkUodGhpcy5fYSwgMCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9iLCA0KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2MsIDgpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZCwgMTIpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZSwgMTYpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZiwgMjApCiAgSC53cml0ZUludDMyQkUodGhpcy5fZywgMjQpCiAgSC53cml0ZUludDMyQkUodGhpcy5faCwgMjgpCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhMjU2Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjoxNjEsImJ1ZmZlciI6NzAsImluaGVyaXRzIjoxMjh9XSwxNjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIFNIQTUxMiA9IHJlcXVpcmUoJy4vc2hhNTEyJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIFcgPSBuZXcgQXJyYXkoMTYwKQoKZnVuY3Rpb24gU2hhMzg0ICgpIHsKICB0aGlzLmluaXQoKQogIHRoaXMuX3cgPSBXCgogIEhhc2guY2FsbCh0aGlzLCAxMjgsIDExMikKfQoKaW5oZXJpdHMoU2hhMzg0LCBTSEE1MTIpCgpTaGEzODQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgdGhpcy5fYWggPSAweGNiYmI5ZDVkCiAgdGhpcy5fYmggPSAweDYyOWEyOTJhCiAgdGhpcy5fY2ggPSAweDkxNTkwMTVhCiAgdGhpcy5fZGggPSAweDE1MmZlY2Q4CiAgdGhpcy5fZWggPSAweDY3MzMyNjY3CiAgdGhpcy5fZmggPSAweDhlYjQ0YTg3CiAgdGhpcy5fZ2ggPSAweGRiMGMyZTBkCiAgdGhpcy5faGggPSAweDQ3YjU0ODFkCgogIHRoaXMuX2FsID0gMHhjMTA1OWVkOAogIHRoaXMuX2JsID0gMHgzNjdjZDUwNwogIHRoaXMuX2NsID0gMHgzMDcwZGQxNwogIHRoaXMuX2RsID0gMHhmNzBlNTkzOQogIHRoaXMuX2VsID0gMHhmZmMwMGIzMQogIHRoaXMuX2ZsID0gMHg2ODU4MTUxMQogIHRoaXMuX2dsID0gMHg2NGY5OGZhNwogIHRoaXMuX2hsID0gMHhiZWZhNGZhNAoKICByZXR1cm4gdGhpcwp9CgpTaGEzODQucHJvdG90eXBlLl9oYXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBIID0gbmV3IEJ1ZmZlcig0OCkKCiAgZnVuY3Rpb24gd3JpdGVJbnQ2NEJFIChoLCBsLCBvZmZzZXQpIHsKICAgIEgud3JpdGVJbnQzMkJFKGgsIG9mZnNldCkKICAgIEgud3JpdGVJbnQzMkJFKGwsIG9mZnNldCArIDQpCiAgfQoKICB3cml0ZUludDY0QkUodGhpcy5fYWgsIHRoaXMuX2FsLCAwKQogIHdyaXRlSW50NjRCRSh0aGlzLl9iaCwgdGhpcy5fYmwsIDgpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2NoLCB0aGlzLl9jbCwgMTYpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2RoLCB0aGlzLl9kbCwgMjQpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2VoLCB0aGlzLl9lbCwgMzIpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2ZoLCB0aGlzLl9mbCwgNDApCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhMzg0Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjoxNjEsIi4vc2hhNTEyIjoxNjgsImJ1ZmZlciI6NzAsImluaGVyaXRzIjoxMjh9XSwxNjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIEsgPSBbCiAgMHg0MjhhMmY5OCwgMHhkNzI4YWUyMiwgMHg3MTM3NDQ5MSwgMHgyM2VmNjVjZCwKICAweGI1YzBmYmNmLCAweGVjNGQzYjJmLCAweGU5YjVkYmE1LCAweDgxODlkYmJjLAogIDB4Mzk1NmMyNWIsIDB4ZjM0OGI1MzgsIDB4NTlmMTExZjEsIDB4YjYwNWQwMTksCiAgMHg5MjNmODJhNCwgMHhhZjE5NGY5YiwgMHhhYjFjNWVkNSwgMHhkYTZkODExOCwKICAweGQ4MDdhYTk4LCAweGEzMDMwMjQyLCAweDEyODM1YjAxLCAweDQ1NzA2ZmJlLAogIDB4MjQzMTg1YmUsIDB4NGVlNGIyOGMsIDB4NTUwYzdkYzMsIDB4ZDVmZmI0ZTIsCiAgMHg3MmJlNWQ3NCwgMHhmMjdiODk2ZiwgMHg4MGRlYjFmZSwgMHgzYjE2OTZiMSwKICAweDliZGMwNmE3LCAweDI1YzcxMjM1LCAweGMxOWJmMTc0LCAweGNmNjkyNjk0LAogIDB4ZTQ5YjY5YzEsIDB4OWVmMTRhZDIsIDB4ZWZiZTQ3ODYsIDB4Mzg0ZjI1ZTMsCiAgMHgwZmMxOWRjNiwgMHg4YjhjZDViNSwgMHgyNDBjYTFjYywgMHg3N2FjOWM2NSwKICAweDJkZTkyYzZmLCAweDU5MmIwMjc1LCAweDRhNzQ4NGFhLCAweDZlYTZlNDgzLAogIDB4NWNiMGE5ZGMsIDB4YmQ0MWZiZDQsIDB4NzZmOTg4ZGEsIDB4ODMxMTUzYjUsCiAgMHg5ODNlNTE1MiwgMHhlZTY2ZGZhYiwgMHhhODMxYzY2ZCwgMHgyZGI0MzIxMCwKICAweGIwMDMyN2M4LCAweDk4ZmIyMTNmLCAweGJmNTk3ZmM3LCAweGJlZWYwZWU0LAogIDB4YzZlMDBiZjMsIDB4M2RhODhmYzIsIDB4ZDVhNzkxNDcsIDB4OTMwYWE3MjUsCiAgMHgwNmNhNjM1MSwgMHhlMDAzODI2ZiwgMHgxNDI5Mjk2NywgMHgwYTBlNmU3MCwKICAweDI3YjcwYTg1LCAweDQ2ZDIyZmZjLCAweDJlMWIyMTM4LCAweDVjMjZjOTI2LAogIDB4NGQyYzZkZmMsIDB4NWFjNDJhZWQsIDB4NTMzODBkMTMsIDB4OWQ5NWIzZGYsCiAgMHg2NTBhNzM1NCwgMHg4YmFmNjNkZSwgMHg3NjZhMGFiYiwgMHgzYzc3YjJhOCwKICAweDgxYzJjOTJlLCAweDQ3ZWRhZWU2LCAweDkyNzIyYzg1LCAweDE0ODIzNTNiLAogIDB4YTJiZmU4YTEsIDB4NGNmMTAzNjQsIDB4YTgxYTY2NGIsIDB4YmM0MjMwMDEsCiAgMHhjMjRiOGI3MCwgMHhkMGY4OTc5MSwgMHhjNzZjNTFhMywgMHgwNjU0YmUzMCwKICAweGQxOTJlODE5LCAweGQ2ZWY1MjE4LCAweGQ2OTkwNjI0LCAweDU1NjVhOTEwLAogIDB4ZjQwZTM1ODUsIDB4NTc3MTIwMmEsIDB4MTA2YWEwNzAsIDB4MzJiYmQxYjgsCiAgMHgxOWE0YzExNiwgMHhiOGQyZDBjOCwgMHgxZTM3NmMwOCwgMHg1MTQxYWI1MywKICAweDI3NDg3NzRjLCAweGRmOGVlYjk5LCAweDM0YjBiY2I1LCAweGUxOWI0OGE4LAogIDB4MzkxYzBjYjMsIDB4YzVjOTVhNjMsIDB4NGVkOGFhNGEsIDB4ZTM0MThhY2IsCiAgMHg1YjljY2E0ZiwgMHg3NzYzZTM3MywgMHg2ODJlNmZmMywgMHhkNmIyYjhhMywKICAweDc0OGY4MmVlLCAweDVkZWZiMmZjLCAweDc4YTU2MzZmLCAweDQzMTcyZjYwLAogIDB4ODRjODc4MTQsIDB4YTFmMGFiNzIsIDB4OGNjNzAyMDgsIDB4MWE2NDM5ZWMsCiAgMHg5MGJlZmZmYSwgMHgyMzYzMWUyOCwgMHhhNDUwNmNlYiwgMHhkZTgyYmRlOSwKICAweGJlZjlhM2Y3LCAweGIyYzY3OTE1LCAweGM2NzE3OGYyLCAweGUzNzI1MzJiLAogIDB4Y2EyNzNlY2UsIDB4ZWEyNjYxOWMsIDB4ZDE4NmI4YzcsIDB4MjFjMGMyMDcsCiAgMHhlYWRhN2RkNiwgMHhjZGUwZWIxZSwgMHhmNTdkNGY3ZiwgMHhlZTZlZDE3OCwKICAweDA2ZjA2N2FhLCAweDcyMTc2ZmJhLCAweDBhNjM3ZGM1LCAweGEyYzg5OGE2LAogIDB4MTEzZjk4MDQsIDB4YmVmOTBkYWUsIDB4MWI3MTBiMzUsIDB4MTMxYzQ3MWIsCiAgMHgyOGRiNzdmNSwgMHgyMzA0N2Q4NCwgMHgzMmNhYWI3YiwgMHg0MGM3MjQ5MywKICAweDNjOWViZTBhLCAweDE1YzliZWJjLCAweDQzMWQ2N2M0LCAweDljMTAwZDRjLAogIDB4NGNjNWQ0YmUsIDB4Y2IzZTQyYjYsIDB4NTk3ZjI5OWMsIDB4ZmM2NTdlMmEsCiAgMHg1ZmNiNmZhYiwgMHgzYWQ2ZmFlYywgMHg2YzQ0MTk4YywgMHg0YTQ3NTgxNwpdCgp2YXIgVyA9IG5ldyBBcnJheSgxNjApCgpmdW5jdGlvbiBTaGE1MTIgKCkgewogIHRoaXMuaW5pdCgpCiAgdGhpcy5fdyA9IFcKCiAgSGFzaC5jYWxsKHRoaXMsIDEyOCwgMTEyKQp9Cgppbmhlcml0cyhTaGE1MTIsIEhhc2gpCgpTaGE1MTIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgdGhpcy5fYWggPSAweDZhMDllNjY3CiAgdGhpcy5fYmggPSAweGJiNjdhZTg1CiAgdGhpcy5fY2ggPSAweDNjNmVmMzcyCiAgdGhpcy5fZGggPSAweGE1NGZmNTNhCiAgdGhpcy5fZWggPSAweDUxMGU1MjdmCiAgdGhpcy5fZmggPSAweDliMDU2ODhjCiAgdGhpcy5fZ2ggPSAweDFmODNkOWFiCiAgdGhpcy5faGggPSAweDViZTBjZDE5CgogIHRoaXMuX2FsID0gMHhmM2JjYzkwOAogIHRoaXMuX2JsID0gMHg4NGNhYTczYgogIHRoaXMuX2NsID0gMHhmZTk0ZjgyYgogIHRoaXMuX2RsID0gMHg1ZjFkMzZmMQogIHRoaXMuX2VsID0gMHhhZGU2ODJkMQogIHRoaXMuX2ZsID0gMHgyYjNlNmMxZgogIHRoaXMuX2dsID0gMHhmYjQxYmQ2YgogIHRoaXMuX2hsID0gMHgxMzdlMjE3OQoKICByZXR1cm4gdGhpcwp9CgpmdW5jdGlvbiBDaCAoeCwgeSwgeikgewogIHJldHVybiB6IF4gKHggJiAoeSBeIHopKQp9CgpmdW5jdGlvbiBtYWogKHgsIHksIHopIHsKICByZXR1cm4gKHggJiB5KSB8ICh6ICYgKHggfCB5KSkKfQoKZnVuY3Rpb24gc2lnbWEwICh4LCB4bCkgewogIHJldHVybiAoeCA+Pj4gMjggfCB4bCA8PCA0KSBeICh4bCA+Pj4gMiB8IHggPDwgMzApIF4gKHhsID4+PiA3IHwgeCA8PCAyNSkKfQoKZnVuY3Rpb24gc2lnbWExICh4LCB4bCkgewogIHJldHVybiAoeCA+Pj4gMTQgfCB4bCA8PCAxOCkgXiAoeCA+Pj4gMTggfCB4bCA8PCAxNCkgXiAoeGwgPj4+IDkgfCB4IDw8IDIzKQp9CgpmdW5jdGlvbiBHYW1tYTAgKHgsIHhsKSB7CiAgcmV0dXJuICh4ID4+PiAxIHwgeGwgPDwgMzEpIF4gKHggPj4+IDggfCB4bCA8PCAyNCkgXiAoeCA+Pj4gNykKfQoKZnVuY3Rpb24gR2FtbWEwbCAoeCwgeGwpIHsKICByZXR1cm4gKHggPj4+IDEgfCB4bCA8PCAzMSkgXiAoeCA+Pj4gOCB8IHhsIDw8IDI0KSBeICh4ID4+PiA3IHwgeGwgPDwgMjUpCn0KCmZ1bmN0aW9uIEdhbW1hMSAoeCwgeGwpIHsKICByZXR1cm4gKHggPj4+IDE5IHwgeGwgPDwgMTMpIF4gKHhsID4+PiAyOSB8IHggPDwgMykgXiAoeCA+Pj4gNikKfQoKZnVuY3Rpb24gR2FtbWExbCAoeCwgeGwpIHsKICByZXR1cm4gKHggPj4+IDE5IHwgeGwgPDwgMTMpIF4gKHhsID4+PiAyOSB8IHggPDwgMykgXiAoeCA+Pj4gNiB8IHhsIDw8IDI2KQp9CgpmdW5jdGlvbiBnZXRDYXJyeSAoYSwgYikgewogIHJldHVybiAoYSA+Pj4gMCkgPCAoYiA+Pj4gMCkgPyAxIDogMAp9CgpTaGE1MTIucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoTSkgewogIHZhciBXID0gdGhpcy5fdwoKICB2YXIgYWggPSB0aGlzLl9haCB8IDAKICB2YXIgYmggPSB0aGlzLl9iaCB8IDAKICB2YXIgY2ggPSB0aGlzLl9jaCB8IDAKICB2YXIgZGggPSB0aGlzLl9kaCB8IDAKICB2YXIgZWggPSB0aGlzLl9laCB8IDAKICB2YXIgZmggPSB0aGlzLl9maCB8IDAKICB2YXIgZ2ggPSB0aGlzLl9naCB8IDAKICB2YXIgaGggPSB0aGlzLl9oaCB8IDAKCiAgdmFyIGFsID0gdGhpcy5fYWwgfCAwCiAgdmFyIGJsID0gdGhpcy5fYmwgfCAwCiAgdmFyIGNsID0gdGhpcy5fY2wgfCAwCiAgdmFyIGRsID0gdGhpcy5fZGwgfCAwCiAgdmFyIGVsID0gdGhpcy5fZWwgfCAwCiAgdmFyIGZsID0gdGhpcy5fZmwgfCAwCiAgdmFyIGdsID0gdGhpcy5fZ2wgfCAwCiAgdmFyIGhsID0gdGhpcy5faGwgfCAwCgogIGZvciAodmFyIGkgPSAwOyBpIDwgMzI7IGkgKz0gMikgewogICAgV1tpXSA9IE0ucmVhZEludDMyQkUoaSAqIDQpCiAgICBXW2kgKyAxXSA9IE0ucmVhZEludDMyQkUoaSAqIDQgKyA0KQogIH0KICBmb3IgKDsgaSA8IDE2MDsgaSArPSAyKSB7CiAgICB2YXIgeGggPSBXW2kgLSAxNSAqIDJdCiAgICB2YXIgeGwgPSBXW2kgLSAxNSAqIDIgKyAxXQogICAgdmFyIGdhbW1hMCA9IEdhbW1hMCh4aCwgeGwpCiAgICB2YXIgZ2FtbWEwbCA9IEdhbW1hMGwoeGwsIHhoKQoKICAgIHhoID0gV1tpIC0gMiAqIDJdCiAgICB4bCA9IFdbaSAtIDIgKiAyICsgMV0KICAgIHZhciBnYW1tYTEgPSBHYW1tYTEoeGgsIHhsKQogICAgdmFyIGdhbW1hMWwgPSBHYW1tYTFsKHhsLCB4aCkKCiAgICAvLyBXW2ldID0gZ2FtbWEwICsgV1tpIC0gN10gKyBnYW1tYTEgKyBXW2kgLSAxNl0KICAgIHZhciBXaTdoID0gV1tpIC0gNyAqIDJdCiAgICB2YXIgV2k3bCA9IFdbaSAtIDcgKiAyICsgMV0KCiAgICB2YXIgV2kxNmggPSBXW2kgLSAxNiAqIDJdCiAgICB2YXIgV2kxNmwgPSBXW2kgLSAxNiAqIDIgKyAxXQoKICAgIHZhciBXaWwgPSAoZ2FtbWEwbCArIFdpN2wpIHwgMAogICAgdmFyIFdpaCA9IChnYW1tYTAgKyBXaTdoICsgZ2V0Q2FycnkoV2lsLCBnYW1tYTBsKSkgfCAwCiAgICBXaWwgPSAoV2lsICsgZ2FtbWExbCkgfCAwCiAgICBXaWggPSAoV2loICsgZ2FtbWExICsgZ2V0Q2FycnkoV2lsLCBnYW1tYTFsKSkgfCAwCiAgICBXaWwgPSAoV2lsICsgV2kxNmwpIHwgMAogICAgV2loID0gKFdpaCArIFdpMTZoICsgZ2V0Q2FycnkoV2lsLCBXaTE2bCkpIHwgMAoKICAgIFdbaV0gPSBXaWgKICAgIFdbaSArIDFdID0gV2lsCiAgfQoKICBmb3IgKHZhciBqID0gMDsgaiA8IDE2MDsgaiArPSAyKSB7CiAgICBXaWggPSBXW2pdCiAgICBXaWwgPSBXW2ogKyAxXQoKICAgIHZhciBtYWpoID0gbWFqKGFoLCBiaCwgY2gpCiAgICB2YXIgbWFqbCA9IG1haihhbCwgYmwsIGNsKQoKICAgIHZhciBzaWdtYTBoID0gc2lnbWEwKGFoLCBhbCkKICAgIHZhciBzaWdtYTBsID0gc2lnbWEwKGFsLCBhaCkKICAgIHZhciBzaWdtYTFoID0gc2lnbWExKGVoLCBlbCkKICAgIHZhciBzaWdtYTFsID0gc2lnbWExKGVsLCBlaCkKCiAgICAvLyB0MSA9IGggKyBzaWdtYTEgKyBjaCArIEtbal0gKyBXW2pdCiAgICB2YXIgS2loID0gS1tqXQogICAgdmFyIEtpbCA9IEtbaiArIDFdCgogICAgdmFyIGNoaCA9IENoKGVoLCBmaCwgZ2gpCiAgICB2YXIgY2hsID0gQ2goZWwsIGZsLCBnbCkKCiAgICB2YXIgdDFsID0gKGhsICsgc2lnbWExbCkgfCAwCiAgICB2YXIgdDFoID0gKGhoICsgc2lnbWExaCArIGdldENhcnJ5KHQxbCwgaGwpKSB8IDAKICAgIHQxbCA9ICh0MWwgKyBjaGwpIHwgMAogICAgdDFoID0gKHQxaCArIGNoaCArIGdldENhcnJ5KHQxbCwgY2hsKSkgfCAwCiAgICB0MWwgPSAodDFsICsgS2lsKSB8IDAKICAgIHQxaCA9ICh0MWggKyBLaWggKyBnZXRDYXJyeSh0MWwsIEtpbCkpIHwgMAogICAgdDFsID0gKHQxbCArIFdpbCkgfCAwCiAgICB0MWggPSAodDFoICsgV2loICsgZ2V0Q2FycnkodDFsLCBXaWwpKSB8IDAKCiAgICAvLyB0MiA9IHNpZ21hMCArIG1hagogICAgdmFyIHQybCA9IChzaWdtYTBsICsgbWFqbCkgfCAwCiAgICB2YXIgdDJoID0gKHNpZ21hMGggKyBtYWpoICsgZ2V0Q2FycnkodDJsLCBzaWdtYTBsKSkgfCAwCgogICAgaGggPSBnaAogICAgaGwgPSBnbAogICAgZ2ggPSBmaAogICAgZ2wgPSBmbAogICAgZmggPSBlaAogICAgZmwgPSBlbAogICAgZWwgPSAoZGwgKyB0MWwpIHwgMAogICAgZWggPSAoZGggKyB0MWggKyBnZXRDYXJyeShlbCwgZGwpKSB8IDAKICAgIGRoID0gY2gKICAgIGRsID0gY2wKICAgIGNoID0gYmgKICAgIGNsID0gYmwKICAgIGJoID0gYWgKICAgIGJsID0gYWwKICAgIGFsID0gKHQxbCArIHQybCkgfCAwCiAgICBhaCA9ICh0MWggKyB0MmggKyBnZXRDYXJyeShhbCwgdDFsKSkgfCAwCiAgfQoKICB0aGlzLl9hbCA9ICh0aGlzLl9hbCArIGFsKSB8IDAKICB0aGlzLl9ibCA9ICh0aGlzLl9ibCArIGJsKSB8IDAKICB0aGlzLl9jbCA9ICh0aGlzLl9jbCArIGNsKSB8IDAKICB0aGlzLl9kbCA9ICh0aGlzLl9kbCArIGRsKSB8IDAKICB0aGlzLl9lbCA9ICh0aGlzLl9lbCArIGVsKSB8IDAKICB0aGlzLl9mbCA9ICh0aGlzLl9mbCArIGZsKSB8IDAKICB0aGlzLl9nbCA9ICh0aGlzLl9nbCArIGdsKSB8IDAKICB0aGlzLl9obCA9ICh0aGlzLl9obCArIGhsKSB8IDAKCiAgdGhpcy5fYWggPSAodGhpcy5fYWggKyBhaCArIGdldENhcnJ5KHRoaXMuX2FsLCBhbCkpIHwgMAogIHRoaXMuX2JoID0gKHRoaXMuX2JoICsgYmggKyBnZXRDYXJyeSh0aGlzLl9ibCwgYmwpKSB8IDAKICB0aGlzLl9jaCA9ICh0aGlzLl9jaCArIGNoICsgZ2V0Q2FycnkodGhpcy5fY2wsIGNsKSkgfCAwCiAgdGhpcy5fZGggPSAodGhpcy5fZGggKyBkaCArIGdldENhcnJ5KHRoaXMuX2RsLCBkbCkpIHwgMAogIHRoaXMuX2VoID0gKHRoaXMuX2VoICsgZWggKyBnZXRDYXJyeSh0aGlzLl9lbCwgZWwpKSB8IDAKICB0aGlzLl9maCA9ICh0aGlzLl9maCArIGZoICsgZ2V0Q2FycnkodGhpcy5fZmwsIGZsKSkgfCAwCiAgdGhpcy5fZ2ggPSAodGhpcy5fZ2ggKyBnaCArIGdldENhcnJ5KHRoaXMuX2dsLCBnbCkpIHwgMAogIHRoaXMuX2hoID0gKHRoaXMuX2hoICsgaGggKyBnZXRDYXJyeSh0aGlzLl9obCwgaGwpKSB8IDAKfQoKU2hhNTEyLnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgSCA9IG5ldyBCdWZmZXIoNjQpCgogIGZ1bmN0aW9uIHdyaXRlSW50NjRCRSAoaCwgbCwgb2Zmc2V0KSB7CiAgICBILndyaXRlSW50MzJCRShoLCBvZmZzZXQpCiAgICBILndyaXRlSW50MzJCRShsLCBvZmZzZXQgKyA0KQogIH0KCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2FoLCB0aGlzLl9hbCwgMCkKICB3cml0ZUludDY0QkUodGhpcy5fYmgsIHRoaXMuX2JsLCA4KQogIHdyaXRlSW50NjRCRSh0aGlzLl9jaCwgdGhpcy5fY2wsIDE2KQogIHdyaXRlSW50NjRCRSh0aGlzLl9kaCwgdGhpcy5fZGwsIDI0KQogIHdyaXRlSW50NjRCRSh0aGlzLl9laCwgdGhpcy5fZWwsIDMyKQogIHdyaXRlSW50NjRCRSh0aGlzLl9maCwgdGhpcy5fZmwsIDQwKQogIHdyaXRlSW50NjRCRSh0aGlzLl9naCwgdGhpcy5fZ2wsIDQ4KQogIHdyaXRlSW50NjRCRSh0aGlzLl9oaCwgdGhpcy5faGwsIDU2KQoKICByZXR1cm4gSAp9Cgptb2R1bGUuZXhwb3J0cyA9IFNoYTUxMgoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vaGFzaCI6MTYxLCJidWZmZXIiOjcwLCJpbmhlcml0cyI6MTI4fV0sMTY5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiO2Z1bmN0aW9uIHEoYSl7dGhyb3cgYTt9dmFyIHM9dm9pZCAwLHU9ITE7dmFyIHNqY2w9e2NpcGhlcjp7fSxoYXNoOnt9LGtleWV4Y2hhbmdlOnt9LG1vZGU6e30sbWlzYzp7fSxjb2RlYzp7fSxleGNlcHRpb246e2NvcnJ1cHQ6ZnVuY3Rpb24oYSl7dGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJDT1JSVVBUOiAiK3RoaXMubWVzc2FnZX07dGhpcy5tZXNzYWdlPWF9LGludmFsaWQ6ZnVuY3Rpb24oYSl7dGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJJTlZBTElEOiAiK3RoaXMubWVzc2FnZX07dGhpcy5tZXNzYWdlPWF9LGJ1ZzpmdW5jdGlvbihhKXt0aGlzLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkJVRzogIit0aGlzLm1lc3NhZ2V9O3RoaXMubWVzc2FnZT1hfSxub3RSZWFkeTpmdW5jdGlvbihhKXt0aGlzLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIk5PVCBSRUFEWTogIit0aGlzLm1lc3NhZ2V9O3RoaXMubWVzc2FnZT1hfX19OwoidW5kZWZpbmVkIiE9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzJiYobW9kdWxlLmV4cG9ydHM9c2pjbCk7ImZ1bmN0aW9uIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZShbXSxmdW5jdGlvbigpe3JldHVybiBzamNsfSk7CnNqY2wuY2lwaGVyLmFlcz1mdW5jdGlvbihhKXt0aGlzLmtbMF1bMF1bMF18fHRoaXMuRCgpO3ZhciBiLGMsZCxlLGY9dGhpcy5rWzBdWzRdLGc9dGhpcy5rWzFdO2I9YS5sZW5ndGg7dmFyIGg9MTs0IT09YiYmKDYhPT1iJiY4IT09YikmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImludmFsaWQgYWVzIGtleSBzaXplIikpO3RoaXMuYj1bZD1hLnNsaWNlKDApLGU9W11dO2ZvcihhPWI7YTw0KmIrMjg7YSsrKXtjPWRbYS0xXTtpZigwPT09YSVifHw4PT09YiYmND09PWElYiljPWZbYz4+PjI0XTw8MjReZltjPj4xNiYyNTVdPDwxNl5mW2M+PjgmMjU1XTw8OF5mW2MmMjU1XSwwPT09YSViJiYoYz1jPDw4XmM+Pj4yNF5oPDwyNCxoPWg8PDFeMjgzKihoPj43KSk7ZFthXT1kW2EtYl1eY31mb3IoYj0wO2E7YisrLGEtLSljPWRbYiYzP2E6YS00XSxlW2JdPTQ+PWF8fDQ+Yj9jOmdbMF1bZltjPj4+MjRdXV5nWzFdW2ZbYz4+MTYmMjU1XV1eZ1syXVtmW2M+PjgmMjU1XV1eZ1szXVtmW2MmCjI1NV1dfTsKc2pjbC5jaXBoZXIuYWVzLnByb3RvdHlwZT17ZW5jcnlwdDpmdW5jdGlvbihhKXtyZXR1cm4gdyh0aGlzLGEsMCl9LGRlY3J5cHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHcodGhpcyxhLDEpfSxrOltbW10sW10sW10sW10sW11dLFtbXSxbXSxbXSxbXSxbXV1dLEQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmtbMF0sYj10aGlzLmtbMV0sYz1hWzRdLGQ9Yls0XSxlLGYsZyxoPVtdLGw9W10sayxuLG0scDtmb3IoZT0wOzB4MTAwPmU7ZSsrKWxbKGhbZV09ZTw8MV4yODMqKGU+PjcpKV5lXT1lO2ZvcihmPWc9MDshY1tmXTtmXj1rfHwxLGc9bFtnXXx8MSl7bT1nXmc8PDFeZzw8Ml5nPDwzXmc8PDQ7bT1tPj44Xm0mMjU1Xjk5O2NbZl09bTtkW21dPWY7bj1oW2U9aFtrPWhbZl1dXTtwPTB4MTAxMDEwMSpuXjB4MTAwMDEqZV4weDEwMSprXjB4MTAxMDEwMCpmO249MHgxMDEqaFttXV4weDEwMTAxMDAqbTtmb3IoZT0wOzQ+ZTtlKyspYVtlXVtmXT1uPW48PDI0Xm4+Pj44LGJbZV1bbV09cD1wPDwyNF5wPj4+OH1mb3IoZT0KMDs1PmU7ZSsrKWFbZV09YVtlXS5zbGljZSgwKSxiW2VdPWJbZV0uc2xpY2UoMCl9fTsKZnVuY3Rpb24gdyhhLGIsYyl7NCE9PWIubGVuZ3RoJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJpbnZhbGlkIGFlcyBibG9jayBzaXplIikpO3ZhciBkPWEuYltjXSxlPWJbMF1eZFswXSxmPWJbYz8zOjFdXmRbMV0sZz1iWzJdXmRbMl07Yj1iW2M/MTozXV5kWzNdO3ZhciBoLGwsayxuPWQubGVuZ3RoLzQtMixtLHA9NCx0PVswLDAsMCwwXTtoPWEua1tjXTthPWhbMF07dmFyIHI9aFsxXSx2PWhbMl0seT1oWzNdLHo9aFs0XTtmb3IobT0wO208bjttKyspaD1hW2U+Pj4yNF1ecltmPj4xNiYyNTVdXnZbZz4+OCYyNTVdXnlbYiYyNTVdXmRbcF0sbD1hW2Y+Pj4yNF1ecltnPj4xNiYyNTVdXnZbYj4+OCYyNTVdXnlbZSYyNTVdXmRbcCsxXSxrPWFbZz4+PjI0XV5yW2I+PjE2JjI1NV1edltlPj44JjI1NV1eeVtmJjI1NV1eZFtwKzJdLGI9YVtiPj4+MjRdXnJbZT4+MTYmMjU1XV52W2Y+PjgmMjU1XV55W2cmMjU1XV5kW3ArM10scCs9NCxlPWgsZj1sLGc9aztmb3IobT0wOzQ+Cm07bSsrKXRbYz8zJi1tOm1dPXpbZT4+PjI0XTw8MjReeltmPj4xNiYyNTVdPDwxNl56W2c+PjgmMjU1XTw8OF56W2ImMjU1XV5kW3ArK10saD1lLGU9ZixmPWcsZz1iLGI9aDtyZXR1cm4gdH0Kc2pjbC5iaXRBcnJheT17Yml0U2xpY2U6ZnVuY3Rpb24oYSxiLGMpe2E9c2pjbC5iaXRBcnJheS5QKGEuc2xpY2UoYi8zMiksMzItKGImMzEpKS5zbGljZSgxKTtyZXR1cm4gYz09PXM/YTpzamNsLmJpdEFycmF5LmNsYW1wKGEsYy1iKX0sZXh0cmFjdDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9TWF0aC5mbG9vcigtYi1jJjMxKTtyZXR1cm4oKGIrYy0xXmIpJi0zMj9hW2IvMzJ8MF08PDMyLWReYVtiLzMyKzF8MF0+Pj5kOmFbYi8zMnwwXT4+PmQpJigxPDxjKS0xfSxjb25jYXQ6ZnVuY3Rpb24oYSxiKXtpZigwPT09YS5sZW5ndGh8fDA9PT1iLmxlbmd0aClyZXR1cm4gYS5jb25jYXQoYik7dmFyIGM9YVthLmxlbmd0aC0xXSxkPXNqY2wuYml0QXJyYXkuZ2V0UGFydGlhbChjKTtyZXR1cm4gMzI9PT1kP2EuY29uY2F0KGIpOnNqY2wuYml0QXJyYXkuUChiLGQsY3wwLGEuc2xpY2UoMCxhLmxlbmd0aC0xKSl9LGJpdExlbmd0aDpmdW5jdGlvbihhKXt2YXIgYj1hLmxlbmd0aDtyZXR1cm4gMD09PQpiPzA6MzIqKGItMSkrc2pjbC5iaXRBcnJheS5nZXRQYXJ0aWFsKGFbYi0xXSl9LGNsYW1wOmZ1bmN0aW9uKGEsYil7aWYoMzIqYS5sZW5ndGg8YilyZXR1cm4gYTthPWEuc2xpY2UoMCxNYXRoLmNlaWwoYi8zMikpO3ZhciBjPWEubGVuZ3RoO2ImPTMxOzA8YyYmYiYmKGFbYy0xXT1zamNsLmJpdEFycmF5LnBhcnRpYWwoYixhW2MtMV0mMjE0NzQ4MzY0OD4+Yi0xLDEpKTtyZXR1cm4gYX0scGFydGlhbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDMyPT09YT9iOihjP2J8MDpiPDwzMi1hKSsweDEwMDAwMDAwMDAwKmF9LGdldFBhcnRpYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucm91bmQoYS8weDEwMDAwMDAwMDAwKXx8MzJ9LGVxdWFsOmZ1bmN0aW9uKGEsYil7aWYoc2pjbC5iaXRBcnJheS5iaXRMZW5ndGgoYSkhPT1zamNsLmJpdEFycmF5LmJpdExlbmd0aChiKSlyZXR1cm4gdTt2YXIgYz0wLGQ7Zm9yKGQ9MDtkPGEubGVuZ3RoO2QrKyljfD1hW2RdXmJbZF07cmV0dXJuIDA9PT0KY30sUDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZTtlPTA7Zm9yKGQ9PT1zJiYoZD1bXSk7MzI8PWI7Yi09MzIpZC5wdXNoKGMpLGM9MDtpZigwPT09YilyZXR1cm4gZC5jb25jYXQoYSk7Zm9yKGU9MDtlPGEubGVuZ3RoO2UrKylkLnB1c2goY3xhW2VdPj4+YiksYz1hW2VdPDwzMi1iO2U9YS5sZW5ndGg/YVthLmxlbmd0aC0xXTowO2E9c2pjbC5iaXRBcnJheS5nZXRQYXJ0aWFsKGUpO2QucHVzaChzamNsLmJpdEFycmF5LnBhcnRpYWwoYithJjMxLDMyPGIrYT9jOmQucG9wKCksMSkpO3JldHVybiBkfSxsOmZ1bmN0aW9uKGEsYil7cmV0dXJuW2FbMF1eYlswXSxhWzFdXmJbMV0sYVsyXV5iWzJdLGFbM11eYlszXV19LGJ5dGVzd2FwTTpmdW5jdGlvbihhKXt2YXIgYixjO2ZvcihiPTA7YjxhLmxlbmd0aDsrK2IpYz1hW2JdLGFbYl09Yz4+PjI0fGM+Pj44JjB4ZmYwMHwoYyYweGZmMDApPDw4fGM8PDI0O3JldHVybiBhfX07CnNqY2wuY29kZWMudXRmOFN0cmluZz17ZnJvbUJpdHM6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYz1zamNsLmJpdEFycmF5LmJpdExlbmd0aChhKSxkLGU7Zm9yKGQ9MDtkPGMvODtkKyspMD09PShkJjMpJiYoZT1hW2QvNF0pLGIrPVN0cmluZy5mcm9tQ2hhckNvZGUoZT4+PjI0KSxlPDw9ODtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShiKSl9LHRvQml0czpmdW5jdGlvbihhKXthPXVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhKSk7dmFyIGI9W10sYyxkPTA7Zm9yKGM9MDtjPGEubGVuZ3RoO2MrKylkPWQ8PDh8YS5jaGFyQ29kZUF0KGMpLDM9PT0oYyYzKSYmKGIucHVzaChkKSxkPTApO2MmMyYmYi5wdXNoKHNqY2wuYml0QXJyYXkucGFydGlhbCg4KihjJjMpLGQpKTtyZXR1cm4gYn19OwpzamNsLmNvZGVjLmhleD17ZnJvbUJpdHM6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYztmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWIrPSgoYVtjXXwwKSsweGYwMDAwMDAwMDAwMCkudG9TdHJpbmcoMTYpLnN1YnN0cig0KTtyZXR1cm4gYi5zdWJzdHIoMCxzamNsLmJpdEFycmF5LmJpdExlbmd0aChhKS80KX0sdG9CaXRzOmZ1bmN0aW9uKGEpe3ZhciBiLGM9W10sZDthPWEucmVwbGFjZSgvXHN8MHgvZywiIik7ZD1hLmxlbmd0aDthKz0iMDAwMDAwMDAiO2ZvcihiPTA7YjxhLmxlbmd0aDtiKz04KWMucHVzaChwYXJzZUludChhLnN1YnN0cihiLDgpLDE2KV4wKTtyZXR1cm4gc2pjbC5iaXRBcnJheS5jbGFtcChjLDQqZCl9fTsKc2pjbC5jb2RlYy5iYXNlNjQ9e0o6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLGZyb21CaXRzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iIixlPTAsZj1zamNsLmNvZGVjLmJhc2U2NC5KLGc9MCxoPXNqY2wuYml0QXJyYXkuYml0TGVuZ3RoKGEpO2MmJihmPWYuc3Vic3RyKDAsNjIpKyItXyIpO2ZvcihjPTA7NipkLmxlbmd0aDxoOylkKz1mLmNoYXJBdCgoZ15hW2NdPj4+ZSk+Pj4yNiksNj5lPyhnPWFbY108PDYtZSxlKz0yNixjKyspOihnPDw9NixlLT02KTtmb3IoO2QubGVuZ3RoJjMmJiFiOylkKz0iPSI7cmV0dXJuIGR9LHRvQml0czpmdW5jdGlvbihhLGIpe2E9YS5yZXBsYWNlKC9cc3w9L2csIiIpO3ZhciBjPVtdLGQsZT0wLGY9c2pjbC5jb2RlYy5iYXNlNjQuSixnPTAsaDtiJiYoZj1mLnN1YnN0cigwLDYyKSsiLV8iKTtmb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKWg9Zi5pbmRleE9mKGEuY2hhckF0KGQpKSwKMD5oJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJ0aGlzIGlzbid0IGJhc2U2NCEiKSksMjY8ZT8oZS09MjYsYy5wdXNoKGdeaD4+PmUpLGc9aDw8MzItZSk6KGUrPTYsZ149aDw8MzItZSk7ZSY1NiYmYy5wdXNoKHNqY2wuYml0QXJyYXkucGFydGlhbChlJjU2LGcsMSkpO3JldHVybiBjfX07c2pjbC5jb2RlYy5iYXNlNjR1cmw9e2Zyb21CaXRzOmZ1bmN0aW9uKGEpe3JldHVybiBzamNsLmNvZGVjLmJhc2U2NC5mcm9tQml0cyhhLDEsMSl9LHRvQml0czpmdW5jdGlvbihhKXtyZXR1cm4gc2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGEsMSl9fTtzamNsLmhhc2guc2hhMjU2PWZ1bmN0aW9uKGEpe3RoaXMuYlswXXx8dGhpcy5EKCk7YT8odGhpcy5yPWEuci5zbGljZSgwKSx0aGlzLm89YS5vLnNsaWNlKDApLHRoaXMuaD1hLmgpOnRoaXMucmVzZXQoKX07c2pjbC5oYXNoLnNoYTI1Ni5oYXNoPWZ1bmN0aW9uKGEpe3JldHVybihuZXcgc2pjbC5oYXNoLnNoYTI1NikudXBkYXRlKGEpLmZpbmFsaXplKCl9OwpzamNsLmhhc2guc2hhMjU2LnByb3RvdHlwZT17YmxvY2tTaXplOjUxMixyZXNldDpmdW5jdGlvbigpe3RoaXMucj10aGlzLk4uc2xpY2UoMCk7dGhpcy5vPVtdO3RoaXMuaD0wO3JldHVybiB0aGlzfSx1cGRhdGU6ZnVuY3Rpb24oYSl7InN0cmluZyI9PT10eXBlb2YgYSYmKGE9c2pjbC5jb2RlYy51dGY4U3RyaW5nLnRvQml0cyhhKSk7dmFyIGIsYz10aGlzLm89c2pjbC5iaXRBcnJheS5jb25jYXQodGhpcy5vLGEpO2I9dGhpcy5oO2E9dGhpcy5oPWIrc2pjbC5iaXRBcnJheS5iaXRMZW5ndGgoYSk7Zm9yKGI9NTEyK2ImLTUxMjtiPD1hO2IrPTUxMil4KHRoaXMsYy5zcGxpY2UoMCwxNikpO3JldHVybiB0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5vLGM9dGhpcy5yLGI9c2pjbC5iaXRBcnJheS5jb25jYXQoYixbc2pjbC5iaXRBcnJheS5wYXJ0aWFsKDEsMSldKTtmb3IoYT1iLmxlbmd0aCsyO2EmMTU7YSsrKWIucHVzaCgwKTtiLnB1c2goTWF0aC5mbG9vcih0aGlzLmgvCjQyOTQ5NjcyOTYpKTtmb3IoYi5wdXNoKHRoaXMuaHwwKTtiLmxlbmd0aDspeCh0aGlzLGIuc3BsaWNlKDAsMTYpKTt0aGlzLnJlc2V0KCk7cmV0dXJuIGN9LE46W10sYjpbXSxEOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gMHgxMDAwMDAwMDAqKGEtTWF0aC5mbG9vcihhKSl8MH12YXIgYj0wLGM9MixkO2E6Zm9yKDs2ND5iO2MrKyl7Zm9yKGQ9MjtkKmQ8PWM7ZCsrKWlmKDA9PT1jJWQpY29udGludWUgYTs4PmImJih0aGlzLk5bYl09YShNYXRoLnBvdyhjLDAuNSkpKTt0aGlzLmJbYl09YShNYXRoLnBvdyhjLDEvMykpO2IrK319fTsKZnVuY3Rpb24geChhLGIpe3ZhciBjLGQsZSxmPWIuc2xpY2UoMCksZz1hLnIsaD1hLmIsbD1nWzBdLGs9Z1sxXSxuPWdbMl0sbT1nWzNdLHA9Z1s0XSx0PWdbNV0scj1nWzZdLHY9Z1s3XTtmb3IoYz0wOzY0PmM7YysrKTE2PmM/ZD1mW2NdOihkPWZbYysxJjE1XSxlPWZbYysxNCYxNV0sZD1mW2MmMTVdPShkPj4+N15kPj4+MTheZD4+PjNeZDw8MjVeZDw8MTQpKyhlPj4+MTdeZT4+PjE5XmU+Pj4xMF5lPDwxNV5lPDwxMykrZltjJjE1XStmW2MrOSYxNV18MCksZD1kK3YrKHA+Pj42XnA+Pj4xMV5wPj4+MjVecDw8MjZecDw8MjFecDw8NykrKHJecCYodF5yKSkraFtjXSx2PXIscj10LHQ9cCxwPW0rZHwwLG09bixuPWssaz1sLGw9ZCsoayZuXm0mKGtebikpKyhrPj4+Ml5rPj4+MTNeaz4+PjIyXms8PDMwXms8PDE5Xms8PDEwKXwwO2dbMF09Z1swXStsfDA7Z1sxXT1nWzFdK2t8MDtnWzJdPWdbMl0rbnwwO2dbM109Z1szXSttfDA7Z1s0XT1nWzRdK3B8MDtnWzVdPWdbNV0rdHwwO2dbNl09CmdbNl0rcnwwO2dbN109Z1s3XSt2fDB9CnNqY2wubW9kZS5jY209e25hbWU6ImNjbSIsZW5jcnlwdDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGc9Yi5zbGljZSgwKSxoPXNqY2wuYml0QXJyYXksbD1oLmJpdExlbmd0aChjKS84LGs9aC5iaXRMZW5ndGgoZykvODtlPWV8fDY0O2Q9ZHx8W107Nz5sJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJjY206IGl2IG11c3QgYmUgYXQgbGVhc3QgNyBieXRlcyIpKTtmb3IoZj0yOzQ+ZiYmaz4+PjgqZjtmKyspO2Y8MTUtbCYmKGY9MTUtbCk7Yz1oLmNsYW1wKGMsOCooMTUtZikpO2I9c2pjbC5tb2RlLmNjbS5MKGEsYixjLGQsZSxmKTtnPXNqY2wubW9kZS5jY20ucChhLGcsYyxiLGUsZik7cmV0dXJuIGguY29uY2F0KGcuZGF0YSxnLnRhZyl9LGRlY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtlPWV8fDY0O2Q9ZHx8W107dmFyIGY9c2pjbC5iaXRBcnJheSxnPWYuYml0TGVuZ3RoKGMpLzgsaD1mLmJpdExlbmd0aChiKSxsPWYuY2xhbXAoYixoLWUpLGs9Zi5iaXRTbGljZShiLApoLWUpLGg9KGgtZSkvODs3PmcmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImNjbTogaXYgbXVzdCBiZSBhdCBsZWFzdCA3IGJ5dGVzIikpO2ZvcihiPTI7ND5iJiZoPj4+OCpiO2IrKyk7YjwxNS1nJiYoYj0xNS1nKTtjPWYuY2xhbXAoYyw4KigxNS1iKSk7bD1zamNsLm1vZGUuY2NtLnAoYSxsLGMsayxlLGIpO2E9c2pjbC5tb2RlLmNjbS5MKGEsbC5kYXRhLGMsZCxlLGIpO2YuZXF1YWwobC50YWcsYSl8fHEobmV3IHNqY2wuZXhjZXB0aW9uLmNvcnJ1cHQoImNjbTogdGFnIGRvZXNuJ3QgbWF0Y2giKSk7cmV0dXJuIGwuZGF0YX0sTDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9W10saD1zamNsLmJpdEFycmF5LGw9aC5sO2UvPTg7KGUlMnx8ND5lfHwxNjxlKSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgiY2NtOiBpbnZhbGlkIHRhZyBsZW5ndGgiKSk7KDB4ZmZmZmZmZmY8ZC5sZW5ndGh8fDB4ZmZmZmZmZmY8Yi5sZW5ndGgpJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5idWcoImNjbTogY2FuJ3QgZGVhbCB3aXRoIDRHaUIgb3IgbW9yZSBkYXRhIikpOwpmPVtoLnBhcnRpYWwoOCwoZC5sZW5ndGg/NjQ6MCl8ZS0yPDwyfGYtMSldO2Y9aC5jb25jYXQoZixjKTtmWzNdfD1oLmJpdExlbmd0aChiKS84O2Y9YS5lbmNyeXB0KGYpO2lmKGQubGVuZ3RoKXtjPWguYml0TGVuZ3RoKGQpLzg7NjUyNzk+PWM/Zz1baC5wYXJ0aWFsKDE2LGMpXToweGZmZmZmZmZmPj1jJiYoZz1oLmNvbmNhdChbaC5wYXJ0aWFsKDE2LDY1NTM0KV0sW2NdKSk7Zz1oLmNvbmNhdChnLGQpO2ZvcihkPTA7ZDxnLmxlbmd0aDtkKz00KWY9YS5lbmNyeXB0KGwoZixnLnNsaWNlKGQsZCs0KS5jb25jYXQoWzAsMCwwXSkpKX1mb3IoZD0wO2Q8Yi5sZW5ndGg7ZCs9NClmPWEuZW5jcnlwdChsKGYsYi5zbGljZShkLGQrNCkuY29uY2F0KFswLDAsMF0pKSk7cmV0dXJuIGguY2xhbXAoZiw4KmUpfSxwOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZyxoPXNqY2wuYml0QXJyYXk7Zz1oLmw7dmFyIGw9Yi5sZW5ndGgsaz1oLmJpdExlbmd0aChiKTtjPWguY29uY2F0KFtoLnBhcnRpYWwoOCwKZi0xKV0sYykuY29uY2F0KFswLDAsMF0pLnNsaWNlKDAsNCk7ZD1oLmJpdFNsaWNlKGcoZCxhLmVuY3J5cHQoYykpLDAsZSk7aWYoIWwpcmV0dXJue3RhZzpkLGRhdGE6W119O2ZvcihnPTA7ZzxsO2crPTQpY1szXSsrLGU9YS5lbmNyeXB0KGMpLGJbZ11ePWVbMF0sYltnKzFdXj1lWzFdLGJbZysyXV49ZVsyXSxiW2crM11ePWVbM107cmV0dXJue3RhZzpkLGRhdGE6aC5jbGFtcChiLGspfX19OwpzamNsLm1vZGUub2NiMj17bmFtZToib2NiMiIsZW5jcnlwdDpmdW5jdGlvbihhLGIsYyxkLGUsZil7MTI4IT09c2pjbC5iaXRBcnJheS5iaXRMZW5ndGgoYykmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoIm9jYiBpdiBtdXN0IGJlIDEyOCBiaXRzIikpO3ZhciBnLGg9c2pjbC5tb2RlLm9jYjIuSCxsPXNqY2wuYml0QXJyYXksaz1sLmwsbj1bMCwwLDAsMF07Yz1oKGEuZW5jcnlwdChjKSk7dmFyIG0scD1bXTtkPWR8fFtdO2U9ZXx8NjQ7Zm9yKGc9MDtnKzQ8Yi5sZW5ndGg7Zys9NCltPWIuc2xpY2UoZyxnKzQpLG49ayhuLG0pLHA9cC5jb25jYXQoayhjLGEuZW5jcnlwdChrKGMsbSkpKSksYz1oKGMpO209Yi5zbGljZShnKTtiPWwuYml0TGVuZ3RoKG0pO2c9YS5lbmNyeXB0KGsoYyxbMCwwLDAsYl0pKTttPWwuY2xhbXAoayhtLmNvbmNhdChbMCwwLDBdKSxnKSxiKTtuPWsobixrKG0uY29uY2F0KFswLDAsMF0pLGcpKTtuPWEuZW5jcnlwdChrKG4sayhjLGgoYykpKSk7ZC5sZW5ndGgmJgoobj1rKG4sZj9kOnNqY2wubW9kZS5vY2IyLnBtYWMoYSxkKSkpO3JldHVybiBwLmNvbmNhdChsLmNvbmNhdChtLGwuY2xhbXAobixlKSkpfSxkZWNyeXB0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXsxMjghPT1zamNsLmJpdEFycmF5LmJpdExlbmd0aChjKSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgib2NiIGl2IG11c3QgYmUgMTI4IGJpdHMiKSk7ZT1lfHw2NDt2YXIgZz1zamNsLm1vZGUub2NiMi5ILGg9c2pjbC5iaXRBcnJheSxsPWgubCxrPVswLDAsMCwwXSxuPWcoYS5lbmNyeXB0KGMpKSxtLHAsdD1zamNsLmJpdEFycmF5LmJpdExlbmd0aChiKS1lLHI9W107ZD1kfHxbXTtmb3IoYz0wO2MrNDx0LzMyO2MrPTQpbT1sKG4sYS5kZWNyeXB0KGwobixiLnNsaWNlKGMsYys0KSkpKSxrPWwoayxtKSxyPXIuY29uY2F0KG0pLG49ZyhuKTtwPXQtMzIqYzttPWEuZW5jcnlwdChsKG4sWzAsMCwwLHBdKSk7bT1sKG0saC5jbGFtcChiLnNsaWNlKGMpLHApLmNvbmNhdChbMCwwLDBdKSk7Cms9bChrLG0pO2s9YS5lbmNyeXB0KGwoayxsKG4sZyhuKSkpKTtkLmxlbmd0aCYmKGs9bChrLGY/ZDpzamNsLm1vZGUub2NiMi5wbWFjKGEsZCkpKTtoLmVxdWFsKGguY2xhbXAoayxlKSxoLmJpdFNsaWNlKGIsdCkpfHxxKG5ldyBzamNsLmV4Y2VwdGlvbi5jb3JydXB0KCJvY2I6IHRhZyBkb2Vzbid0IG1hdGNoIikpO3JldHVybiByLmNvbmNhdChoLmNsYW1wKG0scCkpfSxwbWFjOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1zamNsLm1vZGUub2NiMi5ILGU9c2pjbC5iaXRBcnJheSxmPWUubCxnPVswLDAsMCwwXSxoPWEuZW5jcnlwdChbMCwwLDAsMF0pLGg9ZihoLGQoZChoKSkpO2ZvcihjPTA7Yys0PGIubGVuZ3RoO2MrPTQpaD1kKGgpLGc9ZihnLGEuZW5jcnlwdChmKGgsYi5zbGljZShjLGMrNCkpKSk7Yz1iLnNsaWNlKGMpOzEyOD5lLmJpdExlbmd0aChjKSYmKGg9ZihoLGQoaCkpLGM9ZS5jb25jYXQoYyxbLTIxNDc0ODM2NDgsMCwwLDBdKSk7Zz1mKGcsYyk7cmV0dXJuIGEuZW5jcnlwdChmKGQoZihoLApkKGgpKSksZykpfSxIOmZ1bmN0aW9uKGEpe3JldHVyblthWzBdPDwxXmFbMV0+Pj4zMSxhWzFdPDwxXmFbMl0+Pj4zMSxhWzJdPDwxXmFbM10+Pj4zMSxhWzNdPDwxXjEzNSooYVswXT4+PjMxKV19fTsKc2pjbC5tb2RlLmdjbT17bmFtZToiZ2NtIixlbmNyeXB0OmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Yi5zbGljZSgwKTtiPXNqY2wuYml0QXJyYXk7ZD1kfHxbXTthPXNqY2wubW9kZS5nY20ucCghMCxhLGYsZCxjLGV8fDEyOCk7cmV0dXJuIGIuY29uY2F0KGEuZGF0YSxhLnRhZyl9LGRlY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1iLnNsaWNlKDApLGc9c2pjbC5iaXRBcnJheSxoPWcuYml0TGVuZ3RoKGYpO2U9ZXx8MTI4O2Q9ZHx8W107ZTw9aD8oYj1nLmJpdFNsaWNlKGYsaC1lKSxmPWcuYml0U2xpY2UoZiwwLGgtZSkpOihiPWYsZj1bXSk7YT1zamNsLm1vZGUuZ2NtLnAodSxhLGYsZCxjLGUpO2cuZXF1YWwoYS50YWcsYil8fHEobmV3IHNqY2wuZXhjZXB0aW9uLmNvcnJ1cHQoImdjbTogdGFnIGRvZXNuJ3QgbWF0Y2giKSk7cmV0dXJuIGEuZGF0YX0sWjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGcsaD1zamNsLmJpdEFycmF5Lmw7ZT1bMCwwLDAsMF07Zj1iLnNsaWNlKDApOwpmb3IoYz0wOzEyOD5jO2MrKyl7KGQ9MCE9PShhW01hdGguZmxvb3IoYy8zMildJjE8PDMxLWMlMzIpKSYmKGU9aChlLGYpKTtnPTAhPT0oZlszXSYxKTtmb3IoZD0zOzA8ZDtkLS0pZltkXT1mW2RdPj4+MXwoZltkLTFdJjEpPDwzMTtmWzBdPj4+PTE7ZyYmKGZbMF1ePS0weDFmMDAwMDAwKX1yZXR1cm4gZX0sZzpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT1jLmxlbmd0aDtiPWIuc2xpY2UoMCk7Zm9yKGQ9MDtkPGU7ZCs9NCliWzBdXj0weGZmZmZmZmZmJmNbZF0sYlsxXV49MHhmZmZmZmZmZiZjW2QrMV0sYlsyXV49MHhmZmZmZmZmZiZjW2QrMl0sYlszXV49MHhmZmZmZmZmZiZjW2QrM10sYj1zamNsLm1vZGUuZ2NtLlooYixhKTtyZXR1cm4gYn0scDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGcsaCxsLGssbixtLHAsdCxyPXNqY2wuYml0QXJyYXk7bT1jLmxlbmd0aDtwPXIuYml0TGVuZ3RoKGMpO3Q9ci5iaXRMZW5ndGgoZCk7aD1yLmJpdExlbmd0aChlKTtnPWIuZW5jcnlwdChbMCwKMCwwLDBdKTs5Nj09PWg/KGU9ZS5zbGljZSgwKSxlPXIuY29uY2F0KGUsWzFdKSk6KGU9c2pjbC5tb2RlLmdjbS5nKGcsWzAsMCwwLDBdLGUpLGU9c2pjbC5tb2RlLmdjbS5nKGcsZSxbMCwwLE1hdGguZmxvb3IoaC8weDEwMDAwMDAwMCksaCYweGZmZmZmZmZmXSkpO2g9c2pjbC5tb2RlLmdjbS5nKGcsWzAsMCwwLDBdLGQpO249ZS5zbGljZSgwKTtkPWguc2xpY2UoMCk7YXx8KGQ9c2pjbC5tb2RlLmdjbS5nKGcsaCxjKSk7Zm9yKGs9MDtrPG07ays9NCluWzNdKyssbD1iLmVuY3J5cHQobiksY1trXV49bFswXSxjW2srMV1ePWxbMV0sY1trKzJdXj1sWzJdLGNbayszXV49bFszXTtjPXIuY2xhbXAoYyxwKTthJiYoZD1zamNsLm1vZGUuZ2NtLmcoZyxoLGMpKTthPVtNYXRoLmZsb29yKHQvMHgxMDAwMDAwMDApLHQmMHhmZmZmZmZmZixNYXRoLmZsb29yKHAvMHgxMDAwMDAwMDApLHAmMHhmZmZmZmZmZl07ZD1zamNsLm1vZGUuZ2NtLmcoZyxkLGEpO2w9Yi5lbmNyeXB0KGUpO2RbMF1ePWxbMF07CmRbMV1ePWxbMV07ZFsyXV49bFsyXTtkWzNdXj1sWzNdO3JldHVybnt0YWc6ci5iaXRTbGljZShkLDAsZiksZGF0YTpjfX19O3NqY2wubWlzYy5obWFjPWZ1bmN0aW9uKGEsYil7dGhpcy5NPWI9Ynx8c2pjbC5oYXNoLnNoYTI1Njt2YXIgYz1bW10sW11dLGQsZT1iLnByb3RvdHlwZS5ibG9ja1NpemUvMzI7dGhpcy5uPVtuZXcgYixuZXcgYl07YS5sZW5ndGg+ZSYmKGE9Yi5oYXNoKGEpKTtmb3IoZD0wO2Q8ZTtkKyspY1swXVtkXT1hW2RdXjkwOTUyMjQ4NixjWzFdW2RdPWFbZF1eMTU0OTU1NjgyODt0aGlzLm5bMF0udXBkYXRlKGNbMF0pO3RoaXMublsxXS51cGRhdGUoY1sxXSk7dGhpcy5HPW5ldyBiKHRoaXMublswXSl9OwpzamNsLm1pc2MuaG1hYy5wcm90b3R5cGUuZW5jcnlwdD1zamNsLm1pc2MuaG1hYy5wcm90b3R5cGUubWFjPWZ1bmN0aW9uKGEpe3RoaXMuUSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgiZW5jcnlwdCBvbiBhbHJlYWR5IHVwZGF0ZWQgaG1hYyBjYWxsZWQhIikpO3RoaXMudXBkYXRlKGEpO3JldHVybiB0aGlzLmRpZ2VzdChhKX07c2pjbC5taXNjLmhtYWMucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5HPW5ldyB0aGlzLk0odGhpcy5uWzBdKTt0aGlzLlE9dX07c2pjbC5taXNjLmhtYWMucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhKXt0aGlzLlE9ITA7dGhpcy5HLnVwZGF0ZShhKX07c2pjbC5taXNjLmhtYWMucHJvdG90eXBlLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuRy5maW5hbGl6ZSgpLGE9KG5ldyB0aGlzLk0odGhpcy5uWzFdKSkudXBkYXRlKGEpLmZpbmFsaXplKCk7dGhpcy5yZXNldCgpO3JldHVybiBhfTsKc2pjbC5taXNjLnBia2RmMj1mdW5jdGlvbihhLGIsYyxkLGUpe2M9Y3x8MUUzOygwPmR8fDA+YykmJnEoc2pjbC5leGNlcHRpb24uaW52YWxpZCgiaW52YWxpZCBwYXJhbXMgdG8gcGJrZGYyIikpOyJzdHJpbmciPT09dHlwZW9mIGEmJihhPXNqY2wuY29kZWMudXRmOFN0cmluZy50b0JpdHMoYSkpOyJzdHJpbmciPT09dHlwZW9mIGImJihiPXNqY2wuY29kZWMudXRmOFN0cmluZy50b0JpdHMoYikpO2U9ZXx8c2pjbC5taXNjLmhtYWM7YT1uZXcgZShhKTt2YXIgZixnLGgsbCxrPVtdLG49c2pjbC5iaXRBcnJheTtmb3IobD0xOzMyKmsubGVuZ3RoPChkfHwxKTtsKyspe2U9Zj1hLmVuY3J5cHQobi5jb25jYXQoYixbbF0pKTtmb3IoZz0xO2c8YztnKyspe2Y9YS5lbmNyeXB0KGYpO2ZvcihoPTA7aDxmLmxlbmd0aDtoKyspZVtoXV49ZltoXX1rPWsuY29uY2F0KGUpfWQmJihrPW4uY2xhbXAoayxkKSk7cmV0dXJuIGt9OwpzamNsLnBybmc9ZnVuY3Rpb24oYSl7dGhpcy5jPVtuZXcgc2pjbC5oYXNoLnNoYTI1Nl07dGhpcy5pPVswXTt0aGlzLkY9MDt0aGlzLnM9e307dGhpcy5DPTA7dGhpcy5LPXt9O3RoaXMuTz10aGlzLmQ9dGhpcy5qPXRoaXMuVz0wO3RoaXMuYj1bMCwwLDAsMCwwLDAsMCwwXTt0aGlzLmY9WzAsMCwwLDBdO3RoaXMuQT1zO3RoaXMuQj1hO3RoaXMucT11O3RoaXMudz17cHJvZ3Jlc3M6e30sc2VlZGVkOnt9fTt0aGlzLm09dGhpcy5WPTA7dGhpcy50PTE7dGhpcy51PTI7dGhpcy5TPTB4MTAwMDA7dGhpcy5JPVswLDQ4LDY0LDk2LDEyOCwxOTIsMHgxMDAsMzg0LDUxMiw3NjgsMTAyNF07dGhpcy5UPTNFNDt0aGlzLlI9ODB9OwpzamNsLnBybmcucHJvdG90eXBlPXtyYW5kb21Xb3JkczpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ7ZD10aGlzLmlzUmVhZHkoYik7dmFyIGU7ZD09PXRoaXMubSYmcShuZXcgc2pjbC5leGNlcHRpb24ubm90UmVhZHkoImdlbmVyYXRvciBpc24ndCBzZWVkZWQiKSk7aWYoZCZ0aGlzLnUpe2Q9IShkJnRoaXMudCk7ZT1bXTt2YXIgZj0wLGc7dGhpcy5PPWVbMF09KG5ldyBEYXRlKS52YWx1ZU9mKCkrdGhpcy5UO2ZvcihnPTA7MTY+ZztnKyspZS5wdXNoKDB4MTAwMDAwMDAwKk1hdGgucmFuZG9tKCl8MCk7Zm9yKGc9MDtnPHRoaXMuYy5sZW5ndGgmJiEoZT1lLmNvbmNhdCh0aGlzLmNbZ10uZmluYWxpemUoKSksZis9dGhpcy5pW2ddLHRoaXMuaVtnXT0wLCFkJiZ0aGlzLkYmMTw8Zyk7ZysrKTt0aGlzLkY+PTE8PHRoaXMuYy5sZW5ndGgmJih0aGlzLmMucHVzaChuZXcgc2pjbC5oYXNoLnNoYTI1NiksdGhpcy5pLnB1c2goMCkpO3RoaXMuZC09ZjtmPnRoaXMuaiYmKHRoaXMuaj1mKTt0aGlzLkYrKzsKdGhpcy5iPXNqY2wuaGFzaC5zaGEyNTYuaGFzaCh0aGlzLmIuY29uY2F0KGUpKTt0aGlzLkE9bmV3IHNqY2wuY2lwaGVyLmFlcyh0aGlzLmIpO2ZvcihkPTA7ND5kJiYhKHRoaXMuZltkXT10aGlzLmZbZF0rMXwwLHRoaXMuZltkXSk7ZCsrKTt9Zm9yKGQ9MDtkPGE7ZCs9NCkwPT09KGQrMSkldGhpcy5TJiZBKHRoaXMpLGU9Qih0aGlzKSxjLnB1c2goZVswXSxlWzFdLGVbMl0sZVszXSk7QSh0aGlzKTtyZXR1cm4gYy5zbGljZSgwLGEpfSxzZXREZWZhdWx0UGFyYW5vaWE6ZnVuY3Rpb24oYSxiKXswPT09YSYmIlNldHRpbmcgcGFyYW5vaWE9MCB3aWxsIHJ1aW4geW91ciBzZWN1cml0eTsgdXNlIGl0IG9ubHkgZm9yIHRlc3RpbmciIT09YiYmcSgiU2V0dGluZyBwYXJhbm9pYT0wIHdpbGwgcnVpbiB5b3VyIHNlY3VyaXR5OyB1c2UgaXQgb25seSBmb3IgdGVzdGluZyIpO3RoaXMuQj1hfSxhZGRFbnRyb3B5OmZ1bmN0aW9uKGEsYixjKXtjPWN8fCJ1c2VyIjt2YXIgZCxlLGY9KG5ldyBEYXRlKS52YWx1ZU9mKCksCmc9dGhpcy5zW2NdLGg9dGhpcy5pc1JlYWR5KCksbD0wO2Q9dGhpcy5LW2NdO2Q9PT1zJiYoZD10aGlzLktbY109dGhpcy5XKyspO2c9PT1zJiYoZz10aGlzLnNbY109MCk7dGhpcy5zW2NdPSh0aGlzLnNbY10rMSkldGhpcy5jLmxlbmd0aDtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgIm51bWJlciI6Yj09PXMmJihiPTEpO3RoaXMuY1tnXS51cGRhdGUoW2QsdGhpcy5DKyssMSxiLGYsMSxhfDBdKTticmVhaztjYXNlICJvYmplY3QiOmM9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpO2lmKCJbb2JqZWN0IFVpbnQzMkFycmF5XSI9PT1jKXtlPVtdO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspZS5wdXNoKGFbY10pO2E9ZX1lbHNleyJbb2JqZWN0IEFycmF5XSIhPT1jJiYobD0xKTtmb3IoYz0wO2M8YS5sZW5ndGgmJiFsO2MrKykibnVtYmVyIiE9PXR5cGVvZiBhW2NdJiYobD0xKX1pZighbCl7aWYoYj09PXMpZm9yKGM9Yj0wO2M8YS5sZW5ndGg7YysrKWZvcihlPWFbY107MDxlOyliKyssCmU+Pj49MTt0aGlzLmNbZ10udXBkYXRlKFtkLHRoaXMuQysrLDIsYixmLGEubGVuZ3RoXS5jb25jYXQoYSkpfWJyZWFrO2Nhc2UgInN0cmluZyI6Yj09PXMmJihiPWEubGVuZ3RoKTt0aGlzLmNbZ10udXBkYXRlKFtkLHRoaXMuQysrLDMsYixmLGEubGVuZ3RoXSk7dGhpcy5jW2ddLnVwZGF0ZShhKTticmVhaztkZWZhdWx0Omw9MX1sJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5idWcoInJhbmRvbTogYWRkRW50cm9weSBvbmx5IHN1cHBvcnRzIG51bWJlciwgYXJyYXkgb2YgbnVtYmVycyBvciBzdHJpbmciKSk7dGhpcy5pW2ddKz1iO3RoaXMuZCs9YjtoPT09dGhpcy5tJiYodGhpcy5pc1JlYWR5KCkhPT10aGlzLm0mJkMoInNlZWRlZCIsTWF0aC5tYXgodGhpcy5qLHRoaXMuZCkpLEMoInByb2dyZXNzIix0aGlzLmdldFByb2dyZXNzKCkpKX0saXNSZWFkeTpmdW5jdGlvbihhKXthPXRoaXMuSVthIT09cz9hOnRoaXMuQl07cmV0dXJuIHRoaXMuaiYmdGhpcy5qPj1hP3RoaXMuaVswXT50aGlzLlImJgoobmV3IERhdGUpLnZhbHVlT2YoKT50aGlzLk8/dGhpcy51fHRoaXMudDp0aGlzLnQ6dGhpcy5kPj1hP3RoaXMudXx0aGlzLm06dGhpcy5tfSxnZXRQcm9ncmVzczpmdW5jdGlvbihhKXthPXRoaXMuSVthP2E6dGhpcy5CXTtyZXR1cm4gdGhpcy5qPj1hPzE6dGhpcy5kPmE/MTp0aGlzLmQvYX0sc3RhcnRDb2xsZWN0b3JzOmZ1bmN0aW9uKCl7dGhpcy5xfHwodGhpcy5hPXtsb2FkVGltZUNvbGxlY3RvcjpEKHRoaXMsdGhpcy5hYSksbW91c2VDb2xsZWN0b3I6RCh0aGlzLHRoaXMuYmEpLGtleWJvYXJkQ29sbGVjdG9yOkQodGhpcyx0aGlzLiQpLGFjY2VsZXJvbWV0ZXJDb2xsZWN0b3I6RCh0aGlzLHRoaXMuVSksdG91Y2hDb2xsZWN0b3I6RCh0aGlzLHRoaXMuZGEpfSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcj8od2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLHRoaXMuYS5sb2FkVGltZUNvbGxlY3Rvcix1KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLmEubW91c2VDb2xsZWN0b3IsCnUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlwcmVzcyIsdGhpcy5hLmtleWJvYXJkQ29sbGVjdG9yLHUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJkZXZpY2Vtb3Rpb24iLHRoaXMuYS5hY2NlbGVyb21ldGVyQ29sbGVjdG9yLHUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLHRoaXMuYS50b3VjaENvbGxlY3Rvcix1KSk6ZG9jdW1lbnQuYXR0YWNoRXZlbnQ/KGRvY3VtZW50LmF0dGFjaEV2ZW50KCJvbmxvYWQiLHRoaXMuYS5sb2FkVGltZUNvbGxlY3RvciksZG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9ubW91c2Vtb3ZlIix0aGlzLmEubW91c2VDb2xsZWN0b3IpLGRvY3VtZW50LmF0dGFjaEV2ZW50KCJrZXlwcmVzcyIsdGhpcy5hLmtleWJvYXJkQ29sbGVjdG9yKSk6cShuZXcgc2pjbC5leGNlcHRpb24uYnVnKCJjYW4ndCBhdHRhY2ggZXZlbnQiKSksdGhpcy5xPSEwKX0sc3RvcENvbGxlY3RvcnM6ZnVuY3Rpb24oKXt0aGlzLnEmJih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcj8KKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIix0aGlzLmEubG9hZFRpbWVDb2xsZWN0b3IsdSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5hLm1vdXNlQ29sbGVjdG9yLHUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlwcmVzcyIsdGhpcy5hLmtleWJvYXJkQ29sbGVjdG9yLHUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJkZXZpY2Vtb3Rpb24iLHRoaXMuYS5hY2NlbGVyb21ldGVyQ29sbGVjdG9yLHUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLHRoaXMuYS50b3VjaENvbGxlY3Rvcix1KSk6ZG9jdW1lbnQuZGV0YWNoRXZlbnQmJihkb2N1bWVudC5kZXRhY2hFdmVudCgib25sb2FkIix0aGlzLmEubG9hZFRpbWVDb2xsZWN0b3IpLGRvY3VtZW50LmRldGFjaEV2ZW50KCJvbm1vdXNlbW92ZSIsdGhpcy5hLm1vdXNlQ29sbGVjdG9yKSxkb2N1bWVudC5kZXRhY2hFdmVudCgia2V5cHJlc3MiLAp0aGlzLmEua2V5Ym9hcmRDb2xsZWN0b3IpKSx0aGlzLnE9dSl9LGFkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLndbYV1bdGhpcy5WKytdPWJ9LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcy53W2FdLGY9W107Zm9yKGQgaW4gZSllLmhhc093blByb3BlcnR5KGQpJiZlW2RdPT09YiYmZi5wdXNoKGQpO2ZvcihjPTA7YzxmLmxlbmd0aDtjKyspZD1mW2NdLGRlbGV0ZSBlW2RdfSwkOmZ1bmN0aW9uKCl7RSgxKX0sYmE6ZnVuY3Rpb24oYSl7dmFyIGIsYzt0cnl7Yj1hLnh8fGEuY2xpZW50WHx8YS5vZmZzZXRYfHwwLGM9YS55fHxhLmNsaWVudFl8fGEub2Zmc2V0WXx8MH1jYXRjaChkKXtjPWI9MH0wIT1iJiYwIT1jJiZzamNsLnJhbmRvbS5hZGRFbnRyb3B5KFtiLGNdLDIsIm1vdXNlIik7RSgwKX0sZGE6ZnVuY3Rpb24oYSl7YT1hLnRvdWNoZXNbMF18fGEuY2hhbmdlZFRvdWNoZXNbMF07c2pjbC5yYW5kb20uYWRkRW50cm9weShbYS5wYWdlWHx8CmEuY2xpZW50WCxhLnBhZ2VZfHxhLmNsaWVudFldLDEsInRvdWNoIik7RSgwKX0sYWE6ZnVuY3Rpb24oKXtFKDIpfSxVOmZ1bmN0aW9uKGEpe2E9YS5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5Lnh8fGEuYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eS55fHxhLmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHkuejtpZih3aW5kb3cub3JpZW50YXRpb24pe3ZhciBiPXdpbmRvdy5vcmllbnRhdGlvbjsibnVtYmVyIj09PXR5cGVvZiBiJiZzamNsLnJhbmRvbS5hZGRFbnRyb3B5KGIsMSwiYWNjZWxlcm9tZXRlciIpfWEmJnNqY2wucmFuZG9tLmFkZEVudHJvcHkoYSwyLCJhY2NlbGVyb21ldGVyIik7RSgwKX19O2Z1bmN0aW9uIEMoYSxiKXt2YXIgYyxkPXNqY2wucmFuZG9tLndbYV0sZT1bXTtmb3IoYyBpbiBkKWQuaGFzT3duUHJvcGVydHkoYykmJmUucHVzaChkW2NdKTtmb3IoYz0wO2M8ZS5sZW5ndGg7YysrKWVbY10oYil9CmZ1bmN0aW9uIEUoYSl7InVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cucGVyZm9ybWFuY2UmJiJmdW5jdGlvbiI9PT10eXBlb2Ygd2luZG93LnBlcmZvcm1hbmNlLm5vdz9zamNsLnJhbmRvbS5hZGRFbnRyb3B5KHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSxhLCJsb2FkdGltZSIpOnNqY2wucmFuZG9tLmFkZEVudHJvcHkoKG5ldyBEYXRlKS52YWx1ZU9mKCksYSwibG9hZHRpbWUiKX1mdW5jdGlvbiBBKGEpe2EuYj1CKGEpLmNvbmNhdChCKGEpKTthLkE9bmV3IHNqY2wuY2lwaGVyLmFlcyhhLmIpfWZ1bmN0aW9uIEIoYSl7Zm9yKHZhciBiPTA7ND5iJiYhKGEuZltiXT1hLmZbYl0rMXwwLGEuZltiXSk7YisrKTtyZXR1cm4gYS5BLmVuY3J5cHQoYS5mKX1mdW5jdGlvbiBEKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7Yi5hcHBseShhLGFyZ3VtZW50cyl9fXNqY2wucmFuZG9tPW5ldyBzamNsLnBybmcoNik7CmE6dHJ5e3ZhciBGLEcsSCxJO2lmKEk9InVuZGVmaW5lZCIhPT10eXBlb2YgbW9kdWxlKXt2YXIgSjtpZihKPW1vZHVsZS5leHBvcnRzKXt2YXIgSzt0cnl7Sz1yZXF1aXJlKCJjcnlwdG8iKX1jYXRjaChMKXtLPW51bGx9Sj0oRz1LKSYmRy5yYW5kb21CeXRlc31JPUp9aWYoSSlGPUcucmFuZG9tQnl0ZXMoMTI4KSxGPW5ldyBVaW50MzJBcnJheSgobmV3IFVpbnQ4QXJyYXkoRikpLmJ1ZmZlciksc2pjbC5yYW5kb20uYWRkRW50cm9weShGLDEwMjQsImNyeXB0b1sncmFuZG9tQnl0ZXMnXSIpO2Vsc2UgaWYoInVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93JiYidW5kZWZpbmVkIiE9PXR5cGVvZiBVaW50MzJBcnJheSl7SD1uZXcgVWludDMyQXJyYXkoMzIpO2lmKHdpbmRvdy5jcnlwdG8mJndpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKXdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKEgpO2Vsc2UgaWYod2luZG93Lm1zQ3J5cHRvJiZ3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKXdpbmRvdy5tc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMoSCk7CmVsc2UgYnJlYWsgYTtzamNsLnJhbmRvbS5hZGRFbnRyb3B5KEgsMTAyNCwiY3J5cHRvWydnZXRSYW5kb21WYWx1ZXMnXSIpfX1jYXRjaChNKXsidW5kZWZpbmVkIiE9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy5jb25zb2xlJiYoY29uc29sZS5sb2coIlRoZXJlIHdhcyBhbiBlcnJvciBjb2xsZWN0aW5nIGVudHJvcHkgZnJvbSB0aGUgYnJvd3NlcjoiKSxjb25zb2xlLmxvZyhNKSl9CnNqY2wuanNvbj17ZGVmYXVsdHM6e3Y6MSxpdGVyOjFFMyxrczoxMjgsdHM6NjQsbW9kZToiY2NtIixhZGF0YToiIixjaXBoZXI6ImFlcyJ9LFk6ZnVuY3Rpb24oYSxiLGMsZCl7Yz1jfHx7fTtkPWR8fHt9O3ZhciBlPXNqY2wuanNvbixmPWUuZSh7aXY6c2pjbC5yYW5kb20ucmFuZG9tV29yZHMoNCwwKX0sZS5kZWZhdWx0cyksZztlLmUoZixjKTtjPWYuYWRhdGE7InN0cmluZyI9PT10eXBlb2YgZi5zYWx0JiYoZi5zYWx0PXNqY2wuY29kZWMuYmFzZTY0LnRvQml0cyhmLnNhbHQpKTsic3RyaW5nIj09PXR5cGVvZiBmLml2JiYoZi5pdj1zamNsLmNvZGVjLmJhc2U2NC50b0JpdHMoZi5pdikpOyghc2pjbC5tb2RlW2YubW9kZV18fCFzamNsLmNpcGhlcltmLmNpcGhlcl18fCJzdHJpbmciPT09dHlwZW9mIGEmJjEwMD49Zi5pdGVyfHw2NCE9PWYudHMmJjk2IT09Zi50cyYmMTI4IT09Zi50c3x8MTI4IT09Zi5rcyYmMTkyIT09Zi5rcyYmMHgxMDAhPT1mLmtzfHwyPmYuaXYubGVuZ3RofHw0PApmLml2Lmxlbmd0aCkmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImpzb24gZW5jcnlwdDogaW52YWxpZCBwYXJhbWV0ZXJzIikpOyJzdHJpbmciPT09dHlwZW9mIGE/KGc9c2pjbC5taXNjLmNhY2hlZFBia2RmMihhLGYpLGE9Zy5rZXkuc2xpY2UoMCxmLmtzLzMyKSxmLnNhbHQ9Zy5zYWx0KTpzamNsLmVjYyYmYSBpbnN0YW5jZW9mIHNqY2wuZWNjLmVsR2FtYWwucHVibGljS2V5JiYoZz1hLmtlbSgpLGYua2VtdGFnPWcudGFnLGE9Zy5rZXkuc2xpY2UoMCxmLmtzLzMyKSk7InN0cmluZyI9PT10eXBlb2YgYiYmKGI9c2pjbC5jb2RlYy51dGY4U3RyaW5nLnRvQml0cyhiKSk7InN0cmluZyI9PT10eXBlb2YgYyYmKGYuYWRhdGE9Yz1zamNsLmNvZGVjLnV0ZjhTdHJpbmcudG9CaXRzKGMpKTtnPW5ldyBzamNsLmNpcGhlcltmLmNpcGhlcl0oYSk7ZS5lKGQsZik7ZC5rZXk9YTtmLmN0PXNqY2wubW9kZVtmLm1vZGVdLmVuY3J5cHQoZyxiLGYuaXYsYyxmLnRzKTtyZXR1cm4gZn0sCmVuY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9c2pjbC5qc29uLGY9ZS5ZLmFwcGx5KGUsYXJndW1lbnRzKTtyZXR1cm4gZS5lbmNvZGUoZil9LFg6ZnVuY3Rpb24oYSxiLGMsZCl7Yz1jfHx7fTtkPWR8fHt9O3ZhciBlPXNqY2wuanNvbjtiPWUuZShlLmUoZS5lKHt9LGUuZGVmYXVsdHMpLGIpLGMsITApO3ZhciBmLGc7Zj1iLmFkYXRhOyJzdHJpbmciPT09dHlwZW9mIGIuc2FsdCYmKGIuc2FsdD1zamNsLmNvZGVjLmJhc2U2NC50b0JpdHMoYi5zYWx0KSk7InN0cmluZyI9PT10eXBlb2YgYi5pdiYmKGIuaXY9c2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGIuaXYpKTsoIXNqY2wubW9kZVtiLm1vZGVdfHwhc2pjbC5jaXBoZXJbYi5jaXBoZXJdfHwic3RyaW5nIj09PXR5cGVvZiBhJiYxMDA+PWIuaXRlcnx8NjQhPT1iLnRzJiY5NiE9PWIudHMmJjEyOCE9PWIudHN8fDEyOCE9PWIua3MmJjE5MiE9PWIua3MmJjB4MTAwIT09Yi5rc3x8IWIuaXZ8fDI+Yi5pdi5sZW5ndGh8fDQ8Yi5pdi5sZW5ndGgpJiYKcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgianNvbiBkZWNyeXB0OiBpbnZhbGlkIHBhcmFtZXRlcnMiKSk7InN0cmluZyI9PT10eXBlb2YgYT8oZz1zamNsLm1pc2MuY2FjaGVkUGJrZGYyKGEsYiksYT1nLmtleS5zbGljZSgwLGIua3MvMzIpLGIuc2FsdD1nLnNhbHQpOnNqY2wuZWNjJiZhIGluc3RhbmNlb2Ygc2pjbC5lY2MuZWxHYW1hbC5zZWNyZXRLZXkmJihhPWEudW5rZW0oc2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGIua2VtdGFnKSkuc2xpY2UoMCxiLmtzLzMyKSk7InN0cmluZyI9PT10eXBlb2YgZiYmKGY9c2pjbC5jb2RlYy51dGY4U3RyaW5nLnRvQml0cyhmKSk7Zz1uZXcgc2pjbC5jaXBoZXJbYi5jaXBoZXJdKGEpO2Y9c2pjbC5tb2RlW2IubW9kZV0uZGVjcnlwdChnLGIuY3QsYi5pdixmLGIudHMpO2UuZShkLGIpO2Qua2V5PWE7cmV0dXJuIDE9PT1jLnJhdz9mOnNqY2wuY29kZWMudXRmOFN0cmluZy5mcm9tQml0cyhmKX0sZGVjcnlwdDpmdW5jdGlvbihhLGIsCmMsZCl7dmFyIGU9c2pjbC5qc29uO3JldHVybiBlLlgoYSxlLmRlY29kZShiKSxjLGQpfSxlbmNvZGU6ZnVuY3Rpb24oYSl7dmFyIGIsYz0ieyIsZD0iIjtmb3IoYiBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYikpc3dpdGNoKGIubWF0Y2goL15bYS16MC05XSskL2kpfHxxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJqc29uIGVuY29kZTogaW52YWxpZCBwcm9wZXJ0eSBuYW1lIikpLGMrPWQrJyInK2IrJyI6JyxkPSIsIix0eXBlb2YgYVtiXSl7Y2FzZSAibnVtYmVyIjpjYXNlICJib29sZWFuIjpjKz1hW2JdO2JyZWFrO2Nhc2UgInN0cmluZyI6Yys9JyInK2VzY2FwZShhW2JdKSsnIic7YnJlYWs7Y2FzZSAib2JqZWN0IjpjKz0nIicrc2pjbC5jb2RlYy5iYXNlNjQuZnJvbUJpdHMoYVtiXSwwKSsnIic7YnJlYWs7ZGVmYXVsdDpxKG5ldyBzamNsLmV4Y2VwdGlvbi5idWcoImpzb24gZW5jb2RlOiB1bnN1cHBvcnRlZCB0eXBlIikpfXJldHVybiBjKyJ9In0sZGVjb2RlOmZ1bmN0aW9uKGEpe2E9CmEucmVwbGFjZSgvXHMvZywiIik7YS5tYXRjaCgvXlx7LipcfSQvKXx8cShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgianNvbiBkZWNvZGU6IHRoaXMgaXNuJ3QganNvbiEiKSk7YT1hLnJlcGxhY2UoL15ce3xcfSQvZywiIikuc3BsaXQoLywvKTt2YXIgYj17fSxjLGQ7Zm9yKGM9MDtjPGEubGVuZ3RoO2MrKykoZD1hW2NdLm1hdGNoKC9eXHMqKD86KFsiJ10/KShbYS16XVthLXowLTldKilcMSlccyo6XHMqKD86KC0/XGQrKXwiKFthLXowLTkrXC8lKl8uQD1cLV0qKSJ8KHRydWV8ZmFsc2UpKSQvaSkpfHxxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJqc29uIGRlY29kZTogdGhpcyBpc24ndCBqc29uISIpKSxkWzNdP2JbZFsyXV09cGFyc2VJbnQoZFszXSwxMCk6ZFs0XT9iW2RbMl1dPWRbMl0ubWF0Y2goL14oY3R8YWRhdGF8c2FsdHxpdikkLyk/c2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGRbNF0pOnVuZXNjYXBlKGRbNF0pOmRbNV0mJihiW2RbMl1dPSJ0cnVlIj09PQpkWzVdKTtyZXR1cm4gYn0sZTpmdW5jdGlvbihhLGIsYyl7YT09PXMmJihhPXt9KTtpZihiPT09cylyZXR1cm4gYTtmb3IodmFyIGQgaW4gYiliLmhhc093blByb3BlcnR5KGQpJiYoYyYmKGFbZF0hPT1zJiZhW2RdIT09YltkXSkmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoInJlcXVpcmVkIHBhcmFtZXRlciBvdmVycmlkZGVuIikpLGFbZF09YltkXSk7cmV0dXJuIGF9LGZhOmZ1bmN0aW9uKGEsYil7dmFyIGM9e30sZDtmb3IoZCBpbiBhKWEuaGFzT3duUHJvcGVydHkoZCkmJmFbZF0hPT1iW2RdJiYoY1tkXT1hW2RdKTtyZXR1cm4gY30sZWE6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fSxkO2ZvcihkPTA7ZDxiLmxlbmd0aDtkKyspYVtiW2RdXSE9PXMmJihjW2JbZF1dPWFbYltkXV0pO3JldHVybiBjfX07c2pjbC5lbmNyeXB0PXNqY2wuanNvbi5lbmNyeXB0O3NqY2wuZGVjcnlwdD1zamNsLmpzb24uZGVjcnlwdDtzamNsLm1pc2MuY2E9e307CnNqY2wubWlzYy5jYWNoZWRQYmtkZjI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1zamNsLm1pc2MuY2EsZDtiPWJ8fHt9O2Q9Yi5pdGVyfHwxRTM7Yz1jW2FdPWNbYV18fHt9O2Q9Y1tkXT1jW2RdfHx7Zmlyc3RTYWx0OmIuc2FsdCYmYi5zYWx0Lmxlbmd0aD9iLnNhbHQuc2xpY2UoMCk6c2pjbC5yYW5kb20ucmFuZG9tV29yZHMoMiwwKX07Yz1iLnNhbHQ9PT1zP2QuZmlyc3RTYWx0OmIuc2FsdDtkW2NdPWRbY118fHNqY2wubWlzYy5wYmtkZjIoYSxjLGIuaXRlcik7cmV0dXJue2tleTpkW2NdLnNsaWNlKDApLHNhbHQ6Yy5zbGljZSgwKX19OwoKfSx7ImNyeXB0byI6ODZ9XSwxNzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQovLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAovLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwovLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgovLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgptb2R1bGUuZXhwb3J0cyA9IFN0cmVhbTsKCnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCmluaGVyaXRzKFN0cmVhbSwgRUUpOwpTdHJlYW0uUmVhZGFibGUgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanMnKTsKU3RyZWFtLldyaXRhYmxlID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3dyaXRhYmxlLmpzJyk7ClN0cmVhbS5EdXBsZXggPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vZHVwbGV4LmpzJyk7ClN0cmVhbS5UcmFuc2Zvcm0gPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzJyk7ClN0cmVhbS5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcycpOwoKLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC40LngKU3RyZWFtLlN0cmVhbSA9IFN0cmVhbTsKCgoKLy8gb2xkLXN0eWxlIHN0cmVhbXMuICBOb3RlIHRoYXQgdGhlIHBpcGUgbWV0aG9kICh0aGUgb25seSByZWxldmFudAovLyBwYXJ0IG9mIHRoaXMgY2xhc3MpIGlzIG92ZXJyaWRkZW4gaW4gdGhlIFJlYWRhYmxlIGNsYXNzLgoKZnVuY3Rpb24gU3RyZWFtKCkgewogIEVFLmNhbGwodGhpcyk7Cn0KClN0cmVhbS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIG9wdGlvbnMpIHsKICB2YXIgc291cmNlID0gdGhpczsKCiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7CiAgICBpZiAoZGVzdC53cml0YWJsZSkgewogICAgICBpZiAoZmFsc2UgPT09IGRlc3Qud3JpdGUoY2h1bmspICYmIHNvdXJjZS5wYXVzZSkgewogICAgICAgIHNvdXJjZS5wYXVzZSgpOwogICAgICB9CiAgICB9CiAgfQoKICBzb3VyY2Uub24oJ2RhdGEnLCBvbmRhdGEpOwoKICBmdW5jdGlvbiBvbmRyYWluKCkgewogICAgaWYgKHNvdXJjZS5yZWFkYWJsZSAmJiBzb3VyY2UucmVzdW1lKSB7CiAgICAgIHNvdXJjZS5yZXN1bWUoKTsKICAgIH0KICB9CgogIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7CgogIC8vIElmIHRoZSAnZW5kJyBvcHRpb24gaXMgbm90IHN1cHBsaWVkLCBkZXN0LmVuZCgpIHdpbGwgYmUgY2FsbGVkIHdoZW4KICAvLyBzb3VyY2UgZ2V0cyB0aGUgJ2VuZCcgb3IgJ2Nsb3NlJyBldmVudHMuICBPbmx5IGRlc3QuZW5kKCkgb25jZS4KICBpZiAoIWRlc3QuX2lzU3RkaW8gJiYgKCFvcHRpb25zIHx8IG9wdGlvbnMuZW5kICE9PSBmYWxzZSkpIHsKICAgIHNvdXJjZS5vbignZW5kJywgb25lbmQpOwogICAgc291cmNlLm9uKCdjbG9zZScsIG9uY2xvc2UpOwogIH0KCiAgdmFyIGRpZE9uRW5kID0gZmFsc2U7CiAgZnVuY3Rpb24gb25lbmQoKSB7CiAgICBpZiAoZGlkT25FbmQpIHJldHVybjsKICAgIGRpZE9uRW5kID0gdHJ1ZTsKCiAgICBkZXN0LmVuZCgpOwogIH0KCgogIGZ1bmN0aW9uIG9uY2xvc2UoKSB7CiAgICBpZiAoZGlkT25FbmQpIHJldHVybjsKICAgIGRpZE9uRW5kID0gdHJ1ZTsKCiAgICBpZiAodHlwZW9mIGRlc3QuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgZGVzdC5kZXN0cm95KCk7CiAgfQoKICAvLyBkb24ndCBsZWF2ZSBkYW5nbGluZyBwaXBlcyB3aGVuIHRoZXJlIGFyZSBlcnJvcnMuCiAgZnVuY3Rpb24gb25lcnJvcihlcikgewogICAgY2xlYW51cCgpOwogICAgaWYgKEVFLmxpc3RlbmVyQ291bnQodGhpcywgJ2Vycm9yJykgPT09IDApIHsKICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCBzdHJlYW0gZXJyb3IgaW4gcGlwZS4KICAgIH0KICB9CgogIHNvdXJjZS5vbignZXJyb3InLCBvbmVycm9yKTsKICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpOwoKICAvLyByZW1vdmUgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMgdGhhdCB3ZXJlIGFkZGVkLgogIGZ1bmN0aW9uIGNsZWFudXAoKSB7CiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTsKCiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTsKICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTsKCiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpOwoKICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7CiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7CgogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTsKICB9CgogIHNvdXJjZS5vbignZW5kJywgY2xlYW51cCk7CiAgc291cmNlLm9uKCdjbG9zZScsIGNsZWFudXApOwoKICBkZXN0Lm9uKCdjbG9zZScsIGNsZWFudXApOwoKICBkZXN0LmVtaXQoJ3BpcGUnLCBzb3VyY2UpOwoKICAvLyBBbGxvdyBmb3IgdW5peC1saWtlIHVzYWdlOiBBLnBpcGUoQikucGlwZShDKQogIHJldHVybiBkZXN0Owp9OwoKfSx7ImV2ZW50cyI6NzIsImluaGVyaXRzIjoxMjgsInJlYWRhYmxlLXN0cmVhbS9kdXBsZXguanMiOjE0NywicmVhZGFibGUtc3RyZWFtL3Bhc3N0aHJvdWdoLmpzIjoxNTQsInJlYWRhYmxlLXN0cmVhbS9yZWFkYWJsZS5qcyI6MTU1LCJyZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzIjoxNTYsInJlYWRhYmxlLXN0cmVhbS93cml0YWJsZS5qcyI6MTU3fV0sMTcxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuCi8vCi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKLy8gIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwovLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQKLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlCi8vIGZvbGxvd2luZyBjb25kaXRpb25zOgovLwovLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZAovLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KLy8KLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MKLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgovLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOCi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLAovLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRQovLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoKdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKCnZhciBpc0J1ZmZlckVuY29kaW5nID0gQnVmZmVyLmlzRW5jb2RpbmcKICB8fCBmdW5jdGlvbihlbmNvZGluZykgewogICAgICAgc3dpdGNoIChlbmNvZGluZyAmJiBlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgIGNhc2UgJ2hleCc6IGNhc2UgJ3V0ZjgnOiBjYXNlICd1dGYtOCc6IGNhc2UgJ2FzY2lpJzogY2FzZSAnYmluYXJ5JzogY2FzZSAnYmFzZTY0JzogY2FzZSAndWNzMic6IGNhc2UgJ3Vjcy0yJzogY2FzZSAndXRmMTZsZSc6IGNhc2UgJ3V0Zi0xNmxlJzogY2FzZSAncmF3JzogcmV0dXJuIHRydWU7CiAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTsKICAgICAgIH0KICAgICB9CgoKZnVuY3Rpb24gYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpIHsKICBpZiAoZW5jb2RpbmcgJiYgIWlzQnVmZmVyRW5jb2RpbmcoZW5jb2RpbmcpKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZyk7CiAgfQp9CgovLyBTdHJpbmdEZWNvZGVyIHByb3ZpZGVzIGFuIGludGVyZmFjZSBmb3IgZWZmaWNpZW50bHkgc3BsaXR0aW5nIGEgc2VyaWVzIG9mCi8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZQovLyBjaGFyYWN0ZXJzLiBDRVNVLTggaXMgaGFuZGxlZCBhcyBwYXJ0IG9mIHRoZSBVVEYtOCBlbmNvZGluZy4KLy8KLy8gQFRPRE8gSGFuZGxpbmcgYWxsIGVuY29kaW5ncyBpbnNpZGUgYSBzaW5nbGUgb2JqZWN0IG1ha2VzIGl0IHZlcnkgZGlmZmljdWx0Ci8vIHRvIHJlYXNvbiBhYm91dCB0aGlzIGNvZGUsIHNvIGl0IHNob3VsZCBiZSBzcGxpdCB1cCBpbiB0aGUgZnV0dXJlLgovLyBAVE9ETyBUaGVyZSBzaG91bGQgYmUgYSB1dGY4LXN0cmljdCBlbmNvZGluZyB0aGF0IHJlamVjdHMgaW52YWxpZCBVVEYtOCBjb2RlCi8vIHBvaW50cyBhcyB1c2VkIGJ5IENFU1UtOC4KdmFyIFN0cmluZ0RlY29kZXIgPSBleHBvcnRzLlN0cmluZ0RlY29kZXIgPSBmdW5jdGlvbihlbmNvZGluZykgewogIHRoaXMuZW5jb2RpbmcgPSAoZW5jb2RpbmcgfHwgJ3V0ZjgnKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1stX10vLCAnJyk7CiAgYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpOwogIHN3aXRjaCAodGhpcy5lbmNvZGluZykgewogICAgY2FzZSAndXRmOCc6CiAgICAgIC8vIENFU1UtOCByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMy1ieXRlcwogICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAzOwogICAgICBicmVhazsKICAgIGNhc2UgJ3VjczInOgogICAgY2FzZSAndXRmMTZsZSc6CiAgICAgIC8vIFVURi0xNiByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMi1ieXRlcwogICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAyOwogICAgICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyID0gdXRmMTZEZXRlY3RJbmNvbXBsZXRlQ2hhcjsKICAgICAgYnJlYWs7CiAgICBjYXNlICdiYXNlNjQnOgogICAgICAvLyBCYXNlLTY0IHN0b3JlcyAzIGJ5dGVzIGluIDQgY2hhcnMsIGFuZCBwYWRzIHRoZSByZW1haW5kZXIuCiAgICAgIHRoaXMuc3Vycm9nYXRlU2l6ZSA9IDM7CiAgICAgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcjsKICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICB0aGlzLndyaXRlID0gcGFzc1Rocm91Z2hXcml0ZTsKICAgICAgcmV0dXJuOwogIH0KCiAgLy8gRW5vdWdoIHNwYWNlIHRvIHN0b3JlIGFsbCBieXRlcyBvZiBhIHNpbmdsZSBjaGFyYWN0ZXIuIFVURi04IG5lZWRzIDQKICAvLyBieXRlcywgYnV0IENFU1UtOCBtYXkgcmVxdWlyZSB1cCB0byA2ICgzIGJ5dGVzIHBlciBzdXJyb2dhdGUpLgogIHRoaXMuY2hhckJ1ZmZlciA9IG5ldyBCdWZmZXIoNik7CiAgLy8gTnVtYmVyIG9mIGJ5dGVzIHJlY2VpdmVkIGZvciB0aGUgY3VycmVudCBpbmNvbXBsZXRlIG11bHRpLWJ5dGUgY2hhcmFjdGVyLgogIHRoaXMuY2hhclJlY2VpdmVkID0gMDsKICAvLyBOdW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgZm9yIHRoZSBjdXJyZW50IGluY29tcGxldGUgbXVsdGktYnl0ZSBjaGFyYWN0ZXIuCiAgdGhpcy5jaGFyTGVuZ3RoID0gMDsKfTsKCgovLyB3cml0ZSBkZWNvZGVzIHRoZSBnaXZlbiBidWZmZXIgYW5kIHJldHVybnMgaXQgYXMgSlMgc3RyaW5nIHRoYXQgaXMKLy8gZ3VhcmFudGVlZCB0byBub3QgY29udGFpbiBhbnkgcGFydGlhbCBtdWx0aS1ieXRlIGNoYXJhY3RlcnMuIEFueSBwYXJ0aWFsCi8vIGNoYXJhY3RlciBmb3VuZCBhdCB0aGUgZW5kIG9mIHRoZSBidWZmZXIgaXMgYnVmZmVyZWQgdXAsIGFuZCB3aWxsIGJlCi8vIHJldHVybmVkIHdoZW4gY2FsbGluZyB3cml0ZSBhZ2FpbiB3aXRoIHRoZSByZW1haW5pbmcgYnl0ZXMuCi8vCi8vIE5vdGU6IENvbnZlcnRpbmcgYSBCdWZmZXIgY29udGFpbmluZyBhbiBvcnBoYW4gc3Vycm9nYXRlIHRvIGEgU3RyaW5nCi8vIGN1cnJlbnRseSB3b3JrcywgYnV0IGNvbnZlcnRpbmcgYSBTdHJpbmcgdG8gYSBCdWZmZXIgKHZpYSBgbmV3IEJ1ZmZlcmAsIG9yCi8vIEJ1ZmZlciN3cml0ZSkgd2lsbCByZXBsYWNlIGluY29tcGxldGUgc3Vycm9nYXRlcyB3aXRoIHRoZSB1bmljb2RlCi8vIHJlcGxhY2VtZW50IGNoYXJhY3Rlci4gU2VlIGh0dHBzOi8vY29kZXJldmlldy5jaHJvbWl1bS5vcmcvMTIxMTczMDA5LyAuClN0cmluZ0RlY29kZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oYnVmZmVyKSB7CiAgdmFyIGNoYXJTdHIgPSAnJzsKICAvLyBpZiBvdXIgbGFzdCB3cml0ZSBlbmRlZCB3aXRoIGFuIGluY29tcGxldGUgbXVsdGlieXRlIGNoYXJhY3RlcgogIHdoaWxlICh0aGlzLmNoYXJMZW5ndGgpIHsKICAgIC8vIGRldGVybWluZSBob3cgbWFueSByZW1haW5pbmcgYnl0ZXMgdGhpcyBidWZmZXIgaGFzIHRvIG9mZmVyIGZvciB0aGlzIGNoYXIKICAgIHZhciBhdmFpbGFibGUgPSAoYnVmZmVyLmxlbmd0aCA+PSB0aGlzLmNoYXJMZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCkgPwogICAgICAgIHRoaXMuY2hhckxlbmd0aCAtIHRoaXMuY2hhclJlY2VpdmVkIDoKICAgICAgICBidWZmZXIubGVuZ3RoOwoKICAgIC8vIGFkZCB0aGUgbmV3IGJ5dGVzIHRvIHRoZSBjaGFyIGJ1ZmZlcgogICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCB0aGlzLmNoYXJSZWNlaXZlZCwgMCwgYXZhaWxhYmxlKTsKICAgIHRoaXMuY2hhclJlY2VpdmVkICs9IGF2YWlsYWJsZTsKCiAgICBpZiAodGhpcy5jaGFyUmVjZWl2ZWQgPCB0aGlzLmNoYXJMZW5ndGgpIHsKICAgICAgLy8gc3RpbGwgbm90IGVub3VnaCBjaGFycyBpbiB0aGlzIGJ1ZmZlcj8gd2FpdCBmb3IgbW9yZSAuLi4KICAgICAgcmV0dXJuICcnOwogICAgfQoKICAgIC8vIHJlbW92ZSBieXRlcyBiZWxvbmdpbmcgdG8gdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGZyb20gdGhlIGJ1ZmZlcgogICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGF2YWlsYWJsZSwgYnVmZmVyLmxlbmd0aCk7CgogICAgLy8gZ2V0IHRoZSBjaGFyYWN0ZXIgdGhhdCB3YXMgc3BsaXQKICAgIGNoYXJTdHIgPSB0aGlzLmNoYXJCdWZmZXIuc2xpY2UoMCwgdGhpcy5jaGFyTGVuZ3RoKS50b1N0cmluZyh0aGlzLmVuY29kaW5nKTsKCiAgICAvLyBDRVNVLTg6IGxlYWQgc3Vycm9nYXRlIChEODAwLURCRkYpIGlzIGFsc28gdGhlIGluY29tcGxldGUgY2hhcmFjdGVyCiAgICB2YXIgY2hhckNvZGUgPSBjaGFyU3RyLmNoYXJDb2RlQXQoY2hhclN0ci5sZW5ndGggLSAxKTsKICAgIGlmIChjaGFyQ29kZSA+PSAweEQ4MDAgJiYgY2hhckNvZGUgPD0gMHhEQkZGKSB7CiAgICAgIHRoaXMuY2hhckxlbmd0aCArPSB0aGlzLnN1cnJvZ2F0ZVNpemU7CiAgICAgIGNoYXJTdHIgPSAnJzsKICAgICAgY29udGludWU7CiAgICB9CiAgICB0aGlzLmNoYXJSZWNlaXZlZCA9IHRoaXMuY2hhckxlbmd0aCA9IDA7CgogICAgLy8gaWYgdGhlcmUgYXJlIG5vIG1vcmUgYnl0ZXMgaW4gdGhpcyBidWZmZXIsIGp1c3QgZW1pdCBvdXIgY2hhcgogICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIGNoYXJTdHI7CiAgICB9CiAgICBicmVhazsKICB9CgogIC8vIGRldGVybWluZSBhbmQgc2V0IGNoYXJMZW5ndGggLyBjaGFyUmVjZWl2ZWQKICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcik7CgogIHZhciBlbmQgPSBidWZmZXIubGVuZ3RoOwogIGlmICh0aGlzLmNoYXJMZW5ndGgpIHsKICAgIC8vIGJ1ZmZlciB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXIgYnl0ZXMgd2UgZ290CiAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIDAsIGJ1ZmZlci5sZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCwgZW5kKTsKICAgIGVuZCAtPSB0aGlzLmNoYXJSZWNlaXZlZDsKICB9CgogIGNoYXJTdHIgKz0gYnVmZmVyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsIDAsIGVuZCk7CgogIHZhciBlbmQgPSBjaGFyU3RyLmxlbmd0aCAtIDE7CiAgdmFyIGNoYXJDb2RlID0gY2hhclN0ci5jaGFyQ29kZUF0KGVuZCk7CiAgLy8gQ0VTVS04OiBsZWFkIHN1cnJvZ2F0ZSAoRDgwMC1EQkZGKSBpcyBhbHNvIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlcgogIGlmIChjaGFyQ29kZSA+PSAweEQ4MDAgJiYgY2hhckNvZGUgPD0gMHhEQkZGKSB7CiAgICB2YXIgc2l6ZSA9IHRoaXMuc3Vycm9nYXRlU2l6ZTsKICAgIHRoaXMuY2hhckxlbmd0aCArPSBzaXplOwogICAgdGhpcy5jaGFyUmVjZWl2ZWQgKz0gc2l6ZTsKICAgIHRoaXMuY2hhckJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgc2l6ZSwgMCwgc2l6ZSk7CiAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIDAsIDAsIHNpemUpOwogICAgcmV0dXJuIGNoYXJTdHIuc3Vic3RyaW5nKDAsIGVuZCk7CiAgfQoKICAvLyBvciBqdXN0IGVtaXQgdGhlIGNoYXJTdHIKICByZXR1cm4gY2hhclN0cjsKfTsKCi8vIGRldGVjdEluY29tcGxldGVDaGFyIGRldGVybWluZXMgaWYgdGhlcmUgaXMgYW4gaW5jb21wbGV0ZSBVVEYtOCBjaGFyYWN0ZXIgYXQKLy8gdGhlIGVuZCBvZiB0aGUgZ2l2ZW4gYnVmZmVyLiBJZiBzbywgaXQgc2V0cyB0aGlzLmNoYXJMZW5ndGggdG8gdGhlIGJ5dGUKLy8gbGVuZ3RoIHRoYXQgY2hhcmFjdGVyLCBhbmQgc2V0cyB0aGlzLmNoYXJSZWNlaXZlZCB0byB0aGUgbnVtYmVyIG9mIGJ5dGVzCi8vIHRoYXQgYXJlIGF2YWlsYWJsZSBmb3IgdGhpcyBjaGFyYWN0ZXIuClN0cmluZ0RlY29kZXIucHJvdG90eXBlLmRldGVjdEluY29tcGxldGVDaGFyID0gZnVuY3Rpb24oYnVmZmVyKSB7CiAgLy8gZGV0ZXJtaW5lIGhvdyBtYW55IGJ5dGVzIHdlIGhhdmUgdG8gY2hlY2sgYXQgdGhlIGVuZCBvZiB0aGlzIGJ1ZmZlcgogIHZhciBpID0gKGJ1ZmZlci5sZW5ndGggPj0gMykgPyAzIDogYnVmZmVyLmxlbmd0aDsKCiAgLy8gRmlndXJlIG91dCBpZiBvbmUgb2YgdGhlIGxhc3QgaSBieXRlcyBvZiBvdXIgYnVmZmVyIGFubm91bmNlcyBhbgogIC8vIGluY29tcGxldGUgY2hhci4KICBmb3IgKDsgaSA+IDA7IGktLSkgewogICAgdmFyIGMgPSBidWZmZXJbYnVmZmVyLmxlbmd0aCAtIGldOwoKICAgIC8vIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VURi04I0Rlc2NyaXB0aW9uCgogICAgLy8gMTEwWFhYWFgKICAgIGlmIChpID09IDEgJiYgYyA+PiA1ID09IDB4MDYpIHsKICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMjsKICAgICAgYnJlYWs7CiAgICB9CgogICAgLy8gMTExMFhYWFgKICAgIGlmIChpIDw9IDIgJiYgYyA+PiA0ID09IDB4MEUpIHsKICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMzsKICAgICAgYnJlYWs7CiAgICB9CgogICAgLy8gMTExMTBYWFgKICAgIGlmIChpIDw9IDMgJiYgYyA+PiAzID09IDB4MUUpIHsKICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gNDsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHRoaXMuY2hhclJlY2VpdmVkID0gaTsKfTsKClN0cmluZ0RlY29kZXIucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGJ1ZmZlcikgewogIHZhciByZXMgPSAnJzsKICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGgpCiAgICByZXMgPSB0aGlzLndyaXRlKGJ1ZmZlcik7CgogIGlmICh0aGlzLmNoYXJSZWNlaXZlZCkgewogICAgdmFyIGNyID0gdGhpcy5jaGFyUmVjZWl2ZWQ7CiAgICB2YXIgYnVmID0gdGhpcy5jaGFyQnVmZmVyOwogICAgdmFyIGVuYyA9IHRoaXMuZW5jb2Rpbmc7CiAgICByZXMgKz0gYnVmLnNsaWNlKDAsIGNyKS50b1N0cmluZyhlbmMpOwogIH0KCiAgcmV0dXJuIHJlczsKfTsKCmZ1bmN0aW9uIHBhc3NUaHJvdWdoV3JpdGUoYnVmZmVyKSB7CiAgcmV0dXJuIGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nKTsKfQoKZnVuY3Rpb24gdXRmMTZEZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpIHsKICB0aGlzLmNoYXJSZWNlaXZlZCA9IGJ1ZmZlci5sZW5ndGggJSAyOwogIHRoaXMuY2hhckxlbmd0aCA9IHRoaXMuY2hhclJlY2VpdmVkID8gMiA6IDA7Cn0KCmZ1bmN0aW9uIGJhc2U2NERldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcikgewogIHRoaXMuY2hhclJlY2VpdmVkID0gYnVmZmVyLmxlbmd0aCAlIDM7CiAgdGhpcy5jaGFyTGVuZ3RoID0gdGhpcy5jaGFyUmVjZWl2ZWQgPyAzIDogMDsKfQoKfSx7ImJ1ZmZlciI6NzB9XSwxNzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKCmZ1bmN0aW9uIFRmVHlwZUVycm9yICh0eXBlLCB2YWx1ZSkgewogIHRoaXMudGZFcnJvciA9IEVycm9yLmNhbGwodGhpcykKCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKSB7CiAgICB0aGlzLm1lc3NhZ2UgPSB0eXBlCiAgfSBlbHNlIHsKICAgIHRoaXMudGZUeXBlID0gdHlwZQogICAgdGhpcy50ZlZhbHVlID0gdmFsdWUKCiAgICB2YXIgbWVzc2FnZQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdtZXNzYWdlJywgewogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAobWVzc2FnZSkgcmV0dXJuIG1lc3NhZ2UKICAgICAgICBtZXNzYWdlID0gdGZFcnJvclN0cmluZyh0eXBlLCB2YWx1ZSkKCiAgICAgICAgcmV0dXJuIG1lc3NhZ2UKICAgICAgfQogICAgfSkKICB9Cn0KCmluaGVyaXRzKFRmVHlwZUVycm9yLCBFcnJvcikKT2JqZWN0LmRlZmluZVByb3BlcnR5KFRmVHlwZUVycm9yLCAnc3RhY2snLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy50ZkVycm9yLnN0YWNrIH0gfSkKCmZ1bmN0aW9uIFRmUHJvcGVydHlUeXBlRXJyb3IgKHR5cGUsIHByb3BlcnR5LCB2YWx1ZSwgZXJyb3IpIHsKICB0aGlzLnRmRXJyb3IgPSBlcnJvciB8fCBFcnJvci5jYWxsKHRoaXMpCiAgdGhpcy50ZlByb3BlcnR5ID0gcHJvcGVydHkKICB0aGlzLnRmVHlwZSA9IHR5cGUKICB0aGlzLnRmVmFsdWUgPSB2YWx1ZQoKICB2YXIgbWVzc2FnZQogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbWVzc2FnZScsIHsKICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICBpZiAobWVzc2FnZSkgcmV0dXJuIG1lc3NhZ2UKICAgICAgaWYgKHR5cGUpIHsKICAgICAgICBtZXNzYWdlID0gdGZQcm9wZXJ0eUVycm9yU3RyaW5nKHR5cGUsIHByb3BlcnR5LCB2YWx1ZSkKICAgICAgfSBlbHNlIHsKICAgICAgICBtZXNzYWdlID0gJ1VuZXhwZWN0ZWQgcHJvcGVydHkgIicgKyBwcm9wZXJ0eSArICciJwogICAgICB9CgogICAgICByZXR1cm4gbWVzc2FnZQogICAgfQogIH0pCn0KCmluaGVyaXRzKFRmUHJvcGVydHlUeXBlRXJyb3IsIEVycm9yKQpPYmplY3QuZGVmaW5lUHJvcGVydHkoVGZQcm9wZXJ0eVR5cGVFcnJvciwgJ3N0YWNrJywgeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMudGZFcnJvci5zdGFjayB9IH0pCgpUZlByb3BlcnR5VHlwZUVycm9yLnByb3RvdHlwZS5hc0NoaWxkT2YgPSBmdW5jdGlvbiAocHJvcGVydHkpIHsKICByZXR1cm4gbmV3IFRmUHJvcGVydHlUeXBlRXJyb3IodGhpcy50ZlR5cGUsIHByb3BlcnR5ICsgJy4nICsgdGhpcy50ZlByb3BlcnR5LCB0aGlzLnRmVmFsdWUsIHRoaXMudGZFcnJvcikKfQoKZnVuY3Rpb24gZ2V0RnVuY3Rpb25OYW1lIChmbikgewogIHJldHVybiBmbi5uYW1lIHx8IGZuLnRvU3RyaW5nKCkubWF0Y2goL2Z1bmN0aW9uICguKj8pXHMqXCgvKVsxXQp9CgpmdW5jdGlvbiBnZXRWYWx1ZVR5cGVOYW1lICh2YWx1ZSkgewogIGlmIChuYXRpdmVUeXBlcy5OdWxsKHZhbHVlKSkgcmV0dXJuICcnCgogIHJldHVybiBnZXRGdW5jdGlvbk5hbWUodmFsdWUuY29uc3RydWN0b3IpCn0KCmZ1bmN0aW9uIGdldFZhbHVlICh2YWx1ZSkgewogIGlmIChuYXRpdmVUeXBlcy5GdW5jdGlvbih2YWx1ZSkpIHJldHVybiAnJwogIGlmIChuYXRpdmVUeXBlcy5TdHJpbmcodmFsdWUpKSByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpCiAgaWYgKHZhbHVlICYmIG5hdGl2ZVR5cGVzLk9iamVjdCh2YWx1ZSkpIHJldHVybiAnJwoKICByZXR1cm4gdmFsdWUKfQoKZnVuY3Rpb24gdGZKU09OICh0eXBlKSB7CiAgaWYgKG5hdGl2ZVR5cGVzLkZ1bmN0aW9uKHR5cGUpKSByZXR1cm4gdHlwZS50b0pTT04gPyB0eXBlLnRvSlNPTigpIDogZ2V0RnVuY3Rpb25OYW1lKHR5cGUpCiAgaWYgKG5hdGl2ZVR5cGVzLkFycmF5KHR5cGUpKSByZXR1cm4gJ0FycmF5JwogIGlmICh0eXBlICYmIG5hdGl2ZVR5cGVzLk9iamVjdCh0eXBlKSkgcmV0dXJuICdPYmplY3QnCgogIHJldHVybiB0eXBlIHx8ICcnCn0KCmZ1bmN0aW9uIHN0ZkpTT04gKHR5cGUpIHsKICB0eXBlID0gdGZKU09OKHR5cGUpCgogIHJldHVybiBuYXRpdmVUeXBlcy5PYmplY3QodHlwZSkgPyBKU09OLnN0cmluZ2lmeSh0eXBlKSA6IHR5cGUKfQoKZnVuY3Rpb24gdGZFcnJvclN0cmluZyAodHlwZSwgdmFsdWUpIHsKICB2YXIgdmFsdWVUeXBlTmFtZSA9IGdldFZhbHVlVHlwZU5hbWUodmFsdWUpCiAgdmFyIHZhbHVlVmFsdWUgPSBnZXRWYWx1ZSh2YWx1ZSkKCiAgcmV0dXJuICdFeHBlY3RlZCAnICsgc3RmSlNPTih0eXBlKSArICcsIGdvdCcgKyAodmFsdWVUeXBlTmFtZSAhPT0gJycgPyAnICcgKyB2YWx1ZVR5cGVOYW1lIDogJycpICsgKHZhbHVlVmFsdWUgIT09ICcnID8gJyAnICsgdmFsdWVWYWx1ZSA6ICcnKQp9CgpmdW5jdGlvbiB0ZlByb3BlcnR5RXJyb3JTdHJpbmcgKHR5cGUsIG5hbWUsIHZhbHVlKSB7CiAgcmV0dXJuIHRmRXJyb3JTdHJpbmcoJ3Byb3BlcnR5IFwiJyArIHN0ZkpTT04obmFtZSkgKyAnXCIgb2YgdHlwZSAnICsgc3RmSlNPTih0eXBlKSwgdmFsdWUpCn0KCnZhciBuYXRpdmVUeXBlcyA9IHsKICBBcnJheTogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlLmNvbnN0cnVjdG9yID09PSBBcnJheSB9LAogIEJvb2xlYW46IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicgfSwKICBCdWZmZXI6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKHZhbHVlKSB9LAogIEZ1bmN0aW9uOiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyB9LAogIE51bGw6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCB9LAogIE51bWJlcjogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIH0sCiAgT2JqZWN0OiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgfSwKICBTdHJpbmc6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB9LAogICcnOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlIH0KfQoKdmFyIG90aGVyVHlwZXMgPSB7CiAgYXJyYXlPZjogZnVuY3Rpb24gYXJyYXlPZiAodHlwZSkgewogICAgZnVuY3Rpb24gYXJyYXlPZiAodmFsdWUsIHN0cmljdCkgewogICAgICBpZiAoIW5hdGl2ZVR5cGVzLkFycmF5KHZhbHVlKSkgcmV0dXJuIGZhbHNlCgogICAgICByZXR1cm4gdmFsdWUuZXZlcnkoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4gdHlwZWZvcmNlKHR5cGUsIHgsIHN0cmljdCwgYXJyYXlPZikKICAgICAgfSkKICAgIH0KICAgIGFycmF5T2YudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW3RmSlNPTih0eXBlKV0gfQoKICAgIHJldHVybiBhcnJheU9mCiAgfSwKCiAgbWF5YmU6IGZ1bmN0aW9uIG1heWJlICh0eXBlKSB7CiAgICBmdW5jdGlvbiBtYXliZSAodmFsdWUsIHN0cmljdCkgewogICAgICByZXR1cm4gbmF0aXZlVHlwZXMuTnVsbCh2YWx1ZSkgfHwgdHlwZWZvcmNlKHR5cGUsIHZhbHVlLCBzdHJpY3QsIG1heWJlKQogICAgfQogICAgbWF5YmUudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJz8nICsgc3RmSlNPTih0eXBlKSB9CgogICAgcmV0dXJuIG1heWJlCiAgfSwKCiAgb2JqZWN0OiBmdW5jdGlvbiBvYmplY3QgKHR5cGUpIHsKICAgIGZ1bmN0aW9uIG9iamVjdCAodmFsdWUsIHN0cmljdCkgewogICAgICBpZiAoIW5hdGl2ZVR5cGVzLk9iamVjdCh2YWx1ZSkpIHJldHVybiBmYWxzZQogICAgICBpZiAobmF0aXZlVHlwZXMuTnVsbCh2YWx1ZSkpIHJldHVybiBmYWxzZQoKICAgICAgdmFyIHByb3BlcnR5TmFtZQoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKHByb3BlcnR5TmFtZSBpbiB0eXBlKSB7CiAgICAgICAgICB2YXIgcHJvcGVydHlUeXBlID0gdHlwZVtwcm9wZXJ0eU5hbWVdCiAgICAgICAgICB2YXIgcHJvcGVydHlWYWx1ZSA9IHZhbHVlW3Byb3BlcnR5TmFtZV0KCiAgICAgICAgICB0eXBlZm9yY2UocHJvcGVydHlUeXBlLCBwcm9wZXJ0eVZhbHVlLCBzdHJpY3QpCiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBUZlByb3BlcnR5VHlwZUVycm9yKSB7CiAgICAgICAgICB0aHJvdyBlLmFzQ2hpbGRPZihwcm9wZXJ0eU5hbWUpCiAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgVGZUeXBlRXJyb3IpIHsKICAgICAgICAgIHRocm93IG5ldyBUZlByb3BlcnR5VHlwZUVycm9yKGUudGZUeXBlLCBwcm9wZXJ0eU5hbWUsIGUudGZWYWx1ZSwgZS50ZkVycm9yKQogICAgICAgIH0KCiAgICAgICAgdGhyb3cgZQogICAgICB9CgogICAgICBpZiAoc3RyaWN0KSB7CiAgICAgICAgZm9yIChwcm9wZXJ0eU5hbWUgaW4gdmFsdWUpIHsKICAgICAgICAgIGlmICh0eXBlW3Byb3BlcnR5TmFtZV0pIGNvbnRpbnVlCgogICAgICAgICAgdGhyb3cgbmV3IFRmUHJvcGVydHlUeXBlRXJyb3IodW5kZWZpbmVkLCBwcm9wZXJ0eU5hbWUpCiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgb2JqZWN0LnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRmSlNPTih0eXBlKSB9CgogICAgcmV0dXJuIG9iamVjdAogIH0sCgogIG1hcDogZnVuY3Rpb24gbWFwIChwcm9wZXJ0eVR5cGUsIHByb3BlcnR5S2V5VHlwZSkgewogICAgZnVuY3Rpb24gbWFwICh2YWx1ZSwgc3RyaWN0KSB7CiAgICAgIHR5cGVmb3JjZShuYXRpdmVUeXBlcy5PYmplY3QsIHZhbHVlLCBzdHJpY3QpCiAgICAgIGlmIChuYXRpdmVUeXBlcy5OdWxsKHZhbHVlKSkgcmV0dXJuIGZhbHNlCgogICAgICB2YXIgcHJvcGVydHlOYW1lCgogICAgICB0cnkgewogICAgICAgIGZvciAocHJvcGVydHlOYW1lIGluIHZhbHVlKSB7CiAgICAgICAgICBpZiAocHJvcGVydHlLZXlUeXBlKSB7CiAgICAgICAgICAgIHR5cGVmb3JjZShwcm9wZXJ0eUtleVR5cGUsIHByb3BlcnR5TmFtZSwgc3RyaWN0KQogICAgICAgICAgfQoKICAgICAgICAgIHZhciBwcm9wZXJ0eVZhbHVlID0gdmFsdWVbcHJvcGVydHlOYW1lXQogICAgICAgICAgdHlwZWZvcmNlKHByb3BlcnR5VHlwZSwgcHJvcGVydHlWYWx1ZSwgc3RyaWN0KQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGlmIChlIGluc3RhbmNlb2YgVGZQcm9wZXJ0eVR5cGVFcnJvcikgewogICAgICAgICAgdGhyb3cgZS5hc0NoaWxkT2YocHJvcGVydHlOYW1lKQogICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFRmVHlwZUVycm9yKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVGZQcm9wZXJ0eVR5cGVFcnJvcihlLnRmVHlwZSwgcHJvcGVydHlLZXlUeXBlIHx8IHByb3BlcnR5TmFtZSwgZS50ZlZhbHVlKQogICAgICAgIH0KCiAgICAgICAgdGhyb3cgZQogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIGlmIChwcm9wZXJ0eUtleVR5cGUpIHsKICAgICAgbWFwLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICd7JyArIHN0ZkpTT04ocHJvcGVydHlLZXlUeXBlKSArICc6ICcgKyBzdGZKU09OKHByb3BlcnR5VHlwZSkgKyAnfScgfQogICAgfSBlbHNlIHsKICAgICAgbWFwLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICd7JyArIHN0ZkpTT04ocHJvcGVydHlUeXBlKSArICd9JyB9CiAgICB9CgogICAgcmV0dXJuIG1hcAogIH0sCgogIG9uZU9mOiBmdW5jdGlvbiBvbmVPZiAoKSB7CiAgICB2YXIgdHlwZXMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykKCiAgICBmdW5jdGlvbiBvbmVPZiAodmFsdWUsIHN0cmljdCkgewogICAgICByZXR1cm4gdHlwZXMuc29tZShmdW5jdGlvbiAodHlwZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gdHlwZWZvcmNlKHR5cGUsIHZhbHVlLCBzdHJpY3QpCiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBUZlR5cGVFcnJvciB8fCBlIGluc3RhbmNlb2YgVGZQcm9wZXJ0eVR5cGVFcnJvcikgcmV0dXJuIGZhbHNlCgogICAgICAgICAgdGhyb3cgZQogICAgICAgIH0KICAgICAgfSkKICAgIH0KICAgIG9uZU9mLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHR5cGVzLm1hcChzdGZKU09OKS5qb2luKCd8JykgfQoKICAgIHJldHVybiBvbmVPZgogIH0sCgogIHF1YWNrc0xpa2U6IGZ1bmN0aW9uIHF1YWNrc0xpa2UgKHR5cGUpIHsKICAgIGZ1bmN0aW9uIHF1YWNrc0xpa2UgKHZhbHVlKSB7CiAgICAgIHJldHVybiB0eXBlID09PSBnZXRWYWx1ZVR5cGVOYW1lKHZhbHVlKQogICAgfQogICAgcXVhY2tzTGlrZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0eXBlIH0KCiAgICByZXR1cm4gcXVhY2tzTGlrZQogIH0sCgogIHR1cGxlOiBmdW5jdGlvbiB0dXBsZSAoKSB7CiAgICB2YXIgdHlwZXMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykKCiAgICBmdW5jdGlvbiB0dXBsZSAodmFsdWUsIHN0cmljdCkgewogICAgICByZXR1cm4gdHlwZXMuZXZlcnkoZnVuY3Rpb24gKHR5cGUsIGkpIHsKICAgICAgICByZXR1cm4gdHlwZWZvcmNlKHR5cGUsIHZhbHVlW2ldLCBzdHJpY3QpCiAgICAgIH0pCiAgICB9CiAgICB0dXBsZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnKCcgKyB0eXBlcy5tYXAoc3RmSlNPTikuam9pbignLCAnKSArICcpJyB9CgogICAgcmV0dXJuIHR1cGxlCiAgfSwKCiAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlIChleHBlY3RlZCkgewogICAgZnVuY3Rpb24gdmFsdWUgKGFjdHVhbCkgewogICAgICByZXR1cm4gYWN0dWFsID09PSBleHBlY3RlZAogICAgfQogICAgdmFsdWUudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZXhwZWN0ZWQgfQoKICAgIHJldHVybiB2YWx1ZQogIH0KfQoKZnVuY3Rpb24gY29tcGlsZSAodHlwZSkgewogIGlmIChuYXRpdmVUeXBlcy5TdHJpbmcodHlwZSkpIHsKICAgIGlmICh0eXBlWzBdID09PSAnPycpIHJldHVybiBvdGhlclR5cGVzLm1heWJlKGNvbXBpbGUodHlwZS5zbGljZSgxKSkpCgogICAgcmV0dXJuIG5hdGl2ZVR5cGVzW3R5cGVdIHx8IG90aGVyVHlwZXMucXVhY2tzTGlrZSh0eXBlKQogIH0gZWxzZSBpZiAodHlwZSAmJiBuYXRpdmVUeXBlcy5PYmplY3QodHlwZSkpIHsKICAgIGlmIChuYXRpdmVUeXBlcy5BcnJheSh0eXBlKSkgcmV0dXJuIG90aGVyVHlwZXMuYXJyYXlPZihjb21waWxlKHR5cGVbMF0pKQoKICAgIHZhciBjb21waWxlZCA9IHt9CgogICAgZm9yICh2YXIgcHJvcGVydHlOYW1lIGluIHR5cGUpIHsKICAgICAgY29tcGlsZWRbcHJvcGVydHlOYW1lXSA9IGNvbXBpbGUodHlwZVtwcm9wZXJ0eU5hbWVdKQogICAgfQoKICAgIHJldHVybiBvdGhlclR5cGVzLm9iamVjdChjb21waWxlZCkKICB9IGVsc2UgaWYgKG5hdGl2ZVR5cGVzLkZ1bmN0aW9uKHR5cGUpKSB7CiAgICByZXR1cm4gdHlwZQogIH0KCiAgcmV0dXJuIG90aGVyVHlwZXMudmFsdWUodHlwZSkKfQoKZnVuY3Rpb24gdHlwZWZvcmNlICh0eXBlLCB2YWx1ZSwgc3RyaWN0LCBzdXJyb2dhdGUpIHsKICBpZiAobmF0aXZlVHlwZXMuRnVuY3Rpb24odHlwZSkpIHsKICAgIGlmICh0eXBlKHZhbHVlLCBzdHJpY3QpKSByZXR1cm4gdHJ1ZQoKICAgIHRocm93IG5ldyBUZlR5cGVFcnJvcihzdXJyb2dhdGUgfHwgdHlwZSwgdmFsdWUpCiAgfQoKICAvLyBKSVQKICByZXR1cm4gdHlwZWZvcmNlKGNvbXBpbGUodHlwZSksIHZhbHVlLCBzdHJpY3QpCn0KCi8vIGFzc2lnbiBhbGwgdHlwZXMgdG8gdHlwZWZvcmNlIGZ1bmN0aW9uCnZhciB0eXBlTmFtZQpPYmplY3Qua2V5cyhuYXRpdmVUeXBlcykuZm9yRWFjaChmdW5jdGlvbiAodHlwZU5hbWUpIHsKICB2YXIgbmF0aXZlVHlwZSA9IG5hdGl2ZVR5cGVzW3R5cGVOYW1lXQogIG5hdGl2ZVR5cGUudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHlwZU5hbWUgfQoKICB0eXBlZm9yY2VbdHlwZU5hbWVdID0gbmF0aXZlVHlwZQp9KQoKZm9yICh0eXBlTmFtZSBpbiBvdGhlclR5cGVzKSB7CiAgdHlwZWZvcmNlW3R5cGVOYW1lXSA9IG90aGVyVHlwZXNbdHlwZU5hbWVdCn0KCm1vZHVsZS5leHBvcnRzID0gdHlwZWZvcmNlCm1vZHVsZS5leHBvcnRzLmNvbXBpbGUgPSBjb21waWxlCgovLyBleHBvcnQgRXJyb3Igb2JqZWN0cwptb2R1bGUuZXhwb3J0cy5UZlR5cGVFcnJvciA9IFRmVHlwZUVycm9yCm1vZHVsZS5leHBvcnRzLlRmUHJvcGVydHlUeXBlRXJyb3IgPSBUZlByb3BlcnR5VHlwZUVycm9yCgp9KS5jYWxsKHRoaXMseyJpc0J1ZmZlciI6cmVxdWlyZSgiLi4vaXMtYnVmZmVyL2luZGV4LmpzIil9KQp9LHsiLi4vaXMtYnVmZmVyL2luZGV4LmpzIjoxMjksImluaGVyaXRzIjoxMjh9XSwxNzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKHJvb3QpIHsKICAgInVzZSBzdHJpY3QiOwoKLyoqKioqIHVub3JtLmpzICoqKioqLwoKLyoKICogVW5pY29kZU5vcm1hbGl6ZXIgMS4wLjAKICogQ29weXJpZ2h0IChjKSAyMDA4IE1hdHN1emEKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpIGFuZCBHUEwgKEdQTC1MSUNFTlNFLnR4dCkgbGljZW5zZXMuCiAqICREYXRlOiAyMDA4LTA2LTA1IDE2OjQ0OjE3ICswMjAwIChUaHUsIDA1IEp1biAyMDA4KSAkCiAqICRSZXY6IDEzMzA5ICQKICovCgogICB2YXIgREVGQVVMVF9GRUFUVVJFID0gW251bGwsIDAsIHt9XTsKICAgdmFyIENBQ0hFX1RIUkVTSE9MRCA9IDEwOwogICB2YXIgU0Jhc2UgPSAweEFDMDAsIExCYXNlID0gMHgxMTAwLCBWQmFzZSA9IDB4MTE2MSwgVEJhc2UgPSAweDExQTcsIExDb3VudCA9IDE5LCBWQ291bnQgPSAyMSwgVENvdW50ID0gMjg7CiAgIHZhciBOQ291bnQgPSBWQ291bnQgKiBUQ291bnQ7IC8vIDU4OAogICB2YXIgU0NvdW50ID0gTENvdW50ICogTkNvdW50OyAvLyAxMTE3MgoKICAgdmFyIFVDaGFyID0gZnVuY3Rpb24oY3AsIGZlYXR1cmUpewogICAgICB0aGlzLmNvZGVwb2ludCA9IGNwOwogICAgICB0aGlzLmZlYXR1cmUgPSBmZWF0dXJlOwogICB9OwoKICAgLy8gU3RyYXRlZ2llcwogICB2YXIgY2FjaGUgPSB7fTsKICAgdmFyIGNhY2hlQ291bnRlciA9IFtdOwogICBmb3IgKHZhciBpID0gMDsgaSA8PSAweEZGOyArK2kpewogICAgICBjYWNoZUNvdW50ZXJbaV0gPSAwOwogICB9CgogICBmdW5jdGlvbiBmcm9tQ2FjaGUobmV4dCwgY3AsIG5lZWRGZWF0dXJlKXsKICAgICAgdmFyIHJldCA9IGNhY2hlW2NwXTsKICAgICAgaWYoIXJldCl7CiAgICAgICAgIHJldCA9IG5leHQoY3AsIG5lZWRGZWF0dXJlKTsKICAgICAgICAgaWYoISFyZXQuZmVhdHVyZSAmJiArK2NhY2hlQ291bnRlclsoY3AgPj4gOCkgJiAweEZGXSA+IENBQ0hFX1RIUkVTSE9MRCl7CiAgICAgICAgICAgIGNhY2hlW2NwXSA9IHJldDsKICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXQ7CiAgIH0KCiAgIGZ1bmN0aW9uIGZyb21EYXRhKG5leHQsIGNwLCBuZWVkRmVhdHVyZSl7CiAgICAgIHZhciBoYXNoID0gY3AgJiAweEZGMDA7CiAgICAgIHZhciBkdW5pdCA9IFVDaGFyLnVkYXRhW2hhc2hdIHx8IHt9OwogICAgICB2YXIgZiA9IGR1bml0W2NwXTsKICAgICAgcmV0dXJuIGYgPyBuZXcgVUNoYXIoY3AsIGYpIDogbmV3IFVDaGFyKGNwLCBERUZBVUxUX0ZFQVRVUkUpOwogICB9CiAgIGZ1bmN0aW9uIGZyb21DcE9ubHkobmV4dCwgY3AsIG5lZWRGZWF0dXJlKXsKICAgICAgcmV0dXJuICEhbmVlZEZlYXR1cmUgPyBuZXh0KGNwLCBuZWVkRmVhdHVyZSkgOiBuZXcgVUNoYXIoY3AsIG51bGwpOwogICB9CiAgIGZ1bmN0aW9uIGZyb21SdWxlQmFzZWRKYW1vKG5leHQsIGNwLCBuZWVkRmVhdHVyZSl7CiAgICAgIHZhciBqOwogICAgICBpZihjcCA8IExCYXNlIHx8IChMQmFzZSArIExDb3VudCA8PSBjcCAmJiBjcCA8IFNCYXNlKSB8fCAoU0Jhc2UgKyBTQ291bnQgPCBjcCkpewogICAgICAgICByZXR1cm4gbmV4dChjcCwgbmVlZEZlYXR1cmUpOwogICAgICB9CiAgICAgIGlmKExCYXNlIDw9IGNwICYmIGNwIDwgTEJhc2UgKyBMQ291bnQpewogICAgICAgICB2YXIgYyA9IHt9OwogICAgICAgICB2YXIgYmFzZSA9IChjcCAtIExCYXNlKSAqIFZDb3VudDsKICAgICAgICAgZm9yIChqID0gMDsgaiA8IFZDb3VudDsgKytqKXsKICAgICAgICAgICAgY1tWQmFzZSArIGpdID0gU0Jhc2UgKyBUQ291bnQgKiAoaiArIGJhc2UpOwogICAgICAgICB9CiAgICAgICAgIHJldHVybiBuZXcgVUNoYXIoY3AsIFssLGNdKTsKICAgICAgfQoKICAgICAgdmFyIFNJbmRleCA9IGNwIC0gU0Jhc2U7CiAgICAgIHZhciBUSW5kZXggPSBTSW5kZXggJSBUQ291bnQ7CiAgICAgIHZhciBmZWF0dXJlID0gW107CiAgICAgIGlmKFRJbmRleCAhPT0gMCl7CiAgICAgICAgIGZlYXR1cmVbMF0gPSBbU0Jhc2UgKyBTSW5kZXggLSBUSW5kZXgsIFRCYXNlICsgVEluZGV4XTsKICAgICAgfSBlbHNlIHsKICAgICAgICAgZmVhdHVyZVswXSA9IFtMQmFzZSArIE1hdGguZmxvb3IoU0luZGV4IC8gTkNvdW50KSwgVkJhc2UgKyBNYXRoLmZsb29yKChTSW5kZXggJSBOQ291bnQpIC8gVENvdW50KV07CiAgICAgICAgIGZlYXR1cmVbMl0gPSB7fTsKICAgICAgICAgZm9yIChqID0gMTsgaiA8IFRDb3VudDsgKytqKXsKICAgICAgICAgICAgZmVhdHVyZVsyXVtUQmFzZSArIGpdID0gY3AgKyBqOwogICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG5ldyBVQ2hhcihjcCwgZmVhdHVyZSk7CiAgIH0KICAgZnVuY3Rpb24gZnJvbUNwRmlsdGVyKG5leHQsIGNwLCBuZWVkRmVhdHVyZSl7CiAgICAgIHJldHVybiBjcCA8IDYwIHx8IDEzMzExIDwgY3AgJiYgY3AgPCA0MjYwNyA/IG5ldyBVQ2hhcihjcCwgREVGQVVMVF9GRUFUVVJFKSA6IG5leHQoY3AsIG5lZWRGZWF0dXJlKTsKICAgfQoKICAgdmFyIHN0cmF0ZWdpZXMgPSBbZnJvbUNwRmlsdGVyLCBmcm9tQ2FjaGUsIGZyb21DcE9ubHksIGZyb21SdWxlQmFzZWRKYW1vLCBmcm9tRGF0YV07CgogICBVQ2hhci5mcm9tQ2hhckNvZGUgPSBzdHJhdGVnaWVzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChuZXh0LCBzdHJhdGVneSkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKGNwLCBuZWVkRmVhdHVyZSkgewogICAgICAgICByZXR1cm4gc3RyYXRlZ3kobmV4dCwgY3AsIG5lZWRGZWF0dXJlKTsKICAgICAgfTsKICAgfSwgbnVsbCk7CgogICBVQ2hhci5pc0hpZ2hTdXJyb2dhdGUgPSBmdW5jdGlvbihjcCl7CiAgICAgIHJldHVybiBjcCA+PSAweEQ4MDAgJiYgY3AgPD0gMHhEQkZGOwogICB9OwogICBVQ2hhci5pc0xvd1N1cnJvZ2F0ZSA9IGZ1bmN0aW9uKGNwKXsKICAgICAgcmV0dXJuIGNwID49IDB4REMwMCAmJiBjcCA8PSAweERGRkY7CiAgIH07CgogICBVQ2hhci5wcm90b3R5cGUucHJlcEZlYXR1cmUgPSBmdW5jdGlvbigpewogICAgICBpZighdGhpcy5mZWF0dXJlKXsKICAgICAgICAgdGhpcy5mZWF0dXJlID0gVUNoYXIuZnJvbUNoYXJDb2RlKHRoaXMuY29kZXBvaW50LCB0cnVlKS5mZWF0dXJlOwogICAgICB9CiAgIH07CgogICBVQ2hhci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpewogICAgICBpZih0aGlzLmNvZGVwb2ludCA8IDB4MTAwMDApewogICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzLmNvZGVwb2ludCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgIHZhciB4ID0gdGhpcy5jb2RlcG9pbnQgLSAweDEwMDAwOwogICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShNYXRoLmZsb29yKHggLyAweDQwMCkgKyAweEQ4MDAsIHggJSAweDQwMCArIDB4REMwMCk7CiAgICAgIH0KICAgfTsKCiAgIFVDaGFyLnByb3RvdHlwZS5nZXREZWNvbXAgPSBmdW5jdGlvbigpewogICAgICB0aGlzLnByZXBGZWF0dXJlKCk7CiAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVbMF0gfHwgbnVsbDsKICAgfTsKCiAgIFVDaGFyLnByb3RvdHlwZS5pc0NvbXBhdGliaWxpdHkgPSBmdW5jdGlvbigpewogICAgICB0aGlzLnByZXBGZWF0dXJlKCk7CiAgICAgIHJldHVybiAhIXRoaXMuZmVhdHVyZVsxXSAmJiAodGhpcy5mZWF0dXJlWzFdICYgKDEgPDwgOCkpOwogICB9OwogICBVQ2hhci5wcm90b3R5cGUuaXNFeGNsdWRlID0gZnVuY3Rpb24oKXsKICAgICAgdGhpcy5wcmVwRmVhdHVyZSgpOwogICAgICByZXR1cm4gISF0aGlzLmZlYXR1cmVbMV0gJiYgKHRoaXMuZmVhdHVyZVsxXSAmICgxIDw8IDkpKTsKICAgfTsKICAgVUNoYXIucHJvdG90eXBlLmdldENhbm9uaWNhbENsYXNzID0gZnVuY3Rpb24oKXsKICAgICAgdGhpcy5wcmVwRmVhdHVyZSgpOwogICAgICByZXR1cm4gISF0aGlzLmZlYXR1cmVbMV0gPyAodGhpcy5mZWF0dXJlWzFdICYgMHhmZikgOiAwOwogICB9OwogICBVQ2hhci5wcm90b3R5cGUuZ2V0Q29tcG9zaXRlID0gZnVuY3Rpb24oZm9sbG93aW5nKXsKICAgICAgdGhpcy5wcmVwRmVhdHVyZSgpOwogICAgICBpZighdGhpcy5mZWF0dXJlWzJdKXsKICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgdmFyIGNwID0gdGhpcy5mZWF0dXJlWzJdW2ZvbGxvd2luZy5jb2RlcG9pbnRdOwogICAgICByZXR1cm4gY3AgPyBVQ2hhci5mcm9tQ2hhckNvZGUoY3ApIDogbnVsbDsKICAgfTsKCiAgIHZhciBVQ2hhckl0ZXJhdG9yID0gZnVuY3Rpb24oc3RyKXsKICAgICAgdGhpcy5zdHIgPSBzdHI7CiAgICAgIHRoaXMuY3Vyc29yID0gMDsKICAgfTsKICAgVUNoYXJJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKCl7CiAgICAgIGlmKCEhdGhpcy5zdHIgJiYgdGhpcy5jdXJzb3IgPCB0aGlzLnN0ci5sZW5ndGgpewogICAgICAgICB2YXIgY3AgPSB0aGlzLnN0ci5jaGFyQ29kZUF0KHRoaXMuY3Vyc29yKyspOwogICAgICAgICB2YXIgZDsKICAgICAgICAgaWYoVUNoYXIuaXNIaWdoU3Vycm9nYXRlKGNwKSAmJiB0aGlzLmN1cnNvciA8IHRoaXMuc3RyLmxlbmd0aCAmJiBVQ2hhci5pc0xvd1N1cnJvZ2F0ZSgoZCA9IHRoaXMuc3RyLmNoYXJDb2RlQXQodGhpcy5jdXJzb3IpKSkpewogICAgICAgICAgICBjcCA9IChjcCAtIDB4RDgwMCkgKiAweDQwMCArIChkIC0weERDMDApICsgMHgxMDAwMDsKICAgICAgICAgICAgKyt0aGlzLmN1cnNvcjsKICAgICAgICAgfQogICAgICAgICByZXR1cm4gVUNoYXIuZnJvbUNoYXJDb2RlKGNwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAgdGhpcy5zdHIgPSBudWxsOwogICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICB9OwoKICAgdmFyIFJlY3Vyc0RlY29tcEl0ZXJhdG9yID0gZnVuY3Rpb24oaXQsIGNhbm8pewogICAgICB0aGlzLml0ID0gaXQ7CiAgICAgIHRoaXMuY2Fub25pY2FsID0gY2FubzsKICAgICAgdGhpcy5yZXNCdWYgPSBbXTsKICAgfTsKCiAgIFJlY3Vyc0RlY29tcEl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oKXsKICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlRGVjb21wKGNhbm8sIHVjaGFyKXsKICAgICAgICAgdmFyIGRlY29tcCA9IHVjaGFyLmdldERlY29tcCgpOwogICAgICAgICBpZighIWRlY29tcCAmJiAhKGNhbm8gJiYgdWNoYXIuaXNDb21wYXRpYmlsaXR5KCkpKXsKICAgICAgICAgICAgdmFyIHJldCA9IFtdOwogICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGVjb21wLmxlbmd0aDsgKytpKXsKICAgICAgICAgICAgICAgdmFyIGEgPSByZWN1cnNpdmVEZWNvbXAoY2FubywgVUNoYXIuZnJvbUNoYXJDb2RlKGRlY29tcFtpXSkpOwogICAgICAgICAgICAgICAgcmV0ID0gcmV0LmNvbmNhdChhKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gW3VjaGFyXTsKICAgICAgICAgfQogICAgICB9CiAgICAgIGlmKHRoaXMucmVzQnVmLmxlbmd0aCA9PT0gMCl7CiAgICAgICAgIHZhciB1Y2hhciA9IHRoaXMuaXQubmV4dCgpOwogICAgICAgICBpZighdWNoYXIpewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgfQogICAgICAgICB0aGlzLnJlc0J1ZiA9IHJlY3Vyc2l2ZURlY29tcCh0aGlzLmNhbm9uaWNhbCwgdWNoYXIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnJlc0J1Zi5zaGlmdCgpOwogICB9OwoKICAgdmFyIERlY29tcEl0ZXJhdG9yID0gZnVuY3Rpb24oaXQpewogICAgICB0aGlzLml0ID0gaXQ7CiAgICAgIHRoaXMucmVzQnVmID0gW107CiAgIH07CgogICBEZWNvbXBJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKCl7CiAgICAgIHZhciBjYzsKICAgICAgaWYodGhpcy5yZXNCdWYubGVuZ3RoID09PSAwKXsKICAgICAgICAgZG97CiAgICAgICAgICAgIHZhciB1Y2hhciA9IHRoaXMuaXQubmV4dCgpOwogICAgICAgICAgICBpZighdWNoYXIpewogICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYyA9IHVjaGFyLmdldENhbm9uaWNhbENsYXNzKCk7CiAgICAgICAgICAgIHZhciBpbnNwdCA9IHRoaXMucmVzQnVmLmxlbmd0aDsKICAgICAgICAgICAgaWYoY2MgIT09IDApewogICAgICAgICAgICAgICBmb3IoOyBpbnNwdCA+IDA7IC0taW5zcHQpewogICAgICAgICAgICAgICAgICB2YXIgdWNoYXIyID0gdGhpcy5yZXNCdWZbaW5zcHQgLSAxXTsKICAgICAgICAgICAgICAgICAgdmFyIGNjMiA9IHVjaGFyMi5nZXRDYW5vbmljYWxDbGFzcygpOwogICAgICAgICAgICAgICAgICBpZihjYzIgPD0gY2MpewogICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5yZXNCdWYuc3BsaWNlKGluc3B0LCAwLCB1Y2hhcik7CiAgICAgICAgIH0gd2hpbGUoY2MgIT09IDApOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnJlc0J1Zi5zaGlmdCgpOwogICB9OwoKICAgdmFyIENvbXBJdGVyYXRvciA9IGZ1bmN0aW9uKGl0KXsKICAgICAgdGhpcy5pdCA9IGl0OwogICAgICB0aGlzLnByb2NCdWYgPSBbXTsKICAgICAgdGhpcy5yZXNCdWYgPSBbXTsKICAgICAgdGhpcy5sYXN0Q2xhc3MgPSBudWxsOwogICB9OwoKICAgQ29tcEl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oKXsKICAgICAgd2hpbGUodGhpcy5yZXNCdWYubGVuZ3RoID09PSAwKXsKICAgICAgICAgdmFyIHVjaGFyID0gdGhpcy5pdC5uZXh0KCk7CiAgICAgICAgIGlmKCF1Y2hhcil7CiAgICAgICAgICAgIHRoaXMucmVzQnVmID0gdGhpcy5wcm9jQnVmOwogICAgICAgICAgICB0aGlzLnByb2NCdWYgPSBbXTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgIH0KICAgICAgICAgaWYodGhpcy5wcm9jQnVmLmxlbmd0aCA9PT0gMCl7CiAgICAgICAgICAgIHRoaXMubGFzdENsYXNzID0gdWNoYXIuZ2V0Q2Fub25pY2FsQ2xhc3MoKTsKICAgICAgICAgICAgdGhpcy5wcm9jQnVmLnB1c2godWNoYXIpOwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgc3RhcnRlciA9IHRoaXMucHJvY0J1ZlswXTsKICAgICAgICAgICAgdmFyIGNvbXBvc2l0ZSA9IHN0YXJ0ZXIuZ2V0Q29tcG9zaXRlKHVjaGFyKTsKICAgICAgICAgICAgdmFyIGNjID0gdWNoYXIuZ2V0Q2Fub25pY2FsQ2xhc3MoKTsKICAgICAgICAgICAgaWYoISFjb21wb3NpdGUgJiYgKHRoaXMubGFzdENsYXNzIDwgY2MgfHwgdGhpcy5sYXN0Q2xhc3MgPT09IDApKXsKICAgICAgICAgICAgICAgdGhpcy5wcm9jQnVmWzBdID0gY29tcG9zaXRlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICBpZihjYyA9PT0gMCl7CiAgICAgICAgICAgICAgICAgIHRoaXMucmVzQnVmID0gdGhpcy5wcm9jQnVmOwogICAgICAgICAgICAgICAgICB0aGlzLnByb2NCdWYgPSBbXTsKICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICB0aGlzLmxhc3RDbGFzcyA9IGNjOwogICAgICAgICAgICAgICB0aGlzLnByb2NCdWYucHVzaCh1Y2hhcik7CiAgICAgICAgICAgIH0KICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnJlc0J1Zi5zaGlmdCgpOwogICB9OwoKICAgdmFyIGNyZWF0ZUl0ZXJhdG9yID0gZnVuY3Rpb24obW9kZSwgc3RyKXsKICAgICAgc3dpdGNoKG1vZGUpewogICAgICAgICBjYXNlICJORkQiOgogICAgICAgICAgICByZXR1cm4gbmV3IERlY29tcEl0ZXJhdG9yKG5ldyBSZWN1cnNEZWNvbXBJdGVyYXRvcihuZXcgVUNoYXJJdGVyYXRvcihzdHIpLCB0cnVlKSk7CiAgICAgICAgIGNhc2UgIk5GS0QiOgogICAgICAgICAgICByZXR1cm4gbmV3IERlY29tcEl0ZXJhdG9yKG5ldyBSZWN1cnNEZWNvbXBJdGVyYXRvcihuZXcgVUNoYXJJdGVyYXRvcihzdHIpLCBmYWxzZSkpOwogICAgICAgICBjYXNlICJORkMiOgogICAgICAgICAgICByZXR1cm4gbmV3IENvbXBJdGVyYXRvcihuZXcgRGVjb21wSXRlcmF0b3IobmV3IFJlY3Vyc0RlY29tcEl0ZXJhdG9yKG5ldyBVQ2hhckl0ZXJhdG9yKHN0ciksIHRydWUpKSk7CiAgICAgICAgIGNhc2UgIk5GS0MiOgogICAgICAgICAgICByZXR1cm4gbmV3IENvbXBJdGVyYXRvcihuZXcgRGVjb21wSXRlcmF0b3IobmV3IFJlY3Vyc0RlY29tcEl0ZXJhdG9yKG5ldyBVQ2hhckl0ZXJhdG9yKHN0ciksIGZhbHNlKSkpOwogICAgICB9CiAgICAgIHRocm93IG1vZGUgKyAiIGlzIGludmFsaWQiOwogICB9OwogICB2YXIgbm9ybWFsaXplID0gZnVuY3Rpb24obW9kZSwgc3RyKXsKICAgICAgdmFyIGl0ID0gY3JlYXRlSXRlcmF0b3IobW9kZSwgc3RyKTsKICAgICAgdmFyIHJldCA9ICIiOwogICAgICB2YXIgdWNoYXI7CiAgICAgIHdoaWxlKCEhKHVjaGFyID0gaXQubmV4dCgpKSl7CiAgICAgICAgIHJldCArPSB1Y2hhci50b1N0cmluZygpOwogICAgICB9CiAgICAgIHJldHVybiByZXQ7CiAgIH07CgogICAvKiBBUEkgZnVuY3Rpb25zICovCiAgIGZ1bmN0aW9uIG5mZChzdHIpewogICAgICByZXR1cm4gbm9ybWFsaXplKCJORkQiLCBzdHIpOwogICB9CgogICBmdW5jdGlvbiBuZmtkKHN0cil7CiAgICAgIHJldHVybiBub3JtYWxpemUoIk5GS0QiLCBzdHIpOwogICB9CgogICBmdW5jdGlvbiBuZmMoc3RyKXsKICAgICAgcmV0dXJuIG5vcm1hbGl6ZSgiTkZDIiwgc3RyKTsKICAgfQoKICAgZnVuY3Rpb24gbmZrYyhzdHIpewogICAgICByZXR1cm4gbm9ybWFsaXplKCJORktDIiwgc3RyKTsKICAgfQoKLyogVW5pY29kZSBkYXRhICovClVDaGFyLnVkYXRhPXsKMDp7NjA6WywsezgyNDo4ODE0fV0sNjE6WywsezgyNDo4ODAwfV0sNjI6WywsezgyNDo4ODE1fV0sNjU6Wywsezc2ODoxOTIsNzY5OjE5Myw3NzA6MTk0LDc3MToxOTUsNzcyOjI1Niw3NzQ6MjU4LDc3NTo1NTAsNzc2OjE5Niw3Nzc6Nzg0Miw3Nzg6MTk3LDc4MDo0NjEsNzgzOjUxMiw3ODU6NTE0LDgwMzo3ODQwLDgwNTo3NjgwLDgwODoyNjB9XSw2NjpbLCx7Nzc1Ojc2ODIsODAzOjc2ODQsODE3Ojc2ODZ9XSw2NzpbLCx7NzY5OjI2Miw3NzA6MjY0LDc3NToyNjYsNzgwOjI2OCw4MDc6MTk5fV0sNjg6Wywsezc3NTo3NjkwLDc4MDoyNzAsODAzOjc2OTIsODA3Ojc2OTYsODEzOjc2OTgsODE3Ojc2OTR9XSw2OTpbLCx7NzY4OjIwMCw3Njk6MjAxLDc3MDoyMDIsNzcxOjc4NjgsNzcyOjI3NCw3NzQ6Mjc2LDc3NToyNzgsNzc2OjIwMyw3Nzc6Nzg2Niw3ODA6MjgyLDc4Mzo1MTYsNzg1OjUxOCw4MDM6Nzg2NCw4MDc6NTUyLDgwODoyODAsODEzOjc3MDQsODE2Ojc3MDZ9XSw3MDpbLCx7Nzc1Ojc3MTB9XSw3MTpbLCx7NzY5OjUwMCw3NzA6Mjg0LDc3Mjo3NzEyLDc3NDoyODYsNzc1OjI4OCw3ODA6NDg2LDgwNzoyOTB9XSw3MjpbLCx7NzcwOjI5Miw3NzU6NzcxNCw3NzY6NzcxOCw3ODA6NTQyLDgwMzo3NzE2LDgwNzo3NzIwLDgxNDo3NzIyfV0sNzM6Wywsezc2ODoyMDQsNzY5OjIwNSw3NzA6MjA2LDc3MToyOTYsNzcyOjI5OCw3NzQ6MzAwLDc3NTozMDQsNzc2OjIwNyw3Nzc6Nzg4MCw3ODA6NDYzLDc4Mzo1MjAsNzg1OjUyMiw4MDM6Nzg4Miw4MDg6MzAyLDgxNjo3NzI0fV0sNzQ6Wywsezc3MDozMDh9XSw3NTpbLCx7NzY5Ojc3MjgsNzgwOjQ4OCw4MDM6NzczMCw4MDc6MzEwLDgxNzo3NzMyfV0sNzY6Wywsezc2OTozMTMsNzgwOjMxNyw4MDM6NzczNCw4MDc6MzE1LDgxMzo3NzQwLDgxNzo3NzM4fV0sNzc6Wywsezc2OTo3NzQyLDc3NTo3NzQ0LDgwMzo3NzQ2fV0sNzg6Wywsezc2ODo1MDQsNzY5OjMyMyw3NzE6MjA5LDc3NTo3NzQ4LDc4MDozMjcsODAzOjc3NTAsODA3OjMyNSw4MTM6Nzc1NCw4MTc6Nzc1Mn1dLDc5OlssLHs3Njg6MjEwLDc2OToyMTEsNzcwOjIxMiw3NzE6MjEzLDc3MjozMzIsNzc0OjMzNCw3NzU6NTU4LDc3NjoyMTQsNzc3Ojc4ODYsNzc5OjMzNiw3ODA6NDY1LDc4Mzo1MjQsNzg1OjUyNiw3OTU6NDE2LDgwMzo3ODg0LDgwODo0OTB9XSw4MDpbLCx7NzY5Ojc3NjQsNzc1Ojc3NjZ9XSw4MjpbLCx7NzY5OjM0MCw3NzU6Nzc2OCw3ODA6MzQ0LDc4Mzo1MjgsNzg1OjUzMCw4MDM6Nzc3MCw4MDc6MzQyLDgxNzo3Nzc0fV0sODM6Wywsezc2OTozNDYsNzcwOjM0OCw3NzU6Nzc3Niw3ODA6MzUyLDgwMzo3Nzc4LDgwNjo1MzYsODA3OjM1MH1dLDg0OlssLHs3NzU6Nzc4Niw3ODA6MzU2LDgwMzo3Nzg4LDgwNjo1MzgsODA3OjM1NCw4MTM6Nzc5Miw4MTc6Nzc5MH1dLDg1OlssLHs3Njg6MjE3LDc2OToyMTgsNzcwOjIxOSw3NzE6MzYwLDc3MjozNjIsNzc0OjM2NCw3NzY6MjIwLDc3Nzo3OTEwLDc3ODozNjYsNzc5OjM2OCw3ODA6NDY3LDc4Mzo1MzIsNzg1OjUzNCw3OTU6NDMxLDgwMzo3OTA4LDgwNDo3Nzk0LDgwODozNzAsODEzOjc3OTgsODE2Ojc3OTZ9XSw4NjpbLCx7NzcxOjc4MDQsODAzOjc4MDZ9XSw4NzpbLCx7NzY4Ojc4MDgsNzY5Ojc4MTAsNzcwOjM3Miw3NzU6NzgxNCw3NzY6NzgxMiw4MDM6NzgxNn1dLDg4OlssLHs3NzU6NzgxOCw3NzY6NzgyMH1dLDg5OlssLHs3Njg6NzkyMiw3Njk6MjIxLDc3MDozNzQsNzcxOjc5MjgsNzcyOjU2Miw3NzU6NzgyMiw3NzY6Mzc2LDc3Nzo3OTI2LDgwMzo3OTI0fV0sOTA6Wywsezc2OTozNzcsNzcwOjc4MjQsNzc1OjM3OSw3ODA6MzgxLDgwMzo3ODI2LDgxNzo3ODI4fV0sOTc6Wywsezc2ODoyMjQsNzY5OjIyNSw3NzA6MjI2LDc3MToyMjcsNzcyOjI1Nyw3NzQ6MjU5LDc3NTo1NTEsNzc2OjIyOCw3Nzc6Nzg0Myw3Nzg6MjI5LDc4MDo0NjIsNzgzOjUxMyw3ODU6NTE1LDgwMzo3ODQxLDgwNTo3NjgxLDgwODoyNjF9XSw5ODpbLCx7Nzc1Ojc2ODMsODAzOjc2ODUsODE3Ojc2ODd9XSw5OTpbLCx7NzY5OjI2Myw3NzA6MjY1LDc3NToyNjcsNzgwOjI2OSw4MDc6MjMxfV0sMTAwOlssLHs3NzU6NzY5MSw3ODA6MjcxLDgwMzo3NjkzLDgwNzo3Njk3LDgxMzo3Njk5LDgxNzo3Njk1fV0sMTAxOlssLHs3Njg6MjMyLDc2OToyMzMsNzcwOjIzNCw3NzE6Nzg2OSw3NzI6Mjc1LDc3NDoyNzcsNzc1OjI3OSw3NzY6MjM1LDc3Nzo3ODY3LDc4MDoyODMsNzgzOjUxNyw3ODU6NTE5LDgwMzo3ODY1LDgwNzo1NTMsODA4OjI4MSw4MTM6NzcwNSw4MTY6NzcwN31dLDEwMjpbLCx7Nzc1Ojc3MTF9XSwxMDM6Wywsezc2OTo1MDEsNzcwOjI4NSw3NzI6NzcxMyw3NzQ6Mjg3LDc3NToyODksNzgwOjQ4Nyw4MDc6MjkxfV0sMTA0OlssLHs3NzA6MjkzLDc3NTo3NzE1LDc3Njo3NzE5LDc4MDo1NDMsODAzOjc3MTcsODA3Ojc3MjEsODE0Ojc3MjMsODE3Ojc4MzB9XSwxMDU6Wywsezc2ODoyMzYsNzY5OjIzNyw3NzA6MjM4LDc3MToyOTcsNzcyOjI5OSw3NzQ6MzAxLDc3NjoyMzksNzc3Ojc4ODEsNzgwOjQ2NCw3ODM6NTIxLDc4NTo1MjMsODAzOjc4ODMsODA4OjMwMyw4MTY6NzcyNX1dLDEwNjpbLCx7NzcwOjMwOSw3ODA6NDk2fV0sMTA3OlssLHs3Njk6NzcyOSw3ODA6NDg5LDgwMzo3NzMxLDgwNzozMTEsODE3Ojc3MzN9XSwxMDg6Wywsezc2OTozMTQsNzgwOjMxOCw4MDM6NzczNSw4MDc6MzE2LDgxMzo3NzQxLDgxNzo3NzM5fV0sMTA5OlssLHs3Njk6Nzc0Myw3NzU6Nzc0NSw4MDM6Nzc0N31dLDExMDpbLCx7NzY4OjUwNSw3Njk6MzI0LDc3MToyNDEsNzc1Ojc3NDksNzgwOjMyOCw4MDM6Nzc1MSw4MDc6MzI2LDgxMzo3NzU1LDgxNzo3NzUzfV0sMTExOlssLHs3Njg6MjQyLDc2OToyNDMsNzcwOjI0NCw3NzE6MjQ1LDc3MjozMzMsNzc0OjMzNSw3NzU6NTU5LDc3NjoyNDYsNzc3Ojc4ODcsNzc5OjMzNyw3ODA6NDY2LDc4Mzo1MjUsNzg1OjUyNyw3OTU6NDE3LDgwMzo3ODg1LDgwODo0OTF9XSwxMTI6Wywsezc2OTo3NzY1LDc3NTo3NzY3fV0sMTE0OlssLHs3Njk6MzQxLDc3NTo3NzY5LDc4MDozNDUsNzgzOjUyOSw3ODU6NTMxLDgwMzo3NzcxLDgwNzozNDMsODE3Ojc3NzV9XSwxMTU6Wywsezc2OTozNDcsNzcwOjM0OSw3NzU6Nzc3Nyw3ODA6MzUzLDgwMzo3Nzc5LDgwNjo1MzcsODA3OjM1MX1dLDExNjpbLCx7Nzc1Ojc3ODcsNzc2Ojc4MzEsNzgwOjM1Nyw4MDM6Nzc4OSw4MDY6NTM5LDgwNzozNTUsODEzOjc3OTMsODE3Ojc3OTF9XSwxMTc6Wywsezc2ODoyNDksNzY5OjI1MCw3NzA6MjUxLDc3MTozNjEsNzcyOjM2Myw3NzQ6MzY1LDc3NjoyNTIsNzc3Ojc5MTEsNzc4OjM2Nyw3Nzk6MzY5LDc4MDo0NjgsNzgzOjUzMyw3ODU6NTM1LDc5NTo0MzIsODAzOjc5MDksODA0Ojc3OTUsODA4OjM3MSw4MTM6Nzc5OSw4MTY6Nzc5N31dLDExODpbLCx7NzcxOjc4MDUsODAzOjc4MDd9XSwxMTk6Wywsezc2ODo3ODA5LDc2OTo3ODExLDc3MDozNzMsNzc1Ojc4MTUsNzc2Ojc4MTMsNzc4Ojc4MzIsODAzOjc4MTd9XSwxMjA6Wywsezc3NTo3ODE5LDc3Njo3ODIxfV0sMTIxOlssLHs3Njg6NzkyMyw3Njk6MjUzLDc3MDozNzUsNzcxOjc5MjksNzcyOjU2Myw3NzU6NzgyMyw3NzY6MjU1LDc3Nzo3OTI3LDc3ODo3ODMzLDgwMzo3OTI1fV0sMTIyOlssLHs3Njk6Mzc4LDc3MDo3ODI1LDc3NTozODAsNzgwOjM4Miw4MDM6NzgyNyw4MTc6NzgyOX1dLDE2MDpbWzMyXSwyNTZdLDE2ODpbWzMyLDc3Nl0sMjU2LHs3Njg6ODE3Myw3Njk6OTAxLDgzNDo4MTI5fV0sMTcwOltbOTddLDI1Nl0sMTc1OltbMzIsNzcyXSwyNTZdLDE3ODpbWzUwXSwyNTZdLDE3OTpbWzUxXSwyNTZdLDE4MDpbWzMyLDc2OV0sMjU2XSwxODE6W1s5NTZdLDI1Nl0sMTg0OltbMzIsODA3XSwyNTZdLDE4NTpbWzQ5XSwyNTZdLDE4NjpbWzExMV0sMjU2XSwxODg6W1s0OSw4MjYwLDUyXSwyNTZdLDE4OTpbWzQ5LDgyNjAsNTBdLDI1Nl0sMTkwOltbNTEsODI2MCw1Ml0sMjU2XSwxOTI6W1s2NSw3NjhdXSwxOTM6W1s2NSw3NjldXSwxOTQ6W1s2NSw3NzBdLCx7NzY4Ojc4NDYsNzY5Ojc4NDQsNzcxOjc4NTAsNzc3Ojc4NDh9XSwxOTU6W1s2NSw3NzFdXSwxOTY6W1s2NSw3NzZdLCx7NzcyOjQ3OH1dLDE5NzpbWzY1LDc3OF0sLHs3Njk6NTA2fV0sMTk4OlssLHs3Njk6NTA4LDc3Mjo0ODJ9XSwxOTk6W1s2Nyw4MDddLCx7NzY5Ojc2ODh9XSwyMDA6W1s2OSw3NjhdXSwyMDE6W1s2OSw3NjldXSwyMDI6W1s2OSw3NzBdLCx7NzY4Ojc4NzIsNzY5Ojc4NzAsNzcxOjc4NzYsNzc3Ojc4NzR9XSwyMDM6W1s2OSw3NzZdXSwyMDQ6W1s3Myw3NjhdXSwyMDU6W1s3Myw3NjldXSwyMDY6W1s3Myw3NzBdXSwyMDc6W1s3Myw3NzZdLCx7NzY5Ojc3MjZ9XSwyMDk6W1s3OCw3NzFdXSwyMTA6W1s3OSw3NjhdXSwyMTE6W1s3OSw3NjldXSwyMTI6W1s3OSw3NzBdLCx7NzY4Ojc4OTAsNzY5Ojc4ODgsNzcxOjc4OTQsNzc3Ojc4OTJ9XSwyMTM6W1s3OSw3NzFdLCx7NzY5Ojc3NTYsNzcyOjU1Niw3NzY6Nzc1OH1dLDIxNDpbWzc5LDc3Nl0sLHs3NzI6NTU0fV0sMjE2OlssLHs3Njk6NTEwfV0sMjE3OltbODUsNzY4XV0sMjE4OltbODUsNzY5XV0sMjE5OltbODUsNzcwXV0sMjIwOltbODUsNzc2XSwsezc2ODo0NzUsNzY5OjQ3MSw3NzI6NDY5LDc4MDo0NzN9XSwyMjE6W1s4OSw3NjldXSwyMjQ6W1s5Nyw3NjhdXSwyMjU6W1s5Nyw3NjldXSwyMjY6W1s5Nyw3NzBdLCx7NzY4Ojc4NDcsNzY5Ojc4NDUsNzcxOjc4NTEsNzc3Ojc4NDl9XSwyMjc6W1s5Nyw3NzFdXSwyMjg6W1s5Nyw3NzZdLCx7NzcyOjQ3OX1dLDIyOTpbWzk3LDc3OF0sLHs3Njk6NTA3fV0sMjMwOlssLHs3Njk6NTA5LDc3Mjo0ODN9XSwyMzE6W1s5OSw4MDddLCx7NzY5Ojc2ODl9XSwyMzI6W1sxMDEsNzY4XV0sMjMzOltbMTAxLDc2OV1dLDIzNDpbWzEwMSw3NzBdLCx7NzY4Ojc4NzMsNzY5Ojc4NzEsNzcxOjc4NzcsNzc3Ojc4NzV9XSwyMzU6W1sxMDEsNzc2XV0sMjM2OltbMTA1LDc2OF1dLDIzNzpbWzEwNSw3NjldXSwyMzg6W1sxMDUsNzcwXV0sMjM5OltbMTA1LDc3Nl0sLHs3Njk6NzcyN31dLDI0MTpbWzExMCw3NzFdXSwyNDI6W1sxMTEsNzY4XV0sMjQzOltbMTExLDc2OV1dLDI0NDpbWzExMSw3NzBdLCx7NzY4Ojc4OTEsNzY5Ojc4ODksNzcxOjc4OTUsNzc3Ojc4OTN9XSwyNDU6W1sxMTEsNzcxXSwsezc2OTo3NzU3LDc3Mjo1NTcsNzc2Ojc3NTl9XSwyNDY6W1sxMTEsNzc2XSwsezc3Mjo1NTV9XSwyNDg6Wywsezc2OTo1MTF9XSwyNDk6W1sxMTcsNzY4XV0sMjUwOltbMTE3LDc2OV1dLDI1MTpbWzExNyw3NzBdXSwyNTI6W1sxMTcsNzc2XSwsezc2ODo0NzYsNzY5OjQ3Miw3NzI6NDcwLDc4MDo0NzR9XSwyNTM6W1sxMjEsNzY5XV0sMjU1OltbMTIxLDc3Nl1dfSwKMjU2OnsyNTY6W1s2NSw3NzJdXSwyNTc6W1s5Nyw3NzJdXSwyNTg6W1s2NSw3NzRdLCx7NzY4Ojc4NTYsNzY5Ojc4NTQsNzcxOjc4NjAsNzc3Ojc4NTh9XSwyNTk6W1s5Nyw3NzRdLCx7NzY4Ojc4NTcsNzY5Ojc4NTUsNzcxOjc4NjEsNzc3Ojc4NTl9XSwyNjA6W1s2NSw4MDhdXSwyNjE6W1s5Nyw4MDhdXSwyNjI6W1s2Nyw3NjldXSwyNjM6W1s5OSw3NjldXSwyNjQ6W1s2Nyw3NzBdXSwyNjU6W1s5OSw3NzBdXSwyNjY6W1s2Nyw3NzVdXSwyNjc6W1s5OSw3NzVdXSwyNjg6W1s2Nyw3ODBdXSwyNjk6W1s5OSw3ODBdXSwyNzA6W1s2OCw3ODBdXSwyNzE6W1sxMDAsNzgwXV0sMjc0OltbNjksNzcyXSwsezc2ODo3NzAwLDc2OTo3NzAyfV0sMjc1OltbMTAxLDc3Ml0sLHs3Njg6NzcwMSw3Njk6NzcwM31dLDI3NjpbWzY5LDc3NF1dLDI3NzpbWzEwMSw3NzRdXSwyNzg6W1s2OSw3NzVdXSwyNzk6W1sxMDEsNzc1XV0sMjgwOltbNjksODA4XV0sMjgxOltbMTAxLDgwOF1dLDI4MjpbWzY5LDc4MF1dLDI4MzpbWzEwMSw3ODBdXSwyODQ6W1s3MSw3NzBdXSwyODU6W1sxMDMsNzcwXV0sMjg2OltbNzEsNzc0XV0sMjg3OltbMTAzLDc3NF1dLDI4ODpbWzcxLDc3NV1dLDI4OTpbWzEwMyw3NzVdXSwyOTA6W1s3MSw4MDddXSwyOTE6W1sxMDMsODA3XV0sMjkyOltbNzIsNzcwXV0sMjkzOltbMTA0LDc3MF1dLDI5NjpbWzczLDc3MV1dLDI5NzpbWzEwNSw3NzFdXSwyOTg6W1s3Myw3NzJdXSwyOTk6W1sxMDUsNzcyXV0sMzAwOltbNzMsNzc0XV0sMzAxOltbMTA1LDc3NF1dLDMwMjpbWzczLDgwOF1dLDMwMzpbWzEwNSw4MDhdXSwzMDQ6W1s3Myw3NzVdXSwzMDY6W1s3Myw3NF0sMjU2XSwzMDc6W1sxMDUsMTA2XSwyNTZdLDMwODpbWzc0LDc3MF1dLDMwOTpbWzEwNiw3NzBdXSwzMTA6W1s3NSw4MDddXSwzMTE6W1sxMDcsODA3XV0sMzEzOltbNzYsNzY5XV0sMzE0OltbMTA4LDc2OV1dLDMxNTpbWzc2LDgwN11dLDMxNjpbWzEwOCw4MDddXSwzMTc6W1s3Niw3ODBdXSwzMTg6W1sxMDgsNzgwXV0sMzE5OltbNzYsMTgzXSwyNTZdLDMyMDpbWzEwOCwxODNdLDI1Nl0sMzIzOltbNzgsNzY5XV0sMzI0OltbMTEwLDc2OV1dLDMyNTpbWzc4LDgwN11dLDMyNjpbWzExMCw4MDddXSwzMjc6W1s3OCw3ODBdXSwzMjg6W1sxMTAsNzgwXV0sMzI5OltbNzAwLDExMF0sMjU2XSwzMzI6W1s3OSw3NzJdLCx7NzY4Ojc3NjAsNzY5Ojc3NjJ9XSwzMzM6W1sxMTEsNzcyXSwsezc2ODo3NzYxLDc2OTo3NzYzfV0sMzM0OltbNzksNzc0XV0sMzM1OltbMTExLDc3NF1dLDMzNjpbWzc5LDc3OV1dLDMzNzpbWzExMSw3NzldXSwzNDA6W1s4Miw3NjldXSwzNDE6W1sxMTQsNzY5XV0sMzQyOltbODIsODA3XV0sMzQzOltbMTE0LDgwN11dLDM0NDpbWzgyLDc4MF1dLDM0NTpbWzExNCw3ODBdXSwzNDY6W1s4Myw3NjldLCx7Nzc1Ojc3ODB9XSwzNDc6W1sxMTUsNzY5XSwsezc3NTo3NzgxfV0sMzQ4OltbODMsNzcwXV0sMzQ5OltbMTE1LDc3MF1dLDM1MDpbWzgzLDgwN11dLDM1MTpbWzExNSw4MDddXSwzNTI6W1s4Myw3ODBdLCx7Nzc1Ojc3ODJ9XSwzNTM6W1sxMTUsNzgwXSwsezc3NTo3NzgzfV0sMzU0OltbODQsODA3XV0sMzU1OltbMTE2LDgwN11dLDM1NjpbWzg0LDc4MF1dLDM1NzpbWzExNiw3ODBdXSwzNjA6W1s4NSw3NzFdLCx7NzY5Ojc4MDB9XSwzNjE6W1sxMTcsNzcxXSwsezc2OTo3ODAxfV0sMzYyOltbODUsNzcyXSwsezc3Njo3ODAyfV0sMzYzOltbMTE3LDc3Ml0sLHs3NzY6NzgwM31dLDM2NDpbWzg1LDc3NF1dLDM2NTpbWzExNyw3NzRdXSwzNjY6W1s4NSw3NzhdXSwzNjc6W1sxMTcsNzc4XV0sMzY4OltbODUsNzc5XV0sMzY5OltbMTE3LDc3OV1dLDM3MDpbWzg1LDgwOF1dLDM3MTpbWzExNyw4MDhdXSwzNzI6W1s4Nyw3NzBdXSwzNzM6W1sxMTksNzcwXV0sMzc0OltbODksNzcwXV0sMzc1OltbMTIxLDc3MF1dLDM3NjpbWzg5LDc3Nl1dLDM3NzpbWzkwLDc2OV1dLDM3ODpbWzEyMiw3NjldXSwzNzk6W1s5MCw3NzVdXSwzODA6W1sxMjIsNzc1XV0sMzgxOltbOTAsNzgwXV0sMzgyOltbMTIyLDc4MF1dLDM4MzpbWzExNV0sMjU2LHs3NzU6NzgzNX1dLDQxNjpbWzc5LDc5NV0sLHs3Njg6NzkwMCw3Njk6Nzg5OCw3NzE6NzkwNCw3Nzc6NzkwMiw4MDM6NzkwNn1dLDQxNzpbWzExMSw3OTVdLCx7NzY4Ojc5MDEsNzY5Ojc4OTksNzcxOjc5MDUsNzc3Ojc5MDMsODAzOjc5MDd9XSw0MzE6W1s4NSw3OTVdLCx7NzY4Ojc5MTQsNzY5Ojc5MTIsNzcxOjc5MTgsNzc3Ojc5MTYsODAzOjc5MjB9XSw0MzI6W1sxMTcsNzk1XSwsezc2ODo3OTE1LDc2OTo3OTEzLDc3MTo3OTE5LDc3Nzo3OTE3LDgwMzo3OTIxfV0sNDM5OlssLHs3ODA6NDk0fV0sNDUyOltbNjgsMzgxXSwyNTZdLDQ1MzpbWzY4LDM4Ml0sMjU2XSw0NTQ6W1sxMDAsMzgyXSwyNTZdLDQ1NTpbWzc2LDc0XSwyNTZdLDQ1NjpbWzc2LDEwNl0sMjU2XSw0NTc6W1sxMDgsMTA2XSwyNTZdLDQ1ODpbWzc4LDc0XSwyNTZdLDQ1OTpbWzc4LDEwNl0sMjU2XSw0NjA6W1sxMTAsMTA2XSwyNTZdLDQ2MTpbWzY1LDc4MF1dLDQ2MjpbWzk3LDc4MF1dLDQ2MzpbWzczLDc4MF1dLDQ2NDpbWzEwNSw3ODBdXSw0NjU6W1s3OSw3ODBdXSw0NjY6W1sxMTEsNzgwXV0sNDY3OltbODUsNzgwXV0sNDY4OltbMTE3LDc4MF1dLDQ2OTpbWzIyMCw3NzJdXSw0NzA6W1syNTIsNzcyXV0sNDcxOltbMjIwLDc2OV1dLDQ3MjpbWzI1Miw3NjldXSw0NzM6W1syMjAsNzgwXV0sNDc0OltbMjUyLDc4MF1dLDQ3NTpbWzIyMCw3NjhdXSw0NzY6W1syNTIsNzY4XV0sNDc4OltbMTk2LDc3Ml1dLDQ3OTpbWzIyOCw3NzJdXSw0ODA6W1s1NTAsNzcyXV0sNDgxOltbNTUxLDc3Ml1dLDQ4MjpbWzE5OCw3NzJdXSw0ODM6W1syMzAsNzcyXV0sNDg2OltbNzEsNzgwXV0sNDg3OltbMTAzLDc4MF1dLDQ4ODpbWzc1LDc4MF1dLDQ4OTpbWzEwNyw3ODBdXSw0OTA6W1s3OSw4MDhdLCx7NzcyOjQ5Mn1dLDQ5MTpbWzExMSw4MDhdLCx7NzcyOjQ5M31dLDQ5MjpbWzQ5MCw3NzJdXSw0OTM6W1s0OTEsNzcyXV0sNDk0OltbNDM5LDc4MF1dLDQ5NTpbWzY1OCw3ODBdXSw0OTY6W1sxMDYsNzgwXV0sNDk3OltbNjgsOTBdLDI1Nl0sNDk4OltbNjgsMTIyXSwyNTZdLDQ5OTpbWzEwMCwxMjJdLDI1Nl0sNTAwOltbNzEsNzY5XV0sNTAxOltbMTAzLDc2OV1dLDUwNDpbWzc4LDc2OF1dLDUwNTpbWzExMCw3NjhdXSw1MDY6W1sxOTcsNzY5XV0sNTA3OltbMjI5LDc2OV1dLDUwODpbWzE5OCw3NjldXSw1MDk6W1syMzAsNzY5XV0sNTEwOltbMjE2LDc2OV1dLDUxMTpbWzI0OCw3NjldXSw2NjA0NTpbLDIyMF19LAo1MTI6ezUxMjpbWzY1LDc4M11dLDUxMzpbWzk3LDc4M11dLDUxNDpbWzY1LDc4NV1dLDUxNTpbWzk3LDc4NV1dLDUxNjpbWzY5LDc4M11dLDUxNzpbWzEwMSw3ODNdXSw1MTg6W1s2OSw3ODVdXSw1MTk6W1sxMDEsNzg1XV0sNTIwOltbNzMsNzgzXV0sNTIxOltbMTA1LDc4M11dLDUyMjpbWzczLDc4NV1dLDUyMzpbWzEwNSw3ODVdXSw1MjQ6W1s3OSw3ODNdXSw1MjU6W1sxMTEsNzgzXV0sNTI2OltbNzksNzg1XV0sNTI3OltbMTExLDc4NV1dLDUyODpbWzgyLDc4M11dLDUyOTpbWzExNCw3ODNdXSw1MzA6W1s4Miw3ODVdXSw1MzE6W1sxMTQsNzg1XV0sNTMyOltbODUsNzgzXV0sNTMzOltbMTE3LDc4M11dLDUzNDpbWzg1LDc4NV1dLDUzNTpbWzExNyw3ODVdXSw1MzY6W1s4Myw4MDZdXSw1Mzc6W1sxMTUsODA2XV0sNTM4OltbODQsODA2XV0sNTM5OltbMTE2LDgwNl1dLDU0MjpbWzcyLDc4MF1dLDU0MzpbWzEwNCw3ODBdXSw1NTA6W1s2NSw3NzVdLCx7NzcyOjQ4MH1dLDU1MTpbWzk3LDc3NV0sLHs3NzI6NDgxfV0sNTUyOltbNjksODA3XSwsezc3NDo3NzA4fV0sNTUzOltbMTAxLDgwN10sLHs3NzQ6NzcwOX1dLDU1NDpbWzIxNCw3NzJdXSw1NTU6W1syNDYsNzcyXV0sNTU2OltbMjEzLDc3Ml1dLDU1NzpbWzI0NSw3NzJdXSw1NTg6W1s3OSw3NzVdLCx7NzcyOjU2MH1dLDU1OTpbWzExMSw3NzVdLCx7NzcyOjU2MX1dLDU2MDpbWzU1OCw3NzJdXSw1NjE6W1s1NTksNzcyXV0sNTYyOltbODksNzcyXV0sNTYzOltbMTIxLDc3Ml1dLDY1ODpbLCx7NzgwOjQ5NX1dLDY4ODpbWzEwNF0sMjU2XSw2ODk6W1s2MTRdLDI1Nl0sNjkwOltbMTA2XSwyNTZdLDY5MTpbWzExNF0sMjU2XSw2OTI6W1s2MzNdLDI1Nl0sNjkzOltbNjM1XSwyNTZdLDY5NDpbWzY0MV0sMjU2XSw2OTU6W1sxMTldLDI1Nl0sNjk2OltbMTIxXSwyNTZdLDcyODpbWzMyLDc3NF0sMjU2XSw3Mjk6W1szMiw3NzVdLDI1Nl0sNzMwOltbMzIsNzc4XSwyNTZdLDczMTpbWzMyLDgwOF0sMjU2XSw3MzI6W1szMiw3NzFdLDI1Nl0sNzMzOltbMzIsNzc5XSwyNTZdLDczNjpbWzYxMV0sMjU2XSw3Mzc6W1sxMDhdLDI1Nl0sNzM4OltbMTE1XSwyNTZdLDczOTpbWzEyMF0sMjU2XSw3NDA6W1s2NjFdLDI1Nl0sNjYyNzI6WywyMjBdfSwKNzY4Ons3Njg6WywyMzBdLDc2OTpbLDIzMF0sNzcwOlssMjMwXSw3NzE6WywyMzBdLDc3MjpbLDIzMF0sNzczOlssMjMwXSw3NzQ6WywyMzBdLDc3NTpbLDIzMF0sNzc2OlssMjMwLHs3Njk6ODM2fV0sNzc3OlssMjMwXSw3Nzg6WywyMzBdLDc3OTpbLDIzMF0sNzgwOlssMjMwXSw3ODE6WywyMzBdLDc4MjpbLDIzMF0sNzgzOlssMjMwXSw3ODQ6WywyMzBdLDc4NTpbLDIzMF0sNzg2OlssMjMwXSw3ODc6WywyMzBdLDc4ODpbLDIzMF0sNzg5OlssMjMyXSw3OTA6WywyMjBdLDc5MTpbLDIyMF0sNzkyOlssMjIwXSw3OTM6WywyMjBdLDc5NDpbLDIzMl0sNzk1OlssMjE2XSw3OTY6WywyMjBdLDc5NzpbLDIyMF0sNzk4OlssMjIwXSw3OTk6WywyMjBdLDgwMDpbLDIyMF0sODAxOlssMjAyXSw4MDI6WywyMDJdLDgwMzpbLDIyMF0sODA0OlssMjIwXSw4MDU6WywyMjBdLDgwNjpbLDIyMF0sODA3OlssMjAyXSw4MDg6WywyMDJdLDgwOTpbLDIyMF0sODEwOlssMjIwXSw4MTE6WywyMjBdLDgxMjpbLDIyMF0sODEzOlssMjIwXSw4MTQ6WywyMjBdLDgxNTpbLDIyMF0sODE2OlssMjIwXSw4MTc6WywyMjBdLDgxODpbLDIyMF0sODE5OlssMjIwXSw4MjA6WywxXSw4MjE6WywxXSw4MjI6WywxXSw4MjM6WywxXSw4MjQ6WywxXSw4MjU6WywyMjBdLDgyNjpbLDIyMF0sODI3OlssMjIwXSw4Mjg6WywyMjBdLDgyOTpbLDIzMF0sODMwOlssMjMwXSw4MzE6WywyMzBdLDgzMjpbWzc2OF0sMjMwXSw4MzM6W1s3NjldLDIzMF0sODM0OlssMjMwXSw4MzU6W1s3ODddLDIzMF0sODM2OltbNzc2LDc2OV0sMjMwXSw4Mzc6WywyNDBdLDgzODpbLDIzMF0sODM5OlssMjIwXSw4NDA6WywyMjBdLDg0MTpbLDIyMF0sODQyOlssMjMwXSw4NDM6WywyMzBdLDg0NDpbLDIzMF0sODQ1OlssMjIwXSw4NDY6WywyMjBdLDg0ODpbLDIzMF0sODQ5OlssMjMwXSw4NTA6WywyMzBdLDg1MTpbLDIyMF0sODUyOlssMjIwXSw4NTM6WywyMjBdLDg1NDpbLDIyMF0sODU1OlssMjMwXSw4NTY6WywyMzJdLDg1NzpbLDIyMF0sODU4OlssMjIwXSw4NTk6WywyMzBdLDg2MDpbLDIzM10sODYxOlssMjM0XSw4NjI6WywyMzRdLDg2MzpbLDIzM10sODY0OlssMjM0XSw4NjU6WywyMzRdLDg2NjpbLDIzM10sODY3OlssMjMwXSw4Njg6WywyMzBdLDg2OTpbLDIzMF0sODcwOlssMjMwXSw4NzE6WywyMzBdLDg3MjpbLDIzMF0sODczOlssMjMwXSw4NzQ6WywyMzBdLDg3NTpbLDIzMF0sODc2OlssMjMwXSw4Nzc6WywyMzBdLDg3ODpbLDIzMF0sODc5OlssMjMwXSw4ODQ6W1s2OTddXSw4OTA6W1szMiw4MzddLDI1Nl0sODk0OltbNTldXSw5MDA6W1szMiw3NjldLDI1Nl0sOTAxOltbMTY4LDc2OV1dLDkwMjpbWzkxMyw3NjldXSw5MDM6W1sxODNdXSw5MDQ6W1s5MTcsNzY5XV0sOTA1OltbOTE5LDc2OV1dLDkwNjpbWzkyMSw3NjldXSw5MDg6W1s5MjcsNzY5XV0sOTEwOltbOTMzLDc2OV1dLDkxMTpbWzkzNyw3NjldXSw5MTI6W1s5NzAsNzY5XV0sOTEzOlssLHs3Njg6ODEyMiw3Njk6OTAyLDc3Mjo4MTIxLDc3NDo4MTIwLDc4Nzo3OTQ0LDc4ODo3OTQ1LDgzNzo4MTI0fV0sOTE3OlssLHs3Njg6ODEzNiw3Njk6OTA0LDc4Nzo3OTYwLDc4ODo3OTYxfV0sOTE5OlssLHs3Njg6ODEzOCw3Njk6OTA1LDc4Nzo3OTc2LDc4ODo3OTc3LDgzNzo4MTQwfV0sOTIxOlssLHs3Njg6ODE1NCw3Njk6OTA2LDc3Mjo4MTUzLDc3NDo4MTUyLDc3Njo5MzgsNzg3Ojc5OTIsNzg4Ojc5OTN9XSw5Mjc6Wywsezc2ODo4MTg0LDc2OTo5MDgsNzg3OjgwMDgsNzg4OjgwMDl9XSw5Mjk6Wywsezc4ODo4MTcyfV0sOTMzOlssLHs3Njg6ODE3MCw3Njk6OTEwLDc3Mjo4MTY5LDc3NDo4MTY4LDc3Njo5MzksNzg4OjgwMjV9XSw5Mzc6Wywsezc2ODo4MTg2LDc2OTo5MTEsNzg3OjgwNDAsNzg4OjgwNDEsODM3OjgxODh9XSw5Mzg6W1s5MjEsNzc2XV0sOTM5OltbOTMzLDc3Nl1dLDk0MDpbWzk0NSw3NjldLCx7ODM3OjgxMTZ9XSw5NDE6W1s5NDksNzY5XV0sOTQyOltbOTUxLDc2OV0sLHs4Mzc6ODEzMn1dLDk0MzpbWzk1Myw3NjldXSw5NDQ6W1s5NzEsNzY5XV0sOTQ1OlssLHs3Njg6ODA0OCw3Njk6OTQwLDc3Mjo4MTEzLDc3NDo4MTEyLDc4Nzo3OTM2LDc4ODo3OTM3LDgzNDo4MTE4LDgzNzo4MTE1fV0sOTQ5OlssLHs3Njg6ODA1MCw3Njk6OTQxLDc4Nzo3OTUyLDc4ODo3OTUzfV0sOTUxOlssLHs3Njg6ODA1Miw3Njk6OTQyLDc4Nzo3OTY4LDc4ODo3OTY5LDgzNDo4MTM0LDgzNzo4MTMxfV0sOTUzOlssLHs3Njg6ODA1NCw3Njk6OTQzLDc3Mjo4MTQ1LDc3NDo4MTQ0LDc3Njo5NzAsNzg3Ojc5ODQsNzg4Ojc5ODUsODM0OjgxNTB9XSw5NTk6Wywsezc2ODo4MDU2LDc2OTo5NzIsNzg3OjgwMDAsNzg4OjgwMDF9XSw5NjE6Wywsezc4Nzo4MTY0LDc4ODo4MTY1fV0sOTY1OlssLHs3Njg6ODA1OCw3Njk6OTczLDc3Mjo4MTYxLDc3NDo4MTYwLDc3Njo5NzEsNzg3OjgwMTYsNzg4OjgwMTcsODM0OjgxNjZ9XSw5Njk6Wywsezc2ODo4MDYwLDc2OTo5NzQsNzg3OjgwMzIsNzg4OjgwMzMsODM0OjgxODIsODM3OjgxNzl9XSw5NzA6W1s5NTMsNzc2XSwsezc2ODo4MTQ2LDc2OTo5MTIsODM0OjgxNTF9XSw5NzE6W1s5NjUsNzc2XSwsezc2ODo4MTYyLDc2OTo5NDQsODM0OjgxNjd9XSw5NzI6W1s5NTksNzY5XV0sOTczOltbOTY1LDc2OV1dLDk3NDpbWzk2OSw3NjldLCx7ODM3OjgxODB9XSw5NzY6W1s5NDZdLDI1Nl0sOTc3OltbOTUyXSwyNTZdLDk3ODpbWzkzM10sMjU2LHs3Njk6OTc5LDc3Njo5ODB9XSw5Nzk6W1s5NzgsNzY5XV0sOTgwOltbOTc4LDc3Nl1dLDk4MTpbWzk2Nl0sMjU2XSw5ODI6W1s5NjBdLDI1Nl0sMTAwODpbWzk1NF0sMjU2XSwxMDA5OltbOTYxXSwyNTZdLDEwMTA6W1s5NjJdLDI1Nl0sMTAxMjpbWzkyMF0sMjU2XSwxMDEzOltbOTQ5XSwyNTZdLDEwMTc6W1s5MzFdLDI1Nl0sNjY0MjI6WywyMzBdLDY2NDIzOlssMjMwXSw2NjQyNDpbLDIzMF0sNjY0MjU6WywyMzBdLDY2NDI2OlssMjMwXX0sCjEwMjQ6ezEwMjQ6W1sxMDQ1LDc2OF1dLDEwMjU6W1sxMDQ1LDc3Nl1dLDEwMjc6W1sxMDQzLDc2OV1dLDEwMzA6Wywsezc3NjoxMDMxfV0sMTAzMTpbWzEwMzAsNzc2XV0sMTAzNjpbWzEwNTAsNzY5XV0sMTAzNzpbWzEwNDgsNzY4XV0sMTAzODpbWzEwNTksNzc0XV0sMTA0MDpbLCx7Nzc0OjEyMzIsNzc2OjEyMzR9XSwxMDQzOlssLHs3Njk6MTAyN31dLDEwNDU6Wywsezc2ODoxMDI0LDc3NDoxMjM4LDc3NjoxMDI1fV0sMTA0NjpbLCx7Nzc0OjEyMTcsNzc2OjEyNDR9XSwxMDQ3OlssLHs3NzY6MTI0Nn1dLDEwNDg6Wywsezc2ODoxMDM3LDc3MjoxMjUwLDc3NDoxMDQ5LDc3NjoxMjUyfV0sMTA0OTpbWzEwNDgsNzc0XV0sMTA1MDpbLCx7NzY5OjEwMzZ9XSwxMDU0OlssLHs3NzY6MTI1NH1dLDEwNTk6Wywsezc3MjoxMjYyLDc3NDoxMDM4LDc3NjoxMjY0LDc3OToxMjY2fV0sMTA2MzpbLCx7Nzc2OjEyNjh9XSwxMDY3OlssLHs3NzY6MTI3Mn1dLDEwNjk6Wywsezc3NjoxMjYwfV0sMTA3MjpbLCx7Nzc0OjEyMzMsNzc2OjEyMzV9XSwxMDc1OlssLHs3Njk6MTEwN31dLDEwNzc6Wywsezc2ODoxMTA0LDc3NDoxMjM5LDc3NjoxMTA1fV0sMTA3ODpbLCx7Nzc0OjEyMTgsNzc2OjEyNDV9XSwxMDc5OlssLHs3NzY6MTI0N31dLDEwODA6Wywsezc2ODoxMTE3LDc3MjoxMjUxLDc3NDoxMDgxLDc3NjoxMjUzfV0sMTA4MTpbWzEwODAsNzc0XV0sMTA4MjpbLCx7NzY5OjExMTZ9XSwxMDg2OlssLHs3NzY6MTI1NX1dLDEwOTE6Wywsezc3MjoxMjYzLDc3NDoxMTE4LDc3NjoxMjY1LDc3OToxMjY3fV0sMTA5NTpbLCx7Nzc2OjEyNjl9XSwxMDk5OlssLHs3NzY6MTI3M31dLDExMDE6Wywsezc3NjoxMjYxfV0sMTEwNDpbWzEwNzcsNzY4XV0sMTEwNTpbWzEwNzcsNzc2XV0sMTEwNzpbWzEwNzUsNzY5XV0sMTExMDpbLCx7Nzc2OjExMTF9XSwxMTExOltbMTExMCw3NzZdXSwxMTE2OltbMTA4Miw3NjldXSwxMTE3OltbMTA4MCw3NjhdXSwxMTE4OltbMTA5MSw3NzRdXSwxMTQwOlssLHs3ODM6MTE0Mn1dLDExNDE6Wywsezc4MzoxMTQzfV0sMTE0MjpbWzExNDAsNzgzXV0sMTE0MzpbWzExNDEsNzgzXV0sMTE1NTpbLDIzMF0sMTE1NjpbLDIzMF0sMTE1NzpbLDIzMF0sMTE1ODpbLDIzMF0sMTE1OTpbLDIzMF0sMTIxNzpbWzEwNDYsNzc0XV0sMTIxODpbWzEwNzgsNzc0XV0sMTIzMjpbWzEwNDAsNzc0XV0sMTIzMzpbWzEwNzIsNzc0XV0sMTIzNDpbWzEwNDAsNzc2XV0sMTIzNTpbWzEwNzIsNzc2XV0sMTIzODpbWzEwNDUsNzc0XV0sMTIzOTpbWzEwNzcsNzc0XV0sMTI0MDpbLCx7Nzc2OjEyNDJ9XSwxMjQxOlssLHs3NzY6MTI0M31dLDEyNDI6W1sxMjQwLDc3Nl1dLDEyNDM6W1sxMjQxLDc3Nl1dLDEyNDQ6W1sxMDQ2LDc3Nl1dLDEyNDU6W1sxMDc4LDc3Nl1dLDEyNDY6W1sxMDQ3LDc3Nl1dLDEyNDc6W1sxMDc5LDc3Nl1dLDEyNTA6W1sxMDQ4LDc3Ml1dLDEyNTE6W1sxMDgwLDc3Ml1dLDEyNTI6W1sxMDQ4LDc3Nl1dLDEyNTM6W1sxMDgwLDc3Nl1dLDEyNTQ6W1sxMDU0LDc3Nl1dLDEyNTU6W1sxMDg2LDc3Nl1dLDEyNTY6Wywsezc3NjoxMjU4fV0sMTI1NzpbLCx7Nzc2OjEyNTl9XSwxMjU4OltbMTI1Niw3NzZdXSwxMjU5OltbMTI1Nyw3NzZdXSwxMjYwOltbMTA2OSw3NzZdXSwxMjYxOltbMTEwMSw3NzZdXSwxMjYyOltbMTA1OSw3NzJdXSwxMjYzOltbMTA5MSw3NzJdXSwxMjY0OltbMTA1OSw3NzZdXSwxMjY1OltbMTA5MSw3NzZdXSwxMjY2OltbMTA1OSw3NzldXSwxMjY3OltbMTA5MSw3NzldXSwxMjY4OltbMTA2Myw3NzZdXSwxMjY5OltbMTA5NSw3NzZdXSwxMjcyOltbMTA2Nyw3NzZdXSwxMjczOltbMTA5OSw3NzZdXX0sCjEyODA6ezE0MTU6W1sxMzgxLDE0MTBdLDI1Nl0sMTQyNTpbLDIyMF0sMTQyNjpbLDIzMF0sMTQyNzpbLDIzMF0sMTQyODpbLDIzMF0sMTQyOTpbLDIzMF0sMTQzMDpbLDIyMF0sMTQzMTpbLDIzMF0sMTQzMjpbLDIzMF0sMTQzMzpbLDIzMF0sMTQzNDpbLDIyMl0sMTQzNTpbLDIyMF0sMTQzNjpbLDIzMF0sMTQzNzpbLDIzMF0sMTQzODpbLDIzMF0sMTQzOTpbLDIzMF0sMTQ0MDpbLDIzMF0sMTQ0MTpbLDIzMF0sMTQ0MjpbLDIyMF0sMTQ0MzpbLDIyMF0sMTQ0NDpbLDIyMF0sMTQ0NTpbLDIyMF0sMTQ0NjpbLDIyMF0sMTQ0NzpbLDIyMF0sMTQ0ODpbLDIzMF0sMTQ0OTpbLDIzMF0sMTQ1MDpbLDIyMF0sMTQ1MTpbLDIzMF0sMTQ1MjpbLDIzMF0sMTQ1MzpbLDIyMl0sMTQ1NDpbLDIyOF0sMTQ1NTpbLDIzMF0sMTQ1NjpbLDEwXSwxNDU3OlssMTFdLDE0NTg6WywxMl0sMTQ1OTpbLDEzXSwxNDYwOlssMTRdLDE0NjE6WywxNV0sMTQ2MjpbLDE2XSwxNDYzOlssMTddLDE0NjQ6WywxOF0sMTQ2NTpbLDE5XSwxNDY2OlssMTldLDE0Njc6WywyMF0sMTQ2ODpbLDIxXSwxNDY5OlssMjJdLDE0NzE6WywyM10sMTQ3MzpbLDI0XSwxNDc0OlssMjVdLDE0NzY6WywyMzBdLDE0Nzc6WywyMjBdLDE0Nzk6WywxOF19LAoxNTM2OnsxNTUyOlssMjMwXSwxNTUzOlssMjMwXSwxNTU0OlssMjMwXSwxNTU1OlssMjMwXSwxNTU2OlssMjMwXSwxNTU3OlssMjMwXSwxNTU4OlssMjMwXSwxNTU5OlssMjMwXSwxNTYwOlssMzBdLDE1NjE6WywzMV0sMTU2MjpbLDMyXSwxNTcwOltbMTU3NSwxNjE5XV0sMTU3MTpbWzE1NzUsMTYyMF1dLDE1NzI6W1sxNjA4LDE2MjBdXSwxNTczOltbMTU3NSwxNjIxXV0sMTU3NDpbWzE2MTAsMTYyMF1dLDE1NzU6WywsezE2MTk6MTU3MCwxNjIwOjE1NzEsMTYyMToxNTczfV0sMTYwODpbLCx7MTYyMDoxNTcyfV0sMTYxMDpbLCx7MTYyMDoxNTc0fV0sMTYxMTpbLDI3XSwxNjEyOlssMjhdLDE2MTM6WywyOV0sMTYxNDpbLDMwXSwxNjE1OlssMzFdLDE2MTY6WywzMl0sMTYxNzpbLDMzXSwxNjE4OlssMzRdLDE2MTk6WywyMzBdLDE2MjA6WywyMzBdLDE2MjE6WywyMjBdLDE2MjI6WywyMjBdLDE2MjM6WywyMzBdLDE2MjQ6WywyMzBdLDE2MjU6WywyMzBdLDE2MjY6WywyMzBdLDE2Mjc6WywyMzBdLDE2Mjg6WywyMjBdLDE2Mjk6WywyMzBdLDE2MzA6WywyMzBdLDE2MzE6WywyMjBdLDE2NDg6WywzNV0sMTY1MzpbWzE1NzUsMTY1Ml0sMjU2XSwxNjU0OltbMTYwOCwxNjUyXSwyNTZdLDE2NTU6W1sxNzM1LDE2NTJdLDI1Nl0sMTY1NjpbWzE2MTAsMTY1Ml0sMjU2XSwxNzI4OltbMTc0OSwxNjIwXV0sMTcyOTpbLCx7MTYyMDoxNzMwfV0sMTczMDpbWzE3MjksMTYyMF1dLDE3NDY6WywsezE2MjA6MTc0N31dLDE3NDc6W1sxNzQ2LDE2MjBdXSwxNzQ5OlssLHsxNjIwOjE3Mjh9XSwxNzUwOlssMjMwXSwxNzUxOlssMjMwXSwxNzUyOlssMjMwXSwxNzUzOlssMjMwXSwxNzU0OlssMjMwXSwxNzU1OlssMjMwXSwxNzU2OlssMjMwXSwxNzU5OlssMjMwXSwxNzYwOlssMjMwXSwxNzYxOlssMjMwXSwxNzYyOlssMjMwXSwxNzYzOlssMjIwXSwxNzY0OlssMjMwXSwxNzY3OlssMjMwXSwxNzY4OlssMjMwXSwxNzcwOlssMjIwXSwxNzcxOlssMjMwXSwxNzcyOlssMjMwXSwxNzczOlssMjIwXX0sCjE3OTI6ezE4MDk6WywzNl0sMTg0MDpbLDIzMF0sMTg0MTpbLDIyMF0sMTg0MjpbLDIzMF0sMTg0MzpbLDIzMF0sMTg0NDpbLDIyMF0sMTg0NTpbLDIzMF0sMTg0NjpbLDIzMF0sMTg0NzpbLDIyMF0sMTg0ODpbLDIyMF0sMTg0OTpbLDIyMF0sMTg1MDpbLDIzMF0sMTg1MTpbLDIyMF0sMTg1MjpbLDIyMF0sMTg1MzpbLDIzMF0sMTg1NDpbLDIyMF0sMTg1NTpbLDIzMF0sMTg1NjpbLDIzMF0sMTg1NzpbLDIzMF0sMTg1ODpbLDIyMF0sMTg1OTpbLDIzMF0sMTg2MDpbLDIyMF0sMTg2MTpbLDIzMF0sMTg2MjpbLDIyMF0sMTg2MzpbLDIzMF0sMTg2NDpbLDIyMF0sMTg2NTpbLDIzMF0sMTg2NjpbLDIzMF0sMjAyNzpbLDIzMF0sMjAyODpbLDIzMF0sMjAyOTpbLDIzMF0sMjAzMDpbLDIzMF0sMjAzMTpbLDIzMF0sMjAzMjpbLDIzMF0sMjAzMzpbLDIzMF0sMjAzNDpbLDIyMF0sMjAzNTpbLDIzMF19LAoyMDQ4OnsyMDcwOlssMjMwXSwyMDcxOlssMjMwXSwyMDcyOlssMjMwXSwyMDczOlssMjMwXSwyMDc1OlssMjMwXSwyMDc2OlssMjMwXSwyMDc3OlssMjMwXSwyMDc4OlssMjMwXSwyMDc5OlssMjMwXSwyMDgwOlssMjMwXSwyMDgxOlssMjMwXSwyMDgyOlssMjMwXSwyMDgzOlssMjMwXSwyMDg1OlssMjMwXSwyMDg2OlssMjMwXSwyMDg3OlssMjMwXSwyMDg5OlssMjMwXSwyMDkwOlssMjMwXSwyMDkxOlssMjMwXSwyMDkyOlssMjMwXSwyMDkzOlssMjMwXSwyMTM3OlssMjIwXSwyMTM4OlssMjIwXSwyMTM5OlssMjIwXSwyMjc2OlssMjMwXSwyMjc3OlssMjMwXSwyMjc4OlssMjIwXSwyMjc5OlssMjMwXSwyMjgwOlssMjMwXSwyMjgxOlssMjIwXSwyMjgyOlssMjMwXSwyMjgzOlssMjMwXSwyMjg0OlssMjMwXSwyMjg1OlssMjIwXSwyMjg2OlssMjIwXSwyMjg3OlssMjIwXSwyMjg4OlssMjddLDIyODk6WywyOF0sMjI5MDpbLDI5XSwyMjkxOlssMjMwXSwyMjkyOlssMjMwXSwyMjkzOlssMjMwXSwyMjk0OlssMjIwXSwyMjk1OlssMjMwXSwyMjk2OlssMjMwXSwyMjk3OlssMjIwXSwyMjk4OlssMjIwXSwyMjk5OlssMjMwXSwyMzAwOlssMjMwXSwyMzAxOlssMjMwXSwyMzAyOlssMjMwXSwyMzAzOlssMjMwXX0sCjIzMDQ6ezIzNDQ6WywsezIzNjQ6MjM0NX1dLDIzNDU6W1syMzQ0LDIzNjRdXSwyMzUyOlssLHsyMzY0OjIzNTN9XSwyMzUzOltbMjM1MiwyMzY0XV0sMjM1NTpbLCx7MjM2NDoyMzU2fV0sMjM1NjpbWzIzNTUsMjM2NF1dLDIzNjQ6Wyw3XSwyMzgxOlssOV0sMjM4NTpbLDIzMF0sMjM4NjpbLDIyMF0sMjM4NzpbLDIzMF0sMjM4ODpbLDIzMF0sMjM5MjpbWzIzMjUsMjM2NF0sNTEyXSwyMzkzOltbMjMyNiwyMzY0XSw1MTJdLDIzOTQ6W1syMzI3LDIzNjRdLDUxMl0sMjM5NTpbWzIzMzIsMjM2NF0sNTEyXSwyMzk2OltbMjMzNywyMzY0XSw1MTJdLDIzOTc6W1syMzM4LDIzNjRdLDUxMl0sMjM5ODpbWzIzNDcsMjM2NF0sNTEyXSwyMzk5OltbMjM1MSwyMzY0XSw1MTJdLDI0OTI6Wyw3XSwyNTAzOlssLHsyNDk0OjI1MDcsMjUxOToyNTA4fV0sMjUwNzpbWzI1MDMsMjQ5NF1dLDI1MDg6W1syNTAzLDI1MTldXSwyNTA5OlssOV0sMjUyNDpbWzI0NjUsMjQ5Ml0sNTEyXSwyNTI1OltbMjQ2NiwyNDkyXSw1MTJdLDI1Mjc6W1syNDc5LDI0OTJdLDUxMl19LAoyNTYwOnsyNjExOltbMjYxMCwyNjIwXSw1MTJdLDI2MTQ6W1syNjE2LDI2MjBdLDUxMl0sMjYyMDpbLDddLDI2Mzc6Wyw5XSwyNjQ5OltbMjU4MiwyNjIwXSw1MTJdLDI2NTA6W1syNTgzLDI2MjBdLDUxMl0sMjY1MTpbWzI1ODgsMjYyMF0sNTEyXSwyNjU0OltbMjYwMywyNjIwXSw1MTJdLDI3NDg6Wyw3XSwyNzY1OlssOV0sNjgxMDk6WywyMjBdLDY4MTExOlssMjMwXSw2ODE1MjpbLDIzMF0sNjgxNTM6WywxXSw2ODE1NDpbLDIyMF0sNjgxNTk6Wyw5XSw2ODMyNTpbLDIzMF0sNjgzMjY6WywyMjBdfSwKMjgxNjp7Mjg3NjpbLDddLDI4ODc6WywsezI4Nzg6Mjg5MSwyOTAyOjI4ODgsMjkwMzoyODkyfV0sMjg4ODpbWzI4ODcsMjkwMl1dLDI4OTE6W1syODg3LDI4NzhdXSwyODkyOltbMjg4NywyOTAzXV0sMjg5MzpbLDldLDI5MDg6W1syODQ5LDI4NzZdLDUxMl0sMjkwOTpbWzI4NTAsMjg3Nl0sNTEyXSwyOTYyOlssLHszMDMxOjI5NjR9XSwyOTY0OltbMjk2MiwzMDMxXV0sMzAxNDpbLCx7MzAwNjozMDE4LDMwMzE6MzAyMH1dLDMwMTU6WywsezMwMDY6MzAxOX1dLDMwMTg6W1szMDE0LDMwMDZdXSwzMDE5OltbMzAxNSwzMDA2XV0sMzAyMDpbWzMwMTQsMzAzMV1dLDMwMjE6Wyw5XX0sCjMwNzI6ezMxNDI6WywsezMxNTg6MzE0NH1dLDMxNDQ6W1szMTQyLDMxNThdXSwzMTQ5OlssOV0sMzE1NzpbLDg0XSwzMTU4OlssOTFdLDMyNjA6Wyw3XSwzMjYzOlssLHszMjg1OjMyNjR9XSwzMjY0OltbMzI2MywzMjg1XV0sMzI3MDpbLCx7MzI2NjozMjc0LDMyODU6MzI3MSwzMjg2OjMyNzJ9XSwzMjcxOltbMzI3MCwzMjg1XV0sMzI3MjpbWzMyNzAsMzI4Nl1dLDMyNzQ6W1szMjcwLDMyNjZdLCx7MzI4NTozMjc1fV0sMzI3NTpbWzMyNzQsMzI4NV1dLDMyNzc6Wyw5XX0sCjMzMjg6ezMzOTg6WywsezMzOTA6MzQwMiwzNDE1OjM0MDR9XSwzMzk5OlssLHszMzkwOjM0MDN9XSwzNDAyOltbMzM5OCwzMzkwXV0sMzQwMzpbWzMzOTksMzM5MF1dLDM0MDQ6W1szMzk4LDM0MTVdXSwzNDA1OlssOV0sMzUzMDpbLDldLDM1NDU6WywsezM1MzA6MzU0NiwzNTM1OjM1NDgsMzU1MTozNTUwfV0sMzU0NjpbWzM1NDUsMzUzMF1dLDM1NDg6W1szNTQ1LDM1MzVdLCx7MzUzMDozNTQ5fV0sMzU0OTpbWzM1NDgsMzUzMF1dLDM1NTA6W1szNTQ1LDM1NTFdXX0sCjM1ODQ6ezM2MzU6W1szNjYxLDM2MzRdLDI1Nl0sMzY0MDpbLDEwM10sMzY0MTpbLDEwM10sMzY0MjpbLDldLDM2NTY6WywxMDddLDM2NTc6WywxMDddLDM2NTg6WywxMDddLDM2NTk6WywxMDddLDM3NjM6W1szNzg5LDM3NjJdLDI1Nl0sMzc2ODpbLDExOF0sMzc2OTpbLDExOF0sMzc4NDpbLDEyMl0sMzc4NTpbLDEyMl0sMzc4NjpbLDEyMl0sMzc4NzpbLDEyMl0sMzgwNDpbWzM3NTUsMzczN10sMjU2XSwzODA1OltbMzc1NSwzNzQ1XSwyNTZdfSwKMzg0MDp7Mzg1MjpbWzM4NTFdLDI1Nl0sMzg2NDpbLDIyMF0sMzg2NTpbLDIyMF0sMzg5MzpbLDIyMF0sMzg5NTpbLDIyMF0sMzg5NzpbLDIxNl0sMzkwNzpbWzM5MDYsNDAyM10sNTEyXSwzOTE3OltbMzkxNiw0MDIzXSw1MTJdLDM5MjI6W1szOTIxLDQwMjNdLDUxMl0sMzkyNzpbWzM5MjYsNDAyM10sNTEyXSwzOTMyOltbMzkzMSw0MDIzXSw1MTJdLDM5NDU6W1szOTA0LDQwMjFdLDUxMl0sMzk1MzpbLDEyOV0sMzk1NDpbLDEzMF0sMzk1NTpbWzM5NTMsMzk1NF0sNTEyXSwzOTU2OlssMTMyXSwzOTU3OltbMzk1MywzOTU2XSw1MTJdLDM5NTg6W1s0MDE4LDM5NjhdLDUxMl0sMzk1OTpbWzQwMTgsMzk2OV0sMjU2XSwzOTYwOltbNDAxOSwzOTY4XSw1MTJdLDM5NjE6W1s0MDE5LDM5NjldLDI1Nl0sMzk2MjpbLDEzMF0sMzk2MzpbLDEzMF0sMzk2NDpbLDEzMF0sMzk2NTpbLDEzMF0sMzk2ODpbLDEzMF0sMzk2OTpbWzM5NTMsMzk2OF0sNTEyXSwzOTcwOlssMjMwXSwzOTcxOlssMjMwXSwzOTcyOlssOV0sMzk3NDpbLDIzMF0sMzk3NTpbLDIzMF0sMzk4NzpbWzM5ODYsNDAyM10sNTEyXSwzOTk3OltbMzk5Niw0MDIzXSw1MTJdLDQwMDI6W1s0MDAxLDQwMjNdLDUxMl0sNDAwNzpbWzQwMDYsNDAyM10sNTEyXSw0MDEyOltbNDAxMSw0MDIzXSw1MTJdLDQwMjU6W1szOTg0LDQwMjFdLDUxMl0sNDAzODpbLDIyMF19LAo0MDk2Ons0MTMzOlssLHs0MTQyOjQxMzR9XSw0MTM0OltbNDEzMyw0MTQyXV0sNDE1MTpbLDddLDQxNTM6Wyw5XSw0MTU0OlssOV0sNDIzNzpbLDIyMF0sNDM0ODpbWzQzMTZdLDI1Nl0sNjk3MDI6Wyw5XSw2OTc1OTpbLDldLDY5Nzg1OlssLHs2OTgxODo2OTc4Nn1dLDY5Nzg2OltbNjk3ODUsNjk4MThdXSw2OTc4NzpbLCx7Njk4MTg6Njk3ODh9XSw2OTc4ODpbWzY5Nzg3LDY5ODE4XV0sNjk3OTc6WywsezY5ODE4OjY5ODAzfV0sNjk4MDM6W1s2OTc5Nyw2OTgxOF1dLDY5ODE3OlssOV0sNjk4MTg6Wyw3XX0sCjQzNTI6ezY5ODg4OlssMjMwXSw2OTg4OTpbLDIzMF0sNjk4OTA6WywyMzBdLDY5OTM0OltbNjk5MzcsNjk5MjddXSw2OTkzNTpbWzY5OTM4LDY5OTI3XV0sNjk5Mzc6WywsezY5OTI3OjY5OTM0fV0sNjk5Mzg6WywsezY5OTI3OjY5OTM1fV0sNjk5Mzk6Wyw5XSw2OTk0MDpbLDldLDcwMDAzOlssN10sNzAwODA6Wyw5XX0sCjQ2MDg6ezcwMTk3OlssOV0sNzAxOTg6Wyw3XSw3MDM3NzpbLDddLDcwMzc4OlssOV19LAo0ODY0Ons0OTU3OlssMjMwXSw0OTU4OlssMjMwXSw0OTU5OlssMjMwXSw3MDQ2MDpbLDddLDcwNDcxOlssLHs3MDQ2Mjo3MDQ3NSw3MDQ4Nzo3MDQ3Nn1dLDcwNDc1OltbNzA0NzEsNzA0NjJdXSw3MDQ3NjpbWzcwNDcxLDcwNDg3XV0sNzA0Nzc6Wyw5XSw3MDUwMjpbLDIzMF0sNzA1MDM6WywyMzBdLDcwNTA0OlssMjMwXSw3MDUwNTpbLDIzMF0sNzA1MDY6WywyMzBdLDcwNTA3OlssMjMwXSw3MDUwODpbLDIzMF0sNzA1MTI6WywyMzBdLDcwNTEzOlssMjMwXSw3MDUxNDpbLDIzMF0sNzA1MTU6WywyMzBdLDcwNTE2OlssMjMwXX0sCjUxMjA6ezcwODQxOlssLHs3MDgzMjo3MDg0NCw3MDg0Mjo3MDg0Myw3MDg0NTo3MDg0Nn1dLDcwODQzOltbNzA4NDEsNzA4NDJdXSw3MDg0NDpbWzcwODQxLDcwODMyXV0sNzA4NDY6W1s3MDg0MSw3MDg0NV1dLDcwODUwOlssOV0sNzA4NTE6Wyw3XX0sCjUzNzY6ezcxMDk2OlssLHs3MTA4Nzo3MTA5OH1dLDcxMDk3OlssLHs3MTA4Nzo3MTA5OX1dLDcxMDk4OltbNzEwOTYsNzEwODddXSw3MTA5OTpbWzcxMDk3LDcxMDg3XV0sNzExMDM6Wyw5XSw3MTEwNDpbLDddfSwKNTYzMjp7NzEyMzE6Wyw5XSw3MTM1MDpbLDldLDcxMzUxOlssN119LAo1ODg4Ons1OTA4OlssOV0sNTk0MDpbLDldLDYwOTg6Wyw5XSw2MTA5OlssMjMwXX0sCjYxNDQ6ezYzMTM6WywyMjhdfSwKNjQwMDp7NjQ1NzpbLDIyMl0sNjQ1ODpbLDIzMF0sNjQ1OTpbLDIyMF19LAo2NjU2Ons2Njc5OlssMjMwXSw2NjgwOlssMjIwXSw2NzUyOlssOV0sNjc3MzpbLDIzMF0sNjc3NDpbLDIzMF0sNjc3NTpbLDIzMF0sNjc3NjpbLDIzMF0sNjc3NzpbLDIzMF0sNjc3ODpbLDIzMF0sNjc3OTpbLDIzMF0sNjc4MDpbLDIzMF0sNjc4MzpbLDIyMF0sNjgzMjpbLDIzMF0sNjgzMzpbLDIzMF0sNjgzNDpbLDIzMF0sNjgzNTpbLDIzMF0sNjgzNjpbLDIzMF0sNjgzNzpbLDIyMF0sNjgzODpbLDIyMF0sNjgzOTpbLDIyMF0sNjg0MDpbLDIyMF0sNjg0MTpbLDIyMF0sNjg0MjpbLDIyMF0sNjg0MzpbLDIzMF0sNjg0NDpbLDIzMF0sNjg0NTpbLDIyMF19LAo2OTEyOns2OTE3OlssLHs2OTY1OjY5MTh9XSw2OTE4OltbNjkxNyw2OTY1XV0sNjkxOTpbLCx7Njk2NTo2OTIwfV0sNjkyMDpbWzY5MTksNjk2NV1dLDY5MjE6WywsezY5NjU6NjkyMn1dLDY5MjI6W1s2OTIxLDY5NjVdXSw2OTIzOlssLHs2OTY1OjY5MjR9XSw2OTI0OltbNjkyMyw2OTY1XV0sNjkyNTpbLCx7Njk2NTo2OTI2fV0sNjkyNjpbWzY5MjUsNjk2NV1dLDY5Mjk6WywsezY5NjU6NjkzMH1dLDY5MzA6W1s2OTI5LDY5NjVdXSw2OTY0OlssN10sNjk3MDpbLCx7Njk2NTo2OTcxfV0sNjk3MTpbWzY5NzAsNjk2NV1dLDY5NzI6WywsezY5NjU6Njk3M31dLDY5NzM6W1s2OTcyLDY5NjVdXSw2OTc0OlssLHs2OTY1OjY5NzZ9XSw2OTc1OlssLHs2OTY1OjY5Nzd9XSw2OTc2OltbNjk3NCw2OTY1XV0sNjk3NzpbWzY5NzUsNjk2NV1dLDY5Nzg6WywsezY5NjU6Njk3OX1dLDY5Nzk6W1s2OTc4LDY5NjVdXSw2OTgwOlssOV0sNzAxOTpbLDIzMF0sNzAyMDpbLDIyMF0sNzAyMTpbLDIzMF0sNzAyMjpbLDIzMF0sNzAyMzpbLDIzMF0sNzAyNDpbLDIzMF0sNzAyNTpbLDIzMF0sNzAyNjpbLDIzMF0sNzAyNzpbLDIzMF0sNzA4MjpbLDldLDcwODM6Wyw5XSw3MTQyOlssN10sNzE1NDpbLDldLDcxNTU6Wyw5XX0sCjcxNjg6ezcyMjM6Wyw3XSw3Mzc2OlssMjMwXSw3Mzc3OlssMjMwXSw3Mzc4OlssMjMwXSw3MzgwOlssMV0sNzM4MTpbLDIyMF0sNzM4MjpbLDIyMF0sNzM4MzpbLDIyMF0sNzM4NDpbLDIyMF0sNzM4NTpbLDIyMF0sNzM4NjpbLDIzMF0sNzM4NzpbLDIzMF0sNzM4ODpbLDIyMF0sNzM4OTpbLDIyMF0sNzM5MDpbLDIyMF0sNzM5MTpbLDIyMF0sNzM5MjpbLDIzMF0sNzM5NDpbLDFdLDczOTU6WywxXSw3Mzk2OlssMV0sNzM5NzpbLDFdLDczOTg6WywxXSw3Mzk5OlssMV0sNzQwMDpbLDFdLDc0MDU6WywyMjBdLDc0MTI6WywyMzBdLDc0MTY6WywyMzBdLDc0MTc6WywyMzBdfSwKNzQyNDp7NzQ2ODpbWzY1XSwyNTZdLDc0Njk6W1sxOThdLDI1Nl0sNzQ3MDpbWzY2XSwyNTZdLDc0NzI6W1s2OF0sMjU2XSw3NDczOltbNjldLDI1Nl0sNzQ3NDpbWzM5OF0sMjU2XSw3NDc1OltbNzFdLDI1Nl0sNzQ3NjpbWzcyXSwyNTZdLDc0Nzc6W1s3M10sMjU2XSw3NDc4OltbNzRdLDI1Nl0sNzQ3OTpbWzc1XSwyNTZdLDc0ODA6W1s3Nl0sMjU2XSw3NDgxOltbNzddLDI1Nl0sNzQ4MjpbWzc4XSwyNTZdLDc0ODQ6W1s3OV0sMjU2XSw3NDg1OltbNTQ2XSwyNTZdLDc0ODY6W1s4MF0sMjU2XSw3NDg3OltbODJdLDI1Nl0sNzQ4ODpbWzg0XSwyNTZdLDc0ODk6W1s4NV0sMjU2XSw3NDkwOltbODddLDI1Nl0sNzQ5MTpbWzk3XSwyNTZdLDc0OTI6W1s1OTJdLDI1Nl0sNzQ5MzpbWzU5M10sMjU2XSw3NDk0OltbNzQyNl0sMjU2XSw3NDk1OltbOThdLDI1Nl0sNzQ5NjpbWzEwMF0sMjU2XSw3NDk3OltbMTAxXSwyNTZdLDc0OTg6W1s2MDFdLDI1Nl0sNzQ5OTpbWzYwM10sMjU2XSw3NTAwOltbNjA0XSwyNTZdLDc1MDE6W1sxMDNdLDI1Nl0sNzUwMzpbWzEwN10sMjU2XSw3NTA0OltbMTA5XSwyNTZdLDc1MDU6W1szMzFdLDI1Nl0sNzUwNjpbWzExMV0sMjU2XSw3NTA3OltbNTk2XSwyNTZdLDc1MDg6W1s3NDQ2XSwyNTZdLDc1MDk6W1s3NDQ3XSwyNTZdLDc1MTA6W1sxMTJdLDI1Nl0sNzUxMTpbWzExNl0sMjU2XSw3NTEyOltbMTE3XSwyNTZdLDc1MTM6W1s3NDUzXSwyNTZdLDc1MTQ6W1s2MjNdLDI1Nl0sNzUxNTpbWzExOF0sMjU2XSw3NTE2OltbNzQ2MV0sMjU2XSw3NTE3OltbOTQ2XSwyNTZdLDc1MTg6W1s5NDddLDI1Nl0sNzUxOTpbWzk0OF0sMjU2XSw3NTIwOltbOTY2XSwyNTZdLDc1MjE6W1s5NjddLDI1Nl0sNzUyMjpbWzEwNV0sMjU2XSw3NTIzOltbMTE0XSwyNTZdLDc1MjQ6W1sxMTddLDI1Nl0sNzUyNTpbWzExOF0sMjU2XSw3NTI2OltbOTQ2XSwyNTZdLDc1Mjc6W1s5NDddLDI1Nl0sNzUyODpbWzk2MV0sMjU2XSw3NTI5OltbOTY2XSwyNTZdLDc1MzA6W1s5NjddLDI1Nl0sNzU0NDpbWzEwODVdLDI1Nl0sNzU3OTpbWzU5NF0sMjU2XSw3NTgwOltbOTldLDI1Nl0sNzU4MTpbWzU5N10sMjU2XSw3NTgyOltbMjQwXSwyNTZdLDc1ODM6W1s2MDRdLDI1Nl0sNzU4NDpbWzEwMl0sMjU2XSw3NTg1OltbNjA3XSwyNTZdLDc1ODY6W1s2MDldLDI1Nl0sNzU4NzpbWzYxM10sMjU2XSw3NTg4OltbNjE2XSwyNTZdLDc1ODk6W1s2MTddLDI1Nl0sNzU5MDpbWzYxOF0sMjU2XSw3NTkxOltbNzU0N10sMjU2XSw3NTkyOltbNjY5XSwyNTZdLDc1OTM6W1s2MjFdLDI1Nl0sNzU5NDpbWzc1NTddLDI1Nl0sNzU5NTpbWzY3MV0sMjU2XSw3NTk2OltbNjI1XSwyNTZdLDc1OTc6W1s2MjRdLDI1Nl0sNzU5ODpbWzYyNl0sMjU2XSw3NTk5OltbNjI3XSwyNTZdLDc2MDA6W1s2MjhdLDI1Nl0sNzYwMTpbWzYyOV0sMjU2XSw3NjAyOltbNjMyXSwyNTZdLDc2MDM6W1s2NDJdLDI1Nl0sNzYwNDpbWzY0M10sMjU2XSw3NjA1OltbNDI3XSwyNTZdLDc2MDY6W1s2NDldLDI1Nl0sNzYwNzpbWzY1MF0sMjU2XSw3NjA4OltbNzQ1Ml0sMjU2XSw3NjA5OltbNjUxXSwyNTZdLDc2MTA6W1s2NTJdLDI1Nl0sNzYxMTpbWzEyMl0sMjU2XSw3NjEyOltbNjU2XSwyNTZdLDc2MTM6W1s2NTddLDI1Nl0sNzYxNDpbWzY1OF0sMjU2XSw3NjE1OltbOTUyXSwyNTZdLDc2MTY6WywyMzBdLDc2MTc6WywyMzBdLDc2MTg6WywyMjBdLDc2MTk6WywyMzBdLDc2MjA6WywyMzBdLDc2MjE6WywyMzBdLDc2MjI6WywyMzBdLDc2MjM6WywyMzBdLDc2MjQ6WywyMzBdLDc2MjU6WywyMzBdLDc2MjY6WywyMjBdLDc2Mjc6WywyMzBdLDc2Mjg6WywyMzBdLDc2Mjk6WywyMzRdLDc2MzA6WywyMTRdLDc2MzE6WywyMjBdLDc2MzI6WywyMDJdLDc2MzM6WywyMzBdLDc2MzQ6WywyMzBdLDc2MzU6WywyMzBdLDc2MzY6WywyMzBdLDc2Mzc6WywyMzBdLDc2Mzg6WywyMzBdLDc2Mzk6WywyMzBdLDc2NDA6WywyMzBdLDc2NDE6WywyMzBdLDc2NDI6WywyMzBdLDc2NDM6WywyMzBdLDc2NDQ6WywyMzBdLDc2NDU6WywyMzBdLDc2NDY6WywyMzBdLDc2NDc6WywyMzBdLDc2NDg6WywyMzBdLDc2NDk6WywyMzBdLDc2NTA6WywyMzBdLDc2NTE6WywyMzBdLDc2NTI6WywyMzBdLDc2NTM6WywyMzBdLDc2NTQ6WywyMzBdLDc2NTU6WywyMzBdLDc2NTY6WywyMzBdLDc2NTc6WywyMzBdLDc2NTg6WywyMzBdLDc2NTk6WywyMzBdLDc2NjA6WywyMzBdLDc2NjE6WywyMzBdLDc2NjI6WywyMzBdLDc2NjM6WywyMzBdLDc2NjQ6WywyMzBdLDc2NjU6WywyMzBdLDc2NjY6WywyMzBdLDc2Njc6WywyMzBdLDc2Njg6WywyMzBdLDc2Njk6WywyMzBdLDc2NzY6WywyMzNdLDc2Nzc6WywyMjBdLDc2Nzg6WywyMzBdLDc2Nzk6WywyMjBdfSwKNzY4MDp7NzY4MDpbWzY1LDgwNV1dLDc2ODE6W1s5Nyw4MDVdXSw3NjgyOltbNjYsNzc1XV0sNzY4MzpbWzk4LDc3NV1dLDc2ODQ6W1s2Niw4MDNdXSw3Njg1OltbOTgsODAzXV0sNzY4NjpbWzY2LDgxN11dLDc2ODc6W1s5OCw4MTddXSw3Njg4OltbMTk5LDc2OV1dLDc2ODk6W1syMzEsNzY5XV0sNzY5MDpbWzY4LDc3NV1dLDc2OTE6W1sxMDAsNzc1XV0sNzY5MjpbWzY4LDgwM11dLDc2OTM6W1sxMDAsODAzXV0sNzY5NDpbWzY4LDgxN11dLDc2OTU6W1sxMDAsODE3XV0sNzY5NjpbWzY4LDgwN11dLDc2OTc6W1sxMDAsODA3XV0sNzY5ODpbWzY4LDgxM11dLDc2OTk6W1sxMDAsODEzXV0sNzcwMDpbWzI3NCw3NjhdXSw3NzAxOltbMjc1LDc2OF1dLDc3MDI6W1syNzQsNzY5XV0sNzcwMzpbWzI3NSw3NjldXSw3NzA0OltbNjksODEzXV0sNzcwNTpbWzEwMSw4MTNdXSw3NzA2OltbNjksODE2XV0sNzcwNzpbWzEwMSw4MTZdXSw3NzA4OltbNTUyLDc3NF1dLDc3MDk6W1s1NTMsNzc0XV0sNzcxMDpbWzcwLDc3NV1dLDc3MTE6W1sxMDIsNzc1XV0sNzcxMjpbWzcxLDc3Ml1dLDc3MTM6W1sxMDMsNzcyXV0sNzcxNDpbWzcyLDc3NV1dLDc3MTU6W1sxMDQsNzc1XV0sNzcxNjpbWzcyLDgwM11dLDc3MTc6W1sxMDQsODAzXV0sNzcxODpbWzcyLDc3Nl1dLDc3MTk6W1sxMDQsNzc2XV0sNzcyMDpbWzcyLDgwN11dLDc3MjE6W1sxMDQsODA3XV0sNzcyMjpbWzcyLDgxNF1dLDc3MjM6W1sxMDQsODE0XV0sNzcyNDpbWzczLDgxNl1dLDc3MjU6W1sxMDUsODE2XV0sNzcyNjpbWzIwNyw3NjldXSw3NzI3OltbMjM5LDc2OV1dLDc3Mjg6W1s3NSw3NjldXSw3NzI5OltbMTA3LDc2OV1dLDc3MzA6W1s3NSw4MDNdXSw3NzMxOltbMTA3LDgwM11dLDc3MzI6W1s3NSw4MTddXSw3NzMzOltbMTA3LDgxN11dLDc3MzQ6W1s3Niw4MDNdLCx7NzcyOjc3MzZ9XSw3NzM1OltbMTA4LDgwM10sLHs3NzI6NzczN31dLDc3MzY6W1s3NzM0LDc3Ml1dLDc3Mzc6W1s3NzM1LDc3Ml1dLDc3Mzg6W1s3Niw4MTddXSw3NzM5OltbMTA4LDgxN11dLDc3NDA6W1s3Niw4MTNdXSw3NzQxOltbMTA4LDgxM11dLDc3NDI6W1s3Nyw3NjldXSw3NzQzOltbMTA5LDc2OV1dLDc3NDQ6W1s3Nyw3NzVdXSw3NzQ1OltbMTA5LDc3NV1dLDc3NDY6W1s3Nyw4MDNdXSw3NzQ3OltbMTA5LDgwM11dLDc3NDg6W1s3OCw3NzVdXSw3NzQ5OltbMTEwLDc3NV1dLDc3NTA6W1s3OCw4MDNdXSw3NzUxOltbMTEwLDgwM11dLDc3NTI6W1s3OCw4MTddXSw3NzUzOltbMTEwLDgxN11dLDc3NTQ6W1s3OCw4MTNdXSw3NzU1OltbMTEwLDgxM11dLDc3NTY6W1syMTMsNzY5XV0sNzc1NzpbWzI0NSw3NjldXSw3NzU4OltbMjEzLDc3Nl1dLDc3NTk6W1syNDUsNzc2XV0sNzc2MDpbWzMzMiw3NjhdXSw3NzYxOltbMzMzLDc2OF1dLDc3NjI6W1szMzIsNzY5XV0sNzc2MzpbWzMzMyw3NjldXSw3NzY0OltbODAsNzY5XV0sNzc2NTpbWzExMiw3NjldXSw3NzY2OltbODAsNzc1XV0sNzc2NzpbWzExMiw3NzVdXSw3NzY4OltbODIsNzc1XV0sNzc2OTpbWzExNCw3NzVdXSw3NzcwOltbODIsODAzXSwsezc3Mjo3NzcyfV0sNzc3MTpbWzExNCw4MDNdLCx7NzcyOjc3NzN9XSw3NzcyOltbNzc3MCw3NzJdXSw3NzczOltbNzc3MSw3NzJdXSw3Nzc0OltbODIsODE3XV0sNzc3NTpbWzExNCw4MTddXSw3Nzc2OltbODMsNzc1XV0sNzc3NzpbWzExNSw3NzVdXSw3Nzc4OltbODMsODAzXSwsezc3NTo3Nzg0fV0sNzc3OTpbWzExNSw4MDNdLCx7Nzc1Ojc3ODV9XSw3NzgwOltbMzQ2LDc3NV1dLDc3ODE6W1szNDcsNzc1XV0sNzc4MjpbWzM1Miw3NzVdXSw3NzgzOltbMzUzLDc3NV1dLDc3ODQ6W1s3Nzc4LDc3NV1dLDc3ODU6W1s3Nzc5LDc3NV1dLDc3ODY6W1s4NCw3NzVdXSw3Nzg3OltbMTE2LDc3NV1dLDc3ODg6W1s4NCw4MDNdXSw3Nzg5OltbMTE2LDgwM11dLDc3OTA6W1s4NCw4MTddXSw3NzkxOltbMTE2LDgxN11dLDc3OTI6W1s4NCw4MTNdXSw3NzkzOltbMTE2LDgxM11dLDc3OTQ6W1s4NSw4MDRdXSw3Nzk1OltbMTE3LDgwNF1dLDc3OTY6W1s4NSw4MTZdXSw3Nzk3OltbMTE3LDgxNl1dLDc3OTg6W1s4NSw4MTNdXSw3Nzk5OltbMTE3LDgxM11dLDc4MDA6W1szNjAsNzY5XV0sNzgwMTpbWzM2MSw3NjldXSw3ODAyOltbMzYyLDc3Nl1dLDc4MDM6W1szNjMsNzc2XV0sNzgwNDpbWzg2LDc3MV1dLDc4MDU6W1sxMTgsNzcxXV0sNzgwNjpbWzg2LDgwM11dLDc4MDc6W1sxMTgsODAzXV0sNzgwODpbWzg3LDc2OF1dLDc4MDk6W1sxMTksNzY4XV0sNzgxMDpbWzg3LDc2OV1dLDc4MTE6W1sxMTksNzY5XV0sNzgxMjpbWzg3LDc3Nl1dLDc4MTM6W1sxMTksNzc2XV0sNzgxNDpbWzg3LDc3NV1dLDc4MTU6W1sxMTksNzc1XV0sNzgxNjpbWzg3LDgwM11dLDc4MTc6W1sxMTksODAzXV0sNzgxODpbWzg4LDc3NV1dLDc4MTk6W1sxMjAsNzc1XV0sNzgyMDpbWzg4LDc3Nl1dLDc4MjE6W1sxMjAsNzc2XV0sNzgyMjpbWzg5LDc3NV1dLDc4MjM6W1sxMjEsNzc1XV0sNzgyNDpbWzkwLDc3MF1dLDc4MjU6W1sxMjIsNzcwXV0sNzgyNjpbWzkwLDgwM11dLDc4Mjc6W1sxMjIsODAzXV0sNzgyODpbWzkwLDgxN11dLDc4Mjk6W1sxMjIsODE3XV0sNzgzMDpbWzEwNCw4MTddXSw3ODMxOltbMTE2LDc3Nl1dLDc4MzI6W1sxMTksNzc4XV0sNzgzMzpbWzEyMSw3NzhdXSw3ODM0OltbOTcsNzAyXSwyNTZdLDc4MzU6W1szODMsNzc1XV0sNzg0MDpbWzY1LDgwM10sLHs3NzA6Nzg1Miw3NzQ6Nzg2Mn1dLDc4NDE6W1s5Nyw4MDNdLCx7NzcwOjc4NTMsNzc0Ojc4NjN9XSw3ODQyOltbNjUsNzc3XV0sNzg0MzpbWzk3LDc3N11dLDc4NDQ6W1sxOTQsNzY5XV0sNzg0NTpbWzIyNiw3NjldXSw3ODQ2OltbMTk0LDc2OF1dLDc4NDc6W1syMjYsNzY4XV0sNzg0ODpbWzE5NCw3NzddXSw3ODQ5OltbMjI2LDc3N11dLDc4NTA6W1sxOTQsNzcxXV0sNzg1MTpbWzIyNiw3NzFdXSw3ODUyOltbNzg0MCw3NzBdXSw3ODUzOltbNzg0MSw3NzBdXSw3ODU0OltbMjU4LDc2OV1dLDc4NTU6W1syNTksNzY5XV0sNzg1NjpbWzI1OCw3NjhdXSw3ODU3OltbMjU5LDc2OF1dLDc4NTg6W1syNTgsNzc3XV0sNzg1OTpbWzI1OSw3NzddXSw3ODYwOltbMjU4LDc3MV1dLDc4NjE6W1syNTksNzcxXV0sNzg2MjpbWzc4NDAsNzc0XV0sNzg2MzpbWzc4NDEsNzc0XV0sNzg2NDpbWzY5LDgwM10sLHs3NzA6Nzg3OH1dLDc4NjU6W1sxMDEsODAzXSwsezc3MDo3ODc5fV0sNzg2NjpbWzY5LDc3N11dLDc4Njc6W1sxMDEsNzc3XV0sNzg2ODpbWzY5LDc3MV1dLDc4Njk6W1sxMDEsNzcxXV0sNzg3MDpbWzIwMiw3NjldXSw3ODcxOltbMjM0LDc2OV1dLDc4NzI6W1syMDIsNzY4XV0sNzg3MzpbWzIzNCw3NjhdXSw3ODc0OltbMjAyLDc3N11dLDc4NzU6W1syMzQsNzc3XV0sNzg3NjpbWzIwMiw3NzFdXSw3ODc3OltbMjM0LDc3MV1dLDc4Nzg6W1s3ODY0LDc3MF1dLDc4Nzk6W1s3ODY1LDc3MF1dLDc4ODA6W1s3Myw3NzddXSw3ODgxOltbMTA1LDc3N11dLDc4ODI6W1s3Myw4MDNdXSw3ODgzOltbMTA1LDgwM11dLDc4ODQ6W1s3OSw4MDNdLCx7NzcwOjc4OTZ9XSw3ODg1OltbMTExLDgwM10sLHs3NzA6Nzg5N31dLDc4ODY6W1s3OSw3NzddXSw3ODg3OltbMTExLDc3N11dLDc4ODg6W1syMTIsNzY5XV0sNzg4OTpbWzI0NCw3NjldXSw3ODkwOltbMjEyLDc2OF1dLDc4OTE6W1syNDQsNzY4XV0sNzg5MjpbWzIxMiw3NzddXSw3ODkzOltbMjQ0LDc3N11dLDc4OTQ6W1syMTIsNzcxXV0sNzg5NTpbWzI0NCw3NzFdXSw3ODk2OltbNzg4NCw3NzBdXSw3ODk3OltbNzg4NSw3NzBdXSw3ODk4OltbNDE2LDc2OV1dLDc4OTk6W1s0MTcsNzY5XV0sNzkwMDpbWzQxNiw3NjhdXSw3OTAxOltbNDE3LDc2OF1dLDc5MDI6W1s0MTYsNzc3XV0sNzkwMzpbWzQxNyw3NzddXSw3OTA0OltbNDE2LDc3MV1dLDc5MDU6W1s0MTcsNzcxXV0sNzkwNjpbWzQxNiw4MDNdXSw3OTA3OltbNDE3LDgwM11dLDc5MDg6W1s4NSw4MDNdXSw3OTA5OltbMTE3LDgwM11dLDc5MTA6W1s4NSw3NzddXSw3OTExOltbMTE3LDc3N11dLDc5MTI6W1s0MzEsNzY5XV0sNzkxMzpbWzQzMiw3NjldXSw3OTE0OltbNDMxLDc2OF1dLDc5MTU6W1s0MzIsNzY4XV0sNzkxNjpbWzQzMSw3NzddXSw3OTE3OltbNDMyLDc3N11dLDc5MTg6W1s0MzEsNzcxXV0sNzkxOTpbWzQzMiw3NzFdXSw3OTIwOltbNDMxLDgwM11dLDc5MjE6W1s0MzIsODAzXV0sNzkyMjpbWzg5LDc2OF1dLDc5MjM6W1sxMjEsNzY4XV0sNzkyNDpbWzg5LDgwM11dLDc5MjU6W1sxMjEsODAzXV0sNzkyNjpbWzg5LDc3N11dLDc5Mjc6W1sxMjEsNzc3XV0sNzkyODpbWzg5LDc3MV1dLDc5Mjk6W1sxMjEsNzcxXV19LAo3OTM2Ons3OTM2OltbOTQ1LDc4N10sLHs3Njg6NzkzOCw3Njk6Nzk0MCw4MzQ6Nzk0Miw4Mzc6ODA2NH1dLDc5Mzc6W1s5NDUsNzg4XSwsezc2ODo3OTM5LDc2OTo3OTQxLDgzNDo3OTQzLDgzNzo4MDY1fV0sNzkzODpbWzc5MzYsNzY4XSwsezgzNzo4MDY2fV0sNzkzOTpbWzc5MzcsNzY4XSwsezgzNzo4MDY3fV0sNzk0MDpbWzc5MzYsNzY5XSwsezgzNzo4MDY4fV0sNzk0MTpbWzc5MzcsNzY5XSwsezgzNzo4MDY5fV0sNzk0MjpbWzc5MzYsODM0XSwsezgzNzo4MDcwfV0sNzk0MzpbWzc5MzcsODM0XSwsezgzNzo4MDcxfV0sNzk0NDpbWzkxMyw3ODddLCx7NzY4Ojc5NDYsNzY5Ojc5NDgsODM0Ojc5NTAsODM3OjgwNzJ9XSw3OTQ1OltbOTEzLDc4OF0sLHs3Njg6Nzk0Nyw3Njk6Nzk0OSw4MzQ6Nzk1MSw4Mzc6ODA3M31dLDc5NDY6W1s3OTQ0LDc2OF0sLHs4Mzc6ODA3NH1dLDc5NDc6W1s3OTQ1LDc2OF0sLHs4Mzc6ODA3NX1dLDc5NDg6W1s3OTQ0LDc2OV0sLHs4Mzc6ODA3Nn1dLDc5NDk6W1s3OTQ1LDc2OV0sLHs4Mzc6ODA3N31dLDc5NTA6W1s3OTQ0LDgzNF0sLHs4Mzc6ODA3OH1dLDc5NTE6W1s3OTQ1LDgzNF0sLHs4Mzc6ODA3OX1dLDc5NTI6W1s5NDksNzg3XSwsezc2ODo3OTU0LDc2OTo3OTU2fV0sNzk1MzpbWzk0OSw3ODhdLCx7NzY4Ojc5NTUsNzY5Ojc5NTd9XSw3OTU0OltbNzk1Miw3NjhdXSw3OTU1OltbNzk1Myw3NjhdXSw3OTU2OltbNzk1Miw3NjldXSw3OTU3OltbNzk1Myw3NjldXSw3OTYwOltbOTE3LDc4N10sLHs3Njg6Nzk2Miw3Njk6Nzk2NH1dLDc5NjE6W1s5MTcsNzg4XSwsezc2ODo3OTYzLDc2OTo3OTY1fV0sNzk2MjpbWzc5NjAsNzY4XV0sNzk2MzpbWzc5NjEsNzY4XV0sNzk2NDpbWzc5NjAsNzY5XV0sNzk2NTpbWzc5NjEsNzY5XV0sNzk2ODpbWzk1MSw3ODddLCx7NzY4Ojc5NzAsNzY5Ojc5NzIsODM0Ojc5NzQsODM3OjgwODB9XSw3OTY5OltbOTUxLDc4OF0sLHs3Njg6Nzk3MSw3Njk6Nzk3Myw4MzQ6Nzk3NSw4Mzc6ODA4MX1dLDc5NzA6W1s3OTY4LDc2OF0sLHs4Mzc6ODA4Mn1dLDc5NzE6W1s3OTY5LDc2OF0sLHs4Mzc6ODA4M31dLDc5NzI6W1s3OTY4LDc2OV0sLHs4Mzc6ODA4NH1dLDc5NzM6W1s3OTY5LDc2OV0sLHs4Mzc6ODA4NX1dLDc5NzQ6W1s3OTY4LDgzNF0sLHs4Mzc6ODA4Nn1dLDc5NzU6W1s3OTY5LDgzNF0sLHs4Mzc6ODA4N31dLDc5NzY6W1s5MTksNzg3XSwsezc2ODo3OTc4LDc2OTo3OTgwLDgzNDo3OTgyLDgzNzo4MDg4fV0sNzk3NzpbWzkxOSw3ODhdLCx7NzY4Ojc5NzksNzY5Ojc5ODEsODM0Ojc5ODMsODM3OjgwODl9XSw3OTc4OltbNzk3Niw3NjhdLCx7ODM3OjgwOTB9XSw3OTc5OltbNzk3Nyw3NjhdLCx7ODM3OjgwOTF9XSw3OTgwOltbNzk3Niw3NjldLCx7ODM3OjgwOTJ9XSw3OTgxOltbNzk3Nyw3NjldLCx7ODM3OjgwOTN9XSw3OTgyOltbNzk3Niw4MzRdLCx7ODM3OjgwOTR9XSw3OTgzOltbNzk3Nyw4MzRdLCx7ODM3OjgwOTV9XSw3OTg0OltbOTUzLDc4N10sLHs3Njg6Nzk4Niw3Njk6Nzk4OCw4MzQ6Nzk5MH1dLDc5ODU6W1s5NTMsNzg4XSwsezc2ODo3OTg3LDc2OTo3OTg5LDgzNDo3OTkxfV0sNzk4NjpbWzc5ODQsNzY4XV0sNzk4NzpbWzc5ODUsNzY4XV0sNzk4ODpbWzc5ODQsNzY5XV0sNzk4OTpbWzc5ODUsNzY5XV0sNzk5MDpbWzc5ODQsODM0XV0sNzk5MTpbWzc5ODUsODM0XV0sNzk5MjpbWzkyMSw3ODddLCx7NzY4Ojc5OTQsNzY5Ojc5OTYsODM0Ojc5OTh9XSw3OTkzOltbOTIxLDc4OF0sLHs3Njg6Nzk5NSw3Njk6Nzk5Nyw4MzQ6Nzk5OX1dLDc5OTQ6W1s3OTkyLDc2OF1dLDc5OTU6W1s3OTkzLDc2OF1dLDc5OTY6W1s3OTkyLDc2OV1dLDc5OTc6W1s3OTkzLDc2OV1dLDc5OTg6W1s3OTkyLDgzNF1dLDc5OTk6W1s3OTkzLDgzNF1dLDgwMDA6W1s5NTksNzg3XSwsezc2ODo4MDAyLDc2OTo4MDA0fV0sODAwMTpbWzk1OSw3ODhdLCx7NzY4OjgwMDMsNzY5OjgwMDV9XSw4MDAyOltbODAwMCw3NjhdXSw4MDAzOltbODAwMSw3NjhdXSw4MDA0OltbODAwMCw3NjldXSw4MDA1OltbODAwMSw3NjldXSw4MDA4OltbOTI3LDc4N10sLHs3Njg6ODAxMCw3Njk6ODAxMn1dLDgwMDk6W1s5MjcsNzg4XSwsezc2ODo4MDExLDc2OTo4MDEzfV0sODAxMDpbWzgwMDgsNzY4XV0sODAxMTpbWzgwMDksNzY4XV0sODAxMjpbWzgwMDgsNzY5XV0sODAxMzpbWzgwMDksNzY5XV0sODAxNjpbWzk2NSw3ODddLCx7NzY4OjgwMTgsNzY5OjgwMjAsODM0OjgwMjJ9XSw4MDE3OltbOTY1LDc4OF0sLHs3Njg6ODAxOSw3Njk6ODAyMSw4MzQ6ODAyM31dLDgwMTg6W1s4MDE2LDc2OF1dLDgwMTk6W1s4MDE3LDc2OF1dLDgwMjA6W1s4MDE2LDc2OV1dLDgwMjE6W1s4MDE3LDc2OV1dLDgwMjI6W1s4MDE2LDgzNF1dLDgwMjM6W1s4MDE3LDgzNF1dLDgwMjU6W1s5MzMsNzg4XSwsezc2ODo4MDI3LDc2OTo4MDI5LDgzNDo4MDMxfV0sODAyNzpbWzgwMjUsNzY4XV0sODAyOTpbWzgwMjUsNzY5XV0sODAzMTpbWzgwMjUsODM0XV0sODAzMjpbWzk2OSw3ODddLCx7NzY4OjgwMzQsNzY5OjgwMzYsODM0OjgwMzgsODM3OjgwOTZ9XSw4MDMzOltbOTY5LDc4OF0sLHs3Njg6ODAzNSw3Njk6ODAzNyw4MzQ6ODAzOSw4Mzc6ODA5N31dLDgwMzQ6W1s4MDMyLDc2OF0sLHs4Mzc6ODA5OH1dLDgwMzU6W1s4MDMzLDc2OF0sLHs4Mzc6ODA5OX1dLDgwMzY6W1s4MDMyLDc2OV0sLHs4Mzc6ODEwMH1dLDgwMzc6W1s4MDMzLDc2OV0sLHs4Mzc6ODEwMX1dLDgwMzg6W1s4MDMyLDgzNF0sLHs4Mzc6ODEwMn1dLDgwMzk6W1s4MDMzLDgzNF0sLHs4Mzc6ODEwM31dLDgwNDA6W1s5MzcsNzg3XSwsezc2ODo4MDQyLDc2OTo4MDQ0LDgzNDo4MDQ2LDgzNzo4MTA0fV0sODA0MTpbWzkzNyw3ODhdLCx7NzY4OjgwNDMsNzY5OjgwNDUsODM0OjgwNDcsODM3OjgxMDV9XSw4MDQyOltbODA0MCw3NjhdLCx7ODM3OjgxMDZ9XSw4MDQzOltbODA0MSw3NjhdLCx7ODM3OjgxMDd9XSw4MDQ0OltbODA0MCw3NjldLCx7ODM3OjgxMDh9XSw4MDQ1OltbODA0MSw3NjldLCx7ODM3OjgxMDl9XSw4MDQ2OltbODA0MCw4MzRdLCx7ODM3OjgxMTB9XSw4MDQ3OltbODA0MSw4MzRdLCx7ODM3OjgxMTF9XSw4MDQ4OltbOTQ1LDc2OF0sLHs4Mzc6ODExNH1dLDgwNDk6W1s5NDBdXSw4MDUwOltbOTQ5LDc2OF1dLDgwNTE6W1s5NDFdXSw4MDUyOltbOTUxLDc2OF0sLHs4Mzc6ODEzMH1dLDgwNTM6W1s5NDJdXSw4MDU0OltbOTUzLDc2OF1dLDgwNTU6W1s5NDNdXSw4MDU2OltbOTU5LDc2OF1dLDgwNTc6W1s5NzJdXSw4MDU4OltbOTY1LDc2OF1dLDgwNTk6W1s5NzNdXSw4MDYwOltbOTY5LDc2OF0sLHs4Mzc6ODE3OH1dLDgwNjE6W1s5NzRdXSw4MDY0OltbNzkzNiw4MzddXSw4MDY1OltbNzkzNyw4MzddXSw4MDY2OltbNzkzOCw4MzddXSw4MDY3OltbNzkzOSw4MzddXSw4MDY4OltbNzk0MCw4MzddXSw4MDY5OltbNzk0MSw4MzddXSw4MDcwOltbNzk0Miw4MzddXSw4MDcxOltbNzk0Myw4MzddXSw4MDcyOltbNzk0NCw4MzddXSw4MDczOltbNzk0NSw4MzddXSw4MDc0OltbNzk0Niw4MzddXSw4MDc1OltbNzk0Nyw4MzddXSw4MDc2OltbNzk0OCw4MzddXSw4MDc3OltbNzk0OSw4MzddXSw4MDc4OltbNzk1MCw4MzddXSw4MDc5OltbNzk1MSw4MzddXSw4MDgwOltbNzk2OCw4MzddXSw4MDgxOltbNzk2OSw4MzddXSw4MDgyOltbNzk3MCw4MzddXSw4MDgzOltbNzk3MSw4MzddXSw4MDg0OltbNzk3Miw4MzddXSw4MDg1OltbNzk3Myw4MzddXSw4MDg2OltbNzk3NCw4MzddXSw4MDg3OltbNzk3NSw4MzddXSw4MDg4OltbNzk3Niw4MzddXSw4MDg5OltbNzk3Nyw4MzddXSw4MDkwOltbNzk3OCw4MzddXSw4MDkxOltbNzk3OSw4MzddXSw4MDkyOltbNzk4MCw4MzddXSw4MDkzOltbNzk4MSw4MzddXSw4MDk0OltbNzk4Miw4MzddXSw4MDk1OltbNzk4Myw4MzddXSw4MDk2OltbODAzMiw4MzddXSw4MDk3OltbODAzMyw4MzddXSw4MDk4OltbODAzNCw4MzddXSw4MDk5OltbODAzNSw4MzddXSw4MTAwOltbODAzNiw4MzddXSw4MTAxOltbODAzNyw4MzddXSw4MTAyOltbODAzOCw4MzddXSw4MTAzOltbODAzOSw4MzddXSw4MTA0OltbODA0MCw4MzddXSw4MTA1OltbODA0MSw4MzddXSw4MTA2OltbODA0Miw4MzddXSw4MTA3OltbODA0Myw4MzddXSw4MTA4OltbODA0NCw4MzddXSw4MTA5OltbODA0NSw4MzddXSw4MTEwOltbODA0Niw4MzddXSw4MTExOltbODA0Nyw4MzddXSw4MTEyOltbOTQ1LDc3NF1dLDgxMTM6W1s5NDUsNzcyXV0sODExNDpbWzgwNDgsODM3XV0sODExNTpbWzk0NSw4MzddXSw4MTE2OltbOTQwLDgzN11dLDgxMTg6W1s5NDUsODM0XSwsezgzNzo4MTE5fV0sODExOTpbWzgxMTgsODM3XV0sODEyMDpbWzkxMyw3NzRdXSw4MTIxOltbOTEzLDc3Ml1dLDgxMjI6W1s5MTMsNzY4XV0sODEyMzpbWzkwMl1dLDgxMjQ6W1s5MTMsODM3XV0sODEyNTpbWzMyLDc4N10sMjU2XSw4MTI2OltbOTUzXV0sODEyNzpbWzMyLDc4N10sMjU2LHs3Njg6ODE0MSw3Njk6ODE0Miw4MzQ6ODE0M31dLDgxMjg6W1szMiw4MzRdLDI1Nl0sODEyOTpbWzE2OCw4MzRdXSw4MTMwOltbODA1Miw4MzddXSw4MTMxOltbOTUxLDgzN11dLDgxMzI6W1s5NDIsODM3XV0sODEzNDpbWzk1MSw4MzRdLCx7ODM3OjgxMzV9XSw4MTM1OltbODEzNCw4MzddXSw4MTM2OltbOTE3LDc2OF1dLDgxMzc6W1s5MDRdXSw4MTM4OltbOTE5LDc2OF1dLDgxMzk6W1s5MDVdXSw4MTQwOltbOTE5LDgzN11dLDgxNDE6W1s4MTI3LDc2OF1dLDgxNDI6W1s4MTI3LDc2OV1dLDgxNDM6W1s4MTI3LDgzNF1dLDgxNDQ6W1s5NTMsNzc0XV0sODE0NTpbWzk1Myw3NzJdXSw4MTQ2OltbOTcwLDc2OF1dLDgxNDc6W1s5MTJdXSw4MTUwOltbOTUzLDgzNF1dLDgxNTE6W1s5NzAsODM0XV0sODE1MjpbWzkyMSw3NzRdXSw4MTUzOltbOTIxLDc3Ml1dLDgxNTQ6W1s5MjEsNzY4XV0sODE1NTpbWzkwNl1dLDgxNTc6W1s4MTkwLDc2OF1dLDgxNTg6W1s4MTkwLDc2OV1dLDgxNTk6W1s4MTkwLDgzNF1dLDgxNjA6W1s5NjUsNzc0XV0sODE2MTpbWzk2NSw3NzJdXSw4MTYyOltbOTcxLDc2OF1dLDgxNjM6W1s5NDRdXSw4MTY0OltbOTYxLDc4N11dLDgxNjU6W1s5NjEsNzg4XV0sODE2NjpbWzk2NSw4MzRdXSw4MTY3OltbOTcxLDgzNF1dLDgxNjg6W1s5MzMsNzc0XV0sODE2OTpbWzkzMyw3NzJdXSw4MTcwOltbOTMzLDc2OF1dLDgxNzE6W1s5MTBdXSw4MTcyOltbOTI5LDc4OF1dLDgxNzM6W1sxNjgsNzY4XV0sODE3NDpbWzkwMV1dLDgxNzU6W1s5Nl1dLDgxNzg6W1s4MDYwLDgzN11dLDgxNzk6W1s5NjksODM3XV0sODE4MDpbWzk3NCw4MzddXSw4MTgyOltbOTY5LDgzNF0sLHs4Mzc6ODE4M31dLDgxODM6W1s4MTgyLDgzN11dLDgxODQ6W1s5MjcsNzY4XV0sODE4NTpbWzkwOF1dLDgxODY6W1s5MzcsNzY4XV0sODE4NzpbWzkxMV1dLDgxODg6W1s5MzcsODM3XV0sODE4OTpbWzE4MF1dLDgxOTA6W1szMiw3ODhdLDI1Nix7NzY4OjgxNTcsNzY5OjgxNTgsODM0OjgxNTl9XX0sCjgxOTI6ezgxOTI6W1s4MTk0XV0sODE5MzpbWzgxOTVdXSw4MTk0OltbMzJdLDI1Nl0sODE5NTpbWzMyXSwyNTZdLDgxOTY6W1szMl0sMjU2XSw4MTk3OltbMzJdLDI1Nl0sODE5ODpbWzMyXSwyNTZdLDgxOTk6W1szMl0sMjU2XSw4MjAwOltbMzJdLDI1Nl0sODIwMTpbWzMyXSwyNTZdLDgyMDI6W1szMl0sMjU2XSw4MjA5OltbODIwOF0sMjU2XSw4MjE1OltbMzIsODE5XSwyNTZdLDgyMjg6W1s0Nl0sMjU2XSw4MjI5OltbNDYsNDZdLDI1Nl0sODIzMDpbWzQ2LDQ2LDQ2XSwyNTZdLDgyMzk6W1szMl0sMjU2XSw4MjQzOltbODI0Miw4MjQyXSwyNTZdLDgyNDQ6W1s4MjQyLDgyNDIsODI0Ml0sMjU2XSw4MjQ2OltbODI0NSw4MjQ1XSwyNTZdLDgyNDc6W1s4MjQ1LDgyNDUsODI0NV0sMjU2XSw4MjUyOltbMzMsMzNdLDI1Nl0sODI1NDpbWzMyLDc3M10sMjU2XSw4MjYzOltbNjMsNjNdLDI1Nl0sODI2NDpbWzYzLDMzXSwyNTZdLDgyNjU6W1szMyw2M10sMjU2XSw4Mjc5OltbODI0Miw4MjQyLDgyNDIsODI0Ml0sMjU2XSw4Mjg3OltbMzJdLDI1Nl0sODMwNDpbWzQ4XSwyNTZdLDgzMDU6W1sxMDVdLDI1Nl0sODMwODpbWzUyXSwyNTZdLDgzMDk6W1s1M10sMjU2XSw4MzEwOltbNTRdLDI1Nl0sODMxMTpbWzU1XSwyNTZdLDgzMTI6W1s1Nl0sMjU2XSw4MzEzOltbNTddLDI1Nl0sODMxNDpbWzQzXSwyNTZdLDgzMTU6W1s4NzIyXSwyNTZdLDgzMTY6W1s2MV0sMjU2XSw4MzE3OltbNDBdLDI1Nl0sODMxODpbWzQxXSwyNTZdLDgzMTk6W1sxMTBdLDI1Nl0sODMyMDpbWzQ4XSwyNTZdLDgzMjE6W1s0OV0sMjU2XSw4MzIyOltbNTBdLDI1Nl0sODMyMzpbWzUxXSwyNTZdLDgzMjQ6W1s1Ml0sMjU2XSw4MzI1OltbNTNdLDI1Nl0sODMyNjpbWzU0XSwyNTZdLDgzMjc6W1s1NV0sMjU2XSw4MzI4OltbNTZdLDI1Nl0sODMyOTpbWzU3XSwyNTZdLDgzMzA6W1s0M10sMjU2XSw4MzMxOltbODcyMl0sMjU2XSw4MzMyOltbNjFdLDI1Nl0sODMzMzpbWzQwXSwyNTZdLDgzMzQ6W1s0MV0sMjU2XSw4MzM2OltbOTddLDI1Nl0sODMzNzpbWzEwMV0sMjU2XSw4MzM4OltbMTExXSwyNTZdLDgzMzk6W1sxMjBdLDI1Nl0sODM0MDpbWzYwMV0sMjU2XSw4MzQxOltbMTA0XSwyNTZdLDgzNDI6W1sxMDddLDI1Nl0sODM0MzpbWzEwOF0sMjU2XSw4MzQ0OltbMTA5XSwyNTZdLDgzNDU6W1sxMTBdLDI1Nl0sODM0NjpbWzExMl0sMjU2XSw4MzQ3OltbMTE1XSwyNTZdLDgzNDg6W1sxMTZdLDI1Nl0sODM2MDpbWzgyLDExNV0sMjU2XSw4NDAwOlssMjMwXSw4NDAxOlssMjMwXSw4NDAyOlssMV0sODQwMzpbLDFdLDg0MDQ6WywyMzBdLDg0MDU6WywyMzBdLDg0MDY6WywyMzBdLDg0MDc6WywyMzBdLDg0MDg6WywxXSw4NDA5OlssMV0sODQxMDpbLDFdLDg0MTE6WywyMzBdLDg0MTI6WywyMzBdLDg0MTc6WywyMzBdLDg0MjE6WywxXSw4NDIyOlssMV0sODQyMzpbLDIzMF0sODQyNDpbLDIyMF0sODQyNTpbLDIzMF0sODQyNjpbLDFdLDg0Mjc6WywxXSw4NDI4OlssMjIwXSw4NDI5OlssMjIwXSw4NDMwOlssMjIwXSw4NDMxOlssMjIwXSw4NDMyOlssMjMwXX0sCjg0NDg6ezg0NDg6W1s5Nyw0Nyw5OV0sMjU2XSw4NDQ5OltbOTcsNDcsMTE1XSwyNTZdLDg0NTA6W1s2N10sMjU2XSw4NDUxOltbMTc2LDY3XSwyNTZdLDg0NTM6W1s5OSw0NywxMTFdLDI1Nl0sODQ1NDpbWzk5LDQ3LDExN10sMjU2XSw4NDU1OltbNDAwXSwyNTZdLDg0NTc6W1sxNzYsNzBdLDI1Nl0sODQ1ODpbWzEwM10sMjU2XSw4NDU5OltbNzJdLDI1Nl0sODQ2MDpbWzcyXSwyNTZdLDg0NjE6W1s3Ml0sMjU2XSw4NDYyOltbMTA0XSwyNTZdLDg0NjM6W1syOTVdLDI1Nl0sODQ2NDpbWzczXSwyNTZdLDg0NjU6W1s3M10sMjU2XSw4NDY2OltbNzZdLDI1Nl0sODQ2NzpbWzEwOF0sMjU2XSw4NDY5OltbNzhdLDI1Nl0sODQ3MDpbWzc4LDExMV0sMjU2XSw4NDczOltbODBdLDI1Nl0sODQ3NDpbWzgxXSwyNTZdLDg0NzU6W1s4Ml0sMjU2XSw4NDc2OltbODJdLDI1Nl0sODQ3NzpbWzgyXSwyNTZdLDg0ODA6W1s4Myw3N10sMjU2XSw4NDgxOltbODQsNjksNzZdLDI1Nl0sODQ4MjpbWzg0LDc3XSwyNTZdLDg0ODQ6W1s5MF0sMjU2XSw4NDg2OltbOTM3XV0sODQ4ODpbWzkwXSwyNTZdLDg0OTA6W1s3NV1dLDg0OTE6W1sxOTddXSw4NDkyOltbNjZdLDI1Nl0sODQ5MzpbWzY3XSwyNTZdLDg0OTU6W1sxMDFdLDI1Nl0sODQ5NjpbWzY5XSwyNTZdLDg0OTc6W1s3MF0sMjU2XSw4NDk5OltbNzddLDI1Nl0sODUwMDpbWzExMV0sMjU2XSw4NTAxOltbMTQ4OF0sMjU2XSw4NTAyOltbMTQ4OV0sMjU2XSw4NTAzOltbMTQ5MF0sMjU2XSw4NTA0OltbMTQ5MV0sMjU2XSw4NTA1OltbMTA1XSwyNTZdLDg1MDc6W1s3MCw2NSw4OF0sMjU2XSw4NTA4OltbOTYwXSwyNTZdLDg1MDk6W1s5NDddLDI1Nl0sODUxMDpbWzkxNV0sMjU2XSw4NTExOltbOTI4XSwyNTZdLDg1MTI6W1s4NzIxXSwyNTZdLDg1MTc6W1s2OF0sMjU2XSw4NTE4OltbMTAwXSwyNTZdLDg1MTk6W1sxMDFdLDI1Nl0sODUyMDpbWzEwNV0sMjU2XSw4NTIxOltbMTA2XSwyNTZdLDg1Mjg6W1s0OSw4MjYwLDU1XSwyNTZdLDg1Mjk6W1s0OSw4MjYwLDU3XSwyNTZdLDg1MzA6W1s0OSw4MjYwLDQ5LDQ4XSwyNTZdLDg1MzE6W1s0OSw4MjYwLDUxXSwyNTZdLDg1MzI6W1s1MCw4MjYwLDUxXSwyNTZdLDg1MzM6W1s0OSw4MjYwLDUzXSwyNTZdLDg1MzQ6W1s1MCw4MjYwLDUzXSwyNTZdLDg1MzU6W1s1MSw4MjYwLDUzXSwyNTZdLDg1MzY6W1s1Miw4MjYwLDUzXSwyNTZdLDg1Mzc6W1s0OSw4MjYwLDU0XSwyNTZdLDg1Mzg6W1s1Myw4MjYwLDU0XSwyNTZdLDg1Mzk6W1s0OSw4MjYwLDU2XSwyNTZdLDg1NDA6W1s1MSw4MjYwLDU2XSwyNTZdLDg1NDE6W1s1Myw4MjYwLDU2XSwyNTZdLDg1NDI6W1s1NSw4MjYwLDU2XSwyNTZdLDg1NDM6W1s0OSw4MjYwXSwyNTZdLDg1NDQ6W1s3M10sMjU2XSw4NTQ1OltbNzMsNzNdLDI1Nl0sODU0NjpbWzczLDczLDczXSwyNTZdLDg1NDc6W1s3Myw4Nl0sMjU2XSw4NTQ4OltbODZdLDI1Nl0sODU0OTpbWzg2LDczXSwyNTZdLDg1NTA6W1s4Niw3Myw3M10sMjU2XSw4NTUxOltbODYsNzMsNzMsNzNdLDI1Nl0sODU1MjpbWzczLDg4XSwyNTZdLDg1NTM6W1s4OF0sMjU2XSw4NTU0OltbODgsNzNdLDI1Nl0sODU1NTpbWzg4LDczLDczXSwyNTZdLDg1NTY6W1s3Nl0sMjU2XSw4NTU3OltbNjddLDI1Nl0sODU1ODpbWzY4XSwyNTZdLDg1NTk6W1s3N10sMjU2XSw4NTYwOltbMTA1XSwyNTZdLDg1NjE6W1sxMDUsMTA1XSwyNTZdLDg1NjI6W1sxMDUsMTA1LDEwNV0sMjU2XSw4NTYzOltbMTA1LDExOF0sMjU2XSw4NTY0OltbMTE4XSwyNTZdLDg1NjU6W1sxMTgsMTA1XSwyNTZdLDg1NjY6W1sxMTgsMTA1LDEwNV0sMjU2XSw4NTY3OltbMTE4LDEwNSwxMDUsMTA1XSwyNTZdLDg1Njg6W1sxMDUsMTIwXSwyNTZdLDg1Njk6W1sxMjBdLDI1Nl0sODU3MDpbWzEyMCwxMDVdLDI1Nl0sODU3MTpbWzEyMCwxMDUsMTA1XSwyNTZdLDg1NzI6W1sxMDhdLDI1Nl0sODU3MzpbWzk5XSwyNTZdLDg1NzQ6W1sxMDBdLDI1Nl0sODU3NTpbWzEwOV0sMjU2XSw4NTg1OltbNDgsODI2MCw1MV0sMjU2XSw4NTkyOlssLHs4MjQ6ODYwMn1dLDg1OTQ6WywsezgyNDo4NjAzfV0sODU5NjpbLCx7ODI0Ojg2MjJ9XSw4NjAyOltbODU5Miw4MjRdXSw4NjAzOltbODU5NCw4MjRdXSw4NjIyOltbODU5Niw4MjRdXSw4NjUzOltbODY1Niw4MjRdXSw4NjU0OltbODY2MCw4MjRdXSw4NjU1OltbODY1OCw4MjRdXSw4NjU2OlssLHs4MjQ6ODY1M31dLDg2NTg6WywsezgyNDo4NjU1fV0sODY2MDpbLCx7ODI0Ojg2NTR9XX0sCjg3MDQ6ezg3MDc6WywsezgyNDo4NzA4fV0sODcwODpbWzg3MDcsODI0XV0sODcxMjpbLCx7ODI0Ojg3MTN9XSw4NzEzOltbODcxMiw4MjRdXSw4NzE1OlssLHs4MjQ6ODcxNn1dLDg3MTY6W1s4NzE1LDgyNF1dLDg3Mzk6WywsezgyNDo4NzQwfV0sODc0MDpbWzg3MzksODI0XV0sODc0MTpbLCx7ODI0Ojg3NDJ9XSw4NzQyOltbODc0MSw4MjRdXSw4NzQ4OltbODc0Nyw4NzQ3XSwyNTZdLDg3NDk6W1s4NzQ3LDg3NDcsODc0N10sMjU2XSw4NzUxOltbODc1MCw4NzUwXSwyNTZdLDg3NTI6W1s4NzUwLDg3NTAsODc1MF0sMjU2XSw4NzY0OlssLHs4MjQ6ODc2OX1dLDg3Njk6W1s4NzY0LDgyNF1dLDg3NzE6WywsezgyNDo4NzcyfV0sODc3MjpbWzg3NzEsODI0XV0sODc3MzpbLCx7ODI0Ojg3NzV9XSw4Nzc1OltbODc3Myw4MjRdXSw4Nzc2OlssLHs4MjQ6ODc3N31dLDg3Nzc6W1s4Nzc2LDgyNF1dLDg3ODE6WywsezgyNDo4ODEzfV0sODgwMDpbWzYxLDgyNF1dLDg4MDE6WywsezgyNDo4ODAyfV0sODgwMjpbWzg4MDEsODI0XV0sODgwNDpbLCx7ODI0Ojg4MTZ9XSw4ODA1OlssLHs4MjQ6ODgxN31dLDg4MTM6W1s4NzgxLDgyNF1dLDg4MTQ6W1s2MCw4MjRdXSw4ODE1OltbNjIsODI0XV0sODgxNjpbWzg4MDQsODI0XV0sODgxNzpbWzg4MDUsODI0XV0sODgxODpbLCx7ODI0Ojg4MjB9XSw4ODE5OlssLHs4MjQ6ODgyMX1dLDg4MjA6W1s4ODE4LDgyNF1dLDg4MjE6W1s4ODE5LDgyNF1dLDg4MjI6WywsezgyNDo4ODI0fV0sODgyMzpbLCx7ODI0Ojg4MjV9XSw4ODI0OltbODgyMiw4MjRdXSw4ODI1OltbODgyMyw4MjRdXSw4ODI2OlssLHs4MjQ6ODgzMn1dLDg4Mjc6WywsezgyNDo4ODMzfV0sODgyODpbLCx7ODI0Ojg5Mjh9XSw4ODI5OlssLHs4MjQ6ODkyOX1dLDg4MzI6W1s4ODI2LDgyNF1dLDg4MzM6W1s4ODI3LDgyNF1dLDg4MzQ6WywsezgyNDo4ODM2fV0sODgzNTpbLCx7ODI0Ojg4Mzd9XSw4ODM2OltbODgzNCw4MjRdXSw4ODM3OltbODgzNSw4MjRdXSw4ODM4OlssLHs4MjQ6ODg0MH1dLDg4Mzk6WywsezgyNDo4ODQxfV0sODg0MDpbWzg4MzgsODI0XV0sODg0MTpbWzg4MzksODI0XV0sODg0OTpbLCx7ODI0Ojg5MzB9XSw4ODUwOlssLHs4MjQ6ODkzMX1dLDg4NjY6WywsezgyNDo4ODc2fV0sODg3MjpbLCx7ODI0Ojg4Nzd9XSw4ODczOlssLHs4MjQ6ODg3OH1dLDg4NzU6WywsezgyNDo4ODc5fV0sODg3NjpbWzg4NjYsODI0XV0sODg3NzpbWzg4NzIsODI0XV0sODg3ODpbWzg4NzMsODI0XV0sODg3OTpbWzg4NzUsODI0XV0sODg4MjpbLCx7ODI0Ojg5Mzh9XSw4ODgzOlssLHs4MjQ6ODkzOX1dLDg4ODQ6WywsezgyNDo4OTQwfV0sODg4NTpbLCx7ODI0Ojg5NDF9XSw4OTI4OltbODgyOCw4MjRdXSw4OTI5OltbODgyOSw4MjRdXSw4OTMwOltbODg0OSw4MjRdXSw4OTMxOltbODg1MCw4MjRdXSw4OTM4OltbODg4Miw4MjRdXSw4OTM5OltbODg4Myw4MjRdXSw4OTQwOltbODg4NCw4MjRdXSw4OTQxOltbODg4NSw4MjRdXX0sCjg5NjA6ezkwMDE6W1sxMjI5Nl1dLDkwMDI6W1sxMjI5N11dfSwKOTIxNjp7OTMxMjpbWzQ5XSwyNTZdLDkzMTM6W1s1MF0sMjU2XSw5MzE0OltbNTFdLDI1Nl0sOTMxNTpbWzUyXSwyNTZdLDkzMTY6W1s1M10sMjU2XSw5MzE3OltbNTRdLDI1Nl0sOTMxODpbWzU1XSwyNTZdLDkzMTk6W1s1Nl0sMjU2XSw5MzIwOltbNTddLDI1Nl0sOTMyMTpbWzQ5LDQ4XSwyNTZdLDkzMjI6W1s0OSw0OV0sMjU2XSw5MzIzOltbNDksNTBdLDI1Nl0sOTMyNDpbWzQ5LDUxXSwyNTZdLDkzMjU6W1s0OSw1Ml0sMjU2XSw5MzI2OltbNDksNTNdLDI1Nl0sOTMyNzpbWzQ5LDU0XSwyNTZdLDkzMjg6W1s0OSw1NV0sMjU2XSw5MzI5OltbNDksNTZdLDI1Nl0sOTMzMDpbWzQ5LDU3XSwyNTZdLDkzMzE6W1s1MCw0OF0sMjU2XSw5MzMyOltbNDAsNDksNDFdLDI1Nl0sOTMzMzpbWzQwLDUwLDQxXSwyNTZdLDkzMzQ6W1s0MCw1MSw0MV0sMjU2XSw5MzM1OltbNDAsNTIsNDFdLDI1Nl0sOTMzNjpbWzQwLDUzLDQxXSwyNTZdLDkzMzc6W1s0MCw1NCw0MV0sMjU2XSw5MzM4OltbNDAsNTUsNDFdLDI1Nl0sOTMzOTpbWzQwLDU2LDQxXSwyNTZdLDkzNDA6W1s0MCw1Nyw0MV0sMjU2XSw5MzQxOltbNDAsNDksNDgsNDFdLDI1Nl0sOTM0MjpbWzQwLDQ5LDQ5LDQxXSwyNTZdLDkzNDM6W1s0MCw0OSw1MCw0MV0sMjU2XSw5MzQ0OltbNDAsNDksNTEsNDFdLDI1Nl0sOTM0NTpbWzQwLDQ5LDUyLDQxXSwyNTZdLDkzNDY6W1s0MCw0OSw1Myw0MV0sMjU2XSw5MzQ3OltbNDAsNDksNTQsNDFdLDI1Nl0sOTM0ODpbWzQwLDQ5LDU1LDQxXSwyNTZdLDkzNDk6W1s0MCw0OSw1Niw0MV0sMjU2XSw5MzUwOltbNDAsNDksNTcsNDFdLDI1Nl0sOTM1MTpbWzQwLDUwLDQ4LDQxXSwyNTZdLDkzNTI6W1s0OSw0Nl0sMjU2XSw5MzUzOltbNTAsNDZdLDI1Nl0sOTM1NDpbWzUxLDQ2XSwyNTZdLDkzNTU6W1s1Miw0Nl0sMjU2XSw5MzU2OltbNTMsNDZdLDI1Nl0sOTM1NzpbWzU0LDQ2XSwyNTZdLDkzNTg6W1s1NSw0Nl0sMjU2XSw5MzU5OltbNTYsNDZdLDI1Nl0sOTM2MDpbWzU3LDQ2XSwyNTZdLDkzNjE6W1s0OSw0OCw0Nl0sMjU2XSw5MzYyOltbNDksNDksNDZdLDI1Nl0sOTM2MzpbWzQ5LDUwLDQ2XSwyNTZdLDkzNjQ6W1s0OSw1MSw0Nl0sMjU2XSw5MzY1OltbNDksNTIsNDZdLDI1Nl0sOTM2NjpbWzQ5LDUzLDQ2XSwyNTZdLDkzNjc6W1s0OSw1NCw0Nl0sMjU2XSw5MzY4OltbNDksNTUsNDZdLDI1Nl0sOTM2OTpbWzQ5LDU2LDQ2XSwyNTZdLDkzNzA6W1s0OSw1Nyw0Nl0sMjU2XSw5MzcxOltbNTAsNDgsNDZdLDI1Nl0sOTM3MjpbWzQwLDk3LDQxXSwyNTZdLDkzNzM6W1s0MCw5OCw0MV0sMjU2XSw5Mzc0OltbNDAsOTksNDFdLDI1Nl0sOTM3NTpbWzQwLDEwMCw0MV0sMjU2XSw5Mzc2OltbNDAsMTAxLDQxXSwyNTZdLDkzNzc6W1s0MCwxMDIsNDFdLDI1Nl0sOTM3ODpbWzQwLDEwMyw0MV0sMjU2XSw5Mzc5OltbNDAsMTA0LDQxXSwyNTZdLDkzODA6W1s0MCwxMDUsNDFdLDI1Nl0sOTM4MTpbWzQwLDEwNiw0MV0sMjU2XSw5MzgyOltbNDAsMTA3LDQxXSwyNTZdLDkzODM6W1s0MCwxMDgsNDFdLDI1Nl0sOTM4NDpbWzQwLDEwOSw0MV0sMjU2XSw5Mzg1OltbNDAsMTEwLDQxXSwyNTZdLDkzODY6W1s0MCwxMTEsNDFdLDI1Nl0sOTM4NzpbWzQwLDExMiw0MV0sMjU2XSw5Mzg4OltbNDAsMTEzLDQxXSwyNTZdLDkzODk6W1s0MCwxMTQsNDFdLDI1Nl0sOTM5MDpbWzQwLDExNSw0MV0sMjU2XSw5MzkxOltbNDAsMTE2LDQxXSwyNTZdLDkzOTI6W1s0MCwxMTcsNDFdLDI1Nl0sOTM5MzpbWzQwLDExOCw0MV0sMjU2XSw5Mzk0OltbNDAsMTE5LDQxXSwyNTZdLDkzOTU6W1s0MCwxMjAsNDFdLDI1Nl0sOTM5NjpbWzQwLDEyMSw0MV0sMjU2XSw5Mzk3OltbNDAsMTIyLDQxXSwyNTZdLDkzOTg6W1s2NV0sMjU2XSw5Mzk5OltbNjZdLDI1Nl0sOTQwMDpbWzY3XSwyNTZdLDk0MDE6W1s2OF0sMjU2XSw5NDAyOltbNjldLDI1Nl0sOTQwMzpbWzcwXSwyNTZdLDk0MDQ6W1s3MV0sMjU2XSw5NDA1OltbNzJdLDI1Nl0sOTQwNjpbWzczXSwyNTZdLDk0MDc6W1s3NF0sMjU2XSw5NDA4OltbNzVdLDI1Nl0sOTQwOTpbWzc2XSwyNTZdLDk0MTA6W1s3N10sMjU2XSw5NDExOltbNzhdLDI1Nl0sOTQxMjpbWzc5XSwyNTZdLDk0MTM6W1s4MF0sMjU2XSw5NDE0OltbODFdLDI1Nl0sOTQxNTpbWzgyXSwyNTZdLDk0MTY6W1s4M10sMjU2XSw5NDE3OltbODRdLDI1Nl0sOTQxODpbWzg1XSwyNTZdLDk0MTk6W1s4Nl0sMjU2XSw5NDIwOltbODddLDI1Nl0sOTQyMTpbWzg4XSwyNTZdLDk0MjI6W1s4OV0sMjU2XSw5NDIzOltbOTBdLDI1Nl0sOTQyNDpbWzk3XSwyNTZdLDk0MjU6W1s5OF0sMjU2XSw5NDI2OltbOTldLDI1Nl0sOTQyNzpbWzEwMF0sMjU2XSw5NDI4OltbMTAxXSwyNTZdLDk0Mjk6W1sxMDJdLDI1Nl0sOTQzMDpbWzEwM10sMjU2XSw5NDMxOltbMTA0XSwyNTZdLDk0MzI6W1sxMDVdLDI1Nl0sOTQzMzpbWzEwNl0sMjU2XSw5NDM0OltbMTA3XSwyNTZdLDk0MzU6W1sxMDhdLDI1Nl0sOTQzNjpbWzEwOV0sMjU2XSw5NDM3OltbMTEwXSwyNTZdLDk0Mzg6W1sxMTFdLDI1Nl0sOTQzOTpbWzExMl0sMjU2XSw5NDQwOltbMTEzXSwyNTZdLDk0NDE6W1sxMTRdLDI1Nl0sOTQ0MjpbWzExNV0sMjU2XSw5NDQzOltbMTE2XSwyNTZdLDk0NDQ6W1sxMTddLDI1Nl0sOTQ0NTpbWzExOF0sMjU2XSw5NDQ2OltbMTE5XSwyNTZdLDk0NDc6W1sxMjBdLDI1Nl0sOTQ0ODpbWzEyMV0sMjU2XSw5NDQ5OltbMTIyXSwyNTZdLDk0NTA6W1s0OF0sMjU2XX0sCjEwNzUyOnsxMDc2NDpbWzg3NDcsODc0Nyw4NzQ3LDg3NDddLDI1Nl0sMTA4Njg6W1s1OCw1OCw2MV0sMjU2XSwxMDg2OTpbWzYxLDYxXSwyNTZdLDEwODcwOltbNjEsNjEsNjFdLDI1Nl0sMTA5NzI6W1sxMDk3Myw4MjRdLDUxMl19LAoxMTI2NDp7MTEzODg6W1sxMDZdLDI1Nl0sMTEzODk6W1s4Nl0sMjU2XSwxMTUwMzpbLDIzMF0sMTE1MDQ6WywyMzBdLDExNTA1OlssMjMwXX0sCjExNTIwOnsxMTYzMTpbWzExNjE3XSwyNTZdLDExNjQ3OlssOV0sMTE3NDQ6WywyMzBdLDExNzQ1OlssMjMwXSwxMTc0NjpbLDIzMF0sMTE3NDc6WywyMzBdLDExNzQ4OlssMjMwXSwxMTc0OTpbLDIzMF0sMTE3NTA6WywyMzBdLDExNzUxOlssMjMwXSwxMTc1MjpbLDIzMF0sMTE3NTM6WywyMzBdLDExNzU0OlssMjMwXSwxMTc1NTpbLDIzMF0sMTE3NTY6WywyMzBdLDExNzU3OlssMjMwXSwxMTc1ODpbLDIzMF0sMTE3NTk6WywyMzBdLDExNzYwOlssMjMwXSwxMTc2MTpbLDIzMF0sMTE3NjI6WywyMzBdLDExNzYzOlssMjMwXSwxMTc2NDpbLDIzMF0sMTE3NjU6WywyMzBdLDExNzY2OlssMjMwXSwxMTc2NzpbLDIzMF0sMTE3Njg6WywyMzBdLDExNzY5OlssMjMwXSwxMTc3MDpbLDIzMF0sMTE3NzE6WywyMzBdLDExNzcyOlssMjMwXSwxMTc3MzpbLDIzMF0sMTE3NzQ6WywyMzBdLDExNzc1OlssMjMwXX0sCjExNzc2OnsxMTkzNTpbWzI3NTk3XSwyNTZdLDEyMDE5OltbNDA4NjNdLDI1Nl19LAoxMjAzMjp7MTIwMzI6W1sxOTk2OF0sMjU2XSwxMjAzMzpbWzIwMDA4XSwyNTZdLDEyMDM0OltbMjAwMjJdLDI1Nl0sMTIwMzU6W1syMDAzMV0sMjU2XSwxMjAzNjpbWzIwMDU3XSwyNTZdLDEyMDM3OltbMjAxMDFdLDI1Nl0sMTIwMzg6W1syMDEwOF0sMjU2XSwxMjAzOTpbWzIwMTI4XSwyNTZdLDEyMDQwOltbMjAxNTRdLDI1Nl0sMTIwNDE6W1syMDc5OV0sMjU2XSwxMjA0MjpbWzIwODM3XSwyNTZdLDEyMDQzOltbMjA4NDNdLDI1Nl0sMTIwNDQ6W1syMDg2Nl0sMjU2XSwxMjA0NTpbWzIwODg2XSwyNTZdLDEyMDQ2OltbMjA5MDddLDI1Nl0sMTIwNDc6W1syMDk2MF0sMjU2XSwxMjA0ODpbWzIwOTgxXSwyNTZdLDEyMDQ5OltbMjA5OTJdLDI1Nl0sMTIwNTA6W1syMTE0N10sMjU2XSwxMjA1MTpbWzIxMjQxXSwyNTZdLDEyMDUyOltbMjEyNjldLDI1Nl0sMTIwNTM6W1syMTI3NF0sMjU2XSwxMjA1NDpbWzIxMzA0XSwyNTZdLDEyMDU1OltbMjEzMTNdLDI1Nl0sMTIwNTY6W1syMTM0MF0sMjU2XSwxMjA1NzpbWzIxMzUzXSwyNTZdLDEyMDU4OltbMjEzNzhdLDI1Nl0sMTIwNTk6W1syMTQzMF0sMjU2XSwxMjA2MDpbWzIxNDQ4XSwyNTZdLDEyMDYxOltbMjE0NzVdLDI1Nl0sMTIwNjI6W1syMjIzMV0sMjU2XSwxMjA2MzpbWzIyMzAzXSwyNTZdLDEyMDY0OltbMjI3NjNdLDI1Nl0sMTIwNjU6W1syMjc4Nl0sMjU2XSwxMjA2NjpbWzIyNzk0XSwyNTZdLDEyMDY3OltbMjI4MDVdLDI1Nl0sMTIwNjg6W1syMjgyM10sMjU2XSwxMjA2OTpbWzIyODk5XSwyNTZdLDEyMDcwOltbMjMzNzZdLDI1Nl0sMTIwNzE6W1syMzQyNF0sMjU2XSwxMjA3MjpbWzIzNTQ0XSwyNTZdLDEyMDczOltbMjM1NjddLDI1Nl0sMTIwNzQ6W1syMzU4Nl0sMjU2XSwxMjA3NTpbWzIzNjA4XSwyNTZdLDEyMDc2OltbMjM2NjJdLDI1Nl0sMTIwNzc6W1syMzY2NV0sMjU2XSwxMjA3ODpbWzI0MDI3XSwyNTZdLDEyMDc5OltbMjQwMzddLDI1Nl0sMTIwODA6W1syNDA0OV0sMjU2XSwxMjA4MTpbWzI0MDYyXSwyNTZdLDEyMDgyOltbMjQxNzhdLDI1Nl0sMTIwODM6W1syNDE4Nl0sMjU2XSwxMjA4NDpbWzI0MTkxXSwyNTZdLDEyMDg1OltbMjQzMDhdLDI1Nl0sMTIwODY6W1syNDMxOF0sMjU2XSwxMjA4NzpbWzI0MzMxXSwyNTZdLDEyMDg4OltbMjQzMzldLDI1Nl0sMTIwODk6W1syNDQwMF0sMjU2XSwxMjA5MDpbWzI0NDE3XSwyNTZdLDEyMDkxOltbMjQ0MzVdLDI1Nl0sMTIwOTI6W1syNDUxNV0sMjU2XSwxMjA5MzpbWzI1MDk2XSwyNTZdLDEyMDk0OltbMjUxNDJdLDI1Nl0sMTIwOTU6W1syNTE2M10sMjU2XSwxMjA5NjpbWzI1OTAzXSwyNTZdLDEyMDk3OltbMjU5MDhdLDI1Nl0sMTIwOTg6W1syNTk5MV0sMjU2XSwxMjA5OTpbWzI2MDA3XSwyNTZdLDEyMTAwOltbMjYwMjBdLDI1Nl0sMTIxMDE6W1syNjA0MV0sMjU2XSwxMjEwMjpbWzI2MDgwXSwyNTZdLDEyMTAzOltbMjYwODVdLDI1Nl0sMTIxMDQ6W1syNjM1Ml0sMjU2XSwxMjEwNTpbWzI2Mzc2XSwyNTZdLDEyMTA2OltbMjY0MDhdLDI1Nl0sMTIxMDc6W1syNzQyNF0sMjU2XSwxMjEwODpbWzI3NDkwXSwyNTZdLDEyMTA5OltbMjc1MTNdLDI1Nl0sMTIxMTA6W1syNzU3MV0sMjU2XSwxMjExMTpbWzI3NTk1XSwyNTZdLDEyMTEyOltbMjc2MDRdLDI1Nl0sMTIxMTM6W1syNzYxMV0sMjU2XSwxMjExNDpbWzI3NjYzXSwyNTZdLDEyMTE1OltbMjc2NjhdLDI1Nl0sMTIxMTY6W1syNzcwMF0sMjU2XSwxMjExNzpbWzI4Nzc5XSwyNTZdLDEyMTE4OltbMjkyMjZdLDI1Nl0sMTIxMTk6W1syOTIzOF0sMjU2XSwxMjEyMDpbWzI5MjQzXSwyNTZdLDEyMTIxOltbMjkyNDddLDI1Nl0sMTIxMjI6W1syOTI1NV0sMjU2XSwxMjEyMzpbWzI5MjczXSwyNTZdLDEyMTI0OltbMjkyNzVdLDI1Nl0sMTIxMjU6W1syOTM1Nl0sMjU2XSwxMjEyNjpbWzI5NTcyXSwyNTZdLDEyMTI3OltbMjk1NzddLDI1Nl0sMTIxMjg6W1syOTkxNl0sMjU2XSwxMjEyOTpbWzI5OTI2XSwyNTZdLDEyMTMwOltbMjk5NzZdLDI1Nl0sMTIxMzE6W1syOTk4M10sMjU2XSwxMjEzMjpbWzI5OTkyXSwyNTZdLDEyMTMzOltbMzAwMDBdLDI1Nl0sMTIxMzQ6W1szMDA5MV0sMjU2XSwxMjEzNTpbWzMwMDk4XSwyNTZdLDEyMTM2OltbMzAzMjZdLDI1Nl0sMTIxMzc6W1szMDMzM10sMjU2XSwxMjEzODpbWzMwMzgyXSwyNTZdLDEyMTM5OltbMzAzOTldLDI1Nl0sMTIxNDA6W1szMDQ0Nl0sMjU2XSwxMjE0MTpbWzMwNjgzXSwyNTZdLDEyMTQyOltbMzA2OTBdLDI1Nl0sMTIxNDM6W1szMDcwN10sMjU2XSwxMjE0NDpbWzMxMDM0XSwyNTZdLDEyMTQ1OltbMzExNjBdLDI1Nl0sMTIxNDY6W1szMTE2Nl0sMjU2XSwxMjE0NzpbWzMxMzQ4XSwyNTZdLDEyMTQ4OltbMzE0MzVdLDI1Nl0sMTIxNDk6W1szMTQ4MV0sMjU2XSwxMjE1MDpbWzMxODU5XSwyNTZdLDEyMTUxOltbMzE5OTJdLDI1Nl0sMTIxNTI6W1szMjU2Nl0sMjU2XSwxMjE1MzpbWzMyNTkzXSwyNTZdLDEyMTU0OltbMzI2NTBdLDI1Nl0sMTIxNTU6W1szMjcwMV0sMjU2XSwxMjE1NjpbWzMyNzY5XSwyNTZdLDEyMTU3OltbMzI3ODBdLDI1Nl0sMTIxNTg6W1szMjc4Nl0sMjU2XSwxMjE1OTpbWzMyODE5XSwyNTZdLDEyMTYwOltbMzI4OTVdLDI1Nl0sMTIxNjE6W1szMjkwNV0sMjU2XSwxMjE2MjpbWzMzMjUxXSwyNTZdLDEyMTYzOltbMzMyNThdLDI1Nl0sMTIxNjQ6W1szMzI2N10sMjU2XSwxMjE2NTpbWzMzMjc2XSwyNTZdLDEyMTY2OltbMzMyOTJdLDI1Nl0sMTIxNjc6W1szMzMwN10sMjU2XSwxMjE2ODpbWzMzMzExXSwyNTZdLDEyMTY5OltbMzMzOTBdLDI1Nl0sMTIxNzA6W1szMzM5NF0sMjU2XSwxMjE3MTpbWzMzNDAwXSwyNTZdLDEyMTcyOltbMzQzODFdLDI1Nl0sMTIxNzM6W1szNDQxMV0sMjU2XSwxMjE3NDpbWzM0ODgwXSwyNTZdLDEyMTc1OltbMzQ4OTJdLDI1Nl0sMTIxNzY6W1szNDkxNV0sMjU2XSwxMjE3NzpbWzM1MTk4XSwyNTZdLDEyMTc4OltbMzUyMTFdLDI1Nl0sMTIxNzk6W1szNTI4Ml0sMjU2XSwxMjE4MDpbWzM1MzI4XSwyNTZdLDEyMTgxOltbMzU4OTVdLDI1Nl0sMTIxODI6W1szNTkxMF0sMjU2XSwxMjE4MzpbWzM1OTI1XSwyNTZdLDEyMTg0OltbMzU5NjBdLDI1Nl0sMTIxODU6W1szNTk5N10sMjU2XSwxMjE4NjpbWzM2MTk2XSwyNTZdLDEyMTg3OltbMzYyMDhdLDI1Nl0sMTIxODg6W1szNjI3NV0sMjU2XSwxMjE4OTpbWzM2NTIzXSwyNTZdLDEyMTkwOltbMzY1NTRdLDI1Nl0sMTIxOTE6W1szNjc2M10sMjU2XSwxMjE5MjpbWzM2Nzg0XSwyNTZdLDEyMTkzOltbMzY3ODldLDI1Nl0sMTIxOTQ6W1szNzAwOV0sMjU2XSwxMjE5NTpbWzM3MTkzXSwyNTZdLDEyMTk2OltbMzczMThdLDI1Nl0sMTIxOTc6W1szNzMyNF0sMjU2XSwxMjE5ODpbWzM3MzI5XSwyNTZdLDEyMTk5OltbMzgyNjNdLDI1Nl0sMTIyMDA6W1szODI3Ml0sMjU2XSwxMjIwMTpbWzM4NDI4XSwyNTZdLDEyMjAyOltbMzg1ODJdLDI1Nl0sMTIyMDM6W1szODU4NV0sMjU2XSwxMjIwNDpbWzM4NjMyXSwyNTZdLDEyMjA1OltbMzg3MzddLDI1Nl0sMTIyMDY6W1szODc1MF0sMjU2XSwxMjIwNzpbWzM4NzU0XSwyNTZdLDEyMjA4OltbMzg3NjFdLDI1Nl0sMTIyMDk6W1szODg1OV0sMjU2XSwxMjIxMDpbWzM4ODkzXSwyNTZdLDEyMjExOltbMzg4OTldLDI1Nl0sMTIyMTI6W1szODkxM10sMjU2XSwxMjIxMzpbWzM5MDgwXSwyNTZdLDEyMjE0OltbMzkxMzFdLDI1Nl0sMTIyMTU6W1szOTEzNV0sMjU2XSwxMjIxNjpbWzM5MzE4XSwyNTZdLDEyMjE3OltbMzkzMjFdLDI1Nl0sMTIyMTg6W1szOTM0MF0sMjU2XSwxMjIxOTpbWzM5NTkyXSwyNTZdLDEyMjIwOltbMzk2NDBdLDI1Nl0sMTIyMjE6W1szOTY0N10sMjU2XSwxMjIyMjpbWzM5NzE3XSwyNTZdLDEyMjIzOltbMzk3MjddLDI1Nl0sMTIyMjQ6W1szOTczMF0sMjU2XSwxMjIyNTpbWzM5NzQwXSwyNTZdLDEyMjI2OltbMzk3NzBdLDI1Nl0sMTIyMjc6W1s0MDE2NV0sMjU2XSwxMjIyODpbWzQwNTY1XSwyNTZdLDEyMjI5OltbNDA1NzVdLDI1Nl0sMTIyMzA6W1s0MDYxM10sMjU2XSwxMjIzMTpbWzQwNjM1XSwyNTZdLDEyMjMyOltbNDA2NDNdLDI1Nl0sMTIyMzM6W1s0MDY1M10sMjU2XSwxMjIzNDpbWzQwNjU3XSwyNTZdLDEyMjM1OltbNDA2OTddLDI1Nl0sMTIyMzY6W1s0MDcwMV0sMjU2XSwxMjIzNzpbWzQwNzE4XSwyNTZdLDEyMjM4OltbNDA3MjNdLDI1Nl0sMTIyMzk6W1s0MDczNl0sMjU2XSwxMjI0MDpbWzQwNzYzXSwyNTZdLDEyMjQxOltbNDA3NzhdLDI1Nl0sMTIyNDI6W1s0MDc4Nl0sMjU2XSwxMjI0MzpbWzQwODQ1XSwyNTZdLDEyMjQ0OltbNDA4NjBdLDI1Nl0sMTIyNDU6W1s0MDg2NF0sMjU2XX0sCjEyMjg4OnsxMjI4ODpbWzMyXSwyNTZdLDEyMzMwOlssMjE4XSwxMjMzMTpbLDIyOF0sMTIzMzI6WywyMzJdLDEyMzMzOlssMjIyXSwxMjMzNDpbLDIyNF0sMTIzMzU6WywyMjRdLDEyMzQyOltbMTIzMDZdLDI1Nl0sMTIzNDQ6W1syMTMxM10sMjU2XSwxMjM0NTpbWzIxMzE2XSwyNTZdLDEyMzQ2OltbMjEzMTddLDI1Nl0sMTIzNTg6WywsezEyNDQxOjEyNDM2fV0sMTIzNjM6WywsezEyNDQxOjEyMzY0fV0sMTIzNjQ6W1sxMjM2MywxMjQ0MV1dLDEyMzY1OlssLHsxMjQ0MToxMjM2Nn1dLDEyMzY2OltbMTIzNjUsMTI0NDFdXSwxMjM2NzpbLCx7MTI0NDE6MTIzNjh9XSwxMjM2ODpbWzEyMzY3LDEyNDQxXV0sMTIzNjk6WywsezEyNDQxOjEyMzcwfV0sMTIzNzA6W1sxMjM2OSwxMjQ0MV1dLDEyMzcxOlssLHsxMjQ0MToxMjM3Mn1dLDEyMzcyOltbMTIzNzEsMTI0NDFdXSwxMjM3MzpbLCx7MTI0NDE6MTIzNzR9XSwxMjM3NDpbWzEyMzczLDEyNDQxXV0sMTIzNzU6WywsezEyNDQxOjEyMzc2fV0sMTIzNzY6W1sxMjM3NSwxMjQ0MV1dLDEyMzc3OlssLHsxMjQ0MToxMjM3OH1dLDEyMzc4OltbMTIzNzcsMTI0NDFdXSwxMjM3OTpbLCx7MTI0NDE6MTIzODB9XSwxMjM4MDpbWzEyMzc5LDEyNDQxXV0sMTIzODE6WywsezEyNDQxOjEyMzgyfV0sMTIzODI6W1sxMjM4MSwxMjQ0MV1dLDEyMzgzOlssLHsxMjQ0MToxMjM4NH1dLDEyMzg0OltbMTIzODMsMTI0NDFdXSwxMjM4NTpbLCx7MTI0NDE6MTIzODZ9XSwxMjM4NjpbWzEyMzg1LDEyNDQxXV0sMTIzODg6WywsezEyNDQxOjEyMzg5fV0sMTIzODk6W1sxMjM4OCwxMjQ0MV1dLDEyMzkwOlssLHsxMjQ0MToxMjM5MX1dLDEyMzkxOltbMTIzOTAsMTI0NDFdXSwxMjM5MjpbLCx7MTI0NDE6MTIzOTN9XSwxMjM5MzpbWzEyMzkyLDEyNDQxXV0sMTIzOTk6WywsezEyNDQxOjEyNDAwLDEyNDQyOjEyNDAxfV0sMTI0MDA6W1sxMjM5OSwxMjQ0MV1dLDEyNDAxOltbMTIzOTksMTI0NDJdXSwxMjQwMjpbLCx7MTI0NDE6MTI0MDMsMTI0NDI6MTI0MDR9XSwxMjQwMzpbWzEyNDAyLDEyNDQxXV0sMTI0MDQ6W1sxMjQwMiwxMjQ0Ml1dLDEyNDA1OlssLHsxMjQ0MToxMjQwNiwxMjQ0MjoxMjQwN31dLDEyNDA2OltbMTI0MDUsMTI0NDFdXSwxMjQwNzpbWzEyNDA1LDEyNDQyXV0sMTI0MDg6WywsezEyNDQxOjEyNDA5LDEyNDQyOjEyNDEwfV0sMTI0MDk6W1sxMjQwOCwxMjQ0MV1dLDEyNDEwOltbMTI0MDgsMTI0NDJdXSwxMjQxMTpbLCx7MTI0NDE6MTI0MTIsMTI0NDI6MTI0MTN9XSwxMjQxMjpbWzEyNDExLDEyNDQxXV0sMTI0MTM6W1sxMjQxMSwxMjQ0Ml1dLDEyNDM2OltbMTIzNTgsMTI0NDFdXSwxMjQ0MTpbLDhdLDEyNDQyOlssOF0sMTI0NDM6W1szMiwxMjQ0MV0sMjU2XSwxMjQ0NDpbWzMyLDEyNDQyXSwyNTZdLDEyNDQ1OlssLHsxMjQ0MToxMjQ0Nn1dLDEyNDQ2OltbMTI0NDUsMTI0NDFdXSwxMjQ0NzpbWzEyNDI0LDEyNDI2XSwyNTZdLDEyNDU0OlssLHsxMjQ0MToxMjUzMn1dLDEyNDU5OlssLHsxMjQ0MToxMjQ2MH1dLDEyNDYwOltbMTI0NTksMTI0NDFdXSwxMjQ2MTpbLCx7MTI0NDE6MTI0NjJ9XSwxMjQ2MjpbWzEyNDYxLDEyNDQxXV0sMTI0NjM6WywsezEyNDQxOjEyNDY0fV0sMTI0NjQ6W1sxMjQ2MywxMjQ0MV1dLDEyNDY1OlssLHsxMjQ0MToxMjQ2Nn1dLDEyNDY2OltbMTI0NjUsMTI0NDFdXSwxMjQ2NzpbLCx7MTI0NDE6MTI0Njh9XSwxMjQ2ODpbWzEyNDY3LDEyNDQxXV0sMTI0Njk6WywsezEyNDQxOjEyNDcwfV0sMTI0NzA6W1sxMjQ2OSwxMjQ0MV1dLDEyNDcxOlssLHsxMjQ0MToxMjQ3Mn1dLDEyNDcyOltbMTI0NzEsMTI0NDFdXSwxMjQ3MzpbLCx7MTI0NDE6MTI0NzR9XSwxMjQ3NDpbWzEyNDczLDEyNDQxXV0sMTI0NzU6WywsezEyNDQxOjEyNDc2fV0sMTI0NzY6W1sxMjQ3NSwxMjQ0MV1dLDEyNDc3OlssLHsxMjQ0MToxMjQ3OH1dLDEyNDc4OltbMTI0NzcsMTI0NDFdXSwxMjQ3OTpbLCx7MTI0NDE6MTI0ODB9XSwxMjQ4MDpbWzEyNDc5LDEyNDQxXV0sMTI0ODE6WywsezEyNDQxOjEyNDgyfV0sMTI0ODI6W1sxMjQ4MSwxMjQ0MV1dLDEyNDg0OlssLHsxMjQ0MToxMjQ4NX1dLDEyNDg1OltbMTI0ODQsMTI0NDFdXSwxMjQ4NjpbLCx7MTI0NDE6MTI0ODd9XSwxMjQ4NzpbWzEyNDg2LDEyNDQxXV0sMTI0ODg6WywsezEyNDQxOjEyNDg5fV0sMTI0ODk6W1sxMjQ4OCwxMjQ0MV1dLDEyNDk1OlssLHsxMjQ0MToxMjQ5NiwxMjQ0MjoxMjQ5N31dLDEyNDk2OltbMTI0OTUsMTI0NDFdXSwxMjQ5NzpbWzEyNDk1LDEyNDQyXV0sMTI0OTg6WywsezEyNDQxOjEyNDk5LDEyNDQyOjEyNTAwfV0sMTI0OTk6W1sxMjQ5OCwxMjQ0MV1dLDEyNTAwOltbMTI0OTgsMTI0NDJdXSwxMjUwMTpbLCx7MTI0NDE6MTI1MDIsMTI0NDI6MTI1MDN9XSwxMjUwMjpbWzEyNTAxLDEyNDQxXV0sMTI1MDM6W1sxMjUwMSwxMjQ0Ml1dLDEyNTA0OlssLHsxMjQ0MToxMjUwNSwxMjQ0MjoxMjUwNn1dLDEyNTA1OltbMTI1MDQsMTI0NDFdXSwxMjUwNjpbWzEyNTA0LDEyNDQyXV0sMTI1MDc6WywsezEyNDQxOjEyNTA4LDEyNDQyOjEyNTA5fV0sMTI1MDg6W1sxMjUwNywxMjQ0MV1dLDEyNTA5OltbMTI1MDcsMTI0NDJdXSwxMjUyNzpbLCx7MTI0NDE6MTI1MzV9XSwxMjUyODpbLCx7MTI0NDE6MTI1MzZ9XSwxMjUyOTpbLCx7MTI0NDE6MTI1Mzd9XSwxMjUzMDpbLCx7MTI0NDE6MTI1Mzh9XSwxMjUzMjpbWzEyNDU0LDEyNDQxXV0sMTI1MzU6W1sxMjUyNywxMjQ0MV1dLDEyNTM2OltbMTI1MjgsMTI0NDFdXSwxMjUzNzpbWzEyNTI5LDEyNDQxXV0sMTI1Mzg6W1sxMjUzMCwxMjQ0MV1dLDEyNTQxOlssLHsxMjQ0MToxMjU0Mn1dLDEyNTQyOltbMTI1NDEsMTI0NDFdXSwxMjU0MzpbWzEyNDY3LDEyNDg4XSwyNTZdfSwKMTI1NDQ6ezEyNTkzOltbNDM1Ml0sMjU2XSwxMjU5NDpbWzQzNTNdLDI1Nl0sMTI1OTU6W1s0NTIyXSwyNTZdLDEyNTk2OltbNDM1NF0sMjU2XSwxMjU5NzpbWzQ1MjRdLDI1Nl0sMTI1OTg6W1s0NTI1XSwyNTZdLDEyNTk5OltbNDM1NV0sMjU2XSwxMjYwMDpbWzQzNTZdLDI1Nl0sMTI2MDE6W1s0MzU3XSwyNTZdLDEyNjAyOltbNDUyOF0sMjU2XSwxMjYwMzpbWzQ1MjldLDI1Nl0sMTI2MDQ6W1s0NTMwXSwyNTZdLDEyNjA1OltbNDUzMV0sMjU2XSwxMjYwNjpbWzQ1MzJdLDI1Nl0sMTI2MDc6W1s0NTMzXSwyNTZdLDEyNjA4OltbNDM3OF0sMjU2XSwxMjYwOTpbWzQzNThdLDI1Nl0sMTI2MTA6W1s0MzU5XSwyNTZdLDEyNjExOltbNDM2MF0sMjU2XSwxMjYxMjpbWzQzODVdLDI1Nl0sMTI2MTM6W1s0MzYxXSwyNTZdLDEyNjE0OltbNDM2Ml0sMjU2XSwxMjYxNTpbWzQzNjNdLDI1Nl0sMTI2MTY6W1s0MzY0XSwyNTZdLDEyNjE3OltbNDM2NV0sMjU2XSwxMjYxODpbWzQzNjZdLDI1Nl0sMTI2MTk6W1s0MzY3XSwyNTZdLDEyNjIwOltbNDM2OF0sMjU2XSwxMjYyMTpbWzQzNjldLDI1Nl0sMTI2MjI6W1s0MzcwXSwyNTZdLDEyNjIzOltbNDQ0OV0sMjU2XSwxMjYyNDpbWzQ0NTBdLDI1Nl0sMTI2MjU6W1s0NDUxXSwyNTZdLDEyNjI2OltbNDQ1Ml0sMjU2XSwxMjYyNzpbWzQ0NTNdLDI1Nl0sMTI2Mjg6W1s0NDU0XSwyNTZdLDEyNjI5OltbNDQ1NV0sMjU2XSwxMjYzMDpbWzQ0NTZdLDI1Nl0sMTI2MzE6W1s0NDU3XSwyNTZdLDEyNjMyOltbNDQ1OF0sMjU2XSwxMjYzMzpbWzQ0NTldLDI1Nl0sMTI2MzQ6W1s0NDYwXSwyNTZdLDEyNjM1OltbNDQ2MV0sMjU2XSwxMjYzNjpbWzQ0NjJdLDI1Nl0sMTI2Mzc6W1s0NDYzXSwyNTZdLDEyNjM4OltbNDQ2NF0sMjU2XSwxMjYzOTpbWzQ0NjVdLDI1Nl0sMTI2NDA6W1s0NDY2XSwyNTZdLDEyNjQxOltbNDQ2N10sMjU2XSwxMjY0MjpbWzQ0NjhdLDI1Nl0sMTI2NDM6W1s0NDY5XSwyNTZdLDEyNjQ0OltbNDQ0OF0sMjU2XSwxMjY0NTpbWzQzNzJdLDI1Nl0sMTI2NDY6W1s0MzczXSwyNTZdLDEyNjQ3OltbNDU1MV0sMjU2XSwxMjY0ODpbWzQ1NTJdLDI1Nl0sMTI2NDk6W1s0NTU2XSwyNTZdLDEyNjUwOltbNDU1OF0sMjU2XSwxMjY1MTpbWzQ1NjNdLDI1Nl0sMTI2NTI6W1s0NTY3XSwyNTZdLDEyNjUzOltbNDU2OV0sMjU2XSwxMjY1NDpbWzQzODBdLDI1Nl0sMTI2NTU6W1s0NTczXSwyNTZdLDEyNjU2OltbNDU3NV0sMjU2XSwxMjY1NzpbWzQzODFdLDI1Nl0sMTI2NTg6W1s0MzgyXSwyNTZdLDEyNjU5OltbNDM4NF0sMjU2XSwxMjY2MDpbWzQzODZdLDI1Nl0sMTI2NjE6W1s0Mzg3XSwyNTZdLDEyNjYyOltbNDM5MV0sMjU2XSwxMjY2MzpbWzQzOTNdLDI1Nl0sMTI2NjQ6W1s0Mzk1XSwyNTZdLDEyNjY1OltbNDM5Nl0sMjU2XSwxMjY2NjpbWzQzOTddLDI1Nl0sMTI2Njc6W1s0Mzk4XSwyNTZdLDEyNjY4OltbNDM5OV0sMjU2XSwxMjY2OTpbWzQ0MDJdLDI1Nl0sMTI2NzA6W1s0NDA2XSwyNTZdLDEyNjcxOltbNDQxNl0sMjU2XSwxMjY3MjpbWzQ0MjNdLDI1Nl0sMTI2NzM6W1s0NDI4XSwyNTZdLDEyNjc0OltbNDU5M10sMjU2XSwxMjY3NTpbWzQ1OTRdLDI1Nl0sMTI2NzY6W1s0NDM5XSwyNTZdLDEyNjc3OltbNDQ0MF0sMjU2XSwxMjY3ODpbWzQ0NDFdLDI1Nl0sMTI2Nzk6W1s0NDg0XSwyNTZdLDEyNjgwOltbNDQ4NV0sMjU2XSwxMjY4MTpbWzQ0ODhdLDI1Nl0sMTI2ODI6W1s0NDk3XSwyNTZdLDEyNjgzOltbNDQ5OF0sMjU2XSwxMjY4NDpbWzQ1MDBdLDI1Nl0sMTI2ODU6W1s0NTEwXSwyNTZdLDEyNjg2OltbNDUxM10sMjU2XSwxMjY5MDpbWzE5OTY4XSwyNTZdLDEyNjkxOltbMjAxMDhdLDI1Nl0sMTI2OTI6W1sxOTk3N10sMjU2XSwxMjY5MzpbWzIyMjM1XSwyNTZdLDEyNjk0OltbMTk5NzhdLDI1Nl0sMTI2OTU6W1syMDAxM10sMjU2XSwxMjY5NjpbWzE5OTc5XSwyNTZdLDEyNjk3OltbMzAwMDJdLDI1Nl0sMTI2OTg6W1syMDA1N10sMjU2XSwxMjY5OTpbWzE5OTkzXSwyNTZdLDEyNzAwOltbMTk5NjldLDI1Nl0sMTI3MDE6W1syMjgyNV0sMjU2XSwxMjcwMjpbWzIyMzIwXSwyNTZdLDEyNzAzOltbMjAxNTRdLDI1Nl19LAoxMjgwMDp7MTI4MDA6W1s0MCw0MzUyLDQxXSwyNTZdLDEyODAxOltbNDAsNDM1NCw0MV0sMjU2XSwxMjgwMjpbWzQwLDQzNTUsNDFdLDI1Nl0sMTI4MDM6W1s0MCw0MzU3LDQxXSwyNTZdLDEyODA0OltbNDAsNDM1OCw0MV0sMjU2XSwxMjgwNTpbWzQwLDQzNTksNDFdLDI1Nl0sMTI4MDY6W1s0MCw0MzYxLDQxXSwyNTZdLDEyODA3OltbNDAsNDM2Myw0MV0sMjU2XSwxMjgwODpbWzQwLDQzNjQsNDFdLDI1Nl0sMTI4MDk6W1s0MCw0MzY2LDQxXSwyNTZdLDEyODEwOltbNDAsNDM2Nyw0MV0sMjU2XSwxMjgxMTpbWzQwLDQzNjgsNDFdLDI1Nl0sMTI4MTI6W1s0MCw0MzY5LDQxXSwyNTZdLDEyODEzOltbNDAsNDM3MCw0MV0sMjU2XSwxMjgxNDpbWzQwLDQzNTIsNDQ0OSw0MV0sMjU2XSwxMjgxNTpbWzQwLDQzNTQsNDQ0OSw0MV0sMjU2XSwxMjgxNjpbWzQwLDQzNTUsNDQ0OSw0MV0sMjU2XSwxMjgxNzpbWzQwLDQzNTcsNDQ0OSw0MV0sMjU2XSwxMjgxODpbWzQwLDQzNTgsNDQ0OSw0MV0sMjU2XSwxMjgxOTpbWzQwLDQzNTksNDQ0OSw0MV0sMjU2XSwxMjgyMDpbWzQwLDQzNjEsNDQ0OSw0MV0sMjU2XSwxMjgyMTpbWzQwLDQzNjMsNDQ0OSw0MV0sMjU2XSwxMjgyMjpbWzQwLDQzNjQsNDQ0OSw0MV0sMjU2XSwxMjgyMzpbWzQwLDQzNjYsNDQ0OSw0MV0sMjU2XSwxMjgyNDpbWzQwLDQzNjcsNDQ0OSw0MV0sMjU2XSwxMjgyNTpbWzQwLDQzNjgsNDQ0OSw0MV0sMjU2XSwxMjgyNjpbWzQwLDQzNjksNDQ0OSw0MV0sMjU2XSwxMjgyNzpbWzQwLDQzNzAsNDQ0OSw0MV0sMjU2XSwxMjgyODpbWzQwLDQzNjQsNDQ2Miw0MV0sMjU2XSwxMjgyOTpbWzQwLDQzNjMsNDQ1Nyw0MzY0LDQ0NTMsNDUyMyw0MV0sMjU2XSwxMjgzMDpbWzQwLDQzNjMsNDQ1Nyw0MzcwLDQ0NjIsNDFdLDI1Nl0sMTI4MzI6W1s0MCwxOTk2OCw0MV0sMjU2XSwxMjgzMzpbWzQwLDIwMTA4LDQxXSwyNTZdLDEyODM0OltbNDAsMTk5NzcsNDFdLDI1Nl0sMTI4MzU6W1s0MCwyMjIzNSw0MV0sMjU2XSwxMjgzNjpbWzQwLDIwMTE2LDQxXSwyNTZdLDEyODM3OltbNDAsMjA4NDUsNDFdLDI1Nl0sMTI4Mzg6W1s0MCwxOTk3MSw0MV0sMjU2XSwxMjgzOTpbWzQwLDIwODQzLDQxXSwyNTZdLDEyODQwOltbNDAsMjAwNjEsNDFdLDI1Nl0sMTI4NDE6W1s0MCwyMTMxMyw0MV0sMjU2XSwxMjg0MjpbWzQwLDI2Mzc2LDQxXSwyNTZdLDEyODQzOltbNDAsMjg3NzksNDFdLDI1Nl0sMTI4NDQ6W1s0MCwyNzcwMCw0MV0sMjU2XSwxMjg0NTpbWzQwLDI2NDA4LDQxXSwyNTZdLDEyODQ2OltbNDAsMzczMjksNDFdLDI1Nl0sMTI4NDc6W1s0MCwyMjMwMyw0MV0sMjU2XSwxMjg0ODpbWzQwLDI2MDg1LDQxXSwyNTZdLDEyODQ5OltbNDAsMjY2NjYsNDFdLDI1Nl0sMTI4NTA6W1s0MCwyNjM3Nyw0MV0sMjU2XSwxMjg1MTpbWzQwLDMxMDM4LDQxXSwyNTZdLDEyODUyOltbNDAsMjE1MTcsNDFdLDI1Nl0sMTI4NTM6W1s0MCwyOTMwNSw0MV0sMjU2XSwxMjg1NDpbWzQwLDM2MDAxLDQxXSwyNTZdLDEyODU1OltbNDAsMzEwNjksNDFdLDI1Nl0sMTI4NTY6W1s0MCwyMTE3Miw0MV0sMjU2XSwxMjg1NzpbWzQwLDIwMTk1LDQxXSwyNTZdLDEyODU4OltbNDAsMjE2MjgsNDFdLDI1Nl0sMTI4NTk6W1s0MCwyMzM5OCw0MV0sMjU2XSwxMjg2MDpbWzQwLDMwNDM1LDQxXSwyNTZdLDEyODYxOltbNDAsMjAyMjUsNDFdLDI1Nl0sMTI4NjI6W1s0MCwzNjAzOSw0MV0sMjU2XSwxMjg2MzpbWzQwLDIxMzMyLDQxXSwyNTZdLDEyODY0OltbNDAsMzEwODUsNDFdLDI1Nl0sMTI4NjU6W1s0MCwyMDI0MSw0MV0sMjU2XSwxMjg2NjpbWzQwLDMzMjU4LDQxXSwyNTZdLDEyODY3OltbNDAsMzMyNjcsNDFdLDI1Nl0sMTI4Njg6W1syMTgzOV0sMjU2XSwxMjg2OTpbWzI0MTg4XSwyNTZdLDEyODcwOltbMjU5OTFdLDI1Nl0sMTI4NzE6W1szMTYzMV0sMjU2XSwxMjg4MDpbWzgwLDg0LDY5XSwyNTZdLDEyODgxOltbNTAsNDldLDI1Nl0sMTI4ODI6W1s1MCw1MF0sMjU2XSwxMjg4MzpbWzUwLDUxXSwyNTZdLDEyODg0OltbNTAsNTJdLDI1Nl0sMTI4ODU6W1s1MCw1M10sMjU2XSwxMjg4NjpbWzUwLDU0XSwyNTZdLDEyODg3OltbNTAsNTVdLDI1Nl0sMTI4ODg6W1s1MCw1Nl0sMjU2XSwxMjg4OTpbWzUwLDU3XSwyNTZdLDEyODkwOltbNTEsNDhdLDI1Nl0sMTI4OTE6W1s1MSw0OV0sMjU2XSwxMjg5MjpbWzUxLDUwXSwyNTZdLDEyODkzOltbNTEsNTFdLDI1Nl0sMTI4OTQ6W1s1MSw1Ml0sMjU2XSwxMjg5NTpbWzUxLDUzXSwyNTZdLDEyODk2OltbNDM1Ml0sMjU2XSwxMjg5NzpbWzQzNTRdLDI1Nl0sMTI4OTg6W1s0MzU1XSwyNTZdLDEyODk5OltbNDM1N10sMjU2XSwxMjkwMDpbWzQzNThdLDI1Nl0sMTI5MDE6W1s0MzU5XSwyNTZdLDEyOTAyOltbNDM2MV0sMjU2XSwxMjkwMzpbWzQzNjNdLDI1Nl0sMTI5MDQ6W1s0MzY0XSwyNTZdLDEyOTA1OltbNDM2Nl0sMjU2XSwxMjkwNjpbWzQzNjddLDI1Nl0sMTI5MDc6W1s0MzY4XSwyNTZdLDEyOTA4OltbNDM2OV0sMjU2XSwxMjkwOTpbWzQzNzBdLDI1Nl0sMTI5MTA6W1s0MzUyLDQ0NDldLDI1Nl0sMTI5MTE6W1s0MzU0LDQ0NDldLDI1Nl0sMTI5MTI6W1s0MzU1LDQ0NDldLDI1Nl0sMTI5MTM6W1s0MzU3LDQ0NDldLDI1Nl0sMTI5MTQ6W1s0MzU4LDQ0NDldLDI1Nl0sMTI5MTU6W1s0MzU5LDQ0NDldLDI1Nl0sMTI5MTY6W1s0MzYxLDQ0NDldLDI1Nl0sMTI5MTc6W1s0MzYzLDQ0NDldLDI1Nl0sMTI5MTg6W1s0MzY0LDQ0NDldLDI1Nl0sMTI5MTk6W1s0MzY2LDQ0NDldLDI1Nl0sMTI5MjA6W1s0MzY3LDQ0NDldLDI1Nl0sMTI5MjE6W1s0MzY4LDQ0NDldLDI1Nl0sMTI5MjI6W1s0MzY5LDQ0NDldLDI1Nl0sMTI5MjM6W1s0MzcwLDQ0NDldLDI1Nl0sMTI5MjQ6W1s0MzY2LDQ0NDksNDUzNSw0MzUyLDQ0NTddLDI1Nl0sMTI5MjU6W1s0MzY0LDQ0NjIsNDM2Myw0NDY4XSwyNTZdLDEyOTI2OltbNDM2Myw0NDYyXSwyNTZdLDEyOTI4OltbMTk5NjhdLDI1Nl0sMTI5Mjk6W1syMDEwOF0sMjU2XSwxMjkzMDpbWzE5OTc3XSwyNTZdLDEyOTMxOltbMjIyMzVdLDI1Nl0sMTI5MzI6W1syMDExNl0sMjU2XSwxMjkzMzpbWzIwODQ1XSwyNTZdLDEyOTM0OltbMTk5NzFdLDI1Nl0sMTI5MzU6W1syMDg0M10sMjU2XSwxMjkzNjpbWzIwMDYxXSwyNTZdLDEyOTM3OltbMjEzMTNdLDI1Nl0sMTI5Mzg6W1syNjM3Nl0sMjU2XSwxMjkzOTpbWzI4Nzc5XSwyNTZdLDEyOTQwOltbMjc3MDBdLDI1Nl0sMTI5NDE6W1syNjQwOF0sMjU2XSwxMjk0MjpbWzM3MzI5XSwyNTZdLDEyOTQzOltbMjIzMDNdLDI1Nl0sMTI5NDQ6W1syNjA4NV0sMjU2XSwxMjk0NTpbWzI2NjY2XSwyNTZdLDEyOTQ2OltbMjYzNzddLDI1Nl0sMTI5NDc6W1szMTAzOF0sMjU2XSwxMjk0ODpbWzIxNTE3XSwyNTZdLDEyOTQ5OltbMjkzMDVdLDI1Nl0sMTI5NTA6W1szNjAwMV0sMjU2XSwxMjk1MTpbWzMxMDY5XSwyNTZdLDEyOTUyOltbMjExNzJdLDI1Nl0sMTI5NTM6W1szMTE5Ml0sMjU2XSwxMjk1NDpbWzMwMDA3XSwyNTZdLDEyOTU1OltbMjI4OTldLDI1Nl0sMTI5NTY6W1szNjk2OV0sMjU2XSwxMjk1NzpbWzIwNzc4XSwyNTZdLDEyOTU4OltbMjEzNjBdLDI1Nl0sMTI5NTk6W1syNzg4MF0sMjU2XSwxMjk2MDpbWzM4OTE3XSwyNTZdLDEyOTYxOltbMjAyNDFdLDI1Nl0sMTI5NjI6W1syMDg4OV0sMjU2XSwxMjk2MzpbWzI3NDkxXSwyNTZdLDEyOTY0OltbMTk5NzhdLDI1Nl0sMTI5NjU6W1syMDAxM10sMjU2XSwxMjk2NjpbWzE5OTc5XSwyNTZdLDEyOTY3OltbMjQwMzhdLDI1Nl0sMTI5Njg6W1syMTQ5MV0sMjU2XSwxMjk2OTpbWzIxMzA3XSwyNTZdLDEyOTcwOltbMjM0NDddLDI1Nl0sMTI5NzE6W1syMzM5OF0sMjU2XSwxMjk3MjpbWzMwNDM1XSwyNTZdLDEyOTczOltbMjAyMjVdLDI1Nl0sMTI5NzQ6W1szNjAzOV0sMjU2XSwxMjk3NTpbWzIxMzMyXSwyNTZdLDEyOTc2OltbMjI4MTJdLDI1Nl0sMTI5Nzc6W1s1MSw1NF0sMjU2XSwxMjk3ODpbWzUxLDU1XSwyNTZdLDEyOTc5OltbNTEsNTZdLDI1Nl0sMTI5ODA6W1s1MSw1N10sMjU2XSwxMjk4MTpbWzUyLDQ4XSwyNTZdLDEyOTgyOltbNTIsNDldLDI1Nl0sMTI5ODM6W1s1Miw1MF0sMjU2XSwxMjk4NDpbWzUyLDUxXSwyNTZdLDEyOTg1OltbNTIsNTJdLDI1Nl0sMTI5ODY6W1s1Miw1M10sMjU2XSwxMjk4NzpbWzUyLDU0XSwyNTZdLDEyOTg4OltbNTIsNTVdLDI1Nl0sMTI5ODk6W1s1Miw1Nl0sMjU2XSwxMjk5MDpbWzUyLDU3XSwyNTZdLDEyOTkxOltbNTMsNDhdLDI1Nl0sMTI5OTI6W1s0OSwyNjM3Nl0sMjU2XSwxMjk5MzpbWzUwLDI2Mzc2XSwyNTZdLDEyOTk0OltbNTEsMjYzNzZdLDI1Nl0sMTI5OTU6W1s1MiwyNjM3Nl0sMjU2XSwxMjk5NjpbWzUzLDI2Mzc2XSwyNTZdLDEyOTk3OltbNTQsMjYzNzZdLDI1Nl0sMTI5OTg6W1s1NSwyNjM3Nl0sMjU2XSwxMjk5OTpbWzU2LDI2Mzc2XSwyNTZdLDEzMDAwOltbNTcsMjYzNzZdLDI1Nl0sMTMwMDE6W1s0OSw0OCwyNjM3Nl0sMjU2XSwxMzAwMjpbWzQ5LDQ5LDI2Mzc2XSwyNTZdLDEzMDAzOltbNDksNTAsMjYzNzZdLDI1Nl0sMTMwMDQ6W1s3MiwxMDNdLDI1Nl0sMTMwMDU6W1sxMDEsMTE0LDEwM10sMjU2XSwxMzAwNjpbWzEwMSw4Nl0sMjU2XSwxMzAwNzpbWzc2LDg0LDY4XSwyNTZdLDEzMDA4OltbMTI0NTBdLDI1Nl0sMTMwMDk6W1sxMjQ1Ml0sMjU2XSwxMzAxMDpbWzEyNDU0XSwyNTZdLDEzMDExOltbMTI0NTZdLDI1Nl0sMTMwMTI6W1sxMjQ1OF0sMjU2XSwxMzAxMzpbWzEyNDU5XSwyNTZdLDEzMDE0OltbMTI0NjFdLDI1Nl0sMTMwMTU6W1sxMjQ2M10sMjU2XSwxMzAxNjpbWzEyNDY1XSwyNTZdLDEzMDE3OltbMTI0NjddLDI1Nl0sMTMwMTg6W1sxMjQ2OV0sMjU2XSwxMzAxOTpbWzEyNDcxXSwyNTZdLDEzMDIwOltbMTI0NzNdLDI1Nl0sMTMwMjE6W1sxMjQ3NV0sMjU2XSwxMzAyMjpbWzEyNDc3XSwyNTZdLDEzMDIzOltbMTI0NzldLDI1Nl0sMTMwMjQ6W1sxMjQ4MV0sMjU2XSwxMzAyNTpbWzEyNDg0XSwyNTZdLDEzMDI2OltbMTI0ODZdLDI1Nl0sMTMwMjc6W1sxMjQ4OF0sMjU2XSwxMzAyODpbWzEyNDkwXSwyNTZdLDEzMDI5OltbMTI0OTFdLDI1Nl0sMTMwMzA6W1sxMjQ5Ml0sMjU2XSwxMzAzMTpbWzEyNDkzXSwyNTZdLDEzMDMyOltbMTI0OTRdLDI1Nl0sMTMwMzM6W1sxMjQ5NV0sMjU2XSwxMzAzNDpbWzEyNDk4XSwyNTZdLDEzMDM1OltbMTI1MDFdLDI1Nl0sMTMwMzY6W1sxMjUwNF0sMjU2XSwxMzAzNzpbWzEyNTA3XSwyNTZdLDEzMDM4OltbMTI1MTBdLDI1Nl0sMTMwMzk6W1sxMjUxMV0sMjU2XSwxMzA0MDpbWzEyNTEyXSwyNTZdLDEzMDQxOltbMTI1MTNdLDI1Nl0sMTMwNDI6W1sxMjUxNF0sMjU2XSwxMzA0MzpbWzEyNTE2XSwyNTZdLDEzMDQ0OltbMTI1MThdLDI1Nl0sMTMwNDU6W1sxMjUyMF0sMjU2XSwxMzA0NjpbWzEyNTIxXSwyNTZdLDEzMDQ3OltbMTI1MjJdLDI1Nl0sMTMwNDg6W1sxMjUyM10sMjU2XSwxMzA0OTpbWzEyNTI0XSwyNTZdLDEzMDUwOltbMTI1MjVdLDI1Nl0sMTMwNTE6W1sxMjUyN10sMjU2XSwxMzA1MjpbWzEyNTI4XSwyNTZdLDEzMDUzOltbMTI1MjldLDI1Nl0sMTMwNTQ6W1sxMjUzMF0sMjU2XX0sCjEzMDU2OnsxMzA1NjpbWzEyNDUwLDEyNDk3LDEyNTQwLDEyNDg4XSwyNTZdLDEzMDU3OltbMTI0NTAsMTI1MjMsMTI1MDEsMTI0NDldLDI1Nl0sMTMwNTg6W1sxMjQ1MCwxMjUzMSwxMjUwNiwxMjQ1MF0sMjU2XSwxMzA1OTpbWzEyNDUwLDEyNTQwLDEyNTIzXSwyNTZdLDEzMDYwOltbMTI0NTIsMTI0OTEsMTI1MzEsMTI0NjRdLDI1Nl0sMTMwNjE6W1sxMjQ1MiwxMjUzMSwxMjQ4MV0sMjU2XSwxMzA2MjpbWzEyNDU0LDEyNDU3LDEyNTMxXSwyNTZdLDEzMDYzOltbMTI0NTYsMTI0NzMsMTI0NjMsMTI1NDAsMTI0ODldLDI1Nl0sMTMwNjQ6W1sxMjQ1NiwxMjU0MCwxMjQ1OSwxMjU0MF0sMjU2XSwxMzA2NTpbWzEyNDU4LDEyNTMxLDEyNDczXSwyNTZdLDEzMDY2OltbMTI0NTgsMTI1NDAsMTI1MTJdLDI1Nl0sMTMwNjc6W1sxMjQ1OSwxMjQ1MiwxMjUyMl0sMjU2XSwxMzA2ODpbWzEyNDU5LDEyNTIxLDEyNDgzLDEyNDg4XSwyNTZdLDEzMDY5OltbMTI0NTksMTI1MjUsMTI1MjIsMTI1NDBdLDI1Nl0sMTMwNzA6W1sxMjQ2MCwxMjUyNSwxMjUzMV0sMjU2XSwxMzA3MTpbWzEyNDYwLDEyNTMxLDEyNTEwXSwyNTZdLDEzMDcyOltbMTI0NjIsMTI0NjBdLDI1Nl0sMTMwNzM6W1sxMjQ2MiwxMjQ5MSwxMjU0MF0sMjU2XSwxMzA3NDpbWzEyNDYxLDEyNTE3LDEyNTIyLDEyNTQwXSwyNTZdLDEzMDc1OltbMTI0NjIsMTI1MjMsMTI0ODAsMTI1NDBdLDI1Nl0sMTMwNzY6W1sxMjQ2MSwxMjUyNV0sMjU2XSwxMzA3NzpbWzEyNDYxLDEyNTI1LDEyNDY0LDEyNTIxLDEyNTEyXSwyNTZdLDEzMDc4OltbMTI0NjEsMTI1MjUsMTI1MTMsMTI1NDAsMTI0ODgsMTI1MjNdLDI1Nl0sMTMwNzk6W1sxMjQ2MSwxMjUyNSwxMjUyNywxMjQ4MywxMjQ4OF0sMjU2XSwxMzA4MDpbWzEyNDY0LDEyNTIxLDEyNTEyXSwyNTZdLDEzMDgxOltbMTI0NjQsMTI1MjEsMTI1MTIsMTI0ODgsMTI1MzFdLDI1Nl0sMTMwODI6W1sxMjQ2MywxMjUyMywxMjQ3NiwxMjQ1MiwxMjUyNV0sMjU2XSwxMzA4MzpbWzEyNDYzLDEyNTI1LDEyNTQwLDEyNDkzXSwyNTZdLDEzMDg0OltbMTI0NjUsMTI1NDAsMTI0NzNdLDI1Nl0sMTMwODU6W1sxMjQ2NywxMjUyMywxMjQ5MF0sMjU2XSwxMzA4NjpbWzEyNDY3LDEyNTQwLDEyNTA5XSwyNTZdLDEzMDg3OltbMTI0NjksMTI0NTIsMTI0NjMsMTI1MjNdLDI1Nl0sMTMwODg6W1sxMjQ2OSwxMjUzMSwxMjQ4MSwxMjU0MCwxMjUxMl0sMjU2XSwxMzA4OTpbWzEyNDcxLDEyNTIyLDEyNTMxLDEyNDY0XSwyNTZdLDEzMDkwOltbMTI0NzUsMTI1MzEsMTI0ODFdLDI1Nl0sMTMwOTE6W1sxMjQ3NSwxMjUzMSwxMjQ4OF0sMjU2XSwxMzA5MjpbWzEyNDgwLDEyNTQwLDEyNDczXSwyNTZdLDEzMDkzOltbMTI0ODcsMTI0NzFdLDI1Nl0sMTMwOTQ6W1sxMjQ4OSwxMjUyM10sMjU2XSwxMzA5NTpbWzEyNDg4LDEyNTMxXSwyNTZdLDEzMDk2OltbMTI0OTAsMTI0OTRdLDI1Nl0sMTMwOTc6W1sxMjQ5NCwxMjQ4MywxMjQ4OF0sMjU2XSwxMzA5ODpbWzEyNDk1LDEyNDUyLDEyNDg0XSwyNTZdLDEzMDk5OltbMTI0OTcsMTI1NDAsMTI0NzUsMTI1MzEsMTI0ODhdLDI1Nl0sMTMxMDA6W1sxMjQ5NywxMjU0MCwxMjQ4NF0sMjU2XSwxMzEwMTpbWzEyNDk2LDEyNTQwLDEyNTI0LDEyNTIzXSwyNTZdLDEzMTAyOltbMTI1MDAsMTI0NTAsMTI0NzMsMTI0ODgsMTI1MjNdLDI1Nl0sMTMxMDM6W1sxMjUwMCwxMjQ2MywxMjUyM10sMjU2XSwxMzEwNDpbWzEyNTAwLDEyNDY3XSwyNTZdLDEzMTA1OltbMTI0OTksMTI1MjNdLDI1Nl0sMTMxMDY6W1sxMjUwMSwxMjQ0OSwxMjUyMSwxMjQ4MywxMjQ4OV0sMjU2XSwxMzEwNzpbWzEyNTAxLDEyNDUxLDEyNTQwLDEyNDg4XSwyNTZdLDEzMTA4OltbMTI1MDIsMTI0ODMsMTI0NzEsMTI0NTUsMTI1MjNdLDI1Nl0sMTMxMDk6W1sxMjUwMSwxMjUyMSwxMjUzMV0sMjU2XSwxMzExMDpbWzEyNTA0LDEyNDYzLDEyNDc5LDEyNTQwLDEyNTIzXSwyNTZdLDEzMTExOltbMTI1MDYsMTI0NzddLDI1Nl0sMTMxMTI6W1sxMjUwNiwxMjQ5MSwxMjQ5OF0sMjU2XSwxMzExMzpbWzEyNTA0LDEyNTIzLDEyNDg0XSwyNTZdLDEzMTE0OltbMTI1MDYsMTI1MzEsMTI0NzNdLDI1Nl0sMTMxMTU6W1sxMjUwNiwxMjU0MCwxMjQ3Ml0sMjU2XSwxMzExNjpbWzEyNTA1LDEyNTQwLDEyNDc5XSwyNTZdLDEzMTE3OltbMTI1MDksMTI0NTIsMTI1MzEsMTI0ODhdLDI1Nl0sMTMxMTg6W1sxMjUwOCwxMjUyMywxMjQ4OF0sMjU2XSwxMzExOTpbWzEyNTA3LDEyNTMxXSwyNTZdLDEzMTIwOltbMTI1MDksMTI1MzEsMTI0ODldLDI1Nl0sMTMxMjE6W1sxMjUwNywxMjU0MCwxMjUyM10sMjU2XSwxMzEyMjpbWzEyNTA3LDEyNTQwLDEyNTMxXSwyNTZdLDEzMTIzOltbMTI1MTAsMTI0NTIsMTI0NjMsMTI1MjVdLDI1Nl0sMTMxMjQ6W1sxMjUxMCwxMjQ1MiwxMjUyM10sMjU2XSwxMzEyNTpbWzEyNTEwLDEyNDgzLDEyNDk1XSwyNTZdLDEzMTI2OltbMTI1MTAsMTI1MjMsMTI0NjNdLDI1Nl0sMTMxMjc6W1sxMjUxMCwxMjUzMSwxMjQ3MSwxMjUxOSwxMjUzMV0sMjU2XSwxMzEyODpbWzEyNTExLDEyNDYzLDEyNTI1LDEyNTMxXSwyNTZdLDEzMTI5OltbMTI1MTEsMTI1MjJdLDI1Nl0sMTMxMzA6W1sxMjUxMSwxMjUyMiwxMjQ5NiwxMjU0MCwxMjUyM10sMjU2XSwxMzEzMTpbWzEyNTEzLDEyNDYwXSwyNTZdLDEzMTMyOltbMTI1MTMsMTI0NjAsMTI0ODgsMTI1MzFdLDI1Nl0sMTMxMzM6W1sxMjUxMywxMjU0MCwxMjQ4OCwxMjUyM10sMjU2XSwxMzEzNDpbWzEyNTE2LDEyNTQwLDEyNDg5XSwyNTZdLDEzMTM1OltbMTI1MTYsMTI1NDAsMTI1MjNdLDI1Nl0sMTMxMzY6W1sxMjUxOCwxMjQ1MCwxMjUzMV0sMjU2XSwxMzEzNzpbWzEyNTIyLDEyNDgzLDEyNDg4LDEyNTIzXSwyNTZdLDEzMTM4OltbMTI1MjIsMTI1MjFdLDI1Nl0sMTMxMzk6W1sxMjUyMywxMjUwMCwxMjU0MF0sMjU2XSwxMzE0MDpbWzEyNTIzLDEyNTQwLDEyNTAyLDEyNTIzXSwyNTZdLDEzMTQxOltbMTI1MjQsMTI1MTJdLDI1Nl0sMTMxNDI6W1sxMjUyNCwxMjUzMSwxMjQ4OCwxMjQ2NiwxMjUzMV0sMjU2XSwxMzE0MzpbWzEyNTI3LDEyNDgzLDEyNDg4XSwyNTZdLDEzMTQ0OltbNDgsMjg4NTddLDI1Nl0sMTMxNDU6W1s0OSwyODg1N10sMjU2XSwxMzE0NjpbWzUwLDI4ODU3XSwyNTZdLDEzMTQ3OltbNTEsMjg4NTddLDI1Nl0sMTMxNDg6W1s1MiwyODg1N10sMjU2XSwxMzE0OTpbWzUzLDI4ODU3XSwyNTZdLDEzMTUwOltbNTQsMjg4NTddLDI1Nl0sMTMxNTE6W1s1NSwyODg1N10sMjU2XSwxMzE1MjpbWzU2LDI4ODU3XSwyNTZdLDEzMTUzOltbNTcsMjg4NTddLDI1Nl0sMTMxNTQ6W1s0OSw0OCwyODg1N10sMjU2XSwxMzE1NTpbWzQ5LDQ5LDI4ODU3XSwyNTZdLDEzMTU2OltbNDksNTAsMjg4NTddLDI1Nl0sMTMxNTc6W1s0OSw1MSwyODg1N10sMjU2XSwxMzE1ODpbWzQ5LDUyLDI4ODU3XSwyNTZdLDEzMTU5OltbNDksNTMsMjg4NTddLDI1Nl0sMTMxNjA6W1s0OSw1NCwyODg1N10sMjU2XSwxMzE2MTpbWzQ5LDU1LDI4ODU3XSwyNTZdLDEzMTYyOltbNDksNTYsMjg4NTddLDI1Nl0sMTMxNjM6W1s0OSw1NywyODg1N10sMjU2XSwxMzE2NDpbWzUwLDQ4LDI4ODU3XSwyNTZdLDEzMTY1OltbNTAsNDksMjg4NTddLDI1Nl0sMTMxNjY6W1s1MCw1MCwyODg1N10sMjU2XSwxMzE2NzpbWzUwLDUxLDI4ODU3XSwyNTZdLDEzMTY4OltbNTAsNTIsMjg4NTddLDI1Nl0sMTMxNjk6W1sxMDQsODAsOTddLDI1Nl0sMTMxNzA6W1sxMDAsOTddLDI1Nl0sMTMxNzE6W1s2NSw4NV0sMjU2XSwxMzE3MjpbWzk4LDk3LDExNF0sMjU2XSwxMzE3MzpbWzExMSw4Nl0sMjU2XSwxMzE3NDpbWzExMiw5OV0sMjU2XSwxMzE3NTpbWzEwMCwxMDldLDI1Nl0sMTMxNzY6W1sxMDAsMTA5LDE3OF0sMjU2XSwxMzE3NzpbWzEwMCwxMDksMTc5XSwyNTZdLDEzMTc4OltbNzMsODVdLDI1Nl0sMTMxNzk6W1syNDE3OSwyNTEwNF0sMjU2XSwxMzE4MDpbWzI2MTU3LDIxNjQ0XSwyNTZdLDEzMTgxOltbMjI4MjMsMjc0OTFdLDI1Nl0sMTMxODI6W1syNjEyNiwyNzgzNV0sMjU2XSwxMzE4MzpbWzI2NjY2LDI0MzM1LDIwMjUwLDMxMDM4XSwyNTZdLDEzMTg0OltbMTEyLDY1XSwyNTZdLDEzMTg1OltbMTEwLDY1XSwyNTZdLDEzMTg2OltbOTU2LDY1XSwyNTZdLDEzMTg3OltbMTA5LDY1XSwyNTZdLDEzMTg4OltbMTA3LDY1XSwyNTZdLDEzMTg5OltbNzUsNjZdLDI1Nl0sMTMxOTA6W1s3Nyw2Nl0sMjU2XSwxMzE5MTpbWzcxLDY2XSwyNTZdLDEzMTkyOltbOTksOTcsMTA4XSwyNTZdLDEzMTkzOltbMTA3LDk5LDk3LDEwOF0sMjU2XSwxMzE5NDpbWzExMiw3MF0sMjU2XSwxMzE5NTpbWzExMCw3MF0sMjU2XSwxMzE5NjpbWzk1Niw3MF0sMjU2XSwxMzE5NzpbWzk1NiwxMDNdLDI1Nl0sMTMxOTg6W1sxMDksMTAzXSwyNTZdLDEzMTk5OltbMTA3LDEwM10sMjU2XSwxMzIwMDpbWzcyLDEyMl0sMjU2XSwxMzIwMTpbWzEwNyw3MiwxMjJdLDI1Nl0sMTMyMDI6W1s3Nyw3MiwxMjJdLDI1Nl0sMTMyMDM6W1s3MSw3MiwxMjJdLDI1Nl0sMTMyMDQ6W1s4NCw3MiwxMjJdLDI1Nl0sMTMyMDU6W1s5NTYsODQ2N10sMjU2XSwxMzIwNjpbWzEwOSw4NDY3XSwyNTZdLDEzMjA3OltbMTAwLDg0NjddLDI1Nl0sMTMyMDg6W1sxMDcsODQ2N10sMjU2XSwxMzIwOTpbWzEwMiwxMDldLDI1Nl0sMTMyMTA6W1sxMTAsMTA5XSwyNTZdLDEzMjExOltbOTU2LDEwOV0sMjU2XSwxMzIxMjpbWzEwOSwxMDldLDI1Nl0sMTMyMTM6W1s5OSwxMDldLDI1Nl0sMTMyMTQ6W1sxMDcsMTA5XSwyNTZdLDEzMjE1OltbMTA5LDEwOSwxNzhdLDI1Nl0sMTMyMTY6W1s5OSwxMDksMTc4XSwyNTZdLDEzMjE3OltbMTA5LDE3OF0sMjU2XSwxMzIxODpbWzEwNywxMDksMTc4XSwyNTZdLDEzMjE5OltbMTA5LDEwOSwxNzldLDI1Nl0sMTMyMjA6W1s5OSwxMDksMTc5XSwyNTZdLDEzMjIxOltbMTA5LDE3OV0sMjU2XSwxMzIyMjpbWzEwNywxMDksMTc5XSwyNTZdLDEzMjIzOltbMTA5LDg3MjUsMTE1XSwyNTZdLDEzMjI0OltbMTA5LDg3MjUsMTE1LDE3OF0sMjU2XSwxMzIyNTpbWzgwLDk3XSwyNTZdLDEzMjI2OltbMTA3LDgwLDk3XSwyNTZdLDEzMjI3OltbNzcsODAsOTddLDI1Nl0sMTMyMjg6W1s3MSw4MCw5N10sMjU2XSwxMzIyOTpbWzExNCw5NywxMDBdLDI1Nl0sMTMyMzA6W1sxMTQsOTcsMTAwLDg3MjUsMTE1XSwyNTZdLDEzMjMxOltbMTE0LDk3LDEwMCw4NzI1LDExNSwxNzhdLDI1Nl0sMTMyMzI6W1sxMTIsMTE1XSwyNTZdLDEzMjMzOltbMTEwLDExNV0sMjU2XSwxMzIzNDpbWzk1NiwxMTVdLDI1Nl0sMTMyMzU6W1sxMDksMTE1XSwyNTZdLDEzMjM2OltbMTEyLDg2XSwyNTZdLDEzMjM3OltbMTEwLDg2XSwyNTZdLDEzMjM4OltbOTU2LDg2XSwyNTZdLDEzMjM5OltbMTA5LDg2XSwyNTZdLDEzMjQwOltbMTA3LDg2XSwyNTZdLDEzMjQxOltbNzcsODZdLDI1Nl0sMTMyNDI6W1sxMTIsODddLDI1Nl0sMTMyNDM6W1sxMTAsODddLDI1Nl0sMTMyNDQ6W1s5NTYsODddLDI1Nl0sMTMyNDU6W1sxMDksODddLDI1Nl0sMTMyNDY6W1sxMDcsODddLDI1Nl0sMTMyNDc6W1s3Nyw4N10sMjU2XSwxMzI0ODpbWzEwNyw5MzddLDI1Nl0sMTMyNDk6W1s3Nyw5MzddLDI1Nl0sMTMyNTA6W1s5Nyw0NiwxMDksNDZdLDI1Nl0sMTMyNTE6W1s2NiwxMTNdLDI1Nl0sMTMyNTI6W1s5OSw5OV0sMjU2XSwxMzI1MzpbWzk5LDEwMF0sMjU2XSwxMzI1NDpbWzY3LDg3MjUsMTA3LDEwM10sMjU2XSwxMzI1NTpbWzY3LDExMSw0Nl0sMjU2XSwxMzI1NjpbWzEwMCw2Nl0sMjU2XSwxMzI1NzpbWzcxLDEyMV0sMjU2XSwxMzI1ODpbWzEwNCw5N10sMjU2XSwxMzI1OTpbWzcyLDgwXSwyNTZdLDEzMjYwOltbMTA1LDExMF0sMjU2XSwxMzI2MTpbWzc1LDc1XSwyNTZdLDEzMjYyOltbNzUsNzddLDI1Nl0sMTMyNjM6W1sxMDcsMTE2XSwyNTZdLDEzMjY0OltbMTA4LDEwOV0sMjU2XSwxMzI2NTpbWzEwOCwxMTBdLDI1Nl0sMTMyNjY6W1sxMDgsMTExLDEwM10sMjU2XSwxMzI2NzpbWzEwOCwxMjBdLDI1Nl0sMTMyNjg6W1sxMDksOThdLDI1Nl0sMTMyNjk6W1sxMDksMTA1LDEwOF0sMjU2XSwxMzI3MDpbWzEwOSwxMTEsMTA4XSwyNTZdLDEzMjcxOltbODAsNzJdLDI1Nl0sMTMyNzI6W1sxMTIsNDYsMTA5LDQ2XSwyNTZdLDEzMjczOltbODAsODAsNzddLDI1Nl0sMTMyNzQ6W1s4MCw4Ml0sMjU2XSwxMzI3NTpbWzExNSwxMTRdLDI1Nl0sMTMyNzY6W1s4MywxMThdLDI1Nl0sMTMyNzc6W1s4Nyw5OF0sMjU2XSwxMzI3ODpbWzg2LDg3MjUsMTA5XSwyNTZdLDEzMjc5OltbNjUsODcyNSwxMDldLDI1Nl0sMTMyODA6W1s0OSwyNjA4NV0sMjU2XSwxMzI4MTpbWzUwLDI2MDg1XSwyNTZdLDEzMjgyOltbNTEsMjYwODVdLDI1Nl0sMTMyODM6W1s1MiwyNjA4NV0sMjU2XSwxMzI4NDpbWzUzLDI2MDg1XSwyNTZdLDEzMjg1OltbNTQsMjYwODVdLDI1Nl0sMTMyODY6W1s1NSwyNjA4NV0sMjU2XSwxMzI4NzpbWzU2LDI2MDg1XSwyNTZdLDEzMjg4OltbNTcsMjYwODVdLDI1Nl0sMTMyODk6W1s0OSw0OCwyNjA4NV0sMjU2XSwxMzI5MDpbWzQ5LDQ5LDI2MDg1XSwyNTZdLDEzMjkxOltbNDksNTAsMjYwODVdLDI1Nl0sMTMyOTI6W1s0OSw1MSwyNjA4NV0sMjU2XSwxMzI5MzpbWzQ5LDUyLDI2MDg1XSwyNTZdLDEzMjk0OltbNDksNTMsMjYwODVdLDI1Nl0sMTMyOTU6W1s0OSw1NCwyNjA4NV0sMjU2XSwxMzI5NjpbWzQ5LDU1LDI2MDg1XSwyNTZdLDEzMjk3OltbNDksNTYsMjYwODVdLDI1Nl0sMTMyOTg6W1s0OSw1NywyNjA4NV0sMjU2XSwxMzI5OTpbWzUwLDQ4LDI2MDg1XSwyNTZdLDEzMzAwOltbNTAsNDksMjYwODVdLDI1Nl0sMTMzMDE6W1s1MCw1MCwyNjA4NV0sMjU2XSwxMzMwMjpbWzUwLDUxLDI2MDg1XSwyNTZdLDEzMzAzOltbNTAsNTIsMjYwODVdLDI1Nl0sMTMzMDQ6W1s1MCw1MywyNjA4NV0sMjU2XSwxMzMwNTpbWzUwLDU0LDI2MDg1XSwyNTZdLDEzMzA2OltbNTAsNTUsMjYwODVdLDI1Nl0sMTMzMDc6W1s1MCw1NiwyNjA4NV0sMjU2XSwxMzMwODpbWzUwLDU3LDI2MDg1XSwyNTZdLDEzMzA5OltbNTEsNDgsMjYwODVdLDI1Nl0sMTMzMTA6W1s1MSw0OSwyNjA4NV0sMjU2XSwxMzMxMTpbWzEwMyw5NywxMDhdLDI1Nl19LAoyNzEzNjp7OTI5MTI6WywxXSw5MjkxMzpbLDFdLDkyOTE0OlssMV0sOTI5MTU6WywxXSw5MjkxNjpbLDFdfSwKMjczOTI6ezkyOTc2OlssMjMwXSw5Mjk3NzpbLDIzMF0sOTI5Nzg6WywyMzBdLDkyOTc5OlssMjMwXSw5Mjk4MDpbLDIzMF0sOTI5ODE6WywyMzBdLDkyOTgyOlssMjMwXX0sCjQyNDk2Ons0MjYwNzpbLDIzMF0sNDI2MTI6WywyMzBdLDQyNjEzOlssMjMwXSw0MjYxNDpbLDIzMF0sNDI2MTU6WywyMzBdLDQyNjE2OlssMjMwXSw0MjYxNzpbLDIzMF0sNDI2MTg6WywyMzBdLDQyNjE5OlssMjMwXSw0MjYyMDpbLDIzMF0sNDI2MjE6WywyMzBdLDQyNjUyOltbMTA5OF0sMjU2XSw0MjY1MzpbWzExMDBdLDI1Nl0sNDI2NTU6WywyMzBdLDQyNzM2OlssMjMwXSw0MjczNzpbLDIzMF19LAo0Mjc1Mjp7NDI4NjQ6W1s0Mjg2M10sMjU2XSw0MzAwMDpbWzI5NF0sMjU2XSw0MzAwMTpbWzMzOV0sMjU2XX0sCjQzMDA4Ons0MzAxNDpbLDldLDQzMjA0OlssOV0sNDMyMzI6WywyMzBdLDQzMjMzOlssMjMwXSw0MzIzNDpbLDIzMF0sNDMyMzU6WywyMzBdLDQzMjM2OlssMjMwXSw0MzIzNzpbLDIzMF0sNDMyMzg6WywyMzBdLDQzMjM5OlssMjMwXSw0MzI0MDpbLDIzMF0sNDMyNDE6WywyMzBdLDQzMjQyOlssMjMwXSw0MzI0MzpbLDIzMF0sNDMyNDQ6WywyMzBdLDQzMjQ1OlssMjMwXSw0MzI0NjpbLDIzMF0sNDMyNDc6WywyMzBdLDQzMjQ4OlssMjMwXSw0MzI0OTpbLDIzMF19LAo0MzI2NDp7NDMzMDc6WywyMjBdLDQzMzA4OlssMjIwXSw0MzMwOTpbLDIyMF0sNDMzNDc6Wyw5XSw0MzQ0MzpbLDddLDQzNDU2OlssOV19LAo0MzUyMDp7NDM2OTY6WywyMzBdLDQzNjk4OlssMjMwXSw0MzY5OTpbLDIzMF0sNDM3MDA6WywyMjBdLDQzNzAzOlssMjMwXSw0MzcwNDpbLDIzMF0sNDM3MTA6WywyMzBdLDQzNzExOlssMjMwXSw0MzcxMzpbLDIzMF0sNDM3NjY6Wyw5XX0sCjQzNzc2Ons0Mzg2ODpbWzQyNzkxXSwyNTZdLDQzODY5OltbNDM4MzFdLDI1Nl0sNDM4NzA6W1s2MTldLDI1Nl0sNDM4NzE6W1s0Mzg1OF0sMjU2XSw0NDAxMzpbLDldfSwKNDgxMjg6ezExMzgyMjpbLDFdfSwKNTM1MDQ6ezExOTEzNDpbWzExOTEyNywxMTkxNDFdLDUxMl0sMTE5MTM1OltbMTE5MTI4LDExOTE0MV0sNTEyXSwxMTkxMzY6W1sxMTkxMzUsMTE5MTUwXSw1MTJdLDExOTEzNzpbWzExOTEzNSwxMTkxNTFdLDUxMl0sMTE5MTM4OltbMTE5MTM1LDExOTE1Ml0sNTEyXSwxMTkxMzk6W1sxMTkxMzUsMTE5MTUzXSw1MTJdLDExOTE0MDpbWzExOTEzNSwxMTkxNTRdLDUxMl0sMTE5MTQxOlssMjE2XSwxMTkxNDI6WywyMTZdLDExOTE0MzpbLDFdLDExOTE0NDpbLDFdLDExOTE0NTpbLDFdLDExOTE0OTpbLDIyNl0sMTE5MTUwOlssMjE2XSwxMTkxNTE6WywyMTZdLDExOTE1MjpbLDIxNl0sMTE5MTUzOlssMjE2XSwxMTkxNTQ6WywyMTZdLDExOTE2MzpbLDIyMF0sMTE5MTY0OlssMjIwXSwxMTkxNjU6WywyMjBdLDExOTE2NjpbLDIyMF0sMTE5MTY3OlssMjIwXSwxMTkxNjg6WywyMjBdLDExOTE2OTpbLDIyMF0sMTE5MTcwOlssMjIwXSwxMTkxNzM6WywyMzBdLDExOTE3NDpbLDIzMF0sMTE5MTc1OlssMjMwXSwxMTkxNzY6WywyMzBdLDExOTE3NzpbLDIzMF0sMTE5MTc4OlssMjIwXSwxMTkxNzk6WywyMjBdLDExOTIxMDpbLDIzMF0sMTE5MjExOlssMjMwXSwxMTkyMTI6WywyMzBdLDExOTIxMzpbLDIzMF0sMTE5MjI3OltbMTE5MjI1LDExOTE0MV0sNTEyXSwxMTkyMjg6W1sxMTkyMjYsMTE5MTQxXSw1MTJdLDExOTIyOTpbWzExOTIyNywxMTkxNTBdLDUxMl0sMTE5MjMwOltbMTE5MjI4LDExOTE1MF0sNTEyXSwxMTkyMzE6W1sxMTkyMjcsMTE5MTUxXSw1MTJdLDExOTIzMjpbWzExOTIyOCwxMTkxNTFdLDUxMl19LAo1Mzc2MDp7MTE5MzYyOlssMjMwXSwxMTkzNjM6WywyMzBdLDExOTM2NDpbLDIzMF19LAo1NDI3Mjp7MTE5ODA4OltbNjVdLDI1Nl0sMTE5ODA5OltbNjZdLDI1Nl0sMTE5ODEwOltbNjddLDI1Nl0sMTE5ODExOltbNjhdLDI1Nl0sMTE5ODEyOltbNjldLDI1Nl0sMTE5ODEzOltbNzBdLDI1Nl0sMTE5ODE0OltbNzFdLDI1Nl0sMTE5ODE1OltbNzJdLDI1Nl0sMTE5ODE2OltbNzNdLDI1Nl0sMTE5ODE3OltbNzRdLDI1Nl0sMTE5ODE4OltbNzVdLDI1Nl0sMTE5ODE5OltbNzZdLDI1Nl0sMTE5ODIwOltbNzddLDI1Nl0sMTE5ODIxOltbNzhdLDI1Nl0sMTE5ODIyOltbNzldLDI1Nl0sMTE5ODIzOltbODBdLDI1Nl0sMTE5ODI0OltbODFdLDI1Nl0sMTE5ODI1OltbODJdLDI1Nl0sMTE5ODI2OltbODNdLDI1Nl0sMTE5ODI3OltbODRdLDI1Nl0sMTE5ODI4OltbODVdLDI1Nl0sMTE5ODI5OltbODZdLDI1Nl0sMTE5ODMwOltbODddLDI1Nl0sMTE5ODMxOltbODhdLDI1Nl0sMTE5ODMyOltbODldLDI1Nl0sMTE5ODMzOltbOTBdLDI1Nl0sMTE5ODM0OltbOTddLDI1Nl0sMTE5ODM1OltbOThdLDI1Nl0sMTE5ODM2OltbOTldLDI1Nl0sMTE5ODM3OltbMTAwXSwyNTZdLDExOTgzODpbWzEwMV0sMjU2XSwxMTk4Mzk6W1sxMDJdLDI1Nl0sMTE5ODQwOltbMTAzXSwyNTZdLDExOTg0MTpbWzEwNF0sMjU2XSwxMTk4NDI6W1sxMDVdLDI1Nl0sMTE5ODQzOltbMTA2XSwyNTZdLDExOTg0NDpbWzEwN10sMjU2XSwxMTk4NDU6W1sxMDhdLDI1Nl0sMTE5ODQ2OltbMTA5XSwyNTZdLDExOTg0NzpbWzExMF0sMjU2XSwxMTk4NDg6W1sxMTFdLDI1Nl0sMTE5ODQ5OltbMTEyXSwyNTZdLDExOTg1MDpbWzExM10sMjU2XSwxMTk4NTE6W1sxMTRdLDI1Nl0sMTE5ODUyOltbMTE1XSwyNTZdLDExOTg1MzpbWzExNl0sMjU2XSwxMTk4NTQ6W1sxMTddLDI1Nl0sMTE5ODU1OltbMTE4XSwyNTZdLDExOTg1NjpbWzExOV0sMjU2XSwxMTk4NTc6W1sxMjBdLDI1Nl0sMTE5ODU4OltbMTIxXSwyNTZdLDExOTg1OTpbWzEyMl0sMjU2XSwxMTk4NjA6W1s2NV0sMjU2XSwxMTk4NjE6W1s2Nl0sMjU2XSwxMTk4NjI6W1s2N10sMjU2XSwxMTk4NjM6W1s2OF0sMjU2XSwxMTk4NjQ6W1s2OV0sMjU2XSwxMTk4NjU6W1s3MF0sMjU2XSwxMTk4NjY6W1s3MV0sMjU2XSwxMTk4Njc6W1s3Ml0sMjU2XSwxMTk4Njg6W1s3M10sMjU2XSwxMTk4Njk6W1s3NF0sMjU2XSwxMTk4NzA6W1s3NV0sMjU2XSwxMTk4NzE6W1s3Nl0sMjU2XSwxMTk4NzI6W1s3N10sMjU2XSwxMTk4NzM6W1s3OF0sMjU2XSwxMTk4NzQ6W1s3OV0sMjU2XSwxMTk4NzU6W1s4MF0sMjU2XSwxMTk4NzY6W1s4MV0sMjU2XSwxMTk4Nzc6W1s4Ml0sMjU2XSwxMTk4Nzg6W1s4M10sMjU2XSwxMTk4Nzk6W1s4NF0sMjU2XSwxMTk4ODA6W1s4NV0sMjU2XSwxMTk4ODE6W1s4Nl0sMjU2XSwxMTk4ODI6W1s4N10sMjU2XSwxMTk4ODM6W1s4OF0sMjU2XSwxMTk4ODQ6W1s4OV0sMjU2XSwxMTk4ODU6W1s5MF0sMjU2XSwxMTk4ODY6W1s5N10sMjU2XSwxMTk4ODc6W1s5OF0sMjU2XSwxMTk4ODg6W1s5OV0sMjU2XSwxMTk4ODk6W1sxMDBdLDI1Nl0sMTE5ODkwOltbMTAxXSwyNTZdLDExOTg5MTpbWzEwMl0sMjU2XSwxMTk4OTI6W1sxMDNdLDI1Nl0sMTE5ODk0OltbMTA1XSwyNTZdLDExOTg5NTpbWzEwNl0sMjU2XSwxMTk4OTY6W1sxMDddLDI1Nl0sMTE5ODk3OltbMTA4XSwyNTZdLDExOTg5ODpbWzEwOV0sMjU2XSwxMTk4OTk6W1sxMTBdLDI1Nl0sMTE5OTAwOltbMTExXSwyNTZdLDExOTkwMTpbWzExMl0sMjU2XSwxMTk5MDI6W1sxMTNdLDI1Nl0sMTE5OTAzOltbMTE0XSwyNTZdLDExOTkwNDpbWzExNV0sMjU2XSwxMTk5MDU6W1sxMTZdLDI1Nl0sMTE5OTA2OltbMTE3XSwyNTZdLDExOTkwNzpbWzExOF0sMjU2XSwxMTk5MDg6W1sxMTldLDI1Nl0sMTE5OTA5OltbMTIwXSwyNTZdLDExOTkxMDpbWzEyMV0sMjU2XSwxMTk5MTE6W1sxMjJdLDI1Nl0sMTE5OTEyOltbNjVdLDI1Nl0sMTE5OTEzOltbNjZdLDI1Nl0sMTE5OTE0OltbNjddLDI1Nl0sMTE5OTE1OltbNjhdLDI1Nl0sMTE5OTE2OltbNjldLDI1Nl0sMTE5OTE3OltbNzBdLDI1Nl0sMTE5OTE4OltbNzFdLDI1Nl0sMTE5OTE5OltbNzJdLDI1Nl0sMTE5OTIwOltbNzNdLDI1Nl0sMTE5OTIxOltbNzRdLDI1Nl0sMTE5OTIyOltbNzVdLDI1Nl0sMTE5OTIzOltbNzZdLDI1Nl0sMTE5OTI0OltbNzddLDI1Nl0sMTE5OTI1OltbNzhdLDI1Nl0sMTE5OTI2OltbNzldLDI1Nl0sMTE5OTI3OltbODBdLDI1Nl0sMTE5OTI4OltbODFdLDI1Nl0sMTE5OTI5OltbODJdLDI1Nl0sMTE5OTMwOltbODNdLDI1Nl0sMTE5OTMxOltbODRdLDI1Nl0sMTE5OTMyOltbODVdLDI1Nl0sMTE5OTMzOltbODZdLDI1Nl0sMTE5OTM0OltbODddLDI1Nl0sMTE5OTM1OltbODhdLDI1Nl0sMTE5OTM2OltbODldLDI1Nl0sMTE5OTM3OltbOTBdLDI1Nl0sMTE5OTM4OltbOTddLDI1Nl0sMTE5OTM5OltbOThdLDI1Nl0sMTE5OTQwOltbOTldLDI1Nl0sMTE5OTQxOltbMTAwXSwyNTZdLDExOTk0MjpbWzEwMV0sMjU2XSwxMTk5NDM6W1sxMDJdLDI1Nl0sMTE5OTQ0OltbMTAzXSwyNTZdLDExOTk0NTpbWzEwNF0sMjU2XSwxMTk5NDY6W1sxMDVdLDI1Nl0sMTE5OTQ3OltbMTA2XSwyNTZdLDExOTk0ODpbWzEwN10sMjU2XSwxMTk5NDk6W1sxMDhdLDI1Nl0sMTE5OTUwOltbMTA5XSwyNTZdLDExOTk1MTpbWzExMF0sMjU2XSwxMTk5NTI6W1sxMTFdLDI1Nl0sMTE5OTUzOltbMTEyXSwyNTZdLDExOTk1NDpbWzExM10sMjU2XSwxMTk5NTU6W1sxMTRdLDI1Nl0sMTE5OTU2OltbMTE1XSwyNTZdLDExOTk1NzpbWzExNl0sMjU2XSwxMTk5NTg6W1sxMTddLDI1Nl0sMTE5OTU5OltbMTE4XSwyNTZdLDExOTk2MDpbWzExOV0sMjU2XSwxMTk5NjE6W1sxMjBdLDI1Nl0sMTE5OTYyOltbMTIxXSwyNTZdLDExOTk2MzpbWzEyMl0sMjU2XSwxMTk5NjQ6W1s2NV0sMjU2XSwxMTk5NjY6W1s2N10sMjU2XSwxMTk5Njc6W1s2OF0sMjU2XSwxMTk5NzA6W1s3MV0sMjU2XSwxMTk5NzM6W1s3NF0sMjU2XSwxMTk5NzQ6W1s3NV0sMjU2XSwxMTk5Nzc6W1s3OF0sMjU2XSwxMTk5Nzg6W1s3OV0sMjU2XSwxMTk5Nzk6W1s4MF0sMjU2XSwxMTk5ODA6W1s4MV0sMjU2XSwxMTk5ODI6W1s4M10sMjU2XSwxMTk5ODM6W1s4NF0sMjU2XSwxMTk5ODQ6W1s4NV0sMjU2XSwxMTk5ODU6W1s4Nl0sMjU2XSwxMTk5ODY6W1s4N10sMjU2XSwxMTk5ODc6W1s4OF0sMjU2XSwxMTk5ODg6W1s4OV0sMjU2XSwxMTk5ODk6W1s5MF0sMjU2XSwxMTk5OTA6W1s5N10sMjU2XSwxMTk5OTE6W1s5OF0sMjU2XSwxMTk5OTI6W1s5OV0sMjU2XSwxMTk5OTM6W1sxMDBdLDI1Nl0sMTE5OTk1OltbMTAyXSwyNTZdLDExOTk5NzpbWzEwNF0sMjU2XSwxMTk5OTg6W1sxMDVdLDI1Nl0sMTE5OTk5OltbMTA2XSwyNTZdLDEyMDAwMDpbWzEwN10sMjU2XSwxMjAwMDE6W1sxMDhdLDI1Nl0sMTIwMDAyOltbMTA5XSwyNTZdLDEyMDAwMzpbWzExMF0sMjU2XSwxMjAwMDU6W1sxMTJdLDI1Nl0sMTIwMDA2OltbMTEzXSwyNTZdLDEyMDAwNzpbWzExNF0sMjU2XSwxMjAwMDg6W1sxMTVdLDI1Nl0sMTIwMDA5OltbMTE2XSwyNTZdLDEyMDAxMDpbWzExN10sMjU2XSwxMjAwMTE6W1sxMThdLDI1Nl0sMTIwMDEyOltbMTE5XSwyNTZdLDEyMDAxMzpbWzEyMF0sMjU2XSwxMjAwMTQ6W1sxMjFdLDI1Nl0sMTIwMDE1OltbMTIyXSwyNTZdLDEyMDAxNjpbWzY1XSwyNTZdLDEyMDAxNzpbWzY2XSwyNTZdLDEyMDAxODpbWzY3XSwyNTZdLDEyMDAxOTpbWzY4XSwyNTZdLDEyMDAyMDpbWzY5XSwyNTZdLDEyMDAyMTpbWzcwXSwyNTZdLDEyMDAyMjpbWzcxXSwyNTZdLDEyMDAyMzpbWzcyXSwyNTZdLDEyMDAyNDpbWzczXSwyNTZdLDEyMDAyNTpbWzc0XSwyNTZdLDEyMDAyNjpbWzc1XSwyNTZdLDEyMDAyNzpbWzc2XSwyNTZdLDEyMDAyODpbWzc3XSwyNTZdLDEyMDAyOTpbWzc4XSwyNTZdLDEyMDAzMDpbWzc5XSwyNTZdLDEyMDAzMTpbWzgwXSwyNTZdLDEyMDAzMjpbWzgxXSwyNTZdLDEyMDAzMzpbWzgyXSwyNTZdLDEyMDAzNDpbWzgzXSwyNTZdLDEyMDAzNTpbWzg0XSwyNTZdLDEyMDAzNjpbWzg1XSwyNTZdLDEyMDAzNzpbWzg2XSwyNTZdLDEyMDAzODpbWzg3XSwyNTZdLDEyMDAzOTpbWzg4XSwyNTZdLDEyMDA0MDpbWzg5XSwyNTZdLDEyMDA0MTpbWzkwXSwyNTZdLDEyMDA0MjpbWzk3XSwyNTZdLDEyMDA0MzpbWzk4XSwyNTZdLDEyMDA0NDpbWzk5XSwyNTZdLDEyMDA0NTpbWzEwMF0sMjU2XSwxMjAwNDY6W1sxMDFdLDI1Nl0sMTIwMDQ3OltbMTAyXSwyNTZdLDEyMDA0ODpbWzEwM10sMjU2XSwxMjAwNDk6W1sxMDRdLDI1Nl0sMTIwMDUwOltbMTA1XSwyNTZdLDEyMDA1MTpbWzEwNl0sMjU2XSwxMjAwNTI6W1sxMDddLDI1Nl0sMTIwMDUzOltbMTA4XSwyNTZdLDEyMDA1NDpbWzEwOV0sMjU2XSwxMjAwNTU6W1sxMTBdLDI1Nl0sMTIwMDU2OltbMTExXSwyNTZdLDEyMDA1NzpbWzExMl0sMjU2XSwxMjAwNTg6W1sxMTNdLDI1Nl0sMTIwMDU5OltbMTE0XSwyNTZdLDEyMDA2MDpbWzExNV0sMjU2XSwxMjAwNjE6W1sxMTZdLDI1Nl0sMTIwMDYyOltbMTE3XSwyNTZdLDEyMDA2MzpbWzExOF0sMjU2XX0sCjU0NTI4OnsxMjAwNjQ6W1sxMTldLDI1Nl0sMTIwMDY1OltbMTIwXSwyNTZdLDEyMDA2NjpbWzEyMV0sMjU2XSwxMjAwNjc6W1sxMjJdLDI1Nl0sMTIwMDY4OltbNjVdLDI1Nl0sMTIwMDY5OltbNjZdLDI1Nl0sMTIwMDcxOltbNjhdLDI1Nl0sMTIwMDcyOltbNjldLDI1Nl0sMTIwMDczOltbNzBdLDI1Nl0sMTIwMDc0OltbNzFdLDI1Nl0sMTIwMDc3OltbNzRdLDI1Nl0sMTIwMDc4OltbNzVdLDI1Nl0sMTIwMDc5OltbNzZdLDI1Nl0sMTIwMDgwOltbNzddLDI1Nl0sMTIwMDgxOltbNzhdLDI1Nl0sMTIwMDgyOltbNzldLDI1Nl0sMTIwMDgzOltbODBdLDI1Nl0sMTIwMDg0OltbODFdLDI1Nl0sMTIwMDg2OltbODNdLDI1Nl0sMTIwMDg3OltbODRdLDI1Nl0sMTIwMDg4OltbODVdLDI1Nl0sMTIwMDg5OltbODZdLDI1Nl0sMTIwMDkwOltbODddLDI1Nl0sMTIwMDkxOltbODhdLDI1Nl0sMTIwMDkyOltbODldLDI1Nl0sMTIwMDk0OltbOTddLDI1Nl0sMTIwMDk1OltbOThdLDI1Nl0sMTIwMDk2OltbOTldLDI1Nl0sMTIwMDk3OltbMTAwXSwyNTZdLDEyMDA5ODpbWzEwMV0sMjU2XSwxMjAwOTk6W1sxMDJdLDI1Nl0sMTIwMTAwOltbMTAzXSwyNTZdLDEyMDEwMTpbWzEwNF0sMjU2XSwxMjAxMDI6W1sxMDVdLDI1Nl0sMTIwMTAzOltbMTA2XSwyNTZdLDEyMDEwNDpbWzEwN10sMjU2XSwxMjAxMDU6W1sxMDhdLDI1Nl0sMTIwMTA2OltbMTA5XSwyNTZdLDEyMDEwNzpbWzExMF0sMjU2XSwxMjAxMDg6W1sxMTFdLDI1Nl0sMTIwMTA5OltbMTEyXSwyNTZdLDEyMDExMDpbWzExM10sMjU2XSwxMjAxMTE6W1sxMTRdLDI1Nl0sMTIwMTEyOltbMTE1XSwyNTZdLDEyMDExMzpbWzExNl0sMjU2XSwxMjAxMTQ6W1sxMTddLDI1Nl0sMTIwMTE1OltbMTE4XSwyNTZdLDEyMDExNjpbWzExOV0sMjU2XSwxMjAxMTc6W1sxMjBdLDI1Nl0sMTIwMTE4OltbMTIxXSwyNTZdLDEyMDExOTpbWzEyMl0sMjU2XSwxMjAxMjA6W1s2NV0sMjU2XSwxMjAxMjE6W1s2Nl0sMjU2XSwxMjAxMjM6W1s2OF0sMjU2XSwxMjAxMjQ6W1s2OV0sMjU2XSwxMjAxMjU6W1s3MF0sMjU2XSwxMjAxMjY6W1s3MV0sMjU2XSwxMjAxMjg6W1s3M10sMjU2XSwxMjAxMjk6W1s3NF0sMjU2XSwxMjAxMzA6W1s3NV0sMjU2XSwxMjAxMzE6W1s3Nl0sMjU2XSwxMjAxMzI6W1s3N10sMjU2XSwxMjAxMzQ6W1s3OV0sMjU2XSwxMjAxMzg6W1s4M10sMjU2XSwxMjAxMzk6W1s4NF0sMjU2XSwxMjAxNDA6W1s4NV0sMjU2XSwxMjAxNDE6W1s4Nl0sMjU2XSwxMjAxNDI6W1s4N10sMjU2XSwxMjAxNDM6W1s4OF0sMjU2XSwxMjAxNDQ6W1s4OV0sMjU2XSwxMjAxNDY6W1s5N10sMjU2XSwxMjAxNDc6W1s5OF0sMjU2XSwxMjAxNDg6W1s5OV0sMjU2XSwxMjAxNDk6W1sxMDBdLDI1Nl0sMTIwMTUwOltbMTAxXSwyNTZdLDEyMDE1MTpbWzEwMl0sMjU2XSwxMjAxNTI6W1sxMDNdLDI1Nl0sMTIwMTUzOltbMTA0XSwyNTZdLDEyMDE1NDpbWzEwNV0sMjU2XSwxMjAxNTU6W1sxMDZdLDI1Nl0sMTIwMTU2OltbMTA3XSwyNTZdLDEyMDE1NzpbWzEwOF0sMjU2XSwxMjAxNTg6W1sxMDldLDI1Nl0sMTIwMTU5OltbMTEwXSwyNTZdLDEyMDE2MDpbWzExMV0sMjU2XSwxMjAxNjE6W1sxMTJdLDI1Nl0sMTIwMTYyOltbMTEzXSwyNTZdLDEyMDE2MzpbWzExNF0sMjU2XSwxMjAxNjQ6W1sxMTVdLDI1Nl0sMTIwMTY1OltbMTE2XSwyNTZdLDEyMDE2NjpbWzExN10sMjU2XSwxMjAxNjc6W1sxMThdLDI1Nl0sMTIwMTY4OltbMTE5XSwyNTZdLDEyMDE2OTpbWzEyMF0sMjU2XSwxMjAxNzA6W1sxMjFdLDI1Nl0sMTIwMTcxOltbMTIyXSwyNTZdLDEyMDE3MjpbWzY1XSwyNTZdLDEyMDE3MzpbWzY2XSwyNTZdLDEyMDE3NDpbWzY3XSwyNTZdLDEyMDE3NTpbWzY4XSwyNTZdLDEyMDE3NjpbWzY5XSwyNTZdLDEyMDE3NzpbWzcwXSwyNTZdLDEyMDE3ODpbWzcxXSwyNTZdLDEyMDE3OTpbWzcyXSwyNTZdLDEyMDE4MDpbWzczXSwyNTZdLDEyMDE4MTpbWzc0XSwyNTZdLDEyMDE4MjpbWzc1XSwyNTZdLDEyMDE4MzpbWzc2XSwyNTZdLDEyMDE4NDpbWzc3XSwyNTZdLDEyMDE4NTpbWzc4XSwyNTZdLDEyMDE4NjpbWzc5XSwyNTZdLDEyMDE4NzpbWzgwXSwyNTZdLDEyMDE4ODpbWzgxXSwyNTZdLDEyMDE4OTpbWzgyXSwyNTZdLDEyMDE5MDpbWzgzXSwyNTZdLDEyMDE5MTpbWzg0XSwyNTZdLDEyMDE5MjpbWzg1XSwyNTZdLDEyMDE5MzpbWzg2XSwyNTZdLDEyMDE5NDpbWzg3XSwyNTZdLDEyMDE5NTpbWzg4XSwyNTZdLDEyMDE5NjpbWzg5XSwyNTZdLDEyMDE5NzpbWzkwXSwyNTZdLDEyMDE5ODpbWzk3XSwyNTZdLDEyMDE5OTpbWzk4XSwyNTZdLDEyMDIwMDpbWzk5XSwyNTZdLDEyMDIwMTpbWzEwMF0sMjU2XSwxMjAyMDI6W1sxMDFdLDI1Nl0sMTIwMjAzOltbMTAyXSwyNTZdLDEyMDIwNDpbWzEwM10sMjU2XSwxMjAyMDU6W1sxMDRdLDI1Nl0sMTIwMjA2OltbMTA1XSwyNTZdLDEyMDIwNzpbWzEwNl0sMjU2XSwxMjAyMDg6W1sxMDddLDI1Nl0sMTIwMjA5OltbMTA4XSwyNTZdLDEyMDIxMDpbWzEwOV0sMjU2XSwxMjAyMTE6W1sxMTBdLDI1Nl0sMTIwMjEyOltbMTExXSwyNTZdLDEyMDIxMzpbWzExMl0sMjU2XSwxMjAyMTQ6W1sxMTNdLDI1Nl0sMTIwMjE1OltbMTE0XSwyNTZdLDEyMDIxNjpbWzExNV0sMjU2XSwxMjAyMTc6W1sxMTZdLDI1Nl0sMTIwMjE4OltbMTE3XSwyNTZdLDEyMDIxOTpbWzExOF0sMjU2XSwxMjAyMjA6W1sxMTldLDI1Nl0sMTIwMjIxOltbMTIwXSwyNTZdLDEyMDIyMjpbWzEyMV0sMjU2XSwxMjAyMjM6W1sxMjJdLDI1Nl0sMTIwMjI0OltbNjVdLDI1Nl0sMTIwMjI1OltbNjZdLDI1Nl0sMTIwMjI2OltbNjddLDI1Nl0sMTIwMjI3OltbNjhdLDI1Nl0sMTIwMjI4OltbNjldLDI1Nl0sMTIwMjI5OltbNzBdLDI1Nl0sMTIwMjMwOltbNzFdLDI1Nl0sMTIwMjMxOltbNzJdLDI1Nl0sMTIwMjMyOltbNzNdLDI1Nl0sMTIwMjMzOltbNzRdLDI1Nl0sMTIwMjM0OltbNzVdLDI1Nl0sMTIwMjM1OltbNzZdLDI1Nl0sMTIwMjM2OltbNzddLDI1Nl0sMTIwMjM3OltbNzhdLDI1Nl0sMTIwMjM4OltbNzldLDI1Nl0sMTIwMjM5OltbODBdLDI1Nl0sMTIwMjQwOltbODFdLDI1Nl0sMTIwMjQxOltbODJdLDI1Nl0sMTIwMjQyOltbODNdLDI1Nl0sMTIwMjQzOltbODRdLDI1Nl0sMTIwMjQ0OltbODVdLDI1Nl0sMTIwMjQ1OltbODZdLDI1Nl0sMTIwMjQ2OltbODddLDI1Nl0sMTIwMjQ3OltbODhdLDI1Nl0sMTIwMjQ4OltbODldLDI1Nl0sMTIwMjQ5OltbOTBdLDI1Nl0sMTIwMjUwOltbOTddLDI1Nl0sMTIwMjUxOltbOThdLDI1Nl0sMTIwMjUyOltbOTldLDI1Nl0sMTIwMjUzOltbMTAwXSwyNTZdLDEyMDI1NDpbWzEwMV0sMjU2XSwxMjAyNTU6W1sxMDJdLDI1Nl0sMTIwMjU2OltbMTAzXSwyNTZdLDEyMDI1NzpbWzEwNF0sMjU2XSwxMjAyNTg6W1sxMDVdLDI1Nl0sMTIwMjU5OltbMTA2XSwyNTZdLDEyMDI2MDpbWzEwN10sMjU2XSwxMjAyNjE6W1sxMDhdLDI1Nl0sMTIwMjYyOltbMTA5XSwyNTZdLDEyMDI2MzpbWzExMF0sMjU2XSwxMjAyNjQ6W1sxMTFdLDI1Nl0sMTIwMjY1OltbMTEyXSwyNTZdLDEyMDI2NjpbWzExM10sMjU2XSwxMjAyNjc6W1sxMTRdLDI1Nl0sMTIwMjY4OltbMTE1XSwyNTZdLDEyMDI2OTpbWzExNl0sMjU2XSwxMjAyNzA6W1sxMTddLDI1Nl0sMTIwMjcxOltbMTE4XSwyNTZdLDEyMDI3MjpbWzExOV0sMjU2XSwxMjAyNzM6W1sxMjBdLDI1Nl0sMTIwMjc0OltbMTIxXSwyNTZdLDEyMDI3NTpbWzEyMl0sMjU2XSwxMjAyNzY6W1s2NV0sMjU2XSwxMjAyNzc6W1s2Nl0sMjU2XSwxMjAyNzg6W1s2N10sMjU2XSwxMjAyNzk6W1s2OF0sMjU2XSwxMjAyODA6W1s2OV0sMjU2XSwxMjAyODE6W1s3MF0sMjU2XSwxMjAyODI6W1s3MV0sMjU2XSwxMjAyODM6W1s3Ml0sMjU2XSwxMjAyODQ6W1s3M10sMjU2XSwxMjAyODU6W1s3NF0sMjU2XSwxMjAyODY6W1s3NV0sMjU2XSwxMjAyODc6W1s3Nl0sMjU2XSwxMjAyODg6W1s3N10sMjU2XSwxMjAyODk6W1s3OF0sMjU2XSwxMjAyOTA6W1s3OV0sMjU2XSwxMjAyOTE6W1s4MF0sMjU2XSwxMjAyOTI6W1s4MV0sMjU2XSwxMjAyOTM6W1s4Ml0sMjU2XSwxMjAyOTQ6W1s4M10sMjU2XSwxMjAyOTU6W1s4NF0sMjU2XSwxMjAyOTY6W1s4NV0sMjU2XSwxMjAyOTc6W1s4Nl0sMjU2XSwxMjAyOTg6W1s4N10sMjU2XSwxMjAyOTk6W1s4OF0sMjU2XSwxMjAzMDA6W1s4OV0sMjU2XSwxMjAzMDE6W1s5MF0sMjU2XSwxMjAzMDI6W1s5N10sMjU2XSwxMjAzMDM6W1s5OF0sMjU2XSwxMjAzMDQ6W1s5OV0sMjU2XSwxMjAzMDU6W1sxMDBdLDI1Nl0sMTIwMzA2OltbMTAxXSwyNTZdLDEyMDMwNzpbWzEwMl0sMjU2XSwxMjAzMDg6W1sxMDNdLDI1Nl0sMTIwMzA5OltbMTA0XSwyNTZdLDEyMDMxMDpbWzEwNV0sMjU2XSwxMjAzMTE6W1sxMDZdLDI1Nl0sMTIwMzEyOltbMTA3XSwyNTZdLDEyMDMxMzpbWzEwOF0sMjU2XSwxMjAzMTQ6W1sxMDldLDI1Nl0sMTIwMzE1OltbMTEwXSwyNTZdLDEyMDMxNjpbWzExMV0sMjU2XSwxMjAzMTc6W1sxMTJdLDI1Nl0sMTIwMzE4OltbMTEzXSwyNTZdLDEyMDMxOTpbWzExNF0sMjU2XX0sCjU0Nzg0OnsxMjAzMjA6W1sxMTVdLDI1Nl0sMTIwMzIxOltbMTE2XSwyNTZdLDEyMDMyMjpbWzExN10sMjU2XSwxMjAzMjM6W1sxMThdLDI1Nl0sMTIwMzI0OltbMTE5XSwyNTZdLDEyMDMyNTpbWzEyMF0sMjU2XSwxMjAzMjY6W1sxMjFdLDI1Nl0sMTIwMzI3OltbMTIyXSwyNTZdLDEyMDMyODpbWzY1XSwyNTZdLDEyMDMyOTpbWzY2XSwyNTZdLDEyMDMzMDpbWzY3XSwyNTZdLDEyMDMzMTpbWzY4XSwyNTZdLDEyMDMzMjpbWzY5XSwyNTZdLDEyMDMzMzpbWzcwXSwyNTZdLDEyMDMzNDpbWzcxXSwyNTZdLDEyMDMzNTpbWzcyXSwyNTZdLDEyMDMzNjpbWzczXSwyNTZdLDEyMDMzNzpbWzc0XSwyNTZdLDEyMDMzODpbWzc1XSwyNTZdLDEyMDMzOTpbWzc2XSwyNTZdLDEyMDM0MDpbWzc3XSwyNTZdLDEyMDM0MTpbWzc4XSwyNTZdLDEyMDM0MjpbWzc5XSwyNTZdLDEyMDM0MzpbWzgwXSwyNTZdLDEyMDM0NDpbWzgxXSwyNTZdLDEyMDM0NTpbWzgyXSwyNTZdLDEyMDM0NjpbWzgzXSwyNTZdLDEyMDM0NzpbWzg0XSwyNTZdLDEyMDM0ODpbWzg1XSwyNTZdLDEyMDM0OTpbWzg2XSwyNTZdLDEyMDM1MDpbWzg3XSwyNTZdLDEyMDM1MTpbWzg4XSwyNTZdLDEyMDM1MjpbWzg5XSwyNTZdLDEyMDM1MzpbWzkwXSwyNTZdLDEyMDM1NDpbWzk3XSwyNTZdLDEyMDM1NTpbWzk4XSwyNTZdLDEyMDM1NjpbWzk5XSwyNTZdLDEyMDM1NzpbWzEwMF0sMjU2XSwxMjAzNTg6W1sxMDFdLDI1Nl0sMTIwMzU5OltbMTAyXSwyNTZdLDEyMDM2MDpbWzEwM10sMjU2XSwxMjAzNjE6W1sxMDRdLDI1Nl0sMTIwMzYyOltbMTA1XSwyNTZdLDEyMDM2MzpbWzEwNl0sMjU2XSwxMjAzNjQ6W1sxMDddLDI1Nl0sMTIwMzY1OltbMTA4XSwyNTZdLDEyMDM2NjpbWzEwOV0sMjU2XSwxMjAzNjc6W1sxMTBdLDI1Nl0sMTIwMzY4OltbMTExXSwyNTZdLDEyMDM2OTpbWzExMl0sMjU2XSwxMjAzNzA6W1sxMTNdLDI1Nl0sMTIwMzcxOltbMTE0XSwyNTZdLDEyMDM3MjpbWzExNV0sMjU2XSwxMjAzNzM6W1sxMTZdLDI1Nl0sMTIwMzc0OltbMTE3XSwyNTZdLDEyMDM3NTpbWzExOF0sMjU2XSwxMjAzNzY6W1sxMTldLDI1Nl0sMTIwMzc3OltbMTIwXSwyNTZdLDEyMDM3ODpbWzEyMV0sMjU2XSwxMjAzNzk6W1sxMjJdLDI1Nl0sMTIwMzgwOltbNjVdLDI1Nl0sMTIwMzgxOltbNjZdLDI1Nl0sMTIwMzgyOltbNjddLDI1Nl0sMTIwMzgzOltbNjhdLDI1Nl0sMTIwMzg0OltbNjldLDI1Nl0sMTIwMzg1OltbNzBdLDI1Nl0sMTIwMzg2OltbNzFdLDI1Nl0sMTIwMzg3OltbNzJdLDI1Nl0sMTIwMzg4OltbNzNdLDI1Nl0sMTIwMzg5OltbNzRdLDI1Nl0sMTIwMzkwOltbNzVdLDI1Nl0sMTIwMzkxOltbNzZdLDI1Nl0sMTIwMzkyOltbNzddLDI1Nl0sMTIwMzkzOltbNzhdLDI1Nl0sMTIwMzk0OltbNzldLDI1Nl0sMTIwMzk1OltbODBdLDI1Nl0sMTIwMzk2OltbODFdLDI1Nl0sMTIwMzk3OltbODJdLDI1Nl0sMTIwMzk4OltbODNdLDI1Nl0sMTIwMzk5OltbODRdLDI1Nl0sMTIwNDAwOltbODVdLDI1Nl0sMTIwNDAxOltbODZdLDI1Nl0sMTIwNDAyOltbODddLDI1Nl0sMTIwNDAzOltbODhdLDI1Nl0sMTIwNDA0OltbODldLDI1Nl0sMTIwNDA1OltbOTBdLDI1Nl0sMTIwNDA2OltbOTddLDI1Nl0sMTIwNDA3OltbOThdLDI1Nl0sMTIwNDA4OltbOTldLDI1Nl0sMTIwNDA5OltbMTAwXSwyNTZdLDEyMDQxMDpbWzEwMV0sMjU2XSwxMjA0MTE6W1sxMDJdLDI1Nl0sMTIwNDEyOltbMTAzXSwyNTZdLDEyMDQxMzpbWzEwNF0sMjU2XSwxMjA0MTQ6W1sxMDVdLDI1Nl0sMTIwNDE1OltbMTA2XSwyNTZdLDEyMDQxNjpbWzEwN10sMjU2XSwxMjA0MTc6W1sxMDhdLDI1Nl0sMTIwNDE4OltbMTA5XSwyNTZdLDEyMDQxOTpbWzExMF0sMjU2XSwxMjA0MjA6W1sxMTFdLDI1Nl0sMTIwNDIxOltbMTEyXSwyNTZdLDEyMDQyMjpbWzExM10sMjU2XSwxMjA0MjM6W1sxMTRdLDI1Nl0sMTIwNDI0OltbMTE1XSwyNTZdLDEyMDQyNTpbWzExNl0sMjU2XSwxMjA0MjY6W1sxMTddLDI1Nl0sMTIwNDI3OltbMTE4XSwyNTZdLDEyMDQyODpbWzExOV0sMjU2XSwxMjA0Mjk6W1sxMjBdLDI1Nl0sMTIwNDMwOltbMTIxXSwyNTZdLDEyMDQzMTpbWzEyMl0sMjU2XSwxMjA0MzI6W1s2NV0sMjU2XSwxMjA0MzM6W1s2Nl0sMjU2XSwxMjA0MzQ6W1s2N10sMjU2XSwxMjA0MzU6W1s2OF0sMjU2XSwxMjA0MzY6W1s2OV0sMjU2XSwxMjA0Mzc6W1s3MF0sMjU2XSwxMjA0Mzg6W1s3MV0sMjU2XSwxMjA0Mzk6W1s3Ml0sMjU2XSwxMjA0NDA6W1s3M10sMjU2XSwxMjA0NDE6W1s3NF0sMjU2XSwxMjA0NDI6W1s3NV0sMjU2XSwxMjA0NDM6W1s3Nl0sMjU2XSwxMjA0NDQ6W1s3N10sMjU2XSwxMjA0NDU6W1s3OF0sMjU2XSwxMjA0NDY6W1s3OV0sMjU2XSwxMjA0NDc6W1s4MF0sMjU2XSwxMjA0NDg6W1s4MV0sMjU2XSwxMjA0NDk6W1s4Ml0sMjU2XSwxMjA0NTA6W1s4M10sMjU2XSwxMjA0NTE6W1s4NF0sMjU2XSwxMjA0NTI6W1s4NV0sMjU2XSwxMjA0NTM6W1s4Nl0sMjU2XSwxMjA0NTQ6W1s4N10sMjU2XSwxMjA0NTU6W1s4OF0sMjU2XSwxMjA0NTY6W1s4OV0sMjU2XSwxMjA0NTc6W1s5MF0sMjU2XSwxMjA0NTg6W1s5N10sMjU2XSwxMjA0NTk6W1s5OF0sMjU2XSwxMjA0NjA6W1s5OV0sMjU2XSwxMjA0NjE6W1sxMDBdLDI1Nl0sMTIwNDYyOltbMTAxXSwyNTZdLDEyMDQ2MzpbWzEwMl0sMjU2XSwxMjA0NjQ6W1sxMDNdLDI1Nl0sMTIwNDY1OltbMTA0XSwyNTZdLDEyMDQ2NjpbWzEwNV0sMjU2XSwxMjA0Njc6W1sxMDZdLDI1Nl0sMTIwNDY4OltbMTA3XSwyNTZdLDEyMDQ2OTpbWzEwOF0sMjU2XSwxMjA0NzA6W1sxMDldLDI1Nl0sMTIwNDcxOltbMTEwXSwyNTZdLDEyMDQ3MjpbWzExMV0sMjU2XSwxMjA0NzM6W1sxMTJdLDI1Nl0sMTIwNDc0OltbMTEzXSwyNTZdLDEyMDQ3NTpbWzExNF0sMjU2XSwxMjA0NzY6W1sxMTVdLDI1Nl0sMTIwNDc3OltbMTE2XSwyNTZdLDEyMDQ3ODpbWzExN10sMjU2XSwxMjA0Nzk6W1sxMThdLDI1Nl0sMTIwNDgwOltbMTE5XSwyNTZdLDEyMDQ4MTpbWzEyMF0sMjU2XSwxMjA0ODI6W1sxMjFdLDI1Nl0sMTIwNDgzOltbMTIyXSwyNTZdLDEyMDQ4NDpbWzMwNV0sMjU2XSwxMjA0ODU6W1s1NjddLDI1Nl0sMTIwNDg4OltbOTEzXSwyNTZdLDEyMDQ4OTpbWzkxNF0sMjU2XSwxMjA0OTA6W1s5MTVdLDI1Nl0sMTIwNDkxOltbOTE2XSwyNTZdLDEyMDQ5MjpbWzkxN10sMjU2XSwxMjA0OTM6W1s5MThdLDI1Nl0sMTIwNDk0OltbOTE5XSwyNTZdLDEyMDQ5NTpbWzkyMF0sMjU2XSwxMjA0OTY6W1s5MjFdLDI1Nl0sMTIwNDk3OltbOTIyXSwyNTZdLDEyMDQ5ODpbWzkyM10sMjU2XSwxMjA0OTk6W1s5MjRdLDI1Nl0sMTIwNTAwOltbOTI1XSwyNTZdLDEyMDUwMTpbWzkyNl0sMjU2XSwxMjA1MDI6W1s5MjddLDI1Nl0sMTIwNTAzOltbOTI4XSwyNTZdLDEyMDUwNDpbWzkyOV0sMjU2XSwxMjA1MDU6W1sxMDEyXSwyNTZdLDEyMDUwNjpbWzkzMV0sMjU2XSwxMjA1MDc6W1s5MzJdLDI1Nl0sMTIwNTA4OltbOTMzXSwyNTZdLDEyMDUwOTpbWzkzNF0sMjU2XSwxMjA1MTA6W1s5MzVdLDI1Nl0sMTIwNTExOltbOTM2XSwyNTZdLDEyMDUxMjpbWzkzN10sMjU2XSwxMjA1MTM6W1s4NzExXSwyNTZdLDEyMDUxNDpbWzk0NV0sMjU2XSwxMjA1MTU6W1s5NDZdLDI1Nl0sMTIwNTE2OltbOTQ3XSwyNTZdLDEyMDUxNzpbWzk0OF0sMjU2XSwxMjA1MTg6W1s5NDldLDI1Nl0sMTIwNTE5OltbOTUwXSwyNTZdLDEyMDUyMDpbWzk1MV0sMjU2XSwxMjA1MjE6W1s5NTJdLDI1Nl0sMTIwNTIyOltbOTUzXSwyNTZdLDEyMDUyMzpbWzk1NF0sMjU2XSwxMjA1MjQ6W1s5NTVdLDI1Nl0sMTIwNTI1OltbOTU2XSwyNTZdLDEyMDUyNjpbWzk1N10sMjU2XSwxMjA1Mjc6W1s5NThdLDI1Nl0sMTIwNTI4OltbOTU5XSwyNTZdLDEyMDUyOTpbWzk2MF0sMjU2XSwxMjA1MzA6W1s5NjFdLDI1Nl0sMTIwNTMxOltbOTYyXSwyNTZdLDEyMDUzMjpbWzk2M10sMjU2XSwxMjA1MzM6W1s5NjRdLDI1Nl0sMTIwNTM0OltbOTY1XSwyNTZdLDEyMDUzNTpbWzk2Nl0sMjU2XSwxMjA1MzY6W1s5NjddLDI1Nl0sMTIwNTM3OltbOTY4XSwyNTZdLDEyMDUzODpbWzk2OV0sMjU2XSwxMjA1Mzk6W1s4NzA2XSwyNTZdLDEyMDU0MDpbWzEwMTNdLDI1Nl0sMTIwNTQxOltbOTc3XSwyNTZdLDEyMDU0MjpbWzEwMDhdLDI1Nl0sMTIwNTQzOltbOTgxXSwyNTZdLDEyMDU0NDpbWzEwMDldLDI1Nl0sMTIwNTQ1OltbOTgyXSwyNTZdLDEyMDU0NjpbWzkxM10sMjU2XSwxMjA1NDc6W1s5MTRdLDI1Nl0sMTIwNTQ4OltbOTE1XSwyNTZdLDEyMDU0OTpbWzkxNl0sMjU2XSwxMjA1NTA6W1s5MTddLDI1Nl0sMTIwNTUxOltbOTE4XSwyNTZdLDEyMDU1MjpbWzkxOV0sMjU2XSwxMjA1NTM6W1s5MjBdLDI1Nl0sMTIwNTU0OltbOTIxXSwyNTZdLDEyMDU1NTpbWzkyMl0sMjU2XSwxMjA1NTY6W1s5MjNdLDI1Nl0sMTIwNTU3OltbOTI0XSwyNTZdLDEyMDU1ODpbWzkyNV0sMjU2XSwxMjA1NTk6W1s5MjZdLDI1Nl0sMTIwNTYwOltbOTI3XSwyNTZdLDEyMDU2MTpbWzkyOF0sMjU2XSwxMjA1NjI6W1s5MjldLDI1Nl0sMTIwNTYzOltbMTAxMl0sMjU2XSwxMjA1NjQ6W1s5MzFdLDI1Nl0sMTIwNTY1OltbOTMyXSwyNTZdLDEyMDU2NjpbWzkzM10sMjU2XSwxMjA1Njc6W1s5MzRdLDI1Nl0sMTIwNTY4OltbOTM1XSwyNTZdLDEyMDU2OTpbWzkzNl0sMjU2XSwxMjA1NzA6W1s5MzddLDI1Nl0sMTIwNTcxOltbODcxMV0sMjU2XSwxMjA1NzI6W1s5NDVdLDI1Nl0sMTIwNTczOltbOTQ2XSwyNTZdLDEyMDU3NDpbWzk0N10sMjU2XSwxMjA1NzU6W1s5NDhdLDI1Nl19LAo1NTA0MDp7MTIwNTc2OltbOTQ5XSwyNTZdLDEyMDU3NzpbWzk1MF0sMjU2XSwxMjA1Nzg6W1s5NTFdLDI1Nl0sMTIwNTc5OltbOTUyXSwyNTZdLDEyMDU4MDpbWzk1M10sMjU2XSwxMjA1ODE6W1s5NTRdLDI1Nl0sMTIwNTgyOltbOTU1XSwyNTZdLDEyMDU4MzpbWzk1Nl0sMjU2XSwxMjA1ODQ6W1s5NTddLDI1Nl0sMTIwNTg1OltbOTU4XSwyNTZdLDEyMDU4NjpbWzk1OV0sMjU2XSwxMjA1ODc6W1s5NjBdLDI1Nl0sMTIwNTg4OltbOTYxXSwyNTZdLDEyMDU4OTpbWzk2Ml0sMjU2XSwxMjA1OTA6W1s5NjNdLDI1Nl0sMTIwNTkxOltbOTY0XSwyNTZdLDEyMDU5MjpbWzk2NV0sMjU2XSwxMjA1OTM6W1s5NjZdLDI1Nl0sMTIwNTk0OltbOTY3XSwyNTZdLDEyMDU5NTpbWzk2OF0sMjU2XSwxMjA1OTY6W1s5NjldLDI1Nl0sMTIwNTk3OltbODcwNl0sMjU2XSwxMjA1OTg6W1sxMDEzXSwyNTZdLDEyMDU5OTpbWzk3N10sMjU2XSwxMjA2MDA6W1sxMDA4XSwyNTZdLDEyMDYwMTpbWzk4MV0sMjU2XSwxMjA2MDI6W1sxMDA5XSwyNTZdLDEyMDYwMzpbWzk4Ml0sMjU2XSwxMjA2MDQ6W1s5MTNdLDI1Nl0sMTIwNjA1OltbOTE0XSwyNTZdLDEyMDYwNjpbWzkxNV0sMjU2XSwxMjA2MDc6W1s5MTZdLDI1Nl0sMTIwNjA4OltbOTE3XSwyNTZdLDEyMDYwOTpbWzkxOF0sMjU2XSwxMjA2MTA6W1s5MTldLDI1Nl0sMTIwNjExOltbOTIwXSwyNTZdLDEyMDYxMjpbWzkyMV0sMjU2XSwxMjA2MTM6W1s5MjJdLDI1Nl0sMTIwNjE0OltbOTIzXSwyNTZdLDEyMDYxNTpbWzkyNF0sMjU2XSwxMjA2MTY6W1s5MjVdLDI1Nl0sMTIwNjE3OltbOTI2XSwyNTZdLDEyMDYxODpbWzkyN10sMjU2XSwxMjA2MTk6W1s5MjhdLDI1Nl0sMTIwNjIwOltbOTI5XSwyNTZdLDEyMDYyMTpbWzEwMTJdLDI1Nl0sMTIwNjIyOltbOTMxXSwyNTZdLDEyMDYyMzpbWzkzMl0sMjU2XSwxMjA2MjQ6W1s5MzNdLDI1Nl0sMTIwNjI1OltbOTM0XSwyNTZdLDEyMDYyNjpbWzkzNV0sMjU2XSwxMjA2Mjc6W1s5MzZdLDI1Nl0sMTIwNjI4OltbOTM3XSwyNTZdLDEyMDYyOTpbWzg3MTFdLDI1Nl0sMTIwNjMwOltbOTQ1XSwyNTZdLDEyMDYzMTpbWzk0Nl0sMjU2XSwxMjA2MzI6W1s5NDddLDI1Nl0sMTIwNjMzOltbOTQ4XSwyNTZdLDEyMDYzNDpbWzk0OV0sMjU2XSwxMjA2MzU6W1s5NTBdLDI1Nl0sMTIwNjM2OltbOTUxXSwyNTZdLDEyMDYzNzpbWzk1Ml0sMjU2XSwxMjA2Mzg6W1s5NTNdLDI1Nl0sMTIwNjM5OltbOTU0XSwyNTZdLDEyMDY0MDpbWzk1NV0sMjU2XSwxMjA2NDE6W1s5NTZdLDI1Nl0sMTIwNjQyOltbOTU3XSwyNTZdLDEyMDY0MzpbWzk1OF0sMjU2XSwxMjA2NDQ6W1s5NTldLDI1Nl0sMTIwNjQ1OltbOTYwXSwyNTZdLDEyMDY0NjpbWzk2MV0sMjU2XSwxMjA2NDc6W1s5NjJdLDI1Nl0sMTIwNjQ4OltbOTYzXSwyNTZdLDEyMDY0OTpbWzk2NF0sMjU2XSwxMjA2NTA6W1s5NjVdLDI1Nl0sMTIwNjUxOltbOTY2XSwyNTZdLDEyMDY1MjpbWzk2N10sMjU2XSwxMjA2NTM6W1s5NjhdLDI1Nl0sMTIwNjU0OltbOTY5XSwyNTZdLDEyMDY1NTpbWzg3MDZdLDI1Nl0sMTIwNjU2OltbMTAxM10sMjU2XSwxMjA2NTc6W1s5NzddLDI1Nl0sMTIwNjU4OltbMTAwOF0sMjU2XSwxMjA2NTk6W1s5ODFdLDI1Nl0sMTIwNjYwOltbMTAwOV0sMjU2XSwxMjA2NjE6W1s5ODJdLDI1Nl0sMTIwNjYyOltbOTEzXSwyNTZdLDEyMDY2MzpbWzkxNF0sMjU2XSwxMjA2NjQ6W1s5MTVdLDI1Nl0sMTIwNjY1OltbOTE2XSwyNTZdLDEyMDY2NjpbWzkxN10sMjU2XSwxMjA2Njc6W1s5MThdLDI1Nl0sMTIwNjY4OltbOTE5XSwyNTZdLDEyMDY2OTpbWzkyMF0sMjU2XSwxMjA2NzA6W1s5MjFdLDI1Nl0sMTIwNjcxOltbOTIyXSwyNTZdLDEyMDY3MjpbWzkyM10sMjU2XSwxMjA2NzM6W1s5MjRdLDI1Nl0sMTIwNjc0OltbOTI1XSwyNTZdLDEyMDY3NTpbWzkyNl0sMjU2XSwxMjA2NzY6W1s5MjddLDI1Nl0sMTIwNjc3OltbOTI4XSwyNTZdLDEyMDY3ODpbWzkyOV0sMjU2XSwxMjA2Nzk6W1sxMDEyXSwyNTZdLDEyMDY4MDpbWzkzMV0sMjU2XSwxMjA2ODE6W1s5MzJdLDI1Nl0sMTIwNjgyOltbOTMzXSwyNTZdLDEyMDY4MzpbWzkzNF0sMjU2XSwxMjA2ODQ6W1s5MzVdLDI1Nl0sMTIwNjg1OltbOTM2XSwyNTZdLDEyMDY4NjpbWzkzN10sMjU2XSwxMjA2ODc6W1s4NzExXSwyNTZdLDEyMDY4ODpbWzk0NV0sMjU2XSwxMjA2ODk6W1s5NDZdLDI1Nl0sMTIwNjkwOltbOTQ3XSwyNTZdLDEyMDY5MTpbWzk0OF0sMjU2XSwxMjA2OTI6W1s5NDldLDI1Nl0sMTIwNjkzOltbOTUwXSwyNTZdLDEyMDY5NDpbWzk1MV0sMjU2XSwxMjA2OTU6W1s5NTJdLDI1Nl0sMTIwNjk2OltbOTUzXSwyNTZdLDEyMDY5NzpbWzk1NF0sMjU2XSwxMjA2OTg6W1s5NTVdLDI1Nl0sMTIwNjk5OltbOTU2XSwyNTZdLDEyMDcwMDpbWzk1N10sMjU2XSwxMjA3MDE6W1s5NThdLDI1Nl0sMTIwNzAyOltbOTU5XSwyNTZdLDEyMDcwMzpbWzk2MF0sMjU2XSwxMjA3MDQ6W1s5NjFdLDI1Nl0sMTIwNzA1OltbOTYyXSwyNTZdLDEyMDcwNjpbWzk2M10sMjU2XSwxMjA3MDc6W1s5NjRdLDI1Nl0sMTIwNzA4OltbOTY1XSwyNTZdLDEyMDcwOTpbWzk2Nl0sMjU2XSwxMjA3MTA6W1s5NjddLDI1Nl0sMTIwNzExOltbOTY4XSwyNTZdLDEyMDcxMjpbWzk2OV0sMjU2XSwxMjA3MTM6W1s4NzA2XSwyNTZdLDEyMDcxNDpbWzEwMTNdLDI1Nl0sMTIwNzE1OltbOTc3XSwyNTZdLDEyMDcxNjpbWzEwMDhdLDI1Nl0sMTIwNzE3OltbOTgxXSwyNTZdLDEyMDcxODpbWzEwMDldLDI1Nl0sMTIwNzE5OltbOTgyXSwyNTZdLDEyMDcyMDpbWzkxM10sMjU2XSwxMjA3MjE6W1s5MTRdLDI1Nl0sMTIwNzIyOltbOTE1XSwyNTZdLDEyMDcyMzpbWzkxNl0sMjU2XSwxMjA3MjQ6W1s5MTddLDI1Nl0sMTIwNzI1OltbOTE4XSwyNTZdLDEyMDcyNjpbWzkxOV0sMjU2XSwxMjA3Mjc6W1s5MjBdLDI1Nl0sMTIwNzI4OltbOTIxXSwyNTZdLDEyMDcyOTpbWzkyMl0sMjU2XSwxMjA3MzA6W1s5MjNdLDI1Nl0sMTIwNzMxOltbOTI0XSwyNTZdLDEyMDczMjpbWzkyNV0sMjU2XSwxMjA3MzM6W1s5MjZdLDI1Nl0sMTIwNzM0OltbOTI3XSwyNTZdLDEyMDczNTpbWzkyOF0sMjU2XSwxMjA3MzY6W1s5MjldLDI1Nl0sMTIwNzM3OltbMTAxMl0sMjU2XSwxMjA3Mzg6W1s5MzFdLDI1Nl0sMTIwNzM5OltbOTMyXSwyNTZdLDEyMDc0MDpbWzkzM10sMjU2XSwxMjA3NDE6W1s5MzRdLDI1Nl0sMTIwNzQyOltbOTM1XSwyNTZdLDEyMDc0MzpbWzkzNl0sMjU2XSwxMjA3NDQ6W1s5MzddLDI1Nl0sMTIwNzQ1OltbODcxMV0sMjU2XSwxMjA3NDY6W1s5NDVdLDI1Nl0sMTIwNzQ3OltbOTQ2XSwyNTZdLDEyMDc0ODpbWzk0N10sMjU2XSwxMjA3NDk6W1s5NDhdLDI1Nl0sMTIwNzUwOltbOTQ5XSwyNTZdLDEyMDc1MTpbWzk1MF0sMjU2XSwxMjA3NTI6W1s5NTFdLDI1Nl0sMTIwNzUzOltbOTUyXSwyNTZdLDEyMDc1NDpbWzk1M10sMjU2XSwxMjA3NTU6W1s5NTRdLDI1Nl0sMTIwNzU2OltbOTU1XSwyNTZdLDEyMDc1NzpbWzk1Nl0sMjU2XSwxMjA3NTg6W1s5NTddLDI1Nl0sMTIwNzU5OltbOTU4XSwyNTZdLDEyMDc2MDpbWzk1OV0sMjU2XSwxMjA3NjE6W1s5NjBdLDI1Nl0sMTIwNzYyOltbOTYxXSwyNTZdLDEyMDc2MzpbWzk2Ml0sMjU2XSwxMjA3NjQ6W1s5NjNdLDI1Nl0sMTIwNzY1OltbOTY0XSwyNTZdLDEyMDc2NjpbWzk2NV0sMjU2XSwxMjA3Njc6W1s5NjZdLDI1Nl0sMTIwNzY4OltbOTY3XSwyNTZdLDEyMDc2OTpbWzk2OF0sMjU2XSwxMjA3NzA6W1s5NjldLDI1Nl0sMTIwNzcxOltbODcwNl0sMjU2XSwxMjA3NzI6W1sxMDEzXSwyNTZdLDEyMDc3MzpbWzk3N10sMjU2XSwxMjA3NzQ6W1sxMDA4XSwyNTZdLDEyMDc3NTpbWzk4MV0sMjU2XSwxMjA3NzY6W1sxMDA5XSwyNTZdLDEyMDc3NzpbWzk4Ml0sMjU2XSwxMjA3Nzg6W1s5ODhdLDI1Nl0sMTIwNzc5OltbOTg5XSwyNTZdLDEyMDc4MjpbWzQ4XSwyNTZdLDEyMDc4MzpbWzQ5XSwyNTZdLDEyMDc4NDpbWzUwXSwyNTZdLDEyMDc4NTpbWzUxXSwyNTZdLDEyMDc4NjpbWzUyXSwyNTZdLDEyMDc4NzpbWzUzXSwyNTZdLDEyMDc4ODpbWzU0XSwyNTZdLDEyMDc4OTpbWzU1XSwyNTZdLDEyMDc5MDpbWzU2XSwyNTZdLDEyMDc5MTpbWzU3XSwyNTZdLDEyMDc5MjpbWzQ4XSwyNTZdLDEyMDc5MzpbWzQ5XSwyNTZdLDEyMDc5NDpbWzUwXSwyNTZdLDEyMDc5NTpbWzUxXSwyNTZdLDEyMDc5NjpbWzUyXSwyNTZdLDEyMDc5NzpbWzUzXSwyNTZdLDEyMDc5ODpbWzU0XSwyNTZdLDEyMDc5OTpbWzU1XSwyNTZdLDEyMDgwMDpbWzU2XSwyNTZdLDEyMDgwMTpbWzU3XSwyNTZdLDEyMDgwMjpbWzQ4XSwyNTZdLDEyMDgwMzpbWzQ5XSwyNTZdLDEyMDgwNDpbWzUwXSwyNTZdLDEyMDgwNTpbWzUxXSwyNTZdLDEyMDgwNjpbWzUyXSwyNTZdLDEyMDgwNzpbWzUzXSwyNTZdLDEyMDgwODpbWzU0XSwyNTZdLDEyMDgwOTpbWzU1XSwyNTZdLDEyMDgxMDpbWzU2XSwyNTZdLDEyMDgxMTpbWzU3XSwyNTZdLDEyMDgxMjpbWzQ4XSwyNTZdLDEyMDgxMzpbWzQ5XSwyNTZdLDEyMDgxNDpbWzUwXSwyNTZdLDEyMDgxNTpbWzUxXSwyNTZdLDEyMDgxNjpbWzUyXSwyNTZdLDEyMDgxNzpbWzUzXSwyNTZdLDEyMDgxODpbWzU0XSwyNTZdLDEyMDgxOTpbWzU1XSwyNTZdLDEyMDgyMDpbWzU2XSwyNTZdLDEyMDgyMTpbWzU3XSwyNTZdLDEyMDgyMjpbWzQ4XSwyNTZdLDEyMDgyMzpbWzQ5XSwyNTZdLDEyMDgyNDpbWzUwXSwyNTZdLDEyMDgyNTpbWzUxXSwyNTZdLDEyMDgyNjpbWzUyXSwyNTZdLDEyMDgyNzpbWzUzXSwyNTZdLDEyMDgyODpbWzU0XSwyNTZdLDEyMDgyOTpbWzU1XSwyNTZdLDEyMDgzMDpbWzU2XSwyNTZdLDEyMDgzMTpbWzU3XSwyNTZdfSwKNTkzOTI6ezEyNTEzNjpbLDIyMF0sMTI1MTM3OlssMjIwXSwxMjUxMzg6WywyMjBdLDEyNTEzOTpbLDIyMF0sMTI1MTQwOlssMjIwXSwxMjUxNDE6WywyMjBdLDEyNTE0MjpbLDIyMF19LAo2MDkyODp7MTI2NDY0OltbMTU3NV0sMjU2XSwxMjY0NjU6W1sxNTc2XSwyNTZdLDEyNjQ2NjpbWzE1ODBdLDI1Nl0sMTI2NDY3OltbMTU4M10sMjU2XSwxMjY0Njk6W1sxNjA4XSwyNTZdLDEyNjQ3MDpbWzE1ODZdLDI1Nl0sMTI2NDcxOltbMTU4MV0sMjU2XSwxMjY0NzI6W1sxNTkxXSwyNTZdLDEyNjQ3MzpbWzE2MTBdLDI1Nl0sMTI2NDc0OltbMTYwM10sMjU2XSwxMjY0NzU6W1sxNjA0XSwyNTZdLDEyNjQ3NjpbWzE2MDVdLDI1Nl0sMTI2NDc3OltbMTYwNl0sMjU2XSwxMjY0Nzg6W1sxNTg3XSwyNTZdLDEyNjQ3OTpbWzE1OTNdLDI1Nl0sMTI2NDgwOltbMTYwMV0sMjU2XSwxMjY0ODE6W1sxNTg5XSwyNTZdLDEyNjQ4MjpbWzE2MDJdLDI1Nl0sMTI2NDgzOltbMTU4NV0sMjU2XSwxMjY0ODQ6W1sxNTg4XSwyNTZdLDEyNjQ4NTpbWzE1NzhdLDI1Nl0sMTI2NDg2OltbMTU3OV0sMjU2XSwxMjY0ODc6W1sxNTgyXSwyNTZdLDEyNjQ4ODpbWzE1ODRdLDI1Nl0sMTI2NDg5OltbMTU5MF0sMjU2XSwxMjY0OTA6W1sxNTkyXSwyNTZdLDEyNjQ5MTpbWzE1OTRdLDI1Nl0sMTI2NDkyOltbMTY0Nl0sMjU2XSwxMjY0OTM6W1sxNzIyXSwyNTZdLDEyNjQ5NDpbWzE2OTddLDI1Nl0sMTI2NDk1OltbMTY0N10sMjU2XSwxMjY0OTc6W1sxNTc2XSwyNTZdLDEyNjQ5ODpbWzE1ODBdLDI1Nl0sMTI2NTAwOltbMTYwN10sMjU2XSwxMjY1MDM6W1sxNTgxXSwyNTZdLDEyNjUwNTpbWzE2MTBdLDI1Nl0sMTI2NTA2OltbMTYwM10sMjU2XSwxMjY1MDc6W1sxNjA0XSwyNTZdLDEyNjUwODpbWzE2MDVdLDI1Nl0sMTI2NTA5OltbMTYwNl0sMjU2XSwxMjY1MTA6W1sxNTg3XSwyNTZdLDEyNjUxMTpbWzE1OTNdLDI1Nl0sMTI2NTEyOltbMTYwMV0sMjU2XSwxMjY1MTM6W1sxNTg5XSwyNTZdLDEyNjUxNDpbWzE2MDJdLDI1Nl0sMTI2NTE2OltbMTU4OF0sMjU2XSwxMjY1MTc6W1sxNTc4XSwyNTZdLDEyNjUxODpbWzE1NzldLDI1Nl0sMTI2NTE5OltbMTU4Ml0sMjU2XSwxMjY1MjE6W1sxNTkwXSwyNTZdLDEyNjUyMzpbWzE1OTRdLDI1Nl0sMTI2NTMwOltbMTU4MF0sMjU2XSwxMjY1MzU6W1sxNTgxXSwyNTZdLDEyNjUzNzpbWzE2MTBdLDI1Nl0sMTI2NTM5OltbMTYwNF0sMjU2XSwxMjY1NDE6W1sxNjA2XSwyNTZdLDEyNjU0MjpbWzE1ODddLDI1Nl0sMTI2NTQzOltbMTU5M10sMjU2XSwxMjY1NDU6W1sxNTg5XSwyNTZdLDEyNjU0NjpbWzE2MDJdLDI1Nl0sMTI2NTQ4OltbMTU4OF0sMjU2XSwxMjY1NTE6W1sxNTgyXSwyNTZdLDEyNjU1MzpbWzE1OTBdLDI1Nl0sMTI2NTU1OltbMTU5NF0sMjU2XSwxMjY1NTc6W1sxNzIyXSwyNTZdLDEyNjU1OTpbWzE2NDddLDI1Nl0sMTI2NTYxOltbMTU3Nl0sMjU2XSwxMjY1NjI6W1sxNTgwXSwyNTZdLDEyNjU2NDpbWzE2MDddLDI1Nl0sMTI2NTY3OltbMTU4MV0sMjU2XSwxMjY1Njg6W1sxNTkxXSwyNTZdLDEyNjU2OTpbWzE2MTBdLDI1Nl0sMTI2NTcwOltbMTYwM10sMjU2XSwxMjY1NzI6W1sxNjA1XSwyNTZdLDEyNjU3MzpbWzE2MDZdLDI1Nl0sMTI2NTc0OltbMTU4N10sMjU2XSwxMjY1NzU6W1sxNTkzXSwyNTZdLDEyNjU3NjpbWzE2MDFdLDI1Nl0sMTI2NTc3OltbMTU4OV0sMjU2XSwxMjY1Nzg6W1sxNjAyXSwyNTZdLDEyNjU4MDpbWzE1ODhdLDI1Nl0sMTI2NTgxOltbMTU3OF0sMjU2XSwxMjY1ODI6W1sxNTc5XSwyNTZdLDEyNjU4MzpbWzE1ODJdLDI1Nl0sMTI2NTg1OltbMTU5MF0sMjU2XSwxMjY1ODY6W1sxNTkyXSwyNTZdLDEyNjU4NzpbWzE1OTRdLDI1Nl0sMTI2NTg4OltbMTY0Nl0sMjU2XSwxMjY1OTA6W1sxNjk3XSwyNTZdLDEyNjU5MjpbWzE1NzVdLDI1Nl0sMTI2NTkzOltbMTU3Nl0sMjU2XSwxMjY1OTQ6W1sxNTgwXSwyNTZdLDEyNjU5NTpbWzE1ODNdLDI1Nl0sMTI2NTk2OltbMTYwN10sMjU2XSwxMjY1OTc6W1sxNjA4XSwyNTZdLDEyNjU5ODpbWzE1ODZdLDI1Nl0sMTI2NTk5OltbMTU4MV0sMjU2XSwxMjY2MDA6W1sxNTkxXSwyNTZdLDEyNjYwMTpbWzE2MTBdLDI1Nl0sMTI2NjAzOltbMTYwNF0sMjU2XSwxMjY2MDQ6W1sxNjA1XSwyNTZdLDEyNjYwNTpbWzE2MDZdLDI1Nl0sMTI2NjA2OltbMTU4N10sMjU2XSwxMjY2MDc6W1sxNTkzXSwyNTZdLDEyNjYwODpbWzE2MDFdLDI1Nl0sMTI2NjA5OltbMTU4OV0sMjU2XSwxMjY2MTA6W1sxNjAyXSwyNTZdLDEyNjYxMTpbWzE1ODVdLDI1Nl0sMTI2NjEyOltbMTU4OF0sMjU2XSwxMjY2MTM6W1sxNTc4XSwyNTZdLDEyNjYxNDpbWzE1NzldLDI1Nl0sMTI2NjE1OltbMTU4Ml0sMjU2XSwxMjY2MTY6W1sxNTg0XSwyNTZdLDEyNjYxNzpbWzE1OTBdLDI1Nl0sMTI2NjE4OltbMTU5Ml0sMjU2XSwxMjY2MTk6W1sxNTk0XSwyNTZdLDEyNjYyNTpbWzE1NzZdLDI1Nl0sMTI2NjI2OltbMTU4MF0sMjU2XSwxMjY2Mjc6W1sxNTgzXSwyNTZdLDEyNjYyOTpbWzE2MDhdLDI1Nl0sMTI2NjMwOltbMTU4Nl0sMjU2XSwxMjY2MzE6W1sxNTgxXSwyNTZdLDEyNjYzMjpbWzE1OTFdLDI1Nl0sMTI2NjMzOltbMTYxMF0sMjU2XSwxMjY2MzU6W1sxNjA0XSwyNTZdLDEyNjYzNjpbWzE2MDVdLDI1Nl0sMTI2NjM3OltbMTYwNl0sMjU2XSwxMjY2Mzg6W1sxNTg3XSwyNTZdLDEyNjYzOTpbWzE1OTNdLDI1Nl0sMTI2NjQwOltbMTYwMV0sMjU2XSwxMjY2NDE6W1sxNTg5XSwyNTZdLDEyNjY0MjpbWzE2MDJdLDI1Nl0sMTI2NjQzOltbMTU4NV0sMjU2XSwxMjY2NDQ6W1sxNTg4XSwyNTZdLDEyNjY0NTpbWzE1NzhdLDI1Nl0sMTI2NjQ2OltbMTU3OV0sMjU2XSwxMjY2NDc6W1sxNTgyXSwyNTZdLDEyNjY0ODpbWzE1ODRdLDI1Nl0sMTI2NjQ5OltbMTU5MF0sMjU2XSwxMjY2NTA6W1sxNTkyXSwyNTZdLDEyNjY1MTpbWzE1OTRdLDI1Nl19LAo2MTY5Njp7MTI3MjMyOltbNDgsNDZdLDI1Nl0sMTI3MjMzOltbNDgsNDRdLDI1Nl0sMTI3MjM0OltbNDksNDRdLDI1Nl0sMTI3MjM1OltbNTAsNDRdLDI1Nl0sMTI3MjM2OltbNTEsNDRdLDI1Nl0sMTI3MjM3OltbNTIsNDRdLDI1Nl0sMTI3MjM4OltbNTMsNDRdLDI1Nl0sMTI3MjM5OltbNTQsNDRdLDI1Nl0sMTI3MjQwOltbNTUsNDRdLDI1Nl0sMTI3MjQxOltbNTYsNDRdLDI1Nl0sMTI3MjQyOltbNTcsNDRdLDI1Nl0sMTI3MjQ4OltbNDAsNjUsNDFdLDI1Nl0sMTI3MjQ5OltbNDAsNjYsNDFdLDI1Nl0sMTI3MjUwOltbNDAsNjcsNDFdLDI1Nl0sMTI3MjUxOltbNDAsNjgsNDFdLDI1Nl0sMTI3MjUyOltbNDAsNjksNDFdLDI1Nl0sMTI3MjUzOltbNDAsNzAsNDFdLDI1Nl0sMTI3MjU0OltbNDAsNzEsNDFdLDI1Nl0sMTI3MjU1OltbNDAsNzIsNDFdLDI1Nl0sMTI3MjU2OltbNDAsNzMsNDFdLDI1Nl0sMTI3MjU3OltbNDAsNzQsNDFdLDI1Nl0sMTI3MjU4OltbNDAsNzUsNDFdLDI1Nl0sMTI3MjU5OltbNDAsNzYsNDFdLDI1Nl0sMTI3MjYwOltbNDAsNzcsNDFdLDI1Nl0sMTI3MjYxOltbNDAsNzgsNDFdLDI1Nl0sMTI3MjYyOltbNDAsNzksNDFdLDI1Nl0sMTI3MjYzOltbNDAsODAsNDFdLDI1Nl0sMTI3MjY0OltbNDAsODEsNDFdLDI1Nl0sMTI3MjY1OltbNDAsODIsNDFdLDI1Nl0sMTI3MjY2OltbNDAsODMsNDFdLDI1Nl0sMTI3MjY3OltbNDAsODQsNDFdLDI1Nl0sMTI3MjY4OltbNDAsODUsNDFdLDI1Nl0sMTI3MjY5OltbNDAsODYsNDFdLDI1Nl0sMTI3MjcwOltbNDAsODcsNDFdLDI1Nl0sMTI3MjcxOltbNDAsODgsNDFdLDI1Nl0sMTI3MjcyOltbNDAsODksNDFdLDI1Nl0sMTI3MjczOltbNDAsOTAsNDFdLDI1Nl0sMTI3Mjc0OltbMTIzMDgsODMsMTIzMDldLDI1Nl0sMTI3Mjc1OltbNjddLDI1Nl0sMTI3Mjc2OltbODJdLDI1Nl0sMTI3Mjc3OltbNjcsNjhdLDI1Nl0sMTI3Mjc4OltbODcsOTBdLDI1Nl0sMTI3MjgwOltbNjVdLDI1Nl0sMTI3MjgxOltbNjZdLDI1Nl0sMTI3MjgyOltbNjddLDI1Nl0sMTI3MjgzOltbNjhdLDI1Nl0sMTI3Mjg0OltbNjldLDI1Nl0sMTI3Mjg1OltbNzBdLDI1Nl0sMTI3Mjg2OltbNzFdLDI1Nl0sMTI3Mjg3OltbNzJdLDI1Nl0sMTI3Mjg4OltbNzNdLDI1Nl0sMTI3Mjg5OltbNzRdLDI1Nl0sMTI3MjkwOltbNzVdLDI1Nl0sMTI3MjkxOltbNzZdLDI1Nl0sMTI3MjkyOltbNzddLDI1Nl0sMTI3MjkzOltbNzhdLDI1Nl0sMTI3Mjk0OltbNzldLDI1Nl0sMTI3Mjk1OltbODBdLDI1Nl0sMTI3Mjk2OltbODFdLDI1Nl0sMTI3Mjk3OltbODJdLDI1Nl0sMTI3Mjk4OltbODNdLDI1Nl0sMTI3Mjk5OltbODRdLDI1Nl0sMTI3MzAwOltbODVdLDI1Nl0sMTI3MzAxOltbODZdLDI1Nl0sMTI3MzAyOltbODddLDI1Nl0sMTI3MzAzOltbODhdLDI1Nl0sMTI3MzA0OltbODldLDI1Nl0sMTI3MzA1OltbOTBdLDI1Nl0sMTI3MzA2OltbNzIsODZdLDI1Nl0sMTI3MzA3OltbNzcsODZdLDI1Nl0sMTI3MzA4OltbODMsNjhdLDI1Nl0sMTI3MzA5OltbODMsODNdLDI1Nl0sMTI3MzEwOltbODAsODAsODZdLDI1Nl0sMTI3MzExOltbODcsNjddLDI1Nl0sMTI3MzM4OltbNzcsNjddLDI1Nl0sMTI3MzM5OltbNzcsNjhdLDI1Nl0sMTI3Mzc2OltbNjgsNzRdLDI1Nl19LAo2MTk1Mjp7MTI3NDg4OltbMTI0MTEsMTIzNjNdLDI1Nl0sMTI3NDg5OltbMTI0NjcsMTI0NjddLDI1Nl0sMTI3NDkwOltbMTI0NjldLDI1Nl0sMTI3NTA0OltbMjUxNjNdLDI1Nl0sMTI3NTA1OltbMjMzODNdLDI1Nl0sMTI3NTA2OltbMjE0NTJdLDI1Nl0sMTI3NTA3OltbMTI0ODddLDI1Nl0sMTI3NTA4OltbMjAxMDhdLDI1Nl0sMTI3NTA5OltbMjI4MTBdLDI1Nl0sMTI3NTEwOltbMzUyOTldLDI1Nl0sMTI3NTExOltbMjI4MjVdLDI1Nl0sMTI3NTEyOltbMjAxMzJdLDI1Nl0sMTI3NTEzOltbMjYxNDRdLDI1Nl0sMTI3NTE0OltbMjg5NjFdLDI1Nl0sMTI3NTE1OltbMjYwMDldLDI1Nl0sMTI3NTE2OltbMjEwNjldLDI1Nl0sMTI3NTE3OltbMjQ0NjBdLDI1Nl0sMTI3NTE4OltbMjA4NzddLDI1Nl0sMTI3NTE5OltbMjYwMzJdLDI1Nl0sMTI3NTIwOltbMjEwMjFdLDI1Nl0sMTI3NTIxOltbMzIwNjZdLDI1Nl0sMTI3NTIyOltbMjk5ODNdLDI1Nl0sMTI3NTIzOltbMzYwMDldLDI1Nl0sMTI3NTI0OltbMjI3NjhdLDI1Nl0sMTI3NTI1OltbMjE1NjFdLDI1Nl0sMTI3NTI2OltbMjg0MzZdLDI1Nl0sMTI3NTI3OltbMjUyMzddLDI1Nl0sMTI3NTI4OltbMjU0MjldLDI1Nl0sMTI3NTI5OltbMTk5NjhdLDI1Nl0sMTI3NTMwOltbMTk5NzddLDI1Nl0sMTI3NTMxOltbMzY5MzhdLDI1Nl0sMTI3NTMyOltbMjQwMzhdLDI1Nl0sMTI3NTMzOltbMjAwMTNdLDI1Nl0sMTI3NTM0OltbMjE0OTFdLDI1Nl0sMTI3NTM1OltbMjUzNTFdLDI1Nl0sMTI3NTM2OltbMzYyMDhdLDI1Nl0sMTI3NTM3OltbMjUxNzFdLDI1Nl0sMTI3NTM4OltbMzExMDVdLDI1Nl0sMTI3NTM5OltbMzEzNTRdLDI1Nl0sMTI3NTQwOltbMjE1MTJdLDI1Nl0sMTI3NTQxOltbMjgyODhdLDI1Nl0sMTI3NTQyOltbMjYzNzddLDI1Nl0sMTI3NTQzOltbMjYzNzZdLDI1Nl0sMTI3NTQ0OltbMzAwMDNdLDI1Nl0sMTI3NTQ1OltbMjExMDZdLDI1Nl0sMTI3NTQ2OltbMjE5NDJdLDI1Nl0sMTI3NTUyOltbMTIzMDgsMjY0MTIsMTIzMDldLDI1Nl0sMTI3NTUzOltbMTIzMDgsMTk5NzcsMTIzMDldLDI1Nl0sMTI3NTU0OltbMTIzMDgsMjAxMDgsMTIzMDldLDI1Nl0sMTI3NTU1OltbMTIzMDgsMjM0MzMsMTIzMDldLDI1Nl0sMTI3NTU2OltbMTIzMDgsMjg4NTcsMTIzMDldLDI1Nl0sMTI3NTU3OltbMTIzMDgsMjUxNzEsMTIzMDldLDI1Nl0sMTI3NTU4OltbMTIzMDgsMzA0MjMsMTIzMDldLDI1Nl0sMTI3NTU5OltbMTIzMDgsMjEyMTMsMTIzMDldLDI1Nl0sMTI3NTYwOltbMTIzMDgsMjU5NDMsMTIzMDldLDI1Nl0sMTI3NTY4OltbMjQ0NzFdLDI1Nl0sMTI3NTY5OltbMjE0ODddLDI1Nl19LAo2MzQ4ODp7MTk0NTYwOltbMjAwMjldXSwxOTQ1NjE6W1syMDAyNF1dLDE5NDU2MjpbWzIwMDMzXV0sMTk0NTYzOltbMTMxMzYyXV0sMTk0NTY0OltbMjAzMjBdXSwxOTQ1NjU6W1syMDM5OF1dLDE5NDU2NjpbWzIwNDExXV0sMTk0NTY3OltbMjA0ODJdXSwxOTQ1Njg6W1syMDYwMl1dLDE5NDU2OTpbWzIwNjMzXV0sMTk0NTcwOltbMjA3MTFdXSwxOTQ1NzE6W1syMDY4N11dLDE5NDU3MjpbWzEzNDcwXV0sMTk0NTczOltbMTMyNjY2XV0sMTk0NTc0OltbMjA4MTNdXSwxOTQ1NzU6W1syMDgyMF1dLDE5NDU3NjpbWzIwODM2XV0sMTk0NTc3OltbMjA4NTVdXSwxOTQ1Nzg6W1sxMzIzODBdXSwxOTQ1Nzk6W1sxMzQ5N11dLDE5NDU4MDpbWzIwODM5XV0sMTk0NTgxOltbMjA4NzddXSwxOTQ1ODI6W1sxMzI0MjddXSwxOTQ1ODM6W1syMDg4N11dLDE5NDU4NDpbWzIwOTAwXV0sMTk0NTg1OltbMjAxNzJdXSwxOTQ1ODY6W1syMDkwOF1dLDE5NDU4NzpbWzIwOTE3XV0sMTk0NTg4OltbMTY4NDE1XV0sMTk0NTg5OltbMjA5ODFdXSwxOTQ1OTA6W1syMDk5NV1dLDE5NDU5MTpbWzEzNTM1XV0sMTk0NTkyOltbMjEwNTFdXSwxOTQ1OTM6W1syMTA2Ml1dLDE5NDU5NDpbWzIxMTA2XV0sMTk0NTk1OltbMjExMTFdXSwxOTQ1OTY6W1sxMzU4OV1dLDE5NDU5NzpbWzIxMTkxXV0sMTk0NTk4OltbMjExOTNdXSwxOTQ1OTk6W1syMTIyMF1dLDE5NDYwMDpbWzIxMjQyXV0sMTk0NjAxOltbMjEyNTNdXSwxOTQ2MDI6W1syMTI1NF1dLDE5NDYwMzpbWzIxMjcxXV0sMTk0NjA0OltbMjEzMjFdXSwxOTQ2MDU6W1syMTMyOV1dLDE5NDYwNjpbWzIxMzM4XV0sMTk0NjA3OltbMjEzNjNdXSwxOTQ2MDg6W1syMTM3M11dLDE5NDYwOTpbWzIxMzc1XV0sMTk0NjEwOltbMjEzNzVdXSwxOTQ2MTE6W1syMTM3NV1dLDE5NDYxMjpbWzEzMzY3Nl1dLDE5NDYxMzpbWzI4Nzg0XV0sMTk0NjE0OltbMjE0NTBdXSwxOTQ2MTU6W1syMTQ3MV1dLDE5NDYxNjpbWzEzMzk4N11dLDE5NDYxNzpbWzIxNDgzXV0sMTk0NjE4OltbMjE0ODldXSwxOTQ2MTk6W1syMTUxMF1dLDE5NDYyMDpbWzIxNjYyXV0sMTk0NjIxOltbMjE1NjBdXSwxOTQ2MjI6W1syMTU3Nl1dLDE5NDYyMzpbWzIxNjA4XV0sMTk0NjI0OltbMjE2NjZdXSwxOTQ2MjU6W1syMTc1MF1dLDE5NDYyNjpbWzIxNzc2XV0sMTk0NjI3OltbMjE4NDNdXSwxOTQ2Mjg6W1syMTg1OV1dLDE5NDYyOTpbWzIxODkyXV0sMTk0NjMwOltbMjE4OTJdXSwxOTQ2MzE6W1syMTkxM11dLDE5NDYzMjpbWzIxOTMxXV0sMTk0NjMzOltbMjE5MzldXSwxOTQ2MzQ6W1syMTk1NF1dLDE5NDYzNTpbWzIyMjk0XV0sMTk0NjM2OltbMjIwMjJdXSwxOTQ2Mzc6W1syMjI5NV1dLDE5NDYzODpbWzIyMDk3XV0sMTk0NjM5OltbMjIxMzJdXSwxOTQ2NDA6W1syMDk5OV1dLDE5NDY0MTpbWzIyNzY2XV0sMTk0NjQyOltbMjI0NzhdXSwxOTQ2NDM6W1syMjUxNl1dLDE5NDY0NDpbWzIyNTQxXV0sMTk0NjQ1OltbMjI0MTFdXSwxOTQ2NDY6W1syMjU3OF1dLDE5NDY0NzpbWzIyNTc3XV0sMTk0NjQ4OltbMjI3MDBdXSwxOTQ2NDk6W1sxMzY0MjBdXSwxOTQ2NTA6W1syMjc3MF1dLDE5NDY1MTpbWzIyNzc1XV0sMTk0NjUyOltbMjI3OTBdXSwxOTQ2NTM6W1syMjgxMF1dLDE5NDY1NDpbWzIyODE4XV0sMTk0NjU1OltbMjI4ODJdXSwxOTQ2NTY6W1sxMzY4NzJdXSwxOTQ2NTc6W1sxMzY5MzhdXSwxOTQ2NTg6W1syMzAyMF1dLDE5NDY1OTpbWzIzMDY3XV0sMTk0NjYwOltbMjMwNzldXSwxOTQ2NjE6W1syMzAwMF1dLDE5NDY2MjpbWzIzMTQyXV0sMTk0NjYzOltbMTQwNjJdXSwxOTQ2NjQ6W1sxNDA3Nl1dLDE5NDY2NTpbWzIzMzA0XV0sMTk0NjY2OltbMjMzNThdXSwxOTQ2Njc6W1syMzM1OF1dLDE5NDY2ODpbWzEzNzY3Ml1dLDE5NDY2OTpbWzIzNDkxXV0sMTk0NjcwOltbMjM1MTJdXSwxOTQ2NzE6W1syMzUyN11dLDE5NDY3MjpbWzIzNTM5XV0sMTk0NjczOltbMTM4MDA4XV0sMTk0Njc0OltbMjM1NTFdXSwxOTQ2NzU6W1syMzU1OF1dLDE5NDY3NjpbWzI0NDAzXV0sMTk0Njc3OltbMjM1ODZdXSwxOTQ2Nzg6W1sxNDIwOV1dLDE5NDY3OTpbWzIzNjQ4XV0sMTk0NjgwOltbMjM2NjJdXSwxOTQ2ODE6W1syMzc0NF1dLDE5NDY4MjpbWzIzNjkzXV0sMTk0NjgzOltbMTM4NzI0XV0sMTk0Njg0OltbMjM4NzVdXSwxOTQ2ODU6W1sxMzg3MjZdXSwxOTQ2ODY6W1syMzkxOF1dLDE5NDY4NzpbWzIzOTE1XV0sMTk0Njg4OltbMjM5MzJdXSwxOTQ2ODk6W1syNDAzM11dLDE5NDY5MDpbWzI0MDM0XV0sMTk0NjkxOltbMTQzODNdXSwxOTQ2OTI6W1syNDA2MV1dLDE5NDY5MzpbWzI0MTA0XV0sMTk0Njk0OltbMjQxMjVdXSwxOTQ2OTU6W1syNDE2OV1dLDE5NDY5NjpbWzE0NDM0XV0sMTk0Njk3OltbMTM5NjUxXV0sMTk0Njk4OltbMTQ0NjBdXSwxOTQ2OTk6W1syNDI0MF1dLDE5NDcwMDpbWzI0MjQzXV0sMTk0NzAxOltbMjQyNDZdXSwxOTQ3MDI6W1syNDI2Nl1dLDE5NDcwMzpbWzE3Mjk0Nl1dLDE5NDcwNDpbWzI0MzE4XV0sMTk0NzA1OltbMTQwMDgxXV0sMTk0NzA2OltbMTQwMDgxXV0sMTk0NzA3OltbMzMyODFdXSwxOTQ3MDg6W1syNDM1NF1dLDE5NDcwOTpbWzI0MzU0XV0sMTk0NzEwOltbMTQ1MzVdXSwxOTQ3MTE6W1sxNDQwNTZdXSwxOTQ3MTI6W1sxNTYxMjJdXSwxOTQ3MTM6W1syNDQxOF1dLDE5NDcxNDpbWzI0NDI3XV0sMTk0NzE1OltbMTQ1NjNdXSwxOTQ3MTY6W1syNDQ3NF1dLDE5NDcxNzpbWzI0NTI1XV0sMTk0NzE4OltbMjQ1MzVdXSwxOTQ3MTk6W1syNDU2OV1dLDE5NDcyMDpbWzI0NzA1XV0sMTk0NzIxOltbMTQ2NTBdXSwxOTQ3MjI6W1sxNDYyMF1dLDE5NDcyMzpbWzI0NzI0XV0sMTk0NzI0OltbMTQxMDEyXV0sMTk0NzI1OltbMjQ3NzVdXSwxOTQ3MjY6W1syNDkwNF1dLDE5NDcyNzpbWzI0OTA4XV0sMTk0NzI4OltbMjQ5MTBdXSwxOTQ3Mjk6W1syNDkwOF1dLDE5NDczMDpbWzI0OTU0XV0sMTk0NzMxOltbMjQ5NzRdXSwxOTQ3MzI6W1syNTAxMF1dLDE5NDczMzpbWzI0OTk2XV0sMTk0NzM0OltbMjUwMDddXSwxOTQ3MzU6W1syNTA1NF1dLDE5NDczNjpbWzI1MDc0XV0sMTk0NzM3OltbMjUwNzhdXSwxOTQ3Mzg6W1syNTEwNF1dLDE5NDczOTpbWzI1MTE1XV0sMTk0NzQwOltbMjUxODFdXSwxOTQ3NDE6W1syNTI2NV1dLDE5NDc0MjpbWzI1MzAwXV0sMTk0NzQzOltbMjU0MjRdXSwxOTQ3NDQ6W1sxNDIwOTJdXSwxOTQ3NDU6W1syNTQwNV1dLDE5NDc0NjpbWzI1MzQwXV0sMTk0NzQ3OltbMjU0NDhdXSwxOTQ3NDg6W1syNTQ3NV1dLDE5NDc0OTpbWzI1NTcyXV0sMTk0NzUwOltbMTQyMzIxXV0sMTk0NzUxOltbMjU2MzRdXSwxOTQ3NTI6W1syNTU0MV1dLDE5NDc1MzpbWzI1NTEzXV0sMTk0NzU0OltbMTQ4OTRdXSwxOTQ3NTU6W1syNTcwNV1dLDE5NDc1NjpbWzI1NzI2XV0sMTk0NzU3OltbMjU3NTddXSwxOTQ3NTg6W1syNTcxOV1dLDE5NDc1OTpbWzE0OTU2XV0sMTk0NzYwOltbMjU5MzVdXSwxOTQ3NjE6W1syNTk2NF1dLDE5NDc2MjpbWzE0MzM3MF1dLDE5NDc2MzpbWzI2MDgzXV0sMTk0NzY0OltbMjYzNjBdXSwxOTQ3NjU6W1syNjE4NV1dLDE5NDc2NjpbWzE1MTI5XV0sMTk0NzY3OltbMjYyNTddXSwxOTQ3Njg6W1sxNTExMl1dLDE5NDc2OTpbWzE1MDc2XV0sMTk0NzcwOltbMjA4ODJdXSwxOTQ3NzE6W1syMDg4NV1dLDE5NDc3MjpbWzI2MzY4XV0sMTk0NzczOltbMjYyNjhdXSwxOTQ3NzQ6W1szMjk0MV1dLDE5NDc3NTpbWzE3MzY5XV0sMTk0Nzc2OltbMjYzOTFdXSwxOTQ3Nzc6W1syNjM5NV1dLDE5NDc3ODpbWzI2NDAxXV0sMTk0Nzc5OltbMjY0NjJdXSwxOTQ3ODA6W1syNjQ1MV1dLDE5NDc4MTpbWzE0NDMyM11dLDE5NDc4MjpbWzE1MTc3XV0sMTk0NzgzOltbMjY2MThdXSwxOTQ3ODQ6W1syNjUwMV1dLDE5NDc4NTpbWzI2NzA2XV0sMTk0Nzg2OltbMjY3NTddXSwxOTQ3ODc6W1sxNDQ0OTNdXSwxOTQ3ODg6W1syNjc2Nl1dLDE5NDc4OTpbWzI2NjU1XV0sMTk0NzkwOltbMjY5MDBdXSwxOTQ3OTE6W1sxNTI2MV1dLDE5NDc5MjpbWzI2OTQ2XV0sMTk0NzkzOltbMjcwNDNdXSwxOTQ3OTQ6W1syNzExNF1dLDE5NDc5NTpbWzI3MzA0XV0sMTk0Nzk2OltbMTQ1MDU5XV0sMTk0Nzk3OltbMjczNTVdXSwxOTQ3OTg6W1sxNTM4NF1dLDE5NDc5OTpbWzI3NDI1XV0sMTk0ODAwOltbMTQ1NTc1XV0sMTk0ODAxOltbMjc0NzZdXSwxOTQ4MDI6W1sxNTQzOF1dLDE5NDgwMzpbWzI3NTA2XV0sMTk0ODA0OltbMjc1NTFdXSwxOTQ4MDU6W1syNzU3OF1dLDE5NDgwNjpbWzI3NTc5XV0sMTk0ODA3OltbMTQ2MDYxXV0sMTk0ODA4OltbMTM4NTA3XV0sMTk0ODA5OltbMTQ2MTcwXV0sMTk0ODEwOltbMjc3MjZdXSwxOTQ4MTE6W1sxNDY2MjBdXSwxOTQ4MTI6W1syNzgzOV1dLDE5NDgxMzpbWzI3ODUzXV0sMTk0ODE0OltbMjc3NTFdXSwxOTQ4MTU6W1syNzkyNl1dfSwKNjM3NDQ6ezYzNzQ0OltbMzU5MTJdXSw2Mzc0NTpbWzI2MzU2XV0sNjM3NDY6W1szNjU1NF1dLDYzNzQ3OltbMzYwNDBdXSw2Mzc0ODpbWzI4MzY5XV0sNjM3NDk6W1syMDAxOF1dLDYzNzUwOltbMjE0NzddXSw2Mzc1MTpbWzQwODYwXV0sNjM3NTI6W1s0MDg2MF1dLDYzNzUzOltbMjI4NjVdXSw2Mzc1NDpbWzM3MzI5XV0sNjM3NTU6W1syMTg5NV1dLDYzNzU2OltbMjI4NTZdXSw2Mzc1NzpbWzI1MDc4XV0sNjM3NTg6W1szMDMxM11dLDYzNzU5OltbMzI2NDVdXSw2Mzc2MDpbWzM0MzY3XV0sNjM3NjE6W1szNDc0Nl1dLDYzNzYyOltbMzUwNjRdXSw2Mzc2MzpbWzM3MDA3XV0sNjM3NjQ6W1syNzEzOF1dLDYzNzY1OltbMjc5MzFdXSw2Mzc2NjpbWzI4ODg5XV0sNjM3Njc6W1syOTY2Ml1dLDYzNzY4OltbMzM4NTNdXSw2Mzc2OTpbWzM3MjI2XV0sNjM3NzA6W1szOTQwOV1dLDYzNzcxOltbMjAwOThdXSw2Mzc3MjpbWzIxMzY1XV0sNjM3NzM6W1syNzM5Nl1dLDYzNzc0OltbMjkyMTFdXSw2Mzc3NTpbWzM0MzQ5XV0sNjM3NzY6W1s0MDQ3OF1dLDYzNzc3OltbMjM4ODhdXSw2Mzc3ODpbWzI4NjUxXV0sNjM3Nzk6W1szNDI1M11dLDYzNzgwOltbMzUxNzJdXSw2Mzc4MTpbWzI1Mjg5XV0sNjM3ODI6W1szMzI0MF1dLDYzNzgzOltbMzQ4NDddXSw2Mzc4NDpbWzI0MjY2XV0sNjM3ODU6W1syNjM5MV1dLDYzNzg2OltbMjgwMTBdXSw2Mzc4NzpbWzI5NDM2XV0sNjM3ODg6W1szNzA3MF1dLDYzNzg5OltbMjAzNThdXSw2Mzc5MDpbWzIwOTE5XV0sNjM3OTE6W1syMTIxNF1dLDYzNzkyOltbMjU3OTZdXSw2Mzc5MzpbWzI3MzQ3XV0sNjM3OTQ6W1syOTIwMF1dLDYzNzk1OltbMzA0MzldXSw2Mzc5NjpbWzMyNzY5XV0sNjM3OTc6W1szNDMxMF1dLDYzNzk4OltbMzQzOTZdXSw2Mzc5OTpbWzM2MzM1XV0sNjM4MDA6W1szODcwNl1dLDYzODAxOltbMzk3OTFdXSw2MzgwMjpbWzQwNDQyXV0sNjM4MDM6W1szMDg2MF1dLDYzODA0OltbMzExMDNdXSw2MzgwNTpbWzMyMTYwXV0sNjM4MDY6W1szMzczN11dLDYzODA3OltbMzc2MzZdXSw2MzgwODpbWzQwNTc1XV0sNjM4MDk6W1szNTU0Ml1dLDYzODEwOltbMjI3NTFdXSw2MzgxMTpbWzI0MzI0XV0sNjM4MTI6W1szMTg0MF1dLDYzODEzOltbMzI4OTRdXSw2MzgxNDpbWzI5MjgyXV0sNjM4MTU6W1szMDkyMl1dLDYzODE2OltbMzYwMzRdXSw2MzgxNzpbWzM4NjQ3XV0sNjM4MTg6W1syMjc0NF1dLDYzODE5OltbMjM2NTBdXSw2MzgyMDpbWzI3MTU1XV0sNjM4MjE6W1syODEyMl1dLDYzODIyOltbMjg0MzFdXSw2MzgyMzpbWzMyMDQ3XV0sNjM4MjQ6W1szMjMxMV1dLDYzODI1OltbMzg0NzVdXSw2MzgyNjpbWzIxMjAyXV0sNjM4Mjc6W1szMjkwN11dLDYzODI4OltbMjA5NTZdXSw2MzgyOTpbWzIwOTQwXV0sNjM4MzA6W1szMTI2MF1dLDYzODMxOltbMzIxOTBdXSw2MzgzMjpbWzMzNzc3XV0sNjM4MzM6W1szODUxN11dLDYzODM0OltbMzU3MTJdXSw2MzgzNTpbWzI1Mjk1XV0sNjM4MzY6W1syNzEzOF1dLDYzODM3OltbMzU1ODJdXSw2MzgzODpbWzIwMDI1XV0sNjM4Mzk6W1syMzUyN11dLDYzODQwOltbMjQ1OTRdXSw2Mzg0MTpbWzI5NTc1XV0sNjM4NDI6W1szMDA2NF1dLDYzODQzOltbMjEyNzFdXSw2Mzg0NDpbWzMwOTcxXV0sNjM4NDU6W1syMDQxNV1dLDYzODQ2OltbMjQ0ODldXSw2Mzg0NzpbWzE5OTgxXV0sNjM4NDg6W1syNzg1Ml1dLDYzODQ5OltbMjU5NzZdXSw2Mzg1MDpbWzMyMDM0XV0sNjM4NTE6W1syMTQ0M11dLDYzODUyOltbMjI2MjJdXSw2Mzg1MzpbWzMwNDY1XV0sNjM4NTQ6W1szMzg2NV1dLDYzODU1OltbMzU0OThdXSw2Mzg1NjpbWzI3NTc4XV0sNjM4NTc6W1szNjc4NF1dLDYzODU4OltbMjc3ODRdXSw2Mzg1OTpbWzI1MzQyXV0sNjM4NjA6W1szMzUwOV1dLDYzODYxOltbMjU1MDRdXSw2Mzg2MjpbWzMwMDUzXV0sNjM4NjM6W1syMDE0Ml1dLDYzODY0OltbMjA4NDFdXSw2Mzg2NTpbWzIwOTM3XV0sNjM4NjY6W1syNjc1M11dLDYzODY3OltbMzE5NzVdXSw2Mzg2ODpbWzMzMzkxXV0sNjM4Njk6W1szNTUzOF1dLDYzODcwOltbMzczMjddXSw2Mzg3MTpbWzIxMjM3XV0sNjM4NzI6W1syMTU3MF1dLDYzODczOltbMjI4OTldXSw2Mzg3NDpbWzI0MzAwXV0sNjM4NzU6W1syNjA1M11dLDYzODc2OltbMjg2NzBdXSw2Mzg3NzpbWzMxMDE4XV0sNjM4Nzg6W1szODMxN11dLDYzODc5OltbMzk1MzBdXSw2Mzg4MDpbWzQwNTk5XV0sNjM4ODE6W1s0MDY1NF1dLDYzODgyOltbMjExNDddXSw2Mzg4MzpbWzI2MzEwXV0sNjM4ODQ6W1syNzUxMV1dLDYzODg1OltbMzY3MDZdXSw2Mzg4NjpbWzI0MTgwXV0sNjM4ODc6W1syNDk3Nl1dLDYzODg4OltbMjUwODhdXSw2Mzg4OTpbWzI1NzU0XV0sNjM4OTA6W1syODQ1MV1dLDYzODkxOltbMjkwMDFdXSw2Mzg5MjpbWzI5ODMzXV0sNjM4OTM6W1szMTE3OF1dLDYzODk0OltbMzIyNDRdXSw2Mzg5NTpbWzMyODc5XV0sNjM4OTY6W1szNjY0Nl1dLDYzODk3OltbMzQwMzBdXSw2Mzg5ODpbWzM2ODk5XV0sNjM4OTk6W1szNzcwNl1dLDYzOTAwOltbMjEwMTVdXSw2MzkwMTpbWzIxMTU1XV0sNjM5MDI6W1syMTY5M11dLDYzOTAzOltbMjg4NzJdXSw2MzkwNDpbWzM1MDEwXV0sNjM5MDU6W1szNTQ5OF1dLDYzOTA2OltbMjQyNjVdXSw2MzkwNzpbWzI0NTY1XV0sNjM5MDg6W1syNTQ2N11dLDYzOTA5OltbMjc1NjZdXSw2MzkxMDpbWzMxODA2XV0sNjM5MTE6W1syOTU1N11dLDYzOTEyOltbMjAxOTZdXSw2MzkxMzpbWzIyMjY1XV0sNjM5MTQ6W1syMzUyN11dLDYzOTE1OltbMjM5OTRdXSw2MzkxNjpbWzI0NjA0XV0sNjM5MTc6W1syOTYxOF1dLDYzOTE4OltbMjk4MDFdXSw2MzkxOTpbWzMyNjY2XV0sNjM5MjA6W1szMjgzOF1dLDYzOTIxOltbMzc0MjhdXSw2MzkyMjpbWzM4NjQ2XV0sNjM5MjM6W1szODcyOF1dLDYzOTI0OltbMzg5MzZdXSw2MzkyNTpbWzIwMzYzXV0sNjM5MjY6W1szMTE1MF1dLDYzOTI3OltbMzczMDBdXSw2MzkyODpbWzM4NTg0XV0sNjM5Mjk6W1syNDgwMV1dLDYzOTMwOltbMjAxMDJdXSw2MzkzMTpbWzIwNjk4XV0sNjM5MzI6W1syMzUzNF1dLDYzOTMzOltbMjM2MTVdXSw2MzkzNDpbWzI2MDA5XV0sNjM5MzU6W1syNzEzOF1dLDYzOTM2OltbMjkxMzRdXSw2MzkzNzpbWzMwMjc0XV0sNjM5Mzg6W1szNDA0NF1dLDYzOTM5OltbMzY5ODhdXSw2Mzk0MDpbWzQwODQ1XV0sNjM5NDE6W1syNjI0OF1dLDYzOTQyOltbMzg0NDZdXSw2Mzk0MzpbWzIxMTI5XV0sNjM5NDQ6W1syNjQ5MV1dLDYzOTQ1OltbMjY2MTFdXSw2Mzk0NjpbWzI3OTY5XV0sNjM5NDc6W1syODMxNl1dLDYzOTQ4OltbMjk3MDVdXSw2Mzk0OTpbWzMwMDQxXV0sNjM5NTA6W1szMDgyN11dLDYzOTUxOltbMzIwMTZdXSw2Mzk1MjpbWzM5MDA2XV0sNjM5NTM6W1syMDg0NV1dLDYzOTU0OltbMjUxMzRdXSw2Mzk1NTpbWzM4NTIwXV0sNjM5NTY6W1syMDUyM11dLDYzOTU3OltbMjM4MzNdXSw2Mzk1ODpbWzI4MTM4XV0sNjM5NTk6W1szNjY1MF1dLDYzOTYwOltbMjQ0NTldXSw2Mzk2MTpbWzI0OTAwXV0sNjM5NjI6W1syNjY0N11dLDYzOTYzOltbMjk1NzVdXSw2Mzk2NDpbWzM4NTM0XV0sNjM5NjU6W1syMTAzM11dLDYzOTY2OltbMjE1MTldXSw2Mzk2NzpbWzIzNjUzXV0sNjM5Njg6W1syNjEzMV1dLDYzOTY5OltbMjY0NDZdXSw2Mzk3MDpbWzI2NzkyXV0sNjM5NzE6W1syNzg3N11dLDYzOTcyOltbMjk3MDJdXSw2Mzk3MzpbWzMwMTc4XV0sNjM5NzQ6W1szMjYzM11dLDYzOTc1OltbMzUwMjNdXSw2Mzk3NjpbWzM1MDQxXV0sNjM5Nzc6W1szNzMyNF1dLDYzOTc4OltbMzg2MjZdXSw2Mzk3OTpbWzIxMzExXV0sNjM5ODA6W1syODM0Nl1dLDYzOTgxOltbMjE1MzNdXSw2Mzk4MjpbWzI5MTM2XV0sNjM5ODM6W1syOTg0OF1dLDYzOTg0OltbMzQyOThdXSw2Mzk4NTpbWzM4NTYzXV0sNjM5ODY6W1s0MDAyM11dLDYzOTg3OltbNDA2MDddXSw2Mzk4ODpbWzI2NTE5XV0sNjM5ODk6W1syODEwN11dLDYzOTkwOltbMzMyNTZdXSw2Mzk5MTpbWzMxNDM1XV0sNjM5OTI6W1szMTUyMF1dLDYzOTkzOltbMzE4OTBdXSw2Mzk5NDpbWzI5Mzc2XV0sNjM5OTU6W1syODgyNV1dLDYzOTk2OltbMzU2NzJdXSw2Mzk5NzpbWzIwMTYwXV0sNjM5OTg6W1szMzU5MF1dLDYzOTk5OltbMjEwNTBdXSwxOTQ4MTY6W1syNzk2Nl1dLDE5NDgxNzpbWzI4MDIzXV0sMTk0ODE4OltbMjc5NjldXSwxOTQ4MTk6W1syODAwOV1dLDE5NDgyMDpbWzI4MDI0XV0sMTk0ODIxOltbMjgwMzddXSwxOTQ4MjI6W1sxNDY3MThdXSwxOTQ4MjM6W1syNzk1Nl1dLDE5NDgyNDpbWzI4MjA3XV0sMTk0ODI1OltbMjgyNzBdXSwxOTQ4MjY6W1sxNTY2N11dLDE5NDgyNzpbWzI4MzYzXV0sMTk0ODI4OltbMjgzNTldXSwxOTQ4Mjk6W1sxNDcxNTNdXSwxOTQ4MzA6W1syODE1M11dLDE5NDgzMTpbWzI4NTI2XV0sMTk0ODMyOltbMTQ3Mjk0XV0sMTk0ODMzOltbMTQ3MzQyXV0sMTk0ODM0OltbMjg2MTRdXSwxOTQ4MzU6W1syODcyOV1dLDE5NDgzNjpbWzI4NzAyXV0sMTk0ODM3OltbMjg2OTldXSwxOTQ4Mzg6W1sxNTc2Nl1dLDE5NDgzOTpbWzI4NzQ2XV0sMTk0ODQwOltbMjg3OTddXSwxOTQ4NDE6W1syODc5MV1dLDE5NDg0MjpbWzI4ODQ1XV0sMTk0ODQzOltbMTMyMzg5XV0sMTk0ODQ0OltbMjg5OTddXSwxOTQ4NDU6W1sxNDgwNjddXSwxOTQ4NDY6W1syOTA4NF1dLDE5NDg0NzpbWzE0ODM5NV1dLDE5NDg0ODpbWzI5MjI0XV0sMTk0ODQ5OltbMjkyMzddXSwxOTQ4NTA6W1syOTI2NF1dLDE5NDg1MTpbWzE0OTAwMF1dLDE5NDg1MjpbWzI5MzEyXV0sMTk0ODUzOltbMjkzMzNdXSwxOTQ4NTQ6W1sxNDkzMDFdXSwxOTQ4NTU6W1sxNDk1MjRdXSwxOTQ4NTY6W1syOTU2Ml1dLDE5NDg1NzpbWzI5NTc5XV0sMTk0ODU4OltbMTYwNDRdXSwxOTQ4NTk6W1syOTYwNV1dLDE5NDg2MDpbWzE2MDU2XV0sMTk0ODYxOltbMTYwNTZdXSwxOTQ4NjI6W1syOTc2N11dLDE5NDg2MzpbWzI5Nzg4XV0sMTk0ODY0OltbMjk4MDldXSwxOTQ4NjU6W1syOTgyOV1dLDE5NDg2NjpbWzI5ODk4XV0sMTk0ODY3OltbMTYxNTVdXSwxOTQ4Njg6W1syOTk4OF1dLDE5NDg2OTpbWzE1MDU4Ml1dLDE5NDg3MDpbWzMwMDE0XV0sMTk0ODcxOltbMTUwNjc0XV0sMTk0ODcyOltbMzAwNjRdXSwxOTQ4NzM6W1sxMzk2NzldXSwxOTQ4NzQ6W1szMDIyNF1dLDE5NDg3NTpbWzE1MTQ1N11dLDE5NDg3NjpbWzE1MTQ4MF1dLDE5NDg3NzpbWzE1MTYyMF1dLDE5NDg3ODpbWzE2MzgwXV0sMTk0ODc5OltbMTYzOTJdXSwxOTQ4ODA6W1szMDQ1Ml1dLDE5NDg4MTpbWzE1MTc5NV1dLDE5NDg4MjpbWzE1MTc5NF1dLDE5NDg4MzpbWzE1MTgzM11dLDE5NDg4NDpbWzE1MTg1OV1dLDE5NDg4NTpbWzMwNDk0XV0sMTk0ODg2OltbMzA0OTVdXSwxOTQ4ODc6W1szMDQ5NV1dLDE5NDg4ODpbWzMwNTM4XV0sMTk0ODg5OltbMTY0NDFdXSwxOTQ4OTA6W1szMDYwM11dLDE5NDg5MTpbWzE2NDU0XV0sMTk0ODkyOltbMTY1MzRdXSwxOTQ4OTM6W1sxNTI2MDVdXSwxOTQ4OTQ6W1szMDc5OF1dLDE5NDg5NTpbWzMwODYwXV0sMTk0ODk2OltbMzA5MjRdXSwxOTQ4OTc6W1sxNjYxMV1dLDE5NDg5ODpbWzE1MzEyNl1dLDE5NDg5OTpbWzMxMDYyXV0sMTk0OTAwOltbMTUzMjQyXV0sMTk0OTAxOltbMTUzMjg1XV0sMTk0OTAyOltbMzExMTldXSwxOTQ5MDM6W1szMTIxMV1dLDE5NDkwNDpbWzE2Njg3XV0sMTk0OTA1OltbMzEyOTZdXSwxOTQ5MDY6W1szMTMwNl1dLDE5NDkwNzpbWzMxMzExXV0sMTk0OTA4OltbMTUzOTgwXV0sMTk0OTA5OltbMTU0Mjc5XV0sMTk0OTEwOltbMTU0Mjc5XV0sMTk0OTExOltbMzE0NzBdXSwxOTQ5MTI6W1sxNjg5OF1dLDE5NDkxMzpbWzE1NDUzOV1dLDE5NDkxNDpbWzMxNjg2XV0sMTk0OTE1OltbMzE2ODldXSwxOTQ5MTY6W1sxNjkzNV1dLDE5NDkxNzpbWzE1NDc1Ml1dLDE5NDkxODpbWzMxOTU0XV0sMTk0OTE5OltbMTcwNTZdXSwxOTQ5MjA6W1szMTk3Nl1dLDE5NDkyMTpbWzMxOTcxXV0sMTk0OTIyOltbMzIwMDBdXSwxOTQ5MjM6W1sxNTU1MjZdXSwxOTQ5MjQ6W1szMjA5OV1dLDE5NDkyNTpbWzE3MTUzXV0sMTk0OTI2OltbMzIxOTldXSwxOTQ5Mjc6W1szMjI1OF1dLDE5NDkyODpbWzMyMzI1XV0sMTk0OTI5OltbMTcyMDRdXSwxOTQ5MzA6W1sxNTYyMDBdXSwxOTQ5MzE6W1sxNTYyMzFdXSwxOTQ5MzI6W1sxNzI0MV1dLDE5NDkzMzpbWzE1NjM3N11dLDE5NDkzNDpbWzMyNjM0XV0sMTk0OTM1OltbMTU2NDc4XV0sMTk0OTM2OltbMzI2NjFdXSwxOTQ5Mzc6W1szMjc2Ml1dLDE5NDkzODpbWzMyNzczXV0sMTk0OTM5OltbMTU2ODkwXV0sMTk0OTQwOltbMTU2OTYzXV0sMTk0OTQxOltbMzI4NjRdXSwxOTQ5NDI6W1sxNTcwOTZdXSwxOTQ5NDM6W1szMjg4MF1dLDE5NDk0NDpbWzE0NDIyM11dLDE5NDk0NTpbWzE3MzY1XV0sMTk0OTQ2OltbMzI5NDZdXSwxOTQ5NDc6W1szMzAyN11dLDE5NDk0ODpbWzE3NDE5XV0sMTk0OTQ5OltbMzMwODZdXSwxOTQ5NTA6W1syMzIyMV1dLDE5NDk1MTpbWzE1NzYwN11dLDE5NDk1MjpbWzE1NzYyMV1dLDE5NDk1MzpbWzE0NDI3NV1dLDE5NDk1NDpbWzE0NDI4NF1dLDE5NDk1NTpbWzMzMjgxXV0sMTk0OTU2OltbMzMyODRdXSwxOTQ5NTc6W1szNjc2Nl1dLDE5NDk1ODpbWzE3NTE1XV0sMTk0OTU5OltbMzM0MjVdXSwxOTQ5NjA6W1szMzQxOV1dLDE5NDk2MTpbWzMzNDM3XV0sMTk0OTYyOltbMjExNzFdXSwxOTQ5NjM6W1szMzQ1N11dLDE5NDk2NDpbWzMzNDU5XV0sMTk0OTY1OltbMzM0NjldXSwxOTQ5NjY6W1szMzUxMF1dLDE5NDk2NzpbWzE1ODUyNF1dLDE5NDk2ODpbWzMzNTA5XV0sMTk0OTY5OltbMzM1NjVdXSwxOTQ5NzA6W1szMzYzNV1dLDE5NDk3MTpbWzMzNzA5XV0sMTk0OTcyOltbMzM1NzFdXSwxOTQ5NzM6W1szMzcyNV1dLDE5NDk3NDpbWzMzNzY3XV0sMTk0OTc1OltbMzM4NzldXSwxOTQ5NzY6W1szMzYxOV1dLDE5NDk3NzpbWzMzNzM4XV0sMTk0OTc4OltbMzM3NDBdXSwxOTQ5Nzk6W1szMzc1Nl1dLDE5NDk4MDpbWzE1ODc3NF1dLDE5NDk4MTpbWzE1OTA4M11dLDE5NDk4MjpbWzE1ODkzM11dLDE5NDk4MzpbWzE3NzA3XV0sMTk0OTg0OltbMzQwMzNdXSwxOTQ5ODU6W1szNDAzNV1dLDE5NDk4NjpbWzM0MDcwXV0sMTk0OTg3OltbMTYwNzE0XV0sMTk0OTg4OltbMzQxNDhdXSwxOTQ5ODk6W1sxNTk1MzJdXSwxOTQ5OTA6W1sxNzc1N11dLDE5NDk5MTpbWzE3NzYxXV0sMTk0OTkyOltbMTU5NjY1XV0sMTk0OTkzOltbMTU5OTU0XV0sMTk0OTk0OltbMTc3NzFdXSwxOTQ5OTU6W1szNDM4NF1dLDE5NDk5NjpbWzM0Mzk2XV0sMTk0OTk3OltbMzQ0MDddXSwxOTQ5OTg6W1szNDQwOV1dLDE5NDk5OTpbWzM0NDczXV0sMTk1MDAwOltbMzQ0NDBdXSwxOTUwMDE6W1szNDU3NF1dLDE5NTAwMjpbWzM0NTMwXV0sMTk1MDAzOltbMzQ2ODFdXSwxOTUwMDQ6W1szNDYwMF1dLDE5NTAwNTpbWzM0NjY3XV0sMTk1MDA2OltbMzQ2OTRdXSwxOTUwMDc6W1sxNzg3OV1dLDE5NTAwODpbWzM0Nzg1XV0sMTk1MDA5OltbMzQ4MTddXSwxOTUwMTA6W1sxNzkxM11dLDE5NTAxMTpbWzM0OTEyXV0sMTk1MDEyOltbMzQ5MTVdXSwxOTUwMTM6W1sxNjEzODNdXSwxOTUwMTQ6W1szNTAzMV1dLDE5NTAxNTpbWzM1MDM4XV0sMTk1MDE2OltbMTc5NzNdXSwxOTUwMTc6W1szNTA2Nl1dLDE5NTAxODpbWzEzNDk5XV0sMTk1MDE5OltbMTYxOTY2XV0sMTk1MDIwOltbMTYyMTUwXV0sMTk1MDIxOltbMTgxMTBdXSwxOTUwMjI6W1sxODExOV1dLDE5NTAyMzpbWzM1NDg4XV0sMTk1MDI0OltbMzU1NjVdXSwxOTUwMjU6W1szNTcyMl1dLDE5NTAyNjpbWzM1OTI1XV0sMTk1MDI3OltbMTYyOTg0XV0sMTk1MDI4OltbMzYwMTFdXSwxOTUwMjk6W1szNjAzM11dLDE5NTAzMDpbWzM2MTIzXV0sMTk1MDMxOltbMzYyMTVdXSwxOTUwMzI6W1sxNjM2MzFdXSwxOTUwMzM6W1sxMzMxMjRdXSwxOTUwMzQ6W1szNjI5OV1dLDE5NTAzNTpbWzM2Mjg0XV0sMTk1MDM2OltbMzYzMzZdXSwxOTUwMzc6W1sxMzMzNDJdXSwxOTUwMzg6W1szNjU2NF1dLDE5NTAzOTpbWzM2NjY0XV0sMTk1MDQwOltbMTY1MzMwXV0sMTk1MDQxOltbMTY1MzU3XV0sMTk1MDQyOltbMzcwMTJdXSwxOTUwNDM6W1szNzEwNV1dLDE5NTA0NDpbWzM3MTM3XV0sMTk1MDQ1OltbMTY1Njc4XV0sMTk1MDQ2OltbMzcxNDddXSwxOTUwNDc6W1szNzQzMl1dLDE5NTA0ODpbWzM3NTkxXV0sMTk1MDQ5OltbMzc1OTJdXSwxOTUwNTA6W1szNzUwMF1dLDE5NTA1MTpbWzM3ODgxXV0sMTk1MDUyOltbMzc5MDldXSwxOTUwNTM6W1sxNjY5MDZdXSwxOTUwNTQ6W1szODI4M11dLDE5NTA1NTpbWzE4ODM3XV0sMTk1MDU2OltbMzgzMjddXSwxOTUwNTc6W1sxNjcyODddXSwxOTUwNTg6W1sxODkxOF1dLDE5NTA1OTpbWzM4NTk1XV0sMTk1MDYwOltbMjM5ODZdXSwxOTUwNjE6W1szODY5MV1dLDE5NTA2MjpbWzE2ODI2MV1dLDE5NTA2MzpbWzE2ODQ3NF1dLDE5NTA2NDpbWzE5MDU0XV0sMTk1MDY1OltbMTkwNjJdXSwxOTUwNjY6W1szODg4MF1dLDE5NTA2NzpbWzE2ODk3MF1dLDE5NTA2ODpbWzE5MTIyXV0sMTk1MDY5OltbMTY5MTEwXV0sMTk1MDcwOltbMzg5MjNdXSwxOTUwNzE6W1szODkyM11dfSwKNjQwMDA6ezY0MDAwOltbMjA5OTldXSw2NDAwMTpbWzI0MjMwXV0sNjQwMDI6W1syNTI5OV1dLDY0MDAzOltbMzE5NThdXSw2NDAwNDpbWzIzNDI5XV0sNjQwMDU6W1syNzkzNF1dLDY0MDA2OltbMjYyOTJdXSw2NDAwNzpbWzM2NjY3XV0sNjQwMDg6W1szNDg5Ml1dLDY0MDA5OltbMzg0NzddXSw2NDAxMDpbWzM1MjExXV0sNjQwMTE6W1syNDI3NV1dLDY0MDEyOltbMjA4MDBdXSw2NDAxMzpbWzIxOTUyXV0sNjQwMTY6W1syMjYxOF1dLDY0MDE4OltbMjYyMjhdXSw2NDAyMTpbWzIwOTU4XV0sNjQwMjI6W1syOTQ4Ml1dLDY0MDIzOltbMzA0MTBdXSw2NDAyNDpbWzMxMDM2XV0sNjQwMjU6W1szMTA3MF1dLDY0MDI2OltbMzEwNzddXSw2NDAyNzpbWzMxMTE5XV0sNjQwMjg6W1szODc0Ml1dLDY0MDI5OltbMzE5MzRdXSw2NDAzMDpbWzMyNzAxXV0sNjQwMzI6W1szNDMyMl1dLDY0MDM0OltbMzU1NzZdXSw2NDAzNzpbWzM2OTIwXV0sNjQwMzg6W1szNzExN11dLDY0MDQyOltbMzkxNTFdXSw2NDA0MzpbWzM5MTY0XV0sNjQwNDQ6W1szOTIwOF1dLDY0MDQ1OltbNDAzNzJdXSw2NDA0NjpbWzM3MDg2XV0sNjQwNDc6W1szODU4M11dLDY0MDQ4OltbMjAzOThdXSw2NDA0OTpbWzIwNzExXV0sNjQwNTA6W1syMDgxM11dLDY0MDUxOltbMjExOTNdXSw2NDA1MjpbWzIxMjIwXV0sNjQwNTM6W1syMTMyOV1dLDY0MDU0OltbMjE5MTddXSw2NDA1NTpbWzIyMDIyXV0sNjQwNTY6W1syMjEyMF1dLDY0MDU3OltbMjI1OTJdXSw2NDA1ODpbWzIyNjk2XV0sNjQwNTk6W1syMzY1Ml1dLDY0MDYwOltbMjM2NjJdXSw2NDA2MTpbWzI0NzI0XV0sNjQwNjI6W1syNDkzNl1dLDY0MDYzOltbMjQ5NzRdXSw2NDA2NDpbWzI1MDc0XV0sNjQwNjU6W1syNTkzNV1dLDY0MDY2OltbMjYwODJdXSw2NDA2NzpbWzI2MjU3XV0sNjQwNjg6W1syNjc1N11dLDY0MDY5OltbMjgwMjNdXSw2NDA3MDpbWzI4MTg2XV0sNjQwNzE6W1syODQ1MF1dLDY0MDcyOltbMjkwMzhdXSw2NDA3MzpbWzI5MjI3XV0sNjQwNzQ6W1syOTczMF1dLDY0MDc1OltbMzA4NjVdXSw2NDA3NjpbWzMxMDM4XV0sNjQwNzc6W1szMTA0OV1dLDY0MDc4OltbMzEwNDhdXSw2NDA3OTpbWzMxMDU2XV0sNjQwODA6W1szMTA2Ml1dLDY0MDgxOltbMzEwNjldXSw2NDA4MjpbWzMxMTE3XV0sNjQwODM6W1szMTExOF1dLDY0MDg0OltbMzEyOTZdXSw2NDA4NTpbWzMxMzYxXV0sNjQwODY6W1szMTY4MF1dLDY0MDg3OltbMzIyNDRdXSw2NDA4ODpbWzMyMjY1XV0sNjQwODk6W1szMjMyMV1dLDY0MDkwOltbMzI2MjZdXSw2NDA5MTpbWzMyNzczXV0sNjQwOTI6W1szMzI2MV1dLDY0MDkzOltbMzM0MDFdXSw2NDA5NDpbWzMzNDAxXV0sNjQwOTU6W1szMzg3OV1dLDY0MDk2OltbMzUwODhdXSw2NDA5NzpbWzM1MjIyXV0sNjQwOTg6W1szNTU4NV1dLDY0MDk5OltbMzU2NDFdXSw2NDEwMDpbWzM2MDUxXV0sNjQxMDE6W1szNjEwNF1dLDY0MTAyOltbMzY3OTBdXSw2NDEwMzpbWzM2OTIwXV0sNjQxMDQ6W1szODYyN11dLDY0MTA1OltbMzg5MTFdXSw2NDEwNjpbWzM4OTcxXV0sNjQxMDc6W1syNDY5M11dLDY0MTA4OltbMTQ4MjA2XV0sNjQxMDk6W1szMzMwNF1dLDY0MTEyOltbMjAwMDZdXSw2NDExMzpbWzIwOTE3XV0sNjQxMTQ6W1syMDg0MF1dLDY0MTE1OltbMjAzNTJdXSw2NDExNjpbWzIwODA1XV0sNjQxMTc6W1syMDg2NF1dLDY0MTE4OltbMjExOTFdXSw2NDExOTpbWzIxMjQyXV0sNjQxMjA6W1syMTkxN11dLDY0MTIxOltbMjE4NDVdXSw2NDEyMjpbWzIxOTEzXV0sNjQxMjM6W1syMTk4Nl1dLDY0MTI0OltbMjI2MThdXSw2NDEyNTpbWzIyNzA3XV0sNjQxMjY6W1syMjg1Ml1dLDY0MTI3OltbMjI4NjhdXSw2NDEyODpbWzIzMTM4XV0sNjQxMjk6W1syMzMzNl1dLDY0MTMwOltbMjQyNzRdXSw2NDEzMTpbWzI0MjgxXV0sNjQxMzI6W1syNDQyNV1dLDY0MTMzOltbMjQ0OTNdXSw2NDEzNDpbWzI0NzkyXV0sNjQxMzU6W1syNDkxMF1dLDY0MTM2OltbMjQ4NDBdXSw2NDEzNzpbWzI0OTc0XV0sNjQxMzg6W1syNDkyOF1dLDY0MTM5OltbMjUwNzRdXSw2NDE0MDpbWzI1MTQwXV0sNjQxNDE6W1syNTU0MF1dLDY0MTQyOltbMjU2MjhdXSw2NDE0MzpbWzI1NjgyXV0sNjQxNDQ6W1syNTk0Ml1dLDY0MTQ1OltbMjYyMjhdXSw2NDE0NjpbWzI2MzkxXV0sNjQxNDc6W1syNjM5NV1dLDY0MTQ4OltbMjY0NTRdXSw2NDE0OTpbWzI3NTEzXV0sNjQxNTA6W1syNzU3OF1dLDY0MTUxOltbMjc5NjldXSw2NDE1MjpbWzI4Mzc5XV0sNjQxNTM6W1syODM2M11dLDY0MTU0OltbMjg0NTBdXSw2NDE1NTpbWzI4NzAyXV0sNjQxNTY6W1syOTAzOF1dLDY0MTU3OltbMzA2MzFdXSw2NDE1ODpbWzI5MjM3XV0sNjQxNTk6W1syOTM1OV1dLDY0MTYwOltbMjk0ODJdXSw2NDE2MTpbWzI5ODA5XV0sNjQxNjI6W1syOTk1OF1dLDY0MTYzOltbMzAwMTFdXSw2NDE2NDpbWzMwMjM3XV0sNjQxNjU6W1szMDIzOV1dLDY0MTY2OltbMzA0MTBdXSw2NDE2NzpbWzMwNDI3XV0sNjQxNjg6W1szMDQ1Ml1dLDY0MTY5OltbMzA1MzhdXSw2NDE3MDpbWzMwNTI4XV0sNjQxNzE6W1szMDkyNF1dLDY0MTcyOltbMzE0MDldXSw2NDE3MzpbWzMxNjgwXV0sNjQxNzQ6W1szMTg2N11dLDY0MTc1OltbMzIwOTFdXSw2NDE3NjpbWzMyMjQ0XV0sNjQxNzc6W1szMjU3NF1dLDY0MTc4OltbMzI3NzNdXSw2NDE3OTpbWzMzNjE4XV0sNjQxODA6W1szMzc3NV1dLDY0MTgxOltbMzQ2ODFdXSw2NDE4MjpbWzM1MTM3XV0sNjQxODM6W1szNTIwNl1dLDY0MTg0OltbMzUyMjJdXSw2NDE4NTpbWzM1NTE5XV0sNjQxODY6W1szNTU3Nl1dLDY0MTg3OltbMzU1MzFdXSw2NDE4ODpbWzM1NTg1XV0sNjQxODk6W1szNTU4Ml1dLDY0MTkwOltbMzU1NjVdXSw2NDE5MTpbWzM1NjQxXV0sNjQxOTI6W1szNTcyMl1dLDY0MTkzOltbMzYxMDRdXSw2NDE5NDpbWzM2NjY0XV0sNjQxOTU6W1szNjk3OF1dLDY0MTk2OltbMzcyNzNdXSw2NDE5NzpbWzM3NDk0XV0sNjQxOTg6W1szODUyNF1dLDY0MTk5OltbMzg2MjddXSw2NDIwMDpbWzM4NzQyXV0sNjQyMDE6W1szODg3NV1dLDY0MjAyOltbMzg5MTFdXSw2NDIwMzpbWzM4OTIzXV0sNjQyMDQ6W1szODk3MV1dLDY0MjA1OltbMzk2OThdXSw2NDIwNjpbWzQwODYwXV0sNjQyMDc6W1sxNDEzODZdXSw2NDIwODpbWzE0MTM4MF1dLDY0MjA5OltbMTQ0MzQxXV0sNjQyMTA6W1sxNTI2MV1dLDY0MjExOltbMTY0MDhdXSw2NDIxMjpbWzE2NDQxXV0sNjQyMTM6W1sxNTIxMzddXSw2NDIxNDpbWzE1NDgzMl1dLDY0MjE1OltbMTYzNTM5XV0sNjQyMTY6W1s0MDc3MV1dLDY0MjE3OltbNDA4NDZdXSwxOTUwNzI6W1szODk1M11dLDE5NTA3MzpbWzE2OTM5OF1dLDE5NTA3NDpbWzM5MTM4XV0sMTk1MDc1OltbMTkyNTFdXSwxOTUwNzY6W1szOTIwOV1dLDE5NTA3NzpbWzM5MzM1XV0sMTk1MDc4OltbMzkzNjJdXSwxOTUwNzk6W1szOTQyMl1dLDE5NTA4MDpbWzE5NDA2XV0sMTk1MDgxOltbMTcwODAwXV0sMTk1MDgyOltbMzk2OThdXSwxOTUwODM6W1s0MDAwMF1dLDE5NTA4NDpbWzQwMTg5XV0sMTk1MDg1OltbMTk2NjJdXSwxOTUwODY6W1sxOTY5M11dLDE5NTA4NzpbWzQwMjk1XV0sMTk1MDg4OltbMTcyMjM4XV0sMTk1MDg5OltbMTk3MDRdXSwxOTUwOTA6W1sxNzIyOTNdXSwxOTUwOTE6W1sxNzI1NThdXSwxOTUwOTI6W1sxNzI2ODldXSwxOTUwOTM6W1s0MDYzNV1dLDE5NTA5NDpbWzE5Nzk4XV0sMTk1MDk1OltbNDA2OTddXSwxOTUwOTY6W1s0MDcwMl1dLDE5NTA5NzpbWzQwNzA5XV0sMTk1MDk4OltbNDA3MTldXSwxOTUwOTk6W1s0MDcyNl1dLDE5NTEwMDpbWzQwNzYzXV0sMTk1MTAxOltbMTczNTY4XV19LAo2NDI1Njp7NjQyNTY6W1sxMDIsMTAyXSwyNTZdLDY0MjU3OltbMTAyLDEwNV0sMjU2XSw2NDI1ODpbWzEwMiwxMDhdLDI1Nl0sNjQyNTk6W1sxMDIsMTAyLDEwNV0sMjU2XSw2NDI2MDpbWzEwMiwxMDIsMTA4XSwyNTZdLDY0MjYxOltbMzgzLDExNl0sMjU2XSw2NDI2MjpbWzExNSwxMTZdLDI1Nl0sNjQyNzU6W1sxMzk2LDEzOThdLDI1Nl0sNjQyNzY6W1sxMzk2LDEzODFdLDI1Nl0sNjQyNzc6W1sxMzk2LDEzODddLDI1Nl0sNjQyNzg6W1sxNDA2LDEzOThdLDI1Nl0sNjQyNzk6W1sxMzk2LDEzODldLDI1Nl0sNjQyODU6W1sxNDk3LDE0NjBdLDUxMl0sNjQyODY6WywyNl0sNjQyODc6W1sxNTIyLDE0NjNdLDUxMl0sNjQyODg6W1sxNTA2XSwyNTZdLDY0Mjg5OltbMTQ4OF0sMjU2XSw2NDI5MDpbWzE0OTFdLDI1Nl0sNjQyOTE6W1sxNDkyXSwyNTZdLDY0MjkyOltbMTQ5OV0sMjU2XSw2NDI5MzpbWzE1MDBdLDI1Nl0sNjQyOTQ6W1sxNTAxXSwyNTZdLDY0Mjk1OltbMTUxMl0sMjU2XSw2NDI5NjpbWzE1MTRdLDI1Nl0sNjQyOTc6W1s0M10sMjU2XSw2NDI5ODpbWzE1MTMsMTQ3M10sNTEyXSw2NDI5OTpbWzE1MTMsMTQ3NF0sNTEyXSw2NDMwMDpbWzY0MzI5LDE0NzNdLDUxMl0sNjQzMDE6W1s2NDMyOSwxNDc0XSw1MTJdLDY0MzAyOltbMTQ4OCwxNDYzXSw1MTJdLDY0MzAzOltbMTQ4OCwxNDY0XSw1MTJdLDY0MzA0OltbMTQ4OCwxNDY4XSw1MTJdLDY0MzA1OltbMTQ4OSwxNDY4XSw1MTJdLDY0MzA2OltbMTQ5MCwxNDY4XSw1MTJdLDY0MzA3OltbMTQ5MSwxNDY4XSw1MTJdLDY0MzA4OltbMTQ5MiwxNDY4XSw1MTJdLDY0MzA5OltbMTQ5MywxNDY4XSw1MTJdLDY0MzEwOltbMTQ5NCwxNDY4XSw1MTJdLDY0MzEyOltbMTQ5NiwxNDY4XSw1MTJdLDY0MzEzOltbMTQ5NywxNDY4XSw1MTJdLDY0MzE0OltbMTQ5OCwxNDY4XSw1MTJdLDY0MzE1OltbMTQ5OSwxNDY4XSw1MTJdLDY0MzE2OltbMTUwMCwxNDY4XSw1MTJdLDY0MzE4OltbMTUwMiwxNDY4XSw1MTJdLDY0MzIwOltbMTUwNCwxNDY4XSw1MTJdLDY0MzIxOltbMTUwNSwxNDY4XSw1MTJdLDY0MzIzOltbMTUwNywxNDY4XSw1MTJdLDY0MzI0OltbMTUwOCwxNDY4XSw1MTJdLDY0MzI2OltbMTUxMCwxNDY4XSw1MTJdLDY0MzI3OltbMTUxMSwxNDY4XSw1MTJdLDY0MzI4OltbMTUxMiwxNDY4XSw1MTJdLDY0MzI5OltbMTUxMywxNDY4XSw1MTJdLDY0MzMwOltbMTUxNCwxNDY4XSw1MTJdLDY0MzMxOltbMTQ5MywxNDY1XSw1MTJdLDY0MzMyOltbMTQ4OSwxNDcxXSw1MTJdLDY0MzMzOltbMTQ5OSwxNDcxXSw1MTJdLDY0MzM0OltbMTUwOCwxNDcxXSw1MTJdLDY0MzM1OltbMTQ4OCwxNTAwXSwyNTZdLDY0MzM2OltbMTY0OV0sMjU2XSw2NDMzNzpbWzE2NDldLDI1Nl0sNjQzMzg6W1sxNjU5XSwyNTZdLDY0MzM5OltbMTY1OV0sMjU2XSw2NDM0MDpbWzE2NTldLDI1Nl0sNjQzNDE6W1sxNjU5XSwyNTZdLDY0MzQyOltbMTY2Ml0sMjU2XSw2NDM0MzpbWzE2NjJdLDI1Nl0sNjQzNDQ6W1sxNjYyXSwyNTZdLDY0MzQ1OltbMTY2Ml0sMjU2XSw2NDM0NjpbWzE2NjRdLDI1Nl0sNjQzNDc6W1sxNjY0XSwyNTZdLDY0MzQ4OltbMTY2NF0sMjU2XSw2NDM0OTpbWzE2NjRdLDI1Nl0sNjQzNTA6W1sxNjU4XSwyNTZdLDY0MzUxOltbMTY1OF0sMjU2XSw2NDM1MjpbWzE2NThdLDI1Nl0sNjQzNTM6W1sxNjU4XSwyNTZdLDY0MzU0OltbMTY2M10sMjU2XSw2NDM1NTpbWzE2NjNdLDI1Nl0sNjQzNTY6W1sxNjYzXSwyNTZdLDY0MzU3OltbMTY2M10sMjU2XSw2NDM1ODpbWzE2NTddLDI1Nl0sNjQzNTk6W1sxNjU3XSwyNTZdLDY0MzYwOltbMTY1N10sMjU2XSw2NDM2MTpbWzE2NTddLDI1Nl0sNjQzNjI6W1sxNzAwXSwyNTZdLDY0MzYzOltbMTcwMF0sMjU2XSw2NDM2NDpbWzE3MDBdLDI1Nl0sNjQzNjU6W1sxNzAwXSwyNTZdLDY0MzY2OltbMTcwMl0sMjU2XSw2NDM2NzpbWzE3MDJdLDI1Nl0sNjQzNjg6W1sxNzAyXSwyNTZdLDY0MzY5OltbMTcwMl0sMjU2XSw2NDM3MDpbWzE2NjhdLDI1Nl0sNjQzNzE6W1sxNjY4XSwyNTZdLDY0MzcyOltbMTY2OF0sMjU2XSw2NDM3MzpbWzE2NjhdLDI1Nl0sNjQzNzQ6W1sxNjY3XSwyNTZdLDY0Mzc1OltbMTY2N10sMjU2XSw2NDM3NjpbWzE2NjddLDI1Nl0sNjQzNzc6W1sxNjY3XSwyNTZdLDY0Mzc4OltbMTY3MF0sMjU2XSw2NDM3OTpbWzE2NzBdLDI1Nl0sNjQzODA6W1sxNjcwXSwyNTZdLDY0MzgxOltbMTY3MF0sMjU2XSw2NDM4MjpbWzE2NzFdLDI1Nl0sNjQzODM6W1sxNjcxXSwyNTZdLDY0Mzg0OltbMTY3MV0sMjU2XSw2NDM4NTpbWzE2NzFdLDI1Nl0sNjQzODY6W1sxNjc3XSwyNTZdLDY0Mzg3OltbMTY3N10sMjU2XSw2NDM4ODpbWzE2NzZdLDI1Nl0sNjQzODk6W1sxNjc2XSwyNTZdLDY0MzkwOltbMTY3OF0sMjU2XSw2NDM5MTpbWzE2NzhdLDI1Nl0sNjQzOTI6W1sxNjcyXSwyNTZdLDY0MzkzOltbMTY3Ml0sMjU2XSw2NDM5NDpbWzE2ODhdLDI1Nl0sNjQzOTU6W1sxNjg4XSwyNTZdLDY0Mzk2OltbMTY4MV0sMjU2XSw2NDM5NzpbWzE2ODFdLDI1Nl0sNjQzOTg6W1sxNzA1XSwyNTZdLDY0Mzk5OltbMTcwNV0sMjU2XSw2NDQwMDpbWzE3MDVdLDI1Nl0sNjQ0MDE6W1sxNzA1XSwyNTZdLDY0NDAyOltbMTcxMV0sMjU2XSw2NDQwMzpbWzE3MTFdLDI1Nl0sNjQ0MDQ6W1sxNzExXSwyNTZdLDY0NDA1OltbMTcxMV0sMjU2XSw2NDQwNjpbWzE3MTVdLDI1Nl0sNjQ0MDc6W1sxNzE1XSwyNTZdLDY0NDA4OltbMTcxNV0sMjU2XSw2NDQwOTpbWzE3MTVdLDI1Nl0sNjQ0MTA6W1sxNzEzXSwyNTZdLDY0NDExOltbMTcxM10sMjU2XSw2NDQxMjpbWzE3MTNdLDI1Nl0sNjQ0MTM6W1sxNzEzXSwyNTZdLDY0NDE0OltbMTcyMl0sMjU2XSw2NDQxNTpbWzE3MjJdLDI1Nl0sNjQ0MTY6W1sxNzIzXSwyNTZdLDY0NDE3OltbMTcyM10sMjU2XSw2NDQxODpbWzE3MjNdLDI1Nl0sNjQ0MTk6W1sxNzIzXSwyNTZdLDY0NDIwOltbMTcyOF0sMjU2XSw2NDQyMTpbWzE3MjhdLDI1Nl0sNjQ0MjI6W1sxNzI5XSwyNTZdLDY0NDIzOltbMTcyOV0sMjU2XSw2NDQyNDpbWzE3MjldLDI1Nl0sNjQ0MjU6W1sxNzI5XSwyNTZdLDY0NDI2OltbMTcyNl0sMjU2XSw2NDQyNzpbWzE3MjZdLDI1Nl0sNjQ0Mjg6W1sxNzI2XSwyNTZdLDY0NDI5OltbMTcyNl0sMjU2XSw2NDQzMDpbWzE3NDZdLDI1Nl0sNjQ0MzE6W1sxNzQ2XSwyNTZdLDY0NDMyOltbMTc0N10sMjU2XSw2NDQzMzpbWzE3NDddLDI1Nl0sNjQ0Njc6W1sxNzA5XSwyNTZdLDY0NDY4OltbMTcwOV0sMjU2XSw2NDQ2OTpbWzE3MDldLDI1Nl0sNjQ0NzA6W1sxNzA5XSwyNTZdLDY0NDcxOltbMTczNV0sMjU2XSw2NDQ3MjpbWzE3MzVdLDI1Nl0sNjQ0NzM6W1sxNzM0XSwyNTZdLDY0NDc0OltbMTczNF0sMjU2XSw2NDQ3NTpbWzE3MzZdLDI1Nl0sNjQ0NzY6W1sxNzM2XSwyNTZdLDY0NDc3OltbMTY1NV0sMjU2XSw2NDQ3ODpbWzE3MzldLDI1Nl0sNjQ0Nzk6W1sxNzM5XSwyNTZdLDY0NDgwOltbMTczM10sMjU2XSw2NDQ4MTpbWzE3MzNdLDI1Nl0sNjQ0ODI6W1sxNzM3XSwyNTZdLDY0NDgzOltbMTczN10sMjU2XSw2NDQ4NDpbWzE3NDRdLDI1Nl0sNjQ0ODU6W1sxNzQ0XSwyNTZdLDY0NDg2OltbMTc0NF0sMjU2XSw2NDQ4NzpbWzE3NDRdLDI1Nl0sNjQ0ODg6W1sxNjA5XSwyNTZdLDY0NDg5OltbMTYwOV0sMjU2XSw2NDQ5MDpbWzE1NzQsMTU3NV0sMjU2XSw2NDQ5MTpbWzE1NzQsMTU3NV0sMjU2XSw2NDQ5MjpbWzE1NzQsMTc0OV0sMjU2XSw2NDQ5MzpbWzE1NzQsMTc0OV0sMjU2XSw2NDQ5NDpbWzE1NzQsMTYwOF0sMjU2XSw2NDQ5NTpbWzE1NzQsMTYwOF0sMjU2XSw2NDQ5NjpbWzE1NzQsMTczNV0sMjU2XSw2NDQ5NzpbWzE1NzQsMTczNV0sMjU2XSw2NDQ5ODpbWzE1NzQsMTczNF0sMjU2XSw2NDQ5OTpbWzE1NzQsMTczNF0sMjU2XSw2NDUwMDpbWzE1NzQsMTczNl0sMjU2XSw2NDUwMTpbWzE1NzQsMTczNl0sMjU2XSw2NDUwMjpbWzE1NzQsMTc0NF0sMjU2XSw2NDUwMzpbWzE1NzQsMTc0NF0sMjU2XSw2NDUwNDpbWzE1NzQsMTc0NF0sMjU2XSw2NDUwNTpbWzE1NzQsMTYwOV0sMjU2XSw2NDUwNjpbWzE1NzQsMTYwOV0sMjU2XSw2NDUwNzpbWzE1NzQsMTYwOV0sMjU2XSw2NDUwODpbWzE3NDBdLDI1Nl0sNjQ1MDk6W1sxNzQwXSwyNTZdLDY0NTEwOltbMTc0MF0sMjU2XSw2NDUxMTpbWzE3NDBdLDI1Nl19LAo2NDUxMjp7NjQ1MTI6W1sxNTc0LDE1ODBdLDI1Nl0sNjQ1MTM6W1sxNTc0LDE1ODFdLDI1Nl0sNjQ1MTQ6W1sxNTc0LDE2MDVdLDI1Nl0sNjQ1MTU6W1sxNTc0LDE2MDldLDI1Nl0sNjQ1MTY6W1sxNTc0LDE2MTBdLDI1Nl0sNjQ1MTc6W1sxNTc2LDE1ODBdLDI1Nl0sNjQ1MTg6W1sxNTc2LDE1ODFdLDI1Nl0sNjQ1MTk6W1sxNTc2LDE1ODJdLDI1Nl0sNjQ1MjA6W1sxNTc2LDE2MDVdLDI1Nl0sNjQ1MjE6W1sxNTc2LDE2MDldLDI1Nl0sNjQ1MjI6W1sxNTc2LDE2MTBdLDI1Nl0sNjQ1MjM6W1sxNTc4LDE1ODBdLDI1Nl0sNjQ1MjQ6W1sxNTc4LDE1ODFdLDI1Nl0sNjQ1MjU6W1sxNTc4LDE1ODJdLDI1Nl0sNjQ1MjY6W1sxNTc4LDE2MDVdLDI1Nl0sNjQ1Mjc6W1sxNTc4LDE2MDldLDI1Nl0sNjQ1Mjg6W1sxNTc4LDE2MTBdLDI1Nl0sNjQ1Mjk6W1sxNTc5LDE1ODBdLDI1Nl0sNjQ1MzA6W1sxNTc5LDE2MDVdLDI1Nl0sNjQ1MzE6W1sxNTc5LDE2MDldLDI1Nl0sNjQ1MzI6W1sxNTc5LDE2MTBdLDI1Nl0sNjQ1MzM6W1sxNTgwLDE1ODFdLDI1Nl0sNjQ1MzQ6W1sxNTgwLDE2MDVdLDI1Nl0sNjQ1MzU6W1sxNTgxLDE1ODBdLDI1Nl0sNjQ1MzY6W1sxNTgxLDE2MDVdLDI1Nl0sNjQ1Mzc6W1sxNTgyLDE1ODBdLDI1Nl0sNjQ1Mzg6W1sxNTgyLDE1ODFdLDI1Nl0sNjQ1Mzk6W1sxNTgyLDE2MDVdLDI1Nl0sNjQ1NDA6W1sxNTg3LDE1ODBdLDI1Nl0sNjQ1NDE6W1sxNTg3LDE1ODFdLDI1Nl0sNjQ1NDI6W1sxNTg3LDE1ODJdLDI1Nl0sNjQ1NDM6W1sxNTg3LDE2MDVdLDI1Nl0sNjQ1NDQ6W1sxNTg5LDE1ODFdLDI1Nl0sNjQ1NDU6W1sxNTg5LDE2MDVdLDI1Nl0sNjQ1NDY6W1sxNTkwLDE1ODBdLDI1Nl0sNjQ1NDc6W1sxNTkwLDE1ODFdLDI1Nl0sNjQ1NDg6W1sxNTkwLDE1ODJdLDI1Nl0sNjQ1NDk6W1sxNTkwLDE2MDVdLDI1Nl0sNjQ1NTA6W1sxNTkxLDE1ODFdLDI1Nl0sNjQ1NTE6W1sxNTkxLDE2MDVdLDI1Nl0sNjQ1NTI6W1sxNTkyLDE2MDVdLDI1Nl0sNjQ1NTM6W1sxNTkzLDE1ODBdLDI1Nl0sNjQ1NTQ6W1sxNTkzLDE2MDVdLDI1Nl0sNjQ1NTU6W1sxNTk0LDE1ODBdLDI1Nl0sNjQ1NTY6W1sxNTk0LDE2MDVdLDI1Nl0sNjQ1NTc6W1sxNjAxLDE1ODBdLDI1Nl0sNjQ1NTg6W1sxNjAxLDE1ODFdLDI1Nl0sNjQ1NTk6W1sxNjAxLDE1ODJdLDI1Nl0sNjQ1NjA6W1sxNjAxLDE2MDVdLDI1Nl0sNjQ1NjE6W1sxNjAxLDE2MDldLDI1Nl0sNjQ1NjI6W1sxNjAxLDE2MTBdLDI1Nl0sNjQ1NjM6W1sxNjAyLDE1ODFdLDI1Nl0sNjQ1NjQ6W1sxNjAyLDE2MDVdLDI1Nl0sNjQ1NjU6W1sxNjAyLDE2MDldLDI1Nl0sNjQ1NjY6W1sxNjAyLDE2MTBdLDI1Nl0sNjQ1Njc6W1sxNjAzLDE1NzVdLDI1Nl0sNjQ1Njg6W1sxNjAzLDE1ODBdLDI1Nl0sNjQ1Njk6W1sxNjAzLDE1ODFdLDI1Nl0sNjQ1NzA6W1sxNjAzLDE1ODJdLDI1Nl0sNjQ1NzE6W1sxNjAzLDE2MDRdLDI1Nl0sNjQ1NzI6W1sxNjAzLDE2MDVdLDI1Nl0sNjQ1NzM6W1sxNjAzLDE2MDldLDI1Nl0sNjQ1NzQ6W1sxNjAzLDE2MTBdLDI1Nl0sNjQ1NzU6W1sxNjA0LDE1ODBdLDI1Nl0sNjQ1NzY6W1sxNjA0LDE1ODFdLDI1Nl0sNjQ1Nzc6W1sxNjA0LDE1ODJdLDI1Nl0sNjQ1Nzg6W1sxNjA0LDE2MDVdLDI1Nl0sNjQ1Nzk6W1sxNjA0LDE2MDldLDI1Nl0sNjQ1ODA6W1sxNjA0LDE2MTBdLDI1Nl0sNjQ1ODE6W1sxNjA1LDE1ODBdLDI1Nl0sNjQ1ODI6W1sxNjA1LDE1ODFdLDI1Nl0sNjQ1ODM6W1sxNjA1LDE1ODJdLDI1Nl0sNjQ1ODQ6W1sxNjA1LDE2MDVdLDI1Nl0sNjQ1ODU6W1sxNjA1LDE2MDldLDI1Nl0sNjQ1ODY6W1sxNjA1LDE2MTBdLDI1Nl0sNjQ1ODc6W1sxNjA2LDE1ODBdLDI1Nl0sNjQ1ODg6W1sxNjA2LDE1ODFdLDI1Nl0sNjQ1ODk6W1sxNjA2LDE1ODJdLDI1Nl0sNjQ1OTA6W1sxNjA2LDE2MDVdLDI1Nl0sNjQ1OTE6W1sxNjA2LDE2MDldLDI1Nl0sNjQ1OTI6W1sxNjA2LDE2MTBdLDI1Nl0sNjQ1OTM6W1sxNjA3LDE1ODBdLDI1Nl0sNjQ1OTQ6W1sxNjA3LDE2MDVdLDI1Nl0sNjQ1OTU6W1sxNjA3LDE2MDldLDI1Nl0sNjQ1OTY6W1sxNjA3LDE2MTBdLDI1Nl0sNjQ1OTc6W1sxNjEwLDE1ODBdLDI1Nl0sNjQ1OTg6W1sxNjEwLDE1ODFdLDI1Nl0sNjQ1OTk6W1sxNjEwLDE1ODJdLDI1Nl0sNjQ2MDA6W1sxNjEwLDE2MDVdLDI1Nl0sNjQ2MDE6W1sxNjEwLDE2MDldLDI1Nl0sNjQ2MDI6W1sxNjEwLDE2MTBdLDI1Nl0sNjQ2MDM6W1sxNTg0LDE2NDhdLDI1Nl0sNjQ2MDQ6W1sxNTg1LDE2NDhdLDI1Nl0sNjQ2MDU6W1sxNjA5LDE2NDhdLDI1Nl0sNjQ2MDY6W1szMiwxNjEyLDE2MTddLDI1Nl0sNjQ2MDc6W1szMiwxNjEzLDE2MTddLDI1Nl0sNjQ2MDg6W1szMiwxNjE0LDE2MTddLDI1Nl0sNjQ2MDk6W1szMiwxNjE1LDE2MTddLDI1Nl0sNjQ2MTA6W1szMiwxNjE2LDE2MTddLDI1Nl0sNjQ2MTE6W1szMiwxNjE3LDE2NDhdLDI1Nl0sNjQ2MTI6W1sxNTc0LDE1ODVdLDI1Nl0sNjQ2MTM6W1sxNTc0LDE1ODZdLDI1Nl0sNjQ2MTQ6W1sxNTc0LDE2MDVdLDI1Nl0sNjQ2MTU6W1sxNTc0LDE2MDZdLDI1Nl0sNjQ2MTY6W1sxNTc0LDE2MDldLDI1Nl0sNjQ2MTc6W1sxNTc0LDE2MTBdLDI1Nl0sNjQ2MTg6W1sxNTc2LDE1ODVdLDI1Nl0sNjQ2MTk6W1sxNTc2LDE1ODZdLDI1Nl0sNjQ2MjA6W1sxNTc2LDE2MDVdLDI1Nl0sNjQ2MjE6W1sxNTc2LDE2MDZdLDI1Nl0sNjQ2MjI6W1sxNTc2LDE2MDldLDI1Nl0sNjQ2MjM6W1sxNTc2LDE2MTBdLDI1Nl0sNjQ2MjQ6W1sxNTc4LDE1ODVdLDI1Nl0sNjQ2MjU6W1sxNTc4LDE1ODZdLDI1Nl0sNjQ2MjY6W1sxNTc4LDE2MDVdLDI1Nl0sNjQ2Mjc6W1sxNTc4LDE2MDZdLDI1Nl0sNjQ2Mjg6W1sxNTc4LDE2MDldLDI1Nl0sNjQ2Mjk6W1sxNTc4LDE2MTBdLDI1Nl0sNjQ2MzA6W1sxNTc5LDE1ODVdLDI1Nl0sNjQ2MzE6W1sxNTc5LDE1ODZdLDI1Nl0sNjQ2MzI6W1sxNTc5LDE2MDVdLDI1Nl0sNjQ2MzM6W1sxNTc5LDE2MDZdLDI1Nl0sNjQ2MzQ6W1sxNTc5LDE2MDldLDI1Nl0sNjQ2MzU6W1sxNTc5LDE2MTBdLDI1Nl0sNjQ2MzY6W1sxNjAxLDE2MDldLDI1Nl0sNjQ2Mzc6W1sxNjAxLDE2MTBdLDI1Nl0sNjQ2Mzg6W1sxNjAyLDE2MDldLDI1Nl0sNjQ2Mzk6W1sxNjAyLDE2MTBdLDI1Nl0sNjQ2NDA6W1sxNjAzLDE1NzVdLDI1Nl0sNjQ2NDE6W1sxNjAzLDE2MDRdLDI1Nl0sNjQ2NDI6W1sxNjAzLDE2MDVdLDI1Nl0sNjQ2NDM6W1sxNjAzLDE2MDldLDI1Nl0sNjQ2NDQ6W1sxNjAzLDE2MTBdLDI1Nl0sNjQ2NDU6W1sxNjA0LDE2MDVdLDI1Nl0sNjQ2NDY6W1sxNjA0LDE2MDldLDI1Nl0sNjQ2NDc6W1sxNjA0LDE2MTBdLDI1Nl0sNjQ2NDg6W1sxNjA1LDE1NzVdLDI1Nl0sNjQ2NDk6W1sxNjA1LDE2MDVdLDI1Nl0sNjQ2NTA6W1sxNjA2LDE1ODVdLDI1Nl0sNjQ2NTE6W1sxNjA2LDE1ODZdLDI1Nl0sNjQ2NTI6W1sxNjA2LDE2MDVdLDI1Nl0sNjQ2NTM6W1sxNjA2LDE2MDZdLDI1Nl0sNjQ2NTQ6W1sxNjA2LDE2MDldLDI1Nl0sNjQ2NTU6W1sxNjA2LDE2MTBdLDI1Nl0sNjQ2NTY6W1sxNjA5LDE2NDhdLDI1Nl0sNjQ2NTc6W1sxNjEwLDE1ODVdLDI1Nl0sNjQ2NTg6W1sxNjEwLDE1ODZdLDI1Nl0sNjQ2NTk6W1sxNjEwLDE2MDVdLDI1Nl0sNjQ2NjA6W1sxNjEwLDE2MDZdLDI1Nl0sNjQ2NjE6W1sxNjEwLDE2MDldLDI1Nl0sNjQ2NjI6W1sxNjEwLDE2MTBdLDI1Nl0sNjQ2NjM6W1sxNTc0LDE1ODBdLDI1Nl0sNjQ2NjQ6W1sxNTc0LDE1ODFdLDI1Nl0sNjQ2NjU6W1sxNTc0LDE1ODJdLDI1Nl0sNjQ2NjY6W1sxNTc0LDE2MDVdLDI1Nl0sNjQ2Njc6W1sxNTc0LDE2MDddLDI1Nl0sNjQ2Njg6W1sxNTc2LDE1ODBdLDI1Nl0sNjQ2Njk6W1sxNTc2LDE1ODFdLDI1Nl0sNjQ2NzA6W1sxNTc2LDE1ODJdLDI1Nl0sNjQ2NzE6W1sxNTc2LDE2MDVdLDI1Nl0sNjQ2NzI6W1sxNTc2LDE2MDddLDI1Nl0sNjQ2NzM6W1sxNTc4LDE1ODBdLDI1Nl0sNjQ2NzQ6W1sxNTc4LDE1ODFdLDI1Nl0sNjQ2NzU6W1sxNTc4LDE1ODJdLDI1Nl0sNjQ2NzY6W1sxNTc4LDE2MDVdLDI1Nl0sNjQ2Nzc6W1sxNTc4LDE2MDddLDI1Nl0sNjQ2Nzg6W1sxNTc5LDE2MDVdLDI1Nl0sNjQ2Nzk6W1sxNTgwLDE1ODFdLDI1Nl0sNjQ2ODA6W1sxNTgwLDE2MDVdLDI1Nl0sNjQ2ODE6W1sxNTgxLDE1ODBdLDI1Nl0sNjQ2ODI6W1sxNTgxLDE2MDVdLDI1Nl0sNjQ2ODM6W1sxNTgyLDE1ODBdLDI1Nl0sNjQ2ODQ6W1sxNTgyLDE2MDVdLDI1Nl0sNjQ2ODU6W1sxNTg3LDE1ODBdLDI1Nl0sNjQ2ODY6W1sxNTg3LDE1ODFdLDI1Nl0sNjQ2ODc6W1sxNTg3LDE1ODJdLDI1Nl0sNjQ2ODg6W1sxNTg3LDE2MDVdLDI1Nl0sNjQ2ODk6W1sxNTg5LDE1ODFdLDI1Nl0sNjQ2OTA6W1sxNTg5LDE1ODJdLDI1Nl0sNjQ2OTE6W1sxNTg5LDE2MDVdLDI1Nl0sNjQ2OTI6W1sxNTkwLDE1ODBdLDI1Nl0sNjQ2OTM6W1sxNTkwLDE1ODFdLDI1Nl0sNjQ2OTQ6W1sxNTkwLDE1ODJdLDI1Nl0sNjQ2OTU6W1sxNTkwLDE2MDVdLDI1Nl0sNjQ2OTY6W1sxNTkxLDE1ODFdLDI1Nl0sNjQ2OTc6W1sxNTkyLDE2MDVdLDI1Nl0sNjQ2OTg6W1sxNTkzLDE1ODBdLDI1Nl0sNjQ2OTk6W1sxNTkzLDE2MDVdLDI1Nl0sNjQ3MDA6W1sxNTk0LDE1ODBdLDI1Nl0sNjQ3MDE6W1sxNTk0LDE2MDVdLDI1Nl0sNjQ3MDI6W1sxNjAxLDE1ODBdLDI1Nl0sNjQ3MDM6W1sxNjAxLDE1ODFdLDI1Nl0sNjQ3MDQ6W1sxNjAxLDE1ODJdLDI1Nl0sNjQ3MDU6W1sxNjAxLDE2MDVdLDI1Nl0sNjQ3MDY6W1sxNjAyLDE1ODFdLDI1Nl0sNjQ3MDc6W1sxNjAyLDE2MDVdLDI1Nl0sNjQ3MDg6W1sxNjAzLDE1ODBdLDI1Nl0sNjQ3MDk6W1sxNjAzLDE1ODFdLDI1Nl0sNjQ3MTA6W1sxNjAzLDE1ODJdLDI1Nl0sNjQ3MTE6W1sxNjAzLDE2MDRdLDI1Nl0sNjQ3MTI6W1sxNjAzLDE2MDVdLDI1Nl0sNjQ3MTM6W1sxNjA0LDE1ODBdLDI1Nl0sNjQ3MTQ6W1sxNjA0LDE1ODFdLDI1Nl0sNjQ3MTU6W1sxNjA0LDE1ODJdLDI1Nl0sNjQ3MTY6W1sxNjA0LDE2MDVdLDI1Nl0sNjQ3MTc6W1sxNjA0LDE2MDddLDI1Nl0sNjQ3MTg6W1sxNjA1LDE1ODBdLDI1Nl0sNjQ3MTk6W1sxNjA1LDE1ODFdLDI1Nl0sNjQ3MjA6W1sxNjA1LDE1ODJdLDI1Nl0sNjQ3MjE6W1sxNjA1LDE2MDVdLDI1Nl0sNjQ3MjI6W1sxNjA2LDE1ODBdLDI1Nl0sNjQ3MjM6W1sxNjA2LDE1ODFdLDI1Nl0sNjQ3MjQ6W1sxNjA2LDE1ODJdLDI1Nl0sNjQ3MjU6W1sxNjA2LDE2MDVdLDI1Nl0sNjQ3MjY6W1sxNjA2LDE2MDddLDI1Nl0sNjQ3Mjc6W1sxNjA3LDE1ODBdLDI1Nl0sNjQ3Mjg6W1sxNjA3LDE2MDVdLDI1Nl0sNjQ3Mjk6W1sxNjA3LDE2NDhdLDI1Nl0sNjQ3MzA6W1sxNjEwLDE1ODBdLDI1Nl0sNjQ3MzE6W1sxNjEwLDE1ODFdLDI1Nl0sNjQ3MzI6W1sxNjEwLDE1ODJdLDI1Nl0sNjQ3MzM6W1sxNjEwLDE2MDVdLDI1Nl0sNjQ3MzQ6W1sxNjEwLDE2MDddLDI1Nl0sNjQ3MzU6W1sxNTc0LDE2MDVdLDI1Nl0sNjQ3MzY6W1sxNTc0LDE2MDddLDI1Nl0sNjQ3Mzc6W1sxNTc2LDE2MDVdLDI1Nl0sNjQ3Mzg6W1sxNTc2LDE2MDddLDI1Nl0sNjQ3Mzk6W1sxNTc4LDE2MDVdLDI1Nl0sNjQ3NDA6W1sxNTc4LDE2MDddLDI1Nl0sNjQ3NDE6W1sxNTc5LDE2MDVdLDI1Nl0sNjQ3NDI6W1sxNTc5LDE2MDddLDI1Nl0sNjQ3NDM6W1sxNTg3LDE2MDVdLDI1Nl0sNjQ3NDQ6W1sxNTg3LDE2MDddLDI1Nl0sNjQ3NDU6W1sxNTg4LDE2MDVdLDI1Nl0sNjQ3NDY6W1sxNTg4LDE2MDddLDI1Nl0sNjQ3NDc6W1sxNjAzLDE2MDRdLDI1Nl0sNjQ3NDg6W1sxNjAzLDE2MDVdLDI1Nl0sNjQ3NDk6W1sxNjA0LDE2MDVdLDI1Nl0sNjQ3NTA6W1sxNjA2LDE2MDVdLDI1Nl0sNjQ3NTE6W1sxNjA2LDE2MDddLDI1Nl0sNjQ3NTI6W1sxNjEwLDE2MDVdLDI1Nl0sNjQ3NTM6W1sxNjEwLDE2MDddLDI1Nl0sNjQ3NTQ6W1sxNjAwLDE2MTQsMTYxN10sMjU2XSw2NDc1NTpbWzE2MDAsMTYxNSwxNjE3XSwyNTZdLDY0NzU2OltbMTYwMCwxNjE2LDE2MTddLDI1Nl0sNjQ3NTc6W1sxNTkxLDE2MDldLDI1Nl0sNjQ3NTg6W1sxNTkxLDE2MTBdLDI1Nl0sNjQ3NTk6W1sxNTkzLDE2MDldLDI1Nl0sNjQ3NjA6W1sxNTkzLDE2MTBdLDI1Nl0sNjQ3NjE6W1sxNTk0LDE2MDldLDI1Nl0sNjQ3NjI6W1sxNTk0LDE2MTBdLDI1Nl0sNjQ3NjM6W1sxNTg3LDE2MDldLDI1Nl0sNjQ3NjQ6W1sxNTg3LDE2MTBdLDI1Nl0sNjQ3NjU6W1sxNTg4LDE2MDldLDI1Nl0sNjQ3NjY6W1sxNTg4LDE2MTBdLDI1Nl0sNjQ3Njc6W1sxNTgxLDE2MDldLDI1Nl19LAo2NDc2ODp7NjQ3Njg6W1sxNTgxLDE2MTBdLDI1Nl0sNjQ3Njk6W1sxNTgwLDE2MDldLDI1Nl0sNjQ3NzA6W1sxNTgwLDE2MTBdLDI1Nl0sNjQ3NzE6W1sxNTgyLDE2MDldLDI1Nl0sNjQ3NzI6W1sxNTgyLDE2MTBdLDI1Nl0sNjQ3NzM6W1sxNTg5LDE2MDldLDI1Nl0sNjQ3NzQ6W1sxNTg5LDE2MTBdLDI1Nl0sNjQ3NzU6W1sxNTkwLDE2MDldLDI1Nl0sNjQ3NzY6W1sxNTkwLDE2MTBdLDI1Nl0sNjQ3Nzc6W1sxNTg4LDE1ODBdLDI1Nl0sNjQ3Nzg6W1sxNTg4LDE1ODFdLDI1Nl0sNjQ3Nzk6W1sxNTg4LDE1ODJdLDI1Nl0sNjQ3ODA6W1sxNTg4LDE2MDVdLDI1Nl0sNjQ3ODE6W1sxNTg4LDE1ODVdLDI1Nl0sNjQ3ODI6W1sxNTg3LDE1ODVdLDI1Nl0sNjQ3ODM6W1sxNTg5LDE1ODVdLDI1Nl0sNjQ3ODQ6W1sxNTkwLDE1ODVdLDI1Nl0sNjQ3ODU6W1sxNTkxLDE2MDldLDI1Nl0sNjQ3ODY6W1sxNTkxLDE2MTBdLDI1Nl0sNjQ3ODc6W1sxNTkzLDE2MDldLDI1Nl0sNjQ3ODg6W1sxNTkzLDE2MTBdLDI1Nl0sNjQ3ODk6W1sxNTk0LDE2MDldLDI1Nl0sNjQ3OTA6W1sxNTk0LDE2MTBdLDI1Nl0sNjQ3OTE6W1sxNTg3LDE2MDldLDI1Nl0sNjQ3OTI6W1sxNTg3LDE2MTBdLDI1Nl0sNjQ3OTM6W1sxNTg4LDE2MDldLDI1Nl0sNjQ3OTQ6W1sxNTg4LDE2MTBdLDI1Nl0sNjQ3OTU6W1sxNTgxLDE2MDldLDI1Nl0sNjQ3OTY6W1sxNTgxLDE2MTBdLDI1Nl0sNjQ3OTc6W1sxNTgwLDE2MDldLDI1Nl0sNjQ3OTg6W1sxNTgwLDE2MTBdLDI1Nl0sNjQ3OTk6W1sxNTgyLDE2MDldLDI1Nl0sNjQ4MDA6W1sxNTgyLDE2MTBdLDI1Nl0sNjQ4MDE6W1sxNTg5LDE2MDldLDI1Nl0sNjQ4MDI6W1sxNTg5LDE2MTBdLDI1Nl0sNjQ4MDM6W1sxNTkwLDE2MDldLDI1Nl0sNjQ4MDQ6W1sxNTkwLDE2MTBdLDI1Nl0sNjQ4MDU6W1sxNTg4LDE1ODBdLDI1Nl0sNjQ4MDY6W1sxNTg4LDE1ODFdLDI1Nl0sNjQ4MDc6W1sxNTg4LDE1ODJdLDI1Nl0sNjQ4MDg6W1sxNTg4LDE2MDVdLDI1Nl0sNjQ4MDk6W1sxNTg4LDE1ODVdLDI1Nl0sNjQ4MTA6W1sxNTg3LDE1ODVdLDI1Nl0sNjQ4MTE6W1sxNTg5LDE1ODVdLDI1Nl0sNjQ4MTI6W1sxNTkwLDE1ODVdLDI1Nl0sNjQ4MTM6W1sxNTg4LDE1ODBdLDI1Nl0sNjQ4MTQ6W1sxNTg4LDE1ODFdLDI1Nl0sNjQ4MTU6W1sxNTg4LDE1ODJdLDI1Nl0sNjQ4MTY6W1sxNTg4LDE2MDVdLDI1Nl0sNjQ4MTc6W1sxNTg3LDE2MDddLDI1Nl0sNjQ4MTg6W1sxNTg4LDE2MDddLDI1Nl0sNjQ4MTk6W1sxNTkxLDE2MDVdLDI1Nl0sNjQ4MjA6W1sxNTg3LDE1ODBdLDI1Nl0sNjQ4MjE6W1sxNTg3LDE1ODFdLDI1Nl0sNjQ4MjI6W1sxNTg3LDE1ODJdLDI1Nl0sNjQ4MjM6W1sxNTg4LDE1ODBdLDI1Nl0sNjQ4MjQ6W1sxNTg4LDE1ODFdLDI1Nl0sNjQ4MjU6W1sxNTg4LDE1ODJdLDI1Nl0sNjQ4MjY6W1sxNTkxLDE2MDVdLDI1Nl0sNjQ4Mjc6W1sxNTkyLDE2MDVdLDI1Nl0sNjQ4Mjg6W1sxNTc1LDE2MTFdLDI1Nl0sNjQ4Mjk6W1sxNTc1LDE2MTFdLDI1Nl0sNjQ4NDg6W1sxNTc4LDE1ODAsMTYwNV0sMjU2XSw2NDg0OTpbWzE1NzgsMTU4MSwxNTgwXSwyNTZdLDY0ODUwOltbMTU3OCwxNTgxLDE1ODBdLDI1Nl0sNjQ4NTE6W1sxNTc4LDE1ODEsMTYwNV0sMjU2XSw2NDg1MjpbWzE1NzgsMTU4MiwxNjA1XSwyNTZdLDY0ODUzOltbMTU3OCwxNjA1LDE1ODBdLDI1Nl0sNjQ4NTQ6W1sxNTc4LDE2MDUsMTU4MV0sMjU2XSw2NDg1NTpbWzE1NzgsMTYwNSwxNTgyXSwyNTZdLDY0ODU2OltbMTU4MCwxNjA1LDE1ODFdLDI1Nl0sNjQ4NTc6W1sxNTgwLDE2MDUsMTU4MV0sMjU2XSw2NDg1ODpbWzE1ODEsMTYwNSwxNjEwXSwyNTZdLDY0ODU5OltbMTU4MSwxNjA1LDE2MDldLDI1Nl0sNjQ4NjA6W1sxNTg3LDE1ODEsMTU4MF0sMjU2XSw2NDg2MTpbWzE1ODcsMTU4MCwxNTgxXSwyNTZdLDY0ODYyOltbMTU4NywxNTgwLDE2MDldLDI1Nl0sNjQ4NjM6W1sxNTg3LDE2MDUsMTU4MV0sMjU2XSw2NDg2NDpbWzE1ODcsMTYwNSwxNTgxXSwyNTZdLDY0ODY1OltbMTU4NywxNjA1LDE1ODBdLDI1Nl0sNjQ4NjY6W1sxNTg3LDE2MDUsMTYwNV0sMjU2XSw2NDg2NzpbWzE1ODcsMTYwNSwxNjA1XSwyNTZdLDY0ODY4OltbMTU4OSwxNTgxLDE1ODFdLDI1Nl0sNjQ4Njk6W1sxNTg5LDE1ODEsMTU4MV0sMjU2XSw2NDg3MDpbWzE1ODksMTYwNSwxNjA1XSwyNTZdLDY0ODcxOltbMTU4OCwxNTgxLDE2MDVdLDI1Nl0sNjQ4NzI6W1sxNTg4LDE1ODEsMTYwNV0sMjU2XSw2NDg3MzpbWzE1ODgsMTU4MCwxNjEwXSwyNTZdLDY0ODc0OltbMTU4OCwxNjA1LDE1ODJdLDI1Nl0sNjQ4NzU6W1sxNTg4LDE2MDUsMTU4Ml0sMjU2XSw2NDg3NjpbWzE1ODgsMTYwNSwxNjA1XSwyNTZdLDY0ODc3OltbMTU4OCwxNjA1LDE2MDVdLDI1Nl0sNjQ4Nzg6W1sxNTkwLDE1ODEsMTYwOV0sMjU2XSw2NDg3OTpbWzE1OTAsMTU4MiwxNjA1XSwyNTZdLDY0ODgwOltbMTU5MCwxNTgyLDE2MDVdLDI1Nl0sNjQ4ODE6W1sxNTkxLDE2MDUsMTU4MV0sMjU2XSw2NDg4MjpbWzE1OTEsMTYwNSwxNTgxXSwyNTZdLDY0ODgzOltbMTU5MSwxNjA1LDE2MDVdLDI1Nl0sNjQ4ODQ6W1sxNTkxLDE2MDUsMTYxMF0sMjU2XSw2NDg4NTpbWzE1OTMsMTU4MCwxNjA1XSwyNTZdLDY0ODg2OltbMTU5MywxNjA1LDE2MDVdLDI1Nl0sNjQ4ODc6W1sxNTkzLDE2MDUsMTYwNV0sMjU2XSw2NDg4ODpbWzE1OTMsMTYwNSwxNjA5XSwyNTZdLDY0ODg5OltbMTU5NCwxNjA1LDE2MDVdLDI1Nl0sNjQ4OTA6W1sxNTk0LDE2MDUsMTYxMF0sMjU2XSw2NDg5MTpbWzE1OTQsMTYwNSwxNjA5XSwyNTZdLDY0ODkyOltbMTYwMSwxNTgyLDE2MDVdLDI1Nl0sNjQ4OTM6W1sxNjAxLDE1ODIsMTYwNV0sMjU2XSw2NDg5NDpbWzE2MDIsMTYwNSwxNTgxXSwyNTZdLDY0ODk1OltbMTYwMiwxNjA1LDE2MDVdLDI1Nl0sNjQ4OTY6W1sxNjA0LDE1ODEsMTYwNV0sMjU2XSw2NDg5NzpbWzE2MDQsMTU4MSwxNjEwXSwyNTZdLDY0ODk4OltbMTYwNCwxNTgxLDE2MDldLDI1Nl0sNjQ4OTk6W1sxNjA0LDE1ODAsMTU4MF0sMjU2XSw2NDkwMDpbWzE2MDQsMTU4MCwxNTgwXSwyNTZdLDY0OTAxOltbMTYwNCwxNTgyLDE2MDVdLDI1Nl0sNjQ5MDI6W1sxNjA0LDE1ODIsMTYwNV0sMjU2XSw2NDkwMzpbWzE2MDQsMTYwNSwxNTgxXSwyNTZdLDY0OTA0OltbMTYwNCwxNjA1LDE1ODFdLDI1Nl0sNjQ5MDU6W1sxNjA1LDE1ODEsMTU4MF0sMjU2XSw2NDkwNjpbWzE2MDUsMTU4MSwxNjA1XSwyNTZdLDY0OTA3OltbMTYwNSwxNTgxLDE2MTBdLDI1Nl0sNjQ5MDg6W1sxNjA1LDE1ODAsMTU4MV0sMjU2XSw2NDkwOTpbWzE2MDUsMTU4MCwxNjA1XSwyNTZdLDY0OTEwOltbMTYwNSwxNTgyLDE1ODBdLDI1Nl0sNjQ5MTE6W1sxNjA1LDE1ODIsMTYwNV0sMjU2XSw2NDkxNDpbWzE2MDUsMTU4MCwxNTgyXSwyNTZdLDY0OTE1OltbMTYwNywxNjA1LDE1ODBdLDI1Nl0sNjQ5MTY6W1sxNjA3LDE2MDUsMTYwNV0sMjU2XSw2NDkxNzpbWzE2MDYsMTU4MSwxNjA1XSwyNTZdLDY0OTE4OltbMTYwNiwxNTgxLDE2MDldLDI1Nl0sNjQ5MTk6W1sxNjA2LDE1ODAsMTYwNV0sMjU2XSw2NDkyMDpbWzE2MDYsMTU4MCwxNjA1XSwyNTZdLDY0OTIxOltbMTYwNiwxNTgwLDE2MDldLDI1Nl0sNjQ5MjI6W1sxNjA2LDE2MDUsMTYxMF0sMjU2XSw2NDkyMzpbWzE2MDYsMTYwNSwxNjA5XSwyNTZdLDY0OTI0OltbMTYxMCwxNjA1LDE2MDVdLDI1Nl0sNjQ5MjU6W1sxNjEwLDE2MDUsMTYwNV0sMjU2XSw2NDkyNjpbWzE1NzYsMTU4MiwxNjEwXSwyNTZdLDY0OTI3OltbMTU3OCwxNTgwLDE2MTBdLDI1Nl0sNjQ5Mjg6W1sxNTc4LDE1ODAsMTYwOV0sMjU2XSw2NDkyOTpbWzE1NzgsMTU4MiwxNjEwXSwyNTZdLDY0OTMwOltbMTU3OCwxNTgyLDE2MDldLDI1Nl0sNjQ5MzE6W1sxNTc4LDE2MDUsMTYxMF0sMjU2XSw2NDkzMjpbWzE1NzgsMTYwNSwxNjA5XSwyNTZdLDY0OTMzOltbMTU4MCwxNjA1LDE2MTBdLDI1Nl0sNjQ5MzQ6W1sxNTgwLDE1ODEsMTYwOV0sMjU2XSw2NDkzNTpbWzE1ODAsMTYwNSwxNjA5XSwyNTZdLDY0OTM2OltbMTU4NywxNTgyLDE2MDldLDI1Nl0sNjQ5Mzc6W1sxNTg5LDE1ODEsMTYxMF0sMjU2XSw2NDkzODpbWzE1ODgsMTU4MSwxNjEwXSwyNTZdLDY0OTM5OltbMTU5MCwxNTgxLDE2MTBdLDI1Nl0sNjQ5NDA6W1sxNjA0LDE1ODAsMTYxMF0sMjU2XSw2NDk0MTpbWzE2MDQsMTYwNSwxNjEwXSwyNTZdLDY0OTQyOltbMTYxMCwxNTgxLDE2MTBdLDI1Nl0sNjQ5NDM6W1sxNjEwLDE1ODAsMTYxMF0sMjU2XSw2NDk0NDpbWzE2MTAsMTYwNSwxNjEwXSwyNTZdLDY0OTQ1OltbMTYwNSwxNjA1LDE2MTBdLDI1Nl0sNjQ5NDY6W1sxNjAyLDE2MDUsMTYxMF0sMjU2XSw2NDk0NzpbWzE2MDYsMTU4MSwxNjEwXSwyNTZdLDY0OTQ4OltbMTYwMiwxNjA1LDE1ODFdLDI1Nl0sNjQ5NDk6W1sxNjA0LDE1ODEsMTYwNV0sMjU2XSw2NDk1MDpbWzE1OTMsMTYwNSwxNjEwXSwyNTZdLDY0OTUxOltbMTYwMywxNjA1LDE2MTBdLDI1Nl0sNjQ5NTI6W1sxNjA2LDE1ODAsMTU4MV0sMjU2XSw2NDk1MzpbWzE2MDUsMTU4MiwxNjEwXSwyNTZdLDY0OTU0OltbMTYwNCwxNTgwLDE2MDVdLDI1Nl0sNjQ5NTU6W1sxNjAzLDE2MDUsMTYwNV0sMjU2XSw2NDk1NjpbWzE2MDQsMTU4MCwxNjA1XSwyNTZdLDY0OTU3OltbMTYwNiwxNTgwLDE1ODFdLDI1Nl0sNjQ5NTg6W1sxNTgwLDE1ODEsMTYxMF0sMjU2XSw2NDk1OTpbWzE1ODEsMTU4MCwxNjEwXSwyNTZdLDY0OTYwOltbMTYwNSwxNTgwLDE2MTBdLDI1Nl0sNjQ5NjE6W1sxNjAxLDE2MDUsMTYxMF0sMjU2XSw2NDk2MjpbWzE1NzYsMTU4MSwxNjEwXSwyNTZdLDY0OTYzOltbMTYwMywxNjA1LDE2MDVdLDI1Nl0sNjQ5NjQ6W1sxNTkzLDE1ODAsMTYwNV0sMjU2XSw2NDk2NTpbWzE1ODksMTYwNSwxNjA1XSwyNTZdLDY0OTY2OltbMTU4NywxNTgyLDE2MTBdLDI1Nl0sNjQ5Njc6W1sxNjA2LDE1ODAsMTYxMF0sMjU2XSw2NTAwODpbWzE1ODksMTYwNCwxNzQ2XSwyNTZdLDY1MDA5OltbMTYwMiwxNjA0LDE3NDZdLDI1Nl0sNjUwMTA6W1sxNTc1LDE2MDQsMTYwNCwxNjA3XSwyNTZdLDY1MDExOltbMTU3NSwxNjAzLDE1NzYsMTU4NV0sMjU2XSw2NTAxMjpbWzE2MDUsMTU4MSwxNjA1LDE1ODNdLDI1Nl0sNjUwMTM6W1sxNTg5LDE2MDQsMTU5MywxNjA1XSwyNTZdLDY1MDE0OltbMTU4NSwxNTg3LDE2MDgsMTYwNF0sMjU2XSw2NTAxNTpbWzE1OTMsMTYwNCwxNjEwLDE2MDddLDI1Nl0sNjUwMTY6W1sxNjA4LDE1ODcsMTYwNCwxNjA1XSwyNTZdLDY1MDE3OltbMTU4OSwxNjA0LDE2MDldLDI1Nl0sNjUwMTg6W1sxNTg5LDE2MDQsMTYwOSwzMiwxNTc1LDE2MDQsMTYwNCwxNjA3LDMyLDE1OTMsMTYwNCwxNjEwLDE2MDcsMzIsMTYwOCwxNTg3LDE2MDQsMTYwNV0sMjU2XSw2NTAxOTpbWzE1ODAsMTYwNCwzMiwxNTgwLDE2MDQsMTU3NSwxNjA0LDE2MDddLDI1Nl0sNjUwMjA6W1sxNTg1LDE3NDAsMTU3NSwxNjA0XSwyNTZdfSwKNjUwMjQ6ezY1MDQwOltbNDRdLDI1Nl0sNjUwNDE6W1sxMjI4OV0sMjU2XSw2NTA0MjpbWzEyMjkwXSwyNTZdLDY1MDQzOltbNThdLDI1Nl0sNjUwNDQ6W1s1OV0sMjU2XSw2NTA0NTpbWzMzXSwyNTZdLDY1MDQ2OltbNjNdLDI1Nl0sNjUwNDc6W1sxMjMxMF0sMjU2XSw2NTA0ODpbWzEyMzExXSwyNTZdLDY1MDQ5OltbODIzMF0sMjU2XSw2NTA1NjpbLDIzMF0sNjUwNTc6WywyMzBdLDY1MDU4OlssMjMwXSw2NTA1OTpbLDIzMF0sNjUwNjA6WywyMzBdLDY1MDYxOlssMjMwXSw2NTA2MjpbLDIzMF0sNjUwNjM6WywyMjBdLDY1MDY0OlssMjIwXSw2NTA2NTpbLDIyMF0sNjUwNjY6WywyMjBdLDY1MDY3OlssMjIwXSw2NTA2ODpbLDIyMF0sNjUwNjk6WywyMjBdLDY1MDcyOltbODIyOV0sMjU2XSw2NTA3MzpbWzgyMTJdLDI1Nl0sNjUwNzQ6W1s4MjExXSwyNTZdLDY1MDc1OltbOTVdLDI1Nl0sNjUwNzY6W1s5NV0sMjU2XSw2NTA3NzpbWzQwXSwyNTZdLDY1MDc4OltbNDFdLDI1Nl0sNjUwNzk6W1sxMjNdLDI1Nl0sNjUwODA6W1sxMjVdLDI1Nl0sNjUwODE6W1sxMjMwOF0sMjU2XSw2NTA4MjpbWzEyMzA5XSwyNTZdLDY1MDgzOltbMTIzMDRdLDI1Nl0sNjUwODQ6W1sxMjMwNV0sMjU2XSw2NTA4NTpbWzEyMjk4XSwyNTZdLDY1MDg2OltbMTIyOTldLDI1Nl0sNjUwODc6W1sxMjI5Nl0sMjU2XSw2NTA4ODpbWzEyMjk3XSwyNTZdLDY1MDg5OltbMTIzMDBdLDI1Nl0sNjUwOTA6W1sxMjMwMV0sMjU2XSw2NTA5MTpbWzEyMzAyXSwyNTZdLDY1MDkyOltbMTIzMDNdLDI1Nl0sNjUwOTU6W1s5MV0sMjU2XSw2NTA5NjpbWzkzXSwyNTZdLDY1MDk3OltbODI1NF0sMjU2XSw2NTA5ODpbWzgyNTRdLDI1Nl0sNjUwOTk6W1s4MjU0XSwyNTZdLDY1MTAwOltbODI1NF0sMjU2XSw2NTEwMTpbWzk1XSwyNTZdLDY1MTAyOltbOTVdLDI1Nl0sNjUxMDM6W1s5NV0sMjU2XSw2NTEwNDpbWzQ0XSwyNTZdLDY1MTA1OltbMTIyODldLDI1Nl0sNjUxMDY6W1s0Nl0sMjU2XSw2NTEwODpbWzU5XSwyNTZdLDY1MTA5OltbNThdLDI1Nl0sNjUxMTA6W1s2M10sMjU2XSw2NTExMTpbWzMzXSwyNTZdLDY1MTEyOltbODIxMl0sMjU2XSw2NTExMzpbWzQwXSwyNTZdLDY1MTE0OltbNDFdLDI1Nl0sNjUxMTU6W1sxMjNdLDI1Nl0sNjUxMTY6W1sxMjVdLDI1Nl0sNjUxMTc6W1sxMjMwOF0sMjU2XSw2NTExODpbWzEyMzA5XSwyNTZdLDY1MTE5OltbMzVdLDI1Nl0sNjUxMjA6W1szOF0sMjU2XSw2NTEyMTpbWzQyXSwyNTZdLDY1MTIyOltbNDNdLDI1Nl0sNjUxMjM6W1s0NV0sMjU2XSw2NTEyNDpbWzYwXSwyNTZdLDY1MTI1OltbNjJdLDI1Nl0sNjUxMjY6W1s2MV0sMjU2XSw2NTEyODpbWzkyXSwyNTZdLDY1MTI5OltbMzZdLDI1Nl0sNjUxMzA6W1szN10sMjU2XSw2NTEzMTpbWzY0XSwyNTZdLDY1MTM2OltbMzIsMTYxMV0sMjU2XSw2NTEzNzpbWzE2MDAsMTYxMV0sMjU2XSw2NTEzODpbWzMyLDE2MTJdLDI1Nl0sNjUxNDA6W1szMiwxNjEzXSwyNTZdLDY1MTQyOltbMzIsMTYxNF0sMjU2XSw2NTE0MzpbWzE2MDAsMTYxNF0sMjU2XSw2NTE0NDpbWzMyLDE2MTVdLDI1Nl0sNjUxNDU6W1sxNjAwLDE2MTVdLDI1Nl0sNjUxNDY6W1szMiwxNjE2XSwyNTZdLDY1MTQ3OltbMTYwMCwxNjE2XSwyNTZdLDY1MTQ4OltbMzIsMTYxN10sMjU2XSw2NTE0OTpbWzE2MDAsMTYxN10sMjU2XSw2NTE1MDpbWzMyLDE2MThdLDI1Nl0sNjUxNTE6W1sxNjAwLDE2MThdLDI1Nl0sNjUxNTI6W1sxNTY5XSwyNTZdLDY1MTUzOltbMTU3MF0sMjU2XSw2NTE1NDpbWzE1NzBdLDI1Nl0sNjUxNTU6W1sxNTcxXSwyNTZdLDY1MTU2OltbMTU3MV0sMjU2XSw2NTE1NzpbWzE1NzJdLDI1Nl0sNjUxNTg6W1sxNTcyXSwyNTZdLDY1MTU5OltbMTU3M10sMjU2XSw2NTE2MDpbWzE1NzNdLDI1Nl0sNjUxNjE6W1sxNTc0XSwyNTZdLDY1MTYyOltbMTU3NF0sMjU2XSw2NTE2MzpbWzE1NzRdLDI1Nl0sNjUxNjQ6W1sxNTc0XSwyNTZdLDY1MTY1OltbMTU3NV0sMjU2XSw2NTE2NjpbWzE1NzVdLDI1Nl0sNjUxNjc6W1sxNTc2XSwyNTZdLDY1MTY4OltbMTU3Nl0sMjU2XSw2NTE2OTpbWzE1NzZdLDI1Nl0sNjUxNzA6W1sxNTc2XSwyNTZdLDY1MTcxOltbMTU3N10sMjU2XSw2NTE3MjpbWzE1NzddLDI1Nl0sNjUxNzM6W1sxNTc4XSwyNTZdLDY1MTc0OltbMTU3OF0sMjU2XSw2NTE3NTpbWzE1NzhdLDI1Nl0sNjUxNzY6W1sxNTc4XSwyNTZdLDY1MTc3OltbMTU3OV0sMjU2XSw2NTE3ODpbWzE1NzldLDI1Nl0sNjUxNzk6W1sxNTc5XSwyNTZdLDY1MTgwOltbMTU3OV0sMjU2XSw2NTE4MTpbWzE1ODBdLDI1Nl0sNjUxODI6W1sxNTgwXSwyNTZdLDY1MTgzOltbMTU4MF0sMjU2XSw2NTE4NDpbWzE1ODBdLDI1Nl0sNjUxODU6W1sxNTgxXSwyNTZdLDY1MTg2OltbMTU4MV0sMjU2XSw2NTE4NzpbWzE1ODFdLDI1Nl0sNjUxODg6W1sxNTgxXSwyNTZdLDY1MTg5OltbMTU4Ml0sMjU2XSw2NTE5MDpbWzE1ODJdLDI1Nl0sNjUxOTE6W1sxNTgyXSwyNTZdLDY1MTkyOltbMTU4Ml0sMjU2XSw2NTE5MzpbWzE1ODNdLDI1Nl0sNjUxOTQ6W1sxNTgzXSwyNTZdLDY1MTk1OltbMTU4NF0sMjU2XSw2NTE5NjpbWzE1ODRdLDI1Nl0sNjUxOTc6W1sxNTg1XSwyNTZdLDY1MTk4OltbMTU4NV0sMjU2XSw2NTE5OTpbWzE1ODZdLDI1Nl0sNjUyMDA6W1sxNTg2XSwyNTZdLDY1MjAxOltbMTU4N10sMjU2XSw2NTIwMjpbWzE1ODddLDI1Nl0sNjUyMDM6W1sxNTg3XSwyNTZdLDY1MjA0OltbMTU4N10sMjU2XSw2NTIwNTpbWzE1ODhdLDI1Nl0sNjUyMDY6W1sxNTg4XSwyNTZdLDY1MjA3OltbMTU4OF0sMjU2XSw2NTIwODpbWzE1ODhdLDI1Nl0sNjUyMDk6W1sxNTg5XSwyNTZdLDY1MjEwOltbMTU4OV0sMjU2XSw2NTIxMTpbWzE1ODldLDI1Nl0sNjUyMTI6W1sxNTg5XSwyNTZdLDY1MjEzOltbMTU5MF0sMjU2XSw2NTIxNDpbWzE1OTBdLDI1Nl0sNjUyMTU6W1sxNTkwXSwyNTZdLDY1MjE2OltbMTU5MF0sMjU2XSw2NTIxNzpbWzE1OTFdLDI1Nl0sNjUyMTg6W1sxNTkxXSwyNTZdLDY1MjE5OltbMTU5MV0sMjU2XSw2NTIyMDpbWzE1OTFdLDI1Nl0sNjUyMjE6W1sxNTkyXSwyNTZdLDY1MjIyOltbMTU5Ml0sMjU2XSw2NTIyMzpbWzE1OTJdLDI1Nl0sNjUyMjQ6W1sxNTkyXSwyNTZdLDY1MjI1OltbMTU5M10sMjU2XSw2NTIyNjpbWzE1OTNdLDI1Nl0sNjUyMjc6W1sxNTkzXSwyNTZdLDY1MjI4OltbMTU5M10sMjU2XSw2NTIyOTpbWzE1OTRdLDI1Nl0sNjUyMzA6W1sxNTk0XSwyNTZdLDY1MjMxOltbMTU5NF0sMjU2XSw2NTIzMjpbWzE1OTRdLDI1Nl0sNjUyMzM6W1sxNjAxXSwyNTZdLDY1MjM0OltbMTYwMV0sMjU2XSw2NTIzNTpbWzE2MDFdLDI1Nl0sNjUyMzY6W1sxNjAxXSwyNTZdLDY1MjM3OltbMTYwMl0sMjU2XSw2NTIzODpbWzE2MDJdLDI1Nl0sNjUyMzk6W1sxNjAyXSwyNTZdLDY1MjQwOltbMTYwMl0sMjU2XSw2NTI0MTpbWzE2MDNdLDI1Nl0sNjUyNDI6W1sxNjAzXSwyNTZdLDY1MjQzOltbMTYwM10sMjU2XSw2NTI0NDpbWzE2MDNdLDI1Nl0sNjUyNDU6W1sxNjA0XSwyNTZdLDY1MjQ2OltbMTYwNF0sMjU2XSw2NTI0NzpbWzE2MDRdLDI1Nl0sNjUyNDg6W1sxNjA0XSwyNTZdLDY1MjQ5OltbMTYwNV0sMjU2XSw2NTI1MDpbWzE2MDVdLDI1Nl0sNjUyNTE6W1sxNjA1XSwyNTZdLDY1MjUyOltbMTYwNV0sMjU2XSw2NTI1MzpbWzE2MDZdLDI1Nl0sNjUyNTQ6W1sxNjA2XSwyNTZdLDY1MjU1OltbMTYwNl0sMjU2XSw2NTI1NjpbWzE2MDZdLDI1Nl0sNjUyNTc6W1sxNjA3XSwyNTZdLDY1MjU4OltbMTYwN10sMjU2XSw2NTI1OTpbWzE2MDddLDI1Nl0sNjUyNjA6W1sxNjA3XSwyNTZdLDY1MjYxOltbMTYwOF0sMjU2XSw2NTI2MjpbWzE2MDhdLDI1Nl0sNjUyNjM6W1sxNjA5XSwyNTZdLDY1MjY0OltbMTYwOV0sMjU2XSw2NTI2NTpbWzE2MTBdLDI1Nl0sNjUyNjY6W1sxNjEwXSwyNTZdLDY1MjY3OltbMTYxMF0sMjU2XSw2NTI2ODpbWzE2MTBdLDI1Nl0sNjUyNjk6W1sxNjA0LDE1NzBdLDI1Nl0sNjUyNzA6W1sxNjA0LDE1NzBdLDI1Nl0sNjUyNzE6W1sxNjA0LDE1NzFdLDI1Nl0sNjUyNzI6W1sxNjA0LDE1NzFdLDI1Nl0sNjUyNzM6W1sxNjA0LDE1NzNdLDI1Nl0sNjUyNzQ6W1sxNjA0LDE1NzNdLDI1Nl0sNjUyNzU6W1sxNjA0LDE1NzVdLDI1Nl0sNjUyNzY6W1sxNjA0LDE1NzVdLDI1Nl19LAo2NTI4MDp7NjUyODE6W1szM10sMjU2XSw2NTI4MjpbWzM0XSwyNTZdLDY1MjgzOltbMzVdLDI1Nl0sNjUyODQ6W1szNl0sMjU2XSw2NTI4NTpbWzM3XSwyNTZdLDY1Mjg2OltbMzhdLDI1Nl0sNjUyODc6W1szOV0sMjU2XSw2NTI4ODpbWzQwXSwyNTZdLDY1Mjg5OltbNDFdLDI1Nl0sNjUyOTA6W1s0Ml0sMjU2XSw2NTI5MTpbWzQzXSwyNTZdLDY1MjkyOltbNDRdLDI1Nl0sNjUyOTM6W1s0NV0sMjU2XSw2NTI5NDpbWzQ2XSwyNTZdLDY1Mjk1OltbNDddLDI1Nl0sNjUyOTY6W1s0OF0sMjU2XSw2NTI5NzpbWzQ5XSwyNTZdLDY1Mjk4OltbNTBdLDI1Nl0sNjUyOTk6W1s1MV0sMjU2XSw2NTMwMDpbWzUyXSwyNTZdLDY1MzAxOltbNTNdLDI1Nl0sNjUzMDI6W1s1NF0sMjU2XSw2NTMwMzpbWzU1XSwyNTZdLDY1MzA0OltbNTZdLDI1Nl0sNjUzMDU6W1s1N10sMjU2XSw2NTMwNjpbWzU4XSwyNTZdLDY1MzA3OltbNTldLDI1Nl0sNjUzMDg6W1s2MF0sMjU2XSw2NTMwOTpbWzYxXSwyNTZdLDY1MzEwOltbNjJdLDI1Nl0sNjUzMTE6W1s2M10sMjU2XSw2NTMxMjpbWzY0XSwyNTZdLDY1MzEzOltbNjVdLDI1Nl0sNjUzMTQ6W1s2Nl0sMjU2XSw2NTMxNTpbWzY3XSwyNTZdLDY1MzE2OltbNjhdLDI1Nl0sNjUzMTc6W1s2OV0sMjU2XSw2NTMxODpbWzcwXSwyNTZdLDY1MzE5OltbNzFdLDI1Nl0sNjUzMjA6W1s3Ml0sMjU2XSw2NTMyMTpbWzczXSwyNTZdLDY1MzIyOltbNzRdLDI1Nl0sNjUzMjM6W1s3NV0sMjU2XSw2NTMyNDpbWzc2XSwyNTZdLDY1MzI1OltbNzddLDI1Nl0sNjUzMjY6W1s3OF0sMjU2XSw2NTMyNzpbWzc5XSwyNTZdLDY1MzI4OltbODBdLDI1Nl0sNjUzMjk6W1s4MV0sMjU2XSw2NTMzMDpbWzgyXSwyNTZdLDY1MzMxOltbODNdLDI1Nl0sNjUzMzI6W1s4NF0sMjU2XSw2NTMzMzpbWzg1XSwyNTZdLDY1MzM0OltbODZdLDI1Nl0sNjUzMzU6W1s4N10sMjU2XSw2NTMzNjpbWzg4XSwyNTZdLDY1MzM3OltbODldLDI1Nl0sNjUzMzg6W1s5MF0sMjU2XSw2NTMzOTpbWzkxXSwyNTZdLDY1MzQwOltbOTJdLDI1Nl0sNjUzNDE6W1s5M10sMjU2XSw2NTM0MjpbWzk0XSwyNTZdLDY1MzQzOltbOTVdLDI1Nl0sNjUzNDQ6W1s5Nl0sMjU2XSw2NTM0NTpbWzk3XSwyNTZdLDY1MzQ2OltbOThdLDI1Nl0sNjUzNDc6W1s5OV0sMjU2XSw2NTM0ODpbWzEwMF0sMjU2XSw2NTM0OTpbWzEwMV0sMjU2XSw2NTM1MDpbWzEwMl0sMjU2XSw2NTM1MTpbWzEwM10sMjU2XSw2NTM1MjpbWzEwNF0sMjU2XSw2NTM1MzpbWzEwNV0sMjU2XSw2NTM1NDpbWzEwNl0sMjU2XSw2NTM1NTpbWzEwN10sMjU2XSw2NTM1NjpbWzEwOF0sMjU2XSw2NTM1NzpbWzEwOV0sMjU2XSw2NTM1ODpbWzExMF0sMjU2XSw2NTM1OTpbWzExMV0sMjU2XSw2NTM2MDpbWzExMl0sMjU2XSw2NTM2MTpbWzExM10sMjU2XSw2NTM2MjpbWzExNF0sMjU2XSw2NTM2MzpbWzExNV0sMjU2XSw2NTM2NDpbWzExNl0sMjU2XSw2NTM2NTpbWzExN10sMjU2XSw2NTM2NjpbWzExOF0sMjU2XSw2NTM2NzpbWzExOV0sMjU2XSw2NTM2ODpbWzEyMF0sMjU2XSw2NTM2OTpbWzEyMV0sMjU2XSw2NTM3MDpbWzEyMl0sMjU2XSw2NTM3MTpbWzEyM10sMjU2XSw2NTM3MjpbWzEyNF0sMjU2XSw2NTM3MzpbWzEyNV0sMjU2XSw2NTM3NDpbWzEyNl0sMjU2XSw2NTM3NTpbWzEwNjI5XSwyNTZdLDY1Mzc2OltbMTA2MzBdLDI1Nl0sNjUzNzc6W1sxMjI5MF0sMjU2XSw2NTM3ODpbWzEyMzAwXSwyNTZdLDY1Mzc5OltbMTIzMDFdLDI1Nl0sNjUzODA6W1sxMjI4OV0sMjU2XSw2NTM4MTpbWzEyNTM5XSwyNTZdLDY1MzgyOltbMTI1MzBdLDI1Nl0sNjUzODM6W1sxMjQ0OV0sMjU2XSw2NTM4NDpbWzEyNDUxXSwyNTZdLDY1Mzg1OltbMTI0NTNdLDI1Nl0sNjUzODY6W1sxMjQ1NV0sMjU2XSw2NTM4NzpbWzEyNDU3XSwyNTZdLDY1Mzg4OltbMTI1MTVdLDI1Nl0sNjUzODk6W1sxMjUxN10sMjU2XSw2NTM5MDpbWzEyNTE5XSwyNTZdLDY1MzkxOltbMTI0ODNdLDI1Nl0sNjUzOTI6W1sxMjU0MF0sMjU2XSw2NTM5MzpbWzEyNDUwXSwyNTZdLDY1Mzk0OltbMTI0NTJdLDI1Nl0sNjUzOTU6W1sxMjQ1NF0sMjU2XSw2NTM5NjpbWzEyNDU2XSwyNTZdLDY1Mzk3OltbMTI0NThdLDI1Nl0sNjUzOTg6W1sxMjQ1OV0sMjU2XSw2NTM5OTpbWzEyNDYxXSwyNTZdLDY1NDAwOltbMTI0NjNdLDI1Nl0sNjU0MDE6W1sxMjQ2NV0sMjU2XSw2NTQwMjpbWzEyNDY3XSwyNTZdLDY1NDAzOltbMTI0NjldLDI1Nl0sNjU0MDQ6W1sxMjQ3MV0sMjU2XSw2NTQwNTpbWzEyNDczXSwyNTZdLDY1NDA2OltbMTI0NzVdLDI1Nl0sNjU0MDc6W1sxMjQ3N10sMjU2XSw2NTQwODpbWzEyNDc5XSwyNTZdLDY1NDA5OltbMTI0ODFdLDI1Nl0sNjU0MTA6W1sxMjQ4NF0sMjU2XSw2NTQxMTpbWzEyNDg2XSwyNTZdLDY1NDEyOltbMTI0ODhdLDI1Nl0sNjU0MTM6W1sxMjQ5MF0sMjU2XSw2NTQxNDpbWzEyNDkxXSwyNTZdLDY1NDE1OltbMTI0OTJdLDI1Nl0sNjU0MTY6W1sxMjQ5M10sMjU2XSw2NTQxNzpbWzEyNDk0XSwyNTZdLDY1NDE4OltbMTI0OTVdLDI1Nl0sNjU0MTk6W1sxMjQ5OF0sMjU2XSw2NTQyMDpbWzEyNTAxXSwyNTZdLDY1NDIxOltbMTI1MDRdLDI1Nl0sNjU0MjI6W1sxMjUwN10sMjU2XSw2NTQyMzpbWzEyNTEwXSwyNTZdLDY1NDI0OltbMTI1MTFdLDI1Nl0sNjU0MjU6W1sxMjUxMl0sMjU2XSw2NTQyNjpbWzEyNTEzXSwyNTZdLDY1NDI3OltbMTI1MTRdLDI1Nl0sNjU0Mjg6W1sxMjUxNl0sMjU2XSw2NTQyOTpbWzEyNTE4XSwyNTZdLDY1NDMwOltbMTI1MjBdLDI1Nl0sNjU0MzE6W1sxMjUyMV0sMjU2XSw2NTQzMjpbWzEyNTIyXSwyNTZdLDY1NDMzOltbMTI1MjNdLDI1Nl0sNjU0MzQ6W1sxMjUyNF0sMjU2XSw2NTQzNTpbWzEyNTI1XSwyNTZdLDY1NDM2OltbMTI1MjddLDI1Nl0sNjU0Mzc6W1sxMjUzMV0sMjU2XSw2NTQzODpbWzEyNDQxXSwyNTZdLDY1NDM5OltbMTI0NDJdLDI1Nl0sNjU0NDA6W1sxMjY0NF0sMjU2XSw2NTQ0MTpbWzEyNTkzXSwyNTZdLDY1NDQyOltbMTI1OTRdLDI1Nl0sNjU0NDM6W1sxMjU5NV0sMjU2XSw2NTQ0NDpbWzEyNTk2XSwyNTZdLDY1NDQ1OltbMTI1OTddLDI1Nl0sNjU0NDY6W1sxMjU5OF0sMjU2XSw2NTQ0NzpbWzEyNTk5XSwyNTZdLDY1NDQ4OltbMTI2MDBdLDI1Nl0sNjU0NDk6W1sxMjYwMV0sMjU2XSw2NTQ1MDpbWzEyNjAyXSwyNTZdLDY1NDUxOltbMTI2MDNdLDI1Nl0sNjU0NTI6W1sxMjYwNF0sMjU2XSw2NTQ1MzpbWzEyNjA1XSwyNTZdLDY1NDU0OltbMTI2MDZdLDI1Nl0sNjU0NTU6W1sxMjYwN10sMjU2XSw2NTQ1NjpbWzEyNjA4XSwyNTZdLDY1NDU3OltbMTI2MDldLDI1Nl0sNjU0NTg6W1sxMjYxMF0sMjU2XSw2NTQ1OTpbWzEyNjExXSwyNTZdLDY1NDYwOltbMTI2MTJdLDI1Nl0sNjU0NjE6W1sxMjYxM10sMjU2XSw2NTQ2MjpbWzEyNjE0XSwyNTZdLDY1NDYzOltbMTI2MTVdLDI1Nl0sNjU0NjQ6W1sxMjYxNl0sMjU2XSw2NTQ2NTpbWzEyNjE3XSwyNTZdLDY1NDY2OltbMTI2MThdLDI1Nl0sNjU0Njc6W1sxMjYxOV0sMjU2XSw2NTQ2ODpbWzEyNjIwXSwyNTZdLDY1NDY5OltbMTI2MjFdLDI1Nl0sNjU0NzA6W1sxMjYyMl0sMjU2XSw2NTQ3NDpbWzEyNjIzXSwyNTZdLDY1NDc1OltbMTI2MjRdLDI1Nl0sNjU0NzY6W1sxMjYyNV0sMjU2XSw2NTQ3NzpbWzEyNjI2XSwyNTZdLDY1NDc4OltbMTI2MjddLDI1Nl0sNjU0Nzk6W1sxMjYyOF0sMjU2XSw2NTQ4MjpbWzEyNjI5XSwyNTZdLDY1NDgzOltbMTI2MzBdLDI1Nl0sNjU0ODQ6W1sxMjYzMV0sMjU2XSw2NTQ4NTpbWzEyNjMyXSwyNTZdLDY1NDg2OltbMTI2MzNdLDI1Nl0sNjU0ODc6W1sxMjYzNF0sMjU2XSw2NTQ5MDpbWzEyNjM1XSwyNTZdLDY1NDkxOltbMTI2MzZdLDI1Nl0sNjU0OTI6W1sxMjYzN10sMjU2XSw2NTQ5MzpbWzEyNjM4XSwyNTZdLDY1NDk0OltbMTI2MzldLDI1Nl0sNjU0OTU6W1sxMjY0MF0sMjU2XSw2NTQ5ODpbWzEyNjQxXSwyNTZdLDY1NDk5OltbMTI2NDJdLDI1Nl0sNjU1MDA6W1sxMjY0M10sMjU2XSw2NTUwNDpbWzE2Ml0sMjU2XSw2NTUwNTpbWzE2M10sMjU2XSw2NTUwNjpbWzE3Ml0sMjU2XSw2NTUwNzpbWzE3NV0sMjU2XSw2NTUwODpbWzE2Nl0sMjU2XSw2NTUwOTpbWzE2NV0sMjU2XSw2NTUxMDpbWzgzNjFdLDI1Nl0sNjU1MTI6W1s5NDc0XSwyNTZdLDY1NTEzOltbODU5Ml0sMjU2XSw2NTUxNDpbWzg1OTNdLDI1Nl0sNjU1MTU6W1s4NTk0XSwyNTZdLDY1NTE2OltbODU5NV0sMjU2XSw2NTUxNzpbWzk2MzJdLDI1Nl0sNjU1MTg6W1s5Njc1XSwyNTZdfQoKfTsKCiAgIC8qKioqKiBNb2R1bGUgdG8gZXhwb3J0ICovCiAgIHZhciB1bm9ybSA9IHsKICAgICAgbmZjOiBuZmMsCiAgICAgIG5mZDogbmZkLAogICAgICBuZmtjOiBuZmtjLAogICAgICBuZmtkOiBuZmtkCiAgIH07CgogICAvKmdsb2JhbHMgbW9kdWxlOnRydWUsZGVmaW5lOnRydWUqLwoKICAgLy8gQ29tbW9uSlMKICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICJvYmplY3QiKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gdW5vcm07CgogICAvLyBBTUQKICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAiZnVuY3Rpb24iICYmIGRlZmluZS5hbWQpIHsKICAgICAgZGVmaW5lKCJ1bm9ybSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgcmV0dXJuIHVub3JtOwogICAgICB9KTsKCiAgIC8vIEdsb2JhbAogICB9IGVsc2UgewogICAgICByb290LnVub3JtID0gdW5vcm07CiAgIH0KCiAgIC8qKioqKiBFeHBvcnQgYXMgc2hpbSBmb3IgU3RyaW5nOjpub3JtYWxpemUgbWV0aG9kICoqKioqLwogICAvKgogICAgICBodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1oYXJtb255OnNwZWNpZmljYXRpb25fZHJhZnRzI25vdmVtYmVyXzhfMjAxM19kcmFmdF9yZXZfMjEKCiAgICAgIDIxLjEuMy4xMiBTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZShmb3JtPSJORkMiKQogICAgICBXaGVuIHRoZSBub3JtYWxpemUgbWV0aG9kIGlzIGNhbGxlZCB3aXRoIG9uZSBhcmd1bWVudCBmb3JtLCB0aGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjoKCiAgICAgIDEuIExldCBPIGJlIENoZWNrT2JqZWN0Q29lcmNpYmxlKHRoaXMgdmFsdWUpLgogICAgICAyLiBMZXQgUyBiZSBUb1N0cmluZyhPKS4KICAgICAgMy4gUmV0dXJuSWZBYnJ1cHQoUykuCiAgICAgIDQuIElmIGZvcm0gaXMgbm90IHByb3ZpZGVkIG9yIHVuZGVmaW5lZCBsZXQgZm9ybSBiZSAiTkZDIi4KICAgICAgNS4gTGV0IGYgYmUgVG9TdHJpbmcoZm9ybSkuCiAgICAgIDYuIFJldHVybklmQWJydXB0KGYpLgogICAgICA3LiBJZiBmIGlzIG5vdCBvbmUgb2YgIk5GQyIsICJORkQiLCAiTkZLQyIsIG9yICJORktEIiwgdGhlbiB0aHJvdyBhIFJhbmdlRXJyb3IgRXhjZXB0aW9uLgogICAgICA4LiBMZXQgbnMgYmUgdGhlIFN0cmluZyB2YWx1ZSBpcyB0aGUgcmVzdWx0IG9mIG5vcm1hbGl6aW5nIFMgaW50byB0aGUgbm9ybWFsaXphdGlvbiBmb3JtIG5hbWVkIGJ5IGYgYXMgc3BlY2lmaWVkIGluIFVuaWNvZGUgU3RhbmRhcmQgQW5uZXggIzE1LCBVbmljb2RlTm9ybWFsaXphdG9pbiBGb3Jtcy4KICAgICAgOS4gUmV0dXJuIG5zLgoKICAgICAgVGhlIGxlbmd0aCBwcm9wZXJ0eSBvZiB0aGUgbm9ybWFsaXplIG1ldGhvZCBpcyAwLgoKICAgICAgKk5PVEUqIFRoZSBub3JtYWxpemUgZnVuY3Rpb24gaXMgaW50ZW50aW9uYWxseSBnZW5lcmljOyBpdCBkb2VzIG5vdCByZXF1aXJlIHRoYXQgaXRzIHRoaXMgdmFsdWUgYmUgYSBTdHJpbmcgb2JqZWN0LiBUaGVyZWZvcmUgaXQgY2FuIGJlIHRyYW5zZmVycmVkIHRvIG90aGVyIGtpbmRzIG9mIG9iamVjdHMgZm9yIHVzZSBhcyBhIG1ldGhvZC4KICAgKi8KICAgIHVub3JtLnNoaW1BcHBsaWVkID0gZmFsc2U7CgogICBpZiAoIVN0cmluZy5wcm90b3R5cGUubm9ybWFsaXplKSB7CiAgICAgIFN0cmluZy5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24oZm9ybSkgewogICAgICAgICB2YXIgc3RyID0gIiIgKyB0aGlzOwogICAgICAgICBmb3JtID0gIGZvcm0gPT09IHVuZGVmaW5lZCA/ICJORkMiIDogZm9ybTsKCiAgICAgICAgIGlmIChmb3JtID09PSAiTkZDIikgewogICAgICAgICAgICByZXR1cm4gdW5vcm0ubmZjKHN0cik7CiAgICAgICAgIH0gZWxzZSBpZiAoZm9ybSA9PT0gIk5GRCIpIHsKICAgICAgICAgICAgcmV0dXJuIHVub3JtLm5mZChzdHIpOwogICAgICAgICB9IGVsc2UgaWYgKGZvcm0gPT09ICJORktDIikgewogICAgICAgICAgICByZXR1cm4gdW5vcm0ubmZrYyhzdHIpOwogICAgICAgICB9IGVsc2UgaWYgKGZvcm0gPT09ICJORktEIikgewogICAgICAgICAgICByZXR1cm4gdW5vcm0ubmZrZChzdHIpOwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBub3JtYWxpemF0aW9uIGZvcm06ICIgKyBmb3JtKTsKICAgICAgICAgfQogICAgICB9OwoKICAgICAgdW5vcm0uc2hpbUFwcGxpZWQgPSB0cnVlOwogICB9Cn0odGhpcykpOwoKfSx7fV0sMTc0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewoKLyoqCiAqIE1vZHVsZSBleHBvcnRzLgogKi8KCm1vZHVsZS5leHBvcnRzID0gZGVwcmVjYXRlOwoKLyoqCiAqIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuCiAqIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuCiAqCiAqIElmIGBsb2NhbFN0b3JhZ2Uubm9EZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLgogKgogKiBJZiBgbG9jYWxTdG9yYWdlLnRocm93RGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnMKICogd2lsbCB0aHJvdyBhbiBFcnJvciB3aGVuIGludm9rZWQuCiAqCiAqIElmIGBsb2NhbFN0b3JhZ2UudHJhY2VEZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBkZXByZWNhdGVkIGZ1bmN0aW9ucwogKiB3aWxsIGludm9rZSBgY29uc29sZS50cmFjZSgpYCBpbnN0ZWFkIG9mIGBjb25zb2xlLmVycm9yKClgLgogKgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIHRoZSBmdW5jdGlvbiB0byBkZXByZWNhdGUKICogQHBhcmFtIHtTdHJpbmd9IG1zZyAtIHRoZSBzdHJpbmcgdG8gcHJpbnQgdG8gdGhlIGNvbnNvbGUgd2hlbiBgZm5gIGlzIGludm9rZWQKICogQHJldHVybnMge0Z1bmN0aW9ufSBhIG5ldyAiZGVwcmVjYXRlZCIgdmVyc2lvbiBvZiBgZm5gCiAqIEBhcGkgcHVibGljCiAqLwoKZnVuY3Rpb24gZGVwcmVjYXRlIChmbiwgbXNnKSB7CiAgaWYgKGNvbmZpZygnbm9EZXByZWNhdGlvbicpKSB7CiAgICByZXR1cm4gZm47CiAgfQoKICB2YXIgd2FybmVkID0gZmFsc2U7CiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHsKICAgIGlmICghd2FybmVkKSB7CiAgICAgIGlmIChjb25maWcoJ3Rocm93RGVwcmVjYXRpb24nKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpOwogICAgICB9IGVsc2UgaWYgKGNvbmZpZygndHJhY2VEZXByZWNhdGlvbicpKSB7CiAgICAgICAgY29uc29sZS50cmFjZShtc2cpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUud2Fybihtc2cpOwogICAgICB9CiAgICAgIHdhcm5lZCA9IHRydWU7CiAgICB9CiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIHJldHVybiBkZXByZWNhdGVkOwp9CgovKioKICogQ2hlY2tzIGBsb2NhbFN0b3JhZ2VgIGZvciBib29sZWFuIHZhbHVlcyBmb3IgdGhlIGdpdmVuIGBuYW1lYC4KICoKICogQHBhcmFtIHtTdHJpbmd9IG5hbWUKICogQHJldHVybnMge0Jvb2xlYW59CiAqIEBhcGkgcHJpdmF0ZQogKi8KCmZ1bmN0aW9uIGNvbmZpZyAobmFtZSkgewogIC8vIGFjY2Vzc2luZyBnbG9iYWwubG9jYWxTdG9yYWdlIGNhbiB0cmlnZ2VyIGEgRE9NRXhjZXB0aW9uIGluIHNhbmRib3hlZCBpZnJhbWVzCiAgdHJ5IHsKICAgIGlmICghZ2xvYmFsLmxvY2FsU3RvcmFnZSkgcmV0dXJuIGZhbHNlOwogIH0gY2F0Y2ggKF8pIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgdmFyIHZhbCA9IGdsb2JhbC5sb2NhbFN0b3JhZ2VbbmFtZV07CiAgaWYgKG51bGwgPT0gdmFsKSByZXR1cm4gZmFsc2U7CiAgcmV0dXJuIFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJzsKfQoKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dLDE3NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNCdWZmZXIoYXJnKSB7CiAgcmV0dXJuIGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JwogICAgJiYgdHlwZW9mIGFyZy5jb3B5ID09PSAnZnVuY3Rpb24nCiAgICAmJiB0eXBlb2YgYXJnLmZpbGwgPT09ICdmdW5jdGlvbicKICAgICYmIHR5cGVvZiBhcmcucmVhZFVJbnQ4ID09PSAnZnVuY3Rpb24nOwp9Cn0se31dLDE3NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAocHJvY2VzcyxnbG9iYWwpewovLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQovLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAovLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwovLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgovLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgp2YXIgZm9ybWF0UmVnRXhwID0gLyVbc2RqJV0vZzsKZXhwb3J0cy5mb3JtYXQgPSBmdW5jdGlvbihmKSB7CiAgaWYgKCFpc1N0cmluZyhmKSkgewogICAgdmFyIG9iamVjdHMgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpOwogICAgfQogICAgcmV0dXJuIG9iamVjdHMuam9pbignICcpOwogIH0KCiAgdmFyIGkgPSAxOwogIHZhciBhcmdzID0gYXJndW1lbnRzOwogIHZhciBsZW4gPSBhcmdzLmxlbmd0aDsKICB2YXIgc3RyID0gU3RyaW5nKGYpLnJlcGxhY2UoZm9ybWF0UmVnRXhwLCBmdW5jdGlvbih4KSB7CiAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJzsKICAgIGlmIChpID49IGxlbikgcmV0dXJuIHg7CiAgICBzd2l0Y2ggKHgpIHsKICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7CiAgICAgIGNhc2UgJyVkJzogcmV0dXJuIE51bWJlcihhcmdzW2krK10pOwogICAgICBjYXNlICclaic6CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmdzW2krK10pOwogICAgICAgIH0gY2F0Y2ggKF8pIHsKICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7CiAgICAgICAgfQogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiB4OwogICAgfQogIH0pOwogIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7CiAgICBpZiAoaXNOdWxsKHgpIHx8ICFpc09iamVjdCh4KSkgewogICAgICBzdHIgKz0gJyAnICsgeDsKICAgIH0gZWxzZSB7CiAgICAgIHN0ciArPSAnICcgKyBpbnNwZWN0KHgpOwogICAgfQogIH0KICByZXR1cm4gc3RyOwp9OwoKCi8vIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuCi8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuCi8vIElmIC0tbm8tZGVwcmVjYXRpb24gaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuCmV4cG9ydHMuZGVwcmVjYXRlID0gZnVuY3Rpb24oZm4sIG1zZykgewogIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuCiAgaWYgKGlzVW5kZWZpbmVkKGdsb2JhbC5wcm9jZXNzKSkgewogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfQoKICBpZiAocHJvY2Vzcy5ub0RlcHJlY2F0aW9uID09PSB0cnVlKSB7CiAgICByZXR1cm4gZm47CiAgfQoKICB2YXIgd2FybmVkID0gZmFsc2U7CiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHsKICAgIGlmICghd2FybmVkKSB7CiAgICAgIGlmIChwcm9jZXNzLnRocm93RGVwcmVjYXRpb24pIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTsKICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pIHsKICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5lcnJvcihtc2cpOwogICAgICB9CiAgICAgIHdhcm5lZCA9IHRydWU7CiAgICB9CiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIHJldHVybiBkZXByZWNhdGVkOwp9OwoKCnZhciBkZWJ1Z3MgPSB7fTsKdmFyIGRlYnVnRW52aXJvbjsKZXhwb3J0cy5kZWJ1Z2xvZyA9IGZ1bmN0aW9uKHNldCkgewogIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKQogICAgZGVidWdFbnZpcm9uID0gcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyB8fCAnJzsKICBzZXQgPSBzZXQudG9VcHBlckNhc2UoKTsKICBpZiAoIWRlYnVnc1tzZXRdKSB7CiAgICBpZiAobmV3IFJlZ0V4cCgnXFxiJyArIHNldCArICdcXGInLCAnaScpLnRlc3QoZGVidWdFbnZpcm9uKSkgewogICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7CiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG1zZyA9IGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7CiAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307CiAgICB9CiAgfQogIHJldHVybiBkZWJ1Z3Nbc2V0XTsKfTsKCgovKioKICogRWNob3MgdGhlIHZhbHVlIG9mIGEgdmFsdWUuIFRyeXMgdG8gcHJpbnQgdGhlIHZhbHVlIG91dAogKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy4KICoKICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHByaW50IG91dC4KICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC4KICovCi8qIGxlZ2FjeTogb2JqLCBzaG93SGlkZGVuLCBkZXB0aCwgY29sb3JzKi8KZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHsKICAvLyBkZWZhdWx0IG9wdGlvbnMKICB2YXIgY3R4ID0gewogICAgc2VlbjogW10sCiAgICBzdHlsaXplOiBzdHlsaXplTm9Db2xvcgogIH07CiAgLy8gbGVnYWN5Li4uCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMykgY3R4LmRlcHRoID0gYXJndW1lbnRzWzJdOwogIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIGN0eC5jb2xvcnMgPSBhcmd1bWVudHNbM107CiAgaWYgKGlzQm9vbGVhbihvcHRzKSkgewogICAgLy8gbGVnYWN5Li4uCiAgICBjdHguc2hvd0hpZGRlbiA9IG9wdHM7CiAgfSBlbHNlIGlmIChvcHRzKSB7CiAgICAvLyBnb3QgYW4gIm9wdGlvbnMiIG9iamVjdAogICAgZXhwb3J0cy5fZXh0ZW5kKGN0eCwgb3B0cyk7CiAgfQogIC8vIHNldCBkZWZhdWx0IG9wdGlvbnMKICBpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlOwogIGlmIChpc1VuZGVmaW5lZChjdHguZGVwdGgpKSBjdHguZGVwdGggPSAyOwogIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlOwogIGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTsKICBpZiAoY3R4LmNvbG9ycykgY3R4LnN0eWxpemUgPSBzdHlsaXplV2l0aENvbG9yOwogIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTsKfQpleHBvcnRzLmluc3BlY3QgPSBpbnNwZWN0OwoKCi8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQU5TSV9lc2NhcGVfY29kZSNncmFwaGljcwppbnNwZWN0LmNvbG9ycyA9IHsKICAnYm9sZCcgOiBbMSwgMjJdLAogICdpdGFsaWMnIDogWzMsIDIzXSwKICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sCiAgJ2ludmVyc2UnIDogWzcsIDI3XSwKICAnd2hpdGUnIDogWzM3LCAzOV0sCiAgJ2dyZXknIDogWzkwLCAzOV0sCiAgJ2JsYWNrJyA6IFszMCwgMzldLAogICdibHVlJyA6IFszNCwgMzldLAogICdjeWFuJyA6IFszNiwgMzldLAogICdncmVlbicgOiBbMzIsIDM5XSwKICAnbWFnZW50YScgOiBbMzUsIDM5XSwKICAncmVkJyA6IFszMSwgMzldLAogICd5ZWxsb3cnIDogWzMzLCAzOV0KfTsKCi8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZQppbnNwZWN0LnN0eWxlcyA9IHsKICAnc3BlY2lhbCc6ICdjeWFuJywKICAnbnVtYmVyJzogJ3llbGxvdycsCiAgJ2Jvb2xlYW4nOiAneWVsbG93JywKICAndW5kZWZpbmVkJzogJ2dyZXknLAogICdudWxsJzogJ2JvbGQnLAogICdzdHJpbmcnOiAnZ3JlZW4nLAogICdkYXRlJzogJ21hZ2VudGEnLAogIC8vICJuYW1lIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZwogICdyZWdleHAnOiAncmVkJwp9OwoKCmZ1bmN0aW9uIHN0eWxpemVXaXRoQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHsKICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdOwoKICBpZiAoc3R5bGUpIHsKICAgIHJldHVybiAnXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgKwogICAgICAgICAgICdcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJzsKICB9IGVsc2UgewogICAgcmV0dXJuIHN0cjsKICB9Cn0KCgpmdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkgewogIHJldHVybiBzdHI7Cn0KCgpmdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkgewogIHZhciBoYXNoID0ge307CgogIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHsKICAgIGhhc2hbdmFsXSA9IHRydWU7CiAgfSk7CgogIHJldHVybiBoYXNoOwp9CgoKZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7CiAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLgogIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdAogIGlmIChjdHguY3VzdG9tSW5zcGVjdCAmJgogICAgICB2YWx1ZSAmJgogICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmCiAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbAogICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiYKICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suCiAgICAgICEodmFsdWUuY29uc3RydWN0b3IgJiYgdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlID09PSB2YWx1ZSkpIHsKICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTsKICAgIGlmICghaXNTdHJpbmcocmV0KSkgewogICAgICByZXQgPSBmb3JtYXRWYWx1ZShjdHgsIHJldCwgcmVjdXJzZVRpbWVzKTsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfQoKICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllcwogIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7CiAgaWYgKHByaW1pdGl2ZSkgewogICAgcmV0dXJuIHByaW1pdGl2ZTsKICB9CgogIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC4KICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTsKICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTsKCiAgaWYgKGN0eC5zaG93SGlkZGVuKSB7CiAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpOwogIH0KCiAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZQogIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4CiAgaWYgKGlzRXJyb3IodmFsdWUpCiAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkgewogICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTsKICB9CgogIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC4KICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHsKICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkgewogICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnOwogICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tGdW5jdGlvbicgKyBuYW1lICsgJ10nLCAnc3BlY2lhbCcpOwogICAgfQogICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkgewogICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpOwogICAgfQogICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHsKICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAnZGF0ZScpOwogICAgfQogICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7CiAgICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7CiAgICB9CiAgfQoKICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddOwoKICAvLyBNYWtlIEFycmF5IHNheSB0aGF0IHRoZXkgYXJlIEFycmF5CiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7CiAgICBhcnJheSA9IHRydWU7CiAgICBicmFjZXMgPSBbJ1snLCAnXSddOwogIH0KCiAgLy8gTWFrZSBmdW5jdGlvbnMgc2F5IHRoYXQgdGhleSBhcmUgZnVuY3Rpb25zCiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7CiAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnOwogICAgYmFzZSA9ICcgW0Z1bmN0aW9uJyArIG4gKyAnXSc7CiAgfQoKICAvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwcwogIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHsKICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpOwogIH0KCiAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlCiAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHsKICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTsKICB9CgogIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3IKICBpZiAoaXNFcnJvcih2YWx1ZSkpIHsKICAgIGJhc2UgPSAnICcgKyBmb3JtYXRFcnJvcih2YWx1ZSk7CiAgfQoKICBpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHsKICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdOwogIH0KCiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHsKICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHsKICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpOwogICAgfQogIH0KCiAgY3R4LnNlZW4ucHVzaCh2YWx1ZSk7CgogIHZhciBvdXRwdXQ7CiAgaWYgKGFycmF5KSB7CiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTsKICB9IGVsc2UgewogICAgb3V0cHV0ID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KSB7CiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTsKICAgIH0pOwogIH0KCiAgY3R4LnNlZW4ucG9wKCk7CgogIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7Cn0KCgpmdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkgewogIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpCiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTsKICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7CiAgICB2YXIgc2ltcGxlID0gJ1wnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eInwiJC9nLCAnJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgIlxcJyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCIvZywgJyInKSArICdcJyc7CiAgICByZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCAnc3RyaW5nJyk7CiAgfQogIGlmIChpc051bWJlcih2YWx1ZSkpCiAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ251bWJlcicpOwogIGlmIChpc0Jvb2xlYW4odmFsdWUpKQogICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7CiAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzICJvYmplY3QiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS4KICBpZiAoaXNOdWxsKHZhbHVlKSkKICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7Cn0KCgpmdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkgewogIHJldHVybiAnWycgKyBFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgKyAnXSc7Cn0KCgpmdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7CiAgdmFyIG91dHB1dCA9IFtdOwogIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgKytpKSB7CiAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHsKICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywKICAgICAgICAgIFN0cmluZyhpKSwgdHJ1ZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3V0cHV0LnB1c2goJycpOwogICAgfQogIH0KICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICBpZiAoIWtleS5tYXRjaCgvXlxkKyQvKSkgewogICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLAogICAgICAgICAga2V5LCB0cnVlKSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIG91dHB1dDsKfQoKCmZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHsKICB2YXIgbmFtZSwgc3RyLCBkZXNjOwogIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpIHx8IHsgdmFsdWU6IHZhbHVlW2tleV0gfTsKICBpZiAoZGVzYy5nZXQpIHsKICAgIGlmIChkZXNjLnNldCkgewogICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlci9TZXR0ZXJdJywgJ3NwZWNpYWwnKTsKICAgIH0gZWxzZSB7CiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7CiAgICB9CiAgfSBlbHNlIHsKICAgIGlmIChkZXNjLnNldCkgewogICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpOwogICAgfQogIH0KICBpZiAoIWhhc093blByb3BlcnR5KHZpc2libGVLZXlzLCBrZXkpKSB7CiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nOwogIH0KICBpZiAoIXN0cikgewogICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7CiAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkgewogICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgbnVsbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTsKICAgICAgfQogICAgICBpZiAoc3RyLmluZGV4T2YoJ1xuJykgPiAtMSkgewogICAgICAgIGlmIChhcnJheSkgewogICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgICAgIHJldHVybiAnICAnICsgbGluZTsKICAgICAgICAgIH0pLmpvaW4oJ1xuJykuc3Vic3RyKDIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdHIgPSAnXG4nICsgc3RyLnNwbGl0KCdcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7CiAgICAgICAgICB9KS5qb2luKCdcbicpOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpOwogICAgfQogIH0KICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHsKICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cZCskLykpIHsKICAgICAgcmV0dXJuIHN0cjsKICAgIH0KICAgIG5hbWUgPSBKU09OLnN0cmluZ2lmeSgnJyArIGtleSk7CiAgICBpZiAobmFtZS5tYXRjaCgvXiIoW2EtekEtWl9dW2EtekEtWl8wLTldKikiJC8pKSB7CiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpOwogICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTsKICAgIH0gZWxzZSB7CiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgIlxcJyIpCiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcIi9nLCAnIicpCiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheInwiJCkvZywgIiciKTsKICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTsKICAgIH0KICB9CgogIHJldHVybiBuYW1lICsgJzogJyArIHN0cjsKfQoKCmZ1bmN0aW9uIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKSB7CiAgdmFyIG51bUxpbmVzRXN0ID0gMDsKICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHsKICAgIG51bUxpbmVzRXN0Kys7CiAgICBpZiAoY3VyLmluZGV4T2YoJ1xuJykgPj0gMCkgbnVtTGluZXNFc3QrKzsKICAgIHJldHVybiBwcmV2ICsgY3VyLnJlcGxhY2UoL1x1MDAxYlxbXGRcZD9tL2csICcnKS5sZW5ndGggKyAxOwogIH0sIDApOwoKICBpZiAobGVuZ3RoID4gNjApIHsKICAgIHJldHVybiBicmFjZXNbMF0gKwogICAgICAgICAgIChiYXNlID09PSAnJyA/ICcnIDogYmFzZSArICdcbiAnKSArCiAgICAgICAgICAgJyAnICsKICAgICAgICAgICBvdXRwdXQuam9pbignLFxuICAnKSArCiAgICAgICAgICAgJyAnICsKICAgICAgICAgICBicmFjZXNbMV07CiAgfQoKICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArICcgJyArIG91dHB1dC5qb2luKCcsICcpICsgJyAnICsgYnJhY2VzWzFdOwp9CgoKLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgCi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLgpmdW5jdGlvbiBpc0FycmF5KGFyKSB7CiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpOwp9CmV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7CgpmdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJzsKfQpleHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjsKCmZ1bmN0aW9uIGlzTnVsbChhcmcpIHsKICByZXR1cm4gYXJnID09PSBudWxsOwp9CmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsOwoKZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PSBudWxsOwp9CmV4cG9ydHMuaXNOdWxsT3JVbmRlZmluZWQgPSBpc051bGxPclVuZGVmaW5lZDsKCmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJzsKfQpleHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7CgpmdW5jdGlvbiBpc1N0cmluZyhhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7Cn0KZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nOwoKZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnOwp9CmV4cG9ydHMuaXNTeW1ib2wgPSBpc1N5bWJvbDsKCmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykgewogIHJldHVybiBhcmcgPT09IHZvaWQgMDsKfQpleHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7CgpmdW5jdGlvbiBpc1JlZ0V4cChyZSkgewogIHJldHVybiBpc09iamVjdChyZSkgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJzsKfQpleHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7CgpmdW5jdGlvbiBpc09iamVjdChhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsOwp9CmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDsKCmZ1bmN0aW9uIGlzRGF0ZShkKSB7CiAgcmV0dXJuIGlzT2JqZWN0KGQpICYmIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7Cn0KZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7CgpmdW5jdGlvbiBpc0Vycm9yKGUpIHsKICByZXR1cm4gaXNPYmplY3QoZSkgJiYKICAgICAgKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7Cn0KZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjsKCmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7Cn0KZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjsKCmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykgewogIHJldHVybiBhcmcgPT09IG51bGwgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sCiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnOwp9CmV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTsKCmV4cG9ydHMuaXNCdWZmZXIgPSByZXF1aXJlKCcuL3N1cHBvcnQvaXNCdWZmZXInKTsKCmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHsKICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pOwp9CgoKZnVuY3Rpb24gcGFkKG4pIHsKICByZXR1cm4gbiA8IDEwID8gJzAnICsgbi50b1N0cmluZygxMCkgOiBuLnRvU3RyaW5nKDEwKTsKfQoKCnZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJywKICAgICAgICAgICAgICAnT2N0JywgJ05vdicsICdEZWMnXTsKCi8vIDI2IEZlYiAxNjoxOTozNApmdW5jdGlvbiB0aW1lc3RhbXAoKSB7CiAgdmFyIGQgPSBuZXcgRGF0ZSgpOwogIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLAogICAgICAgICAgICAgIHBhZChkLmdldE1pbnV0ZXMoKSksCiAgICAgICAgICAgICAgcGFkKGQuZ2V0U2Vjb25kcygpKV0uam9pbignOicpOwogIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7Cn0KCgovLyBsb2cgaXMganVzdCBhIHRoaW4gd3JhcHBlciB0byBjb25zb2xlLmxvZyB0aGF0IHByZXBlbmRzIGEgdGltZXN0YW1wCmV4cG9ydHMubG9nID0gZnVuY3Rpb24oKSB7CiAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7Cn07CgoKLyoqCiAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlci4KICoKICogVGhlIEZ1bmN0aW9uLnByb3RvdHlwZS5pbmhlcml0cyBmcm9tIGxhbmcuanMgcmV3cml0dGVuIGFzIGEgc3RhbmRhbG9uZQogKiBmdW5jdGlvbiAobm90IG9uIEZ1bmN0aW9uLnByb3RvdHlwZSkuIE5PVEU6IElmIHRoaXMgZmlsZSBpcyB0byBiZSBsb2FkZWQKICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmUKICogZnVuY3Rpb25zIGFzIHByb3RvdHlwZSBzZXR1cCB1c2luZyBub3JtYWwgSmF2YVNjcmlwdCBkb2VzIG5vdCB3b3JrIGFzCiAqIGV4cGVjdGVkIGR1cmluZyBib290c3RyYXBwaW5nIChzZWUgbWlycm9yLmpzIGluIHIxMTQ5MDMpLgogKgogKiBAcGFyYW0ge2Z1bmN0aW9ufSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGluaGVyaXQgdGhlCiAqICAgICBwcm90b3R5cGUuCiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLgogKi8KZXhwb3J0cy5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CgpleHBvcnRzLl9leHRlbmQgPSBmdW5jdGlvbihvcmlnaW4sIGFkZCkgewogIC8vIERvbid0IGRvIGFueXRoaW5nIGlmIGFkZCBpc24ndCBhbiBvYmplY3QKICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjsKCiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhZGQpOwogIHZhciBpID0ga2V5cy5sZW5ndGg7CiAgd2hpbGUgKGktLSkgewogICAgb3JpZ2luW2tleXNbaV1dID0gYWRkW2tleXNbaV1dOwogIH0KICByZXR1cm4gb3JpZ2luOwp9OwoKZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7CiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOwp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHsiLi9zdXBwb3J0L2lzQnVmZmVyIjoxNzUsIl9wcm9jZXNzIjoxMzksImluaGVyaXRzIjoxMjh9XSwxNzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaW5kZXhPZiA9IHJlcXVpcmUoJ2luZGV4b2YnKTsKCnZhciBPYmplY3Rfa2V5cyA9IGZ1bmN0aW9uIChvYmopIHsKICAgIGlmIChPYmplY3Qua2V5cykgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikKICAgIGVsc2UgewogICAgICAgIHZhciByZXMgPSBbXTsKICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSByZXMucHVzaChrZXkpCiAgICAgICAgcmV0dXJuIHJlczsKICAgIH0KfTsKCnZhciBmb3JFYWNoID0gZnVuY3Rpb24gKHhzLCBmbikgewogICAgaWYgKHhzLmZvckVhY2gpIHJldHVybiB4cy5mb3JFYWNoKGZuKQogICAgZWxzZSBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm4oeHNbaV0sIGksIHhzKTsKICAgIH0KfTsKCnZhciBkZWZpbmVQcm9wID0gKGZ1bmN0aW9uKCkgewogICAgdHJ5IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfJywge30pOwogICAgICAgIHJldHVybiBmdW5jdGlvbihvYmosIG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIG5hbWUsIHsKICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICAgICAgfSkKICAgICAgICB9OwogICAgfSBjYXRjaChlKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgbmFtZSwgdmFsdWUpIHsKICAgICAgICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAgICAgfTsKICAgIH0KfSgpKTsKCnZhciBnbG9iYWxzID0gWydBcnJheScsICdCb29sZWFuJywgJ0RhdGUnLCAnRXJyb3InLCAnRXZhbEVycm9yJywgJ0Z1bmN0aW9uJywKJ0luZmluaXR5JywgJ0pTT04nLCAnTWF0aCcsICdOYU4nLCAnTnVtYmVyJywgJ09iamVjdCcsICdSYW5nZUVycm9yJywKJ1JlZmVyZW5jZUVycm9yJywgJ1JlZ0V4cCcsICdTdHJpbmcnLCAnU3ludGF4RXJyb3InLCAnVHlwZUVycm9yJywgJ1VSSUVycm9yJywKJ2RlY29kZVVSSScsICdkZWNvZGVVUklDb21wb25lbnQnLCAnZW5jb2RlVVJJJywgJ2VuY29kZVVSSUNvbXBvbmVudCcsICdlc2NhcGUnLAonZXZhbCcsICdpc0Zpbml0ZScsICdpc05hTicsICdwYXJzZUZsb2F0JywgJ3BhcnNlSW50JywgJ3VuZGVmaW5lZCcsICd1bmVzY2FwZSddOwoKZnVuY3Rpb24gQ29udGV4dCgpIHt9CkNvbnRleHQucHJvdG90eXBlID0ge307Cgp2YXIgU2NyaXB0ID0gZXhwb3J0cy5TY3JpcHQgPSBmdW5jdGlvbiBOb2RlU2NyaXB0IChjb2RlKSB7CiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU2NyaXB0KSkgcmV0dXJuIG5ldyBTY3JpcHQoY29kZSk7CiAgICB0aGlzLmNvZGUgPSBjb2RlOwp9OwoKU2NyaXB0LnByb3RvdHlwZS5ydW5JbkNvbnRleHQgPSBmdW5jdGlvbiAoY29udGV4dCkgewogICAgaWYgKCEoY29udGV4dCBpbnN0YW5jZW9mIENvbnRleHQpKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigibmVlZHMgYSAnY29udGV4dCcgYXJndW1lbnQuIik7CiAgICB9CiAgICAKICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgIGlmICghaWZyYW1lLnN0eWxlKSBpZnJhbWUuc3R5bGUgPSB7fTsKICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgCiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7CiAgICAKICAgIHZhciB3aW4gPSBpZnJhbWUuY29udGVudFdpbmRvdzsKICAgIHZhciB3RXZhbCA9IHdpbi5ldmFsLCB3RXhlY1NjcmlwdCA9IHdpbi5leGVjU2NyaXB0OwoKICAgIGlmICghd0V2YWwgJiYgd0V4ZWNTY3JpcHQpIHsKICAgICAgICAvLyB3aW4uZXZhbCgpIG1hZ2ljYWxseSBhcHBlYXJzIHdoZW4gdGhpcyBpcyBjYWxsZWQgaW4gSUU6CiAgICAgICAgd0V4ZWNTY3JpcHQuY2FsbCh3aW4sICdudWxsJyk7CiAgICAgICAgd0V2YWwgPSB3aW4uZXZhbDsKICAgIH0KICAgIAogICAgZm9yRWFjaChPYmplY3Rfa2V5cyhjb250ZXh0KSwgZnVuY3Rpb24gKGtleSkgewogICAgICAgIHdpbltrZXldID0gY29udGV4dFtrZXldOwogICAgfSk7CiAgICBmb3JFYWNoKGdsb2JhbHMsIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBpZiAoY29udGV4dFtrZXldKSB7CiAgICAgICAgICAgIHdpbltrZXldID0gY29udGV4dFtrZXldOwogICAgICAgIH0KICAgIH0pOwogICAgCiAgICB2YXIgd2luS2V5cyA9IE9iamVjdF9rZXlzKHdpbik7CgogICAgdmFyIHJlcyA9IHdFdmFsLmNhbGwod2luLCB0aGlzLmNvZGUpOwogICAgCiAgICBmb3JFYWNoKE9iamVjdF9rZXlzKHdpbiksIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGNpcmN1bGFyIG9iamVjdHMgbGlrZSBgdG9wYCBhbmQgYHdpbmRvd2AgYnkgb25seQogICAgICAgIC8vIHVwZGF0aW5nIGV4aXN0aW5nIGNvbnRleHQgcHJvcGVydGllcyBvciBuZXcgcHJvcGVydGllcyBpbiB0aGUgYHdpbmAKICAgICAgICAvLyB0aGF0IHdhcyBvbmx5IGludHJvZHVjZWQgYWZ0ZXIgdGhlIGV2YWwuCiAgICAgICAgaWYgKGtleSBpbiBjb250ZXh0IHx8IGluZGV4T2Yod2luS2V5cywga2V5KSA9PT0gLTEpIHsKICAgICAgICAgICAgY29udGV4dFtrZXldID0gd2luW2tleV07CiAgICAgICAgfQogICAgfSk7CgogICAgZm9yRWFjaChnbG9iYWxzLCBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKCEoa2V5IGluIGNvbnRleHQpKSB7CiAgICAgICAgICAgIGRlZmluZVByb3AoY29udGV4dCwga2V5LCB3aW5ba2V5XSk7CiAgICAgICAgfQogICAgfSk7CiAgICAKICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKTsKICAgIAogICAgcmV0dXJuIHJlczsKfTsKClNjcmlwdC5wcm90b3R5cGUucnVuSW5UaGlzQ29udGV4dCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBldmFsKHRoaXMuY29kZSk7IC8vIG1heWJlLi4uCn07CgpTY3JpcHQucHJvdG90eXBlLnJ1bkluTmV3Q29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgICB2YXIgY3R4ID0gU2NyaXB0LmNyZWF0ZUNvbnRleHQoY29udGV4dCk7CiAgICB2YXIgcmVzID0gdGhpcy5ydW5JbkNvbnRleHQoY3R4KTsKCiAgICBmb3JFYWNoKE9iamVjdF9rZXlzKGN0eCksIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBjb250ZXh0W2tleV0gPSBjdHhba2V5XTsKICAgIH0pOwoKICAgIHJldHVybiByZXM7Cn07Cgpmb3JFYWNoKE9iamVjdF9rZXlzKFNjcmlwdC5wcm90b3R5cGUpLCBmdW5jdGlvbiAobmFtZSkgewogICAgZXhwb3J0c1tuYW1lXSA9IFNjcmlwdFtuYW1lXSA9IGZ1bmN0aW9uIChjb2RlKSB7CiAgICAgICAgdmFyIHMgPSBTY3JpcHQoY29kZSk7CiAgICAgICAgcmV0dXJuIHNbbmFtZV0uYXBwbHkocywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsKICAgIH07Cn0pOwoKZXhwb3J0cy5jcmVhdGVTY3JpcHQgPSBmdW5jdGlvbiAoY29kZSkgewogICAgcmV0dXJuIGV4cG9ydHMuU2NyaXB0KGNvZGUpOwp9OwoKZXhwb3J0cy5jcmVhdGVDb250ZXh0ID0gU2NyaXB0LmNyZWF0ZUNvbnRleHQgPSBmdW5jdGlvbiAoY29udGV4dCkgewogICAgdmFyIGNvcHkgPSBuZXcgQ29udGV4dCgpOwogICAgaWYodHlwZW9mIGNvbnRleHQgPT09ICdvYmplY3QnKSB7CiAgICAgICAgZm9yRWFjaChPYmplY3Rfa2V5cyhjb250ZXh0KSwgZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICBjb3B5W2tleV0gPSBjb250ZXh0W2tleV07CiAgICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gY29weTsKfTsKCn0seyJpbmRleG9mIjoxMjd9XSwxNzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBiczU4Y2hlY2sgPSByZXF1aXJlKCdiczU4Y2hlY2snKQoKZnVuY3Rpb24gZGVjb2RlUmF3ICh2ZXJzaW9uLCBidWZmZXIpIHsKICBpZiAoYnVmZmVyWzBdICE9PSB2ZXJzaW9uKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbmV0d29yayB2ZXJzaW9uJykKCiAgLy8gY29tcHJlc3Npb24gZmxhZz8KICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMzQpIHsKICAgIGlmIChidWZmZXJbMzNdICE9PSAweDAxKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29tcHJlc3Npb24gZmxhZycpCgogICAgLy8gdHJ1bmNhdGUgdGhlIHZlcnNpb24gYnl0ZS9jb21wcmVzc2lvbiBmbGFnCiAgICByZXR1cm4gewogICAgICB2ZXJzaW9uOiBidWZmZXJbMF0sCiAgICAgIGQ6IGJ1ZmZlci5zbGljZSgxLCAtMSksCiAgICAgIGNvbXByZXNzZWQ6IHRydWUKICAgIH0KICB9CgogIC8vIG5vIGNvbXByZXNzaW9uIGZsYWcKICBpZiAoYnVmZmVyLmxlbmd0aCAhPT0gMzMpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBXSUYgbGVuZ3RoJykKCiAgcmV0dXJuIHsKICAgIHZlcnNpb246IGJ1ZmZlclswXSwKICAgIGQ6IGJ1ZmZlci5zbGljZSgxKSwKICAgIGNvbXByZXNzZWQ6IGZhbHNlCiAgfQp9CgpmdW5jdGlvbiBkZWNvZGUgKHZlcnNpb24sIHN0cmluZykgewogIHJldHVybiBkZWNvZGVSYXcodmVyc2lvbiwgYnM1OGNoZWNrLmRlY29kZShzdHJpbmcpKQp9CgpmdW5jdGlvbiBlbmNvZGVSYXcgKHZlcnNpb24sIGQsIGNvbXByZXNzZWQpIHsKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcihjb21wcmVzc2VkID8gMzQgOiAzMykKCiAgYnVmZmVyLndyaXRlVUludDgodmVyc2lvbiwgMCkKICBkLmNvcHkoYnVmZmVyLCAxKQoKICBpZiAoY29tcHJlc3NlZCkgewogICAgYnVmZmVyWzMzXSA9IDB4MDEKICB9CgogIHJldHVybiBidWZmZXIKfQoKZnVuY3Rpb24gZW5jb2RlICh2ZXJzaW9uLCBkLCBjb21wcmVzc2VkKSB7CiAgcmV0dXJuIGJzNThjaGVjay5lbmNvZGUoZW5jb2RlUmF3KHZlcnNpb24sIGQsIGNvbXByZXNzZWQpKQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBkZWNvZGU6IGRlY29kZSwKICBkZWNvZGVSYXc6IGRlY29kZVJhdywKICBlbmNvZGU6IGVuY29kZSwKICBlbmNvZGVSYXc6IGVuY29kZVJhdwp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnM1OGNoZWNrIjo3NCwiYnVmZmVyIjo3MH1dLDE3OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioKKiBAYXV0aG9yIG1pY2FlbHBlZHJvc2FAZ21haWwuY29tCiogTWluaW1hbCBpbnRlcmZhY2UgYW5kIGltcGxlbWVudGF0aW9uIHRvIHNlbmQgYW5kIHJlY2VpdmUgbWVzc2FnZXMuIEl0IGNhbiBiZSByZXVzZWQgaW4gbWFueSB0eXBlIG9mIGNvbXBvbmVudHMuCiogQ29tcG9uZW50cyB0aGF0IG5lZWQgYSBtZXNzYWdlIHN5c3RlbSBzaG91bGQgcmVjZWl2ZSB0aGlzIGNsYXNzIGFzIGEgZGVwZW5kZW5jeSBvciBleHRlbmQgaXQuCiogRXh0ZW5zaW9ucyBzaG91bGQgaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgcHJpdmF0ZSBtZXRob2RzOiBfb25Qb3N0TWVzc2FnZSBhbmQgX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lcgoqLwoKdmFyIEJ1cyA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX21zZ0lkOiBudW1iZXI7CiAgX3N1YnNjcmlwdGlvbnM6IDx1cmw6IE1zZ0xpc3RlbmVyW10+CiAgIF9yZXNwb25zZVRpbWVPdXQ6IG51bWJlcgogIF9yZXNwb25zZUNhbGxiYWNrczogPHVybCtpZDogKG1zZykgPT4gdm9pZD4KICAgKi8KCiAgZnVuY3Rpb24gQnVzKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1cyk7CgogICAgdmFyIF90aGlzID0gdGhpczsKICAgIF90aGlzLl9tc2dJZCA9IDA7CiAgICBfdGhpcy5fc3Vic2NyaXB0aW9ucyA9IHt9OwoKICAgIF90aGlzLl9yZXNwb25zZVRpbWVPdXQgPSA1MDAwOyAvL2RlZmF1bHQgdG8gM3MKICAgIF90aGlzLl9yZXNwb25zZUNhbGxiYWNrcyA9IHt9OwoKICAgIF90aGlzLl9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXIoKTsKICB9CgogIC8qKgogICogUmVnaXN0ZXIgbGlzdGVuZXIgdG8gcmVjZWl2ZSBtZXNzYWdlIHdoZW4gIm1zZy50byA9PT0gdXJsIi4KICAqIFNwZWNpYWwgdXJsICIqIiBmb3IgZGVmYXVsdCBsaXN0ZW5lciBpcyBhY2NlcHRlZCB0byBpbnRlcmNlcHQgYWxsIG1lc3NhZ2VzLgogICogQHBhcmFtIHtVUkx9IHVybCBBZGRyZXNzIHRvIGludGVyY2VwdCwgdGhhIGlzIGluIHRoZSBtZXNzYWdlICJ0byIKICAqIEBwYXJhbSB7TGlzdGVuZXJ9IGxpc3RlbmVyIGxpc3RlbmVyCiAgKiBAcmV0dXJuIHtNc2dMaXN0ZW5lcn0gaW5zdGFuY2Ugb2YgTXNnTGlzdGVuZXIKICAqLwoKCiAgX2NyZWF0ZUNsYXNzKEJ1cywgW3sKICAgIGtleTogJ2FkZExpc3RlbmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRMaXN0ZW5lcih1cmwsIGxpc3RlbmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaXRlbSA9IG5ldyBNc2dMaXN0ZW5lcihfdGhpcy5fc3Vic2NyaXB0aW9ucywgdXJsLCBsaXN0ZW5lcik7CiAgICAgIHZhciBpdGVtTGlzdCA9IF90aGlzLl9zdWJzY3JpcHRpb25zW3VybF07CiAgICAgIGlmICghaXRlbUxpc3QpIHsKICAgICAgICBpdGVtTGlzdCA9IFtdOwogICAgICAgIF90aGlzLl9zdWJzY3JpcHRpb25zW3VybF0gPSBpdGVtTGlzdDsKICAgICAgfQoKICAgICAgaXRlbUxpc3QucHVzaChpdGVtKTsKICAgICAgcmV0dXJuIGl0ZW07CiAgICB9CgogICAgLyoqCiAgICAgKiBNYW51YWxseSBhZGQgYSByZXNwb25zZSBsaXN0ZW5lci4gT25seSBvbmUgbGlzdGVuZXIgcGVyIG1lc3NhZ2UgSUQgc2hvdWxkIGV4aXN0LgogICAgICogQVRFTlRJT04sIHRoZXJlIGlzIG5vIHRpbWVvdXQgZm9yIHRoaXMgbGlzdGVuZXIuCiAgICAgKiBUaGUgbGlzdGVuZXIgc2hvdWxkIGJlIHJlbW92ZWQgd2l0aCBhIHJlbW92ZVJlc3BvbnNlTGlzdGVuZXIsIGZhaWxpbmcgdG8gZG8gdGhpcyB3aWxsIHJlc3VsdCBpbiBhIHVucmVsZWFzZWQgbWVtb3J5IHByb2JsZW0uCiAgICAgKiBAcGFyYW0ge1VSTH0gdXJsIE9yaWdpbiBhZGRyZXNzIG9mIHRoZSBtZXNzYWdlIHNlbnQsICJtc2cuZnJvbSIuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gbXNnSWQgTWVzc2FnZSBJRCB0aGF0IGlzIHJldHVybmVkIGZyb20gdGhlIHBvc3RNZXNzYWdlLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzcG9uc2VMaXN0ZW5lciBDYWxsYmFjayBmdW5jdGlvbiBmb3IgdGhlIHJlc3BvbnNlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnYWRkUmVzcG9uc2VMaXN0ZW5lcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkUmVzcG9uc2VMaXN0ZW5lcih1cmwsIG1zZ0lkLCByZXNwb25zZUxpc3RlbmVyKSB7CiAgICAgIHRoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3VybCArIG1zZ0lkXSA9IHJlc3BvbnNlTGlzdGVuZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHJlc3BvbnNlIGxpc3RlbmVyLgogICAgICogQHBhcmFtIHtVUkx9IHVybCBPcmlnaW4gYWRkcmVzcyBvZiB0aGUgbWVzc2FnZSBzZW50LCAibXNnLmZyb20iLgogICAgICogQHBhcmFtIHtudW1iZXJ9IG1zZ0lkICBNZXNzYWdlIElEIHRoYXQgaXMgcmV0dXJuZWQgZnJvbSB0aGUgcG9zdE1lc3NhZ2UKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZW1vdmVSZXNwb25zZUxpc3RlbmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVSZXNwb25zZUxpc3RlbmVyKHVybCwgbXNnSWQpIHsKICAgICAgZGVsZXRlIHRoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3VybCArIG1zZ0lkXTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZSBhbGwgZXhpc3RlbnQgbGlzdGVuZXJzIGZvciB0aGUgVVJMCiAgICAgKiBAcGFyYW0gIHtVUkx9IHVybCBBZGRyZXNzIHJlZ2lzdGVyZWQKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZW1vdmVBbGxMaXN0ZW5lcnNPZicsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzT2YodXJsKSB7CiAgICAgIGRlbGV0ZSB0aGlzLl9zdWJzY3JpcHRpb25zW3VybF07CiAgICB9CgogICAgLyoqCiAgICAgKiBIZWxwZXIgbWV0aG9kIHRvIGJpbmQgbGlzdGVuZXJzIChpbiBib3RoIGRpcmVjdGlvbnMpIGludG8gb3RoZXIgTWluaUJ1cyB0YXJnZXQuCiAgICAgKiBAcGFyYW0gIHtVUkx9IG91dFVybCBPdXRib3VuZCBVUkwsIHJlZ2lzdGVyIGxpc3RlbmVyIGZvciB1cmwgaW4gZGlyZWN0aW9uICJ0aGlzIC0+IHRhcmdldCIKICAgICAqIEBwYXJhbSAge1VSTH0gaW5VcmwgSW5ib3VuZCBVUkwsIHJlZ2lzdGVyIGxpc3RlbmVyIGZvciB1cmwgaW4gZGlyZWN0aW9uICJ0YXJnZXQgLT4gdGhpcyIKICAgICAqIEBwYXJhbSAge01pbmlCdXN9IHRhcmdldCBUaGUgb3RoZXIgdGFyZ2V0IE1pbmlCdXMKICAgICAqIEByZXR1cm4ge0JvdW5kfSBhbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgcHJvcGVydGllcyBbdGhpc0xpc3RlbmVyLCB0YXJnZXRMaXN0ZW5lcl0gYW5kIHRoZSB1bmJpbmQgbWV0aG9kLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2JpbmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmQob3V0VXJsLCBpblVybCwgdGFyZ2V0KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB0aGlzTGlzdG4gPSBfdGhpcy5hZGRMaXN0ZW5lcihvdXRVcmwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICB0YXJnZXQucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgfSk7CgogICAgICB2YXIgdGFyZ2V0TGlzdG4gPSB0YXJnZXQuYWRkTGlzdGVuZXIoaW5VcmwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICBfdGhpcy5wb3N0TWVzc2FnZShtc2cpOwogICAgICB9KTsKCiAgICAgIHJldHVybiB7CiAgICAgICAgdGhpc0xpc3RlbmVyOiB0aGlzTGlzdG4sCiAgICAgICAgdGFyZ2V0TGlzdGVuZXI6IHRhcmdldExpc3RuLAogICAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkgewogICAgICAgICAgX3RoaXMyLnRoaXNMaXN0ZW5lci5yZW1vdmUoKTsKICAgICAgICAgIF90aGlzMi50YXJnZXRMaXN0ZW5lci5yZW1vdmUoKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CgogICAgLy9wdWJsaXNoIG9uIGRlZmF1bHQgbGlzdGVuZXJzCgogIH0sIHsKICAgIGtleTogJ19wdWJsaXNoT25EZWZhdWx0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcHVibGlzaE9uRGVmYXVsdChtc2cpIHsKICAgICAgLy9pcyB0aGVyZSBhbnkgIioiIChkZWZhdWx0KSBsaXN0ZW5lcnM/CiAgICAgIHZhciBpdGVtTGlzdCA9IHRoaXMuX3N1YnNjcmlwdGlvbnNbJyonXTsKICAgICAgaWYgKGl0ZW1MaXN0KSB7CiAgICAgICAgdGhpcy5fcHVibGlzaE9uKGl0ZW1MaXN0LCBtc2cpOwogICAgICB9CiAgICB9CgogICAgLy9wdWJsaXNoIG9uIGEgc3Vic2NyaXB0aW9uIGxpc3QuCgogIH0sIHsKICAgIGtleTogJ19wdWJsaXNoT24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9wdWJsaXNoT24oaXRlbUxpc3QsIG1zZykgewogICAgICBpdGVtTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChzdWIpIHsKICAgICAgICBzdWIuX2NhbGxiYWNrKG1zZyk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19yZXNwb25zZUNhbGxiYWNrJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVzcG9uc2VDYWxsYmFjayhpbk1zZywgcmVzcG9uc2VDYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9hdXRvbWF0aWMgbWFuYWdlbWVudCBvZiByZXNwb25zZSBoYW5kbGVycwogICAgICBpZiAocmVzcG9uc2VDYWxsYmFjaykgewogICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgcmVzcG9uc2VJZCA9IGluTXNnLmZyb20gKyBpbk1zZy5pZDsKICAgICAgICAgIF90aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tyZXNwb25zZUlkXSA9IHJlc3BvbnNlQ2FsbGJhY2s7CgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciByZXNwb25zZUZ1biA9IF90aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tyZXNwb25zZUlkXTsKICAgICAgICAgICAgZGVsZXRlIF90aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tyZXNwb25zZUlkXTsKCiAgICAgICAgICAgIGlmIChyZXNwb25zZUZ1bikgewogICAgICAgICAgICAgIHZhciBlcnJvck1zZyA9IHsKICAgICAgICAgICAgICAgIGlkOiBpbk1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywKICAgICAgICAgICAgICAgIGJvZHk6IHsgY29kZTogNDA4LCBkZXNjOiAnUmVzcG9uc2UgdGltZW91dCEnLCB2YWx1ZTogaW5Nc2cgfQogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIHJlc3BvbnNlRnVuKGVycm9yTXNnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgX3RoaXMuX3Jlc3BvbnNlVGltZU91dCk7CiAgICAgICAgfSkoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19vblJlc3BvbnNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZXNwb25zZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChtc2cudHlwZSA9PT0gJ3Jlc3BvbnNlJykgewogICAgICAgIHZhciByZXNwb25zZUlkID0gbXNnLnRvICsgbXNnLmlkOwogICAgICAgIHZhciByZXNwb25zZUZ1biA9IF90aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tyZXNwb25zZUlkXTsKCiAgICAgICAgLy9pZiBpdCdzIGEgcHJvdmlzaW9uYWwgcmVzcG9uc2UsIGRvbid0IGRlbGV0ZSByZXNwb25zZSBsaXN0ZW5lcgogICAgICAgIGlmIChtc2cuYm9keS5jb2RlID49IDIwMCkgewogICAgICAgICAgZGVsZXRlIF90aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tyZXNwb25zZUlkXTsKICAgICAgICB9CgogICAgICAgIGlmIChyZXNwb25zZUZ1bikgewogICAgICAgICAgcmVzcG9uc2VGdW4obXNnKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vcmVjZWl2ZSBtZXNzYWdlcyBmcm9tIGV4dGVybmFsIGludGVyZmFjZQoKICB9LCB7CiAgICBrZXk6ICdfb25NZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25NZXNzYWdlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCFfdGhpcy5fb25SZXNwb25zZShtc2cpKSB7CiAgICAgICAgdmFyIGl0ZW1MaXN0ID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbbXNnLnRvXTsKICAgICAgICBpZiAoaXRlbUxpc3QpIHsKICAgICAgICAgIF90aGlzLl9wdWJsaXNoT24oaXRlbUxpc3QsIG1zZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLl9wdWJsaXNoT25EZWZhdWx0KG1zZyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX2dlbklkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2VuSWQoaW5Nc2cpIHsKICAgICAgLy9UT0RPOiBob3cgZG8gd2UgbWFuYWdlIG1lc3NhZ2UgSUQncz8gU2hvdWxkIGl0IGJlIGEgZ2xvYmFsIHJ1bnRpbWUgY291bnRlciwgb3IgcGVyIFVSTCBhZGRyZXNzPwogICAgICAvL0dsb2JhbCBjb3VudGVyIHdpbGwgbm90IHdvcmssIGJlY2F1c2UgdGhlcmUgd2lsbCBiZSBtdWx0aXBsZSBNaW5pQnVzIGluc3RhbmNlcyEKICAgICAgLy9QZXIgVVJMLCBjYW4gYmUgYSBsb3Qgb2YgZGF0YSB0byBtYWludGFpbiEKICAgICAgLy9NYXliZSBhIGNvdW50ZXIgcGVyIE1pbmlCdXMgaW5zdGFuY2UuIFRoaXMgaXMgdGhlIGFzc3VtZWQgc29sdXRpb24gZm9yIG5vdy4KICAgICAgaWYgKCFpbk1zZy5pZCB8fCBpbk1zZy5pZCA9PT0gMCkgewogICAgICAgIHRoaXMuX21zZ0lkKys7CiAgICAgICAgaW5Nc2cuaWQgPSB0aGlzLl9tc2dJZDsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBTZW5kIG1lc3NhZ2VzIHRvIGxvY2FsIGxpc3RlbmVycywgb3IgaWYgbm90IGV4aXN0cyB0byBleHRlcm5hbCBsaXN0ZW5lcnMuCiAgICAqIEl0J3MgaGFzIGFuIG9wdGlvbmFsIG1lY2hhbmlzbSBmb3IgYXV0b21hdGljIG1hbmFnZW1lbnQgb2YgcmVzcG9uc2UgaGFuZGxlcnMuCiAgICAqIFRoZSByZXNwb25zZSBoYW5kbGVyIHdpbGwgYmUgdW5yZWdpc3RlcmVkIGFmdGVyIHJlY2VpdmluZyB0aGUgcmVzcG9uc2UsIG9yIGFmdGVyIHJlc3BvbnNlIHRpbWVvdXQgKGRlZmF1bHQgdG8gM3MpLgogICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBtc2cgTWVzc2FnZSB0byBzZW5kLiBNZXNzYWdlIElEIGlzIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gdGhlIG1lc3NhZ2UuCiAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSByZXNwb25zZUNhbGxiYWNrIE9wdGlvbmFsIHBhcmFtZXRlciwgaWYgdGhlIGRldmVsb3BlciB3aGF0J3MgYXV0b21hdGljIHJlc3BvbnNlIG1hbmFnZW1lbnQuCiAgICAqIEByZXR1cm4ge251bWJlcn0gUmV0dXJucyB0aGUgbWVzc2FnZSBJRCwgaW4gY2FzZSBpdCBzaG91bGQgYmUgbmVlZGVkIGZvciBtYW51YWwgbWFuYWdlbWVudCBvZiB0aGUgcmVzcG9uc2UgaGFuZGxlci4KICAgICovCgogIH0sIHsKICAgIGtleTogJ3Bvc3RNZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBwb3N0TWVzc2FnZShpbk1zZywgcmVzcG9uc2VDYWxsYmFjaykge30KCiAgICAvKioKICAgICAqIE5vdCBwdWJsaWMgYXZhaWxhYmxlLCB1c2VkIGJ5IHRoZSBjbGFzcyBleHRlbnNpb24gaW1wbGVtZW50YXRpb24sIHRvIHByb2Nlc3MgbWVzc2FnZXMgZnJvbSB0aGUgcHVibGljICJwb3N0TWVzc2FnZSIgd2l0aG91dCBhIHJlZ2lzdGVyZWQgbGlzdGVuZXIuCiAgICAgKiBVc2VkIHRvIHNlbmQgdGhlIG1lc3NhZ2UgdG8gYW4gZXh0ZXJuYWwgaW50ZXJmYWNlLCBsaWtlIGEgV2ViV29ya2VyLCBJRnJhbWUsIGV0Yy4KICAgICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gbXNnIE1lc3NhZ2UKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfb25Qb3N0TWVzc2FnZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUG9zdE1lc3NhZ2UobXNnKSB7fSAvKmltcGxlbWVudGF0aW9uIHdpbGwgc2VuZCBtZXNzYWdlIHRvIGV4dGVybmFsIHN5c3RlbSovCgogICAgLyoqCiAgICAgKiBOb3QgcHVibGljIGF2YWlsYWJsZSwgdXNlZCBieSB0aGUgY2xhc3MgZXh0ZW5zaW9uIGltcGxlbWVudGF0aW9uLCB0byBwcm9jZXNzIGFsbCBtZXNzYWdlcyB0aGF0IGVudGVyIHRoZSBNaW5pQnVzIGZyb20gYW4gZXh0ZXJuYWwgaW50ZXJmYWNlLCBsaWtlIGEgV2ViV29ya2VyLCBJRnJhbWUsIGV0Yy4KICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBvbmUgdGltZSBpbiB0aGUgY29uc3RydWN0b3IgdG8gcmVnaXN0ZXIgZXh0ZXJuYWwgbGlzdGVuZXJzLgogICAgICogVGhlIGltcGxlbWVudGF0aW9uIHdpbGwgcHJvYmFibHkgY2FsbCB0aGUgIl9vbk1lc3NhZ2UiIG1ldGhvZCB0byBwdWJsaXNoIGluIHRoZSBsb2NhbCBsaXN0ZW5lcnMuCiAgICAgKiBETyBOT1QgY2FsbCAicG9zdE1lc3NhZ2UiLCB0aGVyZSBpcyBhIGRhbmdlciB0aGF0IHRoZSBtZXNzYWdlIGVudGVycyBpbiBhIGN5Y2xlIQogICAgICovCgogIH0sIHsKICAgIGtleTogJ19yZWdpc3RlckV4dGVybmFsTGlzdGVuZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXIoKSB7LyppbXBsZW1lbnRhdGlvbiB3aWxsIHJlZ2lzdGVyIGV4dGVybmFsIGxpc3RlbmVyIGFuZCBjYWxsICJ0aGlzLl9vbk1lc3NhZ2UobXNnKSIgKi99CiAgfV0pOwoKICByZXR1cm4gQnVzOwp9KCk7Cgp2YXIgTXNnTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogIF9zdWJzY3JpcHRpb25zOiA8c3RyaW5nOiBNc2dMaXN0ZW5lcltdPjsKICBfdXJsOiBzdHJpbmc7CiAgX2NhbGxiYWNrOiAobXNnKSA9PiB2b2lkOwogICovCgogIGZ1bmN0aW9uIE1zZ0xpc3RlbmVyKHN1YnNjcmlwdGlvbnMsIHVybCwgY2FsbGJhY2spIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNc2dMaXN0ZW5lcik7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5fc3Vic2NyaXB0aW9ucyA9IHN1YnNjcmlwdGlvbnM7CiAgICBfdGhpcy5fdXJsID0gdXJsOwogICAgX3RoaXMuX2NhbGxiYWNrID0gY2FsbGJhY2s7CiAgfQoKICBfY3JlYXRlQ2xhc3MoTXNnTGlzdGVuZXIsIFt7CiAgICBrZXk6ICdyZW1vdmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBzdWJzID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbX3RoaXMuX3VybF07CiAgICAgIGlmIChzdWJzKSB7CiAgICAgICAgdmFyIGluZGV4ID0gc3Vicy5pbmRleE9mKF90aGlzKTsKICAgICAgICBzdWJzLnNwbGljZShpbmRleCwgMSk7CgogICAgICAgIC8vaWYgdGhlcmUgYXJlIG5vIGxpc3RlbmVycywgcmVtb3ZlIHRoZSBzdWJzY3JpcHRpb24gZW50aXJlbHkuCiAgICAgICAgaWYgKHN1YnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBkZWxldGUgX3RoaXMuX3N1YnNjcmlwdGlvbnNbX3RoaXMuX3VybF07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAndXJsJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdXJsOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE1zZ0xpc3RlbmVyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBCdXM7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTgwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX0J1czIgPSByZXF1aXJlKCcuL0J1cycpOwoKdmFyIF9CdXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQnVzMik7Cgp2YXIgX1BpcGVsaW5lID0gcmVxdWlyZSgnLi9QaXBlbGluZScpOwoKdmFyIF9QaXBlbGluZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QaXBlbGluZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9CgovKioKKiBNZXNzYWdlIEJVUyBJbnRlcmZhY2UgaXMgYW4gZXh0ZW5zaW9uIG9mIHRoZSBNaW5pQnVzCiogSXQgZG9lc24ndCBzdXBwb3J0IHRoZSBkZWZhdWx0ICcqJyBsaXN0ZW5lciwgaW5zdGVhZCBpdCB1c2VzIHRoZSByZWdpc3RyeS5yZXNvbHZlKC4uKQoqLwoKdmFyIE1lc3NhZ2VCdXMgPSBmdW5jdGlvbiAoX0J1cykgewogIF9pbmhlcml0cyhNZXNzYWdlQnVzLCBfQnVzKTsKCiAgLyogcHJpdmF0ZQogIF9yZWdpc3RyeTogUmVnaXN0cnkKICBfZm9yd2FyZHM6IHsgPGZyb20tdXJsPjogeyBmbDogTXNnTGlzdGVuZXIsIHNhbmRib3hUb1VybHM6IE1hcChTYW5kYm94LCBbdG8tdXJsXSksIHVybFRvU2FuZGJveDogeyB0by11cmw6IFNhbmRib3ggfSB9IH0KICAgX3BpcGVsaW5lOiBQaXBlbGluZQogICovCgogIC8vVE9ETzogZnV0dXJlIG9wdGltaXphdGlvbgogIC8vMS4gbWVzc2FnZSBiYXRjaCBwcm9jZXNzaW5nIHdpdGggc2V0SW50ZXJ2YWwKICAvLzIuIHJlc29sdmUgZGVmYXVsdCBnYXRld2F5L3Byb3Rvc3R1YiB3aXRoIHJlZ2lzdGVyLnJlc29sdmUKCiAgZnVuY3Rpb24gTWVzc2FnZUJ1cyhyZWdpc3RyeSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1lc3NhZ2VCdXMpOwoKICAgIHZhciBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWVzc2FnZUJ1cykuY2FsbCh0aGlzKSk7CgogICAgX3RoaXMyLl9yZWdpc3RyeSA9IHJlZ2lzdHJ5OwogICAgX3RoaXMyLl9mb3J3YXJkcyA9IHt9OwoKICAgIF90aGlzMi5fcGlwZWxpbmUgPSBuZXcgX1BpcGVsaW5lMi5kZWZhdWx0KGZ1bmN0aW9uIChlcnJvcikgewogICAgICBjb25zb2xlLmxvZygnUElQRUxJTkUtRVJST1I6ICcsIEpTT04uc3RyaW5naWZ5KGVycm9yKSk7CiAgICB9KTsKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICBfY3JlYXRlQ2xhc3MoTWVzc2FnZUJ1cywgW3sKICAgIGtleTogJ3Bvc3RNZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBwb3N0TWVzc2FnZShpbk1zZywgcmVzcG9uc2VDYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2dlbklkKGluTXNnKTsKCiAgICAgIF90aGlzLl9waXBlbGluZS5wcm9jZXNzKGluTXNnLCBmdW5jdGlvbiAobXNnKSB7CgogICAgICAgIF90aGlzLl9yZXNwb25zZUNhbGxiYWNrKGluTXNnLCByZXNwb25zZUNhbGxiYWNrKTsKCiAgICAgICAgaWYgKCFfdGhpcy5fb25SZXNwb25zZShtc2cpKSB7CiAgICAgICAgICB2YXIgaXRlbUxpc3QgPSBfdGhpcy5fc3Vic2NyaXB0aW9uc1ttc2cudG9dOwogICAgICAgICAgaWYgKGl0ZW1MaXN0KSB7CiAgICAgICAgICAgIC8vZG8gbm90IHB1Ymxpc2ggb24gZGVmYXVsdCBhZGRyZXNzLCBiZWNhdXNlIG9mIGxvb3BiYWNrIGN5Y2xlCiAgICAgICAgICAgIF90aGlzLl9wdWJsaXNoT24oaXRlbUxpc3QsIG1zZyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL2lmIHRoZXJlIGlzIG5vIGxpc3RlbmVyLCBzZW5kIHRvIGV4dGVybmFsIGludGVyZmFjZQogICAgICAgICAgICBfdGhpcy5fb25Qb3N0TWVzc2FnZShtc2cpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CgogICAgICByZXR1cm4gaW5Nc2cuaWQ7CiAgICB9CgogICAgLyoKICAgIGFkZEZvcndhcmQoZnJvbSwgdG8pIHsKICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgIC8vdmVyaWZ5IGlmIGZvcndhcmQgZXhpc3QKICAgICAgbGV0IGNvbmYgPSBfdGhpcy5fZm9yd2FyZHNbZnJvbV07CiAgICAgIGlmICghY29uZikgewogICAgICAgIGxldCBmb3J3YXJkTGlzdGVuZXIgPSBfdGhpcy5hZGRMaXN0ZW5lcihmcm9tLCAobXNnKSA9PiB7CiAgICAgICAgICBjb25mLnNhbmRib3hUb1VybHMuZm9yRWFjaCgodXJscywgc2FuZGJveCkgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZygnTUItRk9SV0FSRDogKCAnICsgZnJvbSArICcgdG8gJyArIHVybHMuc2l6ZSArICcgZGVzdGluYXRpb25zKScpOwogICAgICAgICAgICB1cmxzLmZvckVhY2goKHZhbHVlKSA9PiB7IGNvbnNvbGUubG9nKCdTRU5ELVRPOiAnLCB2YWx1ZSk7IH0pOwogICAgICAgICAgICAgc2FuZGJveC5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgIGNvbmYgPSB7CiAgICAgICAgICBmcm9tOiBmcm9tLAogICAgICAgICAgZmw6IGZvcndhcmRMaXN0ZW5lciwKICAgICAgICAgIHNhbmRib3hUb1VybHM6IG5ldyBNYXAoKSwKICAgICAgICAgIHVybFRvU2FuZGJveDogbmV3IE1hcCgpLAogICAgICAgICAgIC8vcmVtb3ZlIGZvcndhcmQgZGV0aW5hdGlvbgogICAgICAgICAgcmVtb3ZlOiAodXJsKSA9PiB7CiAgICAgICAgICAgIGxldCBzYW5kYm94ID0gdGhpcy51cmxUb1NhbmRib3guZ2V0KHVybCk7CiAgICAgICAgICAgIGlmIChzYW5kYm94KSB7CiAgICAgICAgICAgICAgdGhpcy51cmxUb1NhbmRib3guZGVsZXRlKHVybCk7CiAgICAgICAgICAgICAgdGhpcy5zYW5kYm94VG9VcmxzLmdldChzYW5kYm94KS5kZWxldGUodXJsKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgIF90aGlzLl9mb3J3YXJkc1tmcm9tXSA9IGNvbmY7CiAgICAgIH0KICAgICAgIC8vYWRkIGZvcndhcmQgZGV0aW5hdGlvbgogICAgICB0aGlzLl9yZWdpc3RyeS5nZXRTYW5kYm94KHRvKS50aGVuKChzYW5kYm94KSA9PiB7CiAgICAgICAgbGV0IHVybHMgPSBjb25mLnNhbmRib3hUb1VybHMuZ2V0KHNhbmRib3gpOwogICAgICAgIGlmICghdXJscykgewogICAgICAgICAgdXJscyA9IG5ldyBTZXQoKTsKICAgICAgICAgIGNvbmYuc2FuZGJveFRvVXJscy5zZXQoc2FuZGJveCwgdXJscyk7CiAgICAgICAgfQogICAgICAgICB1cmxzLmFkZCh0byk7CiAgICAgICAgY29uZi51cmxUb1NhbmRib3guc2V0KHRvLCBzYW5kYm94KTsKICAgICAgfSk7CiAgICAgICByZXR1cm4gY29uZjsKICAgIH0KICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZFB1Ymxpc2gnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFB1Ymxpc2goZnJvbSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL3ZlcmlmeSBpZiBmb3J3YXJkIGV4aXN0CiAgICAgIHZhciByZWZDb3VudCA9IF90aGlzLl9mb3J3YXJkc1tmcm9tXTsKICAgICAgaWYgKCFyZWZDb3VudCkgewogICAgICAgIHZhciBmb3J3YXJkTGlzdGVuZXIgPSBfdGhpcy5hZGRMaXN0ZW5lcihmcm9tLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnTUItUFVCTElTSDogKCAnICsgZnJvbSArICcgKScpOwogICAgICAgICAgX3RoaXMuX29uUG9zdE1lc3NhZ2UobXNnKTsKICAgICAgICB9KTsKCiAgICAgICAgcmVmQ291bnQgPSB7CiAgICAgICAgICBjb3VudGVyOiAwLAogICAgICAgICAgZmw6IGZvcndhcmRMaXN0ZW5lciwKICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkgewogICAgICAgICAgICBfdGhpczMuY291bnRlci0tOwogICAgICAgICAgICBpZiAoX3RoaXMzLmNvdW50ZXIgPT09IDApIHsKICAgICAgICAgICAgICBfdGhpczMuZmwucmVtb3ZlKCk7CiAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLl9mb3J3YXJkc1tmcm9tXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIF90aGlzLl9mb3J3YXJkc1tmcm9tXSA9IHJlZkNvdW50OwogICAgICB9CgogICAgICByZWZDb3VudC5jb3VudGVyKys7CiAgICAgIHJldHVybiByZWZDb3VudDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdhZGRGb3J3YXJkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRGb3J3YXJkKGZyb20sIHRvKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX3RoaXMuYWRkTGlzdGVuZXIoZnJvbSwgZnVuY3Rpb24gKG1zZykgewogICAgICAgIGNvbnNvbGUubG9nKCdNQi1GT1JXQVJEOiAoICcgKyBmcm9tICsgJyB0byAnICsgdG8gKyAnICknKTsKICAgICAgICBfdGhpcy5mb3J3YXJkKHRvLCBtc2cpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdmb3J3YXJkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3J3YXJkKHVybCwgbXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaXRlbUxpc3QgPSBfdGhpcy5fc3Vic2NyaXB0aW9uc1t1cmxdOwogICAgICBpZiAoaXRlbUxpc3QpIHsKICAgICAgICBfdGhpcy5fcHVibGlzaE9uKGl0ZW1MaXN0LCBtc2cpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX29uUG9zdE1lc3NhZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblBvc3RNZXNzYWdlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9yZXNvbHZlIGV4dGVybmFsIHByb3Rvc3R1Yi4uLgogICAgICBfdGhpcy5fcmVnaXN0cnkucmVzb2x2ZShtc2cudG8pLnRoZW4oZnVuY3Rpb24gKHJvdXRlKSB7CiAgICAgICAgX3RoaXMuZm9yd2FyZChyb3V0ZSwgbXNnKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygnUkVTT0xWRS1FUlJPUjogJywgZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ3BpcGVsaW5lJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcGlwZWxpbmU7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTWVzc2FnZUJ1czsKfShfQnVzMy5kZWZhdWx0KTsKCmV4cG9ydHMuZGVmYXVsdCA9IE1lc3NhZ2VCdXM7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4vQnVzIjoxNzksIi4vUGlwZWxpbmUiOjE4MX1dLDE4MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioKKiBAYXV0aG9yIG1pY2FlbHBlZHJvc2FAZ21haWwuY29tCiogUGlwZWxpbmUKKiBTZXF1ZW5jaWFsIHByb2Nlc3NvciBvZiBtZXRob2RzLiBTaW1pbGFyIHRvIGhvdyBTZXF1ZW50aWFsIFByb21pc2UncyB3b3JrLCBidXQgYmV0dGVyIGZpdCBmb3IgbWVzc2FnZSBwcm9jZXNzaW5nLgoqLwoKdmFyIFBpcGVsaW5lID0gZnVuY3Rpb24gKCkgewogIC8qIHB1YmxpYwogICAgaGFuZGxlcnM6ICgoUGlwZUNvbnRleHQpID0+IHZvaWQpW10KICAgIG9uRmFpbDogKGVycm9yKSA9PiB2b2lkCiAgKi8KCiAgZnVuY3Rpb24gUGlwZWxpbmUoX29uRmFpbCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBpcGVsaW5lKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLmhhbmRsZXJzID0gW107CiAgICBfdGhpcy5vbkZhaWwgPSBfb25GYWlsOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFBpcGVsaW5lLCBbewogICAga2V5OiAicHJvY2VzcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzcyhtc2csIG9uRGVsaXZlcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLmhhbmRsZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgaXRlciA9IG5ldyBJdGVyYXRvcihfdGhpcy5oYW5kbGVycyk7CiAgICAgICAgaXRlci5uZXh0KG5ldyBQaXBlQ29udGV4dChfdGhpcywgaXRlciwgbXNnLCBvbkRlbGl2ZXIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvbkRlbGl2ZXIobXNnKTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBpcGVsaW5lOwp9KCk7Cgp2YXIgUGlwZUNvbnRleHQgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogICAgX2luU3RvcDogYm9vbGVhbgogICAgIF9waXBlbGluZTogUGlwZWxpbmUKICAgIF9pdGVyOiBJdGVyYXRvcgogICAgX21zZzogTWVzc2FnZQogICovCgogIGZ1bmN0aW9uIFBpcGVDb250ZXh0KHBpcGVsaW5lLCBpdGVyLCBtc2csIG9uRGVsaXZlcikgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBpcGVDb250ZXh0KTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9pblN0b3AgPSBmYWxzZTsKCiAgICBfdGhpcy5fcGlwZWxpbmUgPSBwaXBlbGluZTsKICAgIF90aGlzLl9pdGVyID0gaXRlcjsKICAgIF90aGlzLl9tc2cgPSBtc2c7CiAgICBfdGhpcy5fb25EZWxpdmVyID0gb25EZWxpdmVyOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFBpcGVDb250ZXh0LCBbewogICAga2V5OiAibmV4dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghX3RoaXMuX2luU3RvcCkgewogICAgICAgIGlmIChfdGhpcy5faXRlci5oYXNOZXh0KSB7CiAgICAgICAgICBfdGhpcy5faXRlci5uZXh0KF90aGlzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuX29uRGVsaXZlcihfdGhpcy5fbXNnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZWxpdmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxpdmVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAoIV90aGlzLl9pblN0b3ApIHsKICAgICAgICBfdGhpcy5faW5TdG9wID0gdHJ1ZTsKICAgICAgICBfdGhpcy5fb25EZWxpdmVyKF90aGlzLl9tc2cpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZmFpbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmFpbChlcnJvcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCFfdGhpcy5faW5TdG9wKSB7CiAgICAgICAgX3RoaXMuX2luU3RvcCA9IHRydWU7CiAgICAgICAgaWYgKF90aGlzLl9waXBlbGluZS5vbkZhaWwpIHsKICAgICAgICAgIF90aGlzLl9waXBlbGluZS5vbkZhaWwoZXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInBpcGVsaW5lIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcGlwZWxpbmU7CiAgICB9CiAgfSwgewogICAga2V5OiAibXNnIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fbXNnOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGluTXNnKSB7CiAgICAgIHRoaXMuX21zZyA9IGluTXNnOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBpcGVDb250ZXh0Owp9KCk7Cgp2YXIgSXRlcmF0b3IgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogICAgX2luZGV4OiBudW1iZXIKICAgIF9hcnJheTogW10KICAqLwoKICBmdW5jdGlvbiBJdGVyYXRvcihhcnJheSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEl0ZXJhdG9yKTsKCiAgICB0aGlzLl9pbmRleCA9IC0xOwogICAgdGhpcy5fYXJyYXkgPSBhcnJheTsKICB9CgogIF9jcmVhdGVDbGFzcyhJdGVyYXRvciwgW3sKICAgIGtleTogImhhc05leHQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbmRleCA8IHRoaXMuX2FycmF5Lmxlbmd0aCAtIDE7CiAgICB9CiAgfSwgewogICAga2V5OiAibmV4dCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdGhpcy5faW5kZXgrKzsKICAgICAgcmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2luZGV4XTsKICAgIH0KICB9XSk7CgogIHJldHVybiBJdGVyYXRvcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUGlwZWxpbmU7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTgyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qCkFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vamFzb25kYXZpZXMvYmxvb21maWx0ZXIuanMKCk9yaWdpbmFsIExpY2Vuc2U6CgpDb3B5cmlnaHQgKGMpIDIwMTEsIEphc29uIERhdmllcwpBbGwgcmlnaHRzIHJlc2VydmVkLgoKUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0Cm1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OgoKICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcwogICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCgogICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLAogICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvbgogICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCgogICogVGhlIG5hbWUgSmFzb24gRGF2aWVzIG1heSBub3QgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMKICAgIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLgoKVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyAiQVMgSVMiIEFORApBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRApXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFCkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIEpBU09OIERBVklFUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULApJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UCkxJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUgpQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GCkxJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UKT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRgpBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4KKi8KCi8qKgoqIEltcGxlbWVudHMgYSBCbG9vbSBmaWx0ZXIuCiogQGF1dGhvciBKYXNvbiBEYXZpZXM7IGFkYXB0ZWQgYW5kIGV4dGVuZGVkIGJ5IGJlaWVybGVAdHUtYmVybGluLmRlCiovCgp2YXIgQmxvb21GaWx0ZXIgPSBmdW5jdGlvbiAoKSB7CgogIC8vdmFyIHR5cGVkQXJyYXlzID0gdHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJzsKCiAgLy8gQ3JlYXRlcyBhIG5ldyBibG9vbSBmaWx0ZXIuICBJZiAqbSogaXMgYW4gYXJyYXktbGlrZSBvYmplY3QsIHdpdGggYSBsZW5ndGgKICAvLyBwcm9wZXJ0eSwgdGhlbiB0aGUgYmxvb20gZmlsdGVyIGlzIGxvYWRlZCB3aXRoIGRhdGEgZnJvbSB0aGUgYXJyYXksIHdoZXJlCiAgLy8gZWFjaCBlbGVtZW50IGlzIGEgMzItYml0IGludGVnZXIuICBPdGhlcndpc2UsICptKiBzaG91bGQgc3BlY2lmeSB0aGUKICAvLyBudW1iZXIgb2YgYml0cy4gIE5vdGUgdGhhdCAqbSogaXMgcm91bmRlZCB1cCB0byB0aGUgbmVhcmVzdCBtdWx0aXBsZSBvZgogIC8vIDMyLiAgKmsqIHNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIGhhc2hpbmcgZnVuY3Rpb25zLgoKICBmdW5jdGlvbiBCbG9vbUZpbHRlcihtLCBrKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQmxvb21GaWx0ZXIpOwoKICAgIHZhciB0eXBlZEFycmF5cyA9IHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCc7CgogICAgdmFyIGE7CiAgICBpZiAodHlwZW9mIG0gIT09ICdudW1iZXInKSB7CiAgICAgIGEgPSBtOwogICAgICBtID0gYS5sZW5ndGggKiAzMjsKICAgIH0KCiAgICB2YXIgbiA9IE1hdGguY2VpbChtIC8gMzIpOwogICAgdmFyIGkgPSAtMTsKICAgIHRoaXMubSA9IG0gPSBuICogMzI7CiAgICB0aGlzLmsgPSBrOwoKICAgIGlmICh0eXBlZEFycmF5cykgewogICAgICB2YXIga2J5dGVzID0gMSA8PCBNYXRoLmNlaWwoTWF0aC5sb2coTWF0aC5jZWlsKE1hdGgubG9nKG0pIC8gTWF0aC5MTjIgLyA4KSkgLyBNYXRoLkxOMik7CiAgICAgIHZhciBhcnJheSA9IGtieXRlcyA9PT0gMSA/IFVpbnQ4QXJyYXkgOiBrYnl0ZXMgPT09IDIgPyBVaW50MTZBcnJheSA6IFVpbnQzMkFycmF5OwogICAgICB2YXIga2J1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihrYnl0ZXMgKiBrKTsKICAgICAgdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkobik7CiAgICAgIGlmIChhKSB3aGlsZSAoKytpIDwgbikgewogICAgICAgIGJ1Y2tldHNbaV0gPSBhW2ldOwogICAgICB9dGhpcy5fbG9jYXRpb25zID0gbmV3IEFycmF5KGtidWZmZXIpOwogICAgfSBlbHNlIHsKICAgICAgLy92YXIgYnVja2V0cyA9IHRoaXMuYnVja2V0cyA9IFtdOwogICAgICB0aGlzLmJ1Y2tldHMgPSBbXTsKICAgICAgaWYgKGEpIHdoaWxlICgrK2kgPCBuKSB7CiAgICAgICAgYnVja2V0c1tpXSA9IGFbaV07CiAgICAgIH0gZWxzZSB3aGlsZSAoKytpIDwgbikgewogICAgICAgIGJ1Y2tldHNbaV0gPSAwOwogICAgICB9dGhpcy5fbG9jYXRpb25zID0gW107CiAgICB9CiAgfQoKICAvLyBTZWUgaHR0cDovL3dpbGx3aGltLndwZW5naW5lLmNvbS8yMDExLzA5LzAzL3Byb2R1Y2luZy1uLWhhc2gtZnVuY3Rpb25zLWJ5LWhhc2hpbmctb25seS1vbmNlLwoKCiAgX2NyZWF0ZUNsYXNzKEJsb29tRmlsdGVyLCBbewogICAga2V5OiAnbG9jYXRpb25zJywKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2NhdGlvbnModikgewogICAgICB2YXIgayA9IHRoaXMuazsKICAgICAgdmFyIG0gPSB0aGlzLm07CiAgICAgIHZhciByID0gdGhpcy5fbG9jYXRpb25zOwogICAgICB2YXIgYSA9IHRoaXMuZm52MWEodik7CiAgICAgIHZhciBiID0gdGhpcy5mbnYxYWIoYSk7CiAgICAgIHZhciB4ID0gYSAlIG07CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgazsgKytpKSB7CiAgICAgICAgcltpXSA9IHggPCAwID8geCArIG0gOiB4OwogICAgICAgIHggPSAoeCArIGIpICUgbTsKICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdhZGQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZCh2KSB7CiAgICAgIHZhciBsID0gdGhpcy5sb2NhdGlvbnModiArICcnKTsKICAgICAgdmFyIGsgPSB0aGlzLms7CiAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGs7ICsraSkgewogICAgICAgIGJ1Y2tldHNbTWF0aC5mbG9vcihsW2ldIC8gMzIpXSB8PSAxIDw8IGxbaV0gJSAzMjsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ3Rlc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRlc3QodikgewogICAgICB2YXIgbCA9IHRoaXMubG9jYXRpb25zKHYgKyAnJyk7CiAgICAgIHZhciBrID0gdGhpcy5rOwogICAgICB2YXIgYnVja2V0cyA9IHRoaXMuYnVja2V0czsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrOyArK2kpIHsKICAgICAgICB2YXIgYiA9IGxbaV07CiAgICAgICAgaWYgKChidWNrZXRzW01hdGguZmxvb3IoYiAvIDMyKV0gJiAxIDw8IGIgJSAzMikgPT09IDApIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gTkVXOiBPUnMgdGhlIEJsb29tRmlsdGVyIGZyb20gdGhlIHBhcmFtZXRlcgogICAgLy8gcGFyYW0gaGFzIHRvIGJlIGEgQkY7IEJGcyBzaG91bGQgYmUgc2FtZSBsZW5ndGgKCiAgfSwgewogICAga2V5OiAnYWRkQmxvb21GaWx0ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEJsb29tRmlsdGVyKHYpIHsKICAgICAgdmFyIGJ1Y2tldHMgPSB0aGlzLmJ1Y2tldHM7CiAgICAgIHZhciBidWNrZXRzUGFyYW0gPSB2LmJ1Y2tldHM7CiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gYnVja2V0cy5sZW5ndGg7IGkgPCBuOyArK2kpIHsKICAgICAgICBidWNrZXRzW2ldID0gYnVja2V0c1tpXSB8IGJ1Y2tldHNQYXJhbVtpXTsKICAgICAgfQogICAgfQoKICAgIC8vIEVzdGltYXRlZCBjYXJkaW5hbGl0eS4KCiAgfSwgewogICAga2V5OiAnc2l6ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2l6ZSgpIHsKICAgICAgdmFyIGJ1Y2tldHMgPSB0aGlzLmJ1Y2tldHM7CiAgICAgIHZhciBiaXRzID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBidWNrZXRzLmxlbmd0aDsgaSA8IG47ICsraSkgewogICAgICAgIGJpdHMgKz0gdGhpcy5wb3BjbnQoYnVja2V0c1tpXSk7CiAgICAgIH1yZXR1cm4gLXRoaXMubSAqIE1hdGgubG9nKDEgLSBiaXRzIC8gdGhpcy5tKSAvIHRoaXMuazsKICAgIH0KCiAgICAvLyBodHRwOi8vZ3JhcGhpY3Muc3RhbmZvcmQuZWR1L35zZWFuZGVyL2JpdGhhY2tzLmh0bWwjQ291bnRCaXRzU2V0UGFyYWxsZWwKCiAgfSwgewogICAga2V5OiAncG9wY250JywKICAgIHZhbHVlOiBmdW5jdGlvbiBwb3BjbnQodikgewogICAgICB2IC09IHYgPj4gMSAmIDB4NTU1NTU1NTU7CiAgICAgIHYgPSAodiAmIDB4MzMzMzMzMzMpICsgKHYgPj4gMiAmIDB4MzMzMzMzMzMpOwogICAgICByZXR1cm4gKHYgKyAodiA+PiA0KSAmIDB4ZjBmMGYwZikgKiAweDEwMTAxMDEgPj4gMjQ7CiAgICB9CgogICAgLy8gRm93bGVyL05vbGwvVm8gaGFzaGluZy4KCiAgfSwgewogICAga2V5OiAnZm52MWEnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZudjFhKHYpIHsKICAgICAgdmFyIGEgPSAyMTY2MTM2MjYxOwogICAgICBmb3IgKHZhciBpID0gMCwgbiA9IHYubGVuZ3RoOyBpIDwgbjsgKytpKSB7CiAgICAgICAgdmFyIGMgPSB2LmNoYXJDb2RlQXQoaSk7CiAgICAgICAgdmFyIGQgPSBjICYgMHhmZjAwOwogICAgICAgIGlmIChkKSBhID0gdGhpcy5mbnZtdWx0aXBseShhIF4gZCA+PiA4KTsKICAgICAgICBhID0gdGhpcy5mbnZtdWx0aXBseShhIF4gYyAmIDB4ZmYpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmZudm1peChhKTsKICAgIH0KCiAgICAvLyBhICogMTY3Nzc2MTkgbW9kIDIqKjMyCgogIH0sIHsKICAgIGtleTogJ2Zudm11bHRpcGx5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBmbnZtdWx0aXBseShhKSB7CiAgICAgIHJldHVybiBhICsgKGEgPDwgMSkgKyAoYSA8PCA0KSArIChhIDw8IDcpICsgKGEgPDwgOCkgKyAoYSA8PCAyNCk7CiAgICB9CgogICAgLy8gT25lIGFkZGl0aW9uYWwgaXRlcmF0aW9uIG9mIEZOViwgZ2l2ZW4gYSBoYXNoLgoKICB9LCB7CiAgICBrZXk6ICdmbnYxYWInLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZudjFhYihhKSB7CiAgICAgIHJldHVybiB0aGlzLmZudm1peCh0aGlzLmZudm11bHRpcGx5KGEpKTsKICAgIH0KCiAgICAvLyBTZWUgaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTMxMDE5MDEzMjI1L2h0dHA6Ly9ob21lLmNvbWNhc3QubmV0L35icmV0bS9oYXNoLzYuaHRtbAoKICB9LCB7CiAgICBrZXk6ICdmbnZtaXgnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZudm1peChhKSB7CiAgICAgIGEgKz0gYSA8PCAxMzsKICAgICAgYSBePSBhID4+PiA3OwogICAgICBhICs9IGEgPDwgMzsKICAgICAgYSBePSBhID4+PiAxNzsKICAgICAgYSArPSBhIDw8IDU7CiAgICAgIHJldHVybiBhICYgMHhmZmZmZmZmZjsKICAgIH0KICB9XSk7CgogIHJldHVybiBCbG9vbUZpbHRlcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gQmxvb21GaWx0ZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTgzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgoqIFJlcHJlc2VudHMgdGhlIHVzZXIncyBpbmZvcm1hdGlvbiBmb3IgdGhlIGdsb2JhbCByZWdpc3RyeS4KKiBAYXV0aG9yIGJlaWVybGVAdHUtYmVybGluLmRlCiovCgp2YXIgR2xvYmFsUmVnaXN0cnlSZWNvcmQgPSBmdW5jdGlvbiAoKSB7CgogIC8qKgogICAqIENvbnN0cnVjdHMgYSBuZXcgZW1wdHkgb2JqZWN0LgogICAqLwoKICBmdW5jdGlvbiBHbG9iYWxSZWdpc3RyeVJlY29yZCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHbG9iYWxSZWdpc3RyeVJlY29yZCk7CgogICAgdGhpcy5ndWlkOwogICAgdGhpcy5zYWx0OwogICAgdGhpcy51c2VySURzID0gW107CiAgICB0aGlzLmxhc3RVcGRhdGU7CiAgICB0aGlzLnRpbWVvdXQ7CiAgICB0aGlzLnB1YmxpY0tleTsKICAgIHRoaXMuYWN0aXZlOwogICAgdGhpcy5yZXZva2VkOwogIH0KCiAgLyoqCiAgICogQ29uc3RydWN0cyBhIG5ldyBvYmplY3QgcmVwcmVzZW50aW5nIGluZm9ybWF0aW9uIGFib3V0IG9uZSBjb250YWN0LgogICAqIEByZXR1cm5zIHtPYmplY3R9ICBvYmplY3QgIEEgSmF2YVNjcmlwdCBPYmplY3Qgd2l0aCBhbGwgZmllbGRzIGZvciB0aGUgR2xvYmFsIFJlZ2lzdHJ5IFJlY29yZC4KICAgKi8KCgogIF9jcmVhdGVDbGFzcyhHbG9iYWxSZWdpc3RyeVJlY29yZCwgW3sKICAgIGtleTogImdldFJlY29yZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVjb3JkKCkgewoKICAgICAgLy8gVE9ETzogZ2l2ZSBlcnJvciBpZiBmaWVsZHMgYXJlIG1pc3NpbmcKCiAgICAgIHZhciByZWNvcmQgPSBuZXcgT2JqZWN0KCk7CiAgICAgIHJlY29yZC5ndWlkID0gdGhpcy5ndWlkOwogICAgICByZWNvcmQuc2FsdCA9IHRoaXMuc2FsdDsKICAgICAgcmVjb3JkLnVzZXJJRHMgPSB0aGlzLnVzZXJJZHM7CiAgICAgIHJlY29yZC5sYXN0VXBkYXRlID0gdGhpcy5sYXN0VXBkYXRlOwogICAgICByZWNvcmQudGltZW91dCA9IHRoaXMudGltZW91dDsKICAgICAgcmVjb3JkLnB1YmxpY0tleSA9IHRoaXMucHVibGljS2V5OwogICAgICByZWNvcmQuYWN0aXZlID0gdGhpcy5hY3RpdmU7CiAgICAgIHJlY29yZC5yZXZva2VkID0gdGhpcy5yZXZva2VkOwoKICAgICAgcmV0dXJuIHJlY29yZDsKICAgIH0KICB9XSk7CgogIHJldHVybiBHbG9iYWxSZWdpc3RyeVJlY29yZDsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gR2xvYmFsUmVnaXN0cnlSZWNvcmQ7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTg0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCnZhciBfR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YSA9IHJlcXVpcmUoJy4vR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YScpOwoKdmFyIF9HcmFwaENvbm5lY3RvckNvbnRhY3REYXRhMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0dyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEpOwoKdmFyIF9CbG9vbUZpbHRlciA9IHJlcXVpcmUoJy4vQmxvb21GaWx0ZXInKTsKCnZhciBfQmxvb21GaWx0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQmxvb21GaWx0ZXIpOwoKdmFyIF9HbG9iYWxSZWdpc3RyeVJlY29yZCA9IHJlcXVpcmUoJy4vR2xvYmFsUmVnaXN0cnlSZWNvcmQnKTsKCnZhciBfR2xvYmFsUmVnaXN0cnlSZWNvcmQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfR2xvYmFsUmVnaXN0cnlSZWNvcmQpOwoKdmFyIF9iaXRjb2luanNMaWIgPSByZXF1aXJlKCdiaXRjb2luanMtbGliJyk7Cgp2YXIgX2JpdGNvaW5qc0xpYjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iaXRjb2luanNMaWIpOwoKdmFyIF9iaXAgPSByZXF1aXJlKCdiaXAzOScpOwoKdmFyIF9iaXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmlwKTsKCnZhciBfc2pjbCA9IHJlcXVpcmUoJ3NqY2wnKTsKCnZhciBfc2pjbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zamNsKTsKCnZhciBfanNyc2FzaWduID0gcmVxdWlyZSgnanNyc2FzaWduJyk7Cgp2YXIgX2pzcnNhc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9qc3JzYXNpZ24pOwoKdmFyIF9iYXNlNjRVcmwgPSByZXF1aXJlKCdiYXNlNjQtdXJsJyk7Cgp2YXIgX2Jhc2U2NFVybDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYXNlNjRVcmwpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiogVGhlIEdyYXBoIENvbm5lY3RvciBjb250YWlucyB0aGUgY29udGFjdCBsaXN0L2FkZHJlc3MgYm9vay4KKiBAYXV0aG9yIGJlaWVybGVAdHUtYmVybGluLmRlCiovCgp2YXIgR3JhcGhDb25uZWN0b3IgPSBmdW5jdGlvbiAoKSB7CgogIC8vIFRPRE86IGltcG9ydCAvIGV4cG9ydCBtZXRob2RzCgogIC8qKgogICAqIENvbnN0cnVjdHMgYSBuZXcgYW5kIGVtcHR5IEdyYXBoIENvbm5lY3Rvci4KICAgKiBAcGFyYW0ge3N0cmluZ30gICBIeXBlcnR5UnVudGltZVVSTCAgICBUaGUgSHlwZXJ0eSBSdW50aW1lIFVSTC4KICAgKiBAcGFyYW0ge21lc3NhZ2VCdXN9ICAgIE1lc3NhZ2VCdXMgICAgICBUaGUgTWVzc2FnZSBCdXMuCiAgICovCgogIGZ1bmN0aW9uIEdyYXBoQ29ubmVjdG9yKGh5cGVydHlSdW50aW1lVVJMLCBtZXNzYWdlQnVzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR3JhcGhDb25uZWN0b3IpOwoKICAgIHRoaXMuY29udGFjdHMgPSBbXTsKICAgIHRoaXMubGFzdENhbGN1bGF0aW9uQmxvb21GaWx0ZXIxSG9wID0gbmV3IERhdGUoMCkudG9JU09TdHJpbmcoKTsKCiAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkID0gbmV3IF9HbG9iYWxSZWdpc3RyeVJlY29yZDIuZGVmYXVsdCgpOwogICAgdGhpcy5fcHJ2S2V5OwoKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgICB0aGlzLnJlc2lkZW5jZUxvY2F0aW9uOwogICAgdGhpcy5maXJzdE5hbWU7CiAgICB0aGlzLmxhc3ROYW1lOwoKICAgIHRoaXMuX21lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzOwogICAgdGhpcy5faHlwZXJ0eVJ1bnRpbWVVUkwgPSBoeXBlcnR5UnVudGltZVVSTDsKICB9CgogIC8qKgogICogUmV0dXJucyB0aGUgTWVzc2FnZUJ1cy4KICAqIEBwYXJhbSB7TWVzc2FnZUJ1c30gICAgICAgICAgIG1lc3NhZ2VCdXMgICAgVGhlIE1lc3NhZ2UgQnVzLgogICovCgoKICBfY3JlYXRlQ2xhc3MoR3JhcGhDb25uZWN0b3IsIFt7CiAgICBrZXk6ICdnZW5lcmF0ZUdVSUQnLAoKCiAgICAvKioKICAgICAqIEdlbmVyYXRlcyBhIEdVSUQgYW5kIHJldHVybnMgYSBtbmVtb25pYyBmcm9tIHdoaWNoIHRoZSBHVUlEIGNhbiBiZSByZS1jcmVhdGVkIGxhdGVyLgogICAgICogQHJldHVybnMgIHtzdHJpbmd9ICAgIG1uZW1vbmljICAgICAgQSBzdHJpbmcgd2l0aCAxNiB3b3Jkcy4KICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlR1VJRCgpIHsKCiAgICAgIC8vIGdlbmVyYXRlIG1uZW1vbmljIGFuZCBzYWx0CiAgICAgIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gdHJ1ZTsKICAgICAgdmFyIG1uZW1vbmljID0gX2JpcDIuZGVmYXVsdC5nZW5lcmF0ZU1uZW1vbmljKDE2MCk7CgogICAgICB2YXIgc2FsdFdvcmQgPSBfYmlwMi5kZWZhdWx0LmdlbmVyYXRlTW5lbW9uaWMoOCk7CiAgICAgIHRoaXMuX2NyZWF0ZUtleXMobW5lbW9uaWMsIHNhbHRXb3JkKTsKCiAgICAgIC8vIHNldCBsYXNVcGRhdGUgZGF0ZQogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmxhc3RVcGRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CgogICAgICAvLyBzZXQgZGVmdWFsdCB0aW1lb3V0CiAgICAgIHZhciB0aW1lb3V0ID0gbmV3IERhdGUoKTsKICAgICAgdGltZW91dC5zZXRNb250aCh0aW1lb3V0LmdldE1vbnRoKCkgKyAxMjApOwogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnRpbWVvdXQgPSB0aW1lb3V0LnRvSVNPU3RyaW5nKCk7CgogICAgICAvLyBzZXQgZGVmYXVsdCB2YWx1ZXMKICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5hY3RpdmUgPSAxOwogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnJldm9rZWQgPSAwOwoKICAgICAgLy8gcmV0dXJuIG1uZW1vbmljCiAgICAgIHZhciBydG4gPSBtbmVtb25pYyArICcgJyArIHNhbHRXb3JkOwogICAgICByZXR1cm4gcnRuOwogICAgfQoKICAgIC8qKgogICAgICogR2VuZXJhdGVzIGEgcHVibGljL3ByaXZhdGUga2V5IHBhaXIgZnJvbSBhIGdpdmVuIG1uZW1vbmljICgxNiB3b3JkcykuCiAgICAgKiBFeHBlY3RzIGEgc3RyaW5nIGNvbnRhaW5pbmcgMTYgd29yZHMgc2VwZXJhdGVkIGJ5IHNpbmdsZSBzcGFjZXMuCiAgICAgKiBSZXRyaWV2ZXMgZGF0YSBmcm9tIHRoZSBHbG9iYWwgUmVnaXN0cnkuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICBtbmVtb25pY0FuZFNhbHQgICAgIEEgc3RyaW5nIG9mIDE2IHdvcmRzLgogICAgICogQHJldHVybnMgIHtQcm9taXNlfSAgUHJvbWlzZSAgICAgICAgICBHbG9iYWwgUmVnaXN0cnkgUmVjb3JkLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ3VzZUdVSUQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVzZUdVSUQobW5lbW9uaWNBbmRTYWx0KSB7CiAgICAgIC8vIFRPRE86IGNoZWNrIGlmIGZvcm1hdCBpcyBjb3JyZWN0IGFuZCBpZiBhbGwgd29yZHMgYXJlIGZyb20gYmlwMzkgZW5nbGlzaCB3b3JkbGlzdAogICAgICB2YXIgbGFzdEluZGV4ID0gbW5lbW9uaWNBbmRTYWx0Lmxhc3RJbmRleE9mKCcgJyk7CiAgICAgIHZhciBtbmVtb25pYyA9IG1uZW1vbmljQW5kU2FsdC5zdWJzdHJpbmcoMCwgbGFzdEluZGV4KTsKICAgICAgdmFyIHNhbHRXb3JkID0gbW5lbW9uaWNBbmRTYWx0LnN1YnN0cmluZyhsYXN0SW5kZXggKyAxLCBtbmVtb25pY0FuZFNhbHQubGVuZ3RoKTsKICAgICAgdGhpcy5fY3JlYXRlS2V5cyhtbmVtb25pYywgc2FsdFdvcmQpOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIHJldHJpZXZlIGN1cnJlbnQgaW5mbyBmcm9tIEdsb2JhbCBSZWdpc3RyeSBhbmQgZmlsbCB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ1JFQUQnLAogICAgICAgIGZyb206IHRoaXMuX2h5cGVydHlSdW50aW1lVVJMICsgJy9ncmFwaC1jb25uZWN0b3InLAogICAgICAgIHRvOiAnZ2xvYmFsOi8vcmVnaXN0cnkvJywKICAgICAgICBib2R5OiB7IGd1aWQ6IHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuZ3VpZCB9CiAgICAgIH07CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBpZiAoX3RoaXMubWVzc2FnZUJ1cyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZWplY3QoJ01lc3NhZ2VCdXMgbm90IGZvdW5kIG9uIEdyYXBoQ29ubmVjdG9yJyk7CiAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CgogICAgICAgICAgICAvLyByZXBseSBzaG91bGQgYmUgdGhlIEpTT04gcmV0dXJuZWQgZnJvbSB0aGUgR2xvYmFsIFJlZ2lzdHJ5IFJFU1QtaW50ZXJmYWNlCiAgICAgICAgICAgIHZhciB1bndyYXBwZWRKV1QgPSBLSlVSLmp3cy5KV1MucGFyc2UocmVwbHkuYm9keS5kYXRhKTsKICAgICAgICAgICAgdmFyIGRhdGFFbmNvZGVkID0gdW53cmFwcGVkSldULnBheWxvYWRPYmouZGF0YTsKICAgICAgICAgICAgdmFyIGRhdGFEZWNvZGVkID0gX2Jhc2U2NFVybDIuZGVmYXVsdC5kZWNvZGUoZGF0YUVuY29kZWQpOwogICAgICAgICAgICB2YXIgZGF0YUpTT04gPSBKU09OLnBhcnNlKGRhdGFEZWNvZGVkKTsKCiAgICAgICAgICAgIC8vIHB1YmxpYyBrZXkgc2hvdWxkIG1hdGNoCiAgICAgICAgICAgIHZhciBzYW1lS2V5ID0gZGF0YUpTT04ucHVibGljS2V5ID09IF90aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnB1YmxpY0tleTsKICAgICAgICAgICAgaWYgKCFzYW1lS2V5KSB7CiAgICAgICAgICAgICAgcmVqZWN0KCdSZXRyaWV2ZWQga2V5IGRvZXMgbm90IG1hdGNoIScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBwdWJsaWNLZXlPYmplY3QgPSBfanNyc2FzaWduMi5kZWZhdWx0LktFWVVUSUwuZ2V0S2V5KGRhdGFKU09OLnB1YmxpY0tleSk7CiAgICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSBLSlVSLmp3cy5KV1MudmVyaWZ5KHJlcGx5LmJvZHkuZGF0YSwgcHVibGljS2V5T2JqZWN0LCBbJ0VTMjU2J10pOwogICAgICAgICAgICAgIGlmICghaXNWYWxpZCkgewogICAgICAgICAgICAgICAgcmVqZWN0KCdSZXRyaWV2ZWQgUmVjb3JkIG5vdCB2YWxpZCEnKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhSlNPTi51c2VySURzICE9ICd1bmRlZmluZWQnICYmIGRhdGFKU09OLnVzZXJJRHMgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC51c2VySURzID0gZGF0YUpTT04udXNlcklEczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmxhc3RVcGRhdGUgPSBkYXRhSlNPTi5sYXN0VXBkYXRlOwogICAgICAgICAgICAgICAgX3RoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudGltZW91dCA9IGRhdGFKU09OLnRpbWVvdXQ7CiAgICAgICAgICAgICAgICBfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5zYWx0ID0gZGF0YUpTT04uc2FsdDsKICAgICAgICAgICAgICAgIF90aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmFjdGl2ZSA9IGRhdGFKU09OLmFjdGl2ZTsKICAgICAgICAgICAgICAgIF90aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnJldm9rZWQgPSBkYXRhSlNPTi5yZXZva2VkOwogICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlcyB0aGUga2V5cyBmcm9tIG1uZW1vbmljIGFuZCBzYWx0LiBBbHNvIHNldHMgcHVibGljIGtleSwgZ3VpZCwgYW5kIHNhbHQgZm9yIGdsb2JhbFJlZ2lzdHJ5UmVjb3JkLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgbW5lbW9uaWMgICAgIEEgc3RyaW5nIHdpdGggMTUgd29yZHMuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICBzYWx0ICAgICAgICAgQSB3b3JkLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ19jcmVhdGVLZXlzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlS2V5cyhtbmVtb25pYywgc2FsdFdvcmQpIHsKCiAgICAgIC8vIGdlbmVyYXRlIGtleSBwYWlyCiAgICAgIHZhciBzZWVkID0gX2JpcDIuZGVmYXVsdC5tbmVtb25pY1RvU2VlZChtbmVtb25pYyk7CiAgICAgIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZmFsc2U7CiAgICAgIHZhciBoZG5vZGUgPSBfYml0Y29pbmpzTGliMi5kZWZhdWx0LkhETm9kZS5mcm9tU2VlZEJ1ZmZlcihzZWVkKTsKICAgICAgdmFyIGVjcGFyYW1zID0gS0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5nZXRCeU5hbWUoJ3NlY3AyNTZrMScpOwogICAgICB2YXIgYmlQcnYgPSBoZG5vZGUua2V5UGFpci5kOyAvLyBwcml2YXRlIGtleSBiaWcgaW50ZWdlcgogICAgICB2YXIgZXBQdWIgPSBlY3BhcmFtcy5HLm11bHRpcGx5KGJpUHJ2KTsgLy8gZCpHCiAgICAgIHZhciBiaVggPSBlcFB1Yi5nZXRYKCkudG9CaWdJbnRlZ2VyKCk7IC8vIHggZnJvbSBRCiAgICAgIHZhciBiaVkgPSBlcFB1Yi5nZXRZKCkudG9CaWdJbnRlZ2VyKCk7IC8vIHkgZnJvbSBRCiAgICAgIHZhciBjaGFybGVuID0gZWNwYXJhbXMua2V5bGVuIC8gNDsKICAgICAgdmFyIGhQcnYgPSAoJzAwMDAwMDAwMDAnICsgYmlQcnYudG9TdHJpbmcoMTYpKS5zbGljZSgtY2hhcmxlbik7CiAgICAgIHZhciBoWCA9ICgnMDAwMDAwMDAwMCcgKyBiaVgudG9TdHJpbmcoMTYpKS5zbGljZSgtY2hhcmxlbik7CiAgICAgIHZhciBoWSA9ICgnMDAwMDAwMDAwMCcgKyBiaVkudG9TdHJpbmcoMTYpKS5zbGljZSgtY2hhcmxlbik7CiAgICAgIHZhciBoUHViID0gJzA0JyArIGhYICsgaFk7CiAgICAgIHRoaXMuX3BydktleSA9IG5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7IGN1cnZlOiAnc2VjcDI1NmsxJyB9KTsKICAgICAgdGhpcy5fcHJ2S2V5LnNldFByaXZhdGVLZXlIZXgoaFBydik7CiAgICAgIHRoaXMuX3BydktleS5pc1ByaXZhdGUgPSB0cnVlOwogICAgICB0aGlzLl9wcnZLZXkuaXNQdWJsaWMgPSBmYWxzZTsKICAgICAgdmFyIHB1YktleSA9IG5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7IGN1cnZlOiAnc2VjcDI1NmsxJyB9KTsKICAgICAgcHViS2V5LnNldFB1YmxpY0tleUhleChoUHViKTsKICAgICAgcHViS2V5LmlzUHJpdmF0ZSA9IGZhbHNlOwogICAgICBwdWJLZXkuaXNQdWJsaWMgPSB0cnVlOwogICAgICB2YXIgcHVibGljS2V5ID0gX2pzcnNhc2lnbjIuZGVmYXVsdC5LRVlVVElMLmdldFBFTShwdWJLZXksICdQS0NTOFBVQicpOwogICAgICBwdWJsaWNLZXkgPSBwdWJsaWNLZXkucmVwbGFjZSgvKFxyXG58XG58XHIpL2dtLCAnJyk7CiAgICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQucHVibGljS2V5ID0gcHVibGljS2V5OwoKICAgICAgLy8gZ2VuZXJhdGUgc2FsdAogICAgICB2YXIgc2FsdEhhc2hlZEJpdEFycmF5ID0gX3NqY2wyLmRlZmF1bHQuaGFzaC5zaGEyNTYuaGFzaChzYWx0V29yZCk7CiAgICAgIHZhciBzYWx0ID0gX3NqY2wyLmRlZmF1bHQuY29kZWMuYmFzZTY0LmZyb21CaXRzKHNhbHRIYXNoZWRCaXRBcnJheSk7CiAgICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuc2FsdCA9IHNhbHQ7CgogICAgICAvLyBnZW5lcmF0ZSBHVUlECiAgICAgIHZhciBpdGVyYXRpb25zID0gMTAwMDA7CiAgICAgIHZhciBndWlkQml0QXJyYXkgPSBfc2pjbDIuZGVmYXVsdC5taXNjLnBia2RmMih0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnB1YmxpY0tleSwgc2FsdCwgaXRlcmF0aW9ucyk7CiAgICAgIHZhciBndWlkID0gX3NqY2wyLmRlZmF1bHQuY29kZWMuYmFzZTY0dXJsLmZyb21CaXRzKGd1aWRCaXRBcnJheSk7CiAgICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuZ3VpZCA9IGd1aWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBTaWduR2VuZXJhdGVzIGEgcHVibGljL3ByaXZhdGUga2V5IHBhaXIgZnJvbSBhIGdpdmVuIG1uZW1vbmljLgogICAgICogQHJldHVybnMgIHtzdHJpbmd9ICAgICBKV1QgICAgIEpTT04gV2ViIFRva2VuIHJlYWR5IHRvIGNvbW1pdCB0byBHbG9iYWwgUmVnaXN0cnkuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnc2lnbkdsb2JhbFJlZ2lzdHJ5UmVjb3JkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzaWduR2xvYmFsUmVnaXN0cnlSZWNvcmQoKSB7CgogICAgICB2YXIgcmVjb3JkID0gdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5nZXRSZWNvcmQoKTsKICAgICAgdmFyIHJlY29yZFN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHJlY29yZCk7CiAgICAgIHZhciByZWNvcmRTdHJpbmdCYXNlNjQgPSBfYmFzZTY0VXJsMi5kZWZhdWx0LmVuY29kZShyZWNvcmRTdHJpbmcpOwoKICAgICAgdmFyIGp3dCA9IEtKVVIuandzLkpXUy5zaWduKG51bGwsIHsgYWxnOiAnRVMyNTYnIH0sIHsgZGF0YTogcmVjb3JkU3RyaW5nQmFzZTY0IH0sIHRoaXMuX3BydktleSk7CiAgICAgIHJldHVybiBqd3Q7CiAgICB9CgogICAgLyoqCiAgICAgKiBUYWtlcyB0aGUgR2xvYmFsIFJlZ2lzdHJ5IFJlY29yZCBhcyBhIHNpZ25lZCBKV1QgYW5kIHNlbmRzIGl0IHRvIHRoZSBHbG9iYWwgUmVnaXN0cnkgdmlhIHRoZSBNZXNzYWdlQnVzLgogICAgICogUmV0dXJucyB0aGUgcmVzcG9uc2UgY29kZSBvZiB0aGUgUkVTVC1pbnRlcmZhY2Ugb2YgdGhlIEdsb2JhbCBSZWdpc3RyeSBhcyBhIFByb21pc2UuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICBqd3QgICAgIFRoZSBHbG9iYWwgUmVnaXN0cnkgUmVjb3JkIGFzIGEgc2lnbmVkIEpXVC4KICAgICAqIEByZXR1cm5zIHtQcm9wbWlzZX0gIFByb21pc2UgUmVzcG9uc2UgQ29kZSBmcm9tIEdsb2JhbCBSZWdpc3RyeS4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzZW5kR2xvYmFsUmVnaXN0cnlSZWNvcmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRHbG9iYWxSZWdpc3RyeVJlY29yZChqd3QpIHsKCiAgICAgIHZhciBwYXlsb2FkT2JqID0gS0pVUi5qd3MuSldTLnBhcnNlKGp3dCkucGF5bG9hZE9iajsKICAgICAgdmFyIGd1aWQgPSBwYXlsb2FkT2JqLmd1aWQ7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAnQ1JFQVRFJywKICAgICAgICBmcm9tOiB0aGlzLl9oeXBlcnR5UnVudGltZVVSTCArICcvZ3JhcGgtY29ubmVjdG9yJywKICAgICAgICB0bzogJ2dsb2JhbDovL3JlZ2lzdHJ5LycsCiAgICAgICAgYm9keTogeyBndWlkOiB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmd1aWQsIGp3dDogand0IH0KICAgICAgfTsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIGlmIChfdGhpcy5tZXNzYWdlQnVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJlamVjdCgnTWVzc2FnZUJ1cyBub3QgZm91bmQgb24gR3JhcGhDb25uZWN0b3InKTsKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKCiAgICAgICAgICAgIHZhciByZXNwb25zZUNvZGUgPSByZXBseS5ib2R5LnJlc3BvbnNlQ29kZTsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlQ29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICByZXNvbHZlKDIwMCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlQ29kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBRdWVyaWVzIHRoZSBHbG9iYWwgUmVnaXN0cnkgZm9yIGEgZ2l2ZW4gR1VJRC4KICAgICAqIFJldHVybnMgYSBHcmFwaCBDb25uZWN0b3IgQ29udGFjdCBEYXRhIGFzIGEgUHJvbWlzZS4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICBndWlkICBUaGUgR1VJRCB0byBxdWVyeSB0aGUgR2xvYmFsIFJlZ2lzdHJ5IGZvcgogICAgICogQHJldHVybnMgICB7UHJvbWlzZX0gICBQcm9taXNlICAgR3JhcGggQ29ubmVjdG9yIENvbnRhY3QgRGF0YSBjb250YWluaW5nIFVzZXJJRHMuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncXVlcnlHbG9iYWxSZWdpc3RyeScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcXVlcnlHbG9iYWxSZWdpc3RyeShndWlkKSB7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAnUkVBRCcsCiAgICAgICAgZnJvbTogdGhpcy5faHlwZXJ0eVJ1bnRpbWVVUkwgKyAnL2dyYXBoLWNvbm5lY3RvcicsCiAgICAgICAgdG86ICdnbG9iYWw6Ly9yZWdpc3RyeS8nLAogICAgICAgIGJvZHk6IHsgZ3VpZDogZ3VpZCB9CiAgICAgIH07CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBpZiAoX3RoaXMubWVzc2FnZUJ1cyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZWplY3QoJ01lc3NhZ2VCdXMgbm90IGZvdW5kIG9uIEdyYXBoQ29ubmVjdG9yJyk7CiAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CgogICAgICAgICAgICAvLyByZXBseSBzaG91bGQgYmUgdGhlIEpTT04gcmV0dXJuZWQgZnJvbSB0aGUgR2xvYmFsIFJlZ2lzdHJ5IFJFU1QtaW50ZXJmYWNlCiAgICAgICAgICAgIHZhciB1bndyYXBwZWRKV1QgPSBLSlVSLmp3cy5KV1MucGFyc2UocmVwbHkuYm9keS5kYXRhKTsKICAgICAgICAgICAgdmFyIGRhdGFFbmNvZGVkID0gdW53cmFwcGVkSldULnBheWxvYWRPYmouZGF0YTsKICAgICAgICAgICAgdmFyIGRhdGFEZWNvZGVkID0gX2Jhc2U2NFVybDIuZGVmYXVsdC5kZWNvZGUoZGF0YUVuY29kZWQpOwogICAgICAgICAgICB2YXIgZGF0YUpTT04gPSBKU09OLnBhcnNlKGRhdGFEZWNvZGVkKTsKCiAgICAgICAgICAgIHZhciBwdWJsaWNLZXlPYmplY3QgPSBfanNyc2FzaWduMi5kZWZhdWx0LktFWVVUSUwuZ2V0S2V5KGRhdGFKU09OLnB1YmxpY0tleSk7CiAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gS0pVUi5qd3MuSldTLnZlcmlmeShyZXBseS5ib2R5LmRhdGEsIHB1YmxpY0tleU9iamVjdCwgWydFUzI1NiddKTsKICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7CiAgICAgICAgICAgICAgcmVqZWN0KCdSZXRyaWV2ZWQgUmVjb3JkIG5vdCB2YWxpZCEnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YXIgcXVlcmllZENvbnRhY3QgPSBuZXcgX0dyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEyLmRlZmF1bHQoZGF0YUpTT04uZ3VpZCwgJycsICcnKTsKICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGFKU09OLnVzZXJJRHMgIT0gJ3VuZGVmaW5lZCcgJiYgZGF0YUpTT04udXNlcklEcyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBxdWVyaWVkQ29udGFjdC51c2VySURzID0gZGF0YUpTT04udXNlcklEczsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmVzb2x2ZShxdWVyaWVkQ29udGFjdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGRzIGEgVXNlcklEIGZvciB0aGUgdXNlci4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIHVzZXJJRCAgICAgICAgICBUaGUgVXNlcklEIGZvciBhIERvbWFpbiBSZWdpc3RyeSB0byBhZGQgZm9yIHRoZSB1c2VyLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZFVzZXJJRCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVXNlcklEKHVzZXJJRCkgewogICAgICAvLyBjaGVjayBpZiBhbHJlYWR5IGluc2lkZQogICAgICB2YXIgZm91bmQgPSBmYWxzZTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnVzZXJJRHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC51c2VySURzID09IHVzZXJJRCkgewogICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC51c2VySURzLnB1c2godXNlcklEKTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlcyBhIFVzZXJJRCBmb3IgdGhlIHVzZXIuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICB1c2VySUQgICAgICAgICAgVGhlIFVzZXJJRCB0byByZW1vdmUuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncmVtb3ZlVXNlcklEJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVVc2VySUQodXNlcklEKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC51c2VySURzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEcyA9PSB1c2VySUQpIHsKICAgICAgICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgYSBjb250YWN0IHRvIHRoZSBHcmFwaCBDb25uZWN0b3IuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgZ3VpZCAgICAgICAgICBHVUlEIG9mIHRoZSBuZXcgY29udGFjdC4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICBmaXJzdE5hbWUgICAgIEZpcnN0IG5hbWUgb2YgdGhlIG5ldyBjb250YWN0LgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgIGxhc3RuYW1lICAgICAgTGFzdCBuYW1lIG9mIHRoZSBuZXcgY29udGFjdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdhZGRDb250YWN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDb250YWN0KGd1aWQsIGZpcnN0TmFtZSwgbGFzdE5hbWUpIHsKCiAgICAgIC8vIFRPRE86IHdoYXQgaWYgdHdvIGNvbnRhY3RzIGhhdmUgdGhlIHNhbWUgR1VJRD8KICAgICAgLy8gVE9ETzogcmVqZWN0IGludmFsaWQgR1VJRHMKCiAgICAgIHRoaXMuY29udGFjdHMucHVzaChuZXcgX0dyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEyLmRlZmF1bHQoZ3VpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSkpOwogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlIGEgY29udGFjdCBmcm9tIHRoZSBHcmFwaCBDb25uZWN0b3IuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICBndWlkICAgICAgR1VJRCBvZiB0aGUgdXNlciB0byBiZSByZW1vdmVkLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlbW92ZUNvbnRhY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUNvbnRhY3QoZ3VpZCkgewogICAgICAvLyByZW1vdmUgZnJvbSBjb250YWN0cwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29udGFjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5jb250YWN0c1tpXS5ndWlkID09IGd1aWQpIHsKICAgICAgICAgIHRoaXMuY29udGFjdHMuc3BsaWNlKGksIDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gcmUtY2FsY3VsYXRlIEJGMWhvcAogICAgICB0aGlzLmNhbGN1bGF0ZUJsb29tRmlsdGVyMUhvcCgpOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsY3VsYXRlcyB0aGUgQmxvb20gZmlsdGVyIGNvbnRhaW5pbmcgYWxsIG5vbi1wcml2YXRlIGNvbnRhY3RzLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2NhbGN1bGF0ZUJsb29tRmlsdGVyMUhvcCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY3VsYXRlQmxvb21GaWx0ZXIxSG9wKCkgewogICAgICB2YXIgYmYgPSBuZXcgX0Jsb29tRmlsdGVyMi5kZWZhdWx0KDQzMTMyOCwgLy8gbnVtYmVyIG9mIGJpdHMgdG8gYWxsb2NhdGUuIFdpdGggMzAwMDAgZW50cmllcywgd2UgaGF2ZSBhIGZhbHNlIHBvc2l0aXZlIHJhdGUgb2YgMC4xICUuCiAgICAgIDEwIC8vIG51bWJlciBvZiBoYXNoIGZ1bmN0aW9ucy4KICAgICAgKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbnRhY3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKCF0aGlzLmNvbnRhY3RzW2ldLnByaXZhdGVDb250YWN0KSB7CiAgICAgICAgICBiZi5hZGQodGhpcy5jb250YWN0c1tpXS5ndWlkKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5jb250YWN0c0Jsb29tRmlsdGVyMUhvcCA9IGJmOwogICAgICB0aGlzLmxhc3RDYWxjdWxhdGlvbkJsb29tRmlsdGVyMUhvcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldHMgY29udGFjdHMgYnkgbmFtZS4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICBuYW1lICAgIEZpcnN0IG9yIGxhc3QgbmFtZSB0byBsb29rIGZvciBpbiB0aGUgY29udGFjdCBsaXN0LgogICAgICogQHJldHVybnMgIHthcnJheX0gICBtYXRjaGluZ0NvbnRhY3RzICAgICAgIENvbnRhY3RzIG1hdGNoaW5nIHRoZSBnaXZlbiBuYW1lLiBUaGUgZm9ybWF0IGlzOiBDb250YWN0czxHcmFwaENvbm5lY3RvckNvbnRhY3REYXRhPi4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRDb250YWN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb250YWN0KG5hbWUpIHsKICAgICAgLy8gVE9ETzogb3B0aW1pemUsIGUuZy4sIGZpbmQgbWlzc3BlbGxlZCBwZW9wbGUKICAgICAgdmFyIHJ0bkFycmF5ID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb250YWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLmNvbnRhY3RzW2ldLmZpcnN0TmFtZSA9PSBuYW1lIHx8IHRoaXMuY29udGFjdHNbaV0ubGFzdE5hbWUgPT0gbmFtZSkgewogICAgICAgICAgcnRuQXJyYXkucHVzaCh0aGlzLmNvbnRhY3RzW2ldKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJ0bkFycmF5OwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2tzLCBpZiB0aGUgZ2l2ZW4gR1VJRCBpcyBrbm93biBhbmQgcmV0dXJucyBhIGxpc3Qgb2YgY29udGFjcyB0aGF0IGFyZSBkaXJlY3QgY29ubmVjdGlvbnMgYXMgd2VsbCBhcyBhIGxpc3Qgb2YgY29udGFjdHMgdGhhdCAobW9zdCBsaWtlbHkpIGtub3cgdGhlIGdpdmVuIGNvbnRhY3QuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICBndWlkICAgICAgR1VJRCBvZiB0aGUgY29udGFjdCB0byBsb29rIGZvci4KICAgICAqIEByZXR1cm5zICB7YXJyYXl9ICAgIHJlbGF0ZWRDb250YWN0cyAgICAgTGlzdCBvZiByZWxhdGVkIGRpcmVjdCBjb250YWN0cyBhbmQgb2YgcmVsYXRlZCBmcmllbmRzLW9mLWZyaWVuZHMgY29udGFjdHMuVGhlIGZvcm1hdCBpczogUmVsYXRlZENvbnRhY3RzPERpcmVjdDxHcmFwaENvbm5lY3RvckNvbnRhY3REYXRhPixGb0Y8R3JhcGhDb25uZWN0b3JDb250YWN0RGF0YT4+LgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2NoZWNrR1VJRCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tHVUlEKGd1aWQpIHsKICAgICAgdmFyIGRpcmVjdENvbnRhY3RzQXJyYXkgPSBbXTsKICAgICAgdmFyIGZvZkNvbnRhY3RzQXJyYXkgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbnRhY3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuY29udGFjdHNbaV0uZ3VpZCA9PSBndWlkKSB7CiAgICAgICAgICBkaXJlY3RDb250YWN0c0FycmF5LnB1c2godGhpcy5jb250YWN0c1tpXSk7CiAgICAgICAgfQogICAgICAgIHZhciBiZjFob3AgPSB0aGlzLmNvbnRhY3RzW2ldLmNvbnRhY3RzQmxvb21GaWx0ZXIxSG9wOwogICAgICAgIGlmIChiZjFob3AgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgaWYgKGJmMWhvcC50ZXN0KGd1aWQpKSB7CiAgICAgICAgICAgIGZvZkNvbnRhY3RzQXJyYXkucHVzaCh0aGlzLmNvbnRhY3RzW2ldKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIHJ0bkFycmF5ID0gW107CiAgICAgIHJ0bkFycmF5LnB1c2goZGlyZWN0Q29udGFjdHNBcnJheSwgZm9mQ29udGFjdHNBcnJheSk7CiAgICAgIHJldHVybiBydG5BcnJheTsKICAgIH0KCiAgICAvLyBUT0RPOiBleHBvcnRHcmFwaERhdGEoPyl7fQogICAgLy8gVE9ETzogaW1wb3J0R3JhcGhEYXRhKD8pe30KCiAgfSwgewogICAga2V5OiAnbWVzc2FnZUJ1cycsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX21lc3NhZ2VCdXM7CiAgICB9CgogICAgLyoqCiAgICAqIFNldHMgdGhlIE1lc3NhZ2VCdXMuCiAgICAqIEBwYXJhbSB7TWVzc2FnZUJ1c30gICAgICAgICAgIG1lc3NhZ2VCdXMgICAgVGhlIE1lc3NhZ2UgQnVzLgogICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KG1lc3NhZ2VCdXMpIHsKICAgICAgdGhpcy5fbWVzc2FnZUJ1cyA9IG1lc3NhZ2VCdXM7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gR3JhcGhDb25uZWN0b3I7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IEdyYXBoQ29ubmVjdG9yOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL0Jsb29tRmlsdGVyIjoxODIsIi4vR2xvYmFsUmVnaXN0cnlSZWNvcmQiOjE4MywiLi9HcmFwaENvbm5lY3RvckNvbnRhY3REYXRhIjoxODUsImJhc2U2NC11cmwiOjE2LCJiaXAzOSI6MjEsImJpdGNvaW5qcy1saWIiOjMyLCJidWZmZXIiOjcwLCJqc3JzYXNpZ24iOjEzMCwic2pjbCI6MTY5fV0sMTg1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgoqIFJlcHJlc2VudHMgaW5mb3JtYXRpb24gYWJvdXQgYSBjb250YWN0LgoqIEBhdXRob3IgYmVpZXJsZUB0dS1iZXJsaW4uZGUKKi8KCnZhciBHcmFwaENvbm5lY3RvckNvbnRhY3REYXRhID0gZnVuY3Rpb24gKCkgewoKICAvKioKICAgKiBDb25zdHJ1Y3RzIGEgbmV3IG9iamVjdCByZXByZXNlbnRpbmcgaW5mb3JtYXRpb24gYWJvdXQgb25lIGNvbnRhY3QuCiAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgZ3VpZCAgICAgICAgVGhlIEdVSUQgb2YgdGhlIG5ldyBjb250YWN0LgogICAqIEBwYXJhbSAge1N0cmluZ30gICBmaXJzdE5hbWUgICBUaGUgZmlyc3QgbmFtZSBvZiB0aGUgbmV3IGNvbnRhY3QuCiAgICogQHBhcmFtICB7U3RyaW5nfSAgIGxhc3ROYW1lICAgIFRoZSBsYXN0IG5hbWUgb2YgdGhlIG5ldyBjb250YWN0LgogICAqLwoKICBmdW5jdGlvbiBHcmFwaENvbm5lY3RvckNvbnRhY3REYXRhKGd1aWQsIGZpcnN0TmFtZSwgbGFzdE5hbWUpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHcmFwaENvbm5lY3RvckNvbnRhY3REYXRhKTsKCiAgICB0aGlzLl9ndWlkID0gZ3VpZDsKICAgIHRoaXMuX3VzZXJJRHMgPSBbXTsKICAgIHRoaXMuX2ZpcnN0TmFtZSA9IGZpcnN0TmFtZTsKICAgIHRoaXMuX2xhc3ROYW1lID0gbGFzdE5hbWU7CiAgICB0aGlzLl9wcml2YXRlQ29udGFjdCA9IGZhbHNlOwogICAgdGhpcy5fbGFzdFN5bmNCbG9vbUZpbHRlcjFIb3AgPSBuZXcgRGF0ZSgwKS50b0lTT1N0cmluZygpOwogICAgdGhpcy5fbGFzdFN5bmNEb21haW5Vc2VySURzID0gbmV3IERhdGUoMCkudG9JU09TdHJpbmcoKTsKICAgIHRoaXMuX3Jlc2lkZW5jZUxvY2F0aW9uOwogICAgdGhpcy5fZ3JvdXBzID0gW107CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBHVUlELgogICAqIEByZXR1cm5zICB7U3RyaW5nfSAgICAgR1VJRCAgICAgICAgR1VJRCBvZiB0aGUgY29udGFjdC4KICAgKi8KCgogIF9jcmVhdGVDbGFzcyhHcmFwaENvbm5lY3RvckNvbnRhY3REYXRhLCBbewogICAga2V5OiAiZ3VpZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2d1aWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBHVUlELgogICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgR1VJRCAgICAgICAgR1VJRCBvZiB0aGUgY29udGF0LgogICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChndWlkKSB7CiAgICAgIHRoaXMuX2d1aWQgPSBndWlkOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgdXNlciBJRHMuCiAgICAgKiBAcmV0dXJucyAge0xpc3Q8U3RyaW5nPn0gICAgIHVzZXJJRHMgICAgICAgIFVzZXJJRHMgb2YgdGhlIGNvbnRhY3QuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidXNlcklEcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJRHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIHRoZSB1c2VySURzLgogICAgICogQHBhcmFtICB7TGlzdDxTdHJpbmc+fSAgICAgdXNlcklEcyAgICAgICAgVXNlcklEcyBvZiB0aGUgY29udGF0LgogICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh1c2VySURzKSB7CiAgICAgIHRoaXMuX3VzZXJJRHMgPSB1c2VySURzOwogICAgICB0aGlzLl9sYXN0U3luY0RvbWFpblVzZXJJRHMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBuYW1lLgogICAgICogQHJldHVybnMgIHtTdHJpbmd9ICAgICBmaXJzdE5hbWUgICAgICAgIEZpcnN0IG5hbWUgb2YgdGhlIGNvbnRhY3QuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZmlyc3ROYW1lIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fZmlyc3ROYW1lOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgZmlyc3QgbmFtZS4KICAgICAqIEBwYXJhbSAge1N0cmluZ30gICAgIGZpcnN0TmFtZSAgICAgICAgRmlyc3QgbmFtZSBvZiB0aGUgY29udGF0LgogICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChmaXJzdE5hbWUpIHsKICAgICAgdGhpcy5fZmlyc3ROYW1lID0gZmlyc3ROYW1lOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgbGFzdCBuYW1lLgogICAgICogQHJldHVybnMgIHtTdHJpbmd9ICAgICBsYXN0TmFtZSAgICAgICAgTGFzdCBuYW1lIG9mIHRoZSBjb250YWN0LgogICAgICovCgogIH0sIHsKICAgIGtleTogImxhc3ROYW1lIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fbGFzdE5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBsYXN0IG5hbWUuCiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICBsYXN0TmFtZSAgICAgICAgTGFzdCBuYW1lIG9mIHRoZSBjb250YXQuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KGxhc3ROYW1lKSB7CiAgICAgIHRoaXMuX2xhc3ROYW1lID0gbGFzdE5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBwcml2YWN5IHN0YXR1cyBvZiB0aGUgY29udGFjdC4KICAgICAqIEByZXR1cm5zICB7Qm9vbGVhbn0gICAgIHByaXZhdGVDb250YWN0ICAgICAgICBUcnVlL2ZhbHNlIHZhbHVlIGluZGljYXRpbmcgdGhlIHByaXZhY3kgc3RhdHVzIG9mIHRoZSBjb250YWN0LgogICAgICovCgogIH0sIHsKICAgIGtleTogInByaXZhdGVDb250YWN0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcHJpdmF0ZUNvbnRhY3Q7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBwcml2YWN5IHN0YXR1cyBvZiB0aGUgY29udGFjdCBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIEJvb2xlYW4gdmFsdWUuCiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSAgICAgYm9vbFByaXZhdGUgICAgICAgIFRydWUvZmFsc2UgdmFsdWUgaW5kaWNhdGluZyB0aGUgcHJpdmFjeSBzdGF0dXMgb2YgdGhlIGNvbnRhY3QuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KGJvb2xQcml2YXRlKSB7CiAgICAgIHRoaXMuX3ByaXZhdGVDb250YWN0ID0gYm9vbFByaXZhdGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBCbG9vbSBmaWx0ZXIgY29udGFpbmluZyB0aGUgaGFzaGVkIEdVSURzIG9mIHRoZSBjb250YWN0cyBmb3IgdGhlIGNvbnRhY3QuCiAgICAgKiBAcmV0dXJucyAge0Jsb29tRmlsdGVyfSAgICAgYmYgICAgICAgIEJsb29tIGZpbHRlciBmb3IgdGhlIGNvbnRhY3QuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY29udGFjdHNCbG9vbUZpbHRlcjFIb3AiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jb250YWN0c0Jsb29tRmlsdGVyMUhvcDsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIGZyaWVuZHMtb2YtZnJpZW5kcyBCbG9vbSBmaWx0ZXIgY29udGFpbmluZyB0aGUgaGFzaGVkIEdVSURzIG9mIHRoZSBjb250YWN0cyBmb3IgdGhlIGNvbnRhY3QuCiAgICAgKiBAcGFyYW0gIHtCbG9vbUZpbHRlcn0gICAgIGJmICAgICAgICBCbG9vbSBmaWx0ZXIgZm9yIHRoZSBjb250YWN0LgogICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChiZikgewogICAgICB0aGlzLl9jb250YWN0c0Jsb29tRmlsdGVyMUhvcCA9IGJmOwogICAgICB0aGlzLl9sYXN0U3luY0Jsb29tRmlsdGVyMUhvcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGdlb2hhc2ggb2YgdGhlIHJlc2lkZW5jZSBsb2NhdGlvbi4KICAgICAqIEByZXR1cm5zICB7U3RyaW5nfSAgICAgZ2VvaGFzaCAgICAgICAgR2VvaGFzaCBvZiB0aGUgcmVzaWRlbmNlIGxvY2F0aW9uLgogICAgICovCgogIH0sIHsKICAgIGtleTogInJlc2lkZW5jZUxvY2F0aW9uIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcmVzaWRlbmNlTG9jYXRpb247CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBnZW9oYXNoIG9mIHRoZSByZXNpZGVuY2UgbG9jYXRpb24uCiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICBnZW9oYXNoICAgICAgICBHZW9oYXNoIG9mIHRoZSByZXNpZGVuY2UgbG9jYXRpb24uCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KGdlb2hhc2gpIHsKICAgICAgdGhpcy5fcmVzaWRlbmNlTG9jYXRpb24gPSBnZW9oYXNoOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZ3JvdXBzLgogICAgICogQHJldHVybnMgIHtMaXN0PFN0cmluZz59ICAgICBncm91cHMgICAgICAgIEdyb3VwcyBvZiB0aGUgY29udGFjdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJncm91cHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9ncm91cHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBncm91cHMuCiAgICAgKiBAcGFyYW0gIHtMaXN0PFN0cmluZz59ICAgICBncm91cHMgICAgICAgIEdyb3VwcyBvZiB0aGUgY29udGF0LgogICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChncm91cHMpIHsKICAgICAgdGhpcy5fZ3JvdXBzID0gZ3JvdXBzOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGE7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGE7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTg2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMuanMnKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCioKKiBUaGUgSWRlbnRpdHkgTW9kdWxlIChJZCBNb2R1bGUpIGlzIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGhhbmRsaW5nIHRoZQoqIHVzZXIgaWRlbnRpdHkgYW5kIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGlzIGlkZW50aXR5IHdpdGggdGhlIEh5cGVydHkgaW5zdGFuY2VzLAoqIGluIG9yZGVyIHRvIG1ha2UgSHlwZXJ0eSBpbnN0YW5jZXMgaWRlbnRpZmlhYmxlLiBUaGUgaWRlbnRpdHkgaW4gdGhlIHJlVEhJTksgcHJvamVjdAoqIGlzIG5vdCBmaXhlZCB0byBhIHVuaXF1ZSBJZGVudGl0eSBTZXJ2aWNlIFByb3ZpZGVyLCBidXQgb2J0YWluZWQgdGhyb3VnaCBzZXZlcmFsCiogZGlmZmVyZW50IElkZW50aXR5IHNvdXJjZXMuIFdpdGggdGhpcyBhcHByb2FjaCwgdGhlIElkIE1vZHVsZSBwcm92aWRlcyB0byB0aGUgdXNlciB0aGUKKiBvcHRpb24gdG8gY2hvb3NlIHRoZSBwcmVmZXJyZWQgbWV0aG9kIGZvciBhdXRoZW50aWNhdGlvbi4KKiBUaGlzIG1vZHVsZSB3aWxsIHRodXMgYWJsZSB0byBzdXBwb3J0IG11bHRpcGxlIElkZW50aXR5IGFjcXVpc2l0aW9uIG1ldGhvZHMsCiogc3VjaCBhcyBPcGVuSUQgY29ubmVjdCAxLjAsIEtlcmJlcm9zIFN5c3RlbSwgb3IgYXV0aGVudGljYXRpb24gdGhyb3VnaCBzbWFydCBjYXJkcy4KKiBGb3IgZXhhbXBsZSwgYSB1c2VyIHdpdGggYSBHb29nbGUgYWNjb3VudCBjYW4gdXNlIHRoZSBHb29nbGUgYXMgYW4gSWRlbnRpdHkgUHJvdmlkZXIgdG8gcHJvdmlkZSBJZGVudGl0eSBUb2tlbnMsCiogIHdoaWNoIGNhbiBiZSB1c2VkIGJ5IHRoZSBJZGVudGl0eSBNb2R1bGUgdG8gYXNzb2NpYXRlIGl0IHdpdGggYSBIeXBlcnR5IGluc3RhbmNlLgoqCiogVGhlIElkZW50aXR5IE1vZHVsZSB1c2VzIGEgbm9kZSBwYWNrYWdlLCB0aGUgSGVsbG9KUywgd2hpY2ggaXMgYSBjbGllbnQtc2lkZSBKYXZhU2NyaXB0IEFQSSBmb3IgYXV0aGVudGljYXRpb24KKiB0aGF0IGZhY2lsaXRhdGVzIHRoZSByZXF1ZXN0cyBmb3IgdGhlIE9wZW5JRCBjb25uZWN0IHByb3RvY29sLiBUaGlzIG1ldGhvZCBhbGxvd3MgZm9yIHNvbWUgYWJzdHJhY3Rpb24KKiB3aGVuIG1ha2luZyByZXF1ZXN0cyBmb3IgZGlmZmVyZW50IElkZW50aXR5IFByb3ZpZGVycywgc3VjaCBhcyBPcGVuSUQgY29ubmVjdCB1c2VkIGJ5IEdvb2dsZSwgRmFjZWJvb2ssIE1pY3Jvc29mdCwgZm9yIGV4YW1wbGUuCioKKiBXaGVuIGEgcmVxdWVzdCBmb3IgYSB1c2VyIGlkZW50aXR5IGlzIG1hZGUgdXNpbmcgdGhlIG1ldGhvZCBsb2dpbldpdGhSUChpZGVudGlmaWVyLCBzY29wZSksCiogdGhpcyBtZXRob2Qgd2lsbCBhbmFseXNlIHRoZSBJZGVudGl0eSBQcm92aWRlciBjaG9zZW4gdG8gb2J0YWluIGFuIGlkZW50aXR5IGFuZCB3aWxsIHVzZSB0aGUgSGVsbG9KUyBub2RlIHBhY2thZ2UKKiB3aXRoIHRoZSBzZWxlY3RlZCBJZGVudGl0eSBQcm92aWRlciBhbmQgaWRlbnRpdHkgc2NvcGUuIEFmdGVyIHRoZSBIZWxsb0pTIHJlcXVlc3QgZm9yIGFuIEFjY2VzcyBUb2tlbgoqIHRvIHRoZSBJZGVudGl0eSBQcm92aWRlcnMsIHRoZSB1c2VyIHdpbGwgYmUgcHJvbXB0ZWQgdG8gYXV0aGVudGljYXRlIHRvd2FyZHMgdGhlIElkZW50aXR5IFByb3ZpZGVyLgoqIFVwb24gcmVjZWl2aW5nIHRoZSBBY2Nlc3MgVG9rZW4sIHRoaXMgdG9rZW4gaXMgdmFsaWRhdGVkIHdpdGggYSBSRVNUZnVsIHdlYiBzZXJ2aWNlIHJlcXVlc3QgdG8gYW4gZW5kcG9pbnQKKiBvbiB0aGUgSWRlbnRpdHkgUHJvdmlkZXIgQXV0aG9yaXphdGlvbiBTZXJ2ZXIsIGFuZCBhZnRlciB0aGUgdmFsaWRhdGlvbiBpcyBkb25lLAoqIGFuIElEIHRva2VuIGlzIG9idGFpbmVkIHdpdGggdGhlIGluZm9ybWF0aW9uIGFjY29yZGluZyB0byB0aGUgc2NvcGUgcmVxdWlyZWQuCiogVGhpcyBJRCB0b2tlbiBpcyB0aGVuIHByZXNlcnZlZCBpbiB0aGlzIG1vZHVsZSB0aGF0IGNhbiBvYnRhaW5lZCB0aHJvdWdoIHRoZSBnZXRJZGVudGl0aWVzKCkKKiBhbmQgaXMgcGFzc2VkIGFzIHJldHVybiB2YWx1ZSBvZiB0aGUgbG9naW5XaXRoUlAgZnVuY3Rpb24uIFRoZSBtZXRob2RzIGdlbmVyYXRlQXNzZXJ0aW9uIGFuZCB2YWxpZGF0ZUFzc2VydGlvbiBoYXZlIG5vdCB5ZXQgYmVlbiBkZXZlbG9wZWQuCioKKi8KCnZhciBJZGVudGl0eU1vZHVsZSA9IGZ1bmN0aW9uICgpIHsKCiAgLyoqCiAgKiBUaGlzIGlzIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXNlIHRoZSBJZGVudGl0eSBNb2R1bGUgaXQgZG9lcyBub3QgcmVxdWlyZSBhbnkgaW5wdXQuCiAgKi8KCiAgZnVuY3Rpb24gSWRlbnRpdHlNb2R1bGUoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSWRlbnRpdHlNb2R1bGUpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy90byBzdG9yZSBpdGVtcyB3aXRoIHRoaXMgZm9ybWF0OiB7aWRlbnRpdHk6IGlkZW50aXR5VVJMLCB0b2tlbjogdG9rZW5JRH0KICAgIF90aGlzLmlkZW50aXRpZXMgPSBbXTsKICB9CgogIC8qKgogICogcmV0dXJuIHRoZSBtZXNzYWdlQnVzIGluIHRoaXMgUmVnaXN0cnkKICAqIEBwYXJhbSB7TWVzc2FnZUJ1c30gICAgICAgICAgIG1lc3NhZ2VCdXMKICAqLwoKCiAgX2NyZWF0ZUNsYXNzKElkZW50aXR5TW9kdWxlLCBbewogICAga2V5OiAnZ2V0SWRlbnRpdGllcycsCgoKICAgIC8qKgogICAgKiBGdW5jdGlvbiB0byByZXR1cm4gYWxsIHRoZSBpZGVudGl0aWVzIHJlZ2lzdGVyZWQgd2l0aGluIGEgc2Vzc2lvbiBieSBhIHVzZXIuCiAgICAqIFRoZXNlIGlkZW50aXRpZXMgYXJlIHJldHVybmVkIGluIGFuIGFycmF5IGNvbnRhaW5pbmcgYSBKU09OIHBhY2thZ2UgZm9yIGVhY2ggdXNlciBpZGVudGl0eS4KICAgICogQHJldHVybiB7QXJyYXk8SWRlbnRpdGllcz59ICAgICAgICAgQXJyYXkgICAgICAgICBJZGVudGl0aWVzCiAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGdldElkZW50aXRpZXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5pZGVudGl0aWVzOwogICAgfQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiB0aGF0IHJlc29sdmUgYW5kIGNyZWF0ZSB0aGUgZG9tYWluVVJMIGluIGNhc2UgaXQgaXMgcHJvdmlkZWQgb25lLiBJZiBub3QsIHJlc29sdmUgdGhlIGRlZmF1bHQgZG9tYWluVVJMCiAgICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgaWRwRG9tYWluICAgICBpZHBEb21haW4gKE9wdGlvbmFsKQogICAgKi8KCiAgfSwgewogICAga2V5OiAnX3Jlc29sdmVEb21haW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNvbHZlRG9tYWluKGlkcERvbWFpbikgewogICAgICBpZiAoIWlkcERvbWFpbikgewogICAgICAgIHJldHVybiAnZG9tYWluOi8vZ29vZ2xlLmNvbSc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICdkb21haW46Ly8nICsgaWRwRG9tYWluOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAqIEZ1bmN0aW9uIHRvIHJlcXVlc3QgYW4gSUQgVG9rZW4gZnJvbSBhIHVzZXIuIElmIG5vIHRva2VuIGV4aXN0cywgdGhlIElkZW50aXR5IE1vZHVsZQogICAgKiB3aWxsIHRyeSB0byBvYnRhaW4gb25lIGZyb20gYW4gSWRlbnRpdHkgUHJvdmlkZXIsIGFuZCB0aGUgdXNlciB3aWxsIGJlIGFza2VkIHRvIGF1dGhlbnRpY2F0ZQogICAgKiAgdG93YXJkcyB0aGUgSWRlbnRpdHkgUHJvdmlkZXIuCiAgICAqIFRoZSBmdW5jdGlvbiByZXR1cm5zIGEgcHJvbWlzZSB3aXRoIGEgdG9rZW4gY29udGFpbmluZyB0aGUgdXNlciBpbmZvcm1hdGlvbi4KICAgICoKICAgICogQHBhcmFtICB7SWRlbnRpZmllcn0gICAgICBpZGVudGlmaWVyICAgICAgaWRlbnRpZmllcgogICAgKiBAcGFyYW0gIHtTY29wZX0gICAgICAgICAgIHNjb3BlICAgICAgICAgICBzY29wZQogICAgKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgICAgIFByb21pc2UgICAgICAgICBJRFRva2VuIGNvbnRhaW5pbmcgdGhlIHVzZXIgaW5mb3JtYXRpb24KICAgICovCgogIH0sIHsKICAgIGtleTogJ2xvZ2luV2l0aFJQJywKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dpbldpdGhSUChpZGVudGlmaWVyLCBzY29wZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBfdGhpcy5nZXRJZGVudGl0eUFzc2VydGlvbigpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnbG9naW5XaXRoUlAnKTsKICAgICAgICAgIHJlc29sdmUodmFsdWUpOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2dpbldpdGhSUCBlcnInKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgLyoKICAgICAgICBXaGVuIGNhbGxpbmcgdGhpcyBmdW5jdGlvbiwgaWYgZXZlcnl0aGluZyBpcyBmaW5lLCBhIHNtYWxsIHBvcC11cCB3aWxsIG9wZW4gcmVxdWVzdGluZyBhIGxvZ2luIHdpdGggYSBnb29nbGUgYWNjb3VudC4gQWZ0ZXIgdGhlIGxvZ2luIGlzIG1hZGUsIHRoZSBwb3AtdXAgd2lsbCBjbG9zZSBhbmQgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSBJRCB0b2tlbi4KICAgICAgICBUaGlzIGZ1bmN0aW9uIHdhcyB0ZXN0ZWQgd2l0aCB0aGUgVVJMOiBodHRwOi8vMTI3LjAuMC4xOjgwODAvIGFuZCB3aXRoIHRoZSBzYW1lIHJlZGlyZWN0IFVSSQogICAgICAgCUluIGNhc2UgdGhlIHJlZGlyZWN0IFVSSSBpcyBub3QgYWNjZXB0ZWQgb3IgaXMgcmVxdWlyZWQgdG8gYWRkIG90aGVycyByZWRpcmVjdCBVUklzLCBhIGxpdHRsZSBpbmZvcm1hdGlvbiBpcyBwcm92aWRlZCB0byBmaXggdGhlIHByb2JsZW06CiAgICAgICAJU28gdGhhdCBhbiBhcHBsaWNhdGlvbiBjYW4gdXNlIEdvb2dsZSdzIE9BdXRoIDIuMCBhdXRoZW50aWNhdGlvbiBzeXN0ZW0gZm9yIHVzZXIgbG9naW4sCiAgICAgIAlmaXJzdCBpcyByZXF1aXJlZCB0byBzZXQgdXAgYSBwcm9qZWN0IGluIHRoZSBHb29nbGUgRGV2ZWxvcGVycyBDb25zb2xlIHRvIG9idGFpbiBPQXV0aCAyLjAgY3JlZGVudGlhbHMgYW5kIHNldCBhIHJlZGlyZWN0IFVSSS4KICAgICAgCUEgdGVzdCBhY2NvdW50IHdhcyBjcmVhdGVkIHRvIHNldCB0aGUgcHJvamVjdCBpbiB0aGUgR29vZ2xlIERldmVsb3BlcnMgQ29uc29sZSB0byBvYnRhaW4gT0F1dGggMi4wIGNyZWRlbnRpYWxzLAl3aXRoIHRoZSBmb2xsb3dpbmcgY3JlZGVudGlhbHM6CiAgICAgICAgICAgCXVzZXJuYW1lOiBvcGVuaWR0ZXN0MTBAZ21haWwuY29tCiAgICAgICAgICAgICBwYXNzd29yZDogdGVzdE9wZW5JRDEwCiAgICAgICAJVG8gYWRkIG1vcmUgVVJJJ3MsIGZvbGxvdyB0aGUgc3RlcHM6CiAgICAgIAkxwrogY2hvb3NlIHRoZSBwcm9qZWN0ICggY2FuIGJlIHRoZSBNeSBPcGVuSUQgUHJvamVjdCkJIGZyb20gIGh0dHBzOi8vY29uc29sZS5kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvamVjdHNlbGVjdG9yL2FwaXMvY3JlZGVudGlhbHMgdXNpbmcgdGhlIGNyZWRlbnRpYWxzIHByb3ZpZGVkIGFib3ZlLgogICAgICAJMsK6IE9wZW4gVGhlIENsaWVudCBXZWIgMSBsaXN0ZWQgaW4gT0F1dGggMi4wIENsaWVudCBJRCdzCiAgICAgIAkzwrogQWRkIHRoZSBVUkkgIGluIHRoZSBhdXRob3JpemVkIHJlZGlyZWN0IFVSSSBzZWN0aW9uLgogICAgICAgIDTCuiBjaGFuZ2UgdGhlIFJFRElSRUNUIHBhcmFtZXRlciBiZWxsb3cgd2l0aCB0aGUgcHJldGVuZGVkIFVSSQogICAgICAgICBpZGVudGl0eU1vZHVsZS5faGVsbG8uaW5pdCh7Z29vZ2xlOiAiODA4MzI5NTY2MDEyLXRxcjhxb2gxMTE5NDJnZDJrZzAwN3QwczhmMjc3cm9pLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIn0pOwogICAgICAgIGlkZW50aXR5TW9kdWxlLl9oZWxsbygiZ29vZ2xlIikubG9naW4oKTsKICAgICAgICovCiAgICAgIC8qbGV0IGluZm9Ub2tlbjsKICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgaWYgKF90aGlzLmluZm9Ub2tlbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvL1RPRE8gdmVyaWZ5IHdoZXRoZXIgdGhlIHRva2VuIGlzIHN0aWxsIHZhbGlkIG9yIG5vdC4KICAgICAgICAgIHJldHVybiByZXNvbHZlKF90aGlzLmluZm9Ub2tlbik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxldCBnb29nbGVPcGVuSUQgPSBuZXcgT3BlbklkTGliKCdnb29nbGUnLCAnODA4MzI5NTY2MDEyLXRxcjhxb2gxMTE5NDJnZDJrZzAwN3QwczhmMjc3cm9pLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tJyk7CiAgICAgICAgICAgZ29vZ2xlT3BlbklELm9wZW5Qb3B1cCgpLnRoZW4oZnVuY3Rpb24odG9rZW4pIHsKICAgICAgICAgICAgZ29vZ2xlT3BlbklELnZhbGlkYXRlVG9rZW4odG9rZW4pLnRoZW4oZnVuY3Rpb24odG9rZW4pIHsKICAgICAgICAgICAgICBnb29nbGVPcGVuSUQuZ2V0SW5mb1Rva2VuKHRva2VuLnRva2VuLCB0b2tlbi50b2tlbklEKS50aGVuKGZ1bmN0aW9uKGlkZW50aXR5QnVuZGxlKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5pZGVudGl0aWVzLnB1c2goaWRlbnRpdHlCdW5kbGUpOwogICAgICAgICAgICAgICAgaW5mb1Rva2VuID0gaWRlbnRpdHlCdW5kbGUuaW5mb1Rva2VuOwogICAgICAgICAgICAgICAgX3RoaXMuaW5mb1Rva2VuID0gaW5mb1Rva2VuOwogICAgICAgICAgICAgICAgcmVzb2x2ZShpbmZvVG9rZW4pOwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgIH0pOyovCiAgICB9CgogICAgLyoqCiAgICAqCiAgICAqIEZVTkNUSU9OIFRPIE9CVEFJTiBJREVOVElUWQogICAgKgogICAgKi8KCiAgfSwgewogICAga2V5OiAnb2J0YWluSWRlbnRpdHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9idGFpbklkZW50aXR5KGlkZW50aXR5UHJvdmlkZXIpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBpZGVudGl0aWVzID0gX3RoaXMuaWRlbnRpdGllczsKCiAgICAgIGlmICghaWRlbnRpdGllcykgewogICAgICAgIGdldElkZW50aXR5QXNzZXJ0aW9uKCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHt9KTsKICAgICAgfSBlbHNlIHt9CiAgICB9CgogICAgLyoqCiAgICAqIE9idGFpbiBhbiBJZGVudGl0eSBBc3NlcnRpb24KICAgICoKICAgICogQHJldHVybiB7SWRBc3NlcnRpb259ICAgICAgICAgICAgICBJZEFzc2VydGlvbgogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0SWRlbnRpdHlBc3NlcnRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldElkZW50aXR5QXNzZXJ0aW9uKGlkZW50aWZpZXIsIHNjb3BlLCBpZHBEb21haW4pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkb21haW4gPSBfdGhpcy5fcmVzb2x2ZURvbWFpbihpZHBEb21haW4pOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgaWYgKF90aGlzLmluZm9Ub2tlbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvL1RPRE8gdmVyaWZ5IHdoZXRoZXIgdGhlIHRva2VuIGlzIHN0aWxsIHZhbGlkIG9yIG5vdC4KICAgICAgICAgIHJldHVybiByZXNvbHZlKF90aGlzLmluZm9Ub2tlbik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIChmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHsgdHlwZTogJ0VYRUNVVEUnLCB0bzogZG9tYWluLCBmcm9tOiAnZG9tYWluOi8vbG9jYWxob3N0L2lkLW1vZHVsZScsIGJvZHk6IHsgcmVzb3VyY2U6ICdpZGVudGl0eScsIG1ldGhvZDogJ2xvZ2luJyB9IH07CiAgICAgICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXN1bHQpIHsKCiAgICAgICAgICAgICAgdmFyIHVybFRvT3BlbiA9IHJlc3VsdC5ib2R5LnZhbHVlLmxvZ2luVXJsOwoKICAgICAgICAgICAgICBpZiAoIXVybFRvT3BlbikgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgnRXJyb3I6IEludmFsaWQgVVJMIHRvIG9idGFpbiBJZGVudGl0eScpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy9PcGVuIGEgd2luZG93IHdpdGggdGhlIFVSTCByZWNlaXZlZCBieSB0aGUgcHJveHkKICAgICAgICAgICAgICAvL1RPRE8gbGF0ZXIgc3dhcCBhbnkgZXhpc3RpbmcgcmVkaXJlY3RVUkkgaW4gdGhlIHVybCwgZm9yIGEgc3BlY2lmaWMgb25lIGluIHRoZSBpZE1vZHVsZQogICAgICAgICAgICAgIHZhciB3aW4gPSB3aW5kb3cub3Blbih1cmxUb09wZW4sICdvcGVuSURyZXF1ZXN0JywgJ3dpZHRoPTgwMCwgaGVpZ2h0PTYwMCcpOwogICAgICAgICAgICAgIHZhciBwb2xsVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0cnkgewoKICAgICAgICAgICAgICAgICAgaWYgKHdpbi5jbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICByZWplY3QoJ1NvbWUgZXJyb3Igb2NjdXJlZC4nKTsKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHBvbGxUaW1lcik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKHdpbi5kb2N1bWVudC5VUkwuaW5kZXhPZignUkVESVJFQ1QnKSAhPT0gLTEgfHwgd2luLmRvY3VtZW50LlVSTC5pbmRleE9mKGxvY2F0aW9uLm9yaWdpbikgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwocG9sbFRpbWVyKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gd2luLmRvY3VtZW50LlVSTDsKCiAgICAgICAgICAgICAgICAgICAgd2luLmNsb3NlKCk7CgogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSB7IHR5cGU6ICdFWEVDVVRFJywgdG86IGRvbWFpbiwgZnJvbTogJ2RvbWFpbjovL2xvY2FsaG9zdC9pZC1tb2R1bGUnLCBib2R5OiB7IHJlc291cmNlOiAnaWRlbnRpdHknLCBtZXRob2Q6ICdsb2dpbicsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogdXJsIH0gfTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlcy5ib2R5LnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmlkZW50aXR5ID0gKDAsIF91dGlscy5nZXRVc2VyVVJMRnJvbUVtYWlsKShyZXN1bHQuaWRUb2tlbkpTT04uZW1haWwpOwogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmlkcCA9ICdnb29nbGUnOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaWRlbnRpdGllcy5wdXNoKHJlc3VsdCk7CgogICAgICAgICAgICAgICAgICAgICAgLy9UT0RPIGltcHJvdmUgbGF0ZXIKICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluZm9Ub2tlbiA9IHJlc3VsdC5pbmZvVG9rZW47CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5pbmZvVG9rZW4pOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgICAgIC8vcmVzb2x2ZSh1cmwpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIEdlbmVyYXRlcyBhbiBJZGVudGl0eSBBc3NlcnRpb24KICAgICoKICAgICogQHBhcmFtICB7RE9NU3RyaW5nfSBjb250ZW50cyAgICAgY29udGVudHMKICAgICogQHBhcmFtICB7RE9NU3RyaW5nfSBvcmlnaW4gICAgICAgb3JpZ2luCiAgICAqIEBwYXJhbSAge0RPTVN0cmluZ30gdXNlcm5hbWVIaW50IHVzZXJuYW1lSGludAogICAgKiBAcmV0dXJuIHtJZEFzc2VydGlvbn0gICAgICAgICAgICAgIElkQXNzZXJ0aW9uCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZW5lcmF0ZUFzc2VydGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2VuZXJhdGVBc3NlcnRpb24oY29udGVudHMsIG9yaWdpbiwgdXNlcm5hbWVIaW50LCBpZHBEb21haW4pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkb21haW4gPSBfdGhpcy5fcmVzb2x2ZURvbWFpbihpZHBEb21haW4pOwoKICAgICAgdmFyIG1lc3NhZ2UgPSB7IHR5cGU6ICdFWEVDVVRFJywgdG86IGRvbWFpbiwgZnJvbTogJ2RvbWFpbjovL2xvY2FsaG9zdC9pZC1tb2R1bGUnLCBib2R5OiB7IHJlc291cmNlOiAnaWRlbnRpdHknLCBtZXRob2Q6ICdnZW5lcmF0ZUFzc2VydGlvbicsCiAgICAgICAgICBwYXJhbXM6IHsgY29udGVudHM6IGNvbnRlbnRzLCBvcmlnaW46IG9yaWdpbiwgdXNlcm5hbWVIaW50OiB1c2VybmFtZUhpbnQgfSB9IH07CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuYm9keS52YWx1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QoJ2Vycm9yJywgcmVzdWx0LmJvZHkuY29kZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBPVEhFUiBVU0VSJ1MgSURFTlRJVFkKICAgICovCgogICAgLyoqCiAgICAqIEZ1bmN0aW9uIHRvIHZhbGlkYXRlIGFuIGlkZW50aXR5IGFzc2VydGlvbiBnZW5lcmF0ZWQgcHJldmlvdXNseS4KICAgICogUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgcmVzdWx0IGZyb20gdGhlIHZhbGlkYXRpb24uCiAgICAqIEBwYXJhbSAge0RPTVN0cmluZ30gYXNzZXJ0aW9uCiAgICAqIEBwYXJhbSAge0RPTVN0cmluZ30gb3JpZ2luICAgICAgIG9yaWdpbgogICAgKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgICAgIFByb21pc2UgICAgICAgICBwcm9taXNlIHdpdGggdGhlIHJlc3VsdCBmcm9tIHRoZSB2YWxpZGF0aW9uCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICd2YWxpZGF0ZUFzc2VydGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVBc3NlcnRpb24oYXNzZXJ0aW9uLCBvcmlnaW4sIGlkcERvbWFpbikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGRvbWFpbiA9IF90aGlzLl9yZXNvbHZlRG9tYWluKGlkcERvbWFpbik7CgogICAgICB2YXIgbWVzc2FnZSA9IHsgdHlwZTogJ0VYRUNVVEUnLCB0bzogZG9tYWluLCBmcm9tOiAnZG9tYWluOi8vbG9jYWxob3N0L2lkLW1vZHVsZScsIGJvZHk6IHsgcmVzb3VyY2U6ICdpZGVudGl0eScsIG1ldGhvZDogJ3ZhbGlkYXRlQXNzZXJ0aW9uJywKICAgICAgICAgIHBhcmFtczogeyBhc3NlcnRpb246IGFzc2VydGlvbiwgb3JpZ2luOiBvcmlnaW4gfSB9IH07CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuYm9keS52YWx1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QoJ2Vycm9yJywgcmVzdWx0LmJvZHkuY29kZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ21lc3NhZ2VCdXMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5fbWVzc2FnZUJ1czsKICAgIH0KCiAgICAvKioKICAgICogU2V0IHRoZSBtZXNzYWdlQnVzIGluIHRoaXMgUmVnaXN0cnkKICAgICogQHBhcmFtIHtNZXNzYWdlQnVzfSAgICAgICAgICAgbWVzc2FnZUJ1cwogICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KG1lc3NhZ2VCdXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgX3RoaXMuX21lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIElkZW50aXR5TW9kdWxlOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBJZGVudGl0eU1vZHVsZTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvdXRpbHMuanMiOjIwMX1dLDE4NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioKKiBUaGUgUG9saWN5IERlY2lzaW9uIFBvaW50IChQRFApIGRlY2lkZXMgaWYgYSBtZXNzYWdlIGlzIHRvIGJlIGF1dGhvcmlzZWQgYnkgY2hlY2tpbmcgYSBzZXQgb2YKKiBwb2xpY2llcy4gVGhlIHJlc291cmNlIHRvIGJlIHZlcmlmaWVkIGlzIHNwZWNpZmllZCBpbiB0aGUgZmlyc3Qgd29yZCBvZiB0aGUgJ2NvbmRpdGlvbicgZmllbGQgb2YKKiBhIFBvbGljeSBvYmplY3QuIFRoZSBpbXBsZW1lbnRhdGlvbiB0aGF0IHZlcmlmaWVzIGlmIHRoZSBtZXNzYWdlIGlzIGNvbXBsaWFudCB3aXRoIGEgcG9saWN5IGlzCiogc3BlY2lmaWVkIGluIGEgaGFzaHRhYmxlIHRvIGFsbG93IGR5bmFtaWMgZGVmaW5pdGlvbiBvZiB0aGUgaW1wbGVtZW50YXRpb24sIHByb3ZpZGluZwoqIGV4dGVuc2liaWxpdHkgdG8gdGhlIFBvbGljeSBFbmdpbmUgZnVuY3Rpb25hbGl0aWVzLgoqLwoKdmFyIFBEUCA9IGZ1bmN0aW9uICgpIHsKCiAgLyoqCiAgKiBUaGlzIG1ldGhvZCBpcyBpbnZva2VkIGJ5IHRoZSBQb2xpY3kgRW5naW5lIGFuZCBpbnN0YW50aWF0ZXMgdGhlIFBvbGljeSBEZWNpc2lvbiBQb2ludC4gSXQgaW5pdGlhbGlzZXMgb3IgbG9hZHMgZnJvbSB0aGUgUGVyc2lzdGVuY2UgTWFuYWdlciB0aGUgb2JqZWN0ICdteUxpc3RzJyB0byBzdG9yZSB0aGUgdXNlcidzIGxpc3RzLgogICogQHBhcmFtICB7UmVnaXN0cnl9ICAgIHJ1bnRpbWVSZWdpc3RyeQogICovCgogIGZ1bmN0aW9uIFBEUChydW50aW1lUmVnaXN0cnkpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQRFApOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBfdGhpcy5ydW50aW1lUmVnaXN0cnkgPSBydW50aW1lUmVnaXN0cnk7CiAgICBfdGhpcy5teUxpc3RzID0ge307IC8vIFRPRE86IGxvYWQgZnJvbSB0aGUgUGVyc2lzdGVuY2UgTWFuYWdlcgogIH0KCiAgLyoqCiAgKiBSZXR1cm5zIHRoZSBsaXN0IHdpdGggdGhlIGdpdmVuIGxpc3QgbmFtZS4KICAqIEBwYXJhbSAge1N0cmluZ30gIGxpc3ROYW1lCiAgKiBAcmV0dXJuIHtBcnJheX0gICBsaXN0CiAgKi8KCgogIF9jcmVhdGVDbGFzcyhQRFAsIFt7CiAgICBrZXk6ICdnZXRMaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMaXN0KGxpc3ROYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBsaXN0TmFtZSBpbiBfdGhpcy5teUxpc3RzID8gX3RoaXMubXlMaXN0c1tsaXN0TmFtZV0gOiBbXTsKICAgIH0KCiAgICAvKioKICAgICogQ3JlYXRlcyBhIGxpc3Qgd2l0aCB0aGUgZ2l2ZW4gbmFtZS4KICAgICogQHBhcmFtICB7U3RyaW5nfSAgbGlzdE5hbWUKICAgICovCgogIH0sIHsKICAgIGtleTogJ2NyZWF0ZUxpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUxpc3QobGlzdE5hbWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgX3RoaXMubXlMaXN0c1tsaXN0TmFtZV0gPSBbXTsKICAgIH0KCiAgICAvKioKICAgICogQWRkcyB0aGUgZ2l2ZW4gdXNlciBlbWFpbCB0byB0aGUgbGlzdCB3aXRoIHRoZSBnaXZlbiBuYW1lLgogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICB1c2VyRW1haWwKICAgICogQHBhcmFtICB7U3RyaW5nfSAgbGlzdE5hbWUKICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZFRvTGlzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVG9MaXN0KHVzZXJFbWFpbCwgbGlzdE5hbWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGxpc3QgPSBfdGhpcy5teUxpc3RzW2xpc3ROYW1lXTsKICAgICAgaWYgKGxpc3QgPT09IHVuZGVmaW5lZCkgewogICAgICAgIF90aGlzLmNyZWF0ZUxpc3QobGlzdE5hbWUpOwogICAgICAgIGxpc3QgPSBfdGhpcy5nZXRMaXN0KGxpc3ROYW1lKTsKICAgICAgfQogICAgICBsaXN0LnB1c2godXNlckVtYWlsKTsKICAgIH0KCiAgICAvKioKICAgICogUmVtb3ZlcyB0aGUgZ2l2ZW4gdXNlciBlbWFpbCBmcm9tIHRoZSBsaXN0IHdpdGggdGhlIGdpdmVuIG5hbWUuCiAgICAqIEBwYXJhbSAge1N0cmluZ30gIHVzZXJFbWFpbAogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICBsaXN0TmFtZQogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVtb3ZlRnJvbUxpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZyb21MaXN0KHVzZXJFbWFpbCwgbGlzdE5hbWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGxpc3QgPSBfdGhpcy5teUxpc3RzW2xpc3ROYW1lXTsKICAgICAgZm9yICh2YXIgaSBpbiBsaXN0KSB7CiAgICAgICAgaWYgKGxpc3RbaV0gPT09IHVzZXJFbWFpbCkgewogICAgICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogVmVyaWZpZXMgaWYgdGhlIGdpdmVuIG1lc3NhZ2UgaXMgY29tcGxpYW50IHdpdGggdGhlIGdpdmVuIHBvbGljaWVzLiBJZiBvbmUgb2YgdGhlIHBvbGljaWVzCiAgICAqIGV2YWx1YXRlcyB0byAnZmFsc2UnLCB0aGVuIHRoZSBtZXNzYWdlIGlzIG5vdCBhdXRob3Jpc2VkLiBSZXR1cm5zIHRoZSBmaW5hbCBhdXRob3Jpc2F0aW9uCiAgICAqIGRlY2lzaW9uIGFuZCBhIHNldCBvZiBhY3Rpb25zIHRoYXQgcG9saWNpZXMgbWF5IHJlcXVpcmUuCiAgICAqIEBwYXJhbSB7TWVzc2FnZX0gIG1lc3NhZ2UKICAgICogQHBhcmFtIHtVUkx9ICAgICAgaHlwZXJ0eVRvVmVyaWZ5CiAgICAqIEBwYXJhbSB7QXJyYXl9ICAgIHBvbGljaWVzCiAgICAqIEByZXR1cm4ge0FycmF5fSAgIFthdXRoRGVjaXNpb24sIGFjdGlvbnNdCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdldmFsdWF0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXZhbHVhdGUobWVzc2FnZSwgaHlwZXJ0eVRvVmVyaWZ5LCBwb2xpY2llcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgcmVzdWx0cyA9IFt0cnVlXTsKICAgICAgdmFyIGFjdGlvbnMgPSBbXTsKCiAgICAgIC8vIFRPRE86IHVzZSBoYXNodGFibGUgdG8gYWxsb3cgZHluYW1pYyBtYW5hZ2VtZW50CiAgICAgIGZvciAodmFyIGkgaW4gcG9saWNpZXMpIHsKICAgICAgICB2YXIgcG9saWN5ID0gcG9saWNpZXNbaV07CiAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAgIHZhciBjb25kaXRpb24gPSBwb2xpY3kuY29uZGl0aW9uLnNwbGl0KCcgJyk7CiAgICAgICAgdmFyIHJlc291cmNlID0gY29uZGl0aW9uWzBdOwogICAgICAgIHN3aXRjaCAocmVzb3VyY2UpIHsKICAgICAgICAgIGNhc2UgJ2xpc3QnOgogICAgICAgICAgICB2YXIgbGlzdE5hbWUgPSBjb25kaXRpb25bMV07CiAgICAgICAgICAgIHJlc3VsdFswXSA9IF90aGlzLmlzSW5MaXN0KGh5cGVydHlUb1ZlcmlmeSwgbGlzdE5hbWUpID8gcG9saWN5LmF1dGhvcmlzZSA6ICFwb2xpY3kuYXV0aG9yaXNlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3RpbWUnOgogICAgICAgICAgICB2YXIgc3RhcnQgPSBjb25kaXRpb25bMV07CiAgICAgICAgICAgIHZhciBlbmQgPSBjb25kaXRpb25bMl07CiAgICAgICAgICAgIHJlc3VsdFswXSA9IF90aGlzLmlzVGltZUJldHdlZW4oc3RhcnQsIGVuZCkgPyBwb2xpY3kuYXV0aG9yaXNlIDogIXBvbGljeS5hdXRob3Jpc2U7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmVzdWx0WzFdID0gcG9saWN5LmFjdGlvbnM7CiAgICAgICAgfQogICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHRbMF0pOwogICAgICAgIGFjdGlvbnMucHVzaChyZXN1bHRbMV0pOyAvLyBUT0RPOiBkbyBhY3Rpb25zIGRlcGVuZCBvbiB0aGUgZmluYWwgYXV0aG9yaXNhdGlvbiBkZWNpc2lvbj8KICAgICAgfQoKICAgICAgdmFyIGF1dGhEZWNpc2lvbiA9IHJlc3VsdHMuaW5kZXhPZihmYWxzZSkgPT09IC0xOwogICAgICByZXR1cm4gW2F1dGhEZWNpc2lvbiwgYWN0aW9uc107CiAgICB9CgogICAgLyoqCiAgICAqIFZlcmlmaWVzIGlmIHRoZSBnaXZlbiBoeXBlcnR5IFVSTCBjb3JyZXNwb25kcyB0byBhbiBlbWFpbCB0aGF0IGlzIGluIHRoZSBsaXN0IHdpdGggdGhlIGdpdmVuCiAgICAqIG5hbWUuCiAgICAqIEBwYXJhbSB7VVJMfSAgICAgICAgaHlwZXJ0eVVSTAogICAgKiBAcGFyYW0ge1N0cmluZ30gICAgIGxpc3ROYW1lCiAgICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgYm9vbGVhbgogICAgKi8KCiAgfSwgewogICAga2V5OiAnaXNJbkxpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzSW5MaXN0KGh5cGVydHlVUkwsIGxpc3ROYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBsaXN0ID0gX3RoaXMubXlMaXN0c1tsaXN0TmFtZV07CiAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkgewogICAgICAgIGlmIChfdGhpcy5yZWdpc3RyeS5nZXRVc2VySHlwZXJ0eShsaXN0W2ldKSA9PT0gaHlwZXJ0eVVSTCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICogVmVyaWZpZXMgaWYgdGhlIGN1cnJlbnQgdGltZSBpcyBiZXR3ZWVuIHRoZSBnaXZlbiBzdGFydCBhbmQgZW5kIHRpbWVzLgogICAgKiBAcGFyYW0ge051bWJlcn0gICAgIHN0YXJ0CiAgICAqIEBwYXJhbSB7TnVtYmVyfSAgICAgZW5kCiAgICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgYm9vbGVhbgogICAgKi8KCiAgfSwgewogICAga2V5OiAnaXNUaW1lQmV0d2VlbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNUaW1lQmV0d2VlbihzdGFydCwgZW5kKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgbm93TWludXRlcyA9IF90aGlzLmdldE1pbnV0ZXMocGFyc2VJbnQobm93LmdldEhvdXJzKCkpICsgJzonICsgbm93LmdldE1pbnV0ZXMoKSk7CiAgICAgIHZhciBzdGFydE1pbnV0ZXMgPSBfdGhpcy5nZXRNaW51dGVzKHN0YXJ0KTsKICAgICAgdmFyIGVuZE1pbnV0ZXMgPSBfdGhpcy5nZXRNaW51dGVzKGVuZCk7CiAgICAgIGlmIChlbmRNaW51dGVzID4gc3RhcnRNaW51dGVzKSB7CiAgICAgICAgcmV0dXJuIG5vd01pbnV0ZXMgPiBzdGFydE1pbnV0ZXMgJiYgbm93TWludXRlcyA8IGVuZE1pbnV0ZXM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKG5vd01pbnV0ZXMgPCBzdGFydE1pbnV0ZXMpIHsKICAgICAgICAgIG5vd01pbnV0ZXMgKz0gMjQgKiA2MDsKICAgICAgICB9CiAgICAgICAgZW5kTWludXRlcyArPSAyNCAqIDYwOwogICAgICAgIHJldHVybiBub3dNaW51dGVzID4gc3RhcnRNaW51dGVzICYmIG5vd01pbnV0ZXMgPCBlbmRNaW51dGVzOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBtaW51dGVzIHRoYXQgY29ycmVzcG9uZCB0byB0aGUgZ2l2ZW4gdGltZSBpbiB0aGUgZm9ybWF0IDxIT1VSUz46PE1JTlVURVM+LgogICAgKiBAcGFyYW0ge051bWJlcn0gICB0aW1lCiAgICAqIEByZXR1cm4ge051bWJlcn0gIG1pbnV0ZXMKICAgICovCgogIH0sIHsKICAgIGtleTogJ2dldE1pbnV0ZXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1pbnV0ZXModGltZSkgewogICAgICB2YXIgdGltZVNwbGl0ID0gdGltZS5zcGxpdCgnOicpOwogICAgICByZXR1cm4gcGFyc2VJbnQodGltZVNwbGl0WzBdKSAqIDYwICsgcGFyc2VJbnQodGltZVNwbGl0WzFdKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBQRFA7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IFBEUDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwxODg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIFBFUCA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBQRVAoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUEVQKTsKICB9CgogIF9jcmVhdGVDbGFzcyhQRVAsIFt7CiAgICBrZXk6ICJlbmZvcmNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBlbmZvcmNlKCkge30KICB9LCB7CiAgICBrZXk6ICJzZW5kQXV0b21hdGljTWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZEF1dG9tYXRpY01lc3NhZ2UoKSB7fQogIH0sIHsKICAgIGtleTogImZvcndhcmRUb0lEIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3J3YXJkVG9JRCgpIHt9CiAgfSwgewogICAga2V5OiAiZm9yd2FyZFRvSHlwZXJ0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9yd2FyZFRvSHlwZXJ0eSgpIHt9CiAgfV0pOwoKICByZXR1cm4gUEVQOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBQRVA7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTg5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX1BFUCA9IHJlcXVpcmUoJy4vUEVQJyk7Cgp2YXIgX1BFUDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QRVApOwoKdmFyIF9QRFAgPSByZXF1aXJlKCcuL1BEUCcpOwoKdmFyIF9QRFAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUERQKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgoqIFRoZSBQb2xpY3kgRW5naW5lIGludGVyY2VwdHMgYWxsIHRoZSBtZXNzYWdlcyBzZW50IHRocm91Z2ggdGhlIE1lc3NhZ2UgQnVzIGFuZCBhcHBsaWVzIHRoZQoqIHBvbGljaWVzIGRlZmluZWQgYnkgdGhlIHNlcnZpY2UgcHJvdmlkZXIgYW5kIHRoZSB1c2VyLgoqLwoKdmFyIFBvbGljeUVuZ2luZSA9IGZ1bmN0aW9uICgpIHsKCiAgLyoqCiAgKiBUaGlzIG1ldGhvZCBpcyBpbnZva2VkIGJ5IHRoZSBSdW50aW1lVUEgYW5kIGluc3RhbnRpYXRlcyB0aGUgUG9saWN5IEVuZ2luZS4gQSBQb2xpY3kgRGVjaXNpb24KICAqIFBvaW50IChQRFApIGFuZCBhIFBvbGljeSBFbmZvcmNlbWVudCBQb2ludCAoUEVQKSBhcmUgaW5pdGlhbGlzZWQgZm9yIHRoZSBldmFsdWF0aW9uIG9mIHBvbGljaWVzCiAgKiBhbmQgdGhlIGVuZm9yY2VtZW50IG9mIGFkZGl0aW9uYWwgYWN0aW9ucywgcmVzcGVjdGl2ZWx5LiBBZGRzIGEgbGlzdGVuZXIgZG8gdGhlIE1lc3NhZ2UgQnVzIHRvCiAgKiBhbGxvdyBtZXRob2QgaW52b2thdGlvbi4KICAqIEBwYXJhbSAge01lc3NhZ2VCdXN9ICAgICAgICBtZXNzYWdlQnVzCiAgKiBAcGFyYW0gIHtJZGVudGl0eU1vZHVsZX0gICAgaWRlbnRpdHlNb2R1bGUKICAqIEBwYXJhbSAge1JlZ2lzdHJ5fSAgICAgICAgICBydW50aW1lUmVnaXN0cnkKICAqLwoKICBmdW5jdGlvbiBQb2xpY3lFbmdpbmUobWVzc2FnZUJ1cywgaWRlbnRpdHlNb2R1bGUsIHJ1bnRpbWVSZWdpc3RyeSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBvbGljeUVuZ2luZSk7CgogICAgdmFyIF90aGlzID0gdGhpczsKICAgIF90aGlzLm1lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzOwogICAgX3RoaXMuaWRNb2R1bGUgPSBpZGVudGl0eU1vZHVsZTsKICAgIF90aGlzLnBkcCA9IG5ldyBfUERQMi5kZWZhdWx0KHJ1bnRpbWVSZWdpc3RyeSk7CiAgICBfdGhpcy5wZXAgPSBuZXcgX1BFUDIuZGVmYXVsdCgpOwogICAgX3RoaXMucG9saWNpZXMgPSB7fTsKICB9CgogIC8qKgogICogVGhpcyBtZXRob2QgaXMgZXhlY3V0ZWQgd2hlbiBhIG1lc3NhZ2UgaXMgaW50ZXJjZXB0ZWQgaW4gdGhlIE1lc3NhZ2UgQnVzLiBUaGUgZmlyc3Qgc3RlcCBpcyB0aGUKICAqIGFzc2lnbm1lbnQgb2YgdGhlIGlkZW50aXR5IGFzc29jaWF0ZWQgd2l0aCB0aGUgbWVzc2FnZS4gVGhlIHNlY29uZCBzdGVwIGlzIHRoZSBldmFsdWF0aW9uIG9mIHRoZQogICogYXBwbGljYWJsZSBwb2xpY2llcyBpbiBvcmRlciB0byBvYnRhaW4gYW4gYXV0aG9yaXNhdGlvbiBkZWNpc2lvbjogaWYgYSBwb2xpY3kgZXZhbHVhdGVzIHRvCiAgKiBmYWxzZSwgdGhlbiB0aGUgbWVzc2FnZSBpcyB1bmF1dGhvcmlzZWQuIFRoZSB0aGlyZCBzdGVwIGlzIHRoZSBlbmZvcmNlbWVudCBvZiB0aGUgYWN0aW9ucyB0aGF0CiAgKiBwb2xpY2llcyBtYXkgcmVxdWlyZS4gRmluYWxseSwgdGhlIG1lc3NhZ2UgaXMgc3RhbXBlZCBhcyBhdXRob3Jpc2VkIG9yIG5vdCBhbmQgaXMgcmV0dXJuZWQgdG8KICAqIHRoZSBNZXNzYWdlIEJ1cywgd2hlcmUgaXQgd2lsbCBiZSBmb3J3YXJkZWQgb3IgYmxvY2tlZC4KICAqIEBwYXJhbSAge01lc3NhZ2V9ICBtZXNzYWdlCiAgKi8KCgogIF9jcmVhdGVDbGFzcyhQb2xpY3lFbmdpbmUsIFt7CiAgICBrZXk6ICdhdXRob3Jpc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGF1dGhvcmlzZShtZXNzYWdlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGlmIChtZXNzYWdlLnRvID09PSAnZG9tYWluOi8vbG9jYWxob3N0L3BvbGljeS1lbmdpbmUnKSB7CiAgICAgICAgX3RoaXMucHJvY2Vzc01lc3NhZ2UobWVzc2FnZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgLy9UT0RPIHR1cm4gaXQgbGF0ZXIgaW50byBhIHBvbGljeQogICAgICAgIGlmIChtZXNzYWdlLmZyb20gPT09ICdkb21haW46Ly9nb29nbGUuY29tJyB8fCBtZXNzYWdlLnRvID09PSAnZG9tYWluOi8vZ29vZ2xlLmNvbScpIHsKICAgICAgICAgIG1lc3NhZ2UuYXV0aG9yaXNlZCA9IHRydWU7CiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShtZXNzYWdlKTsKICAgICAgICB9CiAgICAgICAgX3RoaXMuaWRNb2R1bGUuZ2V0SWRlbnRpdHlBc3NlcnRpb24oJ2dvb2dsZSBpZGVudGl0eScsICdzY29wZScpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICB2YXIgYXNzZXJ0ZWRJRCA9IF90aGlzLmlkTW9kdWxlLmdldElkZW50aXRpZXMoKTsKCiAgICAgICAgICBpZiAoIW1lc3NhZ2UuaGFzT3duUHJvcGVydHkoJ2JvZHknKSkgewogICAgICAgICAgICBtZXNzYWdlLmJvZHkgPSB7fTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgaHlwZXJ0eVRvVmVyaWZ5ID0gdm9pZCAwOwogICAgICAgICAgaWYgKCFtZXNzYWdlLmJvZHkuaGFzT3duUHJvcGVydHkoJ2Fzc2VydGVkSWRlbnRpdHknKSkgewogICAgICAgICAgICBtZXNzYWdlLmJvZHkuYXNzZXJ0ZWRJZGVudGl0eSA9IGFzc2VydGVkSURbMF0uaWRlbnRpdHk7CiAgICAgICAgICAgIG1lc3NhZ2UuYm9keS5pZFRva2VuID0gdmFsdWU7CiAgICAgICAgICAgIGh5cGVydHlUb1ZlcmlmeSA9IG1lc3NhZ2UudG87CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBoeXBlcnR5VG9WZXJpZnkgPSBtZXNzYWdlLmZyb207CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHNjb3BlID0gX3RoaXMuZ2V0U2NvcGUoKTsKICAgICAgICAgIHZhciBhcHBsaWNhYmxlUG9saWNpZXMgPSBfdGhpcy5nZXRBcHBsaWNhYmxlUG9saWNpZXMoc2NvcGUpOwogICAgICAgICAgdmFyIHBvbGljaWVzUmVzdWx0ID0gX3RoaXMucGRwLmV2YWx1YXRlKG1lc3NhZ2UsIGh5cGVydHlUb1ZlcmlmeSwgYXBwbGljYWJsZVBvbGljaWVzKTsKICAgICAgICAgIF90aGlzLnBlcC5lbmZvcmNlKHBvbGljaWVzUmVzdWx0WzFdKTsKCiAgICAgICAgICBpZiAocG9saWNpZXNSZXN1bHRbMF0pIHsKICAgICAgICAgICAgbWVzc2FnZS5hdXRob3Jpc2VkID0gdHJ1ZTsKICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1lc3NhZ2UuYXV0aG9yaXNlZCA9IGZhbHNlOwogICAgICAgICAgICByZWplY3QoJ1VuYXV0aG9yaXNlZCBtZXNzYWdlJyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogSW52b2tlcyB0aGUgbWV0aG9kIHNwZWNpZmllZCBpbiB0aGUgbWVzc2FnZSBhaW1lZCBhdCB0aGUgUG9saWN5IEVuZ2luZS4KICAgICogQHBhcmFtICB7TWVzc2FnZX0gICAgbWVzc2FnZQogICAgKi8KCiAgfSwgewogICAga2V5OiAncHJvY2Vzc01lc3NhZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb2Nlc3NNZXNzYWdlKG1lc3NhZ2UpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIG1ldGhvZCA9IG1lc3NhZ2UuYm9keS5tZXRob2Q7CiAgICAgIHZhciBwYXJhbXMgPSBtZXNzYWdlLmJvZHkucGFyYW1zOwoKICAgICAgc3dpdGNoIChtZXRob2QpIHsKICAgICAgICBjYXNlICdhZGRQb2xpY2llcyc6CiAgICAgICAgICBfdGhpcy5hZGRQb2xpY2llcyhwYXJhbXMucG9saWNpZXMsIHBhcmFtcy5zY29wZSk7CiAgICAgICAgICBfdGhpcy5zZW5kUmVzcG9uc2UobWVzc2FnZSwgMjAwKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3JlbW92ZVBvbGljaWVzJzoKICAgICAgICAgIF90aGlzLnJlbW92ZVBvbGljaWVzKHBhcmFtcy5wb2xpY3lJRCwgcGFyYW1zLnNjb3BlKTsKICAgICAgICAgIF90aGlzLnNlbmRSZXNwb25zZShtZXNzYWdlLCAyMDApOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZ2V0TGlzdCc6CiAgICAgICAgICB2YXIgbGlzdCA9IF90aGlzLmdldExpc3QocGFyYW1zLmxpc3ROYW1lKTsKICAgICAgICAgIGlmIChsaXN0ICE9PSBbXSkgewogICAgICAgICAgICBfdGhpcy5zZW5kTGlzdChtZXNzYWdlLCBsaXN0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLnNlbmRSZXNwb25zZShtZXNzYWdlLCA0MDQpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnY3JlYXRlTGlzdCc6CiAgICAgICAgICBfdGhpcy5jcmVhdGVMaXN0KHBhcmFtcy5saXN0TmFtZSk7CiAgICAgICAgICBfdGhpcy5zZW5kUmVzcG9uc2UobWVzc2FnZSwgMjAwKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2FkZFRvTGlzdCc6CiAgICAgICAgICBfdGhpcy5hZGRUb0xpc3QocGFyYW1zLnVzZXJFbWFpbCwgcGFyYW1zLmxpc3ROYW1lKTsKICAgICAgICAgIF90aGlzLnNlbmRSZXNwb25zZShtZXNzYWdlLCAyMDApOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncmVtb3ZlRnJvbUxpc3QnOgogICAgICAgICAgX3RoaXMucmVtb3ZlRnJvbUxpc3QocGFyYW1zLnVzZXJFbWFpbCwgcGFyYW1zLmxpc3ROYW1lKTsKICAgICAgICAgIF90aGlzLnNlbmRSZXNwb25zZShtZXNzYWdlLCAyMDApOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogU2VuZHMgYSByZXNwb25zZSB0byB0aGUgbWVzc2FnZSBvcmlnaW4uCiAgICAqIEBwYXJhbSAge01lc3NhZ2V9ICAgbWVzc2FnZQogICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgIGh0dHBDb2RlCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzZW5kUmVzcG9uc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRSZXNwb25zZShtZXNzYWdlLCBodHRwQ29kZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgcmVzcG9uc2UgPSB7IGlkOiBtZXNzYWdlLmlkLCB0eXBlOiAncmVzcG9uc2UnLCB0bzogbWVzc2FnZS5mcm9tLCBmcm9tOiBtZXNzYWdlLnRvLCBib2R5OiB7IGNvZGU6IGh0dHBDb2RlIH0gfTsKICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShyZXNwb25zZSk7CiAgICB9CgogICAgLyoqCiAgICAqIFNlbmRzIHRoZSByZXF1ZXN0ZWQgbGlzdCB0byB0aGUgbWVzc2FnZSBvcmlnaW4uCiAgICAqIEBwYXJhbSAge01lc3NhZ2V9ICAgbWVzc2FnZQogICAgKiBAcGFyYW0gIHtBcnJheX0gICAgIGxpc3QKICAgICovCgogIH0sIHsKICAgIGtleTogJ3NlbmRMaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kTGlzdChtZXNzYWdlLCBsaXN0KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciByZXNwb25zZSA9IHsgaWQ6IG1lc3NhZ2UuaWQsIHR5cGU6ICdyZXNwb25zZScsIHRvOiBtZXNzYWdlLmZyb20sIGZyb206IG1lc3NhZ2UudG8sIGJvZHk6IHsgY29kZTogMjAwLCB2YWx1ZTogbGlzdCB9IH07CiAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfQoKICAgIC8qKgogICAgKiBBc3NvY2lhdGVzIHRoZSBnaXZlbiBwb2xpY2llcyB3aXRoIGEgc2NvcGUuIFRoZSBwb3NzaWJsZSBzY29wZXMgYXJlICdhcHBsaWNhdGlvbicsICdoeXBlcnR5JyBhbmQKICAgICogJ3VzZXInLgogICAgKiBAcGFyYW0gIHtQb2xpY3lbXX0gIHBvbGljaWVzCiAgICAqIEBwYXJhbSAge1N0cmluZ30gICAgc2NvcGUKICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZFBvbGljaWVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRQb2xpY2llcyhwb2xpY2llcywgc2NvcGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgZm9yICh2YXIgaSBpbiBwb2xpY2llcykgewogICAgICAgIC8vIFRPRE86IGNvbmZsaWN0IGRldGVjdGlvbgogICAgICAgIGlmIChfdGhpcy5wb2xpY2llc1tzY29wZV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgX3RoaXMucG9saWNpZXNbc2NvcGVdID0gW107CiAgICAgICAgfQogICAgICAgIHZhciBleGlzdHMgPSBmYWxzZTsKICAgICAgICBmb3IgKHZhciBwb2xpY3kgaW4gX3RoaXMucG9saWNpZXNbc2NvcGVdKSB7CiAgICAgICAgICBpZiAoX3RoaXMucG9saWNpZXNbc2NvcGVdW3BvbGljeV0uaWQgPT09IHBvbGljaWVzW2ldLmlkKSB7CiAgICAgICAgICAgIGV4aXN0cyA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWV4aXN0cykgewogICAgICAgICAgX3RoaXMucG9saWNpZXNbc2NvcGVdLnB1c2gocG9saWNpZXNbaV0pOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBSZW1vdmVzIHRoZSBwb2xpY3kgd2l0aCB0aGUgZ2l2ZW4gSUQgZnJvbSB0aGUgZ2l2ZW4gc2NvcGUuIElmIHBvbGljeUlEIGlzICcqJywgcmVtb3ZlcyBhbGwgcG9saWNpZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBzY29wZS4KICAgICogQHBhcmFtICB7U3RyaW5nfSAgcG9saWN5SUQKICAgICogQHBhcmFtICB7U3RyaW5nfSAgc2NvcGUKICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlbW92ZVBvbGljaWVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVQb2xpY2llcyhwb2xpY3lJZCwgc2NvcGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGFsbFBvbGljaWVzID0gX3RoaXMucG9saWNpZXM7CgogICAgICBpZiAoc2NvcGUgaW4gYWxsUG9saWNpZXMpIHsKICAgICAgICBpZiAocG9saWN5SWQgIT09ICcqJykgewogICAgICAgICAgdmFyIHBvbGljaWVzID0gYWxsUG9saWNpZXNbc2NvcGVdOwogICAgICAgICAgdmFyIG51bVBvbGljaWVzID0gcG9saWNpZXMubGVuZ3RoOwoKICAgICAgICAgIGZvciAodmFyIHBvbGljeSA9IDA7IHBvbGljeSA8IG51bVBvbGljaWVzOyBwb2xpY3krKykgewogICAgICAgICAgICBpZiAocG9saWNpZXNbcG9saWN5XS5pZCA9PT0gcG9saWN5SWQpIHsKICAgICAgICAgICAgICBwb2xpY2llcy5zcGxpY2UocG9saWN5LCAxKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkZWxldGUgX3RoaXMucG9saWNpZXNbc2NvcGVdOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBSZXRyaWV2ZXMgdGhlIGxpc3Qgd2l0aCB0aGUgZ2l2ZW4gbGlzdCBuYW1lIGZyb20gdGhlIFBEUC4KICAgICogQHBhcmFtICB7U3RyaW5nfSAgbGlzdE5hbWUKICAgICogQHJldHVybiB7QXJyYXl9ICAgbGlzdAogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0TGlzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TGlzdChsaXN0TmFtZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMucGRwLmdldExpc3QobGlzdE5hbWUpOwogICAgfQoKICAgIC8qKgogICAgKiBGb3J3YXJkcyBhIHJlcXVlc3QgZm9yIHRoZSBjcmVhdGlvbiBvZiBhIGxpc3Qgd2l0aCB0aGUgZ2l2ZW4gbmFtZSB0byB0aGUgUERQLgogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICBsaXN0TmFtZQogICAgKi8KCiAgfSwgewogICAga2V5OiAnY3JlYXRlTGlzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlTGlzdChsaXN0TmFtZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpcy5wZHAuY3JlYXRlTGlzdChsaXN0TmFtZSk7CiAgICB9CgogICAgLyoqCiAgICAqIEZvcndhcmRzIGEgcmVxdWVzdCB0byBhZGQgYSB1c2VyIHRvIHRoZSBsaXN0IHdpdGggdGhlIGdpdmVuIG5hbWUgdG8gdGhlIFBEUC4KICAgICogQHBhcmFtICB7U3RyaW5nfSAgdXNlckVtYWlsCiAgICAqIEBwYXJhbSAge1N0cmluZ30gIGxpc3ROYW1lCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdhZGRUb0xpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFRvTGlzdCh1c2VyRW1haWwsIGxpc3ROYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLnBkcC5hZGRUb0xpc3QodXNlckVtYWlsLCBsaXN0TmFtZSk7CiAgICB9CgogICAgLyoqCiAgICAqIEZvcndhcmRzIGEgcmVxdWVzdCB0byByZW1vdmUgYSB1c2VyIGZyb20gdGhlIGxpc3Qgd2l0aCB0aGUgZ2l2ZW4gbmFtZSB0byB0aGUgUERQLgogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICB1c2VyRW1haWwKICAgICogQHBhcmFtICB7U3RyaW5nfSAgbGlzdE5hbWUKICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlbW92ZUZyb21MaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVGcm9tTGlzdCh1c2VyRW1haWwsIGxpc3ROYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLnBkcC5yZW1vdmVGcm9tTGlzdCh1c2VyRW1haWwsIGxpc3ROYW1lKTsKICAgIH0KCiAgICAvKioKICAgICogUmV0dXJucyB0aGUgc2NvcGUgb2YgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gcmVzdHJpY3QgcG9saWN5IGFwcGxpY2FiaWxpdHkuIEZvciBub3csIGFsbCBwb2xpY2llcwogICAgKiBhcmUgYXBwbGllZCB0byBlYWNoIG1lc3NhZ2UuCiAgICAqIEByZXR1cm4ge1N0cmluZ30gc2NvcGUKICAgICovCgogIH0sIHsKICAgIGtleTogJ2dldFNjb3BlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY29wZSgpIHsKICAgICAgcmV0dXJuICcqJzsKICAgIH0KCiAgICAvKioKICAgICogUmV0dXJucyB0aGUgcG9saWNpZXMgYXNzb2NpYXRlZCB3aXRoIGEgc2NvcGUuCiAgICAqIEBwYXJhbSAgIHtTdHJpbmd9IHNjb3BlCiAgICAqIEByZXR1cm4gIHtBcnJheX0gIHBvbGljaWVzCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRBcHBsaWNhYmxlUG9saWNpZXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFwcGxpY2FibGVQb2xpY2llcyhzY29wZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgcG9saWNpZXNUYWJsZSA9IF90aGlzLnBvbGljaWVzOwogICAgICB2YXIgcG9saWNpZXMgPSBbXTsKICAgICAgaWYgKHNjb3BlICE9PSAnKicpIHsKICAgICAgICBpZiAocG9saWNpZXNUYWJsZVtzY29wZV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcG9saWNpZXMgPSBwb2xpY2llc1RhYmxlW3Njb3BlXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgaSBpbiBwb2xpY2llc1RhYmxlKSB7CiAgICAgICAgICBwb2xpY2llcy5wdXNoLmFwcGx5KHBvbGljaWVzLCBwb2xpY2llc1RhYmxlW2ldKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHBvbGljaWVzOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBvbGljeUVuZ2luZTsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUG9saWN5RW5naW5lOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuL1BEUCI6MTg3LCIuL1BFUCI6MTg4fV0sMTkwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8vIGltcG9ydCBNZXNzYWdlRmFjdG9yeSBmcm9tICcuLi8uLi9yZXNvdXJjZXMvTWVzc2FnZUZhY3RvcnknOwoKLyoqCiAqIENsYXNzIHdpbGwgYXNrIHRvIHRoZSBtZXNzYWdlIG5vZGUgZm9yIGFkZHJlc3NlcwogKi8KCnZhciBBZGRyZXNzQWxsb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX3VybDogVVJMCiAgX2J1czogTWluaUJ1cwogICovCgogIC8qKgogICAqIENyZWF0ZSBhbiBBZGRyZXNzIEFsbG9jYXRpb24KICAgKiBAcGFyYW0gIHtVUkwuVVJMfSAgICAgIHVybCAtIHVybCBmcm9tIHdobyBpcyBzZW5kaW5nIHRoZSBtZXNzYWdlCiAgICogQHBhcmFtICB7TWluaUJ1c30gICAgICBidXMgLSBNaW5pQnVzIHVzZWQgZm9yIGFkZHJlc3MgYWxsb2NhdGlvbgogICAqLwoKICBmdW5jdGlvbiBBZGRyZXNzQWxsb2NhdGlvbih1cmwsIGJ1cykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFkZHJlc3NBbGxvY2F0aW9uKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIC8vIGxldCBtZXNzYWdlRmFjdG9yeSA9IG5ldyBNZXNzYWdlRmFjdG9yeSgpOwogICAgLy8KICAgIC8vIF90aGlzLl9tZXNzYWdlRmFjdG9yeSA9IG1lc3NhZ2VGYWN0b3J5OwogICAgX3RoaXMuX3VybCA9IHVybDsKICAgIF90aGlzLl9idXMgPSBidXM7CiAgfQoKICAvKioKICAgKiBnZXQgdGhlIFVSTCB2YWx1ZQogICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHVybCB2YWx1ZTsKICAgKi8KCgogIF9jcmVhdGVDbGFzcyhBZGRyZXNzQWxsb2NhdGlvbiwgW3sKICAgIGtleTogJ2NyZWF0ZScsCgoKICAgIC8qKgogICAgICogQXNrIGZvciBjcmVhdGlvbiBvZiBhIG51bWJlciBvZiBIeXBlcnR5IGFkZHJlc3NlcywgdG8gdGhlIGRvbWFpbiBtZXNzYWdlIG5vZGUuCiAgICAgKiBAcGFyYW0gIHtEb21haW59IGRvbWFpbiAtIERvbWFpbiBvZiB0aGUgbWVzc2FnZSBub2RlLgogICAgICogQHBhcmFtICB7bnVtYmVyfSBudW1iZXIgLSBOdW1iZXIgb2YgYWRkcmVzc2VzIHRvIHJlcXVlc3QKICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEh5cGVydHlVUkw+fSAgQSBsaXN0IG9mIEh5cGVydHlVUkwncwogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKGRvbWFpbiwgbnVtYmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBsZXQgbWVzc2FnZUZhY3RvcnkgPSBfdGhpcy5fbWVzc2FnZUZhY3Rvcnk7CgogICAgICB2YXIgbXNnID0gewogICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBkb21haW4gKyAnL2h5cGVydHktYWRkcmVzcy1hbGxvY2F0aW9uJywKICAgICAgICBib2R5OiB7IHZhbHVlOiB7IG51bWJlcjogbnVtYmVyIH0gfQogICAgICB9OwoKICAgICAgLy8gVE9ETzogQXBwbHkgdGhlIG1lc3NhZ2UgZmFjdG9yeQogICAgICAvLyBUaGUgbXNnLW5vZGUtdmVydHggc2hvdWxkIGJlIGNoYW5nZWQgdGhlIGJvZHkgZmllbGQgdG8gcmVjZWl2ZQogICAgICAvLyB0aGUgZm9sbG93aW5nIGZvcm1hdCBib2R5OiB7dmFsdWU6IHtudW1iZXI6IG51bWJlcn19IGJlY2F1c2UKICAgICAgLy8gdGhlIG1lc3NhZ2UgaXMgZ2VuZXJhdGVkIGluIHRoYXQgd2F5IGJ5IHRoZSBtZXNzYWdlIGZhY3Rvcnk7CiAgICAgIC8vIGxldCBtc2cgPSBtZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxdWVzdChfdGhpcy5fdXJsLCAnZG9tYWluOi8vbXNnLW5vZGUuJyArIGRvbWFpbiArICcvaHlwZXJ0eS1hZGRyZXNzLWFsbG9jYXRpb24nLCAnJywge251bWJlcjogbnVtYmVyfSk7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICAvLyBUT0RPOiBjaGFuZ2UgdGhpcyByZXNwb25zZSBNZXNzYWdlIHVzaW5nIHRoZSBNZXNzYWdlRmFjdG9yeQogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICByZXNvbHZlKHJlcGx5LmJvZHkudmFsdWUuYWxsb2NhdGVkKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogU2VuZCBhIHJlcXVlc3QgdG8gdGhlIGRvbWFpbiBtZXNzYWdlIG5vZGUsIHRvIGRlYWxsb2NhdGUgb25lIG9yIG1vcmUgYWRkcmVzc2VzCiAgICAqIEBwYXJhbSAge0RvbWFpbn0gZG9tYWluIC0gRG9tYWluIG9mIHRoZSBtZXNzYWdlIG5vZGUuCiAgICAqIEBwYXJhbSAge2FkZHJlc3Nlc30gYWRkcmVzc2VzIHRvIHJlcXVlc3QgdGhlIGRlYWxsb2NhdGlvbgogICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gIHRoZSByZXNwb25zZSBieSB0aGUgbWVzc2FnZSBub2RlCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkZWxldGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoZG9tYWluLCBhZGRyZXNzZXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtZXNzYWdlID0gewogICAgICAgIHR5cGU6ICdkZWxldGUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBkb21haW4gKyAnL2h5cGVydHktYWRkcmVzcy1hbGxvY2F0aW9uJywKICAgICAgICBib2R5OiB7IGNoaWxkcmVuUmVzb3VyY2VzOiBhZGRyZXNzZXMgfQogICAgICB9OwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShtZXNzYWdlLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXBseScsIHJlcGx5KTsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICByZXNvbHZlKHJlcGx5LmJvZHkuY29kZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAndXJsJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdXJsOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEFkZHJlc3NBbGxvY2F0aW9uOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBBZGRyZXNzQWxsb2NhdGlvbjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwxOTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCnZhciBfUmVnaXN0cnlEYXRhTW9kZWwyID0gcmVxdWlyZSgnLi9SZWdpc3RyeURhdGFNb2RlbCcpOwoKdmFyIF9SZWdpc3RyeURhdGFNb2RlbDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SZWdpc3RyeURhdGFNb2RlbDIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfQoKLyoqCiogICBAYXV0aG9yOiBHaWwgRGlhcyAoZ2lsLmRpYXNAdGVjbmljby51bGlzYm9hLnB0KQoqICAgSHlwZXJ0eUluc3RhbmNlIERhdGEgTW9kZWwgdXNlZCB0byBtb2RlbCBpbnN0YW5jZXMgb2YgSHlwZXJ0aWVzIHJ1bm5pbmcgaW4gZGV2aWNlcyBhbmQgc2VydmVycy4KKi8KCnZhciBIeXBlcnR5SW5zdGFuY2UgPSBmdW5jdGlvbiAoX1JlZ2lzdHJ5RGF0YU1vZGVsKSB7CiAgX2luaGVyaXRzKEh5cGVydHlJbnN0YW5jZSwgX1JlZ2lzdHJ5RGF0YU1vZGVsKTsKCiAgZnVuY3Rpb24gSHlwZXJ0eUluc3RhbmNlKGlkLCB1cmwsIGRlc2NyaXB0b3IsIGh5cGVydHlVUkwsIHVzZXIsIGd1aWQsIHJ1bnRpbWUsIGNvbnRleHQpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIeXBlcnR5SW5zdGFuY2UpOwoKICAgIHZhciBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoSHlwZXJ0eUluc3RhbmNlKS5jYWxsKHRoaXMsIGlkLCB1cmwsIGRlc2NyaXB0b3IpKTsKCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CiAgICBfdGhpcy5faHlwZXJ0eVVSTCA9IGh5cGVydHlVUkw7CiAgICBfdGhpcy5fdXNlciA9IHVzZXI7CiAgICBfdGhpcy5fZ3VpZCA9IGd1aWQ7CiAgICBfdGhpcy5fcnVudGltZSA9IHJ1bnRpbWU7CiAgICBfdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEh5cGVydHlJbnN0YW5jZSwgW3sKICAgIGtleTogJ3VzZXInLAogICAgc2V0OiBmdW5jdGlvbiBzZXQoaWRlbnRpdHkpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgX3RoaXMudXNlciA9IGlkZW50aXR5OwogICAgfSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX3VzZXI7CiAgICB9CiAgfSwgewogICAga2V5OiAnaHlwZXJ0eVVSTCcsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl9oeXBlcnR5VVJMOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEh5cGVydHlJbnN0YW5jZTsKfShfUmVnaXN0cnlEYXRhTW9kZWwzLmRlZmF1bHQpOwoKZXhwb3J0cy5kZWZhdWx0ID0gSHlwZXJ0eUluc3RhbmNlOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuL1JlZ2lzdHJ5RGF0YU1vZGVsIjoxOTN9XSwxOTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCnZhciBfRXZlbnRFbWl0dGVyMiA9IHJlcXVpcmUoJy4uL3V0aWxzL0V2ZW50RW1pdHRlcicpOwoKdmFyIF9FdmVudEVtaXR0ZXIzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRXZlbnRFbWl0dGVyMik7Cgp2YXIgX0FkZHJlc3NBbGxvY2F0aW9uID0gcmVxdWlyZSgnLi9BZGRyZXNzQWxsb2NhdGlvbicpOwoKdmFyIF9BZGRyZXNzQWxsb2NhdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BZGRyZXNzQWxsb2NhdGlvbik7Cgp2YXIgX09iamVjdEFsbG9jYXRpb24gPSByZXF1aXJlKCcuLi9zeW5jaGVyL09iamVjdEFsbG9jYXRpb24nKTsKCnZhciBfT2JqZWN0QWxsb2NhdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PYmplY3RBbGxvY2F0aW9uKTsKCnZhciBfSHlwZXJ0eUluc3RhbmNlID0gcmVxdWlyZSgnLi9IeXBlcnR5SW5zdGFuY2UnKTsKCnZhciBfSHlwZXJ0eUluc3RhbmNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0h5cGVydHlJbnN0YW5jZSk7Cgp2YXIgX3NlcnZpY2VGcmFtZXdvcmsgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yaycpOwoKdmFyIF91dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzLmpzJyk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9CgovKioKKiBSdW50aW1lIFJlZ2lzdHJ5IEludGVyZmFjZQoqLwoKdmFyIFJlZ2lzdHJ5ID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHsKICBfaW5oZXJpdHMoUmVnaXN0cnksIF9FdmVudEVtaXR0ZXIpOwoKICAvKioKICAqIFRvIGluaXRpYWxpc2UgdGhlIFJ1bnRpbWUgUmVnaXN0cnkgd2l0aCB0aGUgUnVudGltZVVSTCB0aGF0IHdpbGwgYmUgdGhlIGJhc2lzIHRvIGRlcml2ZSB0aGUgaW50ZXJuYWwgcnVudGltZSBhZGRyZXNzZXMgd2hlbiBhbGxvY2F0aW5nIGFkZHJlc3NlcyB0byBpbnRlcm5hbCBydW50aW1lIGNvbXBvbmVudC4gSW4gYWRkaXRpb24sIHRoZSBSZWdpc3RyeSBkb21haW4gYmFjay1lbmQgdG8gYmUgdXNlZCB0byByZW1vdGVseSByZWdpc3RlciBSdW50aW1lIGNvbXBvbmVudHMsIGlzIGFsc28gcGFzc2VkIGFzIGlucHV0IHBhcmFtZXRlci4KICAqIEBwYXJhbSAge01lc3NhZ2VCdXN9ICAgICAgICAgIG1zZ2J1cyAgICAgICAgICAgICAgICBtc2didXMKICAqIEBwYXJhbSAge0h5cGVydHlSdW50aW1lVVJMfSAgIHJ1bnRpbWVVUkwgICAgICAgICAgICBydW50aW1lVVJMCiAgKiBAcGFyYW0gIHtBcHBTYW5kYm94fSAgICAgICAgICBhcHBTYW5kYm94ICAgICAgICAgICAgYXBwU2FuZGJveAogICogQHBhcmFtICB7RG9tYWluVVJMfSAgICAgICAgICAgcmVtb3RlUmVnaXN0cnkgICAgICAgIHJlbW90ZVJlZ2lzdHJ5CiAgKi8KCiAgZnVuY3Rpb24gUmVnaXN0cnkocnVudGltZVVSTCwgYXBwU2FuZGJveCwgaWRlbnRpdHlNb2R1bGUsIHJlbW90ZVJlZ2lzdHJ5KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVnaXN0cnkpOwoKICAgIC8vIGhvdyBzb21lIGZ1bmN0aW9ucyByZWNlaXZlIHRoZSBwYXJhbWV0ZXJzIGZvciBleGFtcGxlOgogICAgLy8gbmV3IFJlZ2lzdHJ5KCdoeXBlcnR5LXJ1bnRpbWU6Ly9zcDEvMTIzJywgYXBwU2FuZGJveCwgaWRNb2R1bGUsIHJlbW90ZVJlZ2lzdHJ5KTsKICAgIC8vIHJlZ2lzdHJ5LnJlZ2lzdGVyU3R1YihzYW5kYm94LCAnc3AxJyk7CiAgICAvLyByZWdpc3RyeS5yZWdpc3Rlckh5cGVydHkoc2FuZEJveCwgJ2h5cGVydHktcnVudGltZTovL3NwMS8xMjMnKTsKICAgIC8vIHJlZ2lzdHJ5LnJlc29sdmUoJ2h5cGVydHktcnVudGltZTovL3NwMS8xMjMnKTsKCiAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKFJlZ2lzdHJ5KS5jYWxsKHRoaXMpKTsKCiAgICBpZiAoIXJ1bnRpbWVVUkwpIHRocm93IG5ldyBFcnJvcigncnVudGltZVVSTCBpcyBtaXNzaW5nLicpOwogICAgLyppZiAoIXJlbW90ZVJlZ2lzdHJ5KSB0aHJvdyBuZXcgRXJyb3IoJ3JlbW90ZVJlZ2lzdHJ5IGlzIG1pc3NpbmcnKTsqLwoKICAgIHZhciBfdGhpcyA9IF90aGlzMjsKCiAgICBfdGhpcy5yZWdpc3RyeVVSTCA9IHJ1bnRpbWVVUkwgKyAnL3JlZ2lzdHJ5LzEyMyc7CiAgICBfdGhpcy5hcHBTYW5kYm94ID0gYXBwU2FuZGJveDsKICAgIF90aGlzLnJ1bnRpbWVVUkwgPSBydW50aW1lVVJMOwogICAgX3RoaXMucmVtb3RlUmVnaXN0cnkgPSByZW1vdGVSZWdpc3RyeTsKICAgIF90aGlzLmlkTW9kdWxlID0gaWRlbnRpdHlNb2R1bGU7CiAgICBfdGhpcy5pZGVudGlmaWVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAgKyAxKTsKICAgIC8vIHRoZSBleHBpcmVzIGluIDIxNjAwcywgcmVwcmVzZW50cyA2IGhvdXJzCiAgICAvL3RoZSBleHBpcmVzIGlzIGluIHNlY29uZHMsIHVuaXQgb2YgbWVhc3VyZSByZWNlaXZlZCBieSB0aGUgZG9tYWluIHJlZ2lzdHJ5CiAgICBfdGhpcy5leHBpcmVzVGltZSA9IDIxNjAwOwoKICAgIF90aGlzLmh5cGVydGllc0xpc3RUb1JlbW92ZSA9IHt9OwogICAgX3RoaXMuaHlwZXJ0aWVzTGlzdCA9IFtdOwogICAgX3RoaXMucHJvdG9zdHVic0xpc3QgPSB7fTsKICAgIF90aGlzLmRhdGFPYmplY3RMaXN0ID0ge307CiAgICBfdGhpcy5zYW5kYm94ZXNMaXN0ID0geyBzYW5kYm94OiB7fSwgYXBwU2FuZGJveDoge30gfTsKICAgIF90aGlzLnBlcExpc3QgPSB7fTsKCiAgICBfdGhpcy5fZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKF90aGlzLnJlZ2lzdHJ5VVJMKS5kb21haW47CiAgICBfdGhpcy5zYW5kYm94ZXNMaXN0LmFwcFNhbmRib3hbcnVudGltZVVSTF0gPSBhcHBTYW5kYm94OwogICAgdmFyIG1zZ0ZhY3RvcnkgPSBuZXcgX3NlcnZpY2VGcmFtZXdvcmsuTWVzc2FnZUZhY3RvcnkoJ2ZhbHNlJywgJ3t9Jyk7CiAgICBfdGhpcy5tZXNzYWdlRmFjdG9yeSA9IG1zZ0ZhY3Rvcnk7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgLyoqCiAgKiByZXR1cm4gdGhlIG1lc3NhZ2VCdXMgaW4gdGhpcyBSZWdpc3RyeQogICogQHBhcmFtIHtNZXNzYWdlQnVzfSAgICAgICAgICAgbWVzc2FnZUJ1cwogICovCgoKICBfY3JlYXRlQ2xhc3MoUmVnaXN0cnksIFt7CiAgICBrZXk6ICdnZXRBcHBTYW5kYm94JywKCgogICAgLyoqCiAgICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byByZXR1cm4gdGhlIHNhbmRib3ggaW5zdGFuY2Ugd2hlcmUgdGhlIEFwcGxpY2F0aW9uIGlzIGV4ZWN1dGluZy4gSXQgaXMgYXNzdW1lZCB0aGVyZSBpcyBqdXN0IG9uZSBBcHAgcGVyIFJ1bnRpbWUgaW5zdGFuY2UuCiAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFwcFNhbmRib3goKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5hcHBTYW5kYm94OwogICAgfQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiB0byBxdWVyeSB0aGUgRG9tYWluIHJlZ2lzdHJ5LCB3aXRoIGFuIHVzZXIgZW1haWwuCiAgICAqIEBwYXJhbSAgICB7c3RyaW5nfSAgICAgIGlkZW50aWZpZXIgICAgICB1c2VyIGlkZW50aWZpZXIKICAgICogQHJldHVybiAge3N0cmluZ30gICAgICAgaHlwZXJ0eVVSTCAgICAgIHRoZSBsYXN0IGh5cGVydHlVUkwgYWxsb2NhdGVkIHRvIHRoZSB1c2VyIGlkZW50aWZpZXIKICAgICovCgogIH0sIHsKICAgIGtleTogJ2dldFVzZXJIeXBlcnR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVc2VySHlwZXJ0eShpZGVudGlmaWVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBpZGVudGl0eVVSTCA9IHZvaWQgMDsKICAgICAgdmFyIGVtYWlsID0gdm9pZCAwOwogICAgICBpZiAoaWRlbnRpZmllci5pbmRleE9mKCdAJykgPiAtMSkgewogICAgICAgIGlkZW50aXR5VVJMID0gJ3VzZXI6Ly8nICsgaWRlbnRpZmllci5zdWJzdHJpbmcoaWRlbnRpZmllci5pbmRleE9mKCdAJykgKyAxLCBpZGVudGlmaWVyLmxlbmd0aCkgKyAnLycgKyBpZGVudGlmaWVyLnN1YnN0cmluZygwLCBpZGVudGlmaWVyLmluZGV4T2YoJ0AnKSk7CiAgICAgICAgZW1haWwgPSBpZGVudGlmaWVyOwogICAgICB9IGVsc2UgewogICAgICAgIGlkZW50aXR5VVJMID0gaWRlbnRpZmllcjsKICAgICAgICBlbWFpbCA9ICgwLCBfdXRpbHMuZ2V0VXNlckVtYWlsRnJvbVVSTCkoaWRlbnRpZmllcik7CiAgICAgIH0KICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAnUkVBRCcsIGZyb206IF90aGlzLnJlZ2lzdHJ5VVJMLCB0bzogJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBfdGhpcy5fZG9tYWluICsgJy8nLCBib2R5OiB7IHJlc291cmNlOiBpZGVudGl0eVVSTCB9CiAgICAgIH07CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgLy9jb25zb2xlLmxvZygnTUVTU0FHRScsIHJlcGx5KTsKCiAgICAgICAgICB2YXIgaHlwZXJ0eSA9IHZvaWQgMDsKICAgICAgICAgIHZhciBtb3N0UmVjZW50ID0gdm9pZCAwOwogICAgICAgICAgdmFyIGxhc3RIeXBlcnR5ID0gdm9pZCAwOwogICAgICAgICAgdmFyIHZhbHVlID0gcmVwbHkuYm9keS52YWx1ZTsKICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXBseScsIHZhbHVlKTsKICAgICAgICAgIGZvciAoaHlwZXJ0eSBpbiB2YWx1ZSkgewogICAgICAgICAgICBpZiAodmFsdWVbaHlwZXJ0eV0ubGFzdE1vZGlmaWVkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBpZiAobW9zdFJlY2VudCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBtb3N0UmVjZW50ID0gbmV3IERhdGUodmFsdWVbaHlwZXJ0eV0ubGFzdE1vZGlmaWVkKTsKICAgICAgICAgICAgICAgIGxhc3RIeXBlcnR5ID0gaHlwZXJ0eTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIGh5cGVydHlEYXRlID0gbmV3IERhdGUodmFsdWVbaHlwZXJ0eV0ubGFzdE1vZGlmaWVkKTsKICAgICAgICAgICAgICAgIGlmIChtb3N0UmVjZW50LmdldFRpbWUoKSA8IGh5cGVydHlEYXRlLmdldFRpbWUoKSkgewogICAgICAgICAgICAgICAgICBtb3N0UmVjZW50ID0gaHlwZXJ0eURhdGU7CiAgICAgICAgICAgICAgICAgIGxhc3RIeXBlcnR5ID0gaHlwZXJ0eTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHZhciBoeXBlcnR5VVJMID0gbGFzdEh5cGVydHk7CgogICAgICAgICAgaWYgKGh5cGVydHlVUkwgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXR1cm4gcmVqZWN0KCdVc2VyIEh5cGVydHkgbm90IGZvdW5kJyk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGlkUGFja2FnZSA9IHsKICAgICAgICAgICAgaWQ6IGVtYWlsLAogICAgICAgICAgICBkZXNjcmlwdG9yOiB2YWx1ZVtoeXBlcnR5VVJMXS5kZXNjcmlwdG9yLAogICAgICAgICAgICBoeXBlcnR5VVJMOiBoeXBlcnR5VVJMCiAgICAgICAgICB9OwoKICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT0+IFJlZ2lzdGVySHlwZXJ0eSBtZXNzYWdlQnVuZGxlOiAnLCBpZFBhY2thZ2UpOwogICAgICAgICAgcmVzb2x2ZShpZFBhY2thZ2UpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogRnVuY3Rpb24gdG8gcXVlcnkgdGhlIERvbWFpbiByZWdpc3RyeSwgd2l0aCBhbiB1c2VyIGVtYWlsLgogICAgKiBAcGFyYW0gICAge3N0cmluZ30gICAgICBpZGVudGlmaWVyICAgICAgdXNlciBpZGVudGlmaWVyCiAgICAqIEByZXR1cm4gIHtzdHJpbmd9ICAgICAgIGRhdGFPYmplY3RVUkwgICAgICB0aGUgbGFzdCBkYXRhT2JqZWN0VVJMIGFsbG9jYXRlZCB0byB0aGUgb2JqZWN0IGlkZW50aWZpZXIKICAgICovCgogIH0sIHsKICAgIGtleTogJ2dldERhdGFPYmplY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERhdGFPYmplY3QoaWRlbnRpZmllcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAnUkVBRCcsIGZyb206IF90aGlzLnJlZ2lzdHJ5VVJMLCB0bzogJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBfdGhpcy5fZG9tYWluICsgJy8nLCBib2R5OiB7IHJlc291cmNlOiBpZGVudGlmaWVyIH0KICAgICAgfTsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CgogICAgICAgICAgcmVzb2x2ZShyZXBseSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiAgZnVuY3Rpb24gdG8gZGVsZXRlIGFuIGh5cGVydHlJbnN0YW5jZSBpbiB0aGUgRG9tYWluIFJlZ2lzdHJ5CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkZWxldGVIeXBlcnR5SW5zdGFuY2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlbGV0ZUh5cGVydHlJbnN0YW5jZSh1c2VyLCBoeXBlcnR5SW5zdGFuY2UpIHsKICAgICAgLy9UT0RPIHdvcmtpbmcgYnV0IHRoZSB1c2VyCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbWVzc2FnZSA9IHsgdHlwZTogJ0RFTEVURScsIGZyb206IF90aGlzLnJlZ2lzdHJ5VVJMLAogICAgICAgIHRvOiAnZG9tYWluOi8vcmVnaXN0cnkuJyArIF90aGlzLl9kb21haW4gKyAnLycsCiAgICAgICAgYm9keTogeyB2YWx1ZTogeyB1c2VyOiB1c2VyLCBoeXBlcnR5VVJMOiBoeXBlcnR5SW5zdGFuY2UgfSB9IH07CgogICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtZXNzYWdlLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICBjb25zb2xlLmxvZygnZGVsZXRlIGh5cGVydHkgUmVwbHknLCByZXBseSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiB0byB1cGRhdGUgYW4gSHlwZXJ0eQogICAgKi8KCiAgfSwgewogICAga2V5OiAndXBkYXRlSHlwZXJ0eUluc3RhbmNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVIeXBlcnR5SW5zdGFuY2UocmVzb3VyY2UsIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbWVzc2FnZSA9IHsgdHlwZTogJ1VQREFURScsIGZyb206IF90aGlzLnJlZ2lzdHJ5VVJMLAogICAgICAgIHRvOiAnZG9tYWluOi8vcmVnaXN0cnkuJyArIF90aGlzLl9kb21haW4gKyAnLycsCiAgICAgICAgYm9keTogeyByZXNvdXJjZTogcmVzb3VyY2UsIHZhbHVlOiB2YWx1ZSB9IH07CgogICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0LnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGVkIGh5cGVydHkgcmVwbHknLCByZXBseSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBUbyByZWdpc3RlciBhIG5ldyBEYXRhIE9iamVjdCBpbiB0aGUgcnVudGltZSB3aGljaCByZXR1cm5zIHRoZSBkYXRhT2JqZWN0VVJMIGFsbG9jYXRlZCB0byB0aGUgbmV3IERhdGEgT2JqZWN0LgogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICAgZGVzY3JpcHRvciAgICAgICAgICAgIGRhdGFPYmplY3RDYXRhbG9ndWVVUkwKICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgIGRhdGFPYmplY3QgICAgICAgICAgICBkYXRhT2JqZWN0IGlkZW50aWZpZXIKICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgIHVzZXJJZGVudGlmaWVyICAgICAgICBVc2VyIElkZW50aWZpZXIKICAgICogQHJldHVybiB7U3RyaW5nfSAgICAgIGRhdGFPYmplY3RVUkwgICAgICAgICBkYXRhT2JqZWN0IFVSTAogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVnaXN0ZXJEYXRhT2JqZWN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlckRhdGFPYmplY3QoZGVzY3JpcHRvciwgZGF0YU9iamVjdCwgdXNlcklkZW50aWZpZXIpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGRvbWFpblVybCA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShkZXNjcmlwdG9yKS5kb21haW47CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBfdGhpcy5vYmplY3RBbGxvY2F0aW9uLmNyZWF0ZShkb21haW5VcmwsIGRlc2NyaXB0b3IsIDEpLnRoZW4oZnVuY3Rpb24gKHVybEFsbG9jYXRlZCkgewoKICAgICAgICAgIF90aGlzLmRhdGFPYmplY3RMaXN0W2RhdGFPYmplY3RdID0gdXJsQWxsb2NhdGVkOwoKICAgICAgICAgIC8vbWVzc2FnZSB0byByZWdpc3RlciB0aGUgbmV3IGh5cGVydHksIHdpdGhpbiB0aGUgZG9tYWluIHJlZ2lzdHJ5CiAgICAgICAgICB2YXIgbWVzc2FnZVZhbHVlID0geyBkYXRhT2JqZWN0OiBkYXRhT2JqZWN0LCBkZXNjcmlwdG9yOiBkZXNjcmlwdG9yLCBkYXRhT2JqZWN0VVJMOiB1cmxBbGxvY2F0ZWQsIGV4cGlyZXM6IF90aGlzLmV4cGlyZXNUaW1lIH07CgogICAgICAgICAgdmFyIG1lc3NhZ2UgPSBfdGhpcy5tZXNzYWdlRmFjdG9yeS5jcmVhdGVDcmVhdGVNZXNzYWdlUmVxdWVzdChfdGhpcy5yZWdpc3RyeVVSTCwgJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBfdGhpcy5yZWdpc3RyeURvbWFpbiArICcvJywgbWVzc2FnZVZhbHVlLCAncG9saWN5Jyk7CgogICAgICAgICAgLy9UT0RPIHNtYWxsIGZpeCwgYmVjYXVzZSB0aGUgY29ubmVjdG9yIGRvIG5vdCB5ZXQgYWNjZXB0IGxvd2VyIGNhc2UKICAgICAgICAgIG1lc3NhZ2UudHlwZSA9ICdDUkVBVEUnOwogICAgICAgICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT0+IHJlZ2lzdGVyRGF0YU9iamVjdCBSZXBseTogJywgcmVwbHkpOwogICAgICAgICAgfSk7CgogICAgICAgICAgcmVzb2x2ZSh1cmxBbGxvY2F0ZWQpOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHJlZ2lzdGVyIGEgbmV3IEh5cGVydHkgaW4gdGhlIHJ1bnRpbWUgd2hpY2ggcmV0dXJucyB0aGUgSHlwZXJ0eVVSTCBhbGxvY2F0ZWQgdG8gdGhlIG5ldyBIeXBlcnR5LgogICAgKiBAcGFyYW0gIHtTYW5kYm94fSAgICAgICAgICAgICBzYW5kYm94ICAgICAgICAgICAgICAgc2FuZGJveAogICAgKiBAcGFyYW0gIHtIeXBlcnR5Q2F0YWxvZ3VlVVJMfSBIeXBlcnR5Q2F0YWxvZ3VlVVJMICAgZGVzY3JpcHRvcgogICAgKiBAcmV0dXJuIHtIeXBlcnR5VVJMfSAgICAgICAgICBIeXBlcnR5VVJMCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3Rlckh5cGVydHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVySHlwZXJ0eShzYW5kYm94LCBkZXNjcmlwdG9yKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL2Fzc3VtaW5nIGRlc2NyaXB0b3IgY29tZSBpbiB0aGlzIGZvcm1hdCwgdGhlIHNlcnZpY2UtcHJvdmlkZXItZG9tYWluIHVybCBpcyByZXRyaWV2ZWQgYnkgYSBzcGxpdCBpbnN0cnVjdGlvbgogICAgICAvL2h5cGVydHktY2F0YWxvZ3VlOi8vPHNlcnZpY2UtcHJvdmlkZXItZG9tYWluPi88Y2F0YWxvZ3VlLW9iamVjdC1pZGVudGlmaWVyPgogICAgICB2YXIgZG9tYWluVXJsID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKGRlc2NyaXB0b3IpLmRvbWFpbjsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIF90aGlzLmlkTW9kdWxlLmxvZ2luV2l0aFJQKCdnb29nbGUnLCAnbWUnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIHZhciBlbWFpbCA9IHJlc3VsdC5lbWFpbDsKICAgICAgICAgIHZhciBpZGVudGl0eVVSTCA9ICd1c2VyOi8vJyArIGVtYWlsLnN1YnN0cmluZyhlbWFpbC5pbmRleE9mKCdAJykgKyAxLCBlbWFpbC5sZW5ndGgpICsgJy8nICsgZW1haWwuc3Vic3RyaW5nKDAsIGVtYWlsLmluZGV4T2YoJ0AnKSk7CgogICAgICAgICAgaWYgKF90aGlzLl9tZXNzYWdlQnVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgcmVqZWN0KCdNZXNzYWdlQnVzIG5vdCBmb3VuZCBvbiByZWdpc3RlclN0dWInKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vY2FsbCBjaGVjayBpZiB0aGUgcHJvdG9zdHViIGV4aXN0CiAgICAgICAgICAgIF90aGlzLnJlc29sdmUoJ2h5cGVydHktcnVudGltZTovLycgKyBkb21haW5VcmwpLnRoZW4oZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgICBfdGhpcy5yZWdpc3RyeURvbWFpbiA9IGRvbWFpblVybDsKCiAgICAgICAgICAgICAgLy8gVE9ETzogc2hvdWxkIGJlIGltcGxlbWVudGVkIHdpdGggYWRkcmVzc2VzIHBvbGwKICAgICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2Ugd2Ugd2lsbCByZXF1ZXN0IGFuZCByZXR1cm4gb25seSBvbmUKICAgICAgICAgICAgICAvLyBhZGRyZXNzCiAgICAgICAgICAgICAgdmFyIG51bWJlck9mQWRkcmVzc2VzID0gMTsKICAgICAgICAgICAgICBfdGhpcy5hZGRyZXNzQWxsb2NhdGlvbi5jcmVhdGUoZG9tYWluVXJsLCBudW1iZXJPZkFkZHJlc3NlcykudGhlbihmdW5jdGlvbiAoYWRkZXJlc3NMaXN0KSB7CgogICAgICAgICAgICAgICAgYWRkZXJlc3NMaXN0LmZvckVhY2goZnVuY3Rpb24gKGFkZHJlc3MpIHsKCiAgICAgICAgICAgICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGFkZHJlc3MgKyAnL3N0YXR1cycsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTWVzc2FnZSBhZGRMaXN0ZW5lciBmb3IgOiAnLCBhZGRyZXNzICsgJy9zdGF0dXMgLT4gJyArIG1zZyk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdmFyIGh5cGVydHkgPSBuZXcgX0h5cGVydHlJbnN0YW5jZTIuZGVmYXVsdChfdGhpcy5pZGVudGlmaWVyLCBfdGhpcy5yZWdpc3RyeVVSTCwgZGVzY3JpcHRvciwgYWRkZXJlc3NMaXN0WzBdLCBpZGVudGl0eVVSTCk7CgogICAgICAgICAgICAgICAgX3RoaXMuaHlwZXJ0aWVzTGlzdC5wdXNoKGh5cGVydHkpOwoKICAgICAgICAgICAgICAgIC8vY2hlY2sgd2hldGhlciB0aGUgcmVjZWl2ZWQgc2FuYm94IGUgQXBwbGljYXRpb25TYW5kYm94IG9yIGEgbm9ybWFsIHNhbmRib3gKICAgICAgICAgICAgICAgIGlmIChzYW5kYm94LnR5cGUgPT09ICdhcHAnKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnNhbmRib3hlc0xpc3QuYXBwU2FuZGJveFthZGRlcmVzc0xpc3RbMF1dID0gc2FuZGJveDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2FuZGJveC50eXBlID09PSAnbm9ybWFsJykgewoKICAgICAgICAgICAgICAgICAgX3RoaXMuc2FuZGJveGVzTGlzdC5zYW5kYm94W2FkZGVyZXNzTGlzdFswXV0gPSBzYW5kYm94OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVqZWN0KCdXcm9uZyBTYW5kYm94VHlwZScpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vbWVzc2FnZSB0byByZWdpc3RlciB0aGUgbmV3IGh5cGVydHksIHdpdGhpbiB0aGUgZG9tYWluIHJlZ2lzdHJ5CiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZVZhbHVlID0geyB1c2VyOiBpZGVudGl0eVVSTCwgaHlwZXJ0eURlc2NyaXB0b3JVUkw6IGRlc2NyaXB0b3IsIGh5cGVydHlVUkw6IGFkZGVyZXNzTGlzdFswXSwgZXhwaXJlczogX3RoaXMuZXhwaXJlc1RpbWUgfTsKCiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IF90aGlzLm1lc3NhZ2VGYWN0b3J5LmNyZWF0ZUNyZWF0ZU1lc3NhZ2VSZXF1ZXN0KF90aGlzLnJlZ2lzdHJ5VVJMLCAnZG9tYWluOi8vcmVnaXN0cnkuJyArIF90aGlzLnJlZ2lzdHJ5RG9tYWluICsgJy8nLCBtZXNzYWdlVmFsdWUsICdwb2xpY3knKTsKCiAgICAgICAgICAgICAgICAvL1RPRE8gc21hbGwgZml4LCBiZWNhdXNlIHRoZSBjb25uZWN0b3IgZG8gbm90IHlldCBhY2NlcHQgbG93ZXIgY2FzZQogICAgICAgICAgICAgICAgbWVzc2FnZS50eXBlID0gJ0NSRUFURSc7CgogICAgICAgICAgICAgICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT0+IFJlZ2lzdGVySHlwZXJ0eSBSZXBseTogJywgcmVwbHkpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy90aW1lciB0byBrZWVwIHRoZSByZWdpc3RyYXRpb24gYWxpdmUKICAgICAgICAgICAgICAgIC8vIHRoZSB0aW1lIGlzIGRlZmluZWQgYnkgYSBsaXR0bGUgbGVzcyB0aGFuIGhhbGYgb2YgdGhlIGV4cGlyZXMgdGltZSBkZWZpbmVkCiAgICAgICAgICAgICAgICB2YXIga2VlcEFsaXZlVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IF90aGlzLm1lc3NhZ2VGYWN0b3J5LmNyZWF0ZUNyZWF0ZU1lc3NhZ2VSZXF1ZXN0KF90aGlzLnJlZ2lzdHJ5VVJMLCAnZG9tYWluOi8vcmVnaXN0cnkuJyArIF90aGlzLnJlZ2lzdHJ5RG9tYWluICsgJy8nLCBtZXNzYWdlVmFsdWUsICdwb2xpY3knKTsKCiAgICAgICAgICAgICAgICAgIC8vVE9ETyBzbWFsbCBmaXgsIGJlY2F1c2UgdGhlIGNvbm5lY3RvciBkbyBub3QgeWV0IGFjY2VwdCBsb3dlciBjYXNlCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHlwZSA9ICdDUkVBVEUnOwogICAgICAgICAgICAgICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtZXNzYWdlLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnPT09PiBLZWVwQWxpdmUgUmVwbHk6ICcsIHJlcGx5KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCBfdGhpcy5leHBpcmVzVGltZSAvIDEuMSAvIDIgKiAxMDAwKTsKCiAgICAgICAgICAgICAgICByZXNvbHZlKGFkZGVyZXNzTGlzdFswXSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWRkcmVzcyBSZWFzb246ICcsIHJlYXNvbik7CiAgICAgICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHJlamVjdCgnRmFpbGVkIHRvIG9idGFpbiBhbiBpZGVudGl0eScpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogVG8gdW5yZWdpc3RlciBhIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCBIeXBlcnR5CiAgICAqIEBwYXJhbSAge0h5cGVydHlVUkx9ICAgICAgICAgIEh5cGVydHlVUkwgdXJsICAgICAgICB1cmwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3VucmVnaXN0ZXJIeXBlcnR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiB1bnJlZ2lzdGVySHlwZXJ0eSh1cmwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciBmb3VuZCA9IGZhbHNlOwogICAgICAgIHZhciBpbmRleCA9IDA7CgogICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IF90aGlzLmh5cGVydGllc0xpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICB2YXIgaHlwZXJ0eSA9IF90aGlzLmh5cGVydGllc0xpc3RbaW5kZXhdOwogICAgICAgICAgaWYgKGh5cGVydHkgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBpZiAoaHlwZXJ0eS5oeXBlcnR5VVJMID09PSB1cmwpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChmb3VuZCA9PT0gZmFsc2UpIHsKICAgICAgICAgIHJlamVjdCgnSHlwZXJ0eSBub3QgZm91bmQnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVsZXRlIF90aGlzLmh5cGVydGllc0xpc3RbaW5kZXhdOwogICAgICAgICAgcmVzb2x2ZSgnSHlwZXJ0eSBzdWNjZXNzZnVsbHkgZGVsZXRlZCcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIGRpc2NvdmVyIHByb3RvY29sIHN0dWJzIGF2YWlsYWJsZSBpbiB0aGUgcnVudGltZSBmb3IgYSBjZXJ0YWluIGRvbWFpbi4gSWYgYXZhaWxhYmxlLCBpdCByZXR1cm5zIHRoZSBydW50aW1lIHVybCBmb3IgdGhlIHByb3RvY29sIHN0dWIgdGhhdCBjb25uZWN0cyB0byB0aGUgcmVxdWVzdGVkIGRvbWFpbi4gUmVxdWlyZWQgYnkgdGhlIHJ1bnRpbWUgQlVTIHRvIHJvdXRlIG1lc3NhZ2VzIHRvIHJlbW90ZSBzZXJ2ZXJzIG9yIHBlZXJzIChkbyB3ZSBuZWVkIHNvbWV0aGluZyBzaW1pbGFyIGZvciBIeXBlcnRpZXM/KS4KICAgICogQHBhcmFtICB7RG9tYWluVVJMfSAgICAgICAgICAgRG9tYWluVVJMICAgICAgICAgICAgdXJsCiAgICAqIEByZXR1cm4ge1J1bnRpbWVVUkx9ICAgICAgICAgICBSdW50aW1lVVJMCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkaXNjb3ZlclByb3Rvc3R1YicsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY292ZXJQcm90b3N0dWIodXJsKSB7CiAgICAgIGlmICghdXJsKSB0aHJvdyBuZXcgRXJyb3IoJ1BhcmFtZXRlciB1cmwgbmVlZGVkJyk7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICB2YXIgcmVxdWVzdCA9IF90aGlzLnByb3Rvc3R1YnNMaXN0W3VybF07CgogICAgICAgIGlmIChyZXF1ZXN0ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJlamVjdCgncmVxdWVzdFVwZGF0ZSBjb3VsZG5cJyBnZXQgdGhlIFByb3Rvc3R1YlVSTCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXNvbHZlKHJlcXVlc3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUbyByZWdpc3RlciBhIG5ldyBQcm90b2NvbCBTdHViIGluIHRoZSBydW50aW1lIGluY2x1ZGluZyBhcyBpbnB1dCBwYXJhbWV0ZXJzIHRoZSBmdW5jdGlvbiB0byBwb3N0TWVzc2FnZSwgdGhlIERvbWFpblVSTCB0aGF0IGlzIGNvbm5lY3RlZCB3aXRoIHRoZSBzdHViLCB3aGljaCByZXR1cm5zIHRoZSBSdW50aW1lVVJMIGFsbG9jYXRlZCB0byB0aGUgbmV3IFByb3RvY29sU3R1Yi4KICAgICAqIEBwYXJhbSB7U2FuZGJveH0gICAgICAgIFNhbmRib3gKICAgICAqIEBwYXJhbSAge0RvbWFpblVSTH0gICAgIERvbWFpblVSTCBzZXJ2aWNlIHByb3ZpZGVyIGRvbWFpbgogICAgICogQHJldHVybiB7UnVudGltZVByb3RvU3R1YlVSTH0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3RlclN0dWInLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyU3R1YihzYW5kYm94LCBkb21haW5VUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHJ1bnRpbWVQcm90b1N0dWJVUkwgPSB2b2lkIDA7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICAvL2NoZWNrIGlmIG1lc3NhZ2VCdXMgaXMgcmVnaXN0ZXJlZCBpbiByZWdpc3RyeSBvciBub3QKICAgICAgICBpZiAoX3RoaXMuX21lc3NhZ2VCdXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVqZWN0KCdNZXNzYWdlQnVzIG5vdCBmb3VuZCBvbiByZWdpc3RlclN0dWInKTsKICAgICAgICB9CgogICAgICAgIC8vVE9ETyBpbXBsZW1lbnQgYSB1bmlxdWUgbnVtYmVyIGZvciB0aGUgcHJvdG9zdHViVVJMCiAgICAgICAgaWYgKCFkb21haW5VUkwuaW5kZXhPZignbXNnLW5vZGUuJykpIHsKICAgICAgICAgIGRvbWFpblVSTCA9IGRvbWFpblVSTC5zdWJzdHJpbmcoZG9tYWluVVJMLmluZGV4T2YoJy4nKSArIDEpOwogICAgICAgIH0KCiAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTCA9ICdtc2ctbm9kZS4nICsgZG9tYWluVVJMICsgJy9wcm90b3N0dWIvJyArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwICsgMSk7CgogICAgICAgIC8vIFRPRE86IE9wdGltaXplIHRoaXMKICAgICAgICBfdGhpcy5wcm90b3N0dWJzTGlzdFtkb21haW5VUkxdID0gcnVudGltZVByb3RvU3R1YlVSTDsKICAgICAgICBfdGhpcy5zYW5kYm94ZXNMaXN0LnNhbmRib3hbcnVudGltZVByb3RvU3R1YlVSTF0gPSBzYW5kYm94OwoKICAgICAgICAvLyBzYW5kYm94LmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24obXNnKSB7CiAgICAgICAgLy8gICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgIC8vIH0pOwoKICAgICAgICByZXNvbHZlKHJ1bnRpbWVQcm90b1N0dWJVUkwpOwoKICAgICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihydW50aW1lUHJvdG9TdHViVVJMICsgJy9zdGF0dXMnLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICBpZiAobXNnLnJlc291cmNlID09PSBtc2cudG8gKyAnL3N0YXR1cycpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1J1bnRpbWVQcm90b3N0dWJVUkwvc3RhdHVzIG1lc3NhZ2U6ICcsIG1zZy5ib2R5LnZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHVucmVnaXN0ZXIgYSBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgcHJvdG9jb2wgc3R1YgogICAgKiBAcGFyYW0gIHtIeXBlcnR5UnVudGltZVVSTH0gICBIeXBlcnR5UnVudGltZVVSTCAgICAgaHlwZXJ0eVJ1bnRpbWVVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3VucmVnaXN0ZXJTdHViJywKICAgIHZhbHVlOiBmdW5jdGlvbiB1bnJlZ2lzdGVyU3R1YihoeXBlcnR5UnVudGltZVVSTCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgcnVudGltZVByb3RvU3R1YlVSTCA9IHZvaWQgMDsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciBkYXRhID0gX3RoaXMucHJvdG9zdHVic0xpc3RbaHlwZXJ0eVJ1bnRpbWVVUkxdOwoKICAgICAgICBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZWplY3QoJ0Vycm9yIG9uIHVucmVnaXN0ZXJTdHViOiBIeXBlcnR5IG5vdCBmb3VuZCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkZWxldGUgX3RoaXMucHJvdG9zdHVic0xpc3RbaHlwZXJ0eVJ1bnRpbWVVUkxdOwogICAgICAgICAgcmVzb2x2ZSgnUHJvdG9zdHViVVJMIHJlbW92ZWQnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBUbyByZWdpc3RlciBhIG5ldyBQb2xpY3kgRW5mb3JjZXIgaW4gdGhlIHJ1bnRpbWUgaW5jbHVkaW5nIGFzIGlucHV0IHBhcmFtZXRlcnMgdGhlIGZ1bmN0aW9uIHRvIHBvc3RNZXNzYWdlLCB0aGUgSHlwZXJ0eVVSTCBhc3NvY2lhdGVkIHdpdGggdGhlIFBFUCwgd2hpY2ggcmV0dXJucyB0aGUgUnVudGltZVVSTCBhbGxvY2F0ZWQgdG8gdGhlIG5ldyBQb2xpY3kgRW5mb3JjZXIgY29tcG9uZW50LgogICAgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9IHBvc3RNZXNzYWdlIHBvc3RNZXNzYWdlCiAgICAqIEBwYXJhbSAge0h5cGVydHlVUkx9ICAgICAgICAgIEh5cGVydHlVUkwgICAgICAgICAgICBoeXBlcnR5CiAgICAqIEByZXR1cm4ge0h5cGVydHlSdW50aW1lVVJMfSAgIEh5cGVydHlSdW50aW1lVVJMCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3RlclBFUCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJQRVAocG9zdE1lc3NhZ2UsIGh5cGVydHkpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgLy9UT0RPIGNoZWNrIHdoYXQgcGFyYW1ldGVyIGluIHRoZSBwb3N0TWVzc2FnZSB0aGUgcGVwIGlzLgogICAgICAgIF90aGlzLnBlcExpc3RbaHlwZXJ0eV0gPSBwb3N0TWVzc2FnZTsKICAgICAgICByZXNvbHZlKCdQRVAgcmVnaXN0ZXJlZCB3aXRoIHN1Y2Nlc3MnKTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHVucmVnaXN0ZXIgYSBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgcHJvdG9jb2wgc3R1YgogICAgKiBAcGFyYW0gIHtIeXBlcnR5UnVudGltZVVSTH0gICBIeXBlcnR5UnVudGltZVVSTCAgICAgSHlwZXJ0eVJ1bnRpbWVVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3VucmVnaXN0ZXJQRVAnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVucmVnaXN0ZXJQRVAoSHlwZXJ0eVJ1bnRpbWVVUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciByZXN1bHQgPSBfdGhpcy5wZXBMaXN0W0h5cGVydHlSdW50aW1lVVJMXTsKCiAgICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZWplY3QoJ1BlcCBOb3QgZm91bmQuJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc29sdmUoJ1BFUCBzdWNjZXNzZnVsbHkgcmVtb3ZlZC4nKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBUbyByZWNlaXZlIHN0YXR1cyBldmVudHMgZnJvbSBjb21wb25lbnRzIHJlZ2lzdGVyZWQgaW4gdGhlIFJlZ2lzdHJ5LgogICAgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9ICAgICBNZXNzYWdlLk1lc3NhZ2UgICAgICAgZXZlbnQKICAgICovCgogIH0sIHsKICAgIGtleTogJ29uRXZlbnQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uRXZlbnQoZXZlbnQpIHt9CiAgICAvLyBUT0RPIGJvZHkuLi4KCgogICAgLyoqCiAgICAqIFRvIGRpc2NvdmVyIHNhbmRib3hlcyBhdmFpbGFibGUgaW4gdGhlIHJ1bnRpbWUgZm9yIGEgY2VydGFpbiBkb21haW4uIFJlcXVpcmVkIGJ5IHRoZSBydW50aW1lIFVBIHRvIGF2b2lkIG1vcmUgdGhhbiBvbmUgc2FuZGJveCBmb3IgdGhlIHNhbWUgZG9tYWluLgogICAgKiBAcGFyYW0gIHtEb21haW5VUkx9IERvbWFpblVSTCB1cmwKICAgICogQHJldHVybiB7UnVudGltZVNhbmRib3h9ICAgICAgICAgICBSdW50aW1lU2FuZGJveAogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0U2FuZGJveCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2FuZGJveCh1cmwpIHsKICAgICAgaWYgKCF1cmwpIHRocm93IG5ldyBFcnJvcignUGFyYW1ldGVyIHVybCBuZWVkZWQnKTsKICAgICAgY29uc29sZS5sb2coJ2dldFNhbmRib3g6ICcsIHVybCk7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICB2YXIgcmVxdWVzdCA9IHZvaWQgMDsKCiAgICAgICAgLy9maXJzdCB0cnkgdG8gZmluZCB0aGUgdXJsIGluIHRoZSBhcHBTYW5kYm94IGxpc3QKICAgICAgICByZXF1ZXN0ID0gX3RoaXMuc2FuZGJveGVzTGlzdC5hcHBTYW5kYm94W3VybF07CgogICAgICAgIC8vaWYgbm8gYXBwU2FuZGJveCB3YXMgZm91bmQsIHRyeSB0byBzZWFyY2ggaW4gdGhlIG5vcm1hbCBzYW5kYm94ZXMgbGlzdAogICAgICAgIGlmICghcmVxdWVzdCkgewogICAgICAgICAgcmVxdWVzdCA9IF90aGlzLnNhbmRib3hlc0xpc3Quc2FuZGJveFt1cmxdOwoKICAgICAgICAgIGlmICghcmVxdWVzdCkgewoKICAgICAgICAgICAgdmFyIGRvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKSh1cmwpLmRvbWFpbjsKCiAgICAgICAgICAgIC8vIHNlYXJjaCBpbiB0aGUgc2FuZGJveGVzIGxpc3QgZm9yIGEgZW50cnkgY29udGFpbmluZyB0aGUgZG9tYWluIGdpdmVuCiAgICAgICAgICAgIGZvciAodmFyIHNhbmRib3ggaW4gX3RoaXMuc2FuZGJveGVzTGlzdC5zYW5kYm94KSB7CiAgICAgICAgICAgICAgaWYgKHNhbmRib3guaW5jbHVkZXMoZG9tYWluKSkgewogICAgICAgICAgICAgICAgcmVxdWVzdCA9IF90aGlzLnNhbmRib3hlc0xpc3Quc2FuZGJveFtzYW5kYm94XTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7CiAgICAgICAgICByZWplY3QoJ25vIHNhbmRib3ggZm91bmQgZm9yOiAnICsgdXJsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBUbyB2ZXJpZnkgaWYgc291cmNlIGlzIHZhbGlkIGFuZCB0byByZXNvbHZlIHRhcmdldCBydW50aW1lIHVybCBhZGRyZXNzIGlmIG5lZWRlZCAoZWcgcHJvdG9zdHViIHJ1bnRpbWUgdXJsIGluIGNhc2UgdGhlIG1lc3NhZ2UgaXMgdG8gYmUgZGlzcGF0Y2hlZCB0byBhIHJlbW90ZSBlbmRwb2ludCkuCiAgICAqIEBwYXJhbSAge1VSTC5VUkx9ICB1cmwgICAgICAgdXJsCiAgICAqIEByZXR1cm4ge1Byb21pc2U8VVJMLlVSTD59ICAgICAgICAgICAgICAgICBQcm9taXNlIDxVUkwuVVJMPgogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVzb2x2ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZSh1cmwpIHsKICAgICAgY29uc29sZS5sb2coJ3Jlc29sdmUgJyArIHVybCk7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL3NwbGl0IHRoZSB1cmwgdG8gZmluZCB0aGUgZG9tYWluVVJMLiBkZWFscyB3aXRoIHRoZSB1cmwgZm9yIGV4YW1wbGUgYXM6CiAgICAgIC8vImh5cGVydHktcnVudGltZTovL3NwMS9wcm90b3N0dWIvMTIzIiwKICAgICAgdmFyIGRvbWFpblVybCA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKSh1cmwpLmRvbWFpbjsKCiAgICAgIC8vIHJlc29sdmUgdGhlIGRvbWFpbiBwcm90b3N0dWIgaW4gY2FzZSBvZiBhIG1lc3NhZ2UgdG8gZ2xvYmFsIHJlZ2lzdHJ5CiAgICAgIGlmICh1cmwuaW5jbHVkZXMoJ2dsb2JhbDovL3JlZ2lzdHJ5JykpIHsKICAgICAgICBkb21haW5VcmwgPSBfdGhpcy5fZG9tYWluOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBpZiAoIWRvbWFpblVybC5pbmRleE9mKCdtc2ctbm9kZS4nKSB8fCAhZG9tYWluVXJsLmluZGV4T2YoJ3JlZ2lzdHJ5LicpKSB7CiAgICAgICAgICBkb21haW5VcmwgPSBkb21haW5Vcmwuc3Vic3RyaW5nKGRvbWFpblVybC5pbmRleE9mKCcuJykgKyAxKTsKICAgICAgICB9CgogICAgICAgIHZhciByZXF1ZXN0ID0gX3RoaXMucHJvdG9zdHVic0xpc3RbZG9tYWluVXJsXTsKCiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcigncnVudGltZTpzdHViTG9hZGVkJywgZnVuY3Rpb24gKGRvbWFpblVybCkgewogICAgICAgICAgcmVxdWVzdCA9IF90aGlzLnByb3Rvc3R1YnNMaXN0W2RvbWFpblVybF07CiAgICAgICAgICBjb25zb2xlLmluZm8oJ1Jlc29sdmVkOiAnLCByZXF1ZXN0KTsKICAgICAgICAgIHJlc29sdmUocmVxdWVzdCk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChyZXF1ZXN0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnUmVzb2x2ZWQ6ICcsIHJlcXVlc3QpOwogICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMudHJpZ2dlcigncnVudGltZTpsb2FkU3R1YicsIGRvbWFpblVybCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdtZXNzYWdlQnVzJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX21lc3NhZ2VCdXM7CiAgICB9CgogICAgLyoqCiAgICAqIFNldCB0aGUgbWVzc2FnZUJ1cyBpbiB0aGlzIFJlZ2lzdHJ5CiAgICAqIEBwYXJhbSB7TWVzc2FnZUJ1c30gICAgICAgICAgIG1lc3NhZ2VCdXMKICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChtZXNzYWdlQnVzKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLl9tZXNzYWdlQnVzID0gbWVzc2FnZUJ1czsKCiAgICAgIC8vIGFsc28gc2V0IHVwIG1lc3NhZ2VCdXMgaW4gdGhlIElkZW50aXR5TW9kdWxlIGNvbXBvbmVudAogICAgICAvLyBUT0RPIHJlZGVmaW5lIGEgYmV0dGVyIHdheSB0byBhZGQgdGhlIG1lc3NhZ2VCdXMgaW4gdGhlIElkTW9kdWxlCiAgICAgIF90aGlzLmlkTW9kdWxlLm1lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzOwoKICAgICAgLy8gSW5zdGFsbCBBZGRyZXNzQWxsb2NhdGlvbgogICAgICB2YXIgYWRkcmVzc0FsbG9jYXRpb24gPSBuZXcgX0FkZHJlc3NBbGxvY2F0aW9uMi5kZWZhdWx0KF90aGlzLnJlZ2lzdHJ5VVJMLCBtZXNzYWdlQnVzKTsKICAgICAgX3RoaXMuYWRkcmVzc0FsbG9jYXRpb24gPSBhZGRyZXNzQWxsb2NhdGlvbjsKCiAgICAgIC8vSW5zdGFsbCBPYmplY3RBbGxvY2F0aW9uCiAgICAgIHZhciBvYmplY3RBbGxvY2F0aW9uID0gbmV3IF9PYmplY3RBbGxvY2F0aW9uMi5kZWZhdWx0KF90aGlzLnJlZ2lzdHJ5VVJMICsgJy9vYmplY3QtYWxsb2NhdGlvbicsIG1lc3NhZ2VCdXMpOwogICAgICBfdGhpcy5vYmplY3RBbGxvY2F0aW9uID0gb2JqZWN0QWxsb2NhdGlvbjsKICAgIH0KICB9XSk7CgogIHJldHVybiBSZWdpc3RyeTsKfShfRXZlbnRFbWl0dGVyMy5kZWZhdWx0KTsKCmV4cG9ydHMuZGVmYXVsdCA9IFJlZ2lzdHJ5Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi9zeW5jaGVyL09iamVjdEFsbG9jYXRpb24iOjE5NSwiLi4vdXRpbHMvRXZlbnRFbWl0dGVyIjoyMDAsIi4uL3V0aWxzL3V0aWxzLmpzIjoyMDEsIi4vQWRkcmVzc0FsbG9jYXRpb24iOjE5MCwiLi9IeXBlcnR5SW5zdGFuY2UiOjE5MSwic2VydmljZS1mcmFtZXdvcmsiOjE2MH1dLDE5MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioKKiAgIEBhdXRob3I6IEdpbCBEaWFzIChnaWwuZGlhc0B0ZWNuaWNvLnVsaXNib2EucHQpCiogICBSZWdpc3RyeSBEYXRhIE1vZGVsIGluY2x1ZGVzIGFsbCBPYmplY3RzIHRvIGJlIGhhbmRsZWQgYnkgdGhlIFJlZ2lzdHJ5IGZ1bmN0aW9uYWxpdHkgaW5jbHVkaW5nCiovCgp2YXIgUmVnaXN0cnlEYXRhTW9kZWwgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUmVnaXN0cnlEYXRhTW9kZWwoaWQsIHVybCwgZGVzY3JpcHRvciwgc3RhcnRpbmdUaW1lLCBsYXN0TW9kaWZpZWQsIHN0YXR1cywgc3R1YnMsIHN0dWJzQ29uZmlndXJhdGlvbikgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlZ2lzdHJ5RGF0YU1vZGVsKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9pZCA9IGlkOwogICAgX3RoaXMuX3VybCA9IHVybDsKICAgIF90aGlzLl9kZXNjcmlwdG9yID0gZGVzY3JpcHRvcjsKICAgIF90aGlzLl9zdGFydGluZ1RpbWUgPSBzdGFydGluZ1RpbWU7CiAgICBfdGhpcy5fbGFzdE1vZGlmaWVkID0gbGFzdE1vZGlmaWVkOwogICAgX3RoaXMuX3N0YXR1cyA9IHN0YXR1czsKICAgIF90aGlzLl9zdHVicyA9IHN0dWJzOwogICAgX3RoaXMuX3N0dWJzQ29uZmlndXJhdGlvbiA9IHN0dWJzQ29uZmlndXJhdGlvbjsKICB9CgogIF9jcmVhdGVDbGFzcyhSZWdpc3RyeURhdGFNb2RlbCwgW3sKICAgIGtleTogImlkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX2lkOwogICAgfQogIH0sIHsKICAgIGtleTogInVybCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl91cmw7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVzY3JpcHRvciIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl9kZXNjcmlwdG9yOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFJlZ2lzdHJ5RGF0YU1vZGVsOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBSZWdpc3RyeURhdGFNb2RlbDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwxOTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsgLy8gU2VydmljZSBGcmFtZXdvcmsgZGVwZW5kZWNpZXMKCgovL01haW4gZGVwZW5kZWNpZXMKCgp2YXIgX1J1bnRpbWVDYXRhbG9ndWUgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1J1bnRpbWVDYXRhbG9ndWUnKTsKCnZhciBfUnVudGltZUNhdGFsb2d1ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SdW50aW1lQ2F0YWxvZ3VlKTsKCnZhciBfUmVnaXN0cnkgPSByZXF1aXJlKCcuLi9yZWdpc3RyeS9SZWdpc3RyeScpOwoKdmFyIF9SZWdpc3RyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SZWdpc3RyeSk7Cgp2YXIgX0lkZW50aXR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaWRlbnRpdHkvSWRlbnRpdHlNb2R1bGUnKTsKCnZhciBfSWRlbnRpdHlNb2R1bGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSWRlbnRpdHlNb2R1bGUpOwoKdmFyIF9Qb2xpY3lFbmdpbmUgPSByZXF1aXJlKCcuLi9wb2xpY3kvUG9saWN5RW5naW5lJyk7Cgp2YXIgX1BvbGljeUVuZ2luZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qb2xpY3lFbmdpbmUpOwoKdmFyIF9NZXNzYWdlQnVzID0gcmVxdWlyZSgnLi4vYnVzL01lc3NhZ2VCdXMnKTsKCnZhciBfTWVzc2FnZUJ1czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NZXNzYWdlQnVzKTsKCnZhciBfR3JhcGhDb25uZWN0b3IgPSByZXF1aXJlKCcuLi9ncmFwaGNvbm5lY3Rvci9HcmFwaENvbm5lY3RvcicpOwoKdmFyIF9HcmFwaENvbm5lY3RvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9HcmFwaENvbm5lY3Rvcik7Cgp2YXIgX1N5bmNoZXJNYW5hZ2VyID0gcmVxdWlyZSgnLi4vc3luY2hlci9TeW5jaGVyTWFuYWdlcicpOwoKdmFyIF9TeW5jaGVyTWFuYWdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TeW5jaGVyTWFuYWdlcik7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMnKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgogKiBSdW50aW1lIFVzZXIgQWdlbnQgSW50ZXJmYWNlIHdpbGwgcHJvY2VzcyBhbGwgdGhlIGRlcGVuZGVjaWVzIG9mIHRoZSBjb3JlIHJ1bnRpbWU7CiAqIEBhdXRob3IgVml0b3IgU2lsdmEgW3ZpdG9yLXQtc2lsdmFAdGVsZWNvbS5wdF0KICogQHZlcnNpb24gMC40LjAKICoKICogQHByb3BlcnR5IHtydW50aW1lRmFjdG9yeX0gcnVudGltZUZhY3RvcnkgLSBTcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBvZiBzYW5kYm94OwogKiBAcHJvcGVydHkge1J1bnRpbWVDYXRhbG9ndWV9IHJ1bnRpbWVDYXRhbG9ndWUgLSBDYXRhbG9ndWUgb2YgY29tcG9uZW50cyBjYW4gYmUgaW5zdGFsbGVkOwogKiBAcHJvcGVydHkge3J1bnRpbWVVUkx9IHJ1bnRpbWVVUkwgLSBUaGlzIGlkZW50aWZ5IHRoZSBjb3JlIHJ1bnRpbWUsIHNob3VsZCBiZSB1bmlxdWU7CiAqIEBwcm9wZXJ0eSB7SWRlbnRpdHlNb2R1bGV9IGlkZW50aXR5TW9kdWxlIC0gSWRlbnRpdHkgTW9kdWxlOwogKiBAcHJvcGVydHkge1BvbGljeUVuZ2luZX0gcG9saWN5RW5naW5lIC0gUG9saWN5IEVuZ2luZSBNb2R1bGU7CiAqIEBwcm9wZXJ0eSB7UmVnaXN0cnl9IHJlZ2lzdHJ5IC0gUmVnaXN0cnkgTW9kdWxlOwogKiBAcHJvcGVydHkge01lc3NhZ2VCdXN9IG1lc3NhZ2VCdXMgLSBNZXNzYWdlIEJ1cyBpcyB1c2VkIGxpa2UgYSByb3V0ZXIgdG8gcmVkaXJlY3QgdGhlIG1lc3NhZ2VzIGZyb20gb25lIGNvbXBvbmVudCB0byBvdGhlcihzKQogKiBAcHJvcGVydHkge0dyYXBoQ29ubmVjdG9yfSBncmFwaENvbm5lY3RvciAtIEdyYXBoIENvbm5lY3RvciBoYW5kbGluZyBHVUlEIGFuZCBjb250YWN0cwogKi8KCnZhciBSdW50aW1lVUEgPSBmdW5jdGlvbiAoKSB7CgogIC8qKgogICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBSdW50aW1lIFVzZXIgQWdlbnQKICAgKiBAcGFyYW0ge3J1bnRpbWVGYWN0b3J5fSBydW50aW1lRmFjdG9yeSAtIFNwZWNpZmljIGltcGxlbWVudGF0aW9uIGZvciB0aGUgZW52aXJvbm1lbnQgd2hlcmUgdGhlIGNvcmUgcnVudGltZSB3aWxsIHJ1bjsKICAgKiBAcGFyYW0ge2RvbWFpbn0gZG9tYWluVVJMIC0gc3BlY2lmeSB0aGUgZG9tYWluIGJhc2UgZm9yIHRoZSBydW50aW1lOwogICAqLwoKICBmdW5jdGlvbiBSdW50aW1lVUEocnVudGltZUZhY3RvcnksIGRvbWFpbikgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJ1bnRpbWVVQSk7CgogICAgaWYgKCFydW50aW1lRmFjdG9yeSkgdGhyb3cgbmV3IEVycm9yKCdUaGUgc2FuZGJveCBmYWN0b3J5IGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFkb21haW4pIHRocm93IG5ldyBFcnJvcignWW91IG5lZWQgdGhlIGRvbWFpbiBvZiBydW50aW1lJyk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5ydW50aW1lRmFjdG9yeSA9IHJ1bnRpbWVGYWN0b3J5OwogICAgX3RoaXMucnVudGltZUNhdGFsb2d1ZSA9IG5ldyBfUnVudGltZUNhdGFsb2d1ZTIuZGVmYXVsdChydW50aW1lRmFjdG9yeSk7CgogICAgLy8gVE9ETzogcG9zdCBhbmQgcmV0dXJuIHJlZ2lzdHJ5L2h5cGVydHlSdW50aW1lSW5zdGFuY2UgdG8gYW5kIGZyb20gQmFjay1lbmQgU2VydmljZQogICAgLy8gdGhlIHJlc3BvbnNlIGlzIGxpa2U6IHJ1bnRpbWU6Ly9zcDEvMTIzCgogICAgdmFyIHJ1bnRpbWVVUkwgPSAncnVudGltZTovLycgKyBkb21haW4gKyAnLycgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCArIDEpOwogICAgX3RoaXMucnVudGltZVVSTCA9IHJ1bnRpbWVVUkw7CiAgICBfdGhpcy5kb21haW4gPSBkb21haW47CgogICAgLy8gVE9ETzogY2hlY2sgaWYgcnVudGltZSBjYXRhbG9ndWUgbmVlZCB0aGUgcnVudGltZVVSTDsKICAgIF90aGlzLnJ1bnRpbWVDYXRhbG9ndWUucnVudGltZVVSTCA9IHJ1bnRpbWVVUkw7CgogICAgLy8gSW5zdGFudGlhdGUgdGhlIGlkZW50aXR5IE1vZHVsZQogICAgX3RoaXMuaWRlbnRpdHlNb2R1bGUgPSBuZXcgX0lkZW50aXR5TW9kdWxlMi5kZWZhdWx0KCk7CgogICAgLy8gVXNlIHRoZSBzYW5kYm94IGZhY3RvcnkgdG8gY3JlYXRlIGFuIEFwcFNhbmRib3g7CiAgICAvLyBJbiB0aGUgZnV0dXJlIGNhbiBiZSBkZWNpZGVkIGJ5IHBvbGljeUVuZ2luZSBpZiB3ZSBuZWVkCiAgICAvLyBjcmVhdGUgYSBBcHBTYW5kYm94IG9yIG5vdDsKICAgIHZhciBhcHBTYW5kYm94ID0gcnVudGltZUZhY3RvcnkuY3JlYXRlQXBwU2FuZGJveCgpOwoKICAgIC8vIEluc3RhbnRpYXRlIHRoZSBSZWdpc3RyeSBNb2R1bGUKICAgIF90aGlzLnJlZ2lzdHJ5ID0gbmV3IF9SZWdpc3RyeTIuZGVmYXVsdChydW50aW1lVVJMLCBhcHBTYW5kYm94LCBfdGhpcy5pZGVudGl0eU1vZHVsZSk7CgogICAgLy8gSW5zdGFudGlhdGUgdGhlIE1lc3NhZ2UgQnVzCiAgICBfdGhpcy5tZXNzYWdlQnVzID0gbmV3IF9NZXNzYWdlQnVzMi5kZWZhdWx0KF90aGlzLnJlZ2lzdHJ5KTsKCiAgICAvLyBJbnN0YW50aWF0ZSB0aGUgUG9saWN5IEVuZ2luZQogICAgX3RoaXMucG9saWN5RW5naW5lID0gbmV3IF9Qb2xpY3lFbmdpbmUyLmRlZmF1bHQoX3RoaXMubWVzc2FnZUJ1cywgX3RoaXMuaWRlbnRpdHlNb2R1bGUsIF90aGlzLnJlZ2lzdHJ5KTsKCiAgICBfdGhpcy5tZXNzYWdlQnVzLnBpcGVsaW5lLmhhbmRsZXJzID0gWwoKICAgIC8vIFBvbGljeSBtZXNzYWdlIGF1dGhvcmlzZQogICAgZnVuY3Rpb24gKGN0eCkgewogICAgICBfdGhpcy5wb2xpY3lFbmdpbmUuYXV0aG9yaXNlKGN0eC5tc2cpLnRoZW4oZnVuY3Rpb24gKGNoYW5nZWRNZ3MpIHsKICAgICAgICBjdHgubXNnID0gY2hhbmdlZE1nczsKICAgICAgICBjdHgubmV4dCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihyZWFzb24pOwogICAgICAgIGN0eC5mYWlsKHJlYXNvbik7CiAgICAgIH0pOwogICAgfV07CgogICAgLy8gQWRkIHRvIEFwcCBTYW5kYm94IHRoZSBsaXN0ZW5lcjsKICAgIGFwcFNhbmRib3guYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnKTsKICAgIH0pOwoKICAgIC8vIFJlZ2lzdGVyIG1lc3NhZ2VCdXMgb24gUmVnaXN0cnkKICAgIF90aGlzLnJlZ2lzdHJ5Lm1lc3NhZ2VCdXMgPSBfdGhpcy5tZXNzYWdlQnVzOwoKICAgIF90aGlzLnJlZ2lzdHJ5LmFkZEV2ZW50TGlzdGVuZXIoJ3J1bnRpbWU6bG9hZFN0dWInLCBmdW5jdGlvbiAoZG9tYWluVVJMKSB7CgogICAgICBfdGhpcy5sb2FkU3R1Yihkb21haW5VUkwpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnJlZ2lzdHJ5LnRyaWdnZXIoJ3J1bnRpbWU6c3R1YkxvYWRlZCcsIGRvbWFpblVSTCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgIH0pOwogICAgfSk7CgogICAgLy8gVXNlIHNhbmRib3ggZmFjdG9yeSB0byB1c2Ugc3BlY2lmaWMgbWV0aG9kcwogICAgLy8gYW5kIHNldCB0aGUgbWVzc2FnZSBidXMgdG8gdGhlIGZhY3RvcnkKICAgIHJ1bnRpbWVGYWN0b3J5Lm1lc3NhZ2VCdXMgPSBfdGhpcy5tZXNzYWdlQnVzOwoKICAgIC8vIEluc3RhbmNpYXRlIHRoZSBTeW5jaGVyTWFuYWdlcjsKICAgIF90aGlzLnN5bmNoZXJNYW5hZ2VyID0gbmV3IF9TeW5jaGVyTWFuYWdlcjIuZGVmYXVsdChfdGhpcy5ydW50aW1lVVJMLCBfdGhpcy5tZXNzYWdlQnVzLCB7fSwgX3RoaXMucnVudGltZUNhdGFsb2d1ZSk7CgogICAgLy8gSW5zdGFudGlhdGUgdGhlIEdyYXBoIENvbm5lY3RvcgogICAgX3RoaXMuZ3JhcGhDb25uZWN0b3IgPSBuZXcgX0dyYXBoQ29ubmVjdG9yMi5kZWZhdWx0KF90aGlzLnJ1bnRpbWVVUkwsIF90aGlzLm1lc3NhZ2VCdXMpOwogIH0KCiAgLyoqCiAgKiBBY2NvbW9kYXRlIGludGVyb3BlcmFiaWxpdHkgaW4gSDJIIGFuZCBwcm90byBvbiB0aGUgZmx5IGZvciBuZXdseSBkaXNjb3ZlcmVkIGRldmljZXMgaW4gTTJNCiAgKiBAcGFyYW0gIHtDYXRhbG9ndWVEYXRhT2JqZWN0Lkh5cGVydHlEZXNjcmlwdG9yfSAgIGRlc2NyaXB0b3IgICAgZGVzY3JpcHRvcgogICovCgoKICBfY3JlYXRlQ2xhc3MoUnVudGltZVVBLCBbewogICAga2V5OiAnZGlzY292ZXJIaXBlcnR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb3ZlckhpcGVydHkoZGVzY3JpcHRvcikge30KICAgIC8vIEJvZHkuLi4KCgogICAgLyoqCiAgICAqIFJlZ2lzdGVyIEh5cGVydHkgZGVwbG95ZWQgYnkgdGhlIEFwcCB0aGF0IGlzIHBhc3NlZCBhcyBpbnB1dCBwYXJhbWV0ZXIuIFRvIGJlIHVzZWQgd2hlbiBBcHAgYW5kIEh5cGVydGllcyBhcmUgZnJvbSB0aGUgc2FtZSBkb21haW4gb3RoZXJ3aXNlIHRoZSBSdW50aW1lVUEgd2lsbCByYWlzZSBhbiBleGNlcHRpb24gYW5kIHRoZSBBcHAgaGFzIHRvIHVzZSB0aGUgbG9hZEh5cGVydHkoLi4pIGZ1bmN0aW9uLgogICAgKiBAcGFyYW0gIHtPYmplY3R9IE9iamVjdCAgICAgICAgICAgICAgICAgICBoeXBlcnR5SW5zdGFuY2UKICAgICogQHBhcmFtICB7VVJMLkh5cGVydHlDYXRhbG9ndWVVUkx9ICAgICAgICAgZGVzY3JpcHRvciAgICAgIGRlc2NyaXB0b3IKICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlZ2lzdGVySHlwZXJ0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJIeXBlcnR5KGh5cGVydHlJbnN0YW5jZSwgZGVzY3JpcHRvcikge30KICAgIC8vIEJvZHkuLi4KCgogICAgLyoqCiAgICAqIERlcGxveSBIeXBlcnR5IGZyb20gQ2F0YWxvZ3VlIFVSTAogICAgKiBAcGFyYW0gIHtVUkwuSHlwZXJ0eUNhdGFsb2d1ZVVSTH0gICAgaHlwZXJ0eSBoeXBlcnR5RGVzY3JpcHRvciB1cmw7CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdsb2FkSHlwZXJ0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZEh5cGVydHkoaHlwZXJ0eURlc2NyaXB0b3JVUkwpIHsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIWh5cGVydHlEZXNjcmlwdG9yVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ0h5cGVydHkgZGVzY3JpcHRvciB1cmwgcGFyYW1ldGVyIGlzIG5lZWRlZCcpOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdmFyIF9oeXBlcnR5VVJMID0gdm9pZCAwOwogICAgICAgIHZhciBfaHlwZXJ0eVNhbmRib3ggPSB2b2lkIDA7CiAgICAgICAgdmFyIF9oeXBlcnR5RGVzY3JpcHRvciA9IHZvaWQgMDsKICAgICAgICB2YXIgX2h5cGVydHlTb3VyY2VQYWNrYWdlID0gdm9pZCAwOwoKICAgICAgICB2YXIgZXJyb3JSZWFzb24gPSBmdW5jdGlvbiBlcnJvclJlYXNvbihyZWFzb24pIHsKICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgIH07CgogICAgICAgIC8vIEdldCBIeXBlcnR5IGRlc2NyaXB0b3IKICAgICAgICAvLyBUT0RPOiB0aGUgcmVxdWVzdCBNb2R1bGUgc2hvdWxkIGJlIGNoYW5nZWQsCiAgICAgICAgLy8gYmVjYXVzZSBhdCB0aGlzIG1vbWVudCBpdCBpcyBpbmNvbXBhdGlibGUgd2l0aCBub2RlanM7CiAgICAgICAgLy8gUHJvYmFibHkgd2UgbmVlZCB0byBwYXNzIGEgZmFjdG9yeSBsaWtlIHdlIGRvIGZvciBzYW5kYm94ZXM7CiAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0gSHlwZXJ0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTsKICAgICAgICBjb25zb2xlLmluZm8oJ0dldCBoeXBlcnR5IGRlc2NyaXB0b3IgZm9yIDonLCBoeXBlcnR5RGVzY3JpcHRvclVSTCk7CiAgICAgICAgX3RoaXMucnVudGltZUNhdGFsb2d1ZS5nZXRIeXBlcnR5RGVzY3JpcHRvcihoeXBlcnR5RGVzY3JpcHRvclVSTCkudGhlbihmdW5jdGlvbiAoaHlwZXJ0eURlc2NyaXB0b3IpIHsKICAgICAgICAgIC8vIGF0IHRoaXMgcG9pbnQsIHdlIGhhdmUgY29tcGxldGVkICJzdGVwIDIgYW5kIDMiIGFzIHNob3duIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQKICAgICAgICAgIGNvbnNvbGUuaW5mbygnMTogcmV0dXJuIGh5cGVydHkgZGVzY3JpcHRvcicsIGh5cGVydHlEZXNjcmlwdG9yKTsKCiAgICAgICAgICAvLyBoeXBlcnR5IGNvbnRhaW5zIHRoZSBmdWxsIHBhdGggb2YgdGhlIGNhdGFsb2d1ZSBVUkwsIGUuZy4KICAgICAgICAgIC8vIGNhdGFsb2d1ZS5yZXRoaW5rLmV1Ly53ZWxsLWtub3duLy4uLi4uLi4uLi4KICAgICAgICAgIF9oeXBlcnR5RGVzY3JpcHRvciA9IGh5cGVydHlEZXNjcmlwdG9yOwoKICAgICAgICAgIHZhciBzb3VyY2VQYWNrYWdlVVJMID0gaHlwZXJ0eURlc2NyaXB0b3Iuc291cmNlUGFja2FnZVVSTDsKCiAgICAgICAgICBpZiAoc291cmNlUGFja2FnZVVSTCA9PT0gJy9zb3VyY2VQYWNrYWdlJykgewogICAgICAgICAgICByZXR1cm4gaHlwZXJ0eURlc2NyaXB0b3Iuc291cmNlUGFja2FnZTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBHZXQgdGhlIGh5cGVydHkgc291cmNlIGNvZGUKICAgICAgICAgIHJldHVybiBfdGhpcy5ydW50aW1lQ2F0YWxvZ3VlLmdldFNvdXJjZVBhY2thZ2VGcm9tVVJMKHNvdXJjZVBhY2thZ2VVUkwpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHNvdXJjZVBhY2thZ2UpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnMjogcmV0dXJuIGh5cGVydHkgc291cmNlIGNvZGUnKTsKCiAgICAgICAgICAvLyBhdCB0aGlzIHBvaW50LCB3ZSBoYXZlIGNvbXBsZXRlZCAic3RlcCA0IGFuZCA1IiBhcyBzaG93biBpbiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kCgogICAgICAgICAgX2h5cGVydHlTb3VyY2VQYWNrYWdlID0gc291cmNlUGFja2FnZTsKCiAgICAgICAgICAvLwogICAgICAgICAgLy8gc3RlcHMgNiAtLSA5IGFyZSBza2lwcGVkLgogICAgICAgICAgLy8gVE9ETzogb24gcmVsZWFzZSBvZiBjb3JlIDAuMjsKICAgICAgICAgIC8vIFRPRE86IFByb21pc2UgdG8gY2hlY2sgdGhlIHBvbGljeSBlbmdpbmUKCiAgICAgICAgICAvLyBtb2NrLXVwIGNvZGU7CiAgICAgICAgICAvLyB0ZW1wb3JhcnkgY29kZSwgb25seQogICAgICAgICAgdmFyIHBvbGljeSA9IHRydWU7CgogICAgICAgICAgcmV0dXJuIHBvbGljeTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChwb2xpY3lSZXN1bHQpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnMzogcmV0dXJuIHBvbGljeSBlbmdpbmUgcmVzdWx0OiAnLCBwb2xpY3lSZXN1bHQpOwoKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgNiB0byA5IG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgogICAgICAgICAgLy8KICAgICAgICAgIC8vIFN0ZXBzIDYgLS0gOQogICAgICAgICAgLy8gQXMgYSByZXN1bHQgb2YgdGhlIHNpcHBlZCBzdGVwcywgd2Uga25vdyBhdCB0aGlzIHBvaW50IGlmIHdlIGV4ZWN1dGUKICAgICAgICAgIC8vIGluU2FtZVNhbmRib3ggb3Igbm90LgogICAgICAgICAgLy8KCiAgICAgICAgICAvLyBGb3IgdGVzdGluZywganVzdCBhc3N1bWUgd2UgZXhlY3V0ZSBpbiBzYW1lIFNhbmRib3guCiAgICAgICAgICB2YXIgaW5TYW1lU2FuZGJveCA9IHRydWU7CiAgICAgICAgICB2YXIgc2FuZGJveCA9IHZvaWQgMDsKCiAgICAgICAgICBpZiAoaW5TYW1lU2FuZGJveCkgewoKICAgICAgICAgICAgLy8gdGhpcyBkb24ndCBuZWVkIGJlIGEgUHJvbWlzZTsKICAgICAgICAgICAgc2FuZGJveCA9IF90aGlzLnJlZ2lzdHJ5LmdldEFwcFNhbmRib3goKTsKCiAgICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMTEgaGVyZS4KICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkoaHlwZXJ0eURlc2NyaXB0b3JVUkwpLmRvbWFpbjsKCiAgICAgICAgICAgICAgLy8gZ2V0U2FuZGJveCwgdGhpcyB3aWxsIHJldHVybiBhIHByb21pc2U7CiAgICAgICAgICAgICAgc2FuZGJveCA9IF90aGlzLnJlZ2lzdHJ5LmdldFNhbmRib3goZG9tYWluKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIC8vIHRoaXMgd2lsbCByZXR1cm4gdGhlIHNhbmRib3ggb3Igb25lIHByb21pc2UgdG8gZ2V0U2FuZGJveDsKICAgICAgICAgIHJldHVybiBzYW5kYm94OwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHNhbmRib3gpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNDogcmV0dXJuIHRoZSBzYW5kYm94Jywgc2FuZGJveCk7CgogICAgICAgICAgLy8gUmV0dXJuIHRoZSBzYW5kYm94IGluZGVwZW50ZWx5IGlmIGl0IHJ1bm5pbmcgaW4gdGhlIHNhbWUgc2FuZGJveCBvciBub3QKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMTQgaGVyZS4KICAgICAgICAgIHJldHVybiBzYW5kYm94OwogICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJzQuMTogdHJ5IHRvIHJlZ2lzdGVyIGEgbmV3IHNhbmRib3gnLCByZWFzb24pOwoKICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBzYW5kYm94IGlzIHJlZ2lzdGVkIGZvciB0aGlzIGh5cGVydHkgZGVzY3JpcHRvciB1cmw7CiAgICAgICAgICAvLyBNYWtlIFN0ZXBzIHh4eCAtLS0geHh4CiAgICAgICAgICAvLyBJbnN0YW50aWF0ZSB0aGUgU2FuZGJveAogICAgICAgICAgdmFyIHNhbmRib3ggPSBfdGhpcy5ydW50aW1lRmFjdG9yeS5jcmVhdGVTYW5kYm94KCk7CgogICAgICAgICAgc2FuZGJveC5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgICAgfSk7CgogICAgICAgICAgcmV0dXJuIHNhbmRib3g7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc2FuZGJveCkgewogICAgICAgICAgY29uc29sZS5pbmZvKCc1OiByZXR1cm4gc2FuZGJveCBhbmQgcmVnaXN0ZXInKTsKCiAgICAgICAgICBfaHlwZXJ0eVNhbmRib3ggPSBzYW5kYm94OwoKICAgICAgICAgIC8vIFJlZ2lzdGVyIGh5cGVydHkKICAgICAgICAgIHJldHVybiBfdGhpcy5yZWdpc3RyeS5yZWdpc3Rlckh5cGVydHkoc2FuZGJveCwgaHlwZXJ0eURlc2NyaXB0b3JVUkwpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGh5cGVydHlVUkwpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNjogSHlwZXJ0eSB1cmwsIGFmdGVyIHJlZ2lzdGVyIGh5cGVydHknLCBoeXBlcnR5VVJMKTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDE2IG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgoKICAgICAgICAgIF9oeXBlcnR5VVJMID0gaHlwZXJ0eVVSTDsKCiAgICAgICAgICBjb25zb2xlLmxvZyhfaHlwZXJ0eURlc2NyaXB0b3IpOwoKICAgICAgICAgIC8vIEV4dGVuZCBvcmlnaW5hbCBoeXBlcnR5IGNvbmZpZ3VyYXRpb247CiAgICAgICAgICB2YXIgY29uZmlndXJhdGlvbiA9IHt9OwogICAgICAgICAgaWYgKCEoMCwgX3V0aWxzLmVtcHR5T2JqZWN0KShfaHlwZXJ0eURlc2NyaXB0b3IuY29uZmlndXJhdGlvbikpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjb25maWd1cmF0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgSlNPTi5wYXJzZShfaHlwZXJ0eURlc2NyaXB0b3IuY29uZmlndXJhdGlvbikpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uZmlndXJhdGlvbiA9IF9oeXBlcnR5RGVzY3JpcHRvci5jb25maWd1cmF0aW9uOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBjb25maWd1cmF0aW9uLnJ1bnRpbWVVUkwgPSBfdGhpcy5ydW50aW1lVVJMOwoKICAgICAgICAgIC8vIFdlIHdpbGwgZGVwbG95IHRoZSBjb21wb25lbnQgLSBzdGVwIDE3IG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgogICAgICAgICAgcmV0dXJuIF9oeXBlcnR5U2FuZGJveC5kZXBsb3lDb21wb25lbnQoX2h5cGVydHlTb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUsIF9oeXBlcnR5VVJMLCBjb25maWd1cmF0aW9uKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkZXBsb3lDb21wb25lbnRTdGF0dXMpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNzogRGVwbG95IGNvbXBvbmVudCBzdGF0dXMgZm9yIGh5cGVydHk6ICcsIGRlcGxveUNvbXBvbmVudFN0YXR1cyk7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAxOSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4KCiAgICAgICAgICAvLyBBZGQgdGhlIG1lc3NhZ2UgYnVzIGxpc3RlbmVyIHRvIHRoZSBhcHBTYW5kYm94IG9yIGh5cGVydFNhbmRib3g7CiAgICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKF9oeXBlcnR5VVJMLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIF9oeXBlcnR5U2FuZGJveC5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAyMCBvZiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4KICAgICAgICAgIHZhciBoeXBlcnR5ID0gewogICAgICAgICAgICBydW50aW1lSHlwZXJ0eVVSTDogX2h5cGVydHlVUkwsCiAgICAgICAgICAgIHN0YXR1czogZGVwbG95Q29tcG9uZW50U3RhdHVzCiAgICAgICAgICB9OwoKICAgICAgICAgIHJlc29sdmUoaHlwZXJ0eSk7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAyMSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4KICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpOwogICAgICAgIH0pLmNhdGNoKGVycm9yUmVhc29uKTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIERlcGxveSBTdHViIGZyb20gQ2F0YWxvZ3VlIFVSTCBvciBkb21haW4gdXJsCiAgICAqIEBwYXJhbSAge1VSTC5VUkx9ICAgICBkb21haW4gICAgICAgICAgZG9tYWluCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdsb2FkU3R1YicsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZFN0dWIocHJvdG9zdHViVVJMKSB7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCFwcm90b3N0dWJVUkwpIHRocm93IG5ldyBFcnJvcignZG9tYWluIHBhcmFtZXRlciBpcyBuZWVkZWQnKTsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkocHJvdG9zdHViVVJMKS5kb21haW47CgogICAgICAgIGlmICghZG9tYWluKSB7CiAgICAgICAgICBkb21haW4gPSBwcm90b3N0dWJVUkw7CiAgICAgICAgfQoKICAgICAgICB2YXIgX3N0dWJTYW5kYm94ID0gdm9pZCAwOwogICAgICAgIHZhciBfc3R1YkRlc2NyaXB0b3IgPSB2b2lkIDA7CiAgICAgICAgdmFyIF9ydW50aW1lUHJvdG9TdHViVVJMID0gdm9pZCAwOwogICAgICAgIHZhciBfc3R1YlNvdXJjZVBhY2thZ2UgPSB2b2lkIDA7CgogICAgICAgIHZhciBlcnJvclJlYXNvbiA9IGZ1bmN0aW9uIGVycm9yUmVhc29uKHJlYXNvbikgewogICAgICAgICAgY29uc29sZS5lcnJvcihyZWFzb24pOwogICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgfTsKCiAgICAgICAgLy8gRGlzY292ZXIgUHJvdG9jb2wgU3R1YgogICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLSBQcm90b1N0dWIgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4nKTsKICAgICAgICBjb25zb2xlLmluZm8oJ0Rpc2NvdmVyIG9yIENyZWF0ZSBhIG5ldyBQcm90b1N0dWIgZm9yIGRvbWFpbjogJywgZG9tYWluKTsKICAgICAgICBfdGhpcy5yZWdpc3RyeS5kaXNjb3ZlclByb3Rvc3R1Yihkb21haW4pLnRoZW4oZnVuY3Rpb24gKHJ1bnRpbWVQcm90b1N0dWJVUkwpIHsKICAgICAgICAgIC8vIElzIHJlZ2lzdGVkPwogICAgICAgICAgY29uc29sZS5pbmZvKCcxLiBQcm90byBTdHViIERpc2NvdmVyZWQ6ICcsIHJ1bnRpbWVQcm90b1N0dWJVUkwpOwoKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAvLyBUT0RPOiBDaGVjayBpZiB0aGUgc3RhdHVzIGlzIHNhdmVkIGluIHRoZSBzdGF0dXMgb2Ygc2FuZGJveDsKICAgICAgICAgIHZhciBzdHViID0gewogICAgICAgICAgICBydW50aW1lUHJvdG9TdHViVVJMOiBydW50aW1lUHJvdG9TdHViVVJMLAogICAgICAgICAgICBzdGF0dXM6ICdkZXBsb3llZCcKICAgICAgICAgIH07CgogICAgICAgICAgcmVzb2x2ZShzdHViKTsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4nKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CgogICAgICAgICAgLy8gaXMgbm90IHJlZ2lzdGVkPwogICAgICAgICAgY29uc29sZS5pbmZvKCcxLiBQcm90byBTdHViIG5vdCBmb3VuZDonLCByZWFzb24pOwoKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGdldCBQcm90b1N0dWIgZGVzY3JpcHRvciBzdGVwIDQgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCiAgICAgICAgICBfdGhpcy5ydW50aW1lQ2F0YWxvZ3VlLmdldFN0dWJEZXNjcmlwdG9yKHByb3Rvc3R1YlVSTCkudGhlbihmdW5jdGlvbiAoc3R1YkRlc2NyaXB0b3IpIHsKCiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnMi4gcmV0dXJuIHRoZSBQcm90b1N0dWIgZGVzY3JpcHRvcjonLCBzdHViRGVzY3JpcHRvcik7CgogICAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDUgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCiAgICAgICAgICAgIF9zdHViRGVzY3JpcHRvciA9IHN0dWJEZXNjcmlwdG9yOwoKICAgICAgICAgICAgdmFyIHNvdXJjZVBhY2thZ2VVUkwgPSBzdHViRGVzY3JpcHRvci5zb3VyY2VQYWNrYWdlVVJMOwoKICAgICAgICAgICAgaWYgKHNvdXJjZVBhY2thZ2VVUkwgPT09ICcvc291cmNlUGFja2FnZScpIHsKICAgICAgICAgICAgICByZXR1cm4gc3R1YkRlc2NyaXB0b3Iuc291cmNlUGFja2FnZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBnZXQgUHJvdG9TdHViIFNvdXJjZSBjb2RlIGZyb20gZGVzY3JpcHRvciAtIHN0ZXAgNiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJ1bnRpbWVDYXRhbG9ndWUuZ2V0U291cmNlUGFja2FnZUZyb21VUkwoc291cmNlUGFja2FnZVVSTCk7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChzdHViU291cmNlUGFja2FnZSkgewogICAgICAgICAgICBjb25zb2xlLmluZm8oJzMuIHJldHVybiB0aGUgUHJvdG9TdHViIFNvdXJjZSBDb2RlOiAnLCBzdHViU291cmNlUGFja2FnZSk7CgogICAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDcgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCgogICAgICAgICAgICBfc3R1YlNvdXJjZVBhY2thZ2UgPSBzdHViU291cmNlUGFja2FnZTsKCiAgICAgICAgICAgIC8vIFRPRE86IENoZWNrIG9uIFBFUCAocG9saWN5IEVuZ2luZSkgaWYgd2UgbmVlZCB0aGUgc2FuZGJveCBhbmQgY2hlY2sgaWYgdGhlIFNhbmRib3ggRmFjdG9yeSBoYXZlIHRoZSBjb250ZXh0IHNhbmRib3g7CiAgICAgICAgICAgIHZhciBwb2xpY3kgPSB0cnVlOwogICAgICAgICAgICByZXR1cm4gcG9saWN5OwogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocG9saWN5KSB7CiAgICAgICAgICAgIC8vIHRoaXMgd2lsbCByZXR1cm4gdGhlIHNhbmRib3ggb3Igb25lIHByb21pc2UgdG8gZ2V0U2FuZGJveDsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlZ2lzdHJ5LmdldFNhbmRib3goZG9tYWluKTsKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHN0dWJTYW5kYm94KSB7CgogICAgICAgICAgICBjb25zb2xlLmluZm8oJzQuIGlmIHRoZSBzYW5kYm94IGlzIHJlZ2lzdGVyZWQgdGhlbiByZXR1cm4gdGhlIHNhbmRib3gnLCBzdHViU2FuZGJveCk7CgogICAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAgIF9zdHViU2FuZGJveCA9IHN0dWJTYW5kYm94OwogICAgICAgICAgICByZXR1cm4gc3R1YlNhbmRib3g7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnNS4gU2FuZGJveCB3YXMgbm90IGZvdW5kLCBjcmVhdGluZyBhIG5ldyBvbmUnLCByZWFzb24pOwoKICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHNhbmRib3ggaXMgcmVnaXN0ZWQgZm9yIHRoaXMgc3R1YiBkZXNjcmlwdG9yIHVybDsKICAgICAgICAgICAgLy8gTWFrZSBTdGVwcyB4eHggLS0tIHh4eAogICAgICAgICAgICAvLyBJbnN0YW50aWF0ZSB0aGUgU2FuZGJveAogICAgICAgICAgICB2YXIgc2FuZGJveCA9IF90aGlzLnJ1bnRpbWVGYWN0b3J5LmNyZWF0ZVNhbmRib3goKTsKICAgICAgICAgICAgc2FuZGJveC5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmV0dXJuIHNhbmRib3g7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChzYW5kYm94KSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnNi4gcmV0dXJuIHRoZSBzYW5kYm94IGluc3RhbmNlIGFuZCByZWdpc3RlcicsIHNhbmRib3gsICd0byBkb21haW4gJywgZG9tYWluKTsKCiAgICAgICAgICAgIF9zdHViU2FuZGJveCA9IHNhbmRib3g7CgogICAgICAgICAgICAvLyB3ZSBuZWVkIHJlZ2lzdGVyIHN0dWIgb24gcmVnaXN0cnkgLSBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlZ2lzdHJ5LnJlZ2lzdGVyU3R1Yihfc3R1YlNhbmRib3gsIGRvbWFpbik7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChydW50aW1lUHJvdG9TdHViVVJMKSB7CgogICAgICAgICAgICBjb25zb2xlLmluZm8oJzcuIHJldHVybiB0aGUgcnVudGltZSBwcm90b3N0dWIgdXJsOiAnLCBydW50aW1lUHJvdG9TdHViVVJMKTsKCiAgICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgeHh4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAoKICAgICAgICAgICAgX3J1bnRpbWVQcm90b1N0dWJVUkwgPSBydW50aW1lUHJvdG9TdHViVVJMOwoKICAgICAgICAgICAgY29uc29sZS5sb2coX3N0dWJEZXNjcmlwdG9yKTsKCiAgICAgICAgICAgIC8vIEV4dGVuZCBvcmlnaW5hbCBoeXBlcnR5IGNvbmZpZ3VyYXRpb247CiAgICAgICAgICAgIHZhciBjb25maWd1cmF0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgSlNPTi5wYXJzZShfc3R1YkRlc2NyaXB0b3IuY29uZmlndXJhdGlvbikpOwogICAgICAgICAgICBjb25maWd1cmF0aW9uLnJ1bnRpbWVVUkwgPSBfdGhpcy5ydW50aW1lVVJMOwoKICAgICAgICAgICAgLy8gRGVwbG95IENvbXBvbmVudCBzdGVwIHh4eAogICAgICAgICAgICByZXR1cm4gX3N0dWJTYW5kYm94LmRlcGxveUNvbXBvbmVudChfc3R1YlNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZSwgcnVudGltZVByb3RvU3R1YlVSTCwgY29uZmlndXJhdGlvbik7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkZXBsb3lDb21wb25lbnRTdGF0dXMpIHsKICAgICAgICAgICAgY29uc29sZS5pbmZvKCc4OiByZXR1cm4gZGVwbG95IGNvbXBvbmVudCBmb3Igc2FuZGJveCBzdGF0dXM6ICcsIGRlcGxveUNvbXBvbmVudFN0YXR1cyk7CgogICAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAgIC8vIEFkZCB0aGUgbWVzc2FnZSBidXMgbGlzdGVuZXIKICAgICAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihfcnVudGltZVByb3RvU3R1YlVSTCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICAgIF9zdHViU2FuZGJveC5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgeHh4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAoKICAgICAgICAgICAgLy8gTG9hZCBTdHViIGZ1bmN0aW9uIHJlc29sdmVkIHdpdGggc3VjY2VzczsKICAgICAgICAgICAgdmFyIHN0dWIgPSB7CiAgICAgICAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTDogX3J1bnRpbWVQcm90b1N0dWJVUkwsCiAgICAgICAgICAgICAgc3RhdHVzOiBkZXBsb3lDb21wb25lbnRTdGF0dXMKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHJlc29sdmUoc3R1Yik7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4nKTsKICAgICAgICAgIH0pLmNhdGNoKGVycm9yUmVhc29uKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFVzZWQgdG8gY2hlY2sgZm9yIHVwZGF0ZXMgYWJvdXQgY29tcG9uZW50cyBoYW5kbGVkIGluIHRoZSBDYXRhbG9ndWUgaW5jbHVkaW5nIHByb3RvY29sIHN0dWJzIGFuZCBIeXBlcnRpZXMuIGNoZWNrIHJlbGF0aW9uc2hpcCB3aXRoIGxpZmVjeWNsZSBtYW5hZ2VtZW50IHByb3ZpZGVkIGJ5IFNlcnZpY2UgV29ya2VycwogICAgKiBAcGFyYW0gIHtDYXRhbG9ndWVVUkx9ICAgICAgIHVybCB1cmwKICAgICovCgogIH0sIHsKICAgIGtleTogJ2NoZWNrRm9yVXBkYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0ZvclVwZGF0ZSh1cmwpIHsKICAgICAgLy8gQm9keS4uLgogICAgfQogIH1dKTsKCiAgcmV0dXJuIFJ1bnRpbWVVQTsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUnVudGltZVVBOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi9idXMvTWVzc2FnZUJ1cyI6MTgwLCIuLi9ncmFwaGNvbm5lY3Rvci9HcmFwaENvbm5lY3RvciI6MTg0LCIuLi9pZGVudGl0eS9JZGVudGl0eU1vZHVsZSI6MTg2LCIuLi9wb2xpY3kvUG9saWN5RW5naW5lIjoxODksIi4uL3JlZ2lzdHJ5L1JlZ2lzdHJ5IjoxOTIsIi4uL3N5bmNoZXIvU3luY2hlck1hbmFnZXIiOjE5OSwiLi4vdXRpbHMvdXRpbHMiOjIwMSwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9SdW50aW1lQ2F0YWxvZ3VlIjoxNTl9XSwxOTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIE9iamVjdEFsbG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogIF91cmw6IFVSTAogIF9idXM6IE1pbmlCdXMKICAqLwoKICAvKioKICAgKiBDcmVhdGUgYW4gT2JqZWN0IEFsbG9jYXRpb24KICAgKiBAcGFyYW0gIHtVUkwuVVJMfSAgICAgIHVybCAtIHVybCBmcm9tIHdobyBpcyBzZW5kaW5nIHRoZSBtZXNzYWdlCiAgICogQHBhcmFtICB7TWluaUJ1c30gICAgICBidXMgLSBNaW5pQnVzIHVzZWQgZm9yIGFkZHJlc3MgYWxsb2NhdGlvbgogICAqLwoKICBmdW5jdGlvbiBPYmplY3RBbGxvY2F0aW9uKHVybCwgYnVzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT2JqZWN0QWxsb2NhdGlvbik7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5fdXJsID0gdXJsOwogICAgX3RoaXMuX2J1cyA9IGJ1czsKICB9CgogIC8qKgogICAqIGdldCB0aGUgVVJMIHZhbHVlCiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdXJsIHZhbHVlOwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKE9iamVjdEFsbG9jYXRpb24sIFt7CiAgICBrZXk6ICdjcmVhdGUnLAoKCiAgICAvKioKICAgICAqIEFzayBmb3IgY3JlYXRpb24gb2YgYSBudW1iZXIgb2YgT2JqZWN0IGFkZHJlc3NlcywgdG8gdGhlIGRvbWFpbiBtZXNzYWdlIG5vZGUuCiAgICAgKiBAcGFyYW0gIHtEb21haW59IGRvbWFpbiAtIERvbWFpbiBvZiB0aGUgbWVzc2FnZSBub2RlLgogICAgICogQHBhcmFtICB7bnVtYmVyfSBudW1iZXIgLSBOdW1iZXIgb2YgYWRkcmVzc2VzIHRvIHJlcXVlc3QKICAgICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdFVSTD59ICBBIGxpc3Qgb2YgT2JqZWN0VVJMJ3MKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZShkb21haW4sIHNjaGVtZSwgbnVtYmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbXNnID0gewogICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBkb21haW4gKyAnL29iamVjdC1hZGRyZXNzLWFsbG9jYXRpb24nLAogICAgICAgIGJvZHk6IHsgc2NoZW1lOiBzY2hlbWUsIHZhbHVlOiB7IG51bWJlcjogbnVtYmVyIH0gfQogICAgICB9OwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXBseS5ib2R5LnZhbHVlLmFsbG9jYXRlZCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAndXJsJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdXJsOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE9iamVjdEFsbG9jYXRpb247Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IE9iamVjdEFsbG9jYXRpb247Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTk2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMnKTsKCnZhciBfU3Vic2NyaXB0aW9uID0gcmVxdWlyZSgnLi9TdWJzY3JpcHRpb24nKTsKCnZhciBfU3Vic2NyaXB0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N1YnNjcmlwdGlvbik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9Cgp2YXIgT2JzZXJ2ZXJPYmplY3QgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gT2JzZXJ2ZXJPYmplY3QocGFyZW50LCB1cmwsIGNoaWxkcmVucykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE9ic2VydmVyT2JqZWN0KTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9wYXJlbnQgPSBwYXJlbnQ7CiAgICBfdGhpcy5fdXJsID0gdXJsOwogICAgX3RoaXMuX2NoaWxkcmVucyA9IGNoaWxkcmVuczsKCiAgICBfdGhpcy5fYnVzID0gcGFyZW50Ll9idXM7CiAgICBfdGhpcy5fc3Vic2NyaXB0aW9ucyA9IHt9OwogIH0KCiAgX2NyZWF0ZUNsYXNzKE9ic2VydmVyT2JqZWN0LCBbewogICAga2V5OiAnYWRkU3Vic2NyaXB0aW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRTdWJzY3JpcHRpb24oaHlwZXJ0eSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eV0gPSBuZXcgX1N1YnNjcmlwdGlvbjIuZGVmYXVsdChfdGhpcy5fYnVzLCBoeXBlcnR5LCBfdGhpcy5fdXJsLCBfdGhpcy5fY2hpbGRyZW5zLCBmYWxzZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAncmVtb3ZlU3Vic2NyaXB0aW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVTdWJzY3JpcHRpb24oaHlwZXJ0eSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGRvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShoeXBlcnR5KS5kb21haW47CiAgICAgIHZhciBvYmpVUkxTdWJzY3JpcHRpb24gPSBfdGhpcy5fdXJsICsgJy9zdWJzY3JpcHRpb24nOwoKICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHldOwogICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgLy91bnN1YnNjcmliZSBtc2cgdG8gdGhlIFJlcG9ydGVyIFNNCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAndW5zdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fcGFyZW50Ll91cmwsIHRvOiBvYmpVUkxTdWJzY3JpcHRpb24sCiAgICAgICAgICBib2R5OiB7IHJlc291cmNlOiBfdGhpcy5fdXJsIH0KICAgICAgICB9KTsKCiAgICAgICAgLy9UT0RPOiBzaG91bGQgSSB3YWl0IGZvciByZXNwb25zZSBiZWZvcmUgdW5zdWJzY3JpYmUgb24gbXNnLW5vZGUKICAgICAgICAvL3Vuc3Vic2NyaWJlIG1zZyB0byB0aGUgZG9tYWluIG5vZGUKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICd1bnN1YnNjcmliZScsIGZyb206IF90aGlzLl9wYXJlbnQuX3VybCwgdG86ICdkb21haW46Ly9tc2ctbm9kZS4nICsgZG9tYWluICsgJy9zbScsCiAgICAgICAgICBib2R5OiB7IHJlc291cmNlOiBfdGhpcy5fdXJsLCBjaGlsZHJlblJlc291cmNlczogX3RoaXMuX2NoaWxkcmVucyB9CiAgICAgICAgfSk7CgogICAgICAgIHN1YnNjcmlwdGlvbi5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICAgIGRlbGV0ZSBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5XTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIE9ic2VydmVyT2JqZWN0Owp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBPYnNlcnZlck9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvdXRpbHMiOjIwMSwiLi9TdWJzY3JpcHRpb24iOjE5OH1dLDE5NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKdmFyIF91dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzJyk7Cgp2YXIgX1N1YnNjcmlwdGlvbiA9IHJlcXVpcmUoJy4vU3Vic2NyaXB0aW9uJyk7Cgp2YXIgX1N1YnNjcmlwdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdWJzY3JpcHRpb24pOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIFJlcG9ydGVyT2JqZWN0ID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFJlcG9ydGVyT2JqZWN0KHBhcmVudCwgb3duZXIsIHVybCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlcG9ydGVyT2JqZWN0KTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9wYXJlbnQgPSBwYXJlbnQ7CiAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsKICAgIF90aGlzLl91cmwgPSB1cmw7CgogICAgX3RoaXMuX2J1cyA9IHBhcmVudC5fYnVzOwoKICAgIF90aGlzLl9kb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkob3duZXIpLmRvbWFpbjsKICAgIF90aGlzLl9vYmpTdWJzY3JpcHRvclVSTCA9IF90aGlzLl91cmwgKyAnL3N1YnNjcmlwdGlvbic7CgogICAgX3RoaXMuX3N1YnNjcmlwdGlvbnMgPSB7fTsKICAgIF90aGlzLl9jaGlsZHJlbnMgPSBbXTsKICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycyA9IFtdOwoKICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFJlcG9ydGVyT2JqZWN0LCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL2FkZCBvYmplY3RVUkwgZm9yd2FyZC4uLgogICAgICBfdGhpcy5fb2JqRm9yd2FyZCA9IF90aGlzLl9idXMuYWRkRm9yd2FyZChfdGhpcy5fdXJsLCBfdGhpcy5fb3duZXIpOwoKICAgICAgLy9hZGQgc3Vic2NyaXB0aW9uIGxpc3RlbmVyLi4uCiAgICAgIF90aGlzLl9zdWJzY3JpcHRpb25MaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX29ialN1YnNjcmlwdG9yVVJMLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgY29uc29sZS5sb2coX3RoaXMuX29ialN1YnNjcmlwdG9yVVJMICsgJy1SQ1Y6ICcsIG1zZyk7CiAgICAgICAgc3dpdGNoIChtc2cudHlwZSkgewogICAgICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICAgICAgX3RoaXMuX29uUmVtb3RlU3Vic2NyaWJlKG1zZyk7YnJlYWs7CiAgICAgICAgICBjYXNlICd1bnN1YnNjcmliZSc6CiAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZVVuU3Vic2NyaWJlKG1zZyk7YnJlYWs7CiAgICAgICAgICBjYXNlICdyZXNwb25zZSc6CiAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZVJlc3BvbnNlKG1zZyk7YnJlYWs7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHZhciBjaGFuZ2VVUkwgPSBfdGhpcy5fdXJsICsgJy9jaGFuZ2VzJzsKICAgICAgX3RoaXMuX2NoYW5nZUxpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihjaGFuZ2VVUkwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAvL1RPRE86IHdoYXQgdG9kbyBoZXJlPyBTYXZlIGNoYW5nZXM/CiAgICAgICAgY29uc29sZS5sb2coJ1N5bmNoZXJNYW5hZ2VyLScgKyBjaGFuZ2VVUkwgKyAnLVJDVjogJywgbXNnKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX29iakZvcndhcmQucmVtb3ZlKCk7CgogICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uTGlzdGVuZXIucmVtb3ZlKCk7CgogICAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCk7CgogICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoY2wpIHsKICAgICAgICBjbC5yZW1vdmUoKTsKICAgICAgfSk7CgogICAgICAvL3JlbW92ZSBhbGwgc3Vic2NyaXB0aW9ucwogICAgICBPYmplY3Qua2V5cyhfdGhpcy5fc3Vic2NyaXB0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbnNba2V5XS5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdhZGRDaGlsZHJlbnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZENoaWxkcmVucyhjaGlsZHJlbnMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgaWYgKGNoaWxkcmVucy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBjaGlsZEJhc2VVUkwgPSBfdGhpcy5fdXJsICsgJy9jaGlsZHJlbi8nOwogICAgICAgIF90aGlzLl9jaGlsZHJlbnMucHVzaChjaGlsZHJlbnMpOwoKICAgICAgICAvKgogICAgICAgIF90aGlzLl9jaGlsZHJlbnMuZm9yRWFjaCgoY2hpbGQpID0+IHsKICAgICAgICAgIGxldCBjaGlsZElkID0gY2hpbGRCYXNlVVJMICsgY2hpbGQ7CiAgICAgICAgICAgbGV0IHNlbGZGb3J3YXJkID0gX3RoaXMuX2J1cy5hZGRGb3J3YXJkKGNoaWxkSWQsIG93bmVyKTsKICAgICAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKHNlbGZGb3J3YXJkKTsKICAgICAgICB9KTsqLwoKICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IFtdOwogICAgICAgIGNoaWxkcmVucy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbnMucHVzaChjaGlsZEJhc2VVUkwgKyBjaGlsZCk7CiAgICAgICAgfSk7CgogICAgICAgIHZhciBub2RlU3Vic2NyaWJlTXNnID0gewogICAgICAgICAgdHlwZTogJ3N1YnNjcmliZScsIGZyb206IF90aGlzLl9wYXJlbnQuX3VybCwgdG86ICdkb21haW46Ly9tc2ctbm9kZS4nICsgX3RoaXMuX2RvbWFpbiArICcvc20nLAogICAgICAgICAgYm9keTogeyBzdWJzY3JpYmU6IHN1YnNjcmlwdGlvbnMsIHNvdXJjZTogX3RoaXMuX293bmVyIH0KICAgICAgICB9OwoKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG5vZGVTdWJzY3JpYmVNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ25vZGUtc3Vic2NyaWJlLXJlc3BvbnNlKHJlcG9ydGVyKTogJywgcmVwbHkpOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CgogICAgICAgICAgICAvL2FkZCBjaGlsZHJlbiBsaXN0ZW5lcnMgb24gbG9jYWwgLi4uCiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGRVUkwpIHsKICAgICAgICAgICAgICB2YXIgY2hpbGRMaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoY2hpbGRVUkwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgICAgIC8vVE9ETzogd2hhdCB0b2RvIGhlcmU/IFNhdmUgY2hpbGRyZW5zPwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N5bmNoZXJNYW5hZ2VyLScgKyBjaGlsZFVSTCArICctUkNWOiAnLCBtc2cpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKGNoaWxkTGlzdGVuZXIpOwoKICAgICAgICAgICAgICB2YXIgc2VsZkZvcndhcmQgPSBfdGhpcy5fYnVzLmFkZEZvcndhcmQoY2hpbGRVUkwsIF90aGlzLl9vd25lcik7CiAgICAgICAgICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goc2VsZkZvcndhcmQpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdCgnRXJyb3Igb24gbXNnLW5vZGUgc3Vic2NyaXB0aW9uOiAnICsgcmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZGVsZXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKF90aGlzLl9vd25lcikuZG9tYWluOwoKICAgICAgLy9kZWxldGUgbXNnIHRvIGFsbCBzdWJzY3JpcHRpb25zCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgIHR5cGU6ICdkZWxldGUnLCBmcm9tOiBfdGhpcy5fb2JqU3Vic2NyaXB0b3JVUkwsIHRvOiBfdGhpcy5fdXJsICsgJy9jaGFuZ2VzJwogICAgICB9KTsKCiAgICAgIC8vVE9ETzogY2hhbmdlIGRlbGV0ZSBzcGVjIQogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICB0eXBlOiAnZGVsZXRlJywgZnJvbTogX3RoaXMuX3BhcmVudC5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBkb21haW4gKyAnL29iamVjdC1hZGRyZXNzLWFsbG9jYXRpb24nLAogICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IF90aGlzLl91cmwsIGNoaWxkcmVuUmVzb3VyY2VzOiBfdGhpcy5fY2hpbGRyZW5zIH0KICAgICAgfSk7CgogICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICBkZWxldGUgX3RoaXMuX3BhcmVudC5fcmVwb3J0ZXJzW190aGlzLl91cmxdOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vblJlbW90ZVJlc3BvbnNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZW1vdGVSZXNwb25zZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IF90aGlzLl91cmwsCiAgICAgICAgYm9keTogeyBjb2RlOiBtc2cuYm9keS5jb2RlLCBzb3VyY2U6IG1zZy5mcm9tIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX29uUmVtb3RlU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZW1vdGVTdWJzY3JpYmUobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBoeXBlcnR5VVJMID0gbXNnLmJvZHkuc3Vic2NyaWJlcjsKCiAgICAgIC8vdmFsaWRhdGUgaWYgc3Vic2NyaXB0aW9uIGFscmVhZHkgZXhpc3RzPwogICAgICBpZiAoX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVSTF0pIHsKICAgICAgICB2YXIgZXJyb3JNc2cgPSB7CiAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBoeXBlcnR5VVJMLAogICAgICAgICAgYm9keTogeyBjb2RlOiA1MDAsIGRlc2M6ICdTdWJzY3JpcHRpb24gZm9yICgnICsgX3RoaXMuX3VybCArICcgOiAnICsgaHlwZXJ0eVVSTCArICcpIGFscmVhZHkgZXhpc3RzIScgfQogICAgICAgIH07CgogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoZXJyb3JNc2cpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy9hc2sgdG8gc3Vic2NyaWJlIHRvIFN5bmNoZXI/IChkZXBlbmRzIG9uIHRoZSBvcGVyYXRpb24gbW9kZSkKICAgICAgLy9UT0RPOiBnZXQgbW9kZSBmcm9tIG9iamVjdCEKICAgICAgdmFyIG1vZGUgPSAnc3ViL3B1Yic7CgogICAgICBpZiAobW9kZSA9PT0gJ3N1Yi9wdWInKSB7CiAgICAgICAgLy9mb3J3YXJkIHRvIEh5cGVydHkgb3duZXIKICAgICAgICB2YXIgZm9yd2FyZE1zZyA9IHsKICAgICAgICAgIHR5cGU6ICdmb3J3YXJkJywgZnJvbTogX3RoaXMuX3VybCwgdG86IF90aGlzLl9vd25lciwKICAgICAgICAgIGJvZHk6IHsgdHlwZTogbXNnLnR5cGUsIGZyb206IGh5cGVydHlVUkwsIHRvOiBfdGhpcy5fdXJsIH0KICAgICAgICB9OwoKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKGZvcndhcmRNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ2ZvcndhcmQtcmVwbHk6ICcsIHJlcGx5KTsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5VVJMXSA9IG5ldyBfU3Vic2NyaXB0aW9uMi5kZWZhdWx0KF90aGlzLl9idXMsIF90aGlzLl9vd25lciwgX3RoaXMuX3VybCwgX3RoaXMuX2NoaWxkcmVucywgdHJ1ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy9zZW5kIHN1YnNjcmliZS1yZXNwb25zZQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgICBib2R5OiByZXBseS5ib2R5CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19vblJlbW90ZVVuU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZW1vdGVVblN1YnNjcmliZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGh5cGVydHlVUkwgPSBtc2cuYm9keS5zdWJzY3JpYmVyOwoKICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVUkxdOwogICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgc3Vic2NyaXB0aW9uLl9yZWxlYXNlTGlzdGVuZXJzKCk7CiAgICAgICAgZGVsZXRlIF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVUkxdOwoKICAgICAgICAvL1RPRE86IHNlbmQgdW4tc3Vic2NyaWJlIG1lc3NhZ2UgdG8gU3luY2hlcj8gKGRlcGVuZHMgb24gdGhlIG9wZXJhdGlvbiBtb2RlKQogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmVwb3J0ZXJPYmplY3Q7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IFJlcG9ydGVyT2JqZWN0Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi91dGlscy91dGlscyI6MjAxLCIuL1N1YnNjcmlwdGlvbiI6MTk4fV0sMTk4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCnZhciBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uKGJ1cywgb3duZXIsIHVybCwgY2hpbGRyZW5zLCBpc1JlcG9ydGVyKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3Vic2NyaXB0aW9uKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdmFyIGNoaWxkQmFzZVVSTCA9IHVybCArICcvY2hpbGRyZW4vJzsKICAgIHZhciBjaGFuZ2VVUkwgPSB1cmwgKyAnL2NoYW5nZXMnOwoKICAgIC8vcHJvY2VzcyBkZWxldGUgbWVzc2FnZQogICAgX3RoaXMuX2RlbGV0ZUxpc3RlbmVyID0gYnVzLmFkZExpc3RlbmVyKGNoYW5nZVVSTCwgZnVuY3Rpb24gKG1zZykgewogICAgICBpZiAobXNnLnR5cGUgPT09ICdkZWxldGUnKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmlwdGlvbi1ERUxFVEU6ICcsIG1zZyk7CiAgICAgICAgdmFyIGRlbGV0ZU1lc3NhZ2VUb0h5cGVydHkgPSB7CiAgICAgICAgICB0eXBlOiAnZGVsZXRlJywgZnJvbTogbXNnLmZyb20sIHRvOiBvd25lciwKICAgICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IHVybCB9CiAgICAgICAgfTsKCiAgICAgICAgLy9zZW5kIGRlbGV0ZSB0byBoeXBlcnR5CiAgICAgICAgYnVzLnBvc3RNZXNzYWdlKGRlbGV0ZU1lc3NhZ2VUb0h5cGVydHksIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmlwdGlvbi1ERUxFVEUtUkVQTFk6ICcsIHJlcGx5KTsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAgICAvL2FkZCBjaGFuZ2UgcHVibGlzaCBhZGRyZXNzIG9yIGZvcndhcmQKICAgIGlmIChpc1JlcG9ydGVyKSB7CiAgICAgIF90aGlzLl9jaGFuZ2VMaXN0ZW5lciA9IGJ1cy5hZGRQdWJsaXNoKGNoYW5nZVVSTCk7CiAgICB9IGVsc2UgewogICAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIgPSBidXMuYWRkRm9yd2FyZChjaGFuZ2VVUkwsIG93bmVyKTsKICAgIH0KCiAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMgPSBbXTsKICAgIGNoaWxkcmVucy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICB2YXIgY2hpbGRJZCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOwoKICAgICAgLy9hZGQgY2hpbGRyZW4gcHVibGlzaCBhZGRyZXNzCiAgICAgIHZhciBjaGlsZHJlbkZvcndhcmQgPSBidXMuYWRkUHVibGlzaChjaGlsZElkKTsKICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goY2hpbGRyZW5Gb3J3YXJkKTsKCiAgICAgIC8vYWRkIHNlbGYgZm9yd2FyZCBpZiBhbiBvYnNlcnZlcgogICAgICBpZiAoIWlzUmVwb3J0ZXIpIHsKICAgICAgICB2YXIgc2VsZkZvcndhcmQgPSBidXMuYWRkRm9yd2FyZChjaGlsZElkLCBvd25lcik7CiAgICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goc2VsZkZvcndhcmQpOwogICAgICB9CiAgICB9KTsKICB9CgogIF9jcmVhdGVDbGFzcyhTdWJzY3JpcHRpb24sIFt7CiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fZGVsZXRlTGlzdGVuZXIucmVtb3ZlKCk7CgogICAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCk7CgogICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoZm9yd2FyZCkgewogICAgICAgIGZvcndhcmQucmVtb3ZlKCk7CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFN1YnNjcmlwdGlvbjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gU3Vic2NyaXB0aW9uOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDE5OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKdmFyIF91dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzJyk7Cgp2YXIgX09iamVjdEFsbG9jYXRpb24gPSByZXF1aXJlKCcuL09iamVjdEFsbG9jYXRpb24nKTsKCnZhciBfT2JqZWN0QWxsb2NhdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PYmplY3RBbGxvY2F0aW9uKTsKCnZhciBfUmVwb3J0ZXJPYmplY3QgPSByZXF1aXJlKCcuL1JlcG9ydGVyT2JqZWN0Jyk7Cgp2YXIgX1JlcG9ydGVyT2JqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JlcG9ydGVyT2JqZWN0KTsKCnZhciBfT2JzZXJ2ZXJPYmplY3QgPSByZXF1aXJlKCcuL09ic2VydmVyT2JqZWN0Jyk7Cgp2YXIgX09ic2VydmVyT2JqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX09ic2VydmVyT2JqZWN0KTsKCnZhciBfc2VydmljZUZyYW1ld29yayA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrJyk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioKICogQGF1dGhvciBtaWNhZWxwZWRyb3NhQGdtYWlsLmNvbQogKiBDb3JlIFN5bmNyb25pemF0aW9uIHN5c3RlbS4KICovCgp2YXIgU3luY2hlck1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogIF91cmw6IFVSTAogIF9idXM6IE1pbmlCdXMKICBfcmVnaXN0cnk6IFJlZ2lzdHJ5CiAgX2FsbG9jYXRvcjogT2JqZWN0QWxsb2NhdGlvbgogICBfcmVwb3J0ZXJzOiB7IE9iamVjdFVSTDogUmVwb3J0ZXJPYmplY3QgfQogIF9vYnNlcnZlcnM6IHsgT2JqZWN0VVJMOiBPYnNlcnZlck9iamVjdCB9CiAgKi8KCiAgZnVuY3Rpb24gU3luY2hlck1hbmFnZXIocnVudGltZVVSTCwgYnVzLCByZWdpc3RyeSwgY2F0YWxvZywgYWxsb2NhdG9yKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3luY2hlck1hbmFnZXIpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX2J1cyA9IGJ1czsKICAgIF90aGlzLl9yZWdpc3RyeSA9IHJlZ2lzdHJ5OwogICAgX3RoaXMuX2NhdGFsb2cgPSBjYXRhbG9nOwoKICAgIC8vVE9ETzogdGhlc2Ugc2hvdWxkIGJlIHNhdmVkIGluIHBlcnNpc3RlbmNlIGVuZ2luZT8KICAgIF90aGlzLl91cmwgPSBydW50aW1lVVJMICsgJy9zbSc7CiAgICBfdGhpcy5fb2JqZWN0VVJMID0gcnVudGltZVVSTCArICcvb2JqZWN0LWFsbG9jYXRpb24nOwoKICAgIF90aGlzLl9yZXBvcnRlcnMgPSB7fTsKICAgIF90aGlzLl9vYnNlcnZlcnMgPSB7fTsKCiAgICAvL1RPRE86IHRoaXMgc2hvdWxkIG5vdCBiZSBoYXJkY29kZWQhCiAgICBfdGhpcy5fZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKHJ1bnRpbWVVUkwpLmRvbWFpbjsKCiAgICBfdGhpcy5fbWYgPSBuZXcgX3NlcnZpY2VGcmFtZXdvcmsuTWVzc2FnZUZhY3RvcnkoZmFsc2UsIHt9KTsKCiAgICBpZiAoYWxsb2NhdG9yKSB7CiAgICAgIF90aGlzLl9hbGxvY2F0b3IgPSBhbGxvY2F0b3I7CiAgICB9IGVsc2UgewogICAgICBfdGhpcy5fYWxsb2NhdG9yID0gbmV3IF9PYmplY3RBbGxvY2F0aW9uMi5kZWZhdWx0KF90aGlzLl9vYmplY3RVUkwsIGJ1cyk7CiAgICB9CgogICAgYnVzLmFkZExpc3RlbmVyKF90aGlzLl91cmwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgY29uc29sZS5sb2coJ1N5bmNoZXJNYW5hZ2VyLVJDVjogJywgbXNnKTsKICAgICAgc3dpdGNoIChtc2cudHlwZSkgewogICAgICAgIGNhc2UgJ2NyZWF0ZSc6CiAgICAgICAgICBfdGhpcy5fb25DcmVhdGUobXNnKTticmVhazsKICAgICAgICBjYXNlICdkZWxldGUnOgogICAgICAgICAgX3RoaXMuX29uRGVsZXRlKG1zZyk7YnJlYWs7CiAgICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICAgIF90aGlzLl9vbkxvY2FsU3Vic2NyaWJlKG1zZyk7YnJlYWs7CiAgICAgICAgY2FzZSAndW5zdWJzY3JpYmUnOgogICAgICAgICAgX3RoaXMuX29uTG9jYWxVblN1YnNjcmliZShtc2cpO2JyZWFrOwogICAgICB9CiAgICB9KTsKICB9CgogIF9jcmVhdGVDbGFzcyhTeW5jaGVyTWFuYWdlciwgW3sKICAgIGtleTogJ19vbkNyZWF0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ3JlYXRlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgb3duZXIgPSBtc2cuZnJvbTsKICAgICAgdmFyIGRvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShtc2cuZnJvbSkuZG9tYWluOwoKICAgICAgLy9UT0RPOiA1LTcgYXV0aG9yaXplT2JqZWN0Q3JlYXRpb24ob3duZXIsIG9iaiA/Pz8/ICkKICAgICAgLy9UT0RPOiBvdGhlciBvcHRpb25hbCBzdGVwcwoKICAgICAgLy9nZXQgc2NoZW1hIGZyb20gY2F0YWxvZ3VlIGFuZCBwYXJzZSAtPiAoc2NoZW1lLCBjaGlsZHJlbikKICAgICAgX3RoaXMuX2NhdGFsb2cuZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3IobXNnLmJvZHkuc2NoZW1hKS50aGVuKGZ1bmN0aW9uIChkZXNjcmlwdG9yKSB7CiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBkZXNjcmlwdG9yLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZS5wcm9wZXJ0aWVzOwogICAgICAgIHZhciBzY2hlbWUgPSBwcm9wZXJ0aWVzLnNjaGVtZSA/IHByb3BlcnRpZXMuc2NoZW1lLmNvbnN0YW50IDogJ3Jlc291cmNlJzsKICAgICAgICB2YXIgY2hpbGRyZW5zID0gcHJvcGVydGllcy5jaGlsZHJlbiA/IHByb3BlcnRpZXMuY2hpbGRyZW4uY29uc3RhbnQgOiBbXTsKCiAgICAgICAgX3RoaXMuX2FsbG9jYXRvci5jcmVhdGUoZG9tYWluLCBzY2hlbWUsIDEpLnRoZW4oZnVuY3Rpb24gKGFsbG9jYXRlZCkgewogICAgICAgICAgLy9UT0RPOiBnZXQgYWRkcmVzcyBmcm9tIGFkZHJlc3MgYWxsb2NhdG9yID8KICAgICAgICAgIHZhciBvYmpVUkwgPSBhbGxvY2F0ZWRbMF07CiAgICAgICAgICB2YXIgb2JqU3Vic2NyaXB0b3JVUkwgPSBvYmpVUkwgKyAnL3N1YnNjcmlwdGlvbic7CgogICAgICAgICAgdmFyIHJlcG9ydGVyID0gbmV3IF9SZXBvcnRlck9iamVjdDIuZGVmYXVsdChfdGhpcywgb3duZXIsIG9ialVSTCk7CiAgICAgICAgICByZXBvcnRlci5hZGRDaGlsZHJlbnMoY2hpbGRyZW5zKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuX3JlcG9ydGVyc1tvYmpVUkxdID0gcmVwb3J0ZXI7CgogICAgICAgICAgICAvKnsKICAgICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBvd25lciwKICAgICAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgcmVzb3VyY2U6IG9ialVSTCwgY2hpbGRyZW5SZXNvdXJjZXM6IGNoaWxkcmVucyB9CiAgICAgICAgICAgIH0qLwogICAgICAgICAgICB2YXIgcmVzcG9uc2VNc2cgPSBfdGhpcy5fbWYuY3JlYXRlTWVzc2FnZVJlc3BvbnNlKG1zZywgMjAwKTsKICAgICAgICAgICAgcmVzcG9uc2VNc2cuYm9keS5yZXNvdXJjZSA9IG9ialVSTDsKICAgICAgICAgICAgcmVzcG9uc2VNc2cuYm9keS5jaGlsZHJlblJlc291cmNlcyA9IGNoaWxkcmVuczsKCiAgICAgICAgICAgIC8vYWxsIG9rLCBzZW5kIHJlc3BvbnNlCiAgICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG93bmVyLAogICAgICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCByZXNvdXJjZTogb2JqVVJMLCBjaGlsZHJlblJlc291cmNlczogY2hpbGRyZW5zIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvL3NlbmQgY3JlYXRlIHRvIGFsbCBvYnNlcnZlcnMsIHJlc3BvbnNlcyB3aWxsIGJlIGRlbGl2ZXIgdG8gdGhlIEh5cGVydHkgb3duZXI/CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIC8vc2NoZWR1bGUgZm9yIG5leHQgY3ljbGUgbmVlZGVkLCBiZWNhdXNlIHRoZSBSZXBvcnRlciBzaG91bGQgYmUgYXZhaWxhYmxlLgogICAgICAgICAgICAgIG1zZy5ib2R5LmF1dGhvcmlzZS5mb3JFYWNoKGZ1bmN0aW9uIChoeXBlcnR5VVJMKSB7CgogICAgICAgICAgICAgICAgLyp7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBvYmpTdWJzY3JpcHRvclVSTCwgdG86IGh5cGVydHlVUkwsCiAgICAgICAgICAgICAgICAgIGJvZHk6IHsgc291cmNlOiBtc2cuZnJvbSwgdmFsdWU6IG1zZy5ib2R5LnZhbHVlLCBzY2hlbWE6IG1zZy5ib2R5LnNjaGVtYSB9CiAgICAgICAgICAgICAgICB9Ki8KICAgICAgICAgICAgICAgIHZhciBjcmVhdGVNc2cgPSBfdGhpcy5fbWYuY3JlYXRlQ3JlYXRlTWVzc2FnZVJlcXVlc3Qob2JqU3Vic2NyaXB0b3JVUkwsIGh5cGVydHlVUkwsIG1zZy5ib2R5LnZhbHVlKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU1zZy5ib2R5LnNvdXJjZSA9IG1zZy5mcm9tOwogICAgICAgICAgICAgICAgY3JlYXRlTXNnLmJvZHkuc2NoZW1hID0gbXNnLmJvZHkuc2NoZW1hOwoKICAgICAgICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogb2JqU3Vic2NyaXB0b3JVUkwsIHRvOiBoeXBlcnR5VVJMLAogICAgICAgICAgICAgICAgICBib2R5OiB7IHNvdXJjZTogbXNnLmZyb20sIHZhbHVlOiBtc2cuYm9keS52YWx1ZSwgc2NoZW1hOiBtc2cuYm9keS5zY2hlbWEgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAvKnsKICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG93bmVyLAogICAgICAgICAgYm9keTogeyBjb2RlOiA1MDAsIGRlc2M6IHJlYXNvbiB9CiAgICAgICAgfSovCiAgICAgICAgdmFyIHJlc3BvbnNlTXNnID0gX3RoaXMuX21mLmNyZWF0ZU1lc3NhZ2VSZXNwb25zZShtc2csIDUwMCk7CgogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UocmVzcG9uc2VNc2cpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25EZWxldGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkRlbGV0ZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBvYmpVUkwgPSBtc2cuYm9keS5yZXNvdXJjZTsKCiAgICAgIHZhciBvYmplY3QgPSBfdGhpcy5fcmVwb3J0ZXJzW29ialVSTF07CiAgICAgIGlmIChvYmplY3QpIHsKICAgICAgICAvL1RPRE86IGlzIHRoZXJlIGFueSBwb2xpY3kgdmVyaWZpY2F0aW9uIGJlZm9yZSBkZWxldGU/CiAgICAgICAgb2JqZWN0LmRlbGV0ZSgpOwoKICAgICAgICAvL1RPRE86IHVucmVnaXN0ZXIgb2JqZWN0PwogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25Mb2NhbFN1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uTG9jYWxTdWJzY3JpYmUobXNnKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBoeXBlcnR5VVJMID0gbXNnLmZyb207CiAgICAgIHZhciBvYmpVUkwgPSBtc2cuYm9keS5yZXNvdXJjZTsKICAgICAgdmFyIG9ialVSTFN1YnNjcmlwdGlvbiA9IG9ialVSTCArICcvc3Vic2NyaXB0aW9uJzsKICAgICAgdmFyIGNoaWxkQmFzZVVSTCA9IG9ialVSTCArICcvY2hpbGRyZW4vJzsKCiAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkob2JqVVJMKS5kb21haW47CgogICAgICAvL2dldCBzY2hlbWEgZnJvbSBjYXRhbG9ndWUgYW5kIHBhcnNlIC0+IChjaGlsZHJlbikKICAgICAgX3RoaXMuX2NhdGFsb2cuZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3IobXNnLmJvZHkuc2NoZW1hKS50aGVuKGZ1bmN0aW9uIChkZXNjcmlwdG9yKSB7CiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBkZXNjcmlwdG9yLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZS5wcm9wZXJ0aWVzOwogICAgICAgIHZhciBjaGlsZHJlbnMgPSBwcm9wZXJ0aWVzLmNoaWxkcmVuID8gcHJvcGVydGllcy5jaGlsZHJlbi5jb25zdGFudCA6IFtdOwoKICAgICAgICAvL2NoaWxkcmVuIGFkZHJlc3NlcwogICAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gW107CiAgICAgICAgc3Vic2NyaXB0aW9ucy5wdXNoKG9ialVSTCArICcvY2hhbmdlcycpOwogICAgICAgIGNoaWxkcmVucy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbnMucHVzaChjaGlsZEJhc2VVUkwgKyBjaGlsZCk7CiAgICAgICAgfSk7CgogICAgICAgIC8vc3Vic2NyaWJlIG1zZyBmb3IgdGhlIGRvbWFpbiBub2RlCiAgICAgICAgdmFyIG5vZGVTdWJzY3JpYmVNc2cgPSB7CiAgICAgICAgICB0eXBlOiAnc3Vic2NyaWJlJywgZnJvbTogX3RoaXMuX3VybCwgdG86ICdkb21haW46Ly9tc2ctbm9kZS4nICsgZG9tYWluICsgJy9zbScsCiAgICAgICAgICBib2R5OiB7IHN1YnNjcmliZTogc3Vic2NyaXB0aW9ucywgc291cmNlOiBoeXBlcnR5VVJMIH0KICAgICAgICB9OwoKICAgICAgICAvL3N1YnNjcmliZSBpbiBtc2ctbm9kZQogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uobm9kZVN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnbm9kZS1zdWJzY3JpYmUtcmVzcG9uc2Uob2JzZXJ2ZXIpOiAnLCByZXBseSk7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKCiAgICAgICAgICAgIC8vc2VuZCBwcm92aXNpb25hbCByZXNwb25zZQogICAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBoeXBlcnR5VVJMLAogICAgICAgICAgICAgIGJvZHk6IHsgY29kZTogMTAwLCBjaGlsZHJlblJlc291cmNlczogY2hpbGRyZW5zIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB2YXIgb2JqU3Vic2NyaWJlTXNnID0gewogICAgICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogb2JqVVJMU3Vic2NyaXB0aW9uLAogICAgICAgICAgICAgIGJvZHk6IHsgc3Vic2NyaWJlcjogaHlwZXJ0eVVSTCB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvL3N1YnNjcmliZSB0byByZXBvcnRlciBTTQogICAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG9ialN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcG9ydGVyLXN1YnNjcmliZS1yZXNwb25zZTogJywgcmVwbHkpOwogICAgICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewoKICAgICAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXTsKICAgICAgICAgICAgICAgIGlmICghb2JzZXJ2ZXIpIHsKICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXcgX09ic2VydmVyT2JqZWN0Mi5kZWZhdWx0KF90aGlzLCBvYmpVUkwsIGNoaWxkcmVucyk7CiAgICAgICAgICAgICAgICAgIF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXSA9IG9ic2VydmVyOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG9ic2VydmVyLmFkZFN1YnNjcmlwdGlvbihoeXBlcnR5VVJMKTsKCiAgICAgICAgICAgICAgICAvL2ZvcndhcmQgdG8gaHlwZXJ0eToKICAgICAgICAgICAgICAgIHJlcGx5LmlkID0gbXNnLmlkOwogICAgICAgICAgICAgICAgcmVwbHkuZnJvbSA9IF90aGlzLl91cmw7CiAgICAgICAgICAgICAgICByZXBseS50byA9IGh5cGVydHlVUkw7CiAgICAgICAgICAgICAgICBfdGhpczIuX2J1cy5wb3N0TWVzc2FnZShyZXBseSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vbGlzdGVuZXIgcmVqZWN0ZWQKICAgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogaHlwZXJ0eVVSTCwKICAgICAgICAgICAgICBib2R5OiByZXBseS5ib2R5CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25Mb2NhbFVuU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Mb2NhbFVuU3Vic2NyaWJlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGh5cGVydHlVUkwgPSBtc2cuZnJvbTsKICAgICAgdmFyIG9ialVSTCA9IG1zZy5ib2R5LnJlc291cmNlOwoKICAgICAgdmFyIG9ic2VydmVyID0gX3RoaXMuX29ic2VydmVyc1tvYmpVUkxdOwogICAgICBpZiAob2JzZXJ2ZXIpIHsKICAgICAgICAvL1RPRE86IGlzIHRoZXJlIGFueSBwb2xpY3kgdmVyaWZpY2F0aW9uIGJlZm9yZSBkZWxldGU/CiAgICAgICAgb2JzZXJ2ZXIucmVtb3ZlU3Vic2NyaXB0aW9uKGh5cGVydHlVUkwpOwoKICAgICAgICAvL1RPRE86IGRlc3Ryb3kgb2JqZWN0IGluIHRoZSByZWdpc3RyeT8KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgYm9keTogeyBjb2RlOiAyMDAgfQogICAgICAgIH0pOwoKICAgICAgICAvL1RPRE86IHJlbW92ZSBPYmplY3QgaWYgbm8gbW9yZSBzdWJzY3JpcHRpb24/CiAgICAgICAgLy9kZWxldGUgX3RoaXMuX29ic2VydmVyc1tvYmpVUkxdOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAndXJsJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdXJsOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFN5bmNoZXJNYW5hZ2VyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBTeW5jaGVyTWFuYWdlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvdXRpbHMiOjIwMSwiLi9PYmplY3RBbGxvY2F0aW9uIjoxOTUsIi4vT2JzZXJ2ZXJPYmplY3QiOjE5NiwiLi9SZXBvcnRlck9iamVjdCI6MTk3LCJzZXJ2aWNlLWZyYW1ld29yayI6MTYwfV0sMjAwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgogKiBFdmVudEVtaXR0ZXIKICogQWxsIGNsYXNzZXMgd2hpY2ggZXh0ZW5kcyB0aGlzLCBjYW4gaGF2ZSBhZGRFdmVudExpc3RlbmVyIGFuZCB0cmlnZ2VyIGV2ZW50czsKICovCgp2YXIgRXZlbnRFbWl0dGVyID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudEVtaXR0ZXIpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEV2ZW50RW1pdHRlciwgW3sKICAgIGtleTogImFkZEV2ZW50TGlzdGVuZXIiLAoKCiAgICAvKioKICAgICAqIGFkZEV2ZW50TGlzdGVuZXIgbGlzdGVuIGZvciBhbiBldmVudFR5cGUKICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgICAgICBldmVudFR5cGUgLSBsaXN0ZW5pbmcgZm9yIHRoaXMgdHlwZSBvZiBldmVudAogICAgICogQHBhcmFtICB7RnVuY3Rpb259ICAgICAgIGNiICAgICAgICAtIGNhbGxiYWNrIGZ1bmN0aW9uIHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB0aGUgZXZlbnQgaXQgaXMgaW52b2tlZAogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNiKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzW2V2ZW50VHlwZV0gPSBjYjsKICAgIH0KCiAgICAvKioKICAgICAqIEludm9rZSB0aGUgZXZlbnRUeXBlCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGV2ZW50VHlwZSAtIGV2ZW50IHdpbGwgYmUgaW52b2tlZAogICAgICogQHBhcmFtICB7b2JqZWN0fSBwYXJhbXMgLSBwYXJhbWV0ZXJzIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBhZGRFdmVudExpc3RlbmVyCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidHJpZ2dlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlcihldmVudFR5cGUsIHBhcmFtcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzW2V2ZW50VHlwZV0pIHsKICAgICAgICBfdGhpc1tldmVudFR5cGVdKHBhcmFtcyk7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBFdmVudEVtaXR0ZXI7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IEV2ZW50RW1pdHRlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwyMDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGl2aWRlVVJMID0gZGl2aWRlVVJMOwpleHBvcnRzLmVtcHR5T2JqZWN0ID0gZW1wdHlPYmplY3Q7CmV4cG9ydHMuZGVlcENsb25lID0gZGVlcENsb25lOwpleHBvcnRzLmdldFVzZXJVUkxGcm9tRW1haWwgPSBnZXRVc2VyVVJMRnJvbUVtYWlsOwpleHBvcnRzLmdldFVzZXJFbWFpbEZyb21VUkwgPSBnZXRVc2VyRW1haWxGcm9tVVJMOwovKioKICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bAogKiBAbW9kdWxlIHV0aWxzCiAqLwoKLyoqCiAqIEB0eXBlZGVmIGRpdmlkZVVSTAogKiBAdHlwZSBPYmplY3QKICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGlkZW50aXR5IFRoZSBpZGVudGl0eSBvZiBVUkwKICovCgovKioKICogRGl2aWRlIGFuIHVybCBpbiB0eXBlLCBkb21haW4gYW5kIGlkZW50aXR5CiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzCiAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwKICovCmZ1bmN0aW9uIGRpdmlkZVVSTCh1cmwpIHsKCiAgLy8gbGV0IHJlID0gLyhbYS16QS1aLV0qKT86XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn1cLlthLXpdezIsNn1cYikqKFwvW1wvXGRcd1wuLV0qKSooPzpbXD9dKSooLispKi9naTsKICB2YXIgcmUgPSAvKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naTsKICB2YXIgc3Vic3QgPSAnJDEsJDIsJDMnOwogIHZhciBwYXJ0cyA9IHVybC5yZXBsYWNlKHJlLCBzdWJzdCkuc3BsaXQoJywnKTsKCiAgLy8gSWYgdGhlIHVybCBoYXMgbm8gcHJvdG9jb2wsIHRoZSBkZWZhdWx0IHByb3RvY29sIHNldCBpcyBodHRwcwogIGlmIChwYXJ0c1swXSA9PT0gdXJsKSB7CiAgICBwYXJ0c1swXSA9ICdodHRwcyc7CiAgICBwYXJ0c1sxXSA9IHVybDsKICB9CgogIHZhciByZXN1bHQgPSB7CiAgICB0eXBlOiBwYXJ0c1swXSwKICAgIGRvbWFpbjogcGFydHNbMV0sCiAgICBpZGVudGl0eTogcGFydHNbMl0KICB9OwoKICByZXR1cm4gcmVzdWx0Owp9CgovKioKICogQ2hlY2sgaWYgYW4gT2JqZWN0IGlzIGVtcHR5CiAqIEBwYXJhbSAge09iamVjdH0gb2JqZWN0IE9iamVjdCB0byBiZSBjaGVja2VkCiAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgIHN0YXR1cyBvZiBPYmplY3QsIGVtcHR5IG9yIG5vdCAodHJ1ZXxmYWxzZSk7CiAqLwpmdW5jdGlvbiBlbXB0eU9iamVjdChvYmplY3QpIHsKICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KS5sZW5ndGggPiAwID8gZmFsc2UgOiB0cnVlOwp9CgovKioKICogTWFrZSBhIENPUFkgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICogQHBhcmFtICB7T2JqZWN0fSAgb2JqIC0gb2JqZWN0IHRvIGJlIGNsb25lZAogKiBAcmV0dXJuIHtPYmplY3R9CiAqLwpmdW5jdGlvbiBkZWVwQ2xvbmUob2JqKSB7CiAgLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgogIGlmIChvYmopIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpOwp9CgovKioKICogT2J0YWlucyB0aGUgdXNlciBVUkwgdGhhdCBjb3JyZXNwb25kcyB0byBhIGdpdmVuIGVtYWlsCiAqIEBwYXJhbSAge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsCiAqIEByZXR1cm4ge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMCiAqLwpmdW5jdGlvbiBnZXRVc2VyVVJMRnJvbUVtYWlsKHVzZXJFbWFpbCkgewogIHZhciBpbmRleE9mQXQgPSB1c2VyRW1haWwuaW5kZXhPZignQCcpOwogIHJldHVybiAndXNlcjovLycgKyB1c2VyRW1haWwuc3Vic3RyaW5nKGluZGV4T2ZBdCArIDEsIHVzZXJFbWFpbC5sZW5ndGgpICsgJy8nICsgdXNlckVtYWlsLnN1YnN0cmluZygwLCBpbmRleE9mQXQpOwp9CgovKioKICogT2J0YWlucyB0aGUgdXNlciBlbWFpbCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gVVJMCiAqIEBwYXJhbSAge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMCiAqIEByZXR1cm4ge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsCiAqLwpmdW5jdGlvbiBnZXRVc2VyRW1haWxGcm9tVVJMKHVzZXJVUkwpIHsKICB2YXIgdXJsID0gZGl2aWRlVVJMKHVzZXJVUkwpOwogIHJldHVybiB1cmwuaWRlbnRpdHkucmVwbGFjZSgnLycsICcnKSArICdAJyArIHVybC5kb21haW47IC8vIGlkZW50aXR5IGZpZWxkIGhhcyAnL2V4YW1wbGVJRCcgaW5zdGVhZCBvZiAnZXhhbXBsZUlEJwp9Cgp9LHt9XX0se30sWzE5NF0pKDE5NCkKfSk7",
      "sourceCodeClassname": "RuntimeUA",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 1,
    "type": "Runtimes",
    "version": "0.1",
    "description": "Description of RuntimeUA",
    "objectName": "RuntimeUA",
    "configuration": {},
    "runtimeType": "browser",
    "hypertyCapabilities": {
      "mic": false
    },
    "protocolCapabilities": {
      "http": true
    },
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  }
}