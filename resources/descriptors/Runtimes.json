{
  "RuntimeUA": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuUnVudGltZVVBID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT0iZnVuY3Rpb24iJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrbysiJyIpO3Rocm93IGYuY29kZT0iTU9EVUxFX05PVF9GT1VORCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT0iZnVuY3Rpb24iJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBhc24xID0gZXhwb3J0czsKCmFzbjEuYmlnbnVtID0gcmVxdWlyZSgnYm4uanMnKTsKCmFzbjEuZGVmaW5lID0gcmVxdWlyZSgnLi9hc24xL2FwaScpLmRlZmluZTsKYXNuMS5iYXNlID0gcmVxdWlyZSgnLi9hc24xL2Jhc2UnKTsKYXNuMS5jb25zdGFudHMgPSByZXF1aXJlKCcuL2FzbjEvY29uc3RhbnRzJyk7CmFzbjEuZGVjb2RlcnMgPSByZXF1aXJlKCcuL2FzbjEvZGVjb2RlcnMnKTsKYXNuMS5lbmNvZGVycyA9IHJlcXVpcmUoJy4vYXNuMS9lbmNvZGVycycpOwoKfSx7Ii4vYXNuMS9hcGkiOjIsIi4vYXNuMS9iYXNlIjo0LCIuL2FzbjEvY29uc3RhbnRzIjo4LCIuL2FzbjEvZGVjb2RlcnMiOjEwLCIuL2FzbjEvZW5jb2RlcnMiOjEzLCJibi5qcyI6NDJ9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGFzbjEgPSByZXF1aXJlKCcuLi9hc24xJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Cgp2YXIgYXBpID0gZXhwb3J0czsKCmFwaS5kZWZpbmUgPSBmdW5jdGlvbiBkZWZpbmUobmFtZSwgYm9keSkgewogIHJldHVybiBuZXcgRW50aXR5KG5hbWUsIGJvZHkpOwp9OwoKZnVuY3Rpb24gRW50aXR5KG5hbWUsIGJvZHkpIHsKICB0aGlzLm5hbWUgPSBuYW1lOwogIHRoaXMuYm9keSA9IGJvZHk7CgogIHRoaXMuZGVjb2RlcnMgPSB7fTsKICB0aGlzLmVuY29kZXJzID0ge307Cn07CgpFbnRpdHkucHJvdG90eXBlLl9jcmVhdGVOYW1lZCA9IGZ1bmN0aW9uIGNyZWF0ZU5hbWVkKGJhc2UpIHsKICB2YXIgbmFtZWQ7CiAgdHJ5IHsKICAgIG5hbWVkID0gcmVxdWlyZSgndm0nKS5ydW5JblRoaXNDb250ZXh0KAogICAgICAnKGZ1bmN0aW9uICcgKyB0aGlzLm5hbWUgKyAnKGVudGl0eSkge1xuJyArCiAgICAgICcgIHRoaXMuX2luaXROYW1lZChlbnRpdHkpO1xuJyArCiAgICAgICd9KScKICAgICk7CiAgfSBjYXRjaCAoZSkgewogICAgbmFtZWQgPSBmdW5jdGlvbiAoZW50aXR5KSB7CiAgICAgIHRoaXMuX2luaXROYW1lZChlbnRpdHkpOwogICAgfTsKICB9CiAgaW5oZXJpdHMobmFtZWQsIGJhc2UpOwogIG5hbWVkLnByb3RvdHlwZS5faW5pdE5hbWVkID0gZnVuY3Rpb24gaW5pdG5hbWVkKGVudGl0eSkgewogICAgYmFzZS5jYWxsKHRoaXMsIGVudGl0eSk7CiAgfTsKCiAgcmV0dXJuIG5ldyBuYW1lZCh0aGlzKTsKfTsKCkVudGl0eS5wcm90b3R5cGUuX2dldERlY29kZXIgPSBmdW5jdGlvbiBfZ2V0RGVjb2RlcihlbmMpIHsKICAvLyBMYXppbHkgY3JlYXRlIGRlY29kZXIKICBpZiAoIXRoaXMuZGVjb2RlcnMuaGFzT3duUHJvcGVydHkoZW5jKSkKICAgIHRoaXMuZGVjb2RlcnNbZW5jXSA9IHRoaXMuX2NyZWF0ZU5hbWVkKGFzbjEuZGVjb2RlcnNbZW5jXSk7CiAgcmV0dXJuIHRoaXMuZGVjb2RlcnNbZW5jXTsKfTsKCkVudGl0eS5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGRhdGEsIGVuYywgb3B0aW9ucykgewogIHJldHVybiB0aGlzLl9nZXREZWNvZGVyKGVuYykuZGVjb2RlKGRhdGEsIG9wdGlvbnMpOwp9OwoKRW50aXR5LnByb3RvdHlwZS5fZ2V0RW5jb2RlciA9IGZ1bmN0aW9uIF9nZXRFbmNvZGVyKGVuYykgewogIC8vIExhemlseSBjcmVhdGUgZW5jb2RlcgogIGlmICghdGhpcy5lbmNvZGVycy5oYXNPd25Qcm9wZXJ0eShlbmMpKQogICAgdGhpcy5lbmNvZGVyc1tlbmNdID0gdGhpcy5fY3JlYXRlTmFtZWQoYXNuMS5lbmNvZGVyc1tlbmNdKTsKICByZXR1cm4gdGhpcy5lbmNvZGVyc1tlbmNdOwp9OwoKRW50aXR5LnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoZGF0YSwgZW5jLCAvKiBpbnRlcm5hbCAqLyByZXBvcnRlcikgewogIHJldHVybiB0aGlzLl9nZXRFbmNvZGVyKGVuYykuZW5jb2RlKGRhdGEsIHJlcG9ydGVyKTsKfTsKCn0seyIuLi9hc24xIjoxLCJpbmhlcml0cyI6MTI5LCJ2bSI6MTc4fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CnZhciBSZXBvcnRlciA9IHJlcXVpcmUoJy4uL2Jhc2UnKS5SZXBvcnRlcjsKdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKCmZ1bmN0aW9uIERlY29kZXJCdWZmZXIoYmFzZSwgb3B0aW9ucykgewogIFJlcG9ydGVyLmNhbGwodGhpcywgb3B0aW9ucyk7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYmFzZSkpIHsKICAgIHRoaXMuZXJyb3IoJ0lucHV0IG5vdCBCdWZmZXInKTsKICAgIHJldHVybjsKICB9CgogIHRoaXMuYmFzZSA9IGJhc2U7CiAgdGhpcy5vZmZzZXQgPSAwOwogIHRoaXMubGVuZ3RoID0gYmFzZS5sZW5ndGg7Cn0KaW5oZXJpdHMoRGVjb2RlckJ1ZmZlciwgUmVwb3J0ZXIpOwpleHBvcnRzLkRlY29kZXJCdWZmZXIgPSBEZWNvZGVyQnVmZmVyOwoKRGVjb2RlckJ1ZmZlci5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIHNhdmUoKSB7CiAgcmV0dXJuIHsgb2Zmc2V0OiB0aGlzLm9mZnNldCwgcmVwb3J0ZXI6IFJlcG9ydGVyLnByb3RvdHlwZS5zYXZlLmNhbGwodGhpcykgfTsKfTsKCkRlY29kZXJCdWZmZXIucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbiByZXN0b3JlKHNhdmUpIHsKICAvLyBSZXR1cm4gc2tpcHBlZCBkYXRhCiAgdmFyIHJlcyA9IG5ldyBEZWNvZGVyQnVmZmVyKHRoaXMuYmFzZSk7CiAgcmVzLm9mZnNldCA9IHNhdmUub2Zmc2V0OwogIHJlcy5sZW5ndGggPSB0aGlzLm9mZnNldDsKCiAgdGhpcy5vZmZzZXQgPSBzYXZlLm9mZnNldDsKICBSZXBvcnRlci5wcm90b3R5cGUucmVzdG9yZS5jYWxsKHRoaXMsIHNhdmUucmVwb3J0ZXIpOwoKICByZXR1cm4gcmVzOwp9OwoKRGVjb2RlckJ1ZmZlci5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkoKSB7CiAgcmV0dXJuIHRoaXMub2Zmc2V0ID09PSB0aGlzLmxlbmd0aDsKfTsKCkRlY29kZXJCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OChmYWlsKSB7CiAgaWYgKHRoaXMub2Zmc2V0ICsgMSA8PSB0aGlzLmxlbmd0aCkKICAgIHJldHVybiB0aGlzLmJhc2UucmVhZFVJbnQ4KHRoaXMub2Zmc2V0KyssIHRydWUpOwogIGVsc2UKICAgIHJldHVybiB0aGlzLmVycm9yKGZhaWwgfHwgJ0RlY29kZXJCdWZmZXIgb3ZlcnJ1bicpOwp9CgpEZWNvZGVyQnVmZmVyLnByb3RvdHlwZS5za2lwID0gZnVuY3Rpb24gc2tpcChieXRlcywgZmFpbCkgewogIGlmICghKHRoaXMub2Zmc2V0ICsgYnl0ZXMgPD0gdGhpcy5sZW5ndGgpKQogICAgcmV0dXJuIHRoaXMuZXJyb3IoZmFpbCB8fCAnRGVjb2RlckJ1ZmZlciBvdmVycnVuJyk7CgogIHZhciByZXMgPSBuZXcgRGVjb2RlckJ1ZmZlcih0aGlzLmJhc2UpOwoKICAvLyBTaGFyZSByZXBvcnRlciBzdGF0ZQogIHJlcy5fcmVwb3J0ZXJTdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CgogIHJlcy5vZmZzZXQgPSB0aGlzLm9mZnNldDsKICByZXMubGVuZ3RoID0gdGhpcy5vZmZzZXQgKyBieXRlczsKICB0aGlzLm9mZnNldCArPSBieXRlczsKICByZXR1cm4gcmVzOwp9CgpEZWNvZGVyQnVmZmVyLnByb3RvdHlwZS5yYXcgPSBmdW5jdGlvbiByYXcoc2F2ZSkgewogIHJldHVybiB0aGlzLmJhc2Uuc2xpY2Uoc2F2ZSA/IHNhdmUub2Zmc2V0IDogdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoKTsKfQoKZnVuY3Rpb24gRW5jb2RlckJ1ZmZlcih2YWx1ZSwgcmVwb3J0ZXIpIHsKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHRoaXMubGVuZ3RoID0gMDsKICAgIHRoaXMudmFsdWUgPSB2YWx1ZS5tYXAoZnVuY3Rpb24oaXRlbSkgewogICAgICBpZiAoIShpdGVtIGluc3RhbmNlb2YgRW5jb2RlckJ1ZmZlcikpCiAgICAgICAgaXRlbSA9IG5ldyBFbmNvZGVyQnVmZmVyKGl0ZW0sIHJlcG9ydGVyKTsKICAgICAgdGhpcy5sZW5ndGggKz0gaXRlbS5sZW5ndGg7CiAgICAgIHJldHVybiBpdGVtOwogICAgfSwgdGhpcyk7CiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7CiAgICBpZiAoISgwIDw9IHZhbHVlICYmIHZhbHVlIDw9IDB4ZmYpKQogICAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ25vbi1ieXRlIEVuY29kZXJCdWZmZXIgdmFsdWUnKTsKICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgIHRoaXMubGVuZ3RoID0gMTsKICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgIHRoaXMubGVuZ3RoID0gQnVmZmVyLmJ5dGVMZW5ndGgodmFsdWUpOwogIH0gZWxzZSBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbHVlKSkgewogICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgdGhpcy5sZW5ndGggPSB2YWx1ZS5sZW5ndGg7CiAgfSBlbHNlIHsKICAgIHJldHVybiByZXBvcnRlci5lcnJvcignVW5zdXBwb3J0ZWQgdHlwZTogJyArIHR5cGVvZiB2YWx1ZSk7CiAgfQp9CmV4cG9ydHMuRW5jb2RlckJ1ZmZlciA9IEVuY29kZXJCdWZmZXI7CgpFbmNvZGVyQnVmZmVyLnByb3RvdHlwZS5qb2luID0gZnVuY3Rpb24gam9pbihvdXQsIG9mZnNldCkgewogIGlmICghb3V0KQogICAgb3V0ID0gbmV3IEJ1ZmZlcih0aGlzLmxlbmd0aCk7CiAgaWYgKCFvZmZzZXQpCiAgICBvZmZzZXQgPSAwOwoKICBpZiAodGhpcy5sZW5ndGggPT09IDApCiAgICByZXR1cm4gb3V0OwoKICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnZhbHVlKSkgewogICAgdGhpcy52YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgaXRlbS5qb2luKG91dCwgb2Zmc2V0KTsKICAgICAgb2Zmc2V0ICs9IGl0ZW0ubGVuZ3RoOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIGlmICh0eXBlb2YgdGhpcy52YWx1ZSA9PT0gJ251bWJlcicpCiAgICAgIG91dFtvZmZzZXRdID0gdGhpcy52YWx1ZTsKICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAnc3RyaW5nJykKICAgICAgb3V0LndyaXRlKHRoaXMudmFsdWUsIG9mZnNldCk7CiAgICBlbHNlIGlmIChCdWZmZXIuaXNCdWZmZXIodGhpcy52YWx1ZSkpCiAgICAgIHRoaXMudmFsdWUuY29weShvdXQsIG9mZnNldCk7CiAgICBvZmZzZXQgKz0gdGhpcy5sZW5ndGg7CiAgfQoKICByZXR1cm4gb3V0Owp9OwoKfSx7Ii4uL2Jhc2UiOjQsImJ1ZmZlciI6NzYsImluaGVyaXRzIjoxMjl9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGJhc2UgPSBleHBvcnRzOwoKYmFzZS5SZXBvcnRlciA9IHJlcXVpcmUoJy4vcmVwb3J0ZXInKS5SZXBvcnRlcjsKYmFzZS5EZWNvZGVyQnVmZmVyID0gcmVxdWlyZSgnLi9idWZmZXInKS5EZWNvZGVyQnVmZmVyOwpiYXNlLkVuY29kZXJCdWZmZXIgPSByZXF1aXJlKCcuL2J1ZmZlcicpLkVuY29kZXJCdWZmZXI7CmJhc2UuTm9kZSA9IHJlcXVpcmUoJy4vbm9kZScpOwoKfSx7Ii4vYnVmZmVyIjozLCIuL25vZGUiOjUsIi4vcmVwb3J0ZXIiOjZ9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIFJlcG9ydGVyID0gcmVxdWlyZSgnLi4vYmFzZScpLlJlcG9ydGVyOwp2YXIgRW5jb2RlckJ1ZmZlciA9IHJlcXVpcmUoJy4uL2Jhc2UnKS5FbmNvZGVyQnVmZmVyOwp2YXIgRGVjb2RlckJ1ZmZlciA9IHJlcXVpcmUoJy4uL2Jhc2UnKS5EZWNvZGVyQnVmZmVyOwp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnbWluaW1hbGlzdGljLWFzc2VydCcpOwoKLy8gU3VwcG9ydGVkIHRhZ3MKdmFyIHRhZ3MgPSBbCiAgJ3NlcScsICdzZXFvZicsICdzZXQnLCAnc2V0b2YnLCAnb2JqaWQnLCAnYm9vbCcsCiAgJ2dlbnRpbWUnLCAndXRjdGltZScsICdudWxsXycsICdlbnVtJywgJ2ludCcsCiAgJ2JpdHN0cicsICdibXBzdHInLCAnY2hhcnN0cicsICdnZW5zdHInLCAnZ3JhcGhzdHInLCAnaWE1c3RyJywgJ2lzbzY0NnN0cicsCiAgJ251bXN0cicsICdvY3RzdHInLCAncHJpbnRzdHInLCAndDYxc3RyJywgJ3VuaXN0cicsICd1dGY4c3RyJywgJ3ZpZGVvc3RyJwpdOwoKLy8gUHVibGljIG1ldGhvZHMgbGlzdAp2YXIgbWV0aG9kcyA9IFsKICAna2V5JywgJ29iaicsICd1c2UnLCAnb3B0aW9uYWwnLCAnZXhwbGljaXQnLCAnaW1wbGljaXQnLCAnZGVmJywgJ2Nob2ljZScsCiAgJ2FueScsICdjb250YWlucycKXS5jb25jYXQodGFncyk7CgovLyBPdmVycmlkZWQgbWV0aG9kcyBsaXN0CnZhciBvdmVycmlkZWQgPSBbCiAgJ19wZWVrVGFnJywgJ19kZWNvZGVUYWcnLCAnX3VzZScsCiAgJ19kZWNvZGVTdHInLCAnX2RlY29kZU9iamlkJywgJ19kZWNvZGVUaW1lJywKICAnX2RlY29kZU51bGwnLCAnX2RlY29kZUludCcsICdfZGVjb2RlQm9vbCcsICdfZGVjb2RlTGlzdCcsCgogICdfZW5jb2RlQ29tcG9zaXRlJywgJ19lbmNvZGVTdHInLCAnX2VuY29kZU9iamlkJywgJ19lbmNvZGVUaW1lJywKICAnX2VuY29kZU51bGwnLCAnX2VuY29kZUludCcsICdfZW5jb2RlQm9vbCcKXTsKCmZ1bmN0aW9uIE5vZGUoZW5jLCBwYXJlbnQpIHsKICB2YXIgc3RhdGUgPSB7fTsKICB0aGlzLl9iYXNlU3RhdGUgPSBzdGF0ZTsKCiAgc3RhdGUuZW5jID0gZW5jOwoKICBzdGF0ZS5wYXJlbnQgPSBwYXJlbnQgfHwgbnVsbDsKICBzdGF0ZS5jaGlsZHJlbiA9IG51bGw7CgogIC8vIFN0YXRlCiAgc3RhdGUudGFnID0gbnVsbDsKICBzdGF0ZS5hcmdzID0gbnVsbDsKICBzdGF0ZS5yZXZlcnNlQXJncyA9IG51bGw7CiAgc3RhdGUuY2hvaWNlID0gbnVsbDsKICBzdGF0ZS5vcHRpb25hbCA9IGZhbHNlOwogIHN0YXRlLmFueSA9IGZhbHNlOwogIHN0YXRlLm9iaiA9IGZhbHNlOwogIHN0YXRlLnVzZSA9IG51bGw7CiAgc3RhdGUudXNlRGVjb2RlciA9IG51bGw7CiAgc3RhdGUua2V5ID0gbnVsbDsKICBzdGF0ZVsnZGVmYXVsdCddID0gbnVsbDsKICBzdGF0ZS5leHBsaWNpdCA9IG51bGw7CiAgc3RhdGUuaW1wbGljaXQgPSBudWxsOwogIHN0YXRlLmNvbnRhaW5zID0gbnVsbDsKCiAgLy8gU2hvdWxkIGNyZWF0ZSBuZXcgaW5zdGFuY2Ugb24gZWFjaCBtZXRob2QKICBpZiAoIXN0YXRlLnBhcmVudCkgewogICAgc3RhdGUuY2hpbGRyZW4gPSBbXTsKICAgIHRoaXMuX3dyYXAoKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBOb2RlOwoKdmFyIHN0YXRlUHJvcHMgPSBbCiAgJ2VuYycsICdwYXJlbnQnLCAnY2hpbGRyZW4nLCAndGFnJywgJ2FyZ3MnLCAncmV2ZXJzZUFyZ3MnLCAnY2hvaWNlJywKICAnb3B0aW9uYWwnLCAnYW55JywgJ29iaicsICd1c2UnLCAnYWx0ZXJlZFVzZScsICdrZXknLCAnZGVmYXVsdCcsICdleHBsaWNpdCcsCiAgJ2ltcGxpY2l0JwpdOwoKTm9kZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgdmFyIGNzdGF0ZSA9IHt9OwogIHN0YXRlUHJvcHMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7CiAgICBjc3RhdGVbcHJvcF0gPSBzdGF0ZVtwcm9wXTsKICB9KTsKICB2YXIgcmVzID0gbmV3IHRoaXMuY29uc3RydWN0b3IoY3N0YXRlLnBhcmVudCk7CiAgcmVzLl9iYXNlU3RhdGUgPSBjc3RhdGU7CiAgcmV0dXJuIHJlczsKfTsKCk5vZGUucHJvdG90eXBlLl93cmFwID0gZnVuY3Rpb24gd3JhcCgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgbWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgdGhpc1ttZXRob2RdID0gZnVuY3Rpb24gX3dyYXBwZWRNZXRob2QoKSB7CiAgICAgIHZhciBjbG9uZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpOwogICAgICBzdGF0ZS5jaGlsZHJlbi5wdXNoKGNsb25lKTsKICAgICAgcmV0dXJuIGNsb25lW21ldGhvZF0uYXBwbHkoY2xvbmUsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0sIHRoaXMpOwp9OwoKTm9kZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0KGJvZHkpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5wYXJlbnQgPT09IG51bGwpOwogIGJvZHkuY2FsbCh0aGlzKTsKCiAgLy8gRmlsdGVyIGNoaWxkcmVuCiAgc3RhdGUuY2hpbGRyZW4gPSBzdGF0ZS5jaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24oY2hpbGQpIHsKICAgIHJldHVybiBjaGlsZC5fYmFzZVN0YXRlLnBhcmVudCA9PT0gdGhpczsKICB9LCB0aGlzKTsKICBhc3NlcnQuZXF1YWwoc3RhdGUuY2hpbGRyZW4ubGVuZ3RoLCAxLCAnUm9vdCBub2RlIGNhbiBoYXZlIG9ubHkgb25lIGNoaWxkJyk7Cn07CgpOb2RlLnByb3RvdHlwZS5fdXNlQXJncyA9IGZ1bmN0aW9uIHVzZUFyZ3MoYXJncykgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgLy8gRmlsdGVyIGNoaWxkcmVuIGFuZCBhcmdzCiAgdmFyIGNoaWxkcmVuID0gYXJncy5maWx0ZXIoZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4gYXJnIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3RvcjsKICB9LCB0aGlzKTsKICBhcmdzID0gYXJncy5maWx0ZXIoZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4gIShhcmcgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKTsKICB9LCB0aGlzKTsKCiAgaWYgKGNoaWxkcmVuLmxlbmd0aCAhPT0gMCkgewogICAgYXNzZXJ0KHN0YXRlLmNoaWxkcmVuID09PSBudWxsKTsKICAgIHN0YXRlLmNoaWxkcmVuID0gY2hpbGRyZW47CgogICAgLy8gUmVwbGFjZSBwYXJlbnQgdG8gbWFpbnRhaW4gYmFja3dhcmQgbGluawogICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkgewogICAgICBjaGlsZC5fYmFzZVN0YXRlLnBhcmVudCA9IHRoaXM7CiAgICB9LCB0aGlzKTsKICB9CiAgaWYgKGFyZ3MubGVuZ3RoICE9PSAwKSB7CiAgICBhc3NlcnQoc3RhdGUuYXJncyA9PT0gbnVsbCk7CiAgICBzdGF0ZS5hcmdzID0gYXJnczsKICAgIHN0YXRlLnJldmVyc2VBcmdzID0gYXJncy5tYXAoZnVuY3Rpb24oYXJnKSB7CiAgICAgIGlmICh0eXBlb2YgYXJnICE9PSAnb2JqZWN0JyB8fCBhcmcuY29uc3RydWN0b3IgIT09IE9iamVjdCkKICAgICAgICByZXR1cm4gYXJnOwoKICAgICAgdmFyIHJlcyA9IHt9OwogICAgICBPYmplY3Qua2V5cyhhcmcpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgaWYgKGtleSA9PSAoa2V5IHwgMCkpCiAgICAgICAgICBrZXkgfD0gMDsKICAgICAgICB2YXIgdmFsdWUgPSBhcmdba2V5XTsKICAgICAgICByZXNbdmFsdWVdID0ga2V5OwogICAgICB9KTsKICAgICAgcmV0dXJuIHJlczsKICAgIH0pOwogIH0KfTsKCi8vCi8vIE92ZXJyaWRlZCBtZXRob2RzCi8vCgpvdmVycmlkZWQuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICBOb2RlLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gX292ZXJyaWRlZCgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICAgIHRocm93IG5ldyBFcnJvcihtZXRob2QgKyAnIG5vdCBpbXBsZW1lbnRlZCBmb3IgZW5jb2Rpbmc6ICcgKyBzdGF0ZS5lbmMpOwogIH07Cn0pOwoKLy8KLy8gUHVibGljIG1ldGhvZHMKLy8KCnRhZ3MuZm9yRWFjaChmdW5jdGlvbih0YWcpIHsKICBOb2RlLnByb3RvdHlwZVt0YWddID0gZnVuY3Rpb24gX3RhZ01ldGhvZCgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKCiAgICBhc3NlcnQoc3RhdGUudGFnID09PSBudWxsKTsKICAgIHN0YXRlLnRhZyA9IHRhZzsKCiAgICB0aGlzLl91c2VBcmdzKGFyZ3MpOwoKICAgIHJldHVybiB0aGlzOwogIH07Cn0pOwoKTm9kZS5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gdXNlKGl0ZW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS51c2UgPT09IG51bGwpOwogIHN0YXRlLnVzZSA9IGl0ZW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUub3B0aW9uYWwgPSBmdW5jdGlvbiBvcHRpb25hbCgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIHN0YXRlLm9wdGlvbmFsID0gdHJ1ZTsKCiAgcmV0dXJuIHRoaXM7Cn07CgpOb2RlLnByb3RvdHlwZS5kZWYgPSBmdW5jdGlvbiBkZWYodmFsKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICBhc3NlcnQoc3RhdGVbJ2RlZmF1bHQnXSA9PT0gbnVsbCk7CiAgc3RhdGVbJ2RlZmF1bHQnXSA9IHZhbDsKICBzdGF0ZS5vcHRpb25hbCA9IHRydWU7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuZXhwbGljaXQgPSBmdW5jdGlvbiBleHBsaWNpdChudW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5leHBsaWNpdCA9PT0gbnVsbCAmJiBzdGF0ZS5pbXBsaWNpdCA9PT0gbnVsbCk7CiAgc3RhdGUuZXhwbGljaXQgPSBudW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuaW1wbGljaXQgPSBmdW5jdGlvbiBpbXBsaWNpdChudW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5leHBsaWNpdCA9PT0gbnVsbCAmJiBzdGF0ZS5pbXBsaWNpdCA9PT0gbnVsbCk7CiAgc3RhdGUuaW1wbGljaXQgPSBudW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUub2JqID0gZnVuY3Rpb24gb2JqKCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CgogIHN0YXRlLm9iaiA9IHRydWU7CgogIGlmIChhcmdzLmxlbmd0aCAhPT0gMCkKICAgIHRoaXMuX3VzZUFyZ3MoYXJncyk7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUua2V5ID0gZnVuY3Rpb24ga2V5KG5ld0tleSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLmtleSA9PT0gbnVsbCk7CiAgc3RhdGUua2V5ID0gbmV3S2V5OwoKICByZXR1cm4gdGhpczsKfTsKCk5vZGUucHJvdG90eXBlLmFueSA9IGZ1bmN0aW9uIGFueSgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIHN0YXRlLmFueSA9IHRydWU7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuY2hvaWNlID0gZnVuY3Rpb24gY2hvaWNlKG9iaikgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLmNob2ljZSA9PT0gbnVsbCk7CiAgc3RhdGUuY2hvaWNlID0gb2JqOwogIHRoaXMuX3VzZUFyZ3MoT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24oa2V5KSB7CiAgICByZXR1cm4gb2JqW2tleV07CiAgfSkpOwoKICByZXR1cm4gdGhpczsKfTsKCk5vZGUucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gY29udGFpbnMoaXRlbSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLnVzZSA9PT0gbnVsbCk7CiAgc3RhdGUuY29udGFpbnMgPSBpdGVtOwoKICByZXR1cm4gdGhpczsKfTsKCi8vCi8vIERlY29kaW5nCi8vCgpOb2RlLnByb3RvdHlwZS5fZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAvLyBEZWNvZGUgcm9vdCBub2RlCiAgaWYgKHN0YXRlLnBhcmVudCA9PT0gbnVsbCkKICAgIHJldHVybiBpbnB1dC53cmFwUmVzdWx0KHN0YXRlLmNoaWxkcmVuWzBdLl9kZWNvZGUoaW5wdXQpKTsKCiAgdmFyIHJlc3VsdCA9IHN0YXRlWydkZWZhdWx0J107CiAgdmFyIHByZXNlbnQgPSB0cnVlOwoKICB2YXIgcHJldktleTsKICBpZiAoc3RhdGUua2V5ICE9PSBudWxsKQogICAgcHJldktleSA9IGlucHV0LmVudGVyS2V5KHN0YXRlLmtleSk7CgogIC8vIENoZWNrIGlmIHRhZyBpcyB0aGVyZQogIGlmIChzdGF0ZS5vcHRpb25hbCkgewogICAgdmFyIHRhZyA9IG51bGw7CiAgICBpZiAoc3RhdGUuZXhwbGljaXQgIT09IG51bGwpCiAgICAgIHRhZyA9IHN0YXRlLmV4cGxpY2l0OwogICAgZWxzZSBpZiAoc3RhdGUuaW1wbGljaXQgIT09IG51bGwpCiAgICAgIHRhZyA9IHN0YXRlLmltcGxpY2l0OwogICAgZWxzZSBpZiAoc3RhdGUudGFnICE9PSBudWxsKQogICAgICB0YWcgPSBzdGF0ZS50YWc7CgogICAgaWYgKHRhZyA9PT0gbnVsbCAmJiAhc3RhdGUuYW55KSB7CiAgICAgIC8vIFRyaWFsIGFuZCBFcnJvcgogICAgICB2YXIgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc3RhdGUuY2hvaWNlID09PSBudWxsKQogICAgICAgICAgdGhpcy5fZGVjb2RlR2VuZXJpYyhzdGF0ZS50YWcsIGlucHV0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB0aGlzLl9kZWNvZGVDaG9pY2UoaW5wdXQpOwogICAgICAgIHByZXNlbnQgPSB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcHJlc2VudCA9IGZhbHNlOwogICAgICB9CiAgICAgIGlucHV0LnJlc3RvcmUoc2F2ZSk7CiAgICB9IGVsc2UgewogICAgICBwcmVzZW50ID0gdGhpcy5fcGVla1RhZyhpbnB1dCwgdGFnLCBzdGF0ZS5hbnkpOwoKICAgICAgaWYgKGlucHV0LmlzRXJyb3IocHJlc2VudCkpCiAgICAgICAgcmV0dXJuIHByZXNlbnQ7CiAgICB9CiAgfQoKICAvLyBQdXNoIG9iamVjdCBvbiBzdGFjawogIHZhciBwcmV2T2JqOwogIGlmIChzdGF0ZS5vYmogJiYgcHJlc2VudCkKICAgIHByZXZPYmogPSBpbnB1dC5lbnRlck9iamVjdCgpOwoKICBpZiAocHJlc2VudCkgewogICAgLy8gVW53cmFwIGV4cGxpY2l0IHZhbHVlcwogICAgaWYgKHN0YXRlLmV4cGxpY2l0ICE9PSBudWxsKSB7CiAgICAgIHZhciBleHBsaWNpdCA9IHRoaXMuX2RlY29kZVRhZyhpbnB1dCwgc3RhdGUuZXhwbGljaXQpOwogICAgICBpZiAoaW5wdXQuaXNFcnJvcihleHBsaWNpdCkpCiAgICAgICAgcmV0dXJuIGV4cGxpY2l0OwogICAgICBpbnB1dCA9IGV4cGxpY2l0OwogICAgfQoKICAgIC8vIFVud3JhcCBpbXBsaWNpdCBhbmQgbm9ybWFsIHZhbHVlcwogICAgaWYgKHN0YXRlLnVzZSA9PT0gbnVsbCAmJiBzdGF0ZS5jaG9pY2UgPT09IG51bGwpIHsKICAgICAgaWYgKHN0YXRlLmFueSkKICAgICAgICB2YXIgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgICAgdmFyIGJvZHkgPSB0aGlzLl9kZWNvZGVUYWcoCiAgICAgICAgaW5wdXQsCiAgICAgICAgc3RhdGUuaW1wbGljaXQgIT09IG51bGwgPyBzdGF0ZS5pbXBsaWNpdCA6IHN0YXRlLnRhZywKICAgICAgICBzdGF0ZS5hbnkKICAgICAgKTsKICAgICAgaWYgKGlucHV0LmlzRXJyb3IoYm9keSkpCiAgICAgICAgcmV0dXJuIGJvZHk7CgogICAgICBpZiAoc3RhdGUuYW55KQogICAgICAgIHJlc3VsdCA9IGlucHV0LnJhdyhzYXZlKTsKICAgICAgZWxzZQogICAgICAgIGlucHV0ID0gYm9keTsKICAgIH0KCiAgICAvLyBTZWxlY3QgcHJvcGVyIG1ldGhvZCBmb3IgdGFnCiAgICBpZiAoc3RhdGUuYW55KQogICAgICByZXN1bHQgPSByZXN1bHQ7CiAgICBlbHNlIGlmIChzdGF0ZS5jaG9pY2UgPT09IG51bGwpCiAgICAgIHJlc3VsdCA9IHRoaXMuX2RlY29kZUdlbmVyaWMoc3RhdGUudGFnLCBpbnB1dCk7CiAgICBlbHNlCiAgICAgIHJlc3VsdCA9IHRoaXMuX2RlY29kZUNob2ljZShpbnB1dCk7CgogICAgaWYgKGlucHV0LmlzRXJyb3IocmVzdWx0KSkKICAgICAgcmV0dXJuIHJlc3VsdDsKCiAgICAvLyBEZWNvZGUgY2hpbGRyZW4KICAgIGlmICghc3RhdGUuYW55ICYmIHN0YXRlLmNob2ljZSA9PT0gbnVsbCAmJiBzdGF0ZS5jaGlsZHJlbiAhPT0gbnVsbCkgewogICAgICB2YXIgZmFpbCA9IHN0YXRlLmNoaWxkcmVuLnNvbWUoZnVuY3Rpb24gZGVjb2RlQ2hpbGRyZW4oY2hpbGQpIHsKICAgICAgICAvLyBOT1RFOiBXZSBhcmUgaWdub3JpbmcgZXJyb3JzIGhlcmUsIHRvIGxldCBwYXJzZXIgY29udGludWUgd2l0aCBvdGhlcgogICAgICAgIC8vIHBhcnRzIG9mIGVuY29kZWQgZGF0YQogICAgICAgIGNoaWxkLl9kZWNvZGUoaW5wdXQpOwogICAgICB9KTsKICAgICAgaWYgKGZhaWwpCiAgICAgICAgcmV0dXJuIGVycjsKICAgIH0KCiAgICAvLyBEZWNvZGUgY29udGFpbmVkL2VuY29kZWQgYnkgc2NoZW1hLCBvbmx5IGluIGJpdCBvciBvY3RldCBzdHJpbmdzCiAgICBpZiAoc3RhdGUuY29udGFpbnMgJiYgKHN0YXRlLnRhZyA9PT0gJ29jdHN0cicgfHwgc3RhdGUudGFnID09PSAnYml0c3RyJykpIHsKICAgICAgdmFyIGRhdGEgPSBuZXcgRGVjb2RlckJ1ZmZlcihyZXN1bHQpOwogICAgICByZXN1bHQgPSB0aGlzLl9nZXRVc2Uoc3RhdGUuY29udGFpbnMsIGlucHV0Ll9yZXBvcnRlclN0YXRlLm9iaikuX2RlY29kZShkYXRhKTsKICAgIH0KICB9CgogIC8vIFBvcCBvYmplY3QKICBpZiAoc3RhdGUub2JqICYmIHByZXNlbnQpCiAgICByZXN1bHQgPSBpbnB1dC5sZWF2ZU9iamVjdChwcmV2T2JqKTsKCiAgLy8gU2V0IGtleQogIGlmIChzdGF0ZS5rZXkgIT09IG51bGwgJiYgKHJlc3VsdCAhPT0gbnVsbCB8fCBwcmVzZW50ID09PSB0cnVlKSkKICAgIGlucHV0LmxlYXZlS2V5KHByZXZLZXksIHN0YXRlLmtleSwgcmVzdWx0KTsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKCk5vZGUucHJvdG90eXBlLl9kZWNvZGVHZW5lcmljID0gZnVuY3Rpb24gZGVjb2RlR2VuZXJpYyh0YWcsIGlucHV0KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICBpZiAodGFnID09PSAnc2VxJyB8fCB0YWcgPT09ICdzZXQnKQogICAgcmV0dXJuIG51bGw7CiAgaWYgKHRhZyA9PT0gJ3NlcW9mJyB8fCB0YWcgPT09ICdzZXRvZicpCiAgICByZXR1cm4gdGhpcy5fZGVjb2RlTGlzdChpbnB1dCwgdGFnLCBzdGF0ZS5hcmdzWzBdKTsKICBlbHNlIGlmICgvc3RyJC8udGVzdCh0YWcpKQogICAgcmV0dXJuIHRoaXMuX2RlY29kZVN0cihpbnB1dCwgdGFnKTsKICBlbHNlIGlmICh0YWcgPT09ICdvYmppZCcgJiYgc3RhdGUuYXJncykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVPYmppZChpbnB1dCwgc3RhdGUuYXJnc1swXSwgc3RhdGUuYXJnc1sxXSk7CiAgZWxzZSBpZiAodGFnID09PSAnb2JqaWQnKQogICAgcmV0dXJuIHRoaXMuX2RlY29kZU9iamlkKGlucHV0LCBudWxsLCBudWxsKTsKICBlbHNlIGlmICh0YWcgPT09ICdnZW50aW1lJyB8fCB0YWcgPT09ICd1dGN0aW1lJykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVUaW1lKGlucHV0LCB0YWcpOwogIGVsc2UgaWYgKHRhZyA9PT0gJ251bGxfJykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVOdWxsKGlucHV0KTsKICBlbHNlIGlmICh0YWcgPT09ICdib29sJykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVCb29sKGlucHV0KTsKICBlbHNlIGlmICh0YWcgPT09ICdpbnQnIHx8IHRhZyA9PT0gJ2VudW0nKQogICAgcmV0dXJuIHRoaXMuX2RlY29kZUludChpbnB1dCwgc3RhdGUuYXJncyAmJiBzdGF0ZS5hcmdzWzBdKTsKICBlbHNlIGlmIChzdGF0ZS51c2UgIT09IG51bGwpCiAgICByZXR1cm4gdGhpcy5fZ2V0VXNlKHN0YXRlLnVzZSwgaW5wdXQuX3JlcG9ydGVyU3RhdGUub2JqKS5fZGVjb2RlKGlucHV0KTsKICBlbHNlCiAgICByZXR1cm4gaW5wdXQuZXJyb3IoJ3Vua25vd24gdGFnOiAnICsgdGFnKTsKCiAgcmV0dXJuIG51bGw7Cn07CgpOb2RlLnByb3RvdHlwZS5fZ2V0VXNlID0gZnVuY3Rpb24gX2dldFVzZShlbnRpdHksIG9iaikgewoKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgLy8gQ3JlYXRlIGFsdGVyZWQgdXNlIGRlY29kZXIgaWYgaW1wbGljaXQgaXMgc2V0CiAgc3RhdGUudXNlRGVjb2RlciA9IHRoaXMuX3VzZShlbnRpdHksIG9iaik7CiAgYXNzZXJ0KHN0YXRlLnVzZURlY29kZXIuX2Jhc2VTdGF0ZS5wYXJlbnQgPT09IG51bGwpOwogIHN0YXRlLnVzZURlY29kZXIgPSBzdGF0ZS51c2VEZWNvZGVyLl9iYXNlU3RhdGUuY2hpbGRyZW5bMF07CiAgaWYgKHN0YXRlLmltcGxpY2l0ICE9PSBzdGF0ZS51c2VEZWNvZGVyLl9iYXNlU3RhdGUuaW1wbGljaXQpIHsKICAgIHN0YXRlLnVzZURlY29kZXIgPSBzdGF0ZS51c2VEZWNvZGVyLmNsb25lKCk7CiAgICBzdGF0ZS51c2VEZWNvZGVyLl9iYXNlU3RhdGUuaW1wbGljaXQgPSBzdGF0ZS5pbXBsaWNpdDsKICB9CiAgcmV0dXJuIHN0YXRlLnVzZURlY29kZXI7Cn07CgpOb2RlLnByb3RvdHlwZS5fZGVjb2RlQ2hvaWNlID0gZnVuY3Rpb24gZGVjb2RlQ2hvaWNlKGlucHV0KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwogIHZhciByZXN1bHQgPSBudWxsOwogIHZhciBtYXRjaCA9IGZhbHNlOwoKICBPYmplY3Qua2V5cyhzdGF0ZS5jaG9pY2UpLnNvbWUoZnVuY3Rpb24oa2V5KSB7CiAgICB2YXIgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgIHZhciBub2RlID0gc3RhdGUuY2hvaWNlW2tleV07CiAgICB0cnkgewogICAgICB2YXIgdmFsdWUgPSBub2RlLl9kZWNvZGUoaW5wdXQpOwogICAgICBpZiAoaW5wdXQuaXNFcnJvcih2YWx1ZSkpCiAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgcmVzdWx0ID0geyB0eXBlOiBrZXksIHZhbHVlOiB2YWx1ZSB9OwogICAgICBtYXRjaCA9IHRydWU7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGlucHV0LnJlc3RvcmUoc2F2ZSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0sIHRoaXMpOwoKICBpZiAoIW1hdGNoKQogICAgcmV0dXJuIGlucHV0LmVycm9yKCdDaG9pY2Ugbm90IG1hdGNoZWQnKTsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKCi8vCi8vIEVuY29kaW5nCi8vCgpOb2RlLnByb3RvdHlwZS5fY3JlYXRlRW5jb2RlckJ1ZmZlciA9IGZ1bmN0aW9uIGNyZWF0ZUVuY29kZXJCdWZmZXIoZGF0YSkgewogIHJldHVybiBuZXcgRW5jb2RlckJ1ZmZlcihkYXRhLCB0aGlzLnJlcG9ydGVyKTsKfTsKCk5vZGUucHJvdG90eXBlLl9lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoZGF0YSwgcmVwb3J0ZXIsIHBhcmVudCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICBpZiAoc3RhdGVbJ2RlZmF1bHQnXSAhPT0gbnVsbCAmJiBzdGF0ZVsnZGVmYXVsdCddID09PSBkYXRhKQogICAgcmV0dXJuOwoKICB2YXIgcmVzdWx0ID0gdGhpcy5fZW5jb2RlVmFsdWUoZGF0YSwgcmVwb3J0ZXIsIHBhcmVudCk7CiAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKQogICAgcmV0dXJuOwoKICBpZiAodGhpcy5fc2tpcERlZmF1bHQocmVzdWx0LCByZXBvcnRlciwgcGFyZW50KSkKICAgIHJldHVybjsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKCk5vZGUucHJvdG90eXBlLl9lbmNvZGVWYWx1ZSA9IGZ1bmN0aW9uIGVuY29kZShkYXRhLCByZXBvcnRlciwgcGFyZW50KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAvLyBEZWNvZGUgcm9vdCBub2RlCiAgaWYgKHN0YXRlLnBhcmVudCA9PT0gbnVsbCkKICAgIHJldHVybiBzdGF0ZS5jaGlsZHJlblswXS5fZW5jb2RlKGRhdGEsIHJlcG9ydGVyIHx8IG5ldyBSZXBvcnRlcigpKTsKCiAgdmFyIHJlc3VsdCA9IG51bGw7CiAgdmFyIHByZXNlbnQgPSB0cnVlOwoKICAvLyBTZXQgcmVwb3J0ZXIgdG8gc2hhcmUgaXQgd2l0aCBhIGNoaWxkIGNsYXNzCiAgdGhpcy5yZXBvcnRlciA9IHJlcG9ydGVyOwoKICAvLyBDaGVjayBpZiBkYXRhIGlzIHRoZXJlCiAgaWYgKHN0YXRlLm9wdGlvbmFsICYmIGRhdGEgPT09IHVuZGVmaW5lZCkgewogICAgaWYgKHN0YXRlWydkZWZhdWx0J10gIT09IG51bGwpCiAgICAgIGRhdGEgPSBzdGF0ZVsnZGVmYXVsdCddCiAgICBlbHNlCiAgICAgIHJldHVybjsKICB9CgogIC8vIEZvciBlcnJvciByZXBvcnRpbmcKICB2YXIgcHJldktleTsKCiAgLy8gRW5jb2RlIGNoaWxkcmVuIGZpcnN0CiAgdmFyIGNvbnRlbnQgPSBudWxsOwogIHZhciBwcmltaXRpdmUgPSBmYWxzZTsKICBpZiAoc3RhdGUuYW55KSB7CiAgICAvLyBBbnl0aGluZyB0aGF0IHdhcyBnaXZlbiBpcyB0cmFuc2xhdGVkIHRvIGJ1ZmZlcgogICAgcmVzdWx0ID0gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihkYXRhKTsKICB9IGVsc2UgaWYgKHN0YXRlLmNob2ljZSkgewogICAgcmVzdWx0ID0gdGhpcy5fZW5jb2RlQ2hvaWNlKGRhdGEsIHJlcG9ydGVyKTsKICB9IGVsc2UgaWYgKHN0YXRlLmNvbnRhaW5zKSB7CiAgICBjb250ZW50ID0gdGhpcy5fZ2V0VXNlKHN0YXRlLmNvbnRhaW5zLCBwYXJlbnQpLl9lbmNvZGUoZGF0YSwgcmVwb3J0ZXIpOwogICAgcHJpbWl0aXZlID0gdHJ1ZTsKICB9IGVsc2UgaWYgKHN0YXRlLmNoaWxkcmVuKSB7CiAgICBjb250ZW50ID0gc3RhdGUuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKGNoaWxkKSB7CiAgICAgIGlmIChjaGlsZC5fYmFzZVN0YXRlLnRhZyA9PT0gJ251bGxfJykKICAgICAgICByZXR1cm4gY2hpbGQuX2VuY29kZShudWxsLCByZXBvcnRlciwgZGF0YSk7CgogICAgICBpZiAoY2hpbGQuX2Jhc2VTdGF0ZS5rZXkgPT09IG51bGwpCiAgICAgICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdDaGlsZCBzaG91bGQgaGF2ZSBhIGtleScpOwogICAgICB2YXIgcHJldktleSA9IHJlcG9ydGVyLmVudGVyS2V5KGNoaWxkLl9iYXNlU3RhdGUua2V5KTsKCiAgICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpCiAgICAgICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdDaGlsZCBleHBlY3RlZCwgYnV0IGlucHV0IGlzIG5vdCBvYmplY3QnKTsKCiAgICAgIHZhciByZXMgPSBjaGlsZC5fZW5jb2RlKGRhdGFbY2hpbGQuX2Jhc2VTdGF0ZS5rZXldLCByZXBvcnRlciwgZGF0YSk7CiAgICAgIHJlcG9ydGVyLmxlYXZlS2V5KHByZXZLZXkpOwoKICAgICAgcmV0dXJuIHJlczsKICAgIH0sIHRoaXMpLmZpbHRlcihmdW5jdGlvbihjaGlsZCkgewogICAgICByZXR1cm4gY2hpbGQ7CiAgICB9KTsKICAgIGNvbnRlbnQgPSB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKGNvbnRlbnQpOwogIH0gZWxzZSB7CiAgICBpZiAoc3RhdGUudGFnID09PSAnc2Vxb2YnIHx8IHN0YXRlLnRhZyA9PT0gJ3NldG9mJykgewogICAgICAvLyBUT0RPKGluZHV0bnkpOiB0aGlzIHNob3VsZCBiZSB0aHJvd24gb24gRFNMIGxldmVsCiAgICAgIGlmICghKHN0YXRlLmFyZ3MgJiYgc3RhdGUuYXJncy5sZW5ndGggPT09IDEpKQogICAgICAgIHJldHVybiByZXBvcnRlci5lcnJvcignVG9vIG1hbnkgYXJncyBmb3IgOiAnICsgc3RhdGUudGFnKTsKCiAgICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSkKICAgICAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ3NlcW9mL3NldG9mLCBidXQgZGF0YSBpcyBub3QgQXJyYXknKTsKCiAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2xvbmUoKTsKICAgICAgY2hpbGQuX2Jhc2VTdGF0ZS5pbXBsaWNpdCA9IG51bGw7CiAgICAgIGNvbnRlbnQgPSB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKGRhdGEubWFwKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogICAgICAgIHJldHVybiB0aGlzLl9nZXRVc2Uoc3RhdGUuYXJnc1swXSwgZGF0YSkuX2VuY29kZShpdGVtLCByZXBvcnRlcik7CiAgICAgIH0sIGNoaWxkKSk7CiAgICB9IGVsc2UgaWYgKHN0YXRlLnVzZSAhPT0gbnVsbCkgewogICAgICByZXN1bHQgPSB0aGlzLl9nZXRVc2Uoc3RhdGUudXNlLCBwYXJlbnQpLl9lbmNvZGUoZGF0YSwgcmVwb3J0ZXIpOwogICAgfSBlbHNlIHsKICAgICAgY29udGVudCA9IHRoaXMuX2VuY29kZVByaW1pdGl2ZShzdGF0ZS50YWcsIGRhdGEpOwogICAgICBwcmltaXRpdmUgPSB0cnVlOwogICAgfQogIH0KCiAgLy8gRW5jb2RlIGRhdGEgaXRzZWxmCiAgdmFyIHJlc3VsdDsKICBpZiAoIXN0YXRlLmFueSAmJiBzdGF0ZS5jaG9pY2UgPT09IG51bGwpIHsKICAgIHZhciB0YWcgPSBzdGF0ZS5pbXBsaWNpdCAhPT0gbnVsbCA/IHN0YXRlLmltcGxpY2l0IDogc3RhdGUudGFnOwogICAgdmFyIGNscyA9IHN0YXRlLmltcGxpY2l0ID09PSBudWxsID8gJ3VuaXZlcnNhbCcgOiAnY29udGV4dCc7CgogICAgaWYgKHRhZyA9PT0gbnVsbCkgewogICAgICBpZiAoc3RhdGUudXNlID09PSBudWxsKQogICAgICAgIHJlcG9ydGVyLmVycm9yKCdUYWcgY291bGQgYmUgb21taXRlZCBvbmx5IGZvciAudXNlKCknKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChzdGF0ZS51c2UgPT09IG51bGwpCiAgICAgICAgcmVzdWx0ID0gdGhpcy5fZW5jb2RlQ29tcG9zaXRlKHRhZywgcHJpbWl0aXZlLCBjbHMsIGNvbnRlbnQpOwogICAgfQogIH0KCiAgLy8gV3JhcCBpbiBleHBsaWNpdAogIGlmIChzdGF0ZS5leHBsaWNpdCAhPT0gbnVsbCkKICAgIHJlc3VsdCA9IHRoaXMuX2VuY29kZUNvbXBvc2l0ZShzdGF0ZS5leHBsaWNpdCwgZmFsc2UsICdjb250ZXh0JywgcmVzdWx0KTsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKCk5vZGUucHJvdG90eXBlLl9lbmNvZGVDaG9pY2UgPSBmdW5jdGlvbiBlbmNvZGVDaG9pY2UoZGF0YSwgcmVwb3J0ZXIpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIHZhciBub2RlID0gc3RhdGUuY2hvaWNlW2RhdGEudHlwZV07CiAgaWYgKCFub2RlKSB7CiAgICBhc3NlcnQoCiAgICAgICAgZmFsc2UsCiAgICAgICAgZGF0YS50eXBlICsgJyBub3QgZm91bmQgaW4gJyArCiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKHN0YXRlLmNob2ljZSkpKTsKICB9CiAgcmV0dXJuIG5vZGUuX2VuY29kZShkYXRhLnZhbHVlLCByZXBvcnRlcik7Cn07CgpOb2RlLnByb3RvdHlwZS5fZW5jb2RlUHJpbWl0aXZlID0gZnVuY3Rpb24gZW5jb2RlUHJpbWl0aXZlKHRhZywgZGF0YSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgaWYgKC9zdHIkLy50ZXN0KHRhZykpCiAgICByZXR1cm4gdGhpcy5fZW5jb2RlU3RyKGRhdGEsIHRhZyk7CiAgZWxzZSBpZiAodGFnID09PSAnb2JqaWQnICYmIHN0YXRlLmFyZ3MpCiAgICByZXR1cm4gdGhpcy5fZW5jb2RlT2JqaWQoZGF0YSwgc3RhdGUucmV2ZXJzZUFyZ3NbMF0sIHN0YXRlLmFyZ3NbMV0pOwogIGVsc2UgaWYgKHRhZyA9PT0gJ29iamlkJykKICAgIHJldHVybiB0aGlzLl9lbmNvZGVPYmppZChkYXRhLCBudWxsLCBudWxsKTsKICBlbHNlIGlmICh0YWcgPT09ICdnZW50aW1lJyB8fCB0YWcgPT09ICd1dGN0aW1lJykKICAgIHJldHVybiB0aGlzLl9lbmNvZGVUaW1lKGRhdGEsIHRhZyk7CiAgZWxzZSBpZiAodGFnID09PSAnbnVsbF8nKQogICAgcmV0dXJuIHRoaXMuX2VuY29kZU51bGwoKTsKICBlbHNlIGlmICh0YWcgPT09ICdpbnQnIHx8IHRhZyA9PT0gJ2VudW0nKQogICAgcmV0dXJuIHRoaXMuX2VuY29kZUludChkYXRhLCBzdGF0ZS5hcmdzICYmIHN0YXRlLnJldmVyc2VBcmdzWzBdKTsKICBlbHNlIGlmICh0YWcgPT09ICdib29sJykKICAgIHJldHVybiB0aGlzLl9lbmNvZGVCb29sKGRhdGEpOwogIGVsc2UKICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgdGFnOiAnICsgdGFnKTsKfTsKCk5vZGUucHJvdG90eXBlLl9pc051bXN0ciA9IGZ1bmN0aW9uIGlzTnVtc3RyKHN0cikgewogIHJldHVybiAvXlswLTkgXSokLy50ZXN0KHN0cik7Cn07CgpOb2RlLnByb3RvdHlwZS5faXNQcmludHN0ciA9IGZ1bmN0aW9uIGlzUHJpbnRzdHIoc3RyKSB7CiAgcmV0dXJuIC9eW0EtWmEtejAtOSAnXChcKVwrLFwtXC5cLzo9XD9dKiQvLnRlc3Qoc3RyKTsKfTsKCn0seyIuLi9iYXNlIjo0LCJtaW5pbWFsaXN0aWMtYXNzZXJ0IjoxMzR9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCmZ1bmN0aW9uIFJlcG9ydGVyKG9wdGlvbnMpIHsKICB0aGlzLl9yZXBvcnRlclN0YXRlID0gewogICAgb2JqOiBudWxsLAogICAgcGF0aDogW10sCiAgICBvcHRpb25zOiBvcHRpb25zIHx8IHt9LAogICAgZXJyb3JzOiBbXQogIH07Cn0KZXhwb3J0cy5SZXBvcnRlciA9IFJlcG9ydGVyOwoKUmVwb3J0ZXIucHJvdG90eXBlLmlzRXJyb3IgPSBmdW5jdGlvbiBpc0Vycm9yKG9iaikgewogIHJldHVybiBvYmogaW5zdGFuY2VvZiBSZXBvcnRlckVycm9yOwp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiBzYXZlKCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CgogIHJldHVybiB7IG9iajogc3RhdGUub2JqLCBwYXRoTGVuOiBzdGF0ZS5wYXRoLmxlbmd0aCB9Owp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbiByZXN0b3JlKGRhdGEpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICBzdGF0ZS5vYmogPSBkYXRhLm9iajsKICBzdGF0ZS5wYXRoID0gc3RhdGUucGF0aC5zbGljZSgwLCBkYXRhLnBhdGhMZW4pOwp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLmVudGVyS2V5ID0gZnVuY3Rpb24gZW50ZXJLZXkoa2V5KSB7CiAgcmV0dXJuIHRoaXMuX3JlcG9ydGVyU3RhdGUucGF0aC5wdXNoKGtleSk7Cn07CgpSZXBvcnRlci5wcm90b3R5cGUubGVhdmVLZXkgPSBmdW5jdGlvbiBsZWF2ZUtleShpbmRleCwga2V5LCB2YWx1ZSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CgogIHN0YXRlLnBhdGggPSBzdGF0ZS5wYXRoLnNsaWNlKDAsIGluZGV4IC0gMSk7CiAgaWYgKHN0YXRlLm9iaiAhPT0gbnVsbCkKICAgIHN0YXRlLm9ialtrZXldID0gdmFsdWU7Cn07CgpSZXBvcnRlci5wcm90b3R5cGUuZW50ZXJPYmplY3QgPSBmdW5jdGlvbiBlbnRlck9iamVjdCgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICB2YXIgcHJldiA9IHN0YXRlLm9iajsKICBzdGF0ZS5vYmogPSB7fTsKICByZXR1cm4gcHJldjsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS5sZWF2ZU9iamVjdCA9IGZ1bmN0aW9uIGxlYXZlT2JqZWN0KHByZXYpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICB2YXIgbm93ID0gc3RhdGUub2JqOwogIHN0YXRlLm9iaiA9IHByZXY7CiAgcmV0dXJuIG5vdzsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIGVycm9yKG1zZykgewogIHZhciBlcnI7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVwb3J0ZXJTdGF0ZTsKCiAgdmFyIGluaGVyaXRlZCA9IG1zZyBpbnN0YW5jZW9mIFJlcG9ydGVyRXJyb3I7CiAgaWYgKGluaGVyaXRlZCkgewogICAgZXJyID0gbXNnOwogIH0gZWxzZSB7CiAgICBlcnIgPSBuZXcgUmVwb3J0ZXJFcnJvcihzdGF0ZS5wYXRoLm1hcChmdW5jdGlvbihlbGVtKSB7CiAgICAgIHJldHVybiAnWycgKyBKU09OLnN0cmluZ2lmeShlbGVtKSArICddJzsKICAgIH0pLmpvaW4oJycpLCBtc2cubWVzc2FnZSB8fCBtc2csIG1zZy5zdGFjayk7CiAgfQoKICBpZiAoIXN0YXRlLm9wdGlvbnMucGFydGlhbCkKICAgIHRocm93IGVycjsKCiAgaWYgKCFpbmhlcml0ZWQpCiAgICBzdGF0ZS5lcnJvcnMucHVzaChlcnIpOwoKICByZXR1cm4gZXJyOwp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLndyYXBSZXN1bHQgPSBmdW5jdGlvbiB3cmFwUmVzdWx0KHJlc3VsdCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CiAgaWYgKCFzdGF0ZS5vcHRpb25zLnBhcnRpYWwpCiAgICByZXR1cm4gcmVzdWx0OwoKICByZXR1cm4gewogICAgcmVzdWx0OiB0aGlzLmlzRXJyb3IocmVzdWx0KSA/IG51bGwgOiByZXN1bHQsCiAgICBlcnJvcnM6IHN0YXRlLmVycm9ycwogIH07Cn07CgpmdW5jdGlvbiBSZXBvcnRlckVycm9yKHBhdGgsIG1zZykgewogIHRoaXMucGF0aCA9IHBhdGg7CiAgdGhpcy5yZXRocm93KG1zZyk7Cn07CmluaGVyaXRzKFJlcG9ydGVyRXJyb3IsIEVycm9yKTsKClJlcG9ydGVyRXJyb3IucHJvdG90eXBlLnJldGhyb3cgPSBmdW5jdGlvbiByZXRocm93KG1zZykgewogIHRoaXMubWVzc2FnZSA9IG1zZyArICcgYXQ6ICcgKyAodGhpcy5wYXRoIHx8ICcoc2hhbGxvdyknKTsKICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBSZXBvcnRlckVycm9yKTsKCiAgcmV0dXJuIHRoaXM7Cn07Cgp9LHsiaW5oZXJpdHMiOjEyOX1dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgY29uc3RhbnRzID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzJyk7CgpleHBvcnRzLnRhZ0NsYXNzID0gewogIDA6ICd1bml2ZXJzYWwnLAogIDE6ICdhcHBsaWNhdGlvbicsCiAgMjogJ2NvbnRleHQnLAogIDM6ICdwcml2YXRlJwp9OwpleHBvcnRzLnRhZ0NsYXNzQnlOYW1lID0gY29uc3RhbnRzLl9yZXZlcnNlKGV4cG9ydHMudGFnQ2xhc3MpOwoKZXhwb3J0cy50YWcgPSB7CiAgMHgwMDogJ2VuZCcsCiAgMHgwMTogJ2Jvb2wnLAogIDB4MDI6ICdpbnQnLAogIDB4MDM6ICdiaXRzdHInLAogIDB4MDQ6ICdvY3RzdHInLAogIDB4MDU6ICdudWxsXycsCiAgMHgwNjogJ29iamlkJywKICAweDA3OiAnb2JqRGVzYycsCiAgMHgwODogJ2V4dGVybmFsJywKICAweDA5OiAncmVhbCcsCiAgMHgwYTogJ2VudW0nLAogIDB4MGI6ICdlbWJlZCcsCiAgMHgwYzogJ3V0ZjhzdHInLAogIDB4MGQ6ICdyZWxhdGl2ZU9pZCcsCiAgMHgxMDogJ3NlcScsCiAgMHgxMTogJ3NldCcsCiAgMHgxMjogJ251bXN0cicsCiAgMHgxMzogJ3ByaW50c3RyJywKICAweDE0OiAndDYxc3RyJywKICAweDE1OiAndmlkZW9zdHInLAogIDB4MTY6ICdpYTVzdHInLAogIDB4MTc6ICd1dGN0aW1lJywKICAweDE4OiAnZ2VudGltZScsCiAgMHgxOTogJ2dyYXBoc3RyJywKICAweDFhOiAnaXNvNjQ2c3RyJywKICAweDFiOiAnZ2Vuc3RyJywKICAweDFjOiAndW5pc3RyJywKICAweDFkOiAnY2hhcnN0cicsCiAgMHgxZTogJ2JtcHN0cicKfTsKZXhwb3J0cy50YWdCeU5hbWUgPSBjb25zdGFudHMuX3JldmVyc2UoZXhwb3J0cy50YWcpOwoKfSx7Ii4uL2NvbnN0YW50cyI6OH1dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgY29uc3RhbnRzID0gZXhwb3J0czsKCi8vIEhlbHBlcgpjb25zdGFudHMuX3JldmVyc2UgPSBmdW5jdGlvbiByZXZlcnNlKG1hcCkgewogIHZhciByZXMgPSB7fTsKCiAgT2JqZWN0LmtleXMobWFwKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgLy8gQ29udmVydCBrZXkgdG8gaW50ZWdlciBpZiBpdCBpcyBzdHJpbmdpZmllZAogICAgaWYgKChrZXkgfCAwKSA9PSBrZXkpCiAgICAgIGtleSA9IGtleSB8IDA7CgogICAgdmFyIHZhbHVlID0gbWFwW2tleV07CiAgICByZXNbdmFsdWVdID0ga2V5OwogIH0pOwoKICByZXR1cm4gcmVzOwp9OwoKY29uc3RhbnRzLmRlciA9IHJlcXVpcmUoJy4vZGVyJyk7Cgp9LHsiLi9kZXIiOjd9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCnZhciBhc24xID0gcmVxdWlyZSgnLi4vLi4vYXNuMScpOwp2YXIgYmFzZSA9IGFzbjEuYmFzZTsKdmFyIGJpZ251bSA9IGFzbjEuYmlnbnVtOwoKLy8gSW1wb3J0IERFUiBjb25zdGFudHMKdmFyIGRlciA9IGFzbjEuY29uc3RhbnRzLmRlcjsKCmZ1bmN0aW9uIERFUkRlY29kZXIoZW50aXR5KSB7CiAgdGhpcy5lbmMgPSAnZGVyJzsKICB0aGlzLm5hbWUgPSBlbnRpdHkubmFtZTsKICB0aGlzLmVudGl0eSA9IGVudGl0eTsKCiAgLy8gQ29uc3RydWN0IGJhc2UgdHJlZQogIHRoaXMudHJlZSA9IG5ldyBERVJOb2RlKCk7CiAgdGhpcy50cmVlLl9pbml0KGVudGl0eS5ib2R5KTsKfTsKbW9kdWxlLmV4cG9ydHMgPSBERVJEZWNvZGVyOwoKREVSRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGRhdGEsIG9wdGlvbnMpIHsKICBpZiAoIShkYXRhIGluc3RhbmNlb2YgYmFzZS5EZWNvZGVyQnVmZmVyKSkKICAgIGRhdGEgPSBuZXcgYmFzZS5EZWNvZGVyQnVmZmVyKGRhdGEsIG9wdGlvbnMpOwoKICByZXR1cm4gdGhpcy50cmVlLl9kZWNvZGUoZGF0YSwgb3B0aW9ucyk7Cn07CgovLyBUcmVlIG1ldGhvZHMKCmZ1bmN0aW9uIERFUk5vZGUocGFyZW50KSB7CiAgYmFzZS5Ob2RlLmNhbGwodGhpcywgJ2RlcicsIHBhcmVudCk7Cn0KaW5oZXJpdHMoREVSTm9kZSwgYmFzZS5Ob2RlKTsKCkRFUk5vZGUucHJvdG90eXBlLl9wZWVrVGFnID0gZnVuY3Rpb24gcGVla1RhZyhidWZmZXIsIHRhZywgYW55KSB7CiAgaWYgKGJ1ZmZlci5pc0VtcHR5KCkpCiAgICByZXR1cm4gZmFsc2U7CgogIHZhciBzdGF0ZSA9IGJ1ZmZlci5zYXZlKCk7CiAgdmFyIGRlY29kZWRUYWcgPSBkZXJEZWNvZGVUYWcoYnVmZmVyLCAnRmFpbGVkIHRvIHBlZWsgdGFnOiAiJyArIHRhZyArICciJyk7CiAgaWYgKGJ1ZmZlci5pc0Vycm9yKGRlY29kZWRUYWcpKQogICAgcmV0dXJuIGRlY29kZWRUYWc7CgogIGJ1ZmZlci5yZXN0b3JlKHN0YXRlKTsKCiAgcmV0dXJuIGRlY29kZWRUYWcudGFnID09PSB0YWcgfHwgZGVjb2RlZFRhZy50YWdTdHIgPT09IHRhZyB8fAogICAgKGRlY29kZWRUYWcudGFnU3RyICsgJ29mJykgPT09IHRhZyB8fCBhbnk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlVGFnID0gZnVuY3Rpb24gZGVjb2RlVGFnKGJ1ZmZlciwgdGFnLCBhbnkpIHsKICB2YXIgZGVjb2RlZFRhZyA9IGRlckRlY29kZVRhZyhidWZmZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZhaWxlZCB0byBkZWNvZGUgdGFnIG9mICInICsgdGFnICsgJyInKTsKICBpZiAoYnVmZmVyLmlzRXJyb3IoZGVjb2RlZFRhZykpCiAgICByZXR1cm4gZGVjb2RlZFRhZzsKCiAgdmFyIGxlbiA9IGRlckRlY29kZUxlbihidWZmZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkVGFnLnByaW1pdGl2ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICdGYWlsZWQgdG8gZ2V0IGxlbmd0aCBvZiAiJyArIHRhZyArICciJyk7CgogIC8vIEZhaWx1cmUKICBpZiAoYnVmZmVyLmlzRXJyb3IobGVuKSkKICAgIHJldHVybiBsZW47CgogIGlmICghYW55ICYmCiAgICAgIGRlY29kZWRUYWcudGFnICE9PSB0YWcgJiYKICAgICAgZGVjb2RlZFRhZy50YWdTdHIgIT09IHRhZyAmJgogICAgICBkZWNvZGVkVGFnLnRhZ1N0ciArICdvZicgIT09IHRhZykgewogICAgcmV0dXJuIGJ1ZmZlci5lcnJvcignRmFpbGVkIHRvIG1hdGNoIHRhZzogIicgKyB0YWcgKyAnIicpOwogIH0KCiAgaWYgKGRlY29kZWRUYWcucHJpbWl0aXZlIHx8IGxlbiAhPT0gbnVsbCkKICAgIHJldHVybiBidWZmZXIuc2tpcChsZW4sICdGYWlsZWQgdG8gbWF0Y2ggYm9keSBvZjogIicgKyB0YWcgKyAnIicpOwoKICAvLyBJbmRlZmluaXRlIGxlbmd0aC4uLiBmaW5kIEVORCB0YWcKICB2YXIgc3RhdGUgPSBidWZmZXIuc2F2ZSgpOwogIHZhciByZXMgPSB0aGlzLl9za2lwVW50aWxFbmQoCiAgICAgIGJ1ZmZlciwKICAgICAgJ0ZhaWxlZCB0byBza2lwIGluZGVmaW5pdGUgbGVuZ3RoIGJvZHk6ICInICsgdGhpcy50YWcgKyAnIicpOwogIGlmIChidWZmZXIuaXNFcnJvcihyZXMpKQogICAgcmV0dXJuIHJlczsKCiAgbGVuID0gYnVmZmVyLm9mZnNldCAtIHN0YXRlLm9mZnNldDsKICBidWZmZXIucmVzdG9yZShzdGF0ZSk7CiAgcmV0dXJuIGJ1ZmZlci5za2lwKGxlbiwgJ0ZhaWxlZCB0byBtYXRjaCBib2R5IG9mOiAiJyArIHRhZyArICciJyk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fc2tpcFVudGlsRW5kID0gZnVuY3Rpb24gc2tpcFVudGlsRW5kKGJ1ZmZlciwgZmFpbCkgewogIHdoaWxlICh0cnVlKSB7CiAgICB2YXIgdGFnID0gZGVyRGVjb2RlVGFnKGJ1ZmZlciwgZmFpbCk7CiAgICBpZiAoYnVmZmVyLmlzRXJyb3IodGFnKSkKICAgICAgcmV0dXJuIHRhZzsKICAgIHZhciBsZW4gPSBkZXJEZWNvZGVMZW4oYnVmZmVyLCB0YWcucHJpbWl0aXZlLCBmYWlsKTsKICAgIGlmIChidWZmZXIuaXNFcnJvcihsZW4pKQogICAgICByZXR1cm4gbGVuOwoKICAgIHZhciByZXM7CiAgICBpZiAodGFnLnByaW1pdGl2ZSB8fCBsZW4gIT09IG51bGwpCiAgICAgIHJlcyA9IGJ1ZmZlci5za2lwKGxlbikKICAgIGVsc2UKICAgICAgcmVzID0gdGhpcy5fc2tpcFVudGlsRW5kKGJ1ZmZlciwgZmFpbCk7CgogICAgLy8gRmFpbHVyZQogICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHJlcykpCiAgICAgIHJldHVybiByZXM7CgogICAgaWYgKHRhZy50YWdTdHIgPT09ICdlbmQnKQogICAgICBicmVhazsKICB9Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlTGlzdCA9IGZ1bmN0aW9uIGRlY29kZUxpc3QoYnVmZmVyLCB0YWcsIGRlY29kZXIpIHsKICB2YXIgcmVzdWx0ID0gW107CiAgd2hpbGUgKCFidWZmZXIuaXNFbXB0eSgpKSB7CiAgICB2YXIgcG9zc2libGVFbmQgPSB0aGlzLl9wZWVrVGFnKGJ1ZmZlciwgJ2VuZCcpOwogICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHBvc3NpYmxlRW5kKSkKICAgICAgcmV0dXJuIHBvc3NpYmxlRW5kOwoKICAgIHZhciByZXMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIsICdkZXInKTsKICAgIGlmIChidWZmZXIuaXNFcnJvcihyZXMpICYmIHBvc3NpYmxlRW5kKQogICAgICBicmVhazsKICAgIHJlc3VsdC5wdXNoKHJlcyk7CiAgfQogIHJldHVybiByZXN1bHQ7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlU3RyID0gZnVuY3Rpb24gZGVjb2RlU3RyKGJ1ZmZlciwgdGFnKSB7CiAgaWYgKHRhZyA9PT0gJ2JpdHN0cicpIHsKICAgIHZhciB1bnVzZWQgPSBidWZmZXIucmVhZFVJbnQ4KCk7CiAgICBpZiAoYnVmZmVyLmlzRXJyb3IodW51c2VkKSkKICAgICAgcmV0dXJuIHVudXNlZDsKICAgIHJldHVybiB7IHVudXNlZDogdW51c2VkLCBkYXRhOiBidWZmZXIucmF3KCkgfTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2JtcHN0cicpIHsKICAgIHZhciByYXcgPSBidWZmZXIucmF3KCk7CiAgICBpZiAocmF3Lmxlbmd0aCAlIDIgPT09IDEpCiAgICAgIHJldHVybiBidWZmZXIuZXJyb3IoJ0RlY29kaW5nIG9mIHN0cmluZyB0eXBlOiBibXBzdHIgbGVuZ3RoIG1pc21hdGNoJyk7CgogICAgdmFyIHN0ciA9ICcnOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYXcubGVuZ3RoIC8gMjsgaSsrKSB7CiAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHJhdy5yZWFkVUludDE2QkUoaSAqIDIpKTsKICAgIH0KICAgIHJldHVybiBzdHI7CiAgfSBlbHNlIGlmICh0YWcgPT09ICdudW1zdHInKSB7CiAgICB2YXIgbnVtc3RyID0gYnVmZmVyLnJhdygpLnRvU3RyaW5nKCdhc2NpaScpOwogICAgaWYgKCF0aGlzLl9pc051bXN0cihudW1zdHIpKSB7CiAgICAgIHJldHVybiBidWZmZXIuZXJyb3IoJ0RlY29kaW5nIG9mIHN0cmluZyB0eXBlOiAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAnbnVtc3RyIHVuc3VwcG9ydGVkIGNoYXJhY3RlcnMnKTsKICAgIH0KICAgIHJldHVybiBudW1zdHI7CiAgfSBlbHNlIGlmICh0YWcgPT09ICdvY3RzdHInKSB7CiAgICByZXR1cm4gYnVmZmVyLnJhdygpOwogIH0gZWxzZSBpZiAodGFnID09PSAncHJpbnRzdHInKSB7CiAgICB2YXIgcHJpbnRzdHIgPSBidWZmZXIucmF3KCkudG9TdHJpbmcoJ2FzY2lpJyk7CiAgICBpZiAoIXRoaXMuX2lzUHJpbnRzdHIocHJpbnRzdHIpKSB7CiAgICAgIHJldHVybiBidWZmZXIuZXJyb3IoJ0RlY29kaW5nIG9mIHN0cmluZyB0eXBlOiAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAncHJpbnRzdHIgdW5zdXBwb3J0ZWQgY2hhcmFjdGVycycpOwogICAgfQogICAgcmV0dXJuIHByaW50c3RyOwogIH0gZWxzZSBpZiAoL3N0ciQvLnRlc3QodGFnKSkgewogICAgcmV0dXJuIGJ1ZmZlci5yYXcoKS50b1N0cmluZygpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyBvZiBzdHJpbmcgdHlwZTogJyArIHRhZyArICcgdW5zdXBwb3J0ZWQnKTsKICB9Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlT2JqaWQgPSBmdW5jdGlvbiBkZWNvZGVPYmppZChidWZmZXIsIHZhbHVlcywgcmVsYXRpdmUpIHsKICB2YXIgcmVzdWx0OwogIHZhciBpZGVudGlmaWVycyA9IFtdOwogIHZhciBpZGVudCA9IDA7CiAgd2hpbGUgKCFidWZmZXIuaXNFbXB0eSgpKSB7CiAgICB2YXIgc3ViaWRlbnQgPSBidWZmZXIucmVhZFVJbnQ4KCk7CiAgICBpZGVudCA8PD0gNzsKICAgIGlkZW50IHw9IHN1YmlkZW50ICYgMHg3ZjsKICAgIGlmICgoc3ViaWRlbnQgJiAweDgwKSA9PT0gMCkgewogICAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50KTsKICAgICAgaWRlbnQgPSAwOwogICAgfQogIH0KICBpZiAoc3ViaWRlbnQgJiAweDgwKQogICAgaWRlbnRpZmllcnMucHVzaChpZGVudCk7CgogIHZhciBmaXJzdCA9IChpZGVudGlmaWVyc1swXSAvIDQwKSB8IDA7CiAgdmFyIHNlY29uZCA9IGlkZW50aWZpZXJzWzBdICUgNDA7CgogIGlmIChyZWxhdGl2ZSkKICAgIHJlc3VsdCA9IGlkZW50aWZpZXJzOwogIGVsc2UKICAgIHJlc3VsdCA9IFtmaXJzdCwgc2Vjb25kXS5jb25jYXQoaWRlbnRpZmllcnMuc2xpY2UoMSkpOwoKICBpZiAodmFsdWVzKSB7CiAgICB2YXIgdG1wID0gdmFsdWVzW3Jlc3VsdC5qb2luKCcgJyldOwogICAgaWYgKHRtcCA9PT0gdW5kZWZpbmVkKQogICAgICB0bXAgPSB2YWx1ZXNbcmVzdWx0LmpvaW4oJy4nKV07CiAgICBpZiAodG1wICE9PSB1bmRlZmluZWQpCiAgICAgIHJlc3VsdCA9IHRtcDsKICB9CgogIHJldHVybiByZXN1bHQ7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlVGltZSA9IGZ1bmN0aW9uIGRlY29kZVRpbWUoYnVmZmVyLCB0YWcpIHsKICB2YXIgc3RyID0gYnVmZmVyLnJhdygpLnRvU3RyaW5nKCk7CiAgaWYgKHRhZyA9PT0gJ2dlbnRpbWUnKSB7CiAgICB2YXIgeWVhciA9IHN0ci5zbGljZSgwLCA0KSB8IDA7CiAgICB2YXIgbW9uID0gc3RyLnNsaWNlKDQsIDYpIHwgMDsKICAgIHZhciBkYXkgPSBzdHIuc2xpY2UoNiwgOCkgfCAwOwogICAgdmFyIGhvdXIgPSBzdHIuc2xpY2UoOCwgMTApIHwgMDsKICAgIHZhciBtaW4gPSBzdHIuc2xpY2UoMTAsIDEyKSB8IDA7CiAgICB2YXIgc2VjID0gc3RyLnNsaWNlKDEyLCAxNCkgfCAwOwogIH0gZWxzZSBpZiAodGFnID09PSAndXRjdGltZScpIHsKICAgIHZhciB5ZWFyID0gc3RyLnNsaWNlKDAsIDIpIHwgMDsKICAgIHZhciBtb24gPSBzdHIuc2xpY2UoMiwgNCkgfCAwOwogICAgdmFyIGRheSA9IHN0ci5zbGljZSg0LCA2KSB8IDA7CiAgICB2YXIgaG91ciA9IHN0ci5zbGljZSg2LCA4KSB8IDA7CiAgICB2YXIgbWluID0gc3RyLnNsaWNlKDgsIDEwKSB8IDA7CiAgICB2YXIgc2VjID0gc3RyLnNsaWNlKDEwLCAxMikgfCAwOwogICAgaWYgKHllYXIgPCA3MCkKICAgICAgeWVhciA9IDIwMDAgKyB5ZWFyOwogICAgZWxzZQogICAgICB5ZWFyID0gMTkwMCArIHllYXI7CiAgfSBlbHNlIHsKICAgIHJldHVybiBidWZmZXIuZXJyb3IoJ0RlY29kaW5nICcgKyB0YWcgKyAnIHRpbWUgaXMgbm90IHN1cHBvcnRlZCB5ZXQnKTsKICB9CgogIHJldHVybiBEYXRlLlVUQyh5ZWFyLCBtb24gLSAxLCBkYXksIGhvdXIsIG1pbiwgc2VjLCAwKTsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9kZWNvZGVOdWxsID0gZnVuY3Rpb24gZGVjb2RlTnVsbChidWZmZXIpIHsKICByZXR1cm4gbnVsbDsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9kZWNvZGVCb29sID0gZnVuY3Rpb24gZGVjb2RlQm9vbChidWZmZXIpIHsKICB2YXIgcmVzID0gYnVmZmVyLnJlYWRVSW50OCgpOwogIGlmIChidWZmZXIuaXNFcnJvcihyZXMpKQogICAgcmV0dXJuIHJlczsKICBlbHNlCiAgICByZXR1cm4gcmVzICE9PSAwOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZUludCA9IGZ1bmN0aW9uIGRlY29kZUludChidWZmZXIsIHZhbHVlcykgewogIC8vIEJpZ2ludCwgcmV0dXJuIGFzIGl0IGlzIChhc3N1bWUgYmlnIGVuZGlhbikKICB2YXIgcmF3ID0gYnVmZmVyLnJhdygpOwogIHZhciByZXMgPSBuZXcgYmlnbnVtKHJhdyk7CgogIGlmICh2YWx1ZXMpCiAgICByZXMgPSB2YWx1ZXNbcmVzLnRvU3RyaW5nKDEwKV0gfHwgcmVzOwoKICByZXR1cm4gcmVzOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX3VzZSA9IGZ1bmN0aW9uIHVzZShlbnRpdHksIG9iaikgewogIGlmICh0eXBlb2YgZW50aXR5ID09PSAnZnVuY3Rpb24nKQogICAgZW50aXR5ID0gZW50aXR5KG9iaik7CiAgcmV0dXJuIGVudGl0eS5fZ2V0RGVjb2RlcignZGVyJykudHJlZTsKfTsKCi8vIFV0aWxpdHkgbWV0aG9kcwoKZnVuY3Rpb24gZGVyRGVjb2RlVGFnKGJ1ZiwgZmFpbCkgewogIHZhciB0YWcgPSBidWYucmVhZFVJbnQ4KGZhaWwpOwogIGlmIChidWYuaXNFcnJvcih0YWcpKQogICAgcmV0dXJuIHRhZzsKCiAgdmFyIGNscyA9IGRlci50YWdDbGFzc1t0YWcgPj4gNl07CiAgdmFyIHByaW1pdGl2ZSA9ICh0YWcgJiAweDIwKSA9PT0gMDsKCiAgLy8gTXVsdGktb2N0ZXQgdGFnIC0gbG9hZAogIGlmICgodGFnICYgMHgxZikgPT09IDB4MWYpIHsKICAgIHZhciBvY3QgPSB0YWc7CiAgICB0YWcgPSAwOwogICAgd2hpbGUgKChvY3QgJiAweDgwKSA9PT0gMHg4MCkgewogICAgICBvY3QgPSBidWYucmVhZFVJbnQ4KGZhaWwpOwogICAgICBpZiAoYnVmLmlzRXJyb3Iob2N0KSkKICAgICAgICByZXR1cm4gb2N0OwoKICAgICAgdGFnIDw8PSA3OwogICAgICB0YWcgfD0gb2N0ICYgMHg3ZjsKICAgIH0KICB9IGVsc2UgewogICAgdGFnICY9IDB4MWY7CiAgfQogIHZhciB0YWdTdHIgPSBkZXIudGFnW3RhZ107CgogIHJldHVybiB7CiAgICBjbHM6IGNscywKICAgIHByaW1pdGl2ZTogcHJpbWl0aXZlLAogICAgdGFnOiB0YWcsCiAgICB0YWdTdHI6IHRhZ1N0cgogIH07Cn0KCmZ1bmN0aW9uIGRlckRlY29kZUxlbihidWYsIHByaW1pdGl2ZSwgZmFpbCkgewogIHZhciBsZW4gPSBidWYucmVhZFVJbnQ4KGZhaWwpOwogIGlmIChidWYuaXNFcnJvcihsZW4pKQogICAgcmV0dXJuIGxlbjsKCiAgLy8gSW5kZWZpbml0ZSBmb3JtCiAgaWYgKCFwcmltaXRpdmUgJiYgbGVuID09PSAweDgwKQogICAgcmV0dXJuIG51bGw7CgogIC8vIERlZmluaXRlIGZvcm0KICBpZiAoKGxlbiAmIDB4ODApID09PSAwKSB7CiAgICAvLyBTaG9ydCBmb3JtCiAgICByZXR1cm4gbGVuOwogIH0KCiAgLy8gTG9uZyBmb3JtCiAgdmFyIG51bSA9IGxlbiAmIDB4N2Y7CiAgaWYgKG51bSA+PSA0KQogICAgcmV0dXJuIGJ1Zi5lcnJvcignbGVuZ3RoIG9jdGVjdCBpcyB0b28gbG9uZycpOwoKICBsZW4gPSAwOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtOyBpKyspIHsKICAgIGxlbiA8PD0gODsKICAgIHZhciBqID0gYnVmLnJlYWRVSW50OChmYWlsKTsKICAgIGlmIChidWYuaXNFcnJvcihqKSkKICAgICAgcmV0dXJuIGo7CiAgICBsZW4gfD0gajsKICB9CgogIHJldHVybiBsZW47Cn0KCn0seyIuLi8uLi9hc24xIjoxLCJpbmhlcml0cyI6MTI5fV0sMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZGVjb2RlcnMgPSBleHBvcnRzOwoKZGVjb2RlcnMuZGVyID0gcmVxdWlyZSgnLi9kZXInKTsKZGVjb2RlcnMucGVtID0gcmVxdWlyZSgnLi9wZW0nKTsKCn0seyIuL2RlciI6OSwiLi9wZW0iOjExfV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwp2YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwoKdmFyIGFzbjEgPSByZXF1aXJlKCcuLi8uLi9hc24xJyk7CnZhciBERVJEZWNvZGVyID0gcmVxdWlyZSgnLi9kZXInKTsKCmZ1bmN0aW9uIFBFTURlY29kZXIoZW50aXR5KSB7CiAgREVSRGVjb2Rlci5jYWxsKHRoaXMsIGVudGl0eSk7CiAgdGhpcy5lbmMgPSAncGVtJzsKfTsKaW5oZXJpdHMoUEVNRGVjb2RlciwgREVSRGVjb2Rlcik7Cm1vZHVsZS5leHBvcnRzID0gUEVNRGVjb2RlcjsKClBFTURlY29kZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShkYXRhLCBvcHRpb25zKSB7CiAgdmFyIGxpbmVzID0gZGF0YS50b1N0cmluZygpLnNwbGl0KC9bXHJcbl0rL2cpOwoKICB2YXIgbGFiZWwgPSBvcHRpb25zLmxhYmVsLnRvVXBwZXJDYXNlKCk7CgogIHZhciByZSA9IC9eLS0tLS0oQkVHSU58RU5EKSAoW14tXSspLS0tLS0kLzsKICB2YXIgc3RhcnQgPSAtMTsKICB2YXIgZW5kID0gLTE7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgewogICAgdmFyIG1hdGNoID0gbGluZXNbaV0ubWF0Y2gocmUpOwogICAgaWYgKG1hdGNoID09PSBudWxsKQogICAgICBjb250aW51ZTsKCiAgICBpZiAobWF0Y2hbMl0gIT09IGxhYmVsKQogICAgICBjb250aW51ZTsKCiAgICBpZiAoc3RhcnQgPT09IC0xKSB7CiAgICAgIGlmIChtYXRjaFsxXSAhPT0gJ0JFR0lOJykKICAgICAgICBicmVhazsKICAgICAgc3RhcnQgPSBpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKG1hdGNoWzFdICE9PSAnRU5EJykKICAgICAgICBicmVhazsKICAgICAgZW5kID0gaTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIGlmIChzdGFydCA9PT0gLTEgfHwgZW5kID09PSAtMSkKICAgIHRocm93IG5ldyBFcnJvcignUEVNIHNlY3Rpb24gbm90IGZvdW5kIGZvcjogJyArIGxhYmVsKTsKCiAgdmFyIGJhc2U2NCA9IGxpbmVzLnNsaWNlKHN0YXJ0ICsgMSwgZW5kKS5qb2luKCcnKTsKICAvLyBSZW1vdmUgZXhjZXNzaXZlIHN5bWJvbHMKICBiYXNlNjQucmVwbGFjZSgvW15hLXowLTlcK1wvPV0rL2dpLCAnJyk7CgogIHZhciBpbnB1dCA9IG5ldyBCdWZmZXIoYmFzZTY0LCAnYmFzZTY0Jyk7CiAgcmV0dXJuIERFUkRlY29kZXIucHJvdG90eXBlLmRlY29kZS5jYWxsKHRoaXMsIGlucHV0LCBvcHRpb25zKTsKfTsKCn0seyIuLi8uLi9hc24xIjoxLCIuL2RlciI6OSwiYnVmZmVyIjo3NiwiaW5oZXJpdHMiOjEyOX1dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKCnZhciBhc24xID0gcmVxdWlyZSgnLi4vLi4vYXNuMScpOwp2YXIgYmFzZSA9IGFzbjEuYmFzZTsKdmFyIGJpZ251bSA9IGFzbjEuYmlnbnVtOwoKLy8gSW1wb3J0IERFUiBjb25zdGFudHMKdmFyIGRlciA9IGFzbjEuY29uc3RhbnRzLmRlcjsKCmZ1bmN0aW9uIERFUkVuY29kZXIoZW50aXR5KSB7CiAgdGhpcy5lbmMgPSAnZGVyJzsKICB0aGlzLm5hbWUgPSBlbnRpdHkubmFtZTsKICB0aGlzLmVudGl0eSA9IGVudGl0eTsKCiAgLy8gQ29uc3RydWN0IGJhc2UgdHJlZQogIHRoaXMudHJlZSA9IG5ldyBERVJOb2RlKCk7CiAgdGhpcy50cmVlLl9pbml0KGVudGl0eS5ib2R5KTsKfTsKbW9kdWxlLmV4cG9ydHMgPSBERVJFbmNvZGVyOwoKREVSRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKGRhdGEsIHJlcG9ydGVyKSB7CiAgcmV0dXJuIHRoaXMudHJlZS5fZW5jb2RlKGRhdGEsIHJlcG9ydGVyKS5qb2luKCk7Cn07CgovLyBUcmVlIG1ldGhvZHMKCmZ1bmN0aW9uIERFUk5vZGUocGFyZW50KSB7CiAgYmFzZS5Ob2RlLmNhbGwodGhpcywgJ2RlcicsIHBhcmVudCk7Cn0KaW5oZXJpdHMoREVSTm9kZSwgYmFzZS5Ob2RlKTsKCkRFUk5vZGUucHJvdG90eXBlLl9lbmNvZGVDb21wb3NpdGUgPSBmdW5jdGlvbiBlbmNvZGVDb21wb3NpdGUodGFnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCkgewogIHZhciBlbmNvZGVkVGFnID0gZW5jb2RlVGFnKHRhZywgcHJpbWl0aXZlLCBjbHMsIHRoaXMucmVwb3J0ZXIpOwoKICAvLyBTaG9ydCBmb3JtCiAgaWYgKGNvbnRlbnQubGVuZ3RoIDwgMHg4MCkgewogICAgdmFyIGhlYWRlciA9IG5ldyBCdWZmZXIoMik7CiAgICBoZWFkZXJbMF0gPSBlbmNvZGVkVGFnOwogICAgaGVhZGVyWzFdID0gY29udGVudC5sZW5ndGg7CiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihbIGhlYWRlciwgY29udGVudCBdKTsKICB9CgogIC8vIExvbmcgZm9ybQogIC8vIENvdW50IG9jdGV0cyByZXF1aXJlZCB0byBzdG9yZSBsZW5ndGgKICB2YXIgbGVuT2N0ZXRzID0gMTsKICBmb3IgKHZhciBpID0gY29udGVudC5sZW5ndGg7IGkgPj0gMHgxMDA7IGkgPj49IDgpCiAgICBsZW5PY3RldHMrKzsKCiAgdmFyIGhlYWRlciA9IG5ldyBCdWZmZXIoMSArIDEgKyBsZW5PY3RldHMpOwogIGhlYWRlclswXSA9IGVuY29kZWRUYWc7CiAgaGVhZGVyWzFdID0gMHg4MCB8IGxlbk9jdGV0czsKCiAgZm9yICh2YXIgaSA9IDEgKyBsZW5PY3RldHMsIGogPSBjb250ZW50Lmxlbmd0aDsgaiA+IDA7IGktLSwgaiA+Pj0gOCkKICAgIGhlYWRlcltpXSA9IGogJiAweGZmOwoKICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihbIGhlYWRlciwgY29udGVudCBdKTsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9lbmNvZGVTdHIgPSBmdW5jdGlvbiBlbmNvZGVTdHIoc3RyLCB0YWcpIHsKICBpZiAodGFnID09PSAnYml0c3RyJykgewogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoWyBzdHIudW51c2VkIHwgMCwgc3RyLmRhdGEgXSk7CiAgfSBlbHNlIGlmICh0YWcgPT09ICdibXBzdHInKSB7CiAgICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdHIubGVuZ3RoICogMik7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewogICAgICBidWYud3JpdGVVSW50MTZCRShzdHIuY2hhckNvZGVBdChpKSwgaSAqIDIpOwogICAgfQogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoYnVmKTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ251bXN0cicpIHsKICAgIGlmICghdGhpcy5faXNOdW1zdHIoc3RyKSkgewogICAgICByZXR1cm4gdGhpcy5yZXBvcnRlci5lcnJvcignRW5jb2Rpbmcgb2Ygc3RyaW5nIHR5cGU6IG51bXN0ciBzdXBwb3J0cyAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29ubHkgZGlnaXRzIGFuZCBzcGFjZScpOwogICAgfQogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoc3RyKTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3ByaW50c3RyJykgewogICAgaWYgKCF0aGlzLl9pc1ByaW50c3RyKHN0cikpIHsKICAgICAgcmV0dXJuIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ0VuY29kaW5nIG9mIHN0cmluZyB0eXBlOiBwcmludHN0ciBzdXBwb3J0cyAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29ubHkgbGF0aW4gdXBwZXIgYW5kIGxvd2VyIGNhc2UgbGV0dGVycywgJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaWdpdHMsIHNwYWNlLCBhcG9zdHJvcGhlLCBsZWZ0IGFuZCByaWd0aCAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BhcmVudGhlc2lzLCBwbHVzIHNpZ24sIGNvbW1hLCBoeXBoZW4sICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZG90LCBzbGFzaCwgY29sb24sIGVxdWFsIHNpZ24sICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncXVlc3Rpb24gbWFyaycpOwogICAgfQogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoc3RyKTsKICB9IGVsc2UgaWYgKC9zdHIkLy50ZXN0KHRhZykpIHsKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKHN0cik7CiAgfSBlbHNlIHsKICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdFbmNvZGluZyBvZiBzdHJpbmcgdHlwZTogJyArIHRhZyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHVuc3VwcG9ydGVkJyk7CiAgfQp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2VuY29kZU9iamlkID0gZnVuY3Rpb24gZW5jb2RlT2JqaWQoaWQsIHZhbHVlcywgcmVsYXRpdmUpIHsKICBpZiAodHlwZW9mIGlkID09PSAnc3RyaW5nJykgewogICAgaWYgKCF2YWx1ZXMpCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdzdHJpbmcgb2JqaWQgZ2l2ZW4sIGJ1dCBubyB2YWx1ZXMgbWFwIGZvdW5kJyk7CiAgICBpZiAoIXZhbHVlcy5oYXNPd25Qcm9wZXJ0eShpZCkpCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdvYmppZCBub3QgZm91bmQgaW4gdmFsdWVzIG1hcCcpOwogICAgaWQgPSB2YWx1ZXNbaWRdLnNwbGl0KC9bXHNcLl0rL2cpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZC5sZW5ndGg7IGkrKykKICAgICAgaWRbaV0gfD0gMDsKICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaWQpKSB7CiAgICBpZCA9IGlkLnNsaWNlKCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlkLmxlbmd0aDsgaSsrKQogICAgICBpZFtpXSB8PSAwOwogIH0KCiAgaWYgKCFBcnJheS5pc0FycmF5KGlkKSkgewogICAgcmV0dXJuIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ29iamlkKCkgc2hvdWxkIGJlIGVpdGhlciBhcnJheSBvciBzdHJpbmcsICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2dvdDogJyArIEpTT04uc3RyaW5naWZ5KGlkKSk7CiAgfQoKICBpZiAoIXJlbGF0aXZlKSB7CiAgICBpZiAoaWRbMV0gPj0gNDApCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdTZWNvbmQgb2JqaWQgaWRlbnRpZmllciBPT0InKTsKICAgIGlkLnNwbGljZSgwLCAyLCBpZFswXSAqIDQwICsgaWRbMV0pOwogIH0KCiAgLy8gQ291bnQgbnVtYmVyIG9mIG9jdGV0cwogIHZhciBzaXplID0gMDsKICBmb3IgKHZhciBpID0gMDsgaSA8IGlkLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgaWRlbnQgPSBpZFtpXTsKICAgIGZvciAoc2l6ZSsrOyBpZGVudCA+PSAweDgwOyBpZGVudCA+Pj0gNykKICAgICAgc2l6ZSsrOwogIH0KCiAgdmFyIG9iamlkID0gbmV3IEJ1ZmZlcihzaXplKTsKICB2YXIgb2Zmc2V0ID0gb2JqaWQubGVuZ3RoIC0gMTsKICBmb3IgKHZhciBpID0gaWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIHZhciBpZGVudCA9IGlkW2ldOwogICAgb2JqaWRbb2Zmc2V0LS1dID0gaWRlbnQgJiAweDdmOwogICAgd2hpbGUgKChpZGVudCA+Pj0gNykgPiAwKQogICAgICBvYmppZFtvZmZzZXQtLV0gPSAweDgwIHwgKGlkZW50ICYgMHg3Zik7CiAgfQoKICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihvYmppZCk7Cn07CgpmdW5jdGlvbiB0d28obnVtKSB7CiAgaWYgKG51bSA8IDEwKQogICAgcmV0dXJuICcwJyArIG51bTsKICBlbHNlCiAgICByZXR1cm4gbnVtOwp9CgpERVJOb2RlLnByb3RvdHlwZS5fZW5jb2RlVGltZSA9IGZ1bmN0aW9uIGVuY29kZVRpbWUodGltZSwgdGFnKSB7CiAgdmFyIHN0cjsKICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpOwoKICBpZiAodGFnID09PSAnZ2VudGltZScpIHsKICAgIHN0ciA9IFsKICAgICAgdHdvKGRhdGUuZ2V0RnVsbFllYXIoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ01vbnRoKCkgKyAxKSwKICAgICAgdHdvKGRhdGUuZ2V0VVRDRGF0ZSgpKSwKICAgICAgdHdvKGRhdGUuZ2V0VVRDSG91cnMoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ01pbnV0ZXMoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ1NlY29uZHMoKSksCiAgICAgICdaJwogICAgXS5qb2luKCcnKTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3V0Y3RpbWUnKSB7CiAgICBzdHIgPSBbCiAgICAgIHR3byhkYXRlLmdldEZ1bGxZZWFyKCkgJSAxMDApLAogICAgICB0d28oZGF0ZS5nZXRVVENNb250aCgpICsgMSksCiAgICAgIHR3byhkYXRlLmdldFVUQ0RhdGUoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ0hvdXJzKCkpLAogICAgICB0d28oZGF0ZS5nZXRVVENNaW51dGVzKCkpLAogICAgICB0d28oZGF0ZS5nZXRVVENTZWNvbmRzKCkpLAogICAgICAnWicKICAgIF0uam9pbignJyk7CiAgfSBlbHNlIHsKICAgIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ0VuY29kaW5nICcgKyB0YWcgKyAnIHRpbWUgaXMgbm90IHN1cHBvcnRlZCB5ZXQnKTsKICB9CgogIHJldHVybiB0aGlzLl9lbmNvZGVTdHIoc3RyLCAnb2N0c3RyJyk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZW5jb2RlTnVsbCA9IGZ1bmN0aW9uIGVuY29kZU51bGwoKSB7CiAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoJycpOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2VuY29kZUludCA9IGZ1bmN0aW9uIGVuY29kZUludChudW0sIHZhbHVlcykgewogIGlmICh0eXBlb2YgbnVtID09PSAnc3RyaW5nJykgewogICAgaWYgKCF2YWx1ZXMpCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdTdHJpbmcgaW50IG9yIGVudW0gZ2l2ZW4sIGJ1dCBubyB2YWx1ZXMgbWFwJyk7CiAgICBpZiAoIXZhbHVlcy5oYXNPd25Qcm9wZXJ0eShudW0pKSB7CiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdWYWx1ZXMgbWFwIGRvZXNuXCd0IGNvbnRhaW46ICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShudW0pKTsKICAgIH0KICAgIG51bSA9IHZhbHVlc1tudW1dOwogIH0KCiAgLy8gQmlnbnVtLCBhc3N1bWUgYmlnIGVuZGlhbgogIGlmICh0eXBlb2YgbnVtICE9PSAnbnVtYmVyJyAmJiAhQnVmZmVyLmlzQnVmZmVyKG51bSkpIHsKICAgIHZhciBudW1BcnJheSA9IG51bS50b0FycmF5KCk7CiAgICBpZiAoIW51bS5zaWduICYmIG51bUFycmF5WzBdICYgMHg4MCkgewogICAgICBudW1BcnJheS51bnNoaWZ0KDApOwogICAgfQogICAgbnVtID0gbmV3IEJ1ZmZlcihudW1BcnJheSk7CiAgfQoKICBpZiAoQnVmZmVyLmlzQnVmZmVyKG51bSkpIHsKICAgIHZhciBzaXplID0gbnVtLmxlbmd0aDsKICAgIGlmIChudW0ubGVuZ3RoID09PSAwKQogICAgICBzaXplKys7CgogICAgdmFyIG91dCA9IG5ldyBCdWZmZXIoc2l6ZSk7CiAgICBudW0uY29weShvdXQpOwogICAgaWYgKG51bS5sZW5ndGggPT09IDApCiAgICAgIG91dFswXSA9IDAKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKG91dCk7CiAgfQoKICBpZiAobnVtIDwgMHg4MCkKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKG51bSk7CgogIGlmIChudW0gPCAweDEwMCkKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKFswLCBudW1dKTsKCiAgdmFyIHNpemUgPSAxOwogIGZvciAodmFyIGkgPSBudW07IGkgPj0gMHgxMDA7IGkgPj49IDgpCiAgICBzaXplKys7CgogIHZhciBvdXQgPSBuZXcgQXJyYXkoc2l6ZSk7CiAgZm9yICh2YXIgaSA9IG91dC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgb3V0W2ldID0gbnVtICYgMHhmZjsKICAgIG51bSA+Pj0gODsKICB9CiAgaWYob3V0WzBdICYgMHg4MCkgewogICAgb3V0LnVuc2hpZnQoMCk7CiAgfQoKICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihuZXcgQnVmZmVyKG91dCkpOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2VuY29kZUJvb2wgPSBmdW5jdGlvbiBlbmNvZGVCb29sKHZhbHVlKSB7CiAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIodmFsdWUgPyAweGZmIDogMCk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fdXNlID0gZnVuY3Rpb24gdXNlKGVudGl0eSwgb2JqKSB7CiAgaWYgKHR5cGVvZiBlbnRpdHkgPT09ICdmdW5jdGlvbicpCiAgICBlbnRpdHkgPSBlbnRpdHkob2JqKTsKICByZXR1cm4gZW50aXR5Ll9nZXRFbmNvZGVyKCdkZXInKS50cmVlOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX3NraXBEZWZhdWx0ID0gZnVuY3Rpb24gc2tpcERlZmF1bHQoZGF0YUJ1ZmZlciwgcmVwb3J0ZXIsIHBhcmVudCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICB2YXIgaTsKICBpZiAoc3RhdGVbJ2RlZmF1bHQnXSA9PT0gbnVsbCkKICAgIHJldHVybiBmYWxzZTsKCiAgdmFyIGRhdGEgPSBkYXRhQnVmZmVyLmpvaW4oKTsKICBpZiAoc3RhdGUuZGVmYXVsdEJ1ZmZlciA9PT0gdW5kZWZpbmVkKQogICAgc3RhdGUuZGVmYXVsdEJ1ZmZlciA9IHRoaXMuX2VuY29kZVZhbHVlKHN0YXRlWydkZWZhdWx0J10sIHJlcG9ydGVyLCBwYXJlbnQpLmpvaW4oKTsKCiAgaWYgKGRhdGEubGVuZ3RoICE9PSBzdGF0ZS5kZWZhdWx0QnVmZmVyLmxlbmd0aCkKICAgIHJldHVybiBmYWxzZTsKCiAgZm9yIChpPTA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKQogICAgaWYgKGRhdGFbaV0gIT09IHN0YXRlLmRlZmF1bHRCdWZmZXJbaV0pCiAgICAgIHJldHVybiBmYWxzZTsKCiAgcmV0dXJuIHRydWU7Cn07CgovLyBVdGlsaXR5IG1ldGhvZHMKCmZ1bmN0aW9uIGVuY29kZVRhZyh0YWcsIHByaW1pdGl2ZSwgY2xzLCByZXBvcnRlcikgewogIHZhciByZXM7CgogIGlmICh0YWcgPT09ICdzZXFvZicpCiAgICB0YWcgPSAnc2VxJzsKICBlbHNlIGlmICh0YWcgPT09ICdzZXRvZicpCiAgICB0YWcgPSAnc2V0JzsKCiAgaWYgKGRlci50YWdCeU5hbWUuaGFzT3duUHJvcGVydHkodGFnKSkKICAgIHJlcyA9IGRlci50YWdCeU5hbWVbdGFnXTsKICBlbHNlIGlmICh0eXBlb2YgdGFnID09PSAnbnVtYmVyJyAmJiAodGFnIHwgMCkgPT09IHRhZykKICAgIHJlcyA9IHRhZzsKICBlbHNlCiAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ1Vua25vd24gdGFnOiAnICsgdGFnKTsKCiAgaWYgKHJlcyA+PSAweDFmKQogICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdNdWx0aS1vY3RldCB0YWcgZW5jb2RpbmcgdW5zdXBwb3J0ZWQnKTsKCiAgaWYgKCFwcmltaXRpdmUpCiAgICByZXMgfD0gMHgyMDsKCiAgcmVzIHw9IChkZXIudGFnQ2xhc3NCeU5hbWVbY2xzIHx8ICd1bml2ZXJzYWwnXSA8PCA2KTsKCiAgcmV0dXJuIHJlczsKfQoKfSx7Ii4uLy4uL2FzbjEiOjEsImJ1ZmZlciI6NzYsImluaGVyaXRzIjoxMjl9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBlbmNvZGVycyA9IGV4cG9ydHM7CgplbmNvZGVycy5kZXIgPSByZXF1aXJlKCcuL2RlcicpOwplbmNvZGVycy5wZW0gPSByZXF1aXJlKCcuL3BlbScpOwoKfSx7Ii4vZGVyIjoxMiwiLi9wZW0iOjE0fV0sMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwp2YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwoKdmFyIGFzbjEgPSByZXF1aXJlKCcuLi8uLi9hc24xJyk7CnZhciBERVJFbmNvZGVyID0gcmVxdWlyZSgnLi9kZXInKTsKCmZ1bmN0aW9uIFBFTUVuY29kZXIoZW50aXR5KSB7CiAgREVSRW5jb2Rlci5jYWxsKHRoaXMsIGVudGl0eSk7CiAgdGhpcy5lbmMgPSAncGVtJzsKfTsKaW5oZXJpdHMoUEVNRW5jb2RlciwgREVSRW5jb2Rlcik7Cm1vZHVsZS5leHBvcnRzID0gUEVNRW5jb2RlcjsKClBFTUVuY29kZXIucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShkYXRhLCBvcHRpb25zKSB7CiAgdmFyIGJ1ZiA9IERFUkVuY29kZXIucHJvdG90eXBlLmVuY29kZS5jYWxsKHRoaXMsIGRhdGEpOwoKICB2YXIgcCA9IGJ1Zi50b1N0cmluZygnYmFzZTY0Jyk7CiAgdmFyIG91dCA9IFsgJy0tLS0tQkVHSU4gJyArIG9wdGlvbnMubGFiZWwgKyAnLS0tLS0nIF07CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSArPSA2NCkKICAgIG91dC5wdXNoKHAuc2xpY2UoaSwgaSArIDY0KSk7CiAgb3V0LnB1c2goJy0tLS0tRU5EICcgKyBvcHRpb25zLmxhYmVsICsgJy0tLS0tJyk7CiAgcmV0dXJuIG91dC5qb2luKCdcbicpOwp9OwoKfSx7Ii4uLy4uL2FzbjEiOjEsIi4vZGVyIjoxMiwiYnVmZmVyIjo3NiwiaW5oZXJpdHMiOjEyOX1dLDE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvVW5pdF9UZXN0aW5nLzEuMAovLwovLyBUSElTIElTIE5PVCBURVNURUQgTk9SIExJS0VMWSBUTyBXT1JLIE9VVFNJREUgVjghCi8vCi8vIE9yaWdpbmFsbHkgZnJvbSBuYXJ3aGFsLmpzIChodHRwOi8vbmFyd2hhbGpzLm9yZykKLy8gQ29weXJpZ2h0IChjKSAyMDA5IFRob21hcyBSb2JpbnNvbiA8Mjgwbm9ydGguY29tPgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5Ci8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0bwovLyBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZQovLyByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3IKLy8gc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAovLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKLy8gQVVUSE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4KLy8gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTgovLyBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCi8vIHdoZW4gdXNlZCBpbiBub2RlLCB0aGlzIHdpbGwgYWN0dWFsbHkgbG9hZCB0aGUgdXRpbCBtb2R1bGUgd2UgZGVwZW5kIG9uCi8vIHZlcnN1cyBsb2FkaW5nIHRoZSBidWlsdGluIHV0aWwgbW9kdWxlIGFzIGhhcHBlbnMgb3RoZXJ3aXNlCi8vIHRoaXMgaXMgYSBidWcgaW4gbm9kZSBtb2R1bGUgbG9hZGluZyBhcyBmYXIgYXMgSSBhbSBjb25jZXJuZWQKdmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsLycpOwoKdmFyIHBTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsKdmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7CgovLyAxLiBUaGUgYXNzZXJ0IG1vZHVsZSBwcm92aWRlcyBmdW5jdGlvbnMgdGhhdCB0aHJvdwovLyBBc3NlcnRpb25FcnJvcidzIHdoZW4gcGFydGljdWxhciBjb25kaXRpb25zIGFyZSBub3QgbWV0LiBUaGUKLy8gYXNzZXJ0IG1vZHVsZSBtdXN0IGNvbmZvcm0gdG8gdGhlIGZvbGxvd2luZyBpbnRlcmZhY2UuCgp2YXIgYXNzZXJ0ID0gbW9kdWxlLmV4cG9ydHMgPSBvazsKCi8vIDIuIFRoZSBBc3NlcnRpb25FcnJvciBpcyBkZWZpbmVkIGluIGFzc2VydC4KLy8gbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7IG1lc3NhZ2U6IG1lc3NhZ2UsCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IGFjdHVhbCwKLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZCB9KQoKYXNzZXJ0LkFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gQXNzZXJ0aW9uRXJyb3Iob3B0aW9ucykgewogIHRoaXMubmFtZSA9ICdBc3NlcnRpb25FcnJvcic7CiAgdGhpcy5hY3R1YWwgPSBvcHRpb25zLmFjdHVhbDsKICB0aGlzLmV4cGVjdGVkID0gb3B0aW9ucy5leHBlY3RlZDsKICB0aGlzLm9wZXJhdG9yID0gb3B0aW9ucy5vcGVyYXRvcjsKICBpZiAob3B0aW9ucy5tZXNzYWdlKSB7CiAgICB0aGlzLm1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2U7CiAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSBmYWxzZTsKICB9IGVsc2UgewogICAgdGhpcy5tZXNzYWdlID0gZ2V0TWVzc2FnZSh0aGlzKTsKICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IHRydWU7CiAgfQogIHZhciBzdGFja1N0YXJ0RnVuY3Rpb24gPSBvcHRpb25zLnN0YWNrU3RhcnRGdW5jdGlvbiB8fCBmYWlsOwoKICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHsKICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHN0YWNrU3RhcnRGdW5jdGlvbik7CiAgfQogIGVsc2UgewogICAgLy8gbm9uIHY4IGJyb3dzZXJzIHNvIHdlIGNhbiBoYXZlIGEgc3RhY2t0cmFjZQogICAgdmFyIGVyciA9IG5ldyBFcnJvcigpOwogICAgaWYgKGVyci5zdGFjaykgewogICAgICB2YXIgb3V0ID0gZXJyLnN0YWNrOwoKICAgICAgLy8gdHJ5IHRvIHN0cmlwIHVzZWxlc3MgZnJhbWVzCiAgICAgIHZhciBmbl9uYW1lID0gc3RhY2tTdGFydEZ1bmN0aW9uLm5hbWU7CiAgICAgIHZhciBpZHggPSBvdXQuaW5kZXhPZignXG4nICsgZm5fbmFtZSk7CiAgICAgIGlmIChpZHggPj0gMCkgewogICAgICAgIC8vIG9uY2Ugd2UgaGF2ZSBsb2NhdGVkIHRoZSBmdW5jdGlvbiBmcmFtZQogICAgICAgIC8vIHdlIG5lZWQgdG8gc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYmVmb3JlIGl0IChhbmQgaXRzIGxpbmUpCiAgICAgICAgdmFyIG5leHRfbGluZSA9IG91dC5pbmRleE9mKCdcbicsIGlkeCArIDEpOwogICAgICAgIG91dCA9IG91dC5zdWJzdHJpbmcobmV4dF9saW5lICsgMSk7CiAgICAgIH0KCiAgICAgIHRoaXMuc3RhY2sgPSBvdXQ7CiAgICB9CiAgfQp9OwoKLy8gYXNzZXJ0LkFzc2VydGlvbkVycm9yIGluc3RhbmNlb2YgRXJyb3IKdXRpbC5pbmhlcml0cyhhc3NlcnQuQXNzZXJ0aW9uRXJyb3IsIEVycm9yKTsKCmZ1bmN0aW9uIHJlcGxhY2VyKGtleSwgdmFsdWUpIHsKICBpZiAodXRpbC5pc1VuZGVmaW5lZCh2YWx1ZSkpIHsKICAgIHJldHVybiAnJyArIHZhbHVlOwogIH0KICBpZiAodXRpbC5pc051bWJlcih2YWx1ZSkgJiYgIWlzRmluaXRlKHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7CiAgfQogIGlmICh1dGlsLmlzRnVuY3Rpb24odmFsdWUpIHx8IHV0aWwuaXNSZWdFeHAodmFsdWUpKSB7CiAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTsKICB9CiAgcmV0dXJuIHZhbHVlOwp9CgpmdW5jdGlvbiB0cnVuY2F0ZShzLCBuKSB7CiAgaWYgKHV0aWwuaXNTdHJpbmcocykpIHsKICAgIHJldHVybiBzLmxlbmd0aCA8IG4gPyBzIDogcy5zbGljZSgwLCBuKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHM7CiAgfQp9CgpmdW5jdGlvbiBnZXRNZXNzYWdlKHNlbGYpIHsKICByZXR1cm4gdHJ1bmNhdGUoSlNPTi5zdHJpbmdpZnkoc2VsZi5hY3R1YWwsIHJlcGxhY2VyKSwgMTI4KSArICcgJyArCiAgICAgICAgIHNlbGYub3BlcmF0b3IgKyAnICcgKwogICAgICAgICB0cnVuY2F0ZShKU09OLnN0cmluZ2lmeShzZWxmLmV4cGVjdGVkLCByZXBsYWNlciksIDEyOCk7Cn0KCi8vIEF0IHByZXNlbnQgb25seSB0aGUgdGhyZWUga2V5cyBtZW50aW9uZWQgYWJvdmUgYXJlIHVzZWQgYW5kCi8vIHVuZGVyc3Rvb2QgYnkgdGhlIHNwZWMuIEltcGxlbWVudGF0aW9ucyBvciBzdWIgbW9kdWxlcyBjYW4gcGFzcwovLyBvdGhlciBrZXlzIHRvIHRoZSBBc3NlcnRpb25FcnJvcidzIGNvbnN0cnVjdG9yIC0gdGhleSB3aWxsIGJlCi8vIGlnbm9yZWQuCgovLyAzLiBBbGwgb2YgdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgbXVzdCB0aHJvdyBhbiBBc3NlcnRpb25FcnJvcgovLyB3aGVuIGEgY29ycmVzcG9uZGluZyBjb25kaXRpb24gaXMgbm90IG1ldCwgd2l0aCBhIG1lc3NhZ2UgdGhhdAovLyBtYXkgYmUgdW5kZWZpbmVkIGlmIG5vdCBwcm92aWRlZC4gIEFsbCBhc3NlcnRpb24gbWV0aG9kcyBwcm92aWRlCi8vIGJvdGggdGhlIGFjdHVhbCBhbmQgZXhwZWN0ZWQgdmFsdWVzIHRvIHRoZSBhc3NlcnRpb24gZXJyb3IgZm9yCi8vIGRpc3BsYXkgcHVycG9zZXMuCgpmdW5jdGlvbiBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wZXJhdG9yLCBzdGFja1N0YXJ0RnVuY3Rpb24pIHsKICB0aHJvdyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHsKICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICBhY3R1YWw6IGFjdHVhbCwKICAgIGV4cGVjdGVkOiBleHBlY3RlZCwKICAgIG9wZXJhdG9yOiBvcGVyYXRvciwKICAgIHN0YWNrU3RhcnRGdW5jdGlvbjogc3RhY2tTdGFydEZ1bmN0aW9uCiAgfSk7Cn0KCi8vIEVYVEVOU0lPTiEgYWxsb3dzIGZvciB3ZWxsIGJlaGF2ZWQgZXJyb3JzIGRlZmluZWQgZWxzZXdoZXJlLgphc3NlcnQuZmFpbCA9IGZhaWw7CgovLyA0LiBQdXJlIGFzc2VydGlvbiB0ZXN0cyB3aGV0aGVyIGEgdmFsdWUgaXMgdHJ1dGh5LCBhcyBkZXRlcm1pbmVkCi8vIGJ5ICEhZ3VhcmQuCi8vIGFzc2VydC5vayhndWFyZCwgbWVzc2FnZV9vcHQpOwovLyBUaGlzIHN0YXRlbWVudCBpcyBlcXVpdmFsZW50IHRvIGFzc2VydC5lcXVhbCh0cnVlLCAhIWd1YXJkLAovLyBtZXNzYWdlX29wdCk7LiBUbyB0ZXN0IHN0cmljdGx5IGZvciB0aGUgdmFsdWUgdHJ1ZSwgdXNlCi8vIGFzc2VydC5zdHJpY3RFcXVhbCh0cnVlLCBndWFyZCwgbWVzc2FnZV9vcHQpOy4KCmZ1bmN0aW9uIG9rKHZhbHVlLCBtZXNzYWdlKSB7CiAgaWYgKCF2YWx1ZSkgZmFpbCh2YWx1ZSwgdHJ1ZSwgbWVzc2FnZSwgJz09JywgYXNzZXJ0Lm9rKTsKfQphc3NlcnQub2sgPSBvazsKCi8vIDUuIFRoZSBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc2hhbGxvdywgY29lcmNpdmUgZXF1YWxpdHkgd2l0aAovLyA9PS4KLy8gYXNzZXJ0LmVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTsKCmFzc2VydC5lcXVhbCA9IGZ1bmN0aW9uIGVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZiAoYWN0dWFsICE9IGV4cGVjdGVkKSBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5lcXVhbCk7Cn07CgovLyA2LiBUaGUgbm9uLWVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBmb3Igd2hldGhlciB0d28gb2JqZWN0cyBhcmUgbm90IGVxdWFsCi8vIHdpdGggIT0gYXNzZXJ0Lm5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTsKCmFzc2VydC5ub3RFcXVhbCA9IGZ1bmN0aW9uIG5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZiAoYWN0dWFsID09IGV4cGVjdGVkKSB7CiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICchPScsIGFzc2VydC5ub3RFcXVhbCk7CiAgfQp9OwoKLy8gNy4gVGhlIGVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBhIGRlZXAgZXF1YWxpdHkgcmVsYXRpb24uCi8vIGFzc2VydC5kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpOwoKYXNzZXJ0LmRlZXBFcXVhbCA9IGZ1bmN0aW9uIGRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYgKCFfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQpKSB7CiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdkZWVwRXF1YWwnLCBhc3NlcnQuZGVlcEVxdWFsKTsKICB9Cn07CgpmdW5jdGlvbiBfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQpIHsKICAvLyA3LjEuIEFsbCBpZGVudGljYWwgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS4KICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkgewogICAgcmV0dXJuIHRydWU7CgogIH0gZWxzZSBpZiAodXRpbC5pc0J1ZmZlcihhY3R1YWwpICYmIHV0aWwuaXNCdWZmZXIoZXhwZWN0ZWQpKSB7CiAgICBpZiAoYWN0dWFsLmxlbmd0aCAhPSBleHBlY3RlZC5sZW5ndGgpIHJldHVybiBmYWxzZTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFjdHVhbC5sZW5ndGg7IGkrKykgewogICAgICBpZiAoYWN0dWFsW2ldICE9PSBleHBlY3RlZFtpXSkgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiB0cnVlOwoKICAvLyA3LjIuIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIERhdGUgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzCiAgLy8gZXF1aXZhbGVudCBpZiBpdCBpcyBhbHNvIGEgRGF0ZSBvYmplY3QgdGhhdCByZWZlcnMgdG8gdGhlIHNhbWUgdGltZS4KICB9IGVsc2UgaWYgKHV0aWwuaXNEYXRlKGFjdHVhbCkgJiYgdXRpbC5pc0RhdGUoZXhwZWN0ZWQpKSB7CiAgICByZXR1cm4gYWN0dWFsLmdldFRpbWUoKSA9PT0gZXhwZWN0ZWQuZ2V0VGltZSgpOwoKICAvLyA3LjMgSWYgdGhlIGV4cGVjdGVkIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpcwogIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIFJlZ0V4cCBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzb3VyY2UgYW5kCiAgLy8gcHJvcGVydGllcyAoYGdsb2JhbGAsIGBtdWx0aWxpbmVgLCBgbGFzdEluZGV4YCwgYGlnbm9yZUNhc2VgKS4KICB9IGVsc2UgaWYgKHV0aWwuaXNSZWdFeHAoYWN0dWFsKSAmJiB1dGlsLmlzUmVnRXhwKGV4cGVjdGVkKSkgewogICAgcmV0dXJuIGFjdHVhbC5zb3VyY2UgPT09IGV4cGVjdGVkLnNvdXJjZSAmJgogICAgICAgICAgIGFjdHVhbC5nbG9iYWwgPT09IGV4cGVjdGVkLmdsb2JhbCAmJgogICAgICAgICAgIGFjdHVhbC5tdWx0aWxpbmUgPT09IGV4cGVjdGVkLm11bHRpbGluZSAmJgogICAgICAgICAgIGFjdHVhbC5sYXN0SW5kZXggPT09IGV4cGVjdGVkLmxhc3RJbmRleCAmJgogICAgICAgICAgIGFjdHVhbC5pZ25vcmVDYXNlID09PSBleHBlY3RlZC5pZ25vcmVDYXNlOwoKICAvLyA3LjQuIE90aGVyIHBhaXJzIHRoYXQgZG8gbm90IGJvdGggcGFzcyB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcsCiAgLy8gZXF1aXZhbGVuY2UgaXMgZGV0ZXJtaW5lZCBieSA9PS4KICB9IGVsc2UgaWYgKCF1dGlsLmlzT2JqZWN0KGFjdHVhbCkgJiYgIXV0aWwuaXNPYmplY3QoZXhwZWN0ZWQpKSB7CiAgICByZXR1cm4gYWN0dWFsID09IGV4cGVjdGVkOwoKICAvLyA3LjUgRm9yIGFsbCBvdGhlciBPYmplY3QgcGFpcnMsIGluY2x1ZGluZyBBcnJheSBvYmplY3RzLCBlcXVpdmFsZW5jZSBpcwogIC8vIGRldGVybWluZWQgYnkgaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChhcyB2ZXJpZmllZAogIC8vIHdpdGggT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKSwgdGhlIHNhbWUgc2V0IG9mIGtleXMKICAvLyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwgZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5CiAgLy8gY29ycmVzcG9uZGluZyBrZXksIGFuZCBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuIE5vdGU6IHRoaXMKICAvLyBhY2NvdW50cyBmb3IgYm90aCBuYW1lZCBhbmQgaW5kZXhlZCBwcm9wZXJ0aWVzIG9uIEFycmF5cy4KICB9IGVsc2UgewogICAgcmV0dXJuIG9iakVxdWl2KGFjdHVhbCwgZXhwZWN0ZWQpOwogIH0KfQoKZnVuY3Rpb24gaXNBcmd1bWVudHMob2JqZWN0KSB7CiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nOwp9CgpmdW5jdGlvbiBvYmpFcXVpdihhLCBiKSB7CiAgaWYgKHV0aWwuaXNOdWxsT3JVbmRlZmluZWQoYSkgfHwgdXRpbC5pc051bGxPclVuZGVmaW5lZChiKSkKICAgIHJldHVybiBmYWxzZTsKICAvLyBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuCiAgaWYgKGEucHJvdG90eXBlICE9PSBiLnByb3RvdHlwZSkgcmV0dXJuIGZhbHNlOwogIC8vIGlmIG9uZSBpcyBhIHByaW1pdGl2ZSwgdGhlIG90aGVyIG11c3QgYmUgc2FtZQogIGlmICh1dGlsLmlzUHJpbWl0aXZlKGEpIHx8IHV0aWwuaXNQcmltaXRpdmUoYikpIHsKICAgIHJldHVybiBhID09PSBiOwogIH0KICB2YXIgYUlzQXJncyA9IGlzQXJndW1lbnRzKGEpLAogICAgICBiSXNBcmdzID0gaXNBcmd1bWVudHMoYik7CiAgaWYgKChhSXNBcmdzICYmICFiSXNBcmdzKSB8fCAoIWFJc0FyZ3MgJiYgYklzQXJncykpCiAgICByZXR1cm4gZmFsc2U7CiAgaWYgKGFJc0FyZ3MpIHsKICAgIGEgPSBwU2xpY2UuY2FsbChhKTsKICAgIGIgPSBwU2xpY2UuY2FsbChiKTsKICAgIHJldHVybiBfZGVlcEVxdWFsKGEsIGIpOwogIH0KICB2YXIga2EgPSBvYmplY3RLZXlzKGEpLAogICAgICBrYiA9IG9iamVjdEtleXMoYiksCiAgICAgIGtleSwgaTsKICAvLyBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGtleXMgaW5jb3Jwb3JhdGVzCiAgLy8gaGFzT3duUHJvcGVydHkpCiAgaWYgKGthLmxlbmd0aCAhPSBrYi5sZW5ndGgpCiAgICByZXR1cm4gZmFsc2U7CiAgLy90aGUgc2FtZSBzZXQgb2Yga2V5cyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwKICBrYS5zb3J0KCk7CiAga2Iuc29ydCgpOwogIC8vfn5+Y2hlYXAga2V5IHRlc3QKICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgaWYgKGthW2ldICE9IGtiW2ldKQogICAgICByZXR1cm4gZmFsc2U7CiAgfQogIC8vZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5IGNvcnJlc3BvbmRpbmcga2V5LCBhbmQKICAvL35+fnBvc3NpYmx5IGV4cGVuc2l2ZSBkZWVwIHRlc3QKICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAga2V5ID0ga2FbaV07CiAgICBpZiAoIV9kZWVwRXF1YWwoYVtrZXldLCBiW2tleV0pKSByZXR1cm4gZmFsc2U7CiAgfQogIHJldHVybiB0cnVlOwp9CgovLyA4LiBUaGUgbm9uLWVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBmb3IgYW55IGRlZXAgaW5lcXVhbGl0eS4KLy8gYXNzZXJ0Lm5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7Cgphc3NlcnQubm90RGVlcEVxdWFsID0gZnVuY3Rpb24gbm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZiAoX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkKSkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnbm90RGVlcEVxdWFsJywgYXNzZXJ0Lm5vdERlZXBFcXVhbCk7CiAgfQp9OwoKLy8gOS4gVGhlIHN0cmljdCBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc3RyaWN0IGVxdWFsaXR5LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS4KLy8gYXNzZXJ0LnN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTsKCmFzc2VydC5zdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIHN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZCkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT09JywgYXNzZXJ0LnN0cmljdEVxdWFsKTsKICB9Cn07CgovLyAxMC4gVGhlIHN0cmljdCBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciBzdHJpY3QgaW5lcXVhbGl0eSwgYXMKLy8gZGV0ZXJtaW5lZCBieSAhPT0uICBhc3NlcnQubm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpOwoKYXNzZXJ0Lm5vdFN0cmljdEVxdWFsID0gZnVuY3Rpb24gbm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkgewogIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7CiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICchPT0nLCBhc3NlcnQubm90U3RyaWN0RXF1YWwpOwogIH0KfTsKCmZ1bmN0aW9uIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHsKICBpZiAoIWFjdHVhbCB8fCAhZXhwZWN0ZWQpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZXhwZWN0ZWQpID09ICdbb2JqZWN0IFJlZ0V4cF0nKSB7CiAgICByZXR1cm4gZXhwZWN0ZWQudGVzdChhY3R1YWwpOwogIH0gZWxzZSBpZiAoYWN0dWFsIGluc3RhbmNlb2YgZXhwZWN0ZWQpIHsKICAgIHJldHVybiB0cnVlOwogIH0gZWxzZSBpZiAoZXhwZWN0ZWQuY2FsbCh7fSwgYWN0dWFsKSA9PT0gdHJ1ZSkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIF90aHJvd3Moc2hvdWxkVGhyb3csIGJsb2NrLCBleHBlY3RlZCwgbWVzc2FnZSkgewogIHZhciBhY3R1YWw7CgogIGlmICh1dGlsLmlzU3RyaW5nKGV4cGVjdGVkKSkgewogICAgbWVzc2FnZSA9IGV4cGVjdGVkOwogICAgZXhwZWN0ZWQgPSBudWxsOwogIH0KCiAgdHJ5IHsKICAgIGJsb2NrKCk7CiAgfSBjYXRjaCAoZSkgewogICAgYWN0dWFsID0gZTsKICB9CgogIG1lc3NhZ2UgPSAoZXhwZWN0ZWQgJiYgZXhwZWN0ZWQubmFtZSA/ICcgKCcgKyBleHBlY3RlZC5uYW1lICsgJykuJyA6ICcuJykgKwogICAgICAgICAgICAobWVzc2FnZSA/ICcgJyArIG1lc3NhZ2UgOiAnLicpOwoKICBpZiAoc2hvdWxkVGhyb3cgJiYgIWFjdHVhbCkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnTWlzc2luZyBleHBlY3RlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7CiAgfQoKICBpZiAoIXNob3VsZFRocm93ICYmIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB7CiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsICdHb3QgdW53YW50ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpOwogIH0KCiAgaWYgKChzaG91bGRUaHJvdyAmJiBhY3R1YWwgJiYgZXhwZWN0ZWQgJiYKICAgICAgIWV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fCAoIXNob3VsZFRocm93ICYmIGFjdHVhbCkpIHsKICAgIHRocm93IGFjdHVhbDsKICB9Cn0KCi8vIDExLiBFeHBlY3RlZCB0byB0aHJvdyBhbiBlcnJvcjoKLy8gYXNzZXJ0LnRocm93cyhibG9jaywgRXJyb3Jfb3B0LCBtZXNzYWdlX29wdCk7Cgphc3NlcnQudGhyb3dzID0gZnVuY3Rpb24oYmxvY2ssIC8qb3B0aW9uYWwqL2Vycm9yLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7CiAgX3Rocm93cy5hcHBseSh0aGlzLCBbdHJ1ZV0uY29uY2F0KHBTbGljZS5jYWxsKGFyZ3VtZW50cykpKTsKfTsKCi8vIEVYVEVOU0lPTiEgVGhpcyBpcyBhbm5veWluZyB0byB3cml0ZSBvdXRzaWRlIHRoaXMgbW9kdWxlLgphc3NlcnQuZG9lc05vdFRocm93ID0gZnVuY3Rpb24oYmxvY2ssIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHsKICBfdGhyb3dzLmFwcGx5KHRoaXMsIFtmYWxzZV0uY29uY2F0KHBTbGljZS5jYWxsKGFyZ3VtZW50cykpKTsKfTsKCmFzc2VydC5pZkVycm9yID0gZnVuY3Rpb24oZXJyKSB7IGlmIChlcnIpIHt0aHJvdyBlcnI7fX07Cgp2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHsKICB2YXIga2V5cyA9IFtdOwogIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgIGlmIChoYXNPd24uY2FsbChvYmosIGtleSkpIGtleXMucHVzaChrZXkpOwogIH0KICByZXR1cm4ga2V5czsKfTsKCn0seyJ1dGlsLyI6MTc3fV0sMTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCcKCmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheQpleHBvcnRzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5Cgp2YXIgbG9va3VwID0gW10KdmFyIHJldkxvb2t1cCA9IFtdCnZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXkKCmZ1bmN0aW9uIGluaXQgKCkgewogIHZhciBpCiAgdmFyIGNvZGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLycKICB2YXIgbGVuID0gY29kZS5sZW5ndGgKCiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBsb29rdXBbaV0gPSBjb2RlW2ldCiAgfQoKICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHsKICAgIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaQogIH0KICByZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjIKICByZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjMKfQoKaW5pdCgpCgpmdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7CiAgdmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnIKICB2YXIgbGVuID0gYjY0Lmxlbmd0aAoKICBpZiAobGVuICUgNCA+IDApIHsKICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpCiAgfQoKICAvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKQogIC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXQKICAvLyByZXByZXNlbnQgb25lIGJ5dGUKICAvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXMKICAvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlCiAgcGxhY2VIb2xkZXJzID0gYjY0W2xlbiAtIDJdID09PSAnPScgPyAyIDogYjY0W2xlbiAtIDFdID09PSAnPScgPyAxIDogMAoKICAvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKQoKICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzCiAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBsZW4gLSA0IDogbGVuCgogIHZhciBMID0gMAoKICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7CiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV0KICAgIGFycltMKytdID0gKHRtcCAmIDB4RkYwMDAwKSA+PiAxNgogICAgYXJyW0wrK10gPSAodG1wICYgMHhGRjAwKSA+PiA4CiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9CgogIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHsKICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkgewogICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpCiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9CgogIHJldHVybiBhcnIKfQoKZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHsKICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl0KfQoKZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7CiAgdmFyIHRtcAogIHZhciBvdXRwdXQgPSBbXQogIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7CiAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pCiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSkKICB9CiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKQp9CgpmdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkgewogIHZhciB0bXAKICB2YXIgbGVuID0gdWludDgubGVuZ3RoCiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzCiAgdmFyIG91dHB1dCA9ICcnCiAgdmFyIHBhcnRzID0gW10KICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDMKCiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlcgogIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHsKICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpCiAgfQoKICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzCiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHsKICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdCiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAyXQogICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl0KICAgIG91dHB1dCArPSAnPT0nCiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7CiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pCiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAxMF0KICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdCiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXQogICAgb3V0cHV0ICs9ICc9JwogIH0KCiAgcGFydHMucHVzaChvdXRwdXQpCgogIHJldHVybiBwYXJ0cy5qb2luKCcnKQp9Cgp9LHt9XSwxNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGJhc2U2NHVybCA9IG1vZHVsZS5leHBvcnRzOwoKYmFzZTY0dXJsLnVuZXNjYXBlID0gZnVuY3Rpb24gdW5lc2NhcGUgKHN0cikgewogIHJldHVybiAoc3RyICsgQXJyYXkoNSAtIHN0ci5sZW5ndGggJSA0KQogICAgLmpvaW4oJz0nKSkKICAgIC5yZXBsYWNlKC9cLS9nLCAnKycpCiAgICAucmVwbGFjZSgvXy9nLCAnLycpOwp9OwoKYmFzZTY0dXJsLmVzY2FwZSA9IGZ1bmN0aW9uIGVzY2FwZSAoc3RyKSB7CiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cKy9nLCAnLScpCiAgICAucmVwbGFjZSgvXC8vZywgJ18nKQogICAgLnJlcGxhY2UoLz0vZywgJycpOwp9OwoKYmFzZTY0dXJsLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZSAoc3RyKSB7CiAgcmV0dXJuIHRoaXMuZXNjYXBlKG5ldyBCdWZmZXIoc3RyKS50b1N0cmluZygnYmFzZTY0JykpOwp9OwoKYmFzZTY0dXJsLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZSAoc3RyKSB7CiAgcmV0dXJuIG5ldyBCdWZmZXIodGhpcy51bmVzY2FwZShzdHIpLCAnYmFzZTY0JykudG9TdHJpbmcoKTsKfTsKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjc2fV0sMTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAocHVibGljKSBDb25zdHJ1Y3RvcgpmdW5jdGlvbiBCaWdJbnRlZ2VyKGEsIGIsIGMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQmlnSW50ZWdlcikpCiAgICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoYSwgYiwgYykKCiAgaWYgKGEgIT0gbnVsbCkgewogICAgaWYgKCJudW1iZXIiID09IHR5cGVvZiBhKSB0aGlzLmZyb21OdW1iZXIoYSwgYiwgYykKICAgIGVsc2UgaWYgKGIgPT0gbnVsbCAmJiAic3RyaW5nIiAhPSB0eXBlb2YgYSkgdGhpcy5mcm9tU3RyaW5nKGEsIDI1NikKICAgIGVsc2UgdGhpcy5mcm9tU3RyaW5nKGEsIGIpCiAgfQp9Cgp2YXIgcHJvdG8gPSBCaWdJbnRlZ2VyLnByb3RvdHlwZQoKLy8gZHVjay10eXBlZCBpc0JpZ0ludGVnZXIKcHJvdG8uX19iaWdpID0gcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJykudmVyc2lvbgpCaWdJbnRlZ2VyLmlzQmlnSW50ZWdlciA9IGZ1bmN0aW9uIChvYmosIGNoZWNrX3ZlcikgewogIHJldHVybiBvYmogJiYgb2JqLl9fYmlnaSAmJiAoIWNoZWNrX3ZlciB8fCBvYmouX19iaWdpID09PSBwcm90by5fX2JpZ2kpCn0KCi8vIEJpdHMgcGVyIGRpZ2l0CnZhciBkYml0cwoKLy8gYW06IENvbXB1dGUgd19qICs9ICh4KnRoaXNfaSksIHByb3BhZ2F0ZSBjYXJyaWVzLAovLyBjIGlzIGluaXRpYWwgY2FycnksIHJldHVybnMgZmluYWwgY2FycnkuCi8vIGMgPCAzKmR2YWx1ZSwgeCA8IDIqZHZhbHVlLCB0aGlzX2kgPCBkdmFsdWUKLy8gV2UgbmVlZCB0byBzZWxlY3QgdGhlIGZhc3Rlc3Qgb25lIHRoYXQgd29ya3MgaW4gdGhpcyBlbnZpcm9ubWVudC4KCi8vIGFtMTogdXNlIGEgc2luZ2xlIG11bHQgYW5kIGRpdmlkZSB0byBnZXQgdGhlIGhpZ2ggYml0cywKLy8gbWF4IGRpZ2l0IGJpdHMgc2hvdWxkIGJlIDI2IGJlY2F1c2UKLy8gbWF4IGludGVybmFsIHZhbHVlID0gMipkdmFsdWVeMi0yKmR2YWx1ZSAoPCAyXjUzKQpmdW5jdGlvbiBhbTEoaSwgeCwgdywgaiwgYywgbikgewogIHdoaWxlICgtLW4gPj0gMCkgewogICAgdmFyIHYgPSB4ICogdGhpc1tpKytdICsgd1tqXSArIGMKICAgIGMgPSBNYXRoLmZsb29yKHYgLyAweDQwMDAwMDApCiAgICB3W2orK10gPSB2ICYgMHgzZmZmZmZmCiAgfQogIHJldHVybiBjCn0KLy8gYW0yIGF2b2lkcyBhIGJpZyBtdWx0LWFuZC1leHRyYWN0IGNvbXBsZXRlbHkuCi8vIE1heCBkaWdpdCBiaXRzIHNob3VsZCBiZSA8PSAzMCBiZWNhdXNlIHdlIGRvIGJpdHdpc2Ugb3BzCi8vIG9uIHZhbHVlcyB1cCB0byAyKmhkdmFsdWVeMi1oZHZhbHVlLTEgKDwgMl4zMSkKZnVuY3Rpb24gYW0yKGksIHgsIHcsIGosIGMsIG4pIHsKICB2YXIgeGwgPSB4ICYgMHg3ZmZmLAogICAgeGggPSB4ID4+IDE1CiAgd2hpbGUgKC0tbiA+PSAwKSB7CiAgICB2YXIgbCA9IHRoaXNbaV0gJiAweDdmZmYKICAgIHZhciBoID0gdGhpc1tpKytdID4+IDE1CiAgICB2YXIgbSA9IHhoICogbCArIGggKiB4bAogICAgbCA9IHhsICogbCArICgobSAmIDB4N2ZmZikgPDwgMTUpICsgd1tqXSArIChjICYgMHgzZmZmZmZmZikKICAgIGMgPSAobCA+Pj4gMzApICsgKG0gPj4+IDE1KSArIHhoICogaCArIChjID4+PiAzMCkKICAgIHdbaisrXSA9IGwgJiAweDNmZmZmZmZmCiAgfQogIHJldHVybiBjCn0KLy8gQWx0ZXJuYXRlbHksIHNldCBtYXggZGlnaXQgYml0cyB0byAyOCBzaW5jZSBzb21lCi8vIGJyb3dzZXJzIHNsb3cgZG93biB3aGVuIGRlYWxpbmcgd2l0aCAzMi1iaXQgbnVtYmVycy4KZnVuY3Rpb24gYW0zKGksIHgsIHcsIGosIGMsIG4pIHsKICB2YXIgeGwgPSB4ICYgMHgzZmZmLAogICAgeGggPSB4ID4+IDE0CiAgd2hpbGUgKC0tbiA+PSAwKSB7CiAgICB2YXIgbCA9IHRoaXNbaV0gJiAweDNmZmYKICAgIHZhciBoID0gdGhpc1tpKytdID4+IDE0CiAgICB2YXIgbSA9IHhoICogbCArIGggKiB4bAogICAgbCA9IHhsICogbCArICgobSAmIDB4M2ZmZikgPDwgMTQpICsgd1tqXSArIGMKICAgIGMgPSAobCA+PiAyOCkgKyAobSA+PiAxNCkgKyB4aCAqIGgKICAgIHdbaisrXSA9IGwgJiAweGZmZmZmZmYKICB9CiAgcmV0dXJuIGMKfQoKLy8gd3RmPwpCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbSA9IGFtMQpkYml0cyA9IDI2CgpCaWdJbnRlZ2VyLnByb3RvdHlwZS5EQiA9IGRiaXRzCkJpZ0ludGVnZXIucHJvdG90eXBlLkRNID0gKCgxIDw8IGRiaXRzKSAtIDEpCnZhciBEViA9IEJpZ0ludGVnZXIucHJvdG90eXBlLkRWID0gKDEgPDwgZGJpdHMpCgp2YXIgQklfRlAgPSA1MgpCaWdJbnRlZ2VyLnByb3RvdHlwZS5GViA9IE1hdGgucG93KDIsIEJJX0ZQKQpCaWdJbnRlZ2VyLnByb3RvdHlwZS5GMSA9IEJJX0ZQIC0gZGJpdHMKQmlnSW50ZWdlci5wcm90b3R5cGUuRjIgPSAyICogZGJpdHMgLSBCSV9GUAoKLy8gRGlnaXQgY29udmVyc2lvbnMKdmFyIEJJX1JNID0gIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiIKdmFyIEJJX1JDID0gbmV3IEFycmF5KCkKdmFyIHJyLCB2dgpyciA9ICIwIi5jaGFyQ29kZUF0KDApCmZvciAodnYgPSAwOyB2diA8PSA5OyArK3Z2KSBCSV9SQ1tycisrXSA9IHZ2CnJyID0gImEiLmNoYXJDb2RlQXQoMCkKZm9yICh2diA9IDEwOyB2diA8IDM2OyArK3Z2KSBCSV9SQ1tycisrXSA9IHZ2CnJyID0gIkEiLmNoYXJDb2RlQXQoMCkKZm9yICh2diA9IDEwOyB2diA8IDM2OyArK3Z2KSBCSV9SQ1tycisrXSA9IHZ2CgpmdW5jdGlvbiBpbnQyY2hhcihuKSB7CiAgcmV0dXJuIEJJX1JNLmNoYXJBdChuKQp9CgpmdW5jdGlvbiBpbnRBdChzLCBpKSB7CiAgdmFyIGMgPSBCSV9SQ1tzLmNoYXJDb2RlQXQoaSldCiAgcmV0dXJuIChjID09IG51bGwpID8gLTEgOiBjCn0KCi8vIChwcm90ZWN0ZWQpIGNvcHkgdGhpcyB0byByCmZ1bmN0aW9uIGJucENvcHlUbyhyKSB7CiAgZm9yICh2YXIgaSA9IHRoaXMudCAtIDE7IGkgPj0gMDsgLS1pKSByW2ldID0gdGhpc1tpXQogIHIudCA9IHRoaXMudAogIHIucyA9IHRoaXMucwp9CgovLyAocHJvdGVjdGVkKSBzZXQgZnJvbSBpbnRlZ2VyIHZhbHVlIHgsIC1EViA8PSB4IDwgRFYKZnVuY3Rpb24gYm5wRnJvbUludCh4KSB7CiAgdGhpcy50ID0gMQogIHRoaXMucyA9ICh4IDwgMCkgPyAtMSA6IDAKICBpZiAoeCA+IDApIHRoaXNbMF0gPSB4CiAgZWxzZSBpZiAoeCA8IC0xKSB0aGlzWzBdID0geCArIERWCiAgZWxzZSB0aGlzLnQgPSAwCn0KCi8vIHJldHVybiBiaWdpbnQgaW5pdGlhbGl6ZWQgdG8gdmFsdWUKZnVuY3Rpb24gbmJ2KGkpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICByLmZyb21JbnQoaSkKICByZXR1cm4gcgp9CgovLyAocHJvdGVjdGVkKSBzZXQgZnJvbSBzdHJpbmcgYW5kIHJhZGl4CmZ1bmN0aW9uIGJucEZyb21TdHJpbmcocywgYikgewogIHZhciBzZWxmID0gdGhpcwoKICB2YXIgawogIGlmIChiID09IDE2KSBrID0gNAogIGVsc2UgaWYgKGIgPT0gOCkgayA9IDMKICBlbHNlIGlmIChiID09IDI1NikgayA9IDg7IC8vIGJ5dGUgYXJyYXkKICBlbHNlIGlmIChiID09IDIpIGsgPSAxCiAgZWxzZSBpZiAoYiA9PSAzMikgayA9IDUKICBlbHNlIGlmIChiID09IDQpIGsgPSAyCiAgZWxzZSB7CiAgICBzZWxmLmZyb21SYWRpeChzLCBiKQogICAgcmV0dXJuCiAgfQogIHNlbGYudCA9IDAKICBzZWxmLnMgPSAwCiAgdmFyIGkgPSBzLmxlbmd0aCwKICAgIG1pID0gZmFsc2UsCiAgICBzaCA9IDAKICB3aGlsZSAoLS1pID49IDApIHsKICAgIHZhciB4ID0gKGsgPT0gOCkgPyBzW2ldICYgMHhmZiA6IGludEF0KHMsIGkpCiAgICBpZiAoeCA8IDApIHsKICAgICAgaWYgKHMuY2hhckF0KGkpID09ICItIikgbWkgPSB0cnVlCiAgICAgIGNvbnRpbnVlCiAgICB9CiAgICBtaSA9IGZhbHNlCiAgICBpZiAoc2ggPT0gMCkKICAgICAgc2VsZltzZWxmLnQrK10gPSB4CiAgICBlbHNlIGlmIChzaCArIGsgPiBzZWxmLkRCKSB7CiAgICAgIHNlbGZbc2VsZi50IC0gMV0gfD0gKHggJiAoKDEgPDwgKHNlbGYuREIgLSBzaCkpIC0gMSkpIDw8IHNoCiAgICAgIHNlbGZbc2VsZi50KytdID0gKHggPj4gKHNlbGYuREIgLSBzaCkpCiAgICB9IGVsc2UKICAgICAgc2VsZltzZWxmLnQgLSAxXSB8PSB4IDw8IHNoCiAgICBzaCArPSBrCiAgICBpZiAoc2ggPj0gc2VsZi5EQikgc2ggLT0gc2VsZi5EQgogIH0KICBpZiAoayA9PSA4ICYmIChzWzBdICYgMHg4MCkgIT0gMCkgewogICAgc2VsZi5zID0gLTEKICAgIGlmIChzaCA+IDApIHNlbGZbc2VsZi50IC0gMV0gfD0gKCgxIDw8IChzZWxmLkRCIC0gc2gpKSAtIDEpIDw8IHNoCiAgfQogIHNlbGYuY2xhbXAoKQogIGlmIChtaSkgQmlnSW50ZWdlci5aRVJPLnN1YlRvKHNlbGYsIHNlbGYpCn0KCi8vIChwcm90ZWN0ZWQpIGNsYW1wIG9mZiBleGNlc3MgaGlnaCB3b3JkcwpmdW5jdGlvbiBibnBDbGFtcCgpIHsKICB2YXIgYyA9IHRoaXMucyAmIHRoaXMuRE0KICB3aGlsZSAodGhpcy50ID4gMCAmJiB0aGlzW3RoaXMudCAtIDFdID09IGMpLS10aGlzLnQKfQoKLy8gKHB1YmxpYykgcmV0dXJuIHN0cmluZyByZXByZXNlbnRhdGlvbiBpbiBnaXZlbiByYWRpeApmdW5jdGlvbiBiblRvU3RyaW5nKGIpIHsKICB2YXIgc2VsZiA9IHRoaXMKICBpZiAoc2VsZi5zIDwgMCkgcmV0dXJuICItIiArIHNlbGYubmVnYXRlKCkKICAgIC50b1N0cmluZyhiKQogIHZhciBrCiAgaWYgKGIgPT0gMTYpIGsgPSA0CiAgZWxzZSBpZiAoYiA9PSA4KSBrID0gMwogIGVsc2UgaWYgKGIgPT0gMikgayA9IDEKICBlbHNlIGlmIChiID09IDMyKSBrID0gNQogIGVsc2UgaWYgKGIgPT0gNCkgayA9IDIKICBlbHNlIHJldHVybiBzZWxmLnRvUmFkaXgoYikKICB2YXIga20gPSAoMSA8PCBrKSAtIDEsCiAgICBkLCBtID0gZmFsc2UsCiAgICByID0gIiIsCiAgICBpID0gc2VsZi50CiAgdmFyIHAgPSBzZWxmLkRCIC0gKGkgKiBzZWxmLkRCKSAlIGsKICBpZiAoaS0tID4gMCkgewogICAgaWYgKHAgPCBzZWxmLkRCICYmIChkID0gc2VsZltpXSA+PiBwKSA+IDApIHsKICAgICAgbSA9IHRydWUKICAgICAgciA9IGludDJjaGFyKGQpCiAgICB9CiAgICB3aGlsZSAoaSA+PSAwKSB7CiAgICAgIGlmIChwIDwgaykgewogICAgICAgIGQgPSAoc2VsZltpXSAmICgoMSA8PCBwKSAtIDEpKSA8PCAoayAtIHApCiAgICAgICAgZCB8PSBzZWxmWy0taV0gPj4gKHAgKz0gc2VsZi5EQiAtIGspCiAgICAgIH0gZWxzZSB7CiAgICAgICAgZCA9IChzZWxmW2ldID4+IChwIC09IGspKSAmIGttCiAgICAgICAgaWYgKHAgPD0gMCkgewogICAgICAgICAgcCArPSBzZWxmLkRCCiAgICAgICAgICAtLWkKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGQgPiAwKSBtID0gdHJ1ZQogICAgICBpZiAobSkgciArPSBpbnQyY2hhcihkKQogICAgfQogIH0KICByZXR1cm4gbSA/IHIgOiAiMCIKfQoKLy8gKHB1YmxpYykgLXRoaXMKZnVuY3Rpb24gYm5OZWdhdGUoKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgQmlnSW50ZWdlci5aRVJPLnN1YlRvKHRoaXMsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgfHRoaXN8CmZ1bmN0aW9uIGJuQWJzKCkgewogIHJldHVybiAodGhpcy5zIDwgMCkgPyB0aGlzLm5lZ2F0ZSgpIDogdGhpcwp9CgovLyAocHVibGljKSByZXR1cm4gKyBpZiB0aGlzID4gYSwgLSBpZiB0aGlzIDwgYSwgMCBpZiBlcXVhbApmdW5jdGlvbiBibkNvbXBhcmVUbyhhKSB7CiAgdmFyIHIgPSB0aGlzLnMgLSBhLnMKICBpZiAociAhPSAwKSByZXR1cm4gcgogIHZhciBpID0gdGhpcy50CiAgciA9IGkgLSBhLnQKICBpZiAociAhPSAwKSByZXR1cm4gKHRoaXMucyA8IDApID8gLXIgOiByCiAgd2hpbGUgKC0taSA+PSAwKQogICAgaWYgKChyID0gdGhpc1tpXSAtIGFbaV0pICE9IDApIHJldHVybiByCiAgcmV0dXJuIDAKfQoKLy8gcmV0dXJucyBiaXQgbGVuZ3RoIG9mIHRoZSBpbnRlZ2VyIHgKZnVuY3Rpb24gbmJpdHMoeCkgewogIHZhciByID0gMSwKICAgIHQKICBpZiAoKHQgPSB4ID4+PiAxNikgIT0gMCkgewogICAgeCA9IHQKICAgIHIgKz0gMTYKICB9CiAgaWYgKCh0ID0geCA+PiA4KSAhPSAwKSB7CiAgICB4ID0gdAogICAgciArPSA4CiAgfQogIGlmICgodCA9IHggPj4gNCkgIT0gMCkgewogICAgeCA9IHQKICAgIHIgKz0gNAogIH0KICBpZiAoKHQgPSB4ID4+IDIpICE9IDApIHsKICAgIHggPSB0CiAgICByICs9IDIKICB9CiAgaWYgKCh0ID0geCA+PiAxKSAhPSAwKSB7CiAgICB4ID0gdAogICAgciArPSAxCiAgfQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHJldHVybiB0aGUgbnVtYmVyIG9mIGJpdHMgaW4gInRoaXMiCmZ1bmN0aW9uIGJuQml0TGVuZ3RoKCkgewogIGlmICh0aGlzLnQgPD0gMCkgcmV0dXJuIDAKICByZXR1cm4gdGhpcy5EQiAqICh0aGlzLnQgLSAxKSArIG5iaXRzKHRoaXNbdGhpcy50IC0gMV0gXiAodGhpcy5zICYgdGhpcy5ETSkpCn0KCi8vIChwdWJsaWMpIHJldHVybiB0aGUgbnVtYmVyIG9mIGJ5dGVzIGluICJ0aGlzIgpmdW5jdGlvbiBibkJ5dGVMZW5ndGgoKSB7CiAgcmV0dXJuIHRoaXMuYml0TGVuZ3RoKCkgPj4gMwp9CgovLyAocHJvdGVjdGVkKSByID0gdGhpcyA8PCBuKkRCCmZ1bmN0aW9uIGJucERMU2hpZnRUbyhuLCByKSB7CiAgdmFyIGkKICBmb3IgKGkgPSB0aGlzLnQgLSAxOyBpID49IDA7IC0taSkgcltpICsgbl0gPSB0aGlzW2ldCiAgZm9yIChpID0gbiAtIDE7IGkgPj0gMDsgLS1pKSByW2ldID0gMAogIHIudCA9IHRoaXMudCArIG4KICByLnMgPSB0aGlzLnMKfQoKLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgPj4gbipEQgpmdW5jdGlvbiBibnBEUlNoaWZ0VG8obiwgcikgewogIGZvciAodmFyIGkgPSBuOyBpIDwgdGhpcy50OyArK2kpIHJbaSAtIG5dID0gdGhpc1tpXQogIHIudCA9IE1hdGgubWF4KHRoaXMudCAtIG4sIDApCiAgci5zID0gdGhpcy5zCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzIDw8IG4KZnVuY3Rpb24gYm5wTFNoaWZ0VG8obiwgcikgewogIHZhciBzZWxmID0gdGhpcwogIHZhciBicyA9IG4gJSBzZWxmLkRCCiAgdmFyIGNicyA9IHNlbGYuREIgLSBicwogIHZhciBibSA9ICgxIDw8IGNicykgLSAxCiAgdmFyIGRzID0gTWF0aC5mbG9vcihuIC8gc2VsZi5EQiksCiAgICBjID0gKHNlbGYucyA8PCBicykgJiBzZWxmLkRNLAogICAgaQogIGZvciAoaSA9IHNlbGYudCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICByW2kgKyBkcyArIDFdID0gKHNlbGZbaV0gPj4gY2JzKSB8IGMKICAgIGMgPSAoc2VsZltpXSAmIGJtKSA8PCBicwogIH0KICBmb3IgKGkgPSBkcyAtIDE7IGkgPj0gMDsgLS1pKSByW2ldID0gMAogIHJbZHNdID0gYwogIHIudCA9IHNlbGYudCArIGRzICsgMQogIHIucyA9IHNlbGYucwogIHIuY2xhbXAoKQp9CgovLyAocHJvdGVjdGVkKSByID0gdGhpcyA+PiBuCmZ1bmN0aW9uIGJucFJTaGlmdFRvKG4sIHIpIHsKICB2YXIgc2VsZiA9IHRoaXMKICByLnMgPSBzZWxmLnMKICB2YXIgZHMgPSBNYXRoLmZsb29yKG4gLyBzZWxmLkRCKQogIGlmIChkcyA+PSBzZWxmLnQpIHsKICAgIHIudCA9IDAKICAgIHJldHVybgogIH0KICB2YXIgYnMgPSBuICUgc2VsZi5EQgogIHZhciBjYnMgPSBzZWxmLkRCIC0gYnMKICB2YXIgYm0gPSAoMSA8PCBicykgLSAxCiAgclswXSA9IHNlbGZbZHNdID4+IGJzCiAgZm9yICh2YXIgaSA9IGRzICsgMTsgaSA8IHNlbGYudDsgKytpKSB7CiAgICByW2kgLSBkcyAtIDFdIHw9IChzZWxmW2ldICYgYm0pIDw8IGNicwogICAgcltpIC0gZHNdID0gc2VsZltpXSA+PiBicwogIH0KICBpZiAoYnMgPiAwKSByW3NlbGYudCAtIGRzIC0gMV0gfD0gKHNlbGYucyAmIGJtKSA8PCBjYnMKICByLnQgPSBzZWxmLnQgLSBkcwogIHIuY2xhbXAoKQp9CgovLyAocHJvdGVjdGVkKSByID0gdGhpcyAtIGEKZnVuY3Rpb24gYm5wU3ViVG8oYSwgcikgewogIHZhciBzZWxmID0gdGhpcwogIHZhciBpID0gMCwKICAgIGMgPSAwLAogICAgbSA9IE1hdGgubWluKGEudCwgc2VsZi50KQogIHdoaWxlIChpIDwgbSkgewogICAgYyArPSBzZWxmW2ldIC0gYVtpXQogICAgcltpKytdID0gYyAmIHNlbGYuRE0KICAgIGMgPj49IHNlbGYuREIKICB9CiAgaWYgKGEudCA8IHNlbGYudCkgewogICAgYyAtPSBhLnMKICAgIHdoaWxlIChpIDwgc2VsZi50KSB7CiAgICAgIGMgKz0gc2VsZltpXQogICAgICByW2krK10gPSBjICYgc2VsZi5ETQogICAgICBjID4+PSBzZWxmLkRCCiAgICB9CiAgICBjICs9IHNlbGYucwogIH0gZWxzZSB7CiAgICBjICs9IHNlbGYucwogICAgd2hpbGUgKGkgPCBhLnQpIHsKICAgICAgYyAtPSBhW2ldCiAgICAgIHJbaSsrXSA9IGMgJiBzZWxmLkRNCiAgICAgIGMgPj49IHNlbGYuREIKICAgIH0KICAgIGMgLT0gYS5zCiAgfQogIHIucyA9IChjIDwgMCkgPyAtMSA6IDAKICBpZiAoYyA8IC0xKSByW2krK10gPSBzZWxmLkRWICsgYwogIGVsc2UgaWYgKGMgPiAwKSByW2krK10gPSBjCiAgci50ID0gaQogIHIuY2xhbXAoKQp9CgovLyAocHJvdGVjdGVkKSByID0gdGhpcyAqIGEsIHIgIT0gdGhpcyxhIChIQUMgMTQuMTIpCi8vICJ0aGlzIiBzaG91bGQgYmUgdGhlIGxhcmdlciBvbmUgaWYgYXBwcm9wcmlhdGUuCmZ1bmN0aW9uIGJucE11bHRpcGx5VG8oYSwgcikgewogIHZhciB4ID0gdGhpcy5hYnMoKSwKICAgIHkgPSBhLmFicygpCiAgdmFyIGkgPSB4LnQKICByLnQgPSBpICsgeS50CiAgd2hpbGUgKC0taSA+PSAwKSByW2ldID0gMAogIGZvciAoaSA9IDA7IGkgPCB5LnQ7ICsraSkgcltpICsgeC50XSA9IHguYW0oMCwgeVtpXSwgciwgaSwgMCwgeC50KQogIHIucyA9IDAKICByLmNsYW1wKCkKICBpZiAodGhpcy5zICE9IGEucykgQmlnSW50ZWdlci5aRVJPLnN1YlRvKHIsIHIpCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzXjIsIHIgIT0gdGhpcyAoSEFDIDE0LjE2KQpmdW5jdGlvbiBibnBTcXVhcmVUbyhyKSB7CiAgdmFyIHggPSB0aGlzLmFicygpCiAgdmFyIGkgPSByLnQgPSAyICogeC50CiAgd2hpbGUgKC0taSA+PSAwKSByW2ldID0gMAogIGZvciAoaSA9IDA7IGkgPCB4LnQgLSAxOyArK2kpIHsKICAgIHZhciBjID0geC5hbShpLCB4W2ldLCByLCAyICogaSwgMCwgMSkKICAgIGlmICgocltpICsgeC50XSArPSB4LmFtKGkgKyAxLCAyICogeFtpXSwgciwgMiAqIGkgKyAxLCBjLCB4LnQgLSBpIC0gMSkpID49IHguRFYpIHsKICAgICAgcltpICsgeC50XSAtPSB4LkRWCiAgICAgIHJbaSArIHgudCArIDFdID0gMQogICAgfQogIH0KICBpZiAoci50ID4gMCkgcltyLnQgLSAxXSArPSB4LmFtKGksIHhbaV0sIHIsIDIgKiBpLCAwLCAxKQogIHIucyA9IDAKICByLmNsYW1wKCkKfQoKLy8gKHByb3RlY3RlZCkgZGl2aWRlIHRoaXMgYnkgbSwgcXVvdGllbnQgYW5kIHJlbWFpbmRlciB0byBxLCByIChIQUMgMTQuMjApCi8vIHIgIT0gcSwgdGhpcyAhPSBtLiAgcSBvciByIG1heSBiZSBudWxsLgpmdW5jdGlvbiBibnBEaXZSZW1UbyhtLCBxLCByKSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgdmFyIHBtID0gbS5hYnMoKQogIGlmIChwbS50IDw9IDApIHJldHVybgogIHZhciBwdCA9IHNlbGYuYWJzKCkKICBpZiAocHQudCA8IHBtLnQpIHsKICAgIGlmIChxICE9IG51bGwpIHEuZnJvbUludCgwKQogICAgaWYgKHIgIT0gbnVsbCkgc2VsZi5jb3B5VG8ocikKICAgIHJldHVybgogIH0KICBpZiAociA9PSBudWxsKSByID0gbmV3IEJpZ0ludGVnZXIoKQogIHZhciB5ID0gbmV3IEJpZ0ludGVnZXIoKSwKICAgIHRzID0gc2VsZi5zLAogICAgbXMgPSBtLnMKICB2YXIgbnNoID0gc2VsZi5EQiAtIG5iaXRzKHBtW3BtLnQgLSAxXSk7IC8vIG5vcm1hbGl6ZSBtb2R1bHVzCiAgaWYgKG5zaCA+IDApIHsKICAgIHBtLmxTaGlmdFRvKG5zaCwgeSkKICAgIHB0LmxTaGlmdFRvKG5zaCwgcikKICB9IGVsc2UgewogICAgcG0uY29weVRvKHkpCiAgICBwdC5jb3B5VG8ocikKICB9CiAgdmFyIHlzID0geS50CiAgdmFyIHkwID0geVt5cyAtIDFdCiAgaWYgKHkwID09IDApIHJldHVybgogIHZhciB5dCA9IHkwICogKDEgPDwgc2VsZi5GMSkgKyAoKHlzID4gMSkgPyB5W3lzIC0gMl0gPj4gc2VsZi5GMiA6IDApCiAgdmFyIGQxID0gc2VsZi5GViAvIHl0LAogICAgZDIgPSAoMSA8PCBzZWxmLkYxKSAvIHl0LAogICAgZSA9IDEgPDwgc2VsZi5GMgogIHZhciBpID0gci50LAogICAgaiA9IGkgLSB5cywKICAgIHQgPSAocSA9PSBudWxsKSA/IG5ldyBCaWdJbnRlZ2VyKCkgOiBxCiAgeS5kbFNoaWZ0VG8oaiwgdCkKICBpZiAoci5jb21wYXJlVG8odCkgPj0gMCkgewogICAgcltyLnQrK10gPSAxCiAgICByLnN1YlRvKHQsIHIpCiAgfQogIEJpZ0ludGVnZXIuT05FLmRsU2hpZnRUbyh5cywgdCkKICB0LnN1YlRvKHksIHkpOyAvLyAibmVnYXRpdmUiIHkgc28gd2UgY2FuIHJlcGxhY2Ugc3ViIHdpdGggYW0gbGF0ZXIKICB3aGlsZSAoeS50IDwgeXMpIHlbeS50KytdID0gMAogIHdoaWxlICgtLWogPj0gMCkgewogICAgLy8gRXN0aW1hdGUgcXVvdGllbnQgZGlnaXQKICAgIHZhciBxZCA9IChyWy0taV0gPT0geTApID8gc2VsZi5ETSA6IE1hdGguZmxvb3IocltpXSAqIGQxICsgKHJbaSAtIDFdICsgZSkgKiBkMikKICAgIGlmICgocltpXSArPSB5LmFtKDAsIHFkLCByLCBqLCAwLCB5cykpIDwgcWQpIHsgLy8gVHJ5IGl0IG91dAogICAgICB5LmRsU2hpZnRUbyhqLCB0KQogICAgICByLnN1YlRvKHQsIHIpCiAgICAgIHdoaWxlIChyW2ldIDwgLS1xZCkgci5zdWJUbyh0LCByKQogICAgfQogIH0KICBpZiAocSAhPSBudWxsKSB7CiAgICByLmRyU2hpZnRUbyh5cywgcSkKICAgIGlmICh0cyAhPSBtcykgQmlnSW50ZWdlci5aRVJPLnN1YlRvKHEsIHEpCiAgfQogIHIudCA9IHlzCiAgci5jbGFtcCgpCiAgaWYgKG5zaCA+IDApIHIuclNoaWZ0VG8obnNoLCByKTsgLy8gRGVub3JtYWxpemUgcmVtYWluZGVyCiAgaWYgKHRzIDwgMCkgQmlnSW50ZWdlci5aRVJPLnN1YlRvKHIsIHIpCn0KCi8vIChwdWJsaWMpIHRoaXMgbW9kIGEKZnVuY3Rpb24gYm5Nb2QoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuYWJzKCkKICAgIC5kaXZSZW1UbyhhLCBudWxsLCByKQogIGlmICh0aGlzLnMgPCAwICYmIHIuY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTykgPiAwKSBhLnN1YlRvKHIsIHIpCiAgcmV0dXJuIHIKfQoKLy8gTW9kdWxhciByZWR1Y3Rpb24gdXNpbmcgImNsYXNzaWMiIGFsZ29yaXRobQpmdW5jdGlvbiBDbGFzc2ljKG0pIHsKICB0aGlzLm0gPSBtCn0KCmZ1bmN0aW9uIGNDb252ZXJ0KHgpIHsKICBpZiAoeC5zIDwgMCB8fCB4LmNvbXBhcmVUbyh0aGlzLm0pID49IDApIHJldHVybiB4Lm1vZCh0aGlzLm0pCiAgZWxzZSByZXR1cm4geAp9CgpmdW5jdGlvbiBjUmV2ZXJ0KHgpIHsKICByZXR1cm4geAp9CgpmdW5jdGlvbiBjUmVkdWNlKHgpIHsKICB4LmRpdlJlbVRvKHRoaXMubSwgbnVsbCwgeCkKfQoKZnVuY3Rpb24gY011bFRvKHgsIHksIHIpIHsKICB4Lm11bHRpcGx5VG8oeSwgcikKICB0aGlzLnJlZHVjZShyKQp9CgpmdW5jdGlvbiBjU3FyVG8oeCwgcikgewogIHguc3F1YXJlVG8ocikKICB0aGlzLnJlZHVjZShyKQp9CgpDbGFzc2ljLnByb3RvdHlwZS5jb252ZXJ0ID0gY0NvbnZlcnQKQ2xhc3NpYy5wcm90b3R5cGUucmV2ZXJ0ID0gY1JldmVydApDbGFzc2ljLnByb3RvdHlwZS5yZWR1Y2UgPSBjUmVkdWNlCkNsYXNzaWMucHJvdG90eXBlLm11bFRvID0gY011bFRvCkNsYXNzaWMucHJvdG90eXBlLnNxclRvID0gY1NxclRvCgovLyAocHJvdGVjdGVkKSByZXR1cm4gIi0xL3RoaXMgJSAyXkRCIjsgdXNlZnVsIGZvciBNb250LiByZWR1Y3Rpb24KLy8ganVzdGlmaWNhdGlvbjoKLy8gICAgICAgICB4eSA9PSAxIChtb2QgbSkKLy8gICAgICAgICB4eSA9ICAxK2ttCi8vICAgeHkoMi14eSkgPSAoMStrbSkoMS1rbSkKLy8geFt5KDIteHkpXSA9IDEta14ybV4yCi8vIHhbeSgyLXh5KV0gPT0gMSAobW9kIG1eMikKLy8gaWYgeSBpcyAxL3ggbW9kIG0sIHRoZW4geSgyLXh5KSBpcyAxL3ggbW9kIG1eMgovLyBzaG91bGQgcmVkdWNlIHggYW5kIHkoMi14eSkgYnkgbV4yIGF0IGVhY2ggc3RlcCB0byBrZWVwIHNpemUgYm91bmRlZC4KLy8gSlMgbXVsdGlwbHkgIm92ZXJmbG93cyIgZGlmZmVyZW50bHkgZnJvbSBDL0MrKywgc28gY2FyZSBpcyBuZWVkZWQgaGVyZS4KZnVuY3Rpb24gYm5wSW52RGlnaXQoKSB7CiAgaWYgKHRoaXMudCA8IDEpIHJldHVybiAwCiAgdmFyIHggPSB0aGlzWzBdCiAgaWYgKCh4ICYgMSkgPT0gMCkgcmV0dXJuIDAKICB2YXIgeSA9IHggJiAzOyAvLyB5ID09IDEveCBtb2QgMl4yCiAgeSA9ICh5ICogKDIgLSAoeCAmIDB4ZikgKiB5KSkgJiAweGY7IC8vIHkgPT0gMS94IG1vZCAyXjQKICB5ID0gKHkgKiAoMiAtICh4ICYgMHhmZikgKiB5KSkgJiAweGZmOyAvLyB5ID09IDEveCBtb2QgMl44CiAgeSA9ICh5ICogKDIgLSAoKCh4ICYgMHhmZmZmKSAqIHkpICYgMHhmZmZmKSkpICYgMHhmZmZmOyAvLyB5ID09IDEveCBtb2QgMl4xNgogIC8vIGxhc3Qgc3RlcCAtIGNhbGN1bGF0ZSBpbnZlcnNlIG1vZCBEViBkaXJlY3RseQogIC8vIGFzc3VtZXMgMTYgPCBEQiA8PSAzMiBhbmQgYXNzdW1lcyBhYmlsaXR5IHRvIGhhbmRsZSA0OC1iaXQgaW50cwogIHkgPSAoeSAqICgyIC0geCAqIHkgJSB0aGlzLkRWKSkgJSB0aGlzLkRWOyAvLyB5ID09IDEveCBtb2QgMl5kYml0cwogIC8vIHdlIHJlYWxseSB3YW50IHRoZSBuZWdhdGl2ZSBpbnZlcnNlLCBhbmQgLURWIDwgeSA8IERWCiAgcmV0dXJuICh5ID4gMCkgPyB0aGlzLkRWIC0geSA6IC15Cn0KCi8vIE1vbnRnb21lcnkgcmVkdWN0aW9uCmZ1bmN0aW9uIE1vbnRnb21lcnkobSkgewogIHRoaXMubSA9IG0KICB0aGlzLm1wID0gbS5pbnZEaWdpdCgpCiAgdGhpcy5tcGwgPSB0aGlzLm1wICYgMHg3ZmZmCiAgdGhpcy5tcGggPSB0aGlzLm1wID4+IDE1CiAgdGhpcy51bSA9ICgxIDw8IChtLkRCIC0gMTUpKSAtIDEKICB0aGlzLm10MiA9IDIgKiBtLnQKfQoKLy8geFIgbW9kIG0KZnVuY3Rpb24gbW9udENvbnZlcnQoeCkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHguYWJzKCkKICAgIC5kbFNoaWZ0VG8odGhpcy5tLnQsIHIpCiAgci5kaXZSZW1Ubyh0aGlzLm0sIG51bGwsIHIpCiAgaWYgKHgucyA8IDAgJiYgci5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKSA+IDApIHRoaXMubS5zdWJUbyhyLCByKQogIHJldHVybiByCn0KCi8vIHgvUiBtb2QgbQpmdW5jdGlvbiBtb250UmV2ZXJ0KHgpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB4LmNvcHlUbyhyKQogIHRoaXMucmVkdWNlKHIpCiAgcmV0dXJuIHIKfQoKLy8geCA9IHgvUiBtb2QgbSAoSEFDIDE0LjMyKQpmdW5jdGlvbiBtb250UmVkdWNlKHgpIHsKICB3aGlsZSAoeC50IDw9IHRoaXMubXQyKSAvLyBwYWQgeCBzbyBhbSBoYXMgZW5vdWdoIHJvb20gbGF0ZXIKICAgIHhbeC50KytdID0gMAogIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tLnQ7ICsraSkgewogICAgLy8gZmFzdGVyIHdheSBvZiBjYWxjdWxhdGluZyB1MCA9IHhbaV0qbXAgbW9kIERWCiAgICB2YXIgaiA9IHhbaV0gJiAweDdmZmYKICAgIHZhciB1MCA9IChqICogdGhpcy5tcGwgKyAoKChqICogdGhpcy5tcGggKyAoeFtpXSA+PiAxNSkgKiB0aGlzLm1wbCkgJiB0aGlzLnVtKSA8PCAxNSkpICYgeC5ETQogICAgLy8gdXNlIGFtIHRvIGNvbWJpbmUgdGhlIG11bHRpcGx5LXNoaWZ0LWFkZCBpbnRvIG9uZSBjYWxsCiAgICBqID0gaSArIHRoaXMubS50CiAgICB4W2pdICs9IHRoaXMubS5hbSgwLCB1MCwgeCwgaSwgMCwgdGhpcy5tLnQpCiAgICAvLyBwcm9wYWdhdGUgY2FycnkKICAgIHdoaWxlICh4W2pdID49IHguRFYpIHsKICAgICAgeFtqXSAtPSB4LkRWCiAgICAgIHhbKytqXSsrCiAgICB9CiAgfQogIHguY2xhbXAoKQogIHguZHJTaGlmdFRvKHRoaXMubS50LCB4KQogIGlmICh4LmNvbXBhcmVUbyh0aGlzLm0pID49IDApIHguc3ViVG8odGhpcy5tLCB4KQp9CgovLyByID0gInheMi9SIG1vZCBtIjsgeCAhPSByCmZ1bmN0aW9uIG1vbnRTcXJUbyh4LCByKSB7CiAgeC5zcXVhcmVUbyhyKQogIHRoaXMucmVkdWNlKHIpCn0KCi8vIHIgPSAieHkvUiBtb2QgbSI7IHgseSAhPSByCmZ1bmN0aW9uIG1vbnRNdWxUbyh4LCB5LCByKSB7CiAgeC5tdWx0aXBseVRvKHksIHIpCiAgdGhpcy5yZWR1Y2UocikKfQoKTW9udGdvbWVyeS5wcm90b3R5cGUuY29udmVydCA9IG1vbnRDb252ZXJ0Ck1vbnRnb21lcnkucHJvdG90eXBlLnJldmVydCA9IG1vbnRSZXZlcnQKTW9udGdvbWVyeS5wcm90b3R5cGUucmVkdWNlID0gbW9udFJlZHVjZQpNb250Z29tZXJ5LnByb3RvdHlwZS5tdWxUbyA9IG1vbnRNdWxUbwpNb250Z29tZXJ5LnByb3RvdHlwZS5zcXJUbyA9IG1vbnRTcXJUbwoKLy8gKHByb3RlY3RlZCkgdHJ1ZSBpZmYgdGhpcyBpcyBldmVuCmZ1bmN0aW9uIGJucElzRXZlbigpIHsKICByZXR1cm4gKCh0aGlzLnQgPiAwKSA/ICh0aGlzWzBdICYgMSkgOiB0aGlzLnMpID09IDAKfQoKLy8gKHByb3RlY3RlZCkgdGhpc15lLCBlIDwgMl4zMiwgZG9pbmcgc3FyIGFuZCBtdWwgd2l0aCAiciIgKEhBQyAxNC43OSkKZnVuY3Rpb24gYm5wRXhwKGUsIHopIHsKICBpZiAoZSA+IDB4ZmZmZmZmZmYgfHwgZSA8IDEpIHJldHVybiBCaWdJbnRlZ2VyLk9ORQogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKSwKICAgIHIyID0gbmV3IEJpZ0ludGVnZXIoKSwKICAgIGcgPSB6LmNvbnZlcnQodGhpcyksCiAgICBpID0gbmJpdHMoZSkgLSAxCiAgZy5jb3B5VG8ocikKICB3aGlsZSAoLS1pID49IDApIHsKICAgIHouc3FyVG8ociwgcjIpCiAgICBpZiAoKGUgJiAoMSA8PCBpKSkgPiAwKSB6Lm11bFRvKHIyLCBnLCByKQogICAgZWxzZSB7CiAgICAgIHZhciB0ID0gcgogICAgICByID0gcjIKICAgICAgcjIgPSB0CiAgICB9CiAgfQogIHJldHVybiB6LnJldmVydChyKQp9CgovLyAocHVibGljKSB0aGlzXmUgJSBtLCAwIDw9IGUgPCAyXjMyCmZ1bmN0aW9uIGJuTW9kUG93SW50KGUsIG0pIHsKICB2YXIgegogIGlmIChlIDwgMjU2IHx8IG0uaXNFdmVuKCkpIHogPSBuZXcgQ2xhc3NpYyhtKQogIGVsc2UgeiA9IG5ldyBNb250Z29tZXJ5KG0pCiAgcmV0dXJuIHRoaXMuZXhwKGUsIHopCn0KCi8vIHByb3RlY3RlZApwcm90by5jb3B5VG8gPSBibnBDb3B5VG8KcHJvdG8uZnJvbUludCA9IGJucEZyb21JbnQKcHJvdG8uZnJvbVN0cmluZyA9IGJucEZyb21TdHJpbmcKcHJvdG8uY2xhbXAgPSBibnBDbGFtcApwcm90by5kbFNoaWZ0VG8gPSBibnBETFNoaWZ0VG8KcHJvdG8uZHJTaGlmdFRvID0gYm5wRFJTaGlmdFRvCnByb3RvLmxTaGlmdFRvID0gYm5wTFNoaWZ0VG8KcHJvdG8uclNoaWZ0VG8gPSBibnBSU2hpZnRUbwpwcm90by5zdWJUbyA9IGJucFN1YlRvCnByb3RvLm11bHRpcGx5VG8gPSBibnBNdWx0aXBseVRvCnByb3RvLnNxdWFyZVRvID0gYm5wU3F1YXJlVG8KcHJvdG8uZGl2UmVtVG8gPSBibnBEaXZSZW1Ubwpwcm90by5pbnZEaWdpdCA9IGJucEludkRpZ2l0CnByb3RvLmlzRXZlbiA9IGJucElzRXZlbgpwcm90by5leHAgPSBibnBFeHAKCi8vIHB1YmxpYwpwcm90by50b1N0cmluZyA9IGJuVG9TdHJpbmcKcHJvdG8ubmVnYXRlID0gYm5OZWdhdGUKcHJvdG8uYWJzID0gYm5BYnMKcHJvdG8uY29tcGFyZVRvID0gYm5Db21wYXJlVG8KcHJvdG8uYml0TGVuZ3RoID0gYm5CaXRMZW5ndGgKcHJvdG8uYnl0ZUxlbmd0aCA9IGJuQnl0ZUxlbmd0aApwcm90by5tb2QgPSBibk1vZApwcm90by5tb2RQb3dJbnQgPSBibk1vZFBvd0ludAoKLy8gKHB1YmxpYykKZnVuY3Rpb24gYm5DbG9uZSgpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmNvcHlUbyhyKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHJldHVybiB2YWx1ZSBhcyBpbnRlZ2VyCmZ1bmN0aW9uIGJuSW50VmFsdWUoKSB7CiAgaWYgKHRoaXMucyA8IDApIHsKICAgIGlmICh0aGlzLnQgPT0gMSkgcmV0dXJuIHRoaXNbMF0gLSB0aGlzLkRWCiAgICBlbHNlIGlmICh0aGlzLnQgPT0gMCkgcmV0dXJuIC0xCiAgfSBlbHNlIGlmICh0aGlzLnQgPT0gMSkgcmV0dXJuIHRoaXNbMF0KICBlbHNlIGlmICh0aGlzLnQgPT0gMCkgcmV0dXJuIDAKICAvLyBhc3N1bWVzIDE2IDwgREIgPCAzMgogIHJldHVybiAoKHRoaXNbMV0gJiAoKDEgPDwgKDMyIC0gdGhpcy5EQikpIC0gMSkpIDw8IHRoaXMuREIpIHwgdGhpc1swXQp9CgovLyAocHVibGljKSByZXR1cm4gdmFsdWUgYXMgYnl0ZQpmdW5jdGlvbiBibkJ5dGVWYWx1ZSgpIHsKICByZXR1cm4gKHRoaXMudCA9PSAwKSA/IHRoaXMucyA6ICh0aGlzWzBdIDw8IDI0KSA+PiAyNAp9CgovLyAocHVibGljKSByZXR1cm4gdmFsdWUgYXMgc2hvcnQgKGFzc3VtZXMgREI+PTE2KQpmdW5jdGlvbiBiblNob3J0VmFsdWUoKSB7CiAgcmV0dXJuICh0aGlzLnQgPT0gMCkgPyB0aGlzLnMgOiAodGhpc1swXSA8PCAxNikgPj4gMTYKfQoKLy8gKHByb3RlY3RlZCkgcmV0dXJuIHggcy50LiByXnggPCBEVgpmdW5jdGlvbiBibnBDaHVua1NpemUocikgewogIHJldHVybiBNYXRoLmZsb29yKE1hdGguTE4yICogdGhpcy5EQiAvIE1hdGgubG9nKHIpKQp9CgovLyAocHVibGljKSAwIGlmIHRoaXMgPT0gMCwgMSBpZiB0aGlzID4gMApmdW5jdGlvbiBiblNpZ051bSgpIHsKICBpZiAodGhpcy5zIDwgMCkgcmV0dXJuIC0xCiAgZWxzZSBpZiAodGhpcy50IDw9IDAgfHwgKHRoaXMudCA9PSAxICYmIHRoaXNbMF0gPD0gMCkpIHJldHVybiAwCiAgZWxzZSByZXR1cm4gMQp9CgovLyAocHJvdGVjdGVkKSBjb252ZXJ0IHRvIHJhZGl4IHN0cmluZwpmdW5jdGlvbiBibnBUb1JhZGl4KGIpIHsKICBpZiAoYiA9PSBudWxsKSBiID0gMTAKICBpZiAodGhpcy5zaWdudW0oKSA9PSAwIHx8IGIgPCAyIHx8IGIgPiAzNikgcmV0dXJuICIwIgogIHZhciBjcyA9IHRoaXMuY2h1bmtTaXplKGIpCiAgdmFyIGEgPSBNYXRoLnBvdyhiLCBjcykKICB2YXIgZCA9IG5idihhKSwKICAgIHkgPSBuZXcgQmlnSW50ZWdlcigpLAogICAgeiA9IG5ldyBCaWdJbnRlZ2VyKCksCiAgICByID0gIiIKICB0aGlzLmRpdlJlbVRvKGQsIHksIHopCiAgd2hpbGUgKHkuc2lnbnVtKCkgPiAwKSB7CiAgICByID0gKGEgKyB6LmludFZhbHVlKCkpCiAgICAgIC50b1N0cmluZyhiKQogICAgICAuc3Vic3RyKDEpICsgcgogICAgeS5kaXZSZW1UbyhkLCB5LCB6KQogIH0KICByZXR1cm4gei5pbnRWYWx1ZSgpCiAgICAudG9TdHJpbmcoYikgKyByCn0KCi8vIChwcm90ZWN0ZWQpIGNvbnZlcnQgZnJvbSByYWRpeCBzdHJpbmcKZnVuY3Rpb24gYm5wRnJvbVJhZGl4KHMsIGIpIHsKICB2YXIgc2VsZiA9IHRoaXMKICBzZWxmLmZyb21JbnQoMCkKICBpZiAoYiA9PSBudWxsKSBiID0gMTAKICB2YXIgY3MgPSBzZWxmLmNodW5rU2l6ZShiKQogIHZhciBkID0gTWF0aC5wb3coYiwgY3MpLAogICAgbWkgPSBmYWxzZSwKICAgIGogPSAwLAogICAgdyA9IDAKICBmb3IgKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyArK2kpIHsKICAgIHZhciB4ID0gaW50QXQocywgaSkKICAgIGlmICh4IDwgMCkgewogICAgICBpZiAocy5jaGFyQXQoaSkgPT0gIi0iICYmIHNlbGYuc2lnbnVtKCkgPT0gMCkgbWkgPSB0cnVlCiAgICAgIGNvbnRpbnVlCiAgICB9CiAgICB3ID0gYiAqIHcgKyB4CiAgICBpZiAoKytqID49IGNzKSB7CiAgICAgIHNlbGYuZE11bHRpcGx5KGQpCiAgICAgIHNlbGYuZEFkZE9mZnNldCh3LCAwKQogICAgICBqID0gMAogICAgICB3ID0gMAogICAgfQogIH0KICBpZiAoaiA+IDApIHsKICAgIHNlbGYuZE11bHRpcGx5KE1hdGgucG93KGIsIGopKQogICAgc2VsZi5kQWRkT2Zmc2V0KHcsIDApCiAgfQogIGlmIChtaSkgQmlnSW50ZWdlci5aRVJPLnN1YlRvKHNlbGYsIHNlbGYpCn0KCi8vIChwcm90ZWN0ZWQpIGFsdGVybmF0ZSBjb25zdHJ1Y3RvcgpmdW5jdGlvbiBibnBGcm9tTnVtYmVyKGEsIGIsIGMpIHsKICB2YXIgc2VsZiA9IHRoaXMKICBpZiAoIm51bWJlciIgPT0gdHlwZW9mIGIpIHsKICAgIC8vIG5ldyBCaWdJbnRlZ2VyKGludCxpbnQsUk5HKQogICAgaWYgKGEgPCAyKSBzZWxmLmZyb21JbnQoMSkKICAgIGVsc2UgewogICAgICBzZWxmLmZyb21OdW1iZXIoYSwgYykKICAgICAgaWYgKCFzZWxmLnRlc3RCaXQoYSAtIDEpKSAvLyBmb3JjZSBNU0Igc2V0CiAgICAgICAgc2VsZi5iaXR3aXNlVG8oQmlnSW50ZWdlci5PTkUuc2hpZnRMZWZ0KGEgLSAxKSwgb3Bfb3IsIHNlbGYpCiAgICAgIGlmIChzZWxmLmlzRXZlbigpKSBzZWxmLmRBZGRPZmZzZXQoMSwgMCk7IC8vIGZvcmNlIG9kZAogICAgICB3aGlsZSAoIXNlbGYuaXNQcm9iYWJsZVByaW1lKGIpKSB7CiAgICAgICAgc2VsZi5kQWRkT2Zmc2V0KDIsIDApCiAgICAgICAgaWYgKHNlbGYuYml0TGVuZ3RoKCkgPiBhKSBzZWxmLnN1YlRvKEJpZ0ludGVnZXIuT05FLnNoaWZ0TGVmdChhIC0gMSksIHNlbGYpCiAgICAgIH0KICAgIH0KICB9IGVsc2UgewogICAgLy8gbmV3IEJpZ0ludGVnZXIoaW50LFJORykKICAgIHZhciB4ID0gbmV3IEFycmF5KCksCiAgICAgIHQgPSBhICYgNwogICAgeC5sZW5ndGggPSAoYSA+PiAzKSArIDEKICAgIGIubmV4dEJ5dGVzKHgpCiAgICBpZiAodCA+IDApIHhbMF0gJj0gKCgxIDw8IHQpIC0gMSkKICAgIGVsc2UgeFswXSA9IDAKICAgIHNlbGYuZnJvbVN0cmluZyh4LCAyNTYpCiAgfQp9CgovLyAocHVibGljKSBjb252ZXJ0IHRvIGJpZ2VuZGlhbiBieXRlIGFycmF5CmZ1bmN0aW9uIGJuVG9CeXRlQXJyYXkoKSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgdmFyIGkgPSBzZWxmLnQsCiAgICByID0gbmV3IEFycmF5KCkKICByWzBdID0gc2VsZi5zCiAgdmFyIHAgPSBzZWxmLkRCIC0gKGkgKiBzZWxmLkRCKSAlIDgsCiAgICBkLCBrID0gMAogIGlmIChpLS0gPiAwKSB7CiAgICBpZiAocCA8IHNlbGYuREIgJiYgKGQgPSBzZWxmW2ldID4+IHApICE9IChzZWxmLnMgJiBzZWxmLkRNKSA+PiBwKQogICAgICByW2srK10gPSBkIHwgKHNlbGYucyA8PCAoc2VsZi5EQiAtIHApKQogICAgd2hpbGUgKGkgPj0gMCkgewogICAgICBpZiAocCA8IDgpIHsKICAgICAgICBkID0gKHNlbGZbaV0gJiAoKDEgPDwgcCkgLSAxKSkgPDwgKDggLSBwKQogICAgICAgIGQgfD0gc2VsZlstLWldID4+IChwICs9IHNlbGYuREIgLSA4KQogICAgICB9IGVsc2UgewogICAgICAgIGQgPSAoc2VsZltpXSA+PiAocCAtPSA4KSkgJiAweGZmCiAgICAgICAgaWYgKHAgPD0gMCkgewogICAgICAgICAgcCArPSBzZWxmLkRCCiAgICAgICAgICAtLWkKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKChkICYgMHg4MCkgIT0gMCkgZCB8PSAtMjU2CiAgICAgIGlmIChrID09PSAwICYmIChzZWxmLnMgJiAweDgwKSAhPSAoZCAmIDB4ODApKSsrawogICAgICBpZiAoayA+IDAgfHwgZCAhPSBzZWxmLnMpIHJbaysrXSA9IGQKICAgIH0KICB9CiAgcmV0dXJuIHIKfQoKZnVuY3Rpb24gYm5FcXVhbHMoYSkgewogIHJldHVybiAodGhpcy5jb21wYXJlVG8oYSkgPT0gMCkKfQoKZnVuY3Rpb24gYm5NaW4oYSkgewogIHJldHVybiAodGhpcy5jb21wYXJlVG8oYSkgPCAwKSA/IHRoaXMgOiBhCn0KCmZ1bmN0aW9uIGJuTWF4KGEpIHsKICByZXR1cm4gKHRoaXMuY29tcGFyZVRvKGEpID4gMCkgPyB0aGlzIDogYQp9CgovLyAocHJvdGVjdGVkKSByID0gdGhpcyBvcCBhIChiaXR3aXNlKQpmdW5jdGlvbiBibnBCaXR3aXNlVG8oYSwgb3AsIHIpIHsKICB2YXIgc2VsZiA9IHRoaXMKICB2YXIgaSwgZiwgbSA9IE1hdGgubWluKGEudCwgc2VsZi50KQogIGZvciAoaSA9IDA7IGkgPCBtOyArK2kpIHJbaV0gPSBvcChzZWxmW2ldLCBhW2ldKQogIGlmIChhLnQgPCBzZWxmLnQpIHsKICAgIGYgPSBhLnMgJiBzZWxmLkRNCiAgICBmb3IgKGkgPSBtOyBpIDwgc2VsZi50OyArK2kpIHJbaV0gPSBvcChzZWxmW2ldLCBmKQogICAgci50ID0gc2VsZi50CiAgfSBlbHNlIHsKICAgIGYgPSBzZWxmLnMgJiBzZWxmLkRNCiAgICBmb3IgKGkgPSBtOyBpIDwgYS50OyArK2kpIHJbaV0gPSBvcChmLCBhW2ldKQogICAgci50ID0gYS50CiAgfQogIHIucyA9IG9wKHNlbGYucywgYS5zKQogIHIuY2xhbXAoKQp9CgovLyAocHVibGljKSB0aGlzICYgYQpmdW5jdGlvbiBvcF9hbmQoeCwgeSkgewogIHJldHVybiB4ICYgeQp9CgpmdW5jdGlvbiBibkFuZChhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5iaXR3aXNlVG8oYSwgb3BfYW5kLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgfCBhCmZ1bmN0aW9uIG9wX29yKHgsIHkpIHsKICByZXR1cm4geCB8IHkKfQoKZnVuY3Rpb24gYm5PcihhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5iaXR3aXNlVG8oYSwgb3Bfb3IsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyBeIGEKZnVuY3Rpb24gb3BfeG9yKHgsIHkpIHsKICByZXR1cm4geCBeIHkKfQoKZnVuY3Rpb24gYm5Yb3IoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuYml0d2lzZVRvKGEsIG9wX3hvciwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzICYgfmEKZnVuY3Rpb24gb3BfYW5kbm90KHgsIHkpIHsKICByZXR1cm4geCAmIH55Cn0KCmZ1bmN0aW9uIGJuQW5kTm90KGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmJpdHdpc2VUbyhhLCBvcF9hbmRub3QsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgfnRoaXMKZnVuY3Rpb24gYm5Ob3QoKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnQ7ICsraSkgcltpXSA9IHRoaXMuRE0gJiB+dGhpc1tpXQogIHIudCA9IHRoaXMudAogIHIucyA9IH50aGlzLnMKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzIDw8IG4KZnVuY3Rpb24gYm5TaGlmdExlZnQobikgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIGlmIChuIDwgMCkgdGhpcy5yU2hpZnRUbygtbiwgcikKICBlbHNlIHRoaXMubFNoaWZ0VG8obiwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzID4+IG4KZnVuY3Rpb24gYm5TaGlmdFJpZ2h0KG4pIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICBpZiAobiA8IDApIHRoaXMubFNoaWZ0VG8oLW4sIHIpCiAgZWxzZSB0aGlzLnJTaGlmdFRvKG4sIHIpCiAgcmV0dXJuIHIKfQoKLy8gcmV0dXJuIGluZGV4IG9mIGxvd2VzdCAxLWJpdCBpbiB4LCB4IDwgMl4zMQpmdW5jdGlvbiBsYml0KHgpIHsKICBpZiAoeCA9PSAwKSByZXR1cm4gLTEKICB2YXIgciA9IDAKICBpZiAoKHggJiAweGZmZmYpID09IDApIHsKICAgIHggPj49IDE2CiAgICByICs9IDE2CiAgfQogIGlmICgoeCAmIDB4ZmYpID09IDApIHsKICAgIHggPj49IDgKICAgIHIgKz0gOAogIH0KICBpZiAoKHggJiAweGYpID09IDApIHsKICAgIHggPj49IDQKICAgIHIgKz0gNAogIH0KICBpZiAoKHggJiAzKSA9PSAwKSB7CiAgICB4ID4+PSAyCiAgICByICs9IDIKICB9CiAgaWYgKCh4ICYgMSkgPT0gMCkrK3IKICByZXR1cm4gcgp9CgovLyAocHVibGljKSByZXR1cm5zIGluZGV4IG9mIGxvd2VzdCAxLWJpdCAob3IgLTEgaWYgbm9uZSkKZnVuY3Rpb24gYm5HZXRMb3dlc3RTZXRCaXQoKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnQ7ICsraSkKICAgIGlmICh0aGlzW2ldICE9IDApIHJldHVybiBpICogdGhpcy5EQiArIGxiaXQodGhpc1tpXSkKICBpZiAodGhpcy5zIDwgMCkgcmV0dXJuIHRoaXMudCAqIHRoaXMuREIKICByZXR1cm4gLTEKfQoKLy8gcmV0dXJuIG51bWJlciBvZiAxIGJpdHMgaW4geApmdW5jdGlvbiBjYml0KHgpIHsKICB2YXIgciA9IDAKICB3aGlsZSAoeCAhPSAwKSB7CiAgICB4ICY9IHggLSAxCiAgICArK3IKICB9CiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgcmV0dXJuIG51bWJlciBvZiBzZXQgYml0cwpmdW5jdGlvbiBibkJpdENvdW50KCkgewogIHZhciByID0gMCwKICAgIHggPSB0aGlzLnMgJiB0aGlzLkRNCiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnQ7ICsraSkgciArPSBjYml0KHRoaXNbaV0gXiB4KQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRydWUgaWZmIG50aCBiaXQgaXMgc2V0CmZ1bmN0aW9uIGJuVGVzdEJpdChuKSB7CiAgdmFyIGogPSBNYXRoLmZsb29yKG4gLyB0aGlzLkRCKQogIGlmIChqID49IHRoaXMudCkgcmV0dXJuICh0aGlzLnMgIT0gMCkKICByZXR1cm4gKCh0aGlzW2pdICYgKDEgPDwgKG4gJSB0aGlzLkRCKSkpICE9IDApCn0KCi8vIChwcm90ZWN0ZWQpIHRoaXMgb3AgKDE8PG4pCmZ1bmN0aW9uIGJucENoYW5nZUJpdChuLCBvcCkgewogIHZhciByID0gQmlnSW50ZWdlci5PTkUuc2hpZnRMZWZ0KG4pCiAgdGhpcy5iaXR3aXNlVG8ociwgb3AsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyB8ICgxPDxuKQpmdW5jdGlvbiBiblNldEJpdChuKSB7CiAgcmV0dXJuIHRoaXMuY2hhbmdlQml0KG4sIG9wX29yKQp9CgovLyAocHVibGljKSB0aGlzICYgfigxPDxuKQpmdW5jdGlvbiBibkNsZWFyQml0KG4pIHsKICByZXR1cm4gdGhpcy5jaGFuZ2VCaXQobiwgb3BfYW5kbm90KQp9CgovLyAocHVibGljKSB0aGlzIF4gKDE8PG4pCmZ1bmN0aW9uIGJuRmxpcEJpdChuKSB7CiAgcmV0dXJuIHRoaXMuY2hhbmdlQml0KG4sIG9wX3hvcikKfQoKLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgKyBhCmZ1bmN0aW9uIGJucEFkZFRvKGEsIHIpIHsKICB2YXIgc2VsZiA9IHRoaXMKCiAgdmFyIGkgPSAwLAogICAgYyA9IDAsCiAgICBtID0gTWF0aC5taW4oYS50LCBzZWxmLnQpCiAgd2hpbGUgKGkgPCBtKSB7CiAgICBjICs9IHNlbGZbaV0gKyBhW2ldCiAgICByW2krK10gPSBjICYgc2VsZi5ETQogICAgYyA+Pj0gc2VsZi5EQgogIH0KICBpZiAoYS50IDwgc2VsZi50KSB7CiAgICBjICs9IGEucwogICAgd2hpbGUgKGkgPCBzZWxmLnQpIHsKICAgICAgYyArPSBzZWxmW2ldCiAgICAgIHJbaSsrXSA9IGMgJiBzZWxmLkRNCiAgICAgIGMgPj49IHNlbGYuREIKICAgIH0KICAgIGMgKz0gc2VsZi5zCiAgfSBlbHNlIHsKICAgIGMgKz0gc2VsZi5zCiAgICB3aGlsZSAoaSA8IGEudCkgewogICAgICBjICs9IGFbaV0KICAgICAgcltpKytdID0gYyAmIHNlbGYuRE0KICAgICAgYyA+Pj0gc2VsZi5EQgogICAgfQogICAgYyArPSBhLnMKICB9CiAgci5zID0gKGMgPCAwKSA/IC0xIDogMAogIGlmIChjID4gMCkgcltpKytdID0gYwogIGVsc2UgaWYgKGMgPCAtMSkgcltpKytdID0gc2VsZi5EViArIGMKICByLnQgPSBpCiAgci5jbGFtcCgpCn0KCi8vIChwdWJsaWMpIHRoaXMgKyBhCmZ1bmN0aW9uIGJuQWRkKGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmFkZFRvKGEsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyAtIGEKZnVuY3Rpb24gYm5TdWJ0cmFjdChhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5zdWJUbyhhLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgKiBhCmZ1bmN0aW9uIGJuTXVsdGlwbHkoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMubXVsdGlwbHlUbyhhLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXNeMgpmdW5jdGlvbiBiblNxdWFyZSgpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLnNxdWFyZVRvKHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyAvIGEKZnVuY3Rpb24gYm5EaXZpZGUoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuZGl2UmVtVG8oYSwgciwgbnVsbCkKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzICUgYQpmdW5jdGlvbiBiblJlbWFpbmRlcihhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5kaXZSZW1UbyhhLCBudWxsLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIFt0aGlzL2EsdGhpcyVhXQpmdW5jdGlvbiBibkRpdmlkZUFuZFJlbWFpbmRlcihhKSB7CiAgdmFyIHEgPSBuZXcgQmlnSW50ZWdlcigpLAogICAgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmRpdlJlbVRvKGEsIHEsIHIpCiAgcmV0dXJuIG5ldyBBcnJheShxLCByKQp9CgovLyAocHJvdGVjdGVkKSB0aGlzICo9IG4sIHRoaXMgPj0gMCwgMSA8IG4gPCBEVgpmdW5jdGlvbiBibnBETXVsdGlwbHkobikgewogIHRoaXNbdGhpcy50XSA9IHRoaXMuYW0oMCwgbiAtIDEsIHRoaXMsIDAsIDAsIHRoaXMudCkKICArK3RoaXMudAogIHRoaXMuY2xhbXAoKQp9CgovLyAocHJvdGVjdGVkKSB0aGlzICs9IG4gPDwgdyB3b3JkcywgdGhpcyA+PSAwCmZ1bmN0aW9uIGJucERBZGRPZmZzZXQobiwgdykgewogIGlmIChuID09IDApIHJldHVybgogIHdoaWxlICh0aGlzLnQgPD0gdykgdGhpc1t0aGlzLnQrK10gPSAwCiAgdGhpc1t3XSArPSBuCiAgd2hpbGUgKHRoaXNbd10gPj0gdGhpcy5EVikgewogICAgdGhpc1t3XSAtPSB0aGlzLkRWCiAgICBpZiAoKyt3ID49IHRoaXMudCkgdGhpc1t0aGlzLnQrK10gPSAwCiAgICArK3RoaXNbd10KICB9Cn0KCi8vIEEgIm51bGwiIHJlZHVjZXIKZnVuY3Rpb24gTnVsbEV4cCgpIHt9CgpmdW5jdGlvbiBuTm9wKHgpIHsKICByZXR1cm4geAp9CgpmdW5jdGlvbiBuTXVsVG8oeCwgeSwgcikgewogIHgubXVsdGlwbHlUbyh5LCByKQp9CgpmdW5jdGlvbiBuU3FyVG8oeCwgcikgewogIHguc3F1YXJlVG8ocikKfQoKTnVsbEV4cC5wcm90b3R5cGUuY29udmVydCA9IG5Ob3AKTnVsbEV4cC5wcm90b3R5cGUucmV2ZXJ0ID0gbk5vcApOdWxsRXhwLnByb3RvdHlwZS5tdWxUbyA9IG5NdWxUbwpOdWxsRXhwLnByb3RvdHlwZS5zcXJUbyA9IG5TcXJUbwoKLy8gKHB1YmxpYykgdGhpc15lCmZ1bmN0aW9uIGJuUG93KGUpIHsKICByZXR1cm4gdGhpcy5leHAoZSwgbmV3IE51bGxFeHAoKSkKfQoKLy8gKHByb3RlY3RlZCkgciA9IGxvd2VyIG4gd29yZHMgb2YgInRoaXMgKiBhIiwgYS50IDw9IG4KLy8gInRoaXMiIHNob3VsZCBiZSB0aGUgbGFyZ2VyIG9uZSBpZiBhcHByb3ByaWF0ZS4KZnVuY3Rpb24gYm5wTXVsdGlwbHlMb3dlclRvKGEsIG4sIHIpIHsKICB2YXIgaSA9IE1hdGgubWluKHRoaXMudCArIGEudCwgbikKICByLnMgPSAwOyAvLyBhc3N1bWVzIGEsdGhpcyA+PSAwCiAgci50ID0gaQogIHdoaWxlIChpID4gMCkgclstLWldID0gMAogIHZhciBqCiAgZm9yIChqID0gci50IC0gdGhpcy50OyBpIDwgajsgKytpKSByW2kgKyB0aGlzLnRdID0gdGhpcy5hbSgwLCBhW2ldLCByLCBpLCAwLCB0aGlzLnQpCiAgZm9yIChqID0gTWF0aC5taW4oYS50LCBuKTsgaSA8IGo7ICsraSkgdGhpcy5hbSgwLCBhW2ldLCByLCBpLCAwLCBuIC0gaSkKICByLmNsYW1wKCkKfQoKLy8gKHByb3RlY3RlZCkgciA9ICJ0aGlzICogYSIgd2l0aG91dCBsb3dlciBuIHdvcmRzLCBuID4gMAovLyAidGhpcyIgc2hvdWxkIGJlIHRoZSBsYXJnZXIgb25lIGlmIGFwcHJvcHJpYXRlLgpmdW5jdGlvbiBibnBNdWx0aXBseVVwcGVyVG8oYSwgbiwgcikgewogIC0tbgogIHZhciBpID0gci50ID0gdGhpcy50ICsgYS50IC0gbgogIHIucyA9IDA7IC8vIGFzc3VtZXMgYSx0aGlzID49IDAKICB3aGlsZSAoLS1pID49IDApIHJbaV0gPSAwCiAgZm9yIChpID0gTWF0aC5tYXgobiAtIHRoaXMudCwgMCk7IGkgPCBhLnQ7ICsraSkKICAgIHJbdGhpcy50ICsgaSAtIG5dID0gdGhpcy5hbShuIC0gaSwgYVtpXSwgciwgMCwgMCwgdGhpcy50ICsgaSAtIG4pCiAgci5jbGFtcCgpCiAgci5kclNoaWZ0VG8oMSwgcikKfQoKLy8gQmFycmV0dCBtb2R1bGFyIHJlZHVjdGlvbgpmdW5jdGlvbiBCYXJyZXR0KG0pIHsKICAvLyBzZXR1cCBCYXJyZXR0CiAgdGhpcy5yMiA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLnEzID0gbmV3IEJpZ0ludGVnZXIoKQogIEJpZ0ludGVnZXIuT05FLmRsU2hpZnRUbygyICogbS50LCB0aGlzLnIyKQogIHRoaXMubXUgPSB0aGlzLnIyLmRpdmlkZShtKQogIHRoaXMubSA9IG0KfQoKZnVuY3Rpb24gYmFycmV0dENvbnZlcnQoeCkgewogIGlmICh4LnMgPCAwIHx8IHgudCA+IDIgKiB0aGlzLm0udCkgcmV0dXJuIHgubW9kKHRoaXMubSkKICBlbHNlIGlmICh4LmNvbXBhcmVUbyh0aGlzLm0pIDwgMCkgcmV0dXJuIHgKICBlbHNlIHsKICAgIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogICAgeC5jb3B5VG8ocikKICAgIHRoaXMucmVkdWNlKHIpCiAgICByZXR1cm4gcgogIH0KfQoKZnVuY3Rpb24gYmFycmV0dFJldmVydCh4KSB7CiAgcmV0dXJuIHgKfQoKLy8geCA9IHggbW9kIG0gKEhBQyAxNC40MikKZnVuY3Rpb24gYmFycmV0dFJlZHVjZSh4KSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgeC5kclNoaWZ0VG8oc2VsZi5tLnQgLSAxLCBzZWxmLnIyKQogIGlmICh4LnQgPiBzZWxmLm0udCArIDEpIHsKICAgIHgudCA9IHNlbGYubS50ICsgMQogICAgeC5jbGFtcCgpCiAgfQogIHNlbGYubXUubXVsdGlwbHlVcHBlclRvKHNlbGYucjIsIHNlbGYubS50ICsgMSwgc2VsZi5xMykKICBzZWxmLm0ubXVsdGlwbHlMb3dlclRvKHNlbGYucTMsIHNlbGYubS50ICsgMSwgc2VsZi5yMikKICB3aGlsZSAoeC5jb21wYXJlVG8oc2VsZi5yMikgPCAwKSB4LmRBZGRPZmZzZXQoMSwgc2VsZi5tLnQgKyAxKQogIHguc3ViVG8oc2VsZi5yMiwgeCkKICB3aGlsZSAoeC5jb21wYXJlVG8oc2VsZi5tKSA+PSAwKSB4LnN1YlRvKHNlbGYubSwgeCkKfQoKLy8gciA9IHheMiBtb2QgbTsgeCAhPSByCmZ1bmN0aW9uIGJhcnJldHRTcXJUbyh4LCByKSB7CiAgeC5zcXVhcmVUbyhyKQogIHRoaXMucmVkdWNlKHIpCn0KCi8vIHIgPSB4KnkgbW9kIG07IHgseSAhPSByCmZ1bmN0aW9uIGJhcnJldHRNdWxUbyh4LCB5LCByKSB7CiAgeC5tdWx0aXBseVRvKHksIHIpCiAgdGhpcy5yZWR1Y2UocikKfQoKQmFycmV0dC5wcm90b3R5cGUuY29udmVydCA9IGJhcnJldHRDb252ZXJ0CkJhcnJldHQucHJvdG90eXBlLnJldmVydCA9IGJhcnJldHRSZXZlcnQKQmFycmV0dC5wcm90b3R5cGUucmVkdWNlID0gYmFycmV0dFJlZHVjZQpCYXJyZXR0LnByb3RvdHlwZS5tdWxUbyA9IGJhcnJldHRNdWxUbwpCYXJyZXR0LnByb3RvdHlwZS5zcXJUbyA9IGJhcnJldHRTcXJUbwoKLy8gKHB1YmxpYykgdGhpc15lICUgbSAoSEFDIDE0Ljg1KQpmdW5jdGlvbiBibk1vZFBvdyhlLCBtKSB7CiAgdmFyIGkgPSBlLmJpdExlbmd0aCgpLAogICAgaywgciA9IG5idigxKSwKICAgIHoKICBpZiAoaSA8PSAwKSByZXR1cm4gcgogIGVsc2UgaWYgKGkgPCAxOCkgayA9IDEKICBlbHNlIGlmIChpIDwgNDgpIGsgPSAzCiAgZWxzZSBpZiAoaSA8IDE0NCkgayA9IDQKICBlbHNlIGlmIChpIDwgNzY4KSBrID0gNQogIGVsc2UgayA9IDYKICBpZiAoaSA8IDgpCiAgICB6ID0gbmV3IENsYXNzaWMobSkKICBlbHNlIGlmIChtLmlzRXZlbigpKQogICAgeiA9IG5ldyBCYXJyZXR0KG0pCiAgZWxzZQogICAgeiA9IG5ldyBNb250Z29tZXJ5KG0pCgogIC8vIHByZWNvbXB1dGF0aW9uCiAgdmFyIGcgPSBuZXcgQXJyYXkoKSwKICAgIG4gPSAzLAogICAgazEgPSBrIC0gMSwKICAgIGttID0gKDEgPDwgaykgLSAxCiAgZ1sxXSA9IHouY29udmVydCh0aGlzKQogIGlmIChrID4gMSkgewogICAgdmFyIGcyID0gbmV3IEJpZ0ludGVnZXIoKQogICAgei5zcXJUbyhnWzFdLCBnMikKICAgIHdoaWxlIChuIDw9IGttKSB7CiAgICAgIGdbbl0gPSBuZXcgQmlnSW50ZWdlcigpCiAgICAgIHoubXVsVG8oZzIsIGdbbiAtIDJdLCBnW25dKQogICAgICBuICs9IDIKICAgIH0KICB9CgogIHZhciBqID0gZS50IC0gMSwKICAgIHcsIGlzMSA9IHRydWUsCiAgICByMiA9IG5ldyBCaWdJbnRlZ2VyKCksCiAgICB0CiAgaSA9IG5iaXRzKGVbal0pIC0gMQogIHdoaWxlIChqID49IDApIHsKICAgIGlmIChpID49IGsxKSB3ID0gKGVbal0gPj4gKGkgLSBrMSkpICYga20KICAgIGVsc2UgewogICAgICB3ID0gKGVbal0gJiAoKDEgPDwgKGkgKyAxKSkgLSAxKSkgPDwgKGsxIC0gaSkKICAgICAgaWYgKGogPiAwKSB3IHw9IGVbaiAtIDFdID4+ICh0aGlzLkRCICsgaSAtIGsxKQogICAgfQoKICAgIG4gPSBrCiAgICB3aGlsZSAoKHcgJiAxKSA9PSAwKSB7CiAgICAgIHcgPj49IDEKICAgICAgLS1uCiAgICB9CiAgICBpZiAoKGkgLT0gbikgPCAwKSB7CiAgICAgIGkgKz0gdGhpcy5EQgogICAgICAtLWoKICAgIH0KICAgIGlmIChpczEpIHsgLy8gcmV0ID09IDEsIGRvbid0IGJvdGhlciBzcXVhcmluZyBvciBtdWx0aXBseWluZyBpdAogICAgICBnW3ddLmNvcHlUbyhyKQogICAgICBpczEgPSBmYWxzZQogICAgfSBlbHNlIHsKICAgICAgd2hpbGUgKG4gPiAxKSB7CiAgICAgICAgei5zcXJUbyhyLCByMikKICAgICAgICB6LnNxclRvKHIyLCByKQogICAgICAgIG4gLT0gMgogICAgICB9CiAgICAgIGlmIChuID4gMCkgei5zcXJUbyhyLCByMikKICAgICAgZWxzZSB7CiAgICAgICAgdCA9IHIKICAgICAgICByID0gcjIKICAgICAgICByMiA9IHQKICAgICAgfQogICAgICB6Lm11bFRvKHIyLCBnW3ddLCByKQogICAgfQoKICAgIHdoaWxlIChqID49IDAgJiYgKGVbal0gJiAoMSA8PCBpKSkgPT0gMCkgewogICAgICB6LnNxclRvKHIsIHIyKQogICAgICB0ID0gcgogICAgICByID0gcjIKICAgICAgcjIgPSB0CiAgICAgIGlmICgtLWkgPCAwKSB7CiAgICAgICAgaSA9IHRoaXMuREIgLSAxCiAgICAgICAgLS1qCiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIHoucmV2ZXJ0KHIpCn0KCi8vIChwdWJsaWMpIGdjZCh0aGlzLGEpIChIQUMgMTQuNTQpCmZ1bmN0aW9uIGJuR0NEKGEpIHsKICB2YXIgeCA9ICh0aGlzLnMgPCAwKSA/IHRoaXMubmVnYXRlKCkgOiB0aGlzLmNsb25lKCkKICB2YXIgeSA9IChhLnMgPCAwKSA/IGEubmVnYXRlKCkgOiBhLmNsb25lKCkKICBpZiAoeC5jb21wYXJlVG8oeSkgPCAwKSB7CiAgICB2YXIgdCA9IHgKICAgIHggPSB5CiAgICB5ID0gdAogIH0KICB2YXIgaSA9IHguZ2V0TG93ZXN0U2V0Qml0KCksCiAgICBnID0geS5nZXRMb3dlc3RTZXRCaXQoKQogIGlmIChnIDwgMCkgcmV0dXJuIHgKICBpZiAoaSA8IGcpIGcgPSBpCiAgaWYgKGcgPiAwKSB7CiAgICB4LnJTaGlmdFRvKGcsIHgpCiAgICB5LnJTaGlmdFRvKGcsIHkpCiAgfQogIHdoaWxlICh4LnNpZ251bSgpID4gMCkgewogICAgaWYgKChpID0geC5nZXRMb3dlc3RTZXRCaXQoKSkgPiAwKSB4LnJTaGlmdFRvKGksIHgpCiAgICBpZiAoKGkgPSB5LmdldExvd2VzdFNldEJpdCgpKSA+IDApIHkuclNoaWZ0VG8oaSwgeSkKICAgIGlmICh4LmNvbXBhcmVUbyh5KSA+PSAwKSB7CiAgICAgIHguc3ViVG8oeSwgeCkKICAgICAgeC5yU2hpZnRUbygxLCB4KQogICAgfSBlbHNlIHsKICAgICAgeS5zdWJUbyh4LCB5KQogICAgICB5LnJTaGlmdFRvKDEsIHkpCiAgICB9CiAgfQogIGlmIChnID4gMCkgeS5sU2hpZnRUbyhnLCB5KQogIHJldHVybiB5Cn0KCi8vIChwcm90ZWN0ZWQpIHRoaXMgJSBuLCBuIDwgMl4yNgpmdW5jdGlvbiBibnBNb2RJbnQobikgewogIGlmIChuIDw9IDApIHJldHVybiAwCiAgdmFyIGQgPSB0aGlzLkRWICUgbiwKICAgIHIgPSAodGhpcy5zIDwgMCkgPyBuIC0gMSA6IDAKICBpZiAodGhpcy50ID4gMCkKICAgIGlmIChkID09IDApIHIgPSB0aGlzWzBdICUgbgogICAgZWxzZQogICAgICBmb3IgKHZhciBpID0gdGhpcy50IC0gMTsgaSA+PSAwOyAtLWkpIHIgPSAoZCAqIHIgKyB0aGlzW2ldKSAlIG4KICByZXR1cm4gcgp9CgovLyAocHVibGljKSAxL3RoaXMgJSBtIChIQUMgMTQuNjEpCmZ1bmN0aW9uIGJuTW9kSW52ZXJzZShtKSB7CiAgdmFyIGFjID0gbS5pc0V2ZW4oKQogIGlmICh0aGlzLnNpZ251bSgpID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ2RpdmlzaW9uIGJ5IHplcm8nKQogIGlmICgodGhpcy5pc0V2ZW4oKSAmJiBhYykgfHwgbS5zaWdudW0oKSA9PSAwKSByZXR1cm4gQmlnSW50ZWdlci5aRVJPCiAgdmFyIHUgPSBtLmNsb25lKCksCiAgICB2ID0gdGhpcy5jbG9uZSgpCiAgdmFyIGEgPSBuYnYoMSksCiAgICBiID0gbmJ2KDApLAogICAgYyA9IG5idigwKSwKICAgIGQgPSBuYnYoMSkKICB3aGlsZSAodS5zaWdudW0oKSAhPSAwKSB7CiAgICB3aGlsZSAodS5pc0V2ZW4oKSkgewogICAgICB1LnJTaGlmdFRvKDEsIHUpCiAgICAgIGlmIChhYykgewogICAgICAgIGlmICghYS5pc0V2ZW4oKSB8fCAhYi5pc0V2ZW4oKSkgewogICAgICAgICAgYS5hZGRUbyh0aGlzLCBhKQogICAgICAgICAgYi5zdWJUbyhtLCBiKQogICAgICAgIH0KICAgICAgICBhLnJTaGlmdFRvKDEsIGEpCiAgICAgIH0gZWxzZSBpZiAoIWIuaXNFdmVuKCkpIGIuc3ViVG8obSwgYikKICAgICAgYi5yU2hpZnRUbygxLCBiKQogICAgfQogICAgd2hpbGUgKHYuaXNFdmVuKCkpIHsKICAgICAgdi5yU2hpZnRUbygxLCB2KQogICAgICBpZiAoYWMpIHsKICAgICAgICBpZiAoIWMuaXNFdmVuKCkgfHwgIWQuaXNFdmVuKCkpIHsKICAgICAgICAgIGMuYWRkVG8odGhpcywgYykKICAgICAgICAgIGQuc3ViVG8obSwgZCkKICAgICAgICB9CiAgICAgICAgYy5yU2hpZnRUbygxLCBjKQogICAgICB9IGVsc2UgaWYgKCFkLmlzRXZlbigpKSBkLnN1YlRvKG0sIGQpCiAgICAgIGQuclNoaWZ0VG8oMSwgZCkKICAgIH0KICAgIGlmICh1LmNvbXBhcmVUbyh2KSA+PSAwKSB7CiAgICAgIHUuc3ViVG8odiwgdSkKICAgICAgaWYgKGFjKSBhLnN1YlRvKGMsIGEpCiAgICAgIGIuc3ViVG8oZCwgYikKICAgIH0gZWxzZSB7CiAgICAgIHYuc3ViVG8odSwgdikKICAgICAgaWYgKGFjKSBjLnN1YlRvKGEsIGMpCiAgICAgIGQuc3ViVG8oYiwgZCkKICAgIH0KICB9CiAgaWYgKHYuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKSAhPSAwKSByZXR1cm4gQmlnSW50ZWdlci5aRVJPCiAgaWYgKGQuY29tcGFyZVRvKG0pID49IDApIHJldHVybiBkLnN1YnRyYWN0KG0pCiAgaWYgKGQuc2lnbnVtKCkgPCAwKSBkLmFkZFRvKG0sIGQpCiAgZWxzZSByZXR1cm4gZAogIGlmIChkLnNpZ251bSgpIDwgMCkgcmV0dXJuIGQuYWRkKG0pCiAgZWxzZSByZXR1cm4gZAp9Cgp2YXIgbG93cHJpbWVzID0gWwogIDIsIDMsIDUsIDcsIDExLCAxMywgMTcsIDE5LCAyMywgMjksIDMxLCAzNywgNDEsIDQzLCA0NywgNTMsIDU5LCA2MSwgNjcsIDcxLAogIDczLCA3OSwgODMsIDg5LCA5NywgMTAxLCAxMDMsIDEwNywgMTA5LCAxMTMsIDEyNywgMTMxLCAxMzcsIDEzOSwgMTQ5LCAxNTEsCiAgMTU3LCAxNjMsIDE2NywgMTczLCAxNzksIDE4MSwgMTkxLCAxOTMsIDE5NywgMTk5LCAyMTEsIDIyMywgMjI3LCAyMjksIDIzMywKICAyMzksIDI0MSwgMjUxLCAyNTcsIDI2MywgMjY5LCAyNzEsIDI3NywgMjgxLCAyODMsIDI5MywgMzA3LCAzMTEsIDMxMywgMzE3LAogIDMzMSwgMzM3LCAzNDcsIDM0OSwgMzUzLCAzNTksIDM2NywgMzczLCAzNzksIDM4MywgMzg5LCAzOTcsIDQwMSwgNDA5LCA0MTksCiAgNDIxLCA0MzEsIDQzMywgNDM5LCA0NDMsIDQ0OSwgNDU3LCA0NjEsIDQ2MywgNDY3LCA0NzksIDQ4NywgNDkxLCA0OTksIDUwMywKICA1MDksIDUyMSwgNTIzLCA1NDEsIDU0NywgNTU3LCA1NjMsIDU2OSwgNTcxLCA1NzcsIDU4NywgNTkzLCA1OTksIDYwMSwgNjA3LAogIDYxMywgNjE3LCA2MTksIDYzMSwgNjQxLCA2NDMsIDY0NywgNjUzLCA2NTksIDY2MSwgNjczLCA2NzcsIDY4MywgNjkxLCA3MDEsCiAgNzA5LCA3MTksIDcyNywgNzMzLCA3MzksIDc0MywgNzUxLCA3NTcsIDc2MSwgNzY5LCA3NzMsIDc4NywgNzk3LCA4MDksIDgxMSwKICA4MjEsIDgyMywgODI3LCA4MjksIDgzOSwgODUzLCA4NTcsIDg1OSwgODYzLCA4NzcsIDg4MSwgODgzLCA4ODcsIDkwNywgOTExLAogIDkxOSwgOTI5LCA5MzcsIDk0MSwgOTQ3LCA5NTMsIDk2NywgOTcxLCA5NzcsIDk4MywgOTkxLCA5OTcKXQoKdmFyIGxwbGltID0gKDEgPDwgMjYpIC8gbG93cHJpbWVzW2xvd3ByaW1lcy5sZW5ndGggLSAxXQoKLy8gKHB1YmxpYykgdGVzdCBwcmltYWxpdHkgd2l0aCBjZXJ0YWludHkgPj0gMS0uNV50CmZ1bmN0aW9uIGJuSXNQcm9iYWJsZVByaW1lKHQpIHsKICB2YXIgaSwgeCA9IHRoaXMuYWJzKCkKICBpZiAoeC50ID09IDEgJiYgeFswXSA8PSBsb3dwcmltZXNbbG93cHJpbWVzLmxlbmd0aCAtIDFdKSB7CiAgICBmb3IgKGkgPSAwOyBpIDwgbG93cHJpbWVzLmxlbmd0aDsgKytpKQogICAgICBpZiAoeFswXSA9PSBsb3dwcmltZXNbaV0pIHJldHVybiB0cnVlCiAgICByZXR1cm4gZmFsc2UKICB9CiAgaWYgKHguaXNFdmVuKCkpIHJldHVybiBmYWxzZQogIGkgPSAxCiAgd2hpbGUgKGkgPCBsb3dwcmltZXMubGVuZ3RoKSB7CiAgICB2YXIgbSA9IGxvd3ByaW1lc1tpXSwKICAgICAgaiA9IGkgKyAxCiAgICB3aGlsZSAoaiA8IGxvd3ByaW1lcy5sZW5ndGggJiYgbSA8IGxwbGltKSBtICo9IGxvd3ByaW1lc1tqKytdCiAgICBtID0geC5tb2RJbnQobSkKICAgIHdoaWxlIChpIDwgaikgaWYgKG0gJSBsb3dwcmltZXNbaSsrXSA9PSAwKSByZXR1cm4gZmFsc2UKICB9CiAgcmV0dXJuIHgubWlsbGVyUmFiaW4odCkKfQoKLy8gKHByb3RlY3RlZCkgdHJ1ZSBpZiBwcm9iYWJseSBwcmltZSAoSEFDIDQuMjQsIE1pbGxlci1SYWJpbikKZnVuY3Rpb24gYm5wTWlsbGVyUmFiaW4odCkgewogIHZhciBuMSA9IHRoaXMuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpCiAgdmFyIGsgPSBuMS5nZXRMb3dlc3RTZXRCaXQoKQogIGlmIChrIDw9IDApIHJldHVybiBmYWxzZQogIHZhciByID0gbjEuc2hpZnRSaWdodChrKQogIHQgPSAodCArIDEpID4+IDEKICBpZiAodCA+IGxvd3ByaW1lcy5sZW5ndGgpIHQgPSBsb3dwcmltZXMubGVuZ3RoCiAgdmFyIGEgPSBuZXcgQmlnSW50ZWdlcihudWxsKQogIHZhciBqLCBiYXNlcyA9IFtdCiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0OyArK2kpIHsKICAgIGZvciAoOzspIHsKICAgICAgaiA9IGxvd3ByaW1lc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsb3dwcmltZXMubGVuZ3RoKV0KICAgICAgaWYgKGJhc2VzLmluZGV4T2YoaikgPT0gLTEpIGJyZWFrCiAgICB9CiAgICBiYXNlcy5wdXNoKGopCiAgICBhLmZyb21JbnQoaikKICAgIHZhciB5ID0gYS5tb2RQb3cociwgdGhpcykKICAgIGlmICh5LmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSkgIT0gMCAmJiB5LmNvbXBhcmVUbyhuMSkgIT0gMCkgewogICAgICB2YXIgaiA9IDEKICAgICAgd2hpbGUgKGorKyA8IGsgJiYgeS5jb21wYXJlVG8objEpICE9IDApIHsKICAgICAgICB5ID0geS5tb2RQb3dJbnQoMiwgdGhpcykKICAgICAgICBpZiAoeS5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpID09IDApIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIGlmICh5LmNvbXBhcmVUbyhuMSkgIT0gMCkgcmV0dXJuIGZhbHNlCiAgICB9CiAgfQogIHJldHVybiB0cnVlCn0KCi8vIHByb3RlY3RlZApwcm90by5jaHVua1NpemUgPSBibnBDaHVua1NpemUKcHJvdG8udG9SYWRpeCA9IGJucFRvUmFkaXgKcHJvdG8uZnJvbVJhZGl4ID0gYm5wRnJvbVJhZGl4CnByb3RvLmZyb21OdW1iZXIgPSBibnBGcm9tTnVtYmVyCnByb3RvLmJpdHdpc2VUbyA9IGJucEJpdHdpc2VUbwpwcm90by5jaGFuZ2VCaXQgPSBibnBDaGFuZ2VCaXQKcHJvdG8uYWRkVG8gPSBibnBBZGRUbwpwcm90by5kTXVsdGlwbHkgPSBibnBETXVsdGlwbHkKcHJvdG8uZEFkZE9mZnNldCA9IGJucERBZGRPZmZzZXQKcHJvdG8ubXVsdGlwbHlMb3dlclRvID0gYm5wTXVsdGlwbHlMb3dlclRvCnByb3RvLm11bHRpcGx5VXBwZXJUbyA9IGJucE11bHRpcGx5VXBwZXJUbwpwcm90by5tb2RJbnQgPSBibnBNb2RJbnQKcHJvdG8ubWlsbGVyUmFiaW4gPSBibnBNaWxsZXJSYWJpbgoKLy8gcHVibGljCnByb3RvLmNsb25lID0gYm5DbG9uZQpwcm90by5pbnRWYWx1ZSA9IGJuSW50VmFsdWUKcHJvdG8uYnl0ZVZhbHVlID0gYm5CeXRlVmFsdWUKcHJvdG8uc2hvcnRWYWx1ZSA9IGJuU2hvcnRWYWx1ZQpwcm90by5zaWdudW0gPSBiblNpZ051bQpwcm90by50b0J5dGVBcnJheSA9IGJuVG9CeXRlQXJyYXkKcHJvdG8uZXF1YWxzID0gYm5FcXVhbHMKcHJvdG8ubWluID0gYm5NaW4KcHJvdG8ubWF4ID0gYm5NYXgKcHJvdG8uYW5kID0gYm5BbmQKcHJvdG8ub3IgPSBibk9yCnByb3RvLnhvciA9IGJuWG9yCnByb3RvLmFuZE5vdCA9IGJuQW5kTm90CnByb3RvLm5vdCA9IGJuTm90CnByb3RvLnNoaWZ0TGVmdCA9IGJuU2hpZnRMZWZ0CnByb3RvLnNoaWZ0UmlnaHQgPSBiblNoaWZ0UmlnaHQKcHJvdG8uZ2V0TG93ZXN0U2V0Qml0ID0gYm5HZXRMb3dlc3RTZXRCaXQKcHJvdG8uYml0Q291bnQgPSBibkJpdENvdW50CnByb3RvLnRlc3RCaXQgPSBiblRlc3RCaXQKcHJvdG8uc2V0Qml0ID0gYm5TZXRCaXQKcHJvdG8uY2xlYXJCaXQgPSBibkNsZWFyQml0CnByb3RvLmZsaXBCaXQgPSBibkZsaXBCaXQKcHJvdG8uYWRkID0gYm5BZGQKcHJvdG8uc3VidHJhY3QgPSBiblN1YnRyYWN0CnByb3RvLm11bHRpcGx5ID0gYm5NdWx0aXBseQpwcm90by5kaXZpZGUgPSBibkRpdmlkZQpwcm90by5yZW1haW5kZXIgPSBiblJlbWFpbmRlcgpwcm90by5kaXZpZGVBbmRSZW1haW5kZXIgPSBibkRpdmlkZUFuZFJlbWFpbmRlcgpwcm90by5tb2RQb3cgPSBibk1vZFBvdwpwcm90by5tb2RJbnZlcnNlID0gYm5Nb2RJbnZlcnNlCnByb3RvLnBvdyA9IGJuUG93CnByb3RvLmdjZCA9IGJuR0NECnByb3RvLmlzUHJvYmFibGVQcmltZSA9IGJuSXNQcm9iYWJsZVByaW1lCgovLyBKU0JOLXNwZWNpZmljIGV4dGVuc2lvbgpwcm90by5zcXVhcmUgPSBiblNxdWFyZQoKLy8gY29uc3RhbnRzCkJpZ0ludGVnZXIuWkVSTyA9IG5idigwKQpCaWdJbnRlZ2VyLk9ORSA9IG5idigxKQpCaWdJbnRlZ2VyLnZhbHVlT2YgPSBuYnYKCm1vZHVsZS5leHBvcnRzID0gQmlnSW50ZWdlcgoKfSx7Ii4uL3BhY2thZ2UuanNvbiI6MjF9XSwxOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLy8gRklYTUU6IEtpbmQgb2YgYSB3ZWlyZCB3YXkgdG8gdGhyb3cgZXhjZXB0aW9ucywgY29uc2lkZXIgcmVtb3ZpbmcKdmFyIGFzc2VydCA9IHJlcXVpcmUoJ2Fzc2VydCcpCnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnLi9iaWdpJykKCi8qKgogKiBUdXJucyBhIGJ5dGUgYXJyYXkgaW50byBhIGJpZyBpbnRlZ2VyLgogKgogKiBUaGlzIGZ1bmN0aW9uIHdpbGwgaW50ZXJwcmV0IGEgYnl0ZSBhcnJheSBhcyBhIGJpZyBpbnRlZ2VyIGluIGJpZwogKiBlbmRpYW4gbm90YXRpb24uCiAqLwpCaWdJbnRlZ2VyLmZyb21CeXRlQXJyYXlVbnNpZ25lZCA9IGZ1bmN0aW9uKGJ5dGVBcnJheSkgewogIC8vIEJpZ0ludGVnZXIgZXhwZWN0cyBhIERFUiBpbnRlZ2VyIGNvbmZvcm1hbnQgYnl0ZSBhcnJheQogIGlmIChieXRlQXJyYXlbMF0gJiAweDgwKSB7CiAgICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoWzBdLmNvbmNhdChieXRlQXJyYXkpKQogIH0KCiAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGJ5dGVBcnJheSkKfQoKLyoqCiAqIFJldHVybnMgYSBieXRlIGFycmF5IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBiaWcgaW50ZWdlci4KICoKICogVGhpcyByZXR1cm5zIHRoZSBhYnNvbHV0ZSBvZiB0aGUgY29udGFpbmVkIHZhbHVlIGluIGJpZyBlbmRpYW4KICogZm9ybS4gQSB2YWx1ZSBvZiB6ZXJvIHJlc3VsdHMgaW4gYW4gZW1wdHkgYXJyYXkuCiAqLwpCaWdJbnRlZ2VyLnByb3RvdHlwZS50b0J5dGVBcnJheVVuc2lnbmVkID0gZnVuY3Rpb24oKSB7CiAgdmFyIGJ5dGVBcnJheSA9IHRoaXMudG9CeXRlQXJyYXkoKQogIHJldHVybiBieXRlQXJyYXlbMF0gPT09IDAgPyBieXRlQXJyYXkuc2xpY2UoMSkgOiBieXRlQXJyYXkKfQoKQmlnSW50ZWdlci5mcm9tREVSSW50ZWdlciA9IGZ1bmN0aW9uKGJ5dGVBcnJheSkgewogIHJldHVybiBuZXcgQmlnSW50ZWdlcihieXRlQXJyYXkpCn0KCi8qCiAqIENvbnZlcnRzIEJpZ0ludGVnZXIgdG8gYSBERVIgaW50ZWdlciByZXByZXNlbnRhdGlvbi4KICoKICogVGhlIGZvcm1hdCBmb3IgdGhpcyB2YWx1ZSB1c2VzIHRoZSBtb3N0IHNpZ25pZmljYW50IGJpdCBhcyBhIHNpZ24KICogYml0LiAgSWYgdGhlIG1vc3Qgc2lnbmlmaWNhbnQgYml0IGlzIGFscmVhZHkgc2V0IGFuZCB0aGUgaW50ZWdlciBpcwogKiBwb3NpdGl2ZSwgYSAweDAwIGlzIHByZXBlbmRlZC4KICoKICogRXhhbXBsZXM6CiAqCiAqICAgICAgMCA9PiAgICAgMHgwMAogKiAgICAgIDEgPT4gICAgIDB4MDEKICogICAgIC0xID0+ICAgICAweGZmCiAqICAgIDEyNyA9PiAgICAgMHg3ZgogKiAgIC0xMjcgPT4gICAgIDB4ODEKICogICAgMTI4ID0+ICAgMHgwMDgwCiAqICAgLTEyOCA9PiAgICAgMHg4MAogKiAgICAyNTUgPT4gICAweDAwZmYKICogICAtMjU1ID0+ICAgMHhmZjAxCiAqICAxNjMwMCA9PiAgIDB4M2ZhYwogKiAtMTYzMDAgPT4gICAweGMwNTQKICogIDYyMzAwID0+IDB4MDBmMzVjCiAqIC02MjMwMCA9PiAweGZmMGNhNAoqLwpCaWdJbnRlZ2VyLnByb3RvdHlwZS50b0RFUkludGVnZXIgPSBCaWdJbnRlZ2VyLnByb3RvdHlwZS50b0J5dGVBcnJheQoKQmlnSW50ZWdlci5mcm9tQnVmZmVyID0gZnVuY3Rpb24oYnVmZmVyKSB7CiAgLy8gQmlnSW50ZWdlciBleHBlY3RzIGEgREVSIGludGVnZXIgY29uZm9ybWFudCBieXRlIGFycmF5CiAgaWYgKGJ1ZmZlclswXSAmIDB4ODApIHsKICAgIHZhciBieXRlQXJyYXkgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChidWZmZXIpCgogICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKFswXS5jb25jYXQoYnl0ZUFycmF5KSkKICB9CgogIHJldHVybiBuZXcgQmlnSW50ZWdlcihidWZmZXIpCn0KCkJpZ0ludGVnZXIuZnJvbUhleCA9IGZ1bmN0aW9uKGhleCkgewogIGlmIChoZXggPT09ICcnKSByZXR1cm4gQmlnSW50ZWdlci5aRVJPCgogIGFzc2VydC5lcXVhbChoZXgsIGhleC5tYXRjaCgvXltBLUZhLWYwLTldKy8pLCAnSW52YWxpZCBoZXggc3RyaW5nJykKICBhc3NlcnQuZXF1YWwoaGV4Lmxlbmd0aCAlIDIsIDAsICdJbmNvbXBsZXRlIGhleCcpCiAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGhleCwgMTYpCn0KCkJpZ0ludGVnZXIucHJvdG90eXBlLnRvQnVmZmVyID0gZnVuY3Rpb24oc2l6ZSkgewogIHZhciBieXRlQXJyYXkgPSB0aGlzLnRvQnl0ZUFycmF5VW5zaWduZWQoKQogIHZhciB6ZXJvcyA9IFtdCgogIHZhciBwYWRkaW5nID0gc2l6ZSAtIGJ5dGVBcnJheS5sZW5ndGgKICB3aGlsZSAoemVyb3MubGVuZ3RoIDwgcGFkZGluZykgemVyb3MucHVzaCgwKQoKICByZXR1cm4gbmV3IEJ1ZmZlcih6ZXJvcy5jb25jYXQoYnl0ZUFycmF5KSkKfQoKQmlnSW50ZWdlci5wcm90b3R5cGUudG9IZXggPSBmdW5jdGlvbihzaXplKSB7CiAgcmV0dXJuIHRoaXMudG9CdWZmZXIoc2l6ZSkudG9TdHJpbmcoJ2hleCcpCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2JpZ2kiOjE4LCJhc3NlcnQiOjE1LCJidWZmZXIiOjc2fV0sMjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJy4vYmlnaScpCgovL2FkZG9ucwpyZXF1aXJlKCcuL2NvbnZlcnQnKQoKbW9kdWxlLmV4cG9ydHMgPSBCaWdJbnRlZ2VyCn0seyIuL2JpZ2kiOjE4LCIuL2NvbnZlcnQiOjE5fV0sMjE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cz17CiAgIl9hcmdzIjogWwogICAgWwogICAgICAiYmlnaUBeMS40LjAiLAogICAgICAiL2hvbWUvdnNpbHZhL3B0LWlub3ZhY2FvL3JldGhpbmstcHJvamVjdC9kZXYtcnVudGltZS1jb3JlL25vZGVfbW9kdWxlcy9iaXRjb2luanMtbGliIgogICAgXQogIF0sCiAgIl9mcm9tIjogImJpZ2lAPj0xLjQuMCA8Mi4wLjAiLAogICJfaWQiOiAiYmlnaUAxLjQuMSIsCiAgIl9pbkNhY2hlIjogdHJ1ZSwKICAiX2luc3RhbGxhYmxlIjogdHJ1ZSwKICAiX2xvY2F0aW9uIjogIi9iaWdpIiwKICAiX25vZGVWZXJzaW9uIjogIjIuMS4wIiwKICAiX25wbVVzZXIiOiB7CiAgICAiZW1haWwiOiAianByaWNoYXJkc29uQGdtYWlsLmNvbSIsCiAgICAibmFtZSI6ICJqcHJpY2hhcmRzb24iCiAgfSwKICAiX25wbVZlcnNpb24iOiAiMi4xMC4xIiwKICAiX3BoYW50b21DaGlsZHJlbiI6IHt9LAogICJfcmVxdWVzdGVkIjogewogICAgIm5hbWUiOiAiYmlnaSIsCiAgICAicmF3IjogImJpZ2lAXjEuNC4wIiwKICAgICJyYXdTcGVjIjogIl4xLjQuMCIsCiAgICAic2NvcGUiOiBudWxsLAogICAgInNwZWMiOiAiPj0xLjQuMCA8Mi4wLjAiLAogICAgInR5cGUiOiAicmFuZ2UiCiAgfSwKICAiX3JlcXVpcmVkQnkiOiBbCiAgICAiL2JpdGNvaW5qcy1saWIiLAogICAgIi9lY3VydmUiCiAgXSwKICAiX3Jlc29sdmVkIjogImh0dHBzOi8vcmVnaXN0cnkubnBtanMub3JnL2JpZ2kvLS9iaWdpLTEuNC4xLnRneiIsCiAgIl9zaGFzdW0iOiAiNzI2ZThhYjA4ZDFmZTFkZmI4YWE2YmI2MzA5YmZmZWNmOTNhMjFiNyIsCiAgIl9zaHJpbmt3cmFwIjogbnVsbCwKICAiX3NwZWMiOiAiYmlnaUBeMS40LjAiLAogICJfd2hlcmUiOiAiL2hvbWUvdnNpbHZhL3B0LWlub3ZhY2FvL3JldGhpbmstcHJvamVjdC9kZXYtcnVudGltZS1jb3JlL25vZGVfbW9kdWxlcy9iaXRjb2luanMtbGliIiwKICAiYnVncyI6IHsKICAgICJ1cmwiOiAiaHR0cHM6Ly9naXRodWIuY29tL2NyeXB0b2NvaW5qcy9iaWdpL2lzc3VlcyIKICB9LAogICJkZXBlbmRlbmNpZXMiOiB7fSwKICAiZGVzY3JpcHRpb24iOiAiQmlnIGludGVnZXJzLiIsCiAgImRldkRlcGVuZGVuY2llcyI6IHsKICAgICJjb3ZlcmFsbHMiOiAiXjIuMTEuMiIsCiAgICAiaXN0YW5idWwiOiAiXjAuMy41IiwKICAgICJqc2hpbnQiOiAiXjIuNS4xIiwKICAgICJtb2NoYSI6ICJeMi4xLjAiLAogICAgIm1vY2hpZnkiOiAiXjIuMS4wIgogIH0sCiAgImRpcmVjdG9yaWVzIjoge30sCiAgImRpc3QiOiB7CiAgICAic2hhc3VtIjogIjcyNmU4YWIwOGQxZmUxZGZiOGFhNmJiNjMwOWJmZmVjZjkzYTIxYjciLAogICAgInRhcmJhbGwiOiAiaHR0cDovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9iaWdpLy0vYmlnaS0xLjQuMS50Z3oiCiAgfSwKICAiZ2l0SGVhZCI6ICI3ZDAzNGExYjM4Y2E5MGY2OGRhYTlkZTQ3MmRkYTJmYjgxMzgzNmYxIiwKICAiaG9tZXBhZ2UiOiAiaHR0cHM6Ly9naXRodWIuY29tL2NyeXB0b2NvaW5qcy9iaWdpI3JlYWRtZSIsCiAgImtleXdvcmRzIjogWwogICAgImFyYml0cmFyeSIsCiAgICAiYXJpdGhtZXRpYyIsCiAgICAiYmlnIiwKICAgICJiaWdpbnQiLAogICAgImJpZ2ludGVnZXIiLAogICAgImJpZ251bWJlciIsCiAgICAiYml0Y29pbiIsCiAgICAiY3J5cHRvZ3JhcGh5IiwKICAgICJkZWNpbWFsIiwKICAgICJmbG9hdCIsCiAgICAiaW50IiwKICAgICJpbnRlZ2VyIiwKICAgICJtYXRoIiwKICAgICJudW1iZXIiLAogICAgInByZWNpc2lvbiIKICBdLAogICJtYWluIjogIi4vbGliL2luZGV4LmpzIiwKICAibWFpbnRhaW5lcnMiOiBbCiAgICB7CiAgICAgICJuYW1lIjogIm1pZG5pZ2h0bGlnaHRuaW5nIiwKICAgICAgImVtYWlsIjogImJveWRiQG1pZG5pZ2h0ZGVzaWduLndzIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAic2lkYXpoYW5nIiwKICAgICAgImVtYWlsIjogInNpZGF6aGFuZzg5QGdtYWlsLmNvbSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogIm5hZGF2IiwKICAgICAgImVtYWlsIjogIm5wbUBzaGVzZWsuaW5mbyIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImpwcmljaGFyZHNvbiIsCiAgICAgICJlbWFpbCI6ICJqcHJpY2hhcmRzb25AZ21haWwuY29tIgogICAgfQogIF0sCiAgIm5hbWUiOiAiYmlnaSIsCiAgIm9wdGlvbmFsRGVwZW5kZW5jaWVzIjoge30sCiAgInJlYWRtZSI6ICJFUlJPUjogTm8gUkVBRE1FIGRhdGEgZm91bmQhIiwKICAicmVwb3NpdG9yeSI6IHsKICAgICJ0eXBlIjogImdpdCIsCiAgICAidXJsIjogImdpdCtodHRwczovL2dpdGh1Yi5jb20vY3J5cHRvY29pbmpzL2JpZ2kuZ2l0IgogIH0sCiAgInNjcmlwdHMiOiB7CiAgICAiYnJvd3Nlci10ZXN0IjogIm1vY2hpZnkgLS13ZCAtUiBzcGVjIiwKICAgICJjb3ZlcmFnZSI6ICJpc3RhbmJ1bCBjb3ZlciAuL25vZGVfbW9kdWxlcy8uYmluL19tb2NoYSAtLSAtLXJlcG9ydGVyIGxpc3QgdGVzdC8qLmpzIiwKICAgICJjb3ZlcmFsbHMiOiAibnBtIHJ1bi1zY3JpcHQgY292ZXJhZ2UgJiYgbm9kZSAuL25vZGVfbW9kdWxlcy8uYmluL2NvdmVyYWxscyA8IGNvdmVyYWdlL2xjb3YuaW5mbyIsCiAgICAianNoaW50IjogImpzaGludCAtLWNvbmZpZyBqc2hpbnQuanNvbiBsaWIvKi5qcyA7IHRydWUiLAogICAgInRlc3QiOiAiX21vY2hhIC0tIHRlc3QvKi5qcyIsCiAgICAidW5pdCI6ICJtb2NoYSIKICB9LAogICJ0ZXN0bGluZyI6IHsKICAgICJicm93c2VycyI6IFsKICAgICAgImFuZHJvaWQtYnJvd3Nlci80LjIuLmxhdGVzdCIsCiAgICAgICJjaHJvbWUvbGF0ZXN0IiwKICAgICAgImZpcmVmb3gvbGF0ZXN0IiwKICAgICAgImllLzkuLmxhdGVzdCIsCiAgICAgICJpcGhvbmUvNi4wLi5sYXRlc3QiLAogICAgICAic2FmYXJpLzYuMC4ubGF0ZXN0IgogICAgXSwKICAgICJmaWxlcyI6ICJ0ZXN0LyouanMiLAogICAgImhhcm5lc3MiOiAibW9jaGEiCiAgfSwKICAidmVyc2lvbiI6ICIxLjQuMSIKfQoKfSx7fV0sMjI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKQp2YXIgY3JlYXRlSGFzaCA9IHJlcXVpcmUoJ2NyZWF0ZS1oYXNoJykKdmFyIHBia2RmMiA9IHJlcXVpcmUoJ3Bia2RmMicpLnBia2RmMlN5bmMKdmFyIHJhbmRvbUJ5dGVzID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKQp2YXIgdW5vcm0gPSByZXF1aXJlKCd1bm9ybScpCgp2YXIgREVGQVVMVF9XT1JETElTVCA9IHJlcXVpcmUoJy4vd29yZGxpc3RzL2VuLmpzb24nKQoKZnVuY3Rpb24gbW5lbW9uaWNUb1NlZWQobW5lbW9uaWMsIHBhc3N3b3JkKSB7CiAgdmFyIG1uZW1vbmljQnVmZmVyID0gbmV3IEJ1ZmZlcihtbmVtb25pYywgJ3V0ZjgnKQogIHZhciBzYWx0QnVmZmVyID0gbmV3IEJ1ZmZlcihzYWx0KHBhc3N3b3JkKSwgJ3V0ZjgnKQoKICByZXR1cm4gcGJrZGYyKG1uZW1vbmljQnVmZmVyLCBzYWx0QnVmZmVyLCAyMDQ4LCA2NCwgJ3NoYTUxMicpCn0KCmZ1bmN0aW9uIG1uZW1vbmljVG9TZWVkSGV4KG1uZW1vbmljLCBwYXNzd29yZCkgewogIHJldHVybiBtbmVtb25pY1RvU2VlZChtbmVtb25pYywgcGFzc3dvcmQpLnRvU3RyaW5nKCdoZXgnKQp9CgpmdW5jdGlvbiBtbmVtb25pY1RvRW50cm9weShtbmVtb25pYywgd29yZGxpc3QpIHsKICB3b3JkbGlzdCA9IHdvcmRsaXN0IHx8IERFRkFVTFRfV09SRExJU1QKCiAgdmFyIHdvcmRzID0gbW5lbW9uaWMuc3BsaXQoJyAnKQogIGFzc2VydCh3b3Jkcy5sZW5ndGggJSAzID09PSAwLCAnSW52YWxpZCBtbmVtb25pYycpCgogIHZhciBiZWxvbmdUb0xpc3QgPSB3b3Jkcy5ldmVyeShmdW5jdGlvbih3b3JkKSB7CiAgICByZXR1cm4gd29yZGxpc3QuaW5kZXhPZih3b3JkKSA+IC0xCiAgfSkKCiAgYXNzZXJ0KGJlbG9uZ1RvTGlzdCwgJ0ludmFsaWQgbW5lbW9uaWMnKQoKICAvLyBjb252ZXJ0IHdvcmQgaW5kaWNlcyB0byAxMSBiaXQgYmluYXJ5IHN0cmluZ3MKICB2YXIgYml0cyA9IHdvcmRzLm1hcChmdW5jdGlvbih3b3JkKSB7CiAgICB2YXIgaW5kZXggPSB3b3JkbGlzdC5pbmRleE9mKHdvcmQpCiAgICByZXR1cm4gbHBhZChpbmRleC50b1N0cmluZygyKSwgJzAnLCAxMSkKICB9KS5qb2luKCcnKQoKICAvLyBzcGxpdCB0aGUgYmluYXJ5IHN0cmluZyBpbnRvIEVOVC9DUwogIHZhciBkaXZpZGVySW5kZXggPSBNYXRoLmZsb29yKGJpdHMubGVuZ3RoIC8gMzMpICogMzIKICB2YXIgZW50cm9weSA9IGJpdHMuc2xpY2UoMCwgZGl2aWRlckluZGV4KQogIHZhciBjaGVja3N1bSA9IGJpdHMuc2xpY2UoZGl2aWRlckluZGV4KQoKICAvLyBjYWxjdWxhdGUgdGhlIGNoZWNrc3VtIGFuZCBjb21wYXJlCiAgdmFyIGVudHJvcHlCeXRlcyA9IGVudHJvcHkubWF0Y2goLyguezEsOH0pL2cpLm1hcChmdW5jdGlvbihiaW4pIHsKICAgIHJldHVybiBwYXJzZUludChiaW4sIDIpCiAgfSkKICB2YXIgZW50cm9weUJ1ZmZlciA9IG5ldyBCdWZmZXIoZW50cm9weUJ5dGVzKQogIHZhciBuZXdDaGVja3N1bSA9IGNoZWNrc3VtQml0cyhlbnRyb3B5QnVmZmVyKQoKICBhc3NlcnQobmV3Q2hlY2tzdW0gPT09IGNoZWNrc3VtLCAnSW52YWxpZCBtbmVtb25pYyBjaGVja3N1bScpCgogIHJldHVybiBlbnRyb3B5QnVmZmVyLnRvU3RyaW5nKCdoZXgnKQp9CgpmdW5jdGlvbiBlbnRyb3B5VG9NbmVtb25pYyhlbnRyb3B5LCB3b3JkbGlzdCkgewogIHdvcmRsaXN0ID0gd29yZGxpc3QgfHwgREVGQVVMVF9XT1JETElTVAoKICB2YXIgZW50cm9weUJ1ZmZlciA9IG5ldyBCdWZmZXIoZW50cm9weSwgJ2hleCcpCiAgdmFyIGVudHJvcHlCaXRzID0gYnl0ZXNUb0JpbmFyeShbXS5zbGljZS5jYWxsKGVudHJvcHlCdWZmZXIpKQogIHZhciBjaGVja3N1bSA9IGNoZWNrc3VtQml0cyhlbnRyb3B5QnVmZmVyKQoKICB2YXIgYml0cyA9IGVudHJvcHlCaXRzICsgY2hlY2tzdW0KICB2YXIgY2h1bmtzID0gYml0cy5tYXRjaCgvKC57MSwxMX0pL2cpCgogIHZhciB3b3JkcyA9IGNodW5rcy5tYXAoZnVuY3Rpb24oYmluYXJ5KSB7CiAgICB2YXIgaW5kZXggPSBwYXJzZUludChiaW5hcnksIDIpCgogICAgcmV0dXJuIHdvcmRsaXN0W2luZGV4XQogIH0pCgogIHJldHVybiB3b3Jkcy5qb2luKCcgJykKfQoKZnVuY3Rpb24gZ2VuZXJhdGVNbmVtb25pYyhzdHJlbmd0aCwgcm5nLCB3b3JkbGlzdCkgewogIHN0cmVuZ3RoID0gc3RyZW5ndGggfHwgMTI4CiAgcm5nID0gcm5nIHx8IHJhbmRvbUJ5dGVzCgogIHZhciBoZXggPSBybmcoc3RyZW5ndGggLyA4KS50b1N0cmluZygnaGV4JykKICByZXR1cm4gZW50cm9weVRvTW5lbW9uaWMoaGV4LCB3b3JkbGlzdCkKfQoKZnVuY3Rpb24gdmFsaWRhdGVNbmVtb25pYyhtbmVtb25pYywgd29yZGxpc3QpIHsKICB0cnkgewogICAgbW5lbW9uaWNUb0VudHJvcHkobW5lbW9uaWMsIHdvcmRsaXN0KQogIH0gY2F0Y2ggKGUpIHsKICAgIHJldHVybiBmYWxzZQogIH0KCiAgcmV0dXJuIHRydWUKfQoKZnVuY3Rpb24gY2hlY2tzdW1CaXRzKGVudHJvcHlCdWZmZXIpIHsKICB2YXIgaGFzaCA9IGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShlbnRyb3B5QnVmZmVyKS5kaWdlc3QoKQoKICAvLyBDYWxjdWxhdGVkIGNvbnN0YW50cyBmcm9tIEJJUDM5CiAgdmFyIEVOVCA9IGVudHJvcHlCdWZmZXIubGVuZ3RoICogOAogIHZhciBDUyA9IEVOVCAvIDMyCgogIHJldHVybiBieXRlc1RvQmluYXJ5KFtdLnNsaWNlLmNhbGwoaGFzaCkpLnNsaWNlKDAsIENTKQp9CgpmdW5jdGlvbiBzYWx0KHBhc3N3b3JkKSB7CiAgcmV0dXJuICdtbmVtb25pYycgKyAodW5vcm0ubmZrZChwYXNzd29yZCkgfHwgJycpIC8vIFVzZSB1bm9ybSB1bnRpbCBTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZSBnZXRzIGJldHRlciBicm93c2VyIHN1cHBvcnQKfQoKLy89PT09PT09PT09PSBoZWxwZXIgbWV0aG9kcyBmcm9tIGJpdGNvaW5qcy1saWIgPT09PT09PT0KCmZ1bmN0aW9uIGJ5dGVzVG9CaW5hcnkoYnl0ZXMpIHsKICByZXR1cm4gYnl0ZXMubWFwKGZ1bmN0aW9uKHgpIHsKICAgIHJldHVybiBscGFkKHgudG9TdHJpbmcoMiksICcwJywgOCkKICB9KS5qb2luKCcnKTsKfQoKZnVuY3Rpb24gbHBhZChzdHIsIHBhZFN0cmluZywgbGVuZ3RoKSB7CiAgd2hpbGUgKHN0ci5sZW5ndGggPCBsZW5ndGgpIHN0ciA9IHBhZFN0cmluZyArIHN0cjsKICByZXR1cm4gc3RyOwp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBtbmVtb25pY1RvU2VlZDogbW5lbW9uaWNUb1NlZWQsCiAgbW5lbW9uaWNUb1NlZWRIZXg6IG1uZW1vbmljVG9TZWVkSGV4LAogIG1uZW1vbmljVG9FbnRyb3B5OiBtbmVtb25pY1RvRW50cm9weSwKICBlbnRyb3B5VG9NbmVtb25pYzogZW50cm9weVRvTW5lbW9uaWMsCiAgZ2VuZXJhdGVNbmVtb25pYzogZ2VuZXJhdGVNbmVtb25pYywKICB2YWxpZGF0ZU1uZW1vbmljOiB2YWxpZGF0ZU1uZW1vbmljLAogIHdvcmRsaXN0czogewogICAgRU46IERFRkFVTFRfV09SRExJU1QKICB9Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL3dvcmRsaXN0cy9lbi5qc29uIjoyMywiYXNzZXJ0IjoxNSwiYnVmZmVyIjo3NiwiY3JlYXRlLWhhc2giOjgxLCJwYmtkZjIiOjEzOSwicmFuZG9tYnl0ZXMiOjE0OCwidW5vcm0iOjE3NH1dLDIzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHM9WwogICJhYmFuZG9uIiwKICAiYWJpbGl0eSIsCiAgImFibGUiLAogICJhYm91dCIsCiAgImFib3ZlIiwKICAiYWJzZW50IiwKICAiYWJzb3JiIiwKICAiYWJzdHJhY3QiLAogICJhYnN1cmQiLAogICJhYnVzZSIsCiAgImFjY2VzcyIsCiAgImFjY2lkZW50IiwKICAiYWNjb3VudCIsCiAgImFjY3VzZSIsCiAgImFjaGlldmUiLAogICJhY2lkIiwKICAiYWNvdXN0aWMiLAogICJhY3F1aXJlIiwKICAiYWNyb3NzIiwKICAiYWN0IiwKICAiYWN0aW9uIiwKICAiYWN0b3IiLAogICJhY3RyZXNzIiwKICAiYWN0dWFsIiwKICAiYWRhcHQiLAogICJhZGQiLAogICJhZGRpY3QiLAogICJhZGRyZXNzIiwKICAiYWRqdXN0IiwKICAiYWRtaXQiLAogICJhZHVsdCIsCiAgImFkdmFuY2UiLAogICJhZHZpY2UiLAogICJhZXJvYmljIiwKICAiYWZmYWlyIiwKICAiYWZmb3JkIiwKICAiYWZyYWlkIiwKICAiYWdhaW4iLAogICJhZ2UiLAogICJhZ2VudCIsCiAgImFncmVlIiwKICAiYWhlYWQiLAogICJhaW0iLAogICJhaXIiLAogICJhaXJwb3J0IiwKICAiYWlzbGUiLAogICJhbGFybSIsCiAgImFsYnVtIiwKICAiYWxjb2hvbCIsCiAgImFsZXJ0IiwKICAiYWxpZW4iLAogICJhbGwiLAogICJhbGxleSIsCiAgImFsbG93IiwKICAiYWxtb3N0IiwKICAiYWxvbmUiLAogICJhbHBoYSIsCiAgImFscmVhZHkiLAogICJhbHNvIiwKICAiYWx0ZXIiLAogICJhbHdheXMiLAogICJhbWF0ZXVyIiwKICAiYW1hemluZyIsCiAgImFtb25nIiwKICAiYW1vdW50IiwKICAiYW11c2VkIiwKICAiYW5hbHlzdCIsCiAgImFuY2hvciIsCiAgImFuY2llbnQiLAogICJhbmdlciIsCiAgImFuZ2xlIiwKICAiYW5ncnkiLAogICJhbmltYWwiLAogICJhbmtsZSIsCiAgImFubm91bmNlIiwKICAiYW5udWFsIiwKICAiYW5vdGhlciIsCiAgImFuc3dlciIsCiAgImFudGVubmEiLAogICJhbnRpcXVlIiwKICAiYW54aWV0eSIsCiAgImFueSIsCiAgImFwYXJ0IiwKICAiYXBvbG9neSIsCiAgImFwcGVhciIsCiAgImFwcGxlIiwKICAiYXBwcm92ZSIsCiAgImFwcmlsIiwKICAiYXJjaCIsCiAgImFyY3RpYyIsCiAgImFyZWEiLAogICJhcmVuYSIsCiAgImFyZ3VlIiwKICAiYXJtIiwKICAiYXJtZWQiLAogICJhcm1vciIsCiAgImFybXkiLAogICJhcm91bmQiLAogICJhcnJhbmdlIiwKICAiYXJyZXN0IiwKICAiYXJyaXZlIiwKICAiYXJyb3ciLAogICJhcnQiLAogICJhcnRlZmFjdCIsCiAgImFydGlzdCIsCiAgImFydHdvcmsiLAogICJhc2siLAogICJhc3BlY3QiLAogICJhc3NhdWx0IiwKICAiYXNzZXQiLAogICJhc3Npc3QiLAogICJhc3N1bWUiLAogICJhc3RobWEiLAogICJhdGhsZXRlIiwKICAiYXRvbSIsCiAgImF0dGFjayIsCiAgImF0dGVuZCIsCiAgImF0dGl0dWRlIiwKICAiYXR0cmFjdCIsCiAgImF1Y3Rpb24iLAogICJhdWRpdCIsCiAgImF1Z3VzdCIsCiAgImF1bnQiLAogICJhdXRob3IiLAogICJhdXRvIiwKICAiYXV0dW1uIiwKICAiYXZlcmFnZSIsCiAgImF2b2NhZG8iLAogICJhdm9pZCIsCiAgImF3YWtlIiwKICAiYXdhcmUiLAogICJhd2F5IiwKICAiYXdlc29tZSIsCiAgImF3ZnVsIiwKICAiYXdrd2FyZCIsCiAgImF4aXMiLAogICJiYWJ5IiwKICAiYmFjaGVsb3IiLAogICJiYWNvbiIsCiAgImJhZGdlIiwKICAiYmFnIiwKICAiYmFsYW5jZSIsCiAgImJhbGNvbnkiLAogICJiYWxsIiwKICAiYmFtYm9vIiwKICAiYmFuYW5hIiwKICAiYmFubmVyIiwKICAiYmFyIiwKICAiYmFyZWx5IiwKICAiYmFyZ2FpbiIsCiAgImJhcnJlbCIsCiAgImJhc2UiLAogICJiYXNpYyIsCiAgImJhc2tldCIsCiAgImJhdHRsZSIsCiAgImJlYWNoIiwKICAiYmVhbiIsCiAgImJlYXV0eSIsCiAgImJlY2F1c2UiLAogICJiZWNvbWUiLAogICJiZWVmIiwKICAiYmVmb3JlIiwKICAiYmVnaW4iLAogICJiZWhhdmUiLAogICJiZWhpbmQiLAogICJiZWxpZXZlIiwKICAiYmVsb3ciLAogICJiZWx0IiwKICAiYmVuY2giLAogICJiZW5lZml0IiwKICAiYmVzdCIsCiAgImJldHJheSIsCiAgImJldHRlciIsCiAgImJldHdlZW4iLAogICJiZXlvbmQiLAogICJiaWN5Y2xlIiwKICAiYmlkIiwKICAiYmlrZSIsCiAgImJpbmQiLAogICJiaW9sb2d5IiwKICAiYmlyZCIsCiAgImJpcnRoIiwKICAiYml0dGVyIiwKICAiYmxhY2siLAogICJibGFkZSIsCiAgImJsYW1lIiwKICAiYmxhbmtldCIsCiAgImJsYXN0IiwKICAiYmxlYWsiLAogICJibGVzcyIsCiAgImJsaW5kIiwKICAiYmxvb2QiLAogICJibG9zc29tIiwKICAiYmxvdXNlIiwKICAiYmx1ZSIsCiAgImJsdXIiLAogICJibHVzaCIsCiAgImJvYXJkIiwKICAiYm9hdCIsCiAgImJvZHkiLAogICJib2lsIiwKICAiYm9tYiIsCiAgImJvbmUiLAogICJib251cyIsCiAgImJvb2siLAogICJib29zdCIsCiAgImJvcmRlciIsCiAgImJvcmluZyIsCiAgImJvcnJvdyIsCiAgImJvc3MiLAogICJib3R0b20iLAogICJib3VuY2UiLAogICJib3giLAogICJib3kiLAogICJicmFja2V0IiwKICAiYnJhaW4iLAogICJicmFuZCIsCiAgImJyYXNzIiwKICAiYnJhdmUiLAogICJicmVhZCIsCiAgImJyZWV6ZSIsCiAgImJyaWNrIiwKICAiYnJpZGdlIiwKICAiYnJpZWYiLAogICJicmlnaHQiLAogICJicmluZyIsCiAgImJyaXNrIiwKICAiYnJvY2NvbGkiLAogICJicm9rZW4iLAogICJicm9uemUiLAogICJicm9vbSIsCiAgImJyb3RoZXIiLAogICJicm93biIsCiAgImJydXNoIiwKICAiYnViYmxlIiwKICAiYnVkZHkiLAogICJidWRnZXQiLAogICJidWZmYWxvIiwKICAiYnVpbGQiLAogICJidWxiIiwKICAiYnVsayIsCiAgImJ1bGxldCIsCiAgImJ1bmRsZSIsCiAgImJ1bmtlciIsCiAgImJ1cmRlbiIsCiAgImJ1cmdlciIsCiAgImJ1cnN0IiwKICAiYnVzIiwKICAiYnVzaW5lc3MiLAogICJidXN5IiwKICAiYnV0dGVyIiwKICAiYnV5ZXIiLAogICJidXp6IiwKICAiY2FiYmFnZSIsCiAgImNhYmluIiwKICAiY2FibGUiLAogICJjYWN0dXMiLAogICJjYWdlIiwKICAiY2FrZSIsCiAgImNhbGwiLAogICJjYWxtIiwKICAiY2FtZXJhIiwKICAiY2FtcCIsCiAgImNhbiIsCiAgImNhbmFsIiwKICAiY2FuY2VsIiwKICAiY2FuZHkiLAogICJjYW5ub24iLAogICJjYW5vZSIsCiAgImNhbnZhcyIsCiAgImNhbnlvbiIsCiAgImNhcGFibGUiLAogICJjYXBpdGFsIiwKICAiY2FwdGFpbiIsCiAgImNhciIsCiAgImNhcmJvbiIsCiAgImNhcmQiLAogICJjYXJnbyIsCiAgImNhcnBldCIsCiAgImNhcnJ5IiwKICAiY2FydCIsCiAgImNhc2UiLAogICJjYXNoIiwKICAiY2FzaW5vIiwKICAiY2FzdGxlIiwKICAiY2FzdWFsIiwKICAiY2F0IiwKICAiY2F0YWxvZyIsCiAgImNhdGNoIiwKICAiY2F0ZWdvcnkiLAogICJjYXR0bGUiLAogICJjYXVnaHQiLAogICJjYXVzZSIsCiAgImNhdXRpb24iLAogICJjYXZlIiwKICAiY2VpbGluZyIsCiAgImNlbGVyeSIsCiAgImNlbWVudCIsCiAgImNlbnN1cyIsCiAgImNlbnR1cnkiLAogICJjZXJlYWwiLAogICJjZXJ0YWluIiwKICAiY2hhaXIiLAogICJjaGFsayIsCiAgImNoYW1waW9uIiwKICAiY2hhbmdlIiwKICAiY2hhb3MiLAogICJjaGFwdGVyIiwKICAiY2hhcmdlIiwKICAiY2hhc2UiLAogICJjaGF0IiwKICAiY2hlYXAiLAogICJjaGVjayIsCiAgImNoZWVzZSIsCiAgImNoZWYiLAogICJjaGVycnkiLAogICJjaGVzdCIsCiAgImNoaWNrZW4iLAogICJjaGllZiIsCiAgImNoaWxkIiwKICAiY2hpbW5leSIsCiAgImNob2ljZSIsCiAgImNob29zZSIsCiAgImNocm9uaWMiLAogICJjaHVja2xlIiwKICAiY2h1bmsiLAogICJjaHVybiIsCiAgImNpZ2FyIiwKICAiY2lubmFtb24iLAogICJjaXJjbGUiLAogICJjaXRpemVuIiwKICAiY2l0eSIsCiAgImNpdmlsIiwKICAiY2xhaW0iLAogICJjbGFwIiwKICAiY2xhcmlmeSIsCiAgImNsYXciLAogICJjbGF5IiwKICAiY2xlYW4iLAogICJjbGVyayIsCiAgImNsZXZlciIsCiAgImNsaWNrIiwKICAiY2xpZW50IiwKICAiY2xpZmYiLAogICJjbGltYiIsCiAgImNsaW5pYyIsCiAgImNsaXAiLAogICJjbG9jayIsCiAgImNsb2ciLAogICJjbG9zZSIsCiAgImNsb3RoIiwKICAiY2xvdWQiLAogICJjbG93biIsCiAgImNsdWIiLAogICJjbHVtcCIsCiAgImNsdXN0ZXIiLAogICJjbHV0Y2giLAogICJjb2FjaCIsCiAgImNvYXN0IiwKICAiY29jb251dCIsCiAgImNvZGUiLAogICJjb2ZmZWUiLAogICJjb2lsIiwKICAiY29pbiIsCiAgImNvbGxlY3QiLAogICJjb2xvciIsCiAgImNvbHVtbiIsCiAgImNvbWJpbmUiLAogICJjb21lIiwKICAiY29tZm9ydCIsCiAgImNvbWljIiwKICAiY29tbW9uIiwKICAiY29tcGFueSIsCiAgImNvbmNlcnQiLAogICJjb25kdWN0IiwKICAiY29uZmlybSIsCiAgImNvbmdyZXNzIiwKICAiY29ubmVjdCIsCiAgImNvbnNpZGVyIiwKICAiY29udHJvbCIsCiAgImNvbnZpbmNlIiwKICAiY29vayIsCiAgImNvb2wiLAogICJjb3BwZXIiLAogICJjb3B5IiwKICAiY29yYWwiLAogICJjb3JlIiwKICAiY29ybiIsCiAgImNvcnJlY3QiLAogICJjb3N0IiwKICAiY290dG9uIiwKICAiY291Y2giLAogICJjb3VudHJ5IiwKICAiY291cGxlIiwKICAiY291cnNlIiwKICAiY291c2luIiwKICAiY292ZXIiLAogICJjb3lvdGUiLAogICJjcmFjayIsCiAgImNyYWRsZSIsCiAgImNyYWZ0IiwKICAiY3JhbSIsCiAgImNyYW5lIiwKICAiY3Jhc2giLAogICJjcmF0ZXIiLAogICJjcmF3bCIsCiAgImNyYXp5IiwKICAiY3JlYW0iLAogICJjcmVkaXQiLAogICJjcmVlayIsCiAgImNyZXciLAogICJjcmlja2V0IiwKICAiY3JpbWUiLAogICJjcmlzcCIsCiAgImNyaXRpYyIsCiAgImNyb3AiLAogICJjcm9zcyIsCiAgImNyb3VjaCIsCiAgImNyb3dkIiwKICAiY3J1Y2lhbCIsCiAgImNydWVsIiwKICAiY3J1aXNlIiwKICAiY3J1bWJsZSIsCiAgImNydW5jaCIsCiAgImNydXNoIiwKICAiY3J5IiwKICAiY3J5c3RhbCIsCiAgImN1YmUiLAogICJjdWx0dXJlIiwKICAiY3VwIiwKICAiY3VwYm9hcmQiLAogICJjdXJpb3VzIiwKICAiY3VycmVudCIsCiAgImN1cnRhaW4iLAogICJjdXJ2ZSIsCiAgImN1c2hpb24iLAogICJjdXN0b20iLAogICJjdXRlIiwKICAiY3ljbGUiLAogICJkYWQiLAogICJkYW1hZ2UiLAogICJkYW1wIiwKICAiZGFuY2UiLAogICJkYW5nZXIiLAogICJkYXJpbmciLAogICJkYXNoIiwKICAiZGF1Z2h0ZXIiLAogICJkYXduIiwKICAiZGF5IiwKICAiZGVhbCIsCiAgImRlYmF0ZSIsCiAgImRlYnJpcyIsCiAgImRlY2FkZSIsCiAgImRlY2VtYmVyIiwKICAiZGVjaWRlIiwKICAiZGVjbGluZSIsCiAgImRlY29yYXRlIiwKICAiZGVjcmVhc2UiLAogICJkZWVyIiwKICAiZGVmZW5zZSIsCiAgImRlZmluZSIsCiAgImRlZnkiLAogICJkZWdyZWUiLAogICJkZWxheSIsCiAgImRlbGl2ZXIiLAogICJkZW1hbmQiLAogICJkZW1pc2UiLAogICJkZW5pYWwiLAogICJkZW50aXN0IiwKICAiZGVueSIsCiAgImRlcGFydCIsCiAgImRlcGVuZCIsCiAgImRlcG9zaXQiLAogICJkZXB0aCIsCiAgImRlcHV0eSIsCiAgImRlcml2ZSIsCiAgImRlc2NyaWJlIiwKICAiZGVzZXJ0IiwKICAiZGVzaWduIiwKICAiZGVzayIsCiAgImRlc3BhaXIiLAogICJkZXN0cm95IiwKICAiZGV0YWlsIiwKICAiZGV0ZWN0IiwKICAiZGV2ZWxvcCIsCiAgImRldmljZSIsCiAgImRldm90ZSIsCiAgImRpYWdyYW0iLAogICJkaWFsIiwKICAiZGlhbW9uZCIsCiAgImRpYXJ5IiwKICAiZGljZSIsCiAgImRpZXNlbCIsCiAgImRpZXQiLAogICJkaWZmZXIiLAogICJkaWdpdGFsIiwKICAiZGlnbml0eSIsCiAgImRpbGVtbWEiLAogICJkaW5uZXIiLAogICJkaW5vc2F1ciIsCiAgImRpcmVjdCIsCiAgImRpcnQiLAogICJkaXNhZ3JlZSIsCiAgImRpc2NvdmVyIiwKICAiZGlzZWFzZSIsCiAgImRpc2giLAogICJkaXNtaXNzIiwKICAiZGlzb3JkZXIiLAogICJkaXNwbGF5IiwKICAiZGlzdGFuY2UiLAogICJkaXZlcnQiLAogICJkaXZpZGUiLAogICJkaXZvcmNlIiwKICAiZGl6enkiLAogICJkb2N0b3IiLAogICJkb2N1bWVudCIsCiAgImRvZyIsCiAgImRvbGwiLAogICJkb2xwaGluIiwKICAiZG9tYWluIiwKICAiZG9uYXRlIiwKICAiZG9ua2V5IiwKICAiZG9ub3IiLAogICJkb29yIiwKICAiZG9zZSIsCiAgImRvdWJsZSIsCiAgImRvdmUiLAogICJkcmFmdCIsCiAgImRyYWdvbiIsCiAgImRyYW1hIiwKICAiZHJhc3RpYyIsCiAgImRyYXciLAogICJkcmVhbSIsCiAgImRyZXNzIiwKICAiZHJpZnQiLAogICJkcmlsbCIsCiAgImRyaW5rIiwKICAiZHJpcCIsCiAgImRyaXZlIiwKICAiZHJvcCIsCiAgImRydW0iLAogICJkcnkiLAogICJkdWNrIiwKICAiZHVtYiIsCiAgImR1bmUiLAogICJkdXJpbmciLAogICJkdXN0IiwKICAiZHV0Y2giLAogICJkdXR5IiwKICAiZHdhcmYiLAogICJkeW5hbWljIiwKICAiZWFnZXIiLAogICJlYWdsZSIsCiAgImVhcmx5IiwKICAiZWFybiIsCiAgImVhcnRoIiwKICAiZWFzaWx5IiwKICAiZWFzdCIsCiAgImVhc3kiLAogICJlY2hvIiwKICAiZWNvbG9neSIsCiAgImVjb25vbXkiLAogICJlZGdlIiwKICAiZWRpdCIsCiAgImVkdWNhdGUiLAogICJlZmZvcnQiLAogICJlZ2ciLAogICJlaWdodCIsCiAgImVpdGhlciIsCiAgImVsYm93IiwKICAiZWxkZXIiLAogICJlbGVjdHJpYyIsCiAgImVsZWdhbnQiLAogICJlbGVtZW50IiwKICAiZWxlcGhhbnQiLAogICJlbGV2YXRvciIsCiAgImVsaXRlIiwKICAiZWxzZSIsCiAgImVtYmFyayIsCiAgImVtYm9keSIsCiAgImVtYnJhY2UiLAogICJlbWVyZ2UiLAogICJlbW90aW9uIiwKICAiZW1wbG95IiwKICAiZW1wb3dlciIsCiAgImVtcHR5IiwKICAiZW5hYmxlIiwKICAiZW5hY3QiLAogICJlbmQiLAogICJlbmRsZXNzIiwKICAiZW5kb3JzZSIsCiAgImVuZW15IiwKICAiZW5lcmd5IiwKICAiZW5mb3JjZSIsCiAgImVuZ2FnZSIsCiAgImVuZ2luZSIsCiAgImVuaGFuY2UiLAogICJlbmpveSIsCiAgImVubGlzdCIsCiAgImVub3VnaCIsCiAgImVucmljaCIsCiAgImVucm9sbCIsCiAgImVuc3VyZSIsCiAgImVudGVyIiwKICAiZW50aXJlIiwKICAiZW50cnkiLAogICJlbnZlbG9wZSIsCiAgImVwaXNvZGUiLAogICJlcXVhbCIsCiAgImVxdWlwIiwKICAiZXJhIiwKICAiZXJhc2UiLAogICJlcm9kZSIsCiAgImVyb3Npb24iLAogICJlcnJvciIsCiAgImVydXB0IiwKICAiZXNjYXBlIiwKICAiZXNzYXkiLAogICJlc3NlbmNlIiwKICAiZXN0YXRlIiwKICAiZXRlcm5hbCIsCiAgImV0aGljcyIsCiAgImV2aWRlbmNlIiwKICAiZXZpbCIsCiAgImV2b2tlIiwKICAiZXZvbHZlIiwKICAiZXhhY3QiLAogICJleGFtcGxlIiwKICAiZXhjZXNzIiwKICAiZXhjaGFuZ2UiLAogICJleGNpdGUiLAogICJleGNsdWRlIiwKICAiZXhjdXNlIiwKICAiZXhlY3V0ZSIsCiAgImV4ZXJjaXNlIiwKICAiZXhoYXVzdCIsCiAgImV4aGliaXQiLAogICJleGlsZSIsCiAgImV4aXN0IiwKICAiZXhpdCIsCiAgImV4b3RpYyIsCiAgImV4cGFuZCIsCiAgImV4cGVjdCIsCiAgImV4cGlyZSIsCiAgImV4cGxhaW4iLAogICJleHBvc2UiLAogICJleHByZXNzIiwKICAiZXh0ZW5kIiwKICAiZXh0cmEiLAogICJleWUiLAogICJleWVicm93IiwKICAiZmFicmljIiwKICAiZmFjZSIsCiAgImZhY3VsdHkiLAogICJmYWRlIiwKICAiZmFpbnQiLAogICJmYWl0aCIsCiAgImZhbGwiLAogICJmYWxzZSIsCiAgImZhbWUiLAogICJmYW1pbHkiLAogICJmYW1vdXMiLAogICJmYW4iLAogICJmYW5jeSIsCiAgImZhbnRhc3kiLAogICJmYXJtIiwKICAiZmFzaGlvbiIsCiAgImZhdCIsCiAgImZhdGFsIiwKICAiZmF0aGVyIiwKICAiZmF0aWd1ZSIsCiAgImZhdWx0IiwKICAiZmF2b3JpdGUiLAogICJmZWF0dXJlIiwKICAiZmVicnVhcnkiLAogICJmZWRlcmFsIiwKICAiZmVlIiwKICAiZmVlZCIsCiAgImZlZWwiLAogICJmZW1hbGUiLAogICJmZW5jZSIsCiAgImZlc3RpdmFsIiwKICAiZmV0Y2giLAogICJmZXZlciIsCiAgImZldyIsCiAgImZpYmVyIiwKICAiZmljdGlvbiIsCiAgImZpZWxkIiwKICAiZmlndXJlIiwKICAiZmlsZSIsCiAgImZpbG0iLAogICJmaWx0ZXIiLAogICJmaW5hbCIsCiAgImZpbmQiLAogICJmaW5lIiwKICAiZmluZ2VyIiwKICAiZmluaXNoIiwKICAiZmlyZSIsCiAgImZpcm0iLAogICJmaXJzdCIsCiAgImZpc2NhbCIsCiAgImZpc2giLAogICJmaXQiLAogICJmaXRuZXNzIiwKICAiZml4IiwKICAiZmxhZyIsCiAgImZsYW1lIiwKICAiZmxhc2giLAogICJmbGF0IiwKICAiZmxhdm9yIiwKICAiZmxlZSIsCiAgImZsaWdodCIsCiAgImZsaXAiLAogICJmbG9hdCIsCiAgImZsb2NrIiwKICAiZmxvb3IiLAogICJmbG93ZXIiLAogICJmbHVpZCIsCiAgImZsdXNoIiwKICAiZmx5IiwKICAiZm9hbSIsCiAgImZvY3VzIiwKICAiZm9nIiwKICAiZm9pbCIsCiAgImZvbGQiLAogICJmb2xsb3ciLAogICJmb29kIiwKICAiZm9vdCIsCiAgImZvcmNlIiwKICAiZm9yZXN0IiwKICAiZm9yZ2V0IiwKICAiZm9yayIsCiAgImZvcnR1bmUiLAogICJmb3J1bSIsCiAgImZvcndhcmQiLAogICJmb3NzaWwiLAogICJmb3N0ZXIiLAogICJmb3VuZCIsCiAgImZveCIsCiAgImZyYWdpbGUiLAogICJmcmFtZSIsCiAgImZyZXF1ZW50IiwKICAiZnJlc2giLAogICJmcmllbmQiLAogICJmcmluZ2UiLAogICJmcm9nIiwKICAiZnJvbnQiLAogICJmcm9zdCIsCiAgImZyb3duIiwKICAiZnJvemVuIiwKICAiZnJ1aXQiLAogICJmdWVsIiwKICAiZnVuIiwKICAiZnVubnkiLAogICJmdXJuYWNlIiwKICAiZnVyeSIsCiAgImZ1dHVyZSIsCiAgImdhZGdldCIsCiAgImdhaW4iLAogICJnYWxheHkiLAogICJnYWxsZXJ5IiwKICAiZ2FtZSIsCiAgImdhcCIsCiAgImdhcmFnZSIsCiAgImdhcmJhZ2UiLAogICJnYXJkZW4iLAogICJnYXJsaWMiLAogICJnYXJtZW50IiwKICAiZ2FzIiwKICAiZ2FzcCIsCiAgImdhdGUiLAogICJnYXRoZXIiLAogICJnYXVnZSIsCiAgImdhemUiLAogICJnZW5lcmFsIiwKICAiZ2VuaXVzIiwKICAiZ2VucmUiLAogICJnZW50bGUiLAogICJnZW51aW5lIiwKICAiZ2VzdHVyZSIsCiAgImdob3N0IiwKICAiZ2lhbnQiLAogICJnaWZ0IiwKICAiZ2lnZ2xlIiwKICAiZ2luZ2VyIiwKICAiZ2lyYWZmZSIsCiAgImdpcmwiLAogICJnaXZlIiwKICAiZ2xhZCIsCiAgImdsYW5jZSIsCiAgImdsYXJlIiwKICAiZ2xhc3MiLAogICJnbGlkZSIsCiAgImdsaW1wc2UiLAogICJnbG9iZSIsCiAgImdsb29tIiwKICAiZ2xvcnkiLAogICJnbG92ZSIsCiAgImdsb3ciLAogICJnbHVlIiwKICAiZ29hdCIsCiAgImdvZGRlc3MiLAogICJnb2xkIiwKICAiZ29vZCIsCiAgImdvb3NlIiwKICAiZ29yaWxsYSIsCiAgImdvc3BlbCIsCiAgImdvc3NpcCIsCiAgImdvdmVybiIsCiAgImdvd24iLAogICJncmFiIiwKICAiZ3JhY2UiLAogICJncmFpbiIsCiAgImdyYW50IiwKICAiZ3JhcGUiLAogICJncmFzcyIsCiAgImdyYXZpdHkiLAogICJncmVhdCIsCiAgImdyZWVuIiwKICAiZ3JpZCIsCiAgImdyaWVmIiwKICAiZ3JpdCIsCiAgImdyb2NlcnkiLAogICJncm91cCIsCiAgImdyb3ciLAogICJncnVudCIsCiAgImd1YXJkIiwKICAiZ3Vlc3MiLAogICJndWlkZSIsCiAgImd1aWx0IiwKICAiZ3VpdGFyIiwKICAiZ3VuIiwKICAiZ3ltIiwKICAiaGFiaXQiLAogICJoYWlyIiwKICAiaGFsZiIsCiAgImhhbW1lciIsCiAgImhhbXN0ZXIiLAogICJoYW5kIiwKICAiaGFwcHkiLAogICJoYXJib3IiLAogICJoYXJkIiwKICAiaGFyc2giLAogICJoYXJ2ZXN0IiwKICAiaGF0IiwKICAiaGF2ZSIsCiAgImhhd2siLAogICJoYXphcmQiLAogICJoZWFkIiwKICAiaGVhbHRoIiwKICAiaGVhcnQiLAogICJoZWF2eSIsCiAgImhlZGdlaG9nIiwKICAiaGVpZ2h0IiwKICAiaGVsbG8iLAogICJoZWxtZXQiLAogICJoZWxwIiwKICAiaGVuIiwKICAiaGVybyIsCiAgImhpZGRlbiIsCiAgImhpZ2giLAogICJoaWxsIiwKICAiaGludCIsCiAgImhpcCIsCiAgImhpcmUiLAogICJoaXN0b3J5IiwKICAiaG9iYnkiLAogICJob2NrZXkiLAogICJob2xkIiwKICAiaG9sZSIsCiAgImhvbGlkYXkiLAogICJob2xsb3ciLAogICJob21lIiwKICAiaG9uZXkiLAogICJob29kIiwKICAiaG9wZSIsCiAgImhvcm4iLAogICJob3Jyb3IiLAogICJob3JzZSIsCiAgImhvc3BpdGFsIiwKICAiaG9zdCIsCiAgImhvdGVsIiwKICAiaG91ciIsCiAgImhvdmVyIiwKICAiaHViIiwKICAiaHVnZSIsCiAgImh1bWFuIiwKICAiaHVtYmxlIiwKICAiaHVtb3IiLAogICJodW5kcmVkIiwKICAiaHVuZ3J5IiwKICAiaHVudCIsCiAgImh1cmRsZSIsCiAgImh1cnJ5IiwKICAiaHVydCIsCiAgImh1c2JhbmQiLAogICJoeWJyaWQiLAogICJpY2UiLAogICJpY29uIiwKICAiaWRlYSIsCiAgImlkZW50aWZ5IiwKICAiaWRsZSIsCiAgImlnbm9yZSIsCiAgImlsbCIsCiAgImlsbGVnYWwiLAogICJpbGxuZXNzIiwKICAiaW1hZ2UiLAogICJpbWl0YXRlIiwKICAiaW1tZW5zZSIsCiAgImltbXVuZSIsCiAgImltcGFjdCIsCiAgImltcG9zZSIsCiAgImltcHJvdmUiLAogICJpbXB1bHNlIiwKICAiaW5jaCIsCiAgImluY2x1ZGUiLAogICJpbmNvbWUiLAogICJpbmNyZWFzZSIsCiAgImluZGV4IiwKICAiaW5kaWNhdGUiLAogICJpbmRvb3IiLAogICJpbmR1c3RyeSIsCiAgImluZmFudCIsCiAgImluZmxpY3QiLAogICJpbmZvcm0iLAogICJpbmhhbGUiLAogICJpbmhlcml0IiwKICAiaW5pdGlhbCIsCiAgImluamVjdCIsCiAgImluanVyeSIsCiAgImlubWF0ZSIsCiAgImlubmVyIiwKICAiaW5ub2NlbnQiLAogICJpbnB1dCIsCiAgImlucXVpcnkiLAogICJpbnNhbmUiLAogICJpbnNlY3QiLAogICJpbnNpZGUiLAogICJpbnNwaXJlIiwKICAiaW5zdGFsbCIsCiAgImludGFjdCIsCiAgImludGVyZXN0IiwKICAiaW50byIsCiAgImludmVzdCIsCiAgImludml0ZSIsCiAgImludm9sdmUiLAogICJpcm9uIiwKICAiaXNsYW5kIiwKICAiaXNvbGF0ZSIsCiAgImlzc3VlIiwKICAiaXRlbSIsCiAgIml2b3J5IiwKICAiamFja2V0IiwKICAiamFndWFyIiwKICAiamFyIiwKICAiamF6eiIsCiAgImplYWxvdXMiLAogICJqZWFucyIsCiAgImplbGx5IiwKICAiamV3ZWwiLAogICJqb2IiLAogICJqb2luIiwKICAiam9rZSIsCiAgImpvdXJuZXkiLAogICJqb3kiLAogICJqdWRnZSIsCiAgImp1aWNlIiwKICAianVtcCIsCiAgImp1bmdsZSIsCiAgImp1bmlvciIsCiAgImp1bmsiLAogICJqdXN0IiwKICAia2FuZ2Fyb28iLAogICJrZWVuIiwKICAia2VlcCIsCiAgImtldGNodXAiLAogICJrZXkiLAogICJraWNrIiwKICAia2lkIiwKICAia2lkbmV5IiwKICAia2luZCIsCiAgImtpbmdkb20iLAogICJraXNzIiwKICAia2l0IiwKICAia2l0Y2hlbiIsCiAgImtpdGUiLAogICJraXR0ZW4iLAogICJraXdpIiwKICAia25lZSIsCiAgImtuaWZlIiwKICAia25vY2siLAogICJrbm93IiwKICAibGFiIiwKICAibGFiZWwiLAogICJsYWJvciIsCiAgImxhZGRlciIsCiAgImxhZHkiLAogICJsYWtlIiwKICAibGFtcCIsCiAgImxhbmd1YWdlIiwKICAibGFwdG9wIiwKICAibGFyZ2UiLAogICJsYXRlciIsCiAgImxhdGluIiwKICAibGF1Z2giLAogICJsYXVuZHJ5IiwKICAibGF2YSIsCiAgImxhdyIsCiAgImxhd24iLAogICJsYXdzdWl0IiwKICAibGF5ZXIiLAogICJsYXp5IiwKICAibGVhZGVyIiwKICAibGVhZiIsCiAgImxlYXJuIiwKICAibGVhdmUiLAogICJsZWN0dXJlIiwKICAibGVmdCIsCiAgImxlZyIsCiAgImxlZ2FsIiwKICAibGVnZW5kIiwKICAibGVpc3VyZSIsCiAgImxlbW9uIiwKICAibGVuZCIsCiAgImxlbmd0aCIsCiAgImxlbnMiLAogICJsZW9wYXJkIiwKICAibGVzc29uIiwKICAibGV0dGVyIiwKICAibGV2ZWwiLAogICJsaWFyIiwKICAibGliZXJ0eSIsCiAgImxpYnJhcnkiLAogICJsaWNlbnNlIiwKICAibGlmZSIsCiAgImxpZnQiLAogICJsaWdodCIsCiAgImxpa2UiLAogICJsaW1iIiwKICAibGltaXQiLAogICJsaW5rIiwKICAibGlvbiIsCiAgImxpcXVpZCIsCiAgImxpc3QiLAogICJsaXR0bGUiLAogICJsaXZlIiwKICAibGl6YXJkIiwKICAibG9hZCIsCiAgImxvYW4iLAogICJsb2JzdGVyIiwKICAibG9jYWwiLAogICJsb2NrIiwKICAibG9naWMiLAogICJsb25lbHkiLAogICJsb25nIiwKICAibG9vcCIsCiAgImxvdHRlcnkiLAogICJsb3VkIiwKICAibG91bmdlIiwKICAibG92ZSIsCiAgImxveWFsIiwKICAibHVja3kiLAogICJsdWdnYWdlIiwKICAibHVtYmVyIiwKICAibHVuYXIiLAogICJsdW5jaCIsCiAgImx1eHVyeSIsCiAgImx5cmljcyIsCiAgIm1hY2hpbmUiLAogICJtYWQiLAogICJtYWdpYyIsCiAgIm1hZ25ldCIsCiAgIm1haWQiLAogICJtYWlsIiwKICAibWFpbiIsCiAgIm1ham9yIiwKICAibWFrZSIsCiAgIm1hbW1hbCIsCiAgIm1hbiIsCiAgIm1hbmFnZSIsCiAgIm1hbmRhdGUiLAogICJtYW5nbyIsCiAgIm1hbnNpb24iLAogICJtYW51YWwiLAogICJtYXBsZSIsCiAgIm1hcmJsZSIsCiAgIm1hcmNoIiwKICAibWFyZ2luIiwKICAibWFyaW5lIiwKICAibWFya2V0IiwKICAibWFycmlhZ2UiLAogICJtYXNrIiwKICAibWFzcyIsCiAgIm1hc3RlciIsCiAgIm1hdGNoIiwKICAibWF0ZXJpYWwiLAogICJtYXRoIiwKICAibWF0cml4IiwKICAibWF0dGVyIiwKICAibWF4aW11bSIsCiAgIm1hemUiLAogICJtZWFkb3ciLAogICJtZWFuIiwKICAibWVhc3VyZSIsCiAgIm1lYXQiLAogICJtZWNoYW5pYyIsCiAgIm1lZGFsIiwKICAibWVkaWEiLAogICJtZWxvZHkiLAogICJtZWx0IiwKICAibWVtYmVyIiwKICAibWVtb3J5IiwKICAibWVudGlvbiIsCiAgIm1lbnUiLAogICJtZXJjeSIsCiAgIm1lcmdlIiwKICAibWVyaXQiLAogICJtZXJyeSIsCiAgIm1lc2giLAogICJtZXNzYWdlIiwKICAibWV0YWwiLAogICJtZXRob2QiLAogICJtaWRkbGUiLAogICJtaWRuaWdodCIsCiAgIm1pbGsiLAogICJtaWxsaW9uIiwKICAibWltaWMiLAogICJtaW5kIiwKICAibWluaW11bSIsCiAgIm1pbm9yIiwKICAibWludXRlIiwKICAibWlyYWNsZSIsCiAgIm1pcnJvciIsCiAgIm1pc2VyeSIsCiAgIm1pc3MiLAogICJtaXN0YWtlIiwKICAibWl4IiwKICAibWl4ZWQiLAogICJtaXh0dXJlIiwKICAibW9iaWxlIiwKICAibW9kZWwiLAogICJtb2RpZnkiLAogICJtb20iLAogICJtb21lbnQiLAogICJtb25pdG9yIiwKICAibW9ua2V5IiwKICAibW9uc3RlciIsCiAgIm1vbnRoIiwKICAibW9vbiIsCiAgIm1vcmFsIiwKICAibW9yZSIsCiAgIm1vcm5pbmciLAogICJtb3NxdWl0byIsCiAgIm1vdGhlciIsCiAgIm1vdGlvbiIsCiAgIm1vdG9yIiwKICAibW91bnRhaW4iLAogICJtb3VzZSIsCiAgIm1vdmUiLAogICJtb3ZpZSIsCiAgIm11Y2giLAogICJtdWZmaW4iLAogICJtdWxlIiwKICAibXVsdGlwbHkiLAogICJtdXNjbGUiLAogICJtdXNldW0iLAogICJtdXNocm9vbSIsCiAgIm11c2ljIiwKICAibXVzdCIsCiAgIm11dHVhbCIsCiAgIm15c2VsZiIsCiAgIm15c3RlcnkiLAogICJteXRoIiwKICAibmFpdmUiLAogICJuYW1lIiwKICAibmFwa2luIiwKICAibmFycm93IiwKICAibmFzdHkiLAogICJuYXRpb24iLAogICJuYXR1cmUiLAogICJuZWFyIiwKICAibmVjayIsCiAgIm5lZWQiLAogICJuZWdhdGl2ZSIsCiAgIm5lZ2xlY3QiLAogICJuZWl0aGVyIiwKICAibmVwaGV3IiwKICAibmVydmUiLAogICJuZXN0IiwKICAibmV0IiwKICAibmV0d29yayIsCiAgIm5ldXRyYWwiLAogICJuZXZlciIsCiAgIm5ld3MiLAogICJuZXh0IiwKICAibmljZSIsCiAgIm5pZ2h0IiwKICAibm9ibGUiLAogICJub2lzZSIsCiAgIm5vbWluZWUiLAogICJub29kbGUiLAogICJub3JtYWwiLAogICJub3J0aCIsCiAgIm5vc2UiLAogICJub3RhYmxlIiwKICAibm90ZSIsCiAgIm5vdGhpbmciLAogICJub3RpY2UiLAogICJub3ZlbCIsCiAgIm5vdyIsCiAgIm51Y2xlYXIiLAogICJudW1iZXIiLAogICJudXJzZSIsCiAgIm51dCIsCiAgIm9hayIsCiAgIm9iZXkiLAogICJvYmplY3QiLAogICJvYmxpZ2UiLAogICJvYnNjdXJlIiwKICAib2JzZXJ2ZSIsCiAgIm9idGFpbiIsCiAgIm9idmlvdXMiLAogICJvY2N1ciIsCiAgIm9jZWFuIiwKICAib2N0b2JlciIsCiAgIm9kb3IiLAogICJvZmYiLAogICJvZmZlciIsCiAgIm9mZmljZSIsCiAgIm9mdGVuIiwKICAib2lsIiwKICAib2theSIsCiAgIm9sZCIsCiAgIm9saXZlIiwKICAib2x5bXBpYyIsCiAgIm9taXQiLAogICJvbmNlIiwKICAib25lIiwKICAib25pb24iLAogICJvbmxpbmUiLAogICJvbmx5IiwKICAib3BlbiIsCiAgIm9wZXJhIiwKICAib3BpbmlvbiIsCiAgIm9wcG9zZSIsCiAgIm9wdGlvbiIsCiAgIm9yYW5nZSIsCiAgIm9yYml0IiwKICAib3JjaGFyZCIsCiAgIm9yZGVyIiwKICAib3JkaW5hcnkiLAogICJvcmdhbiIsCiAgIm9yaWVudCIsCiAgIm9yaWdpbmFsIiwKICAib3JwaGFuIiwKICAib3N0cmljaCIsCiAgIm90aGVyIiwKICAib3V0ZG9vciIsCiAgIm91dGVyIiwKICAib3V0cHV0IiwKICAib3V0c2lkZSIsCiAgIm92YWwiLAogICJvdmVuIiwKICAib3ZlciIsCiAgIm93biIsCiAgIm93bmVyIiwKICAib3h5Z2VuIiwKICAib3lzdGVyIiwKICAib3pvbmUiLAogICJwYWN0IiwKICAicGFkZGxlIiwKICAicGFnZSIsCiAgInBhaXIiLAogICJwYWxhY2UiLAogICJwYWxtIiwKICAicGFuZGEiLAogICJwYW5lbCIsCiAgInBhbmljIiwKICAicGFudGhlciIsCiAgInBhcGVyIiwKICAicGFyYWRlIiwKICAicGFyZW50IiwKICAicGFyayIsCiAgInBhcnJvdCIsCiAgInBhcnR5IiwKICAicGFzcyIsCiAgInBhdGNoIiwKICAicGF0aCIsCiAgInBhdGllbnQiLAogICJwYXRyb2wiLAogICJwYXR0ZXJuIiwKICAicGF1c2UiLAogICJwYXZlIiwKICAicGF5bWVudCIsCiAgInBlYWNlIiwKICAicGVhbnV0IiwKICAicGVhciIsCiAgInBlYXNhbnQiLAogICJwZWxpY2FuIiwKICAicGVuIiwKICAicGVuYWx0eSIsCiAgInBlbmNpbCIsCiAgInBlb3BsZSIsCiAgInBlcHBlciIsCiAgInBlcmZlY3QiLAogICJwZXJtaXQiLAogICJwZXJzb24iLAogICJwZXQiLAogICJwaG9uZSIsCiAgInBob3RvIiwKICAicGhyYXNlIiwKICAicGh5c2ljYWwiLAogICJwaWFubyIsCiAgInBpY25pYyIsCiAgInBpY3R1cmUiLAogICJwaWVjZSIsCiAgInBpZyIsCiAgInBpZ2VvbiIsCiAgInBpbGwiLAogICJwaWxvdCIsCiAgInBpbmsiLAogICJwaW9uZWVyIiwKICAicGlwZSIsCiAgInBpc3RvbCIsCiAgInBpdGNoIiwKICAicGl6emEiLAogICJwbGFjZSIsCiAgInBsYW5ldCIsCiAgInBsYXN0aWMiLAogICJwbGF0ZSIsCiAgInBsYXkiLAogICJwbGVhc2UiLAogICJwbGVkZ2UiLAogICJwbHVjayIsCiAgInBsdWciLAogICJwbHVuZ2UiLAogICJwb2VtIiwKICAicG9ldCIsCiAgInBvaW50IiwKICAicG9sYXIiLAogICJwb2xlIiwKICAicG9saWNlIiwKICAicG9uZCIsCiAgInBvbnkiLAogICJwb29sIiwKICAicG9wdWxhciIsCiAgInBvcnRpb24iLAogICJwb3NpdGlvbiIsCiAgInBvc3NpYmxlIiwKICAicG9zdCIsCiAgInBvdGF0byIsCiAgInBvdHRlcnkiLAogICJwb3ZlcnR5IiwKICAicG93ZGVyIiwKICAicG93ZXIiLAogICJwcmFjdGljZSIsCiAgInByYWlzZSIsCiAgInByZWRpY3QiLAogICJwcmVmZXIiLAogICJwcmVwYXJlIiwKICAicHJlc2VudCIsCiAgInByZXR0eSIsCiAgInByZXZlbnQiLAogICJwcmljZSIsCiAgInByaWRlIiwKICAicHJpbWFyeSIsCiAgInByaW50IiwKICAicHJpb3JpdHkiLAogICJwcmlzb24iLAogICJwcml2YXRlIiwKICAicHJpemUiLAogICJwcm9ibGVtIiwKICAicHJvY2VzcyIsCiAgInByb2R1Y2UiLAogICJwcm9maXQiLAogICJwcm9ncmFtIiwKICAicHJvamVjdCIsCiAgInByb21vdGUiLAogICJwcm9vZiIsCiAgInByb3BlcnR5IiwKICAicHJvc3BlciIsCiAgInByb3RlY3QiLAogICJwcm91ZCIsCiAgInByb3ZpZGUiLAogICJwdWJsaWMiLAogICJwdWRkaW5nIiwKICAicHVsbCIsCiAgInB1bHAiLAogICJwdWxzZSIsCiAgInB1bXBraW4iLAogICJwdW5jaCIsCiAgInB1cGlsIiwKICAicHVwcHkiLAogICJwdXJjaGFzZSIsCiAgInB1cml0eSIsCiAgInB1cnBvc2UiLAogICJwdXJzZSIsCiAgInB1c2giLAogICJwdXQiLAogICJwdXp6bGUiLAogICJweXJhbWlkIiwKICAicXVhbGl0eSIsCiAgInF1YW50dW0iLAogICJxdWFydGVyIiwKICAicXVlc3Rpb24iLAogICJxdWljayIsCiAgInF1aXQiLAogICJxdWl6IiwKICAicXVvdGUiLAogICJyYWJiaXQiLAogICJyYWNjb29uIiwKICAicmFjZSIsCiAgInJhY2siLAogICJyYWRhciIsCiAgInJhZGlvIiwKICAicmFpbCIsCiAgInJhaW4iLAogICJyYWlzZSIsCiAgInJhbGx5IiwKICAicmFtcCIsCiAgInJhbmNoIiwKICAicmFuZG9tIiwKICAicmFuZ2UiLAogICJyYXBpZCIsCiAgInJhcmUiLAogICJyYXRlIiwKICAicmF0aGVyIiwKICAicmF2ZW4iLAogICJyYXciLAogICJyYXpvciIsCiAgInJlYWR5IiwKICAicmVhbCIsCiAgInJlYXNvbiIsCiAgInJlYmVsIiwKICAicmVidWlsZCIsCiAgInJlY2FsbCIsCiAgInJlY2VpdmUiLAogICJyZWNpcGUiLAogICJyZWNvcmQiLAogICJyZWN5Y2xlIiwKICAicmVkdWNlIiwKICAicmVmbGVjdCIsCiAgInJlZm9ybSIsCiAgInJlZnVzZSIsCiAgInJlZ2lvbiIsCiAgInJlZ3JldCIsCiAgInJlZ3VsYXIiLAogICJyZWplY3QiLAogICJyZWxheCIsCiAgInJlbGVhc2UiLAogICJyZWxpZWYiLAogICJyZWx5IiwKICAicmVtYWluIiwKICAicmVtZW1iZXIiLAogICJyZW1pbmQiLAogICJyZW1vdmUiLAogICJyZW5kZXIiLAogICJyZW5ldyIsCiAgInJlbnQiLAogICJyZW9wZW4iLAogICJyZXBhaXIiLAogICJyZXBlYXQiLAogICJyZXBsYWNlIiwKICAicmVwb3J0IiwKICAicmVxdWlyZSIsCiAgInJlc2N1ZSIsCiAgInJlc2VtYmxlIiwKICAicmVzaXN0IiwKICAicmVzb3VyY2UiLAogICJyZXNwb25zZSIsCiAgInJlc3VsdCIsCiAgInJldGlyZSIsCiAgInJldHJlYXQiLAogICJyZXR1cm4iLAogICJyZXVuaW9uIiwKICAicmV2ZWFsIiwKICAicmV2aWV3IiwKICAicmV3YXJkIiwKICAicmh5dGhtIiwKICAicmliIiwKICAicmliYm9uIiwKICAicmljZSIsCiAgInJpY2giLAogICJyaWRlIiwKICAicmlkZ2UiLAogICJyaWZsZSIsCiAgInJpZ2h0IiwKICAicmlnaWQiLAogICJyaW5nIiwKICAicmlvdCIsCiAgInJpcHBsZSIsCiAgInJpc2siLAogICJyaXR1YWwiLAogICJyaXZhbCIsCiAgInJpdmVyIiwKICAicm9hZCIsCiAgInJvYXN0IiwKICAicm9ib3QiLAogICJyb2J1c3QiLAogICJyb2NrZXQiLAogICJyb21hbmNlIiwKICAicm9vZiIsCiAgInJvb2tpZSIsCiAgInJvb20iLAogICJyb3NlIiwKICAicm90YXRlIiwKICAicm91Z2giLAogICJyb3VuZCIsCiAgInJvdXRlIiwKICAicm95YWwiLAogICJydWJiZXIiLAogICJydWRlIiwKICAicnVnIiwKICAicnVsZSIsCiAgInJ1biIsCiAgInJ1bndheSIsCiAgInJ1cmFsIiwKICAic2FkIiwKICAic2FkZGxlIiwKICAic2FkbmVzcyIsCiAgInNhZmUiLAogICJzYWlsIiwKICAic2FsYWQiLAogICJzYWxtb24iLAogICJzYWxvbiIsCiAgInNhbHQiLAogICJzYWx1dGUiLAogICJzYW1lIiwKICAic2FtcGxlIiwKICAic2FuZCIsCiAgInNhdGlzZnkiLAogICJzYXRvc2hpIiwKICAic2F1Y2UiLAogICJzYXVzYWdlIiwKICAic2F2ZSIsCiAgInNheSIsCiAgInNjYWxlIiwKICAic2NhbiIsCiAgInNjYXJlIiwKICAic2NhdHRlciIsCiAgInNjZW5lIiwKICAic2NoZW1lIiwKICAic2Nob29sIiwKICAic2NpZW5jZSIsCiAgInNjaXNzb3JzIiwKICAic2NvcnBpb24iLAogICJzY291dCIsCiAgInNjcmFwIiwKICAic2NyZWVuIiwKICAic2NyaXB0IiwKICAic2NydWIiLAogICJzZWEiLAogICJzZWFyY2giLAogICJzZWFzb24iLAogICJzZWF0IiwKICAic2Vjb25kIiwKICAic2VjcmV0IiwKICAic2VjdGlvbiIsCiAgInNlY3VyaXR5IiwKICAic2VlZCIsCiAgInNlZWsiLAogICJzZWdtZW50IiwKICAic2VsZWN0IiwKICAic2VsbCIsCiAgInNlbWluYXIiLAogICJzZW5pb3IiLAogICJzZW5zZSIsCiAgInNlbnRlbmNlIiwKICAic2VyaWVzIiwKICAic2VydmljZSIsCiAgInNlc3Npb24iLAogICJzZXR0bGUiLAogICJzZXR1cCIsCiAgInNldmVuIiwKICAic2hhZG93IiwKICAic2hhZnQiLAogICJzaGFsbG93IiwKICAic2hhcmUiLAogICJzaGVkIiwKICAic2hlbGwiLAogICJzaGVyaWZmIiwKICAic2hpZWxkIiwKICAic2hpZnQiLAogICJzaGluZSIsCiAgInNoaXAiLAogICJzaGl2ZXIiLAogICJzaG9jayIsCiAgInNob2UiLAogICJzaG9vdCIsCiAgInNob3AiLAogICJzaG9ydCIsCiAgInNob3VsZGVyIiwKICAic2hvdmUiLAogICJzaHJpbXAiLAogICJzaHJ1ZyIsCiAgInNodWZmbGUiLAogICJzaHkiLAogICJzaWJsaW5nIiwKICAic2ljayIsCiAgInNpZGUiLAogICJzaWVnZSIsCiAgInNpZ2h0IiwKICAic2lnbiIsCiAgInNpbGVudCIsCiAgInNpbGsiLAogICJzaWxseSIsCiAgInNpbHZlciIsCiAgInNpbWlsYXIiLAogICJzaW1wbGUiLAogICJzaW5jZSIsCiAgInNpbmciLAogICJzaXJlbiIsCiAgInNpc3RlciIsCiAgInNpdHVhdGUiLAogICJzaXgiLAogICJzaXplIiwKICAic2thdGUiLAogICJza2V0Y2giLAogICJza2kiLAogICJza2lsbCIsCiAgInNraW4iLAogICJza2lydCIsCiAgInNrdWxsIiwKICAic2xhYiIsCiAgInNsYW0iLAogICJzbGVlcCIsCiAgInNsZW5kZXIiLAogICJzbGljZSIsCiAgInNsaWRlIiwKICAic2xpZ2h0IiwKICAic2xpbSIsCiAgInNsb2dhbiIsCiAgInNsb3QiLAogICJzbG93IiwKICAic2x1c2giLAogICJzbWFsbCIsCiAgInNtYXJ0IiwKICAic21pbGUiLAogICJzbW9rZSIsCiAgInNtb290aCIsCiAgInNuYWNrIiwKICAic25ha2UiLAogICJzbmFwIiwKICAic25pZmYiLAogICJzbm93IiwKICAic29hcCIsCiAgInNvY2NlciIsCiAgInNvY2lhbCIsCiAgInNvY2siLAogICJzb2RhIiwKICAic29mdCIsCiAgInNvbGFyIiwKICAic29sZGllciIsCiAgInNvbGlkIiwKICAic29sdXRpb24iLAogICJzb2x2ZSIsCiAgInNvbWVvbmUiLAogICJzb25nIiwKICAic29vbiIsCiAgInNvcnJ5IiwKICAic29ydCIsCiAgInNvdWwiLAogICJzb3VuZCIsCiAgInNvdXAiLAogICJzb3VyY2UiLAogICJzb3V0aCIsCiAgInNwYWNlIiwKICAic3BhcmUiLAogICJzcGF0aWFsIiwKICAic3Bhd24iLAogICJzcGVhayIsCiAgInNwZWNpYWwiLAogICJzcGVlZCIsCiAgInNwZWxsIiwKICAic3BlbmQiLAogICJzcGhlcmUiLAogICJzcGljZSIsCiAgInNwaWRlciIsCiAgInNwaWtlIiwKICAic3BpbiIsCiAgInNwaXJpdCIsCiAgInNwbGl0IiwKICAic3BvaWwiLAogICJzcG9uc29yIiwKICAic3Bvb24iLAogICJzcG9ydCIsCiAgInNwb3QiLAogICJzcHJheSIsCiAgInNwcmVhZCIsCiAgInNwcmluZyIsCiAgInNweSIsCiAgInNxdWFyZSIsCiAgInNxdWVlemUiLAogICJzcXVpcnJlbCIsCiAgInN0YWJsZSIsCiAgInN0YWRpdW0iLAogICJzdGFmZiIsCiAgInN0YWdlIiwKICAic3RhaXJzIiwKICAic3RhbXAiLAogICJzdGFuZCIsCiAgInN0YXJ0IiwKICAic3RhdGUiLAogICJzdGF5IiwKICAic3RlYWsiLAogICJzdGVlbCIsCiAgInN0ZW0iLAogICJzdGVwIiwKICAic3RlcmVvIiwKICAic3RpY2siLAogICJzdGlsbCIsCiAgInN0aW5nIiwKICAic3RvY2siLAogICJzdG9tYWNoIiwKICAic3RvbmUiLAogICJzdG9vbCIsCiAgInN0b3J5IiwKICAic3RvdmUiLAogICJzdHJhdGVneSIsCiAgInN0cmVldCIsCiAgInN0cmlrZSIsCiAgInN0cm9uZyIsCiAgInN0cnVnZ2xlIiwKICAic3R1ZGVudCIsCiAgInN0dWZmIiwKICAic3R1bWJsZSIsCiAgInN0eWxlIiwKICAic3ViamVjdCIsCiAgInN1Ym1pdCIsCiAgInN1YndheSIsCiAgInN1Y2Nlc3MiLAogICJzdWNoIiwKICAic3VkZGVuIiwKICAic3VmZmVyIiwKICAic3VnYXIiLAogICJzdWdnZXN0IiwKICAic3VpdCIsCiAgInN1bW1lciIsCiAgInN1biIsCiAgInN1bm55IiwKICAic3Vuc2V0IiwKICAic3VwZXIiLAogICJzdXBwbHkiLAogICJzdXByZW1lIiwKICAic3VyZSIsCiAgInN1cmZhY2UiLAogICJzdXJnZSIsCiAgInN1cnByaXNlIiwKICAic3Vycm91bmQiLAogICJzdXJ2ZXkiLAogICJzdXNwZWN0IiwKICAic3VzdGFpbiIsCiAgInN3YWxsb3ciLAogICJzd2FtcCIsCiAgInN3YXAiLAogICJzd2FybSIsCiAgInN3ZWFyIiwKICAic3dlZXQiLAogICJzd2lmdCIsCiAgInN3aW0iLAogICJzd2luZyIsCiAgInN3aXRjaCIsCiAgInN3b3JkIiwKICAic3ltYm9sIiwKICAic3ltcHRvbSIsCiAgInN5cnVwIiwKICAic3lzdGVtIiwKICAidGFibGUiLAogICJ0YWNrbGUiLAogICJ0YWciLAogICJ0YWlsIiwKICAidGFsZW50IiwKICAidGFsayIsCiAgInRhbmsiLAogICJ0YXBlIiwKICAidGFyZ2V0IiwKICAidGFzayIsCiAgInRhc3RlIiwKICAidGF0dG9vIiwKICAidGF4aSIsCiAgInRlYWNoIiwKICAidGVhbSIsCiAgInRlbGwiLAogICJ0ZW4iLAogICJ0ZW5hbnQiLAogICJ0ZW5uaXMiLAogICJ0ZW50IiwKICAidGVybSIsCiAgInRlc3QiLAogICJ0ZXh0IiwKICAidGhhbmsiLAogICJ0aGF0IiwKICAidGhlbWUiLAogICJ0aGVuIiwKICAidGhlb3J5IiwKICAidGhlcmUiLAogICJ0aGV5IiwKICAidGhpbmciLAogICJ0aGlzIiwKICAidGhvdWdodCIsCiAgInRocmVlIiwKICAidGhyaXZlIiwKICAidGhyb3ciLAogICJ0aHVtYiIsCiAgInRodW5kZXIiLAogICJ0aWNrZXQiLAogICJ0aWRlIiwKICAidGlnZXIiLAogICJ0aWx0IiwKICAidGltYmVyIiwKICAidGltZSIsCiAgInRpbnkiLAogICJ0aXAiLAogICJ0aXJlZCIsCiAgInRpc3N1ZSIsCiAgInRpdGxlIiwKICAidG9hc3QiLAogICJ0b2JhY2NvIiwKICAidG9kYXkiLAogICJ0b2RkbGVyIiwKICAidG9lIiwKICAidG9nZXRoZXIiLAogICJ0b2lsZXQiLAogICJ0b2tlbiIsCiAgInRvbWF0byIsCiAgInRvbW9ycm93IiwKICAidG9uZSIsCiAgInRvbmd1ZSIsCiAgInRvbmlnaHQiLAogICJ0b29sIiwKICAidG9vdGgiLAogICJ0b3AiLAogICJ0b3BpYyIsCiAgInRvcHBsZSIsCiAgInRvcmNoIiwKICAidG9ybmFkbyIsCiAgInRvcnRvaXNlIiwKICAidG9zcyIsCiAgInRvdGFsIiwKICAidG91cmlzdCIsCiAgInRvd2FyZCIsCiAgInRvd2VyIiwKICAidG93biIsCiAgInRveSIsCiAgInRyYWNrIiwKICAidHJhZGUiLAogICJ0cmFmZmljIiwKICAidHJhZ2ljIiwKICAidHJhaW4iLAogICJ0cmFuc2ZlciIsCiAgInRyYXAiLAogICJ0cmFzaCIsCiAgInRyYXZlbCIsCiAgInRyYXkiLAogICJ0cmVhdCIsCiAgInRyZWUiLAogICJ0cmVuZCIsCiAgInRyaWFsIiwKICAidHJpYmUiLAogICJ0cmljayIsCiAgInRyaWdnZXIiLAogICJ0cmltIiwKICAidHJpcCIsCiAgInRyb3BoeSIsCiAgInRyb3VibGUiLAogICJ0cnVjayIsCiAgInRydWUiLAogICJ0cnVseSIsCiAgInRydW1wZXQiLAogICJ0cnVzdCIsCiAgInRydXRoIiwKICAidHJ5IiwKICAidHViZSIsCiAgInR1aXRpb24iLAogICJ0dW1ibGUiLAogICJ0dW5hIiwKICAidHVubmVsIiwKICAidHVya2V5IiwKICAidHVybiIsCiAgInR1cnRsZSIsCiAgInR3ZWx2ZSIsCiAgInR3ZW50eSIsCiAgInR3aWNlIiwKICAidHdpbiIsCiAgInR3aXN0IiwKICAidHdvIiwKICAidHlwZSIsCiAgInR5cGljYWwiLAogICJ1Z2x5IiwKICAidW1icmVsbGEiLAogICJ1bmFibGUiLAogICJ1bmF3YXJlIiwKICAidW5jbGUiLAogICJ1bmNvdmVyIiwKICAidW5kZXIiLAogICJ1bmRvIiwKICAidW5mYWlyIiwKICAidW5mb2xkIiwKICAidW5oYXBweSIsCiAgInVuaWZvcm0iLAogICJ1bmlxdWUiLAogICJ1bml0IiwKICAidW5pdmVyc2UiLAogICJ1bmtub3duIiwKICAidW5sb2NrIiwKICAidW50aWwiLAogICJ1bnVzdWFsIiwKICAidW52ZWlsIiwKICAidXBkYXRlIiwKICAidXBncmFkZSIsCiAgInVwaG9sZCIsCiAgInVwb24iLAogICJ1cHBlciIsCiAgInVwc2V0IiwKICAidXJiYW4iLAogICJ1cmdlIiwKICAidXNhZ2UiLAogICJ1c2UiLAogICJ1c2VkIiwKICAidXNlZnVsIiwKICAidXNlbGVzcyIsCiAgInVzdWFsIiwKICAidXRpbGl0eSIsCiAgInZhY2FudCIsCiAgInZhY3V1bSIsCiAgInZhZ3VlIiwKICAidmFsaWQiLAogICJ2YWxsZXkiLAogICJ2YWx2ZSIsCiAgInZhbiIsCiAgInZhbmlzaCIsCiAgInZhcG9yIiwKICAidmFyaW91cyIsCiAgInZhc3QiLAogICJ2YXVsdCIsCiAgInZlaGljbGUiLAogICJ2ZWx2ZXQiLAogICJ2ZW5kb3IiLAogICJ2ZW50dXJlIiwKICAidmVudWUiLAogICJ2ZXJiIiwKICAidmVyaWZ5IiwKICAidmVyc2lvbiIsCiAgInZlcnkiLAogICJ2ZXNzZWwiLAogICJ2ZXRlcmFuIiwKICAidmlhYmxlIiwKICAidmlicmFudCIsCiAgInZpY2lvdXMiLAogICJ2aWN0b3J5IiwKICAidmlkZW8iLAogICJ2aWV3IiwKICAidmlsbGFnZSIsCiAgInZpbnRhZ2UiLAogICJ2aW9saW4iLAogICJ2aXJ0dWFsIiwKICAidmlydXMiLAogICJ2aXNhIiwKICAidmlzaXQiLAogICJ2aXN1YWwiLAogICJ2aXRhbCIsCiAgInZpdmlkIiwKICAidm9jYWwiLAogICJ2b2ljZSIsCiAgInZvaWQiLAogICJ2b2xjYW5vIiwKICAidm9sdW1lIiwKICAidm90ZSIsCiAgInZveWFnZSIsCiAgIndhZ2UiLAogICJ3YWdvbiIsCiAgIndhaXQiLAogICJ3YWxrIiwKICAid2FsbCIsCiAgIndhbG51dCIsCiAgIndhbnQiLAogICJ3YXJmYXJlIiwKICAid2FybSIsCiAgIndhcnJpb3IiLAogICJ3YXNoIiwKICAid2FzcCIsCiAgIndhc3RlIiwKICAid2F0ZXIiLAogICJ3YXZlIiwKICAid2F5IiwKICAid2VhbHRoIiwKICAid2VhcG9uIiwKICAid2VhciIsCiAgIndlYXNlbCIsCiAgIndlYXRoZXIiLAogICJ3ZWIiLAogICJ3ZWRkaW5nIiwKICAid2Vla2VuZCIsCiAgIndlaXJkIiwKICAid2VsY29tZSIsCiAgIndlc3QiLAogICJ3ZXQiLAogICJ3aGFsZSIsCiAgIndoYXQiLAogICJ3aGVhdCIsCiAgIndoZWVsIiwKICAid2hlbiIsCiAgIndoZXJlIiwKICAid2hpcCIsCiAgIndoaXNwZXIiLAogICJ3aWRlIiwKICAid2lkdGgiLAogICJ3aWZlIiwKICAid2lsZCIsCiAgIndpbGwiLAogICJ3aW4iLAogICJ3aW5kb3ciLAogICJ3aW5lIiwKICAid2luZyIsCiAgIndpbmsiLAogICJ3aW5uZXIiLAogICJ3aW50ZXIiLAogICJ3aXJlIiwKICAid2lzZG9tIiwKICAid2lzZSIsCiAgIndpc2giLAogICJ3aXRuZXNzIiwKICAid29sZiIsCiAgIndvbWFuIiwKICAid29uZGVyIiwKICAid29vZCIsCiAgIndvb2wiLAogICJ3b3JkIiwKICAid29yayIsCiAgIndvcmxkIiwKICAid29ycnkiLAogICJ3b3J0aCIsCiAgIndyYXAiLAogICJ3cmVjayIsCiAgIndyZXN0bGUiLAogICJ3cmlzdCIsCiAgIndyaXRlIiwKICAid3JvbmciLAogICJ5YXJkIiwKICAieWVhciIsCiAgInllbGxvdyIsCiAgInlvdSIsCiAgInlvdW5nIiwKICAieW91dGgiLAogICJ6ZWJyYSIsCiAgInplcm8iLAogICJ6b25lIiwKICAiem9vIgpdCgp9LHt9XSwyNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLy8gUmVmZXJlbmNlIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpcHMvYmxvYi9tYXN0ZXIvYmlwLTAwNjYubWVkaWF3aWtpCi8vIEZvcm1hdDogMHgzMCBbdG90YWwtbGVuZ3RoXSAweDAyIFtSLWxlbmd0aF0gW1JdIDB4MDIgW1MtbGVuZ3RoXSBbU10KLy8gTk9URTogU0lHSEFTSCBieXRlIGlnbm9yZWQgQU5EIHJlc3RyaWN0ZWQsIHRydW5jYXRlIGJlZm9yZSB1c2UKCmZ1bmN0aW9uIGNoZWNrIChidWZmZXIpIHsKICBpZiAoYnVmZmVyLmxlbmd0aCA8IDgpIHJldHVybiBmYWxzZQogIGlmIChidWZmZXIubGVuZ3RoID4gNzIpIHJldHVybiBmYWxzZQogIGlmIChidWZmZXJbMF0gIT09IDB4MzApIHJldHVybiBmYWxzZQogIGlmIChidWZmZXJbMV0gIT09IGJ1ZmZlci5sZW5ndGggLSAyKSByZXR1cm4gZmFsc2UKICBpZiAoYnVmZmVyWzJdICE9PSAweDAyKSByZXR1cm4gZmFsc2UKCiAgdmFyIGxlblIgPSBidWZmZXJbM10KICBpZiAobGVuUiA9PT0gMCkgcmV0dXJuIGZhbHNlCiAgaWYgKDUgKyBsZW5SID49IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBmYWxzZQogIGlmIChidWZmZXJbNCArIGxlblJdICE9PSAweDAyKSByZXR1cm4gZmFsc2UKCiAgdmFyIGxlblMgPSBidWZmZXJbNSArIGxlblJdCiAgaWYgKGxlblMgPT09IDApIHJldHVybiBmYWxzZQogIGlmICgoNiArIGxlblIgKyBsZW5TKSAhPT0gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIGZhbHNlCgogIGlmIChidWZmZXJbNF0gJiAweDgwKSByZXR1cm4gZmFsc2UKICBpZiAobGVuUiA+IDEgJiYgKGJ1ZmZlcls0XSA9PT0gMHgwMCkgJiYgIShidWZmZXJbNV0gJiAweDgwKSkgcmV0dXJuIGZhbHNlCgogIGlmIChidWZmZXJbbGVuUiArIDZdICYgMHg4MCkgcmV0dXJuIGZhbHNlCiAgaWYgKGxlblMgPiAxICYmIChidWZmZXJbbGVuUiArIDZdID09PSAweDAwKSAmJiAhKGJ1ZmZlcltsZW5SICsgN10gJiAweDgwKSkgcmV0dXJuIGZhbHNlCiAgcmV0dXJuIHRydWUKfQoKZnVuY3Rpb24gZGVjb2RlIChidWZmZXIpIHsKICBpZiAoYnVmZmVyLmxlbmd0aCA8IDgpIHRocm93IG5ldyBFcnJvcignREVSIHNlcXVlbmNlIGxlbmd0aCBpcyB0b28gc2hvcnQnKQogIGlmIChidWZmZXIubGVuZ3RoID4gNzIpIHRocm93IG5ldyBFcnJvcignREVSIHNlcXVlbmNlIGxlbmd0aCBpcyB0b28gbG9uZycpCiAgaWYgKGJ1ZmZlclswXSAhPT0gMHgzMCkgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBERVIgc2VxdWVuY2UnKQogIGlmIChidWZmZXJbMV0gIT09IGJ1ZmZlci5sZW5ndGggLSAyKSB0aHJvdyBuZXcgRXJyb3IoJ0RFUiBzZXF1ZW5jZSBsZW5ndGggaXMgaW52YWxpZCcpCiAgaWYgKGJ1ZmZlclsyXSAhPT0gMHgwMikgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBERVIgaW50ZWdlcicpCgogIHZhciBsZW5SID0gYnVmZmVyWzNdCiAgaWYgKGxlblIgPT09IDApIHRocm93IG5ldyBFcnJvcignUiBsZW5ndGggaXMgemVybycpCiAgaWYgKDUgKyBsZW5SID49IGJ1ZmZlci5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignUiBsZW5ndGggaXMgdG9vIGxvbmcnKQogIGlmIChidWZmZXJbNCArIGxlblJdICE9PSAweDAyKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIERFUiBpbnRlZ2VyICgyKScpCgogIHZhciBsZW5TID0gYnVmZmVyWzUgKyBsZW5SXQogIGlmIChsZW5TID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ1MgbGVuZ3RoIGlzIHplcm8nKQogIGlmICgoNiArIGxlblIgKyBsZW5TKSAhPT0gYnVmZmVyLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdTIGxlbmd0aCBpcyBpbnZhbGlkJykKCiAgaWYgKGJ1ZmZlcls0XSAmIDB4ODApIHRocm93IG5ldyBFcnJvcignUiB2YWx1ZSBpcyBuZWdhdGl2ZScpCiAgaWYgKGxlblIgPiAxICYmIChidWZmZXJbNF0gPT09IDB4MDApICYmICEoYnVmZmVyWzVdICYgMHg4MCkpIHRocm93IG5ldyBFcnJvcignUiB2YWx1ZSBleGNlc3NpdmVseSBwYWRkZWQnKQoKICBpZiAoYnVmZmVyW2xlblIgKyA2XSAmIDB4ODApIHRocm93IG5ldyBFcnJvcignUyB2YWx1ZSBpcyBuZWdhdGl2ZScpCiAgaWYgKGxlblMgPiAxICYmIChidWZmZXJbbGVuUiArIDZdID09PSAweDAwKSAmJiAhKGJ1ZmZlcltsZW5SICsgN10gJiAweDgwKSkgdGhyb3cgbmV3IEVycm9yKCdTIHZhbHVlIGV4Y2Vzc2l2ZWx5IHBhZGRlZCcpCgogIC8vIG5vbi1CSVA2NiAtIGV4dHJhY3QgUiwgUyB2YWx1ZXMKICByZXR1cm4gewogICAgcjogYnVmZmVyLnNsaWNlKDQsIDQgKyBsZW5SKSwKICAgIHM6IGJ1ZmZlci5zbGljZSg2ICsgbGVuUikKICB9Cn0KCi8qCiAqIEV4cGVjdHMgciBhbmQgcyB0byBiZSBwb3NpdGl2ZSBERVIgaW50ZWdlcnMuCiAqCiAqIFRoZSBERVIgZm9ybWF0IHVzZXMgdGhlIG1vc3Qgc2lnbmlmaWNhbnQgYml0IGFzIGEgc2lnbiBiaXQgKCYgMHg4MCkuCiAqIElmIHRoZSBzaWduaWZpY2FudCBiaXQgaXMgc2V0IEFORCB0aGUgaW50ZWdlciBpcyBwb3NpdGl2ZSwgYSAweDAwIGlzIHByZXBlbmRlZC4KICoKICogRXhhbXBsZXM6CiAqCiAqICAgICAgMCA9PiAgICAgMHgwMAogKiAgICAgIDEgPT4gICAgIDB4MDEKICogICAgIC0xID0+ICAgICAweGZmCiAqICAgIDEyNyA9PiAgICAgMHg3ZgogKiAgIC0xMjcgPT4gICAgIDB4ODEKICogICAgMTI4ID0+ICAgMHgwMDgwCiAqICAgLTEyOCA9PiAgICAgMHg4MAogKiAgICAyNTUgPT4gICAweDAwZmYKICogICAtMjU1ID0+ICAgMHhmZjAxCiAqICAxNjMwMCA9PiAgIDB4M2ZhYwogKiAtMTYzMDAgPT4gICAweGMwNTQKICogIDYyMzAwID0+IDB4MDBmMzVjCiAqIC02MjMwMCA9PiAweGZmMGNhNAoqLwpmdW5jdGlvbiBlbmNvZGUgKHIsIHMpIHsKICB2YXIgbGVuUiA9IHIubGVuZ3RoCiAgdmFyIGxlblMgPSBzLmxlbmd0aAogIGlmIChsZW5SID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ1IgbGVuZ3RoIGlzIHplcm8nKQogIGlmIChsZW5TID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ1MgbGVuZ3RoIGlzIHplcm8nKQogIGlmIChsZW5SID4gMzMpIHRocm93IG5ldyBFcnJvcignUiBsZW5ndGggaXMgdG9vIGxvbmcnKQogIGlmIChsZW5TID4gMzMpIHRocm93IG5ldyBFcnJvcignUyBsZW5ndGggaXMgdG9vIGxvbmcnKQogIGlmIChyWzBdICYgMHg4MCkgdGhyb3cgbmV3IEVycm9yKCdSIHZhbHVlIGlzIG5lZ2F0aXZlJykKICBpZiAoc1swXSAmIDB4ODApIHRocm93IG5ldyBFcnJvcignUyB2YWx1ZSBpcyBuZWdhdGl2ZScpCiAgaWYgKGxlblIgPiAxICYmIChyWzBdID09PSAweDAwKSAmJiAhKHJbMV0gJiAweDgwKSkgdGhyb3cgbmV3IEVycm9yKCdSIHZhbHVlIGV4Y2Vzc2l2ZWx5IHBhZGRlZCcpCiAgaWYgKGxlblMgPiAxICYmIChzWzBdID09PSAweDAwKSAmJiAhKHNbMV0gJiAweDgwKSkgdGhyb3cgbmV3IEVycm9yKCdTIHZhbHVlIGV4Y2Vzc2l2ZWx5IHBhZGRlZCcpCgogIHZhciBzaWduYXR1cmUgPSBuZXcgQnVmZmVyKDYgKyBsZW5SICsgbGVuUykKCiAgLy8gMHgzMCBbdG90YWwtbGVuZ3RoXSAweDAyIFtSLWxlbmd0aF0gW1JdIDB4MDIgW1MtbGVuZ3RoXSBbU10KICBzaWduYXR1cmVbMF0gPSAweDMwCiAgc2lnbmF0dXJlWzFdID0gc2lnbmF0dXJlLmxlbmd0aCAtIDIKICBzaWduYXR1cmVbMl0gPSAweDAyCiAgc2lnbmF0dXJlWzNdID0gci5sZW5ndGgKICByLmNvcHkoc2lnbmF0dXJlLCA0KQogIHNpZ25hdHVyZVs0ICsgbGVuUl0gPSAweDAyCiAgc2lnbmF0dXJlWzUgKyBsZW5SXSA9IHMubGVuZ3RoCiAgcy5jb3B5KHNpZ25hdHVyZSwgNiArIGxlblIpCgogIHJldHVybiBzaWduYXR1cmUKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgY2hlY2s6IGNoZWNrLAogIGRlY29kZTogZGVjb2RlLAogIGVuY29kZTogZW5jb2RlCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjc2fV0sMjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBiczU4Y2hlY2sgPSByZXF1aXJlKCdiczU4Y2hlY2snKQp2YXIgYnNjcmlwdCA9IHJlcXVpcmUoJy4vc2NyaXB0JykKdmFyIG5ldHdvcmtzID0gcmVxdWlyZSgnLi9uZXR3b3JrcycpCnZhciB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKQp2YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJykKCmZ1bmN0aW9uIGZyb21CYXNlNThDaGVjayAoYWRkcmVzcykgewogIHZhciBwYXlsb2FkID0gYnM1OGNoZWNrLmRlY29kZShhZGRyZXNzKQogIGlmIChwYXlsb2FkLmxlbmd0aCA8IDIxKSB0aHJvdyBuZXcgVHlwZUVycm9yKGFkZHJlc3MgKyAnIGlzIHRvbyBzaG9ydCcpCiAgaWYgKHBheWxvYWQubGVuZ3RoID4gMjEpIHRocm93IG5ldyBUeXBlRXJyb3IoYWRkcmVzcyArICcgaXMgdG9vIGxvbmcnKQoKICB2YXIgdmVyc2lvbiA9IHBheWxvYWRbMF0KICB2YXIgaGFzaCA9IHBheWxvYWQuc2xpY2UoMSkKCiAgcmV0dXJuIHsgaGFzaDogaGFzaCwgdmVyc2lvbjogdmVyc2lvbiB9Cn0KCmZ1bmN0aW9uIGZyb21PdXRwdXRTY3JpcHQgKHNjcmlwdFB1YktleSwgbmV0d29yaykgewogIG5ldHdvcmsgPSBuZXR3b3JrIHx8IG5ldHdvcmtzLmJpdGNvaW4KCiAgaWYgKGJzY3JpcHQuaXNQdWJLZXlIYXNoT3V0cHV0KHNjcmlwdFB1YktleSkpIHJldHVybiB0b0Jhc2U1OENoZWNrKGJzY3JpcHQuY29tcGlsZShzY3JpcHRQdWJLZXkpLnNsaWNlKDMsIDIzKSwgbmV0d29yay5wdWJLZXlIYXNoKQogIGlmIChic2NyaXB0LmlzU2NyaXB0SGFzaE91dHB1dChzY3JpcHRQdWJLZXkpKSByZXR1cm4gdG9CYXNlNThDaGVjayhic2NyaXB0LmNvbXBpbGUoc2NyaXB0UHViS2V5KS5zbGljZSgyLCAyMiksIG5ldHdvcmsuc2NyaXB0SGFzaCkKCiAgdGhyb3cgbmV3IEVycm9yKGJzY3JpcHQudG9BU00oc2NyaXB0UHViS2V5KSArICcgaGFzIG5vIG1hdGNoaW5nIEFkZHJlc3MnKQp9CgpmdW5jdGlvbiB0b0Jhc2U1OENoZWNrIChoYXNoLCB2ZXJzaW9uKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkhhc2gxNjBiaXQsIHR5cGVzLlVJbnQ4KSwgYXJndW1lbnRzKQoKICB2YXIgcGF5bG9hZCA9IG5ldyBCdWZmZXIoMjEpCiAgcGF5bG9hZC53cml0ZVVJbnQ4KHZlcnNpb24sIDApCiAgaGFzaC5jb3B5KHBheWxvYWQsIDEpCgogIHJldHVybiBiczU4Y2hlY2suZW5jb2RlKHBheWxvYWQpCn0KCmZ1bmN0aW9uIHRvT3V0cHV0U2NyaXB0IChhZGRyZXNzLCBuZXR3b3JrKSB7CiAgbmV0d29yayA9IG5ldHdvcmsgfHwgbmV0d29ya3MuYml0Y29pbgoKICB2YXIgZGVjb2RlID0gZnJvbUJhc2U1OENoZWNrKGFkZHJlc3MpCiAgaWYgKGRlY29kZS52ZXJzaW9uID09PSBuZXR3b3JrLnB1YktleUhhc2gpIHJldHVybiBic2NyaXB0LnB1YktleUhhc2hPdXRwdXQoZGVjb2RlLmhhc2gpCiAgaWYgKGRlY29kZS52ZXJzaW9uID09PSBuZXR3b3JrLnNjcmlwdEhhc2gpIHJldHVybiBic2NyaXB0LnNjcmlwdEhhc2hPdXRwdXQoZGVjb2RlLmhhc2gpCgogIHRocm93IG5ldyBFcnJvcihhZGRyZXNzICsgJyBoYXMgbm8gbWF0Y2hpbmcgU2NyaXB0JykKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgZnJvbUJhc2U1OENoZWNrOiBmcm9tQmFzZTU4Q2hlY2ssCiAgZnJvbU91dHB1dFNjcmlwdDogZnJvbU91dHB1dFNjcmlwdCwKICB0b0Jhc2U1OENoZWNrOiB0b0Jhc2U1OENoZWNrLAogIHRvT3V0cHV0U2NyaXB0OiB0b091dHB1dFNjcmlwdAp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9uZXR3b3JrcyI6MzUsIi4vc2NyaXB0IjozNywiLi90eXBlcyI6NDEsImJzNThjaGVjayI6NzEsImJ1ZmZlciI6NzYsInR5cGVmb3JjZSI6MTczfV0sMjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBidWZmZXJ1dGlscyA9IHJlcXVpcmUoJy4vYnVmZmVydXRpbHMnKQp2YXIgYmNyeXB0byA9IHJlcXVpcmUoJy4vY3J5cHRvJykKdmFyIGNvbXBhcmUgPSByZXF1aXJlKCdidWZmZXItY29tcGFyZScpCgp2YXIgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL3RyYW5zYWN0aW9uJykKCmZ1bmN0aW9uIEJsb2NrICgpIHsKICB0aGlzLnZlcnNpb24gPSAxCiAgdGhpcy5wcmV2SGFzaCA9IG51bGwKICB0aGlzLm1lcmtsZVJvb3QgPSBudWxsCiAgdGhpcy50aW1lc3RhbXAgPSAwCiAgdGhpcy5iaXRzID0gMAogIHRoaXMubm9uY2UgPSAwCn0KCkJsb2NrLmZyb21CdWZmZXIgPSBmdW5jdGlvbiAoYnVmZmVyKSB7CiAgaWYgKGJ1ZmZlci5sZW5ndGggPCA4MCkgdGhyb3cgbmV3IEVycm9yKCdCdWZmZXIgdG9vIHNtYWxsICg8IDgwIGJ5dGVzKScpCgogIHZhciBvZmZzZXQgPSAwCiAgZnVuY3Rpb24gcmVhZFNsaWNlIChuKSB7CiAgICBvZmZzZXQgKz0gbgogICAgcmV0dXJuIGJ1ZmZlci5zbGljZShvZmZzZXQgLSBuLCBvZmZzZXQpCiAgfQoKICBmdW5jdGlvbiByZWFkVUludDMyICgpIHsKICAgIHZhciBpID0gYnVmZmVyLnJlYWRVSW50MzJMRShvZmZzZXQpCiAgICBvZmZzZXQgKz0gNAogICAgcmV0dXJuIGkKICB9CgogIHZhciBibG9jayA9IG5ldyBCbG9jaygpCiAgYmxvY2sudmVyc2lvbiA9IHJlYWRVSW50MzIoKQogIGJsb2NrLnByZXZIYXNoID0gcmVhZFNsaWNlKDMyKQogIGJsb2NrLm1lcmtsZVJvb3QgPSByZWFkU2xpY2UoMzIpCiAgYmxvY2sudGltZXN0YW1wID0gcmVhZFVJbnQzMigpCiAgYmxvY2suYml0cyA9IHJlYWRVSW50MzIoKQogIGJsb2NrLm5vbmNlID0gcmVhZFVJbnQzMigpCgogIGlmIChidWZmZXIubGVuZ3RoID09PSA4MCkgcmV0dXJuIGJsb2NrCgogIGZ1bmN0aW9uIHJlYWRWYXJJbnQgKCkgewogICAgdmFyIHZpID0gYnVmZmVydXRpbHMucmVhZFZhckludChidWZmZXIsIG9mZnNldCkKICAgIG9mZnNldCArPSB2aS5zaXplCiAgICByZXR1cm4gdmkubnVtYmVyCiAgfQoKICBmdW5jdGlvbiByZWFkVHJhbnNhY3Rpb24gKCkgewogICAgdmFyIHR4ID0gVHJhbnNhY3Rpb24uZnJvbUJ1ZmZlcihidWZmZXIuc2xpY2Uob2Zmc2V0KSwgdHJ1ZSkKCiAgICBvZmZzZXQgKz0gdHguYnl0ZUxlbmd0aCgpCiAgICByZXR1cm4gdHgKICB9CgogIHZhciBuVHJhbnNhY3Rpb25zID0gcmVhZFZhckludCgpCiAgYmxvY2sudHJhbnNhY3Rpb25zID0gW10KCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuVHJhbnNhY3Rpb25zOyArK2kpIHsKICAgIHZhciB0eCA9IHJlYWRUcmFuc2FjdGlvbigpCiAgICBibG9jay50cmFuc2FjdGlvbnMucHVzaCh0eCkKICB9CgogIHJldHVybiBibG9jawp9CgpCbG9jay5mcm9tSGV4ID0gZnVuY3Rpb24gKGhleCkgewogIHJldHVybiBCbG9jay5mcm9tQnVmZmVyKG5ldyBCdWZmZXIoaGV4LCAnaGV4JykpCn0KCkJsb2NrLnByb3RvdHlwZS5nZXRIYXNoID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBiY3J5cHRvLmhhc2gyNTYodGhpcy50b0J1ZmZlcih0cnVlKSkKfQoKQmxvY2sucHJvdG90eXBlLmdldElkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBbXS5yZXZlcnNlLmNhbGwodGhpcy5nZXRIYXNoKCkpLnRvU3RyaW5nKCdoZXgnKQp9CgpCbG9jay5wcm90b3R5cGUuZ2V0VVRDRGF0ZSA9IGZ1bmN0aW9uICgpIHsKICB2YXIgZGF0ZSA9IG5ldyBEYXRlKDApIC8vIGVwb2NoCiAgZGF0ZS5zZXRVVENTZWNvbmRzKHRoaXMudGltZXN0YW1wKQoKICByZXR1cm4gZGF0ZQp9CgpCbG9jay5wcm90b3R5cGUudG9CdWZmZXIgPSBmdW5jdGlvbiAoaGVhZGVyc09ubHkpIHsKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcig4MCkKCiAgdmFyIG9mZnNldCA9IDAKICBmdW5jdGlvbiB3cml0ZVNsaWNlIChzbGljZSkgewogICAgc2xpY2UuY29weShidWZmZXIsIG9mZnNldCkKICAgIG9mZnNldCArPSBzbGljZS5sZW5ndGgKICB9CgogIGZ1bmN0aW9uIHdyaXRlVUludDMyIChpKSB7CiAgICBidWZmZXIud3JpdGVVSW50MzJMRShpLCBvZmZzZXQpCiAgICBvZmZzZXQgKz0gNAogIH0KCiAgd3JpdGVVSW50MzIodGhpcy52ZXJzaW9uKQogIHdyaXRlU2xpY2UodGhpcy5wcmV2SGFzaCkKICB3cml0ZVNsaWNlKHRoaXMubWVya2xlUm9vdCkKICB3cml0ZVVJbnQzMih0aGlzLnRpbWVzdGFtcCkKICB3cml0ZVVJbnQzMih0aGlzLmJpdHMpCiAgd3JpdGVVSW50MzIodGhpcy5ub25jZSkKCiAgaWYgKGhlYWRlcnNPbmx5IHx8ICF0aGlzLnRyYW5zYWN0aW9ucykgcmV0dXJuIGJ1ZmZlcgoKICB2YXIgdHhMZW5CdWZmZXIgPSBidWZmZXJ1dGlscy52YXJJbnRCdWZmZXIodGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoKQogIHZhciB0eEJ1ZmZlcnMgPSB0aGlzLnRyYW5zYWN0aW9ucy5tYXAoZnVuY3Rpb24gKHR4KSB7CiAgICByZXR1cm4gdHgudG9CdWZmZXIoKQogIH0pCgogIHJldHVybiBCdWZmZXIuY29uY2F0KFtidWZmZXIsIHR4TGVuQnVmZmVyXS5jb25jYXQodHhCdWZmZXJzKSkKfQoKQmxvY2sucHJvdG90eXBlLnRvSGV4ID0gZnVuY3Rpb24gKGhlYWRlcnNPbmx5KSB7CiAgcmV0dXJuIHRoaXMudG9CdWZmZXIoaGVhZGVyc09ubHkpLnRvU3RyaW5nKCdoZXgnKQp9CgpCbG9jay5jYWxjdWxhdGVUYXJnZXQgPSBmdW5jdGlvbiAoYml0cykgewogIHZhciBleHBvbmVudCA9ICgoYml0cyAmIDB4ZmYwMDAwMDApID4+IDI0KSAtIDMKICB2YXIgbWFudGlzc2EgPSBiaXRzICYgMHgwMDdmZmZmZgogIHZhciBpID0gMzEgLSBleHBvbmVudAoKICB2YXIgdGFyZ2V0ID0gbmV3IEJ1ZmZlcigzMikKICB0YXJnZXQuZmlsbCgwKQoKICB0YXJnZXRbaV0gPSBtYW50aXNzYSAmIDB4ZmYKICB0YXJnZXRbaSAtIDFdID0gbWFudGlzc2EgPj4gOAogIHRhcmdldFtpIC0gMl0gPSBtYW50aXNzYSA+PiAxNgogIHRhcmdldFtpIC0gM10gPSBtYW50aXNzYSA+PiAyNAoKICByZXR1cm4gdGFyZ2V0Cn0KCkJsb2NrLnByb3RvdHlwZS5jaGVja1Byb29mT2ZXb3JrID0gZnVuY3Rpb24gKCkgewogIHZhciBoYXNoID0gW10ucmV2ZXJzZS5jYWxsKHRoaXMuZ2V0SGFzaCgpKQogIHZhciB0YXJnZXQgPSBCbG9jay5jYWxjdWxhdGVUYXJnZXQodGhpcy5iaXRzKQoKICByZXR1cm4gY29tcGFyZShoYXNoLCB0YXJnZXQpIDw9IDAKfQoKbW9kdWxlLmV4cG9ydHMgPSBCbG9jawoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYnVmZmVydXRpbHMiOjI3LCIuL2NyeXB0byI6MjgsIi4vdHJhbnNhY3Rpb24iOjM5LCJidWZmZXIiOjc2LCJidWZmZXItY29tcGFyZSI6NzJ9XSwyNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIG9wY29kZXMgPSByZXF1aXJlKCcuL29wY29kZXMnKQoKLy8gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvYmxvYi9tYXN0ZXIvaW5kZXguanMjTDExMjcKZnVuY3Rpb24gdmVyaWZ1aW50ICh2YWx1ZSwgbWF4KSB7CiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHRocm93IG5ldyBFcnJvcignY2Fubm90IHdyaXRlIGEgbm9uLW51bWJlciBhcyBhIG51bWJlcicpCiAgaWYgKHZhbHVlIDwgMCkgdGhyb3cgbmV3IEVycm9yKCdzcGVjaWZpZWQgYSBuZWdhdGl2ZSB2YWx1ZSBmb3Igd3JpdGluZyBhbiB1bnNpZ25lZCB2YWx1ZScpCiAgaWYgKHZhbHVlID4gbWF4KSB0aHJvdyBuZXcgRXJyb3IoJ3ZhbHVlIGlzIGxhcmdlciB0aGFuIG1heGltdW0gdmFsdWUgZm9yIHR5cGUnKQogIGlmIChNYXRoLmZsb29yKHZhbHVlKSAhPT0gdmFsdWUpIHRocm93IG5ldyBFcnJvcigndmFsdWUgaGFzIGEgZnJhY3Rpb25hbCBjb21wb25lbnQnKQp9CgpmdW5jdGlvbiBwdXNoRGF0YVNpemUgKGkpIHsKICByZXR1cm4gaSA8IG9wY29kZXMuT1BfUFVTSERBVEExID8gMQogIDogaSA8IDB4ZmYgPyAyCiAgOiBpIDwgMHhmZmZmID8gMwogIDogNQp9CgpmdW5jdGlvbiByZWFkUHVzaERhdGFJbnQgKGJ1ZmZlciwgb2Zmc2V0KSB7CiAgdmFyIG9wY29kZSA9IGJ1ZmZlci5yZWFkVUludDgob2Zmc2V0KQogIHZhciBudW1iZXIsIHNpemUKCiAgLy8gfjYgYml0CiAgaWYgKG9wY29kZSA8IG9wY29kZXMuT1BfUFVTSERBVEExKSB7CiAgICBudW1iZXIgPSBvcGNvZGUKICAgIHNpemUgPSAxCgogIC8vIDggYml0CiAgfSBlbHNlIGlmIChvcGNvZGUgPT09IG9wY29kZXMuT1BfUFVTSERBVEExKSB7CiAgICBpZiAob2Zmc2V0ICsgMiA+IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsCiAgICBudW1iZXIgPSBidWZmZXIucmVhZFVJbnQ4KG9mZnNldCArIDEpCiAgICBzaXplID0gMgoKICAvLyAxNiBiaXQKICB9IGVsc2UgaWYgKG9wY29kZSA9PT0gb3Bjb2Rlcy5PUF9QVVNIREFUQTIpIHsKICAgIGlmIChvZmZzZXQgKyAzID4gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGwKICAgIG51bWJlciA9IGJ1ZmZlci5yZWFkVUludDE2TEUob2Zmc2V0ICsgMSkKICAgIHNpemUgPSAzCgogIC8vIDMyIGJpdAogIH0gZWxzZSB7CiAgICBpZiAob2Zmc2V0ICsgNSA+IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsCiAgICBpZiAob3Bjb2RlICE9PSBvcGNvZGVzLk9QX1BVU0hEQVRBNCkgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIG9wY29kZScpCgogICAgbnVtYmVyID0gYnVmZmVyLnJlYWRVSW50MzJMRShvZmZzZXQgKyAxKQogICAgc2l6ZSA9IDUKICB9CgogIHJldHVybiB7CiAgICBvcGNvZGU6IG9wY29kZSwKICAgIG51bWJlcjogbnVtYmVyLAogICAgc2l6ZTogc2l6ZQogIH0KfQoKZnVuY3Rpb24gcmVhZFVJbnQ2NExFIChidWZmZXIsIG9mZnNldCkgewogIHZhciBhID0gYnVmZmVyLnJlYWRVSW50MzJMRShvZmZzZXQpCiAgdmFyIGIgPSBidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCArIDQpCiAgYiAqPSAweDEwMDAwMDAwMAoKICB2ZXJpZnVpbnQoYiArIGEsIDB4MDAxZmZmZmZmZmZmZmZmZikKCiAgcmV0dXJuIGIgKyBhCn0KCmZ1bmN0aW9uIHJlYWRWYXJJbnQgKGJ1ZmZlciwgb2Zmc2V0KSB7CiAgdmFyIHQgPSBidWZmZXIucmVhZFVJbnQ4KG9mZnNldCkKICB2YXIgbnVtYmVyLCBzaXplCgogIC8vIDggYml0CiAgaWYgKHQgPCAyNTMpIHsKICAgIG51bWJlciA9IHQKICAgIHNpemUgPSAxCgogIC8vIDE2IGJpdAogIH0gZWxzZSBpZiAodCA8IDI1NCkgewogICAgbnVtYmVyID0gYnVmZmVyLnJlYWRVSW50MTZMRShvZmZzZXQgKyAxKQogICAgc2l6ZSA9IDMKCiAgLy8gMzIgYml0CiAgfSBlbHNlIGlmICh0IDwgMjU1KSB7CiAgICBudW1iZXIgPSBidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCArIDEpCiAgICBzaXplID0gNQoKICAvLyA2NCBiaXQKICB9IGVsc2UgewogICAgbnVtYmVyID0gcmVhZFVJbnQ2NExFKGJ1ZmZlciwgb2Zmc2V0ICsgMSkKICAgIHNpemUgPSA5CiAgfQoKICByZXR1cm4gewogICAgbnVtYmVyOiBudW1iZXIsCiAgICBzaXplOiBzaXplCiAgfQp9CgpmdW5jdGlvbiB3cml0ZVB1c2hEYXRhSW50IChidWZmZXIsIG51bWJlciwgb2Zmc2V0KSB7CiAgdmFyIHNpemUgPSBwdXNoRGF0YVNpemUobnVtYmVyKQoKICAvLyB+NiBiaXQKICBpZiAoc2l6ZSA9PT0gMSkgewogICAgYnVmZmVyLndyaXRlVUludDgobnVtYmVyLCBvZmZzZXQpCgogIC8vIDggYml0CiAgfSBlbHNlIGlmIChzaXplID09PSAyKSB7CiAgICBidWZmZXIud3JpdGVVSW50OChvcGNvZGVzLk9QX1BVU0hEQVRBMSwgb2Zmc2V0KQogICAgYnVmZmVyLndyaXRlVUludDgobnVtYmVyLCBvZmZzZXQgKyAxKQoKICAvLyAxNiBiaXQKICB9IGVsc2UgaWYgKHNpemUgPT09IDMpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KG9wY29kZXMuT1BfUFVTSERBVEEyLCBvZmZzZXQpCiAgICBidWZmZXIud3JpdGVVSW50MTZMRShudW1iZXIsIG9mZnNldCArIDEpCgogIC8vIDMyIGJpdAogIH0gZWxzZSB7CiAgICBidWZmZXIud3JpdGVVSW50OChvcGNvZGVzLk9QX1BVU0hEQVRBNCwgb2Zmc2V0KQogICAgYnVmZmVyLndyaXRlVUludDMyTEUobnVtYmVyLCBvZmZzZXQgKyAxKQogIH0KCiAgcmV0dXJuIHNpemUKfQoKZnVuY3Rpb24gd3JpdGVVSW50NjRMRSAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0KSB7CiAgdmVyaWZ1aW50KHZhbHVlLCAweDAwMWZmZmZmZmZmZmZmZmYpCgogIGJ1ZmZlci53cml0ZUludDMyTEUodmFsdWUgJiAtMSwgb2Zmc2V0KQogIGJ1ZmZlci53cml0ZVVJbnQzMkxFKE1hdGguZmxvb3IodmFsdWUgLyAweDEwMDAwMDAwMCksIG9mZnNldCArIDQpCn0KCmZ1bmN0aW9uIHZhckludFNpemUgKGkpIHsKICByZXR1cm4gaSA8IDI1MyA/IDEKICA6IGkgPCAweDEwMDAwID8gMwogIDogaSA8IDB4MTAwMDAwMDAwID8gNQogIDogOQp9CgpmdW5jdGlvbiB3cml0ZVZhckludCAoYnVmZmVyLCBudW1iZXIsIG9mZnNldCkgewogIHZhciBzaXplID0gdmFySW50U2l6ZShudW1iZXIpCgogIC8vIDggYml0CiAgaWYgKHNpemUgPT09IDEpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KG51bWJlciwgb2Zmc2V0KQoKICAvLyAxNiBiaXQKICB9IGVsc2UgaWYgKHNpemUgPT09IDMpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KDI1Mywgb2Zmc2V0KQogICAgYnVmZmVyLndyaXRlVUludDE2TEUobnVtYmVyLCBvZmZzZXQgKyAxKQoKICAvLyAzMiBiaXQKICB9IGVsc2UgaWYgKHNpemUgPT09IDUpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KDI1NCwgb2Zmc2V0KQogICAgYnVmZmVyLndyaXRlVUludDMyTEUobnVtYmVyLCBvZmZzZXQgKyAxKQoKICAvLyA2NCBiaXQKICB9IGVsc2UgewogICAgYnVmZmVyLndyaXRlVUludDgoMjU1LCBvZmZzZXQpCiAgICB3cml0ZVVJbnQ2NExFKGJ1ZmZlciwgbnVtYmVyLCBvZmZzZXQgKyAxKQogIH0KCiAgcmV0dXJuIHNpemUKfQoKZnVuY3Rpb24gdmFySW50QnVmZmVyIChpKSB7CiAgdmFyIHNpemUgPSB2YXJJbnRTaXplKGkpCiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIoc2l6ZSkKICB3cml0ZVZhckludChidWZmZXIsIGksIDApCgogIHJldHVybiBidWZmZXIKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgZXF1YWw6IHJlcXVpcmUoJ2J1ZmZlci1lcXVhbHMnKSwKICBwdXNoRGF0YVNpemU6IHB1c2hEYXRhU2l6ZSwKICByZWFkUHVzaERhdGFJbnQ6IHJlYWRQdXNoRGF0YUludCwKICByZWFkVUludDY0TEU6IHJlYWRVSW50NjRMRSwKICByZWFkVmFySW50OiByZWFkVmFySW50LAogIHJldmVyc2U6IHJlcXVpcmUoJ2J1ZmZlci1yZXZlcnNlJyksCiAgdmFySW50QnVmZmVyOiB2YXJJbnRCdWZmZXIsCiAgdmFySW50U2l6ZTogdmFySW50U2l6ZSwKICB3cml0ZVB1c2hEYXRhSW50OiB3cml0ZVB1c2hEYXRhSW50LAogIHdyaXRlVUludDY0TEU6IHdyaXRlVUludDY0TEUsCiAgd3JpdGVWYXJJbnQ6IHdyaXRlVmFySW50Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL29wY29kZXMiOjM2LCJidWZmZXIiOjc2LCJidWZmZXItZXF1YWxzIjo3MywiYnVmZmVyLXJldmVyc2UiOjc0fV0sMjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgY3JlYXRlSGFzaCA9IHJlcXVpcmUoJ2NyZWF0ZS1oYXNoJykKCmZ1bmN0aW9uIGhhc2gxNjAgKGJ1ZmZlcikgewogIHJldHVybiByaXBlbWQxNjAoc2hhMjU2KGJ1ZmZlcikpCn0KCmZ1bmN0aW9uIGhhc2gyNTYgKGJ1ZmZlcikgewogIHJldHVybiBzaGEyNTYoc2hhMjU2KGJ1ZmZlcikpCn0KCmZ1bmN0aW9uIHJpcGVtZDE2MCAoYnVmZmVyKSB7CiAgcmV0dXJuIGNyZWF0ZUhhc2goJ3JtZDE2MCcpLnVwZGF0ZShidWZmZXIpLmRpZ2VzdCgpCn0KCmZ1bmN0aW9uIHNoYTEgKGJ1ZmZlcikgewogIHJldHVybiBjcmVhdGVIYXNoKCdzaGExJykudXBkYXRlKGJ1ZmZlcikuZGlnZXN0KCkKfQoKZnVuY3Rpb24gc2hhMjU2IChidWZmZXIpIHsKICByZXR1cm4gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGJ1ZmZlcikuZGlnZXN0KCkKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgaGFzaDE2MDogaGFzaDE2MCwKICBoYXNoMjU2OiBoYXNoMjU2LAogIHJpcGVtZDE2MDogcmlwZW1kMTYwLAogIHNoYTE6IHNoYTEsCiAgc2hhMjU2OiBzaGEyNTYKfQoKfSx7ImNyZWF0ZS1oYXNoIjo4MX1dLDI5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgY3JlYXRlSG1hYyA9IHJlcXVpcmUoJ2NyZWF0ZS1obWFjJykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQoKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKdmFyIEVDU2lnbmF0dXJlID0gcmVxdWlyZSgnLi9lY3NpZ25hdHVyZScpCgp2YXIgWkVSTyA9IG5ldyBCdWZmZXIoWzBdKQp2YXIgT05FID0gbmV3IEJ1ZmZlcihbMV0pCgp2YXIgZWN1cnZlID0gcmVxdWlyZSgnZWN1cnZlJykKdmFyIHNlY3AyNTZrMSA9IGVjdXJ2ZS5nZXRDdXJ2ZUJ5TmFtZSgnc2VjcDI1NmsxJykKCi8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2OTc5I3NlY3Rpb24tMy4yCmZ1bmN0aW9uIGRldGVybWluaXN0aWNHZW5lcmF0ZUsgKGhhc2gsIHgsIGNoZWNrU2lnKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKAogICAgdHlwZXMuSGFzaDI1NmJpdCwKICAgIHR5cGVzLkJ1ZmZlcjI1NmJpdCwKICAgIHR5cGVzLkZ1bmN0aW9uCiAgKSwgYXJndW1lbnRzKQoKICB2YXIgayA9IG5ldyBCdWZmZXIoMzIpCiAgdmFyIHYgPSBuZXcgQnVmZmVyKDMyKQoKICAvLyBTdGVwIEEsIGlnbm9yZWQgYXMgaGFzaCBhbHJlYWR5IHByb3ZpZGVkCiAgLy8gU3RlcCBCCiAgdi5maWxsKDEpCgogIC8vIFN0ZXAgQwogIGsuZmlsbCgwKQoKICAvLyBTdGVwIEQKICBrID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykKICAgIC51cGRhdGUodikKICAgIC51cGRhdGUoWkVSTykKICAgIC51cGRhdGUoeCkKICAgIC51cGRhdGUoaGFzaCkKICAgIC5kaWdlc3QoKQoKICAvLyBTdGVwIEUKICB2ID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykudXBkYXRlKHYpLmRpZ2VzdCgpCgogIC8vIFN0ZXAgRgogIGsgPSBjcmVhdGVIbWFjKCdzaGEyNTYnLCBrKQogICAgLnVwZGF0ZSh2KQogICAgLnVwZGF0ZShPTkUpCiAgICAudXBkYXRlKHgpCiAgICAudXBkYXRlKGhhc2gpCiAgICAuZGlnZXN0KCkKCiAgLy8gU3RlcCBHCiAgdiA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIGspLnVwZGF0ZSh2KS5kaWdlc3QoKQoKICAvLyBTdGVwIEgxL0gyYSwgaWdub3JlZCBhcyB0bGVuID09PSBxbGVuICgyNTYgYml0KQogIC8vIFN0ZXAgSDJiCiAgdiA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIGspLnVwZGF0ZSh2KS5kaWdlc3QoKQoKICB2YXIgVCA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcih2KQoKICAvLyBTdGVwIEgzLCByZXBlYXQgdW50aWwgVCBpcyB3aXRoaW4gdGhlIGludGVydmFsIFsxLCBuIC0gMV0gYW5kIGlzIHN1aXRhYmxlIGZvciBFQ0RTQQogIHdoaWxlIChULnNpZ251bSgpIDw9IDAgfHwgVC5jb21wYXJlVG8oc2VjcDI1NmsxLm4pID49IDAgfHwgIWNoZWNrU2lnKFQpKSB7CiAgICBrID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykKICAgICAgLnVwZGF0ZSh2KQogICAgICAudXBkYXRlKFpFUk8pCiAgICAgIC5kaWdlc3QoKQoKICAgIHYgPSBjcmVhdGVIbWFjKCdzaGEyNTYnLCBrKS51cGRhdGUodikuZGlnZXN0KCkKCiAgICAvLyBTdGVwIEgxL0gyYSwgYWdhaW4sIGlnbm9yZWQgYXMgdGxlbiA9PT0gcWxlbiAoMjU2IGJpdCkKICAgIC8vIFN0ZXAgSDJiIGFnYWluCiAgICB2ID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykudXBkYXRlKHYpLmRpZ2VzdCgpCiAgICBUID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKHYpCiAgfQoKICByZXR1cm4gVAp9Cgp2YXIgTl9PVkVSX1RXTyA9IHNlY3AyNTZrMS5uLnNoaWZ0UmlnaHQoMSkKCmZ1bmN0aW9uIHNpZ24gKGhhc2gsIGQpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuSGFzaDI1NmJpdCwgdHlwZXMuQmlnSW50KSwgYXJndW1lbnRzKQoKICB2YXIgeCA9IGQudG9CdWZmZXIoMzIpCiAgdmFyIGUgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoaGFzaCkKICB2YXIgbiA9IHNlY3AyNTZrMS5uCiAgdmFyIEcgPSBzZWNwMjU2azEuRwoKICB2YXIgciwgcwogIGRldGVybWluaXN0aWNHZW5lcmF0ZUsoaGFzaCwgeCwgZnVuY3Rpb24gKGspIHsKICAgIHZhciBRID0gRy5tdWx0aXBseShrKQoKICAgIGlmIChzZWNwMjU2azEuaXNJbmZpbml0eShRKSkgcmV0dXJuIGZhbHNlCgogICAgciA9IFEuYWZmaW5lWC5tb2QobikKICAgIGlmIChyLnNpZ251bSgpID09PSAwKSByZXR1cm4gZmFsc2UKCiAgICBzID0gay5tb2RJbnZlcnNlKG4pLm11bHRpcGx5KGUuYWRkKGQubXVsdGlwbHkocikpKS5tb2QobikKICAgIGlmIChzLnNpZ251bSgpID09PSAwKSByZXR1cm4gZmFsc2UKCiAgICByZXR1cm4gdHJ1ZQogIH0pCgogIC8vIGVuZm9yY2UgbG93IFMgdmFsdWVzLCBzZWUgYmlwNjI6ICdsb3cgcyB2YWx1ZXMgaW4gc2lnbmF0dXJlcycKICBpZiAocy5jb21wYXJlVG8oTl9PVkVSX1RXTykgPiAwKSB7CiAgICBzID0gbi5zdWJ0cmFjdChzKQogIH0KCiAgcmV0dXJuIG5ldyBFQ1NpZ25hdHVyZShyLCBzKQp9CgpmdW5jdGlvbiB2ZXJpZnkgKGhhc2gsIHNpZ25hdHVyZSwgUSkgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSgKICAgIHR5cGVzLkhhc2gyNTZiaXQsCiAgICB0eXBlcy5FQ1NpZ25hdHVyZSwKICAgIHR5cGVzLkVDUG9pbnQKICApLCBhcmd1bWVudHMpCgogIHZhciBuID0gc2VjcDI1NmsxLm4KICB2YXIgRyA9IHNlY3AyNTZrMS5HCgogIHZhciByID0gc2lnbmF0dXJlLnIKICB2YXIgcyA9IHNpZ25hdHVyZS5zCgogIC8vIDEuNC4xIEVuZm9yY2UgciBhbmQgcyBhcmUgYm90aCBpbnRlZ2VycyBpbiB0aGUgaW50ZXJ2YWwgWzEsIG4g4oiSIDFdCiAgaWYgKHIuc2lnbnVtKCkgPD0gMCB8fCByLmNvbXBhcmVUbyhuKSA+PSAwKSByZXR1cm4gZmFsc2UKICBpZiAocy5zaWdudW0oKSA8PSAwIHx8IHMuY29tcGFyZVRvKG4pID49IDApIHJldHVybiBmYWxzZQoKICAvLyAxLjQuMiBIID0gSGFzaChNKSwgYWxyZWFkeSBkb25lIGJ5IHRoZSB1c2VyCiAgLy8gMS40LjMgZSA9IEgKICB2YXIgZSA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihoYXNoKQoKICAvLyBDb21wdXRlIHNeLTEKICB2YXIgc0ludiA9IHMubW9kSW52ZXJzZShuKQoKICAvLyAxLjQuNCBDb21wdXRlIHUxID0gZXNe4oiSMSBtb2QgbgogIC8vICAgICAgICAgICAgICAgdTIgPSByc17iiJIxIG1vZCBuCiAgdmFyIHUxID0gZS5tdWx0aXBseShzSW52KS5tb2QobikKICB2YXIgdTIgPSByLm11bHRpcGx5KHNJbnYpLm1vZChuKQoKICAvLyAxLjQuNSBDb21wdXRlIFIgPSAoeFIsIHlSKQogIC8vICAgICAgICAgICAgICAgUiA9IHUxRyArIHUyUQogIHZhciBSID0gRy5tdWx0aXBseVR3byh1MSwgUSwgdTIpCgogIC8vIDEuNC41IChjb250LikgRW5mb3JjZSBSIGlzIG5vdCBhdCBpbmZpbml0eQogIGlmIChzZWNwMjU2azEuaXNJbmZpbml0eShSKSkgcmV0dXJuIGZhbHNlCgogIC8vIDEuNC42IENvbnZlcnQgdGhlIGZpZWxkIGVsZW1lbnQgUi54IHRvIGFuIGludGVnZXIKICB2YXIgeFIgPSBSLmFmZmluZVgKCiAgLy8gMS40LjcgU2V0IHYgPSB4UiBtb2QgbgogIHZhciB2ID0geFIubW9kKG4pCgogIC8vIDEuNC44IElmIHYgPSByLCBvdXRwdXQgInZhbGlkIiwgYW5kIGlmIHYgIT0gciwgb3V0cHV0ICJpbnZhbGlkIgogIHJldHVybiB2LmVxdWFscyhyKQp9CgovKioKICAqIFJlY292ZXIgYSBwdWJsaWMga2V5IGZyb20gYSBzaWduYXR1cmUuCiAgKgogICogU2VlIFNFQyAxOiBFbGxpcHRpYyBDdXJ2ZSBDcnlwdG9ncmFwaHksIHNlY3Rpb24gNC4xLjYsICJQdWJsaWMKICAqIEtleSBSZWNvdmVyeSBPcGVyYXRpb24iLgogICoKICAqIGh0dHA6Ly93d3cuc2VjZy5vcmcvZG93bmxvYWQvYWlkLTc4MC9zZWMxLXYyLnBkZgogICovCmZ1bmN0aW9uIHJlY292ZXJQdWJLZXkgKGUsIHNpZ25hdHVyZSwgaSkgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSgKICAgIHR5cGVzLkJpZ0ludCwKICAgIHR5cGVzLkVDU2lnbmF0dXJlLAogICAgdHlwZXMuVUludDIKICApLCBhcmd1bWVudHMpCgogIHZhciBuID0gc2VjcDI1NmsxLm4KICB2YXIgRyA9IHNlY3AyNTZrMS5HCiAgdmFyIHIgPSBzaWduYXR1cmUucgogIHZhciBzID0gc2lnbmF0dXJlLnMKCiAgaWYgKHIuc2lnbnVtKCkgPD0gMCB8fCByLmNvbXBhcmVUbyhuKSA+PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgciB2YWx1ZScpCiAgaWYgKHMuc2lnbnVtKCkgPD0gMCB8fCBzLmNvbXBhcmVUbyhuKSA+PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcyB2YWx1ZScpCgogIC8vIEEgc2V0IExTQiBzaWduaWZpZXMgdGhhdCB0aGUgeS1jb29yZGluYXRlIGlzIG9kZAogIHZhciBpc1lPZGQgPSBpICYgMQoKICAvLyBUaGUgbW9yZSBzaWduaWZpY2FudCBiaXQgc3BlY2lmaWVzIHdoZXRoZXIgd2Ugc2hvdWxkIHVzZSB0aGUKICAvLyBmaXJzdCBvciBzZWNvbmQgY2FuZGlkYXRlIGtleS4KICB2YXIgaXNTZWNvbmRLZXkgPSBpID4+IDEKCiAgLy8gMS4xIExldCB4ID0gciArIGpuCiAgdmFyIHggPSBpc1NlY29uZEtleSA/IHIuYWRkKG4pIDogcgogIHZhciBSID0gc2VjcDI1NmsxLnBvaW50RnJvbVgoaXNZT2RkLCB4KQoKICAvLyAxLjQgQ2hlY2sgdGhhdCBuUiBpcyBhdCBpbmZpbml0eQogIHZhciBuUiA9IFIubXVsdGlwbHkobikKICBpZiAoIXNlY3AyNTZrMS5pc0luZmluaXR5KG5SKSkgdGhyb3cgbmV3IEVycm9yKCduUiBpcyBub3QgYSB2YWxpZCBjdXJ2ZSBwb2ludCcpCgogIC8vIENvbXB1dGUgcl4tMQogIHZhciBySW52ID0gci5tb2RJbnZlcnNlKG4pCgogIC8vIENvbXB1dGUgLWUgZnJvbSBlCiAgdmFyIGVOZWcgPSBlLm5lZ2F0ZSgpLm1vZChuKQoKICAvLyAxLjYuMSBDb21wdXRlIFEgPSByXi0xIChzUiAtICBlRykKICAvLyAgICAgICAgICAgICAgIFEgPSByXi0xIChzUiArIC1lRykKICB2YXIgUSA9IFIubXVsdGlwbHlUd28ocywgRywgZU5lZykubXVsdGlwbHkockludikKCiAgc2VjcDI1NmsxLnZhbGlkYXRlKFEpCgogIHJldHVybiBRCn0KCi8qKgogICogQ2FsY3VsYXRlIHB1YmtleSBleHRyYWN0aW9uIHBhcmFtZXRlci4KICAqCiAgKiBXaGVuIGV4dHJhY3RpbmcgYSBwdWJrZXkgZnJvbSBhIHNpZ25hdHVyZSwgd2UgaGF2ZSB0bwogICogZGlzdGluZ3Vpc2ggZm91ciBkaWZmZXJlbnQgY2FzZXMuIFJhdGhlciB0aGFuIHB1dHRpbmcgdGhpcwogICogYnVyZGVuIG9uIHRoZSB2ZXJpZmllciwgQml0Y29pbiBpbmNsdWRlcyBhIDItYml0IHZhbHVlIHdpdGggdGhlCiAgKiBzaWduYXR1cmUuCiAgKgogICogVGhpcyBmdW5jdGlvbiBzaW1wbHkgdHJpZXMgYWxsIGZvdXIgY2FzZXMgYW5kIHJldHVybnMgdGhlIHZhbHVlCiAgKiB0aGF0IHJlc3VsdGVkIGluIGEgc3VjY2Vzc2Z1bCBwdWJrZXkgcmVjb3ZlcnkuCiAgKi8KZnVuY3Rpb24gY2FsY1B1YktleVJlY292ZXJ5UGFyYW0gKGUsIHNpZ25hdHVyZSwgUSkgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSgKICAgIHR5cGVzLkJpZ0ludCwKICAgIHR5cGVzLkVDU2lnbmF0dXJlLAogICAgdHlwZXMuRUNQb2ludAogICksIGFyZ3VtZW50cykKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgIHZhciBRcHJpbWUgPSByZWNvdmVyUHViS2V5KGUsIHNpZ25hdHVyZSwgaSkKCiAgICAvLyAxLjYuMiBWZXJpZnkgUQogICAgaWYgKFFwcmltZS5lcXVhbHMoUSkpIHsKICAgICAgcmV0dXJuIGkKICAgIH0KICB9CgogIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGZpbmQgdmFsaWQgcmVjb3ZlcnkgZmFjdG9yJykKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgY2FsY1B1YktleVJlY292ZXJ5UGFyYW06IGNhbGNQdWJLZXlSZWNvdmVyeVBhcmFtLAogIGRldGVybWluaXN0aWNHZW5lcmF0ZUs6IGRldGVybWluaXN0aWNHZW5lcmF0ZUssCiAgcmVjb3ZlclB1YktleTogcmVjb3ZlclB1YktleSwKICBzaWduOiBzaWduLAogIHZlcmlmeTogdmVyaWZ5LAoKICAvLyBUT0RPOiByZW1vdmUKICBfX2N1cnZlOiBzZWNwMjU2azEKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vZWNzaWduYXR1cmUiOjMxLCIuL3R5cGVzIjo0MSwiYmlnaSI6MjAsImJ1ZmZlciI6NzYsImNyZWF0ZS1obWFjIjo4NCwiZWN1cnZlIjo5OCwidHlwZWZvcmNlIjoxNzN9XSwzMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJjcnlwdG8gPSByZXF1aXJlKCcuL2NyeXB0bycpCnZhciBiczU4Y2hlY2sgPSByZXF1aXJlKCdiczU4Y2hlY2snKQp2YXIgZWNkc2EgPSByZXF1aXJlKCcuL2VjZHNhJykKdmFyIHJhbmRvbUJ5dGVzID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKQp2YXIgdHlwZWZvcmNlID0gcmVxdWlyZSgndHlwZWZvcmNlJykKdmFyIHR5cGVzID0gcmVxdWlyZSgnLi90eXBlcycpCnZhciB3aWYgPSByZXF1aXJlKCd3aWYnKQoKdmFyIE5FVFdPUktTID0gcmVxdWlyZSgnLi9uZXR3b3JrcycpCnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnYmlnaScpCgp2YXIgZWN1cnZlID0gcmVxdWlyZSgnZWN1cnZlJykKdmFyIHNlY3AyNTZrMSA9IGVjZHNhLl9fY3VydmUKCmZ1bmN0aW9uIEVDUGFpciAoZCwgUSwgb3B0aW9ucykgewogIGlmIChvcHRpb25zKSB7CiAgICB0eXBlZm9yY2UoewogICAgICBjb21wcmVzc2VkOiB0eXBlcy5tYXliZSh0eXBlcy5Cb29sZWFuKSwKICAgICAgbmV0d29yazogdHlwZXMubWF5YmUodHlwZXMuTmV0d29yaykKICAgIH0sIG9wdGlvbnMpCiAgfQoKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fQoKICBpZiAoZCkgewogICAgaWYgKGQuc2lnbnVtKCkgPD0gMCkgdGhyb3cgbmV3IEVycm9yKCdQcml2YXRlIGtleSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJykKICAgIGlmIChkLmNvbXBhcmVUbyhzZWNwMjU2azEubikgPj0gMCkgdGhyb3cgbmV3IEVycm9yKCdQcml2YXRlIGtleSBtdXN0IGJlIGxlc3MgdGhhbiB0aGUgY3VydmUgb3JkZXInKQogICAgaWYgKFEpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuZXhwZWN0ZWQgcHVibGljS2V5IHBhcmFtZXRlcicpCgogICAgdGhpcy5kID0gZAogIH0gZWxzZSB7CiAgICB0eXBlZm9yY2UodHlwZXMuRUNQb2ludCwgUSkKCiAgICB0aGlzLl9fUSA9IFEKICB9CgogIHRoaXMuY29tcHJlc3NlZCA9IG9wdGlvbnMuY29tcHJlc3NlZCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdGlvbnMuY29tcHJlc3NlZAogIHRoaXMubmV0d29yayA9IG9wdGlvbnMubmV0d29yayB8fCBORVRXT1JLUy5iaXRjb2luCn0KCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ1BhaXIucHJvdG90eXBlLCAnUScsIHsKICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdGhpcy5fX1EgJiYgdGhpcy5kKSB7CiAgICAgIHRoaXMuX19RID0gc2VjcDI1NmsxLkcubXVsdGlwbHkodGhpcy5kKQogICAgfQoKICAgIHJldHVybiB0aGlzLl9fUQogIH0KfSkKCkVDUGFpci5mcm9tUHVibGljS2V5QnVmZmVyID0gZnVuY3Rpb24gKGJ1ZmZlciwgbmV0d29yaykgewogIHZhciBRID0gZWN1cnZlLlBvaW50LmRlY29kZUZyb20oc2VjcDI1NmsxLCBidWZmZXIpCgogIHJldHVybiBuZXcgRUNQYWlyKG51bGwsIFEsIHsKICAgIGNvbXByZXNzZWQ6IFEuY29tcHJlc3NlZCwKICAgIG5ldHdvcms6IG5ldHdvcmsKICB9KQp9CgpFQ1BhaXIuZnJvbVdJRiA9IGZ1bmN0aW9uIChzdHJpbmcsIG5ldHdvcmspIHsKICBuZXR3b3JrID0gbmV0d29yayB8fCBORVRXT1JLUy5iaXRjb2luCiAgdmFyIGJ1ZmZlciA9IGJzNThjaGVjay5kZWNvZGUoc3RyaW5nKQoKICBpZiAodHlwZXMuQXJyYXkobmV0d29yaykpIHsKICAgIHZhciB2ZXJzaW9uID0gYnVmZmVyWzBdCgogICAgbmV0d29yayA9IG5ldHdvcmsuZmlsdGVyKGZ1bmN0aW9uIChuZXR3b3JrKSB7CiAgICAgIHJldHVybiB2ZXJzaW9uID09PSBuZXR3b3JrLndpZgogICAgfSkucG9wKCkgfHwge30KICB9CgogIHZhciBkZWNvZGVkID0gd2lmLmRlY29kZVJhdyhuZXR3b3JrLndpZiwgYnVmZmVyKQogIHZhciBkID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGRlY29kZWQuZCkKCiAgcmV0dXJuIG5ldyBFQ1BhaXIoZCwgbnVsbCwgewogICAgY29tcHJlc3NlZDogZGVjb2RlZC5jb21wcmVzc2VkLAogICAgbmV0d29yazogbmV0d29yawogIH0pCn0KCkVDUGFpci5tYWtlUmFuZG9tID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fQoKICB2YXIgcm5nID0gb3B0aW9ucy5ybmcgfHwgcmFuZG9tQnl0ZXMKCiAgdmFyIGQKICBkbyB7CiAgICB2YXIgYnVmZmVyID0gcm5nKDMyKQogICAgdHlwZWZvcmNlKHR5cGVzLkJ1ZmZlcjI1NmJpdCwgYnVmZmVyKQoKICAgIGQgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoYnVmZmVyKQogIH0gd2hpbGUgKGQuc2lnbnVtKCkgPD0gMCB8fCBkLmNvbXBhcmVUbyhzZWNwMjU2azEubikgPj0gMCkKCiAgcmV0dXJuIG5ldyBFQ1BhaXIoZCwgbnVsbCwgb3B0aW9ucykKfQoKRUNQYWlyLnByb3RvdHlwZS5nZXRBZGRyZXNzID0gZnVuY3Rpb24gKCkgewogIHZhciBwdWJLZXkgPSB0aGlzLmdldFB1YmxpY0tleUJ1ZmZlcigpCiAgdmFyIHB1YktleUhhc2ggPSBiY3J5cHRvLmhhc2gxNjAocHViS2V5KQoKICB2YXIgcGF5bG9hZCA9IG5ldyBCdWZmZXIoMjEpCiAgcGF5bG9hZC53cml0ZVVJbnQ4KHRoaXMubmV0d29yay5wdWJLZXlIYXNoLCAwKQogIHB1YktleUhhc2guY29weShwYXlsb2FkLCAxKQoKICByZXR1cm4gYnM1OGNoZWNrLmVuY29kZShwYXlsb2FkKQp9CgpFQ1BhaXIucHJvdG90eXBlLmdldE5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMubmV0d29yawp9CgpFQ1BhaXIucHJvdG90eXBlLmdldFB1YmxpY0tleUJ1ZmZlciA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5RLmdldEVuY29kZWQodGhpcy5jb21wcmVzc2VkKQp9CgpFQ1BhaXIucHJvdG90eXBlLnNpZ24gPSBmdW5jdGlvbiAoaGFzaCkgewogIGlmICghdGhpcy5kKSB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcHJpdmF0ZSBrZXknKQoKICByZXR1cm4gZWNkc2Euc2lnbihoYXNoLCB0aGlzLmQpCn0KCkVDUGFpci5wcm90b3R5cGUudG9XSUYgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKCF0aGlzLmQpIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBwcml2YXRlIGtleScpCgogIHJldHVybiB3aWYuZW5jb2RlKHRoaXMubmV0d29yay53aWYsIHRoaXMuZC50b0J1ZmZlcigzMiksIHRoaXMuY29tcHJlc3NlZCkKfQoKRUNQYWlyLnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiAoaGFzaCwgc2lnbmF0dXJlKSB7CiAgcmV0dXJuIGVjZHNhLnZlcmlmeShoYXNoLCBzaWduYXR1cmUsIHRoaXMuUSkKfQoKbW9kdWxlLmV4cG9ydHMgPSBFQ1BhaXIKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2NyeXB0byI6MjgsIi4vZWNkc2EiOjI5LCIuL25ldHdvcmtzIjozNSwiLi90eXBlcyI6NDEsImJpZ2kiOjIwLCJiczU4Y2hlY2siOjcxLCJidWZmZXIiOjc2LCJlY3VydmUiOjk4LCJyYW5kb21ieXRlcyI6MTQ4LCJ0eXBlZm9yY2UiOjE3Mywid2lmIjoxNzl9XSwzMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJpcDY2ID0gcmVxdWlyZSgnYmlwNjYnKQp2YXIgdHlwZWZvcmNlID0gcmVxdWlyZSgndHlwZWZvcmNlJykKdmFyIHR5cGVzID0gcmVxdWlyZSgnLi90eXBlcycpCgp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJ2JpZ2knKQoKZnVuY3Rpb24gRUNTaWduYXR1cmUgKHIsIHMpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuQmlnSW50LCB0eXBlcy5CaWdJbnQpLCBhcmd1bWVudHMpCgogIHRoaXMuciA9IHIKICB0aGlzLnMgPSBzCn0KCkVDU2lnbmF0dXJlLnBhcnNlQ29tcGFjdCA9IGZ1bmN0aW9uIChidWZmZXIpIHsKICBpZiAoYnVmZmVyLmxlbmd0aCAhPT0gNjUpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzaWduYXR1cmUgbGVuZ3RoJykKCiAgdmFyIGZsYWdCeXRlID0gYnVmZmVyLnJlYWRVSW50OCgwKSAtIDI3CiAgaWYgKGZsYWdCeXRlICE9PSAoZmxhZ0J5dGUgJiA3KSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNpZ25hdHVyZSBwYXJhbWV0ZXInKQoKICB2YXIgY29tcHJlc3NlZCA9ICEhKGZsYWdCeXRlICYgNCkKICB2YXIgcmVjb3ZlcnlQYXJhbSA9IGZsYWdCeXRlICYgMwoKICB2YXIgciA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihidWZmZXIuc2xpY2UoMSwgMzMpKQogIHZhciBzID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGJ1ZmZlci5zbGljZSgzMykpCgogIHJldHVybiB7CiAgICBjb21wcmVzc2VkOiBjb21wcmVzc2VkLAogICAgaTogcmVjb3ZlcnlQYXJhbSwKICAgIHNpZ25hdHVyZTogbmV3IEVDU2lnbmF0dXJlKHIsIHMpCiAgfQp9CgpFQ1NpZ25hdHVyZS5mcm9tREVSID0gZnVuY3Rpb24gKGJ1ZmZlcikgewogIHZhciBkZWNvZGUgPSBiaXA2Ni5kZWNvZGUoYnVmZmVyKQogIHZhciByID0gQmlnSW50ZWdlci5mcm9tREVSSW50ZWdlcihkZWNvZGUucikKICB2YXIgcyA9IEJpZ0ludGVnZXIuZnJvbURFUkludGVnZXIoZGVjb2RlLnMpCgogIHJldHVybiBuZXcgRUNTaWduYXR1cmUociwgcykKfQoKLy8gQklQNjI6IDEgYnl0ZSBoYXNoVHlwZSBmbGFnIChvbmx5IDB4MDEsIDB4MDIsIDB4MDMsIDB4ODEsIDB4ODIgYW5kIDB4ODMgYXJlIGFsbG93ZWQpCkVDU2lnbmF0dXJlLnBhcnNlU2NyaXB0U2lnbmF0dXJlID0gZnVuY3Rpb24gKGJ1ZmZlcikgewogIHZhciBoYXNoVHlwZSA9IGJ1ZmZlci5yZWFkVUludDgoYnVmZmVyLmxlbmd0aCAtIDEpCiAgdmFyIGhhc2hUeXBlTW9kID0gaGFzaFR5cGUgJiB+MHg4MAoKICBpZiAoaGFzaFR5cGVNb2QgPD0gMHgwMCB8fCBoYXNoVHlwZU1vZCA+PSAweDA0KSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGFzaFR5cGUgJyArIGhhc2hUeXBlKQoKICByZXR1cm4gewogICAgc2lnbmF0dXJlOiBFQ1NpZ25hdHVyZS5mcm9tREVSKGJ1ZmZlci5zbGljZSgwLCAtMSkpLAogICAgaGFzaFR5cGU6IGhhc2hUeXBlCiAgfQp9CgpFQ1NpZ25hdHVyZS5wcm90b3R5cGUudG9Db21wYWN0ID0gZnVuY3Rpb24gKGksIGNvbXByZXNzZWQpIHsKICBpZiAoY29tcHJlc3NlZCkgewogICAgaSArPSA0CiAgfQoKICBpICs9IDI3CgogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKDY1KQogIGJ1ZmZlci53cml0ZVVJbnQ4KGksIDApCgogIHRoaXMuci50b0J1ZmZlcigzMikuY29weShidWZmZXIsIDEpCiAgdGhpcy5zLnRvQnVmZmVyKDMyKS5jb3B5KGJ1ZmZlciwgMzMpCgogIHJldHVybiBidWZmZXIKfQoKRUNTaWduYXR1cmUucHJvdG90eXBlLnRvREVSID0gZnVuY3Rpb24gKCkgewogIHZhciByID0gbmV3IEJ1ZmZlcih0aGlzLnIudG9ERVJJbnRlZ2VyKCkpCiAgdmFyIHMgPSBuZXcgQnVmZmVyKHRoaXMucy50b0RFUkludGVnZXIoKSkKCiAgcmV0dXJuIGJpcDY2LmVuY29kZShyLCBzKQp9CgpFQ1NpZ25hdHVyZS5wcm90b3R5cGUudG9TY3JpcHRTaWduYXR1cmUgPSBmdW5jdGlvbiAoaGFzaFR5cGUpIHsKICB2YXIgaGFzaFR5cGVNb2QgPSBoYXNoVHlwZSAmIH4weDgwCiAgaWYgKGhhc2hUeXBlTW9kIDw9IDAgfHwgaGFzaFR5cGVNb2QgPj0gNCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhhc2hUeXBlICcgKyBoYXNoVHlwZSkKCiAgdmFyIGhhc2hUeXBlQnVmZmVyID0gbmV3IEJ1ZmZlcigxKQogIGhhc2hUeXBlQnVmZmVyLndyaXRlVUludDgoaGFzaFR5cGUsIDApCgogIHJldHVybiBCdWZmZXIuY29uY2F0KFt0aGlzLnRvREVSKCksIGhhc2hUeXBlQnVmZmVyXSkKfQoKbW9kdWxlLmV4cG9ydHMgPSBFQ1NpZ25hdHVyZQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vdHlwZXMiOjQxLCJiaWdpIjoyMCwiYmlwNjYiOjI0LCJidWZmZXIiOjc2LCJ0eXBlZm9yY2UiOjE3M31dLDMyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYmFzZTU4Y2hlY2sgPSByZXF1aXJlKCdiczU4Y2hlY2snKQp2YXIgYmNyeXB0byA9IHJlcXVpcmUoJy4vY3J5cHRvJykKdmFyIGNyZWF0ZUhtYWMgPSByZXF1aXJlKCdjcmVhdGUtaG1hYycpCnZhciB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKQp2YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJykKdmFyIE5FVFdPUktTID0gcmVxdWlyZSgnLi9uZXR3b3JrcycpCgp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJ2JpZ2knKQp2YXIgRUNQYWlyID0gcmVxdWlyZSgnLi9lY3BhaXInKQoKdmFyIGVjdXJ2ZSA9IHJlcXVpcmUoJ2VjdXJ2ZScpCnZhciBjdXJ2ZSA9IGVjdXJ2ZS5nZXRDdXJ2ZUJ5TmFtZSgnc2VjcDI1NmsxJykKCmZ1bmN0aW9uIEhETm9kZSAoa2V5UGFpciwgY2hhaW5Db2RlKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKCdFQ1BhaXInLCB0eXBlcy5CdWZmZXIyNTZiaXQpLCBhcmd1bWVudHMpCgogIGlmICgha2V5UGFpci5jb21wcmVzc2VkKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdCSVAzMiBvbmx5IGFsbG93cyBjb21wcmVzc2VkIGtleVBhaXJzJykKCiAgdGhpcy5rZXlQYWlyID0ga2V5UGFpcgogIHRoaXMuY2hhaW5Db2RlID0gY2hhaW5Db2RlCiAgdGhpcy5kZXB0aCA9IDAKICB0aGlzLmluZGV4ID0gMAogIHRoaXMucGFyZW50RmluZ2VycHJpbnQgPSAweDAwMDAwMDAwCn0KCkhETm9kZS5ISUdIRVNUX0JJVCA9IDB4ODAwMDAwMDAKSEROb2RlLkxFTkdUSCA9IDc4CkhETm9kZS5NQVNURVJfU0VDUkVUID0gbmV3IEJ1ZmZlcignQml0Y29pbiBzZWVkJykKCkhETm9kZS5mcm9tU2VlZEJ1ZmZlciA9IGZ1bmN0aW9uIChzZWVkLCBuZXR3b3JrKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkJ1ZmZlciwgdHlwZXMubWF5YmUodHlwZXMuTmV0d29yaykpLCBhcmd1bWVudHMpCgogIGlmIChzZWVkLmxlbmd0aCA8IDE2KSB0aHJvdyBuZXcgVHlwZUVycm9yKCdTZWVkIHNob3VsZCBiZSBhdCBsZWFzdCAxMjggYml0cycpCiAgaWYgKHNlZWQubGVuZ3RoID4gNjQpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1NlZWQgc2hvdWxkIGJlIGF0IG1vc3QgNTEyIGJpdHMnKQoKICB2YXIgSSA9IGNyZWF0ZUhtYWMoJ3NoYTUxMicsIEhETm9kZS5NQVNURVJfU0VDUkVUKS51cGRhdGUoc2VlZCkuZGlnZXN0KCkKICB2YXIgSUwgPSBJLnNsaWNlKDAsIDMyKQogIHZhciBJUiA9IEkuc2xpY2UoMzIpCgogIC8vIEluIGNhc2UgSUwgaXMgMCBvciA+PSBuLCB0aGUgbWFzdGVyIGtleSBpcyBpbnZhbGlkCiAgLy8gVGhpcyBpcyBoYW5kbGVkIGJ5IHRoZSBFQ1BhaXIgY29uc3RydWN0b3IKICB2YXIgcElMID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKElMKQogIHZhciBrZXlQYWlyID0gbmV3IEVDUGFpcihwSUwsIG51bGwsIHsKICAgIG5ldHdvcms6IG5ldHdvcmsKICB9KQoKICByZXR1cm4gbmV3IEhETm9kZShrZXlQYWlyLCBJUikKfQoKSEROb2RlLmZyb21TZWVkSGV4ID0gZnVuY3Rpb24gKGhleCwgbmV0d29yaykgewogIHJldHVybiBIRE5vZGUuZnJvbVNlZWRCdWZmZXIobmV3IEJ1ZmZlcihoZXgsICdoZXgnKSwgbmV0d29yaykKfQoKSEROb2RlLmZyb21CYXNlNTggPSBmdW5jdGlvbiAoc3RyaW5nLCBuZXR3b3JrcykgewogIHZhciBidWZmZXIgPSBiYXNlNThjaGVjay5kZWNvZGUoc3RyaW5nKQogIGlmIChidWZmZXIubGVuZ3RoICE9PSA3OCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGJ1ZmZlciBsZW5ndGgnKQoKICAvLyA0IGJ5dGVzOiB2ZXJzaW9uIGJ5dGVzCiAgdmFyIHZlcnNpb24gPSBidWZmZXIucmVhZFVJbnQzMkJFKDApCiAgdmFyIG5ldHdvcmsKCiAgLy8gbGlzdCBvZiBuZXR3b3Jrcz8KICBpZiAoQXJyYXkuaXNBcnJheShuZXR3b3JrcykpIHsKICAgIG5ldHdvcmsgPSBuZXR3b3Jrcy5maWx0ZXIoZnVuY3Rpb24gKG5ldHdvcmspIHsKICAgICAgcmV0dXJuIHZlcnNpb24gPT09IG5ldHdvcmsuYmlwMzIucHJpdmF0ZSB8fAogICAgICAgICAgICAgdmVyc2lvbiA9PT0gbmV0d29yay5iaXAzMi5wdWJsaWMKICAgIH0pLnBvcCgpIHx8IHt9CgogIC8vIG90aGVyd2lzZSwgYXNzdW1lIGEgbmV0d29yayBvYmplY3QgKG9yIGRlZmF1bHQgdG8gYml0Y29pbikKICB9IGVsc2UgewogICAgbmV0d29yayA9IG5ldHdvcmtzIHx8IE5FVFdPUktTLmJpdGNvaW4KICB9CgogIGlmICh2ZXJzaW9uICE9PSBuZXR3b3JrLmJpcDMyLnByaXZhdGUgJiYKICAgIHZlcnNpb24gIT09IG5ldHdvcmsuYmlwMzIucHVibGljKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbmV0d29yaycpCgogIC8vIDEgYnl0ZTogZGVwdGg6IDB4MDAgZm9yIG1hc3RlciBub2RlcywgMHgwMSBmb3IgbGV2ZWwtMSBkZXNjZW5kYW50cywgLi4uCiAgdmFyIGRlcHRoID0gYnVmZmVyWzRdCgogIC8vIDQgYnl0ZXM6IHRoZSBmaW5nZXJwcmludCBvZiB0aGUgcGFyZW50J3Mga2V5ICgweDAwMDAwMDAwIGlmIG1hc3RlciBrZXkpCiAgdmFyIHBhcmVudEZpbmdlcnByaW50ID0gYnVmZmVyLnJlYWRVSW50MzJCRSg1KQogIGlmIChkZXB0aCA9PT0gMCkgewogICAgaWYgKHBhcmVudEZpbmdlcnByaW50ICE9PSAweDAwMDAwMDAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcGFyZW50IGZpbmdlcnByaW50JykKICB9CgogIC8vIDQgYnl0ZXM6IGNoaWxkIG51bWJlci4gVGhpcyBpcyB0aGUgbnVtYmVyIGkgaW4geGkgPSB4cGFyL2ksIHdpdGggeGkgdGhlIGtleSBiZWluZyBzZXJpYWxpemVkLgogIC8vIFRoaXMgaXMgZW5jb2RlZCBpbiBNU0Igb3JkZXIuICgweDAwMDAwMDAwIGlmIG1hc3RlciBrZXkpCiAgdmFyIGluZGV4ID0gYnVmZmVyLnJlYWRVSW50MzJCRSg5KQogIGlmIChkZXB0aCA9PT0gMCAmJiBpbmRleCAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGluZGV4JykKCiAgLy8gMzIgYnl0ZXM6IHRoZSBjaGFpbiBjb2RlCiAgdmFyIGNoYWluQ29kZSA9IGJ1ZmZlci5zbGljZSgxMywgNDUpCiAgdmFyIGtleVBhaXIKCiAgLy8gMzMgYnl0ZXM6IHByaXZhdGUga2V5IGRhdGEgKDB4MDAgKyBrKQogIGlmICh2ZXJzaW9uID09PSBuZXR3b3JrLmJpcDMyLnByaXZhdGUpIHsKICAgIGlmIChidWZmZXIucmVhZFVJbnQ4KDQ1KSAhPT0gMHgwMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHByaXZhdGUga2V5JykKCiAgICB2YXIgZCA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihidWZmZXIuc2xpY2UoNDYsIDc4KSkKCiAgICBrZXlQYWlyID0gbmV3IEVDUGFpcihkLCBudWxsLCB7CiAgICAgIG5ldHdvcms6IG5ldHdvcmsKICAgIH0pCgogIC8vIDMzIGJ5dGVzOiBwdWJsaWMga2V5IGRhdGEgKDB4MDIgKyBYIG9yIDB4MDMgKyBYKQogIH0gZWxzZSB7CiAgICB2YXIgUSA9IGVjdXJ2ZS5Qb2ludC5kZWNvZGVGcm9tKGN1cnZlLCBidWZmZXIuc2xpY2UoNDUsIDc4KSkKICAgIGlmICghUS5jb21wcmVzc2VkKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcHVibGljIGtleScpCgogICAgLy8gVmVyaWZ5IHRoYXQgdGhlIFggY29vcmRpbmF0ZSBpbiB0aGUgcHVibGljIHBvaW50IGNvcnJlc3BvbmRzIHRvIGEgcG9pbnQgb24gdGhlIGN1cnZlLgogICAgLy8gSWYgbm90LCB0aGUgZXh0ZW5kZWQgcHVibGljIGtleSBpcyBpbnZhbGlkLgogICAgY3VydmUudmFsaWRhdGUoUSkKCiAgICBrZXlQYWlyID0gbmV3IEVDUGFpcihudWxsLCBRLCB7CiAgICAgIG5ldHdvcms6IG5ldHdvcmsKICAgIH0pCiAgfQoKICB2YXIgaGQgPSBuZXcgSEROb2RlKGtleVBhaXIsIGNoYWluQ29kZSkKICBoZC5kZXB0aCA9IGRlcHRoCiAgaGQuaW5kZXggPSBpbmRleAogIGhkLnBhcmVudEZpbmdlcnByaW50ID0gcGFyZW50RmluZ2VycHJpbnQKCiAgcmV0dXJuIGhkCn0KCkhETm9kZS5wcm90b3R5cGUuZ2V0QWRkcmVzcyA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5rZXlQYWlyLmdldEFkZHJlc3MoKQp9CgpIRE5vZGUucHJvdG90eXBlLmdldElkZW50aWZpZXIgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGJjcnlwdG8uaGFzaDE2MCh0aGlzLmtleVBhaXIuZ2V0UHVibGljS2V5QnVmZmVyKCkpCn0KCkhETm9kZS5wcm90b3R5cGUuZ2V0RmluZ2VycHJpbnQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuZ2V0SWRlbnRpZmllcigpLnNsaWNlKDAsIDQpCn0KCkhETm9kZS5wcm90b3R5cGUuZ2V0TmV0d29yayA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5rZXlQYWlyLmdldE5ldHdvcmsoKQp9CgpIRE5vZGUucHJvdG90eXBlLmdldFB1YmxpY0tleUJ1ZmZlciA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5rZXlQYWlyLmdldFB1YmxpY0tleUJ1ZmZlcigpCn0KCkhETm9kZS5wcm90b3R5cGUubmV1dGVyZWQgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIG5ldXRlcmVkS2V5UGFpciA9IG5ldyBFQ1BhaXIobnVsbCwgdGhpcy5rZXlQYWlyLlEsIHsKICAgIG5ldHdvcms6IHRoaXMua2V5UGFpci5uZXR3b3JrCiAgfSkKCiAgdmFyIG5ldXRlcmVkID0gbmV3IEhETm9kZShuZXV0ZXJlZEtleVBhaXIsIHRoaXMuY2hhaW5Db2RlKQogIG5ldXRlcmVkLmRlcHRoID0gdGhpcy5kZXB0aAogIG5ldXRlcmVkLmluZGV4ID0gdGhpcy5pbmRleAogIG5ldXRlcmVkLnBhcmVudEZpbmdlcnByaW50ID0gdGhpcy5wYXJlbnRGaW5nZXJwcmludAoKICByZXR1cm4gbmV1dGVyZWQKfQoKSEROb2RlLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gKGhhc2gpIHsKICByZXR1cm4gdGhpcy5rZXlQYWlyLnNpZ24oaGFzaCkKfQoKSEROb2RlLnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiAoaGFzaCwgc2lnbmF0dXJlKSB7CiAgcmV0dXJuIHRoaXMua2V5UGFpci52ZXJpZnkoaGFzaCwgc2lnbmF0dXJlKQp9CgpIRE5vZGUucHJvdG90eXBlLnRvQmFzZTU4ID0gZnVuY3Rpb24gKF9faXNQcml2YXRlKSB7CiAgaWYgKF9faXNQcml2YXRlICE9PSB1bmRlZmluZWQpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vuc3VwcG9ydGVkIGFyZ3VtZW50IGluIDIuMC4wJykKCiAgLy8gVmVyc2lvbgogIHZhciBuZXR3b3JrID0gdGhpcy5rZXlQYWlyLm5ldHdvcmsKICB2YXIgdmVyc2lvbiA9IHRoaXMua2V5UGFpci5kID8gbmV0d29yay5iaXAzMi5wcml2YXRlIDogbmV0d29yay5iaXAzMi5wdWJsaWMKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcig3OCkKCiAgLy8gNCBieXRlczogdmVyc2lvbiBieXRlcwogIGJ1ZmZlci53cml0ZVVJbnQzMkJFKHZlcnNpb24sIDApCgogIC8vIDEgYnl0ZTogZGVwdGg6IDB4MDAgZm9yIG1hc3RlciBub2RlcywgMHgwMSBmb3IgbGV2ZWwtMSBkZXNjZW5kYW50cywgLi4uLgogIGJ1ZmZlci53cml0ZVVJbnQ4KHRoaXMuZGVwdGgsIDQpCgogIC8vIDQgYnl0ZXM6IHRoZSBmaW5nZXJwcmludCBvZiB0aGUgcGFyZW50J3Mga2V5ICgweDAwMDAwMDAwIGlmIG1hc3RlciBrZXkpCiAgYnVmZmVyLndyaXRlVUludDMyQkUodGhpcy5wYXJlbnRGaW5nZXJwcmludCwgNSkKCiAgLy8gNCBieXRlczogY2hpbGQgbnVtYmVyLiBUaGlzIGlzIHRoZSBudW1iZXIgaSBpbiB4aSA9IHhwYXIvaSwgd2l0aCB4aSB0aGUga2V5IGJlaW5nIHNlcmlhbGl6ZWQuCiAgLy8gVGhpcyBpcyBlbmNvZGVkIGluIGJpZyBlbmRpYW4uICgweDAwMDAwMDAwIGlmIG1hc3RlciBrZXkpCiAgYnVmZmVyLndyaXRlVUludDMyQkUodGhpcy5pbmRleCwgOSkKCiAgLy8gMzIgYnl0ZXM6IHRoZSBjaGFpbiBjb2RlCiAgdGhpcy5jaGFpbkNvZGUuY29weShidWZmZXIsIDEzKQoKICAvLyAzMyBieXRlczogdGhlIHB1YmxpYyBrZXkgb3IgcHJpdmF0ZSBrZXkgZGF0YQogIGlmICh0aGlzLmtleVBhaXIuZCkgewogICAgLy8gMHgwMCArIGsgZm9yIHByaXZhdGUga2V5cwogICAgYnVmZmVyLndyaXRlVUludDgoMCwgNDUpCiAgICB0aGlzLmtleVBhaXIuZC50b0J1ZmZlcigzMikuY29weShidWZmZXIsIDQ2KQoKICAvLyAzMyBieXRlczogdGhlIHB1YmxpYyBrZXkKICB9IGVsc2UgewogICAgLy8gWDkuNjIgZW5jb2RpbmcgZm9yIHB1YmxpYyBrZXlzCiAgICB0aGlzLmtleVBhaXIuZ2V0UHVibGljS2V5QnVmZmVyKCkuY29weShidWZmZXIsIDQ1KQogIH0KCiAgcmV0dXJuIGJhc2U1OGNoZWNrLmVuY29kZShidWZmZXIpCn0KCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpcHMvYmxvYi9tYXN0ZXIvYmlwLTAwMzIubWVkaWF3aWtpI2NoaWxkLWtleS1kZXJpdmF0aW9uLWNrZC1mdW5jdGlvbnMKSEROb2RlLnByb3RvdHlwZS5kZXJpdmUgPSBmdW5jdGlvbiAoaW5kZXgpIHsKICB2YXIgaXNIYXJkZW5lZCA9IGluZGV4ID49IEhETm9kZS5ISUdIRVNUX0JJVAogIHZhciBkYXRhID0gbmV3IEJ1ZmZlcigzNykKCiAgLy8gSGFyZGVuZWQgY2hpbGQKICBpZiAoaXNIYXJkZW5lZCkgewogICAgaWYgKCF0aGlzLmtleVBhaXIuZCkgdGhyb3cgbmV3IFR5cGVFcnJvcignQ291bGQgbm90IGRlcml2ZSBoYXJkZW5lZCBjaGlsZCBrZXknKQoKICAgIC8vIGRhdGEgPSAweDAwIHx8IHNlcjI1NihrcGFyKSB8fCBzZXIzMihpbmRleCkKICAgIGRhdGFbMF0gPSAweDAwCiAgICB0aGlzLmtleVBhaXIuZC50b0J1ZmZlcigzMikuY29weShkYXRhLCAxKQogICAgZGF0YS53cml0ZVVJbnQzMkJFKGluZGV4LCAzMykKCiAgLy8gTm9ybWFsIGNoaWxkCiAgfSBlbHNlIHsKICAgIC8vIGRhdGEgPSBzZXJQKHBvaW50KGtwYXIpKSB8fCBzZXIzMihpbmRleCkKICAgIC8vICAgICAgPSBzZXJQKEtwYXIpIHx8IHNlcjMyKGluZGV4KQogICAgdGhpcy5rZXlQYWlyLmdldFB1YmxpY0tleUJ1ZmZlcigpLmNvcHkoZGF0YSwgMCkKICAgIGRhdGEud3JpdGVVSW50MzJCRShpbmRleCwgMzMpCiAgfQoKICB2YXIgSSA9IGNyZWF0ZUhtYWMoJ3NoYTUxMicsIHRoaXMuY2hhaW5Db2RlKS51cGRhdGUoZGF0YSkuZGlnZXN0KCkKICB2YXIgSUwgPSBJLnNsaWNlKDAsIDMyKQogIHZhciBJUiA9IEkuc2xpY2UoMzIpCgogIHZhciBwSUwgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoSUwpCgogIC8vIEluIGNhc2UgcGFyc2UyNTYoSUwpID49IG4sIHByb2NlZWQgd2l0aCB0aGUgbmV4dCB2YWx1ZSBmb3IgaQogIGlmIChwSUwuY29tcGFyZVRvKGN1cnZlLm4pID49IDApIHsKICAgIHJldHVybiB0aGlzLmRlcml2ZShpbmRleCArIDEpCiAgfQoKICAvLyBQcml2YXRlIHBhcmVudCBrZXkgLT4gcHJpdmF0ZSBjaGlsZCBrZXkKICB2YXIgZGVyaXZlZEtleVBhaXIKICBpZiAodGhpcy5rZXlQYWlyLmQpIHsKICAgIC8vIGtpID0gcGFyc2UyNTYoSUwpICsga3BhciAobW9kIG4pCiAgICB2YXIga2kgPSBwSUwuYWRkKHRoaXMua2V5UGFpci5kKS5tb2QoY3VydmUubikKCiAgICAvLyBJbiBjYXNlIGtpID09IDAsIHByb2NlZWQgd2l0aCB0aGUgbmV4dCB2YWx1ZSBmb3IgaQogICAgaWYgKGtpLnNpZ251bSgpID09PSAwKSB7CiAgICAgIHJldHVybiB0aGlzLmRlcml2ZShpbmRleCArIDEpCiAgICB9CgogICAgZGVyaXZlZEtleVBhaXIgPSBuZXcgRUNQYWlyKGtpLCBudWxsLCB7CiAgICAgIG5ldHdvcms6IHRoaXMua2V5UGFpci5uZXR3b3JrCiAgICB9KQoKICAvLyBQdWJsaWMgcGFyZW50IGtleSAtPiBwdWJsaWMgY2hpbGQga2V5CiAgfSBlbHNlIHsKICAgIC8vIEtpID0gcG9pbnQocGFyc2UyNTYoSUwpKSArIEtwYXIKICAgIC8vICAgID0gRypJTCArIEtwYXIKICAgIHZhciBLaSA9IGN1cnZlLkcubXVsdGlwbHkocElMKS5hZGQodGhpcy5rZXlQYWlyLlEpCgogICAgLy8gSW4gY2FzZSBLaSBpcyB0aGUgcG9pbnQgYXQgaW5maW5pdHksIHByb2NlZWQgd2l0aCB0aGUgbmV4dCB2YWx1ZSBmb3IgaQogICAgaWYgKGN1cnZlLmlzSW5maW5pdHkoS2kpKSB7CiAgICAgIHJldHVybiB0aGlzLmRlcml2ZShpbmRleCArIDEpCiAgICB9CgogICAgZGVyaXZlZEtleVBhaXIgPSBuZXcgRUNQYWlyKG51bGwsIEtpLCB7CiAgICAgIG5ldHdvcms6IHRoaXMua2V5UGFpci5uZXR3b3JrCiAgICB9KQogIH0KCiAgdmFyIGhkID0gbmV3IEhETm9kZShkZXJpdmVkS2V5UGFpciwgSVIpCiAgaGQuZGVwdGggPSB0aGlzLmRlcHRoICsgMQogIGhkLmluZGV4ID0gaW5kZXgKICBoZC5wYXJlbnRGaW5nZXJwcmludCA9IHRoaXMuZ2V0RmluZ2VycHJpbnQoKS5yZWFkVUludDMyQkUoMCkKCiAgcmV0dXJuIGhkCn0KCkhETm9kZS5wcm90b3R5cGUuZGVyaXZlSGFyZGVuZWQgPSBmdW5jdGlvbiAoaW5kZXgpIHsKICAvLyBPbmx5IGRlcml2ZXMgaGFyZGVuZWQgcHJpdmF0ZSBrZXlzIGJ5IGRlZmF1bHQKICByZXR1cm4gdGhpcy5kZXJpdmUoaW5kZXggKyBIRE5vZGUuSElHSEVTVF9CSVQpCn0KCkhETm9kZS5wcm90b3R5cGUudG9TdHJpbmcgPSBIRE5vZGUucHJvdG90eXBlLnRvQmFzZTU4Cgptb2R1bGUuZXhwb3J0cyA9IEhETm9kZQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vY3J5cHRvIjoyOCwiLi9lY3BhaXIiOjMwLCIuL25ldHdvcmtzIjozNSwiLi90eXBlcyI6NDEsImJpZ2kiOjIwLCJiczU4Y2hlY2siOjcxLCJidWZmZXIiOjc2LCJjcmVhdGUtaG1hYyI6ODQsImVjdXJ2ZSI6OTgsInR5cGVmb3JjZSI6MTczfV0sMzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHsKICBCbG9jazogcmVxdWlyZSgnLi9ibG9jaycpLAogIEVDUGFpcjogcmVxdWlyZSgnLi9lY3BhaXInKSwKICBFQ1NpZ25hdHVyZTogcmVxdWlyZSgnLi9lY3NpZ25hdHVyZScpLAogIEhETm9kZTogcmVxdWlyZSgnLi9oZG5vZGUnKSwKICBUcmFuc2FjdGlvbjogcmVxdWlyZSgnLi90cmFuc2FjdGlvbicpLAogIFRyYW5zYWN0aW9uQnVpbGRlcjogcmVxdWlyZSgnLi90cmFuc2FjdGlvbl9idWlsZGVyJyksCgogIGFkZHJlc3M6IHJlcXVpcmUoJy4vYWRkcmVzcycpLAogIGJ1ZmZlcnV0aWxzOiByZXF1aXJlKCcuL2J1ZmZlcnV0aWxzJyksCiAgY3J5cHRvOiByZXF1aXJlKCcuL2NyeXB0bycpLAogIG1lc3NhZ2U6IHJlcXVpcmUoJy4vbWVzc2FnZScpLAogIG5ldHdvcmtzOiByZXF1aXJlKCcuL25ldHdvcmtzJyksCiAgb3Bjb2RlczogcmVxdWlyZSgnLi9vcGNvZGVzJyksCiAgc2NyaXB0OiByZXF1aXJlKCcuL3NjcmlwdCcpCn0KCn0seyIuL2FkZHJlc3MiOjI1LCIuL2Jsb2NrIjoyNiwiLi9idWZmZXJ1dGlscyI6MjcsIi4vY3J5cHRvIjoyOCwiLi9lY3BhaXIiOjMwLCIuL2Vjc2lnbmF0dXJlIjozMSwiLi9oZG5vZGUiOjMyLCIuL21lc3NhZ2UiOjM0LCIuL25ldHdvcmtzIjozNSwiLi9vcGNvZGVzIjozNiwiLi9zY3JpcHQiOjM3LCIuL3RyYW5zYWN0aW9uIjozOSwiLi90cmFuc2FjdGlvbl9idWlsZGVyIjo0MH1dLDM0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYnVmZmVydXRpbHMgPSByZXF1aXJlKCcuL2J1ZmZlcnV0aWxzJykKdmFyIGJjcnlwdG8gPSByZXF1aXJlKCcuL2NyeXB0bycpCnZhciBlY2RzYSA9IHJlcXVpcmUoJy4vZWNkc2EnKQp2YXIgbmV0d29ya3MgPSByZXF1aXJlKCcuL25ldHdvcmtzJykKCnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnYmlnaScpCnZhciBFQ1BhaXIgPSByZXF1aXJlKCcuL2VjcGFpcicpCnZhciBFQ1NpZ25hdHVyZSA9IHJlcXVpcmUoJy4vZWNzaWduYXR1cmUnKQoKZnVuY3Rpb24gbWFnaWNIYXNoIChtZXNzYWdlLCBuZXR3b3JrKSB7CiAgdmFyIG1lc3NhZ2VQcmVmaXggPSBuZXcgQnVmZmVyKG5ldHdvcmsubWVzc2FnZVByZWZpeCkKICB2YXIgbWVzc2FnZUJ1ZmZlciA9IG5ldyBCdWZmZXIobWVzc2FnZSkKICB2YXIgbGVuZ3RoQnVmZmVyID0gYnVmZmVydXRpbHMudmFySW50QnVmZmVyKG1lc3NhZ2VCdWZmZXIubGVuZ3RoKQoKICB2YXIgYnVmZmVyID0gQnVmZmVyLmNvbmNhdChbbWVzc2FnZVByZWZpeCwgbGVuZ3RoQnVmZmVyLCBtZXNzYWdlQnVmZmVyXSkKICByZXR1cm4gYmNyeXB0by5oYXNoMjU2KGJ1ZmZlcikKfQoKZnVuY3Rpb24gc2lnbiAoa2V5UGFpciwgbWVzc2FnZSwgbmV0d29yaykgewogIG5ldHdvcmsgPSBuZXR3b3JrIHx8IG5ldHdvcmtzLmJpdGNvaW4KCiAgdmFyIGhhc2ggPSBtYWdpY0hhc2gobWVzc2FnZSwgbmV0d29yaykKICB2YXIgc2lnbmF0dXJlID0ga2V5UGFpci5zaWduKGhhc2gpCiAgdmFyIGUgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoaGFzaCkKICB2YXIgaSA9IGVjZHNhLmNhbGNQdWJLZXlSZWNvdmVyeVBhcmFtKGUsIHNpZ25hdHVyZSwga2V5UGFpci5RKQoKICByZXR1cm4gc2lnbmF0dXJlLnRvQ29tcGFjdChpLCBrZXlQYWlyLmNvbXByZXNzZWQpCn0KCmZ1bmN0aW9uIHZlcmlmeSAoYWRkcmVzcywgc2lnbmF0dXJlLCBtZXNzYWdlLCBuZXR3b3JrKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoc2lnbmF0dXJlKSkgewogICAgc2lnbmF0dXJlID0gbmV3IEJ1ZmZlcihzaWduYXR1cmUsICdiYXNlNjQnKQogIH0KCiAgbmV0d29yayA9IG5ldHdvcmsgfHwgbmV0d29ya3MuYml0Y29pbgoKICB2YXIgaGFzaCA9IG1hZ2ljSGFzaChtZXNzYWdlLCBuZXR3b3JrKQogIHZhciBwYXJzZWQgPSBFQ1NpZ25hdHVyZS5wYXJzZUNvbXBhY3Qoc2lnbmF0dXJlKQogIHZhciBlID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGhhc2gpCiAgdmFyIFEgPSBlY2RzYS5yZWNvdmVyUHViS2V5KGUsIHBhcnNlZC5zaWduYXR1cmUsIHBhcnNlZC5pKQoKICB2YXIga2V5UGFpciA9IG5ldyBFQ1BhaXIobnVsbCwgUSwgewogICAgY29tcHJlc3NlZDogcGFyc2VkLmNvbXByZXNzZWQsCiAgICBuZXR3b3JrOiBuZXR3b3JrCiAgfSkKCiAgcmV0dXJuIGtleVBhaXIuZ2V0QWRkcmVzcygpID09PSBhZGRyZXNzCn0KCm1vZHVsZS5leHBvcnRzID0gewogIG1hZ2ljSGFzaDogbWFnaWNIYXNoLAogIHNpZ246IHNpZ24sCiAgdmVyaWZ5OiB2ZXJpZnkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYnVmZmVydXRpbHMiOjI3LCIuL2NyeXB0byI6MjgsIi4vZWNkc2EiOjI5LCIuL2VjcGFpciI6MzAsIi4vZWNzaWduYXR1cmUiOjMxLCIuL25ldHdvcmtzIjozNSwiYmlnaSI6MjAsImJ1ZmZlciI6NzZ9XSwzNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGh0dHBzOi8vZW4uYml0Y29pbi5pdC93aWtpL0xpc3Rfb2ZfYWRkcmVzc19wcmVmaXhlcwovLyBEb2dlY29pbiBCSVAzMiBpcyBhIHByb3Bvc2VkIHN0YW5kYXJkOiBodHRwczovL2JpdGNvaW50YWxrLm9yZy9pbmRleC5waHA/dG9waWM9NDA5NzMxCgptb2R1bGUuZXhwb3J0cyA9IHsKICBiaXRjb2luOiB7CiAgICBtZXNzYWdlUHJlZml4OiAnXHgxOEJpdGNvaW4gU2lnbmVkIE1lc3NhZ2U6XG4nLAogICAgYmlwMzI6IHsKICAgICAgcHVibGljOiAweDA0ODhiMjFlLAogICAgICBwcml2YXRlOiAweDA0ODhhZGU0CiAgICB9LAogICAgcHViS2V5SGFzaDogMHgwMCwKICAgIHNjcmlwdEhhc2g6IDB4MDUsCiAgICB3aWY6IDB4ODAsCiAgICBkdXN0VGhyZXNob2xkOiA1NDYgLy8gaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYml0Y29pbi9ibG9iL3YwLjkuMi9zcmMvY29yZS5oI0wxNTEtTDE2MgogIH0sCiAgdGVzdG5ldDogewogICAgbWVzc2FnZVByZWZpeDogJ1x4MThCaXRjb2luIFNpZ25lZCBNZXNzYWdlOlxuJywKICAgIGJpcDMyOiB7CiAgICAgIHB1YmxpYzogMHgwNDM1ODdjZiwKICAgICAgcHJpdmF0ZTogMHgwNDM1ODM5NAogICAgfSwKICAgIHB1YktleUhhc2g6IDB4NmYsCiAgICBzY3JpcHRIYXNoOiAweGM0LAogICAgd2lmOiAweGVmLAogICAgZHVzdFRocmVzaG9sZDogNTQ2CiAgfSwKICBsaXRlY29pbjogewogICAgbWVzc2FnZVByZWZpeDogJ1x4MTlMaXRlY29pbiBTaWduZWQgTWVzc2FnZTpcbicsCiAgICBiaXAzMjogewogICAgICBwdWJsaWM6IDB4MDE5ZGE0NjIsCiAgICAgIHByaXZhdGU6IDB4MDE5ZDljZmUKICAgIH0sCiAgICBwdWJLZXlIYXNoOiAweDMwLAogICAgc2NyaXB0SGFzaDogMHgwNSwKICAgIHdpZjogMHhiMCwKICAgIGR1c3RUaHJlc2hvbGQ6IDAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2xpdGVjb2luLXByb2plY3QvbGl0ZWNvaW4vYmxvYi92MC44LjcuMi9zcmMvbWFpbi5jcHAjTDM2MC1MMzY1CiAgfSwKICBkb2dlY29pbjogewogICAgbWVzc2FnZVByZWZpeDogJ1x4MTlEb2dlY29pbiBTaWduZWQgTWVzc2FnZTpcbicsCiAgICBiaXAzMjogewogICAgICBwdWJsaWM6IDB4MDJmYWNhZmQsCiAgICAgIHByaXZhdGU6IDB4MDJmYWMzOTgKICAgIH0sCiAgICBwdWJLZXlIYXNoOiAweDFlLAogICAgc2NyaXB0SGFzaDogMHgxNiwKICAgIHdpZjogMHg5ZSwKICAgIGR1c3RUaHJlc2hvbGQ6IDAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2RvZ2Vjb2luL2RvZ2Vjb2luL2Jsb2IvdjEuNy4xL3NyYy9jb3JlLmgjTDE1NS1MMTYwCiAgfQp9Cgp9LHt9XSwzNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsKICAiT1BfRkFMU0UiOiAwLAogICJPUF8wIjogMCwKICAiT1BfUFVTSERBVEExIjogNzYsCiAgIk9QX1BVU0hEQVRBMiI6IDc3LAogICJPUF9QVVNIREFUQTQiOiA3OCwKICAiT1BfMU5FR0FURSI6IDc5LAogICJPUF9SRVNFUlZFRCI6IDgwLAogICJPUF8xIjogODEsCiAgIk9QX1RSVUUiOiA4MSwKICAiT1BfMiI6IDgyLAogICJPUF8zIjogODMsCiAgIk9QXzQiOiA4NCwKICAiT1BfNSI6IDg1LAogICJPUF82IjogODYsCiAgIk9QXzciOiA4NywKICAiT1BfOCI6IDg4LAogICJPUF85IjogODksCiAgIk9QXzEwIjogOTAsCiAgIk9QXzExIjogOTEsCiAgIk9QXzEyIjogOTIsCiAgIk9QXzEzIjogOTMsCiAgIk9QXzE0IjogOTQsCiAgIk9QXzE1IjogOTUsCiAgIk9QXzE2IjogOTYsCgogICJPUF9OT1AiOiA5NywKICAiT1BfVkVSIjogOTgsCiAgIk9QX0lGIjogOTksCiAgIk9QX05PVElGIjogMTAwLAogICJPUF9WRVJJRiI6IDEwMSwKICAiT1BfVkVSTk9USUYiOiAxMDIsCiAgIk9QX0VMU0UiOiAxMDMsCiAgIk9QX0VORElGIjogMTA0LAogICJPUF9WRVJJRlkiOiAxMDUsCiAgIk9QX1JFVFVSTiI6IDEwNiwKCiAgIk9QX1RPQUxUU1RBQ0siOiAxMDcsCiAgIk9QX0ZST01BTFRTVEFDSyI6IDEwOCwKICAiT1BfMkRST1AiOiAxMDksCiAgIk9QXzJEVVAiOiAxMTAsCiAgIk9QXzNEVVAiOiAxMTEsCiAgIk9QXzJPVkVSIjogMTEyLAogICJPUF8yUk9UIjogMTEzLAogICJPUF8yU1dBUCI6IDExNCwKICAiT1BfSUZEVVAiOiAxMTUsCiAgIk9QX0RFUFRIIjogMTE2LAogICJPUF9EUk9QIjogMTE3LAogICJPUF9EVVAiOiAxMTgsCiAgIk9QX05JUCI6IDExOSwKICAiT1BfT1ZFUiI6IDEyMCwKICAiT1BfUElDSyI6IDEyMSwKICAiT1BfUk9MTCI6IDEyMiwKICAiT1BfUk9UIjogMTIzLAogICJPUF9TV0FQIjogMTI0LAogICJPUF9UVUNLIjogMTI1LAoKICAiT1BfQ0FUIjogMTI2LAogICJPUF9TVUJTVFIiOiAxMjcsCiAgIk9QX0xFRlQiOiAxMjgsCiAgIk9QX1JJR0hUIjogMTI5LAogICJPUF9TSVpFIjogMTMwLAoKICAiT1BfSU5WRVJUIjogMTMxLAogICJPUF9BTkQiOiAxMzIsCiAgIk9QX09SIjogMTMzLAogICJPUF9YT1IiOiAxMzQsCiAgIk9QX0VRVUFMIjogMTM1LAogICJPUF9FUVVBTFZFUklGWSI6IDEzNiwKICAiT1BfUkVTRVJWRUQxIjogMTM3LAogICJPUF9SRVNFUlZFRDIiOiAxMzgsCgogICJPUF8xQUREIjogMTM5LAogICJPUF8xU1VCIjogMTQwLAogICJPUF8yTVVMIjogMTQxLAogICJPUF8yRElWIjogMTQyLAogICJPUF9ORUdBVEUiOiAxNDMsCiAgIk9QX0FCUyI6IDE0NCwKICAiT1BfTk9UIjogMTQ1LAogICJPUF8wTk9URVFVQUwiOiAxNDYsCiAgIk9QX0FERCI6IDE0NywKICAiT1BfU1VCIjogMTQ4LAogICJPUF9NVUwiOiAxNDksCiAgIk9QX0RJViI6IDE1MCwKICAiT1BfTU9EIjogMTUxLAogICJPUF9MU0hJRlQiOiAxNTIsCiAgIk9QX1JTSElGVCI6IDE1MywKCiAgIk9QX0JPT0xBTkQiOiAxNTQsCiAgIk9QX0JPT0xPUiI6IDE1NSwKICAiT1BfTlVNRVFVQUwiOiAxNTYsCiAgIk9QX05VTUVRVUFMVkVSSUZZIjogMTU3LAogICJPUF9OVU1OT1RFUVVBTCI6IDE1OCwKICAiT1BfTEVTU1RIQU4iOiAxNTksCiAgIk9QX0dSRUFURVJUSEFOIjogMTYwLAogICJPUF9MRVNTVEhBTk9SRVFVQUwiOiAxNjEsCiAgIk9QX0dSRUFURVJUSEFOT1JFUVVBTCI6IDE2MiwKICAiT1BfTUlOIjogMTYzLAogICJPUF9NQVgiOiAxNjQsCgogICJPUF9XSVRISU4iOiAxNjUsCgogICJPUF9SSVBFTUQxNjAiOiAxNjYsCiAgIk9QX1NIQTEiOiAxNjcsCiAgIk9QX1NIQTI1NiI6IDE2OCwKICAiT1BfSEFTSDE2MCI6IDE2OSwKICAiT1BfSEFTSDI1NiI6IDE3MCwKICAiT1BfQ09ERVNFUEFSQVRPUiI6IDE3MSwKICAiT1BfQ0hFQ0tTSUciOiAxNzIsCiAgIk9QX0NIRUNLU0lHVkVSSUZZIjogMTczLAogICJPUF9DSEVDS01VTFRJU0lHIjogMTc0LAogICJPUF9DSEVDS01VTFRJU0lHVkVSSUZZIjogMTc1LAoKICAiT1BfTk9QMSI6IDE3NiwKICAiT1BfTk9QMiI6IDE3NywKICAiT1BfQ0hFQ0tMT0NLVElNRVZFUklGWSI6IDE3NywKCiAgIk9QX05PUDMiOiAxNzgsCiAgIk9QX05PUDQiOiAxNzksCiAgIk9QX05PUDUiOiAxODAsCiAgIk9QX05PUDYiOiAxODEsCiAgIk9QX05PUDciOiAxODIsCiAgIk9QX05PUDgiOiAxODMsCiAgIk9QX05PUDkiOiAxODQsCiAgIk9QX05PUDEwIjogMTg1LAoKICAiT1BfUFVCS0VZSEFTSCI6IDI1MywKICAiT1BfUFVCS0VZIjogMjU0LAogICJPUF9JTlZBTElET1BDT0RFIjogMjU1Cn0KCn0se31dLDM3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYmlwNjYgPSByZXF1aXJlKCdiaXA2NicpCnZhciBidWZmZXJ1dGlscyA9IHJlcXVpcmUoJy4vYnVmZmVydXRpbHMnKQp2YXIgdHlwZWZvcmNlID0gcmVxdWlyZSgndHlwZWZvcmNlJykKdmFyIHR5cGVzID0gcmVxdWlyZSgnLi90eXBlcycpCgp2YXIgT1BTID0gcmVxdWlyZSgnLi9vcGNvZGVzJykKdmFyIFJFVkVSU0VfT1BTID0gKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVzdWx0ID0ge30KICBmb3IgKHZhciBvcCBpbiBPUFMpIHsKICAgIHZhciBjb2RlID0gT1BTW29wXQogICAgcmVzdWx0W2NvZGVdID0gb3AKICB9CiAgcmV0dXJuIHJlc3VsdAp9KSgpCgp2YXIgT1BfSU5UX0JBU0UgPSBPUFMuT1BfUkVTRVJWRUQgLy8gT1BfMSAtIDEKCmZ1bmN0aW9uIHRvQVNNIChjaHVua3MpIHsKICBpZiAoQnVmZmVyLmlzQnVmZmVyKGNodW5rcykpIHsKICAgIGNodW5rcyA9IGRlY29tcGlsZShjaHVua3MpCiAgfQoKICByZXR1cm4gY2h1bmtzLm1hcChmdW5jdGlvbiAoY2h1bmspIHsKICAgIC8vIGRhdGE/CiAgICBpZiAoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgcmV0dXJuIGNodW5rLnRvU3RyaW5nKCdoZXgnKQoKICAgIC8vIG9wY29kZSEKICAgIHJldHVybiBSRVZFUlNFX09QU1tjaHVua10KICB9KS5qb2luKCcgJykKfQoKZnVuY3Rpb24gZnJvbUFTTSAoYXNtKSB7CiAgdHlwZWZvcmNlKHR5cGVzLlN0cmluZywgYXNtKQoKICByZXR1cm4gY29tcGlsZShhc20uc3BsaXQoJyAnKS5tYXAoZnVuY3Rpb24gKGNodW5rU3RyKSB7CiAgICAvLyBvcGNvZGU/CiAgICBpZiAoT1BTW2NodW5rU3RyXSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gT1BTW2NodW5rU3RyXQoKICAgIC8vIGRhdGEhCiAgICByZXR1cm4gbmV3IEJ1ZmZlcihjaHVua1N0ciwgJ2hleCcpCiAgfSkpCn0KCmZ1bmN0aW9uIGNvbXBpbGUgKGNodW5rcykgewogIC8vIFRPRE86IHJlbW92ZSBtZQogIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmtzKSkgcmV0dXJuIGNodW5rcwoKICB0eXBlZm9yY2UodHlwZXMuQXJyYXksIGNodW5rcykKCiAgdmFyIGJ1ZmZlclNpemUgPSBjaHVua3MucmVkdWNlKGZ1bmN0aW9uIChhY2N1bSwgY2h1bmspIHsKICAgIC8vIGRhdGEgY2h1bmsKICAgIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSB7CiAgICAgIHJldHVybiBhY2N1bSArIGJ1ZmZlcnV0aWxzLnB1c2hEYXRhU2l6ZShjaHVuay5sZW5ndGgpICsgY2h1bmsubGVuZ3RoCiAgICB9CgogICAgLy8gb3Bjb2RlCiAgICByZXR1cm4gYWNjdW0gKyAxCiAgfSwgMC4wKQoKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcihidWZmZXJTaXplKQogIHZhciBvZmZzZXQgPSAwCgogIGNodW5rcy5mb3JFYWNoKGZ1bmN0aW9uIChjaHVuaykgewogICAgLy8gZGF0YSBjaHVuawogICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpIHsKICAgICAgb2Zmc2V0ICs9IGJ1ZmZlcnV0aWxzLndyaXRlUHVzaERhdGFJbnQoYnVmZmVyLCBjaHVuay5sZW5ndGgsIG9mZnNldCkKCiAgICAgIGNodW5rLmNvcHkoYnVmZmVyLCBvZmZzZXQpCiAgICAgIG9mZnNldCArPSBjaHVuay5sZW5ndGgKCiAgICAvLyBvcGNvZGUKICAgIH0gZWxzZSB7CiAgICAgIGJ1ZmZlci53cml0ZVVJbnQ4KGNodW5rLCBvZmZzZXQpCiAgICAgIG9mZnNldCArPSAxCiAgICB9CiAgfSkKCiAgaWYgKG9mZnNldCAhPT0gYnVmZmVyLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZGVjb2RlIGNodW5rcycpCiAgcmV0dXJuIGJ1ZmZlcgp9CgpmdW5jdGlvbiBkZWNvbXBpbGUgKGJ1ZmZlcikgewogIC8vIFRPRE86IHJlbW92ZSBtZQogIGlmICh0eXBlcy5BcnJheShidWZmZXIpKSByZXR1cm4gYnVmZmVyCgogIHR5cGVmb3JjZSh0eXBlcy5CdWZmZXIsIGJ1ZmZlcikKCiAgdmFyIGNodW5rcyA9IFtdCiAgdmFyIGkgPSAwCgogIHdoaWxlIChpIDwgYnVmZmVyLmxlbmd0aCkgewogICAgdmFyIG9wY29kZSA9IGJ1ZmZlcltpXQoKICAgIC8vIGRhdGEgY2h1bmsKICAgIGlmICgob3Bjb2RlID4gT1BTLk9QXzApICYmIChvcGNvZGUgPD0gT1BTLk9QX1BVU0hEQVRBNCkpIHsKICAgICAgdmFyIGQgPSBidWZmZXJ1dGlscy5yZWFkUHVzaERhdGFJbnQoYnVmZmVyLCBpKQoKICAgICAgLy8gZGlkIHJlYWRpbmcgYSBwdXNoRGF0YUludCBmYWlsPyBlbXB0eSBzY3JpcHQKICAgICAgaWYgKGQgPT09IG51bGwpIHJldHVybiBbXQogICAgICBpICs9IGQuc2l6ZQoKICAgICAgLy8gYXR0ZW1wdCB0byByZWFkIHRvbyBtdWNoIGRhdGE/IGVtcHR5IHNjcmlwdAogICAgICBpZiAoaSArIGQubnVtYmVyID4gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIFtdCgogICAgICB2YXIgZGF0YSA9IGJ1ZmZlci5zbGljZShpLCBpICsgZC5udW1iZXIpCiAgICAgIGkgKz0gZC5udW1iZXIKCiAgICAgIGNodW5rcy5wdXNoKGRhdGEpCgogICAgLy8gb3Bjb2RlCiAgICB9IGVsc2UgewogICAgICBjaHVua3MucHVzaChvcGNvZGUpCgogICAgICBpICs9IDEKICAgIH0KICB9CgogIHJldHVybiBjaHVua3MKfQoKZnVuY3Rpb24gaXNDYW5vbmljYWxQdWJLZXkgKGJ1ZmZlcikgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZmZlcikpIHJldHVybiBmYWxzZQogIGlmIChidWZmZXIubGVuZ3RoIDwgMzMpIHJldHVybiBmYWxzZQoKICBzd2l0Y2ggKGJ1ZmZlclswXSkgewogICAgY2FzZSAweDAyOgogICAgY2FzZSAweDAzOgogICAgICByZXR1cm4gYnVmZmVyLmxlbmd0aCA9PT0gMzMKICAgIGNhc2UgMHgwNDoKICAgICAgcmV0dXJuIGJ1ZmZlci5sZW5ndGggPT09IDY1CiAgfQoKICByZXR1cm4gZmFsc2UKfQoKZnVuY3Rpb24gaXNDYW5vbmljYWxTaWduYXR1cmUgKGJ1ZmZlcikgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZmZlcikpIHJldHVybiBmYWxzZQogIGlmICghaXNEZWZpbmVkSGFzaFR5cGUoYnVmZmVyW2J1ZmZlci5sZW5ndGggLSAxXSkpIHJldHVybiBmYWxzZQoKICByZXR1cm4gYmlwNjYuY2hlY2soYnVmZmVyLnNsaWNlKDAsIC0xKSkKfQoKZnVuY3Rpb24gaXNEZWZpbmVkSGFzaFR5cGUgKGhhc2hUeXBlKSB7CiAgdmFyIGhhc2hUeXBlTW9kID0gaGFzaFR5cGUgJiB+MHg4MAoKLy8gcmV0dXJuIGhhc2hUeXBlTW9kID4gU0lHSEFTSF9BTEwgJiYgaGFzaFR5cGVNb2QgPCBTSUdIQVNIX1NJTkdMRQogIHJldHVybiBoYXNoVHlwZU1vZCA+IDB4MDAgJiYgaGFzaFR5cGVNb2QgPCAweDA0Cn0KCmZ1bmN0aW9uIGlzUHViS2V5SGFzaElucHV0IChzY3JpcHQpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKCiAgcmV0dXJuIGNodW5rcy5sZW5ndGggPT09IDIgJiYKICAgIGlzQ2Fub25pY2FsU2lnbmF0dXJlKGNodW5rc1swXSkgJiYKICAgIGlzQ2Fub25pY2FsUHViS2V5KGNodW5rc1sxXSkKfQoKZnVuY3Rpb24gaXNQdWJLZXlIYXNoT3V0cHV0IChzY3JpcHQpIHsKICB2YXIgYnVmZmVyID0gY29tcGlsZShzY3JpcHQpCgogIHJldHVybiBidWZmZXIubGVuZ3RoID09PSAyNSAmJgogICAgYnVmZmVyWzBdID09PSBPUFMuT1BfRFVQICYmCiAgICBidWZmZXJbMV0gPT09IE9QUy5PUF9IQVNIMTYwICYmCiAgICBidWZmZXJbMl0gPT09IDB4MTQgJiYKICAgIGJ1ZmZlclsyM10gPT09IE9QUy5PUF9FUVVBTFZFUklGWSAmJgogICAgYnVmZmVyWzI0XSA9PT0gT1BTLk9QX0NIRUNLU0lHCn0KCmZ1bmN0aW9uIGlzUHViS2V5SW5wdXQgKHNjcmlwdCkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQoKICByZXR1cm4gY2h1bmtzLmxlbmd0aCA9PT0gMSAmJgogICAgaXNDYW5vbmljYWxTaWduYXR1cmUoY2h1bmtzWzBdKQp9CgpmdW5jdGlvbiBpc1B1YktleU91dHB1dCAoc2NyaXB0KSB7CiAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHQpCgogIHJldHVybiBjaHVua3MubGVuZ3RoID09PSAyICYmCiAgICBpc0Nhbm9uaWNhbFB1YktleShjaHVua3NbMF0pICYmCiAgICBjaHVua3NbMV0gPT09IE9QUy5PUF9DSEVDS1NJRwp9CgpmdW5jdGlvbiBpc1NjcmlwdEhhc2hJbnB1dCAoc2NyaXB0LCBhbGxvd0luY29tcGxldGUpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKICBpZiAoY2h1bmtzLmxlbmd0aCA8IDIpIHJldHVybiBmYWxzZQoKICB2YXIgbGFzdENodW5rID0gY2h1bmtzW2NodW5rcy5sZW5ndGggLSAxXQogIGlmICghQnVmZmVyLmlzQnVmZmVyKGxhc3RDaHVuaykpIHJldHVybiBmYWxzZQoKICB2YXIgc2NyaXB0U2lnQ2h1bmtzID0gY2h1bmtzLnNsaWNlKDAsIC0xKQogIHZhciByZWRlZW1TY3JpcHRDaHVua3MgPSBkZWNvbXBpbGUobGFzdENodW5rKQoKICAvLyBpcyByZWRlZW1TY3JpcHQgYSB2YWxpZCBzY3JpcHQ/CiAgaWYgKHJlZGVlbVNjcmlwdENodW5rcy5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZQoKICByZXR1cm4gY2xhc3NpZnlJbnB1dChzY3JpcHRTaWdDaHVua3MsIGFsbG93SW5jb21wbGV0ZSkgPT09IGNsYXNzaWZ5T3V0cHV0KHJlZGVlbVNjcmlwdENodW5rcykKfQoKZnVuY3Rpb24gaXNTY3JpcHRIYXNoT3V0cHV0IChzY3JpcHQpIHsKICB2YXIgYnVmZmVyID0gY29tcGlsZShzY3JpcHQpCgogIHJldHVybiBidWZmZXIubGVuZ3RoID09PSAyMyAmJgogICAgYnVmZmVyWzBdID09PSBPUFMuT1BfSEFTSDE2MCAmJgogICAgYnVmZmVyWzFdID09PSAweDE0ICYmCiAgICBidWZmZXJbMjJdID09PSBPUFMuT1BfRVFVQUwKfQoKLy8gYWxsb3dJbmNvbXBsZXRlIGlzIHRvIGFjY291bnQgZm9yIGNvbWJpbmluZyBzaWduYXR1cmVzCi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbi9iaXRjb2luL2Jsb2IvZjQyNTA1MDU0NjY0NGEzNmIwYjhlMGViMmY2OTM0YTNlMGY2ZjgwZi9zcmMvc2NyaXB0L3NpZ24uY3BwI0wxOTUtTDE5NwpmdW5jdGlvbiBpc011bHRpc2lnSW5wdXQgKHNjcmlwdCwgYWxsb3dJbmNvbXBsZXRlKSB7CiAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHQpCiAgaWYgKGNodW5rcy5sZW5ndGggPCAyKSByZXR1cm4gZmFsc2UKICBpZiAoY2h1bmtzWzBdICE9PSBPUFMuT1BfMCkgcmV0dXJuIGZhbHNlCgogIGlmIChhbGxvd0luY29tcGxldGUpIHsKICAgIHJldHVybiBjaHVua3Muc2xpY2UoMSkuZXZlcnkoZnVuY3Rpb24gKGNodW5rKSB7CiAgICAgIHJldHVybiBjaHVuayA9PT0gT1BTLk9QXzAgfHwgaXNDYW5vbmljYWxTaWduYXR1cmUoY2h1bmspCiAgICB9KQogIH0KCiAgcmV0dXJuIGNodW5rcy5zbGljZSgxKS5ldmVyeShpc0Nhbm9uaWNhbFNpZ25hdHVyZSkKfQoKZnVuY3Rpb24gaXNNdWx0aXNpZ091dHB1dCAoc2NyaXB0KSB7CiAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHQpCiAgaWYgKGNodW5rcy5sZW5ndGggPCA0KSByZXR1cm4gZmFsc2UKICBpZiAoY2h1bmtzW2NodW5rcy5sZW5ndGggLSAxXSAhPT0gT1BTLk9QX0NIRUNLTVVMVElTSUcpIHJldHVybiBmYWxzZQoKICB2YXIgbU9wID0gY2h1bmtzWzBdCiAgdmFyIG5PcCA9IGNodW5rc1tjaHVua3MubGVuZ3RoIC0gMl0KCiAgaWYgKCF0eXBlcy5OdW1iZXIobU9wKSkgcmV0dXJuIGZhbHNlCiAgaWYgKCF0eXBlcy5OdW1iZXIobk9wKSkgcmV0dXJuIGZhbHNlCgogIHZhciBtID0gbU9wIC0gT1BfSU5UX0JBU0UKICB2YXIgbiA9IG5PcCAtIE9QX0lOVF9CQVNFCgogIC8vIDAgPCBtIDw9IG4gPD0gMTYKICBpZiAobSA8PSAwKSByZXR1cm4gZmFsc2UKICBpZiAobSA+IG4pIHJldHVybiBmYWxzZQogIGlmIChuID4gMTYpIHJldHVybiBmYWxzZQogIGlmIChuICE9PSBjaHVua3MubGVuZ3RoIC0gMykgcmV0dXJuIGZhbHNlCgogIHJldHVybiBjaHVua3Muc2xpY2UoMSwgLTIpLmV2ZXJ5KGlzQ2Fub25pY2FsUHViS2V5KQp9CgpmdW5jdGlvbiBpc051bGxEYXRhT3V0cHV0IChzY3JpcHQpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKICByZXR1cm4gY2h1bmtzWzBdID09PSBPUFMuT1BfUkVUVVJOCn0KCmZ1bmN0aW9uIGNsYXNzaWZ5T3V0cHV0IChzY3JpcHQpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKCiAgaWYgKGlzUHViS2V5SGFzaE91dHB1dChjaHVua3MpKSB7CiAgICByZXR1cm4gJ3B1YmtleWhhc2gnCiAgfSBlbHNlIGlmIChpc1NjcmlwdEhhc2hPdXRwdXQoY2h1bmtzKSkgewogICAgcmV0dXJuICdzY3JpcHRoYXNoJwogIH0gZWxzZSBpZiAoaXNNdWx0aXNpZ091dHB1dChjaHVua3MpKSB7CiAgICByZXR1cm4gJ211bHRpc2lnJwogIH0gZWxzZSBpZiAoaXNQdWJLZXlPdXRwdXQoY2h1bmtzKSkgewogICAgcmV0dXJuICdwdWJrZXknCiAgfSBlbHNlIGlmIChpc051bGxEYXRhT3V0cHV0KGNodW5rcykpIHsKICAgIHJldHVybiAnbnVsbGRhdGEnCiAgfQoKICByZXR1cm4gJ25vbnN0YW5kYXJkJwp9CgpmdW5jdGlvbiBjbGFzc2lmeUlucHV0IChzY3JpcHQsIGFsbG93SW5jb21wbGV0ZSkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQoKICBpZiAoaXNQdWJLZXlIYXNoSW5wdXQoY2h1bmtzKSkgewogICAgcmV0dXJuICdwdWJrZXloYXNoJwogIH0gZWxzZSBpZiAoaXNNdWx0aXNpZ0lucHV0KGNodW5rcywgYWxsb3dJbmNvbXBsZXRlKSkgewogICAgcmV0dXJuICdtdWx0aXNpZycKICB9IGVsc2UgaWYgKGlzU2NyaXB0SGFzaElucHV0KGNodW5rcywgYWxsb3dJbmNvbXBsZXRlKSkgewogICAgcmV0dXJuICdzY3JpcHRoYXNoJwogIH0gZWxzZSBpZiAoaXNQdWJLZXlJbnB1dChjaHVua3MpKSB7CiAgICByZXR1cm4gJ3B1YmtleScKICB9CgogIHJldHVybiAnbm9uc3RhbmRhcmQnCn0KCi8vIFN0YW5kYXJkIFNjcmlwdCBUZW1wbGF0ZXMKLy8ge3B1YktleX0gT1BfQ0hFQ0tTSUcKZnVuY3Rpb24gcHViS2V5T3V0cHV0IChwdWJLZXkpIHsKICByZXR1cm4gY29tcGlsZShbcHViS2V5LCBPUFMuT1BfQ0hFQ0tTSUddKQp9CgovLyBPUF9EVVAgT1BfSEFTSDE2MCB7cHViS2V5SGFzaH0gT1BfRVFVQUxWRVJJRlkgT1BfQ0hFQ0tTSUcKZnVuY3Rpb24gcHViS2V5SGFzaE91dHB1dCAocHViS2V5SGFzaCkgewogIHR5cGVmb3JjZSh0eXBlcy5IYXNoMTYwYml0LCBwdWJLZXlIYXNoKQoKICByZXR1cm4gY29tcGlsZShbT1BTLk9QX0RVUCwgT1BTLk9QX0hBU0gxNjAsIHB1YktleUhhc2gsIE9QUy5PUF9FUVVBTFZFUklGWSwgT1BTLk9QX0NIRUNLU0lHXSkKfQoKLy8gT1BfSEFTSDE2MCB7c2NyaXB0SGFzaH0gT1BfRVFVQUwKZnVuY3Rpb24gc2NyaXB0SGFzaE91dHB1dCAoc2NyaXB0SGFzaCkgewogIHR5cGVmb3JjZSh0eXBlcy5IYXNoMTYwYml0LCBzY3JpcHRIYXNoKQoKICByZXR1cm4gY29tcGlsZShbT1BTLk9QX0hBU0gxNjAsIHNjcmlwdEhhc2gsIE9QUy5PUF9FUVVBTF0pCn0KCi8vIG0gW3B1YktleXMgLi4uXSBuIE9QX0NIRUNLTVVMVElTSUcKZnVuY3Rpb24gbXVsdGlzaWdPdXRwdXQgKG0sIHB1YktleXMpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuTnVtYmVyLCBbdHlwZXMuQnVmZmVyXSksIGFyZ3VtZW50cykKCiAgdmFyIG4gPSBwdWJLZXlzLmxlbmd0aAogIGlmIChuIDwgbSkgdGhyb3cgbmV3IEVycm9yKCdOb3QgZW5vdWdoIHB1YktleXMgcHJvdmlkZWQnKQoKICByZXR1cm4gY29tcGlsZShbXS5jb25jYXQoCiAgICBPUF9JTlRfQkFTRSArIG0sCiAgICBwdWJLZXlzLAogICAgT1BfSU5UX0JBU0UgKyBuLAogICAgT1BTLk9QX0NIRUNLTVVMVElTSUcKICApKQp9CgovLyB7c2lnbmF0dXJlfQpmdW5jdGlvbiBwdWJLZXlJbnB1dCAoc2lnbmF0dXJlKSB7CiAgdHlwZWZvcmNlKHR5cGVzLkJ1ZmZlciwgc2lnbmF0dXJlKQoKICByZXR1cm4gY29tcGlsZShbc2lnbmF0dXJlXSkKfQoKLy8ge3NpZ25hdHVyZX0ge3B1YktleX0KZnVuY3Rpb24gcHViS2V5SGFzaElucHV0IChzaWduYXR1cmUsIHB1YktleSkgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5CdWZmZXIsIHR5cGVzLkJ1ZmZlciksIGFyZ3VtZW50cykKCiAgcmV0dXJuIGNvbXBpbGUoW3NpZ25hdHVyZSwgcHViS2V5XSkKfQoKLy8gPHNjcmlwdFNpZz4ge3NlcmlhbGl6ZWQgc2NyaXB0UHViS2V5IHNjcmlwdH0KZnVuY3Rpb24gc2NyaXB0SGFzaElucHV0IChzY3JpcHRTaWcsIHNjcmlwdFB1YktleSkgewogIHZhciBzY3JpcHRTaWdDaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0U2lnKQogIHZhciBzZXJpYWxpemVkU2NyaXB0UHViS2V5ID0gY29tcGlsZShzY3JpcHRQdWJLZXkpCgogIHJldHVybiBjb21waWxlKFtdLmNvbmNhdCgKICAgIHNjcmlwdFNpZ0NodW5rcywKICAgIHNlcmlhbGl6ZWRTY3JpcHRQdWJLZXkKICApKQp9CgovLyBPUF8wIFtzaWduYXR1cmVzIC4uLl0KZnVuY3Rpb24gbXVsdGlzaWdJbnB1dCAoc2lnbmF0dXJlcywgc2NyaXB0UHViS2V5KSB7CiAgaWYgKHNjcmlwdFB1YktleSkgewogICAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHRQdWJLZXkpCiAgICBpZiAoIWlzTXVsdGlzaWdPdXRwdXQoY2h1bmtzKSkgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBtdWx0aXNpZyBzY3JpcHRQdWJLZXknKQoKICAgIHZhciBtT3AgPSBjaHVua3NbMF0KICAgIHZhciBuT3AgPSBjaHVua3NbY2h1bmtzLmxlbmd0aCAtIDJdCiAgICB2YXIgbSA9IG1PcCAtIE9QX0lOVF9CQVNFCiAgICB2YXIgbiA9IG5PcCAtIE9QX0lOVF9CQVNFCgogICAgaWYgKHNpZ25hdHVyZXMubGVuZ3RoIDwgbSkgdGhyb3cgbmV3IEVycm9yKCdOb3QgZW5vdWdoIHNpZ25hdHVyZXMgcHJvdmlkZWQnKQogICAgaWYgKHNpZ25hdHVyZXMubGVuZ3RoID4gbikgdGhyb3cgbmV3IEVycm9yKCdUb28gbWFueSBzaWduYXR1cmVzIHByb3ZpZGVkJykKICB9CgogIHJldHVybiBjb21waWxlKFtdLmNvbmNhdChPUFMuT1BfMCwgc2lnbmF0dXJlcykpCn0KCmZ1bmN0aW9uIG51bGxEYXRhT3V0cHV0IChkYXRhKSB7CiAgcmV0dXJuIGNvbXBpbGUoW09QUy5PUF9SRVRVUk4sIGRhdGFdKQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBjb21waWxlOiBjb21waWxlLAogIGRlY29tcGlsZTogZGVjb21waWxlLAogIGZyb21BU006IGZyb21BU00sCiAgdG9BU006IHRvQVNNLAoKICBudW1iZXI6IHJlcXVpcmUoJy4vc2NyaXB0X251bWJlcicpLAoKICBpc0Nhbm9uaWNhbFB1YktleTogaXNDYW5vbmljYWxQdWJLZXksCiAgaXNDYW5vbmljYWxTaWduYXR1cmU6IGlzQ2Fub25pY2FsU2lnbmF0dXJlLAogIGlzRGVmaW5lZEhhc2hUeXBlOiBpc0RlZmluZWRIYXNoVHlwZSwKICBpc1B1YktleUhhc2hJbnB1dDogaXNQdWJLZXlIYXNoSW5wdXQsCiAgaXNQdWJLZXlIYXNoT3V0cHV0OiBpc1B1YktleUhhc2hPdXRwdXQsCiAgaXNQdWJLZXlJbnB1dDogaXNQdWJLZXlJbnB1dCwKICBpc1B1YktleU91dHB1dDogaXNQdWJLZXlPdXRwdXQsCiAgaXNTY3JpcHRIYXNoSW5wdXQ6IGlzU2NyaXB0SGFzaElucHV0LAogIGlzU2NyaXB0SGFzaE91dHB1dDogaXNTY3JpcHRIYXNoT3V0cHV0LAogIGlzTXVsdGlzaWdJbnB1dDogaXNNdWx0aXNpZ0lucHV0LAogIGlzTXVsdGlzaWdPdXRwdXQ6IGlzTXVsdGlzaWdPdXRwdXQsCiAgaXNOdWxsRGF0YU91dHB1dDogaXNOdWxsRGF0YU91dHB1dCwKICBjbGFzc2lmeU91dHB1dDogY2xhc3NpZnlPdXRwdXQsCiAgY2xhc3NpZnlJbnB1dDogY2xhc3NpZnlJbnB1dCwKICBwdWJLZXlPdXRwdXQ6IHB1YktleU91dHB1dCwKICBwdWJLZXlIYXNoT3V0cHV0OiBwdWJLZXlIYXNoT3V0cHV0LAogIHNjcmlwdEhhc2hPdXRwdXQ6IHNjcmlwdEhhc2hPdXRwdXQsCiAgbXVsdGlzaWdPdXRwdXQ6IG11bHRpc2lnT3V0cHV0LAogIHB1YktleUlucHV0OiBwdWJLZXlJbnB1dCwKICBwdWJLZXlIYXNoSW5wdXQ6IHB1YktleUhhc2hJbnB1dCwKICBzY3JpcHRIYXNoSW5wdXQ6IHNjcmlwdEhhc2hJbnB1dCwKICBtdWx0aXNpZ0lucHV0OiBtdWx0aXNpZ0lucHV0LAogIG51bGxEYXRhT3V0cHV0OiBudWxsRGF0YU91dHB1dAp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9idWZmZXJ1dGlscyI6MjcsIi4vb3Bjb2RlcyI6MzYsIi4vc2NyaXB0X251bWJlciI6MzgsIi4vdHlwZXMiOjQxLCJiaXA2NiI6MjQsImJ1ZmZlciI6NzYsInR5cGVmb3JjZSI6MTczfV0sMzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CmZ1bmN0aW9uIGRlY29kZSAoYnVmZmVyLCBtYXhMZW5ndGgsIG1pbmltYWwpIHsKICBtYXhMZW5ndGggPSBtYXhMZW5ndGggfHwgNAogIG1pbmltYWwgPSBtaW5pbWFsID09PSB1bmRlZmluZWQgPyB0cnVlIDogbWluaW1hbAoKICB2YXIgbGVuZ3RoID0gYnVmZmVyLmxlbmd0aAogIGlmIChsZW5ndGggPT09IDApIHJldHVybiAwCiAgaWYgKGxlbmd0aCA+IG1heExlbmd0aCkgdGhyb3cgbmV3IFR5cGVFcnJvcignU2NyaXB0IG51bWJlciBvdmVyZmxvdycpCiAgaWYgKG1pbmltYWwpIHsKICAgIGlmICgoYnVmZmVyW2xlbmd0aCAtIDFdICYgMHg3ZikgPT09IDApIHsKICAgICAgaWYgKGxlbmd0aCA8PSAxIHx8IChidWZmZXJbbGVuZ3RoIC0gMl0gJiAweDgwKSA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdOb24tbWluaW1hbGx5IGVuY29kZWQgc2NyaXB0IG51bWJlcicpCiAgICB9CiAgfQoKICAvLyA0MC1iaXQKICBpZiAobGVuZ3RoID09PSA1KSB7CiAgICB2YXIgYSA9IGJ1ZmZlci5yZWFkVUludDMyTEUoMCkKICAgIHZhciBiID0gYnVmZmVyLnJlYWRVSW50OCg0KQoKICAgIGlmIChiICYgMHg4MCkgcmV0dXJuIC0oKGIgJiB+MHg4MCkgKiAweDEwMDAwMDAwMCArIGEpCiAgICByZXR1cm4gYiAqIDB4MTAwMDAwMDAwICsgYQogIH0KCiAgdmFyIHJlc3VsdCA9IDAKCiAgLy8gMzItYml0IC8gMjQtYml0IC8gMTYtYml0IC8gOC1iaXQKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CiAgICByZXN1bHQgfD0gYnVmZmVyW2ldIDw8ICg4ICogaSkKICB9CgogIGlmIChidWZmZXJbbGVuZ3RoIC0gMV0gJiAweDgwKSByZXR1cm4gLShyZXN1bHQgJiB+KDB4ODAgPDwgKDggKiAobGVuZ3RoIC0gMSkpKSkKICByZXR1cm4gcmVzdWx0Cn0KCmZ1bmN0aW9uIHNjcmlwdE51bVNpemUgKGkpIHsKICByZXR1cm4gaSA+IDB4N2ZmZmZmZmYgPyA1CiAgOiBpID4gMHg3ZmZmZmYgPyA0CiAgOiBpID4gMHg3ZmZmID8gMwogIDogaSA+IDB4N2YgPyAyCiAgOiBpID4gMHgwMCA/IDEKICA6IDAKfQoKZnVuY3Rpb24gZW5jb2RlIChudW1iZXIpIHsKICB2YXIgdmFsdWUgPSBNYXRoLmFicyhudW1iZXIpCiAgdmFyIHNpemUgPSBzY3JpcHROdW1TaXplKHZhbHVlKQogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKHNpemUpCiAgdmFyIG5lZ2F0aXZlID0gbnVtYmVyIDwgMAoKICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkgewogICAgYnVmZmVyLndyaXRlVUludDgodmFsdWUgJiAweGZmLCBpKQogICAgdmFsdWUgPj49IDgKICB9CgogIGlmIChidWZmZXJbc2l6ZSAtIDFdICYgMHg4MCkgewogICAgYnVmZmVyLndyaXRlVUludDgobmVnYXRpdmUgPyAweDgwIDogMHgwMCwgc2l6ZSAtIDEpCiAgfSBlbHNlIGlmIChuZWdhdGl2ZSkgewogICAgYnVmZmVyW3NpemUgLSAxXSB8PSAweDgwCiAgfQoKICByZXR1cm4gYnVmZmVyCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGRlY29kZTogZGVjb2RlLAogIGVuY29kZTogZW5jb2RlCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjc2fV0sMzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBiY3J5cHRvID0gcmVxdWlyZSgnLi9jcnlwdG8nKQp2YXIgYnNjcmlwdCA9IHJlcXVpcmUoJy4vc2NyaXB0JykKdmFyIGJ1ZmZlcnV0aWxzID0gcmVxdWlyZSgnLi9idWZmZXJ1dGlscycpCnZhciBvcGNvZGVzID0gcmVxdWlyZSgnLi9vcGNvZGVzJykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQoKZnVuY3Rpb24gVHJhbnNhY3Rpb24gKCkgewogIHRoaXMudmVyc2lvbiA9IDEKICB0aGlzLmxvY2t0aW1lID0gMAogIHRoaXMuaW5zID0gW10KICB0aGlzLm91dHMgPSBbXQp9CgpUcmFuc2FjdGlvbi5ERUZBVUxUX1NFUVVFTkNFID0gMHhmZmZmZmZmZgpUcmFuc2FjdGlvbi5TSUdIQVNIX0FMTCA9IDB4MDEKVHJhbnNhY3Rpb24uU0lHSEFTSF9OT05FID0gMHgwMgpUcmFuc2FjdGlvbi5TSUdIQVNIX1NJTkdMRSA9IDB4MDMKVHJhbnNhY3Rpb24uU0lHSEFTSF9BTllPTkVDQU5QQVkgPSAweDgwCgpUcmFuc2FjdGlvbi5mcm9tQnVmZmVyID0gZnVuY3Rpb24gKGJ1ZmZlciwgX19ub1N0cmljdCkgewogIHZhciBvZmZzZXQgPSAwCiAgZnVuY3Rpb24gcmVhZFNsaWNlIChuKSB7CiAgICBvZmZzZXQgKz0gbgogICAgcmV0dXJuIGJ1ZmZlci5zbGljZShvZmZzZXQgLSBuLCBvZmZzZXQpCiAgfQoKICBmdW5jdGlvbiByZWFkVUludDMyICgpIHsKICAgIHZhciBpID0gYnVmZmVyLnJlYWRVSW50MzJMRShvZmZzZXQpCiAgICBvZmZzZXQgKz0gNAogICAgcmV0dXJuIGkKICB9CgogIGZ1bmN0aW9uIHJlYWRVSW50NjQgKCkgewogICAgdmFyIGkgPSBidWZmZXJ1dGlscy5yZWFkVUludDY0TEUoYnVmZmVyLCBvZmZzZXQpCiAgICBvZmZzZXQgKz0gOAogICAgcmV0dXJuIGkKICB9CgogIGZ1bmN0aW9uIHJlYWRWYXJJbnQgKCkgewogICAgdmFyIHZpID0gYnVmZmVydXRpbHMucmVhZFZhckludChidWZmZXIsIG9mZnNldCkKICAgIG9mZnNldCArPSB2aS5zaXplCiAgICByZXR1cm4gdmkubnVtYmVyCiAgfQoKICBmdW5jdGlvbiByZWFkU2NyaXB0ICgpIHsKICAgIHJldHVybiByZWFkU2xpY2UocmVhZFZhckludCgpKQogIH0KCiAgdmFyIHR4ID0gbmV3IFRyYW5zYWN0aW9uKCkKICB0eC52ZXJzaW9uID0gcmVhZFVJbnQzMigpCgogIHZhciB2aW5MZW4gPSByZWFkVmFySW50KCkKICBmb3IgKHZhciBpID0gMDsgaSA8IHZpbkxlbjsgKytpKSB7CiAgICB0eC5pbnMucHVzaCh7CiAgICAgIGhhc2g6IHJlYWRTbGljZSgzMiksCiAgICAgIGluZGV4OiByZWFkVUludDMyKCksCiAgICAgIHNjcmlwdDogcmVhZFNjcmlwdCgpLAogICAgICBzZXF1ZW5jZTogcmVhZFVJbnQzMigpCiAgICB9KQogIH0KCiAgdmFyIHZvdXRMZW4gPSByZWFkVmFySW50KCkKICBmb3IgKGkgPSAwOyBpIDwgdm91dExlbjsgKytpKSB7CiAgICB0eC5vdXRzLnB1c2goewogICAgICB2YWx1ZTogcmVhZFVJbnQ2NCgpLAogICAgICBzY3JpcHQ6IHJlYWRTY3JpcHQoKQogICAgfSkKICB9CgogIHR4LmxvY2t0aW1lID0gcmVhZFVJbnQzMigpCgogIGlmIChfX25vU3RyaWN0KSByZXR1cm4gdHgKICBpZiAob2Zmc2V0ICE9PSBidWZmZXIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyB1bmV4cGVjdGVkIGRhdGEnKQoKICByZXR1cm4gdHgKfQoKVHJhbnNhY3Rpb24uZnJvbUhleCA9IGZ1bmN0aW9uIChoZXgpIHsKICByZXR1cm4gVHJhbnNhY3Rpb24uZnJvbUJ1ZmZlcihuZXcgQnVmZmVyKGhleCwgJ2hleCcpKQp9CgpUcmFuc2FjdGlvbi5pc0NvaW5iYXNlSGFzaCA9IGZ1bmN0aW9uIChidWZmZXIpIHsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmV2ZXJ5LmNhbGwoYnVmZmVyLCBmdW5jdGlvbiAoeCkgewogICAgcmV0dXJuIHggPT09IDAKICB9KQp9Cgp2YXIgRU1QVFlfU0NSSVBUID0gbmV3IEJ1ZmZlcigwKQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLmFkZElucHV0ID0gZnVuY3Rpb24gKGhhc2gsIGluZGV4LCBzZXF1ZW5jZSwgc2NyaXB0U2lnKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKAogICAgdHlwZXMuSGFzaDI1NmJpdCwKICAgIHR5cGVzLlVJbnQzMiwKICAgIHR5cGVzLm1heWJlKHR5cGVzLlVJbnQzMiksCiAgICB0eXBlcy5tYXliZSh0eXBlcy5CdWZmZXIpCiAgKSwgYXJndW1lbnRzKQoKICBpZiAodHlwZXMuTnVsbChzZXF1ZW5jZSkpIHsKICAgIHNlcXVlbmNlID0gVHJhbnNhY3Rpb24uREVGQVVMVF9TRVFVRU5DRQogIH0KCiAgLy8gQWRkIHRoZSBpbnB1dCBhbmQgcmV0dXJuIHRoZSBpbnB1dCdzIGluZGV4CiAgcmV0dXJuICh0aGlzLmlucy5wdXNoKHsKICAgIGhhc2g6IGhhc2gsCiAgICBpbmRleDogaW5kZXgsCiAgICBzY3JpcHQ6IHNjcmlwdFNpZyB8fCBFTVBUWV9TQ1JJUFQsCiAgICBzZXF1ZW5jZTogc2VxdWVuY2UKICB9KSAtIDEpCn0KClRyYW5zYWN0aW9uLnByb3RvdHlwZS5hZGRPdXRwdXQgPSBmdW5jdGlvbiAoc2NyaXB0UHViS2V5LCB2YWx1ZSkgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5CdWZmZXIsIHR5cGVzLlVJbnQ1MyksIGFyZ3VtZW50cykKCiAgLy8gQWRkIHRoZSBvdXRwdXQgYW5kIHJldHVybiB0aGUgb3V0cHV0J3MgaW5kZXgKICByZXR1cm4gKHRoaXMub3V0cy5wdXNoKHsKICAgIHNjcmlwdDogc2NyaXB0UHViS2V5LAogICAgdmFsdWU6IHZhbHVlCiAgfSkgLSAxKQp9CgpUcmFuc2FjdGlvbi5wcm90b3R5cGUuYnl0ZUxlbmd0aCA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBzY3JpcHRTaXplIChzb21lU2NyaXB0KSB7CiAgICB2YXIgbGVuZ3RoID0gc29tZVNjcmlwdC5sZW5ndGgKCiAgICByZXR1cm4gYnVmZmVydXRpbHMudmFySW50U2l6ZShsZW5ndGgpICsgbGVuZ3RoCiAgfQoKICByZXR1cm4gKAogICAgOCArCiAgICBidWZmZXJ1dGlscy52YXJJbnRTaXplKHRoaXMuaW5zLmxlbmd0aCkgKwogICAgYnVmZmVydXRpbHMudmFySW50U2l6ZSh0aGlzLm91dHMubGVuZ3RoKSArCiAgICB0aGlzLmlucy5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgaW5wdXQpIHsgcmV0dXJuIHN1bSArIDQwICsgc2NyaXB0U2l6ZShpbnB1dC5zY3JpcHQpIH0sIDApICsKICAgIHRoaXMub3V0cy5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgb3V0cHV0KSB7IHJldHVybiBzdW0gKyA4ICsgc2NyaXB0U2l6ZShvdXRwdXQuc2NyaXB0KSB9LCAwKQogICkKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkgewogIHZhciBuZXdUeCA9IG5ldyBUcmFuc2FjdGlvbigpCiAgbmV3VHgudmVyc2lvbiA9IHRoaXMudmVyc2lvbgogIG5ld1R4LmxvY2t0aW1lID0gdGhpcy5sb2NrdGltZQoKICBuZXdUeC5pbnMgPSB0aGlzLmlucy5tYXAoZnVuY3Rpb24gKHR4SW4pIHsKICAgIHJldHVybiB7CiAgICAgIGhhc2g6IHR4SW4uaGFzaCwKICAgICAgaW5kZXg6IHR4SW4uaW5kZXgsCiAgICAgIHNjcmlwdDogdHhJbi5zY3JpcHQsCiAgICAgIHNlcXVlbmNlOiB0eEluLnNlcXVlbmNlCiAgICB9CiAgfSkKCiAgbmV3VHgub3V0cyA9IHRoaXMub3V0cy5tYXAoZnVuY3Rpb24gKHR4T3V0KSB7CiAgICByZXR1cm4gewogICAgICBzY3JpcHQ6IHR4T3V0LnNjcmlwdCwKICAgICAgdmFsdWU6IHR4T3V0LnZhbHVlCiAgICB9CiAgfSkKCiAgcmV0dXJuIG5ld1R4Cn0KCnZhciBPTkUgPSBuZXcgQnVmZmVyKCcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxJywgJ2hleCcpCnZhciBWQUxVRV9VSU5UNjRfTUFYID0gbmV3IEJ1ZmZlcignZmZmZmZmZmZmZmZmZmZmZicsICdoZXgnKQoKLyoqCiAqIEhhc2ggdHJhbnNhY3Rpb24gZm9yIHNpZ25pbmcgYSBzcGVjaWZpYyBpbnB1dC4KICoKICogQml0Y29pbiB1c2VzIGEgZGlmZmVyZW50IGhhc2ggZm9yIGVhY2ggc2lnbmVkIHRyYW5zYWN0aW9uIGlucHV0LgogKiBUaGlzIG1ldGhvZCBjb3BpZXMgdGhlIHRyYW5zYWN0aW9uLCBtYWtlcyB0aGUgbmVjZXNzYXJ5IGNoYW5nZXMgYmFzZWQgb24gdGhlCiAqIGhhc2hUeXBlLCBhbmQgdGhlbiBoYXNoZXMgdGhlIHJlc3VsdC4KICogVGhpcyBoYXNoIGNhbiB0aGVuIGJlIHVzZWQgdG8gc2lnbiB0aGUgcHJvdmlkZWQgdHJhbnNhY3Rpb24gaW5wdXQuCiAqLwpUcmFuc2FjdGlvbi5wcm90b3R5cGUuaGFzaEZvclNpZ25hdHVyZSA9IGZ1bmN0aW9uIChpbkluZGV4LCBwcmV2T3V0U2NyaXB0LCBoYXNoVHlwZSkgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5VSW50MzIsIHR5cGVzLkJ1ZmZlciwgLyogdHlwZXMuVUludDggKi8gdHlwZXMuTnVtYmVyKSwgYXJndW1lbnRzKQoKICAvLyBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbi9iaXRjb2luL2Jsb2IvbWFzdGVyL3NyYy90ZXN0L3NpZ2hhc2hfdGVzdHMuY3BwI0wyOQogIGlmIChpbkluZGV4ID49IHRoaXMuaW5zLmxlbmd0aCkgcmV0dXJuIE9ORQoKICB2YXIgdHhUbXAgPSB0aGlzLmNsb25lKCkKCiAgLy8gaW4gY2FzZSBjb25jYXRlbmF0aW5nIHR3byBzY3JpcHRzIGVuZHMgdXAgd2l0aCB0d28gY29kZXNlcGFyYXRvcnMsCiAgLy8gb3IgYW4gZXh0cmEgb25lIGF0IHRoZSBlbmQsIHRoaXMgcHJldmVudHMgYWxsIHRob3NlIHBvc3NpYmxlIGluY29tcGF0aWJpbGl0aWVzLgogIHZhciBoYXNoU2NyaXB0ID0gYnNjcmlwdC5jb21waWxlKGJzY3JpcHQuZGVjb21waWxlKHByZXZPdXRTY3JpcHQpLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgcmV0dXJuIHggIT09IG9wY29kZXMuT1BfQ09ERVNFUEFSQVRPUgogIH0pKQogIHZhciBpCgogIC8vIGJsYW5rIG91dCBvdGhlciBpbnB1dHMnIHNpZ25hdHVyZXMKICB0eFRtcC5pbnMuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQpIHsgaW5wdXQuc2NyaXB0ID0gRU1QVFlfU0NSSVBUIH0pCiAgdHhUbXAuaW5zW2luSW5kZXhdLnNjcmlwdCA9IGhhc2hTY3JpcHQKCiAgLy8gYmxhbmsgb3V0IHNvbWUgb2YgdGhlIGlucHV0cwogIGlmICgoaGFzaFR5cGUgJiAweDFmKSA9PT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9OT05FKSB7CiAgICAvLyB3aWxkY2FyZCBwYXllZQogICAgdHhUbXAub3V0cyA9IFtdCgogICAgLy8gbGV0IHRoZSBvdGhlcnMgdXBkYXRlIGF0IHdpbGwKICAgIHR4VG1wLmlucy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCwgaSkgewogICAgICBpZiAoaSAhPT0gaW5JbmRleCkgewogICAgICAgIGlucHV0LnNlcXVlbmNlID0gMAogICAgICB9CiAgICB9KQogIH0gZWxzZSBpZiAoKGhhc2hUeXBlICYgMHgxZikgPT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfU0lOR0xFKSB7CiAgICB2YXIgbk91dCA9IGluSW5kZXgKCiAgICAvLyBvbmx5IGxvY2staW4gdGhlIHR4T3V0IHBheWVlIGF0IHNhbWUgaW5kZXggYXMgdHhJbgogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYml0Y29pbi9ibG9iL21hc3Rlci9zcmMvdGVzdC9zaWdoYXNoX3Rlc3RzLmNwcCNMNjAKICAgIGlmIChuT3V0ID49IHRoaXMub3V0cy5sZW5ndGgpIHJldHVybiBPTkUKCiAgICB0eFRtcC5vdXRzID0gdHhUbXAub3V0cy5zbGljZSgwLCBuT3V0ICsgMSkKCiAgICAvLyBibGFuayBhbGwgb3RoZXIgb3V0cHV0cyAoY2xlYXIgc2NyaXB0UHViS2V5LCB2YWx1ZSA9PT0gLTEpCiAgICB2YXIgc3R1Yk91dCA9IHsKICAgICAgc2NyaXB0OiBFTVBUWV9TQ1JJUFQsCiAgICAgIHZhbHVlQnVmZmVyOiBWQUxVRV9VSU5UNjRfTUFYCiAgICB9CgogICAgZm9yIChpID0gMDsgaSA8IG5PdXQ7IGkrKykgewogICAgICB0eFRtcC5vdXRzW2ldID0gc3R1Yk91dAogICAgfQoKICAgIC8vIGxldCB0aGUgb3RoZXJzIHVwZGF0ZSBhdCB3aWxsCiAgICB0eFRtcC5pbnMuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQsIGkpIHsKICAgICAgaWYgKGkgIT09IGluSW5kZXgpIHsKICAgICAgICBpbnB1dC5zZXF1ZW5jZSA9IDAKICAgICAgfQogICAgfSkKICB9CgogIC8vIGJsYW5rIG91dCBvdGhlciBpbnB1dHMgY29tcGxldGVseSwgbm90IHJlY29tbWVuZGVkIGZvciBvcGVuIHRyYW5zYWN0aW9ucwogIGlmIChoYXNoVHlwZSAmIFRyYW5zYWN0aW9uLlNJR0hBU0hfQU5ZT05FQ0FOUEFZKSB7CiAgICB0eFRtcC5pbnNbMF0gPSB0eFRtcC5pbnNbaW5JbmRleF0KICAgIHR4VG1wLmlucyA9IHR4VG1wLmlucy5zbGljZSgwLCAxKQogIH0KCiAgLy8gc2VyaWFsaXplIGFuZCBoYXNoCiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIodHhUbXAuYnl0ZUxlbmd0aCgpICsgNCkKICBidWZmZXIud3JpdGVJbnQzMkxFKGhhc2hUeXBlLCBidWZmZXIubGVuZ3RoIC0gNCkKICB0eFRtcC50b0J1ZmZlcigpLmNvcHkoYnVmZmVyLCAwKQoKICByZXR1cm4gYmNyeXB0by5oYXNoMjU2KGJ1ZmZlcikKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLmdldEhhc2ggPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGJjcnlwdG8uaGFzaDI1Nih0aGlzLnRvQnVmZmVyKCkpCn0KClRyYW5zYWN0aW9uLnByb3RvdHlwZS5nZXRJZCA9IGZ1bmN0aW9uICgpIHsKICAvLyB0cmFuc2FjdGlvbiBoYXNoJ3MgYXJlIGRpc3BsYXllZCBpbiByZXZlcnNlIG9yZGVyCiAgcmV0dXJuIFtdLnJldmVyc2UuY2FsbCh0aGlzLmdldEhhc2goKSkudG9TdHJpbmcoJ2hleCcpCn0KClRyYW5zYWN0aW9uLnByb3RvdHlwZS50b0J1ZmZlciA9IGZ1bmN0aW9uICgpIHsKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcih0aGlzLmJ5dGVMZW5ndGgoKSkKCiAgdmFyIG9mZnNldCA9IDAKICBmdW5jdGlvbiB3cml0ZVNsaWNlIChzbGljZSkgewogICAgc2xpY2UuY29weShidWZmZXIsIG9mZnNldCkKICAgIG9mZnNldCArPSBzbGljZS5sZW5ndGgKICB9CgogIGZ1bmN0aW9uIHdyaXRlVUludDMyIChpKSB7CiAgICBidWZmZXIud3JpdGVVSW50MzJMRShpLCBvZmZzZXQpCiAgICBvZmZzZXQgKz0gNAogIH0KCiAgZnVuY3Rpb24gd3JpdGVVSW50NjQgKGkpIHsKICAgIGJ1ZmZlcnV0aWxzLndyaXRlVUludDY0TEUoYnVmZmVyLCBpLCBvZmZzZXQpCiAgICBvZmZzZXQgKz0gOAogIH0KCiAgZnVuY3Rpb24gd3JpdGVWYXJJbnQgKGkpIHsKICAgIHZhciBuID0gYnVmZmVydXRpbHMud3JpdGVWYXJJbnQoYnVmZmVyLCBpLCBvZmZzZXQpCiAgICBvZmZzZXQgKz0gbgogIH0KCiAgd3JpdGVVSW50MzIodGhpcy52ZXJzaW9uKQogIHdyaXRlVmFySW50KHRoaXMuaW5zLmxlbmd0aCkKCiAgdGhpcy5pbnMuZm9yRWFjaChmdW5jdGlvbiAodHhJbikgewogICAgd3JpdGVTbGljZSh0eEluLmhhc2gpCiAgICB3cml0ZVVJbnQzMih0eEluLmluZGV4KQogICAgd3JpdGVWYXJJbnQodHhJbi5zY3JpcHQubGVuZ3RoKQogICAgd3JpdGVTbGljZSh0eEluLnNjcmlwdCkKICAgIHdyaXRlVUludDMyKHR4SW4uc2VxdWVuY2UpCiAgfSkKCiAgd3JpdGVWYXJJbnQodGhpcy5vdXRzLmxlbmd0aCkKICB0aGlzLm91dHMuZm9yRWFjaChmdW5jdGlvbiAodHhPdXQpIHsKICAgIGlmICghdHhPdXQudmFsdWVCdWZmZXIpIHsKICAgICAgd3JpdGVVSW50NjQodHhPdXQudmFsdWUpCiAgICB9IGVsc2UgewogICAgICB3cml0ZVNsaWNlKHR4T3V0LnZhbHVlQnVmZmVyKQogICAgfQoKICAgIHdyaXRlVmFySW50KHR4T3V0LnNjcmlwdC5sZW5ndGgpCiAgICB3cml0ZVNsaWNlKHR4T3V0LnNjcmlwdCkKICB9KQoKICB3cml0ZVVJbnQzMih0aGlzLmxvY2t0aW1lKQoKICByZXR1cm4gYnVmZmVyCn0KClRyYW5zYWN0aW9uLnByb3RvdHlwZS50b0hleCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy50b0J1ZmZlcigpLnRvU3RyaW5nKCdoZXgnKQp9CgpUcmFuc2FjdGlvbi5wcm90b3R5cGUuc2V0SW5wdXRTY3JpcHQgPSBmdW5jdGlvbiAoaW5kZXgsIHNjcmlwdFNpZykgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5OdW1iZXIsIHR5cGVzLkJ1ZmZlciksIGFyZ3VtZW50cykKCiAgdGhpcy5pbnNbaW5kZXhdLnNjcmlwdCA9IHNjcmlwdFNpZwp9Cgptb2R1bGUuZXhwb3J0cyA9IFRyYW5zYWN0aW9uCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9idWZmZXJ1dGlscyI6MjcsIi4vY3J5cHRvIjoyOCwiLi9vcGNvZGVzIjozNiwiLi9zY3JpcHQiOjM3LCIuL3R5cGVzIjo0MSwiYnVmZmVyIjo3NiwidHlwZWZvcmNlIjoxNzN9XSw0MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJhZGRyZXNzID0gcmVxdWlyZSgnLi9hZGRyZXNzJykKdmFyIGJjcnlwdG8gPSByZXF1aXJlKCcuL2NyeXB0bycpCnZhciBic2NyaXB0ID0gcmVxdWlyZSgnLi9zY3JpcHQnKQp2YXIgYnVmZmVyRXF1YWxzID0gcmVxdWlyZSgnYnVmZmVyLWVxdWFscycpCnZhciBuZXR3b3JrcyA9IHJlcXVpcmUoJy4vbmV0d29ya3MnKQp2YXIgb3BzID0gcmVxdWlyZSgnLi9vcGNvZGVzJykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQoKdmFyIEVDUGFpciA9IHJlcXVpcmUoJy4vZWNwYWlyJykKdmFyIEVDU2lnbmF0dXJlID0gcmVxdWlyZSgnLi9lY3NpZ25hdHVyZScpCnZhciBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb24nKQoKLy8gcmUtb3JkZXJzIHNpZ25hdHVyZXMgdG8gbWF0Y2ggcHViS2V5cywgZmlsbHMgdW5kZWZpbmVkIG90aGVyd2lzZQpmdW5jdGlvbiBmaXhNU1NpZ25hdHVyZXMgKHRyYW5zYWN0aW9uLCB2aW4sIHB1YktleXMsIHNpZ25hdHVyZXMsIHByZXZPdXRTY3JpcHQsIGhhc2hUeXBlLCBza2lwUHViS2V5KSB7CiAgLy8gbWFpbnRhaW4gYSBsb2NhbCBjb3B5IG9mIHVubWF0Y2hlZCBzaWduYXR1cmVzCiAgdmFyIHVubWF0Y2hlZCA9IHNpZ25hdHVyZXMuc2xpY2UoKQogIHZhciBjYWNoZSA9IHt9CgogIHJldHVybiBwdWJLZXlzLm1hcChmdW5jdGlvbiAocHViS2V5KSB7CiAgICAvLyBza2lwIG9wdGlvbmFsbHkgcHJvdmlkZWQgcHViS2V5CiAgICBpZiAoc2tpcFB1YktleSAmJiBidWZmZXJFcXVhbHMoc2tpcFB1YktleSwgcHViS2V5KSkgcmV0dXJuIHVuZGVmaW5lZAoKICAgIHZhciBtYXRjaGVkCiAgICB2YXIga2V5UGFpcjIgPSBFQ1BhaXIuZnJvbVB1YmxpY0tleUJ1ZmZlcihwdWJLZXkpCgogICAgLy8gY2hlY2sgZm9yIGEgbWF0Y2hpbmcgc2lnbmF0dXJlCiAgICB1bm1hdGNoZWQuc29tZShmdW5jdGlvbiAoc2lnbmF0dXJlLCBpKSB7CiAgICAgIC8vIHNraXAgaWYgdW5kZWZpbmVkIHx8IE9QXzAKICAgICAgaWYgKCFzaWduYXR1cmUpIHJldHVybiBmYWxzZQoKICAgICAgdmFyIHNpZ25hdHVyZUhhc2ggPSBjYWNoZVtoYXNoVHlwZV0gPSBjYWNoZVtoYXNoVHlwZV0gfHwgdHJhbnNhY3Rpb24uaGFzaEZvclNpZ25hdHVyZSh2aW4sIHByZXZPdXRTY3JpcHQsIGhhc2hUeXBlKQogICAgICBpZiAoIWtleVBhaXIyLnZlcmlmeShzaWduYXR1cmVIYXNoLCBzaWduYXR1cmUpKSByZXR1cm4gZmFsc2UKCiAgICAgIC8vIHJlbW92ZSBtYXRjaGVkIHNpZ25hdHVyZSBmcm9tIHVubWF0Y2hlZAogICAgICB1bm1hdGNoZWRbaV0gPSB1bmRlZmluZWQKICAgICAgbWF0Y2hlZCA9IHNpZ25hdHVyZQoKICAgICAgcmV0dXJuIHRydWUKICAgIH0pCgogICAgcmV0dXJuIG1hdGNoZWQgfHwgdW5kZWZpbmVkCiAgfSkKfQoKZnVuY3Rpb24gZXh0cmFjdElucHV0ICh0cmFuc2FjdGlvbiwgdHhJbiwgdmluKSB7CiAgdmFyIHJlZGVlbVNjcmlwdAogIHZhciBzY3JpcHRTaWcgPSB0eEluLnNjcmlwdAogIHZhciBzY3JpcHRTaWdDaHVua3MgPSBic2NyaXB0LmRlY29tcGlsZShzY3JpcHRTaWcpCgogIHZhciBwcmV2T3V0U2NyaXB0CiAgdmFyIHByZXZPdXRUeXBlID0gYnNjcmlwdC5jbGFzc2lmeUlucHV0KHNjcmlwdFNpZywgdHJ1ZSkKICB2YXIgc2NyaXB0VHlwZQoKICAvLyBSZS1jbGFzc2lmeSBpZiBzY3JpcHRIYXNoCiAgaWYgKHByZXZPdXRUeXBlID09PSAnc2NyaXB0aGFzaCcpIHsKICAgIHJlZGVlbVNjcmlwdCA9IHNjcmlwdFNpZ0NodW5rcy5zbGljZSgtMSlbMF0KICAgIHByZXZPdXRTY3JpcHQgPSBic2NyaXB0LnNjcmlwdEhhc2hPdXRwdXQoYmNyeXB0by5oYXNoMTYwKHJlZGVlbVNjcmlwdCkpCgogICAgc2NyaXB0U2lnID0gYnNjcmlwdC5jb21waWxlKHNjcmlwdFNpZ0NodW5rcy5zbGljZSgwLCAtMSkpCiAgICBzY3JpcHRTaWdDaHVua3MgPSBzY3JpcHRTaWdDaHVua3Muc2xpY2UoMCwgLTEpCgogICAgc2NyaXB0VHlwZSA9IGJzY3JpcHQuY2xhc3NpZnlJbnB1dChzY3JpcHRTaWcsIHRydWUpCiAgfSBlbHNlIHsKICAgIHNjcmlwdFR5cGUgPSBwcmV2T3V0VHlwZQogIH0KCiAgLy8gcHJlLWVtcHQgcmVkZWVtU2NyaXB0IGRlY29tcGlsYXRpb24KICB2YXIgcmVkZWVtU2NyaXB0Q2h1bmtzCiAgaWYgKHJlZGVlbVNjcmlwdCkgewogICAgcmVkZWVtU2NyaXB0Q2h1bmtzID0gYnNjcmlwdC5kZWNvbXBpbGUocmVkZWVtU2NyaXB0KQogIH0KCiAgLy8gRXh0cmFjdCBoYXNoVHlwZSwgcHViS2V5cyBhbmQgc2lnbmF0dXJlcwogIHZhciBoYXNoVHlwZSwgcGFyc2VkLCBwdWJLZXlzLCBzaWduYXR1cmVzCgogIHN3aXRjaCAoc2NyaXB0VHlwZSkgewogICAgY2FzZSAncHVia2V5aGFzaCc6CiAgICAgIHBhcnNlZCA9IEVDU2lnbmF0dXJlLnBhcnNlU2NyaXB0U2lnbmF0dXJlKHNjcmlwdFNpZ0NodW5rc1swXSkKICAgICAgaGFzaFR5cGUgPSBwYXJzZWQuaGFzaFR5cGUKICAgICAgcHViS2V5cyA9IHNjcmlwdFNpZ0NodW5rcy5zbGljZSgxKQogICAgICBzaWduYXR1cmVzID0gW3BhcnNlZC5zaWduYXR1cmVdCiAgICAgIHByZXZPdXRTY3JpcHQgPSBic2NyaXB0LnB1YktleUhhc2hPdXRwdXQoYmNyeXB0by5oYXNoMTYwKHB1YktleXNbMF0pKQoKICAgICAgYnJlYWsKCiAgICBjYXNlICdwdWJrZXknOgogICAgICBwYXJzZWQgPSBFQ1NpZ25hdHVyZS5wYXJzZVNjcmlwdFNpZ25hdHVyZShzY3JpcHRTaWdDaHVua3NbMF0pCiAgICAgIGhhc2hUeXBlID0gcGFyc2VkLmhhc2hUeXBlCiAgICAgIHNpZ25hdHVyZXMgPSBbcGFyc2VkLnNpZ25hdHVyZV0KCiAgICAgIGlmIChyZWRlZW1TY3JpcHQpIHsKICAgICAgICBwdWJLZXlzID0gcmVkZWVtU2NyaXB0Q2h1bmtzLnNsaWNlKDAsIDEpCiAgICAgIH0KCiAgICAgIGJyZWFrCgogICAgY2FzZSAnbXVsdGlzaWcnOgogICAgICBzaWduYXR1cmVzID0gc2NyaXB0U2lnQ2h1bmtzLnNsaWNlKDEpLm1hcChmdW5jdGlvbiAoY2h1bmspIHsKICAgICAgICBpZiAoY2h1bmsgPT09IG9wcy5PUF8wKSByZXR1cm4gdW5kZWZpbmVkCgogICAgICAgIHZhciBwYXJzZWQgPSBFQ1NpZ25hdHVyZS5wYXJzZVNjcmlwdFNpZ25hdHVyZShjaHVuaykKICAgICAgICBoYXNoVHlwZSA9IHBhcnNlZC5oYXNoVHlwZQoKICAgICAgICByZXR1cm4gcGFyc2VkLnNpZ25hdHVyZQogICAgICB9KQoKICAgICAgaWYgKHJlZGVlbVNjcmlwdCkgewogICAgICAgIHB1YktleXMgPSByZWRlZW1TY3JpcHRDaHVua3Muc2xpY2UoMSwgLTIpCgogICAgICAgIGlmIChwdWJLZXlzLmxlbmd0aCAhPT0gc2lnbmF0dXJlcy5sZW5ndGgpIHsKICAgICAgICAgIHNpZ25hdHVyZXMgPSBmaXhNU1NpZ25hdHVyZXModHJhbnNhY3Rpb24sIHZpbiwgcHViS2V5cywgc2lnbmF0dXJlcywgcmVkZWVtU2NyaXB0LCBoYXNoVHlwZSwgcmVkZWVtU2NyaXB0KQogICAgICAgIH0KICAgICAgfQoKICAgICAgYnJlYWsKICB9CgogIHJldHVybiB7CiAgICBoYXNoVHlwZTogaGFzaFR5cGUsCiAgICBwcmV2T3V0U2NyaXB0OiBwcmV2T3V0U2NyaXB0LAogICAgcHJldk91dFR5cGU6IHByZXZPdXRUeXBlLAogICAgcHViS2V5czogcHViS2V5cywKICAgIHJlZGVlbVNjcmlwdDogcmVkZWVtU2NyaXB0LAogICAgc2NyaXB0VHlwZTogc2NyaXB0VHlwZSwKICAgIHNpZ25hdHVyZXM6IHNpZ25hdHVyZXMKICB9Cn0KCmZ1bmN0aW9uIFRyYW5zYWN0aW9uQnVpbGRlciAobmV0d29yaykgewogIHRoaXMucHJldlR4TWFwID0ge30KICB0aGlzLnByZXZPdXRTY3JpcHRzID0ge30KICB0aGlzLnByZXZPdXRUeXBlcyA9IHt9CiAgdGhpcy5uZXR3b3JrID0gbmV0d29yayB8fCBuZXR3b3Jrcy5iaXRjb2luCgogIHRoaXMuaW5wdXRzID0gW10KICB0aGlzLnR4ID0gbmV3IFRyYW5zYWN0aW9uKCkKfQoKVHJhbnNhY3Rpb25CdWlsZGVyLnByb3RvdHlwZS5zZXRMb2NrVGltZSA9IGZ1bmN0aW9uIChsb2NrdGltZSkgewogIHR5cGVmb3JjZSh0eXBlcy5VSW50MzIsIGxvY2t0aW1lKQoKICAvLyBpZiBhbnkgc2lnbmF0dXJlcyBleGlzdCwgdGhyb3cKICBpZiAodGhpcy5pbnB1dHMuc29tZShmdW5jdGlvbiAoaW5wdXQpIHsKICAgIGlmICghaW5wdXQuc2lnbmF0dXJlcykgcmV0dXJuIGZhbHNlCgogICAgcmV0dXJuIGlucHV0LnNpZ25hdHVyZXMuc29tZShmdW5jdGlvbiAocykgeyByZXR1cm4gcyB9KQogIH0pKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vLCB0aGlzIHdvdWxkIGludmFsaWRhdGUgc2lnbmF0dXJlcycpCiAgfQoKICB0aGlzLnR4LmxvY2t0aW1lID0gbG9ja3RpbWUKfQoKVHJhbnNhY3Rpb25CdWlsZGVyLmZyb21UcmFuc2FjdGlvbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgbmV0d29yaykgewogIHZhciB0eGIgPSBuZXcgVHJhbnNhY3Rpb25CdWlsZGVyKG5ldHdvcmspCgogIC8vIENvcHkgb3RoZXIgdHJhbnNhY3Rpb24gZmllbGRzCiAgdHhiLnR4LnZlcnNpb24gPSB0cmFuc2FjdGlvbi52ZXJzaW9uCiAgdHhiLnR4LmxvY2t0aW1lID0gdHJhbnNhY3Rpb24ubG9ja3RpbWUKCiAgLy8gRXh0cmFjdC9hZGQgaW5wdXRzCiAgdHJhbnNhY3Rpb24uaW5zLmZvckVhY2goZnVuY3Rpb24gKHR4SW4pIHsKICAgIHR4Yi5hZGRJbnB1dCh0eEluLmhhc2gsIHR4SW4uaW5kZXgsIHR4SW4uc2VxdWVuY2UpCiAgfSkKCiAgLy8gRXh0cmFjdC9hZGQgb3V0cHV0cwogIHRyYW5zYWN0aW9uLm91dHMuZm9yRWFjaChmdW5jdGlvbiAodHhPdXQpIHsKICAgIHR4Yi5hZGRPdXRwdXQodHhPdXQuc2NyaXB0LCB0eE91dC52YWx1ZSkKICB9KQoKICAvLyBFeHRyYWN0L2FkZCBzaWduYXR1cmVzCiAgdHhiLmlucHV0cyA9IHRyYW5zYWN0aW9uLmlucy5tYXAoZnVuY3Rpb24gKHR4SW4sIHZpbikgewogICAgLy8gVE9ETzogdmVyaWZ5IHdoZXRoZXIgZXh0cmFjdElucHV0IGlzIHNhbmUgd2l0aCBjb2luYmFzZSBzY3JpcHRzCiAgICBpZiAoVHJhbnNhY3Rpb24uaXNDb2luYmFzZUhhc2godHhJbi5oYXNoKSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvaW5iYXNlIGlucHV0cyBub3Qgc3VwcG9ydGVkJykKICAgIH0KCiAgICAvLyBJZ25vcmUgZW1wdHkgc2NyaXB0cwogICAgaWYgKHR4SW4uc2NyaXB0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIHt9CgogICAgcmV0dXJuIGV4dHJhY3RJbnB1dCh0cmFuc2FjdGlvbiwgdHhJbiwgdmluKQogIH0pCgogIHJldHVybiB0eGIKfQoKVHJhbnNhY3Rpb25CdWlsZGVyLnByb3RvdHlwZS5hZGRJbnB1dCA9IGZ1bmN0aW9uICh0eEhhc2gsIHZvdXQsIHNlcXVlbmNlLCBwcmV2T3V0U2NyaXB0KSB7CiAgLy8gaXMgaXQgYSBoZXggc3RyaW5nPwogIGlmICh0eXBlb2YgdHhIYXNoID09PSAnc3RyaW5nJykgewogICAgLy8gdHJhbnNhY3Rpb24gaGFzaHMncyBhcmUgZGlzcGxheWVkIGluIHJldmVyc2Ugb3JkZXIsIHVuLXJldmVyc2UgaXQKICAgIHR4SGFzaCA9IFtdLnJldmVyc2UuY2FsbChuZXcgQnVmZmVyKHR4SGFzaCwgJ2hleCcpKQoKICAvLyBpcyBpdCBhIFRyYW5zYWN0aW9uIG9iamVjdD8KICB9IGVsc2UgaWYgKHR4SGFzaCBpbnN0YW5jZW9mIFRyYW5zYWN0aW9uKSB7CiAgICBwcmV2T3V0U2NyaXB0ID0gdHhIYXNoLm91dHNbdm91dF0uc2NyaXB0CiAgICB0eEhhc2ggPSB0eEhhc2guZ2V0SGFzaCgpCiAgfQoKICB2YXIgaW5wdXQgPSB7fQogIGlmIChwcmV2T3V0U2NyaXB0KSB7CiAgICB2YXIgcHJldk91dFNjcmlwdENodW5rcyA9IGJzY3JpcHQuZGVjb21waWxlKHByZXZPdXRTY3JpcHQpCiAgICB2YXIgcHJldk91dFR5cGUgPSBic2NyaXB0LmNsYXNzaWZ5T3V0cHV0KHByZXZPdXRTY3JpcHRDaHVua3MpCgogICAgLy8gaWYgd2UgY2FuLCBleHRyYWN0IHB1YktleSBpbmZvcm1hdGlvbgogICAgc3dpdGNoIChwcmV2T3V0VHlwZSkgewogICAgICBjYXNlICdtdWx0aXNpZyc6CiAgICAgICAgaW5wdXQucHViS2V5cyA9IHByZXZPdXRTY3JpcHRDaHVua3Muc2xpY2UoMSwgLTIpCiAgICAgICAgaW5wdXQuc2lnbmF0dXJlcyA9IGlucHV0LnB1YktleXMubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZCB9KQoKICAgICAgICBicmVhawoKICAgICAgY2FzZSAncHVia2V5JzoKICAgICAgICBpbnB1dC5wdWJLZXlzID0gcHJldk91dFNjcmlwdENodW5rcy5zbGljZSgwLCAxKQogICAgICAgIGlucHV0LnNpZ25hdHVyZXMgPSBbdW5kZWZpbmVkXQoKICAgICAgICBicmVhawogICAgfQoKICAgIGlmIChwcmV2T3V0VHlwZSAhPT0gJ3NjcmlwdGhhc2gnKSB7CiAgICAgIGlucHV0LnNjcmlwdFR5cGUgPSBwcmV2T3V0VHlwZQogICAgfQoKICAgIGlucHV0LnByZXZPdXRTY3JpcHQgPSBwcmV2T3V0U2NyaXB0CiAgICBpbnB1dC5wcmV2T3V0VHlwZSA9IHByZXZPdXRUeXBlCiAgfQoKICAvLyBpZiBzaWduYXR1cmVzIGV4aXN0LCBhZGRpbmcgaW5wdXRzIGlzIG9ubHkgYWNjZXB0YWJsZSBpZiBTSUdIQVNIX0FOWU9ORUNBTlBBWSBpcyB1c2VkCiAgLy8gdGhyb3cgaWYgYW55IHNpZ25hdHVyZXMgKmRpZG4ndCogdXNlIFNJR0hBU0hfQU5ZT05FQ0FOUEFZCiAgaWYgKCF0aGlzLmlucHV0cy5ldmVyeShmdW5jdGlvbiAob3RoZXJJbnB1dCkgewogICAgLy8gbm8gc2lnbmF0dXJlCiAgICBpZiAob3RoZXJJbnB1dC5oYXNoVHlwZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdHJ1ZQoKICAgIHJldHVybiBvdGhlcklucHV0Lmhhc2hUeXBlICYgVHJhbnNhY3Rpb24uU0lHSEFTSF9BTllPTkVDQU5QQVkKICB9KSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdObywgdGhpcyB3b3VsZCBpbnZhbGlkYXRlIHNpZ25hdHVyZXMnKQogIH0KCiAgdmFyIHByZXZPdXQgPSB0eEhhc2gudG9TdHJpbmcoJ2hleCcpICsgJzonICsgdm91dAogIGlmICh0aGlzLnByZXZUeE1hcFtwcmV2T3V0XSkgdGhyb3cgbmV3IEVycm9yKCdUcmFuc2FjdGlvbiBpcyBhbHJlYWR5IGFuIGlucHV0JykKCiAgdmFyIHZpbiA9IHRoaXMudHguYWRkSW5wdXQodHhIYXNoLCB2b3V0LCBzZXF1ZW5jZSkKICB0aGlzLmlucHV0c1t2aW5dID0gaW5wdXQKICB0aGlzLnByZXZUeE1hcFtwcmV2T3V0XSA9IHZpbgoKICByZXR1cm4gdmluCn0KClRyYW5zYWN0aW9uQnVpbGRlci5wcm90b3R5cGUuYWRkT3V0cHV0ID0gZnVuY3Rpb24gKHNjcmlwdFB1YktleSwgdmFsdWUpIHsKICB2YXIgbk91dHB1dHMgPSB0aGlzLnR4Lm91dHMubGVuZ3RoCgogIC8vIGlmIHNpZ25hdHVyZXMgZXhpc3QsIGFkZGluZyBvdXRwdXRzIGlzIG9ubHkgYWNjZXB0YWJsZSBpZiBTSUdIQVNIX05PTkUgb3IgU0lHSEFTSF9TSU5HTEUgaXMgdXNlZAogIC8vIHRocm93cyBpZiBhbnkgc2lnbmF0dXJlcyBkaWRuJ3QgdXNlIFNJR0hBU0hfTk9ORXxTSUdIQVNIX1NJTkdMRQogIGlmICghdGhpcy5pbnB1dHMuZXZlcnkoZnVuY3Rpb24gKGlucHV0LCBpbmRleCkgewogICAgLy8gbm8gc2lnbmF0dXJlCiAgICBpZiAoaW5wdXQuaGFzaFR5cGUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRydWUKCiAgICB2YXIgaGFzaFR5cGVNb2QgPSBpbnB1dC5oYXNoVHlwZSAmIDB4MWYKICAgIGlmIChoYXNoVHlwZU1vZCA9PT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9OT05FKSByZXR1cm4gdHJ1ZQogICAgaWYgKGhhc2hUeXBlTW9kID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX1NJTkdMRSkgewogICAgICAvLyBhY2NvdW50IGZvciBTSUdIQVNIX1NJTkdMRSBzaWduaW5nIG9mIGEgbm9uLWV4aXN0aW5nIG91dHB1dCwgYWthIHRoZSAiU0lHSEFTSF9TSU5HTEUiIGJ1ZwogICAgICByZXR1cm4gaW5kZXggPCBuT3V0cHV0cwogICAgfQoKICAgIHJldHVybiBmYWxzZQogIH0pKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vLCB0aGlzIHdvdWxkIGludmFsaWRhdGUgc2lnbmF0dXJlcycpCiAgfQoKICAvLyBBdHRlbXB0IHRvIGdldCBhIHNjcmlwdCBpZiBpdCdzIGEgYmFzZTU4IGFkZHJlc3Mgc3RyaW5nCiAgaWYgKHR5cGVvZiBzY3JpcHRQdWJLZXkgPT09ICdzdHJpbmcnKSB7CiAgICBzY3JpcHRQdWJLZXkgPSBiYWRkcmVzcy50b091dHB1dFNjcmlwdChzY3JpcHRQdWJLZXksIHRoaXMubmV0d29yaykKICB9CgogIHJldHVybiB0aGlzLnR4LmFkZE91dHB1dChzY3JpcHRQdWJLZXksIHZhbHVlKQp9CgpUcmFuc2FjdGlvbkJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLl9fYnVpbGQoZmFsc2UpCn0KVHJhbnNhY3Rpb25CdWlsZGVyLnByb3RvdHlwZS5idWlsZEluY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuX19idWlsZCh0cnVlKQp9Cgp2YXIgY2FuQnVpbGRUeXBlcyA9IHsKICAnbXVsdGlzaWcnOiB0cnVlLAogICdwdWJrZXknOiB0cnVlLAogICdwdWJrZXloYXNoJzogdHJ1ZQp9CgpUcmFuc2FjdGlvbkJ1aWxkZXIucHJvdG90eXBlLl9fYnVpbGQgPSBmdW5jdGlvbiAoYWxsb3dJbmNvbXBsZXRlKSB7CiAgaWYgKCFhbGxvd0luY29tcGxldGUpIHsKICAgIGlmICghdGhpcy50eC5pbnMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyBubyBpbnB1dHMnKQogICAgaWYgKCF0aGlzLnR4Lm91dHMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyBubyBvdXRwdXRzJykKICB9CgogIHZhciB0eCA9IHRoaXMudHguY2xvbmUoKQoKICAvLyBDcmVhdGUgc2NyaXB0IHNpZ25hdHVyZXMgZnJvbSBpbnB1dHMKICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCwgaW5kZXgpIHsKICAgIHZhciBzY3JpcHRUeXBlID0gaW5wdXQuc2NyaXB0VHlwZQogICAgdmFyIHNjcmlwdFNpZwoKICAgIGlmICghYWxsb3dJbmNvbXBsZXRlKSB7CiAgICAgIGlmICghc2NyaXB0VHlwZSkgdGhyb3cgbmV3IEVycm9yKCdUcmFuc2FjdGlvbiBpcyBub3QgY29tcGxldGUnKQogICAgICBpZiAoIWNhbkJ1aWxkVHlwZXNbc2NyaXB0VHlwZV0pIHRocm93IG5ldyBFcnJvcihzY3JpcHRUeXBlICsgJyBub3Qgc3VwcG9ydGVkJykKCiAgICAgIC8vIFhYWDogb25seSByZWxldmFudCB0byB0eXBlcyB0aGF0IG5lZWQgc2lnbmF0dXJlcwogICAgICBpZiAoIWlucHV0LnNpZ25hdHVyZXMpIHRocm93IG5ldyBFcnJvcignVHJhbnNhY3Rpb24gaXMgbWlzc2luZyBzaWduYXR1cmVzJykKICAgIH0KCiAgICBpZiAoaW5wdXQuc2lnbmF0dXJlcykgewogICAgICBzd2l0Y2ggKHNjcmlwdFR5cGUpIHsKICAgICAgICBjYXNlICdwdWJrZXloYXNoJzoKICAgICAgICAgIHZhciBwa2hTaWduYXR1cmUgPSBpbnB1dC5zaWduYXR1cmVzWzBdLnRvU2NyaXB0U2lnbmF0dXJlKGlucHV0Lmhhc2hUeXBlKQogICAgICAgICAgc2NyaXB0U2lnID0gYnNjcmlwdC5wdWJLZXlIYXNoSW5wdXQocGtoU2lnbmF0dXJlLCBpbnB1dC5wdWJLZXlzWzBdKQogICAgICAgICAgYnJlYWsKCiAgICAgICAgY2FzZSAnbXVsdGlzaWcnOgogICAgICAgICAgdmFyIG1zU2lnbmF0dXJlcyA9IGlucHV0LnNpZ25hdHVyZXMubWFwKGZ1bmN0aW9uIChzaWduYXR1cmUpIHsKICAgICAgICAgICAgcmV0dXJuIHNpZ25hdHVyZSAmJiBzaWduYXR1cmUudG9TY3JpcHRTaWduYXR1cmUoaW5wdXQuaGFzaFR5cGUpCiAgICAgICAgICB9KQoKICAgICAgICAgIC8vIGZpbGwgaW4gYmxhbmtzIHdpdGggT1BfMAogICAgICAgICAgaWYgKGFsbG93SW5jb21wbGV0ZSkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zU2lnbmF0dXJlcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICAgIG1zU2lnbmF0dXJlc1tpXSA9IG1zU2lnbmF0dXJlc1tpXSB8fCBvcHMuT1BfMAogICAgICAgICAgICB9CgogICAgICAgICAgLy8gcmVtb3ZlIGJsYW5rIHNpZ25hdHVyZXMKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1zU2lnbmF0dXJlcyA9IG1zU2lnbmF0dXJlcy5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggfSkKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcmVkZWVtU2NyaXB0ID0gYWxsb3dJbmNvbXBsZXRlID8gdW5kZWZpbmVkIDogaW5wdXQucmVkZWVtU2NyaXB0CiAgICAgICAgICBzY3JpcHRTaWcgPSBic2NyaXB0Lm11bHRpc2lnSW5wdXQobXNTaWduYXR1cmVzLCByZWRlZW1TY3JpcHQpCiAgICAgICAgICBicmVhawoKICAgICAgICBjYXNlICdwdWJrZXknOgogICAgICAgICAgdmFyIHBrU2lnbmF0dXJlID0gaW5wdXQuc2lnbmF0dXJlc1swXS50b1NjcmlwdFNpZ25hdHVyZShpbnB1dC5oYXNoVHlwZSkKICAgICAgICAgIHNjcmlwdFNpZyA9IGJzY3JpcHQucHViS2V5SW5wdXQocGtTaWduYXR1cmUpCiAgICAgICAgICBicmVhawogICAgICB9CiAgICB9CgogICAgLy8gZGlkIHdlIGJ1aWxkIGEgc2NyaXB0U2lnPwogICAgaWYgKHNjcmlwdFNpZykgewogICAgICAvLyB3cmFwIGFzIHNjcmlwdEhhc2ggaWYgbmVjZXNzYXJ5CiAgICAgIGlmIChpbnB1dC5wcmV2T3V0VHlwZSA9PT0gJ3NjcmlwdGhhc2gnKSB7CiAgICAgICAgc2NyaXB0U2lnID0gYnNjcmlwdC5zY3JpcHRIYXNoSW5wdXQoc2NyaXB0U2lnLCBpbnB1dC5yZWRlZW1TY3JpcHQpCiAgICAgIH0KCiAgICAgIHR4LnNldElucHV0U2NyaXB0KGluZGV4LCBzY3JpcHRTaWcpCiAgICB9CiAgfSkKCiAgcmV0dXJuIHR4Cn0KClRyYW5zYWN0aW9uQnVpbGRlci5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIChpbmRleCwga2V5UGFpciwgcmVkZWVtU2NyaXB0LCBoYXNoVHlwZSkgewogIGlmIChrZXlQYWlyLm5ldHdvcmsgIT09IHRoaXMubmV0d29yaykgdGhyb3cgbmV3IEVycm9yKCdJbmNvbnNpc3RlbnQgbmV0d29yaycpCiAgaWYgKCF0aGlzLmlucHV0c1tpbmRleF0pIHRocm93IG5ldyBFcnJvcignTm8gaW5wdXQgYXQgaW5kZXg6ICcgKyBpbmRleCkKICBoYXNoVHlwZSA9IGhhc2hUeXBlIHx8IFRyYW5zYWN0aW9uLlNJR0hBU0hfQUxMCgogIHZhciBpbnB1dCA9IHRoaXMuaW5wdXRzW2luZGV4XQogIHZhciBjYW5TaWduID0gaW5wdXQuaGFzaFR5cGUgJiYKICAgIGlucHV0LnByZXZPdXRTY3JpcHQgJiYKICAgIGlucHV0LnByZXZPdXRUeXBlICYmCiAgICBpbnB1dC5wdWJLZXlzICYmCiAgICBpbnB1dC5zY3JpcHRUeXBlICYmCiAgICBpbnB1dC5zaWduYXR1cmVzICYmCiAgICBpbnB1dC5zaWduYXR1cmVzLmxlbmd0aCA9PT0gaW5wdXQucHViS2V5cy5sZW5ndGgKCiAgdmFyIGtwUHViS2V5ID0ga2V5UGFpci5nZXRQdWJsaWNLZXlCdWZmZXIoKQoKICAvLyBhcmUgd2UgcmVhZHkgdG8gc2lnbj8KICBpZiAoY2FuU2lnbikgewogICAgLy8gaWYgcmVkZWVtU2NyaXB0IHdhcyBwcm92aWRlZCwgZW5mb3JjZSBjb25zaXN0ZW5jeQogICAgaWYgKHJlZGVlbVNjcmlwdCkgewogICAgICBpZiAoIWJ1ZmZlckVxdWFscyhpbnB1dC5yZWRlZW1TY3JpcHQsIHJlZGVlbVNjcmlwdCkpIHRocm93IG5ldyBFcnJvcignSW5jb25zaXN0ZW50IHJlZGVlbVNjcmlwdCcpCiAgICB9CgogICAgaWYgKGlucHV0Lmhhc2hUeXBlICE9PSBoYXNoVHlwZSkgdGhyb3cgbmV3IEVycm9yKCdJbmNvbnNpc3RlbnQgaGFzaFR5cGUnKQoKICAvLyBubz8gcHJlcGFyZQogIH0gZWxzZSB7CiAgICAvLyBtdXN0IGJlIHBheS10by1zY3JpcHRIYXNoPwogICAgaWYgKHJlZGVlbVNjcmlwdCkgewogICAgICAvLyBpZiB3ZSBoYXZlIGEgcHJldk91dFNjcmlwdCwgZW5mb3JjZSBzY3JpcHRIYXNoIGVxdWFsaXR5IHRvIHRoZSByZWRlZW1TY3JpcHQKICAgICAgaWYgKGlucHV0LnByZXZPdXRTY3JpcHQpIHsKICAgICAgICBpZiAoaW5wdXQucHJldk91dFR5cGUgIT09ICdzY3JpcHRoYXNoJykgdGhyb3cgbmV3IEVycm9yKCdQcmV2T3V0U2NyaXB0IG11c3QgYmUgUDJTSCcpCgogICAgICAgIHZhciBzY3JpcHRIYXNoID0gYnNjcmlwdC5kZWNvbXBpbGUoaW5wdXQucHJldk91dFNjcmlwdClbMV0KICAgICAgICBpZiAoIWJ1ZmZlckVxdWFscyhzY3JpcHRIYXNoLCBiY3J5cHRvLmhhc2gxNjAocmVkZWVtU2NyaXB0KSkpIHRocm93IG5ldyBFcnJvcignUmVkZWVtU2NyaXB0IGRvZXMgbm90IG1hdGNoICcgKyBzY3JpcHRIYXNoLnRvU3RyaW5nKCdoZXgnKSkKICAgICAgfQoKICAgICAgdmFyIHNjcmlwdFR5cGUgPSBic2NyaXB0LmNsYXNzaWZ5T3V0cHV0KHJlZGVlbVNjcmlwdCkKICAgICAgdmFyIHJlZGVlbVNjcmlwdENodW5rcyA9IGJzY3JpcHQuZGVjb21waWxlKHJlZGVlbVNjcmlwdCkKICAgICAgdmFyIHB1YktleXMKCiAgICAgIHN3aXRjaCAoc2NyaXB0VHlwZSkgewogICAgICAgIGNhc2UgJ211bHRpc2lnJzoKICAgICAgICAgIHB1YktleXMgPSByZWRlZW1TY3JpcHRDaHVua3Muc2xpY2UoMSwgLTIpCgogICAgICAgICAgYnJlYWsKCiAgICAgICAgY2FzZSAncHVia2V5aGFzaCc6CiAgICAgICAgICB2YXIgcGtoMSA9IHJlZGVlbVNjcmlwdENodW5rc1syXQogICAgICAgICAgdmFyIHBraDIgPSBiY3J5cHRvLmhhc2gxNjAoa2V5UGFpci5nZXRQdWJsaWNLZXlCdWZmZXIoKSkKCiAgICAgICAgICBpZiAoIWJ1ZmZlckVxdWFscyhwa2gxLCBwa2gyKSkgdGhyb3cgbmV3IEVycm9yKCdwcml2YXRlS2V5IGNhbm5vdCBzaWduIGZvciB0aGlzIGlucHV0JykKICAgICAgICAgIHB1YktleXMgPSBba3BQdWJLZXldCgogICAgICAgICAgYnJlYWsKCiAgICAgICAgY2FzZSAncHVia2V5JzoKICAgICAgICAgIHB1YktleXMgPSByZWRlZW1TY3JpcHRDaHVua3Muc2xpY2UoMCwgMSkKCiAgICAgICAgICBicmVhawoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWRlZW1TY3JpcHQgbm90IHN1cHBvcnRlZCAoJyArIHNjcmlwdFR5cGUgKyAnKScpCiAgICAgIH0KCiAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBwcmV2T3V0U2NyaXB0LCBnZW5lcmF0ZSBhIFAyU0ggc2NyaXB0CiAgICAgIGlmICghaW5wdXQucHJldk91dFNjcmlwdCkgewogICAgICAgIGlucHV0LnByZXZPdXRTY3JpcHQgPSBic2NyaXB0LnNjcmlwdEhhc2hPdXRwdXQoYmNyeXB0by5oYXNoMTYwKHJlZGVlbVNjcmlwdCkpCiAgICAgICAgaW5wdXQucHJldk91dFR5cGUgPSAnc2NyaXB0aGFzaCcKICAgICAgfQoKICAgICAgaW5wdXQucHViS2V5cyA9IHB1YktleXMKICAgICAgaW5wdXQucmVkZWVtU2NyaXB0ID0gcmVkZWVtU2NyaXB0CiAgICAgIGlucHV0LnNjcmlwdFR5cGUgPSBzY3JpcHRUeXBlCiAgICAgIGlucHV0LnNpZ25hdHVyZXMgPSBwdWJLZXlzLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiB1bmRlZmluZWQgfSkKICAgIH0gZWxzZSB7CiAgICAgIC8vIHBheS10by1zY3JpcHRIYXNoIGlzIG5vdCBwb3NzaWJsZSB3aXRob3V0IGEgcmVkZWVtU2NyaXB0CiAgICAgIGlmIChpbnB1dC5wcmV2T3V0VHlwZSA9PT0gJ3NjcmlwdGhhc2gnKSB0aHJvdyBuZXcgRXJyb3IoJ1ByZXZPdXRTY3JpcHQgaXMgUDJTSCwgbWlzc2luZyByZWRlZW1TY3JpcHQnKQoKICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIHNjcmlwdFR5cGUsIGFzc3VtZSBwdWJLZXlIYXNoIG90aGVyd2lzZQogICAgICBpZiAoIWlucHV0LnNjcmlwdFR5cGUpIHsKICAgICAgICBpbnB1dC5wcmV2T3V0U2NyaXB0ID0gYnNjcmlwdC5wdWJLZXlIYXNoT3V0cHV0KGJjcnlwdG8uaGFzaDE2MChrZXlQYWlyLmdldFB1YmxpY0tleUJ1ZmZlcigpKSkKICAgICAgICBpbnB1dC5wcmV2T3V0VHlwZSA9ICdwdWJrZXloYXNoJwogICAgICAgIGlucHV0LnB1YktleXMgPSBba3BQdWJLZXldCiAgICAgICAgaW5wdXQuc2NyaXB0VHlwZSA9IGlucHV0LnByZXZPdXRUeXBlCiAgICAgICAgaW5wdXQuc2lnbmF0dXJlcyA9IFt1bmRlZmluZWRdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdGhyb3cgaWYgd2UgY2FuJ3Qgc2lnbiB3aXRoIGl0CiAgICAgICAgaWYgKCFpbnB1dC5wdWJLZXlzIHx8ICFpbnB1dC5zaWduYXR1cmVzKSB0aHJvdyBuZXcgRXJyb3IoaW5wdXQuc2NyaXB0VHlwZSArICcgbm90IHN1cHBvcnRlZCcpCiAgICAgIH0KICAgIH0KCiAgICBpbnB1dC5oYXNoVHlwZSA9IGhhc2hUeXBlCiAgfQoKICAvLyByZWFkeSB0byBzaWduPwogIHZhciBzaWduYXR1cmVTY3JpcHQgPSBpbnB1dC5yZWRlZW1TY3JpcHQgfHwgaW5wdXQucHJldk91dFNjcmlwdAogIHZhciBzaWduYXR1cmVIYXNoID0gdGhpcy50eC5oYXNoRm9yU2lnbmF0dXJlKGluZGV4LCBzaWduYXR1cmVTY3JpcHQsIGhhc2hUeXBlKQoKICAvLyBlbmZvcmNlIGluIG9yZGVyIHNpZ25pbmcgb2YgcHVibGljIGtleXMKICB2YXIgdmFsaWQgPSBpbnB1dC5wdWJLZXlzLnNvbWUoZnVuY3Rpb24gKHB1YktleSwgaSkgewogICAgaWYgKCFidWZmZXJFcXVhbHMoa3BQdWJLZXksIHB1YktleSkpIHJldHVybiBmYWxzZQogICAgaWYgKGlucHV0LnNpZ25hdHVyZXNbaV0pIHRocm93IG5ldyBFcnJvcignU2lnbmF0dXJlIGFscmVhZHkgZXhpc3RzJykKCiAgICB2YXIgc2lnbmF0dXJlID0ga2V5UGFpci5zaWduKHNpZ25hdHVyZUhhc2gpCiAgICBpbnB1dC5zaWduYXR1cmVzW2ldID0gc2lnbmF0dXJlCgogICAgcmV0dXJuIHRydWUKICB9KQoKICBpZiAoIXZhbGlkKSB0aHJvdyBuZXcgRXJyb3IoJ0tleSBwYWlyIGNhbm5vdCBzaWduIGZvciB0aGlzIGlucHV0JykKfQoKbW9kdWxlLmV4cG9ydHMgPSBUcmFuc2FjdGlvbkJ1aWxkZXIKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2FkZHJlc3MiOjI1LCIuL2NyeXB0byI6MjgsIi4vZWNwYWlyIjozMCwiLi9lY3NpZ25hdHVyZSI6MzEsIi4vbmV0d29ya3MiOjM1LCIuL29wY29kZXMiOjM2LCIuL3NjcmlwdCI6MzcsIi4vdHJhbnNhY3Rpb24iOjM5LCIuL3R5cGVzIjo0MSwiYnVmZmVyIjo3NiwiYnVmZmVyLWVxdWFscyI6NzMsInR5cGVmb3JjZSI6MTczfV0sNDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgdHlwZWZvcmNlID0gcmVxdWlyZSgndHlwZWZvcmNlJykKCmZ1bmN0aW9uIG5CdWZmZXIgKHZhbHVlLCBuKSB7CiAgdHlwZWZvcmNlKHR5cGVzLkJ1ZmZlciwgdmFsdWUpCiAgaWYgKHZhbHVlLmxlbmd0aCAhPT0gbikgdGhyb3cgbmV3IHR5cGVmb3JjZS5UZlR5cGVFcnJvcignRXhwZWN0ZWQgJyArIChuICogOCkgKyAnLWJpdCBCdWZmZXIsIGdvdCAnICsgKHZhbHVlLmxlbmd0aCAqIDgpICsgJy1iaXQgQnVmZmVyJykKCiAgcmV0dXJuIHRydWUKfQoKZnVuY3Rpb24gSGFzaDE2MGJpdCAodmFsdWUpIHsgcmV0dXJuIG5CdWZmZXIodmFsdWUsIDIwKSB9CmZ1bmN0aW9uIEhhc2gyNTZiaXQgKHZhbHVlKSB7IHJldHVybiBuQnVmZmVyKHZhbHVlLCAzMikgfQpmdW5jdGlvbiBCdWZmZXIyNTZiaXQgKHZhbHVlKSB7IHJldHVybiBuQnVmZmVyKHZhbHVlLCAzMikgfQoKdmFyIFVJTlQ1M19NQVggPSBNYXRoLnBvdygyLCA1MykgLSAxCmZ1bmN0aW9uIFVJbnQyICh2YWx1ZSkgeyByZXR1cm4gKHZhbHVlICYgMykgPT09IHZhbHVlIH0KZnVuY3Rpb24gVUludDggKHZhbHVlKSB7IHJldHVybiAodmFsdWUgJiAweGZmKSA9PT0gdmFsdWUgfQpmdW5jdGlvbiBVSW50MzIgKHZhbHVlKSB7IHJldHVybiAodmFsdWUgPj4+IDApID09PSB2YWx1ZSB9CmZ1bmN0aW9uIFVJbnQ1MyAodmFsdWUpIHsKICByZXR1cm4gdHlwZWZvcmNlLk51bWJlcih2YWx1ZSkgJiYKICAgIHZhbHVlID49IDAgJiYKICAgIHZhbHVlIDw9IFVJTlQ1M19NQVggJiYKICAgIE1hdGguZmxvb3IodmFsdWUpID09PSB2YWx1ZQp9CgovLyBleHRlcm5hbCBkZXBlbmRlbnQgdHlwZXMKdmFyIEJpZ0ludCA9IHR5cGVmb3JjZS5xdWFja3NMaWtlKCdCaWdJbnRlZ2VyJykKdmFyIEVDUG9pbnQgPSB0eXBlZm9yY2UucXVhY2tzTGlrZSgnUG9pbnQnKQoKLy8gZXhwb3NlZCwgZXh0ZXJuYWwgQVBJCnZhciBFQ1NpZ25hdHVyZSA9IHR5cGVmb3JjZS5jb21waWxlKHsgcjogQmlnSW50LCBzOiBCaWdJbnQgfSkKdmFyIE5ldHdvcmsgPSB0eXBlZm9yY2UuY29tcGlsZSh7CiAgbWVzc2FnZVByZWZpeDogdHlwZWZvcmNlLm9uZU9mKHR5cGVmb3JjZS5CdWZmZXIsIHR5cGVmb3JjZS5TdHJpbmcpLAogIGJpcDMyOiB7CiAgICBwdWJsaWM6IFVJbnQzMiwKICAgIHByaXZhdGU6IFVJbnQzMgogIH0sCiAgcHViS2V5SGFzaDogVUludDgsCiAgc2NyaXB0SGFzaDogVUludDgsCiAgd2lmOiBVSW50OCwKICBkdXN0VGhyZXNob2xkOiBVSW50NTMKfSkKCi8vIGV4dGVuZCB0eXBlZm9yY2UgdHlwZXMgd2l0aCBvdXJzCnZhciB0eXBlcyA9IHsKICBCaWdJbnQ6IEJpZ0ludCwKICBCdWZmZXIyNTZiaXQ6IEJ1ZmZlcjI1NmJpdCwKICBFQ1BvaW50OiBFQ1BvaW50LAogIEVDU2lnbmF0dXJlOiBFQ1NpZ25hdHVyZSwKICBIYXNoMTYwYml0OiBIYXNoMTYwYml0LAogIEhhc2gyNTZiaXQ6IEhhc2gyNTZiaXQsCiAgTmV0d29yazogTmV0d29yaywKICBVSW50MjogVUludDIsCiAgVUludDg6IFVJbnQ4LAogIFVJbnQzMjogVUludDMyLAogIFVJbnQ1MzogVUludDUzCn0KCmZvciAodmFyIHR5cGVOYW1lIGluIHR5cGVmb3JjZSkgewogIHR5cGVzW3R5cGVOYW1lXSA9IHR5cGVmb3JjZVt0eXBlTmFtZV0KfQoKbW9kdWxlLmV4cG9ydHMgPSB0eXBlcwoKfSx7InR5cGVmb3JjZSI6MTczfV0sNDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICd1c2Ugc3RyaWN0JzsKCiAgLy8gVXRpbHMKICBmdW5jdGlvbiBhc3NlcnQgKHZhbCwgbXNnKSB7CiAgICBpZiAoIXZhbCkgdGhyb3cgbmV3IEVycm9yKG1zZyB8fCAnQXNzZXJ0aW9uIGZhaWxlZCcpOwogIH0KCiAgLy8gQ291bGQgdXNlIGBpbmhlcml0c2AgbW9kdWxlLCBidXQgZG9uJ3Qgd2FudCB0byBtb3ZlIGZyb20gc2luZ2xlIGZpbGUKICAvLyBhcmNoaXRlY3R1cmUgeWV0LgogIGZ1bmN0aW9uIGluaGVyaXRzIChjdG9yLCBzdXBlckN0b3IpIHsKICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yOwogICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge307CiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlOwogICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKTsKICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvcjsKICB9CgogIC8vIEJOCgogIGZ1bmN0aW9uIEJOIChudW1iZXIsIGJhc2UsIGVuZGlhbikgewogICAgaWYgKEJOLmlzQk4obnVtYmVyKSkgewogICAgICByZXR1cm4gbnVtYmVyOwogICAgfQoKICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgdGhpcy53b3JkcyA9IG51bGw7CiAgICB0aGlzLmxlbmd0aCA9IDA7CgogICAgLy8gUmVkdWN0aW9uIGNvbnRleHQKICAgIHRoaXMucmVkID0gbnVsbDsKCiAgICBpZiAobnVtYmVyICE9PSBudWxsKSB7CiAgICAgIGlmIChiYXNlID09PSAnbGUnIHx8IGJhc2UgPT09ICdiZScpIHsKICAgICAgICBlbmRpYW4gPSBiYXNlOwogICAgICAgIGJhc2UgPSAxMDsKICAgICAgfQoKICAgICAgdGhpcy5faW5pdChudW1iZXIgfHwgMCwgYmFzZSB8fCAxMCwgZW5kaWFuIHx8ICdiZScpOwogICAgfQogIH0KICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpIHsKICAgIG1vZHVsZS5leHBvcnRzID0gQk47CiAgfSBlbHNlIHsKICAgIGV4cG9ydHMuQk4gPSBCTjsKICB9CgogIEJOLkJOID0gQk47CiAgQk4ud29yZFNpemUgPSAyNjsKCiAgdmFyIEJ1ZmZlcjsKICB0cnkgewogICAgQnVmZmVyID0gcmVxdWlyZSgnYnVmJyArICdmZXInKS5CdWZmZXI7CiAgfSBjYXRjaCAoZSkgewogIH0KCiAgQk4uaXNCTiA9IGZ1bmN0aW9uIGlzQk4gKG51bSkgewogICAgcmV0dXJuIG51bSAhPT0gbnVsbCAmJiB0eXBlb2YgbnVtID09PSAnb2JqZWN0JyAmJgogICAgICBudW0uY29uc3RydWN0b3IubmFtZSA9PT0gJ0JOJyAmJiBBcnJheS5pc0FycmF5KG51bS53b3Jkcyk7CiAgfTsKCiAgQk4ubWF4ID0gZnVuY3Rpb24gbWF4IChsZWZ0LCByaWdodCkgewogICAgaWYgKGxlZnQuY21wKHJpZ2h0KSA+IDApIHJldHVybiBsZWZ0OwogICAgcmV0dXJuIHJpZ2h0OwogIH07CgogIEJOLm1pbiA9IGZ1bmN0aW9uIG1pbiAobGVmdCwgcmlnaHQpIHsKICAgIGlmIChsZWZ0LmNtcChyaWdodCkgPCAwKSByZXR1cm4gbGVmdDsKICAgIHJldHVybiByaWdodDsKICB9OwoKICBCTi5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0IChudW1iZXIsIGJhc2UsIGVuZGlhbikgewogICAgaWYgKHR5cGVvZiBudW1iZXIgPT09ICdudW1iZXInKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbml0TnVtYmVyKG51bWJlciwgYmFzZSwgZW5kaWFuKTsKICAgIH0KCiAgICBpZiAodHlwZW9mIG51bWJlciA9PT0gJ29iamVjdCcpIHsKICAgICAgcmV0dXJuIHRoaXMuX2luaXRBcnJheShudW1iZXIsIGJhc2UsIGVuZGlhbik7CiAgICB9CgogICAgaWYgKGJhc2UgPT09ICdoZXgnKSB7CiAgICAgIGJhc2UgPSAxNjsKICAgIH0KICAgIGFzc2VydChiYXNlID09PSAoYmFzZSB8IDApICYmIGJhc2UgPj0gMiAmJiBiYXNlIDw9IDM2KTsKCiAgICBudW1iZXIgPSBudW1iZXIudG9TdHJpbmcoKS5yZXBsYWNlKC9ccysvZywgJycpOwogICAgdmFyIHN0YXJ0ID0gMDsKICAgIGlmIChudW1iZXJbMF0gPT09ICctJykgewogICAgICBzdGFydCsrOwogICAgfQoKICAgIGlmIChiYXNlID09PSAxNikgewogICAgICB0aGlzLl9wYXJzZUhleChudW1iZXIsIHN0YXJ0KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX3BhcnNlQmFzZShudW1iZXIsIGJhc2UsIHN0YXJ0KTsKICAgIH0KCiAgICBpZiAobnVtYmVyWzBdID09PSAnLScpIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICB9CgogICAgdGhpcy5zdHJpcCgpOwoKICAgIGlmIChlbmRpYW4gIT09ICdsZScpIHJldHVybjsKCiAgICB0aGlzLl9pbml0QXJyYXkodGhpcy50b0FycmF5KCksIGJhc2UsIGVuZGlhbik7CiAgfTsKCiAgQk4ucHJvdG90eXBlLl9pbml0TnVtYmVyID0gZnVuY3Rpb24gX2luaXROdW1iZXIgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICBpZiAobnVtYmVyIDwgMCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgbnVtYmVyID0gLW51bWJlcjsKICAgIH0KICAgIGlmIChudW1iZXIgPCAweDQwMDAwMDApIHsKICAgICAgdGhpcy53b3JkcyA9IFsgbnVtYmVyICYgMHgzZmZmZmZmIF07CiAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgIH0gZWxzZSBpZiAobnVtYmVyIDwgMHgxMDAwMDAwMDAwMDAwMCkgewogICAgICB0aGlzLndvcmRzID0gWwogICAgICAgIG51bWJlciAmIDB4M2ZmZmZmZiwKICAgICAgICAobnVtYmVyIC8gMHg0MDAwMDAwKSAmIDB4M2ZmZmZmZgogICAgICBdOwogICAgICB0aGlzLmxlbmd0aCA9IDI7CiAgICB9IGVsc2UgewogICAgICBhc3NlcnQobnVtYmVyIDwgMHgyMDAwMDAwMDAwMDAwMCk7IC8vIDIgXiA1MyAodW5zYWZlKQogICAgICB0aGlzLndvcmRzID0gWwogICAgICAgIG51bWJlciAmIDB4M2ZmZmZmZiwKICAgICAgICAobnVtYmVyIC8gMHg0MDAwMDAwKSAmIDB4M2ZmZmZmZiwKICAgICAgICAxCiAgICAgIF07CiAgICAgIHRoaXMubGVuZ3RoID0gMzsKICAgIH0KCiAgICBpZiAoZW5kaWFuICE9PSAnbGUnKSByZXR1cm47CgogICAgLy8gUmV2ZXJzZSB0aGUgYnl0ZXMKICAgIHRoaXMuX2luaXRBcnJheSh0aGlzLnRvQXJyYXkoKSwgYmFzZSwgZW5kaWFuKTsKICB9OwoKICBCTi5wcm90b3R5cGUuX2luaXRBcnJheSA9IGZ1bmN0aW9uIF9pbml0QXJyYXkgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAvLyBQZXJoYXBzIGEgVWludDhBcnJheQogICAgYXNzZXJ0KHR5cGVvZiBudW1iZXIubGVuZ3RoID09PSAnbnVtYmVyJyk7CiAgICBpZiAobnVtYmVyLmxlbmd0aCA8PSAwKSB7CiAgICAgIHRoaXMud29yZHMgPSBbIDAgXTsKICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICB0aGlzLmxlbmd0aCA9IE1hdGguY2VpbChudW1iZXIubGVuZ3RoIC8gMyk7CiAgICB0aGlzLndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldID0gMDsKICAgIH0KCiAgICB2YXIgaiwgdzsKICAgIHZhciBvZmYgPSAwOwogICAgaWYgKGVuZGlhbiA9PT0gJ2JlJykgewogICAgICBmb3IgKGkgPSBudW1iZXIubGVuZ3RoIC0gMSwgaiA9IDA7IGkgPj0gMDsgaSAtPSAzKSB7CiAgICAgICAgdyA9IG51bWJlcltpXSB8IChudW1iZXJbaSAtIDFdIDw8IDgpIHwgKG51bWJlcltpIC0gMl0gPDwgMTYpOwogICAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgICB0aGlzLndvcmRzW2ogKyAxXSA9ICh3ID4+PiAoMjYgLSBvZmYpKSAmIDB4M2ZmZmZmZjsKICAgICAgICBvZmYgKz0gMjQ7CiAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgb2ZmIC09IDI2OwogICAgICAgICAgaisrOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIGlmIChlbmRpYW4gPT09ICdsZScpIHsKICAgICAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBudW1iZXIubGVuZ3RoOyBpICs9IDMpIHsKICAgICAgICB3ID0gbnVtYmVyW2ldIHwgKG51bWJlcltpICsgMV0gPDwgOCkgfCAobnVtYmVyW2kgKyAyXSA8PCAxNik7CiAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSAodyA8PCBvZmYpICYgMHgzZmZmZmZmOwogICAgICAgIHRoaXMud29yZHNbaiArIDFdID0gKHcgPj4+ICgyNiAtIG9mZikpICYgMHgzZmZmZmZmOwogICAgICAgIG9mZiArPSAyNDsKICAgICAgICBpZiAob2ZmID49IDI2KSB7CiAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICBqKys7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIGZ1bmN0aW9uIHBhcnNlSGV4IChzdHIsIHN0YXJ0LCBlbmQpIHsKICAgIHZhciByID0gMDsKICAgIHZhciBsZW4gPSBNYXRoLm1pbihzdHIubGVuZ3RoLCBlbmQpOwogICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgbGVuOyBpKyspIHsKICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKSAtIDQ4OwoKICAgICAgciA8PD0gNDsKCiAgICAgIC8vICdhJyAtICdmJwogICAgICBpZiAoYyA+PSA0OSAmJiBjIDw9IDU0KSB7CiAgICAgICAgciB8PSBjIC0gNDkgKyAweGE7CgogICAgICAvLyAnQScgLSAnRicKICAgICAgfSBlbHNlIGlmIChjID49IDE3ICYmIGMgPD0gMjIpIHsKICAgICAgICByIHw9IGMgLSAxNyArIDB4YTsKCiAgICAgIC8vICcwJyAtICc5JwogICAgICB9IGVsc2UgewogICAgICAgIHIgfD0gYyAmIDB4ZjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHI7CiAgfQoKICBCTi5wcm90b3R5cGUuX3BhcnNlSGV4ID0gZnVuY3Rpb24gX3BhcnNlSGV4IChudW1iZXIsIHN0YXJ0KSB7CiAgICAvLyBDcmVhdGUgcG9zc2libHkgYmlnZ2VyIGFycmF5IHRvIGVuc3VyZSB0aGF0IGl0IGZpdHMgdGhlIG51bWJlcgogICAgdGhpcy5sZW5ndGggPSBNYXRoLmNlaWwoKG51bWJlci5sZW5ndGggLSBzdGFydCkgLyA2KTsKICAgIHRoaXMud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSAwOwogICAgfQoKICAgIHZhciBqLCB3OwogICAgLy8gU2NhbiAyNC1iaXQgY2h1bmtzIGFuZCBhZGQgdGhlbSB0byB0aGUgbnVtYmVyCiAgICB2YXIgb2ZmID0gMDsKICAgIGZvciAoaSA9IG51bWJlci5sZW5ndGggLSA2LCBqID0gMDsgaSA+PSBzdGFydDsgaSAtPSA2KSB7CiAgICAgIHcgPSBwYXJzZUhleChudW1iZXIsIGksIGkgKyA2KTsKICAgICAgdGhpcy53b3Jkc1tqXSB8PSAodyA8PCBvZmYpICYgMHgzZmZmZmZmOwogICAgICB0aGlzLndvcmRzW2ogKyAxXSB8PSB3ID4+PiAoMjYgLSBvZmYpICYgMHgzZmZmZmY7CiAgICAgIG9mZiArPSAyNDsKICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgIG9mZiAtPSAyNjsKICAgICAgICBqKys7CiAgICAgIH0KICAgIH0KICAgIGlmIChpICsgNiAhPT0gc3RhcnQpIHsKICAgICAgdyA9IHBhcnNlSGV4KG51bWJlciwgc3RhcnQsIGkgKyA2KTsKICAgICAgdGhpcy53b3Jkc1tqXSB8PSAodyA8PCBvZmYpICYgMHgzZmZmZmZmOwogICAgICB0aGlzLndvcmRzW2ogKyAxXSB8PSB3ID4+PiAoMjYgLSBvZmYpICYgMHgzZmZmZmY7CiAgICB9CiAgICB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgZnVuY3Rpb24gcGFyc2VCYXNlIChzdHIsIHN0YXJ0LCBlbmQsIG11bCkgewogICAgdmFyIHIgPSAwOwogICAgdmFyIGxlbiA9IE1hdGgubWluKHN0ci5sZW5ndGgsIGVuZCk7CiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBsZW47IGkrKykgewogICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gNDg7CgogICAgICByICo9IG11bDsKCiAgICAgIC8vICdhJwogICAgICBpZiAoYyA+PSA0OSkgewogICAgICAgIHIgKz0gYyAtIDQ5ICsgMHhhOwoKICAgICAgLy8gJ0EnCiAgICAgIH0gZWxzZSBpZiAoYyA+PSAxNykgewogICAgICAgIHIgKz0gYyAtIDE3ICsgMHhhOwoKICAgICAgLy8gJzAnIC0gJzknCiAgICAgIH0gZWxzZSB7CiAgICAgICAgciArPSBjOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcjsKICB9CgogIEJOLnByb3RvdHlwZS5fcGFyc2VCYXNlID0gZnVuY3Rpb24gX3BhcnNlQmFzZSAobnVtYmVyLCBiYXNlLCBzdGFydCkgewogICAgLy8gSW5pdGlhbGl6ZSBhcyB6ZXJvCiAgICB0aGlzLndvcmRzID0gWyAwIF07CiAgICB0aGlzLmxlbmd0aCA9IDE7CgogICAgLy8gRmluZCBsZW5ndGggb2YgbGltYiBpbiBiYXNlCiAgICBmb3IgKHZhciBsaW1iTGVuID0gMCwgbGltYlBvdyA9IDE7IGxpbWJQb3cgPD0gMHgzZmZmZmZmOyBsaW1iUG93ICo9IGJhc2UpIHsKICAgICAgbGltYkxlbisrOwogICAgfQogICAgbGltYkxlbi0tOwogICAgbGltYlBvdyA9IChsaW1iUG93IC8gYmFzZSkgfCAwOwoKICAgIHZhciB0b3RhbCA9IG51bWJlci5sZW5ndGggLSBzdGFydDsKICAgIHZhciBtb2QgPSB0b3RhbCAlIGxpbWJMZW47CiAgICB2YXIgZW5kID0gTWF0aC5taW4odG90YWwsIHRvdGFsIC0gbW9kKSArIHN0YXJ0OwoKICAgIHZhciB3b3JkID0gMDsKICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSBsaW1iTGVuKSB7CiAgICAgIHdvcmQgPSBwYXJzZUJhc2UobnVtYmVyLCBpLCBpICsgbGltYkxlbiwgYmFzZSk7CgogICAgICB0aGlzLmltdWxuKGxpbWJQb3cpOwogICAgICBpZiAodGhpcy53b3Jkc1swXSArIHdvcmQgPCAweDQwMDAwMDApIHsKICAgICAgICB0aGlzLndvcmRzWzBdICs9IHdvcmQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5faWFkZG4od29yZCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAobW9kICE9PSAwKSB7CiAgICAgIHZhciBwb3cgPSAxOwogICAgICB3b3JkID0gcGFyc2VCYXNlKG51bWJlciwgaSwgbnVtYmVyLmxlbmd0aCwgYmFzZSk7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbW9kOyBpKyspIHsKICAgICAgICBwb3cgKj0gYmFzZTsKICAgICAgfQoKICAgICAgdGhpcy5pbXVsbihwb3cpOwogICAgICBpZiAodGhpcy53b3Jkc1swXSArIHdvcmQgPCAweDQwMDAwMDApIHsKICAgICAgICB0aGlzLndvcmRzWzBdICs9IHdvcmQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5faWFkZG4od29yZCk7CiAgICAgIH0KICAgIH0KICB9OwoKICBCTi5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKGRlc3QpIHsKICAgIGRlc3Qud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGRlc3Qud29yZHNbaV0gPSB0aGlzLndvcmRzW2ldOwogICAgfQogICAgZGVzdC5sZW5ndGggPSB0aGlzLmxlbmd0aDsKICAgIGRlc3QubmVnYXRpdmUgPSB0aGlzLm5lZ2F0aXZlOwogICAgZGVzdC5yZWQgPSB0aGlzLnJlZDsKICB9OwoKICBCTi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7CiAgICB2YXIgciA9IG5ldyBCTihudWxsKTsKICAgIHRoaXMuY29weShyKTsKICAgIHJldHVybiByOwogIH07CgogIEJOLnByb3RvdHlwZS5fZXhwYW5kID0gZnVuY3Rpb24gX2V4cGFuZCAoc2l6ZSkgewogICAgd2hpbGUgKHRoaXMubGVuZ3RoIDwgc2l6ZSkgewogICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoKytdID0gMDsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIFJlbW92ZSBsZWFkaW5nIGAwYCBmcm9tIGB0aGlzYAogIEJOLnByb3RvdHlwZS5zdHJpcCA9IGZ1bmN0aW9uIHN0cmlwICgpIHsKICAgIHdoaWxlICh0aGlzLmxlbmd0aCA+IDEgJiYgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCAtIDFdID09PSAwKSB7CiAgICAgIHRoaXMubGVuZ3RoLS07CiAgICB9CiAgICByZXR1cm4gdGhpcy5fbm9ybVNpZ24oKTsKICB9OwoKICBCTi5wcm90b3R5cGUuX25vcm1TaWduID0gZnVuY3Rpb24gX25vcm1TaWduICgpIHsKICAgIC8vIC0wID0gMAogICAgaWYgKHRoaXMubGVuZ3RoID09PSAxICYmIHRoaXMud29yZHNbMF0gPT09IDApIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9OwoKICBCTi5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkgewogICAgcmV0dXJuICh0aGlzLnJlZCA/ICc8Qk4tUjogJyA6ICc8Qk46ICcpICsgdGhpcy50b1N0cmluZygxNikgKyAnPic7CiAgfTsKCiAgLyoKCiAgdmFyIHplcm9zID0gW107CiAgdmFyIGdyb3VwU2l6ZXMgPSBbXTsKICB2YXIgZ3JvdXBCYXNlcyA9IFtdOwoKICB2YXIgcyA9ICcnOwogIHZhciBpID0gLTE7CiAgd2hpbGUgKCsraSA8IEJOLndvcmRTaXplKSB7CiAgICB6ZXJvc1tpXSA9IHM7CiAgICBzICs9ICcwJzsKICB9CiAgZ3JvdXBTaXplc1swXSA9IDA7CiAgZ3JvdXBTaXplc1sxXSA9IDA7CiAgZ3JvdXBCYXNlc1swXSA9IDA7CiAgZ3JvdXBCYXNlc1sxXSA9IDA7CiAgdmFyIGJhc2UgPSAyIC0gMTsKICB3aGlsZSAoKytiYXNlIDwgMzYgKyAxKSB7CiAgICB2YXIgZ3JvdXBTaXplID0gMDsKICAgIHZhciBncm91cEJhc2UgPSAxOwogICAgd2hpbGUgKGdyb3VwQmFzZSA8ICgxIDw8IEJOLndvcmRTaXplKSAvIGJhc2UpIHsKICAgICAgZ3JvdXBCYXNlICo9IGJhc2U7CiAgICAgIGdyb3VwU2l6ZSArPSAxOwogICAgfQogICAgZ3JvdXBTaXplc1tiYXNlXSA9IGdyb3VwU2l6ZTsKICAgIGdyb3VwQmFzZXNbYmFzZV0gPSBncm91cEJhc2U7CiAgfQoKICAqLwoKICB2YXIgemVyb3MgPSBbCiAgICAnJywKICAgICcwJywKICAgICcwMCcsCiAgICAnMDAwJywKICAgICcwMDAwJywKICAgICcwMDAwMCcsCiAgICAnMDAwMDAwJywKICAgICcwMDAwMDAwJywKICAgICcwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJwogIF07CgogIHZhciBncm91cFNpemVzID0gWwogICAgMCwgMCwKICAgIDI1LCAxNiwgMTIsIDExLCAxMCwgOSwgOCwKICAgIDgsIDcsIDcsIDcsIDcsIDYsIDYsCiAgICA2LCA2LCA2LCA2LCA2LCA1LCA1LAogICAgNSwgNSwgNSwgNSwgNSwgNSwgNSwKICAgIDUsIDUsIDUsIDUsIDUsIDUsIDUKICBdOwoKICB2YXIgZ3JvdXBCYXNlcyA9IFsKICAgIDAsIDAsCiAgICAzMzU1NDQzMiwgNDMwNDY3MjEsIDE2Nzc3MjE2LCA0ODgyODEyNSwgNjA0NjYxNzYsIDQwMzUzNjA3LCAxNjc3NzIxNiwKICAgIDQzMDQ2NzIxLCAxMDAwMDAwMCwgMTk0ODcxNzEsIDM1ODMxODA4LCA2Mjc0ODUxNywgNzUyOTUzNiwgMTEzOTA2MjUsCiAgICAxNjc3NzIxNiwgMjQxMzc1NjksIDM0MDEyMjI0LCA0NzA0NTg4MSwgNjQwMDAwMDAsIDQwODQxMDEsIDUxNTM2MzIsCiAgICA2NDM2MzQzLCA3OTYyNjI0LCA5NzY1NjI1LCAxMTg4MTM3NiwgMTQzNDg5MDcsIDE3MjEwMzY4LCAyMDUxMTE0OSwKICAgIDI0MzAwMDAwLCAyODYyOTE1MSwgMzM1NTQ0MzIsIDM5MTM1MzkzLCA0NTQzNTQyNCwgNTI1MjE4NzUsIDYwNDY2MTc2CiAgXTsKCiAgQk4ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKGJhc2UsIHBhZGRpbmcpIHsKICAgIGJhc2UgPSBiYXNlIHx8IDEwOwogICAgcGFkZGluZyA9IHBhZGRpbmcgfCAwIHx8IDE7CgogICAgdmFyIG91dDsKICAgIGlmIChiYXNlID09PSAxNiB8fCBiYXNlID09PSAnaGV4JykgewogICAgICBvdXQgPSAnJzsKICAgICAgdmFyIG9mZiA9IDA7CiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB3ID0gdGhpcy53b3Jkc1tpXTsKICAgICAgICB2YXIgd29yZCA9ICgoKHcgPDwgb2ZmKSB8IGNhcnJ5KSAmIDB4ZmZmZmZmKS50b1N0cmluZygxNik7CiAgICAgICAgY2FycnkgPSAodyA+Pj4gKDI0IC0gb2ZmKSkgJiAweGZmZmZmZjsKICAgICAgICBpZiAoY2FycnkgIT09IDAgfHwgaSAhPT0gdGhpcy5sZW5ndGggLSAxKSB7CiAgICAgICAgICBvdXQgPSB6ZXJvc1s2IC0gd29yZC5sZW5ndGhdICsgd29yZCArIG91dDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb3V0ID0gd29yZCArIG91dDsKICAgICAgICB9CiAgICAgICAgb2ZmICs9IDI7CiAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgb2ZmIC09IDI2OwogICAgICAgICAgaS0tOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgICBvdXQgPSBjYXJyeS50b1N0cmluZygxNikgKyBvdXQ7CiAgICAgIH0KICAgICAgd2hpbGUgKG91dC5sZW5ndGggJSBwYWRkaW5nICE9PSAwKSB7CiAgICAgICAgb3V0ID0gJzAnICsgb3V0OwogICAgICB9CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgb3V0ID0gJy0nICsgb3V0OwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CgogICAgaWYgKGJhc2UgPT09IChiYXNlIHwgMCkgJiYgYmFzZSA+PSAyICYmIGJhc2UgPD0gMzYpIHsKICAgICAgLy8gdmFyIGdyb3VwU2l6ZSA9IE1hdGguZmxvb3IoQk4ud29yZFNpemUgKiBNYXRoLkxOMiAvIE1hdGgubG9nKGJhc2UpKTsKICAgICAgdmFyIGdyb3VwU2l6ZSA9IGdyb3VwU2l6ZXNbYmFzZV07CiAgICAgIC8vIHZhciBncm91cEJhc2UgPSBNYXRoLnBvdyhiYXNlLCBncm91cFNpemUpOwogICAgICB2YXIgZ3JvdXBCYXNlID0gZ3JvdXBCYXNlc1tiYXNlXTsKICAgICAgb3V0ID0gJyc7CiAgICAgIHZhciBjID0gdGhpcy5jbG9uZSgpOwogICAgICBjLm5lZ2F0aXZlID0gMDsKICAgICAgd2hpbGUgKCFjLmlzWmVybygpKSB7CiAgICAgICAgdmFyIHIgPSBjLm1vZG4oZ3JvdXBCYXNlKS50b1N0cmluZyhiYXNlKTsKICAgICAgICBjID0gYy5pZGl2bihncm91cEJhc2UpOwoKICAgICAgICBpZiAoIWMuaXNaZXJvKCkpIHsKICAgICAgICAgIG91dCA9IHplcm9zW2dyb3VwU2l6ZSAtIHIubGVuZ3RoXSArIHIgKyBvdXQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG91dCA9IHIgKyBvdXQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmlzWmVybygpKSB7CiAgICAgICAgb3V0ID0gJzAnICsgb3V0OwogICAgICB9CiAgICAgIHdoaWxlIChvdXQubGVuZ3RoICUgcGFkZGluZyAhPT0gMCkgewogICAgICAgIG91dCA9ICcwJyArIG91dDsKICAgICAgfQogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIG91dCA9ICctJyArIG91dDsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQoKICAgIGFzc2VydChmYWxzZSwgJ0Jhc2Ugc2hvdWxkIGJlIGJldHdlZW4gMiBhbmQgMzYnKTsKICB9OwoKICBCTi5wcm90b3R5cGUudG9OdW1iZXIgPSBmdW5jdGlvbiB0b051bWJlciAoKSB7CiAgICB2YXIgbGVuZ3RoID0gdGhpcy5iaXRMZW5ndGgoKTsKICAgIHZhciByZXQ7CiAgICBpZiAobGVuZ3RoIDw9IDI2KSB7CiAgICAgIHJldCA9IHRoaXMud29yZHNbMF07CiAgICB9IGVsc2UgaWYgKGxlbmd0aCA8PSA1MikgewogICAgICByZXQgPSAodGhpcy53b3Jkc1sxXSAqIDB4NDAwMDAwMCkgKyB0aGlzLndvcmRzWzBdOwogICAgfSBlbHNlIGlmIChsZW5ndGggPT09IDUzKSB7CiAgICAgIC8vIE5PVEU6IGF0IHRoaXMgc3RhZ2UgaXQgaXMga25vd24gdGhhdCB0aGUgdG9wIGJpdCBpcyBzZXQKICAgICAgcmV0ID0gMHgxMDAwMDAwMDAwMDAwMCArICh0aGlzLndvcmRzWzFdICogMHg0MDAwMDAwKSArIHRoaXMud29yZHNbMF07CiAgICB9IGVsc2UgewogICAgICBhc3NlcnQoZmFsc2UsICdOdW1iZXIgY2FuIG9ubHkgc2FmZWx5IHN0b3JlIHVwIHRvIDUzIGJpdHMnKTsKICAgIH0KICAgIHJldHVybiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgPyAtcmV0IDogcmV0OwogIH07CgogIEJOLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkgewogICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoMTYpOwogIH07CgogIEJOLnByb3RvdHlwZS50b0J1ZmZlciA9IGZ1bmN0aW9uIHRvQnVmZmVyIChlbmRpYW4sIGxlbmd0aCkgewogICAgYXNzZXJ0KHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKTsKICAgIHJldHVybiB0aGlzLnRvQXJyYXlMaWtlKEJ1ZmZlciwgZW5kaWFuLCBsZW5ndGgpOwogIH07CgogIEJOLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gdG9BcnJheSAoZW5kaWFuLCBsZW5ndGgpIHsKICAgIHJldHVybiB0aGlzLnRvQXJyYXlMaWtlKEFycmF5LCBlbmRpYW4sIGxlbmd0aCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnRvQXJyYXlMaWtlID0gZnVuY3Rpb24gdG9BcnJheUxpa2UgKEFycmF5VHlwZSwgZW5kaWFuLCBsZW5ndGgpIHsKICAgIHZhciBieXRlTGVuZ3RoID0gdGhpcy5ieXRlTGVuZ3RoKCk7CiAgICB2YXIgcmVxTGVuZ3RoID0gbGVuZ3RoIHx8IE1hdGgubWF4KDEsIGJ5dGVMZW5ndGgpOwogICAgYXNzZXJ0KGJ5dGVMZW5ndGggPD0gcmVxTGVuZ3RoLCAnYnl0ZSBhcnJheSBsb25nZXIgdGhhbiBkZXNpcmVkIGxlbmd0aCcpOwogICAgYXNzZXJ0KHJlcUxlbmd0aCA+IDAsICdSZXF1ZXN0ZWQgYXJyYXkgbGVuZ3RoIDw9IDAnKTsKCiAgICB0aGlzLnN0cmlwKCk7CiAgICB2YXIgbGl0dGxlRW5kaWFuID0gZW5kaWFuID09PSAnbGUnOwogICAgdmFyIHJlcyA9IG5ldyBBcnJheVR5cGUocmVxTGVuZ3RoKTsKCiAgICB2YXIgYiwgaTsKICAgIHZhciBxID0gdGhpcy5jbG9uZSgpOwogICAgaWYgKCFsaXR0bGVFbmRpYW4pIHsKICAgICAgLy8gQXNzdW1lIGJpZy1lbmRpYW4KICAgICAgZm9yIChpID0gMDsgaSA8IHJlcUxlbmd0aCAtIGJ5dGVMZW5ndGg7IGkrKykgewogICAgICAgIHJlc1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIGZvciAoaSA9IDA7ICFxLmlzWmVybygpOyBpKyspIHsKICAgICAgICBiID0gcS5hbmRsbigweGZmKTsKICAgICAgICBxLml1c2hybig4KTsKCiAgICAgICAgcmVzW3JlcUxlbmd0aCAtIGkgLSAxXSA9IGI7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGZvciAoaSA9IDA7ICFxLmlzWmVybygpOyBpKyspIHsKICAgICAgICBiID0gcS5hbmRsbigweGZmKTsKICAgICAgICBxLml1c2hybig4KTsKCiAgICAgICAgcmVzW2ldID0gYjsKICAgICAgfQoKICAgICAgZm9yICg7IGkgPCByZXFMZW5ndGg7IGkrKykgewogICAgICAgIHJlc1tpXSA9IDA7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gcmVzOwogIH07CgogIGlmIChNYXRoLmNsejMyKSB7CiAgICBCTi5wcm90b3R5cGUuX2NvdW50Qml0cyA9IGZ1bmN0aW9uIF9jb3VudEJpdHMgKHcpIHsKICAgICAgcmV0dXJuIDMyIC0gTWF0aC5jbHozMih3KTsKICAgIH07CiAgfSBlbHNlIHsKICAgIEJOLnByb3RvdHlwZS5fY291bnRCaXRzID0gZnVuY3Rpb24gX2NvdW50Qml0cyAodykgewogICAgICB2YXIgdCA9IHc7CiAgICAgIHZhciByID0gMDsKICAgICAgaWYgKHQgPj0gMHgxMDAwKSB7CiAgICAgICAgciArPSAxMzsKICAgICAgICB0ID4+Pj0gMTM7CiAgICAgIH0KICAgICAgaWYgKHQgPj0gMHg0MCkgewogICAgICAgIHIgKz0gNzsKICAgICAgICB0ID4+Pj0gNzsKICAgICAgfQogICAgICBpZiAodCA+PSAweDgpIHsKICAgICAgICByICs9IDQ7CiAgICAgICAgdCA+Pj49IDQ7CiAgICAgIH0KICAgICAgaWYgKHQgPj0gMHgwMikgewogICAgICAgIHIgKz0gMjsKICAgICAgICB0ID4+Pj0gMjsKICAgICAgfQogICAgICByZXR1cm4gciArIHQ7CiAgICB9OwogIH0KCiAgQk4ucHJvdG90eXBlLl96ZXJvQml0cyA9IGZ1bmN0aW9uIF96ZXJvQml0cyAodykgewogICAgLy8gU2hvcnQtY3V0CiAgICBpZiAodyA9PT0gMCkgcmV0dXJuIDI2OwoKICAgIHZhciB0ID0gdzsKICAgIHZhciByID0gMDsKICAgIGlmICgodCAmIDB4MWZmZikgPT09IDApIHsKICAgICAgciArPSAxMzsKICAgICAgdCA+Pj49IDEzOwogICAgfQogICAgaWYgKCh0ICYgMHg3ZikgPT09IDApIHsKICAgICAgciArPSA3OwogICAgICB0ID4+Pj0gNzsKICAgIH0KICAgIGlmICgodCAmIDB4ZikgPT09IDApIHsKICAgICAgciArPSA0OwogICAgICB0ID4+Pj0gNDsKICAgIH0KICAgIGlmICgodCAmIDB4MykgPT09IDApIHsKICAgICAgciArPSAyOwogICAgICB0ID4+Pj0gMjsKICAgIH0KICAgIGlmICgodCAmIDB4MSkgPT09IDApIHsKICAgICAgcisrOwogICAgfQogICAgcmV0dXJuIHI7CiAgfTsKCiAgLy8gUmV0dXJuIG51bWJlciBvZiB1c2VkIGJpdHMgaW4gYSBCTgogIEJOLnByb3RvdHlwZS5iaXRMZW5ndGggPSBmdW5jdGlvbiBiaXRMZW5ndGggKCkgewogICAgdmFyIHcgPSB0aGlzLndvcmRzW3RoaXMubGVuZ3RoIC0gMV07CiAgICB2YXIgaGkgPSB0aGlzLl9jb3VudEJpdHModyk7CiAgICByZXR1cm4gKHRoaXMubGVuZ3RoIC0gMSkgKiAyNiArIGhpOwogIH07CgogIGZ1bmN0aW9uIHRvQml0QXJyYXkgKG51bSkgewogICAgdmFyIHcgPSBuZXcgQXJyYXkobnVtLmJpdExlbmd0aCgpKTsKCiAgICBmb3IgKHZhciBiaXQgPSAwOyBiaXQgPCB3Lmxlbmd0aDsgYml0KyspIHsKICAgICAgdmFyIG9mZiA9IChiaXQgLyAyNikgfCAwOwogICAgICB2YXIgd2JpdCA9IGJpdCAlIDI2OwoKICAgICAgd1tiaXRdID0gKG51bS53b3Jkc1tvZmZdICYgKDEgPDwgd2JpdCkpID4+PiB3Yml0OwogICAgfQoKICAgIHJldHVybiB3OwogIH0KCiAgLy8gTnVtYmVyIG9mIHRyYWlsaW5nIHplcm8gYml0cwogIEJOLnByb3RvdHlwZS56ZXJvQml0cyA9IGZ1bmN0aW9uIHplcm9CaXRzICgpIHsKICAgIGlmICh0aGlzLmlzWmVybygpKSByZXR1cm4gMDsKCiAgICB2YXIgciA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGIgPSB0aGlzLl96ZXJvQml0cyh0aGlzLndvcmRzW2ldKTsKICAgICAgciArPSBiOwogICAgICBpZiAoYiAhPT0gMjYpIGJyZWFrOwogICAgfQogICAgcmV0dXJuIHI7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmJ5dGVMZW5ndGggPSBmdW5jdGlvbiBieXRlTGVuZ3RoICgpIHsKICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5iaXRMZW5ndGgoKSAvIDgpOwogIH07CgogIEJOLnByb3RvdHlwZS50b1R3b3MgPSBmdW5jdGlvbiB0b1R3b3MgKHdpZHRoKSB7CiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICByZXR1cm4gdGhpcy5hYnMoKS5pbm90bih3aWR0aCkuaWFkZG4oMSk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpOwogIH07CgogIEJOLnByb3RvdHlwZS5mcm9tVHdvcyA9IGZ1bmN0aW9uIGZyb21Ud29zICh3aWR0aCkgewogICAgaWYgKHRoaXMudGVzdG4od2lkdGggLSAxKSkgewogICAgICByZXR1cm4gdGhpcy5ub3RuKHdpZHRoKS5pYWRkbigxKS5pbmVnKCk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpOwogIH07CgogIEJOLnByb3RvdHlwZS5pc05lZyA9IGZ1bmN0aW9uIGlzTmVnICgpIHsKICAgIHJldHVybiB0aGlzLm5lZ2F0aXZlICE9PSAwOwogIH07CgogIC8vIFJldHVybiBuZWdhdGl2ZSBjbG9uZSBvZiBgdGhpc2AKICBCTi5wcm90b3R5cGUubmVnID0gZnVuY3Rpb24gbmVnICgpIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaW5lZygpOwogIH07CgogIEJOLnByb3RvdHlwZS5pbmVnID0gZnVuY3Rpb24gaW5lZyAoKSB7CiAgICBpZiAoIXRoaXMuaXNaZXJvKCkpIHsKICAgICAgdGhpcy5uZWdhdGl2ZSBePSAxOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIE9yIGBudW1gIHdpdGggYHRoaXNgIGluLXBsYWNlCiAgQk4ucHJvdG90eXBlLml1b3IgPSBmdW5jdGlvbiBpdW9yIChudW0pIHsKICAgIHdoaWxlICh0aGlzLmxlbmd0aCA8IG51bS5sZW5ndGgpIHsKICAgICAgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCsrXSA9IDA7CiAgICB9CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgdGhpcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaV0gfCBudW0ud29yZHNbaV07CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaW9yID0gZnVuY3Rpb24gaW9yIChudW0pIHsKICAgIGFzc2VydCgodGhpcy5uZWdhdGl2ZSB8IG51bS5uZWdhdGl2ZSkgPT09IDApOwogICAgcmV0dXJuIHRoaXMuaXVvcihudW0pOwogIH07CgogIC8vIE9yIGBudW1gIHdpdGggYHRoaXNgCiAgQk4ucHJvdG90eXBlLm9yID0gZnVuY3Rpb24gb3IgKG51bSkgewogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pb3IobnVtKTsKICAgIHJldHVybiBudW0uY2xvbmUoKS5pb3IodGhpcyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnVvciA9IGZ1bmN0aW9uIHVvciAobnVtKSB7CiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1b3IobnVtKTsKICAgIHJldHVybiBudW0uY2xvbmUoKS5pdW9yKHRoaXMpOwogIH07CgogIC8vIEFuZCBgbnVtYCB3aXRoIGB0aGlzYCBpbi1wbGFjZQogIEJOLnByb3RvdHlwZS5pdWFuZCA9IGZ1bmN0aW9uIGl1YW5kIChudW0pIHsKICAgIC8vIGIgPSBtaW4tbGVuZ3RoKG51bSwgdGhpcykKICAgIHZhciBiOwogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgewogICAgICBiID0gbnVtOwogICAgfSBlbHNlIHsKICAgICAgYiA9IHRoaXM7CiAgICB9CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSB0aGlzLndvcmRzW2ldICYgbnVtLndvcmRzW2ldOwogICAgfQoKICAgIHRoaXMubGVuZ3RoID0gYi5sZW5ndGg7CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaWFuZCA9IGZ1bmN0aW9uIGlhbmQgKG51bSkgewogICAgYXNzZXJ0KCh0aGlzLm5lZ2F0aXZlIHwgbnVtLm5lZ2F0aXZlKSA9PT0gMCk7CiAgICByZXR1cm4gdGhpcy5pdWFuZChudW0pOwogIH07CgogIC8vIEFuZCBgbnVtYCB3aXRoIGB0aGlzYAogIEJOLnByb3RvdHlwZS5hbmQgPSBmdW5jdGlvbiBhbmQgKG51bSkgewogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYW5kKG51bSk7CiAgICByZXR1cm4gbnVtLmNsb25lKCkuaWFuZCh0aGlzKTsKICB9OwoKICBCTi5wcm90b3R5cGUudWFuZCA9IGZ1bmN0aW9uIHVhbmQgKG51bSkgewogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pdWFuZChudW0pOwogICAgcmV0dXJuIG51bS5jbG9uZSgpLml1YW5kKHRoaXMpOwogIH07CgogIC8vIFhvciBgbnVtYCB3aXRoIGB0aGlzYCBpbi1wbGFjZQogIEJOLnByb3RvdHlwZS5pdXhvciA9IGZ1bmN0aW9uIGl1eG9yIChudW0pIHsKICAgIC8vIGEubGVuZ3RoID4gYi5sZW5ndGgKICAgIHZhciBhOwogICAgdmFyIGI7CiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSB7CiAgICAgIGEgPSB0aGlzOwogICAgICBiID0gbnVtOwogICAgfSBlbHNlIHsKICAgICAgYSA9IG51bTsKICAgICAgYiA9IHRoaXM7CiAgICB9CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSBhLndvcmRzW2ldIF4gYi53b3Jkc1tpXTsKICAgIH0KCiAgICBpZiAodGhpcyAhPT0gYSkgewogICAgICBmb3IgKDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgfQogICAgfQoKICAgIHRoaXMubGVuZ3RoID0gYS5sZW5ndGg7CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaXhvciA9IGZ1bmN0aW9uIGl4b3IgKG51bSkgewogICAgYXNzZXJ0KCh0aGlzLm5lZ2F0aXZlIHwgbnVtLm5lZ2F0aXZlKSA9PT0gMCk7CiAgICByZXR1cm4gdGhpcy5pdXhvcihudW0pOwogIH07CgogIC8vIFhvciBgbnVtYCB3aXRoIGB0aGlzYAogIEJOLnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiB4b3IgKG51bSkgewogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5peG9yKG51bSk7CiAgICByZXR1cm4gbnVtLmNsb25lKCkuaXhvcih0aGlzKTsKICB9OwoKICBCTi5wcm90b3R5cGUudXhvciA9IGZ1bmN0aW9uIHV4b3IgKG51bSkgewogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pdXhvcihudW0pOwogICAgcmV0dXJuIG51bS5jbG9uZSgpLml1eG9yKHRoaXMpOwogIH07CgogIC8vIE5vdCBgYHRoaXNgYCB3aXRoIGBgd2lkdGhgYCBiaXR3aWR0aAogIEJOLnByb3RvdHlwZS5pbm90biA9IGZ1bmN0aW9uIGlub3RuICh3aWR0aCkgewogICAgYXNzZXJ0KHR5cGVvZiB3aWR0aCA9PT0gJ251bWJlcicgJiYgd2lkdGggPj0gMCk7CgogICAgdmFyIGJ5dGVzTmVlZGVkID0gTWF0aC5jZWlsKHdpZHRoIC8gMjYpIHwgMDsKICAgIHZhciBiaXRzTGVmdCA9IHdpZHRoICUgMjY7CgogICAgLy8gRXh0ZW5kIHRoZSBidWZmZXIgd2l0aCBsZWFkaW5nIHplcm9lcwogICAgdGhpcy5fZXhwYW5kKGJ5dGVzTmVlZGVkKTsKCiAgICBpZiAoYml0c0xlZnQgPiAwKSB7CiAgICAgIGJ5dGVzTmVlZGVkLS07CiAgICB9CgogICAgLy8gSGFuZGxlIGNvbXBsZXRlIHdvcmRzCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzTmVlZGVkOyBpKyspIHsKICAgICAgdGhpcy53b3Jkc1tpXSA9IH50aGlzLndvcmRzW2ldICYgMHgzZmZmZmZmOwogICAgfQoKICAgIC8vIEhhbmRsZSB0aGUgcmVzaWR1ZQogICAgaWYgKGJpdHNMZWZ0ID4gMCkgewogICAgICB0aGlzLndvcmRzW2ldID0gfnRoaXMud29yZHNbaV0gJiAoMHgzZmZmZmZmID4+ICgyNiAtIGJpdHNMZWZ0KSk7CiAgICB9CgogICAgLy8gQW5kIHJlbW92ZSBsZWFkaW5nIHplcm9lcwogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUubm90biA9IGZ1bmN0aW9uIG5vdG4gKHdpZHRoKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlub3RuKHdpZHRoKTsKICB9OwoKICAvLyBTZXQgYGJpdGAgb2YgYHRoaXNgCiAgQk4ucHJvdG90eXBlLnNldG4gPSBmdW5jdGlvbiBzZXRuIChiaXQsIHZhbCkgewogICAgYXNzZXJ0KHR5cGVvZiBiaXQgPT09ICdudW1iZXInICYmIGJpdCA+PSAwKTsKCiAgICB2YXIgb2ZmID0gKGJpdCAvIDI2KSB8IDA7CiAgICB2YXIgd2JpdCA9IGJpdCAlIDI2OwoKICAgIHRoaXMuX2V4cGFuZChvZmYgKyAxKTsKCiAgICBpZiAodmFsKSB7CiAgICAgIHRoaXMud29yZHNbb2ZmXSA9IHRoaXMud29yZHNbb2ZmXSB8ICgxIDw8IHdiaXQpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy53b3Jkc1tvZmZdID0gdGhpcy53b3Jkc1tvZmZdICYgfigxIDw8IHdiaXQpOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgLy8gQWRkIGBudW1gIHRvIGB0aGlzYCBpbi1wbGFjZQogIEJOLnByb3RvdHlwZS5pYWRkID0gZnVuY3Rpb24gaWFkZCAobnVtKSB7CiAgICB2YXIgcjsKCiAgICAvLyBuZWdhdGl2ZSArIHBvc2l0aXZlCiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiBudW0ubmVnYXRpdmUgPT09IDApIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIHIgPSB0aGlzLmlzdWIobnVtKTsKICAgICAgdGhpcy5uZWdhdGl2ZSBePSAxOwogICAgICByZXR1cm4gdGhpcy5fbm9ybVNpZ24oKTsKCiAgICAvLyBwb3NpdGl2ZSArIG5lZ2F0aXZlCiAgICB9IGVsc2UgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbnVtLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIG51bS5uZWdhdGl2ZSA9IDA7CiAgICAgIHIgPSB0aGlzLmlzdWIobnVtKTsKICAgICAgbnVtLm5lZ2F0aXZlID0gMTsKICAgICAgcmV0dXJuIHIuX25vcm1TaWduKCk7CiAgICB9CgogICAgLy8gYS5sZW5ndGggPiBiLmxlbmd0aAogICAgdmFyIGEsIGI7CiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSB7CiAgICAgIGEgPSB0aGlzOwogICAgICBiID0gbnVtOwogICAgfSBlbHNlIHsKICAgICAgYSA9IG51bTsKICAgICAgYiA9IHRoaXM7CiAgICB9CgogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICByID0gKGEud29yZHNbaV0gfCAwKSArIChiLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgIGNhcnJ5ID0gciA+Pj4gMjY7CiAgICB9CiAgICBmb3IgKDsgY2FycnkgIT09IDAgJiYgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgIGNhcnJ5ID0gciA+Pj4gMjY7CiAgICB9CgogICAgdGhpcy5sZW5ndGggPSBhLmxlbmd0aDsKICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoXSA9IGNhcnJ5OwogICAgICB0aGlzLmxlbmd0aCsrOwogICAgLy8gQ29weSB0aGUgcmVzdCBvZiB0aGUgd29yZHMKICAgIH0gZWxzZSBpZiAoYSAhPT0gdGhpcykgewogICAgICBmb3IgKDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIEFkZCBgbnVtYCB0byBgdGhpc2AKICBCTi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChudW0pIHsKICAgIHZhciByZXM7CiAgICBpZiAobnVtLm5lZ2F0aXZlICE9PSAwICYmIHRoaXMubmVnYXRpdmUgPT09IDApIHsKICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgcmVzID0gdGhpcy5zdWIobnVtKTsKICAgICAgbnVtLm5lZ2F0aXZlIF49IDE7CiAgICAgIHJldHVybiByZXM7CiAgICB9IGVsc2UgaWYgKG51bS5uZWdhdGl2ZSA9PT0gMCAmJiB0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICByZXMgPSBudW0uc3ViKHRoaXMpOwogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgcmV0dXJuIHJlczsKICAgIH0KCiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLmlhZGQobnVtKTsKCiAgICByZXR1cm4gbnVtLmNsb25lKCkuaWFkZCh0aGlzKTsKICB9OwoKICAvLyBTdWJ0cmFjdCBgbnVtYCBmcm9tIGB0aGlzYCBpbi1wbGFjZQogIEJOLnByb3RvdHlwZS5pc3ViID0gZnVuY3Rpb24gaXN1YiAobnVtKSB7CiAgICAvLyB0aGlzIC0gKC1udW0pID0gdGhpcyArIG51bQogICAgaWYgKG51bS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICBudW0ubmVnYXRpdmUgPSAwOwogICAgICB2YXIgciA9IHRoaXMuaWFkZChudW0pOwogICAgICBudW0ubmVnYXRpdmUgPSAxOwogICAgICByZXR1cm4gci5fbm9ybVNpZ24oKTsKCiAgICAvLyAtdGhpcyAtIG51bSA9IC0odGhpcyArIG51bSkKICAgIH0gZWxzZSBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgdGhpcy5pYWRkKG51bSk7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICByZXR1cm4gdGhpcy5fbm9ybVNpZ24oKTsKICAgIH0KCiAgICAvLyBBdCB0aGlzIHBvaW50IGJvdGggbnVtYmVycyBhcmUgcG9zaXRpdmUKICAgIHZhciBjbXAgPSB0aGlzLmNtcChudW0pOwoKICAgIC8vIE9wdGltaXphdGlvbiAtIHplcm9pZnkKICAgIGlmIChjbXAgPT09IDApIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgdGhpcy53b3Jkc1swXSA9IDA7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8vIGEgPiBiCiAgICB2YXIgYSwgYjsKICAgIGlmIChjbXAgPiAwKSB7CiAgICAgIGEgPSB0aGlzOwogICAgICBiID0gbnVtOwogICAgfSBlbHNlIHsKICAgICAgYSA9IG51bTsKICAgICAgYiA9IHRoaXM7CiAgICB9CgogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICByID0gKGEud29yZHNbaV0gfCAwKSAtIChiLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgY2FycnkgPSByID4+IDI2OwogICAgICB0aGlzLndvcmRzW2ldID0gciAmIDB4M2ZmZmZmZjsKICAgIH0KICAgIGZvciAoOyBjYXJyeSAhPT0gMCAmJiBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICByID0gKGEud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICBjYXJyeSA9IHIgPj4gMjY7CiAgICAgIHRoaXMud29yZHNbaV0gPSByICYgMHgzZmZmZmZmOwogICAgfQoKICAgIC8vIENvcHkgcmVzdCBvZiB0aGUgd29yZHMKICAgIGlmIChjYXJyeSA9PT0gMCAmJiBpIDwgYS5sZW5ndGggJiYgYSAhPT0gdGhpcykgewogICAgICBmb3IgKDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgfQogICAgfQoKICAgIHRoaXMubGVuZ3RoID0gTWF0aC5tYXgodGhpcy5sZW5ndGgsIGkpOwoKICAgIGlmIChhICE9PSB0aGlzKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgLy8gU3VidHJhY3QgYG51bWAgZnJvbSBgdGhpc2AKICBCTi5wcm90b3R5cGUuc3ViID0gZnVuY3Rpb24gc3ViIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXN1YihudW0pOwogIH07CgogIGZ1bmN0aW9uIHNtYWxsTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICBvdXQubmVnYXRpdmUgPSBudW0ubmVnYXRpdmUgXiBzZWxmLm5lZ2F0aXZlOwogICAgdmFyIGxlbiA9IChzZWxmLmxlbmd0aCArIG51bS5sZW5ndGgpIHwgMDsKICAgIG91dC5sZW5ndGggPSBsZW47CiAgICBsZW4gPSAobGVuIC0gMSkgfCAwOwoKICAgIC8vIFBlZWwgb25lIGl0ZXJhdGlvbiAoY29tcGlsZXIgY2FuJ3QgZG8gaXQsIGJlY2F1c2Ugb2YgY29kZSBjb21wbGV4aXR5KQogICAgdmFyIGEgPSBzZWxmLndvcmRzWzBdIHwgMDsKICAgIHZhciBiID0gbnVtLndvcmRzWzBdIHwgMDsKICAgIHZhciByID0gYSAqIGI7CgogICAgdmFyIGxvID0gciAmIDB4M2ZmZmZmZjsKICAgIHZhciBjYXJyeSA9IChyIC8gMHg0MDAwMDAwKSB8IDA7CiAgICBvdXQud29yZHNbMF0gPSBsbzsKCiAgICBmb3IgKHZhciBrID0gMTsgayA8IGxlbjsgaysrKSB7CiAgICAgIC8vIFN1bSBhbGwgd29yZHMgd2l0aCB0aGUgc2FtZSBgaSArIGogPSBrYCBhbmQgYWNjdW11bGF0ZSBgbmNhcnJ5YCwKICAgICAgLy8gbm90ZSB0aGF0IG5jYXJyeSBjb3VsZCBiZSA+PSAweDNmZmZmZmYKICAgICAgdmFyIG5jYXJyeSA9IGNhcnJ5ID4+PiAyNjsKICAgICAgdmFyIHJ3b3JkID0gY2FycnkgJiAweDNmZmZmZmY7CiAgICAgIHZhciBtYXhKID0gTWF0aC5taW4oaywgbnVtLmxlbmd0aCAtIDEpOwogICAgICBmb3IgKHZhciBqID0gTWF0aC5tYXgoMCwgayAtIHNlbGYubGVuZ3RoICsgMSk7IGogPD0gbWF4SjsgaisrKSB7CiAgICAgICAgdmFyIGkgPSAoayAtIGopIHwgMDsKICAgICAgICBhID0gc2VsZi53b3Jkc1tpXSB8IDA7CiAgICAgICAgYiA9IG51bS53b3Jkc1tqXSB8IDA7CiAgICAgICAgciA9IGEgKiBiICsgcndvcmQ7CiAgICAgICAgbmNhcnJ5ICs9IChyIC8gMHg0MDAwMDAwKSB8IDA7CiAgICAgICAgcndvcmQgPSByICYgMHgzZmZmZmZmOwogICAgICB9CiAgICAgIG91dC53b3Jkc1trXSA9IHJ3b3JkIHwgMDsKICAgICAgY2FycnkgPSBuY2FycnkgfCAwOwogICAgfQogICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgIG91dC53b3Jkc1trXSA9IGNhcnJ5IHwgMDsKICAgIH0gZWxzZSB7CiAgICAgIG91dC5sZW5ndGgtLTsKICAgIH0KCiAgICByZXR1cm4gb3V0LnN0cmlwKCk7CiAgfQoKICAvLyBUT0RPKGluZHV0bnkpOiBpdCBtYXkgYmUgcmVhc29uYWJsZSB0byBvbWl0IGl0IGZvciB1c2VycyB3aG8gZG9uJ3QgbmVlZAogIC8vIHRvIHdvcmsgd2l0aCAyNTYtYml0IG51bWJlcnMsIG90aGVyd2lzZSBpdCBnaXZlcyAyMCUgaW1wcm92ZW1lbnQgZm9yIDI1Ni1iaXQKICAvLyBtdWx0aXBsaWNhdGlvbiAobGlrZSBlbGxpcHRpYyBzZWNwMjU2azEpLgogIHZhciBjb21iMTBNdWxUbyA9IGZ1bmN0aW9uIGNvbWIxME11bFRvIChzZWxmLCBudW0sIG91dCkgewogICAgdmFyIGEgPSBzZWxmLndvcmRzOwogICAgdmFyIGIgPSBudW0ud29yZHM7CiAgICB2YXIgbyA9IG91dC53b3JkczsKICAgIHZhciBjID0gMDsKICAgIHZhciBsbzsKICAgIHZhciBtaWQ7CiAgICB2YXIgaGk7CiAgICB2YXIgYTAgPSBhWzBdIHwgMDsKICAgIHZhciBhbDAgPSBhMCAmIDB4MWZmZjsKICAgIHZhciBhaDAgPSBhMCA+Pj4gMTM7CiAgICB2YXIgYTEgPSBhWzFdIHwgMDsKICAgIHZhciBhbDEgPSBhMSAmIDB4MWZmZjsKICAgIHZhciBhaDEgPSBhMSA+Pj4gMTM7CiAgICB2YXIgYTIgPSBhWzJdIHwgMDsKICAgIHZhciBhbDIgPSBhMiAmIDB4MWZmZjsKICAgIHZhciBhaDIgPSBhMiA+Pj4gMTM7CiAgICB2YXIgYTMgPSBhWzNdIHwgMDsKICAgIHZhciBhbDMgPSBhMyAmIDB4MWZmZjsKICAgIHZhciBhaDMgPSBhMyA+Pj4gMTM7CiAgICB2YXIgYTQgPSBhWzRdIHwgMDsKICAgIHZhciBhbDQgPSBhNCAmIDB4MWZmZjsKICAgIHZhciBhaDQgPSBhNCA+Pj4gMTM7CiAgICB2YXIgYTUgPSBhWzVdIHwgMDsKICAgIHZhciBhbDUgPSBhNSAmIDB4MWZmZjsKICAgIHZhciBhaDUgPSBhNSA+Pj4gMTM7CiAgICB2YXIgYTYgPSBhWzZdIHwgMDsKICAgIHZhciBhbDYgPSBhNiAmIDB4MWZmZjsKICAgIHZhciBhaDYgPSBhNiA+Pj4gMTM7CiAgICB2YXIgYTcgPSBhWzddIHwgMDsKICAgIHZhciBhbDcgPSBhNyAmIDB4MWZmZjsKICAgIHZhciBhaDcgPSBhNyA+Pj4gMTM7CiAgICB2YXIgYTggPSBhWzhdIHwgMDsKICAgIHZhciBhbDggPSBhOCAmIDB4MWZmZjsKICAgIHZhciBhaDggPSBhOCA+Pj4gMTM7CiAgICB2YXIgYTkgPSBhWzldIHwgMDsKICAgIHZhciBhbDkgPSBhOSAmIDB4MWZmZjsKICAgIHZhciBhaDkgPSBhOSA+Pj4gMTM7CiAgICB2YXIgYjAgPSBiWzBdIHwgMDsKICAgIHZhciBibDAgPSBiMCAmIDB4MWZmZjsKICAgIHZhciBiaDAgPSBiMCA+Pj4gMTM7CiAgICB2YXIgYjEgPSBiWzFdIHwgMDsKICAgIHZhciBibDEgPSBiMSAmIDB4MWZmZjsKICAgIHZhciBiaDEgPSBiMSA+Pj4gMTM7CiAgICB2YXIgYjIgPSBiWzJdIHwgMDsKICAgIHZhciBibDIgPSBiMiAmIDB4MWZmZjsKICAgIHZhciBiaDIgPSBiMiA+Pj4gMTM7CiAgICB2YXIgYjMgPSBiWzNdIHwgMDsKICAgIHZhciBibDMgPSBiMyAmIDB4MWZmZjsKICAgIHZhciBiaDMgPSBiMyA+Pj4gMTM7CiAgICB2YXIgYjQgPSBiWzRdIHwgMDsKICAgIHZhciBibDQgPSBiNCAmIDB4MWZmZjsKICAgIHZhciBiaDQgPSBiNCA+Pj4gMTM7CiAgICB2YXIgYjUgPSBiWzVdIHwgMDsKICAgIHZhciBibDUgPSBiNSAmIDB4MWZmZjsKICAgIHZhciBiaDUgPSBiNSA+Pj4gMTM7CiAgICB2YXIgYjYgPSBiWzZdIHwgMDsKICAgIHZhciBibDYgPSBiNiAmIDB4MWZmZjsKICAgIHZhciBiaDYgPSBiNiA+Pj4gMTM7CiAgICB2YXIgYjcgPSBiWzddIHwgMDsKICAgIHZhciBibDcgPSBiNyAmIDB4MWZmZjsKICAgIHZhciBiaDcgPSBiNyA+Pj4gMTM7CiAgICB2YXIgYjggPSBiWzhdIHwgMDsKICAgIHZhciBibDggPSBiOCAmIDB4MWZmZjsKICAgIHZhciBiaDggPSBiOCA+Pj4gMTM7CiAgICB2YXIgYjkgPSBiWzldIHwgMDsKICAgIHZhciBibDkgPSBiOSAmIDB4MWZmZjsKICAgIHZhciBiaDkgPSBiOSA+Pj4gMTM7CgogICAgb3V0Lm5lZ2F0aXZlID0gc2VsZi5uZWdhdGl2ZSBeIG51bS5uZWdhdGl2ZTsKICAgIG91dC5sZW5ndGggPSAxOTsKICAgIC8qIGsgPSAwICovCiAgICBsbyA9IE1hdGguaW11bChhbDAsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWwwLCBiaDApOwogICAgbWlkICs9IE1hdGguaW11bChhaDAsIGJsMCk7CiAgICBoaSA9IE1hdGguaW11bChhaDAsIGJoMCk7CiAgICB2YXIgdzAgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcwID4+PiAyNik7CiAgICB3MCAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMSAqLwogICAgbG8gPSBNYXRoLmltdWwoYWwxLCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsMSwgYmgwKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDApOwogICAgaGkgPSBNYXRoLmltdWwoYWgxLCBiaDApOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMCwgYmwxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwwLCBiaDEpOwogICAgbWlkICs9IE1hdGguaW11bChhaDAsIGJsMSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgwLCBiaDEpOwogICAgdmFyIHcxID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MSA+Pj4gMjYpOwogICAgdzEgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDIgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsMiwgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDIsIGJoMCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMiwgYmwwKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoMiwgYmgwKTsKICAgIGxvICs9IE1hdGguaW11bChhbDEsIGJsMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMSwgYmgxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDEpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMSwgYmgxKTsKICAgIGxvICs9IE1hdGguaW11bChhbDAsIGJsMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMCwgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgwLCBibDIpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMCwgYmgyKTsKICAgIHZhciB3MiA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzIgPj4+IDI2KTsKICAgIHcyICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAzICovCiAgICBsbyA9IE1hdGguaW11bChhbDMsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWwzLCBiaDApOwogICAgbWlkICs9IE1hdGguaW11bChhaDMsIGJsMCk7CiAgICBoaSA9IE1hdGguaW11bChhaDMsIGJoMCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwyLCBibDEpOwogICAgbWlkICs9IE1hdGguaW11bChhbDIsIGJoMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMiwgYmwxKTsKICAgIGhpICs9IE1hdGguaW11bChhaDIsIGJoMSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwxLCBibDIpOwogICAgbWlkICs9IE1hdGguaW11bChhbDEsIGJoMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMSwgYmwyKTsKICAgIGhpICs9IE1hdGguaW11bChhaDEsIGJoMik7CiAgICBsbyArPSBNYXRoLmltdWwoYWwwLCBibDMpOwogICAgbWlkICs9IE1hdGguaW11bChhbDAsIGJoMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMCwgYmwzKTsKICAgIGhpICs9IE1hdGguaW11bChhaDAsIGJoMyk7CiAgICB2YXIgdzMgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHczID4+PiAyNik7CiAgICB3MyAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gNCAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw0LCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsNCwgYmgwKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDApOwogICAgaGkgPSBNYXRoLmltdWwoYWg0LCBiaDApOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMywgYmwxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwzLCBiaDEpOwogICAgbWlkICs9IE1hdGguaW11bChhaDMsIGJsMSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgzLCBiaDEpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMiwgYmwyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwyLCBiaDIpOwogICAgbWlkICs9IE1hdGguaW11bChhaDIsIGJsMik7CiAgICBoaSArPSBNYXRoLmltdWwoYWgyLCBiaDIpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMSwgYmwzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwxLCBiaDMpOwogICAgbWlkICs9IE1hdGguaW11bChhaDEsIGJsMyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgxLCBiaDMpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMCwgYmw0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwwLCBiaDQpOwogICAgbWlkICs9IE1hdGguaW11bChhaDAsIGJsNCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgwLCBiaDQpOwogICAgdmFyIHc0ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3NCA+Pj4gMjYpOwogICAgdzQgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDUgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsNSwgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDUsIGJoMCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNSwgYmwwKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoNSwgYmgwKTsKICAgIGxvICs9IE1hdGguaW11bChhbDQsIGJsMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNCwgYmgxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDEpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNCwgYmgxKTsKICAgIGxvICs9IE1hdGguaW11bChhbDMsIGJsMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMywgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgzLCBibDIpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMywgYmgyKTsKICAgIGxvICs9IE1hdGguaW11bChhbDIsIGJsMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMiwgYmgzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgyLCBibDMpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMiwgYmgzKTsKICAgIGxvICs9IE1hdGguaW11bChhbDEsIGJsNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMSwgYmg0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDQpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMSwgYmg0KTsKICAgIGxvICs9IE1hdGguaW11bChhbDAsIGJsNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMCwgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgwLCBibDUpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMCwgYmg1KTsKICAgIHZhciB3NSA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzUgPj4+IDI2KTsKICAgIHc1ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSA2ICovCiAgICBsbyA9IE1hdGguaW11bChhbDYsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw2LCBiaDApOwogICAgbWlkICs9IE1hdGguaW11bChhaDYsIGJsMCk7CiAgICBoaSA9IE1hdGguaW11bChhaDYsIGJoMCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw1LCBibDEpOwogICAgbWlkICs9IE1hdGguaW11bChhbDUsIGJoMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNSwgYmwxKTsKICAgIGhpICs9IE1hdGguaW11bChhaDUsIGJoMSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw0LCBibDIpOwogICAgbWlkICs9IE1hdGguaW11bChhbDQsIGJoMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNCwgYmwyKTsKICAgIGhpICs9IE1hdGguaW11bChhaDQsIGJoMik7CiAgICBsbyArPSBNYXRoLmltdWwoYWwzLCBibDMpOwogICAgbWlkICs9IE1hdGguaW11bChhbDMsIGJoMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMywgYmwzKTsKICAgIGhpICs9IE1hdGguaW11bChhaDMsIGJoMyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwyLCBibDQpOwogICAgbWlkICs9IE1hdGguaW11bChhbDIsIGJoNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMiwgYmw0KTsKICAgIGhpICs9IE1hdGguaW11bChhaDIsIGJoNCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwxLCBibDUpOwogICAgbWlkICs9IE1hdGguaW11bChhbDEsIGJoNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMSwgYmw1KTsKICAgIGhpICs9IE1hdGguaW11bChhaDEsIGJoNSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwwLCBibDYpOwogICAgbWlkICs9IE1hdGguaW11bChhbDAsIGJoNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMCwgYmw2KTsKICAgIGhpICs9IE1hdGguaW11bChhaDAsIGJoNik7CiAgICB2YXIgdzYgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHc2ID4+PiAyNik7CiAgICB3NiAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gNyAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw3LCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsNywgYmgwKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDApOwogICAgaGkgPSBNYXRoLmltdWwoYWg3LCBiaDApOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNiwgYmwxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw2LCBiaDEpOwogICAgbWlkICs9IE1hdGguaW11bChhaDYsIGJsMSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg2LCBiaDEpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNSwgYmwyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw1LCBiaDIpOwogICAgbWlkICs9IE1hdGguaW11bChhaDUsIGJsMik7CiAgICBoaSArPSBNYXRoLmltdWwoYWg1LCBiaDIpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNCwgYmwzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw0LCBiaDMpOwogICAgbWlkICs9IE1hdGguaW11bChhaDQsIGJsMyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg0LCBiaDMpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMywgYmw0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwzLCBiaDQpOwogICAgbWlkICs9IE1hdGguaW11bChhaDMsIGJsNCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgzLCBiaDQpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMiwgYmw1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwyLCBiaDUpOwogICAgbWlkICs9IE1hdGguaW11bChhaDIsIGJsNSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgyLCBiaDUpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMSwgYmw2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwxLCBiaDYpOwogICAgbWlkICs9IE1hdGguaW11bChhaDEsIGJsNik7CiAgICBoaSArPSBNYXRoLmltdWwoYWgxLCBiaDYpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMCwgYmw3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwwLCBiaDcpOwogICAgbWlkICs9IE1hdGguaW11bChhaDAsIGJsNyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgwLCBiaDcpOwogICAgdmFyIHc3ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3NyA+Pj4gMjYpOwogICAgdzcgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDggKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOCwgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDgsIGJoMCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOCwgYmwwKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOCwgYmgwKTsKICAgIGxvICs9IE1hdGguaW11bChhbDcsIGJsMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNywgYmgxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDEpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNywgYmgxKTsKICAgIGxvICs9IE1hdGguaW11bChhbDYsIGJsMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNiwgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg2LCBibDIpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNiwgYmgyKTsKICAgIGxvICs9IE1hdGguaW11bChhbDUsIGJsMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNSwgYmgzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg1LCBibDMpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNSwgYmgzKTsKICAgIGxvICs9IE1hdGguaW11bChhbDQsIGJsNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNCwgYmg0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDQpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNCwgYmg0KTsKICAgIGxvICs9IE1hdGguaW11bChhbDMsIGJsNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMywgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgzLCBibDUpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMywgYmg1KTsKICAgIGxvICs9IE1hdGguaW11bChhbDIsIGJsNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMiwgYmg2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgyLCBibDYpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMiwgYmg2KTsKICAgIGxvICs9IE1hdGguaW11bChhbDEsIGJsNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMSwgYmg3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDcpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMSwgYmg3KTsKICAgIGxvICs9IE1hdGguaW11bChhbDAsIGJsOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMCwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgwLCBibDgpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMCwgYmg4KTsKICAgIHZhciB3OCA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzggPj4+IDI2KTsKICAgIHc4ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSA5ICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDApOwogICAgbWlkICs9IE1hdGguaW11bChhaDksIGJsMCk7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw4LCBibDEpOwogICAgbWlkICs9IE1hdGguaW11bChhbDgsIGJoMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOCwgYmwxKTsKICAgIGhpICs9IE1hdGguaW11bChhaDgsIGJoMSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw3LCBibDIpOwogICAgbWlkICs9IE1hdGguaW11bChhbDcsIGJoMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNywgYmwyKTsKICAgIGhpICs9IE1hdGguaW11bChhaDcsIGJoMik7CiAgICBsbyArPSBNYXRoLmltdWwoYWw2LCBibDMpOwogICAgbWlkICs9IE1hdGguaW11bChhbDYsIGJoMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNiwgYmwzKTsKICAgIGhpICs9IE1hdGguaW11bChhaDYsIGJoMyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw1LCBibDQpOwogICAgbWlkICs9IE1hdGguaW11bChhbDUsIGJoNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNSwgYmw0KTsKICAgIGhpICs9IE1hdGguaW11bChhaDUsIGJoNCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw0LCBibDUpOwogICAgbWlkICs9IE1hdGguaW11bChhbDQsIGJoNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNCwgYmw1KTsKICAgIGhpICs9IE1hdGguaW11bChhaDQsIGJoNSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwzLCBibDYpOwogICAgbWlkICs9IE1hdGguaW11bChhbDMsIGJoNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMywgYmw2KTsKICAgIGhpICs9IE1hdGguaW11bChhaDMsIGJoNik7CiAgICBsbyArPSBNYXRoLmltdWwoYWwyLCBibDcpOwogICAgbWlkICs9IE1hdGguaW11bChhbDIsIGJoNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMiwgYmw3KTsKICAgIGhpICs9IE1hdGguaW11bChhaDIsIGJoNyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwxLCBibDgpOwogICAgbWlkICs9IE1hdGguaW11bChhbDEsIGJoOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMSwgYmw4KTsKICAgIGhpICs9IE1hdGguaW11bChhaDEsIGJoOCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwwLCBibDkpOwogICAgbWlkICs9IE1hdGguaW11bChhbDAsIGJoOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMCwgYmw5KTsKICAgIGhpICs9IE1hdGguaW11bChhaDAsIGJoOSk7CiAgICB2YXIgdzkgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHc5ID4+PiAyNik7CiAgICB3OSAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTAgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmwxKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOSwgYmwxKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgxKTsKICAgIGxvICs9IE1hdGguaW11bChhbDgsIGJsMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsOCwgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg4LCBibDIpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoOCwgYmgyKTsKICAgIGxvICs9IE1hdGguaW11bChhbDcsIGJsMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNywgYmgzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDMpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNywgYmgzKTsKICAgIGxvICs9IE1hdGguaW11bChhbDYsIGJsNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNiwgYmg0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg2LCBibDQpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNiwgYmg0KTsKICAgIGxvICs9IE1hdGguaW11bChhbDUsIGJsNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNSwgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg1LCBibDUpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNSwgYmg1KTsKICAgIGxvICs9IE1hdGguaW11bChhbDQsIGJsNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNCwgYmg2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDYpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNCwgYmg2KTsKICAgIGxvICs9IE1hdGguaW11bChhbDMsIGJsNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMywgYmg3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgzLCBibDcpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMywgYmg3KTsKICAgIGxvICs9IE1hdGguaW11bChhbDIsIGJsOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMiwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgyLCBibDgpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMiwgYmg4KTsKICAgIGxvICs9IE1hdGguaW11bChhbDEsIGJsOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMSwgYmg5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDkpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMSwgYmg5KTsKICAgIHZhciB3MTAgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcxMCA+Pj4gMjYpOwogICAgdzEwICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxMSAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDIpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg5LCBibDIpOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDIpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsOCwgYmwzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw4LCBiaDMpOwogICAgbWlkICs9IE1hdGguaW11bChhaDgsIGJsMyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg4LCBiaDMpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNywgYmw0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw3LCBiaDQpOwogICAgbWlkICs9IE1hdGguaW11bChhaDcsIGJsNCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg3LCBiaDQpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNiwgYmw1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw2LCBiaDUpOwogICAgbWlkICs9IE1hdGguaW11bChhaDYsIGJsNSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg2LCBiaDUpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNSwgYmw2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw1LCBiaDYpOwogICAgbWlkICs9IE1hdGguaW11bChhaDUsIGJsNik7CiAgICBoaSArPSBNYXRoLmltdWwoYWg1LCBiaDYpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNCwgYmw3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw0LCBiaDcpOwogICAgbWlkICs9IE1hdGguaW11bChhaDQsIGJsNyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg0LCBiaDcpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMywgYmw4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwzLCBiaDgpOwogICAgbWlkICs9IE1hdGguaW11bChhaDMsIGJsOCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgzLCBiaDgpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMiwgYmw5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwyLCBiaDkpOwogICAgbWlkICs9IE1hdGguaW11bChhaDIsIGJsOSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgyLCBiaDkpOwogICAgdmFyIHcxMSA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzExID4+PiAyNik7CiAgICB3MTEgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDEyICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMyk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDMpOwogICAgbWlkICs9IE1hdGguaW11bChhaDksIGJsMyk7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw4LCBibDQpOwogICAgbWlkICs9IE1hdGguaW11bChhbDgsIGJoNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOCwgYmw0KTsKICAgIGhpICs9IE1hdGguaW11bChhaDgsIGJoNCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw3LCBibDUpOwogICAgbWlkICs9IE1hdGguaW11bChhbDcsIGJoNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNywgYmw1KTsKICAgIGhpICs9IE1hdGguaW11bChhaDcsIGJoNSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw2LCBibDYpOwogICAgbWlkICs9IE1hdGguaW11bChhbDYsIGJoNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNiwgYmw2KTsKICAgIGhpICs9IE1hdGguaW11bChhaDYsIGJoNik7CiAgICBsbyArPSBNYXRoLmltdWwoYWw1LCBibDcpOwogICAgbWlkICs9IE1hdGguaW11bChhbDUsIGJoNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNSwgYmw3KTsKICAgIGhpICs9IE1hdGguaW11bChhaDUsIGJoNyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw0LCBibDgpOwogICAgbWlkICs9IE1hdGguaW11bChhbDQsIGJoOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNCwgYmw4KTsKICAgIGhpICs9IE1hdGguaW11bChhaDQsIGJoOCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwzLCBibDkpOwogICAgbWlkICs9IE1hdGguaW11bChhbDMsIGJoOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMywgYmw5KTsKICAgIGhpICs9IE1hdGguaW11bChhaDMsIGJoOSk7CiAgICB2YXIgdzEyID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MTIgPj4+IDI2KTsKICAgIHcxMiAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTMgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw0KTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOSwgYmw0KTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg0KTsKICAgIGxvICs9IE1hdGguaW11bChhbDgsIGJsNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsOCwgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg4LCBibDUpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoOCwgYmg1KTsKICAgIGxvICs9IE1hdGguaW11bChhbDcsIGJsNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNywgYmg2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDYpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNywgYmg2KTsKICAgIGxvICs9IE1hdGguaW11bChhbDYsIGJsNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNiwgYmg3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg2LCBibDcpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNiwgYmg3KTsKICAgIGxvICs9IE1hdGguaW11bChhbDUsIGJsOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNSwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg1LCBibDgpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNSwgYmg4KTsKICAgIGxvICs9IE1hdGguaW11bChhbDQsIGJsOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNCwgYmg5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDkpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNCwgYmg5KTsKICAgIHZhciB3MTMgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcxMyA+Pj4gMjYpOwogICAgdzEzICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxNCAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDUpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg5LCBibDUpOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDUpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsOCwgYmw2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw4LCBiaDYpOwogICAgbWlkICs9IE1hdGguaW11bChhaDgsIGJsNik7CiAgICBoaSArPSBNYXRoLmltdWwoYWg4LCBiaDYpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNywgYmw3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw3LCBiaDcpOwogICAgbWlkICs9IE1hdGguaW11bChhaDcsIGJsNyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg3LCBiaDcpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNiwgYmw4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw2LCBiaDgpOwogICAgbWlkICs9IE1hdGguaW11bChhaDYsIGJsOCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg2LCBiaDgpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNSwgYmw5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw1LCBiaDkpOwogICAgbWlkICs9IE1hdGguaW11bChhaDUsIGJsOSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg1LCBiaDkpOwogICAgdmFyIHcxNCA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzE0ID4+PiAyNik7CiAgICB3MTQgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDE1ICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNik7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDYpOwogICAgbWlkICs9IE1hdGguaW11bChhaDksIGJsNik7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNik7CiAgICBsbyArPSBNYXRoLmltdWwoYWw4LCBibDcpOwogICAgbWlkICs9IE1hdGguaW11bChhbDgsIGJoNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOCwgYmw3KTsKICAgIGhpICs9IE1hdGguaW11bChhaDgsIGJoNyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw3LCBibDgpOwogICAgbWlkICs9IE1hdGguaW11bChhbDcsIGJoOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNywgYmw4KTsKICAgIGhpICs9IE1hdGguaW11bChhaDcsIGJoOCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw2LCBibDkpOwogICAgbWlkICs9IE1hdGguaW11bChhbDYsIGJoOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNiwgYmw5KTsKICAgIGhpICs9IE1hdGguaW11bChhaDYsIGJoOSk7CiAgICB2YXIgdzE1ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MTUgPj4+IDI2KTsKICAgIHcxNSAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTYgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw3KTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOSwgYmw3KTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg3KTsKICAgIGxvICs9IE1hdGguaW11bChhbDgsIGJsOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsOCwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg4LCBibDgpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoOCwgYmg4KTsKICAgIGxvICs9IE1hdGguaW11bChhbDcsIGJsOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNywgYmg5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDkpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNywgYmg5KTsKICAgIHZhciB3MTYgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcxNiA+Pj4gMjYpOwogICAgdzE2ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxNyAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDgpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg5LCBibDgpOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDgpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsOCwgYmw5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw4LCBiaDkpOwogICAgbWlkICs9IE1hdGguaW11bChhaDgsIGJsOSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg4LCBiaDkpOwogICAgdmFyIHcxNyA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzE3ID4+PiAyNik7CiAgICB3MTcgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDE4ICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsOSk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDkpOwogICAgbWlkICs9IE1hdGguaW11bChhaDksIGJsOSk7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoOSk7CiAgICB2YXIgdzE4ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MTggPj4+IDI2KTsKICAgIHcxOCAmPSAweDNmZmZmZmY7CiAgICBvWzBdID0gdzA7CiAgICBvWzFdID0gdzE7CiAgICBvWzJdID0gdzI7CiAgICBvWzNdID0gdzM7CiAgICBvWzRdID0gdzQ7CiAgICBvWzVdID0gdzU7CiAgICBvWzZdID0gdzY7CiAgICBvWzddID0gdzc7CiAgICBvWzhdID0gdzg7CiAgICBvWzldID0gdzk7CiAgICBvWzEwXSA9IHcxMDsKICAgIG9bMTFdID0gdzExOwogICAgb1sxMl0gPSB3MTI7CiAgICBvWzEzXSA9IHcxMzsKICAgIG9bMTRdID0gdzE0OwogICAgb1sxNV0gPSB3MTU7CiAgICBvWzE2XSA9IHcxNjsKICAgIG9bMTddID0gdzE3OwogICAgb1sxOF0gPSB3MTg7CiAgICBpZiAoYyAhPT0gMCkgewogICAgICBvWzE5XSA9IGM7CiAgICAgIG91dC5sZW5ndGgrKzsKICAgIH0KICAgIHJldHVybiBvdXQ7CiAgfTsKCiAgLy8gUG9seWZpbGwgY29tYgogIGlmICghTWF0aC5pbXVsKSB7CiAgICBjb21iMTBNdWxUbyA9IHNtYWxsTXVsVG87CiAgfQoKICBmdW5jdGlvbiBiaWdNdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgIG91dC5uZWdhdGl2ZSA9IG51bS5uZWdhdGl2ZSBeIHNlbGYubmVnYXRpdmU7CiAgICBvdXQubGVuZ3RoID0gc2VsZi5sZW5ndGggKyBudW0ubGVuZ3RoOwoKICAgIHZhciBjYXJyeSA9IDA7CiAgICB2YXIgaG5jYXJyeSA9IDA7CiAgICBmb3IgKHZhciBrID0gMDsgayA8IG91dC5sZW5ndGggLSAxOyBrKyspIHsKICAgICAgLy8gU3VtIGFsbCB3b3JkcyB3aXRoIHRoZSBzYW1lIGBpICsgaiA9IGtgIGFuZCBhY2N1bXVsYXRlIGBuY2FycnlgLAogICAgICAvLyBub3RlIHRoYXQgbmNhcnJ5IGNvdWxkIGJlID49IDB4M2ZmZmZmZgogICAgICB2YXIgbmNhcnJ5ID0gaG5jYXJyeTsKICAgICAgaG5jYXJyeSA9IDA7CiAgICAgIHZhciByd29yZCA9IGNhcnJ5ICYgMHgzZmZmZmZmOwogICAgICB2YXIgbWF4SiA9IE1hdGgubWluKGssIG51bS5sZW5ndGggLSAxKTsKICAgICAgZm9yICh2YXIgaiA9IE1hdGgubWF4KDAsIGsgLSBzZWxmLmxlbmd0aCArIDEpOyBqIDw9IG1heEo7IGorKykgewogICAgICAgIHZhciBpID0gayAtIGo7CiAgICAgICAgdmFyIGEgPSBzZWxmLndvcmRzW2ldIHwgMDsKICAgICAgICB2YXIgYiA9IG51bS53b3Jkc1tqXSB8IDA7CiAgICAgICAgdmFyIHIgPSBhICogYjsKCiAgICAgICAgdmFyIGxvID0gciAmIDB4M2ZmZmZmZjsKICAgICAgICBuY2FycnkgPSAobmNhcnJ5ICsgKChyIC8gMHg0MDAwMDAwKSB8IDApKSB8IDA7CiAgICAgICAgbG8gPSAobG8gKyByd29yZCkgfCAwOwogICAgICAgIHJ3b3JkID0gbG8gJiAweDNmZmZmZmY7CiAgICAgICAgbmNhcnJ5ID0gKG5jYXJyeSArIChsbyA+Pj4gMjYpKSB8IDA7CgogICAgICAgIGhuY2FycnkgKz0gbmNhcnJ5ID4+PiAyNjsKICAgICAgICBuY2FycnkgJj0gMHgzZmZmZmZmOwogICAgICB9CiAgICAgIG91dC53b3Jkc1trXSA9IHJ3b3JkOwogICAgICBjYXJyeSA9IG5jYXJyeTsKICAgICAgbmNhcnJ5ID0gaG5jYXJyeTsKICAgIH0KICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICBvdXQud29yZHNba10gPSBjYXJyeTsKICAgIH0gZWxzZSB7CiAgICAgIG91dC5sZW5ndGgtLTsKICAgIH0KCiAgICByZXR1cm4gb3V0LnN0cmlwKCk7CiAgfQoKICBmdW5jdGlvbiBqdW1ib011bFRvIChzZWxmLCBudW0sIG91dCkgewogICAgdmFyIGZmdG0gPSBuZXcgRkZUTSgpOwogICAgcmV0dXJuIGZmdG0ubXVscChzZWxmLCBudW0sIG91dCk7CiAgfQoKICBCTi5wcm90b3R5cGUubXVsVG8gPSBmdW5jdGlvbiBtdWxUbyAobnVtLCBvdXQpIHsKICAgIHZhciByZXM7CiAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoOwogICAgaWYgKHRoaXMubGVuZ3RoID09PSAxMCAmJiBudW0ubGVuZ3RoID09PSAxMCkgewogICAgICByZXMgPSBjb21iMTBNdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgICB9IGVsc2UgaWYgKGxlbiA8IDYzKSB7CiAgICAgIHJlcyA9IHNtYWxsTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgfSBlbHNlIGlmIChsZW4gPCAxMDI0KSB7CiAgICAgIHJlcyA9IGJpZ011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgIH0gZWxzZSB7CiAgICAgIHJlcyA9IGp1bWJvTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgfQoKICAgIHJldHVybiByZXM7CiAgfTsKCiAgLy8gQ29vbGV5LVR1a2V5IGFsZ29yaXRobSBmb3IgRkZUCiAgLy8gc2xpZ2h0bHkgcmV2aXNpdGVkIHRvIHJlbHkgb24gbG9vcGluZyBpbnN0ZWFkIG9mIHJlY3Vyc2lvbgoKICBmdW5jdGlvbiBGRlRNICh4LCB5KSB7CiAgICB0aGlzLnggPSB4OwogICAgdGhpcy55ID0geTsKICB9CgogIEZGVE0ucHJvdG90eXBlLm1ha2VSQlQgPSBmdW5jdGlvbiBtYWtlUkJUIChOKSB7CiAgICB2YXIgdCA9IG5ldyBBcnJheShOKTsKICAgIHZhciBsID0gQk4ucHJvdG90eXBlLl9jb3VudEJpdHMoTikgLSAxOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgdFtpXSA9IHRoaXMucmV2QmluKGksIGwsIE4pOwogICAgfQoKICAgIHJldHVybiB0OwogIH07CgogIC8vIFJldHVybnMgYmluYXJ5LXJldmVyc2VkIHJlcHJlc2VudGF0aW9uIG9mIGB4YAogIEZGVE0ucHJvdG90eXBlLnJldkJpbiA9IGZ1bmN0aW9uIHJldkJpbiAoeCwgbCwgTikgewogICAgaWYgKHggPT09IDAgfHwgeCA9PT0gTiAtIDEpIHJldHVybiB4OwoKICAgIHZhciByYiA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICByYiB8PSAoeCAmIDEpIDw8IChsIC0gaSAtIDEpOwogICAgICB4ID4+PSAxOwogICAgfQoKICAgIHJldHVybiByYjsKICB9OwoKICAvLyBQZXJmb3JtcyAidHdlZWRsaW5nIiBwaGFzZSwgdGhlcmVmb3JlICdlbXVsYXRpbmcnCiAgLy8gYmVoYXZpb3VyIG9mIHRoZSByZWN1cnNpdmUgYWxnb3JpdGhtCiAgRkZUTS5wcm90b3R5cGUucGVybXV0ZSA9IGZ1bmN0aW9uIHBlcm11dGUgKHJidCwgcndzLCBpd3MsIHJ0d3MsIGl0d3MsIE4pIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgIHJ0d3NbaV0gPSByd3NbcmJ0W2ldXTsKICAgICAgaXR3c1tpXSA9IGl3c1tyYnRbaV1dOwogICAgfQogIH07CgogIEZGVE0ucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uIHRyYW5zZm9ybSAocndzLCBpd3MsIHJ0d3MsIGl0d3MsIE4sIHJidCkgewogICAgdGhpcy5wZXJtdXRlKHJidCwgcndzLCBpd3MsIHJ0d3MsIGl0d3MsIE4pOwoKICAgIGZvciAodmFyIHMgPSAxOyBzIDwgTjsgcyA8PD0gMSkgewogICAgICB2YXIgbCA9IHMgPDwgMTsKCiAgICAgIHZhciBydHdkZiA9IE1hdGguY29zKDIgKiBNYXRoLlBJIC8gbCk7CiAgICAgIHZhciBpdHdkZiA9IE1hdGguc2luKDIgKiBNYXRoLlBJIC8gbCk7CgogICAgICBmb3IgKHZhciBwID0gMDsgcCA8IE47IHAgKz0gbCkgewogICAgICAgIHZhciBydHdkZl8gPSBydHdkZjsKICAgICAgICB2YXIgaXR3ZGZfID0gaXR3ZGY7CgogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgczsgaisrKSB7CiAgICAgICAgICB2YXIgcmUgPSBydHdzW3AgKyBqXTsKICAgICAgICAgIHZhciBpZSA9IGl0d3NbcCArIGpdOwoKICAgICAgICAgIHZhciBybyA9IHJ0d3NbcCArIGogKyBzXTsKICAgICAgICAgIHZhciBpbyA9IGl0d3NbcCArIGogKyBzXTsKCiAgICAgICAgICB2YXIgcnggPSBydHdkZl8gKiBybyAtIGl0d2RmXyAqIGlvOwoKICAgICAgICAgIGlvID0gcnR3ZGZfICogaW8gKyBpdHdkZl8gKiBybzsKICAgICAgICAgIHJvID0gcng7CgogICAgICAgICAgcnR3c1twICsgal0gPSByZSArIHJvOwogICAgICAgICAgaXR3c1twICsgal0gPSBpZSArIGlvOwoKICAgICAgICAgIHJ0d3NbcCArIGogKyBzXSA9IHJlIC0gcm87CiAgICAgICAgICBpdHdzW3AgKyBqICsgc10gPSBpZSAtIGlvOwoKICAgICAgICAgIC8qIGpzaGludCBtYXhkZXB0aCA6IGZhbHNlICovCiAgICAgICAgICBpZiAoaiAhPT0gbCkgewogICAgICAgICAgICByeCA9IHJ0d2RmICogcnR3ZGZfIC0gaXR3ZGYgKiBpdHdkZl87CgogICAgICAgICAgICBpdHdkZl8gPSBydHdkZiAqIGl0d2RmXyArIGl0d2RmICogcnR3ZGZfOwogICAgICAgICAgICBydHdkZl8gPSByeDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICBGRlRNLnByb3RvdHlwZS5ndWVzc0xlbjEzYiA9IGZ1bmN0aW9uIGd1ZXNzTGVuMTNiIChuLCBtKSB7CiAgICB2YXIgTiA9IE1hdGgubWF4KG0sIG4pIHwgMTsKICAgIHZhciBvZGQgPSBOICYgMTsKICAgIHZhciBpID0gMDsKICAgIGZvciAoTiA9IE4gLyAyIHwgMDsgTjsgTiA9IE4gPj4+IDEpIHsKICAgICAgaSsrOwogICAgfQoKICAgIHJldHVybiAxIDw8IGkgKyAxICsgb2RkOwogIH07CgogIEZGVE0ucHJvdG90eXBlLmNvbmp1Z2F0ZSA9IGZ1bmN0aW9uIGNvbmp1Z2F0ZSAocndzLCBpd3MsIE4pIHsKICAgIGlmIChOIDw9IDEpIHJldHVybjsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE4gLyAyOyBpKyspIHsKICAgICAgdmFyIHQgPSByd3NbaV07CgogICAgICByd3NbaV0gPSByd3NbTiAtIGkgLSAxXTsKICAgICAgcndzW04gLSBpIC0gMV0gPSB0OwoKICAgICAgdCA9IGl3c1tpXTsKCiAgICAgIGl3c1tpXSA9IC1pd3NbTiAtIGkgLSAxXTsKICAgICAgaXdzW04gLSBpIC0gMV0gPSAtdDsKICAgIH0KICB9OwoKICBGRlRNLnByb3RvdHlwZS5ub3JtYWxpemUxM2IgPSBmdW5jdGlvbiBub3JtYWxpemUxM2IgKHdzLCBOKSB7CiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOIC8gMjsgaSsrKSB7CiAgICAgIHZhciB3ID0gTWF0aC5yb3VuZCh3c1syICogaSArIDFdIC8gTikgKiAweDIwMDAgKwogICAgICAgIE1hdGgucm91bmQod3NbMiAqIGldIC8gTikgKwogICAgICAgIGNhcnJ5OwoKICAgICAgd3NbaV0gPSB3ICYgMHgzZmZmZmZmOwoKICAgICAgaWYgKHcgPCAweDQwMDAwMDApIHsKICAgICAgICBjYXJyeSA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FycnkgPSB3IC8gMHg0MDAwMDAwIHwgMDsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB3czsKICB9OwoKICBGRlRNLnByb3RvdHlwZS5jb252ZXJ0MTNiID0gZnVuY3Rpb24gY29udmVydDEzYiAod3MsIGxlbiwgcndzLCBOKSB7CiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICBjYXJyeSA9IGNhcnJ5ICsgKHdzW2ldIHwgMCk7CgogICAgICByd3NbMiAqIGldID0gY2FycnkgJiAweDFmZmY7IGNhcnJ5ID0gY2FycnkgPj4+IDEzOwogICAgICByd3NbMiAqIGkgKyAxXSA9IGNhcnJ5ICYgMHgxZmZmOyBjYXJyeSA9IGNhcnJ5ID4+PiAxMzsKICAgIH0KCiAgICAvLyBQYWQgd2l0aCB6ZXJvZXMKICAgIGZvciAoaSA9IDIgKiBsZW47IGkgPCBOOyArK2kpIHsKICAgICAgcndzW2ldID0gMDsKICAgIH0KCiAgICBhc3NlcnQoY2FycnkgPT09IDApOwogICAgYXNzZXJ0KChjYXJyeSAmIH4weDFmZmYpID09PSAwKTsKICB9OwoKICBGRlRNLnByb3RvdHlwZS5zdHViID0gZnVuY3Rpb24gc3R1YiAoTikgewogICAgdmFyIHBoID0gbmV3IEFycmF5KE4pOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgcGhbaV0gPSAwOwogICAgfQoKICAgIHJldHVybiBwaDsKICB9OwoKICBGRlRNLnByb3RvdHlwZS5tdWxwID0gZnVuY3Rpb24gbXVscCAoeCwgeSwgb3V0KSB7CiAgICB2YXIgTiA9IDIgKiB0aGlzLmd1ZXNzTGVuMTNiKHgubGVuZ3RoLCB5Lmxlbmd0aCk7CgogICAgdmFyIHJidCA9IHRoaXMubWFrZVJCVChOKTsKCiAgICB2YXIgXyA9IHRoaXMuc3R1YihOKTsKCiAgICB2YXIgcndzID0gbmV3IEFycmF5KE4pOwogICAgdmFyIHJ3c3QgPSBuZXcgQXJyYXkoTik7CiAgICB2YXIgaXdzdCA9IG5ldyBBcnJheShOKTsKCiAgICB2YXIgbnJ3cyA9IG5ldyBBcnJheShOKTsKICAgIHZhciBucndzdCA9IG5ldyBBcnJheShOKTsKICAgIHZhciBuaXdzdCA9IG5ldyBBcnJheShOKTsKCiAgICB2YXIgcm13cyA9IG91dC53b3JkczsKICAgIHJtd3MubGVuZ3RoID0gTjsKCiAgICB0aGlzLmNvbnZlcnQxM2IoeC53b3JkcywgeC5sZW5ndGgsIHJ3cywgTik7CiAgICB0aGlzLmNvbnZlcnQxM2IoeS53b3JkcywgeS5sZW5ndGgsIG5yd3MsIE4pOwoKICAgIHRoaXMudHJhbnNmb3JtKHJ3cywgXywgcndzdCwgaXdzdCwgTiwgcmJ0KTsKICAgIHRoaXMudHJhbnNmb3JtKG5yd3MsIF8sIG5yd3N0LCBuaXdzdCwgTiwgcmJ0KTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE47IGkrKykgewogICAgICB2YXIgcnggPSByd3N0W2ldICogbnJ3c3RbaV0gLSBpd3N0W2ldICogbml3c3RbaV07CiAgICAgIGl3c3RbaV0gPSByd3N0W2ldICogbml3c3RbaV0gKyBpd3N0W2ldICogbnJ3c3RbaV07CiAgICAgIHJ3c3RbaV0gPSByeDsKICAgIH0KCiAgICB0aGlzLmNvbmp1Z2F0ZShyd3N0LCBpd3N0LCBOKTsKICAgIHRoaXMudHJhbnNmb3JtKHJ3c3QsIGl3c3QsIHJtd3MsIF8sIE4sIHJidCk7CiAgICB0aGlzLmNvbmp1Z2F0ZShybXdzLCBfLCBOKTsKICAgIHRoaXMubm9ybWFsaXplMTNiKHJtd3MsIE4pOwoKICAgIG91dC5uZWdhdGl2ZSA9IHgubmVnYXRpdmUgXiB5Lm5lZ2F0aXZlOwogICAgb3V0Lmxlbmd0aCA9IHgubGVuZ3RoICsgeS5sZW5ndGg7CiAgICByZXR1cm4gb3V0LnN0cmlwKCk7CiAgfTsKCiAgLy8gTXVsdGlwbHkgYHRoaXNgIGJ5IGBudW1gCiAgQk4ucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bCAobnVtKSB7CiAgICB2YXIgb3V0ID0gbmV3IEJOKG51bGwpOwogICAgb3V0LndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoICsgbnVtLmxlbmd0aCk7CiAgICByZXR1cm4gdGhpcy5tdWxUbyhudW0sIG91dCk7CiAgfTsKCiAgLy8gTXVsdGlwbHkgZW1wbG95aW5nIEZGVAogIEJOLnByb3RvdHlwZS5tdWxmID0gZnVuY3Rpb24gbXVsZiAobnVtKSB7CiAgICB2YXIgb3V0ID0gbmV3IEJOKG51bGwpOwogICAgb3V0LndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoICsgbnVtLmxlbmd0aCk7CiAgICByZXR1cm4ganVtYm9NdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgfTsKCiAgLy8gSW4tcGxhY2UgTXVsdGlwbGljYXRpb24KICBCTi5wcm90b3R5cGUuaW11bCA9IGZ1bmN0aW9uIGltdWwgKG51bSkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5tdWxUbyhudW0sIHRoaXMpOwogIH07CgogIEJOLnByb3RvdHlwZS5pbXVsbiA9IGZ1bmN0aW9uIGltdWxuIChudW0pIHsKICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICBhc3NlcnQobnVtIDwgMHg0MDAwMDAwKTsKCiAgICAvLyBDYXJyeQogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgdyA9ICh0aGlzLndvcmRzW2ldIHwgMCkgKiBudW07CiAgICAgIHZhciBsbyA9ICh3ICYgMHgzZmZmZmZmKSArIChjYXJyeSAmIDB4M2ZmZmZmZik7CiAgICAgIGNhcnJ5ID4+PSAyNjsKICAgICAgY2FycnkgKz0gKHcgLyAweDQwMDAwMDApIHwgMDsKICAgICAgLy8gTk9URTogbG8gaXMgMjdiaXQgbWF4aW11bQogICAgICBjYXJyeSArPSBsbyA+Pj4gMjY7CiAgICAgIHRoaXMud29yZHNbaV0gPSBsbyAmIDB4M2ZmZmZmZjsKICAgIH0KCiAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgdGhpcy53b3Jkc1tpXSA9IGNhcnJ5OwogICAgICB0aGlzLmxlbmd0aCsrOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH07CgogIEJOLnByb3RvdHlwZS5tdWxuID0gZnVuY3Rpb24gbXVsbiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmltdWxuKG51bSk7CiAgfTsKCiAgLy8gYHRoaXNgICogYHRoaXNgCiAgQk4ucHJvdG90eXBlLnNxciA9IGZ1bmN0aW9uIHNxciAoKSB7CiAgICByZXR1cm4gdGhpcy5tdWwodGhpcyk7CiAgfTsKCiAgLy8gYHRoaXNgICogYHRoaXNgIGluLXBsYWNlCiAgQk4ucHJvdG90eXBlLmlzcXIgPSBmdW5jdGlvbiBpc3FyICgpIHsKICAgIHJldHVybiB0aGlzLmltdWwodGhpcy5jbG9uZSgpKTsKICB9OwoKICAvLyBNYXRoLnBvdyhgdGhpc2AsIGBudW1gKQogIEJOLnByb3RvdHlwZS5wb3cgPSBmdW5jdGlvbiBwb3cgKG51bSkgewogICAgdmFyIHcgPSB0b0JpdEFycmF5KG51bSk7CiAgICBpZiAody5sZW5ndGggPT09IDApIHJldHVybiBuZXcgQk4oMSk7CgogICAgLy8gU2tpcCBsZWFkaW5nIHplcm9lcwogICAgdmFyIHJlcyA9IHRoaXM7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHcubGVuZ3RoOyBpKyssIHJlcyA9IHJlcy5zcXIoKSkgewogICAgICBpZiAod1tpXSAhPT0gMCkgYnJlYWs7CiAgICB9CgogICAgaWYgKCsraSA8IHcubGVuZ3RoKSB7CiAgICAgIGZvciAodmFyIHEgPSByZXMuc3FyKCk7IGkgPCB3Lmxlbmd0aDsgaSsrLCBxID0gcS5zcXIoKSkgewogICAgICAgIGlmICh3W2ldID09PSAwKSBjb250aW51ZTsKCiAgICAgICAgcmVzID0gcmVzLm11bChxKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiByZXM7CiAgfTsKCiAgLy8gU2hpZnQtbGVmdCBpbi1wbGFjZQogIEJOLnByb3RvdHlwZS5pdXNobG4gPSBmdW5jdGlvbiBpdXNobG4gKGJpdHMpIHsKICAgIGFzc2VydCh0eXBlb2YgYml0cyA9PT0gJ251bWJlcicgJiYgYml0cyA+PSAwKTsKICAgIHZhciByID0gYml0cyAlIDI2OwogICAgdmFyIHMgPSAoYml0cyAtIHIpIC8gMjY7CiAgICB2YXIgY2FycnlNYXNrID0gKDB4M2ZmZmZmZiA+Pj4gKDI2IC0gcikpIDw8ICgyNiAtIHIpOwogICAgdmFyIGk7CgogICAgaWYgKHIgIT09IDApIHsKICAgICAgdmFyIGNhcnJ5ID0gMDsKCiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIG5ld0NhcnJ5ID0gdGhpcy53b3Jkc1tpXSAmIGNhcnJ5TWFzazsKICAgICAgICB2YXIgYyA9ICgodGhpcy53b3Jkc1tpXSB8IDApIC0gbmV3Q2FycnkpIDw8IHI7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGMgfCBjYXJyeTsKICAgICAgICBjYXJyeSA9IG5ld0NhcnJ5ID4+PiAoMjYgLSByKTsKICAgICAgfQoKICAgICAgaWYgKGNhcnJ5KSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGNhcnJ5OwogICAgICAgIHRoaXMubGVuZ3RoKys7CiAgICAgIH0KICAgIH0KCiAgICBpZiAocyAhPT0gMCkgewogICAgICBmb3IgKGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpICsgc10gPSB0aGlzLndvcmRzW2ldOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgczsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoICs9IHM7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaXNobG4gPSBmdW5jdGlvbiBpc2hsbiAoYml0cykgewogICAgLy8gVE9ETyhpbmR1dG55KTogaW1wbGVtZW50IG1lCiAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCk7CiAgICByZXR1cm4gdGhpcy5pdXNobG4oYml0cyk7CiAgfTsKCiAgLy8gU2hpZnQtcmlnaHQgaW4tcGxhY2UKICAvLyBOT1RFOiBgaGludGAgaXMgYSBsb3dlc3QgYml0IGJlZm9yZSB0cmFpbGluZyB6ZXJvZXMKICAvLyBOT1RFOiBpZiBgZXh0ZW5kZWRgIGlzIHByZXNlbnQgLSBpdCB3aWxsIGJlIGZpbGxlZCB3aXRoIGRlc3Ryb3llZCBiaXRzCiAgQk4ucHJvdG90eXBlLml1c2hybiA9IGZ1bmN0aW9uIGl1c2hybiAoYml0cywgaGludCwgZXh0ZW5kZWQpIHsKICAgIGFzc2VydCh0eXBlb2YgYml0cyA9PT0gJ251bWJlcicgJiYgYml0cyA+PSAwKTsKICAgIHZhciBoOwogICAgaWYgKGhpbnQpIHsKICAgICAgaCA9IChoaW50IC0gKGhpbnQgJSAyNikpIC8gMjY7CiAgICB9IGVsc2UgewogICAgICBoID0gMDsKICAgIH0KCiAgICB2YXIgciA9IGJpdHMgJSAyNjsKICAgIHZhciBzID0gTWF0aC5taW4oKGJpdHMgLSByKSAvIDI2LCB0aGlzLmxlbmd0aCk7CiAgICB2YXIgbWFzayA9IDB4M2ZmZmZmZiBeICgoMHgzZmZmZmZmID4+PiByKSA8PCByKTsKICAgIHZhciBtYXNrZWRXb3JkcyA9IGV4dGVuZGVkOwoKICAgIGggLT0gczsKICAgIGggPSBNYXRoLm1heCgwLCBoKTsKCiAgICAvLyBFeHRlbmRlZCBtb2RlLCBjb3B5IG1hc2tlZCBwYXJ0CiAgICBpZiAobWFza2VkV29yZHMpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzOyBpKyspIHsKICAgICAgICBtYXNrZWRXb3Jkcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaV07CiAgICAgIH0KICAgICAgbWFza2VkV29yZHMubGVuZ3RoID0gczsKICAgIH0KCiAgICBpZiAocyA9PT0gMCkgewogICAgICAvLyBOby1vcCwgd2Ugc2hvdWxkIG5vdCBtb3ZlIGFueXRoaW5nIGF0IGFsbAogICAgfSBlbHNlIGlmICh0aGlzLmxlbmd0aCA+IHMpIHsKICAgICAgdGhpcy5sZW5ndGggLT0gczsKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpICsgc107CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMud29yZHNbMF0gPSAwOwogICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICB9CgogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAoaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwICYmIChjYXJyeSAhPT0gMCB8fCBpID49IGgpOyBpLS0pIHsKICAgICAgdmFyIHdvcmQgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgdGhpcy53b3Jkc1tpXSA9IChjYXJyeSA8PCAoMjYgLSByKSkgfCAod29yZCA+Pj4gcik7CiAgICAgIGNhcnJ5ID0gd29yZCAmIG1hc2s7CiAgICB9CgogICAgLy8gUHVzaCBjYXJyaWVkIGJpdHMgYXMgYSBtYXNrCiAgICBpZiAobWFza2VkV29yZHMgJiYgY2FycnkgIT09IDApIHsKICAgICAgbWFza2VkV29yZHMud29yZHNbbWFza2VkV29yZHMubGVuZ3RoKytdID0gY2Fycnk7CiAgICB9CgogICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7CiAgICAgIHRoaXMud29yZHNbMF0gPSAwOwogICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaXNocm4gPSBmdW5jdGlvbiBpc2hybiAoYml0cywgaGludCwgZXh0ZW5kZWQpIHsKICAgIC8vIFRPRE8oaW5kdXRueSk6IGltcGxlbWVudCBtZQogICAgYXNzZXJ0KHRoaXMubmVnYXRpdmUgPT09IDApOwogICAgcmV0dXJuIHRoaXMuaXVzaHJuKGJpdHMsIGhpbnQsIGV4dGVuZGVkKTsKICB9OwoKICAvLyBTaGlmdC1sZWZ0CiAgQk4ucHJvdG90eXBlLnNobG4gPSBmdW5jdGlvbiBzaGxuIChiaXRzKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzaGxuKGJpdHMpOwogIH07CgogIEJOLnByb3RvdHlwZS51c2hsbiA9IGZ1bmN0aW9uIHVzaGxuIChiaXRzKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLml1c2hsbihiaXRzKTsKICB9OwoKICAvLyBTaGlmdC1yaWdodAogIEJOLnByb3RvdHlwZS5zaHJuID0gZnVuY3Rpb24gc2hybiAoYml0cykgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pc2hybihiaXRzKTsKICB9OwoKICBCTi5wcm90b3R5cGUudXNocm4gPSBmdW5jdGlvbiB1c2hybiAoYml0cykgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pdXNocm4oYml0cyk7CiAgfTsKCiAgLy8gVGVzdCBpZiBuIGJpdCBpcyBzZXQKICBCTi5wcm90b3R5cGUudGVzdG4gPSBmdW5jdGlvbiB0ZXN0biAoYml0KSB7CiAgICBhc3NlcnQodHlwZW9mIGJpdCA9PT0gJ251bWJlcicgJiYgYml0ID49IDApOwogICAgdmFyIHIgPSBiaXQgJSAyNjsKICAgIHZhciBzID0gKGJpdCAtIHIpIC8gMjY7CiAgICB2YXIgcSA9IDEgPDwgcjsKCiAgICAvLyBGYXN0IGNhc2U6IGJpdCBpcyBtdWNoIGhpZ2hlciB0aGFuIGFsbCBleGlzdGluZyB3b3JkcwogICAgaWYgKHRoaXMubGVuZ3RoIDw9IHMpIHJldHVybiBmYWxzZTsKCiAgICAvLyBDaGVjayBiaXQgYW5kIHJldHVybgogICAgdmFyIHcgPSB0aGlzLndvcmRzW3NdOwoKICAgIHJldHVybiAhISh3ICYgcSk7CiAgfTsKCiAgLy8gUmV0dXJuIG9ubHkgbG93ZXJzIGJpdHMgb2YgbnVtYmVyIChpbi1wbGFjZSkKICBCTi5wcm90b3R5cGUuaW1hc2tuID0gZnVuY3Rpb24gaW1hc2tuIChiaXRzKSB7CiAgICBhc3NlcnQodHlwZW9mIGJpdHMgPT09ICdudW1iZXInICYmIGJpdHMgPj0gMCk7CiAgICB2YXIgciA9IGJpdHMgJSAyNjsKICAgIHZhciBzID0gKGJpdHMgLSByKSAvIDI2OwoKICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwLCAnaW1hc2tuIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZSBudW1iZXJzJyk7CgogICAgaWYgKHIgIT09IDApIHsKICAgICAgcysrOwogICAgfQogICAgdGhpcy5sZW5ndGggPSBNYXRoLm1pbihzLCB0aGlzLmxlbmd0aCk7CgogICAgaWYgKHIgIT09IDApIHsKICAgICAgdmFyIG1hc2sgPSAweDNmZmZmZmYgXiAoKDB4M2ZmZmZmZiA+Pj4gcikgPDwgcik7CiAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGggLSAxXSAmPSBtYXNrOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgLy8gUmV0dXJuIG9ubHkgbG93ZXJzIGJpdHMgb2YgbnVtYmVyCiAgQk4ucHJvdG90eXBlLm1hc2tuID0gZnVuY3Rpb24gbWFza24gKGJpdHMpIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaW1hc2tuKGJpdHMpOwogIH07CgogIC8vIEFkZCBwbGFpbiBudW1iZXIgYG51bWAgdG8gYHRoaXNgCiAgQk4ucHJvdG90eXBlLmlhZGRuID0gZnVuY3Rpb24gaWFkZG4gKG51bSkgewogICAgYXNzZXJ0KHR5cGVvZiBudW0gPT09ICdudW1iZXInKTsKICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwogICAgaWYgKG51bSA8IDApIHJldHVybiB0aGlzLmlzdWJuKC1udW0pOwoKICAgIC8vIFBvc3NpYmxlIHNpZ24gY2hhbmdlCiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEgJiYgKHRoaXMud29yZHNbMF0gfCAwKSA8IG51bSkgewogICAgICAgIHRoaXMud29yZHNbMF0gPSBudW0gLSAodGhpcy53b3Jkc1swXSB8IDApOwogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgdGhpcy5pc3VibihudW0pOwogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgLy8gQWRkIHdpdGhvdXQgY2hlY2tzCiAgICByZXR1cm4gdGhpcy5faWFkZG4obnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUuX2lhZGRuID0gZnVuY3Rpb24gX2lhZGRuIChudW0pIHsKICAgIHRoaXMud29yZHNbMF0gKz0gbnVtOwoKICAgIC8vIENhcnJ5CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoICYmIHRoaXMud29yZHNbaV0gPj0gMHg0MDAwMDAwOyBpKyspIHsKICAgICAgdGhpcy53b3Jkc1tpXSAtPSAweDQwMDAwMDA7CiAgICAgIGlmIChpID09PSB0aGlzLmxlbmd0aCAtIDEpIHsKICAgICAgICB0aGlzLndvcmRzW2kgKyAxXSA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0rKzsKICAgICAgfQogICAgfQogICAgdGhpcy5sZW5ndGggPSBNYXRoLm1heCh0aGlzLmxlbmd0aCwgaSArIDEpOwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIFN1YnRyYWN0IHBsYWluIG51bWJlciBgbnVtYCBmcm9tIGB0aGlzYAogIEJOLnByb3RvdHlwZS5pc3VibiA9IGZ1bmN0aW9uIGlzdWJuIChudW0pIHsKICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICBhc3NlcnQobnVtIDwgMHg0MDAwMDAwKTsKICAgIGlmIChudW0gPCAwKSByZXR1cm4gdGhpcy5pYWRkbigtbnVtKTsKCiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgdGhpcy5pYWRkbihudW0pOwogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgdGhpcy53b3Jkc1swXSAtPSBudW07CgogICAgaWYgKHRoaXMubGVuZ3RoID09PSAxICYmIHRoaXMud29yZHNbMF0gPCAwKSB7CiAgICAgIHRoaXMud29yZHNbMF0gPSAtdGhpcy53b3Jkc1swXTsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICB9IGVsc2UgewogICAgICAvLyBDYXJyeQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoICYmIHRoaXMud29yZHNbaV0gPCAwOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldICs9IDB4NDAwMDAwMDsKICAgICAgICB0aGlzLndvcmRzW2kgKyAxXSAtPSAxOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuYWRkbiA9IGZ1bmN0aW9uIGFkZG4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYWRkbihudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5zdWJuID0gZnVuY3Rpb24gc3VibiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzdWJuKG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlhYnMgPSBmdW5jdGlvbiBpYWJzICgpIHsKICAgIHRoaXMubmVnYXRpdmUgPSAwOwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIEJOLnByb3RvdHlwZS5hYnMgPSBmdW5jdGlvbiBhYnMgKCkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYWJzKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLl9pc2hsbnN1Ym11bCA9IGZ1bmN0aW9uIF9pc2hsbnN1Ym11bCAobnVtLCBtdWwsIHNoaWZ0KSB7CiAgICB2YXIgbGVuID0gbnVtLmxlbmd0aCArIHNoaWZ0OwogICAgdmFyIGk7CgogICAgdGhpcy5fZXhwYW5kKGxlbik7CgogICAgdmFyIHc7CiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yIChpID0gMDsgaSA8IG51bS5sZW5ndGg7IGkrKykgewogICAgICB3ID0gKHRoaXMud29yZHNbaSArIHNoaWZ0XSB8IDApICsgY2Fycnk7CiAgICAgIHZhciByaWdodCA9IChudW0ud29yZHNbaV0gfCAwKSAqIG11bDsKICAgICAgdyAtPSByaWdodCAmIDB4M2ZmZmZmZjsKICAgICAgY2FycnkgPSAodyA+PiAyNikgLSAoKHJpZ2h0IC8gMHg0MDAwMDAwKSB8IDApOwogICAgICB0aGlzLndvcmRzW2kgKyBzaGlmdF0gPSB3ICYgMHgzZmZmZmZmOwogICAgfQogICAgZm9yICg7IGkgPCB0aGlzLmxlbmd0aCAtIHNoaWZ0OyBpKyspIHsKICAgICAgdyA9ICh0aGlzLndvcmRzW2kgKyBzaGlmdF0gfCAwKSArIGNhcnJ5OwogICAgICBjYXJyeSA9IHcgPj4gMjY7CiAgICAgIHRoaXMud29yZHNbaSArIHNoaWZ0XSA9IHcgJiAweDNmZmZmZmY7CiAgICB9CgogICAgaWYgKGNhcnJ5ID09PSAwKSByZXR1cm4gdGhpcy5zdHJpcCgpOwoKICAgIC8vIFN1YnRyYWN0aW9uIG92ZXJmbG93CiAgICBhc3NlcnQoY2FycnkgPT09IC0xKTsKICAgIGNhcnJ5ID0gMDsKICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHcgPSAtKHRoaXMud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICBjYXJyeSA9IHcgPj4gMjY7CiAgICAgIHRoaXMud29yZHNbaV0gPSB3ICYgMHgzZmZmZmZmOwogICAgfQogICAgdGhpcy5uZWdhdGl2ZSA9IDE7CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuX3dvcmREaXYgPSBmdW5jdGlvbiBfd29yZERpdiAobnVtLCBtb2RlKSB7CiAgICB2YXIgc2hpZnQgPSB0aGlzLmxlbmd0aCAtIG51bS5sZW5ndGg7CgogICAgdmFyIGEgPSB0aGlzLmNsb25lKCk7CiAgICB2YXIgYiA9IG51bTsKCiAgICAvLyBOb3JtYWxpemUKICAgIHZhciBiaGkgPSBiLndvcmRzW2IubGVuZ3RoIC0gMV0gfCAwOwogICAgdmFyIGJoaUJpdHMgPSB0aGlzLl9jb3VudEJpdHMoYmhpKTsKICAgIHNoaWZ0ID0gMjYgLSBiaGlCaXRzOwogICAgaWYgKHNoaWZ0ICE9PSAwKSB7CiAgICAgIGIgPSBiLnVzaGxuKHNoaWZ0KTsKICAgICAgYS5pdXNobG4oc2hpZnQpOwogICAgICBiaGkgPSBiLndvcmRzW2IubGVuZ3RoIC0gMV0gfCAwOwogICAgfQoKICAgIC8vIEluaXRpYWxpemUgcXVvdGllbnQKICAgIHZhciBtID0gYS5sZW5ndGggLSBiLmxlbmd0aDsKICAgIHZhciBxOwoKICAgIGlmIChtb2RlICE9PSAnbW9kJykgewogICAgICBxID0gbmV3IEJOKG51bGwpOwogICAgICBxLmxlbmd0aCA9IG0gKyAxOwogICAgICBxLndvcmRzID0gbmV3IEFycmF5KHEubGVuZ3RoKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcS53b3Jkc1tpXSA9IDA7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgZGlmZiA9IGEuY2xvbmUoKS5faXNobG5zdWJtdWwoYiwgMSwgbSk7CiAgICBpZiAoZGlmZi5uZWdhdGl2ZSA9PT0gMCkgewogICAgICBhID0gZGlmZjsKICAgICAgaWYgKHEpIHsKICAgICAgICBxLndvcmRzW21dID0gMTsKICAgICAgfQogICAgfQoKICAgIGZvciAodmFyIGogPSBtIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgdmFyIHFqID0gKGEud29yZHNbYi5sZW5ndGggKyBqXSB8IDApICogMHg0MDAwMDAwICsKICAgICAgICAoYS53b3Jkc1tiLmxlbmd0aCArIGogLSAxXSB8IDApOwoKICAgICAgLy8gTk9URTogKHFqIC8gYmhpKSBpcyAoMHgzZmZmZmZmICogMHg0MDAwMDAwICsgMHgzZmZmZmZmKSAvIDB4MjAwMDAwMCBtYXgKICAgICAgLy8gKDB4N2ZmZmZmZikKICAgICAgcWogPSBNYXRoLm1pbigocWogLyBiaGkpIHwgMCwgMHgzZmZmZmZmKTsKCiAgICAgIGEuX2lzaGxuc3VibXVsKGIsIHFqLCBqKTsKICAgICAgd2hpbGUgKGEubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBxai0tOwogICAgICAgIGEubmVnYXRpdmUgPSAwOwogICAgICAgIGEuX2lzaGxuc3VibXVsKGIsIDEsIGopOwogICAgICAgIGlmICghYS5pc1plcm8oKSkgewogICAgICAgICAgYS5uZWdhdGl2ZSBePSAxOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAocSkgewogICAgICAgIHEud29yZHNbal0gPSBxajsKICAgICAgfQogICAgfQogICAgaWYgKHEpIHsKICAgICAgcS5zdHJpcCgpOwogICAgfQogICAgYS5zdHJpcCgpOwoKICAgIC8vIERlbm9ybWFsaXplCiAgICBpZiAobW9kZSAhPT0gJ2RpdicgJiYgc2hpZnQgIT09IDApIHsKICAgICAgYS5pdXNocm4oc2hpZnQpOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGRpdjogcSB8fCBudWxsLAogICAgICBtb2Q6IGEKICAgIH07CiAgfTsKCiAgLy8gTk9URTogMSkgYG1vZGVgIGNhbiBiZSBzZXQgdG8gYG1vZGAgdG8gcmVxdWVzdCBtb2Qgb25seSwKICAvLyAgICAgICB0byBgZGl2YCB0byByZXF1ZXN0IGRpdiBvbmx5LCBvciBiZSBhYnNlbnQgdG8KICAvLyAgICAgICByZXF1ZXN0IGJvdGggZGl2ICYgbW9kCiAgLy8gICAgICAgMikgYHBvc2l0aXZlYCBpcyB0cnVlIGlmIHVuc2lnbmVkIG1vZCBpcyByZXF1ZXN0ZWQKICBCTi5wcm90b3R5cGUuZGl2bW9kID0gZnVuY3Rpb24gZGl2bW9kIChudW0sIG1vZGUsIHBvc2l0aXZlKSB7CiAgICBhc3NlcnQoIW51bS5pc1plcm8oKSk7CgogICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXY6IG5ldyBCTigwKSwKICAgICAgICBtb2Q6IG5ldyBCTigwKQogICAgICB9OwogICAgfQoKICAgIHZhciBkaXYsIG1vZCwgcmVzOwogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgbnVtLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgIHJlcyA9IHRoaXMubmVnKCkuZGl2bW9kKG51bSwgbW9kZSk7CgogICAgICBpZiAobW9kZSAhPT0gJ21vZCcpIHsKICAgICAgICBkaXYgPSByZXMuZGl2Lm5lZygpOwogICAgICB9CgogICAgICBpZiAobW9kZSAhPT0gJ2RpdicpIHsKICAgICAgICBtb2QgPSByZXMubW9kLm5lZygpOwogICAgICAgIGlmIChwb3NpdGl2ZSAmJiBtb2QubmVnYXRpdmUgIT09IDApIHsKICAgICAgICAgIG1vZC5pYWRkKG51bSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGRpdjogZGl2LAogICAgICAgIG1vZDogbW9kCiAgICAgIH07CiAgICB9CgogICAgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbnVtLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIHJlcyA9IHRoaXMuZGl2bW9kKG51bS5uZWcoKSwgbW9kZSk7CgogICAgICBpZiAobW9kZSAhPT0gJ21vZCcpIHsKICAgICAgICBkaXYgPSByZXMuZGl2Lm5lZygpOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGRpdjogZGl2LAogICAgICAgIG1vZDogcmVzLm1vZAogICAgICB9OwogICAgfQoKICAgIGlmICgodGhpcy5uZWdhdGl2ZSAmIG51bS5uZWdhdGl2ZSkgIT09IDApIHsKICAgICAgcmVzID0gdGhpcy5uZWcoKS5kaXZtb2QobnVtLm5lZygpLCBtb2RlKTsKCiAgICAgIGlmIChtb2RlICE9PSAnZGl2JykgewogICAgICAgIG1vZCA9IHJlcy5tb2QubmVnKCk7CiAgICAgICAgaWYgKHBvc2l0aXZlICYmIG1vZC5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgbW9kLmlzdWIobnVtKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZGl2OiByZXMuZGl2LAogICAgICAgIG1vZDogbW9kCiAgICAgIH07CiAgICB9CgogICAgLy8gQm90aCBudW1iZXJzIGFyZSBwb3NpdGl2ZSBhdCB0aGlzIHBvaW50CgogICAgLy8gU3RyaXAgYm90aCBudW1iZXJzIHRvIGFwcHJveGltYXRlIHNoaWZ0IHZhbHVlCiAgICBpZiAobnVtLmxlbmd0aCA+IHRoaXMubGVuZ3RoIHx8IHRoaXMuY21wKG51bSkgPCAwKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgZGl2OiBuZXcgQk4oMCksCiAgICAgICAgbW9kOiB0aGlzCiAgICAgIH07CiAgICB9CgogICAgLy8gVmVyeSBzaG9ydCByZWR1Y3Rpb24KICAgIGlmIChudW0ubGVuZ3RoID09PSAxKSB7CiAgICAgIGlmIChtb2RlID09PSAnZGl2JykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkaXY6IHRoaXMuZGl2bihudW0ud29yZHNbMF0pLAogICAgICAgICAgbW9kOiBudWxsCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKG1vZGUgPT09ICdtb2QnKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogbnVsbCwKICAgICAgICAgIG1vZDogbmV3IEJOKHRoaXMubW9kbihudW0ud29yZHNbMF0pKQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZGl2OiB0aGlzLmRpdm4obnVtLndvcmRzWzBdKSwKICAgICAgICBtb2Q6IG5ldyBCTih0aGlzLm1vZG4obnVtLndvcmRzWzBdKSkKICAgICAgfTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fd29yZERpdihudW0sIG1vZGUpOwogIH07CgogIC8vIEZpbmQgYHRoaXNgIC8gYG51bWAKICBCTi5wcm90b3R5cGUuZGl2ID0gZnVuY3Rpb24gZGl2IChudW0pIHsKICAgIHJldHVybiB0aGlzLmRpdm1vZChudW0sICdkaXYnLCBmYWxzZSkuZGl2OwogIH07CgogIC8vIEZpbmQgYHRoaXNgICUgYG51bWAKICBCTi5wcm90b3R5cGUubW9kID0gZnVuY3Rpb24gbW9kIChudW0pIHsKICAgIHJldHVybiB0aGlzLmRpdm1vZChudW0sICdtb2QnLCBmYWxzZSkubW9kOwogIH07CgogIEJOLnByb3RvdHlwZS51bW9kID0gZnVuY3Rpb24gdW1vZCAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5kaXZtb2QobnVtLCAnbW9kJywgdHJ1ZSkubW9kOwogIH07CgogIC8vIEZpbmQgUm91bmQoYHRoaXNgIC8gYG51bWApCiAgQk4ucHJvdG90eXBlLmRpdlJvdW5kID0gZnVuY3Rpb24gZGl2Um91bmQgKG51bSkgewogICAgdmFyIGRtID0gdGhpcy5kaXZtb2QobnVtKTsKCiAgICAvLyBGYXN0IGNhc2UgLSBleGFjdCBkaXZpc2lvbgogICAgaWYgKGRtLm1vZC5pc1plcm8oKSkgcmV0dXJuIGRtLmRpdjsKCiAgICB2YXIgbW9kID0gZG0uZGl2Lm5lZ2F0aXZlICE9PSAwID8gZG0ubW9kLmlzdWIobnVtKSA6IGRtLm1vZDsKCiAgICB2YXIgaGFsZiA9IG51bS51c2hybigxKTsKICAgIHZhciByMiA9IG51bS5hbmRsbigxKTsKICAgIHZhciBjbXAgPSBtb2QuY21wKGhhbGYpOwoKICAgIC8vIFJvdW5kIGRvd24KICAgIGlmIChjbXAgPCAwIHx8IHIyID09PSAxICYmIGNtcCA9PT0gMCkgcmV0dXJuIGRtLmRpdjsKCiAgICAvLyBSb3VuZCB1cAogICAgcmV0dXJuIGRtLmRpdi5uZWdhdGl2ZSAhPT0gMCA/IGRtLmRpdi5pc3VibigxKSA6IGRtLmRpdi5pYWRkbigxKTsKICB9OwoKICBCTi5wcm90b3R5cGUubW9kbiA9IGZ1bmN0aW9uIG1vZG4gKG51bSkgewogICAgYXNzZXJ0KG51bSA8PSAweDNmZmZmZmYpOwogICAgdmFyIHAgPSAoMSA8PCAyNikgJSBudW07CgogICAgdmFyIGFjYyA9IDA7CiAgICBmb3IgKHZhciBpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICBhY2MgPSAocCAqIGFjYyArICh0aGlzLndvcmRzW2ldIHwgMCkpICUgbnVtOwogICAgfQoKICAgIHJldHVybiBhY2M7CiAgfTsKCiAgLy8gSW4tcGxhY2UgZGl2aXNpb24gYnkgbnVtYmVyCiAgQk4ucHJvdG90eXBlLmlkaXZuID0gZnVuY3Rpb24gaWRpdm4gKG51bSkgewogICAgYXNzZXJ0KG51bSA8PSAweDNmZmZmZmYpOwoKICAgIHZhciBjYXJyeSA9IDA7CiAgICBmb3IgKHZhciBpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICB2YXIgdyA9ICh0aGlzLndvcmRzW2ldIHwgMCkgKyBjYXJyeSAqIDB4NDAwMDAwMDsKICAgICAgdGhpcy53b3Jkc1tpXSA9ICh3IC8gbnVtKSB8IDA7CiAgICAgIGNhcnJ5ID0gdyAlIG51bTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIEJOLnByb3RvdHlwZS5kaXZuID0gZnVuY3Rpb24gZGl2biAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlkaXZuKG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmVnY2QgPSBmdW5jdGlvbiBlZ2NkIChwKSB7CiAgICBhc3NlcnQocC5uZWdhdGl2ZSA9PT0gMCk7CiAgICBhc3NlcnQoIXAuaXNaZXJvKCkpOwoKICAgIHZhciB4ID0gdGhpczsKICAgIHZhciB5ID0gcC5jbG9uZSgpOwoKICAgIGlmICh4Lm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIHggPSB4LnVtb2QocCk7CiAgICB9IGVsc2UgewogICAgICB4ID0geC5jbG9uZSgpOwogICAgfQoKICAgIC8vIEEgKiB4ICsgQiAqIHkgPSB4CiAgICB2YXIgQSA9IG5ldyBCTigxKTsKICAgIHZhciBCID0gbmV3IEJOKDApOwoKICAgIC8vIEMgKiB4ICsgRCAqIHkgPSB5CiAgICB2YXIgQyA9IG5ldyBCTigwKTsKICAgIHZhciBEID0gbmV3IEJOKDEpOwoKICAgIHZhciBnID0gMDsKCiAgICB3aGlsZSAoeC5pc0V2ZW4oKSAmJiB5LmlzRXZlbigpKSB7CiAgICAgIHguaXVzaHJuKDEpOwogICAgICB5Lml1c2hybigxKTsKICAgICAgKytnOwogICAgfQoKICAgIHZhciB5cCA9IHkuY2xvbmUoKTsKICAgIHZhciB4cCA9IHguY2xvbmUoKTsKCiAgICB3aGlsZSAoIXguaXNaZXJvKCkpIHsKICAgICAgZm9yICh2YXIgaSA9IDAsIGltID0gMTsgKHgud29yZHNbMF0gJiBpbSkgPT09IDAgJiYgaSA8IDI2OyArK2ksIGltIDw8PSAxKTsKICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgeC5pdXNocm4oaSk7CiAgICAgICAgd2hpbGUgKGktLSA+IDApIHsKICAgICAgICAgIGlmIChBLmlzT2RkKCkgfHwgQi5pc09kZCgpKSB7CiAgICAgICAgICAgIEEuaWFkZCh5cCk7CiAgICAgICAgICAgIEIuaXN1Yih4cCk7CiAgICAgICAgICB9CgogICAgICAgICAgQS5pdXNocm4oMSk7CiAgICAgICAgICBCLml1c2hybigxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGogPSAwLCBqbSA9IDE7ICh5LndvcmRzWzBdICYgam0pID09PSAwICYmIGogPCAyNjsgKytqLCBqbSA8PD0gMSk7CiAgICAgIGlmIChqID4gMCkgewogICAgICAgIHkuaXVzaHJuKGopOwogICAgICAgIHdoaWxlIChqLS0gPiAwKSB7CiAgICAgICAgICBpZiAoQy5pc09kZCgpIHx8IEQuaXNPZGQoKSkgewogICAgICAgICAgICBDLmlhZGQoeXApOwogICAgICAgICAgICBELmlzdWIoeHApOwogICAgICAgICAgfQoKICAgICAgICAgIEMuaXVzaHJuKDEpOwogICAgICAgICAgRC5pdXNocm4oMSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoeC5jbXAoeSkgPj0gMCkgewogICAgICAgIHguaXN1Yih5KTsKICAgICAgICBBLmlzdWIoQyk7CiAgICAgICAgQi5pc3ViKEQpOwogICAgICB9IGVsc2UgewogICAgICAgIHkuaXN1Yih4KTsKICAgICAgICBDLmlzdWIoQSk7CiAgICAgICAgRC5pc3ViKEIpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgYTogQywKICAgICAgYjogRCwKICAgICAgZ2NkOiB5Lml1c2hsbihnKQogICAgfTsKICB9OwoKICAvLyBUaGlzIGlzIHJlZHVjZWQgaW5jYXJuYXRpb24gb2YgdGhlIGJpbmFyeSBFRUEKICAvLyBhYm92ZSwgZGVzaWduYXRlZCB0byBpbnZlcnQgbWVtYmVycyBvZiB0aGUKICAvLyBfcHJpbWVfIGZpZWxkcyBGKHApIGF0IGEgbWF4aW1hbCBzcGVlZAogIEJOLnByb3RvdHlwZS5faW52bXAgPSBmdW5jdGlvbiBfaW52bXAgKHApIHsKICAgIGFzc2VydChwLm5lZ2F0aXZlID09PSAwKTsKICAgIGFzc2VydCghcC5pc1plcm8oKSk7CgogICAgdmFyIGEgPSB0aGlzOwogICAgdmFyIGIgPSBwLmNsb25lKCk7CgogICAgaWYgKGEubmVnYXRpdmUgIT09IDApIHsKICAgICAgYSA9IGEudW1vZChwKTsKICAgIH0gZWxzZSB7CiAgICAgIGEgPSBhLmNsb25lKCk7CiAgICB9CgogICAgdmFyIHgxID0gbmV3IEJOKDEpOwogICAgdmFyIHgyID0gbmV3IEJOKDApOwoKICAgIHZhciBkZWx0YSA9IGIuY2xvbmUoKTsKCiAgICB3aGlsZSAoYS5jbXBuKDEpID4gMCAmJiBiLmNtcG4oMSkgPiAwKSB7CiAgICAgIGZvciAodmFyIGkgPSAwLCBpbSA9IDE7IChhLndvcmRzWzBdICYgaW0pID09PSAwICYmIGkgPCAyNjsgKytpLCBpbSA8PD0gMSk7CiAgICAgIGlmIChpID4gMCkgewogICAgICAgIGEuaXVzaHJuKGkpOwogICAgICAgIHdoaWxlIChpLS0gPiAwKSB7CiAgICAgICAgICBpZiAoeDEuaXNPZGQoKSkgewogICAgICAgICAgICB4MS5pYWRkKGRlbHRhKTsKICAgICAgICAgIH0KCiAgICAgICAgICB4MS5pdXNocm4oMSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKHZhciBqID0gMCwgam0gPSAxOyAoYi53b3Jkc1swXSAmIGptKSA9PT0gMCAmJiBqIDwgMjY7ICsraiwgam0gPDw9IDEpOwogICAgICBpZiAoaiA+IDApIHsKICAgICAgICBiLml1c2hybihqKTsKICAgICAgICB3aGlsZSAoai0tID4gMCkgewogICAgICAgICAgaWYgKHgyLmlzT2RkKCkpIHsKICAgICAgICAgICAgeDIuaWFkZChkZWx0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgeDIuaXVzaHJuKDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGEuY21wKGIpID49IDApIHsKICAgICAgICBhLmlzdWIoYik7CiAgICAgICAgeDEuaXN1Yih4Mik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYi5pc3ViKGEpOwogICAgICAgIHgyLmlzdWIoeDEpOwogICAgICB9CiAgICB9CgogICAgdmFyIHJlczsKICAgIGlmIChhLmNtcG4oMSkgPT09IDApIHsKICAgICAgcmVzID0geDE7CiAgICB9IGVsc2UgewogICAgICByZXMgPSB4MjsKICAgIH0KCiAgICBpZiAocmVzLmNtcG4oMCkgPCAwKSB7CiAgICAgIHJlcy5pYWRkKHApOwogICAgfQoKICAgIHJldHVybiByZXM7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmdjZCA9IGZ1bmN0aW9uIGdjZCAobnVtKSB7CiAgICBpZiAodGhpcy5pc1plcm8oKSkgcmV0dXJuIG51bS5hYnMoKTsKICAgIGlmIChudW0uaXNaZXJvKCkpIHJldHVybiB0aGlzLmFicygpOwoKICAgIHZhciBhID0gdGhpcy5jbG9uZSgpOwogICAgdmFyIGIgPSBudW0uY2xvbmUoKTsKICAgIGEubmVnYXRpdmUgPSAwOwogICAgYi5uZWdhdGl2ZSA9IDA7CgogICAgLy8gUmVtb3ZlIGNvbW1vbiBmYWN0b3Igb2YgdHdvCiAgICBmb3IgKHZhciBzaGlmdCA9IDA7IGEuaXNFdmVuKCkgJiYgYi5pc0V2ZW4oKTsgc2hpZnQrKykgewogICAgICBhLml1c2hybigxKTsKICAgICAgYi5pdXNocm4oMSk7CiAgICB9CgogICAgZG8gewogICAgICB3aGlsZSAoYS5pc0V2ZW4oKSkgewogICAgICAgIGEuaXVzaHJuKDEpOwogICAgICB9CiAgICAgIHdoaWxlIChiLmlzRXZlbigpKSB7CiAgICAgICAgYi5pdXNocm4oMSk7CiAgICAgIH0KCiAgICAgIHZhciByID0gYS5jbXAoYik7CiAgICAgIGlmIChyIDwgMCkgewogICAgICAgIC8vIFN3YXAgYGFgIGFuZCBgYmAgdG8gbWFrZSBgYWAgYWx3YXlzIGJpZ2dlciB0aGFuIGBiYAogICAgICAgIHZhciB0ID0gYTsKICAgICAgICBhID0gYjsKICAgICAgICBiID0gdDsKICAgICAgfSBlbHNlIGlmIChyID09PSAwIHx8IGIuY21wbigxKSA9PT0gMCkgewogICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICBhLmlzdWIoYik7CiAgICB9IHdoaWxlICh0cnVlKTsKCiAgICByZXR1cm4gYi5pdXNobG4oc2hpZnQpOwogIH07CgogIC8vIEludmVydCBudW1iZXIgaW4gdGhlIGZpZWxkIEYobnVtKQogIEJOLnByb3RvdHlwZS5pbnZtID0gZnVuY3Rpb24gaW52bSAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5lZ2NkKG51bSkuYS51bW9kKG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlzRXZlbiA9IGZ1bmN0aW9uIGlzRXZlbiAoKSB7CiAgICByZXR1cm4gKHRoaXMud29yZHNbMF0gJiAxKSA9PT0gMDsKICB9OwoKICBCTi5wcm90b3R5cGUuaXNPZGQgPSBmdW5jdGlvbiBpc09kZCAoKSB7CiAgICByZXR1cm4gKHRoaXMud29yZHNbMF0gJiAxKSA9PT0gMTsKICB9OwoKICAvLyBBbmQgZmlyc3Qgd29yZCBhbmQgbnVtCiAgQk4ucHJvdG90eXBlLmFuZGxuID0gZnVuY3Rpb24gYW5kbG4gKG51bSkgewogICAgcmV0dXJuIHRoaXMud29yZHNbMF0gJiBudW07CiAgfTsKCiAgLy8gSW5jcmVtZW50IGF0IHRoZSBiaXQgcG9zaXRpb24gaW4tbGluZQogIEJOLnByb3RvdHlwZS5iaW5jbiA9IGZ1bmN0aW9uIGJpbmNuIChiaXQpIHsKICAgIGFzc2VydCh0eXBlb2YgYml0ID09PSAnbnVtYmVyJyk7CiAgICB2YXIgciA9IGJpdCAlIDI2OwogICAgdmFyIHMgPSAoYml0IC0gcikgLyAyNjsKICAgIHZhciBxID0gMSA8PCByOwoKICAgIC8vIEZhc3QgY2FzZTogYml0IGlzIG11Y2ggaGlnaGVyIHRoYW4gYWxsIGV4aXN0aW5nIHdvcmRzCiAgICBpZiAodGhpcy5sZW5ndGggPD0gcykgewogICAgICB0aGlzLl9leHBhbmQocyArIDEpOwogICAgICB0aGlzLndvcmRzW3NdIHw9IHE7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8vIEFkZCBiaXQgYW5kIHByb3BhZ2F0ZSwgaWYgbmVlZGVkCiAgICB2YXIgY2FycnkgPSBxOwogICAgZm9yICh2YXIgaSA9IHM7IGNhcnJ5ICE9PSAwICYmIGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciB3ID0gdGhpcy53b3Jkc1tpXSB8IDA7CiAgICAgIHcgKz0gY2Fycnk7CiAgICAgIGNhcnJ5ID0gdyA+Pj4gMjY7CiAgICAgIHcgJj0gMHgzZmZmZmZmOwogICAgICB0aGlzLndvcmRzW2ldID0gdzsKICAgIH0KICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICB0aGlzLndvcmRzW2ldID0gY2Fycnk7CiAgICAgIHRoaXMubGVuZ3RoKys7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9OwoKICBCTi5wcm90b3R5cGUuaXNaZXJvID0gZnVuY3Rpb24gaXNaZXJvICgpIHsKICAgIHJldHVybiB0aGlzLmxlbmd0aCA9PT0gMSAmJiB0aGlzLndvcmRzWzBdID09PSAwOwogIH07CgogIEJOLnByb3RvdHlwZS5jbXBuID0gZnVuY3Rpb24gY21wbiAobnVtKSB7CiAgICB2YXIgbmVnYXRpdmUgPSBudW0gPCAwOwoKICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwICYmICFuZWdhdGl2ZSkgcmV0dXJuIC0xOwogICAgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbmVnYXRpdmUpIHJldHVybiAxOwoKICAgIHRoaXMuc3RyaXAoKTsKCiAgICB2YXIgcmVzOwogICAgaWYgKHRoaXMubGVuZ3RoID4gMSkgewogICAgICByZXMgPSAxOwogICAgfSBlbHNlIHsKICAgICAgaWYgKG5lZ2F0aXZlKSB7CiAgICAgICAgbnVtID0gLW51bTsKICAgICAgfQoKICAgICAgYXNzZXJ0KG51bSA8PSAweDNmZmZmZmYsICdOdW1iZXIgaXMgdG9vIGJpZycpOwoKICAgICAgdmFyIHcgPSB0aGlzLndvcmRzWzBdIHwgMDsKICAgICAgcmVzID0gdyA9PT0gbnVtID8gMCA6IHcgPCBudW0gPyAtMSA6IDE7CiAgICB9CiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgcmV0dXJuIC1yZXMgfCAwOwogICAgcmV0dXJuIHJlczsKICB9OwoKICAvLyBDb21wYXJlIHR3byBudW1iZXJzIGFuZCByZXR1cm46CiAgLy8gMSAtIGlmIGB0aGlzYCA+IGBudW1gCiAgLy8gMCAtIGlmIGB0aGlzYCA9PSBgbnVtYAogIC8vIC0xIC0gaWYgYHRoaXNgIDwgYG51bWAKICBCTi5wcm90b3R5cGUuY21wID0gZnVuY3Rpb24gY21wIChudW0pIHsKICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwICYmIG51bS5uZWdhdGl2ZSA9PT0gMCkgcmV0dXJuIC0xOwogICAgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbnVtLm5lZ2F0aXZlICE9PSAwKSByZXR1cm4gMTsKCiAgICB2YXIgcmVzID0gdGhpcy51Y21wKG51bSk7CiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgcmV0dXJuIC1yZXMgfCAwOwogICAgcmV0dXJuIHJlczsKICB9OwoKICAvLyBVbnNpZ25lZCBjb21wYXJpc29uCiAgQk4ucHJvdG90eXBlLnVjbXAgPSBmdW5jdGlvbiB1Y21wIChudW0pIHsKICAgIC8vIEF0IHRoaXMgcG9pbnQgYm90aCBudW1iZXJzIGhhdmUgdGhlIHNhbWUgc2lnbgogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIDE7CiAgICBpZiAodGhpcy5sZW5ndGggPCBudW0ubGVuZ3RoKSByZXR1cm4gLTE7CgogICAgdmFyIHJlcyA9IDA7CiAgICBmb3IgKHZhciBpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICB2YXIgYSA9IHRoaXMud29yZHNbaV0gfCAwOwogICAgICB2YXIgYiA9IG51bS53b3Jkc1tpXSB8IDA7CgogICAgICBpZiAoYSA9PT0gYikgY29udGludWU7CiAgICAgIGlmIChhIDwgYikgewogICAgICAgIHJlcyA9IC0xOwogICAgICB9IGVsc2UgaWYgKGEgPiBiKSB7CiAgICAgICAgcmVzID0gMTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIHJldHVybiByZXM7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmd0biA9IGZ1bmN0aW9uIGd0biAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPT09IDE7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmd0ID0gZnVuY3Rpb24gZ3QgKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IDE7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmd0ZW4gPSBmdW5jdGlvbiBndGVuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA+PSAwOwogIH07CgogIEJOLnByb3RvdHlwZS5ndGUgPSBmdW5jdGlvbiBndGUgKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPj0gMDsKICB9OwoKICBCTi5wcm90b3R5cGUubHRuID0gZnVuY3Rpb24gbHRuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA9PT0gLTE7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmx0ID0gZnVuY3Rpb24gbHQgKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IC0xOwogIH07CgogIEJOLnByb3RvdHlwZS5sdGVuID0gZnVuY3Rpb24gbHRlbiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPD0gMDsKICB9OwoKICBCTi5wcm90b3R5cGUubHRlID0gZnVuY3Rpb24gbHRlIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcChudW0pIDw9IDA7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmVxbiA9IGZ1bmN0aW9uIGVxbiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPT09IDA7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmVxID0gZnVuY3Rpb24gZXEgKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IDA7CiAgfTsKCiAgLy8KICAvLyBBIHJlZHVjZSBjb250ZXh0LCBjb3VsZCBiZSB1c2luZyBtb250Z29tZXJ5IG9yIHNvbWV0aGluZyBiZXR0ZXIsIGRlcGVuZGluZwogIC8vIG9uIHRoZSBgbWAgaXRzZWxmLgogIC8vCiAgQk4ucmVkID0gZnVuY3Rpb24gcmVkIChudW0pIHsKICAgIHJldHVybiBuZXcgUmVkKG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnRvUmVkID0gZnVuY3Rpb24gdG9SZWQgKGN0eCkgewogICAgYXNzZXJ0KCF0aGlzLnJlZCwgJ0FscmVhZHkgYSBudW1iZXIgaW4gcmVkdWN0aW9uIGNvbnRleHQnKTsKICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwLCAncmVkIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZXMnKTsKICAgIHJldHVybiBjdHguY29udmVydFRvKHRoaXMpLl9mb3JjZVJlZChjdHgpOwogIH07CgogIEJOLnByb3RvdHlwZS5mcm9tUmVkID0gZnVuY3Rpb24gZnJvbVJlZCAoKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdmcm9tUmVkIHdvcmtzIG9ubHkgd2l0aCBudW1iZXJzIGluIHJlZHVjdGlvbiBjb250ZXh0Jyk7CiAgICByZXR1cm4gdGhpcy5yZWQuY29udmVydEZyb20odGhpcyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLl9mb3JjZVJlZCA9IGZ1bmN0aW9uIF9mb3JjZVJlZCAoY3R4KSB7CiAgICB0aGlzLnJlZCA9IGN0eDsKICAgIHJldHVybiB0aGlzOwogIH07CgogIEJOLnByb3RvdHlwZS5mb3JjZVJlZCA9IGZ1bmN0aW9uIGZvcmNlUmVkIChjdHgpIHsKICAgIGFzc2VydCghdGhpcy5yZWQsICdBbHJlYWR5IGEgbnVtYmVyIGluIHJlZHVjdGlvbiBjb250ZXh0Jyk7CiAgICByZXR1cm4gdGhpcy5fZm9yY2VSZWQoY3R4KTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkQWRkID0gZnVuY3Rpb24gcmVkQWRkIChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZEFkZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHJldHVybiB0aGlzLnJlZC5hZGQodGhpcywgbnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkSUFkZCA9IGZ1bmN0aW9uIHJlZElBZGQgKG51bSkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkSUFkZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHJldHVybiB0aGlzLnJlZC5pYWRkKHRoaXMsIG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZFN1YiA9IGZ1bmN0aW9uIHJlZFN1YiAobnVtKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTdWIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICByZXR1cm4gdGhpcy5yZWQuc3ViKHRoaXMsIG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZElTdWIgPSBmdW5jdGlvbiByZWRJU3ViIChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZElTdWIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICByZXR1cm4gdGhpcy5yZWQuaXN1Yih0aGlzLCBudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRTaGwgPSBmdW5jdGlvbiByZWRTaGwgKG51bSkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU2hsIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgcmV0dXJuIHRoaXMucmVkLnVzaGwodGhpcywgbnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkTXVsID0gZnVuY3Rpb24gcmVkTXVsIChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZE11bCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHRoaXMucmVkLl92ZXJpZnkyKHRoaXMsIG51bSk7CiAgICByZXR1cm4gdGhpcy5yZWQubXVsKHRoaXMsIG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZElNdWwgPSBmdW5jdGlvbiByZWRJTXVsIChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZE11bCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHRoaXMucmVkLl92ZXJpZnkyKHRoaXMsIG51bSk7CiAgICByZXR1cm4gdGhpcy5yZWQuaW11bCh0aGlzLCBudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRTcXIgPSBmdW5jdGlvbiByZWRTcXIgKCkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3FyIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICByZXR1cm4gdGhpcy5yZWQuc3FyKHRoaXMpOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRJU3FyID0gZnVuY3Rpb24gcmVkSVNxciAoKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJU3FyIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICByZXR1cm4gdGhpcy5yZWQuaXNxcih0aGlzKTsKICB9OwoKICAvLyBTcXVhcmUgcm9vdCBvdmVyIHAKICBCTi5wcm90b3R5cGUucmVkU3FydCA9IGZ1bmN0aW9uIHJlZFNxcnQgKCkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3FydCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgcmV0dXJuIHRoaXMucmVkLnNxcnQodGhpcyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZEludm0gPSBmdW5jdGlvbiByZWRJbnZtICgpIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZEludm0gd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgIHJldHVybiB0aGlzLnJlZC5pbnZtKHRoaXMpOwogIH07CgogIC8vIFJldHVybiBuZWdhdGl2ZSBjbG9uZSBvZiBgdGhpc2AgJSBgcmVkIG1vZHVsb2AKICBCTi5wcm90b3R5cGUucmVkTmVnID0gZnVuY3Rpb24gcmVkTmVnICgpIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZE5lZyB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgcmV0dXJuIHRoaXMucmVkLm5lZyh0aGlzKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkUG93ID0gZnVuY3Rpb24gcmVkUG93IChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCAmJiAhbnVtLnJlZCwgJ3JlZFBvdyhub3JtYWxOdW0pJyk7CiAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgIHJldHVybiB0aGlzLnJlZC5wb3codGhpcywgbnVtKTsKICB9OwoKICAvLyBQcmltZSBudW1iZXJzIHdpdGggZWZmaWNpZW50IHJlZHVjdGlvbgogIHZhciBwcmltZXMgPSB7CiAgICBrMjU2OiBudWxsLAogICAgcDIyNDogbnVsbCwKICAgIHAxOTI6IG51bGwsCiAgICBwMjU1MTk6IG51bGwKICB9OwoKICAvLyBQc2V1ZG8tTWVyc2VubmUgcHJpbWUKICBmdW5jdGlvbiBNUHJpbWUgKG5hbWUsIHApIHsKICAgIC8vIFAgPSAyIF4gTiAtIEsKICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICB0aGlzLnAgPSBuZXcgQk4ocCwgMTYpOwogICAgdGhpcy5uID0gdGhpcy5wLmJpdExlbmd0aCgpOwogICAgdGhpcy5rID0gbmV3IEJOKDEpLml1c2hsbih0aGlzLm4pLmlzdWIodGhpcy5wKTsKCiAgICB0aGlzLnRtcCA9IHRoaXMuX3RtcCgpOwogIH0KCiAgTVByaW1lLnByb3RvdHlwZS5fdG1wID0gZnVuY3Rpb24gX3RtcCAoKSB7CiAgICB2YXIgdG1wID0gbmV3IEJOKG51bGwpOwogICAgdG1wLndvcmRzID0gbmV3IEFycmF5KE1hdGguY2VpbCh0aGlzLm4gLyAxMykpOwogICAgcmV0dXJuIHRtcDsKICB9OwoKICBNUHJpbWUucHJvdG90eXBlLmlyZWR1Y2UgPSBmdW5jdGlvbiBpcmVkdWNlIChudW0pIHsKICAgIC8vIEFzc3VtZXMgdGhhdCBgbnVtYCBpcyBsZXNzIHRoYW4gYFBeMmAKICAgIC8vIG51bSA9IEhJICogKDIgXiBOIC0gSykgKyBISSAqIEsgKyBMTyA9IEhJICogSyArIExPIChtb2QgUCkKICAgIHZhciByID0gbnVtOwogICAgdmFyIHJsZW47CgogICAgZG8gewogICAgICB0aGlzLnNwbGl0KHIsIHRoaXMudG1wKTsKICAgICAgciA9IHRoaXMuaW11bEsocik7CiAgICAgIHIgPSByLmlhZGQodGhpcy50bXApOwogICAgICBybGVuID0gci5iaXRMZW5ndGgoKTsKICAgIH0gd2hpbGUgKHJsZW4gPiB0aGlzLm4pOwoKICAgIHZhciBjbXAgPSBybGVuIDwgdGhpcy5uID8gLTEgOiByLnVjbXAodGhpcy5wKTsKICAgIGlmIChjbXAgPT09IDApIHsKICAgICAgci53b3Jkc1swXSA9IDA7CiAgICAgIHIubGVuZ3RoID0gMTsKICAgIH0gZWxzZSBpZiAoY21wID4gMCkgewogICAgICByLmlzdWIodGhpcy5wKTsKICAgIH0gZWxzZSB7CiAgICAgIHIuc3RyaXAoKTsKICAgIH0KCiAgICByZXR1cm4gcjsKICB9OwoKICBNUHJpbWUucHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQgKGlucHV0LCBvdXQpIHsKICAgIGlucHV0Lml1c2hybih0aGlzLm4sIDAsIG91dCk7CiAgfTsKCiAgTVByaW1lLnByb3RvdHlwZS5pbXVsSyA9IGZ1bmN0aW9uIGltdWxLIChudW0pIHsKICAgIHJldHVybiBudW0uaW11bCh0aGlzLmspOwogIH07CgogIGZ1bmN0aW9uIEsyNTYgKCkgewogICAgTVByaW1lLmNhbGwoCiAgICAgIHRoaXMsCiAgICAgICdrMjU2JywKICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmYzJmJyk7CiAgfQogIGluaGVyaXRzKEsyNTYsIE1QcmltZSk7CgogIEsyNTYucHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQgKGlucHV0LCBvdXRwdXQpIHsKICAgIC8vIDI1NiA9IDkgKiAyNiArIDIyCiAgICB2YXIgbWFzayA9IDB4M2ZmZmZmOwoKICAgIHZhciBvdXRMZW4gPSBNYXRoLm1pbihpbnB1dC5sZW5ndGgsIDkpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvdXRMZW47IGkrKykgewogICAgICBvdXRwdXQud29yZHNbaV0gPSBpbnB1dC53b3Jkc1tpXTsKICAgIH0KICAgIG91dHB1dC5sZW5ndGggPSBvdXRMZW47CgogICAgaWYgKGlucHV0Lmxlbmd0aCA8PSA5KSB7CiAgICAgIGlucHV0LndvcmRzWzBdID0gMDsKICAgICAgaW5wdXQubGVuZ3RoID0gMTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIFNoaWZ0IGJ5IDkgbGltYnMKICAgIHZhciBwcmV2ID0gaW5wdXQud29yZHNbOV07CiAgICBvdXRwdXQud29yZHNbb3V0cHV0Lmxlbmd0aCsrXSA9IHByZXYgJiBtYXNrOwoKICAgIGZvciAoaSA9IDEwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIG5leHQgPSBpbnB1dC53b3Jkc1tpXSB8IDA7CiAgICAgIGlucHV0LndvcmRzW2kgLSAxMF0gPSAoKG5leHQgJiBtYXNrKSA8PCA0KSB8IChwcmV2ID4+PiAyMik7CiAgICAgIHByZXYgPSBuZXh0OwogICAgfQogICAgcHJldiA+Pj49IDIyOwogICAgaW5wdXQud29yZHNbaSAtIDEwXSA9IHByZXY7CiAgICBpZiAocHJldiA9PT0gMCAmJiBpbnB1dC5sZW5ndGggPiAxMCkgewogICAgICBpbnB1dC5sZW5ndGggLT0gMTA7CiAgICB9IGVsc2UgewogICAgICBpbnB1dC5sZW5ndGggLT0gOTsKICAgIH0KICB9OwoKICBLMjU2LnByb3RvdHlwZS5pbXVsSyA9IGZ1bmN0aW9uIGltdWxLIChudW0pIHsKICAgIC8vIEsgPSAweDEwMDAwMDNkMSA9IFsgMHg0MCwgMHgzZDEgXQogICAgbnVtLndvcmRzW251bS5sZW5ndGhdID0gMDsKICAgIG51bS53b3Jkc1tudW0ubGVuZ3RoICsgMV0gPSAwOwogICAgbnVtLmxlbmd0aCArPSAyOwoKICAgIC8vIGJvdW5kZWQgYXQ6IDB4NDAgKiAweDNmZmZmZmYgKyAweDNkMCA9IDB4MTAwMDAwMzkwCiAgICB2YXIgbG8gPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHcgPSBudW0ud29yZHNbaV0gfCAwOwogICAgICBsbyArPSB3ICogMHgzZDE7CiAgICAgIG51bS53b3Jkc1tpXSA9IGxvICYgMHgzZmZmZmZmOwogICAgICBsbyA9IHcgKiAweDQwICsgKChsbyAvIDB4NDAwMDAwMCkgfCAwKTsKICAgIH0KCiAgICAvLyBGYXN0IGxlbmd0aCByZWR1Y3Rpb24KICAgIGlmIChudW0ud29yZHNbbnVtLmxlbmd0aCAtIDFdID09PSAwKSB7CiAgICAgIG51bS5sZW5ndGgtLTsKICAgICAgaWYgKG51bS53b3Jkc1tudW0ubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICBudW0ubGVuZ3RoLS07CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudW07CiAgfTsKCiAgZnVuY3Rpb24gUDIyNCAoKSB7CiAgICBNUHJpbWUuY2FsbCgKICAgICAgdGhpcywKICAgICAgJ3AyMjQnLAogICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDEnKTsKICB9CiAgaW5oZXJpdHMoUDIyNCwgTVByaW1lKTsKCiAgZnVuY3Rpb24gUDE5MiAoKSB7CiAgICBNUHJpbWUuY2FsbCgKICAgICAgdGhpcywKICAgICAgJ3AxOTInLAogICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUgZmZmZmZmZmYgZmZmZmZmZmYnKTsKICB9CiAgaW5oZXJpdHMoUDE5MiwgTVByaW1lKTsKCiAgZnVuY3Rpb24gUDI1NTE5ICgpIHsKICAgIC8vIDIgXiAyNTUgLSAxOQogICAgTVByaW1lLmNhbGwoCiAgICAgIHRoaXMsCiAgICAgICcyNTUxOScsCiAgICAgICc3ZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmVkJyk7CiAgfQogIGluaGVyaXRzKFAyNTUxOSwgTVByaW1lKTsKCiAgUDI1NTE5LnByb3RvdHlwZS5pbXVsSyA9IGZ1bmN0aW9uIGltdWxLIChudW0pIHsKICAgIC8vIEsgPSAweDEzCiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGhpID0gKG51bS53b3Jkc1tpXSB8IDApICogMHgxMyArIGNhcnJ5OwogICAgICB2YXIgbG8gPSBoaSAmIDB4M2ZmZmZmZjsKICAgICAgaGkgPj4+PSAyNjsKCiAgICAgIG51bS53b3Jkc1tpXSA9IGxvOwogICAgICBjYXJyeSA9IGhpOwogICAgfQogICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgIG51bS53b3Jkc1tudW0ubGVuZ3RoKytdID0gY2Fycnk7CiAgICB9CiAgICByZXR1cm4gbnVtOwogIH07CgogIC8vIEV4cG9ydGVkIG1vc3RseSBmb3IgdGVzdGluZyBwdXJwb3NlcywgdXNlIHBsYWluIG5hbWUgaW5zdGVhZAogIEJOLl9wcmltZSA9IGZ1bmN0aW9uIHByaW1lIChuYW1lKSB7CiAgICAvLyBDYWNoZWQgdmVyc2lvbiBvZiBwcmltZQogICAgaWYgKHByaW1lc1tuYW1lXSkgcmV0dXJuIHByaW1lc1tuYW1lXTsKCiAgICB2YXIgcHJpbWU7CiAgICBpZiAobmFtZSA9PT0gJ2syNTYnKSB7CiAgICAgIHByaW1lID0gbmV3IEsyNTYoKTsKICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3AyMjQnKSB7CiAgICAgIHByaW1lID0gbmV3IFAyMjQoKTsKICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3AxOTInKSB7CiAgICAgIHByaW1lID0gbmV3IFAxOTIoKTsKICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3AyNTUxOScpIHsKICAgICAgcHJpbWUgPSBuZXcgUDI1NTE5KCk7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gcHJpbWUgJyArIG5hbWUpOwogICAgfQogICAgcHJpbWVzW25hbWVdID0gcHJpbWU7CgogICAgcmV0dXJuIHByaW1lOwogIH07CgogIC8vCiAgLy8gQmFzZSByZWR1Y3Rpb24gZW5naW5lCiAgLy8KICBmdW5jdGlvbiBSZWQgKG0pIHsKICAgIGlmICh0eXBlb2YgbSA9PT0gJ3N0cmluZycpIHsKICAgICAgdmFyIHByaW1lID0gQk4uX3ByaW1lKG0pOwogICAgICB0aGlzLm0gPSBwcmltZS5wOwogICAgICB0aGlzLnByaW1lID0gcHJpbWU7CiAgICB9IGVsc2UgewogICAgICB0aGlzLm0gPSBtOwogICAgICB0aGlzLnByaW1lID0gbnVsbDsKICAgIH0KICB9CgogIFJlZC5wcm90b3R5cGUuX3ZlcmlmeTEgPSBmdW5jdGlvbiBfdmVyaWZ5MSAoYSkgewogICAgYXNzZXJ0KGEubmVnYXRpdmUgPT09IDAsICdyZWQgd29ya3Mgb25seSB3aXRoIHBvc2l0aXZlcycpOwogICAgYXNzZXJ0KGEucmVkLCAncmVkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogIH07CgogIFJlZC5wcm90b3R5cGUuX3ZlcmlmeTIgPSBmdW5jdGlvbiBfdmVyaWZ5MiAoYSwgYikgewogICAgYXNzZXJ0KChhLm5lZ2F0aXZlIHwgYi5uZWdhdGl2ZSkgPT09IDAsICdyZWQgd29ya3Mgb25seSB3aXRoIHBvc2l0aXZlcycpOwogICAgYXNzZXJ0KGEucmVkICYmIGEucmVkID09PSBiLnJlZCwKICAgICAgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICB9OwoKICBSZWQucHJvdG90eXBlLmltb2QgPSBmdW5jdGlvbiBpbW9kIChhKSB7CiAgICBpZiAodGhpcy5wcmltZSkgcmV0dXJuIHRoaXMucHJpbWUuaXJlZHVjZShhKS5fZm9yY2VSZWQodGhpcyk7CiAgICByZXR1cm4gYS51bW9kKHRoaXMubSkuX2ZvcmNlUmVkKHRoaXMpOwogIH07CgogIFJlZC5wcm90b3R5cGUubmVnID0gZnVuY3Rpb24gbmVnIChhKSB7CiAgICBpZiAoYS5pc1plcm8oKSkgewogICAgICByZXR1cm4gYS5jbG9uZSgpOwogICAgfQoKICAgIHJldHVybiB0aGlzLm0uc3ViKGEpLl9mb3JjZVJlZCh0aGlzKTsKICB9OwoKICBSZWQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCAoYSwgYikgewogICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICB2YXIgcmVzID0gYS5hZGQoYik7CiAgICBpZiAocmVzLmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgcmVzLmlzdWIodGhpcy5tKTsKICAgIH0KICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogIH07CgogIFJlZC5wcm90b3R5cGUuaWFkZCA9IGZ1bmN0aW9uIGlhZGQgKGEsIGIpIHsKICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgdmFyIHJlcyA9IGEuaWFkZChiKTsKICAgIGlmIChyZXMuY21wKHRoaXMubSkgPj0gMCkgewogICAgICByZXMuaXN1Yih0aGlzLm0pOwogICAgfQogICAgcmV0dXJuIHJlczsKICB9OwoKICBSZWQucHJvdG90eXBlLnN1YiA9IGZ1bmN0aW9uIHN1YiAoYSwgYikgewogICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICB2YXIgcmVzID0gYS5zdWIoYik7CiAgICBpZiAocmVzLmNtcG4oMCkgPCAwKSB7CiAgICAgIHJlcy5pYWRkKHRoaXMubSk7CiAgICB9CiAgICByZXR1cm4gcmVzLl9mb3JjZVJlZCh0aGlzKTsKICB9OwoKICBSZWQucHJvdG90eXBlLmlzdWIgPSBmdW5jdGlvbiBpc3ViIChhLCBiKSB7CiAgICB0aGlzLl92ZXJpZnkyKGEsIGIpOwoKICAgIHZhciByZXMgPSBhLmlzdWIoYik7CiAgICBpZiAocmVzLmNtcG4oMCkgPCAwKSB7CiAgICAgIHJlcy5pYWRkKHRoaXMubSk7CiAgICB9CiAgICByZXR1cm4gcmVzOwogIH07CgogIFJlZC5wcm90b3R5cGUuc2hsID0gZnVuY3Rpb24gc2hsIChhLCBudW0pIHsKICAgIHRoaXMuX3ZlcmlmeTEoYSk7CiAgICByZXR1cm4gdGhpcy5pbW9kKGEudXNobG4obnVtKSk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5pbXVsID0gZnVuY3Rpb24gaW11bCAoYSwgYikgewogICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKICAgIHJldHVybiB0aGlzLmltb2QoYS5pbXVsKGIpKTsKICB9OwoKICBSZWQucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bCAoYSwgYikgewogICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKICAgIHJldHVybiB0aGlzLmltb2QoYS5tdWwoYikpOwogIH07CgogIFJlZC5wcm90b3R5cGUuaXNxciA9IGZ1bmN0aW9uIGlzcXIgKGEpIHsKICAgIHJldHVybiB0aGlzLmltdWwoYSwgYS5jbG9uZSgpKTsKICB9OwoKICBSZWQucHJvdG90eXBlLnNxciA9IGZ1bmN0aW9uIHNxciAoYSkgewogICAgcmV0dXJuIHRoaXMubXVsKGEsIGEpOwogIH07CgogIFJlZC5wcm90b3R5cGUuc3FydCA9IGZ1bmN0aW9uIHNxcnQgKGEpIHsKICAgIGlmIChhLmlzWmVybygpKSByZXR1cm4gYS5jbG9uZSgpOwoKICAgIHZhciBtb2QzID0gdGhpcy5tLmFuZGxuKDMpOwogICAgYXNzZXJ0KG1vZDMgJSAyID09PSAxKTsKCiAgICAvLyBGYXN0IGNhc2UKICAgIGlmIChtb2QzID09PSAzKSB7CiAgICAgIHZhciBwb3cgPSB0aGlzLm0uYWRkKG5ldyBCTigxKSkuaXVzaHJuKDIpOwogICAgICByZXR1cm4gdGhpcy5wb3coYSwgcG93KTsKICAgIH0KCiAgICAvLyBUb25lbGxpLVNoYW5rcyBhbGdvcml0aG0gKFRvdGFsbHkgdW5vcHRpbWl6ZWQgYW5kIHNsb3cpCiAgICAvLwogICAgLy8gRmluZCBRIGFuZCBTLCB0aGF0IFEgKiAyIF4gUyA9IChQIC0gMSkKICAgIHZhciBxID0gdGhpcy5tLnN1Ym4oMSk7CiAgICB2YXIgcyA9IDA7CiAgICB3aGlsZSAoIXEuaXNaZXJvKCkgJiYgcS5hbmRsbigxKSA9PT0gMCkgewogICAgICBzKys7CiAgICAgIHEuaXVzaHJuKDEpOwogICAgfQogICAgYXNzZXJ0KCFxLmlzWmVybygpKTsKCiAgICB2YXIgb25lID0gbmV3IEJOKDEpLnRvUmVkKHRoaXMpOwogICAgdmFyIG5PbmUgPSBvbmUucmVkTmVnKCk7CgogICAgLy8gRmluZCBxdWFkcmF0aWMgbm9uLXJlc2lkdWUKICAgIC8vIE5PVEU6IE1heCBpcyBzdWNoIGJlY2F1c2Ugb2YgZ2VuZXJhbGl6ZWQgUmllbWFubiBoeXBvdGhlc2lzLgogICAgdmFyIGxwb3cgPSB0aGlzLm0uc3VibigxKS5pdXNocm4oMSk7CiAgICB2YXIgeiA9IHRoaXMubS5iaXRMZW5ndGgoKTsKICAgIHogPSBuZXcgQk4oMiAqIHogKiB6KS50b1JlZCh0aGlzKTsKCiAgICB3aGlsZSAodGhpcy5wb3coeiwgbHBvdykuY21wKG5PbmUpICE9PSAwKSB7CiAgICAgIHoucmVkSUFkZChuT25lKTsKICAgIH0KCiAgICB2YXIgYyA9IHRoaXMucG93KHosIHEpOwogICAgdmFyIHIgPSB0aGlzLnBvdyhhLCBxLmFkZG4oMSkuaXVzaHJuKDEpKTsKICAgIHZhciB0ID0gdGhpcy5wb3coYSwgcSk7CiAgICB2YXIgbSA9IHM7CiAgICB3aGlsZSAodC5jbXAob25lKSAhPT0gMCkgewogICAgICB2YXIgdG1wID0gdDsKICAgICAgZm9yICh2YXIgaSA9IDA7IHRtcC5jbXAob25lKSAhPT0gMDsgaSsrKSB7CiAgICAgICAgdG1wID0gdG1wLnJlZFNxcigpOwogICAgICB9CiAgICAgIGFzc2VydChpIDwgbSk7CiAgICAgIHZhciBiID0gdGhpcy5wb3coYywgbmV3IEJOKDEpLml1c2hsbihtIC0gaSAtIDEpKTsKCiAgICAgIHIgPSByLnJlZE11bChiKTsKICAgICAgYyA9IGIucmVkU3FyKCk7CiAgICAgIHQgPSB0LnJlZE11bChjKTsKICAgICAgbSA9IGk7CiAgICB9CgogICAgcmV0dXJuIHI7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5pbnZtID0gZnVuY3Rpb24gaW52bSAoYSkgewogICAgdmFyIGludiA9IGEuX2ludm1wKHRoaXMubSk7CiAgICBpZiAoaW52Lm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIGludi5uZWdhdGl2ZSA9IDA7CiAgICAgIHJldHVybiB0aGlzLmltb2QoaW52KS5yZWROZWcoKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB0aGlzLmltb2QoaW52KTsKICAgIH0KICB9OwoKICBSZWQucHJvdG90eXBlLnBvdyA9IGZ1bmN0aW9uIHBvdyAoYSwgbnVtKSB7CiAgICBpZiAobnVtLmlzWmVybygpKSByZXR1cm4gbmV3IEJOKDEpOwogICAgaWYgKG51bS5jbXBuKDEpID09PSAwKSByZXR1cm4gYS5jbG9uZSgpOwoKICAgIHZhciB3aW5kb3dTaXplID0gNDsKICAgIHZhciB3bmQgPSBuZXcgQXJyYXkoMSA8PCB3aW5kb3dTaXplKTsKICAgIHduZFswXSA9IG5ldyBCTigxKS50b1JlZCh0aGlzKTsKICAgIHduZFsxXSA9IGE7CiAgICBmb3IgKHZhciBpID0gMjsgaSA8IHduZC5sZW5ndGg7IGkrKykgewogICAgICB3bmRbaV0gPSB0aGlzLm11bCh3bmRbaSAtIDFdLCBhKTsKICAgIH0KCiAgICB2YXIgcmVzID0gd25kWzBdOwogICAgdmFyIGN1cnJlbnQgPSAwOwogICAgdmFyIGN1cnJlbnRMZW4gPSAwOwogICAgdmFyIHN0YXJ0ID0gbnVtLmJpdExlbmd0aCgpICUgMjY7CiAgICBpZiAoc3RhcnQgPT09IDApIHsKICAgICAgc3RhcnQgPSAyNjsKICAgIH0KCiAgICBmb3IgKGkgPSBudW0ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgdmFyIHdvcmQgPSBudW0ud29yZHNbaV07CiAgICAgIGZvciAodmFyIGogPSBzdGFydCAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgdmFyIGJpdCA9ICh3b3JkID4+IGopICYgMTsKICAgICAgICBpZiAocmVzICE9PSB3bmRbMF0pIHsKICAgICAgICAgIHJlcyA9IHRoaXMuc3FyKHJlcyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYml0ID09PSAwICYmIGN1cnJlbnQgPT09IDApIHsKICAgICAgICAgIGN1cnJlbnRMZW4gPSAwOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBjdXJyZW50IDw8PSAxOwogICAgICAgIGN1cnJlbnQgfD0gYml0OwogICAgICAgIGN1cnJlbnRMZW4rKzsKICAgICAgICBpZiAoY3VycmVudExlbiAhPT0gd2luZG93U2l6ZSAmJiAoaSAhPT0gMCB8fCBqICE9PSAwKSkgY29udGludWU7CgogICAgICAgIHJlcyA9IHRoaXMubXVsKHJlcywgd25kW2N1cnJlbnRdKTsKICAgICAgICBjdXJyZW50TGVuID0gMDsKICAgICAgICBjdXJyZW50ID0gMDsKICAgICAgfQogICAgICBzdGFydCA9IDI2OwogICAgfQoKICAgIHJldHVybiByZXM7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5jb252ZXJ0VG8gPSBmdW5jdGlvbiBjb252ZXJ0VG8gKG51bSkgewogICAgdmFyIHIgPSBudW0udW1vZCh0aGlzLm0pOwoKICAgIHJldHVybiByID09PSBudW0gPyByLmNsb25lKCkgOiByOwogIH07CgogIFJlZC5wcm90b3R5cGUuY29udmVydEZyb20gPSBmdW5jdGlvbiBjb252ZXJ0RnJvbSAobnVtKSB7CiAgICB2YXIgcmVzID0gbnVtLmNsb25lKCk7CiAgICByZXMucmVkID0gbnVsbDsKICAgIHJldHVybiByZXM7CiAgfTsKCiAgLy8KICAvLyBNb250Z29tZXJ5IG1ldGhvZCBlbmdpbmUKICAvLwoKICBCTi5tb250ID0gZnVuY3Rpb24gbW9udCAobnVtKSB7CiAgICByZXR1cm4gbmV3IE1vbnQobnVtKTsKICB9OwoKICBmdW5jdGlvbiBNb250IChtKSB7CiAgICBSZWQuY2FsbCh0aGlzLCBtKTsKCiAgICB0aGlzLnNoaWZ0ID0gdGhpcy5tLmJpdExlbmd0aCgpOwogICAgaWYgKHRoaXMuc2hpZnQgJSAyNiAhPT0gMCkgewogICAgICB0aGlzLnNoaWZ0ICs9IDI2IC0gKHRoaXMuc2hpZnQgJSAyNik7CiAgICB9CgogICAgdGhpcy5yID0gbmV3IEJOKDEpLml1c2hsbih0aGlzLnNoaWZ0KTsKICAgIHRoaXMucjIgPSB0aGlzLmltb2QodGhpcy5yLnNxcigpKTsKICAgIHRoaXMucmludiA9IHRoaXMuci5faW52bXAodGhpcy5tKTsKCiAgICB0aGlzLm1pbnYgPSB0aGlzLnJpbnYubXVsKHRoaXMucikuaXN1Ym4oMSkuZGl2KHRoaXMubSk7CiAgICB0aGlzLm1pbnYgPSB0aGlzLm1pbnYudW1vZCh0aGlzLnIpOwogICAgdGhpcy5taW52ID0gdGhpcy5yLnN1Yih0aGlzLm1pbnYpOwogIH0KICBpbmhlcml0cyhNb250LCBSZWQpOwoKICBNb250LnByb3RvdHlwZS5jb252ZXJ0VG8gPSBmdW5jdGlvbiBjb252ZXJ0VG8gKG51bSkgewogICAgcmV0dXJuIHRoaXMuaW1vZChudW0udXNobG4odGhpcy5zaGlmdCkpOwogIH07CgogIE1vbnQucHJvdG90eXBlLmNvbnZlcnRGcm9tID0gZnVuY3Rpb24gY29udmVydEZyb20gKG51bSkgewogICAgdmFyIHIgPSB0aGlzLmltb2QobnVtLm11bCh0aGlzLnJpbnYpKTsKICAgIHIucmVkID0gbnVsbDsKICAgIHJldHVybiByOwogIH07CgogIE1vbnQucHJvdG90eXBlLmltdWwgPSBmdW5jdGlvbiBpbXVsIChhLCBiKSB7CiAgICBpZiAoYS5pc1plcm8oKSB8fCBiLmlzWmVybygpKSB7CiAgICAgIGEud29yZHNbMF0gPSAwOwogICAgICBhLmxlbmd0aCA9IDE7CiAgICAgIHJldHVybiBhOwogICAgfQoKICAgIHZhciB0ID0gYS5pbXVsKGIpOwogICAgdmFyIGMgPSB0Lm1hc2tuKHRoaXMuc2hpZnQpLm11bCh0aGlzLm1pbnYpLmltYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5tKTsKICAgIHZhciB1ID0gdC5pc3ViKGMpLml1c2hybih0aGlzLnNoaWZ0KTsKICAgIHZhciByZXMgPSB1OwoKICAgIGlmICh1LmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgcmVzID0gdS5pc3ViKHRoaXMubSk7CiAgICB9IGVsc2UgaWYgKHUuY21wbigwKSA8IDApIHsKICAgICAgcmVzID0gdS5pYWRkKHRoaXMubSk7CiAgICB9CgogICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgfTsKCiAgTW9udC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsIChhLCBiKSB7CiAgICBpZiAoYS5pc1plcm8oKSB8fCBiLmlzWmVybygpKSByZXR1cm4gbmV3IEJOKDApLl9mb3JjZVJlZCh0aGlzKTsKCiAgICB2YXIgdCA9IGEubXVsKGIpOwogICAgdmFyIGMgPSB0Lm1hc2tuKHRoaXMuc2hpZnQpLm11bCh0aGlzLm1pbnYpLmltYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5tKTsKICAgIHZhciB1ID0gdC5pc3ViKGMpLml1c2hybih0aGlzLnNoaWZ0KTsKICAgIHZhciByZXMgPSB1OwogICAgaWYgKHUuY21wKHRoaXMubSkgPj0gMCkgewogICAgICByZXMgPSB1LmlzdWIodGhpcy5tKTsKICAgIH0gZWxzZSBpZiAodS5jbXBuKDApIDwgMCkgewogICAgICByZXMgPSB1LmlhZGQodGhpcy5tKTsKICAgIH0KCiAgICByZXR1cm4gcmVzLl9mb3JjZVJlZCh0aGlzKTsKICB9OwoKICBNb250LnByb3RvdHlwZS5pbnZtID0gZnVuY3Rpb24gaW52bSAoYSkgewogICAgLy8gKEFSKV4tMSAqIFJeMiA9IChBXi0xICogUl4tMSkgKiBSXjIgPSBBXi0xICogUgogICAgdmFyIHJlcyA9IHRoaXMuaW1vZChhLl9pbnZtcCh0aGlzLm0pLm11bCh0aGlzLnIyKSk7CiAgICByZXR1cm4gcmVzLl9mb3JjZVJlZCh0aGlzKTsKICB9Owp9KSh0eXBlb2YgbW9kdWxlID09PSAndW5kZWZpbmVkJyB8fCBtb2R1bGUsIHRoaXMpOwoKfSx7fV0sNDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgcjsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmFuZChsZW4pIHsKICBpZiAoIXIpCiAgICByID0gbmV3IFJhbmQobnVsbCk7CgogIHJldHVybiByLmdlbmVyYXRlKGxlbik7Cn07CgpmdW5jdGlvbiBSYW5kKHJhbmQpIHsKICB0aGlzLnJhbmQgPSByYW5kOwp9Cm1vZHVsZS5leHBvcnRzLlJhbmQgPSBSYW5kOwoKUmFuZC5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiBnZW5lcmF0ZShsZW4pIHsKICByZXR1cm4gdGhpcy5fcmFuZChsZW4pOwp9OwoKaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSB7CiAgaWYgKHdpbmRvdy5jcnlwdG8gJiYgd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMpIHsKICAgIC8vIE1vZGVybiBicm93c2VycwogICAgUmFuZC5wcm90b3R5cGUuX3JhbmQgPSBmdW5jdGlvbiBfcmFuZChuKSB7CiAgICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheShuKTsKICAgICAgd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYXJyKTsKICAgICAgcmV0dXJuIGFycjsKICAgIH07CiAgfSBlbHNlIGlmICh3aW5kb3cubXNDcnlwdG8gJiYgd2luZG93Lm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcykgewogICAgLy8gSUUKICAgIFJhbmQucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogICAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkobik7CiAgICAgIHdpbmRvdy5tc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMoYXJyKTsKICAgICAgcmV0dXJuIGFycjsKICAgIH07CiAgfSBlbHNlIHsKICAgIC8vIE9sZCBqdW5rCiAgICBSYW5kLnByb3RvdHlwZS5fcmFuZCA9IGZ1bmN0aW9uKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCB5ZXQnKTsKICAgIH07CiAgfQp9IGVsc2UgewogIC8vIE5vZGUuanMgb3IgV2ViIHdvcmtlcgogIHRyeSB7CiAgICB2YXIgY3J5cHRvID0gcmVxdWlyZSgnY3J5JyArICdwdG8nKTsKCiAgICBSYW5kLnByb3RvdHlwZS5fcmFuZCA9IGZ1bmN0aW9uIF9yYW5kKG4pIHsKICAgICAgcmV0dXJuIGNyeXB0by5yYW5kb21CeXRlcyhuKTsKICAgIH07CiAgfSBjYXRjaCAoZSkgewogICAgLy8gRW11bGF0ZSBjcnlwdG8gQVBJIHVzaW5nIHJhbmR5CiAgICBSYW5kLnByb3RvdHlwZS5fcmFuZCA9IGZ1bmN0aW9uIF9yYW5kKG4pIHsKICAgICAgdmFyIHJlcyA9IG5ldyBVaW50OEFycmF5KG4pOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkrKykKICAgICAgICByZXNbaV0gPSB0aGlzLnJhbmQuZ2V0Qnl0ZSgpOwogICAgICByZXR1cm4gcmVzOwogICAgfTsKICB9Cn0KCn0se31dLDQ0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKCn0se31dLDQ1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBiYXNlZCBvbiB0aGUgYWVzIGltcGxpbWVudGF0aW9uIGluIHRyaXBsZSBzZWMKLy8gaHR0cHM6Ly9naXRodWIuY29tL2tleWJhc2UvdHJpcGxlc2VjCgovLyB3aGljaCBpcyBpbiB0dXJuIGJhc2VkIG9uIHRoZSBvbmUgZnJvbSBjcnlwdG8tanMKLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvCgp2YXIgdWludF9tYXggPSBNYXRoLnBvdygyLCAzMikKZnVuY3Rpb24gZml4dXBfdWludDMyICh4KSB7CiAgdmFyIHJldCwgeF9wb3MKICByZXQgPSB4ID4gdWludF9tYXggfHwgeCA8IDAgPyAoeF9wb3MgPSBNYXRoLmFicyh4KSAlIHVpbnRfbWF4LCB4IDwgMCA/IHVpbnRfbWF4IC0geF9wb3MgOiB4X3BvcykgOiB4CiAgcmV0dXJuIHJldAp9CmZ1bmN0aW9uIHNjcnViX3ZlYyAodikgewogIGZvciAodmFyIGkgPSAwOyBpIDwgdi5sZW5ndGg7IHYrKykgewogICAgdltpXSA9IDAKICB9CiAgcmV0dXJuIGZhbHNlCn0KCmZ1bmN0aW9uIEdsb2JhbCAoKSB7CiAgdGhpcy5TQk9YID0gW10KICB0aGlzLklOVl9TQk9YID0gW10KICB0aGlzLlNVQl9NSVggPSBbW10sIFtdLCBbXSwgW11dCiAgdGhpcy5JTlZfU1VCX01JWCA9IFtbXSwgW10sIFtdLCBbXV0KICB0aGlzLmluaXQoKQogIHRoaXMuUkNPTiA9IFsweDAwLCAweDAxLCAweDAyLCAweDA0LCAweDA4LCAweDEwLCAweDIwLCAweDQwLCAweDgwLCAweDFiLCAweDM2XQp9CgpHbG9iYWwucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGQsIGksIHN4LCB0LCB4LCB4MiwgeDQsIHg4LCB4aSwgX2kKICBkID0gKGZ1bmN0aW9uICgpIHsKICAgIHZhciBfaSwgX3Jlc3VsdHMKICAgIF9yZXN1bHRzID0gW10KICAgIGZvciAoaSA9IF9pID0gMDsgX2kgPCAyNTY7IGkgPSArK19pKSB7CiAgICAgIGlmIChpIDwgMTI4KSB7CiAgICAgICAgX3Jlc3VsdHMucHVzaChpIDw8IDEpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3Jlc3VsdHMucHVzaCgoaSA8PCAxKSBeIDB4MTFiKQogICAgICB9CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHMKICB9KSgpCiAgeCA9IDAKICB4aSA9IDAKICBmb3IgKGkgPSBfaSA9IDA7IF9pIDwgMjU2OyBpID0gKytfaSkgewogICAgc3ggPSB4aSBeICh4aSA8PCAxKSBeICh4aSA8PCAyKSBeICh4aSA8PCAzKSBeICh4aSA8PCA0KQogICAgc3ggPSAoc3ggPj4+IDgpIF4gKHN4ICYgMHhmZikgXiAweDYzCiAgICB0aGlzLlNCT1hbeF0gPSBzeAogICAgdGhpcy5JTlZfU0JPWFtzeF0gPSB4CiAgICB4MiA9IGRbeF0KICAgIHg0ID0gZFt4Ml0KICAgIHg4ID0gZFt4NF0KICAgIHQgPSAoZFtzeF0gKiAweDEwMSkgXiAoc3ggKiAweDEwMTAxMDApCiAgICB0aGlzLlNVQl9NSVhbMF1beF0gPSAodCA8PCAyNCkgfCAodCA+Pj4gOCkKICAgIHRoaXMuU1VCX01JWFsxXVt4XSA9ICh0IDw8IDE2KSB8ICh0ID4+PiAxNikKICAgIHRoaXMuU1VCX01JWFsyXVt4XSA9ICh0IDw8IDgpIHwgKHQgPj4+IDI0KQogICAgdGhpcy5TVUJfTUlYWzNdW3hdID0gdAogICAgdCA9ICh4OCAqIDB4MTAxMDEwMSkgXiAoeDQgKiAweDEwMDAxKSBeICh4MiAqIDB4MTAxKSBeICh4ICogMHgxMDEwMTAwKQogICAgdGhpcy5JTlZfU1VCX01JWFswXVtzeF0gPSAodCA8PCAyNCkgfCAodCA+Pj4gOCkKICAgIHRoaXMuSU5WX1NVQl9NSVhbMV1bc3hdID0gKHQgPDwgMTYpIHwgKHQgPj4+IDE2KQogICAgdGhpcy5JTlZfU1VCX01JWFsyXVtzeF0gPSAodCA8PCA4KSB8ICh0ID4+PiAyNCkKICAgIHRoaXMuSU5WX1NVQl9NSVhbM11bc3hdID0gdAogICAgaWYgKHggPT09IDApIHsKICAgICAgeCA9IHhpID0gMQogICAgfSBlbHNlIHsKICAgICAgeCA9IHgyIF4gZFtkW2RbeDggXiB4Ml1dXQogICAgICB4aSBePSBkW2RbeGldXQogICAgfQogIH0KICByZXR1cm4gdHJ1ZQp9Cgp2YXIgRyA9IG5ldyBHbG9iYWwoKQoKQUVTLmJsb2NrU2l6ZSA9IDQgKiA0CgpBRVMucHJvdG90eXBlLmJsb2NrU2l6ZSA9IEFFUy5ibG9ja1NpemUKCkFFUy5rZXlTaXplID0gMjU2IC8gOAoKQUVTLnByb3RvdHlwZS5rZXlTaXplID0gQUVTLmtleVNpemUKCmZ1bmN0aW9uIGJ1ZmZlclRvQXJyYXkgKGJ1ZikgewogIHZhciBsZW4gPSBidWYubGVuZ3RoIC8gNAogIHZhciBvdXQgPSBuZXcgQXJyYXkobGVuKQogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBvdXRbaV0gPSBidWYucmVhZFVJbnQzMkJFKGkgKiA0KQogIH0KICByZXR1cm4gb3V0Cn0KZnVuY3Rpb24gQUVTIChrZXkpIHsKICB0aGlzLl9rZXkgPSBidWZmZXJUb0FycmF5KGtleSkKICB0aGlzLl9kb1Jlc2V0KCkKfQoKQUVTLnByb3RvdHlwZS5fZG9SZXNldCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgaW52S3NSb3csIGtleVNpemUsIGtleVdvcmRzLCBrc1Jvdywga3NSb3dzLCB0CiAga2V5V29yZHMgPSB0aGlzLl9rZXkKICBrZXlTaXplID0ga2V5V29yZHMubGVuZ3RoCiAgdGhpcy5fblJvdW5kcyA9IGtleVNpemUgKyA2CiAga3NSb3dzID0gKHRoaXMuX25Sb3VuZHMgKyAxKSAqIDQKICB0aGlzLl9rZXlTY2hlZHVsZSA9IFtdCiAgZm9yIChrc1JvdyA9IDA7IGtzUm93IDwga3NSb3dzOyBrc1JvdysrKSB7CiAgICB0aGlzLl9rZXlTY2hlZHVsZVtrc1Jvd10gPSBrc1JvdyA8IGtleVNpemUgPyBrZXlXb3Jkc1trc1Jvd10gOiAodCA9IHRoaXMuX2tleVNjaGVkdWxlW2tzUm93IC0gMV0sIChrc1JvdyAlIGtleVNpemUpID09PSAwID8gKHQgPSAodCA8PCA4KSB8ICh0ID4+PiAyNCksIHQgPSAoRy5TQk9YW3QgPj4+IDI0XSA8PCAyNCkgfCAoRy5TQk9YWyh0ID4+PiAxNikgJiAweGZmXSA8PCAxNikgfCAoRy5TQk9YWyh0ID4+PiA4KSAmIDB4ZmZdIDw8IDgpIHwgRy5TQk9YW3QgJiAweGZmXSwgdCBePSBHLlJDT05bKGtzUm93IC8ga2V5U2l6ZSkgfCAwXSA8PCAyNCkgOiBrZXlTaXplID4gNiAmJiBrc1JvdyAlIGtleVNpemUgPT09IDQgPyB0ID0gKEcuU0JPWFt0ID4+PiAyNF0gPDwgMjQpIHwgKEcuU0JPWFsodCA+Pj4gMTYpICYgMHhmZl0gPDwgMTYpIHwgKEcuU0JPWFsodCA+Pj4gOCkgJiAweGZmXSA8PCA4KSB8IEcuU0JPWFt0ICYgMHhmZl0gOiB2b2lkIDAsIHRoaXMuX2tleVNjaGVkdWxlW2tzUm93IC0ga2V5U2l6ZV0gXiB0KQogIH0KICB0aGlzLl9pbnZLZXlTY2hlZHVsZSA9IFtdCiAgZm9yIChpbnZLc1JvdyA9IDA7IGludktzUm93IDwga3NSb3dzOyBpbnZLc1JvdysrKSB7CiAgICBrc1JvdyA9IGtzUm93cyAtIGludktzUm93CiAgICB0ID0gdGhpcy5fa2V5U2NoZWR1bGVba3NSb3cgLSAoaW52S3NSb3cgJSA0ID8gMCA6IDQpXQogICAgdGhpcy5faW52S2V5U2NoZWR1bGVbaW52S3NSb3ddID0gaW52S3NSb3cgPCA0IHx8IGtzUm93IDw9IDQgPyB0IDogRy5JTlZfU1VCX01JWFswXVtHLlNCT1hbdCA+Pj4gMjRdXSBeIEcuSU5WX1NVQl9NSVhbMV1bRy5TQk9YWyh0ID4+PiAxNikgJiAweGZmXV0gXiBHLklOVl9TVUJfTUlYWzJdW0cuU0JPWFsodCA+Pj4gOCkgJiAweGZmXV0gXiBHLklOVl9TVUJfTUlYWzNdW0cuU0JPWFt0ICYgMHhmZl1dCiAgfQogIHJldHVybiB0cnVlCn0KCkFFUy5wcm90b3R5cGUuZW5jcnlwdEJsb2NrID0gZnVuY3Rpb24gKE0pIHsKICBNID0gYnVmZmVyVG9BcnJheShuZXcgQnVmZmVyKE0pKQogIHZhciBvdXQgPSB0aGlzLl9kb0NyeXB0QmxvY2soTSwgdGhpcy5fa2V5U2NoZWR1bGUsIEcuU1VCX01JWCwgRy5TQk9YKQogIHZhciBidWYgPSBuZXcgQnVmZmVyKDE2KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFswXSwgMCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbMV0sIDQpCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzJdLCA4KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFszXSwgMTIpCiAgcmV0dXJuIGJ1Zgp9CgpBRVMucHJvdG90eXBlLmRlY3J5cHRCbG9jayA9IGZ1bmN0aW9uIChNKSB7CiAgTSA9IGJ1ZmZlclRvQXJyYXkobmV3IEJ1ZmZlcihNKSkKICB2YXIgdGVtcCA9IFtNWzNdLCBNWzFdXQogIE1bMV0gPSB0ZW1wWzBdCiAgTVszXSA9IHRlbXBbMV0KICB2YXIgb3V0ID0gdGhpcy5fZG9DcnlwdEJsb2NrKE0sIHRoaXMuX2ludktleVNjaGVkdWxlLCBHLklOVl9TVUJfTUlYLCBHLklOVl9TQk9YKQogIHZhciBidWYgPSBuZXcgQnVmZmVyKDE2KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFswXSwgMCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbM10sIDQpCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzJdLCA4KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFsxXSwgMTIpCiAgcmV0dXJuIGJ1Zgp9CgpBRVMucHJvdG90eXBlLnNjcnViID0gZnVuY3Rpb24gKCkgewogIHNjcnViX3ZlYyh0aGlzLl9rZXlTY2hlZHVsZSkKICBzY3J1Yl92ZWModGhpcy5faW52S2V5U2NoZWR1bGUpCiAgc2NydWJfdmVjKHRoaXMuX2tleSkKfQoKQUVTLnByb3RvdHlwZS5fZG9DcnlwdEJsb2NrID0gZnVuY3Rpb24gKE0sIGtleVNjaGVkdWxlLCBTVUJfTUlYLCBTQk9YKSB7CiAgdmFyIGtzUm93LCBzMCwgczEsIHMyLCBzMywgdDAsIHQxLCB0MiwgdDMKCiAgczAgPSBNWzBdIF4ga2V5U2NoZWR1bGVbMF0KICBzMSA9IE1bMV0gXiBrZXlTY2hlZHVsZVsxXQogIHMyID0gTVsyXSBeIGtleVNjaGVkdWxlWzJdCiAgczMgPSBNWzNdIF4ga2V5U2NoZWR1bGVbM10KICBrc1JvdyA9IDQKICBmb3IgKHZhciByb3VuZCA9IDE7IHJvdW5kIDwgdGhpcy5fblJvdW5kczsgcm91bmQrKykgewogICAgdDAgPSBTVUJfTUlYWzBdW3MwID4+PiAyNF0gXiBTVUJfTUlYWzFdWyhzMSA+Pj4gMTYpICYgMHhmZl0gXiBTVUJfTUlYWzJdWyhzMiA+Pj4gOCkgJiAweGZmXSBeIFNVQl9NSVhbM11bczMgJiAweGZmXSBeIGtleVNjaGVkdWxlW2tzUm93KytdCiAgICB0MSA9IFNVQl9NSVhbMF1bczEgPj4+IDI0XSBeIFNVQl9NSVhbMV1bKHMyID4+PiAxNikgJiAweGZmXSBeIFNVQl9NSVhbMl1bKHMzID4+PiA4KSAmIDB4ZmZdIF4gU1VCX01JWFszXVtzMCAmIDB4ZmZdIF4ga2V5U2NoZWR1bGVba3NSb3crK10KICAgIHQyID0gU1VCX01JWFswXVtzMiA+Pj4gMjRdIF4gU1VCX01JWFsxXVsoczMgPj4+IDE2KSAmIDB4ZmZdIF4gU1VCX01JWFsyXVsoczAgPj4+IDgpICYgMHhmZl0gXiBTVUJfTUlYWzNdW3MxICYgMHhmZl0gXiBrZXlTY2hlZHVsZVtrc1JvdysrXQogICAgdDMgPSBTVUJfTUlYWzBdW3MzID4+PiAyNF0gXiBTVUJfTUlYWzFdWyhzMCA+Pj4gMTYpICYgMHhmZl0gXiBTVUJfTUlYWzJdWyhzMSA+Pj4gOCkgJiAweGZmXSBeIFNVQl9NSVhbM11bczIgJiAweGZmXSBeIGtleVNjaGVkdWxlW2tzUm93KytdCiAgICBzMCA9IHQwCiAgICBzMSA9IHQxCiAgICBzMiA9IHQyCiAgICBzMyA9IHQzCiAgfQogIHQwID0gKChTQk9YW3MwID4+PiAyNF0gPDwgMjQpIHwgKFNCT1hbKHMxID4+PiAxNikgJiAweGZmXSA8PCAxNikgfCAoU0JPWFsoczIgPj4+IDgpICYgMHhmZl0gPDwgOCkgfCBTQk9YW3MzICYgMHhmZl0pIF4ga2V5U2NoZWR1bGVba3NSb3crK10KICB0MSA9ICgoU0JPWFtzMSA+Pj4gMjRdIDw8IDI0KSB8IChTQk9YWyhzMiA+Pj4gMTYpICYgMHhmZl0gPDwgMTYpIHwgKFNCT1hbKHMzID4+PiA4KSAmIDB4ZmZdIDw8IDgpIHwgU0JPWFtzMCAmIDB4ZmZdKSBeIGtleVNjaGVkdWxlW2tzUm93KytdCiAgdDIgPSAoKFNCT1hbczIgPj4+IDI0XSA8PCAyNCkgfCAoU0JPWFsoczMgPj4+IDE2KSAmIDB4ZmZdIDw8IDE2KSB8IChTQk9YWyhzMCA+Pj4gOCkgJiAweGZmXSA8PCA4KSB8IFNCT1hbczEgJiAweGZmXSkgXiBrZXlTY2hlZHVsZVtrc1JvdysrXQogIHQzID0gKChTQk9YW3MzID4+PiAyNF0gPDwgMjQpIHwgKFNCT1hbKHMwID4+PiAxNikgJiAweGZmXSA8PCAxNikgfCAoU0JPWFsoczEgPj4+IDgpICYgMHhmZl0gPDwgOCkgfCBTQk9YW3MyICYgMHhmZl0pIF4ga2V5U2NoZWR1bGVba3NSb3crK10KICByZXR1cm4gWwogICAgZml4dXBfdWludDMyKHQwKSwKICAgIGZpeHVwX3VpbnQzMih0MSksCiAgICBmaXh1cF91aW50MzIodDIpLAogICAgZml4dXBfdWludDMyKHQzKQogIF0KfQoKZXhwb3J0cy5BRVMgPSBBRVMKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjc2fV0sNDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBhZXMgPSByZXF1aXJlKCcuL2FlcycpCnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdjaXBoZXItYmFzZScpCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEdIQVNIID0gcmVxdWlyZSgnLi9naGFzaCcpCnZhciB4b3IgPSByZXF1aXJlKCdidWZmZXIteG9yJykKaW5oZXJpdHMoU3RyZWFtQ2lwaGVyLCBUcmFuc2Zvcm0pCm1vZHVsZS5leHBvcnRzID0gU3RyZWFtQ2lwaGVyCgpmdW5jdGlvbiBTdHJlYW1DaXBoZXIgKG1vZGUsIGtleSwgaXYsIGRlY3J5cHQpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU3RyZWFtQ2lwaGVyKSkgewogICAgcmV0dXJuIG5ldyBTdHJlYW1DaXBoZXIobW9kZSwga2V5LCBpdikKICB9CiAgVHJhbnNmb3JtLmNhbGwodGhpcykKICB0aGlzLl9maW5JRCA9IEJ1ZmZlci5jb25jYXQoW2l2LCBuZXcgQnVmZmVyKFswLCAwLCAwLCAxXSldKQogIGl2ID0gQnVmZmVyLmNvbmNhdChbaXYsIG5ldyBCdWZmZXIoWzAsIDAsIDAsIDJdKV0pCiAgdGhpcy5fY2lwaGVyID0gbmV3IGFlcy5BRVMoa2V5KQogIHRoaXMuX3ByZXYgPSBuZXcgQnVmZmVyKGl2Lmxlbmd0aCkKICB0aGlzLl9jYWNoZSA9IG5ldyBCdWZmZXIoJycpCiAgdGhpcy5fc2VjQ2FjaGUgPSBuZXcgQnVmZmVyKCcnKQogIHRoaXMuX2RlY3J5cHQgPSBkZWNyeXB0CiAgdGhpcy5fYWxlbiA9IDAKICB0aGlzLl9sZW4gPSAwCiAgaXYuY29weSh0aGlzLl9wcmV2KQogIHRoaXMuX21vZGUgPSBtb2RlCiAgdmFyIGggPSBuZXcgQnVmZmVyKDQpCiAgaC5maWxsKDApCiAgdGhpcy5fZ2hhc2ggPSBuZXcgR0hBU0godGhpcy5fY2lwaGVyLmVuY3J5cHRCbG9jayhoKSkKICB0aGlzLl9hdXRoVGFnID0gbnVsbAogIHRoaXMuX2NhbGxlZCA9IGZhbHNlCn0KU3RyZWFtQ2lwaGVyLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgaWYgKCF0aGlzLl9jYWxsZWQgJiYgdGhpcy5fYWxlbikgewogICAgdmFyIHJ1bXAgPSAxNiAtICh0aGlzLl9hbGVuICUgMTYpCiAgICBpZiAocnVtcCA8IDE2KSB7CiAgICAgIHJ1bXAgPSBuZXcgQnVmZmVyKHJ1bXApCiAgICAgIHJ1bXAuZmlsbCgwKQogICAgICB0aGlzLl9naGFzaC51cGRhdGUocnVtcCkKICAgIH0KICB9CiAgdGhpcy5fY2FsbGVkID0gdHJ1ZQogIHZhciBvdXQgPSB0aGlzLl9tb2RlLmVuY3J5cHQodGhpcywgY2h1bmspCiAgaWYgKHRoaXMuX2RlY3J5cHQpIHsKICAgIHRoaXMuX2doYXNoLnVwZGF0ZShjaHVuaykKICB9IGVsc2UgewogICAgdGhpcy5fZ2hhc2gudXBkYXRlKG91dCkKICB9CiAgdGhpcy5fbGVuICs9IGNodW5rLmxlbmd0aAogIHJldHVybiBvdXQKfQpTdHJlYW1DaXBoZXIucHJvdG90eXBlLl9maW5hbCA9IGZ1bmN0aW9uICgpIHsKICBpZiAodGhpcy5fZGVjcnlwdCAmJiAhdGhpcy5fYXV0aFRhZykgewogICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBzdGF0ZSBvciB1bmFibGUgdG8gYXV0aGVudGljYXRlIGRhdGEnKQogIH0KICB2YXIgdGFnID0geG9yKHRoaXMuX2doYXNoLmZpbmFsKHRoaXMuX2FsZW4gKiA4LCB0aGlzLl9sZW4gKiA4KSwgdGhpcy5fY2lwaGVyLmVuY3J5cHRCbG9jayh0aGlzLl9maW5JRCkpCiAgaWYgKHRoaXMuX2RlY3J5cHQpIHsKICAgIGlmICh4b3JUZXN0KHRhZywgdGhpcy5fYXV0aFRhZykpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBzdGF0ZSBvciB1bmFibGUgdG8gYXV0aGVudGljYXRlIGRhdGEnKQogICAgfQogIH0gZWxzZSB7CiAgICB0aGlzLl9hdXRoVGFnID0gdGFnCiAgfQogIHRoaXMuX2NpcGhlci5zY3J1YigpCn0KU3RyZWFtQ2lwaGVyLnByb3RvdHlwZS5nZXRBdXRoVGFnID0gZnVuY3Rpb24gZ2V0QXV0aFRhZyAoKSB7CiAgaWYgKCF0aGlzLl9kZWNyeXB0ICYmIEJ1ZmZlci5pc0J1ZmZlcih0aGlzLl9hdXRoVGFnKSkgewogICAgcmV0dXJuIHRoaXMuX2F1dGhUYWcKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IEVycm9yKCdBdHRlbXB0aW5nIHRvIGdldCBhdXRoIHRhZyBpbiB1bnN1cHBvcnRlZCBzdGF0ZScpCiAgfQp9ClN0cmVhbUNpcGhlci5wcm90b3R5cGUuc2V0QXV0aFRhZyA9IGZ1bmN0aW9uIHNldEF1dGhUYWcgKHRhZykgewogIGlmICh0aGlzLl9kZWNyeXB0KSB7CiAgICB0aGlzLl9hdXRoVGFnID0gdGFnCiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBFcnJvcignQXR0ZW1wdGluZyB0byBzZXQgYXV0aCB0YWcgaW4gdW5zdXBwb3J0ZWQgc3RhdGUnKQogIH0KfQpTdHJlYW1DaXBoZXIucHJvdG90eXBlLnNldEFBRCA9IGZ1bmN0aW9uIHNldEFBRCAoYnVmKSB7CiAgaWYgKCF0aGlzLl9jYWxsZWQpIHsKICAgIHRoaXMuX2doYXNoLnVwZGF0ZShidWYpCiAgICB0aGlzLl9hbGVuICs9IGJ1Zi5sZW5ndGgKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IEVycm9yKCdBdHRlbXB0aW5nIHRvIHNldCBBQUQgaW4gdW5zdXBwb3J0ZWQgc3RhdGUnKQogIH0KfQpmdW5jdGlvbiB4b3JUZXN0IChhLCBiKSB7CiAgdmFyIG91dCA9IDAKICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7CiAgICBvdXQrKwogIH0KICB2YXIgbGVuID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKQogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBvdXQgKz0gKGFbaV0gXiBiW2ldKQogIH0KICByZXR1cm4gb3V0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2FlcyI6NDUsIi4vZ2hhc2giOjUwLCJidWZmZXIiOjc2LCJidWZmZXIteG9yIjo3NSwiY2lwaGVyLWJhc2UiOjc4LCJpbmhlcml0cyI6MTI5fV0sNDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgY2lwaGVycyA9IHJlcXVpcmUoJy4vZW5jcnlwdGVyJykKZXhwb3J0cy5jcmVhdGVDaXBoZXIgPSBleHBvcnRzLkNpcGhlciA9IGNpcGhlcnMuY3JlYXRlQ2lwaGVyCmV4cG9ydHMuY3JlYXRlQ2lwaGVyaXYgPSBleHBvcnRzLkNpcGhlcml2ID0gY2lwaGVycy5jcmVhdGVDaXBoZXJpdgp2YXIgZGVjaXBoZXJzID0gcmVxdWlyZSgnLi9kZWNyeXB0ZXInKQpleHBvcnRzLmNyZWF0ZURlY2lwaGVyID0gZXhwb3J0cy5EZWNpcGhlciA9IGRlY2lwaGVycy5jcmVhdGVEZWNpcGhlcgpleHBvcnRzLmNyZWF0ZURlY2lwaGVyaXYgPSBleHBvcnRzLkRlY2lwaGVyaXYgPSBkZWNpcGhlcnMuY3JlYXRlRGVjaXBoZXJpdgp2YXIgbW9kZXMgPSByZXF1aXJlKCcuL21vZGVzJykKZnVuY3Rpb24gZ2V0Q2lwaGVycyAoKSB7CiAgcmV0dXJuIE9iamVjdC5rZXlzKG1vZGVzKQp9CmV4cG9ydHMubGlzdENpcGhlcnMgPSBleHBvcnRzLmdldENpcGhlcnMgPSBnZXRDaXBoZXJzCgp9LHsiLi9kZWNyeXB0ZXIiOjQ4LCIuL2VuY3J5cHRlciI6NDksIi4vbW9kZXMiOjUxfV0sNDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBhZXMgPSByZXF1aXJlKCcuL2FlcycpCnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdjaXBoZXItYmFzZScpCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIG1vZGVzID0gcmVxdWlyZSgnLi9tb2RlcycpCnZhciBTdHJlYW1DaXBoZXIgPSByZXF1aXJlKCcuL3N0cmVhbUNpcGhlcicpCnZhciBBdXRoQ2lwaGVyID0gcmVxdWlyZSgnLi9hdXRoQ2lwaGVyJykKdmFyIGVidGsgPSByZXF1aXJlKCdldnBfYnl0ZXN0b2tleScpCgppbmhlcml0cyhEZWNpcGhlciwgVHJhbnNmb3JtKQpmdW5jdGlvbiBEZWNpcGhlciAobW9kZSwga2V5LCBpdikgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEZWNpcGhlcikpIHsKICAgIHJldHVybiBuZXcgRGVjaXBoZXIobW9kZSwga2V5LCBpdikKICB9CiAgVHJhbnNmb3JtLmNhbGwodGhpcykKICB0aGlzLl9jYWNoZSA9IG5ldyBTcGxpdHRlcigpCiAgdGhpcy5fbGFzdCA9IHZvaWQgMAogIHRoaXMuX2NpcGhlciA9IG5ldyBhZXMuQUVTKGtleSkKICB0aGlzLl9wcmV2ID0gbmV3IEJ1ZmZlcihpdi5sZW5ndGgpCiAgaXYuY29weSh0aGlzLl9wcmV2KQogIHRoaXMuX21vZGUgPSBtb2RlCiAgdGhpcy5fYXV0b3BhZGRpbmcgPSB0cnVlCn0KRGVjaXBoZXIucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkgewogIHRoaXMuX2NhY2hlLmFkZChkYXRhKQogIHZhciBjaHVuawogIHZhciB0aGluZwogIHZhciBvdXQgPSBbXQogIHdoaWxlICgoY2h1bmsgPSB0aGlzLl9jYWNoZS5nZXQodGhpcy5fYXV0b3BhZGRpbmcpKSkgewogICAgdGhpbmcgPSB0aGlzLl9tb2RlLmRlY3J5cHQodGhpcywgY2h1bmspCiAgICBvdXQucHVzaCh0aGluZykKICB9CiAgcmV0dXJuIEJ1ZmZlci5jb25jYXQob3V0KQp9CkRlY2lwaGVyLnByb3RvdHlwZS5fZmluYWwgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGNodW5rID0gdGhpcy5fY2FjaGUuZmx1c2goKQogIGlmICh0aGlzLl9hdXRvcGFkZGluZykgewogICAgcmV0dXJuIHVucGFkKHRoaXMuX21vZGUuZGVjcnlwdCh0aGlzLCBjaHVuaykpCiAgfSBlbHNlIGlmIChjaHVuaykgewogICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIG5vdCBtdWx0aXBsZSBvZiBibG9jayBsZW5ndGgnKQogIH0KfQpEZWNpcGhlci5wcm90b3R5cGUuc2V0QXV0b1BhZGRpbmcgPSBmdW5jdGlvbiAoc2V0VG8pIHsKICB0aGlzLl9hdXRvcGFkZGluZyA9ICEhc2V0VG8KICByZXR1cm4gdGhpcwp9CmZ1bmN0aW9uIFNwbGl0dGVyICgpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU3BsaXR0ZXIpKSB7CiAgICByZXR1cm4gbmV3IFNwbGl0dGVyKCkKICB9CiAgdGhpcy5jYWNoZSA9IG5ldyBCdWZmZXIoJycpCn0KU3BsaXR0ZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgdGhpcy5jYWNoZSA9IEJ1ZmZlci5jb25jYXQoW3RoaXMuY2FjaGUsIGRhdGFdKQp9CgpTcGxpdHRlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGF1dG9QYWRkaW5nKSB7CiAgdmFyIG91dAogIGlmIChhdXRvUGFkZGluZykgewogICAgaWYgKHRoaXMuY2FjaGUubGVuZ3RoID4gMTYpIHsKICAgICAgb3V0ID0gdGhpcy5jYWNoZS5zbGljZSgwLCAxNikKICAgICAgdGhpcy5jYWNoZSA9IHRoaXMuY2FjaGUuc2xpY2UoMTYpCiAgICAgIHJldHVybiBvdXQKICAgIH0KICB9IGVsc2UgewogICAgaWYgKHRoaXMuY2FjaGUubGVuZ3RoID49IDE2KSB7CiAgICAgIG91dCA9IHRoaXMuY2FjaGUuc2xpY2UoMCwgMTYpCiAgICAgIHRoaXMuY2FjaGUgPSB0aGlzLmNhY2hlLnNsaWNlKDE2KQogICAgICByZXR1cm4gb3V0CiAgICB9CiAgfQogIHJldHVybiBudWxsCn0KU3BsaXR0ZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkgewogIGlmICh0aGlzLmNhY2hlLmxlbmd0aCkgewogICAgcmV0dXJuIHRoaXMuY2FjaGUKICB9Cn0KZnVuY3Rpb24gdW5wYWQgKGxhc3QpIHsKICB2YXIgcGFkZGVkID0gbGFzdFsxNV0KICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IHBhZGRlZCkgewogICAgaWYgKGxhc3RbKGkgKyAoMTYgLSBwYWRkZWQpKV0gIT09IHBhZGRlZCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuYWJsZSB0byBkZWNyeXB0IGRhdGEnKQogICAgfQogIH0KICBpZiAocGFkZGVkID09PSAxNikgewogICAgcmV0dXJuCiAgfQogIHJldHVybiBsYXN0LnNsaWNlKDAsIDE2IC0gcGFkZGVkKQp9Cgp2YXIgbW9kZWxpc3QgPSB7CiAgRUNCOiByZXF1aXJlKCcuL21vZGVzL2VjYicpLAogIENCQzogcmVxdWlyZSgnLi9tb2Rlcy9jYmMnKSwKICBDRkI6IHJlcXVpcmUoJy4vbW9kZXMvY2ZiJyksCiAgQ0ZCODogcmVxdWlyZSgnLi9tb2Rlcy9jZmI4JyksCiAgQ0ZCMTogcmVxdWlyZSgnLi9tb2Rlcy9jZmIxJyksCiAgT0ZCOiByZXF1aXJlKCcuL21vZGVzL29mYicpLAogIENUUjogcmVxdWlyZSgnLi9tb2Rlcy9jdHInKSwKICBHQ006IHJlcXVpcmUoJy4vbW9kZXMvY3RyJykKfQoKZnVuY3Rpb24gY3JlYXRlRGVjaXBoZXJpdiAoc3VpdGUsIHBhc3N3b3JkLCBpdikgewogIHZhciBjb25maWcgPSBtb2Rlc1tzdWl0ZS50b0xvd2VyQ2FzZSgpXQogIGlmICghY29uZmlnKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHN1aXRlIHR5cGUnKQogIH0KICBpZiAodHlwZW9mIGl2ID09PSAnc3RyaW5nJykgewogICAgaXYgPSBuZXcgQnVmZmVyKGl2KQogIH0KICBpZiAodHlwZW9mIHBhc3N3b3JkID09PSAnc3RyaW5nJykgewogICAgcGFzc3dvcmQgPSBuZXcgQnVmZmVyKHBhc3N3b3JkKQogIH0KICBpZiAocGFzc3dvcmQubGVuZ3RoICE9PSBjb25maWcua2V5IC8gOCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBrZXkgbGVuZ3RoICcgKyBwYXNzd29yZC5sZW5ndGgpCiAgfQogIGlmIChpdi5sZW5ndGggIT09IGNvbmZpZy5pdikgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBpdiBsZW5ndGggJyArIGl2Lmxlbmd0aCkKICB9CiAgaWYgKGNvbmZpZy50eXBlID09PSAnc3RyZWFtJykgewogICAgcmV0dXJuIG5ldyBTdHJlYW1DaXBoZXIobW9kZWxpc3RbY29uZmlnLm1vZGVdLCBwYXNzd29yZCwgaXYsIHRydWUpCiAgfSBlbHNlIGlmIChjb25maWcudHlwZSA9PT0gJ2F1dGgnKSB7CiAgICByZXR1cm4gbmV3IEF1dGhDaXBoZXIobW9kZWxpc3RbY29uZmlnLm1vZGVdLCBwYXNzd29yZCwgaXYsIHRydWUpCiAgfQogIHJldHVybiBuZXcgRGVjaXBoZXIobW9kZWxpc3RbY29uZmlnLm1vZGVdLCBwYXNzd29yZCwgaXYpCn0KCmZ1bmN0aW9uIGNyZWF0ZURlY2lwaGVyIChzdWl0ZSwgcGFzc3dvcmQpIHsKICB2YXIgY29uZmlnID0gbW9kZXNbc3VpdGUudG9Mb3dlckNhc2UoKV0KICBpZiAoIWNvbmZpZykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9CiAgdmFyIGtleXMgPSBlYnRrKHBhc3N3b3JkLCBmYWxzZSwgY29uZmlnLmtleSwgY29uZmlnLml2KQogIHJldHVybiBjcmVhdGVEZWNpcGhlcml2KHN1aXRlLCBrZXlzLmtleSwga2V5cy5pdikKfQpleHBvcnRzLmNyZWF0ZURlY2lwaGVyID0gY3JlYXRlRGVjaXBoZXIKZXhwb3J0cy5jcmVhdGVEZWNpcGhlcml2ID0gY3JlYXRlRGVjaXBoZXJpdgoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYWVzIjo0NSwiLi9hdXRoQ2lwaGVyIjo0NiwiLi9tb2RlcyI6NTEsIi4vbW9kZXMvY2JjIjo1MiwiLi9tb2Rlcy9jZmIiOjUzLCIuL21vZGVzL2NmYjEiOjU0LCIuL21vZGVzL2NmYjgiOjU1LCIuL21vZGVzL2N0ciI6NTYsIi4vbW9kZXMvZWNiIjo1NywiLi9tb2Rlcy9vZmIiOjU4LCIuL3N0cmVhbUNpcGhlciI6NTksImJ1ZmZlciI6NzYsImNpcGhlci1iYXNlIjo3OCwiZXZwX2J5dGVzdG9rZXkiOjExOSwiaW5oZXJpdHMiOjEyOX1dLDQ5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYWVzID0gcmVxdWlyZSgnLi9hZXMnKQp2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnY2lwaGVyLWJhc2UnKQp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBtb2RlcyA9IHJlcXVpcmUoJy4vbW9kZXMnKQp2YXIgZWJ0ayA9IHJlcXVpcmUoJ2V2cF9ieXRlc3Rva2V5JykKdmFyIFN0cmVhbUNpcGhlciA9IHJlcXVpcmUoJy4vc3RyZWFtQ2lwaGVyJykKdmFyIEF1dGhDaXBoZXIgPSByZXF1aXJlKCcuL2F1dGhDaXBoZXInKQppbmhlcml0cyhDaXBoZXIsIFRyYW5zZm9ybSkKZnVuY3Rpb24gQ2lwaGVyIChtb2RlLCBrZXksIGl2KSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIENpcGhlcikpIHsKICAgIHJldHVybiBuZXcgQ2lwaGVyKG1vZGUsIGtleSwgaXYpCiAgfQogIFRyYW5zZm9ybS5jYWxsKHRoaXMpCiAgdGhpcy5fY2FjaGUgPSBuZXcgU3BsaXR0ZXIoKQogIHRoaXMuX2NpcGhlciA9IG5ldyBhZXMuQUVTKGtleSkKICB0aGlzLl9wcmV2ID0gbmV3IEJ1ZmZlcihpdi5sZW5ndGgpCiAgaXYuY29weSh0aGlzLl9wcmV2KQogIHRoaXMuX21vZGUgPSBtb2RlCiAgdGhpcy5fYXV0b3BhZGRpbmcgPSB0cnVlCn0KQ2lwaGVyLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHsKICB0aGlzLl9jYWNoZS5hZGQoZGF0YSkKICB2YXIgY2h1bmsKICB2YXIgdGhpbmcKICB2YXIgb3V0ID0gW10KICB3aGlsZSAoKGNodW5rID0gdGhpcy5fY2FjaGUuZ2V0KCkpKSB7CiAgICB0aGluZyA9IHRoaXMuX21vZGUuZW5jcnlwdCh0aGlzLCBjaHVuaykKICAgIG91dC5wdXNoKHRoaW5nKQogIH0KICByZXR1cm4gQnVmZmVyLmNvbmNhdChvdXQpCn0KQ2lwaGVyLnByb3RvdHlwZS5fZmluYWwgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGNodW5rID0gdGhpcy5fY2FjaGUuZmx1c2goKQogIGlmICh0aGlzLl9hdXRvcGFkZGluZykgewogICAgY2h1bmsgPSB0aGlzLl9tb2RlLmVuY3J5cHQodGhpcywgY2h1bmspCiAgICB0aGlzLl9jaXBoZXIuc2NydWIoKQogICAgcmV0dXJuIGNodW5rCiAgfSBlbHNlIGlmIChjaHVuay50b1N0cmluZygnaGV4JykgIT09ICcxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMCcpIHsKICAgIHRoaXMuX2NpcGhlci5zY3J1YigpCiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgbm90IG11bHRpcGxlIG9mIGJsb2NrIGxlbmd0aCcpCiAgfQp9CkNpcGhlci5wcm90b3R5cGUuc2V0QXV0b1BhZGRpbmcgPSBmdW5jdGlvbiAoc2V0VG8pIHsKICB0aGlzLl9hdXRvcGFkZGluZyA9ICEhc2V0VG8KICByZXR1cm4gdGhpcwp9CgpmdW5jdGlvbiBTcGxpdHRlciAoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNwbGl0dGVyKSkgewogICAgcmV0dXJuIG5ldyBTcGxpdHRlcigpCiAgfQogIHRoaXMuY2FjaGUgPSBuZXcgQnVmZmVyKCcnKQp9ClNwbGl0dGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZGF0YSkgewogIHRoaXMuY2FjaGUgPSBCdWZmZXIuY29uY2F0KFt0aGlzLmNhY2hlLCBkYXRhXSkKfQoKU3BsaXR0ZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHsKICBpZiAodGhpcy5jYWNoZS5sZW5ndGggPiAxNSkgewogICAgdmFyIG91dCA9IHRoaXMuY2FjaGUuc2xpY2UoMCwgMTYpCiAgICB0aGlzLmNhY2hlID0gdGhpcy5jYWNoZS5zbGljZSgxNikKICAgIHJldHVybiBvdXQKICB9CiAgcmV0dXJuIG51bGwKfQpTcGxpdHRlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGxlbiA9IDE2IC0gdGhpcy5jYWNoZS5sZW5ndGgKICB2YXIgcGFkQnVmZiA9IG5ldyBCdWZmZXIobGVuKQoKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgcGFkQnVmZi53cml0ZVVJbnQ4KGxlbiwgaSkKICB9CiAgdmFyIG91dCA9IEJ1ZmZlci5jb25jYXQoW3RoaXMuY2FjaGUsIHBhZEJ1ZmZdKQogIHJldHVybiBvdXQKfQp2YXIgbW9kZWxpc3QgPSB7CiAgRUNCOiByZXF1aXJlKCcuL21vZGVzL2VjYicpLAogIENCQzogcmVxdWlyZSgnLi9tb2Rlcy9jYmMnKSwKICBDRkI6IHJlcXVpcmUoJy4vbW9kZXMvY2ZiJyksCiAgQ0ZCODogcmVxdWlyZSgnLi9tb2Rlcy9jZmI4JyksCiAgQ0ZCMTogcmVxdWlyZSgnLi9tb2Rlcy9jZmIxJyksCiAgT0ZCOiByZXF1aXJlKCcuL21vZGVzL29mYicpLAogIENUUjogcmVxdWlyZSgnLi9tb2Rlcy9jdHInKSwKICBHQ006IHJlcXVpcmUoJy4vbW9kZXMvY3RyJykKfQoKZnVuY3Rpb24gY3JlYXRlQ2lwaGVyaXYgKHN1aXRlLCBwYXNzd29yZCwgaXYpIHsKICB2YXIgY29uZmlnID0gbW9kZXNbc3VpdGUudG9Mb3dlckNhc2UoKV0KICBpZiAoIWNvbmZpZykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9CiAgaWYgKHR5cGVvZiBpdiA9PT0gJ3N0cmluZycpIHsKICAgIGl2ID0gbmV3IEJ1ZmZlcihpdikKICB9CiAgaWYgKHR5cGVvZiBwYXNzd29yZCA9PT0gJ3N0cmluZycpIHsKICAgIHBhc3N3b3JkID0gbmV3IEJ1ZmZlcihwYXNzd29yZCkKICB9CiAgaWYgKHBhc3N3b3JkLmxlbmd0aCAhPT0gY29uZmlnLmtleSAvIDgpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQga2V5IGxlbmd0aCAnICsgcGFzc3dvcmQubGVuZ3RoKQogIH0KICBpZiAoaXYubGVuZ3RoICE9PSBjb25maWcuaXYpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgaXYgbGVuZ3RoICcgKyBpdi5sZW5ndGgpCiAgfQogIGlmIChjb25maWcudHlwZSA9PT0gJ3N0cmVhbScpIHsKICAgIHJldHVybiBuZXcgU3RyZWFtQ2lwaGVyKG1vZGVsaXN0W2NvbmZpZy5tb2RlXSwgcGFzc3dvcmQsIGl2KQogIH0gZWxzZSBpZiAoY29uZmlnLnR5cGUgPT09ICdhdXRoJykgewogICAgcmV0dXJuIG5ldyBBdXRoQ2lwaGVyKG1vZGVsaXN0W2NvbmZpZy5tb2RlXSwgcGFzc3dvcmQsIGl2KQogIH0KICByZXR1cm4gbmV3IENpcGhlcihtb2RlbGlzdFtjb25maWcubW9kZV0sIHBhc3N3b3JkLCBpdikKfQpmdW5jdGlvbiBjcmVhdGVDaXBoZXIgKHN1aXRlLCBwYXNzd29yZCkgewogIHZhciBjb25maWcgPSBtb2Rlc1tzdWl0ZS50b0xvd2VyQ2FzZSgpXQogIGlmICghY29uZmlnKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHN1aXRlIHR5cGUnKQogIH0KICB2YXIga2V5cyA9IGVidGsocGFzc3dvcmQsIGZhbHNlLCBjb25maWcua2V5LCBjb25maWcuaXYpCiAgcmV0dXJuIGNyZWF0ZUNpcGhlcml2KHN1aXRlLCBrZXlzLmtleSwga2V5cy5pdikKfQoKZXhwb3J0cy5jcmVhdGVDaXBoZXJpdiA9IGNyZWF0ZUNpcGhlcml2CmV4cG9ydHMuY3JlYXRlQ2lwaGVyID0gY3JlYXRlQ2lwaGVyCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9hZXMiOjQ1LCIuL2F1dGhDaXBoZXIiOjQ2LCIuL21vZGVzIjo1MSwiLi9tb2Rlcy9jYmMiOjUyLCIuL21vZGVzL2NmYiI6NTMsIi4vbW9kZXMvY2ZiMSI6NTQsIi4vbW9kZXMvY2ZiOCI6NTUsIi4vbW9kZXMvY3RyIjo1NiwiLi9tb2Rlcy9lY2IiOjU3LCIuL21vZGVzL29mYiI6NTgsIi4vc3RyZWFtQ2lwaGVyIjo1OSwiYnVmZmVyIjo3NiwiY2lwaGVyLWJhc2UiOjc4LCJldnBfYnl0ZXN0b2tleSI6MTE5LCJpbmhlcml0cyI6MTI5fV0sNTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciB6ZXJvcyA9IG5ldyBCdWZmZXIoMTYpCnplcm9zLmZpbGwoMCkKbW9kdWxlLmV4cG9ydHMgPSBHSEFTSApmdW5jdGlvbiBHSEFTSCAoa2V5KSB7CiAgdGhpcy5oID0ga2V5CiAgdGhpcy5zdGF0ZSA9IG5ldyBCdWZmZXIoMTYpCiAgdGhpcy5zdGF0ZS5maWxsKDApCiAgdGhpcy5jYWNoZSA9IG5ldyBCdWZmZXIoJycpCn0KLy8gZnJvbSBodHRwOi8vYml0d2lzZXNoaWZ0bGVmdC5naXRodWIuaW8vc2pjbC9kb2Mvc3ltYm9scy9zcmMvY29yZV9nY20uanMuaHRtbAovLyBieSBKdWhvIFbDpGjDpC1IZXJ0dHVhCkdIQVNILnByb3RvdHlwZS5naGFzaCA9IGZ1bmN0aW9uIChibG9jaykgewogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgYmxvY2subGVuZ3RoKSB7CiAgICB0aGlzLnN0YXRlW2ldIF49IGJsb2NrW2ldCiAgfQogIHRoaXMuX211bHRpcGx5KCkKfQoKR0hBU0gucHJvdG90eXBlLl9tdWx0aXBseSA9IGZ1bmN0aW9uICgpIHsKICB2YXIgVmkgPSB0b0FycmF5KHRoaXMuaCkKICB2YXIgWmkgPSBbMCwgMCwgMCwgMF0KICB2YXIgaiwgeGksIGxzYl9WaQogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgMTI4KSB7CiAgICB4aSA9ICh0aGlzLnN0YXRlW35+KGkgLyA4KV0gJiAoMSA8PCAoNyAtIGkgJSA4KSkpICE9PSAwCiAgICBpZiAoeGkpIHsKICAgICAgLy8gWl9pKzEgPSBaX2kgXiBWX2kKICAgICAgWmkgPSB4b3IoWmksIFZpKQogICAgfQoKICAgIC8vIFN0b3JlIHRoZSB2YWx1ZSBvZiBMU0IoVl9pKQogICAgbHNiX1ZpID0gKFZpWzNdICYgMSkgIT09IDAKCiAgICAvLyBWX2krMSA9IFZfaSA+PiAxCiAgICBmb3IgKGogPSAzOyBqID4gMDsgai0tKSB7CiAgICAgIFZpW2pdID0gKFZpW2pdID4+PiAxKSB8ICgoVmlbaiAtIDFdICYgMSkgPDwgMzEpCiAgICB9CiAgICBWaVswXSA9IFZpWzBdID4+PiAxCgogICAgLy8gSWYgTFNCKFZfaSkgaXMgMSwgVl9pKzEgPSAoVl9pID4+IDEpIF4gUgogICAgaWYgKGxzYl9WaSkgewogICAgICBWaVswXSA9IFZpWzBdIF4gKDB4ZTEgPDwgMjQpCiAgICB9CiAgfQogIHRoaXMuc3RhdGUgPSBmcm9tQXJyYXkoWmkpCn0KR0hBU0gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChidWYpIHsKICB0aGlzLmNhY2hlID0gQnVmZmVyLmNvbmNhdChbdGhpcy5jYWNoZSwgYnVmXSkKICB2YXIgY2h1bmsKICB3aGlsZSAodGhpcy5jYWNoZS5sZW5ndGggPj0gMTYpIHsKICAgIGNodW5rID0gdGhpcy5jYWNoZS5zbGljZSgwLCAxNikKICAgIHRoaXMuY2FjaGUgPSB0aGlzLmNhY2hlLnNsaWNlKDE2KQogICAgdGhpcy5naGFzaChjaHVuaykKICB9Cn0KR0hBU0gucHJvdG90eXBlLmZpbmFsID0gZnVuY3Rpb24gKGFibCwgYmwpIHsKICBpZiAodGhpcy5jYWNoZS5sZW5ndGgpIHsKICAgIHRoaXMuZ2hhc2goQnVmZmVyLmNvbmNhdChbdGhpcy5jYWNoZSwgemVyb3NdLCAxNikpCiAgfQogIHRoaXMuZ2hhc2goZnJvbUFycmF5KFsKICAgIDAsIGFibCwKICAgIDAsIGJsCiAgXSkpCiAgcmV0dXJuIHRoaXMuc3RhdGUKfQoKZnVuY3Rpb24gdG9BcnJheSAoYnVmKSB7CiAgcmV0dXJuIFsKICAgIGJ1Zi5yZWFkVUludDMyQkUoMCksCiAgICBidWYucmVhZFVJbnQzMkJFKDQpLAogICAgYnVmLnJlYWRVSW50MzJCRSg4KSwKICAgIGJ1Zi5yZWFkVUludDMyQkUoMTIpCiAgXQp9CmZ1bmN0aW9uIGZyb21BcnJheSAob3V0KSB7CiAgb3V0ID0gb3V0Lm1hcChmaXh1cF91aW50MzIpCiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoMTYpCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzBdLCAwKQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFsxXSwgNCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbMl0sIDgpCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzNdLCAxMikKICByZXR1cm4gYnVmCn0KdmFyIHVpbnRfbWF4ID0gTWF0aC5wb3coMiwgMzIpCmZ1bmN0aW9uIGZpeHVwX3VpbnQzMiAoeCkgewogIHZhciByZXQsIHhfcG9zCiAgcmV0ID0geCA+IHVpbnRfbWF4IHx8IHggPCAwID8gKHhfcG9zID0gTWF0aC5hYnMoeCkgJSB1aW50X21heCwgeCA8IDAgPyB1aW50X21heCAtIHhfcG9zIDogeF9wb3MpIDogeAogIHJldHVybiByZXQKfQpmdW5jdGlvbiB4b3IgKGEsIGIpIHsKICByZXR1cm4gWwogICAgYVswXSBeIGJbMF0sCiAgICBhWzFdIF4gYlsxXSwKICAgIGFbMl0gXiBiWzJdLAogICAgYVszXSBeIGJbM10KICBdCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjc2fV0sNTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzWydhZXMtMTI4LWVjYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxMjgsCiAgaXY6IDAsCiAgbW9kZTogJ0VDQicsCiAgdHlwZTogJ2Jsb2NrJwp9CmV4cG9ydHNbJ2Flcy0xOTItZWNiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMCwKICBtb2RlOiAnRUNCJywKICB0eXBlOiAnYmxvY2snCn0KZXhwb3J0c1snYWVzLTI1Ni1lY2InXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMjU2LAogIGl2OiAwLAogIG1vZGU6ICdFQ0InLAogIHR5cGU6ICdibG9jaycKfQpleHBvcnRzWydhZXMtMTI4LWNiYyddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxMjgsCiAgaXY6IDE2LAogIG1vZGU6ICdDQkMnLAogIHR5cGU6ICdibG9jaycKfQpleHBvcnRzWydhZXMtMTkyLWNiYyddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxOTIsCiAgaXY6IDE2LAogIG1vZGU6ICdDQkMnLAogIHR5cGU6ICdibG9jaycKfQpleHBvcnRzWydhZXMtMjU2LWNiYyddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAyNTYsCiAgaXY6IDE2LAogIG1vZGU6ICdDQkMnLAogIHR5cGU6ICdibG9jaycKfQpleHBvcnRzWydhZXMxMjgnXSA9IGV4cG9ydHNbJ2Flcy0xMjgtY2JjJ10KZXhwb3J0c1snYWVzMTkyJ10gPSBleHBvcnRzWydhZXMtMTkyLWNiYyddCmV4cG9ydHNbJ2FlczI1NiddID0gZXhwb3J0c1snYWVzLTI1Ni1jYmMnXQpleHBvcnRzWydhZXMtMTI4LWNmYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxMjgsCiAgaXY6IDE2LAogIG1vZGU6ICdDRkInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTE5Mi1jZmInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTkyLAogIGl2OiAxNiwKICBtb2RlOiAnQ0ZCJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0yNTYtY2ZiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMTYsCiAgbW9kZTogJ0NGQicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMTI4LWNmYjgnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxNiwKICBtb2RlOiAnQ0ZCOCcsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMTkyLWNmYjgnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTkyLAogIGl2OiAxNiwKICBtb2RlOiAnQ0ZCOCcsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMjU2LWNmYjgnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMjU2LAogIGl2OiAxNiwKICBtb2RlOiAnQ0ZCOCcsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMTI4LWNmYjEnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxNiwKICBtb2RlOiAnQ0ZCMScsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMTkyLWNmYjEnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTkyLAogIGl2OiAxNiwKICBtb2RlOiAnQ0ZCMScsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMjU2LWNmYjEnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMjU2LAogIGl2OiAxNiwKICBtb2RlOiAnQ0ZCMScsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMTI4LW9mYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxMjgsCiAgaXY6IDE2LAogIG1vZGU6ICdPRkInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTE5Mi1vZmInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTkyLAogIGl2OiAxNiwKICBtb2RlOiAnT0ZCJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0yNTYtb2ZiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMTYsCiAgbW9kZTogJ09GQicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMTI4LWN0ciddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxMjgsCiAgaXY6IDE2LAogIG1vZGU6ICdDVFInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTE5Mi1jdHInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTkyLAogIGl2OiAxNiwKICBtb2RlOiAnQ1RSJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0yNTYtY3RyJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMTYsCiAgbW9kZTogJ0NUUicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMTI4LWdjbSddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxMjgsCiAgaXY6IDEyLAogIG1vZGU6ICdHQ00nLAogIHR5cGU6ICdhdXRoJwp9CmV4cG9ydHNbJ2Flcy0xOTItZ2NtJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTIsCiAgbW9kZTogJ0dDTScsCiAgdHlwZTogJ2F1dGgnCn0KZXhwb3J0c1snYWVzLTI1Ni1nY20nXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMjU2LAogIGl2OiAxMiwKICBtb2RlOiAnR0NNJywKICB0eXBlOiAnYXV0aCcKfQoKfSx7fV0sNTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgeG9yID0gcmVxdWlyZSgnYnVmZmVyLXhvcicpCgpleHBvcnRzLmVuY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgYmxvY2spIHsKICB2YXIgZGF0YSA9IHhvcihibG9jaywgc2VsZi5fcHJldikKCiAgc2VsZi5fcHJldiA9IHNlbGYuX2NpcGhlci5lbmNyeXB0QmxvY2soZGF0YSkKICByZXR1cm4gc2VsZi5fcHJldgp9CgpleHBvcnRzLmRlY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgYmxvY2spIHsKICB2YXIgcGFkID0gc2VsZi5fcHJldgoKICBzZWxmLl9wcmV2ID0gYmxvY2sKICB2YXIgb3V0ID0gc2VsZi5fY2lwaGVyLmRlY3J5cHRCbG9jayhibG9jaykKCiAgcmV0dXJuIHhvcihvdXQsIHBhZCkKfQoKfSx7ImJ1ZmZlci14b3IiOjc1fV0sNTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciB4b3IgPSByZXF1aXJlKCdidWZmZXIteG9yJykKCmV4cG9ydHMuZW5jcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBkYXRhLCBkZWNyeXB0KSB7CiAgdmFyIG91dCA9IG5ldyBCdWZmZXIoJycpCiAgdmFyIGxlbgoKICB3aGlsZSAoZGF0YS5sZW5ndGgpIHsKICAgIGlmIChzZWxmLl9jYWNoZS5sZW5ndGggPT09IDApIHsKICAgICAgc2VsZi5fY2FjaGUgPSBzZWxmLl9jaXBoZXIuZW5jcnlwdEJsb2NrKHNlbGYuX3ByZXYpCiAgICAgIHNlbGYuX3ByZXYgPSBuZXcgQnVmZmVyKCcnKQogICAgfQoKICAgIGlmIChzZWxmLl9jYWNoZS5sZW5ndGggPD0gZGF0YS5sZW5ndGgpIHsKICAgICAgbGVuID0gc2VsZi5fY2FjaGUubGVuZ3RoCiAgICAgIG91dCA9IEJ1ZmZlci5jb25jYXQoW291dCwgZW5jcnlwdFN0YXJ0KHNlbGYsIGRhdGEuc2xpY2UoMCwgbGVuKSwgZGVjcnlwdCldKQogICAgICBkYXRhID0gZGF0YS5zbGljZShsZW4pCiAgICB9IGVsc2UgewogICAgICBvdXQgPSBCdWZmZXIuY29uY2F0KFtvdXQsIGVuY3J5cHRTdGFydChzZWxmLCBkYXRhLCBkZWNyeXB0KV0pCiAgICAgIGJyZWFrCiAgICB9CiAgfQoKICByZXR1cm4gb3V0Cn0KZnVuY3Rpb24gZW5jcnlwdFN0YXJ0IChzZWxmLCBkYXRhLCBkZWNyeXB0KSB7CiAgdmFyIGxlbiA9IGRhdGEubGVuZ3RoCiAgdmFyIG91dCA9IHhvcihkYXRhLCBzZWxmLl9jYWNoZSkKICBzZWxmLl9jYWNoZSA9IHNlbGYuX2NhY2hlLnNsaWNlKGxlbikKICBzZWxmLl9wcmV2ID0gQnVmZmVyLmNvbmNhdChbc2VsZi5fcHJldiwgZGVjcnlwdCA/IGRhdGEgOiBvdXRdKQogIHJldHVybiBvdXQKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzYsImJ1ZmZlci14b3IiOjc1fV0sNTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CmZ1bmN0aW9uIGVuY3J5cHRCeXRlIChzZWxmLCBieXRlUGFyYW0sIGRlY3J5cHQpIHsKICB2YXIgcGFkCiAgdmFyIGkgPSAtMQogIHZhciBsZW4gPSA4CiAgdmFyIG91dCA9IDAKICB2YXIgYml0LCB2YWx1ZQogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIHBhZCA9IHNlbGYuX2NpcGhlci5lbmNyeXB0QmxvY2soc2VsZi5fcHJldikKICAgIGJpdCA9IChieXRlUGFyYW0gJiAoMSA8PCAoNyAtIGkpKSkgPyAweDgwIDogMAogICAgdmFsdWUgPSBwYWRbMF0gXiBiaXQKICAgIG91dCArPSAoKHZhbHVlICYgMHg4MCkgPj4gKGkgJSA4KSkKICAgIHNlbGYuX3ByZXYgPSBzaGlmdEluKHNlbGYuX3ByZXYsIGRlY3J5cHQgPyBiaXQgOiB2YWx1ZSkKICB9CiAgcmV0dXJuIG91dAp9CmV4cG9ydHMuZW5jcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBjaHVuaywgZGVjcnlwdCkgewogIHZhciBsZW4gPSBjaHVuay5sZW5ndGgKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcihsZW4pCiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIG91dFtpXSA9IGVuY3J5cHRCeXRlKHNlbGYsIGNodW5rW2ldLCBkZWNyeXB0KQogIH0KICByZXR1cm4gb3V0Cn0KZnVuY3Rpb24gc2hpZnRJbiAoYnVmZmVyLCB2YWx1ZSkgewogIHZhciBsZW4gPSBidWZmZXIubGVuZ3RoCiAgdmFyIGkgPSAtMQogIHZhciBvdXQgPSBuZXcgQnVmZmVyKGJ1ZmZlci5sZW5ndGgpCiAgYnVmZmVyID0gQnVmZmVyLmNvbmNhdChbYnVmZmVyLCBuZXcgQnVmZmVyKFt2YWx1ZV0pXSkKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBvdXRbaV0gPSBidWZmZXJbaV0gPDwgMSB8IGJ1ZmZlcltpICsgMV0gPj4gKDcpCiAgfQogIHJldHVybiBvdXQKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzZ9XSw1NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKZnVuY3Rpb24gZW5jcnlwdEJ5dGUgKHNlbGYsIGJ5dGVQYXJhbSwgZGVjcnlwdCkgewogIHZhciBwYWQgPSBzZWxmLl9jaXBoZXIuZW5jcnlwdEJsb2NrKHNlbGYuX3ByZXYpCiAgdmFyIG91dCA9IHBhZFswXSBeIGJ5dGVQYXJhbQogIHNlbGYuX3ByZXYgPSBCdWZmZXIuY29uY2F0KFtzZWxmLl9wcmV2LnNsaWNlKDEpLCBuZXcgQnVmZmVyKFtkZWNyeXB0ID8gYnl0ZVBhcmFtIDogb3V0XSldKQogIHJldHVybiBvdXQKfQpleHBvcnRzLmVuY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgY2h1bmssIGRlY3J5cHQpIHsKICB2YXIgbGVuID0gY2h1bmsubGVuZ3RoCiAgdmFyIG91dCA9IG5ldyBCdWZmZXIobGVuKQogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBvdXRbaV0gPSBlbmNyeXB0Qnl0ZShzZWxmLCBjaHVua1tpXSwgZGVjcnlwdCkKICB9CiAgcmV0dXJuIG91dAp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3Nn1dLDU2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgeG9yID0gcmVxdWlyZSgnYnVmZmVyLXhvcicpCgpmdW5jdGlvbiBpbmNyMzIgKGl2KSB7CiAgdmFyIGxlbiA9IGl2Lmxlbmd0aAogIHZhciBpdGVtCiAgd2hpbGUgKGxlbi0tKSB7CiAgICBpdGVtID0gaXYucmVhZFVJbnQ4KGxlbikKICAgIGlmIChpdGVtID09PSAyNTUpIHsKICAgICAgaXYud3JpdGVVSW50OCgwLCBsZW4pCiAgICB9IGVsc2UgewogICAgICBpdGVtKysKICAgICAgaXYud3JpdGVVSW50OChpdGVtLCBsZW4pCiAgICAgIGJyZWFrCiAgICB9CiAgfQp9CgpmdW5jdGlvbiBnZXRCbG9jayAoc2VsZikgewogIHZhciBvdXQgPSBzZWxmLl9jaXBoZXIuZW5jcnlwdEJsb2NrKHNlbGYuX3ByZXYpCiAgaW5jcjMyKHNlbGYuX3ByZXYpCiAgcmV0dXJuIG91dAp9CgpleHBvcnRzLmVuY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgY2h1bmspIHsKICB3aGlsZSAoc2VsZi5fY2FjaGUubGVuZ3RoIDwgY2h1bmsubGVuZ3RoKSB7CiAgICBzZWxmLl9jYWNoZSA9IEJ1ZmZlci5jb25jYXQoW3NlbGYuX2NhY2hlLCBnZXRCbG9jayhzZWxmKV0pCiAgfQogIHZhciBwYWQgPSBzZWxmLl9jYWNoZS5zbGljZSgwLCBjaHVuay5sZW5ndGgpCiAgc2VsZi5fY2FjaGUgPSBzZWxmLl9jYWNoZS5zbGljZShjaHVuay5sZW5ndGgpCiAgcmV0dXJuIHhvcihjaHVuaywgcGFkKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3NiwiYnVmZmVyLXhvciI6NzV9XSw1NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmV4cG9ydHMuZW5jcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBibG9jaykgewogIHJldHVybiBzZWxmLl9jaXBoZXIuZW5jcnlwdEJsb2NrKGJsb2NrKQp9CmV4cG9ydHMuZGVjcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBibG9jaykgewogIHJldHVybiBzZWxmLl9jaXBoZXIuZGVjcnlwdEJsb2NrKGJsb2NrKQp9Cgp9LHt9XSw1ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHhvciA9IHJlcXVpcmUoJ2J1ZmZlci14b3InKQoKZnVuY3Rpb24gZ2V0QmxvY2sgKHNlbGYpIHsKICBzZWxmLl9wcmV2ID0gc2VsZi5fY2lwaGVyLmVuY3J5cHRCbG9jayhzZWxmLl9wcmV2KQogIHJldHVybiBzZWxmLl9wcmV2Cn0KCmV4cG9ydHMuZW5jcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBjaHVuaykgewogIHdoaWxlIChzZWxmLl9jYWNoZS5sZW5ndGggPCBjaHVuay5sZW5ndGgpIHsKICAgIHNlbGYuX2NhY2hlID0gQnVmZmVyLmNvbmNhdChbc2VsZi5fY2FjaGUsIGdldEJsb2NrKHNlbGYpXSkKICB9CgogIHZhciBwYWQgPSBzZWxmLl9jYWNoZS5zbGljZSgwLCBjaHVuay5sZW5ndGgpCiAgc2VsZi5fY2FjaGUgPSBzZWxmLl9jYWNoZS5zbGljZShjaHVuay5sZW5ndGgpCiAgcmV0dXJuIHhvcihjaHVuaywgcGFkKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3NiwiYnVmZmVyLXhvciI6NzV9XSw1OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFlcyA9IHJlcXVpcmUoJy4vYWVzJykKdmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJ2NpcGhlci1iYXNlJykKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQoKaW5oZXJpdHMoU3RyZWFtQ2lwaGVyLCBUcmFuc2Zvcm0pCm1vZHVsZS5leHBvcnRzID0gU3RyZWFtQ2lwaGVyCmZ1bmN0aW9uIFN0cmVhbUNpcGhlciAobW9kZSwga2V5LCBpdiwgZGVjcnlwdCkgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTdHJlYW1DaXBoZXIpKSB7CiAgICByZXR1cm4gbmV3IFN0cmVhbUNpcGhlcihtb2RlLCBrZXksIGl2KQogIH0KICBUcmFuc2Zvcm0uY2FsbCh0aGlzKQogIHRoaXMuX2NpcGhlciA9IG5ldyBhZXMuQUVTKGtleSkKICB0aGlzLl9wcmV2ID0gbmV3IEJ1ZmZlcihpdi5sZW5ndGgpCiAgdGhpcy5fY2FjaGUgPSBuZXcgQnVmZmVyKCcnKQogIHRoaXMuX3NlY0NhY2hlID0gbmV3IEJ1ZmZlcignJykKICB0aGlzLl9kZWNyeXB0ID0gZGVjcnlwdAogIGl2LmNvcHkodGhpcy5fcHJldikKICB0aGlzLl9tb2RlID0gbW9kZQp9ClN0cmVhbUNpcGhlci5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChjaHVuaykgewogIHJldHVybiB0aGlzLl9tb2RlLmVuY3J5cHQodGhpcywgY2h1bmssIHRoaXMuX2RlY3J5cHQpCn0KU3RyZWFtQ2lwaGVyLnByb3RvdHlwZS5fZmluYWwgPSBmdW5jdGlvbiAoKSB7CiAgdGhpcy5fY2lwaGVyLnNjcnViKCkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYWVzIjo0NSwiYnVmZmVyIjo3NiwiY2lwaGVyLWJhc2UiOjc4LCJpbmhlcml0cyI6MTI5fV0sNjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZWJ0ayA9IHJlcXVpcmUoJ2V2cF9ieXRlc3Rva2V5JykKdmFyIGFlcyA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktYWVzL2Jyb3dzZXInKQp2YXIgREVTID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1kZXMnKQp2YXIgZGVzTW9kZXMgPSByZXF1aXJlKCdicm93c2VyaWZ5LWRlcy9tb2RlcycpCnZhciBhZXNNb2RlcyA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktYWVzL21vZGVzJykKZnVuY3Rpb24gY3JlYXRlQ2lwaGVyIChzdWl0ZSwgcGFzc3dvcmQpIHsKICB2YXIga2V5TGVuLCBpdkxlbgogIHN1aXRlID0gc3VpdGUudG9Mb3dlckNhc2UoKQogIGlmIChhZXNNb2Rlc1tzdWl0ZV0pIHsKICAgIGtleUxlbiA9IGFlc01vZGVzW3N1aXRlXS5rZXkKICAgIGl2TGVuID0gYWVzTW9kZXNbc3VpdGVdLml2CiAgfSBlbHNlIGlmIChkZXNNb2Rlc1tzdWl0ZV0pIHsKICAgIGtleUxlbiA9IGRlc01vZGVzW3N1aXRlXS5rZXkgKiA4CiAgICBpdkxlbiA9IGRlc01vZGVzW3N1aXRlXS5pdgogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHN1aXRlIHR5cGUnKQogIH0KICB2YXIga2V5cyA9IGVidGsocGFzc3dvcmQsIGZhbHNlLCBrZXlMZW4sIGl2TGVuKQogIHJldHVybiBjcmVhdGVDaXBoZXJpdihzdWl0ZSwga2V5cy5rZXksIGtleXMuaXYpCn0KZnVuY3Rpb24gY3JlYXRlRGVjaXBoZXIgKHN1aXRlLCBwYXNzd29yZCkgewogIHZhciBrZXlMZW4sIGl2TGVuCiAgc3VpdGUgPSBzdWl0ZS50b0xvd2VyQ2FzZSgpCiAgaWYgKGFlc01vZGVzW3N1aXRlXSkgewogICAga2V5TGVuID0gYWVzTW9kZXNbc3VpdGVdLmtleQogICAgaXZMZW4gPSBhZXNNb2Rlc1tzdWl0ZV0uaXYKICB9IGVsc2UgaWYgKGRlc01vZGVzW3N1aXRlXSkgewogICAga2V5TGVuID0gZGVzTW9kZXNbc3VpdGVdLmtleSAqIDgKICAgIGl2TGVuID0gZGVzTW9kZXNbc3VpdGVdLml2CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgc3VpdGUgdHlwZScpCiAgfQogIHZhciBrZXlzID0gZWJ0ayhwYXNzd29yZCwgZmFsc2UsIGtleUxlbiwgaXZMZW4pCiAgcmV0dXJuIGNyZWF0ZURlY2lwaGVyaXYoc3VpdGUsIGtleXMua2V5LCBrZXlzLml2KQp9CgpmdW5jdGlvbiBjcmVhdGVDaXBoZXJpdiAoc3VpdGUsIGtleSwgaXYpIHsKICBzdWl0ZSA9IHN1aXRlLnRvTG93ZXJDYXNlKCkKICBpZiAoYWVzTW9kZXNbc3VpdGVdKSB7CiAgICByZXR1cm4gYWVzLmNyZWF0ZUNpcGhlcml2KHN1aXRlLCBrZXksIGl2KQogIH0gZWxzZSBpZiAoZGVzTW9kZXNbc3VpdGVdKSB7CiAgICByZXR1cm4gbmV3IERFUyh7CiAgICAgIGtleToga2V5LAogICAgICBpdjogaXYsCiAgICAgIG1vZGU6IHN1aXRlCiAgICB9KQogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHN1aXRlIHR5cGUnKQogIH0KfQpmdW5jdGlvbiBjcmVhdGVEZWNpcGhlcml2IChzdWl0ZSwga2V5LCBpdikgewogIHN1aXRlID0gc3VpdGUudG9Mb3dlckNhc2UoKQogIGlmIChhZXNNb2Rlc1tzdWl0ZV0pIHsKICAgIHJldHVybiBhZXMuY3JlYXRlRGVjaXBoZXJpdihzdWl0ZSwga2V5LCBpdikKICB9IGVsc2UgaWYgKGRlc01vZGVzW3N1aXRlXSkgewogICAgcmV0dXJuIG5ldyBERVMoewogICAgICBrZXk6IGtleSwKICAgICAgaXY6IGl2LAogICAgICBtb2RlOiBzdWl0ZSwKICAgICAgZGVjcnlwdDogdHJ1ZQogICAgfSkKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9Cn0KZXhwb3J0cy5jcmVhdGVDaXBoZXIgPSBleHBvcnRzLkNpcGhlciA9IGNyZWF0ZUNpcGhlcgpleHBvcnRzLmNyZWF0ZUNpcGhlcml2ID0gZXhwb3J0cy5DaXBoZXJpdiA9IGNyZWF0ZUNpcGhlcml2CmV4cG9ydHMuY3JlYXRlRGVjaXBoZXIgPSBleHBvcnRzLkRlY2lwaGVyID0gY3JlYXRlRGVjaXBoZXIKZXhwb3J0cy5jcmVhdGVEZWNpcGhlcml2ID0gZXhwb3J0cy5EZWNpcGhlcml2ID0gY3JlYXRlRGVjaXBoZXJpdgpmdW5jdGlvbiBnZXRDaXBoZXJzICgpIHsKICByZXR1cm4gT2JqZWN0LmtleXMoZGVzTW9kZXMpLmNvbmNhdChhZXMuZ2V0Q2lwaGVycygpKQp9CmV4cG9ydHMubGlzdENpcGhlcnMgPSBleHBvcnRzLmdldENpcGhlcnMgPSBnZXRDaXBoZXJzCgp9LHsiYnJvd3NlcmlmeS1hZXMvYnJvd3NlciI6NDcsImJyb3dzZXJpZnktYWVzL21vZGVzIjo1MSwiYnJvd3NlcmlmeS1kZXMiOjYxLCJicm93c2VyaWZ5LWRlcy9tb2RlcyI6NjIsImV2cF9ieXRlc3Rva2V5IjoxMTl9XSw2MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIENpcGhlckJhc2UgPSByZXF1aXJlKCdjaXBoZXItYmFzZScpCnZhciBkZXMgPSByZXF1aXJlKCdkZXMuanMnKQp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCgp2YXIgbW9kZXMgPSB7CiAgJ2Rlcy1lZGUzLWNiYyc6IGRlcy5DQkMuaW5zdGFudGlhdGUoZGVzLkVERSksCiAgJ2Rlcy1lZGUzJzogZGVzLkVERSwKICAnZGVzLWVkZS1jYmMnOiBkZXMuQ0JDLmluc3RhbnRpYXRlKGRlcy5FREUpLAogICdkZXMtZWRlJzogZGVzLkVERSwKICAnZGVzLWNiYyc6IGRlcy5DQkMuaW5zdGFudGlhdGUoZGVzLkRFUyksCiAgJ2Rlcy1lY2InOiBkZXMuREVTCn0KbW9kZXMuZGVzID0gbW9kZXNbJ2Rlcy1jYmMnXQptb2Rlcy5kZXMzID0gbW9kZXNbJ2Rlcy1lZGUzLWNiYyddCm1vZHVsZS5leHBvcnRzID0gREVTCmluaGVyaXRzKERFUywgQ2lwaGVyQmFzZSkKZnVuY3Rpb24gREVTIChvcHRzKSB7CiAgQ2lwaGVyQmFzZS5jYWxsKHRoaXMpCiAgdmFyIG1vZGVOYW1lID0gb3B0cy5tb2RlLnRvTG93ZXJDYXNlKCkKICB2YXIgbW9kZSA9IG1vZGVzW21vZGVOYW1lXQogIHZhciB0eXBlCiAgaWYgKG9wdHMuZGVjcnlwdCkgewogICAgdHlwZSA9ICdkZWNyeXB0JwogIH0gZWxzZSB7CiAgICB0eXBlID0gJ2VuY3J5cHQnCiAgfQogIHZhciBrZXkgPSBvcHRzLmtleQogIGlmIChtb2RlTmFtZSA9PT0gJ2Rlcy1lZGUnIHx8IG1vZGVOYW1lID09PSAnZGVzLWVkZS1jYmMnKSB7CiAgICBrZXkgPSBCdWZmZXIuY29uY2F0KFtrZXksIGtleS5zbGljZSgwLCA4KV0pCiAgfQogIHZhciBpdiA9IG9wdHMuaXYKICB0aGlzLl9kZXMgPSBtb2RlLmNyZWF0ZSh7CiAgICBrZXk6IGtleSwKICAgIGl2OiBpdiwKICAgIHR5cGU6IHR5cGUKICB9KQp9CkRFUy5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgcmV0dXJuIG5ldyBCdWZmZXIodGhpcy5fZGVzLnVwZGF0ZShkYXRhKSkKfQpERVMucHJvdG90eXBlLl9maW5hbCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gbmV3IEJ1ZmZlcih0aGlzLl9kZXMuZmluYWwoKSkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzYsImNpcGhlci1iYXNlIjo3OCwiZGVzLmpzIjo4NiwiaW5oZXJpdHMiOjEyOX1dLDYyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKZXhwb3J0c1snZGVzLWVjYiddID0gewogIGtleTogOCwKICBpdjogMAp9CmV4cG9ydHNbJ2Rlcy1jYmMnXSA9IGV4cG9ydHMuZGVzID0gewogIGtleTogOCwKICBpdjogOAp9CmV4cG9ydHNbJ2Rlcy1lZGUzLWNiYyddID0gZXhwb3J0cy5kZXMzID0gewogIGtleTogMjQsCiAgaXY6IDgKfQpleHBvcnRzWydkZXMtZWRlMyddID0gewogIGtleTogMjQsCiAgaXY6IDAKfQpleHBvcnRzWydkZXMtZWRlLWNiYyddID0gewogIGtleTogMTYsCiAgaXY6IDgKfQpleHBvcnRzWydkZXMtZWRlJ10gPSB7CiAga2V5OiAxNiwKICBpdjogMAp9Cgp9LHt9XSw2MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJuID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIHJhbmRvbUJ5dGVzID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKTsKbW9kdWxlLmV4cG9ydHMgPSBjcnQ7CmZ1bmN0aW9uIGJsaW5kKHByaXYpIHsKICB2YXIgciA9IGdldHIocHJpdik7CiAgdmFyIGJsaW5kZXIgPSByLnRvUmVkKGJuLm1vbnQocHJpdi5tb2R1bHVzKSkKICAucmVkUG93KG5ldyBibihwcml2LnB1YmxpY0V4cG9uZW50KSkuZnJvbVJlZCgpOwogIHJldHVybiB7CiAgICBibGluZGVyOiBibGluZGVyLAogICAgdW5ibGluZGVyOnIuaW52bShwcml2Lm1vZHVsdXMpCiAgfTsKfQpmdW5jdGlvbiBjcnQobXNnLCBwcml2KSB7CiAgdmFyIGJsaW5kcyA9IGJsaW5kKHByaXYpOwogIHZhciBsZW4gPSBwcml2Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpOwogIHZhciBtb2QgPSBibi5tb250KHByaXYubW9kdWx1cyk7CiAgdmFyIGJsaW5kZWQgPSBuZXcgYm4obXNnKS5tdWwoYmxpbmRzLmJsaW5kZXIpLnVtb2QocHJpdi5tb2R1bHVzKTsKICB2YXIgYzEgPSBibGluZGVkLnRvUmVkKGJuLm1vbnQocHJpdi5wcmltZTEpKTsKICB2YXIgYzIgPSBibGluZGVkLnRvUmVkKGJuLm1vbnQocHJpdi5wcmltZTIpKTsKICB2YXIgcWludiA9IHByaXYuY29lZmZpY2llbnQ7CiAgdmFyIHAgPSBwcml2LnByaW1lMTsKICB2YXIgcSA9IHByaXYucHJpbWUyOwogIHZhciBtMSA9IGMxLnJlZFBvdyhwcml2LmV4cG9uZW50MSk7CiAgdmFyIG0yID0gYzIucmVkUG93KHByaXYuZXhwb25lbnQyKTsKICBtMSA9IG0xLmZyb21SZWQoKTsKICBtMiA9IG0yLmZyb21SZWQoKTsKICB2YXIgaCA9IG0xLmlzdWIobTIpLmltdWwocWludikudW1vZChwKTsKICBoLmltdWwocSk7CiAgbTIuaWFkZChoKTsKICByZXR1cm4gbmV3IEJ1ZmZlcihtMi5pbXVsKGJsaW5kcy51bmJsaW5kZXIpLnVtb2QocHJpdi5tb2R1bHVzKS50b0FycmF5KGZhbHNlLCBsZW4pKTsKfQpjcnQuZ2V0ciA9IGdldHI7CmZ1bmN0aW9uIGdldHIocHJpdikgewogIHZhciBsZW4gPSBwcml2Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpOwogIHZhciByID0gbmV3IGJuKHJhbmRvbUJ5dGVzKGxlbikpOwogIHdoaWxlIChyLmNtcChwcml2Lm1vZHVsdXMpID49ICAwIHx8ICFyLnVtb2QocHJpdi5wcmltZTEpIHx8ICFyLnVtb2QocHJpdi5wcmltZTIpKSB7CiAgICByID0gbmV3IGJuKHJhbmRvbUJ5dGVzKGxlbikpOwogIH0KICByZXR1cm4gcjsKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJuLmpzIjo0MiwiYnVmZmVyIjo3NiwicmFuZG9tYnl0ZXMiOjE0OH1dLDY0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewondXNlIHN0cmljdCcKZXhwb3J0c1snUlNBLVNIQTIyNCddID0gZXhwb3J0cy5zaGEyMjRXaXRoUlNBRW5jcnlwdGlvbiA9IHsKICBzaWduOiAncnNhJywKICBoYXNoOiAnc2hhMjI0JywKICBpZDogbmV3IEJ1ZmZlcignMzAyZDMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjA0MDUwMDA0MWMnLCAnaGV4JykKfQpleHBvcnRzWydSU0EtU0hBMjU2J10gPSBleHBvcnRzLnNoYTI1NldpdGhSU0FFbmNyeXB0aW9uID0gewogIHNpZ246ICdyc2EnLAogIGhhc2g6ICdzaGEyNTYnLAogIGlkOiBuZXcgQnVmZmVyKCczMDMxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDEwNTAwMDQyMCcsICdoZXgnKQp9CmV4cG9ydHNbJ1JTQS1TSEEzODQnXSA9IGV4cG9ydHMuc2hhMzg0V2l0aFJTQUVuY3J5cHRpb24gPSB7CiAgc2lnbjogJ3JzYScsCiAgaGFzaDogJ3NoYTM4NCcsCiAgaWQ6IG5ldyBCdWZmZXIoJzMwNDEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMjA1MDAwNDMwJywgJ2hleCcpCn0KZXhwb3J0c1snUlNBLVNIQTUxMiddID0gZXhwb3J0cy5zaGE1MTJXaXRoUlNBRW5jcnlwdGlvbiA9IHsKICBzaWduOiAncnNhJywKICBoYXNoOiAnc2hhNTEyJywKICBpZDogbmV3IEJ1ZmZlcignMzA1MTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAzMDUwMDA0NDAnLCAnaGV4JykKfQpleHBvcnRzWydSU0EtU0hBMSddID0gewogIHNpZ246ICdyc2EnLAogIGhhc2g6ICdzaGExJywKICBpZDogbmV3IEJ1ZmZlcignMzAyMTMwMDkwNjA1MmIwZTAzMDIxYTA1MDAwNDE0JywgJ2hleCcpCn0KZXhwb3J0c1snZWNkc2Etd2l0aC1TSEExJ10gPSB7CiAgc2lnbjogJ2VjZHNhJywKICBoYXNoOiAnc2hhMScsCiAgaWQ6IG5ldyBCdWZmZXIoJycsICdoZXgnKQp9CgpleHBvcnRzLkRTQSA9IGV4cG9ydHNbJ0RTQS1TSEExJ10gPSBleHBvcnRzWydEU0EtU0hBJ10gPSB7CiAgc2lnbjogJ2RzYScsCiAgaGFzaDogJ3NoYTEnLAogIGlkOiBuZXcgQnVmZmVyKCcnLCAnaGV4JykKfQpleHBvcnRzWydEU0EtU0hBMjI0J10gPSBleHBvcnRzWydEU0EtV0lUSC1TSEEyMjQnXSA9IHsKICBzaWduOiAnZHNhJywKICBoYXNoOiAnc2hhMjI0JywKICBpZDogbmV3IEJ1ZmZlcignJywgJ2hleCcpCn0KZXhwb3J0c1snRFNBLVNIQTI1NiddID0gZXhwb3J0c1snRFNBLVdJVEgtU0hBMjU2J10gPSB7CiAgc2lnbjogJ2RzYScsCiAgaGFzaDogJ3NoYTI1NicsCiAgaWQ6IG5ldyBCdWZmZXIoJycsICdoZXgnKQp9CmV4cG9ydHNbJ0RTQS1TSEEzODQnXSA9IGV4cG9ydHNbJ0RTQS1XSVRILVNIQTM4NCddID0gewogIHNpZ246ICdkc2EnLAogIGhhc2g6ICdzaGEzODQnLAogIGlkOiBuZXcgQnVmZmVyKCcnLCAnaGV4JykKfQpleHBvcnRzWydEU0EtU0hBNTEyJ10gPSBleHBvcnRzWydEU0EtV0lUSC1TSEE1MTInXSA9IHsKICBzaWduOiAnZHNhJywKICBoYXNoOiAnc2hhNTEyJywKICBpZDogbmV3IEJ1ZmZlcignJywgJ2hleCcpCn0KZXhwb3J0c1snRFNBLVJJUEVNRDE2MCddID0gewogIHNpZ246ICdkc2EnLAogIGhhc2g6ICdybWQxNjAnLAogIGlkOiBuZXcgQnVmZmVyKCcnLCAnaGV4JykKfQpleHBvcnRzWydSU0EtUklQRU1EMTYwJ10gPSBleHBvcnRzLnJpcGVtZDE2MFdpdGhSU0EgPSB7CiAgc2lnbjogJ3JzYScsCiAgaGFzaDogJ3JtZDE2MCcsCiAgaWQ6IG5ldyBCdWZmZXIoJzMwMjEzMDA5MDYwNTJiMjQwMzAyMDEwNTAwMDQxNCcsICdoZXgnKQp9CmV4cG9ydHNbJ1JTQS1NRDUnXSA9IGV4cG9ydHMubWQ1V2l0aFJTQUVuY3J5cHRpb24gPSB7CiAgc2lnbjogJ3JzYScsCiAgaGFzaDogJ21kNScsCiAgaWQ6IG5ldyBCdWZmZXIoJzMwMjAzMDBjMDYwODJhODY0ODg2ZjcwZDAyMDUwNTAwMDQxMCcsICdoZXgnKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3Nn1dLDY1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgX2FsZ29zID0gcmVxdWlyZSgnLi9hbGdvcycpCnZhciBjcmVhdGVIYXNoID0gcmVxdWlyZSgnY3JlYXRlLWhhc2gnKQp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBzaWduID0gcmVxdWlyZSgnLi9zaWduJykKdmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpCnZhciB2ZXJpZnkgPSByZXF1aXJlKCcuL3ZlcmlmeScpCgp2YXIgYWxnb3MgPSB7fQpPYmplY3Qua2V5cyhfYWxnb3MpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogIGFsZ29zW2tleV0gPSBhbGdvc1trZXkudG9Mb3dlckNhc2UoKV0gPSBfYWxnb3Nba2V5XQp9KQoKZnVuY3Rpb24gU2lnbiAoYWxnb3JpdGhtKSB7CiAgc3RyZWFtLldyaXRhYmxlLmNhbGwodGhpcykKCiAgdmFyIGRhdGEgPSBhbGdvc1thbGdvcml0aG1dCiAgaWYgKCFkYXRhKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gbWVzc2FnZSBkaWdlc3QnKQogIH0KCiAgdGhpcy5faGFzaFR5cGUgPSBkYXRhLmhhc2gKICB0aGlzLl9oYXNoID0gY3JlYXRlSGFzaChkYXRhLmhhc2gpCiAgdGhpcy5fdGFnID0gZGF0YS5pZAogIHRoaXMuX3NpZ25UeXBlID0gZGF0YS5zaWduCn0KaW5oZXJpdHMoU2lnbiwgc3RyZWFtLldyaXRhYmxlKQoKU2lnbi5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gX3dyaXRlIChkYXRhLCBfLCBkb25lKSB7CiAgdGhpcy5faGFzaC51cGRhdGUoZGF0YSkKICBkb25lKCkKfQoKU2lnbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlIChkYXRhLCBlbmMpIHsKICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICBkYXRhID0gbmV3IEJ1ZmZlcihkYXRhLCBlbmMpCiAgfQoKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhKQogIHJldHVybiB0aGlzCn0KClNpZ24ucHJvdG90eXBlLnNpZ24gPSBmdW5jdGlvbiBzaWduTWV0aG9kIChrZXksIGVuYykgewogIHRoaXMuZW5kKCkKICB2YXIgaGFzaCA9IHRoaXMuX2hhc2guZGlnZXN0KCkKICB2YXIgc2lnID0gc2lnbihCdWZmZXIuY29uY2F0KFt0aGlzLl90YWcsIGhhc2hdKSwga2V5LCB0aGlzLl9oYXNoVHlwZSwgdGhpcy5fc2lnblR5cGUpCgogIHJldHVybiBlbmMgPyBzaWcudG9TdHJpbmcoZW5jKSA6IHNpZwp9CgpmdW5jdGlvbiBWZXJpZnkgKGFsZ29yaXRobSkgewogIHN0cmVhbS5Xcml0YWJsZS5jYWxsKHRoaXMpCgogIHZhciBkYXRhID0gYWxnb3NbYWxnb3JpdGhtXQogIGlmICghZGF0YSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIG1lc3NhZ2UgZGlnZXN0JykKICB9CgogIHRoaXMuX2hhc2ggPSBjcmVhdGVIYXNoKGRhdGEuaGFzaCkKICB0aGlzLl90YWcgPSBkYXRhLmlkCiAgdGhpcy5fc2lnblR5cGUgPSBkYXRhLnNpZ24KfQppbmhlcml0cyhWZXJpZnksIHN0cmVhbS5Xcml0YWJsZSkKClZlcmlmeS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gX3dyaXRlIChkYXRhLCBfLCBkb25lKSB7CiAgdGhpcy5faGFzaC51cGRhdGUoZGF0YSkKCiAgZG9uZSgpCn0KClZlcmlmeS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlIChkYXRhLCBlbmMpIHsKICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICBkYXRhID0gbmV3IEJ1ZmZlcihkYXRhLCBlbmMpCiAgfQoKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhKQogIHJldHVybiB0aGlzCn0KClZlcmlmeS5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5TWV0aG9kIChrZXksIHNpZywgZW5jKSB7CiAgaWYgKHR5cGVvZiBzaWcgPT09ICdzdHJpbmcnKSB7CiAgICBzaWcgPSBuZXcgQnVmZmVyKHNpZywgZW5jKQogIH0KCiAgdGhpcy5lbmQoKQogIHZhciBoYXNoID0gdGhpcy5faGFzaC5kaWdlc3QoKQoKICByZXR1cm4gdmVyaWZ5KHNpZywgQnVmZmVyLmNvbmNhdChbdGhpcy5fdGFnLCBoYXNoXSksIGtleSwgdGhpcy5fc2lnblR5cGUpCn0KCmZ1bmN0aW9uIGNyZWF0ZVNpZ24gKGFsZ29yaXRobSkgewogIHJldHVybiBuZXcgU2lnbihhbGdvcml0aG0pCn0KCmZ1bmN0aW9uIGNyZWF0ZVZlcmlmeSAoYWxnb3JpdGhtKSB7CiAgcmV0dXJuIG5ldyBWZXJpZnkoYWxnb3JpdGhtKQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBTaWduOiBjcmVhdGVTaWduLAogIFZlcmlmeTogY3JlYXRlVmVyaWZ5LAogIGNyZWF0ZVNpZ246IGNyZWF0ZVNpZ24sCiAgY3JlYXRlVmVyaWZ5OiBjcmVhdGVWZXJpZnkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYWxnb3MiOjY0LCIuL3NpZ24iOjY3LCIuL3ZlcmlmeSI6NjgsImJ1ZmZlciI6NzYsImNyZWF0ZS1oYXNoIjo4MSwiaW5oZXJpdHMiOjEyOSwic3RyZWFtIjoxNzF9XSw2NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JwpleHBvcnRzWycxLjMuMTMyLjAuMTAnXSA9ICdzZWNwMjU2azEnCgpleHBvcnRzWycxLjMuMTMyLjAuMzMnXSA9ICdwMjI0JwoKZXhwb3J0c1snMS4yLjg0MC4xMDA0NS4zLjEuMSddID0gJ3AxOTInCgpleHBvcnRzWycxLjIuODQwLjEwMDQ1LjMuMS43J10gPSAncDI1NicKCmV4cG9ydHNbJzEuMy4xMzIuMC4zNCddID0gJ3AzODQnCgpleHBvcnRzWycxLjMuMTMyLjAuMzUnXSA9ICdwNTIxJwoKfSx7fV0sNjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8vIG11Y2ggb2YgdGhpcyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9zZWxmLXNpZ25lZC9ibG9iL2doLXBhZ2VzL2xpYi9yc2EuanMKdmFyIGNyZWF0ZUhtYWMgPSByZXF1aXJlKCdjcmVhdGUtaG1hYycpCnZhciBjcnQgPSByZXF1aXJlKCdicm93c2VyaWZ5LXJzYScpCnZhciBjdXJ2ZXMgPSByZXF1aXJlKCcuL2N1cnZlcycpCnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJ2VsbGlwdGljJykKdmFyIHBhcnNlS2V5cyA9IHJlcXVpcmUoJ3BhcnNlLWFzbjEnKQoKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKQp2YXIgRUMgPSBlbGxpcHRpYy5lYwoKZnVuY3Rpb24gc2lnbiAoaGFzaCwga2V5LCBoYXNoVHlwZSwgc2lnblR5cGUpIHsKICB2YXIgcHJpdiA9IHBhcnNlS2V5cyhrZXkpCiAgaWYgKHByaXYuY3VydmUpIHsKICAgIGlmIChzaWduVHlwZSAhPT0gJ2VjZHNhJykgdGhyb3cgbmV3IEVycm9yKCd3cm9uZyBwcml2YXRlIGtleSB0eXBlJykKCiAgICByZXR1cm4gZWNTaWduKGhhc2gsIHByaXYpCiAgfSBlbHNlIGlmIChwcml2LnR5cGUgPT09ICdkc2EnKSB7CiAgICBpZiAoc2lnblR5cGUgIT09ICdkc2EnKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignd3JvbmcgcHJpdmF0ZSBrZXkgdHlwZScpCiAgICB9CiAgICByZXR1cm4gZHNhU2lnbihoYXNoLCBwcml2LCBoYXNoVHlwZSkKICB9IGVsc2UgewogICAgaWYgKHNpZ25UeXBlICE9PSAncnNhJykgdGhyb3cgbmV3IEVycm9yKCd3cm9uZyBwcml2YXRlIGtleSB0eXBlJykKICB9CgogIHZhciBsZW4gPSBwcml2Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpCiAgdmFyIHBhZCA9IFsgMCwgMSBdCiAgd2hpbGUgKGhhc2gubGVuZ3RoICsgcGFkLmxlbmd0aCArIDEgPCBsZW4pIHsKICAgIHBhZC5wdXNoKDB4ZmYpCiAgfQogIHBhZC5wdXNoKDB4MDApCiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCBoYXNoLmxlbmd0aCkgewogICAgcGFkLnB1c2goaGFzaFtpXSkKICB9CgogIHZhciBvdXQgPSBjcnQocGFkLCBwcml2KQogIHJldHVybiBvdXQKfQoKZnVuY3Rpb24gZWNTaWduIChoYXNoLCBwcml2KSB7CiAgdmFyIGN1cnZlSWQgPSBjdXJ2ZXNbcHJpdi5jdXJ2ZS5qb2luKCcuJyldCiAgaWYgKCFjdXJ2ZUlkKSB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gY3VydmUgJyArIHByaXYuY3VydmUuam9pbignLicpKQoKICB2YXIgY3VydmUgPSBuZXcgRUMoY3VydmVJZCkKICB2YXIga2V5ID0gY3VydmUuZ2VuS2V5UGFpcigpCgogIGtleS5faW1wb3J0UHJpdmF0ZShwcml2LnByaXZhdGVLZXkpCiAgdmFyIG91dCA9IGtleS5zaWduKGhhc2gpCgogIHJldHVybiBuZXcgQnVmZmVyKG91dC50b0RFUigpKQp9CgpmdW5jdGlvbiBkc2FTaWduIChoYXNoLCBwcml2LCBhbGdvKSB7CiAgdmFyIHggPSBwcml2LnBhcmFtcy5wcml2X2tleQogIHZhciBwID0gcHJpdi5wYXJhbXMucAogIHZhciBxID0gcHJpdi5wYXJhbXMucQogIHZhciBnID0gcHJpdi5wYXJhbXMuZwogIHZhciByID0gbmV3IEJOKDApCiAgdmFyIGsKICB2YXIgSCA9IGJpdHMyaW50KGhhc2gsIHEpLm1vZChxKQogIHZhciBzID0gZmFsc2UKICB2YXIga3YgPSBnZXRLZXkoeCwgcSwgaGFzaCwgYWxnbykKICB3aGlsZSAocyA9PT0gZmFsc2UpIHsKICAgIGsgPSBtYWtlS2V5KHEsIGt2LCBhbGdvKQogICAgciA9IG1ha2VSKGcsIGssIHAsIHEpCiAgICBzID0gay5pbnZtKHEpLmltdWwoSC5hZGQoeC5tdWwocikpKS5tb2QocSkKICAgIGlmICghcy5jbXBuKDApKSB7CiAgICAgIHMgPSBmYWxzZQogICAgICByID0gbmV3IEJOKDApCiAgICB9CiAgfQogIHJldHVybiB0b0RFUihyLCBzKQp9CgpmdW5jdGlvbiB0b0RFUiAociwgcykgewogIHIgPSByLnRvQXJyYXkoKQogIHMgPSBzLnRvQXJyYXkoKQoKICAvLyBQYWQgdmFsdWVzCiAgaWYgKHJbMF0gJiAweDgwKSB7CiAgICByID0gWyAwIF0uY29uY2F0KHIpCiAgfQogIC8vIFBhZCB2YWx1ZXMKICBpZiAoc1swXSAmIDB4ODApIHsKICAgIHMgPSBbMF0uY29uY2F0KHMpCiAgfQoKICB2YXIgdG90YWwgPSByLmxlbmd0aCArIHMubGVuZ3RoICsgNAogIHZhciByZXMgPSBbIDB4MzAsIHRvdGFsLCAweDAyLCByLmxlbmd0aCBdCiAgcmVzID0gcmVzLmNvbmNhdChyLCBbIDB4MDIsIHMubGVuZ3RoIF0sIHMpCiAgcmV0dXJuIG5ldyBCdWZmZXIocmVzKQp9CgpmdW5jdGlvbiBnZXRLZXkgKHgsIHEsIGhhc2gsIGFsZ28pIHsKICB4ID0gbmV3IEJ1ZmZlcih4LnRvQXJyYXkoKSkKICBpZiAoeC5sZW5ndGggPCBxLmJ5dGVMZW5ndGgoKSkgewogICAgdmFyIHplcm9zID0gbmV3IEJ1ZmZlcihxLmJ5dGVMZW5ndGgoKSAtIHgubGVuZ3RoKQogICAgemVyb3MuZmlsbCgwKQogICAgeCA9IEJ1ZmZlci5jb25jYXQoW3plcm9zLCB4XSkKICB9CiAgdmFyIGhsZW4gPSBoYXNoLmxlbmd0aAogIHZhciBoYml0cyA9IGJpdHMyb2N0ZXRzKGhhc2gsIHEpCiAgdmFyIHYgPSBuZXcgQnVmZmVyKGhsZW4pCiAgdi5maWxsKDEpCiAgdmFyIGsgPSBuZXcgQnVmZmVyKGhsZW4pCiAgay5maWxsKDApCiAgayA9IGNyZWF0ZUhtYWMoYWxnbywgaykKICAgIC51cGRhdGUodikKICAgIC51cGRhdGUobmV3IEJ1ZmZlcihbMF0pKQogICAgLnVwZGF0ZSh4KQogICAgLnVwZGF0ZShoYml0cykKICAgIC5kaWdlc3QoKQogIHYgPSBjcmVhdGVIbWFjKGFsZ28sIGspCiAgICAudXBkYXRlKHYpCiAgICAuZGlnZXN0KCkKICBrID0gY3JlYXRlSG1hYyhhbGdvLCBrKQogICAgLnVwZGF0ZSh2KQogICAgLnVwZGF0ZShuZXcgQnVmZmVyKFsxXSkpCiAgICAudXBkYXRlKHgpCiAgICAudXBkYXRlKGhiaXRzKQogICAgLmRpZ2VzdCgpCiAgdiA9IGNyZWF0ZUhtYWMoYWxnbywgaykKICAgIC51cGRhdGUodikKICAgIC5kaWdlc3QoKQogIHJldHVybiB7CiAgICBrOiBrLAogICAgdjogdgogIH0KfQoKZnVuY3Rpb24gYml0czJpbnQgKG9iaXRzLCBxKSB7CiAgdmFyIGJpdHMgPSBuZXcgQk4ob2JpdHMpCiAgdmFyIHNoaWZ0ID0gKG9iaXRzLmxlbmd0aCA8PCAzKSAtIHEuYml0TGVuZ3RoKCkKICBpZiAoc2hpZnQgPiAwKSB7CiAgICBiaXRzLmlzaHJuKHNoaWZ0KQogIH0KICByZXR1cm4gYml0cwp9CgpmdW5jdGlvbiBiaXRzMm9jdGV0cyAoYml0cywgcSkgewogIGJpdHMgPSBiaXRzMmludChiaXRzLCBxKQogIGJpdHMgPSBiaXRzLm1vZChxKQogIHZhciBvdXQgPSBuZXcgQnVmZmVyKGJpdHMudG9BcnJheSgpKQogIGlmIChvdXQubGVuZ3RoIDwgcS5ieXRlTGVuZ3RoKCkpIHsKICAgIHZhciB6ZXJvcyA9IG5ldyBCdWZmZXIocS5ieXRlTGVuZ3RoKCkgLSBvdXQubGVuZ3RoKQogICAgemVyb3MuZmlsbCgwKQogICAgb3V0ID0gQnVmZmVyLmNvbmNhdChbemVyb3MsIG91dF0pCiAgfQogIHJldHVybiBvdXQKfQoKZnVuY3Rpb24gbWFrZUtleSAocSwga3YsIGFsZ28pIHsKICB2YXIgdCwgawoKICBkbyB7CiAgICB0ID0gbmV3IEJ1ZmZlcignJykKCiAgICB3aGlsZSAodC5sZW5ndGggKiA4IDwgcS5iaXRMZW5ndGgoKSkgewogICAgICBrdi52ID0gY3JlYXRlSG1hYyhhbGdvLCBrdi5rKQogICAgICAgIC51cGRhdGUoa3YudikKICAgICAgICAuZGlnZXN0KCkKICAgICAgdCA9IEJ1ZmZlci5jb25jYXQoW3QsIGt2LnZdKQogICAgfQoKICAgIGsgPSBiaXRzMmludCh0LCBxKQogICAga3YuayA9IGNyZWF0ZUhtYWMoYWxnbywga3YuaykKICAgICAgLnVwZGF0ZShrdi52KQogICAgICAudXBkYXRlKG5ldyBCdWZmZXIoWzBdKSkKICAgICAgLmRpZ2VzdCgpCiAgICBrdi52ID0gY3JlYXRlSG1hYyhhbGdvLCBrdi5rKQogICAgICAudXBkYXRlKGt2LnYpCiAgICAgIC5kaWdlc3QoKQogIH0gd2hpbGUgKGsuY21wKHEpICE9PSAtMSkKCiAgcmV0dXJuIGsKfQoKZnVuY3Rpb24gbWFrZVIgKGcsIGssIHAsIHEpIHsKICByZXR1cm4gZy50b1JlZChCTi5tb250KHApKS5yZWRQb3coaykuZnJvbVJlZCgpLm1vZChxKQp9Cgptb2R1bGUuZXhwb3J0cyA9IHNpZ24KbW9kdWxlLmV4cG9ydHMuZ2V0S2V5ID0gZ2V0S2V5Cm1vZHVsZS5leHBvcnRzLm1ha2VLZXkgPSBtYWtlS2V5Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9jdXJ2ZXMiOjY2LCJibi5qcyI6NDIsImJyb3dzZXJpZnktcnNhIjo2MywiYnVmZmVyIjo3NiwiY3JlYXRlLWhtYWMiOjg0LCJlbGxpcHRpYyI6MTAxLCJwYXJzZS1hc24xIjoxMzh9XSw2ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLy8gbXVjaCBvZiB0aGlzIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L3NlbGYtc2lnbmVkL2Jsb2IvZ2gtcGFnZXMvbGliL3JzYS5qcwp2YXIgY3VydmVzID0gcmVxdWlyZSgnLi9jdXJ2ZXMnKQp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCdlbGxpcHRpYycpCnZhciBwYXJzZUtleXMgPSByZXF1aXJlKCdwYXJzZS1hc24xJykKCnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJykKdmFyIEVDID0gZWxsaXB0aWMuZWMKCmZ1bmN0aW9uIHZlcmlmeSAoc2lnLCBoYXNoLCBrZXksIHNpZ25UeXBlKSB7CiAgdmFyIHB1YiA9IHBhcnNlS2V5cyhrZXkpCiAgaWYgKHB1Yi50eXBlID09PSAnZWMnKSB7CiAgICBpZiAoc2lnblR5cGUgIT09ICdlY2RzYScpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCd3cm9uZyBwdWJsaWMga2V5IHR5cGUnKQogICAgfQogICAgcmV0dXJuIGVjVmVyaWZ5KHNpZywgaGFzaCwgcHViKQogIH0gZWxzZSBpZiAocHViLnR5cGUgPT09ICdkc2EnKSB7CiAgICBpZiAoc2lnblR5cGUgIT09ICdkc2EnKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignd3JvbmcgcHVibGljIGtleSB0eXBlJykKICAgIH0KICAgIHJldHVybiBkc2FWZXJpZnkoc2lnLCBoYXNoLCBwdWIpCiAgfSBlbHNlIHsKICAgIGlmIChzaWduVHlwZSAhPT0gJ3JzYScpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCd3cm9uZyBwdWJsaWMga2V5IHR5cGUnKQogICAgfQogIH0KICB2YXIgbGVuID0gcHViLm1vZHVsdXMuYnl0ZUxlbmd0aCgpCiAgdmFyIHBhZCA9IFsgMSBdCiAgdmFyIHBhZE51bSA9IDAKICB3aGlsZSAoaGFzaC5sZW5ndGggKyBwYWQubGVuZ3RoICsgMiA8IGxlbikgewogICAgcGFkLnB1c2goMHhmZikKICAgIHBhZE51bSsrCiAgfQogIHBhZC5wdXNoKDB4MDApCiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCBoYXNoLmxlbmd0aCkgewogICAgcGFkLnB1c2goaGFzaFtpXSkKICB9CiAgcGFkID0gbmV3IEJ1ZmZlcihwYWQpCiAgdmFyIHJlZCA9IEJOLm1vbnQocHViLm1vZHVsdXMpCiAgc2lnID0gbmV3IEJOKHNpZykudG9SZWQocmVkKQoKICBzaWcgPSBzaWcucmVkUG93KG5ldyBCTihwdWIucHVibGljRXhwb25lbnQpKQoKICBzaWcgPSBuZXcgQnVmZmVyKHNpZy5mcm9tUmVkKCkudG9BcnJheSgpKQogIHZhciBvdXQgPSAwCiAgaWYgKHBhZE51bSA8IDgpIHsKICAgIG91dCA9IDEKICB9CiAgbGVuID0gTWF0aC5taW4oc2lnLmxlbmd0aCwgcGFkLmxlbmd0aCkKICBpZiAoc2lnLmxlbmd0aCAhPT0gcGFkLmxlbmd0aCkgewogICAgb3V0ID0gMQogIH0KCiAgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgb3V0IHw9IChzaWdbaV0gXiBwYWRbaV0pCiAgfQogIHJldHVybiBvdXQgPT09IDAKfQoKZnVuY3Rpb24gZWNWZXJpZnkgKHNpZywgaGFzaCwgcHViKSB7CiAgdmFyIGN1cnZlSWQgPSBjdXJ2ZXNbcHViLmRhdGEuYWxnb3JpdGhtLmN1cnZlLmpvaW4oJy4nKV0KICBpZiAoIWN1cnZlSWQpIHRocm93IG5ldyBFcnJvcigndW5rbm93biBjdXJ2ZSAnICsgcHViLmRhdGEuYWxnb3JpdGhtLmN1cnZlLmpvaW4oJy4nKSkKCiAgdmFyIGN1cnZlID0gbmV3IEVDKGN1cnZlSWQpCiAgdmFyIHB1YmtleSA9IHB1Yi5kYXRhLnN1YmplY3RQcml2YXRlS2V5LmRhdGEKCiAgcmV0dXJuIGN1cnZlLnZlcmlmeShoYXNoLCBzaWcsIHB1YmtleSkKfQoKZnVuY3Rpb24gZHNhVmVyaWZ5IChzaWcsIGhhc2gsIHB1YikgewogIHZhciBwID0gcHViLmRhdGEucAogIHZhciBxID0gcHViLmRhdGEucQogIHZhciBnID0gcHViLmRhdGEuZwogIHZhciB5ID0gcHViLmRhdGEucHViX2tleQogIHZhciB1bnBhY2tlZCA9IHBhcnNlS2V5cy5zaWduYXR1cmUuZGVjb2RlKHNpZywgJ2RlcicpCiAgdmFyIHMgPSB1bnBhY2tlZC5zCiAgdmFyIHIgPSB1bnBhY2tlZC5yCiAgY2hlY2tWYWx1ZShzLCBxKQogIGNoZWNrVmFsdWUociwgcSkKICB2YXIgbW9udHAgPSBCTi5tb250KHApCiAgdmFyIHcgPSBzLmludm0ocSkKICB2YXIgdiA9IGcudG9SZWQobW9udHApCiAgICAucmVkUG93KG5ldyBCTihoYXNoKS5tdWwodykubW9kKHEpKQogICAgLmZyb21SZWQoKQogICAgLm11bCgKICAgICAgeS50b1JlZChtb250cCkKICAgICAgICAucmVkUG93KHIubXVsKHcpLm1vZChxKSkKICAgICAgICAuZnJvbVJlZCgpCiAgKS5tb2QocCkubW9kKHEpCiAgcmV0dXJuICF2LmNtcChyKQp9CgpmdW5jdGlvbiBjaGVja1ZhbHVlIChiLCBxKSB7CiAgaWYgKGIuY21wbigwKSA8PSAwKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc2lnJykKICB9CiAgaWYgKGIuY21wKHEpID49IHEpIHsKICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBzaWcnKQogIH0KfQoKbW9kdWxlLmV4cG9ydHMgPSB2ZXJpZnkKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2N1cnZlcyI6NjYsImJuLmpzIjo0MiwiYnVmZmVyIjo3NiwiZWxsaXB0aWMiOjEwMSwicGFyc2UtYXNuMSI6MTM4fV0sNjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDRdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjo0NH1dLDcwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gQmFzZTU4IGVuY29kaW5nL2RlY29kaW5nCi8vIE9yaWdpbmFsbHkgd3JpdHRlbiBieSBNaWtlIEhlYXJuIGZvciBCaXRjb2luSgovLyBDb3B5cmlnaHQgKGMpIDIwMTEgR29vZ2xlIEluYwovLyBQb3J0ZWQgdG8gSmF2YVNjcmlwdCBieSBTdGVmYW4gVGhvbWFzCi8vIE1lcmdlZCBCdWZmZXIgcmVmYWN0b3JpbmdzIGZyb20gYmFzZTU4LW5hdGl2ZSBieSBTdGVwaGVuIFBhaXIKLy8gQ29weXJpZ2h0IChjKSAyMDEzIEJpdFBheSBJbmMKCnZhciBBTFBIQUJFVCA9ICcxMjM0NTY3ODlBQkNERUZHSEpLTE1OUFFSU1RVVldYWVphYmNkZWZnaGlqa21ub3BxcnN0dXZ3eHl6Jwp2YXIgQUxQSEFCRVRfTUFQID0ge30KZm9yKHZhciBpID0gMDsgaSA8IEFMUEhBQkVULmxlbmd0aDsgaSsrKSB7CiAgQUxQSEFCRVRfTUFQW0FMUEhBQkVULmNoYXJBdChpKV0gPSBpCn0KdmFyIEJBU0UgPSA1OAoKZnVuY3Rpb24gZW5jb2RlKGJ1ZmZlcikgewogIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm4gJycKCiAgdmFyIGksIGosIGRpZ2l0cyA9IFswXQogIGZvciAoaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspIHsKICAgIGZvciAoaiA9IDA7IGogPCBkaWdpdHMubGVuZ3RoOyBqKyspIGRpZ2l0c1tqXSA8PD0gOAoKICAgIGRpZ2l0c1swXSArPSBidWZmZXJbaV0KCiAgICB2YXIgY2FycnkgPSAwCiAgICBmb3IgKGogPSAwOyBqIDwgZGlnaXRzLmxlbmd0aDsgKytqKSB7CiAgICAgIGRpZ2l0c1tqXSArPSBjYXJyeQoKICAgICAgY2FycnkgPSAoZGlnaXRzW2pdIC8gQkFTRSkgfCAwCiAgICAgIGRpZ2l0c1tqXSAlPSBCQVNFCiAgICB9CgogICAgd2hpbGUgKGNhcnJ5KSB7CiAgICAgIGRpZ2l0cy5wdXNoKGNhcnJ5ICUgQkFTRSkKCiAgICAgIGNhcnJ5ID0gKGNhcnJ5IC8gQkFTRSkgfCAwCiAgICB9CiAgfQoKICAvLyBkZWFsIHdpdGggbGVhZGluZyB6ZXJvcwogIGZvciAoaSA9IDA7IGJ1ZmZlcltpXSA9PT0gMCAmJiBpIDwgYnVmZmVyLmxlbmd0aCAtIDE7IGkrKykgZGlnaXRzLnB1c2goMCkKCiAgLy8gY29udmVydCBkaWdpdHMgdG8gYSBzdHJpbmcKICB2YXIgc3RyaW5nT3V0cHV0ID0gIiIKICBmb3IgKHZhciBpID0gZGlnaXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICBzdHJpbmdPdXRwdXQgPSBzdHJpbmdPdXRwdXQgKyBBTFBIQUJFVFtkaWdpdHNbaV1dCiAgfQogIHJldHVybiBzdHJpbmdPdXRwdXQKfQoKZnVuY3Rpb24gZGVjb2RlKHN0cmluZykgewogIGlmIChzdHJpbmcubGVuZ3RoID09PSAwKSByZXR1cm4gW10KCiAgdmFyIGksIGosIGJ5dGVzID0gWzBdCiAgZm9yIChpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykgewogICAgdmFyIGMgPSBzdHJpbmdbaV0KICAgIGlmICghKGMgaW4gQUxQSEFCRVRfTUFQKSkgdGhyb3cgbmV3IEVycm9yKCdOb24tYmFzZTU4IGNoYXJhY3RlcicpCgogICAgZm9yIChqID0gMDsgaiA8IGJ5dGVzLmxlbmd0aDsgaisrKSBieXRlc1tqXSAqPSBCQVNFCiAgICBieXRlc1swXSArPSBBTFBIQUJFVF9NQVBbY10KCiAgICB2YXIgY2FycnkgPSAwCiAgICBmb3IgKGogPSAwOyBqIDwgYnl0ZXMubGVuZ3RoOyArK2opIHsKICAgICAgYnl0ZXNbal0gKz0gY2FycnkKCiAgICAgIGNhcnJ5ID0gYnl0ZXNbal0gPj4gOAogICAgICBieXRlc1tqXSAmPSAweGZmCiAgICB9CgogICAgd2hpbGUgKGNhcnJ5KSB7CiAgICAgIGJ5dGVzLnB1c2goY2FycnkgJiAweGZmKQoKICAgICAgY2FycnkgPj49IDgKICAgIH0KICB9CgogIC8vIGRlYWwgd2l0aCBsZWFkaW5nIHplcm9zCiAgZm9yIChpID0gMDsgc3RyaW5nW2ldID09PSAnMScgJiYgaSA8IHN0cmluZy5sZW5ndGggLSAxOyBpKyspIGJ5dGVzLnB1c2goMCkKCiAgcmV0dXJuIGJ5dGVzLnJldmVyc2UoKQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBlbmNvZGU6IGVuY29kZSwKICBkZWNvZGU6IGRlY29kZQp9Cgp9LHt9XSw3MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKJ3VzZSBzdHJpY3QnCgp2YXIgYmFzZTU4ID0gcmVxdWlyZSgnYnM1OCcpCnZhciBjcmVhdGVIYXNoID0gcmVxdWlyZSgnY3JlYXRlLWhhc2gnKQoKLy8gU0hBMjU2KFNIQTI1NihidWZmZXIpKQpmdW5jdGlvbiBzaGEyNTZ4MiAoYnVmZmVyKSB7CiAgdmFyIHRtcCA9IGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShidWZmZXIpLmRpZ2VzdCgpCiAgcmV0dXJuIGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZSh0bXApLmRpZ2VzdCgpCn0KCi8vIEVuY29kZSBhIGJ1ZmZlciBhcyBhIGJhc2U1OC1jaGVjayBlbmNvZGVkIHN0cmluZwpmdW5jdGlvbiBlbmNvZGUgKHBheWxvYWQpIHsKICB2YXIgY2hlY2tzdW0gPSBzaGEyNTZ4MihwYXlsb2FkKQoKICByZXR1cm4gYmFzZTU4LmVuY29kZShCdWZmZXIuY29uY2F0KFsKICAgIHBheWxvYWQsCiAgICBjaGVja3N1bQogIF0sIHBheWxvYWQubGVuZ3RoICsgNCkpCn0KCi8vIERlY29kZSBhIGJhc2U1OC1jaGVjayBlbmNvZGVkIHN0cmluZyB0byBhIGJ1ZmZlcgpmdW5jdGlvbiBkZWNvZGUgKHN0cmluZykgewogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKGJhc2U1OC5kZWNvZGUoc3RyaW5nKSkKCiAgdmFyIHBheWxvYWQgPSBidWZmZXIuc2xpY2UoMCwgLTQpCiAgdmFyIGNoZWNrc3VtID0gYnVmZmVyLnNsaWNlKC00KQogIHZhciBuZXdDaGVja3N1bSA9IHNoYTI1NngyKHBheWxvYWQpCgogIGlmIChjaGVja3N1bVswXSBeIG5ld0NoZWNrc3VtWzBdIHwKICAgICAgY2hlY2tzdW1bMV0gXiBuZXdDaGVja3N1bVsxXSB8CiAgICAgIGNoZWNrc3VtWzJdIF4gbmV3Q2hlY2tzdW1bMl0gfAogICAgICBjaGVja3N1bVszXSBeIG5ld0NoZWNrc3VtWzNdKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY2hlY2tzdW0nKQoKICByZXR1cm4gcGF5bG9hZAp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBlbmNvZGU6IGVuY29kZSwKICBkZWNvZGU6IGRlY29kZQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnM1OCI6NzAsImJ1ZmZlciI6NzYsImNyZWF0ZS1oYXNoIjo4MX1dLDcyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhLCBiKSB7CiAgaWYgKHR5cGVvZiBhLmNvbXBhcmUgPT09ICdmdW5jdGlvbicpIHJldHVybiBhLmNvbXBhcmUoYikKICBpZiAoYSA9PT0gYikgcmV0dXJuIDAKCiAgdmFyIHggPSBhLmxlbmd0aAogIHZhciB5ID0gYi5sZW5ndGgKCiAgdmFyIGkgPSAwCiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpCiAgd2hpbGUgKGkgPCBsZW4pIHsKICAgIGlmIChhW2ldICE9PSBiW2ldKSBicmVhawoKICAgICsraQogIH0KCiAgaWYgKGkgIT09IGxlbikgewogICAgeCA9IGFbaV0KICAgIHkgPSBiW2ldCiAgfQoKICBpZiAoeCA8IHkpIHJldHVybiAtMQogIGlmICh5IDwgeCkgcmV0dXJuIDEKICByZXR1cm4gMAp9CgoKfSx7fV0sNzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cid1c2Ugc3RyaWN0JzsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYSwgYikgewoJaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkgewoJCXRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKTsKCX0KCglpZiAoYSA9PT0gYikgewoJCXJldHVybiB0cnVlOwoJfQoKCWlmICh0eXBlb2YgYS5lcXVhbHMgPT09ICdmdW5jdGlvbicpIHsKCQlyZXR1cm4gYS5lcXVhbHMoYik7Cgl9CgoJaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkgewoJCXJldHVybiBmYWxzZTsKCX0KCglmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKCQlpZiAoYVtpXSAhPT0gYltpXSkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCXJldHVybiB0cnVlOwp9OwoKfSkuY2FsbCh0aGlzLHsiaXNCdWZmZXIiOnJlcXVpcmUoIi4uL2lzLWJ1ZmZlci9pbmRleC5qcyIpfSkKfSx7Ii4uL2lzLWJ1ZmZlci9pbmRleC5qcyI6MTMwfV0sNzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmV2ZXJzZSAoYSkgewogIHZhciBsZW5ndGggPSBhLmxlbmd0aAogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKGxlbmd0aCkKCiAgZm9yICh2YXIgaSA9IDAsIGogPSBsZW5ndGggLSAxOyBpIDwgbGVuZ3RoOyArK2ksIC0taikgewogICAgYnVmZmVyW2ldID0gYVtqXQogIH0KCiAgcmV0dXJuIGJ1ZmZlcgp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3Nn1dLDc1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhvciAoYSwgYikgewogIHZhciBsZW5ndGggPSBNYXRoLm1pbihhLmxlbmd0aCwgYi5sZW5ndGgpCiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIobGVuZ3RoKQoKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CiAgICBidWZmZXJbaV0gPSBhW2ldIF4gYltpXQogIH0KCiAgcmV0dXJuIGJ1ZmZlcgp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3Nn1dLDc2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKiEKICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuCiAqCiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPgogKiBAbGljZW5zZSAgTUlUCiAqLwovKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqLwoKJ3VzZSBzdHJpY3QnCgp2YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJykKdmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0JykKdmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5JykKCmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyCmV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXIKZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwCkJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvbgoKdmFyIHJvb3RQYXJlbnQgPSB7fQoKLyoqCiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6CiAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpCiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNikKICoKICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLAogKiBPcGVyYSAxMS42KywgaU9TIDQuMisuCiAqCiAqIER1ZSB0byB2YXJpb3VzIGJyb3dzZXIgYnVncywgc29tZXRpbWVzIHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24gd2lsbCBiZSB1c2VkIGV2ZW4KICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuCiAqCiAqIE5vdGU6CiAqCiAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsCiAqICAgICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOC4KICoKICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uCiAqCiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mCiAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy4KCiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5CiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LgogKi8KQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkCiAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVAogIDogdHlwZWRBcnJheVN1cHBvcnQoKQoKZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkgewogIHRyeSB7CiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSkKICAgIGFyci5mb28gPSBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9CiAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MiAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZAogICAgICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiYgLy8gY2hyb21lIDktMTAgbGFjayBgc3ViYXJyYXlgCiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWAKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gZmFsc2UKICB9Cn0KCmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkgewogIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVAogICAgPyAweDdmZmZmZmZmCiAgICA6IDB4M2ZmZmZmZmYKfQoKLyoqCiAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgaGF2ZSB0aGVpcgogKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mCiAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHMKICogYW5kIHRoZSBgVWludDhBcnJheWAgbWV0aG9kcy4gU3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXQKICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC4KICoKICogVGhlIGBVaW50OEFycmF5YCBwcm90b3R5cGUgcmVtYWlucyB1bm1vZGlmaWVkLgogKi8KZnVuY3Rpb24gQnVmZmVyIChhcmcpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkgewogICAgLy8gQXZvaWQgZ29pbmcgdGhyb3VnaCBhbiBBcmd1bWVudHNBZGFwdG9yVHJhbXBvbGluZSBpbiB0aGUgY29tbW9uIGNhc2UuCiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHJldHVybiBuZXcgQnVmZmVyKGFyZywgYXJndW1lbnRzWzFdKQogICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnKQogIH0KCiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpcy5sZW5ndGggPSAwCiAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZAogIH0KCiAgLy8gQ29tbW9uIGNhc2UuCiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7CiAgICByZXR1cm4gZnJvbU51bWJlcih0aGlzLCBhcmcpCiAgfQoKICAvLyBTbGlnaHRseSBsZXNzIGNvbW1vbiBjYXNlLgogIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykgewogICAgcmV0dXJuIGZyb21TdHJpbmcodGhpcywgYXJnLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6ICd1dGY4JykKICB9CgogIC8vIFVudXN1YWwuCiAgcmV0dXJuIGZyb21PYmplY3QodGhpcywgYXJnKQp9CgovLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi4KQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikgewogIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlCiAgcmV0dXJuIGFycgp9CgpmdW5jdGlvbiBmcm9tTnVtYmVyICh0aGF0LCBsZW5ndGgpIHsKICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGxlbmd0aCkgfCAwKQogIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgdGhhdFtpXSA9IDAKICAgIH0KICB9CiAgcmV0dXJuIHRoYXQKfQoKZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykgewogIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykgZW5jb2RpbmcgPSAndXRmOCcKCiAgLy8gQXNzdW1wdGlvbjogYnl0ZUxlbmd0aCgpIHJldHVybiB2YWx1ZSBpcyBhbHdheXMgPCBrTWF4TGVuZ3RoLgogIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMAogIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpCgogIHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZykKICByZXR1cm4gdGhhdAp9CgpmdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmplY3QpIHsKICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iamVjdCkpIHJldHVybiBmcm9tQnVmZmVyKHRoYXQsIG9iamVjdCkKCiAgaWYgKGlzQXJyYXkob2JqZWN0KSkgcmV0dXJuIGZyb21BcnJheSh0aGF0LCBvYmplY3QpCgogIGlmIChvYmplY3QgPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbXVzdCBzdGFydCB3aXRoIG51bWJlciwgYnVmZmVyLCBhcnJheSBvciBzdHJpbmcnKQogIH0KCiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgIGlmIChvYmplY3QuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgcmV0dXJuIGZyb21UeXBlZEFycmF5KHRoYXQsIG9iamVjdCkKICAgIH0KICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgewogICAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIG9iamVjdCkKICAgIH0KICB9CgogIGlmIChvYmplY3QubGVuZ3RoKSByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmplY3QpCgogIHJldHVybiBmcm9tSnNvbk9iamVjdCh0aGF0LCBvYmplY3QpCn0KCmZ1bmN0aW9uIGZyb21CdWZmZXIgKHRoYXQsIGJ1ZmZlcikgewogIHZhciBsZW5ndGggPSBjaGVja2VkKGJ1ZmZlci5sZW5ndGgpIHwgMAogIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpCiAgYnVmZmVyLmNvcHkodGhhdCwgMCwgMCwgbGVuZ3RoKQogIHJldHVybiB0aGF0Cn0KCmZ1bmN0aW9uIGZyb21BcnJheSAodGhhdCwgYXJyYXkpIHsKICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMAogIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgewogICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1CiAgfQogIHJldHVybiB0aGF0Cn0KCi8vIER1cGxpY2F0ZSBvZiBmcm9tQXJyYXkoKSB0byBrZWVwIGZyb21BcnJheSgpIG1vbm9tb3JwaGljLgpmdW5jdGlvbiBmcm9tVHlwZWRBcnJheSAodGhhdCwgYXJyYXkpIHsKICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMAogIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpCiAgLy8gVHJ1bmNhdGluZyB0aGUgZWxlbWVudHMgaXMgcHJvYmFibHkgbm90IHdoYXQgcGVvcGxlIGV4cGVjdCBmcm9tIHR5cGVkCiAgLy8gYXJyYXlzIHdpdGggQllURVNfUEVSX0VMRU1FTlQgPiAxIGJ1dCBpdCdzIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3IKICAvLyBvZiB0aGUgb2xkIEJ1ZmZlciBjb25zdHJ1Y3Rvci4KICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7CiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTUKICB9CiAgcmV0dXJuIHRoYXQKfQoKZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSkgewogIGFycmF5LmJ5dGVMZW5ndGggLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlcgoKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZQogICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGFycmF5KQogICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlCiAgfSBlbHNlIHsKICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3MKICAgIHRoYXQgPSBmcm9tVHlwZWRBcnJheSh0aGF0LCBuZXcgVWludDhBcnJheShhcnJheSkpCiAgfQogIHJldHVybiB0aGF0Cn0KCmZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7CiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDAKICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKQogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHsKICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NQogIH0KICByZXR1cm4gdGhhdAp9CgovLyBEZXNlcmlhbGl6ZSB7IHR5cGU6ICdCdWZmZXInLCBkYXRhOiBbMSwyLDMsLi4uXSB9IGludG8gYSBCdWZmZXIgb2JqZWN0LgovLyBSZXR1cm5zIGEgemVyby1sZW5ndGggYnVmZmVyIGZvciBpbnB1dHMgdGhhdCBkb24ndCBjb25mb3JtIHRvIHRoZSBzcGVjLgpmdW5jdGlvbiBmcm9tSnNvbk9iamVjdCAodGhhdCwgb2JqZWN0KSB7CiAgdmFyIGFycmF5CiAgdmFyIGxlbmd0aCA9IDAKCiAgaWYgKG9iamVjdC50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iamVjdC5kYXRhKSkgewogICAgYXJyYXkgPSBvYmplY3QuZGF0YQogICAgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMAogIH0KICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKQoKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7CiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTUKICB9CiAgcmV0dXJuIHRoYXQKfQoKaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZQogIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5CiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICYmCiAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikgewogICAgLy8gRml4IHN1YmFycmF5KCkgaW4gRVMyMDE2LiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvOTcKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIsIFN5bWJvbC5zcGVjaWVzLCB7CiAgICAgIHZhbHVlOiBudWxsLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0pCiAgfQp9IGVsc2UgewogIC8vIHByZS1zZXQgZm9yIHZhbHVlcyB0aGF0IG1heSBleGlzdCBpbiB0aGUgZnV0dXJlCiAgQnVmZmVyLnByb3RvdHlwZS5sZW5ndGggPSB1bmRlZmluZWQKICBCdWZmZXIucHJvdG90eXBlLnBhcmVudCA9IHVuZGVmaW5lZAp9CgpmdW5jdGlvbiBhbGxvY2F0ZSAodGhhdCwgbGVuZ3RoKSB7CiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2UKICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpCiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGUKICB9IGVsc2UgewogICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzcwogICAgdGhhdC5sZW5ndGggPSBsZW5ndGgKICB9CgogIHZhciBmcm9tUG9vbCA9IGxlbmd0aCAhPT0gMCAmJiBsZW5ndGggPD0gQnVmZmVyLnBvb2xTaXplID4+PiAxCiAgaWYgKGZyb21Qb29sKSB0aGF0LnBhcmVudCA9IHJvb3RQYXJlbnQKCiAgcmV0dXJuIHRoYXQKfQoKZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7CiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aGAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlbgogIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKQogIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpCiAgfQogIHJldHVybiBsZW5ndGggfCAwCn0KCmZ1bmN0aW9uIFNsb3dCdWZmZXIgKHN1YmplY3QsIGVuY29kaW5nKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNsb3dCdWZmZXIpKSByZXR1cm4gbmV3IFNsb3dCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcpCgogIHZhciBidWYgPSBuZXcgQnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKQogIGRlbGV0ZSBidWYucGFyZW50CiAgcmV0dXJuIGJ1Zgp9CgpCdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikgewogIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpCn0KCkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKQogIH0KCiAgaWYgKGEgPT09IGIpIHJldHVybiAwCgogIHZhciB4ID0gYS5sZW5ndGgKICB2YXIgeSA9IGIubGVuZ3RoCgogIHZhciBpID0gMAogIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KQogIHdoaWxlIChpIDwgbGVuKSB7CiAgICBpZiAoYVtpXSAhPT0gYltpXSkgYnJlYWsKCiAgICArK2kKICB9CgogIGlmIChpICE9PSBsZW4pIHsKICAgIHggPSBhW2ldCiAgICB5ID0gYltpXQogIH0KCiAgaWYgKHggPCB5KSByZXR1cm4gLTEKICBpZiAoeSA8IHgpIHJldHVybiAxCiAgcmV0dXJuIDAKfQoKQnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykgewogIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7CiAgICBjYXNlICdoZXgnOgogICAgY2FzZSAndXRmOCc6CiAgICBjYXNlICd1dGYtOCc6CiAgICBjYXNlICdhc2NpaSc6CiAgICBjYXNlICdiaW5hcnknOgogICAgY2FzZSAnYmFzZTY0JzoKICAgIGNhc2UgJ3Jhdyc6CiAgICBjYXNlICd1Y3MyJzoKICAgIGNhc2UgJ3Vjcy0yJzoKICAgIGNhc2UgJ3V0ZjE2bGUnOgogICAgY2FzZSAndXRmLTE2bGUnOgogICAgICByZXR1cm4gdHJ1ZQogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIGZhbHNlCiAgfQp9CgpCdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHsKICBpZiAoIWlzQXJyYXkobGlzdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2xpc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzLicpCgogIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIG5ldyBCdWZmZXIoMCkKICB9CgogIHZhciBpCiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7CiAgICBsZW5ndGggPSAwCiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGgKICAgIH0KICB9CgogIHZhciBidWYgPSBuZXcgQnVmZmVyKGxlbmd0aCkKICB2YXIgcG9zID0gMAogIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgaXRlbSA9IGxpc3RbaV0KICAgIGl0ZW0uY29weShidWYsIHBvcykKICAgIHBvcyArPSBpdGVtLmxlbmd0aAogIH0KICByZXR1cm4gYnVmCn0KCmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHsKICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHN0cmluZyA9ICcnICsgc3RyaW5nCgogIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoCiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDAKCiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uCiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2UKICBmb3IgKDs7KSB7CiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CiAgICAgIGNhc2UgJ2FzY2lpJzoKICAgICAgY2FzZSAnYmluYXJ5JzoKICAgICAgLy8gRGVwcmVjYXRlZAogICAgICBjYXNlICdyYXcnOgogICAgICBjYXNlICdyYXdzJzoKICAgICAgICByZXR1cm4gbGVuCiAgICAgIGNhc2UgJ3V0ZjgnOgogICAgICBjYXNlICd1dGYtOCc6CiAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoCiAgICAgIGNhc2UgJ3VjczInOgogICAgICBjYXNlICd1Y3MtMic6CiAgICAgIGNhc2UgJ3V0ZjE2bGUnOgogICAgICBjYXNlICd1dGYtMTZsZSc6CiAgICAgICAgcmV0dXJuIGxlbiAqIDIKICAgICAgY2FzZSAnaGV4JzoKICAgICAgICByZXR1cm4gbGVuID4+PiAxCiAgICAgIGNhc2UgJ2Jhc2U2NCc6CiAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGgKICAgICAgZGVmYXVsdDoKICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOAogICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkKICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWUKICAgIH0KICB9Cn0KQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoCgpmdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7CiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2UKCiAgc3RhcnQgPSBzdGFydCB8IDAKICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPT09IEluZmluaXR5ID8gdGhpcy5sZW5ndGggOiBlbmQgfCAwCgogIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnCiAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwCiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aAogIGlmIChlbmQgPD0gc3RhcnQpIHJldHVybiAnJwoKICB3aGlsZSAodHJ1ZSkgewogICAgc3dpdGNoIChlbmNvZGluZykgewogICAgICBjYXNlICdoZXgnOgogICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgY2FzZSAndXRmOCc6CiAgICAgIGNhc2UgJ3V0Zi04JzoKICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgogICAgICBjYXNlICdhc2NpaSc6CiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCiAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgICAgcmV0dXJuIGJpbmFyeVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgogICAgICBjYXNlICdiYXNlNjQnOgogICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgY2FzZSAndWNzMic6CiAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgogICAgICBkZWZhdWx0OgogICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKQogICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKCkKICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWUKICAgIH0KICB9Cn0KCi8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0Ci8vIEJ1ZmZlciBpbnN0YW5jZXMuCkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZQoKQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHsKICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwCiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKQogIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKQp9CgpCdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJykKICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWUKICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDAKfQoKQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7CiAgdmFyIHN0ciA9ICcnCiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMKICBpZiAodGhpcy5sZW5ndGggPiAwKSB7CiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKQogICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJwogIH0KICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+Jwp9CgpCdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChiKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKQogIGlmICh0aGlzID09PSBiKSByZXR1cm4gMAogIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKQp9CgpCdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQpIHsKICBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmCiAgZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDAKICBieXRlT2Zmc2V0ID4+PSAwCgogIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xCiAgaWYgKGJ5dGVPZmZzZXQgPj0gdGhpcy5sZW5ndGgpIHJldHVybiAtMQoKICAvLyBOZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyCiAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gTWF0aC5tYXgodGhpcy5sZW5ndGggKyBieXRlT2Zmc2V0LCAwKQoKICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHsKICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSByZXR1cm4gLTEgLy8gc3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcgYWx3YXlzIGZhaWxzCiAgICByZXR1cm4gU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KQogIH0KICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHsKICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0KQogIH0KICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KQogICAgfQogICAgcmV0dXJuIGFycmF5SW5kZXhPZih0aGlzLCBbIHZhbCBdLCBieXRlT2Zmc2V0KQogIH0KCiAgZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCkgewogICAgdmFyIGZvdW5kSW5kZXggPSAtMQogICAgZm9yICh2YXIgaSA9IDA7IGJ5dGVPZmZzZXQgKyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChhcnJbYnl0ZU9mZnNldCArIGldID09PSB2YWxbZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXhdKSB7CiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaQogICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbC5sZW5ndGgpIHJldHVybiBieXRlT2Zmc2V0ICsgZm91bmRJbmRleAogICAgICB9IGVsc2UgewogICAgICAgIGZvdW5kSW5kZXggPSAtMQogICAgICB9CiAgICB9CiAgICByZXR1cm4gLTEKICB9CgogIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpCn0KCmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwCiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXQKICBpZiAoIWxlbmd0aCkgewogICAgbGVuZ3RoID0gcmVtYWluaW5nCiAgfSBlbHNlIHsKICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpCiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7CiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZwogICAgfQogIH0KCiAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHMKICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aAogIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpCgogIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7CiAgICBsZW5ndGggPSBzdHJMZW4gLyAyCiAgfQogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpCiAgICBpZiAoaXNOYU4ocGFyc2VkKSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKQogICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkCiAgfQogIHJldHVybiBpCn0KCmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKfQoKZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCn0KCmZ1bmN0aW9uIGJpbmFyeVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCn0KCmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCn0KCmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykgewogIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpCiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7CiAgICBlbmNvZGluZyA9ICd1dGY4JwogICAgbGVuZ3RoID0gdGhpcy5sZW5ndGgKICAgIG9mZnNldCA9IDAKICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZykKICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7CiAgICBlbmNvZGluZyA9IG9mZnNldAogICAgbGVuZ3RoID0gdGhpcy5sZW5ndGgKICAgIG9mZnNldCA9IDAKICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKQogIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkgewogICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHsKICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMAogICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCcKICAgIH0gZWxzZSB7CiAgICAgIGVuY29kaW5nID0gbGVuZ3RoCiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZAogICAgfQogIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTMKICB9IGVsc2UgewogICAgdmFyIHN3YXAgPSBlbmNvZGluZwogICAgZW5jb2RpbmcgPSBvZmZzZXQKICAgIG9mZnNldCA9IGxlbmd0aCB8IDAKICAgIGxlbmd0aCA9IHN3YXAKICB9CgogIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldAogIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZwoKICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJykKICB9CgogIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnCgogIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlCiAgZm9yICg7OykgewogICAgc3dpdGNoIChlbmNvZGluZykgewogICAgICBjYXNlICdoZXgnOgogICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgY2FzZSAndXRmOCc6CiAgICAgIGNhc2UgJ3V0Zi04JzoKICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICBjYXNlICdhc2NpaSc6CiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCiAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgICAgcmV0dXJuIGJpbmFyeVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICBjYXNlICdiYXNlNjQnOgogICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlCiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICBjYXNlICd1Y3MyJzoKICAgICAgY2FzZSAndWNzLTInOgogICAgICBjYXNlICd1dGYxNmxlJzoKICAgICAgY2FzZSAndXRmLTE2bGUnOgogICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpCiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKQogICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZQogICAgfQogIH0KfQoKQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkgewogIHJldHVybiB7CiAgICB0eXBlOiAnQnVmZmVyJywKICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKQogIH0KfQoKZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHsKICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpCiAgfSBlbHNlIHsKICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpCiAgfQp9CgpmdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCkKICB2YXIgcmVzID0gW10KCiAgdmFyIGkgPSBzdGFydAogIHdoaWxlIChpIDwgZW5kKSB7CiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldCiAgICB2YXIgY29kZVBvaW50ID0gbnVsbAogICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0CiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gMwogICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKSA/IDIKICAgICAgOiAxCgogICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkgewogICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50CgogICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkgewogICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGUKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV0KICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7CiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKQogICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHsKICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV0KICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl0KICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewogICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRikKICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkgewogICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXQogICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXQogICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM10KICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7CiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKQogICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHsKICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHsKICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYQogICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlCiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRAogICAgICBieXRlc1BlclNlcXVlbmNlID0gMQogICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHsKICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSkKICAgICAgY29kZVBvaW50IC09IDB4MTAwMDAKICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKQogICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRgogICAgfQoKICAgIHJlcy5wdXNoKGNvZGVQb2ludCkKICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZQogIH0KCiAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpCn0KCi8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aAovLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuCi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHkKdmFyIE1BWF9BUkdVTUVOVFNfTEVOR1RIID0gMHgxMDAwCgpmdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHsKICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGgKICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7CiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKCkKICB9CgogIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZCIuCiAgdmFyIHJlcyA9ICcnCiAgdmFyIGkgPSAwCiAgd2hpbGUgKGkgPCBsZW4pIHsKICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KAogICAgICBTdHJpbmcsCiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkKICAgICkKICB9CiAgcmV0dXJuIHJlcwp9CgpmdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICB2YXIgcmV0ID0gJycKICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpCgogIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7CiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKQogIH0KICByZXR1cm4gcmV0Cn0KCmZ1bmN0aW9uIGJpbmFyeVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICB2YXIgcmV0ID0gJycKICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpCgogIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7CiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pCiAgfQogIHJldHVybiByZXQKfQoKZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogIHZhciBsZW4gPSBidWYubGVuZ3RoCgogIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDAKICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuCgogIHZhciBvdXQgPSAnJwogIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7CiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKQogIH0KICByZXR1cm4gb3V0Cn0KCmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpCiAgdmFyIHJlcyA9ICcnCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikgewogICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpCiAgfQogIHJldHVybiByZXMKfQoKQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7CiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoCiAgc3RhcnQgPSB+fnN0YXJ0CiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZAoKICBpZiAoc3RhcnQgPCAwKSB7CiAgICBzdGFydCArPSBsZW4KICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMAogIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHsKICAgIHN0YXJ0ID0gbGVuCiAgfQoKICBpZiAoZW5kIDwgMCkgewogICAgZW5kICs9IGxlbgogICAgaWYgKGVuZCA8IDApIGVuZCA9IDAKICB9IGVsc2UgaWYgKGVuZCA+IGxlbikgewogICAgZW5kID0gbGVuCiAgfQoKICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0CgogIHZhciBuZXdCdWYKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCkKICAgIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlCiAgfSBlbHNlIHsKICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0CiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyBpKyspIHsKICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdCiAgICB9CiAgfQoKICBpZiAobmV3QnVmLmxlbmd0aCkgbmV3QnVmLnBhcmVudCA9IHRoaXMucGFyZW50IHx8IHRoaXMKCiAgcmV0dXJuIG5ld0J1Zgp9CgovKgogKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy4KICovCmZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7CiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JykKICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCkKCiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XQogIHZhciBtdWwgPSAxCiAgdmFyIGkgPSAwCiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsCiAgfQoKICByZXR1cm4gdmFsCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgewogICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCkKICB9CgogIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0KICB2YXIgbXVsID0gMQogIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bAogIH0KCiAgcmV0dXJuIHZhbAp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuIHRoaXNbb2Zmc2V0XQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCkKICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV0KfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKQoKICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHwKICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfAogICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICsKICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCiAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICsKICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfAogICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfAogICAgdGhpc1tvZmZzZXQgKyAzXSkKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCkKCiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XQogIHZhciBtdWwgPSAxCiAgdmFyIGkgPSAwCiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsCiAgfQogIG11bCAqPSAweDgwCgogIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpCgogIHJldHVybiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkUgPSBmdW5jdGlvbiByZWFkSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCkKCiAgdmFyIGkgPSBieXRlTGVuZ3RoCiAgdmFyIG11bCA9IDEKICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldCiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWldICogbXVsCiAgfQogIG11bCAqPSAweDgwCgogIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpCgogIHJldHVybiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aCkKICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pCiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpCiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpCiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbAp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKQogIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KQogIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCiAgcmV0dXJuICh0aGlzW29mZnNldF0pIHwKICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8CiAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNCkKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHwKICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8CiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8CiAgICAodGhpc1tvZmZzZXQgKyAzXSkKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNCkKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKQogIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOCkKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKQogIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpCn0KCmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdidWZmZXIgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpCiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpCiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKQp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpLCAwKQoKICB2YXIgbXVsID0gMQogIHZhciBpID0gMAogIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRgogIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkYKICB9CgogIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApCgogIHZhciBpID0gYnl0ZUxlbmd0aCAtIDEKICB2YXIgbXVsID0gMQogIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkYKICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRgogIH0KCiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKQogIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSkKICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQogIHJldHVybiBvZmZzZXQgKyAxCn0KCmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikgewogIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxCiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7IGkrKykgewogICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj4KICAgICAgKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkgKiA4CiAgfQp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMCkKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKQogIH0KICByZXR1cm4gb2Zmc2V0ICsgMgp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMCkKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOCkKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDIKfQoKZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MzIgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7CiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxCiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7IGkrKykgewogICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlID4+PiAobGl0dGxlRW5kaWFuID8gaSA6IDMgLSBpKSAqIDgpICYgMHhmZgogIH0KfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpCiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNikKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpCiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKQogIH0KICByZXR1cm4gb2Zmc2V0ICsgNAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KQogICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpCiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KQogICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpCiAgfSBlbHNlIHsKICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKQogIH0KICByZXR1cm4gb2Zmc2V0ICsgNAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIHsKICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSkKCiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdCkKICB9CgogIHZhciBpID0gMAogIHZhciBtdWwgPSAxCiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwCiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGCiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkYKICB9CgogIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgewogICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKQoKICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KQogIH0KCiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMQogIHZhciBtdWwgPSAxCiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwCiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRgogIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRgogIH0KCiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApCiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKQogIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMQogIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCiAgcmV0dXJuIG9mZnNldCArIDEKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpCiAgfSBlbHNlIHsKICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpCiAgfQogIHJldHVybiBvZmZzZXQgKyAyCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMCkKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOCkKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDIKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQogICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCkKICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KQogICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpCiAgfSBlbHNlIHsKICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpCiAgfQogIHJldHVybiBvZmZzZXQgKyA0Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKQogIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNCkKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KQogICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOCkKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDQKfQoKZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHsKICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpCiAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKQp9CgpmdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSB7CiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOCkKICB9CiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpCiAgcmV0dXJuIG9mZnNldCArIDQKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydCkKfQoKZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIHsKICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpCiAgfQogIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KQogIHJldHVybiBvZmZzZXQgKyA4Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KQp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpCn0KCi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aCkKQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkgewogIGlmICghc3RhcnQpIHN0YXJ0ID0gMAogIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGgKICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoCiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwCiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0CgogIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZQogIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMAogIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMAoKICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zCiAgaWYgKHRhcmdldFN0YXJ0IDwgMCkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKQogIH0KICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpCiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpCgogIC8vIEFyZSB3ZSBvb2I/CiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aAogIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkgewogICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnQKICB9CgogIHZhciBsZW4gPSBlbmQgLSBzdGFydAogIHZhciBpCgogIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkgewogICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kCiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkgewogICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XQogICAgfQogIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnQKICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XQogICAgfQogIH0gZWxzZSB7CiAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbCgKICAgICAgdGFyZ2V0LAogICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksCiAgICAgIHRhcmdldFN0YXJ0CiAgICApCiAgfQoKICByZXR1cm4gbGVuCn0KCi8vIGZpbGwodmFsdWUsIHN0YXJ0PTAsIGVuZD1idWZmZXIubGVuZ3RoKQpCdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWx1ZSwgc3RhcnQsIGVuZCkgewogIGlmICghdmFsdWUpIHZhbHVlID0gMAogIGlmICghc3RhcnQpIHN0YXJ0ID0gMAogIGlmICghZW5kKSBlbmQgPSB0aGlzLmxlbmd0aAoKICBpZiAoZW5kIDwgc3RhcnQpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgPCBzdGFydCcpCgogIC8vIEZpbGwgMCBieXRlczsgd2UncmUgZG9uZQogIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4KICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybgoKICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc3RhcnQgb3V0IG9mIGJvdW5kcycpCiAgaWYgKGVuZCA8IDAgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgb3V0IG9mIGJvdW5kcycpCgogIHZhciBpCiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHsKICAgICAgdGhpc1tpXSA9IHZhbHVlCiAgICB9CiAgfSBlbHNlIHsKICAgIHZhciBieXRlcyA9IHV0ZjhUb0J5dGVzKHZhbHVlLnRvU3RyaW5nKCkpCiAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoCiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7CiAgICAgIHRoaXNbaV0gPSBieXRlc1tpICUgbGVuXQogICAgfQogIH0KCiAgcmV0dXJuIHRoaXMKfQoKLy8gSEVMUEVSIEZVTkNUSU9OUwovLyA9PT09PT09PT09PT09PT09Cgp2YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXC8wLTlBLVphLXotX10vZwoKZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikgewogIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcbiBhbmQgXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3QKICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpCiAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJwogIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnCiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90CiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7CiAgICBzdHIgPSBzdHIgKyAnPScKICB9CiAgcmV0dXJuIHN0cgp9CgpmdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHsKICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpCiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXHMrfFxzKyQvZywgJycpCn0KCmZ1bmN0aW9uIHRvSGV4IChuKSB7CiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpCiAgcmV0dXJuIG4udG9TdHJpbmcoMTYpCn0KCmZ1bmN0aW9uIHV0ZjhUb0J5dGVzIChzdHJpbmcsIHVuaXRzKSB7CiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eQogIHZhciBjb2RlUG9pbnQKICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aAogIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbAogIHZhciBieXRlcyA9IFtdCgogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpCgogICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudAogICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHsKICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWQKICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7CiAgICAgICAgLy8gbm8gbGVhZCB5ZXQKICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7CiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsCiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCkKICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7CiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkCiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCkKICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgfQoKICAgICAgICAvLyB2YWxpZCBsZWFkCiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludAoKICAgICAgICBjb250aW51ZQogICAgICB9CgogICAgICAvLyAyIGxlYWRzIGluIGEgcm93CiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHsKICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCkKICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50CiAgICAgICAgY29udGludWUKICAgICAgfQoKICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXIKICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMAogICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7CiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWQKICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpCiAgICB9CgogICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGwKCiAgICAvLyBlbmNvZGUgdXRmOAogICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHsKICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrCiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KQogICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkgewogICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWsKICAgICAgYnl0ZXMucHVzaCgKICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCwKICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MAogICAgICApCiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHsKICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrCiAgICAgIGJ5dGVzLnB1c2goCiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsCiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLAogICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCiAgICAgICkKICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHsKICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrCiAgICAgIGJ5dGVzLnB1c2goCiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLAogICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCwKICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsCiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODAKICAgICAgKQogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKQogICAgfQogIH0KCiAgcmV0dXJuIGJ5dGVzCn0KCmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7CiAgdmFyIGJ5dGVBcnJheSA9IFtdCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsKICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLgogICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKQogIH0KICByZXR1cm4gYnl0ZUFycmF5Cn0KCmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7CiAgdmFyIGMsIGhpLCBsbwogIHZhciBieXRlQXJyYXkgPSBbXQogIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWsKCiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSkKICAgIGhpID0gYyA+PiA4CiAgICBsbyA9IGMgJSAyNTYKICAgIGJ5dGVBcnJheS5wdXNoKGxvKQogICAgYnl0ZUFycmF5LnB1c2goaGkpCiAgfQoKICByZXR1cm4gYnl0ZUFycmF5Cn0KCmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikgewogIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSkKfQoKZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVhawogICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldCiAgfQogIHJldHVybiBpCn0KCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHsiYmFzZTY0LWpzIjoxNiwiaWVlZTc1NCI6MTI3LCJpc2FycmF5Ijo3N31dLDc3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7Cgptb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikgewogIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJzsKfTsKCn0se31dLDc4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnc3RyZWFtJykuVHJhbnNmb3JtCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2RlcicpLlN0cmluZ0RlY29kZXIKbW9kdWxlLmV4cG9ydHMgPSBDaXBoZXJCYXNlCmluaGVyaXRzKENpcGhlckJhc2UsIFRyYW5zZm9ybSkKZnVuY3Rpb24gQ2lwaGVyQmFzZSAoaGFzaE1vZGUpIHsKICBUcmFuc2Zvcm0uY2FsbCh0aGlzKQogIHRoaXMuaGFzaE1vZGUgPSB0eXBlb2YgaGFzaE1vZGUgPT09ICdzdHJpbmcnCiAgaWYgKHRoaXMuaGFzaE1vZGUpIHsKICAgIHRoaXNbaGFzaE1vZGVdID0gdGhpcy5fZmluYWxPckRpZ2VzdAogIH0gZWxzZSB7CiAgICB0aGlzLmZpbmFsID0gdGhpcy5fZmluYWxPckRpZ2VzdAogIH0KICB0aGlzLl9kZWNvZGVyID0gbnVsbAogIHRoaXMuX2VuY29kaW5nID0gbnVsbAp9CkNpcGhlckJhc2UucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhLCBpbnB1dEVuYywgb3V0cHV0RW5jKSB7CiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykgewogICAgZGF0YSA9IG5ldyBCdWZmZXIoZGF0YSwgaW5wdXRFbmMpCiAgfQogIHZhciBvdXREYXRhID0gdGhpcy5fdXBkYXRlKGRhdGEpCiAgaWYgKHRoaXMuaGFzaE1vZGUpIHsKICAgIHJldHVybiB0aGlzCiAgfQogIGlmIChvdXRwdXRFbmMpIHsKICAgIG91dERhdGEgPSB0aGlzLl90b1N0cmluZyhvdXREYXRhLCBvdXRwdXRFbmMpCiAgfQogIHJldHVybiBvdXREYXRhCn0KCkNpcGhlckJhc2UucHJvdG90eXBlLnNldEF1dG9QYWRkaW5nID0gZnVuY3Rpb24gKCkge30KCkNpcGhlckJhc2UucHJvdG90eXBlLmdldEF1dGhUYWcgPSBmdW5jdGlvbiAoKSB7CiAgdGhyb3cgbmV3IEVycm9yKCd0cnlpbmcgdG8gZ2V0IGF1dGggdGFnIGluIHVuc3VwcG9ydGVkIHN0YXRlJykKfQoKQ2lwaGVyQmFzZS5wcm90b3R5cGUuc2V0QXV0aFRhZyA9IGZ1bmN0aW9uICgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ3RyeWluZyB0byBzZXQgYXV0aCB0YWcgaW4gdW5zdXBwb3J0ZWQgc3RhdGUnKQp9CgpDaXBoZXJCYXNlLnByb3RvdHlwZS5zZXRBQUQgPSBmdW5jdGlvbiAoKSB7CiAgdGhyb3cgbmV3IEVycm9yKCd0cnlpbmcgdG8gc2V0IGFhZCBpbiB1bnN1cHBvcnRlZCBzdGF0ZScpCn0KCkNpcGhlckJhc2UucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoZGF0YSwgXywgbmV4dCkgewogIHZhciBlcnIKICB0cnkgewogICAgaWYgKHRoaXMuaGFzaE1vZGUpIHsKICAgICAgdGhpcy5fdXBkYXRlKGRhdGEpCiAgICB9IGVsc2UgewogICAgICB0aGlzLnB1c2godGhpcy5fdXBkYXRlKGRhdGEpKQogICAgfQogIH0gY2F0Y2ggKGUpIHsKICAgIGVyciA9IGUKICB9IGZpbmFsbHkgewogICAgbmV4dChlcnIpCiAgfQp9CkNpcGhlckJhc2UucHJvdG90eXBlLl9mbHVzaCA9IGZ1bmN0aW9uIChkb25lKSB7CiAgdmFyIGVycgogIHRyeSB7CiAgICB0aGlzLnB1c2godGhpcy5fZmluYWwoKSkKICB9IGNhdGNoIChlKSB7CiAgICBlcnIgPSBlCiAgfSBmaW5hbGx5IHsKICAgIGRvbmUoZXJyKQogIH0KfQpDaXBoZXJCYXNlLnByb3RvdHlwZS5fZmluYWxPckRpZ2VzdCA9IGZ1bmN0aW9uIChvdXRwdXRFbmMpIHsKICB2YXIgb3V0RGF0YSA9IHRoaXMuX2ZpbmFsKCkgfHwgbmV3IEJ1ZmZlcignJykKICBpZiAob3V0cHV0RW5jKSB7CiAgICBvdXREYXRhID0gdGhpcy5fdG9TdHJpbmcob3V0RGF0YSwgb3V0cHV0RW5jLCB0cnVlKQogIH0KICByZXR1cm4gb3V0RGF0YQp9CgpDaXBoZXJCYXNlLnByb3RvdHlwZS5fdG9TdHJpbmcgPSBmdW5jdGlvbiAodmFsdWUsIGVuYywgZmluYWwpIHsKICBpZiAoIXRoaXMuX2RlY29kZXIpIHsKICAgIHRoaXMuX2RlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpCiAgICB0aGlzLl9lbmNvZGluZyA9IGVuYwogIH0KICBpZiAodGhpcy5fZW5jb2RpbmcgIT09IGVuYykgewogICAgdGhyb3cgbmV3IEVycm9yKCdjYW5cJ3Qgc3dpdGNoIGVuY29kaW5ncycpCiAgfQogIHZhciBvdXQgPSB0aGlzLl9kZWNvZGVyLndyaXRlKHZhbHVlKQogIGlmIChmaW5hbCkgewogICAgb3V0ICs9IHRoaXMuX2RlY29kZXIuZW5kKCkKICB9CiAgcmV0dXJuIG91dAp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3NiwiaW5oZXJpdHMiOjEyOSwic3RyZWFtIjoxNzEsInN0cmluZ19kZWNvZGVyIjoxNzJ9XSw3OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuCi8vCi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKLy8gIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwovLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQKLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlCi8vIGZvbGxvd2luZyBjb25kaXRpb25zOgovLwovLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZAovLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KLy8KLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MKLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgovLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOCi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLAovLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRQovLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoKLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgCi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLgoKZnVuY3Rpb24gaXNBcnJheShhcmcpIHsKICBpZiAoQXJyYXkuaXNBcnJheSkgewogICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJnKTsKICB9CiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7Cn0KZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTsKCmZ1bmN0aW9uIGlzQm9vbGVhbihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nOwp9CmV4cG9ydHMuaXNCb29sZWFuID0gaXNCb29sZWFuOwoKZnVuY3Rpb24gaXNOdWxsKGFyZykgewogIHJldHVybiBhcmcgPT09IG51bGw7Cn0KZXhwb3J0cy5pc051bGwgPSBpc051bGw7CgpmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHsKICByZXR1cm4gYXJnID09IG51bGw7Cn0KZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkOwoKZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInOwp9CmV4cG9ydHMuaXNOdW1iZXIgPSBpc051bWJlcjsKCmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJzsKfQpleHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7CgpmdW5jdGlvbiBpc1N5bWJvbChhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7Cn0KZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sOwoKZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwOwp9CmV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDsKCmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7CiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7Cn0KZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwOwoKZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDsKfQpleHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7CgpmdW5jdGlvbiBpc0RhdGUoZCkgewogIHJldHVybiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nOwp9CmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlOwoKZnVuY3Rpb24gaXNFcnJvcihlKSB7CiAgcmV0dXJuIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpOwp9CmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7CgpmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nOwp9CmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247CgpmdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHsKICByZXR1cm4gYXJnID09PSBudWxsIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbAogICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJzsKfQpleHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7CgpleHBvcnRzLmlzQnVmZmVyID0gQnVmZmVyLmlzQnVmZmVyOwoKZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykgewogIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7Cn0KCn0pLmNhbGwodGhpcyx7ImlzQnVmZmVyIjpyZXF1aXJlKCIuLi8uLi9pcy1idWZmZXIvaW5kZXguanMiKX0pCn0seyIuLi8uLi9pcy1idWZmZXIvaW5kZXguanMiOjEzMH1dLDgwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCdlbGxpcHRpYycpOwp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFQ0RIKGN1cnZlKSB7CglyZXR1cm4gbmV3IEVDREgoY3VydmUpOwp9OwoKdmFyIGFsaWFzZXMgPSB7CglzZWNwMjU2azE6IHsKCQluYW1lOiAnc2VjcDI1NmsxJywKCQlieXRlTGVuZ3RoOiAzMgoJfSwKCXNlY3AyMjRyMTogewoJCW5hbWU6ICdwMjI0JywKCQlieXRlTGVuZ3RoOiAyOAoJfSwKCXByaW1lMjU2djE6IHsKCQluYW1lOiAncDI1NicsCgkJYnl0ZUxlbmd0aDogMzIKCX0sCglwcmltZTE5MnYxOiB7CgkJbmFtZTogJ3AxOTInLAoJCWJ5dGVMZW5ndGg6IDI0Cgl9LAoJZWQyNTUxOTogewoJCW5hbWU6ICdlZDI1NTE5JywKCQlieXRlTGVuZ3RoOiAzMgoJfSwKCXNlY3AzODRyMTogewoJCW5hbWU6ICdwMzg0JywKCQlieXRlTGVuZ3RoOiA0OAoJfSwKCXNlY3A1MjFyMTogewoJCW5hbWU6ICdwNTIxJywKCQlieXRlTGVuZ3RoOiA2NgoJfQp9OwoKYWxpYXNlcy5wMjI0ID0gYWxpYXNlcy5zZWNwMjI0cjE7CmFsaWFzZXMucDI1NiA9IGFsaWFzZXMuc2VjcDI1NnIxID0gYWxpYXNlcy5wcmltZTI1NnYxOwphbGlhc2VzLnAxOTIgPSBhbGlhc2VzLnNlY3AxOTJyMSA9IGFsaWFzZXMucHJpbWUxOTJ2MTsKYWxpYXNlcy5wMzg0ID0gYWxpYXNlcy5zZWNwMzg0cjE7CmFsaWFzZXMucDUyMSA9IGFsaWFzZXMuc2VjcDUyMXIxOwoKZnVuY3Rpb24gRUNESChjdXJ2ZSkgewoJdGhpcy5jdXJ2ZVR5cGUgPSBhbGlhc2VzW2N1cnZlXTsKCWlmICghdGhpcy5jdXJ2ZVR5cGUgKSB7CgkJdGhpcy5jdXJ2ZVR5cGUgPSB7CgkJCW5hbWU6IGN1cnZlCgkJfTsKCX0KCXRoaXMuY3VydmUgPSBuZXcgZWxsaXB0aWMuZWModGhpcy5jdXJ2ZVR5cGUubmFtZSk7Cgl0aGlzLmtleXMgPSB2b2lkIDA7Cn0KCkVDREgucHJvdG90eXBlLmdlbmVyYXRlS2V5cyA9IGZ1bmN0aW9uIChlbmMsIGZvcm1hdCkgewoJdGhpcy5rZXlzID0gdGhpcy5jdXJ2ZS5nZW5LZXlQYWlyKCk7CglyZXR1cm4gdGhpcy5nZXRQdWJsaWNLZXkoZW5jLCBmb3JtYXQpOwp9OwoKRUNESC5wcm90b3R5cGUuY29tcHV0ZVNlY3JldCA9IGZ1bmN0aW9uIChvdGhlciwgaW5lbmMsIGVuYykgewoJaW5lbmMgPSBpbmVuYyB8fCAndXRmOCc7CglpZiAoIUJ1ZmZlci5pc0J1ZmZlcihvdGhlcikpIHsKCQlvdGhlciA9IG5ldyBCdWZmZXIob3RoZXIsIGluZW5jKTsKCX0KCXZhciBvdGhlclB1YiA9IHRoaXMuY3VydmUua2V5RnJvbVB1YmxpYyhvdGhlcikuZ2V0UHVibGljKCk7Cgl2YXIgb3V0ID0gb3RoZXJQdWIubXVsKHRoaXMua2V5cy5nZXRQcml2YXRlKCkpLmdldFgoKTsKCXJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZShvdXQsIGVuYywgdGhpcy5jdXJ2ZVR5cGUuYnl0ZUxlbmd0aCk7Cn07CgpFQ0RILnByb3RvdHlwZS5nZXRQdWJsaWNLZXkgPSBmdW5jdGlvbiAoZW5jLCBmb3JtYXQpIHsKCXZhciBrZXkgPSB0aGlzLmtleXMuZ2V0UHVibGljKGZvcm1hdCA9PT0gJ2NvbXByZXNzZWQnLCB0cnVlKTsKCWlmIChmb3JtYXQgPT09ICdoeWJyaWQnKSB7CgkJaWYgKGtleVtrZXkubGVuZ3RoIC0gMV0gJSAyKSB7CgkJCWtleVswXSA9IDc7CgkJfSBlbHNlIHsKCQkJa2V5IFswXSA9IDY7CgkJfQoJfQoJcmV0dXJuIGZvcm1hdFJldHVyblZhbHVlKGtleSwgZW5jKTsKfTsKCkVDREgucHJvdG90eXBlLmdldFByaXZhdGVLZXkgPSBmdW5jdGlvbiAoZW5jKSB7CglyZXR1cm4gZm9ybWF0UmV0dXJuVmFsdWUodGhpcy5rZXlzLmdldFByaXZhdGUoKSwgZW5jKTsKfTsKCkVDREgucHJvdG90eXBlLnNldFB1YmxpY0tleSA9IGZ1bmN0aW9uIChwdWIsIGVuYykgewoJZW5jID0gZW5jIHx8ICd1dGY4JzsKCWlmICghQnVmZmVyLmlzQnVmZmVyKHB1YikpIHsKCQlwdWIgPSBuZXcgQnVmZmVyKHB1YiwgZW5jKTsKCX0KCXRoaXMua2V5cy5faW1wb3J0UHVibGljKHB1Yik7CglyZXR1cm4gdGhpczsKfTsKCkVDREgucHJvdG90eXBlLnNldFByaXZhdGVLZXkgPSBmdW5jdGlvbiAocHJpdiwgZW5jKSB7CgllbmMgPSBlbmMgfHwgJ3V0ZjgnOwoJaWYgKCFCdWZmZXIuaXNCdWZmZXIocHJpdikpIHsKCQlwcml2ID0gbmV3IEJ1ZmZlcihwcml2LCBlbmMpOwoJfQoJdmFyIF9wcml2ID0gbmV3IEJOKHByaXYpOwoJX3ByaXYgPSBfcHJpdi50b1N0cmluZygxNik7Cgl0aGlzLmtleXMuX2ltcG9ydFByaXZhdGUoX3ByaXYpOwoJcmV0dXJuIHRoaXM7Cn07CgpmdW5jdGlvbiBmb3JtYXRSZXR1cm5WYWx1ZShibiwgZW5jLCBsZW4pIHsKCWlmICghQXJyYXkuaXNBcnJheShibikpIHsKCQlibiA9IGJuLnRvQXJyYXkoKTsKCX0KCXZhciBidWYgPSBuZXcgQnVmZmVyKGJuKTsKCWlmIChsZW4gJiYgYnVmLmxlbmd0aCA8IGxlbikgewoJCXZhciB6ZXJvcyA9IG5ldyBCdWZmZXIobGVuIC0gYnVmLmxlbmd0aCk7CgkJemVyb3MuZmlsbCgwKTsKCQlidWYgPSBCdWZmZXIuY29uY2F0KFt6ZXJvcywgYnVmXSk7Cgl9CglpZiAoIWVuYykgewoJCXJldHVybiBidWY7Cgl9IGVsc2UgewoJCXJldHVybiBidWYudG9TdHJpbmcoZW5jKTsKCX0KfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJuLmpzIjo0MiwiYnVmZmVyIjo3NiwiZWxsaXB0aWMiOjEwMX1dLDgxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewondXNlIHN0cmljdCc7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIG1kNSA9IHJlcXVpcmUoJy4vbWQ1JykKdmFyIHJtZDE2MCA9IHJlcXVpcmUoJ3JpcGVtZDE2MCcpCnZhciBzaGEgPSByZXF1aXJlKCdzaGEuanMnKQoKdmFyIEJhc2UgPSByZXF1aXJlKCdjaXBoZXItYmFzZScpCgpmdW5jdGlvbiBIYXNoTm9Db25zdHJ1Y3RvcihoYXNoKSB7CiAgQmFzZS5jYWxsKHRoaXMsICdkaWdlc3QnKQoKICB0aGlzLl9oYXNoID0gaGFzaAogIHRoaXMuYnVmZmVycyA9IFtdCn0KCmluaGVyaXRzKEhhc2hOb0NvbnN0cnVjdG9yLCBCYXNlKQoKSGFzaE5vQ29uc3RydWN0b3IucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkgewogIHRoaXMuYnVmZmVycy5wdXNoKGRhdGEpCn0KCkhhc2hOb0NvbnN0cnVjdG9yLnByb3RvdHlwZS5fZmluYWwgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGJ1ZiA9IEJ1ZmZlci5jb25jYXQodGhpcy5idWZmZXJzKQogIHZhciByID0gdGhpcy5faGFzaChidWYpCiAgdGhpcy5idWZmZXJzID0gbnVsbAoKICByZXR1cm4gcgp9CgpmdW5jdGlvbiBIYXNoKGhhc2gpIHsKICBCYXNlLmNhbGwodGhpcywgJ2RpZ2VzdCcpCgogIHRoaXMuX2hhc2ggPSBoYXNoCn0KCmluaGVyaXRzKEhhc2gsIEJhc2UpCgpIYXNoLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHsKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhKQp9CgpIYXNoLnByb3RvdHlwZS5fZmluYWwgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuX2hhc2guZGlnZXN0KCkKfQoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVIYXNoIChhbGcpIHsKICBhbGcgPSBhbGcudG9Mb3dlckNhc2UoKQogIGlmICgnbWQ1JyA9PT0gYWxnKSByZXR1cm4gbmV3IEhhc2hOb0NvbnN0cnVjdG9yKG1kNSkKICBpZiAoJ3JtZDE2MCcgPT09IGFsZyB8fCAncmlwZW1kMTYwJyA9PT0gYWxnKSByZXR1cm4gbmV3IEhhc2hOb0NvbnN0cnVjdG9yKHJtZDE2MCkKCiAgcmV0dXJuIG5ldyBIYXNoKHNoYShhbGcpKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9tZDUiOjgzLCJidWZmZXIiOjc2LCJjaXBoZXItYmFzZSI6NzgsImluaGVyaXRzIjoxMjksInJpcGVtZDE2MCI6MTU5LCJzaGEuanMiOjE2M31dLDgyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewondXNlIHN0cmljdCc7CnZhciBpbnRTaXplID0gNDsKdmFyIHplcm9CdWZmZXIgPSBuZXcgQnVmZmVyKGludFNpemUpOyB6ZXJvQnVmZmVyLmZpbGwoMCk7CnZhciBjaHJzeiA9IDg7CgpmdW5jdGlvbiB0b0FycmF5KGJ1ZiwgYmlnRW5kaWFuKSB7CiAgaWYgKChidWYubGVuZ3RoICUgaW50U2l6ZSkgIT09IDApIHsKICAgIHZhciBsZW4gPSBidWYubGVuZ3RoICsgKGludFNpemUgLSAoYnVmLmxlbmd0aCAlIGludFNpemUpKTsKICAgIGJ1ZiA9IEJ1ZmZlci5jb25jYXQoW2J1ZiwgemVyb0J1ZmZlcl0sIGxlbik7CiAgfQoKICB2YXIgYXJyID0gW107CiAgdmFyIGZuID0gYmlnRW5kaWFuID8gYnVmLnJlYWRJbnQzMkJFIDogYnVmLnJlYWRJbnQzMkxFOwogIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmLmxlbmd0aDsgaSArPSBpbnRTaXplKSB7CiAgICBhcnIucHVzaChmbi5jYWxsKGJ1ZiwgaSkpOwogIH0KICByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiB0b0J1ZmZlcihhcnIsIHNpemUsIGJpZ0VuZGlhbikgewogIHZhciBidWYgPSBuZXcgQnVmZmVyKHNpemUpOwogIHZhciBmbiA9IGJpZ0VuZGlhbiA/IGJ1Zi53cml0ZUludDMyQkUgOiBidWYud3JpdGVJbnQzMkxFOwogIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICBmbi5jYWxsKGJ1ZiwgYXJyW2ldLCBpICogNCwgdHJ1ZSk7CiAgfQogIHJldHVybiBidWY7Cn0KCmZ1bmN0aW9uIGhhc2goYnVmLCBmbiwgaGFzaFNpemUsIGJpZ0VuZGlhbikgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIGJ1ZiA9IG5ldyBCdWZmZXIoYnVmKTsKICB2YXIgYXJyID0gZm4odG9BcnJheShidWYsIGJpZ0VuZGlhbiksIGJ1Zi5sZW5ndGggKiBjaHJzeik7CiAgcmV0dXJuIHRvQnVmZmVyKGFyciwgaGFzaFNpemUsIGJpZ0VuZGlhbik7Cn0KZXhwb3J0cy5oYXNoID0gaGFzaDsKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzZ9XSw4MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLyoKICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBSU0EgRGF0YSBTZWN1cml0eSwgSW5jLiBNRDUgTWVzc2FnZQogKiBEaWdlc3QgQWxnb3JpdGhtLCBhcyBkZWZpbmVkIGluIFJGQyAxMzIxLgogKiBWZXJzaW9uIDIuMSBDb3B5cmlnaHQgKEMpIFBhdWwgSm9obnN0b24gMTk5OSAtIDIwMDIuCiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXQKICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlCiAqIFNlZSBodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1IGZvciBtb3JlIGluZm8uCiAqLwoKdmFyIGhlbHBlcnMgPSByZXF1aXJlKCcuL2hlbHBlcnMnKTsKCi8qCiAqIENhbGN1bGF0ZSB0aGUgTUQ1IG9mIGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHMsIGFuZCBhIGJpdCBsZW5ndGgKICovCmZ1bmN0aW9uIGNvcmVfbWQ1KHgsIGxlbikKewogIC8qIGFwcGVuZCBwYWRkaW5nICovCiAgeFtsZW4gPj4gNV0gfD0gMHg4MCA8PCAoKGxlbikgJSAzMik7CiAgeFsoKChsZW4gKyA2NCkgPj4+IDkpIDw8IDQpICsgMTRdID0gbGVuOwoKICB2YXIgYSA9ICAxNzMyNTg0MTkzOwogIHZhciBiID0gLTI3MTczMzg3OTsKICB2YXIgYyA9IC0xNzMyNTg0MTk0OwogIHZhciBkID0gIDI3MTczMzg3ODsKCiAgZm9yKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpICs9IDE2KQogIHsKICAgIHZhciBvbGRhID0gYTsKICAgIHZhciBvbGRiID0gYjsKICAgIHZhciBvbGRjID0gYzsKICAgIHZhciBvbGRkID0gZDsKCiAgICBhID0gbWQ1X2ZmKGEsIGIsIGMsIGQsIHhbaSsgMF0sIDcgLCAtNjgwODc2OTM2KTsKICAgIGQgPSBtZDVfZmYoZCwgYSwgYiwgYywgeFtpKyAxXSwgMTIsIC0zODk1NjQ1ODYpOwogICAgYyA9IG1kNV9mZihjLCBkLCBhLCBiLCB4W2krIDJdLCAxNywgIDYwNjEwNTgxOSk7CiAgICBiID0gbWQ1X2ZmKGIsIGMsIGQsIGEsIHhbaSsgM10sIDIyLCAtMTA0NDUyNTMzMCk7CiAgICBhID0gbWQ1X2ZmKGEsIGIsIGMsIGQsIHhbaSsgNF0sIDcgLCAtMTc2NDE4ODk3KTsKICAgIGQgPSBtZDVfZmYoZCwgYSwgYiwgYywgeFtpKyA1XSwgMTIsICAxMjAwMDgwNDI2KTsKICAgIGMgPSBtZDVfZmYoYywgZCwgYSwgYiwgeFtpKyA2XSwgMTcsIC0xNDczMjMxMzQxKTsKICAgIGIgPSBtZDVfZmYoYiwgYywgZCwgYSwgeFtpKyA3XSwgMjIsIC00NTcwNTk4Myk7CiAgICBhID0gbWQ1X2ZmKGEsIGIsIGMsIGQsIHhbaSsgOF0sIDcgLCAgMTc3MDAzNTQxNik7CiAgICBkID0gbWQ1X2ZmKGQsIGEsIGIsIGMsIHhbaSsgOV0sIDEyLCAtMTk1ODQxNDQxNyk7CiAgICBjID0gbWQ1X2ZmKGMsIGQsIGEsIGIsIHhbaSsxMF0sIDE3LCAtNDIwNjMpOwogICAgYiA9IG1kNV9mZihiLCBjLCBkLCBhLCB4W2krMTFdLCAyMiwgLTE5OTA0MDQxNjIpOwogICAgYSA9IG1kNV9mZihhLCBiLCBjLCBkLCB4W2krMTJdLCA3ICwgIDE4MDQ2MDM2ODIpOwogICAgZCA9IG1kNV9mZihkLCBhLCBiLCBjLCB4W2krMTNdLCAxMiwgLTQwMzQxMTAxKTsKICAgIGMgPSBtZDVfZmYoYywgZCwgYSwgYiwgeFtpKzE0XSwgMTcsIC0xNTAyMDAyMjkwKTsKICAgIGIgPSBtZDVfZmYoYiwgYywgZCwgYSwgeFtpKzE1XSwgMjIsICAxMjM2NTM1MzI5KTsKCiAgICBhID0gbWQ1X2dnKGEsIGIsIGMsIGQsIHhbaSsgMV0sIDUgLCAtMTY1Nzk2NTEwKTsKICAgIGQgPSBtZDVfZ2coZCwgYSwgYiwgYywgeFtpKyA2XSwgOSAsIC0xMDY5NTAxNjMyKTsKICAgIGMgPSBtZDVfZ2coYywgZCwgYSwgYiwgeFtpKzExXSwgMTQsICA2NDM3MTc3MTMpOwogICAgYiA9IG1kNV9nZyhiLCBjLCBkLCBhLCB4W2krIDBdLCAyMCwgLTM3Mzg5NzMwMik7CiAgICBhID0gbWQ1X2dnKGEsIGIsIGMsIGQsIHhbaSsgNV0sIDUgLCAtNzAxNTU4NjkxKTsKICAgIGQgPSBtZDVfZ2coZCwgYSwgYiwgYywgeFtpKzEwXSwgOSAsICAzODAxNjA4Myk7CiAgICBjID0gbWQ1X2dnKGMsIGQsIGEsIGIsIHhbaSsxNV0sIDE0LCAtNjYwNDc4MzM1KTsKICAgIGIgPSBtZDVfZ2coYiwgYywgZCwgYSwgeFtpKyA0XSwgMjAsIC00MDU1Mzc4NDgpOwogICAgYSA9IG1kNV9nZyhhLCBiLCBjLCBkLCB4W2krIDldLCA1ICwgIDU2ODQ0NjQzOCk7CiAgICBkID0gbWQ1X2dnKGQsIGEsIGIsIGMsIHhbaSsxNF0sIDkgLCAtMTAxOTgwMzY5MCk7CiAgICBjID0gbWQ1X2dnKGMsIGQsIGEsIGIsIHhbaSsgM10sIDE0LCAtMTg3MzYzOTYxKTsKICAgIGIgPSBtZDVfZ2coYiwgYywgZCwgYSwgeFtpKyA4XSwgMjAsICAxMTYzNTMxNTAxKTsKICAgIGEgPSBtZDVfZ2coYSwgYiwgYywgZCwgeFtpKzEzXSwgNSAsIC0xNDQ0NjgxNDY3KTsKICAgIGQgPSBtZDVfZ2coZCwgYSwgYiwgYywgeFtpKyAyXSwgOSAsIC01MTQwMzc4NCk7CiAgICBjID0gbWQ1X2dnKGMsIGQsIGEsIGIsIHhbaSsgN10sIDE0LCAgMTczNTMyODQ3Myk7CiAgICBiID0gbWQ1X2dnKGIsIGMsIGQsIGEsIHhbaSsxMl0sIDIwLCAtMTkyNjYwNzczNCk7CgogICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2krIDVdLCA0ICwgLTM3ODU1OCk7CiAgICBkID0gbWQ1X2hoKGQsIGEsIGIsIGMsIHhbaSsgOF0sIDExLCAtMjAyMjU3NDQ2Myk7CiAgICBjID0gbWQ1X2hoKGMsIGQsIGEsIGIsIHhbaSsxMV0sIDE2LCAgMTgzOTAzMDU2Mik7CiAgICBiID0gbWQ1X2hoKGIsIGMsIGQsIGEsIHhbaSsxNF0sIDIzLCAtMzUzMDk1NTYpOwogICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2krIDFdLCA0ICwgLTE1MzA5OTIwNjApOwogICAgZCA9IG1kNV9oaChkLCBhLCBiLCBjLCB4W2krIDRdLCAxMSwgIDEyNzI4OTMzNTMpOwogICAgYyA9IG1kNV9oaChjLCBkLCBhLCBiLCB4W2krIDddLCAxNiwgLTE1NTQ5NzYzMik7CiAgICBiID0gbWQ1X2hoKGIsIGMsIGQsIGEsIHhbaSsxMF0sIDIzLCAtMTA5NDczMDY0MCk7CiAgICBhID0gbWQ1X2hoKGEsIGIsIGMsIGQsIHhbaSsxM10sIDQgLCAgNjgxMjc5MTc0KTsKICAgIGQgPSBtZDVfaGgoZCwgYSwgYiwgYywgeFtpKyAwXSwgMTEsIC0zNTg1MzcyMjIpOwogICAgYyA9IG1kNV9oaChjLCBkLCBhLCBiLCB4W2krIDNdLCAxNiwgLTcyMjUyMTk3OSk7CiAgICBiID0gbWQ1X2hoKGIsIGMsIGQsIGEsIHhbaSsgNl0sIDIzLCAgNzYwMjkxODkpOwogICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2krIDldLCA0ICwgLTY0MDM2NDQ4Nyk7CiAgICBkID0gbWQ1X2hoKGQsIGEsIGIsIGMsIHhbaSsxMl0sIDExLCAtNDIxODE1ODM1KTsKICAgIGMgPSBtZDVfaGgoYywgZCwgYSwgYiwgeFtpKzE1XSwgMTYsICA1MzA3NDI1MjApOwogICAgYiA9IG1kNV9oaChiLCBjLCBkLCBhLCB4W2krIDJdLCAyMywgLTk5NTMzODY1MSk7CgogICAgYSA9IG1kNV9paShhLCBiLCBjLCBkLCB4W2krIDBdLCA2ICwgLTE5ODYzMDg0NCk7CiAgICBkID0gbWQ1X2lpKGQsIGEsIGIsIGMsIHhbaSsgN10sIDEwLCAgMTEyNjg5MTQxNSk7CiAgICBjID0gbWQ1X2lpKGMsIGQsIGEsIGIsIHhbaSsxNF0sIDE1LCAtMTQxNjM1NDkwNSk7CiAgICBiID0gbWQ1X2lpKGIsIGMsIGQsIGEsIHhbaSsgNV0sIDIxLCAtNTc0MzQwNTUpOwogICAgYSA9IG1kNV9paShhLCBiLCBjLCBkLCB4W2krMTJdLCA2ICwgIDE3MDA0ODU1NzEpOwogICAgZCA9IG1kNV9paShkLCBhLCBiLCBjLCB4W2krIDNdLCAxMCwgLTE4OTQ5ODY2MDYpOwogICAgYyA9IG1kNV9paShjLCBkLCBhLCBiLCB4W2krMTBdLCAxNSwgLTEwNTE1MjMpOwogICAgYiA9IG1kNV9paShiLCBjLCBkLCBhLCB4W2krIDFdLCAyMSwgLTIwNTQ5MjI3OTkpOwogICAgYSA9IG1kNV9paShhLCBiLCBjLCBkLCB4W2krIDhdLCA2ICwgIDE4NzMzMTMzNTkpOwogICAgZCA9IG1kNV9paShkLCBhLCBiLCBjLCB4W2krMTVdLCAxMCwgLTMwNjExNzQ0KTsKICAgIGMgPSBtZDVfaWkoYywgZCwgYSwgYiwgeFtpKyA2XSwgMTUsIC0xNTYwMTk4MzgwKTsKICAgIGIgPSBtZDVfaWkoYiwgYywgZCwgYSwgeFtpKzEzXSwgMjEsICAxMzA5MTUxNjQ5KTsKICAgIGEgPSBtZDVfaWkoYSwgYiwgYywgZCwgeFtpKyA0XSwgNiAsIC0xNDU1MjMwNzApOwogICAgZCA9IG1kNV9paShkLCBhLCBiLCBjLCB4W2krMTFdLCAxMCwgLTExMjAyMTAzNzkpOwogICAgYyA9IG1kNV9paShjLCBkLCBhLCBiLCB4W2krIDJdLCAxNSwgIDcxODc4NzI1OSk7CiAgICBiID0gbWQ1X2lpKGIsIGMsIGQsIGEsIHhbaSsgOV0sIDIxLCAtMzQzNDg1NTUxKTsKCiAgICBhID0gc2FmZV9hZGQoYSwgb2xkYSk7CiAgICBiID0gc2FmZV9hZGQoYiwgb2xkYik7CiAgICBjID0gc2FmZV9hZGQoYywgb2xkYyk7CiAgICBkID0gc2FmZV9hZGQoZCwgb2xkZCk7CiAgfQogIHJldHVybiBBcnJheShhLCBiLCBjLCBkKTsKCn0KCi8qCiAqIFRoZXNlIGZ1bmN0aW9ucyBpbXBsZW1lbnQgdGhlIGZvdXIgYmFzaWMgb3BlcmF0aW9ucyB0aGUgYWxnb3JpdGhtIHVzZXMuCiAqLwpmdW5jdGlvbiBtZDVfY21uKHEsIGEsIGIsIHgsIHMsIHQpCnsKICByZXR1cm4gc2FmZV9hZGQoYml0X3JvbChzYWZlX2FkZChzYWZlX2FkZChhLCBxKSwgc2FmZV9hZGQoeCwgdCkpLCBzKSxiKTsKfQpmdW5jdGlvbiBtZDVfZmYoYSwgYiwgYywgZCwgeCwgcywgdCkKewogIHJldHVybiBtZDVfY21uKChiICYgYykgfCAoKH5iKSAmIGQpLCBhLCBiLCB4LCBzLCB0KTsKfQpmdW5jdGlvbiBtZDVfZ2coYSwgYiwgYywgZCwgeCwgcywgdCkKewogIHJldHVybiBtZDVfY21uKChiICYgZCkgfCAoYyAmICh+ZCkpLCBhLCBiLCB4LCBzLCB0KTsKfQpmdW5jdGlvbiBtZDVfaGgoYSwgYiwgYywgZCwgeCwgcywgdCkKewogIHJldHVybiBtZDVfY21uKGIgXiBjIF4gZCwgYSwgYiwgeCwgcywgdCk7Cn0KZnVuY3Rpb24gbWQ1X2lpKGEsIGIsIGMsIGQsIHgsIHMsIHQpCnsKICByZXR1cm4gbWQ1X2NtbihjIF4gKGIgfCAofmQpKSwgYSwgYiwgeCwgcywgdCk7Cn0KCi8qCiAqIEFkZCBpbnRlZ2Vycywgd3JhcHBpbmcgYXQgMl4zMi4gVGhpcyB1c2VzIDE2LWJpdCBvcGVyYXRpb25zIGludGVybmFsbHkKICogdG8gd29yayBhcm91bmQgYnVncyBpbiBzb21lIEpTIGludGVycHJldGVycy4KICovCmZ1bmN0aW9uIHNhZmVfYWRkKHgsIHkpCnsKICB2YXIgbHN3ID0gKHggJiAweEZGRkYpICsgKHkgJiAweEZGRkYpOwogIHZhciBtc3cgPSAoeCA+PiAxNikgKyAoeSA+PiAxNikgKyAobHN3ID4+IDE2KTsKICByZXR1cm4gKG1zdyA8PCAxNikgfCAobHN3ICYgMHhGRkZGKTsKfQoKLyoKICogQml0d2lzZSByb3RhdGUgYSAzMi1iaXQgbnVtYmVyIHRvIHRoZSBsZWZ0LgogKi8KZnVuY3Rpb24gYml0X3JvbChudW0sIGNudCkKewogIHJldHVybiAobnVtIDw8IGNudCkgfCAobnVtID4+PiAoMzIgLSBjbnQpKTsKfQoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtZDUoYnVmKSB7CiAgcmV0dXJuIGhlbHBlcnMuaGFzaChidWYsIGNvcmVfbWQ1LCAxNik7Cn07Cn0seyIuL2hlbHBlcnMiOjgyfV0sODQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cid1c2Ugc3RyaWN0JzsKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaC9icm93c2VyJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKCnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdzdHJlYW0nKS5UcmFuc2Zvcm0KCnZhciBaRVJPUyA9IG5ldyBCdWZmZXIoMTI4KQpaRVJPUy5maWxsKDApCgpmdW5jdGlvbiBIbWFjKGFsZywga2V5KSB7CiAgVHJhbnNmb3JtLmNhbGwodGhpcykKICBhbGcgPSBhbGcudG9Mb3dlckNhc2UoKQogIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykgewogICAga2V5ID0gbmV3IEJ1ZmZlcihrZXkpCiAgfQoKICB2YXIgYmxvY2tzaXplID0gKGFsZyA9PT0gJ3NoYTUxMicgfHwgYWxnID09PSAnc2hhMzg0JykgPyAxMjggOiA2NAoKICB0aGlzLl9hbGcgPSBhbGcKICB0aGlzLl9rZXkgPSBrZXkKCiAgaWYgKGtleS5sZW5ndGggPiBibG9ja3NpemUpIHsKICAgIGtleSA9IGNyZWF0ZUhhc2goYWxnKS51cGRhdGUoa2V5KS5kaWdlc3QoKQoKICB9IGVsc2UgaWYgKGtleS5sZW5ndGggPCBibG9ja3NpemUpIHsKICAgIGtleSA9IEJ1ZmZlci5jb25jYXQoW2tleSwgWkVST1NdLCBibG9ja3NpemUpCiAgfQoKICB2YXIgaXBhZCA9IHRoaXMuX2lwYWQgPSBuZXcgQnVmZmVyKGJsb2Nrc2l6ZSkKICB2YXIgb3BhZCA9IHRoaXMuX29wYWQgPSBuZXcgQnVmZmVyKGJsb2Nrc2l6ZSkKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBibG9ja3NpemU7IGkrKykgewogICAgaXBhZFtpXSA9IGtleVtpXSBeIDB4MzYKICAgIG9wYWRbaV0gPSBrZXlbaV0gXiAweDVDCiAgfQoKICB0aGlzLl9oYXNoID0gY3JlYXRlSGFzaChhbGcpLnVwZGF0ZShpcGFkKQp9Cgppbmhlcml0cyhIbWFjLCBUcmFuc2Zvcm0pCgpIbWFjLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSwgZW5jKSB7CiAgdGhpcy5faGFzaC51cGRhdGUoZGF0YSwgZW5jKQoKICByZXR1cm4gdGhpcwp9CgpIbWFjLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGRhdGEsIF8sIG5leHQpIHsKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhKQoKICBuZXh0KCkKfQoKSG1hYy5wcm90b3R5cGUuX2ZsdXNoID0gZnVuY3Rpb24gKG5leHQpIHsKICB0aGlzLnB1c2godGhpcy5kaWdlc3QoKSkKCiAgbmV4dCgpCn0KCkhtYWMucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uIChlbmMpIHsKICB2YXIgaCA9IHRoaXMuX2hhc2guZGlnZXN0KCkKCiAgcmV0dXJuIGNyZWF0ZUhhc2godGhpcy5fYWxnKS51cGRhdGUodGhpcy5fb3BhZCkudXBkYXRlKGgpLmRpZ2VzdChlbmMpCn0KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlSG1hYyhhbGcsIGtleSkgewogIHJldHVybiBuZXcgSG1hYyhhbGcsIGtleSkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzYsImNyZWF0ZS1oYXNoL2Jyb3dzZXIiOjgxLCJpbmhlcml0cyI6MTI5LCJzdHJlYW0iOjE3MX1dLDg1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnCgpleHBvcnRzLnJhbmRvbUJ5dGVzID0gZXhwb3J0cy5ybmcgPSBleHBvcnRzLnBzZXVkb1JhbmRvbUJ5dGVzID0gZXhwb3J0cy5wcm5nID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKQpleHBvcnRzLmNyZWF0ZUhhc2ggPSBleHBvcnRzLkhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpCmV4cG9ydHMuY3JlYXRlSG1hYyA9IGV4cG9ydHMuSG1hYyA9IHJlcXVpcmUoJ2NyZWF0ZS1obWFjJykKCnZhciBoYXNoZXMgPSBbJ3NoYTEnLCAnc2hhMjI0JywgJ3NoYTI1NicsICdzaGEzODQnLCAnc2hhNTEyJywgJ21kNScsICdybWQxNjAnXS5jb25jYXQoT2JqZWN0LmtleXMocmVxdWlyZSgnYnJvd3NlcmlmeS1zaWduL2FsZ29zJykpKQpleHBvcnRzLmdldEhhc2hlcyA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gaGFzaGVzCn0KCnZhciBwID0gcmVxdWlyZSgncGJrZGYyJykKZXhwb3J0cy5wYmtkZjIgPSBwLnBia2RmMgpleHBvcnRzLnBia2RmMlN5bmMgPSBwLnBia2RmMlN5bmMKCnZhciBhZXMgPSByZXF1aXJlKCdicm93c2VyaWZ5LWNpcGhlcicpCjtbCiAgJ0NpcGhlcicsCiAgJ2NyZWF0ZUNpcGhlcicsCiAgJ0NpcGhlcml2JywKICAnY3JlYXRlQ2lwaGVyaXYnLAogICdEZWNpcGhlcicsCiAgJ2NyZWF0ZURlY2lwaGVyJywKICAnRGVjaXBoZXJpdicsCiAgJ2NyZWF0ZURlY2lwaGVyaXYnLAogICdnZXRDaXBoZXJzJywKICAnbGlzdENpcGhlcnMnCl0uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgZXhwb3J0c1trZXldID0gYWVzW2tleV0KfSkKCnZhciBkaCA9IHJlcXVpcmUoJ2RpZmZpZS1oZWxsbWFuJykKO1sKICAnRGlmZmllSGVsbG1hbkdyb3VwJywKICAnY3JlYXRlRGlmZmllSGVsbG1hbkdyb3VwJywKICAnZ2V0RGlmZmllSGVsbG1hbicsCiAgJ2NyZWF0ZURpZmZpZUhlbGxtYW4nLAogICdEaWZmaWVIZWxsbWFuJwpdLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogIGV4cG9ydHNba2V5XSA9IGRoW2tleV0KfSkKCnZhciBzaWduID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1zaWduJykKO1sKICAnY3JlYXRlU2lnbicsCiAgJ1NpZ24nLAogICdjcmVhdGVWZXJpZnknLAogICdWZXJpZnknCl0uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgZXhwb3J0c1trZXldID0gc2lnbltrZXldCn0pCgpleHBvcnRzLmNyZWF0ZUVDREggPSByZXF1aXJlKCdjcmVhdGUtZWNkaCcpCgp2YXIgcHVibGljRW5jcnlwdCA9IHJlcXVpcmUoJ3B1YmxpYy1lbmNyeXB0JykKCjtbCiAgJ3B1YmxpY0VuY3J5cHQnLAogICdwcml2YXRlRW5jcnlwdCcsCiAgJ3B1YmxpY0RlY3J5cHQnLAogICdwcml2YXRlRGVjcnlwdCcKXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICBleHBvcnRzW2tleV0gPSBwdWJsaWNFbmNyeXB0W2tleV0KfSkKCi8vIHRoZSBsZWFzdCBJIGNhbiBkbyBpcyBtYWtlIGVycm9yIG1lc3NhZ2VzIGZvciB0aGUgcmVzdCBvZiB0aGUgbm9kZS5qcy9jcnlwdG8gYXBpLgo7WwogICdjcmVhdGVDcmVkZW50aWFscycKXS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgZXhwb3J0c1tuYW1lXSA9IGZ1bmN0aW9uICgpIHsKICAgIHRocm93IG5ldyBFcnJvcihbCiAgICAgICdzb3JyeSwgJyArIG5hbWUgKyAnIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQnLAogICAgICAnd2UgYWNjZXB0IHB1bGwgcmVxdWVzdHMnLAogICAgICAnaHR0cHM6Ly9naXRodWIuY29tL2NyeXB0by1icm93c2VyaWZ5L2NyeXB0by1icm93c2VyaWZ5JwogICAgXS5qb2luKCdcbicpKQogIH0KfSkKCn0seyJicm93c2VyaWZ5LWNpcGhlciI6NjAsImJyb3dzZXJpZnktc2lnbiI6NjUsImJyb3dzZXJpZnktc2lnbi9hbGdvcyI6NjQsImNyZWF0ZS1lY2RoIjo4MCwiY3JlYXRlLWhhc2giOjgxLCJjcmVhdGUtaG1hYyI6ODQsImRpZmZpZS1oZWxsbWFuIjo5MiwicGJrZGYyIjoxMzksInB1YmxpYy1lbmNyeXB0IjoxNDIsInJhbmRvbWJ5dGVzIjoxNDh9XSw4NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCmV4cG9ydHMudXRpbHMgPSByZXF1aXJlKCcuL2Rlcy91dGlscycpOwpleHBvcnRzLkNpcGhlciA9IHJlcXVpcmUoJy4vZGVzL2NpcGhlcicpOwpleHBvcnRzLkRFUyA9IHJlcXVpcmUoJy4vZGVzL2RlcycpOwpleHBvcnRzLkNCQyA9IHJlcXVpcmUoJy4vZGVzL2NiYycpOwpleHBvcnRzLkVERSA9IHJlcXVpcmUoJy4vZGVzL2VkZScpOwoKfSx7Ii4vZGVzL2NiYyI6ODcsIi4vZGVzL2NpcGhlciI6ODgsIi4vZGVzL2RlcyI6ODksIi4vZGVzL2VkZSI6OTAsIi4vZGVzL3V0aWxzIjo5MX1dLDg3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGFzc2VydCA9IHJlcXVpcmUoJ21pbmltYWxpc3RpYy1hc3NlcnQnKTsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCnZhciBwcm90byA9IHt9OwoKZnVuY3Rpb24gQ0JDU3RhdGUoaXYpIHsKICBhc3NlcnQuZXF1YWwoaXYubGVuZ3RoLCA4LCAnSW52YWxpZCBJViBsZW5ndGgnKTsKCiAgdGhpcy5pdiA9IG5ldyBBcnJheSg4KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXYubGVuZ3RoOyBpKyspCiAgICB0aGlzLml2W2ldID0gaXZbaV07Cn0KCmZ1bmN0aW9uIGluc3RhbnRpYXRlKEJhc2UpIHsKICBmdW5jdGlvbiBDQkMob3B0aW9ucykgewogICAgQmFzZS5jYWxsKHRoaXMsIG9wdGlvbnMpOwogICAgdGhpcy5fY2JjSW5pdCgpOwogIH0KICBpbmhlcml0cyhDQkMsIEJhc2UpOwoKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3RvKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBrZXkgPSBrZXlzW2ldOwogICAgQ0JDLnByb3RvdHlwZVtrZXldID0gcHJvdG9ba2V5XTsKICB9CgogIENCQy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUob3B0aW9ucykgewogICAgcmV0dXJuIG5ldyBDQkMob3B0aW9ucyk7CiAgfTsKCiAgcmV0dXJuIENCQzsKfQoKZXhwb3J0cy5pbnN0YW50aWF0ZSA9IGluc3RhbnRpYXRlOwoKcHJvdG8uX2NiY0luaXQgPSBmdW5jdGlvbiBfY2JjSW5pdCgpIHsKICB2YXIgc3RhdGUgPSBuZXcgQ0JDU3RhdGUodGhpcy5vcHRpb25zLml2KTsKICB0aGlzLl9jYmNTdGF0ZSA9IHN0YXRlOwp9OwoKcHJvdG8uX3VwZGF0ZSA9IGZ1bmN0aW9uIF91cGRhdGUoaW5wLCBpbk9mZiwgb3V0LCBvdXRPZmYpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9jYmNTdGF0ZTsKICB2YXIgc3VwZXJQcm90byA9IHRoaXMuY29uc3RydWN0b3Iuc3VwZXJfLnByb3RvdHlwZTsKCiAgdmFyIGl2ID0gc3RhdGUuaXY7CiAgaWYgKHRoaXMudHlwZSA9PT0gJ2VuY3J5cHQnKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspCiAgICAgIGl2W2ldIF49IGlucFtpbk9mZiArIGldOwoKICAgIHN1cGVyUHJvdG8uX3VwZGF0ZS5jYWxsKHRoaXMsIGl2LCAwLCBvdXQsIG91dE9mZik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgaSsrKQogICAgICBpdltpXSA9IG91dFtvdXRPZmYgKyBpXTsKICB9IGVsc2UgewogICAgc3VwZXJQcm90by5fdXBkYXRlLmNhbGwodGhpcywgaW5wLCBpbk9mZiwgb3V0LCBvdXRPZmYpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ibG9ja1NpemU7IGkrKykKICAgICAgb3V0W291dE9mZiArIGldIF49IGl2W2ldOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ibG9ja1NpemU7IGkrKykKICAgICAgaXZbaV0gPSBpbnBbaW5PZmYgKyBpXTsKICB9Cn07Cgp9LHsiaW5oZXJpdHMiOjEyOSwibWluaW1hbGlzdGljLWFzc2VydCI6MTM0fV0sODg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnbWluaW1hbGlzdGljLWFzc2VydCcpOwoKZnVuY3Rpb24gQ2lwaGVyKG9wdGlvbnMpIHsKICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwoKICB0aGlzLnR5cGUgPSB0aGlzLm9wdGlvbnMudHlwZTsKICB0aGlzLmJsb2NrU2l6ZSA9IDg7CiAgdGhpcy5faW5pdCgpOwoKICB0aGlzLmJ1ZmZlciA9IG5ldyBBcnJheSh0aGlzLmJsb2NrU2l6ZSk7CiAgdGhpcy5idWZmZXJPZmYgPSAwOwp9Cm1vZHVsZS5leHBvcnRzID0gQ2lwaGVyOwoKQ2lwaGVyLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIF9pbml0KCkgewogIC8vIE1pZ2h0IGJlIG92ZXJyaWRlZAp9OwoKQ2lwaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZGF0YSkgewogIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkKICAgIHJldHVybiBbXTsKCiAgaWYgKHRoaXMudHlwZSA9PT0gJ2RlY3J5cHQnKQogICAgcmV0dXJuIHRoaXMuX3VwZGF0ZURlY3J5cHQoZGF0YSk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuX3VwZGF0ZUVuY3J5cHQoZGF0YSk7Cn07CgpDaXBoZXIucHJvdG90eXBlLl9idWZmZXIgPSBmdW5jdGlvbiBfYnVmZmVyKGRhdGEsIG9mZikgewogIC8vIEFwcGVuZCBkYXRhIHRvIGJ1ZmZlcgogIHZhciBtaW4gPSBNYXRoLm1pbih0aGlzLmJ1ZmZlci5sZW5ndGggLSB0aGlzLmJ1ZmZlck9mZiwgZGF0YS5sZW5ndGggLSBvZmYpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbWluOyBpKyspCiAgICB0aGlzLmJ1ZmZlclt0aGlzLmJ1ZmZlck9mZiArIGldID0gZGF0YVtvZmYgKyBpXTsKICB0aGlzLmJ1ZmZlck9mZiArPSBtaW47CgogIC8vIFNoaWZ0IG5leHQKICByZXR1cm4gbWluOwp9OwoKQ2lwaGVyLnByb3RvdHlwZS5fZmx1c2hCdWZmZXIgPSBmdW5jdGlvbiBfZmx1c2hCdWZmZXIob3V0LCBvZmYpIHsKICB0aGlzLl91cGRhdGUodGhpcy5idWZmZXIsIDAsIG91dCwgb2ZmKTsKICB0aGlzLmJ1ZmZlck9mZiA9IDA7CiAgcmV0dXJuIHRoaXMuYmxvY2tTaXplOwp9OwoKQ2lwaGVyLnByb3RvdHlwZS5fdXBkYXRlRW5jcnlwdCA9IGZ1bmN0aW9uIF91cGRhdGVFbmNyeXB0KGRhdGEpIHsKICB2YXIgaW5wdXRPZmYgPSAwOwogIHZhciBvdXRwdXRPZmYgPSAwOwoKICB2YXIgY291bnQgPSAoKHRoaXMuYnVmZmVyT2ZmICsgZGF0YS5sZW5ndGgpIC8gdGhpcy5ibG9ja1NpemUpIHwgMDsKICB2YXIgb3V0ID0gbmV3IEFycmF5KGNvdW50ICogdGhpcy5ibG9ja1NpemUpOwoKICBpZiAodGhpcy5idWZmZXJPZmYgIT09IDApIHsKICAgIGlucHV0T2ZmICs9IHRoaXMuX2J1ZmZlcihkYXRhLCBpbnB1dE9mZik7CgogICAgaWYgKHRoaXMuYnVmZmVyT2ZmID09PSB0aGlzLmJ1ZmZlci5sZW5ndGgpCiAgICAgIG91dHB1dE9mZiArPSB0aGlzLl9mbHVzaEJ1ZmZlcihvdXQsIG91dHB1dE9mZik7CiAgfQoKICAvLyBXcml0ZSBibG9ja3MKICB2YXIgbWF4ID0gZGF0YS5sZW5ndGggLSAoKGRhdGEubGVuZ3RoIC0gaW5wdXRPZmYpICUgdGhpcy5ibG9ja1NpemUpOwogIGZvciAoOyBpbnB1dE9mZiA8IG1heDsgaW5wdXRPZmYgKz0gdGhpcy5ibG9ja1NpemUpIHsKICAgIHRoaXMuX3VwZGF0ZShkYXRhLCBpbnB1dE9mZiwgb3V0LCBvdXRwdXRPZmYpOwogICAgb3V0cHV0T2ZmICs9IHRoaXMuYmxvY2tTaXplOwogIH0KCiAgLy8gUXVldWUgcmVzdAogIGZvciAoOyBpbnB1dE9mZiA8IGRhdGEubGVuZ3RoOyBpbnB1dE9mZisrLCB0aGlzLmJ1ZmZlck9mZisrKQogICAgdGhpcy5idWZmZXJbdGhpcy5idWZmZXJPZmZdID0gZGF0YVtpbnB1dE9mZl07CgogIHJldHVybiBvdXQ7Cn07CgpDaXBoZXIucHJvdG90eXBlLl91cGRhdGVEZWNyeXB0ID0gZnVuY3Rpb24gX3VwZGF0ZURlY3J5cHQoZGF0YSkgewogIHZhciBpbnB1dE9mZiA9IDA7CiAgdmFyIG91dHB1dE9mZiA9IDA7CgogIHZhciBjb3VudCA9IE1hdGguY2VpbCgodGhpcy5idWZmZXJPZmYgKyBkYXRhLmxlbmd0aCkgLyB0aGlzLmJsb2NrU2l6ZSkgLSAxOwogIHZhciBvdXQgPSBuZXcgQXJyYXkoY291bnQgKiB0aGlzLmJsb2NrU2l6ZSk7CgogIC8vIFRPRE8oaW5kdXRueSk6IG9wdGltaXplIGl0LCB0aGlzIGlzIGZhciBmcm9tIG9wdGltYWwKICBmb3IgKDsgY291bnQgPiAwOyBjb3VudC0tKSB7CiAgICBpbnB1dE9mZiArPSB0aGlzLl9idWZmZXIoZGF0YSwgaW5wdXRPZmYpOwogICAgb3V0cHV0T2ZmICs9IHRoaXMuX2ZsdXNoQnVmZmVyKG91dCwgb3V0cHV0T2ZmKTsKICB9CgogIC8vIEJ1ZmZlciByZXN0IG9mIHRoZSBpbnB1dAogIGlucHV0T2ZmICs9IHRoaXMuX2J1ZmZlcihkYXRhLCBpbnB1dE9mZik7CgogIHJldHVybiBvdXQ7Cn07CgpDaXBoZXIucHJvdG90eXBlLmZpbmFsID0gZnVuY3Rpb24gZmluYWwoYnVmZmVyKSB7CiAgdmFyIGZpcnN0OwogIGlmIChidWZmZXIpCiAgICBmaXJzdCA9IHRoaXMudXBkYXRlKGJ1ZmZlcik7CgogIHZhciBsYXN0OwogIGlmICh0aGlzLnR5cGUgPT09ICdlbmNyeXB0JykKICAgIGxhc3QgPSB0aGlzLl9maW5hbEVuY3J5cHQoKTsKICBlbHNlCiAgICBsYXN0ID0gdGhpcy5fZmluYWxEZWNyeXB0KCk7CgogIGlmIChmaXJzdCkKICAgIHJldHVybiBmaXJzdC5jb25jYXQobGFzdCk7CiAgZWxzZQogICAgcmV0dXJuIGxhc3Q7Cn07CgpDaXBoZXIucHJvdG90eXBlLl9wYWQgPSBmdW5jdGlvbiBfcGFkKGJ1ZmZlciwgb2ZmKSB7CiAgaWYgKG9mZiA9PT0gMCkKICAgIHJldHVybiBmYWxzZTsKCiAgd2hpbGUgKG9mZiA8IGJ1ZmZlci5sZW5ndGgpCiAgICBidWZmZXJbb2ZmKytdID0gMDsKCiAgcmV0dXJuIHRydWU7Cn07CgpDaXBoZXIucHJvdG90eXBlLl9maW5hbEVuY3J5cHQgPSBmdW5jdGlvbiBfZmluYWxFbmNyeXB0KCkgewogIGlmICghdGhpcy5fcGFkKHRoaXMuYnVmZmVyLCB0aGlzLmJ1ZmZlck9mZikpCiAgICByZXR1cm4gW107CgogIHZhciBvdXQgPSBuZXcgQXJyYXkodGhpcy5ibG9ja1NpemUpOwogIHRoaXMuX3VwZGF0ZSh0aGlzLmJ1ZmZlciwgMCwgb3V0LCAwKTsKICByZXR1cm4gb3V0Owp9OwoKQ2lwaGVyLnByb3RvdHlwZS5fdW5wYWQgPSBmdW5jdGlvbiBfdW5wYWQoYnVmZmVyKSB7CiAgcmV0dXJuIGJ1ZmZlcjsKfTsKCkNpcGhlci5wcm90b3R5cGUuX2ZpbmFsRGVjcnlwdCA9IGZ1bmN0aW9uIF9maW5hbERlY3J5cHQoKSB7CiAgYXNzZXJ0LmVxdWFsKHRoaXMuYnVmZmVyT2ZmLCB0aGlzLmJsb2NrU2l6ZSwgJ05vdCBlbm91Z2ggZGF0YSB0byBkZWNyeXB0Jyk7CiAgdmFyIG91dCA9IG5ldyBBcnJheSh0aGlzLmJsb2NrU2l6ZSk7CiAgdGhpcy5fZmx1c2hCdWZmZXIob3V0LCAwKTsKCiAgcmV0dXJuIHRoaXMuX3VucGFkKG91dCk7Cn07Cgp9LHsibWluaW1hbGlzdGljLWFzc2VydCI6MTM0fV0sODk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnbWluaW1hbGlzdGljLWFzc2VydCcpOwp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwoKdmFyIGRlcyA9IHJlcXVpcmUoJy4uL2RlcycpOwp2YXIgdXRpbHMgPSBkZXMudXRpbHM7CnZhciBDaXBoZXIgPSBkZXMuQ2lwaGVyOwoKZnVuY3Rpb24gREVTU3RhdGUoKSB7CiAgdGhpcy50bXAgPSBuZXcgQXJyYXkoMik7CiAgdGhpcy5rZXlzID0gbnVsbDsKfQoKZnVuY3Rpb24gREVTKG9wdGlvbnMpIHsKICBDaXBoZXIuY2FsbCh0aGlzLCBvcHRpb25zKTsKCiAgdmFyIHN0YXRlID0gbmV3IERFU1N0YXRlKCk7CiAgdGhpcy5fZGVzU3RhdGUgPSBzdGF0ZTsKCiAgdGhpcy5kZXJpdmVLZXlzKHN0YXRlLCBvcHRpb25zLmtleSk7Cn0KaW5oZXJpdHMoREVTLCBDaXBoZXIpOwptb2R1bGUuZXhwb3J0cyA9IERFUzsKCkRFUy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUob3B0aW9ucykgewogIHJldHVybiBuZXcgREVTKG9wdGlvbnMpOwp9OwoKdmFyIHNoaWZ0VGFibGUgPSBbCiAgMSwgMSwgMiwgMiwgMiwgMiwgMiwgMiwKICAxLCAyLCAyLCAyLCAyLCAyLCAyLCAxCl07CgpERVMucHJvdG90eXBlLmRlcml2ZUtleXMgPSBmdW5jdGlvbiBkZXJpdmVLZXlzKHN0YXRlLCBrZXkpIHsKICBzdGF0ZS5rZXlzID0gbmV3IEFycmF5KDE2ICogMik7CgogIGFzc2VydC5lcXVhbChrZXkubGVuZ3RoLCB0aGlzLmJsb2NrU2l6ZSwgJ0ludmFsaWQga2V5IGxlbmd0aCcpOwoKICB2YXIga0wgPSB1dGlscy5yZWFkVUludDMyQkUoa2V5LCAwKTsKICB2YXIga1IgPSB1dGlscy5yZWFkVUludDMyQkUoa2V5LCA0KTsKCiAgdXRpbHMucGMxKGtMLCBrUiwgc3RhdGUudG1wLCAwKTsKICBrTCA9IHN0YXRlLnRtcFswXTsKICBrUiA9IHN0YXRlLnRtcFsxXTsKICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLmtleXMubGVuZ3RoOyBpICs9IDIpIHsKICAgIHZhciBzaGlmdCA9IHNoaWZ0VGFibGVbaSA+Pj4gMV07CiAgICBrTCA9IHV0aWxzLnIyOHNobChrTCwgc2hpZnQpOwogICAga1IgPSB1dGlscy5yMjhzaGwoa1IsIHNoaWZ0KTsKICAgIHV0aWxzLnBjMihrTCwga1IsIHN0YXRlLmtleXMsIGkpOwogIH0KfTsKCkRFUy5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIF91cGRhdGUoaW5wLCBpbk9mZiwgb3V0LCBvdXRPZmYpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9kZXNTdGF0ZTsKCiAgdmFyIGwgPSB1dGlscy5yZWFkVUludDMyQkUoaW5wLCBpbk9mZik7CiAgdmFyIHIgPSB1dGlscy5yZWFkVUludDMyQkUoaW5wLCBpbk9mZiArIDQpOwoKICAvLyBJbml0aWFsIFBlcm11dGF0aW9uCiAgdXRpbHMuaXAobCwgciwgc3RhdGUudG1wLCAwKTsKICBsID0gc3RhdGUudG1wWzBdOwogIHIgPSBzdGF0ZS50bXBbMV07CgogIGlmICh0aGlzLnR5cGUgPT09ICdlbmNyeXB0JykKICAgIHRoaXMuX2VuY3J5cHQoc3RhdGUsIGwsIHIsIHN0YXRlLnRtcCwgMCk7CiAgZWxzZQogICAgdGhpcy5fZGVjcnlwdChzdGF0ZSwgbCwgciwgc3RhdGUudG1wLCAwKTsKCiAgbCA9IHN0YXRlLnRtcFswXTsKICByID0gc3RhdGUudG1wWzFdOwoKICB1dGlscy53cml0ZVVJbnQzMkJFKG91dCwgbCwgb3V0T2ZmKTsKICB1dGlscy53cml0ZVVJbnQzMkJFKG91dCwgciwgb3V0T2ZmICsgNCk7Cn07CgpERVMucHJvdG90eXBlLl9wYWQgPSBmdW5jdGlvbiBfcGFkKGJ1ZmZlciwgb2ZmKSB7CiAgdmFyIHZhbHVlID0gYnVmZmVyLmxlbmd0aCAtIG9mZjsKICBmb3IgKHZhciBpID0gb2ZmOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKQogICAgYnVmZmVyW2ldID0gdmFsdWU7CgogIHJldHVybiB0cnVlOwp9OwoKREVTLnByb3RvdHlwZS5fdW5wYWQgPSBmdW5jdGlvbiBfdW5wYWQoYnVmZmVyKSB7CiAgdmFyIHBhZCA9IGJ1ZmZlcltidWZmZXIubGVuZ3RoIC0gMV07CiAgZm9yICh2YXIgaSA9IGJ1ZmZlci5sZW5ndGggLSBwYWQ7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspCiAgICBhc3NlcnQuZXF1YWwoYnVmZmVyW2ldLCBwYWQpOwoKICByZXR1cm4gYnVmZmVyLnNsaWNlKDAsIGJ1ZmZlci5sZW5ndGggLSBwYWQpOwp9OwoKREVTLnByb3RvdHlwZS5fZW5jcnlwdCA9IGZ1bmN0aW9uIF9lbmNyeXB0KHN0YXRlLCBsU3RhcnQsIHJTdGFydCwgb3V0LCBvZmYpIHsKICB2YXIgbCA9IGxTdGFydDsKICB2YXIgciA9IHJTdGFydDsKCiAgLy8gQXBwbHkgZigpIHgxNiB0aW1lcwogIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUua2V5cy5sZW5ndGg7IGkgKz0gMikgewogICAgdmFyIGtleUwgPSBzdGF0ZS5rZXlzW2ldOwogICAgdmFyIGtleVIgPSBzdGF0ZS5rZXlzW2kgKyAxXTsKCiAgICAvLyBmKHIsIGspCiAgICB1dGlscy5leHBhbmQociwgc3RhdGUudG1wLCAwKTsKCiAgICBrZXlMIF49IHN0YXRlLnRtcFswXTsKICAgIGtleVIgXj0gc3RhdGUudG1wWzFdOwogICAgdmFyIHMgPSB1dGlscy5zdWJzdGl0dXRlKGtleUwsIGtleVIpOwogICAgdmFyIGYgPSB1dGlscy5wZXJtdXRlKHMpOwoKICAgIHZhciB0ID0gcjsKICAgIHIgPSAobCBeIGYpID4+PiAwOwogICAgbCA9IHQ7CiAgfQoKICAvLyBSZXZlcnNlIEluaXRpYWwgUGVybXV0YXRpb24KICB1dGlscy5yaXAociwgbCwgb3V0LCBvZmYpOwp9OwoKREVTLnByb3RvdHlwZS5fZGVjcnlwdCA9IGZ1bmN0aW9uIF9kZWNyeXB0KHN0YXRlLCBsU3RhcnQsIHJTdGFydCwgb3V0LCBvZmYpIHsKICB2YXIgbCA9IHJTdGFydDsKICB2YXIgciA9IGxTdGFydDsKCiAgLy8gQXBwbHkgZigpIHgxNiB0aW1lcwogIGZvciAodmFyIGkgPSBzdGF0ZS5rZXlzLmxlbmd0aCAtIDI7IGkgPj0gMDsgaSAtPSAyKSB7CiAgICB2YXIga2V5TCA9IHN0YXRlLmtleXNbaV07CiAgICB2YXIga2V5UiA9IHN0YXRlLmtleXNbaSArIDFdOwoKICAgIC8vIGYociwgaykKICAgIHV0aWxzLmV4cGFuZChsLCBzdGF0ZS50bXAsIDApOwoKICAgIGtleUwgXj0gc3RhdGUudG1wWzBdOwogICAga2V5UiBePSBzdGF0ZS50bXBbMV07CiAgICB2YXIgcyA9IHV0aWxzLnN1YnN0aXR1dGUoa2V5TCwga2V5Uik7CiAgICB2YXIgZiA9IHV0aWxzLnBlcm11dGUocyk7CgogICAgdmFyIHQgPSBsOwogICAgbCA9IChyIF4gZikgPj4+IDA7CiAgICByID0gdDsKICB9CgogIC8vIFJldmVyc2UgSW5pdGlhbCBQZXJtdXRhdGlvbgogIHV0aWxzLnJpcChsLCByLCBvdXQsIG9mZik7Cn07Cgp9LHsiLi4vZGVzIjo4NiwiaW5oZXJpdHMiOjEyOSwibWluaW1hbGlzdGljLWFzc2VydCI6MTM0fV0sOTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnbWluaW1hbGlzdGljLWFzc2VydCcpOwp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwoKdmFyIGRlcyA9IHJlcXVpcmUoJy4uL2RlcycpOwp2YXIgQ2lwaGVyID0gZGVzLkNpcGhlcjsKdmFyIERFUyA9IGRlcy5ERVM7CgpmdW5jdGlvbiBFREVTdGF0ZSh0eXBlLCBrZXkpIHsKICBhc3NlcnQuZXF1YWwoa2V5Lmxlbmd0aCwgMjQsICdJbnZhbGlkIGtleSBsZW5ndGgnKTsKCiAgdmFyIGsxID0ga2V5LnNsaWNlKDAsIDgpOwogIHZhciBrMiA9IGtleS5zbGljZSg4LCAxNik7CiAgdmFyIGszID0ga2V5LnNsaWNlKDE2LCAyNCk7CgogIGlmICh0eXBlID09PSAnZW5jcnlwdCcpIHsKICAgIHRoaXMuY2lwaGVycyA9IFsKICAgICAgREVTLmNyZWF0ZSh7IHR5cGU6ICdlbmNyeXB0Jywga2V5OiBrMSB9KSwKICAgICAgREVTLmNyZWF0ZSh7IHR5cGU6ICdkZWNyeXB0Jywga2V5OiBrMiB9KSwKICAgICAgREVTLmNyZWF0ZSh7IHR5cGU6ICdlbmNyeXB0Jywga2V5OiBrMyB9KQogICAgXTsKICB9IGVsc2UgewogICAgdGhpcy5jaXBoZXJzID0gWwogICAgICBERVMuY3JlYXRlKHsgdHlwZTogJ2RlY3J5cHQnLCBrZXk6IGszIH0pLAogICAgICBERVMuY3JlYXRlKHsgdHlwZTogJ2VuY3J5cHQnLCBrZXk6IGsyIH0pLAogICAgICBERVMuY3JlYXRlKHsgdHlwZTogJ2RlY3J5cHQnLCBrZXk6IGsxIH0pCiAgICBdOwogIH0KfQoKZnVuY3Rpb24gRURFKG9wdGlvbnMpIHsKICBDaXBoZXIuY2FsbCh0aGlzLCBvcHRpb25zKTsKCiAgdmFyIHN0YXRlID0gbmV3IEVERVN0YXRlKHRoaXMudHlwZSwgdGhpcy5vcHRpb25zLmtleSk7CiAgdGhpcy5fZWRlU3RhdGUgPSBzdGF0ZTsKfQppbmhlcml0cyhFREUsIENpcGhlcik7Cgptb2R1bGUuZXhwb3J0cyA9IEVERTsKCkVERS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUob3B0aW9ucykgewogIHJldHVybiBuZXcgRURFKG9wdGlvbnMpOwp9OwoKRURFLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gX3VwZGF0ZShpbnAsIGluT2ZmLCBvdXQsIG91dE9mZikgewogIHZhciBzdGF0ZSA9IHRoaXMuX2VkZVN0YXRlOwoKICBzdGF0ZS5jaXBoZXJzWzBdLl91cGRhdGUoaW5wLCBpbk9mZiwgb3V0LCBvdXRPZmYpOwogIHN0YXRlLmNpcGhlcnNbMV0uX3VwZGF0ZShvdXQsIG91dE9mZiwgb3V0LCBvdXRPZmYpOwogIHN0YXRlLmNpcGhlcnNbMl0uX3VwZGF0ZShvdXQsIG91dE9mZiwgb3V0LCBvdXRPZmYpOwp9OwoKRURFLnByb3RvdHlwZS5fcGFkID0gREVTLnByb3RvdHlwZS5fcGFkOwpFREUucHJvdG90eXBlLl91bnBhZCA9IERFUy5wcm90b3R5cGUuX3VucGFkOwoKfSx7Ii4uL2RlcyI6ODYsImluaGVyaXRzIjoxMjksIm1pbmltYWxpc3RpYy1hc3NlcnQiOjEzNH1dLDkxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKZXhwb3J0cy5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUoYnl0ZXMsIG9mZikgewogIHZhciByZXMgPSAgKGJ5dGVzWzAgKyBvZmZdIDw8IDI0KSB8CiAgICAgICAgICAgICAoYnl0ZXNbMSArIG9mZl0gPDwgMTYpIHwKICAgICAgICAgICAgIChieXRlc1syICsgb2ZmXSA8PCA4KSB8CiAgICAgICAgICAgICBieXRlc1szICsgb2ZmXTsKICByZXR1cm4gcmVzID4+PiAwOwp9OwoKZXhwb3J0cy53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRShieXRlcywgdmFsdWUsIG9mZikgewogIGJ5dGVzWzAgKyBvZmZdID0gdmFsdWUgPj4+IDI0OwogIGJ5dGVzWzEgKyBvZmZdID0gKHZhbHVlID4+PiAxNikgJiAweGZmOwogIGJ5dGVzWzIgKyBvZmZdID0gKHZhbHVlID4+PiA4KSAmIDB4ZmY7CiAgYnl0ZXNbMyArIG9mZl0gPSB2YWx1ZSAmIDB4ZmY7Cn07CgpleHBvcnRzLmlwID0gZnVuY3Rpb24gaXAoaW5MLCBpblIsIG91dCwgb2ZmKSB7CiAgdmFyIG91dEwgPSAwOwogIHZhciBvdXRSID0gMDsKCiAgZm9yICh2YXIgaSA9IDY7IGkgPj0gMDsgaSAtPSAyKSB7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8PSAyNDsgaiArPSA4KSB7CiAgICAgIG91dEwgPDw9IDE7CiAgICAgIG91dEwgfD0gKGluUiA+Pj4gKGogKyBpKSkgJiAxOwogICAgfQogICAgZm9yICh2YXIgaiA9IDA7IGogPD0gMjQ7IGogKz0gOCkgewogICAgICBvdXRMIDw8PSAxOwogICAgICBvdXRMIHw9IChpbkwgPj4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CgogIGZvciAodmFyIGkgPSA2OyBpID49IDA7IGkgLT0gMikgewogICAgZm9yICh2YXIgaiA9IDE7IGogPD0gMjU7IGogKz0gOCkgewogICAgICBvdXRSIDw8PSAxOwogICAgICBvdXRSIHw9IChpblIgPj4+IChqICsgaSkpICYgMTsKICAgIH0KICAgIGZvciAodmFyIGogPSAxOyBqIDw9IDI1OyBqICs9IDgpIHsKICAgICAgb3V0UiA8PD0gMTsKICAgICAgb3V0UiB8PSAoaW5MID4+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgfQoKICBvdXRbb2ZmICsgMF0gPSBvdXRMID4+PiAwOwogIG91dFtvZmYgKyAxXSA9IG91dFIgPj4+IDA7Cn07CgpleHBvcnRzLnJpcCA9IGZ1bmN0aW9uIHJpcChpbkwsIGluUiwgb3V0LCBvZmYpIHsKICB2YXIgb3V0TCA9IDA7CiAgdmFyIG91dFIgPSAwOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgZm9yICh2YXIgaiA9IDI0OyBqID49IDA7IGogLT0gOCkgewogICAgICBvdXRMIDw8PSAxOwogICAgICBvdXRMIHw9IChpblIgPj4+IChqICsgaSkpICYgMTsKICAgICAgb3V0TCA8PD0gMTsKICAgICAgb3V0TCB8PSAoaW5MID4+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgfQogIGZvciAodmFyIGkgPSA0OyBpIDwgODsgaSsrKSB7CiAgICBmb3IgKHZhciBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7CiAgICAgIG91dFIgPDw9IDE7CiAgICAgIG91dFIgfD0gKGluUiA+Pj4gKGogKyBpKSkgJiAxOwogICAgICBvdXRSIDw8PSAxOwogICAgICBvdXRSIHw9IChpbkwgPj4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CgogIG91dFtvZmYgKyAwXSA9IG91dEwgPj4+IDA7CiAgb3V0W29mZiArIDFdID0gb3V0UiA+Pj4gMDsKfTsKCmV4cG9ydHMucGMxID0gZnVuY3Rpb24gcGMxKGluTCwgaW5SLCBvdXQsIG9mZikgewogIHZhciBvdXRMID0gMDsKICB2YXIgb3V0UiA9IDA7CgogIC8vIDcsIDE1LCAyMywgMzEsIDM5LCA0NywgNTUsIDYzCiAgLy8gNiwgMTQsIDIyLCAzMCwgMzksIDQ3LCA1NSwgNjMKICAvLyA1LCAxMywgMjEsIDI5LCAzOSwgNDcsIDU1LCA2MwogIC8vIDQsIDEyLCAyMCwgMjgKICBmb3IgKHZhciBpID0gNzsgaSA+PSA1OyBpLS0pIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgICAgb3V0TCA8PD0gMTsKICAgICAgb3V0TCB8PSAoaW5SID4+IChqICsgaSkpICYgMTsKICAgIH0KICAgIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgICAgb3V0TCA8PD0gMTsKICAgICAgb3V0TCB8PSAoaW5MID4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CiAgZm9yICh2YXIgaiA9IDA7IGogPD0gMjQ7IGogKz0gOCkgewogICAgb3V0TCA8PD0gMTsKICAgIG91dEwgfD0gKGluUiA+PiAoaiArIGkpKSAmIDE7CiAgfQoKICAvLyAxLCA5LCAxNywgMjUsIDMzLCA0MSwgNDksIDU3CiAgLy8gMiwgMTAsIDE4LCAyNiwgMzQsIDQyLCA1MCwgNTgKICAvLyAzLCAxMSwgMTksIDI3LCAzNSwgNDMsIDUxLCA1OQogIC8vIDM2LCA0NCwgNTIsIDYwCiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMzsgaSsrKSB7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8PSAyNDsgaiArPSA4KSB7CiAgICAgIG91dFIgPDw9IDE7CiAgICAgIG91dFIgfD0gKGluUiA+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgICBmb3IgKHZhciBqID0gMDsgaiA8PSAyNDsgaiArPSA4KSB7CiAgICAgIG91dFIgPDw9IDE7CiAgICAgIG91dFIgfD0gKGluTCA+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgfQogIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgIG91dFIgPDw9IDE7CiAgICBvdXRSIHw9IChpbkwgPj4gKGogKyBpKSkgJiAxOwogIH0KCiAgb3V0W29mZiArIDBdID0gb3V0TCA+Pj4gMDsKICBvdXRbb2ZmICsgMV0gPSBvdXRSID4+PiAwOwp9OwoKZXhwb3J0cy5yMjhzaGwgPSBmdW5jdGlvbiByMjhzaGwobnVtLCBzaGlmdCkgewogIHJldHVybiAoKG51bSA8PCBzaGlmdCkgJiAweGZmZmZmZmYpIHwgKG51bSA+Pj4gKDI4IC0gc2hpZnQpKTsKfTsKCnZhciBwYzJ0YWJsZSA9IFsKICAvLyBpbkwgPT4gb3V0TAogIDE0LCAxMSwgMTcsIDQsIDI3LCAyMywgMjUsIDAsCiAgMTMsIDIyLCA3LCAxOCwgNSwgOSwgMTYsIDI0LAogIDIsIDIwLCAxMiwgMjEsIDEsIDgsIDE1LCAyNiwKCiAgLy8gaW5SID0+IG91dFIKICAxNSwgNCwgMjUsIDE5LCA5LCAxLCAyNiwgMTYsCiAgNSwgMTEsIDIzLCA4LCAxMiwgNywgMTcsIDAsCiAgMjIsIDMsIDEwLCAxNCwgNiwgMjAsIDI3LCAyNApdOwoKZXhwb3J0cy5wYzIgPSBmdW5jdGlvbiBwYzIoaW5MLCBpblIsIG91dCwgb2ZmKSB7CiAgdmFyIG91dEwgPSAwOwogIHZhciBvdXRSID0gMDsKCiAgdmFyIGxlbiA9IHBjMnRhYmxlLmxlbmd0aCA+Pj4gMTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBvdXRMIDw8PSAxOwogICAgb3V0TCB8PSAoaW5MID4+PiBwYzJ0YWJsZVtpXSkgJiAweDE7CiAgfQogIGZvciAodmFyIGkgPSBsZW47IGkgPCBwYzJ0YWJsZS5sZW5ndGg7IGkrKykgewogICAgb3V0UiA8PD0gMTsKICAgIG91dFIgfD0gKGluUiA+Pj4gcGMydGFibGVbaV0pICYgMHgxOwogIH0KCiAgb3V0W29mZiArIDBdID0gb3V0TCA+Pj4gMDsKICBvdXRbb2ZmICsgMV0gPSBvdXRSID4+PiAwOwp9OwoKZXhwb3J0cy5leHBhbmQgPSBmdW5jdGlvbiBleHBhbmQociwgb3V0LCBvZmYpIHsKICB2YXIgb3V0TCA9IDA7CiAgdmFyIG91dFIgPSAwOwoKICBvdXRMID0gKChyICYgMSkgPDwgNSkgfCAociA+Pj4gMjcpOwogIGZvciAodmFyIGkgPSAyMzsgaSA+PSAxNTsgaSAtPSA0KSB7CiAgICBvdXRMIDw8PSA2OwogICAgb3V0TCB8PSAociA+Pj4gaSkgJiAweDNmOwogIH0KICBmb3IgKHZhciBpID0gMTE7IGkgPj0gMzsgaSAtPSA0KSB7CiAgICBvdXRSIHw9IChyID4+PiBpKSAmIDB4M2Y7CiAgICBvdXRSIDw8PSA2OwogIH0KICBvdXRSIHw9ICgociAmIDB4MWYpIDw8IDEpIHwgKHIgPj4+IDMxKTsKCiAgb3V0W29mZiArIDBdID0gb3V0TCA+Pj4gMDsKICBvdXRbb2ZmICsgMV0gPSBvdXRSID4+PiAwOwp9OwoKdmFyIHNUYWJsZSA9IFsKICAxNCwgMCwgNCwgMTUsIDEzLCA3LCAxLCA0LCAyLCAxNCwgMTUsIDIsIDExLCAxMywgOCwgMSwKICAzLCAxMCwgMTAsIDYsIDYsIDEyLCAxMiwgMTEsIDUsIDksIDksIDUsIDAsIDMsIDcsIDgsCiAgNCwgMTUsIDEsIDEyLCAxNCwgOCwgOCwgMiwgMTMsIDQsIDYsIDksIDIsIDEsIDExLCA3LAogIDE1LCA1LCAxMiwgMTEsIDksIDMsIDcsIDE0LCAzLCAxMCwgMTAsIDAsIDUsIDYsIDAsIDEzLAoKICAxNSwgMywgMSwgMTMsIDgsIDQsIDE0LCA3LCA2LCAxNSwgMTEsIDIsIDMsIDgsIDQsIDE0LAogIDksIDEyLCA3LCAwLCAyLCAxLCAxMywgMTAsIDEyLCA2LCAwLCA5LCA1LCAxMSwgMTAsIDUsCiAgMCwgMTMsIDE0LCA4LCA3LCAxMCwgMTEsIDEsIDEwLCAzLCA0LCAxNSwgMTMsIDQsIDEsIDIsCiAgNSwgMTEsIDgsIDYsIDEyLCA3LCA2LCAxMiwgOSwgMCwgMywgNSwgMiwgMTQsIDE1LCA5LAoKICAxMCwgMTMsIDAsIDcsIDksIDAsIDE0LCA5LCA2LCAzLCAzLCA0LCAxNSwgNiwgNSwgMTAsCiAgMSwgMiwgMTMsIDgsIDEyLCA1LCA3LCAxNCwgMTEsIDEyLCA0LCAxMSwgMiwgMTUsIDgsIDEsCiAgMTMsIDEsIDYsIDEwLCA0LCAxMywgOSwgMCwgOCwgNiwgMTUsIDksIDMsIDgsIDAsIDcsCiAgMTEsIDQsIDEsIDE1LCAyLCAxNCwgMTIsIDMsIDUsIDExLCAxMCwgNSwgMTQsIDIsIDcsIDEyLAoKICA3LCAxMywgMTMsIDgsIDE0LCAxMSwgMywgNSwgMCwgNiwgNiwgMTUsIDksIDAsIDEwLCAzLAogIDEsIDQsIDIsIDcsIDgsIDIsIDUsIDEyLCAxMSwgMSwgMTIsIDEwLCA0LCAxNCwgMTUsIDksCiAgMTAsIDMsIDYsIDE1LCA5LCAwLCAwLCA2LCAxMiwgMTAsIDExLCAxLCA3LCAxMywgMTMsIDgsCiAgMTUsIDksIDEsIDQsIDMsIDUsIDE0LCAxMSwgNSwgMTIsIDIsIDcsIDgsIDIsIDQsIDE0LAoKICAyLCAxNCwgMTIsIDExLCA0LCAyLCAxLCAxMiwgNywgNCwgMTAsIDcsIDExLCAxMywgNiwgMSwKICA4LCA1LCA1LCAwLCAzLCAxNSwgMTUsIDEwLCAxMywgMywgMCwgOSwgMTQsIDgsIDksIDYsCiAgNCwgMTEsIDIsIDgsIDEsIDEyLCAxMSwgNywgMTAsIDEsIDEzLCAxNCwgNywgMiwgOCwgMTMsCiAgMTUsIDYsIDksIDE1LCAxMiwgMCwgNSwgOSwgNiwgMTAsIDMsIDQsIDAsIDUsIDE0LCAzLAoKICAxMiwgMTAsIDEsIDE1LCAxMCwgNCwgMTUsIDIsIDksIDcsIDIsIDEyLCA2LCA5LCA4LCA1LAogIDAsIDYsIDEzLCAxLCAzLCAxMywgNCwgMTQsIDE0LCAwLCA3LCAxMSwgNSwgMywgMTEsIDgsCiAgOSwgNCwgMTQsIDMsIDE1LCAyLCA1LCAxMiwgMiwgOSwgOCwgNSwgMTIsIDE1LCAzLCAxMCwKICA3LCAxMSwgMCwgMTQsIDQsIDEsIDEwLCA3LCAxLCA2LCAxMywgMCwgMTEsIDgsIDYsIDEzLAoKICA0LCAxMywgMTEsIDAsIDIsIDExLCAxNCwgNywgMTUsIDQsIDAsIDksIDgsIDEsIDEzLCAxMCwKICAzLCAxNCwgMTIsIDMsIDksIDUsIDcsIDEyLCA1LCAyLCAxMCwgMTUsIDYsIDgsIDEsIDYsCiAgMSwgNiwgNCwgMTEsIDExLCAxMywgMTMsIDgsIDEyLCAxLCAzLCA0LCA3LCAxMCwgMTQsIDcsCiAgMTAsIDksIDE1LCA1LCA2LCAwLCA4LCAxNSwgMCwgMTQsIDUsIDIsIDksIDMsIDIsIDEyLAoKICAxMywgMSwgMiwgMTUsIDgsIDEzLCA0LCA4LCA2LCAxMCwgMTUsIDMsIDExLCA3LCAxLCA0LAogIDEwLCAxMiwgOSwgNSwgMywgNiwgMTQsIDExLCA1LCAwLCAwLCAxNCwgMTIsIDksIDcsIDIsCiAgNywgMiwgMTEsIDEsIDQsIDE0LCAxLCA3LCA5LCA0LCAxMiwgMTAsIDE0LCA4LCAyLCAxMywKICAwLCAxNSwgNiwgMTIsIDEwLCA5LCAxMywgMCwgMTUsIDMsIDMsIDUsIDUsIDYsIDgsIDExCl07CgpleHBvcnRzLnN1YnN0aXR1dGUgPSBmdW5jdGlvbiBzdWJzdGl0dXRlKGluTCwgaW5SKSB7CiAgdmFyIG91dCA9IDA7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgIHZhciBiID0gKGluTCA+Pj4gKDE4IC0gaSAqIDYpKSAmIDB4M2Y7CiAgICB2YXIgc2IgPSBzVGFibGVbaSAqIDB4NDAgKyBiXTsKCiAgICBvdXQgPDw9IDQ7CiAgICBvdXQgfD0gc2I7CiAgfQogIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICB2YXIgYiA9IChpblIgPj4+ICgxOCAtIGkgKiA2KSkgJiAweDNmOwogICAgdmFyIHNiID0gc1RhYmxlWzQgKiAweDQwICsgaSAqIDB4NDAgKyBiXTsKCiAgICBvdXQgPDw9IDQ7CiAgICBvdXQgfD0gc2I7CiAgfQogIHJldHVybiBvdXQgPj4+IDA7Cn07Cgp2YXIgcGVybXV0ZVRhYmxlID0gWwogIDE2LCAyNSwgMTIsIDExLCAzLCAyMCwgNCwgMTUsIDMxLCAxNywgOSwgNiwgMjcsIDE0LCAxLCAyMiwKICAzMCwgMjQsIDgsIDE4LCAwLCA1LCAyOSwgMjMsIDEzLCAxOSwgMiwgMjYsIDEwLCAyMSwgMjgsIDcKXTsKCmV4cG9ydHMucGVybXV0ZSA9IGZ1bmN0aW9uIHBlcm11dGUobnVtKSB7CiAgdmFyIG91dCA9IDA7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZXJtdXRlVGFibGUubGVuZ3RoOyBpKyspIHsKICAgIG91dCA8PD0gMTsKICAgIG91dCB8PSAobnVtID4+PiBwZXJtdXRlVGFibGVbaV0pICYgMHgxOwogIH0KICByZXR1cm4gb3V0ID4+PiAwOwp9OwoKZXhwb3J0cy5wYWRTcGxpdCA9IGZ1bmN0aW9uIHBhZFNwbGl0KG51bSwgc2l6ZSwgZ3JvdXApIHsKICB2YXIgc3RyID0gbnVtLnRvU3RyaW5nKDIpOwogIHdoaWxlIChzdHIubGVuZ3RoIDwgc2l6ZSkKICAgIHN0ciA9ICcwJyArIHN0cjsKCiAgdmFyIG91dCA9IFtdOwogIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSArPSBncm91cCkKICAgIG91dC5wdXNoKHN0ci5zbGljZShpLCBpICsgZ3JvdXApKTsKICByZXR1cm4gb3V0LmpvaW4oJyAnKTsKfTsKCn0se31dLDkyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgZ2VuZXJhdGVQcmltZSA9IHJlcXVpcmUoJy4vbGliL2dlbmVyYXRlUHJpbWUnKQp2YXIgcHJpbWVzID0gcmVxdWlyZSgnLi9saWIvcHJpbWVzLmpzb24nKQoKdmFyIERIID0gcmVxdWlyZSgnLi9saWIvZGgnKQoKZnVuY3Rpb24gZ2V0RGlmZmllSGVsbG1hbiAobW9kKSB7CiAgdmFyIHByaW1lID0gbmV3IEJ1ZmZlcihwcmltZXNbbW9kXS5wcmltZSwgJ2hleCcpCiAgdmFyIGdlbiA9IG5ldyBCdWZmZXIocHJpbWVzW21vZF0uZ2VuLCAnaGV4JykKCiAgcmV0dXJuIG5ldyBESChwcmltZSwgZ2VuKQp9Cgp2YXIgRU5DT0RJTkdTID0gewogICdiaW5hcnknOiB0cnVlLCAnaGV4JzogdHJ1ZSwgJ2Jhc2U2NCc6IHRydWUKfQoKZnVuY3Rpb24gY3JlYXRlRGlmZmllSGVsbG1hbiAocHJpbWUsIGVuYywgZ2VuZXJhdG9yLCBnZW5jKSB7CiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihlbmMpIHx8IEVOQ09ESU5HU1tlbmNdID09PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiBjcmVhdGVEaWZmaWVIZWxsbWFuKHByaW1lLCAnYmluYXJ5JywgZW5jLCBnZW5lcmF0b3IpCiAgfQoKICBlbmMgPSBlbmMgfHwgJ2JpbmFyeScKICBnZW5jID0gZ2VuYyB8fCAnYmluYXJ5JwogIGdlbmVyYXRvciA9IGdlbmVyYXRvciB8fCBuZXcgQnVmZmVyKFsyXSkKCiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoZ2VuZXJhdG9yKSkgewogICAgZ2VuZXJhdG9yID0gbmV3IEJ1ZmZlcihnZW5lcmF0b3IsIGdlbmMpCiAgfQoKICBpZiAodHlwZW9mIHByaW1lID09PSAnbnVtYmVyJykgewogICAgcmV0dXJuIG5ldyBESChnZW5lcmF0ZVByaW1lKHByaW1lLCBnZW5lcmF0b3IpLCBnZW5lcmF0b3IsIHRydWUpCiAgfQoKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihwcmltZSkpIHsKICAgIHByaW1lID0gbmV3IEJ1ZmZlcihwcmltZSwgZW5jKQogIH0KCiAgcmV0dXJuIG5ldyBESChwcmltZSwgZ2VuZXJhdG9yLCB0cnVlKQp9CgpleHBvcnRzLkRpZmZpZUhlbGxtYW5Hcm91cCA9IGV4cG9ydHMuY3JlYXRlRGlmZmllSGVsbG1hbkdyb3VwID0gZXhwb3J0cy5nZXREaWZmaWVIZWxsbWFuID0gZ2V0RGlmZmllSGVsbG1hbgpleHBvcnRzLmNyZWF0ZURpZmZpZUhlbGxtYW4gPSBleHBvcnRzLkRpZmZpZUhlbGxtYW4gPSBjcmVhdGVEaWZmaWVIZWxsbWFuCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9saWIvZGgiOjkzLCIuL2xpYi9nZW5lcmF0ZVByaW1lIjo5NCwiLi9saWIvcHJpbWVzLmpzb24iOjk1LCJidWZmZXIiOjc2fV0sOTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBNaWxsZXJSYWJpbiA9IHJlcXVpcmUoJ21pbGxlci1yYWJpbicpOwp2YXIgbWlsbGVyUmFiaW4gPSBuZXcgTWlsbGVyUmFiaW4oKTsKdmFyIFRXRU5UWUZPVVIgPSBuZXcgQk4oMjQpOwp2YXIgRUxFVkVOID0gbmV3IEJOKDExKTsKdmFyIFRFTiA9IG5ldyBCTigxMCk7CnZhciBUSFJFRSA9IG5ldyBCTigzKTsKdmFyIFNFVkVOID0gbmV3IEJOKDcpOwp2YXIgcHJpbWVzID0gcmVxdWlyZSgnLi9nZW5lcmF0ZVByaW1lJyk7CnZhciByYW5kb21CeXRlcyA9IHJlcXVpcmUoJ3JhbmRvbWJ5dGVzJyk7Cm1vZHVsZS5leHBvcnRzID0gREg7CgpmdW5jdGlvbiBzZXRQdWJsaWNLZXkocHViLCBlbmMpIHsKICBlbmMgPSBlbmMgfHwgJ3V0ZjgnOwogIGlmICghQnVmZmVyLmlzQnVmZmVyKHB1YikpIHsKICAgIHB1YiA9IG5ldyBCdWZmZXIocHViLCBlbmMpOwogIH0KICB0aGlzLl9wdWIgPSBuZXcgQk4ocHViKTsKICByZXR1cm4gdGhpczsKfQoKZnVuY3Rpb24gc2V0UHJpdmF0ZUtleShwcml2LCBlbmMpIHsKICBlbmMgPSBlbmMgfHwgJ3V0ZjgnOwogIGlmICghQnVmZmVyLmlzQnVmZmVyKHByaXYpKSB7CiAgICBwcml2ID0gbmV3IEJ1ZmZlcihwcml2LCBlbmMpOwogIH0KICB0aGlzLl9wcml2ID0gbmV3IEJOKHByaXYpOwogIHJldHVybiB0aGlzOwp9Cgp2YXIgcHJpbWVDYWNoZSA9IHt9OwpmdW5jdGlvbiBjaGVja1ByaW1lKHByaW1lLCBnZW5lcmF0b3IpIHsKICB2YXIgZ2VuID0gZ2VuZXJhdG9yLnRvU3RyaW5nKCdoZXgnKTsKICB2YXIgaGV4ID0gW2dlbiwgcHJpbWUudG9TdHJpbmcoMTYpXS5qb2luKCdfJyk7CiAgaWYgKGhleCBpbiBwcmltZUNhY2hlKSB7CiAgICByZXR1cm4gcHJpbWVDYWNoZVtoZXhdOwogIH0KICB2YXIgZXJyb3IgPSAwOwoKICBpZiAocHJpbWUuaXNFdmVuKCkgfHwKICAgICFwcmltZXMuc2ltcGxlU2lldmUgfHwKICAgICFwcmltZXMuZmVybWF0VGVzdChwcmltZSkgfHwKICAgICFtaWxsZXJSYWJpbi50ZXN0KHByaW1lKSkgewogICAgLy9ub3QgYSBwcmltZSBzbyArMQogICAgZXJyb3IgKz0gMTsKCiAgICBpZiAoZ2VuID09PSAnMDInIHx8IGdlbiA9PT0gJzA1JykgewogICAgICAvLyB3ZSdkIGJlIGFibGUgdG8gY2hlY2sgdGhlIGdlbmVyYXRvcgogICAgICAvLyBpdCB3b3VsZCBmYWlsIHNvICs4CiAgICAgIGVycm9yICs9IDg7CiAgICB9IGVsc2UgewogICAgICAvL3dlIHdvdWxkbid0IGJlIGFibGUgdG8gdGVzdCB0aGUgZ2VuZXJhdG9yCiAgICAgIC8vIHNvICs0CiAgICAgIGVycm9yICs9IDQ7CiAgICB9CiAgICBwcmltZUNhY2hlW2hleF0gPSBlcnJvcjsKICAgIHJldHVybiBlcnJvcjsKICB9CiAgaWYgKCFtaWxsZXJSYWJpbi50ZXN0KHByaW1lLnNocm4oMSkpKSB7CiAgICAvL25vdCBhIHNhZmUgcHJpbWUKICAgIGVycm9yICs9IDI7CiAgfQogIHZhciByZW07CiAgc3dpdGNoIChnZW4pIHsKICAgIGNhc2UgJzAyJzoKICAgICAgaWYgKHByaW1lLm1vZChUV0VOVFlGT1VSKS5jbXAoRUxFVkVOKSkgewogICAgICAgIC8vIHVuc3VpZGFibGUgZ2VuZXJhdG9yCiAgICAgICAgZXJyb3IgKz0gODsKICAgICAgfQogICAgICBicmVhazsKICAgIGNhc2UgJzA1JzoKICAgICAgcmVtID0gcHJpbWUubW9kKFRFTik7CiAgICAgIGlmIChyZW0uY21wKFRIUkVFKSAmJiByZW0uY21wKFNFVkVOKSkgewogICAgICAgIC8vIHByaW1lIG1vZCAxMCBuZWVkcyB0byBlcXVhbCAzIG9yIDcKICAgICAgICBlcnJvciArPSA4OwogICAgICB9CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgZXJyb3IgKz0gNDsKICB9CiAgcHJpbWVDYWNoZVtoZXhdID0gZXJyb3I7CiAgcmV0dXJuIGVycm9yOwp9CgpmdW5jdGlvbiBESChwcmltZSwgZ2VuZXJhdG9yLCBtYWxsZWFibGUpIHsKICB0aGlzLnNldEdlbmVyYXRvcihnZW5lcmF0b3IpOwogIHRoaXMuX19wcmltZSA9IG5ldyBCTihwcmltZSk7CiAgdGhpcy5fcHJpbWUgPSBCTi5tb250KHRoaXMuX19wcmltZSk7CiAgdGhpcy5fcHJpbWVMZW4gPSBwcmltZS5sZW5ndGg7CiAgdGhpcy5fcHViID0gdW5kZWZpbmVkOwogIHRoaXMuX3ByaXYgPSB1bmRlZmluZWQ7CiAgdGhpcy5fcHJpbWVDb2RlID0gdW5kZWZpbmVkOwogIGlmIChtYWxsZWFibGUpIHsKICAgIHRoaXMuc2V0UHVibGljS2V5ID0gc2V0UHVibGljS2V5OwogICAgdGhpcy5zZXRQcml2YXRlS2V5ID0gc2V0UHJpdmF0ZUtleTsKICB9IGVsc2UgewogICAgdGhpcy5fcHJpbWVDb2RlID0gODsKICB9Cn0KT2JqZWN0LmRlZmluZVByb3BlcnR5KERILnByb3RvdHlwZSwgJ3ZlcmlmeUVycm9yJywgewogIGVudW1lcmFibGU6IHRydWUsCiAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodHlwZW9mIHRoaXMuX3ByaW1lQ29kZSAhPT0gJ251bWJlcicpIHsKICAgICAgdGhpcy5fcHJpbWVDb2RlID0gY2hlY2tQcmltZSh0aGlzLl9fcHJpbWUsIHRoaXMuX19nZW4pOwogICAgfQogICAgcmV0dXJuIHRoaXMuX3ByaW1lQ29kZTsKICB9Cn0pOwpESC5wcm90b3R5cGUuZ2VuZXJhdGVLZXlzID0gZnVuY3Rpb24gKCkgewogIGlmICghdGhpcy5fcHJpdikgewogICAgdGhpcy5fcHJpdiA9IG5ldyBCTihyYW5kb21CeXRlcyh0aGlzLl9wcmltZUxlbikpOwogIH0KICB0aGlzLl9wdWIgPSB0aGlzLl9nZW4udG9SZWQodGhpcy5fcHJpbWUpLnJlZFBvdyh0aGlzLl9wcml2KS5mcm9tUmVkKCk7CiAgcmV0dXJuIHRoaXMuZ2V0UHVibGljS2V5KCk7Cn07CgpESC5wcm90b3R5cGUuY29tcHV0ZVNlY3JldCA9IGZ1bmN0aW9uIChvdGhlcikgewogIG90aGVyID0gbmV3IEJOKG90aGVyKTsKICBvdGhlciA9IG90aGVyLnRvUmVkKHRoaXMuX3ByaW1lKTsKICB2YXIgc2VjcmV0ID0gb3RoZXIucmVkUG93KHRoaXMuX3ByaXYpLmZyb21SZWQoKTsKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcihzZWNyZXQudG9BcnJheSgpKTsKICB2YXIgcHJpbWUgPSB0aGlzLmdldFByaW1lKCk7CiAgaWYgKG91dC5sZW5ndGggPCBwcmltZS5sZW5ndGgpIHsKICAgIHZhciBmcm9udCA9IG5ldyBCdWZmZXIocHJpbWUubGVuZ3RoIC0gb3V0Lmxlbmd0aCk7CiAgICBmcm9udC5maWxsKDApOwogICAgb3V0ID0gQnVmZmVyLmNvbmNhdChbZnJvbnQsIG91dF0pOwogIH0KICByZXR1cm4gb3V0Owp9OwoKREgucHJvdG90eXBlLmdldFB1YmxpY0tleSA9IGZ1bmN0aW9uIGdldFB1YmxpY0tleShlbmMpIHsKICByZXR1cm4gZm9ybWF0UmV0dXJuVmFsdWUodGhpcy5fcHViLCBlbmMpOwp9OwoKREgucHJvdG90eXBlLmdldFByaXZhdGVLZXkgPSBmdW5jdGlvbiBnZXRQcml2YXRlS2V5KGVuYykgewogIHJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZSh0aGlzLl9wcml2LCBlbmMpOwp9OwoKREgucHJvdG90eXBlLmdldFByaW1lID0gZnVuY3Rpb24gKGVuYykgewogIHJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZSh0aGlzLl9fcHJpbWUsIGVuYyk7Cn07CgpESC5wcm90b3R5cGUuZ2V0R2VuZXJhdG9yID0gZnVuY3Rpb24gKGVuYykgewogIHJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZSh0aGlzLl9nZW4sIGVuYyk7Cn07CgpESC5wcm90b3R5cGUuc2V0R2VuZXJhdG9yID0gZnVuY3Rpb24gKGdlbiwgZW5jKSB7CiAgZW5jID0gZW5jIHx8ICd1dGY4JzsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihnZW4pKSB7CiAgICBnZW4gPSBuZXcgQnVmZmVyKGdlbiwgZW5jKTsKICB9CiAgdGhpcy5fX2dlbiA9IGdlbjsKICB0aGlzLl9nZW4gPSBuZXcgQk4oZ2VuKTsKICByZXR1cm4gdGhpczsKfTsKCmZ1bmN0aW9uIGZvcm1hdFJldHVyblZhbHVlKGJuLCBlbmMpIHsKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihibi50b0FycmF5KCkpOwogIGlmICghZW5jKSB7CiAgICByZXR1cm4gYnVmOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYnVmLnRvU3RyaW5nKGVuYyk7CiAgfQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9nZW5lcmF0ZVByaW1lIjo5NCwiYm4uanMiOjQyLCJidWZmZXIiOjc2LCJtaWxsZXItcmFiaW4iOjEzMywicmFuZG9tYnl0ZXMiOjE0OH1dLDk0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIHJhbmRvbUJ5dGVzID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKTsKbW9kdWxlLmV4cG9ydHMgPSBmaW5kUHJpbWU7CmZpbmRQcmltZS5zaW1wbGVTaWV2ZSA9IHNpbXBsZVNpZXZlOwpmaW5kUHJpbWUuZmVybWF0VGVzdCA9IGZlcm1hdFRlc3Q7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBUV0VOVFlGT1VSID0gbmV3IEJOKDI0KTsKdmFyIE1pbGxlclJhYmluID0gcmVxdWlyZSgnbWlsbGVyLXJhYmluJyk7CnZhciBtaWxsZXJSYWJpbiA9IG5ldyBNaWxsZXJSYWJpbigpOwp2YXIgT05FID0gbmV3IEJOKDEpOwp2YXIgVFdPID0gbmV3IEJOKDIpOwp2YXIgRklWRSA9IG5ldyBCTig1KTsKdmFyIFNJWFRFRU4gPSBuZXcgQk4oMTYpOwp2YXIgRUlHSFQgPSBuZXcgQk4oOCk7CnZhciBURU4gPSBuZXcgQk4oMTApOwp2YXIgVEhSRUUgPSBuZXcgQk4oMyk7CnZhciBTRVZFTiA9IG5ldyBCTig3KTsKdmFyIEVMRVZFTiA9IG5ldyBCTigxMSk7CnZhciBGT1VSID0gbmV3IEJOKDQpOwp2YXIgVFdFTFZFID0gbmV3IEJOKDEyKTsKdmFyIHByaW1lcyA9IG51bGw7CgpmdW5jdGlvbiBfZ2V0UHJpbWVzKCkgewogIGlmIChwcmltZXMgIT09IG51bGwpCiAgICByZXR1cm4gcHJpbWVzOwoKICB2YXIgbGltaXQgPSAweDEwMDAwMDsKICB2YXIgcmVzID0gW107CiAgcmVzWzBdID0gMjsKICBmb3IgKHZhciBpID0gMSwgayA9IDM7IGsgPCBsaW1pdDsgayArPSAyKSB7CiAgICB2YXIgc3FydCA9IE1hdGguY2VpbChNYXRoLnNxcnQoaykpOwogICAgZm9yICh2YXIgaiA9IDA7IGogPCBpICYmIHJlc1tqXSA8PSBzcXJ0OyBqKyspCiAgICAgIGlmIChrICUgcmVzW2pdID09PSAwKQogICAgICAgIGJyZWFrOwoKICAgIGlmIChpICE9PSBqICYmIHJlc1tqXSA8PSBzcXJ0KQogICAgICBjb250aW51ZTsKCiAgICByZXNbaSsrXSA9IGs7CiAgfQogIHByaW1lcyA9IHJlczsKICByZXR1cm4gcmVzOwp9CgpmdW5jdGlvbiBzaW1wbGVTaWV2ZShwKSB7CiAgdmFyIHByaW1lcyA9IF9nZXRQcmltZXMoKTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmltZXMubGVuZ3RoOyBpKyspCiAgICBpZiAocC5tb2RuKHByaW1lc1tpXSkgPT09IDApIHsKICAgICAgaWYgKHAuY21wbihwcmltZXNbaV0pID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogIHJldHVybiB0cnVlOwp9CgpmdW5jdGlvbiBmZXJtYXRUZXN0KHApIHsKICB2YXIgcmVkID0gQk4ubW9udChwKTsKICByZXR1cm4gVFdPLnRvUmVkKHJlZCkucmVkUG93KHAuc3VibigxKSkuZnJvbVJlZCgpLmNtcG4oMSkgPT09IDA7Cn0KCmZ1bmN0aW9uIGZpbmRQcmltZShiaXRzLCBnZW4pIHsKICBpZiAoYml0cyA8IDE2KSB7CiAgICAvLyB0aGlzIGlzIHdoYXQgb3BlbnNzbCBkb2VzCiAgICBpZiAoZ2VuID09PSAyIHx8IGdlbiA9PT0gNSkgewogICAgICByZXR1cm4gbmV3IEJOKFsweDhjLCAweDdiXSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmV3IEJOKFsweDhjLCAweDI3XSk7CiAgICB9CiAgfQogIGdlbiA9IG5ldyBCTihnZW4pOwoKICB2YXIgbnVtLCBuMjsKCiAgd2hpbGUgKHRydWUpIHsKICAgIG51bSA9IG5ldyBCTihyYW5kb21CeXRlcyhNYXRoLmNlaWwoYml0cyAvIDgpKSk7CiAgICB3aGlsZSAobnVtLmJpdExlbmd0aCgpID4gYml0cykgewogICAgICBudW0uaXNocm4oMSk7CiAgICB9CiAgICBpZiAobnVtLmlzRXZlbigpKSB7CiAgICAgIG51bS5pYWRkKE9ORSk7CiAgICB9CiAgICBpZiAoIW51bS50ZXN0bigxKSkgewogICAgICBudW0uaWFkZChUV08pOwogICAgfQogICAgaWYgKCFnZW4uY21wKFRXTykpIHsKICAgICAgd2hpbGUgKG51bS5tb2QoVFdFTlRZRk9VUikuY21wKEVMRVZFTikpIHsKICAgICAgICBudW0uaWFkZChGT1VSKTsKICAgICAgfQogICAgfSBlbHNlIGlmICghZ2VuLmNtcChGSVZFKSkgewogICAgICB3aGlsZSAobnVtLm1vZChURU4pLmNtcChUSFJFRSkpIHsKICAgICAgICBudW0uaWFkZChGT1VSKTsKICAgICAgfQogICAgfQogICAgbjIgPSBudW0uc2hybigxKTsKICAgIGlmIChzaW1wbGVTaWV2ZShuMikgJiYgc2ltcGxlU2lldmUobnVtKSAmJgogICAgICBmZXJtYXRUZXN0KG4yKSAmJiBmZXJtYXRUZXN0KG51bSkgJiYKICAgICAgbWlsbGVyUmFiaW4udGVzdChuMikgJiYgbWlsbGVyUmFiaW4udGVzdChudW0pKSB7CiAgICAgIHJldHVybiBudW07CiAgICB9CiAgfQoKfQoKfSx7ImJuLmpzIjo0MiwibWlsbGVyLXJhYmluIjoxMzMsInJhbmRvbWJ5dGVzIjoxNDh9XSw5NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsKICAgICJtb2RwMSI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzYTM2MjBmZmZmZmZmZmZmZmZmZmZmIgogICAgfSwKICAgICJtb2RwMiI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzN2VkNmIwYmZmNWNiNmY0MDZiN2VkZWUzODZiZmI1YTg5OWZhNWFlOWYyNDExN2M0YjFmZTY0OTI4NjY1MWVjZTY1MzgxZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0sCiAgICAibW9kcDUiOiB7CiAgICAgICAgImdlbiI6ICIwMiIsCiAgICAgICAgInByaW1lIjogImZmZmZmZmZmZmZmZmZmZmZjOTBmZGFhMjIxNjhjMjM0YzRjNjYyOGI4MGRjMWNkMTI5MDI0ZTA4OGE2N2NjNzQwMjBiYmVhNjNiMTM5YjIyNTE0YTA4Nzk4ZTM0MDRkZGVmOTUxOWIzY2QzYTQzMWIzMDJiMGE2ZGYyNWYxNDM3NGZlMTM1NmQ2ZDUxYzI0NWU0ODViNTc2NjI1ZTdlYzZmNDRjNDJlOWE2MzdlZDZiMGJmZjVjYjZmNDA2YjdlZGVlMzg2YmZiNWE4OTlmYTVhZTlmMjQxMTdjNGIxZmU2NDkyODY2NTFlY2U0NWIzZGMyMDA3Y2I4YTE2M2JmMDU5OGRhNDgzNjFjNTVkMzlhNjkxNjNmYThmZDI0Y2Y1ZjgzNjU1ZDIzZGNhM2FkOTYxYzYyZjM1NjIwODU1MmJiOWVkNTI5MDc3MDk2OTY2ZDY3MGMzNTRlNGFiYzk4MDRmMTc0NmMwOGNhMjM3MzI3ZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0sCiAgICAibW9kcDE0IjogewogICAgICAgICJnZW4iOiAiMDIiLAogICAgICAgICJwcmltZSI6ICJmZmZmZmZmZmZmZmZmZmZmYzkwZmRhYTIyMTY4YzIzNGM0YzY2MjhiODBkYzFjZDEyOTAyNGUwODhhNjdjYzc0MDIwYmJlYTYzYjEzOWIyMjUxNGEwODc5OGUzNDA0ZGRlZjk1MTliM2NkM2E0MzFiMzAyYjBhNmRmMjVmMTQzNzRmZTEzNTZkNmQ1MWMyNDVlNDg1YjU3NjYyNWU3ZWM2ZjQ0YzQyZTlhNjM3ZWQ2YjBiZmY1Y2I2ZjQwNmI3ZWRlZTM4NmJmYjVhODk5ZmE1YWU5ZjI0MTE3YzRiMWZlNjQ5Mjg2NjUxZWNlNDViM2RjMjAwN2NiOGExNjNiZjA1OThkYTQ4MzYxYzU1ZDM5YTY5MTYzZmE4ZmQyNGNmNWY4MzY1NWQyM2RjYTNhZDk2MWM2MmYzNTYyMDg1NTJiYjllZDUyOTA3NzA5Njk2NmQ2NzBjMzU0ZTRhYmM5ODA0ZjE3NDZjMDhjYTE4MjE3YzMyOTA1ZTQ2MmUzNmNlM2JlMzllNzcyYzE4MGU4NjAzOWIyNzgzYTJlYzA3YTI4ZmI1YzU1ZGYwNmY0YzUyYzlkZTJiY2JmNjk1NTgxNzE4Mzk5NTQ5N2NlYTk1NmFlNTE1ZDIyNjE4OThmYTA1MTAxNTcyOGU1YThhYWNhYTY4ZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0sCiAgICAibW9kcDE1IjogewogICAgICAgICJnZW4iOiAiMDIiLAogICAgICAgICJwcmltZSI6ICJmZmZmZmZmZmZmZmZmZmZmYzkwZmRhYTIyMTY4YzIzNGM0YzY2MjhiODBkYzFjZDEyOTAyNGUwODhhNjdjYzc0MDIwYmJlYTYzYjEzOWIyMjUxNGEwODc5OGUzNDA0ZGRlZjk1MTliM2NkM2E0MzFiMzAyYjBhNmRmMjVmMTQzNzRmZTEzNTZkNmQ1MWMyNDVlNDg1YjU3NjYyNWU3ZWM2ZjQ0YzQyZTlhNjM3ZWQ2YjBiZmY1Y2I2ZjQwNmI3ZWRlZTM4NmJmYjVhODk5ZmE1YWU5ZjI0MTE3YzRiMWZlNjQ5Mjg2NjUxZWNlNDViM2RjMjAwN2NiOGExNjNiZjA1OThkYTQ4MzYxYzU1ZDM5YTY5MTYzZmE4ZmQyNGNmNWY4MzY1NWQyM2RjYTNhZDk2MWM2MmYzNTYyMDg1NTJiYjllZDUyOTA3NzA5Njk2NmQ2NzBjMzU0ZTRhYmM5ODA0ZjE3NDZjMDhjYTE4MjE3YzMyOTA1ZTQ2MmUzNmNlM2JlMzllNzcyYzE4MGU4NjAzOWIyNzgzYTJlYzA3YTI4ZmI1YzU1ZGYwNmY0YzUyYzlkZTJiY2JmNjk1NTgxNzE4Mzk5NTQ5N2NlYTk1NmFlNTE1ZDIyNjE4OThmYTA1MTAxNTcyOGU1YThhYWFjNDJkYWQzMzE3MGQwNDUwN2EzM2E4NTUyMWFiZGYxY2JhNjRlY2ZiODUwNDU4ZGJlZjBhOGFlYTcxNTc1ZDA2MGM3ZGIzOTcwZjg1YTZlMWU0YzdhYmY1YWU4Y2RiMDkzM2Q3MWU4Yzk0ZTA0YTI1NjE5ZGNlZTNkMjI2MWFkMmVlNmJmMTJmZmEwNmQ5OGEwODY0ZDg3NjAyNzMzZWM4NmE2NDUyMWYyYjE4MTc3YjIwMGNiYmUxMTc1NzdhNjE1ZDZjNzcwOTg4YzBiYWQ5NDZlMjA4ZTI0ZmEwNzRlNWFiMzE0M2RiNWJmY2UwZmQxMDhlNGI4MmQxMjBhOTNhZDJjYWZmZmZmZmZmZmZmZmZmZmYiCiAgICB9LAogICAgIm1vZHAxNiI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzN2VkNmIwYmZmNWNiNmY0MDZiN2VkZWUzODZiZmI1YTg5OWZhNWFlOWYyNDExN2M0YjFmZTY0OTI4NjY1MWVjZTQ1YjNkYzIwMDdjYjhhMTYzYmYwNTk4ZGE0ODM2MWM1NWQzOWE2OTE2M2ZhOGZkMjRjZjVmODM2NTVkMjNkY2EzYWQ5NjFjNjJmMzU2MjA4NTUyYmI5ZWQ1MjkwNzcwOTY5NjZkNjcwYzM1NGU0YWJjOTgwNGYxNzQ2YzA4Y2ExODIxN2MzMjkwNWU0NjJlMzZjZTNiZTM5ZTc3MmMxODBlODYwMzliMjc4M2EyZWMwN2EyOGZiNWM1NWRmMDZmNGM1MmM5ZGUyYmNiZjY5NTU4MTcxODM5OTU0OTdjZWE5NTZhZTUxNWQyMjYxODk4ZmEwNTEwMTU3MjhlNWE4YWFhYzQyZGFkMzMxNzBkMDQ1MDdhMzNhODU1MjFhYmRmMWNiYTY0ZWNmYjg1MDQ1OGRiZWYwYThhZWE3MTU3NWQwNjBjN2RiMzk3MGY4NWE2ZTFlNGM3YWJmNWFlOGNkYjA5MzNkNzFlOGM5NGUwNGEyNTYxOWRjZWUzZDIyNjFhZDJlZTZiZjEyZmZhMDZkOThhMDg2NGQ4NzYwMjczM2VjODZhNjQ1MjFmMmIxODE3N2IyMDBjYmJlMTE3NTc3YTYxNWQ2Yzc3MDk4OGMwYmFkOTQ2ZTIwOGUyNGZhMDc0ZTVhYjMxNDNkYjViZmNlMGZkMTA4ZTRiODJkMTIwYTkyMTA4MDExYTcyM2MxMmE3ODdlNmQ3ODg3MTlhMTBiZGJhNWIyNjk5YzMyNzE4NmFmNGUyM2MxYTk0NjgzNGI2MTUwYmRhMjU4M2U5Y2EyYWQ0NGNlOGRiYmJjMmRiMDRkZThlZjkyZThlZmMxNDFmYmVjYWE2Mjg3YzU5NDc0ZTZiYzA1ZDk5YjI5NjRmYTA5MGMzYTIyMzNiYTE4NjUxNWJlN2VkMWY2MTI5NzBjZWUyZDdhZmI4MWJkZDc2MjE3MDQ4MWNkMDA2OTEyN2Q1YjA1YWE5OTNiNGVhOTg4ZDhmZGRjMTg2ZmZiN2RjOTBhNmMwOGY0ZGY0MzVjOTM0MDYzMTk5ZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0sCiAgICAibW9kcDE3IjogewogICAgICAgICJnZW4iOiAiMDIiLAogICAgICAgICJwcmltZSI6ICJmZmZmZmZmZmZmZmZmZmZmYzkwZmRhYTIyMTY4YzIzNGM0YzY2MjhiODBkYzFjZDEyOTAyNGUwODhhNjdjYzc0MDIwYmJlYTYzYjEzOWIyMjUxNGEwODc5OGUzNDA0ZGRlZjk1MTliM2NkM2E0MzFiMzAyYjBhNmRmMjVmMTQzNzRmZTEzNTZkNmQ1MWMyNDVlNDg1YjU3NjYyNWU3ZWM2ZjQ0YzQyZTlhNjM3ZWQ2YjBiZmY1Y2I2ZjQwNmI3ZWRlZTM4NmJmYjVhODk5ZmE1YWU5ZjI0MTE3YzRiMWZlNjQ5Mjg2NjUxZWNlNDViM2RjMjAwN2NiOGExNjNiZjA1OThkYTQ4MzYxYzU1ZDM5YTY5MTYzZmE4ZmQyNGNmNWY4MzY1NWQyM2RjYTNhZDk2MWM2MmYzNTYyMDg1NTJiYjllZDUyOTA3NzA5Njk2NmQ2NzBjMzU0ZTRhYmM5ODA0ZjE3NDZjMDhjYTE4MjE3YzMyOTA1ZTQ2MmUzNmNlM2JlMzllNzcyYzE4MGU4NjAzOWIyNzgzYTJlYzA3YTI4ZmI1YzU1ZGYwNmY0YzUyYzlkZTJiY2JmNjk1NTgxNzE4Mzk5NTQ5N2NlYTk1NmFlNTE1ZDIyNjE4OThmYTA1MTAxNTcyOGU1YThhYWFjNDJkYWQzMzE3MGQwNDUwN2EzM2E4NTUyMWFiZGYxY2JhNjRlY2ZiODUwNDU4ZGJlZjBhOGFlYTcxNTc1ZDA2MGM3ZGIzOTcwZjg1YTZlMWU0YzdhYmY1YWU4Y2RiMDkzM2Q3MWU4Yzk0ZTA0YTI1NjE5ZGNlZTNkMjI2MWFkMmVlNmJmMTJmZmEwNmQ5OGEwODY0ZDg3NjAyNzMzZWM4NmE2NDUyMWYyYjE4MTc3YjIwMGNiYmUxMTc1NzdhNjE1ZDZjNzcwOTg4YzBiYWQ5NDZlMjA4ZTI0ZmEwNzRlNWFiMzE0M2RiNWJmY2UwZmQxMDhlNGI4MmQxMjBhOTIxMDgwMTFhNzIzYzEyYTc4N2U2ZDc4ODcxOWExMGJkYmE1YjI2OTljMzI3MTg2YWY0ZTIzYzFhOTQ2ODM0YjYxNTBiZGEyNTgzZTljYTJhZDQ0Y2U4ZGJiYmMyZGIwNGRlOGVmOTJlOGVmYzE0MWZiZWNhYTYyODdjNTk0NzRlNmJjMDVkOTliMjk2NGZhMDkwYzNhMjIzM2JhMTg2NTE1YmU3ZWQxZjYxMjk3MGNlZTJkN2FmYjgxYmRkNzYyMTcwNDgxY2QwMDY5MTI3ZDViMDVhYTk5M2I0ZWE5ODhkOGZkZGMxODZmZmI3ZGM5MGE2YzA4ZjRkZjQzNWM5MzQwMjg0OTIzNmMzZmFiNGQyN2M3MDI2YzFkNGRjYjI2MDI2NDZkZWM5NzUxZTc2M2RiYTM3YmRmOGZmOTQwNmFkOWU1MzBlZTVkYjM4MmY0MTMwMDFhZWIwNmE1M2VkOTAyN2Q4MzExNzk3MjdiMDg2NWE4OTE4ZGEzZWRiZWJjZjliMTRlZDQ0Y2U2Y2JhY2VkNGJiMWJkYjdmMTQ0N2U2Y2MyNTRiMzMyMDUxNTEyYmQ3YWY0MjZmYjhmNDAxMzc4Y2QyYmY1OTgzY2EwMWM2NGI5MmVjZjAzMmVhMTVkMTcyMWQwM2Y0ODJkN2NlNmU3NGZlZjZkNTVlNzAyZjQ2OTgwYzgyYjVhODQwMzE5MDBiMWM5ZTU5ZTdjOTdmYmVjN2U4ZjMyM2E5N2E3ZTM2Y2M4OGJlMGYxZDQ1YjdmZjU4NWFjNTRiZDQwN2IyMmI0MTU0YWFjYzhmNmQ3ZWJmNDhlMWQ4MTRjYzVlZDIwZjgwMzdlMGE3OTcxNWVlZjI5YmUzMjgwNmExZDU4YmI3YzVkYTc2ZjU1MGFhM2Q4YTFmYmZmMGViMTljY2IxYTMxM2Q1NWNkYTU2YzllYzJlZjI5NjMyMzg3ZmU4ZDc2ZTNjMDQ2ODA0M2U4ZjY2M2Y0ODYwZWUxMmJmMmQ1YjBiNzQ3NGQ2ZTY5NGY5MWU2ZGNjNDAyNGZmZmZmZmZmZmZmZmZmZmYiCiAgICB9LAogICAgIm1vZHAxOCI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzN2VkNmIwYmZmNWNiNmY0MDZiN2VkZWUzODZiZmI1YTg5OWZhNWFlOWYyNDExN2M0YjFmZTY0OTI4NjY1MWVjZTQ1YjNkYzIwMDdjYjhhMTYzYmYwNTk4ZGE0ODM2MWM1NWQzOWE2OTE2M2ZhOGZkMjRjZjVmODM2NTVkMjNkY2EzYWQ5NjFjNjJmMzU2MjA4NTUyYmI5ZWQ1MjkwNzcwOTY5NjZkNjcwYzM1NGU0YWJjOTgwNGYxNzQ2YzA4Y2ExODIxN2MzMjkwNWU0NjJlMzZjZTNiZTM5ZTc3MmMxODBlODYwMzliMjc4M2EyZWMwN2EyOGZiNWM1NWRmMDZmNGM1MmM5ZGUyYmNiZjY5NTU4MTcxODM5OTU0OTdjZWE5NTZhZTUxNWQyMjYxODk4ZmEwNTEwMTU3MjhlNWE4YWFhYzQyZGFkMzMxNzBkMDQ1MDdhMzNhODU1MjFhYmRmMWNiYTY0ZWNmYjg1MDQ1OGRiZWYwYThhZWE3MTU3NWQwNjBjN2RiMzk3MGY4NWE2ZTFlNGM3YWJmNWFlOGNkYjA5MzNkNzFlOGM5NGUwNGEyNTYxOWRjZWUzZDIyNjFhZDJlZTZiZjEyZmZhMDZkOThhMDg2NGQ4NzYwMjczM2VjODZhNjQ1MjFmMmIxODE3N2IyMDBjYmJlMTE3NTc3YTYxNWQ2Yzc3MDk4OGMwYmFkOTQ2ZTIwOGUyNGZhMDc0ZTVhYjMxNDNkYjViZmNlMGZkMTA4ZTRiODJkMTIwYTkyMTA4MDExYTcyM2MxMmE3ODdlNmQ3ODg3MTlhMTBiZGJhNWIyNjk5YzMyNzE4NmFmNGUyM2MxYTk0NjgzNGI2MTUwYmRhMjU4M2U5Y2EyYWQ0NGNlOGRiYmJjMmRiMDRkZThlZjkyZThlZmMxNDFmYmVjYWE2Mjg3YzU5NDc0ZTZiYzA1ZDk5YjI5NjRmYTA5MGMzYTIyMzNiYTE4NjUxNWJlN2VkMWY2MTI5NzBjZWUyZDdhZmI4MWJkZDc2MjE3MDQ4MWNkMDA2OTEyN2Q1YjA1YWE5OTNiNGVhOTg4ZDhmZGRjMTg2ZmZiN2RjOTBhNmMwOGY0ZGY0MzVjOTM0MDI4NDkyMzZjM2ZhYjRkMjdjNzAyNmMxZDRkY2IyNjAyNjQ2ZGVjOTc1MWU3NjNkYmEzN2JkZjhmZjk0MDZhZDllNTMwZWU1ZGIzODJmNDEzMDAxYWViMDZhNTNlZDkwMjdkODMxMTc5NzI3YjA4NjVhODkxOGRhM2VkYmViY2Y5YjE0ZWQ0NGNlNmNiYWNlZDRiYjFiZGI3ZjE0NDdlNmNjMjU0YjMzMjA1MTUxMmJkN2FmNDI2ZmI4ZjQwMTM3OGNkMmJmNTk4M2NhMDFjNjRiOTJlY2YwMzJlYTE1ZDE3MjFkMDNmNDgyZDdjZTZlNzRmZWY2ZDU1ZTcwMmY0Njk4MGM4MmI1YTg0MDMxOTAwYjFjOWU1OWU3Yzk3ZmJlYzdlOGYzMjNhOTdhN2UzNmNjODhiZTBmMWQ0NWI3ZmY1ODVhYzU0YmQ0MDdiMjJiNDE1NGFhY2M4ZjZkN2ViZjQ4ZTFkODE0Y2M1ZWQyMGY4MDM3ZTBhNzk3MTVlZWYyOWJlMzI4MDZhMWQ1OGJiN2M1ZGE3NmY1NTBhYTNkOGExZmJmZjBlYjE5Y2NiMWEzMTNkNTVjZGE1NmM5ZWMyZWYyOTYzMjM4N2ZlOGQ3NmUzYzA0NjgwNDNlOGY2NjNmNDg2MGVlMTJiZjJkNWIwYjc0NzRkNmU2OTRmOTFlNmRiZTExNTk3NGEzOTI2ZjEyZmVlNWU0Mzg3NzdjYjZhOTMyZGY4Y2Q4YmVjNGQwNzNiOTMxYmEzYmM4MzJiNjhkOWRkMzAwNzQxZmE3YmY4YWZjNDdlZDI1NzZmNjkzNmJhNDI0NjYzYWFiNjM5YzVhZTRmNTY4MzQyM2I0NzQyYmYxYzk3ODIzOGYxNmNiZTM5ZDY1MmRlM2ZkYjhiZWZjODQ4YWQ5MjIyMjJlMDRhNDAzN2MwNzEzZWI1N2E4MWEyM2YwYzczNDczZmM2NDZjZWEzMDZiNGJjYmM4ODYyZjgzODVkZGZhOWQ0YjdmYTJjMDg3ZTg3OTY4MzMwM2VkNWJkZDNhMDYyYjNjZjViM2EyNzhhNjZkMmExM2Y4M2Y0NGY4MmRkZjMxMGVlMDc0YWI2YTM2NDU5N2U4OTlhMDI1NWRjMTY0ZjMxY2M1MDg0Njg1MWRmOWFiNDgxOTVkZWQ3ZWExYjFkNTEwYmQ3ZWU3NGQ3M2ZhZjM2YmMzMWVjZmEyNjgzNTkwNDZmNGViODc5ZjkyNDAwOTQzOGI0ODFjNmNkNzg4OWEwMDJlZDVlZTM4MmJjOTE5MGRhNmZjMDI2ZTQ3OTU1OGU0NDc1Njc3ZTlhYTllMzA1MGUyNzY1Njk0ZGZjODFmNTZlODgwYjk2ZTcxNjBjOTgwZGQ5OGVkZDNkZmZmZmZmZmZmZmZmZmZmZmYiCiAgICB9Cn0KfSx7fV0sOTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0JykKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKCnZhciBQb2ludCA9IHJlcXVpcmUoJy4vcG9pbnQnKQoKZnVuY3Rpb24gQ3VydmUocCwgYSwgYiwgR3gsIEd5LCBuLCBoKSB7CiAgdGhpcy5wID0gcAogIHRoaXMuYSA9IGEKICB0aGlzLmIgPSBiCiAgdGhpcy5HID0gUG9pbnQuZnJvbUFmZmluZSh0aGlzLCBHeCwgR3kpCiAgdGhpcy5uID0gbgogIHRoaXMuaCA9IGgKCiAgdGhpcy5pbmZpbml0eSA9IG5ldyBQb2ludCh0aGlzLCBudWxsLCBudWxsLCBCaWdJbnRlZ2VyLlpFUk8pCgogIC8vIHJlc3VsdCBjYWNoaW5nCiAgdGhpcy5wT3ZlckZvdXIgPSBwLmFkZChCaWdJbnRlZ2VyLk9ORSkuc2hpZnRSaWdodCgyKQp9CgpDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tWCA9IGZ1bmN0aW9uKGlzT2RkLCB4KSB7CiAgdmFyIGFscGhhID0geC5wb3coMykuYWRkKHRoaXMuYS5tdWx0aXBseSh4KSkuYWRkKHRoaXMuYikubW9kKHRoaXMucCkKICB2YXIgYmV0YSA9IGFscGhhLm1vZFBvdyh0aGlzLnBPdmVyRm91ciwgdGhpcy5wKSAvLyBYWFg6IG5vdCBjb21wYXRpYmxlIHdpdGggYWxsIGN1cnZlcwoKICB2YXIgeSA9IGJldGEKICBpZiAoYmV0YS5pc0V2ZW4oKSBeICFpc09kZCkgewogICAgeSA9IHRoaXMucC5zdWJ0cmFjdCh5KSAvLyAteSAlIHAKICB9CgogIHJldHVybiBQb2ludC5mcm9tQWZmaW5lKHRoaXMsIHgsIHkpCn0KCkN1cnZlLnByb3RvdHlwZS5pc0luZmluaXR5ID0gZnVuY3Rpb24oUSkgewogIGlmIChRID09PSB0aGlzLmluZmluaXR5KSByZXR1cm4gdHJ1ZQoKICByZXR1cm4gUS56LnNpZ251bSgpID09PSAwICYmIFEueS5zaWdudW0oKSAhPT0gMAp9CgpDdXJ2ZS5wcm90b3R5cGUuaXNPbkN1cnZlID0gZnVuY3Rpb24oUSkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoUSkpIHJldHVybiB0cnVlCgogIHZhciB4ID0gUS5hZmZpbmVYCiAgdmFyIHkgPSBRLmFmZmluZVkKICB2YXIgYSA9IHRoaXMuYQogIHZhciBiID0gdGhpcy5iCiAgdmFyIHAgPSB0aGlzLnAKCiAgLy8gQ2hlY2sgdGhhdCB4USBhbmQgeVEgYXJlIGludGVnZXJzIGluIHRoZSBpbnRlcnZhbCBbMCwgcCAtIDFdCiAgaWYgKHguc2lnbnVtKCkgPCAwIHx8IHguY29tcGFyZVRvKHApID49IDApIHJldHVybiBmYWxzZQogIGlmICh5LnNpZ251bSgpIDwgMCB8fCB5LmNvbXBhcmVUbyhwKSA+PSAwKSByZXR1cm4gZmFsc2UKCiAgLy8gYW5kIGNoZWNrIHRoYXQgeV4yID0geF4zICsgYXggKyBiIChtb2QgcCkKICB2YXIgbGhzID0geS5zcXVhcmUoKS5tb2QocCkKICB2YXIgcmhzID0geC5wb3coMykuYWRkKGEubXVsdGlwbHkoeCkpLmFkZChiKS5tb2QocCkKICByZXR1cm4gbGhzLmVxdWFscyhyaHMpCn0KCi8qKgogKiBWYWxpZGF0ZSBhbiBlbGxpcHRpYyBjdXJ2ZSBwb2ludC4KICoKICogU2VlIFNFQyAxLCBzZWN0aW9uIDMuMi4yLjE6IEVsbGlwdGljIEN1cnZlIFB1YmxpYyBLZXkgVmFsaWRhdGlvbiBQcmltaXRpdmUKICovCkN1cnZlLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uKFEpIHsKICAvLyBDaGVjayBRICE9IE8KICBhc3NlcnQoIXRoaXMuaXNJbmZpbml0eShRKSwgJ1BvaW50IGlzIGF0IGluZmluaXR5JykKICBhc3NlcnQodGhpcy5pc09uQ3VydmUoUSksICdQb2ludCBpcyBub3Qgb24gdGhlIGN1cnZlJykKCiAgLy8gQ2hlY2sgblEgPSBPICh3aGVyZSBRIGlzIGEgc2NhbGFyIG11bHRpcGxlIG9mIEcpCiAgdmFyIG5RID0gUS5tdWx0aXBseSh0aGlzLm4pCiAgYXNzZXJ0KHRoaXMuaXNJbmZpbml0eShuUSksICdQb2ludCBpcyBub3QgYSBzY2FsYXIgbXVsdGlwbGUgb2YgRycpCgogIHJldHVybiB0cnVlCn0KCm1vZHVsZS5leHBvcnRzID0gQ3VydmUKCn0seyIuL3BvaW50IjoxMDAsImFzc2VydCI6MTUsImJpZ2kiOjIwfV0sOTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cz17CiAgInNlY3AxMjhyMSI6IHsKICAgICJwIjogImZmZmZmZmZkZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmIiwKICAgICJhIjogImZmZmZmZmZkZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjIiwKICAgICJiIjogImU4NzU3OWMxMTA3OWY0M2RkODI0OTkzYzJjZWU1ZWQzIiwKICAgICJuIjogImZmZmZmZmZlMDAwMDAwMDA3NWEzMGQxYjkwMzhhMTE1IiwKICAgICJoIjogIjAxIiwKICAgICJHeCI6ICIxNjFmZjc1MjhiODk5YjJkMGMyODYwN2NhNTJjNWI4NiIsCiAgICAiR3kiOiAiY2Y1YWM4Mzk1YmFmZWIxM2MwMmRhMjkyZGRlZDdhODMiCiAgfSwKICAic2VjcDE2MGsxIjogewogICAgInAiOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmYWM3MyIsCiAgICAiYSI6ICIwMCIsCiAgICAiYiI6ICIwNyIsCiAgICAibiI6ICIwMTAwMDAwMDAwMDAwMDAwMDAwMDAxYjhmYTE2ZGZhYjlhY2ExNmI2YjMiLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogIjNiNGMzODJjZTM3YWExOTJhNDAxOWU3NjMwMzZmNGY1ZGQ0ZDdlYmIiLAogICAgIkd5IjogIjkzOGNmOTM1MzE4ZmRjZWQ2YmMyODI4NjUzMTczM2MzZjAzYzRmZWUiCiAgfSwKICAic2VjcDE2MHIxIjogewogICAgInAiOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmY3ZmZmZmZmZiIsCiAgICAiYSI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjdmZmZmZmZjIiwKICAgICJiIjogIjFjOTdiZWZjNTRiZDdhOGI2NWFjZjg5ZjgxZDRkNGFkYzU2NWZhNDUiLAogICAgIm4iOiAiMDEwMDAwMDAwMDAwMDAwMDAwMDAwMWY0YzhmOTI3YWVkM2NhNzUyMjU3IiwKICAgICJoIjogIjAxIiwKICAgICJHeCI6ICI0YTk2YjU2ODhlZjU3MzI4NDY2NDY5ODk2OGMzOGJiOTEzY2JmYzgyIiwKICAgICJHeSI6ICIyM2E2Mjg1NTMxNjg5NDdkNTlkY2M5MTIwNDIzNTEzNzdhYzVmYjMyIgogIH0sCiAgInNlY3AxOTJrMSI6IHsKICAgICJwIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmZWUzNyIsCiAgICAiYSI6ICIwMCIsCiAgICAiYiI6ICIwMyIsCiAgICAibiI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmUyNmYyZmMxNzBmNjk0NjZhNzRkZWZkOGQiLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogImRiNGZmMTBlYzA1N2U5YWUyNmIwN2QwMjgwYjdmNDM0MWRhNWQxYjFlYWUwNmM3ZCIsCiAgICAiR3kiOiAiOWIyZjJmNmQ5YzU2MjhhNzg0NDE2M2QwMTViZTg2MzQ0MDgyYWE4OGQ5NWUyZjlkIgogIH0sCiAgInNlY3AxOTJyMSI6IHsKICAgICJwIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZlZmZmZmZmZmZmZmZmZmZmZiIsCiAgICAiYSI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWZmZmZmZmZmZmZmZmZmZmMiLAogICAgImIiOiAiNjQyMTA1MTllNTljODBlNzBmYTdlOWFiNzIyNDMwNDlmZWI4ZGVlY2MxNDZiOWIxIiwKICAgICJuIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjk5ZGVmODM2MTQ2YmM5YjFiNGQyMjgzMSIsCiAgICAiaCI6ICIwMSIsCiAgICAiR3giOiAiMTg4ZGE4MGViMDMwOTBmNjdjYmYyMGViNDNhMTg4MDBmNGZmMGFmZDgyZmYxMDEyIiwKICAgICJHeSI6ICIwNzE5MmI5NWZmYzhkYTc4NjMxMDExZWQ2YjI0Y2RkNTczZjk3N2ExMWU3OTQ4MTEiCiAgfSwKICAic2VjcDI1NmsxIjogewogICAgInAiOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmZmMyZiIsCiAgICAiYSI6ICIwMCIsCiAgICAiYiI6ICIwNyIsCiAgICAibiI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWJhYWVkY2U2YWY0OGEwM2JiZmQyNWU4Y2QwMzY0MTQxIiwKICAgICJoIjogIjAxIiwKICAgICJHeCI6ICI3OWJlNjY3ZWY5ZGNiYmFjNTVhMDYyOTVjZTg3MGIwNzAyOWJmY2RiMmRjZTI4ZDk1OWYyODE1YjE2ZjgxNzk4IiwKICAgICJHeSI6ICI0ODNhZGE3NzI2YTNjNDY1NWRhNGZiZmMwZTExMDhhOGZkMTdiNDQ4YTY4NTU0MTk5YzQ3ZDA4ZmZiMTBkNGI4IgogIH0sCiAgInNlY3AyNTZyMSI6IHsKICAgICJwIjogImZmZmZmZmZmMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYiLAogICAgImEiOiAiZmZmZmZmZmYwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYyIsCiAgICAiYiI6ICI1YWM2MzVkOGFhM2E5M2U3YjNlYmJkNTU3Njk4ODZiYzY1MWQwNmIwY2M1M2IwZjYzYmNlM2MzZTI3ZDI2MDRiIiwKICAgICJuIjogImZmZmZmZmZmMDAwMDAwMDBmZmZmZmZmZmZmZmZmZmZmYmNlNmZhYWRhNzE3OWU4NGYzYjljYWMyZmM2MzI1NTEiLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogIjZiMTdkMWYyZTEyYzQyNDdmOGJjZTZlNTYzYTQ0MGYyNzcwMzdkODEyZGViMzNhMGY0YTEzOTQ1ZDg5OGMyOTYiLAogICAgIkd5IjogIjRmZTM0MmUyZmUxYTdmOWI4ZWU3ZWI0YTdjMGY5ZTE2MmJjZTMzNTc2YjMxNWVjZWNiYjY0MDY4MzdiZjUxZjUiCiAgfQp9Cgp9LHt9XSw5ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBQb2ludCA9IHJlcXVpcmUoJy4vcG9pbnQnKQp2YXIgQ3VydmUgPSByZXF1aXJlKCcuL2N1cnZlJykKCnZhciBnZXRDdXJ2ZUJ5TmFtZSA9IHJlcXVpcmUoJy4vbmFtZXMnKQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgQ3VydmU6IEN1cnZlLAogIFBvaW50OiBQb2ludCwKICBnZXRDdXJ2ZUJ5TmFtZTogZ2V0Q3VydmVCeU5hbWUKfQoKfSx7Ii4vY3VydmUiOjk2LCIuL25hbWVzIjo5OSwiLi9wb2ludCI6MTAwfV0sOTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJ2JpZ2knKQoKdmFyIGN1cnZlcyA9IHJlcXVpcmUoJy4vY3VydmVzJykKdmFyIEN1cnZlID0gcmVxdWlyZSgnLi9jdXJ2ZScpCgpmdW5jdGlvbiBnZXRDdXJ2ZUJ5TmFtZShuYW1lKSB7CiAgdmFyIGN1cnZlID0gY3VydmVzW25hbWVdCiAgaWYgKCFjdXJ2ZSkgcmV0dXJuIG51bGwKCiAgdmFyIHAgPSBuZXcgQmlnSW50ZWdlcihjdXJ2ZS5wLCAxNikKICB2YXIgYSA9IG5ldyBCaWdJbnRlZ2VyKGN1cnZlLmEsIDE2KQogIHZhciBiID0gbmV3IEJpZ0ludGVnZXIoY3VydmUuYiwgMTYpCiAgdmFyIG4gPSBuZXcgQmlnSW50ZWdlcihjdXJ2ZS5uLCAxNikKICB2YXIgaCA9IG5ldyBCaWdJbnRlZ2VyKGN1cnZlLmgsIDE2KQogIHZhciBHeCA9IG5ldyBCaWdJbnRlZ2VyKGN1cnZlLkd4LCAxNikKICB2YXIgR3kgPSBuZXcgQmlnSW50ZWdlcihjdXJ2ZS5HeSwgMTYpCgogIHJldHVybiBuZXcgQ3VydmUocCwgYSwgYiwgR3gsIEd5LCBuLCBoKQp9Cgptb2R1bGUuZXhwb3J0cyA9IGdldEN1cnZlQnlOYW1lCgp9LHsiLi9jdXJ2ZSI6OTYsIi4vY3VydmVzIjo5NywiYmlnaSI6MjB9XSwxMDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKQp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJ2JpZ2knKQoKdmFyIFRIUkVFID0gQmlnSW50ZWdlci52YWx1ZU9mKDMpCgpmdW5jdGlvbiBQb2ludChjdXJ2ZSwgeCwgeSwgeikgewogIGFzc2VydC5ub3RTdHJpY3RFcXVhbCh6LCB1bmRlZmluZWQsICdNaXNzaW5nIFogY29vcmRpbmF0ZScpCgogIHRoaXMuY3VydmUgPSBjdXJ2ZQogIHRoaXMueCA9IHgKICB0aGlzLnkgPSB5CiAgdGhpcy56ID0gegogIHRoaXMuX3pJbnYgPSBudWxsCgogIHRoaXMuY29tcHJlc3NlZCA9IHRydWUKfQoKT2JqZWN0LmRlZmluZVByb3BlcnR5KFBvaW50LnByb3RvdHlwZSwgJ3pJbnYnLCB7CiAgZ2V0OiBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLl96SW52ID09PSBudWxsKSB7CiAgICAgIHRoaXMuX3pJbnYgPSB0aGlzLnoubW9kSW52ZXJzZSh0aGlzLmN1cnZlLnApCiAgICB9CgogICAgcmV0dXJuIHRoaXMuX3pJbnYKICB9Cn0pCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoUG9pbnQucHJvdG90eXBlLCAnYWZmaW5lWCcsIHsKICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMueC5tdWx0aXBseSh0aGlzLnpJbnYpLm1vZCh0aGlzLmN1cnZlLnApCiAgfQp9KQoKT2JqZWN0LmRlZmluZVByb3BlcnR5KFBvaW50LnByb3RvdHlwZSwgJ2FmZmluZVknLCB7CiAgZ2V0OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnkubXVsdGlwbHkodGhpcy56SW52KS5tb2QodGhpcy5jdXJ2ZS5wKQogIH0KfSkKClBvaW50LmZyb21BZmZpbmUgPSBmdW5jdGlvbihjdXJ2ZSwgeCwgeSkgewogIHJldHVybiBuZXcgUG9pbnQoY3VydmUsIHgsIHksIEJpZ0ludGVnZXIuT05FKQp9CgpQb2ludC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24ob3RoZXIpIHsKICBpZiAob3RoZXIgPT09IHRoaXMpIHJldHVybiB0cnVlCiAgaWYgKHRoaXMuY3VydmUuaXNJbmZpbml0eSh0aGlzKSkgcmV0dXJuIHRoaXMuY3VydmUuaXNJbmZpbml0eShvdGhlcikKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KG90aGVyKSkgcmV0dXJuIHRoaXMuY3VydmUuaXNJbmZpbml0eSh0aGlzKQoKICAvLyB1ID0gWTIgKiBaMSAtIFkxICogWjIKICB2YXIgdSA9IG90aGVyLnkubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLnkubXVsdGlwbHkob3RoZXIueikpLm1vZCh0aGlzLmN1cnZlLnApCgogIGlmICh1LnNpZ251bSgpICE9PSAwKSByZXR1cm4gZmFsc2UKCiAgLy8gdiA9IFgyICogWjEgLSBYMSAqIFoyCiAgdmFyIHYgPSBvdGhlci54Lm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QodGhpcy54Lm11bHRpcGx5KG90aGVyLnopKS5tb2QodGhpcy5jdXJ2ZS5wKQoKICByZXR1cm4gdi5zaWdudW0oKSA9PT0gMAp9CgpQb2ludC5wcm90b3R5cGUubmVnYXRlID0gZnVuY3Rpb24oKSB7CiAgdmFyIHkgPSB0aGlzLmN1cnZlLnAuc3VidHJhY3QodGhpcy55KQoKICByZXR1cm4gbmV3IFBvaW50KHRoaXMuY3VydmUsIHRoaXMueCwgeSwgdGhpcy56KQp9CgpQb2ludC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oYikgewogIGlmICh0aGlzLmN1cnZlLmlzSW5maW5pdHkodGhpcykpIHJldHVybiBiCiAgaWYgKHRoaXMuY3VydmUuaXNJbmZpbml0eShiKSkgcmV0dXJuIHRoaXMKCiAgdmFyIHgxID0gdGhpcy54CiAgdmFyIHkxID0gdGhpcy55CiAgdmFyIHgyID0gYi54CiAgdmFyIHkyID0gYi55CgogIC8vIHUgPSBZMiAqIFoxIC0gWTEgKiBaMgogIHZhciB1ID0geTIubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh5MS5tdWx0aXBseShiLnopKS5tb2QodGhpcy5jdXJ2ZS5wKQogIC8vIHYgPSBYMiAqIFoxIC0gWDEgKiBaMgogIHZhciB2ID0geDIubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh4MS5tdWx0aXBseShiLnopKS5tb2QodGhpcy5jdXJ2ZS5wKQoKICBpZiAodi5zaWdudW0oKSA9PT0gMCkgewogICAgaWYgKHUuc2lnbnVtKCkgPT09IDApIHsKICAgICAgcmV0dXJuIHRoaXMudHdpY2UoKSAvLyB0aGlzID09IGIsIHNvIGRvdWJsZQogICAgfQoKICAgIHJldHVybiB0aGlzLmN1cnZlLmluZmluaXR5IC8vIHRoaXMgPSAtYiwgc28gaW5maW5pdHkKICB9CgogIHZhciB2MiA9IHYuc3F1YXJlKCkKICB2YXIgdjMgPSB2Mi5tdWx0aXBseSh2KQogIHZhciB4MXYyID0geDEubXVsdGlwbHkodjIpCiAgdmFyIHp1MiA9IHUuc3F1YXJlKCkubXVsdGlwbHkodGhpcy56KQoKICAvLyB4MyA9IHYgKiAoejIgKiAoejEgKiB1XjIgLSAyICogeDEgKiB2XjIpIC0gdl4zKQogIHZhciB4MyA9IHp1Mi5zdWJ0cmFjdCh4MXYyLnNoaWZ0TGVmdCgxKSkubXVsdGlwbHkoYi56KS5zdWJ0cmFjdCh2MykubXVsdGlwbHkodikubW9kKHRoaXMuY3VydmUucCkKICAvLyB5MyA9IHoyICogKDMgKiB4MSAqIHUgKiB2XjIgLSB5MSAqIHZeMyAtIHoxICogdV4zKSArIHUgKiB2XjMKICB2YXIgeTMgPSB4MXYyLm11bHRpcGx5KFRIUkVFKS5tdWx0aXBseSh1KS5zdWJ0cmFjdCh5MS5tdWx0aXBseSh2MykpLnN1YnRyYWN0KHp1Mi5tdWx0aXBseSh1KSkubXVsdGlwbHkoYi56KS5hZGQodS5tdWx0aXBseSh2MykpLm1vZCh0aGlzLmN1cnZlLnApCiAgLy8gejMgPSB2XjMgKiB6MSAqIHoyCiAgdmFyIHozID0gdjMubXVsdGlwbHkodGhpcy56KS5tdWx0aXBseShiLnopLm1vZCh0aGlzLmN1cnZlLnApCgogIHJldHVybiBuZXcgUG9pbnQodGhpcy5jdXJ2ZSwgeDMsIHkzLCB6MykKfQoKUG9pbnQucHJvdG90eXBlLnR3aWNlID0gZnVuY3Rpb24oKSB7CiAgaWYgKHRoaXMuY3VydmUuaXNJbmZpbml0eSh0aGlzKSkgcmV0dXJuIHRoaXMKICBpZiAodGhpcy55LnNpZ251bSgpID09PSAwKSByZXR1cm4gdGhpcy5jdXJ2ZS5pbmZpbml0eQoKICB2YXIgeDEgPSB0aGlzLngKICB2YXIgeTEgPSB0aGlzLnkKCiAgdmFyIHkxejEgPSB5MS5tdWx0aXBseSh0aGlzLnopCiAgdmFyIHkxc3F6MSA9IHkxejEubXVsdGlwbHkoeTEpLm1vZCh0aGlzLmN1cnZlLnApCiAgdmFyIGEgPSB0aGlzLmN1cnZlLmEKCiAgLy8gdyA9IDMgKiB4MV4yICsgYSAqIHoxXjIKICB2YXIgdyA9IHgxLnNxdWFyZSgpLm11bHRpcGx5KFRIUkVFKQoKICBpZiAoYS5zaWdudW0oKSAhPT0gMCkgewogICAgdyA9IHcuYWRkKHRoaXMuei5zcXVhcmUoKS5tdWx0aXBseShhKSkKICB9CgogIHcgPSB3Lm1vZCh0aGlzLmN1cnZlLnApCiAgLy8geDMgPSAyICogeTEgKiB6MSAqICh3XjIgLSA4ICogeDEgKiB5MV4yICogejEpCiAgdmFyIHgzID0gdy5zcXVhcmUoKS5zdWJ0cmFjdCh4MS5zaGlmdExlZnQoMykubXVsdGlwbHkoeTFzcXoxKSkuc2hpZnRMZWZ0KDEpLm11bHRpcGx5KHkxejEpLm1vZCh0aGlzLmN1cnZlLnApCiAgLy8geTMgPSA0ICogeTFeMiAqIHoxICogKDMgKiB3ICogeDEgLSAyICogeTFeMiAqIHoxKSAtIHdeMwogIHZhciB5MyA9IHcubXVsdGlwbHkoVEhSRUUpLm11bHRpcGx5KHgxKS5zdWJ0cmFjdCh5MXNxejEuc2hpZnRMZWZ0KDEpKS5zaGlmdExlZnQoMikubXVsdGlwbHkoeTFzcXoxKS5zdWJ0cmFjdCh3LnBvdygzKSkubW9kKHRoaXMuY3VydmUucCkKICAvLyB6MyA9IDggKiAoeTEgKiB6MSleMwogIHZhciB6MyA9IHkxejEucG93KDMpLnNoaWZ0TGVmdCgzKS5tb2QodGhpcy5jdXJ2ZS5wKQoKICByZXR1cm4gbmV3IFBvaW50KHRoaXMuY3VydmUsIHgzLCB5MywgejMpCn0KCi8vIFNpbXBsZSBOQUYgKE5vbi1BZGphY2VudCBGb3JtKSBtdWx0aXBsaWNhdGlvbiBhbGdvcml0aG0KLy8gVE9ETzogbW9kdWxhcml6ZSB0aGUgbXVsdGlwbGljYXRpb24gYWxnb3JpdGhtClBvaW50LnByb3RvdHlwZS5tdWx0aXBseSA9IGZ1bmN0aW9uKGspIHsKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpKSByZXR1cm4gdGhpcwogIGlmIChrLnNpZ251bSgpID09PSAwKSByZXR1cm4gdGhpcy5jdXJ2ZS5pbmZpbml0eQoKICB2YXIgZSA9IGsKICB2YXIgaCA9IGUubXVsdGlwbHkoVEhSRUUpCgogIHZhciBuZWcgPSB0aGlzLm5lZ2F0ZSgpCiAgdmFyIFIgPSB0aGlzCgogIGZvciAodmFyIGkgPSBoLmJpdExlbmd0aCgpIC0gMjsgaSA+IDA7IC0taSkgewogICAgdmFyIGhCaXQgPSBoLnRlc3RCaXQoaSkKICAgIHZhciBlQml0ID0gZS50ZXN0Qml0KGkpCgogICAgUiA9IFIudHdpY2UoKQoKICAgIGlmIChoQml0ICE9PSBlQml0KSB7CiAgICAgIFIgPSBSLmFkZChoQml0ID8gdGhpcyA6IG5lZykKICAgIH0KICB9CgogIHJldHVybiBSCn0KCi8vIENvbXB1dGUgdGhpcypqICsgeCprIChzaW11bHRhbmVvdXMgbXVsdGlwbGljYXRpb24pClBvaW50LnByb3RvdHlwZS5tdWx0aXBseVR3byA9IGZ1bmN0aW9uKGosIHgsIGspIHsKICB2YXIgaSA9IE1hdGgubWF4KGouYml0TGVuZ3RoKCksIGsuYml0TGVuZ3RoKCkpIC0gMQogIHZhciBSID0gdGhpcy5jdXJ2ZS5pbmZpbml0eQogIHZhciBib3RoID0gdGhpcy5hZGQoeCkKCiAgd2hpbGUgKGkgPj0gMCkgewogICAgdmFyIGpCaXQgPSBqLnRlc3RCaXQoaSkKICAgIHZhciBrQml0ID0gay50ZXN0Qml0KGkpCgogICAgUiA9IFIudHdpY2UoKQoKICAgIGlmIChqQml0KSB7CiAgICAgIGlmIChrQml0KSB7CiAgICAgICAgUiA9IFIuYWRkKGJvdGgpCgogICAgICB9IGVsc2UgewogICAgICAgIFIgPSBSLmFkZCh0aGlzKQogICAgICB9CgogICAgfSBlbHNlIGlmIChrQml0KSB7CiAgICAgIFIgPSBSLmFkZCh4KQogICAgfQogICAgLS1pCiAgfQoKICByZXR1cm4gUgp9CgpQb2ludC5wcm90b3R5cGUuZ2V0RW5jb2RlZCA9IGZ1bmN0aW9uKGNvbXByZXNzZWQpIHsKICBpZiAoY29tcHJlc3NlZCA9PSB1bmRlZmluZWQpIGNvbXByZXNzZWQgPSB0aGlzLmNvbXByZXNzZWQKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpKSByZXR1cm4gbmV3IEJ1ZmZlcignMDAnLCAnaGV4JykgLy8gSW5maW5pdHkgcG9pbnQgZW5jb2RlZCBpcyBzaW1wbHkgJzAwJwoKICB2YXIgeCA9IHRoaXMuYWZmaW5lWAogIHZhciB5ID0gdGhpcy5hZmZpbmVZCgogIHZhciBidWZmZXIKCiAgLy8gRGV0ZXJtaW5lIHNpemUgb2YgcSBpbiBieXRlcwogIHZhciBieXRlTGVuZ3RoID0gTWF0aC5mbG9vcigodGhpcy5jdXJ2ZS5wLmJpdExlbmd0aCgpICsgNykgLyA4KQoKICAvLyAweDAyLzB4MDMgfCBYCiAgaWYgKGNvbXByZXNzZWQpIHsKICAgIGJ1ZmZlciA9IG5ldyBCdWZmZXIoMSArIGJ5dGVMZW5ndGgpCiAgICBidWZmZXIud3JpdGVVSW50OCh5LmlzRXZlbigpID8gMHgwMiA6IDB4MDMsIDApCgogIC8vIDB4MDQgfCBYIHwgWQogIH0gZWxzZSB7CiAgICBidWZmZXIgPSBuZXcgQnVmZmVyKDEgKyBieXRlTGVuZ3RoICsgYnl0ZUxlbmd0aCkKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KDB4MDQsIDApCgogICAgeS50b0J1ZmZlcihieXRlTGVuZ3RoKS5jb3B5KGJ1ZmZlciwgMSArIGJ5dGVMZW5ndGgpCiAgfQoKICB4LnRvQnVmZmVyKGJ5dGVMZW5ndGgpLmNvcHkoYnVmZmVyLCAxKQoKICByZXR1cm4gYnVmZmVyCn0KClBvaW50LmRlY29kZUZyb20gPSBmdW5jdGlvbihjdXJ2ZSwgYnVmZmVyKSB7CiAgdmFyIHR5cGUgPSBidWZmZXIucmVhZFVJbnQ4KDApCiAgdmFyIGNvbXByZXNzZWQgPSAodHlwZSAhPT0gNCkKCiAgdmFyIGJ5dGVMZW5ndGggPSBNYXRoLmZsb29yKChjdXJ2ZS5wLmJpdExlbmd0aCgpICsgNykgLyA4KQogIHZhciB4ID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGJ1ZmZlci5zbGljZSgxLCAxICsgYnl0ZUxlbmd0aCkpCgogIHZhciBRCiAgaWYgKGNvbXByZXNzZWQpIHsKICAgIGFzc2VydC5lcXVhbChidWZmZXIubGVuZ3RoLCBieXRlTGVuZ3RoICsgMSwgJ0ludmFsaWQgc2VxdWVuY2UgbGVuZ3RoJykKICAgIGFzc2VydCh0eXBlID09PSAweDAyIHx8IHR5cGUgPT09IDB4MDMsICdJbnZhbGlkIHNlcXVlbmNlIHRhZycpCgogICAgdmFyIGlzT2RkID0gKHR5cGUgPT09IDB4MDMpCiAgICBRID0gY3VydmUucG9pbnRGcm9tWChpc09kZCwgeCkKCiAgfSBlbHNlIHsKICAgIGFzc2VydC5lcXVhbChidWZmZXIubGVuZ3RoLCAxICsgYnl0ZUxlbmd0aCArIGJ5dGVMZW5ndGgsICdJbnZhbGlkIHNlcXVlbmNlIGxlbmd0aCcpCgogICAgdmFyIHkgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoYnVmZmVyLnNsaWNlKDEgKyBieXRlTGVuZ3RoKSkKICAgIFEgPSBQb2ludC5mcm9tQWZmaW5lKGN1cnZlLCB4LCB5KQogIH0KCiAgUS5jb21wcmVzc2VkID0gY29tcHJlc3NlZAogIHJldHVybiBRCn0KClBvaW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpKSByZXR1cm4gJyhJTkZJTklUWSknCgogIHJldHVybiAnKCcgKyB0aGlzLmFmZmluZVgudG9TdHJpbmcoKSArICcsJyArIHRoaXMuYWZmaW5lWS50b1N0cmluZygpICsgJyknCn0KCm1vZHVsZS5leHBvcnRzID0gUG9pbnQKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJhc3NlcnQiOjE1LCJiaWdpIjoyMCwiYnVmZmVyIjo3Nn1dLDEwMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBlbGxpcHRpYyA9IGV4cG9ydHM7CgplbGxpcHRpYy52ZXJzaW9uID0gcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJykudmVyc2lvbjsKZWxsaXB0aWMudXRpbHMgPSByZXF1aXJlKCcuL2VsbGlwdGljL3V0aWxzJyk7CmVsbGlwdGljLnJhbmQgPSByZXF1aXJlKCdicm9yYW5kJyk7CmVsbGlwdGljLmhtYWNEUkJHID0gcmVxdWlyZSgnLi9lbGxpcHRpYy9obWFjLWRyYmcnKTsKZWxsaXB0aWMuY3VydmUgPSByZXF1aXJlKCcuL2VsbGlwdGljL2N1cnZlJyk7CmVsbGlwdGljLmN1cnZlcyA9IHJlcXVpcmUoJy4vZWxsaXB0aWMvY3VydmVzJyk7CgovLyBQcm90b2NvbHMKZWxsaXB0aWMuZWMgPSByZXF1aXJlKCcuL2VsbGlwdGljL2VjJyk7CmVsbGlwdGljLmVkZHNhID0gcmVxdWlyZSgnLi9lbGxpcHRpYy9lZGRzYScpOwoKfSx7Ii4uL3BhY2thZ2UuanNvbiI6MTE3LCIuL2VsbGlwdGljL2N1cnZlIjoxMDQsIi4vZWxsaXB0aWMvY3VydmVzIjoxMDcsIi4vZWxsaXB0aWMvZWMiOjEwOCwiLi9lbGxpcHRpYy9lZGRzYSI6MTExLCIuL2VsbGlwdGljL2htYWMtZHJiZyI6MTE0LCIuL2VsbGlwdGljL3V0aWxzIjoxMTYsImJyb3JhbmQiOjQzfV0sMTAyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIHV0aWxzID0gZWxsaXB0aWMudXRpbHM7CnZhciBnZXROQUYgPSB1dGlscy5nZXROQUY7CnZhciBnZXRKU0YgPSB1dGlscy5nZXRKU0Y7CnZhciBhc3NlcnQgPSB1dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBCYXNlQ3VydmUodHlwZSwgY29uZikgewogIHRoaXMudHlwZSA9IHR5cGU7CiAgdGhpcy5wID0gbmV3IEJOKGNvbmYucCwgMTYpOwoKICAvLyBVc2UgTW9udGdvbWVyeSwgd2hlbiB0aGVyZSBpcyBubyBmYXN0IHJlZHVjdGlvbiBmb3IgdGhlIHByaW1lCiAgdGhpcy5yZWQgPSBjb25mLnByaW1lID8gQk4ucmVkKGNvbmYucHJpbWUpIDogQk4ubW9udCh0aGlzLnApOwoKICAvLyBVc2VmdWwgZm9yIG1hbnkgY3VydmVzCiAgdGhpcy56ZXJvID0gbmV3IEJOKDApLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLm9uZSA9IG5ldyBCTigxKS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy50d28gPSBuZXcgQk4oMikudG9SZWQodGhpcy5yZWQpOwoKICAvLyBDdXJ2ZSBjb25maWd1cmF0aW9uLCBvcHRpb25hbAogIHRoaXMubiA9IGNvbmYubiAmJiBuZXcgQk4oY29uZi5uLCAxNik7CiAgdGhpcy5nID0gY29uZi5nICYmIHRoaXMucG9pbnRGcm9tSlNPTihjb25mLmcsIGNvbmYuZ1JlZCk7CgogIC8vIFRlbXBvcmFyeSBhcnJheXMKICB0aGlzLl93bmFmVDEgPSBuZXcgQXJyYXkoNCk7CiAgdGhpcy5fd25hZlQyID0gbmV3IEFycmF5KDQpOwogIHRoaXMuX3duYWZUMyA9IG5ldyBBcnJheSg0KTsKICB0aGlzLl93bmFmVDQgPSBuZXcgQXJyYXkoNCk7Cn0KbW9kdWxlLmV4cG9ydHMgPSBCYXNlQ3VydmU7CgpCYXNlQ3VydmUucHJvdG90eXBlLnBvaW50ID0gZnVuY3Rpb24gcG9pbnQoKSB7CiAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTsKfTsKCkJhc2VDdXJ2ZS5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZSgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOwp9OwoKQmFzZUN1cnZlLnByb3RvdHlwZS5fZml4ZWROYWZNdWwgPSBmdW5jdGlvbiBfZml4ZWROYWZNdWwocCwgaykgewogIGFzc2VydChwLnByZWNvbXB1dGVkKTsKICB2YXIgZG91YmxlcyA9IHAuX2dldERvdWJsZXMoKTsKCiAgdmFyIG5hZiA9IGdldE5BRihrLCAxKTsKICB2YXIgSSA9ICgxIDw8IChkb3VibGVzLnN0ZXAgKyAxKSkgLSAoZG91Ymxlcy5zdGVwICUgMiA9PT0gMCA/IDIgOiAxKTsKICBJIC89IDM7CgogIC8vIFRyYW5zbGF0ZSBpbnRvIG1vcmUgd2luZG93ZWQgZm9ybQogIHZhciByZXByID0gW107CiAgZm9yICh2YXIgaiA9IDA7IGogPCBuYWYubGVuZ3RoOyBqICs9IGRvdWJsZXMuc3RlcCkgewogICAgdmFyIG5hZlcgPSAwOwogICAgZm9yICh2YXIgayA9IGogKyBkb3VibGVzLnN0ZXAgLSAxOyBrID49IGo7IGstLSkKICAgICAgbmFmVyA9IChuYWZXIDw8IDEpICsgbmFmW2tdOwogICAgcmVwci5wdXNoKG5hZlcpOwogIH0KCiAgdmFyIGEgPSB0aGlzLmpwb2ludChudWxsLCBudWxsLCBudWxsKTsKICB2YXIgYiA9IHRoaXMuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwogIGZvciAodmFyIGkgPSBJOyBpID4gMDsgaS0tKSB7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlcHIubGVuZ3RoOyBqKyspIHsKICAgICAgdmFyIG5hZlcgPSByZXByW2pdOwogICAgICBpZiAobmFmVyA9PT0gaSkKICAgICAgICBiID0gYi5taXhlZEFkZChkb3VibGVzLnBvaW50c1tqXSk7CiAgICAgIGVsc2UgaWYgKG5hZlcgPT09IC1pKQogICAgICAgIGIgPSBiLm1peGVkQWRkKGRvdWJsZXMucG9pbnRzW2pdLm5lZygpKTsKICAgIH0KICAgIGEgPSBhLmFkZChiKTsKICB9CiAgcmV0dXJuIGEudG9QKCk7Cn07CgpCYXNlQ3VydmUucHJvdG90eXBlLl93bmFmTXVsID0gZnVuY3Rpb24gX3duYWZNdWwocCwgaykgewogIHZhciB3ID0gNDsKCiAgLy8gUHJlY29tcHV0ZSB3aW5kb3cKICB2YXIgbmFmUG9pbnRzID0gcC5fZ2V0TkFGUG9pbnRzKHcpOwogIHcgPSBuYWZQb2ludHMud25kOwogIHZhciB3bmQgPSBuYWZQb2ludHMucG9pbnRzOwoKICAvLyBHZXQgTkFGIGZvcm0KICB2YXIgbmFmID0gZ2V0TkFGKGssIHcpOwoKICAvLyBBZGQgYHRoaXNgKihOKzEpIGZvciBldmVyeSB3LU5BRiBpbmRleAogIHZhciBhY2MgPSB0aGlzLmpwb2ludChudWxsLCBudWxsLCBudWxsKTsKICBmb3IgKHZhciBpID0gbmFmLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAvLyBDb3VudCB6ZXJvZXMKICAgIGZvciAodmFyIGsgPSAwOyBpID49IDAgJiYgbmFmW2ldID09PSAwOyBpLS0pCiAgICAgIGsrKzsKICAgIGlmIChpID49IDApCiAgICAgIGsrKzsKICAgIGFjYyA9IGFjYy5kYmxwKGspOwoKICAgIGlmIChpIDwgMCkKICAgICAgYnJlYWs7CiAgICB2YXIgeiA9IG5hZltpXTsKICAgIGFzc2VydCh6ICE9PSAwKTsKICAgIGlmIChwLnR5cGUgPT09ICdhZmZpbmUnKSB7CiAgICAgIC8vIEogKy0gUAogICAgICBpZiAoeiA+IDApCiAgICAgICAgYWNjID0gYWNjLm1peGVkQWRkKHduZFsoeiAtIDEpID4+IDFdKTsKICAgICAgZWxzZQogICAgICAgIGFjYyA9IGFjYy5taXhlZEFkZCh3bmRbKC16IC0gMSkgPj4gMV0ubmVnKCkpOwogICAgfSBlbHNlIHsKICAgICAgLy8gSiArLSBKCiAgICAgIGlmICh6ID4gMCkKICAgICAgICBhY2MgPSBhY2MuYWRkKHduZFsoeiAtIDEpID4+IDFdKTsKICAgICAgZWxzZQogICAgICAgIGFjYyA9IGFjYy5hZGQod25kWygteiAtIDEpID4+IDFdLm5lZygpKTsKICAgIH0KICB9CiAgcmV0dXJuIHAudHlwZSA9PT0gJ2FmZmluZScgPyBhY2MudG9QKCkgOiBhY2M7Cn07CgpCYXNlQ3VydmUucHJvdG90eXBlLl93bmFmTXVsQWRkID0gZnVuY3Rpb24gX3duYWZNdWxBZGQoZGVmVywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZWZmcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbikgewogIHZhciB3bmRXaWR0aCA9IHRoaXMuX3duYWZUMTsKICB2YXIgd25kID0gdGhpcy5fd25hZlQyOwogIHZhciBuYWYgPSB0aGlzLl93bmFmVDM7CgogIC8vIEZpbGwgYWxsIGFycmF5cwogIHZhciBtYXggPSAwOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgIHZhciBwID0gcG9pbnRzW2ldOwogICAgdmFyIG5hZlBvaW50cyA9IHAuX2dldE5BRlBvaW50cyhkZWZXKTsKICAgIHduZFdpZHRoW2ldID0gbmFmUG9pbnRzLnduZDsKICAgIHduZFtpXSA9IG5hZlBvaW50cy5wb2ludHM7CiAgfQoKICAvLyBDb21iIHNtYWxsIHdpbmRvdyBOQUZzCiAgZm9yICh2YXIgaSA9IGxlbiAtIDE7IGkgPj0gMTsgaSAtPSAyKSB7CiAgICB2YXIgYSA9IGkgLSAxOwogICAgdmFyIGIgPSBpOwogICAgaWYgKHduZFdpZHRoW2FdICE9PSAxIHx8IHduZFdpZHRoW2JdICE9PSAxKSB7CiAgICAgIG5hZlthXSA9IGdldE5BRihjb2VmZnNbYV0sIHduZFdpZHRoW2FdKTsKICAgICAgbmFmW2JdID0gZ2V0TkFGKGNvZWZmc1tiXSwgd25kV2lkdGhbYl0pOwogICAgICBtYXggPSBNYXRoLm1heChuYWZbYV0ubGVuZ3RoLCBtYXgpOwogICAgICBtYXggPSBNYXRoLm1heChuYWZbYl0ubGVuZ3RoLCBtYXgpOwogICAgICBjb250aW51ZTsKICAgIH0KCiAgICB2YXIgY29tYiA9IFsKICAgICAgcG9pbnRzW2FdLCAvKiAxICovCiAgICAgIG51bGwsIC8qIDMgKi8KICAgICAgbnVsbCwgLyogNSAqLwogICAgICBwb2ludHNbYl0gLyogNyAqLwogICAgXTsKCiAgICAvLyBUcnkgdG8gYXZvaWQgUHJvamVjdGl2ZSBwb2ludHMsIGlmIHBvc3NpYmxlCiAgICBpZiAocG9pbnRzW2FdLnkuY21wKHBvaW50c1tiXS55KSA9PT0gMCkgewogICAgICBjb21iWzFdID0gcG9pbnRzW2FdLmFkZChwb2ludHNbYl0pOwogICAgICBjb21iWzJdID0gcG9pbnRzW2FdLnRvSigpLm1peGVkQWRkKHBvaW50c1tiXS5uZWcoKSk7CiAgICB9IGVsc2UgaWYgKHBvaW50c1thXS55LmNtcChwb2ludHNbYl0ueS5yZWROZWcoKSkgPT09IDApIHsKICAgICAgY29tYlsxXSA9IHBvaW50c1thXS50b0ooKS5taXhlZEFkZChwb2ludHNbYl0pOwogICAgICBjb21iWzJdID0gcG9pbnRzW2FdLmFkZChwb2ludHNbYl0ubmVnKCkpOwogICAgfSBlbHNlIHsKICAgICAgY29tYlsxXSA9IHBvaW50c1thXS50b0ooKS5taXhlZEFkZChwb2ludHNbYl0pOwogICAgICBjb21iWzJdID0gcG9pbnRzW2FdLnRvSigpLm1peGVkQWRkKHBvaW50c1tiXS5uZWcoKSk7CiAgICB9CgogICAgdmFyIGluZGV4ID0gWwogICAgICAtMywgLyogLTEgLTEgKi8KICAgICAgLTEsIC8qIC0xIDAgKi8KICAgICAgLTUsIC8qIC0xIDEgKi8KICAgICAgLTcsIC8qIDAgLTEgKi8KICAgICAgMCwgLyogMCAwICovCiAgICAgIDcsIC8qIDAgMSAqLwogICAgICA1LCAvKiAxIC0xICovCiAgICAgIDEsIC8qIDEgMCAqLwogICAgICAzICAvKiAxIDEgKi8KICAgIF07CgogICAgdmFyIGpzZiA9IGdldEpTRihjb2VmZnNbYV0sIGNvZWZmc1tiXSk7CiAgICBtYXggPSBNYXRoLm1heChqc2ZbMF0ubGVuZ3RoLCBtYXgpOwogICAgbmFmW2FdID0gbmV3IEFycmF5KG1heCk7CiAgICBuYWZbYl0gPSBuZXcgQXJyYXkobWF4KTsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWF4OyBqKyspIHsKICAgICAgdmFyIGphID0ganNmWzBdW2pdIHwgMDsKICAgICAgdmFyIGpiID0ganNmWzFdW2pdIHwgMDsKCiAgICAgIG5hZlthXVtqXSA9IGluZGV4WyhqYSArIDEpICogMyArIChqYiArIDEpXTsKICAgICAgbmFmW2JdW2pdID0gMDsKICAgICAgd25kW2FdID0gY29tYjsKICAgIH0KICB9CgogIHZhciBhY2MgPSB0aGlzLmpwb2ludChudWxsLCBudWxsLCBudWxsKTsKICB2YXIgdG1wID0gdGhpcy5fd25hZlQ0OwogIGZvciAodmFyIGkgPSBtYXg7IGkgPj0gMDsgaS0tKSB7CiAgICB2YXIgayA9IDA7CgogICAgd2hpbGUgKGkgPj0gMCkgewogICAgICB2YXIgemVybyA9IHRydWU7CiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVuOyBqKyspIHsKICAgICAgICB0bXBbal0gPSBuYWZbal1baV0gfCAwOwogICAgICAgIGlmICh0bXBbal0gIT09IDApCiAgICAgICAgICB6ZXJvID0gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKCF6ZXJvKQogICAgICAgIGJyZWFrOwogICAgICBrKys7CiAgICAgIGktLTsKICAgIH0KICAgIGlmIChpID49IDApCiAgICAgIGsrKzsKICAgIGFjYyA9IGFjYy5kYmxwKGspOwogICAgaWYgKGkgPCAwKQogICAgICBicmVhazsKCiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxlbjsgaisrKSB7CiAgICAgIHZhciB6ID0gdG1wW2pdOwogICAgICB2YXIgcDsKICAgICAgaWYgKHogPT09IDApCiAgICAgICAgY29udGludWU7CiAgICAgIGVsc2UgaWYgKHogPiAwKQogICAgICAgIHAgPSB3bmRbal1bKHogLSAxKSA+PiAxXTsKICAgICAgZWxzZSBpZiAoeiA8IDApCiAgICAgICAgcCA9IHduZFtqXVsoLXogLSAxKSA+PiAxXS5uZWcoKTsKCiAgICAgIGlmIChwLnR5cGUgPT09ICdhZmZpbmUnKQogICAgICAgIGFjYyA9IGFjYy5taXhlZEFkZChwKTsKICAgICAgZWxzZQogICAgICAgIGFjYyA9IGFjYy5hZGQocCk7CiAgICB9CiAgfQogIC8vIFplcm9pZnkgcmVmZXJlbmNlcwogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspCiAgICB3bmRbaV0gPSBudWxsOwogIHJldHVybiBhY2MudG9QKCk7Cn07CgpmdW5jdGlvbiBCYXNlUG9pbnQoY3VydmUsIHR5cGUpIHsKICB0aGlzLmN1cnZlID0gY3VydmU7CiAgdGhpcy50eXBlID0gdHlwZTsKICB0aGlzLnByZWNvbXB1dGVkID0gbnVsbDsKfQpCYXNlQ3VydmUuQmFzZVBvaW50ID0gQmFzZVBvaW50OwoKQmFzZVBvaW50LnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxKC8qb3RoZXIqLykgewogIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkJyk7Cn07CgpCYXNlUG9pbnQucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgcmV0dXJuIHRoaXMuY3VydmUudmFsaWRhdGUodGhpcyk7Cn07CgpCYXNlQ3VydmUucHJvdG90eXBlLmRlY29kZVBvaW50ID0gZnVuY3Rpb24gZGVjb2RlUG9pbnQoYnl0ZXMsIGVuYykgewogIGJ5dGVzID0gdXRpbHMudG9BcnJheShieXRlcywgZW5jKTsKCiAgdmFyIGxlbiA9IHRoaXMucC5ieXRlTGVuZ3RoKCk7CiAgaWYgKGJ5dGVzWzBdID09PSAweDA0ICYmIGJ5dGVzLmxlbmd0aCAtIDEgPT09IDIgKiBsZW4pIHsKICAgIHJldHVybiB0aGlzLnBvaW50KGJ5dGVzLnNsaWNlKDEsIDEgKyBsZW4pLAogICAgICAgICAgICAgICAgICAgICAgYnl0ZXMuc2xpY2UoMSArIGxlbiwgMSArIDIgKiBsZW4pKTsKICB9IGVsc2UgaWYgKChieXRlc1swXSA9PT0gMHgwMiB8fCBieXRlc1swXSA9PT0gMHgwMykgJiYKICAgICAgICAgICAgICBieXRlcy5sZW5ndGggLSAxID09PSBsZW4pIHsKICAgIHJldHVybiB0aGlzLnBvaW50RnJvbVgoYnl0ZXMuc2xpY2UoMSwgMSArIGxlbiksIGJ5dGVzWzBdID09PSAweDAzKTsKICB9CiAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHBvaW50IGZvcm1hdCcpOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5lbmNvZGVDb21wcmVzc2VkID0gZnVuY3Rpb24gZW5jb2RlQ29tcHJlc3NlZChlbmMpIHsKICByZXR1cm4gdGhpcy5lbmNvZGUoZW5jLCB0cnVlKTsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUuX2VuY29kZSA9IGZ1bmN0aW9uIF9lbmNvZGUoY29tcGFjdCkgewogIHZhciBsZW4gPSB0aGlzLmN1cnZlLnAuYnl0ZUxlbmd0aCgpOwogIHZhciB4ID0gdGhpcy5nZXRYKCkudG9BcnJheSgnYmUnLCBsZW4pOwoKICBpZiAoY29tcGFjdCkKICAgIHJldHVybiBbIHRoaXMuZ2V0WSgpLmlzRXZlbigpID8gMHgwMiA6IDB4MDMgXS5jb25jYXQoeCk7CgogIHJldHVybiBbIDB4MDQgXS5jb25jYXQoeCwgdGhpcy5nZXRZKCkudG9BcnJheSgnYmUnLCBsZW4pKSA7Cn07CgpCYXNlUG9pbnQucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShlbmMsIGNvbXBhY3QpIHsKICByZXR1cm4gdXRpbHMuZW5jb2RlKHRoaXMuX2VuY29kZShjb21wYWN0KSwgZW5jKTsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUucHJlY29tcHV0ZSA9IGZ1bmN0aW9uIHByZWNvbXB1dGUocG93ZXIpIHsKICBpZiAodGhpcy5wcmVjb21wdXRlZCkKICAgIHJldHVybiB0aGlzOwoKICB2YXIgcHJlY29tcHV0ZWQgPSB7CiAgICBkb3VibGVzOiBudWxsLAogICAgbmFmOiBudWxsLAogICAgYmV0YTogbnVsbAogIH07CiAgcHJlY29tcHV0ZWQubmFmID0gdGhpcy5fZ2V0TkFGUG9pbnRzKDgpOwogIHByZWNvbXB1dGVkLmRvdWJsZXMgPSB0aGlzLl9nZXREb3VibGVzKDQsIHBvd2VyKTsKICBwcmVjb21wdXRlZC5iZXRhID0gdGhpcy5fZ2V0QmV0YSgpOwogIHRoaXMucHJlY29tcHV0ZWQgPSBwcmVjb21wdXRlZDsKCiAgcmV0dXJuIHRoaXM7Cn07CgpCYXNlUG9pbnQucHJvdG90eXBlLl9oYXNEb3VibGVzID0gZnVuY3Rpb24gX2hhc0RvdWJsZXMoaykgewogIGlmICghdGhpcy5wcmVjb21wdXRlZCkKICAgIHJldHVybiBmYWxzZTsKCiAgdmFyIGRvdWJsZXMgPSB0aGlzLnByZWNvbXB1dGVkLmRvdWJsZXM7CiAgaWYgKCFkb3VibGVzKQogICAgcmV0dXJuIGZhbHNlOwoKICByZXR1cm4gZG91Ymxlcy5wb2ludHMubGVuZ3RoID49IE1hdGguY2VpbCgoay5iaXRMZW5ndGgoKSArIDEpIC8gZG91Ymxlcy5zdGVwKTsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUuX2dldERvdWJsZXMgPSBmdW5jdGlvbiBfZ2V0RG91YmxlcyhzdGVwLCBwb3dlcikgewogIGlmICh0aGlzLnByZWNvbXB1dGVkICYmIHRoaXMucHJlY29tcHV0ZWQuZG91YmxlcykKICAgIHJldHVybiB0aGlzLnByZWNvbXB1dGVkLmRvdWJsZXM7CgogIHZhciBkb3VibGVzID0gWyB0aGlzIF07CiAgdmFyIGFjYyA9IHRoaXM7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3dlcjsgaSArPSBzdGVwKSB7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN0ZXA7IGorKykKICAgICAgYWNjID0gYWNjLmRibCgpOwogICAgZG91Ymxlcy5wdXNoKGFjYyk7CiAgfQogIHJldHVybiB7CiAgICBzdGVwOiBzdGVwLAogICAgcG9pbnRzOiBkb3VibGVzCiAgfTsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUuX2dldE5BRlBvaW50cyA9IGZ1bmN0aW9uIF9nZXROQUZQb2ludHMod25kKSB7CiAgaWYgKHRoaXMucHJlY29tcHV0ZWQgJiYgdGhpcy5wcmVjb21wdXRlZC5uYWYpCiAgICByZXR1cm4gdGhpcy5wcmVjb21wdXRlZC5uYWY7CgogIHZhciByZXMgPSBbIHRoaXMgXTsKICB2YXIgbWF4ID0gKDEgPDwgd25kKSAtIDE7CiAgdmFyIGRibCA9IG1heCA9PT0gMSA/IG51bGwgOiB0aGlzLmRibCgpOwogIGZvciAodmFyIGkgPSAxOyBpIDwgbWF4OyBpKyspCiAgICByZXNbaV0gPSByZXNbaSAtIDFdLmFkZChkYmwpOwogIHJldHVybiB7CiAgICB3bmQ6IHduZCwKICAgIHBvaW50czogcmVzCiAgfTsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUuX2dldEJldGEgPSBmdW5jdGlvbiBfZ2V0QmV0YSgpIHsKICByZXR1cm4gbnVsbDsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUuZGJscCA9IGZ1bmN0aW9uIGRibHAoaykgewogIHZhciByID0gdGhpczsKICBmb3IgKHZhciBpID0gMDsgaSA8IGs7IGkrKykKICAgIHIgPSByLmRibCgpOwogIHJldHVybiByOwp9OwoKfSx7Ii4uLy4uL2VsbGlwdGljIjoxMDEsImJuLmpzIjo0Mn1dLDEwMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBjdXJ2ZSA9IHJlcXVpcmUoJy4uL2N1cnZlJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CnZhciBCYXNlID0gY3VydmUuYmFzZTsKCnZhciBhc3NlcnQgPSBlbGxpcHRpYy51dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBFZHdhcmRzQ3VydmUoY29uZikgewogIC8vIE5PVEU6IEltcG9ydGFudCBhcyB3ZSBhcmUgY3JlYXRpbmcgcG9pbnQgaW4gQmFzZS5jYWxsKCkKICB0aGlzLnR3aXN0ZWQgPSAoY29uZi5hIHwgMCkgIT09IDE7CiAgdGhpcy5tT25lQSA9IHRoaXMudHdpc3RlZCAmJiAoY29uZi5hIHwgMCkgPT09IC0xOwogIHRoaXMuZXh0ZW5kZWQgPSB0aGlzLm1PbmVBOwoKICBCYXNlLmNhbGwodGhpcywgJ2Vkd2FyZHMnLCBjb25mKTsKCiAgdGhpcy5hID0gbmV3IEJOKGNvbmYuYSwgMTYpLnVtb2QodGhpcy5yZWQubSk7CiAgdGhpcy5hID0gdGhpcy5hLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLmMgPSBuZXcgQk4oY29uZi5jLCAxNikudG9SZWQodGhpcy5yZWQpOwogIHRoaXMuYzIgPSB0aGlzLmMucmVkU3FyKCk7CiAgdGhpcy5kID0gbmV3IEJOKGNvbmYuZCwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLmRkID0gdGhpcy5kLnJlZEFkZCh0aGlzLmQpOwoKICBhc3NlcnQoIXRoaXMudHdpc3RlZCB8fCB0aGlzLmMuZnJvbVJlZCgpLmNtcG4oMSkgPT09IDApOwogIHRoaXMub25lQyA9IChjb25mLmMgfCAwKSA9PT0gMTsKfQppbmhlcml0cyhFZHdhcmRzQ3VydmUsIEJhc2UpOwptb2R1bGUuZXhwb3J0cyA9IEVkd2FyZHNDdXJ2ZTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUuX211bEEgPSBmdW5jdGlvbiBfbXVsQShudW0pIHsKICBpZiAodGhpcy5tT25lQSkKICAgIHJldHVybiBudW0ucmVkTmVnKCk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuYS5yZWRNdWwobnVtKTsKfTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUuX211bEMgPSBmdW5jdGlvbiBfbXVsQyhudW0pIHsKICBpZiAodGhpcy5vbmVDKQogICAgcmV0dXJuIG51bTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5jLnJlZE11bChudW0pOwp9OwoKLy8gSnVzdCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIFNob3J0IGN1cnZlCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUuanBvaW50ID0gZnVuY3Rpb24ganBvaW50KHgsIHksIHosIHQpIHsKICByZXR1cm4gdGhpcy5wb2ludCh4LCB5LCB6LCB0KTsKfTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tWCA9IGZ1bmN0aW9uIHBvaW50RnJvbVgoeCwgb2RkKSB7CiAgeCA9IG5ldyBCTih4LCAxNik7CiAgaWYgKCF4LnJlZCkKICAgIHggPSB4LnRvUmVkKHRoaXMucmVkKTsKCiAgdmFyIHgyID0geC5yZWRTcXIoKTsKICB2YXIgcmhzID0gdGhpcy5jMi5yZWRTdWIodGhpcy5hLnJlZE11bCh4MikpOwogIHZhciBsaHMgPSB0aGlzLm9uZS5yZWRTdWIodGhpcy5jMi5yZWRNdWwodGhpcy5kKS5yZWRNdWwoeDIpKTsKCiAgdmFyIHkyID0gcmhzLnJlZE11bChsaHMucmVkSW52bSgpKTsKICB2YXIgeSA9IHkyLnJlZFNxcnQoKTsKICBpZiAoeS5yZWRTcXIoKS5yZWRTdWIoeTIpLmNtcCh0aGlzLnplcm8pICE9PSAwKQogICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHBvaW50Jyk7CgogIHZhciBpc09kZCA9IHkuZnJvbVJlZCgpLmlzT2RkKCk7CiAgaWYgKG9kZCAmJiAhaXNPZGQgfHwgIW9kZCAmJiBpc09kZCkKICAgIHkgPSB5LnJlZE5lZygpOwoKICByZXR1cm4gdGhpcy5wb2ludCh4LCB5KTsKfTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tWSA9IGZ1bmN0aW9uIHBvaW50RnJvbVkoeSwgb2RkKSB7CiAgeSA9IG5ldyBCTih5LCAxNik7CiAgaWYgKCF5LnJlZCkKICAgIHkgPSB5LnRvUmVkKHRoaXMucmVkKTsKCiAgLy8geF4yID0gKHleMiAtIDEpIC8gKGQgeV4yICsgMSkKICB2YXIgeTIgPSB5LnJlZFNxcigpOwogIHZhciBsaHMgPSB5Mi5yZWRTdWIodGhpcy5vbmUpOwogIHZhciByaHMgPSB5Mi5yZWRNdWwodGhpcy5kKS5yZWRBZGQodGhpcy5vbmUpOwogIHZhciB4MiA9IGxocy5yZWRNdWwocmhzLnJlZEludm0oKSk7CgogIGlmICh4Mi5jbXAodGhpcy56ZXJvKSA9PT0gMCkgewogICAgaWYgKG9kZCkKICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHBvaW50Jyk7CiAgICBlbHNlCiAgICAgIHJldHVybiB0aGlzLnBvaW50KHRoaXMuemVybywgeSk7CiAgfQoKICB2YXIgeCA9IHgyLnJlZFNxcnQoKTsKICBpZiAoeC5yZWRTcXIoKS5yZWRTdWIoeDIpLmNtcCh0aGlzLnplcm8pICE9PSAwKQogICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHBvaW50Jyk7CgogIGlmICh4LmlzT2RkKCkgIT09IG9kZCkKICAgIHggPSB4LnJlZE5lZygpOwoKICByZXR1cm4gdGhpcy5wb2ludCh4LCB5KTsKfTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZShwb2ludCkgewogIGlmIChwb2ludC5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gdHJ1ZTsKCiAgLy8gQ3VydmU6IEEgKiBYXjIgKyBZXjIgPSBDXjIgKiAoMSArIEQgKiBYXjIgKiBZXjIpCiAgcG9pbnQubm9ybWFsaXplKCk7CgogIHZhciB4MiA9IHBvaW50LngucmVkU3FyKCk7CiAgdmFyIHkyID0gcG9pbnQueS5yZWRTcXIoKTsKICB2YXIgbGhzID0geDIucmVkTXVsKHRoaXMuYSkucmVkQWRkKHkyKTsKICB2YXIgcmhzID0gdGhpcy5jMi5yZWRNdWwodGhpcy5vbmUucmVkQWRkKHRoaXMuZC5yZWRNdWwoeDIpLnJlZE11bCh5MikpKTsKCiAgcmV0dXJuIGxocy5jbXAocmhzKSA9PT0gMDsKfTsKCmZ1bmN0aW9uIFBvaW50KGN1cnZlLCB4LCB5LCB6LCB0KSB7CiAgQmFzZS5CYXNlUG9pbnQuY2FsbCh0aGlzLCBjdXJ2ZSwgJ3Byb2plY3RpdmUnKTsKICBpZiAoeCA9PT0gbnVsbCAmJiB5ID09PSBudWxsICYmIHogPT09IG51bGwpIHsKICAgIHRoaXMueCA9IHRoaXMuY3VydmUuemVybzsKICAgIHRoaXMueSA9IHRoaXMuY3VydmUub25lOwogICAgdGhpcy56ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgICB0aGlzLnQgPSB0aGlzLmN1cnZlLnplcm87CiAgICB0aGlzLnpPbmUgPSB0cnVlOwogIH0gZWxzZSB7CiAgICB0aGlzLnggPSBuZXcgQk4oeCwgMTYpOwogICAgdGhpcy55ID0gbmV3IEJOKHksIDE2KTsKICAgIHRoaXMueiA9IHogPyBuZXcgQk4oeiwgMTYpIDogdGhpcy5jdXJ2ZS5vbmU7CiAgICB0aGlzLnQgPSB0ICYmIG5ldyBCTih0LCAxNik7CiAgICBpZiAoIXRoaXMueC5yZWQpCiAgICAgIHRoaXMueCA9IHRoaXMueC50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICBpZiAoIXRoaXMueS5yZWQpCiAgICAgIHRoaXMueSA9IHRoaXMueS50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICBpZiAoIXRoaXMuei5yZWQpCiAgICAgIHRoaXMueiA9IHRoaXMuei50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICBpZiAodGhpcy50ICYmICF0aGlzLnQucmVkKQogICAgICB0aGlzLnQgPSB0aGlzLnQudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgdGhpcy56T25lID0gdGhpcy56ID09PSB0aGlzLmN1cnZlLm9uZTsKCiAgICAvLyBVc2UgZXh0ZW5kZWQgY29vcmRpbmF0ZXMKICAgIGlmICh0aGlzLmN1cnZlLmV4dGVuZGVkICYmICF0aGlzLnQpIHsKICAgICAgdGhpcy50ID0gdGhpcy54LnJlZE11bCh0aGlzLnkpOwogICAgICBpZiAoIXRoaXMuek9uZSkKICAgICAgICB0aGlzLnQgPSB0aGlzLnQucmVkTXVsKHRoaXMuei5yZWRJbnZtKCkpOwogICAgfQogIH0KfQppbmhlcml0cyhQb2ludCwgQmFzZS5CYXNlUG9pbnQpOwoKRWR3YXJkc0N1cnZlLnByb3RvdHlwZS5wb2ludEZyb21KU09OID0gZnVuY3Rpb24gcG9pbnRGcm9tSlNPTihvYmopIHsKICByZXR1cm4gUG9pbnQuZnJvbUpTT04odGhpcywgb2JqKTsKfTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUucG9pbnQgPSBmdW5jdGlvbiBwb2ludCh4LCB5LCB6LCB0KSB7CiAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLCB4LCB5LCB6LCB0KTsKfTsKClBvaW50LmZyb21KU09OID0gZnVuY3Rpb24gZnJvbUpTT04oY3VydmUsIG9iaikgewogIHJldHVybiBuZXcgUG9pbnQoY3VydmUsIG9ialswXSwgb2JqWzFdLCBvYmpbMl0pOwp9OwoKUG9pbnQucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiAnPEVDIFBvaW50IEluZmluaXR5Pic7CiAgcmV0dXJuICc8RUMgUG9pbnQgeDogJyArIHRoaXMueC5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsKICAgICAgJyB5OiAnICsgdGhpcy55LmZyb21SZWQoKS50b1N0cmluZygxNiwgMikgKwogICAgICAnIHo6ICcgKyB0aGlzLnouZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArICc+JzsKfTsKClBvaW50LnByb3RvdHlwZS5pc0luZmluaXR5ID0gZnVuY3Rpb24gaXNJbmZpbml0eSgpIHsKICAvLyBYWFggVGhpcyBjb2RlIGFzc3VtZXMgdGhhdCB6ZXJvIGlzIGFsd2F5cyB6ZXJvIGluIHJlZAogIHJldHVybiB0aGlzLnguY21wbigwKSA9PT0gMCAmJgogICAgICAgICB0aGlzLnkuY21wKHRoaXMueikgPT09IDA7Cn07CgpQb2ludC5wcm90b3R5cGUuX2V4dERibCA9IGZ1bmN0aW9uIF9leHREYmwoKSB7CiAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXR3aXN0ZWQtZXh0ZW5kZWQtMS5odG1sCiAgLy8gICAgICNkb3VibGluZy1kYmwtMjAwOC1od2NkCiAgLy8gNE0gKyA0UwoKICAvLyBBID0gWDFeMgogIHZhciBhID0gdGhpcy54LnJlZFNxcigpOwogIC8vIEIgPSBZMV4yCiAgdmFyIGIgPSB0aGlzLnkucmVkU3FyKCk7CiAgLy8gQyA9IDIgKiBaMV4yCiAgdmFyIGMgPSB0aGlzLnoucmVkU3FyKCk7CiAgYyA9IGMucmVkSUFkZChjKTsKICAvLyBEID0gYSAqIEEKICB2YXIgZCA9IHRoaXMuY3VydmUuX211bEEoYSk7CiAgLy8gRSA9IChYMSArIFkxKV4yIC0gQSAtIEIKICB2YXIgZSA9IHRoaXMueC5yZWRBZGQodGhpcy55KS5yZWRTcXIoKS5yZWRJU3ViKGEpLnJlZElTdWIoYik7CiAgLy8gRyA9IEQgKyBCCiAgdmFyIGcgPSBkLnJlZEFkZChiKTsKICAvLyBGID0gRyAtIEMKICB2YXIgZiA9IGcucmVkU3ViKGMpOwogIC8vIEggPSBEIC0gQgogIHZhciBoID0gZC5yZWRTdWIoYik7CiAgLy8gWDMgPSBFICogRgogIHZhciBueCA9IGUucmVkTXVsKGYpOwogIC8vIFkzID0gRyAqIEgKICB2YXIgbnkgPSBnLnJlZE11bChoKTsKICAvLyBUMyA9IEUgKiBICiAgdmFyIG50ID0gZS5yZWRNdWwoaCk7CiAgLy8gWjMgPSBGICogRwogIHZhciBueiA9IGYucmVkTXVsKGcpOwogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueSwgbnosIG50KTsKfTsKClBvaW50LnByb3RvdHlwZS5fcHJvakRibCA9IGZ1bmN0aW9uIF9wcm9qRGJsKCkgewogIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by10d2lzdGVkLXByb2plY3RpdmUuaHRtbAogIC8vICAgICAjZG91YmxpbmctZGJsLTIwMDgtYmJqbHAKICAvLyAgICAgI2RvdWJsaW5nLWRibC0yMDA3LWJsCiAgLy8gYW5kIG90aGVycwogIC8vIEdlbmVyYWxseSAzTSArIDRTIG9yIDJNICsgNFMKCiAgLy8gQiA9IChYMSArIFkxKV4yCiAgdmFyIGIgPSB0aGlzLngucmVkQWRkKHRoaXMueSkucmVkU3FyKCk7CiAgLy8gQyA9IFgxXjIKICB2YXIgYyA9IHRoaXMueC5yZWRTcXIoKTsKICAvLyBEID0gWTFeMgogIHZhciBkID0gdGhpcy55LnJlZFNxcigpOwoKICB2YXIgbng7CiAgdmFyIG55OwogIHZhciBuejsKICBpZiAodGhpcy5jdXJ2ZS50d2lzdGVkKSB7CiAgICAvLyBFID0gYSAqIEMKICAgIHZhciBlID0gdGhpcy5jdXJ2ZS5fbXVsQShjKTsKICAgIC8vIEYgPSBFICsgRAogICAgdmFyIGYgPSBlLnJlZEFkZChkKTsKICAgIGlmICh0aGlzLnpPbmUpIHsKICAgICAgLy8gWDMgPSAoQiAtIEMgLSBEKSAqIChGIC0gMikKICAgICAgbnggPSBiLnJlZFN1YihjKS5yZWRTdWIoZCkucmVkTXVsKGYucmVkU3ViKHRoaXMuY3VydmUudHdvKSk7CiAgICAgIC8vIFkzID0gRiAqIChFIC0gRCkKICAgICAgbnkgPSBmLnJlZE11bChlLnJlZFN1YihkKSk7CiAgICAgIC8vIFozID0gRl4yIC0gMiAqIEYKICAgICAgbnogPSBmLnJlZFNxcigpLnJlZFN1YihmKS5yZWRTdWIoZik7CiAgICB9IGVsc2UgewogICAgICAvLyBIID0gWjFeMgogICAgICB2YXIgaCA9IHRoaXMuei5yZWRTcXIoKTsKICAgICAgLy8gSiA9IEYgLSAyICogSAogICAgICB2YXIgaiA9IGYucmVkU3ViKGgpLnJlZElTdWIoaCk7CiAgICAgIC8vIFgzID0gKEItQy1EKSpKCiAgICAgIG54ID0gYi5yZWRTdWIoYykucmVkSVN1YihkKS5yZWRNdWwoaik7CiAgICAgIC8vIFkzID0gRiAqIChFIC0gRCkKICAgICAgbnkgPSBmLnJlZE11bChlLnJlZFN1YihkKSk7CiAgICAgIC8vIFozID0gRiAqIEoKICAgICAgbnogPSBmLnJlZE11bChqKTsKICAgIH0KICB9IGVsc2UgewogICAgLy8gRSA9IEMgKyBECiAgICB2YXIgZSA9IGMucmVkQWRkKGQpOwogICAgLy8gSCA9IChjICogWjEpXjIKICAgIHZhciBoID0gdGhpcy5jdXJ2ZS5fbXVsQyh0aGlzLmMucmVkTXVsKHRoaXMueikpLnJlZFNxcigpOwogICAgLy8gSiA9IEUgLSAyICogSAogICAgdmFyIGogPSBlLnJlZFN1YihoKS5yZWRTdWIoaCk7CiAgICAvLyBYMyA9IGMgKiAoQiAtIEUpICogSgogICAgbnggPSB0aGlzLmN1cnZlLl9tdWxDKGIucmVkSVN1YihlKSkucmVkTXVsKGopOwogICAgLy8gWTMgPSBjICogRSAqIChDIC0gRCkKICAgIG55ID0gdGhpcy5jdXJ2ZS5fbXVsQyhlKS5yZWRNdWwoYy5yZWRJU3ViKGQpKTsKICAgIC8vIFozID0gRSAqIEoKICAgIG56ID0gZS5yZWRNdWwoaik7CiAgfQogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueSwgbnopOwp9OwoKUG9pbnQucHJvdG90eXBlLmRibCA9IGZ1bmN0aW9uIGRibCgpIHsKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gdGhpczsKCiAgLy8gRG91YmxlIGluIGV4dGVuZGVkIGNvb3JkaW5hdGVzCiAgaWYgKHRoaXMuY3VydmUuZXh0ZW5kZWQpCiAgICByZXR1cm4gdGhpcy5fZXh0RGJsKCk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuX3Byb2pEYmwoKTsKfTsKClBvaW50LnByb3RvdHlwZS5fZXh0QWRkID0gZnVuY3Rpb24gX2V4dEFkZChwKSB7CiAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXR3aXN0ZWQtZXh0ZW5kZWQtMS5odG1sCiAgLy8gICAgICNhZGRpdGlvbi1hZGQtMjAwOC1od2NkLTMKICAvLyA4TQoKICAvLyBBID0gKFkxIC0gWDEpICogKFkyIC0gWDIpCiAgdmFyIGEgPSB0aGlzLnkucmVkU3ViKHRoaXMueCkucmVkTXVsKHAueS5yZWRTdWIocC54KSk7CiAgLy8gQiA9IChZMSArIFgxKSAqIChZMiArIFgyKQogIHZhciBiID0gdGhpcy55LnJlZEFkZCh0aGlzLngpLnJlZE11bChwLnkucmVkQWRkKHAueCkpOwogIC8vIEMgPSBUMSAqIGsgKiBUMgogIHZhciBjID0gdGhpcy50LnJlZE11bCh0aGlzLmN1cnZlLmRkKS5yZWRNdWwocC50KTsKICAvLyBEID0gWjEgKiAyICogWjIKICB2YXIgZCA9IHRoaXMuei5yZWRNdWwocC56LnJlZEFkZChwLnopKTsKICAvLyBFID0gQiAtIEEKICB2YXIgZSA9IGIucmVkU3ViKGEpOwogIC8vIEYgPSBEIC0gQwogIHZhciBmID0gZC5yZWRTdWIoYyk7CiAgLy8gRyA9IEQgKyBDCiAgdmFyIGcgPSBkLnJlZEFkZChjKTsKICAvLyBIID0gQiArIEEKICB2YXIgaCA9IGIucmVkQWRkKGEpOwogIC8vIFgzID0gRSAqIEYKICB2YXIgbnggPSBlLnJlZE11bChmKTsKICAvLyBZMyA9IEcgKiBICiAgdmFyIG55ID0gZy5yZWRNdWwoaCk7CiAgLy8gVDMgPSBFICogSAogIHZhciBudCA9IGUucmVkTXVsKGgpOwogIC8vIFozID0gRiAqIEcKICB2YXIgbnogPSBmLnJlZE11bChnKTsKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnksIG56LCBudCk7Cn07CgpQb2ludC5wcm90b3R5cGUuX3Byb2pBZGQgPSBmdW5jdGlvbiBfcHJvakFkZChwKSB7CiAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXR3aXN0ZWQtcHJvamVjdGl2ZS5odG1sCiAgLy8gICAgICNhZGRpdGlvbi1hZGQtMjAwOC1iYmpscAogIC8vICAgICAjYWRkaXRpb24tYWRkLTIwMDctYmwKICAvLyAxME0gKyAxUwoKICAvLyBBID0gWjEgKiBaMgogIHZhciBhID0gdGhpcy56LnJlZE11bChwLnopOwogIC8vIEIgPSBBXjIKICB2YXIgYiA9IGEucmVkU3FyKCk7CiAgLy8gQyA9IFgxICogWDIKICB2YXIgYyA9IHRoaXMueC5yZWRNdWwocC54KTsKICAvLyBEID0gWTEgKiBZMgogIHZhciBkID0gdGhpcy55LnJlZE11bChwLnkpOwogIC8vIEUgPSBkICogQyAqIEQKICB2YXIgZSA9IHRoaXMuY3VydmUuZC5yZWRNdWwoYykucmVkTXVsKGQpOwogIC8vIEYgPSBCIC0gRQogIHZhciBmID0gYi5yZWRTdWIoZSk7CiAgLy8gRyA9IEIgKyBFCiAgdmFyIGcgPSBiLnJlZEFkZChlKTsKICAvLyBYMyA9IEEgKiBGICogKChYMSArIFkxKSAqIChYMiArIFkyKSAtIEMgLSBEKQogIHZhciB0bXAgPSB0aGlzLngucmVkQWRkKHRoaXMueSkucmVkTXVsKHAueC5yZWRBZGQocC55KSkucmVkSVN1YihjKS5yZWRJU3ViKGQpOwogIHZhciBueCA9IGEucmVkTXVsKGYpLnJlZE11bCh0bXApOwogIHZhciBueTsKICB2YXIgbno7CiAgaWYgKHRoaXMuY3VydmUudHdpc3RlZCkgewogICAgLy8gWTMgPSBBICogRyAqIChEIC0gYSAqIEMpCiAgICBueSA9IGEucmVkTXVsKGcpLnJlZE11bChkLnJlZFN1Yih0aGlzLmN1cnZlLl9tdWxBKGMpKSk7CiAgICAvLyBaMyA9IEYgKiBHCiAgICBueiA9IGYucmVkTXVsKGcpOwogIH0gZWxzZSB7CiAgICAvLyBZMyA9IEEgKiBHICogKEQgLSBDKQogICAgbnkgPSBhLnJlZE11bChnKS5yZWRNdWwoZC5yZWRTdWIoYykpOwogICAgLy8gWjMgPSBjICogRiAqIEcKICAgIG56ID0gdGhpcy5jdXJ2ZS5fbXVsQyhmKS5yZWRNdWwoZyk7CiAgfQogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueSwgbnopOwp9OwoKUG9pbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZChwKSB7CiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHA7CiAgaWYgKHAuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHRoaXM7CgogIGlmICh0aGlzLmN1cnZlLmV4dGVuZGVkKQogICAgcmV0dXJuIHRoaXMuX2V4dEFkZChwKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5fcHJvakFkZChwKTsKfTsKClBvaW50LnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwoaykgewogIGlmICh0aGlzLl9oYXNEb3VibGVzKGspKQogICAgcmV0dXJuIHRoaXMuY3VydmUuX2ZpeGVkTmFmTXVsKHRoaXMsIGspOwogIGVsc2UKICAgIHJldHVybiB0aGlzLmN1cnZlLl93bmFmTXVsKHRoaXMsIGspOwp9OwoKUG9pbnQucHJvdG90eXBlLm11bEFkZCA9IGZ1bmN0aW9uIG11bEFkZChrMSwgcCwgazIpIHsKICByZXR1cm4gdGhpcy5jdXJ2ZS5fd25hZk11bEFkZCgxLCBbIHRoaXMsIHAgXSwgWyBrMSwgazIgXSwgMik7Cn07CgpQb2ludC5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24gbm9ybWFsaXplKCkgewogIGlmICh0aGlzLnpPbmUpCiAgICByZXR1cm4gdGhpczsKCiAgLy8gTm9ybWFsaXplIGNvb3JkaW5hdGVzCiAgdmFyIHppID0gdGhpcy56LnJlZEludm0oKTsKICB0aGlzLnggPSB0aGlzLngucmVkTXVsKHppKTsKICB0aGlzLnkgPSB0aGlzLnkucmVkTXVsKHppKTsKICBpZiAodGhpcy50KQogICAgdGhpcy50ID0gdGhpcy50LnJlZE11bCh6aSk7CiAgdGhpcy56ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgdGhpcy56T25lID0gdHJ1ZTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50LnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcoKSB7CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQodGhpcy54LnJlZE5lZygpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnosCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ICYmIHRoaXMudC5yZWROZWcoKSk7Cn07CgpQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uIGdldFgoKSB7CiAgdGhpcy5ub3JtYWxpemUoKTsKICByZXR1cm4gdGhpcy54LmZyb21SZWQoKTsKfTsKClBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gZ2V0WSgpIHsKICB0aGlzLm5vcm1hbGl6ZSgpOwogIHJldHVybiB0aGlzLnkuZnJvbVJlZCgpOwp9OwoKUG9pbnQucHJvdG90eXBlLmVxID0gZnVuY3Rpb24gZXEob3RoZXIpIHsKICByZXR1cm4gdGhpcyA9PT0gb3RoZXIgfHwKICAgICAgICAgdGhpcy5nZXRYKCkuY21wKG90aGVyLmdldFgoKSkgPT09IDAgJiYKICAgICAgICAgdGhpcy5nZXRZKCkuY21wKG90aGVyLmdldFkoKSkgPT09IDA7Cn07CgovLyBDb21wYXRpYmlsaXR5IHdpdGggQmFzZUN1cnZlClBvaW50LnByb3RvdHlwZS50b1AgPSBQb2ludC5wcm90b3R5cGUubm9ybWFsaXplOwpQb2ludC5wcm90b3R5cGUubWl4ZWRBZGQgPSBQb2ludC5wcm90b3R5cGUuYWRkOwoKfSx7Ii4uLy4uL2VsbGlwdGljIjoxMDEsIi4uL2N1cnZlIjoxMDQsImJuLmpzIjo0MiwiaW5oZXJpdHMiOjEyOX1dLDEwNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBjdXJ2ZSA9IGV4cG9ydHM7CgpjdXJ2ZS5iYXNlID0gcmVxdWlyZSgnLi9iYXNlJyk7CmN1cnZlLnNob3J0ID0gcmVxdWlyZSgnLi9zaG9ydCcpOwpjdXJ2ZS5tb250ID0gcmVxdWlyZSgnLi9tb250Jyk7CmN1cnZlLmVkd2FyZHMgPSByZXF1aXJlKCcuL2Vkd2FyZHMnKTsKCn0seyIuL2Jhc2UiOjEwMiwiLi9lZHdhcmRzIjoxMDMsIi4vbW9udCI6MTA1LCIuL3Nob3J0IjoxMDZ9XSwxMDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgY3VydmUgPSByZXF1aXJlKCcuLi9jdXJ2ZScpOwp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwp2YXIgQmFzZSA9IGN1cnZlLmJhc2U7Cgp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCcuLi8uLi9lbGxpcHRpYycpOwp2YXIgdXRpbHMgPSBlbGxpcHRpYy51dGlsczsKCmZ1bmN0aW9uIE1vbnRDdXJ2ZShjb25mKSB7CiAgQmFzZS5jYWxsKHRoaXMsICdtb250JywgY29uZik7CgogIHRoaXMuYSA9IG5ldyBCTihjb25mLmEsIDE2KS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy5iID0gbmV3IEJOKGNvbmYuYiwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLmk0ID0gbmV3IEJOKDQpLnRvUmVkKHRoaXMucmVkKS5yZWRJbnZtKCk7CiAgdGhpcy50d28gPSBuZXcgQk4oMikudG9SZWQodGhpcy5yZWQpOwogIHRoaXMuYTI0ID0gdGhpcy5pNC5yZWRNdWwodGhpcy5hLnJlZEFkZCh0aGlzLnR3bykpOwp9CmluaGVyaXRzKE1vbnRDdXJ2ZSwgQmFzZSk7Cm1vZHVsZS5leHBvcnRzID0gTW9udEN1cnZlOwoKTW9udEN1cnZlLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKHBvaW50KSB7CiAgdmFyIHggPSBwb2ludC5ub3JtYWxpemUoKS54OwogIHZhciB4MiA9IHgucmVkU3FyKCk7CiAgdmFyIHJocyA9IHgyLnJlZE11bCh4KS5yZWRBZGQoeDIucmVkTXVsKHRoaXMuYSkpLnJlZEFkZCh4KTsKICB2YXIgeSA9IHJocy5yZWRTcXJ0KCk7CgogIHJldHVybiB5LnJlZFNxcigpLmNtcChyaHMpID09PSAwOwp9OwoKZnVuY3Rpb24gUG9pbnQoY3VydmUsIHgsIHopIHsKICBCYXNlLkJhc2VQb2ludC5jYWxsKHRoaXMsIGN1cnZlLCAncHJvamVjdGl2ZScpOwogIGlmICh4ID09PSBudWxsICYmIHogPT09IG51bGwpIHsKICAgIHRoaXMueCA9IHRoaXMuY3VydmUub25lOwogICAgdGhpcy56ID0gdGhpcy5jdXJ2ZS56ZXJvOwogIH0gZWxzZSB7CiAgICB0aGlzLnggPSBuZXcgQk4oeCwgMTYpOwogICAgdGhpcy56ID0gbmV3IEJOKHosIDE2KTsKICAgIGlmICghdGhpcy54LnJlZCkKICAgICAgdGhpcy54ID0gdGhpcy54LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgIGlmICghdGhpcy56LnJlZCkKICAgICAgdGhpcy56ID0gdGhpcy56LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICB9Cn0KaW5oZXJpdHMoUG9pbnQsIEJhc2UuQmFzZVBvaW50KTsKCk1vbnRDdXJ2ZS5wcm90b3R5cGUuZGVjb2RlUG9pbnQgPSBmdW5jdGlvbiBkZWNvZGVQb2ludChieXRlcywgZW5jKSB7CiAgcmV0dXJuIHRoaXMucG9pbnQodXRpbHMudG9BcnJheShieXRlcywgZW5jKSwgMSk7Cn07CgpNb250Q3VydmUucHJvdG90eXBlLnBvaW50ID0gZnVuY3Rpb24gcG9pbnQoeCwgeikgewogIHJldHVybiBuZXcgUG9pbnQodGhpcywgeCwgeik7Cn07CgpNb250Q3VydmUucHJvdG90eXBlLnBvaW50RnJvbUpTT04gPSBmdW5jdGlvbiBwb2ludEZyb21KU09OKG9iaikgewogIHJldHVybiBQb2ludC5mcm9tSlNPTih0aGlzLCBvYmopOwp9OwoKUG9pbnQucHJvdG90eXBlLnByZWNvbXB1dGUgPSBmdW5jdGlvbiBwcmVjb21wdXRlKCkgewogIC8vIE5vLW9wCn07CgpQb2ludC5wcm90b3R5cGUuX2VuY29kZSA9IGZ1bmN0aW9uIF9lbmNvZGUoKSB7CiAgcmV0dXJuIHRoaXMuZ2V0WCgpLnRvQXJyYXkoJ2JlJywgdGhpcy5jdXJ2ZS5wLmJ5dGVMZW5ndGgoKSk7Cn07CgpQb2ludC5mcm9tSlNPTiA9IGZ1bmN0aW9uIGZyb21KU09OKGN1cnZlLCBvYmopIHsKICByZXR1cm4gbmV3IFBvaW50KGN1cnZlLCBvYmpbMF0sIG9ialsxXSB8fCBjdXJ2ZS5vbmUpOwp9OwoKUG9pbnQucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiAnPEVDIFBvaW50IEluZmluaXR5Pic7CiAgcmV0dXJuICc8RUMgUG9pbnQgeDogJyArIHRoaXMueC5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsKICAgICAgJyB6OiAnICsgdGhpcy56LmZyb21SZWQoKS50b1N0cmluZygxNiwgMikgKyAnPic7Cn07CgpQb2ludC5wcm90b3R5cGUuaXNJbmZpbml0eSA9IGZ1bmN0aW9uIGlzSW5maW5pdHkoKSB7CiAgLy8gWFhYIFRoaXMgY29kZSBhc3N1bWVzIHRoYXQgemVybyBpcyBhbHdheXMgemVybyBpbiByZWQKICByZXR1cm4gdGhpcy56LmNtcG4oMCkgPT09IDA7Cn07CgpQb2ludC5wcm90b3R5cGUuZGJsID0gZnVuY3Rpb24gZGJsKCkgewogIC8vIGh0dHA6Ly9oeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tbW9udGdvbS14ei5odG1sI2RvdWJsaW5nLWRibC0xOTg3LW0tMwogIC8vIDJNICsgMlMgKyA0QQoKICAvLyBBID0gWDEgKyBaMQogIHZhciBhID0gdGhpcy54LnJlZEFkZCh0aGlzLnopOwogIC8vIEFBID0gQV4yCiAgdmFyIGFhID0gYS5yZWRTcXIoKTsKICAvLyBCID0gWDEgLSBaMQogIHZhciBiID0gdGhpcy54LnJlZFN1Yih0aGlzLnopOwogIC8vIEJCID0gQl4yCiAgdmFyIGJiID0gYi5yZWRTcXIoKTsKICAvLyBDID0gQUEgLSBCQgogIHZhciBjID0gYWEucmVkU3ViKGJiKTsKICAvLyBYMyA9IEFBICogQkIKICB2YXIgbnggPSBhYS5yZWRNdWwoYmIpOwogIC8vIFozID0gQyAqIChCQiArIEEyNCAqIEMpCiAgdmFyIG56ID0gYy5yZWRNdWwoYmIucmVkQWRkKHRoaXMuY3VydmUuYTI0LnJlZE11bChjKSkpOwogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueik7Cn07CgpQb2ludC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkKCkgewogIHRocm93IG5ldyBFcnJvcignTm90IHN1cHBvcnRlZCBvbiBNb250Z29tZXJ5IGN1cnZlJyk7Cn07CgpQb2ludC5wcm90b3R5cGUuZGlmZkFkZCA9IGZ1bmN0aW9uIGRpZmZBZGQocCwgZGlmZikgewogIC8vIGh0dHA6Ly9oeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tbW9udGdvbS14ei5odG1sI2RpZmZhZGQtZGFkZC0xOTg3LW0tMwogIC8vIDRNICsgMlMgKyA2QQoKICAvLyBBID0gWDIgKyBaMgogIHZhciBhID0gdGhpcy54LnJlZEFkZCh0aGlzLnopOwogIC8vIEIgPSBYMiAtIFoyCiAgdmFyIGIgPSB0aGlzLngucmVkU3ViKHRoaXMueik7CiAgLy8gQyA9IFgzICsgWjMKICB2YXIgYyA9IHAueC5yZWRBZGQocC56KTsKICAvLyBEID0gWDMgLSBaMwogIHZhciBkID0gcC54LnJlZFN1YihwLnopOwogIC8vIERBID0gRCAqIEEKICB2YXIgZGEgPSBkLnJlZE11bChhKTsKICAvLyBDQiA9IEMgKiBCCiAgdmFyIGNiID0gYy5yZWRNdWwoYik7CiAgLy8gWDUgPSBaMSAqIChEQSArIENCKV4yCiAgdmFyIG54ID0gZGlmZi56LnJlZE11bChkYS5yZWRBZGQoY2IpLnJlZFNxcigpKTsKICAvLyBaNSA9IFgxICogKERBIC0gQ0IpXjIKICB2YXIgbnogPSBkaWZmLngucmVkTXVsKGRhLnJlZElTdWIoY2IpLnJlZFNxcigpKTsKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnopOwp9OwoKUG9pbnQucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bChrKSB7CiAgdmFyIHQgPSBrLmNsb25lKCk7CiAgdmFyIGEgPSB0aGlzOyAvLyAoTiAvIDIpICogUSArIFEKICB2YXIgYiA9IHRoaXMuY3VydmUucG9pbnQobnVsbCwgbnVsbCk7IC8vIChOIC8gMikgKiBRCiAgdmFyIGMgPSB0aGlzOyAvLyBRCgogIGZvciAodmFyIGJpdHMgPSBbXTsgdC5jbXBuKDApICE9PSAwOyB0Lml1c2hybigxKSkKICAgIGJpdHMucHVzaCh0LmFuZGxuKDEpKTsKCiAgZm9yICh2YXIgaSA9IGJpdHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIGlmIChiaXRzW2ldID09PSAwKSB7CiAgICAgIC8vIE4gKiBRICsgUSA9ICgoTiAvIDIpICogUSArIFEpKSArIChOIC8gMikgKiBRCiAgICAgIGEgPSBhLmRpZmZBZGQoYiwgYyk7CiAgICAgIC8vIE4gKiBRID0gMiAqICgoTiAvIDIpICogUSArIFEpKQogICAgICBiID0gYi5kYmwoKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIE4gKiBRID0gKChOIC8gMikgKiBRICsgUSkgKyAoKE4gLyAyKSAqIFEpCiAgICAgIGIgPSBhLmRpZmZBZGQoYiwgYyk7CiAgICAgIC8vIE4gKiBRICsgUSA9IDIgKiAoKE4gLyAyKSAqIFEgKyBRKQogICAgICBhID0gYS5kYmwoKTsKICAgIH0KICB9CiAgcmV0dXJuIGI7Cn07CgpQb2ludC5wcm90b3R5cGUubXVsQWRkID0gZnVuY3Rpb24gbXVsQWRkKCkgewogIHRocm93IG5ldyBFcnJvcignTm90IHN1cHBvcnRlZCBvbiBNb250Z29tZXJ5IGN1cnZlJyk7Cn07CgpQb2ludC5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcShvdGhlcikgewogIHJldHVybiB0aGlzLmdldFgoKS5jbXAob3RoZXIuZ2V0WCgpKSA9PT0gMDsKfTsKClBvaW50LnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiBub3JtYWxpemUoKSB7CiAgdGhpcy54ID0gdGhpcy54LnJlZE11bCh0aGlzLnoucmVkSW52bSgpKTsKICB0aGlzLnogPSB0aGlzLmN1cnZlLm9uZTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50LnByb3RvdHlwZS5nZXRYID0gZnVuY3Rpb24gZ2V0WCgpIHsKICAvLyBOb3JtYWxpemUgY29vcmRpbmF0ZXMKICB0aGlzLm5vcm1hbGl6ZSgpOwoKICByZXR1cm4gdGhpcy54LmZyb21SZWQoKTsKfTsKCn0seyIuLi8uLi9lbGxpcHRpYyI6MTAxLCIuLi9jdXJ2ZSI6MTA0LCJibi5qcyI6NDIsImluaGVyaXRzIjoxMjl9XSwxMDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgY3VydmUgPSByZXF1aXJlKCcuLi9jdXJ2ZScpOwp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCcuLi8uLi9lbGxpcHRpYycpOwp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwp2YXIgQmFzZSA9IGN1cnZlLmJhc2U7Cgp2YXIgYXNzZXJ0ID0gZWxsaXB0aWMudXRpbHMuYXNzZXJ0OwoKZnVuY3Rpb24gU2hvcnRDdXJ2ZShjb25mKSB7CiAgQmFzZS5jYWxsKHRoaXMsICdzaG9ydCcsIGNvbmYpOwoKICB0aGlzLmEgPSBuZXcgQk4oY29uZi5hLCAxNikudG9SZWQodGhpcy5yZWQpOwogIHRoaXMuYiA9IG5ldyBCTihjb25mLmIsIDE2KS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy50aW52ID0gdGhpcy50d28ucmVkSW52bSgpOwoKICB0aGlzLnplcm9BID0gdGhpcy5hLmZyb21SZWQoKS5jbXBuKDApID09PSAwOwogIHRoaXMudGhyZWVBID0gdGhpcy5hLmZyb21SZWQoKS5zdWIodGhpcy5wKS5jbXBuKC0zKSA9PT0gMDsKCiAgLy8gSWYgdGhlIGN1cnZlIGlzIGVuZG9tb3JwaGljLCBwcmVjYWxjdWxhdGUgYmV0YSBhbmQgbGFtYmRhCiAgdGhpcy5lbmRvID0gdGhpcy5fZ2V0RW5kb21vcnBoaXNtKGNvbmYpOwogIHRoaXMuX2VuZG9XbmFmVDEgPSBuZXcgQXJyYXkoNCk7CiAgdGhpcy5fZW5kb1duYWZUMiA9IG5ldyBBcnJheSg0KTsKfQppbmhlcml0cyhTaG9ydEN1cnZlLCBCYXNlKTsKbW9kdWxlLmV4cG9ydHMgPSBTaG9ydEN1cnZlOwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUuX2dldEVuZG9tb3JwaGlzbSA9IGZ1bmN0aW9uIF9nZXRFbmRvbW9ycGhpc20oY29uZikgewogIC8vIE5vIGVmZmljaWVudCBlbmRvbW9ycGhpc20KICBpZiAoIXRoaXMuemVyb0EgfHwgIXRoaXMuZyB8fCAhdGhpcy5uIHx8IHRoaXMucC5tb2RuKDMpICE9PSAxKQogICAgcmV0dXJuOwoKICAvLyBDb21wdXRlIGJldGEgYW5kIGxhbWJkYSwgdGhhdCBsYW1iZGEgKiBQID0gKGJldGEgKiBQeDsgUHkpCiAgdmFyIGJldGE7CiAgdmFyIGxhbWJkYTsKICBpZiAoY29uZi5iZXRhKSB7CiAgICBiZXRhID0gbmV3IEJOKGNvbmYuYmV0YSwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICB9IGVsc2UgewogICAgdmFyIGJldGFzID0gdGhpcy5fZ2V0RW5kb1Jvb3RzKHRoaXMucCk7CiAgICAvLyBDaG9vc2UgdGhlIHNtYWxsZXN0IGJldGEKICAgIGJldGEgPSBiZXRhc1swXS5jbXAoYmV0YXNbMV0pIDwgMCA/IGJldGFzWzBdIDogYmV0YXNbMV07CiAgICBiZXRhID0gYmV0YS50b1JlZCh0aGlzLnJlZCk7CiAgfQogIGlmIChjb25mLmxhbWJkYSkgewogICAgbGFtYmRhID0gbmV3IEJOKGNvbmYubGFtYmRhLCAxNik7CiAgfSBlbHNlIHsKICAgIC8vIENob29zZSB0aGUgbGFtYmRhIHRoYXQgaXMgbWF0Y2hpbmcgc2VsZWN0ZWQgYmV0YQogICAgdmFyIGxhbWJkYXMgPSB0aGlzLl9nZXRFbmRvUm9vdHModGhpcy5uKTsKICAgIGlmICh0aGlzLmcubXVsKGxhbWJkYXNbMF0pLnguY21wKHRoaXMuZy54LnJlZE11bChiZXRhKSkgPT09IDApIHsKICAgICAgbGFtYmRhID0gbGFtYmRhc1swXTsKICAgIH0gZWxzZSB7CiAgICAgIGxhbWJkYSA9IGxhbWJkYXNbMV07CiAgICAgIGFzc2VydCh0aGlzLmcubXVsKGxhbWJkYSkueC5jbXAodGhpcy5nLngucmVkTXVsKGJldGEpKSA9PT0gMCk7CiAgICB9CiAgfQoKICAvLyBHZXQgYmFzaXMgdmVjdG9ycywgdXNlZCBmb3IgYmFsYW5jZWQgbGVuZ3RoLXR3byByZXByZXNlbnRhdGlvbgogIHZhciBiYXNpczsKICBpZiAoY29uZi5iYXNpcykgewogICAgYmFzaXMgPSBjb25mLmJhc2lzLm1hcChmdW5jdGlvbih2ZWMpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBhOiBuZXcgQk4odmVjLmEsIDE2KSwKICAgICAgICBiOiBuZXcgQk4odmVjLmIsIDE2KQogICAgICB9OwogICAgfSk7CiAgfSBlbHNlIHsKICAgIGJhc2lzID0gdGhpcy5fZ2V0RW5kb0Jhc2lzKGxhbWJkYSk7CiAgfQoKICByZXR1cm4gewogICAgYmV0YTogYmV0YSwKICAgIGxhbWJkYTogbGFtYmRhLAogICAgYmFzaXM6IGJhc2lzCiAgfTsKfTsKClNob3J0Q3VydmUucHJvdG90eXBlLl9nZXRFbmRvUm9vdHMgPSBmdW5jdGlvbiBfZ2V0RW5kb1Jvb3RzKG51bSkgewogIC8vIEZpbmQgcm9vdHMgb2YgZm9yIHheMiArIHggKyAxIGluIEYKICAvLyBSb290ID0gKC0xICstIFNxcnQoLTMpKSAvIDIKICAvLwogIHZhciByZWQgPSBudW0gPT09IHRoaXMucCA/IHRoaXMucmVkIDogQk4ubW9udChudW0pOwogIHZhciB0aW52ID0gbmV3IEJOKDIpLnRvUmVkKHJlZCkucmVkSW52bSgpOwogIHZhciBudGludiA9IHRpbnYucmVkTmVnKCk7CgogIHZhciBzID0gbmV3IEJOKDMpLnRvUmVkKHJlZCkucmVkTmVnKCkucmVkU3FydCgpLnJlZE11bCh0aW52KTsKCiAgdmFyIGwxID0gbnRpbnYucmVkQWRkKHMpLmZyb21SZWQoKTsKICB2YXIgbDIgPSBudGludi5yZWRTdWIocykuZnJvbVJlZCgpOwogIHJldHVybiBbIGwxLCBsMiBdOwp9OwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUuX2dldEVuZG9CYXNpcyA9IGZ1bmN0aW9uIF9nZXRFbmRvQmFzaXMobGFtYmRhKSB7CiAgLy8gYXByeFNxcnQgPj0gc3FydCh0aGlzLm4pCiAgdmFyIGFwcnhTcXJ0ID0gdGhpcy5uLnVzaHJuKE1hdGguZmxvb3IodGhpcy5uLmJpdExlbmd0aCgpIC8gMikpOwoKICAvLyAzLjc0CiAgLy8gUnVuIEVHQ0QsIHVudGlsIHIoTCArIDEpIDwgYXByeFNxcnQKICB2YXIgdSA9IGxhbWJkYTsKICB2YXIgdiA9IHRoaXMubi5jbG9uZSgpOwogIHZhciB4MSA9IG5ldyBCTigxKTsKICB2YXIgeTEgPSBuZXcgQk4oMCk7CiAgdmFyIHgyID0gbmV3IEJOKDApOwogIHZhciB5MiA9IG5ldyBCTigxKTsKCiAgLy8gTk9URTogYWxsIHZlY3RvcnMgYXJlIHJvb3RzIG9mOiBhICsgYiAqIGxhbWJkYSA9IDAgKG1vZCBuKQogIHZhciBhMDsKICB2YXIgYjA7CiAgLy8gRmlyc3QgdmVjdG9yCiAgdmFyIGExOwogIHZhciBiMTsKICAvLyBTZWNvbmQgdmVjdG9yCiAgdmFyIGEyOwogIHZhciBiMjsKCiAgdmFyIHByZXZSOwogIHZhciBpID0gMDsKICB2YXIgcjsKICB2YXIgeDsKICB3aGlsZSAodS5jbXBuKDApICE9PSAwKSB7CiAgICB2YXIgcSA9IHYuZGl2KHUpOwogICAgciA9IHYuc3ViKHEubXVsKHUpKTsKICAgIHggPSB4Mi5zdWIocS5tdWwoeDEpKTsKICAgIHZhciB5ID0geTIuc3ViKHEubXVsKHkxKSk7CgogICAgaWYgKCFhMSAmJiByLmNtcChhcHJ4U3FydCkgPCAwKSB7CiAgICAgIGEwID0gcHJldlIubmVnKCk7CiAgICAgIGIwID0geDE7CiAgICAgIGExID0gci5uZWcoKTsKICAgICAgYjEgPSB4OwogICAgfSBlbHNlIGlmIChhMSAmJiArK2kgPT09IDIpIHsKICAgICAgYnJlYWs7CiAgICB9CiAgICBwcmV2UiA9IHI7CgogICAgdiA9IHU7CiAgICB1ID0gcjsKICAgIHgyID0geDE7CiAgICB4MSA9IHg7CiAgICB5MiA9IHkxOwogICAgeTEgPSB5OwogIH0KICBhMiA9IHIubmVnKCk7CiAgYjIgPSB4OwoKICB2YXIgbGVuMSA9IGExLnNxcigpLmFkZChiMS5zcXIoKSk7CiAgdmFyIGxlbjIgPSBhMi5zcXIoKS5hZGQoYjIuc3FyKCkpOwogIGlmIChsZW4yLmNtcChsZW4xKSA+PSAwKSB7CiAgICBhMiA9IGEwOwogICAgYjIgPSBiMDsKICB9CgogIC8vIE5vcm1hbGl6ZSBzaWducwogIGlmIChhMS5uZWdhdGl2ZSkgewogICAgYTEgPSBhMS5uZWcoKTsKICAgIGIxID0gYjEubmVnKCk7CiAgfQogIGlmIChhMi5uZWdhdGl2ZSkgewogICAgYTIgPSBhMi5uZWcoKTsKICAgIGIyID0gYjIubmVnKCk7CiAgfQoKICByZXR1cm4gWwogICAgeyBhOiBhMSwgYjogYjEgfSwKICAgIHsgYTogYTIsIGI6IGIyIH0KICBdOwp9OwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUuX2VuZG9TcGxpdCA9IGZ1bmN0aW9uIF9lbmRvU3BsaXQoaykgewogIHZhciBiYXNpcyA9IHRoaXMuZW5kby5iYXNpczsKICB2YXIgdjEgPSBiYXNpc1swXTsKICB2YXIgdjIgPSBiYXNpc1sxXTsKCiAgdmFyIGMxID0gdjIuYi5tdWwoaykuZGl2Um91bmQodGhpcy5uKTsKICB2YXIgYzIgPSB2MS5iLm5lZygpLm11bChrKS5kaXZSb3VuZCh0aGlzLm4pOwoKICB2YXIgcDEgPSBjMS5tdWwodjEuYSk7CiAgdmFyIHAyID0gYzIubXVsKHYyLmEpOwogIHZhciBxMSA9IGMxLm11bCh2MS5iKTsKICB2YXIgcTIgPSBjMi5tdWwodjIuYik7CgogIC8vIENhbGN1bGF0ZSBhbnN3ZXIKICB2YXIgazEgPSBrLnN1YihwMSkuc3ViKHAyKTsKICB2YXIgazIgPSBxMS5hZGQocTIpLm5lZygpOwogIHJldHVybiB7IGsxOiBrMSwgazI6IGsyIH07Cn07CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5wb2ludEZyb21YID0gZnVuY3Rpb24gcG9pbnRGcm9tWCh4LCBvZGQpIHsKICB4ID0gbmV3IEJOKHgsIDE2KTsKICBpZiAoIXgucmVkKQogICAgeCA9IHgudG9SZWQodGhpcy5yZWQpOwoKICB2YXIgeTIgPSB4LnJlZFNxcigpLnJlZE11bCh4KS5yZWRJQWRkKHgucmVkTXVsKHRoaXMuYSkpLnJlZElBZGQodGhpcy5iKTsKICB2YXIgeSA9IHkyLnJlZFNxcnQoKTsKICBpZiAoeS5yZWRTcXIoKS5yZWRTdWIoeTIpLmNtcCh0aGlzLnplcm8pICE9PSAwKQogICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHBvaW50Jyk7CgogIC8vIFhYWCBJcyB0aGVyZSBhbnkgd2F5IHRvIHRlbGwgaWYgdGhlIG51bWJlciBpcyBvZGQgd2l0aG91dCBjb252ZXJ0aW5nIGl0CiAgLy8gdG8gbm9uLXJlZCBmb3JtPwogIHZhciBpc09kZCA9IHkuZnJvbVJlZCgpLmlzT2RkKCk7CiAgaWYgKG9kZCAmJiAhaXNPZGQgfHwgIW9kZCAmJiBpc09kZCkKICAgIHkgPSB5LnJlZE5lZygpOwoKICByZXR1cm4gdGhpcy5wb2ludCh4LCB5KTsKfTsKClNob3J0Q3VydmUucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUocG9pbnQpIHsKICBpZiAocG9pbnQuaW5mKQogICAgcmV0dXJuIHRydWU7CgogIHZhciB4ID0gcG9pbnQueDsKICB2YXIgeSA9IHBvaW50Lnk7CgogIHZhciBheCA9IHRoaXMuYS5yZWRNdWwoeCk7CiAgdmFyIHJocyA9IHgucmVkU3FyKCkucmVkTXVsKHgpLnJlZElBZGQoYXgpLnJlZElBZGQodGhpcy5iKTsKICByZXR1cm4geS5yZWRTcXIoKS5yZWRJU3ViKHJocykuY21wbigwKSA9PT0gMDsKfTsKClNob3J0Q3VydmUucHJvdG90eXBlLl9lbmRvV25hZk11bEFkZCA9CiAgICBmdW5jdGlvbiBfZW5kb1duYWZNdWxBZGQocG9pbnRzLCBjb2VmZnMpIHsKICB2YXIgbnBvaW50cyA9IHRoaXMuX2VuZG9XbmFmVDE7CiAgdmFyIG5jb2VmZnMgPSB0aGlzLl9lbmRvV25hZlQyOwogIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc3BsaXQgPSB0aGlzLl9lbmRvU3BsaXQoY29lZmZzW2ldKTsKICAgIHZhciBwID0gcG9pbnRzW2ldOwogICAgdmFyIGJldGEgPSBwLl9nZXRCZXRhKCk7CgogICAgaWYgKHNwbGl0LmsxLm5lZ2F0aXZlKSB7CiAgICAgIHNwbGl0LmsxLmluZWcoKTsKICAgICAgcCA9IHAubmVnKHRydWUpOwogICAgfQogICAgaWYgKHNwbGl0LmsyLm5lZ2F0aXZlKSB7CiAgICAgIHNwbGl0LmsyLmluZWcoKTsKICAgICAgYmV0YSA9IGJldGEubmVnKHRydWUpOwogICAgfQoKICAgIG5wb2ludHNbaSAqIDJdID0gcDsKICAgIG5wb2ludHNbaSAqIDIgKyAxXSA9IGJldGE7CiAgICBuY29lZmZzW2kgKiAyXSA9IHNwbGl0LmsxOwogICAgbmNvZWZmc1tpICogMiArIDFdID0gc3BsaXQuazI7CiAgfQogIHZhciByZXMgPSB0aGlzLl93bmFmTXVsQWRkKDEsIG5wb2ludHMsIG5jb2VmZnMsIGkgKiAyKTsKCiAgLy8gQ2xlYW4tdXAgcmVmZXJlbmNlcyB0byBwb2ludHMgYW5kIGNvZWZmaWNpZW50cwogIGZvciAodmFyIGogPSAwOyBqIDwgaSAqIDI7IGorKykgewogICAgbnBvaW50c1tqXSA9IG51bGw7CiAgICBuY29lZmZzW2pdID0gbnVsbDsKICB9CiAgcmV0dXJuIHJlczsKfTsKCmZ1bmN0aW9uIFBvaW50KGN1cnZlLCB4LCB5LCBpc1JlZCkgewogIEJhc2UuQmFzZVBvaW50LmNhbGwodGhpcywgY3VydmUsICdhZmZpbmUnKTsKICBpZiAoeCA9PT0gbnVsbCAmJiB5ID09PSBudWxsKSB7CiAgICB0aGlzLnggPSBudWxsOwogICAgdGhpcy55ID0gbnVsbDsKICAgIHRoaXMuaW5mID0gdHJ1ZTsKICB9IGVsc2UgewogICAgdGhpcy54ID0gbmV3IEJOKHgsIDE2KTsKICAgIHRoaXMueSA9IG5ldyBCTih5LCAxNik7CiAgICAvLyBGb3JjZSByZWRnb21lcnkgcmVwcmVzZW50YXRpb24gd2hlbiBsb2FkaW5nIGZyb20gSlNPTgogICAgaWYgKGlzUmVkKSB7CiAgICAgIHRoaXMueC5mb3JjZVJlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICAgIHRoaXMueS5mb3JjZVJlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICB9CiAgICBpZiAoIXRoaXMueC5yZWQpCiAgICAgIHRoaXMueCA9IHRoaXMueC50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICBpZiAoIXRoaXMueS5yZWQpCiAgICAgIHRoaXMueSA9IHRoaXMueS50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICB0aGlzLmluZiA9IGZhbHNlOwogIH0KfQppbmhlcml0cyhQb2ludCwgQmFzZS5CYXNlUG9pbnQpOwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUucG9pbnQgPSBmdW5jdGlvbiBwb2ludCh4LCB5LCBpc1JlZCkgewogIHJldHVybiBuZXcgUG9pbnQodGhpcywgeCwgeSwgaXNSZWQpOwp9OwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tSlNPTiA9IGZ1bmN0aW9uIHBvaW50RnJvbUpTT04ob2JqLCByZWQpIHsKICByZXR1cm4gUG9pbnQuZnJvbUpTT04odGhpcywgb2JqLCByZWQpOwp9OwoKUG9pbnQucHJvdG90eXBlLl9nZXRCZXRhID0gZnVuY3Rpb24gX2dldEJldGEoKSB7CiAgaWYgKCF0aGlzLmN1cnZlLmVuZG8pCiAgICByZXR1cm47CgogIHZhciBwcmUgPSB0aGlzLnByZWNvbXB1dGVkOwogIGlmIChwcmUgJiYgcHJlLmJldGEpCiAgICByZXR1cm4gcHJlLmJldGE7CgogIHZhciBiZXRhID0gdGhpcy5jdXJ2ZS5wb2ludCh0aGlzLngucmVkTXVsKHRoaXMuY3VydmUuZW5kby5iZXRhKSwgdGhpcy55KTsKICBpZiAocHJlKSB7CiAgICB2YXIgY3VydmUgPSB0aGlzLmN1cnZlOwogICAgdmFyIGVuZG9NdWwgPSBmdW5jdGlvbihwKSB7CiAgICAgIHJldHVybiBjdXJ2ZS5wb2ludChwLngucmVkTXVsKGN1cnZlLmVuZG8uYmV0YSksIHAueSk7CiAgICB9OwogICAgcHJlLmJldGEgPSBiZXRhOwogICAgYmV0YS5wcmVjb21wdXRlZCA9IHsKICAgICAgYmV0YTogbnVsbCwKICAgICAgbmFmOiBwcmUubmFmICYmIHsKICAgICAgICB3bmQ6IHByZS5uYWYud25kLAogICAgICAgIHBvaW50czogcHJlLm5hZi5wb2ludHMubWFwKGVuZG9NdWwpCiAgICAgIH0sCiAgICAgIGRvdWJsZXM6IHByZS5kb3VibGVzICYmIHsKICAgICAgICBzdGVwOiBwcmUuZG91Ymxlcy5zdGVwLAogICAgICAgIHBvaW50czogcHJlLmRvdWJsZXMucG9pbnRzLm1hcChlbmRvTXVsKQogICAgICB9CiAgICB9OwogIH0KICByZXR1cm4gYmV0YTsKfTsKClBvaW50LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7CiAgaWYgKCF0aGlzLnByZWNvbXB1dGVkKQogICAgcmV0dXJuIFsgdGhpcy54LCB0aGlzLnkgXTsKCiAgcmV0dXJuIFsgdGhpcy54LCB0aGlzLnksIHRoaXMucHJlY29tcHV0ZWQgJiYgewogICAgZG91YmxlczogdGhpcy5wcmVjb21wdXRlZC5kb3VibGVzICYmIHsKICAgICAgc3RlcDogdGhpcy5wcmVjb21wdXRlZC5kb3VibGVzLnN0ZXAsCiAgICAgIHBvaW50czogdGhpcy5wcmVjb21wdXRlZC5kb3VibGVzLnBvaW50cy5zbGljZSgxKQogICAgfSwKICAgIG5hZjogdGhpcy5wcmVjb21wdXRlZC5uYWYgJiYgewogICAgICB3bmQ6IHRoaXMucHJlY29tcHV0ZWQubmFmLnduZCwKICAgICAgcG9pbnRzOiB0aGlzLnByZWNvbXB1dGVkLm5hZi5wb2ludHMuc2xpY2UoMSkKICAgIH0KICB9IF07Cn07CgpQb2ludC5mcm9tSlNPTiA9IGZ1bmN0aW9uIGZyb21KU09OKGN1cnZlLCBvYmosIHJlZCkgewogIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykKICAgIG9iaiA9IEpTT04ucGFyc2Uob2JqKTsKICB2YXIgcmVzID0gY3VydmUucG9pbnQob2JqWzBdLCBvYmpbMV0sIHJlZCk7CiAgaWYgKCFvYmpbMl0pCiAgICByZXR1cm4gcmVzOwoKICBmdW5jdGlvbiBvYmoycG9pbnQob2JqKSB7CiAgICByZXR1cm4gY3VydmUucG9pbnQob2JqWzBdLCBvYmpbMV0sIHJlZCk7CiAgfQoKICB2YXIgcHJlID0gb2JqWzJdOwogIHJlcy5wcmVjb21wdXRlZCA9IHsKICAgIGJldGE6IG51bGwsCiAgICBkb3VibGVzOiBwcmUuZG91YmxlcyAmJiB7CiAgICAgIHN0ZXA6IHByZS5kb3VibGVzLnN0ZXAsCiAgICAgIHBvaW50czogWyByZXMgXS5jb25jYXQocHJlLmRvdWJsZXMucG9pbnRzLm1hcChvYmoycG9pbnQpKQogICAgfSwKICAgIG5hZjogcHJlLm5hZiAmJiB7CiAgICAgIHduZDogcHJlLm5hZi53bmQsCiAgICAgIHBvaW50czogWyByZXMgXS5jb25jYXQocHJlLm5hZi5wb2ludHMubWFwKG9iajJwb2ludCkpCiAgICB9CiAgfTsKICByZXR1cm4gcmVzOwp9OwoKUG9pbnQucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiAnPEVDIFBvaW50IEluZmluaXR5Pic7CiAgcmV0dXJuICc8RUMgUG9pbnQgeDogJyArIHRoaXMueC5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsKICAgICAgJyB5OiAnICsgdGhpcy55LmZyb21SZWQoKS50b1N0cmluZygxNiwgMikgKyAnPic7Cn07CgpQb2ludC5wcm90b3R5cGUuaXNJbmZpbml0eSA9IGZ1bmN0aW9uIGlzSW5maW5pdHkoKSB7CiAgcmV0dXJuIHRoaXMuaW5mOwp9OwoKUG9pbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZChwKSB7CiAgLy8gTyArIFAgPSBQCiAgaWYgKHRoaXMuaW5mKQogICAgcmV0dXJuIHA7CgogIC8vIFAgKyBPID0gUAogIGlmIChwLmluZikKICAgIHJldHVybiB0aGlzOwoKICAvLyBQICsgUCA9IDJQCiAgaWYgKHRoaXMuZXEocCkpCiAgICByZXR1cm4gdGhpcy5kYmwoKTsKCiAgLy8gUCArICgtUCkgPSBPCiAgaWYgKHRoaXMubmVnKCkuZXEocCkpCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChudWxsLCBudWxsKTsKCiAgLy8gUCArIFEgPSBPCiAgaWYgKHRoaXMueC5jbXAocC54KSA9PT0gMCkKICAgIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG51bGwsIG51bGwpOwoKICB2YXIgYyA9IHRoaXMueS5yZWRTdWIocC55KTsKICBpZiAoYy5jbXBuKDApICE9PSAwKQogICAgYyA9IGMucmVkTXVsKHRoaXMueC5yZWRTdWIocC54KS5yZWRJbnZtKCkpOwogIHZhciBueCA9IGMucmVkU3FyKCkucmVkSVN1Yih0aGlzLngpLnJlZElTdWIocC54KTsKICB2YXIgbnkgPSBjLnJlZE11bCh0aGlzLngucmVkU3ViKG54KSkucmVkSVN1Yih0aGlzLnkpOwogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueSk7Cn07CgpQb2ludC5wcm90b3R5cGUuZGJsID0gZnVuY3Rpb24gZGJsKCkgewogIGlmICh0aGlzLmluZikKICAgIHJldHVybiB0aGlzOwoKICAvLyAyUCA9IE8KICB2YXIgeXMxID0gdGhpcy55LnJlZEFkZCh0aGlzLnkpOwogIGlmICh5czEuY21wbigwKSA9PT0gMCkKICAgIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG51bGwsIG51bGwpOwoKICB2YXIgYSA9IHRoaXMuY3VydmUuYTsKCiAgdmFyIHgyID0gdGhpcy54LnJlZFNxcigpOwogIHZhciBkeWludiA9IHlzMS5yZWRJbnZtKCk7CiAgdmFyIGMgPSB4Mi5yZWRBZGQoeDIpLnJlZElBZGQoeDIpLnJlZElBZGQoYSkucmVkTXVsKGR5aW52KTsKCiAgdmFyIG54ID0gYy5yZWRTcXIoKS5yZWRJU3ViKHRoaXMueC5yZWRBZGQodGhpcy54KSk7CiAgdmFyIG55ID0gYy5yZWRNdWwodGhpcy54LnJlZFN1YihueCkpLnJlZElTdWIodGhpcy55KTsKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnkpOwp9OwoKUG9pbnQucHJvdG90eXBlLmdldFggPSBmdW5jdGlvbiBnZXRYKCkgewogIHJldHVybiB0aGlzLnguZnJvbVJlZCgpOwp9OwoKUG9pbnQucHJvdG90eXBlLmdldFkgPSBmdW5jdGlvbiBnZXRZKCkgewogIHJldHVybiB0aGlzLnkuZnJvbVJlZCgpOwp9OwoKUG9pbnQucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bChrKSB7CiAgayA9IG5ldyBCTihrLCAxNik7CgogIGlmICh0aGlzLl9oYXNEb3VibGVzKGspKQogICAgcmV0dXJuIHRoaXMuY3VydmUuX2ZpeGVkTmFmTXVsKHRoaXMsIGspOwogIGVsc2UgaWYgKHRoaXMuY3VydmUuZW5kbykKICAgIHJldHVybiB0aGlzLmN1cnZlLl9lbmRvV25hZk11bEFkZChbIHRoaXMgXSwgWyBrIF0pOwogIGVsc2UKICAgIHJldHVybiB0aGlzLmN1cnZlLl93bmFmTXVsKHRoaXMsIGspOwp9OwoKUG9pbnQucHJvdG90eXBlLm11bEFkZCA9IGZ1bmN0aW9uIG11bEFkZChrMSwgcDIsIGsyKSB7CiAgdmFyIHBvaW50cyA9IFsgdGhpcywgcDIgXTsKICB2YXIgY29lZmZzID0gWyBrMSwgazIgXTsKICBpZiAodGhpcy5jdXJ2ZS5lbmRvKQogICAgcmV0dXJuIHRoaXMuY3VydmUuX2VuZG9XbmFmTXVsQWRkKHBvaW50cywgY29lZmZzKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fd25hZk11bEFkZCgxLCBwb2ludHMsIGNvZWZmcywgMik7Cn07CgpQb2ludC5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcShwKSB7CiAgcmV0dXJuIHRoaXMgPT09IHAgfHwKICAgICAgICAgdGhpcy5pbmYgPT09IHAuaW5mICYmCiAgICAgICAgICAgICAodGhpcy5pbmYgfHwgdGhpcy54LmNtcChwLngpID09PSAwICYmIHRoaXMueS5jbXAocC55KSA9PT0gMCk7Cn07CgpQb2ludC5wcm90b3R5cGUubmVnID0gZnVuY3Rpb24gbmVnKF9wcmVjb21wdXRlKSB7CiAgaWYgKHRoaXMuaW5mKQogICAgcmV0dXJuIHRoaXM7CgogIHZhciByZXMgPSB0aGlzLmN1cnZlLnBvaW50KHRoaXMueCwgdGhpcy55LnJlZE5lZygpKTsKICBpZiAoX3ByZWNvbXB1dGUgJiYgdGhpcy5wcmVjb21wdXRlZCkgewogICAgdmFyIHByZSA9IHRoaXMucHJlY29tcHV0ZWQ7CiAgICB2YXIgbmVnYXRlID0gZnVuY3Rpb24ocCkgewogICAgICByZXR1cm4gcC5uZWcoKTsKICAgIH07CiAgICByZXMucHJlY29tcHV0ZWQgPSB7CiAgICAgIG5hZjogcHJlLm5hZiAmJiB7CiAgICAgICAgd25kOiBwcmUubmFmLnduZCwKICAgICAgICBwb2ludHM6IHByZS5uYWYucG9pbnRzLm1hcChuZWdhdGUpCiAgICAgIH0sCiAgICAgIGRvdWJsZXM6IHByZS5kb3VibGVzICYmIHsKICAgICAgICBzdGVwOiBwcmUuZG91Ymxlcy5zdGVwLAogICAgICAgIHBvaW50czogcHJlLmRvdWJsZXMucG9pbnRzLm1hcChuZWdhdGUpCiAgICAgIH0KICAgIH07CiAgfQogIHJldHVybiByZXM7Cn07CgpQb2ludC5wcm90b3R5cGUudG9KID0gZnVuY3Rpb24gdG9KKCkgewogIGlmICh0aGlzLmluZikKICAgIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChudWxsLCBudWxsLCBudWxsKTsKCiAgdmFyIHJlcyA9IHRoaXMuY3VydmUuanBvaW50KHRoaXMueCwgdGhpcy55LCB0aGlzLmN1cnZlLm9uZSk7CiAgcmV0dXJuIHJlczsKfTsKCmZ1bmN0aW9uIEpQb2ludChjdXJ2ZSwgeCwgeSwgeikgewogIEJhc2UuQmFzZVBvaW50LmNhbGwodGhpcywgY3VydmUsICdqYWNvYmlhbicpOwogIGlmICh4ID09PSBudWxsICYmIHkgPT09IG51bGwgJiYgeiA9PT0gbnVsbCkgewogICAgdGhpcy54ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgICB0aGlzLnkgPSB0aGlzLmN1cnZlLm9uZTsKICAgIHRoaXMueiA9IG5ldyBCTigwKTsKICB9IGVsc2UgewogICAgdGhpcy54ID0gbmV3IEJOKHgsIDE2KTsKICAgIHRoaXMueSA9IG5ldyBCTih5LCAxNik7CiAgICB0aGlzLnogPSBuZXcgQk4oeiwgMTYpOwogIH0KICBpZiAoIXRoaXMueC5yZWQpCiAgICB0aGlzLnggPSB0aGlzLngudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogIGlmICghdGhpcy55LnJlZCkKICAgIHRoaXMueSA9IHRoaXMueS50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgaWYgKCF0aGlzLnoucmVkKQogICAgdGhpcy56ID0gdGhpcy56LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKCiAgdGhpcy56T25lID0gdGhpcy56ID09PSB0aGlzLmN1cnZlLm9uZTsKfQppbmhlcml0cyhKUG9pbnQsIEJhc2UuQmFzZVBvaW50KTsKClNob3J0Q3VydmUucHJvdG90eXBlLmpwb2ludCA9IGZ1bmN0aW9uIGpwb2ludCh4LCB5LCB6KSB7CiAgcmV0dXJuIG5ldyBKUG9pbnQodGhpcywgeCwgeSwgeik7Cn07CgpKUG9pbnQucHJvdG90eXBlLnRvUCA9IGZ1bmN0aW9uIHRvUCgpIHsKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChudWxsLCBudWxsKTsKCiAgdmFyIHppbnYgPSB0aGlzLnoucmVkSW52bSgpOwogIHZhciB6aW52MiA9IHppbnYucmVkU3FyKCk7CiAgdmFyIGF4ID0gdGhpcy54LnJlZE11bCh6aW52Mik7CiAgdmFyIGF5ID0gdGhpcy55LnJlZE11bCh6aW52MikucmVkTXVsKHppbnYpOwoKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChheCwgYXkpOwp9OwoKSlBvaW50LnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcoKSB7CiAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KHRoaXMueCwgdGhpcy55LnJlZE5lZygpLCB0aGlzLnopOwp9OwoKSlBvaW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQocCkgewogIC8vIE8gKyBQID0gUAogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiBwOwoKICAvLyBQICsgTyA9IFAKICBpZiAocC5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gdGhpczsKCiAgLy8gMTJNICsgNFMgKyA3QQogIHZhciBwejIgPSBwLnoucmVkU3FyKCk7CiAgdmFyIHoyID0gdGhpcy56LnJlZFNxcigpOwogIHZhciB1MSA9IHRoaXMueC5yZWRNdWwocHoyKTsKICB2YXIgdTIgPSBwLngucmVkTXVsKHoyKTsKICB2YXIgczEgPSB0aGlzLnkucmVkTXVsKHB6Mi5yZWRNdWwocC56KSk7CiAgdmFyIHMyID0gcC55LnJlZE11bCh6Mi5yZWRNdWwodGhpcy56KSk7CgogIHZhciBoID0gdTEucmVkU3ViKHUyKTsKICB2YXIgciA9IHMxLnJlZFN1YihzMik7CiAgaWYgKGguY21wbigwKSA9PT0gMCkgewogICAgaWYgKHIuY21wbigwKSAhPT0gMCkKICAgICAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwogICAgZWxzZQogICAgICByZXR1cm4gdGhpcy5kYmwoKTsKICB9CgogIHZhciBoMiA9IGgucmVkU3FyKCk7CiAgdmFyIGgzID0gaDIucmVkTXVsKGgpOwogIHZhciB2ID0gdTEucmVkTXVsKGgyKTsKCiAgdmFyIG54ID0gci5yZWRTcXIoKS5yZWRJQWRkKGgzKS5yZWRJU3ViKHYpLnJlZElTdWIodik7CiAgdmFyIG55ID0gci5yZWRNdWwodi5yZWRJU3ViKG54KSkucmVkSVN1YihzMS5yZWRNdWwoaDMpKTsKICB2YXIgbnogPSB0aGlzLnoucmVkTXVsKHAueikucmVkTXVsKGgpOwoKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobngsIG55LCBueik7Cn07CgpKUG9pbnQucHJvdG90eXBlLm1peGVkQWRkID0gZnVuY3Rpb24gbWl4ZWRBZGQocCkgewogIC8vIE8gKyBQID0gUAogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiBwLnRvSigpOwoKICAvLyBQICsgTyA9IFAKICBpZiAocC5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gdGhpczsKCiAgLy8gOE0gKyAzUyArIDdBCiAgdmFyIHoyID0gdGhpcy56LnJlZFNxcigpOwogIHZhciB1MSA9IHRoaXMueDsKICB2YXIgdTIgPSBwLngucmVkTXVsKHoyKTsKICB2YXIgczEgPSB0aGlzLnk7CiAgdmFyIHMyID0gcC55LnJlZE11bCh6MikucmVkTXVsKHRoaXMueik7CgogIHZhciBoID0gdTEucmVkU3ViKHUyKTsKICB2YXIgciA9IHMxLnJlZFN1YihzMik7CiAgaWYgKGguY21wbigwKSA9PT0gMCkgewogICAgaWYgKHIuY21wbigwKSAhPT0gMCkKICAgICAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwogICAgZWxzZQogICAgICByZXR1cm4gdGhpcy5kYmwoKTsKICB9CgogIHZhciBoMiA9IGgucmVkU3FyKCk7CiAgdmFyIGgzID0gaDIucmVkTXVsKGgpOwogIHZhciB2ID0gdTEucmVkTXVsKGgyKTsKCiAgdmFyIG54ID0gci5yZWRTcXIoKS5yZWRJQWRkKGgzKS5yZWRJU3ViKHYpLnJlZElTdWIodik7CiAgdmFyIG55ID0gci5yZWRNdWwodi5yZWRJU3ViKG54KSkucmVkSVN1YihzMS5yZWRNdWwoaDMpKTsKICB2YXIgbnogPSB0aGlzLnoucmVkTXVsKGgpOwoKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobngsIG55LCBueik7Cn07CgpKUG9pbnQucHJvdG90eXBlLmRibHAgPSBmdW5jdGlvbiBkYmxwKHBvdykgewogIGlmIChwb3cgPT09IDApCiAgICByZXR1cm4gdGhpczsKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gdGhpczsKICBpZiAoIXBvdykKICAgIHJldHVybiB0aGlzLmRibCgpOwoKICBpZiAodGhpcy5jdXJ2ZS56ZXJvQSB8fCB0aGlzLmN1cnZlLnRocmVlQSkgewogICAgdmFyIHIgPSB0aGlzOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3c7IGkrKykKICAgICAgciA9IHIuZGJsKCk7CiAgICByZXR1cm4gcjsKICB9CgogIC8vIDFNICsgMlMgKyAxQSArIE4gKiAoNFMgKyA1TSArIDhBKQogIC8vIE4gPSAxID0+IDZNICsgNlMgKyA5QQogIHZhciBhID0gdGhpcy5jdXJ2ZS5hOwogIHZhciB0aW52ID0gdGhpcy5jdXJ2ZS50aW52OwoKICB2YXIganggPSB0aGlzLng7CiAgdmFyIGp5ID0gdGhpcy55OwogIHZhciBqeiA9IHRoaXMuejsKICB2YXIgano0ID0ganoucmVkU3FyKCkucmVkU3FyKCk7CgogIC8vIFJldXNlIHJlc3VsdHMKICB2YXIganlkID0gankucmVkQWRkKGp5KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IHBvdzsgaSsrKSB7CiAgICB2YXIgangyID0gangucmVkU3FyKCk7CiAgICB2YXIganlkMiA9IGp5ZC5yZWRTcXIoKTsKICAgIHZhciBqeWQ0ID0ganlkMi5yZWRTcXIoKTsKICAgIHZhciBjID0gangyLnJlZEFkZChqeDIpLnJlZElBZGQoangyKS5yZWRJQWRkKGEucmVkTXVsKGp6NCkpOwoKICAgIHZhciB0MSA9IGp4LnJlZE11bChqeWQyKTsKICAgIHZhciBueCA9IGMucmVkU3FyKCkucmVkSVN1Yih0MS5yZWRBZGQodDEpKTsKICAgIHZhciB0MiA9IHQxLnJlZElTdWIobngpOwogICAgdmFyIGRueSA9IGMucmVkTXVsKHQyKTsKICAgIGRueSA9IGRueS5yZWRJQWRkKGRueSkucmVkSVN1YihqeWQ0KTsKICAgIHZhciBueiA9IGp5ZC5yZWRNdWwoanopOwogICAgaWYgKGkgKyAxIDwgcG93KQogICAgICBqejQgPSBqejQucmVkTXVsKGp5ZDQpOwoKICAgIGp4ID0gbng7CiAgICBqeiA9IG56OwogICAganlkID0gZG55OwogIH0KCiAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KGp4LCBqeWQucmVkTXVsKHRpbnYpLCBqeik7Cn07CgpKUG9pbnQucHJvdG90eXBlLmRibCA9IGZ1bmN0aW9uIGRibCgpIHsKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gdGhpczsKCiAgaWYgKHRoaXMuY3VydmUuemVyb0EpCiAgICByZXR1cm4gdGhpcy5femVyb0RibCgpOwogIGVsc2UgaWYgKHRoaXMuY3VydmUudGhyZWVBKQogICAgcmV0dXJuIHRoaXMuX3RocmVlRGJsKCk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuX2RibCgpOwp9OwoKSlBvaW50LnByb3RvdHlwZS5femVyb0RibCA9IGZ1bmN0aW9uIF96ZXJvRGJsKCkgewogIHZhciBueDsKICB2YXIgbnk7CiAgdmFyIG56OwogIC8vIFogPSAxCiAgaWYgKHRoaXMuek9uZSkgewogICAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXNob3J0dy1qYWNvYmlhbi0wLmh0bWwKICAgIC8vICAgICAjZG91YmxpbmctbWRibC0yMDA3LWJsCiAgICAvLyAxTSArIDVTICsgMTRBCgogICAgLy8gWFggPSBYMV4yCiAgICB2YXIgeHggPSB0aGlzLngucmVkU3FyKCk7CiAgICAvLyBZWSA9IFkxXjIKICAgIHZhciB5eSA9IHRoaXMueS5yZWRTcXIoKTsKICAgIC8vIFlZWVkgPSBZWV4yCiAgICB2YXIgeXl5eSA9IHl5LnJlZFNxcigpOwogICAgLy8gUyA9IDIgKiAoKFgxICsgWVkpXjIgLSBYWCAtIFlZWVkpCiAgICB2YXIgcyA9IHRoaXMueC5yZWRBZGQoeXkpLnJlZFNxcigpLnJlZElTdWIoeHgpLnJlZElTdWIoeXl5eSk7CiAgICBzID0gcy5yZWRJQWRkKHMpOwogICAgLy8gTSA9IDMgKiBYWCArIGE7IGEgPSAwCiAgICB2YXIgbSA9IHh4LnJlZEFkZCh4eCkucmVkSUFkZCh4eCk7CiAgICAvLyBUID0gTSBeIDIgLSAyKlMKICAgIHZhciB0ID0gbS5yZWRTcXIoKS5yZWRJU3ViKHMpLnJlZElTdWIocyk7CgogICAgLy8gOCAqIFlZWVkKICAgIHZhciB5eXl5OCA9IHl5eXkucmVkSUFkZCh5eXl5KTsKICAgIHl5eXk4ID0geXl5eTgucmVkSUFkZCh5eXl5OCk7CiAgICB5eXl5OCA9IHl5eXk4LnJlZElBZGQoeXl5eTgpOwoKICAgIC8vIFgzID0gVAogICAgbnggPSB0OwogICAgLy8gWTMgPSBNICogKFMgLSBUKSAtIDggKiBZWVlZCiAgICBueSA9IG0ucmVkTXVsKHMucmVkSVN1Yih0KSkucmVkSVN1Yih5eXl5OCk7CiAgICAvLyBaMyA9IDIqWTEKICAgIG56ID0gdGhpcy55LnJlZEFkZCh0aGlzLnkpOwogIH0gZWxzZSB7CiAgICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tc2hvcnR3LWphY29iaWFuLTAuaHRtbAogICAgLy8gICAgICNkb3VibGluZy1kYmwtMjAwOS1sCiAgICAvLyAyTSArIDVTICsgMTNBCgogICAgLy8gQSA9IFgxXjIKICAgIHZhciBhID0gdGhpcy54LnJlZFNxcigpOwogICAgLy8gQiA9IFkxXjIKICAgIHZhciBiID0gdGhpcy55LnJlZFNxcigpOwogICAgLy8gQyA9IEJeMgogICAgdmFyIGMgPSBiLnJlZFNxcigpOwogICAgLy8gRCA9IDIgKiAoKFgxICsgQileMiAtIEEgLSBDKQogICAgdmFyIGQgPSB0aGlzLngucmVkQWRkKGIpLnJlZFNxcigpLnJlZElTdWIoYSkucmVkSVN1YihjKTsKICAgIGQgPSBkLnJlZElBZGQoZCk7CiAgICAvLyBFID0gMyAqIEEKICAgIHZhciBlID0gYS5yZWRBZGQoYSkucmVkSUFkZChhKTsKICAgIC8vIEYgPSBFXjIKICAgIHZhciBmID0gZS5yZWRTcXIoKTsKCiAgICAvLyA4ICogQwogICAgdmFyIGM4ID0gYy5yZWRJQWRkKGMpOwogICAgYzggPSBjOC5yZWRJQWRkKGM4KTsKICAgIGM4ID0gYzgucmVkSUFkZChjOCk7CgogICAgLy8gWDMgPSBGIC0gMiAqIEQKICAgIG54ID0gZi5yZWRJU3ViKGQpLnJlZElTdWIoZCk7CiAgICAvLyBZMyA9IEUgKiAoRCAtIFgzKSAtIDggKiBDCiAgICBueSA9IGUucmVkTXVsKGQucmVkSVN1YihueCkpLnJlZElTdWIoYzgpOwogICAgLy8gWjMgPSAyICogWTEgKiBaMQogICAgbnogPSB0aGlzLnkucmVkTXVsKHRoaXMueik7CiAgICBueiA9IG56LnJlZElBZGQobnopOwogIH0KCiAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG54LCBueSwgbnopOwp9OwoKSlBvaW50LnByb3RvdHlwZS5fdGhyZWVEYmwgPSBmdW5jdGlvbiBfdGhyZWVEYmwoKSB7CiAgdmFyIG54OwogIHZhciBueTsKICB2YXIgbno7CiAgLy8gWiA9IDEKICBpZiAodGhpcy56T25lKSB7CiAgICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tc2hvcnR3LWphY29iaWFuLTMuaHRtbAogICAgLy8gICAgICNkb3VibGluZy1tZGJsLTIwMDctYmwKICAgIC8vIDFNICsgNVMgKyAxNUEKCiAgICAvLyBYWCA9IFgxXjIKICAgIHZhciB4eCA9IHRoaXMueC5yZWRTcXIoKTsKICAgIC8vIFlZID0gWTFeMgogICAgdmFyIHl5ID0gdGhpcy55LnJlZFNxcigpOwogICAgLy8gWVlZWSA9IFlZXjIKICAgIHZhciB5eXl5ID0geXkucmVkU3FyKCk7CiAgICAvLyBTID0gMiAqICgoWDEgKyBZWSleMiAtIFhYIC0gWVlZWSkKICAgIHZhciBzID0gdGhpcy54LnJlZEFkZCh5eSkucmVkU3FyKCkucmVkSVN1Yih4eCkucmVkSVN1Yih5eXl5KTsKICAgIHMgPSBzLnJlZElBZGQocyk7CiAgICAvLyBNID0gMyAqIFhYICsgYQogICAgdmFyIG0gPSB4eC5yZWRBZGQoeHgpLnJlZElBZGQoeHgpLnJlZElBZGQodGhpcy5jdXJ2ZS5hKTsKICAgIC8vIFQgPSBNXjIgLSAyICogUwogICAgdmFyIHQgPSBtLnJlZFNxcigpLnJlZElTdWIocykucmVkSVN1YihzKTsKICAgIC8vIFgzID0gVAogICAgbnggPSB0OwogICAgLy8gWTMgPSBNICogKFMgLSBUKSAtIDggKiBZWVlZCiAgICB2YXIgeXl5eTggPSB5eXl5LnJlZElBZGQoeXl5eSk7CiAgICB5eXl5OCA9IHl5eXk4LnJlZElBZGQoeXl5eTgpOwogICAgeXl5eTggPSB5eXl5OC5yZWRJQWRkKHl5eXk4KTsKICAgIG55ID0gbS5yZWRNdWwocy5yZWRJU3ViKHQpKS5yZWRJU3ViKHl5eXk4KTsKICAgIC8vIFozID0gMiAqIFkxCiAgICBueiA9IHRoaXMueS5yZWRBZGQodGhpcy55KTsKICB9IGVsc2UgewogICAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXNob3J0dy1qYWNvYmlhbi0zLmh0bWwjZG91YmxpbmctZGJsLTIwMDEtYgogICAgLy8gM00gKyA1UwoKICAgIC8vIGRlbHRhID0gWjFeMgogICAgdmFyIGRlbHRhID0gdGhpcy56LnJlZFNxcigpOwogICAgLy8gZ2FtbWEgPSBZMV4yCiAgICB2YXIgZ2FtbWEgPSB0aGlzLnkucmVkU3FyKCk7CiAgICAvLyBiZXRhID0gWDEgKiBnYW1tYQogICAgdmFyIGJldGEgPSB0aGlzLngucmVkTXVsKGdhbW1hKTsKICAgIC8vIGFscGhhID0gMyAqIChYMSAtIGRlbHRhKSAqIChYMSArIGRlbHRhKQogICAgdmFyIGFscGhhID0gdGhpcy54LnJlZFN1YihkZWx0YSkucmVkTXVsKHRoaXMueC5yZWRBZGQoZGVsdGEpKTsKICAgIGFscGhhID0gYWxwaGEucmVkQWRkKGFscGhhKS5yZWRJQWRkKGFscGhhKTsKICAgIC8vIFgzID0gYWxwaGFeMiAtIDggKiBiZXRhCiAgICB2YXIgYmV0YTQgPSBiZXRhLnJlZElBZGQoYmV0YSk7CiAgICBiZXRhNCA9IGJldGE0LnJlZElBZGQoYmV0YTQpOwogICAgdmFyIGJldGE4ID0gYmV0YTQucmVkQWRkKGJldGE0KTsKICAgIG54ID0gYWxwaGEucmVkU3FyKCkucmVkSVN1YihiZXRhOCk7CiAgICAvLyBaMyA9IChZMSArIFoxKV4yIC0gZ2FtbWEgLSBkZWx0YQogICAgbnogPSB0aGlzLnkucmVkQWRkKHRoaXMueikucmVkU3FyKCkucmVkSVN1YihnYW1tYSkucmVkSVN1YihkZWx0YSk7CiAgICAvLyBZMyA9IGFscGhhICogKDQgKiBiZXRhIC0gWDMpIC0gOCAqIGdhbW1hXjIKICAgIHZhciBnZ2FtbWE4ID0gZ2FtbWEucmVkU3FyKCk7CiAgICBnZ2FtbWE4ID0gZ2dhbW1hOC5yZWRJQWRkKGdnYW1tYTgpOwogICAgZ2dhbW1hOCA9IGdnYW1tYTgucmVkSUFkZChnZ2FtbWE4KTsKICAgIGdnYW1tYTggPSBnZ2FtbWE4LnJlZElBZGQoZ2dhbW1hOCk7CiAgICBueSA9IGFscGhhLnJlZE11bChiZXRhNC5yZWRJU3ViKG54KSkucmVkSVN1YihnZ2FtbWE4KTsKICB9CgogIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChueCwgbnksIG56KTsKfTsKCkpQb2ludC5wcm90b3R5cGUuX2RibCA9IGZ1bmN0aW9uIF9kYmwoKSB7CiAgdmFyIGEgPSB0aGlzLmN1cnZlLmE7CgogIC8vIDRNICsgNlMgKyAxMEEKICB2YXIganggPSB0aGlzLng7CiAgdmFyIGp5ID0gdGhpcy55OwogIHZhciBqeiA9IHRoaXMuejsKICB2YXIgano0ID0ganoucmVkU3FyKCkucmVkU3FyKCk7CgogIHZhciBqeDIgPSBqeC5yZWRTcXIoKTsKICB2YXIgankyID0gankucmVkU3FyKCk7CgogIHZhciBjID0gangyLnJlZEFkZChqeDIpLnJlZElBZGQoangyKS5yZWRJQWRkKGEucmVkTXVsKGp6NCkpOwoKICB2YXIganhkNCA9IGp4LnJlZEFkZChqeCk7CiAganhkNCA9IGp4ZDQucmVkSUFkZChqeGQ0KTsKICB2YXIgdDEgPSBqeGQ0LnJlZE11bChqeTIpOwogIHZhciBueCA9IGMucmVkU3FyKCkucmVkSVN1Yih0MS5yZWRBZGQodDEpKTsKICB2YXIgdDIgPSB0MS5yZWRJU3ViKG54KTsKCiAgdmFyIGp5ZDggPSBqeTIucmVkU3FyKCk7CiAganlkOCA9IGp5ZDgucmVkSUFkZChqeWQ4KTsKICBqeWQ4ID0ganlkOC5yZWRJQWRkKGp5ZDgpOwogIGp5ZDggPSBqeWQ4LnJlZElBZGQoanlkOCk7CiAgdmFyIG55ID0gYy5yZWRNdWwodDIpLnJlZElTdWIoanlkOCk7CiAgdmFyIG56ID0gankucmVkQWRkKGp5KS5yZWRNdWwoanopOwoKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobngsIG55LCBueik7Cn07CgpKUG9pbnQucHJvdG90eXBlLnRycGwgPSBmdW5jdGlvbiB0cnBsKCkgewogIGlmICghdGhpcy5jdXJ2ZS56ZXJvQSkKICAgIHJldHVybiB0aGlzLmRibCgpLmFkZCh0aGlzKTsKCiAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXNob3J0dy1qYWNvYmlhbi0wLmh0bWwjdHJpcGxpbmctdHBsLTIwMDctYmwKICAvLyA1TSArIDEwUyArIC4uLgoKICAvLyBYWCA9IFgxXjIKICB2YXIgeHggPSB0aGlzLngucmVkU3FyKCk7CiAgLy8gWVkgPSBZMV4yCiAgdmFyIHl5ID0gdGhpcy55LnJlZFNxcigpOwogIC8vIFpaID0gWjFeMgogIHZhciB6eiA9IHRoaXMuei5yZWRTcXIoKTsKICAvLyBZWVlZID0gWVleMgogIHZhciB5eXl5ID0geXkucmVkU3FyKCk7CiAgLy8gTSA9IDMgKiBYWCArIGEgKiBaWjI7IGEgPSAwCiAgdmFyIG0gPSB4eC5yZWRBZGQoeHgpLnJlZElBZGQoeHgpOwogIC8vIE1NID0gTV4yCiAgdmFyIG1tID0gbS5yZWRTcXIoKTsKICAvLyBFID0gNiAqICgoWDEgKyBZWSleMiAtIFhYIC0gWVlZWSkgLSBNTQogIHZhciBlID0gdGhpcy54LnJlZEFkZCh5eSkucmVkU3FyKCkucmVkSVN1Yih4eCkucmVkSVN1Yih5eXl5KTsKICBlID0gZS5yZWRJQWRkKGUpOwogIGUgPSBlLnJlZEFkZChlKS5yZWRJQWRkKGUpOwogIGUgPSBlLnJlZElTdWIobW0pOwogIC8vIEVFID0gRV4yCiAgdmFyIGVlID0gZS5yZWRTcXIoKTsKICAvLyBUID0gMTYqWVlZWQogIHZhciB0ID0geXl5eS5yZWRJQWRkKHl5eXkpOwogIHQgPSB0LnJlZElBZGQodCk7CiAgdCA9IHQucmVkSUFkZCh0KTsKICB0ID0gdC5yZWRJQWRkKHQpOwogIC8vIFUgPSAoTSArIEUpXjIgLSBNTSAtIEVFIC0gVAogIHZhciB1ID0gbS5yZWRJQWRkKGUpLnJlZFNxcigpLnJlZElTdWIobW0pLnJlZElTdWIoZWUpLnJlZElTdWIodCk7CiAgLy8gWDMgPSA0ICogKFgxICogRUUgLSA0ICogWVkgKiBVKQogIHZhciB5eXU0ID0geXkucmVkTXVsKHUpOwogIHl5dTQgPSB5eXU0LnJlZElBZGQoeXl1NCk7CiAgeXl1NCA9IHl5dTQucmVkSUFkZCh5eXU0KTsKICB2YXIgbnggPSB0aGlzLngucmVkTXVsKGVlKS5yZWRJU3ViKHl5dTQpOwogIG54ID0gbngucmVkSUFkZChueCk7CiAgbnggPSBueC5yZWRJQWRkKG54KTsKICAvLyBZMyA9IDggKiBZMSAqIChVICogKFQgLSBVKSAtIEUgKiBFRSkKICB2YXIgbnkgPSB0aGlzLnkucmVkTXVsKHUucmVkTXVsKHQucmVkSVN1Yih1KSkucmVkSVN1YihlLnJlZE11bChlZSkpKTsKICBueSA9IG55LnJlZElBZGQobnkpOwogIG55ID0gbnkucmVkSUFkZChueSk7CiAgbnkgPSBueS5yZWRJQWRkKG55KTsKICAvLyBaMyA9IChaMSArIEUpXjIgLSBaWiAtIEVFCiAgdmFyIG56ID0gdGhpcy56LnJlZEFkZChlKS5yZWRTcXIoKS5yZWRJU3ViKHp6KS5yZWRJU3ViKGVlKTsKCiAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG54LCBueSwgbnopOwp9OwoKSlBvaW50LnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwoaywga2Jhc2UpIHsKICBrID0gbmV3IEJOKGssIGtiYXNlKTsKCiAgcmV0dXJuIHRoaXMuY3VydmUuX3duYWZNdWwodGhpcywgayk7Cn07CgpKUG9pbnQucHJvdG90eXBlLmVxID0gZnVuY3Rpb24gZXEocCkgewogIGlmIChwLnR5cGUgPT09ICdhZmZpbmUnKQogICAgcmV0dXJuIHRoaXMuZXEocC50b0ooKSk7CgogIGlmICh0aGlzID09PSBwKQogICAgcmV0dXJuIHRydWU7CgogIC8vIHgxICogejJeMiA9PSB4MiAqIHoxXjIKICB2YXIgejIgPSB0aGlzLnoucmVkU3FyKCk7CiAgdmFyIHB6MiA9IHAuei5yZWRTcXIoKTsKICBpZiAodGhpcy54LnJlZE11bChwejIpLnJlZElTdWIocC54LnJlZE11bCh6MikpLmNtcG4oMCkgIT09IDApCiAgICByZXR1cm4gZmFsc2U7CgogIC8vIHkxICogejJeMyA9PSB5MiAqIHoxXjMKICB2YXIgejMgPSB6Mi5yZWRNdWwodGhpcy56KTsKICB2YXIgcHozID0gcHoyLnJlZE11bChwLnopOwogIHJldHVybiB0aGlzLnkucmVkTXVsKHB6MykucmVkSVN1YihwLnkucmVkTXVsKHozKSkuY21wbigwKSA9PT0gMDsKfTsKCkpQb2ludC5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QoKSB7CiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuICc8RUMgSlBvaW50IEluZmluaXR5Pic7CiAgcmV0dXJuICc8RUMgSlBvaW50IHg6ICcgKyB0aGlzLngudG9TdHJpbmcoMTYsIDIpICsKICAgICAgJyB5OiAnICsgdGhpcy55LnRvU3RyaW5nKDE2LCAyKSArCiAgICAgICcgejogJyArIHRoaXMuei50b1N0cmluZygxNiwgMikgKyAnPic7Cn07CgpKUG9pbnQucHJvdG90eXBlLmlzSW5maW5pdHkgPSBmdW5jdGlvbiBpc0luZmluaXR5KCkgewogIC8vIFhYWCBUaGlzIGNvZGUgYXNzdW1lcyB0aGF0IHplcm8gaXMgYWx3YXlzIHplcm8gaW4gcmVkCiAgcmV0dXJuIHRoaXMuei5jbXBuKDApID09PSAwOwp9OwoKfSx7Ii4uLy4uL2VsbGlwdGljIjoxMDEsIi4uL2N1cnZlIjoxMDQsImJuLmpzIjo0MiwiaW5oZXJpdHMiOjEyOX1dLDEwNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBjdXJ2ZXMgPSBleHBvcnRzOwoKdmFyIGhhc2ggPSByZXF1aXJlKCdoYXNoLmpzJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uL2VsbGlwdGljJyk7Cgp2YXIgYXNzZXJ0ID0gZWxsaXB0aWMudXRpbHMuYXNzZXJ0OwoKZnVuY3Rpb24gUHJlc2V0Q3VydmUob3B0aW9ucykgewogIGlmIChvcHRpb25zLnR5cGUgPT09ICdzaG9ydCcpCiAgICB0aGlzLmN1cnZlID0gbmV3IGVsbGlwdGljLmN1cnZlLnNob3J0KG9wdGlvbnMpOwogIGVsc2UgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ2Vkd2FyZHMnKQogICAgdGhpcy5jdXJ2ZSA9IG5ldyBlbGxpcHRpYy5jdXJ2ZS5lZHdhcmRzKG9wdGlvbnMpOwogIGVsc2UKICAgIHRoaXMuY3VydmUgPSBuZXcgZWxsaXB0aWMuY3VydmUubW9udChvcHRpb25zKTsKICB0aGlzLmcgPSB0aGlzLmN1cnZlLmc7CiAgdGhpcy5uID0gdGhpcy5jdXJ2ZS5uOwogIHRoaXMuaGFzaCA9IG9wdGlvbnMuaGFzaDsKCiAgYXNzZXJ0KHRoaXMuZy52YWxpZGF0ZSgpLCAnSW52YWxpZCBjdXJ2ZScpOwogIGFzc2VydCh0aGlzLmcubXVsKHRoaXMubikuaXNJbmZpbml0eSgpLCAnSW52YWxpZCBjdXJ2ZSwgRypOICE9IE8nKTsKfQpjdXJ2ZXMuUHJlc2V0Q3VydmUgPSBQcmVzZXRDdXJ2ZTsKCmZ1bmN0aW9uIGRlZmluZUN1cnZlKG5hbWUsIG9wdGlvbnMpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3VydmVzLCBuYW1lLCB7CiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGN1cnZlID0gbmV3IFByZXNldEN1cnZlKG9wdGlvbnMpOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3VydmVzLCBuYW1lLCB7CiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgdmFsdWU6IGN1cnZlCiAgICAgIH0pOwogICAgICByZXR1cm4gY3VydmU7CiAgICB9CiAgfSk7Cn0KCmRlZmluZUN1cnZlKCdwMTkyJywgewogIHR5cGU6ICdzaG9ydCcsCiAgcHJpbWU6ICdwMTkyJywKICBwOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUgZmZmZmZmZmYgZmZmZmZmZmYnLAogIGE6ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZSBmZmZmZmZmZiBmZmZmZmZmYycsCiAgYjogJzY0MjEwNTE5IGU1OWM4MGU3IDBmYTdlOWFiIDcyMjQzMDQ5IGZlYjhkZWVjIGMxNDZiOWIxJywKICBuOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgOTlkZWY4MzYgMTQ2YmM5YjEgYjRkMjI4MzEnLAogIGhhc2g6IGhhc2guc2hhMjU2LAogIGdSZWQ6IGZhbHNlLAogIGc6IFsKICAgICcxODhkYTgwZSBiMDMwOTBmNiA3Y2JmMjBlYiA0M2ExODgwMCBmNGZmMGFmZCA4MmZmMTAxMicsCiAgICAnMDcxOTJiOTUgZmZjOGRhNzggNjMxMDExZWQgNmIyNGNkZDUgNzNmOTc3YTEgMWU3OTQ4MTEnCiAgXQp9KTsKCmRlZmluZUN1cnZlKCdwMjI0JywgewogIHR5cGU6ICdzaG9ydCcsCiAgcHJpbWU6ICdwMjI0JywKICBwOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDEnLAogIGE6ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZSBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZScsCiAgYjogJ2I0MDUwYTg1IDBjMDRiM2FiIGY1NDEzMjU2IDUwNDRiMGI3IGQ3YmZkOGJhIDI3MGIzOTQzIDIzNTVmZmI0JywKICBuOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZjE2YTIgZTBiOGYwM2UgMTNkZDI5NDUgNWM1YzJhM2QnLAogIGhhc2g6IGhhc2guc2hhMjU2LAogIGdSZWQ6IGZhbHNlLAogIGc6IFsKICAgICdiNzBlMGNiZCA2YmI0YmY3ZiAzMjEzOTBiOSA0YTAzYzFkMyA1NmMyMTEyMiAzNDMyODBkNiAxMTVjMWQyMScsCiAgICAnYmQzNzYzODggYjVmNzIzZmIgNGMyMmRmZTYgY2Q0Mzc1YTAgNWEwNzQ3NjQgNDRkNTgxOTkgODUwMDdlMzQnCiAgXQp9KTsKCmRlZmluZUN1cnZlKCdwMjU2JywgewogIHR5cGU6ICdzaG9ydCcsCiAgcHJpbWU6IG51bGwsCiAgcDogJ2ZmZmZmZmZmIDAwMDAwMDAxIDAwMDAwMDAwIDAwMDAwMDAwIDAwMDAwMDAwIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmJywKICBhOiAnZmZmZmZmZmYgMDAwMDAwMDEgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDAgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmMnLAogIGI6ICc1YWM2MzVkOCBhYTNhOTNlNyBiM2ViYmQ1NSA3Njk4ODZiYyA2NTFkMDZiMCBjYzUzYjBmNiAzYmNlM2MzZSAyN2QyNjA0YicsCiAgbjogJ2ZmZmZmZmZmIDAwMDAwMDAwIGZmZmZmZmZmIGZmZmZmZmZmIGJjZTZmYWFkIGE3MTc5ZTg0IGYzYjljYWMyIGZjNjMyNTUxJywKICBoYXNoOiBoYXNoLnNoYTI1NiwKICBnUmVkOiBmYWxzZSwKICBnOiBbCiAgICAnNmIxN2QxZjIgZTEyYzQyNDcgZjhiY2U2ZTUgNjNhNDQwZjIgNzcwMzdkODEgMmRlYjMzYTAgZjRhMTM5NDUgZDg5OGMyOTYnLAogICAgJzRmZTM0MmUyIGZlMWE3ZjliIDhlZTdlYjRhIDdjMGY5ZTE2IDJiY2UzMzU3IDZiMzE1ZWNlIGNiYjY0MDY4IDM3YmY1MWY1JwogIF0KfSk7CgpkZWZpbmVDdXJ2ZSgncDM4NCcsIHsKICB0eXBlOiAnc2hvcnQnLAogIHByaW1lOiBudWxsLAogIHA6ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAnICsKICAgICAnZmZmZmZmZmUgZmZmZmZmZmYgMDAwMDAwMDAgMDAwMDAwMDAgZmZmZmZmZmYnLAogIGE6ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAnICsKICAgICAnZmZmZmZmZmUgZmZmZmZmZmYgMDAwMDAwMDAgMDAwMDAwMDAgZmZmZmZmZmMnLAogIGI6ICdiMzMxMmZhNyBlMjNlZTdlNCA5ODhlMDU2YiBlM2Y4MmQxOSAxODFkOWM2ZSBmZTgxNDExMiAwMzE0MDg4ZiAnICsKICAgICAnNTAxMzg3NWEgYzY1NjM5OGQgOGEyZWQxOWQgMmE4NWM4ZWQgZDNlYzJhZWYnLAogIG46ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBjNzYzNGQ4MSAnICsKICAgICAnZjQzNzJkZGYgNTgxYTBkYjIgNDhiMGE3N2EgZWNlYzE5NmEgY2NjNTI5NzMnLAogIGhhc2g6IGhhc2guc2hhMzg0LAogIGdSZWQ6IGZhbHNlLAogIGc6IFsKICAgICdhYTg3Y2EyMiBiZThiMDUzNyA4ZWIxYzcxZSBmMzIwYWQ3NCA2ZTFkM2I2MiA4YmE3OWI5OCA1OWY3NDFlMCA4MjU0MmEzOCAnICsKICAgICc1NTAyZjI1ZCBiZjU1Mjk2YyAzYTU0NWUzOCA3Mjc2MGFiNycsCiAgICAnMzYxN2RlNGEgOTYyNjJjNmYgNWQ5ZTk4YmYgOTI5MmRjMjkgZjhmNDFkYmQgMjg5YTE0N2MgZTlkYTMxMTMgYjVmMGI4YzAgJyArCiAgICAnMGE2MGIxY2UgMWQ3ZTgxOWQgN2E0MzFkN2MgOTBlYTBlNWYnCiAgXQp9KTsKCmRlZmluZUN1cnZlKCdwNTIxJywgewogIHR5cGU6ICdzaG9ydCcsCiAgcHJpbWU6IG51bGwsCiAgcDogJzAwMDAwMWZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAnICsKICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYnLAogIGE6ICcwMDAwMDFmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAnICsKICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgJyArCiAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZjJywKICBiOiAnMDAwMDAwNTEgOTUzZWI5NjEgOGUxYzlhMWYgOTI5YTIxYTAgYjY4NTQwZWUgYTJkYTcyNWIgJyArCiAgICAgJzk5YjMxNWYzIGI4YjQ4OTkxIDhlZjEwOWUxIDU2MTkzOTUxIGVjN2U5MzdiIDE2NTJjMGJkICcgKwogICAgICczYmIxYmYwNyAzNTczZGY4OCAzZDJjMzRmMSBlZjQ1MWZkNCA2YjUwM2YwMCcsCiAgbjogJzAwMDAwMWZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmYSA1MTg2ODc4MyBiZjJmOTY2YiA3ZmNjMDE0OCAnICsKICAgICAnZjcwOWE1ZDAgM2JiNWM5YjggODk5YzQ3YWUgYmI2ZmI3MWUgOTEzODY0MDknLAogIGhhc2g6IGhhc2guc2hhNTEyLAogIGdSZWQ6IGZhbHNlLAogIGc6IFsKICAgICcwMDAwMDBjNiA4NThlMDZiNyAwNDA0ZTljZCA5ZTNlY2I2NiAyMzk1YjQ0MiA5YzY0ODEzOSAnICsKICAgICcwNTNmYjUyMSBmODI4YWY2MCA2YjRkM2RiYSBhMTRiNWU3NyBlZmU3NTkyOCBmZTFkYzEyNyAnICsKICAgICdhMmZmYThkZSAzMzQ4YjNjMSA4NTZhNDI5YiBmOTdlN2UzMSBjMmU1YmQ2NicsCiAgICAnMDAwMDAxMTggMzkyOTZhNzggOWEzYmMwMDQgNWM4YTVmYjQgMmM3ZDFiZDkgOThmNTQ0NDkgJyArCiAgICAnNTc5YjQ0NjggMTdhZmJkMTcgMjczZTY2MmMgOTdlZTcyOTkgNWVmNDI2NDAgYzU1MGI5MDEgJyArCiAgICAnM2ZhZDA3NjEgMzUzYzcwODYgYTI3MmMyNDAgODhiZTk0NzYgOWZkMTY2NTAnCiAgXQp9KTsKCmRlZmluZUN1cnZlKCdjdXJ2ZTI1NTE5JywgewogIHR5cGU6ICdtb250JywKICBwcmltZTogJ3AyNTUxOScsCiAgcDogJzdmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZWQnLAogIGE6ICc3NmQwNicsCiAgYjogJzAnLAogIG46ICcxMDAwMDAwMDAwMDAwMDAwIDAwMDAwMDAwMDAwMDAwMDAgMTRkZWY5ZGVhMmY3OWNkNiA1ODEyNjMxYTVjZjVkM2VkJywKICBoYXNoOiBoYXNoLnNoYTI1NiwKICBnUmVkOiBmYWxzZSwKICBnOiBbCiAgICAnOScKICBdCn0pOwoKZGVmaW5lQ3VydmUoJ2VkMjU1MTknLCB7CiAgdHlwZTogJ2Vkd2FyZHMnLAogIHByaW1lOiAncDI1NTE5JywKICBwOiAnN2ZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZlZCcsCiAgYTogJy0xJywKICBjOiAnMScsCiAgLy8gLTEyMTY2NSAqICgxMjE2NjZeKC0xKSkgKG1vZCBQKQogIGQ6ICc1MjAzNmNlZTJiNmZmZTczIDhjYzc0MDc5Nzc3OWU4OTggMDA3MDBhNGQ0MTQxZDhhYiA3NWViNGRjYTEzNTk3OGEzJywKICBuOiAnMTAwMDAwMDAwMDAwMDAwMCAwMDAwMDAwMDAwMDAwMDAwIDE0ZGVmOWRlYTJmNzljZDYgNTgxMjYzMWE1Y2Y1ZDNlZCcsCiAgaGFzaDogaGFzaC5zaGEyNTYsCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJzIxNjkzNmQzY2Q2ZTUzZmVjMGE0ZTIzMWZkZDZkYzVjNjkyY2M3NjA5NTI1YTdiMmM5NTYyZDYwOGYyNWQ1MWEnLAoKICAgIC8vIDQvNQogICAgJzY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NTgnCiAgXQp9KTsKCnZhciBwcmU7CnRyeSB7CiAgcHJlID0gcmVxdWlyZSgnLi9wcmVjb21wdXRlZC9zZWNwMjU2azEnKTsKfSBjYXRjaCAoZSkgewogIHByZSA9IHVuZGVmaW5lZDsKfQoKZGVmaW5lQ3VydmUoJ3NlY3AyNTZrMScsIHsKICB0eXBlOiAnc2hvcnQnLAogIHByaW1lOiAnazI1NicsCiAgcDogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmYzJmJywKICBhOiAnMCcsCiAgYjogJzcnLAogIG46ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZSBiYWFlZGNlNiBhZjQ4YTAzYiBiZmQyNWU4YyBkMDM2NDE0MScsCiAgaDogJzEnLAogIGhhc2g6IGhhc2guc2hhMjU2LAoKICAvLyBQcmVjb21wdXRlZCBlbmRvbW9ycGhpc20KICBiZXRhOiAnN2FlOTZhMmI2NTdjMDcxMDZlNjQ0NzllYWMzNDM0ZTk5Y2YwNDk3NTEyZjU4OTk1YzEzOTZjMjg3MTk1MDFlZScsCiAgbGFtYmRhOiAnNTM2M2FkNGNjMDVjMzBlMGE1MjYxYzAyODgxMjY0NWExMjJlMjJlYTIwODE2Njc4ZGYwMjk2N2MxYjIzYmQ3MicsCiAgYmFzaXM6IFsKICAgIHsKICAgICAgYTogJzMwODZkMjIxYTdkNDZiY2RlODZjOTBlNDkyODRlYjE1JywKICAgICAgYjogJy1lNDQzN2VkNjAxMGU4ODI4NmY1NDdmYTkwYWJmZTRjMycKICAgIH0sCiAgICB7CiAgICAgIGE6ICcxMTRjYTUwZjdhOGUyZjNmNjU3YzExMDhkOWQ0NGNmZDgnLAogICAgICBiOiAnMzA4NmQyMjFhN2Q0NmJjZGU4NmM5MGU0OTI4NGViMTUnCiAgICB9CiAgXSwKCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJzc5YmU2NjdlZjlkY2JiYWM1NWEwNjI5NWNlODcwYjA3MDI5YmZjZGIyZGNlMjhkOTU5ZjI4MTViMTZmODE3OTgnLAogICAgJzQ4M2FkYTc3MjZhM2M0NjU1ZGE0ZmJmYzBlMTEwOGE4ZmQxN2I0NDhhNjg1NTQxOTljNDdkMDhmZmIxMGQ0YjgnLAogICAgcHJlCiAgXQp9KTsKCn0seyIuLi9lbGxpcHRpYyI6MTAxLCIuL3ByZWNvbXB1dGVkL3NlY3AyNTZrMSI6MTE1LCJoYXNoLmpzIjoxMjB9XSwxMDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCcuLi8uLi9lbGxpcHRpYycpOwp2YXIgdXRpbHMgPSBlbGxpcHRpYy51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKCnZhciBLZXlQYWlyID0gcmVxdWlyZSgnLi9rZXknKTsKdmFyIFNpZ25hdHVyZSA9IHJlcXVpcmUoJy4vc2lnbmF0dXJlJyk7CgpmdW5jdGlvbiBFQyhvcHRpb25zKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEVDKSkKICAgIHJldHVybiBuZXcgRUMob3B0aW9ucyk7CgogIC8vIFNob3J0Y3V0IGBlbGxpcHRpYy5lYyhjdXJ2ZS1uYW1lKWAKICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7CiAgICBhc3NlcnQoZWxsaXB0aWMuY3VydmVzLmhhc093blByb3BlcnR5KG9wdGlvbnMpLCAnVW5rbm93biBjdXJ2ZSAnICsgb3B0aW9ucyk7CgogICAgb3B0aW9ucyA9IGVsbGlwdGljLmN1cnZlc1tvcHRpb25zXTsKICB9CgogIC8vIFNob3J0Y3V0IGZvciBgZWxsaXB0aWMuZWMoZWxsaXB0aWMuY3VydmVzLmN1cnZlTmFtZSlgCiAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBlbGxpcHRpYy5jdXJ2ZXMuUHJlc2V0Q3VydmUpCiAgICBvcHRpb25zID0geyBjdXJ2ZTogb3B0aW9ucyB9OwoKICB0aGlzLmN1cnZlID0gb3B0aW9ucy5jdXJ2ZS5jdXJ2ZTsKICB0aGlzLm4gPSB0aGlzLmN1cnZlLm47CiAgdGhpcy5uaCA9IHRoaXMubi51c2hybigxKTsKICB0aGlzLmcgPSB0aGlzLmN1cnZlLmc7CgogIC8vIFBvaW50IG9uIGN1cnZlCiAgdGhpcy5nID0gb3B0aW9ucy5jdXJ2ZS5nOwogIHRoaXMuZy5wcmVjb21wdXRlKG9wdGlvbnMuY3VydmUubi5iaXRMZW5ndGgoKSArIDEpOwoKICAvLyBIYXNoIGZvciBmdW5jdGlvbiBmb3IgRFJCRwogIHRoaXMuaGFzaCA9IG9wdGlvbnMuaGFzaCB8fCBvcHRpb25zLmN1cnZlLmhhc2g7Cn0KbW9kdWxlLmV4cG9ydHMgPSBFQzsKCkVDLnByb3RvdHlwZS5rZXlQYWlyID0gZnVuY3Rpb24ga2V5UGFpcihvcHRpb25zKSB7CiAgcmV0dXJuIG5ldyBLZXlQYWlyKHRoaXMsIG9wdGlvbnMpOwp9OwoKRUMucHJvdG90eXBlLmtleUZyb21Qcml2YXRlID0gZnVuY3Rpb24ga2V5RnJvbVByaXZhdGUocHJpdiwgZW5jKSB7CiAgcmV0dXJuIEtleVBhaXIuZnJvbVByaXZhdGUodGhpcywgcHJpdiwgZW5jKTsKfTsKCkVDLnByb3RvdHlwZS5rZXlGcm9tUHVibGljID0gZnVuY3Rpb24ga2V5RnJvbVB1YmxpYyhwdWIsIGVuYykgewogIHJldHVybiBLZXlQYWlyLmZyb21QdWJsaWModGhpcywgcHViLCBlbmMpOwp9OwoKRUMucHJvdG90eXBlLmdlbktleVBhaXIgPSBmdW5jdGlvbiBnZW5LZXlQYWlyKG9wdGlvbnMpIHsKICBpZiAoIW9wdGlvbnMpCiAgICBvcHRpb25zID0ge307CgogIC8vIEluc3RhbnRpYXRlIEhtYWNfRFJCRwogIHZhciBkcmJnID0gbmV3IGVsbGlwdGljLmhtYWNEUkJHKHsKICAgIGhhc2g6IHRoaXMuaGFzaCwKICAgIHBlcnM6IG9wdGlvbnMucGVycywKICAgIGVudHJvcHk6IG9wdGlvbnMuZW50cm9weSB8fCBlbGxpcHRpYy5yYW5kKHRoaXMuaGFzaC5obWFjU3RyZW5ndGgpLAogICAgbm9uY2U6IHRoaXMubi50b0FycmF5KCkKICB9KTsKCiAgdmFyIGJ5dGVzID0gdGhpcy5uLmJ5dGVMZW5ndGgoKTsKICB2YXIgbnMyID0gdGhpcy5uLnN1YihuZXcgQk4oMikpOwogIGRvIHsKICAgIHZhciBwcml2ID0gbmV3IEJOKGRyYmcuZ2VuZXJhdGUoYnl0ZXMpKTsKICAgIGlmIChwcml2LmNtcChuczIpID4gMCkKICAgICAgY29udGludWU7CgogICAgcHJpdi5pYWRkbigxKTsKICAgIHJldHVybiB0aGlzLmtleUZyb21Qcml2YXRlKHByaXYpOwogIH0gd2hpbGUgKHRydWUpOwp9OwoKRUMucHJvdG90eXBlLl90cnVuY2F0ZVRvTiA9IGZ1bmN0aW9uIHRydW5jYXRlVG9OKG1zZywgdHJ1bmNPbmx5KSB7CiAgdmFyIGRlbHRhID0gbXNnLmJ5dGVMZW5ndGgoKSAqIDggLSB0aGlzLm4uYml0TGVuZ3RoKCk7CiAgaWYgKGRlbHRhID4gMCkKICAgIG1zZyA9IG1zZy51c2hybihkZWx0YSk7CiAgaWYgKCF0cnVuY09ubHkgJiYgbXNnLmNtcCh0aGlzLm4pID49IDApCiAgICByZXR1cm4gbXNnLnN1Yih0aGlzLm4pOwogIGVsc2UKICAgIHJldHVybiBtc2c7Cn07CgpFQy5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIHNpZ24obXNnLCBrZXksIGVuYywgb3B0aW9ucykgewogIGlmICh0eXBlb2YgZW5jID09PSAnb2JqZWN0JykgewogICAgb3B0aW9ucyA9IGVuYzsKICAgIGVuYyA9IG51bGw7CiAgfQogIGlmICghb3B0aW9ucykKICAgIG9wdGlvbnMgPSB7fTsKCiAga2V5ID0gdGhpcy5rZXlGcm9tUHJpdmF0ZShrZXksIGVuYyk7CiAgbXNnID0gdGhpcy5fdHJ1bmNhdGVUb04obmV3IEJOKG1zZywgMTYpKTsKCiAgLy8gWmVyby1leHRlbmQga2V5IHRvIHByb3ZpZGUgZW5vdWdoIGVudHJvcHkKICB2YXIgYnl0ZXMgPSB0aGlzLm4uYnl0ZUxlbmd0aCgpOwogIHZhciBia2V5ID0ga2V5LmdldFByaXZhdGUoKS50b0FycmF5KCdiZScsIGJ5dGVzKTsKCiAgLy8gWmVyby1leHRlbmQgbm9uY2UgdG8gaGF2ZSB0aGUgc2FtZSBieXRlIHNpemUgYXMgTgogIHZhciBub25jZSA9IG1zZy50b0FycmF5KCdiZScsIGJ5dGVzKTsKCiAgLy8gSW5zdGFudGlhdGUgSG1hY19EUkJHCiAgdmFyIGRyYmcgPSBuZXcgZWxsaXB0aWMuaG1hY0RSQkcoewogICAgaGFzaDogdGhpcy5oYXNoLAogICAgZW50cm9weTogYmtleSwKICAgIG5vbmNlOiBub25jZSwKICAgIHBlcnM6IG9wdGlvbnMucGVycywKICAgIHBlcnNFbmM6IG9wdGlvbnMucGVyc0VuYwogIH0pOwoKICAvLyBOdW1iZXIgb2YgYnl0ZXMgdG8gZ2VuZXJhdGUKICB2YXIgbnMxID0gdGhpcy5uLnN1YihuZXcgQk4oMSkpOwoKICBmb3IgKHZhciBpdGVyID0gMDsgdHJ1ZTsgaXRlcisrKSB7CiAgICB2YXIgayA9IG9wdGlvbnMuayA/CiAgICAgICAgb3B0aW9ucy5rKGl0ZXIpIDoKICAgICAgICBuZXcgQk4oZHJiZy5nZW5lcmF0ZSh0aGlzLm4uYnl0ZUxlbmd0aCgpKSk7CiAgICBrID0gdGhpcy5fdHJ1bmNhdGVUb04oaywgdHJ1ZSk7CiAgICBpZiAoay5jbXBuKDEpIDw9IDAgfHwgay5jbXAobnMxKSA+PSAwKQogICAgICBjb250aW51ZTsKCiAgICB2YXIga3AgPSB0aGlzLmcubXVsKGspOwogICAgaWYgKGtwLmlzSW5maW5pdHkoKSkKICAgICAgY29udGludWU7CgogICAgdmFyIGtwWCA9IGtwLmdldFgoKTsKICAgIHZhciByID0ga3BYLnVtb2QodGhpcy5uKTsKICAgIGlmIChyLmNtcG4oMCkgPT09IDApCiAgICAgIGNvbnRpbnVlOwoKICAgIHZhciBzID0gay5pbnZtKHRoaXMubikubXVsKHIubXVsKGtleS5nZXRQcml2YXRlKCkpLmlhZGQobXNnKSk7CiAgICBzID0gcy51bW9kKHRoaXMubik7CiAgICBpZiAocy5jbXBuKDApID09PSAwKQogICAgICBjb250aW51ZTsKCiAgICB2YXIgcmVjb3ZlcnlQYXJhbSA9IChrcC5nZXRZKCkuaXNPZGQoKSA/IDEgOiAwKSB8CiAgICAgICAgICAgICAgICAgICAgICAgIChrcFguY21wKHIpICE9PSAwID8gMiA6IDApOwoKICAgIC8vIFVzZSBjb21wbGVtZW50IG9mIGBzYCwgaWYgaXQgaXMgPiBgbiAvIDJgCiAgICBpZiAob3B0aW9ucy5jYW5vbmljYWwgJiYgcy5jbXAodGhpcy5uaCkgPiAwKSB7CiAgICAgIHMgPSB0aGlzLm4uc3ViKHMpOwogICAgICByZWNvdmVyeVBhcmFtIF49IDE7CiAgICB9CgogICAgcmV0dXJuIG5ldyBTaWduYXR1cmUoeyByOiByLCBzOiBzLCByZWNvdmVyeVBhcmFtOiByZWNvdmVyeVBhcmFtIH0pOwogIH0KfTsKCkVDLnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobXNnLCBzaWduYXR1cmUsIGtleSwgZW5jKSB7CiAgbXNnID0gdGhpcy5fdHJ1bmNhdGVUb04obmV3IEJOKG1zZywgMTYpKTsKICBrZXkgPSB0aGlzLmtleUZyb21QdWJsaWMoa2V5LCBlbmMpOwogIHNpZ25hdHVyZSA9IG5ldyBTaWduYXR1cmUoc2lnbmF0dXJlLCAnaGV4Jyk7CgogIC8vIFBlcmZvcm0gcHJpbWl0aXZlIHZhbHVlcyB2YWxpZGF0aW9uCiAgdmFyIHIgPSBzaWduYXR1cmUucjsKICB2YXIgcyA9IHNpZ25hdHVyZS5zOwogIGlmIChyLmNtcG4oMSkgPCAwIHx8IHIuY21wKHRoaXMubikgPj0gMCkKICAgIHJldHVybiBmYWxzZTsKICBpZiAocy5jbXBuKDEpIDwgMCB8fCBzLmNtcCh0aGlzLm4pID49IDApCiAgICByZXR1cm4gZmFsc2U7CgogIC8vIFZhbGlkYXRlIHNpZ25hdHVyZQogIHZhciBzaW52ID0gcy5pbnZtKHRoaXMubik7CiAgdmFyIHUxID0gc2ludi5tdWwobXNnKS51bW9kKHRoaXMubik7CiAgdmFyIHUyID0gc2ludi5tdWwocikudW1vZCh0aGlzLm4pOwoKICB2YXIgcCA9IHRoaXMuZy5tdWxBZGQodTEsIGtleS5nZXRQdWJsaWMoKSwgdTIpOwogIGlmIChwLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiBmYWxzZTsKCiAgcmV0dXJuIHAuZ2V0WCgpLnVtb2QodGhpcy5uKS5jbXAocikgPT09IDA7Cn07CgpFQy5wcm90b3R5cGUucmVjb3ZlclB1YktleSA9IGZ1bmN0aW9uKG1zZywgc2lnbmF0dXJlLCBqLCBlbmMpIHsKICBhc3NlcnQoKDMgJiBqKSA9PT0gaiwgJ1RoZSByZWNvdmVyeSBwYXJhbSBpcyBtb3JlIHRoYW4gdHdvIGJpdHMnKTsKICBzaWduYXR1cmUgPSBuZXcgU2lnbmF0dXJlKHNpZ25hdHVyZSwgZW5jKTsKCiAgdmFyIG4gPSB0aGlzLm47CiAgdmFyIGUgPSBuZXcgQk4obXNnKTsKICB2YXIgciA9IHNpZ25hdHVyZS5yOwogIHZhciBzID0gc2lnbmF0dXJlLnM7CgogIC8vIEEgc2V0IExTQiBzaWduaWZpZXMgdGhhdCB0aGUgeS1jb29yZGluYXRlIGlzIG9kZAogIHZhciBpc1lPZGQgPSBqICYgMTsKICB2YXIgaXNTZWNvbmRLZXkgPSBqID4+IDE7CiAgaWYgKHIuY21wKHRoaXMuY3VydmUucC51bW9kKHRoaXMuY3VydmUubikpID49IDAgJiYgaXNTZWNvbmRLZXkpCiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBmaW5kIHNlbmNvbmQga2V5IGNhbmRpbmF0ZScpOwoKICAvLyAxLjEuIExldCB4ID0gciArIGpuLgogIGlmIChpc1NlY29uZEtleSkKICAgIHIgPSB0aGlzLmN1cnZlLnBvaW50RnJvbVgoci5hZGQodGhpcy5jdXJ2ZS5uKSwgaXNZT2RkKTsKICBlbHNlCiAgICByID0gdGhpcy5jdXJ2ZS5wb2ludEZyb21YKHIsIGlzWU9kZCk7CgogIHZhciBlTmVnID0gbi5zdWIoZSk7CgogIC8vIDEuNi4xIENvbXB1dGUgUSA9IHJeLTEgKHNSIC0gIGVHKQogIC8vICAgICAgICAgICAgICAgUSA9IHJeLTEgKHNSICsgLWVHKQogIHZhciBySW52ID0gc2lnbmF0dXJlLnIuaW52bShuKTsKICByZXR1cm4gdGhpcy5nLm11bEFkZChlTmVnLCByLCBzKS5tdWwockludik7Cn07CgpFQy5wcm90b3R5cGUuZ2V0S2V5UmVjb3ZlcnlQYXJhbSA9IGZ1bmN0aW9uKGUsIHNpZ25hdHVyZSwgUSwgZW5jKSB7CiAgc2lnbmF0dXJlID0gbmV3IFNpZ25hdHVyZShzaWduYXR1cmUsIGVuYyk7CiAgaWYgKHNpZ25hdHVyZS5yZWNvdmVyeVBhcmFtICE9PSBudWxsKQogICAgcmV0dXJuIHNpZ25hdHVyZS5yZWNvdmVyeVBhcmFtOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgdmFyIFFwcmltZTsKICAgIHRyeSB7CiAgICAgIFFwcmltZSA9IHRoaXMucmVjb3ZlclB1YktleShlLCBzaWduYXR1cmUsIGkpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBpZiAoUXByaW1lLmVxKFEpKQogICAgICByZXR1cm4gaTsKICB9CiAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZmluZCB2YWxpZCByZWNvdmVyeSBmYWN0b3InKTsKfTsKCn0seyIuLi8uLi9lbGxpcHRpYyI6MTAxLCIuL2tleSI6MTA5LCIuL3NpZ25hdHVyZSI6MTEwLCJibi5qcyI6NDJ9XSwxMDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwoKZnVuY3Rpb24gS2V5UGFpcihlYywgb3B0aW9ucykgewogIHRoaXMuZWMgPSBlYzsKICB0aGlzLnByaXYgPSBudWxsOwogIHRoaXMucHViID0gbnVsbDsKCiAgLy8gS2V5UGFpcihlYywgeyBwcml2OiAuLi4sIHB1YjogLi4uIH0pCiAgaWYgKG9wdGlvbnMucHJpdikKICAgIHRoaXMuX2ltcG9ydFByaXZhdGUob3B0aW9ucy5wcml2LCBvcHRpb25zLnByaXZFbmMpOwogIGlmIChvcHRpb25zLnB1YikKICAgIHRoaXMuX2ltcG9ydFB1YmxpYyhvcHRpb25zLnB1Yiwgb3B0aW9ucy5wdWJFbmMpOwp9Cm1vZHVsZS5leHBvcnRzID0gS2V5UGFpcjsKCktleVBhaXIuZnJvbVB1YmxpYyA9IGZ1bmN0aW9uIGZyb21QdWJsaWMoZWMsIHB1YiwgZW5jKSB7CiAgaWYgKHB1YiBpbnN0YW5jZW9mIEtleVBhaXIpCiAgICByZXR1cm4gcHViOwoKICByZXR1cm4gbmV3IEtleVBhaXIoZWMsIHsKICAgIHB1YjogcHViLAogICAgcHViRW5jOiBlbmMKICB9KTsKfTsKCktleVBhaXIuZnJvbVByaXZhdGUgPSBmdW5jdGlvbiBmcm9tUHJpdmF0ZShlYywgcHJpdiwgZW5jKSB7CiAgaWYgKHByaXYgaW5zdGFuY2VvZiBLZXlQYWlyKQogICAgcmV0dXJuIHByaXY7CgogIHJldHVybiBuZXcgS2V5UGFpcihlYywgewogICAgcHJpdjogcHJpdiwKICAgIHByaXZFbmM6IGVuYwogIH0pOwp9OwoKS2V5UGFpci5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZSgpIHsKICB2YXIgcHViID0gdGhpcy5nZXRQdWJsaWMoKTsKCiAgaWYgKHB1Yi5pc0luZmluaXR5KCkpCiAgICByZXR1cm4geyByZXN1bHQ6IGZhbHNlLCByZWFzb246ICdJbnZhbGlkIHB1YmxpYyBrZXknIH07CiAgaWYgKCFwdWIudmFsaWRhdGUoKSkKICAgIHJldHVybiB7IHJlc3VsdDogZmFsc2UsIHJlYXNvbjogJ1B1YmxpYyBrZXkgaXMgbm90IGEgcG9pbnQnIH07CiAgaWYgKCFwdWIubXVsKHRoaXMuZWMuY3VydmUubikuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHsgcmVzdWx0OiBmYWxzZSwgcmVhc29uOiAnUHVibGljIGtleSAqIE4gIT0gTycgfTsKCiAgcmV0dXJuIHsgcmVzdWx0OiB0cnVlLCByZWFzb246IG51bGwgfTsKfTsKCktleVBhaXIucHJvdG90eXBlLmdldFB1YmxpYyA9IGZ1bmN0aW9uIGdldFB1YmxpYyhjb21wYWN0LCBlbmMpIHsKICAvLyBjb21wYWN0IGlzIG9wdGlvbmFsIGFyZ3VtZW50CiAgaWYgKHR5cGVvZiBjb21wYWN0ID09PSAnc3RyaW5nJykgewogICAgZW5jID0gY29tcGFjdDsKICAgIGNvbXBhY3QgPSBudWxsOwogIH0KCiAgaWYgKCF0aGlzLnB1YikKICAgIHRoaXMucHViID0gdGhpcy5lYy5nLm11bCh0aGlzLnByaXYpOwoKICBpZiAoIWVuYykKICAgIHJldHVybiB0aGlzLnB1YjsKCiAgcmV0dXJuIHRoaXMucHViLmVuY29kZShlbmMsIGNvbXBhY3QpOwp9OwoKS2V5UGFpci5wcm90b3R5cGUuZ2V0UHJpdmF0ZSA9IGZ1bmN0aW9uIGdldFByaXZhdGUoZW5jKSB7CiAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICByZXR1cm4gdGhpcy5wcml2LnRvU3RyaW5nKDE2LCAyKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5wcml2Owp9OwoKS2V5UGFpci5wcm90b3R5cGUuX2ltcG9ydFByaXZhdGUgPSBmdW5jdGlvbiBfaW1wb3J0UHJpdmF0ZShrZXksIGVuYykgewogIHRoaXMucHJpdiA9IG5ldyBCTihrZXksIGVuYyB8fCAxNik7CgogIC8vIEVuc3VyZSB0aGF0IHRoZSBwcml2IHdvbid0IGJlIGJpZ2dlciB0aGFuIG4sIG90aGVyd2lzZSB3ZSBtYXkgZmFpbAogIC8vIGluIGZpeGVkIG11bHRpcGxpY2F0aW9uIG1ldGhvZAogIHRoaXMucHJpdiA9IHRoaXMucHJpdi51bW9kKHRoaXMuZWMuY3VydmUubik7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5faW1wb3J0UHVibGljID0gZnVuY3Rpb24gX2ltcG9ydFB1YmxpYyhrZXksIGVuYykgewogIGlmIChrZXkueCB8fCBrZXkueSkgewogICAgdGhpcy5wdWIgPSB0aGlzLmVjLmN1cnZlLnBvaW50KGtleS54LCBrZXkueSk7CiAgICByZXR1cm47CiAgfQogIHRoaXMucHViID0gdGhpcy5lYy5jdXJ2ZS5kZWNvZGVQb2ludChrZXksIGVuYyk7Cn07CgovLyBFQ0RICktleVBhaXIucHJvdG90eXBlLmRlcml2ZSA9IGZ1bmN0aW9uIGRlcml2ZShwdWIpIHsKICByZXR1cm4gcHViLm11bCh0aGlzLnByaXYpLmdldFgoKTsKfTsKCi8vIEVDRFNBCktleVBhaXIucHJvdG90eXBlLnNpZ24gPSBmdW5jdGlvbiBzaWduKG1zZywgZW5jLCBvcHRpb25zKSB7CiAgcmV0dXJuIHRoaXMuZWMuc2lnbihtc2csIHRoaXMsIGVuYywgb3B0aW9ucyk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobXNnLCBzaWduYXR1cmUpIHsKICByZXR1cm4gdGhpcy5lYy52ZXJpZnkobXNnLCBzaWduYXR1cmUsIHRoaXMpOwp9OwoKS2V5UGFpci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QoKSB7CiAgcmV0dXJuICc8S2V5IHByaXY6ICcgKyAodGhpcy5wcml2ICYmIHRoaXMucHJpdi50b1N0cmluZygxNiwgMikpICsKICAgICAgICAgJyBwdWI6ICcgKyAodGhpcy5wdWIgJiYgdGhpcy5wdWIuaW5zcGVjdCgpKSArICcgPic7Cn07Cgp9LHsiYm4uanMiOjQyfV0sMTEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKCnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0OwoKZnVuY3Rpb24gU2lnbmF0dXJlKG9wdGlvbnMsIGVuYykgewogIGlmIChvcHRpb25zIGluc3RhbmNlb2YgU2lnbmF0dXJlKQogICAgcmV0dXJuIG9wdGlvbnM7CgogIGlmICh0aGlzLl9pbXBvcnRERVIob3B0aW9ucywgZW5jKSkKICAgIHJldHVybjsKCiAgYXNzZXJ0KG9wdGlvbnMuciAmJiBvcHRpb25zLnMsICdTaWduYXR1cmUgd2l0aG91dCByIG9yIHMnKTsKICB0aGlzLnIgPSBuZXcgQk4ob3B0aW9ucy5yLCAxNik7CiAgdGhpcy5zID0gbmV3IEJOKG9wdGlvbnMucywgMTYpOwogIGlmIChvcHRpb25zLnJlY292ZXJ5UGFyYW0gPT09IHVuZGVmaW5lZCkKICAgIHRoaXMucmVjb3ZlcnlQYXJhbSA9IG51bGw7CiAgZWxzZQogICAgdGhpcy5yZWNvdmVyeVBhcmFtID0gb3B0aW9ucy5yZWNvdmVyeVBhcmFtOwp9Cm1vZHVsZS5leHBvcnRzID0gU2lnbmF0dXJlOwoKZnVuY3Rpb24gUG9zaXRpb24oKSB7CiAgdGhpcy5wbGFjZSA9IDA7Cn0KCmZ1bmN0aW9uIGdldExlbmd0aChidWYsIHApIHsKICB2YXIgaW5pdGlhbCA9IGJ1ZltwLnBsYWNlKytdOwogIGlmICghKGluaXRpYWwgJiAweDgwKSkgewogICAgcmV0dXJuIGluaXRpYWw7CiAgfQogIHZhciBvY3RldExlbiA9IGluaXRpYWwgJiAweGY7CiAgdmFyIHZhbCA9IDA7CiAgZm9yICh2YXIgaSA9IDAsIG9mZiA9IHAucGxhY2U7IGkgPCBvY3RldExlbjsgaSsrLCBvZmYrKykgewogICAgdmFsIDw8PSA4OwogICAgdmFsIHw9IGJ1ZltvZmZdOwogIH0KICBwLnBsYWNlID0gb2ZmOwogIHJldHVybiB2YWw7Cn0KCmZ1bmN0aW9uIHJtUGFkZGluZyhidWYpIHsKICB2YXIgaSA9IDA7CiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGggLSAxOwogIHdoaWxlICghYnVmW2ldICYmICEoYnVmW2kgKyAxXSAmIDB4ODApICYmIGkgPCBsZW4pIHsKICAgIGkrKzsKICB9CiAgaWYgKGkgPT09IDApIHsKICAgIHJldHVybiBidWY7CiAgfQogIHJldHVybiBidWYuc2xpY2UoaSk7Cn0KClNpZ25hdHVyZS5wcm90b3R5cGUuX2ltcG9ydERFUiA9IGZ1bmN0aW9uIF9pbXBvcnRERVIoZGF0YSwgZW5jKSB7CiAgZGF0YSA9IHV0aWxzLnRvQXJyYXkoZGF0YSwgZW5jKTsKICB2YXIgcCA9IG5ldyBQb3NpdGlvbigpOwogIGlmIChkYXRhW3AucGxhY2UrK10gIT09IDB4MzApIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgdmFyIGxlbiA9IGdldExlbmd0aChkYXRhLCBwKTsKICBpZiAoKGxlbiArIHAucGxhY2UpICE9PSBkYXRhLmxlbmd0aCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICBpZiAoZGF0YVtwLnBsYWNlKytdICE9PSAweDAyKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHZhciBybGVuID0gZ2V0TGVuZ3RoKGRhdGEsIHApOwogIHZhciByID0gZGF0YS5zbGljZShwLnBsYWNlLCBybGVuICsgcC5wbGFjZSk7CiAgcC5wbGFjZSArPSBybGVuOwogIGlmIChkYXRhW3AucGxhY2UrK10gIT09IDB4MDIpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgdmFyIHNsZW4gPSBnZXRMZW5ndGgoZGF0YSwgcCk7CiAgaWYgKGRhdGEubGVuZ3RoICE9PSBzbGVuICsgcC5wbGFjZSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB2YXIgcyA9IGRhdGEuc2xpY2UocC5wbGFjZSwgc2xlbiArIHAucGxhY2UpOwogIGlmIChyWzBdID09PSAwICYmIChyWzFdICYgMHg4MCkpIHsKICAgIHIgPSByLnNsaWNlKDEpOwogIH0KICBpZiAoc1swXSA9PT0gMCAmJiAoc1sxXSAmIDB4ODApKSB7CiAgICBzID0gcy5zbGljZSgxKTsKICB9CgogIHRoaXMuciA9IG5ldyBCTihyKTsKICB0aGlzLnMgPSBuZXcgQk4ocyk7CiAgdGhpcy5yZWNvdmVyeVBhcmFtID0gbnVsbDsKCiAgcmV0dXJuIHRydWU7Cn07CgpmdW5jdGlvbiBjb25zdHJ1Y3RMZW5ndGgoYXJyLCBsZW4pIHsKICBpZiAobGVuIDwgMHg4MCkgewogICAgYXJyLnB1c2gobGVuKTsKICAgIHJldHVybjsKICB9CiAgdmFyIG9jdGV0cyA9IDEgKyAoTWF0aC5sb2cobGVuKSAvIE1hdGguTE4yID4+PiAzKTsKICBhcnIucHVzaChvY3RldHMgfCAweDgwKTsKICB3aGlsZSAoLS1vY3RldHMpIHsKICAgIGFyci5wdXNoKChsZW4gPj4+IChvY3RldHMgPDwgMykpICYgMHhmZik7CiAgfQogIGFyci5wdXNoKGxlbik7Cn0KClNpZ25hdHVyZS5wcm90b3R5cGUudG9ERVIgPSBmdW5jdGlvbiB0b0RFUihlbmMpIHsKICB2YXIgciA9IHRoaXMuci50b0FycmF5KCk7CiAgdmFyIHMgPSB0aGlzLnMudG9BcnJheSgpOwoKICAvLyBQYWQgdmFsdWVzCiAgaWYgKHJbMF0gJiAweDgwKQogICAgciA9IFsgMCBdLmNvbmNhdChyKTsKICAvLyBQYWQgdmFsdWVzCiAgaWYgKHNbMF0gJiAweDgwKQogICAgcyA9IFsgMCBdLmNvbmNhdChzKTsKCiAgciA9IHJtUGFkZGluZyhyKTsKICBzID0gcm1QYWRkaW5nKHMpOwoKICB3aGlsZSAoIXNbMF0gJiYgIShzWzFdICYgMHg4MCkpIHsKICAgIHMgPSBzLnNsaWNlKDEpOwogIH0KICB2YXIgYXJyID0gWyAweDAyIF07CiAgY29uc3RydWN0TGVuZ3RoKGFyciwgci5sZW5ndGgpOwogIGFyciA9IGFyci5jb25jYXQocik7CiAgYXJyLnB1c2goMHgwMik7CiAgY29uc3RydWN0TGVuZ3RoKGFyciwgcy5sZW5ndGgpOwogIHZhciBiYWNrSGFsZiA9IGFyci5jb25jYXQocyk7CiAgdmFyIHJlcyA9IFsgMHgzMCBdOwogIGNvbnN0cnVjdExlbmd0aChyZXMsIGJhY2tIYWxmLmxlbmd0aCk7CiAgcmVzID0gcmVzLmNvbmNhdChiYWNrSGFsZik7CiAgcmV0dXJuIHV0aWxzLmVuY29kZShyZXMsIGVuYyk7Cn07Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjEwMSwiYm4uanMiOjQyfV0sMTExOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGhhc2ggPSByZXF1aXJlKCdoYXNoLmpzJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0Owp2YXIgcGFyc2VCeXRlcyA9IHV0aWxzLnBhcnNlQnl0ZXM7CnZhciBLZXlQYWlyID0gcmVxdWlyZSgnLi9rZXknKTsKdmFyIFNpZ25hdHVyZSA9IHJlcXVpcmUoJy4vc2lnbmF0dXJlJyk7CgpmdW5jdGlvbiBFRERTQShjdXJ2ZSkgewogIGFzc2VydChjdXJ2ZSA9PT0gJ2VkMjU1MTknLCAnb25seSB0ZXN0ZWQgd2l0aCBlZDI1NTE5IHNvIGZhcicpOwoKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRUREU0EpKQogICAgcmV0dXJuIG5ldyBFRERTQShjdXJ2ZSk7CgogIHZhciBjdXJ2ZSA9IGVsbGlwdGljLmN1cnZlc1tjdXJ2ZV0uY3VydmU7CiAgdGhpcy5jdXJ2ZSA9IGN1cnZlOwogIHRoaXMuZyA9IGN1cnZlLmc7CiAgdGhpcy5nLnByZWNvbXB1dGUoY3VydmUubi5iaXRMZW5ndGgoKSArIDEpOwoKICB0aGlzLnBvaW50Q2xhc3MgPSBjdXJ2ZS5wb2ludCgpLmNvbnN0cnVjdG9yOwogIHRoaXMuZW5jb2RpbmdMZW5ndGggPSBNYXRoLmNlaWwoY3VydmUubi5iaXRMZW5ndGgoKSAvIDgpOwogIHRoaXMuaGFzaCA9IGhhc2guc2hhNTEyOwp9Cgptb2R1bGUuZXhwb3J0cyA9IEVERFNBOwoKLyoqCiogQHBhcmFtIHtBcnJheXxTdHJpbmd9IG1lc3NhZ2UgLSBtZXNzYWdlIGJ5dGVzCiogQHBhcmFtIHtBcnJheXxTdHJpbmd8S2V5UGFpcn0gc2VjcmV0IC0gc2VjcmV0IGJ5dGVzIG9yIGEga2V5cGFpcgoqIEByZXR1cm5zIHtTaWduYXR1cmV9IC0gc2lnbmF0dXJlCiovCkVERFNBLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gc2lnbihtZXNzYWdlLCBzZWNyZXQpIHsKICBtZXNzYWdlID0gcGFyc2VCeXRlcyhtZXNzYWdlKTsKICB2YXIga2V5ID0gdGhpcy5rZXlGcm9tU2VjcmV0KHNlY3JldCk7CiAgdmFyIHIgPSB0aGlzLmhhc2hJbnQoa2V5Lm1lc3NhZ2VQcmVmaXgoKSwgbWVzc2FnZSk7CiAgdmFyIFIgPSB0aGlzLmcubXVsKHIpOwogIHZhciBSZW5jb2RlZCA9IHRoaXMuZW5jb2RlUG9pbnQoUik7CiAgdmFyIHNfID0gdGhpcy5oYXNoSW50KFJlbmNvZGVkLCBrZXkucHViQnl0ZXMoKSwgbWVzc2FnZSkKICAgICAgICAgICAgICAgLm11bChrZXkucHJpdigpKTsKICB2YXIgUyA9IHIuYWRkKHNfKS51bW9kKHRoaXMuY3VydmUubik7CiAgcmV0dXJuIHRoaXMubWFrZVNpZ25hdHVyZSh7IFI6IFIsIFM6IFMsIFJlbmNvZGVkOiBSZW5jb2RlZCB9KTsKfTsKCi8qKgoqIEBwYXJhbSB7QXJyYXl9IG1lc3NhZ2UgLSBtZXNzYWdlIGJ5dGVzCiogQHBhcmFtIHtBcnJheXxTdHJpbmd8U2lnbmF0dXJlfSBzaWcgLSBzaWcgYnl0ZXMKKiBAcGFyYW0ge0FycmF5fFN0cmluZ3xQb2ludHxLZXlQYWlyfSBwdWIgLSBwdWJsaWMga2V5CiogQHJldHVybnMge0Jvb2xlYW59IC0gdHJ1ZSBpZiBwdWJsaWMga2V5IG1hdGNoZXMgc2lnIG9mIG1lc3NhZ2UKKi8KRUREU0EucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlLCBzaWcsIHB1YikgewogIG1lc3NhZ2UgPSBwYXJzZUJ5dGVzKG1lc3NhZ2UpOwogIHNpZyA9IHRoaXMubWFrZVNpZ25hdHVyZShzaWcpOwogIHZhciBrZXkgPSB0aGlzLmtleUZyb21QdWJsaWMocHViKTsKICB2YXIgaCA9IHRoaXMuaGFzaEludChzaWcuUmVuY29kZWQoKSwga2V5LnB1YkJ5dGVzKCksIG1lc3NhZ2UpOwogIHZhciBTRyA9IHRoaXMuZy5tdWwoc2lnLlMoKSk7CiAgdmFyIFJwbHVzQWggPSBzaWcuUigpLmFkZChrZXkucHViKCkubXVsKGgpKTsKICByZXR1cm4gUnBsdXNBaC5lcShTRyk7Cn07CgpFRERTQS5wcm90b3R5cGUuaGFzaEludCA9IGZ1bmN0aW9uIGhhc2hJbnQoKSB7CiAgdmFyIGhhc2ggPSB0aGlzLmhhc2goKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykKICAgIGhhc2gudXBkYXRlKGFyZ3VtZW50c1tpXSk7CiAgcmV0dXJuIHV0aWxzLmludEZyb21MRShoYXNoLmRpZ2VzdCgpKS51bW9kKHRoaXMuY3VydmUubik7Cn07CgpFRERTQS5wcm90b3R5cGUua2V5RnJvbVB1YmxpYyA9IGZ1bmN0aW9uIGtleUZyb21QdWJsaWMocHViKSB7CiAgcmV0dXJuIEtleVBhaXIuZnJvbVB1YmxpYyh0aGlzLCBwdWIpOwp9OwoKRUREU0EucHJvdG90eXBlLmtleUZyb21TZWNyZXQgPSBmdW5jdGlvbiBrZXlGcm9tU2VjcmV0KHNlY3JldCkgewogIHJldHVybiBLZXlQYWlyLmZyb21TZWNyZXQodGhpcywgc2VjcmV0KTsKfTsKCkVERFNBLnByb3RvdHlwZS5tYWtlU2lnbmF0dXJlID0gZnVuY3Rpb24gbWFrZVNpZ25hdHVyZShzaWcpIHsKICBpZiAoc2lnIGluc3RhbmNlb2YgU2lnbmF0dXJlKQogICAgcmV0dXJuIHNpZzsKICByZXR1cm4gbmV3IFNpZ25hdHVyZSh0aGlzLCBzaWcpOwp9OwoKLyoqCiogKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtam9zZWZzc29uLWVkZHNhLWVkMjU1MTktMDMjc2VjdGlvbi01LjIKKgoqIEVERFNBIGRlZmluZXMgbWV0aG9kcyBmb3IgZW5jb2RpbmcgYW5kIGRlY29kaW5nIHBvaW50cyBhbmQgaW50ZWdlcnMuIFRoZXNlIGFyZQoqIGhlbHBlciBjb252ZW5pZW5jZSBtZXRob2RzLCB0aGF0IHBhc3MgYWxvbmcgdG8gdXRpbGl0eSBmdW5jdGlvbnMgaW1wbGllZAoqIHBhcmFtZXRlcnMuCioKKi8KRUREU0EucHJvdG90eXBlLmVuY29kZVBvaW50ID0gZnVuY3Rpb24gZW5jb2RlUG9pbnQocG9pbnQpIHsKICB2YXIgZW5jID0gcG9pbnQuZ2V0WSgpLnRvQXJyYXkoJ2xlJywgdGhpcy5lbmNvZGluZ0xlbmd0aCk7CiAgZW5jW3RoaXMuZW5jb2RpbmdMZW5ndGggLSAxXSB8PSBwb2ludC5nZXRYKCkuaXNPZGQoKSA/IDB4ODAgOiAwOwogIHJldHVybiBlbmM7Cn07CgpFRERTQS5wcm90b3R5cGUuZGVjb2RlUG9pbnQgPSBmdW5jdGlvbiBkZWNvZGVQb2ludChieXRlcykgewogIGJ5dGVzID0gdXRpbHMucGFyc2VCeXRlcyhieXRlcyk7CgogIHZhciBsYXN0SXggPSBieXRlcy5sZW5ndGggLSAxOwogIHZhciBub3JtZWQgPSBieXRlcy5zbGljZSgwLCBsYXN0SXgpLmNvbmNhdChieXRlc1tsYXN0SXhdICYgfjB4ODApOwogIHZhciB4SXNPZGQgPSAoYnl0ZXNbbGFzdEl4XSAmIDB4ODApICE9PSAwOwoKICB2YXIgeSA9IHV0aWxzLmludEZyb21MRShub3JtZWQpOwogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50RnJvbVkoeSwgeElzT2RkKTsKfTsKCkVERFNBLnByb3RvdHlwZS5lbmNvZGVJbnQgPSBmdW5jdGlvbiBlbmNvZGVJbnQobnVtKSB7CiAgcmV0dXJuIG51bS50b0FycmF5KCdsZScsIHRoaXMuZW5jb2RpbmdMZW5ndGgpOwp9OwoKRUREU0EucHJvdG90eXBlLmRlY29kZUludCA9IGZ1bmN0aW9uIGRlY29kZUludChieXRlcykgewogIHJldHVybiB1dGlscy5pbnRGcm9tTEUoYnl0ZXMpOwp9OwoKRUREU0EucHJvdG90eXBlLmlzUG9pbnQgPSBmdW5jdGlvbiBpc1BvaW50KHZhbCkgewogIHJldHVybiB2YWwgaW5zdGFuY2VvZiB0aGlzLnBvaW50Q2xhc3M7Cn07Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjEwMSwiLi9rZXkiOjExMiwiLi9zaWduYXR1cmUiOjExMywiaGFzaC5qcyI6MTIwfV0sMTEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIHV0aWxzID0gZWxsaXB0aWMudXRpbHM7CnZhciBhc3NlcnQgPSB1dGlscy5hc3NlcnQ7CnZhciBwYXJzZUJ5dGVzID0gdXRpbHMucGFyc2VCeXRlczsKdmFyIGNhY2hlZFByb3BlcnR5ID0gdXRpbHMuY2FjaGVkUHJvcGVydHk7CgovKioKKiBAcGFyYW0ge0VERFNBfSBlZGRzYSAtIGluc3RhbmNlCiogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIHB1YmxpYy9wcml2YXRlIGtleSBwYXJhbWV0ZXJzCioKKiBAcGFyYW0ge0FycmF5PEJ5dGU+fSBbcGFyYW1zLnNlY3JldF0gLSBzZWNyZXQgc2VlZCBieXRlcwoqIEBwYXJhbSB7UG9pbnR9IFtwYXJhbXMucHViXSAtIHB1YmxpYyBrZXkgcG9pbnQgKGFrYSBgQWAgaW4gZWRkc2EgdGVybXMpCiogQHBhcmFtIHtBcnJheTxCeXRlPn0gW3BhcmFtcy5wdWJdIC0gcHVibGljIGtleSBwb2ludCBlbmNvZGVkIGFzIGJ5dGVzCioKKi8KZnVuY3Rpb24gS2V5UGFpcihlZGRzYSwgcGFyYW1zKSB7CiAgdGhpcy5lZGRzYSA9IGVkZHNhOwogIHRoaXMuX3NlY3JldCA9IHBhcnNlQnl0ZXMocGFyYW1zLnNlY3JldCk7CiAgaWYgKGVkZHNhLmlzUG9pbnQocGFyYW1zLnB1YikpCiAgICB0aGlzLl9wdWIgPSBwYXJhbXMucHViOwogIGVsc2UKICAgIHRoaXMuX3B1YkJ5dGVzID0gcGFyc2VCeXRlcyhwYXJhbXMucHViKTsKfQoKS2V5UGFpci5mcm9tUHVibGljID0gZnVuY3Rpb24gZnJvbVB1YmxpYyhlZGRzYSwgcHViKSB7CiAgaWYgKHB1YiBpbnN0YW5jZW9mIEtleVBhaXIpCiAgICByZXR1cm4gcHViOwogIHJldHVybiBuZXcgS2V5UGFpcihlZGRzYSwgeyBwdWI6IHB1YiB9KTsKfTsKCktleVBhaXIuZnJvbVNlY3JldCA9IGZ1bmN0aW9uIGZyb21TZWNyZXQoZWRkc2EsIHNlY3JldCkgewogIGlmIChzZWNyZXQgaW5zdGFuY2VvZiBLZXlQYWlyKQogICAgcmV0dXJuIHNlY3JldDsKICByZXR1cm4gbmV3IEtleVBhaXIoZWRkc2EsIHsgc2VjcmV0OiBzZWNyZXQgfSk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5zZWNyZXQgPSBmdW5jdGlvbiBzZWNyZXQoKSB7CiAgcmV0dXJuIHRoaXMuX3NlY3JldDsKfTsKCmNhY2hlZFByb3BlcnR5KEtleVBhaXIsIGZ1bmN0aW9uIHB1YkJ5dGVzKCkgewogIHJldHVybiB0aGlzLmVkZHNhLmVuY29kZVBvaW50KHRoaXMucHViKCkpOwp9KTsKCmNhY2hlZFByb3BlcnR5KEtleVBhaXIsIGZ1bmN0aW9uIHB1YigpIHsKICBpZiAodGhpcy5fcHViQnl0ZXMpCiAgICByZXR1cm4gdGhpcy5lZGRzYS5kZWNvZGVQb2ludCh0aGlzLl9wdWJCeXRlcyk7CiAgcmV0dXJuIHRoaXMuZWRkc2EuZy5tdWwodGhpcy5wcml2KCkpOwp9KTsKCmNhY2hlZFByb3BlcnR5KEtleVBhaXIsIGZ1bmN0aW9uIHByaXZCeXRlcygpIHsKICB2YXIgZWRkc2EgPSB0aGlzLmVkZHNhOwogIHZhciBoYXNoID0gdGhpcy5oYXNoKCk7CiAgdmFyIGxhc3RJeCA9IGVkZHNhLmVuY29kaW5nTGVuZ3RoIC0gMTsKCiAgdmFyIGEgPSBoYXNoLnNsaWNlKDAsIGVkZHNhLmVuY29kaW5nTGVuZ3RoKTsKICBhWzBdICY9IDI0ODsKICBhW2xhc3RJeF0gJj0gMTI3OwogIGFbbGFzdEl4XSB8PSA2NDsKCiAgcmV0dXJuIGE7Cn0pOwoKY2FjaGVkUHJvcGVydHkoS2V5UGFpciwgZnVuY3Rpb24gcHJpdigpIHsKICByZXR1cm4gdGhpcy5lZGRzYS5kZWNvZGVJbnQodGhpcy5wcml2Qnl0ZXMoKSk7Cn0pOwoKY2FjaGVkUHJvcGVydHkoS2V5UGFpciwgZnVuY3Rpb24gaGFzaCgpIHsKICByZXR1cm4gdGhpcy5lZGRzYS5oYXNoKCkudXBkYXRlKHRoaXMuc2VjcmV0KCkpLmRpZ2VzdCgpOwp9KTsKCmNhY2hlZFByb3BlcnR5KEtleVBhaXIsIGZ1bmN0aW9uIG1lc3NhZ2VQcmVmaXgoKSB7CiAgcmV0dXJuIHRoaXMuaGFzaCgpLnNsaWNlKHRoaXMuZWRkc2EuZW5jb2RpbmdMZW5ndGgpOwp9KTsKCktleVBhaXIucHJvdG90eXBlLnNpZ24gPSBmdW5jdGlvbiBzaWduKG1lc3NhZ2UpIHsKICBhc3NlcnQodGhpcy5fc2VjcmV0LCAnS2V5UGFpciBjYW4gb25seSB2ZXJpZnknKTsKICByZXR1cm4gdGhpcy5lZGRzYS5zaWduKG1lc3NhZ2UsIHRoaXMpOwp9OwoKS2V5UGFpci5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UsIHNpZykgewogIHJldHVybiB0aGlzLmVkZHNhLnZlcmlmeShtZXNzYWdlLCBzaWcsIHRoaXMpOwp9OwoKS2V5UGFpci5wcm90b3R5cGUuZ2V0U2VjcmV0ID0gZnVuY3Rpb24gZ2V0U2VjcmV0KGVuYykgewogIGFzc2VydCh0aGlzLl9zZWNyZXQsICdLZXlQYWlyIGlzIHB1YmxpYyBvbmx5Jyk7CiAgcmV0dXJuIHV0aWxzLmVuY29kZSh0aGlzLnNlY3JldCgpLCBlbmMpOwp9OwoKS2V5UGFpci5wcm90b3R5cGUuZ2V0UHVibGljID0gZnVuY3Rpb24gZ2V0UHVibGljKGVuYykgewogIHJldHVybiB1dGlscy5lbmNvZGUodGhpcy5wdWJCeXRlcygpLCBlbmMpOwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBLZXlQYWlyOwoKfSx7Ii4uLy4uL2VsbGlwdGljIjoxMDF9XSwxMTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCcuLi8uLi9lbGxpcHRpYycpOwp2YXIgdXRpbHMgPSBlbGxpcHRpYy51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKdmFyIGNhY2hlZFByb3BlcnR5ID0gdXRpbHMuY2FjaGVkUHJvcGVydHk7CnZhciBwYXJzZUJ5dGVzID0gdXRpbHMucGFyc2VCeXRlczsKCi8qKgoqIEBwYXJhbSB7RUREU0F9IGVkZHNhIC0gZWRkc2EgaW5zdGFuY2UKKiBAcGFyYW0ge0FycmF5PEJ5dGVzPnxPYmplY3R9IHNpZyAtCiogQHBhcmFtIHtBcnJheTxCeXRlcz58UG9pbnR9IFtzaWcuUl0gLSBSIHBvaW50IGFzIFBvaW50IG9yIGJ5dGVzCiogQHBhcmFtIHtBcnJheTxCeXRlcz58Ym59IFtzaWcuU10gLSBTIHNjYWxhciBhcyBibiBvciBieXRlcwoqIEBwYXJhbSB7QXJyYXk8Qnl0ZXM+fSBbc2lnLlJlbmNvZGVkXSAtIFIgcG9pbnQgZW5jb2RlZAoqIEBwYXJhbSB7QXJyYXk8Qnl0ZXM+fSBbc2lnLlNlbmNvZGVkXSAtIFMgc2NhbGFyIGVuY29kZWQKKi8KZnVuY3Rpb24gU2lnbmF0dXJlKGVkZHNhLCBzaWcpIHsKICB0aGlzLmVkZHNhID0gZWRkc2E7CgogIGlmICh0eXBlb2Ygc2lnICE9PSAnb2JqZWN0JykKICAgIHNpZyA9IHBhcnNlQnl0ZXMoc2lnKTsKCiAgaWYgKEFycmF5LmlzQXJyYXkoc2lnKSkgewogICAgc2lnID0gewogICAgICBSOiBzaWcuc2xpY2UoMCwgZWRkc2EuZW5jb2RpbmdMZW5ndGgpLAogICAgICBTOiBzaWcuc2xpY2UoZWRkc2EuZW5jb2RpbmdMZW5ndGgpCiAgICB9OwogIH0KCiAgYXNzZXJ0KHNpZy5SICYmIHNpZy5TLCAnU2lnbmF0dXJlIHdpdGhvdXQgUiBvciBTJyk7CgogIGlmIChlZGRzYS5pc1BvaW50KHNpZy5SKSkKICAgIHRoaXMuX1IgPSBzaWcuUjsKICBpZiAoc2lnLlMgaW5zdGFuY2VvZiBCTikKICAgIHRoaXMuX1MgPSBzaWcuUzsKCiAgdGhpcy5fUmVuY29kZWQgPSBBcnJheS5pc0FycmF5KHNpZy5SKSA/IHNpZy5SIDogc2lnLlJlbmNvZGVkOwogIHRoaXMuX1NlbmNvZGVkID0gQXJyYXkuaXNBcnJheShzaWcuUykgPyBzaWcuUyA6IHNpZy5TZW5jb2RlZDsKfQoKY2FjaGVkUHJvcGVydHkoU2lnbmF0dXJlLCBmdW5jdGlvbiBTKCkgewogIHJldHVybiB0aGlzLmVkZHNhLmRlY29kZUludCh0aGlzLlNlbmNvZGVkKCkpOwp9KTsKCmNhY2hlZFByb3BlcnR5KFNpZ25hdHVyZSwgZnVuY3Rpb24gUigpIHsKICByZXR1cm4gdGhpcy5lZGRzYS5kZWNvZGVQb2ludCh0aGlzLlJlbmNvZGVkKCkpOwp9KTsKCmNhY2hlZFByb3BlcnR5KFNpZ25hdHVyZSwgZnVuY3Rpb24gUmVuY29kZWQoKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EuZW5jb2RlUG9pbnQodGhpcy5SKCkpOwp9KTsKCmNhY2hlZFByb3BlcnR5KFNpZ25hdHVyZSwgZnVuY3Rpb24gU2VuY29kZWQoKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EuZW5jb2RlSW50KHRoaXMuUygpKTsKfSk7CgpTaWduYXR1cmUucHJvdG90eXBlLnRvQnl0ZXMgPSBmdW5jdGlvbiB0b0J5dGVzKCkgewogIHJldHVybiB0aGlzLlJlbmNvZGVkKCkuY29uY2F0KHRoaXMuU2VuY29kZWQoKSk7Cn07CgpTaWduYXR1cmUucHJvdG90eXBlLnRvSGV4ID0gZnVuY3Rpb24gdG9IZXgoKSB7CiAgcmV0dXJuIHV0aWxzLmVuY29kZSh0aGlzLnRvQnl0ZXMoKSwgJ2hleCcpLnRvVXBwZXJDYXNlKCk7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IFNpZ25hdHVyZTsKCn0seyIuLi8uLi9lbGxpcHRpYyI6MTAxLCJibi5qcyI6NDJ9XSwxMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgaGFzaCA9IHJlcXVpcmUoJ2hhc2guanMnKTsKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vZWxsaXB0aWMnKTsKdmFyIHV0aWxzID0gZWxsaXB0aWMudXRpbHM7CnZhciBhc3NlcnQgPSB1dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBIbWFjRFJCRyhvcHRpb25zKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEhtYWNEUkJHKSkKICAgIHJldHVybiBuZXcgSG1hY0RSQkcob3B0aW9ucyk7CiAgdGhpcy5oYXNoID0gb3B0aW9ucy5oYXNoOwogIHRoaXMucHJlZFJlc2lzdCA9ICEhb3B0aW9ucy5wcmVkUmVzaXN0OwoKICB0aGlzLm91dExlbiA9IHRoaXMuaGFzaC5vdXRTaXplOwogIHRoaXMubWluRW50cm9weSA9IG9wdGlvbnMubWluRW50cm9weSB8fCB0aGlzLmhhc2guaG1hY1N0cmVuZ3RoOwoKICB0aGlzLnJlc2VlZCA9IG51bGw7CiAgdGhpcy5yZXNlZWRJbnRlcnZhbCA9IG51bGw7CiAgdGhpcy5LID0gbnVsbDsKICB0aGlzLlYgPSBudWxsOwoKICB2YXIgZW50cm9weSA9IHV0aWxzLnRvQXJyYXkob3B0aW9ucy5lbnRyb3B5LCBvcHRpb25zLmVudHJvcHlFbmMpOwogIHZhciBub25jZSA9IHV0aWxzLnRvQXJyYXkob3B0aW9ucy5ub25jZSwgb3B0aW9ucy5ub25jZUVuYyk7CiAgdmFyIHBlcnMgPSB1dGlscy50b0FycmF5KG9wdGlvbnMucGVycywgb3B0aW9ucy5wZXJzRW5jKTsKICBhc3NlcnQoZW50cm9weS5sZW5ndGggPj0gKHRoaXMubWluRW50cm9weSAvIDgpLAogICAgICAgICAnTm90IGVub3VnaCBlbnRyb3B5LiBNaW5pbXVtIGlzOiAnICsgdGhpcy5taW5FbnRyb3B5ICsgJyBiaXRzJyk7CiAgdGhpcy5faW5pdChlbnRyb3B5LCBub25jZSwgcGVycyk7Cn0KbW9kdWxlLmV4cG9ydHMgPSBIbWFjRFJCRzsKCkhtYWNEUkJHLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIGluaXQoZW50cm9weSwgbm9uY2UsIHBlcnMpIHsKICB2YXIgc2VlZCA9IGVudHJvcHkuY29uY2F0KG5vbmNlKS5jb25jYXQocGVycyk7CgogIHRoaXMuSyA9IG5ldyBBcnJheSh0aGlzLm91dExlbiAvIDgpOwogIHRoaXMuViA9IG5ldyBBcnJheSh0aGlzLm91dExlbiAvIDgpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5WLmxlbmd0aDsgaSsrKSB7CiAgICB0aGlzLktbaV0gPSAweDAwOwogICAgdGhpcy5WW2ldID0gMHgwMTsKICB9CgogIHRoaXMuX3VwZGF0ZShzZWVkKTsKICB0aGlzLnJlc2VlZCA9IDE7CiAgdGhpcy5yZXNlZWRJbnRlcnZhbCA9IDB4MTAwMDAwMDAwMDAwMDsgIC8vIDJeNDgKfTsKCkhtYWNEUkJHLnByb3RvdHlwZS5faG1hYyA9IGZ1bmN0aW9uIGhtYWMoKSB7CiAgcmV0dXJuIG5ldyBoYXNoLmhtYWModGhpcy5oYXNoLCB0aGlzLkspOwp9OwoKSG1hY0RSQkcucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoc2VlZCkgewogIHZhciBrbWFjID0gdGhpcy5faG1hYygpCiAgICAgICAgICAgICAgICAgLnVwZGF0ZSh0aGlzLlYpCiAgICAgICAgICAgICAgICAgLnVwZGF0ZShbIDB4MDAgXSk7CiAgaWYgKHNlZWQpCiAgICBrbWFjID0ga21hYy51cGRhdGUoc2VlZCk7CiAgdGhpcy5LID0ga21hYy5kaWdlc3QoKTsKICB0aGlzLlYgPSB0aGlzLl9obWFjKCkudXBkYXRlKHRoaXMuVikuZGlnZXN0KCk7CiAgaWYgKCFzZWVkKQogICAgcmV0dXJuOwoKICB0aGlzLksgPSB0aGlzLl9obWFjKCkKICAgICAgICAgICAgICAgLnVwZGF0ZSh0aGlzLlYpCiAgICAgICAgICAgICAgIC51cGRhdGUoWyAweDAxIF0pCiAgICAgICAgICAgICAgIC51cGRhdGUoc2VlZCkKICAgICAgICAgICAgICAgLmRpZ2VzdCgpOwogIHRoaXMuViA9IHRoaXMuX2htYWMoKS51cGRhdGUodGhpcy5WKS5kaWdlc3QoKTsKfTsKCkhtYWNEUkJHLnByb3RvdHlwZS5yZXNlZWQgPSBmdW5jdGlvbiByZXNlZWQoZW50cm9weSwgZW50cm9weUVuYywgYWRkLCBhZGRFbmMpIHsKICAvLyBPcHRpb25hbCBlbnRyb3B5IGVuYwogIGlmICh0eXBlb2YgZW50cm9weUVuYyAhPT0gJ3N0cmluZycpIHsKICAgIGFkZEVuYyA9IGFkZDsKICAgIGFkZCA9IGVudHJvcHlFbmM7CiAgICBlbnRyb3B5RW5jID0gbnVsbDsKICB9CgogIGVudHJvcHkgPSB1dGlscy50b0J1ZmZlcihlbnRyb3B5LCBlbnRyb3B5RW5jKTsKICBhZGQgPSB1dGlscy50b0J1ZmZlcihhZGQsIGFkZEVuYyk7CgogIGFzc2VydChlbnRyb3B5Lmxlbmd0aCA+PSAodGhpcy5taW5FbnRyb3B5IC8gOCksCiAgICAgICAgICdOb3QgZW5vdWdoIGVudHJvcHkuIE1pbmltdW0gaXM6ICcgKyB0aGlzLm1pbkVudHJvcHkgKyAnIGJpdHMnKTsKCiAgdGhpcy5fdXBkYXRlKGVudHJvcHkuY29uY2F0KGFkZCB8fCBbXSkpOwogIHRoaXMucmVzZWVkID0gMTsKfTsKCkhtYWNEUkJHLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uIGdlbmVyYXRlKGxlbiwgZW5jLCBhZGQsIGFkZEVuYykgewogIGlmICh0aGlzLnJlc2VlZCA+IHRoaXMucmVzZWVkSW50ZXJ2YWwpCiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc2VlZCBpcyByZXF1aXJlZCcpOwoKICAvLyBPcHRpb25hbCBlbmNvZGluZwogIGlmICh0eXBlb2YgZW5jICE9PSAnc3RyaW5nJykgewogICAgYWRkRW5jID0gYWRkOwogICAgYWRkID0gZW5jOwogICAgZW5jID0gbnVsbDsKICB9CgogIC8vIE9wdGlvbmFsIGFkZGl0aW9uYWwgZGF0YQogIGlmIChhZGQpIHsKICAgIGFkZCA9IHV0aWxzLnRvQXJyYXkoYWRkLCBhZGRFbmMpOwogICAgdGhpcy5fdXBkYXRlKGFkZCk7CiAgfQoKICB2YXIgdGVtcCA9IFtdOwogIHdoaWxlICh0ZW1wLmxlbmd0aCA8IGxlbikgewogICAgdGhpcy5WID0gdGhpcy5faG1hYygpLnVwZGF0ZSh0aGlzLlYpLmRpZ2VzdCgpOwogICAgdGVtcCA9IHRlbXAuY29uY2F0KHRoaXMuVik7CiAgfQoKICB2YXIgcmVzID0gdGVtcC5zbGljZSgwLCBsZW4pOwogIHRoaXMuX3VwZGF0ZShhZGQpOwogIHRoaXMucmVzZWVkKys7CiAgcmV0dXJuIHV0aWxzLmVuY29kZShyZXMsIGVuYyk7Cn07Cgp9LHsiLi4vZWxsaXB0aWMiOjEwMSwiaGFzaC5qcyI6MTIwfV0sMTE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSB7CiAgZG91YmxlczogewogICAgc3RlcDogNCwKICAgIHBvaW50czogWwogICAgICBbCiAgICAgICAgJ2U2MGZjZTkzYjU5ZTllYzUzMDExYWFiYzIxYzIzZTk3YjJhMzEzNjliODdhNWFlOWM0NGVlODllMmE2ZGVjMGEnLAogICAgICAgICdmN2UzNTA3Mzk5ZTU5NTkyOWRiOTlmMzRmNTc5MzcxMDEyOTY4OTFlNDRkMjNmMGJlMWYzMmNjZTY5NjE2ODIxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzgyODIyNjMyMTJjNjA5ZDllYTJhNmUzZTE3MmRlMjM4ZDhjMzljYWJkNWFjMWNhMTA2NDZlMjNmZDVmNTE1MDgnLAogICAgICAgICcxMWY4YTgwOTg1NTdkZmU0NWU4MjU2ZTgzMGI2MGFjZTYyZDYxM2FjMmY3YjE3YmVkMzFiNmVhZmY2ZTI2Y2FmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzE3NWUxNTlmNzI4Yjg2NWE3MmY5OWNjNmM2ZmM4NDZkZTBiOTM4MzNmZDIyMjJlZDczZmNlNWI1NTFlNWI3MzknLAogICAgICAgICdkMzUwNmUwZDllM2M3OWViYTRlZjk3YTUxZmY3MWY1ZWFjYjU5NTVhZGQyNDM0NWM2ZWZhNmZmZWU5ZmVkNjk1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzM2M2Q5MGQ0NDdiMDBjOWM5OWNlYWMwNWI2MjYyZWUwNTM0NDFjN2U1NTU1MmZmZTUyNmJhZDhmODNmZjQ2NDAnLAogICAgICAgICc0ZTI3M2FkZmM3MzIyMjE5NTNiNDQ1Mzk3ZjMzNjMxNDViOWE4OTAwODE5OWVjYjYyMDAzYzdmM2JlZTlkZTknCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOGI0YjVmMTY1ZGYzYzJiZThjNjI0NGI1Yjc0NTYzODg0M2U0YTc4MWExNWJjZDFiNjlmNzlhNTVkZmZkZjgwYycsCiAgICAgICAgJzRhYWQwYTZmNjhkMzA4YjRiM2ZiZDc4MTNhYjBkYTA0ZjllMzM2NTQ2MTYyZWU1NmIzZWZmMGM2NWZkNGZkMzYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzIzY2JhYTZlNWRiOTk2ZDZiZjc3MWMwMGJkNTQ4YzdiNzAwZGJmZmE2YzBlNzdiY2I2MTE1OTI1MjMyZmNkYScsCiAgICAgICAgJzk2ZTg2N2I1NTk1Y2M0OThhOTIxMTM3NDg4ODI0ZDZlMjY2MGEwNjUzNzc5NDk0ODAxZGMwNjlkOWViMzlmNWYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZWViZmE0ZDQ5M2JlYmY5OGJhNWZlZWM4MTJjMmQzYjUwOTQ3OTYxMjM3YTkxOTgzOWE1MzNlY2EwZTdkZDdmYScsCiAgICAgICAgJzVkOWE4Y2EzOTcwZWYwZjI2OWVlN2VkYWYxNzgwODlkOWFlNGNkYzNhNzExZjcxMmRkZmQ0ZmRhZTFkZTg5OTknCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTAwZjQ0ZGE2OTZlNzE2NzI3OTFkMGEwOWI3YmRlNDU5ZjEyMTVhMjliM2MwM2JmZWZkNzgzNWIzOWE0OGRiMCcsCiAgICAgICAgJ2NkZDllMTMxOTJhMDBiNzcyZWM4ZjMzMDBjMDkwNjY2YjdmZjRhMThmZjUxOTVhYzBmYmQ1Y2Q2MmJjNjVhMDknCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTEwMzFiZTI2MmM3ZWQxYjFkYzkyMjdhNGEwNGMwMTdhNzdmOGQ0NDY0ZjNiMzg1MmM4YWNkZTZlNTM0ZmQyZCcsCiAgICAgICAgJzlkNzA2MTkyODk0MDQwNWU2YmI2YTQxNzY1OTc1MzVhZjI5MmRkNDE5ZTFjZWQ3OWE0NGYxOGYyOTQ1NmEwMGQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZmVlYTZjYWU0NmQ1NWI1MzBhYzI4MzlmMTQzYmQ3ZWM1Y2Y4YjI2NmE0MWQ2YWY1MmQ1ZTY4OGQ5MDk0Njk2ZCcsCiAgICAgICAgJ2U1N2M2YjZjOTdkY2UxYmFiMDZlNGUxMmJmM2VjZDVjOTgxYzg5NTdjYzQxNDQyZDMxNTVkZWJmMTgwOTAwODgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZGE2N2E5MWQ5MTA0OWNkY2IzNjdiZTRiZTZmZmNhM2NmZWVkNjU3ZDgwODU4M2RlMzNmYTk3OGJjMWVjNmNiMScsCiAgICAgICAgJzliYWNhYTM1NDgxNjQyYmM0MWY0NjNmN2VjOTc4MGU1ZGVjN2FkYzUwOGY3NDBhMTdlOWVhOGUyN2E2OGJlMWQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNTM5MDRmYWEwYjMzNGNkZGE2ZTAwMDkzNWVmMjIxNTFlYzA4ZDBmN2JiMTEwNjlmNTc1NDVjY2MxYTM3YjdjMCcsCiAgICAgICAgJzViYzA4N2QwYmM4MDEwNmQ4OGM5ZWNjYWMyMGQzYzFjMTM5OTk5ODFlMTQ0MzQ2OTlkY2IwOTZiMDIyNzcxYzgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOGU3YmNkMGJkMzU5ODNhNzcxOWNjYTc3NjRjYTkwNjc3OWI1M2EwNDNhOWI4YmNhZWZmOTU5ZjQzYWQ4NjA0NycsCiAgICAgICAgJzEwYjc3NzBiMmEzZGE0YjM5NDAzMTA0MjBjYTk1MTQ1NzllODhlMmU0N2ZkNjhiM2VhMTAwNDdlODQ2MDM3MmEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzg1ZWVkMzRjMWNkZmYyMWU2ZDA4MTg2ODliODFiZGU3MWE3ZjRmMTgzOTdlNjY5MGE4NDFlMTU5OWM0Mzg2MicsCiAgICAgICAgJzI4M2JlYmMzZThlYTIzZjU2NzAxZGUxOWU5ZWJmNDU3NmIzMDRlZWMyMDg2ZGM4Y2MwNDU4ZmU1NTQyZTU0NTMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNmY5ZDliODAzZWNmMTkxNjM3YzczYTQ0MTNkZmExODBmZGRmODRhNTk0N2ZiYzljNjA2ZWQ4NmMzZmFjM2E3JywKICAgICAgICAnN2M4MGM2OGU2MDMwNTliYTY5YjhlMmEzMGU0NWM0ZDQ3ZWE0ZGQyZjVjMjgxMDAyZDg2ODkwNjAzYTg0MjE2MCcKICAgICAgXSwKICAgICAgWwogICAgICAgICczMzIyZDQwMTI0M2M0ZTI1ODJhMjE0N2MxMDRkNmVjYmY3NzRkMTYzZGIwZjVlNTMxM2I3ZTBlNzQyZDBlNmJkJywKICAgICAgICAnNTZlNzA3OTdlOTY2NGVmNWJmYjAxOWJjNGRkYWY5YjcyODA1ZjYzZWEyODczYWY2MjRmM2EyZTk2YzI4YjJhMCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc4NTY3MmM3ZDJkZTBiN2RhMmJkMTc3MGQ4OTY2NTg2ODc0MWIzZjlhZjc2NDMzOTc3MjFkNzRkMjgxMzRhYjgzJywKICAgICAgICAnN2M0ODFiOWI1YjQzYjJlYjYzNzQwNDliZmE2MmMyZTVlNzdmMTdmY2M1Mjk4ZjQ0YzhlMzA5NGY3OTAzMTNhNicKICAgICAgXSwKICAgICAgWwogICAgICAgICc5NDhiZjgwOWIxOTg4YTQ2YjA2YzlmMTkxOTQxM2IxMGY5MjI2YzYwZjY2ODgzMmZmZDk1OWFmNjBjODJhMGEnLAogICAgICAgICc1M2E1NjI4NTZkY2I2NjQ2ZGM2Yjc0YzVkMWMzNDE4YzZkNGRmZjA4Yzk3Y2QyYmVkNGNiN2Y4OGQ4YzhlNTg5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzYyNjBjZTdmNDYxODAxYzM0ZjA2N2NlMGYwMjg3M2E4ZjFiMGU0NGRmYzY5NzUyYWNjZWNkODE5ZjM4ZmQ4ZTgnLAogICAgICAgICdiYzJkYTgyYjZmYTViNTcxYTdmMDkwNDk3NzZhMWVmN2VjZDI5MjIzODA1MWMxOThjMWE4NGU5NWIyYjRhZTE3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2U1MDM3ZGUwYWZjMWQ4ZDQzZDgzNDg0MTRiYmY0MTAzMDQzZWM4ZjU3NWJmZGM0MzI5NTNjYzhkMjAzN2ZhMmQnLAogICAgICAgICc0NTcxNTM0YmFhOTRkM2I1ZjlmOThkMDlmYjk5MGJkZGJkNWY1YjAzZWM0ODFmMTBlMGU1ZGM4NDFkNzU1YmRhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2UwNjM3MmIwZjRhMjA3YWRmNWVhOTA1ZThmMTc3MWI0ZTdlOGRiZDFjNmE2YzViNzI1ODY2YTBhZTRmY2U3MjUnLAogICAgICAgICc3YTkwODk3NGJjZTE4Y2ZlMTJhMjdiYjJhZDVhNDg4Y2Q3NDg0YTc3ODcxMDQ4NzBiMjcwMzRmOTRlZWUzMWRkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzIxM2M3YTcxNWNkNWQ0NTM1OGQwYmJmOWRjMGNlMDIyMDRiMTBiZGRlMmEzZjU4NTQwYWQ2OTA4ZDA1NTk3NTQnLAogICAgICAgICc0YjZkYWQwYjVhZTQ2MjUwNzAxM2FkMDYyNDViYTE5MGJiNDg1MGY1ZjM2YTdlZWRkZmYyYzI3NTM0YjQ1OGYyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzRlN2MyNzJhN2FmNGIzNGU4ZGJiOTM1MmE1NDE5YTg3ZTI4MzhjNzBhZGM2MmNkZGYwY2MzYTNiMDhmYmQ1M2MnLAogICAgICAgICcxNzc0OWM3NjZjOWQwYjE4ZTE2ZmQwOWY2ZGVmNjgxYjUzMGI5NjE0YmZmN2RkMzNlMGIzOTQxODE3ZGNhYWU2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2ZlYTc0ZTNkYmU3NzhiMWIxMGYyMzhhZDYxNjg2YWE1Yzc2ZTNkYjJiZTQzMDU3NjMyNDI3ZTI4NDBmYjI3YjYnLAogICAgICAgICc2ZTA1NjhkYjliMGIxMzI5N2NmNjc0ZGVjY2I2YWY5MzEyNmI1OTZiOTczZjdiNzc3MDFkM2RiN2YyM2NiOTZmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc2ZTY0MTEzZjY3N2NmMGUxMGEyNTcwZDU5OTk2OGQzMTU0NGUxNzliNzYwNDMyOTUyYzAyYTQ0MTdiZGRlMzknLAogICAgICAgICdjOTBkZGY4ZGVlNGU5NWNmNTc3MDY2ZDcwNjgxZjBkMzVlMmEzM2QyYjU2ZDIwMzJiNGIxNzUyZDE5MDFhYzAxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2M3MzhjNTZiMDNiMmFiZTFlODI4MWJhYTc0M2Y4ZjlhOGY3Y2M2NDNkZjI2Y2JlZTNhYjE1MDI0MmJjYmI4OTEnLAogICAgICAgICc4OTNmYjU3ODk1MWFkMjUzN2Y3MThmMmVhY2JmYmJiYjgyMzE0ZWVmNzg4MGNmZTkxN2U3MzVkOTY5OWE4NGMzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2Q4OTU2MjY1NDhiNjViODFlMjY0Yzc2MzdjOTcyODc3ZDFkNzJlNWYzYTkyNTAxNDM3MmU5ZjY1ODhmNmMxNGInLAogICAgICAgICdmZWJmYWEzOGYyYmM3ZWFlNzI4ZWM2MDgxOGMzNDBlYjAzNDI4ZDYzMmJiMDY3ZTE3OTM2M2VkNzVkN2Q5OTFmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2I4ZGE5NDAzMmE5NTc1MThlYjBmNjQzMzU3MWU4NzYxY2VmZmM3MzY5M2U4NGVkZDQ5MTUwYTU2NGY2NzZlMDMnLAogICAgICAgICcyODA0ZGZhNDQ4MDVhMWU0ZDdjOTljYzk3NjI4MDhiMDkyY2M1ODRkOTVmZjNiNTExNDg4ZTRlNzRlZmRmNmU3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2U4MGZlYTE0NDQxZmIzM2E3ZDhhZGFiOTQ3NWQ3ZmFiMjAxOWVmZmI1MTU2YTc5MmYxYTExNzc4ZTNjMGRmNWQnLAogICAgICAgICdlZWQxZGU3ZjYzOGUwMDc3MWU4OTc2OGNhM2NhOTQ0NzJkMTU1ZTgwYWYzMjJlYTlmY2I0MjkxYjZhYzllYzc4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2EzMDE2OTdiZGZjZDcwNDMxM2JhNDhlNTFkNTY3NTQzZjJhMTgyMDMxZWZkNjkxNWRkYzA3YmJjYzRlMTYwNzAnLAogICAgICAgICc3MzcwZjkxY2ZiNjdlNGY1MDgxODA5ZmEyNWQ0MGY5YjE3MzVkYmY3YzBhMTFhMTMwYzBkMWEwNDFlMTc3ZWExJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzkwYWQ4NWIzODlkNmI5MzY0NjNmOWQwNTEyNjc4ZGUyMDhjYzMzMGIxMTMwN2ZmZmFiN2FjNjNlM2ZiMDRlZDQnLAogICAgICAgICdlNTA3YTM2MjBhMzgyNjFhZmZkY2JkOTQyNzIyMmI4MzlhZWZhYmUxNTgyODk0ZDk5MWQ0ZDQ4Y2I2ZWYxNTAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOGY2OGI5ZDJmNjNiNWYzMzkyMzljMWFkOTgxZjE2MmVlODhjNTY3ODcyM2VhMzM1MWI3YjQ0NGM5ZWM0YzBkYScsCiAgICAgICAgJzY2MmE5ZjJkYmEwNjM5ODZkZTFkOTBjMmI2YmUyMTVkYmJlYTJjZmU5NTUxMGJmZGYyM2NiZjc5NTAxZmZmODInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTRmM2ZiMDE3NmFmODVkNjVmZjk5ZmY5MTk4YzM2MDkxZjQ4ZTg2NTAzNjgxZTNlNjY4NmZkNTA1MzIzMWUxMScsCiAgICAgICAgJzFlNjM2MzNhZDBlZjRmMWMxNjYxYTZkMGVhMDJiNzI4NmNjN2U3NGVjOTUxZDFjOTgyMmMzODU3NmZlYjczYmMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOGMwMGZhOWIxOGViZjMzMWViOTYxNTM3YTQ1YTQyNjZjNzAzNGYyZjBkNGUxZDA3MTZmYjZlYWUyMGVhZTI5ZScsCiAgICAgICAgJ2VmYTQ3MjY3ZmVhNTIxYTFhOWRjMzQzYTM3MzZjOTc0YzJmYWRhZmE4MWUzNmM1NGU3ZDJhNGM2NjcwMjQxNGInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTdhMjZjZTY5ZGQ0ODI5ZjNlMTBjZWMwYTllOThlZDMxNDNkMDg0ZjMwOGI5MmMwOTk3ZmRkZmM2MGNiM2U0MScsCiAgICAgICAgJzJhNzU4ZTMwMGZhNzk4NGI0NzFiMDA2YTFhYWZiYjE4ZDBhNmIyYzA0MjBlODNlMjBlOGE5NDIxY2YyY2ZkNTEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYjY0NTllMGVlMzY2MmVjOGQyMzU0MGMyMjNiY2JkYzU3MWNiY2I5NjdkNzk0MjRmM2NmMjllYjNkZTZiODBlZicsCiAgICAgICAgJzY3Yzg3NmQwNmYzZTA2ZGUxZGFkZjE2ZTU2NjFkYjNjNGIzYWU2ZDQ4ZTM1YjJmZjMwYmYwYjYxYTcxYmE0NScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkNjhhODBjODI4MGJiODQwNzkzMjM0YWExMThmMDYyMzFkNmYxZmM2N2U3M2M1YTVkZWRhMGY1YjQ5Njk0M2U4JywKICAgICAgICAnZGI4YmE5ZmZmNGI1ODZkMDBjNGIxZjkxNzdiMGUyOGI1YjBlN2I4Zjc4NDUyOTVhMjk0Yzg0MjY2YjEzMzEyMCcKICAgICAgXSwKICAgICAgWwogICAgICAgICczMjRhZWQ3ZGY2NWM4MDQyNTJkYzAyNzA5MDdhMzBiMDk2MTJhZWI5NzM0NDljZWE0MDk1OTgwZmMyOGQzZDVkJywKICAgICAgICAnNjQ4YTM2NTc3NGI2MWYyZmYxMzBjMGMzNWFlYzFmNGYxOTIxM2IwYzdlMzMyODQzOTY3MjI0YWY5NmFiN2M4NCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc0ZGY5YzE0OTE5Y2RlNjFmNmQ1MWRmZGJlNWZlZTVkY2VlYzQxNDNiYThkMWNhODg4ZThiZDM3M2ZkMDU0Yzk2JywKICAgICAgICAnMzVlYzUxMDkyZDg3MjgwNTA5NzRjMjNhMWQ4NWQ0YjVkNTA2Y2RjMjg4NDkwMTkyZWJhYzA2Y2FkMTBkNWQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOWMzOTE5YTg0YTQ3NDg3MGZhZWQ4YTljMWNjNjYwMjE1MjM0ODkwNTRkN2YwMzA4Y2JmYzk5YzhhYzFmOThjZCcsCiAgICAgICAgJ2RkYjg0ZjBmNGE0ZGRkNTc1ODRmMDQ0YmYyNjBlNjQxOTA1MzI2Zjc2YzY0YzhlNmJlN2U1ZTAzZDRmYzU5OWQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNjA1NzE3MGIxZGQxMmZkZjhkZTA1ZjI4MWQ4ZTA2YmI5MWUxNDkzYThiOTFkNGNjNWEyMTM4MjEyMGE5NTllNScsCiAgICAgICAgJzlhMWFmMGIyNmE2YTQ4MDdhZGQ5YTJkYWY3MWRmMjYyNDY1MTUyYmMzZWUyNGM2NWU4OTliZTkzMjM4NWEyYTgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYTU3NmRmOGUyM2EwODQxMTQyMTQzOWE0NTE4ZGEzMTg4MGNlZjBmYmE3ZDRkZjEyYjFhNjk3M2VlY2I5NDI2NicsCiAgICAgICAgJzQwYTZiZjIwZTc2NjQwYjJjOTJiOTdhZmU1OGNkODJjNDMyZTEwYTdmNTE0ZDlmM2VlOGJlMTFhZTFiMjhlYzgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzc3OGE3OGMyOGRlYzNlMzBhMDVmZTk2MjlkZThjMzhiYjMwZDFmNWNmOWEzYTIwOGY3NjM4ODliZTU4YWQ3MScsCiAgICAgICAgJzM0NjI2ZDlhYjVhNWIyMmZmNzA5OGUxMmYyZmY1ODAwODdiMzg0MTFmZjI0YWM1NjNiNTEzZmMxZmQ5ZjQzYWMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOTI4OTU1ZWU2MzdhODQ0NjM3MjlmZDMwZTdhZmQyZWQ1Zjk2Mjc0ZTVhZDdlNWNiMDllZGE5YzA2ZDkwM2FjJywKICAgICAgICAnYzI1NjIxMDAzZDNmNDJhODI3Yjc4YTEzMDkzYTk1ZWVhYzNkMjZlZmE4YThkODNmYzUxODBlOTM1YmNkMDkxZicKICAgICAgXSwKICAgICAgWwogICAgICAgICc4NWQwZmVmM2VjNmRiMTA5Mzk5MDY0ZjNhMGUzYjI4NTU2NDViNGE5MDdhZDM1NDUyN2FhZTc1MTYzZDgyNzUxJywKICAgICAgICAnMWYwMzY0ODQxM2EzOGMwYmUyOWQ0OTZlNTgyY2Y1NjYzZTg3NTFlOTY4NzczMzE1ODJjMjM3YTI0ZWIxZjk2MicKICAgICAgXSwKICAgICAgWwogICAgICAgICdmZjJiMGRjZTk3ZWVjZTk3YzFjOWI2MDQxNzk4Yjg1ZGZkZmI2ZDg4ODJkYTIwMzA4ZjU0MDQ4MjQ1MjYwODdlJywKICAgICAgICAnNDkzZDEzZmVmNTI0YmExODhhZjRjNGRjNTRkMDc5MzZjN2I3ZWQ2ZmI5MGUyY2ViMmM5NTFlMDFmMGMyOTkwNycKICAgICAgXSwKICAgICAgWwogICAgICAgICc4MjdmYmJlNGIxZTg4MGVhOWVkMmIyZTYzMDFiMjEyYjU3ZjFlZTE0OGNkNmRkMjg3ODBlNWUyY2Y4NTZlMjQxJywKICAgICAgICAnYzYwZjljOTIzYzcyN2IwYjcxYmVmMmM2N2QxZDEyNjg3ZmY3YTYzMTg2OTAzMTY2ZDYwNWI2OGJhZWMyOTNlYycKICAgICAgXSwKICAgICAgWwogICAgICAgICdlYWE2NDlmMjFmNTFiZGJhZTdiZTRhZTM0Y2U2ZTUyMTdhNThmZGNlN2Y0N2Y5YWE3ZjNiNThmYTIxMjBlMmIzJywKICAgICAgICAnYmUzMjc5ZWQ1YmJiYjAzYWM2OWE4MGY4OTg3OWFhNWEwMWE2Yjk2NWYxM2Y3ZTU5ZDQ3YTUzMDViYTVhZDkzZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdlNGE0MmQ0M2M1Y2YxNjlkOTM5MWRmNmRlY2Y0MmVlNTQxYjZkOGYwYzlhMTM3NDAxZTIzNjMyZGRhMzRkMjRmJywKICAgICAgICAnNGQ5ZjkyZTcxNmQxYzczNTI2ZmM5OWNjZmI4YWQzNGNlODg2ZWVkZmE4ZDhlNGYxM2E3ZjcxMzFkZWJhOTQxNCcKICAgICAgXSwKICAgICAgWwogICAgICAgICcxZWM4MGZlZjM2MGNiZGQ5NTQxNjBmYWRhYjM1MmI2YjkyYjUzNTc2YTg4ZmVhNDk0NzE3M2I5ZDQzMDBiZjE5JywKICAgICAgICAnYWVlZmU5Mzc1NmI1MzQwZDJmM2E0OTU4YTdhYmJmNWUwMTQ2ZTc3ZjYyOTVhMDdiNjcxY2RjMWNjMTA3Y2VmZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICcxNDZhNzc4YzA0NjcwYzJmOTFiMDBhZjQ2ODBkZmE4YmNlMzQ5MDcxN2Q1OGJhODg5ZGRiNTkyODM2NjY0MmJlJywKICAgICAgICAnYjMxOGUwZWMzMzU0MDI4YWRkNjY5ODI3ZjlkNGIyODcwYWFhOTcxZDJmN2U1ZWQxZDBiMjk3NDgzZDgzZWZkMCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdmYTUwYzBmNjFkMjJlNWYwN2UzYWNlYmIxYWEwN2IxMjhkMDAxMjIwOWEyOGI5Nzc2ZDc2YTg3OTMxODBlZWY5JywKICAgICAgICAnNmI4NGM2OTIyMzk3ZWJhOWI3MmNkMjg3MjI4MWE2OGE1ZTY4MzI5M2E1N2EyMTNiMzhjZDhkN2QzZjRmMjgxMScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkYTFkNjFkMGNhNzIxYTExYjFhNWJmNmI3ZDg4ZTg0MjFhMjg4YWI1ZDViYmE1MjIwZTUzZDMyYjVmMDY3ZWMyJywKICAgICAgICAnODE1N2Y1NWE3Yzk5MzA2Yzc5YzA3NjYxNjFjOTFlMjk2NmE3Mzg5OWQyNzliNDhhNjU1ZmJhMGYxYWQ4MzZmMScKICAgICAgXSwKICAgICAgWwogICAgICAgICdhOGUyODJmZjBjOTcwNjkwNzIxNWZmOThlOGZkNDE2NjE1MzExZGUwNDQ2ZjFlMDYyYTczYjA2MTBkMDY0ZTEzJywKICAgICAgICAnN2Y5NzM1NWI4ZGI4MWMwOWFiZmI3ZjNjNWIyNTE1ODg4YjY3OWEzZTUwZGQ2YmQ2Y2VmN2M3MzExMWY0Y2MwYycKICAgICAgXSwKICAgICAgWwogICAgICAgICcxNzRhNTNiOWM5YTI4NTg3MmQzOWU1NmU2OTEzY2FiMTVkNTliMWZhNTEyNTA4YzAyMmYzODJkZTgzMTk0OTdjJywKICAgICAgICAnY2NjOWRjMzdhYmZjOWMxNjU3YjQxNTVmMmM0N2Y5ZTY2NDZiM2ExZDhjYjk4NTQzODNkYTEzYWMwNzlhZmE3MycKICAgICAgXSwKICAgICAgWwogICAgICAgICc5NTkzOTY5ODE5NDM3ODVjM2QzZTU3ZWRmNTAxOGNkYmUwMzllNzMwZTQ5MThiM2Q4ODRmZGZmMDk0NzViN2JhJywKICAgICAgICAnMmU3ZTU1Mjg4OGMzMzFkZDhiYTAzODZhNGI5Y2Q2ODQ5YzY1M2Y2NGM4NzA5Mzg1ZTliOGFiZjg3NTI0ZjJmZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdkMmE2M2E1MGFlNDAxZTU2ZDY0NWExMTUzYjEwOWE4ZmNjYTBhNDNkNTYxZmJhMmRiYjUxMzQwYzlkODJiMTUxJywKICAgICAgICAnZTgyZDg2ZmI2NDQzZmNiNzU2NWFlZTU4YjI5NDgyMjBhNzBmNzUwYWY0ODRjYTUyZDQxNDIxNzRkY2Y4OTQwNScKICAgICAgXSwKICAgICAgWwogICAgICAgICc2NDU4N2UyMzM1NDcxZWI4OTBlZTc4OTZkN2NmZGM4NjZiYWNiZGJkMzgzOTMxN2IzNDM2ZjliNDU2MTdlMDczJywKICAgICAgICAnZDk5ZmNkZDViZjY5MDJlMmFlOTZkZDY0NDdjMjk5YTE4NWI5MGEzOTEzM2FlYWIzNTgyOTllNWU5ZmFmNjU4OScKICAgICAgXSwKICAgICAgWwogICAgICAgICc4NDgxYmRlMGU0ZTRkODg1YjNhNTQ2ZDNlNTQ5ZGUwNDJmMGFhNmNlYTI1MGU3ZmQzNThkNmM4NmRkNDVlNDU4JywKICAgICAgICAnMzhlZTdiOGNiYTU0MDRkZDg0YTI1YmYzOWNlY2IyY2E5MDBhNzljNDJiMjYyZTU1NmQ2NGIxYjU5Nzc5MDU3ZScKICAgICAgXSwKICAgICAgWwogICAgICAgICcxMzQ2NGE1N2E3ODEwMmFhNjJiNjk3OWFlODE3ZjQ2MzdmZmNmZWQzYzRiMWNlMzBiY2Q2MzAzZjZjYWY2NjZiJywKICAgICAgICAnNjliZTE1OTAwNDYxNDU4MGVmN2U0MzM0NTNjY2IwY2E0OGYzMDBhODFkMDk0MmUxM2Y0OTVhOTA3ZjZlY2MyNycKICAgICAgXSwKICAgICAgWwogICAgICAgICdiYzRhOWRmNWI3MTNmZTJlOWFlZjQzMGJjYzFkYzk3YTBjZDljY2VkZTJmMjg1ODhjYWRhM2EwZDJkODNmMzY2JywKICAgICAgICAnZDNhODFjYTZlNzg1YzA2MzgzOTM3YWRmNGI3OThjYWE2ZThhOWZiZmE1NDdiMTZkNzU4ZDY2NjU4MWYzM2MxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhjMjhhOTdiZjgyOThiYzBkMjNkOGM3NDk0NTJhMzJlNjk0YjY1ZTMwYTk0NzJhMzk1NGFiMzBmZTUzMjRjYWEnLAogICAgICAgICc0MGEzMDQ2M2EzMzA1MTkzMzc4ZmVkZjMxZjdjYzBlYjdhZTc4NGYwNDUxY2I5NDU5ZTcxZGM3M2NiZWY5NDgyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhlYTk2NjYxMzk1MjdhOGMxZGQ5NGNlNGYwNzFmZDIzYzhiMzUwYzVhNGJiMzM3NDhjNGJhMTExZmFjY2FlMCcsCiAgICAgICAgJzYyMGVmYWJiYzhlZTI3ODJlMjRlN2MwY2ZiOTVjNWQ3MzViNzgzYmU5Y2YwZjhlOTU1YWYzNGEzMGU2MmI5NDUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZGQzNjI1ZmFlZjViYTA2MDc0NjY5NzE2YmJkMzc4OGQ4OWJkZGU4MTU5NTk5NjgwOTJmNzZjYzRlYjlhOTc4NycsCiAgICAgICAgJzdhMTg4ZmEzNTIwZTMwZDQ2MWRhMjUwMTA0NTczMWNhOTQxNDYxOTgyODgzMzk1OTM3ZjY4ZDAwYzY0NGE1NzMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZjcxMGQ3OWQ5ZWI5NjIyOTdlNGY2MjMyYjQwZThmN2ZlYjJiYzYzODE0NjE0ZDY5MmMxMmRlNzUyNDA4MjIxZScsCiAgICAgICAgJ2VhOThlNjcyMzJkM2IzMjk1ZDNiNTM1NTMyMTE1Y2NhYzg2MTJjNzIxODUxNjE3NTI2YWU0N2E5Yzc3YmZjODInCiAgICAgIF0KICAgIF0KICB9LAogIG5hZjogewogICAgd25kOiA3LAogICAgcG9pbnRzOiBbCiAgICAgIFsKICAgICAgICAnZjkzMDhhMDE5MjU4YzMxMDQ5MzQ0Zjg1Zjg5ZDUyMjliNTMxYzg0NTgzNmY5OWIwODYwMWYxMTNiY2UwMzZmOScsCiAgICAgICAgJzM4OGY3YjBmNjMyZGU4MTQwZmUzMzdlNjJhMzdmMzU2NjUwMGE5OTkzNGMyMjMxYjZjYjlmZDc1ODRiOGU2NzInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMmY4YmRlNGQxYTA3MjA5MzU1YjRhNzI1MGE1YzUxMjhlODhiODRiZGRjNjE5YWI3Y2JhOGQ1NjliMjQwZWZlNCcsCiAgICAgICAgJ2Q4YWMyMjI2MzZlNWUzZDZkNGRiYTlkZGE2YzljNDI2Zjc4ODI3MWJhYjBkNjg0MGRjYTg3ZDNhYTZhYzYyZDYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNWNiZGYwNjQ2ZTVkYjRlYWEzOThmMzY1ZjJlYTdhMGUzZDQxOWI3ZTAzMzBlMzljZTkyYmRkZWRjYWM0ZjliYycsCiAgICAgICAgJzZhZWJjYTQwYmEyNTU5NjBhMzE3OGQ2ZDg2MWE1NGRiYTgxM2QwYjgxM2ZkZTdiNWE1MDgyNjI4MDg3MjY0ZGEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYWNkNDg0ZTJmMGM3ZjY1MzA5YWQxNzhhOWY1NTlhYmRlMDk3OTY5NzRjNTdlNzE0YzM1ZjExMGRmYzI3Y2NiZScsCiAgICAgICAgJ2NjMzM4OTIxYjBhN2Q5ZmQ2NDM4MDk3MTc2M2I2MWU5YWRkODg4YTQzNzVmOGUwZjA1Y2MyNjJhYzY0ZjljMzcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzc0YWU3Zjg1OGE5NDExZTVlZjQyNDZiNzBjNjVhYWM1NjQ5OTgwYmU1YzE3ODkxYmJlYzE3ODk1ZGEwMDhjYicsCiAgICAgICAgJ2Q5ODRhMDMyZWI2YjVlMTkwMjQzZGQ1NmQ3YjdiMzY1MzcyZGIxZTJkZmY5ZDZhODMwMWQ3NGM5Yzk1M2M2MWInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZjI4NzczYzJkOTc1Mjg4YmM3ZDFkMjA1YzM3NDg2NTFiMDc1ZmJjNjYxMGU1OGNkZGVlZGRmOGYxOTQwNWFhOCcsCiAgICAgICAgJ2FiMDkwMmU4ZDg4MGE4OTc1ODIxMmViNjVjZGFmNDczYTFhMDZkYTUyMWZhOTFmMjliNWNiNTJkYjAzZWQ4MScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkNzkyNGQ0ZjdkNDNlYTk2NWE0NjVhZTMwOTVmZjQxMTMxZTU5NDZmM2M4NWY3OWU0NGFkYmNmOGUyN2UwODBlJywKICAgICAgICAnNTgxZTI4NzJhODZjNzJhNjgzODQyZWMyMjhjYzZkZWZlYTQwYWYyYmQ4OTZkM2E1YzUwNGRjOWZmNmEyNmI1OCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdkZWZkZWE0Y2RiNjc3NzUwYTQyMGZlZTgwN2VhY2YyMWViOTg5OGFlNzliOTc2ODc2NmU0ZmFhMDRhMmQ0YTM0JywKICAgICAgICAnNDIxMWFiMDY5NDYzNTE2OGU5OTdiMGVhZDJhOTNkYWVjZWQxZjRhMDRhOTVjMGY2Y2ZiMTk5ZjY5ZTU2ZWI3NycKICAgICAgXSwKICAgICAgWwogICAgICAgICcyYjRlYTBhNzk3YTQ0M2QyOTNlZjVjZmY0NDRmNDk3OWYwNmFjZmViZDdlODZkMjc3NDc1NjU2MTM4Mzg1YjZjJywKICAgICAgICAnODVlODliYzAzNzk0NWQ5M2IzNDMwODNiNWExYzg2MTMxYTAxZjYwYzUwMjY5NzYzYjU3MGM4NTRlNWMwOWI3YScKICAgICAgXSwKICAgICAgWwogICAgICAgICczNTJiYmY0YTRjZGQxMjU2NGY5M2ZhMzMyY2UzMzMzMDFkOWFkNDAyNzFmODEwNzE4MTM0MGFlZjI1YmU1OWQ1JywKICAgICAgICAnMzIxZWI0MDc1MzQ4ZjUzNGQ1OWMxODI1OWRkYTNlMWY0YTFiM2IyZTcxYjEwMzljNjdiZDNkOGJjZjgxOTk4YycKICAgICAgXSwKICAgICAgWwogICAgICAgICcyZmEyMTA0ZDZiMzhkMTFiMDIzMDAxMDU1OTg3OTEyNGU0MmFiOGRmZWZmNWZmMjlkYzljZGFkZDRlY2FjYzNmJywKICAgICAgICAnMmRlMTA2ODI5NWRkODY1YjY0NTY5MzM1YmQ1ZGQ4MDE4MWQ3MGVjZmM4ODI2NDg0MjNiYTc2YjUzMmI3ZDY3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzkyNDgyNzliMDliNGQ2OGRhYjIxYTliMDY2ZWRkYTgzMjYzYzNkODRlMDk1NzJlMjY5Y2EwY2Q3ZjU0NTM3MTQnLAogICAgICAgICc3MzAxNmY3YmYyMzRhYWRlNWQxYWE3MWJkZWEyYjFmZjNmYzBkZTJhODg3OTEyZmZlNTRhMzJjZTk3Y2IzNDAyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2RhZWQ0ZjJiZTNhOGJmMjc4ZTcwMTMyZmIwYmViNzUyMmY1NzBlMTQ0YmY2MTVjMDdlOTk2ZDQ0M2RlZTg3MjknLAogICAgICAgICdhNjlkY2U0YTdkNmM5OGU4ZDRhMWFjYTg3ZWY4ZDcwMDNmODNjMjMwZjNhZmE3MjZhYjQwZTUyMjkwYmUxYzU1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2M0NGQxMmM3MDY1ZDgxMmU4YWNmMjhkN2NiYjE5ZjkwMTFlY2Q5ZTlmZGYyODFiMGU2YTNiNWU4N2QyMmU3ZGInLAogICAgICAgICcyMTE5YTQ2MGNlMzI2Y2RjNzZjNDU5MjZjOTgyZmRhYzBlMTA2ZTg2MWVkZjYxYzVhMDM5MDYzZjBlMGU2NDgyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzZhMjQ1YmY2ZGM2OTg1MDRjODlhMjBjZmRlZDYwODUzMTUyYjY5NTMzNmMyODA2M2I2MWM2NWNiZDI2OWU2YjQnLAogICAgICAgICdlMDIyY2Y0MmMyYmQ0YTcwOGIzZjUxMjZmMTZhMjRhZDhiMzNiYTQ4ZDA0MjNiNmVmZDVlNjM0ODEwMGQ4YTgyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzE2OTdmZmE2ZmQ5ZGU2MjdjMDc3ZTNkMmZlNTQxMDg0Y2UxMzMwMGIwYmVjMTE0NmY5NWFlNTdmMGQwYmQ2YTUnLAogICAgICAgICdiOWMzOThmMTg2ODA2ZjVkMjc1NjE1MDZlNDU1NzQzM2EyY2YxNTAwOWU0OThhZTdhZGVlOWQ2M2QwMWIyMzk2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzYwNWJkYjAxOTk4MTcxOGI5ODZkMGYwN2U4MzRjYjBkOWRlYjgzNjBmZmI3ZjYxZGY5ODIzNDVlZjI3YTc0NzknLAogICAgICAgICcyOTcyZDJkZTRmOGQyMDY4MWE3OGQ5M2VjOTZmZTIzYzI2YmZhZTg0ZmIxNGRiNDNiMDFlMWU5MDU2YjhjNDknCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNjJkMTRkYWI0MTUwYmY0OTc0MDJmZGM0NWEyMTVlMTBkY2IwMWMzNTQ5NTliMTBjZmUzMWM3ZTlkODdmZjMzZCcsCiAgICAgICAgJzgwZmMwNmJkOGNjNWIwMTA5ODA4OGExOTUwZWVkMGRiMDFhYTEzMjk2N2FiNDcyMjM1ZjU2NDI0ODNiMjVlYWYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODBjNjBhZDAwNDBmMjdkYWRlNWI0YjA2YzQwOGU1NmIyYzUwZTlmNTZiOWI4YjQyNWU1NTVjMmY4NjMwOGI2ZicsCiAgICAgICAgJzFjMzgzMDNmMWNjNWMzMGYyNmU2NmJhZDdmZTcyZjcwYTY1ZWVkNGNiZTcwMjRlYjFhYTAxZjU2NDMwYmQ1N2EnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnN2E5Mzc1YWQ2MTY3YWQ1NGFhNzRjNjM0OGNjNTRkMzQ0Y2M1ZGM5NDg3ZDg0NzA0OWQ1ZWFiYjBmYTAzYzhmYicsCiAgICAgICAgJ2QwZTNmYTllY2E4NzI2OTA5NTU5ZTBkNzkyNjkwNDZiZGM1OWVhMTBjNzBjZTJiMDJkNDk5ZWMyMjRkYzdmNycKICAgICAgXSwKICAgICAgWwogICAgICAgICdkNTI4ZWNkOWI2OTZiNTRjOTA3YTllZDA0NTQ0N2E3OWJiNDA4ZWMzOWI2OGRmNTA0YmI1MWY0NTliYzNmZmM5JywKICAgICAgICAnZWVjZjQxMjUzMTM2ZTVmOTk5NjZmMjE4ODFmZDY1NmViYzQzNDU0MDVjNTIwZGJjMDYzNDY1YjUyMTQwOTkzMycKICAgICAgXSwKICAgICAgWwogICAgICAgICc0OTM3MGE0YjVmNDM0MTJlYTI1ZjUxNGU4ZWNkYWQwNTI2NjExNWU0YTdlY2IxMzg3MjMxODA4ZjhiNDU5NjMnLAogICAgICAgICc3NThmM2Y0MWFmZDZlZDQyOGIzMDgxYjA1MTJmZDYyYTU0YzNmM2FmYmI1YjY3NjRiNjUzMDUyYTEyOTQ5YzlhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc3ZjIzMDkzNmVlODhjYmJkNzNkZjkzMGQ2NDcwMmVmODgxZDgxMWUwZTE0OThlMmYxYzEzZWIxZmMzNDVkNzQnLAogICAgICAgICc5NThlZjQyYTc4ODZiNjQwMGEwODI2NmU5YmExYjM3ODk2Yzk1MzMwZDk3MDc3Y2JiZThlYjNjNzY3MWM2MGQ2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2YyZGFjOTkxY2M0Y2U0YjllYTQ0ODg3ZTVjN2MwYmNlNThjODAwNzRhYjlkNGRiYWViMjg1MzFiNzczOWY1MzAnLAogICAgICAgICdlMGRlZGM5YjNiMmY4ZGFkNGRhMWYzMmRlYzI1MzFkZjllYjVmYmViMDU5OGU0ZmQxYTExN2RiYTcwM2EzYzM3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzQ2M2IzZDlmNjYyNjIxZmIxYjRiZThmYmJlMjUyMDEyNWEyMTZjZGZjOWRhZTNkZWJjYmE0ODUwYzY5MGQ0NWInLAogICAgICAgICc1ZWQ0MzBkNzhjMjk2YzM1NDMxMTQzMDZkZDg2MjJkN2M2MjJlMjdjOTcwYTFkZTMxY2IzNzdiMDFhZjczMDdlJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2YxNmY4MDQyNDRlNDZlMmEwOTIzMmQ0YWZmM2I1OTk3NmI5OGZhYzE0MzI4YTJkMWEzMjQ5NmI0OTk5OGYyNDcnLAogICAgICAgICdjZWRhYmQ5YjgyMjAzZjdlMTNkMjA2ZmNkZjRlMzNkOTJhNmM1M2MyNmU1Y2NlMjZkNjU3OTk2MmM0ZTMxZGY2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2NhZjc1NDI3MmRjODQ1NjNiMDM1MmI3YTE0MzExYWY1NWQyNDUzMTVhY2UyN2M2NTM2OWUxNWY3MTUxZDQxZDEnLAogICAgICAgICdjYjQ3NDY2MGVmMzVmNWYyYTQxYjY0M2ZhNWU0NjA1NzVmNGZhOWI3OTYyMjMyYTVjMzJmOTA4MzE4YTA0NDc2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzI2MDBjYTRiMjgyY2I5ODZmODVkMGYxNzA5OTc5ZDhiNDRhMDljMDdjYjg2ZDdjMTI0NDk3YmM4NmYwODIxMjAnLAogICAgICAgICc0MTE5Yjg4NzUzYzE1YmQ2YTY5M2IwM2ZjZGRiYjQ1ZDVhYzZiZTc0YWI1ZjBlZjQ0YjBiZTk0NzVhN2U0YjQwJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc2MzVjYTcyZDdlODQzMmMzMzhlYzUzY2QxMjIyMGJjMDFjNDg2ODVlMjRmN2RjOGM2MDJhNzc0Njk5OGU0MzUnLAogICAgICAgICc5MWI2NDk2MDk0ODlkNjEzZDFkNWU1OTBmNzhlNmQ3NGVjZmMwNjFkNTcwNDhiYWQ5ZTc2ZjMwMmM1YjljNjEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzU0ZTMyMzlmMzI1NTcwY2RiYmY0YTg3ZGVlZThhNjZiN2YyYjMzNDc5ZDQ2OGZiYzFhNTA3NDNiZjU2Y2MxOCcsCiAgICAgICAgJzY3M2ZiODZlNWJkYTMwZmIzY2QwZWQzMDRlYTQ5YTAyM2VlMzNkMDE5N2E2OTVkMGM1ZDk4MDkzYzUzNjY4MycKICAgICAgXSwKICAgICAgWwogICAgICAgICdlM2U2YmQxMDcxYTFlOTZhZmY1Nzg1OWM4MmQ1NzBmMDMzMDgwMDY2MWQxYzk1MmY5ZmUyNjk0NjkxZDliOWU4JywKICAgICAgICAnNTljOWUwYmJhMzk0ZTc2ZjQwYzBhYTU4Mzc5YTNjYjZhNWEyMjgzOTkzZTkwYzQxNjcwMDJhZjQ5MjBlMzdmNScKICAgICAgXSwKICAgICAgWwogICAgICAgICcxODZiNDgzZDA1NmEwMzM4MjZhZTczZDg4ZjczMjk4NWM0Y2NiMWYzMmJhMzVmNGI0Y2M0N2ZkY2YwNGFhNmViJywKICAgICAgICAnM2I5NTJkMzJjNjdjZjc3ZTJlMTc0NDZlMjA0MTgwYWIyMWZiODA5MDg5NTEzOGI0YTRhNzk3Zjg2ZTgwODg4YicKICAgICAgXSwKICAgICAgWwogICAgICAgICdkZjlkNzBhNmI5ODc2Y2U1NDRjOTg1NjFmNGJlNGY3MjU0NDJlNmQyYjczN2Q5YzkxYTgzMjE3MjRjZTA5NjNmJywKICAgICAgICAnNTVlYjJkYWZkODRkNmNjZDVmODYyYjc4NWRjMzlkNGFiMTU3MjIyNzIwZWY5ZGEyMTdiOGM0NWNmMmJhMjQxNycKICAgICAgXSwKICAgICAgWwogICAgICAgICc1ZWRkNWNjMjNjNTFlODdhNDk3Y2E4MTVkNWRjZTBmOGFiNTI1NTRmODQ5ZWQ4OTk1ZGU2NGM1ZjM0Y2U3MTQzJywKICAgICAgICAnZWZhZTljOGRiYzE0MTMwNjYxZThjZWMwMzBjODlhZDBjMTNjNjZjMGQxN2EyOTA1Y2RjNzA2YWI3Mzk5YTg2OCcKICAgICAgXSwKICAgICAgWwogICAgICAgICcyOTA3OThjMmI2NDc2ODMwZGExMmZlMDIyODdlOWU3NzdhYTNmYmExYzM1NWIxN2E3MjJkMzYyZjg0NjE0ZmJhJywKICAgICAgICAnZTM4ZGE3NmRjZDQ0MDYyMTk4OGQwMGJjZjc5YWYyNWQ1YjI5YzA5NGRiMmEyMzE0NmQwMDNhZmQ0MTk0M2U3YScKICAgICAgXSwKICAgICAgWwogICAgICAgICdhZjNjNDIzYTk1ZDlmNWIzMDU0NzU0ZWZhMTUwYWMzOWNkMjk1NTJmZTM2MDI1NzM2MmRmZGVjZWY0MDUzYjQ1JywKICAgICAgICAnZjk4YTNmZDgzMWViMmI3NDlhOTNiMGU2ZjM1Y2ZiNDBjOGNkNWFhNjY3YTE1NTgxYmMyZmVkZWQ0OThmZDljNicKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NjZkYmIyNGQxMzRlNzQ1Y2NjYWEyOGM5OWJmMjc0OTA2YmI2NmIyNmRjZjk4ZGY4ZDJmZWQ1MGQ4ODQyNDlhJywKICAgICAgICAnNzQ0YjExNTJlYWNiZTVlMzhkY2M4ODc5ODBkYTM4Yjg5NzU4NGE2NWZhMDZjZWRkMmM5MjRmOTdjYmFjNTk5NicKICAgICAgXSwKICAgICAgWwogICAgICAgICc1OWRiZjQ2ZjhjOTQ3NTliYTIxMjc3YzMzNzg0ZjQxNjQ1ZjdiNDRmNmM1OTZhNThjZTkyZTY2NjE5MWFiZTNlJywKICAgICAgICAnYzUzNGFkNDQxNzVmYmMzMDBmNGVhNmNlNjQ4MzA5YTA0MmNlNzM5YTc5MTk3OThjZDg1ZTIxNmM0YTMwN2Y2ZScKICAgICAgXSwKICAgICAgWwogICAgICAgICdmMTNhZGE5NTEwM2M0NTM3MzA1ZTY5MWU3NGU5YTRhOGRkNjQ3ZTcxMWE5NWU3M2NiNjJkYzYwMThjZmQ4N2I4JywKICAgICAgICAnZTEzODE3YjQ0ZWUxNGRlNjYzYmY0YmM4MDgzNDFmMzI2OTQ5ZTIxYTZhNzVjMjU3MDc3ODQxOWJkYWY1NzMzZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NzU0YjRmYTBlOGFjZWQwNmQ0MTY3YTJjNTljY2E0Y2RhMTg2OWMwNmViYWRmYjY0ODg1NTAwMTVhODg1MjJjJywKICAgICAgICAnMzBlOTNlODY0ZTY2OWQ4MjIyNGI5NjdjMzAyMGI4ZmE4ZDFlNGUzNTBiNmNiY2M1MzdhNDhiNTc4NDExNjNhMicKICAgICAgXSwKICAgICAgWwogICAgICAgICc5NDhkY2FkZjU5OTBlMDQ4YWEzODc0ZDQ2YWJlZjlkNzAxODU4Zjk1ZGU4MDQxZDJhNjgyOGM5OWUyMjYyNTE5JywKICAgICAgICAnZTQ5MWE0MjUzN2Y2ZTU5N2Q1ZDI4YTMyMjRiMWJjMjVkZjkxNTRlZmJkMmVmMWQyY2JiYTJjYWU1MzQ3ZDU3ZScKICAgICAgXSwKICAgICAgWwogICAgICAgICc3OTYyNDE0NDUwYzc2YzE2ODljN2I0OGY4MjAyZWMzN2ZiMjI0Y2Y1YWMwYmZhMTU3MDMyOGE4YTNkN2M3N2FiJywKICAgICAgICAnMTAwYjYxMGVjNGZmYjQ3NjBkNWMxZmMxMzNlZjZmNmIxMjUwN2EwNTFmMDRhYzU3NjBhZmE1YjI5ZGI4MzQzNycKICAgICAgXSwKICAgICAgWwogICAgICAgICczNTE0MDg3ODM0OTY0YjU0YjE1YjE2MDY0NGQ5MTU0ODVhMTY5NzcyMjViODg0N2JiMGRkMDg1MTM3ZWM0N2NhJywKICAgICAgICAnZWYwYWZiYjIwNTYyMDU0NDhlMTY1MmM0OGU4MTI3ZmM2MDM5ZTc3YzE1YzIzNzhiN2U3ZDE1YTBkZTI5MzMxMScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkM2NjMzBhZDZiNDgzZTRiYzc5Y2UyYzlkZDhiYzU0OTkzZTk0N2ViOGRmNzg3YjQ0Mjk0M2QzZjdiNTI3ZWFmJywKICAgICAgICAnOGIzNzhhMjJkODI3Mjc4ZDg5YzVlOWJlOGY5NTA4YWUzYzJhZDQ2MjkwMzU4NjMwYWZiMzRkYjA0ZWVkZTBhNCcKICAgICAgXSwKICAgICAgWwogICAgICAgICcxNjI0ZDg0NzgwNzMyODYwY2UxYzc4ZmNiZmVmZTA4YjJiMjk4MjNkYjkxM2Y2NDkzOTc1YmEwZmY0ODQ3NjEwJywKICAgICAgICAnNjg2NTFjZjliNmRhOTAzZTA5MTQ0NDhjNmNkOWQ0Y2E4OTY4NzhmNTI4MmJlNGM4Y2MwNmUyYTQwNDA3ODU3NScKICAgICAgXSwKICAgICAgWwogICAgICAgICc3MzNjZTgwZGE5NTVhOGEyNjkwMmM5NTYzM2U2MmE5ODUxOTI0NzRiNWFmMjA3ZGE2ZGY3YjRmZDVmYzYxY2Q0JywKICAgICAgICAnZjU0MzVhMmJkMmJhZGY3ZDQ4NWE0ZDhiOGRiOWZjY2UzZTFlZjhlMDIwMWU0NTc4YzU0NjczYmMxZGM1ZWExZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICcxNWQ5NDQxMjU0OTQ1MDY0Y2YxYTFjMzNiYmQzYjQ5Zjg5NjZjNTA5MjE3MWU2OTllZjI1OGRmYWI4MWMwNDVjJywKICAgICAgICAnZDU2ZWIzMGI2OTQ2M2U3MjM0ZjUxMzdiNzNiODQxNzc0MzQ4MDBiYWNlYmZjNjg1ZmMzN2JiZTllZmU0MDcwZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdhMWQwZmNmMmVjOWRlNjc1YjYxMjEzNmU1Y2U3MGQyNzFjMjE0MTdjOWQyYjhhYWFhYzEzODU5OWQwNzE3OTQwJywKICAgICAgICAnZWRkNzdmNTBiY2I1YTNjYWIyZTkwNzM3MzA5NjY3ZjI2NDE0NjJhNTQwNzBmM2Q1MTkyMTJkMzljMTk3YTYyOScKICAgICAgXSwKICAgICAgWwogICAgICAgICdlMjJmYmUxNWMwYWY4Y2NjNTc4MGMwNzM1Zjg0ZGJlOWE3OTBiYWRlZTgyNDVjMDZjN2NhMzczMzFjYjM2OTgwJywKICAgICAgICAnYTg1NWJhYmFkNWNkNjBjODhiNDMwYTY5ZjUzYTFhN2EzODI4OTE1NDk2NDc5OWJlNDNkMDZkNzdkMzFkYTA2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzMxMTA5MWRkOTg2MGU4ZTIwZWUxMzQ3M2MxMTU1ZjVmNjk2MzVlMzk0NzA0ZWFhNzQwMDk0NTIyNDZjZmE5YjMnLAogICAgICAgICc2NmRiNjU2Zjg3ZDFmMDRmZmZkMWYwNDc4OGMwNjgzMDg3MWVjNWE2NGZlZWU2ODViZDgwZjBiMTI4NmQ4Mzc0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzM0YzFmZDA0ZDMwMWJlODliMzFjMDQ0MmQzZTZhYzI0ODgzOTI4YjQ1YTkzNDA3ODE4NjdkNDIzMmVjMmRiZGYnLAogICAgICAgICc5NDE0Njg1ZTk3YjFiNTk1NGJkNDZmNzMwMTc0MTM2ZDU3ZjFjZWViNDg3NDQzZGM1MzIxODU3YmE3M2FiZWUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZjIxOWVhNWQ2YjU0NzAxYzFjMTRkZTViNTU3ZWI0MmE4ZDEzZjNhYmJjZDA4YWZmY2MyYTVlNmIwNDliOGQ2MycsCiAgICAgICAgJzRjYjk1OTU3ZTgzZDQwYjBmNzNhZjQ1NDRjY2NmNmIxZjRiMDhkM2MwN2IyN2ZiOGQ4YzI5NjJhNDAwNzY2ZDEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDdiODc0MGY3NGE4ZmJhYWIxZjY4M2RiOGY0NWRlMjY1NDNhNTQ5MGJjYTYyNzA4NzIzNjkxMjQ2OWEwYjQ0OCcsCiAgICAgICAgJ2ZhNzc5NjgxMjhkOWM5MmVlMTAxMGYzMzdhZDQ3MTdlZmYxNWRiNWVkM2MwNDliMzQxMWUwMzE1ZWFhNDU5M2InCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzJkMzFjMjIyZjhmNmYwZWY4NmY3Yzk4ZDNhMzMzNWVhZDViY2QzMmFiZGQ5NDI4OWZlNGQzMDkxYWE4MjRiZicsCiAgICAgICAgJzVmMzAzMmY1ODkyMTU2ZTM5Y2NkM2Q3OTE1YjllMWRhMmU2ZGFjOWU2ZjI2ZTk2MTExOGQxNGI4NDYyZTE2NjEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzQ2MWYzNzE5MTRhYjMyNjcxMDQ1YTE1NWQ5ODMxZWE4NzkzZDc3Y2Q1OTU5MmM0MzQwZjg2Y2JjMTgzNDdiNScsCiAgICAgICAgJzhlYzBiYTIzOGI5NmJlYzBjYmRkZGNhZTBhYTQ0MjU0MmVlZTFmZjUwYzk4NmVhNmIzOTg0N2IzY2MwOTJmZjYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZWUwNzlhZGIxZGYxODYwMDc0MzU2YTI1YWEzODIwNmE2ZDcxNmIyYzNlNjc0NTNkMjg3Njk4YmFkN2IyYjJkNicsCiAgICAgICAgJzhkYzI0MTJhYWZlM2JlNWM0YzVmMzdlMGVjYzVmOWY2YTQ0Njk4OWFmMDRjNGUyNWViYWFjNDc5ZWMxYzhjMWUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTZlYzkzZTQ0N2VjODNmMDQ2N2IxODMwMmVlNjIwZjdlNjVkZTMzMTg3NGM5ZGM3MmJmZDg2MTZiYTlkYTZiNScsCiAgICAgICAgJzVlNDYzMTE1MGU2MmZiNDBkMGU4YzJhN2NhNTgwNGEzOWQ1ODE4NmE1MGU0OTcxMzk2MjY3NzhlMjViMDY3NGQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZWFhNWY5ODBjMjQ1ZjZmMDM4OTc4MjkwYWZhNzBiNmJkODg1NTg5N2Y5OGI2YWE0ODViOTYwNjVkNTM3YmQ5OScsCiAgICAgICAgJ2Y2NWY1ZDNlMjkyYzJlMDgxOWE1MjgzOTFjOTk0NjI0ZDc4NDg2OWQ3ZTZlYTY3ZmIxODA0MTAyNGVkYzA3ZGMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzhjOTQwNzU0NGFjMTMyNjkyZWUxOTEwYTAyNDM5OTU4YWUwNDg3NzE1MTM0MmVhOTZjNGI2YjM1YTQ5ZjUxJywKICAgICAgICAnZjNlMDMxOTE2OWViOWI4NWQ1NDA0Nzk1NTM5YTVlNjhmYTFmYmQ1ODNjMDY0ZDI0NjJiNjc1ZjE5NGEzZGRiNCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc0OTRmNGJlMjE5YTFhNzcwMTZkY2Q4Mzg0MzFhZWEwMDAxY2RjOGFlN2E2ZmM2ODg3MjY1NzhkOTcwMjg1N2E1JywKICAgICAgICAnNDIyNDJhOTY5MjgzYTVmMzM5YmE3ZjA3NWUzNmJhMmFmOTI1Y2UzMGQ3NjdlZDZlNTVmNGIwMzE4ODBkNTYyYycKICAgICAgXSwKICAgICAgWwogICAgICAgICdhNTk4YTgwMzBkYTZkODZjNmJjN2YyZjUxNDRlYTU0OWQyODIxMWVhNThmYWE3MGViZjRjMWU2NjVjMWZlOWI1JywKICAgICAgICAnMjA0YjVkNmY4NDgyMmMzMDdlNGI0YTcxNDA3MzdhZWMyM2ZjNjNiNjViMzVmODZhMTAwMjZkYmQyZDg2NGU2YicKICAgICAgXSwKICAgICAgWwogICAgICAgICdjNDE5MTYzNjVhYmIyYjVkMDkxOTJmNWYyZGJlYWZlYzIwOGYwMjBmMTI1NzBhMTg0ZGJhZGMzZTU4NTk1OTk3JywKICAgICAgICAnNGYxNDM1MWQwMDg3ZWZhNDlkMjQ1YjMyODk4NDk4OWQ1Y2FmOTQ1MGYzNGJmYzBlZDE2ZTk2YjU4ZmE5OTEzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzg0MWQ2MDYzYTU4NmZhNDc1YTcyNDYwNGRhMDNiYzViOTJhMmUwZDJlMGEzNmFjZmU0YzczYTU1MTQ3NDI4ODEnLAogICAgICAgICc3Mzg2N2Y1OWMwNjU5ZTgxOTA0ZjlhMWM3NTQzNjk4ZTYyNTYyZDY3NDRjMTY5Y2U3YTM2ZGUwMWE4ZDYxNTQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNWU5NWJiMzk5YTY5NzFkMzc2MDI2OTQ3Zjg5YmRlMmYyODJiMzM4MTA5MjhiZTRkZWQxMTJhYzRkNzBlMjBkNScsCiAgICAgICAgJzM5ZjIzZjM2NjgwOTA4NWJlZWJmYzcxMTgxMzEzNzc1YTk5YzlhZWQ3ZDhiYTM4YjE2MTM4NGM3NDYwMTI4NjUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzZlNDY0MWE1Mzk0OGZkNDc2YzM5ZjhhOTlmZDk3NGU1ZWMwNzU2NGI1MzE1ZDhiZjk5NDcxYmNhMGVmMmY2NicsCiAgICAgICAgJ2QyNDI0YjFiMWFiZTRlYjgxNjQyMjdiMDg1YzlhYTk0NTZlYTEzNDkzZmQ1NjNlMDZmZDUxY2Y1Njk0Yzc4ZmMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzM2NTgxZWE3YmZiYmIyOTBjMTkxYTJmNTA3YTQxY2Y1NjQzODQyMTcwZTkxNGZhZWFiMjdjMmM1NzlmNzI2JywKICAgICAgICAnZWFkMTIxNjg1OTVmZTFiZTk5MjUyMTI5YjZlNTZiMzM5MWY3YWIxNDEwY2QxZTBlZjNkY2RjYWJkMmZkYTIyNCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc4YWI4OTgxNmRhZGZkNmI2YTFmMjYzNGZjZjAwZWM4NDAzNzgxMDI1ZWQ2ODkwYzQ4NDk3NDI3MDZiZDQzZWRlJywKICAgICAgICAnNmZkY2VmMDlmMmY2ZDBhMDQ0ZTY1NGFlZjYyNDEzNmY1MDNkNDU5YzNlODk4NDU4NThhNDdhOTEyOWNkZDI0ZScKICAgICAgXSwKICAgICAgWwogICAgICAgICcxZTMzZjFhNzQ2YzljNTc3ODEzMzM0NGQ5Mjk5ZmNhYTIwYjA5MzhlOGFjZmYyNTQ0YmI0MDI4NGI4YzVmYjk0JywKICAgICAgICAnNjA2NjAyNTdkZDExYjNhYTljOGVkNjE4ZDI0ZWRmZjIzMDZkMzIwZjFkMDMwMTBlMzNhN2QyMDU3ZjNiM2I2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzg1YjdjMWRjYjNjZWMxYjdlZTdmMzBkZWQ3OWRkMjBhMGVkMWY0Y2MxOGNiY2ZjZmE0MTAzNjFmZDhmMDhmMzEnLAogICAgICAgICczZDk4YTljZGQwMjZkZDQzZjM5MDQ4ZjI1YTg4NDdmNGZjYWZhZDE4OTVkN2E2MzNjNmZlZDNjMzVlOTk5NTExJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzI5ZGY5ZmJkOGQ5ZTQ2NTA5Mjc1ZjRiMTI1ZDZkNDVkN2ZiZTlhM2I4NzhhN2FmODcyYTI4MDA2NjFhYzVmNTEnLAogICAgICAgICdiNGM0ZmU5OWM3NzVhNjA2ZTJkODg2MjE3OTEzOWZmZGE2MWRjODYxYzAxOWU1NWNkMjg3NmViMmEyN2Q4NGInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYTBiMWNhZTA2YjBhODQ3YTNmZWE2ZTY3MWFhZjhhZGZkZmU1OGNhMmY3NjgxMDVjODA4MmIyZTQ0OWZjZTI1MicsCiAgICAgICAgJ2FlNDM0MTAyZWRkZTA5NThlYzRiMTlkOTE3YTZhMjhlNmI3MmRhMTgzNGFmZjBlNjUwZjA0OTUwM2EyOTZjZjInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNGU4Y2VhZmI5YjNlOWExMzZkYzdmZjY3ZTg0MDI5NWI0OTlkZmIzYjIxMzNlNGJhMTEzZjJlNGMwZTEyMWU1JywKICAgICAgICAnY2YyMTc0MTE4YzhiNmQ3YTRiNDhmNmQ1MzRjZTVjNzk0MjJjMDg2YTYzNDYwNTAyYjgyN2NlNjJhMzI2NjgzYycKICAgICAgXSwKICAgICAgWwogICAgICAgICdkMjRhNDRlMDQ3ZTE5YjZmNWFmYjgxYzdjYTJmNjkwODBhNTA3NjY4OWEwMTA5MTlmNDI3MjVjMmI3ODlhMzNiJywKICAgICAgICAnNmZiOGQ1NTkxYjQ2NmY4ZmM2M2RiNTBmMWMwZjFjNjkwMTNmOTk2ODg3YjgyNDRkMmNkZWM0MTdhZmVhOGZhMycKICAgICAgXSwKICAgICAgWwogICAgICAgICdlYTAxNjA2YTdhNmM5Y2RkMjQ5ZmRmY2ZhY2I5OTU4NDAwMWVkZDI4YWJiYWI3N2I1MTA0ZTk4ZThlM2IzNWQ0JywKICAgICAgICAnMzIyYWY0OTA4YzczMTJiMGNmYmZlMzY5ZjdhN2IzY2RiN2Q0NDk0YmMyODIzNzAwY2ZkNjUyMTg4YTNlYTk4ZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdhZjhhZGRiZjJiNjYxYzhhNmM2MzI4NjU1ZWI5NjY1MTI1MjAwN2Q4YzVlYTMxYmU0YWQxOTZkZThjZTIxMzFmJywKICAgICAgICAnNjc0OWU2N2MwMjliODVmNTJhMDM0ZWFmZDA5NjgzNmIyNTIwODE4NjgwZTI2YWM4ZjNkZmJjZGI3MTc0OTcwMCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdlM2FlMTk3NDU2NmNhMDZjYzUxNmQ0N2UwZmIxNjVhNjc0YTNkYWJjZmNhMTVlNzIyZjBlMzQ1MGY0NTg4OScsCiAgICAgICAgJzJhZWFiZTdlNDUzMTUxMDExNjIxN2YwN2JmNGQwNzMwMGRlOTdlNDg3NGY4MWY1MzM0MjBhNzJlZWIwYmQ2YTQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNTkxZWUzNTUzMTNkOTk3MjFjZjY5OTNmZmVkMWUzZTMwMTk5M2ZmM2VkMjU4ODAyMDc1ZWE4Y2VkMzk3ZTI0NicsCiAgICAgICAgJ2IwZWE1NThhMTEzYzMwYmVhNjBmYzQ3NzU0NjBjNzkwMWZmMGIwNTNkMjVjYTJiZGVlZTk4ZjFhNGJlNWQxOTYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTEzOTZkNTVmZGE1NGM0OWYxOWFhOTczMThkOGRhNjFmYTg1ODRlNDdiMDg0OTQ1MDc3Y2YwMzI1NWI1Mjk4NCcsCiAgICAgICAgJzk5OGM3NGE4Y2Q0NWFjMDEyODlkNTgzM2E3YmViNDc0NGZmNTM2YjAxYjI1N2JlNGM1NzY3YmVhOTNlYTU3YTQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnM2M1ZDJhMWJhMzljNWExNzkwMDAwNzM4YzllMGM0MGI4ZGNkZmQ1NDY4NzU0YjY0MDU1NDAxNTdlMDE3YWE3YScsCiAgICAgICAgJ2IyMjg0Mjc5OTk1YTM0ZTJmOWQ0ZGU3Mzk2ZmMxOGI4MGY5YjhiOWZkZDI3MGY2NjYxZjc5Y2E0YzgxYmQyNTcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnY2M4NzA0YjhhNjBhMGRlZmEzYTk5YTcyOTlmMmU5YzNmYmMzOTVhZmIwNGFjMDc4NDI1ZWY4YTE3OTNjYzAzMCcsCiAgICAgICAgJ2JkZDQ2MDM5ZmVlZDE3ODgxZDFlMDg2MmRiMzQ3ZjhjZjM5NWI3NGZjNGJjZGM0ZTk0MGI3NGUzYWMxZjFiMTMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYzUzM2U0ZjdlYTg1NTVhYWNkOTc3N2FjNWNhZDI5Yjk3ZGQ0ZGVmY2NjNTNlZTdlYTIwNDExOWIyODg5YjE5NycsCiAgICAgICAgJzZmMGEyNTZiYzVlZmRmNDI5YTJmYjYyNDJmMWE0M2EyZDliOTI1YmI0YTRiM2EyNmJiOGUwZjQ1ZWI1OTYwOTYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYzE0ZjhmMmNjYjI3ZDZmMTA5ZjZkMDhkMDNjYzk2YTY5YmE4YzM0ZWVjMDdiYmNmNTY2ZDQ4ZTMzZGE2NTkzJywKICAgICAgICAnYzM1OWQ2OTIzYmIzOThmN2ZkNDQ3M2UxNmZlMWMyODQ3NWI3NDBkZDA5ODA3NWU2YzBlODY0OTExM2RjM2EzOCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdhNmNiYzMwNDZiYzZhNDUwYmFjMjQ3ODlmYTE3MTE1YTRjOTczOWVkNzVmOGYyMWNlNDQxZjcyZTBiOTBlNmVmJywKICAgICAgICAnMjFhZTdmNDY4MGU4ODliYjEzMDYxOWUyYzBmOTVhMzYwY2ViNTczYzcwNjAzMTM5ODYyYWZkNjE3ZmE5YjlmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzM0N2Q2ZDlhMDJjNDg5MjdlYmZiODZjMTM1OWIxY2FmMTMwYTNjMDI2N2QxMWNlNjM0NGIzOWY5OWQ0M2NjMzgnLAogICAgICAgICc2MGVhN2Y2MWEzNTM1MjRkMWM5ODdmNmVjZWM5MmYwODZkNTY1YWI2ODc4NzBjYjEyNjg5ZmYxZTMxYzc0NDQ4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2RhNjU0NWQyMTgxZGI4ZDk4M2Y3ZGNiMzc1ZWY1ODY2ZDQ3YzY3YjFiZjMxYzhjZjg1NWVmNzQzN2I3MjY1NmEnLAogICAgICAgICc0OWI5NjcxNWFiNjg3OGE3OWU3OGYwN2NlNTY4MGM1ZDY2NzMwNTFiNDkzNWJkODk3ZmVhODI0Yjc3ZGMyMDhhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2M0MDc0N2NjOWQwMTJjYjFhMTNiODE0ODMwOWM2ZGU3ZWMyNWQ2OTQ1ZDY1NzE0NmI5ZDU5OTRiOGZlYjExMTEnLAogICAgICAgICc1Y2E1NjA3NTNiZTJhMTJmYzZkZTZjYWYyY2I0ODk1NjVkYjkzNjE1NmI5NTE0ZTFiYjVlODMwMzdlMGZhMmQ0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzRlNDJjOGVjODJjOTk3OThjY2YzYTYxMGJlODcwZTc4MzM4YzdmNzEzMzQ4YmQzNGM4MjAzZWY0MDM3ZjM1MDInLAogICAgICAgICc3NTcxZDc0ZWU1ZTBmYjkyYTdhOGIzM2EwNzc4MzM0MWE1NDkyMTQ0Y2M1NGJjYzQwYTk0NDczNjkzNjA2NDM3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzM3NzVhYjcwODliYzZhZjgyM2FiYTJlMWFmNzBiMjM2ZDI1MWNhZGIwYzg2NzQzMjg3NTIyYTFiM2IwZGVkZWEnLAogICAgICAgICdiZTUyZDEwN2JjZmEwOWQ4YmNiOTczNmE4MjhjZmE3ZmFjOGRiMTdiZjdhNzZhMmM0MmFkOTYxNDA5MDE4Y2Y3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2NlZTMxY2JmN2UzNGVjMzc5ZDk0ZmI4MTRkM2Q3NzVhZDk1NDU5NWQxMzE0YmE4ODQ2OTU5ZTNlODJmNzRlMjYnLAogICAgICAgICc4ZmQ2NGExNGMwNmI1ODljMjZiOTQ3YWUyYmNmNmJmYTAxNDllZjBiZTE0ZWQ0ZDgwZjQ0OGEwMWM0M2IxYzZkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2I0ZjllYWVhMDliNjkxNzYxOWY2ZWE2YTRlYjU0NjRlZmRkYjU4ZmQ0NWIxZWJlZmNkYzFhMDFkMDhiNDc5ODYnLAogICAgICAgICczOWU1Yzk5MjViNWE1NGIwNzQzM2E0ZjE4YzYxNzI2ZjhiYjEzMWMwMTJjYTU0MmViMjRhOGFjMDcyMDA2ODJhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2Q0MjYzZGZjM2QyZGY5MjNhMDE3OWE0ODk2NmQzMGNlODRlMjUxNWFmYzNkY2NjMWI3NzkwNzc5MmViY2M2MGUnLAogICAgICAgICc2MmRmYWYwN2EwZjc4ZmViMzBlMzBkNjI5NTg1M2NlMTg5ZTEyNzc2MGFkNmNmN2ZhZTE2NGUxMjJhMjA4ZDU0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzQ4NDU3NTI0ODIwZmE2NWE0ZjhkMzVlYjY5MzA4NTdjMDAzMmFjYzBhNGEyZGU0MjIyMzNlZWRhODk3NjEyYzQnLAogICAgICAgICcyNWE3NDhhYjM2Nzk3OWQ5ODczM2MzOGExZmExYzJlN2RjNmNjMDdkYjJkNjBhOWFlN2E3NmFhYTQ5YmQwZjc3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2RmZWVlZjE4ODExMDFmMmNiMTE2NDRmM2EyYWZkZmMyMDQ1ZTE5OTE5MTUyOTIzZjM2N2ExNzY3YzExY2NlZGEnLAogICAgICAgICdlY2ZiNzA1NmNmMWRlMDQyZjk0MjBiYWIzOTY3OTNjMGMzOTBiZGU3NGI0YmJkZmYxNmE4M2FlMDlhOWE3NTE3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzZkN2VmNmIxNzU0M2Y4MzczYzU3M2Y0NGUxZjM4OTgzNWQ4OWJjYmM2MDYyY2VkMzZjODJkZjgzYjhmYWU4NTknLAogICAgICAgICdjZDQ1MGVjMzM1NDM4OTg2ZGZlZmExMGM1N2ZlYTliY2M1MjFhMDk1OWIyZDgwYmJmNzRiMTkwZGNhNzEyZDEwJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2U3NTYwNWQ1OTEwMmE1YTI2ODQ1MDBkM2I5OTFmMmUzZjNjODhiOTMyMjU1NDcwMzVhZjI1YWY2NmUwNDU0MWYnLAogICAgICAgICdmNWM1NDc1NGE4ZjcxZWU1NDBiOWI0ODcyODQ3M2UzMTRmNzI5YWM1MzA4YjA2OTM4MzYwOTkwZTJiZmFkMTI1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2ViOTg2NjBmNGM0ZGZhYTA2YTJiZTQ1M2Q1MDIwYmM5OWEwYzJlNjBhYmUzODg0NTdkZDQzZmVmYjFlZDYyMGMnLAogICAgICAgICc2Y2I5YTg4NzZkOWNiODUyMDYwOWFmM2FkZDI2Y2QyMGEwYTdjZDhhOTQxMTEzMWNlODVmNDQxMDAwOTkyMjNlJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzEzZTg3YjAyN2Q4NTE0ZDM1OTM5ZjJlNjg5MmIxOTkyMjE1NDU5Njk0MTg4ODMzNmRjMzU2M2UzYjhkYmE5NDInLAogICAgICAgICdmZWY1YTNjNjgwNTlhNmRlYzVkNjI0MTE0YmYxZTkxYWFjMmI5ZGE1NjhkNmFiZWIyNTcwZDU1NjQ2YjhhZGYxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2VlMTYzMDI2ZTlmZDZmZTAxN2MzOGYwNmE1YmU2ZmMxMjU0MjRiMzcxY2UyNzA4ZTdiZjQ0OTE2OTFlNTc2NGEnLAogICAgICAgICcxYWNiMjUwZjI1NWRkNjFjNDNkOTRjY2M2NzBkMGY1OGY0OWFlM2ZhMTViOTY2MjNlNTQzMGRhMGFkNmM2MmIyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2IyNjhmNWVmOWFkNTFlNGQ3OGRlM2E3NTBjMmRjODliMWU2MjZkNDM1MDU4Njc5OTk5MzJlNWRiMzNhZjNkODAnLAogICAgICAgICc1ZjMxMGQ0YjNjOTliOWViYjE5Zjc3ZDQxYzFkZWUwMThjZjBkMzRmZDQxOTE2MTQwMDNlOTQ1YTEyMTZlNDIzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2ZmMDdmMzExOGE5ZGYwMzVlOWZhZDg1ZWI2YzdiZmU0MmIwMmYwMWNhOTljZWVhM2JmN2ZmZGJhOTNjNDc1MGQnLAogICAgICAgICc0MzgxMzZkNjAzZTg1OGEzYTVjNDQwYzM4ZWNjYmFkZGMxZDI5NDIxMTRlMmVkZGQ0NzQwZDA5OGNlZDFmMGQ4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhkOGI5ODU1YzdjMDUyYTM0MTQ2ZmQyMGZmYjY1OGJlYTRiOWY2OWUwZDgyNWViZWMxNmU4YzNjZTJiNTI2YTEnLAogICAgICAgICdjZGI1NTllZWRjMmQ3OWY5MjZiYWY0NGZiODRlYTRkNDRiY2Y1MGZlZTUxZDdjZWIzMGUyZTdmNDYzMDM2NzU4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzUyZGIwYjUzODRkZmJmMDViZmE5ZDQ3MmQ3YWUyNmRmZTRiODUxY2VjYTkxYjFlYmE1NDI2MzE4MGRhMzJiNjMnLAogICAgICAgICdjM2I5OTdkMDUwZWU1ZDQyM2ViYWY2NmE2ZGI5ZjU3YjMxODBjOTAyODc1Njc5ZGU5MjRiNjlkODRhN2IzNzUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTYyZjk0OTBkM2Q1MWRhNjM5NWVmZDI0ZTgwOTE5Y2M3ZDBmMjljM2YzZmE0OGM2ZmZmNTQzYmVjYmQ0MzM1MicsCiAgICAgICAgJzZkODlhZDdiYTQ4NzZiMGIyMmMyY2EyODBjNjgyODYyZjM0MmM4NTkxZjFkYWY1MTcwZTA3YmZkOWNjYWZhN2QnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnN2YzMGVhMjQ3NmIzOTliNDk1NzUwOWM4OGY3N2QwMTkxYWZhMmZmNWNiN2IxNGZkNmQ4ZTdkNjVhYWFiMTE5MycsCiAgICAgICAgJ2NhNWVmN2Q0YjIzMWM5NGMzYjE1Mzg5YTVmNjMxMWU5ZGFmZjdiYjY3YjEwM2U5ODgwZWY0YmZmNjM3YWNhZWMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNTA5OGZmMWUxZDlmMTRmYjQ2YTIxMGZhZGE2YzkwM2ZlZjBmYjdiNGExZGQxZDlhYzYwYTAzNjE4MDBiN2EwMCcsCiAgICAgICAgJzk3MzExNDFkODFmYzhmODA4NGQzN2M2ZTc1NDIwMDZiM2VlMWI0MGQ2MGRmZTUzNjJhNWIxMzJmZDE3ZGRjMCcKICAgICAgXSwKICAgICAgWwogICAgICAgICczMmI3OGM3ZGU5ZWU1MTJhNzI4OTViZTZiOWNiZWZhNmUyZjNjNGNjY2U0NDVjOTZiOWYyYzgxZTI3NzhhZDU4JywKICAgICAgICAnZWUxODQ5ZjUxM2RmNzFlMzJlZmMzODk2ZWUyODI2MGM3M2JiODA1NDdhZTIyNzViYTQ5NzIzNzc5NGM4NzUzYycKICAgICAgXSwKICAgICAgWwogICAgICAgICdlMmNiNzRmZGRjOGU5ZmJjZDA3NmVlZjJhN2M3MmIwY2UzN2Q1MGYwODI2OWRmYzA3NGI1ODE1NTA1NDdhNGY3JywKICAgICAgICAnZDNhYTJlZDcxYzlkZDIyNDdhNjJkZjA2MjczNmViMGJhZGRlYTllMzYxMjJkMmJlODY0MWFiY2IwMDVjYzRhNCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc4NDM4NDQ3NTY2ZDRkN2JlZGFkYzI5OTQ5NmFiMzU3NDI2MDA5YTM1ZjIzNWNiMTQxYmUwZDk5Y2QxMGFlM2E4JywKICAgICAgICAnYzRlMTAyMDkxNjk4MGE0ZGE1ZDAxYWM1ZTZhZDMzMDczNGVmMGQ3OTA2NjMxYzRmMjM5MDQyNmIyZWRkNzkxZicKICAgICAgXSwKICAgICAgWwogICAgICAgICc0MTYyZDQ4OGI4OTQwMjAzOWI1ODRjNmZjNmMzMDg4NzA1ODdkOWM0NmY2NjBiODc4YWI2NWM4MmM3MTFkNjdlJywKICAgICAgICAnNjcxNjNlOTAzMjM2Mjg5Zjc3NmYyMmMyNWZiOGEzYWZjMTczMmYyYjg0YjRlOTVkYmRhNDdhZTVhMDg1MjY0OScKICAgICAgXSwKICAgICAgWwogICAgICAgICczZmFkM2ZhODRjYWYwZjM0ZjBmODliZmQyZGNmNTRmYzE3NWQ3NjdhZWMzZTUwNjg0ZjNiYTRhNGJmNWY2ODNkJywKICAgICAgICAnY2QxYmM3Y2I2Y2M0MDdiYjJmMGNhNjQ3YzcxOGE3MzBjZjcxODcyZTdkMGQyYTUzZmEyMGVmY2RmZTYxODI2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzY3NGYyNjAwYTMwMDdhMDA1NjhjMWE3Y2UwNWQwODE2YzFmYjg0YmYxMzcwNzk4ZjFjNjk1MzJmYWViMWE4NmInLAogICAgICAgICcyOTlkMjFmOTQxM2YzM2IzZWRmNDNiMjU3MDA0NTgwYjcwZGI1N2RhMGIxODIyNTllMDllZWNjNjllMGQzOGE1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2QzMmY0ZGE1NGFkZTc0YWJiODFiODE1YWQxZmIzYjI2M2Q4MmQ2YzY5MjcxNGJjZmY4N2QyOWJkNWVlOWYwOGYnLAogICAgICAgICdmOTQyOWU3MzhiOGU1M2I5NjhlOTkwMTZjMDU5NzA3NzgyZTE0ZjQ1MzUzNTlkNTgyZmM0MTY5MTBiM2VlYTg3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzMwZTRlNjcwNDM1Mzg1NTU2ZTU5MzY1NzEzNTg0NWQzNmZiYjY5MzFmNzJiMDhjYjFlZDk1NGYxZTNjZTNmZjYnLAogICAgICAgICc0NjJmOWJjZTYxOTg5ODYzODQ5OTM1MDExM2JiYzliMTBhODc4ZDM1ZGE3MDc0MGRjNjk1YTU1OWViODhkYjdiJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2JlMjA2MjAwM2M1MWNjMzAwNDY4MjkwNDMzMGU0ZGVlN2YzZGNkMTBiMDFlNTgwYmYxOTcxYjA0ZDRjYWQyOTcnLAogICAgICAgICc2MjE4OGJjNDlkNjFlNTQyODU3M2Q0OGE3NGUxYzY1NWIxYzYxMDkwOTA1NjgyYTBkNTU1OGVkNzJkY2NiOWJjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzkzMTQ0NDIzYWNlMzQ1MWVkMjllMGZiOWFjMmFmMjExY2I2ZTg0YTYwMWRmNTk5M2M0MTk4NTlmZmY1ZGYwNGEnLAogICAgICAgICc3YzEwZGZiMTY0YzM0MjVmNWM3MWEzZjlkNzk5MjAzOGYxMDY1MjI0ZjcyYmI5ZDFkOTAyYTZkMTMwMzdiNDdjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2IwMTVmODA0NGY1ZmNiZGNmMjFjYTI2ZDZjMzRmYjgxOTc4MjkyMDVjN2I3ZDJhN2NiNjY0MThjMTU3YjExMmMnLAogICAgICAgICdhYjhjMWUwODZkMDRlODEzNzQ0YTY1NWIyZGY4ZDVmODNiM2NkYzZmYWEzMDg4YzFkM2FlYTE0NTRlM2ExZDVmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2Q1ZTllMWRhNjQ5ZDk3ZDg5ZTQ4NjgxMTdhNDY1YTNhNGY4YTE4ZGU1N2ExNDBkMzZiM2YyYWYzNDFhMjFiNTInLAogICAgICAgICc0Y2IwNDQzN2YzOTFlZDczMTExYTEzY2MxZDRkZDBkYjE2OTM0NjVjMjI0MDQ4MGQ4OTU1ZTg1OTJmMjc0NDdhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2QzYWU0MTA0N2RkN2NhMDY1ZGJmOGVkNzdiOTkyNDM5OTgzMDA1Y2Q3MmUxNmQ2Zjk5NmE1MzE2ZDM2OTY2YmInLAogICAgICAgICdiZDFhZWIyMWFkMjJlYmIyMmExMGYwMzAzNDE3YzZkOTY0ZjhjZGQ3ZGYwYWNhNjE0YjEwZGMxNGQxMjVhYzQ2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzQ2M2UyNzYzZDg4NWY5NThmYzY2Y2RkMjI4MDBmMGE0ODcxOTdkMGE4MmUzNzdiNDlmODBhZjg3Yzg5N2IwNjUnLAogICAgICAgICdiZmVmYWNkYjBlNWQwZmQ3ZGYzYTMxMWE5NGRlMDYyYjI2YjgwYzYxZmJjOTc1MDhiNzk5OTI2NzFlZjdjYTdmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc5ODVmZGZkMTI3YzA1NjdjNmY1M2VjMWJiNjNlYzMxNThlNTk3YzQwYmZlNzQ3YzgzY2RkZmM5MTA2NDE5MTcnLAogICAgICAgICc2MDNjMTJkYWYzZDk4NjJlZjJiMjVmZTFkZTI4OWFlZDI0ZWQyOTFlMGVjNjcwODcwM2E1YmQ1NjdmMzJlZDAzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc0YTFhZDZiNWY3NmUzOWRiMmRkMjQ5NDEwZWFjN2Y5OWU3NGM1OWNiODNkMmQwZWQ1ZmYxNTQzZGE3NzAzZTknLAogICAgICAgICdjYzYxNTdlZjE4YzljNjNjZDYxOTNkODM2MzFiYmVhMDA5M2UwOTY4OTQyZThjMzNkNTczN2ZkNzkwZTBkYjA4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzMwNjgyYTUwNzAzMzc1ZjYwMmQ0MTY2NjRiYTE5YjdmYzliYWI0MmM3Mjc0NzQ2M2E3MWQwODk2YjIyZjZkYTMnLAogICAgICAgICc1NTNlMDRmNmIwMThiNGZhNmM4ZjM5ZTdmMzExZDMxNzYyOTBkMGUwZjE5Y2E3M2YxNzcxNGQ5OTc3YTIyZmY4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzllMjE1OGYwZDdjMGQ1ZjI2YzM3OTFlZmVmYTc5NTk3NjU0ZTdhMmIyNDY0ZjUyYjFlZTZjMTM0Nzc2OWVmNTcnLAogICAgICAgICc3MTJmY2RkMWI5MDUzZjA5MDAzYTM0ODFmYTc3NjJlOWZmZDdjOGVmMzVhMzg1MDllMmZiZjI2MjkwMDgzNzMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTc2ZTI2OTg5YTQzYzljZmViYTQwMjljMjAyNTM4YzI4MTcyZTU2NmUzYzRmY2U3MzIyODU3ZjNiZTMyN2Q2NicsCiAgICAgICAgJ2VkOGNjOWQwNGIyOWViODc3ZDI3MGI0ODc4ZGM0M2MxOWFlZmQzMWY0ZWVlMDllZTdiNDc4MzRjMWZhNGIxYzMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzVkNDZlZmVhMzc3MWU2ZTY4YWJiODlhMTNhZDc0N2VjZjE4OTIzOTNkZmM0ZjFiNzAwNDc4OGM1MDM3NGRhOCcsCiAgICAgICAgJzk4NTIzOTBhOTk1MDc2NzlmZDBiODZmZDJiMzlhODY4ZDdlZmMyMjE1MTM0NmUxYTNjYTQ3MjY1ODZhNmJlZDgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODA5YTIwYzY3ZDY0OTAwZmZiNjk4YzRjODI1ZjZkNWYyMzEwZmIwNDUxYzg2OTM0NWI3MzE5ZjY0NTYwNTcyMScsCiAgICAgICAgJzllOTk0OTgwZDk5MTdlMjJiNzZiMDYxOTI3ZmEwNDE0M2QwOTZjY2M1NDk2M2U2YTVlYmZhNWYzZjhlMjg2YzEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMWIzODkwM2E0M2Y3ZjExNGVkNDUwMGI0ZWFjNzA4M2ZkZWZlY2UxY2YyOWM2MzUyOGQ1NjM0NDZmOTcyYzE4MCcsCiAgICAgICAgJzQwMzZlZGM5MzFhNjBhZTg4OTM1M2Y3N2ZkNTNkZTRhMjcwOGIyNmI2ZjVkYTcyYWQzMzk0MTE5ZGFmNDA4ZjknCiAgICAgIF0KICAgIF0KICB9Cn07Cgp9LHt9XSwxMTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgdXRpbHMgPSBleHBvcnRzOwp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwoKdXRpbHMuYXNzZXJ0ID0gZnVuY3Rpb24gYXNzZXJ0KHZhbCwgbXNnKSB7CiAgaWYgKCF2YWwpCiAgICB0aHJvdyBuZXcgRXJyb3IobXNnIHx8ICdBc3NlcnRpb24gZmFpbGVkJyk7Cn07CgpmdW5jdGlvbiB0b0FycmF5KG1zZywgZW5jKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkobXNnKSkKICAgIHJldHVybiBtc2cuc2xpY2UoKTsKICBpZiAoIW1zZykKICAgIHJldHVybiBbXTsKICB2YXIgcmVzID0gW107CiAgaWYgKHR5cGVvZiBtc2cgIT09ICdzdHJpbmcnKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykKICAgICAgcmVzW2ldID0gbXNnW2ldIHwgMDsKICAgIHJldHVybiByZXM7CiAgfQogIGlmICghZW5jKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgYyA9IG1zZy5jaGFyQ29kZUF0KGkpOwogICAgICB2YXIgaGkgPSBjID4+IDg7CiAgICAgIHZhciBsbyA9IGMgJiAweGZmOwogICAgICBpZiAoaGkpCiAgICAgICAgcmVzLnB1c2goaGksIGxvKTsKICAgICAgZWxzZQogICAgICAgIHJlcy5wdXNoKGxvKTsKICAgIH0KICB9IGVsc2UgaWYgKGVuYyA9PT0gJ2hleCcpIHsKICAgIG1zZyA9IG1zZy5yZXBsYWNlKC9bXmEtejAtOV0rL2lnLCAnJyk7CiAgICBpZiAobXNnLmxlbmd0aCAlIDIgIT09IDApCiAgICAgIG1zZyA9ICcwJyArIG1zZzsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSArPSAyKQogICAgICByZXMucHVzaChwYXJzZUludChtc2dbaV0gKyBtc2dbaSArIDFdLCAxNikpOwogIH0KICByZXR1cm4gcmVzOwp9CnV0aWxzLnRvQXJyYXkgPSB0b0FycmF5OwoKZnVuY3Rpb24gemVybzIod29yZCkgewogIGlmICh3b3JkLmxlbmd0aCA9PT0gMSkKICAgIHJldHVybiAnMCcgKyB3b3JkOwogIGVsc2UKICAgIHJldHVybiB3b3JkOwp9CnV0aWxzLnplcm8yID0gemVybzI7CgpmdW5jdGlvbiB0b0hleChtc2cpIHsKICB2YXIgcmVzID0gJyc7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspCiAgICByZXMgKz0gemVybzIobXNnW2ldLnRvU3RyaW5nKDE2KSk7CiAgcmV0dXJuIHJlczsKfQp1dGlscy50b0hleCA9IHRvSGV4OwoKdXRpbHMuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKGFyciwgZW5jKSB7CiAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICByZXR1cm4gdG9IZXgoYXJyKTsKICBlbHNlCiAgICByZXR1cm4gYXJyOwp9OwoKLy8gUmVwcmVzZW50IG51bSBpbiBhIHctTkFGIGZvcm0KZnVuY3Rpb24gZ2V0TkFGKG51bSwgdykgewogIHZhciBuYWYgPSBbXTsKICB2YXIgd3MgPSAxIDw8ICh3ICsgMSk7CiAgdmFyIGsgPSBudW0uY2xvbmUoKTsKICB3aGlsZSAoay5jbXBuKDEpID49IDApIHsKICAgIHZhciB6OwogICAgaWYgKGsuaXNPZGQoKSkgewogICAgICB2YXIgbW9kID0gay5hbmRsbih3cyAtIDEpOwogICAgICBpZiAobW9kID4gKHdzID4+IDEpIC0gMSkKICAgICAgICB6ID0gKHdzID4+IDEpIC0gbW9kOwogICAgICBlbHNlCiAgICAgICAgeiA9IG1vZDsKICAgICAgay5pc3Vibih6KTsKICAgIH0gZWxzZSB7CiAgICAgIHogPSAwOwogICAgfQogICAgbmFmLnB1c2goeik7CgogICAgLy8gT3B0aW1pemF0aW9uLCBzaGlmdCBieSB3b3JkIGlmIHBvc3NpYmxlCiAgICB2YXIgc2hpZnQgPSAoay5jbXBuKDApICE9PSAwICYmIGsuYW5kbG4od3MgLSAxKSA9PT0gMCkgPyAodyArIDEpIDogMTsKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2hpZnQ7IGkrKykKICAgICAgbmFmLnB1c2goMCk7CiAgICBrLml1c2hybihzaGlmdCk7CiAgfQoKICByZXR1cm4gbmFmOwp9CnV0aWxzLmdldE5BRiA9IGdldE5BRjsKCi8vIFJlcHJlc2VudCBrMSwgazIgaW4gYSBKb2ludCBTcGFyc2UgRm9ybQpmdW5jdGlvbiBnZXRKU0YoazEsIGsyKSB7CiAgdmFyIGpzZiA9IFsKICAgIFtdLAogICAgW10KICBdOwoKICBrMSA9IGsxLmNsb25lKCk7CiAgazIgPSBrMi5jbG9uZSgpOwogIHZhciBkMSA9IDA7CiAgdmFyIGQyID0gMDsKICB3aGlsZSAoazEuY21wbigtZDEpID4gMCB8fCBrMi5jbXBuKC1kMikgPiAwKSB7CgogICAgLy8gRmlyc3QgcGhhc2UKICAgIHZhciBtMTQgPSAoazEuYW5kbG4oMykgKyBkMSkgJiAzOwogICAgdmFyIG0yNCA9IChrMi5hbmRsbigzKSArIGQyKSAmIDM7CiAgICBpZiAobTE0ID09PSAzKQogICAgICBtMTQgPSAtMTsKICAgIGlmIChtMjQgPT09IDMpCiAgICAgIG0yNCA9IC0xOwogICAgdmFyIHUxOwogICAgaWYgKChtMTQgJiAxKSA9PT0gMCkgewogICAgICB1MSA9IDA7CiAgICB9IGVsc2UgewogICAgICB2YXIgbTggPSAoazEuYW5kbG4oNykgKyBkMSkgJiA3OwogICAgICBpZiAoKG04ID09PSAzIHx8IG04ID09PSA1KSAmJiBtMjQgPT09IDIpCiAgICAgICAgdTEgPSAtbTE0OwogICAgICBlbHNlCiAgICAgICAgdTEgPSBtMTQ7CiAgICB9CiAgICBqc2ZbMF0ucHVzaCh1MSk7CgogICAgdmFyIHUyOwogICAgaWYgKChtMjQgJiAxKSA9PT0gMCkgewogICAgICB1MiA9IDA7CiAgICB9IGVsc2UgewogICAgICB2YXIgbTggPSAoazIuYW5kbG4oNykgKyBkMikgJiA3OwogICAgICBpZiAoKG04ID09PSAzIHx8IG04ID09PSA1KSAmJiBtMTQgPT09IDIpCiAgICAgICAgdTIgPSAtbTI0OwogICAgICBlbHNlCiAgICAgICAgdTIgPSBtMjQ7CiAgICB9CiAgICBqc2ZbMV0ucHVzaCh1Mik7CgogICAgLy8gU2Vjb25kIHBoYXNlCiAgICBpZiAoMiAqIGQxID09PSB1MSArIDEpCiAgICAgIGQxID0gMSAtIGQxOwogICAgaWYgKDIgKiBkMiA9PT0gdTIgKyAxKQogICAgICBkMiA9IDEgLSBkMjsKICAgIGsxLml1c2hybigxKTsKICAgIGsyLml1c2hybigxKTsKICB9CgogIHJldHVybiBqc2Y7Cn0KdXRpbHMuZ2V0SlNGID0gZ2V0SlNGOwoKZnVuY3Rpb24gY2FjaGVkUHJvcGVydHkob2JqLCBjb21wdXRlcikgewogIHZhciBuYW1lID0gY29tcHV0ZXIubmFtZTsKICB2YXIga2V5ID0gJ18nICsgbmFtZTsKICBvYmoucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24gY2FjaGVkUHJvcGVydHkoKSB7CiAgICByZXR1cm4gdGhpc1trZXldICE9PSB1bmRlZmluZWQgPyB0aGlzW2tleV0gOgogICAgICAgICAgIHRoaXNba2V5XSA9IGNvbXB1dGVyLmNhbGwodGhpcyk7CiAgfTsKfQp1dGlscy5jYWNoZWRQcm9wZXJ0eSA9IGNhY2hlZFByb3BlcnR5OwoKZnVuY3Rpb24gcGFyc2VCeXRlcyhieXRlcykgewogIHJldHVybiB0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnID8gdXRpbHMudG9BcnJheShieXRlcywgJ2hleCcpIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzOwp9CnV0aWxzLnBhcnNlQnl0ZXMgPSBwYXJzZUJ5dGVzOwoKZnVuY3Rpb24gaW50RnJvbUxFKGJ5dGVzKSB7CiAgcmV0dXJuIG5ldyBCTihieXRlcywgJ2hleCcsICdsZScpOwp9CnV0aWxzLmludEZyb21MRSA9IGludEZyb21MRTsKCgp9LHsiYm4uanMiOjQyfV0sMTE3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHM9ewogICJfYXJncyI6IFsKICAgIFsKICAgICAgImVsbGlwdGljQF42LjAuMCIsCiAgICAgICIvaG9tZS92c2lsdmEvcHQtaW5vdmFjYW8vcmV0aGluay1wcm9qZWN0L2Rldi1ydW50aW1lLWNvcmUvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnktc2lnbiIKICAgIF0KICBdLAogICJfZnJvbSI6ICJlbGxpcHRpY0A+PTYuMC4wIDw3LjAuMCIsCiAgIl9pZCI6ICJlbGxpcHRpY0A2LjIuMyIsCiAgIl9pbkNhY2hlIjogdHJ1ZSwKICAiX2luc3RhbGxhYmxlIjogdHJ1ZSwKICAiX2xvY2F0aW9uIjogIi9lbGxpcHRpYyIsCiAgIl9ub2RlVmVyc2lvbiI6ICI1LjQuMSIsCiAgIl9ucG1Vc2VyIjogewogICAgImVtYWlsIjogImZlZG9yQGluZHV0bnkuY29tIiwKICAgICJuYW1lIjogImluZHV0bnkiCiAgfSwKICAiX25wbVZlcnNpb24iOiAiMy4zLjEyIiwKICAiX3BoYW50b21DaGlsZHJlbiI6IHt9LAogICJfcmVxdWVzdGVkIjogewogICAgIm5hbWUiOiAiZWxsaXB0aWMiLAogICAgInJhdyI6ICJlbGxpcHRpY0BeNi4wLjAiLAogICAgInJhd1NwZWMiOiAiXjYuMC4wIiwKICAgICJzY29wZSI6IG51bGwsCiAgICAic3BlYyI6ICI+PTYuMC4wIDw3LjAuMCIsCiAgICAidHlwZSI6ICJyYW5nZSIKICB9LAogICJfcmVxdWlyZWRCeSI6IFsKICAgICIvYnJvd3NlcmlmeS1zaWduIiwKICAgICIvY3JlYXRlLWVjZGgiCiAgXSwKICAiX3Jlc29sdmVkIjogImh0dHBzOi8vcmVnaXN0cnkubnBtanMub3JnL2VsbGlwdGljLy0vZWxsaXB0aWMtNi4yLjMudGd6IiwKICAiX3NoYXN1bSI6ICIxOGU0NmQ3MzA2YjA5NTEyNzVhMmQ0MjA2MzI3MGExNGI3NGViZTk5IiwKICAiX3Nocmlua3dyYXAiOiBudWxsLAogICJfc3BlYyI6ICJlbGxpcHRpY0BeNi4wLjAiLAogICJfd2hlcmUiOiAiL2hvbWUvdnNpbHZhL3B0LWlub3ZhY2FvL3JldGhpbmstcHJvamVjdC9kZXYtcnVudGltZS1jb3JlL25vZGVfbW9kdWxlcy9icm93c2VyaWZ5LXNpZ24iLAogICJhdXRob3IiOiB7CiAgICAiZW1haWwiOiAiZmVkb3JAaW5kdXRueS5jb20iLAogICAgIm5hbWUiOiAiRmVkb3IgSW5kdXRueSIKICB9LAogICJidWdzIjogewogICAgInVybCI6ICJodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9lbGxpcHRpYy9pc3N1ZXMiCiAgfSwKICAiZGVwZW5kZW5jaWVzIjogewogICAgImJuLmpzIjogIl40LjAuMCIsCiAgICAiYnJvcmFuZCI6ICJeMS4wLjEiLAogICAgImhhc2guanMiOiAiXjEuMC4wIiwKICAgICJpbmhlcml0cyI6ICJeMi4wLjEiCiAgfSwKICAiZGVzY3JpcHRpb24iOiAiRUMgY3J5cHRvZ3JhcGh5IiwKICAiZGV2RGVwZW5kZW5jaWVzIjogewogICAgImNvdmVyYWxscyI6ICJeMi4xMS4zIiwKICAgICJpc3RhbmJ1bCI6ICJeMC40LjIiLAogICAgImpzY3MiOiAiXjIuOS4wIiwKICAgICJqc2hpbnQiOiAiXjIuNi4wIiwKICAgICJtb2NoYSI6ICJeMi4xLjAiCiAgfSwKICAiZGlyZWN0b3JpZXMiOiB7fSwKICAiZGlzdCI6IHsKICAgICJzaGFzdW0iOiAiMThlNDZkNzMwNmIwOTUxMjc1YTJkNDIwNjMyNzBhMTRiNzRlYmU5OSIsCiAgICAidGFyYmFsbCI6ICJodHRwOi8vcmVnaXN0cnkubnBtanMub3JnL2VsbGlwdGljLy0vZWxsaXB0aWMtNi4yLjMudGd6IgogIH0sCiAgImZpbGVzIjogWwogICAgImxpYiIKICBdLAogICJnaXRIZWFkIjogImMzMmYyMGIyMmI0MjBlYjZhZjNjNmRkYTI4OTYzZGViN2ZhY2Y4MjMiLAogICJob21lcGFnZSI6ICJodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9lbGxpcHRpYyIsCiAgImtleXdvcmRzIjogWwogICAgIkNyeXB0b2dyYXBoeSIsCiAgICAiRUMiLAogICAgIkVsbGlwdGljIiwKICAgICJjdXJ2ZSIKICBdLAogICJsaWNlbnNlIjogIk1JVCIsCiAgIm1haW4iOiAibGliL2VsbGlwdGljLmpzIiwKICAibWFpbnRhaW5lcnMiOiBbCiAgICB7CiAgICAgICJuYW1lIjogImluZHV0bnkiLAogICAgICAiZW1haWwiOiAiZmVkb3JAaW5kdXRueS5jb20iCiAgICB9CiAgXSwKICAibmFtZSI6ICJlbGxpcHRpYyIsCiAgIm9wdGlvbmFsRGVwZW5kZW5jaWVzIjoge30sCiAgInJlYWRtZSI6ICJFUlJPUjogTm8gUkVBRE1FIGRhdGEgZm91bmQhIiwKICAicmVwb3NpdG9yeSI6IHsKICAgICJ0eXBlIjogImdpdCIsCiAgICAidXJsIjogImdpdCtzc2g6Ly9naXRAZ2l0aHViLmNvbS9pbmR1dG55L2VsbGlwdGljLmdpdCIKICB9LAogICJzY3JpcHRzIjogewogICAgImNvdmVyYWdlIjogIm5wbSBydW4gdW5pdCAtLWNvdmVyYWdlIiwKICAgICJjb3ZlcmFsbHMiOiAibnBtIHJ1biBjb3ZlcmFnZSAmJiBjYXQgLi9jb3ZlcmFnZS9sY292LmluZm8gfCBjb3ZlcmFsbHMiLAogICAgImpzY3MiOiAianNjcyBiZW5jaG1hcmtzLyouanMgbGliLyouanMgbGliLyoqLyouanMgbGliLyoqLyoqLyouanMgdGVzdC8qLmpzIiwKICAgICJqc2hpbnQiOiAianNjcyBiZW5jaG1hcmtzLyouanMgbGliLyouanMgbGliLyoqLyouanMgbGliLyoqLyoqLyouanMgdGVzdC8qLmpzIiwKICAgICJsaW50IjogIm5wbSBydW4ganNjcyAmJiBucG0gcnVuIGpzaGludCIsCiAgICAidGVzdCI6ICJucG0gcnVuIGxpbnQgJiYgbnBtIHJ1biB1bml0IiwKICAgICJ1bml0IjogImlzdGFuYnVsIHRlc3QgX21vY2hhIC0tcmVwb3J0ZXI9c3BlYyB0ZXN0LyotdGVzdC5qcyIKICB9LAogICJ2ZXJzaW9uIjogIjYuMi4zIgp9Cgp9LHt9XSwxMTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQovLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAovLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwovLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgovLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgpmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7CiAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9OwogIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7Cn0KbW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7CgovLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLngKRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDsKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkOwoKLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlCi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuCkV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7CgovLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3MKLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuCkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikgewogIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpCiAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpOwogIHRoaXMuX21heExpc3RlbmVycyA9IG47CiAgcmV0dXJuIHRoaXM7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7CiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGxpc3RlbmVyczsKCiAgaWYgKCF0aGlzLl9ldmVudHMpCiAgICB0aGlzLl9ldmVudHMgPSB7fTsKCiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LgogIGlmICh0eXBlID09PSAnZXJyb3InKSB7CiAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fAogICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkgewogICAgICBlciA9IGFyZ3VtZW50c1sxXTsKICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHsKICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnQKICAgICAgfQogICAgICB0aHJvdyBUeXBlRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCAiZXJyb3IiIGV2ZW50LicpOwogICAgfQogIH0KCiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKQogICAgcmV0dXJuIGZhbHNlOwoKICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkgewogICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgIC8vIGZhc3QgY2FzZXMKICAgICAgY2FzZSAxOgogICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAyOgogICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDM6CiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgLy8gc2xvd2VyCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CiAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTsKICAgIH0KICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7CiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTsKICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7CiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspCiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTsKICB9CgogIHJldHVybiB0cnVlOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7CiAgdmFyIG07CgogIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpCiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpOwoKICBpZiAoIXRoaXMuX2V2ZW50cykKICAgIHRoaXMuX2V2ZW50cyA9IHt9OwoKICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSAibmV3TGlzdGVuZXIiISBCZWZvcmUKICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCAibmV3TGlzdGVuZXIiLgogIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpCiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSwKICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/CiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7CgogIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKQogICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuCiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjsKICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKQogICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLgogICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpOwogIGVsc2UKICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LgogICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdOwoKICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVhawogIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7CiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHsKICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVyczsKICAgIH0gZWxzZSB7CiAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVyczsKICAgIH0KCiAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkgewogICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTsKICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArCiAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArCiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7CiAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTAKICAgICAgICBjb25zb2xlLnRyYWNlKCk7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikgewogIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpCiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpOwoKICB2YXIgZmlyZWQgPSBmYWxzZTsKCiAgZnVuY3Rpb24gZygpIHsKICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7CgogICAgaWYgKCFmaXJlZCkgewogICAgICBmaXJlZCA9IHRydWU7CiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CiAgfQoKICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7CiAgdGhpcy5vbih0eXBlLCBnKTsKCiAgcmV0dXJuIHRoaXM7Cn07CgovLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZApFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHsKICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTsKCiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSkKICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CgogIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pCiAgICByZXR1cm4gdGhpczsKCiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKICBsZW5ndGggPSBsaXN0Lmxlbmd0aDsKICBwb3NpdGlvbiA9IC0xOwoKICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwKICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7CiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdOwogICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikKICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTsKCiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkgewogICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykgewogICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHwKICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkgewogICAgICAgIHBvc2l0aW9uID0gaTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChwb3NpdGlvbiA8IDApCiAgICAgIHJldHVybiB0aGlzOwoKICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkgewogICAgICBsaXN0Lmxlbmd0aCA9IDA7CiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07CiAgICB9IGVsc2UgewogICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7CiAgICB9CgogICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikKICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTsKICB9CgogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7CiAgdmFyIGtleSwgbGlzdGVuZXJzOwoKICBpZiAoIXRoaXMuX2V2ZW50cykKICAgIHJldHVybiB0aGlzOwoKICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0CiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKQogICAgICB0aGlzLl9ldmVudHMgPSB7fTsKICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSkKICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHsKICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykgewogICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTsKICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTsKICAgIH0KICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpOwogICAgdGhpcy5fZXZlbnRzID0ge307CiAgICByZXR1cm4gdGhpczsKICB9CgogIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkgewogICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpOwogIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7CiAgICAvLyBMSUZPIG9yZGVyCiAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aCkKICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTsKICB9CiAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgcmV0dXJuIHRoaXM7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHsKICB2YXIgcmV0OwogIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pCiAgICByZXQgPSBbXTsKICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpCiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTsKICBlbHNlCiAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTsKICByZXR1cm4gcmV0Owp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkgewogIGlmICh0aGlzLl9ldmVudHMpIHsKICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdOwoKICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKQogICAgICByZXR1cm4gMTsKICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpCiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDsKICB9CiAgcmV0dXJuIDA7Cn07CgpFdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHsKICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpOwp9OwoKZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJzsKfQoKZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInOwp9CgpmdW5jdGlvbiBpc09iamVjdChhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsOwp9CgpmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHsKICByZXR1cm4gYXJnID09PSB2b2lkIDA7Cn0KCn0se31dLDExOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIG1kNSA9IHJlcXVpcmUoJ2NyZWF0ZS1oYXNoL21kNScpCm1vZHVsZS5leHBvcnRzID0gRVZQX0J5dGVzVG9LZXkKZnVuY3Rpb24gRVZQX0J5dGVzVG9LZXkgKHBhc3N3b3JkLCBzYWx0LCBrZXlMZW4sIGl2TGVuKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIocGFzc3dvcmQpKSB7CiAgICBwYXNzd29yZCA9IG5ldyBCdWZmZXIocGFzc3dvcmQsICdiaW5hcnknKQogIH0KICBpZiAoc2FsdCAmJiAhQnVmZmVyLmlzQnVmZmVyKHNhbHQpKSB7CiAgICBzYWx0ID0gbmV3IEJ1ZmZlcihzYWx0LCAnYmluYXJ5JykKICB9CiAga2V5TGVuID0ga2V5TGVuIC8gOAogIGl2TGVuID0gaXZMZW4gfHwgMAogIHZhciBraSA9IDAKICB2YXIgaWkgPSAwCiAgdmFyIGtleSA9IG5ldyBCdWZmZXIoa2V5TGVuKQogIHZhciBpdiA9IG5ldyBCdWZmZXIoaXZMZW4pCiAgdmFyIGFkZG1kID0gMAogIHZhciBtZF9idWYKICB2YXIgaQogIHZhciBidWZzID0gW10KICB3aGlsZSAodHJ1ZSkgewogICAgaWYgKGFkZG1kKysgPiAwKSB7CiAgICAgIGJ1ZnMucHVzaChtZF9idWYpCiAgICB9CiAgICBidWZzLnB1c2gocGFzc3dvcmQpCiAgICBpZiAoc2FsdCkgewogICAgICBidWZzLnB1c2goc2FsdCkKICAgIH0KICAgIG1kX2J1ZiA9IG1kNShCdWZmZXIuY29uY2F0KGJ1ZnMpKQogICAgYnVmcyA9IFtdCiAgICBpID0gMAogICAgaWYgKGtleUxlbiA+IDApIHsKICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICBpZiAoa2V5TGVuID09PSAwKSB7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgICBpZiAoaSA9PT0gbWRfYnVmLmxlbmd0aCkgewogICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICAgICAga2V5W2tpKytdID0gbWRfYnVmW2ldCiAgICAgICAga2V5TGVuLS0KICAgICAgICBpKysKICAgICAgfQogICAgfQogICAgaWYgKGl2TGVuID4gMCAmJiBpICE9PSBtZF9idWYubGVuZ3RoKSB7CiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgaWYgKGl2TGVuID09PSAwKSB7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgICBpZiAoaSA9PT0gbWRfYnVmLmxlbmd0aCkgewogICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICAgICAgaXZbaWkrK10gPSBtZF9idWZbaV0KICAgICAgICBpdkxlbi0tCiAgICAgICAgaSsrCiAgICAgIH0KICAgIH0KICAgIGlmIChrZXlMZW4gPT09IDAgJiYgaXZMZW4gPT09IDApIHsKICAgICAgYnJlYWsKICAgIH0KICB9CiAgZm9yIChpID0gMDsgaSA8IG1kX2J1Zi5sZW5ndGg7IGkrKykgewogICAgbWRfYnVmW2ldID0gMAogIH0KICByZXR1cm4gewogICAga2V5OiBrZXksCiAgICBpdjogaXYKICB9Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjc2LCJjcmVhdGUtaGFzaC9tZDUiOjgzfV0sMTIwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGhhc2ggPSBleHBvcnRzOwoKaGFzaC51dGlscyA9IHJlcXVpcmUoJy4vaGFzaC91dGlscycpOwpoYXNoLmNvbW1vbiA9IHJlcXVpcmUoJy4vaGFzaC9jb21tb24nKTsKaGFzaC5zaGEgPSByZXF1aXJlKCcuL2hhc2gvc2hhJyk7Cmhhc2gucmlwZW1kID0gcmVxdWlyZSgnLi9oYXNoL3JpcGVtZCcpOwpoYXNoLmhtYWMgPSByZXF1aXJlKCcuL2hhc2gvaG1hYycpOwoKLy8gUHJveHkgaGFzaCBmdW5jdGlvbnMgdG8gdGhlIG1haW4gb2JqZWN0Cmhhc2guc2hhMSA9IGhhc2guc2hhLnNoYTE7Cmhhc2guc2hhMjU2ID0gaGFzaC5zaGEuc2hhMjU2OwpoYXNoLnNoYTIyNCA9IGhhc2guc2hhLnNoYTIyNDsKaGFzaC5zaGEzODQgPSBoYXNoLnNoYS5zaGEzODQ7Cmhhc2guc2hhNTEyID0gaGFzaC5zaGEuc2hhNTEyOwpoYXNoLnJpcGVtZDE2MCA9IGhhc2gucmlwZW1kLnJpcGVtZDE2MDsKCn0seyIuL2hhc2gvY29tbW9uIjoxMjEsIi4vaGFzaC9obWFjIjoxMjIsIi4vaGFzaC9yaXBlbWQiOjEyMywiLi9oYXNoL3NoYSI6MTI0LCIuL2hhc2gvdXRpbHMiOjEyNX1dLDEyMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBoYXNoID0gcmVxdWlyZSgnLi4vaGFzaCcpOwp2YXIgdXRpbHMgPSBoYXNoLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0OwoKZnVuY3Rpb24gQmxvY2tIYXNoKCkgewogIHRoaXMucGVuZGluZyA9IG51bGw7CiAgdGhpcy5wZW5kaW5nVG90YWwgPSAwOwogIHRoaXMuYmxvY2tTaXplID0gdGhpcy5jb25zdHJ1Y3Rvci5ibG9ja1NpemU7CiAgdGhpcy5vdXRTaXplID0gdGhpcy5jb25zdHJ1Y3Rvci5vdXRTaXplOwogIHRoaXMuaG1hY1N0cmVuZ3RoID0gdGhpcy5jb25zdHJ1Y3Rvci5obWFjU3RyZW5ndGg7CiAgdGhpcy5wYWRMZW5ndGggPSB0aGlzLmNvbnN0cnVjdG9yLnBhZExlbmd0aCAvIDg7CiAgdGhpcy5lbmRpYW4gPSAnYmlnJzsKCiAgdGhpcy5fZGVsdGE4ID0gdGhpcy5ibG9ja1NpemUgLyA4OwogIHRoaXMuX2RlbHRhMzIgPSB0aGlzLmJsb2NrU2l6ZSAvIDMyOwp9CmV4cG9ydHMuQmxvY2tIYXNoID0gQmxvY2tIYXNoOwoKQmxvY2tIYXNoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUobXNnLCBlbmMpIHsKICAvLyBDb252ZXJ0IG1lc3NhZ2UgdG8gYXJyYXksIHBhZCBpdCwgYW5kIGpvaW4gaW50byAzMmJpdCBibG9ja3MKICBtc2cgPSB1dGlscy50b0FycmF5KG1zZywgZW5jKTsKICBpZiAoIXRoaXMucGVuZGluZykKICAgIHRoaXMucGVuZGluZyA9IG1zZzsKICBlbHNlCiAgICB0aGlzLnBlbmRpbmcgPSB0aGlzLnBlbmRpbmcuY29uY2F0KG1zZyk7CiAgdGhpcy5wZW5kaW5nVG90YWwgKz0gbXNnLmxlbmd0aDsKCiAgLy8gRW5vdWdoIGRhdGEsIHRyeSB1cGRhdGluZwogIGlmICh0aGlzLnBlbmRpbmcubGVuZ3RoID49IHRoaXMuX2RlbHRhOCkgewogICAgbXNnID0gdGhpcy5wZW5kaW5nOwoKICAgIC8vIFByb2Nlc3MgcGVuZGluZyBkYXRhIGluIGJsb2NrcwogICAgdmFyIHIgPSBtc2cubGVuZ3RoICUgdGhpcy5fZGVsdGE4OwogICAgdGhpcy5wZW5kaW5nID0gbXNnLnNsaWNlKG1zZy5sZW5ndGggLSByLCBtc2cubGVuZ3RoKTsKICAgIGlmICh0aGlzLnBlbmRpbmcubGVuZ3RoID09PSAwKQogICAgICB0aGlzLnBlbmRpbmcgPSBudWxsOwoKICAgIG1zZyA9IHV0aWxzLmpvaW4zMihtc2csIDAsIG1zZy5sZW5ndGggLSByLCB0aGlzLmVuZGlhbik7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkgKz0gdGhpcy5fZGVsdGEzMikKICAgICAgdGhpcy5fdXBkYXRlKG1zZywgaSwgaSArIHRoaXMuX2RlbHRhMzIpOwogIH0KCiAgcmV0dXJuIHRoaXM7Cn07CgpCbG9ja0hhc2gucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICB0aGlzLnVwZGF0ZSh0aGlzLl9wYWQoKSk7CiAgYXNzZXJ0KHRoaXMucGVuZGluZyA9PT0gbnVsbCk7CgogIHJldHVybiB0aGlzLl9kaWdlc3QoZW5jKTsKfTsKCkJsb2NrSGFzaC5wcm90b3R5cGUuX3BhZCA9IGZ1bmN0aW9uIHBhZCgpIHsKICB2YXIgbGVuID0gdGhpcy5wZW5kaW5nVG90YWw7CiAgdmFyIGJ5dGVzID0gdGhpcy5fZGVsdGE4OwogIHZhciBrID0gYnl0ZXMgLSAoKGxlbiArIHRoaXMucGFkTGVuZ3RoKSAlIGJ5dGVzKTsKICB2YXIgcmVzID0gbmV3IEFycmF5KGsgKyB0aGlzLnBhZExlbmd0aCk7CiAgcmVzWzBdID0gMHg4MDsKICBmb3IgKHZhciBpID0gMTsgaSA8IGs7IGkrKykKICAgIHJlc1tpXSA9IDA7CgogIC8vIEFwcGVuZCBsZW5ndGgKICBsZW4gPDw9IDM7CiAgaWYgKHRoaXMuZW5kaWFuID09PSAnYmlnJykgewogICAgZm9yICh2YXIgdCA9IDg7IHQgPCB0aGlzLnBhZExlbmd0aDsgdCsrKQogICAgICByZXNbaSsrXSA9IDA7CgogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAobGVuID4+PiAyNCkgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiAxNikgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiA4KSAmIDB4ZmY7CiAgICByZXNbaSsrXSA9IGxlbiAmIDB4ZmY7CiAgfSBlbHNlIHsKICAgIHJlc1tpKytdID0gbGVuICYgMHhmZjsKICAgIHJlc1tpKytdID0gKGxlbiA+Pj4gOCkgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiAxNikgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiAyNCkgJiAweGZmOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwoKICAgIGZvciAodmFyIHQgPSA4OyB0IDwgdGhpcy5wYWRMZW5ndGg7IHQrKykKICAgICAgcmVzW2krK10gPSAwOwogIH0KCiAgcmV0dXJuIHJlczsKfTsKCn0seyIuLi9oYXNoIjoxMjB9XSwxMjI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaG1hYyA9IGV4cG9ydHM7Cgp2YXIgaGFzaCA9IHJlcXVpcmUoJy4uL2hhc2gnKTsKdmFyIHV0aWxzID0gaGFzaC51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKCmZ1bmN0aW9uIEhtYWMoaGFzaCwga2V5LCBlbmMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSG1hYykpCiAgICByZXR1cm4gbmV3IEhtYWMoaGFzaCwga2V5LCBlbmMpOwogIHRoaXMuSGFzaCA9IGhhc2g7CiAgdGhpcy5ibG9ja1NpemUgPSBoYXNoLmJsb2NrU2l6ZSAvIDg7CiAgdGhpcy5vdXRTaXplID0gaGFzaC5vdXRTaXplIC8gODsKICB0aGlzLmlubmVyID0gbnVsbDsKICB0aGlzLm91dGVyID0gbnVsbDsKCiAgdGhpcy5faW5pdCh1dGlscy50b0FycmF5KGtleSwgZW5jKSk7Cn0KbW9kdWxlLmV4cG9ydHMgPSBIbWFjOwoKSG1hYy5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0KGtleSkgewogIC8vIFNob3J0ZW4ga2V5LCBpZiBuZWVkZWQKICBpZiAoa2V5Lmxlbmd0aCA+IHRoaXMuYmxvY2tTaXplKQogICAga2V5ID0gbmV3IHRoaXMuSGFzaCgpLnVwZGF0ZShrZXkpLmRpZ2VzdCgpOwogIGFzc2VydChrZXkubGVuZ3RoIDw9IHRoaXMuYmxvY2tTaXplKTsKCiAgLy8gQWRkIHBhZGRpbmcgdG8ga2V5CiAgZm9yICh2YXIgaSA9IGtleS5sZW5ndGg7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgaSsrKQogICAga2V5LnB1c2goMCk7CgogIGZvciAodmFyIGkgPSAwOyBpIDwga2V5Lmxlbmd0aDsgaSsrKQogICAga2V5W2ldIF49IDB4MzY7CiAgdGhpcy5pbm5lciA9IG5ldyB0aGlzLkhhc2goKS51cGRhdGUoa2V5KTsKCiAgLy8gMHgzNiBeIDB4NWMgPSAweDZhCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyBpKyspCiAgICBrZXlbaV0gXj0gMHg2YTsKICB0aGlzLm91dGVyID0gbmV3IHRoaXMuSGFzaCgpLnVwZGF0ZShrZXkpOwp9OwoKSG1hYy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKG1zZywgZW5jKSB7CiAgdGhpcy5pbm5lci51cGRhdGUobXNnLCBlbmMpOwogIHJldHVybiB0aGlzOwp9OwoKSG1hYy5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogIHRoaXMub3V0ZXIudXBkYXRlKHRoaXMuaW5uZXIuZGlnZXN0KCkpOwogIHJldHVybiB0aGlzLm91dGVyLmRpZ2VzdChlbmMpOwp9OwoKfSx7Ii4uL2hhc2giOjEyMH1dLDEyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBoYXNoID0gcmVxdWlyZSgnLi4vaGFzaCcpOwp2YXIgdXRpbHMgPSBoYXNoLnV0aWxzOwoKdmFyIHJvdGwzMiA9IHV0aWxzLnJvdGwzMjsKdmFyIHN1bTMyID0gdXRpbHMuc3VtMzI7CnZhciBzdW0zMl8zID0gdXRpbHMuc3VtMzJfMzsKdmFyIHN1bTMyXzQgPSB1dGlscy5zdW0zMl80Owp2YXIgQmxvY2tIYXNoID0gaGFzaC5jb21tb24uQmxvY2tIYXNoOwoKZnVuY3Rpb24gUklQRU1EMTYwKCkgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSSVBFTUQxNjApKQogICAgcmV0dXJuIG5ldyBSSVBFTUQxNjAoKTsKCiAgQmxvY2tIYXNoLmNhbGwodGhpcyk7CgogIHRoaXMuaCA9IFsgMHg2NzQ1MjMwMSwgMHhlZmNkYWI4OSwgMHg5OGJhZGNmZSwgMHgxMDMyNTQ3NiwgMHhjM2QyZTFmMCBdOwogIHRoaXMuZW5kaWFuID0gJ2xpdHRsZSc7Cn0KdXRpbHMuaW5oZXJpdHMoUklQRU1EMTYwLCBCbG9ja0hhc2gpOwpleHBvcnRzLnJpcGVtZDE2MCA9IFJJUEVNRDE2MDsKClJJUEVNRDE2MC5ibG9ja1NpemUgPSA1MTI7ClJJUEVNRDE2MC5vdXRTaXplID0gMTYwOwpSSVBFTUQxNjAuaG1hY1N0cmVuZ3RoID0gMTkyOwpSSVBFTUQxNjAucGFkTGVuZ3RoID0gNjQ7CgpSSVBFTUQxNjAucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUobXNnLCBzdGFydCkgewogIHZhciBBID0gdGhpcy5oWzBdOwogIHZhciBCID0gdGhpcy5oWzFdOwogIHZhciBDID0gdGhpcy5oWzJdOwogIHZhciBEID0gdGhpcy5oWzNdOwogIHZhciBFID0gdGhpcy5oWzRdOwogIHZhciBBaCA9IEE7CiAgdmFyIEJoID0gQjsKICB2YXIgQ2ggPSBDOwogIHZhciBEaCA9IEQ7CiAgdmFyIEVoID0gRTsKICBmb3IgKHZhciBqID0gMDsgaiA8IDgwOyBqKyspIHsKICAgIHZhciBUID0gc3VtMzIoCiAgICAgIHJvdGwzMigKICAgICAgICBzdW0zMl80KEEsIGYoaiwgQiwgQywgRCksIG1zZ1tyW2pdICsgc3RhcnRdLCBLKGopKSwKICAgICAgICBzW2pdKSwKICAgICAgRSk7CiAgICBBID0gRTsKICAgIEUgPSBEOwogICAgRCA9IHJvdGwzMihDLCAxMCk7CiAgICBDID0gQjsKICAgIEIgPSBUOwogICAgVCA9IHN1bTMyKAogICAgICByb3RsMzIoCiAgICAgICAgc3VtMzJfNChBaCwgZig3OSAtIGosIEJoLCBDaCwgRGgpLCBtc2dbcmhbal0gKyBzdGFydF0sIEtoKGopKSwKICAgICAgICBzaFtqXSksCiAgICAgIEVoKTsKICAgIEFoID0gRWg7CiAgICBFaCA9IERoOwogICAgRGggPSByb3RsMzIoQ2gsIDEwKTsKICAgIENoID0gQmg7CiAgICBCaCA9IFQ7CiAgfQogIFQgPSBzdW0zMl8zKHRoaXMuaFsxXSwgQywgRGgpOwogIHRoaXMuaFsxXSA9IHN1bTMyXzModGhpcy5oWzJdLCBELCBFaCk7CiAgdGhpcy5oWzJdID0gc3VtMzJfMyh0aGlzLmhbM10sIEUsIEFoKTsKICB0aGlzLmhbM10gPSBzdW0zMl8zKHRoaXMuaFs0XSwgQSwgQmgpOwogIHRoaXMuaFs0XSA9IHN1bTMyXzModGhpcy5oWzBdLCBCLCBDaCk7CiAgdGhpcy5oWzBdID0gVDsKfTsKClJJUEVNRDE2MC5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICBpZiAoZW5jID09PSAnaGV4JykKICAgIHJldHVybiB1dGlscy50b0hleDMyKHRoaXMuaCwgJ2xpdHRsZScpOwogIGVsc2UKICAgIHJldHVybiB1dGlscy5zcGxpdDMyKHRoaXMuaCwgJ2xpdHRsZScpOwp9OwoKZnVuY3Rpb24gZihqLCB4LCB5LCB6KSB7CiAgaWYgKGogPD0gMTUpCiAgICByZXR1cm4geCBeIHkgXiB6OwogIGVsc2UgaWYgKGogPD0gMzEpCiAgICByZXR1cm4gKHggJiB5KSB8ICgofngpICYgeik7CiAgZWxzZSBpZiAoaiA8PSA0NykKICAgIHJldHVybiAoeCB8ICh+eSkpIF4gejsKICBlbHNlIGlmIChqIDw9IDYzKQogICAgcmV0dXJuICh4ICYgeikgfCAoeSAmICh+eikpOwogIGVsc2UKICAgIHJldHVybiB4IF4gKHkgfCAofnopKTsKfQoKZnVuY3Rpb24gSyhqKSB7CiAgaWYgKGogPD0gMTUpCiAgICByZXR1cm4gMHgwMDAwMDAwMDsKICBlbHNlIGlmIChqIDw9IDMxKQogICAgcmV0dXJuIDB4NWE4Mjc5OTk7CiAgZWxzZSBpZiAoaiA8PSA0NykKICAgIHJldHVybiAweDZlZDllYmExOwogIGVsc2UgaWYgKGogPD0gNjMpCiAgICByZXR1cm4gMHg4ZjFiYmNkYzsKICBlbHNlCiAgICByZXR1cm4gMHhhOTUzZmQ0ZTsKfQoKZnVuY3Rpb24gS2goaikgewogIGlmIChqIDw9IDE1KQogICAgcmV0dXJuIDB4NTBhMjhiZTY7CiAgZWxzZSBpZiAoaiA8PSAzMSkKICAgIHJldHVybiAweDVjNGRkMTI0OwogIGVsc2UgaWYgKGogPD0gNDcpCiAgICByZXR1cm4gMHg2ZDcwM2VmMzsKICBlbHNlIGlmIChqIDw9IDYzKQogICAgcmV0dXJuIDB4N2E2ZDc2ZTk7CiAgZWxzZQogICAgcmV0dXJuIDB4MDAwMDAwMDA7Cn0KCnZhciByID0gWwogIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsCiAgNywgNCwgMTMsIDEsIDEwLCA2LCAxNSwgMywgMTIsIDAsIDksIDUsIDIsIDE0LCAxMSwgOCwKICAzLCAxMCwgMTQsIDQsIDksIDE1LCA4LCAxLCAyLCA3LCAwLCA2LCAxMywgMTEsIDUsIDEyLAogIDEsIDksIDExLCAxMCwgMCwgOCwgMTIsIDQsIDEzLCAzLCA3LCAxNSwgMTQsIDUsIDYsIDIsCiAgNCwgMCwgNSwgOSwgNywgMTIsIDIsIDEwLCAxNCwgMSwgMywgOCwgMTEsIDYsIDE1LCAxMwpdOwoKdmFyIHJoID0gWwogIDUsIDE0LCA3LCAwLCA5LCAyLCAxMSwgNCwgMTMsIDYsIDE1LCA4LCAxLCAxMCwgMywgMTIsCiAgNiwgMTEsIDMsIDcsIDAsIDEzLCA1LCAxMCwgMTQsIDE1LCA4LCAxMiwgNCwgOSwgMSwgMiwKICAxNSwgNSwgMSwgMywgNywgMTQsIDYsIDksIDExLCA4LCAxMiwgMiwgMTAsIDAsIDQsIDEzLAogIDgsIDYsIDQsIDEsIDMsIDExLCAxNSwgMCwgNSwgMTIsIDIsIDEzLCA5LCA3LCAxMCwgMTQsCiAgMTIsIDE1LCAxMCwgNCwgMSwgNSwgOCwgNywgNiwgMiwgMTMsIDE0LCAwLCAzLCA5LCAxMQpdOwoKdmFyIHMgPSBbCiAgMTEsIDE0LCAxNSwgMTIsIDUsIDgsIDcsIDksIDExLCAxMywgMTQsIDE1LCA2LCA3LCA5LCA4LAogIDcsIDYsIDgsIDEzLCAxMSwgOSwgNywgMTUsIDcsIDEyLCAxNSwgOSwgMTEsIDcsIDEzLCAxMiwKICAxMSwgMTMsIDYsIDcsIDE0LCA5LCAxMywgMTUsIDE0LCA4LCAxMywgNiwgNSwgMTIsIDcsIDUsCiAgMTEsIDEyLCAxNCwgMTUsIDE0LCAxNSwgOSwgOCwgOSwgMTQsIDUsIDYsIDgsIDYsIDUsIDEyLAogIDksIDE1LCA1LCAxMSwgNiwgOCwgMTMsIDEyLCA1LCAxMiwgMTMsIDE0LCAxMSwgOCwgNSwgNgpdOwoKdmFyIHNoID0gWwogIDgsIDksIDksIDExLCAxMywgMTUsIDE1LCA1LCA3LCA3LCA4LCAxMSwgMTQsIDE0LCAxMiwgNiwKICA5LCAxMywgMTUsIDcsIDEyLCA4LCA5LCAxMSwgNywgNywgMTIsIDcsIDYsIDE1LCAxMywgMTEsCiAgOSwgNywgMTUsIDExLCA4LCA2LCA2LCAxNCwgMTIsIDEzLCA1LCAxNCwgMTMsIDEzLCA3LCA1LAogIDE1LCA1LCA4LCAxMSwgMTQsIDE0LCA2LCAxNCwgNiwgOSwgMTIsIDksIDEyLCA1LCAxNSwgOCwKICA4LCA1LCAxMiwgOSwgMTIsIDUsIDE0LCA2LCA4LCAxMywgNiwgNSwgMTUsIDEzLCAxMSwgMTEKXTsKCn0seyIuLi9oYXNoIjoxMjB9XSwxMjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaGFzaCA9IHJlcXVpcmUoJy4uL2hhc2gnKTsKdmFyIHV0aWxzID0gaGFzaC51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKCnZhciByb3RyMzIgPSB1dGlscy5yb3RyMzI7CnZhciByb3RsMzIgPSB1dGlscy5yb3RsMzI7CnZhciBzdW0zMiA9IHV0aWxzLnN1bTMyOwp2YXIgc3VtMzJfNCA9IHV0aWxzLnN1bTMyXzQ7CnZhciBzdW0zMl81ID0gdXRpbHMuc3VtMzJfNTsKdmFyIHJvdHI2NF9oaSA9IHV0aWxzLnJvdHI2NF9oaTsKdmFyIHJvdHI2NF9sbyA9IHV0aWxzLnJvdHI2NF9sbzsKdmFyIHNocjY0X2hpID0gdXRpbHMuc2hyNjRfaGk7CnZhciBzaHI2NF9sbyA9IHV0aWxzLnNocjY0X2xvOwp2YXIgc3VtNjQgPSB1dGlscy5zdW02NDsKdmFyIHN1bTY0X2hpID0gdXRpbHMuc3VtNjRfaGk7CnZhciBzdW02NF9sbyA9IHV0aWxzLnN1bTY0X2xvOwp2YXIgc3VtNjRfNF9oaSA9IHV0aWxzLnN1bTY0XzRfaGk7CnZhciBzdW02NF80X2xvID0gdXRpbHMuc3VtNjRfNF9sbzsKdmFyIHN1bTY0XzVfaGkgPSB1dGlscy5zdW02NF81X2hpOwp2YXIgc3VtNjRfNV9sbyA9IHV0aWxzLnN1bTY0XzVfbG87CnZhciBCbG9ja0hhc2ggPSBoYXNoLmNvbW1vbi5CbG9ja0hhc2g7Cgp2YXIgc2hhMjU2X0sgPSBbCiAgMHg0MjhhMmY5OCwgMHg3MTM3NDQ5MSwgMHhiNWMwZmJjZiwgMHhlOWI1ZGJhNSwKICAweDM5NTZjMjViLCAweDU5ZjExMWYxLCAweDkyM2Y4MmE0LCAweGFiMWM1ZWQ1LAogIDB4ZDgwN2FhOTgsIDB4MTI4MzViMDEsIDB4MjQzMTg1YmUsIDB4NTUwYzdkYzMsCiAgMHg3MmJlNWQ3NCwgMHg4MGRlYjFmZSwgMHg5YmRjMDZhNywgMHhjMTliZjE3NCwKICAweGU0OWI2OWMxLCAweGVmYmU0Nzg2LCAweDBmYzE5ZGM2LCAweDI0MGNhMWNjLAogIDB4MmRlOTJjNmYsIDB4NGE3NDg0YWEsIDB4NWNiMGE5ZGMsIDB4NzZmOTg4ZGEsCiAgMHg5ODNlNTE1MiwgMHhhODMxYzY2ZCwgMHhiMDAzMjdjOCwgMHhiZjU5N2ZjNywKICAweGM2ZTAwYmYzLCAweGQ1YTc5MTQ3LCAweDA2Y2E2MzUxLCAweDE0MjkyOTY3LAogIDB4MjdiNzBhODUsIDB4MmUxYjIxMzgsIDB4NGQyYzZkZmMsIDB4NTMzODBkMTMsCiAgMHg2NTBhNzM1NCwgMHg3NjZhMGFiYiwgMHg4MWMyYzkyZSwgMHg5MjcyMmM4NSwKICAweGEyYmZlOGExLCAweGE4MWE2NjRiLCAweGMyNGI4YjcwLCAweGM3NmM1MWEzLAogIDB4ZDE5MmU4MTksIDB4ZDY5OTA2MjQsIDB4ZjQwZTM1ODUsIDB4MTA2YWEwNzAsCiAgMHgxOWE0YzExNiwgMHgxZTM3NmMwOCwgMHgyNzQ4Nzc0YywgMHgzNGIwYmNiNSwKICAweDM5MWMwY2IzLCAweDRlZDhhYTRhLCAweDViOWNjYTRmLCAweDY4MmU2ZmYzLAogIDB4NzQ4ZjgyZWUsIDB4NzhhNTYzNmYsIDB4ODRjODc4MTQsIDB4OGNjNzAyMDgsCiAgMHg5MGJlZmZmYSwgMHhhNDUwNmNlYiwgMHhiZWY5YTNmNywgMHhjNjcxNzhmMgpdOwoKdmFyIHNoYTUxMl9LID0gWwogIDB4NDI4YTJmOTgsIDB4ZDcyOGFlMjIsIDB4NzEzNzQ0OTEsIDB4MjNlZjY1Y2QsCiAgMHhiNWMwZmJjZiwgMHhlYzRkM2IyZiwgMHhlOWI1ZGJhNSwgMHg4MTg5ZGJiYywKICAweDM5NTZjMjViLCAweGYzNDhiNTM4LCAweDU5ZjExMWYxLCAweGI2MDVkMDE5LAogIDB4OTIzZjgyYTQsIDB4YWYxOTRmOWIsIDB4YWIxYzVlZDUsIDB4ZGE2ZDgxMTgsCiAgMHhkODA3YWE5OCwgMHhhMzAzMDI0MiwgMHgxMjgzNWIwMSwgMHg0NTcwNmZiZSwKICAweDI0MzE4NWJlLCAweDRlZTRiMjhjLCAweDU1MGM3ZGMzLCAweGQ1ZmZiNGUyLAogIDB4NzJiZTVkNzQsIDB4ZjI3Yjg5NmYsIDB4ODBkZWIxZmUsIDB4M2IxNjk2YjEsCiAgMHg5YmRjMDZhNywgMHgyNWM3MTIzNSwgMHhjMTliZjE3NCwgMHhjZjY5MjY5NCwKICAweGU0OWI2OWMxLCAweDllZjE0YWQyLCAweGVmYmU0Nzg2LCAweDM4NGYyNWUzLAogIDB4MGZjMTlkYzYsIDB4OGI4Y2Q1YjUsIDB4MjQwY2ExY2MsIDB4NzdhYzljNjUsCiAgMHgyZGU5MmM2ZiwgMHg1OTJiMDI3NSwgMHg0YTc0ODRhYSwgMHg2ZWE2ZTQ4MywKICAweDVjYjBhOWRjLCAweGJkNDFmYmQ0LCAweDc2Zjk4OGRhLCAweDgzMTE1M2I1LAogIDB4OTgzZTUxNTIsIDB4ZWU2NmRmYWIsIDB4YTgzMWM2NmQsIDB4MmRiNDMyMTAsCiAgMHhiMDAzMjdjOCwgMHg5OGZiMjEzZiwgMHhiZjU5N2ZjNywgMHhiZWVmMGVlNCwKICAweGM2ZTAwYmYzLCAweDNkYTg4ZmMyLCAweGQ1YTc5MTQ3LCAweDkzMGFhNzI1LAogIDB4MDZjYTYzNTEsIDB4ZTAwMzgyNmYsIDB4MTQyOTI5NjcsIDB4MGEwZTZlNzAsCiAgMHgyN2I3MGE4NSwgMHg0NmQyMmZmYywgMHgyZTFiMjEzOCwgMHg1YzI2YzkyNiwKICAweDRkMmM2ZGZjLCAweDVhYzQyYWVkLCAweDUzMzgwZDEzLCAweDlkOTViM2RmLAogIDB4NjUwYTczNTQsIDB4OGJhZjYzZGUsIDB4NzY2YTBhYmIsIDB4M2M3N2IyYTgsCiAgMHg4MWMyYzkyZSwgMHg0N2VkYWVlNiwgMHg5MjcyMmM4NSwgMHgxNDgyMzUzYiwKICAweGEyYmZlOGExLCAweDRjZjEwMzY0LCAweGE4MWE2NjRiLCAweGJjNDIzMDAxLAogIDB4YzI0YjhiNzAsIDB4ZDBmODk3OTEsIDB4Yzc2YzUxYTMsIDB4MDY1NGJlMzAsCiAgMHhkMTkyZTgxOSwgMHhkNmVmNTIxOCwgMHhkNjk5MDYyNCwgMHg1NTY1YTkxMCwKICAweGY0MGUzNTg1LCAweDU3NzEyMDJhLCAweDEwNmFhMDcwLCAweDMyYmJkMWI4LAogIDB4MTlhNGMxMTYsIDB4YjhkMmQwYzgsIDB4MWUzNzZjMDgsIDB4NTE0MWFiNTMsCiAgMHgyNzQ4Nzc0YywgMHhkZjhlZWI5OSwgMHgzNGIwYmNiNSwgMHhlMTliNDhhOCwKICAweDM5MWMwY2IzLCAweGM1Yzk1YTYzLCAweDRlZDhhYTRhLCAweGUzNDE4YWNiLAogIDB4NWI5Y2NhNGYsIDB4Nzc2M2UzNzMsIDB4NjgyZTZmZjMsIDB4ZDZiMmI4YTMsCiAgMHg3NDhmODJlZSwgMHg1ZGVmYjJmYywgMHg3OGE1NjM2ZiwgMHg0MzE3MmY2MCwKICAweDg0Yzg3ODE0LCAweGExZjBhYjcyLCAweDhjYzcwMjA4LCAweDFhNjQzOWVjLAogIDB4OTBiZWZmZmEsIDB4MjM2MzFlMjgsIDB4YTQ1MDZjZWIsIDB4ZGU4MmJkZTksCiAgMHhiZWY5YTNmNywgMHhiMmM2NzkxNSwgMHhjNjcxNzhmMiwgMHhlMzcyNTMyYiwKICAweGNhMjczZWNlLCAweGVhMjY2MTljLCAweGQxODZiOGM3LCAweDIxYzBjMjA3LAogIDB4ZWFkYTdkZDYsIDB4Y2RlMGViMWUsIDB4ZjU3ZDRmN2YsIDB4ZWU2ZWQxNzgsCiAgMHgwNmYwNjdhYSwgMHg3MjE3NmZiYSwgMHgwYTYzN2RjNSwgMHhhMmM4OThhNiwKICAweDExM2Y5ODA0LCAweGJlZjkwZGFlLCAweDFiNzEwYjM1LCAweDEzMWM0NzFiLAogIDB4MjhkYjc3ZjUsIDB4MjMwNDdkODQsIDB4MzJjYWFiN2IsIDB4NDBjNzI0OTMsCiAgMHgzYzllYmUwYSwgMHgxNWM5YmViYywgMHg0MzFkNjdjNCwgMHg5YzEwMGQ0YywKICAweDRjYzVkNGJlLCAweGNiM2U0MmI2LCAweDU5N2YyOTljLCAweGZjNjU3ZTJhLAogIDB4NWZjYjZmYWIsIDB4M2FkNmZhZWMsIDB4NmM0NDE5OGMsIDB4NGE0NzU4MTcKXTsKCnZhciBzaGExX0sgPSBbCiAgMHg1QTgyNzk5OSwgMHg2RUQ5RUJBMSwKICAweDhGMUJCQ0RDLCAweENBNjJDMUQ2Cl07CgpmdW5jdGlvbiBTSEEyNTYoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNIQTI1NikpCiAgICByZXR1cm4gbmV3IFNIQTI1NigpOwoKICBCbG9ja0hhc2guY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4NmEwOWU2NjcsIDB4YmI2N2FlODUsIDB4M2M2ZWYzNzIsIDB4YTU0ZmY1M2EsCiAgICAgICAgICAgICAweDUxMGU1MjdmLCAweDliMDU2ODhjLCAweDFmODNkOWFiLCAweDViZTBjZDE5IF07CiAgdGhpcy5rID0gc2hhMjU2X0s7CiAgdGhpcy5XID0gbmV3IEFycmF5KDY0KTsKfQp1dGlscy5pbmhlcml0cyhTSEEyNTYsIEJsb2NrSGFzaCk7CmV4cG9ydHMuc2hhMjU2ID0gU0hBMjU2OwoKU0hBMjU2LmJsb2NrU2l6ZSA9IDUxMjsKU0hBMjU2Lm91dFNpemUgPSAyNTY7ClNIQTI1Ni5obWFjU3RyZW5ndGggPSAxOTI7ClNIQTI1Ni5wYWRMZW5ndGggPSA2NDsKClNIQTI1Ni5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIF91cGRhdGUobXNnLCBzdGFydCkgewogIHZhciBXID0gdGhpcy5XOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspCiAgICBXW2ldID0gbXNnW3N0YXJ0ICsgaV07CiAgZm9yICg7IGkgPCBXLmxlbmd0aDsgaSsrKQogICAgV1tpXSA9IHN1bTMyXzQoZzFfMjU2KFdbaSAtIDJdKSwgV1tpIC0gN10sIGcwXzI1NihXW2kgLSAxNV0pLCBXW2kgLSAxNl0pOwoKICB2YXIgYSA9IHRoaXMuaFswXTsKICB2YXIgYiA9IHRoaXMuaFsxXTsKICB2YXIgYyA9IHRoaXMuaFsyXTsKICB2YXIgZCA9IHRoaXMuaFszXTsKICB2YXIgZSA9IHRoaXMuaFs0XTsKICB2YXIgZiA9IHRoaXMuaFs1XTsKICB2YXIgZyA9IHRoaXMuaFs2XTsKICB2YXIgaCA9IHRoaXMuaFs3XTsKCiAgYXNzZXJ0KHRoaXMuay5sZW5ndGggPT09IFcubGVuZ3RoKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IFcubGVuZ3RoOyBpKyspIHsKICAgIHZhciBUMSA9IHN1bTMyXzUoaCwgczFfMjU2KGUpLCBjaDMyKGUsIGYsIGcpLCB0aGlzLmtbaV0sIFdbaV0pOwogICAgdmFyIFQyID0gc3VtMzIoczBfMjU2KGEpLCBtYWozMihhLCBiLCBjKSk7CiAgICBoID0gZzsKICAgIGcgPSBmOwogICAgZiA9IGU7CiAgICBlID0gc3VtMzIoZCwgVDEpOwogICAgZCA9IGM7CiAgICBjID0gYjsKICAgIGIgPSBhOwogICAgYSA9IHN1bTMyKFQxLCBUMik7CiAgfQoKICB0aGlzLmhbMF0gPSBzdW0zMih0aGlzLmhbMF0sIGEpOwogIHRoaXMuaFsxXSA9IHN1bTMyKHRoaXMuaFsxXSwgYik7CiAgdGhpcy5oWzJdID0gc3VtMzIodGhpcy5oWzJdLCBjKTsKICB0aGlzLmhbM10gPSBzdW0zMih0aGlzLmhbM10sIGQpOwogIHRoaXMuaFs0XSA9IHN1bTMyKHRoaXMuaFs0XSwgZSk7CiAgdGhpcy5oWzVdID0gc3VtMzIodGhpcy5oWzVdLCBmKTsKICB0aGlzLmhbNl0gPSBzdW0zMih0aGlzLmhbNl0sIGcpOwogIHRoaXMuaFs3XSA9IHN1bTMyKHRoaXMuaFs3XSwgaCk7Cn07CgpTSEEyNTYucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiBkaWdlc3QoZW5jKSB7CiAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICByZXR1cm4gdXRpbHMudG9IZXgzMih0aGlzLmgsICdiaWcnKTsKICBlbHNlCiAgICByZXR1cm4gdXRpbHMuc3BsaXQzMih0aGlzLmgsICdiaWcnKTsKfTsKCmZ1bmN0aW9uIFNIQTIyNCgpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0hBMjI0KSkKICAgIHJldHVybiBuZXcgU0hBMjI0KCk7CgogIFNIQTI1Ni5jYWxsKHRoaXMpOwogIHRoaXMuaCA9IFsgMHhjMTA1OWVkOCwgMHgzNjdjZDUwNywgMHgzMDcwZGQxNywgMHhmNzBlNTkzOSwKICAgICAgICAgICAgIDB4ZmZjMDBiMzEsIDB4Njg1ODE1MTEsIDB4NjRmOThmYTcsIDB4YmVmYTRmYTQgXTsKfQp1dGlscy5pbmhlcml0cyhTSEEyMjQsIFNIQTI1Nik7CmV4cG9ydHMuc2hhMjI0ID0gU0hBMjI0OwoKU0hBMjI0LmJsb2NrU2l6ZSA9IDUxMjsKU0hBMjI0Lm91dFNpemUgPSAyMjQ7ClNIQTIyNC5obWFjU3RyZW5ndGggPSAxOTI7ClNIQTIyNC5wYWRMZW5ndGggPSA2NDsKClNIQTIyNC5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICAvLyBKdXN0IHRydW5jYXRlIG91dHB1dAogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHV0aWxzLnRvSGV4MzIodGhpcy5oLnNsaWNlKDAsIDcpLCAnYmlnJyk7CiAgZWxzZQogICAgcmV0dXJuIHV0aWxzLnNwbGl0MzIodGhpcy5oLnNsaWNlKDAsIDcpLCAnYmlnJyk7Cn07CgpmdW5jdGlvbiBTSEE1MTIoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNIQTUxMikpCiAgICByZXR1cm4gbmV3IFNIQTUxMigpOwoKICBCbG9ja0hhc2guY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4NmEwOWU2NjcsIDB4ZjNiY2M5MDgsCiAgICAgICAgICAgICAweGJiNjdhZTg1LCAweDg0Y2FhNzNiLAogICAgICAgICAgICAgMHgzYzZlZjM3MiwgMHhmZTk0ZjgyYiwKICAgICAgICAgICAgIDB4YTU0ZmY1M2EsIDB4NWYxZDM2ZjEsCiAgICAgICAgICAgICAweDUxMGU1MjdmLCAweGFkZTY4MmQxLAogICAgICAgICAgICAgMHg5YjA1Njg4YywgMHgyYjNlNmMxZiwKICAgICAgICAgICAgIDB4MWY4M2Q5YWIsIDB4ZmI0MWJkNmIsCiAgICAgICAgICAgICAweDViZTBjZDE5LCAweDEzN2UyMTc5IF07CiAgdGhpcy5rID0gc2hhNTEyX0s7CiAgdGhpcy5XID0gbmV3IEFycmF5KDE2MCk7Cn0KdXRpbHMuaW5oZXJpdHMoU0hBNTEyLCBCbG9ja0hhc2gpOwpleHBvcnRzLnNoYTUxMiA9IFNIQTUxMjsKClNIQTUxMi5ibG9ja1NpemUgPSAxMDI0OwpTSEE1MTIub3V0U2l6ZSA9IDUxMjsKU0hBNTEyLmhtYWNTdHJlbmd0aCA9IDE5MjsKU0hBNTEyLnBhZExlbmd0aCA9IDEyODsKClNIQTUxMi5wcm90b3R5cGUuX3ByZXBhcmVCbG9jayA9IGZ1bmN0aW9uIF9wcmVwYXJlQmxvY2sobXNnLCBzdGFydCkgewogIHZhciBXID0gdGhpcy5XOwoKICAvLyAzMiB4IDMyYml0IHdvcmRzCiAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgaSsrKQogICAgV1tpXSA9IG1zZ1tzdGFydCArIGldOwogIGZvciAoOyBpIDwgVy5sZW5ndGg7IGkgKz0gMikgewogICAgdmFyIGMwX2hpID0gZzFfNTEyX2hpKFdbaSAtIDRdLCBXW2kgLSAzXSk7ICAvLyBpIC0gMgogICAgdmFyIGMwX2xvID0gZzFfNTEyX2xvKFdbaSAtIDRdLCBXW2kgLSAzXSk7CiAgICB2YXIgYzFfaGkgPSBXW2kgLSAxNF07ICAvLyBpIC0gNwogICAgdmFyIGMxX2xvID0gV1tpIC0gMTNdOwogICAgdmFyIGMyX2hpID0gZzBfNTEyX2hpKFdbaSAtIDMwXSwgV1tpIC0gMjldKTsgIC8vIGkgLSAxNQogICAgdmFyIGMyX2xvID0gZzBfNTEyX2xvKFdbaSAtIDMwXSwgV1tpIC0gMjldKTsKICAgIHZhciBjM19oaSA9IFdbaSAtIDMyXTsgIC8vIGkgLSAxNgogICAgdmFyIGMzX2xvID0gV1tpIC0gMzFdOwoKICAgIFdbaV0gPSBzdW02NF80X2hpKGMwX2hpLCBjMF9sbywKICAgICAgICAgICAgICAgICAgICAgIGMxX2hpLCBjMV9sbywKICAgICAgICAgICAgICAgICAgICAgIGMyX2hpLCBjMl9sbywKICAgICAgICAgICAgICAgICAgICAgIGMzX2hpLCBjM19sbyk7CiAgICBXW2kgKyAxXSA9IHN1bTY0XzRfbG8oYzBfaGksIGMwX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgIGMxX2hpLCBjMV9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICBjMl9oaSwgYzJfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgYzNfaGksIGMzX2xvKTsKICB9Cn07CgpTSEE1MTIucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiBfdXBkYXRlKG1zZywgc3RhcnQpIHsKICB0aGlzLl9wcmVwYXJlQmxvY2sobXNnLCBzdGFydCk7CgogIHZhciBXID0gdGhpcy5XOwoKICB2YXIgYWggPSB0aGlzLmhbMF07CiAgdmFyIGFsID0gdGhpcy5oWzFdOwogIHZhciBiaCA9IHRoaXMuaFsyXTsKICB2YXIgYmwgPSB0aGlzLmhbM107CiAgdmFyIGNoID0gdGhpcy5oWzRdOwogIHZhciBjbCA9IHRoaXMuaFs1XTsKICB2YXIgZGggPSB0aGlzLmhbNl07CiAgdmFyIGRsID0gdGhpcy5oWzddOwogIHZhciBlaCA9IHRoaXMuaFs4XTsKICB2YXIgZWwgPSB0aGlzLmhbOV07CiAgdmFyIGZoID0gdGhpcy5oWzEwXTsKICB2YXIgZmwgPSB0aGlzLmhbMTFdOwogIHZhciBnaCA9IHRoaXMuaFsxMl07CiAgdmFyIGdsID0gdGhpcy5oWzEzXTsKICB2YXIgaGggPSB0aGlzLmhbMTRdOwogIHZhciBobCA9IHRoaXMuaFsxNV07CgogIGFzc2VydCh0aGlzLmsubGVuZ3RoID09PSBXLmxlbmd0aCk7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBXLmxlbmd0aDsgaSArPSAyKSB7CiAgICB2YXIgYzBfaGkgPSBoaDsKICAgIHZhciBjMF9sbyA9IGhsOwogICAgdmFyIGMxX2hpID0gczFfNTEyX2hpKGVoLCBlbCk7CiAgICB2YXIgYzFfbG8gPSBzMV81MTJfbG8oZWgsIGVsKTsKICAgIHZhciBjMl9oaSA9IGNoNjRfaGkoZWgsIGVsLCBmaCwgZmwsIGdoLCBnbCk7CiAgICB2YXIgYzJfbG8gPSBjaDY0X2xvKGVoLCBlbCwgZmgsIGZsLCBnaCwgZ2wpOwogICAgdmFyIGMzX2hpID0gdGhpcy5rW2ldOwogICAgdmFyIGMzX2xvID0gdGhpcy5rW2kgKyAxXTsKICAgIHZhciBjNF9oaSA9IFdbaV07CiAgICB2YXIgYzRfbG8gPSBXW2kgKyAxXTsKCiAgICB2YXIgVDFfaGkgPSBzdW02NF81X2hpKGMwX2hpLCBjMF9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgYzFfaGksIGMxX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjMl9oaSwgYzJfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGMzX2hpLCBjM19sbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgYzRfaGksIGM0X2xvKTsKICAgIHZhciBUMV9sbyA9IHN1bTY0XzVfbG8oYzBfaGksIGMwX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjMV9oaSwgYzFfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGMyX2hpLCBjMl9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgYzNfaGksIGMzX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjNF9oaSwgYzRfbG8pOwoKICAgIHZhciBjMF9oaSA9IHMwXzUxMl9oaShhaCwgYWwpOwogICAgdmFyIGMwX2xvID0gczBfNTEyX2xvKGFoLCBhbCk7CiAgICB2YXIgYzFfaGkgPSBtYWo2NF9oaShhaCwgYWwsIGJoLCBibCwgY2gsIGNsKTsKICAgIHZhciBjMV9sbyA9IG1hajY0X2xvKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wpOwoKICAgIHZhciBUMl9oaSA9IHN1bTY0X2hpKGMwX2hpLCBjMF9sbywgYzFfaGksIGMxX2xvKTsKICAgIHZhciBUMl9sbyA9IHN1bTY0X2xvKGMwX2hpLCBjMF9sbywgYzFfaGksIGMxX2xvKTsKCiAgICBoaCA9IGdoOwogICAgaGwgPSBnbDsKCiAgICBnaCA9IGZoOwogICAgZ2wgPSBmbDsKCiAgICBmaCA9IGVoOwogICAgZmwgPSBlbDsKCiAgICBlaCA9IHN1bTY0X2hpKGRoLCBkbCwgVDFfaGksIFQxX2xvKTsKICAgIGVsID0gc3VtNjRfbG8oZGwsIGRsLCBUMV9oaSwgVDFfbG8pOwoKICAgIGRoID0gY2g7CiAgICBkbCA9IGNsOwoKICAgIGNoID0gYmg7CiAgICBjbCA9IGJsOwoKICAgIGJoID0gYWg7CiAgICBibCA9IGFsOwoKICAgIGFoID0gc3VtNjRfaGkoVDFfaGksIFQxX2xvLCBUMl9oaSwgVDJfbG8pOwogICAgYWwgPSBzdW02NF9sbyhUMV9oaSwgVDFfbG8sIFQyX2hpLCBUMl9sbyk7CiAgfQoKICBzdW02NCh0aGlzLmgsIDAsIGFoLCBhbCk7CiAgc3VtNjQodGhpcy5oLCAyLCBiaCwgYmwpOwogIHN1bTY0KHRoaXMuaCwgNCwgY2gsIGNsKTsKICBzdW02NCh0aGlzLmgsIDYsIGRoLCBkbCk7CiAgc3VtNjQodGhpcy5oLCA4LCBlaCwgZWwpOwogIHN1bTY0KHRoaXMuaCwgMTAsIGZoLCBmbCk7CiAgc3VtNjQodGhpcy5oLCAxMiwgZ2gsIGdsKTsKICBzdW02NCh0aGlzLmgsIDE0LCBoaCwgaGwpOwp9OwoKU0hBNTEyLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHV0aWxzLnRvSGV4MzIodGhpcy5oLCAnYmlnJyk7CiAgZWxzZQogICAgcmV0dXJuIHV0aWxzLnNwbGl0MzIodGhpcy5oLCAnYmlnJyk7Cn07CgpmdW5jdGlvbiBTSEEzODQoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNIQTM4NCkpCiAgICByZXR1cm4gbmV3IFNIQTM4NCgpOwoKICBTSEE1MTIuY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4Y2JiYjlkNWQsIDB4YzEwNTllZDgsCiAgICAgICAgICAgICAweDYyOWEyOTJhLCAweDM2N2NkNTA3LAogICAgICAgICAgICAgMHg5MTU5MDE1YSwgMHgzMDcwZGQxNywKICAgICAgICAgICAgIDB4MTUyZmVjZDgsIDB4ZjcwZTU5MzksCiAgICAgICAgICAgICAweDY3MzMyNjY3LCAweGZmYzAwYjMxLAogICAgICAgICAgICAgMHg4ZWI0NGE4NywgMHg2ODU4MTUxMSwKICAgICAgICAgICAgIDB4ZGIwYzJlMGQsIDB4NjRmOThmYTcsCiAgICAgICAgICAgICAweDQ3YjU0ODFkLCAweGJlZmE0ZmE0IF07Cn0KdXRpbHMuaW5oZXJpdHMoU0hBMzg0LCBTSEE1MTIpOwpleHBvcnRzLnNoYTM4NCA9IFNIQTM4NDsKClNIQTM4NC5ibG9ja1NpemUgPSAxMDI0OwpTSEEzODQub3V0U2l6ZSA9IDM4NDsKU0hBMzg0LmhtYWNTdHJlbmd0aCA9IDE5MjsKU0hBMzg0LnBhZExlbmd0aCA9IDEyODsKClNIQTM4NC5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICBpZiAoZW5jID09PSAnaGV4JykKICAgIHJldHVybiB1dGlscy50b0hleDMyKHRoaXMuaC5zbGljZSgwLCAxMiksICdiaWcnKTsKICBlbHNlCiAgICByZXR1cm4gdXRpbHMuc3BsaXQzMih0aGlzLmguc2xpY2UoMCwgMTIpLCAnYmlnJyk7Cn07CgpmdW5jdGlvbiBTSEExKCkgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTSEExKSkKICAgIHJldHVybiBuZXcgU0hBMSgpOwoKICBCbG9ja0hhc2guY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4Njc0NTIzMDEsIDB4ZWZjZGFiODksIDB4OThiYWRjZmUsCiAgICAgICAgICAgICAweDEwMzI1NDc2LCAweGMzZDJlMWYwIF07CiAgdGhpcy5XID0gbmV3IEFycmF5KDgwKTsKfQoKdXRpbHMuaW5oZXJpdHMoU0hBMSwgQmxvY2tIYXNoKTsKZXhwb3J0cy5zaGExID0gU0hBMTsKClNIQTEuYmxvY2tTaXplID0gNTEyOwpTSEExLm91dFNpemUgPSAxNjA7ClNIQTEuaG1hY1N0cmVuZ3RoID0gODA7ClNIQTEucGFkTGVuZ3RoID0gNjQ7CgpTSEExLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gX3VwZGF0ZShtc2csIHN0YXJ0KSB7CiAgdmFyIFcgPSB0aGlzLlc7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykKICAgIFdbaV0gPSBtc2dbc3RhcnQgKyBpXTsKCiAgZm9yKDsgaSA8IFcubGVuZ3RoOyBpKyspCiAgICBXW2ldID0gcm90bDMyKFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl0sIDEpOwoKICB2YXIgYSA9IHRoaXMuaFswXTsKICB2YXIgYiA9IHRoaXMuaFsxXTsKICB2YXIgYyA9IHRoaXMuaFsyXTsKICB2YXIgZCA9IHRoaXMuaFszXTsKICB2YXIgZSA9IHRoaXMuaFs0XTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBXLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgcyA9IH5+KGkgLyAyMCk7CiAgICB2YXIgdCA9IHN1bTMyXzUocm90bDMyKGEsIDUpLCBmdF8xKHMsIGIsIGMsIGQpLCBlLCBXW2ldLCBzaGExX0tbc10pOwogICAgZSA9IGQ7CiAgICBkID0gYzsKICAgIGMgPSByb3RsMzIoYiwgMzApOwogICAgYiA9IGE7CiAgICBhID0gdDsKICB9CgogIHRoaXMuaFswXSA9IHN1bTMyKHRoaXMuaFswXSwgYSk7CiAgdGhpcy5oWzFdID0gc3VtMzIodGhpcy5oWzFdLCBiKTsKICB0aGlzLmhbMl0gPSBzdW0zMih0aGlzLmhbMl0sIGMpOwogIHRoaXMuaFszXSA9IHN1bTMyKHRoaXMuaFszXSwgZCk7CiAgdGhpcy5oWzRdID0gc3VtMzIodGhpcy5oWzRdLCBlKTsKfTsKClNIQTEucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiBkaWdlc3QoZW5jKSB7CiAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICByZXR1cm4gdXRpbHMudG9IZXgzMih0aGlzLmgsICdiaWcnKTsKICBlbHNlCiAgICByZXR1cm4gdXRpbHMuc3BsaXQzMih0aGlzLmgsICdiaWcnKTsKfTsKCmZ1bmN0aW9uIGNoMzIoeCwgeSwgeikgewogIHJldHVybiAoeCAmIHkpIF4gKCh+eCkgJiB6KTsKfQoKZnVuY3Rpb24gbWFqMzIoeCwgeSwgeikgewogIHJldHVybiAoeCAmIHkpIF4gKHggJiB6KSBeICh5ICYgeik7Cn0KCmZ1bmN0aW9uIHAzMih4LCB5LCB6KSB7CiAgcmV0dXJuIHggXiB5IF4gejsKfQoKZnVuY3Rpb24gczBfMjU2KHgpIHsKICByZXR1cm4gcm90cjMyKHgsIDIpIF4gcm90cjMyKHgsIDEzKSBeIHJvdHIzMih4LCAyMik7Cn0KCmZ1bmN0aW9uIHMxXzI1Nih4KSB7CiAgcmV0dXJuIHJvdHIzMih4LCA2KSBeIHJvdHIzMih4LCAxMSkgXiByb3RyMzIoeCwgMjUpOwp9CgpmdW5jdGlvbiBnMF8yNTYoeCkgewogIHJldHVybiByb3RyMzIoeCwgNykgXiByb3RyMzIoeCwgMTgpIF4gKHggPj4+IDMpOwp9CgpmdW5jdGlvbiBnMV8yNTYoeCkgewogIHJldHVybiByb3RyMzIoeCwgMTcpIF4gcm90cjMyKHgsIDE5KSBeICh4ID4+PiAxMCk7Cn0KCmZ1bmN0aW9uIGZ0XzEocywgeCwgeSwgeikgewogIGlmIChzID09PSAwKQogICAgcmV0dXJuIGNoMzIoeCwgeSwgeik7CiAgaWYgKHMgPT09IDEgfHwgcyA9PT0gMykKICAgIHJldHVybiBwMzIoeCwgeSwgeik7CiAgaWYgKHMgPT09IDIpCiAgICByZXR1cm4gbWFqMzIoeCwgeSwgeik7Cn0KCmZ1bmN0aW9uIGNoNjRfaGkoeGgsIHhsLCB5aCwgeWwsIHpoLCB6bCkgewogIHZhciByID0gKHhoICYgeWgpIF4gKCh+eGgpICYgemgpOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIGNoNjRfbG8oeGgsIHhsLCB5aCwgeWwsIHpoLCB6bCkgewogIHZhciByID0gKHhsICYgeWwpIF4gKCh+eGwpICYgemwpOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIG1hajY0X2hpKHhoLCB4bCwgeWgsIHlsLCB6aCwgemwpIHsKICB2YXIgciA9ICh4aCAmIHloKSBeICh4aCAmIHpoKSBeICh5aCAmIHpoKTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBtYWo2NF9sbyh4aCwgeGwsIHloLCB5bCwgemgsIHpsKSB7CiAgdmFyIHIgPSAoeGwgJiB5bCkgXiAoeGwgJiB6bCkgXiAoeWwgJiB6bCk7CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gczBfNTEyX2hpKHhoLCB4bCkgewogIHZhciBjMF9oaSA9IHJvdHI2NF9oaSh4aCwgeGwsIDI4KTsKICB2YXIgYzFfaGkgPSByb3RyNjRfaGkoeGwsIHhoLCAyKTsgIC8vIDM0CiAgdmFyIGMyX2hpID0gcm90cjY0X2hpKHhsLCB4aCwgNyk7ICAvLyAzOQoKICB2YXIgciA9IGMwX2hpIF4gYzFfaGkgXiBjMl9oaTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBzMF81MTJfbG8oeGgsIHhsKSB7CiAgdmFyIGMwX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgMjgpOwogIHZhciBjMV9sbyA9IHJvdHI2NF9sbyh4bCwgeGgsIDIpOyAgLy8gMzQKICB2YXIgYzJfbG8gPSByb3RyNjRfbG8oeGwsIHhoLCA3KTsgIC8vIDM5CgogIHZhciByID0gYzBfbG8gXiBjMV9sbyBeIGMyX2xvOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIHMxXzUxMl9oaSh4aCwgeGwpIHsKICB2YXIgYzBfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCAxNCk7CiAgdmFyIGMxX2hpID0gcm90cjY0X2hpKHhoLCB4bCwgMTgpOwogIHZhciBjMl9oaSA9IHJvdHI2NF9oaSh4bCwgeGgsIDkpOyAgLy8gNDEKCiAgdmFyIHIgPSBjMF9oaSBeIGMxX2hpIF4gYzJfaGk7CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gczFfNTEyX2xvKHhoLCB4bCkgewogIHZhciBjMF9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDE0KTsKICB2YXIgYzFfbG8gPSByb3RyNjRfbG8oeGgsIHhsLCAxOCk7CiAgdmFyIGMyX2xvID0gcm90cjY0X2xvKHhsLCB4aCwgOSk7ICAvLyA0MQoKICB2YXIgciA9IGMwX2xvIF4gYzFfbG8gXiBjMl9sbzsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBnMF81MTJfaGkoeGgsIHhsKSB7CiAgdmFyIGMwX2hpID0gcm90cjY0X2hpKHhoLCB4bCwgMSk7CiAgdmFyIGMxX2hpID0gcm90cjY0X2hpKHhoLCB4bCwgOCk7CiAgdmFyIGMyX2hpID0gc2hyNjRfaGkoeGgsIHhsLCA3KTsKCiAgdmFyIHIgPSBjMF9oaSBeIGMxX2hpIF4gYzJfaGk7CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gZzBfNTEyX2xvKHhoLCB4bCkgewogIHZhciBjMF9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDEpOwogIHZhciBjMV9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDgpOwogIHZhciBjMl9sbyA9IHNocjY0X2xvKHhoLCB4bCwgNyk7CgogIHZhciByID0gYzBfbG8gXiBjMV9sbyBeIGMyX2xvOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIGcxXzUxMl9oaSh4aCwgeGwpIHsKICB2YXIgYzBfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCAxOSk7CiAgdmFyIGMxX2hpID0gcm90cjY0X2hpKHhsLCB4aCwgMjkpOyAgLy8gNjEKICB2YXIgYzJfaGkgPSBzaHI2NF9oaSh4aCwgeGwsIDYpOwoKICB2YXIgciA9IGMwX2hpIF4gYzFfaGkgXiBjMl9oaTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBnMV81MTJfbG8oeGgsIHhsKSB7CiAgdmFyIGMwX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgMTkpOwogIHZhciBjMV9sbyA9IHJvdHI2NF9sbyh4bCwgeGgsIDI5KTsgIC8vIDYxCiAgdmFyIGMyX2xvID0gc2hyNjRfbG8oeGgsIHhsLCA2KTsKCiAgdmFyIHIgPSBjMF9sbyBeIGMxX2xvIF4gYzJfbG87CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKfSx7Ii4uL2hhc2giOjEyMH1dLDEyNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB1dGlscyA9IGV4cG9ydHM7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CgpmdW5jdGlvbiB0b0FycmF5KG1zZywgZW5jKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkobXNnKSkKICAgIHJldHVybiBtc2cuc2xpY2UoKTsKICBpZiAoIW1zZykKICAgIHJldHVybiBbXTsKICB2YXIgcmVzID0gW107CiAgaWYgKHR5cGVvZiBtc2cgPT09ICdzdHJpbmcnKSB7CiAgICBpZiAoIWVuYykgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBjID0gbXNnLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgdmFyIGhpID0gYyA+PiA4OwogICAgICAgIHZhciBsbyA9IGMgJiAweGZmOwogICAgICAgIGlmIChoaSkKICAgICAgICAgIHJlcy5wdXNoKGhpLCBsbyk7CiAgICAgICAgZWxzZQogICAgICAgICAgcmVzLnB1c2gobG8pOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGVuYyA9PT0gJ2hleCcpIHsKICAgICAgbXNnID0gbXNnLnJlcGxhY2UoL1teYS16MC05XSsvaWcsICcnKTsKICAgICAgaWYgKG1zZy5sZW5ndGggJSAyICE9PSAwKQogICAgICAgIG1zZyA9ICcwJyArIG1zZzsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpICs9IDIpCiAgICAgICAgcmVzLnB1c2gocGFyc2VJbnQobXNnW2ldICsgbXNnW2kgKyAxXSwgMTYpKTsKICAgIH0KICB9IGVsc2UgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspCiAgICAgIHJlc1tpXSA9IG1zZ1tpXSB8IDA7CiAgfQogIHJldHVybiByZXM7Cn0KdXRpbHMudG9BcnJheSA9IHRvQXJyYXk7CgpmdW5jdGlvbiB0b0hleChtc2cpIHsKICB2YXIgcmVzID0gJyc7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspCiAgICByZXMgKz0gemVybzIobXNnW2ldLnRvU3RyaW5nKDE2KSk7CiAgcmV0dXJuIHJlczsKfQp1dGlscy50b0hleCA9IHRvSGV4OwoKZnVuY3Rpb24gaHRvbmwodykgewogIHZhciByZXMgPSAodyA+Pj4gMjQpIHwKICAgICAgICAgICAgKCh3ID4+PiA4KSAmIDB4ZmYwMCkgfAogICAgICAgICAgICAoKHcgPDwgOCkgJiAweGZmMDAwMCkgfAogICAgICAgICAgICAoKHcgJiAweGZmKSA8PCAyNCk7CiAgcmV0dXJuIHJlcyA+Pj4gMDsKfQp1dGlscy5odG9ubCA9IGh0b25sOwoKZnVuY3Rpb24gdG9IZXgzMihtc2csIGVuZGlhbikgewogIHZhciByZXMgPSAnJzsKICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykgewogICAgdmFyIHcgPSBtc2dbaV07CiAgICBpZiAoZW5kaWFuID09PSAnbGl0dGxlJykKICAgICAgdyA9IGh0b25sKHcpOwogICAgcmVzICs9IHplcm84KHcudG9TdHJpbmcoMTYpKTsKICB9CiAgcmV0dXJuIHJlczsKfQp1dGlscy50b0hleDMyID0gdG9IZXgzMjsKCmZ1bmN0aW9uIHplcm8yKHdvcmQpIHsKICBpZiAod29yZC5sZW5ndGggPT09IDEpCiAgICByZXR1cm4gJzAnICsgd29yZDsKICBlbHNlCiAgICByZXR1cm4gd29yZDsKfQp1dGlscy56ZXJvMiA9IHplcm8yOwoKZnVuY3Rpb24gemVybzgod29yZCkgewogIGlmICh3b3JkLmxlbmd0aCA9PT0gNykKICAgIHJldHVybiAnMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSA2KQogICAgcmV0dXJuICcwMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSA1KQogICAgcmV0dXJuICcwMDAnICsgd29yZDsKICBlbHNlIGlmICh3b3JkLmxlbmd0aCA9PT0gNCkKICAgIHJldHVybiAnMDAwMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSAzKQogICAgcmV0dXJuICcwMDAwMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSAyKQogICAgcmV0dXJuICcwMDAwMDAnICsgd29yZDsKICBlbHNlIGlmICh3b3JkLmxlbmd0aCA9PT0gMSkKICAgIHJldHVybiAnMDAwMDAwMCcgKyB3b3JkOwogIGVsc2UKICAgIHJldHVybiB3b3JkOwp9CnV0aWxzLnplcm84ID0gemVybzg7CgpmdW5jdGlvbiBqb2luMzIobXNnLCBzdGFydCwgZW5kLCBlbmRpYW4pIHsKICB2YXIgbGVuID0gZW5kIC0gc3RhcnQ7CiAgYXNzZXJ0KGxlbiAlIDQgPT09IDApOwogIHZhciByZXMgPSBuZXcgQXJyYXkobGVuIC8gNCk7CiAgZm9yICh2YXIgaSA9IDAsIGsgPSBzdGFydDsgaSA8IHJlcy5sZW5ndGg7IGkrKywgayArPSA0KSB7CiAgICB2YXIgdzsKICAgIGlmIChlbmRpYW4gPT09ICdiaWcnKQogICAgICB3ID0gKG1zZ1trXSA8PCAyNCkgfCAobXNnW2sgKyAxXSA8PCAxNikgfCAobXNnW2sgKyAyXSA8PCA4KSB8IG1zZ1trICsgM107CiAgICBlbHNlCiAgICAgIHcgPSAobXNnW2sgKyAzXSA8PCAyNCkgfCAobXNnW2sgKyAyXSA8PCAxNikgfCAobXNnW2sgKyAxXSA8PCA4KSB8IG1zZ1trXTsKICAgIHJlc1tpXSA9IHcgPj4+IDA7CiAgfQogIHJldHVybiByZXM7Cn0KdXRpbHMuam9pbjMyID0gam9pbjMyOwoKZnVuY3Rpb24gc3BsaXQzMihtc2csIGVuZGlhbikgewogIHZhciByZXMgPSBuZXcgQXJyYXkobXNnLmxlbmd0aCAqIDQpOwogIGZvciAodmFyIGkgPSAwLCBrID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKywgayArPSA0KSB7CiAgICB2YXIgbSA9IG1zZ1tpXTsKICAgIGlmIChlbmRpYW4gPT09ICdiaWcnKSB7CiAgICAgIHJlc1trXSA9IG0gPj4+IDI0OwogICAgICByZXNbayArIDFdID0gKG0gPj4+IDE2KSAmIDB4ZmY7CiAgICAgIHJlc1trICsgMl0gPSAobSA+Pj4gOCkgJiAweGZmOwogICAgICByZXNbayArIDNdID0gbSAmIDB4ZmY7CiAgICB9IGVsc2UgewogICAgICByZXNbayArIDNdID0gbSA+Pj4gMjQ7CiAgICAgIHJlc1trICsgMl0gPSAobSA+Pj4gMTYpICYgMHhmZjsKICAgICAgcmVzW2sgKyAxXSA9IChtID4+PiA4KSAmIDB4ZmY7CiAgICAgIHJlc1trXSA9IG0gJiAweGZmOwogICAgfQogIH0KICByZXR1cm4gcmVzOwp9CnV0aWxzLnNwbGl0MzIgPSBzcGxpdDMyOwoKZnVuY3Rpb24gcm90cjMyKHcsIGIpIHsKICByZXR1cm4gKHcgPj4+IGIpIHwgKHcgPDwgKDMyIC0gYikpOwp9CnV0aWxzLnJvdHIzMiA9IHJvdHIzMjsKCmZ1bmN0aW9uIHJvdGwzMih3LCBiKSB7CiAgcmV0dXJuICh3IDw8IGIpIHwgKHcgPj4+ICgzMiAtIGIpKTsKfQp1dGlscy5yb3RsMzIgPSByb3RsMzI7CgpmdW5jdGlvbiBzdW0zMihhLCBiKSB7CiAgcmV0dXJuIChhICsgYikgPj4+IDA7Cn0KdXRpbHMuc3VtMzIgPSBzdW0zMjsKCmZ1bmN0aW9uIHN1bTMyXzMoYSwgYiwgYykgewogIHJldHVybiAoYSArIGIgKyBjKSA+Pj4gMDsKfQp1dGlscy5zdW0zMl8zID0gc3VtMzJfMzsKCmZ1bmN0aW9uIHN1bTMyXzQoYSwgYiwgYywgZCkgewogIHJldHVybiAoYSArIGIgKyBjICsgZCkgPj4+IDA7Cn0KdXRpbHMuc3VtMzJfNCA9IHN1bTMyXzQ7CgpmdW5jdGlvbiBzdW0zMl81KGEsIGIsIGMsIGQsIGUpIHsKICByZXR1cm4gKGEgKyBiICsgYyArIGQgKyBlKSA+Pj4gMDsKfQp1dGlscy5zdW0zMl81ID0gc3VtMzJfNTsKCmZ1bmN0aW9uIGFzc2VydChjb25kLCBtc2cpIHsKICBpZiAoIWNvbmQpCiAgICB0aHJvdyBuZXcgRXJyb3IobXNnIHx8ICdBc3NlcnRpb24gZmFpbGVkJyk7Cn0KdXRpbHMuYXNzZXJ0ID0gYXNzZXJ0OwoKdXRpbHMuaW5oZXJpdHMgPSBpbmhlcml0czsKCmZ1bmN0aW9uIHN1bTY0KGJ1ZiwgcG9zLCBhaCwgYWwpIHsKICB2YXIgYmggPSBidWZbcG9zXTsKICB2YXIgYmwgPSBidWZbcG9zICsgMV07CgogIHZhciBsbyA9IChhbCArIGJsKSA+Pj4gMDsKICB2YXIgaGkgPSAobG8gPCBhbCA/IDEgOiAwKSArIGFoICsgYmg7CiAgYnVmW3Bvc10gPSBoaSA+Pj4gMDsKICBidWZbcG9zICsgMV0gPSBsbzsKfQpleHBvcnRzLnN1bTY0ID0gc3VtNjQ7CgpmdW5jdGlvbiBzdW02NF9oaShhaCwgYWwsIGJoLCBibCkgewogIHZhciBsbyA9IChhbCArIGJsKSA+Pj4gMDsKICB2YXIgaGkgPSAobG8gPCBhbCA/IDEgOiAwKSArIGFoICsgYmg7CiAgcmV0dXJuIGhpID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0X2hpID0gc3VtNjRfaGk7CgpmdW5jdGlvbiBzdW02NF9sbyhhaCwgYWwsIGJoLCBibCkgewogIHZhciBsbyA9IGFsICsgYmw7CiAgcmV0dXJuIGxvID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0X2xvID0gc3VtNjRfbG87CgpmdW5jdGlvbiBzdW02NF80X2hpKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wsIGRoLCBkbCkgewogIHZhciBjYXJyeSA9IDA7CiAgdmFyIGxvID0gYWw7CiAgbG8gPSAobG8gKyBibCkgPj4+IDA7CiAgY2FycnkgKz0gbG8gPCBhbCA/IDEgOiAwOwogIGxvID0gKGxvICsgY2wpID4+PiAwOwogIGNhcnJ5ICs9IGxvIDwgY2wgPyAxIDogMDsKICBsbyA9IChsbyArIGRsKSA+Pj4gMDsKICBjYXJyeSArPSBsbyA8IGRsID8gMSA6IDA7CgogIHZhciBoaSA9IGFoICsgYmggKyBjaCArIGRoICsgY2Fycnk7CiAgcmV0dXJuIGhpID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0XzRfaGkgPSBzdW02NF80X2hpOwoKZnVuY3Rpb24gc3VtNjRfNF9sbyhhaCwgYWwsIGJoLCBibCwgY2gsIGNsLCBkaCwgZGwpIHsKICB2YXIgbG8gPSBhbCArIGJsICsgY2wgKyBkbDsKICByZXR1cm4gbG8gPj4+IDA7Cn07CmV4cG9ydHMuc3VtNjRfNF9sbyA9IHN1bTY0XzRfbG87CgpmdW5jdGlvbiBzdW02NF81X2hpKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wsIGRoLCBkbCwgZWgsIGVsKSB7CiAgdmFyIGNhcnJ5ID0gMDsKICB2YXIgbG8gPSBhbDsKICBsbyA9IChsbyArIGJsKSA+Pj4gMDsKICBjYXJyeSArPSBsbyA8IGFsID8gMSA6IDA7CiAgbG8gPSAobG8gKyBjbCkgPj4+IDA7CiAgY2FycnkgKz0gbG8gPCBjbCA/IDEgOiAwOwogIGxvID0gKGxvICsgZGwpID4+PiAwOwogIGNhcnJ5ICs9IGxvIDwgZGwgPyAxIDogMDsKICBsbyA9IChsbyArIGVsKSA+Pj4gMDsKICBjYXJyeSArPSBsbyA8IGVsID8gMSA6IDA7CgogIHZhciBoaSA9IGFoICsgYmggKyBjaCArIGRoICsgZWggKyBjYXJyeTsKICByZXR1cm4gaGkgPj4+IDA7Cn07CmV4cG9ydHMuc3VtNjRfNV9oaSA9IHN1bTY0XzVfaGk7CgpmdW5jdGlvbiBzdW02NF81X2xvKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wsIGRoLCBkbCwgZWgsIGVsKSB7CiAgdmFyIGxvID0gYWwgKyBibCArIGNsICsgZGwgKyBlbDsKCiAgcmV0dXJuIGxvID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0XzVfbG8gPSBzdW02NF81X2xvOwoKZnVuY3Rpb24gcm90cjY0X2hpKGFoLCBhbCwgbnVtKSB7CiAgdmFyIHIgPSAoYWwgPDwgKDMyIC0gbnVtKSkgfCAoYWggPj4+IG51bSk7CiAgcmV0dXJuIHIgPj4+IDA7Cn07CmV4cG9ydHMucm90cjY0X2hpID0gcm90cjY0X2hpOwoKZnVuY3Rpb24gcm90cjY0X2xvKGFoLCBhbCwgbnVtKSB7CiAgdmFyIHIgPSAoYWggPDwgKDMyIC0gbnVtKSkgfCAoYWwgPj4+IG51bSk7CiAgcmV0dXJuIHIgPj4+IDA7Cn07CmV4cG9ydHMucm90cjY0X2xvID0gcm90cjY0X2xvOwoKZnVuY3Rpb24gc2hyNjRfaGkoYWgsIGFsLCBudW0pIHsKICByZXR1cm4gYWggPj4+IG51bTsKfTsKZXhwb3J0cy5zaHI2NF9oaSA9IHNocjY0X2hpOwoKZnVuY3Rpb24gc2hyNjRfbG8oYWgsIGFsLCBudW0pIHsKICB2YXIgciA9IChhaCA8PCAoMzIgLSBudW0pKSB8IChhbCA+Pj4gbnVtKTsKICByZXR1cm4gciA+Pj4gMDsKfTsKZXhwb3J0cy5zaHI2NF9sbyA9IHNocjY0X2xvOwoKfSx7ImluaGVyaXRzIjoxMjl9XSwxMjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKHByb2Nlc3MpewovKiEgaGVsbG9qcyB2MS4xMi4wIHwgKGMpIDIwMTItMjAxNiBBbmRyZXcgRG9kc29uIHwgTUlUIGh0dHBzOi8vYWRvZHNvbi5jb20vaGVsbG8uanMvTElDRU5TRSAqLw0KLy8gRVM1IE9iamVjdC5jcmVhdGUKaWYgKCFPYmplY3QuY3JlYXRlKSB7CgoJLy8gU2hpbSwgT2JqZWN0IGNyZWF0ZQoJLy8gQSBzaGltIGZvciBPYmplY3QuY3JlYXRlKCksIGl0IGFkZHMgYSBwcm90b3R5cGUgdG8gYSBuZXcgb2JqZWN0CglPYmplY3QuY3JlYXRlID0gKGZ1bmN0aW9uKCkgewoKCQlmdW5jdGlvbiBGKCkge30KCgkJcmV0dXJuIGZ1bmN0aW9uKG8pIHsKCgkJCWlmIChhcmd1bWVudHMubGVuZ3RoICE9IDEpIHsKCQkJCXRocm93IG5ldyBFcnJvcignT2JqZWN0LmNyZWF0ZSBpbXBsZW1lbnRhdGlvbiBvbmx5IGFjY2VwdHMgb25lIHBhcmFtZXRlci4nKTsKCQkJfQoKCQkJRi5wcm90b3R5cGUgPSBvOwoJCQlyZXR1cm4gbmV3IEYoKTsKCQl9OwoKCX0pKCk7Cgp9CgovLyBFUzUgT2JqZWN0LmtleXMKaWYgKCFPYmplY3Qua2V5cykgewoJT2JqZWN0LmtleXMgPSBmdW5jdGlvbihvLCBrLCByKSB7CgkJciA9IFtdOwoJCWZvciAoayBpbiBvKSB7CgkJCWlmIChyLmhhc093blByb3BlcnR5LmNhbGwobywgaykpCgkJCQlyLnB1c2goayk7CgkJfQoKCQlyZXR1cm4gcjsKCX07Cn0KCi8vIEVTNSBbXS5pbmRleE9mCmlmICghQXJyYXkucHJvdG90eXBlLmluZGV4T2YpIHsKCUFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24ocykgewoKCQlmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMubGVuZ3RoOyBqKyspIHsKCQkJaWYgKHRoaXNbal0gPT09IHMpIHsKCQkJCXJldHVybiBqOwoJCQl9CgkJfQoKCQlyZXR1cm4gLTE7Cgl9Owp9CgovLyBFUzUgW10uZm9yRWFjaAppZiAoIUFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSB7CglBcnJheS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGZ1bi8qLCB0aGlzQXJnKi8pIHsKCgkJaWYgKHRoaXMgPT09IHZvaWQgMCB8fCB0aGlzID09PSBudWxsKSB7CgkJCXRocm93IG5ldyBUeXBlRXJyb3IoKTsKCQl9CgoJCXZhciB0ID0gT2JqZWN0KHRoaXMpOwoJCXZhciBsZW4gPSB0Lmxlbmd0aCA+Pj4gMDsKCQlpZiAodHlwZW9mIGZ1biAhPT0gJ2Z1bmN0aW9uJykgewoJCQl0aHJvdyBuZXcgVHlwZUVycm9yKCk7CgkJfQoKCQl2YXIgdGhpc0FyZyA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMiA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgMDsKCQlmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CgkJCWlmIChpIGluIHQpIHsKCQkJCWZ1bi5jYWxsKHRoaXNBcmcsIHRbaV0sIGksIHQpOwoJCQl9CgkJfQoKCQlyZXR1cm4gdGhpczsKCX07Cn0KCi8vIEVTNSBbXS5maWx0ZXIKaWYgKCFBcnJheS5wcm90b3R5cGUuZmlsdGVyKSB7CglBcnJheS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24oZnVuLCB0aGlzQXJnKSB7CgoJCXZhciBhID0gW107CgkJdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbCwgaSwgdCkgewoJCQlpZiAoZnVuLmNhbGwodGhpc0FyZyB8fCB2b2lkIDAsIHZhbCwgaSwgdCkpIHsKCQkJCWEucHVzaCh2YWwpOwoJCQl9CgkJfSk7CgoJCXJldHVybiBhOwoJfTsKfQoKLy8gUHJvZHVjdGlvbiBzdGVwcyBvZiBFQ01BLTI2MiwgRWRpdGlvbiA1LCAxNS40LjQuMTkKLy8gUmVmZXJlbmNlOiBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjQuNC4xOQppZiAoIUFycmF5LnByb3RvdHlwZS5tYXApIHsKCglBcnJheS5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24oZnVuLCB0aGlzQXJnKSB7CgoJCXZhciBhID0gW107CgkJdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbCwgaSwgdCkgewoJCQlhLnB1c2goZnVuLmNhbGwodGhpc0FyZyB8fCB2b2lkIDAsIHZhbCwgaSwgdCkpOwoJCX0pOwoKCQlyZXR1cm4gYTsKCX07Cn0KCi8vIEVTNSBpc0FycmF5CmlmICghQXJyYXkuaXNBcnJheSkgewoKCS8vIEZ1bmN0aW9uIEFycmF5LmlzQXJyYXkKCUFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbihvKSB7CgkJcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSA9PT0gJ1tvYmplY3QgQXJyYXldJzsKCX07Cgp9CgovLyBUZXN0IGZvciBsb2NhdGlvbi5hc3NpZ24KaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHR5cGVvZiB3aW5kb3cubG9jYXRpb24gPT09ICdvYmplY3QnICYmICF3aW5kb3cubG9jYXRpb24uYXNzaWduKSB7CgoJd2luZG93LmxvY2F0aW9uLmFzc2lnbiA9IGZ1bmN0aW9uKHVybCkgewoJCXdpbmRvdy5sb2NhdGlvbiA9IHVybDsKCX07Cgp9CgovLyBUZXN0IGZvciBGdW5jdGlvbi5iaW5kCmlmICghRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpIHsKCgkvLyBNRE4KCS8vIFBvbHlmaWxsIElFOCwgZG9lcyBub3Qgc3VwcG9ydCBuYXRpdmUgRnVuY3Rpb24uYmluZAoJRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbihiKSB7CgoJCWlmICh0eXBlb2YgdGhpcyAhPT0gJ2Z1bmN0aW9uJykgewoJCQl0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbi5wcm90b3R5cGUuYmluZCAtIHdoYXQgaXMgdHJ5aW5nIHRvIGJlIGJvdW5kIGlzIG5vdCBjYWxsYWJsZScpOwoJCX0KCgkJZnVuY3Rpb24gQygpIHt9CgoJCXZhciBhID0gW10uc2xpY2U7CgkJdmFyIGYgPSBhLmNhbGwoYXJndW1lbnRzLCAxKTsKCQl2YXIgX3RoaXMgPSB0aGlzOwoJCXZhciBEID0gZnVuY3Rpb24oKSB7CgkJCXJldHVybiBfdGhpcy5hcHBseSh0aGlzIGluc3RhbmNlb2YgQyA/IHRoaXMgOiBiIHx8IHdpbmRvdywgZi5jb25jYXQoYS5jYWxsKGFyZ3VtZW50cykpKTsKCQl9OwoKCQlDLnByb3RvdHlwZSA9IHRoaXMucHJvdG90eXBlOwoJCUQucHJvdG90eXBlID0gbmV3IEMoKTsKCgkJcmV0dXJuIEQ7Cgl9OwoKfQoKLyoqCiAqIEBoZWxsby5qcwogKgogKiBIZWxsb0pTIGlzIGEgY2xpZW50IHNpZGUgSmF2YXNjcmlwdCBTREsgZm9yIG1ha2luZyBPQXV0aDIgbG9naW5zIGFuZCBzdWJzZXF1ZW50IFJFU1QgY2FsbHMuCiAqCiAqIEBhdXRob3IgQW5kcmV3IERvZHNvbgogKiBAd2Vic2l0ZSBodHRwczovL2Fkb2Rzb24uY29tL2hlbGxvLmpzLwogKgogKiBAY29weXJpZ2h0IEFuZHJldyBEb2Rzb24sIDIwMTIgLSAyMDE1CiAqIEBsaWNlbnNlIE1JVDogWW91IGFyZSBmcmVlIHRvIHVzZSBhbmQgbW9kaWZ5IHRoaXMgY29kZSBmb3IgYW55IHVzZSwgb24gdGhlIGNvbmRpdGlvbiB0aGF0IHRoaXMgY29weXJpZ2h0IG5vdGljZSByZW1haW5zLgogKi8KCnZhciBoZWxsbyA9IGZ1bmN0aW9uKG5hbWUpIHsKCXJldHVybiBoZWxsby51c2UobmFtZSk7Cn07CgpoZWxsby51dGlscyA9IHsKCgkvLyBFeHRlbmQgdGhlIGZpcnN0IG9iamVjdCB3aXRoIHRoZSBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIG9mIHRoZSBzZWNvbmQKCWV4dGVuZDogZnVuY3Rpb24ociAvKiwgYVssIGJbLCAuLi5dXSAqLykgewoKCQkvLyBHZXQgdGhlIGFyZ3VtZW50cyBhcyBhbiBhcnJheSBidXQgb21taXQgdGhlIGluaXRpYWwgaXRlbQoJCUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkuZm9yRWFjaChmdW5jdGlvbihhKSB7CgkJCWlmIChBcnJheS5pc0FycmF5KHIpICYmIEFycmF5LmlzQXJyYXkoYSkpIHsKCQkJCUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHIsIGEpOwoJCQl9CgkJCWVsc2UgaWYgKHIgaW5zdGFuY2VvZiBPYmplY3QgJiYgYSBpbnN0YW5jZW9mIE9iamVjdCAmJiByICE9PSBhKSB7CgkJCQlmb3IgKHZhciB4IGluIGEpIHsKCQkJCQlyW3hdID0gaGVsbG8udXRpbHMuZXh0ZW5kKHJbeF0sIGFbeF0pOwoJCQkJfQoJCQl9CgkJCWVsc2UgewoKCQkJCWlmIChBcnJheS5pc0FycmF5KGEpKSB7CgkJCQkJLy8gQ2xvbmUgaXQKCQkJCQlhID0gYS5zbGljZSgwKTsKCQkJCX0KCgkJCQlyID0gYTsKCQkJfQoJCX0pOwoKCQlyZXR1cm4gcjsKCX0KfTsKCi8vIENvcmUgbGlicmFyeQpoZWxsby51dGlscy5leHRlbmQoaGVsbG8sIHsKCglzZXR0aW5nczogewoKCQkvLyBPQXV0aDIgYXV0aGVudGljYXRpb24gZGVmYXVsdHMKCQlyZWRpcmVjdF91cmk6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJylbMF0sCgkJcmVzcG9uc2VfdHlwZTogJ3Rva2VuJywKCQlkaXNwbGF5OiAncG9wdXAnLAoJCXN0YXRlOiAnJywKCgkJLy8gT0F1dGgxIHNoaW0KCQkvLyBUaGUgcGF0aCB0byB0aGUgT0F1dGgxIHNlcnZlciBmb3Igc2lnbmluZyB1c2VyIHJlcXVlc3RzCgkJLy8gV2FudCB0byByZWNyZWF0ZSB5b3VyIG93bj8gQ2hlY2tvdXQgaHR0cHM6Ly9naXRodWIuY29tL01yU3dpdGNoL25vZGUtb2F1dGgtc2hpbQoJCW9hdXRoX3Byb3h5OiAnaHR0cHM6Ly9hdXRoLXNlcnZlci5oZXJva3VhcHAuY29tL3Byb3h5JywKCgkJLy8gQVBJIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzCgkJdGltZW91dDogMjAwMDAsCgoJCS8vIFBvcHVwIE9wdGlvbnMKCQlwb3B1cDogewoJCQlyZXNpemFibGU6IDEsCgkJCXNjcm9sbGJhcnM6IDEsCgkJCXdpZHRoOiA1MDAsCgkJCWhlaWdodDogNTUwCgkJfSwKCgkJLy8gRGVmYXVsdCBzY29wZQoJCS8vIE1hbnkgc2VydmljZXMgcmVxdWlyZSBhdGxlYXN0IGEgcHJvZmlsZSBzY29wZSwKCQkvLyBIZWxsb0pTIGF1dG9tYXRpYWxseSBpbmNsdWRlcyB0aGUgdmFsdWUgb2YgcHJvdmlkZXIuc2NvcGVfbWFwLmJhc2ljCgkJLy8gSWYgdGhhdCdzIG5vdCByZXF1aXJlZCBpdCBjYW4gYmUgcmVtb3ZlZCB2aWEgaGVsbG8uc2V0dGluZ3Muc2NvcGUubGVuZ3RoID0gMDsKCQlzY29wZTogWydiYXNpYyddLAoKCQkvLyBTY29wZSBNYXBzCgkJLy8gVGhpcyBpcyB0aGUgZGVmYXVsdCBtb2R1bGUgc2NvcGUsIHRoZXNlIGFyZSB0aGUgZGVmYXVsdHMgd2hpY2ggZWFjaCBzZXJ2aWNlIGlzIG1hcHBlZCB0b28uCgkJLy8gQnkgaW5jbHVkaW5nIHRoZW0gaGVyZSBpdCBwcmV2ZW50cyB0aGUgc2NvcGUgZnJvbSBiZWluZyBhcHBsaWVkIGFjY2lkZW50YWxseQoJCXNjb3BlX21hcDogewoJCQliYXNpYzogJycKCQl9LAoKCQkvLyBEZWZhdWx0IHNlcnZpY2UgLyBuZXR3b3JrCgkJZGVmYXVsdF9zZXJ2aWNlOiBudWxsLAoKCQkvLyBGb3JjZSBhdXRoZW50aWNhdGlvbgoJCS8vIFdoZW4gaGVsbG8ubG9naW4gaXMgZmlyZWQuCgkJLy8gKG51bGwpOiBpZ25vcmUgY3VycmVudCBzZXNzaW9uIGV4cGlyeSBhbmQgY29udGludWUgd2l0aCBsb2dpbgoJCS8vICh0cnVlKTogaWdub3JlIGN1cnJlbnQgc2Vzc2lvbiBleHBpcnkgYW5kIGNvbnRpbnVlIHdpdGggbG9naW4sIGFzayBmb3IgdXNlciB0byByZWF1dGhlbnRpY2F0ZQoJCS8vIChmYWxzZSk6IGlmIHRoZSBjdXJyZW50IHNlc3Npb24gbG9va3MgZ29vZCBmb3IgdGhlIHJlcXVlc3Qgc2NvcGVzIHJldHVybiB0aGUgY3VycmVudCBzZXNzaW9uLgoJCWZvcmNlOiBudWxsLAoKCQkvLyBQYWdlIFVSTAoJCS8vIFdoZW4gJ2Rpc3BsYXk9cGFnZScgdGhpcyBwcm9wZXJ0eSBkZWZpbmVzIHdoZXJlIHRoZSB1c2VycyBwYWdlIHNob3VsZCBlbmQgdXAgYWZ0ZXIgcmVkaXJlY3RfdXJpCgkJLy8gVGhzIGNvdWxkIGJlIHByb2JsZW1hdGljIGlmIHRoZSByZWRpcmVjdF91cmkgaXMgaW5kZWVkIHRoZSBmaW5hbCBwbGFjZSwKCQkvLyBUeXBpY2FsbHkgdGhpcyBjaXJjdW12ZW50cyB0aGUgcHJvYmxlbSBvZiB0aGUgcmVkaXJlY3RfdXJsIGJlaW5nIGEgZHVtYiByZWxheSBwYWdlLgoJCXBhZ2VfdXJpOiB3aW5kb3cubG9jYXRpb24uaHJlZgoJfSwKCgkvLyBTZXJ2aWNlIGNvbmZpZ3VyYXRpb24gb2JqZWN0cwoJc2VydmljZXM6IHt9LAoKCS8vIFVzZQoJLy8gRGVmaW5lIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBIZWxsb0pTIGxpYnJhcnkgd2l0aCBhIGRlZmF1bHQgc2VydmljZQoJdXNlOiBmdW5jdGlvbihzZXJ2aWNlKSB7CgoJCS8vIENyZWF0ZSBzZWxmLCB3aGljaCBpbmhlcml0cyBmcm9tIGl0cyBwYXJlbnQKCQl2YXIgc2VsZiA9IE9iamVjdC5jcmVhdGUodGhpcyk7CgoJCS8vIEluaGVyaXQgdGhlIHByb3RvdHlwZSBmcm9tIGl0cyBwYXJlbnQKCQlzZWxmLnNldHRpbmdzID0gT2JqZWN0LmNyZWF0ZSh0aGlzLnNldHRpbmdzKTsKCgkJLy8gRGVmaW5lIHRoZSBkZWZhdWx0IHNlcnZpY2UKCQlpZiAoc2VydmljZSkgewoJCQlzZWxmLnNldHRpbmdzLmRlZmF1bHRfc2VydmljZSA9IHNlcnZpY2U7CgkJfQoKCQkvLyBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgRXZlbnRzCgkJc2VsZi51dGlscy5FdmVudC5jYWxsKHNlbGYpOwoKCQlyZXR1cm4gc2VsZjsKCX0sCgoJLy8gSW5pdGlhbGl6ZQoJLy8gRGVmaW5lIHRoZSBjbGllbnRfaWRzIGZvciB0aGUgZW5kcG9pbnQgc2VydmljZXMKCS8vIEBwYXJhbSBvYmplY3QgbywgY29udGFpbnMgYSBrZXkgdmFsdWUgcGFpciwgc2VydmljZSA9PiBjbGllbnRJZAoJLy8gQHBhcmFtIG9iamVjdCBvcHRzLCBjb250YWlucyBhIGtleSB2YWx1ZSBwYWlyIG9mIG9wdGlvbnMgdXNlZCBmb3IgZGVmaW5pbmcgdGhlIGF1dGhlbnRpY2F0aW9uIGRlZmF1bHRzCgkvLyBAcGFyYW0gbnVtYmVyIHRpbWVvdXQsIHRpbWVvdXQgaW4gc2Vjb25kcwoJaW5pdDogZnVuY3Rpb24oc2VydmljZXMsIG9wdGlvbnMpIHsKCgkJdmFyIHV0aWxzID0gdGhpcy51dGlsczsKCgkJaWYgKCFzZXJ2aWNlcykgewoJCQlyZXR1cm4gdGhpcy5zZXJ2aWNlczsKCQl9CgoJCS8vIERlZmluZSBwcm92aWRlciBjcmVkZW50aWFscwoJCS8vIFJlZm9ybWF0IHRoZSBJRCBmaWVsZAoJCWZvciAodmFyIHggaW4gc2VydmljZXMpIHtpZiAoc2VydmljZXMuaGFzT3duUHJvcGVydHkoeCkpIHsKCQkJaWYgKHR5cGVvZiAoc2VydmljZXNbeF0pICE9PSAnb2JqZWN0JykgewoJCQkJc2VydmljZXNbeF0gPSB7aWQ6IHNlcnZpY2VzW3hdfTsKCQkJfQoJCX19CgoJCS8vIE1lcmdlIHNlcnZpY2VzIGlmIHRoZXJlIGFscmVhZHkgZXhpc3RzIHNvbWUKCQl1dGlscy5leHRlbmQodGhpcy5zZXJ2aWNlcywgc2VydmljZXMpOwoKCQkvLyBVcGRhdGUgdGhlIGRlZmF1bHQgc2V0dGluZ3Mgd2l0aCB0aGlzIG9uZS4KCQlpZiAob3B0aW9ucykgewoJCQl1dGlscy5leHRlbmQodGhpcy5zZXR0aW5ncywgb3B0aW9ucyk7CgoJCQkvLyBEbyB0aGlzIGltbWVkaWF0bHkgaW5jYXNlIHRoZSBicm93c2VyIGNoYW5nZXMgdGhlIGN1cnJlbnQgcGF0aC4KCQkJaWYgKCdyZWRpcmVjdF91cmknIGluIG9wdGlvbnMpIHsKCQkJCXRoaXMuc2V0dGluZ3MucmVkaXJlY3RfdXJpID0gdXRpbHMudXJsKG9wdGlvbnMucmVkaXJlY3RfdXJpKS5ocmVmOwoJCQl9CgkJfQoKCQlyZXR1cm4gdGhpczsKCX0sCgoJLy8gTG9naW4KCS8vIFVzaW5nIHRoZSBlbmRwb2ludAoJLy8gQHBhcmFtIG5ldHdvcmsgc3RyaW5naWZ5ICAgICAgIG5hbWUgdG8gY29ubmVjdCB0bwoJLy8gQHBhcmFtIG9wdGlvbnMgb2JqZWN0ICAgIChvcHRpb25hbCkgIHtkaXNwbGF5IG1vZGUsIGlzIGVpdGhlciBub25lfHBvcHVwKGRlZmF1bHQpfHBhZ2UsIHNjb3BlOiBlbWFpbCxiaXJ0aGRheSxwdWJsaXNoLCAuLiB9CgkvLyBAcGFyYW0gY2FsbGJhY2sgIGZ1bmN0aW9uICAob3B0aW9uYWwpICBmaXJlZCBvbiBzaWduaW4KCWxvZ2luOiBmdW5jdGlvbigpIHsKCgkJLy8gQ3JlYXRlIGFuIG9iamVjdCB3aGljaCBpbmhlcml0cyBpdHMgcGFyZW50IGFzIHRoZSBwcm90b3R5cGUgYW5kIGNvbnN0cnVjdHMgYSBuZXcgZXZlbnQgY2hhaW4uCgkJdmFyIF90aGlzID0gdGhpczsKCQl2YXIgdXRpbHMgPSBfdGhpcy51dGlsczsKCQl2YXIgZXJyb3IgPSB1dGlscy5lcnJvcjsKCQl2YXIgcHJvbWlzZSA9IHV0aWxzLlByb21pc2UoKTsKCgkJLy8gR2V0IHBhcmFtZXRlcnMKCQl2YXIgcCA9IHV0aWxzLmFyZ3Moe25ldHdvcms6ICdzJywgb3B0aW9uczogJ28nLCBjYWxsYmFjazogJ2YnfSwgYXJndW1lbnRzKTsKCgkJLy8gTG9jYWwgdmFycwoJCXZhciB1cmw7CgoJCS8vIEdldCBhbGwgdGhlIGN1c3RvbSBvcHRpb25zIGFuZCBzdG9yZSB0byBiZSBhcHBlbmRlZCB0byB0aGUgcXVlcnlzdHJpbmcKCQl2YXIgcXMgPSB1dGlscy5kaWZmS2V5KHAub3B0aW9ucywgX3RoaXMuc2V0dGluZ3MpOwoKCQkvLyBNZXJnZS9vdmVycmlkZSBvcHRpb25zIHdpdGggYXBwIGRlZmF1bHRzCgkJdmFyIG9wdHMgPSBwLm9wdGlvbnMgPSB1dGlscy5tZXJnZShfdGhpcy5zZXR0aW5ncywgcC5vcHRpb25zIHx8IHt9KTsKCgkJLy8gTWVyZ2Uvb3ZlcnJpZGUgb3B0aW9ucyB3aXRoIGFwcCBkZWZhdWx0cwoJCW9wdHMucG9wdXAgPSB1dGlscy5tZXJnZShfdGhpcy5zZXR0aW5ncy5wb3B1cCwgcC5vcHRpb25zLnBvcHVwIHx8IHt9KTsKCgkJLy8gTmV0d29yawoJCXAubmV0d29yayA9IHAubmV0d29yayB8fCBfdGhpcy5zZXR0aW5ncy5kZWZhdWx0X3NlcnZpY2U7CgoJCS8vIEJpbmQgY2FsbGJhY2sgdG8gYm90aCByZWplY3QgYW5kIGZ1bGZpbGwgc3RhdGVzCgkJcHJvbWlzZS5wcm94eS50aGVuKHAuY2FsbGJhY2ssIHAuY2FsbGJhY2spOwoKCQkvLyBUcmlnZ2VyIGFuIGV2ZW50IG9uIHRoZSBnbG9iYWwgbGlzdGVuZXIKCQlmdW5jdGlvbiBlbWl0KHMsIHZhbHVlKSB7CgkJCWhlbGxvLmVtaXQocywgdmFsdWUpOwoJCX0KCgkJcHJvbWlzZS5wcm94eS50aGVuKGVtaXQuYmluZCh0aGlzLCAnYXV0aC5sb2dpbiBhdXRoJyksIGVtaXQuYmluZCh0aGlzLCAnYXV0aC5mYWlsZWQgYXV0aCcpKTsKCgkJLy8gSXMgb3VyIHNlcnZpY2UgdmFsaWQ/CgkJaWYgKHR5cGVvZiAocC5uZXR3b3JrKSAhPT0gJ3N0cmluZycgfHwgIShwLm5ldHdvcmsgaW4gX3RoaXMuc2VydmljZXMpKSB7CgkJCS8vIFRyaWdnZXIgdGhlIGRlZmF1bHQgbG9naW4uCgkJCS8vIEFoaCB3ZSBkb250IGhhdmUgb25lLgoJCQlyZXR1cm4gcHJvbWlzZS5yZWplY3QoZXJyb3IoJ2ludmFsaWRfbmV0d29yaycsICdUaGUgcHJvdmlkZWQgbmV0d29yayB3YXMgbm90IHJlY29nbml6ZWQnKSk7CgkJfQoKCQl2YXIgcHJvdmlkZXIgPSBfdGhpcy5zZXJ2aWNlc1twLm5ldHdvcmtdOwoKCQkvLyBDcmVhdGUgYSBnbG9iYWwgbGlzdGVuZXIgdG8gY2FwdHVyZSBldmVudHMgdHJpZ2dlcmVkIG91dCBvZiBzY29wZQoJCXZhciBjYWxsYmFja0lkID0gdXRpbHMuZ2xvYmFsRXZlbnQoZnVuY3Rpb24oc3RyKSB7CgoJCQkvLyBUaGUgcmVzcG9uc2VIYW5kbGVyIHJldHVybnMgYSBzdHJpbmcsIGxldHMgc2F2ZSB0aGlzIGxvY2FsbHkKCQkJdmFyIG9iajsKCgkJCWlmIChzdHIpIHsKCQkJCW9iaiA9IEpTT04ucGFyc2Uoc3RyKTsKCQkJfQoJCQllbHNlIHsKCQkJCW9iaiA9IGVycm9yKCdjYW5jZWxsZWQnLCAnVGhlIGF1dGhlbnRpY2F0aW9uIHdhcyBub3QgY29tcGxldGVkJyk7CgkJCX0KCgkJCS8vIEhhbmRsZSB0aGVzZSByZXNwb25zZSB1c2luZyB0aGUgbG9jYWwKCQkJLy8gVHJpZ2dlciBvbiB0aGUgcGFyZW50CgkJCWlmICghb2JqLmVycm9yKSB7CgoJCQkJLy8gU2F2ZSBvbiB0aGUgcGFyZW50IHdpbmRvdyB0aGUgbmV3IGNyZWRlbnRpYWxzCgkJCQkvLyBUaGlzIGZpeGVzIGFuIElFMTAgYnVnIGkgdGhpbmsuLi4gYXRsZWFzdCBpdCBkb2VzIGZvciBtZS4KCQkJCXV0aWxzLnN0b3JlKG9iai5uZXR3b3JrLCBvYmopOwoKCQkJCS8vIEZ1bGZpbGwgYSBzdWNjZXNzZnVsIGxvZ2luCgkJCQlwcm9taXNlLmZ1bGZpbGwoewoJCQkJCW5ldHdvcms6IG9iai5uZXR3b3JrLAoJCQkJCWF1dGhSZXNwb25zZTogb2JqCgkJCQl9KTsKCQkJfQoJCQllbHNlIHsKCQkJCS8vIFJlamVjdCBhIHN1Y2Nlc3NmdWwgbG9naW4KCQkJCXByb21pc2UucmVqZWN0KG9iaik7CgkJCX0KCQl9KTsKCgkJdmFyIHJlZGlyZWN0VXJpID0gdXRpbHMudXJsKG9wdHMucmVkaXJlY3RfdXJpKS5ocmVmOwoKCQkvLyBNYXkgYmUgYSBzcGFjZS1kZWxpbWl0ZWQgbGlzdCBvZiBtdWx0aXBsZSwgY29tcGxlbWVudGFyeSB0eXBlcwoJCXZhciByZXNwb25zZVR5cGUgPSBwcm92aWRlci5vYXV0aC5yZXNwb25zZV90eXBlIHx8IG9wdHMucmVzcG9uc2VfdHlwZTsKCgkJLy8gRmFsbGJhY2sgdG8gdG9rZW4gaWYgdGhlIG1vZHVsZSBoYXNuJ3QgZGVmaW5lZCBhIGdyYW50IHVybAoJCWlmICgvXGJjb2RlXGIvLnRlc3QocmVzcG9uc2VUeXBlKSAmJiAhcHJvdmlkZXIub2F1dGguZ3JhbnQpIHsKCQkJcmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlLnJlcGxhY2UoL1xiY29kZVxiLywgJ3Rva2VuJyk7CgkJfQoKCQkvLyBRdWVyeSBzdHJpbmcgcGFyYW1ldGVycywgd2UgbWF5IHBhc3Mgb3VyIG93biBhcmd1bWVudHMgdG8gZm9ybSB0aGUgcXVlcnlzdHJpbmcKCQlwLnFzID0gdXRpbHMubWVyZ2UocXMsIHsKCQkJY2xpZW50X2lkOiBlbmNvZGVVUklDb21wb25lbnQocHJvdmlkZXIuaWQpLAoJCQlyZXNwb25zZV90eXBlOiBlbmNvZGVVUklDb21wb25lbnQocmVzcG9uc2VUeXBlKSwKCQkJcmVkaXJlY3RfdXJpOiBlbmNvZGVVUklDb21wb25lbnQocmVkaXJlY3RVcmkpLAoJCQlkaXNwbGF5OiBvcHRzLmRpc3BsYXksCgkJCXN0YXRlOiB7CgkJCQljbGllbnRfaWQ6IHByb3ZpZGVyLmlkLAoJCQkJbmV0d29yazogcC5uZXR3b3JrLAoJCQkJZGlzcGxheTogb3B0cy5kaXNwbGF5LAoJCQkJY2FsbGJhY2s6IGNhbGxiYWNrSWQsCgkJCQlzdGF0ZTogb3B0cy5zdGF0ZSwKCQkJCXJlZGlyZWN0X3VyaTogcmVkaXJlY3RVcmkKCQkJfQoJCX0pOwoKCQkvLyBHZXQgY3VycmVudCBzZXNzaW9uIGZvciBtZXJnaW5nIHNjb3BlcywgYW5kIGZvciBxdWljayBhdXRoIHJlc3BvbnNlCgkJdmFyIHNlc3Npb24gPSB1dGlscy5zdG9yZShwLm5ldHdvcmspOwoKCQkvLyBTY29wZXMgKGF1dGhlbnRpY2F0aW9uIHBlcm1pc2lvbnMpCgkJLy8gRW5zdXJlIHRoaXMgaXMgYSBzdHJpbmcgLSBJRSBoYXMgYSBwcm9ibGVtIG1vdmluZyBBcnJheXMgYmV0d2VlbiB3aW5kb3dzCgkJLy8gQXBwZW5kIHRoZSBzZXR1cCBzY29wZQoJCXZhciBTQ09QRV9TUExJVCA9IC9bLFxzXSsvOwoKCQkvLyBJbmNsdWRlIGRlZmF1bHQgc2NvcGUgc2V0dGluZ3MgKGNsb25lZCkuCgkJdmFyIHNjb3BlID0gX3RoaXMuc2V0dGluZ3Muc2NvcGUgPyBbX3RoaXMuc2V0dGluZ3Muc2NvcGUudG9TdHJpbmcoKV0gOiBbXTsKCgkJLy8gRXh0ZW5kIHRoZSBwcm92aWRlcnMgc2NvcGUgbGlzdCB3aXRoIHRoZSBkZWZhdWx0CgkJdmFyIHNjb3BlTWFwID0gdXRpbHMubWVyZ2UoX3RoaXMuc2V0dGluZ3Muc2NvcGVfbWFwLCBwcm92aWRlci5zY29wZSB8fCB7fSk7CgoJCS8vIEFkZCB1c2VyIGRlZmluZWQgc2NvcGVzLi4uCgkJaWYgKG9wdHMuc2NvcGUpIHsKCQkJc2NvcGUucHVzaChvcHRzLnNjb3BlLnRvU3RyaW5nKCkpOwoJCX0KCgkJLy8gQXBwZW5kIHNjb3BlcyBmcm9tIGEgcHJldmlvdXMgc2Vzc2lvbi4KCQkvLyBUaGlzIGhlbHBzIGtlZXAgYXBwIGNyZWRlbnRpYWxzIGNvbnN0YW50LAoJCS8vIEF2b2lkaW5nIGhhdmluZyB0byBrZWVwIHRhYnMgb24gd2hhdCBzY29wZXMgYXJlIGF1dGhvcml6ZWQKCQlpZiAoc2Vzc2lvbiAmJiAnc2NvcGUnIGluIHNlc3Npb24gJiYgc2Vzc2lvbi5zY29wZSBpbnN0YW5jZW9mIFN0cmluZykgewoJCQlzY29wZS5wdXNoKHNlc3Npb24uc2NvcGUpOwoJCX0KCgkJLy8gSm9pbiBhbmQgU3BsaXQgYWdhaW4KCQlzY29wZSA9IHNjb3BlLmpvaW4oJywnKS5zcGxpdChTQ09QRV9TUExJVCk7CgoJCS8vIEZvcm1hdCByZW1vdmUgZHVwbGljYXRlcyBhbmQgZW1wdHkgdmFsdWVzCgkJc2NvcGUgPSB1dGlscy51bmlxdWUoc2NvcGUpLmZpbHRlcihmaWx0ZXJFbXB0eSk7CgoJCS8vIFNhdmUgdGhlIHRoZSBzY29wZXMgdG8gdGhlIHN0YXRlIHdpdGggdGhlIG5hbWVzIHRoYXQgdGhleSB3ZXJlIHJlcXVlc3RlZCB3aXRoLgoJCXAucXMuc3RhdGUuc2NvcGUgPSBzY29wZS5qb2luKCcsJyk7CgoJCS8vIE1hcCBzY29wZXMgdG8gdGhlIHByb3ZpZGVycyBuYW1pbmcgY29udmVudGlvbgoJCXNjb3BlID0gc2NvcGUubWFwKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJLy8gRG9lcyB0aGlzIGhhdmUgYSBtYXBwaW5nPwoJCQlyZXR1cm4gKGl0ZW0gaW4gc2NvcGVNYXApID8gc2NvcGVNYXBbaXRlbV0gOiBpdGVtOwoJCX0pOwoKCQkvLyBTdHJpbmdpZnkgYW5kIEFycmF5aWZ5IHNvIHRoYXQgZG91YmxlIG1hcHBlZCBzY29wZXMgYXJlIGdpdmVuIHRoZSBjaGFuY2UgdG8gYmUgZm9ybWF0dGVkCgkJc2NvcGUgPSBzY29wZS5qb2luKCcsJykuc3BsaXQoU0NPUEVfU1BMSVQpOwoKCQkvLyBBZ2Fpbi4uLgoJCS8vIEZvcm1hdCByZW1vdmUgZHVwbGljYXRlcyBhbmQgZW1wdHkgdmFsdWVzCgkJc2NvcGUgPSB1dGlscy51bmlxdWUoc2NvcGUpLmZpbHRlcihmaWx0ZXJFbXB0eSk7CgoJCS8vIEpvaW4gd2l0aCB0aGUgZXhwZWN0ZWQgc2NvcGUgZGVsaW1pdGVyIGludG8gYSBzdHJpbmcKCQlwLnFzLnNjb3BlID0gc2NvcGUuam9pbihwcm92aWRlci5zY29wZV9kZWxpbSB8fCAnLCcpOwoKCQkvLyBJcyB0aGUgdXNlciBhbHJlYWR5IHNpZ25lZCBpbiB3aXRoIHRoZSBhcHByb3ByaWF0ZSBzY29wZXMsIHZhbGlkIGFjY2Vzc190b2tlbj8KCQlpZiAob3B0cy5mb3JjZSA9PT0gZmFsc2UpIHsKCgkJCWlmIChzZXNzaW9uICYmICdhY2Nlc3NfdG9rZW4nIGluIHNlc3Npb24gJiYgc2Vzc2lvbi5hY2Nlc3NfdG9rZW4gJiYgJ2V4cGlyZXMnIGluIHNlc3Npb24gJiYgc2Vzc2lvbi5leHBpcmVzID4gKChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgLyAxZTMpKSB7CgkJCQkvLyBXaGF0IGlzIGRpZmZlcmVudCBhYm91dCB0aGUgc2NvcGVzIGluIHRoZSBzZXNzaW9uIHZzIHRoZSBzY29wZXMgaW4gdGhlIG5ldyBsb2dpbj8KCQkJCXZhciBkaWZmID0gdXRpbHMuZGlmZigoc2Vzc2lvbi5zY29wZSB8fCAnJykuc3BsaXQoU0NPUEVfU1BMSVQpLCAocC5xcy5zdGF0ZS5zY29wZSB8fCAnJykuc3BsaXQoU0NPUEVfU1BMSVQpKTsKCQkJCWlmIChkaWZmLmxlbmd0aCA9PT0gMCkgewoKCQkJCQkvLyBPSyB0cmlnZ2VyIHRoZSBjYWxsYmFjawoJCQkJCXByb21pc2UuZnVsZmlsbCh7CgkJCQkJCXVuY2hhbmdlZDogdHJ1ZSwKCQkJCQkJbmV0d29yazogcC5uZXR3b3JrLAoJCQkJCQlhdXRoUmVzcG9uc2U6IHNlc3Npb24KCQkJCQl9KTsKCgkJCQkJLy8gTm90aGluZyBoYXMgY2hhbmdlZAoJCQkJCXJldHVybiBwcm9taXNlOwoJCQkJfQoJCQl9CgkJfQoKCQkvLyBQYWdlIFVSTAoJCWlmIChvcHRzLmRpc3BsYXkgPT09ICdwYWdlJyAmJiBvcHRzLnBhZ2VfdXJpKSB7CgkJCS8vIEFkZCBhIHBhZ2UgbG9jYXRpb24sIHBsYWNlIHRvIGVuZHVwIGFmdGVyIHNlc3Npb24gaGFzIGF1dGhlbnRpY2F0ZWQKCQkJcC5xcy5zdGF0ZS5wYWdlX3VyaSA9IHV0aWxzLnVybChvcHRzLnBhZ2VfdXJpKS5ocmVmOwoJCX0KCgkJLy8gQmVzcG9rZQoJCS8vIE92ZXJyaWRlIGxvZ2luIHF1ZXJ5c3RyaW5ncyBmcm9tIGF1dGhfb3B0aW9ucwoJCWlmICgnbG9naW4nIGluIHByb3ZpZGVyICYmIHR5cGVvZiAocHJvdmlkZXIubG9naW4pID09PSAnZnVuY3Rpb24nKSB7CgkJCS8vIEZvcm1hdCB0aGUgcGFyYW1hdGVycyBhY2NvcmRpbmcgdG8gdGhlIHByb3ZpZGVycyBmb3JtYXR0aW5nIGZ1bmN0aW9uCgkJCXByb3ZpZGVyLmxvZ2luKHApOwoJCX0KCgkJLy8gQWRkIE9BdXRoIHRvIHN0YXRlCgkJLy8gV2hlcmUgdGhlIHNlcnZpY2UgaXMgZ29pbmcgdG8gdGFrZSBhZHZhbnRhZ2Ugb2YgdGhlIG9hdXRoX3Byb3h5CgkJaWYgKCEvXGJ0b2tlblxiLy50ZXN0KHJlc3BvbnNlVHlwZSkgfHwKCQlwYXJzZUludChwcm92aWRlci5vYXV0aC52ZXJzaW9uLCAxMCkgPCAyIHx8CgkJKG9wdHMuZGlzcGxheSA9PT0gJ25vbmUnICYmIHByb3ZpZGVyLm9hdXRoLmdyYW50ICYmIHNlc3Npb24gJiYgc2Vzc2lvbi5yZWZyZXNoX3Rva2VuKSkgewoKCQkJLy8gQWRkIHRoZSBvYXV0aCBlbmRwb2ludHMKCQkJcC5xcy5zdGF0ZS5vYXV0aCA9IHByb3ZpZGVyLm9hdXRoOwoKCQkJLy8gQWRkIHRoZSBwcm94eSB1cmwKCQkJcC5xcy5zdGF0ZS5vYXV0aF9wcm94eSA9IG9wdHMub2F1dGhfcHJveHk7CgoJCX0KCgkJLy8gQ29udmVydCBzdGF0ZSB0byBhIHN0cmluZwoJCXAucXMuc3RhdGUgPSBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkocC5xcy5zdGF0ZSkpOwoKCQkvLyBVUkwKCQlpZiAocGFyc2VJbnQocHJvdmlkZXIub2F1dGgudmVyc2lvbiwgMTApID09PSAxKSB7CgoJCQkvLyBUdXJuIHRoZSByZXF1ZXN0IHRvIHRoZSBPQXV0aCBQcm94eSBmb3IgMy1sZWdnZWQgYXV0aAoJCQl1cmwgPSB1dGlscy5xcyhvcHRzLm9hdXRoX3Byb3h5LCBwLnFzLCBlbmNvZGVGdW5jdGlvbik7CgkJfQoKCQkvLyBSZWZyZXNoIHRva2VuCgkJZWxzZSBpZiAob3B0cy5kaXNwbGF5ID09PSAnbm9uZScgJiYgcHJvdmlkZXIub2F1dGguZ3JhbnQgJiYgc2Vzc2lvbiAmJiBzZXNzaW9uLnJlZnJlc2hfdG9rZW4pIHsKCgkJCS8vIEFkZCB0aGUgcmVmcmVzaF90b2tlbiB0byB0aGUgcmVxdWVzdAoJCQlwLnFzLnJlZnJlc2hfdG9rZW4gPSBzZXNzaW9uLnJlZnJlc2hfdG9rZW47CgoJCQkvLyBEZWZpbmUgdGhlIHJlcXVlc3QgcGF0aAoJCQl1cmwgPSB1dGlscy5xcyhvcHRzLm9hdXRoX3Byb3h5LCBwLnFzLCBlbmNvZGVGdW5jdGlvbik7CgkJfQoJCWVsc2UgewoJCQl1cmwgPSB1dGlscy5xcyhwcm92aWRlci5vYXV0aC5hdXRoLCBwLnFzLCBlbmNvZGVGdW5jdGlvbik7CgkJfQoKCQkvLyBCcm9hZGNhc3QgdGhpcyBldmVudCBhcyBhbiBhdXRoOmluaXQKCQllbWl0KCdhdXRoLmluaXQnLCBwKTsKCgkJLy8gRXhlY3V0ZQoJCS8vIFRyaWdnZXIgaG93IHdlIHdhbnQgc2VsZiBkaXNwbGF5ZWQKCQlpZiAob3B0cy5kaXNwbGF5ID09PSAnbm9uZScpIHsKCQkJLy8gU2lnbi1pbiBpbiB0aGUgYmFja2dyb3VuZCwgaWZyYW1lCgkJCXV0aWxzLmlmcmFtZSh1cmwsIHJlZGlyZWN0VXJpKTsKCQl9CgoJCS8vIFRyaWdnZXJpbmcgcG9wdXA/CgkJZWxzZSBpZiAob3B0cy5kaXNwbGF5ID09PSAncG9wdXAnKSB7CgoJCQl2YXIgcG9wdXAgPSB1dGlscy5wb3B1cCh1cmwsIHJlZGlyZWN0VXJpLCBvcHRzLnBvcHVwKTsKCgkJCXZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewoJCQkJaWYgKCFwb3B1cCB8fCBwb3B1cC5jbG9zZWQpIHsKCQkJCQljbGVhckludGVydmFsKHRpbWVyKTsKCQkJCQlpZiAoIXByb21pc2Uuc3RhdGUpIHsKCgkJCQkJCXZhciByZXNwb25zZSA9IGVycm9yKCdjYW5jZWxsZWQnLCAnTG9naW4gaGFzIGJlZW4gY2FuY2VsbGVkJyk7CgoJCQkJCQlpZiAoIXBvcHVwKSB7CgkJCQkJCQlyZXNwb25zZSA9IGVycm9yKCdibG9ja2VkJywgJ1BvcHVwIHdhcyBibG9ja2VkJyk7CgkJCQkJCX0KCgkJCQkJCXJlc3BvbnNlLm5ldHdvcmsgPSBwLm5ldHdvcms7CgoJCQkJCQlwcm9taXNlLnJlamVjdChyZXNwb25zZSk7CgkJCQkJfQoJCQkJfQoJCQl9LCAxMDApOwoJCX0KCgkJZWxzZSB7CgkJCXdpbmRvdy5sb2NhdGlvbiA9IHVybDsKCQl9CgoJCXJldHVybiBwcm9taXNlLnByb3h5OwoKCQlmdW5jdGlvbiBlbmNvZGVGdW5jdGlvbihzKSB7cmV0dXJuIHM7fQoKCQlmdW5jdGlvbiBmaWx0ZXJFbXB0eShzKSB7cmV0dXJuICEhczt9Cgl9LAoKCS8vIFJlbW92ZSBhbnkgZGF0YSBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBzZXJ2aWNlCgkvLyBAcGFyYW0gc3RyaW5nIG5hbWUgb2YgdGhlIHNlcnZpY2UKCS8vIEBwYXJhbSBmdW5jdGlvbiBjYWxsYmFjawoJbG9nb3V0OiBmdW5jdGlvbigpIHsKCgkJdmFyIF90aGlzID0gdGhpczsKCQl2YXIgdXRpbHMgPSBfdGhpcy51dGlsczsKCQl2YXIgZXJyb3IgPSB1dGlscy5lcnJvcjsKCgkJLy8gQ3JlYXRlIGEgbmV3IHByb21pc2UKCQl2YXIgcHJvbWlzZSA9IHV0aWxzLlByb21pc2UoKTsKCgkJdmFyIHAgPSB1dGlscy5hcmdzKHtuYW1lOidzJywgb3B0aW9uczogJ28nLCBjYWxsYmFjazogJ2YnfSwgYXJndW1lbnRzKTsKCgkJcC5vcHRpb25zID0gcC5vcHRpb25zIHx8IHt9OwoKCQkvLyBBZGQgY2FsbGJhY2sgdG8gZXZlbnRzCgkJcHJvbWlzZS5wcm94eS50aGVuKHAuY2FsbGJhY2ssIHAuY2FsbGJhY2spOwoKCQkvLyBUcmlnZ2VyIGFuIGV2ZW50IG9uIHRoZSBnbG9iYWwgbGlzdGVuZXIKCQlmdW5jdGlvbiBlbWl0KHMsIHZhbHVlKSB7CgkJCWhlbGxvLmVtaXQocywgdmFsdWUpOwoJCX0KCgkJcHJvbWlzZS5wcm94eS50aGVuKGVtaXQuYmluZCh0aGlzLCAnYXV0aC5sb2dvdXQgYXV0aCcpLCBlbWl0LmJpbmQodGhpcywgJ2Vycm9yJykpOwoKCQkvLyBOZXR3b3JrCgkJcC5uYW1lID0gcC5uYW1lIHx8IHRoaXMuc2V0dGluZ3MuZGVmYXVsdF9zZXJ2aWNlOwoJCXAuYXV0aFJlc3BvbnNlID0gdXRpbHMuc3RvcmUocC5uYW1lKTsKCgkJaWYgKHAubmFtZSAmJiAhKHAubmFtZSBpbiBfdGhpcy5zZXJ2aWNlcykpIHsKCgkJCXByb21pc2UucmVqZWN0KGVycm9yKCdpbnZhbGlkX25ldHdvcmsnLCAnVGhlIG5ldHdvcmsgd2FzIHVucmVjb2duaXplZCcpKTsKCgkJfQoJCWVsc2UgaWYgKHAubmFtZSAmJiBwLmF1dGhSZXNwb25zZSkgewoKCQkJLy8gRGVmaW5lIHRoZSBjYWxsYmFjawoJCQl2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbihvcHRzKSB7CgoJCQkJLy8gUmVtb3ZlIGZyb20gdGhlIHN0b3JlCgkJCQl1dGlscy5zdG9yZShwLm5hbWUsIG51bGwpOwoKCQkJCS8vIEVtaXQgZXZlbnRzIGJ5IGRlZmF1bHQKCQkJCXByb21pc2UuZnVsZmlsbChoZWxsby51dGlscy5tZXJnZSh7bmV0d29yazpwLm5hbWV9LCBvcHRzIHx8IHt9KSk7CgkJCX07CgoJCQkvLyBSdW4gYW4gYXN5bmMgb3BlcmF0aW9uIHRvIHJlbW92ZSB0aGUgdXNlcnMgc2Vzc2lvbgoJCQl2YXIgX29wdHMgPSB7fTsKCQkJaWYgKHAub3B0aW9ucy5mb3JjZSkgewoJCQkJdmFyIGxvZ291dCA9IF90aGlzLnNlcnZpY2VzW3AubmFtZV0ubG9nb3V0OwoJCQkJaWYgKGxvZ291dCkgewoJCQkJCS8vIENvbnZlcnQgbG9nb3V0IHRvIFVSTCBzdHJpbmcsCgkJCQkJLy8gSWYgbm8gc3RyaW5nIGlzIHJldHVybmVkLCB0aGVuIHRoaXMgZnVuY3Rpb24gd2lsbCBoYW5kbGUgdGhlIGxvZ291dCBhc3luYyBzdHlsZQoJCQkJCWlmICh0eXBlb2YgKGxvZ291dCkgPT09ICdmdW5jdGlvbicpIHsKCQkJCQkJbG9nb3V0ID0gbG9nb3V0KGNhbGxiYWNrLCBwKTsKCQkJCQl9CgoJCQkJCS8vIElmIGxvZ291dCBpcyBhIHN0cmluZyB0aGVuIGFzc3VtZSBVUkwgYW5kIG9wZW4gaW4gaWZyYW1lLgoJCQkJCWlmICh0eXBlb2YgKGxvZ291dCkgPT09ICdzdHJpbmcnKSB7CgkJCQkJCXV0aWxzLmlmcmFtZShsb2dvdXQpOwoJCQkJCQlfb3B0cy5mb3JjZSA9IG51bGw7CgkJCQkJCV9vcHRzLm1lc3NhZ2UgPSAnTG9nb3V0IHN1Y2Nlc3Mgb24gcHJvdmlkZXJzIHNpdGUgd2FzIGluZGV0ZXJtaW5hdGUnOwoJCQkJCX0KCQkJCQllbHNlIGlmIChsb2dvdXQgPT09IHVuZGVmaW5lZCkgewoJCQkJCQkvLyBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gd2lsbCBoYW5kbGUgdGhlIHJlc3BvbnNlLgoJCQkJCQlyZXR1cm4gcHJvbWlzZS5wcm94eTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCS8vIFJlbW92ZSBsb2NhbCBjcmVkZW50aWFscwoJCQljYWxsYmFjayhfb3B0cyk7CgkJfQoJCWVsc2UgewoJCQlwcm9taXNlLnJlamVjdChlcnJvcignaW52YWxpZF9zZXNzaW9uJywgJ1RoZXJlIHdhcyBubyBzZXNzaW9uIHRvIHJlbW92ZScpKTsKCQl9CgoJCXJldHVybiBwcm9taXNlLnByb3h5OwoJfSwKCgkvLyBSZXR1cm5zIGFsbCB0aGUgc2Vzc2lvbnMgdGhhdCBhcmUgc3Vic2NyaWJlZCB0b28KCS8vIEBwYXJhbSBzdHJpbmcgb3B0aW9uYWwsIG5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gZ2V0IGluZm9ybWF0aW9uIGFib3V0LgoJZ2V0QXV0aFJlc3BvbnNlOiBmdW5jdGlvbihzZXJ2aWNlKSB7CgoJCS8vIElmIHRoZSBzZXJ2aWNlIGRvZXNuJ3QgZXhpc3QKCQlzZXJ2aWNlID0gc2VydmljZSB8fCB0aGlzLnNldHRpbmdzLmRlZmF1bHRfc2VydmljZTsKCgkJaWYgKCFzZXJ2aWNlIHx8ICEoc2VydmljZSBpbiB0aGlzLnNlcnZpY2VzKSkgewoJCQlyZXR1cm4gbnVsbDsKCQl9CgoJCXJldHVybiB0aGlzLnV0aWxzLnN0b3JlKHNlcnZpY2UpIHx8IG51bGw7Cgl9LAoKCS8vIEV2ZW50czogcGxhY2Vob2xkZXIgZm9yIHRoZSBldmVudHMKCWV2ZW50czoge30KfSk7CgovLyBDb3JlIHV0aWxpdGllcwpoZWxsby51dGlscy5leHRlbmQoaGVsbG8udXRpbHMsIHsKCgkvLyBFcnJvcgoJZXJyb3I6IGZ1bmN0aW9uKGNvZGUsIG1lc3NhZ2UpIHsKCQlyZXR1cm4gewoJCQllcnJvcjogewoJCQkJY29kZTogY29kZSwKCQkJCW1lc3NhZ2U6IG1lc3NhZ2UKCQkJfQoJCX07Cgl9LAoKCS8vIEFwcGVuZCB0aGUgcXVlcnlzdHJpbmcgdG8gYSB1cmwKCS8vIEBwYXJhbSBzdHJpbmcgdXJsCgkvLyBAcGFyYW0gb2JqZWN0IHBhcmFtZXRlcnMKCXFzOiBmdW5jdGlvbih1cmwsIHBhcmFtcywgZm9ybWF0RnVuY3Rpb24pIHsKCgkJaWYgKHBhcmFtcykgewoKCQkJLy8gU2V0IGRlZmF1bHQgZm9ybWF0dGluZyBmdW5jdGlvbgoJCQlmb3JtYXRGdW5jdGlvbiA9IGZvcm1hdEZ1bmN0aW9uIHx8IGVuY29kZVVSSUNvbXBvbmVudDsKCgkJCS8vIE92ZXJyaWRlIHRoZSBpdGVtcyBpbiB0aGUgVVJMIHdoaWNoIGFscmVhZHkgZXhpc3QKCQkJZm9yICh2YXIgeCBpbiBwYXJhbXMpIHsKCQkJCXZhciBzdHIgPSAnKFtcXD9cXCZdKScgKyB4ICsgJz1bXlxcJl0qJzsKCQkJCXZhciByZWcgPSBuZXcgUmVnRXhwKHN0cik7CgkJCQlpZiAodXJsLm1hdGNoKHJlZykpIHsKCQkJCQl1cmwgPSB1cmwucmVwbGFjZShyZWcsICckMScgKyB4ICsgJz0nICsgZm9ybWF0RnVuY3Rpb24ocGFyYW1zW3hdKSk7CgkJCQkJZGVsZXRlIHBhcmFtc1t4XTsKCQkJCX0KCQkJfQoJCX0KCgkJaWYgKCF0aGlzLmlzRW1wdHkocGFyYW1zKSkgewoJCQlyZXR1cm4gdXJsICsgKHVybC5pbmRleE9mKCc/JykgPiAtMSA/ICcmJyA6ICc/JykgKyB0aGlzLnBhcmFtKHBhcmFtcywgZm9ybWF0RnVuY3Rpb24pOwoJCX0KCgkJcmV0dXJuIHVybDsKCX0sCgoJLy8gUGFyYW0KCS8vIEV4cGxvZGUvZW5jb2RlIHRoZSBwYXJhbWV0ZXJzIG9mIGFuIFVSTCBzdHJpbmcvb2JqZWN0CgkvLyBAcGFyYW0gc3RyaW5nIHMsIHN0cmluZyB0byBkZWNvZGUKCXBhcmFtOiBmdW5jdGlvbihzLCBmb3JtYXRGdW5jdGlvbikgewoJCXZhciBiOwoJCXZhciBhID0ge307CgkJdmFyIG07CgoJCWlmICh0eXBlb2YgKHMpID09PSAnc3RyaW5nJykgewoKCQkJZm9ybWF0RnVuY3Rpb24gPSBmb3JtYXRGdW5jdGlvbiB8fCBkZWNvZGVVUklDb21wb25lbnQ7CgoJCQltID0gcy5yZXBsYWNlKC9eW1wjXD9dLywgJycpLm1hdGNoKC8oW149XC9cJl0rKT0oW15cJl0rKS9nKTsKCQkJaWYgKG0pIHsKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgbS5sZW5ndGg7IGkrKykgewoJCQkJCWIgPSBtW2ldLm1hdGNoKC8oW149XSspPSguKikvKTsKCQkJCQlhW2JbMV1dID0gZm9ybWF0RnVuY3Rpb24oYlsyXSk7CgkJCQl9CgkJCX0KCgkJCXJldHVybiBhOwoJCX0KCQllbHNlIHsKCgkJCWZvcm1hdEZ1bmN0aW9uID0gZm9ybWF0RnVuY3Rpb24gfHwgZW5jb2RlVVJJQ29tcG9uZW50OwoKCQkJdmFyIG8gPSBzOwoKCQkJYSA9IFtdOwoKCQkJZm9yICh2YXIgeCBpbiBvKSB7aWYgKG8uaGFzT3duUHJvcGVydHkoeCkpIHsKCQkJCWlmIChvLmhhc093blByb3BlcnR5KHgpKSB7CgkJCQkJYS5wdXNoKFt4LCBvW3hdID09PSAnPycgPyAnPycgOiBmb3JtYXRGdW5jdGlvbihvW3hdKV0uam9pbignPScpKTsKCQkJCX0KCQkJfX0KCgkJCXJldHVybiBhLmpvaW4oJyYnKTsKCQl9Cgl9LAoKCS8vIExvY2FsIHN0b3JhZ2UgZmFjYWRlCglzdG9yZTogKGZ1bmN0aW9uKCkgewoKCQl2YXIgYSA9IFsnbG9jYWxTdG9yYWdlJywgJ3Nlc3Npb25TdG9yYWdlJ107CgkJdmFyIGkgPSAtMTsKCQl2YXIgcHJlZml4ID0gJ3Rlc3QnOwoKCQkvLyBTZXQgTG9jYWxTdG9yYWdlCgkJdmFyIGxvY2FsU3RvcmFnZTsKCgkJd2hpbGUgKGFbKytpXSkgewoJCQl0cnkgewoJCQkJLy8gSW4gQ2hyb21lIHdpdGggY29va2llcyBibG9ja2VkLCBjYWxsaW5nIGxvY2FsU3RvcmFnZSB0aHJvd3MgYW4gZXJyb3IKCQkJCWxvY2FsU3RvcmFnZSA9IHdpbmRvd1thW2ldXTsKCQkJCWxvY2FsU3RvcmFnZS5zZXRJdGVtKHByZWZpeCArIGksIGkpOwoJCQkJbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0ocHJlZml4ICsgaSk7CgkJCQlicmVhazsKCQkJfQoJCQljYXRjaCAoZSkgewoJCQkJbG9jYWxTdG9yYWdlID0gbnVsbDsKCQkJfQoJCX0KCgkJaWYgKCFsb2NhbFN0b3JhZ2UpIHsKCgkJCXZhciBjYWNoZSA9IG51bGw7CgoJCQlsb2NhbFN0b3JhZ2UgPSB7CgkJCQlnZXRJdGVtOiBmdW5jdGlvbihwcm9wKSB7CgkJCQkJcHJvcCA9IHByb3AgKyAnPSc7CgkJCQkJdmFyIG0gPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTsKCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IG0ubGVuZ3RoOyBpKyspIHsKCQkJCQkJdmFyIF9tID0gbVtpXS5yZXBsYWNlKC8oXlxzK3xccyskKS8sICcnKTsKCQkJCQkJaWYgKF9tICYmIF9tLmluZGV4T2YocHJvcCkgPT09IDApIHsKCQkJCQkJCXJldHVybiBfbS5zdWJzdHIocHJvcC5sZW5ndGgpOwoJCQkJCQl9CgkJCQkJfQoKCQkJCQlyZXR1cm4gY2FjaGU7CgkJCQl9LAoKCQkJCXNldEl0ZW06IGZ1bmN0aW9uKHByb3AsIHZhbHVlKSB7CgkJCQkJY2FjaGUgPSB2YWx1ZTsKCQkJCQlkb2N1bWVudC5jb29raWUgPSBwcm9wICsgJz0nICsgdmFsdWU7CgkJCQl9CgkJCX07CgoJCQkvLyBGaWxsIHRoZSBjYWNoZSB1cAoJCQljYWNoZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoZWxsbycpOwoJCX0KCgkJZnVuY3Rpb24gZ2V0KCkgewoJCQl2YXIganNvbiA9IHt9OwoJCQl0cnkgewoJCQkJanNvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hlbGxvJykpIHx8IHt9OwoJCQl9CgkJCWNhdGNoIChlKSB7fQoKCQkJcmV0dXJuIGpzb247CgkJfQoKCQlmdW5jdGlvbiBzZXQoanNvbikgewoJCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaGVsbG8nLCBKU09OLnN0cmluZ2lmeShqc29uKSk7CgkJfQoKCQkvLyBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0IGxvY2FsIHN0b3JhZ2UKCQlyZXR1cm4gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGRheXMpIHsKCgkJCS8vIExvY2FsIHN0b3JhZ2UKCQkJdmFyIGpzb24gPSBnZXQoKTsKCgkJCWlmIChuYW1lICYmIHZhbHVlID09PSB1bmRlZmluZWQpIHsKCQkJCXJldHVybiBqc29uW25hbWVdIHx8IG51bGw7CgkJCX0KCQkJZWxzZSBpZiAobmFtZSAmJiB2YWx1ZSA9PT0gbnVsbCkgewoJCQkJdHJ5IHsKCQkJCQlkZWxldGUganNvbltuYW1lXTsKCQkJCX0KCQkJCWNhdGNoIChlKSB7CgkJCQkJanNvbltuYW1lXSA9IG51bGw7CgkJCQl9CgkJCX0KCQkJZWxzZSBpZiAobmFtZSkgewoJCQkJanNvbltuYW1lXSA9IHZhbHVlOwoJCQl9CgkJCWVsc2UgewoJCQkJcmV0dXJuIGpzb247CgkJCX0KCgkJCXNldChqc29uKTsKCgkJCXJldHVybiBqc29uIHx8IG51bGw7CgkJfTsKCgl9KSgpLAoKCS8vIENyZWF0ZSBhbmQgQXBwZW5kIG5ldyBET00gZWxlbWVudHMKCS8vIEBwYXJhbSBub2RlIHN0cmluZwoJLy8gQHBhcmFtIGF0dHIgb2JqZWN0IGxpdGVyYWwKCS8vIEBwYXJhbSBkb20vc3RyaW5nCglhcHBlbmQ6IGZ1bmN0aW9uKG5vZGUsIGF0dHIsIHRhcmdldCkgewoKCQl2YXIgbiA9IHR5cGVvZiAobm9kZSkgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlKSA6IG5vZGU7CgoJCWlmICh0eXBlb2YgKGF0dHIpID09PSAnb2JqZWN0JykgewoJCQlpZiAoJ3RhZ05hbWUnIGluIGF0dHIpIHsKCQkJCXRhcmdldCA9IGF0dHI7CgkJCX0KCQkJZWxzZSB7CgkJCQlmb3IgKHZhciB4IGluIGF0dHIpIHtpZiAoYXR0ci5oYXNPd25Qcm9wZXJ0eSh4KSkgewoJCQkJCWlmICh0eXBlb2YgKGF0dHJbeF0pID09PSAnb2JqZWN0JykgewoJCQkJCQlmb3IgKHZhciB5IGluIGF0dHJbeF0pIHtpZiAoYXR0clt4XS5oYXNPd25Qcm9wZXJ0eSh5KSkgewoJCQkJCQkJblt4XVt5XSA9IGF0dHJbeF1beV07CgkJCQkJCX19CgkJCQkJfQoJCQkJCWVsc2UgaWYgKHggPT09ICdodG1sJykgewoJCQkJCQluLmlubmVySFRNTCA9IGF0dHJbeF07CgkJCQkJfQoKCQkJCQkvLyBJRSBkb2Vzbid0IGxpa2UgdXMgc2V0dGluZyBtZXRob2RzIHdpdGggc2V0QXR0cmlidXRlCgkJCQkJZWxzZSBpZiAoIS9eb24vLnRlc3QoeCkpIHsKCQkJCQkJbi5zZXRBdHRyaWJ1dGUoeCwgYXR0clt4XSk7CgkJCQkJfQoJCQkJCWVsc2UgewoJCQkJCQluW3hdID0gYXR0clt4XTsKCQkJCQl9CgkJCQl9fQoJCQl9CgkJfQoKCQlpZiAodGFyZ2V0ID09PSAnYm9keScpIHsKCQkJKGZ1bmN0aW9uIHNlbGYoKSB7CgkJCQlpZiAoZG9jdW1lbnQuYm9keSkgewoJCQkJCWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobik7CgkJCQl9CgkJCQllbHNlIHsKCQkJCQlzZXRUaW1lb3V0KHNlbGYsIDE2KTsKCQkJCX0KCQkJfSkoKTsKCQl9CgkJZWxzZSBpZiAodHlwZW9mICh0YXJnZXQpID09PSAnb2JqZWN0JykgewoJCQl0YXJnZXQuYXBwZW5kQ2hpbGQobik7CgkJfQoJCWVsc2UgaWYgKHR5cGVvZiAodGFyZ2V0KSA9PT0gJ3N0cmluZycpIHsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFyZ2V0KVswXS5hcHBlbmRDaGlsZChuKTsKCQl9CgoJCXJldHVybiBuOwoJfSwKCgkvLyBBbiBlYXN5IHdheSB0byBjcmVhdGUgYSBoaWRkZW4gaWZyYW1lCgkvLyBAcGFyYW0gc3RyaW5nIHNyYwoJaWZyYW1lOiBmdW5jdGlvbihzcmMpIHsKCQl0aGlzLmFwcGVuZCgnaWZyYW1lJywge3NyYzogc3JjLCBzdHlsZToge3Bvc2l0aW9uOidhYnNvbHV0ZScsIGxlZnQ6ICctMTAwMHB4JywgYm90dG9tOiAwLCBoZWlnaHQ6ICcxcHgnLCB3aWR0aDogJzFweCd9fSwgJ2JvZHknKTsKCX0sCgoJLy8gUmVjdXJzaXZlIG1lcmdlIHR3byBvYmplY3RzIGludG8gb25lLCBzZWNvbmQgcGFyYW1ldGVyIG92ZXJpZGVzIHRoZSBmaXJzdAoJLy8gQHBhcmFtIGEgYXJyYXkKCW1lcmdlOiBmdW5jdGlvbigvKiBBcmdzOiBhLCBiLCBjLCAuLiBuICovKSB7CgkJdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwoJCWFyZ3MudW5zaGlmdCh7fSk7CgkJcmV0dXJuIHRoaXMuZXh0ZW5kLmFwcGx5KG51bGwsIGFyZ3MpOwoJfSwKCgkvLyBNYWtlcyBpdCBlYXNpZXIgdG8gYXNzaWduIHBhcmFtZXRlcnMsIHdoZXJlIHNvbWUgYXJlIG9wdGlvbmFsCgkvLyBAcGFyYW0gbyBvYmplY3QKCS8vIEBwYXJhbSBhIGFyZ3VtZW50cwoJYXJnczogZnVuY3Rpb24obywgYXJncykgewoKCQl2YXIgcCA9IHt9OwoJCXZhciBpID0gMDsKCQl2YXIgdCA9IG51bGw7CgkJdmFyIHggPSBudWxsOwoKCQkvLyAneCcgaXMgdGhlIGZpcnN0IGtleSBpbiB0aGUgbGlzdCBvZiBvYmplY3QgcGFyYW1ldGVycwoJCWZvciAoeCBpbiBvKSB7aWYgKG8uaGFzT3duUHJvcGVydHkoeCkpIHsKCQkJYnJlYWs7CgkJfX0KCgkJLy8gUGFzc2luZyBpbiBoYXNoIG9iamVjdCBvZiBhcmd1bWVudHM/CgkJLy8gV2hlcmUgdGhlIGZpcnN0IGFyZ3VtZW50IGNhbid0IGJlIGFuIG9iamVjdAoJCWlmICgoYXJncy5sZW5ndGggPT09IDEpICYmICh0eXBlb2YgKGFyZ3NbMF0pID09PSAnb2JqZWN0JykgJiYgb1t4XSAhPSAnbyEnKSB7CgoJCQkvLyBDb3VsZCB0aGlzIG9iamVjdCBzdGlsbCBiZWxvbmcgdG8gYSBwcm9wZXJ0eT8KCQkJLy8gQ2hlY2sgdGhlIG9iamVjdCBrZXlzIGlmIHRoZXkgbWF0Y2ggYW55IG9mIHRoZSBwcm9wZXJ0eSBrZXlzCgkJCWZvciAoeCBpbiBhcmdzWzBdKSB7aWYgKG8uaGFzT3duUHJvcGVydHkoeCkpIHsKCQkJCS8vIERvZXMgdGhpcyBrZXkgZXhpc3QgaW4gdGhlIHByb3BlcnR5IGxpc3Q/CgkJCQlpZiAoeCBpbiBvKSB7CgkJCQkJLy8gWWVzIHRoaXMga2V5IGRvZXMgZXhpc3Qgc28gaXRzIG1vc3QgbGlrZWx5IHRoaXMgZnVuY3Rpb24gaGFzIGJlZW4gaW52b2tlZCB3aXRoIGFuIG9iamVjdCBwYXJhbWV0ZXIKCQkJCQkvLyBSZXR1cm4gZmlyc3QgYXJndW1lbnQgYXMgdGhlIGhhc2ggb2YgYWxsIGFyZ3VtZW50cwoJCQkJCXJldHVybiBhcmdzWzBdOwoJCQkJfQoJCQl9fQoJCX0KCgkJLy8gRWxzZSBsb29wIHRocm91Z2ggYW5kIGFjY291bnQgZm9yIHRoZSBtaXNzaW5nIG9uZXMuCgkJZm9yICh4IGluIG8pIHtpZiAoby5oYXNPd25Qcm9wZXJ0eSh4KSkgewoKCQkJdCA9IHR5cGVvZiAoYXJnc1tpXSk7CgoJCQlpZiAoKHR5cGVvZiAob1t4XSkgPT09ICdmdW5jdGlvbicgJiYgb1t4XS50ZXN0KGFyZ3NbaV0pKSB8fCAodHlwZW9mIChvW3hdKSA9PT0gJ3N0cmluZycgJiYgKAoJCQkob1t4XS5pbmRleE9mKCdzJykgPiAtMSAmJiB0ID09PSAnc3RyaW5nJykgfHwKCQkJKG9beF0uaW5kZXhPZignbycpID4gLTEgJiYgdCA9PT0gJ29iamVjdCcpIHx8CgkJCShvW3hdLmluZGV4T2YoJ2knKSA+IC0xICYmIHQgPT09ICdudW1iZXInKSB8fAoJCQkob1t4XS5pbmRleE9mKCdhJykgPiAtMSAmJiB0ID09PSAnb2JqZWN0JykgfHwKCQkJKG9beF0uaW5kZXhPZignZicpID4gLTEgJiYgdCA9PT0gJ2Z1bmN0aW9uJykKCQkJKSkKCQkJKSB7CgkJCQlwW3hdID0gYXJnc1tpKytdOwoJCQl9CgoJCQllbHNlIGlmICh0eXBlb2YgKG9beF0pID09PSAnc3RyaW5nJyAmJiBvW3hdLmluZGV4T2YoJyEnKSA+IC0xKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQl9fQoKCQlyZXR1cm4gcDsKCX0sCgoJLy8gUmV0dXJucyBhIFVSTCBpbnN0YW5jZQoJdXJsOiBmdW5jdGlvbihwYXRoKSB7CgoJCS8vIElmIHRoZSBwYXRoIGlzIGVtcHR5CgkJaWYgKCFwYXRoKSB7CgkJCXJldHVybiB3aW5kb3cubG9jYXRpb247CgkJfQoKCQkvLyBDaHJvbWUgYW5kIEZpcmVGb3ggc3VwcG9ydCBuZXcgVVJMKCkgdG8gZXh0cmFjdCBVUkwgb2JqZWN0cwoJCWVsc2UgaWYgKHdpbmRvdy5VUkwgJiYgVVJMIGluc3RhbmNlb2YgRnVuY3Rpb24gJiYgVVJMLmxlbmd0aCAhPT0gMCkgewoJCQlyZXR1cm4gbmV3IFVSTChwYXRoLCB3aW5kb3cubG9jYXRpb24pOwoJCX0KCgkJLy8gVWdseSBzaGltLCBpdCB3b3JrcyEKCQllbHNlIHsKCQkJdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CgkJCWEuaHJlZiA9IHBhdGg7CgkJCXJldHVybiBhLmNsb25lTm9kZShmYWxzZSk7CgkJfQoJfSwKCglkaWZmOiBmdW5jdGlvbihhLCBiKSB7CgkJcmV0dXJuIGIuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJcmV0dXJuIGEuaW5kZXhPZihpdGVtKSA9PT0gLTE7CgkJfSk7Cgl9LAoKCS8vIEdldCB0aGUgZGlmZmVyZW50IGhhc2ggb2YgcHJvcGVydGllcyB1bmlxdWUgdG8gYGFgLCBhbmQgbm90IGluIGBiYAoJZGlmZktleTogZnVuY3Rpb24oYSwgYikgewoJCWlmIChhIHx8ICFiKSB7CgkJCXZhciByID0ge307CgkJCWZvciAodmFyIHggaW4gYSkgewoJCQkJLy8gRG9lcyB0aGUgcHJvcGVydHkgbm90IGV4aXN0PwoJCQkJaWYgKCEoeCBpbiBiKSkgewoJCQkJCXJbeF0gPSBhW3hdOwoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gcjsKCQl9CgoJCXJldHVybiBhOwoJfSwKCgkvLyBVbmlxdWUKCS8vIFJlbW92ZSBkdXBsaWNhdGUgYW5kIG51bGwgdmFsdWVzIGZyb20gYW4gYXJyYXkKCS8vIEBwYXJhbSBhIGFycmF5Cgl1bmlxdWU6IGZ1bmN0aW9uKGEpIHsKCQlpZiAoIUFycmF5LmlzQXJyYXkoYSkpIHsgcmV0dXJuIFtdOyB9CgoJCXJldHVybiBhLmZpbHRlcihmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQkvLyBJcyB0aGlzIHRoZSBmaXJzdCBsb2NhdGlvbiBvZiBpdGVtCgkJCXJldHVybiBhLmluZGV4T2YoaXRlbSkgPT09IGluZGV4OwoJCX0pOwoJfSwKCglpc0VtcHR5OiBmdW5jdGlvbihvYmopIHsKCgkJLy8gU2NhbGFyCgkJaWYgKCFvYmopCgkJCXJldHVybiB0cnVlOwoKCQkvLyBBcnJheQoJCWlmIChBcnJheS5pc0FycmF5KG9iaikpIHsKCQkJcmV0dXJuICFvYmoubGVuZ3RoOwoJCX0KCQllbHNlIGlmICh0eXBlb2YgKG9iaikgPT09ICdvYmplY3QnKSB7CgkJCS8vIE9iamVjdAoJCQlmb3IgKHZhciBrZXkgaW4gb2JqKSB7CgkJCQlpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiB0cnVlOwoJfSwKCgkvL2pzY3M6ZGlzYWJsZQoKCS8qIQoJICoqICBUaGVuYWJsZSAtLSBFbWJlZGRhYmxlIE1pbmltdW0gU3RyaWN0bHktQ29tcGxpYW50IFByb21pc2VzL0ErIDEuMS4xIFRoZW5hYmxlCgkgKiogIENvcHlyaWdodCAoYykgMjAxMy0yMDE0IFJhbGYgUy4gRW5nZWxzY2hhbGwgPGh0dHA6Ly9lbmdlbHNjaGFsbC5jb20+CgkgKiogIExpY2Vuc2VkIHVuZGVyIFRoZSBNSVQgTGljZW5zZSA8aHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVD4KCSAqKiAgU291cmNlLUNvZGUgZGlzdHJpYnV0ZWQgb24gPGh0dHA6Ly9naXRodWIuY29tL3JzZS90aGVuYWJsZT4KCSAqLwoJUHJvbWlzZTogKGZ1bmN0aW9uKCl7CgkJLyogIHByb21pc2Ugc3RhdGVzIFtQcm9taXNlcy9BKyAyLjFdICAqLwoJCXZhciBTVEFURV9QRU5ESU5HICAgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjEuMV0gICovCgkJdmFyIFNUQVRFX0ZVTEZJTExFRCA9IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMS4yXSAgKi8KCQl2YXIgU1RBVEVfUkVKRUNURUQgID0gMjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4xLjNdICAqLwoKCQkvKiAgcHJvbWlzZSBvYmplY3QgY29uc3RydWN0b3IgICovCgkJdmFyIGFwaSA9IGZ1bmN0aW9uIChleGVjdXRvcikgewoJCQkvKiAgb3B0aW9uYWxseSBzdXBwb3J0IG5vbi1jb25zdHJ1Y3Rvci9wbGFpbi1mdW5jdGlvbiBjYWxsICAqLwoJCQlpZiAoISh0aGlzIGluc3RhbmNlb2YgYXBpKSkKCQkJCXJldHVybiBuZXcgYXBpKGV4ZWN1dG9yKTsKCgkJCS8qICBpbml0aWFsaXplIG9iamVjdCAgKi8KCQkJdGhpcy5pZCAgICAgICAgICAgPSAiVGhlbmFibGUvMS4wLjYiOwoJCQl0aGlzLnN0YXRlICAgICAgICA9IFNUQVRFX1BFTkRJTkc7IC8qICBpbml0aWFsIHN0YXRlICAqLwoJCQl0aGlzLmZ1bGZpbGxWYWx1ZSA9IHVuZGVmaW5lZDsgICAgIC8qICBpbml0aWFsIHZhbHVlICAqLyAgICAgLyogIFtQcm9taXNlcy9BKyAxLjMsIDIuMS4yLjJdICAqLwoJCQl0aGlzLnJlamVjdFJlYXNvbiA9IHVuZGVmaW5lZDsgICAgIC8qICBpbml0aWFsIHJlYXNvbiAqLyAgICAgLyogIFtQcm9taXNlcy9BKyAxLjUsIDIuMS4zLjJdICAqLwoJCQl0aGlzLm9uRnVsZmlsbGVkICA9IFtdOyAgICAgICAgICAgIC8qICBpbml0aWFsIGhhbmRsZXJzICAqLwoJCQl0aGlzLm9uUmVqZWN0ZWQgICA9IFtdOyAgICAgICAgICAgIC8qICBpbml0aWFsIGhhbmRsZXJzICAqLwoKCQkJLyogIHByb3ZpZGUgb3B0aW9uYWwgaW5mb3JtYXRpb24taGlkaW5nIHByb3h5ICAqLwoJCQl0aGlzLnByb3h5ID0gewoJCQkJdGhlbjogdGhpcy50aGVuLmJpbmQodGhpcykKCQkJfTsKCgkJCS8qICBzdXBwb3J0IG9wdGlvbmFsIGV4ZWN1dG9yIGZ1bmN0aW9uICAqLwoJCQlpZiAodHlwZW9mIGV4ZWN1dG9yID09PSAiZnVuY3Rpb24iKQoJCQkJZXhlY3V0b3IuY2FsbCh0aGlzLCB0aGlzLmZ1bGZpbGwuYmluZCh0aGlzKSwgdGhpcy5yZWplY3QuYmluZCh0aGlzKSk7CgkJfTsKCgkJLyogIHByb21pc2UgQVBJIG1ldGhvZHMgICovCgkJYXBpLnByb3RvdHlwZSA9IHsKCQkJLyogIHByb21pc2UgcmVzb2x2aW5nIG1ldGhvZHMgICovCgkJCWZ1bGZpbGw6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gZGVsaXZlcih0aGlzLCBTVEFURV9GVUxGSUxMRUQsICJmdWxmaWxsVmFsdWUiLCB2YWx1ZSk7IH0sCgkJCXJlamVjdDogIGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gZGVsaXZlcih0aGlzLCBTVEFURV9SRUpFQ1RFRCwgICJyZWplY3RSZWFzb24iLCB2YWx1ZSk7IH0sCgoJCQkvKiAgIlRoZSB0aGVuIE1ldGhvZCIgW1Byb21pc2VzL0ErIDEuMSwgMS4yLCAyLjJdICAqLwoJCQl0aGVuOiBmdW5jdGlvbiAob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHsKCQkJCXZhciBjdXJyID0gdGhpczsKCQkJCXZhciBuZXh0ID0gbmV3IGFwaSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjddICAqLwoJCQkJY3Vyci5vbkZ1bGZpbGxlZC5wdXNoKAoJCQkJCXJlc29sdmVyKG9uRnVsZmlsbGVkLCBuZXh0LCAiZnVsZmlsbCIpKTsgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjIuMi8yLjIuNl0gICovCgkJCQljdXJyLm9uUmVqZWN0ZWQucHVzaCgKCQkJCQlyZXNvbHZlcihvblJlamVjdGVkLCAgbmV4dCwgInJlamVjdCIgKSk7ICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjMvMi4yLjZdICAqLwoJCQkJZXhlY3V0ZShjdXJyKTsKCQkJCXJldHVybiBuZXh0LnByb3h5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjcsIDMuM10gICovCgkJCX0KCQl9OwoKCQkvKiAgZGVsaXZlciBhbiBhY3Rpb24gICovCgkJdmFyIGRlbGl2ZXIgPSBmdW5jdGlvbiAoY3Vyciwgc3RhdGUsIG5hbWUsIHZhbHVlKSB7CgkJCWlmIChjdXJyLnN0YXRlID09PSBTVEFURV9QRU5ESU5HKSB7CgkJCQljdXJyLnN0YXRlID0gc3RhdGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMS4yLjEsIDIuMS4zLjFdICAqLwoJCQkJY3VycltuYW1lXSA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjEuMi4yLCAyLjEuMy4yXSAgKi8KCQkJCWV4ZWN1dGUoY3Vycik7CgkJCX0KCQkJcmV0dXJuIGN1cnI7CgkJfTsKCgkJLyogIGV4ZWN1dGUgYWxsIGhhbmRsZXJzICAqLwoJCXZhciBleGVjdXRlID0gZnVuY3Rpb24gKGN1cnIpIHsKCQkJaWYgKGN1cnIuc3RhdGUgPT09IFNUQVRFX0ZVTEZJTExFRCkKCQkJCWV4ZWN1dGVfaGFuZGxlcnMoY3VyciwgIm9uRnVsZmlsbGVkIiwgY3Vyci5mdWxmaWxsVmFsdWUpOwoJCQllbHNlIGlmIChjdXJyLnN0YXRlID09PSBTVEFURV9SRUpFQ1RFRCkKCQkJCWV4ZWN1dGVfaGFuZGxlcnMoY3VyciwgIm9uUmVqZWN0ZWQiLCAgY3Vyci5yZWplY3RSZWFzb24pOwoJCX07CgoJCS8qICBleGVjdXRlIHBhcnRpY3VsYXIgc2V0IG9mIGhhbmRsZXJzICAqLwoJCXZhciBleGVjdXRlX2hhbmRsZXJzID0gZnVuY3Rpb24gKGN1cnIsIG5hbWUsIHZhbHVlKSB7CgkJCS8qIGdsb2JhbCBwcm9jZXNzOiB0cnVlICovCgkJCS8qIGdsb2JhbCBzZXRJbW1lZGlhdGU6IHRydWUgKi8KCQkJLyogZ2xvYmFsIHNldFRpbWVvdXQ6IHRydWUgKi8KCgkJCS8qICBzaG9ydC1jaXJjdWl0IHByb2Nlc3NpbmcgICovCgkJCWlmIChjdXJyW25hbWVdLmxlbmd0aCA9PT0gMCkKCQkJCXJldHVybjsKCgkJCS8qICBpdGVyYXRlIG92ZXIgYWxsIGhhbmRsZXJzLCBleGFjdGx5IG9uY2UgICovCgkJCXZhciBoYW5kbGVycyA9IGN1cnJbbmFtZV07CgkJCWN1cnJbbmFtZV0gPSBbXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMi4yLjMsIDIuMi4zLjNdICAqLwoJCQl2YXIgZnVuYyA9IGZ1bmN0aW9uICgpIHsKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyBpKyspCgkJCQkJaGFuZGxlcnNbaV0odmFsdWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMi41XSAgKi8KCQkJfTsKCgkJCS8qICBleGVjdXRlIHByb2NlZHVyZSBhc3luY2hyb25vdXNseSAgKi8gICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMi40LCAzLjFdICAqLwoJCQlpZiAodHlwZW9mIHByb2Nlc3MgPT09ICJvYmplY3QiICYmIHR5cGVvZiBwcm9jZXNzLm5leHRUaWNrID09PSAiZnVuY3Rpb24iKQoJCQkJcHJvY2Vzcy5uZXh0VGljayhmdW5jKTsKCQkJZWxzZSBpZiAodHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gImZ1bmN0aW9uIikKCQkJCXNldEltbWVkaWF0ZShmdW5jKTsKCQkJZWxzZQoJCQkJc2V0VGltZW91dChmdW5jLCAwKTsKCQl9OwoKCQkvKiAgZ2VuZXJhdGUgYSByZXNvbHZlciBmdW5jdGlvbiAgKi8KCQl2YXIgcmVzb2x2ZXIgPSBmdW5jdGlvbiAoY2IsIG5leHQsIG1ldGhvZCkgewoJCQlyZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7CgkJCQlpZiAodHlwZW9mIGNiICE9PSAiZnVuY3Rpb24iKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMi4xLCAyLjIuNy4zLCAyLjIuNy40XSAgKi8KCQkJCQluZXh0W21ldGhvZF0uY2FsbChuZXh0LCB2YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjcuMywgMi4yLjcuNF0gICovCgkJCQllbHNlIHsKCQkJCQl2YXIgcmVzdWx0OwoJCQkJCXRyeSB7IHJlc3VsdCA9IGNiKHZhbHVlKTsgfSAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjIuMi4xLCAyLjIuMy4xLCAyLjIuNSwgMy4yXSAgKi8KCQkJCQljYXRjaCAoZSkgewoJCQkJCQluZXh0LnJlamVjdChlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjIuNy4yXSAgKi8KCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCQlyZXNvbHZlKG5leHQsIHJlc3VsdCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjcuMV0gICovCgkJCQl9CgkJCX07CgkJfTsKCgkJLyogICJQcm9taXNlIFJlc29sdXRpb24gUHJvY2VkdXJlIiAgKi8gICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuM10gICovCgkJdmFyIHJlc29sdmUgPSBmdW5jdGlvbiAocHJvbWlzZSwgeCkgewoJCQkvKiAgc2FuaXR5IGNoZWNrIGFyZ3VtZW50cyAgKi8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjMuMV0gICovCgkJCWlmIChwcm9taXNlID09PSB4IHx8IHByb21pc2UucHJveHkgPT09IHgpIHsKCQkJCXByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoImNhbm5vdCByZXNvbHZlIHByb21pc2Ugd2l0aCBpdHNlbGYiKSk7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8qICBzdXJnaWNhbGx5IGNoZWNrIGZvciBhICJ0aGVuIiBtZXRob2QKCQkJCShtYWlubHkgdG8ganVzdCBjYWxsIHRoZSAiZ2V0dGVyIiBvZiAidGhlbiIgb25seSBvbmNlKSAgKi8KCQkJdmFyIHRoZW47CgkJCWlmICgodHlwZW9mIHggPT09ICJvYmplY3QiICYmIHggIT09IG51bGwpIHx8IHR5cGVvZiB4ID09PSAiZnVuY3Rpb24iKSB7CgkJCQl0cnkgeyB0aGVuID0geC50aGVuOyB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjEsIDMuNV0gICovCgkJCQljYXRjaCAoZSkgewoJCQkJCXByb21pc2UucmVqZWN0KGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjMuMy4yXSAgKi8KCQkJCQlyZXR1cm47CgkJCQl9CgkJCX0KCgkJCS8qICBoYW5kbGUgb3duIFRoZW5hYmxlcyAgICBbUHJvbWlzZXMvQSsgMi4zLjJdCgkJCQlhbmQgc2ltaWxhciAidGhlbmFibGVzIiBbUHJvbWlzZXMvQSsgMi4zLjNdICAqLwoJCQlpZiAodHlwZW9mIHRoZW4gPT09ICJmdW5jdGlvbiIpIHsKCQkJCXZhciByZXNvbHZlZCA9IGZhbHNlOwoJCQkJdHJ5IHsKCQkJCQkvKiAgY2FsbCByZXRyaWV2ZWQgInRoZW4iIG1ldGhvZCAqLyAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4zLjMuM10gICovCgkJCQkJdGhlbi5jYWxsKHgsCgkJCQkJCS8qICByZXNvbHZlUHJvbWlzZSAgKi8gICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjMuMV0gICovCgkJCQkJCWZ1bmN0aW9uICh5KSB7CgkJCQkJCQlpZiAocmVzb2x2ZWQpIHJldHVybjsgcmVzb2x2ZWQgPSB0cnVlOyAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjMuM10gICovCgkJCQkJCQlpZiAoeSA9PT0geCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDMuNl0gICovCgkJCQkJCQkJcHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcigiY2lyY3VsYXIgdGhlbmFibGUgY2hhaW4iKSk7CgkJCQkJCQllbHNlCgkJCQkJCQkJcmVzb2x2ZShwcm9taXNlLCB5KTsKCQkJCQkJfSwKCgkJCQkJCS8qICByZWplY3RQcm9taXNlICAqLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjMuMl0gICovCgkJCQkJCWZ1bmN0aW9uIChyKSB7CgkJCQkJCQlpZiAocmVzb2x2ZWQpIHJldHVybjsgcmVzb2x2ZWQgPSB0cnVlOyAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjMuM10gICovCgkJCQkJCQlwcm9taXNlLnJlamVjdChyKTsKCQkJCQkJfQoJCQkJCSk7CgkJCQl9CgkJCQljYXRjaCAoZSkgewoJCQkJCWlmICghcmVzb2x2ZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjMuMy4zLjNdICAqLwoJCQkJCQlwcm9taXNlLnJlamVjdChlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjMuMy4zLjRdICAqLwoJCQkJfQoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvKiAgaGFuZGxlIG90aGVyIHZhbHVlcyAgKi8KCQkJcHJvbWlzZS5mdWxmaWxsKHgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4zLjQsIDIuMy4zLjRdICAqLwoJCX07CgoJCS8qICBleHBvcnQgQVBJICAqLwoJCXJldHVybiBhcGk7Cgl9KSgpLAoKCS8vanNjczplbmFibGUKCgkvLyBFdmVudAoJLy8gQSBjb250cnVjdG9yIHN1cGVyY2xhc3MgZm9yIGFkZGluZyBldmVudCBtZW50aG9kcywgb24sIG9mZiwgZW1pdC4KCUV2ZW50OiBmdW5jdGlvbigpIHsKCgkJdmFyIHNlcGFyYXRvciA9IC9bXHNcLF0rLzsKCgkJLy8gSWYgdGhpcyBkb2Vzbid0IHN1cHBvcnQgZ2V0UHJvdG90eXBlIHRoZW4gd2UgY2FuJ3QgZ2V0IHByb3RvdHlwZS5ldmVudHMgb2YgdGhlIHBhcmVudAoJCS8vIFNvIGxldHMgZ2V0IHRoZSBjdXJyZW50IGluc3RhbmNlIGV2ZW50cywgYW5kIGFkZCB0aG9zZSB0byBhIHBhcmVudCBwcm9wZXJ0eQoJCXRoaXMucGFyZW50ID0gewoJCQlldmVudHM6IHRoaXMuZXZlbnRzLAoJCQlmaW5kRXZlbnRzOiB0aGlzLmZpbmRFdmVudHMsCgkJCXBhcmVudDogdGhpcy5wYXJlbnQsCgkJCXV0aWxzOiB0aGlzLnV0aWxzCgkJfTsKCgkJdGhpcy5ldmVudHMgPSB7fTsKCgkJLy8gT24sIHN1YnNjcmliZSB0byBldmVudHMKCQkvLyBAcGFyYW0gZXZ0ICAgc3RyaW5nCgkJLy8gQHBhcmFtIGNhbGxiYWNrICBmdW5jdGlvbgoJCXRoaXMub24gPSBmdW5jdGlvbihldnQsIGNhbGxiYWNrKSB7CgoJCQlpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIChjYWxsYmFjaykgPT09ICdmdW5jdGlvbicpIHsKCQkJCXZhciBhID0gZXZ0LnNwbGl0KHNlcGFyYXRvcik7CgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKCgkJCQkJLy8gSGFzIHRoaXMgZXZlbnQgYWxyZWFkeSBiZWVuIGZpcmVkIG9uIHRoaXMgaW5zdGFuY2U/CgkJCQkJdGhpcy5ldmVudHNbYVtpXV0gPSBbY2FsbGJhY2tdLmNvbmNhdCh0aGlzLmV2ZW50c1thW2ldXSB8fCBbXSk7CgkJCQl9CgkJCX0KCgkJCXJldHVybiB0aGlzOwoJCX07CgoJCS8vIE9mZiwgdW5zdWJzY3JpYmUgdG8gZXZlbnRzCgkJLy8gQHBhcmFtIGV2dCAgIHN0cmluZwoJCS8vIEBwYXJhbSBjYWxsYmFjayAgZnVuY3Rpb24KCQl0aGlzLm9mZiA9IGZ1bmN0aW9uKGV2dCwgY2FsbGJhY2spIHsKCgkJCXRoaXMuZmluZEV2ZW50cyhldnQsIGZ1bmN0aW9uKG5hbWUsIGluZGV4KSB7CgkJCQlpZiAoIWNhbGxiYWNrIHx8IHRoaXMuZXZlbnRzW25hbWVdW2luZGV4XSA9PT0gY2FsbGJhY2spIHsKCQkJCQl0aGlzLmV2ZW50c1tuYW1lXVtpbmRleF0gPSBudWxsOwoJCQkJfQoJCQl9KTsKCgkJCXJldHVybiB0aGlzOwoJCX07CgoJCS8vIEVtaXQKCQkvLyBUcmlnZ2VycyBhbnkgc3Vic2NyaWJlZCBldmVudHMKCQl0aGlzLmVtaXQgPSBmdW5jdGlvbihldnQgLyosIGRhdGEsIC4uLiAqLykgewoKCQkJLy8gR2V0IGFyZ3VtZW50cyBhcyBhbiBBcnJheSwga25vY2sgb2ZmIHRoZSBmaXJzdCBvbmUKCQkJdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoJCQlhcmdzLnB1c2goZXZ0KTsKCgkJCS8vIEhhbmRsZXIKCQkJdmFyIGhhbmRsZXIgPSBmdW5jdGlvbihuYW1lLCBpbmRleCkgewoKCQkJCS8vIFJlcGxhY2UgdGhlIGxhc3QgcHJvcGVydHkgd2l0aCB0aGUgZXZlbnQgbmFtZQoJCQkJYXJnc1thcmdzLmxlbmd0aCAtIDFdID0gKG5hbWUgPT09ICcqJyA/IGV2dCA6IG5hbWUpOwoKCQkJCS8vIFRyaWdnZXIKCQkJCXRoaXMuZXZlbnRzW25hbWVdW2luZGV4XS5hcHBseSh0aGlzLCBhcmdzKTsKCQkJfTsKCgkJCS8vIEZpbmQgdGhlIGNhbGxiYWNrcyB3aGljaCBtYXRjaCB0aGUgY29uZGl0aW9uIGFuZCBjYWxsCgkJCXZhciBfdGhpcyA9IHRoaXM7CgkJCXdoaWxlIChfdGhpcyAmJiBfdGhpcy5maW5kRXZlbnRzKSB7CgoJCQkJLy8gRmluZCBldmVudHMgd2hpY2ggbWF0Y2gKCQkJCV90aGlzLmZpbmRFdmVudHMoZXZ0ICsgJywqJywgaGFuZGxlcik7CgkJCQlfdGhpcyA9IF90aGlzLnBhcmVudDsKCQkJfQoKCQkJcmV0dXJuIHRoaXM7CgkJfTsKCgkJLy8KCQkvLyBFYXN5IGZ1bmN0aW9ucwoJCXRoaXMuZW1pdEFmdGVyID0gZnVuY3Rpb24oKSB7CgkJCXZhciBfdGhpcyA9IHRoaXM7CgkJCXZhciBhcmdzID0gYXJndW1lbnRzOwoJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJX3RoaXMuZW1pdC5hcHBseShfdGhpcywgYXJncyk7CgkJCX0sIDApOwoKCQkJcmV0dXJuIHRoaXM7CgkJfTsKCgkJdGhpcy5maW5kRXZlbnRzID0gZnVuY3Rpb24oZXZ0LCBjYWxsYmFjaykgewoKCQkJdmFyIGEgPSBldnQuc3BsaXQoc2VwYXJhdG9yKTsKCgkJCWZvciAodmFyIG5hbWUgaW4gdGhpcy5ldmVudHMpIHtpZiAodGhpcy5ldmVudHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKCgkJCQlpZiAoYS5pbmRleE9mKG5hbWUpID4gLTEpIHsKCgkJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmV2ZW50c1tuYW1lXS5sZW5ndGg7IGkrKykgewoKCQkJCQkJLy8gRG9lcyB0aGUgZXZlbnQgaGFuZGxlciBleGlzdD8KCQkJCQkJaWYgKHRoaXMuZXZlbnRzW25hbWVdW2ldKSB7CgkJCQkJCQkvLyBFbWl0IG9uIHRoZSBsb2NhbCBpbnN0YW5jZSBvZiB0aGlzCgkJCQkJCQljYWxsYmFjay5jYWxsKHRoaXMsIG5hbWUsIGkpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9fQoJCX07CgoJCXJldHVybiB0aGlzOwoJfSwKCgkvLyBHbG9iYWwgRXZlbnRzCgkvLyBBdHRhY2ggdGhlIGNhbGxiYWNrIHRvIHRoZSB3aW5kb3cgb2JqZWN0CgkvLyBSZXR1cm4gaXRzIHVuaXF1ZSByZWZlcmVuY2UKCWdsb2JhbEV2ZW50OiBmdW5jdGlvbihjYWxsYmFjaywgZ3VpZCkgewoJCS8vIElmIHRoZSBndWlkIGhhcyBub3QgYmVlbiBzdXBwbGllZCB0aGVuIGNyZWF0ZSBhIG5ldyBvbmUuCgkJZ3VpZCA9IGd1aWQgfHwgJ19oZWxsb2pzXycgKyBwYXJzZUludChNYXRoLnJhbmRvbSgpICogMWUxMiwgMTApLnRvU3RyaW5nKDM2KTsKCgkJLy8gRGVmaW5lIHRoZSBjYWxsYmFjayBmdW5jdGlvbgoJCXdpbmRvd1tndWlkXSA9IGZ1bmN0aW9uKCkgewoJCQkvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjawoJCQl0cnkgewoJCQkJaWYgKGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHsKCQkJCQlkZWxldGUgd2luZG93W2d1aWRdOwoJCQkJfQoJCQl9CgkJCWNhdGNoIChlKSB7CgkJCQljb25zb2xlLmVycm9yKGUpOwoJCQl9CgkJfTsKCgkJcmV0dXJuIGd1aWQ7Cgl9LAoKCS8vIFRyaWdnZXIgYSBjbGllbnRzaWRlIHBvcHVwCgkvLyBUaGlzIGhhcyBiZWVuIGF1Z21lbnRlZCB0byBzdXBwb3J0IFBob25lR2FwCglwb3B1cDogZnVuY3Rpb24odXJsLCByZWRpcmVjdFVyaSwgb3B0aW9ucykgewoKCQl2YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoKCQkvLyBNdWx0aSBTY3JlZW4gUG9wdXAgUG9zaXRpb25pbmcgKGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2ODYxMDUwKQoJCS8vIENyZWRpdDogaHR0cDovL3d3dy54dGYuZGsvMjAxMS8wOC9jZW50ZXItbmV3LXBvcHVwLXdpbmRvdy1ldmVuLW9uLmh0bWwKCQkvLyBGaXhlcyBkdWFsLXNjcmVlbiBwb3NpdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICBNb3N0IGJyb3dzZXJzICAgICAgRmlyZWZveAoKCQlpZiAob3B0aW9ucy5oZWlnaHQpIHsKCQkJdmFyIGR1YWxTY3JlZW5Ub3AgPSB3aW5kb3cuc2NyZWVuVG9wICE9PSB1bmRlZmluZWQgPyB3aW5kb3cuc2NyZWVuVG9wIDogc2NyZWVuLnRvcDsKCQkJdmFyIGhlaWdodCA9IHNjcmVlbi5oZWlnaHQgfHwgd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7CgkJCW9wdGlvbnMudG9wID0gcGFyc2VJbnQoKGhlaWdodCAtIG9wdGlvbnMuaGVpZ2h0KSAvIDIsIDEwKSArIGR1YWxTY3JlZW5Ub3A7CgkJfQoKCQlpZiAob3B0aW9ucy53aWR0aCkgewoJCQl2YXIgZHVhbFNjcmVlbkxlZnQgPSB3aW5kb3cuc2NyZWVuTGVmdCAhPT0gdW5kZWZpbmVkID8gd2luZG93LnNjcmVlbkxlZnQgOiBzY3JlZW4ubGVmdDsKCQkJdmFyIHdpZHRoID0gc2NyZWVuLndpZHRoIHx8IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsKCQkJb3B0aW9ucy5sZWZ0ID0gcGFyc2VJbnQoKHdpZHRoIC0gb3B0aW9ucy53aWR0aCkgLyAyLCAxMCkgKyBkdWFsU2NyZWVuTGVmdDsKCQl9CgoJCS8vIENvbnZlcnQgb3B0aW9ucyBpbnRvIGFuIGFycmF5CgkJdmFyIG9wdGlvbnNBcnJheSA9IFtdOwoJCU9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkgewoJCQl2YXIgdmFsdWUgPSBvcHRpb25zW25hbWVdOwoJCQlvcHRpb25zQXJyYXkucHVzaChuYW1lICsgKHZhbHVlICE9PSBudWxsID8gJz0nICsgdmFsdWUgOiAnJykpOwoJCX0pOwoKCQkvLyBDYWxsIHRoZSBvcGVuKCkgZnVuY3Rpb24gd2l0aCB0aGUgaW5pdGlhbCBwYXRoCgkJLy8KCQkvLyBPQXV0aCByZWRpcmVjdCwgZml4ZXMgVVJJIGZyYWdtZW50cyBmcm9tIGJlaW5nIGxvc3QgaW4gU2FmYXJpCgkJLy8gKFVSSSBGcmFnbWVudHMgd2l0aGluIDMwMiBMb2NhdGlvbiBVUkkgYXJlIGxvc3Qgb3ZlciBIVFRQUykKCQkvLyBMb2FkaW5nIHRoZSByZWRpcmVjdC5odG1sIGJlZm9yZSB0cmlnZ2VyaW5nIHRoZSBPQXV0aCBGbG93IHNlZW1zIHRvIGZpeCBpdC4KCQkvLwoJCS8vIEZpcmVmb3ggIGRlY29kZXMgVVJMIGZyYWdtZW50cyB3aGVuIGNhbGxpbmcgbG9jYXRpb24uaGFzaC4KCQkvLyAgLSBUaGlzIGlzIGJhZCBpZiB0aGUgdmFsdWUgY29udGFpbnMgYnJlYWsgcG9pbnRzIHdoaWNoIGFyZSBlc2NhcGVkCgkJLy8gIC0gSGVuY2UgdGhlIHVybCBtdXN0IGJlIGVuY29kZWQgdHdpY2UgYXMgaXQgY29udGFpbnMgYnJlYWtwb2ludHMuCgkJaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignU2FmYXJpJykgIT09IC0xICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPT09IC0xKSB7CgkJCXVybCA9IHJlZGlyZWN0VXJpICsgJyNvYXV0aF9yZWRpcmVjdD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGVuY29kZVVSSUNvbXBvbmVudCh1cmwpKTsKCQl9CgoJCXZhciBwb3B1cCA9IHdpbmRvdy5vcGVuKAoJCQl1cmwsCgkJCSdfYmxhbmsnLAoJCQlvcHRpb25zQXJyYXkuam9pbignLCcpCgkJKTsKCgkJaWYgKHBvcHVwICYmIHBvcHVwLmZvY3VzKSB7CgkJCXBvcHVwLmZvY3VzKCk7CgkJfQoKCQlyZXR1cm4gcG9wdXA7Cgl9LAoKCS8vIE9BdXRoIGFuZCBBUEkgcmVzcG9uc2UgaGFuZGxlcgoJcmVzcG9uc2VIYW5kbGVyOiBmdW5jdGlvbih3aW5kb3csIHBhcmVudCkgewoKCQl2YXIgX3RoaXMgPSB0aGlzOwoJCXZhciBwOwoJCXZhciBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjsKCgkJLy8gSXMgdGhpcyBhbiBhdXRoIHJlbGF5IG1lc3NhZ2Ugd2hpY2ggbmVlZHMgdG8gY2FsbCB0aGUgcHJveHk/CgkJcCA9IF90aGlzLnBhcmFtKGxvY2F0aW9uLnNlYXJjaCk7CgoJCS8vIE9BdXRoMiBvciBPQXV0aDEgc2VydmVyIHJlc3BvbnNlPwoJCWlmIChwICYmIHAuc3RhdGUgJiYgKHAuY29kZSB8fCBwLm9hdXRoX3Rva2VuKSkgewoKCQkJdmFyIHN0YXRlID0gSlNPTi5wYXJzZShwLnN0YXRlKTsKCgkJCS8vIEFkZCB0aGlzIHBhdGggYXMgdGhlIHJlZGlyZWN0X3VyaQoJCQlwLnJlZGlyZWN0X3VyaSA9IHN0YXRlLnJlZGlyZWN0X3VyaSB8fCBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoL1tcP1wjXS4qJC8sICcnKTsKCgkJCS8vIFJlZGlyZWN0IHRvIHRoZSBob3N0CgkJCXZhciBwYXRoID0gc3RhdGUub2F1dGhfcHJveHkgKyAnPycgKyBfdGhpcy5wYXJhbShwKTsKCgkJCWxvY2F0aW9uLmFzc2lnbihwYXRoKTsKCgkJCXJldHVybjsKCQl9CgoJCS8vIFNhdmUgc2Vzc2lvbiwgZnJvbSByZWRpcmVjdGVkIGF1dGhlbnRpY2F0aW9uCgkJLy8gI2FjY2Vzc190b2tlbiBoYXMgY29tZSBpbj8KCQkvLwoJCS8vIEZBQ0VCT09LIGlzIHJldHVybmluZyBhdXRoIGVycm9ycyB3aXRoaW4gYXMgYSBxdWVyeV9zdHJpbmcuLi4gdGhhdHMgYSBzdGlja2xlciBmb3IgY29uc2lzdGVuY3kuCgkJLy8gU291bmRDbG91ZCBpcyB0aGUgc3RhdGUgaW4gdGhlIHF1ZXJ5c3RyaW5nIGFuZCB0aGUgdG9rZW4gaW4gdGhlIGhhc2h0YWcsIHNvIHdlJ2xsIG1peCB0aGUgdHdvIHRvZ2V0aGVyCgoJCXAgPSBfdGhpcy5tZXJnZShfdGhpcy5wYXJhbShsb2NhdGlvbi5zZWFyY2ggfHwgJycpLCBfdGhpcy5wYXJhbShsb2NhdGlvbi5oYXNoIHx8ICcnKSk7CgoJCS8vIElmIHAuc3RhdGUKCQlpZiAocCAmJiAnc3RhdGUnIGluIHApIHsKCgkJCS8vIFJlbW92ZSBhbnkgYWRkaXRpb24gaW5mb3JtYXRpb24KCQkJLy8gRS5nLiBwLnN0YXRlID0gJ2ZhY2Vib29rLnBhZ2UnOwoJCQl0cnkgewoJCQkJdmFyIGEgPSBKU09OLnBhcnNlKHAuc3RhdGUpOwoJCQkJX3RoaXMuZXh0ZW5kKHAsIGEpOwoJCQl9CgkJCWNhdGNoIChlKSB7CgkJCQljb25zb2xlLmVycm9yKCdDb3VsZCBub3QgZGVjb2RlIHN0YXRlIHBhcmFtZXRlcicpOwoJCQl9CgoJCQkvLyBBY2Nlc3NfdG9rZW4/CgkJCWlmICgoJ2FjY2Vzc190b2tlbicgaW4gcCAmJiBwLmFjY2Vzc190b2tlbikgJiYgcC5uZXR3b3JrKSB7CgoJCQkJaWYgKCFwLmV4cGlyZXNfaW4gfHwgcGFyc2VJbnQocC5leHBpcmVzX2luLCAxMCkgPT09IDApIHsKCQkJCQkvLyBJZiBwLmV4cGlyZXNfaW4gaXMgdW5zZXQsIHNldCB0byAwCgkJCQkJcC5leHBpcmVzX2luID0gMDsKCQkJCX0KCgkJCQlwLmV4cGlyZXNfaW4gPSBwYXJzZUludChwLmV4cGlyZXNfaW4sIDEwKTsKCQkJCXAuZXhwaXJlcyA9ICgobmV3IERhdGUoKSkuZ2V0VGltZSgpIC8gMWUzKSArIChwLmV4cGlyZXNfaW4gfHwgKDYwICogNjAgKiAyNCAqIDM2NSkpOwoKCQkJCS8vIExldHMgdXNlIHRoZSAic3RhdGUiIHRvIGFzc2lnbiBpdCB0byBvbmUgb2Ygb3VyIG5ldHdvcmtzCgkJCQlhdXRoQ2FsbGJhY2socCwgd2luZG93LCBwYXJlbnQpOwoJCQl9CgoJCQkvLyBFcnJvcj0/CgkJCS8vICZlcnJvcl9kZXNjcmlwdGlvbj0/CgkJCS8vICZzdGF0ZT0/CgkJCWVsc2UgaWYgKCgnZXJyb3InIGluIHAgJiYgcC5lcnJvcikgJiYgcC5uZXR3b3JrKSB7CgoJCQkJcC5lcnJvciA9IHsKCQkJCQljb2RlOiBwLmVycm9yLAoJCQkJCW1lc3NhZ2U6IHAuZXJyb3JfbWVzc2FnZSB8fCBwLmVycm9yX2Rlc2NyaXB0aW9uCgkJCQl9OwoKCQkJCS8vIExldCB0aGUgc3RhdGUgaGFuZGxlciBoYW5kbGUgaXQKCQkJCWF1dGhDYWxsYmFjayhwLCB3aW5kb3csIHBhcmVudCk7CgkJCX0KCgkJCS8vIEFQSSBjYWxsLCBvciBhIGNhbmNlbGxlZCBsb2dpbgoJCQkvLyBSZXN1bHQgaXMgc2VyaWFsaXplZCBKU09OIHN0cmluZwoJCQllbHNlIGlmIChwLmNhbGxiYWNrICYmIHAuY2FsbGJhY2sgaW4gcGFyZW50KSB7CgoJCQkJLy8gVHJpZ2dlciBhIGZ1bmN0aW9uIGluIHRoZSBwYXJlbnQKCQkJCXZhciByZXMgPSAncmVzdWx0JyBpbiBwICYmIHAucmVzdWx0ID8gSlNPTi5wYXJzZShwLnJlc3VsdCkgOiBmYWxzZTsKCgkJCQkvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayBvbiB0aGUgcGFyZW50CgkJCQlwYXJlbnRbcC5jYWxsYmFja10ocmVzKTsKCQkJCWNsb3NlV2luZG93KCk7CgkJCX0KCgkJCS8vIElmIHRoaXMgcGFnZSBpcyBzdGlsbCBvcGVuCgkJCWlmIChwLnBhZ2VfdXJpKSB7CgkJCQlsb2NhdGlvbi5hc3NpZ24ocC5wYWdlX3VyaSk7CgkJCX0KCQl9CgoJCS8vIE9BdXRoIHJlZGlyZWN0LCBmaXhlcyBVUkkgZnJhZ21lbnRzIGZyb20gYmVpbmcgbG9zdCBpbiBTYWZhcmkKCQkvLyAoVVJJIEZyYWdtZW50cyB3aXRoaW4gMzAyIExvY2F0aW9uIFVSSSBhcmUgbG9zdCBvdmVyIEhUVFBTKQoJCS8vIExvYWRpbmcgdGhlIHJlZGlyZWN0Lmh0bWwgYmVmb3JlIHRyaWdnZXJpbmcgdGhlIE9BdXRoIEZsb3cgc2VlbXMgdG8gZml4IGl0LgoJCWVsc2UgaWYgKCdvYXV0aF9yZWRpcmVjdCcgaW4gcCkgewoKCQkJbG9jYXRpb24uYXNzaWduKGRlY29kZVVSSUNvbXBvbmVudChwLm9hdXRoX3JlZGlyZWN0KSk7CgkJCXJldHVybjsKCQl9CgoJCS8vIFRyaWdnZXIgYSBjYWxsYmFjayB0byBhdXRoZW50aWNhdGUKCQlmdW5jdGlvbiBhdXRoQ2FsbGJhY2sob2JqLCB3aW5kb3csIHBhcmVudCkgewoKCQkJdmFyIGNiID0gb2JqLmNhbGxiYWNrOwoJCQl2YXIgbmV0d29yayA9IG9iai5uZXR3b3JrOwoKCQkJLy8gVHJpZ2dlciB0aGUgY2FsbGJhY2sgb24gdGhlIHBhcmVudAoJCQlfdGhpcy5zdG9yZShuZXR3b3JrLCBvYmopOwoKCQkJLy8gSWYgdGhpcyBpcyBhIHBhZ2UgcmVxdWVzdCBpdCBoYXMgbm8gcGFyZW50IG9yIG9wZW5lciB3aW5kb3cgdG8gaGFuZGxlIGNhbGxiYWNrcwoJCQlpZiAoKCdkaXNwbGF5JyBpbiBvYmopICYmIG9iai5kaXNwbGF5ID09PSAncGFnZScpIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gUmVtb3ZlIGZyb20gc2Vzc2lvbiBvYmplY3QKCQkJaWYgKHBhcmVudCAmJiBjYiAmJiBjYiBpbiBwYXJlbnQpIHsKCgkJCQl0cnkgewoJCQkJCWRlbGV0ZSBvYmouY2FsbGJhY2s7CgkJCQl9CgkJCQljYXRjaCAoZSkge30KCgkJCQkvLyBVcGRhdGUgc3RvcmUKCQkJCV90aGlzLnN0b3JlKG5ldHdvcmssIG9iaik7CgoJCQkJLy8gQ2FsbCB0aGUgZ2xvYmFsRXZlbnQgZnVuY3Rpb24gb24gdGhlIHBhcmVudAoJCQkJLy8gSXQncyBzYWZlciB0byBwYXNzIGJhY2sgYSBzdHJpbmcgdG8gdGhlIHBhcmVudCwKCQkJCS8vIFJhdGhlciB0aGFuIGFuIG9iamVjdC9hcnJheSAoYmV0dGVyIGZvciBJRTgpCgkJCQl2YXIgc3RyID0gSlNPTi5zdHJpbmdpZnkob2JqKTsKCgkJCQl0cnkgewoJCQkJCXBhcmVudFtjYl0oc3RyKTsKCQkJCX0KCQkJCWNhdGNoIChlKSB7CgkJCQkJLy8gRXJyb3IgdGhyb3duIHdoaWxzdCBleGVjdXRpbmcgcGFyZW50IGNhbGxiYWNrCgkJCQl9CgkJCX0KCgkJCWNsb3NlV2luZG93KCk7CgkJfQoKCQlmdW5jdGlvbiBjbG9zZVdpbmRvdygpIHsKCgkJCWlmICh3aW5kb3cuZnJhbWVFbGVtZW50KSB7CgkJCQkvLyBJbnNpZGUgYW4gaWZyYW1lLCByZW1vdmUgZnJvbSBwYXJlbnQKCQkJCXBhcmVudC5kb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHdpbmRvdy5mcmFtZUVsZW1lbnQpOwoJCQl9CgkJCWVsc2UgewoJCQkJLy8gQ2xvc2UgdGhpcyBjdXJyZW50IHdpbmRvdwoJCQkJdHJ5IHsKCQkJCQl3aW5kb3cuY2xvc2UoKTsKCQkJCX0KCQkJCWNhdGNoIChlKSB7fQoKCQkJCS8vIElPUyBidWcgd29udCBsZXQgdXMgY2xvc2UgYSBwb3B1cCBpZiBzdGlsbCBsb2FkaW5nCgkJCQlpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHsKCQkJCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkgewoJCQkJCQl3aW5kb3cuY2xvc2UoKTsKCQkJCQl9KTsKCQkJCX0KCQkJfQoKCQl9Cgl9Cn0pOwoKLy8gRXZlbnRzCi8vIEV4dGVuZCB0aGUgaGVsbG8gb2JqZWN0IHdpdGggaXRzIG93biBldmVudCBpbnN0YW5jZQpoZWxsby51dGlscy5FdmVudC5jYWxsKGhlbGxvKTsKCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vIE1vbml0b3Jpbmcgc2Vzc2lvbiBzdGF0ZQovLyBDaGVjayBmb3Igc2Vzc2lvbiBjaGFuZ2VzCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgooZnVuY3Rpb24oaGVsbG8pIHsKCgkvLyBNb25pdG9yIGZvciBhIGNoYW5nZSBpbiBzdGF0ZSBhbmQgZmlyZQoJdmFyIG9sZFNlc3Npb25zID0ge307CgoJLy8gSGFzaCBvZiBleHBpcmVkIHRva2VucwoJdmFyIGV4cGlyZWQgPSB7fTsKCgkvLyBMaXN0ZW4gdG8gb3RoZXIgdHJpZ2dlcnMgdG8gQXV0aCBldmVudHMsIHVzZSB0aGVzZSB0byB1cGRhdGUgdGhpcwoJaGVsbG8ub24oJ2F1dGgubG9naW4sIGF1dGgubG9nb3V0JywgZnVuY3Rpb24oYXV0aCkgewoJCWlmIChhdXRoICYmIHR5cGVvZiAoYXV0aCkgPT09ICdvYmplY3QnICYmIGF1dGgubmV0d29yaykgewoJCQlvbGRTZXNzaW9uc1thdXRoLm5ldHdvcmtdID0gaGVsbG8udXRpbHMuc3RvcmUoYXV0aC5uZXR3b3JrKSB8fCB7fTsKCQl9Cgl9KTsKCgkoZnVuY3Rpb24gc2VsZigpIHsKCgkJdmFyIENVUlJFTlRfVElNRSA9ICgobmV3IERhdGUoKSkuZ2V0VGltZSgpIC8gMWUzKTsKCQl2YXIgZW1pdCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSkgewoJCQloZWxsby5lbWl0KCdhdXRoLicgKyBldmVudE5hbWUsIHsKCQkJCW5ldHdvcms6IG5hbWUsCgkJCQlhdXRoUmVzcG9uc2U6IHNlc3Npb24KCQkJfSk7CgkJfTsKCgkJLy8gTG9vcCB0aHJvdWdoIHRoZSBzZXJ2aWNlcwoJCWZvciAodmFyIG5hbWUgaW4gaGVsbG8uc2VydmljZXMpIHtpZiAoaGVsbG8uc2VydmljZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKCgkJCWlmICghaGVsbG8uc2VydmljZXNbbmFtZV0uaWQpIHsKCQkJCS8vIFdlIGhhdmVuJ3QgYXR0YWNoZWQgYW4gSUQgc28gZG9udCBsaXN0ZW4uCgkJCQljb250aW51ZTsKCQkJfQoKCQkJLy8gR2V0IHNlc3Npb24KCQkJdmFyIHNlc3Npb24gPSBoZWxsby51dGlscy5zdG9yZShuYW1lKSB8fCB7fTsKCQkJdmFyIHByb3ZpZGVyID0gaGVsbG8uc2VydmljZXNbbmFtZV07CgkJCXZhciBvbGRTZXNzID0gb2xkU2Vzc2lvbnNbbmFtZV0gfHwge307CgoJCQkvLyBMaXN0ZW4gZm9yIGdsb2JhbEV2ZW50cyB0aGF0IGRpZCBub3QgZ2V0IHRyaWdnZXJlZCBmcm9tIHRoZSBjaGlsZAoJCQlpZiAoc2Vzc2lvbiAmJiAnY2FsbGJhY2snIGluIHNlc3Npb24pIHsKCgkJCQkvLyBUbyBkbyByZW1vdmUgZnJvbSBzZXNzaW9uIG9iamVjdC4uLgoJCQkJdmFyIGNiID0gc2Vzc2lvbi5jYWxsYmFjazsKCQkJCXRyeSB7CgkJCQkJZGVsZXRlIHNlc3Npb24uY2FsbGJhY2s7CgkJCQl9CgkJCQljYXRjaCAoZSkge30KCgkJCQkvLyBVcGRhdGUgc3RvcmUKCQkJCS8vIFJlbW92aW5nIHRoZSBjYWxsYmFjawoJCQkJaGVsbG8udXRpbHMuc3RvcmUobmFtZSwgc2Vzc2lvbik7CgoJCQkJLy8gRW1pdCBnbG9iYWwgZXZlbnRzCgkJCQl0cnkgewoJCQkJCXdpbmRvd1tjYl0oc2Vzc2lvbik7CgkJCQl9CgkJCQljYXRjaCAoZSkge30KCQkJfQoKCQkJLy8gUmVmcmVzaCB0b2tlbgoJCQlpZiAoc2Vzc2lvbiAmJiAoJ2V4cGlyZXMnIGluIHNlc3Npb24pICYmIHNlc3Npb24uZXhwaXJlcyA8IENVUlJFTlRfVElNRSkgewoKCQkJCS8vIElmIGF1dG8gcmVmcmVzaCBpcyBwb3NzaWJsZQoJCQkJLy8gRWl0aGVyIHRoZSBicm93c2VyIHN1cHBvcnRzCgkJCQl2YXIgcmVmcmVzaCA9IHByb3ZpZGVyLnJlZnJlc2ggfHwgc2Vzc2lvbi5yZWZyZXNoX3Rva2VuOwoKCQkJCS8vIEhhcyB0aGUgcmVmcmVzaCBiZWVuIHJ1biByZWNlbnRseT8KCQkJCWlmIChyZWZyZXNoICYmICghKG5hbWUgaW4gZXhwaXJlZCkgfHwgZXhwaXJlZFtuYW1lXSA8IENVUlJFTlRfVElNRSkpIHsKCQkJCQkvLyBUcnkgdG8gcmVzaWduaW4KCQkJCQloZWxsby5lbWl0KCdub3RpY2UnLCBuYW1lICsgJyBoYXMgZXhwaXJlZCB0cnlpbmcgdG8gcmVzaWduaW4nKTsKCQkJCQloZWxsby5sb2dpbihuYW1lLCB7ZGlzcGxheTogJ25vbmUnLCBmb3JjZTogZmFsc2V9KTsKCgkJCQkJLy8gVXBkYXRlIGV4cGlyZWQsIGV2ZXJ5IDEwIG1pbnV0ZXMKCQkJCQlleHBpcmVkW25hbWVdID0gQ1VSUkVOVF9USU1FICsgNjAwOwoJCQkJfQoKCQkJCS8vIERvZXMgdGhpcyBwcm92aWRlciBub3Qgc3VwcG9ydCByZWZyZXNoCgkJCQllbHNlIGlmICghcmVmcmVzaCAmJiAhKG5hbWUgaW4gZXhwaXJlZCkpIHsKCQkJCQkvLyBMYWJlbCB0aGUgZXZlbnQKCQkJCQllbWl0KCdleHBpcmVkJyk7CgkJCQkJZXhwaXJlZFtuYW1lXSA9IHRydWU7CgkJCQl9CgoJCQkJLy8gSWYgc2Vzc2lvbiBoYXMgZXhwaXJlZCB0aGVuIHdlIGRvbnQgd2FudCB0byBzdG9yZSBpdHMgdmFsdWUgdW50aWwgaXQgY2FuIGJlIGVzdGFibGlzaGVkIHRoYXQgaXRzIGJlZW4gdXBkYXRlZAoJCQkJY29udGludWU7CgkJCX0KCgkJCS8vIEhhcyBzZXNzaW9uIGNoYW5nZWQ/CgkJCWVsc2UgaWYgKG9sZFNlc3MuYWNjZXNzX3Rva2VuID09PSBzZXNzaW9uLmFjY2Vzc190b2tlbiAmJgoJCQlvbGRTZXNzLmV4cGlyZXMgPT09IHNlc3Npb24uZXhwaXJlcykgewoJCQkJY29udGludWU7CgkJCX0KCgkJCS8vIEFjY2Vzc190b2tlbiBoYXMgYmVlbiByZW1vdmVkCgkJCWVsc2UgaWYgKCFzZXNzaW9uLmFjY2Vzc190b2tlbiAmJiBvbGRTZXNzLmFjY2Vzc190b2tlbikgewoJCQkJZW1pdCgnbG9nb3V0Jyk7CgkJCX0KCgkJCS8vIEFjY2Vzc190b2tlbiBoYXMgYmVlbiBjcmVhdGVkCgkJCWVsc2UgaWYgKHNlc3Npb24uYWNjZXNzX3Rva2VuICYmICFvbGRTZXNzLmFjY2Vzc190b2tlbikgewoJCQkJZW1pdCgnbG9naW4nKTsKCQkJfQoKCQkJLy8gQWNjZXNzX3Rva2VuIGhhcyBiZWVuIHVwZGF0ZWQKCQkJZWxzZSBpZiAoc2Vzc2lvbi5leHBpcmVzICE9PSBvbGRTZXNzLmV4cGlyZXMpIHsKCQkJCWVtaXQoJ3VwZGF0ZScpOwoJCQl9CgoJCQkvLyBVcGRhdGVkIHN0b3JlZCBzZXNzaW9uCgkJCW9sZFNlc3Npb25zW25hbWVdID0gc2Vzc2lvbjsKCgkJCS8vIFJlbW92ZSB0aGUgZXhwaXJlZCBmbGFncwoJCQlpZiAobmFtZSBpbiBleHBpcmVkKSB7CgkJCQlkZWxldGUgZXhwaXJlZFtuYW1lXTsKCQkJfQoJCX19CgoJCS8vIENoZWNrIGVycm9yIGV2ZW50cwoJCXNldFRpbWVvdXQoc2VsZiwgMTAwMCk7Cgl9KSgpOwoKfSkoaGVsbG8pOwoKLy8gRU9GIENPUkUgbGliCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vIEFQSQovLyBAcGFyYW0gcGF0aCAgICBzdHJpbmcKLy8gQHBhcmFtIHF1ZXJ5ICAgb2JqZWN0IChvcHRpb25hbCkKLy8gQHBhcmFtIG1ldGhvZCAgc3RyaW5nIChvcHRpb25hbCkKLy8gQHBhcmFtIGRhdGEgICAgb2JqZWN0IChvcHRpb25hbCkKLy8gQHBhcmFtIHRpbWVvdXQgaW50ZWdlciAob3B0aW9uYWwpCi8vIEBwYXJhbSBjYWxsYmFjayAgZnVuY3Rpb24gKG9wdGlvbmFsKQoKaGVsbG8uYXBpID0gZnVuY3Rpb24oKSB7CgoJLy8gU2hvcnRoYW5kCgl2YXIgX3RoaXMgPSB0aGlzOwoJdmFyIHV0aWxzID0gX3RoaXMudXRpbHM7Cgl2YXIgZXJyb3IgPSB1dGlscy5lcnJvcjsKCgkvLyBDb25zdHJ1Y3QgYSBuZXcgUHJvbWlzZSBvYmplY3QKCXZhciBwcm9taXNlID0gdXRpbHMuUHJvbWlzZSgpOwoKCS8vIEFyZ3VtZW50cwoJdmFyIHAgPSB1dGlscy5hcmdzKHtwYXRoOiAncyEnLCBxdWVyeTogJ28nLCBtZXRob2Q6ICdzJywgZGF0YTogJ28nLCB0aW1lb3V0OiAnaScsIGNhbGxiYWNrOiAnZid9LCBhcmd1bWVudHMpOwoKCS8vIE1ldGhvZAoJcC5tZXRob2QgPSAocC5tZXRob2QgfHwgJ2dldCcpLnRvTG93ZXJDYXNlKCk7CgoJLy8gSGVhZGVycwoJcC5oZWFkZXJzID0gcC5oZWFkZXJzIHx8IHt9OwoKCS8vIFF1ZXJ5CglwLnF1ZXJ5ID0gcC5xdWVyeSB8fCB7fTsKCgkvLyBJZiBnZXQsIHB1dCBhbGwgcGFyYW1ldGVycyBpbnRvIHF1ZXJ5CglpZiAocC5tZXRob2QgPT09ICdnZXQnIHx8IHAubWV0aG9kID09PSAnZGVsZXRlJykgewoJCXV0aWxzLmV4dGVuZChwLnF1ZXJ5LCBwLmRhdGEpOwoJCXAuZGF0YSA9IHt9OwoJfQoKCXZhciBkYXRhID0gcC5kYXRhID0gcC5kYXRhIHx8IHt9OwoKCS8vIENvbXBsZXRlZCBldmVudCBjYWxsYmFjawoJcHJvbWlzZS50aGVuKHAuY2FsbGJhY2ssIHAuY2FsbGJhY2spOwoKCS8vIFJlbW92ZSB0aGUgbmV0d29yayBmcm9tIHBhdGgsIGUuZy4gZmFjZWJvb2s6L21lL2ZyaWVuZHMKCS8vIFJlc3VsdHMgaW4geyBuZXR3b3JrIDogZmFjZWJvb2ssIHBhdGggOiBtZS9mcmllbmRzIH0KCWlmICghcC5wYXRoKSB7CgkJcmV0dXJuIHByb21pc2UucmVqZWN0KGVycm9yKCdpbnZhbGlkX3BhdGgnLCAnTWlzc2luZyB0aGUgcGF0aCBwYXJhbWV0ZXIgZnJvbSB0aGUgcmVxdWVzdCcpKTsKCX0KCglwLnBhdGggPSBwLnBhdGgucmVwbGFjZSgvXlwvKy8sICcnKTsKCXZhciBhID0gKHAucGF0aC5zcGxpdCgvW1wvXDpdLywgMikgfHwgW10pWzBdLnRvTG93ZXJDYXNlKCk7CgoJaWYgKGEgaW4gX3RoaXMuc2VydmljZXMpIHsKCQlwLm5ldHdvcmsgPSBhOwoJCXZhciByZWcgPSBuZXcgUmVnRXhwKCdeJyArIGEgKyAnOj9cLz8nKTsKCQlwLnBhdGggPSBwLnBhdGgucmVwbGFjZShyZWcsICcnKTsKCX0KCgkvLyBOZXR3b3JrICYgUHJvdmlkZXIKCS8vIERlZmluZSB0aGUgbmV0d29yayB0aGF0IHRoaXMgcmVxdWVzdCBpcyBtYWRlIGZvcgoJcC5uZXR3b3JrID0gX3RoaXMuc2V0dGluZ3MuZGVmYXVsdF9zZXJ2aWNlID0gcC5uZXR3b3JrIHx8IF90aGlzLnNldHRpbmdzLmRlZmF1bHRfc2VydmljZTsKCXZhciBvID0gX3RoaXMuc2VydmljZXNbcC5uZXR3b3JrXTsKCgkvLyBJTlZBTElECgkvLyBJcyB0aGVyZSBubyBzZXJ2aWNlIGJ5IHRoZSBnaXZlbiBuZXR3b3JrIG5hbWU/CglpZiAoIW8pIHsKCQlyZXR1cm4gcHJvbWlzZS5yZWplY3QoZXJyb3IoJ2ludmFsaWRfbmV0d29yaycsICdDb3VsZCBub3QgbWF0Y2ggdGhlIHNlcnZpY2UgcmVxdWVzdGVkOiAnICsgcC5uZXR3b3JrKSk7Cgl9CgoJLy8gUEFUSAoJLy8gQXMgbG9uZyBhcyB0aGUgcGF0aCBpc24ndCBmbGFnZ2VkIGFzIHVuYXZhaWFibGUsIGUuZy4gcGF0aCA9PSBmYWxzZQoKCWlmICghKCEocC5tZXRob2QgaW4gbykgfHwgIShwLnBhdGggaW4gb1twLm1ldGhvZF0pIHx8IG9bcC5tZXRob2RdW3AucGF0aF0gIT09IGZhbHNlKSkgewoJCXJldHVybiBwcm9taXNlLnJlamVjdChlcnJvcignaW52YWxpZF9wYXRoJywgJ1RoZSBwcm92aWRlZCBwYXRoIGlzIG5vdCBhdmFpbGFibGUgb24gdGhlIHNlbGVjdGVkIG5ldHdvcmsnKSk7Cgl9CgoJLy8gUFJPWFkKCS8vIE9BdXRoMSBjYWxscyBhbHdheXMgbmVlZCBhIHByb3h5CgoJaWYgKCFwLm9hdXRoX3Byb3h5KSB7CgkJcC5vYXV0aF9wcm94eSA9IF90aGlzLnNldHRpbmdzLm9hdXRoX3Byb3h5OwoJfQoKCWlmICghKCdwcm94eScgaW4gcCkpIHsKCQlwLnByb3h5ID0gcC5vYXV0aF9wcm94eSAmJiBvLm9hdXRoICYmIHBhcnNlSW50KG8ub2F1dGgudmVyc2lvbiwgMTApID09PSAxOwoJfQoKCS8vIFRJTUVPVVQKCS8vIEFkb3B0IHRpbWVvdXQgZnJvbSBnbG9iYWwgc2V0dGluZ3MgYnkgZGVmYXVsdAoKCWlmICghKCd0aW1lb3V0JyBpbiBwKSkgewoJCXAudGltZW91dCA9IF90aGlzLnNldHRpbmdzLnRpbWVvdXQ7Cgl9CgoJLy8gRm9ybWF0IHJlc3BvbnNlCgkvLyBXaGV0aGVyIHRvIHJ1biB0aGUgcmF3IHJlc3BvbnNlIHRocm91Z2ggcG9zdCBwcm9jZXNzaW5nLgoJaWYgKCEoJ2Zvcm1hdFJlc3BvbnNlJyBpbiBwKSkgewoJCXAuZm9ybWF0UmVzcG9uc2UgPSB0cnVlOwoJfQoKCS8vIEdldCB0aGUgY3VycmVudCBzZXNzaW9uCgkvLyBBcHBlbmQgdGhlIGFjY2Vzc190b2tlbiB0byB0aGUgcXVlcnkKCXAuYXV0aFJlc3BvbnNlID0gX3RoaXMuZ2V0QXV0aFJlc3BvbnNlKHAubmV0d29yayk7CglpZiAocC5hdXRoUmVzcG9uc2UgJiYgcC5hdXRoUmVzcG9uc2UuYWNjZXNzX3Rva2VuKSB7CgkJcC5xdWVyeS5hY2Nlc3NfdG9rZW4gPSBwLmF1dGhSZXNwb25zZS5hY2Nlc3NfdG9rZW47Cgl9CgoJdmFyIHVybCA9IHAucGF0aDsKCXZhciBtOwoKCS8vIFN0b3JlIHRoZSBxdWVyeSBhcyBvcHRpb25zCgkvLyBUaGlzIGlzIHVzZWQgdG8gcG9wdWxhdGUgdGhlIHJlcXVlc3Qgb2JqZWN0IGJlZm9yZSB0aGUgZGF0YSBpcyBhdWdtZW50ZWQgYnkgdGhlIHByZXdyYXAgaGFuZGxlcnMuCglwLm9wdGlvbnMgPSB1dGlscy5jbG9uZShwLnF1ZXJ5KTsKCgkvLyBDbG9uZSB0aGUgZGF0YSBvYmplY3QKCS8vIFByZXZlbnQgdGhpcyBzY3JpcHQgb3ZlcndyaXRpbmcgdGhlIGRhdGEgb2YgdGhlIGluY29taW5nIG9iamVjdC4KCS8vIEVuc3VyZSB0aGF0IGV2ZXJ5dGltZSB3ZSBydW4gYW4gaXRlcmF0aW9uIHRoZSBjYWxsYmFja3MgaGF2ZW4ndCByZW1vdmVkIHNvbWUgZGF0YQoJcC5kYXRhID0gdXRpbHMuY2xvbmUoZGF0YSk7CgoJLy8gVVJMIE1hcHBpbmcKCS8vIElzIHRoZXJlIGEgbWFwIGZvciB0aGUgZ2l2ZW4gVVJMPwoJdmFyIGFjdGlvbnMgPSBvW3snZGVsZXRlJzogJ2RlbCd9W3AubWV0aG9kXSB8fCBwLm1ldGhvZF0gfHwge307CgoJLy8gRXh0cmFwb2xhdGUgdGhlIFF1ZXJ5U3RyaW5nCgkvLyBQcm92aWRlIGEgY2xlYW4gcGF0aAoJLy8gTW92ZSB0aGUgcXVlcnlzdHJpbmcgaW50byB0aGUgZGF0YQoJaWYgKHAubWV0aG9kID09PSAnZ2V0JykgewoKCQl2YXIgcXVlcnkgPSB1cmwuc3BsaXQoL1tcPyNdLylbMV07CgkJaWYgKHF1ZXJ5KSB7CgkJCXV0aWxzLmV4dGVuZChwLnF1ZXJ5LCB1dGlscy5wYXJhbShxdWVyeSkpOwoKCQkJLy8gUmVtb3ZlIHRoZSBxdWVyeSBwYXJ0IGZyb20gdGhlIFVSTAoJCQl1cmwgPSB1cmwucmVwbGFjZSgvXD8uKj8oI3wkKS8sICckMScpOwoJCX0KCX0KCgkvLyBJcyB0aGUgaGFzaCBmcmFnbWVudCBkZWZpbmVkCglpZiAoKG0gPSB1cmwubWF0Y2goLyMoLispLywgJycpKSkgewoJCXVybCA9IHVybC5zcGxpdCgnIycpWzBdOwoJCXAucGF0aCA9IG1bMV07Cgl9CgllbHNlIGlmICh1cmwgaW4gYWN0aW9ucykgewoJCXAucGF0aCA9IHVybDsKCQl1cmwgPSBhY3Rpb25zW3VybF07Cgl9CgllbHNlIGlmICgnZGVmYXVsdCcgaW4gYWN0aW9ucykgewoJCXVybCA9IGFjdGlvbnNbJ2RlZmF1bHQnXTsKCX0KCgkvLyBSZWRpcmVjdCBIYW5kbGVyCgkvLyBUaGlzIGRlZmluZXMgZm9yIHRoZSBGb3JtK0lmcmFtZStIYXNoIGhhY2sgd2hlcmUgdG8gcmV0dXJuIHRoZSByZXN1bHRzIHRvby4KCXAucmVkaXJlY3RfdXJpID0gX3RoaXMuc2V0dGluZ3MucmVkaXJlY3RfdXJpOwoKCS8vIERlZmluZSBGb3JtYXRIYW5kbGVyCgkvLyBUaGUgcmVxdWVzdCBjYW4gYmUgcHJvY2VzZWQgaW4gYSBtdWx0aXR1ZGUgb2Ygd2F5cwoJLy8gSGVyZSdzIHRoZSBvcHRpb25zIC0gZGVwZW5kaW5nIG9uIHRoZSBicm93c2VyIGFuZCBlbmRwb2ludAoJcC54aHIgPSBvLnhocjsKCXAuanNvbnAgPSBvLmpzb25wOwoJcC5mb3JtID0gby5mb3JtOwoKCS8vIE1ha2UgcmVxdWVzdAoJaWYgKHR5cGVvZiAodXJsKSA9PT0gJ2Z1bmN0aW9uJykgewoJCS8vIERvZXMgc2VsZiBoYXZlIGl0cyBvd24gY2FsbGJhY2s/CgkJdXJsKHAsIGdldFBhdGgpOwoJfQoJZWxzZSB7CgkJLy8gRWxzZSB0aGUgVVJMIGlzIGEgc3RyaW5nCgkJZ2V0UGF0aCh1cmwpOwoJfQoKCXJldHVybiBwcm9taXNlLnByb3h5OwoKCS8vIElmIHVybCBuZWVkcyBhIGJhc2UKCS8vIFdyYXAgZXZlcnl0aGluZyBpbgoJZnVuY3Rpb24gZ2V0UGF0aCh1cmwpIHsKCgkJLy8gRm9ybWF0IHRoZSBzdHJpbmcgaWYgaXQgbmVlZHMgaXQKCQl1cmwgPSB1cmwucmVwbGFjZSgvXEBceyhbYS16XF9cLV0rKShcfC4qPyk/XH0vZ2ksIGZ1bmN0aW9uKG0sIGtleSwgZGVmYXVsdHMpIHsKCQkJdmFyIHZhbCA9IGRlZmF1bHRzID8gZGVmYXVsdHMucmVwbGFjZSgvXlx8LywgJycpIDogJyc7CgkJCWlmIChrZXkgaW4gcC5xdWVyeSkgewoJCQkJdmFsID0gcC5xdWVyeVtrZXldOwoJCQkJZGVsZXRlIHAucXVlcnlba2V5XTsKCQkJfQoJCQllbHNlIGlmIChwLmRhdGEgJiYga2V5IGluIHAuZGF0YSkgewoJCQkJdmFsID0gcC5kYXRhW2tleV07CgkJCQlkZWxldGUgcC5kYXRhW2tleV07CgkJCX0KCQkJZWxzZSBpZiAoIWRlZmF1bHRzKSB7CgkJCQlwcm9taXNlLnJlamVjdChlcnJvcignbWlzc2luZ19hdHRyaWJ1dGUnLCAnVGhlIGF0dHJpYnV0ZSAnICsga2V5ICsgJyBpcyBtaXNzaW5nIGZyb20gdGhlIHJlcXVlc3QnKSk7CgkJCX0KCgkJCXJldHVybiB2YWw7CgkJfSk7CgoJCS8vIEFkZCBiYXNlCgkJaWYgKCF1cmwubWF0Y2goL15odHRwcz86XC9cLy8pKSB7CgkJCXVybCA9IG8uYmFzZSArIHVybDsKCQl9CgoJCS8vIERlZmluZSB0aGUgcmVxdWVzdCBVUkwKCQlwLnVybCA9IHVybDsKCgkJLy8gTWFrZSB0aGUgSFRUUCByZXF1ZXN0IHdpdGggdGhlIGN1cmF0ZWQgcmVxdWVzdCBvYmplY3QKCQkvLyBDQUxMQkFDSyBIQU5ETEVSCgkJLy8gQCByZXNwb25zZSBvYmplY3QKCQkvLyBAIHN0YXR1c0NvZGUgaW50ZWdlciBpZiBhdmFpbGFibGUKCQl1dGlscy5yZXF1ZXN0KHAsIGZ1bmN0aW9uKHIsIGhlYWRlcnMpIHsKCgkJCS8vIElzIHRoaXMgYSByYXcgcmVzcG9uc2U/CgkJCWlmICghcC5mb3JtYXRSZXNwb25zZSkgewoJCQkJLy8gQmFkIHJlcXVlc3Q/IGVycm9yIHN0YXR1c0NvZGUgb3Igb3RoZXJ3aXNlIGNvbnRhaW5zIGFuIGVycm9yIHJlc3BvbnNlIHZpcyBKU09OUD8KCQkJCWlmICh0eXBlb2YgaGVhZGVycyA9PT0gJ29iamVjdCcgPyAoaGVhZGVycy5zdGF0dXNDb2RlID49IDQwMCkgOiAodHlwZW9mIHIgPT09ICdvYmplY3QnICYmICdlcnJvcicgaW4gcikpIHsKCQkJCQlwcm9taXNlLnJlamVjdChyKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCXByb21pc2UuZnVsZmlsbChyKTsKCQkJCX0KCgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIFNob3VsZCB0aGlzIGJlIGFuIG9iamVjdAoJCQlpZiAociA9PT0gdHJ1ZSkgewoJCQkJciA9IHtzdWNjZXNzOnRydWV9OwoJCQl9CgkJCWVsc2UgaWYgKCFyKSB7CgkJCQlyID0ge307CgkJCX0KCgkJCS8vIFRoZSBkZWxldGUgY2FsbGJhY2sgbmVlZHMgYSBiZXR0ZXIgcmVzcG9uc2UKCQkJaWYgKHAubWV0aG9kID09PSAnZGVsZXRlJykgewoJCQkJciA9ICghciB8fCB1dGlscy5pc0VtcHR5KHIpKSA/IHtzdWNjZXNzOnRydWV9IDogcjsKCQkJfQoKCQkJLy8gRk9STUFUIFJFU1BPTlNFPwoJCQkvLyBEb2VzIHNlbGYgcmVxdWVzdCBoYXZlIGEgY29ycmVzcG9uZGluZyBmb3JtYXR0ZXIKCQkJaWYgKG8ud3JhcCAmJiAoKHAucGF0aCBpbiBvLndyYXApIHx8ICgnZGVmYXVsdCcgaW4gby53cmFwKSkpIHsKCQkJCXZhciB3cmFwID0gKHAucGF0aCBpbiBvLndyYXAgPyBwLnBhdGggOiAnZGVmYXVsdCcpOwoJCQkJdmFyIHRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpOwoKCQkJCS8vIEZPUk1BVCBSRVNQT05TRQoJCQkJdmFyIGIgPSBvLndyYXBbd3JhcF0ociwgaGVhZGVycywgcCk7CgoJCQkJLy8gSGFzIHRoZSByZXNwb25zZSBiZWVuIHV0dGVybHkgb3ZlcndyaXR0ZW4/CgkJCQkvLyBUeXBpY2FsbHkgc2VsZiBhdWdtZW50cyB0aGUgZXhpc3Rpbmcgb2JqZWN0Li4gYnV0IGZvciB0aG9zZSByYXJlIG9jY2Fzc2lvbnMKCQkJCWlmIChiKSB7CgkJCQkJciA9IGI7CgkJCQl9CgkJCX0KCgkJCS8vIElzIHRoZXJlIGEgbmV4dF9wYWdlIGRlZmluZWQgaW4gdGhlIHJlc3BvbnNlPwoJCQlpZiAociAmJiAncGFnaW5nJyBpbiByICYmIHIucGFnaW5nLm5leHQpIHsKCgkJCQkvLyBBZGQgdGhlIHJlbGF0aXZlIHBhdGggaWYgaXQgaXMgbWlzc2luZyBmcm9tIHRoZSBwYWdpbmcvbmV4dCBwYXRoCgkJCQlpZiAoci5wYWdpbmcubmV4dFswXSA9PT0gJz8nKSB7CgkJCQkJci5wYWdpbmcubmV4dCA9IHAucGF0aCArIHIucGFnaW5nLm5leHQ7CgkJCQl9CgoJCQkJLy8gVGhlIHJlbGF0aXZlIHBhdGggaGFzIGJlZW4gZGVmaW5lZCwgbGV0cyBtYXJrdXAgdGhlIGhhbmRsZXIgaW4gdGhlIEhhc2hGcmFnbWVudAoJCQkJZWxzZSB7CgkJCQkJci5wYWdpbmcubmV4dCArPSAnIycgKyBwLnBhdGg7CgkJCQl9CgkJCX0KCgkJCS8vIERpc3BhdGNoIHRvIGxpc3RlbmVycwoJCQkvLyBFbWl0IGV2ZW50cyB3aGljaCBwZXJ0YWluIHRvIHRoZSBmb3JtYXR0ZWQgcmVzcG9uc2UKCQkJaWYgKCFyIHx8ICdlcnJvcicgaW4gcikgewoJCQkJcHJvbWlzZS5yZWplY3Qocik7CgkJCX0KCQkJZWxzZSB7CgkJCQlwcm9taXNlLmZ1bGZpbGwocik7CgkJCX0KCQl9KTsKCX0KfTsKCi8vIEFQSSB1dGlsaXRpZXMKaGVsbG8udXRpbHMuZXh0ZW5kKGhlbGxvLnV0aWxzLCB7CgoJLy8gTWFrZSBhbiBIVFRQIHJlcXVlc3QKCXJlcXVlc3Q6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7CgoJCXZhciBfdGhpcyA9IHRoaXM7CgkJdmFyIGVycm9yID0gX3RoaXMuZXJyb3I7CgoJCS8vIFRoaXMgaGFzIHRvIGdvIHRocm91Z2ggYSBQT1NUIHJlcXVlc3QKCQlpZiAoIV90aGlzLmlzRW1wdHkocC5kYXRhKSAmJiAhKCdGaWxlTGlzdCcgaW4gd2luZG93KSAmJiBfdGhpcy5oYXNCaW5hcnkocC5kYXRhKSkgewoKCQkJLy8gRGlzYWJsZSBYSFIgYW5kIEpTT05QCgkJCXAueGhyID0gZmFsc2U7CgkJCXAuanNvbnAgPSBmYWxzZTsKCQl9CgoJCS8vIENoZWNrIGlmIHRoZSBicm93c2VyIGFuZCBzZXJ2aWNlIHN1cHBvcnQgQ09SUwoJCXZhciBjb3JzID0gdGhpcy5yZXF1ZXN0X2NvcnMoZnVuY3Rpb24oKSB7CgkJCS8vIElmIGl0IGRvZXMgdGhlbiBydW4gdGhpcy4uLgoJCQlyZXR1cm4gKChwLnhociA9PT0gdW5kZWZpbmVkKSB8fCAocC54aHIgJiYgKHR5cGVvZiAocC54aHIpICE9PSAnZnVuY3Rpb24nIHx8IHAueGhyKHAsIHAucXVlcnkpKSkpOwoJCX0pOwoKCQlpZiAoY29ycykgewoKCQkJZm9ybWF0VXJsKHAsIGZ1bmN0aW9uKHVybCkgewoKCQkJCXZhciB4ID0gX3RoaXMueGhyKHAubWV0aG9kLCB1cmwsIHAuaGVhZGVycywgcC5kYXRhLCBjYWxsYmFjayk7CgkJCQl4Lm9ucHJvZ3Jlc3MgPSBwLm9ucHJvZ3Jlc3MgfHwgbnVsbDsKCgkJCQkvLyBXaW5kb3dzIFBob25lIGRvZXMgbm90IHN1cHBvcnQgeGhyLnVwbG9hZCwgc2VlICM3NAoJCQkJLy8gRmVhdHVyZSBkZXRlY3QKCQkJCWlmICh4LnVwbG9hZCAmJiBwLm9udXBsb2FkcHJvZ3Jlc3MpIHsKCQkJCQl4LnVwbG9hZC5vbnByb2dyZXNzID0gcC5vbnVwbG9hZHByb2dyZXNzOwoJCQkJfQoKCQkJfSk7CgoJCQlyZXR1cm47CgkJfQoKCQkvLyBDbG9uZSB0aGUgcXVlcnkgb2JqZWN0CgkJLy8gRWFjaCByZXF1ZXN0IG1vZGlmaWVzIHRoZSBxdWVyeSBvYmplY3QgYW5kIG5lZWRzIHRvIGJlIHRhcmVkIGFmdGVyIGVhY2ggb25lLgoJCXZhciBfcXVlcnkgPSBwLnF1ZXJ5OwoKCQlwLnF1ZXJ5ID0gX3RoaXMuY2xvbmUocC5xdWVyeSk7CgoJCS8vIEFzc2lnbiBhIG5ldyBjYWxsYmFja0lECgkJcC5jYWxsYmFja0lEID0gX3RoaXMuZ2xvYmFsRXZlbnQoKTsKCgkJLy8gSlNPTlAKCQlpZiAocC5qc29ucCAhPT0gZmFsc2UpIHsKCgkJCS8vIENsb25lIHRoZSBxdWVyeSBvYmplY3QKCQkJcC5xdWVyeS5jYWxsYmFjayA9IHAuY2FsbGJhY2tJRDsKCgkJCS8vIElmIHRoZSBKU09OUCBpcyBhIGZ1bmN0aW9uIHRoZW4gcnVuIGl0CgkJCWlmICh0eXBlb2YgKHAuanNvbnApID09PSAnZnVuY3Rpb24nKSB7CgkJCQlwLmpzb25wKHAsIHAucXVlcnkpOwoJCQl9CgoJCQkvLyBMZXRzIHVzZSBKU09OUCBpZiB0aGUgbWV0aG9kIGlzICdnZXQnCgkJCWlmIChwLm1ldGhvZCA9PT0gJ2dldCcpIHsKCgkJCQlmb3JtYXRVcmwocCwgZnVuY3Rpb24odXJsKSB7CgkJCQkJX3RoaXMuanNvbnAodXJsLCBjYWxsYmFjaywgcC5jYWxsYmFja0lELCBwLnRpbWVvdXQpOwoJCQkJfSk7CgoJCQkJcmV0dXJuOwoJCQl9CgkJCWVsc2UgewoJCQkJLy8gSXQncyBub3QgY29tcGF0aWJsZSByZXNldCBxdWVyeQoJCQkJcC5xdWVyeSA9IF9xdWVyeTsKCQkJfQoKCQl9CgoJCS8vIE90aGVyd2lzZSB3ZSdyZSBvbiB0byB0aGUgb2xkIHNjaG9vbCwgaWZyYW1lIGhhY2tzIGFuZCBKU09OUAoJCWlmIChwLmZvcm0gIT09IGZhbHNlKSB7CgoJCQkvLyBBZGQgc29tZSBhZGRpdGlvbmFsIHF1ZXJ5IHBhcmFtZXRlcnMgdG8gdGhlIFVSTAoJCQkvLyBXZSdyZSBwcmV0dHkgc3R1ZmZlZCBpZiB0aGUgZW5kcG9pbnQgZG9lc24ndCBsaWtlIHRoZXNlCgkJCXAucXVlcnkucmVkaXJlY3RfdXJpID0gcC5yZWRpcmVjdF91cmk7CgkJCXAucXVlcnkuc3RhdGUgPSBKU09OLnN0cmluZ2lmeSh7Y2FsbGJhY2s6cC5jYWxsYmFja0lEfSk7CgoJCQl2YXIgb3B0czsKCgkJCWlmICh0eXBlb2YgKHAuZm9ybSkgPT09ICdmdW5jdGlvbicpIHsKCgkJCQkvLyBGb3JtYXQgdGhlIHJlcXVlc3QKCQkJCW9wdHMgPSBwLmZvcm0ocCwgcC5xdWVyeSk7CgkJCX0KCgkJCWlmIChwLm1ldGhvZCA9PT0gJ3Bvc3QnICYmIG9wdHMgIT09IGZhbHNlKSB7CgoJCQkJZm9ybWF0VXJsKHAsIGZ1bmN0aW9uKHVybCkgewoJCQkJCV90aGlzLnBvc3QodXJsLCBwLmRhdGEsIG9wdHMsIGNhbGxiYWNrLCBwLmNhbGxiYWNrSUQsIHAudGltZW91dCk7CgkJCQl9KTsKCgkJCQlyZXR1cm47CgkJCX0KCQl9CgoJCS8vIE5vbmUgb2YgdGhlIG1ldGhvZHMgd2VyZSBzdWNjZXNzZnVsIHRocm93IGFuIGVycm9yCgkJY2FsbGJhY2soZXJyb3IoJ2ludmFsaWRfcmVxdWVzdCcsICdUaGVyZSB3YXMgbm8gbWVjaGFuaXNtIGZvciBoYW5kbGluZyB0aGlzIHJlcXVlc3QnKSk7CgoJCXJldHVybjsKCgkJLy8gRm9ybWF0IFVSTAoJCS8vIENvbnN0cnVjdHMgdGhlIHJlcXVlc3QgVVJMLCBvcHRpb25hbGx5IHdyYXBzIHRoZSBVUkwgdGhyb3VnaCBhIGNhbGwgdG8gYSBwcm94eSBzZXJ2ZXIKCQkvLyBSZXR1cm5zIHRoZSBmb3JtYXR0ZWQgVVJMCgkJZnVuY3Rpb24gZm9ybWF0VXJsKHAsIGNhbGxiYWNrKSB7CgoJCQkvLyBBcmUgd2Ugc2lnbmluZyB0aGUgcmVxdWVzdD8KCQkJdmFyIHNpZ247CgoJCQkvLyBPQXV0aDEKCQkJLy8gUmVtb3ZlIHRoZSB0b2tlbiBmcm9tIHRoZSBxdWVyeSBiZWZvcmUgc2lnbmluZwoJCQlpZiAocC5hdXRoUmVzcG9uc2UgJiYgcC5hdXRoUmVzcG9uc2Uub2F1dGggJiYgcGFyc2VJbnQocC5hdXRoUmVzcG9uc2Uub2F1dGgudmVyc2lvbiwgMTApID09PSAxKSB7CgoJCQkJLy8gT0FVVEggU0lHTklORyBQUk9YWQoJCQkJc2lnbiA9IHAucXVlcnkuYWNjZXNzX3Rva2VuOwoKCQkJCS8vIFJlbW92ZSB0aGUgYWNjZXNzX3Rva2VuCgkJCQlkZWxldGUgcC5xdWVyeS5hY2Nlc3NfdG9rZW47CgoJCQkJLy8gRW5mb3JlIHVzZSBvZiBQcm94eQoJCQkJcC5wcm94eSA9IHRydWU7CgkJCX0KCgkJCS8vIFBPU1QgYm9keSB0byBxdWVyeXN0cmluZwoJCQlpZiAocC5kYXRhICYmIChwLm1ldGhvZCA9PT0gJ2dldCcgfHwgcC5tZXRob2QgPT09ICdkZWxldGUnKSkgewoJCQkJLy8gQXR0YWNoIHRoZSBwLmRhdGEgdG8gdGhlIHF1ZXJ5c3RyaW5nLgoJCQkJX3RoaXMuZXh0ZW5kKHAucXVlcnksIHAuZGF0YSk7CgkJCQlwLmRhdGEgPSBudWxsOwoJCQl9CgoJCQkvLyBDb25zdHJ1Y3QgdGhlIHBhdGgKCQkJdmFyIHBhdGggPSBfdGhpcy5xcyhwLnVybCwgcC5xdWVyeSk7CgoJCQkvLyBQcm94eSB0aGUgcmVxdWVzdCB0aHJvdWdoIGEgc2VydmVyCgkJCS8vIFVzZWQgZm9yIHNpZ25pbmcgT0F1dGgxCgkJCS8vIEFuZCBjaXJjdW12ZW50aW5nIHNlcnZpY2VzIHdpdGhvdXQgQWNjZXNzLUNvbnRyb2wgSGVhZGVycwoJCQlpZiAocC5wcm94eSkgewoJCQkJLy8gVXNlIHRoZSBwcm94eSBhcyBhIHBhdGgKCQkJCXBhdGggPSBfdGhpcy5xcyhwLm9hdXRoX3Byb3h5LCB7CgkJCQkJcGF0aDogcGF0aCwKCQkJCQlhY2Nlc3NfdG9rZW46IHNpZ24gfHwgJycsCgoJCQkJCS8vIFRoaXMgd2lsbCBwcm9tcHQgdGhlIHJlcXVlc3QgdG8gYmUgc2lnbmVkIGFzIHRob3VnaCBpdCBpcyBPQXV0aDEKCQkJCQl0aGVuOiBwLnByb3h5X3Jlc3BvbnNlX3R5cGUgfHwgKHAubWV0aG9kLnRvTG93ZXJDYXNlKCkgPT09ICdnZXQnID8gJ3JlZGlyZWN0JyA6ICdwcm94eScpLAoJCQkJCW1ldGhvZDogcC5tZXRob2QudG9Mb3dlckNhc2UoKSwKCQkJCQlzdXBwcmVzc19yZXNwb25zZV9jb2RlczogdHJ1ZQoJCQkJfSk7CgkJCX0KCgkJCWNhbGxiYWNrKHBhdGgpOwoJCX0KCX0sCgoJLy8gVGVzdCB3aGV0aGVyIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBDT1JTIHJlc3BvbnNlCglyZXF1ZXN0X2NvcnM6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CgkJcmV0dXJuICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBYTUxIdHRwUmVxdWVzdCgpICYmIGNhbGxiYWNrKCk7Cgl9LAoKCS8vIFJldHVybiB0aGUgdHlwZSBvZiBET00gb2JqZWN0Cglkb21JbnN0YW5jZTogZnVuY3Rpb24odHlwZSwgZGF0YSkgewoJCXZhciB0ZXN0ID0gJ0hUTUwnICsgKHR5cGUgfHwgJycpLnJlcGxhY2UoCgkJCS9eW2Etel0vLAoJCQlmdW5jdGlvbihtKSB7CgkJCQlyZXR1cm4gbS50b1VwcGVyQ2FzZSgpOwoJCQl9CgoJCSkgKyAnRWxlbWVudCc7CgoJCWlmICghZGF0YSkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlpZiAod2luZG93W3Rlc3RdKSB7CgkJCXJldHVybiBkYXRhIGluc3RhbmNlb2Ygd2luZG93W3Rlc3RdOwoJCX0KCQllbHNlIGlmICh3aW5kb3cuRWxlbWVudCkgewoJCQlyZXR1cm4gZGF0YSBpbnN0YW5jZW9mIHdpbmRvdy5FbGVtZW50ICYmICghdHlwZSB8fCAoZGF0YS50YWdOYW1lICYmIGRhdGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSB0eXBlKSk7CgkJfQoJCWVsc2UgewoJCQlyZXR1cm4gKCEoZGF0YSBpbnN0YW5jZW9mIE9iamVjdCB8fCBkYXRhIGluc3RhbmNlb2YgQXJyYXkgfHwgZGF0YSBpbnN0YW5jZW9mIFN0cmluZyB8fCBkYXRhIGluc3RhbmNlb2YgTnVtYmVyKSAmJiBkYXRhLnRhZ05hbWUgJiYgZGF0YS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHR5cGUpOwoJCX0KCX0sCgoJLy8gQ3JlYXRlIGEgY2xvbmUgb2YgYW4gb2JqZWN0CgljbG9uZTogZnVuY3Rpb24ob2JqKSB7CgkJLy8gRG9lcyBub3QgY2xvbmUgRE9NIGVsZW1lbnRzLCBub3IgQmluYXJ5IGRhdGEsIGUuZy4gQmxvYnMsIEZpbGVsaXN0cwoJCWlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIChvYmopICE9PSAnb2JqZWN0JyB8fCBvYmogaW5zdGFuY2VvZiBEYXRlIHx8ICdub2RlTmFtZScgaW4gb2JqIHx8IHRoaXMuaXNCaW5hcnkob2JqKSB8fCAodHlwZW9mIEZvcm1EYXRhID09PSAnZnVuY3Rpb24nICYmIG9iaiBpbnN0YW5jZW9mIEZvcm1EYXRhKSkgewoJCQlyZXR1cm4gb2JqOwoJCX0KCgkJaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgewoJCQkvLyBDbG9uZSBlYWNoIGl0ZW0gaW4gdGhlIGFycmF5CgkJCXJldHVybiBvYmoubWFwKHRoaXMuY2xvbmUuYmluZCh0aGlzKSk7CgkJfQoKCQkvLyBCdXQgZG9lcyBjbG9uZSBldmVyeXRoaW5nIGVsc2UuCgkJdmFyIGNsb25lID0ge307CgkJZm9yICh2YXIgeCBpbiBvYmopIHsKCQkJY2xvbmVbeF0gPSB0aGlzLmNsb25lKG9ialt4XSk7CgkJfQoKCQlyZXR1cm4gY2xvbmU7Cgl9LAoKCS8vIFhIUjogdXNlcyBDT1JTIHRvIG1ha2UgcmVxdWVzdHMKCXhocjogZnVuY3Rpb24obWV0aG9kLCB1cmwsIGhlYWRlcnMsIGRhdGEsIGNhbGxiYWNrKSB7CgoJCXZhciByID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CgkJdmFyIGVycm9yID0gdGhpcy5lcnJvcjsKCgkJLy8gQmluYXJ5PwoJCXZhciBiaW5hcnkgPSBmYWxzZTsKCQlpZiAobWV0aG9kID09PSAnYmxvYicpIHsKCQkJYmluYXJ5ID0gbWV0aG9kOwoJCQltZXRob2QgPSAnR0VUJzsKCQl9CgoJCW1ldGhvZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpOwoKCQkvLyBYaHIucmVzcG9uc2VUeXBlICdqc29uJyBpcyBub3Qgc3VwcG9ydGVkIGluIGFueSBvZiB0aGUgdmVuZG9ycyB5ZXQuCgkJci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CgkJCXZhciBqc29uID0gci5yZXNwb25zZTsKCQkJdHJ5IHsKCQkJCWpzb24gPSBKU09OLnBhcnNlKHIucmVzcG9uc2VUZXh0KTsKCQkJfQoJCQljYXRjaCAoX2UpIHsKCQkJCWlmIChyLnN0YXR1cyA9PT0gNDAxKSB7CgkJCQkJanNvbiA9IGVycm9yKCdhY2Nlc3NfZGVuaWVkJywgci5zdGF0dXNUZXh0KTsKCQkJCX0KCQkJfQoKCQkJdmFyIGhlYWRlcnMgPSBoZWFkZXJzVG9KU09OKHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpOwoJCQloZWFkZXJzLnN0YXR1c0NvZGUgPSByLnN0YXR1czsKCgkJCWNhbGxiYWNrKGpzb24gfHwgKG1ldGhvZCA9PT0gJ0dFVCcgPyBlcnJvcignZW1wdHlfcmVzcG9uc2UnLCAnQ291bGQgbm90IGdldCByZXNvdXJjZScpIDoge30pLCBoZWFkZXJzKTsKCQl9OwoKCQlyLm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7CgkJCXZhciBqc29uID0gci5yZXNwb25zZVRleHQ7CgkJCXRyeSB7CgkJCQlqc29uID0gSlNPTi5wYXJzZShyLnJlc3BvbnNlVGV4dCk7CgkJCX0KCQkJY2F0Y2ggKF9lKSB7fQoKCQkJY2FsbGJhY2soanNvbiB8fCBlcnJvcignYWNjZXNzX2RlbmllZCcsICdDb3VsZCBub3QgZ2V0IHJlc291cmNlJykpOwoJCX07CgoJCXZhciB4OwoKCQkvLyBTaG91bGQgd2UgYWRkIHRoZSBxdWVyeSB0byB0aGUgVVJMPwoJCWlmIChtZXRob2QgPT09ICdHRVQnIHx8IG1ldGhvZCA9PT0gJ0RFTEVURScpIHsKCQkJZGF0YSA9IG51bGw7CgkJfQoJCWVsc2UgaWYgKGRhdGEgJiYgdHlwZW9mIChkYXRhKSAhPT0gJ3N0cmluZycgJiYgIShkYXRhIGluc3RhbmNlb2YgRm9ybURhdGEpICYmICEoZGF0YSBpbnN0YW5jZW9mIEZpbGUpICYmICEoZGF0YSBpbnN0YW5jZW9mIEJsb2IpKSB7CgkJCS8vIExvb3AgdGhyb3VnaCBhbmQgYWRkIGZvcm1EYXRhCgkJCXZhciBmID0gbmV3IEZvcm1EYXRhKCk7CgkJCWZvciAoeCBpbiBkYXRhKSBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSh4KSkgewoJCQkJaWYgKGRhdGFbeF0gaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7CgkJCQkJaWYgKCdmaWxlcycgaW4gZGF0YVt4XSAmJiBkYXRhW3hdLmZpbGVzLmxlbmd0aCA+IDApIHsKCQkJCQkJZi5hcHBlbmQoeCwgZGF0YVt4XS5maWxlc1swXSk7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZSBpZiAoZGF0YVt4XSBpbnN0YW5jZW9mIEJsb2IpIHsKCQkJCQlmLmFwcGVuZCh4LCBkYXRhW3hdLCBkYXRhLm5hbWUpOwoJCQkJfQoJCQkJZWxzZSB7CgkJCQkJZi5hcHBlbmQoeCwgZGF0YVt4XSk7CgkJCQl9CgkJCX0KCgkJCWRhdGEgPSBmOwoJCX0KCgkJLy8gT3BlbiB0aGUgcGF0aCwgYXN5bmMKCQlyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpOwoKCQlpZiAoYmluYXJ5KSB7CgkJCWlmICgncmVzcG9uc2VUeXBlJyBpbiByKSB7CgkJCQlyLnJlc3BvbnNlVHlwZSA9IGJpbmFyeTsKCQkJfQoJCQllbHNlIHsKCQkJCXIub3ZlcnJpZGVNaW1lVHlwZSgndGV4dC9wbGFpbjsgY2hhcnNldD14LXVzZXItZGVmaW5lZCcpOwoJCQl9CgkJfQoKCQkvLyBTZXQgYW55IGJlc3Bva2UgaGVhZGVycwoJCWlmIChoZWFkZXJzKSB7CgkJCWZvciAoeCBpbiBoZWFkZXJzKSB7CgkJCQlyLnNldFJlcXVlc3RIZWFkZXIoeCwgaGVhZGVyc1t4XSk7CgkJCX0KCQl9CgoJCXIuc2VuZChkYXRhKTsKCgkJcmV0dXJuIHI7CgoJCS8vIEhlYWRlcnMgYXJlIHJldHVybmVkIGFzIGEgc3RyaW5nCgkJZnVuY3Rpb24gaGVhZGVyc1RvSlNPTihzKSB7CgkJCXZhciByID0ge307CgkJCXZhciByZWcgPSAvKFthLXpcLV0rKTpccz8oLiopOz8vZ2k7CgkJCXZhciBtOwoJCQl3aGlsZSAoKG0gPSByZWcuZXhlYyhzKSkpIHsKCQkJCXJbbVsxXV0gPSBtWzJdOwoJCQl9CgoJCQlyZXR1cm4gcjsKCQl9Cgl9LAoKCS8vIEpTT05QCgkvLyBJbmplY3RzIGEgc2NyaXB0IHRhZyBpbnRvIHRoZSBET00gdG8gYmUgZXhlY3V0ZWQgYW5kIGFwcGVuZHMgYSBjYWxsYmFjayBmdW5jdGlvbiB0byB0aGUgd2luZG93IG9iamVjdAoJLy8gQHBhcmFtIHN0cmluZy9mdW5jdGlvbiBwYXRoRnVuYyBlaXRoZXIgYSBzdHJpbmcgb2YgdGhlIFVSTCBvciBhIGNhbGxiYWNrIGZ1bmN0aW9uIHBhdGhGdW5jKHF1ZXJ5c3RyaW5naGFzaCwgY29udGludWVGdW5jKTsKCS8vIEBwYXJhbSBmdW5jdGlvbiBjYWxsYmFjayBhIGZ1bmN0aW9uIHRvIGNhbGwgb24gY29tcGxldGlvbjsKCWpzb25wOiBmdW5jdGlvbih1cmwsIGNhbGxiYWNrLCBjYWxsYmFja0lELCB0aW1lb3V0KSB7CgoJCXZhciBfdGhpcyA9IHRoaXM7CgkJdmFyIGVycm9yID0gX3RoaXMuZXJyb3I7CgoJCS8vIENoYW5nZSB0aGUgbmFtZSBvZiB0aGUgY2FsbGJhY2sKCQl2YXIgYm9vbCA9IDA7CgkJdmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdOwoJCXZhciBvcGVyYUZpeDsKCQl2YXIgcmVzdWx0ID0gZXJyb3IoJ3NlcnZlcl9lcnJvcicsICdzZXJ2ZXJfZXJyb3InKTsKCQl2YXIgY2IgPSBmdW5jdGlvbigpIHsKCQkJaWYgKCEoYm9vbCsrKSkgewoJCQkJd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJY2FsbGJhY2socmVzdWx0KTsKCQkJCQloZWFkLnJlbW92ZUNoaWxkKHNjcmlwdCk7CgkJCQl9LCAwKTsKCQkJfQoKCQl9OwoKCQkvLyBBZGQgY2FsbGJhY2sgdG8gdGhlIHdpbmRvdyBvYmplY3QKCQljYWxsYmFja0lEID0gX3RoaXMuZ2xvYmFsRXZlbnQoZnVuY3Rpb24oanNvbikgewoJCQlyZXN1bHQgPSBqc29uOwoJCQlyZXR1cm4gdHJ1ZTsKCgkJCS8vIE1hcmsgY2FsbGJhY2sgYXMgZG9uZQoJCX0sIGNhbGxiYWNrSUQpOwoKCQkvLyBUaGUgVVJMIGlzIGEgZnVuY3Rpb24gZm9yIHNvbWUgY2FzZXMgYW5kIGFzIHN1Y2gKCQkvLyBEZXRlcm1pbmUgaXRzIHZhbHVlIHdpdGggYSBjYWxsYmFjayBjb250YWluaW5nIHRoZSBuZXcgcGFyYW1ldGVycyBvZiB0aGlzIGZ1bmN0aW9uLgoJCXVybCA9IHVybC5yZXBsYWNlKG5ldyBSZWdFeHAoJz1cXD8oJnwkKScpLCAnPScgKyBjYWxsYmFja0lEICsgJyQxJyk7CgoJCS8vIEJ1aWxkIHNjcmlwdCB0YWcKCQl2YXIgc2NyaXB0ID0gX3RoaXMuYXBwZW5kKCdzY3JpcHQnLCB7CgkJCWlkOiBjYWxsYmFja0lELAoJCQluYW1lOiBjYWxsYmFja0lELAoJCQlzcmM6IHVybCwKCQkJYXN5bmM6IHRydWUsCgkJCW9ubG9hZDogY2IsCgkJCW9uZXJyb3I6IGNiLAoJCQlvbnJlYWR5c3RhdGVjaGFuZ2U6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKC9sb2FkZWR8Y29tcGxldGUvaS50ZXN0KHRoaXMucmVhZHlTdGF0ZSkpIHsKCQkJCQljYigpOwoJCQkJfQoJCQl9CgkJfSk7CgoJCS8vIE9wZXJhIGZpeCBlcnJvcgoJCS8vIFByb2JsZW06IElmIGFuIGVycm9yIG9jY3VycyB3aXRoIHNjcmlwdCBsb2FkaW5nIE9wZXJhIGZhaWxzIHRvIHRyaWdnZXIgdGhlIHNjcmlwdC5vbmVycm9yIGhhbmRsZXIgd2Ugc3BlY2lmaWVkCgkJLy8KCQkvLyBGaXg6CgkJLy8gQnkgc2V0dGluZyB0aGUgcmVxdWVzdCB0byBzeW5jaHJvbm91cyB3ZSBjYW4gdHJpZ2dlciB0aGUgZXJyb3IgaGFuZGxlciB3aGVuIGFsbCBlbHNlIGZhaWxzLgoJCS8vIFRoaXMgYWN0aW9uIHdpbGwgYmUgaWdub3JlZCBpZiB3ZSd2ZSBhbHJlYWR5IGNhbGxlZCB0aGUgY2FsbGJhY2sgaGFuZGxlciAiY2IiIHdpdGggYSBzdWNjZXNzZnVsIG9ubG9hZCBldmVudAoJCWlmICh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ29wZXJhJykgPiAtMSkgewoJCQlvcGVyYUZpeCA9IF90aGlzLmFwcGVuZCgnc2NyaXB0JywgewoJCQkJdGV4dDogJ2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwnJyArIGNhbGxiYWNrSUQgKyAnXCcpLm9uZXJyb3IoKTsnCgkJCX0pOwoJCQlzY3JpcHQuYXN5bmMgPSBmYWxzZTsKCQl9CgoJCS8vIEFkZCB0aW1lb3V0CgkJaWYgKHRpbWVvdXQpIHsKCQkJd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQlyZXN1bHQgPSBlcnJvcigndGltZW91dCcsICd0aW1lb3V0Jyk7CgkJCQljYigpOwoJCQl9LCB0aW1lb3V0KTsKCQl9CgoJCS8vIFRPRE86IGFkZCBmaXggZm9yIElFLAoJCS8vIEhvd2V2ZXI6IHVuYWJsZSByZWNyZWF0ZSB0aGUgYnVnIG9mIGZpcmluZyBvZmYgdGhlIG9ucmVhZHlzdGF0ZWNoYW5nZSBiZWZvcmUgdGhlIHNjcmlwdCBjb250ZW50IGhhcyBiZWVuIGV4ZWN1dGVkIGFuZCB0aGUgdmFsdWUgb2YgInJlc3VsdCIgaGFzIGJlZW4gZGVmaW5lZC4KCQkvLyBJbmplY3Qgc2NyaXB0IHRhZyBpbnRvIHRoZSBoZWFkIGVsZW1lbnQKCQloZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7CgoJCS8vIEFwcGVuZCBPcGVyYSBGaXggdG8gcnVuIGFmdGVyIG91ciBzY3JpcHQKCQlpZiAob3BlcmFGaXgpIHsKCQkJaGVhZC5hcHBlbmRDaGlsZChvcGVyYUZpeCk7CgkJfQoJfSwKCgkvLyBQb3N0CgkvLyBTZW5kIGluZm9ybWF0aW9uIHRvIGEgcmVtb3RlIGxvY2F0aW9uIHVzaW5nIHRoZSBwb3N0IG1lY2hhbmlzbQoJLy8gQHBhcmFtIHN0cmluZyB1cmkgcGF0aAoJLy8gQHBhcmFtIG9iamVjdCBkYXRhLCBrZXkgdmFsdWUgZGF0YSB0byBzZW5kCgkvLyBAcGFyYW0gZnVuY3Rpb24gY2FsbGJhY2ssIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgaW4gcmVzcG9uc2UKCXBvc3Q6IGZ1bmN0aW9uKHVybCwgZGF0YSwgb3B0aW9ucywgY2FsbGJhY2ssIGNhbGxiYWNrSUQsIHRpbWVvdXQpIHsKCgkJdmFyIF90aGlzID0gdGhpczsKCQl2YXIgZXJyb3IgPSBfdGhpcy5lcnJvcjsKCQl2YXIgZG9jID0gZG9jdW1lbnQ7CgoJCS8vIFRoaXMgaGFjayBuZWVkcyBhIGZvcm0KCQl2YXIgZm9ybSA9IG51bGw7CgkJdmFyIHJlZW5hYmxlQWZ0ZXJTdWJtaXQgPSBbXTsKCQl2YXIgbmV3Zm9ybTsKCQl2YXIgaSA9IDA7CgkJdmFyIHggPSBudWxsOwoJCXZhciBib29sID0gMDsKCQl2YXIgY2IgPSBmdW5jdGlvbihyKSB7CgkJCWlmICghKGJvb2wrKykpIHsKCQkJCWNhbGxiYWNrKHIpOwoJCQl9CgkJfTsKCgkJLy8gV2hhdCBpcyB0aGUgbmFtZSBvZiB0aGUgY2FsbGJhY2sgdG8gY29udGFpbgoJCS8vIFdlJ2xsIGFsc28gdXNlIHRoaXMgdG8gbmFtZSB0aGUgaWZyYW1lCgkJX3RoaXMuZ2xvYmFsRXZlbnQoY2IsIGNhbGxiYWNrSUQpOwoKCQkvLyBCdWlsZCB0aGUgaWZyYW1lIHdpbmRvdwoJCXZhciB3aW47CgkJdHJ5IHsKCQkJLy8gSUU3IGhhY2ssIG9ubHkgbGV0cyB1cyBkZWZpbmUgdGhlIG5hbWUgaGVyZSwgbm90IGxhdGVyLgoJCQl3aW4gPSBkb2MuY3JlYXRlRWxlbWVudCgnPGlmcmFtZSBuYW1lPSInICsgY2FsbGJhY2tJRCArICciPicpOwoJCX0KCQljYXRjaCAoZSkgewoJCQl3aW4gPSBkb2MuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7CgkJfQoKCQl3aW4ubmFtZSA9IGNhbGxiYWNrSUQ7CgkJd2luLmlkID0gY2FsbGJhY2tJRDsKCQl3aW4uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKCgkJLy8gT3ZlcnJpZGUgY2FsbGJhY2sgbWVjaGFuaXNtLiBUcmlnZ2dlciBhIHJlc3BvbnNlIG9ubG9hZC9vbmVycm9yCgkJaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5jYWxsYmFja29ubG9hZCkgewoJCQkvLyBPbmxvYWQgaXMgYmVpbmcgZmlyZWQgdHdpY2UKCQkJd2luLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewoJCQkJY2IoewoJCQkJCXJlc3BvbnNlOiAncG9zdGVkJywKCQkJCQltZXNzYWdlOiAnQ29udGVudCB3YXMgcG9zdGVkJwoJCQkJfSk7CgkJCX07CgkJfQoKCQlpZiAodGltZW91dCkgewoJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJY2IoZXJyb3IoJ3RpbWVvdXQnLCAnVGhlIHBvc3Qgb3BlcmF0aW9uIHRpbWVkIG91dCcpKTsKCQkJfSwgdGltZW91dCk7CgkJfQoKCQlkb2MuYm9keS5hcHBlbmRDaGlsZCh3aW4pOwoKCQkvLyBJZiB3ZSBhcmUganVzdCBwb3N0aW5nIGEgc2luZ2xlIGl0ZW0KCQlpZiAoX3RoaXMuZG9tSW5zdGFuY2UoJ2Zvcm0nLCBkYXRhKSkgewoJCQkvLyBHZXQgdGhlIHBhcmVudCBmb3JtCgkJCWZvcm0gPSBkYXRhLmZvcm07CgoJCQkvLyBMb29wIHRocm91Z2ggYW5kIGRpc2FibGUgYWxsIG9mIGl0cyBzaWJsaW5ncwoJCQlmb3IgKGkgPSAwOyBpIDwgZm9ybS5lbGVtZW50cy5sZW5ndGg7IGkrKykgewoJCQkJaWYgKGZvcm0uZWxlbWVudHNbaV0gIT09IGRhdGEpIHsKCQkJCQlmb3JtLmVsZW1lbnRzW2ldLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTsKCQkJCX0KCQkJfQoKCQkJLy8gTW92ZSB0aGUgZm9jdXMgdG8gdGhlIGZvcm0KCQkJZGF0YSA9IGZvcm07CgkJfQoKCQkvLyBQb3N0aW5nIGEgZm9ybQoJCWlmIChfdGhpcy5kb21JbnN0YW5jZSgnZm9ybScsIGRhdGEpKSB7CgkJCS8vIFRoaXMgaXMgYSBmb3JtIGVsZW1lbnQKCQkJZm9ybSA9IGRhdGE7CgoJCQkvLyBEb2VzIHRoaXMgZm9ybSBuZWVkIHRvIGJlIGEgbXVsdGlwYXJ0IGZvcm0/CgkJCWZvciAoaSA9IDA7IGkgPCBmb3JtLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkJCQlpZiAoIWZvcm0uZWxlbWVudHNbaV0uZGlzYWJsZWQgJiYgZm9ybS5lbGVtZW50c1tpXS50eXBlID09PSAnZmlsZScpIHsKCQkJCQlmb3JtLmVuY29kaW5nID0gZm9ybS5lbmN0eXBlID0gJ211bHRpcGFydC9mb3JtLWRhdGEnOwoJCQkJCWZvcm0uZWxlbWVudHNbaV0uc2V0QXR0cmlidXRlKCduYW1lJywgJ2ZpbGUnKTsKCQkJCX0KCQkJfQoJCX0KCQllbHNlIHsKCQkJLy8gSXRzIG5vdCBhIGZvcm0gZWxlbWVudCwKCQkJLy8gVGhlcmVmb3JlIGl0IG11c3QgYmUgYSBKU09OIG9iamVjdCBvZiBLZXk9PlZhbHVlIG9yIEtleT0+RWxlbWVudAoJCQkvLyBJZiBhbnlvbmUgb2YgdGhvc2UgdmFsdWVzIGFyZSBhIGlucHV0IHR5cGU9ZmlsZSB3ZSBzaGFsbCBzaGFsbCBpbnNlcnQgaXRzIHNpYmxpbmdzIGludG8gdGhlIGZvcm0gZm9yIHdoaWNoIGl0IGJlbG9uZ3MuCgkJCWZvciAoeCBpbiBkYXRhKSBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSh4KSkgewoJCQkJLy8gSXMgdGhpcyBhbiBpbnB1dCBFbGVtZW50PwoJCQkJaWYgKF90aGlzLmRvbUluc3RhbmNlKCdpbnB1dCcsIGRhdGFbeF0pICYmIGRhdGFbeF0udHlwZSA9PT0gJ2ZpbGUnKSB7CgkJCQkJZm9ybSA9IGRhdGFbeF0uZm9ybTsKCQkJCQlmb3JtLmVuY29kaW5nID0gZm9ybS5lbmN0eXBlID0gJ211bHRpcGFydC9mb3JtLWRhdGEnOwoJCQkJfQoJCQl9CgoJCQkvLyBEbyBJZiB0aGVyZSBpcyBubyBkZWZpbmVkIGZvcm0gZWxlbWVudCwgbGV0cyBjcmVhdGUgb25lLgoJCQlpZiAoIWZvcm0pIHsKCQkJCS8vIEJ1aWxkIGZvcm0KCQkJCWZvcm0gPSBkb2MuY3JlYXRlRWxlbWVudCgnZm9ybScpOwoJCQkJZG9jLmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7CgkJCQluZXdmb3JtID0gZm9ybTsKCQkJfQoKCQkJdmFyIGlucHV0OwoKCQkJLy8gQWRkIGVsZW1lbnRzIHRvIHRoZSBmb3JtIGlmIHRoZXkgZG9udCBleGlzdAoJCQlmb3IgKHggaW4gZGF0YSkgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoeCkpIHsKCgkJCQkvLyBJcyB0aGlzIGFuIGVsZW1lbnQ/CgkJCQl2YXIgZWwgPSAoX3RoaXMuZG9tSW5zdGFuY2UoJ2lucHV0JywgZGF0YVt4XSkgfHwgX3RoaXMuZG9tSW5zdGFuY2UoJ3RleHRBcmVhJywgZGF0YVt4XSkgfHwgX3RoaXMuZG9tSW5zdGFuY2UoJ3NlbGVjdCcsIGRhdGFbeF0pKTsKCgkJCQkvLyBJcyB0aGlzIG5vdCBhbiBpbnB1dCBlbGVtZW50LCBvciBvbmUgdGhhdCBleGlzdHMgb3V0c2lkZSB0aGUgZm9ybS4KCQkJCWlmICghZWwgfHwgZGF0YVt4XS5mb3JtICE9PSBmb3JtKSB7CgoJCQkJCS8vIERvZXMgYW4gZWxlbWVudCBoYXZlIHRoZSBzYW1lIG5hbWU/CgkJCQkJdmFyIGlucHV0cyA9IGZvcm0uZWxlbWVudHNbeF07CgkJCQkJaWYgKGlucHV0KSB7CgkJCQkJCS8vIFJlbW92ZSBpdC4KCQkJCQkJaWYgKCEoaW5wdXRzIGluc3RhbmNlb2YgTm9kZUxpc3QpKSB7CgkJCQkJCQlpbnB1dHMgPSBbaW5wdXRzXTsKCQkJCQkJfQoKCQkJCQkJZm9yIChpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykgewoJCQkJCQkJaW5wdXRzW2ldLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaW5wdXRzW2ldKTsKCQkJCQkJfQoKCQkJCQl9CgoJCQkJCS8vIENyZWF0ZSBhbiBpbnB1dCBlbGVtZW50CgkJCQkJaW5wdXQgPSBkb2MuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnaGlkZGVuJyk7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgeCk7CgoJCQkJCS8vIERvZXMgaXQgaGF2ZSBhIHZhbHVlIGF0dHJpYnV0ZT8KCQkJCQlpZiAoZWwpIHsKCQkJCQkJaW5wdXQudmFsdWUgPSBkYXRhW3hdLnZhbHVlOwoJCQkJCX0KCQkJCQllbHNlIGlmIChfdGhpcy5kb21JbnN0YW5jZShudWxsLCBkYXRhW3hdKSkgewoJCQkJCQlpbnB1dC52YWx1ZSA9IGRhdGFbeF0uaW5uZXJIVE1MIHx8IGRhdGFbeF0uaW5uZXJUZXh0OwoJCQkJCX0KCQkJCQllbHNlIHsKCQkJCQkJaW5wdXQudmFsdWUgPSBkYXRhW3hdOwoJCQkJCX0KCgkJCQkJZm9ybS5hcHBlbmRDaGlsZChpbnB1dCk7CgkJCQl9CgoJCQkJLy8gSXQgaXMgYW4gZWxlbWVudCwgd2hpY2ggZXhpc3RzIHdpdGhpbiB0aGUgZm9ybSwgYnV0IHRoZSBuYW1lIGlzIHdyb25nCgkJCQllbHNlIGlmIChlbCAmJiBkYXRhW3hdLm5hbWUgIT09IHgpIHsKCQkJCQlkYXRhW3hdLnNldEF0dHJpYnV0ZSgnbmFtZScsIHgpOwoJCQkJCWRhdGFbeF0ubmFtZSA9IHg7CgkJCQl9CgkJCX0KCgkJCS8vIERpc2FibGUgZWxlbWVudHMgZnJvbSB3aXRoaW4gdGhlIGZvcm0gaWYgdGhleSB3ZXJlbid0IHNwZWNpZmllZAoJCQlmb3IgKGkgPSAwOyBpIDwgZm9ybS5lbGVtZW50cy5sZW5ndGg7IGkrKykgewoKCQkJCWlucHV0ID0gZm9ybS5lbGVtZW50c1tpXTsKCgkJCQkvLyBEb2VzIHRoZSBzYW1lIG5hbWUgYW5kIHZhbHVlIGV4aXN0IGluIHRoZSBwYXJlbnQKCQkJCWlmICghKGlucHV0Lm5hbWUgaW4gZGF0YSkgJiYgaW5wdXQuZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpICE9PSB0cnVlKSB7CgkJCQkJLy8gRGlzYWJsZQoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTsKCgkJCQkJLy8gQWRkIHJlLWVuYWJsZSB0byBjYWxsYmFjawoJCQkJCXJlZW5hYmxlQWZ0ZXJTdWJtaXQucHVzaChpbnB1dCk7CgkJCQl9CgkJCX0KCQl9CgoJCS8vIFNldCB0aGUgdGFyZ2V0IG9mIHRoZSBmb3JtCgkJZm9ybS5zZXRBdHRyaWJ1dGUoJ21ldGhvZCcsICdQT1NUJyk7CgkJZm9ybS5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsIGNhbGxiYWNrSUQpOwoJCWZvcm0udGFyZ2V0ID0gY2FsbGJhY2tJRDsKCgkJLy8gVXBkYXRlIHRoZSBmb3JtIFVSTAoJCWZvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLCB1cmwpOwoKCQkvLyBTdWJtaXQgdGhlIGZvcm0KCQkvLyBTb21lIHJlYXNvbiB0aGlzIG5lZWRzIHRvIGJlIG9mZnNldCBmcm9tIHRoZSBjdXJyZW50IHdpbmRvdyBleGVjdXRpb24KCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQlmb3JtLnN1Ym1pdCgpOwoKCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCXRyeSB7CgkJCQkJLy8gUmVtb3ZlIHRoZSBpZnJhbWUgZnJvbSB0aGUgcGFnZS4KCQkJCQkvL3dpbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHdpbik7CgkJCQkJLy8gUmVtb3ZlIHRoZSBmb3JtCgkJCQkJaWYgKG5ld2Zvcm0pIHsKCQkJCQkJbmV3Zm9ybS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5ld2Zvcm0pOwoJCQkJCX0KCQkJCX0KCQkJCWNhdGNoIChlKSB7CgkJCQkJdHJ5IHsKCQkJCQkJY29uc29sZS5lcnJvcignSGVsbG9KUzogY291bGQgbm90IHJlbW92ZSBpZnJhbWUnKTsKCQkJCQl9CgkJCQkJY2F0Y2ggKGVlKSB7fQoJCQkJfQoKCQkJCS8vIFJlZW5hYmxlIHRoZSBkaXNhYmxlZCBmb3JtCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IHJlZW5hYmxlQWZ0ZXJTdWJtaXQubGVuZ3RoOyBpKyspIHsKCQkJCQlpZiAocmVlbmFibGVBZnRlclN1Ym1pdFtpXSkgewoJCQkJCQlyZWVuYWJsZUFmdGVyU3VibWl0W2ldLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCBmYWxzZSk7CgkJCQkJCXJlZW5hYmxlQWZ0ZXJTdWJtaXRbaV0uZGlzYWJsZWQgPSBmYWxzZTsKCQkJCQl9CgkJCQl9CgkJCX0sIDApOwoJCX0sIDEwMCk7Cgl9LAoKCS8vIFNvbWUgb2YgdGhlIHByb3ZpZGVycyByZXF1aXJlIHRoYXQgb25seSBtdWx0aXBhcnQgaXMgdXNlZCB3aXRoIG5vbi1iaW5hcnkgZm9ybXMuCgkvLyBUaGlzIGZ1bmN0aW9uIGNoZWNrcyB3aGV0aGVyIHRoZSBmb3JtIGNvbnRhaW5zIGJpbmFyeSBkYXRhCgloYXNCaW5hcnk6IGZ1bmN0aW9uKGRhdGEpIHsKCQlmb3IgKHZhciB4IGluIGRhdGEpIGlmIChkYXRhLmhhc093blByb3BlcnR5KHgpKSB7CgkJCWlmICh0aGlzLmlzQmluYXJ5KGRhdGFbeF0pKSB7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCX0KCgkJcmV0dXJuIGZhbHNlOwoJfSwKCgkvLyBEZXRlcm1pbmVzIGlmIGEgdmFyaWFibGUgRWl0aGVyIElzIG9yIGxpa2UgYSBGb3JtSW5wdXQgaGFzIHRoZSB2YWx1ZSBvZiBhIEJsb2IKCglpc0JpbmFyeTogZnVuY3Rpb24oZGF0YSkgewoKCQlyZXR1cm4gZGF0YSBpbnN0YW5jZW9mIE9iamVjdCAmJiAoCgkJKHRoaXMuZG9tSW5zdGFuY2UoJ2lucHV0JywgZGF0YSkgJiYgZGF0YS50eXBlID09PSAnZmlsZScpIHx8CgkJKCdGaWxlTGlzdCcgaW4gd2luZG93ICYmIGRhdGEgaW5zdGFuY2VvZiB3aW5kb3cuRmlsZUxpc3QpIHx8CgkJKCdGaWxlJyBpbiB3aW5kb3cgJiYgZGF0YSBpbnN0YW5jZW9mIHdpbmRvdy5GaWxlKSB8fAoJCSgnQmxvYicgaW4gd2luZG93ICYmIGRhdGEgaW5zdGFuY2VvZiB3aW5kb3cuQmxvYikpOwoKCX0sCgoJLy8gQ29udmVydCBEYXRhLVVSSSB0byBCbG9iIHN0cmluZwoJdG9CbG9iOiBmdW5jdGlvbihkYXRhVVJJKSB7CgkJdmFyIHJlZyA9IC9eZGF0YVw6KFteOyxdKyhcO2NoYXJzZXQ9W147LF0rKT8pKFw7YmFzZTY0KT8sL2k7CgkJdmFyIG0gPSBkYXRhVVJJLm1hdGNoKHJlZyk7CgkJaWYgKCFtKSB7CgkJCXJldHVybiBkYXRhVVJJOwoJCX0KCgkJdmFyIGJpbmFyeSA9IGF0b2IoZGF0YVVSSS5yZXBsYWNlKHJlZywgJycpKTsKCQl2YXIgYXJyYXkgPSBbXTsKCQlmb3IgKHZhciBpID0gMDsgaSA8IGJpbmFyeS5sZW5ndGg7IGkrKykgewoJCQlhcnJheS5wdXNoKGJpbmFyeS5jaGFyQ29kZUF0KGkpKTsKCQl9CgoJCXJldHVybiBuZXcgQmxvYihbbmV3IFVpbnQ4QXJyYXkoYXJyYXkpXSwge3R5cGU6IG1bMV19KTsKCX0KCn0pOwoKLy8gRVhUUkE6IENvbnZlcnQgRm9ybUVsZW1lbnQgdG8gSlNPTiBmb3IgUE9TVGluZwovLyBXcmFwcGVycyB0byBhZGQgYWRkaXRpb25hbCBmdW5jdGlvbmFsaXR5IHRvIGV4aXN0aW5nIGZ1bmN0aW9ucwooZnVuY3Rpb24oaGVsbG8pIHsKCgkvLyBDb3B5IG9yaWdpbmFsIGZ1bmN0aW9uCgl2YXIgYXBpID0gaGVsbG8uYXBpOwoJdmFyIHV0aWxzID0gaGVsbG8udXRpbHM7CgoJdXRpbHMuZXh0ZW5kKHV0aWxzLCB7CgoJCS8vIERhdGFUb0pTT04KCQkvLyBUaGlzIHRha2VzIGEgRm9ybUVsZW1lbnR8Tm9kZUxpc3R8SW5wdXRFbGVtZW50fE1peGVkT2JqZWN0cyBhbmQgY29udmVycyB0aGUgZGF0YSBvYmplY3QgdG8gSlNPTi4KCQlkYXRhVG9KU09OOiBmdW5jdGlvbihwKSB7CgoJCQl2YXIgX3RoaXMgPSB0aGlzOwoJCQl2YXIgdyA9IHdpbmRvdzsKCQkJdmFyIGRhdGEgPSBwLmRhdGE7CgoJCQkvLyBJcyBkYXRhIGEgZm9ybSBvYmplY3QKCQkJaWYgKF90aGlzLmRvbUluc3RhbmNlKCdmb3JtJywgZGF0YSkpIHsKCQkJCWRhdGEgPSBfdGhpcy5ub2RlTGlzdFRvSlNPTihkYXRhLmVsZW1lbnRzKTsKCQkJfQoJCQllbHNlIGlmICgnTm9kZUxpc3QnIGluIHcgJiYgZGF0YSBpbnN0YW5jZW9mIE5vZGVMaXN0KSB7CgkJCQlkYXRhID0gX3RoaXMubm9kZUxpc3RUb0pTT04oZGF0YSk7CgkJCX0KCQkJZWxzZSBpZiAoX3RoaXMuZG9tSW5zdGFuY2UoJ2lucHV0JywgZGF0YSkpIHsKCQkJCWRhdGEgPSBfdGhpcy5ub2RlTGlzdFRvSlNPTihbZGF0YV0pOwoJCQl9CgoJCQkvLyBJcyBkYXRhIGEgYmxvYiwgRmlsZSwgRmlsZUxpc3Q/CgkJCWlmICgoJ0ZpbGUnIGluIHcgJiYgZGF0YSBpbnN0YW5jZW9mIHcuRmlsZSkgfHwKCQkJCSgnQmxvYicgaW4gdyAmJiBkYXRhIGluc3RhbmNlb2Ygdy5CbG9iKSB8fAoJCQkJKCdGaWxlTGlzdCcgaW4gdyAmJiBkYXRhIGluc3RhbmNlb2Ygdy5GaWxlTGlzdCkpIHsKCQkJCWRhdGEgPSB7ZmlsZTogZGF0YX07CgkJCX0KCgkJCS8vIExvb3AgdGhyb3VnaCBkYXRhIGlmIGl0J3Mgbm90IGZvcm0gZGF0YSBpdCBtdXN0IG5vdyBiZSBhIEpTT04gb2JqZWN0CgkJCWlmICghKCdGb3JtRGF0YScgaW4gdyAmJiBkYXRhIGluc3RhbmNlb2Ygdy5Gb3JtRGF0YSkpIHsKCgkJCQlmb3IgKHZhciB4IGluIGRhdGEpIGlmIChkYXRhLmhhc093blByb3BlcnR5KHgpKSB7CgoJCQkJCWlmICgnRmlsZUxpc3QnIGluIHcgJiYgZGF0YVt4XSBpbnN0YW5jZW9mIHcuRmlsZUxpc3QpIHsKCQkJCQkJaWYgKGRhdGFbeF0ubGVuZ3RoID09PSAxKSB7CgkJCQkJCQlkYXRhW3hdID0gZGF0YVt4XVswXTsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlIGlmIChfdGhpcy5kb21JbnN0YW5jZSgnaW5wdXQnLCBkYXRhW3hdKSAmJiBkYXRhW3hdLnR5cGUgPT09ICdmaWxlJykgewoJCQkJCQljb250aW51ZTsKCQkJCQl9CgkJCQkJZWxzZSBpZiAoX3RoaXMuZG9tSW5zdGFuY2UoJ2lucHV0JywgZGF0YVt4XSkgfHwKCQkJCQkJX3RoaXMuZG9tSW5zdGFuY2UoJ3NlbGVjdCcsIGRhdGFbeF0pIHx8CgkJCQkJCV90aGlzLmRvbUluc3RhbmNlKCd0ZXh0QXJlYScsIGRhdGFbeF0pKSB7CgkJCQkJCWRhdGFbeF0gPSBkYXRhW3hdLnZhbHVlOwoJCQkJCX0KCQkJCQllbHNlIGlmIChfdGhpcy5kb21JbnN0YW5jZShudWxsLCBkYXRhW3hdKSkgewoJCQkJCQlkYXRhW3hdID0gZGF0YVt4XS5pbm5lckhUTUwgfHwgZGF0YVt4XS5pbm5lclRleHQ7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQlwLmRhdGEgPSBkYXRhOwoJCQlyZXR1cm4gZGF0YTsKCQl9LAoKCQkvLyBOb2RlTGlzdFRvSlNPTgoJCS8vIEdpdmVuIGEgbGlzdCBvZiBlbGVtZW50cyBleHRyYXBvbGF0ZSB0aGVpciB2YWx1ZXMgYW5kIHJldHVybiBhcyBhIGpzb24gb2JqZWN0CgkJbm9kZUxpc3RUb0pTT046IGZ1bmN0aW9uKG5vZGVsaXN0KSB7CgoJCQl2YXIganNvbiA9IHt9OwoKCQkJLy8gQ3JlYXRlIGEgZGF0YSBzdHJpbmcKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlbGlzdC5sZW5ndGg7IGkrKykgewoKCQkJCXZhciBpbnB1dCA9IG5vZGVsaXN0W2ldOwoKCQkJCS8vIElmIHRoZSBuYW1lIG9mIHRoZSBpbnB1dCBpcyBlbXB0eSBvciBkaWFibGVkLCBkb250IGFkZCBpdC4KCQkJCWlmIChpbnB1dC5kaXNhYmxlZCB8fCAhaW5wdXQubmFtZSkgewoJCQkJCWNvbnRpbnVlOwoJCQkJfQoKCQkJCS8vIElzIHRoaXMgYSBmaWxlLCBkb2VzIHRoZSBicm93c2VyIG5vdCBzdXBwb3J0ICdmaWxlcycgYW5kICdGb3JtRGF0YSc/CgkJCQlpZiAoaW5wdXQudHlwZSA9PT0gJ2ZpbGUnKSB7CgkJCQkJanNvbltpbnB1dC5uYW1lXSA9IGlucHV0OwoJCQkJfQoJCQkJZWxzZSB7CgkJCQkJanNvbltpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlIHx8IGlucHV0LmlubmVySFRNTDsKCQkJCX0KCQkJfQoKCQkJcmV0dXJuIGpzb247CgkJfQoJfSk7CgoJLy8gUmVwbGFjZSBpdAoJaGVsbG8uYXBpID0gZnVuY3Rpb24oKSB7CgoJCS8vIEdldCBhcmd1bWVudHMKCQl2YXIgcCA9IHV0aWxzLmFyZ3Moe3BhdGg6ICdzIScsIG1ldGhvZDogJ3MnLCBkYXRhOidvJywgdGltZW91dDogJ2knLCBjYWxsYmFjazogJ2YnfSwgYXJndW1lbnRzKTsKCgkJLy8gQ2hhbmdlIGZvciBpbnRvIGEgZGF0YSBvYmplY3QKCQlpZiAocC5kYXRhKSB7CgkJCXV0aWxzLmRhdGFUb0pTT04ocCk7CgkJfQoKCQlyZXR1cm4gYXBpLmNhbGwodGhpcywgcCk7Cgl9OwoKfSkoaGVsbG8pOwoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLwovLyBTYXZlIGFueSBhY2Nlc3MgdG9rZW4gdGhhdCBpcyBpbiB0aGUgY3VycmVudCBwYWdlIFVSTAovLyBIYW5kbGUgYW55IHJlc3BvbnNlIHNvbGljaXRlZCB0aHJvdWdoIGlmcmFtZSBoYXNoIHRhZyBmb2xsb3dpbmcgYW4gQVBJIHJlcXVlc3QKLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKaGVsbG8udXRpbHMucmVzcG9uc2VIYW5kbGVyKHdpbmRvdywgd2luZG93Lm9wZW5lciB8fCB3aW5kb3cucGFyZW50KTsKCi8vIFNjcmlwdCB0byBzdXBwb3J0IENocm9tZUFwcHMKLy8gVGhpcyBvdmVyaWRlcyB0aGUgaGVsbG8udXRpbHMucG9wdXAgbWV0aG9kIHRvIHN1cHBvcnQgY2hyb21lLmlkZW50aXR5LmxhdW5jaFdlYkF1dGhGbG93Ci8vIFNlZSBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2FwcHMvYXBwX2lkZW50aXR5I25vbgoKLy8gSXMgdGhpcyBhIGNocm9tZSBhcHA/CgppZiAodHlwZW9mIGNocm9tZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGNocm9tZS5pZGVudGl0eSA9PT0gJ29iamVjdCcgJiYgY2hyb21lLmlkZW50aXR5LmxhdW5jaFdlYkF1dGhGbG93KSB7CgoJKGZ1bmN0aW9uKCkgewoKCQkvLyBTd2FwIHRoZSBwb3B1cCBtZXRob2QKCQloZWxsby51dGlscy5wb3B1cCA9IGZ1bmN0aW9uKHVybCkgewoKCQkJcmV0dXJuIF9vcGVuKHVybCwgdHJ1ZSk7CgoJCX07CgoJCS8vIFN3YXAgdGhlIGhpZGRlbiBpZnJhbWUgbWV0aG9kCgkJaGVsbG8udXRpbHMuaWZyYW1lID0gZnVuY3Rpb24odXJsKSB7CgoJCQlfb3Blbih1cmwsIGZhbHNlKTsKCgkJfTsKCgkJLy8gU3dhcCB0aGUgcmVxdWVzdF9jb3JzIG1ldGhvZAoJCWhlbGxvLnV0aWxzLnJlcXVlc3RfY29ycyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CgoJCQljYWxsYmFjaygpOwoKCQkJLy8gQWx3YXlzIHJ1biBhcyBDT1JTCgoJCQlyZXR1cm4gdHJ1ZTsKCQl9OwoKCQkvLyBTd2FwIHRoZSBzdG9yYWdlIG1ldGhvZAoJCXZhciBfY2FjaGUgPSB7fTsKCQljaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoJ2hlbGxvJywgZnVuY3Rpb24ocikgewoJCQkvLyBVcGRhdGUgdGhlIGNhY2hlCgkJCV9jYWNoZSA9IHIuaGVsbG8gfHwge307CgkJfSk7CgoJCWhlbGxvLnV0aWxzLnN0b3JlID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKCgkJCS8vIEdldCBhbGwKCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHsKCQkJCXJldHVybiBfY2FjaGU7CgkJCX0KCgkJCS8vIEdldAoJCQlpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgewoJCQkJcmV0dXJuIF9jYWNoZVtuYW1lXSB8fCBudWxsOwoJCQl9CgoJCQkvLyBTZXQKCQkJaWYgKHZhbHVlKSB7CgkJCQlfY2FjaGVbbmFtZV0gPSB2YWx1ZTsKCQkJCWNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7aGVsbG86IF9jYWNoZX0pOwoJCQkJcmV0dXJuIHZhbHVlOwoJCQl9CgoJCQkvLyBEZWxldGUKCQkJaWYgKHZhbHVlID09PSBudWxsKSB7CgkJCQlkZWxldGUgX2NhY2hlW25hbWVdOwoJCQkJY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtoZWxsbzogX2NhY2hlfSk7CgkJCQlyZXR1cm4gbnVsbDsKCQkJfQoJCX07CgoJCS8vIE9wZW4gZnVuY3Rpb24KCQlmdW5jdGlvbiBfb3Blbih1cmwsIGludGVyYWN0aXZlKSB7CgoJCQkvLyBMYXVuY2gKCQkJdmFyIHJlZiA9IHsKCQkJCWNsb3NlZDogZmFsc2UKCQkJfTsKCgkJCS8vIExhdW5jaCB0aGUgd2ViQXV0aEZsb3cKCQkJY2hyb21lLmlkZW50aXR5LmxhdW5jaFdlYkF1dGhGbG93KHsKCQkJCXVybDogdXJsLAoJCQkJaW50ZXJhY3RpdmU6IGludGVyYWN0aXZlCgkJCX0sIGZ1bmN0aW9uKHJlc3BvbnNlVXJsKSB7CgoJCQkJLy8gRGlkIHRoZSB1c2VyIGNhbmNlbCB0aGlzIHByZW1hdHVyZWx5CgkJCQlpZiAocmVzcG9uc2VVcmwgPT09IHVuZGVmaW5lZCkgewoJCQkJCXJlZi5jbG9zZWQgPSB0cnVlOwoJCQkJCXJldHVybjsKCQkJCX0KCgkJCQkvLyBTcGxpdCBhcHBhcnQgdGhlIFVSTAoJCQkJdmFyIGEgPSBoZWxsby51dGlscy51cmwocmVzcG9uc2VVcmwpOwoKCQkJCS8vIFRoZSBsb2NhdGlvbiBjYW4gYmUgYXVnbWVudGVkIGluIHRvIGEgbG9jYXRpb24gb2JqZWN0IGxpa2Ugc28uLi4KCQkJCS8vIFdlIGRvbnQgaGF2ZSB3aW5kb3cgb3BlcmF0aW9ucyBvbiB0aGUgcG9wdXAgc28gbGV0cyBjcmVhdGUgc29tZQoJCQkJdmFyIF9wb3B1cCA9IHsKCQkJCQlsb2NhdGlvbjogewoKCQkJCQkJLy8gQ2hhbmdlIHRoZSBsb2NhdGlvbiBvZiB0aGUgcG9wdXAKCQkJCQkJYXNzaWduOiBmdW5jdGlvbih1cmwpIHsKCgkJCQkJCQkvLyBJZiB0aGVyZSBpcyBhIHNlY29uZGFyeSByZWFzc2lnbgoJCQkJCQkJLy8gSW4gdGhlIGNhc2Ugb2YgT0F1dGgxCgkJCQkJCQkvLyBUcmlnZ2VyIHRoaXMgaW4gbm9uLWludGVyYWN0aXZlIG1vZGUuCgkJCQkJCQlfb3Blbih1cmwsIGZhbHNlKTsKCQkJCQkJfSwKCgkJCQkJCXNlYXJjaDogYS5zZWFyY2gsCgkJCQkJCWhhc2g6IGEuaGFzaCwKCQkJCQkJaHJlZjogYS5ocmVmCgkJCQkJfSwKCQkJCQljbG9zZTogZnVuY3Rpb24oKSB7fQoJCQkJfTsKCgkJCQkvLyBUaGVuIHRoaXMgVVJMIGNvbnRhaW5zIGluZm9ybWF0aW9uIHdoaWNoIEhlbGxvSlMgbXVzdCBwcm9jZXNzCgkJCQkvLyBVUkwgc3RyaW5nCgkJCQkvLyBXaW5kb3cgLSBhbnkgYWN0aW9uIHN1Y2ggYXMgd2luZG93IHJlbG9jYXRpb24gZ29lcyBoZXJlCgkJCQkvLyBPcGVuZXIgLSB0aGUgcGFyZW50IHdpbmRvdyB3aGljaCBvcGVuZWQgdGhpcywgYWthIHRoaXMgc2NyaXB0CgoJCQkJaGVsbG8udXRpbHMucmVzcG9uc2VIYW5kbGVyKF9wb3B1cCwgd2luZG93KTsKCQkJfSk7CgoJCQkvLyBSZXR1cm4gdGhlIHJlZmVyZW5jZQoJCQlyZXR1cm4gcmVmOwoJCX0KCgl9KSgpOwp9CgovLyBQaG9uZWdhcCBvdmVycmlkZSBmb3IgaGVsbG8ucGhvbmVnYXAuanMKKGZ1bmN0aW9uKCkgewoKCS8vIElzIHRoaXMgYSBwaG9uZWdhcCBpbXBsZW1lbnRhdGlvbj8KCWlmICghKC9eZmlsZTpcL3szfVteXC9dLy50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSAmJiB3aW5kb3cuY29yZG92YSkpIHsKCQkvLyBDb3Jkb3ZhIGlzIG5vdCBpbmNsdWRlZC4KCQlyZXR1cm47Cgl9CgoJLy8gQXVnbWVudCB0aGUgaGlkZGVuIGlmcmFtZSBtZXRob2QKCWhlbGxvLnV0aWxzLmlmcmFtZSA9IGZ1bmN0aW9uKHVybCwgcmVkaXJlY3RVcmkpIHsKCQloZWxsby51dGlscy5wb3B1cCh1cmwsIHJlZGlyZWN0VXJpLCB7aGlkZGVuOiAneWVzJ30pOwoJfTsKCgkvLyBBdWdtZW50IHRoZSBwb3B1cAoJdmFyIHV0aWxQb3B1cCA9IGhlbGxvLnV0aWxzLnBvcHVwOwoKCS8vIFJlcGxhY2UgcG9wdXAKCWhlbGxvLnV0aWxzLnBvcHVwID0gZnVuY3Rpb24odXJsLCByZWRpcmVjdFVyaSwgb3B0aW9ucykgewoKCQkvLyBSdW4gdGhlIHN0YW5kYXJkCgkJdmFyIHBvcHVwID0gdXRpbFBvcHVwLmNhbGwodGhpcywgdXJsLCByZWRpcmVjdFVyaSwgb3B0aW9ucyk7CgoJCS8vIENyZWF0ZSBhIGZ1bmN0aW9uIGZvciByZW9wZW5pbmcgdGhlIHBvcHVwLCBhbmQgYXNzaWduaW5nIGV2ZW50cyB0byB0aGUgbmV3IHBvcHVwIG9iamVjdAoJCS8vIFBob25lR2FwIHN1cHBvcnQKCQkvLyBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgdG8gbGlzdGVuIHRvIHRoZSBjaGFuZ2UgaW4gdGhlIHBvcHVwIHdpbmRvd3MgVVJMCgkJLy8gVGhpcyBtdXN0IGFwcGVhciBiZWZvcmUgcG9wdXAuZm9jdXMoKTsKCQl0cnkgewoJCQlpZiAocG9wdXAgJiYgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcikgewoKCQkJCS8vIEdldCB0aGUgb3JpZ2luIG9mIHRoZSByZWRpcmVjdCBVUkkKCgkJCQl2YXIgYSA9IGhlbGxvLnV0aWxzLnVybChyZWRpcmVjdFVyaSk7CgkJCQl2YXIgcmVkaXJlY3RVcmlPcmlnaW4gPSBhLm9yaWdpbiB8fCAoYS5wcm90b2NvbCArICcvLycgKyBhLmhvc3RuYW1lKTsKCgkJCQkvLyBMaXN0ZW4gdG8gY2hhbmdlcyBpbiB0aGUgSW5BcHBCcm93c2VyIHdpbmRvdwoKCQkJCXBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRzdGFydCcsIGZ1bmN0aW9uKGUpIHsKCgkJCQkJdmFyIHVybCA9IGUudXJsOwoKCQkJCQkvLyBJcyB0aGlzIHRoZSBwYXRoLCBhcyBnaXZlbiBieSB0aGUgcmVkaXJlY3RVcmk/CgkJCQkJLy8gQ2hlY2sgdGhlIG5ldyBVUkwgYWdhaW5zIHRoZSByZWRpcmVjdFVyaU9yaWdpbi4KCQkJCQkvLyBBY2NvcmRpbmcgdG8gIzYzIGEgdXNlciBjb3VsZCBjbGljayAnY2FuY2VsJyBpbiBzb21lIGRpYWxvZyBib3hlcyAuLi4uCgkJCQkJLy8gVGhlIHBvcHVwIHJlZGlyZWN0cyB0byBhbm90aGVyIHBhZ2Ugd2l0aCB0aGUgc2FtZSBvcmlnaW4sIHlldCB3ZSBzdGlsbCB3aXNoIGl0IHRvIGNsb3NlLgoKCQkJCQlpZiAodXJsLmluZGV4T2YocmVkaXJlY3RVcmlPcmlnaW4pICE9PSAwKSB7CgkJCQkJCXJldHVybjsKCQkJCQl9CgoJCQkJCS8vIFNwbGl0IGFwcGFydCB0aGUgVVJMCgkJCQkJdmFyIGEgPSBoZWxsby51dGlscy51cmwodXJsKTsKCgkJCQkJLy8gV2UgZG9udCBoYXZlIHdpbmRvdyBvcGVyYXRpb25zIG9uIHRoZSBwb3B1cCBzbyBsZXRzIGNyZWF0ZSBzb21lCgkJCQkJLy8gVGhlIGxvY2F0aW9uIGNhbiBiZSBhdWdtZW50ZWQgaW4gdG8gYSBsb2NhdGlvbiBvYmplY3QgbGlrZSBzby4uLgoKCQkJCQl2YXIgX3BvcHVwID0gewoJCQkJCQlsb2NhdGlvbjogewoJCQkJCQkJLy8gQ2hhbmdlIHRoZSBsb2NhdGlvbiBvZiB0aGUgcG9wdXAKCQkJCQkJCWFzc2lnbjogZnVuY3Rpb24obG9jYXRpb24pIHsKCgkJCQkJCQkJLy8gVW5mb3VydHVuYXRseSBhbiBhcHAgaXMgbWF5IG5vdCBjaGFuZ2UgdGhlIGxvY2F0aW9uIG9mIGEgSW5BcHBCcm93c2VyIHdpbmRvdy4KCQkJCQkJCQkvLyBTbyB0byBzaGltIHRoaXMsIGp1c3Qgb3BlbiBhIG5ldyBvbmUuCgkJCQkJCQkJcG9wdXAuZXhlY3V0ZVNjcmlwdCh7Y29kZTogJ3dpbmRvdy5sb2NhdGlvbi5ocmVmID0gIicgKyBsb2NhdGlvbiArICc7Iid9KTsKCQkJCQkJCX0sCgoJCQkJCQkJc2VhcmNoOiBhLnNlYXJjaCwKCQkJCQkJCWhhc2g6IGEuaGFzaCwKCQkJCQkJCWhyZWY6IGEuaHJlZgoJCQkJCQl9LAoJCQkJCQljbG9zZTogZnVuY3Rpb24oKSB7CgkJCQkJCQlpZiAocG9wdXAuY2xvc2UpIHsKCQkJCQkJCQlwb3B1cC5jbG9zZSgpOwoJCQkJCQkJCXRyeSB7CgkJCQkJCQkJCXBvcHVwLmNsb3NlZCA9IHRydWU7CgkJCQkJCQkJfQoJCQkJCQkJCWNhdGNoIChfZSkge30KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX07CgoJCQkJCS8vIFRoZW4gdGhpcyBVUkwgY29udGFpbnMgaW5mb3JtYXRpb24gd2hpY2ggSGVsbG9KUyBtdXN0IHByb2Nlc3MKCQkJCQkvLyBVUkwgc3RyaW5nCgkJCQkJLy8gV2luZG93IC0gYW55IGFjdGlvbiBzdWNoIGFzIHdpbmRvdyByZWxvY2F0aW9uIGdvZXMgaGVyZQoJCQkJCS8vIE9wZW5lciAtIHRoZSBwYXJlbnQgd2luZG93IHdoaWNoIG9wZW5lZCB0aGlzLCBha2EgdGhpcyBzY3JpcHQKCgkJCQkJaGVsbG8udXRpbHMucmVzcG9uc2VIYW5kbGVyKF9wb3B1cCwgd2luZG93KTsKCgkJCQl9KTsKCQkJfQoJCX0KCQljYXRjaCAoZSkge30KCgkJcmV0dXJuIHBvcHVwOwoJfTsKCn0pKCk7CgooZnVuY3Rpb24oaGVsbG8pIHsKCgkvLyBPQXV0aDEKCXZhciBPQXV0aDFTZXR0aW5ncyA9IHsKCQl2ZXJzaW9uOiAnMS4wJywKCQlhdXRoOiAnaHR0cHM6Ly93d3cuZHJvcGJveC5jb20vMS9vYXV0aC9hdXRob3JpemUnLAoJCXJlcXVlc3Q6ICdodHRwczovL2FwaS5kcm9wYm94LmNvbS8xL29hdXRoL3JlcXVlc3RfdG9rZW4nLAoJCXRva2VuOiAnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vMS9vYXV0aC9hY2Nlc3NfdG9rZW4nCgl9OwoKCS8vIE9BdXRoMiBTZXR0aW5ncwoJdmFyIE9BdXRoMlNldHRpbmdzID0gewoJCXZlcnNpb246IDIsCgkJYXV0aDogJ2h0dHBzOi8vd3d3LmRyb3Bib3guY29tLzEvb2F1dGgyL2F1dGhvcml6ZScsCgkJZ3JhbnQ6ICdodHRwczovL2FwaS5kcm9wYm94LmNvbS8xL29hdXRoMi90b2tlbicKCX07CgoJLy8gSW5pdGlhdGUgdGhlIERyb3Bib3ggbW9kdWxlCgloZWxsby5pbml0KHsKCgkJZHJvcGJveDogewoKCQkJbmFtZTogJ0Ryb3Bib3gnLAoKCQkJb2F1dGg6IE9BdXRoMlNldHRpbmdzLAoKCQkJbG9naW46IGZ1bmN0aW9uKHApIHsKCQkJCS8vIE9BdXRoMiBub24tc3RhbmRhcmQgYWRqdXN0bWVudHMKCQkJCXAucXMuc2NvcGUgPSAnJzsKCQkJCWRlbGV0ZSBwLnFzLmRpc3BsYXk7CgoJCQkJLy8gU2hvdWxkIHRoaXMgYmUgcnVuIGFzIE9BdXRoMT8KCQkJCS8vIElmIHRoZSByZWRpcmVjdF91cmkgaXMgaXMgSFRUUCAobm9uLXNlY3VyZSkgdGhlbiBpdHMgcmVxdWlyZWQgdG8gcmV2ZXJ0IHRvIHRoZSBPQXV0aDEgZW5kcG9pbnRzCgkJCQl2YXIgcmVkaXJlY3QgPSBkZWNvZGVVUklDb21wb25lbnQocC5xcy5yZWRpcmVjdF91cmkpOwoJCQkJaWYgKHJlZGlyZWN0LmluZGV4T2YoJ2h0dHA6JykgPT09IDAgJiYgcmVkaXJlY3QuaW5kZXhPZignaHR0cDovL2xvY2FsaG9zdC8nKSAhPT0gMCkgewoKCQkJCQkvLyBPdmVycmlkZSB0aGUgZHJvcGJveCBPQXV0aCBzZXR0aW5ncy4KCQkJCQloZWxsby5zZXJ2aWNlcy5kcm9wYm94Lm9hdXRoID0gT0F1dGgxU2V0dGluZ3M7CgkJCQl9CgkJCQllbHNlIHsKCQkJCQkvLyBPdmVycmlkZSB0aGUgZHJvcGJveCBPQXV0aCBzZXR0aW5ncy4KCQkJCQloZWxsby5zZXJ2aWNlcy5kcm9wYm94Lm9hdXRoID0gT0F1dGgyU2V0dGluZ3M7CgkJCQl9CgoJCQkJLy8gVGhlIGRyb3Bib3ggbG9naW4gd2luZG93IGlzIGEgZGlmZmVyZW50IHNpemUKCQkJCXAub3B0aW9ucy5wb3B1cC53aWR0aCA9IDEwMDA7CgkJCQlwLm9wdGlvbnMucG9wdXAuaGVpZ2h0ID0gMTAwMDsKCQkJfSwKCgkJCS8qCgkJCQlEcm9wYm94IGRvZXMgbm90IGFsbG93IGluc2VjdXJlIEhUVFAgVVJJJ3MgaW4gdGhlIHJlZGlyZWN0X3VyaSBmaWVsZAoJCQkJLi4ub3RoZXJ3aXNlIEknZCBsb3ZlIHRvIHVzZSBPQXV0aDIKCgkJCQlGb2xsb3cgcmVxdWVzdCBodHRwczovL2ZvcnVtcy5kcm9wYm94LmNvbS90b3BpYy5waHA/aWQ9MTA2NTA1CgoJCQkJcC5xcy5yZXNwb25zZV90eXBlID0gJ2NvZGUnOwoJCQkJb2F1dGg6IHsKCQkJCQl2ZXJzaW9uOiAyLAoJCQkJCWF1dGg6ICdodHRwczovL3d3dy5kcm9wYm94LmNvbS8xL29hdXRoMi9hdXRob3JpemUnLAoJCQkJCWdyYW50OiAnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vMS9vYXV0aDIvdG9rZW4nCgkJCQl9CgkJCSovCgoJCQkvLyBBUEkgQmFzZSBVUkwKCQkJYmFzZTogJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tLzEvJywKCgkJCS8vIEJlc3Bva2Ugc2V0dGluZzogdGhpcyBpcyBzdGF0ZXMgd2hldGhlciB0byB1c2UgdGhlIGN1c3RvbSBlbnZpcm9ubWVudCBvZiBEcm9wYm94IG9yIHRvIHVzZSB0aGVpciBvd24gZW52aXJvbm1lbnQKCQkJLy8gQmVjYXVzZSBpdCdzIG5vdG9yaW91c2x5IGRpZmZpY3VsdCBmb3IgRHJvcGJveCB0b28gcHJvdmlkZSBhY2Nlc3MgZnJvbSBvdGhlciB3ZWJzZXJ2aWNlcywgdGhpcyBkZWZhdWx0cyB0byBTYW5kYm94CgkJCXJvb3Q6ICdzYW5kYm94JywKCgkJCS8vIE1hcCBHRVQgcmVxdWVzdHMKCQkJZ2V0OiB7CgkJCQltZTogJ2FjY291bnQvaW5mbycsCgoJCQkJLy8gSHR0cHM6Ly93d3cuZHJvcGJveC5jb20vZGV2ZWxvcGVycy9jb3JlL2RvY3MjbWV0YWRhdGEKCQkJCSdtZS9maWxlcyc6IHJlcSgnbWV0YWRhdGEvYXV0by9Ae3BhcmVudHx9JyksCgkJCQknbWUvZm9sZGVyJzogcmVxKCdtZXRhZGF0YS9hdXRvL0B7aWR9JyksCgkJCQknbWUvZm9sZGVycyc6IHJlcSgnbWV0YWRhdGEvYXV0by8nKSwKCgkJCQknZGVmYXVsdCc6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7CgkJCQkJaWYgKHAucGF0aC5tYXRjaCgnaHR0cHM6Ly9hcGktY29udGVudC5kcm9wYm94LmNvbS8xL2ZpbGVzLycpKSB7CgkJCQkJCS8vIFRoaXMgaXMgYSBmaWxlLCByZXR1cm4gYmluYXJ5IGRhdGEKCQkJCQkJcC5tZXRob2QgPSAnYmxvYic7CgkJCQkJfQoKCQkJCQljYWxsYmFjayhwLnBhdGgpOwoJCQkJfQoJCQl9LAoKCQkJcG9zdDogewoJCQkJJ21lL2ZpbGVzJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCgkJCQkJdmFyIHBhdGggPSBwLmRhdGEucGFyZW50OwoJCQkJCXZhciBmaWxlTmFtZSA9IHAuZGF0YS5uYW1lOwoKCQkJCQlwLmRhdGEgPSB7CgkJCQkJCWZpbGU6IHAuZGF0YS5maWxlCgkJCQkJfTsKCgkJCQkJLy8gRG9lcyB0aGlzIGhhdmUgYSBkYXRhLXVyaSB0byB1cGxvYWQgYXMgYSBmaWxlPwoJCQkJCWlmICh0eXBlb2YgKHAuZGF0YS5maWxlKSA9PT0gJ3N0cmluZycpIHsKCQkJCQkJcC5kYXRhLmZpbGUgPSBoZWxsby51dGlscy50b0Jsb2IocC5kYXRhLmZpbGUpOwoJCQkJCX0KCgkJCQkJY2FsbGJhY2soJ2h0dHBzOi8vYXBpLWNvbnRlbnQuZHJvcGJveC5jb20vMS9maWxlc19wdXQvYXV0by8nICsgcGF0aCArICcvJyArIGZpbGVOYW1lKTsKCQkJCX0sCgoJCQkJJ21lL2ZvbGRlcnMnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykgewoKCQkJCQl2YXIgbmFtZSA9IHAuZGF0YS5uYW1lOwoJCQkJCXAuZGF0YSA9IHt9OwoKCQkJCQljYWxsYmFjaygnZmlsZW9wcy9jcmVhdGVfZm9sZGVyP3Jvb3Q9QHtyb290fHNhbmRib3h9JicgKyBoZWxsby51dGlscy5wYXJhbSh7CgkJCQkJCXBhdGg6IG5hbWUKCQkJCQl9KSk7CgkJCQl9CgkJCX0sCgoJCQkvLyBNYXAgREVMRVRFIHJlcXVlc3RzCgkJCWRlbDogewoJCQkJJ21lL2ZpbGVzJzogJ2ZpbGVvcHMvZGVsZXRlP3Jvb3Q9QHtyb290fHNhbmRib3h9JnBhdGg9QHtpZH0nLAoJCQkJJ21lL2ZvbGRlcic6ICdmaWxlb3BzL2RlbGV0ZT9yb290PUB7cm9vdHxzYW5kYm94fSZwYXRoPUB7aWR9JwoJCQl9LAoKCQkJd3JhcDogewoJCQkJbWU6IGZ1bmN0aW9uKG8pIHsKCQkJCQlmb3JtYXRFcnJvcihvKTsKCQkJCQlpZiAoIW8udWlkKSB7CgkJCQkJCXJldHVybiBvOwoJCQkJCX0KCgkJCQkJby5uYW1lID0gby5kaXNwbGF5X25hbWU7CgkJCQkJdmFyIG0gPSBvLm5hbWUuc3BsaXQoJyAnKTsKCQkJCQlvLmZpcnN0X25hbWUgPSBtLnNoaWZ0KCk7CgkJCQkJby5sYXN0X25hbWUgPSBtLmpvaW4oJyAnKTsKCQkJCQlvLmlkID0gby51aWQ7CgkJCQkJZGVsZXRlIG8udWlkOwoJCQkJCWRlbGV0ZSBvLmRpc3BsYXlfbmFtZTsKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ2RlZmF1bHQnOiBmdW5jdGlvbihvLCBoZWFkZXJzLCByZXEpIHsKCQkJCQlmb3JtYXRFcnJvcihvKTsKCQkJCQlpZiAoby5pc19kaXIgJiYgby5jb250ZW50cykgewoJCQkJCQlvLmRhdGEgPSBvLmNvbnRlbnRzOwoJCQkJCQlkZWxldGUgby5jb250ZW50czsKCgkJCQkJCW8uZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJCWl0ZW0ucm9vdCA9IG8ucm9vdDsKCQkJCQkJCWZvcm1hdEZpbGUoaXRlbSwgaGVhZGVycywgcmVxKTsKCQkJCQkJfSk7CgkJCQkJfQoKCQkJCQlmb3JtYXRGaWxlKG8sIGhlYWRlcnMsIHJlcSk7CgoJCQkJCWlmIChvLmlzX2RlbGV0ZWQpIHsKCQkJCQkJby5zdWNjZXNzID0gdHJ1ZTsKCQkJCQl9CgoJCQkJCXJldHVybiBvOwoJCQkJfQoJCQl9LAoKCQkJLy8gRG9lc24ndCByZXR1cm4gdGhlIENPUlMgaGVhZGVycwoJCQl4aHI6IGZ1bmN0aW9uKHApIHsKCgkJCQkvLyBUaGUgcHJveHkgc3VwcG9ydHMgYWxsb3ctY3Jvc3Mtb3JpZ2luLXJlc291cmNlCgkJCQkvLyBBbGFzIHRoYXQncyB0aGUgb25seSB0aGluZyB3ZSdyZSB1c2luZy4KCQkJCWlmIChwLmRhdGEgJiYgcC5kYXRhLmZpbGUpIHsKCQkJCQl2YXIgZmlsZSA9IHAuZGF0YS5maWxlOwoJCQkJCWlmIChmaWxlKSB7CgkJCQkJCWlmIChmaWxlLmZpbGVzKSB7CgkJCQkJCQlwLmRhdGEgPSBmaWxlLmZpbGVzWzBdOwoJCQkJCQl9CgkJCQkJCWVsc2UgewoJCQkJCQkJcC5kYXRhID0gZmlsZTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQlpZiAocC5tZXRob2QgPT09ICdkZWxldGUnKSB7CgkJCQkJcC5tZXRob2QgPSAncG9zdCc7CgkJCQl9CgoJCQkJcmV0dXJuIHRydWU7CgkJCX0sCgoJCQlmb3JtOiBmdW5jdGlvbihwLCBxcykgewoJCQkJZGVsZXRlIHFzLnN0YXRlOwoJCQkJZGVsZXRlIHFzLnJlZGlyZWN0X3VyaTsKCQkJfQoJCX0KCX0pOwoKCWZ1bmN0aW9uIGZvcm1hdEVycm9yKG8pIHsKCQlpZiAobyAmJiAnZXJyb3InIGluIG8pIHsKCQkJby5lcnJvciA9IHsKCQkJCWNvZGU6ICdzZXJ2ZXJfZXJyb3InLAoJCQkJbWVzc2FnZTogby5lcnJvci5tZXNzYWdlIHx8IG8uZXJyb3IKCQkJfTsKCQl9Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RmlsZShvLCBoZWFkZXJzLCByZXEpIHsKCgkJaWYgKHR5cGVvZiBvICE9PSAnb2JqZWN0JyB8fAoJCQkodHlwZW9mIEJsb2IgIT09ICd1bmRlZmluZWQnICYmIG8gaW5zdGFuY2VvZiBCbG9iKSB8fAoJCQkodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiBvIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7CgkJCS8vIFRoaXMgaXMgYSBmaWxlLCBsZXQgaXQgdGhyb3VnaCB1bmZvcm1hdHRlZAoJCQlyZXR1cm47CgkJfQoKCQlpZiAoJ2Vycm9yJyBpbiBvKSB7CgkJCXJldHVybjsKCQl9CgoJCXZhciBwYXRoID0gKG8ucm9vdCAhPT0gJ2FwcF9mb2xkZXInID8gby5yb290IDogJycpICsgby5wYXRoLnJlcGxhY2UoL1wmL2csICclMjYnKTsKCQlwYXRoID0gcGF0aC5yZXBsYWNlKC9eXC8vLCAnJyk7CgkJaWYgKG8udGh1bWJfZXhpc3RzKSB7CgkJCW8udGh1bWJuYWlsID0gcmVxLm9hdXRoX3Byb3h5ICsgJz9wYXRoPScgKwoJCQllbmNvZGVVUklDb21wb25lbnQoJ2h0dHBzOi8vYXBpLWNvbnRlbnQuZHJvcGJveC5jb20vMS90aHVtYm5haWxzL2F1dG8vJyArIHBhdGggKyAnP2Zvcm1hdD1qcGVnJnNpemU9bScpICsgJyZhY2Nlc3NfdG9rZW49JyArIHJlcS5vcHRpb25zLmFjY2Vzc190b2tlbjsKCQl9CgoJCW8udHlwZSA9IChvLmlzX2RpciA/ICdmb2xkZXInIDogby5taW1lX3R5cGUpOwoJCW8ubmFtZSA9IG8ucGF0aC5yZXBsYWNlKC8uKlwvL2csICcnKTsKCQlpZiAoby5pc19kaXIpIHsKCQkJby5maWxlcyA9IHBhdGgucmVwbGFjZSgvXlwvLywgJycpOwoJCX0KCQllbHNlIHsKCQkJby5kb3dubG9hZExpbmsgPSBoZWxsby5zZXR0aW5ncy5vYXV0aF9wcm94eSArICc/cGF0aD0nICsKCQkJZW5jb2RlVVJJQ29tcG9uZW50KCdodHRwczovL2FwaS1jb250ZW50LmRyb3Bib3guY29tLzEvZmlsZXMvYXV0by8nICsgcGF0aCkgKyAnJmFjY2Vzc190b2tlbj0nICsgcmVxLm9wdGlvbnMuYWNjZXNzX3Rva2VuOwoJCQlvLmZpbGUgPSAnaHR0cHM6Ly9hcGktY29udGVudC5kcm9wYm94LmNvbS8xL2ZpbGVzL2F1dG8vJyArIHBhdGg7CgkJfQoKCQlpZiAoIW8uaWQpIHsKCQkJby5pZCA9IG8ucGF0aC5yZXBsYWNlKC9eXC8vLCAnJyk7CgkJfQoKCQkvLyBPLm1lZGlhID0gJ2h0dHBzOi8vYXBpLWNvbnRlbnQuZHJvcGJveC5jb20vMS9maWxlcy8nICsgcGF0aDsKCX0KCglmdW5jdGlvbiByZXEoc3RyKSB7CgkJcmV0dXJuIGZ1bmN0aW9uKHAsIGNiKSB7CgkJCWRlbGV0ZSBwLnF1ZXJ5LmxpbWl0OwoJCQljYihzdHIpOwoJCX07Cgl9Cgp9KShoZWxsbyk7CgooZnVuY3Rpb24oaGVsbG8pIHsKCgloZWxsby5pbml0KHsKCgkJZmFjZWJvb2s6IHsKCgkJCW5hbWU6ICdGYWNlYm9vaycsCgoJCQkvLyBTRUUgaHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS9kb2NzL2ZhY2Vib29rLWxvZ2luL21hbnVhbGx5LWJ1aWxkLWEtbG9naW4tZmxvdy92Mi4xCgkJCW9hdXRoOiB7CgkJCQl2ZXJzaW9uOiAyLAoJCQkJYXV0aDogJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9kaWFsb2cvb2F1dGgvJywKCQkJCWdyYW50OiAnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vb2F1dGgvYWNjZXNzX3Rva2VuJwoJCQl9LAoKCQkJLy8gQXV0aG9yaXphdGlvbiBzY29wZXMKCQkJc2NvcGU6IHsKCQkJCWJhc2ljOiAncHVibGljX3Byb2ZpbGUnLAoJCQkJZW1haWw6ICdlbWFpbCcsCgkJCQlzaGFyZTogJ3VzZXJfcG9zdHMnLAoJCQkJYmlydGhkYXk6ICd1c2VyX2JpcnRoZGF5JywKCQkJCWV2ZW50czogJ3VzZXJfZXZlbnRzJywKCQkJCXBob3RvczogJ3VzZXJfcGhvdG9zJywKCQkJCXZpZGVvczogJ3VzZXJfdmlkZW9zJywKCQkJCWZyaWVuZHM6ICd1c2VyX2ZyaWVuZHMnLAoJCQkJZmlsZXM6ICd1c2VyX3Bob3Rvcyx1c2VyX3ZpZGVvcycsCgkJCQlwdWJsaXNoX2ZpbGVzOiAndXNlcl9waG90b3MsdXNlcl92aWRlb3MscHVibGlzaF9hY3Rpb25zJywKCQkJCXB1Ymxpc2g6ICdwdWJsaXNoX2FjdGlvbnMnLAoKCQkJCS8vIERlcHJlY2F0ZWQgaW4gdjIuMAoJCQkJLy8gQ3JlYXRlX2V2ZW50CTogJ2NyZWF0ZV9ldmVudCcsCgoJCQkJb2ZmbGluZV9hY2Nlc3M6ICcnCgkJCX0sCgoJCQkvLyBSZWZyZXNoIHRoZSBhY2Nlc3NfdG9rZW4KCQkJcmVmcmVzaDogdHJ1ZSwKCgkJCWxvZ2luOiBmdW5jdGlvbihwKSB7CgoJCQkJLy8gUmVhdXRoZW50aWNhdGUKCQkJCS8vIGh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vZG9jcy9mYWNlYm9vay1sb2dpbi9yZWF1dGhlbnRpY2F0aW9uCgkJCQlpZiAocC5vcHRpb25zLmZvcmNlKSB7CgkJCQkJcC5xcy5hdXRoX3R5cGUgPSAncmVhdXRoZW50aWNhdGUnOwoJCQkJfQoKCQkJCS8vIFRoZSBmYWNlYm9vayBsb2dpbiB3aW5kb3cgaXMgYSBkaWZmZXJlbnQgc2l6ZS4KCQkJCXAub3B0aW9ucy5wb3B1cC53aWR0aCA9IDU4MDsKCQkJCXAub3B0aW9ucy5wb3B1cC5oZWlnaHQgPSA0MDA7CgkJCX0sCgoJCQlsb2dvdXQ6IGZ1bmN0aW9uKGNhbGxiYWNrLCBvcHRpb25zKSB7CgkJCQkvLyBBc3NpZ24gY2FsbGJhY2sgdG8gYSBnbG9iYWwgaGFuZGxlcgoJCQkJdmFyIGNhbGxiYWNrSUQgPSBoZWxsby51dGlscy5nbG9iYWxFdmVudChjYWxsYmFjayk7CgkJCQl2YXIgcmVkaXJlY3QgPSBlbmNvZGVVUklDb21wb25lbnQoaGVsbG8uc2V0dGluZ3MucmVkaXJlY3RfdXJpICsgJz8nICsgaGVsbG8udXRpbHMucGFyYW0oe2NhbGxiYWNrOmNhbGxiYWNrSUQsIHJlc3VsdDogSlNPTi5zdHJpbmdpZnkoe2ZvcmNlOnRydWV9KSwgc3RhdGU6ICd7fSd9KSk7CgkJCQl2YXIgdG9rZW4gPSAob3B0aW9ucy5hdXRoUmVzcG9uc2UgfHwge30pLmFjY2Vzc190b2tlbjsKCQkJCWhlbGxvLnV0aWxzLmlmcmFtZSgnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2xvZ291dC5waHA/bmV4dD0nICsgcmVkaXJlY3QgKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZW4pOwoKCQkJCS8vIFBvc3NpYmxlIHJlc3BvbnNlczoKCQkJCS8vIFN0cmluZyBVUkwJLSBoZWxsby5sb2dvdXQgc2hvdWxkIGhhbmRsZSB0aGUgbG9nb3V0CgkJCQkvLyBVbmRlZmluZWQJLSB0aGlzIGZ1bmN0aW9uIHdpbGwgaGFuZGxlIHRoZSBjYWxsYmFjawoJCQkJLy8gVHJ1ZSAtIHRocm93IGEgc3VjY2VzcywgdGhpcyBjYWxsYmFjayBpc24ndCBoYW5kbGluZyB0aGUgY2FsbGJhY2sKCQkJCS8vIEZhbHNlIC0gdGhyb3cgYSBlcnJvcgoJCQkJaWYgKCF0b2tlbikgewoJCQkJCS8vIElmIHRoZXJlIGlzbid0IGEgdG9rZW4sIHRoZSBhYm92ZSB3b250IHJldHVybiBhIHJlc3BvbnNlLCBzbyBsZXRzIHRyaWdnZXIgYSByZXNwb25zZQoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfSwKCgkJCS8vIEFQSSBCYXNlIFVSTAoJCQliYXNlOiAnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjIuNC8nLAoKCQkJLy8gTWFwIEdFVCByZXF1ZXN0cwoJCQlnZXQ6IHsKCQkJCW1lOiAnbWU/ZmllbGRzPWVtYWlsLGZpcnN0X25hbWUsbGFzdF9uYW1lLG5hbWUsdGltZXpvbmUsdmVyaWZpZWQnLAoJCQkJJ21lL2ZyaWVuZHMnOiAnbWUvZnJpZW5kcycsCgkJCQknbWUvZm9sbG93aW5nJzogJ21lL2ZyaWVuZHMnLAoJCQkJJ21lL2ZvbGxvd2Vycyc6ICdtZS9mcmllbmRzJywKCQkJCSdtZS9zaGFyZSc6ICdtZS9mZWVkJywKCQkJCSdtZS9saWtlJzogJ21lL2xpa2VzJywKCQkJCSdtZS9maWxlcyc6ICdtZS9hbGJ1bXMnLAoJCQkJJ21lL2FsYnVtcyc6ICdtZS9hbGJ1bXM/ZmllbGRzPWNvdmVyX3Bob3RvLG5hbWUnLAoJCQkJJ21lL2FsYnVtJzogJ0B7aWR9L3Bob3Rvcz9maWVsZHM9cGljdHVyZScsCgkJCQknbWUvcGhvdG9zJzogJ21lL3Bob3RvcycsCgkJCQknbWUvcGhvdG8nOiAnQHtpZH0nLAoJCQkJJ2ZyaWVuZC9hbGJ1bXMnOiAnQHtpZH0vYWxidW1zJywKCQkJCSdmcmllbmQvcGhvdG9zJzogJ0B7aWR9L3Bob3RvcycKCgkJCQkvLyBQYWdpbmF0aW9uCgkJCQkvLyBIdHRwczovL2RldmVsb3BlcnMuZmFjZWJvb2suY29tL2RvY3MvcmVmZXJlbmNlL2FwaS9wYWdpbmF0aW9uLwoJCQl9LAoKCQkJLy8gTWFwIFBPU1QgcmVxdWVzdHMKCQkJcG9zdDogewoJCQkJJ21lL3NoYXJlJzogJ21lL2ZlZWQnLAoJCQkJJ21lL3Bob3RvJzogJ0B7aWR9JwoKCQkJCS8vIEh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vZG9jcy9ncmFwaC1hcGkvcmVmZXJlbmNlL3YyLjIvb2JqZWN0L2xpa2VzLwoJCQl9LAoKCQkJd3JhcDogewoJCQkJbWU6IGZvcm1hdFVzZXIsCgkJCQknbWUvZnJpZW5kcyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvZm9sbG93aW5nJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9mb2xsb3dlcnMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2FsYnVtcyc6IGZvcm1hdCwKCQkJCSdtZS9waG90b3MnOiBmb3JtYXQsCgkJCQknbWUvZmlsZXMnOiBmb3JtYXQsCgkJCQknZGVmYXVsdCc6IGZvcm1hdAoJCQl9LAoKCQkJLy8gU3BlY2lhbCByZXF1aXJlbWVudHMgZm9yIGhhbmRsaW5nIFhIUgoJCQl4aHI6IGZ1bmN0aW9uKHAsIHFzKSB7CgkJCQlpZiAocC5tZXRob2QgPT09ICdnZXQnIHx8IHAubWV0aG9kID09PSAncG9zdCcpIHsKCQkJCQlxcy5zdXBwcmVzc19yZXNwb25zZV9jb2RlcyA9IHRydWU7CgkJCQl9CgoJCQkJLy8gSXMgdGhpcyBhIHBvc3Qgd2l0aCBhIGRhdGEtdXJpPwoJCQkJaWYgKHAubWV0aG9kID09PSAncG9zdCcgJiYgcC5kYXRhICYmIHR5cGVvZiAocC5kYXRhLmZpbGUpID09PSAnc3RyaW5nJykgewoJCQkJCS8vIENvbnZlcnQgdGhlIERhdGEtVVJJIHRvIGEgQmxvYgoJCQkJCXAuZGF0YS5maWxlID0gaGVsbG8udXRpbHMudG9CbG9iKHAuZGF0YS5maWxlKTsKCQkJCX0KCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfSwKCgkJCS8vIFNwZWNpYWwgcmVxdWlyZW1lbnRzIGZvciBoYW5kbGluZyBKU09OUCBmYWxsYmFjawoJCQlqc29ucDogZnVuY3Rpb24ocCwgcXMpIHsKCQkJCXZhciBtID0gcC5tZXRob2Q7CgkJCQlpZiAobSAhPT0gJ2dldCcgJiYgIWhlbGxvLnV0aWxzLmhhc0JpbmFyeShwLmRhdGEpKSB7CgkJCQkJcC5kYXRhLm1ldGhvZCA9IG07CgkJCQkJcC5tZXRob2QgPSAnZ2V0JzsKCQkJCX0KCQkJCWVsc2UgaWYgKHAubWV0aG9kID09PSAnZGVsZXRlJykgewoJCQkJCXFzLm1ldGhvZCA9ICdkZWxldGUnOwoJCQkJCXAubWV0aG9kID0gJ3Bvc3QnOwoJCQkJfQoJCQl9LAoKCQkJLy8gU3BlY2lhbCByZXF1aXJlbWVudHMgZm9yIGlmcmFtZSBmb3JtIGhhY2sKCQkJZm9ybTogZnVuY3Rpb24ocCkgewoJCQkJcmV0dXJuIHsKCQkJCQkvLyBGaXJlIHRoZSBjYWxsYmFjayBvbmxvYWQKCQkJCQljYWxsYmFja29ubG9hZDogdHJ1ZQoJCQkJfTsKCQkJfQoJCX0KCX0pOwoKCXZhciBiYXNlID0gJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyc7CgoJZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7CgkJaWYgKG8uaWQpIHsKCQkJby50aHVtYm5haWwgPSBvLnBpY3R1cmUgPSAnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIG8uaWQgKyAnL3BpY3R1cmUnOwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvKSB7CgkJaWYgKCdkYXRhJyBpbiBvKSB7CgkJCW8uZGF0YS5mb3JFYWNoKGZvcm1hdFVzZXIpOwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0KG8sIGhlYWRlcnMsIHJlcSkgewoJCWlmICh0eXBlb2YgbyA9PT0gJ2Jvb2xlYW4nKSB7CgkJCW8gPSB7c3VjY2Vzczogb307CgkJfQoKCQlpZiAobyAmJiAnZGF0YScgaW4gbykgewoJCQl2YXIgdG9rZW4gPSByZXEucXVlcnkuYWNjZXNzX3Rva2VuOwoKCQkJaWYgKCEoby5kYXRhIGluc3RhbmNlb2YgQXJyYXkpKSB7CgkJCQl2YXIgZGF0YSA9IG8uZGF0YTsKCQkJCWRlbGV0ZSBvLmRhdGE7CgkJCQlvLmRhdGEgPSBbZGF0YV07CgkJCX0KCgkJCW8uZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsKCgkJCQlpZiAoZC5waWN0dXJlKSB7CgkJCQkJZC50aHVtYm5haWwgPSBkLnBpY3R1cmU7CgkJCQl9CgoJCQkJZC5waWN0dXJlcyA9IChkLmltYWdlcyB8fCBbXSkKCQkJCQkuc29ydChmdW5jdGlvbihhLCBiKSB7CgkJCQkJCXJldHVybiBhLndpZHRoIC0gYi53aWR0aDsKCQkJCQl9KTsKCgkJCQlpZiAoZC5jb3Zlcl9waG90byAmJiBkLmNvdmVyX3Bob3RvLmlkKSB7CgkJCQkJZC50aHVtYm5haWwgPSBiYXNlICsgZC5jb3Zlcl9waG90by5pZCArICcvcGljdHVyZT9hY2Nlc3NfdG9rZW49JyArIHRva2VuOwoJCQkJfQoKCQkJCWlmIChkLnR5cGUgPT09ICdhbGJ1bScpIHsKCQkJCQlkLmZpbGVzID0gZC5waG90b3MgPSBiYXNlICsgZC5pZCArICcvcGhvdG9zJzsKCQkJCX0KCgkJCQlpZiAoZC5jYW5fdXBsb2FkKSB7CgkJCQkJZC51cGxvYWRfbG9jYXRpb24gPSBiYXNlICsgZC5pZCArICcvcGhvdG9zJzsKCQkJCX0KCQkJfSk7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCn0pKGhlbGxvKTsKCihmdW5jdGlvbihoZWxsbykgewoKCWhlbGxvLmluaXQoewoKCQlmbGlja3I6IHsKCgkJCW5hbWU6ICdGbGlja3InLAoKCQkJLy8gRW5zdXJlIHRoYXQgeW91IGRlZmluZSBhbiBvYXV0aF9wcm94eQoJCQlvYXV0aDogewoJCQkJdmVyc2lvbjogJzEuMGEnLAoJCQkJYXV0aDogJ2h0dHBzOi8vd3d3LmZsaWNrci5jb20vc2VydmljZXMvb2F1dGgvYXV0aG9yaXplP3Blcm1zPXJlYWQnLAoJCQkJcmVxdWVzdDogJ2h0dHBzOi8vd3d3LmZsaWNrci5jb20vc2VydmljZXMvb2F1dGgvcmVxdWVzdF90b2tlbicsCgkJCQl0b2tlbjogJ2h0dHBzOi8vd3d3LmZsaWNrci5jb20vc2VydmljZXMvb2F1dGgvYWNjZXNzX3Rva2VuJwoJCQl9LAoKCQkJLy8gQVBJIGJhc2UgVVJMCgkJCWJhc2U6ICdodHRwczovL2FwaS5mbGlja3IuY29tL3NlcnZpY2VzL3Jlc3QnLAoKCQkJLy8gTWFwIEdFVCByZXNxdWVzdHMKCQkJZ2V0OiB7CgkJCQltZTogc2lnbignZmxpY2tyLnBlb3BsZS5nZXRJbmZvJyksCgkJCQknbWUvZnJpZW5kcyc6IHNpZ24oJ2ZsaWNrci5jb250YWN0cy5nZXRMaXN0Jywge3Blcl9wYWdlOidAe2xpbWl0fDUwfSd9KSwKCQkJCSdtZS9mb2xsb3dpbmcnOiBzaWduKCdmbGlja3IuY29udGFjdHMuZ2V0TGlzdCcsIHtwZXJfcGFnZTonQHtsaW1pdHw1MH0nfSksCgkJCQknbWUvZm9sbG93ZXJzJzogc2lnbignZmxpY2tyLmNvbnRhY3RzLmdldExpc3QnLCB7cGVyX3BhZ2U6J0B7bGltaXR8NTB9J30pLAoJCQkJJ21lL2FsYnVtcyc6IHNpZ24oJ2ZsaWNrci5waG90b3NldHMuZ2V0TGlzdCcsIHtwZXJfcGFnZTonQHtsaW1pdHw1MH0nfSksCgkJCQknbWUvYWxidW0nOiBzaWduKCdmbGlja3IucGhvdG9zZXRzLmdldFBob3RvcycsIHtwaG90b3NldF9pZDogJ0B7aWR9J30pLAoJCQkJJ21lL3Bob3Rvcyc6IHNpZ24oJ2ZsaWNrci5wZW9wbGUuZ2V0UGhvdG9zJywge3Blcl9wYWdlOidAe2xpbWl0fDUwfSd9KQoJCQl9LAoKCQkJd3JhcDogewoJCQkJbWU6IGZ1bmN0aW9uKG8pIHsKCQkJCQlmb3JtYXRFcnJvcihvKTsKCQkJCQlvID0gY2hlY2tSZXNwb25zZShvLCAncGVyc29uJyk7CgkJCQkJaWYgKG8uaWQpIHsKCQkJCQkJaWYgKG8ucmVhbG5hbWUpIHsKCQkJCQkJCW8ubmFtZSA9IG8ucmVhbG5hbWUuX2NvbnRlbnQ7CgkJCQkJCQl2YXIgbSA9IG8ubmFtZS5zcGxpdCgnICcpOwoJCQkJCQkJby5maXJzdF9uYW1lID0gbS5zaGlmdCgpOwoJCQkJCQkJby5sYXN0X25hbWUgPSBtLmpvaW4oJyAnKTsKCQkJCQkJfQoKCQkJCQkJby50aHVtYm5haWwgPSBnZXRCdWRkeUljb24obywgJ2wnKTsKCQkJCQkJby5waWN0dXJlID0gZ2V0QnVkZHlJY29uKG8sICdsJyk7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ21lL2ZyaWVuZHMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2ZvbGxvd2Vycyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvZm9sbG93aW5nJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9hbGJ1bXMnOiBmdW5jdGlvbihvKSB7CgkJCQkJZm9ybWF0RXJyb3Iobyk7CgkJCQkJbyA9IGNoZWNrUmVzcG9uc2UobywgJ3Bob3Rvc2V0cycpOwoJCQkJCXBhZ2luZyhvKTsKCQkJCQlpZiAoby5waG90b3NldCkgewoJCQkJCQlvLmRhdGEgPSBvLnBob3Rvc2V0OwoJCQkJCQlvLmRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpdGVtLm5hbWUgPSBpdGVtLnRpdGxlLl9jb250ZW50OwoJCQkJCQkJaXRlbS5waG90b3MgPSAnaHR0cHM6Ly9hcGkuZmxpY2tyLmNvbS9zZXJ2aWNlcy9yZXN0JyArIGdldEFwaVVybCgnZmxpY2tyLnBob3Rvc2V0cy5nZXRQaG90b3MnLCB7cGhvdG9zZXRfaWQ6IGl0ZW0uaWR9LCB0cnVlKTsKCQkJCQkJfSk7CgoJCQkJCQlkZWxldGUgby5waG90b3NldDsKCQkJCQl9CgoJCQkJCXJldHVybiBvOwoJCQkJfSwKCgkJCQknbWUvcGhvdG9zJzogZnVuY3Rpb24obykgewoJCQkJCWZvcm1hdEVycm9yKG8pOwoJCQkJCXJldHVybiBmb3JtYXRQaG90b3Mobyk7CgkJCQl9LAoKCQkJCSdkZWZhdWx0JzogZnVuY3Rpb24obykgewoJCQkJCWZvcm1hdEVycm9yKG8pOwoJCQkJCXJldHVybiBmb3JtYXRQaG90b3Mobyk7CgkJCQl9CgkJCX0sCgoJCQl4aHI6IGZhbHNlLAoKCQkJanNvbnA6IGZ1bmN0aW9uKHAsIHFzKSB7CgkJCQlpZiAocC5tZXRob2QgPT0gJ2dldCcpIHsKCQkJCQlkZWxldGUgcXMuY2FsbGJhY2s7CgkJCQkJcXMuanNvbmNhbGxiYWNrID0gcC5jYWxsYmFja0lEOwoJCQkJfQoJCQl9CgkJfQoJfSk7CgoJZnVuY3Rpb24gZ2V0QXBpVXJsKG1ldGhvZCwgZXh0cmFQYXJhbXMsIHNraXBOZXR3b3JrKSB7CgkJdmFyIHVybCA9ICgoc2tpcE5ldHdvcmspID8gJycgOiAnZmxpY2tyOicpICsKCQkJJz9tZXRob2Q9JyArIG1ldGhvZCArCgkJCScmYXBpX2tleT0nICsgaGVsbG8uc2VydmljZXMuZmxpY2tyLmlkICsKCQkJJyZmb3JtYXQ9anNvbic7CgkJZm9yICh2YXIgcGFyYW0gaW4gZXh0cmFQYXJhbXMpIHsKCQkJaWYgKGV4dHJhUGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtKSkgewoJCQkJdXJsICs9ICcmJyArIHBhcmFtICsgJz0nICsgZXh0cmFQYXJhbXNbcGFyYW1dOwoJCQl9CgkJfQoKCQlyZXR1cm4gdXJsOwoJfQoKCS8vIFRoaXMgaXMgbm90IGV4YWN0bHkgbmVhdCBidXQgYXZvaWQgdG8gY2FsbAoJLy8gVGhlIG1ldGhvZCAnZmxpY2tyLnRlc3QubG9naW4nIGZvciBlYWNoIGFwaSBjYWxsCgoJZnVuY3Rpb24gd2l0aFVzZXIoY2IpIHsKCQl2YXIgYXV0aCA9IGhlbGxvLmdldEF1dGhSZXNwb25zZSgnZmxpY2tyJyk7CgkJY2IoYXV0aCAmJiBhdXRoLnVzZXJfbnNpZCA/IGF1dGgudXNlcl9uc2lkIDogbnVsbCk7Cgl9CgoJZnVuY3Rpb24gc2lnbih1cmwsIHBhcmFtcykgewoJCWlmICghcGFyYW1zKSB7CgkJCXBhcmFtcyA9IHt9OwoJCX0KCgkJcmV0dXJuIGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7CgkJCXdpdGhVc2VyKGZ1bmN0aW9uKHVzZXJJZCkgewoJCQkJcGFyYW1zLnVzZXJfaWQgPSB1c2VySWQ7CgkJCQljYWxsYmFjayhnZXRBcGlVcmwodXJsLCBwYXJhbXMsIHRydWUpKTsKCQkJfSk7CgkJfTsKCX0KCglmdW5jdGlvbiBnZXRCdWRkeUljb24ocHJvZmlsZSwgc2l6ZSkgewoJCXZhciB1cmwgPSAnaHR0cHM6Ly93d3cuZmxpY2tyLmNvbS9pbWFnZXMvYnVkZHlpY29uLmdpZic7CgkJaWYgKHByb2ZpbGUubnNpZCAmJiBwcm9maWxlLmljb25zZXJ2ZXIgJiYgcHJvZmlsZS5pY29uZmFybSkgewoJCQl1cmwgPSAnaHR0cHM6Ly9mYXJtJyArIHByb2ZpbGUuaWNvbmZhcm0gKyAnLnN0YXRpY2ZsaWNrci5jb20vJyArCgkJCQlwcm9maWxlLmljb25zZXJ2ZXIgKyAnLycgKwoJCQkJJ2J1ZGR5aWNvbnMvJyArIHByb2ZpbGUubnNpZCArCgkJCQkoKHNpemUpID8gJ18nICsgc2l6ZSA6ICcnKSArICcuanBnJzsKCQl9CgoJCXJldHVybiB1cmw7Cgl9CgoJLy8gU2VlOiBodHRwczovL3d3dy5mbGlja3IuY29tL3NlcnZpY2VzL2FwaS9taXNjLnVybHMuaHRtbAoJZnVuY3Rpb24gY3JlYXRlUGhvdG9VcmwoaWQsIGZhcm0sIHNlcnZlciwgc2VjcmV0LCBzaXplKSB7CgkJc2l6ZSA9IChzaXplKSA/ICdfJyArIHNpemUgOiAnJzsKCQlyZXR1cm4gJ2h0dHBzOi8vZmFybScgKyBmYXJtICsgJy5zdGF0aWNmbGlja3IuY29tLycgKyBzZXJ2ZXIgKyAnLycgKyBpZCArICdfJyArIHNlY3JldCArIHNpemUgKyAnLmpwZyc7Cgl9CgoJZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RXJyb3IobykgewoJCWlmIChvICYmIG8uc3RhdCAmJiBvLnN0YXQudG9Mb3dlckNhc2UoKSAhPSAnb2snKSB7CgkJCW8uZXJyb3IgPSB7CgkJCQljb2RlOiAnaW52YWxpZF9yZXF1ZXN0JywKCQkJCW1lc3NhZ2U6IG8ubWVzc2FnZQoJCQl9OwoJCX0KCX0KCglmdW5jdGlvbiBmb3JtYXRQaG90b3MobykgewoJCWlmIChvLnBob3Rvc2V0IHx8IG8ucGhvdG9zKSB7CgkJCXZhciBzZXQgPSAoJ3Bob3Rvc2V0JyBpbiBvKSA/ICdwaG90b3NldCcgOiAncGhvdG9zJzsKCQkJbyA9IGNoZWNrUmVzcG9uc2Uobywgc2V0KTsKCQkJcGFnaW5nKG8pOwoJCQlvLmRhdGEgPSBvLnBob3RvOwoJCQlkZWxldGUgby5waG90bzsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBvLmRhdGEubGVuZ3RoOyBpKyspIHsKCQkJCXZhciBwaG90byA9IG8uZGF0YVtpXTsKCQkJCXBob3RvLm5hbWUgPSBwaG90by50aXRsZTsKCQkJCXBob3RvLnBpY3R1cmUgPSBjcmVhdGVQaG90b1VybChwaG90by5pZCwgcGhvdG8uZmFybSwgcGhvdG8uc2VydmVyLCBwaG90by5zZWNyZXQsICcnKTsKCQkJCXBob3RvLnBpY3R1cmVzID0gY3JlYXRlUGljdHVyZXMocGhvdG8uaWQsIHBob3RvLmZhcm0sIHBob3RvLnNlcnZlciwgcGhvdG8uc2VjcmV0KTsKCQkJCXBob3RvLnNvdXJjZSA9IGNyZWF0ZVBob3RvVXJsKHBob3RvLmlkLCBwaG90by5mYXJtLCBwaG90by5zZXJ2ZXIsIHBob3RvLnNlY3JldCwgJ2InKTsKCQkJCXBob3RvLnRodW1ibmFpbCA9IGNyZWF0ZVBob3RvVXJsKHBob3RvLmlkLCBwaG90by5mYXJtLCBwaG90by5zZXJ2ZXIsIHBob3RvLnNlY3JldCwgJ20nKTsKCQkJfQoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJLy8gU2VlOiBodHRwczovL3d3dy5mbGlja3IuY29tL3NlcnZpY2VzL2FwaS9taXNjLnVybHMuaHRtbAoJZnVuY3Rpb24gY3JlYXRlUGljdHVyZXMoaWQsIGZhcm0sIHNlcnZlciwgc2VjcmV0KSB7CgoJCXZhciBOT19MSU1JVCA9IDIwNDg7CgkJdmFyIHNpemVzID0gWwoJCQl7aWQ6ICd0JywgbWF4OiAxMDB9LAoJCQl7aWQ6ICdtJywgbWF4OiAyNDB9LAoJCQl7aWQ6ICduJywgbWF4OiAzMjB9LAoJCQl7aWQ6ICcnLCBtYXg6IDUwMH0sCgkJCXtpZDogJ3onLCBtYXg6IDY0MH0sCgkJCXtpZDogJ2MnLCBtYXg6IDgwMH0sCgkJCXtpZDogJ2InLCBtYXg6IDEwMjR9LAoJCQl7aWQ6ICdoJywgbWF4OiAxNjAwfSwKCQkJe2lkOiAnaycsIG1heDogMjA0OH0sCgkJCXtpZDogJ28nLCBtYXg6IE5PX0xJTUlUfQoJCV07CgoJCXJldHVybiBzaXplcy5tYXAoZnVuY3Rpb24oc2l6ZSkgewoJCQlyZXR1cm4gewoJCQkJc291cmNlOiBjcmVhdGVQaG90b1VybChpZCwgZmFybSwgc2VydmVyLCBzZWNyZXQsIHNpemUuaWQpLAoKCQkJCS8vIE5vdGU6IHRoaXMgaXMgYSBndWVzcyB0aGF0J3MgYWxtb3N0IGNlcnRhaW4gdG8gYmUgd3JvbmcgKHVubGVzcyBzcXVhcmUgc291cmNlKQoJCQkJd2lkdGg6IHNpemUubWF4LAoJCQkJaGVpZ2h0OiBzaXplLm1heAoJCQl9OwoJCX0pOwoJfQoKCWZ1bmN0aW9uIGNoZWNrUmVzcG9uc2Uobywga2V5KSB7CgoJCWlmIChrZXkgaW4gbykgewoJCQlvID0gb1trZXldOwoJCX0KCQllbHNlIGlmICghKCdlcnJvcicgaW4gbykpIHsKCQkJby5lcnJvciA9IHsKCQkJCWNvZGU6ICdpbnZhbGlkX3JlcXVlc3QnLAoJCQkJbWVzc2FnZTogby5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gZ2V0IGRhdGEgZnJvbSBGbGlja3InCgkJCX07CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRGcmllbmRzKG8pIHsKCQlmb3JtYXRFcnJvcihvKTsKCQlpZiAoby5jb250YWN0cykgewoJCQlvID0gY2hlY2tSZXNwb25zZShvLCAnY29udGFjdHMnKTsKCQkJcGFnaW5nKG8pOwoJCQlvLmRhdGEgPSBvLmNvbnRhY3Q7CgkJCWRlbGV0ZSBvLmNvbnRhY3Q7CgkJCWZvciAodmFyIGkgPSAwOyBpIDwgby5kYXRhLmxlbmd0aDsgaSsrKSB7CgkJCQl2YXIgaXRlbSA9IG8uZGF0YVtpXTsKCQkJCWl0ZW0uaWQgPSBpdGVtLm5zaWQ7CgkJCQlpdGVtLm5hbWUgPSBpdGVtLnJlYWxuYW1lIHx8IGl0ZW0udXNlcm5hbWU7CgkJCQlpdGVtLnRodW1ibmFpbCA9IGdldEJ1ZGR5SWNvbihpdGVtLCAnbScpOwoJCQl9CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBwYWdpbmcocmVzKSB7CgkJaWYgKHJlcy5wYWdlICYmIHJlcy5wYWdlcyAmJiByZXMucGFnZSAhPT0gcmVzLnBhZ2VzKSB7CgkJCXJlcy5wYWdpbmcgPSB7CgkJCQluZXh0OiAnP3BhZ2U9JyArICgrK3Jlcy5wYWdlKQoJCQl9OwoJCX0KCX0KCn0pKGhlbGxvKTsKCihmdW5jdGlvbihoZWxsbykgewoKCWhlbGxvLmluaXQoewoKCQlmb3Vyc3F1YXJlOiB7CgoJCQluYW1lOiAnRm91cnNxdWFyZScsCgoJCQlvYXV0aDogewoJCQkJLy8gU2VlOiBodHRwczovL2RldmVsb3Blci5mb3Vyc3F1YXJlLmNvbS9vdmVydmlldy9hdXRoCgkJCQl2ZXJzaW9uOiAyLAoJCQkJYXV0aDogJ2h0dHBzOi8vZm91cnNxdWFyZS5jb20vb2F1dGgyL2F1dGhlbnRpY2F0ZScsCgkJCQlncmFudDogJ2h0dHBzOi8vZm91cnNxdWFyZS5jb20vb2F1dGgyL2FjY2Vzc190b2tlbicKCQkJfSwKCgkJCS8vIFJlZnJlc2ggdGhlIGFjY2Vzc190b2tlbiBvbmNlIGV4cGlyZWQKCQkJcmVmcmVzaDogdHJ1ZSwKCgkJCWJhc2U6ICdodHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbS92Mi8nLAoKCQkJZ2V0OiB7CgkJCQltZTogJ3VzZXJzL3NlbGYnLAoJCQkJJ21lL2ZyaWVuZHMnOiAndXNlcnMvc2VsZi9mcmllbmRzJywKCQkJCSdtZS9mb2xsb3dlcnMnOiAndXNlcnMvc2VsZi9mcmllbmRzJywKCQkJCSdtZS9mb2xsb3dpbmcnOiAndXNlcnMvc2VsZi9mcmllbmRzJwoJCQl9LAoKCQkJd3JhcDogewoJCQkJbWU6IGZ1bmN0aW9uKG8pIHsKCQkJCQlmb3JtYXRFcnJvcihvKTsKCQkJCQlpZiAobyAmJiBvLnJlc3BvbnNlKSB7CgkJCQkJCW8gPSBvLnJlc3BvbnNlLnVzZXI7CgkJCQkJCWZvcm1hdFVzZXIobyk7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ2RlZmF1bHQnOiBmdW5jdGlvbihvKSB7CgkJCQkJZm9ybWF0RXJyb3Iobyk7CgoJCQkJCS8vIEZvcm1hdCBmcmllbmRzCgkJCQkJaWYgKG8gJiYgJ3Jlc3BvbnNlJyBpbiBvICYmICdmcmllbmRzJyBpbiBvLnJlc3BvbnNlICYmICdpdGVtcycgaW4gby5yZXNwb25zZS5mcmllbmRzKSB7CgkJCQkJCW8uZGF0YSA9IG8ucmVzcG9uc2UuZnJpZW5kcy5pdGVtczsKCQkJCQkJby5kYXRhLmZvckVhY2goZm9ybWF0VXNlcik7CgkJCQkJCWRlbGV0ZSBvLnJlc3BvbnNlOwoJCQkJCX0KCgkJCQkJcmV0dXJuIG87CgkJCQl9CgkJCX0sCgoJCQl4aHI6IGZvcm1hdFJlcXVlc3QsCgkJCWpzb25wOiBmb3JtYXRSZXF1ZXN0CgkJfQoJfSk7CgoJZnVuY3Rpb24gZm9ybWF0RXJyb3IobykgewoJCWlmIChvLm1ldGEgJiYgKG8ubWV0YS5jb2RlID09PSA0MDAgfHwgby5tZXRhLmNvZGUgPT09IDQwMSkpIHsKCQkJby5lcnJvciA9IHsKCQkJCWNvZGU6ICdhY2Nlc3NfZGVuaWVkJywKCQkJCW1lc3NhZ2U6IG8ubWV0YS5lcnJvckRldGFpbAoJCQl9OwoJCX0KCX0KCglmdW5jdGlvbiBmb3JtYXRVc2VyKG8pIHsKCQlpZiAobyAmJiBvLmlkKSB7CgkJCW8udGh1bWJuYWlsID0gby5waG90by5wcmVmaXggKyAnMTAweDEwMCcgKyBvLnBob3RvLnN1ZmZpeDsKCQkJby5uYW1lID0gby5maXJzdE5hbWUgKyAnICcgKyBvLmxhc3ROYW1lOwoJCQlvLmZpcnN0X25hbWUgPSBvLmZpcnN0TmFtZTsKCQkJby5sYXN0X25hbWUgPSBvLmxhc3ROYW1lOwoJCQlpZiAoby5jb250YWN0KSB7CgkJCQlpZiAoby5jb250YWN0LmVtYWlsKSB7CgkJCQkJby5lbWFpbCA9IG8uY29udGFjdC5lbWFpbDsKCQkJCX0KCQkJfQoJCX0KCX0KCglmdW5jdGlvbiBmb3JtYXRSZXF1ZXN0KHAsIHFzKSB7CgkJdmFyIHRva2VuID0gcXMuYWNjZXNzX3Rva2VuOwoJCWRlbGV0ZSBxcy5hY2Nlc3NfdG9rZW47CgkJcXMub2F1dGhfdG9rZW4gPSB0b2tlbjsKCQlxcy52ID0gMjAxMjExMjU7CgkJcmV0dXJuIHRydWU7Cgl9Cgp9KShoZWxsbyk7CgooZnVuY3Rpb24oaGVsbG8pIHsKCgloZWxsby5pbml0KHsKCgkJZ2l0aHViOiB7CgoJCQluYW1lOiAnR2l0SHViJywKCgkJCW9hdXRoOiB7CgkJCQl2ZXJzaW9uOiAyLAoJCQkJYXV0aDogJ2h0dHBzOi8vZ2l0aHViLmNvbS9sb2dpbi9vYXV0aC9hdXRob3JpemUnLAoJCQkJZ3JhbnQ6ICdodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYWNjZXNzX3Rva2VuJywKCQkJCXJlc3BvbnNlX3R5cGU6ICdjb2RlJwoJCQl9LAoKCQkJc2NvcGU6IHsKCQkJCWVtYWlsOiAndXNlcjplbWFpbCcKCQkJfSwKCgkJCWJhc2U6ICdodHRwczovL2FwaS5naXRodWIuY29tLycsCgoJCQlnZXQ6IHsKCQkJCW1lOiAndXNlcicsCgkJCQknbWUvZnJpZW5kcyc6ICd1c2VyL2ZvbGxvd2luZz9wZXJfcGFnZT1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2ZvbGxvd2luZyc6ICd1c2VyL2ZvbGxvd2luZz9wZXJfcGFnZT1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2ZvbGxvd2Vycyc6ICd1c2VyL2ZvbGxvd2Vycz9wZXJfcGFnZT1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2xpa2UnOiAndXNlci9zdGFycmVkP3Blcl9wYWdlPUB7bGltaXR8MTAwfScKCQkJfSwKCgkJCXdyYXA6IHsKCQkJCW1lOiBmdW5jdGlvbihvLCBoZWFkZXJzKSB7CgoJCQkJCWZvcm1hdEVycm9yKG8sIGhlYWRlcnMpOwoJCQkJCWZvcm1hdFVzZXIobyk7CgoJCQkJCXJldHVybiBvOwoJCQkJfSwKCgkJCQknZGVmYXVsdCc6IGZ1bmN0aW9uKG8sIGhlYWRlcnMsIHJlcSkgewoKCQkJCQlmb3JtYXRFcnJvcihvLCBoZWFkZXJzKTsKCgkJCQkJaWYgKEFycmF5LmlzQXJyYXkobykpIHsKCQkJCQkJbyA9IHtkYXRhOm99OwoJCQkJCX0KCgkJCQkJaWYgKG8uZGF0YSkgewoJCQkJCQlwYWdpbmcobywgaGVhZGVycywgcmVxKTsKCQkJCQkJby5kYXRhLmZvckVhY2goZm9ybWF0VXNlcik7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0KCQkJfSwKCgkJCXhocjogZnVuY3Rpb24ocCkgewoKCQkJCWlmIChwLm1ldGhvZCAhPT0gJ2dldCcgJiYgcC5kYXRhKSB7CgoJCQkJCS8vIFNlcmlhbGl6ZSBwYXlsb2FkIGFzIEpTT04KCQkJCQlwLmhlYWRlcnMgPSBwLmhlYWRlcnMgfHwge307CgkJCQkJcC5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJzsKCQkJCQlpZiAodHlwZW9mIChwLmRhdGEpID09PSAnb2JqZWN0JykgewoJCQkJCQlwLmRhdGEgPSBKU09OLnN0cmluZ2lmeShwLmRhdGEpOwoJCQkJCX0KCQkJCX0KCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCX0KCX0pOwoKCWZ1bmN0aW9uIGZvcm1hdEVycm9yKG8sIGhlYWRlcnMpIHsKCQl2YXIgY29kZSA9IGhlYWRlcnMgPyBoZWFkZXJzLnN0YXR1c0NvZGUgOiAobyAmJiAnbWV0YScgaW4gbyAmJiAnc3RhdHVzJyBpbiBvLm1ldGEgJiYgby5tZXRhLnN0YXR1cyk7CgkJaWYgKChjb2RlID09PSA0MDEgfHwgY29kZSA9PT0gNDAzKSkgewoJCQlvLmVycm9yID0gewoJCQkJY29kZTogJ2FjY2Vzc19kZW5pZWQnLAoJCQkJbWVzc2FnZTogby5tZXNzYWdlIHx8IChvLmRhdGEgPyBvLmRhdGEubWVzc2FnZSA6ICdDb3VsZCBub3QgZ2V0IHJlc3BvbnNlJykKCQkJfTsKCQkJZGVsZXRlIG8ubWVzc2FnZTsKCQl9Cgl9CgoJZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7CgkJaWYgKG8uaWQpIHsKCQkJby50aHVtYm5haWwgPSBvLnBpY3R1cmUgPSBvLmF2YXRhcl91cmw7CgkJCW8ubmFtZSA9IG8ubG9naW47CgkJfQoJfQoKCWZ1bmN0aW9uIHBhZ2luZyhyZXMsIGhlYWRlcnMsIHJlcSkgewoJCWlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5sZW5ndGggJiYgaGVhZGVycyAmJiBoZWFkZXJzLkxpbmspIHsKCQkJdmFyIG5leHQgPSBoZWFkZXJzLkxpbmsubWF0Y2goLzwoLio/KT47XHMqcmVsPVwibmV4dFwiLyk7CgkJCWlmIChuZXh0KSB7CgkJCQlyZXMucGFnaW5nID0gewoJCQkJCW5leHQ6IG5leHRbMV0KCQkJCX07CgkJCX0KCQl9Cgl9Cgp9KShoZWxsbyk7CgooZnVuY3Rpb24oaGVsbG8pIHsKCgl2YXIgY29udGFjdHNVcmwgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9tOC9mZWVkcy9jb250YWN0cy9kZWZhdWx0L2Z1bGw/dj0zLjAmYWx0PWpzb24mbWF4LXJlc3VsdHM9QHtsaW1pdHwxMDAwfSZzdGFydC1pbmRleD1Ae3N0YXJ0fDF9JzsKCgloZWxsby5pbml0KHsKCgkJZ29vZ2xlOiB7CgoJCQluYW1lOiAnR29vZ2xlIFBsdXMnLAoKCQkJLy8gU2VlOiBodHRwOi8vY29kZS5nb29nbGUuY29tL2FwaXMvYWNjb3VudHMvZG9jcy9PQXV0aDJVc2VyQWdlbnQuaHRtbAoJCQlvYXV0aDogewoJCQkJdmVyc2lvbjogMiwKCQkJCWF1dGg6ICdodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aCcsCgkJCQlncmFudDogJ2h0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi90b2tlbicKCQkJfSwKCgkJCS8vIEF1dGhvcml6YXRpb24gc2NvcGVzCgkJCXNjb3BlOiB7CgkJCQliYXNpYzogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvcGx1cy5tZSBwcm9maWxlJywKCQkJCWVtYWlsOiAnZW1haWwnLAoJCQkJYmlydGhkYXk6ICcnLAoJCQkJZXZlbnRzOiAnJywKCQkJCXBob3RvczogJ2h0dHBzOi8vcGljYXNhd2ViLmdvb2dsZS5jb20vZGF0YS8nLAoJCQkJdmlkZW9zOiAnaHR0cDovL2dkYXRhLnlvdXR1YmUuY29tJywKCQkJCWZyaWVuZHM6ICdodHRwczovL3d3dy5nb29nbGUuY29tL204L2ZlZWRzLCBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3BsdXMubG9naW4nLAoJCQkJZmlsZXM6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlLnJlYWRvbmx5JywKCQkJCXB1Ymxpc2g6ICcnLAoJCQkJcHVibGlzaF9maWxlczogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmUnLAoJCQkJc2hhcmU6ICcnLAoJCQkJY3JlYXRlX2V2ZW50OiAnJywKCQkJCW9mZmxpbmVfYWNjZXNzOiAnJwoJCQl9LAoKCQkJc2NvcGVfZGVsaW06ICcgJywKCgkJCWxvZ2luOiBmdW5jdGlvbihwKSB7CgkJCQlpZiAocC5xcy5kaXNwbGF5ID09PSAnbm9uZScpIHsKCQkJCQkvLyBHb29nbGUgZG9lc24ndCBsaWtlIGRpc3BsYXk9bm9uZQoJCQkJCXAucXMuZGlzcGxheSA9ICcnOwoJCQkJfQoKCQkJCWlmIChwLnFzLnJlc3BvbnNlX3R5cGUgPT09ICdjb2RlJykgewoKCQkJCQkvLyBMZXQncyBzZXQgdGhpcyB0byBhbiBvZmZsaW5lIGFjY2VzcyB0byByZXR1cm4gYSByZWZyZXNoX3Rva2VuCgkJCQkJcC5xcy5hY2Nlc3NfdHlwZSA9ICdvZmZsaW5lJzsKCQkJCX0KCgkJCQkvLyBSZWF1dGhlbnRpY2F0ZQoJCQkJLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vaWRlbnRpdHkvcHJvdG9jb2xzLwoJCQkJaWYgKHAub3B0aW9ucy5mb3JjZSkgewoJCQkJCXAucXMuYXBwcm92YWxfcHJvbXB0ID0gJ2ZvcmNlJzsKCQkJCX0KCQkJfSwKCgkJCS8vIEFQSSBiYXNlIFVSSQoJCQliYXNlOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vJywKCgkJCS8vIE1hcCBHRVQgcmVxdWVzdHMKCQkJZ2V0OiB7CgkJCQltZTogJ3BsdXMvdjEvcGVvcGxlL21lJywKCgkJCQkvLyBEZXByZWNhdGVkIFNlcHQgMSwgMjAxNAoJCQkJLy8nbWUnOiAnb2F1dGgyL3YxL3VzZXJpbmZvP2FsdD1qc29uJywKCgkJCQkvLyBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tLysvYXBpL2xhdGVzdC9wZW9wbGUvbGlzdAoJCQkJJ21lL2ZyaWVuZHMnOiAncGx1cy92MS9wZW9wbGUvbWUvcGVvcGxlL3Zpc2libGU/bWF4UmVzdWx0cz1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2ZvbGxvd2luZyc6IGNvbnRhY3RzVXJsLAoJCQkJJ21lL2ZvbGxvd2Vycyc6IGNvbnRhY3RzVXJsLAoJCQkJJ21lL2NvbnRhY3RzJzogY29udGFjdHNVcmwsCgkJCQknbWUvc2hhcmUnOiAncGx1cy92MS9wZW9wbGUvbWUvYWN0aXZpdGllcy9wdWJsaWM/bWF4UmVzdWx0cz1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2ZlZWQnOiAncGx1cy92MS9wZW9wbGUvbWUvYWN0aXZpdGllcy9wdWJsaWM/bWF4UmVzdWx0cz1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2FsYnVtcyc6ICdodHRwczovL3BpY2FzYXdlYi5nb29nbGUuY29tL2RhdGEvZmVlZC9hcGkvdXNlci9kZWZhdWx0P2FsdD1qc29uJm1heC1yZXN1bHRzPUB7bGltaXR8MTAwfSZzdGFydC1pbmRleD1Ae3N0YXJ0fDF9JywKCQkJCSdtZS9hbGJ1bSc6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7CgkJCQkJdmFyIGtleSA9IHAucXVlcnkuaWQ7CgkJCQkJZGVsZXRlIHAucXVlcnkuaWQ7CgkJCQkJY2FsbGJhY2soa2V5LnJlcGxhY2UoJy9lbnRyeS8nLCAnL2ZlZWQvJykpOwoJCQkJfSwKCgkJCQknbWUvcGhvdG9zJzogJ2h0dHBzOi8vcGljYXNhd2ViLmdvb2dsZS5jb20vZGF0YS9mZWVkL2FwaS91c2VyL2RlZmF1bHQ/YWx0PWpzb24ma2luZD1waG90byZtYXgtcmVzdWx0cz1Ae2xpbWl0fDEwMH0mc3RhcnQtaW5kZXg9QHtzdGFydHwxfScsCgoJCQkJLy8gU2VlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9kcml2ZS92Mi9yZWZlcmVuY2UvZmlsZXMvbGlzdAoJCQkJJ21lL2ZpbGUnOiAnZHJpdmUvdjIvZmlsZXMvQHtpZH0nLAoJCQkJJ21lL2ZpbGVzJzogJ2RyaXZlL3YyL2ZpbGVzP3E9JTIyQHtwYXJlbnR8cm9vdH0lMjIraW4rcGFyZW50cythbmQrdHJhc2hlZD1mYWxzZSZtYXhSZXN1bHRzPUB7bGltaXR8MTAwfScsCgoJCQkJLy8gU2VlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9kcml2ZS92Mi9yZWZlcmVuY2UvZmlsZXMvbGlzdAoJCQkJJ21lL2ZvbGRlcnMnOiAnZHJpdmUvdjIvZmlsZXM/cT0lMjJAe2lkfHJvb3R9JTIyK2luK3BhcmVudHMrYW5kK21pbWVUeXBlKz0rJTIyYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlciUyMithbmQrdHJhc2hlZD1mYWxzZSZtYXhSZXN1bHRzPUB7bGltaXR8MTAwfScsCgoJCQkJLy8gU2VlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9kcml2ZS92Mi9yZWZlcmVuY2UvZmlsZXMvbGlzdAoJCQkJJ21lL2ZvbGRlcic6ICdkcml2ZS92Mi9maWxlcz9xPSUyMkB7aWR8cm9vdH0lMjIraW4rcGFyZW50cythbmQrdHJhc2hlZD1mYWxzZSZtYXhSZXN1bHRzPUB7bGltaXR8MTAwfScKCQkJfSwKCgkJCS8vIE1hcCBQT1NUIHJlcXVlc3RzCgkJCXBvc3Q6IHsKCgkJCQkvLyBHb29nbGUgRHJpdmUKCQkJCSdtZS9maWxlcyc6IHVwbG9hZERyaXZlLAoJCQkJJ21lL2ZvbGRlcnMnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykgewoJCQkJCXAuZGF0YSA9IHsKCQkJCQkJdGl0bGU6IHAuZGF0YS5uYW1lLAoJCQkJCQlwYXJlbnRzOiBbe2lkOiBwLmRhdGEucGFyZW50IHx8ICdyb290J31dLAoJCQkJCQltaW1lVHlwZTogJ2FwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5mb2xkZXInCgkJCQkJfTsKCQkJCQljYWxsYmFjaygnZHJpdmUvdjIvZmlsZXMnKTsKCQkJCX0KCQkJfSwKCgkJCS8vIE1hcCBQVVQgcmVxdWVzdHMKCQkJcHV0OiB7CgkJCQknbWUvZmlsZXMnOiB1cGxvYWREcml2ZQoJCQl9LAoKCQkJLy8gTWFwIERFTEVURSByZXF1ZXN0cwoJCQlkZWw6IHsKCQkJCSdtZS9maWxlcyc6ICdkcml2ZS92Mi9maWxlcy9Ae2lkfScsCgkJCQknbWUvZm9sZGVyJzogJ2RyaXZlL3YyL2ZpbGVzL0B7aWR9JwoJCQl9LAoKCQkJLy8gTWFwIFBBVENIIHJlcXVlc3RzCgkJCXBhdGNoOiB7CgkJCQknbWUvZmlsZSc6ICdkcml2ZS92Mi9maWxlcy9Ae2lkfScKCQkJfSwKCgkJCXdyYXA6IHsKCQkJCW1lOiBmdW5jdGlvbihvKSB7CgkJCQkJaWYgKG8uaWQpIHsKCQkJCQkJby5sYXN0X25hbWUgPSBvLmZhbWlseV9uYW1lIHx8IChvLm5hbWUgPyBvLm5hbWUuZmFtaWx5TmFtZSA6IG51bGwpOwoJCQkJCQlvLmZpcnN0X25hbWUgPSBvLmdpdmVuX25hbWUgfHwgKG8ubmFtZSA/IG8ubmFtZS5naXZlbk5hbWUgOiBudWxsKTsKCgkJCQkJCWlmIChvLmVtYWlscyAmJiBvLmVtYWlscy5sZW5ndGgpIHsKCQkJCQkJCW8uZW1haWwgPSBvLmVtYWlsc1swXS52YWx1ZTsKCQkJCQkJfQoKCQkJCQkJZm9ybWF0UGVyc29uKG8pOwoJCQkJCX0KCgkJCQkJcmV0dXJuIG87CgkJCQl9LAoKCQkJCSdtZS9mcmllbmRzJzogZnVuY3Rpb24obykgewoJCQkJCWlmIChvLml0ZW1zKSB7CgkJCQkJCXBhZ2luZyhvKTsKCQkJCQkJby5kYXRhID0gby5pdGVtczsKCQkJCQkJby5kYXRhLmZvckVhY2goZm9ybWF0UGVyc29uKTsKCQkJCQkJZGVsZXRlIG8uaXRlbXM7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ21lL2NvbnRhY3RzJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9mb2xsb3dlcnMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2ZvbGxvd2luZyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvc2hhcmUnOiBmb3JtYXRGZWVkLAoJCQkJJ21lL2ZlZWQnOiBmb3JtYXRGZWVkLAoJCQkJJ21lL2FsYnVtcyc6IGdFbnRyeSwKCQkJCSdtZS9waG90b3MnOiBmb3JtYXRQaG90b3MsCgkJCQknZGVmYXVsdCc6IGdFbnRyeQoJCQl9LAoKCQkJeGhyOiBmdW5jdGlvbihwKSB7CgoJCQkJaWYgKHAubWV0aG9kID09PSAncG9zdCcgfHwgcC5tZXRob2QgPT09ICdwdXQnKSB7CgkJCQkJdG9KU09OKHApOwoJCQkJfQoJCQkJZWxzZSBpZiAocC5tZXRob2QgPT09ICdwYXRjaCcpIHsKCQkJCQloZWxsby51dGlscy5leHRlbmQocC5xdWVyeSwgcC5kYXRhKTsKCQkJCQlwLmRhdGEgPSBudWxsOwoJCQkJfQoKCQkJCXJldHVybiB0cnVlOwoJCQl9LAoKCQkJLy8gRG9uJ3QgZXZlbiB0cnkgc3VibWl0dGluZyB2aWEgZm9ybS4KCQkJLy8gVGhpcyBtZWFucyBubyBQT1NUIG9wZXJhdGlvbnMgaW4gPD1JRTkKCQkJZm9ybTogZmFsc2UKCQl9Cgl9KTsKCglmdW5jdGlvbiB0b0ludChzKSB7CgkJcmV0dXJuIHBhcnNlSW50KHMsIDEwKTsKCX0KCglmdW5jdGlvbiBmb3JtYXRGZWVkKG8pIHsKCQlwYWdpbmcobyk7CgkJby5kYXRhID0gby5pdGVtczsKCQlkZWxldGUgby5pdGVtczsKCQlyZXR1cm4gbzsKCX0KCgkvLyBGb3JtYXQ6IGVuc3VyZSBlYWNoIHJlY29yZCBjb250YWlucyBhIG5hbWUsIGlkIGV0Yy4KCWZ1bmN0aW9uIGZvcm1hdEl0ZW0obykgewoJCWlmIChvLmVycm9yKSB7CgkJCXJldHVybjsKCQl9CgoJCWlmICghby5uYW1lKSB7CgkJCW8ubmFtZSA9IG8udGl0bGUgfHwgby5tZXNzYWdlOwoJCX0KCgkJaWYgKCFvLnBpY3R1cmUpIHsKCQkJby5waWN0dXJlID0gby50aHVtYm5haWxMaW5rOwoJCX0KCgkJaWYgKCFvLnRodW1ibmFpbCkgewoJCQlvLnRodW1ibmFpbCA9IG8udGh1bWJuYWlsTGluazsKCQl9CgoJCWlmIChvLm1pbWVUeXBlID09PSAnYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlcicpIHsKCQkJby50eXBlID0gJ2ZvbGRlcic7CgkJCW8uZmlsZXMgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjIvZmlsZXM/cT0lMjInICsgby5pZCArICclMjIraW4rcGFyZW50cyc7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRJbWFnZShpbWFnZSkgewoJCXJldHVybiB7CgkJCXNvdXJjZTogaW1hZ2UudXJsLAoJCQl3aWR0aDogaW1hZ2Uud2lkdGgsCgkJCWhlaWdodDogaW1hZ2UuaGVpZ2h0CgkJfTsKCX0KCglmdW5jdGlvbiBmb3JtYXRQaG90b3MobykgewoJCW8uZGF0YSA9IG8uZmVlZC5lbnRyeS5tYXAoZm9ybWF0RW50cnkpOwoJCWRlbGV0ZSBvLmZlZWQ7Cgl9CgoJLy8gR29vZ2xlIGhhcyBhIGhvcnJpYmxlIEpTT04gQVBJCglmdW5jdGlvbiBnRW50cnkobykgewoJCXBhZ2luZyhvKTsKCgkJaWYgKCdmZWVkJyBpbiBvICYmICdlbnRyeScgaW4gby5mZWVkKSB7CgkJCW8uZGF0YSA9IG8uZmVlZC5lbnRyeS5tYXAoZm9ybWF0RW50cnkpOwoJCQlkZWxldGUgby5mZWVkOwoJCX0KCgkJLy8gT2xkIHN0eWxlOiBQaWNhc2EsIGV0Yy4KCQllbHNlIGlmICgnZW50cnknIGluIG8pIHsKCQkJcmV0dXJuIGZvcm1hdEVudHJ5KG8uZW50cnkpOwoJCX0KCgkJLy8gTmV3IHN0eWxlOiBHb29nbGUgRHJpdmUgJiBQbHVzCgkJZWxzZSBpZiAoJ2l0ZW1zJyBpbiBvKSB7CgkJCW8uZGF0YSA9IG8uaXRlbXMubWFwKGZvcm1hdEl0ZW0pOwoJCQlkZWxldGUgby5pdGVtczsKCQl9CgkJZWxzZSB7CgkJCWZvcm1hdEl0ZW0obyk7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRQZXJzb24obykgewoJCW8ubmFtZSA9IG8uZGlzcGxheU5hbWUgfHwgby5uYW1lOwoJCW8ucGljdHVyZSA9IG8ucGljdHVyZSB8fCAoby5pbWFnZSA/IG8uaW1hZ2UudXJsIDogbnVsbCk7CgkJby50aHVtYm5haWwgPSBvLnBpY3R1cmU7Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvLCBoZWFkZXJzLCByZXEpIHsKCQlwYWdpbmcobyk7CgkJdmFyIHIgPSBbXTsKCQlpZiAoJ2ZlZWQnIGluIG8gJiYgJ2VudHJ5JyBpbiBvLmZlZWQpIHsKCQkJdmFyIHRva2VuID0gcmVxLnF1ZXJ5LmFjY2Vzc190b2tlbjsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBvLmZlZWQuZW50cnkubGVuZ3RoOyBpKyspIHsKCQkJCXZhciBhID0gby5mZWVkLmVudHJ5W2ldOwoKCQkJCWEuaWQJPSBhLmlkLiR0OwoJCQkJYS5uYW1lCT0gYS50aXRsZS4kdDsKCQkJCWRlbGV0ZSBhLnRpdGxlOwoJCQkJaWYgKGEuZ2QkZW1haWwpIHsKCQkJCQlhLmVtYWlsCT0gKGEuZ2QkZW1haWwgJiYgYS5nZCRlbWFpbC5sZW5ndGggPiAwKSA/IGEuZ2QkZW1haWxbMF0uYWRkcmVzcyA6IG51bGw7CgkJCQkJYS5lbWFpbHMgPSBhLmdkJGVtYWlsOwoJCQkJCWRlbGV0ZSBhLmdkJGVtYWlsOwoJCQkJfQoKCQkJCWlmIChhLnVwZGF0ZWQpIHsKCQkJCQlhLnVwZGF0ZWQgPSBhLnVwZGF0ZWQuJHQ7CgkJCQl9CgoJCQkJaWYgKGEubGluaykgewoKCQkJCQl2YXIgcGljID0gKGEubGluay5sZW5ndGggPiAwKSA/IGEubGlua1swXS5ocmVmIDogbnVsbDsKCQkJCQlpZiAocGljICYmIGEubGlua1swXS5nZCRldGFnKSB7CgkJCQkJCXBpYyArPSAocGljLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnIDogJz8nKSArICdhY2Nlc3NfdG9rZW49JyArIHRva2VuOwoJCQkJCQlhLnBpY3R1cmUgPSBwaWM7CgkJCQkJCWEudGh1bWJuYWlsID0gcGljOwoJCQkJCX0KCgkJCQkJZGVsZXRlIGEubGluazsKCQkJCX0KCgkJCQlpZiAoYS5jYXRlZ29yeSkgewoJCQkJCWRlbGV0ZSBhLmNhdGVnb3J5OwoJCQkJfQoJCQl9CgoJCQlvLmRhdGEgPSBvLmZlZWQuZW50cnk7CgkJCWRlbGV0ZSBvLmZlZWQ7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRFbnRyeShhKSB7CgoJCXZhciBncm91cCA9IGEubWVkaWEkZ3JvdXA7CgkJdmFyIHBob3RvID0gZ3JvdXAubWVkaWEkY29udGVudC5sZW5ndGggPyBncm91cC5tZWRpYSRjb250ZW50WzBdIDoge307CgkJdmFyIG1lZGlhQ29udGVudCA9IGdyb3VwLm1lZGlhJGNvbnRlbnQgfHwgW107CgkJdmFyIG1lZGlhVGh1bWJuYWlsID0gZ3JvdXAubWVkaWEkdGh1bWJuYWlsIHx8IFtdOwoKCQl2YXIgcGljdHVyZXMgPSBtZWRpYUNvbnRlbnQKCQkJLmNvbmNhdChtZWRpYVRodW1ibmFpbCkKCQkJLm1hcChmb3JtYXRJbWFnZSkKCQkJLnNvcnQoZnVuY3Rpb24oYSwgYikgewoJCQkJcmV0dXJuIGEud2lkdGggLSBiLndpZHRoOwoJCQl9KTsKCgkJdmFyIGkgPSAwOwoJCXZhciBfYTsKCQl2YXIgcCA9IHsKCQkJaWQ6IGEuaWQuJHQsCgkJCW5hbWU6IGEudGl0bGUuJHQsCgkJCWRlc2NyaXB0aW9uOiBhLnN1bW1hcnkuJHQsCgkJCXVwZGF0ZWRfdGltZTogYS51cGRhdGVkLiR0LAoJCQljcmVhdGVkX3RpbWU6IGEucHVibGlzaGVkLiR0LAoJCQlwaWN0dXJlOiBwaG90byA/IHBob3RvLnVybCA6IG51bGwsCgkJCXBpY3R1cmVzOiBwaWN0dXJlcywKCQkJaW1hZ2VzOiBbXSwKCQkJdGh1bWJuYWlsOiBwaG90byA/IHBob3RvLnVybCA6IG51bGwsCgkJCXdpZHRoOiBwaG90by53aWR0aCwKCQkJaGVpZ2h0OiBwaG90by5oZWlnaHQKCQl9OwoKCQkvLyBHZXQgZmVlZC9jaGlsZHJlbgoJCWlmICgnbGluaycgaW4gYSkgewoJCQlmb3IgKGkgPSAwOyBpIDwgYS5saW5rLmxlbmd0aDsgaSsrKSB7CgkJCQl2YXIgZCA9IGEubGlua1tpXTsKCQkJCWlmIChkLnJlbC5tYXRjaCgvXCNmZWVkJC8pKSB7CgkJCQkJcC51cGxvYWRfbG9jYXRpb24gPSBwLmZpbGVzID0gcC5waG90b3MgPSBkLmhyZWY7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQl9CgoJCS8vIEdldCBpbWFnZXMgb2YgZGlmZmVyZW50IHNjYWxlcwoJCWlmICgnY2F0ZWdvcnknIGluIGEgJiYgYS5jYXRlZ29yeS5sZW5ndGgpIHsKCQkJX2EgPSBhLmNhdGVnb3J5OwoJCQlmb3IgKGkgPSAwOyBpIDwgX2EubGVuZ3RoOyBpKyspIHsKCQkJCWlmIChfYVtpXS5zY2hlbWUgJiYgX2FbaV0uc2NoZW1lLm1hdGNoKC9cI2tpbmQkLykpIHsKCQkJCQlwLnR5cGUgPSBfYVtpXS50ZXJtLnJlcGxhY2UoL14uKj9cIy8sICcnKTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gR2V0IGltYWdlcyBvZiBkaWZmZXJlbnQgc2NhbGVzCgkJaWYgKCdtZWRpYSR0aHVtYm5haWwnIGluIGdyb3VwICYmIGdyb3VwLm1lZGlhJHRodW1ibmFpbC5sZW5ndGgpIHsKCQkJX2EgPSBncm91cC5tZWRpYSR0aHVtYm5haWw7CgkJCXAudGh1bWJuYWlsID0gX2FbMF0udXJsOwoJCQlwLmltYWdlcyA9IF9hLm1hcChmb3JtYXRJbWFnZSk7CgkJfQoKCQlfYSA9IGdyb3VwLm1lZGlhJGNvbnRlbnQ7CgoJCWlmIChfYSAmJiBfYS5sZW5ndGgpIHsKCQkJcC5pbWFnZXMucHVzaChmb3JtYXRJbWFnZShfYVswXSkpOwoJCX0KCgkJcmV0dXJuIHA7Cgl9CgoJZnVuY3Rpb24gcGFnaW5nKHJlcykgewoKCQkvLyBDb250YWN0cyBWMgoJCWlmICgnZmVlZCcgaW4gcmVzICYmIHJlcy5mZWVkLm9wZW5TZWFyY2gkaXRlbXNQZXJQYWdlKSB7CgkJCXZhciBsaW1pdCA9IHRvSW50KHJlcy5mZWVkLm9wZW5TZWFyY2gkaXRlbXNQZXJQYWdlLiR0KTsKCQkJdmFyIHN0YXJ0ID0gdG9JbnQocmVzLmZlZWQub3BlblNlYXJjaCRzdGFydEluZGV4LiR0KTsKCQkJdmFyIHRvdGFsID0gdG9JbnQocmVzLmZlZWQub3BlblNlYXJjaCR0b3RhbFJlc3VsdHMuJHQpOwoKCQkJaWYgKChzdGFydCArIGxpbWl0KSA8IHRvdGFsKSB7CgkJCQlyZXMucGFnaW5nID0gewoJCQkJCW5leHQ6ICc/c3RhcnQ9JyArIChzdGFydCArIGxpbWl0KQoJCQkJfTsKCQkJfQoJCX0KCQllbHNlIGlmICgnbmV4dFBhZ2VUb2tlbicgaW4gcmVzKSB7CgkJCXJlcy5wYWdpbmcgPSB7CgkJCQluZXh0OiAnP3BhZ2VUb2tlbj0nICsgcmVzLm5leHRQYWdlVG9rZW4KCQkJfTsKCQl9Cgl9CgoJLy8gQ29uc3RydWN0IGEgbXVsdGlwYXJ0IG1lc3NhZ2UKCWZ1bmN0aW9uIE11bHRpcGFydCgpIHsKCgkJLy8gSW50ZXJuYWwgYm9keQoJCXZhciBib2R5ID0gW107CgkJdmFyIGJvdW5kYXJ5ID0gKE1hdGgucmFuZG9tKCkgKiAxZTEwKS50b1N0cmluZygzMik7CgkJdmFyIGNvdW50ZXIgPSAwOwoJCXZhciBsaW5lQnJlYWsgPSAnXHJcbic7CgkJdmFyIGRlbGltID0gbGluZUJyZWFrICsgJy0tJyArIGJvdW5kYXJ5OwoJCXZhciByZWFkeSA9IGZ1bmN0aW9uKCkge307CgoJCXZhciBkYXRhVXJpID0gL15kYXRhXDooW147LF0rKFw7Y2hhcnNldD1bXjssXSspPykoXDtiYXNlNjQpPywvaTsKCgkJLy8gQWRkIGZpbGUKCQlmdW5jdGlvbiBhZGRGaWxlKGl0ZW0pIHsKCQkJdmFyIGZyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQkJZnIub25sb2FkID0gZnVuY3Rpb24oZSkgewoJCQkJYWRkQ29udGVudChidG9hKGUudGFyZ2V0LnJlc3VsdCksIGl0ZW0udHlwZSArIGxpbmVCcmVhayArICdDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiBiYXNlNjQnKTsKCQkJfTsKCgkJCWZyLnJlYWRBc0JpbmFyeVN0cmluZyhpdGVtKTsKCQl9CgoJCS8vIEFkZCBjb250ZW50CgkJZnVuY3Rpb24gYWRkQ29udGVudChjb250ZW50LCB0eXBlKSB7CgkJCWJvZHkucHVzaChsaW5lQnJlYWsgKyAnQ29udGVudC1UeXBlOiAnICsgdHlwZSArIGxpbmVCcmVhayArIGxpbmVCcmVhayArIGNvbnRlbnQpOwoJCQljb3VudGVyLS07CgkJCXJlYWR5KCk7CgkJfQoKCQkvLyBBZGQgbmV3IHRoaW5ncyB0byB0aGUgb2JqZWN0CgkJdGhpcy5hcHBlbmQgPSBmdW5jdGlvbihjb250ZW50LCB0eXBlKSB7CgoJCQkvLyBEb2VzIHRoZSBjb250ZW50IGhhdmUgYW4gYXJyYXkKCQkJaWYgKHR5cGVvZiAoY29udGVudCkgPT09ICdzdHJpbmcnIHx8ICEoJ2xlbmd0aCcgaW4gT2JqZWN0KGNvbnRlbnQpKSkgewoJCQkJLy8gQ29udmVydGkgdG8gbXVsdGlwbGVzCgkJCQljb250ZW50ID0gW2NvbnRlbnRdOwoJCQl9CgoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnQubGVuZ3RoOyBpKyspIHsKCgkJCQljb3VudGVyKys7CgoJCQkJdmFyIGl0ZW0gPSBjb250ZW50W2ldOwoKCQkJCS8vIElzIHRoaXMgYSBmaWxlPwoJCQkJLy8gRmlsZXMgY2FuIGJlIGVpdGhlciBCbG9icyBvciBGaWxlIHR5cGVzCgkJCQlpZiAoCgkJCQkJKHR5cGVvZiAoRmlsZSkgIT09ICd1bmRlZmluZWQnICYmIGl0ZW0gaW5zdGFuY2VvZiBGaWxlKSB8fAoJCQkJCSh0eXBlb2YgKEJsb2IpICE9PSAndW5kZWZpbmVkJyAmJiBpdGVtIGluc3RhbmNlb2YgQmxvYikKCQkJCSkgewoJCQkJCS8vIFJlYWQgdGhlIGZpbGUgaW4KCQkJCQlhZGRGaWxlKGl0ZW0pOwoJCQkJfQoKCQkJCS8vIERhdGEtVVJJPwoJCQkJLy8gRGF0YTpbPG1pbWUgdHlwZT5dWztjaGFyc2V0PTxjaGFyc2V0Pl1bO2Jhc2U2NF0sPGVuY29kZWQgZGF0YT4KCQkJCS8vIC9eZGF0YVw6KFteOyxdKyhcO2NoYXJzZXQ9W147LF0rKT8pKFw7YmFzZTY0KT8sL2kKCQkJCWVsc2UgaWYgKHR5cGVvZiAoaXRlbSkgPT09ICdzdHJpbmcnICYmIGl0ZW0ubWF0Y2goZGF0YVVyaSkpIHsKCQkJCQl2YXIgbSA9IGl0ZW0ubWF0Y2goZGF0YVVyaSk7CgkJCQkJYWRkQ29udGVudChpdGVtLnJlcGxhY2UoZGF0YVVyaSwgJycpLCBtWzFdICsgbGluZUJyZWFrICsgJ0NvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IGJhc2U2NCcpOwoJCQkJfQoKCQkJCS8vIFJlZ3VsYXIgc3RyaW5nCgkJCQllbHNlIHsKCQkJCQlhZGRDb250ZW50KGl0ZW0sIHR5cGUpOwoJCQkJfQoJCQl9CgkJfTsKCgkJdGhpcy5vbnJlYWR5ID0gZnVuY3Rpb24oZm4pIHsKCQkJcmVhZHkgPSBmdW5jdGlvbigpIHsKCQkJCWlmIChjb3VudGVyID09PSAwKSB7CgkJCQkJLy8gVHJpZ2dlciByZWFkeQoJCQkJCWJvZHkudW5zaGlmdCgnJyk7CgkJCQkJYm9keS5wdXNoKCctLScpOwoJCQkJCWZuKGJvZHkuam9pbihkZWxpbSksIGJvdW5kYXJ5KTsKCQkJCQlib2R5ID0gW107CgkJCQl9CgkJCX07CgoJCQlyZWFkeSgpOwoJCX07Cgl9CgoJLy8gVXBsb2FkIHRvIERyaXZlCgkvLyBJZiB0aGlzIGlzIFBVVCB0aGVuIG9ubHkgYXVnbWVudCB0aGUgZmlsZSB1cGxvYWRlZAoJLy8gUFVUIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2RyaXZlL3YyL3JlZmVyZW5jZS9maWxlcy91cGRhdGUKCS8vIFBPU1QgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vZHJpdmUvbWFuYWdlLXVwbG9hZHMKCWZ1bmN0aW9uIHVwbG9hZERyaXZlKHAsIGNhbGxiYWNrKSB7CgoJCXZhciBkYXRhID0ge307CgoJCS8vIFRlc3QgZm9yIERPTSBlbGVtZW50CgkJaWYgKHAuZGF0YSAmJgoJCQkodHlwZW9mIChIVE1MSW5wdXRFbGVtZW50KSAhPT0gJ3VuZGVmaW5lZCcgJiYgcC5kYXRhIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkKCQkpIHsKCQkJcC5kYXRhID0ge2ZpbGU6IHAuZGF0YX07CgkJfQoKCQlpZiAoIXAuZGF0YS5uYW1lICYmIE9iamVjdChPYmplY3QocC5kYXRhLmZpbGUpLmZpbGVzKS5sZW5ndGggJiYgcC5tZXRob2QgPT09ICdwb3N0JykgewoJCQlwLmRhdGEubmFtZSA9IHAuZGF0YS5maWxlLmZpbGVzWzBdLm5hbWU7CgkJfQoKCQlpZiAocC5tZXRob2QgPT09ICdwb3N0JykgewoJCQlwLmRhdGEgPSB7CgkJCQl0aXRsZTogcC5kYXRhLm5hbWUsCgkJCQlwYXJlbnRzOiBbe2lkOiBwLmRhdGEucGFyZW50IHx8ICdyb290J31dLAoJCQkJZmlsZTogcC5kYXRhLmZpbGUKCQkJfTsKCQl9CgkJZWxzZSB7CgoJCQkvLyBNYWtlIGEgcmVmZXJlbmNlCgkJCWRhdGEgPSBwLmRhdGE7CgkJCXAuZGF0YSA9IHt9OwoKCQkJLy8gQWRkIHRoZSBwYXJ0cyB0byBjaGFuZ2UgYXMgcmVxdWlyZWQKCQkJaWYgKGRhdGEucGFyZW50KSB7CgkJCQlwLmRhdGEucGFyZW50cyA9IFt7aWQ6IHAuZGF0YS5wYXJlbnQgfHwgJ3Jvb3QnfV07CgkJCX0KCgkJCWlmIChkYXRhLmZpbGUpIHsKCQkJCXAuZGF0YS5maWxlID0gZGF0YS5maWxlOwoJCQl9CgoJCQlpZiAoZGF0YS5uYW1lKSB7CgkJCQlwLmRhdGEudGl0bGUgPSBkYXRhLm5hbWU7CgkJCX0KCQl9CgoJCS8vIEV4dHJhY3QgdGhlIGZpbGUsIGlmIGl0IGV4aXN0cyBmcm9tIHRoZSBkYXRhIG9iamVjdAoJCS8vIElmIHRoZSBGaWxlIGlzIGFuIElOUFVUIGVsZW1lbnQgbGV0cyBqdXN0IGNvbmNlcm4gb3Vyc2VsdmVzIHdpdGggdGhlIE5vZGVMaXN0CgkJdmFyIGZpbGU7CgkJaWYgKCdmaWxlJyBpbiBwLmRhdGEpIHsKCQkJZmlsZSA9IHAuZGF0YS5maWxlOwoJCQlkZWxldGUgcC5kYXRhLmZpbGU7CgoJCQlpZiAodHlwZW9mIChmaWxlKSA9PT0gJ29iamVjdCcgJiYgJ2ZpbGVzJyBpbiBmaWxlKSB7CgkJCQkvLyBBc3NpZ24gdGhlIE5vZGVMaXN0CgkJCQlmaWxlID0gZmlsZS5maWxlczsKCQkJfQoKCQkJaWYgKCFmaWxlIHx8ICFmaWxlLmxlbmd0aCkgewoJCQkJY2FsbGJhY2soewoJCQkJCWVycm9yOiB7CgkJCQkJCWNvZGU6ICdyZXF1ZXN0X2ludmFsaWQnLAoJCQkJCQltZXNzYWdlOiAnVGhlcmUgd2VyZSBubyBmaWxlcyBhdHRhY2hlZCB3aXRoIHRoaXMgcmVxdWVzdCB0byB1cGxvYWQnCgkJCQkJfQoJCQkJfSk7CgkJCQlyZXR1cm47CgkJCX0KCQl9CgoJCS8vIFNldCB0eXBlIHAuZGF0YS5taW1lVHlwZSA9IE9iamVjdChmaWxlWzBdKS50eXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nOwoKCQkvLyBDb25zdHJ1Y3QgYSBtdWx0aXBhcnQgbWVzc2FnZQoJCXZhciBwYXJ0cyA9IG5ldyBNdWx0aXBhcnQoKTsKCQlwYXJ0cy5hcHBlbmQoSlNPTi5zdHJpbmdpZnkocC5kYXRhKSwgJ2FwcGxpY2F0aW9uL2pzb24nKTsKCgkJLy8gUmVhZCB0aGUgZmlsZSBpbnRvIGEgIGJhc2U2NCBzdHJpbmcuLi4geWVwIGEgaGFzc2xlLCBpIGtub3cKCQkvLyBGb3JtRGF0YSBkb2Vzbid0IGxldCB1cyBhc3NpZ24gb3VyIG93biBNdWx0aXBhcnQgaGVhZGVycyBhbmQgSFRUUCBDb250ZW50LVR5cGUKCQkvLyBBbGFzIEdvb2dsZUFwaSBuZWVkIHRoZXNlIGluIGEgcGFydGljdWxhciBmb3JtYXQKCQlpZiAoZmlsZSkgewoJCQlwYXJ0cy5hcHBlbmQoZmlsZSk7CgkJfQoKCQlwYXJ0cy5vbnJlYWR5KGZ1bmN0aW9uKGJvZHksIGJvdW5kYXJ5KSB7CgoJCQlwLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gJ211bHRpcGFydC9yZWxhdGVkOyBib3VuZGFyeT0iJyArIGJvdW5kYXJ5ICsgJyInOwoJCQlwLmRhdGEgPSBib2R5OwoKCQkJY2FsbGJhY2soJ3VwbG9hZC9kcml2ZS92Mi9maWxlcycgKyAoZGF0YS5pZCA/ICcvJyArIGRhdGEuaWQgOiAnJykgKyAnP3VwbG9hZFR5cGU9bXVsdGlwYXJ0Jyk7CgkJfSk7CgoJfQoKCWZ1bmN0aW9uIHRvSlNPTihwKSB7CgkJaWYgKHR5cGVvZiAocC5kYXRhKSA9PT0gJ29iamVjdCcpIHsKCQkJLy8gQ29udmVydCB0aGUgUE9TVCBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QKCQkJdHJ5IHsKCQkJCXAuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHAuZGF0YSk7CgkJCQlwLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nOwoJCQl9CgkJCWNhdGNoIChlKSB7fQoJCX0KCX0KCn0pKGhlbGxvKTsKCihmdW5jdGlvbihoZWxsbykgewoKCWhlbGxvLmluaXQoewoKCQlpbnN0YWdyYW06IHsKCgkJCW5hbWU6ICdJbnN0YWdyYW0nLAoKCQkJb2F1dGg6IHsKCQkJCS8vIFNlZTogaHR0cDovL2luc3RhZ3JhbS5jb20vZGV2ZWxvcGVyL2F1dGhlbnRpY2F0aW9uLwoJCQkJdmVyc2lvbjogMiwKCQkJCWF1dGg6ICdodHRwczovL2luc3RhZ3JhbS5jb20vb2F1dGgvYXV0aG9yaXplLycsCgkJCQlncmFudDogJ2h0dHBzOi8vYXBpLmluc3RhZ3JhbS5jb20vb2F1dGgvYWNjZXNzX3Rva2VuJwoJCQl9LAoKCQkJLy8gUmVmcmVzaCB0aGUgYWNjZXNzX3Rva2VuIG9uY2UgZXhwaXJlZAoJCQlyZWZyZXNoOiB0cnVlLAoKCQkJc2NvcGU6IHsKCQkJCWJhc2ljOiAnYmFzaWMnLAoJCQkJcGhvdG9zOiAnJywKCQkJCWZyaWVuZHM6ICdyZWxhdGlvbnNoaXBzJywKCQkJCXB1Ymxpc2g6ICdsaWtlcyBjb21tZW50cycsCgkJCQllbWFpbDogJycsCgkJCQlzaGFyZTogJycsCgkJCQlwdWJsaXNoX2ZpbGVzOiAnJywKCQkJCWZpbGVzOiAnJywKCQkJCXZpZGVvczogJycsCgkJCQlvZmZsaW5lX2FjY2VzczogJycKCQkJfSwKCgkJCXNjb3BlX2RlbGltOiAnICcsCgoJCQlsb2dpbjogZnVuY3Rpb24ocCkgewoJCQkJLy8gSW5zdGFncmFtIHRocm93cyBlcnJvcnMgbGlrZSAnSmF2YVNjcmlwdCBBUEkgaXMgdW5zdXBwb3J0ZWQnIGlmIHRoZSBkaXNwbGF5IGlzICdwb3B1cCcuCgkJCQkvLyBNYWtlIHRoZSBkaXNwbGF5IGFueXRoaW5nIGJ1dCAncG9wdXAnCgkJCQlwLnFzLmRpc3BsYXkgPSAnJzsKCQkJfSwKCgkJCWJhc2U6ICdodHRwczovL2FwaS5pbnN0YWdyYW0uY29tL3YxLycsCgoJCQlnZXQ6IHsKCQkJCW1lOiAndXNlcnMvc2VsZicsCgkJCQknbWUvZmVlZCc6ICd1c2Vycy9zZWxmL2ZlZWQ/Y291bnQ9QHtsaW1pdHwxMDB9JywKCQkJCSdtZS9waG90b3MnOiAndXNlcnMvc2VsZi9tZWRpYS9yZWNlbnQ/bWluX2lkPTAmY291bnQ9QHtsaW1pdHwxMDB9JywKCQkJCSdtZS9mcmllbmRzJzogJ3VzZXJzL3NlbGYvZm9sbG93cz9jb3VudD1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2ZvbGxvd2luZyc6ICd1c2Vycy9zZWxmL2ZvbGxvd3M/Y291bnQ9QHtsaW1pdHwxMDB9JywKCQkJCSdtZS9mb2xsb3dlcnMnOiAndXNlcnMvc2VsZi9mb2xsb3dlZC1ieT9jb3VudD1Ae2xpbWl0fDEwMH0nLAoJCQkJJ2ZyaWVuZC9waG90b3MnOiAndXNlcnMvQHtpZH0vbWVkaWEvcmVjZW50P21pbl9pZD0wJmNvdW50PUB7bGltaXR8MTAwfScKCQkJfSwKCgkJCXBvc3Q6IHsKCQkJCSdtZS9saWtlJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCQkJCQl2YXIgaWQgPSBwLmRhdGEuaWQ7CgkJCQkJcC5kYXRhID0ge307CgkJCQkJY2FsbGJhY2soJ21lZGlhLycgKyBpZCArICcvbGlrZXMnKTsKCQkJCX0KCQkJfSwKCgkJCWRlbDogewoJCQkJJ21lL2xpa2UnOiAnbWVkaWEvQHtpZH0vbGlrZXMnCgkJCX0sCgoJCQl3cmFwOiB7CgkJCQltZTogZnVuY3Rpb24obykgewoKCQkJCQlmb3JtYXRFcnJvcihvKTsKCgkJCQkJaWYgKCdkYXRhJyBpbiBvKSB7CgkJCQkJCW8uaWQgPSBvLmRhdGEuaWQ7CgkJCQkJCW8udGh1bWJuYWlsID0gby5kYXRhLnByb2ZpbGVfcGljdHVyZTsKCQkJCQkJby5uYW1lID0gby5kYXRhLmZ1bGxfbmFtZSB8fCBvLmRhdGEudXNlcm5hbWU7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ21lL2ZyaWVuZHMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2ZvbGxvd2luZyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvZm9sbG93ZXJzJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9waG90b3MnOiBmdW5jdGlvbihvKSB7CgoJCQkJCWZvcm1hdEVycm9yKG8pOwoJCQkJCXBhZ2luZyhvKTsKCgkJCQkJaWYgKCdkYXRhJyBpbiBvKSB7CgkJCQkJCW8uZGF0YSA9IG8uZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCkgewoJCQkJCQkJcmV0dXJuIGQudHlwZSA9PT0gJ2ltYWdlJzsKCQkJCQkJfSk7CgoJCQkJCQlvLmRhdGEuZm9yRWFjaChmdW5jdGlvbihkKSB7CgkJCQkJCQlkLm5hbWUgPSBkLmNhcHRpb24gPyBkLmNhcHRpb24udGV4dCA6IG51bGw7CgkJCQkJCQlkLnRodW1ibmFpbCA9IGQuaW1hZ2VzLnRodW1ibmFpbC51cmw7CgkJCQkJCQlkLnBpY3R1cmUgPSBkLmltYWdlcy5zdGFuZGFyZF9yZXNvbHV0aW9uLnVybDsKCQkJCQkJCWQucGljdHVyZXMgPSBPYmplY3Qua2V5cyhkLmltYWdlcykKCQkJCQkJCQkubWFwKGZ1bmN0aW9uKGtleSkgewoJCQkJCQkJCQl2YXIgaW1hZ2UgPSBkLmltYWdlc1trZXldOwoJCQkJCQkJCQlyZXR1cm4gZm9ybWF0SW1hZ2UoaW1hZ2UpOwoJCQkJCQkJCX0pCgkJCQkJCQkJLnNvcnQoZnVuY3Rpb24oYSwgYikgewoJCQkJCQkJCQlyZXR1cm4gYS53aWR0aCAtIGIud2lkdGg7CgkJCQkJCQkJfSk7CgkJCQkJCX0pOwoJCQkJCX0KCgkJCQkJcmV0dXJuIG87CgkJCQl9LAoKCQkJCSdkZWZhdWx0JzogZnVuY3Rpb24obykgewoJCQkJCW8gPSBmb3JtYXRFcnJvcihvKTsKCQkJCQlwYWdpbmcobyk7CgkJCQkJcmV0dXJuIG87CgkJCQl9CgkJCX0sCgoJCQkvLyBJbnN0YWdyYW0gZG9lcyBub3QgcmV0dXJuIGFueSBDT1JTIEhlYWRlcnMKCQkJLy8gU28gYmVzaWRlcyBKU09OUCB3ZSdyZSBzdHVjayB3aXRoIHByb3h5CgkJCXhocjogZnVuY3Rpb24ocCwgcXMpIHsKCgkJCQl2YXIgbWV0aG9kID0gcC5tZXRob2Q7CgkJCQl2YXIgcHJveHkgPSBtZXRob2QgIT09ICdnZXQnOwoKCQkJCWlmIChwcm94eSkgewoKCQkJCQlpZiAoKG1ldGhvZCA9PT0gJ3Bvc3QnIHx8IG1ldGhvZCA9PT0gJ3B1dCcpICYmIHAucXVlcnkuYWNjZXNzX3Rva2VuKSB7CgkJCQkJCXAuZGF0YS5hY2Nlc3NfdG9rZW4gPSBwLnF1ZXJ5LmFjY2Vzc190b2tlbjsKCQkJCQkJZGVsZXRlIHAucXVlcnkuYWNjZXNzX3Rva2VuOwoJCQkJCX0KCgkJCQkJLy8gTm8gYWNjZXNzIGNvbnRyb2wgaGVhZGVycwoJCQkJCS8vIFVzZSB0aGUgcHJveHkgaW5zdGVhZAoJCQkJCXAucHJveHkgPSBwcm94eTsKCQkJCX0KCgkJCQlyZXR1cm4gcHJveHk7CgkJCX0sCgoJCQkvLyBObyBmb3JtCgkJCWZvcm06IGZhbHNlCgkJfQoJfSk7CgoJZnVuY3Rpb24gZm9ybWF0SW1hZ2UoaW1hZ2UpIHsKCQlyZXR1cm4gewoJCQlzb3VyY2U6IGltYWdlLnVybCwKCQkJd2lkdGg6IGltYWdlLndpZHRoLAoJCQloZWlnaHQ6IGltYWdlLmhlaWdodAoJCX07Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RXJyb3IobykgewoJCWlmICh0eXBlb2YgbyA9PT0gJ3N0cmluZycpIHsKCQkJcmV0dXJuIHsKCQkJCWVycm9yOiB7CgkJCQkJY29kZTogJ2ludmFsaWRfcmVxdWVzdCcsCgkJCQkJbWVzc2FnZTogbwoJCQkJfQoJCQl9OwoJCX0KCgkJaWYgKG8gJiYgJ21ldGEnIGluIG8gJiYgJ2Vycm9yX3R5cGUnIGluIG8ubWV0YSkgewoJCQlvLmVycm9yID0gewoJCQkJY29kZTogby5tZXRhLmVycm9yX3R5cGUsCgkJCQltZXNzYWdlOiBvLm1ldGEuZXJyb3JfbWVzc2FnZQoJCQl9OwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvKSB7CgkJcGFnaW5nKG8pOwoJCWlmIChvICYmICdkYXRhJyBpbiBvKSB7CgkJCW8uZGF0YS5mb3JFYWNoKGZvcm1hdEZyaWVuZCk7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRGcmllbmQobykgewoJCWlmIChvLmlkKSB7CgkJCW8udGh1bWJuYWlsID0gby5wcm9maWxlX3BpY3R1cmU7CgkJCW8ubmFtZSA9IG8uZnVsbF9uYW1lIHx8IG8udXNlcm5hbWU7CgkJfQoJfQoKCS8vIFNlZTogaHR0cDovL2luc3RhZ3JhbS5jb20vZGV2ZWxvcGVyL2VuZHBvaW50cy8KCWZ1bmN0aW9uIHBhZ2luZyhyZXMpIHsKCQlpZiAoJ3BhZ2luYXRpb24nIGluIHJlcykgewoJCQlyZXMucGFnaW5nID0gewoJCQkJbmV4dDogcmVzLnBhZ2luYXRpb24ubmV4dF91cmwKCQkJfTsKCQkJZGVsZXRlIHJlcy5wYWdpbmF0aW9uOwoJCX0KCX0KCn0pKGhlbGxvKTsKCihmdW5jdGlvbihoZWxsbykgewoKCWhlbGxvLmluaXQoewoKCQlqb2lubWU6IHsKCgkJCW5hbWU6ICdqb2luLm1lJywKCgkJCW9hdXRoOiB7CgkJCQl2ZXJzaW9uOiAyLAoJCQkJYXV0aDogJ2h0dHBzOi8vc2VjdXJlLmpvaW4ubWUvYXBpL3B1YmxpYy92MS9hdXRoL29hdXRoMicsCgkJCQlncmFudDogJ2h0dHBzOi8vc2VjdXJlLmpvaW4ubWUvYXBpL3B1YmxpYy92MS9hdXRoL29hdXRoMicKCQkJfSwKCgkJCXJlZnJlc2g6IGZhbHNlLAoKCQkJc2NvcGU6IHsKCQkJCWJhc2ljOiAndXNlcl9pbmZvJywKCQkJCXVzZXI6ICd1c2VyX2luZm8nLAoJCQkJc2NoZWR1bGVyOiAnc2NoZWR1bGVyJywKCQkJCXN0YXJ0OiAnc3RhcnRfbWVldGluZycsCgkJCQllbWFpbDogJycsCgkJCQlmcmllbmRzOiAnJywKCQkJCXNoYXJlOiAnJywKCQkJCXB1Ymxpc2g6ICcnLAoJCQkJcGhvdG9zOiAnJywKCQkJCXB1Ymxpc2hfZmlsZXM6ICcnLAoJCQkJZmlsZXM6ICcnLAoJCQkJdmlkZW9zOiAnJywKCQkJCW9mZmxpbmVfYWNjZXNzOiAnJwoJCQl9LAoKCQkJc2NvcGVfZGVsaW06ICcgJywKCgkJCWxvZ2luOiBmdW5jdGlvbihwKSB7CgkJCQlwLm9wdGlvbnMucG9wdXAud2lkdGggPSA0MDA7CgkJCQlwLm9wdGlvbnMucG9wdXAuaGVpZ2h0ID0gNzAwOwoJCQl9LAoKCQkJYmFzZTogJ2h0dHBzOi8vYXBpLmpvaW4ubWUvdjEvJywKCgkJCWdldDogewoJCQkJbWU6ICd1c2VyJywKCQkJCW1lZXRpbmdzOiAnbWVldGluZ3MnLAoJCQkJJ21lZXRpbmdzL2luZm8nOiAnbWVldGluZ3MvQHtpZH0nCgkJCX0sCgoJCQlwb3N0OiB7CgkJCQknbWVldGluZ3Mvc3RhcnQvYWRob2MnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykgewoJCQkJCWNhbGxiYWNrKCdtZWV0aW5ncy9zdGFydCcpOwoJCQkJfSwKCgkJCQknbWVldGluZ3Mvc3RhcnQvc2NoZWR1bGVkJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCQkJCQl2YXIgbWVldGluZ0lkID0gcC5kYXRhLm1lZXRpbmdJZDsKCQkJCQlwLmRhdGEgPSB7fTsKCQkJCQljYWxsYmFjaygnbWVldGluZ3MvJyArIG1lZXRpbmdJZCArICcvc3RhcnQnKTsKCQkJCX0sCgoJCQkJJ21lZXRpbmdzL3NjaGVkdWxlJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCQkJCQljYWxsYmFjaygnbWVldGluZ3MnKTsKCQkJCX0KCQkJfSwKCgkJCXBhdGNoOiB7CgkJCQknbWVldGluZ3MvdXBkYXRlJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCQkJCQljYWxsYmFjaygnbWVldGluZ3MvJyArIHAuZGF0YS5tZWV0aW5nSWQpOwoJCQkJfQoJCQl9LAoKCQkJZGVsOiB7CgkJCQknbWVldGluZ3MvZGVsZXRlJzogJ21lZXRpbmdzL0B7aWR9JwoJCQl9LAoKCQkJd3JhcDogewoJCQkJbWU6IGZ1bmN0aW9uKG8sIGhlYWRlcnMpIHsKCQkJCQlmb3JtYXRFcnJvcihvLCBoZWFkZXJzKTsKCgkJCQkJaWYgKCFvLmVtYWlsKSB7CgkJCQkJCXJldHVybiBvOwoJCQkJCX0KCgkJCQkJby5uYW1lID0gby5mdWxsTmFtZTsKCQkJCQlvLmZpcnN0X25hbWUgPSBvLm5hbWUuc3BsaXQoJyAnKVswXTsKCQkJCQlvLmxhc3RfbmFtZSA9IG8ubmFtZS5zcGxpdCgnICcpWzFdOwoJCQkJCW8uaWQgPSBvLmVtYWlsOwoKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ2RlZmF1bHQnOiBmdW5jdGlvbihvLCBoZWFkZXJzKSB7CgkJCQkJZm9ybWF0RXJyb3IobywgaGVhZGVycyk7CgoJCQkJCXJldHVybiBvOwoJCQkJfQoJCQl9LAoKCQkJeGhyOiBmb3JtYXRSZXF1ZXN0CgoJCX0KCX0pOwoKCWZ1bmN0aW9uIGZvcm1hdEVycm9yKG8sIGhlYWRlcnMpIHsKCQl2YXIgZXJyb3JDb2RlOwoJCXZhciBtZXNzYWdlOwoJCXZhciBkZXRhaWxzOwoKCQlpZiAobyAmJiAoJ01lc3NhZ2UnIGluIG8pKSB7CgkJCW1lc3NhZ2UgPSBvLk1lc3NhZ2U7CgkJCWRlbGV0ZSBvLk1lc3NhZ2U7CgoJCQlpZiAoJ0Vycm9yQ29kZScgaW4gbykgewoJCQkJZXJyb3JDb2RlID0gby5FcnJvckNvZGU7CgkJCQlkZWxldGUgby5FcnJvckNvZGU7CgkJCX0KCQkJZWxzZSB7CgkJCQllcnJvckNvZGUgPSBnZXRFcnJvckNvZGUoaGVhZGVycyk7CgkJCX0KCgkJCW8uZXJyb3IgPSB7CgkJCQljb2RlOiBlcnJvckNvZGUsCgkJCQltZXNzYWdlOiBtZXNzYWdlLAoJCQkJZGV0YWlsczogbwoJCQl9OwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0UmVxdWVzdChwLCBxcykgewoJCS8vIE1vdmUgdGhlIGFjY2VzcyB0b2tlbiBmcm9tIHRoZSByZXF1ZXN0IGJvZHkgdG8gdGhlIHJlcXVlc3QgaGVhZGVyCgkJdmFyIHRva2VuID0gcXMuYWNjZXNzX3Rva2VuOwoJCWRlbGV0ZSBxcy5hY2Nlc3NfdG9rZW47CgkJcC5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyB0b2tlbjsKCgkJLy8gRm9ybWF0IG5vbi1nZXQgcmVxdWVzdHMgdG8gaW5kaWNhdGUganNvbiBib2R5CgkJaWYgKHAubWV0aG9kICE9PSAnZ2V0JyAmJiBwLmRhdGEpIHsKCQkJcC5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJzsKCQkJaWYgKHR5cGVvZiAocC5kYXRhKSA9PT0gJ29iamVjdCcpIHsKCQkJCXAuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHAuZGF0YSk7CgkJCX0KCQl9CgoJCWlmIChwLm1ldGhvZCA9PT0gJ3B1dCcpIHsKCQkJcC5tZXRob2QgPSAncGF0Y2gnOwoJCX0KCgkJcmV0dXJuIHRydWU7Cgl9CgoJZnVuY3Rpb24gZ2V0RXJyb3JDb2RlKGhlYWRlcnMpIHsKCQlzd2l0Y2ggKGhlYWRlcnMuc3RhdHVzQ29kZSkgewoJCQljYXNlIDQwMDoKCQkJCXJldHVybiAnaW52YWxpZF9yZXF1ZXN0JzsKCQkJY2FzZSA0MDM6CgkJCQlyZXR1cm4gJ3N0YWxlX3Rva2VuJzsKCQkJY2FzZSA0MDE6CgkJCQlyZXR1cm4gJ2ludmFsaWRfdG9rZW4nOwoJCQljYXNlIDUwMDoKCQkJCXJldHVybiAnc2VydmVyX2Vycm9yJzsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAnc2VydmVyX2Vycm9yJzsKCQl9Cgl9Cgp9KGhlbGxvKSk7CgooZnVuY3Rpb24oaGVsbG8pIHsKCgloZWxsby5pbml0KHsKCgkJbGlua2VkaW46IHsKCgkJCW9hdXRoOiB7CgkJCQl2ZXJzaW9uOiAyLAoJCQkJcmVzcG9uc2VfdHlwZTogJ2NvZGUnLAoJCQkJYXV0aDogJ2h0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS91YXMvb2F1dGgyL2F1dGhvcml6YXRpb24nLAoJCQkJZ3JhbnQ6ICdodHRwczovL3d3dy5saW5rZWRpbi5jb20vdWFzL29hdXRoMi9hY2Nlc3NUb2tlbicKCQkJfSwKCgkJCS8vIFJlZnJlc2ggdGhlIGFjY2Vzc190b2tlbiBvbmNlIGV4cGlyZWQKCQkJcmVmcmVzaDogdHJ1ZSwKCgkJCXNjb3BlOiB7CgkJCQliYXNpYzogJ3JfYmFzaWNwcm9maWxlJywKCQkJCWVtYWlsOiAncl9lbWFpbGFkZHJlc3MnLAoJCQkJZmlsZXM6ICcnLAoJCQkJZnJpZW5kczogJycsCgkJCQlwaG90b3M6ICcnLAoJCQkJcHVibGlzaDogJ3dfc2hhcmUnLAoJCQkJcHVibGlzaF9maWxlczogJ3dfc2hhcmUnLAoJCQkJc2hhcmU6ICcnLAoJCQkJdmlkZW9zOiAnJywKCQkJCW9mZmxpbmVfYWNjZXNzOiAnJwoJCQl9LAoJCQlzY29wZV9kZWxpbTogJyAnLAoKCQkJYmFzZTogJ2h0dHBzOi8vYXBpLmxpbmtlZGluLmNvbS92MS8nLAoKCQkJZ2V0OiB7CgkJCQltZTogJ3Blb3BsZS9+OihwaWN0dXJlLXVybCxmaXJzdC1uYW1lLGxhc3QtbmFtZSxpZCxmb3JtYXR0ZWQtbmFtZSxlbWFpbC1hZGRyZXNzKScsCgoJCQkJLy8gU2VlOiBodHRwOi8vZGV2ZWxvcGVyLmxpbmtlZGluLmNvbS9kb2N1bWVudHMvZ2V0LW5ldHdvcmstdXBkYXRlcy1hbmQtc3RhdGlzdGljcy1hcGkKCQkJCSdtZS9zaGFyZSc6ICdwZW9wbGUvfi9uZXR3b3JrL3VwZGF0ZXM/Y291bnQ9QHtsaW1pdHwyNTB9JwoJCQl9LAoKCQkJcG9zdDogewoKCQkJCS8vIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubGlua2VkaW4uY29tL2RvY3VtZW50cy9hcGktcmVxdWVzdHMtanNvbgoJCQkJJ21lL3NoYXJlJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCQkJCQl2YXIgZGF0YSA9IHsKCQkJCQkJdmlzaWJpbGl0eTogewoJCQkJCQkJY29kZTogJ2FueW9uZScKCQkJCQkJfQoJCQkJCX07CgoJCQkJCWlmIChwLmRhdGEuaWQpIHsKCgkJCQkJCWRhdGEuYXR0cmlidXRpb24gPSB7CgkJCQkJCQlzaGFyZTogewoJCQkJCQkJCWlkOiBwLmRhdGEuaWQKCQkJCQkJCX0KCQkJCQkJfTsKCgkJCQkJfQoJCQkJCWVsc2UgewoJCQkJCQlkYXRhLmNvbW1lbnQgPSBwLmRhdGEubWVzc2FnZTsKCQkJCQkJaWYgKHAuZGF0YS5waWN0dXJlICYmIHAuZGF0YS5saW5rKSB7CgkJCQkJCQlkYXRhLmNvbnRlbnQgPSB7CgkJCQkJCQkJJ3N1Ym1pdHRlZC11cmwnOiBwLmRhdGEubGluaywKCQkJCQkJCQknc3VibWl0dGVkLWltYWdlLXVybCc6IHAuZGF0YS5waWN0dXJlCgkJCQkJCQl9OwoJCQkJCQl9CgkJCQkJfQoKCQkJCQlwLmRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTsKCgkJCQkJY2FsbGJhY2soJ3Blb3BsZS9+L3NoYXJlcz9mb3JtYXQ9anNvbicpOwoJCQkJfSwKCgkJCQknbWUvbGlrZSc6IGxpa2UKCQkJfSwKCgkJCWRlbDp7CgkJCQknbWUvbGlrZSc6IGxpa2UKCQkJfSwKCgkJCXdyYXA6IHsKCQkJCW1lOiBmdW5jdGlvbihvKSB7CgkJCQkJZm9ybWF0RXJyb3Iobyk7CgkJCQkJZm9ybWF0VXNlcihvKTsKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ21lL2ZyaWVuZHMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2ZvbGxvd2luZyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvZm9sbG93ZXJzJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9zaGFyZSc6IGZ1bmN0aW9uKG8pIHsKCQkJCQlmb3JtYXRFcnJvcihvKTsKCQkJCQlwYWdpbmcobyk7CgkJCQkJaWYgKG8udmFsdWVzKSB7CgkJCQkJCW8uZGF0YSA9IG8udmFsdWVzLm1hcChmb3JtYXRVc2VyKTsKCQkJCQkJby5kYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQkJCQkJaXRlbS5tZXNzYWdlID0gaXRlbS5oZWFkbGluZTsKCQkJCQkJfSk7CgoJCQkJCQlkZWxldGUgby52YWx1ZXM7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ2RlZmF1bHQnOiBmdW5jdGlvbihvLCBoZWFkZXJzKSB7CgkJCQkJZm9ybWF0RXJyb3Iobyk7CgkJCQkJZW1wdHkobywgaGVhZGVycyk7CgkJCQkJcGFnaW5nKG8pOwoJCQkJfQoJCQl9LAoKCQkJanNvbnA6IGZ1bmN0aW9uKHAsIHFzKSB7CgkJCQlmb3JtYXRRdWVyeShxcyk7CgkJCQlpZiAocC5tZXRob2QgPT09ICdnZXQnKSB7CgkJCQkJcXMuZm9ybWF0ID0gJ2pzb25wJzsKCQkJCQlxc1snZXJyb3ItY2FsbGJhY2snXSA9IHAuY2FsbGJhY2tJRDsKCQkJCX0KCQkJfSwKCgkJCXhocjogZnVuY3Rpb24ocCwgcXMpIHsKCQkJCWlmIChwLm1ldGhvZCAhPT0gJ2dldCcpIHsKCQkJCQlmb3JtYXRRdWVyeShxcyk7CgkJCQkJcC5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJzsKCgkJCQkJLy8gTm90ZTogeC1saS1mb3JtYXQgZW5zdXJlcyBlcnJvciByZXNwb25zZXMgYXJlIG5vdCByZXR1cm5lZCBpbiBYTUwKCQkJCQlwLmhlYWRlcnNbJ3gtbGktZm9ybWF0J10gPSAnanNvbic7CgkJCQkJcC5wcm94eSA9IHRydWU7CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9CgoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfQoJfSk7CgoJZnVuY3Rpb24gZm9ybWF0RXJyb3IobykgewoJCWlmIChvICYmICdlcnJvckNvZGUnIGluIG8pIHsKCQkJby5lcnJvciA9IHsKCQkJCWNvZGU6IG8uc3RhdHVzLAoJCQkJbWVzc2FnZTogby5tZXNzYWdlCgkJCX07CgkJfQoJfQoKCWZ1bmN0aW9uIGZvcm1hdFVzZXIobykgewoJCWlmIChvLmVycm9yKSB7CgkJCXJldHVybjsKCQl9CgoJCW8uZmlyc3RfbmFtZSA9IG8uZmlyc3ROYW1lOwoJCW8ubGFzdF9uYW1lID0gby5sYXN0TmFtZTsKCQlvLm5hbWUgPSBvLmZvcm1hdHRlZE5hbWUgfHwgKG8uZmlyc3RfbmFtZSArICcgJyArIG8ubGFzdF9uYW1lKTsKCQlvLnRodW1ibmFpbCA9IG8ucGljdHVyZVVybDsKCQlvLmVtYWlsID0gby5lbWFpbEFkZHJlc3M7CgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvKSB7CgkJZm9ybWF0RXJyb3Iobyk7CgkJcGFnaW5nKG8pOwoJCWlmIChvLnZhbHVlcykgewoJCQlvLmRhdGEgPSBvLnZhbHVlcy5tYXAoZm9ybWF0VXNlcik7CgkJCWRlbGV0ZSBvLnZhbHVlczsKCQl9CgoJCXJldHVybiBvOwoJfQoKCWZ1bmN0aW9uIHBhZ2luZyhyZXMpIHsKCQlpZiAoJ19jb3VudCcgaW4gcmVzICYmICdfc3RhcnQnIGluIHJlcyAmJiAocmVzLl9jb3VudCArIHJlcy5fc3RhcnQpIDwgcmVzLl90b3RhbCkgewoJCQlyZXMucGFnaW5nID0gewoJCQkJbmV4dDogJz9zdGFydD0nICsgKHJlcy5fc3RhcnQgKyByZXMuX2NvdW50KSArICcmY291bnQ9JyArIHJlcy5fY291bnQKCQkJfTsKCQl9Cgl9CgoJZnVuY3Rpb24gZW1wdHkobywgaGVhZGVycykgewoJCWlmIChKU09OLnN0cmluZ2lmeShvKSA9PT0gJ3t9JyAmJiBoZWFkZXJzLnN0YXR1c0NvZGUgPT09IDIwMCkgewoJCQlvLnN1Y2Nlc3MgPSB0cnVlOwoJCX0KCX0KCglmdW5jdGlvbiBmb3JtYXRRdWVyeShxcykgewoJCS8vIExpbmtlZEluIHNpZ25zIHJlcXVlc3RzIHdpdGggdGhlIHBhcmFtZXRlciAnb2F1dGgyX2FjY2Vzc190b2tlbicKCQkvLyAuLi4geWVhaCBhbm90aGVyIG9uZSB3aG8gdGhpbmtzIHRoZXkgc2hvdWxkIGJlIGRpZmZlcmVudCEKCQlpZiAocXMuYWNjZXNzX3Rva2VuKSB7CgkJCXFzLm9hdXRoMl9hY2Nlc3NfdG9rZW4gPSBxcy5hY2Nlc3NfdG9rZW47CgkJCWRlbGV0ZSBxcy5hY2Nlc3NfdG9rZW47CgkJfQoJfQoKCWZ1bmN0aW9uIGxpa2UocCwgY2FsbGJhY2spIHsKCQlwLmhlYWRlcnNbJ3gtbGktZm9ybWF0J10gPSAnanNvbic7CgkJdmFyIGlkID0gcC5kYXRhLmlkOwoJCXAuZGF0YSA9IChwLm1ldGhvZCAhPT0gJ2RlbGV0ZScpLnRvU3RyaW5nKCk7CgkJcC5tZXRob2QgPSAncHV0JzsKCQljYWxsYmFjaygncGVvcGxlL34vbmV0d29yay91cGRhdGVzL2tleT0nICsgaWQgKyAnL2lzLWxpa2VkJyk7Cgl9Cgp9KShoZWxsbyk7CgovLyBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVycy5zb3VuZGNsb3VkLmNvbS9kb2NzL2FwaS9yZWZlcmVuY2UKKGZ1bmN0aW9uKGhlbGxvKSB7CgoJaGVsbG8uaW5pdCh7CgoJCXNvdW5kY2xvdWQ6IHsKCQkJbmFtZTogJ1NvdW5kQ2xvdWQnLAoKCQkJb2F1dGg6IHsKCQkJCXZlcnNpb246IDIsCgkJCQlhdXRoOiAnaHR0cHM6Ly9zb3VuZGNsb3VkLmNvbS9jb25uZWN0JywKCQkJCWdyYW50OiAnaHR0cHM6Ly9zb3VuZGNsb3VkLmNvbS9vYXV0aDIvdG9rZW4nCgkJCX0sCgoJCQkvLyBSZXF1ZXN0IHBhdGggdHJhbnNsYXRlZAoJCQliYXNlOiAnaHR0cHM6Ly9hcGkuc291bmRjbG91ZC5jb20vJywKCQkJZ2V0OiB7CgkJCQltZTogJ21lLmpzb24nLAoKCQkJCS8vIEh0dHA6Ly9kZXZlbG9wZXJzLnNvdW5kY2xvdWQuY29tL2RvY3MvYXBpL3JlZmVyZW5jZSNtZQoJCQkJJ21lL2ZyaWVuZHMnOiAnbWUvZm9sbG93aW5ncy5qc29uJywKCQkJCSdtZS9mb2xsb3dlcnMnOiAnbWUvZm9sbG93ZXJzLmpzb24nLAoJCQkJJ21lL2ZvbGxvd2luZyc6ICdtZS9mb2xsb3dpbmdzLmpzb24nLAoKCQkJCS8vIFNlZTogaHR0cDovL2RldmVsb3BlcnMuc291bmRjbG91ZC5jb20vZG9jcy9hcGkvcmVmZXJlbmNlI2FjdGl2aXRpZXMKCQkJCSdkZWZhdWx0JzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCgkJCQkJLy8gSW5jbHVkZSAnLmpzb24gYXQgdGhlIGVuZCBvZiBlYWNoIHJlcXVlc3QnCgkJCQkJY2FsbGJhY2socC5wYXRoICsgJy5qc29uJyk7CgkJCQl9CgkJCX0sCgoJCQkvLyBSZXNwb25zZSBoYW5kbGVycwoJCQl3cmFwOiB7CgkJCQltZTogZnVuY3Rpb24obykgewoJCQkJCWZvcm1hdFVzZXIobyk7CgkJCQkJcmV0dXJuIG87CgkJCQl9LAoKCQkJCSdkZWZhdWx0JzogZnVuY3Rpb24obykgewoJCQkJCWlmIChBcnJheS5pc0FycmF5KG8pKSB7CgkJCQkJCW8gPSB7CgkJCQkJCQlkYXRhOiBvLm1hcChmb3JtYXRVc2VyKQoJCQkJCQl9OwoJCQkJCX0KCgkJCQkJcGFnaW5nKG8pOwoJCQkJCXJldHVybiBvOwoJCQkJfQoJCQl9LAoKCQkJeGhyOiBmb3JtYXRSZXF1ZXN0LAoJCQlqc29ucDogZm9ybWF0UmVxdWVzdAoJCX0KCX0pOwoKCWZ1bmN0aW9uIGZvcm1hdFJlcXVlc3QocCwgcXMpIHsKCQkvLyBBbHRlciB0aGUgcXVlcnlzdHJpbmcKCQl2YXIgdG9rZW4gPSBxcy5hY2Nlc3NfdG9rZW47CgkJZGVsZXRlIHFzLmFjY2Vzc190b2tlbjsKCQlxcy5vYXV0aF90b2tlbiA9IHRva2VuOwoJCXFzWydfc3RhdHVzX2NvZGVfbWFwWzMwMl0nXSA9IDIwMDsKCQlyZXR1cm4gdHJ1ZTsKCX0KCglmdW5jdGlvbiBmb3JtYXRVc2VyKG8pIHsKCQlpZiAoby5pZCkgewoJCQlvLnBpY3R1cmUgPSBvLmF2YXRhcl91cmw7CgkJCW8udGh1bWJuYWlsID0gby5hdmF0YXJfdXJsOwoJCQlvLm5hbWUgPSBvLnVzZXJuYW1lIHx8IG8uZnVsbF9uYW1lOwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJLy8gU2VlOiBodHRwOi8vZGV2ZWxvcGVycy5zb3VuZGNsb3VkLmNvbS9kb2NzL2FwaS9yZWZlcmVuY2UjYWN0aXZpdGllcwoJZnVuY3Rpb24gcGFnaW5nKHJlcykgewoJCWlmICgnbmV4dF9ocmVmJyBpbiByZXMpIHsKCQkJcmVzLnBhZ2luZyA9IHsKCQkJCW5leHQ6IHJlcy5uZXh0X2hyZWYKCQkJfTsKCQl9Cgl9Cgp9KShoZWxsbyk7CgooZnVuY3Rpb24oaGVsbG8pIHsKCgl2YXIgYmFzZSA9ICdodHRwczovL2FwaS50d2l0dGVyLmNvbS8nOwoKCWhlbGxvLmluaXQoewoKCQl0d2l0dGVyOiB7CgoJCQkvLyBFbnN1cmUgdGhhdCB5b3UgZGVmaW5lIGFuIG9hdXRoX3Byb3h5CgkJCW9hdXRoOiB7CgkJCQl2ZXJzaW9uOiAnMS4wYScsCgkJCQlhdXRoOiBiYXNlICsgJ29hdXRoL2F1dGhlbnRpY2F0ZScsCgkJCQlyZXF1ZXN0OiBiYXNlICsgJ29hdXRoL3JlcXVlc3RfdG9rZW4nLAoJCQkJdG9rZW46IGJhc2UgKyAnb2F1dGgvYWNjZXNzX3Rva2VuJwoJCQl9LAoKCQkJbG9naW46IGZ1bmN0aW9uKHApIHsKCQkJCS8vIFJlYXV0aGVudGljYXRlCgkJCQkvLyBodHRwczovL2Rldi50d2l0dGVyLmNvbS9vYXV0aC9yZWZlcmVuY2UvZ2V0L29hdXRoL2F1dGhlbnRpY2F0ZQoJCQkJdmFyIHByZWZpeCA9ICc/Zm9yY2VfbG9naW49dHJ1ZSc7CgkJCQl0aGlzLm9hdXRoLmF1dGggPSB0aGlzLm9hdXRoLmF1dGgucmVwbGFjZShwcmVmaXgsICcnKSArIChwLm9wdGlvbnMuZm9yY2UgPyBwcmVmaXggOiAnJyk7CgkJCX0sCgoJCQliYXNlOiBiYXNlICsgJzEuMS8nLAoKCQkJZ2V0OiB7CgkJCQltZTogJ2FjY291bnQvdmVyaWZ5X2NyZWRlbnRpYWxzLmpzb24nLAoJCQkJJ21lL2ZyaWVuZHMnOiAnZnJpZW5kcy9saXN0Lmpzb24/Y291bnQ9QHtsaW1pdHwyMDB9JywKCQkJCSdtZS9mb2xsb3dpbmcnOiAnZnJpZW5kcy9saXN0Lmpzb24/Y291bnQ9QHtsaW1pdHwyMDB9JywKCQkJCSdtZS9mb2xsb3dlcnMnOiAnZm9sbG93ZXJzL2xpc3QuanNvbj9jb3VudD1Ae2xpbWl0fDIwMH0nLAoKCQkJCS8vIEh0dHBzOi8vZGV2LnR3aXR0ZXIuY29tL2RvY3MvYXBpLzEuMS9nZXQvc3RhdHVzZXMvdXNlcl90aW1lbGluZQoJCQkJJ21lL3NoYXJlJzogJ3N0YXR1c2VzL3VzZXJfdGltZWxpbmUuanNvbj9jb3VudD1Ae2xpbWl0fDIwMH0nLAoKCQkJCS8vIEh0dHBzOi8vZGV2LnR3aXR0ZXIuY29tL3Jlc3QvcmVmZXJlbmNlL2dldC9mYXZvcml0ZXMvbGlzdAoJCQkJJ21lL2xpa2UnOiAnZmF2b3JpdGVzL2xpc3QuanNvbj9jb3VudD1Ae2xpbWl0fDIwMH0nCgkJCX0sCgoJCQlwb3N0OiB7CgkJCQknbWUvc2hhcmUnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykgewoKCQkJCQl2YXIgZGF0YSA9IHAuZGF0YTsKCQkJCQlwLmRhdGEgPSBudWxsOwoKCQkJCQl2YXIgc3RhdHVzID0gW107CgoJCQkJCS8vIENoYW5nZSBtZXNzYWdlIHRvIHN0YXR1cwoJCQkJCWlmIChkYXRhLm1lc3NhZ2UpIHsKCQkJCQkJc3RhdHVzLnB1c2goZGF0YS5tZXNzYWdlKTsKCQkJCQkJZGVsZXRlIGRhdGEubWVzc2FnZTsKCQkJCQl9CgoJCQkJCS8vIElmIGxpbmsgaXMgZ2l2ZW4KCQkJCQlpZiAoZGF0YS5saW5rKSB7CgkJCQkJCXN0YXR1cy5wdXNoKGRhdGEubGluayk7CgkJCQkJCWRlbGV0ZSBkYXRhLmxpbms7CgkJCQkJfQoKCQkJCQlpZiAoZGF0YS5waWN0dXJlKSB7CgkJCQkJCXN0YXR1cy5wdXNoKGRhdGEucGljdHVyZSk7CgkJCQkJCWRlbGV0ZSBkYXRhLnBpY3R1cmU7CgkJCQkJfQoKCQkJCQkvLyBDb21wb3VuZCBhbGwgdGhlIGNvbXBvbmVudHMKCQkJCQlpZiAoc3RhdHVzLmxlbmd0aCkgewoJCQkJCQlkYXRhLnN0YXR1cyA9IHN0YXR1cy5qb2luKCcgJyk7CgkJCQkJfQoKCQkJCQkvLyBUd2VldCBtZWRpYQoJCQkJCWlmIChkYXRhLmZpbGUpIHsKCQkJCQkJZGF0YVsnbWVkaWFbXSddID0gZGF0YS5maWxlOwoJCQkJCQlkZWxldGUgZGF0YS5maWxlOwoJCQkJCQlwLmRhdGEgPSBkYXRhOwoJCQkJCQljYWxsYmFjaygnc3RhdHVzZXMvdXBkYXRlX3dpdGhfbWVkaWEuanNvbicpOwoJCQkJCX0KCgkJCQkJLy8gUmV0d2VldD8KCQkJCQllbHNlIGlmICgnaWQnIGluIGRhdGEpIHsKCQkJCQkJY2FsbGJhY2soJ3N0YXR1c2VzL3JldHdlZXQvJyArIGRhdGEuaWQgKyAnLmpzb24nKTsKCQkJCQl9CgoJCQkJCS8vIFR3ZWV0CgkJCQkJZWxzZSB7CgkJCQkJCS8vIEFzc2lnbiB0aGUgcG9zdCBib2R5IHRvIHRoZSBxdWVyeSBwYXJhbWV0ZXJzCgkJCQkJCWhlbGxvLnV0aWxzLmV4dGVuZChwLnF1ZXJ5LCBkYXRhKTsKCQkJCQkJY2FsbGJhY2soJ3N0YXR1c2VzL3VwZGF0ZS5qc29uP2luY2x1ZGVfZW50aXRpZXM9MScpOwoJCQkJCX0KCQkJCX0sCgoJCQkJLy8gU2VlOiBodHRwczovL2Rldi50d2l0dGVyLmNvbS9yZXN0L3JlZmVyZW5jZS9wb3N0L2Zhdm9yaXRlcy9jcmVhdGUKCQkJCSdtZS9saWtlJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCQkJCQl2YXIgaWQgPSBwLmRhdGEuaWQ7CgkJCQkJcC5kYXRhID0gbnVsbDsKCQkJCQljYWxsYmFjaygnZmF2b3JpdGVzL2NyZWF0ZS5qc29uP2lkPScgKyBpZCk7CgkJCQl9CgkJCX0sCgoJCQlkZWw6IHsKCgkJCQkvLyBTZWU6IGh0dHBzOi8vZGV2LnR3aXR0ZXIuY29tL3Jlc3QvcmVmZXJlbmNlL3Bvc3QvZmF2b3JpdGVzL2Rlc3Ryb3kKCQkJCSdtZS9saWtlJzogZnVuY3Rpb24oKSB7CgkJCQkJcC5tZXRob2QgPSAncG9zdCc7CgkJCQkJdmFyIGlkID0gcC5kYXRhLmlkOwoJCQkJCXAuZGF0YSA9IG51bGw7CgkJCQkJY2FsbGJhY2soJ2Zhdm9yaXRlcy9kZXN0cm95Lmpzb24/aWQ9JyArIGlkKTsKCQkJCX0KCQkJfSwKCgkJCXdyYXA6IHsKCQkJCW1lOiBmdW5jdGlvbihyZXMpIHsKCQkJCQlmb3JtYXRFcnJvcihyZXMpOwoJCQkJCWZvcm1hdFVzZXIocmVzKTsKCQkJCQlyZXR1cm4gcmVzOwoJCQkJfSwKCgkJCQknbWUvZnJpZW5kcyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvZm9sbG93ZXJzJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9mb2xsb3dpbmcnOiBmb3JtYXRGcmllbmRzLAoKCQkJCSdtZS9zaGFyZSc6IGZ1bmN0aW9uKHJlcykgewoJCQkJCWZvcm1hdEVycm9yKHJlcyk7CgkJCQkJcGFnaW5nKHJlcyk7CgkJCQkJaWYgKCFyZXMuZXJyb3IgJiYgJ2xlbmd0aCcgaW4gcmVzKSB7CgkJCQkJCXJldHVybiB7ZGF0YTogcmVzfTsKCQkJCQl9CgoJCQkJCXJldHVybiByZXM7CgkJCQl9LAoKCQkJCSdkZWZhdWx0JzogZnVuY3Rpb24ocmVzKSB7CgkJCQkJcmVzID0gYXJyYXlUb0RhdGFSZXNwb25zZShyZXMpOwoJCQkJCXBhZ2luZyhyZXMpOwoJCQkJCXJldHVybiByZXM7CgkJCQl9CgkJCX0sCgkJCXhocjogZnVuY3Rpb24ocCkgewoKCQkJCS8vIFJlbHkgb24gdGhlIHByb3h5IGZvciBub24tR0VUIHJlcXVlc3RzLgoJCQkJcmV0dXJuIChwLm1ldGhvZCAhPT0gJ2dldCcpOwoJCQl9CgkJfQoJfSk7CgoJZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7CgkJaWYgKG8uaWQpIHsKCQkJaWYgKG8ubmFtZSkgewoJCQkJdmFyIG0gPSBvLm5hbWUuc3BsaXQoJyAnKTsKCQkJCW8uZmlyc3RfbmFtZSA9IG0uc2hpZnQoKTsKCQkJCW8ubGFzdF9uYW1lID0gbS5qb2luKCcgJyk7CgkJCX0KCgkJCS8vIFNlZTogaHR0cHM6Ly9kZXYudHdpdHRlci5jb20vb3ZlcnZpZXcvZ2VuZXJhbC91c2VyLXByb2ZpbGUtaW1hZ2VzLWFuZC1iYW5uZXJzCgkJCW8udGh1bWJuYWlsID0gby5wcm9maWxlX2ltYWdlX3VybF9odHRwcyB8fCBvLnByb2ZpbGVfaW1hZ2VfdXJsOwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvKSB7CgkJZm9ybWF0RXJyb3Iobyk7CgkJcGFnaW5nKG8pOwoJCWlmIChvLnVzZXJzKSB7CgkJCW8uZGF0YSA9IG8udXNlcnMubWFwKGZvcm1hdFVzZXIpOwoJCQlkZWxldGUgby51c2VyczsKCQl9CgoJCXJldHVybiBvOwoJfQoKCWZ1bmN0aW9uIGZvcm1hdEVycm9yKG8pIHsKCQlpZiAoby5lcnJvcnMpIHsKCQkJdmFyIGUgPSBvLmVycm9yc1swXTsKCQkJby5lcnJvciA9IHsKCQkJCWNvZGU6ICdyZXF1ZXN0X2ZhaWxlZCcsCgkJCQltZXNzYWdlOiBlLm1lc3NhZ2UKCQkJfTsKCQl9Cgl9CgoJLy8gVGFrZSBhIGN1cnNvciBhbmQgYWRkIGl0IHRvIHRoZSBwYXRoCglmdW5jdGlvbiBwYWdpbmcocmVzKSB7CgkJLy8gRG9lcyB0aGUgcmVzcG9uc2UgaW5jbHVkZSBhICduZXh0X2N1cnNvcl9zdHJpbmcnCgkJaWYgKCduZXh0X2N1cnNvcl9zdHInIGluIHJlcykgewoJCQkvLyBTZWU6IGh0dHBzOi8vZGV2LnR3aXR0ZXIuY29tL2RvY3MvbWlzYy9jdXJzb3JpbmcKCQkJcmVzLnBhZ2luZyA9IHsKCQkJCW5leHQ6ICc/Y3Vyc29yPScgKyByZXMubmV4dF9jdXJzb3Jfc3RyCgkJCX07CgkJfQoJfQoKCWZ1bmN0aW9uIGFycmF5VG9EYXRhUmVzcG9uc2UocmVzKSB7CgkJcmV0dXJuIEFycmF5LmlzQXJyYXkocmVzKSA/IHtkYXRhOiByZXN9IDogcmVzOwoJfQoKCS8qKgoJLy8gVGhlIGRvY3VtZW50YXRpb24gc2F5cyB0byBkZWZpbmUgdXNlciBpbiB0aGUgcmVxdWVzdAoJLy8gQWx0aG91Z2ggaXRzIG5vdCBhY3R1YWxseSByZXF1aXJlZC4KCgl2YXIgdXNlcl9pZDsKCglmdW5jdGlvbiB3aXRoVXNlcklkKGNhbGxiYWNrKXsKCQlpZih1c2VyX2lkKXsKCQkJY2FsbGJhY2sodXNlcl9pZCk7CgkJfQoJCWVsc2V7CgkJCWhlbGxvLmFwaSgndHdpdHRlcjovbWUnLCBmdW5jdGlvbihvKXsKCQkJCXVzZXJfaWQgPSBvLmlkOwoJCQkJY2FsbGJhY2soby5pZCk7CgkJCX0pOwoJCX0KCX0KCglmdW5jdGlvbiBzaWduKHVybCl7CgkJcmV0dXJuIGZ1bmN0aW9uKHAsIGNhbGxiYWNrKXsKCQkJd2l0aFVzZXJJZChmdW5jdGlvbih1c2VyX2lkKXsKCQkJCWNhbGxiYWNrKHVybCsnP3VzZXJfaWQ9Jyt1c2VyX2lkKTsKCQkJfSk7CgkJfTsKCX0KCSovCgp9KShoZWxsbyk7CgovLyBWa29udGFrdGUgKHZrLmNvbSkKKGZ1bmN0aW9uKGhlbGxvKSB7CgoJaGVsbG8uaW5pdCh7CgoJCXZrOiB7CgkJCW5hbWU6ICdWaycsCgoJCQkvLyBTZWUgaHR0cHM6Ly92ay5jb20vZGV2L29hdXRoX2RpYWxvZwoJCQlvYXV0aDogewoJCQkJdmVyc2lvbjogMiwKCQkJCWF1dGg6ICdodHRwczovL29hdXRoLnZrLmNvbS9hdXRob3JpemUnLAoJCQkJZ3JhbnQ6ICdodHRwczovL29hdXRoLnZrLmNvbS9hY2Nlc3NfdG9rZW4nCgkJCX0sCgoJCQkvLyBBdXRob3JpemF0aW9uIHNjb3BlcwoJCQkvLyBTZWUgaHR0cHM6Ly92ay5jb20vZGV2L3Blcm1pc3Npb25zCgkJCXNjb3BlOiB7CgkJCQllbWFpbDogJ2VtYWlsJywKCQkJCWZyaWVuZHM6ICdmcmllbmRzJywKCQkJCXBob3RvczogJ3Bob3RvcycsCgkJCQl2aWRlb3M6ICd2aWRlbycsCgkJCQlzaGFyZTogJ3NoYXJlJywKCQkJCW9mZmxpbmVfYWNjZXNzOiAnb2ZmbGluZScKCQkJfSwKCgkJCS8vIFJlZnJlc2ggdGhlIGFjY2Vzc190b2tlbgoJCQlyZWZyZXNoOiB0cnVlLAoKCQkJbG9naW46IGZ1bmN0aW9uKHApIHsKCQkJCXAucXMuZGlzcGxheSA9IHdpbmRvdy5uYXZpZ2F0b3IgJiYKCQkJCQl3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCAmJgoJCQkJCS9pcGFkfHBob25lfHBob25lfGFuZHJvaWQvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSkgPyAnbW9iaWxlJyA6ICdwb3B1cCc7CgkJCX0sCgoJCQkvLyBBUEkgQmFzZSBVUkwKCQkJYmFzZTogJ2h0dHBzOi8vYXBpLnZrLmNvbS9tZXRob2QvJywKCgkJCS8vIE1hcCBHRVQgcmVxdWVzdHMKCQkJZ2V0OiB7CgkJCQltZTogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCQkJCQlwLnF1ZXJ5LmZpZWxkcyA9ICdpZCxmaXJzdF9uYW1lLGxhc3RfbmFtZSxwaG90b19tYXgnOwoJCQkJCWNhbGxiYWNrKCd1c2Vycy5nZXQnKTsKCQkJCX0KCQkJfSwKCgkJCXdyYXA6IHsKCQkJCW1lOiBmdW5jdGlvbihyZXMsIGhlYWRlcnMsIHJlcSkgewoJCQkJCWZvcm1hdEVycm9yKHJlcyk7CgkJCQkJcmV0dXJuIGZvcm1hdFVzZXIocmVzLCByZXEpOwoJCQkJfQoJCQl9LAoKCQkJLy8gTm8gWEhSCgkJCXhocjogZmFsc2UsCgoJCQkvLyBBbGwgcmVxdWVzdHMgc2hvdWxkIGJlIEpTT05QIGFzIG9mIG1pc3NpbmcgQ09SUyBoZWFkZXJzIGluIGh0dHBzOi8vYXBpLnZrLmNvbS9tZXRob2QvKgoJCQlqc29ucDogdHJ1ZSwKCgkJCS8vIE5vIGZvcm0KCQkJZm9ybTogZmFsc2UKCQl9Cgl9KTsKCglmdW5jdGlvbiBmb3JtYXRVc2VyKG8sIHJlcSkgewoKCQlpZiAobyAhPT0gbnVsbCAmJiAncmVzcG9uc2UnIGluIG8gJiYgby5yZXNwb25zZSAhPT0gbnVsbCAmJiBvLnJlc3BvbnNlLmxlbmd0aCkgewoJCQlvID0gby5yZXNwb25zZVswXTsKCQkJby5pZCA9IG8udWlkOwoJCQlvLnRodW1ibmFpbCA9IG8ucGljdHVyZSA9IG8ucGhvdG9fbWF4OwoJCQlvLm5hbWUgPSBvLmZpcnN0X25hbWUgKyAnICcgKyBvLmxhc3RfbmFtZTsKCgkJCWlmIChyZXEuYXV0aFJlc3BvbnNlICYmIHJlcS5hdXRoUmVzcG9uc2UuZW1haWwgIT09IG51bGwpCgkJCQlvLmVtYWlsID0gcmVxLmF1dGhSZXNwb25zZS5lbWFpbDsKCQl9CgoJCXJldHVybiBvOwoJfQoKCWZ1bmN0aW9uIGZvcm1hdEVycm9yKG8pIHsKCgkJaWYgKG8uZXJyb3IpIHsKCQkJdmFyIGUgPSBvLmVycm9yOwoJCQlvLmVycm9yID0gewoJCQkJY29kZTogZS5lcnJvcl9jb2RlLAoJCQkJbWVzc2FnZTogZS5lcnJvcl9tc2cKCQkJfTsKCQl9Cgl9Cgp9KShoZWxsbyk7CgooZnVuY3Rpb24oaGVsbG8pIHsKCgloZWxsby5pbml0KHsKCQl3aW5kb3dzOiB7CgkJCW5hbWU6ICdXaW5kb3dzIGxpdmUnLAoKCQkJLy8gUkVGOiBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaGgyNDM2NDEuYXNweAoJCQlvYXV0aDogewoJCQkJdmVyc2lvbjogMiwKCQkJCWF1dGg6ICdodHRwczovL2xvZ2luLmxpdmUuY29tL29hdXRoMjBfYXV0aG9yaXplLnNyZicsCgkJCQlncmFudDogJ2h0dHBzOi8vbG9naW4ubGl2ZS5jb20vb2F1dGgyMF90b2tlbi5zcmYnCgkJCX0sCgoJCQkvLyBSZWZyZXNoIHRoZSBhY2Nlc3NfdG9rZW4gb25jZSBleHBpcmVkCgkJCXJlZnJlc2g6IHRydWUsCgoJCQlsb2dvdXQ6IGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuICdodHRwOi8vbG9naW4ubGl2ZS5jb20vb2F1dGgyMF9sb2dvdXQuc3JmP3RzPScgKyAobmV3IERhdGUoKSkuZ2V0VGltZSgpOwoJCQl9LAoKCQkJLy8gQXV0aG9yaXphdGlvbiBzY29wZXMKCQkJc2NvcGU6IHsKCQkJCWJhc2ljOiAnd2wuc2lnbmluLHdsLmJhc2ljJywKCQkJCWVtYWlsOiAnd2wuZW1haWxzJywKCQkJCWJpcnRoZGF5OiAnd2wuYmlydGhkYXknLAoJCQkJZXZlbnRzOiAnd2wuY2FsZW5kYXJzJywKCQkJCXBob3RvczogJ3dsLnBob3RvcycsCgkJCQl2aWRlb3M6ICd3bC5waG90b3MnLAoJCQkJZnJpZW5kczogJ3dsLmNvbnRhY3RzX2VtYWlscycsCgkJCQlmaWxlczogJ3dsLnNreWRyaXZlJywKCQkJCXB1Ymxpc2g6ICd3bC5zaGFyZScsCgkJCQlwdWJsaXNoX2ZpbGVzOiAnd2wuc2t5ZHJpdmVfdXBkYXRlJywKCQkJCXNoYXJlOiAnd2wuc2hhcmUnLAoJCQkJY3JlYXRlX2V2ZW50OiAnd2wuY2FsZW5kYXJzX3VwZGF0ZSx3bC5ldmVudHNfY3JlYXRlJywKCQkJCW9mZmxpbmVfYWNjZXNzOiAnd2wub2ZmbGluZV9hY2Nlc3MnCgkJCX0sCgoJCQkvLyBBUEkgYmFzZSBVUkwKCQkJYmFzZTogJ2h0dHBzOi8vYXBpcy5saXZlLm5ldC92NS4wLycsCgoJCQkvLyBNYXAgR0VUIHJlcXVlc3RzCgkJCWdldDogewoKCQkJCS8vIEZyaWVuZHMKCQkJCW1lOiAnbWUnLAoJCQkJJ21lL2ZyaWVuZHMnOiAnbWUvZnJpZW5kcycsCgkJCQknbWUvZm9sbG93aW5nJzogJ21lL2NvbnRhY3RzJywKCQkJCSdtZS9mb2xsb3dlcnMnOiAnbWUvZnJpZW5kcycsCgkJCQknbWUvY29udGFjdHMnOiAnbWUvY29udGFjdHMnLAoKCQkJCSdtZS9hbGJ1bXMnOiAnbWUvYWxidW1zJywKCgkJCQkvLyBJbmNsdWRlIHRoZSBkYXRhW2lkXSBpbiB0aGUgcGF0aAoJCQkJJ21lL2FsYnVtJzogJ0B7aWR9L2ZpbGVzJywKCQkJCSdtZS9waG90byc6ICdAe2lkfScsCgoJCQkJLy8gRmlsZXMKCQkJCSdtZS9maWxlcyc6ICdAe3BhcmVudHxtZS9za3lkcml2ZX0vZmlsZXMnLAoJCQkJJ21lL2ZvbGRlcnMnOiAnQHtpZHxtZS9za3lkcml2ZX0vZmlsZXMnLAoJCQkJJ21lL2ZvbGRlcic6ICdAe2lkfG1lL3NreWRyaXZlfS9maWxlcycKCQkJfSwKCgkJCS8vIE1hcCBQT1NUIHJlcXVlc3RzCgkJCXBvc3Q6IHsKCQkJCSdtZS9hbGJ1bXMnOiAnbWUvYWxidW1zJywKCQkJCSdtZS9hbGJ1bSc6ICdAe2lkfS9maWxlcy8nLAoKCQkJCSdtZS9mb2xkZXJzJzogJ0B7aWR8bWUvc2t5ZHJpdmUvfScsCgkJCQknbWUvZmlsZXMnOiAnQHtwYXJlbnR8bWUvc2t5ZHJpdmV9L2ZpbGVzJwoJCQl9LAoKCQkJLy8gTWFwIERFTEVURSByZXF1ZXN0cwoJCQlkZWw6IHsKCQkJCS8vIEluY2x1ZGUgdGhlIGRhdGFbaWRdIGluIHRoZSBwYXRoCgkJCQknbWUvYWxidW0nOiAnQHtpZH0nLAoJCQkJJ21lL3Bob3RvJzogJ0B7aWR9JywKCQkJCSdtZS9mb2xkZXInOiAnQHtpZH0nLAoJCQkJJ21lL2ZpbGVzJzogJ0B7aWR9JwoJCQl9LAoKCQkJd3JhcDogewoJCQkJbWU6IGZvcm1hdFVzZXIsCgoJCQkJJ21lL2ZyaWVuZHMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2NvbnRhY3RzJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9mb2xsb3dlcnMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2ZvbGxvd2luZyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvYWxidW1zJzogZm9ybWF0QWxidW1zLAoJCQkJJ21lL3Bob3Rvcyc6IGZvcm1hdERlZmF1bHQsCgkJCQknZGVmYXVsdCc6IGZvcm1hdERlZmF1bHQKCQkJfSwKCgkJCXhocjogZnVuY3Rpb24ocCkgewoJCQkJaWYgKHAubWV0aG9kICE9PSAnZ2V0JyAmJiBwLm1ldGhvZCAhPT0gJ2RlbGV0ZScgJiYgIWhlbGxvLnV0aWxzLmhhc0JpbmFyeShwLmRhdGEpKSB7CgoJCQkJCS8vIERvZXMgdGhpcyBoYXZlIGEgZGF0YS11cmkgdG8gdXBsb2FkIGFzIGEgZmlsZT8KCQkJCQlpZiAodHlwZW9mIChwLmRhdGEuZmlsZSkgPT09ICdzdHJpbmcnKSB7CgkJCQkJCXAuZGF0YS5maWxlID0gaGVsbG8udXRpbHMudG9CbG9iKHAuZGF0YS5maWxlKTsKCQkJCQl9CgkJCQkJZWxzZSB7CgkJCQkJCXAuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHAuZGF0YSk7CgkJCQkJCXAuaGVhZGVycyA9IHsKCQkJCQkJCSdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKCQkJCQkJfTsKCQkJCQl9CgkJCQl9CgoJCQkJcmV0dXJuIHRydWU7CgkJCX0sCgoJCQlqc29ucDogZnVuY3Rpb24ocCkgewoJCQkJaWYgKHAubWV0aG9kICE9PSAnZ2V0JyAmJiAhaGVsbG8udXRpbHMuaGFzQmluYXJ5KHAuZGF0YSkpIHsKCQkJCQlwLmRhdGEubWV0aG9kID0gcC5tZXRob2Q7CgkJCQkJcC5tZXRob2QgPSAnZ2V0JzsKCQkJCX0KCQkJfQoJCX0KCX0pOwoKCWZ1bmN0aW9uIGZvcm1hdERlZmF1bHQobykgewoJCWlmICgnZGF0YScgaW4gbykgewoJCQlvLmRhdGEuZm9yRWFjaChmdW5jdGlvbihkKSB7CgkJCQlpZiAoZC5waWN0dXJlKSB7CgkJCQkJZC50aHVtYm5haWwgPSBkLnBpY3R1cmU7CgkJCQl9CgoJCQkJaWYgKGQuaW1hZ2VzKSB7CgkJCQkJZC5waWN0dXJlcyA9IGQuaW1hZ2VzCgkJCQkJCS5tYXAoZm9ybWF0SW1hZ2UpCgkJCQkJCS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsKCQkJCQkJCXJldHVybiBhLndpZHRoIC0gYi53aWR0aDsKCQkJCQkJfSk7CgkJCQl9CgkJCX0pOwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0SW1hZ2UoaW1hZ2UpIHsKCQlyZXR1cm4gewoJCQl3aWR0aDogaW1hZ2Uud2lkdGgsCgkJCWhlaWdodDogaW1hZ2UuaGVpZ2h0LAoJCQlzb3VyY2U6IGltYWdlLnNvdXJjZQoJCX07Cgl9CgoJZnVuY3Rpb24gZm9ybWF0QWxidW1zKG8pIHsKCQlpZiAoJ2RhdGEnIGluIG8pIHsKCQkJby5kYXRhLmZvckVhY2goZnVuY3Rpb24oZCkgewoJCQkJZC5waG90b3MgPSBkLmZpbGVzID0gJ2h0dHBzOi8vYXBpcy5saXZlLm5ldC92NS4wLycgKyBkLmlkICsgJy9waG90b3MnOwoJCQl9KTsKCQl9CgoJCXJldHVybiBvOwoJfQoKCWZ1bmN0aW9uIGZvcm1hdFVzZXIobywgaGVhZGVycywgcmVxKSB7CgkJaWYgKG8uaWQpIHsKCQkJdmFyIHRva2VuID0gcmVxLnF1ZXJ5LmFjY2Vzc190b2tlbjsKCQkJaWYgKG8uZW1haWxzKSB7CgkJCQlvLmVtYWlsID0gby5lbWFpbHMucHJlZmVycmVkOwoJCQl9CgoJCQkvLyBJZiB0aGlzIGlzIG5vdCBhbiBub24tbmV0d29yayBmcmllbmQKCQkJaWYgKG8uaXNfZnJpZW5kICE9PSBmYWxzZSkgewoJCQkJLy8gVXNlIHRoZSBpZCBvZiB0aGUgdXNlcl9pZCBpZiBhdmFpbGFibGUKCQkJCXZhciBpZCA9IChvLnVzZXJfaWQgfHwgby5pZCk7CgkJCQlvLnRodW1ibmFpbCA9IG8ucGljdHVyZSA9ICdodHRwczovL2FwaXMubGl2ZS5uZXQvdjUuMC8nICsgaWQgKyAnL3BpY3R1cmU/YWNjZXNzX3Rva2VuPScgKyB0b2tlbjsKCQkJfQoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvLCBoZWFkZXJzLCByZXEpIHsKCQlpZiAoJ2RhdGEnIGluIG8pIHsKCQkJby5kYXRhLmZvckVhY2goZnVuY3Rpb24oZCkgewoJCQkJZm9ybWF0VXNlcihkLCBoZWFkZXJzLCByZXEpOwoJCQl9KTsKCQl9CgoJCXJldHVybiBvOwoJfQoKfSkoaGVsbG8pOwoKKGZ1bmN0aW9uKGhlbGxvKSB7CgoJaGVsbG8uaW5pdCh7CgoJCXlhaG9vOiB7CgoJCQkvLyBFbnN1cmUgdGhhdCB5b3UgZGVmaW5lIGFuIG9hdXRoX3Byb3h5CgkJCW9hdXRoOiB7CgkJCQl2ZXJzaW9uOiAnMS4wYScsCgkJCQlhdXRoOiAnaHR0cHM6Ly9hcGkubG9naW4ueWFob28uY29tL29hdXRoL3YyL3JlcXVlc3RfYXV0aCcsCgkJCQlyZXF1ZXN0OiAnaHR0cHM6Ly9hcGkubG9naW4ueWFob28uY29tL29hdXRoL3YyL2dldF9yZXF1ZXN0X3Rva2VuJywKCQkJCXRva2VuOiAnaHR0cHM6Ly9hcGkubG9naW4ueWFob28uY29tL29hdXRoL3YyL2dldF90b2tlbicKCQkJfSwKCgkJCS8vIExvZ2luIGhhbmRsZXIKCQkJbG9naW46IGZ1bmN0aW9uKHApIHsKCQkJCS8vIENoYW5nZSB0aGUgZGVmYXVsdCBwb3B1cCB3aW5kb3cgdG8gYmUgYXQgbGVhc3QgNTYwCgkJCQkvLyBZYWhvbyBkb2VzIGR5bmFtaWNhbGx5IGNoYW5nZSBpdCBvbiB0aGUgZmx5IGZvciB0aGUgc2lnbmluIHNjcmVlbiAob25seSwgd2hhdCBpZiB5b3VyIGFscmVhZHkgc2lnbmVkIGluKQoJCQkJcC5vcHRpb25zLnBvcHVwLndpZHRoID0gNTYwOwoKCQkJCS8vIFlhaG9vIHRocm93cyBhbiBwYXJhbWV0ZXIgZXJyb3IgaWYgZm9yIHdoYXRldmVyIHJlYXNvbiB0aGUgc3RhdGUuc2NvcGUgY29udGFpbnMgYSBjb21tYSwgc28gbGV0cyByZW1vdmUgc2NvcGUKCQkJCXRyeSB7ZGVsZXRlIHAucXMuc3RhdGUuc2NvcGU7fQoJCQkJY2F0Y2ggKGUpIHt9CgkJCX0sCgoJCQliYXNlOiAnaHR0cHM6Ly9zb2NpYWwueWFob29hcGlzLmNvbS92MS8nLAoKCQkJZ2V0OiB7CgkJCQltZTogeXFsKCdzZWxlY3QgKiBmcm9tIHNvY2lhbC5wcm9maWxlKDApIHdoZXJlIGd1aWQ9bWUnKSwKCQkJCSdtZS9mcmllbmRzJzogeXFsKCdzZWxlY3QgKiBmcm9tIHNvY2lhbC5jb250YWN0cygwKSB3aGVyZSBndWlkPW1lJyksCgkJCQknbWUvZm9sbG93aW5nJzogeXFsKCdzZWxlY3QgKiBmcm9tIHNvY2lhbC5jb250YWN0cygwKSB3aGVyZSBndWlkPW1lJykKCQkJfSwKCQkJd3JhcDogewoJCQkJbWU6IGZvcm1hdFVzZXIsCgoJCQkJLy8gQ2FuJ3QgZ2V0IElEcwoJCQkJLy8gSXQgbWlnaHQgYmUgYmV0dGVyIHRvIGxvb3AgdGhyb3VnaCB0aGUgc29jaWFsLnJlbGF0aW9uc2hpcCB0YWJsZSB3aXRoIGhhcyB1bmlxdWUgSURzIG9mIHVzZXJzLgoJCQkJJ21lL2ZyaWVuZHMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2ZvbGxvd2luZyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknZGVmYXVsdCc6IHBhZ2luZwoJCQl9CgkJfQoJfSk7CgoJLyoKCQkvLyBBdXRvLXJlZnJlc2ggZml4OiBidWcgaW4gWWFob28gY2FuJ3QgZ2V0IHRoaXMgdG8gd29yayB3aXRoIG5vZGUtb2F1dGgtc2hpbQoJCWxvZ2luIDogZnVuY3Rpb24obyl7CgkJCS8vIElzIHRoZSB1c2VyIGFscmVhZHkgbG9nZ2VkIGluCgkJCXZhciBhdXRoID0gaGVsbG8oJ3lhaG9vJykuZ2V0QXV0aFJlc3BvbnNlKCk7CgoJCQkvLyBJcyB0aGlzIGEgcmVmcmVzaCB0b2tlbj8KCQkJaWYoby5vcHRpb25zLmRpc3BsYXk9PT0nbm9uZScmJmF1dGgmJmF1dGguYWNjZXNzX3Rva2VuJiZhdXRoLnJlZnJlc2hfdG9rZW4pewoJCQkJLy8gQWRkIHRoZSBvbGQgdG9rZW4gYW5kIHRoZSByZWZyZXNoIHRva2VuLCBpbmNsdWRpbmcgcGF0aCB0byB0aGUgcXVlcnkKCQkJCS8vIFNlZSBodHRwOi8vZGV2ZWxvcGVyLnlhaG9vLmNvbS9vYXV0aC9ndWlkZS9vYXV0aC1yZWZyZXNoYWNjZXNzdG9rZW4uaHRtbAoJCQkJby5xcy5hY2Nlc3NfdG9rZW4gPSBhdXRoLmFjY2Vzc190b2tlbjsKCQkJCW8ucXMucmVmcmVzaF90b2tlbiA9IGF1dGgucmVmcmVzaF90b2tlbjsKCQkJCW8ucXMudG9rZW5fdXJsID0gJ2h0dHBzOi8vYXBpLmxvZ2luLnlhaG9vLmNvbS9vYXV0aC92Mi9nZXRfdG9rZW4nOwoJCQl9CgkJfSwKCSovCgoJZnVuY3Rpb24gZm9ybWF0RXJyb3IobykgewoJCWlmIChvICYmICdtZXRhJyBpbiBvICYmICdlcnJvcl90eXBlJyBpbiBvLm1ldGEpIHsKCQkJby5lcnJvciA9IHsKCQkJCWNvZGU6IG8ubWV0YS5lcnJvcl90eXBlLAoJCQkJbWVzc2FnZTogby5tZXRhLmVycm9yX21lc3NhZ2UKCQkJfTsKCQl9Cgl9CgoJZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7CgoJCWZvcm1hdEVycm9yKG8pOwoJCWlmIChvLnF1ZXJ5ICYmIG8ucXVlcnkucmVzdWx0cyAmJiBvLnF1ZXJ5LnJlc3VsdHMucHJvZmlsZSkgewoJCQlvID0gby5xdWVyeS5yZXN1bHRzLnByb2ZpbGU7CgkJCW8uaWQgPSBvLmd1aWQ7CgkJCW8ubGFzdF9uYW1lID0gby5mYW1pbHlOYW1lOwoJCQlvLmZpcnN0X25hbWUgPSBvLmdpdmVuTmFtZSB8fCBvLm5pY2tuYW1lOwoJCQl2YXIgYSA9IFtdOwoJCQlpZiAoby5maXJzdF9uYW1lKSB7CgkJCQlhLnB1c2goby5maXJzdF9uYW1lKTsKCQkJfQoKCQkJaWYgKG8ubGFzdF9uYW1lKSB7CgkJCQlhLnB1c2goby5sYXN0X25hbWUpOwoJCQl9CgoJCQlvLm5hbWUgPSBhLmpvaW4oJyAnKTsKCQkJby5lbWFpbCA9IChvLmVtYWlscyAmJiBvLmVtYWlsc1swXSkgPyBvLmVtYWlsc1swXS5oYW5kbGUgOiBudWxsOwoJCQlvLnRodW1ibmFpbCA9IG8uaW1hZ2UgPyBvLmltYWdlLmltYWdlVXJsIDogbnVsbDsKCQl9CgoJCXJldHVybiBvOwoJfQoKCWZ1bmN0aW9uIGZvcm1hdEZyaWVuZHMobywgaGVhZGVycywgcmVxdWVzdCkgewoJCWZvcm1hdEVycm9yKG8pOwoJCXBhZ2luZyhvLCBoZWFkZXJzLCByZXF1ZXN0KTsKCQl2YXIgY29udGFjdDsKCQl2YXIgZmllbGQ7CgkJaWYgKG8ucXVlcnkgJiYgby5xdWVyeS5yZXN1bHRzICYmIG8ucXVlcnkucmVzdWx0cy5jb250YWN0KSB7CgkJCW8uZGF0YSA9IG8ucXVlcnkucmVzdWx0cy5jb250YWN0OwoJCQlkZWxldGUgby5xdWVyeTsKCgkJCWlmICghQXJyYXkuaXNBcnJheShvLmRhdGEpKSB7CgkJCQlvLmRhdGEgPSBbby5kYXRhXTsKCQkJfQoKCQkJby5kYXRhLmZvckVhY2goZm9ybWF0RnJpZW5kKTsKCQl9CgoJCXJldHVybiBvOwoJfQoKCWZ1bmN0aW9uIGZvcm1hdEZyaWVuZChjb250YWN0KSB7CgkJY29udGFjdC5pZCA9IG51bGw7CgoJCS8vICMzNjI6IFJlcG9ydHMgb2YgcmVzcG9uc2VzIHJldHVybmluZyBhIHNpbmdsZSBpdGVtLCByYXRoZXIgdGhhbiBhbiBBcnJheSBvZiBpdGVtcy4KCQkvLyBGb3JtYXQgdGhlIGNvbnRhY3QuZmllbGRzIHRvIGJlIGFuIGFycmF5LgoJCWlmIChjb250YWN0LmZpZWxkcyAmJiAhKGNvbnRhY3QuZmllbGRzIGluc3RhbmNlb2YgQXJyYXkpKSB7CgkJCWNvbnRhY3QuZmllbGRzID0gW2NvbnRhY3QuZmllbGRzXTsKCQl9CgoJCShjb250YWN0LmZpZWxkcyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbihmaWVsZCkgewoJCQlpZiAoZmllbGQudHlwZSA9PT0gJ2VtYWlsJykgewoJCQkJY29udGFjdC5lbWFpbCA9IGZpZWxkLnZhbHVlOwoJCQl9CgoJCQlpZiAoZmllbGQudHlwZSA9PT0gJ25hbWUnKSB7CgkJCQljb250YWN0LmZpcnN0X25hbWUgPSBmaWVsZC52YWx1ZS5naXZlbk5hbWU7CgkJCQljb250YWN0Lmxhc3RfbmFtZSA9IGZpZWxkLnZhbHVlLmZhbWlseU5hbWU7CgkJCQljb250YWN0Lm5hbWUgPSBmaWVsZC52YWx1ZS5naXZlbk5hbWUgKyAnICcgKyBmaWVsZC52YWx1ZS5mYW1pbHlOYW1lOwoJCQl9CgoJCQlpZiAoZmllbGQudHlwZSA9PT0gJ3lhaG9vaWQnKSB7CgkJCQljb250YWN0LmlkID0gZmllbGQudmFsdWU7CgkJCX0KCQl9KTsKCX0KCglmdW5jdGlvbiBwYWdpbmcocmVzLCBoZWFkZXJzLCByZXF1ZXN0KSB7CgoJCS8vIFNlZTogaHR0cDovL2RldmVsb3Blci55YWhvby5jb20veXFsL2d1aWRlL3BhZ2luZy5odG1sI2xvY2FsX2xpbWl0cwoJCWlmIChyZXMucXVlcnkgJiYgcmVzLnF1ZXJ5LmNvdW50ICYmIHJlcXVlc3Qub3B0aW9ucykgewoJCQlyZXMucGFnaW5nID0gewoJCQkJbmV4dDogJz9zdGFydD0nICsgKHJlcy5xdWVyeS5jb3VudCArICgrcmVxdWVzdC5vcHRpb25zLnN0YXJ0IHx8IDEpKQoJCQl9OwoJCX0KCgkJcmV0dXJuIHJlczsKCX0KCglmdW5jdGlvbiB5cWwocSkgewoJCXJldHVybiAnaHR0cHM6Ly9xdWVyeS55YWhvb2FwaXMuY29tL3YxL3lxbD9xPScgKyAocSArICcgbGltaXQgQHtsaW1pdHwxMDB9IG9mZnNldCBAe3N0YXJ0fDB9JykucmVwbGFjZSgvXHMvZywgJyUyMCcpICsgJyZmb3JtYXQ9anNvbic7Cgl9Cgp9KShoZWxsbyk7CgovLyBSZWdpc3RlciBhcyBhbm9ueW1vdXMgQU1EIG1vZHVsZQppZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CglkZWZpbmUoZnVuY3Rpb24oKSB7CgkJcmV0dXJuIGhlbGxvOwoJfSk7Cn0KCi8vIENvbW1vbkpTIG1vZHVsZSBmb3IgYnJvd3NlcmlmeQppZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHsKCW1vZHVsZS5leHBvcnRzID0gaGVsbG87Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKQp9LHsiX3Byb2Nlc3MiOjE0MX1dLDEyNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7CiAgdmFyIGUsIG0KICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMQogIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxCiAgdmFyIGVCaWFzID0gZU1heCA+PiAxCiAgdmFyIG5CaXRzID0gLTcKICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwCiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxCiAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV0KCiAgaSArPSBkCgogIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpCiAgcyA+Pj0gKC1uQml0cykKICBuQml0cyArPSBlTGVuCiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge30KCiAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSkKICBlID4+PSAoLW5CaXRzKQogIG5CaXRzICs9IG1MZW4KICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gbSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fQoKICBpZiAoZSA9PT0gMCkgewogICAgZSA9IDEgLSBlQmlhcwogIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkgewogICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpCiAgfSBlbHNlIHsKICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbikKICAgIGUgPSBlIC0gZUJpYXMKICB9CiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbikKfQoKZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykgewogIHZhciBlLCBtLCBjCiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDEKICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMQogIHZhciBlQmlhcyA9IGVNYXggPj4gMQogIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMCkKICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpCiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xCiAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDAKCiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSkKCiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHsKICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMAogICAgZSA9IGVNYXgKICB9IGVsc2UgewogICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpCiAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7CiAgICAgIGUtLQogICAgICBjICo9IDIKICAgIH0KICAgIGlmIChlICsgZUJpYXMgPj0gMSkgewogICAgICB2YWx1ZSArPSBydCAvIGMKICAgIH0gZWxzZSB7CiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKQogICAgfQogICAgaWYgKHZhbHVlICogYyA+PSAyKSB7CiAgICAgIGUrKwogICAgICBjIC89IDIKICAgIH0KCiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHsKICAgICAgbSA9IDAKICAgICAgZSA9IGVNYXgKICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHsKICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pCiAgICAgIGUgPSBlICsgZUJpYXMKICAgIH0gZWxzZSB7CiAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKQogICAgICBlID0gMAogICAgfQogIH0KCiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge30KCiAgZSA9IChlIDw8IG1MZW4pIHwgbQogIGVMZW4gKz0gbUxlbgogIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge30KCiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4Cn0KCn0se31dLDEyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cgp2YXIgaW5kZXhPZiA9IFtdLmluZGV4T2Y7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFyciwgb2JqKXsKICBpZiAoaW5kZXhPZikgcmV0dXJuIGFyci5pbmRleE9mKG9iaik7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHsKICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7CiAgfQogIHJldHVybiAtMTsKfTsKfSx7fV0sMTI5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7CiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGUKICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3RvcikgewogICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3IKICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7CiAgICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgICAgdmFsdWU6IGN0b3IsCiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgIH0KICAgIH0pOwogIH07Cn0gZWxzZSB7CiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnMKICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3RvcikgewogICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3IKICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9CiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlCiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpCiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3IKICB9Cn0KCn0se31dLDEzMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qKgogKiBEZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGlzIEJ1ZmZlcgogKgogKiBBdXRob3I6ICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz4KICogTGljZW5zZTogIE1JVAogKgogKiBgbnBtIGluc3RhbGwgaXMtYnVmZmVyYAogKi8KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikgewogIHJldHVybiAhIShvYmogIT0gbnVsbCAmJgogICAgKG9iai5faXNCdWZmZXIgfHwgLy8gRm9yIFNhZmFyaSA1LTcgKG1pc3NpbmcgT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvcikKICAgICAgKG9iai5jb25zdHJ1Y3RvciAmJgogICAgICB0eXBlb2Ygb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmCiAgICAgIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihvYmopKQogICAgKSkKfQoKfSx7fV0sMTMxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHsKICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJzsKfTsKCn0se31dLDEzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKCnZhciBuYXZpZ2F0b3IgPSB7fTsKbmF2aWdhdG9yLnVzZXJBZ2VudCA9IGZhbHNlOwoKdmFyIHdpbmRvdyA9IHt9OwovKgogKiBqc3JzYXNpZ24gNS4wLjcgKGMpIDIwMTAtMjAxNiBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KCi8qCnlhaG9vLW1pbi5qcwpDb3B5cmlnaHQgKGMpIDIwMTEsIFlhaG9vISBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCkNvZGUgbGljZW5zZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlOgpodHRwOi8vZGV2ZWxvcGVyLnlhaG9vLmNvbS95dWkvbGljZW5zZS5odG1sCnZlcnNpb246IDIuOS4wCiovCmlmKHR5cGVvZiBZQUhPTz09InVuZGVmaW5lZCJ8fCFZQUhPTyl7dmFyIFlBSE9PPXt9O31ZQUhPTy5uYW1lc3BhY2U9ZnVuY3Rpb24oKXt2YXIgYj1hcmd1bWVudHMsZz1udWxsLGUsYyxmO2ZvcihlPTA7ZTxiLmxlbmd0aDtlPWUrMSl7Zj0oIiIrYltlXSkuc3BsaXQoIi4iKTtnPVlBSE9PO2ZvcihjPShmWzBdPT0iWUFIT08iKT8xOjA7YzxmLmxlbmd0aDtjPWMrMSl7Z1tmW2NdXT1nW2ZbY11dfHx7fTtnPWdbZltjXV07fX1yZXR1cm4gZzt9O1lBSE9PLmxvZz1mdW5jdGlvbihkLGEsYyl7dmFyIGI9WUFIT08ud2lkZ2V0LkxvZ2dlcjtpZihiJiZiLmxvZyl7cmV0dXJuIGIubG9nKGQsYSxjKTt9ZWxzZXtyZXR1cm4gZmFsc2U7fX07WUFIT08ucmVnaXN0ZXI9ZnVuY3Rpb24oYSxmLGUpe3ZhciBrPVlBSE9PLmVudi5tb2R1bGVzLGMsaixoLGcsZDtpZigha1thXSl7a1thXT17dmVyc2lvbnM6W10sYnVpbGRzOltdfTt9Yz1rW2FdO2o9ZS52ZXJzaW9uO2g9ZS5idWlsZDtnPVlBSE9PLmVudi5saXN0ZW5lcnM7Yy5uYW1lPWE7Yy52ZXJzaW9uPWo7Yy5idWlsZD1oO2MudmVyc2lvbnMucHVzaChqKTtjLmJ1aWxkcy5wdXNoKGgpO2MubWFpbkNsYXNzPWY7Zm9yKGQ9MDtkPGcubGVuZ3RoO2Q9ZCsxKXtnW2RdKGMpO31pZihmKXtmLlZFUlNJT049ajtmLkJVSUxEPWg7fWVsc2V7WUFIT08ubG9nKCJtYWluQ2xhc3MgaXMgdW5kZWZpbmVkIGZvciBtb2R1bGUgIithLCJ3YXJuIik7fX07WUFIT08uZW52PVlBSE9PLmVudnx8e21vZHVsZXM6W10sbGlzdGVuZXJzOltdfTtZQUhPTy5lbnYuZ2V0VmVyc2lvbj1mdW5jdGlvbihhKXtyZXR1cm4gWUFIT08uZW52Lm1vZHVsZXNbYV18fG51bGw7fTtZQUhPTy5lbnYucGFyc2VVQT1mdW5jdGlvbihkKXt2YXIgZT1mdW5jdGlvbihpKXt2YXIgaj0wO3JldHVybiBwYXJzZUZsb2F0KGkucmVwbGFjZSgvXC4vZyxmdW5jdGlvbigpe3JldHVybihqKys9PTEpPyIiOiIuIjt9KSk7fSxoPW5hdmlnYXRvcixnPXtpZTowLG9wZXJhOjAsZ2Vja286MCx3ZWJraXQ6MCxjaHJvbWU6MCxtb2JpbGU6bnVsbCxhaXI6MCxpcGFkOjAsaXBob25lOjAsaXBvZDowLGlvczpudWxsLGFuZHJvaWQ6MCx3ZWJvczowLGNhamE6aCYmaC5jYWphVmVyc2lvbixzZWN1cmU6ZmFsc2Usb3M6bnVsbH0sYz1kfHwobmF2aWdhdG9yJiZuYXZpZ2F0b3IudXNlckFnZW50KSxmPXdpbmRvdyYmd2luZG93LmxvY2F0aW9uLGI9ZiYmZi5ocmVmLGE7Zy5zZWN1cmU9YiYmKGIudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJodHRwcyIpPT09MCk7aWYoYyl7aWYoKC93aW5kb3dzfHdpbjMyL2kpLnRlc3QoYykpe2cub3M9IndpbmRvd3MiO31lbHNle2lmKCgvbWFjaW50b3NoL2kpLnRlc3QoYykpe2cub3M9Im1hY2ludG9zaCI7fWVsc2V7aWYoKC9yaGluby9pKS50ZXN0KGMpKXtnLm9zPSJyaGlubyI7fX19aWYoKC9LSFRNTC8pLnRlc3QoYykpe2cud2Via2l0PTE7fWE9Yy5tYXRjaCgvQXBwbGVXZWJLaXRcLyhbXlxzXSopLyk7aWYoYSYmYVsxXSl7Zy53ZWJraXQ9ZShhWzFdKTtpZigvIE1vYmlsZVwvLy50ZXN0KGMpKXtnLm1vYmlsZT0iQXBwbGUiO2E9Yy5tYXRjaCgvT1MgKFteXHNdKikvKTtpZihhJiZhWzFdKXthPWUoYVsxXS5yZXBsYWNlKCJfIiwiLiIpKTt9Zy5pb3M9YTtnLmlwYWQ9Zy5pcG9kPWcuaXBob25lPTA7YT1jLm1hdGNoKC9pUGFkfGlQb2R8aVBob25lLyk7aWYoYSYmYVswXSl7Z1thWzBdLnRvTG93ZXJDYXNlKCldPWcuaW9zO319ZWxzZXthPWMubWF0Y2goL05va2lhTlteXC9dKnxBbmRyb2lkIFxkXC5cZHx3ZWJPU1wvXGRcLlxkLyk7aWYoYSl7Zy5tb2JpbGU9YVswXTt9aWYoL3dlYk9TLy50ZXN0KGMpKXtnLm1vYmlsZT0iV2ViT1MiO2E9Yy5tYXRjaCgvd2ViT1NcLyhbXlxzXSopOy8pO2lmKGEmJmFbMV0pe2cud2Vib3M9ZShhWzFdKTt9fWlmKC8gQW5kcm9pZC8udGVzdChjKSl7Zy5tb2JpbGU9IkFuZHJvaWQiO2E9Yy5tYXRjaCgvQW5kcm9pZCAoW15cc10qKTsvKTtpZihhJiZhWzFdKXtnLmFuZHJvaWQ9ZShhWzFdKTt9fX1hPWMubWF0Y2goL0Nocm9tZVwvKFteXHNdKikvKTtpZihhJiZhWzFdKXtnLmNocm9tZT1lKGFbMV0pO31lbHNle2E9Yy5tYXRjaCgvQWRvYmVBSVJcLyhbXlxzXSopLyk7aWYoYSl7Zy5haXI9YVswXTt9fX1pZighZy53ZWJraXQpe2E9Yy5tYXRjaCgvT3BlcmFbXHNcL10oW15cc10qKS8pO2lmKGEmJmFbMV0pe2cub3BlcmE9ZShhWzFdKTthPWMubWF0Y2goL1ZlcnNpb25cLyhbXlxzXSopLyk7aWYoYSYmYVsxXSl7Zy5vcGVyYT1lKGFbMV0pO31hPWMubWF0Y2goL09wZXJhIE1pbmlbXjtdKi8pO2lmKGEpe2cubW9iaWxlPWFbMF07fX1lbHNle2E9Yy5tYXRjaCgvTVNJRVxzKFteO10qKS8pO2lmKGEmJmFbMV0pe2cuaWU9ZShhWzFdKTt9ZWxzZXthPWMubWF0Y2goL0dlY2tvXC8oW15cc10qKS8pO2lmKGEpe2cuZ2Vja289MTthPWMubWF0Y2goL3J2OihbXlxzXCldKikvKTtpZihhJiZhWzFdKXtnLmdlY2tvPWUoYVsxXSk7fX19fX19cmV0dXJuIGc7fTtZQUhPTy5lbnYudWE9WUFIT08uZW52LnBhcnNlVUEoKTsoZnVuY3Rpb24oKXtZQUhPTy5uYW1lc3BhY2UoInV0aWwiLCJ3aWRnZXQiLCJleGFtcGxlIik7aWYoInVuZGVmaW5lZCIhPT10eXBlb2YgWUFIT09fY29uZmlnKXt2YXIgYj1ZQUhPT19jb25maWcubGlzdGVuZXIsYT1ZQUhPTy5lbnYubGlzdGVuZXJzLGQ9dHJ1ZSxjO2lmKGIpe2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspe2lmKGFbY109PWIpe2Q9ZmFsc2U7YnJlYWs7fX1pZihkKXthLnB1c2goYik7fX19fSkoKTtZQUhPTy5sYW5nPVlBSE9PLmxhbmd8fHt9OyhmdW5jdGlvbigpe3ZhciBmPVlBSE9PLmxhbmcsYT1PYmplY3QucHJvdG90eXBlLGM9IltvYmplY3QgQXJyYXldIixoPSJbb2JqZWN0IEZ1bmN0aW9uXSIsaT0iW29iamVjdCBPYmplY3RdIixiPVtdLGc9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImI3gyNzsiLCIvIjoiJiN4MkY7IiwiYCI6IiYjeDYwOyJ9LGQ9WyJ0b1N0cmluZyIsInZhbHVlT2YiXSxlPXtpc0FycmF5OmZ1bmN0aW9uKGope3JldHVybiBhLnRvU3RyaW5nLmFwcGx5KGopPT09Yzt9LGlzQm9vbGVhbjpmdW5jdGlvbihqKXtyZXR1cm4gdHlwZW9mIGo9PT0iYm9vbGVhbiI7fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGope3JldHVybih0eXBlb2Ygaj09PSJmdW5jdGlvbiIpfHxhLnRvU3RyaW5nLmFwcGx5KGopPT09aDt9LGlzTnVsbDpmdW5jdGlvbihqKXtyZXR1cm4gaj09PW51bGw7fSxpc051bWJlcjpmdW5jdGlvbihqKXtyZXR1cm4gdHlwZW9mIGo9PT0ibnVtYmVyIiYmaXNGaW5pdGUoaik7fSxpc09iamVjdDpmdW5jdGlvbihqKXtyZXR1cm4oaiYmKHR5cGVvZiBqPT09Im9iamVjdCJ8fGYuaXNGdW5jdGlvbihqKSkpfHxmYWxzZTt9LGlzU3RyaW5nOmZ1bmN0aW9uKGope3JldHVybiB0eXBlb2Ygaj09PSJzdHJpbmciO30saXNVbmRlZmluZWQ6ZnVuY3Rpb24oail7cmV0dXJuIHR5cGVvZiBqPT09InVuZGVmaW5lZCI7fSxfSUVFbnVtRml4OihZQUhPTy5lbnYudWEuaWUpP2Z1bmN0aW9uKGwsayl7dmFyIGosbixtO2ZvcihqPTA7ajxkLmxlbmd0aDtqPWorMSl7bj1kW2pdO209a1tuXTtpZihmLmlzRnVuY3Rpb24obSkmJm0hPWFbbl0pe2xbbl09bTt9fX06ZnVuY3Rpb24oKXt9LGVzY2FwZUhUTUw6ZnVuY3Rpb24oail7cmV0dXJuIGoucmVwbGFjZSgvWyY8PiInXC9gXS9nLGZ1bmN0aW9uKGspe3JldHVybiBnW2tdO30pO30sZXh0ZW5kOmZ1bmN0aW9uKG0sbixsKXtpZighbnx8IW0pe3Rocm93IG5ldyBFcnJvcigiZXh0ZW5kIGZhaWxlZCwgcGxlYXNlIGNoZWNrIHRoYXQgIisiYWxsIGRlcGVuZGVuY2llcyBhcmUgaW5jbHVkZWQuIik7fXZhciBrPWZ1bmN0aW9uKCl7fSxqO2sucHJvdG90eXBlPW4ucHJvdG90eXBlO20ucHJvdG90eXBlPW5ldyBrKCk7bS5wcm90b3R5cGUuY29uc3RydWN0b3I9bTttLnN1cGVyY2xhc3M9bi5wcm90b3R5cGU7aWYobi5wcm90b3R5cGUuY29uc3RydWN0b3I9PWEuY29uc3RydWN0b3Ipe24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW47fWlmKGwpe2ZvcihqIGluIGwpe2lmKGYuaGFzT3duUHJvcGVydHkobCxqKSl7bS5wcm90b3R5cGVbal09bFtqXTt9fWYuX0lFRW51bUZpeChtLnByb3RvdHlwZSxsKTt9fSxhdWdtZW50T2JqZWN0OmZ1bmN0aW9uKG4sbSl7aWYoIW18fCFuKXt0aHJvdyBuZXcgRXJyb3IoIkFic29yYiBmYWlsZWQsIHZlcmlmeSBkZXBlbmRlbmNpZXMuIik7fXZhciBqPWFyZ3VtZW50cyxsLG8saz1qWzJdO2lmKGsmJmshPT10cnVlKXtmb3IobD0yO2w8ai5sZW5ndGg7bD1sKzEpe25baltsXV09bVtqW2xdXTt9fWVsc2V7Zm9yKG8gaW4gbSl7aWYoa3x8IShvIGluIG4pKXtuW29dPW1bb107fX1mLl9JRUVudW1GaXgobixtKTt9cmV0dXJuIG47fSxhdWdtZW50UHJvdG86ZnVuY3Rpb24obSxsKXtpZighbHx8IW0pe3Rocm93IG5ldyBFcnJvcigiQXVnbWVudCBmYWlsZWQsIHZlcmlmeSBkZXBlbmRlbmNpZXMuIik7fXZhciBqPVttLnByb3RvdHlwZSxsLnByb3RvdHlwZV0saztmb3Ioaz0yO2s8YXJndW1lbnRzLmxlbmd0aDtrPWsrMSl7ai5wdXNoKGFyZ3VtZW50c1trXSk7fWYuYXVnbWVudE9iamVjdC5hcHBseSh0aGlzLGopO3JldHVybiBtO30sZHVtcDpmdW5jdGlvbihqLHApe3ZhciBsLG4scj1bXSx0PSJ7Li4ufSIsaz0iZigpey4uLn0iLHE9IiwgIixtPSIgPT4gIjtpZighZi5pc09iamVjdChqKSl7cmV0dXJuIGorIiI7fWVsc2V7aWYoaiBpbnN0YW5jZW9mIERhdGV8fCgibm9kZVR5cGUiIGluIGomJiJ0YWdOYW1lIiBpbiBqKSl7cmV0dXJuIGo7fWVsc2V7aWYoZi5pc0Z1bmN0aW9uKGopKXtyZXR1cm4gazt9fX1wPShmLmlzTnVtYmVyKHApKT9wOjM7aWYoZi5pc0FycmF5KGopKXtyLnB1c2goIlsiKTtmb3IobD0wLG49ai5sZW5ndGg7bDxuO2w9bCsxKXtpZihmLmlzT2JqZWN0KGpbbF0pKXtyLnB1c2goKHA+MCk/Zi5kdW1wKGpbbF0scC0xKTp0KTt9ZWxzZXtyLnB1c2goaltsXSk7fXIucHVzaChxKTt9aWYoci5sZW5ndGg+MSl7ci5wb3AoKTt9ci5wdXNoKCJdIik7fWVsc2V7ci5wdXNoKCJ7Iik7Zm9yKGwgaW4gail7aWYoZi5oYXNPd25Qcm9wZXJ0eShqLGwpKXtyLnB1c2gobCttKTtpZihmLmlzT2JqZWN0KGpbbF0pKXtyLnB1c2goKHA+MCk/Zi5kdW1wKGpbbF0scC0xKTp0KTt9ZWxzZXtyLnB1c2goaltsXSk7fXIucHVzaChxKTt9fWlmKHIubGVuZ3RoPjEpe3IucG9wKCk7fXIucHVzaCgifSIpO31yZXR1cm4gci5qb2luKCIiKTt9LHN1YnN0aXR1dGU6ZnVuY3Rpb24oeCx5LEUsbCl7dmFyIEQsQyxCLEcsdCx1LEY9W10scCx6PXgubGVuZ3RoLEE9ImR1bXAiLHI9IiAiLHE9InsiLG09In0iLG4sdztmb3IoOzspe0Q9eC5sYXN0SW5kZXhPZihxLHopO2lmKEQ8MCl7YnJlYWs7fUM9eC5pbmRleE9mKG0sRCk7aWYoRCsxPkMpe2JyZWFrO31wPXguc3Vic3RyaW5nKEQrMSxDKTtHPXA7dT1udWxsO0I9Ry5pbmRleE9mKHIpO2lmKEI+LTEpe3U9Ry5zdWJzdHJpbmcoQisxKTtHPUcuc3Vic3RyaW5nKDAsQik7fXQ9eVtHXTtpZihFKXt0PUUoRyx0LHUpO31pZihmLmlzT2JqZWN0KHQpKXtpZihmLmlzQXJyYXkodCkpe3Q9Zi5kdW1wKHQscGFyc2VJbnQodSwxMCkpO31lbHNle3U9dXx8IiI7bj11LmluZGV4T2YoQSk7aWYobj4tMSl7dT11LnN1YnN0cmluZyg0KTt9dz10LnRvU3RyaW5nKCk7aWYodz09PWl8fG4+LTEpe3Q9Zi5kdW1wKHQscGFyc2VJbnQodSwxMCkpO31lbHNle3Q9dzt9fX1lbHNle2lmKCFmLmlzU3RyaW5nKHQpJiYhZi5pc051bWJlcih0KSl7dD0ifi0iK0YubGVuZ3RoKyItfiI7RltGLmxlbmd0aF09cDt9fXg9eC5zdWJzdHJpbmcoMCxEKSt0K3guc3Vic3RyaW5nKEMrMSk7aWYobD09PWZhbHNlKXt6PUQtMTt9fWZvcihEPUYubGVuZ3RoLTE7RD49MDtEPUQtMSl7eD14LnJlcGxhY2UobmV3IFJlZ0V4cCgifi0iK0QrIi1+IiksInsiK0ZbRF0rIn0iLCJnIik7fXJldHVybiB4O30sdHJpbTpmdW5jdGlvbihqKXt0cnl7cmV0dXJuIGoucmVwbGFjZSgvXlxzK3xccyskL2csIiIpO31jYXRjaChrKXtyZXR1cm4gajsKfX0sbWVyZ2U6ZnVuY3Rpb24oKXt2YXIgbj17fSxrPWFyZ3VtZW50cyxqPWsubGVuZ3RoLG07Zm9yKG09MDttPGo7bT1tKzEpe2YuYXVnbWVudE9iamVjdChuLGtbbV0sdHJ1ZSk7fXJldHVybiBuO30sbGF0ZXI6ZnVuY3Rpb24odCxrLHUsbixwKXt0PXR8fDA7az1rfHx7fTt2YXIgbD11LHM9bixxLGo7aWYoZi5pc1N0cmluZyh1KSl7bD1rW3VdO31pZighbCl7dGhyb3cgbmV3IFR5cGVFcnJvcigibWV0aG9kIHVuZGVmaW5lZCIpO31pZighZi5pc1VuZGVmaW5lZChuKSYmIWYuaXNBcnJheShzKSl7cz1bbl07fXE9ZnVuY3Rpb24oKXtsLmFwcGx5KGssc3x8Yik7fTtqPShwKT9zZXRJbnRlcnZhbChxLHQpOnNldFRpbWVvdXQocSx0KTtyZXR1cm57aW50ZXJ2YWw6cCxjYW5jZWw6ZnVuY3Rpb24oKXtpZih0aGlzLmludGVydmFsKXtjbGVhckludGVydmFsKGopO31lbHNle2NsZWFyVGltZW91dChqKTt9fX07fSxpc1ZhbHVlOmZ1bmN0aW9uKGope3JldHVybihmLmlzT2JqZWN0KGopfHxmLmlzU3RyaW5nKGopfHxmLmlzTnVtYmVyKGopfHxmLmlzQm9vbGVhbihqKSk7fX07Zi5oYXNPd25Qcm9wZXJ0eT0oYS5oYXNPd25Qcm9wZXJ0eSk/ZnVuY3Rpb24oaixrKXtyZXR1cm4gaiYmai5oYXNPd25Qcm9wZXJ0eSYmai5oYXNPd25Qcm9wZXJ0eShrKTt9OmZ1bmN0aW9uKGosayl7cmV0dXJuICFmLmlzVW5kZWZpbmVkKGpba10pJiZqLmNvbnN0cnVjdG9yLnByb3RvdHlwZVtrXSE9PWpba107fTtlLmF1Z21lbnRPYmplY3QoZixlLHRydWUpO1lBSE9PLnV0aWwuTGFuZz1mO2YuYXVnbWVudD1mLmF1Z21lbnRQcm90bztZQUhPTy5hdWdtZW50PWYuYXVnbWVudFByb3RvO1lBSE9PLmV4dGVuZD1mLmV4dGVuZDt9KSgpO1lBSE9PLnJlZ2lzdGVyKCJ5YWhvbyIsWUFIT08se3ZlcnNpb246IjIuOS4wIixidWlsZDoiMjgwMCJ9KTsKCi8qISBDcnlwdG9KUyB2My4xLjIgY29yZS1maXguanMKICogY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCiAqIChjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiAqIFRISVMgSVMgRklYIG9mICdjb3JlLmpzJyB0byBmaXggSG1hYyBpc3N1ZS4KICogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvaXNzdWVzL2RldGFpbD9pZD04NAogKiBodHRwczovL2NyeXB0by1qcy5nb29nbGVjb2RlLmNvbS9zdm4taGlzdG9yeS9yNjY3L2JyYW5jaGVzLzMueC9zcmMvY29yZS5qcwogKi8KdmFyIENyeXB0b0pTPUNyeXB0b0pTfHwoZnVuY3Rpb24oZSxnKXt2YXIgYT17fTt2YXIgYj1hLmxpYj17fTt2YXIgaj1iLkJhc2U9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe31yZXR1cm57ZXh0ZW5kOmZ1bmN0aW9uKHApe24ucHJvdG90eXBlPXRoaXM7dmFyIG89bmV3IG4oKTtpZihwKXtvLm1peEluKHApfWlmKCFvLmhhc093blByb3BlcnR5KCJpbml0Iikpe28uaW5pdD1mdW5jdGlvbigpe28uJHN1cGVyLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1vLmluaXQucHJvdG90eXBlPW87by4kc3VwZXI9dGhpcztyZXR1cm4gb30sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIG89dGhpcy5leHRlbmQoKTtvLmluaXQuYXBwbHkobyxhcmd1bWVudHMpO3JldHVybiBvfSxpbml0OmZ1bmN0aW9uKCl7fSxtaXhJbjpmdW5jdGlvbihwKXtmb3IodmFyIG8gaW4gcCl7aWYocC5oYXNPd25Qcm9wZXJ0eShvKSl7dGhpc1tvXT1wW29dfX1pZihwLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpKXt0aGlzLnRvU3RyaW5nPXAudG9TdHJpbmd9fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19fSgpKTt2YXIgbD1iLldvcmRBcnJheT1qLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihvLG4pe289dGhpcy53b3Jkcz1vfHxbXTtpZihuIT1nKXt0aGlzLnNpZ0J5dGVzPW59ZWxzZXt0aGlzLnNpZ0J5dGVzPW8ubGVuZ3RoKjR9fSx0b1N0cmluZzpmdW5jdGlvbihuKXtyZXR1cm4obnx8aCkuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24odCl7dmFyIHE9dGhpcy53b3Jkczt2YXIgcD10LndvcmRzO3ZhciBuPXRoaXMuc2lnQnl0ZXM7dmFyIHM9dC5zaWdCeXRlczt0aGlzLmNsYW1wKCk7aWYobiU0KXtmb3IodmFyIHI9MDtyPHM7cisrKXt2YXIgbz0ocFtyPj4+Ml0+Pj4oMjQtKHIlNCkqOCkpJjI1NTtxWyhuK3IpPj4+Ml18PW88PCgyNC0oKG4rciklNCkqOCl9fWVsc2V7Zm9yKHZhciByPTA7cjxzO3IrPTQpe3FbKG4rcik+Pj4yXT1wW3I+Pj4yXX19dGhpcy5zaWdCeXRlcys9cztyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgbz10aGlzLndvcmRzO3ZhciBuPXRoaXMuc2lnQnl0ZXM7b1tuPj4+Ml0mPTQyOTQ5NjcyOTU8PCgzMi0obiU0KSo4KTtvLmxlbmd0aD1lLmNlaWwobi80KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgbj1qLmNsb25lLmNhbGwodGhpcyk7bi53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApO3JldHVybiBufSxyYW5kb206ZnVuY3Rpb24ocCl7dmFyIG89W107Zm9yKHZhciBuPTA7bjxwO24rPTQpe28ucHVzaCgoZS5yYW5kb20oKSo0Mjk0OTY3Mjk2KXwwKX1yZXR1cm4gbmV3IGwuaW5pdChvLHApfX0pO3ZhciBtPWEuZW5jPXt9O3ZhciBoPW0uSGV4PXtzdHJpbmdpZnk6ZnVuY3Rpb24ocCl7dmFyIHI9cC53b3Jkczt2YXIgbz1wLnNpZ0J5dGVzO3ZhciBxPVtdO2Zvcih2YXIgbj0wO248bztuKyspe3ZhciBzPShyW24+Pj4yXT4+PigyNC0obiU0KSo4KSkmMjU1O3EucHVzaCgocz4+PjQpLnRvU3RyaW5nKDE2KSk7cS5wdXNoKChzJjE1KS50b1N0cmluZygxNikpfXJldHVybiBxLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihwKXt2YXIgbj1wLmxlbmd0aDt2YXIgcT1bXTtmb3IodmFyIG89MDtvPG47bys9Mil7cVtvPj4+M118PXBhcnNlSW50KHAuc3Vic3RyKG8sMiksMTYpPDwoMjQtKG8lOCkqNCl9cmV0dXJuIG5ldyBsLmluaXQocSxuLzIpfX07dmFyIGQ9bS5MYXRpbjE9e3N0cmluZ2lmeTpmdW5jdGlvbihxKXt2YXIgcj1xLndvcmRzO3ZhciBwPXEuc2lnQnl0ZXM7dmFyIG49W107Zm9yKHZhciBvPTA7bzxwO28rKyl7dmFyIHM9KHJbbz4+PjJdPj4+KDI0LShvJTQpKjgpKSYyNTU7bi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUocykpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihwKXt2YXIgbj1wLmxlbmd0aDt2YXIgcT1bXTtmb3IodmFyIG89MDtvPG47bysrKXtxW28+Pj4yXXw9KHAuY2hhckNvZGVBdChvKSYyNTUpPDwoMjQtKG8lNCkqOCl9cmV0dXJuIG5ldyBsLmluaXQocSxuKX19O3ZhciBjPW0uVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKG4pe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShkLnN0cmluZ2lmeShuKSkpfWNhdGNoKG8pe3Rocm93IG5ldyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKX19LHBhcnNlOmZ1bmN0aW9uKG4pe3JldHVybiBkLnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChuKSkpfX07dmFyIGk9Yi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPWouZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IGwuaW5pdCgpO3RoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihuKXtpZih0eXBlb2Ygbj09InN0cmluZyIpe249Yy5wYXJzZShuKX10aGlzLl9kYXRhLmNvbmNhdChuKTt0aGlzLl9uRGF0YUJ5dGVzKz1uLnNpZ0J5dGVzfSxfcHJvY2VzczpmdW5jdGlvbih3KXt2YXIgcT10aGlzLl9kYXRhO3ZhciB4PXEud29yZHM7dmFyIG49cS5zaWdCeXRlczt2YXIgdD10aGlzLmJsb2NrU2l6ZTt2YXIgdj10KjQ7dmFyIHU9bi92O2lmKHcpe3U9ZS5jZWlsKHUpfWVsc2V7dT1lLm1heCgodXwwKS10aGlzLl9taW5CdWZmZXJTaXplLDApfXZhciBzPXUqdDt2YXIgcj1lLm1pbihzKjQsbik7aWYocyl7Zm9yKHZhciBwPTA7cDxzO3ArPXQpe3RoaXMuX2RvUHJvY2Vzc0Jsb2NrKHgscCl9dmFyIG89eC5zcGxpY2UoMCxzKTtxLnNpZ0J5dGVzLT1yfXJldHVybiBuZXcgbC5pbml0KG8scil9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIG49ai5jbG9uZS5jYWxsKHRoaXMpO24uX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBufSxfbWluQnVmZmVyU2l6ZTowfSk7dmFyIGY9Yi5IYXNoZXI9aS5leHRlbmQoe2NmZzpqLmV4dGVuZCgpLGluaXQ6ZnVuY3Rpb24obil7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKG4pO3RoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXtpLnJlc2V0LmNhbGwodGhpcyk7dGhpcy5fZG9SZXNldCgpfSx1cGRhdGU6ZnVuY3Rpb24obil7dGhpcy5fYXBwZW5kKG4pO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpc30sZmluYWxpemU6ZnVuY3Rpb24obil7aWYobil7dGhpcy5fYXBwZW5kKG4pfXZhciBvPXRoaXMuX2RvRmluYWxpemUoKTtyZXR1cm4gb30sYmxvY2tTaXplOjUxMi8zMixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbihwLG8pe3JldHVybiBuZXcgbi5pbml0KG8pLmZpbmFsaXplKHApfX0sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKHAsbyl7cmV0dXJuIG5ldyBrLkhNQUMuaW5pdChuLG8pLmZpbmFsaXplKHApfX19KTt2YXIgaz1hLmFsZ289e307cmV0dXJuIGF9KE1hdGgpKTsKLyoKQ3J5cHRvSlMgdjMuMS4yIHg2NC1jb3JlLW1pbi5qcwpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMKKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2UKKi8KKGZ1bmN0aW9uKGcpe3ZhciBhPUNyeXB0b0pTLGY9YS5saWIsZT1mLkJhc2UsaD1mLldvcmRBcnJheSxhPWEueDY0PXt9O2EuV29yZD1lLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihiLGMpe3RoaXMuaGlnaD1iO3RoaXMubG93PWN9fSk7YS5Xb3JkQXJyYXk9ZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oYixjKXtiPXRoaXMud29yZHM9Ynx8W107dGhpcy5zaWdCeXRlcz1jIT1nP2M6OCpiLmxlbmd0aH0sdG9YMzI6ZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcy53b3JkcyxjPWIubGVuZ3RoLGE9W10sZD0wO2Q8YztkKyspe3ZhciBlPWJbZF07YS5wdXNoKGUuaGlnaCk7YS5wdXNoKGUubG93KX1yZXR1cm4gaC5jcmVhdGUoYSx0aGlzLnNpZ0J5dGVzKX0sY2xvbmU6ZnVuY3Rpb24oKXtmb3IodmFyIGI9ZS5jbG9uZS5jYWxsKHRoaXMpLGM9Yi53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApLGE9Yy5sZW5ndGgsZD0wO2Q8YTtkKyspY1tkXT1jW2RdLmNsb25lKCk7cmV0dXJuIGJ9fSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIGNpcGhlci1jb3JlLW1pbi5qcwpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMKKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2UKKi8KQ3J5cHRvSlMubGliLkNpcGhlcnx8ZnVuY3Rpb24odSl7dmFyIGc9Q3J5cHRvSlMsZj1nLmxpYixrPWYuQmFzZSxsPWYuV29yZEFycmF5LHE9Zi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtLHI9Zy5lbmMuQmFzZTY0LHY9Zy5hbGdvLkV2cEtERixuPWYuQ2lwaGVyPXEuZXh0ZW5kKHtjZmc6ay5leHRlbmQoKSxjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fRU5DX1hGT1JNX01PREUsYSxiKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLGEsYil9LGluaXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChjKTt0aGlzLl94Zm9ybU1vZGU9YTt0aGlzLl9rZXk9Yjt0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7cS5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKX0scHJvY2VzczpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7CnJldHVybiB0aGlzLl9wcm9jZXNzKCl9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpfSxrZXlTaXplOjQsaXZTaXplOjQsX0VOQ19YRk9STV9NT0RFOjEsX0RFQ19YRk9STV9NT0RFOjIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm57ZW5jcnlwdDpmdW5jdGlvbihiLGMsZCl7cmV0dXJuKCJzdHJpbmciPT10eXBlb2YgYz9zOmopLmVuY3J5cHQoYSxiLGMsZCl9LGRlY3J5cHQ6ZnVuY3Rpb24oYixjLGQpe3JldHVybigic3RyaW5nIj09dHlwZW9mIGM/czpqKS5kZWNyeXB0KGEsYixjLGQpfX19fSk7Zi5TdHJlYW1DaXBoZXI9bi5leHRlbmQoe19kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb2Nlc3MoITApfSxibG9ja1NpemU6MX0pO3ZhciBtPWcubW9kZT17fSx0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9pdjtkP3RoaXMuX2l2PXU6ZD10aGlzLl9wcmV2QmxvY2s7Zm9yKHZhciBlPQowO2U8YztlKyspYVtiK2VdXj1kW2VdfSxoPShmLkJsb2NrQ2lwaGVyTW9kZT1rLmV4dGVuZCh7Y3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZShhLGIpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5EZWNyeXB0b3IuY3JlYXRlKGEsYil9LGluaXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLl9jaXBoZXI9YTt0aGlzLl9pdj1ifX0pKS5leHRlbmQoKTtoLkVuY3J5cHRvcj1oLmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fY2lwaGVyLGQ9Yy5ibG9ja1NpemU7dC5jYWxsKHRoaXMsYSxiLGQpO2MuZW5jcnlwdEJsb2NrKGEsYik7dGhpcy5fcHJldkJsb2NrPWEuc2xpY2UoYixiK2QpfX0pO2guRGVjcnlwdG9yPWguZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9jaXBoZXIsZD1jLmJsb2NrU2l6ZSxlPWEuc2xpY2UoYixiK2QpO2MuZGVjcnlwdEJsb2NrKGEsCmIpO3QuY2FsbCh0aGlzLGEsYixkKTt0aGlzLl9wcmV2QmxvY2s9ZX19KTttPW0uQ0JDPWg7aD0oZy5wYWQ9e30pLlBrY3M3PXtwYWQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9NCpiLGM9Yy1hLnNpZ0J5dGVzJWMsZD1jPDwyNHxjPDwxNnxjPDw4fGMsZT1bXSxmPTA7ZjxjO2YrPTQpZS5wdXNoKGQpO2M9bC5jcmVhdGUoZSxjKTthLmNvbmNhdChjKX0sdW5wYWQ6ZnVuY3Rpb24oYSl7YS5zaWdCeXRlcy09YS53b3Jkc1thLnNpZ0J5dGVzLTE+Pj4yXSYyNTV9fTtmLkJsb2NrQ2lwaGVyPW4uZXh0ZW5kKHtjZmc6bi5jZmcuZXh0ZW5kKHttb2RlOm0scGFkZGluZzpofSkscmVzZXQ6ZnVuY3Rpb24oKXtuLnJlc2V0LmNhbGwodGhpcyk7dmFyIGE9dGhpcy5jZmcsYj1hLml2LGE9YS5tb2RlO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpdmFyIGM9YS5jcmVhdGVFbmNyeXB0b3I7ZWxzZSBjPWEuY3JlYXRlRGVjcnlwdG9yLHRoaXMuX21pbkJ1ZmZlclNpemU9MTsKdGhpcy5fbW9kZT1jLmNhbGwoYSx0aGlzLGImJmIud29yZHMpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oYSxiKXt0aGlzLl9tb2RlLnByb2Nlc3NCbG9jayhhLGIpfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2ZnLnBhZGRpbmc7aWYodGhpcy5feGZvcm1Nb2RlPT10aGlzLl9FTkNfWEZPUk1fTU9ERSl7YS5wYWQodGhpcy5fZGF0YSx0aGlzLmJsb2NrU2l6ZSk7dmFyIGI9dGhpcy5fcHJvY2VzcyghMCl9ZWxzZSBiPXRoaXMuX3Byb2Nlc3MoITApLGEudW5wYWQoYik7cmV0dXJuIGJ9LGJsb2NrU2l6ZTo0fSk7dmFyIHA9Zi5DaXBoZXJQYXJhbXM9ay5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oYSl7dGhpcy5taXhJbihhKX0sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHRoaXMuZm9ybWF0dGVyKS5zdHJpbmdpZnkodGhpcyl9fSksbT0oZy5mb3JtYXQ9e30pLk9wZW5TU0w9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt2YXIgYj1hLmNpcGhlcnRleHQ7YT1hLnNhbHQ7CnJldHVybihhP2wuY3JlYXRlKFsxMzk4ODkzNjg0LDE3MDEwNzY4MzFdKS5jb25jYXQoYSkuY29uY2F0KGIpOmIpLnRvU3RyaW5nKHIpfSxwYXJzZTpmdW5jdGlvbihhKXthPXIucGFyc2UoYSk7dmFyIGI9YS53b3JkcztpZigxMzk4ODkzNjg0PT1iWzBdJiYxNzAxMDc2ODMxPT1iWzFdKXt2YXIgYz1sLmNyZWF0ZShiLnNsaWNlKDIsNCkpO2Iuc3BsaWNlKDAsNCk7YS5zaWdCeXRlcy09MTZ9cmV0dXJuIHAuY3JlYXRlKHtjaXBoZXJ0ZXh0OmEsc2FsdDpjfSl9fSxqPWYuU2VyaWFsaXphYmxlQ2lwaGVyPWsuZXh0ZW5kKHtjZmc6ay5leHRlbmQoe2Zvcm1hdDptfSksZW5jcnlwdDpmdW5jdGlvbihhLGIsYyxkKXtkPXRoaXMuY2ZnLmV4dGVuZChkKTt2YXIgZT1hLmNyZWF0ZUVuY3J5cHRvcihjLGQpO2I9ZS5maW5hbGl6ZShiKTtlPWUuY2ZnO3JldHVybiBwLmNyZWF0ZSh7Y2lwaGVydGV4dDpiLGtleTpjLGl2OmUuaXYsYWxnb3JpdGhtOmEsbW9kZTplLm1vZGUscGFkZGluZzplLnBhZGRpbmcsCmJsb2NrU2l6ZTphLmJsb2NrU2l6ZSxmb3JtYXR0ZXI6ZC5mb3JtYXR9KX0sZGVjcnlwdDpmdW5jdGlvbihhLGIsYyxkKXtkPXRoaXMuY2ZnLmV4dGVuZChkKTtiPXRoaXMuX3BhcnNlKGIsZC5mb3JtYXQpO3JldHVybiBhLmNyZWF0ZURlY3J5cHRvcihjLGQpLmZpbmFsaXplKGIuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbihhLGIpe3JldHVybiJzdHJpbmciPT10eXBlb2YgYT9iLnBhcnNlKGEsdGhpcyk6YX19KSxnPShnLmtkZj17fSkuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbihhLGIsYyxkKXtkfHwoZD1sLnJhbmRvbSg4KSk7YT12LmNyZWF0ZSh7a2V5U2l6ZTpiK2N9KS5jb21wdXRlKGEsZCk7Yz1sLmNyZWF0ZShhLndvcmRzLnNsaWNlKGIpLDQqYyk7YS5zaWdCeXRlcz00KmI7cmV0dXJuIHAuY3JlYXRlKHtrZXk6YSxpdjpjLHNhbHQ6ZH0pfX0scz1mLlBhc3N3b3JkQmFzZWRDaXBoZXI9ai5leHRlbmQoe2NmZzpqLmNmZy5leHRlbmQoe2tkZjpnfSksZW5jcnlwdDpmdW5jdGlvbihhLApiLGMsZCl7ZD10aGlzLmNmZy5leHRlbmQoZCk7Yz1kLmtkZi5leGVjdXRlKGMsYS5rZXlTaXplLGEuaXZTaXplKTtkLml2PWMuaXY7YT1qLmVuY3J5cHQuY2FsbCh0aGlzLGEsYixjLmtleSxkKTthLm1peEluKGMpO3JldHVybiBhfSxkZWNyeXB0OmZ1bmN0aW9uKGEsYixjLGQpe2Q9dGhpcy5jZmcuZXh0ZW5kKGQpO2I9dGhpcy5fcGFyc2UoYixkLmZvcm1hdCk7Yz1kLmtkZi5leGVjdXRlKGMsYS5rZXlTaXplLGEuaXZTaXplLGIuc2FsdCk7ZC5pdj1jLml2O3JldHVybiBqLmRlY3J5cHQuY2FsbCh0aGlzLGEsYixjLmtleSxkKX19KX0oKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBhZXMtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmb3IodmFyIHE9Q3J5cHRvSlMseD1xLmxpYi5CbG9ja0NpcGhlcixyPXEuYWxnbyxqPVtdLHk9W10sej1bXSxBPVtdLEI9W10sQz1bXSxzPVtdLHU9W10sdj1bXSx3PVtdLGc9W10saz0wOzI1Nj5rO2srKylnW2tdPTEyOD5rP2s8PDE6azw8MV4yODM7Zm9yKHZhciBuPTAsbD0wLGs9MDsyNTY+aztrKyspe3ZhciBmPWxebDw8MV5sPDwyXmw8PDNebDw8NCxmPWY+Pj44XmYmMjU1Xjk5O2pbbl09Zjt5W2ZdPW47dmFyIHQ9Z1tuXSxEPWdbdF0sRT1nW0RdLGI9MjU3KmdbZl1eMTY4NDMwMDgqZjt6W25dPWI8PDI0fGI+Pj44O0Fbbl09Yjw8MTZ8Yj4+PjE2O0Jbbl09Yjw8OHxiPj4+MjQ7Q1tuXT1iO2I9MTY4NDMwMDkqRV42NTUzNypEXjI1Nyp0XjE2ODQzMDA4Km47c1tmXT1iPDwyNHxiPj4+ODt1W2ZdPWI8PDE2fGI+Pj4xNjt2W2ZdPWI8PDh8Yj4+PjI0O3dbZl09YjtuPyhuPXReZ1tnW2dbRV50XV1dLGxePWdbZ1tsXV0pOm49bD0xfXZhciBGPVswLDEsMiw0LDgsCjE2LDMyLDY0LDEyOCwyNyw1NF0scj1yLkFFUz14LmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGM9dGhpcy5fa2V5LGU9Yy53b3JkcyxhPWMuc2lnQnl0ZXMvNCxjPTQqKCh0aGlzLl9uUm91bmRzPWErNikrMSksYj10aGlzLl9rZXlTY2hlZHVsZT1bXSxoPTA7aDxjO2grKylpZihoPGEpYltoXT1lW2hdO2Vsc2V7dmFyIGQ9YltoLTFdO2glYT82PGEmJjQ9PWglYSYmKGQ9altkPj4+MjRdPDwyNHxqW2Q+Pj4xNiYyNTVdPDwxNnxqW2Q+Pj44JjI1NV08PDh8altkJjI1NV0pOihkPWQ8PDh8ZD4+PjI0LGQ9altkPj4+MjRdPDwyNHxqW2Q+Pj4xNiYyNTVdPDwxNnxqW2Q+Pj44JjI1NV08PDh8altkJjI1NV0sZF49RltoL2F8MF08PDI0KTtiW2hdPWJbaC1hXV5kfWU9dGhpcy5faW52S2V5U2NoZWR1bGU9W107Zm9yKGE9MDthPGM7YSsrKWg9Yy1hLGQ9YSU0P2JbaF06YltoLTRdLGVbYV09ND5hfHw0Pj1oP2Q6c1tqW2Q+Pj4yNF1dXnVbaltkPj4+MTYmMjU1XV1edltqW2Q+Pj4KOCYyNTVdXV53W2pbZCYyNTVdXX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGMsZSl7dGhpcy5fZG9DcnlwdEJsb2NrKGMsZSx0aGlzLl9rZXlTY2hlZHVsZSx6LEEsQixDLGopfSxkZWNyeXB0QmxvY2s6ZnVuY3Rpb24oYyxlKXt2YXIgYT1jW2UrMV07Y1tlKzFdPWNbZSszXTtjW2UrM109YTt0aGlzLl9kb0NyeXB0QmxvY2soYyxlLHRoaXMuX2ludktleVNjaGVkdWxlLHMsdSx2LHcseSk7YT1jW2UrMV07Y1tlKzFdPWNbZSszXTtjW2UrM109YX0sX2RvQ3J5cHRCbG9jazpmdW5jdGlvbihjLGUsYSxiLGgsZCxqLG0pe2Zvcih2YXIgbj10aGlzLl9uUm91bmRzLGY9Y1tlXV5hWzBdLGc9Y1tlKzFdXmFbMV0saz1jW2UrMl1eYVsyXSxwPWNbZSszXV5hWzNdLGw9NCx0PTE7dDxuO3QrKyl2YXIgcT1iW2Y+Pj4yNF1eaFtnPj4+MTYmMjU1XV5kW2s+Pj44JjI1NV1ealtwJjI1NV1eYVtsKytdLHI9YltnPj4+MjRdXmhbaz4+PjE2JjI1NV1eZFtwPj4+OCYyNTVdXmpbZiYyNTVdXmFbbCsrXSxzPQpiW2s+Pj4yNF1eaFtwPj4+MTYmMjU1XV5kW2Y+Pj44JjI1NV1ealtnJjI1NV1eYVtsKytdLHA9YltwPj4+MjRdXmhbZj4+PjE2JjI1NV1eZFtnPj4+OCYyNTVdXmpbayYyNTVdXmFbbCsrXSxmPXEsZz1yLGs9cztxPShtW2Y+Pj4yNF08PDI0fG1bZz4+PjE2JjI1NV08PDE2fG1baz4+PjgmMjU1XTw8OHxtW3AmMjU1XSleYVtsKytdO3I9KG1bZz4+PjI0XTw8MjR8bVtrPj4+MTYmMjU1XTw8MTZ8bVtwPj4+OCYyNTVdPDw4fG1bZiYyNTVdKV5hW2wrK107cz0obVtrPj4+MjRdPDwyNHxtW3A+Pj4xNiYyNTVdPDwxNnxtW2Y+Pj44JjI1NV08PDh8bVtnJjI1NV0pXmFbbCsrXTtwPShtW3A+Pj4yNF08PDI0fG1bZj4+PjE2JjI1NV08PDE2fG1bZz4+PjgmMjU1XTw8OHxtW2smMjU1XSleYVtsKytdO2NbZV09cTtjW2UrMV09cjtjW2UrMl09cztjW2UrM109cH0sa2V5U2l6ZTo4fSk7cS5BRVM9eC5fY3JlYXRlSGVscGVyKHIpfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiB0cmlwbGVkZXMtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmdW5jdGlvbiBqKGIsYyl7dmFyIGE9KHRoaXMuX2xCbG9jaz4+PmJedGhpcy5fckJsb2NrKSZjO3RoaXMuX3JCbG9ja149YTt0aGlzLl9sQmxvY2tePWE8PGJ9ZnVuY3Rpb24gbChiLGMpe3ZhciBhPSh0aGlzLl9yQmxvY2s+Pj5iXnRoaXMuX2xCbG9jaykmYzt0aGlzLl9sQmxvY2tePWE7dGhpcy5fckJsb2NrXj1hPDxifXZhciBoPUNyeXB0b0pTLGU9aC5saWIsbj1lLldvcmRBcnJheSxlPWUuQmxvY2tDaXBoZXIsZz1oLmFsZ28scT1bNTcsNDksNDEsMzMsMjUsMTcsOSwxLDU4LDUwLDQyLDM0LDI2LDE4LDEwLDIsNTksNTEsNDMsMzUsMjcsMTksMTEsMyw2MCw1Miw0NCwzNiw2Myw1NSw0NywzOSwzMSwyMywxNSw3LDYyLDU0LDQ2LDM4LDMwLDIyLDE0LDYsNjEsNTMsNDUsMzcsMjksMjEsMTMsNSwyOCwyMCwxMiw0XSxwPVsxNCwxNywxMSwyNCwxLDUsMywyOCwxNSw2LDIxLDEwLDIzLDE5LDEyLDQsMjYsOCwxNiw3LDI3LDIwLDEzLDIsNDEsNTIsMzEsMzcsNDcsCjU1LDMwLDQwLDUxLDQ1LDMzLDQ4LDQ0LDQ5LDM5LDU2LDM0LDUzLDQ2LDQyLDUwLDM2LDI5LDMyXSxyPVsxLDIsNCw2LDgsMTAsMTIsMTQsMTUsMTcsMTksMjEsMjMsMjUsMjcsMjhdLHM9W3siMCI6ODQyMTg4OCwyNjg0MzU0NTY6MzI3NjgsNTM2ODcwOTEyOjg0MjEzNzgsODA1MzA2MzY4OjIsMTA3Mzc0MTgyNDo1MTIsMTM0MjE3NzI4MDo4NDIxODkwLDE2MTA2MTI3MzY6ODM4OTEyMiwxODc5MDQ4MTkyOjgzODg2MDgsMjE0NzQ4MzY0ODo1MTQsMjQxNTkxOTEwNDo4Mzg5MTIwLDI2ODQzNTQ1NjA6MzMyODAsMjk1Mjc5MDAxNjo4NDIxMzc2LDMyMjEyMjU0NzI6MzI3NzAsMzQ4OTY2MDkyODo4Mzg4NjEwLDM3NTgwOTYzODQ6MCw0MDI2NTMxODQwOjMzMjgyLDEzNDIxNzcyODowLDQwMjY1MzE4NDo4NDIxODkwLDY3MTA4ODY0MDozMzI4Miw5Mzk1MjQwOTY6MzI3NjgsMTIwNzk1OTU1Mjo4NDIxODg4LDE0NzYzOTUwMDg6NTEyLDE3NDQ4MzA0NjQ6ODQyMTM3OCwyMDEzMjY1OTIwOjIsCjIyODE3MDEzNzY6ODM4OTEyMCwyNTUwMTM2ODMyOjMzMjgwLDI4MTg1NzIyODg6ODQyMTM3NiwzMDg3MDA3NzQ0OjgzODkxMjIsMzM1NTQ0MzIwMDo4Mzg4NjEwLDM2MjM4Nzg2NTY6MzI3NzAsMzg5MjMxNDExMjo1MTQsNDE2MDc0OTU2ODo4Mzg4NjA4LDE6MzI3NjgsMjY4NDM1NDU3OjIsNTM2ODcwOTEzOjg0MjE4ODgsODA1MzA2MzY5OjgzODg2MDgsMTA3Mzc0MTgyNTo4NDIxMzc4LDEzNDIxNzcyODE6MzMyODAsMTYxMDYxMjczNzo1MTIsMTg3OTA0ODE5Mzo4Mzg5MTIyLDIxNDc0ODM2NDk6ODQyMTg5MCwyNDE1OTE5MTA1Ojg0MjEzNzYsMjY4NDM1NDU2MTo4Mzg4NjEwLDI5NTI3OTAwMTc6MzMyODIsMzIyMTIyNTQ3Mzo1MTQsMzQ4OTY2MDkyOTo4Mzg5MTIwLDM3NTgwOTYzODU6MzI3NzAsNDAyNjUzMTg0MTowLDEzNDIxNzcyOTo4NDIxODkwLDQwMjY1MzE4NTo4NDIxMzc2LDY3MTA4ODY0MTo4Mzg4NjA4LDkzOTUyNDA5Nzo1MTIsMTIwNzk1OTU1MzozMjc2OCwxNDc2Mzk1MDA5OjgzODg2MTAsCjE3NDQ4MzA0NjU6MiwyMDEzMjY1OTIxOjMzMjgyLDIyODE3MDEzNzc6MzI3NzAsMjU1MDEzNjgzMzo4Mzg5MTIyLDI4MTg1NzIyODk6NTE0LDMwODcwMDc3NDU6ODQyMTg4OCwzMzU1NDQzMjAxOjgzODkxMjAsMzYyMzg3ODY1NzowLDM4OTIzMTQxMTM6MzMyODAsNDE2MDc0OTU2OTo4NDIxMzc4fSx7IjAiOjEwNzQyODI1MTIsMTY3NzcyMTY6MTYzODQsMzM1NTQ0MzI6NTI0Mjg4LDUwMzMxNjQ4OjEwNzQyNjYxMjgsNjcxMDg4NjQ6MTA3Mzc0MTg0MCw4Mzg4NjA4MDoxMDc0MjgyNDk2LDEwMDY2MzI5NjoxMDczNzU4MjA4LDExNzQ0MDUxMjoxNiwxMzQyMTc3Mjg6NTQwNjcyLDE1MDk5NDk0NDoxMDczNzU4MjI0LDE2Nzc3MjE2MDoxMDczNzQxODI0LDE4NDU0OTM3Njo1NDA2ODgsMjAxMzI2NTkyOjUyNDMwNCwyMTgxMDM4MDg6MCwyMzQ4ODEwMjQ6MTY0MDAsMjUxNjU4MjQwOjEwNzQyNjYxMTIsODM4ODYwODoxMDczNzU4MjA4LDI1MTY1ODI0OjU0MDY4OCw0MTk0MzA0MDoxNiw1ODcyMDI1NjoxMDczNzU4MjI0LAo3NTQ5NzQ3MjoxMDc0MjgyNTEyLDkyMjc0Njg4OjEwNzM3NDE4MjQsMTA5MDUxOTA0OjUyNDI4OCwxMjU4MjkxMjA6MTA3NDI2NjEyOCwxNDI2MDYzMzY6NTI0MzA0LDE1OTM4MzU1MjowLDE3NjE2MDc2ODoxNjM4NCwxOTI5Mzc5ODQ6MTA3NDI2NjExMiwyMDk3MTUyMDA6MTA3Mzc0MTg0MCwyMjY0OTI0MTY6NTQwNjcyLDI0MzI2OTYzMjoxMDc0MjgyNDk2LDI2MDA0Njg0ODoxNjQwMCwyNjg0MzU0NTY6MCwyODUyMTI2NzI6MTA3NDI2NjEyOCwzMDE5ODk4ODg6MTA3Mzc1ODIyNCwzMTg3NjcxMDQ6MTA3NDI4MjQ5NiwzMzU1NDQzMjA6MTA3NDI2NjExMiwzNTIzMjE1MzY6MTYsMzY5MDk4NzUyOjU0MDY4OCwzODU4NzU5Njg6MTYzODQsNDAyNjUzMTg0OjE2NDAwLDQxOTQzMDQwMDo1MjQyODgsNDM2MjA3NjE2OjUyNDMwNCw0NTI5ODQ4MzI6MTA3Mzc0MTg0MCw0Njk3NjIwNDg6NTQwNjcyLDQ4NjUzOTI2NDoxMDczNzU4MjA4LDUwMzMxNjQ4MDoxMDczNzQxODI0LDUyMDA5MzY5NjoxMDc0MjgyNTEyLAoyNzY4MjQwNjQ6NTQwNjg4LDI5MzYwMTI4MDo1MjQyODgsMzEwMzc4NDk2OjEwNzQyNjYxMTIsMzI3MTU1NzEyOjE2Mzg0LDM0MzkzMjkyODoxMDczNzU4MjA4LDM2MDcxMDE0NDoxMDc0MjgyNTEyLDM3NzQ4NzM2MDoxNiwzOTQyNjQ1NzY6MTA3Mzc0MTgyNCw0MTEwNDE3OTI6MTA3NDI4MjQ5Niw0Mjc4MTkwMDg6MTA3Mzc0MTg0MCw0NDQ1OTYyMjQ6MTA3Mzc1ODIyNCw0NjEzNzM0NDA6NTI0MzA0LDQ3ODE1MDY1NjowLDQ5NDkyNzg3MjoxNjQwMCw1MTE3MDUwODg6MTA3NDI2NjEyOCw1Mjg0ODIzMDQ6NTQwNjcyfSx7IjAiOjI2MCwxMDQ4NTc2OjAsMjA5NzE1Mjo2NzEwOTEyMCwzMTQ1NzI4OjY1Nzk2LDQxOTQzMDQ6NjU1NDAsNTI0Mjg4MDo2NzEwODg2OCw2MjkxNDU2OjY3MTc0NjYwLDczNDAwMzI6NjcxNzQ0MDAsODM4ODYwODo2NzEwODg2NCw5NDM3MTg0OjY3MTc0NjU2LDEwNDg1NzYwOjY1NzkyLDExNTM0MzM2OjY3MTc0NDA0LDEyNTgyOTEyOjY3MTA5MTI0LDEzNjMxNDg4OjY1NTM2LAoxNDY4MDA2NDo0LDE1NzI4NjQwOjI1Niw1MjQyODg6NjcxNzQ2NTYsMTU3Mjg2NDo2NzE3NDQwNCwyNjIxNDQwOjAsMzY3MDAxNjo2NzEwOTEyMCw0NzE4NTkyOjY3MTA4ODY4LDU3NjcxNjg6NjU1MzYsNjgxNTc0NDo2NTU0MCw3ODY0MzIwOjI2MCw4OTEyODk2OjQsOTk2MTQ3MjoyNTYsMTEwMTAwNDg6NjcxNzQ0MDAsMTIwNTg2MjQ6NjU3OTYsMTMxMDcyMDA6NjU3OTIsMTQxNTU3NzY6NjcxMDkxMjQsMTUyMDQzNTI6NjcxNzQ2NjAsMTYyNTI5Mjg6NjcxMDg4NjQsMTY3NzcyMTY6NjcxNzQ2NTYsMTc4MjU3OTI6NjU1NDAsMTg4NzQzNjg6NjU1MzYsMTk5MjI5NDQ6NjcxMDkxMjAsMjA5NzE1MjA6MjU2LDIyMDIwMDk2OjY3MTc0NjYwLDIzMDY4NjcyOjY3MTA4ODY4LDI0MTE3MjQ4OjAsMjUxNjU4MjQ6NjcxMDkxMjQsMjYyMTQ0MDA6NjcxMDg4NjQsMjcyNjI5NzY6NCwyODMxMTU1Mjo2NTc5MiwyOTM2MDEyODo2NzE3NDQwMCwzMDQwODcwNDoyNjAsMzE0NTcyODA6NjU3OTYsMzI1MDU4NTY6NjcxNzQ0MDQsCjE3MzAxNTA0OjY3MTA4ODY0LDE4MzUwMDgwOjI2MCwxOTM5ODY1Njo2NzE3NDY1NiwyMDQ0NzIzMjowLDIxNDk1ODA4OjY1NTQwLDIyNTQ0Mzg0OjY3MTA5MTIwLDIzNTkyOTYwOjI1NiwyNDY0MTUzNjo2NzE3NDQwNCwyNTY5MDExMjo2NTUzNiwyNjczODY4ODo2NzE3NDY2MCwyNzc4NzI2NDo2NTc5NiwyODgzNTg0MDo2NzEwODg2OCwyOTg4NDQxNjo2NzEwOTEyNCwzMDkzMjk5Mjo2NzE3NDQwMCwzMTk4MTU2ODo0LDMzMDMwMTQ0OjY1NzkyfSx7IjAiOjIxNTE2ODIwNDgsNjU1MzY6MjE0NzQ4NzgwOCwxMzEwNzI6NDE5ODQ2NCwxOTY2MDg6MjE1MTY3Nzk1MiwyNjIxNDQ6MCwzMjc2ODA6NDE5ODQwMCwzOTMyMTY6MjE0NzQ4MzcxMiw0NTg3NTI6NDE5NDM2OCw1MjQyODg6MjE0NzQ4MzY0OCw1ODk4MjQ6NDE5NDMwNCw2NTUzNjA6NjQsNzIwODk2OjIxNDc0ODc3NDQsNzg2NDMyOjIxNTE2NzgwMTYsODUxOTY4OjQxNjAsOTE3NTA0OjQwOTYsOTgzMDQwOjIxNTE2ODIxMTIsMzI3Njg6MjE0NzQ4NzgwOCwKOTgzMDQ6NjQsMTYzODQwOjIxNTE2NzgwMTYsMjI5Mzc2OjIxNDc0ODc3NDQsMjk0OTEyOjQxOTg0MDAsMzYwNDQ4OjIxNTE2ODIxMTIsNDI1OTg0OjAsNDkxNTIwOjIxNTE2Nzc5NTIsNTU3MDU2OjQwOTYsNjIyNTkyOjIxNTE2ODIwNDgsNjg4MTI4OjQxOTQzMDQsNzUzNjY0OjQxNjAsODE5MjAwOjIxNDc0ODM2NDgsODg0NzM2OjQxOTQzNjgsOTUwMjcyOjQxOTg0NjQsMTAxNTgwODoyMTQ3NDgzNzEyLDEwNDg1NzY6NDE5NDM2OCwxMTE0MTEyOjQxOTg0MDAsMTE3OTY0ODoyMTQ3NDgzNzEyLDEyNDUxODQ6MCwxMzEwNzIwOjQxNjAsMTM3NjI1NjoyMTUxNjc4MDE2LDE0NDE3OTI6MjE1MTY4MjA0OCwxNTA3MzI4OjIxNDc0ODc4MDgsMTU3Mjg2NDoyMTUxNjgyMTEyLDE2Mzg0MDA6MjE0NzQ4MzY0OCwxNzAzOTM2OjIxNTE2Nzc5NTIsMTc2OTQ3Mjo0MTk4NDY0LDE4MzUwMDg6MjE0NzQ4Nzc0NCwxOTAwNTQ0OjQxOTQzMDQsMTk2NjA4MDo2NCwyMDMxNjE2OjQwOTYsMTA4MTM0NDoyMTUxNjc3OTUyLAoxMTQ2ODgwOjIxNTE2ODIxMTIsMTIxMjQxNjowLDEyNzc5NTI6NDE5ODQwMCwxMzQzNDg4OjQxOTQzNjgsMTQwOTAyNDoyMTQ3NDgzNjQ4LDE0NzQ1NjA6MjE0NzQ4NzgwOCwxNTQwMDk2OjY0LDE2MDU2MzI6MjE0NzQ4MzcxMiwxNjcxMTY4OjQwOTYsMTczNjcwNDoyMTQ3NDg3NzQ0LDE4MDIyNDA6MjE1MTY3ODAxNiwxODY3Nzc2OjQxNjAsMTkzMzMxMjoyMTUxNjgyMDQ4LDE5OTg4NDg6NDE5NDMwNCwyMDY0Mzg0OjQxOTg0NjR9LHsiMCI6MTI4LDQwOTY6MTcwMzkzNjAsODE5MjoyNjIxNDQsMTIyODg6NTM2ODcwOTEyLDE2Mzg0OjUzNzEzMzE4NCwyMDQ4MDoxNjc3NzM0NCwyNDU3Njo1NTM2NDgyNTYsMjg2NzI6MjYyMjcyLDMyNzY4OjE2Nzc3MjE2LDM2ODY0OjUzNzEzMzA1Niw0MDk2MDo1MzY4NzEwNDAsNDUwNTY6NTUzOTEwNDAwLDQ5MTUyOjU1MzkxMDI3Miw1MzI0ODowLDU3MzQ0OjE3MDM5NDg4LDYxNDQwOjU1MzY0ODEyOCwyMDQ4OjE3MDM5NDg4LDYxNDQ6NTUzNjQ4MjU2LAoxMDI0MDoxMjgsMTQzMzY6MTcwMzkzNjAsMTg0MzI6MjYyMTQ0LDIyNTI4OjUzNzEzMzE4NCwyNjYyNDo1NTM5MTAyNzIsMzA3MjA6NTM2ODcwOTEyLDM0ODE2OjUzNzEzMzA1NiwzODkxMjowLDQzMDA4OjU1MzkxMDQwMCw0NzEwNDoxNjc3NzM0NCw1MTIwMDo1MzY4NzEwNDAsNTUyOTY6NTUzNjQ4MTI4LDU5MzkyOjE2Nzc3MjE2LDYzNDg4OjI2MjI3Miw2NTUzNjoyNjIxNDQsNjk2MzI6MTI4LDczNzI4OjUzNjg3MDkxMiw3NzgyNDo1NTM2NDgyNTYsODE5MjA6MTY3NzczNDQsODYwMTY6NTUzOTEwMjcyLDkwMTEyOjUzNzEzMzE4NCw5NDIwODoxNjc3NzIxNiw5ODMwNDo1NTM5MTA0MDAsMTAyNDAwOjU1MzY0ODEyOCwxMDY0OTY6MTcwMzkzNjAsMTEwNTkyOjUzNzEzMzA1NiwxMTQ2ODg6MjYyMjcyLDExODc4NDo1MzY4NzEwNDAsMTIyODgwOjAsMTI2OTc2OjE3MDM5NDg4LDY3NTg0OjU1MzY0ODI1Niw3MTY4MDoxNjc3NzIxNiw3NTc3NjoxNzAzOTM2MCw3OTg3Mjo1MzcxMzMxODQsCjgzOTY4OjUzNjg3MDkxMiw4ODA2NDoxNzAzOTQ4OCw5MjE2MDoxMjgsOTYyNTY6NTUzOTEwMjcyLDEwMDM1MjoyNjIyNzIsMTA0NDQ4OjU1MzkxMDQwMCwxMDg1NDQ6MCwxMTI2NDA6NTUzNjQ4MTI4LDExNjczNjoxNjc3NzM0NCwxMjA4MzI6MjYyMTQ0LDEyNDkyODo1MzcxMzMwNTYsMTI5MDI0OjUzNjg3MTA0MH0seyIwIjoyNjg0MzU0NjQsMjU2OjgxOTIsNTEyOjI3MDUzMjYwOCw3Njg6MjcwNTQwODA4LDEwMjQ6MjY4NDQzNjQ4LDEyODA6MjA5NzE1MiwxNTM2OjIwOTcxNjAsMTc5MjoyNjg0MzU0NTYsMjA0ODowLDIzMDQ6MjY4NDQzNjU2LDI1NjA6MjEwNTM0NCwyODE2OjgsMzA3MjoyNzA1MzI2MTYsMzMyODoyMTA1MzUyLDM1ODQ6ODIwMCwzODQwOjI3MDU0MDgwMCwxMjg6MjcwNTMyNjA4LDM4NDoyNzA1NDA4MDgsNjQwOjgsODk2OjIwOTcxNTIsMTE1MjoyMTA1MzUyLDE0MDg6MjY4NDM1NDY0LDE2NjQ6MjY4NDQzNjQ4LDE5MjA6ODIwMCwyMTc2OjIwOTcxNjAsMjQzMjo4MTkyLAoyNjg4OjI2ODQ0MzY1NiwyOTQ0OjI3MDUzMjYxNiwzMjAwOjAsMzQ1NjoyNzA1NDA4MDAsMzcxMjoyMTA1MzQ0LDM5Njg6MjY4NDM1NDU2LDQwOTY6MjY4NDQzNjQ4LDQzNTI6MjcwNTMyNjE2LDQ2MDg6MjcwNTQwODA4LDQ4NjQ6ODIwMCw1MTIwOjIwOTcxNTIsNTM3NjoyNjg0MzU0NTYsNTYzMjoyNjg0MzU0NjQsNTg4ODoyMTA1MzQ0LDYxNDQ6MjEwNTM1Miw2NDAwOjAsNjY1Njo4LDY5MTI6MjcwNTMyNjA4LDcxNjg6ODE5Miw3NDI0OjI2ODQ0MzY1Niw3NjgwOjI3MDU0MDgwMCw3OTM2OjIwOTcxNjAsNDIyNDo4LDQ0ODA6MjEwNTM0NCw0NzM2OjIwOTcxNTIsNDk5MjoyNjg0MzU0NjQsNTI0ODoyNjg0NDM2NDgsNTUwNDo4MjAwLDU3NjA6MjcwNTQwODA4LDYwMTY6MjcwNTMyNjA4LDYyNzI6MjcwNTQwODAwLDY1Mjg6MjcwNTMyNjE2LDY3ODQ6ODE5Miw3MDQwOjIxMDUzNTIsNzI5NjoyMDk3MTYwLDc1NTI6MCw3ODA4OjI2ODQzNTQ1Niw4MDY0OjI2ODQ0MzY1Nn0seyIwIjoxMDQ4NTc2LAoxNjozMzU1NTQ1NywzMjoxMDI0LDQ4OjEwNDk2MDEsNjQ6MzQ2MDQwMzMsODA6MCw5NjoxLDExMjozNDYwMzAwOSwxMjg6MzM1NTU0NTYsMTQ0OjEwNDg1NzcsMTYwOjMzNTU0NDMzLDE3NjozNDYwNDAzMiwxOTI6MzQ2MDMwMDgsMjA4OjEwMjUsMjI0OjEwNDk2MDAsMjQwOjMzNTU0NDMyLDg6MzQ2MDMwMDksMjQ6MCw0MDozMzU1NTQ1Nyw1NjozNDYwNDAzMiw3MjoxMDQ4NTc2LDg4OjMzNTU0NDMzLDEwNDozMzU1NDQzMiwxMjA6MTAyNSwxMzY6MTA0OTYwMSwxNTI6MzM1NTU0NTYsMTY4OjM0NjAzMDA4LDE4NDoxMDQ4NTc3LDIwMDoxMDI0LDIxNjozNDYwNDAzMywyMzI6MSwyNDg6MTA0OTYwMCwyNTY6MzM1NTQ0MzIsMjcyOjEwNDg1NzYsMjg4OjMzNTU1NDU3LDMwNDozNDYwMzAwOSwzMjA6MTA0ODU3NywzMzY6MzM1NTU0NTYsMzUyOjM0NjA0MDMyLDM2ODoxMDQ5NjAxLDM4NDoxMDI1LDQwMDozNDYwNDAzMyw0MTY6MTA0OTYwMCw0MzI6MSw0NDg6MCw0NjQ6MzQ2MDMwMDgsNDgwOjMzNTU0NDMzLAo0OTY6MTAyNCwyNjQ6MTA0OTYwMCwyODA6MzM1NTU0NTcsMjk2OjM0NjAzMDA5LDMxMjoxLDMyODozMzU1NDQzMiwzNDQ6MTA0ODU3NiwzNjA6MTAyNSwzNzY6MzQ2MDQwMzIsMzkyOjMzNTU0NDMzLDQwODozNDYwMzAwOCw0MjQ6MCw0NDA6MzQ2MDQwMzMsNDU2OjEwNDk2MDEsNDcyOjEwMjQsNDg4OjMzNTU1NDU2LDUwNDoxMDQ4NTc3fSx7IjAiOjEzNDIxOTgwOCwxOjEzMTA3MiwyOjEzNDIxNzcyOCwzOjMyLDQ6MTMxMTA0LDU6MTM0MzUwODgwLDY6MTM0MzUwODQ4LDc6MjA0OCw4OjEzNDM0ODgwMCw5OjEzNDIxOTc3NiwxMDoxMzMxMjAsMTE6MTM0MzQ4ODMyLDEyOjIwODAsMTM6MCwxNDoxMzQyMTc3NjAsMTU6MTMzMTUyLDIxNDc0ODM2NDg6MjA0OCwyMTQ3NDgzNjQ5OjEzNDM1MDg4MCwyMTQ3NDgzNjUwOjEzNDIxOTgwOCwyMTQ3NDgzNjUxOjEzNDIxNzcyOCwyMTQ3NDgzNjUyOjEzNDM0ODgwMCwyMTQ3NDgzNjUzOjEzMzEyMCwyMTQ3NDgzNjU0OjEzMzE1MiwyMTQ3NDgzNjU1OjMyLAoyMTQ3NDgzNjU2OjEzNDIxNzc2MCwyMTQ3NDgzNjU3OjIwODAsMjE0NzQ4MzY1ODoxMzExMDQsMjE0NzQ4MzY1OToxMzQzNTA4NDgsMjE0NzQ4MzY2MDowLDIxNDc0ODM2NjE6MTM0MzQ4ODMyLDIxNDc0ODM2NjI6MTM0MjE5Nzc2LDIxNDc0ODM2NjM6MTMxMDcyLDE2OjEzMzE1MiwxNzoxMzQzNTA4NDgsMTg6MzIsMTk6MjA0OCwyMDoxMzQyMTk3NzYsMjE6MTM0MjE3NzYwLDIyOjEzNDM0ODgzMiwyMzoxMzEwNzIsMjQ6MCwyNToxMzExMDQsMjY6MTM0MzQ4ODAwLDI3OjEzNDIxOTgwOCwyODoxMzQzNTA4ODAsMjk6MTMzMTIwLDMwOjIwODAsMzE6MTM0MjE3NzI4LDIxNDc0ODM2NjQ6MTMxMDcyLDIxNDc0ODM2NjU6MjA0OCwyMTQ3NDgzNjY2OjEzNDM0ODgzMiwyMTQ3NDgzNjY3OjEzMzE1MiwyMTQ3NDgzNjY4OjMyLDIxNDc0ODM2Njk6MTM0MzQ4ODAwLDIxNDc0ODM2NzA6MTM0MjE3NzI4LDIxNDc0ODM2NzE6MTM0MjE5ODA4LDIxNDc0ODM2NzI6MTM0MzUwODgwLDIxNDc0ODM2NzM6MTM0MjE3NzYwLAoyMTQ3NDgzNjc0OjEzNDIxOTc3NiwyMTQ3NDgzNjc1OjAsMjE0NzQ4MzY3NjoxMzMxMjAsMjE0NzQ4MzY3NzoyMDgwLDIxNDc0ODM2Nzg6MTMxMTA0LDIxNDc0ODM2Nzk6MTM0MzUwODQ4fV0sdD1bNDE2MDc0OTU2OSw1Mjg0ODIzMDQsMzMwMzAxNDQsMjA2NDM4NCwxMjkwMjQsODA2NCw1MDQsMjE0NzQ4MzY3OV0sbT1nLkRFUz1lLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcy5fa2V5LndvcmRzLGM9W10sYT0wOzU2PmE7YSsrKXt2YXIgZj1xW2FdLTE7Y1thXT1iW2Y+Pj41XT4+PjMxLWYlMzImMX1iPXRoaXMuX3N1YktleXM9W107Zm9yKGY9MDsxNj5mO2YrKyl7Zm9yKHZhciBkPWJbZl09W10sZT1yW2ZdLGE9MDsyND5hO2ErKylkW2EvNnwwXXw9Y1socFthXS0xK2UpJTI4XTw8MzEtYSU2LGRbNCsoYS82fDApXXw9Y1syOCsocFthKzI0XS0xK2UpJTI4XTw8MzEtYSU2O2RbMF09ZFswXTw8MXxkWzBdPj4+MzE7Zm9yKGE9MTs3PmE7YSsrKWRbYV0+Pj49CjQqKGEtMSkrMztkWzddPWRbN108PDV8ZFs3XT4+PjI3fWM9dGhpcy5faW52U3ViS2V5cz1bXTtmb3IoYT0wOzE2PmE7YSsrKWNbYV09YlsxNS1hXX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZG9DcnlwdEJsb2NrKGIsYyx0aGlzLl9zdWJLZXlzKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZG9DcnlwdEJsb2NrKGIsYyx0aGlzLl9pbnZTdWJLZXlzKX0sX2RvQ3J5cHRCbG9jazpmdW5jdGlvbihiLGMsYSl7dGhpcy5fbEJsb2NrPWJbY107dGhpcy5fckJsb2NrPWJbYysxXTtqLmNhbGwodGhpcyw0LDI1MjY0NTEzNSk7ai5jYWxsKHRoaXMsMTYsNjU1MzUpO2wuY2FsbCh0aGlzLDIsODU4OTkzNDU5KTtsLmNhbGwodGhpcyw4LDE2NzExOTM1KTtqLmNhbGwodGhpcywxLDE0MzE2NTU3NjUpO2Zvcih2YXIgZj0wOzE2PmY7ZisrKXtmb3IodmFyIGQ9YVtmXSxlPXRoaXMuX2xCbG9jayxoPXRoaXMuX3JCbG9jayxnPTAsaz0wOzg+aztrKyspZ3w9c1trXVsoKGheCmRba10pJnRba10pPj4+MF07dGhpcy5fbEJsb2NrPWg7dGhpcy5fckJsb2NrPWVeZ31hPXRoaXMuX2xCbG9jazt0aGlzLl9sQmxvY2s9dGhpcy5fckJsb2NrO3RoaXMuX3JCbG9jaz1hO2ouY2FsbCh0aGlzLDEsMTQzMTY1NTc2NSk7bC5jYWxsKHRoaXMsOCwxNjcxMTkzNSk7bC5jYWxsKHRoaXMsMiw4NTg5OTM0NTkpO2ouY2FsbCh0aGlzLDE2LDY1NTM1KTtqLmNhbGwodGhpcyw0LDI1MjY0NTEzNSk7YltjXT10aGlzLl9sQmxvY2s7YltjKzFdPXRoaXMuX3JCbG9ja30sa2V5U2l6ZToyLGl2U2l6ZToyLGJsb2NrU2l6ZToyfSk7aC5ERVM9ZS5fY3JlYXRlSGVscGVyKG0pO2c9Zy5UcmlwbGVERVM9ZS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fa2V5LndvcmRzO3RoaXMuX2RlczE9bS5jcmVhdGVFbmNyeXB0b3Iobi5jcmVhdGUoYi5zbGljZSgwLDIpKSk7dGhpcy5fZGVzMj1tLmNyZWF0ZUVuY3J5cHRvcihuLmNyZWF0ZShiLnNsaWNlKDIsNCkpKTt0aGlzLl9kZXMzPQptLmNyZWF0ZUVuY3J5cHRvcihuLmNyZWF0ZShiLnNsaWNlKDQsNikpKX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZGVzMS5lbmNyeXB0QmxvY2soYixjKTt0aGlzLl9kZXMyLmRlY3J5cHRCbG9jayhiLGMpO3RoaXMuX2RlczMuZW5jcnlwdEJsb2NrKGIsYyl9LGRlY3J5cHRCbG9jazpmdW5jdGlvbihiLGMpe3RoaXMuX2RlczMuZGVjcnlwdEJsb2NrKGIsYyk7dGhpcy5fZGVzMi5lbmNyeXB0QmxvY2soYixjKTt0aGlzLl9kZXMxLmRlY3J5cHRCbG9jayhiLGMpfSxrZXlTaXplOjYsaXZTaXplOjIsYmxvY2tTaXplOjJ9KTtoLlRyaXBsZURFUz1lLl9jcmVhdGVIZWxwZXIoZyl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIGVuYy1iYXNlNjQtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgaD1DcnlwdG9KUyxqPWgubGliLldvcmRBcnJheTtoLmVuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbihiKXt2YXIgZT1iLndvcmRzLGY9Yi5zaWdCeXRlcyxjPXRoaXMuX21hcDtiLmNsYW1wKCk7Yj1bXTtmb3IodmFyIGE9MDthPGY7YSs9Mylmb3IodmFyIGQ9KGVbYT4+PjJdPj4+MjQtOCooYSU0KSYyNTUpPDwxNnwoZVthKzE+Pj4yXT4+PjI0LTgqKChhKzEpJTQpJjI1NSk8PDh8ZVthKzI+Pj4yXT4+PjI0LTgqKChhKzIpJTQpJjI1NSxnPTA7ND5nJiZhKzAuNzUqZzxmO2crKyliLnB1c2goYy5jaGFyQXQoZD4+PjYqKDMtZykmNjMpKTtpZihlPWMuY2hhckF0KDY0KSlmb3IoO2IubGVuZ3RoJTQ7KWIucHVzaChlKTtyZXR1cm4gYi5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oYil7dmFyIGU9Yi5sZW5ndGgsZj10aGlzLl9tYXAsYz1mLmNoYXJBdCg2NCk7YyYmKGM9Yi5pbmRleE9mKGMpLC0xIT1jJiYoZT1jKSk7Zm9yKHZhciBjPVtdLGE9MCxkPTA7ZDwKZTtkKyspaWYoZCU0KXt2YXIgZz1mLmluZGV4T2YoYi5jaGFyQXQoZC0xKSk8PDIqKGQlNCksaD1mLmluZGV4T2YoYi5jaGFyQXQoZCkpPj4+Ni0yKihkJTQpO2NbYT4+PjJdfD0oZ3xoKTw8MjQtOCooYSU0KTthKyt9cmV0dXJuIGouY3JlYXRlKGMsYSl9LF9tYXA6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89In19KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIG1kNS1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbihFKXtmdW5jdGlvbiBoKGEsZixnLGoscCxoLGspe2E9YSsoZiZnfH5mJmopK3AraztyZXR1cm4oYTw8aHxhPj4+MzItaCkrZn1mdW5jdGlvbiBrKGEsZixnLGoscCxoLGspe2E9YSsoZiZqfGcmfmopK3AraztyZXR1cm4oYTw8aHxhPj4+MzItaCkrZn1mdW5jdGlvbiBsKGEsZixnLGosaCxrLGwpe2E9YSsoZl5nXmopK2grbDtyZXR1cm4oYTw8a3xhPj4+MzItaykrZn1mdW5jdGlvbiBuKGEsZixnLGosaCxrLGwpe2E9YSsoZ14oZnx+aikpK2grbDtyZXR1cm4oYTw8a3xhPj4+MzItaykrZn1mb3IodmFyIHI9Q3J5cHRvSlMscT1yLmxpYixGPXEuV29yZEFycmF5LHM9cS5IYXNoZXIscT1yLmFsZ28sYT1bXSx0PTA7NjQ+dDt0KyspYVt0XT00Mjk0OTY3Mjk2KkUuYWJzKEUuc2luKHQrMSkpfDA7cT1xLk1ENT1zLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBGLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OF0pfSwKX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKG0sZil7Zm9yKHZhciBnPTA7MTY+ZztnKyspe3ZhciBqPWYrZyxwPW1bal07bVtqXT0ocDw8OHxwPj4+MjQpJjE2NzExOTM1fChwPDwyNHxwPj4+OCkmNDI3ODI1NTM2MH12YXIgZz10aGlzLl9oYXNoLndvcmRzLGo9bVtmKzBdLHA9bVtmKzFdLHE9bVtmKzJdLHI9bVtmKzNdLHM9bVtmKzRdLHQ9bVtmKzVdLHU9bVtmKzZdLHY9bVtmKzddLHc9bVtmKzhdLHg9bVtmKzldLHk9bVtmKzEwXSx6PW1bZisxMV0sQT1tW2YrMTJdLEI9bVtmKzEzXSxDPW1bZisxNF0sRD1tW2YrMTVdLGI9Z1swXSxjPWdbMV0sZD1nWzJdLGU9Z1szXSxiPWgoYixjLGQsZSxqLDcsYVswXSksZT1oKGUsYixjLGQscCwxMixhWzFdKSxkPWgoZCxlLGIsYyxxLDE3LGFbMl0pLGM9aChjLGQsZSxiLHIsMjIsYVszXSksYj1oKGIsYyxkLGUscyw3LGFbNF0pLGU9aChlLGIsYyxkLHQsMTIsYVs1XSksZD1oKGQsZSxiLGMsdSwxNyxhWzZdKSxjPWgoYyxkLGUsYix2LDIyLGFbN10pLApiPWgoYixjLGQsZSx3LDcsYVs4XSksZT1oKGUsYixjLGQseCwxMixhWzldKSxkPWgoZCxlLGIsYyx5LDE3LGFbMTBdKSxjPWgoYyxkLGUsYix6LDIyLGFbMTFdKSxiPWgoYixjLGQsZSxBLDcsYVsxMl0pLGU9aChlLGIsYyxkLEIsMTIsYVsxM10pLGQ9aChkLGUsYixjLEMsMTcsYVsxNF0pLGM9aChjLGQsZSxiLEQsMjIsYVsxNV0pLGI9ayhiLGMsZCxlLHAsNSxhWzE2XSksZT1rKGUsYixjLGQsdSw5LGFbMTddKSxkPWsoZCxlLGIsYyx6LDE0LGFbMThdKSxjPWsoYyxkLGUsYixqLDIwLGFbMTldKSxiPWsoYixjLGQsZSx0LDUsYVsyMF0pLGU9ayhlLGIsYyxkLHksOSxhWzIxXSksZD1rKGQsZSxiLGMsRCwxNCxhWzIyXSksYz1rKGMsZCxlLGIscywyMCxhWzIzXSksYj1rKGIsYyxkLGUseCw1LGFbMjRdKSxlPWsoZSxiLGMsZCxDLDksYVsyNV0pLGQ9ayhkLGUsYixjLHIsMTQsYVsyNl0pLGM9ayhjLGQsZSxiLHcsMjAsYVsyN10pLGI9ayhiLGMsZCxlLEIsNSxhWzI4XSksZT1rKGUsYiwKYyxkLHEsOSxhWzI5XSksZD1rKGQsZSxiLGMsdiwxNCxhWzMwXSksYz1rKGMsZCxlLGIsQSwyMCxhWzMxXSksYj1sKGIsYyxkLGUsdCw0LGFbMzJdKSxlPWwoZSxiLGMsZCx3LDExLGFbMzNdKSxkPWwoZCxlLGIsYyx6LDE2LGFbMzRdKSxjPWwoYyxkLGUsYixDLDIzLGFbMzVdKSxiPWwoYixjLGQsZSxwLDQsYVszNl0pLGU9bChlLGIsYyxkLHMsMTEsYVszN10pLGQ9bChkLGUsYixjLHYsMTYsYVszOF0pLGM9bChjLGQsZSxiLHksMjMsYVszOV0pLGI9bChiLGMsZCxlLEIsNCxhWzQwXSksZT1sKGUsYixjLGQsaiwxMSxhWzQxXSksZD1sKGQsZSxiLGMsciwxNixhWzQyXSksYz1sKGMsZCxlLGIsdSwyMyxhWzQzXSksYj1sKGIsYyxkLGUseCw0LGFbNDRdKSxlPWwoZSxiLGMsZCxBLDExLGFbNDVdKSxkPWwoZCxlLGIsYyxELDE2LGFbNDZdKSxjPWwoYyxkLGUsYixxLDIzLGFbNDddKSxiPW4oYixjLGQsZSxqLDYsYVs0OF0pLGU9bihlLGIsYyxkLHYsMTAsYVs0OV0pLGQ9bihkLGUsYixjLApDLDE1LGFbNTBdKSxjPW4oYyxkLGUsYix0LDIxLGFbNTFdKSxiPW4oYixjLGQsZSxBLDYsYVs1Ml0pLGU9bihlLGIsYyxkLHIsMTAsYVs1M10pLGQ9bihkLGUsYixjLHksMTUsYVs1NF0pLGM9bihjLGQsZSxiLHAsMjEsYVs1NV0pLGI9bihiLGMsZCxlLHcsNixhWzU2XSksZT1uKGUsYixjLGQsRCwxMCxhWzU3XSksZD1uKGQsZSxiLGMsdSwxNSxhWzU4XSksYz1uKGMsZCxlLGIsQiwyMSxhWzU5XSksYj1uKGIsYyxkLGUscyw2LGFbNjBdKSxlPW4oZSxiLGMsZCx6LDEwLGFbNjFdKSxkPW4oZCxlLGIsYyxxLDE1LGFbNjJdKSxjPW4oYyxkLGUsYix4LDIxLGFbNjNdKTtnWzBdPWdbMF0rYnwwO2dbMV09Z1sxXStjfDA7Z1syXT1nWzJdK2R8MDtnWzNdPWdbM10rZXwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2RhdGEsZj1hLndvcmRzLGc9OCp0aGlzLl9uRGF0YUJ5dGVzLGo9OCphLnNpZ0J5dGVzO2Zbaj4+PjVdfD0xMjg8PDI0LWolMzI7dmFyIGg9RS5mbG9vcihnLwo0Mjk0OTY3Mjk2KTtmWyhqKzY0Pj4+OTw8NCkrMTVdPShoPDw4fGg+Pj4yNCkmMTY3MTE5MzV8KGg8PDI0fGg+Pj44KSY0Mjc4MjU1MzYwO2ZbKGorNjQ+Pj45PDw0KSsxNF09KGc8PDh8Zz4+PjI0KSYxNjcxMTkzNXwoZzw8MjR8Zz4+PjgpJjQyNzgyNTUzNjA7YS5zaWdCeXRlcz00KihmLmxlbmd0aCsxKTt0aGlzLl9wcm9jZXNzKCk7YT10aGlzLl9oYXNoO2Y9YS53b3Jkcztmb3IoZz0wOzQ+ZztnKyspaj1mW2ddLGZbZ109KGo8PDh8aj4+PjI0KSYxNjcxMTkzNXwoajw8MjR8aj4+PjgpJjQyNzgyNTUzNjA7cmV0dXJuIGF9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9cy5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhfX0pO3IuTUQ1PXMuX2NyZWF0ZUhlbHBlcihxKTtyLkhtYWNNRDU9cy5fY3JlYXRlSG1hY0hlbHBlcihxKX0pKE1hdGgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTEtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgaz1DcnlwdG9KUyxiPWsubGliLG09Yi5Xb3JkQXJyYXksbD1iLkhhc2hlcixkPVtdLGI9ay5hbGdvLlNIQTE9bC5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgbS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24obixwKXtmb3IodmFyIGE9dGhpcy5faGFzaC53b3JkcyxlPWFbMF0sZj1hWzFdLGg9YVsyXSxqPWFbM10sYj1hWzRdLGM9MDs4MD5jO2MrKyl7aWYoMTY+YylkW2NdPW5bcCtjXXwwO2Vsc2V7dmFyIGc9ZFtjLTNdXmRbYy04XV5kW2MtMTRdXmRbYy0xNl07ZFtjXT1nPDwxfGc+Pj4zMX1nPShlPDw1fGU+Pj4yNykrYitkW2NdO2c9MjA+Yz9nKygoZiZofH5mJmopKzE1MTg1MDAyNDkpOjQwPmM/ZysoKGZeaF5qKSsxODU5Nzc1MzkzKTo2MD5jP2crKChmJmh8ZiZqfGgmaiktMTg5NDAwNzU4OCk6ZysoKGZeaF4KaiktODk5NDk3NTE0KTtiPWo7aj1oO2g9Zjw8MzB8Zj4+PjI7Zj1lO2U9Z31hWzBdPWFbMF0rZXwwO2FbMV09YVsxXStmfDA7YVsyXT1hWzJdK2h8MDthWzNdPWFbM10ranwwO2FbNF09YVs0XStifDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fZGF0YSxkPWIud29yZHMsYT04KnRoaXMuX25EYXRhQnl0ZXMsZT04KmIuc2lnQnl0ZXM7ZFtlPj4+NV18PTEyODw8MjQtZSUzMjtkWyhlKzY0Pj4+OTw8NCkrMTRdPU1hdGguZmxvb3IoYS80Mjk0OTY3Mjk2KTtkWyhlKzY0Pj4+OTw8NCkrMTVdPWE7Yi5zaWdCeXRlcz00KmQubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYj1sLmNsb25lLmNhbGwodGhpcyk7Yi5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGJ9fSk7ay5TSEExPWwuX2NyZWF0ZUhlbHBlcihiKTtrLkhtYWNTSEExPWwuX2NyZWF0ZUhtYWNIZWxwZXIoYil9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTI1Ni1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbihrKXtmb3IodmFyIGc9Q3J5cHRvSlMsaD1nLmxpYix2PWguV29yZEFycmF5LGo9aC5IYXNoZXIsaD1nLmFsZ28scz1bXSx0PVtdLHU9ZnVuY3Rpb24ocSl7cmV0dXJuIDQyOTQ5NjcyOTYqKHEtKHF8MCkpfDB9LGw9MixiPTA7NjQ+Yjspe3ZhciBkO2E6e2Q9bDtmb3IodmFyIHc9ay5zcXJ0KGQpLHI9MjtyPD13O3IrKylpZighKGQlcikpe2Q9ITE7YnJlYWsgYX1kPSEwfWQmJig4PmImJihzW2JdPXUoay5wb3cobCwwLjUpKSksdFtiXT11KGsucG93KGwsMS8zKSksYisrKTtsKyt9dmFyIG49W10saD1oLlNIQTI1Nj1qLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyB2LmluaXQocy5zbGljZSgwKSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihxLGgpe2Zvcih2YXIgYT10aGlzLl9oYXNoLndvcmRzLGM9YVswXSxkPWFbMV0sYj1hWzJdLGs9YVszXSxmPWFbNF0sZz1hWzVdLGo9YVs2XSxsPWFbN10sZT0wOzY0PmU7ZSsrKXtpZigxNj5lKW5bZV09CnFbaCtlXXwwO2Vsc2V7dmFyIG09bltlLTE1XSxwPW5bZS0yXTtuW2VdPSgobTw8MjV8bT4+PjcpXihtPDwxNHxtPj4+MTgpXm0+Pj4zKStuW2UtN10rKChwPDwxNXxwPj4+MTcpXihwPDwxM3xwPj4+MTkpXnA+Pj4xMCkrbltlLTE2XX1tPWwrKChmPDwyNnxmPj4+NileKGY8PDIxfGY+Pj4xMSleKGY8PDd8Zj4+PjI1KSkrKGYmZ15+ZiZqKSt0W2VdK25bZV07cD0oKGM8PDMwfGM+Pj4yKV4oYzw8MTl8Yz4+PjEzKV4oYzw8MTB8Yz4+PjIyKSkrKGMmZF5jJmJeZCZiKTtsPWo7aj1nO2c9ZjtmPWsrbXwwO2s9YjtiPWQ7ZD1jO2M9bStwfDB9YVswXT1hWzBdK2N8MDthWzFdPWFbMV0rZHwwO2FbMl09YVsyXStifDA7YVszXT1hWzNdK2t8MDthWzRdPWFbNF0rZnwwO2FbNV09YVs1XStnfDA7YVs2XT1hWzZdK2p8MDthWzddPWFbN10rbHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMuX2RhdGEsYj1kLndvcmRzLGE9OCp0aGlzLl9uRGF0YUJ5dGVzLGM9OCpkLnNpZ0J5dGVzOwpiW2M+Pj41XXw9MTI4PDwyNC1jJTMyO2JbKGMrNjQ+Pj45PDw0KSsxNF09ay5mbG9vcihhLzQyOTQ5NjcyOTYpO2JbKGMrNjQ+Pj45PDw0KSsxNV09YTtkLnNpZ0J5dGVzPTQqYi5sZW5ndGg7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciBiPWouY2xvbmUuY2FsbCh0aGlzKTtiLl9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKTtyZXR1cm4gYn19KTtnLlNIQTI1Nj1qLl9jcmVhdGVIZWxwZXIoaCk7Zy5IbWFjU0hBMjU2PWouX2NyZWF0ZUhtYWNIZWxwZXIoaCl9KShNYXRoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBzaGEyMjQtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgYj1DcnlwdG9KUyxkPWIubGliLldvcmRBcnJheSxhPWIuYWxnbyxjPWEuU0hBMjU2LGE9YS5TSEEyMjQ9Yy5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgZC5pbml0KFszMjM4MzcxMDMyLDkxNDE1MDY2Myw4MTI3MDI5OTksNDE0NDkxMjY5Nyw0MjkwNzc1ODU3LDE3NTA2MDMwMjUsMTY5NDA3NjgzOSwzMjA0MDc1NDI4XSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9Yy5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTQ7cmV0dXJuIGF9fSk7Yi5TSEEyMjQ9Yy5fY3JlYXRlSGVscGVyKGEpO2IuSG1hY1NIQTIyND1jLl9jcmVhdGVIbWFjSGVscGVyKGEpfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBzaGE1MTItbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7cmV0dXJuIGQuY3JlYXRlLmFwcGx5KGQsYXJndW1lbnRzKX1mb3IodmFyIG49Q3J5cHRvSlMscj1uLmxpYi5IYXNoZXIsZT1uLng2NCxkPWUuV29yZCxUPWUuV29yZEFycmF5LGU9bi5hbGdvLGVhPVthKDExMTYzNTI0MDgsMzYwOTc2NzQ1OCksYSgxODk5NDQ3NDQxLDYwMjg5MTcyNSksYSgzMDQ5MzIzNDcxLDM5NjQ0ODQzOTkpLGEoMzkyMTAwOTU3MywyMTczMjk1NTQ4KSxhKDk2MTk4NzE2Myw0MDgxNjI4NDcyKSxhKDE1MDg5NzA5OTMsMzA1MzgzNDI2NSksYSgyNDUzNjM1NzQ4LDI5Mzc2NzE1NzkpLGEoMjg3MDc2MzIyMSwzNjY0NjA5NTYwKSxhKDM2MjQzODEwODAsMjczNDg4MzM5NCksYSgzMTA1OTg0MDEsMTE2NDk5NjU0MiksYSg2MDcyMjUyNzgsMTMyMzYxMDc2NCksYSgxNDI2ODgxOTg3LDM1OTAzMDQ5OTQpLGEoMTkyNTA3ODM4OCw0MDY4MTgyMzgzKSxhKDIxNjIwNzgyMDYsOTkxMzM2MTEzKSxhKDI2MTQ4ODgxMDMsNjMzODAzMzE3KSwKYSgzMjQ4MjIyNTgwLDM0Nzk3NzQ4NjgpLGEoMzgzNTM5MDQwMSwyNjY2NjEzNDU4KSxhKDQwMjIyMjQ3NzQsOTQ0NzExMTM5KSxhKDI2NDM0NzA3OCwyMzQxMjYyNzczKSxhKDYwNDgwNzYyOCwyMDA3ODAwOTMzKSxhKDc3MDI1NTk4MywxNDk1OTkwOTAxKSxhKDEyNDkxNTAxMjIsMTg1NjQzMTIzNSksYSgxNTU1MDgxNjkyLDMxNzUyMTgxMzIpLGEoMTk5NjA2NDk4NiwyMTk4OTUwODM3KSxhKDI1NTQyMjA4ODIsMzk5OTcxOTMzOSksYSgyODIxODM0MzQ5LDc2Njc4NDAxNiksYSgyOTUyOTk2ODA4LDI1NjY1OTQ4NzkpLGEoMzIxMDMxMzY3MSwzMjAzMzM3OTU2KSxhKDMzMzY1NzE4OTEsMTAzNDQ1NzAyNiksYSgzNTg0NTI4NzExLDI0NjY5NDg5MDEpLGEoMTEzOTI2OTkzLDM3NTgzMjYzODMpLGEoMzM4MjQxODk1LDE2ODcxNzkzNiksYSg2NjYzMDcyMDUsMTE4ODE3OTk2NCksYSg3NzM1Mjk5MTIsMTU0NjA0NTczNCksYSgxMjk0NzU3MzcyLDE1MjI4MDU0ODUpLGEoMTM5NjE4MjI5MSwKMjY0MzgzMzgyMyksYSgxNjk1MTgzNzAwLDIzNDM1MjczOTApLGEoMTk4NjY2MTA1MSwxMDE0NDc3NDgwKSxhKDIxNzcwMjYzNTAsMTIwNjc1OTE0MiksYSgyNDU2OTU2MDM3LDM0NDA3NzYyNyksYSgyNzMwNDg1OTIxLDEyOTA4NjM0NjApLGEoMjgyMDMwMjQxMSwzMTU4NDU0MjczKSxhKDMyNTk3MzA4MDAsMzUwNTk1MjY1NyksYSgzMzQ1NzY0NzcxLDEwNjIxNzAwOCksYSgzNTE2MDY1ODE3LDM2MDYwMDgzNDQpLGEoMzYwMDM1MjgwNCwxNDMyNzI1Nzc2KSxhKDQwOTQ1NzE5MDksMTQ2NzAzMTU5NCksYSgyNzU0MjMzNDQsODUxMTY5NzIwKSxhKDQzMDIyNzczNCwzMTAwODIzNzUyKSxhKDUwNjk0ODYxNiwxMzYzMjU4MTk1KSxhKDY1OTA2MDU1NiwzNzUwNjg1NTkzKSxhKDg4Mzk5Nzg3NywzNzg1MDUwMjgwKSxhKDk1ODEzOTU3MSwzMzE4MzA3NDI3KSxhKDEzMjI4MjIyMTgsMzgxMjcyMzQwMyksYSgxNTM3MDAyMDYzLDIwMDMwMzQ5OTUpLGEoMTc0Nzg3Mzc3OSwzNjAyMDM2ODk5KSwKYSgxOTU1NTYyMjIyLDE1NzU5OTAwMTIpLGEoMjAyNDEwNDgxNSwxMTI1NTkyOTI4KSxhKDIyMjc3MzA0NTIsMjcxNjkwNDMwNiksYSgyMzYxODUyNDI0LDQ0Mjc3NjA0NCksYSgyNDI4NDM2NDc0LDU5MzY5ODM0NCksYSgyNzU2NzM0MTg3LDM3MzMxMTAyNDkpLGEoMzIwNDAzMTQ3OSwyOTk5MzUxNTczKSxhKDMzMjkzMjUyOTgsMzgxNTkyMDQyNyksYSgzMzkxNTY5NjE0LDM5MjgzODM5MDApLGEoMzUxNTI2NzI3MSw1NjYyODA3MTEpLGEoMzk0MDE4NzYwNiwzNDU0MDY5NTM0KSxhKDQxMTg2MzAyNzEsNDAwMDIzOTk5MiksYSgxMTY0MTg0NzQsMTkxNDEzODU1NCksYSgxNzQyOTI0MjEsMjczMTA1NTI3MCksYSgyODkzODAzNTYsMzIwMzk5MzAwNiksYSg0NjAzOTMyNjksMzIwNjIwMzE1KSxhKDY4NTQ3MTczMyw1ODc0OTY4MzYpLGEoODUyMTQyOTcxLDEwODY3OTI4NTEpLGEoMTAxNzAzNjI5OCwzNjU1NDMxMDApLGEoMTEyNjAwMDU4MCwyNjE4Mjk3Njc2KSxhKDEyODgwMzM0NzAsCjM0MDk4NTUxNTgpLGEoMTUwMTUwNTk0OCw0MjM0NTA5ODY2KSxhKDE2MDcxNjc5MTUsOTg3MTY3NDY4KSxhKDE4MTY0MDIzMTYsMTI0NjE4OTU5MSldLHY9W10sdz0wOzgwPnc7dysrKXZbd109YSgpO2U9ZS5TSEE1MTI9ci5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgVC5pbml0KFtuZXcgZC5pbml0KDE3NzkwMzM3MDMsNDA4OTIzNTcyMCksbmV3IGQuaW5pdCgzMTQ0MTM0Mjc3LDIyMjc4NzM1OTUpLG5ldyBkLmluaXQoMTAxMzkwNDI0Miw0MjcxMTc1NzIzKSxuZXcgZC5pbml0KDI3NzM0ODA3NjIsMTU5NTc1MDEyOSksbmV3IGQuaW5pdCgxMzU5ODkzMTE5LDI5MTc1NjUxMzcpLG5ldyBkLmluaXQoMjYwMDgyMjkyNCw3MjU1MTExOTkpLG5ldyBkLmluaXQoNTI4NzM0NjM1LDQyMTUzODk1NDcpLG5ldyBkLmluaXQoMTU0MTQ1OTIyNSwzMjcwMzMyMDkpXSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihhLGQpe2Zvcih2YXIgZj10aGlzLl9oYXNoLndvcmRzLApGPWZbMF0sZT1mWzFdLG49ZlsyXSxyPWZbM10sRz1mWzRdLEg9Zls1XSxJPWZbNl0sZj1mWzddLHc9Ri5oaWdoLEo9Ri5sb3csWD1lLmhpZ2gsSz1lLmxvdyxZPW4uaGlnaCxMPW4ubG93LFo9ci5oaWdoLE09ci5sb3csJD1HLmhpZ2gsTj1HLmxvdyxhYT1ILmhpZ2gsTz1ILmxvdyxiYT1JLmhpZ2gsUD1JLmxvdyxjYT1mLmhpZ2gsUT1mLmxvdyxrPXcsZz1KLHo9WCx4PUssQT1ZLHk9TCxVPVosQj1NLGw9JCxoPU4sUj1hYSxDPU8sUz1iYSxEPVAsVj1jYSxFPVEsbT0wOzgwPm07bSsrKXt2YXIgcz12W21dO2lmKDE2Pm0pdmFyIGo9cy5oaWdoPWFbZCsyKm1dfDAsYj1zLmxvdz1hW2QrMiptKzFdfDA7ZWxzZXt2YXIgaj12W20tMTVdLGI9ai5oaWdoLHA9ai5sb3csaj0oYj4+PjF8cDw8MzEpXihiPj4+OHxwPDwyNCleYj4+PjcscD0ocD4+PjF8Yjw8MzEpXihwPj4+OHxiPDwyNCleKHA+Pj43fGI8PDI1KSx1PXZbbS0yXSxiPXUuaGlnaCxjPXUubG93LHU9KGI+Pj4xOXxjPDwxMyleKGI8PAozfGM+Pj4yOSleYj4+PjYsYz0oYz4+PjE5fGI8PDEzKV4oYzw8M3xiPj4+MjkpXihjPj4+NnxiPDwyNiksYj12W20tN10sVz1iLmhpZ2gsdD12W20tMTZdLHE9dC5oaWdoLHQ9dC5sb3csYj1wK2IubG93LGo9aitXKyhiPj4+MDxwPj4+MD8xOjApLGI9YitjLGo9ait1KyhiPj4+MDxjPj4+MD8xOjApLGI9Yit0LGo9aitxKyhiPj4+MDx0Pj4+MD8xOjApO3MuaGlnaD1qO3MubG93PWJ9dmFyIFc9bCZSXn5sJlMsdD1oJkNefmgmRCxzPWsmel5rJkFeeiZBLFQ9ZyZ4XmcmeV54JnkscD0oaz4+PjI4fGc8PDQpXihrPDwzMHxnPj4+MileKGs8PDI1fGc+Pj43KSx1PShnPj4+Mjh8azw8NCleKGc8PDMwfGs+Pj4yKV4oZzw8MjV8az4+PjcpLGM9ZWFbbV0sZmE9Yy5oaWdoLGRhPWMubG93LGM9RSsoKGg+Pj4xNHxsPDwxOCleKGg+Pj4xOHxsPDwxNCleKGg8PDIzfGw+Pj45KSkscT1WKygobD4+PjE0fGg8PDE4KV4obD4+PjE4fGg8PDE0KV4obDw8MjN8aD4+PjkpKSsoYz4+PjA8RT4+PjA/MToKMCksYz1jK3QscT1xK1crKGM+Pj4wPHQ+Pj4wPzE6MCksYz1jK2RhLHE9cStmYSsoYz4+PjA8ZGE+Pj4wPzE6MCksYz1jK2IscT1xK2orKGM+Pj4wPGI+Pj4wPzE6MCksYj11K1Qscz1wK3MrKGI+Pj4wPHU+Pj4wPzE6MCksVj1TLEU9RCxTPVIsRD1DLFI9bCxDPWgsaD1CK2N8MCxsPVUrcSsoaD4+PjA8Qj4+PjA/MTowKXwwLFU9QSxCPXksQT16LHk9eCx6PWsseD1nLGc9YytifDAsaz1xK3MrKGc+Pj4wPGM+Pj4wPzE6MCl8MH1KPUYubG93PUorZztGLmhpZ2g9dytrKyhKPj4+MDxnPj4+MD8xOjApO0s9ZS5sb3c9Syt4O2UuaGlnaD1YK3orKEs+Pj4wPHg+Pj4wPzE6MCk7TD1uLmxvdz1MK3k7bi5oaWdoPVkrQSsoTD4+PjA8eT4+PjA/MTowKTtNPXIubG93PU0rQjtyLmhpZ2g9WitVKyhNPj4+MDxCPj4+MD8xOjApO049Ry5sb3c9TitoO0cuaGlnaD0kK2wrKE4+Pj4wPGg+Pj4wPzE6MCk7Tz1ILmxvdz1PK0M7SC5oaWdoPWFhK1IrKE8+Pj4wPEM+Pj4wPzE6MCk7UD1JLmxvdz1QK0Q7CkkuaGlnaD1iYStTKyhQPj4+MDxEPj4+MD8xOjApO1E9Zi5sb3c9UStFO2YuaGlnaD1jYStWKyhRPj4+MDxFPj4+MD8xOjApfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2RhdGEsZD1hLndvcmRzLGY9OCp0aGlzLl9uRGF0YUJ5dGVzLGU9OCphLnNpZ0J5dGVzO2RbZT4+PjVdfD0xMjg8PDI0LWUlMzI7ZFsoZSsxMjg+Pj4xMDw8NSkrMzBdPU1hdGguZmxvb3IoZi80Mjk0OTY3Mjk2KTtkWyhlKzEyOD4+PjEwPDw1KSszMV09ZjthLnNpZ0J5dGVzPTQqZC5sZW5ndGg7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzLl9oYXNoLnRvWDMyKCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9ci5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhfSxibG9ja1NpemU6MzJ9KTtuLlNIQTUxMj1yLl9jcmVhdGVIZWxwZXIoZSk7bi5IbWFjU0hBNTEyPXIuX2NyZWF0ZUhtYWNIZWxwZXIoZSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTM4NC1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbigpe3ZhciBjPUNyeXB0b0pTLGE9Yy54NjQsYj1hLldvcmQsZT1hLldvcmRBcnJheSxhPWMuYWxnbyxkPWEuU0hBNTEyLGE9YS5TSEEzODQ9ZC5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgZS5pbml0KFtuZXcgYi5pbml0KDM0MTgwNzAzNjUsMzIzODM3MTAzMiksbmV3IGIuaW5pdCgxNjU0MjcwMjUwLDkxNDE1MDY2MyksbmV3IGIuaW5pdCgyNDM4NTI5MzcwLDgxMjcwMjk5OSksbmV3IGIuaW5pdCgzNTU0NjIzNjAsNDE0NDkxMjY5NyksbmV3IGIuaW5pdCgxNzMxNDA1NDE1LDQyOTA3NzU4NTcpLG5ldyBiLmluaXQoMjM5NDE4MDIzMSwxNzUwNjAzMDI1KSxuZXcgYi5pbml0KDM2NzUwMDg1MjUsMTY5NDA3NjgzOSksbmV3IGIuaW5pdCgxMjAzMDYyODEzLDMyMDQwNzU0MjgpXSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9ZC5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTE2O3JldHVybiBhfX0pO2MuU0hBMzg0PQpkLl9jcmVhdGVIZWxwZXIoYSk7Yy5IbWFjU0hBMzg0PWQuX2NyZWF0ZUhtYWNIZWxwZXIoYSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHJpcGVtZDE2MC1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCi8qCgooYykgMjAxMiBieSBDZWRyaWMgTWVzbmlsLiBBbGwgcmlnaHRzIHJlc2VydmVkLgoKUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0IG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OgoKICAgIC0gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLgogICAgLSBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCgpUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTICJBUyBJUyIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgoqLwooZnVuY3Rpb24oKXt2YXIgcT1DcnlwdG9KUyxkPXEubGliLG49ZC5Xb3JkQXJyYXkscD1kLkhhc2hlcixkPXEuYWxnbyx4PW4uY3JlYXRlKFswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDcsNCwxMywxLDEwLDYsMTUsMywxMiwwLDksNSwyLDE0LDExLDgsMywxMCwxNCw0LDksMTUsOCwxLDIsNywwLDYsMTMsMTEsNSwxMiwxLDksMTEsMTAsMCw4LDEyLDQsMTMsMyw3LDE1LDE0LDUsNiwyLDQsMCw1LDksNywxMiwyLDEwLDE0LDEsMyw4LDExLDYsMTUsMTNdKSx5PW4uY3JlYXRlKFs1LDE0LDcsMCw5LDIsMTEsNCwxMyw2LDE1LDgsMSwxMCwzLDEyLDYsMTEsMyw3LDAsMTMsNSwxMCwxNCwxNSw4LDEyLDQsOSwxLDIsMTUsNSwxLDMsNywxNCw2LDksMTEsOCwxMiwyLDEwLDAsNCwxMyw4LDYsNCwxLDMsMTEsMTUsMCw1LDEyLDIsMTMsOSw3LDEwLDE0LDEyLDE1LDEwLDQsMSw1LDgsNyw2LDIsMTMsMTQsMCwzLDksMTFdKSx6PW4uY3JlYXRlKFsxMSwxNCwxNSwxMiwKNSw4LDcsOSwxMSwxMywxNCwxNSw2LDcsOSw4LDcsNiw4LDEzLDExLDksNywxNSw3LDEyLDE1LDksMTEsNywxMywxMiwxMSwxMyw2LDcsMTQsOSwxMywxNSwxNCw4LDEzLDYsNSwxMiw3LDUsMTEsMTIsMTQsMTUsMTQsMTUsOSw4LDksMTQsNSw2LDgsNiw1LDEyLDksMTUsNSwxMSw2LDgsMTMsMTIsNSwxMiwxMywxNCwxMSw4LDUsNl0pLEE9bi5jcmVhdGUoWzgsOSw5LDExLDEzLDE1LDE1LDUsNyw3LDgsMTEsMTQsMTQsMTIsNiw5LDEzLDE1LDcsMTIsOCw5LDExLDcsNywxMiw3LDYsMTUsMTMsMTEsOSw3LDE1LDExLDgsNiw2LDE0LDEyLDEzLDUsMTQsMTMsMTMsNyw1LDE1LDUsOCwxMSwxNCwxNCw2LDE0LDYsOSwxMiw5LDEyLDUsMTUsOCw4LDUsMTIsOSwxMiw1LDE0LDYsOCwxMyw2LDUsMTUsMTMsMTEsMTFdKSxCPW4uY3JlYXRlKFswLDE1MTg1MDAyNDksMTg1OTc3NTM5MywyNDAwOTU5NzA4LDI4NDA4NTM4MzhdKSxDPW4uY3JlYXRlKFsxMzUyODI5OTI2LDE1NDg2MDM2ODQsMTgzNjA3MjY5MSwKMjA1Mzk5NDIxNywwXSksZD1kLlJJUEVNRDE2MD1wLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW4uY3JlYXRlKFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZSx2KXtmb3IodmFyIGI9MDsxNj5iO2IrKyl7dmFyIGM9ditiLGY9ZVtjXTtlW2NdPShmPDw4fGY+Pj4yNCkmMTY3MTE5MzV8KGY8PDI0fGY+Pj44KSY0Mjc4MjU1MzYwfXZhciBjPXRoaXMuX2hhc2gud29yZHMsZj1CLndvcmRzLGQ9Qy53b3JkcyxuPXgud29yZHMscT15LndvcmRzLHA9ei53b3Jkcyx3PUEud29yZHMsdCxnLGgsaixyLHUsayxsLG0sczt1PXQ9Y1swXTtrPWc9Y1sxXTtsPWg9Y1syXTttPWo9Y1szXTtzPXI9Y1s0XTtmb3IodmFyIGEsYj0wOzgwPmI7Yis9MSlhPXQrZVt2K25bYl1dfDAsYT0xNj5iP2ErKChnXmheaikrZlswXSk6MzI+Yj9hKygoZyZofH5nJmopK2ZbMV0pOjQ4PmI/CmErKCgoZ3x+aCleaikrZlsyXSk6NjQ+Yj9hKygoZyZqfGgmfmopK2ZbM10pOmErKChnXihofH5qKSkrZls0XSksYXw9MCxhPWE8PHBbYl18YT4+PjMyLXBbYl0sYT1hK3J8MCx0PXIscj1qLGo9aDw8MTB8aD4+PjIyLGg9ZyxnPWEsYT11K2VbditxW2JdXXwwLGE9MTY+Yj9hKygoa14obHx+bSkpK2RbMF0pOjMyPmI/YSsoKGsmbXxsJn5tKStkWzFdKTo0OD5iP2ErKCgoa3x+bClebSkrZFsyXSk6NjQ+Yj9hKygoayZsfH5rJm0pK2RbM10pOmErKChrXmxebSkrZFs0XSksYXw9MCxhPWE8PHdbYl18YT4+PjMyLXdbYl0sYT1hK3N8MCx1PXMscz1tLG09bDw8MTB8bD4+PjIyLGw9ayxrPWE7YT1jWzFdK2grbXwwO2NbMV09Y1syXStqK3N8MDtjWzJdPWNbM10rcit1fDA7Y1szXT1jWzRdK3Qra3wwO2NbNF09Y1swXStnK2x8MDtjWzBdPWF9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGF0YSxkPWUud29yZHMsYj04KnRoaXMuX25EYXRhQnl0ZXMsYz04KmUuc2lnQnl0ZXM7CmRbYz4+PjVdfD0xMjg8PDI0LWMlMzI7ZFsoYys2ND4+Pjk8PDQpKzE0XT0oYjw8OHxiPj4+MjQpJjE2NzExOTM1fChiPDwyNHxiPj4+OCkmNDI3ODI1NTM2MDtlLnNpZ0J5dGVzPTQqKGQubGVuZ3RoKzEpO3RoaXMuX3Byb2Nlc3MoKTtlPXRoaXMuX2hhc2g7ZD1lLndvcmRzO2ZvcihiPTA7NT5iO2IrKyljPWRbYl0sZFtiXT0oYzw8OHxjPj4+MjQpJjE2NzExOTM1fChjPDwyNHxjPj4+OCkmNDI3ODI1NTM2MDtyZXR1cm4gZX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZD1wLmNsb25lLmNhbGwodGhpcyk7ZC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGR9fSk7cS5SSVBFTUQxNjA9cC5fY3JlYXRlSGVscGVyKGQpO3EuSG1hY1JJUEVNRDE2MD1wLl9jcmVhdGVIbWFjSGVscGVyKGQpfSkoTWF0aCk7CgovKgpDcnlwdG9KUyB2My4xLjIgaG1hYy1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbigpe3ZhciBjPUNyeXB0b0pTLGs9Yy5lbmMuVXRmODtjLmFsZ28uSE1BQz1jLmxpYi5CYXNlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy5faGFzaGVyPW5ldyBhLmluaXQ7InN0cmluZyI9PXR5cGVvZiBiJiYoYj1rLnBhcnNlKGIpKTt2YXIgYz1hLmJsb2NrU2l6ZSxlPTQqYztiLnNpZ0J5dGVzPmUmJihiPWEuZmluYWxpemUoYikpO2IuY2xhbXAoKTtmb3IodmFyIGY9dGhpcy5fb0tleT1iLmNsb25lKCksZz10aGlzLl9pS2V5PWIuY2xvbmUoKSxoPWYud29yZHMsaj1nLndvcmRzLGQ9MDtkPGM7ZCsrKWhbZF1ePTE1NDk1NTY4MjgsaltkXV49OTA5NTIyNDg2O2Yuc2lnQnl0ZXM9Zy5zaWdCeXRlcz1lO3RoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9oYXNoZXI7YS5yZXNldCgpO2EudXBkYXRlKHRoaXMuX2lLZXkpfSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5faGFzaGVyLnVwZGF0ZShhKTtyZXR1cm4gdGhpc30sZmluYWxpemU6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuX2hhc2hlcjthPWIuZmluYWxpemUoYSk7Yi5yZXNldCgpO3JldHVybiBiLmZpbmFsaXplKHRoaXMuX29LZXkuY2xvbmUoKS5jb25jYXQoYSkpfX0pfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBwYmtkZjItbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgYj1DcnlwdG9KUyxhPWIubGliLGQ9YS5CYXNlLG09YS5Xb3JkQXJyYXksYT1iLmFsZ28scT1hLkhNQUMsbD1hLlBCS0RGMj1kLmV4dGVuZCh7Y2ZnOmQuZXh0ZW5kKHtrZXlTaXplOjQsaGFzaGVyOmEuU0hBMSxpdGVyYXRpb25zOjF9KSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKX0sY29tcHV0ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLmNmZyxmPXEuY3JlYXRlKGMuaGFzaGVyLGEpLGc9bS5jcmVhdGUoKSxkPW0uY3JlYXRlKFsxXSksbD1nLndvcmRzLHI9ZC53b3JkcyxuPWMua2V5U2l6ZSxjPWMuaXRlcmF0aW9ucztsLmxlbmd0aDxuOyl7dmFyIGg9Zi51cGRhdGUoYikuZmluYWxpemUoZCk7Zi5yZXNldCgpO2Zvcih2YXIgaj1oLndvcmRzLHM9ai5sZW5ndGgsaz1oLHA9MTtwPGM7cCsrKXtrPWYuZmluYWxpemUoayk7Zi5yZXNldCgpO2Zvcih2YXIgdD1rLndvcmRzLGU9MDtlPHM7ZSsrKWpbZV1ePXRbZV19Zy5jb25jYXQoaCk7CnJbMF0rK31nLnNpZ0J5dGVzPTQqbjtyZXR1cm4gZ319KTtiLlBCS0RGMj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGwuY3JlYXRlKGMpLmNvbXB1dGUoYSxiKX19KSgpOwoKLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vCiAqLwp2YXIgYjY0bWFwPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIjt2YXIgYjY0cGFkPSI9IjtmdW5jdGlvbiBoZXgyYjY0KGQpe3ZhciBiO3ZhciBlO3ZhciBhPSIiO2ZvcihiPTA7YiszPD1kLmxlbmd0aDtiKz0zKXtlPXBhcnNlSW50KGQuc3Vic3RyaW5nKGIsYiszKSwxNik7YSs9YjY0bWFwLmNoYXJBdChlPj42KStiNjRtYXAuY2hhckF0KGUmNjMpfWlmKGIrMT09ZC5sZW5ndGgpe2U9cGFyc2VJbnQoZC5zdWJzdHJpbmcoYixiKzEpLDE2KTthKz1iNjRtYXAuY2hhckF0KGU8PDIpfWVsc2V7aWYoYisyPT1kLmxlbmd0aCl7ZT1wYXJzZUludChkLnN1YnN0cmluZyhiLGIrMiksMTYpO2ErPWI2NG1hcC5jaGFyQXQoZT4+MikrYjY0bWFwLmNoYXJBdCgoZSYzKTw8NCl9fWlmKGI2NHBhZCl7d2hpbGUoKGEubGVuZ3RoJjMpPjApe2ErPWI2NHBhZH19cmV0dXJuIGF9ZnVuY3Rpb24gYjY0dG9oZXgoZil7dmFyIGQ9IiI7dmFyIGU7dmFyIGI9MDt2YXIgYzt2YXIgYTtmb3IoZT0wO2U8Zi5sZW5ndGg7KytlKXtpZihmLmNoYXJBdChlKT09YjY0cGFkKXticmVha31hPWI2NG1hcC5pbmRleE9mKGYuY2hhckF0KGUpKTtpZihhPDApe2NvbnRpbnVlfWlmKGI9PTApe2QrPWludDJjaGFyKGE+PjIpO2M9YSYzO2I9MX1lbHNle2lmKGI9PTEpe2QrPWludDJjaGFyKChjPDwyKXwoYT4+NCkpO2M9YSYxNTtiPTJ9ZWxzZXtpZihiPT0yKXtkKz1pbnQyY2hhcihjKTtkKz1pbnQyY2hhcihhPj4yKTtjPWEmMztiPTN9ZWxzZXtkKz1pbnQyY2hhcigoYzw8Mil8KGE+PjQpKTtkKz1pbnQyY2hhcihhJjE1KTtiPTB9fX19aWYoYj09MSl7ZCs9aW50MmNoYXIoYzw8Mil9cmV0dXJuIGR9ZnVuY3Rpb24gYjY0dG9CQShlKXt2YXIgZD1iNjR0b2hleChlKTt2YXIgYzt2YXIgYj1uZXcgQXJyYXkoKTtmb3IoYz0wOzIqYzxkLmxlbmd0aDsrK2Mpe2JbY109cGFyc2VJbnQoZC5zdWJzdHJpbmcoMipjLDIqYysyKSwxNil9cmV0dXJuIGJ9OwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCnZhciBkYml0czt2YXIgY2FuYXJ5PTI0NDgzNzgxNDA5NDU5MDt2YXIgal9sbT0oKGNhbmFyeSYxNjc3NzIxNSk9PTE1NzE1MDcwKTtmdW5jdGlvbiBCaWdJbnRlZ2VyKGUsZCxmKXtpZihlIT1udWxsKXtpZigibnVtYmVyIj09dHlwZW9mIGUpe3RoaXMuZnJvbU51bWJlcihlLGQsZil9ZWxzZXtpZihkPT1udWxsJiYic3RyaW5nIiE9dHlwZW9mIGUpe3RoaXMuZnJvbVN0cmluZyhlLDI1Nil9ZWxzZXt0aGlzLmZyb21TdHJpbmcoZSxkKX19fX1mdW5jdGlvbiBuYmkoKXtyZXR1cm4gbmV3IEJpZ0ludGVnZXIobnVsbCl9ZnVuY3Rpb24gYW0xKGYsYSxiLGUsaCxnKXt3aGlsZSgtLWc+PTApe3ZhciBkPWEqdGhpc1tmKytdK2JbZV0raDtoPU1hdGguZmxvb3IoZC82NzEwODg2NCk7YltlKytdPWQmNjcxMDg4NjN9cmV0dXJuIGh9ZnVuY3Rpb24gYW0yKGYscSxyLGUsbyxhKXt2YXIgaz1xJjMyNzY3LHA9cT4+MTU7d2hpbGUoLS1hPj0wKXt2YXIgZD10aGlzW2ZdJjMyNzY3O3ZhciBnPXRoaXNbZisrXT4+MTU7dmFyIGI9cCpkK2cqaztkPWsqZCsoKGImMzI3NjcpPDwxNSkrcltlXSsobyYxMDczNzQxODIzKTtvPShkPj4+MzApKyhiPj4+MTUpK3AqZysobz4+PjMwKTtyW2UrK109ZCYxMDczNzQxODIzfXJldHVybiBvfWZ1bmN0aW9uIGFtMyhmLHEscixlLG8sYSl7dmFyIGs9cSYxNjM4MyxwPXE+PjE0O3doaWxlKC0tYT49MCl7dmFyIGQ9dGhpc1tmXSYxNjM4Mzt2YXIgZz10aGlzW2YrK10+PjE0O3ZhciBiPXAqZCtnKms7ZD1rKmQrKChiJjE2MzgzKTw8MTQpK3JbZV0rbztvPShkPj4yOCkrKGI+PjE0KStwKmc7cltlKytdPWQmMjY4NDM1NDU1fXJldHVybiBvfWlmKGpfbG0mJihuYXZpZ2F0b3IuYXBwTmFtZT09Ik1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlciIpKXtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbT1hbTI7ZGJpdHM9MzB9ZWxzZXtpZihqX2xtJiYobmF2aWdhdG9yLmFwcE5hbWUhPSJOZXRzY2FwZSIpKXtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbT1hbTE7ZGJpdHM9MjZ9ZWxzZXtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbT1hbTM7ZGJpdHM9Mjh9fUJpZ0ludGVnZXIucHJvdG90eXBlLkRCPWRiaXRzO0JpZ0ludGVnZXIucHJvdG90eXBlLkRNPSgoMTw8ZGJpdHMpLTEpO0JpZ0ludGVnZXIucHJvdG90eXBlLkRWPSgxPDxkYml0cyk7dmFyIEJJX0ZQPTUyO0JpZ0ludGVnZXIucHJvdG90eXBlLkZWPU1hdGgucG93KDIsQklfRlApO0JpZ0ludGVnZXIucHJvdG90eXBlLkYxPUJJX0ZQLWRiaXRzO0JpZ0ludGVnZXIucHJvdG90eXBlLkYyPTIqZGJpdHMtQklfRlA7dmFyIEJJX1JNPSIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiO3ZhciBCSV9SQz1uZXcgQXJyYXkoKTt2YXIgcnIsdnY7cnI9IjAiLmNoYXJDb2RlQXQoMCk7Zm9yKHZ2PTA7dnY8PTk7Kyt2dil7QklfUkNbcnIrK109dnZ9cnI9ImEiLmNoYXJDb2RlQXQoMCk7Zm9yKHZ2PTEwO3Z2PDM2OysrdnYpe0JJX1JDW3JyKytdPXZ2fXJyPSJBIi5jaGFyQ29kZUF0KDApO2Zvcih2dj0xMDt2djwzNjsrK3Z2KXtCSV9SQ1tycisrXT12dn1mdW5jdGlvbiBpbnQyY2hhcihhKXtyZXR1cm4gQklfUk0uY2hhckF0KGEpfWZ1bmN0aW9uIGludEF0KGIsYSl7dmFyIGQ9QklfUkNbYi5jaGFyQ29kZUF0KGEpXTtyZXR1cm4oZD09bnVsbCk/LTE6ZH1mdW5jdGlvbiBibnBDb3B5VG8oYil7Zm9yKHZhciBhPXRoaXMudC0xO2E+PTA7LS1hKXtiW2FdPXRoaXNbYV19Yi50PXRoaXMudDtiLnM9dGhpcy5zfWZ1bmN0aW9uIGJucEZyb21JbnQoYSl7dGhpcy50PTE7dGhpcy5zPShhPDApPy0xOjA7aWYoYT4wKXt0aGlzWzBdPWF9ZWxzZXtpZihhPC0xKXt0aGlzWzBdPWErdGhpcy5EVn1lbHNle3RoaXMudD0wfX19ZnVuY3Rpb24gbmJ2KGEpe3ZhciBiPW5iaSgpO2IuZnJvbUludChhKTtyZXR1cm4gYn1mdW5jdGlvbiBibnBGcm9tU3RyaW5nKGgsYyl7dmFyIGU7aWYoYz09MTYpe2U9NH1lbHNle2lmKGM9PTgpe2U9M31lbHNle2lmKGM9PTI1Nil7ZT04fWVsc2V7aWYoYz09Mil7ZT0xfWVsc2V7aWYoYz09MzIpe2U9NX1lbHNle2lmKGM9PTQpe2U9Mn1lbHNle3RoaXMuZnJvbVJhZGl4KGgsYyk7cmV0dXJufX19fX19dGhpcy50PTA7dGhpcy5zPTA7dmFyIGc9aC5sZW5ndGgsZD1mYWxzZSxmPTA7d2hpbGUoLS1nPj0wKXt2YXIgYT0oZT09OCk/aFtnXSYyNTU6aW50QXQoaCxnKTtpZihhPDApe2lmKGguY2hhckF0KGcpPT0iLSIpe2Q9dHJ1ZX1jb250aW51ZX1kPWZhbHNlO2lmKGY9PTApe3RoaXNbdGhpcy50KytdPWF9ZWxzZXtpZihmK2U+dGhpcy5EQil7dGhpc1t0aGlzLnQtMV18PShhJigoMTw8KHRoaXMuREItZikpLTEpKTw8Zjt0aGlzW3RoaXMudCsrXT0oYT4+KHRoaXMuREItZikpfWVsc2V7dGhpc1t0aGlzLnQtMV18PWE8PGZ9fWYrPWU7aWYoZj49dGhpcy5EQil7Zi09dGhpcy5EQn19aWYoZT09OCYmKGhbMF0mMTI4KSE9MCl7dGhpcy5zPS0xO2lmKGY+MCl7dGhpc1t0aGlzLnQtMV18PSgoMTw8KHRoaXMuREItZikpLTEpPDxmfX10aGlzLmNsYW1wKCk7aWYoZCl7QmlnSW50ZWdlci5aRVJPLnN1YlRvKHRoaXMsdGhpcyl9fWZ1bmN0aW9uIGJucENsYW1wKCl7dmFyIGE9dGhpcy5zJnRoaXMuRE07d2hpbGUodGhpcy50PjAmJnRoaXNbdGhpcy50LTFdPT1hKXstLXRoaXMudH19ZnVuY3Rpb24gYm5Ub1N0cmluZyhjKXtpZih0aGlzLnM8MCl7cmV0dXJuIi0iK3RoaXMubmVnYXRlKCkudG9TdHJpbmcoYyl9dmFyIGU7aWYoYz09MTYpe2U9NH1lbHNle2lmKGM9PTgpe2U9M31lbHNle2lmKGM9PTIpe2U9MX1lbHNle2lmKGM9PTMyKXtlPTV9ZWxzZXtpZihjPT00KXtlPTJ9ZWxzZXtyZXR1cm4gdGhpcy50b1JhZGl4KGMpfX19fX12YXIgZz0oMTw8ZSktMSxsLGE9ZmFsc2UsaD0iIixmPXRoaXMudDt2YXIgaj10aGlzLkRCLShmKnRoaXMuREIpJWU7aWYoZi0tPjApe2lmKGo8dGhpcy5EQiYmKGw9dGhpc1tmXT4+aik+MCl7YT10cnVlO2g9aW50MmNoYXIobCl9d2hpbGUoZj49MCl7aWYoajxlKXtsPSh0aGlzW2ZdJigoMTw8aiktMSkpPDwoZS1qKTtsfD10aGlzWy0tZl0+PihqKz10aGlzLkRCLWUpfWVsc2V7bD0odGhpc1tmXT4+KGotPWUpKSZnO2lmKGo8PTApe2orPXRoaXMuREI7LS1mfX1pZihsPjApe2E9dHJ1ZX1pZihhKXtoKz1pbnQyY2hhcihsKX19fXJldHVybiBhP2g6IjAifWZ1bmN0aW9uIGJuTmVnYXRlKCl7dmFyIGE9bmJpKCk7QmlnSW50ZWdlci5aRVJPLnN1YlRvKHRoaXMsYSk7cmV0dXJuIGF9ZnVuY3Rpb24gYm5BYnMoKXtyZXR1cm4odGhpcy5zPDApP3RoaXMubmVnYXRlKCk6dGhpc31mdW5jdGlvbiBibkNvbXBhcmVUbyhiKXt2YXIgZD10aGlzLnMtYi5zO2lmKGQhPTApe3JldHVybiBkfXZhciBjPXRoaXMudDtkPWMtYi50O2lmKGQhPTApe3JldHVybih0aGlzLnM8MCk/LWQ6ZH13aGlsZSgtLWM+PTApe2lmKChkPXRoaXNbY10tYltjXSkhPTApe3JldHVybiBkfX1yZXR1cm4gMH1mdW5jdGlvbiBuYml0cyhhKXt2YXIgYz0xLGI7aWYoKGI9YT4+PjE2KSE9MCl7YT1iO2MrPTE2fWlmKChiPWE+PjgpIT0wKXthPWI7Yys9OH1pZigoYj1hPj40KSE9MCl7YT1iO2MrPTR9aWYoKGI9YT4+MikhPTApe2E9YjtjKz0yfWlmKChiPWE+PjEpIT0wKXthPWI7Yys9MX1yZXR1cm4gY31mdW5jdGlvbiBibkJpdExlbmd0aCgpe2lmKHRoaXMudDw9MCl7cmV0dXJuIDB9cmV0dXJuIHRoaXMuREIqKHRoaXMudC0xKStuYml0cyh0aGlzW3RoaXMudC0xXV4odGhpcy5zJnRoaXMuRE0pKX1mdW5jdGlvbiBibnBETFNoaWZ0VG8oYyxiKXt2YXIgYTtmb3IoYT10aGlzLnQtMTthPj0wOy0tYSl7YlthK2NdPXRoaXNbYV19Zm9yKGE9Yy0xO2E+PTA7LS1hKXtiW2FdPTB9Yi50PXRoaXMudCtjO2Iucz10aGlzLnN9ZnVuY3Rpb24gYm5wRFJTaGlmdFRvKGMsYil7Zm9yKHZhciBhPWM7YTx0aGlzLnQ7KythKXtiW2EtY109dGhpc1thXX1iLnQ9TWF0aC5tYXgodGhpcy50LWMsMCk7Yi5zPXRoaXMuc31mdW5jdGlvbiBibnBMU2hpZnRUbyhqLGUpe3ZhciBiPWoldGhpcy5EQjt2YXIgYT10aGlzLkRCLWI7dmFyIGc9KDE8PGEpLTE7dmFyIGY9TWF0aC5mbG9vcihqL3RoaXMuREIpLGg9KHRoaXMuczw8YikmdGhpcy5ETSxkO2ZvcihkPXRoaXMudC0xO2Q+PTA7LS1kKXtlW2QrZisxXT0odGhpc1tkXT4+YSl8aDtoPSh0aGlzW2RdJmcpPDxifWZvcihkPWYtMTtkPj0wOy0tZCl7ZVtkXT0wfWVbZl09aDtlLnQ9dGhpcy50K2YrMTtlLnM9dGhpcy5zO2UuY2xhbXAoKX1mdW5jdGlvbiBibnBSU2hpZnRUbyhnLGQpe2Qucz10aGlzLnM7dmFyIGU9TWF0aC5mbG9vcihnL3RoaXMuREIpO2lmKGU+PXRoaXMudCl7ZC50PTA7cmV0dXJufXZhciBiPWcldGhpcy5EQjt2YXIgYT10aGlzLkRCLWI7dmFyIGY9KDE8PGIpLTE7ZFswXT10aGlzW2VdPj5iO2Zvcih2YXIgYz1lKzE7Yzx0aGlzLnQ7KytjKXtkW2MtZS0xXXw9KHRoaXNbY10mZik8PGE7ZFtjLWVdPXRoaXNbY10+PmJ9aWYoYj4wKXtkW3RoaXMudC1lLTFdfD0odGhpcy5zJmYpPDxhfWQudD10aGlzLnQtZTtkLmNsYW1wKCl9ZnVuY3Rpb24gYm5wU3ViVG8oZCxmKXt2YXIgZT0wLGc9MCxiPU1hdGgubWluKGQudCx0aGlzLnQpO3doaWxlKGU8Yil7Zys9dGhpc1tlXS1kW2VdO2ZbZSsrXT1nJnRoaXMuRE07Zz4+PXRoaXMuREJ9aWYoZC50PHRoaXMudCl7Zy09ZC5zO3doaWxlKGU8dGhpcy50KXtnKz10aGlzW2VdO2ZbZSsrXT1nJnRoaXMuRE07Zz4+PXRoaXMuREJ9Zys9dGhpcy5zfWVsc2V7Zys9dGhpcy5zO3doaWxlKGU8ZC50KXtnLT1kW2VdO2ZbZSsrXT1nJnRoaXMuRE07Zz4+PXRoaXMuREJ9Zy09ZC5zfWYucz0oZzwwKT8tMTowO2lmKGc8LTEpe2ZbZSsrXT10aGlzLkRWK2d9ZWxzZXtpZihnPjApe2ZbZSsrXT1nfX1mLnQ9ZTtmLmNsYW1wKCl9ZnVuY3Rpb24gYm5wTXVsdGlwbHlUbyhjLGUpe3ZhciBiPXRoaXMuYWJzKCksZj1jLmFicygpO3ZhciBkPWIudDtlLnQ9ZCtmLnQ7d2hpbGUoLS1kPj0wKXtlW2RdPTB9Zm9yKGQ9MDtkPGYudDsrK2Qpe2VbZCtiLnRdPWIuYW0oMCxmW2RdLGUsZCwwLGIudCl9ZS5zPTA7ZS5jbGFtcCgpO2lmKHRoaXMucyE9Yy5zKXtCaWdJbnRlZ2VyLlpFUk8uc3ViVG8oZSxlKX19ZnVuY3Rpb24gYm5wU3F1YXJlVG8oZCl7dmFyIGE9dGhpcy5hYnMoKTt2YXIgYj1kLnQ9MiphLnQ7d2hpbGUoLS1iPj0wKXtkW2JdPTB9Zm9yKGI9MDtiPGEudC0xOysrYil7dmFyIGU9YS5hbShiLGFbYl0sZCwyKmIsMCwxKTtpZigoZFtiK2EudF0rPWEuYW0oYisxLDIqYVtiXSxkLDIqYisxLGUsYS50LWItMSkpPj1hLkRWKXtkW2IrYS50XS09YS5EVjtkW2IrYS50KzFdPTF9fWlmKGQudD4wKXtkW2QudC0xXSs9YS5hbShiLGFbYl0sZCwyKmIsMCwxKX1kLnM9MDtkLmNsYW1wKCl9ZnVuY3Rpb24gYm5wRGl2UmVtVG8obixoLGcpe3ZhciB3PW4uYWJzKCk7aWYody50PD0wKXtyZXR1cm59dmFyIGs9dGhpcy5hYnMoKTtpZihrLnQ8dy50KXtpZihoIT1udWxsKXtoLmZyb21JbnQoMCl9aWYoZyE9bnVsbCl7dGhpcy5jb3B5VG8oZyl9cmV0dXJufWlmKGc9PW51bGwpe2c9bmJpKCl9dmFyIGQ9bmJpKCksYT10aGlzLnMsbD1uLnM7dmFyIHY9dGhpcy5EQi1uYml0cyh3W3cudC0xXSk7aWYodj4wKXt3LmxTaGlmdFRvKHYsZCk7ay5sU2hpZnRUbyh2LGcpfWVsc2V7dy5jb3B5VG8oZCk7ay5jb3B5VG8oZyl9dmFyIHA9ZC50O3ZhciBiPWRbcC0xXTtpZihiPT0wKXtyZXR1cm59dmFyIG89YiooMTw8dGhpcy5GMSkrKChwPjEpP2RbcC0yXT4+dGhpcy5GMjowKTt2YXIgQT10aGlzLkZWL28sej0oMTw8dGhpcy5GMSkvbyx4PTE8PHRoaXMuRjI7dmFyIHU9Zy50LHM9dS1wLGY9KGg9PW51bGwpP25iaSgpOmg7ZC5kbFNoaWZ0VG8ocyxmKTtpZihnLmNvbXBhcmVUbyhmKT49MCl7Z1tnLnQrK109MTtnLnN1YlRvKGYsZyl9QmlnSW50ZWdlci5PTkUuZGxTaGlmdFRvKHAsZik7Zi5zdWJUbyhkLGQpO3doaWxlKGQudDxwKXtkW2QudCsrXT0wfXdoaWxlKC0tcz49MCl7dmFyIGM9KGdbLS11XT09Yik/dGhpcy5ETTpNYXRoLmZsb29yKGdbdV0qQSsoZ1t1LTFdK3gpKnopO2lmKChnW3VdKz1kLmFtKDAsYyxnLHMsMCxwKSk8Yyl7ZC5kbFNoaWZ0VG8ocyxmKTtnLnN1YlRvKGYsZyk7d2hpbGUoZ1t1XTwtLWMpe2cuc3ViVG8oZixnKX19fWlmKGghPW51bGwpe2cuZHJTaGlmdFRvKHAsaCk7aWYoYSE9bCl7QmlnSW50ZWdlci5aRVJPLnN1YlRvKGgsaCl9fWcudD1wO2cuY2xhbXAoKTtpZih2PjApe2cuclNoaWZ0VG8odixnKX1pZihhPDApe0JpZ0ludGVnZXIuWkVSTy5zdWJUbyhnLGcpfX1mdW5jdGlvbiBibk1vZChiKXt2YXIgYz1uYmkoKTt0aGlzLmFicygpLmRpdlJlbVRvKGIsbnVsbCxjKTtpZih0aGlzLnM8MCYmYy5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKT4wKXtiLnN1YlRvKGMsYyl9cmV0dXJuIGN9ZnVuY3Rpb24gQ2xhc3NpYyhhKXt0aGlzLm09YX1mdW5jdGlvbiBjQ29udmVydChhKXtpZihhLnM8MHx8YS5jb21wYXJlVG8odGhpcy5tKT49MCl7cmV0dXJuIGEubW9kKHRoaXMubSl9ZWxzZXtyZXR1cm4gYX19ZnVuY3Rpb24gY1JldmVydChhKXtyZXR1cm4gYX1mdW5jdGlvbiBjUmVkdWNlKGEpe2EuZGl2UmVtVG8odGhpcy5tLG51bGwsYSl9ZnVuY3Rpb24gY011bFRvKGEsYyxiKXthLm11bHRpcGx5VG8oYyxiKTt0aGlzLnJlZHVjZShiKX1mdW5jdGlvbiBjU3FyVG8oYSxiKXthLnNxdWFyZVRvKGIpO3RoaXMucmVkdWNlKGIpfUNsYXNzaWMucHJvdG90eXBlLmNvbnZlcnQ9Y0NvbnZlcnQ7Q2xhc3NpYy5wcm90b3R5cGUucmV2ZXJ0PWNSZXZlcnQ7Q2xhc3NpYy5wcm90b3R5cGUucmVkdWNlPWNSZWR1Y2U7Q2xhc3NpYy5wcm90b3R5cGUubXVsVG89Y011bFRvO0NsYXNzaWMucHJvdG90eXBlLnNxclRvPWNTcXJUbztmdW5jdGlvbiBibnBJbnZEaWdpdCgpe2lmKHRoaXMudDwxKXtyZXR1cm4gMH12YXIgYT10aGlzWzBdO2lmKChhJjEpPT0wKXtyZXR1cm4gMH12YXIgYj1hJjM7Yj0oYiooMi0oYSYxNSkqYikpJjE1O2I9KGIqKDItKGEmMjU1KSpiKSkmMjU1O2I9KGIqKDItKCgoYSY2NTUzNSkqYikmNjU1MzUpKSkmNjU1MzU7Yj0oYiooMi1hKmIldGhpcy5EVikpJXRoaXMuRFY7cmV0dXJuKGI+MCk/dGhpcy5EVi1iOi1ifWZ1bmN0aW9uIE1vbnRnb21lcnkoYSl7dGhpcy5tPWE7dGhpcy5tcD1hLmludkRpZ2l0KCk7dGhpcy5tcGw9dGhpcy5tcCYzMjc2Nzt0aGlzLm1waD10aGlzLm1wPj4xNTt0aGlzLnVtPSgxPDwoYS5EQi0xNSkpLTE7dGhpcy5tdDI9MiphLnR9ZnVuY3Rpb24gbW9udENvbnZlcnQoYSl7dmFyIGI9bmJpKCk7YS5hYnMoKS5kbFNoaWZ0VG8odGhpcy5tLnQsYik7Yi5kaXZSZW1Ubyh0aGlzLm0sbnVsbCxiKTtpZihhLnM8MCYmYi5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKT4wKXt0aGlzLm0uc3ViVG8oYixiKX1yZXR1cm4gYn1mdW5jdGlvbiBtb250UmV2ZXJ0KGEpe3ZhciBiPW5iaSgpO2EuY29weVRvKGIpO3RoaXMucmVkdWNlKGIpO3JldHVybiBifWZ1bmN0aW9uIG1vbnRSZWR1Y2UoYSl7d2hpbGUoYS50PD10aGlzLm10Mil7YVthLnQrK109MH1mb3IodmFyIGM9MDtjPHRoaXMubS50OysrYyl7dmFyIGI9YVtjXSYzMjc2Nzt2YXIgZD0oYip0aGlzLm1wbCsoKChiKnRoaXMubXBoKyhhW2NdPj4xNSkqdGhpcy5tcGwpJnRoaXMudW0pPDwxNSkpJmEuRE07Yj1jK3RoaXMubS50O2FbYl0rPXRoaXMubS5hbSgwLGQsYSxjLDAsdGhpcy5tLnQpO3doaWxlKGFbYl0+PWEuRFYpe2FbYl0tPWEuRFY7YVsrK2JdKyt9fWEuY2xhbXAoKTthLmRyU2hpZnRUbyh0aGlzLm0udCxhKTtpZihhLmNvbXBhcmVUbyh0aGlzLm0pPj0wKXthLnN1YlRvKHRoaXMubSxhKX19ZnVuY3Rpb24gbW9udFNxclRvKGEsYil7YS5zcXVhcmVUbyhiKTt0aGlzLnJlZHVjZShiKX1mdW5jdGlvbiBtb250TXVsVG8oYSxjLGIpe2EubXVsdGlwbHlUbyhjLGIpO3RoaXMucmVkdWNlKGIpfU1vbnRnb21lcnkucHJvdG90eXBlLmNvbnZlcnQ9bW9udENvbnZlcnQ7TW9udGdvbWVyeS5wcm90b3R5cGUucmV2ZXJ0PW1vbnRSZXZlcnQ7TW9udGdvbWVyeS5wcm90b3R5cGUucmVkdWNlPW1vbnRSZWR1Y2U7TW9udGdvbWVyeS5wcm90b3R5cGUubXVsVG89bW9udE11bFRvO01vbnRnb21lcnkucHJvdG90eXBlLnNxclRvPW1vbnRTcXJUbztmdW5jdGlvbiBibnBJc0V2ZW4oKXtyZXR1cm4oKHRoaXMudD4wKT8odGhpc1swXSYxKTp0aGlzLnMpPT0wfWZ1bmN0aW9uIGJucEV4cChoLGope2lmKGg+NDI5NDk2NzI5NXx8aDwxKXtyZXR1cm4gQmlnSW50ZWdlci5PTkV9dmFyIGY9bmJpKCksYT1uYmkoKSxkPWouY29udmVydCh0aGlzKSxjPW5iaXRzKGgpLTE7ZC5jb3B5VG8oZik7d2hpbGUoLS1jPj0wKXtqLnNxclRvKGYsYSk7aWYoKGgmKDE8PGMpKT4wKXtqLm11bFRvKGEsZCxmKX1lbHNle3ZhciBiPWY7Zj1hO2E9Yn19cmV0dXJuIGoucmV2ZXJ0KGYpfWZ1bmN0aW9uIGJuTW9kUG93SW50KGIsYSl7dmFyIGM7aWYoYjwyNTZ8fGEuaXNFdmVuKCkpe2M9bmV3IENsYXNzaWMoYSl9ZWxzZXtjPW5ldyBNb250Z29tZXJ5KGEpfXJldHVybiB0aGlzLmV4cChiLGMpfUJpZ0ludGVnZXIucHJvdG90eXBlLmNvcHlUbz1ibnBDb3B5VG87QmlnSW50ZWdlci5wcm90b3R5cGUuZnJvbUludD1ibnBGcm9tSW50O0JpZ0ludGVnZXIucHJvdG90eXBlLmZyb21TdHJpbmc9Ym5wRnJvbVN0cmluZztCaWdJbnRlZ2VyLnByb3RvdHlwZS5jbGFtcD1ibnBDbGFtcDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5kbFNoaWZ0VG89Ym5wRExTaGlmdFRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmRyU2hpZnRUbz1ibnBEUlNoaWZ0VG87QmlnSW50ZWdlci5wcm90b3R5cGUubFNoaWZ0VG89Ym5wTFNoaWZ0VG87QmlnSW50ZWdlci5wcm90b3R5cGUuclNoaWZ0VG89Ym5wUlNoaWZ0VG87QmlnSW50ZWdlci5wcm90b3R5cGUuc3ViVG89Ym5wU3ViVG87QmlnSW50ZWdlci5wcm90b3R5cGUubXVsdGlwbHlUbz1ibnBNdWx0aXBseVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLnNxdWFyZVRvPWJucFNxdWFyZVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmRpdlJlbVRvPWJucERpdlJlbVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmludkRpZ2l0PWJucEludkRpZ2l0O0JpZ0ludGVnZXIucHJvdG90eXBlLmlzRXZlbj1ibnBJc0V2ZW47QmlnSW50ZWdlci5wcm90b3R5cGUuZXhwPWJucEV4cDtCaWdJbnRlZ2VyLnByb3RvdHlwZS50b1N0cmluZz1iblRvU3RyaW5nO0JpZ0ludGVnZXIucHJvdG90eXBlLm5lZ2F0ZT1ibk5lZ2F0ZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hYnM9Ym5BYnM7QmlnSW50ZWdlci5wcm90b3R5cGUuY29tcGFyZVRvPWJuQ29tcGFyZVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmJpdExlbmd0aD1ibkJpdExlbmd0aDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5tb2Q9Ym5Nb2Q7QmlnSW50ZWdlci5wcm90b3R5cGUubW9kUG93SW50PWJuTW9kUG93SW50O0JpZ0ludGVnZXIuWkVSTz1uYnYoMCk7QmlnSW50ZWdlci5PTkU9bmJ2KDEpOwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCmZ1bmN0aW9uIGJuQ2xvbmUoKXt2YXIgYT1uYmkoKTt0aGlzLmNvcHlUbyhhKTtyZXR1cm4gYX1mdW5jdGlvbiBibkludFZhbHVlKCl7aWYodGhpcy5zPDApe2lmKHRoaXMudD09MSl7cmV0dXJuIHRoaXNbMF0tdGhpcy5EVn1lbHNle2lmKHRoaXMudD09MCl7cmV0dXJuIC0xfX19ZWxzZXtpZih0aGlzLnQ9PTEpe3JldHVybiB0aGlzWzBdfWVsc2V7aWYodGhpcy50PT0wKXtyZXR1cm4gMH19fXJldHVybigodGhpc1sxXSYoKDE8PCgzMi10aGlzLkRCKSktMSkpPDx0aGlzLkRCKXx0aGlzWzBdfWZ1bmN0aW9uIGJuQnl0ZVZhbHVlKCl7cmV0dXJuKHRoaXMudD09MCk/dGhpcy5zOih0aGlzWzBdPDwyNCk+PjI0fWZ1bmN0aW9uIGJuU2hvcnRWYWx1ZSgpe3JldHVybih0aGlzLnQ9PTApP3RoaXMuczoodGhpc1swXTw8MTYpPj4xNn1mdW5jdGlvbiBibnBDaHVua1NpemUoYSl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5MTjIqdGhpcy5EQi9NYXRoLmxvZyhhKSl9ZnVuY3Rpb24gYm5TaWdOdW0oKXtpZih0aGlzLnM8MCl7cmV0dXJuIC0xfWVsc2V7aWYodGhpcy50PD0wfHwodGhpcy50PT0xJiZ0aGlzWzBdPD0wKSl7cmV0dXJuIDB9ZWxzZXtyZXR1cm4gMX19fWZ1bmN0aW9uIGJucFRvUmFkaXgoYyl7aWYoYz09bnVsbCl7Yz0xMH1pZih0aGlzLnNpZ251bSgpPT0wfHxjPDJ8fGM+MzYpe3JldHVybiIwIn12YXIgZj10aGlzLmNodW5rU2l6ZShjKTt2YXIgZT1NYXRoLnBvdyhjLGYpO3ZhciBpPW5idihlKSxqPW5iaSgpLGg9bmJpKCksZz0iIjt0aGlzLmRpdlJlbVRvKGksaixoKTt3aGlsZShqLnNpZ251bSgpPjApe2c9KGUraC5pbnRWYWx1ZSgpKS50b1N0cmluZyhjKS5zdWJzdHIoMSkrZztqLmRpdlJlbVRvKGksaixoKX1yZXR1cm4gaC5pbnRWYWx1ZSgpLnRvU3RyaW5nKGMpK2d9ZnVuY3Rpb24gYm5wRnJvbVJhZGl4KG0saCl7dGhpcy5mcm9tSW50KDApO2lmKGg9PW51bGwpe2g9MTB9dmFyIGY9dGhpcy5jaHVua1NpemUoaCk7dmFyIGc9TWF0aC5wb3coaCxmKSxlPWZhbHNlLGE9MCxsPTA7Zm9yKHZhciBjPTA7YzxtLmxlbmd0aDsrK2Mpe3ZhciBrPWludEF0KG0sYyk7aWYoazwwKXtpZihtLmNoYXJBdChjKT09Ii0iJiZ0aGlzLnNpZ251bSgpPT0wKXtlPXRydWV9Y29udGludWV9bD1oKmwraztpZigrK2E+PWYpe3RoaXMuZE11bHRpcGx5KGcpO3RoaXMuZEFkZE9mZnNldChsLDApO2E9MDtsPTB9fWlmKGE+MCl7dGhpcy5kTXVsdGlwbHkoTWF0aC5wb3coaCxhKSk7dGhpcy5kQWRkT2Zmc2V0KGwsMCl9aWYoZSl7QmlnSW50ZWdlci5aRVJPLnN1YlRvKHRoaXMsdGhpcyl9fWZ1bmN0aW9uIGJucEZyb21OdW1iZXIoZixlLGgpe2lmKCJudW1iZXIiPT10eXBlb2YgZSl7aWYoZjwyKXt0aGlzLmZyb21JbnQoMSl9ZWxzZXt0aGlzLmZyb21OdW1iZXIoZixoKTtpZighdGhpcy50ZXN0Qml0KGYtMSkpe3RoaXMuYml0d2lzZVRvKEJpZ0ludGVnZXIuT05FLnNoaWZ0TGVmdChmLTEpLG9wX29yLHRoaXMpfWlmKHRoaXMuaXNFdmVuKCkpe3RoaXMuZEFkZE9mZnNldCgxLDApfXdoaWxlKCF0aGlzLmlzUHJvYmFibGVQcmltZShlKSl7dGhpcy5kQWRkT2Zmc2V0KDIsMCk7aWYodGhpcy5iaXRMZW5ndGgoKT5mKXt0aGlzLnN1YlRvKEJpZ0ludGVnZXIuT05FLnNoaWZ0TGVmdChmLTEpLHRoaXMpfX19fWVsc2V7dmFyIGQ9bmV3IEFycmF5KCksZz1mJjc7ZC5sZW5ndGg9KGY+PjMpKzE7ZS5uZXh0Qnl0ZXMoZCk7aWYoZz4wKXtkWzBdJj0oKDE8PGcpLTEpfWVsc2V7ZFswXT0wfXRoaXMuZnJvbVN0cmluZyhkLDI1Nil9fWZ1bmN0aW9uIGJuVG9CeXRlQXJyYXkoKXt2YXIgYj10aGlzLnQsYz1uZXcgQXJyYXkoKTtjWzBdPXRoaXMuczt2YXIgZT10aGlzLkRCLShiKnRoaXMuREIpJTgsZixhPTA7aWYoYi0tPjApe2lmKGU8dGhpcy5EQiYmKGY9dGhpc1tiXT4+ZSkhPSh0aGlzLnMmdGhpcy5ETSk+PmUpe2NbYSsrXT1mfCh0aGlzLnM8PCh0aGlzLkRCLWUpKX13aGlsZShiPj0wKXtpZihlPDgpe2Y9KHRoaXNbYl0mKCgxPDxlKS0xKSk8PCg4LWUpO2Z8PXRoaXNbLS1iXT4+KGUrPXRoaXMuREItOCl9ZWxzZXtmPSh0aGlzW2JdPj4oZS09OCkpJjI1NTtpZihlPD0wKXtlKz10aGlzLkRCOy0tYn19aWYoKGYmMTI4KSE9MCl7Znw9LTI1Nn1pZihhPT0wJiYodGhpcy5zJjEyOCkhPShmJjEyOCkpeysrYX1pZihhPjB8fGYhPXRoaXMucyl7Y1thKytdPWZ9fX1yZXR1cm4gY31mdW5jdGlvbiBibkVxdWFscyhiKXtyZXR1cm4odGhpcy5jb21wYXJlVG8oYik9PTApfWZ1bmN0aW9uIGJuTWluKGIpe3JldHVybih0aGlzLmNvbXBhcmVUbyhiKTwwKT90aGlzOmJ9ZnVuY3Rpb24gYm5NYXgoYil7cmV0dXJuKHRoaXMuY29tcGFyZVRvKGIpPjApP3RoaXM6Yn1mdW5jdGlvbiBibnBCaXR3aXNlVG8oYyxoLGUpe3ZhciBkLGcsYj1NYXRoLm1pbihjLnQsdGhpcy50KTtmb3IoZD0wO2Q8YjsrK2Qpe2VbZF09aCh0aGlzW2RdLGNbZF0pfWlmKGMudDx0aGlzLnQpe2c9Yy5zJnRoaXMuRE07Zm9yKGQ9YjtkPHRoaXMudDsrK2Qpe2VbZF09aCh0aGlzW2RdLGcpfWUudD10aGlzLnR9ZWxzZXtnPXRoaXMucyZ0aGlzLkRNO2ZvcihkPWI7ZDxjLnQ7KytkKXtlW2RdPWgoZyxjW2RdKX1lLnQ9Yy50fWUucz1oKHRoaXMucyxjLnMpO2UuY2xhbXAoKX1mdW5jdGlvbiBvcF9hbmQoYSxiKXtyZXR1cm4gYSZifWZ1bmN0aW9uIGJuQW5kKGIpe3ZhciBjPW5iaSgpO3RoaXMuYml0d2lzZVRvKGIsb3BfYW5kLGMpO3JldHVybiBjfWZ1bmN0aW9uIG9wX29yKGEsYil7cmV0dXJuIGF8Yn1mdW5jdGlvbiBibk9yKGIpe3ZhciBjPW5iaSgpO3RoaXMuYml0d2lzZVRvKGIsb3Bfb3IsYyk7cmV0dXJuIGN9ZnVuY3Rpb24gb3BfeG9yKGEsYil7cmV0dXJuIGFeYn1mdW5jdGlvbiBiblhvcihiKXt2YXIgYz1uYmkoKTt0aGlzLmJpdHdpc2VUbyhiLG9wX3hvcixjKTtyZXR1cm4gY31mdW5jdGlvbiBvcF9hbmRub3QoYSxiKXtyZXR1cm4gYSZ+Yn1mdW5jdGlvbiBibkFuZE5vdChiKXt2YXIgYz1uYmkoKTt0aGlzLmJpdHdpc2VUbyhiLG9wX2FuZG5vdCxjKTtyZXR1cm4gY31mdW5jdGlvbiBibk5vdCgpe3ZhciBiPW5iaSgpO2Zvcih2YXIgYT0wO2E8dGhpcy50OysrYSl7YlthXT10aGlzLkRNJn50aGlzW2FdfWIudD10aGlzLnQ7Yi5zPX50aGlzLnM7cmV0dXJuIGJ9ZnVuY3Rpb24gYm5TaGlmdExlZnQoYil7dmFyIGE9bmJpKCk7aWYoYjwwKXt0aGlzLnJTaGlmdFRvKC1iLGEpfWVsc2V7dGhpcy5sU2hpZnRUbyhiLGEpfXJldHVybiBhfWZ1bmN0aW9uIGJuU2hpZnRSaWdodChiKXt2YXIgYT1uYmkoKTtpZihiPDApe3RoaXMubFNoaWZ0VG8oLWIsYSl9ZWxzZXt0aGlzLnJTaGlmdFRvKGIsYSl9cmV0dXJuIGF9ZnVuY3Rpb24gbGJpdChhKXtpZihhPT0wKXtyZXR1cm4gLTF9dmFyIGI9MDtpZigoYSY2NTUzNSk9PTApe2E+Pj0xNjtiKz0xNn1pZigoYSYyNTUpPT0wKXthPj49ODtiKz04fWlmKChhJjE1KT09MCl7YT4+PTQ7Yis9NH1pZigoYSYzKT09MCl7YT4+PTI7Yis9Mn1pZigoYSYxKT09MCl7KytifXJldHVybiBifWZ1bmN0aW9uIGJuR2V0TG93ZXN0U2V0Qml0KCl7Zm9yKHZhciBhPTA7YTx0aGlzLnQ7KythKXtpZih0aGlzW2FdIT0wKXtyZXR1cm4gYSp0aGlzLkRCK2xiaXQodGhpc1thXSl9fWlmKHRoaXMuczwwKXtyZXR1cm4gdGhpcy50KnRoaXMuREJ9cmV0dXJuIC0xfWZ1bmN0aW9uIGNiaXQoYSl7dmFyIGI9MDt3aGlsZShhIT0wKXthJj1hLTE7KytifXJldHVybiBifWZ1bmN0aW9uIGJuQml0Q291bnQoKXt2YXIgYz0wLGE9dGhpcy5zJnRoaXMuRE07Zm9yKHZhciBiPTA7Yjx0aGlzLnQ7KytiKXtjKz1jYml0KHRoaXNbYl1eYSl9cmV0dXJuIGN9ZnVuY3Rpb24gYm5UZXN0Qml0KGIpe3ZhciBhPU1hdGguZmxvb3IoYi90aGlzLkRCKTtpZihhPj10aGlzLnQpe3JldHVybih0aGlzLnMhPTApfXJldHVybigodGhpc1thXSYoMTw8KGIldGhpcy5EQikpKSE9MCl9ZnVuY3Rpb24gYm5wQ2hhbmdlQml0KGMsYil7dmFyIGE9QmlnSW50ZWdlci5PTkUuc2hpZnRMZWZ0KGMpO3RoaXMuYml0d2lzZVRvKGEsYixhKTtyZXR1cm4gYX1mdW5jdGlvbiBiblNldEJpdChhKXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQoYSxvcF9vcil9ZnVuY3Rpb24gYm5DbGVhckJpdChhKXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQoYSxvcF9hbmRub3QpfWZ1bmN0aW9uIGJuRmxpcEJpdChhKXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQoYSxvcF94b3IpfWZ1bmN0aW9uIGJucEFkZFRvKGQsZil7dmFyIGU9MCxnPTAsYj1NYXRoLm1pbihkLnQsdGhpcy50KTt3aGlsZShlPGIpe2crPXRoaXNbZV0rZFtlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWlmKGQudDx0aGlzLnQpe2crPWQuczt3aGlsZShlPHRoaXMudCl7Zys9dGhpc1tlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWcrPXRoaXMuc31lbHNle2crPXRoaXMuczt3aGlsZShlPGQudCl7Zys9ZFtlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWcrPWQuc31mLnM9KGc8MCk/LTE6MDtpZihnPjApe2ZbZSsrXT1nfWVsc2V7aWYoZzwtMSl7ZltlKytdPXRoaXMuRFYrZ319Zi50PWU7Zi5jbGFtcCgpfWZ1bmN0aW9uIGJuQWRkKGIpe3ZhciBjPW5iaSgpO3RoaXMuYWRkVG8oYixjKTtyZXR1cm4gY31mdW5jdGlvbiBiblN1YnRyYWN0KGIpe3ZhciBjPW5iaSgpO3RoaXMuc3ViVG8oYixjKTtyZXR1cm4gY31mdW5jdGlvbiBibk11bHRpcGx5KGIpe3ZhciBjPW5iaSgpO3RoaXMubXVsdGlwbHlUbyhiLGMpO3JldHVybiBjfWZ1bmN0aW9uIGJuU3F1YXJlKCl7dmFyIGE9bmJpKCk7dGhpcy5zcXVhcmVUbyhhKTtyZXR1cm4gYX1mdW5jdGlvbiBibkRpdmlkZShiKXt2YXIgYz1uYmkoKTt0aGlzLmRpdlJlbVRvKGIsYyxudWxsKTtyZXR1cm4gY31mdW5jdGlvbiBiblJlbWFpbmRlcihiKXt2YXIgYz1uYmkoKTt0aGlzLmRpdlJlbVRvKGIsbnVsbCxjKTtyZXR1cm4gY31mdW5jdGlvbiBibkRpdmlkZUFuZFJlbWFpbmRlcihiKXt2YXIgZD1uYmkoKSxjPW5iaSgpO3RoaXMuZGl2UmVtVG8oYixkLGMpO3JldHVybiBuZXcgQXJyYXkoZCxjKX1mdW5jdGlvbiBibnBETXVsdGlwbHkoYSl7dGhpc1t0aGlzLnRdPXRoaXMuYW0oMCxhLTEsdGhpcywwLDAsdGhpcy50KTsrK3RoaXMudDt0aGlzLmNsYW1wKCl9ZnVuY3Rpb24gYm5wREFkZE9mZnNldChiLGEpe2lmKGI9PTApe3JldHVybn13aGlsZSh0aGlzLnQ8PWEpe3RoaXNbdGhpcy50KytdPTB9dGhpc1thXSs9Yjt3aGlsZSh0aGlzW2FdPj10aGlzLkRWKXt0aGlzW2FdLT10aGlzLkRWO2lmKCsrYT49dGhpcy50KXt0aGlzW3RoaXMudCsrXT0wfSsrdGhpc1thXX19ZnVuY3Rpb24gTnVsbEV4cCgpe31mdW5jdGlvbiBuTm9wKGEpe3JldHVybiBhfWZ1bmN0aW9uIG5NdWxUbyhhLGMsYil7YS5tdWx0aXBseVRvKGMsYil9ZnVuY3Rpb24gblNxclRvKGEsYil7YS5zcXVhcmVUbyhiKX1OdWxsRXhwLnByb3RvdHlwZS5jb252ZXJ0PW5Ob3A7TnVsbEV4cC5wcm90b3R5cGUucmV2ZXJ0PW5Ob3A7TnVsbEV4cC5wcm90b3R5cGUubXVsVG89bk11bFRvO051bGxFeHAucHJvdG90eXBlLnNxclRvPW5TcXJUbztmdW5jdGlvbiBiblBvdyhhKXtyZXR1cm4gdGhpcy5leHAoYSxuZXcgTnVsbEV4cCgpKX1mdW5jdGlvbiBibnBNdWx0aXBseUxvd2VyVG8oYixmLGUpe3ZhciBkPU1hdGgubWluKHRoaXMudCtiLnQsZik7ZS5zPTA7ZS50PWQ7d2hpbGUoZD4wKXtlWy0tZF09MH12YXIgYztmb3IoYz1lLnQtdGhpcy50O2Q8YzsrK2Qpe2VbZCt0aGlzLnRdPXRoaXMuYW0oMCxiW2RdLGUsZCwwLHRoaXMudCl9Zm9yKGM9TWF0aC5taW4oYi50LGYpO2Q8YzsrK2Qpe3RoaXMuYW0oMCxiW2RdLGUsZCwwLGYtZCl9ZS5jbGFtcCgpfWZ1bmN0aW9uIGJucE11bHRpcGx5VXBwZXJUbyhiLGUsZCl7LS1lO3ZhciBjPWQudD10aGlzLnQrYi50LWU7ZC5zPTA7d2hpbGUoLS1jPj0wKXtkW2NdPTB9Zm9yKGM9TWF0aC5tYXgoZS10aGlzLnQsMCk7YzxiLnQ7KytjKXtkW3RoaXMudCtjLWVdPXRoaXMuYW0oZS1jLGJbY10sZCwwLDAsdGhpcy50K2MtZSl9ZC5jbGFtcCgpO2QuZHJTaGlmdFRvKDEsZCl9ZnVuY3Rpb24gQmFycmV0dChhKXt0aGlzLnIyPW5iaSgpO3RoaXMucTM9bmJpKCk7QmlnSW50ZWdlci5PTkUuZGxTaGlmdFRvKDIqYS50LHRoaXMucjIpO3RoaXMubXU9dGhpcy5yMi5kaXZpZGUoYSk7dGhpcy5tPWF9ZnVuY3Rpb24gYmFycmV0dENvbnZlcnQoYSl7aWYoYS5zPDB8fGEudD4yKnRoaXMubS50KXtyZXR1cm4gYS5tb2QodGhpcy5tKX1lbHNle2lmKGEuY29tcGFyZVRvKHRoaXMubSk8MCl7cmV0dXJuIGF9ZWxzZXt2YXIgYj1uYmkoKTthLmNvcHlUbyhiKTt0aGlzLnJlZHVjZShiKTtyZXR1cm4gYn19fWZ1bmN0aW9uIGJhcnJldHRSZXZlcnQoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gYmFycmV0dFJlZHVjZShhKXthLmRyU2hpZnRUbyh0aGlzLm0udC0xLHRoaXMucjIpO2lmKGEudD50aGlzLm0udCsxKXthLnQ9dGhpcy5tLnQrMTthLmNsYW1wKCl9dGhpcy5tdS5tdWx0aXBseVVwcGVyVG8odGhpcy5yMix0aGlzLm0udCsxLHRoaXMucTMpO3RoaXMubS5tdWx0aXBseUxvd2VyVG8odGhpcy5xMyx0aGlzLm0udCsxLHRoaXMucjIpO3doaWxlKGEuY29tcGFyZVRvKHRoaXMucjIpPDApe2EuZEFkZE9mZnNldCgxLHRoaXMubS50KzEpfWEuc3ViVG8odGhpcy5yMixhKTt3aGlsZShhLmNvbXBhcmVUbyh0aGlzLm0pPj0wKXthLnN1YlRvKHRoaXMubSxhKX19ZnVuY3Rpb24gYmFycmV0dFNxclRvKGEsYil7YS5zcXVhcmVUbyhiKTt0aGlzLnJlZHVjZShiKX1mdW5jdGlvbiBiYXJyZXR0TXVsVG8oYSxjLGIpe2EubXVsdGlwbHlUbyhjLGIpO3RoaXMucmVkdWNlKGIpfUJhcnJldHQucHJvdG90eXBlLmNvbnZlcnQ9YmFycmV0dENvbnZlcnQ7QmFycmV0dC5wcm90b3R5cGUucmV2ZXJ0PWJhcnJldHRSZXZlcnQ7QmFycmV0dC5wcm90b3R5cGUucmVkdWNlPWJhcnJldHRSZWR1Y2U7QmFycmV0dC5wcm90b3R5cGUubXVsVG89YmFycmV0dE11bFRvO0JhcnJldHQucHJvdG90eXBlLnNxclRvPWJhcnJldHRTcXJUbztmdW5jdGlvbiBibk1vZFBvdyhxLGYpe3ZhciBvPXEuYml0TGVuZ3RoKCksaCxiPW5idigxKSx2O2lmKG88PTApe3JldHVybiBifWVsc2V7aWYobzwxOCl7aD0xfWVsc2V7aWYobzw0OCl7aD0zfWVsc2V7aWYobzwxNDQpe2g9NH1lbHNle2lmKG88NzY4KXtoPTV9ZWxzZXtoPTZ9fX19fWlmKG88OCl7dj1uZXcgQ2xhc3NpYyhmKX1lbHNle2lmKGYuaXNFdmVuKCkpe3Y9bmV3IEJhcnJldHQoZil9ZWxzZXt2PW5ldyBNb250Z29tZXJ5KGYpfX12YXIgcD1uZXcgQXJyYXkoKSxkPTMscz1oLTEsYT0oMTw8aCktMTtwWzFdPXYuY29udmVydCh0aGlzKTtpZihoPjEpe3ZhciBBPW5iaSgpO3Yuc3FyVG8ocFsxXSxBKTt3aGlsZShkPD1hKXtwW2RdPW5iaSgpO3YubXVsVG8oQSxwW2QtMl0scFtkXSk7ZCs9Mn19dmFyIGw9cS50LTEseCx1PXRydWUsYz1uYmkoKSx5O289bmJpdHMocVtsXSktMTt3aGlsZShsPj0wKXtpZihvPj1zKXt4PShxW2xdPj4oby1zKSkmYX1lbHNle3g9KHFbbF0mKCgxPDwobysxKSktMSkpPDwocy1vKTtpZihsPjApe3h8PXFbbC0xXT4+KHRoaXMuREIrby1zKX19ZD1oO3doaWxlKCh4JjEpPT0wKXt4Pj49MTstLWR9aWYoKG8tPWQpPDApe28rPXRoaXMuREI7LS1sfWlmKHUpe3BbeF0uY29weVRvKGIpO3U9ZmFsc2V9ZWxzZXt3aGlsZShkPjEpe3Yuc3FyVG8oYixjKTt2LnNxclRvKGMsYik7ZC09Mn1pZihkPjApe3Yuc3FyVG8oYixjKX1lbHNle3k9YjtiPWM7Yz15fXYubXVsVG8oYyxwW3hdLGIpfXdoaWxlKGw+PTAmJihxW2xdJigxPDxvKSk9PTApe3Yuc3FyVG8oYixjKTt5PWI7Yj1jO2M9eTtpZigtLW88MCl7bz10aGlzLkRCLTE7LS1sfX19cmV0dXJuIHYucmV2ZXJ0KGIpfWZ1bmN0aW9uIGJuR0NEKGMpe3ZhciBiPSh0aGlzLnM8MCk/dGhpcy5uZWdhdGUoKTp0aGlzLmNsb25lKCk7dmFyIGg9KGMuczwwKT9jLm5lZ2F0ZSgpOmMuY2xvbmUoKTtpZihiLmNvbXBhcmVUbyhoKTwwKXt2YXIgZT1iO2I9aDtoPWV9dmFyIGQ9Yi5nZXRMb3dlc3RTZXRCaXQoKSxmPWguZ2V0TG93ZXN0U2V0Qml0KCk7aWYoZjwwKXtyZXR1cm4gYn1pZihkPGYpe2Y9ZH1pZihmPjApe2IuclNoaWZ0VG8oZixiKTtoLnJTaGlmdFRvKGYsaCl9d2hpbGUoYi5zaWdudW0oKT4wKXtpZigoZD1iLmdldExvd2VzdFNldEJpdCgpKT4wKXtiLnJTaGlmdFRvKGQsYil9aWYoKGQ9aC5nZXRMb3dlc3RTZXRCaXQoKSk+MCl7aC5yU2hpZnRUbyhkLGgpfWlmKGIuY29tcGFyZVRvKGgpPj0wKXtiLnN1YlRvKGgsYik7Yi5yU2hpZnRUbygxLGIpfWVsc2V7aC5zdWJUbyhiLGgpO2guclNoaWZ0VG8oMSxoKX19aWYoZj4wKXtoLmxTaGlmdFRvKGYsaCl9cmV0dXJuIGh9ZnVuY3Rpb24gYm5wTW9kSW50KGUpe2lmKGU8PTApe3JldHVybiAwfXZhciBjPXRoaXMuRFYlZSxiPSh0aGlzLnM8MCk/ZS0xOjA7aWYodGhpcy50PjApe2lmKGM9PTApe2I9dGhpc1swXSVlfWVsc2V7Zm9yKHZhciBhPXRoaXMudC0xO2E+PTA7LS1hKXtiPShjKmIrdGhpc1thXSklZX19fXJldHVybiBifWZ1bmN0aW9uIGJuTW9kSW52ZXJzZShmKXt2YXIgaj1mLmlzRXZlbigpO2lmKCh0aGlzLmlzRXZlbigpJiZqKXx8Zi5zaWdudW0oKT09MCl7cmV0dXJuIEJpZ0ludGVnZXIuWkVST312YXIgaT1mLmNsb25lKCksaD10aGlzLmNsb25lKCk7dmFyIGc9bmJ2KDEpLGU9bmJ2KDApLGw9bmJ2KDApLGs9bmJ2KDEpO3doaWxlKGkuc2lnbnVtKCkhPTApe3doaWxlKGkuaXNFdmVuKCkpe2kuclNoaWZ0VG8oMSxpKTtpZihqKXtpZighZy5pc0V2ZW4oKXx8IWUuaXNFdmVuKCkpe2cuYWRkVG8odGhpcyxnKTtlLnN1YlRvKGYsZSl9Zy5yU2hpZnRUbygxLGcpfWVsc2V7aWYoIWUuaXNFdmVuKCkpe2Uuc3ViVG8oZixlKX19ZS5yU2hpZnRUbygxLGUpfXdoaWxlKGguaXNFdmVuKCkpe2guclNoaWZ0VG8oMSxoKTtpZihqKXtpZighbC5pc0V2ZW4oKXx8IWsuaXNFdmVuKCkpe2wuYWRkVG8odGhpcyxsKTtrLnN1YlRvKGYsayl9bC5yU2hpZnRUbygxLGwpfWVsc2V7aWYoIWsuaXNFdmVuKCkpe2suc3ViVG8oZixrKX19ay5yU2hpZnRUbygxLGspfWlmKGkuY29tcGFyZVRvKGgpPj0wKXtpLnN1YlRvKGgsaSk7aWYoail7Zy5zdWJUbyhsLGcpfWUuc3ViVG8oayxlKX1lbHNle2guc3ViVG8oaSxoKTtpZihqKXtsLnN1YlRvKGcsbCl9ay5zdWJUbyhlLGspfX1pZihoLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSkhPTApe3JldHVybiBCaWdJbnRlZ2VyLlpFUk99aWYoay5jb21wYXJlVG8oZik+PTApe3JldHVybiBrLnN1YnRyYWN0KGYpfWlmKGsuc2lnbnVtKCk8MCl7ay5hZGRUbyhmLGspfWVsc2V7cmV0dXJuIGt9aWYoay5zaWdudW0oKTwwKXtyZXR1cm4gay5hZGQoZil9ZWxzZXtyZXR1cm4ga319dmFyIGxvd3ByaW1lcz1bMiwzLDUsNywxMSwxMywxNywxOSwyMywyOSwzMSwzNyw0MSw0Myw0Nyw1Myw1OSw2MSw2Nyw3MSw3Myw3OSw4Myw4OSw5NywxMDEsMTAzLDEwNywxMDksMTEzLDEyNywxMzEsMTM3LDEzOSwxNDksMTUxLDE1NywxNjMsMTY3LDE3MywxNzksMTgxLDE5MSwxOTMsMTk3LDE5OSwyMTEsMjIzLDIyNywyMjksMjMzLDIzOSwyNDEsMjUxLDI1NywyNjMsMjY5LDI3MSwyNzcsMjgxLDI4MywyOTMsMzA3LDMxMSwzMTMsMzE3LDMzMSwzMzcsMzQ3LDM0OSwzNTMsMzU5LDM2NywzNzMsMzc5LDM4MywzODksMzk3LDQwMSw0MDksNDE5LDQyMSw0MzEsNDMzLDQzOSw0NDMsNDQ5LDQ1Nyw0NjEsNDYzLDQ2Nyw0NzksNDg3LDQ5MSw0OTksNTAzLDUwOSw1MjEsNTIzLDU0MSw1NDcsNTU3LDU2Myw1NjksNTcxLDU3Nyw1ODcsNTkzLDU5OSw2MDEsNjA3LDYxMyw2MTcsNjE5LDYzMSw2NDEsNjQzLDY0Nyw2NTMsNjU5LDY2MSw2NzMsNjc3LDY4Myw2OTEsNzAxLDcwOSw3MTksNzI3LDczMyw3MzksNzQzLDc1MSw3NTcsNzYxLDc2OSw3NzMsNzg3LDc5Nyw4MDksODExLDgyMSw4MjMsODI3LDgyOSw4MzksODUzLDg1Nyw4NTksODYzLDg3Nyw4ODEsODgzLDg4Nyw5MDcsOTExLDkxOSw5MjksOTM3LDk0MSw5NDcsOTUzLDk2Nyw5NzEsOTc3LDk4Myw5OTEsOTk3XTt2YXIgbHBsaW09KDE8PDI2KS9sb3dwcmltZXNbbG93cHJpbWVzLmxlbmd0aC0xXTtmdW5jdGlvbiBibklzUHJvYmFibGVQcmltZShlKXt2YXIgZCxiPXRoaXMuYWJzKCk7aWYoYi50PT0xJiZiWzBdPD1sb3dwcmltZXNbbG93cHJpbWVzLmxlbmd0aC0xXSl7Zm9yKGQ9MDtkPGxvd3ByaW1lcy5sZW5ndGg7KytkKXtpZihiWzBdPT1sb3dwcmltZXNbZF0pe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9aWYoYi5pc0V2ZW4oKSl7cmV0dXJuIGZhbHNlfWQ9MTt3aGlsZShkPGxvd3ByaW1lcy5sZW5ndGgpe3ZhciBhPWxvd3ByaW1lc1tkXSxjPWQrMTt3aGlsZShjPGxvd3ByaW1lcy5sZW5ndGgmJmE8bHBsaW0pe2EqPWxvd3ByaW1lc1tjKytdfWE9Yi5tb2RJbnQoYSk7d2hpbGUoZDxjKXtpZihhJWxvd3ByaW1lc1tkKytdPT0wKXtyZXR1cm4gZmFsc2V9fX1yZXR1cm4gYi5taWxsZXJSYWJpbihlKX1mdW5jdGlvbiBibnBNaWxsZXJSYWJpbihmKXt2YXIgZz10aGlzLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKTt2YXIgYz1nLmdldExvd2VzdFNldEJpdCgpO2lmKGM8PTApe3JldHVybiBmYWxzZX12YXIgaD1nLnNoaWZ0UmlnaHQoYyk7Zj0oZisxKT4+MTtpZihmPmxvd3ByaW1lcy5sZW5ndGgpe2Y9bG93cHJpbWVzLmxlbmd0aH12YXIgYj1uYmkoKTtmb3IodmFyIGU9MDtlPGY7KytlKXtiLmZyb21JbnQobG93cHJpbWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpsb3dwcmltZXMubGVuZ3RoKV0pO3ZhciBsPWIubW9kUG93KGgsdGhpcyk7aWYobC5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpIT0wJiZsLmNvbXBhcmVUbyhnKSE9MCl7dmFyIGQ9MTt3aGlsZShkKys8YyYmbC5jb21wYXJlVG8oZykhPTApe2w9bC5tb2RQb3dJbnQoMix0aGlzKTtpZihsLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSk9PTApe3JldHVybiBmYWxzZX19aWYobC5jb21wYXJlVG8oZykhPTApe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfUJpZ0ludGVnZXIucHJvdG90eXBlLmNodW5rU2l6ZT1ibnBDaHVua1NpemU7QmlnSW50ZWdlci5wcm90b3R5cGUudG9SYWRpeD1ibnBUb1JhZGl4O0JpZ0ludGVnZXIucHJvdG90eXBlLmZyb21SYWRpeD1ibnBGcm9tUmFkaXg7QmlnSW50ZWdlci5wcm90b3R5cGUuZnJvbU51bWJlcj1ibnBGcm9tTnVtYmVyO0JpZ0ludGVnZXIucHJvdG90eXBlLmJpdHdpc2VUbz1ibnBCaXR3aXNlVG87QmlnSW50ZWdlci5wcm90b3R5cGUuY2hhbmdlQml0PWJucENoYW5nZUJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hZGRUbz1ibnBBZGRUbztCaWdJbnRlZ2VyLnByb3RvdHlwZS5kTXVsdGlwbHk9Ym5wRE11bHRpcGx5O0JpZ0ludGVnZXIucHJvdG90eXBlLmRBZGRPZmZzZXQ9Ym5wREFkZE9mZnNldDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5tdWx0aXBseUxvd2VyVG89Ym5wTXVsdGlwbHlMb3dlclRvO0JpZ0ludGVnZXIucHJvdG90eXBlLm11bHRpcGx5VXBwZXJUbz1ibnBNdWx0aXBseVVwcGVyVG87QmlnSW50ZWdlci5wcm90b3R5cGUubW9kSW50PWJucE1vZEludDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5taWxsZXJSYWJpbj1ibnBNaWxsZXJSYWJpbjtCaWdJbnRlZ2VyLnByb3RvdHlwZS5jbG9uZT1ibkNsb25lO0JpZ0ludGVnZXIucHJvdG90eXBlLmludFZhbHVlPWJuSW50VmFsdWU7QmlnSW50ZWdlci5wcm90b3R5cGUuYnl0ZVZhbHVlPWJuQnl0ZVZhbHVlO0JpZ0ludGVnZXIucHJvdG90eXBlLnNob3J0VmFsdWU9Ym5TaG9ydFZhbHVlO0JpZ0ludGVnZXIucHJvdG90eXBlLnNpZ251bT1iblNpZ051bTtCaWdJbnRlZ2VyLnByb3RvdHlwZS50b0J5dGVBcnJheT1iblRvQnl0ZUFycmF5O0JpZ0ludGVnZXIucHJvdG90eXBlLmVxdWFscz1ibkVxdWFscztCaWdJbnRlZ2VyLnByb3RvdHlwZS5taW49Ym5NaW47QmlnSW50ZWdlci5wcm90b3R5cGUubWF4PWJuTWF4O0JpZ0ludGVnZXIucHJvdG90eXBlLmFuZD1ibkFuZDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5vcj1ibk9yO0JpZ0ludGVnZXIucHJvdG90eXBlLnhvcj1iblhvcjtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbmROb3Q9Ym5BbmROb3Q7QmlnSW50ZWdlci5wcm90b3R5cGUubm90PWJuTm90O0JpZ0ludGVnZXIucHJvdG90eXBlLnNoaWZ0TGVmdD1iblNoaWZ0TGVmdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zaGlmdFJpZ2h0PWJuU2hpZnRSaWdodDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5nZXRMb3dlc3RTZXRCaXQ9Ym5HZXRMb3dlc3RTZXRCaXQ7QmlnSW50ZWdlci5wcm90b3R5cGUuYml0Q291bnQ9Ym5CaXRDb3VudDtCaWdJbnRlZ2VyLnByb3RvdHlwZS50ZXN0Qml0PWJuVGVzdEJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zZXRCaXQ9Ym5TZXRCaXQ7QmlnSW50ZWdlci5wcm90b3R5cGUuY2xlYXJCaXQ9Ym5DbGVhckJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5mbGlwQml0PWJuRmxpcEJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hZGQ9Ym5BZGQ7QmlnSW50ZWdlci5wcm90b3R5cGUuc3VidHJhY3Q9Ym5TdWJ0cmFjdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5tdWx0aXBseT1ibk11bHRpcGx5O0JpZ0ludGVnZXIucHJvdG90eXBlLmRpdmlkZT1ibkRpdmlkZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5yZW1haW5kZXI9Ym5SZW1haW5kZXI7QmlnSW50ZWdlci5wcm90b3R5cGUuZGl2aWRlQW5kUmVtYWluZGVyPWJuRGl2aWRlQW5kUmVtYWluZGVyO0JpZ0ludGVnZXIucHJvdG90eXBlLm1vZFBvdz1ibk1vZFBvdztCaWdJbnRlZ2VyLnByb3RvdHlwZS5tb2RJbnZlcnNlPWJuTW9kSW52ZXJzZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5wb3c9Ym5Qb3c7QmlnSW50ZWdlci5wcm90b3R5cGUuZ2NkPWJuR0NEO0JpZ0ludGVnZXIucHJvdG90eXBlLmlzUHJvYmFibGVQcmltZT1ibklzUHJvYmFibGVQcmltZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zcXVhcmU9Ym5TcXVhcmU7Ci8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuLwogKi8KZnVuY3Rpb24gQXJjZm91cigpe3RoaXMuaT0wO3RoaXMuaj0wO3RoaXMuUz1uZXcgQXJyYXkoKX1mdW5jdGlvbiBBUkM0aW5pdChkKXt2YXIgYyxhLGI7Zm9yKGM9MDtjPDI1NjsrK2Mpe3RoaXMuU1tjXT1jfWE9MDtmb3IoYz0wO2M8MjU2OysrYyl7YT0oYSt0aGlzLlNbY10rZFtjJWQubGVuZ3RoXSkmMjU1O2I9dGhpcy5TW2NdO3RoaXMuU1tjXT10aGlzLlNbYV07dGhpcy5TW2FdPWJ9dGhpcy5pPTA7dGhpcy5qPTB9ZnVuY3Rpb24gQVJDNG5leHQoKXt2YXIgYTt0aGlzLmk9KHRoaXMuaSsxKSYyNTU7dGhpcy5qPSh0aGlzLmordGhpcy5TW3RoaXMuaV0pJjI1NTthPXRoaXMuU1t0aGlzLmldO3RoaXMuU1t0aGlzLmldPXRoaXMuU1t0aGlzLmpdO3RoaXMuU1t0aGlzLmpdPWE7cmV0dXJuIHRoaXMuU1soYSt0aGlzLlNbdGhpcy5pXSkmMjU1XX1BcmNmb3VyLnByb3RvdHlwZS5pbml0PUFSQzRpbml0O0FyY2ZvdXIucHJvdG90eXBlLm5leHQ9QVJDNG5leHQ7ZnVuY3Rpb24gcHJuZ19uZXdzdGF0ZSgpe3JldHVybiBuZXcgQXJjZm91cigpfXZhciBybmdfcHNpemU9MjU2OwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCnZhciBybmdfc3RhdGU7dmFyIHJuZ19wb29sO3ZhciBybmdfcHB0cjtmdW5jdGlvbiBybmdfc2VlZF9pbnQoYSl7cm5nX3Bvb2xbcm5nX3BwdHIrK11ePWEmMjU1O3JuZ19wb29sW3JuZ19wcHRyKytdXj0oYT4+OCkmMjU1O3JuZ19wb29sW3JuZ19wcHRyKytdXj0oYT4+MTYpJjI1NTtybmdfcG9vbFtybmdfcHB0cisrXV49KGE+PjI0KSYyNTU7aWYocm5nX3BwdHI+PXJuZ19wc2l6ZSl7cm5nX3BwdHItPXJuZ19wc2l6ZX19ZnVuY3Rpb24gcm5nX3NlZWRfdGltZSgpe3JuZ19zZWVkX2ludChuZXcgRGF0ZSgpLmdldFRpbWUoKSl9aWYocm5nX3Bvb2w9PW51bGwpe3JuZ19wb29sPW5ldyBBcnJheSgpO3JuZ19wcHRyPTA7dmFyIHQ7aWYobmF2aWdhdG9yLmFwcE5hbWU9PSJOZXRzY2FwZSImJm5hdmlnYXRvci5hcHBWZXJzaW9uPCI1IiYmd2luZG93LmNyeXB0byl7dmFyIHo9d2luZG93LmNyeXB0by5yYW5kb20oMzIpO2Zvcih0PTA7dDx6Lmxlbmd0aDsrK3Qpe3JuZ19wb29sW3JuZ19wcHRyKytdPXouY2hhckNvZGVBdCh0KSYyNTV9fXdoaWxlKHJuZ19wcHRyPHJuZ19wc2l6ZSl7dD1NYXRoLmZsb29yKDY1NTM2Kk1hdGgucmFuZG9tKCkpO3JuZ19wb29sW3JuZ19wcHRyKytdPXQ+Pj44O3JuZ19wb29sW3JuZ19wcHRyKytdPXQmMjU1fXJuZ19wcHRyPTA7cm5nX3NlZWRfdGltZSgpfWZ1bmN0aW9uIHJuZ19nZXRfYnl0ZSgpe2lmKHJuZ19zdGF0ZT09bnVsbCl7cm5nX3NlZWRfdGltZSgpO3JuZ19zdGF0ZT1wcm5nX25ld3N0YXRlKCk7cm5nX3N0YXRlLmluaXQocm5nX3Bvb2wpO2ZvcihybmdfcHB0cj0wO3JuZ19wcHRyPHJuZ19wb29sLmxlbmd0aDsrK3JuZ19wcHRyKXtybmdfcG9vbFtybmdfcHB0cl09MH1ybmdfcHB0cj0wfXJldHVybiBybmdfc3RhdGUubmV4dCgpfWZ1bmN0aW9uIHJuZ19nZXRfYnl0ZXMoYil7dmFyIGE7Zm9yKGE9MDthPGIubGVuZ3RoOysrYSl7YlthXT1ybmdfZ2V0X2J5dGUoKX19ZnVuY3Rpb24gU2VjdXJlUmFuZG9tKCl7fVNlY3VyZVJhbmRvbS5wcm90b3R5cGUubmV4dEJ5dGVzPXJuZ19nZXRfYnl0ZXM7Ci8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuLwogKi8KZnVuY3Rpb24gcGFyc2VCaWdJbnQoYixhKXtyZXR1cm4gbmV3IEJpZ0ludGVnZXIoYixhKX1mdW5jdGlvbiBsaW5lYnJrKGMsZCl7dmFyIGE9IiI7dmFyIGI9MDt3aGlsZShiK2Q8Yy5sZW5ndGgpe2ErPWMuc3Vic3RyaW5nKGIsYitkKSsiXG4iO2IrPWR9cmV0dXJuIGErYy5zdWJzdHJpbmcoYixjLmxlbmd0aCl9ZnVuY3Rpb24gYnl0ZTJIZXgoYSl7aWYoYTwxNil7cmV0dXJuIjAiK2EudG9TdHJpbmcoMTYpfWVsc2V7cmV0dXJuIGEudG9TdHJpbmcoMTYpfX1mdW5jdGlvbiBwa2NzMXBhZDIoZSxoKXtpZihoPGUubGVuZ3RoKzExKXthbGVydCgiTWVzc2FnZSB0b28gbG9uZyBmb3IgUlNBIik7cmV0dXJuIG51bGx9dmFyIGc9bmV3IEFycmF5KCk7dmFyIGQ9ZS5sZW5ndGgtMTt3aGlsZShkPj0wJiZoPjApe3ZhciBmPWUuY2hhckNvZGVBdChkLS0pO2lmKGY8MTI4KXtnWy0taF09Zn1lbHNle2lmKChmPjEyNykmJihmPDIwNDgpKXtnWy0taF09KGYmNjMpfDEyODtnWy0taF09KGY+PjYpfDE5Mn1lbHNle2dbLS1oXT0oZiY2Myl8MTI4O2dbLS1oXT0oKGY+PjYpJjYzKXwxMjg7Z1stLWhdPShmPj4xMil8MjI0fX19Z1stLWhdPTA7dmFyIGI9bmV3IFNlY3VyZVJhbmRvbSgpO3ZhciBhPW5ldyBBcnJheSgpO3doaWxlKGg+Mil7YVswXT0wO3doaWxlKGFbMF09PTApe2IubmV4dEJ5dGVzKGEpfWdbLS1oXT1hWzBdfWdbLS1oXT0yO2dbLS1oXT0wO3JldHVybiBuZXcgQmlnSW50ZWdlcihnKX1mdW5jdGlvbiBvYWVwX21nZjFfYXJyKGMsYSxlKXt2YXIgYj0iIixkPTA7d2hpbGUoYi5sZW5ndGg8YSl7Yis9ZShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxjLmNvbmNhdChbKGQmNDI3ODE5MDA4MCk+PjI0LChkJjE2NzExNjgwKT4+MTYsKGQmNjUyODApPj44LGQmMjU1XSkpKTtkKz0xfXJldHVybiBifXZhciBTSEExX1NJWkU9MjA7ZnVuY3Rpb24gb2FlcF9wYWQobCxhLGMpe2lmKGwubGVuZ3RoKzIqU0hBMV9TSVpFKzI+YSl7dGhyb3ciTWVzc2FnZSB0b28gbG9uZyBmb3IgUlNBIn12YXIgaD0iIixkO2ZvcihkPTA7ZDxhLWwubGVuZ3RoLTIqU0hBMV9TSVpFLTI7ZCs9MSl7aCs9Ilx4MDAifXZhciBlPXJzdHJfc2hhMSgiIikraCsiXHgwMSIrbDt2YXIgZj1uZXcgQXJyYXkoU0hBMV9TSVpFKTtuZXcgU2VjdXJlUmFuZG9tKCkubmV4dEJ5dGVzKGYpO3ZhciBnPW9hZXBfbWdmMV9hcnIoZixlLmxlbmd0aCxjfHxyc3RyX3NoYTEpO3ZhciBrPVtdO2ZvcihkPTA7ZDxlLmxlbmd0aDtkKz0xKXtrW2RdPWUuY2hhckNvZGVBdChkKV5nLmNoYXJDb2RlQXQoZCl9dmFyIGo9b2FlcF9tZ2YxX2FycihrLGYubGVuZ3RoLHJzdHJfc2hhMSk7dmFyIGI9WzBdO2ZvcihkPTA7ZDxmLmxlbmd0aDtkKz0xKXtiW2QrMV09ZltkXV5qLmNoYXJDb2RlQXQoZCl9cmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGIuY29uY2F0KGspKX1mdW5jdGlvbiBSU0FLZXkoKXt0aGlzLm49bnVsbDt0aGlzLmU9MDt0aGlzLmQ9bnVsbDt0aGlzLnA9bnVsbDt0aGlzLnE9bnVsbDt0aGlzLmRtcDE9bnVsbDt0aGlzLmRtcTE9bnVsbDt0aGlzLmNvZWZmPW51bGx9ZnVuY3Rpb24gUlNBU2V0UHVibGljKGIsYSl7dGhpcy5pc1B1YmxpYz10cnVlO2lmKHR5cGVvZiBiIT09InN0cmluZyIpe3RoaXMubj1iO3RoaXMuZT1hfWVsc2V7aWYoYiE9bnVsbCYmYSE9bnVsbCYmYi5sZW5ndGg+MCYmYS5sZW5ndGg+MCl7dGhpcy5uPXBhcnNlQmlnSW50KGIsMTYpO3RoaXMuZT1wYXJzZUludChhLDE2KX1lbHNle2FsZXJ0KCJJbnZhbGlkIFJTQSBwdWJsaWMga2V5Iil9fX1mdW5jdGlvbiBSU0FEb1B1YmxpYyhhKXtyZXR1cm4gYS5tb2RQb3dJbnQodGhpcy5lLHRoaXMubil9ZnVuY3Rpb24gUlNBRW5jcnlwdChkKXt2YXIgYT1wa2NzMXBhZDIoZCwodGhpcy5uLmJpdExlbmd0aCgpKzcpPj4zKTtpZihhPT1udWxsKXtyZXR1cm4gbnVsbH12YXIgZT10aGlzLmRvUHVibGljKGEpO2lmKGU9PW51bGwpe3JldHVybiBudWxsfXZhciBiPWUudG9TdHJpbmcoMTYpO2lmKChiLmxlbmd0aCYxKT09MCl7cmV0dXJuIGJ9ZWxzZXtyZXR1cm4iMCIrYn19ZnVuY3Rpb24gUlNBRW5jcnlwdE9BRVAoZSxkKXt2YXIgYT1vYWVwX3BhZChlLCh0aGlzLm4uYml0TGVuZ3RoKCkrNyk+PjMsZCk7aWYoYT09bnVsbCl7cmV0dXJuIG51bGx9dmFyIGY9dGhpcy5kb1B1YmxpYyhhKTtpZihmPT1udWxsKXtyZXR1cm4gbnVsbH12YXIgYj1mLnRvU3RyaW5nKDE2KTtpZigoYi5sZW5ndGgmMSk9PTApe3JldHVybiBifWVsc2V7cmV0dXJuIjAiK2J9fVJTQUtleS5wcm90b3R5cGUuZG9QdWJsaWM9UlNBRG9QdWJsaWM7UlNBS2V5LnByb3RvdHlwZS5zZXRQdWJsaWM9UlNBU2V0UHVibGljO1JTQUtleS5wcm90b3R5cGUuZW5jcnlwdD1SU0FFbmNyeXB0O1JTQUtleS5wcm90b3R5cGUuZW5jcnlwdE9BRVA9UlNBRW5jcnlwdE9BRVA7UlNBS2V5LnByb3RvdHlwZS50eXBlPSJSU0EiOwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCmZ1bmN0aW9uIHBrY3MxdW5wYWQyKGcsail7dmFyIGE9Zy50b0J5dGVBcnJheSgpO3ZhciBmPTA7d2hpbGUoZjxhLmxlbmd0aCYmYVtmXT09MCl7KytmfWlmKGEubGVuZ3RoLWYhPWotMXx8YVtmXSE9Mil7cmV0dXJuIG51bGx9KytmO3doaWxlKGFbZl0hPTApe2lmKCsrZj49YS5sZW5ndGgpe3JldHVybiBudWxsfX12YXIgZT0iIjt3aGlsZSgrK2Y8YS5sZW5ndGgpe3ZhciBoPWFbZl0mMjU1O2lmKGg8MTI4KXtlKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGgpfWVsc2V7aWYoKGg+MTkxKSYmKGg8MjI0KSl7ZSs9U3RyaW5nLmZyb21DaGFyQ29kZSgoKGgmMzEpPDw2KXwoYVtmKzFdJjYzKSk7KytmfWVsc2V7ZSs9U3RyaW5nLmZyb21DaGFyQ29kZSgoKGgmMTUpPDwxMil8KChhW2YrMV0mNjMpPDw2KXwoYVtmKzJdJjYzKSk7Zis9Mn19fXJldHVybiBlfWZ1bmN0aW9uIG9hZXBfbWdmMV9zdHIoYyxhLGUpe3ZhciBiPSIiLGQ9MDt3aGlsZShiLmxlbmd0aDxhKXtiKz1lKGMrU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsWyhkJjQyNzgxOTAwODApPj4yNCwoZCYxNjcxMTY4MCk+PjE2LChkJjY1MjgwKT4+OCxkJjI1NV0pKTtkKz0xfXJldHVybiBifXZhciBTSEExX1NJWkU9MjA7ZnVuY3Rpb24gb2FlcF91bnBhZChsLGIsZSl7bD1sLnRvQnl0ZUFycmF5KCk7dmFyIGY7Zm9yKGY9MDtmPGwubGVuZ3RoO2YrPTEpe2xbZl0mPTI1NX13aGlsZShsLmxlbmd0aDxiKXtsLnVuc2hpZnQoMCl9bD1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxsKTtpZihsLmxlbmd0aDwyKlNIQTFfU0laRSsyKXt0aHJvdyJDaXBoZXIgdG9vIHNob3J0In12YXIgYz1sLnN1YnN0cigxLFNIQTFfU0laRSk7dmFyIG89bC5zdWJzdHIoU0hBMV9TSVpFKzEpO3ZhciBtPW9hZXBfbWdmMV9zdHIobyxTSEExX1NJWkUsZXx8cnN0cl9zaGExKTt2YXIgaD1bXSxmO2ZvcihmPTA7ZjxjLmxlbmd0aDtmKz0xKXtoW2ZdPWMuY2hhckNvZGVBdChmKV5tLmNoYXJDb2RlQXQoZil9dmFyIGo9b2FlcF9tZ2YxX3N0cihTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxoKSxsLmxlbmd0aC1TSEExX1NJWkUscnN0cl9zaGExKTt2YXIgZz1bXTtmb3IoZj0wO2Y8by5sZW5ndGg7Zis9MSl7Z1tmXT1vLmNoYXJDb2RlQXQoZileai5jaGFyQ29kZUF0KGYpfWc9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZyk7aWYoZy5zdWJzdHIoMCxTSEExX1NJWkUpIT09cnN0cl9zaGExKCIiKSl7dGhyb3ciSGFzaCBtaXNtYXRjaCJ9Zz1nLnN1YnN0cihTSEExX1NJWkUpO3ZhciBhPWcuaW5kZXhPZigiXHgwMSIpO3ZhciBrPShhIT0tMSk/Zy5zdWJzdHIoMCxhKS5sYXN0SW5kZXhPZigiXHgwMCIpOi0xO2lmKGsrMSE9YSl7dGhyb3ciTWFsZm9ybWVkIGRhdGEifXJldHVybiBnLnN1YnN0cihhKzEpfWZ1bmN0aW9uIFJTQVNldFByaXZhdGUoYyxhLGIpe3RoaXMuaXNQcml2YXRlPXRydWU7aWYodHlwZW9mIGMhPT0ic3RyaW5nIil7dGhpcy5uPWM7dGhpcy5lPWE7dGhpcy5kPWJ9ZWxzZXtpZihjIT1udWxsJiZhIT1udWxsJiZjLmxlbmd0aD4wJiZhLmxlbmd0aD4wKXt0aGlzLm49cGFyc2VCaWdJbnQoYywxNik7dGhpcy5lPXBhcnNlSW50KGEsMTYpO3RoaXMuZD1wYXJzZUJpZ0ludChiLDE2KX1lbHNle2FsZXJ0KCJJbnZhbGlkIFJTQSBwcml2YXRlIGtleSIpfX19ZnVuY3Rpb24gUlNBU2V0UHJpdmF0ZUV4KGcsZCxlLGMsYixhLGgsZil7dGhpcy5pc1ByaXZhdGU9dHJ1ZTtpZihnPT1udWxsKXt0aHJvdyJSU0FTZXRQcml2YXRlRXggTiA9PSBudWxsIn1pZihkPT1udWxsKXt0aHJvdyJSU0FTZXRQcml2YXRlRXggRSA9PSBudWxsIn1pZihnLmxlbmd0aD09MCl7dGhyb3ciUlNBU2V0UHJpdmF0ZUV4IE4ubGVuZ3RoID09IDAifWlmKGQubGVuZ3RoPT0wKXt0aHJvdyJSU0FTZXRQcml2YXRlRXggRS5sZW5ndGggPT0gMCJ9aWYoZyE9bnVsbCYmZCE9bnVsbCYmZy5sZW5ndGg+MCYmZC5sZW5ndGg+MCl7dGhpcy5uPXBhcnNlQmlnSW50KGcsMTYpO3RoaXMuZT1wYXJzZUludChkLDE2KTt0aGlzLmQ9cGFyc2VCaWdJbnQoZSwxNik7dGhpcy5wPXBhcnNlQmlnSW50KGMsMTYpO3RoaXMucT1wYXJzZUJpZ0ludChiLDE2KTt0aGlzLmRtcDE9cGFyc2VCaWdJbnQoYSwxNik7dGhpcy5kbXExPXBhcnNlQmlnSW50KGgsMTYpO3RoaXMuY29lZmY9cGFyc2VCaWdJbnQoZiwxNil9ZWxzZXthbGVydCgiSW52YWxpZCBSU0EgcHJpdmF0ZSBrZXkgaW4gUlNBU2V0UHJpdmF0ZUV4Iil9fWZ1bmN0aW9uIFJTQUdlbmVyYXRlKGIsaSl7dmFyIGE9bmV3IFNlY3VyZVJhbmRvbSgpO3ZhciBmPWI+PjE7dGhpcy5lPXBhcnNlSW50KGksMTYpO3ZhciBjPW5ldyBCaWdJbnRlZ2VyKGksMTYpO2Zvcig7Oyl7Zm9yKDs7KXt0aGlzLnA9bmV3IEJpZ0ludGVnZXIoYi1mLDEsYSk7aWYodGhpcy5wLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKS5nY2QoYykuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKT09MCYmdGhpcy5wLmlzUHJvYmFibGVQcmltZSgxMCkpe2JyZWFrfX1mb3IoOzspe3RoaXMucT1uZXcgQmlnSW50ZWdlcihmLDEsYSk7aWYodGhpcy5xLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKS5nY2QoYykuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKT09MCYmdGhpcy5xLmlzUHJvYmFibGVQcmltZSgxMCkpe2JyZWFrfX1pZih0aGlzLnAuY29tcGFyZVRvKHRoaXMucSk8PTApe3ZhciBoPXRoaXMucDt0aGlzLnA9dGhpcy5xO3RoaXMucT1ofXZhciBnPXRoaXMucC5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSk7dmFyIGQ9dGhpcy5xLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKTt2YXIgZT1nLm11bHRpcGx5KGQpO2lmKGUuZ2NkKGMpLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSk9PTApe3RoaXMubj10aGlzLnAubXVsdGlwbHkodGhpcy5xKTt0aGlzLmQ9Yy5tb2RJbnZlcnNlKGUpO3RoaXMuZG1wMT10aGlzLmQubW9kKGcpO3RoaXMuZG1xMT10aGlzLmQubW9kKGQpO3RoaXMuY29lZmY9dGhpcy5xLm1vZEludmVyc2UodGhpcy5wKTticmVha319fWZ1bmN0aW9uIFJTQURvUHJpdmF0ZShhKXtpZih0aGlzLnA9PW51bGx8fHRoaXMucT09bnVsbCl7cmV0dXJuIGEubW9kUG93KHRoaXMuZCx0aGlzLm4pfXZhciBjPWEubW9kKHRoaXMucCkubW9kUG93KHRoaXMuZG1wMSx0aGlzLnApO3ZhciBiPWEubW9kKHRoaXMucSkubW9kUG93KHRoaXMuZG1xMSx0aGlzLnEpO3doaWxlKGMuY29tcGFyZVRvKGIpPDApe2M9Yy5hZGQodGhpcy5wKX1yZXR1cm4gYy5zdWJ0cmFjdChiKS5tdWx0aXBseSh0aGlzLmNvZWZmKS5tb2QodGhpcy5wKS5tdWx0aXBseSh0aGlzLnEpLmFkZChiKX1mdW5jdGlvbiBSU0FEZWNyeXB0KGIpe3ZhciBkPXBhcnNlQmlnSW50KGIsMTYpO3ZhciBhPXRoaXMuZG9Qcml2YXRlKGQpO2lmKGE9PW51bGwpe3JldHVybiBudWxsfXJldHVybiBwa2NzMXVucGFkMihhLCh0aGlzLm4uYml0TGVuZ3RoKCkrNyk+PjMpfWZ1bmN0aW9uIFJTQURlY3J5cHRPQUVQKGQsYil7dmFyIGU9cGFyc2VCaWdJbnQoZCwxNik7dmFyIGE9dGhpcy5kb1ByaXZhdGUoZSk7aWYoYT09bnVsbCl7cmV0dXJuIG51bGx9cmV0dXJuIG9hZXBfdW5wYWQoYSwodGhpcy5uLmJpdExlbmd0aCgpKzcpPj4zLGIpfVJTQUtleS5wcm90b3R5cGUuZG9Qcml2YXRlPVJTQURvUHJpdmF0ZTtSU0FLZXkucHJvdG90eXBlLnNldFByaXZhdGU9UlNBU2V0UHJpdmF0ZTtSU0FLZXkucHJvdG90eXBlLnNldFByaXZhdGVFeD1SU0FTZXRQcml2YXRlRXg7UlNBS2V5LnByb3RvdHlwZS5nZW5lcmF0ZT1SU0FHZW5lcmF0ZTtSU0FLZXkucHJvdG90eXBlLmRlY3J5cHQ9UlNBRGVjcnlwdDtSU0FLZXkucHJvdG90eXBlLmRlY3J5cHRPQUVQPVJTQURlY3J5cHRPQUVQOwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCmZ1bmN0aW9uIEVDRmllbGRFbGVtZW50RnAoYixhKXt0aGlzLng9YTt0aGlzLnE9Yn1mdW5jdGlvbiBmZUZwRXF1YWxzKGEpe2lmKGE9PXRoaXMpe3JldHVybiB0cnVlfXJldHVybih0aGlzLnEuZXF1YWxzKGEucSkmJnRoaXMueC5lcXVhbHMoYS54KSl9ZnVuY3Rpb24gZmVGcFRvQmlnSW50ZWdlcigpe3JldHVybiB0aGlzLnh9ZnVuY3Rpb24gZmVGcE5lZ2F0ZSgpe3JldHVybiBuZXcgRUNGaWVsZEVsZW1lbnRGcCh0aGlzLnEsdGhpcy54Lm5lZ2F0ZSgpLm1vZCh0aGlzLnEpKX1mdW5jdGlvbiBmZUZwQWRkKGEpe3JldHVybiBuZXcgRUNGaWVsZEVsZW1lbnRGcCh0aGlzLnEsdGhpcy54LmFkZChhLnRvQmlnSW50ZWdlcigpKS5tb2QodGhpcy5xKSl9ZnVuY3Rpb24gZmVGcFN1YnRyYWN0KGEpe3JldHVybiBuZXcgRUNGaWVsZEVsZW1lbnRGcCh0aGlzLnEsdGhpcy54LnN1YnRyYWN0KGEudG9CaWdJbnRlZ2VyKCkpLm1vZCh0aGlzLnEpKX1mdW5jdGlvbiBmZUZwTXVsdGlwbHkoYSl7cmV0dXJuIG5ldyBFQ0ZpZWxkRWxlbWVudEZwKHRoaXMucSx0aGlzLngubXVsdGlwbHkoYS50b0JpZ0ludGVnZXIoKSkubW9kKHRoaXMucSkpfWZ1bmN0aW9uIGZlRnBTcXVhcmUoKXtyZXR1cm4gbmV3IEVDRmllbGRFbGVtZW50RnAodGhpcy5xLHRoaXMueC5zcXVhcmUoKS5tb2QodGhpcy5xKSl9ZnVuY3Rpb24gZmVGcERpdmlkZShhKXtyZXR1cm4gbmV3IEVDRmllbGRFbGVtZW50RnAodGhpcy5xLHRoaXMueC5tdWx0aXBseShhLnRvQmlnSW50ZWdlcigpLm1vZEludmVyc2UodGhpcy5xKSkubW9kKHRoaXMucSkpfUVDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLmVxdWFscz1mZUZwRXF1YWxzO0VDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLnRvQmlnSW50ZWdlcj1mZUZwVG9CaWdJbnRlZ2VyO0VDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLm5lZ2F0ZT1mZUZwTmVnYXRlO0VDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLmFkZD1mZUZwQWRkO0VDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLnN1YnRyYWN0PWZlRnBTdWJ0cmFjdDtFQ0ZpZWxkRWxlbWVudEZwLnByb3RvdHlwZS5tdWx0aXBseT1mZUZwTXVsdGlwbHk7RUNGaWVsZEVsZW1lbnRGcC5wcm90b3R5cGUuc3F1YXJlPWZlRnBTcXVhcmU7RUNGaWVsZEVsZW1lbnRGcC5wcm90b3R5cGUuZGl2aWRlPWZlRnBEaXZpZGU7ZnVuY3Rpb24gRUNQb2ludEZwKGMsYSxkLGIpe3RoaXMuY3VydmU9Yzt0aGlzLng9YTt0aGlzLnk9ZDtpZihiPT1udWxsKXt0aGlzLno9QmlnSW50ZWdlci5PTkV9ZWxzZXt0aGlzLno9Yn10aGlzLnppbnY9bnVsbH1mdW5jdGlvbiBwb2ludEZwR2V0WCgpe2lmKHRoaXMuemludj09bnVsbCl7dGhpcy56aW52PXRoaXMuei5tb2RJbnZlcnNlKHRoaXMuY3VydmUucSl9cmV0dXJuIHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIodGhpcy54LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMuemludikubW9kKHRoaXMuY3VydmUucSkpfWZ1bmN0aW9uIHBvaW50RnBHZXRZKCl7aWYodGhpcy56aW52PT1udWxsKXt0aGlzLnppbnY9dGhpcy56Lm1vZEludmVyc2UodGhpcy5jdXJ2ZS5xKX1yZXR1cm4gdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcih0aGlzLnkudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56aW52KS5tb2QodGhpcy5jdXJ2ZS5xKSl9ZnVuY3Rpb24gcG9pbnRGcEVxdWFscyhhKXtpZihhPT10aGlzKXtyZXR1cm4gdHJ1ZX1pZih0aGlzLmlzSW5maW5pdHkoKSl7cmV0dXJuIGEuaXNJbmZpbml0eSgpfWlmKGEuaXNJbmZpbml0eSgpKXtyZXR1cm4gdGhpcy5pc0luZmluaXR5KCl9dmFyIGMsYjtjPWEueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseShhLnopKS5tb2QodGhpcy5jdXJ2ZS5xKTtpZighYy5lcXVhbHMoQmlnSW50ZWdlci5aRVJPKSl7cmV0dXJuIGZhbHNlfWI9YS54LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QodGhpcy54LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KGEueikpLm1vZCh0aGlzLmN1cnZlLnEpO3JldHVybiBiLmVxdWFscyhCaWdJbnRlZ2VyLlpFUk8pfWZ1bmN0aW9uIHBvaW50RnBJc0luZmluaXR5KCl7aWYoKHRoaXMueD09bnVsbCkmJih0aGlzLnk9PW51bGwpKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gdGhpcy56LmVxdWFscyhCaWdJbnRlZ2VyLlpFUk8pJiYhdGhpcy55LnRvQmlnSW50ZWdlcigpLmVxdWFscyhCaWdJbnRlZ2VyLlpFUk8pfWZ1bmN0aW9uIHBvaW50RnBOZWdhdGUoKXtyZXR1cm4gbmV3IEVDUG9pbnRGcCh0aGlzLmN1cnZlLHRoaXMueCx0aGlzLnkubmVnYXRlKCksdGhpcy56KX1mdW5jdGlvbiBwb2ludEZwQWRkKGwpe2lmKHRoaXMuaXNJbmZpbml0eSgpKXtyZXR1cm4gbH1pZihsLmlzSW5maW5pdHkoKSl7cmV0dXJuIHRoaXN9dmFyIHA9bC55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QodGhpcy55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KGwueikpLm1vZCh0aGlzLmN1cnZlLnEpO3ZhciBvPWwueC50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueC50b0JpZ0ludGVnZXIoKS5tdWx0aXBseShsLnopKS5tb2QodGhpcy5jdXJ2ZS5xKTtpZihCaWdJbnRlZ2VyLlpFUk8uZXF1YWxzKG8pKXtpZihCaWdJbnRlZ2VyLlpFUk8uZXF1YWxzKHApKXtyZXR1cm4gdGhpcy50d2ljZSgpfXJldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCl9dmFyIGo9bmV3IEJpZ0ludGVnZXIoIjMiKTt2YXIgZT10aGlzLngudG9CaWdJbnRlZ2VyKCk7dmFyIG49dGhpcy55LnRvQmlnSW50ZWdlcigpO3ZhciBjPWwueC50b0JpZ0ludGVnZXIoKTt2YXIgaz1sLnkudG9CaWdJbnRlZ2VyKCk7dmFyIG09by5zcXVhcmUoKTt2YXIgaT1tLm11bHRpcGx5KG8pO3ZhciBkPWUubXVsdGlwbHkobSk7dmFyIGc9cC5zcXVhcmUoKS5tdWx0aXBseSh0aGlzLnopO3ZhciBhPWcuc3VidHJhY3QoZC5zaGlmdExlZnQoMSkpLm11bHRpcGx5KGwueikuc3VidHJhY3QoaSkubXVsdGlwbHkobykubW9kKHRoaXMuY3VydmUucSk7dmFyIGg9ZC5tdWx0aXBseShqKS5tdWx0aXBseShwKS5zdWJ0cmFjdChuLm11bHRpcGx5KGkpKS5zdWJ0cmFjdChnLm11bHRpcGx5KHApKS5tdWx0aXBseShsLnopLmFkZChwLm11bHRpcGx5KGkpKS5tb2QodGhpcy5jdXJ2ZS5xKTt2YXIgZj1pLm11bHRpcGx5KHRoaXMueikubXVsdGlwbHkobC56KS5tb2QodGhpcy5jdXJ2ZS5xKTtyZXR1cm4gbmV3IEVDUG9pbnRGcCh0aGlzLmN1cnZlLHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIoYSksdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcihoKSxmKX1mdW5jdGlvbiBwb2ludEZwVHdpY2UoKXtpZih0aGlzLmlzSW5maW5pdHkoKSl7cmV0dXJuIHRoaXN9aWYodGhpcy55LnRvQmlnSW50ZWdlcigpLnNpZ251bSgpPT0wKXtyZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpfXZhciBnPW5ldyBCaWdJbnRlZ2VyKCIzIik7dmFyIGM9dGhpcy54LnRvQmlnSW50ZWdlcigpO3ZhciBoPXRoaXMueS50b0JpZ0ludGVnZXIoKTt2YXIgZT1oLm11bHRpcGx5KHRoaXMueik7dmFyIGo9ZS5tdWx0aXBseShoKS5tb2QodGhpcy5jdXJ2ZS5xKTt2YXIgaT10aGlzLmN1cnZlLmEudG9CaWdJbnRlZ2VyKCk7dmFyIGs9Yy5zcXVhcmUoKS5tdWx0aXBseShnKTtpZighQmlnSW50ZWdlci5aRVJPLmVxdWFscyhpKSl7az1rLmFkZCh0aGlzLnouc3F1YXJlKCkubXVsdGlwbHkoaSkpfWs9ay5tb2QodGhpcy5jdXJ2ZS5xKTt2YXIgYj1rLnNxdWFyZSgpLnN1YnRyYWN0KGMuc2hpZnRMZWZ0KDMpLm11bHRpcGx5KGopKS5zaGlmdExlZnQoMSkubXVsdGlwbHkoZSkubW9kKHRoaXMuY3VydmUucSk7dmFyIGY9ay5tdWx0aXBseShnKS5tdWx0aXBseShjKS5zdWJ0cmFjdChqLnNoaWZ0TGVmdCgxKSkuc2hpZnRMZWZ0KDIpLm11bHRpcGx5KGopLnN1YnRyYWN0KGsuc3F1YXJlKCkubXVsdGlwbHkoaykpLm1vZCh0aGlzLmN1cnZlLnEpO3ZhciBkPWUuc3F1YXJlKCkubXVsdGlwbHkoZSkuc2hpZnRMZWZ0KDMpLm1vZCh0aGlzLmN1cnZlLnEpO3JldHVybiBuZXcgRUNQb2ludEZwKHRoaXMuY3VydmUsdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcihiKSx0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKGYpLGQpfWZ1bmN0aW9uIHBvaW50RnBNdWx0aXBseShiKXtpZih0aGlzLmlzSW5maW5pdHkoKSl7cmV0dXJuIHRoaXN9aWYoYi5zaWdudW0oKT09MCl7cmV0dXJuIHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKX12YXIgZz1iO3ZhciBmPWcubXVsdGlwbHkobmV3IEJpZ0ludGVnZXIoIjMiKSk7dmFyIGw9dGhpcy5uZWdhdGUoKTt2YXIgZD10aGlzO3ZhciBjO2ZvcihjPWYuYml0TGVuZ3RoKCktMjtjPjA7LS1jKXtkPWQudHdpY2UoKTt2YXIgYT1mLnRlc3RCaXQoYyk7dmFyIGo9Zy50ZXN0Qml0KGMpO2lmKGEhPWope2Q9ZC5hZGQoYT90aGlzOmwpfX1yZXR1cm4gZH1mdW5jdGlvbiBwb2ludEZwTXVsdGlwbHlUd28oYyxhLGIpe3ZhciBkO2lmKGMuYml0TGVuZ3RoKCk+Yi5iaXRMZW5ndGgoKSl7ZD1jLmJpdExlbmd0aCgpLTF9ZWxzZXtkPWIuYml0TGVuZ3RoKCktMX12YXIgZj10aGlzLmN1cnZlLmdldEluZmluaXR5KCk7dmFyIGU9dGhpcy5hZGQoYSk7d2hpbGUoZD49MCl7Zj1mLnR3aWNlKCk7aWYoYy50ZXN0Qml0KGQpKXtpZihiLnRlc3RCaXQoZCkpe2Y9Zi5hZGQoZSl9ZWxzZXtmPWYuYWRkKHRoaXMpfX1lbHNle2lmKGIudGVzdEJpdChkKSl7Zj1mLmFkZChhKX19LS1kfXJldHVybiBmfUVDUG9pbnRGcC5wcm90b3R5cGUuZ2V0WD1wb2ludEZwR2V0WDtFQ1BvaW50RnAucHJvdG90eXBlLmdldFk9cG9pbnRGcEdldFk7RUNQb2ludEZwLnByb3RvdHlwZS5lcXVhbHM9cG9pbnRGcEVxdWFscztFQ1BvaW50RnAucHJvdG90eXBlLmlzSW5maW5pdHk9cG9pbnRGcElzSW5maW5pdHk7RUNQb2ludEZwLnByb3RvdHlwZS5uZWdhdGU9cG9pbnRGcE5lZ2F0ZTtFQ1BvaW50RnAucHJvdG90eXBlLmFkZD1wb2ludEZwQWRkO0VDUG9pbnRGcC5wcm90b3R5cGUudHdpY2U9cG9pbnRGcFR3aWNlO0VDUG9pbnRGcC5wcm90b3R5cGUubXVsdGlwbHk9cG9pbnRGcE11bHRpcGx5O0VDUG9pbnRGcC5wcm90b3R5cGUubXVsdGlwbHlUd289cG9pbnRGcE11bHRpcGx5VHdvO2Z1bmN0aW9uIEVDQ3VydmVGcChlLGQsYyl7dGhpcy5xPWU7dGhpcy5hPXRoaXMuZnJvbUJpZ0ludGVnZXIoZCk7dGhpcy5iPXRoaXMuZnJvbUJpZ0ludGVnZXIoYyk7dGhpcy5pbmZpbml0eT1uZXcgRUNQb2ludEZwKHRoaXMsbnVsbCxudWxsKX1mdW5jdGlvbiBjdXJ2ZUZwR2V0USgpe3JldHVybiB0aGlzLnF9ZnVuY3Rpb24gY3VydmVGcEdldEEoKXtyZXR1cm4gdGhpcy5hfWZ1bmN0aW9uIGN1cnZlRnBHZXRCKCl7cmV0dXJuIHRoaXMuYn1mdW5jdGlvbiBjdXJ2ZUZwRXF1YWxzKGEpe2lmKGE9PXRoaXMpe3JldHVybiB0cnVlfXJldHVybih0aGlzLnEuZXF1YWxzKGEucSkmJnRoaXMuYS5lcXVhbHMoYS5hKSYmdGhpcy5iLmVxdWFscyhhLmIpKX1mdW5jdGlvbiBjdXJ2ZUZwR2V0SW5maW5pdHkoKXtyZXR1cm4gdGhpcy5pbmZpbml0eX1mdW5jdGlvbiBjdXJ2ZUZwRnJvbUJpZ0ludGVnZXIoYSl7cmV0dXJuIG5ldyBFQ0ZpZWxkRWxlbWVudEZwKHRoaXMucSxhKX1mdW5jdGlvbiBjdXJ2ZUZwRGVjb2RlUG9pbnRIZXgoZCl7c3dpdGNoKHBhcnNlSW50KGQuc3Vic3RyKDAsMiksMTYpKXtjYXNlIDA6cmV0dXJuIHRoaXMuaW5maW5pdHk7Y2FzZSAyOmNhc2UgMzpyZXR1cm4gbnVsbDtjYXNlIDQ6Y2FzZSA2OmNhc2UgNzp2YXIgYT0oZC5sZW5ndGgtMikvMjt2YXIgYz1kLnN1YnN0cigyLGEpO3ZhciBiPWQuc3Vic3RyKGErMixhKTtyZXR1cm4gbmV3IEVDUG9pbnRGcCh0aGlzLHRoaXMuZnJvbUJpZ0ludGVnZXIobmV3IEJpZ0ludGVnZXIoYywxNikpLHRoaXMuZnJvbUJpZ0ludGVnZXIobmV3IEJpZ0ludGVnZXIoYiwxNikpKTtkZWZhdWx0OnJldHVybiBudWxsfX1FQ0N1cnZlRnAucHJvdG90eXBlLmdldFE9Y3VydmVGcEdldFE7RUNDdXJ2ZUZwLnByb3RvdHlwZS5nZXRBPWN1cnZlRnBHZXRBO0VDQ3VydmVGcC5wcm90b3R5cGUuZ2V0Qj1jdXJ2ZUZwR2V0QjtFQ0N1cnZlRnAucHJvdG90eXBlLmVxdWFscz1jdXJ2ZUZwRXF1YWxzO0VDQ3VydmVGcC5wcm90b3R5cGUuZ2V0SW5maW5pdHk9Y3VydmVGcEdldEluZmluaXR5O0VDQ3VydmVGcC5wcm90b3R5cGUuZnJvbUJpZ0ludGVnZXI9Y3VydmVGcEZyb21CaWdJbnRlZ2VyO0VDQ3VydmVGcC5wcm90b3R5cGUuZGVjb2RlUG9pbnRIZXg9Y3VydmVGcERlY29kZVBvaW50SGV4OwovKiEgKGMpIFN0ZWZhbiBUaG9tYXMgfCBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbmpzL2JpdGNvaW5qcy1saWIKICovCkVDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLmdldEJ5dGVMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5mbG9vcigodGhpcy50b0JpZ0ludGVnZXIoKS5iaXRMZW5ndGgoKSs3KS84KX07RUNQb2ludEZwLnByb3RvdHlwZS5nZXRFbmNvZGVkPWZ1bmN0aW9uKGMpe3ZhciBkPWZ1bmN0aW9uKGgsZil7dmFyIGc9aC50b0J5dGVBcnJheVVuc2lnbmVkKCk7aWYoZjxnLmxlbmd0aCl7Zz1nLnNsaWNlKGcubGVuZ3RoLWYpfWVsc2V7d2hpbGUoZj5nLmxlbmd0aCl7Zy51bnNoaWZ0KDApfX1yZXR1cm4gZ307dmFyIGE9dGhpcy5nZXRYKCkudG9CaWdJbnRlZ2VyKCk7dmFyIGU9dGhpcy5nZXRZKCkudG9CaWdJbnRlZ2VyKCk7dmFyIGI9ZChhLDMyKTtpZihjKXtpZihlLmlzRXZlbigpKXtiLnVuc2hpZnQoMil9ZWxzZXtiLnVuc2hpZnQoMyl9fWVsc2V7Yi51bnNoaWZ0KDQpO2I9Yi5jb25jYXQoZChlLDMyKSl9cmV0dXJuIGJ9O0VDUG9pbnRGcC5kZWNvZGVGcm9tPWZ1bmN0aW9uKGcsYyl7dmFyIGY9Y1swXTt2YXIgZT1jLmxlbmd0aC0xO3ZhciBkPWMuc2xpY2UoMSwxK2UvMik7dmFyIGI9Yy5zbGljZSgxK2UvMiwxK2UpO2QudW5zaGlmdCgwKTtiLnVuc2hpZnQoMCk7dmFyIGE9bmV3IEJpZ0ludGVnZXIoZCk7dmFyIGg9bmV3IEJpZ0ludGVnZXIoYik7cmV0dXJuIG5ldyBFQ1BvaW50RnAoZyxnLmZyb21CaWdJbnRlZ2VyKGEpLGcuZnJvbUJpZ0ludGVnZXIoaCkpfTtFQ1BvaW50RnAuZGVjb2RlRnJvbUhleD1mdW5jdGlvbihnLGMpe3ZhciBmPWMuc3Vic3RyKDAsMik7dmFyIGU9Yy5sZW5ndGgtMjt2YXIgZD1jLnN1YnN0cigyLGUvMik7dmFyIGI9Yy5zdWJzdHIoMitlLzIsZS8yKTt2YXIgYT1uZXcgQmlnSW50ZWdlcihkLDE2KTt2YXIgaD1uZXcgQmlnSW50ZWdlcihiLDE2KTtyZXR1cm4gbmV3IEVDUG9pbnRGcChnLGcuZnJvbUJpZ0ludGVnZXIoYSksZy5mcm9tQmlnSW50ZWdlcihoKSl9O0VDUG9pbnRGcC5wcm90b3R5cGUuYWRkMkQ9ZnVuY3Rpb24oYyl7aWYodGhpcy5pc0luZmluaXR5KCkpe3JldHVybiBjfWlmKGMuaXNJbmZpbml0eSgpKXtyZXR1cm4gdGhpc31pZih0aGlzLnguZXF1YWxzKGMueCkpe2lmKHRoaXMueS5lcXVhbHMoYy55KSl7cmV0dXJuIHRoaXMudHdpY2UoKX1yZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpfXZhciBnPWMueC5zdWJ0cmFjdCh0aGlzLngpO3ZhciBlPWMueS5zdWJ0cmFjdCh0aGlzLnkpO3ZhciBhPWUuZGl2aWRlKGcpO3ZhciBkPWEuc3F1YXJlKCkuc3VidHJhY3QodGhpcy54KS5zdWJ0cmFjdChjLngpO3ZhciBmPWEubXVsdGlwbHkodGhpcy54LnN1YnRyYWN0KGQpKS5zdWJ0cmFjdCh0aGlzLnkpO3JldHVybiBuZXcgRUNQb2ludEZwKHRoaXMuY3VydmUsZCxmKX07RUNQb2ludEZwLnByb3RvdHlwZS50d2ljZTJEPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0luZmluaXR5KCkpe3JldHVybiB0aGlzfWlmKHRoaXMueS50b0JpZ0ludGVnZXIoKS5zaWdudW0oKT09MCl7cmV0dXJuIHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKX12YXIgYj10aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKEJpZ0ludGVnZXIudmFsdWVPZigyKSk7dmFyIGU9dGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcihCaWdJbnRlZ2VyLnZhbHVlT2YoMykpO3ZhciBhPXRoaXMueC5zcXVhcmUoKS5tdWx0aXBseShlKS5hZGQodGhpcy5jdXJ2ZS5hKS5kaXZpZGUodGhpcy55Lm11bHRpcGx5KGIpKTt2YXIgYz1hLnNxdWFyZSgpLnN1YnRyYWN0KHRoaXMueC5tdWx0aXBseShiKSk7dmFyIGQ9YS5tdWx0aXBseSh0aGlzLnguc3VidHJhY3QoYykpLnN1YnRyYWN0KHRoaXMueSk7cmV0dXJuIG5ldyBFQ1BvaW50RnAodGhpcy5jdXJ2ZSxjLGQpfTtFQ1BvaW50RnAucHJvdG90eXBlLm11bHRpcGx5MkQ9ZnVuY3Rpb24oYil7aWYodGhpcy5pc0luZmluaXR5KCkpe3JldHVybiB0aGlzfWlmKGIuc2lnbnVtKCk9PTApe3JldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCl9dmFyIGc9Yjt2YXIgZj1nLm11bHRpcGx5KG5ldyBCaWdJbnRlZ2VyKCIzIikpO3ZhciBsPXRoaXMubmVnYXRlKCk7dmFyIGQ9dGhpczt2YXIgYztmb3IoYz1mLmJpdExlbmd0aCgpLTI7Yz4wOy0tYyl7ZD1kLnR3aWNlKCk7dmFyIGE9Zi50ZXN0Qml0KGMpO3ZhciBqPWcudGVzdEJpdChjKTtpZihhIT1qKXtkPWQuYWRkMkQoYT90aGlzOmwpfX1yZXR1cm4gZH07RUNQb2ludEZwLnByb3RvdHlwZS5pc09uQ3VydmU9ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmdldFgoKS50b0JpZ0ludGVnZXIoKTt2YXIgaT10aGlzLmdldFkoKS50b0JpZ0ludGVnZXIoKTt2YXIgZj10aGlzLmN1cnZlLmdldEEoKS50b0JpZ0ludGVnZXIoKTt2YXIgYz10aGlzLmN1cnZlLmdldEIoKS50b0JpZ0ludGVnZXIoKTt2YXIgaD10aGlzLmN1cnZlLmdldFEoKTt2YXIgZT1pLm11bHRpcGx5KGkpLm1vZChoKTt2YXIgZz1kLm11bHRpcGx5KGQpLm11bHRpcGx5KGQpLmFkZChmLm11bHRpcGx5KGQpKS5hZGQoYykubW9kKGgpO3JldHVybiBlLmVxdWFscyhnKX07RUNQb2ludEZwLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiIoIit0aGlzLmdldFgoKS50b0JpZ0ludGVnZXIoKS50b1N0cmluZygpKyIsIit0aGlzLmdldFkoKS50b0JpZ0ludGVnZXIoKS50b1N0cmluZygpKyIpIn07RUNQb2ludEZwLnByb3RvdHlwZS52YWxpZGF0ZT1mdW5jdGlvbigpe3ZhciBjPXRoaXMuY3VydmUuZ2V0USgpO2lmKHRoaXMuaXNJbmZpbml0eSgpKXt0aHJvdyBuZXcgRXJyb3IoIlBvaW50IGlzIGF0IGluZmluaXR5LiIpfXZhciBhPXRoaXMuZ2V0WCgpLnRvQmlnSW50ZWdlcigpO3ZhciBiPXRoaXMuZ2V0WSgpLnRvQmlnSW50ZWdlcigpO2lmKGEuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKTwwfHxhLmNvbXBhcmVUbyhjLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKSk+MCl7dGhyb3cgbmV3IEVycm9yKCJ4IGNvb3JkaW5hdGUgb3V0IG9mIGJvdW5kcyIpfWlmKGIuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKTwwfHxiLmNvbXBhcmVUbyhjLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKSk+MCl7dGhyb3cgbmV3IEVycm9yKCJ5IGNvb3JkaW5hdGUgb3V0IG9mIGJvdW5kcyIpfWlmKCF0aGlzLmlzT25DdXJ2ZSgpKXt0aHJvdyBuZXcgRXJyb3IoIlBvaW50IGlzIG5vdCBvbiB0aGUgY3VydmUuIil9aWYodGhpcy5tdWx0aXBseShjKS5pc0luZmluaXR5KCkpe3Rocm93IG5ldyBFcnJvcigiUG9pbnQgaXMgbm90IGEgc2NhbGFyIG11bHRpcGxlIG9mIEcuIil9cmV0dXJuIHRydWV9OwovKiEgYXNuMS0xLjAuOS5qcyAoYykgMjAxMy0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjE9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xKXtLSlVSLmFzbjE9e319S0pVUi5hc24xLkFTTjFVdGlsPW5ldyBmdW5jdGlvbigpe3RoaXMuaW50ZWdlclRvQnl0ZUhleD1mdW5jdGlvbihhKXt2YXIgYj1hLnRvU3RyaW5nKDE2KTtpZigoYi5sZW5ndGglMik9PTEpe2I9IjAiK2J9cmV0dXJuIGJ9O3RoaXMuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXg9ZnVuY3Rpb24oail7dmFyIGY9ai50b1N0cmluZygxNik7aWYoZi5zdWJzdHIoMCwxKSE9Ii0iKXtpZihmLmxlbmd0aCUyPT0xKXtmPSIwIitmfWVsc2V7aWYoIWYubWF0Y2goL15bMC03XS8pKXtmPSIwMCIrZn19fWVsc2V7dmFyIGE9Zi5zdWJzdHIoMSk7dmFyIGU9YS5sZW5ndGg7aWYoZSUyPT0xKXtlKz0xfWVsc2V7aWYoIWYubWF0Y2goL15bMC03XS8pKXtlKz0yfX12YXIgZz0iIjtmb3IodmFyIGQ9MDtkPGU7ZCsrKXtnKz0iZiJ9dmFyIGM9bmV3IEJpZ0ludGVnZXIoZywxNik7dmFyIGI9Yy54b3IoaikuYWRkKEJpZ0ludGVnZXIuT05FKTtmPWIudG9TdHJpbmcoMTYpLnJlcGxhY2UoL14tLywiIil9cmV0dXJuIGZ9O3RoaXMuZ2V0UEVNU3RyaW5nRnJvbUhleD1mdW5jdGlvbihhLGIpe3ZhciBjPUtKVVIuYXNuMTt2YXIgZj1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGEpO3ZhciBkPUNyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KGYpO3ZhciBlPWQucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTtlPWUucmVwbGFjZSgvXHJcbiQvLCIiKTtyZXR1cm4iLS0tLS1CRUdJTiAiK2IrIi0tLS0tXHJcbiIrZSsiXHJcbi0tLS0tRU5EICIrYisiLS0tLS1cclxuIn07dGhpcy5uZXdPYmplY3Q9ZnVuY3Rpb24oYil7dmFyIGc9S0pVUi5hc24xO3ZhciBrPU9iamVjdC5rZXlzKGIpO2lmKGsubGVuZ3RoIT0xKXt0aHJvdyJrZXkgb2YgcGFyYW0gc2hhbGwgYmUgb25seSBvbmUuIn12YXIgaj1rWzBdO2lmKCI6Ym9vbDppbnQ6Yml0c3RyOm9jdHN0cjpudWxsOm9pZDplbnVtOnV0ZjhzdHI6bnVtc3RyOnBybnN0cjp0ZWxzdHI6aWE1c3RyOnV0Y3RpbWU6Z2VudGltZTpzZXE6c2V0OnRhZzoiLmluZGV4T2YoIjoiK2orIjoiKT09LTEpe3Rocm93InVuZGVmaW5lZCBrZXk6ICIran1pZihqPT0iYm9vbCIpe3JldHVybiBuZXcgZy5ERVJCb29sZWFuKGJbal0pfWlmKGo9PSJpbnQiKXtyZXR1cm4gbmV3IGcuREVSSW50ZWdlcihiW2pdKX1pZihqPT0iYml0c3RyIil7cmV0dXJuIG5ldyBnLkRFUkJpdFN0cmluZyhiW2pdKX1pZihqPT0ib2N0c3RyIil7cmV0dXJuIG5ldyBnLkRFUk9jdGV0U3RyaW5nKGJbal0pfWlmKGo9PSJudWxsIil7cmV0dXJuIG5ldyBnLkRFUk51bGwoYltqXSl9aWYoaj09Im9pZCIpe3JldHVybiBuZXcgZy5ERVJPYmplY3RJZGVudGlmaWVyKGJbal0pfWlmKGo9PSJlbnVtIil7cmV0dXJuIG5ldyBnLkRFUkVudW1lcmF0ZWQoYltqXSl9aWYoaj09InV0ZjhzdHIiKXtyZXR1cm4gbmV3IGcuREVSVVRGOFN0cmluZyhiW2pdKX1pZihqPT0ibnVtc3RyIil7cmV0dXJuIG5ldyBnLkRFUk51bWVyaWNTdHJpbmcoYltqXSl9aWYoaj09InBybnN0ciIpe3JldHVybiBuZXcgZy5ERVJQcmludGFibGVTdHJpbmcoYltqXSl9aWYoaj09InRlbHN0ciIpe3JldHVybiBuZXcgZy5ERVJUZWxldGV4U3RyaW5nKGJbal0pfWlmKGo9PSJpYTVzdHIiKXtyZXR1cm4gbmV3IGcuREVSSUE1U3RyaW5nKGJbal0pfWlmKGo9PSJ1dGN0aW1lIil7cmV0dXJuIG5ldyBnLkRFUlVUQ1RpbWUoYltqXSl9aWYoaj09ImdlbnRpbWUiKXtyZXR1cm4gbmV3IGcuREVSR2VuZXJhbGl6ZWRUaW1lKGJbal0pfWlmKGo9PSJzZXEiKXt2YXIgbT1iW2pdO3ZhciBoPVtdO2Zvcih2YXIgZT0wO2U8bS5sZW5ndGg7ZSsrKXt2YXIgbD1nLkFTTjFVdGlsLm5ld09iamVjdChtW2VdKTtoLnB1c2gobCl9cmV0dXJuIG5ldyBnLkRFUlNlcXVlbmNlKHthcnJheTpofSl9aWYoaj09InNldCIpe3ZhciBtPWJbal07dmFyIGg9W107Zm9yKHZhciBlPTA7ZTxtLmxlbmd0aDtlKyspe3ZhciBsPWcuQVNOMVV0aWwubmV3T2JqZWN0KG1bZV0pO2gucHVzaChsKX1yZXR1cm4gbmV3IGcuREVSU2V0KHthcnJheTpofSl9aWYoaj09InRhZyIpe3ZhciBjPWJbal07aWYoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGMpPT09IltvYmplY3QgQXJyYXldIiYmYy5sZW5ndGg9PTMpe3ZhciBkPWcuQVNOMVV0aWwubmV3T2JqZWN0KGNbMl0pO3JldHVybiBuZXcgZy5ERVJUYWdnZWRPYmplY3Qoe3RhZzpjWzBdLGV4cGxpY2l0OmNbMV0sb2JqOmR9KX1lbHNle3ZhciBmPXt9O2lmKGMuZXhwbGljaXQhPT11bmRlZmluZWQpe2YuZXhwbGljaXQ9Yy5leHBsaWNpdH1pZihjLnRhZyE9PXVuZGVmaW5lZCl7Zi50YWc9Yy50YWd9aWYoYy5vYmo9PT11bmRlZmluZWQpe3Rocm93Im9iaiBzaGFsbCBiZSBzcGVjaWZpZWQgZm9yICd0YWcnLiJ9Zi5vYmo9Zy5BU04xVXRpbC5uZXdPYmplY3QoYy5vYmopO3JldHVybiBuZXcgZy5ERVJUYWdnZWRPYmplY3QoZil9fX07dGhpcy5qc29uVG9BU04xSEVYPWZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubmV3T2JqZWN0KGIpO3JldHVybiBhLmdldEVuY29kZWRIZXgoKX19O0tKVVIuYXNuMS5BU04xVXRpbC5vaWRIZXhUb0ludD1mdW5jdGlvbihhKXt2YXIgaj0iIjt2YXIgaz1wYXJzZUludChhLnN1YnN0cigwLDIpLDE2KTt2YXIgZD1NYXRoLmZsb29yKGsvNDApO3ZhciBjPWslNDA7dmFyIGo9ZCsiLiIrYzt2YXIgZT0iIjtmb3IodmFyIGY9MjtmPGEubGVuZ3RoO2YrPTIpe3ZhciBnPXBhcnNlSW50KGEuc3Vic3RyKGYsMiksMTYpO3ZhciBoPSgiMDAwMDAwMDAiK2cudG9TdHJpbmcoMikpLnNsaWNlKC04KTtlPWUraC5zdWJzdHIoMSw3KTtpZihoLnN1YnN0cigwLDEpPT0iMCIpe3ZhciBiPW5ldyBCaWdJbnRlZ2VyKGUsMik7aj1qKyIuIitiLnRvU3RyaW5nKDEwKTtlPSIifX1yZXR1cm4gan07S0pVUi5hc24xLkFTTjFVdGlsLm9pZEludFRvSGV4PWZ1bmN0aW9uKGYpe3ZhciBlPWZ1bmN0aW9uKGEpe3ZhciBrPWEudG9TdHJpbmcoMTYpO2lmKGsubGVuZ3RoPT0xKXtrPSIwIitrfXJldHVybiBrfTt2YXIgZD1mdW5jdGlvbihvKXt2YXIgbj0iIjt2YXIgaz1uZXcgQmlnSW50ZWdlcihvLDEwKTt2YXIgYT1rLnRvU3RyaW5nKDIpO3ZhciBsPTctYS5sZW5ndGglNztpZihsPT03KXtsPTB9dmFyIHE9IiI7Zm9yKHZhciBtPTA7bTxsO20rKyl7cSs9IjAifWE9cSthO2Zvcih2YXIgbT0wO208YS5sZW5ndGgtMTttKz03KXt2YXIgcD1hLnN1YnN0cihtLDcpO2lmKG0hPWEubGVuZ3RoLTcpe3A9IjEiK3B9bis9ZShwYXJzZUludChwLDIpKX1yZXR1cm4gbn07aWYoIWYubWF0Y2goL15bMC05Ll0rJC8pKXt0aHJvdyJtYWxmb3JtZWQgb2lkIHN0cmluZzogIitmfXZhciBnPSIiO3ZhciBiPWYuc3BsaXQoIi4iKTt2YXIgaj1wYXJzZUludChiWzBdKSo0MCtwYXJzZUludChiWzFdKTtnKz1lKGopO2Iuc3BsaWNlKDAsMik7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe2crPWQoYltjXSl9cmV0dXJuIGd9O0tKVVIuYXNuMS5BU04xT2JqZWN0PWZ1bmN0aW9uKCl7dmFyIGM9dHJ1ZTt2YXIgYj1udWxsO3ZhciBkPSIwMCI7dmFyIGU9IjAwIjt2YXIgYT0iIjt0aGlzLmdldExlbmd0aEhleEZyb21WYWx1ZT1mdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLmhWPT0idW5kZWZpbmVkInx8dGhpcy5oVj09bnVsbCl7dGhyb3cidGhpcy5oViBpcyBudWxsIG9yIHVuZGVmaW5lZC4ifWlmKHRoaXMuaFYubGVuZ3RoJTI9PTEpe3Rocm93InZhbHVlIGhleCBtdXN0IGJlIGV2ZW4gbGVuZ3RoOiBuPSIrYS5sZW5ndGgrIix2PSIrdGhpcy5oVn12YXIgaT10aGlzLmhWLmxlbmd0aC8yO3ZhciBoPWkudG9TdHJpbmcoMTYpO2lmKGgubGVuZ3RoJTI9PTEpe2g9IjAiK2h9aWYoaTwxMjgpe3JldHVybiBofWVsc2V7dmFyIGc9aC5sZW5ndGgvMjtpZihnPjE1KXt0aHJvdyJBU04uMSBsZW5ndGggdG9vIGxvbmcgdG8gcmVwcmVzZW50IGJ5IDh4OiBuID0gIitpLnRvU3RyaW5nKDE2KX12YXIgZj0xMjgrZztyZXR1cm4gZi50b1N0cmluZygxNikraH19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuaFRMVj09bnVsbHx8dGhpcy5pc01vZGlmaWVkKXt0aGlzLmhWPXRoaXMuZ2V0RnJlc2hWYWx1ZUhleCgpO3RoaXMuaEw9dGhpcy5nZXRMZW5ndGhIZXhGcm9tVmFsdWUoKTt0aGlzLmhUTFY9dGhpcy5oVCt0aGlzLmhMK3RoaXMuaFY7dGhpcy5pc01vZGlmaWVkPWZhbHNlfXJldHVybiB0aGlzLmhUTFZ9O3RoaXMuZ2V0VmFsdWVIZXg9ZnVuY3Rpb24oKXt0aGlzLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVn07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIiJ9fTtLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmc9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYj1udWxsO3ZhciBhPW51bGw7dGhpcy5nZXRTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zfTt0aGlzLnNldFN0cmluZz1mdW5jdGlvbihkKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLnM9ZDt0aGlzLmhWPXN0b2hleCh0aGlzLnMpfTt0aGlzLnNldFN0cmluZ0hleD1mdW5jdGlvbihkKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLnM9bnVsbDt0aGlzLmhWPWR9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjPT0ic3RyaW5nIil7dGhpcy5zZXRTdHJpbmcoYyl9ZWxzZXtpZih0eXBlb2YgYy5zdHIhPSJ1bmRlZmluZWQiKXt0aGlzLnNldFN0cmluZyhjLnN0cil9ZWxzZXtpZih0eXBlb2YgYy5oZXghPSJ1bmRlZmluZWQiKXt0aGlzLnNldFN0cmluZ0hleChjLmhleCl9fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5ERVJBYnN0cmFjdFRpbWU9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLkRFUkFic3RyYWN0VGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgYT1udWxsO3RoaXMubG9jYWxEYXRlVG9VVEM9ZnVuY3Rpb24oZil7dXRjPWYuZ2V0VGltZSgpKyhmLmdldFRpbWV6b25lT2Zmc2V0KCkqNjAwMDApO3ZhciBlPW5ldyBEYXRlKHV0Yyk7cmV0dXJuIGV9O3RoaXMuZm9ybWF0RGF0ZT1mdW5jdGlvbihtLG8sZSl7dmFyIGc9dGhpcy56ZXJvUGFkZGluZzt2YXIgbj10aGlzLmxvY2FsRGF0ZVRvVVRDKG0pO3ZhciBwPVN0cmluZyhuLmdldEZ1bGxZZWFyKCkpO2lmKG89PSJ1dGMiKXtwPXAuc3Vic3RyKDIsMil9dmFyIGw9ZyhTdHJpbmcobi5nZXRNb250aCgpKzEpLDIpO3ZhciBxPWcoU3RyaW5nKG4uZ2V0RGF0ZSgpKSwyKTt2YXIgaD1nKFN0cmluZyhuLmdldEhvdXJzKCkpLDIpO3ZhciBpPWcoU3RyaW5nKG4uZ2V0TWludXRlcygpKSwyKTt2YXIgaj1nKFN0cmluZyhuLmdldFNlY29uZHMoKSksMik7dmFyIHI9cCtsK3EraCtpK2o7aWYoZT09PXRydWUpe3ZhciBmPW4uZ2V0TWlsbGlzZWNvbmRzKCk7aWYoZiE9MCl7dmFyIGs9ZyhTdHJpbmcoZiksMyk7az1rLnJlcGxhY2UoL1swXSskLywiIik7cj1yKyIuIitrfX1yZXR1cm4gcisiWiJ9O3RoaXMuemVyb1BhZGRpbmc9ZnVuY3Rpb24oZSxkKXtpZihlLmxlbmd0aD49ZCl7cmV0dXJuIGV9cmV0dXJuIG5ldyBBcnJheShkLWUubGVuZ3RoKzEpLmpvaW4oIjAiKStlfTt0aGlzLmdldFN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN9O3RoaXMuc2V0U3RyaW5nPWZ1bmN0aW9uKGQpe3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMucz1kO3RoaXMuaFY9c3RvaGV4KGQpfTt0aGlzLnNldEJ5RGF0ZVZhbHVlPWZ1bmN0aW9uKGgsaixlLGQsZixnKXt2YXIgaT1uZXcgRGF0ZShEYXRlLlVUQyhoLGotMSxlLGQsZixnLDApKTt0aGlzLnNldEJ5RGF0ZShpKX07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQWJzdHJhY3RUaW1lLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS5ERVJBYnN0cmFjdFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9bnVsbDt0aGlzLnNldEJ5QVNOMU9iamVjdEFycmF5PWZ1bmN0aW9uKGMpe3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMuYXNuMUFycmF5PWN9O3RoaXMuYXBwZW5kQVNOMU9iamVjdD1mdW5jdGlvbihjKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLmFzbjFBcnJheS5wdXNoKGMpfTt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLmFycmF5IT0idW5kZWZpbmVkIil7dGhpcy5hc24xQXJyYXk9Yi5hcnJheX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuREVSQm9vbGVhbj1mdW5jdGlvbigpe0tKVVIuYXNuMS5ERVJCb29sZWFuLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSIwMSI7dGhpcy5oVExWPSIwMTAxZmYifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQm9vbGVhbixLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUkludGVnZXI9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUkludGVnZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuaFQ9IjAyIjt0aGlzLnNldEJ5QmlnSW50ZWdlcj1mdW5jdGlvbihiKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLmhWPUtKVVIuYXNuMS5BU04xVXRpbC5iaWdJbnRUb01pblR3b3NDb21wbGVtZW50c0hleChiKX07dGhpcy5zZXRCeUludGVnZXI9ZnVuY3Rpb24oYyl7dmFyIGI9bmV3IEJpZ0ludGVnZXIoU3RyaW5nKGMpLDEwKTt0aGlzLnNldEJ5QmlnSW50ZWdlcihiKX07dGhpcy5zZXRWYWx1ZUhleD1mdW5jdGlvbihiKXt0aGlzLmhWPWJ9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfTtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLmJpZ2ludCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlCaWdJbnRlZ2VyKGEuYmlnaW50KX1lbHNle2lmKHR5cGVvZiBhWyJpbnQiXSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlJbnRlZ2VyKGFbImludCJdKX1lbHNle2lmKHR5cGVvZiBhPT0ibnVtYmVyIil7dGhpcy5zZXRCeUludGVnZXIoYSl9ZWxzZXtpZih0eXBlb2YgYS5oZXghPSJ1bmRlZmluZWQiKXt0aGlzLnNldFZhbHVlSGV4KGEuaGV4KX19fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSSW50ZWdlcixLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUkJpdFN0cmluZz1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSQml0U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSIwMyI7dGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHM9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5oVj1ifTt0aGlzLnNldFVudXNlZEJpdHNBbmRIZXhWYWx1ZT1mdW5jdGlvbihiLGQpe2lmKGI8MHx8NzxiKXt0aHJvdyJ1bnVzZWQgYml0cyBzaGFsbCBiZSBmcm9tIDAgdG8gNzogdSA9ICIrYn12YXIgYz0iMCIrYjt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLmhWPWMrZH07dGhpcy5zZXRCeUJpbmFyeVN0cmluZz1mdW5jdGlvbihlKXtlPWUucmVwbGFjZSgvMCskLywiIik7dmFyIGY9OC1lLmxlbmd0aCU4O2lmKGY9PTgpe2Y9MH1mb3IodmFyIGc9MDtnPD1mO2crKyl7ZSs9IjAifXZhciBqPSIiO2Zvcih2YXIgZz0wO2c8ZS5sZW5ndGgtMTtnKz04KXt2YXIgZD1lLnN1YnN0cihnLDgpO3ZhciBjPXBhcnNlSW50KGQsMikudG9TdHJpbmcoMTYpO2lmKGMubGVuZ3RoPT0xKXtjPSIwIitjfWorPWN9dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5oVj0iMCIrZitqfTt0aGlzLnNldEJ5Qm9vbGVhbkFycmF5PWZ1bmN0aW9uKGQpe3ZhciBjPSIiO2Zvcih2YXIgYj0wO2I8ZC5sZW5ndGg7YisrKXtpZihkW2JdPT10cnVlKXtjKz0iMSJ9ZWxzZXtjKz0iMCJ9fXRoaXMuc2V0QnlCaW5hcnlTdHJpbmcoYyl9O3RoaXMubmV3RmFsc2VBcnJheT1mdW5jdGlvbihkKXt2YXIgYj1uZXcgQXJyYXkoZCk7Zm9yKHZhciBjPTA7YzxkO2MrKyl7YltjXT1mYWxzZX1yZXR1cm4gYn07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGE9PSJzdHJpbmciJiZhLnRvTG93ZXJDYXNlKCkubWF0Y2goL15bMC05YS1mXSskLykpe3RoaXMuc2V0SGV4VmFsdWVJbmNsdWRpbmdVbnVzZWRCaXRzKGEpfWVsc2V7aWYodHlwZW9mIGEuaGV4IT0idW5kZWZpbmVkIil7dGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHMoYS5oZXgpfWVsc2V7aWYodHlwZW9mIGEuYmluIT0idW5kZWZpbmVkIil7dGhpcy5zZXRCeUJpbmFyeVN0cmluZyhhLmJpbil9ZWxzZXtpZih0eXBlb2YgYS5hcnJheSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlCb29sZWFuQXJyYXkoYS5hcnJheSl9fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkJpdFN0cmluZyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUk9jdGV0U3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJPY3RldFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIwNCJ9O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJPY3RldFN0cmluZyxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO0tKVVIuYXNuMS5ERVJOdWxsPWZ1bmN0aW9uKCl7S0pVUi5hc24xLkRFUk51bGwuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuaFQ9IjA1Ijt0aGlzLmhUTFY9IjA1MDAifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSTnVsbCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXI9ZnVuY3Rpb24oYyl7dmFyIGI9ZnVuY3Rpb24oZCl7dmFyIGU9ZC50b1N0cmluZygxNik7aWYoZS5sZW5ndGg9PTEpe2U9IjAiK2V9cmV0dXJuIGV9O3ZhciBhPWZ1bmN0aW9uKGspe3ZhciBqPSIiO3ZhciBlPW5ldyBCaWdJbnRlZ2VyKGssMTApO3ZhciBkPWUudG9TdHJpbmcoMik7dmFyIGY9Ny1kLmxlbmd0aCU3O2lmKGY9PTcpe2Y9MH12YXIgbT0iIjtmb3IodmFyIGc9MDtnPGY7ZysrKXttKz0iMCJ9ZD1tK2Q7Zm9yKHZhciBnPTA7ZzxkLmxlbmd0aC0xO2crPTcpe3ZhciBsPWQuc3Vic3RyKGcsNyk7aWYoZyE9ZC5sZW5ndGgtNyl7bD0iMSIrbH1qKz1iKHBhcnNlSW50KGwsMikpfXJldHVybiBqfTtLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5oVD0iMDYiO3RoaXMuc2V0VmFsdWVIZXg9ZnVuY3Rpb24oZCl7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5zPW51bGw7dGhpcy5oVj1kfTt0aGlzLnNldFZhbHVlT2lkU3RyaW5nPWZ1bmN0aW9uKGYpe2lmKCFmLm1hdGNoKC9eWzAtOS5dKyQvKSl7dGhyb3cibWFsZm9ybWVkIG9pZCBzdHJpbmc6ICIrZn12YXIgZz0iIjt2YXIgZD1mLnNwbGl0KCIuIik7dmFyIGo9cGFyc2VJbnQoZFswXSkqNDArcGFyc2VJbnQoZFsxXSk7Zys9YihqKTtkLnNwbGljZSgwLDIpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXtnKz1hKGRbZV0pfXRoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMucz1udWxsO3RoaXMuaFY9Z307dGhpcy5zZXRWYWx1ZU5hbWU9ZnVuY3Rpb24oZSl7aWYodHlwZW9mIEtKVVIuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZExpc3RbZV0hPSJ1bmRlZmluZWQiKXt2YXIgZD1LSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0W2VdO3RoaXMuc2V0VmFsdWVPaWRTdHJpbmcoZCl9ZWxzZXt0aHJvdyJERVJPYmplY3RJZGVudGlmaWVyIG9pZE5hbWUgdW5kZWZpbmVkOiAiK2V9fTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYz09InN0cmluZyImJmMubWF0Y2goL15bMC0yXS5bMC05Ll0rJC8pKXt0aGlzLnNldFZhbHVlT2lkU3RyaW5nKGMpfWVsc2V7aWYoS0pVUi5hc24xLng1MDkuT0lELm5hbWUyb2lkTGlzdFtjXSE9PXVuZGVmaW5lZCl7dGhpcy5zZXRWYWx1ZU9pZFN0cmluZyhLSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0W2NdKX1lbHNle2lmKHR5cGVvZiBjLm9pZCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0VmFsdWVPaWRTdHJpbmcoYy5vaWQpfWVsc2V7aWYodHlwZW9mIGMuaGV4IT0idW5kZWZpbmVkIil7dGhpcy5zZXRWYWx1ZUhleChjLmhleCl9ZWxzZXtpZih0eXBlb2YgYy5uYW1lIT0idW5kZWZpbmVkIil7dGhpcy5zZXRWYWx1ZU5hbWUoYy5uYW1lKX19fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXIsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5ERVJFbnVtZXJhdGVkPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJFbnVtZXJhdGVkLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSIwYSI7dGhpcy5zZXRCeUJpZ0ludGVnZXI9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5oVj1LSlVSLmFzbjEuQVNOMVV0aWwuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXgoYil9O3RoaXMuc2V0QnlJbnRlZ2VyPWZ1bmN0aW9uKGMpe3ZhciBiPW5ldyBCaWdJbnRlZ2VyKFN0cmluZyhjKSwxMCk7dGhpcy5zZXRCeUJpZ0ludGVnZXIoYil9O3RoaXMuc2V0VmFsdWVIZXg9ZnVuY3Rpb24oYil7dGhpcy5oVj1ifTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYVsiaW50Il0hPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5SW50ZWdlcihhWyJpbnQiXSl9ZWxzZXtpZih0eXBlb2YgYT09Im51bWJlciIpe3RoaXMuc2V0QnlJbnRlZ2VyKGEpfWVsc2V7aWYodHlwZW9mIGEuaGV4IT0idW5kZWZpbmVkIil7dGhpcy5zZXRWYWx1ZUhleChhLmhleCl9fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSRW51bWVyYXRlZCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUlVURjhTdHJpbmc9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUlVURjhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMGMifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSVVRGOFN0cmluZyxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO0tKVVIuYXNuMS5ERVJOdW1lcmljU3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJOdW1lcmljU3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjEyIn07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUk51bWVyaWNTdHJpbmcsS0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtLSlVSLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJQcmludGFibGVTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMTMifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nLEtKVVIuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7S0pVUi5hc24xLkRFUlRlbGV0ZXhTdHJpbmc9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUlRlbGV0ZXhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMTQifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSVGVsZXRleFN0cmluZyxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO0tKVVIuYXNuMS5ERVJJQTVTdHJpbmc9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUklBNVN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIxNiJ9O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJJQTVTdHJpbmcsS0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtLSlVSLmFzbjEuREVSVVRDVGltZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSVVRDVGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIxNyI7dGhpcy5zZXRCeURhdGU9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5kYXRlPWI7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsInV0YyIpO3RoaXMuaFY9c3RvaGV4KHRoaXMucyl9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLmRhdGU9PSJ1bmRlZmluZWQiJiZ0eXBlb2YgdGhpcy5zPT0idW5kZWZpbmVkIil7dGhpcy5kYXRlPW5ldyBEYXRlKCk7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsInV0YyIpO3RoaXMuaFY9c3RvaGV4KHRoaXMucyl9cmV0dXJuIHRoaXMuaFZ9O2lmKGEhPT11bmRlZmluZWQpe2lmKGEuc3RyIT09dW5kZWZpbmVkKXt0aGlzLnNldFN0cmluZyhhLnN0cil9ZWxzZXtpZih0eXBlb2YgYT09InN0cmluZyImJmEubWF0Y2goL15bMC05XXsxMn1aJC8pKXt0aGlzLnNldFN0cmluZyhhKX1lbHNle2lmKGEuaGV4IT09dW5kZWZpbmVkKXt0aGlzLnNldFN0cmluZ0hleChhLmhleCl9ZWxzZXtpZihhLmRhdGUhPT11bmRlZmluZWQpe3RoaXMuc2V0QnlEYXRlKGEuZGF0ZSl9fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUlVUQ1RpbWUsS0pVUi5hc24xLkRFUkFic3RyYWN0VGltZSk7S0pVUi5hc24xLkRFUkdlbmVyYWxpemVkVGltZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjE4Ijt0aGlzLndpdGhNaWxsaXM9ZmFsc2U7dGhpcy5zZXRCeURhdGU9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5kYXRlPWI7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsImdlbiIsdGhpcy53aXRoTWlsbGlzKTt0aGlzLmhWPXN0b2hleCh0aGlzLnMpfTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmRhdGU9PT11bmRlZmluZWQmJnRoaXMucz09PXVuZGVmaW5lZCl7dGhpcy5kYXRlPW5ldyBEYXRlKCk7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsImdlbiIsdGhpcy53aXRoTWlsbGlzKTt0aGlzLmhWPXN0b2hleCh0aGlzLnMpfXJldHVybiB0aGlzLmhWfTtpZihhIT09dW5kZWZpbmVkKXtpZihhLnN0ciE9PXVuZGVmaW5lZCl7dGhpcy5zZXRTdHJpbmcoYS5zdHIpfWVsc2V7aWYodHlwZW9mIGE9PSJzdHJpbmciJiZhLm1hdGNoKC9eWzAtOV17MTR9WiQvKSl7dGhpcy5zZXRTdHJpbmcoYSl9ZWxzZXtpZihhLmhleCE9PXVuZGVmaW5lZCl7dGhpcy5zZXRTdHJpbmdIZXgoYS5oZXgpfWVsc2V7aWYoYS5kYXRlIT09dW5kZWZpbmVkKXt0aGlzLnNldEJ5RGF0ZShhLmRhdGUpfX19fWlmKGEubWlsbGlzPT09dHJ1ZSl7dGhpcy53aXRoTWlsbGlzPXRydWV9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkdlbmVyYWxpemVkVGltZSxLSlVSLmFzbjEuREVSQWJzdHJhY3RUaW1lKTtLSlVSLmFzbjEuREVSU2VxdWVuY2U9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUlNlcXVlbmNlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjMwIjt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXt2YXIgYz0iIjtmb3IodmFyIGI9MDtiPHRoaXMuYXNuMUFycmF5Lmxlbmd0aDtiKyspe3ZhciBkPXRoaXMuYXNuMUFycmF5W2JdO2MrPWQuZ2V0RW5jb2RlZEhleCgpfXRoaXMuaFY9YztyZXR1cm4gdGhpcy5oVn19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkKTtLSlVSLmFzbjEuREVSU2V0PWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJTZXQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMzEiO3RoaXMuc29ydEZsYWc9dHJ1ZTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXt2YXIgYj1uZXcgQXJyYXkoKTtmb3IodmFyIGM9MDtjPHRoaXMuYXNuMUFycmF5Lmxlbmd0aDtjKyspe3ZhciBkPXRoaXMuYXNuMUFycmF5W2NdO2IucHVzaChkLmdldEVuY29kZWRIZXgoKSl9aWYodGhpcy5zb3J0RmxhZz09dHJ1ZSl7Yi5zb3J0KCl9dGhpcy5oVj1iLmpvaW4oIiIpO3JldHVybiB0aGlzLmhWfTtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLnNvcnRmbGFnIT0idW5kZWZpbmVkIiYmYS5zb3J0ZmxhZz09ZmFsc2Upe3RoaXMuc29ydEZsYWc9ZmFsc2V9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUlNldCxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkKTtLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0PWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuaFQ9ImEwIjt0aGlzLmhWPSIiO3RoaXMuaXNFeHBsaWNpdD10cnVlO3RoaXMuYXNuMU9iamVjdD1udWxsO3RoaXMuc2V0QVNOMU9iamVjdD1mdW5jdGlvbihiLGMsZCl7dGhpcy5oVD1jO3RoaXMuaXNFeHBsaWNpdD1iO3RoaXMuYXNuMU9iamVjdD1kO2lmKHRoaXMuaXNFeHBsaWNpdCl7dGhpcy5oVj10aGlzLmFzbjFPYmplY3QuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlfWVsc2V7dGhpcy5oVj1udWxsO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTt0aGlzLmhUTFY9dGhpcy5oVExWLnJlcGxhY2UoL14uLi8sYyk7dGhpcy5pc01vZGlmaWVkPWZhbHNlfX07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEudGFnIT0idW5kZWZpbmVkIil7dGhpcy5oVD1hLnRhZ31pZih0eXBlb2YgYS5leHBsaWNpdCE9InVuZGVmaW5lZCIpe3RoaXMuaXNFeHBsaWNpdD1hLmV4cGxpY2l0fWlmKHR5cGVvZiBhLm9iaiE9InVuZGVmaW5lZCIpe3RoaXMuYXNuMU9iamVjdD1hLm9iajt0aGlzLnNldEFTTjFPYmplY3QodGhpcy5pc0V4cGxpY2l0LHRoaXMuaFQsdGhpcy5hc24xT2JqZWN0KX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0LEtKVVIuYXNuMS5BU04xT2JqZWN0KTsKLyohIGFzbjFoZXgtMS4xLjYuanMgKGMpIDIwMTItMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KdmFyIEFTTjFIRVg9bmV3IGZ1bmN0aW9uKCl7dGhpcy5nZXRCeXRlTGVuZ3RoT2ZMX0F0T2JqPWZ1bmN0aW9uKGIsYyl7aWYoYi5zdWJzdHJpbmcoYysyLGMrMykhPSI4Iil7cmV0dXJuIDF9dmFyIGE9cGFyc2VJbnQoYi5zdWJzdHJpbmcoYyszLGMrNCkpO2lmKGE9PTApe3JldHVybiAtMX1pZigwPGEmJmE8MTApe3JldHVybiBhKzF9cmV0dXJuIC0yfTt0aGlzLmdldEhleE9mTF9BdE9iaj1mdW5jdGlvbihiLGMpe3ZhciBhPXRoaXMuZ2V0Qnl0ZUxlbmd0aE9mTF9BdE9iaihiLGMpO2lmKGE8MSl7cmV0dXJuIiJ9cmV0dXJuIGIuc3Vic3RyaW5nKGMrMixjKzIrYSoyKX07dGhpcy5nZXRJbnRPZkxfQXRPYmo9ZnVuY3Rpb24oYyxkKXt2YXIgYj10aGlzLmdldEhleE9mTF9BdE9iaihjLGQpO2lmKGI9PSIiKXtyZXR1cm4gLTF9dmFyIGE7aWYocGFyc2VJbnQoYi5zdWJzdHJpbmcoMCwxKSk8OCl7YT1uZXcgQmlnSW50ZWdlcihiLDE2KX1lbHNle2E9bmV3IEJpZ0ludGVnZXIoYi5zdWJzdHJpbmcoMiksMTYpfXJldHVybiBhLmludFZhbHVlKCl9O3RoaXMuZ2V0U3RhcnRQb3NPZlZfQXRPYmo9ZnVuY3Rpb24oYixjKXt2YXIgYT10aGlzLmdldEJ5dGVMZW5ndGhPZkxfQXRPYmooYixjKTtpZihhPDApe3JldHVybiBhfXJldHVybiBjKyhhKzEpKjJ9O3RoaXMuZ2V0SGV4T2ZWX0F0T2JqPWZ1bmN0aW9uKGMsZCl7dmFyIGI9dGhpcy5nZXRTdGFydFBvc09mVl9BdE9iaihjLGQpO3ZhciBhPXRoaXMuZ2V0SW50T2ZMX0F0T2JqKGMsZCk7cmV0dXJuIGMuc3Vic3RyaW5nKGIsYithKjIpfTt0aGlzLmdldEhleE9mVExWX0F0T2JqPWZ1bmN0aW9uKGMsZSl7dmFyIGI9Yy5zdWJzdHIoZSwyKTt2YXIgZD10aGlzLmdldEhleE9mTF9BdE9iaihjLGUpO3ZhciBhPXRoaXMuZ2V0SGV4T2ZWX0F0T2JqKGMsZSk7cmV0dXJuIGIrZCthfTt0aGlzLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmo9ZnVuY3Rpb24oYyxkKXt2YXIgYj10aGlzLmdldFN0YXJ0UG9zT2ZWX0F0T2JqKGMsZCk7dmFyIGE9dGhpcy5nZXRJbnRPZkxfQXRPYmooYyxkKTtyZXR1cm4gYithKjJ9O3RoaXMuZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqPWZ1bmN0aW9uKGYsail7dmFyIGM9bmV3IEFycmF5KCk7dmFyIGk9dGhpcy5nZXRTdGFydFBvc09mVl9BdE9iaihmLGopO2MucHVzaChpKTt2YXIgYj10aGlzLmdldEludE9mTF9BdE9iaihmLGopO3ZhciBnPWk7dmFyIGQ9MDt3aGlsZSgxKXt2YXIgZT10aGlzLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmooZixnKTtpZihlPT1udWxsfHwoZS1pPj0oYioyKSkpe2JyZWFrfWlmKGQ+PTIwMCl7YnJlYWt9Yy5wdXNoKGUpO2c9ZTtkKyt9cmV0dXJuIGN9O3RoaXMuZ2V0TnRoQ2hpbGRJbmRleF9BdE9iaj1mdW5jdGlvbihkLGIsZSl7dmFyIGM9dGhpcy5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZCxiKTtyZXR1cm4gY1tlXX07dGhpcy5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdD1mdW5jdGlvbihlLGQsYyl7aWYoYy5sZW5ndGg9PTApe3JldHVybiBkfXZhciBmPWMuc2hpZnQoKTt2YXIgYj10aGlzLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihlLGQpO3JldHVybiB0aGlzLmdldERlY2VuZGFudEluZGV4QnlOdGhMaXN0KGUsYltmXSxjKX07dGhpcy5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3Q9ZnVuY3Rpb24oZCxjLGIpe3ZhciBhPXRoaXMuZ2V0RGVjZW5kYW50SW5kZXhCeU50aExpc3QoZCxjLGIpO3JldHVybiB0aGlzLmdldEhleE9mVExWX0F0T2JqKGQsYSl9O3RoaXMuZ2V0RGVjZW5kYW50SGV4VkJ5TnRoTGlzdD1mdW5jdGlvbihkLGMsYil7dmFyIGE9dGhpcy5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdChkLGMsYik7cmV0dXJuIHRoaXMuZ2V0SGV4T2ZWX0F0T2JqKGQsYSl9fTtBU04xSEVYLmdldFZieUxpc3Q9ZnVuY3Rpb24oZCxjLGIsZSl7dmFyIGE9dGhpcy5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdChkLGMsYik7aWYoYT09PXVuZGVmaW5lZCl7dGhyb3ciY2FuJ3QgZmluZCBudGhMaXN0IG9iamVjdCJ9aWYoZSE9PXVuZGVmaW5lZCl7aWYoZC5zdWJzdHIoYSwyKSE9ZSl7dGhyb3ciY2hlY2tpbmcgdGFnIGRvZXNuJ3QgbWF0Y2g6ICIrZC5zdWJzdHIoYSwyKSsiIT0iK2V9fXJldHVybiB0aGlzLmdldEhleE9mVl9BdE9iaihkLGEpfTtBU04xSEVYLmhleHRvb2lkc3RyPWZ1bmN0aW9uKGUpe3ZhciBoPWZ1bmN0aW9uKGIsYSl7aWYoYi5sZW5ndGg+PWEpe3JldHVybiBifXJldHVybiBuZXcgQXJyYXkoYS1iLmxlbmd0aCsxKS5qb2luKCIwIikrYn07dmFyIGw9W107dmFyIG89ZS5zdWJzdHIoMCwyKTt2YXIgZj1wYXJzZUludChvLDE2KTtsWzBdPW5ldyBTdHJpbmcoTWF0aC5mbG9vcihmLzQwKSk7bFsxXT1uZXcgU3RyaW5nKGYlNDApO3ZhciBtPWUuc3Vic3RyKDIpO3ZhciBrPVtdO2Zvcih2YXIgZz0wO2c8bS5sZW5ndGgvMjtnKyspe2sucHVzaChwYXJzZUludChtLnN1YnN0cihnKjIsMiksMTYpKX12YXIgaj1bXTt2YXIgZD0iIjtmb3IodmFyIGc9MDtnPGsubGVuZ3RoO2crKyl7aWYoa1tnXSYxMjgpe2Q9ZCtoKChrW2ddJjEyNykudG9TdHJpbmcoMiksNyl9ZWxzZXtkPWQraCgoa1tnXSYxMjcpLnRvU3RyaW5nKDIpLDcpO2oucHVzaChuZXcgU3RyaW5nKHBhcnNlSW50KGQsMikpKTtkPSIifX12YXIgbj1sLmpvaW4oIi4iKTtpZihqLmxlbmd0aD4wKXtuPW4rIi4iK2ouam9pbigiLiIpfXJldHVybiBufTtBU04xSEVYLmR1bXA9ZnVuY3Rpb24oZSxjLGssZyl7dmFyIG89ZnVuY3Rpb24odyxpKXtpZih3Lmxlbmd0aDw9aSoyKXtyZXR1cm4gd31lbHNle3ZhciB2PXcuc3Vic3RyKDAsaSkrIi4uKHRvdGFsICIrdy5sZW5ndGgvMisiYnl0ZXMpLi4iK3cuc3Vic3RyKHcubGVuZ3RoLWksaSk7cmV0dXJuIHZ9fTtpZihjPT09dW5kZWZpbmVkKXtjPXtvbW1pdF9sb25nX29jdGV0OjMyfX1pZihrPT09dW5kZWZpbmVkKXtrPTB9aWYoZz09PXVuZGVmaW5lZCl7Zz0iIn12YXIgcj1jLm9tbWl0X2xvbmdfb2N0ZXQ7aWYoZS5zdWJzdHIoaywyKT09IjAxIil7dmFyIGg9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKTtpZihoPT0iMDAiKXtyZXR1cm4gZysiQk9PTEVBTiBGQUxTRVxuIn1lbHNle3JldHVybiBnKyJCT09MRUFOIFRSVUVcbiJ9fWlmKGUuc3Vic3RyKGssMik9PSIwMiIpe3ZhciBoPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsayk7cmV0dXJuIGcrIklOVEVHRVIgIitvKGgscikrIlxuIn1pZihlLnN1YnN0cihrLDIpPT0iMDMiKXt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspO3JldHVybiBnKyJCSVRTVFJJTkcgIitvKGgscikrIlxuIn1pZihlLnN1YnN0cihrLDIpPT0iMDQiKXt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspO2lmKEFTTjFIRVguaXNBU04xSEVYKGgpKXt2YXIgaj1nKyJPQ1RFVFNUUklORywgZW5jYXBzdWxhdGVzXG4iO2o9aitBU04xSEVYLmR1bXAoaCxjLDAsZysiICAiKTtyZXR1cm4gan1lbHNle3JldHVybiBnKyJPQ1RFVFNUUklORyAiK28oaCxyKSsiXG4ifX1pZihlLnN1YnN0cihrLDIpPT0iMDUiKXtyZXR1cm4gZysiTlVMTFxuIn1pZihlLnN1YnN0cihrLDIpPT0iMDYiKXt2YXIgbD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspO3ZhciBhPUtKVVIuYXNuMS5BU04xVXRpbC5vaWRIZXhUb0ludChsKTt2YXIgbj1LSlVSLmFzbjEueDUwOS5PSUQub2lkMm5hbWUoYSk7dmFyIGI9YS5yZXBsYWNlKC9cLi9nLCIgIik7aWYobiE9IiIpe3JldHVybiBnKyJPYmplY3RJZGVudGlmaWVyICIrbisiICgiK2IrIilcbiJ9ZWxzZXtyZXR1cm4gZysiT2JqZWN0SWRlbnRpZmllciAoIitiKyIpXG4ifX1pZihlLnN1YnN0cihrLDIpPT0iMGMiKXtyZXR1cm4gZysiVVRGOFN0cmluZyAnIitoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKSkrIidcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjEzIil7cmV0dXJuIGcrIlByaW50YWJsZVN0cmluZyAnIitoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKSkrIidcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjE0Iil7cmV0dXJuIGcrIlRlbGV0ZXhTdHJpbmcgJyIraGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykpKyInXG4ifWlmKGUuc3Vic3RyKGssMik9PSIxNiIpe3JldHVybiBnKyJJQTVTdHJpbmcgJyIraGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykpKyInXG4ifWlmKGUuc3Vic3RyKGssMik9PSIxNyIpe3JldHVybiBnKyJVVENUaW1lICIraGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykpKyJcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjE4Iil7cmV0dXJuIGcrIkdlbmVyYWxpemVkVGltZSAiK2hleHRvdXRmOChBU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspKSsiXG4ifWlmKGUuc3Vic3RyKGssMik9PSIzMCIpe2lmKGUuc3Vic3RyKGssNCk9PSIzMDAwIil7cmV0dXJuIGcrIlNFUVVFTkNFIHt9XG4ifXZhciBqPWcrIlNFUVVFTkNFXG4iO3ZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGUsayk7dmFyIGY9YztpZigoZC5sZW5ndGg9PTJ8fGQubGVuZ3RoPT0zKSYmZS5zdWJzdHIoZFswXSwyKT09IjA2IiYmZS5zdWJzdHIoZFtkLmxlbmd0aC0xXSwyKT09IjA0Iil7dmFyIHQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxkWzBdKTt2YXIgYT1LSlVSLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQodCk7dmFyIG49S0pVUi5hc24xLng1MDkuT0lELm9pZDJuYW1lKGEpO3ZhciBwPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpO3AueDUwOUV4dE5hbWU9bjtmPXB9Zm9yKHZhciBxPTA7cTxkLmxlbmd0aDtxKyspe2o9aitBU04xSEVYLmR1bXAoZSxmLGRbcV0sZysiICAiKX1yZXR1cm4gan1pZihlLnN1YnN0cihrLDIpPT0iMzEiKXt2YXIgaj1nKyJTRVRcbiI7dmFyIGQ9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZSxrKTtmb3IodmFyIHE9MDtxPGQubGVuZ3RoO3ErKyl7aj1qK0FTTjFIRVguZHVtcChlLGMsZFtxXSxnKyIgICIpfXJldHVybiBqfXZhciB1PXBhcnNlSW50KGUuc3Vic3RyKGssMiksMTYpO2lmKCh1JjEyOCkhPTApe3ZhciBtPXUmMzE7aWYoKHUmMzIpIT0wKXt2YXIgaj1nKyJbIittKyJdXG4iO3ZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGUsayk7Zm9yKHZhciBxPTA7cTxkLmxlbmd0aDtxKyspe2o9aitBU04xSEVYLmR1bXAoZSxjLGRbcV0sZysiICAiKX1yZXR1cm4gan1lbHNle3ZhciBoPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsayk7aWYoaC5zdWJzdHIoMCw4KT09IjY4NzQ3NDcwIil7aD1oZXh0b3V0ZjgoaCl9aWYoYy54NTA5RXh0TmFtZT09PSJzdWJqZWN0QWx0TmFtZSImJm09PTIpe2g9aGV4dG91dGY4KGgpfXZhciBqPWcrIlsiK20rIl0gIitoKyJcbiI7cmV0dXJuIGp9fXJldHVybiBnKyJVTktOT1dOKCIrZS5zdWJzdHIoaywyKSsiKSAiK0FTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykrIlxuIn07QVNOMUhFWC5pc0FTTjFIRVg9ZnVuY3Rpb24oZCl7aWYoZC5sZW5ndGglMj09MSl7cmV0dXJuIGZhbHNlfXZhciBjPUFTTjFIRVguZ2V0SW50T2ZMX0F0T2JqKGQsMCk7dmFyIGI9ZC5zdWJzdHIoMCwyKTt2YXIgZT1BU04xSEVYLmdldEhleE9mTF9BdE9iaihkLDApO3ZhciBhPWQubGVuZ3RoLWIubGVuZ3RoLWUubGVuZ3RoO2lmKGE9PWMqMil7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfTsKLyohIGFzbjF4NTA5LTEuMC4xMy5qcyAoYykgMjAxMy0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjE9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xKXtLSlVSLmFzbjE9e319aWYodHlwZW9mIEtKVVIuYXNuMS54NTA5PT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMS54NTA5KXtLSlVSLmFzbjEueDUwOT17fX1LSlVSLmFzbjEueDUwOS5DZXJ0aWZpY2F0ZT1mdW5jdGlvbihnKXtLSlVSLmFzbjEueDUwOS5DZXJ0aWZpY2F0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgZD1udWxsO3ZhciBmPW51bGw7dmFyIGM9bnVsbDt2YXIgYT1udWxsO3ZhciBlPW51bGw7dGhpcy5zZXRSc2FQcnZLZXlCeVBFTWFuZFBhc3M9ZnVuY3Rpb24oaSxrKXt2YXIgaD1QS0NTNVBLRVkuZ2V0RGVjcnlwdGVkS2V5SGV4KGksayk7dmFyIGo9bmV3IFJTQUtleSgpO2oucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhoKTt0aGlzLnBydktleT1qfTt0aGlzLnNpZ249ZnVuY3Rpb24oKXt0aGlzLmFzbjFTaWduYXR1cmVBbGc9dGhpcy5hc24xVEJTQ2VydC5hc24xU2lnbmF0dXJlQWxnO3NpZz1uZXcgS0pVUi5jcnlwdG8uU2lnbmF0dXJlKHthbGc6IlNIQTF3aXRoUlNBIn0pO3NpZy5pbml0KHRoaXMucHJ2S2V5KTtzaWcudXBkYXRlSGV4KHRoaXMuYXNuMVRCU0NlcnQuZ2V0RW5jb2RlZEhleCgpKTt0aGlzLmhleFNpZz1zaWcuc2lnbigpO3RoaXMuYXNuMVNpZz1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIrdGhpcy5oZXhTaWd9KTt2YXIgaD1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbdGhpcy5hc24xVEJTQ2VydCx0aGlzLmFzbjFTaWduYXR1cmVBbGcsdGhpcy5hc24xU2lnXX0pO3RoaXMuaFRMVj1oLmdldEVuY29kZWRIZXgoKTt0aGlzLmlzTW9kaWZpZWQ9ZmFsc2V9O3RoaXMuc2V0U2lnbmF0dXJlSGV4PWZ1bmN0aW9uKGgpe3RoaXMuYXNuMVNpZ25hdHVyZUFsZz10aGlzLmFzbjFUQlNDZXJ0LmFzbjFTaWduYXR1cmVBbGc7dGhpcy5oZXhTaWc9aDt0aGlzLmFzbjFTaWc9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK3RoaXMuaGV4U2lnfSk7dmFyIGk9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuYXNuMVRCU0NlcnQsdGhpcy5hc24xU2lnbmF0dXJlQWxnLHRoaXMuYXNuMVNpZ119KTt0aGlzLmhUTFY9aS5nZXRFbmNvZGVkSGV4KCk7dGhpcy5pc01vZGlmaWVkPWZhbHNlfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmlzTW9kaWZpZWQ9PWZhbHNlJiZ0aGlzLmhUTFYhPW51bGwpe3JldHVybiB0aGlzLmhUTFZ9dGhyb3cibm90IHNpZ25lZCB5ZXQifTt0aGlzLmdldFBFTVN0cmluZz1mdW5jdGlvbigpe3ZhciBqPXRoaXMuZ2V0RW5jb2RlZEhleCgpO3ZhciBoPUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uoaik7dmFyIGk9Q3J5cHRvSlMuZW5jLkJhc2U2NC5zdHJpbmdpZnkoaCk7dmFyIGs9aS5yZXBsYWNlKC8oLns2NH0pL2csIiQxXHJcbiIpO3JldHVybiItLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS1cclxuIitrKyJcclxuLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLVxyXG4ifTtpZih0eXBlb2YgZyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBnLnRic2NlcnRvYmohPSJ1bmRlZmluZWQiKXt0aGlzLmFzbjFUQlNDZXJ0PWcudGJzY2VydG9ian1pZih0eXBlb2YgZy5wcnZrZXlvYmohPSJ1bmRlZmluZWQiKXt0aGlzLnBydktleT1nLnBydmtleW9ian1lbHNle2lmKHR5cGVvZiBnLnJzYXBydmtleSE9InVuZGVmaW5lZCIpe3RoaXMucHJ2S2V5PWcucnNhcHJ2a2V5fWVsc2V7aWYoKHR5cGVvZiBnLnJzYXBydnBlbSE9InVuZGVmaW5lZCIpJiYodHlwZW9mIGcucnNhcHJ2cGFzIT0idW5kZWZpbmVkIikpe3RoaXMuc2V0UnNhUHJ2S2V5QnlQRU1hbmRQYXNzKGcucnNhcHJ2cGVtLGcucnNhcHJ2cGFzKX19fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNlcnRpZmljYXRlLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5UQlNDZXJ0aWZpY2F0ZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEueDUwOS5UQlNDZXJ0aWZpY2F0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5faW5pdGlhbGl6ZT1mdW5jdGlvbigpe3RoaXMuYXNuMUFycmF5PW5ldyBBcnJheSgpO3RoaXMuYXNuMVZlcnNpb249bmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe29iajpuZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOjJ9KX0pO3RoaXMuYXNuMVNlcmlhbE51bWJlcj1udWxsO3RoaXMuYXNuMVNpZ25hdHVyZUFsZz1udWxsO3RoaXMuYXNuMUlzc3Vlcj1udWxsO3RoaXMuYXNuMU5vdEJlZm9yZT1udWxsO3RoaXMuYXNuMU5vdEFmdGVyPW51bGw7dGhpcy5hc24xU3ViamVjdD1udWxsO3RoaXMuYXNuMVN1YmpQS2V5PW51bGw7dGhpcy5leHRlbnNpb25zQXJyYXk9bmV3IEFycmF5KCl9O3RoaXMuc2V0U2VyaWFsTnVtYmVyQnlQYXJhbT1mdW5jdGlvbihiKXt0aGlzLmFzbjFTZXJpYWxOdW1iZXI9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKGIpfTt0aGlzLnNldFNpZ25hdHVyZUFsZ0J5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU2lnbmF0dXJlQWxnPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKGIpfTt0aGlzLnNldElzc3VlckJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xSXNzdWVyPW5ldyBLSlVSLmFzbjEueDUwOS5YNTAwTmFtZShiKX07dGhpcy5zZXROb3RCZWZvcmVCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMU5vdEJlZm9yZT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShiKX07dGhpcy5zZXROb3RBZnRlckJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xTm90QWZ0ZXI9bmV3IEtKVVIuYXNuMS54NTA5LlRpbWUoYil9O3RoaXMuc2V0U3ViamVjdEJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU3ViamVjdD1uZXcgS0pVUi5hc24xLng1MDkuWDUwME5hbWUoYil9O3RoaXMuc2V0U3ViamVjdFB1YmxpY0tleUJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU3VialBLZXk9bmV3IEtKVVIuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvKGIpfTt0aGlzLnNldFN1YmplY3RQdWJsaWNLZXlCeUdldEtleT1mdW5jdGlvbihjKXt2YXIgYj1LRVlVVElMLmdldEtleShjKTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8oYil9O3RoaXMuYXBwZW5kRXh0ZW5zaW9uPWZ1bmN0aW9uKGIpe3RoaXMuZXh0ZW5zaW9uc0FycmF5LnB1c2goYil9O3RoaXMuYXBwZW5kRXh0ZW5zaW9uQnlOYW1lPWZ1bmN0aW9uKGQsYil7aWYoZC50b0xvd2VyQ2FzZSgpPT0iYmFzaWNjb25zdHJhaW50cyIpe3ZhciBjPW5ldyBLSlVSLmFzbjEueDUwOS5CYXNpY0NvbnN0cmFpbnRzKGIpO3RoaXMuYXBwZW5kRXh0ZW5zaW9uKGMpfWVsc2V7aWYoZC50b0xvd2VyQ2FzZSgpPT0ia2V5dXNhZ2UiKXt2YXIgYz1uZXcgS0pVUi5hc24xLng1MDkuS2V5VXNhZ2UoYik7dGhpcy5hcHBlbmRFeHRlbnNpb24oYyl9ZWxzZXtpZihkLnRvTG93ZXJDYXNlKCk9PSJjcmxkaXN0cmlidXRpb25wb2ludHMiKXt2YXIgYz1uZXcgS0pVUi5hc24xLng1MDkuQ1JMRGlzdHJpYnV0aW9uUG9pbnRzKGIpO3RoaXMuYXBwZW5kRXh0ZW5zaW9uKGMpfWVsc2V7aWYoZC50b0xvd2VyQ2FzZSgpPT0iZXh0a2V5dXNhZ2UiKXt2YXIgYz1uZXcgS0pVUi5hc24xLng1MDkuRXh0S2V5VXNhZ2UoYik7dGhpcy5hcHBlbmRFeHRlbnNpb24oYyl9ZWxzZXtpZihkLnRvTG93ZXJDYXNlKCk9PSJhdXRob3JpdHlrZXlpZGVudGlmaWVyIil7dmFyIGM9bmV3IEtKVVIuYXNuMS54NTA5LkF1dGhvcml0eUtleUlkZW50aWZpZXIoYik7dGhpcy5hcHBlbmRFeHRlbnNpb24oYyl9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBleHRlbnNpb24gbmFtZTogIitkfX19fX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuYXNuMU5vdEJlZm9yZT09bnVsbHx8dGhpcy5hc24xTm90QWZ0ZXI9PW51bGwpe3Rocm93Im5vdEJlZm9yZSBhbmQvb3Igbm90QWZ0ZXIgbm90IHNldCJ9dmFyIGM9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuYXNuMU5vdEJlZm9yZSx0aGlzLmFzbjFOb3RBZnRlcl19KTt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVZlcnNpb24pO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xU2VyaWFsTnVtYmVyKTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVNpZ25hdHVyZUFsZyk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFJc3N1ZXIpO3RoaXMuYXNuMUFycmF5LnB1c2goYyk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFTdWJqZWN0KTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVN1YmpQS2V5KTtpZih0aGlzLmV4dGVuc2lvbnNBcnJheS5sZW5ndGg+MCl7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5leHRlbnNpb25zQXJyYXl9KTt2YXIgYj1uZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6dHJ1ZSx0YWc6ImEzIixvYmo6ZH0pO3RoaXMuYXNuMUFycmF5LnB1c2goYil9dmFyIGU9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5hc24xQXJyYXl9KTt0aGlzLmhUTFY9ZS5nZXRFbmNvZGVkSGV4KCk7dGhpcy5pc01vZGlmaWVkPWZhbHNlO3JldHVybiB0aGlzLmhUTFZ9O3RoaXMuX2luaXRpYWxpemUoKX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuVEJTQ2VydGlmaWNhdGUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LkV4dGVuc2lvbj1mdW5jdGlvbihiKXtLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGY9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtvaWQ6dGhpcy5vaWR9KTt2YXIgZT1uZXcgS0pVUi5hc24xLkRFUk9jdGV0U3RyaW5nKHtoZXg6dGhpcy5nZXRFeHRuVmFsdWVIZXgoKX0pO3ZhciBkPW5ldyBBcnJheSgpO2QucHVzaChmKTtpZih0aGlzLmNyaXRpY2FsKXtkLnB1c2gobmV3IEtKVVIuYXNuMS5ERVJCb29sZWFuKCkpfWQucHVzaChlKTt2YXIgYz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpkfSk7cmV0dXJuIGMuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLmNyaXRpY2FsPWZhbHNlO2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGIuY3JpdGljYWwhPSJ1bmRlZmluZWQiKXt0aGlzLmNyaXRpY2FsPWIuY3JpdGljYWx9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5LZXlVc2FnZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEueDUwOS5LZXlVc2FnZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmdldEV4dG5WYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLm9pZD0iMi41LjI5LjE1IjtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLmJpbiE9InVuZGVmaW5lZCIpe3RoaXMuYXNuMUV4dG5WYWx1ZT1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyhhKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5LZXlVc2FnZSxLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24pO0tKVVIuYXNuMS54NTA5LkJhc2ljQ29uc3RyYWludHM9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLng1MDkuQmFzaWNDb25zdHJhaW50cy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxjKTt2YXIgYT1mYWxzZTt2YXIgYj0tMTt0aGlzLmdldEV4dG5WYWx1ZUhleD1mdW5jdGlvbigpe3ZhciBlPW5ldyBBcnJheSgpO2lmKHRoaXMuY0Epe2UucHVzaChuZXcgS0pVUi5hc24xLkRFUkJvb2xlYW4oKSl9aWYodGhpcy5wYXRoTGVuPi0xKXtlLnB1c2gobmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHsiaW50Ijp0aGlzLnBhdGhMZW59KSl9dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6ZX0pO3RoaXMuYXNuMUV4dG5WYWx1ZT1kO3JldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLm9pZD0iMi41LjI5LjE5Ijt0aGlzLmNBPWZhbHNlO3RoaXMucGF0aExlbj0tMTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLmNBIT0idW5kZWZpbmVkIil7dGhpcy5jQT1jLmNBfWlmKHR5cGVvZiBjLnBhdGhMZW4hPSJ1bmRlZmluZWQiKXt0aGlzLnBhdGhMZW49Yy5wYXRoTGVufX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkJhc2ljQ29uc3RyYWludHMsS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uKTtLSlVSLmFzbjEueDUwOS5DUkxEaXN0cmlidXRpb25Qb2ludHM9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLng1MDkuQ1JMRGlzdHJpYnV0aW9uUG9pbnRzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuZ2V0RXh0blZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZS5nZXRFbmNvZGVkSGV4KCl9O3RoaXMuc2V0QnlEUEFycmF5PWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUV4dG5WYWx1ZT1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpifSl9O3RoaXMuc2V0QnlPbmVVUkk9ZnVuY3Rpb24oZSl7dmFyIGI9bmV3IEtKVVIuYXNuMS54NTA5LkdlbmVyYWxOYW1lcyhbe3VyaTplfV0pO3ZhciBkPW5ldyBLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludE5hbWUoYik7dmFyIGM9bmV3IEtKVVIuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50KHtkcG9iajpkfSk7dGhpcy5zZXRCeURQQXJyYXkoW2NdKX07dGhpcy5vaWQ9IjIuNS4yOS4zMSI7aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYS5hcnJheSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlEUEFycmF5KGEuYXJyYXkpfWVsc2V7aWYodHlwZW9mIGEudXJpIT0idW5kZWZpbmVkIil7dGhpcy5zZXRCeU9uZVVSSShhLnVyaSl9fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNSTERpc3RyaWJ1dGlvblBvaW50cyxLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24pO0tKVVIuYXNuMS54NTA5LkV4dEtleVVzYWdlPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS54NTA5LkV4dEtleVVzYWdlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuc2V0UHVycG9zZUFycmF5PWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUV4dG5WYWx1ZT1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKCk7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcihiW2NdKTt0aGlzLmFzbjFFeHRuVmFsdWUuYXBwZW5kQVNOMU9iamVjdChkKX19O3RoaXMuZ2V0RXh0blZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZS5nZXRFbmNvZGVkSGV4KCl9O3RoaXMub2lkPSIyLjUuMjkuMzciO2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEuYXJyYXkhPSJ1bmRlZmluZWQiKXt0aGlzLnNldFB1cnBvc2VBcnJheShhLmFycmF5KX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5FeHRLZXlVc2FnZSxLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24pO0tKVVIuYXNuMS54NTA5LkF1dGhvcml0eUtleUlkZW50aWZpZXI9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLng1MDkuQXV0aG9yaXR5S2V5SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmFzbjFLSUQ9bnVsbDt0aGlzLmFzbjFDZXJ0SXNzdWVyPW51bGw7dGhpcy5hc24xQ2VydFNOPW51bGw7dGhpcy5nZXRFeHRuVmFsdWVIZXg9ZnVuY3Rpb24oKXt2YXIgYz1uZXcgQXJyYXkoKTtpZih0aGlzLmFzbjFLSUQpe2MucHVzaChuZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6ZmFsc2UsdGFnOiI4MCIsb2JqOnRoaXMuYXNuMUtJRH0pKX1pZih0aGlzLmFzbjFDZXJ0SXNzdWVyKXtjLnB1c2gobmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OmZhbHNlLHRhZzoiYTEiLG9iajp0aGlzLmFzbjFDZXJ0SXNzdWVyfSkpfWlmKHRoaXMuYXNuMUNlcnRTTil7Yy5wdXNoKG5ldyBLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0KHtleHBsaWNpdDpmYWxzZSx0YWc6IjgyIixvYmo6dGhpcy5hc24xQ2VydFNOfSkpfXZhciBiPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OmN9KTt0aGlzLmFzbjFFeHRuVmFsdWU9YjtyZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlLmdldEVuY29kZWRIZXgoKX07dGhpcy5zZXRLSURCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUtJRD1uZXcgS0pVUi5hc24xLkRFUk9jdGV0U3RyaW5nKGIpfTt0aGlzLnNldENlcnRJc3N1ZXJCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUNlcnRJc3N1ZXI9bmV3IEtKVVIuYXNuMS54NTA5Llg1MDBOYW1lKGIpfTt0aGlzLnNldENlcnRTTkJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xQ2VydFNOPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcihiKX07dGhpcy5vaWQ9IjIuNS4yOS4zNSI7aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYS5raWQhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEtJREJ5UGFyYW0oYS5raWQpfWlmKHR5cGVvZiBhLmlzc3VlciE9InVuZGVmaW5lZCIpe3RoaXMuc2V0Q2VydElzc3VlckJ5UGFyYW0oYS5pc3N1ZXIpfWlmKHR5cGVvZiBhLnNuIT0idW5kZWZpbmVkIil7dGhpcy5zZXRDZXJ0U05CeVBhcmFtKGEuc24pfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkF1dGhvcml0eUtleUlkZW50aWZpZXIsS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uKTtLSlVSLmFzbjEueDUwOS5DUkw9ZnVuY3Rpb24oZil7S0pVUi5hc24xLng1MDkuQ1JMLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3ZhciBjPW51bGw7dmFyIGU9bnVsbDt2YXIgYj1udWxsO3ZhciBkPW51bGw7dGhpcy5zZXRSc2FQcnZLZXlCeVBFTWFuZFBhc3M9ZnVuY3Rpb24oaCxqKXt2YXIgZz1QS0NTNVBLRVkuZ2V0RGVjcnlwdGVkS2V5SGV4KGgsaik7dmFyIGk9bmV3IFJTQUtleSgpO2kucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhnKTt0aGlzLnJzYVBydktleT1pfTt0aGlzLnNpZ249ZnVuY3Rpb24oKXt0aGlzLmFzbjFTaWduYXR1cmVBbGc9dGhpcy5hc24xVEJTQ2VydExpc3QuYXNuMVNpZ25hdHVyZUFsZztzaWc9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOiJTSEExd2l0aFJTQSIscHJvdjoiY3J5cHRvanMvanNyc2EifSk7c2lnLmluaXRTaWduKHRoaXMucnNhUHJ2S2V5KTtzaWcudXBkYXRlSGV4KHRoaXMuYXNuMVRCU0NlcnRMaXN0LmdldEVuY29kZWRIZXgoKSk7dGhpcy5oZXhTaWc9c2lnLnNpZ24oKTt0aGlzLmFzbjFTaWc9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK3RoaXMuaGV4U2lnfSk7dmFyIGc9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuYXNuMVRCU0NlcnRMaXN0LHRoaXMuYXNuMVNpZ25hdHVyZUFsZyx0aGlzLmFzbjFTaWddfSk7dGhpcy5oVExWPWcuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaXNNb2RpZmllZD1mYWxzZX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5pc01vZGlmaWVkPT1mYWxzZSYmdGhpcy5oVExWIT1udWxsKXtyZXR1cm4gdGhpcy5oVExWfXRocm93Im5vdCBzaWduZWQgeWV0In07dGhpcy5nZXRQRU1TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgaT10aGlzLmdldEVuY29kZWRIZXgoKTt2YXIgZz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGkpO3ZhciBoPUNyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KGcpO3ZhciBqPWgucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTtyZXR1cm4iLS0tLS1CRUdJTiBYNTA5IENSTC0tLS0tXHJcbiIraisiXHJcbi0tLS0tRU5EIFg1MDkgQ1JMLS0tLS1cclxuIn07aWYodHlwZW9mIGYhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZi50YnNvYmohPSJ1bmRlZmluZWQiKXt0aGlzLmFzbjFUQlNDZXJ0TGlzdD1mLnRic29ian1pZih0eXBlb2YgZi5yc2FwcnZrZXkhPSJ1bmRlZmluZWQiKXt0aGlzLnJzYVBydktleT1mLnJzYXBydmtleX1pZigodHlwZW9mIGYucnNhcHJ2cGVtIT0idW5kZWZpbmVkIikmJih0eXBlb2YgZi5yc2FwcnZwYXMhPSJ1bmRlZmluZWQiKSl7dGhpcy5zZXRSc2FQcnZLZXlCeVBFTWFuZFBhc3MoZi5yc2FwcnZwZW0sZi5yc2FwcnZwYXMpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNSTCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuVEJTQ2VydExpc3Q9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuVEJTQ2VydExpc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPW51bGw7dGhpcy5zZXRTaWduYXR1cmVBbGdCeVBhcmFtPWZ1bmN0aW9uKGMpe3RoaXMuYXNuMVNpZ25hdHVyZUFsZz1uZXcgS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcihjKX07dGhpcy5zZXRJc3N1ZXJCeVBhcmFtPWZ1bmN0aW9uKGMpe3RoaXMuYXNuMUlzc3Vlcj1uZXcgS0pVUi5hc24xLng1MDkuWDUwME5hbWUoYyl9O3RoaXMuc2V0VGhpc1VwZGF0ZUJ5UGFyYW09ZnVuY3Rpb24oYyl7dGhpcy5hc24xVGhpc1VwZGF0ZT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShjKX07dGhpcy5zZXROZXh0VXBkYXRlQnlQYXJhbT1mdW5jdGlvbihjKXt0aGlzLmFzbjFOZXh0VXBkYXRlPW5ldyBLSlVSLmFzbjEueDUwOS5UaW1lKGMpfTt0aGlzLmFkZFJldm9rZWRDZXJ0PWZ1bmN0aW9uKGMsZCl7dmFyIGY9e307aWYoYyE9dW5kZWZpbmVkJiZjIT1udWxsKXtmLnNuPWN9aWYoZCE9dW5kZWZpbmVkJiZkIT1udWxsKXtmLnRpbWU9ZH12YXIgZT1uZXcgS0pVUi5hc24xLng1MDkuQ1JMRW50cnkoZik7dGhpcy5hUmV2b2tlZENlcnQucHVzaChlKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7aWYodGhpcy5hc24xVmVyc2lvbiE9bnVsbCl7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFWZXJzaW9uKX10aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVNpZ25hdHVyZUFsZyk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFJc3N1ZXIpO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xVGhpc1VwZGF0ZSk7aWYodGhpcy5hc24xTmV4dFVwZGF0ZSE9bnVsbCl7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFOZXh0VXBkYXRlKX1pZih0aGlzLmFSZXZva2VkQ2VydC5sZW5ndGg+MCl7dmFyIGM9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5hUmV2b2tlZENlcnR9KTt0aGlzLmFzbjFBcnJheS5wdXNoKGMpfXZhciBkPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OnRoaXMuYXNuMUFycmF5fSk7dGhpcy5oVExWPWQuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaXNNb2RpZmllZD1mYWxzZTtyZXR1cm4gdGhpcy5oVExWfTt0aGlzLl9pbml0aWFsaXplPWZ1bmN0aW9uKCl7dGhpcy5hc24xVmVyc2lvbj1udWxsO3RoaXMuYXNuMVNpZ25hdHVyZUFsZz1udWxsO3RoaXMuYXNuMUlzc3Vlcj1udWxsO3RoaXMuYXNuMVRoaXNVcGRhdGU9bnVsbDt0aGlzLmFzbjFOZXh0VXBkYXRlPW51bGw7dGhpcy5hUmV2b2tlZENlcnQ9bmV3IEFycmF5KCl9O3RoaXMuX2luaXRpYWxpemUoKX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuVEJTQ2VydExpc3QsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LkNSTEVudHJ5PWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS54NTA5LkNSTEVudHJ5LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYj1udWxsO3ZhciBhPW51bGw7dGhpcy5zZXRDZXJ0U2VyaWFsPWZ1bmN0aW9uKGQpe3RoaXMuc249bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKGQpfTt0aGlzLnNldFJldm9jYXRpb25EYXRlPWZ1bmN0aW9uKGQpe3RoaXMudGltZT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShkKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuc24sdGhpcy50aW1lXX0pO3RoaXMuVExWPWQuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLlRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy50aW1lIT0idW5kZWZpbmVkIil7dGhpcy5zZXRSZXZvY2F0aW9uRGF0ZShjLnRpbWUpfWlmKHR5cGVvZiBjLnNuIT0idW5kZWZpbmVkIil7dGhpcy5zZXRDZXJ0U2VyaWFsKGMuc24pfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNSTEVudHJ5LEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5YNTAwTmFtZT1mdW5jdGlvbihiKXtLSlVSLmFzbjEueDUwOS5YNTAwTmFtZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7dGhpcy5zZXRCeVN0cmluZz1mdW5jdGlvbihjKXt2YXIgZD1jLnNwbGl0KCIvIik7ZC5zaGlmdCgpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt0aGlzLmFzbjFBcnJheS5wdXNoKG5ldyBLSlVSLmFzbjEueDUwOS5SRE4oe3N0cjpkW2VdfSkpfX07dGhpcy5zZXRCeU9iamVjdD1mdW5jdGlvbihlKXtmb3IodmFyIGMgaW4gZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eShjKSl7dmFyIGQ9bmV3IEtKVVIuYXNuMS54NTA5LlJETih7c3RyOmMrIj0iK2VbY119KTt0aGlzLmFzbjFBcnJheT90aGlzLmFzbjFBcnJheS5wdXNoKGQpOnRoaXMuYXNuMUFycmF5PVtkXX19fTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5oVExWPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMuaFRMVn12YXIgYz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTp0aGlzLmFzbjFBcnJheX0pO3RoaXMuaFRMVj1jLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLnN0ciE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlTdHJpbmcoYi5zdHIpfWVsc2V7aWYodHlwZW9mIGI9PT0ib2JqZWN0Iil7dGhpcy5zZXRCeU9iamVjdChiKX19aWYodHlwZW9mIGIuY2VydGlzc3VlciE9InVuZGVmaW5lZCIpe3ZhciBhPW5ldyBYNTA5KCk7YS5oZXg9WDUwOS5wZW1Ub0hleChiLmNlcnRpc3N1ZXIpO3RoaXMuaFRMVj1hLmdldElzc3VlckhleCgpfWlmKHR5cGVvZiBiLmNlcnRzdWJqZWN0IT0idW5kZWZpbmVkIil7dmFyIGE9bmV3IFg1MDkoKTthLmhleD1YNTA5LnBlbVRvSGV4KGIuY2VydHN1YmplY3QpO3RoaXMuaFRMVj1hLmdldFN1YmplY3RIZXgoKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5YNTAwTmFtZSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuUkROPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS54NTA5LlJETi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7dGhpcy5hZGRCeVN0cmluZz1mdW5jdGlvbihiKXt0aGlzLmFzbjFBcnJheS5wdXNoKG5ldyBLSlVSLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWUoe3N0cjpifSkpfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgYj1uZXcgS0pVUi5hc24xLkRFUlNldCh7YXJyYXk6dGhpcy5hc24xQXJyYXl9KTt0aGlzLlRMVj1iLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5UTFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEuc3RyIT0idW5kZWZpbmVkIil7dGhpcy5hZGRCeVN0cmluZyhhLnN0cil9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuUkROLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWU9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuQXR0cmlidXRlVHlwZUFuZFZhbHVlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgZD1udWxsO3ZhciBjPW51bGw7dmFyIGE9InV0ZjgiO3RoaXMuc2V0QnlTdHJpbmc9ZnVuY3Rpb24oZSl7aWYoZS5tYXRjaCgvXihbXj1dKyk9KC4rKSQvKSl7dGhpcy5zZXRCeUF0dHJUeXBlQW5kVmFsdWVTdHIoUmVnRXhwLiQxLFJlZ0V4cC4kMil9ZWxzZXt0aHJvdyJtYWxmb3JtZWQgYXR0clR5cGVBbmRWYWx1ZVN0cjogIitlfX07dGhpcy5zZXRCeUF0dHJUeXBlQW5kVmFsdWVTdHI9ZnVuY3Rpb24oZyxmKXt0aGlzLnR5cGVPYmo9S0pVUi5hc24xLng1MDkuT0lELmF0eXBlMm9iaihnKTt2YXIgZT1hO2lmKGc9PSJDIil7ZT0icHJuIn10aGlzLnZhbHVlT2JqPXRoaXMuZ2V0VmFsdWVPYmooZSxmKX07dGhpcy5nZXRWYWx1ZU9iaj1mdW5jdGlvbihmLGUpe2lmKGY9PSJ1dGY4Iil7cmV0dXJuIG5ldyBLSlVSLmFzbjEuREVSVVRGOFN0cmluZyh7c3RyOmV9KX1pZihmPT0icHJuIil7cmV0dXJuIG5ldyBLSlVSLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nKHtzdHI6ZX0pfWlmKGY9PSJ0ZWwiKXtyZXR1cm4gbmV3IEtKVVIuYXNuMS5ERVJUZWxldGV4U3RyaW5nKHtzdHI6ZX0pfWlmKGY9PSJpYTUiKXtyZXR1cm4gbmV3IEtKVVIuYXNuMS5ERVJJQTVTdHJpbmcoe3N0cjplfSl9dGhyb3cidW5zdXBwb3J0ZWQgZGlyZWN0b3J5IHN0cmluZyB0eXBlOiB0eXBlPSIrZisiIHZhbHVlPSIrZX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGU9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMudHlwZU9iaix0aGlzLnZhbHVlT2JqXX0pO3RoaXMuVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLlRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5zdHIhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5U3RyaW5nKGIuc3RyKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvPWZ1bmN0aW9uKGQpe0tKVVIuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYj1udWxsO3ZhciBjPW51bGw7dmFyIGE9bnVsbDt0aGlzLnNldFJTQUtleT1mdW5jdGlvbihlKXtpZighUlNBS2V5LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGUpKXt0aHJvdyJhcmd1bWVudCBpcyBub3QgUlNBS2V5IGluc3RhbmNlIn10aGlzLnJzYUtleT1lO3ZhciBnPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmUubn0pO3ZhciBmPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6ZS5lfSk7dmFyIGk9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W2csZl19KTt2YXIgaD1pLmdldEVuY29kZWRIZXgoKTt0aGlzLmFzbjFBbGdJZD1uZXcgS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZToicnNhRW5jcnlwdGlvbiJ9KTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIraH0pfTt0aGlzLnNldFJTQVBFTT1mdW5jdGlvbihnKXtpZihnLm1hdGNoKC8tLS0tLUJFR0lOIFBVQkxJQyBLRVktLS0tLS8pKXt2YXIgbj1nO249bi5yZXBsYWNlKC9eLS0tLS1bXi1dKy0tLS0tLywiIik7bj1uLnJlcGxhY2UoLy0tLS0tW14tXSstLS0tLVxzKiQvLCIiKTt2YXIgbT1uLnJlcGxhY2UoL1xzKy9nLCIiKTt2YXIgZj1DcnlwdG9KUy5lbmMuQmFzZTY0LnBhcnNlKG0pO3ZhciBpPUNyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KGYpO3ZhciBrPV9yc2FwZW1fZ2V0SGV4VmFsdWVBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGkpO3ZhciBoPWtbMV07dmFyIGw9aC5zdWJzdHIoMik7dmFyIGU9X3JzYXBlbV9nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXgobCk7dmFyIGo9bmV3IFJTQUtleSgpO2ouc2V0UHVibGljKGVbMF0sZVsxXSk7dGhpcy5zZXRSU0FLZXkoail9ZWxzZXt0aHJvdyJrZXkgbm90IHN1cHBvcnRlZCJ9fTt0aGlzLmdldEFTTjFPYmplY3Q9ZnVuY3Rpb24oKXtpZih0aGlzLmFzbjFBbGdJZD09bnVsbHx8dGhpcy5hc24xU3VialBLZXk9PW51bGwpe3Rocm93ImFsZ0lkIGFuZC9vciBzdWJqUHViS2V5IG5vdCBzZXQifXZhciBlPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmFzbjFBbGdJZCx0aGlzLmFzbjFTdWJqUEtleV19KTtyZXR1cm4gZX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRBU04xT2JqZWN0KCk7dGhpcy5oVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O3RoaXMuX3NldFJTQUtleT1mdW5jdGlvbihlKXt2YXIgZz1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50Ijp7YmlnaW50OmUubn19LHsiaW50Ijp7ImludCI6ZS5lfX1dfSk7dmFyIGY9Zy5nZXRFbmNvZGVkSGV4KCk7dGhpcy5hc24xQWxnSWQ9bmV3IEtKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6InJzYUVuY3J5cHRpb24ifSk7dGhpcy5hc24xU3VialBLZXk9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK2Z9KX07dGhpcy5fc2V0RUM9ZnVuY3Rpb24oZSl7dmFyIGY9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtuYW1lOmUuY3VydmVOYW1lfSk7dGhpcy5hc24xQWxnSWQ9bmV3IEtKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6ImVjUHVibGljS2V5Iixhc24xcGFyYW1zOmZ9KTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIrZS5wdWJLZXlIZXh9KX07dGhpcy5fc2V0RFNBPWZ1bmN0aW9uKGUpe3ZhciBmPW5ldyBLSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50Ijp7YmlnaW50OmUucH19LHsiaW50Ijp7YmlnaW50OmUucX19LHsiaW50Ijp7YmlnaW50OmUuZ319XX0pO3RoaXMuYXNuMUFsZ0lkPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOiJkc2EiLGFzbjFwYXJhbXM6Zn0pO3ZhciBnPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmUueX0pO3RoaXMuYXNuMVN1YmpQS2V5PW5ldyBLSlVSLmFzbjEuREVSQml0U3RyaW5nKHtoZXg6IjAwIitnLmdldEVuY29kZWRIZXgoKX0pfTtpZih0eXBlb2YgZCE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZkIGluc3RhbmNlb2YgUlNBS2V5KXt0aGlzLl9zZXRSU0FLZXkoZCl9ZWxzZXtpZih0eXBlb2YgS0pVUi5jcnlwdG8uRUNEU0EhPSJ1bmRlZmluZWQiJiZkIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0Epe3RoaXMuX3NldEVDKGQpfWVsc2V7aWYodHlwZW9mIEtKVVIuY3J5cHRvLkRTQSE9InVuZGVmaW5lZCImJmQgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0Epe3RoaXMuX3NldERTQShkKX1lbHNle2lmKHR5cGVvZiBkLnJzYWtleSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0UlNBS2V5KGQucnNha2V5KX1lbHNle2lmKHR5cGVvZiBkLnJzYXBlbSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0UlNBUEVNKGQucnNhcGVtKX19fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LlRpbWU9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLng1MDkuVGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgYT1udWxsO3RoaXMuc2V0VGltZVBhcmFtcz1mdW5jdGlvbihkKXt0aGlzLnRpbWVQYXJhbXM9ZH07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGQ9bnVsbDtpZih0aGlzLnRpbWVQYXJhbXMhPW51bGwpe2lmKHRoaXMudHlwZT09InV0YyIpe2Q9bmV3IEtKVVIuYXNuMS5ERVJVVENUaW1lKHRoaXMudGltZVBhcmFtcyl9ZWxzZXtkPW5ldyBLSlVSLmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lKHRoaXMudGltZVBhcmFtcyl9fWVsc2V7aWYodGhpcy50eXBlPT0idXRjIil7ZD1uZXcgS0pVUi5hc24xLkRFUlVUQ1RpbWUoKX1lbHNle2Q9bmV3IEtKVVIuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWUoKX19dGhpcy5UTFY9ZC5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuVExWfTt0aGlzLnR5cGU9InV0YyI7aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy50eXBlIT0idW5kZWZpbmVkIil7dGhpcy50eXBlPWMudHlwZX1lbHNle2lmKHR5cGVvZiBjLnN0ciE9InVuZGVmaW5lZCIpe2lmKGMuc3RyLm1hdGNoKC9eWzAtOV17MTJ9WiQvKSl7dGhpcy50eXBlPSJ1dGMifWlmKGMuc3RyLm1hdGNoKC9eWzAtOV17MTR9WiQvKSl7dGhpcy50eXBlPSJnZW4ifX19dGhpcy50aW1lUGFyYW1zPWN9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5UaW1lLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyPWZ1bmN0aW9uKGUpe0tKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPW51bGw7dmFyIGQ9bnVsbDt2YXIgYj1udWxsO3ZhciBjPWZhbHNlO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMubmFtZUFsZz09bnVsbCYmdGhpcy5hc24xQWxnPT1udWxsKXt0aHJvdyJhbGdvcml0aG0gbm90IHNwZWNpZmllZCJ9aWYodGhpcy5uYW1lQWxnIT1udWxsJiZ0aGlzLmFzbjFBbGc9PW51bGwpe3RoaXMuYXNuMUFsZz1LSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvYmoodGhpcy5uYW1lQWxnKX12YXIgZj1bdGhpcy5hc24xQWxnXTtpZighdGhpcy5wYXJhbUVtcHR5KXtmLnB1c2godGhpcy5hc24xUGFyYW1zKX12YXIgZz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpmfSk7dGhpcy5oVExWPWcuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBlIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGUubmFtZSE9InVuZGVmaW5lZCIpe3RoaXMubmFtZUFsZz1lLm5hbWV9aWYodHlwZW9mIGUuYXNuMXBhcmFtcyE9InVuZGVmaW5lZCIpe3RoaXMuYXNuMVBhcmFtcz1lLmFzbjFwYXJhbXN9aWYodHlwZW9mIGUucGFyYW1lbXB0eSE9InVuZGVmaW5lZCIpe3RoaXMucGFyYW1FbXB0eT1lLnBhcmFtZW1wdHl9fWlmKHRoaXMuYXNuMVBhcmFtcz09bnVsbCl7dGhpcy5hc24xUGFyYW1zPW5ldyBLSlVSLmFzbjEuREVSTnVsbCgpfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcixLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWU9ZnVuY3Rpb24oZCl7S0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBjPW51bGw7dmFyIGI9bnVsbDt2YXIgYT17cmZjODIyOiI4MSIsZG5zOiI4MiIsZG46ImE0Iix1cmk6Ijg2In07dGhpcy5leHBsaWNpdD1mYWxzZTt0aGlzLnNldEJ5UGFyYW09ZnVuY3Rpb24oayl7dmFyIGo9bnVsbDt2YXIgZz1udWxsO2lmKHR5cGVvZiBrPT0idW5kZWZpbmVkIil7cmV0dXJufWlmKHR5cGVvZiBrLnJmYzgyMiE9InVuZGVmaW5lZCIpe3RoaXMudHlwZT0icmZjODIyIjtnPW5ldyBLSlVSLmFzbjEuREVSSUE1U3RyaW5nKHtzdHI6a1t0aGlzLnR5cGVdfSl9aWYodHlwZW9mIGsuZG5zIT0idW5kZWZpbmVkIil7dGhpcy50eXBlPSJkbnMiO2c9bmV3IEtKVVIuYXNuMS5ERVJJQTVTdHJpbmcoe3N0cjprW3RoaXMudHlwZV19KX1pZih0eXBlb2Ygay51cmkhPSJ1bmRlZmluZWQiKXt0aGlzLnR5cGU9InVyaSI7Zz1uZXcgS0pVUi5hc24xLkRFUklBNVN0cmluZyh7c3RyOmtbdGhpcy50eXBlXX0pfWlmKHR5cGVvZiBrLmNlcnRpc3N1ZXIhPSJ1bmRlZmluZWQiKXt0aGlzLnR5cGU9ImRuIjt0aGlzLmV4cGxpY2l0PXRydWU7dmFyIGg9ay5jZXJ0aXNzdWVyO3ZhciBmPW51bGw7aWYoaC5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKSl7Zj09aH1pZihoLmluZGV4T2YoIi0tLS0tQkVHSU4gIikhPS0xKXtmPVg1MDkucGVtVG9IZXgoaCl9aWYoZj09bnVsbCl7dGhyb3ciY2VydGlzc3VlciBwYXJhbSBub3QgY2VydCJ9dmFyIGU9bmV3IFg1MDkoKTtlLmhleD1mO3ZhciBpPWUuZ2V0SXNzdWVySGV4KCk7Zz1uZXcgS0pVUi5hc24xLkFTTjFPYmplY3QoKTtnLmhUTFY9aX1pZih0eXBlb2Ygay5jZXJ0c3ViaiE9InVuZGVmaW5lZCIpe3RoaXMudHlwZT0iZG4iO3RoaXMuZXhwbGljaXQ9dHJ1ZTt2YXIgaD1rLmNlcnRzdWJqO3ZhciBmPW51bGw7aWYoaC5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKSl7Zj09aH1pZihoLmluZGV4T2YoIi0tLS0tQkVHSU4gIikhPS0xKXtmPVg1MDkucGVtVG9IZXgoaCl9aWYoZj09bnVsbCl7dGhyb3ciY2VydHN1YmogcGFyYW0gbm90IGNlcnQifXZhciBlPW5ldyBYNTA5KCk7ZS5oZXg9Zjt2YXIgaT1lLmdldFN1YmplY3RIZXgoKTtnPW5ldyBLSlVSLmFzbjEuQVNOMU9iamVjdCgpO2cuaFRMVj1pfWlmKHRoaXMudHlwZT09bnVsbCl7dGhyb3cidW5zdXBwb3J0ZWQgdHlwZSBpbiBwYXJhbXM9IitrfXRoaXMuYXNuMU9iaj1uZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6dGhpcy5leHBsaWNpdCx0YWc6YVt0aGlzLnR5cGVdLG9iajpnfSl9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzbjFPYmouZ2V0RW5jb2RlZEhleCgpfTtpZih0eXBlb2YgZCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlQYXJhbShkKX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkdlbmVyYWxOYW1lLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5HZW5lcmFsTmFtZXM9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWVzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3RoaXMuc2V0QnlQYXJhbUFycmF5PWZ1bmN0aW9uKGUpe2Zvcih2YXIgYz0wO2M8ZS5sZW5ndGg7YysrKXt2YXIgZD1uZXcgS0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWUoZVtjXSk7dGhpcy5hc24xQXJyYXkucHVzaChkKX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBjPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OnRoaXMuYXNuMUFycmF5fSk7cmV0dXJuIGMuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlQYXJhbUFycmF5KGIpfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWVzLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludE5hbWU9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuRGlzdHJpYnV0aW9uUG9pbnROYW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgZT1udWxsO3ZhciBjPW51bGw7dmFyIGE9bnVsbDt2YXIgZD1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMudHlwZSE9ImZ1bGwiKXt0aHJvdyJjdXJyZW50bHkgdHlwZSBzaGFsbCBiZSAnZnVsbCc6ICIrdGhpcy50eXBlfXRoaXMuYXNuMU9iaj1uZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6ZmFsc2UsdGFnOnRoaXMudGFnLG9iajp0aGlzLmFzbjFWfSk7dGhpcy5oVExWPXRoaXMuYXNuMU9iai5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZihLSlVSLmFzbjEueDUwOS5HZW5lcmFsTmFtZXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYikpe3RoaXMudHlwZT0iZnVsbCI7dGhpcy50YWc9ImEwIjt0aGlzLmFzbjFWPWJ9ZWxzZXt0aHJvdyJUaGlzIGNsYXNzIHN1cHBvcnRzIEdlbmVyYWxOYW1lcyBvbmx5IGFzIGFyZ3VtZW50In19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludE5hbWUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50PWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBjPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2UoKTtpZih0aGlzLmFzbjFEUCE9bnVsbCl7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OnRydWUsdGFnOiJhMCIsb2JqOnRoaXMuYXNuMURQfSk7Yy5hcHBlbmRBU04xT2JqZWN0KGQpfXRoaXMuaFRMVj1jLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLmRwb2JqIT0idW5kZWZpbmVkIil7dGhpcy5hc24xRFA9Yi5kcG9ian19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuT0lEPW5ldyBmdW5jdGlvbihhKXt0aGlzLmF0eXBlMm9pZExpc3Q9e0M6IjIuNS40LjYiLE86IjIuNS40LjEwIixPVToiMi41LjQuMTEiLFNUOiIyLjUuNC44IixMOiIyLjUuNC43IixDTjoiMi41LjQuMyIsRE46IjIuNS40LjQ5IixEQzoiMC45LjIzNDIuMTkyMDAzMDAuMTAwLjEuMjUiLH07dGhpcy5uYW1lMm9pZExpc3Q9e3NoYTE6IjEuMy4xNC4zLjIuMjYiLHNoYTI1NjoiMi4xNi44NDAuMS4xMDEuMy40LjIuMSIsc2hhMzg0OiIyLjE2Ljg0MC4xLjEwMS4zLjQuMi4yIixzaGE1MTI6IjIuMTYuODQwLjEuMTAxLjMuNC4yLjMiLHNoYTIyNDoiMi4xNi44NDAuMS4xMDEuMy40LjIuNCIsbWQ1OiIxLjIuODQwLjExMzU0OS4yLjUiLG1kMjoiMS4zLjE0LjcuMi4yLjEiLHJpcGVtZDE2MDoiMS4zLjM2LjMuMi4xIixNRDJ3aXRoUlNBOiIxLjIuODQwLjExMzU0OS4xLjEuMiIsTUQ0d2l0aFJTQToiMS4yLjg0MC4xMTM1NDkuMS4xLjMiLE1ENXdpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS40IixTSEExd2l0aFJTQToiMS4yLjg0MC4xMTM1NDkuMS4xLjUiLFNIQTIyNHdpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS4xNCIsU0hBMjU2d2l0aFJTQToiMS4yLjg0MC4xMTM1NDkuMS4xLjExIixTSEEzODR3aXRoUlNBOiIxLjIuODQwLjExMzU0OS4xLjEuMTIiLFNIQTUxMndpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS4xMyIsU0hBMXdpdGhFQ0RTQToiMS4yLjg0MC4xMDA0NS40LjEiLFNIQTIyNHdpdGhFQ0RTQToiMS4yLjg0MC4xMDA0NS40LjMuMSIsU0hBMjU2d2l0aEVDRFNBOiIxLjIuODQwLjEwMDQ1LjQuMy4yIixTSEEzODR3aXRoRUNEU0E6IjEuMi44NDAuMTAwNDUuNC4zLjMiLFNIQTUxMndpdGhFQ0RTQToiMS4yLjg0MC4xMDA0NS40LjMuNCIsZHNhOiIxLjIuODQwLjEwMDQwLjQuMSIsU0hBMXdpdGhEU0E6IjEuMi44NDAuMTAwNDAuNC4zIixTSEEyMjR3aXRoRFNBOiIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4xIixTSEEyNTZ3aXRoRFNBOiIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4yIixyc2FFbmNyeXB0aW9uOiIxLjIuODQwLjExMzU0OS4xLjEuMSIsY291bnRyeU5hbWU6IjIuNS40LjYiLG9yZ2FuaXphdGlvbjoiMi41LjQuMTAiLG9yZ2FuaXphdGlvbmFsVW5pdDoiMi41LjQuMTEiLHN0YXRlT3JQcm92aW5jZU5hbWU6IjIuNS40LjgiLGxvY2FsaXR5OiIyLjUuNC43Iixjb21tb25OYW1lOiIyLjUuNC4zIixzdWJqZWN0S2V5SWRlbnRpZmllcjoiMi41LjI5LjE0IixrZXlVc2FnZToiMi41LjI5LjE1IixzdWJqZWN0QWx0TmFtZToiMi41LjI5LjE3IixiYXNpY0NvbnN0cmFpbnRzOiIyLjUuMjkuMTkiLG5hbWVDb25zdHJhaW50czoiMi41LjI5LjMwIixjUkxEaXN0cmlidXRpb25Qb2ludHM6IjIuNS4yOS4zMSIsY2VydGlmaWNhdGVQb2xpY2llczoiMi41LjI5LjMyIixhdXRob3JpdHlLZXlJZGVudGlmaWVyOiIyLjUuMjkuMzUiLHBvbGljeUNvbnN0cmFpbnRzOiIyLjUuMjkuMzYiLGV4dEtleVVzYWdlOiIyLjUuMjkuMzciLGF1dGhvcml0eUluZm9BY2Nlc3M6IjEuMy42LjEuNS41LjcuMS4xIixhbnlFeHRlbmRlZEtleVVzYWdlOiIyLjUuMjkuMzcuMCIsc2VydmVyQXV0aDoiMS4zLjYuMS41LjUuNy4zLjEiLGNsaWVudEF1dGg6IjEuMy42LjEuNS41LjcuMy4yIixjb2RlU2lnbmluZzoiMS4zLjYuMS41LjUuNy4zLjMiLGVtYWlsUHJvdGVjdGlvbjoiMS4zLjYuMS41LjUuNy4zLjQiLHRpbWVTdGFtcGluZzoiMS4zLjYuMS41LjUuNy4zLjgiLG9jc3BTaWduaW5nOiIxLjMuNi4xLjUuNS43LjMuOSIsZWNQdWJsaWNLZXk6IjEuMi44NDAuMTAwNDUuMi4xIixzZWNwMjU2cjE6IjEuMi44NDAuMTAwNDUuMy4xLjciLHNlY3AyNTZrMToiMS4zLjEzMi4wLjEwIixzZWNwMzg0cjE6IjEuMy4xMzIuMC4zNCIscGtjczVQQkVTMjoiMS4yLjg0MC4xMTM1NDkuMS41LjEzIixwa2NzNVBCS0RGMjoiMS4yLjg0MC4xMTM1NDkuMS41LjEyIiwiZGVzLUVERTMtQ0JDIjoiMS4yLjg0MC4xMTM1NDkuMy43IixkYXRhOiIxLjIuODQwLjExMzU0OS4xLjcuMSIsInNpZ25lZC1kYXRhIjoiMS4yLjg0MC4xMTM1NDkuMS43LjIiLCJlbnZlbG9wZWQtZGF0YSI6IjEuMi44NDAuMTEzNTQ5LjEuNy4zIiwiZGlnZXN0ZWQtZGF0YSI6IjEuMi44NDAuMTEzNTQ5LjEuNy41IiwiZW5jcnlwdGVkLWRhdGEiOiIxLjIuODQwLjExMzU0OS4xLjcuNiIsImF1dGhlbnRpY2F0ZWQtZGF0YSI6IjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4xLjIiLHRzdGluZm86IjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4xLjQiLH07dGhpcy5vYmpDYWNoZT17fTt0aGlzLm5hbWUyb2JqPWZ1bmN0aW9uKGIpe2lmKHR5cGVvZiB0aGlzLm9iakNhY2hlW2JdIT0idW5kZWZpbmVkIil7cmV0dXJuIHRoaXMub2JqQ2FjaGVbYl19aWYodHlwZW9mIHRoaXMubmFtZTJvaWRMaXN0W2JdPT0idW5kZWZpbmVkIil7dGhyb3ciTmFtZSBvZiBPYmplY3RJZGVudGlmaWVyIG5vdCBkZWZpbmVkOiAiK2J9dmFyIGM9dGhpcy5uYW1lMm9pZExpc3RbYl07dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtvaWQ6Y30pO3RoaXMub2JqQ2FjaGVbYl09ZDtyZXR1cm4gZH07dGhpcy5hdHlwZTJvYmo9ZnVuY3Rpb24oYil7aWYodHlwZW9mIHRoaXMub2JqQ2FjaGVbYl0hPSJ1bmRlZmluZWQiKXtyZXR1cm4gdGhpcy5vYmpDYWNoZVtiXX1pZih0eXBlb2YgdGhpcy5hdHlwZTJvaWRMaXN0W2JdPT0idW5kZWZpbmVkIil7dGhyb3ciQXR0cmlidXRlVHlwZSBuYW1lIHVuZGVmaW5lZDogIitifXZhciBjPXRoaXMuYXR5cGUyb2lkTGlzdFtiXTt2YXIgZD1uZXcgS0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXIoe29pZDpjfSk7dGhpcy5vYmpDYWNoZVtiXT1kO3JldHVybiBkfX07S0pVUi5hc24xLng1MDkuT0lELm9pZDJuYW1lPWZ1bmN0aW9uKGIpe3ZhciBjPUtKVVIuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZExpc3Q7Zm9yKHZhciBhIGluIGMpe2lmKGNbYV09PWIpe3JldHVybiBhfX1yZXR1cm4iIn07S0pVUi5hc24xLng1MDkuT0lELm5hbWUyb2lkPWZ1bmN0aW9uKGEpe3ZhciBiPUtKVVIuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZExpc3Q7aWYoYlthXT09PXVuZGVmaW5lZCl7cmV0dXJuIiJ9cmV0dXJuIGJbYV19O0tKVVIuYXNuMS54NTA5Llg1MDlVdGlsPW5ldyBmdW5jdGlvbigpe3RoaXMuZ2V0UEtDUzhQdWJLZXlQRU1mcm9tUlNBS2V5PWZ1bmN0aW9uKGkpe3ZhciBoPW51bGw7dmFyIGY9S0pVUi5hc24xLkFTTjFVdGlsLmJpZ0ludFRvTWluVHdvc0NvbXBsZW1lbnRzSGV4KGkubik7dmFyIGo9S0pVUi5hc24xLkFTTjFVdGlsLmludGVnZXJUb0J5dGVIZXgoaS5lKTt2YXIgYT1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2hleDpmfSk7dmFyIGc9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtoZXg6an0pO3ZhciBsPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OlthLGddfSk7dmFyIGM9bC5nZXRFbmNvZGVkSGV4KCk7dmFyIGQ9bmV3IEtKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6InJzYUVuY3J5cHRpb24ifSk7dmFyIGI9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK2N9KTt2YXIgaz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbZCxiXX0pO3ZhciBlPWsuZ2V0RW5jb2RlZEhleCgpO3ZhciBoPUtKVVIuYXNuMS5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGUsIlBVQkxJQyBLRVkiKTtyZXR1cm4gaH19O0tKVVIuYXNuMS54NTA5Llg1MDlVdGlsLm5ld0NlcnRQRU09ZnVuY3Rpb24oZil7dmFyIGM9S0pVUi5hc24xLng1MDk7dmFyIGU9bmV3IGMuVEJTQ2VydGlmaWNhdGUoKTtpZihmLnNlcmlhbCE9PXVuZGVmaW5lZCl7ZS5zZXRTZXJpYWxOdW1iZXJCeVBhcmFtKGYuc2VyaWFsKX1lbHNle3Rocm93InNlcmlhbCBudW1iZXIgdW5kZWZpbmVkLiJ9aWYodHlwZW9mIGYuc2lnYWxnLm5hbWU9PSJzdHJpbmciKXtlLnNldFNpZ25hdHVyZUFsZ0J5UGFyYW0oZi5zaWdhbGcpfWVsc2V7dGhyb3cidW5wcm9wZXIgc2lnbmF0dXJlIGFsZ29yaXRobSBuYW1lIn1pZihmLmlzc3VlciE9PXVuZGVmaW5lZCl7ZS5zZXRJc3N1ZXJCeVBhcmFtKGYuaXNzdWVyKX1lbHNle3Rocm93Imlzc3VlciBuYW1lIHVuZGVmaW5lZC4ifWlmKGYubm90YmVmb3JlIT09dW5kZWZpbmVkKXtlLnNldE5vdEJlZm9yZUJ5UGFyYW0oZi5ub3RiZWZvcmUpfWVsc2V7dGhyb3cibm90YmVmb3JlIHVuZGVmaW5lZC4ifWlmKGYubm90YWZ0ZXIhPT11bmRlZmluZWQpe2Uuc2V0Tm90QWZ0ZXJCeVBhcmFtKGYubm90YWZ0ZXIpfWVsc2V7dGhyb3cibm90YWZ0ZXIgdW5kZWZpbmVkLiJ9aWYoZi5zdWJqZWN0IT09dW5kZWZpbmVkKXtlLnNldFN1YmplY3RCeVBhcmFtKGYuc3ViamVjdCl9ZWxzZXt0aHJvdyJzdWJqZWN0IG5hbWUgdW5kZWZpbmVkLiJ9aWYoZi5zYmpwdWJrZXkhPT11bmRlZmluZWQpe2Uuc2V0U3ViamVjdFB1YmxpY0tleUJ5R2V0S2V5KGYuc2JqcHVia2V5KX1lbHNle3Rocm93InN1YmplY3QgcHVibGljIGtleSB1bmRlZmluZWQuIn1pZihmLmV4dCE9PXVuZGVmaW5lZCYmZi5leHQubGVuZ3RoIT09dW5kZWZpbmVkKXtmb3IodmFyIGI9MDtiPGYuZXh0Lmxlbmd0aDtiKyspe2ZvcihrZXkgaW4gZi5leHRbYl0pe2UuYXBwZW5kRXh0ZW5zaW9uQnlOYW1lKGtleSxmLmV4dFtiXVtrZXldKX19fWlmKGYuY2FrZXk9PT11bmRlZmluZWQmJmYuc2lnaGV4PT09dW5kZWZpbmVkKXt0aHJvdyJwYXJhbSBjYWtleSBhbmQgc2lnaGV4IHVuZGVmaW5lZC4ifXZhciBkPW51bGw7dmFyIGE9bnVsbDtpZihmLmNha2V5KXtkPUtFWVVUSUwuZ2V0S2V5LmFwcGx5KG51bGwsZi5jYWtleSk7YT1uZXcgYy5DZXJ0aWZpY2F0ZSh7dGJzY2VydG9iajplLHBydmtleW9iajpkfSk7YS5zaWduKCl9aWYoZi5zaWdoZXgpe2E9bmV3IGMuQ2VydGlmaWNhdGUoe3Ric2NlcnRvYmo6ZX0pO2Euc2V0U2lnbmF0dXJlSGV4KGYuc2lnaGV4KX1yZXR1cm4gYS5nZXRQRU1TdHJpbmcoKX07Ci8qISBhc24xY21zLTEuMC4yLmpzIChjKSAyMDEzLTIwMTQgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSPT0idW5kZWZpbmVkInx8IUtKVVIpe0tKVVI9e319aWYodHlwZW9mIEtKVVIuYXNuMT09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEpe0tKVVIuYXNuMT17fX1pZih0eXBlb2YgS0pVUi5hc24xLmNtcz09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEuY21zKXtLSlVSLmFzbjEuY21zPXt9fUtKVVIuYXNuMS5jbXMuQXR0cmlidXRlPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS5jbXMuQXR0cmlidXRlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1bXTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZixlLGM7Zj1uZXcgS0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXIoe29pZDp0aGlzLmF0dHJUeXBlT2lkfSk7ZT1uZXcgS0pVUi5hc24xLkRFUlNldCh7YXJyYXk6dGhpcy52YWx1ZUxpc3R9KTt0cnl7ZS5nZXRFbmNvZGVkSGV4KCl9Y2F0Y2goZCl7dGhyb3ciZmFpbCB2YWx1ZVNldC5nZXRFbmNvZGVkSGV4IGluIEF0dHJpYnV0ZSgxKS8iK2R9Yz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbZixlXX0pO3RyeXt0aGlzLmhUTFY9Yy5nZXRFbmNvZGVkSGV4KCl9Y2F0Y2goZCl7dGhyb3ciZmFpbGVkIHNlcS5nZXRFbmNvZGVkSGV4IGluIEF0dHJpYnV0ZSgyKS8iK2R9cmV0dXJuIHRoaXMuaFRMVn19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY21zLkNvbnRlbnRUeXBlPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS5jbXMuQ29udGVudFR5cGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS4zIjt2YXIgYT1udWxsO2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7dmFyIGE9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKGIpO3RoaXMudmFsdWVMaXN0PVthXX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuQ29udGVudFR5cGUsS0pVUi5hc24xLmNtcy5BdHRyaWJ1dGUpO0tKVVIuYXNuMS5jbXMuTWVzc2FnZURpZ2VzdD1mdW5jdGlvbihlKXtLSlVSLmFzbjEuY21zLk1lc3NhZ2VEaWdlc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS40IjtpZih0eXBlb2YgZSE9InVuZGVmaW5lZCIpe2lmKGUuZWNpT2JqIGluc3RhbmNlb2YgS0pVUi5hc24xLmNtcy5FbmNhcHN1bGF0ZWRDb250ZW50SW5mbyYmdHlwZW9mIGUuaGFzaEFsZz09InN0cmluZyIpe3ZhciBiPWUuZWNpT2JqLmVDb250ZW50VmFsdWVIZXg7dmFyIGE9ZS5oYXNoQWxnO3ZhciBjPUtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChiLGEpO3ZhciBkPW5ldyBLSlVSLmFzbjEuREVST2N0ZXRTdHJpbmcoe2hleDpjfSk7ZC5nZXRFbmNvZGVkSGV4KCk7dGhpcy52YWx1ZUxpc3Q9W2RdfWVsc2V7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJPY3RldFN0cmluZyhlKTtkLmdldEVuY29kZWRIZXgoKTt0aGlzLnZhbHVlTGlzdD1bZF19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5NZXNzYWdlRGlnZXN0LEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKTtLSlVSLmFzbjEuY21zLlNpZ25pbmdUaW1lPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuU2lnbmluZ1RpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS41IjtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe3ZhciBhPW5ldyBLSlVSLmFzbjEueDUwOS5UaW1lKGMpO3RyeXthLmdldEVuY29kZWRIZXgoKX1jYXRjaChiKXt0aHJvdyJTaWduaW5nVGltZS5nZXRFbmNvZGVkSGV4KCkgZmFpbGVkLyIrYn10aGlzLnZhbHVlTGlzdD1bYV19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLlNpZ25pbmdUaW1lLEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKTtLSlVSLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZT1mdW5jdGlvbihkKXtLSlVSLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hdHRyVHlwZU9pZD0iMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMTIiO3ZhciBhPUtKVVIuYXNuMTt2YXIgYz1LSlVSLmFzbjEuY21zO3ZhciBiPUtKVVIuY3J5cHRvO3RoaXMuc2V0Q2VydHM9ZnVuY3Rpb24obCl7dmFyIGo9W107Zm9yKHZhciBoPTA7aDxsLmxlbmd0aDtoKyspe3ZhciBmPUtFWVVUSUwuZ2V0SGV4RnJvbVBFTShsW2hdKTt2YXIgZT1iLlV0aWwuaGFzaEhleChmLCJzaGExIik7dmFyIG09bmV3IGEuREVST2N0ZXRTdHJpbmcoe2hleDplfSk7bS5nZXRFbmNvZGVkSGV4KCk7dmFyIGs9bmV3IGMuSXNzdWVyQW5kU2VyaWFsTnVtYmVyKHtjZXJ0OmxbaF19KTtrLmdldEVuY29kZWRIZXgoKTt2YXIgbj1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6W20sa119KTtuLmdldEVuY29kZWRIZXgoKTtqLnB1c2gobil9dmFyIGc9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5Omp9KTtnLmdldEVuY29kZWRIZXgoKTt0aGlzLnZhbHVlTGlzdD1bZ119O2lmKHR5cGVvZiBkIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGQuYXJyYXk9PSJvYmplY3QiKXt0aGlzLnNldENlcnRzKGQuYXJyYXkpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuU2lnbmluZ0NlcnRpZmljYXRlLEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKTtLSlVSLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZVYyPWZ1bmN0aW9uKGUpe0tKVVIuYXNuMS5jbXMuU2lnbmluZ0NlcnRpZmljYXRlVjIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjQ3Ijt2YXIgYj1LSlVSLmFzbjE7dmFyIGY9S0pVUi5hc24xLng1MDk7dmFyIGQ9S0pVUi5hc24xLmNtczt2YXIgYz1LSlVSLmNyeXB0bzt0aGlzLnNldENlcnRzPWZ1bmN0aW9uKHAsaCl7dmFyIG49W107Zm9yKHZhciBsPTA7bDxwLmxlbmd0aDtsKyspe3ZhciBqPUtFWVVUSUwuZ2V0SGV4RnJvbVBFTShwW2xdKTt2YXIgcj1bXTtpZihoIT0ic2hhMjU2Iil7ci5wdXNoKG5ldyBmLkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6aH0pKX12YXIgZz1jLlV0aWwuaGFzaEhleChqLGgpO3ZhciBxPW5ldyBiLkRFUk9jdGV0U3RyaW5nKHtoZXg6Z30pO3EuZ2V0RW5jb2RlZEhleCgpO3IucHVzaChxKTt2YXIgbT1uZXcgZC5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIoe2NlcnQ6cFtsXX0pO20uZ2V0RW5jb2RlZEhleCgpO3IucHVzaChtKTt2YXIgbz1uZXcgYi5ERVJTZXF1ZW5jZSh7YXJyYXk6cn0pO28uZ2V0RW5jb2RlZEhleCgpO24ucHVzaChvKX12YXIgaz1uZXcgYi5ERVJTZXF1ZW5jZSh7YXJyYXk6bn0pO2suZ2V0RW5jb2RlZEhleCgpO3RoaXMudmFsdWVMaXN0PVtrXX07aWYodHlwZW9mIGUhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZS5hcnJheT09Im9iamVjdCIpe3ZhciBhPSJzaGEyNTYiO2lmKHR5cGVvZiBlLmhhc2hBbGc9PSJzdHJpbmciKXthPWUuaGFzaEFsZ310aGlzLnNldENlcnRzKGUuYXJyYXksYSl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5TaWduaW5nQ2VydGlmaWNhdGVWMixLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNtcy5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXI9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLmNtcy5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBlPW51bGw7dmFyIGI9bnVsbDt2YXIgYT1LSlVSLmFzbjE7dmFyIGQ9YS54NTA5O3RoaXMuc2V0QnlDZXJ0UEVNPWZ1bmN0aW9uKGkpe3ZhciBnPUtFWVVUSUwuZ2V0SGV4RnJvbVBFTShpKTt2YXIgZj1uZXcgWDUwOSgpO2YuaGV4PWc7dmFyIGo9Zi5nZXRJc3N1ZXJIZXgoKTt0aGlzLmRJc3N1ZXI9bmV3IGQuWDUwME5hbWUoKTt0aGlzLmRJc3N1ZXIuaFRMVj1qO3ZhciBoPWYuZ2V0U2VyaWFsTnVtYmVySGV4KCk7dGhpcy5kU2VyaWFsPW5ldyBhLkRFUkludGVnZXIoe2hleDpofSl9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBmPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmRJc3N1ZXIsdGhpcy5kU2VyaWFsXX0pO3RoaXMuaFRMVj1mLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjPT0ic3RyaW5nIiYmYy5pbmRleE9mKCItLS0tLUJFR0lOICIpIT0tMSl7dGhpcy5zZXRCeUNlcnRQRU0oYyl9aWYoYy5pc3N1ZXImJmMuc2VyaWFsKXtpZihjLmlzc3VlciBpbnN0YW5jZW9mIEtKVVIuYXNuMS54NTA5Llg1MDBOYW1lKXt0aGlzLmRJc3N1ZXI9Yy5pc3N1ZXJ9ZWxzZXt0aGlzLmRJc3N1ZXI9bmV3IEtKVVIuYXNuMS54NTA5Llg1MDBOYW1lKGMuaXNzdWVyKX1pZihjLnNlcmlhbCBpbnN0YW5jZW9mIEtKVVIuYXNuMS5ERVJJbnRlZ2VyKXt0aGlzLmRTZXJpYWw9Yy5zZXJpYWx9ZWxzZXt0aGlzLmRTZXJpYWw9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKGMuc2VyaWFsKX19aWYodHlwZW9mIGMuY2VydD09InN0cmluZyIpe3RoaXMuc2V0QnlDZXJ0UEVNKGMuY2VydCl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jbXMuQXR0cmlidXRlTGlzdD1mdW5jdGlvbihhKXtLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZUxpc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMubGlzdD1uZXcgQXJyYXkoKTt0aGlzLnNvcnRGbGFnPXRydWU7dGhpcy5hZGQ9ZnVuY3Rpb24oYil7aWYoYiBpbnN0YW5jZW9mIEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKXt0aGlzLmxpc3QucHVzaChiKX19O3RoaXMubGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGlzdC5sZW5ndGh9O3RoaXMuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmxpc3Q9bmV3IEFycmF5KCk7dGhpcy5oVExWPW51bGw7dGhpcy5oVj1udWxsfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5oVExWPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMuaFRMVn12YXIgYj1uZXcgS0pVUi5hc24xLkRFUlNldCh7YXJyYXk6dGhpcy5saXN0LHNvcnRmbGFnOnRoaXMuc29ydEZsYWd9KTt0aGlzLmhUTFY9Yi5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYS5zb3J0ZmxhZyE9InVuZGVmaW5lZCImJmEuc29ydGZsYWc9PWZhbHNlKXt0aGlzLnNvcnRGbGFnPWZhbHNlfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlTGlzdCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNtcy5TaWduZXJJbmZvPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuU2lnbmVySW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS5jbXM7dmFyIGQ9S0pVUi5hc24xLng1MDk7dGhpcy5kQ01TVmVyc2lvbj1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50IjoxfSk7dGhpcy5kU2lnbmVySWRlbnRpZmllcj1udWxsO3RoaXMuZERpZ2VzdEFsZ29yaXRobT1udWxsO3RoaXMuZFNpZ25lZEF0dHJzPW5ldyBiLkF0dHJpYnV0ZUxpc3QoKTt0aGlzLmRTaWdBbGc9bnVsbDt0aGlzLmRTaWc9bnVsbDt0aGlzLmRVbnNpZ25lZEF0dHJzPW5ldyBiLkF0dHJpYnV0ZUxpc3QoKTt0aGlzLnNldFNpZ25lcklkZW50aWZpZXI9ZnVuY3Rpb24oZil7aWYodHlwZW9mIGY9PSJzdHJpbmciJiZmLmluZGV4T2YoIkNFUlRJRklDQVRFIikhPS0xJiZmLmluZGV4T2YoIkJFR0lOIikhPS0xJiZmLmluZGV4T2YoIkVORCIpIT0tMSl7dmFyIGU9Zjt0aGlzLmRTaWduZXJJZGVudGlmaWVyPW5ldyBiLklzc3VlckFuZFNlcmlhbE51bWJlcih7Y2VydDpmfSl9fTt0aGlzLnNldEZvckNvbnRlbnRBbmRIYXNoPWZ1bmN0aW9uKGUpe2lmKHR5cGVvZiBlIT0idW5kZWZpbmVkIil7aWYoZS5lY2lPYmogaW5zdGFuY2VvZiBLSlVSLmFzbjEuY21zLkVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvKXt0aGlzLmRTaWduZWRBdHRycy5hZGQobmV3IGIuQ29udGVudFR5cGUoe29pZDoiMS4yLjg0MC4xMTM1NDkuMS43LjEifSkpO3RoaXMuZFNpZ25lZEF0dHJzLmFkZChuZXcgYi5NZXNzYWdlRGlnZXN0KHtlY2lPYmo6ZS5lY2lPYmosaGFzaEFsZzplLmhhc2hBbGd9KSl9aWYodHlwZW9mIGUuc2RPYmohPSJ1bmRlZmluZWQiJiZlLnNkT2JqIGluc3RhbmNlb2YgS0pVUi5hc24xLmNtcy5TaWduZWREYXRhKXtpZihlLnNkT2JqLmRpZ2VzdEFsZ05hbWVMaXN0LmpvaW4oIjoiKS5pbmRleE9mKGUuaGFzaEFsZyk9PS0xKXtlLnNkT2JqLmRpZ2VzdEFsZ05hbWVMaXN0LnB1c2goZS5oYXNoQWxnKX19aWYodHlwZW9mIGUuaGFzaEFsZz09InN0cmluZyIpe3RoaXMuZERpZ2VzdEFsZ29yaXRobT1uZXcgZC5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOmUuaGFzaEFsZ30pfX19O3RoaXMuc2lnbj1mdW5jdGlvbihqLGYpe3RoaXMuZFNpZ0FsZz1uZXcgZC5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOmZ9KTt2YXIgZz10aGlzLmRTaWduZWRBdHRycy5nZXRFbmNvZGVkSGV4KCk7dmFyIGU9S0VZVVRJTC5nZXRLZXkoaik7dmFyIGk9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOmZ9KTtpLmluaXQoZSk7aS51cGRhdGVIZXgoZyk7dmFyIGg9aS5zaWduKCk7dGhpcy5kU2lnPW5ldyBhLkRFUk9jdGV0U3RyaW5nKHtoZXg6aH0pfTt0aGlzLmFkZFVuc2lnbmVkPWZ1bmN0aW9uKGUpe3RoaXMuaFRMVj1udWxsO3RoaXMuZFVuc2lnbmVkQXR0cnMuaFRMVj1udWxsO3RoaXMuZFVuc2lnbmVkQXR0cnMuYWRkKGUpfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmRTaWduZWRBdHRycyBpbnN0YW5jZW9mIEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlTGlzdCYmdGhpcy5kU2lnbmVkQXR0cnMubGVuZ3RoKCk9PTApe3Rocm93IlNpZ25lZEF0dHJzIGxlbmd0aCA9IDAgKGVtcHR5KSJ9dmFyIGU9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6dGhpcy5kU2lnbmVkQXR0cnMsdGFnOiJhMCIsZXhwbGljaXQ6ZmFsc2V9KTt2YXIgaD1udWxsO2lmKHRoaXMuZFVuc2lnbmVkQXR0cnMubGVuZ3RoKCk+MCl7aD1uZXcgYS5ERVJUYWdnZWRPYmplY3Qoe29iajp0aGlzLmRVbnNpZ25lZEF0dHJzLHRhZzoiYTEiLGV4cGxpY2l0OmZhbHNlfSl9dmFyIGc9W3RoaXMuZENNU1ZlcnNpb24sdGhpcy5kU2lnbmVySWRlbnRpZmllcix0aGlzLmREaWdlc3RBbGdvcml0aG0sZSx0aGlzLmRTaWdBbGcsdGhpcy5kU2lnLF07aWYoaCE9bnVsbCl7Zy5wdXNoKGgpfXZhciBmPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpnfSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLlNpZ25lckluZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jbXMuRW5jYXBzdWxhdGVkQ29udGVudEluZm89ZnVuY3Rpb24oYyl7S0pVUi5hc24xLmNtcy5FbmNhcHN1bGF0ZWRDb250ZW50SW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS5jbXM7dmFyIGQ9S0pVUi5hc24xLng1MDk7dGhpcy5kRUNvbnRlbnRUeXBlPW5ldyBhLkRFUk9iamVjdElkZW50aWZpZXIoe25hbWU6ImRhdGEifSk7dGhpcy5kRUNvbnRlbnQ9bnVsbDt0aGlzLmlzRGV0YWNoZWQ9ZmFsc2U7dGhpcy5lQ29udGVudFZhbHVlSGV4PW51bGw7dGhpcy5zZXRDb250ZW50VHlwZT1mdW5jdGlvbihlKXtpZihlLm1hdGNoKC9eWzAtMl1bLl1bMC05Ll0rJC8pKXt0aGlzLmRFQ29udGVudFR5cGU9bmV3IGEuREVST2JqZWN0SWRlbnRpZmllcih7b2lkOmV9KX1lbHNle3RoaXMuZEVDb250ZW50VHlwZT1uZXcgYS5ERVJPYmplY3RJZGVudGlmaWVyKHtuYW1lOmV9KX19O3RoaXMuc2V0Q29udGVudFZhbHVlPWZ1bmN0aW9uKGUpe2lmKHR5cGVvZiBlIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGUuaGV4PT0ic3RyaW5nIil7dGhpcy5lQ29udGVudFZhbHVlSGV4PWUuaGV4fWVsc2V7aWYodHlwZW9mIGUuc3RyPT0ic3RyaW5nIil7dGhpcy5lQ29udGVudFZhbHVlSGV4PXV0Zjh0b2hleChlLnN0cil9fX19O3RoaXMuc2V0Q29udGVudFZhbHVlSGV4PWZ1bmN0aW9uKGUpe3RoaXMuZUNvbnRlbnRWYWx1ZUhleD1lfTt0aGlzLnNldENvbnRlbnRWYWx1ZVN0cj1mdW5jdGlvbihlKXt0aGlzLmVDb250ZW50VmFsdWVIZXg9dXRmOHRvaGV4KGUpfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5lQ29udGVudFZhbHVlSGV4IT0ic3RyaW5nIil7dGhyb3ciZUNvbnRlbnRWYWx1ZSBub3QgeWV0IHNldCJ9dmFyIGc9bmV3IGEuREVST2N0ZXRTdHJpbmcoe2hleDp0aGlzLmVDb250ZW50VmFsdWVIZXh9KTt0aGlzLmRFQ29udGVudD1uZXcgYS5ERVJUYWdnZWRPYmplY3Qoe29iajpnLHRhZzoiYTAiLGV4cGxpY2l0OnRydWV9KTt2YXIgZT1bdGhpcy5kRUNvbnRlbnRUeXBlXTtpZighdGhpcy5pc0RldGFjaGVkKXtlLnB1c2godGhpcy5kRUNvbnRlbnQpfXZhciBmPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTplfSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLkVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY21zLkNvbnRlbnRJbmZvPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuQ29udGVudEluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY21zO3ZhciBkPUtKVVIuYXNuMS54NTA5O3RoaXMuZENvbnRlbnRUeXBlPW51bGw7dGhpcy5kQ29udGVudD1udWxsO3RoaXMuc2V0Q29udGVudFR5cGU9ZnVuY3Rpb24oZSl7aWYodHlwZW9mIGU9PSJzdHJpbmciKXt0aGlzLmRDb250ZW50VHlwZT1kLk9JRC5uYW1lMm9iaihlKX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBmPW5ldyBhLkRFUlRhZ2dlZE9iamVjdCh7b2JqOnRoaXMuZENvbnRlbnQsdGFnOiJhMCIsZXhwbGljaXQ6dHJ1ZX0pO3ZhciBlPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpbdGhpcy5kQ29udGVudFR5cGUsZl19KTt0aGlzLmhUTFY9ZS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZihjLnR5cGUpe3RoaXMuc2V0Q29udGVudFR5cGUoYy50eXBlKX1pZihjLm9iaiYmYy5vYmogaW5zdGFuY2VvZiBhLkFTTjFPYmplY3Qpe3RoaXMuZENvbnRlbnQ9Yy5vYmp9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5Db250ZW50SW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNtcy5TaWduZWREYXRhPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuU2lnbmVkRGF0YS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS5jbXM7dmFyIGQ9S0pVUi5hc24xLng1MDk7dGhpcy5kQ01TVmVyc2lvbj1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50IjoxfSk7dGhpcy5kRGlnZXN0QWxncz1udWxsO3RoaXMuZGlnZXN0QWxnTmFtZUxpc3Q9W107dGhpcy5kRW5jYXBDb250ZW50SW5mbz1uZXcgYi5FbmNhcHN1bGF0ZWRDb250ZW50SW5mbygpO3RoaXMuZENlcnRzPW51bGw7dGhpcy5jZXJ0aWZpY2F0ZUxpc3Q9W107dGhpcy5jcmxMaXN0PVtdO3RoaXMuc2lnbmVySW5mb0xpc3Q9W25ldyBiLlNpZ25lckluZm8oKV07dGhpcy5hZGRDZXJ0aWZpY2F0ZXNCeVBFTT1mdW5jdGlvbihlKXt2YXIgZj1LRVlVVElMLmdldEhleEZyb21QRU0oZSk7dmFyIGc9bmV3IGEuQVNOMU9iamVjdCgpO2cuaFRMVj1mO3RoaXMuY2VydGlmaWNhdGVMaXN0LnB1c2goZyl9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLmhUTFY9PSJzdHJpbmciKXtyZXR1cm4gdGhpcy5oVExWfWlmKHRoaXMuZERpZ2VzdEFsZ3M9PW51bGwpe3ZhciBrPVtdO2Zvcih2YXIgaj0wO2o8dGhpcy5kaWdlc3RBbGdOYW1lTGlzdC5sZW5ndGg7aisrKXt2YXIgaD10aGlzLmRpZ2VzdEFsZ05hbWVMaXN0W2pdO3ZhciBtPW5ldyBkLkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6aH0pO2sucHVzaChtKX10aGlzLmREaWdlc3RBbGdzPW5ldyBhLkRFUlNldCh7YXJyYXk6a30pfXZhciBlPVt0aGlzLmRDTVNWZXJzaW9uLHRoaXMuZERpZ2VzdEFsZ3MsdGhpcy5kRW5jYXBDb250ZW50SW5mb107aWYodGhpcy5kQ2VydHM9PW51bGwpe2lmKHRoaXMuY2VydGlmaWNhdGVMaXN0Lmxlbmd0aD4wKXt2YXIgbD1uZXcgYS5ERVJTZXQoe2FycmF5OnRoaXMuY2VydGlmaWNhdGVMaXN0fSk7dGhpcy5kQ2VydHM9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6bCx0YWc6ImEwIixleHBsaWNpdDpmYWxzZX0pfX1pZih0aGlzLmRDZXJ0cyE9bnVsbCl7ZS5wdXNoKHRoaXMuZENlcnRzKX12YXIgZz1uZXcgYS5ERVJTZXQoe2FycmF5OnRoaXMuc2lnbmVySW5mb0xpc3R9KTtlLnB1c2goZyk7dmFyIGY9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmV9KTt0aGlzLmhUTFY9Zi5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07dGhpcy5nZXRDb250ZW50SW5mbz1mdW5jdGlvbigpe3RoaXMuZ2V0RW5jb2RlZEhleCgpO3ZhciBlPW5ldyBiLkNvbnRlbnRJbmZvKHt0eXBlOiJzaWduZWQtZGF0YSIsb2JqOnRoaXN9KTtyZXR1cm4gZX07dGhpcy5nZXRDb250ZW50SW5mb0VuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldENvbnRlbnRJbmZvKCk7dmFyIGY9ZS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIGZ9O3RoaXMuZ2V0UEVNPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRDb250ZW50SW5mb0VuY29kZWRIZXgoKTt2YXIgZj1hLkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgoZSwiQ01TIik7cmV0dXJuIGZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLlNpZ25lZERhdGEsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jbXMuQ01TVXRpbD1uZXcgZnVuY3Rpb24oKXt9O0tKVVIuYXNuMS5jbXMuQ01TVXRpbC5uZXdTaWduZWREYXRhPWZ1bmN0aW9uKGEpe3ZhciBoPUtKVVIuYXNuMS5jbXM7dmFyIGc9S0pVUi5hc24xLmNhZGVzO3ZhciBmPW5ldyBoLlNpZ25lZERhdGEoKTtmLmRFbmNhcENvbnRlbnRJbmZvLnNldENvbnRlbnRWYWx1ZShhLmNvbnRlbnQpO2lmKHR5cGVvZiBhLmNlcnRzPT0ib2JqZWN0Iil7Zm9yKHZhciBiPTA7YjxhLmNlcnRzLmxlbmd0aDtiKyspe2YuYWRkQ2VydGlmaWNhdGVzQnlQRU0oYS5jZXJ0c1tiXSl9fWYuc2lnbmVySW5mb0xpc3Q9W107Zm9yKHZhciBiPTA7YjxhLnNpZ25lckluZm9zLmxlbmd0aDtiKyspe3ZhciBkPWEuc2lnbmVySW5mb3NbYl07dmFyIGM9bmV3IGguU2lnbmVySW5mbygpO2Muc2V0U2lnbmVySWRlbnRpZmllcihkLnNpZ25lckNlcnQpO2Muc2V0Rm9yQ29udGVudEFuZEhhc2goe3NkT2JqOmYsZWNpT2JqOmYuZEVuY2FwQ29udGVudEluZm8saGFzaEFsZzpkLmhhc2hBbGd9KTtmb3IoYXR0ck5hbWUgaW4gZC5zQXR0cil7dmFyIGo9ZC5zQXR0clthdHRyTmFtZV07aWYoYXR0ck5hbWU9PSJTaWduaW5nVGltZSIpe3ZhciBlPW5ldyBoLlNpZ25pbmdUaW1lKGopO2MuZFNpZ25lZEF0dHJzLmFkZChlKX1pZihhdHRyTmFtZT09IlNpZ25pbmdDZXJ0aWZpY2F0ZSIpe3ZhciBlPW5ldyBoLlNpZ25pbmdDZXJ0aWZpY2F0ZShqKTtjLmRTaWduZWRBdHRycy5hZGQoZSl9aWYoYXR0ck5hbWU9PSJTaWduaW5nQ2VydGlmaWNhdGVWMiIpe3ZhciBlPW5ldyBoLlNpZ25pbmdDZXJ0aWZpY2F0ZVYyKGopO2MuZFNpZ25lZEF0dHJzLmFkZChlKX1pZihhdHRyTmFtZT09IlNpZ25hdHVyZVBvbGljeUlkZW50aWZpZXIiKXt2YXIgZT1uZXcgZy5TaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyKGopO2MuZFNpZ25lZEF0dHJzLmFkZChlKX19Yy5zaWduKGQuc2lnbmVyUHJ2S2V5LGQuc2lnQWxnKTtmLnNpZ25lckluZm9MaXN0LnB1c2goYyl9cmV0dXJuIGZ9OwovKiEgYXNuMXRzcC0xLjAuMS5qcyAoYykgMjAxNCBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5hc24xPT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMSl7S0pVUi5hc24xPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjEudHNwPT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMS50c3Ape0tKVVIuYXNuMS50c3A9e319S0pVUi5hc24xLnRzcC5BY2N1cmFjeT1mdW5jdGlvbihiKXtLSlVSLmFzbjEudHNwLkFjY3VyYWN5LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dGhpcy5zZWNvbmRzPW51bGw7dGhpcy5taWxsaXM9bnVsbDt0aGlzLm1pY3Jvcz1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBlPW51bGw7dmFyIGc9bnVsbDt2YXIgaT1udWxsO3ZhciBjPVtdO2lmKHRoaXMuc2Vjb25kcyE9bnVsbCl7ZT1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50Ijp0aGlzLnNlY29uZHN9KTtjLnB1c2goZSl9aWYodGhpcy5taWxsaXMhPW51bGwpe3ZhciBoPW5ldyBhLkRFUkludGVnZXIoeyJpbnQiOnRoaXMubWlsbGlzfSk7Zz1uZXcgYS5ERVJUYWdnZWRPYmplY3Qoe29iajpoLHRhZzoiODAiLGV4cGxpY2l0OmZhbHNlfSk7Yy5wdXNoKGcpfWlmKHRoaXMubWljcm9zIT1udWxsKXt2YXIgZj1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50Ijp0aGlzLm1pY3Jvc30pO2k9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6Zix0YWc6IjgxIixleHBsaWNpdDpmYWxzZX0pO2MucHVzaChpKX12YXIgZD1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6Y30pO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLnNlY29uZHM9PSJudW1iZXIiKXt0aGlzLnNlY29uZHM9Yi5zZWNvbmRzfWlmKHR5cGVvZiBiLm1pbGxpcz09Im51bWJlciIpe3RoaXMubWlsbGlzPWIubWlsbGlzfWlmKHR5cGVvZiBiLm1pY3Jvcz09Im51bWJlciIpe3RoaXMubWljcm9zPWIubWljcm9zfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuQWNjdXJhY3ksS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuTWVzc2FnZUltcHJpbnQ9ZnVuY3Rpb24oYil7S0pVUi5hc24xLnRzcC5NZXNzYWdlSW1wcmludC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBjPUtKVVIuYXNuMS54NTA5O3RoaXMuZEhhc2hBbGc9bnVsbDt0aGlzLmRIYXNoVmFsdWU9bnVsbDt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5oVExWPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMuaFRMVn12YXIgZD1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuZEhhc2hBbGcsdGhpcy5kSGFzaFZhbHVlXX0pO3JldHVybiBkLmdldEVuY29kZWRIZXgoKX07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5oYXNoQWxnPT0ic3RyaW5nIil7dGhpcy5kSGFzaEFsZz1uZXcgYy5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOmIuaGFzaEFsZ30pfWlmKHR5cGVvZiBiLmhhc2hWYWx1ZT09InN0cmluZyIpe3RoaXMuZEhhc2hWYWx1ZT1uZXcgYS5ERVJPY3RldFN0cmluZyh7aGV4OmIuaGFzaFZhbHVlfSl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5NZXNzYWdlSW1wcmludCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5UaW1lU3RhbXBSZXE9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLnRzcC5UaW1lU3RhbXBSZXEuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEudHNwO3RoaXMuZFZlcnNpb249bmV3IGEuREVSSW50ZWdlcih7ImludCI6MX0pO3RoaXMuZE1lc3NhZ2VJbXByaW50PW51bGw7dGhpcy5kUG9saWN5PW51bGw7dGhpcy5kTm9uY2U9bnVsbDt0aGlzLmNlcnRSZXE9dHJ1ZTt0aGlzLnNldE1lc3NhZ2VJbXByaW50PWZ1bmN0aW9uKGQpe2lmKGQgaW5zdGFuY2VvZiBLSlVSLmFzbjEudHNwLk1lc3NhZ2VJbXByaW50KXt0aGlzLmRNZXNzYWdlSW1wcmludD1kO3JldHVybn1pZih0eXBlb2YgZD09Im9iamVjdCIpe3RoaXMuZE1lc3NhZ2VJbXByaW50PW5ldyBiLk1lc3NhZ2VJbXByaW50KGQpfX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5kTWVzc2FnZUltcHJpbnQ9PW51bGwpe3Rocm93Im1lc3NhZ2VJbXByaW50IHNoYWxsIGJlIHNwZWNpZmllZCJ9dmFyIGQ9W3RoaXMuZFZlcnNpb24sdGhpcy5kTWVzc2FnZUltcHJpbnRdO2lmKHRoaXMuZFBvbGljeSE9bnVsbCl7ZC5wdXNoKHRoaXMuZFBvbGljeSl9aWYodGhpcy5kTm9uY2UhPW51bGwpe2QucHVzaCh0aGlzLmROb25jZSl9aWYodGhpcy5jZXJ0UmVxKXtkLnB1c2gobmV3IGEuREVSQm9vbGVhbigpKX12YXIgZT1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6ZH0pO3RoaXMuaFRMVj1lLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLm1pPT0ib2JqZWN0Iil7dGhpcy5zZXRNZXNzYWdlSW1wcmludChjLm1pKX1pZih0eXBlb2YgYy5wb2xpY3k9PSJvYmplY3QiKXt0aGlzLmRQb2xpY3k9bmV3IGEuREVST2JqZWN0SWRlbnRpZmllcihjLnBvbGljeSl9aWYodHlwZW9mIGMubm9uY2U9PSJvYmplY3QiKXt0aGlzLmROb25jZT1uZXcgYS5ERVJJbnRlZ2VyKGMubm9uY2UpfWlmKHR5cGVvZiBjLmNlcnRyZXE9PSJib29sZWFuIil7dGhpcy5jZXJ0UmVxPWMuY2VydHJlcX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLlRpbWVTdGFtcFJlcSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5UU1RJbmZvPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS50c3AuVFNUSW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBkPUtKVVIuYXNuMS54NTA5O3ZhciBiPUtKVVIuYXNuMS50c3A7dGhpcy5kVmVyc2lvbj1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50IjoxfSk7dGhpcy5kUG9saWN5PW51bGw7dGhpcy5kTWVzc2FnZUltcHJpbnQ9bnVsbDt0aGlzLmRTZXJpYWxOdW1iZXI9bnVsbDt0aGlzLmRHZW5UaW1lPW51bGw7dGhpcy5kQWNjdXJhY3k9bnVsbDt0aGlzLmRPcmRlcmluZz1udWxsO3RoaXMuZE5vbmNlPW51bGw7dGhpcy5kVHNhPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGU9W3RoaXMuZFZlcnNpb25dO2lmKHRoaXMuZFBvbGljeT09bnVsbCl7dGhyb3cicG9saWN5IHNoYWxsIGJlIHNwZWNpZmllZC4ifWUucHVzaCh0aGlzLmRQb2xpY3kpO2lmKHRoaXMuZE1lc3NhZ2VJbXByaW50PT1udWxsKXt0aHJvdyJtZXNzYWdlSW1wcmludCBzaGFsbCBiZSBzcGVjaWZpZWQuIn1lLnB1c2godGhpcy5kTWVzc2FnZUltcHJpbnQpO2lmKHRoaXMuZFNlcmlhbE51bWJlcj09bnVsbCl7dGhyb3cic2VyaWFsTnVtYmVyIHNoYWxsIGJlIHNwZWNpZmllZC4ifWUucHVzaCh0aGlzLmRTZXJpYWxOdW1iZXIpO2lmKHRoaXMuZEdlblRpbWU9PW51bGwpe3Rocm93ImdlblRpbWUgc2hhbGwgYmUgc3BlY2lmaWVkLiJ9ZS5wdXNoKHRoaXMuZEdlblRpbWUpO2lmKHRoaXMuZEFjY3VyYWN5IT1udWxsKXtlLnB1c2godGhpcy5kQWNjdXJhY3kpfWlmKHRoaXMuZE9yZGVyaW5nIT1udWxsKXtlLnB1c2godGhpcy5kT3JkZXJpbmcpfWlmKHRoaXMuZE5vbmNlIT1udWxsKXtlLnB1c2godGhpcy5kTm9uY2UpfWlmKHRoaXMuZFRzYSE9bnVsbCl7ZS5wdXNoKHRoaXMuZFRzYSl9dmFyIGY9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmV9KTt0aGlzLmhUTFY9Zi5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy5wb2xpY3k9PSJzdHJpbmciKXtpZighYy5wb2xpY3kubWF0Y2goL15bMC05Ll0rJC8pKXt0aHJvdyJwb2xpY3kgc2hhbGwgYmUgb2lkIGxpa2UgMC4xLjQuMTM0In10aGlzLmRQb2xpY3k9bmV3IGEuREVST2JqZWN0SWRlbnRpZmllcih7b2lkOmMucG9saWN5fSl9aWYodHlwZW9mIGMubWVzc2FnZUltcHJpbnQhPSJ1bmRlZmluZWQiKXt0aGlzLmRNZXNzYWdlSW1wcmludD1uZXcgYi5NZXNzYWdlSW1wcmludChjLm1lc3NhZ2VJbXByaW50KX1pZih0eXBlb2YgYy5zZXJpYWxOdW1iZXIhPSJ1bmRlZmluZWQiKXt0aGlzLmRTZXJpYWxOdW1iZXI9bmV3IGEuREVSSW50ZWdlcihjLnNlcmlhbE51bWJlcil9aWYodHlwZW9mIGMuZ2VuVGltZSE9InVuZGVmaW5lZCIpe3RoaXMuZEdlblRpbWU9bmV3IGEuREVSR2VuZXJhbGl6ZWRUaW1lKGMuZ2VuVGltZSl9aWYodHlwZW9mIGMuYWNjdXJhY3khPSJ1bmRlZmluZCIpe3RoaXMuZEFjY3VyYWN5PW5ldyBiLkFjY3VyYWN5KGMuYWNjdXJhY3kpfWlmKHR5cGVvZiBjLm9yZGVyaW5nIT0idW5kZWZpbmVkIiYmYy5vcmRlcmluZz09dHJ1ZSl7dGhpcy5kT3JkZXJpbmc9bmV3IGEuREVSQm9vbGVhbigpfWlmKHR5cGVvZiBjLm5vbmNlIT0idW5kZWZpbmVkIil7dGhpcy5kTm9uY2U9bmV3IGEuREVSSW50ZWdlcihjLm5vbmNlKX1pZih0eXBlb2YgYy50c2EhPSJ1bmRlZmluZWQiKXt0aGlzLmRUc2E9bmV3IGQuWDUwME5hbWUoYy50c2EpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuVFNUSW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5UaW1lU3RhbXBSZXNwPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS50c3AuVGltZVN0YW1wUmVzcC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS50c3A7dGhpcy5kU3RhdHVzPW51bGw7dGhpcy5kVFNUPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5kU3RhdHVzPT1udWxsKXt0aHJvdyJzdGF0dXMgc2hhbGwgYmUgc3BlY2lmaWVkIn12YXIgZD1bdGhpcy5kU3RhdHVzXTtpZih0aGlzLmRUU1QhPW51bGwpe2QucHVzaCh0aGlzLmRUU1QpfXZhciBlPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpkfSk7dGhpcy5oVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMuc3RhdHVzPT0ib2JqZWN0Iil7dGhpcy5kU3RhdHVzPW5ldyBiLlBLSVN0YXR1c0luZm8oYy5zdGF0dXMpfWlmKHR5cGVvZiBjLnRzdCE9InVuZGVmaW5lZCImJmMudHN0IGluc3RhbmNlb2YgS0pVUi5hc24xLkFTTjFPYmplY3Qpe3RoaXMuZFRTVD1jLnRzdC5nZXRDb250ZW50SW5mbygpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuVGltZVN0YW1wUmVzcCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5QS0lTdGF0dXNJbmZvPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS50c3AuUEtJU3RhdHVzSW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS50c3A7dGhpcy5kU3RhdHVzPW51bGw7dGhpcy5kU3RhdHVzU3RyaW5nPW51bGw7dGhpcy5kRmFpbHVyZUluZm89bnVsbDt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmRTdGF0dXM9PW51bGwpe3Rocm93InN0YXR1cyBzaGFsbCBiZSBzcGVjaWZpZWQifXZhciBkPVt0aGlzLmRTdGF0dXNdO2lmKHRoaXMuZFN0YXR1c1N0cmluZyE9bnVsbCl7ZC5wdXNoKHRoaXMuZFN0YXR1c1N0cmluZyl9aWYodGhpcy5kRmFpbHVyZUluZm8hPW51bGwpe2QucHVzaCh0aGlzLmRGYWlsdXJlSW5mbyl9dmFyIGU9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmR9KTt0aGlzLmhUTFY9ZS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy5zdGF0dXM9PSJvYmplY3QiKXt0aGlzLmRTdGF0dXM9bmV3IGIuUEtJU3RhdHVzKGMuc3RhdHVzKX1pZih0eXBlb2YgYy5zdGF0c3RyPT0ib2JqZWN0Iil7dGhpcy5kU3RhdHVzU3RyaW5nPW5ldyBiLlBLSUZyZWVUZXh0KHthcnJheTpjLnN0YXRzdHJ9KX1pZih0eXBlb2YgYy5mYWlsaW5mbz09Im9iamVjdCIpe3RoaXMuZEZhaWx1cmVJbmZvPW5ldyBiLlBLSUZhaWx1cmVJbmZvKGMuZmFpbGluZm8pfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuUEtJU3RhdHVzSW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5QS0lTdGF0dXM9ZnVuY3Rpb24oZSl7S0pVUi5hc24xLnRzcC5QS0lTdGF0dXMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEudHNwO3ZhciBkPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dGhpcy5oVExWPXRoaXMuZFN0YXR1cy5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGUhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZS5uYW1lIT0idW5kZWZpbmVkIil7dmFyIGM9Yi5QS0lTdGF0dXMudmFsdWVMaXN0O2lmKHR5cGVvZiBjW2UubmFtZV09PSJ1bmRlZmluZWQiKXt0aHJvdyJuYW1lIHVuZGVmaW5lZDogIitlLm5hbWV9dGhpcy5kU3RhdHVzPW5ldyBhLkRFUkludGVnZXIoeyJpbnQiOmNbZS5uYW1lXX0pfWVsc2V7dGhpcy5kU3RhdHVzPW5ldyBhLkRFUkludGVnZXIoZSl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5QS0lTdGF0dXMsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuUEtJU3RhdHVzLnZhbHVlTGlzdD17Z3JhbnRlZDowLGdyYW50ZWRXaXRoTW9kczoxLHJlamVjdGlvbjoyLHdhaXRpbmc6MyxyZXZvY2F0aW9uV2FybmluZzo0LHJldm9jYXRpb25Ob3RpZmljYXRpb246NX07S0pVUi5hc24xLnRzcC5QS0lGcmVlVGV4dD1mdW5jdGlvbihiKXtLSlVSLmFzbjEudHNwLlBLSUZyZWVUZXh0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dGhpcy50ZXh0TGlzdD1bXTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgYz1bXTtmb3IodmFyIGU9MDtlPHRoaXMudGV4dExpc3QubGVuZ3RoO2UrKyl7Yy5wdXNoKG5ldyBhLkRFUlVURjhTdHJpbmcoe3N0cjp0aGlzLnRleHRMaXN0W2VdfSkpfXZhciBkPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpjfSk7dGhpcy5oVExWPWQuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGIuYXJyYXk9PSJvYmplY3QiKXt0aGlzLnRleHRMaXN0PWIuYXJyYXl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5QS0lGcmVlVGV4dCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5QS0lGYWlsdXJlSW5mbz1mdW5jdGlvbihkKXtLSlVSLmFzbjEudHNwLlBLSUZhaWx1cmVJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dmFyIGI9S0pVUi5hc24xLnRzcDt0aGlzLnZhbHVlPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy52YWx1ZT09bnVsbCl7dGhyb3cidmFsdWUgc2hhbGwgYmUgc3BlY2lmaWVkIn12YXIgZT1uZXcgTnVtYmVyKHRoaXMudmFsdWUpLnRvU3RyaW5nKDIpO3ZhciBmPW5ldyBhLkRFUkJpdFN0cmluZygpO2Yuc2V0QnlCaW5hcnlTdHJpbmcoZSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBkIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGQubmFtZT09InN0cmluZyIpe3ZhciBjPWIuUEtJRmFpbHVyZUluZm8udmFsdWVMaXN0O2lmKHR5cGVvZiBjW2QubmFtZV09PSJ1bmRlZmluZWQiKXt0aHJvdyJuYW1lIHVuZGVmaW5lZDogIitkLm5hbWV9dGhpcy52YWx1ZT1jW2QubmFtZV19ZWxzZXtpZih0eXBlb2YgZFsiaW50Il09PSJudW1iZXIiKXt0aGlzLnZhbHVlPWRbImludCJdfX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLlBLSUZhaWx1cmVJbmZvLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEudHNwLlBLSUZhaWx1cmVJbmZvLnZhbHVlTGlzdD17YmFkQWxnOjAsYmFkUmVxdWVzdDoyLGJhZERhdGFGb3JtYXQ6NSx0aW1lTm90QXZhaWxhYmxlOjE0LHVuYWNjZXB0ZWRQb2xpY3k6MTUsdW5hY2NlcHRlZEV4dGVuc2lvbjoxNixhZGRJbmZvTm90QXZhaWxhYmxlOjE3LHN5c3RlbUZhaWx1cmU6MjV9O0tKVVIuYXNuMS50c3AuQWJzdHJhY3RUU0FBZGFwdGVyPWZ1bmN0aW9uKGEpe3RoaXMuZ2V0VFNUSGV4PWZ1bmN0aW9uKGMsYil7dGhyb3cibm90IGltcGxlbWVudGVkIHlldCJ9fTtLSlVSLmFzbjEudHNwLlNpbXBsZVRTQUFkYXB0ZXI9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLnRzcC5TaW1wbGVUU0FBZGFwdGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLnBhcmFtcz1udWxsO3RoaXMuc2VyaWFsPTA7dGhpcy5nZXRUU1RIZXg9ZnVuY3Rpb24oYyxiKXt2YXIgZT1LSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoYyxiKTt0aGlzLnBhcmFtcy50c3RJbmZvLm1lc3NhZ2VJbXByaW50PXtoYXNoQWxnOmIsaGFzaFZhbHVlOmV9O3RoaXMucGFyYW1zLnRzdEluZm8uc2VyaWFsTnVtYmVyPXsiaW50Ijp0aGlzLnNlcmlhbCsrfTt2YXIgZD1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMDAwMDAwMCk7dGhpcy5wYXJhbXMudHN0SW5mby5ub25jZT17ImludCI6ZH07dmFyIGY9S0pVUi5hc24xLnRzcC5UU1BVdGlsLm5ld1RpbWVTdGFtcFRva2VuKHRoaXMucGFyYW1zKTtyZXR1cm4gZi5nZXRDb250ZW50SW5mb0VuY29kZWRIZXgoKX07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXt0aGlzLnBhcmFtcz1hfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5TaW1wbGVUU0FBZGFwdGVyLEtKVVIuYXNuMS50c3AuQWJzdHJhY3RUU0FBZGFwdGVyKTtLSlVSLmFzbjEudHNwLkZpeGVkVFNBQWRhcHRlcj1mdW5jdGlvbihhKXtLSlVSLmFzbjEudHNwLkZpeGVkVFNBQWRhcHRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5wYXJhbXM9bnVsbDt0aGlzLmdldFRTVEhleD1mdW5jdGlvbihjLGIpe3ZhciBkPUtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChjLGIpO3RoaXMucGFyYW1zLnRzdEluZm8ubWVzc2FnZUltcHJpbnQ9e2hhc2hBbGc6YixoYXNoVmFsdWU6ZH07dmFyIGU9S0pVUi5hc24xLnRzcC5UU1BVdGlsLm5ld1RpbWVTdGFtcFRva2VuKHRoaXMucGFyYW1zKTtyZXR1cm4gZS5nZXRDb250ZW50SW5mb0VuY29kZWRIZXgoKX07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXt0aGlzLnBhcmFtcz1hfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5GaXhlZFRTQUFkYXB0ZXIsS0pVUi5hc24xLnRzcC5BYnN0cmFjdFRTQUFkYXB0ZXIpO0tKVVIuYXNuMS50c3AuVFNQVXRpbD1uZXcgZnVuY3Rpb24oKXt9O0tKVVIuYXNuMS50c3AuVFNQVXRpbC5uZXdUaW1lU3RhbXBUb2tlbj1mdW5jdGlvbihiKXt2YXIgaj1LSlVSLmFzbjEuY21zO3ZhciBhPUtKVVIuYXNuMS50c3A7dmFyIGc9bmV3IGouU2lnbmVkRGF0YSgpO3ZhciBlPW5ldyBhLlRTVEluZm8oYi50c3RJbmZvKTt2YXIgZj1lLmdldEVuY29kZWRIZXgoKTtnLmRFbmNhcENvbnRlbnRJbmZvLnNldENvbnRlbnRWYWx1ZSh7aGV4OmZ9KTtnLmRFbmNhcENvbnRlbnRJbmZvLnNldENvbnRlbnRUeXBlKCJ0c3RpbmZvIik7aWYodHlwZW9mIGIuY2VydHM9PSJvYmplY3QiKXtmb3IodmFyIGM9MDtjPGIuY2VydHMubGVuZ3RoO2MrKyl7Zy5hZGRDZXJ0aWZpY2F0ZXNCeVBFTShiLmNlcnRzW2NdKX19dmFyIGQ9Zy5zaWduZXJJbmZvTGlzdFswXTtkLnNldFNpZ25lcklkZW50aWZpZXIoYi5zaWduZXJDZXJ0KTtkLnNldEZvckNvbnRlbnRBbmRIYXNoKHtzZE9iajpnLGVjaU9iajpnLmRFbmNhcENvbnRlbnRJbmZvLGhhc2hBbGc6Yi5oYXNoQWxnfSk7dmFyIGg9bmV3IGouU2lnbmluZ0NlcnRpZmljYXRlKHthcnJheTpbYi5zaWduZXJDZXJ0XX0pO2QuZFNpZ25lZEF0dHJzLmFkZChoKTtkLnNpZ24oYi5zaWduZXJQcnZLZXksYi5zaWdBbGcpO3JldHVybiBnfTtLSlVSLmFzbjEudHNwLlRTUFV0aWwucGFyc2VUaW1lU3RhbXBSZXE9ZnVuY3Rpb24oZCl7dmFyIGY9e307Zi5jZXJ0cmVxPWZhbHNlO3ZhciBoPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGQsMCk7aWYoaC5sZW5ndGg8Mil7dGhyb3ciVGltZVN0YW1wUmVxIG11c3QgaGF2ZSBhdCBsZWFzdCAyIGl0ZW1zIn12YXIgYz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsaFsxXSk7Zi5taT1LSlVSLmFzbjEudHNwLlRTUFV0aWwucGFyc2VNZXNzYWdlSW1wcmludChjKTtmb3IodmFyIGU9MjtlPGgubGVuZ3RoO2UrKyl7dmFyIGI9aFtlXTt2YXIgYT1kLnN1YnN0cihiLDIpO2lmKGE9PSIwNiIpe3ZhciBnPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGQsYik7Zi5wb2xpY3k9QVNOMUhFWC5oZXh0b29pZHN0cihnKX1pZihhPT0iMDIiKXtmLm5vbmNlPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGQsYil9aWYoYT09IjAxIil7Zi5jZXJ0cmVxPXRydWV9fXJldHVybiBmfTtLSlVSLmFzbjEudHNwLlRTUFV0aWwucGFyc2VNZXNzYWdlSW1wcmludD1mdW5jdGlvbihjKXt2YXIgaD17fTtpZihjLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJoZWFkIG9mIG1lc3NhZ2VJbXByaW50IGhleCBzaGFsbCBiZSAnMzAnIn12YXIgYT1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihjLDApO3ZhciBpPUFTTjFIRVguZ2V0RGVjZW5kYW50SW5kZXhCeU50aExpc3QoYywwLFswLDBdKTt2YXIgZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihjLGkpO3ZhciBlPUFTTjFIRVguaGV4dG9vaWRzdHIoZCk7dmFyIGc9S0pVUi5hc24xLng1MDkuT0lELm9pZDJuYW1lKGUpO2lmKGc9PSIiKXt0aHJvdyJoYXNoQWxnIG5hbWUgdW5kZWZpbmVkOiAiK2V9dmFyIGI9Zzt2YXIgZj1BU04xSEVYLmdldERlY2VuZGFudEluZGV4QnlOdGhMaXN0KGMsMCxbMV0pO2guaGFzaEFsZz1iO2guaGFzaFZhbHVlPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGMsZik7cmV0dXJuIGh9OwovKiEgYXNuMWNhZGVzLTEuMC4wLmpzIChjKSAyMDEzLTIwMTQgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSPT0idW5kZWZpbmVkInx8IUtKVVIpe0tKVVI9e319aWYodHlwZW9mIEtKVVIuYXNuMT09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEpe0tKVVIuYXNuMT17fX1pZih0eXBlb2YgS0pVUi5hc24xLmNhZGVzPT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMS5jYWRlcyl7S0pVUi5hc24xLmNhZGVzPXt9fUtKVVIuYXNuMS5jYWRlcy5TaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyPWZ1bmN0aW9uKGUpe0tKVVIuYXNuMS5jYWRlcy5TaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi4xNSI7dmFyIGI9S0pVUi5hc24xO3ZhciBkPUtKVVIuYXNuMS5jYWRlcztpZih0eXBlb2YgZSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBlLm9pZD09InN0cmluZyImJnR5cGVvZiBlLmhhc2g9PSJvYmplY3QiKXt2YXIgZj1uZXcgYi5ERVJPYmplY3RJZGVudGlmaWVyKHtvaWQ6ZS5vaWR9KTt2YXIgYT1uZXcgZC5PdGhlckhhc2hBbGdBbmRWYWx1ZShlLmhhc2gpO3ZhciBjPW5ldyBiLkRFUlNlcXVlbmNlKHthcnJheTpbZixhXX0pO3RoaXMudmFsdWVMaXN0PVtjXX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY2FkZXMuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllcixLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNhZGVzLk90aGVySGFzaEFsZ0FuZFZhbHVlPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS5jYWRlcy5PdGhlckhhc2hBbGdBbmRWYWx1ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBjPUtKVVIuYXNuMS54NTA5O3RoaXMuZEFsZz1udWxsO3RoaXMuZEhhc2g9bnVsbDt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZD1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuZEFsZyx0aGlzLmRIYXNoXX0pO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLmFsZz09InN0cmluZyImJnR5cGVvZiBiLmhhc2g9PSJzdHJpbmciKXt0aGlzLmRBbGc9bmV3IGMuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZTpiLmFsZ30pO3RoaXMuZEhhc2g9bmV3IGEuREVST2N0ZXRTdHJpbmcoe2hleDpiLmhhc2h9KX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY2FkZXMuT3RoZXJIYXNoQWxnQW5kVmFsdWUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jYWRlcy5TaWduYXR1cmVUaW1lU3RhbXA9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLmNhZGVzLlNpZ25hdHVyZVRpbWVTdGFtcC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hdHRyVHlwZU9pZD0iMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMTQiO3RoaXMudHN0SGV4PW51bGw7dmFyIGE9S0pVUi5hc24xO2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMucmVzIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMucmVzPT0ic3RyaW5nIiYmYy5yZXMubWF0Y2goL15bMC05QS1GYS1mXSskLykpe31lbHNle2lmKGMucmVzIGluc3RhbmNlb2YgS0pVUi5hc24xLkFTTjFPYmplY3Qpe31lbHNle3Rocm93InJlcyBwYXJhbSBzaGFsbCBiZSBBU04xT2JqZWN0IG9yIGhleCBzdHJpbmcifX19aWYodHlwZW9mIGMudHN0IT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMudHN0PT0ic3RyaW5nIiYmYy50c3QubWF0Y2goL15bMC05QS1GYS1mXSskLykpe3ZhciBiPW5ldyBhLkFTTjFPYmplY3QoKTt0aGlzLnRzdEhleD1jLnRzdDtiLmhUTFY9dGhpcy50c3RIZXg7Yi5nZXRFbmNvZGVkSGV4KCk7dGhpcy52YWx1ZUxpc3Q9W2JdfWVsc2V7aWYoYy50c3QgaW5zdGFuY2VvZiBLSlVSLmFzbjEuQVNOMU9iamVjdCl7fWVsc2V7dGhyb3cidHN0IHBhcmFtIHNoYWxsIGJlIEFTTjFPYmplY3Qgb3IgaGV4IHN0cmluZyJ9fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY2FkZXMuU2lnbmF0dXJlVGltZVN0YW1wLEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKTtLSlVSLmFzbjEuY2FkZXMuQ29tcGxldGVDZXJ0aWZpY2F0ZVJlZnM9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLmNhZGVzLkNvbXBsZXRlQ2VydGlmaWNhdGVSZWZzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi4yMSI7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS5jYWRlczt0aGlzLnNldEJ5QXJyYXk9ZnVuY3Rpb24oZCl7dGhpcy52YWx1ZUxpc3Q9W107Zm9yKHZhciBlPTA7ZTxkLmxlbmd0aDtlKyspe3ZhciBmPW5ldyBiLk90aGVyQ2VydElEKGRbZV0pO3RoaXMudmFsdWVMaXN0LnB1c2goZil9fTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjPT0ib2JqZWN0IiYmdHlwZW9mIGMubGVuZ3RoPT0ibnVtYmVyIil7dGhpcy5zZXRCeUFycmF5KGMpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jYWRlcy5Db21wbGV0ZUNlcnRpZmljYXRlUmVmcyxLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNhZGVzLk90aGVyQ2VydElEPWZ1bmN0aW9uKGQpe0tKVVIuYXNuMS5jYWRlcy5PdGhlckNlcnRJRC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBjPUtKVVIuYXNuMS5jbXM7dmFyIGI9S0pVUi5hc24xLmNhZGVzO3RoaXMuaGFzSXNzdWVyU2VyaWFsPXRydWU7dGhpcy5kT3RoZXJDZXJ0SGFzaD1udWxsO3RoaXMuZElzc3VlclNlcmlhbD1udWxsO3RoaXMuc2V0QnlDZXJ0UEVNPWZ1bmN0aW9uKGUpe3RoaXMuZE90aGVyQ2VydEhhc2g9bmV3IGIuT3RoZXJIYXNoKGUpO2lmKHRoaXMuaGFzSXNzdWVyU2VyaWFsKXt0aGlzLmRJc3N1ZXJTZXJpYWw9bmV3IGMuSXNzdWVyQW5kU2VyaWFsTnVtYmVyKGUpfX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5oVExWIT1udWxsKXtyZXR1cm4gdGhpcy5oVExWfWlmKHRoaXMuZE90aGVyQ2VydEhhc2g9PW51bGwpe3Rocm93Im90aGVyQ2VydEhhc2ggbm90IHNldCJ9dmFyIGU9W3RoaXMuZE90aGVyQ2VydEhhc2hdO2lmKHRoaXMuZElzc3VlclNlcmlhbCE9bnVsbCl7ZS5wdXNoKHRoaXMuZElzc3VlclNlcmlhbCl9dmFyIGY9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmV9KTt0aGlzLmhUTFY9Zi5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGQhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZD09InN0cmluZyImJmQuaW5kZXhPZigiLS0tLS1CRUdJTiAiKSE9LTEpe3RoaXMuc2V0QnlDZXJ0UEVNKGQpfWlmKHR5cGVvZiBkPT0ib2JqZWN0Iil7aWYoZC5oYXNpcz09PWZhbHNlKXt0aGlzLmhhc0lzc3VlclNlcmlhbD1mYWxzZX1pZih0eXBlb2YgZC5jZXJ0PT0ic3RyaW5nIil7dGhpcy5zZXRCeUNlcnRQRU0oZC5jZXJ0KX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNhZGVzLk90aGVyQ2VydElELEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY2FkZXMuT3RoZXJIYXNoPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jYWRlcy5PdGhlckhhc2guc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY2FkZXM7dGhpcy5hbGc9InNoYTI1NiI7dGhpcy5kT3RoZXJIYXNoPW51bGw7dGhpcy5zZXRCeUNlcnRQRU09ZnVuY3Rpb24oZCl7aWYoZC5pbmRleE9mKCItLS0tLUJFR0lOICIpPT0tMSl7dGhyb3ciY2VydFBFTSBub3QgdG8gc2VlbSBQRU0gZm9ybWF0In12YXIgZT1YNTA5LnBlbVRvSGV4KGQpO3ZhciBmPUtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChlLHRoaXMuYWxnKTt0aGlzLmRPdGhlckhhc2g9bmV3IGIuT3RoZXJIYXNoQWxnQW5kVmFsdWUoe2FsZzp0aGlzLmFsZyxoYXNoOmZ9KX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5kT3RoZXJIYXNoPT1udWxsKXt0aHJvdyJPdGhlckhhc2ggbm90IHNldCJ9cmV0dXJuIHRoaXMuZE90aGVySGFzaC5nZXRFbmNvZGVkSGV4KCl9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGM9PSJzdHJpbmciKXtpZihjLmluZGV4T2YoIi0tLS0tQkVHSU4gIikhPS0xKXt0aGlzLnNldEJ5Q2VydFBFTShjKX1lbHNle2lmKGMubWF0Y2goL15bMC05QS1GYS1mXSskLykpe3RoaXMuZE90aGVySGFzaD1uZXcgYS5ERVJPY3RldFN0cmluZyh7aGV4OmN9KX1lbHNle3Rocm93InVuc3VwcG9ydGVkIHN0cmluZyB2YWx1ZSBmb3IgcGFyYW1zIn19fWVsc2V7aWYodHlwZW9mIGM9PSJvYmplY3QiKXtpZih0eXBlb2YgYy5jZXJ0PT0ic3RyaW5nIil7aWYodHlwZW9mIGMuYWxnPT0ic3RyaW5nIil7dGhpcy5hbGc9Yy5hbGd9dGhpcy5zZXRCeUNlcnRQRU0oYy5jZXJ0KX1lbHNle3RoaXMuZE90aGVySGFzaD1uZXcgYi5PdGhlckhhc2hBbGdBbmRWYWx1ZShjKX19fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jYWRlcy5PdGhlckhhc2gsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jYWRlcy5DQWRFU1V0aWw9bmV3IGZ1bmN0aW9uKCl7fTtLSlVSLmFzbjEuY2FkZXMuQ0FkRVNVdGlsLmFkZFNpZ1RTPWZ1bmN0aW9uKGMsYixhKXt9O0tKVVIuYXNuMS5jYWRlcy5DQWRFU1V0aWwucGFyc2VTaWduZWREYXRhRm9yQWRkaW5nVW5zaWduZWQ9ZnVuY3Rpb24oZCl7dmFyIHE9S0pVUi5hc24xO3ZhciBwPUtKVVIuYXNuMS5jbXM7dmFyIGM9S0pVUi5hc24xLmNhZGVzLkNBZEVTVXRpbDt2YXIgYT17fTtpZihBU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdChkLDAsWzBdKSE9IjA2MDkyYTg2NDg4NmY3MGQwMTA3MDIiKXt0aHJvdyJoZXggaXMgbm90IENNUyBTaWduZWREYXRhIn12YXIgcz1BU04xSEVYLmdldERlY2VuZGFudEluZGV4QnlOdGhMaXN0KGQsMCxbMSwwXSk7dmFyIGI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZCxzKTtpZihiLmxlbmd0aDw0KXt0aHJvdyJudW0gb2YgU2lnbmVkRGF0YSBlbGVtIHNoYWxsIGJlIDQgYXQgbGVhc3QifXZhciBmPWIuc2hpZnQoKTthLnZlcnNpb249QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGYpO3ZhciBsPWIuc2hpZnQoKTthLmFsZ3M9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGwpO3ZhciBtPWIuc2hpZnQoKTthLmVuY2FwY29udGVudD1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsbSk7YS5jZXJ0cz1udWxsO2EucmV2cz1udWxsO2Euc2k9W107dmFyIG49Yi5zaGlmdCgpO2lmKGQuc3Vic3RyKG4sMik9PSJhMCIpe2EuY2VydHM9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLG4pO249Yi5zaGlmdCgpfWlmKGQuc3Vic3RyKG4sMik9PSJhMSIpe2EucmV2cz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsbik7bj1iLnNoaWZ0KCl9dmFyIGs9bjtpZihkLnN1YnN0cihrLDIpIT0iMzEiKXt0aHJvdyJDYW4ndCBmaW5kIHNpZ25lckluZm9zIn12YXIgaj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihkLGspO2Zvcih2YXIgaD0wO2g8ai5sZW5ndGg7aCsrKXt2YXIgbz1qW2hdO3ZhciBlPWMucGFyc2VTaWduZXJJbmZvRm9yQWRkaW5nVW5zaWduZWQoZCxvLGgpO2Euc2lbaF09ZX12YXIgZz1udWxsO2Eub2JqPW5ldyBwLlNpZ25lZERhdGEoKTtnPW5ldyBxLkFTTjFPYmplY3QoKTtnLmhUTFY9YS52ZXJzaW9uO2Eub2JqLmRDTVNWZXJzaW9uPWc7Zz1uZXcgcS5BU04xT2JqZWN0KCk7Zy5oVExWPWEuYWxnczthLm9iai5kRGlnZXN0QWxncz1nO2c9bmV3IHEuQVNOMU9iamVjdCgpO2cuaFRMVj1hLmVuY2FwY29udGVudDthLm9iai5kRW5jYXBDb250ZW50SW5mbz1nO2c9bmV3IHEuQVNOMU9iamVjdCgpO2cuaFRMVj1hLmNlcnRzO2Eub2JqLmRDZXJ0cz1nO2Eub2JqLnNpZ25lckluZm9MaXN0PVtdO2Zvcih2YXIgaD0wO2g8YS5zaS5sZW5ndGg7aCsrKXthLm9iai5zaWduZXJJbmZvTGlzdC5wdXNoKGEuc2lbaF0ub2JqKX1yZXR1cm4gYX07S0pVUi5hc24xLmNhZGVzLkNBZEVTVXRpbC5wYXJzZVNpZ25lckluZm9Gb3JBZGRpbmdVbnNpZ25lZD1mdW5jdGlvbihkLGssYSl7dmFyIG09S0pVUi5hc24xO3ZhciBsPUtKVVIuYXNuMS5jbXM7dmFyIGI9e307dmFyIGU9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZCxrKTtpZihlLmxlbmd0aCE9Nil7dGhyb3cibm90IHN1cHBvcnRlZCBpdGVtcyBmb3IgU2lnbmVySW5mbyAoIT02KSJ9dmFyIGY9ZS5zaGlmdCgpO2IudmVyc2lvbj1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsZik7dmFyIG49ZS5zaGlmdCgpO2Iuc2k9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLG4pO3ZhciBoPWUuc2hpZnQoKTtiLmRpZ2FsZz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsaCk7dmFyIGM9ZS5zaGlmdCgpO2Iuc2F0dHJzPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxjKTt2YXIgaT1lLnNoaWZ0KCk7Yi5zaWdhbGc9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGkpO3ZhciBqPWUuc2hpZnQoKTtiLnNpZz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsaik7Yi5zaWd2YWw9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZCxqKTt2YXIgZz1udWxsO2Iub2JqPW5ldyBsLlNpZ25lckluZm8oKTtnPW5ldyBtLkFTTjFPYmplY3QoKTtnLmhUTFY9Yi52ZXJzaW9uO2Iub2JqLmRDTVNWZXJzaW9uPWc7Zz1uZXcgbS5BU04xT2JqZWN0KCk7Zy5oVExWPWIuc2k7Yi5vYmouZFNpZ25lcklkZW50aWZpZXI9ZztnPW5ldyBtLkFTTjFPYmplY3QoKTtnLmhUTFY9Yi5kaWdhbGc7Yi5vYmouZERpZ2VzdEFsZ29yaXRobT1nO2c9bmV3IG0uQVNOMU9iamVjdCgpO2cuaFRMVj1iLnNhdHRycztiLm9iai5kU2lnbmVkQXR0cnM9ZztnPW5ldyBtLkFTTjFPYmplY3QoKTtnLmhUTFY9Yi5zaWdhbGc7Yi5vYmouZFNpZ0FsZz1nO2c9bmV3IG0uQVNOMU9iamVjdCgpO2cuaFRMVj1iLnNpZztiLm9iai5kU2lnPWc7Yi5vYmouZFVuc2lnbmVkQXR0cnM9bmV3IGwuQXR0cmlidXRlTGlzdCgpO3JldHVybiBifTsKLyohIGFzbjFjc3ItMS4wLjAuanMgKGMpIDIwMTUgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSLmFzbjEuY3NyPT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMS5jc3Ipe0tKVVIuYXNuMS5jc3I9e319S0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdD1mdW5jdGlvbihmKXtLSlVSLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYj1udWxsO3ZhciBkPW51bGw7dmFyIGU9bnVsbDt2YXIgYz1udWxsO3ZhciBhPW51bGw7dGhpcy5zaWduPWZ1bmN0aW9uKGksaCl7aWYodGhpcy5wcnZLZXk9PW51bGwpe3RoaXMucHJ2S2V5PWh9dGhpcy5hc24xU2lnbmF0dXJlQWxnPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOml9KTtzaWc9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOml9KTtzaWcuaW5pdFNpZ24odGhpcy5wcnZLZXkpO3NpZy51cGRhdGVIZXgodGhpcy5hc24xQ1NSSW5mby5nZXRFbmNvZGVkSGV4KCkpO3RoaXMuaGV4U2lnPXNpZy5zaWduKCk7dGhpcy5hc24xU2lnPW5ldyBLSlVSLmFzbjEuREVSQml0U3RyaW5nKHtoZXg6IjAwIit0aGlzLmhleFNpZ30pO3ZhciBnPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmFzbjFDU1JJbmZvLHRoaXMuYXNuMVNpZ25hdHVyZUFsZyx0aGlzLmFzbjFTaWddfSk7dGhpcy5oVExWPWcuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaXNNb2RpZmllZD1mYWxzZX07dGhpcy5nZXRQRU1TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgZz1LSlVSLmFzbjEuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleCh0aGlzLmdldEVuY29kZWRIZXgoKSwiQ0VSVElGSUNBVEUgUkVRVUVTVCIpO3JldHVybiBnfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmlzTW9kaWZpZWQ9PWZhbHNlJiZ0aGlzLmhUTFYhPW51bGwpe3JldHVybiB0aGlzLmhUTFZ9dGhyb3cibm90IHNpZ25lZCB5ZXQifTtpZih0eXBlb2YgZiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBmLmNzcmluZm8hPSJ1bmRlZmluZWQiKXt0aGlzLmFzbjFDU1JJbmZvPWYuY3NyaW5mb319fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0LEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mbz1mdW5jdGlvbihhKXtLSlVSLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5faW5pdGlhbGl6ZT1mdW5jdGlvbigpe3RoaXMuYXNuMUFycmF5PW5ldyBBcnJheSgpO3RoaXMuYXNuMVZlcnNpb249bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHsiaW50IjowfSk7dGhpcy5hc24xU3ViamVjdD1udWxsO3RoaXMuYXNuMVN1YmpQS2V5PW51bGw7dGhpcy5leHRlbnNpb25zQXJyYXk9bmV3IEFycmF5KCl9O3RoaXMuc2V0U3ViamVjdEJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU3ViamVjdD1uZXcgS0pVUi5hc24xLng1MDkuWDUwME5hbWUoYil9O3RoaXMuc2V0U3ViamVjdFB1YmxpY0tleUJ5R2V0S2V5PWZ1bmN0aW9uKGMpe3ZhciBiPUtFWVVUSUwuZ2V0S2V5KGMpO3RoaXMuYXNuMVN1YmpQS2V5PW5ldyBLSlVSLmFzbjEueDUwOS5TdWJqZWN0UHVibGljS2V5SW5mbyhiKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFWZXJzaW9uKTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVN1YmplY3QpO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xU3VialBLZXkpO3ZhciBjPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OnRoaXMuZXh0ZW5zaW9uc0FycmF5fSk7dmFyIGI9bmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OmZhbHNlLHRhZzoiYTAiLG9iajpjfSk7dGhpcy5hc24xQXJyYXkucHVzaChiKTt2YXIgZD1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTp0aGlzLmFzbjFBcnJheX0pO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTt0aGlzLmlzTW9kaWZpZWQ9ZmFsc2U7cmV0dXJuIHRoaXMuaFRMVn07dGhpcy5faW5pdGlhbGl6ZSgpfTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNzci5DU1JVdGlsPW5ldyBmdW5jdGlvbigpe307S0pVUi5hc24xLmNzci5DU1JVdGlsLm5ld0NTUlBFTT1mdW5jdGlvbihmKXt2YXIgYz1LSlVSLmFzbjEuY3NyO2lmKGYuc3ViamVjdD09PXVuZGVmaW5lZCl7dGhyb3cicGFyYW1ldGVyIHN1YmplY3QgdW5kZWZpbmVkIn1pZihmLnNianB1YmtleT09PXVuZGVmaW5lZCl7dGhyb3cicGFyYW1ldGVyIHNianB1YmtleSB1bmRlZmluZWQifWlmKGYuc2lnYWxnPT09dW5kZWZpbmVkKXt0aHJvdyJwYXJhbWV0ZXIgc2lnYWxnIHVuZGVmaW5lZCJ9aWYoZi5zYmpwcnZrZXk9PT11bmRlZmluZWQpe3Rocm93InBhcmFtZXRlciBzYmpwdWJrZXkgdW5kZWZpbmVkIn12YXIgYj1uZXcgYy5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8oKTtiLnNldFN1YmplY3RCeVBhcmFtKGYuc3ViamVjdCk7Yi5zZXRTdWJqZWN0UHVibGljS2V5QnlHZXRLZXkoZi5zYmpwdWJrZXkpO3ZhciBkPW5ldyBjLkNlcnRpZmljYXRpb25SZXF1ZXN0KHtjc3JpbmZvOmJ9KTt2YXIgYT1LRVlVVElMLmdldEtleShmLnNianBydmtleSk7ZC5zaWduKGYuc2lnYWxnLGEpO3ZhciBlPWQuZ2V0UEVNU3RyaW5nKCk7cmV0dXJuIGV9OwovKiEgYmFzZTY0eC0xLjEuNiAoYykgMjAxMi0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwpmdW5jdGlvbiBCYXNlNjR4KCl7fWZ1bmN0aW9uIHN0b0JBKGQpe3ZhciBiPW5ldyBBcnJheSgpO2Zvcih2YXIgYz0wO2M8ZC5sZW5ndGg7YysrKXtiW2NdPWQuY2hhckNvZGVBdChjKX1yZXR1cm4gYn1mdW5jdGlvbiBCQXRvcyhiKXt2YXIgZD0iIjtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7ZD1kK1N0cmluZy5mcm9tQ2hhckNvZGUoYltjXSl9cmV0dXJuIGR9ZnVuY3Rpb24gQkF0b2hleChiKXt2YXIgZT0iIjtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGM9YltkXS50b1N0cmluZygxNik7aWYoYy5sZW5ndGg9PTEpe2M9IjAiK2N9ZT1lK2N9cmV0dXJuIGV9ZnVuY3Rpb24gc3RvaGV4KGEpe3JldHVybiBCQXRvaGV4KHN0b0JBKGEpKX1mdW5jdGlvbiBzdG9iNjQoYSl7cmV0dXJuIGhleDJiNjQoc3RvaGV4KGEpKX1mdW5jdGlvbiBzdG9iNjR1KGEpe3JldHVybiBiNjR0b2I2NHUoaGV4MmI2NChzdG9oZXgoYSkpKX1mdW5jdGlvbiBiNjR1dG9zKGEpe3JldHVybiBCQXRvcyhiNjR0b0JBKGI2NHV0b2I2NChhKSkpfWZ1bmN0aW9uIGI2NHRvYjY0dShhKXthPWEucmVwbGFjZSgvXD0vZywiIik7YT1hLnJlcGxhY2UoL1wrL2csIi0iKTthPWEucmVwbGFjZSgvXC8vZywiXyIpO3JldHVybiBhfWZ1bmN0aW9uIGI2NHV0b2I2NChhKXtpZihhLmxlbmd0aCU0PT0yKXthPWErIj09In1lbHNle2lmKGEubGVuZ3RoJTQ9PTMpe2E9YSsiPSJ9fWE9YS5yZXBsYWNlKC8tL2csIisiKTthPWEucmVwbGFjZSgvXy9nLCIvIik7cmV0dXJuIGF9ZnVuY3Rpb24gaGV4dG9iNjR1KGEpe2lmKGEubGVuZ3RoJTI9PTEpe2E9IjAiK2F9cmV0dXJuIGI2NHRvYjY0dShoZXgyYjY0KGEpKX1mdW5jdGlvbiBiNjR1dG9oZXgoYSl7cmV0dXJuIGI2NHRvaGV4KGI2NHV0b2I2NChhKSl9dmFyIHV0Zjh0b2I2NHUsYjY0dXRvdXRmODtpZih0eXBlb2YgQnVmZmVyPT09ImZ1bmN0aW9uIil7dXRmOHRvYjY0dT1mdW5jdGlvbihhKXtyZXR1cm4gYjY0dG9iNjR1KG5ldyBCdWZmZXIoYSwidXRmOCIpLnRvU3RyaW5nKCJiYXNlNjQiKSl9O2I2NHV0b3V0Zjg9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBCdWZmZXIoYjY0dXRvYjY0KGEpLCJiYXNlNjQiKS50b1N0cmluZygidXRmOCIpfX1lbHNle3V0Zjh0b2I2NHU9ZnVuY3Rpb24oYSl7cmV0dXJuIGhleHRvYjY0dSh1cmljbXB0b2hleChlbmNvZGVVUklDb21wb25lbnRBbGwoYSkpKX07YjY0dXRvdXRmOD1mdW5jdGlvbihhKXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGhleHRvdXJpY21wKGI2NHV0b2hleChhKSkpfX1mdW5jdGlvbiB1dGY4dG9iNjQoYSl7cmV0dXJuIGhleDJiNjQodXJpY21wdG9oZXgoZW5jb2RlVVJJQ29tcG9uZW50QWxsKGEpKSl9ZnVuY3Rpb24gYjY0dG91dGY4KGEpe3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoaGV4dG91cmljbXAoYjY0dG9oZXgoYSkpKX1mdW5jdGlvbiB1dGY4dG9oZXgoYSl7cmV0dXJuIHVyaWNtcHRvaGV4KGVuY29kZVVSSUNvbXBvbmVudEFsbChhKSl9ZnVuY3Rpb24gaGV4dG91dGY4KGEpe3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoaGV4dG91cmljbXAoYSkpfWZ1bmN0aW9uIGhleHRvcnN0cihjKXt2YXIgYj0iIjtmb3IodmFyIGE9MDthPGMubGVuZ3RoLTE7YSs9Mil7Yis9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChjLnN1YnN0cihhLDIpLDE2KSl9cmV0dXJuIGJ9ZnVuY3Rpb24gcnN0cnRvaGV4KGMpe3ZhciBhPSIiO2Zvcih2YXIgYj0wO2I8Yy5sZW5ndGg7YisrKXthKz0oIjAiK2MuY2hhckNvZGVBdChiKS50b1N0cmluZygxNikpLnNsaWNlKC0yKX1yZXR1cm4gYX1mdW5jdGlvbiBoZXh0b2I2NChhKXtyZXR1cm4gaGV4MmI2NChhKX1mdW5jdGlvbiBoZXh0b2I2NG5sKGIpe3ZhciBhPWhleHRvYjY0KGIpO3ZhciBjPWEucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTtjPWMucmVwbGFjZSgvXHJcbiQvLCIiKTtyZXR1cm4gY31mdW5jdGlvbiBiNjRubHRvaGV4KGIpe3ZhciBhPWIucmVwbGFjZSgvW14wLTlBLVphLXpcLys9XSovZywiIik7dmFyIGM9YjY0dG9oZXgoYSk7cmV0dXJuIGN9ZnVuY3Rpb24gdXJpY21wdG9oZXgoYSl7cmV0dXJuIGEucmVwbGFjZSgvJS9nLCIiKX1mdW5jdGlvbiBoZXh0b3VyaWNtcChhKXtyZXR1cm4gYS5yZXBsYWNlKC8oLi4pL2csIiUkMSIpfWZ1bmN0aW9uIGVuY29kZVVSSUNvbXBvbmVudEFsbChhKXt2YXIgZD1lbmNvZGVVUklDb21wb25lbnQoYSk7dmFyIGI9IiI7Zm9yKHZhciBjPTA7YzxkLmxlbmd0aDtjKyspe2lmKGRbY109PSIlIil7Yj1iK2Quc3Vic3RyKGMsMyk7Yz1jKzJ9ZWxzZXtiPWIrIiUiK3N0b2hleChkW2NdKX19cmV0dXJuIGJ9ZnVuY3Rpb24gbmV3bGluZV90b1VuaXgoYSl7YT1hLnJlcGxhY2UoL1xyXG4vbWcsIlxuIik7cmV0dXJuIGF9ZnVuY3Rpb24gbmV3bGluZV90b0RvcyhhKXthPWEucmVwbGFjZSgvXHJcbi9tZywiXG4iKTthPWEucmVwbGFjZSgvXG4vbWcsIlxyXG4iKTtyZXR1cm4gYX1mdW5jdGlvbiBpbnRhcnlzdHJ0b2hleChiKXtiPWIucmVwbGFjZSgvXlxzKlxbXHMqLywiIik7Yj1iLnJlcGxhY2UoL1xzKlxdXHMqJC8sIiIpO2I9Yi5yZXBsYWNlKC9ccyovZywiIik7dHJ5e3ZhciBjPWIuc3BsaXQoLywvKS5tYXAoZnVuY3Rpb24oZyxlLGgpe3ZhciBmPXBhcnNlSW50KGcpO2lmKGY8MHx8MjU1PGYpe3Rocm93ImludGVnZXIgbm90IGluIHJhbmdlIDAtMjU1In12YXIgZD0oIjAwIitmLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO3JldHVybiBkfSkuam9pbigiIik7cmV0dXJuIGN9Y2F0Y2goYSl7dGhyb3cibWFsZm9ybWVkIGludGVnZXIgYXJyYXkgc3RyaW5nOiAiK2F9fXZhciBzdHJkaWZmaWR4PWZ1bmN0aW9uKGMsYSl7dmFyIGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+YS5sZW5ndGgpe2Q9YS5sZW5ndGh9Zm9yKHZhciBiPTA7YjxkO2IrKyl7aWYoYy5jaGFyQ29kZUF0KGIpIT1hLmNoYXJDb2RlQXQoYikpe3JldHVybiBifX1pZihjLmxlbmd0aCE9YS5sZW5ndGgpe3JldHVybiBkfXJldHVybiAtMX07Ci8qISBjcnlwdG8tMS4xLjguanMgKGMpIDIwMTMtMjAxNiBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5jcnlwdG89PSJ1bmRlZmluZWQifHwhS0pVUi5jcnlwdG8pe0tKVVIuY3J5cHRvPXt9fUtKVVIuY3J5cHRvLlV0aWw9bmV3IGZ1bmN0aW9uKCl7dGhpcy5ESUdFU1RJTkZPSEVBRD17c2hhMToiMzAyMTMwMDkwNjA1MmIwZTAzMDIxYTA1MDAwNDE0IixzaGEyMjQ6IjMwMmQzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwNDA1MDAwNDFjIixzaGEyNTY6IjMwMzEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMTA1MDAwNDIwIixzaGEzODQ6IjMwNDEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMjA1MDAwNDMwIixzaGE1MTI6IjMwNTEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMzA1MDAwNDQwIixtZDI6IjMwMjAzMDBjMDYwODJhODY0ODg2ZjcwZDAyMDIwNTAwMDQxMCIsbWQ1OiIzMDIwMzAwYzA2MDgyYTg2NDg4NmY3MGQwMjA1MDUwMDA0MTAiLHJpcGVtZDE2MDoiMzAyMTMwMDkwNjA1MmIyNDAzMDIwMTA1MDAwNDE0Iix9O3RoaXMuREVGQVVMVFBST1ZJREVSPXttZDU6ImNyeXB0b2pzIixzaGExOiJjcnlwdG9qcyIsc2hhMjI0OiJjcnlwdG9qcyIsc2hhMjU2OiJjcnlwdG9qcyIsc2hhMzg0OiJjcnlwdG9qcyIsc2hhNTEyOiJjcnlwdG9qcyIscmlwZW1kMTYwOiJjcnlwdG9qcyIsaG1hY21kNToiY3J5cHRvanMiLGhtYWNzaGExOiJjcnlwdG9qcyIsaG1hY3NoYTIyNDoiY3J5cHRvanMiLGhtYWNzaGEyNTY6ImNyeXB0b2pzIixobWFjc2hhMzg0OiJjcnlwdG9qcyIsaG1hY3NoYTUxMjoiY3J5cHRvanMiLGhtYWNyaXBlbWQxNjA6ImNyeXB0b2pzIixNRDV3aXRoUlNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMXdpdGhSU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEyMjR3aXRoUlNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjU2d2l0aFJTQToiY3J5cHRvanMvanNyc2EiLFNIQTM4NHdpdGhSU0E6ImNyeXB0b2pzL2pzcnNhIixTSEE1MTJ3aXRoUlNBOiJjcnlwdG9qcy9qc3JzYSIsUklQRU1EMTYwd2l0aFJTQToiY3J5cHRvanMvanNyc2EiLE1ENXdpdGhFQ0RTQToiY3J5cHRvanMvanNyc2EiLFNIQTF3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEyMjR3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEyNTZ3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEzODR3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEE1MTJ3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixSSVBFTUQxNjB3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEExd2l0aERTQToiY3J5cHRvanMvanNyc2EiLFNIQTIyNHdpdGhEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEyNTZ3aXRoRFNBOiJjcnlwdG9qcy9qc3JzYSIsTUQ1d2l0aFJTQWFuZE1HRjE6ImNyeXB0b2pzL2pzcnNhIixTSEExd2l0aFJTQWFuZE1HRjE6ImNyeXB0b2pzL2pzcnNhIixTSEEyMjR3aXRoUlNBYW5kTUdGMToiY3J5cHRvanMvanNyc2EiLFNIQTI1NndpdGhSU0FhbmRNR0YxOiJjcnlwdG9qcy9qc3JzYSIsU0hBMzg0d2l0aFJTQWFuZE1HRjE6ImNyeXB0b2pzL2pzcnNhIixTSEE1MTJ3aXRoUlNBYW5kTUdGMToiY3J5cHRvanMvanNyc2EiLFJJUEVNRDE2MHdpdGhSU0FhbmRNR0YxOiJjcnlwdG9qcy9qc3JzYSIsfTt0aGlzLkNSWVBUT0pTTUVTU0FHRURJR0VTVE5BTUU9e21kNTpDcnlwdG9KUy5hbGdvLk1ENSxzaGExOkNyeXB0b0pTLmFsZ28uU0hBMSxzaGEyMjQ6Q3J5cHRvSlMuYWxnby5TSEEyMjQsc2hhMjU2OkNyeXB0b0pTLmFsZ28uU0hBMjU2LHNoYTM4NDpDcnlwdG9KUy5hbGdvLlNIQTM4NCxzaGE1MTI6Q3J5cHRvSlMuYWxnby5TSEE1MTIscmlwZW1kMTYwOkNyeXB0b0pTLmFsZ28uUklQRU1EMTYwfTt0aGlzLmdldERpZ2VzdEluZm9IZXg9ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgdGhpcy5ESUdFU1RJTkZPSEVBRFtiXT09InVuZGVmaW5lZCIpe3Rocm93ImFsZyBub3Qgc3VwcG9ydGVkIGluIFV0aWwuRElHRVNUSU5GT0hFQUQ6ICIrYn1yZXR1cm4gdGhpcy5ESUdFU1RJTkZPSEVBRFtiXSthfTt0aGlzLmdldFBhZGRlZERpZ2VzdEluZm9IZXg9ZnVuY3Rpb24oaCxhLGope3ZhciBjPXRoaXMuZ2V0RGlnZXN0SW5mb0hleChoLGEpO3ZhciBkPWovNDtpZihjLmxlbmd0aCsyMj5kKXt0aHJvdyJrZXkgaXMgdG9vIHNob3J0IGZvciBTaWdBbGc6IGtleWxlbj0iK2orIiwiK2F9dmFyIGI9IjAwMDEiO3ZhciBrPSIwMCIrYzt2YXIgZz0iIjt2YXIgbD1kLWIubGVuZ3RoLWsubGVuZ3RoO2Zvcih2YXIgZj0wO2Y8bDtmKz0yKXtnKz0iZmYifXZhciBlPWIrZytrO3JldHVybiBlfTt0aGlzLmhhc2hTdHJpbmc9ZnVuY3Rpb24oYSxjKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOmN9KTtyZXR1cm4gYi5kaWdlc3RTdHJpbmcoYSl9O3RoaXMuaGFzaEhleD1mdW5jdGlvbihiLGMpe3ZhciBhPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6Y30pO3JldHVybiBhLmRpZ2VzdEhleChiKX07dGhpcy5zaGExPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6InNoYTEiLHByb3Y6ImNyeXB0b2pzIn0pO3JldHVybiBiLmRpZ2VzdFN0cmluZyhhKX07dGhpcy5zaGEyNTY9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzoic2hhMjU2Iixwcm92OiJjcnlwdG9qcyJ9KTtyZXR1cm4gYi5kaWdlc3RTdHJpbmcoYSl9O3RoaXMuc2hhMjU2SGV4PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6InNoYTI1NiIscHJvdjoiY3J5cHRvanMifSk7cmV0dXJuIGIuZGlnZXN0SGV4KGEpfTt0aGlzLnNoYTUxMj1mdW5jdGlvbihhKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOiJzaGE1MTIiLHByb3Y6ImNyeXB0b2pzIn0pO3JldHVybiBiLmRpZ2VzdFN0cmluZyhhKX07dGhpcy5zaGE1MTJIZXg9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzoic2hhNTEyIixwcm92OiJjcnlwdG9qcyJ9KTtyZXR1cm4gYi5kaWdlc3RIZXgoYSl9O3RoaXMubWQ1PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6Im1kNSIscHJvdjoiY3J5cHRvanMifSk7cmV0dXJuIGIuZGlnZXN0U3RyaW5nKGEpfTt0aGlzLnJpcGVtZDE2MD1mdW5jdGlvbihhKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOiJyaXBlbWQxNjAiLHByb3Y6ImNyeXB0b2pzIn0pO3JldHVybiBiLmRpZ2VzdFN0cmluZyhhKX07dGhpcy5nZXRDcnlwdG9KU01EQnlOYW1lPWZ1bmN0aW9uKGEpe319O0tKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Q9ZnVuY3Rpb24oYyl7dmFyIGI9bnVsbDt2YXIgYT1udWxsO3ZhciBkPW51bGw7dGhpcy5zZXRBbGdBbmRQcm92aWRlcj1mdW5jdGlvbihnLGYpe2lmKGchPW51bGwmJmY9PT11bmRlZmluZWQpe2Y9S0pVUi5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbZ119aWYoIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOiIuaW5kZXhPZihnKSE9LTEmJmY9PSJjcnlwdG9qcyIpe3RyeXt0aGlzLm1kPUtKVVIuY3J5cHRvLlV0aWwuQ1JZUFRPSlNNRVNTQUdFRElHRVNUTkFNRVtnXS5jcmVhdGUoKX1jYXRjaChlKXt0aHJvdyJzZXRBbGdBbmRQcm92aWRlciBoYXNoIGFsZyBzZXQgZmFpbCBhbGc9IitnKyIvIitlfXRoaXMudXBkYXRlU3RyaW5nPWZ1bmN0aW9uKGgpe3RoaXMubWQudXBkYXRlKGgpfTt0aGlzLnVwZGF0ZUhleD1mdW5jdGlvbihoKXt2YXIgaT1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGgpO3RoaXMubWQudXBkYXRlKGkpfTt0aGlzLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBoPXRoaXMubWQuZmluYWxpemUoKTtyZXR1cm4gaC50b1N0cmluZyhDcnlwdG9KUy5lbmMuSGV4KX07dGhpcy5kaWdlc3RTdHJpbmc9ZnVuY3Rpb24oaCl7dGhpcy51cGRhdGVTdHJpbmcoaCk7cmV0dXJuIHRoaXMuZGlnZXN0KCl9O3RoaXMuZGlnZXN0SGV4PWZ1bmN0aW9uKGgpe3RoaXMudXBkYXRlSGV4KGgpO3JldHVybiB0aGlzLmRpZ2VzdCgpfX1pZigiOnNoYTI1NjoiLmluZGV4T2YoZykhPS0xJiZmPT0ic2pjbCIpe3RyeXt0aGlzLm1kPW5ldyBzamNsLmhhc2guc2hhMjU2KCl9Y2F0Y2goZSl7dGhyb3cic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgYWxnPSIrZysiLyIrZX10aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbihoKXt0aGlzLm1kLnVwZGF0ZShoKX07dGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24oaSl7dmFyIGg9c2pjbC5jb2RlYy5oZXgudG9CaXRzKGkpO3RoaXMubWQudXBkYXRlKGgpfTt0aGlzLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBoPXRoaXMubWQuZmluYWxpemUoKTtyZXR1cm4gc2pjbC5jb2RlYy5oZXguZnJvbUJpdHMoaCl9O3RoaXMuZGlnZXN0U3RyaW5nPWZ1bmN0aW9uKGgpe3RoaXMudXBkYXRlU3RyaW5nKGgpO3JldHVybiB0aGlzLmRpZ2VzdCgpfTt0aGlzLmRpZ2VzdEhleD1mdW5jdGlvbihoKXt0aGlzLnVwZGF0ZUhleChoKTtyZXR1cm4gdGhpcy5kaWdlc3QoKX19fTt0aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbihlKXt0aHJvdyJ1cGRhdGVTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnTmFtZSsiLyIrdGhpcy5wcm92TmFtZX07dGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24oZSl7dGhyb3cidXBkYXRlSGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ05hbWUrIi8iK3RoaXMucHJvdk5hbWV9O3RoaXMuZGlnZXN0PWZ1bmN0aW9uKCl7dGhyb3ciZGlnZXN0KCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ05hbWUrIi8iK3RoaXMucHJvdk5hbWV9O3RoaXMuZGlnZXN0U3RyaW5nPWZ1bmN0aW9uKGUpe3Rocm93ImRpZ2VzdFN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6ICIrdGhpcy5hbGdOYW1lKyIvIit0aGlzLnByb3ZOYW1lfTt0aGlzLmRpZ2VzdEhleD1mdW5jdGlvbihlKXt0aHJvdyJkaWdlc3RIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnTmFtZSsiLyIrdGhpcy5wcm92TmFtZX07aWYoYyE9PXVuZGVmaW5lZCl7aWYoYy5hbGchPT11bmRlZmluZWQpe3RoaXMuYWxnTmFtZT1jLmFsZztpZihjLnByb3Y9PT11bmRlZmluZWQpe3RoaXMucHJvdk5hbWU9S0pVUi5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdGhpcy5hbGdOYW1lXX10aGlzLnNldEFsZ0FuZFByb3ZpZGVyKHRoaXMuYWxnTmFtZSx0aGlzLnByb3ZOYW1lKX19fTtLSlVSLmNyeXB0by5NYWM9ZnVuY3Rpb24oZCl7dmFyIGY9bnVsbDt2YXIgYz1udWxsO3ZhciBhPW51bGw7dmFyIGU9bnVsbDt2YXIgYj1udWxsO3RoaXMuc2V0QWxnQW5kUHJvdmlkZXI9ZnVuY3Rpb24oayxpKXtrPWsudG9Mb3dlckNhc2UoKTtpZihrPT1udWxsKXtrPSJobWFjc2hhMSJ9az1rLnRvTG93ZXJDYXNlKCk7aWYoay5zdWJzdHIoMCw0KSE9ImhtYWMiKXt0aHJvdyJzZXRBbGdBbmRQcm92aWRlciB1bnN1cHBvcnRlZCBITUFDIGFsZzogIitrfWlmKGk9PT11bmRlZmluZWQpe2k9S0pVUi5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJba119dGhpcy5hbGdQcm92PWsrIi8iK2k7dmFyIGc9ay5zdWJzdHIoNCk7aWYoIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOiIuaW5kZXhPZihnKSE9LTEmJmk9PSJjcnlwdG9qcyIpe3RyeXt2YXIgaj1LSlVSLmNyeXB0by5VdGlsLkNSWVBUT0pTTUVTU0FHRURJR0VTVE5BTUVbZ107dGhpcy5tYWM9Q3J5cHRvSlMuYWxnby5ITUFDLmNyZWF0ZShqLHRoaXMucGFzcyl9Y2F0Y2goaCl7dGhyb3cic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgaGFzaEFsZz0iK2crIi8iK2h9dGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24obCl7dGhpcy5tYWMudXBkYXRlKGwpfTt0aGlzLnVwZGF0ZUhleD1mdW5jdGlvbihsKXt2YXIgbT1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGwpO3RoaXMubWFjLnVwZGF0ZShtKX07dGhpcy5kb0ZpbmFsPWZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5tYWMuZmluYWxpemUoKTtyZXR1cm4gbC50b1N0cmluZyhDcnlwdG9KUy5lbmMuSGV4KX07dGhpcy5kb0ZpbmFsU3RyaW5nPWZ1bmN0aW9uKGwpe3RoaXMudXBkYXRlU3RyaW5nKGwpO3JldHVybiB0aGlzLmRvRmluYWwoKX07dGhpcy5kb0ZpbmFsSGV4PWZ1bmN0aW9uKGwpe3RoaXMudXBkYXRlSGV4KGwpO3JldHVybiB0aGlzLmRvRmluYWwoKX19fTt0aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbihnKXt0aHJvdyJ1cGRhdGVTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnUHJvdn07dGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24oZyl7dGhyb3cidXBkYXRlSGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ1Byb3Z9O3RoaXMuZG9GaW5hbD1mdW5jdGlvbigpe3Rocm93ImRpZ2VzdCgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6ICIrdGhpcy5hbGdQcm92fTt0aGlzLmRvRmluYWxTdHJpbmc9ZnVuY3Rpb24oZyl7dGhyb3ciZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ1Byb3Z9O3RoaXMuZG9GaW5hbEhleD1mdW5jdGlvbihnKXt0aHJvdyJkaWdlc3RIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnUHJvdn07dGhpcy5zZXRQYXNzd29yZD1mdW5jdGlvbihoKXtpZih0eXBlb2YgaD09InN0cmluZyIpe3ZhciBnPWg7aWYoaC5sZW5ndGglMj09MXx8IWgubWF0Y2goL15bMC05QS1GYS1mXSskLykpe2c9cnN0cnRvaGV4KGgpfXRoaXMucGFzcz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGcpO3JldHVybn1pZih0eXBlb2YgaCE9Im9iamVjdCIpe3Rocm93IktKVVIuY3J5cHRvLk1hYyB1bnN1cHBvcnRlZCBwYXNzd29yZCB0eXBlOiAiK2h9dmFyIGc9bnVsbDtpZihoLmhleCE9PXVuZGVmaW5lZCl7aWYoaC5oZXgubGVuZ3RoJTIhPTB8fCFoLmhleC5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKSl7dGhyb3ciTWFjOiB3cm9uZyBoZXggcGFzc3dvcmQ6ICIraC5oZXh9Zz1oLmhleH1pZihoLnV0ZjghPT11bmRlZmluZWQpe2c9dXRmOHRvaGV4KGgudXRmOCl9aWYoaC5yc3RyIT09dW5kZWZpbmVkKXtnPXJzdHJ0b2hleChoLnJzdHIpfWlmKGguYjY0IT09dW5kZWZpbmVkKXtnPWI2NHRvaGV4KGguYjY0KX1pZihoLmI2NHUhPT11bmRlZmluZWQpe2c9YjY0dXRvaGV4KGguYjY0dSl9aWYoZz09bnVsbCl7dGhyb3ciS0pVUi5jcnlwdG8uTWFjIHVuc3VwcG9ydGVkIHBhc3N3b3JkIHR5cGU6ICIraH10aGlzLnBhc3M9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShnKX07aWYoZCE9PXVuZGVmaW5lZCl7aWYoZC5wYXNzIT09dW5kZWZpbmVkKXt0aGlzLnNldFBhc3N3b3JkKGQucGFzcyl9aWYoZC5hbGchPT11bmRlZmluZWQpe3RoaXMuYWxnTmFtZT1kLmFsZztpZihkLnByb3Y9PT11bmRlZmluZWQpe3RoaXMucHJvdk5hbWU9S0pVUi5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdGhpcy5hbGdOYW1lXX10aGlzLnNldEFsZ0FuZFByb3ZpZGVyKHRoaXMuYWxnTmFtZSx0aGlzLnByb3ZOYW1lKX19fTtLSlVSLmNyeXB0by5TaWduYXR1cmU9ZnVuY3Rpb24obyl7dmFyIHE9bnVsbDt2YXIgbj1udWxsO3ZhciByPW51bGw7dmFyIGM9bnVsbDt2YXIgbD1udWxsO3ZhciBkPW51bGw7dmFyIGs9bnVsbDt2YXIgaD1udWxsO3ZhciBwPW51bGw7dmFyIGU9bnVsbDt2YXIgYj0tMTt2YXIgZz1udWxsO3ZhciBqPW51bGw7dmFyIGE9bnVsbDt2YXIgaT1udWxsO3ZhciBmPW51bGw7dGhpcy5fc2V0QWxnTmFtZXM9ZnVuY3Rpb24oKXtpZih0aGlzLmFsZ05hbWUubWF0Y2goL14oLispd2l0aCguKykkLykpe3RoaXMubWRBbGdOYW1lPVJlZ0V4cC4kMS50b0xvd2VyQ2FzZSgpO3RoaXMucHVia2V5QWxnTmFtZT1SZWdFeHAuJDIudG9Mb3dlckNhc2UoKX19O3RoaXMuX3plcm9QYWRkaW5nT2ZTaWduYXR1cmU9ZnVuY3Rpb24oeCx3KXt2YXIgdj0iIjt2YXIgdD13LzQteC5sZW5ndGg7Zm9yKHZhciB1PTA7dTx0O3UrKyl7dj12KyIwIn1yZXR1cm4gdit4fTt0aGlzLnNldEFsZ0FuZFByb3ZpZGVyPWZ1bmN0aW9uKHUsdCl7dGhpcy5fc2V0QWxnTmFtZXMoKTtpZih0IT0iY3J5cHRvanMvanNyc2EiKXt0aHJvdyJwcm92aWRlciBub3Qgc3VwcG9ydGVkOiAiK3R9aWYoIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOiIuaW5kZXhPZih0aGlzLm1kQWxnTmFtZSkhPS0xKXt0cnl7dGhpcy5tZD1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOnRoaXMubWRBbGdOYW1lfSl9Y2F0Y2gocyl7dGhyb3cic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgYWxnPSIrdGhpcy5tZEFsZ05hbWUrIi8iK3N9dGhpcy5pbml0PWZ1bmN0aW9uKHcseCl7dmFyIHk9bnVsbDt0cnl7aWYoeD09PXVuZGVmaW5lZCl7eT1LRVlVVElMLmdldEtleSh3KX1lbHNle3k9S0VZVVRJTC5nZXRLZXkodyx4KX19Y2F0Y2godil7dGhyb3ciaW5pdCBmYWlsZWQ6Iit2fWlmKHkuaXNQcml2YXRlPT09dHJ1ZSl7dGhpcy5wcnZLZXk9eTt0aGlzLnN0YXRlPSJTSUdOIn1lbHNle2lmKHkuaXNQdWJsaWM9PT10cnVlKXt0aGlzLnB1YktleT15O3RoaXMuc3RhdGU9IlZFUklGWSJ9ZWxzZXt0aHJvdyJpbml0IGZhaWxlZC46Iit5fX19O3RoaXMuaW5pdFNpZ249ZnVuY3Rpb24odil7aWYodHlwZW9mIHYuZWNwcnZoZXg9PSJzdHJpbmciJiZ0eXBlb2Ygdi5lY2N1cnZlbmFtZT09InN0cmluZyIpe3RoaXMuZWNwcnZoZXg9di5lY3BydmhleDt0aGlzLmVjY3VydmVuYW1lPXYuZWNjdXJ2ZW5hbWV9ZWxzZXt0aGlzLnBydktleT12fXRoaXMuc3RhdGU9IlNJR04ifTt0aGlzLmluaXRWZXJpZnlCeVB1YmxpY0tleT1mdW5jdGlvbih2KXtpZih0eXBlb2Ygdi5lY3B1YmhleD09InN0cmluZyImJnR5cGVvZiB2LmVjY3VydmVuYW1lPT0ic3RyaW5nIil7dGhpcy5lY3B1YmhleD12LmVjcHViaGV4O3RoaXMuZWNjdXJ2ZW5hbWU9di5lY2N1cnZlbmFtZX1lbHNle2lmKHYgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5FQ0RTQSl7dGhpcy5wdWJLZXk9dn1lbHNle2lmKHYgaW5zdGFuY2VvZiBSU0FLZXkpe3RoaXMucHViS2V5PXZ9fX10aGlzLnN0YXRlPSJWRVJJRlkifTt0aGlzLmluaXRWZXJpZnlCeUNlcnRpZmljYXRlUEVNPWZ1bmN0aW9uKHYpe3ZhciB3PW5ldyBYNTA5KCk7dy5yZWFkQ2VydFBFTSh2KTt0aGlzLnB1YktleT13LnN1YmplY3RQdWJsaWNLZXlSU0E7dGhpcy5zdGF0ZT0iVkVSSUZZIn07dGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24odil7dGhpcy5tZC51cGRhdGVTdHJpbmcodil9O3RoaXMudXBkYXRlSGV4PWZ1bmN0aW9uKHYpe3RoaXMubWQudXBkYXRlSGV4KHYpfTt0aGlzLnNpZ249ZnVuY3Rpb24oKXt0aGlzLnNIYXNoSGV4PXRoaXMubWQuZGlnZXN0KCk7aWYodHlwZW9mIHRoaXMuZWNwcnZoZXghPSJ1bmRlZmluZWQiJiZ0eXBlb2YgdGhpcy5lY2N1cnZlbmFtZSE9InVuZGVmaW5lZCIpe3ZhciB2PW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6dGhpcy5lY2N1cnZlbmFtZX0pO3RoaXMuaFNpZ249di5zaWduSGV4KHRoaXMuc0hhc2hIZXgsdGhpcy5lY3BydmhleCl9ZWxzZXtpZih0aGlzLnBydktleSBpbnN0YW5jZW9mIFJTQUtleSYmdGhpcy5wdWJrZXlBbGdOYW1lPT0icnNhYW5kbWdmMSIpe3RoaXMuaFNpZ249dGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaFBTUyh0aGlzLnNIYXNoSGV4LHRoaXMubWRBbGdOYW1lLHRoaXMucHNzU2FsdExlbil9ZWxzZXtpZih0aGlzLnBydktleSBpbnN0YW5jZW9mIFJTQUtleSYmdGhpcy5wdWJrZXlBbGdOYW1lPT0icnNhIil7dGhpcy5oU2lnbj10aGlzLnBydktleS5zaWduV2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgsdGhpcy5tZEFsZ05hbWUpfWVsc2V7aWYodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5FQ0RTQSl7dGhpcy5oU2lnbj10aGlzLnBydktleS5zaWduV2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgpfWVsc2V7aWYodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0Epe3RoaXMuaFNpZ249dGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4KX1lbHNle3Rocm93IlNpZ25hdHVyZTogdW5zdXBwb3J0ZWQgcHVibGljIGtleSBhbGc6ICIrdGhpcy5wdWJrZXlBbGdOYW1lfX19fX1yZXR1cm4gdGhpcy5oU2lnbn07dGhpcy5zaWduU3RyaW5nPWZ1bmN0aW9uKHYpe3RoaXMudXBkYXRlU3RyaW5nKHYpO3JldHVybiB0aGlzLnNpZ24oKX07dGhpcy5zaWduSGV4PWZ1bmN0aW9uKHYpe3RoaXMudXBkYXRlSGV4KHYpO3JldHVybiB0aGlzLnNpZ24oKX07dGhpcy52ZXJpZnk9ZnVuY3Rpb24odil7dGhpcy5zSGFzaEhleD10aGlzLm1kLmRpZ2VzdCgpO2lmKHR5cGVvZiB0aGlzLmVjcHViaGV4IT0idW5kZWZpbmVkIiYmdHlwZW9mIHRoaXMuZWNjdXJ2ZW5hbWUhPSJ1bmRlZmluZWQiKXt2YXIgdz1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOnRoaXMuZWNjdXJ2ZW5hbWV9KTtyZXR1cm4gdy52ZXJpZnlIZXgodGhpcy5zSGFzaEhleCx2LHRoaXMuZWNwdWJoZXgpfWVsc2V7aWYodGhpcy5wdWJLZXkgaW5zdGFuY2VvZiBSU0FLZXkmJnRoaXMucHVia2V5QWxnTmFtZT09InJzYWFuZG1nZjEiKXtyZXR1cm4gdGhpcy5wdWJLZXkudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoUFNTKHRoaXMuc0hhc2hIZXgsdix0aGlzLm1kQWxnTmFtZSx0aGlzLnBzc1NhbHRMZW4pfWVsc2V7aWYodGhpcy5wdWJLZXkgaW5zdGFuY2VvZiBSU0FLZXkmJnRoaXMucHVia2V5QWxnTmFtZT09InJzYSIpe3JldHVybiB0aGlzLnB1YktleS52ZXJpZnlXaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCx2KX1lbHNle2lmKHRoaXMucHViS2V5IGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0Epe3JldHVybiB0aGlzLnB1YktleS52ZXJpZnlXaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCx2KX1lbHNle2lmKHRoaXMucHViS2V5IGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRFNBKXtyZXR1cm4gdGhpcy5wdWJLZXkudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgsdil9ZWxzZXt0aHJvdyJTaWduYXR1cmU6IHVuc3VwcG9ydGVkIHB1YmxpYyBrZXkgYWxnOiAiK3RoaXMucHVia2V5QWxnTmFtZX19fX19fX19O3RoaXMuaW5pdD1mdW5jdGlvbihzLHQpe3Rocm93ImluaXQoa2V5LCBwYXNzKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy5pbml0VmVyaWZ5QnlQdWJsaWNLZXk9ZnVuY3Rpb24ocyl7dGhyb3ciaW5pdFZlcmlmeUJ5UHVibGljS2V5KHJzYVB1YktleXkpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLmluaXRWZXJpZnlCeUNlcnRpZmljYXRlUEVNPWZ1bmN0aW9uKHMpe3Rocm93ImluaXRWZXJpZnlCeUNlcnRpZmljYXRlUEVNKGNlcnRQRU0pIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLmluaXRTaWduPWZ1bmN0aW9uKHMpe3Rocm93ImluaXRTaWduKHBydktleSkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj0iK3RoaXMuYWxnUHJvdk5hbWV9O3RoaXMudXBkYXRlU3RyaW5nPWZ1bmN0aW9uKHMpe3Rocm93InVwZGF0ZVN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLnVwZGF0ZUhleD1mdW5jdGlvbihzKXt0aHJvdyJ1cGRhdGVIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy5zaWduPWZ1bmN0aW9uKCl7dGhyb3cic2lnbigpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLnNpZ25TdHJpbmc9ZnVuY3Rpb24ocyl7dGhyb3ciZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj0iK3RoaXMuYWxnUHJvdk5hbWV9O3RoaXMuc2lnbkhleD1mdW5jdGlvbihzKXt0aHJvdyJkaWdlc3RIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy52ZXJpZnk9ZnVuY3Rpb24ocyl7dGhyb3cidmVyaWZ5KGhTaWdWYWwpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLmluaXRQYXJhbXM9bztpZihvIT09dW5kZWZpbmVkKXtpZihvLmFsZyE9PXVuZGVmaW5lZCl7dGhpcy5hbGdOYW1lPW8uYWxnO2lmKG8ucHJvdj09PXVuZGVmaW5lZCl7dGhpcy5wcm92TmFtZT1LSlVSLmNyeXB0by5VdGlsLkRFRkFVTFRQUk9WSURFUlt0aGlzLmFsZ05hbWVdfWVsc2V7dGhpcy5wcm92TmFtZT1vLnByb3Z9dGhpcy5hbGdQcm92TmFtZT10aGlzLmFsZ05hbWUrIjoiK3RoaXMucHJvdk5hbWU7dGhpcy5zZXRBbGdBbmRQcm92aWRlcih0aGlzLmFsZ05hbWUsdGhpcy5wcm92TmFtZSk7dGhpcy5fc2V0QWxnTmFtZXMoKX1pZihvLnBzc3NhbHRsZW4hPT11bmRlZmluZWQpe3RoaXMucHNzU2FsdExlbj1vLnBzc3NhbHRsZW59aWYoby5wcnZrZXlwZW0hPT11bmRlZmluZWQpe2lmKG8ucHJ2a2V5cGFzIT09dW5kZWZpbmVkKXt0aHJvdyJib3RoIHBydmtleXBlbSBhbmQgcHJ2a2V5cGFzIHBhcmFtZXRlcnMgbm90IHN1cHBvcnRlZCJ9ZWxzZXt0cnl7dmFyIHE9bmV3IFJTQUtleSgpO3EucmVhZFByaXZhdGVLZXlGcm9tUEVNU3RyaW5nKG8ucHJ2a2V5cGVtKTt0aGlzLmluaXRTaWduKHEpfWNhdGNoKG0pe3Rocm93ImZhdGFsIGVycm9yIHRvIGxvYWQgcGVtIHByaXZhdGUga2V5OiAiK219fX19fTtLSlVSLmNyeXB0by5PSUQ9bmV3IGZ1bmN0aW9uKCl7dGhpcy5vaWRoZXgybmFtZT17IjJhODY0ODg2ZjcwZDAxMDEwMSI6InJzYUVuY3J5cHRpb24iLCIyYTg2NDhjZTNkMDIwMSI6ImVjUHVibGljS2V5IiwiMmE4NjQ4Y2UzODA0MDEiOiJkc2EiLCIyYTg2NDhjZTNkMDMwMTA3Ijoic2VjcDI1NnIxIiwiMmI4MTA0MDAxZiI6InNlY3AxOTJrMSIsIjJiODEwNDAwMjEiOiJzZWNwMjI0cjEiLCIyYjgxMDQwMDBhIjoic2VjcDI1NmsxIiwiMmI4MTA0MDAyMyI6InNlY3A1MjFyMSIsIjJiODEwNDAwMjIiOiJzZWNwMzg0cjEiLCIyYTg2NDhjZTM4MDQwMyI6IlNIQTF3aXRoRFNBIiwiNjA4NjQ4MDE2NTAzMDQwMzAxIjoiU0hBMjI0d2l0aERTQSIsIjYwODY0ODAxNjUwMzA0MDMwMiI6IlNIQTI1NndpdGhEU0EiLH19OwovKiEgZWNkc2EtbW9kaWZpZWQtMS4wLjQuanMgKGMpIFN0ZXBoYW4gVGhvbWFzLCBLZW5qaSBVcnVzaGltYSB8IGdpdGh1Yi5jb20vYml0Y29pbmpzL2JpdGNvaW5qcy1saWIvYmxvYi9tYXN0ZXIvTElDRU5TRQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5jcnlwdG89PSJ1bmRlZmluZWQifHwhS0pVUi5jcnlwdG8pe0tKVVIuY3J5cHRvPXt9fUtKVVIuY3J5cHRvLkVDRFNBPWZ1bmN0aW9uKGgpe3ZhciBlPSJzZWNwMjU2cjEiO3ZhciBnPW51bGw7dmFyIGI9bnVsbDt2YXIgZj1udWxsO3ZhciBhPW5ldyBTZWN1cmVSYW5kb20oKTt2YXIgZD1udWxsO3RoaXMudHlwZT0iRUMiO2Z1bmN0aW9uIGMocyxvLHIsbil7dmFyIGo9TWF0aC5tYXgoby5iaXRMZW5ndGgoKSxuLmJpdExlbmd0aCgpKTt2YXIgdD1zLmFkZDJEKHIpO3ZhciBxPXMuY3VydmUuZ2V0SW5maW5pdHkoKTtmb3IodmFyIHA9ai0xO3A+PTA7LS1wKXtxPXEudHdpY2UyRCgpO3Euej1CaWdJbnRlZ2VyLk9ORTtpZihvLnRlc3RCaXQocCkpe2lmKG4udGVzdEJpdChwKSl7cT1xLmFkZDJEKHQpfWVsc2V7cT1xLmFkZDJEKHMpfX1lbHNle2lmKG4udGVzdEJpdChwKSl7cT1xLmFkZDJEKHIpfX19cmV0dXJuIHF9dGhpcy5nZXRCaWdSYW5kb209ZnVuY3Rpb24oaSl7cmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGkuYml0TGVuZ3RoKCksYSkubW9kKGkuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpKS5hZGQoQmlnSW50ZWdlci5PTkUpfTt0aGlzLnNldE5hbWVkQ3VydmU9ZnVuY3Rpb24oaSl7dGhpcy5lY3BhcmFtcz1LSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCLmdldEJ5TmFtZShpKTt0aGlzLnBydktleUhleD1udWxsO3RoaXMucHViS2V5SGV4PW51bGw7dGhpcy5jdXJ2ZU5hbWU9aX07dGhpcy5zZXRQcml2YXRlS2V5SGV4PWZ1bmN0aW9uKGkpe3RoaXMuaXNQcml2YXRlPXRydWU7dGhpcy5wcnZLZXlIZXg9aX07dGhpcy5zZXRQdWJsaWNLZXlIZXg9ZnVuY3Rpb24oaSl7dGhpcy5pc1B1YmxpYz10cnVlO3RoaXMucHViS2V5SGV4PWl9O3RoaXMuZ2VuZXJhdGVLZXlQYWlySGV4PWZ1bmN0aW9uKCl7dmFyIGs9dGhpcy5lY3BhcmFtcy5uO3ZhciBuPXRoaXMuZ2V0QmlnUmFuZG9tKGspO3ZhciBsPXRoaXMuZWNwYXJhbXMuRy5tdWx0aXBseShuKTt2YXIgcT1sLmdldFgoKS50b0JpZ0ludGVnZXIoKTt2YXIgbz1sLmdldFkoKS50b0JpZ0ludGVnZXIoKTt2YXIgaT10aGlzLmVjcGFyYW1zLmtleWxlbi80O3ZhciBtPSgiMDAwMDAwMDAwMCIrbi50b1N0cmluZygxNikpLnNsaWNlKC1pKTt2YXIgcj0oIjAwMDAwMDAwMDAiK3EudG9TdHJpbmcoMTYpKS5zbGljZSgtaSk7dmFyIHA9KCIwMDAwMDAwMDAwIitvLnRvU3RyaW5nKDE2KSkuc2xpY2UoLWkpO3ZhciBqPSIwNCIrcitwO3RoaXMuc2V0UHJpdmF0ZUtleUhleChtKTt0aGlzLnNldFB1YmxpY0tleUhleChqKTtyZXR1cm57ZWNwcnZoZXg6bSxlY3B1YmhleDpqfX07dGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLnNpZ25IZXgoaSx0aGlzLnBydktleUhleCl9O3RoaXMuc2lnbkhleD1mdW5jdGlvbihvLGope3ZhciB0PW5ldyBCaWdJbnRlZ2VyKGosMTYpO3ZhciBsPXRoaXMuZWNwYXJhbXMubjt2YXIgcT1uZXcgQmlnSW50ZWdlcihvLDE2KTtkb3t2YXIgbT10aGlzLmdldEJpZ1JhbmRvbShsKTt2YXIgdT10aGlzLmVjcGFyYW1zLkc7dmFyIHA9dS5tdWx0aXBseShtKTt2YXIgaT1wLmdldFgoKS50b0JpZ0ludGVnZXIoKS5tb2QobCl9d2hpbGUoaS5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKTw9MCk7dmFyIHY9bS5tb2RJbnZlcnNlKGwpLm11bHRpcGx5KHEuYWRkKHQubXVsdGlwbHkoaSkpKS5tb2QobCk7cmV0dXJuIEtKVVIuY3J5cHRvLkVDRFNBLmJpUlNTaWdUb0FTTjFTaWcoaSx2KX07dGhpcy5zaWduPWZ1bmN0aW9uKG0sdSl7dmFyIHE9dTt2YXIgaj10aGlzLmVjcGFyYW1zLm47dmFyIHA9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobSk7ZG97dmFyIGw9dGhpcy5nZXRCaWdSYW5kb20oaik7dmFyIHQ9dGhpcy5lY3BhcmFtcy5HO3ZhciBvPXQubXVsdGlwbHkobCk7dmFyIGk9by5nZXRYKCkudG9CaWdJbnRlZ2VyKCkubW9kKGopfXdoaWxlKGkuY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTyk8PTApO3ZhciB2PWwubW9kSW52ZXJzZShqKS5tdWx0aXBseShwLmFkZChxLm11bHRpcGx5KGkpKSkubW9kKGopO3JldHVybiB0aGlzLnNlcmlhbGl6ZVNpZyhpLHYpfTt0aGlzLnZlcmlmeVdpdGhNZXNzYWdlSGFzaD1mdW5jdGlvbihqLGkpe3JldHVybiB0aGlzLnZlcmlmeUhleChqLGksdGhpcy5wdWJLZXlIZXgpfTt0aGlzLnZlcmlmeUhleD1mdW5jdGlvbihtLGkscCl7dmFyIGwsajt2YXIgbz1LSlVSLmNyeXB0by5FQ0RTQS5wYXJzZVNpZ0hleChpKTtsPW8ucjtqPW8uczt2YXIgaztrPUVDUG9pbnRGcC5kZWNvZGVGcm9tSGV4KHRoaXMuZWNwYXJhbXMuY3VydmUscCk7dmFyIG49bmV3IEJpZ0ludGVnZXIobSwxNik7cmV0dXJuIHRoaXMudmVyaWZ5UmF3KG4sbCxqLGspfTt0aGlzLnZlcmlmeT1mdW5jdGlvbihvLHAsail7dmFyIGwsaTtpZihCaXRjb2luLlV0aWwuaXNBcnJheShwKSl7dmFyIG49dGhpcy5wYXJzZVNpZyhwKTtsPW4ucjtpPW4uc31lbHNle2lmKCJvYmplY3QiPT09dHlwZW9mIHAmJnAuciYmcC5zKXtsPXAucjtpPXAuc31lbHNle3Rocm93IkludmFsaWQgdmFsdWUgZm9yIHNpZ25hdHVyZSJ9fXZhciBrO2lmKGogaW5zdGFuY2VvZiBFQ1BvaW50RnApe2s9an1lbHNle2lmKEJpdGNvaW4uVXRpbC5pc0FycmF5KGopKXtrPUVDUG9pbnRGcC5kZWNvZGVGcm9tKHRoaXMuZWNwYXJhbXMuY3VydmUsail9ZWxzZXt0aHJvdyJJbnZhbGlkIGZvcm1hdCBmb3IgcHVia2V5IHZhbHVlLCBtdXN0IGJlIGJ5dGUgYXJyYXkgb3IgRUNQb2ludEZwIn19dmFyIG09QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobyk7cmV0dXJuIHRoaXMudmVyaWZ5UmF3KG0sbCxpLGspfTt0aGlzLnZlcmlmeVJhdz1mdW5jdGlvbihvLGksdyxtKXt2YXIgbD10aGlzLmVjcGFyYW1zLm47dmFyIHU9dGhpcy5lY3BhcmFtcy5HO2lmKGkuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKTwwfHxpLmNvbXBhcmVUbyhsKT49MCl7cmV0dXJuIGZhbHNlfWlmKHcuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKTwwfHx3LmNvbXBhcmVUbyhsKT49MCl7cmV0dXJuIGZhbHNlfXZhciBwPXcubW9kSW52ZXJzZShsKTt2YXIgaz1vLm11bHRpcGx5KHApLm1vZChsKTt2YXIgaj1pLm11bHRpcGx5KHApLm1vZChsKTt2YXIgcT11Lm11bHRpcGx5KGspLmFkZChtLm11bHRpcGx5KGopKTt2YXIgdD1xLmdldFgoKS50b0JpZ0ludGVnZXIoKS5tb2QobCk7cmV0dXJuIHQuZXF1YWxzKGkpfTt0aGlzLnNlcmlhbGl6ZVNpZz1mdW5jdGlvbihrLGope3ZhciBsPWsudG9CeXRlQXJyYXlTaWduZWQoKTt2YXIgaT1qLnRvQnl0ZUFycmF5U2lnbmVkKCk7dmFyIG09W107bS5wdXNoKDIpO20ucHVzaChsLmxlbmd0aCk7bT1tLmNvbmNhdChsKTttLnB1c2goMik7bS5wdXNoKGkubGVuZ3RoKTttPW0uY29uY2F0KGkpO20udW5zaGlmdChtLmxlbmd0aCk7bS51bnNoaWZ0KDQ4KTtyZXR1cm4gbX07dGhpcy5wYXJzZVNpZz1mdW5jdGlvbihuKXt2YXIgbTtpZihuWzBdIT00OCl7dGhyb3cgbmV3IEVycm9yKCJTaWduYXR1cmUgbm90IGEgdmFsaWQgREVSU2VxdWVuY2UiKX1tPTI7aWYoblttXSE9Mil7dGhyb3cgbmV3IEVycm9yKCJGaXJzdCBlbGVtZW50IGluIHNpZ25hdHVyZSBtdXN0IGJlIGEgREVSSW50ZWdlciIpfXZhciBsPW4uc2xpY2UobSsyLG0rMituW20rMV0pO20rPTIrblttKzFdO2lmKG5bbV0hPTIpe3Rocm93IG5ldyBFcnJvcigiU2Vjb25kIGVsZW1lbnQgaW4gc2lnbmF0dXJlIG11c3QgYmUgYSBERVJJbnRlZ2VyIil9dmFyIGk9bi5zbGljZShtKzIsbSsyK25bbSsxXSk7bSs9MituW20rMV07dmFyIGs9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobCk7dmFyIGo9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQoaSk7cmV0dXJue3I6ayxzOmp9fTt0aGlzLnBhcnNlU2lnQ29tcGFjdD1mdW5jdGlvbihtKXtpZihtLmxlbmd0aCE9PTY1KXt0aHJvdyJTaWduYXR1cmUgaGFzIHRoZSB3cm9uZyBsZW5ndGgifXZhciBqPW1bMF0tMjc7aWYoajwwfHxqPjcpe3Rocm93IkludmFsaWQgc2lnbmF0dXJlIHR5cGUifXZhciBvPXRoaXMuZWNwYXJhbXMubjt2YXIgbD1CaWdJbnRlZ2VyLmZyb21CeXRlQXJyYXlVbnNpZ25lZChtLnNsaWNlKDEsMzMpKS5tb2Qobyk7dmFyIGs9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobS5zbGljZSgzMyw2NSkpLm1vZChvKTtyZXR1cm57cjpsLHM6ayxpOmp9fTtpZihoIT09dW5kZWZpbmVkKXtpZihoLmN1cnZlIT09dW5kZWZpbmVkKXt0aGlzLmN1cnZlTmFtZT1oLmN1cnZlfX1pZih0aGlzLmN1cnZlTmFtZT09PXVuZGVmaW5lZCl7dGhpcy5jdXJ2ZU5hbWU9ZX10aGlzLnNldE5hbWVkQ3VydmUodGhpcy5jdXJ2ZU5hbWUpO2lmKGghPT11bmRlZmluZWQpe2lmKGgucHJ2IT09dW5kZWZpbmVkKXt0aGlzLnNldFByaXZhdGVLZXlIZXgoaC5wcnYpfWlmKGgucHViIT09dW5kZWZpbmVkKXt0aGlzLnNldFB1YmxpY0tleUhleChoLnB1Yil9fX07S0pVUi5jcnlwdG8uRUNEU0EucGFyc2VTaWdIZXg9ZnVuY3Rpb24oYSl7dmFyIGI9S0pVUi5jcnlwdG8uRUNEU0EucGFyc2VTaWdIZXhJbkhleFJTKGEpO3ZhciBkPW5ldyBCaWdJbnRlZ2VyKGIuciwxNik7dmFyIGM9bmV3IEJpZ0ludGVnZXIoYi5zLDE2KTtyZXR1cm57cjpkLHM6Y319O0tKVVIuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUz1mdW5jdGlvbihjKXtpZihjLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJzaWduYXR1cmUgaXMgbm90IGEgQVNOLjEgc2VxdWVuY2UifXZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGMsMCk7aWYoYi5sZW5ndGghPTIpe3Rocm93Im51bWJlciBvZiBzaWduYXR1cmUgQVNOLjEgc2VxdWVuY2UgZWxlbWVudHMgc2VlbSB3cm9uZyJ9dmFyIGc9YlswXTt2YXIgZj1iWzFdO2lmKGMuc3Vic3RyKGcsMikhPSIwMiIpe3Rocm93IjFzdCBpdGVtIG9mIHNlcXVlbmUgb2Ygc2lnbmF0dXJlIGlzIG5vdCBBU04uMSBpbnRlZ2VyIn1pZihjLnN1YnN0cihmLDIpIT0iMDIiKXt0aHJvdyIybmQgaXRlbSBvZiBzZXF1ZW5lIG9mIHNpZ25hdHVyZSBpcyBub3QgQVNOLjEgaW50ZWdlciJ9dmFyIGU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooYyxnKTt2YXIgZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihjLGYpO3JldHVybntyOmUsczpkfX07S0pVUi5jcnlwdG8uRUNEU0EuYXNuMVNpZ1RvQ29uY2F0U2lnPWZ1bmN0aW9uKGMpe3ZhciBkPUtKVVIuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUyhjKTt2YXIgYj1kLnI7dmFyIGE9ZC5zO2lmKGIuc3Vic3RyKDAsMik9PSIwMCImJigoKGIubGVuZ3RoLzIpKjgpJSgxNio4KSk9PTgpe2I9Yi5zdWJzdHIoMil9aWYoYS5zdWJzdHIoMCwyKT09IjAwIiYmKCgoYS5sZW5ndGgvMikqOCklKDE2KjgpKT09OCl7YT1hLnN1YnN0cigyKX1pZigoKChiLmxlbmd0aC8yKSo4KSUoMTYqOCkpIT0wKXt0aHJvdyJ1bmtub3duIEVDRFNBIHNpZyByIGxlbmd0aCBlcnJvciJ9aWYoKCgoYS5sZW5ndGgvMikqOCklKDE2KjgpKSE9MCl7dGhyb3cidW5rbm93biBFQ0RTQSBzaWcgcyBsZW5ndGggZXJyb3IifXJldHVybiBiK2F9O0tKVVIuY3J5cHRvLkVDRFNBLmNvbmNhdFNpZ1RvQVNOMVNpZz1mdW5jdGlvbihhKXtpZigoKChhLmxlbmd0aC8yKSo4KSUoMTYqOCkpIT0wKXt0aHJvdyJ1bmtub3duIEVDRFNBIGNvbmNhdGluYXRlZCByLXMgc2lnICBsZW5ndGggZXJyb3IifXZhciBjPWEuc3Vic3RyKDAsYS5sZW5ndGgvMik7dmFyIGI9YS5zdWJzdHIoYS5sZW5ndGgvMik7cmV0dXJuIEtKVVIuY3J5cHRvLkVDRFNBLmhleFJTU2lnVG9BU04xU2lnKGMsYil9O0tKVVIuY3J5cHRvLkVDRFNBLmhleFJTU2lnVG9BU04xU2lnPWZ1bmN0aW9uKGIsYSl7dmFyIGQ9bmV3IEJpZ0ludGVnZXIoYiwxNik7dmFyIGM9bmV3IEJpZ0ludGVnZXIoYSwxNik7cmV0dXJuIEtKVVIuY3J5cHRvLkVDRFNBLmJpUlNTaWdUb0FTTjFTaWcoZCxjKX07S0pVUi5jcnlwdG8uRUNEU0EuYmlSU1NpZ1RvQVNOMVNpZz1mdW5jdGlvbihlLGMpe3ZhciBiPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmV9KTt2YXIgYT1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpjfSk7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W2IsYV19KTtyZXR1cm4gZC5nZXRFbmNvZGVkSGV4KCl9OwovKiEgZWNwYXJhbS0xLjAuMC5qcyAoYykgMjAxMyBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5jcnlwdG89PSJ1bmRlZmluZWQifHwhS0pVUi5jcnlwdG8pe0tKVVIuY3J5cHRvPXt9fUtKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREI9bmV3IGZ1bmN0aW9uKCl7dmFyIGI9e307dmFyIGM9e307ZnVuY3Rpb24gYShkKXtyZXR1cm4gbmV3IEJpZ0ludGVnZXIoZCwxNil9dGhpcy5nZXRCeU5hbWU9ZnVuY3Rpb24oZSl7dmFyIGQ9ZTtpZih0eXBlb2YgY1tkXSE9InVuZGVmaW5lZCIpe2Q9Y1tlXX1pZih0eXBlb2YgYltkXSE9InVuZGVmaW5lZCIpe3JldHVybiBiW2RdfXRocm93InVucmVnaXN0ZXJlZCBFQyBjdXJ2ZSBuYW1lOiAiK2R9O3RoaXMucmVnaXN0PWZ1bmN0aW9uKEEsbCxvLGcsbSxlLGosZixrLHUsZCx4KXtiW0FdPXt9O3ZhciBzPWEobyk7dmFyIHo9YShnKTt2YXIgeT1hKG0pO3ZhciB0PWEoZSk7dmFyIHc9YShqKTt2YXIgcj1uZXcgRUNDdXJ2ZUZwKHMseix5KTt2YXIgcT1yLmRlY29kZVBvaW50SGV4KCIwNCIrZitrKTtiW0FdWyJuYW1lIl09QTtiW0FdWyJrZXlsZW4iXT1sO2JbQV1bImN1cnZlIl09cjtiW0FdWyJHIl09cTtiW0FdWyJuIl09dDtiW0FdWyJoIl09dztiW0FdWyJvaWQiXT1kO2JbQV1bImluZm8iXT14O2Zvcih2YXIgdj0wO3Y8dS5sZW5ndGg7disrKXtjW3Vbdl1dPUF9fX07S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AxMjhyMSIsMTI4LCJGRkZGRkZGREZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRiIsIkZGRkZGRkZERkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDIiwiRTg3NTc5QzExMDc5RjQzREQ4MjQ5OTNDMkNFRTVFRDMiLCJGRkZGRkZGRTAwMDAwMDAwNzVBMzBEMUI5MDM4QTExNSIsIjEiLCIxNjFGRjc1MjhCODk5QjJEMEMyODYwN0NBNTJDNUI4NiIsIkNGNUFDODM5NUJBRkVCMTNDMDJEQTI5MkRERUQ3QTgzIixbXSwiIiwic2VjcDEyOHIxIDogU0VDRyBjdXJ2ZSBvdmVyIGEgMTI4IGJpdCBwcmltZSBmaWVsZCIpO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMTYwazEiLDE2MCwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGQUM3MyIsIjAiLCI3IiwiMDEwMDAwMDAwMDAwMDAwMDAwMDAwMUI4RkExNkRGQUI5QUNBMTZCNkIzIiwiMSIsIjNCNEMzODJDRTM3QUExOTJBNDAxOUU3NjMwMzZGNEY1REQ0RDdFQkIiLCI5MzhDRjkzNTMxOEZEQ0VENkJDMjgyODY1MzE3MzNDM0YwM0M0RkVFIixbXSwiIiwic2VjcDE2MGsxIDogU0VDRyBjdXJ2ZSBvdmVyIGEgMTYwIGJpdCBwcmltZSBmaWVsZCIpO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMTYwcjEiLDE2MCwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY3RkZGRkZGRiIsIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGN0ZGRkZGRkMiLCIxQzk3QkVGQzU0QkQ3QThCNjVBQ0Y4OUY4MUQ0RDRBREM1NjVGQTQ1IiwiMDEwMDAwMDAwMDAwMDAwMDAwMDAwMUY0QzhGOTI3QUVEM0NBNzUyMjU3IiwiMSIsIjRBOTZCNTY4OEVGNTczMjg0NjY0Njk4OTY4QzM4QkI5MTNDQkZDODIiLCIyM0E2Mjg1NTMxNjg5NDdENTlEQ0M5MTIwNDIzNTEzNzdBQzVGQjMyIixbXSwiIiwic2VjcDE2MHIxIDogU0VDRyBjdXJ2ZSBvdmVyIGEgMTYwIGJpdCBwcmltZSBmaWVsZCIpO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMTkyazEiLDE5MiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZFRTM3IiwiMCIsIjMiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkUyNkYyRkMxNzBGNjk0NjZBNzRERUZEOEQiLCIxIiwiREI0RkYxMEVDMDU3RTlBRTI2QjA3RDAyODBCN0Y0MzQxREE1RDFCMUVBRTA2QzdEIiwiOUIyRjJGNkQ5QzU2MjhBNzg0NDE2M0QwMTVCRTg2MzQ0MDgyQUE4OEQ5NUUyRjlEIixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AxOTJyMSIsMTkyLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkYiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkMiLCI2NDIxMDUxOUU1OUM4MEU3MEZBN0U5QUI3MjI0MzA0OUZFQjhERUVDQzE0NkI5QjEiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY5OURFRjgzNjE0NkJDOUIxQjREMjI4MzEiLCIxIiwiMTg4REE4MEVCMDMwOTBGNjdDQkYyMEVCNDNBMTg4MDBGNEZGMEFGRDgyRkYxMDEyIiwiMDcxOTJCOTVGRkM4REE3ODYzMTAxMUVENkIyNENERDU3M0Y5NzdBMTFFNzk0ODExIixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AyMjRyMSIsMjI0LCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMSIsIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFIiwiQjQwNTBBODUwQzA0QjNBQkY1NDEzMjU2NTA0NEIwQjdEN0JGRDhCQTI3MEIzOTQzMjM1NUZGQjQiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGMTZBMkUwQjhGMDNFMTNERDI5NDU1QzVDMkEzRCIsIjEiLCJCNzBFMENCRDZCQjRCRjdGMzIxMzkwQjk0QTAzQzFEMzU2QzIxMTIyMzQzMjgwRDYxMTVDMUQyMSIsIkJEMzc2Mzg4QjVGNzIzRkI0QzIyREZFNkNENDM3NUEwNUEwNzQ3NjQ0NEQ1ODE5OTg1MDA3RTM0IixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AyNTZrMSIsMjU2LCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGQzJGIiwiMCIsIjciLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUJBQUVEQ0U2QUY0OEEwM0JCRkQyNUU4Q0QwMzY0MTQxIiwiMSIsIjc5QkU2NjdFRjlEQ0JCQUM1NUEwNjI5NUNFODcwQjA3MDI5QkZDREIyRENFMjhEOTU5RjI4MTVCMTZGODE3OTgiLCI0ODNBREE3NzI2QTNDNDY1NURBNEZCRkMwRTExMDhBOEZEMTdCNDQ4QTY4NTU0MTk5QzQ3RDA4RkZCMTBENEI4IixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AyNTZyMSIsMjU2LCJGRkZGRkZGRjAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGIiwiRkZGRkZGRkYwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQyIsIjVBQzYzNUQ4QUEzQTkzRTdCM0VCQkQ1NTc2OTg4NkJDNjUxRDA2QjBDQzUzQjBGNjNCQ0UzQzNFMjdEMjYwNEIiLCJGRkZGRkZGRjAwMDAwMDAwRkZGRkZGRkZGRkZGRkZGRkJDRTZGQUFEQTcxNzlFODRGM0I5Q0FDMkZDNjMyNTUxIiwiMSIsIjZCMTdEMUYyRTEyQzQyNDdGOEJDRTZFNTYzQTQ0MEYyNzcwMzdEODEyREVCMzNBMEY0QTEzOTQ1RDg5OEMyOTYiLCI0RkUzNDJFMkZFMUE3RjlCOEVFN0VCNEE3QzBGOUUxNjJCQ0UzMzU3NkIzMTVFQ0VDQkI2NDA2ODM3QkY1MUY1IixbIk5JU1QgUC0yNTYiLCJQLTI1NiIsInByaW1lMjU2djEiXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AzODRyMSIsMzg0LCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkYwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkYiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkYwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkMiLCJCMzMxMkZBN0UyM0VFN0U0OTg4RTA1NkJFM0Y4MkQxOTE4MUQ5QzZFRkU4MTQxMTIwMzE0MDg4RjUwMTM4NzVBQzY1NjM5OEQ4QTJFRDE5RDJBODVDOEVERDNFQzJBRUYiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDNzYzNEQ4MUY0MzcyRERGNTgxQTBEQjI0OEIwQTc3QUVDRUMxOTZBQ0NDNTI5NzMiLCIxIiwiQUE4N0NBMjJCRThCMDUzNzhFQjFDNzFFRjMyMEFENzQ2RTFEM0I2MjhCQTc5Qjk4NTlGNzQxRTA4MjU0MkEzODU1MDJGMjVEQkY1NTI5NkMzQTU0NUUzODcyNzYwQUI3IiwiMzYxN2RlNGE5NjI2MmM2ZjVkOWU5OGJmOTI5MmRjMjlmOGY0MWRiZDI4OWExNDdjZTlkYTMxMTNiNWYwYjhjMDBhNjBiMWNlMWQ3ZTgxOWQ3YTQzMWQ3YzkwZWEwZTVmIixbIk5JU1QgUC0zODQiLCJQLTM4NCJdKTtLSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdCgic2VjcDUyMXIxIiw1MjEsIjFGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGIiwiMUZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkMiLCIwNTE5NTNFQjk2MThFMUM5QTFGOTI5QTIxQTBCNjg1NDBFRUEyREE3MjVCOTlCMzE1RjNCOEI0ODk5MThFRjEwOUUxNTYxOTM5NTFFQzdFOTM3QjE2NTJDMEJEM0JCMUJGMDczNTczREY4ODNEMkMzNEYxRUY0NTFGRDQ2QjUwM0YwMCIsIjFGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkE1MTg2ODc4M0JGMkY5NjZCN0ZDQzAxNDhGNzA5QTVEMDNCQjVDOUI4ODk5QzQ3QUVCQjZGQjcxRTkxMzg2NDA5IiwiMSIsIkM2ODU4RTA2QjcwNDA0RTlDRDlFM0VDQjY2MjM5NUI0NDI5QzY0ODEzOTA1M0ZCNTIxRjgyOEFGNjA2QjREM0RCQUExNEI1RTc3RUZFNzU5MjhGRTFEQzEyN0EyRkZBOERFMzM0OEIzQzE4NTZBNDI5QkY5N0U3RTMxQzJFNUJENjYiLCIwMTE4MzkyOTZhNzg5YTNiYzAwNDVjOGE1ZmI0MmM3ZDFiZDk5OGY1NDQ0OTU3OWI0NDY4MTdhZmJkMTcyNzNlNjYyYzk3ZWU3Mjk5NWVmNDI2NDBjNTUwYjkwMTNmYWQwNzYxMzUzYzcwODZhMjcyYzI0MDg4YmU5NDc2OWZkMTY2NTAiLFsiTklTVCBQLTUyMSIsIlAtNTIxIl0pOwovKiEgZHNhLW1vZGlmaWVkLTEuMC4xLmpzIChjKSBSZWN1cml0eSBMYWJzIEdtYkgsIEtlbmppIFVydXNoaW1tYSB8IGdpdGh1Yi5jb20vb3BlbnBncGpzL29wZW5wZ3Bqcy9ibG9iL21hc3Rlci9MSUNFTlNFCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmNyeXB0bz09InVuZGVmaW5lZCJ8fCFLSlVSLmNyeXB0byl7S0pVUi5jcnlwdG89e319S0pVUi5jcnlwdG8uRFNBPWZ1bmN0aW9uKCl7dGhpcy5wPW51bGw7dGhpcy5xPW51bGw7dGhpcy5nPW51bGw7dGhpcy55PW51bGw7dGhpcy54PW51bGw7dGhpcy50eXBlPSJEU0EiO3RoaXMuc2V0UHJpdmF0ZT1mdW5jdGlvbih6LHcsdixBLHUpe3RoaXMuaXNQcml2YXRlPXRydWU7dGhpcy5wPXo7dGhpcy5xPXc7dGhpcy5nPXY7dGhpcy55PUE7dGhpcy54PXV9O3RoaXMuc2V0UHVibGljPWZ1bmN0aW9uKHcsdix1LHope3RoaXMuaXNQdWJsaWM9dHJ1ZTt0aGlzLnA9dzt0aGlzLnE9djt0aGlzLmc9dTt0aGlzLnk9ejt0aGlzLng9bnVsbH07dGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoPWZ1bmN0aW9uKHope3ZhciB2PXRoaXMucDt2YXIgdT10aGlzLnE7dmFyIEM9dGhpcy5nO3ZhciBEPXRoaXMueTt2YXIgRT10aGlzLng7dmFyIEE9ei5zdWJzdHIoMCx1LmJpdExlbmd0aCgpLzQpO3ZhciBCPW5ldyBCaWdJbnRlZ2VyKHosMTYpO3ZhciB3PW4oQmlnSW50ZWdlci5PTkUuYWRkKEJpZ0ludGVnZXIuT05FKSx1LnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKSk7dmFyIEc9KEMubW9kUG93KHcsdikpLm1vZCh1KTt2YXIgRj0ody5tb2RJbnZlcnNlKHUpLm11bHRpcGx5KEIuYWRkKEUubXVsdGlwbHkoRykpKSkubW9kKHUpO3ZhciBIPUtKVVIuYXNuMS5BU04xVXRpbC5qc29uVG9BU04xSEVYKHtzZXE6W3siaW50Ijp7YmlnaW50Okd9fSx7ImludCI6e2JpZ2ludDpGfX1dfSk7cmV0dXJuIEh9O3RoaXMudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoPWZ1bmN0aW9uKEMsQil7dmFyIHo9dGhpcy5wO3ZhciB1PXRoaXMucTt2YXIgRz10aGlzLmc7dmFyIEg9dGhpcy55O3ZhciBFPXRoaXMucGFyc2VBU04xU2lnbmF0dXJlKEIpO3ZhciBLPUVbMF07dmFyIEo9RVsxXTt2YXIgQz1DLnN1YnN0cigwLHUuYml0TGVuZ3RoKCkvNCk7dmFyIEQ9bmV3IEJpZ0ludGVnZXIoQywxNik7aWYoQmlnSW50ZWdlci5aRVJPLmNvbXBhcmVUbyhLKT4wfHxLLmNvbXBhcmVUbyh1KT4wfHxCaWdJbnRlZ2VyLlpFUk8uY29tcGFyZVRvKEopPjB8fEouY29tcGFyZVRvKHUpPjApe3Rocm93ImludmFsaWQgRFNBIHNpZ25hdHVyZSJ9dmFyIEk9Si5tb2RJbnZlcnNlKHUpO3ZhciBBPUQubXVsdGlwbHkoSSkubW9kKHUpO3ZhciB2PUsubXVsdGlwbHkoSSkubW9kKHUpO3ZhciBGPUcubW9kUG93KEEseikubXVsdGlwbHkoSC5tb2RQb3codix6KSkubW9kKHopLm1vZCh1KTtyZXR1cm4gRi5jb21wYXJlVG8oSyk9PTB9O3RoaXMucGFyc2VBU04xU2lnbmF0dXJlPWZ1bmN0aW9uKHUpe3RyeXt2YXIgeT1uZXcgQmlnSW50ZWdlcihBU04xSEVYLmdldFZieUxpc3QodSwwLFswXSwiMDIiKSwxNik7dmFyIHY9bmV3IEJpZ0ludGVnZXIoQVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMV0sIjAyIiksMTYpO3JldHVyblt5LHZdfWNhdGNoKHcpe3Rocm93Im1hbGZvcm1lZCBEU0Egc2lnbmF0dXJlIn19O2Z1bmN0aW9uIGQoRSx3LEIsdix1LEMpe3ZhciB6PUtKVVIuY3J5cHRvLlV0aWwuaGFzaFN0cmluZyh3LEUudG9Mb3dlckNhc2UoKSk7dmFyIHo9ei5zdWJzdHIoMCx1LmJpdExlbmd0aCgpLzQpO3ZhciBBPW5ldyBCaWdJbnRlZ2VyKHosMTYpO3ZhciB5PW4oQmlnSW50ZWdlci5PTkUuYWRkKEJpZ0ludGVnZXIuT05FKSx1LnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKSk7dmFyIEY9KEIubW9kUG93KHksdikpLm1vZCh1KTt2YXIgRD0oeS5tb2RJbnZlcnNlKHUpLm11bHRpcGx5KEEuYWRkKEMubXVsdGlwbHkoRikpKSkubW9kKHUpO3ZhciBHPW5ldyBBcnJheSgpO0dbMF09RjtHWzFdPUQ7cmV0dXJuIEd9ZnVuY3Rpb24gcih2KXt2YXIgdT1vcGVucGdwLmNvbmZpZy5jb25maWcucHJlZmVyX2hhc2hfYWxnb3JpdGhtO3N3aXRjaChNYXRoLnJvdW5kKHYuYml0TGVuZ3RoKCkvOCkpe2Nhc2UgMjA6aWYodSE9MiYmdT4xMSYmdSE9MTAmJnU8OCl7cmV0dXJuIDJ9cmV0dXJuIHU7Y2FzZSAyODppZih1PjExJiZ1PDgpe3JldHVybiAxMX1yZXR1cm4gdTtjYXNlIDMyOmlmKHU+MTAmJnU8OCl7cmV0dXJuIDh9cmV0dXJuIHU7ZGVmYXVsdDp1dGlsLnByaW50X2RlYnVnKCJEU0Egc2VsZWN0IGhhc2ggYWxnb3JpdGhtOiByZXR1cm5pbmcgbnVsbCBmb3IgYW4gdW5rbm93biBsZW5ndGggb2YgcSIpO3JldHVybiBudWxsfX10aGlzLnNlbGVjdF9oYXNoX2FsZ29yaXRobT1yO2Z1bmN0aW9uIG0oSSxLLEosQix6LHUsRixHKXt2YXIgQz1LSlVSLmNyeXB0by5VdGlsLmhhc2hTdHJpbmcoQixJLnRvTG93ZXJDYXNlKCkpO3ZhciBDPUMuc3Vic3RyKDAsdS5iaXRMZW5ndGgoKS80KTt2YXIgRD1uZXcgQmlnSW50ZWdlcihDLDE2KTtpZihCaWdJbnRlZ2VyLlpFUk8uY29tcGFyZVRvKEspPjB8fEsuY29tcGFyZVRvKHUpPjB8fEJpZ0ludGVnZXIuWkVSTy5jb21wYXJlVG8oSik+MHx8Si5jb21wYXJlVG8odSk+MCl7dXRpbC5wcmludF9lcnJvcigiaW52YWxpZCBEU0EgU2lnbmF0dXJlIik7cmV0dXJuIG51bGx9dmFyIEg9Si5tb2RJbnZlcnNlKHUpO3ZhciBBPUQubXVsdGlwbHkoSCkubW9kKHUpO3ZhciB2PUsubXVsdGlwbHkoSCkubW9kKHUpO3ZhciBFPUYubW9kUG93KEEseikubXVsdGlwbHkoRy5tb2RQb3codix6KSkubW9kKHopLm1vZCh1KTtyZXR1cm4gRS5jb21wYXJlVG8oSyk9PTB9ZnVuY3Rpb24gYSh6KXt2YXIgQT1uZXcgQmlnSW50ZWdlcih6LHByaW1lQ2VudGVyaWUpO3ZhciB5PWoocSw1MTIpO3ZhciB1PXQocCxxLHopO3ZhciB2O2Rve3Y9bmV3IEJpZ0ludGVnZXIocS5iaXRDb3VudCgpLHJhbmQpfXdoaWxlKHguY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTykhPTEmJnguY29tcGFyZVRvKHEpIT0tMSk7dmFyIHc9Zy5tb2RQb3coeCxwKTtyZXR1cm57eDp2LHE6QSxwOnksZzp1LHk6d319ZnVuY3Rpb24gaih5LHosdyl7aWYoeiU2NCE9MCl7cmV0dXJuIGZhbHNlfXZhciB1O3ZhciB2O2Rve3U9dyhiaXRjb3VudCx0cnVlKTt2PXUuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpO3U9dS5zdWJ0cmFjdCh2LnJlbWFpbmRlcih5KSl9d2hpbGUoIXUuaXNQcm9iYWJsZVByaW1lKHByaW1lQ2VudGVyaWUpfHx1LmJpdExlbmd0aCgpIT1sKTtyZXR1cm4gdX1mdW5jdGlvbiB0KEIseixBLHcpe3ZhciB1PUIuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpO3ZhciB5PXUuZGl2aWRlKHopO3ZhciB2O2Rve3Y9dyhBKX13aGlsZSh2LmNvbXBhcmVUbyh1KSE9LTEmJnYuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKSE9MSk7cmV0dXJuIHYubW9kUG93KHksQil9ZnVuY3Rpb24gbyh3LHksdSl7dmFyIHY7ZG97dj11KHksZmFsc2UpfXdoaWxlKHYuY29tcGFyZVRvKHcpIT0tMSYmdi5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKSE9MSk7cmV0dXJuIHZ9ZnVuY3Rpb24gaSh2LHcpe2s9byh2KTt2YXIgdT1nLm1vZFBvdyhrLHcpLm1vZCh2KTtyZXR1cm4gdX1mdW5jdGlvbiBoKEIsdyx5LHYseix1KXt2YXIgQT1CKHYpO3M9KHcubW9kSW52ZXJzZSh6KS5tdWx0aXBseShBLmFkZCh1Lm11bHRpcGx5KHkpKSkpLm1vZCh6KTtyZXR1cm4gc310aGlzLnNpZ249ZDt0aGlzLnZlcmlmeT1tO2Z1bmN0aW9uIG4odyx1KXtpZih1LmNvbXBhcmVUbyh3KTw9MCl7cmV0dXJufXZhciB2PXUuc3VidHJhY3Qodyk7dmFyIHk9ZSh2LmJpdExlbmd0aCgpKTt3aGlsZSh5PnYpe3k9ZSh2LmJpdExlbmd0aCgpKX1yZXR1cm4gdy5hZGQoeSl9ZnVuY3Rpb24gZSh3KXtpZih3PDApe3JldHVybiBudWxsfXZhciB1PU1hdGguZmxvb3IoKHcrNykvOCk7dmFyIHY9Yyh1KTtpZih3JTg+MCl7dj1TdHJpbmcuZnJvbUNoYXJDb2RlKChNYXRoLnBvdygyLHclOCktMSkmdi5jaGFyQ29kZUF0KDApKSt2LnN1YnN0cmluZygxKX1yZXR1cm4gbmV3IEJpZ0ludGVnZXIoZih2KSwxNil9ZnVuY3Rpb24gYyh3KXt2YXIgdT0iIjtmb3IodmFyIHY9MDt2PHc7disrKXt1Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKGIoKSl9cmV0dXJuIHV9ZnVuY3Rpb24gYigpe3ZhciB1PW5ldyBVaW50MzJBcnJheSgxKTt3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyh1KTtyZXR1cm4gdVswXSYyNTV9ZnVuY3Rpb24gZih5KXtpZih5PT1udWxsKXtyZXR1cm4iIn12YXIgdj1bXTt2YXIgdz15Lmxlbmd0aDt2YXIgej0wO3ZhciB1O3doaWxlKHo8dyl7dT15W3orK10uY2hhckNvZGVBdCgpLnRvU3RyaW5nKDE2KTt3aGlsZSh1Lmxlbmd0aDwyKXt1PSIwIit1fXYucHVzaCgiIit1KX1yZXR1cm4gdi5qb2luKCIiKX10aGlzLmdldFJhbmRvbUJpZ0ludGVnZXJJblJhbmdlPW47dGhpcy5nZXRSYW5kb21CaWdJbnRlZ2VyPWU7dGhpcy5nZXRSYW5kb21CeXRlcz1jfTsKLyohIHBrY3M1cGtleS0xLjAuNi5qcyAoYykgMjAxMy0yMDE0IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwp2YXIgUEtDUzVQS0VZPWZ1bmN0aW9uKCl7dmFyIGM9ZnVuY3Rpb24obixwLG8pe3JldHVybiBpKENyeXB0b0pTLkFFUyxuLHAsbyl9O3ZhciBkPWZ1bmN0aW9uKG4scCxvKXtyZXR1cm4gaShDcnlwdG9KUy5UcmlwbGVERVMsbixwLG8pfTt2YXIgaT1mdW5jdGlvbihxLHYscyxvKXt2YXIgcD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHYpO3ZhciB1PUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uocyk7dmFyIG49Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShvKTt2YXIgcj17fTtyLmtleT11O3IuaXY9bjtyLmNpcGhlcnRleHQ9cDt2YXIgdD1xLmRlY3J5cHQocix1LHtpdjpufSk7cmV0dXJuIENyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KHQpfTt2YXIgaj1mdW5jdGlvbihuLHAsbyl7cmV0dXJuIGUoQ3J5cHRvSlMuQUVTLG4scCxvKX07dmFyIG09ZnVuY3Rpb24obixwLG8pe3JldHVybiBlKENyeXB0b0pTLlRyaXBsZURFUyxuLHAsbyl9O3ZhciBlPWZ1bmN0aW9uKHMseCx2LHApe3ZhciByPUNyeXB0b0pTLmVuYy5IZXgucGFyc2UoeCk7dmFyIHc9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh2KTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHApO3ZhciBuPXt9O3ZhciB1PXMuZW5jcnlwdChyLHcse2l2Om99KTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHUudG9TdHJpbmcoKSk7dmFyIHQ9Q3J5cHRvSlMuZW5jLkJhc2U2NC5zdHJpbmdpZnkocSk7cmV0dXJuIHR9O3ZhciBnPXsiQUVTLTI1Ni1DQkMiOntwcm9jOmMsZXByb2M6aixrZXlsZW46MzIsaXZsZW46MTZ9LCJBRVMtMTkyLUNCQyI6e3Byb2M6YyxlcHJvYzpqLGtleWxlbjoyNCxpdmxlbjoxNn0sIkFFUy0xMjgtQ0JDIjp7cHJvYzpjLGVwcm9jOmosa2V5bGVuOjE2LGl2bGVuOjE2fSwiREVTLUVERTMtQ0JDIjp7cHJvYzpkLGVwcm9jOm0sa2V5bGVuOjI0LGl2bGVuOjh9fTt2YXIgYj1mdW5jdGlvbihuKXtyZXR1cm4gZ1tuXVsicHJvYyJdfTt2YXIgaz1mdW5jdGlvbihuKXt2YXIgcD1DcnlwdG9KUy5saWIuV29yZEFycmF5LnJhbmRvbShuKTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShwKTtyZXR1cm4gb307dmFyIGw9ZnVuY3Rpb24ocSl7dmFyIHI9e307aWYocS5tYXRjaChuZXcgUmVnRXhwKCJERUstSW5mbzogKFteLF0rKSwoWzAtOUEtRmEtZl0rKSIsIm0iKSkpe3IuY2lwaGVyPVJlZ0V4cC4kMTtyLml2c2FsdD1SZWdFeHAuJDJ9aWYocS5tYXRjaChuZXcgUmVnRXhwKCItLS0tLUJFR0lOIChbQS1aXSspIFBSSVZBVEUgS0VZLS0tLS0iKSkpe3IudHlwZT1SZWdFeHAuJDF9dmFyIHA9LTE7dmFyIHQ9MDtpZihxLmluZGV4T2YoIlxyXG5cclxuIikhPS0xKXtwPXEuaW5kZXhPZigiXHJcblxyXG4iKTt0PTJ9aWYocS5pbmRleE9mKCJcblxuIikhPS0xKXtwPXEuaW5kZXhPZigiXG5cbiIpO3Q9MX12YXIgbz1xLmluZGV4T2YoIi0tLS0tRU5EIik7aWYocCE9LTEmJm8hPS0xKXt2YXIgbj1xLnN1YnN0cmluZyhwK3QqMixvLXQpO249bi5yZXBsYWNlKC9ccysvZywiIik7ci5kYXRhPW59cmV0dXJuIHJ9O3ZhciBoPWZ1bmN0aW9uKG8sdyxuKXt2YXIgdD1uLnN1YnN0cmluZygwLDE2KTt2YXIgcj1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHQpO3ZhciBwPUNyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKHcpO3ZhciBzPWdbb11bImtleWxlbiJdK2dbb11bIml2bGVuIl07dmFyIHY9IiI7dmFyIHU9bnVsbDtmb3IoOzspe3ZhciBxPUNyeXB0b0pTLmFsZ28uTUQ1LmNyZWF0ZSgpO2lmKHUhPW51bGwpe3EudXBkYXRlKHUpfXEudXBkYXRlKHApO3EudXBkYXRlKHIpO3U9cS5maW5hbGl6ZSgpO3Y9ditDcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeSh1KTtpZih2Lmxlbmd0aD49cyoyKXticmVha319dmFyIHg9e307eC5rZXloZXg9di5zdWJzdHIoMCxnW29dWyJrZXlsZW4iXSoyKTt4Lml2aGV4PXYuc3Vic3RyKGdbb11bImtleWxlbiJdKjIsZ1tvXVsiaXZsZW4iXSoyKTtyZXR1cm4geH07dmFyIGE9ZnVuY3Rpb24obix0LHAsdSl7dmFyIHE9Q3J5cHRvSlMuZW5jLkJhc2U2NC5wYXJzZShuKTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShxKTt2YXIgcz1nW3RdWyJwcm9jIl07dmFyIHI9cyhvLHAsdSk7cmV0dXJuIHJ9O3ZhciBmPWZ1bmN0aW9uKG4scSxvLHMpe3ZhciBwPWdbcV1bImVwcm9jIl07dmFyIHI9cChuLG8scyk7cmV0dXJuIHJ9O3JldHVybnt2ZXJzaW9uOiIxLjAuNSIsZ2V0SGV4RnJvbVBFTTpmdW5jdGlvbihvLHIpe3ZhciBwPW87aWYocC5pbmRleE9mKCJCRUdJTiAiK3IpPT0tMSl7dGhyb3ciY2FuJ3QgZmluZCBQRU0gaGVhZGVyOiAiK3J9cD1wLnJlcGxhY2UoIi0tLS0tQkVHSU4gIityKyItLS0tLSIsIiIpO3A9cC5yZXBsYWNlKCItLS0tLUVORCAiK3IrIi0tLS0tIiwiIik7dmFyIHE9cC5yZXBsYWNlKC9ccysvZywiIik7dmFyIG49YjY0dG9oZXgocSk7cmV0dXJuIG59LGdldERlY3J5cHRlZEtleUhleEJ5S2V5SVY6ZnVuY3Rpb24obyxyLHEscCl7dmFyIG49YihyKTtyZXR1cm4gbihvLHEscCl9LHBhcnNlUEtDUzVQRU06ZnVuY3Rpb24obil7cmV0dXJuIGwobil9LGdldEtleUFuZFVudXNlZEl2QnlQYXNzY29kZUFuZEl2c2FsdDpmdW5jdGlvbihvLG4scCl7cmV0dXJuIGgobyxuLHApfSxkZWNyeXB0S2V5QjY0OmZ1bmN0aW9uKG4scCxvLHEpe3JldHVybiBhKG4scCxvLHEpfSxnZXREZWNyeXB0ZWRLZXlIZXg6ZnVuY3Rpb24odyx2KXt2YXIgbz1sKHcpO3ZhciByPW8udHlwZTt2YXIgcD1vLmNpcGhlcjt2YXIgbj1vLml2c2FsdDt2YXIgcT1vLmRhdGE7dmFyIHU9aChwLHYsbik7dmFyIHQ9dS5rZXloZXg7dmFyIHM9YShxLHAsdCxuKTtyZXR1cm4gc30sZ2V0UlNBS2V5RnJvbUVuY3J5cHRlZFBLQ1M1UEVNOmZ1bmN0aW9uKHAsbyl7dmFyIHE9dGhpcy5nZXREZWNyeXB0ZWRLZXlIZXgocCxvKTt2YXIgbj1uZXcgUlNBS2V5KCk7bi5yZWFkUHJpdmF0ZUtleUZyb21BU04xSGV4U3RyaW5nKHEpO3JldHVybiBufSxnZXRFcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4OmZ1bmN0aW9uKHEseCxyLHApe3ZhciBuPSIiO2lmKHR5cGVvZiByPT0idW5kZWZpbmVkInx8cj09bnVsbCl7cj0iQUVTLTI1Ni1DQkMifWlmKHR5cGVvZiBnW3JdPT0idW5kZWZpbmVkIil7dGhyb3ciUEtDUzVQS0VZIHVuc3VwcG9ydGVkIGFsZ29yaXRobTogIityfWlmKHR5cGVvZiBwPT0idW5kZWZpbmVkInx8cD09bnVsbCl7dmFyIHQ9Z1tyXVsiaXZsZW4iXTt2YXIgcz1rKHQpO3A9cy50b1VwcGVyQ2FzZSgpfXZhciB3PWgocix4LHApO3ZhciB2PXcua2V5aGV4O3ZhciB1PWYocSxyLHYscCk7dmFyIG89dS5yZXBsYWNlKC8oLns2NH0pL2csIiQxXHJcbiIpO3ZhciBuPSItLS0tLUJFR0lOIFJTQSBQUklWQVRFIEtFWS0tLS0tXHJcbiI7bis9IlByb2MtVHlwZTogNCxFTkNSWVBURURcclxuIjtuKz0iREVLLUluZm86ICIrcisiLCIrcCsiXHJcbiI7bis9IlxyXG4iO24rPW87bis9IlxyXG4tLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLVxyXG4iO3JldHVybiBufSxnZXRFcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5OmZ1bmN0aW9uKEMsRCxvLHMpe3ZhciBBPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6MH0pO3ZhciB2PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkMubn0pO3ZhciB6PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6Qy5lfSk7dmFyIEI9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5kfSk7dmFyIHQ9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5wfSk7dmFyIHI9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5xfSk7dmFyIHk9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5kbXAxfSk7dmFyIHU9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5kbXExfSk7dmFyIHg9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5jb2VmZn0pO3ZhciBFPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OltBLHYseixCLHQscix5LHUseF19KTt2YXIgdz1FLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5nZXRFcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KHcsRCxvLHMpfSxuZXdFbmNyeXB0ZWRQS0NTNVBFTTpmdW5jdGlvbihuLG8scixzKXtpZih0eXBlb2Ygbz09InVuZGVmaW5lZCJ8fG89PW51bGwpe289MTAyNH1pZih0eXBlb2Ygcj09InVuZGVmaW5lZCJ8fHI9PW51bGwpe3I9IjEwMDAxIn12YXIgcD1uZXcgUlNBS2V5KCk7cC5nZW5lcmF0ZShvLHIpO3ZhciBxPW51bGw7aWYodHlwZW9mIHM9PSJ1bmRlZmluZWQifHxzPT1udWxsKXtxPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHBrZXksbil9ZWxzZXtxPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHBrZXksbixzKX1yZXR1cm4gcX0sZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhQRU06ZnVuY3Rpb24ocCl7aWYocC5tYXRjaCgvRU5DUllQVEVELykpe3Rocm93InBlbSBzaGFsbCBiZSBub3QgRU5DUllQVEVEIn12YXIgbz10aGlzLmdldEhleEZyb21QRU0ocCwiUFJJVkFURSBLRVkiKTt2YXIgbj10aGlzLmdldFJTQUtleUZyb21QbGFpblBLQ1M4SGV4KG8pO3JldHVybiBufSxnZXRSU0FLZXlGcm9tUGxhaW5QS0NTOEhleDpmdW5jdGlvbihxKXt2YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihxLDApO2lmKHAubGVuZ3RoIT0zKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDMgZWxlbWVudHM6ICIrcC5sZW5ndGh9dmFyIG89QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihxLHBbMV0pO2lmKG8hPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZGVudGlmaWVyIGlzIG5vdCByc2FFbmM6ICIrb312YXIgbz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKHEscFsxXSk7dmFyIHI9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihxLHBbMl0pO3ZhciBzPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHIsMCk7dmFyIG49bmV3IFJTQUtleSgpO24ucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhzKTtyZXR1cm4gbn0scGFyc2VIZXhPZkVuY3J5cHRlZFBLQ1M4OmZ1bmN0aW9uKHUpe3ZhciBxPXt9O3ZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHUsMCk7aWYocC5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDApLml0ZW1zICE9IDI6ICIrcC5sZW5ndGh9cS5jaXBoZXJ0ZXh0PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHUscFsxXSk7dmFyIHc9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSxwWzBdKTtpZih3Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wKS5pdGVtcyAhPSAyOiAiK3cubGVuZ3RofWlmKEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHUsd1swXSkhPSIyYTg2NDg4NmY3MGQwMTA1MGQiKXt0aHJvdyJ0aGlzIG9ubHkgc3VwcG9ydHMgcGtjczVQQkVTMiJ9dmFyIG49QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSx3WzFdKTtpZih3Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEpLml0ZW1zICE9IDI6ICIrbi5sZW5ndGh9dmFyIG89QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSxuWzFdKTtpZihvLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEuMSkuaXRlbXMgIT0gMjogIitvLmxlbmd0aH1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaih1LG9bMF0pIT0iMmE4NjQ4ODZmNzBkMDMwNyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBUcmlwbGVERVMifXEuZW5jcnlwdGlvblNjaGVtZUFsZz0iVHJpcGxlREVTIjtxLmVuY3J5cHRpb25TY2hlbWVJVj1BU04xSEVYLmdldEhleE9mVl9BdE9iaih1LG9bMV0pO3ZhciByPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHUsblswXSk7aWYoci5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjApLml0ZW1zICE9IDI6ICIrci5sZW5ndGh9aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodSxyWzBdKSE9IjJhODY0ODg2ZjcwZDAxMDUwYyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBwa2NzNVBCS0RGMiJ9dmFyIHY9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSxyWzFdKTtpZih2Lmxlbmd0aDwyKXt0aHJvdyJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMS4wLjEpLml0ZW1zIDwgMjogIit2Lmxlbmd0aH1xLnBia2RmMlNhbHQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodSx2WzBdKTt2YXIgcz1BU04xSEVYLmdldEhleE9mVl9BdE9iaih1LHZbMV0pO3RyeXtxLnBia2RmMkl0ZXI9cGFyc2VJbnQocywxNil9Y2F0Y2godCl7dGhyb3cibWFsZm9ybWVkIGZvcm1hdCBwYmtkZjJJdGVyOiAiK3N9cmV0dXJuIHF9LGdldFBCS0RGMktleUhleEZyb21QYXJhbTpmdW5jdGlvbihzLG4pe3ZhciByPUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uocy5wYmtkZjJTYWx0KTt2YXIgbz1zLnBia2RmMkl0ZXI7dmFyIHE9Q3J5cHRvSlMuUEJLREYyKG4scix7a2V5U2l6ZToxOTIvMzIsaXRlcmF0aW9uczpvfSk7dmFyIHA9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocSk7cmV0dXJuIHB9LGdldFBsYWluUEtDUzhIZXhGcm9tRW5jcnlwdGVkUEtDUzhQRU06ZnVuY3Rpb24odix3KXt2YXIgcD10aGlzLmdldEhleEZyb21QRU0odiwiRU5DUllQVEVEIFBSSVZBVEUgS0VZIik7dmFyIG49dGhpcy5wYXJzZUhleE9mRW5jcnlwdGVkUEtDUzgocCk7dmFyIHM9UEtDUzVQS0VZLmdldFBCS0RGMktleUhleEZyb21QYXJhbShuLHcpO3ZhciB0PXt9O3QuY2lwaGVydGV4dD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKG4uY2lwaGVydGV4dCk7dmFyIHI9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShzKTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKG4uZW5jcnlwdGlvblNjaGVtZUlWKTt2YXIgdT1DcnlwdG9KUy5UcmlwbGVERVMuZGVjcnlwdCh0LHIse2l2OnF9KTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeSh1KTtyZXR1cm4gb30sZ2V0UlNBS2V5RnJvbUVuY3J5cHRlZFBLQ1M4UEVNOmZ1bmN0aW9uKHEscCl7dmFyIG89dGhpcy5nZXRQbGFpblBLQ1M4SGV4RnJvbUVuY3J5cHRlZFBLQ1M4UEVNKHEscCk7dmFyIG49dGhpcy5nZXRSU0FLZXlGcm9tUGxhaW5QS0NTOEhleChvKTtyZXR1cm4gbn0sZ2V0S2V5RnJvbUVuY3J5cHRlZFBLQ1M4UEVNOmZ1bmN0aW9uKHEsbyl7dmFyIG49dGhpcy5nZXRQbGFpblBLQ1M4SGV4RnJvbUVuY3J5cHRlZFBLQ1M4UEVNKHEsbyk7dmFyIHA9dGhpcy5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXgobik7cmV0dXJuIHB9LHBhcnNlUGxhaW5Qcml2YXRlUEtDUzhIZXg6ZnVuY3Rpb24ocSl7dmFyIG89e307by5hbGdwYXJhbT1udWxsO2lmKHEuc3Vic3RyKDAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBwbGFpbiBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwMSkifXZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEsMCk7aWYocC5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBwbGFpbiBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwMikifWlmKHEuc3Vic3RyKHBbMV0sMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwMykifXZhciBuPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEscFsxXSk7aWYobi5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwNCkifWlmKHEuc3Vic3RyKG5bMF0sMikhPSIwNiIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwNSkifW8uYWxnb2lkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEsblswXSk7aWYocS5zdWJzdHIoblsxXSwyKT09IjA2Iil7by5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLG5bMV0pfWlmKHEuc3Vic3RyKHBbMl0sMikhPSIwNCIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwNikifW8ua2V5aWR4PUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmoocSxwWzJdKTtyZXR1cm4gb30sZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4UEVNOmZ1bmN0aW9uKG8pe3ZhciBuPXRoaXMuZ2V0SGV4RnJvbVBFTShvLCJQUklWQVRFIEtFWSIpO3ZhciBwPXRoaXMuZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4KG4pO3JldHVybiBwfSxnZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXg6ZnVuY3Rpb24obil7dmFyIHA9dGhpcy5wYXJzZVBsYWluUHJpdmF0ZVBLQ1M4SGV4KG4pO2lmKHAuYWxnb2lkPT0iMmE4NjQ4ODZmNzBkMDEwMTAxIil7dGhpcy5wYXJzZVByaXZhdGVSYXdSU0FLZXlIZXhBdE9iaihuLHApO3ZhciBvPXAua2V5O3ZhciBxPW5ldyBSU0FLZXkoKTtxLnNldFByaXZhdGVFeChvLm4sby5lLG8uZCxvLnAsby5xLG8uZHAsby5kcSxvLmNvKTtyZXR1cm4gcX1lbHNle2lmKHAuYWxnb2lkPT0iMmE4NjQ4Y2UzZDAyMDEiKXt0aGlzLnBhcnNlUHJpdmF0ZVJhd0VDS2V5SGV4QXRPYmoobixwKTtpZihLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWVbcC5hbGdwYXJhbV09PT11bmRlZmluZWQpe3Rocm93IktKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZSB1bmRlZmluZWQ6ICIrcC5hbGdwYXJhbX12YXIgcj1LSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWVbcC5hbGdwYXJhbV07dmFyIHE9bmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtjdXJ2ZTpyLHBydjpwLmtleX0pO3JldHVybiBxfWVsc2V7dGhyb3cidW5zdXBwb3J0ZWQgcHJpdmF0ZSBrZXkgYWxnb3JpdGhtIn19fSxnZXRSU0FLZXlGcm9tUHVibGljUEtDUzhQRU06ZnVuY3Rpb24obyl7dmFyIHA9dGhpcy5nZXRIZXhGcm9tUEVNKG8sIlBVQkxJQyBLRVkiKTt2YXIgbj10aGlzLmdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleChwKTtyZXR1cm4gbn0sZ2V0S2V5RnJvbVB1YmxpY1BLQ1M4UEVNOmZ1bmN0aW9uKG8pe3ZhciBwPXRoaXMuZ2V0SGV4RnJvbVBFTShvLCJQVUJMSUMgS0VZIik7dmFyIG49dGhpcy5nZXRLZXlGcm9tUHVibGljUEtDUzhIZXgocCk7cmV0dXJuIG59LGdldEtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbihvKXt2YXIgbj10aGlzLnBhcnNlUHVibGljUEtDUzhIZXgobyk7aWYobi5hbGdvaWQ9PSIyYTg2NDg4NmY3MGQwMTAxMDEiKXt2YXIgcj10aGlzLnBhcnNlUHVibGljUmF3UlNBS2V5SGV4KG4ua2V5KTt2YXIgcD1uZXcgUlNBS2V5KCk7cC5zZXRQdWJsaWMoci5uLHIuZSk7cmV0dXJuIHB9ZWxzZXtpZihuLmFsZ29pZD09IjJhODY0OGNlM2QwMjAxIil7aWYoS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW24uYWxncGFyYW1dPT09dW5kZWZpbmVkKXt0aHJvdyJLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWUgdW5kZWZpbmVkOiAiK24uYWxncGFyYW19dmFyIHE9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW24uYWxncGFyYW1dO3ZhciBwPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6cSxwdWI6bi5rZXl9KTtyZXR1cm4gcH1lbHNle3Rocm93InVuc3VwcG9ydGVkIHB1YmxpYyBrZXkgYWxnb3JpdGhtIn19fSxwYXJzZVB1YmxpY1Jhd1JTQUtleUhleDpmdW5jdGlvbihwKXt2YXIgbj17fTtpZihwLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwMSkifXZhciBvPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHAsMCk7aWYoby5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDAyKSJ9aWYocC5zdWJzdHIob1swXSwyKSE9IjAyIil7dGhyb3cibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDMpIn1uLm49QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocCxvWzBdKTtpZihwLnN1YnN0cihvWzFdLDIpIT0iMDIiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwNCkifW4uZT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihwLG9bMV0pO3JldHVybiBufSxwYXJzZVByaXZhdGVSYXdSU0FLZXlIZXhBdE9iajpmdW5jdGlvbihvLHEpe3ZhciBwPXEua2V5aWR4O2lmKG8uc3Vic3RyKHAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBSU0EgcHJpdmF0ZSBrZXkoY29kZTowMDEpIn12YXIgbj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihvLHApO2lmKG4ubGVuZ3RoIT05KXt0aHJvdyJtYWxmb3JtZWQgUlNBIHByaXZhdGUga2V5KGNvZGU6MDAyKSJ9cS5rZXk9e307cS5rZXkubj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bMV0pO3Eua2V5LmU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzJdKTtxLmtleS5kPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sblszXSk7cS5rZXkucD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bNF0pO3Eua2V5LnE9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzVdKTtxLmtleS5kcD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bNl0pO3Eua2V5LmRxPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sbls3XSk7cS5rZXkuY289QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzhdKX0scGFyc2VQcml2YXRlUmF3RUNLZXlIZXhBdE9iajpmdW5jdGlvbihvLHEpe3ZhciBwPXEua2V5aWR4O2lmKG8uc3Vic3RyKHAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBFQ0MgcHJpdmF0ZSBrZXkoY29kZTowMDEpIn12YXIgbj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihvLHApO2lmKG4ubGVuZ3RoIT0zKXt0aHJvdyJtYWxmb3JtZWQgRUNDIHByaXZhdGUga2V5KGNvZGU6MDAyKSJ9aWYoby5zdWJzdHIoblsxXSwyKSE9IjA0Iil7dGhyb3cibWFsZm9ybWVkIEVDQyBwcml2YXRlIGtleShjb2RlOjAwMykifXEua2V5PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sblsxXSl9LHBhcnNlUHVibGljUEtDUzhIZXg6ZnVuY3Rpb24ocSl7dmFyIG89e307by5hbGdwYXJhbT1udWxsO3ZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEsMCk7aWYocC5sZW5ndGghPTIpe3Rocm93Im91dGVyIERFUlNlcXVlbmNlIHNoYWxsIGhhdmUgMiBlbGVtZW50czogIitwLmxlbmd0aH12YXIgcj1wWzBdO2lmKHEuc3Vic3RyKHIsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAxKSJ9dmFyIG49QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoocSxyKTtpZihuLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDIpIn1pZihxLnN1YnN0cihuWzBdLDIpIT0iMDYiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwMykifW8uYWxnb2lkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEsblswXSk7aWYocS5zdWJzdHIoblsxXSwyKT09IjA2Iil7by5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLG5bMV0pfWlmKHEuc3Vic3RyKHBbMV0sMikhPSIwMyIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDA0KSJ9by5rZXk9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzFdKS5zdWJzdHIoMik7cmV0dXJuIG99LGdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbihyKXt2YXIgcT1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihyLDApO2lmKHEubGVuZ3RoIT0yKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrcS5sZW5ndGh9dmFyIHA9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihyLHFbMF0pO2lmKHAhPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZCBpcyBub3QgcnNhRW5jcnlwdGlvbiJ9aWYoci5zdWJzdHIocVsxXSwyKSE9IjAzIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgQklUU1RSSU5HIGVuY2Fwc2xhdGVkLiJ9dmFyIHQ9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihyLHFbMV0pKzI7aWYoci5zdWJzdHIodCwyKSE9IjMwIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgU0VRVUVOQ0UuIn12YXIgbj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihyLHQpO2lmKG4ubGVuZ3RoIT0yKXt0aHJvdyJpbm5lciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrbi5sZW5ndGh9aWYoci5zdWJzdHIoblswXSwyKSE9IjAyIil7dGhyb3ciTiBpcyBub3QgQVNOLjEgSU5URUdFUiJ9aWYoci5zdWJzdHIoblsxXSwyKSE9IjAyIil7dGhyb3ciRSBpcyBub3QgQVNOLjEgSU5URUdFUiJ9dmFyIHU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocixuWzBdKTt2YXIgcz1BU04xSEVYLmdldEhleE9mVl9BdE9iaihyLG5bMV0pO3ZhciBvPW5ldyBSU0FLZXkoKTtvLnNldFB1YmxpYyh1LHMpO3JldHVybiBvfSx9fSgpOwovKiEga2V5dXRpbC0xLjAuMTIuanMgKGMpIDIwMTMtMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KdmFyIEtFWVVUSUw9ZnVuY3Rpb24oKXt2YXIgZD1mdW5jdGlvbihwLHIscSl7cmV0dXJuIGsoQ3J5cHRvSlMuQUVTLHAscixxKX07dmFyIGU9ZnVuY3Rpb24ocCxyLHEpe3JldHVybiBrKENyeXB0b0pTLlRyaXBsZURFUyxwLHIscSl9O3ZhciBhPWZ1bmN0aW9uKHAscixxKXtyZXR1cm4gayhDcnlwdG9KUy5ERVMscCxyLHEpfTt2YXIgaz1mdW5jdGlvbihzLHgsdSxxKXt2YXIgcj1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHgpO3ZhciB3PUNyeXB0b0pTLmVuYy5IZXgucGFyc2UodSk7dmFyIHA9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShxKTt2YXIgdD17fTt0LmtleT13O3QuaXY9cDt0LmNpcGhlcnRleHQ9cjt2YXIgdj1zLmRlY3J5cHQodCx3LHtpdjpwfSk7cmV0dXJuIENyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KHYpfTt2YXIgbD1mdW5jdGlvbihwLHIscSl7cmV0dXJuIGcoQ3J5cHRvSlMuQUVTLHAscixxKX07dmFyIG89ZnVuY3Rpb24ocCxyLHEpe3JldHVybiBnKENyeXB0b0pTLlRyaXBsZURFUyxwLHIscSl9O3ZhciBmPWZ1bmN0aW9uKHAscixxKXtyZXR1cm4gZyhDcnlwdG9KUy5ERVMscCxyLHEpfTt2YXIgZz1mdW5jdGlvbih0LHksdixxKXt2YXIgcz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHkpO3ZhciB4PUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uodik7dmFyIHA9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShxKTt2YXIgdz10LmVuY3J5cHQocyx4LHtpdjpwfSk7dmFyIHI9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh3LnRvU3RyaW5nKCkpO3ZhciB1PUNyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KHIpO3JldHVybiB1fTt2YXIgaT17IkFFUy0yNTYtQ0JDIjp7cHJvYzpkLGVwcm9jOmwsa2V5bGVuOjMyLGl2bGVuOjE2fSwiQUVTLTE5Mi1DQkMiOntwcm9jOmQsZXByb2M6bCxrZXlsZW46MjQsaXZsZW46MTZ9LCJBRVMtMTI4LUNCQyI6e3Byb2M6ZCxlcHJvYzpsLGtleWxlbjoxNixpdmxlbjoxNn0sIkRFUy1FREUzLUNCQyI6e3Byb2M6ZSxlcHJvYzpvLGtleWxlbjoyNCxpdmxlbjo4fSwiREVTLUNCQyI6e3Byb2M6YSxlcHJvYzpmLGtleWxlbjo4LGl2bGVuOjh9fTt2YXIgYz1mdW5jdGlvbihwKXtyZXR1cm4gaVtwXVsicHJvYyJdfTt2YXIgbT1mdW5jdGlvbihwKXt2YXIgcj1DcnlwdG9KUy5saWIuV29yZEFycmF5LnJhbmRvbShwKTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShyKTtyZXR1cm4gcX07dmFyIG49ZnVuY3Rpb24odCl7dmFyIHU9e307aWYodC5tYXRjaChuZXcgUmVnRXhwKCJERUstSW5mbzogKFteLF0rKSwoWzAtOUEtRmEtZl0rKSIsIm0iKSkpe3UuY2lwaGVyPVJlZ0V4cC4kMTt1Lml2c2FsdD1SZWdFeHAuJDJ9aWYodC5tYXRjaChuZXcgUmVnRXhwKCItLS0tLUJFR0lOIChbQS1aXSspIFBSSVZBVEUgS0VZLS0tLS0iKSkpe3UudHlwZT1SZWdFeHAuJDF9dmFyIHI9LTE7dmFyIHY9MDtpZih0LmluZGV4T2YoIlxyXG5cclxuIikhPS0xKXtyPXQuaW5kZXhPZigiXHJcblxyXG4iKTt2PTJ9aWYodC5pbmRleE9mKCJcblxuIikhPS0xKXtyPXQuaW5kZXhPZigiXG5cbiIpO3Y9MX12YXIgcT10LmluZGV4T2YoIi0tLS0tRU5EIik7aWYociE9LTEmJnEhPS0xKXt2YXIgcD10LnN1YnN0cmluZyhyK3YqMixxLXYpO3A9cC5yZXBsYWNlKC9ccysvZywiIik7dS5kYXRhPXB9cmV0dXJuIHV9O3ZhciBqPWZ1bmN0aW9uKHEseSxwKXt2YXIgdj1wLnN1YnN0cmluZygwLDE2KTt2YXIgdD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHYpO3ZhciByPUNyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKHkpO3ZhciB1PWlbcV1bImtleWxlbiJdK2lbcV1bIml2bGVuIl07dmFyIHg9IiI7dmFyIHc9bnVsbDtmb3IoOzspe3ZhciBzPUNyeXB0b0pTLmFsZ28uTUQ1LmNyZWF0ZSgpO2lmKHchPW51bGwpe3MudXBkYXRlKHcpfXMudXBkYXRlKHIpO3MudXBkYXRlKHQpO3c9cy5maW5hbGl6ZSgpO3g9eCtDcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeSh3KTtpZih4Lmxlbmd0aD49dSoyKXticmVha319dmFyIHo9e307ei5rZXloZXg9eC5zdWJzdHIoMCxpW3FdWyJrZXlsZW4iXSoyKTt6Lml2aGV4PXguc3Vic3RyKGlbcV1bImtleWxlbiJdKjIsaVtxXVsiaXZsZW4iXSoyKTtyZXR1cm4gen07dmFyIGI9ZnVuY3Rpb24ocCx2LHIsdyl7dmFyIHM9Q3J5cHRvSlMuZW5jLkJhc2U2NC5wYXJzZShwKTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShzKTt2YXIgdT1pW3ZdWyJwcm9jIl07dmFyIHQ9dShxLHIsdyk7cmV0dXJuIHR9O3ZhciBoPWZ1bmN0aW9uKHAscyxxLHUpe3ZhciByPWlbc11bImVwcm9jIl07dmFyIHQ9cihwLHEsdSk7cmV0dXJuIHR9O3JldHVybnt2ZXJzaW9uOiIxLjAuMCIsZ2V0SGV4RnJvbVBFTTpmdW5jdGlvbihxLHUpe3ZhciByPXE7aWYoci5pbmRleE9mKCItLS0tLUJFR0lOICIpPT0tMSl7dGhyb3ciY2FuJ3QgZmluZCBQRU0gaGVhZGVyOiAiK3V9aWYodHlwZW9mIHU9PSJzdHJpbmciJiZ1IT0iIil7cj1yLnJlcGxhY2UoIi0tLS0tQkVHSU4gIit1KyItLS0tLSIsIiIpO3I9ci5yZXBsYWNlKCItLS0tLUVORCAiK3UrIi0tLS0tIiwiIil9ZWxzZXtyPXIucmVwbGFjZSgvLS0tLS1CRUdJTiBbXi1dKy0tLS0tLywiIik7cj1yLnJlcGxhY2UoLy0tLS0tRU5EIFteLV0rLS0tLS0vLCIiKX12YXIgdD1yLnJlcGxhY2UoL1xzKy9nLCIiKTt2YXIgcD1iNjR0b2hleCh0KTtyZXR1cm4gcH0sZ2V0RGVjcnlwdGVkS2V5SGV4QnlLZXlJVjpmdW5jdGlvbihxLHQscyxyKXt2YXIgcD1jKHQpO3JldHVybiBwKHEscyxyKX0scGFyc2VQS0NTNVBFTTpmdW5jdGlvbihwKXtyZXR1cm4gbihwKX0sZ2V0S2V5QW5kVW51c2VkSXZCeVBhc3Njb2RlQW5kSXZzYWx0OmZ1bmN0aW9uKHEscCxyKXtyZXR1cm4gaihxLHAscil9LGRlY3J5cHRLZXlCNjQ6ZnVuY3Rpb24ocCxyLHEscyl7cmV0dXJuIGIocCxyLHEscyl9LGdldERlY3J5cHRlZEtleUhleDpmdW5jdGlvbih5LHgpe3ZhciBxPW4oeSk7dmFyIHQ9cS50eXBlO3ZhciByPXEuY2lwaGVyO3ZhciBwPXEuaXZzYWx0O3ZhciBzPXEuZGF0YTt2YXIgdz1qKHIseCxwKTt2YXIgdj13LmtleWhleDt2YXIgdT1iKHMscix2LHApO3JldHVybiB1fSxnZXRSU0FLZXlGcm9tRW5jcnlwdGVkUEtDUzVQRU06ZnVuY3Rpb24ocixxKXt2YXIgcz10aGlzLmdldERlY3J5cHRlZEtleUhleChyLHEpO3ZhciBwPW5ldyBSU0FLZXkoKTtwLnJlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmcocyk7cmV0dXJuIHB9LGdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVBydktleUhleDpmdW5jdGlvbih4LHMsQSx0LHIpe3ZhciBwPSIiO2lmKHR5cGVvZiB0PT0idW5kZWZpbmVkInx8dD09bnVsbCl7dD0iQUVTLTI1Ni1DQkMifWlmKHR5cGVvZiBpW3RdPT0idW5kZWZpbmVkIil7dGhyb3ciS0VZVVRJTCB1bnN1cHBvcnRlZCBhbGdvcml0aG06ICIrdH1pZih0eXBlb2Ygcj09InVuZGVmaW5lZCJ8fHI9PW51bGwpe3ZhciB2PWlbdF1bIml2bGVuIl07dmFyIHU9bSh2KTtyPXUudG9VcHBlckNhc2UoKX12YXIgej1qKHQsQSxyKTt2YXIgeT16LmtleWhleDt2YXIgdz1oKHMsdCx5LHIpO3ZhciBxPXcucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTt2YXIgcD0iLS0tLS1CRUdJTiAiK3grIiBQUklWQVRFIEtFWS0tLS0tXHJcbiI7cCs9IlByb2MtVHlwZTogNCxFTkNSWVBURURcclxuIjtwKz0iREVLLUluZm86ICIrdCsiLCIrcisiXHJcbiI7cCs9IlxyXG4iO3ArPXE7cCs9IlxyXG4tLS0tLUVORCAiK3grIiBQUklWQVRFIEtFWS0tLS0tXHJcbiI7cmV0dXJuIHB9LGdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVJTQUtleTpmdW5jdGlvbihELEUscix0KXt2YXIgQj1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOjB9KTt2YXIgdz1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpELm59KTt2YXIgQT1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOkQuZX0pO3ZhciBDPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuZH0pO3ZhciB1PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQucH0pO3ZhciBzPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQucX0pO3ZhciB6PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuZG1wMX0pO3ZhciB2PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuZG1xMX0pO3ZhciB5PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuY29lZmZ9KTt2YXIgRj1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbQix3LEEsQyx1LHMseix2LHldfSk7dmFyIHg9Ri5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KCJSU0EiLHgsRSxyLHQpfSxuZXdFbmNyeXB0ZWRQS0NTNVBFTTpmdW5jdGlvbihwLHEsdCx1KXtpZih0eXBlb2YgcT09InVuZGVmaW5lZCJ8fHE9PW51bGwpe3E9MTAyNH1pZih0eXBlb2YgdD09InVuZGVmaW5lZCJ8fHQ9PW51bGwpe3Q9IjEwMDAxIn12YXIgcj1uZXcgUlNBS2V5KCk7ci5nZW5lcmF0ZShxLHQpO3ZhciBzPW51bGw7aWYodHlwZW9mIHU9PSJ1bmRlZmluZWQifHx1PT1udWxsKXtzPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHIscCl9ZWxzZXtzPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHIscCx1KX1yZXR1cm4gc30sZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhQRU06ZnVuY3Rpb24ocil7aWYoci5tYXRjaCgvRU5DUllQVEVELykpe3Rocm93InBlbSBzaGFsbCBiZSBub3QgRU5DUllQVEVEIn12YXIgcT10aGlzLmdldEhleEZyb21QRU0ociwiUFJJVkFURSBLRVkiKTt2YXIgcD10aGlzLmdldFJTQUtleUZyb21QbGFpblBLQ1M4SGV4KHEpO3JldHVybiBwfSxnZXRSU0FLZXlGcm9tUGxhaW5QS0NTOEhleDpmdW5jdGlvbihzKXt2YXIgcj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLDApO2lmKHIubGVuZ3RoIT0zKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDMgZWxlbWVudHM6ICIrci5sZW5ndGh9dmFyIHE9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihzLHJbMV0pO2lmKHEhPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZGVudGlmaWVyIGlzIG5vdCByc2FFbmM6ICIrcX12YXIgcT1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKHMsclsxXSk7dmFyIHQ9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihzLHJbMl0pO3ZhciB1PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHQsMCk7dmFyIHA9bmV3IFJTQUtleSgpO3AucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyh1KTtyZXR1cm4gcH0scGFyc2VIZXhPZkVuY3J5cHRlZFBLQ1M4OmZ1bmN0aW9uKHcpe3ZhciBzPXt9O3ZhciByPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHcsMCk7aWYoci5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDApLml0ZW1zICE9IDI6ICIrci5sZW5ndGh9cy5jaXBoZXJ0ZXh0PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHcsclsxXSk7dmFyIHk9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyxyWzBdKTtpZih5Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wKS5pdGVtcyAhPSAyOiAiK3kubGVuZ3RofWlmKEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHcseVswXSkhPSIyYTg2NDg4NmY3MGQwMTA1MGQiKXt0aHJvdyJ0aGlzIG9ubHkgc3VwcG9ydHMgcGtjczVQQkVTMiJ9dmFyIHA9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyx5WzFdKTtpZih5Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEpLml0ZW1zICE9IDI6ICIrcC5sZW5ndGh9dmFyIHE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyxwWzFdKTtpZihxLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEuMSkuaXRlbXMgIT0gMjogIitxLmxlbmd0aH1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaih3LHFbMF0pIT0iMmE4NjQ4ODZmNzBkMDMwNyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBUcmlwbGVERVMifXMuZW5jcnlwdGlvblNjaGVtZUFsZz0iVHJpcGxlREVTIjtzLmVuY3J5cHRpb25TY2hlbWVJVj1BU04xSEVYLmdldEhleE9mVl9BdE9iaih3LHFbMV0pO3ZhciB0PUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHcscFswXSk7aWYodC5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjApLml0ZW1zICE9IDI6ICIrdC5sZW5ndGh9aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodyx0WzBdKSE9IjJhODY0ODg2ZjcwZDAxMDUwYyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBwa2NzNVBCS0RGMiJ9dmFyIHg9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyx0WzFdKTtpZih4Lmxlbmd0aDwyKXt0aHJvdyJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMS4wLjEpLml0ZW1zIDwgMjogIit4Lmxlbmd0aH1zLnBia2RmMlNhbHQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodyx4WzBdKTt2YXIgdT1BU04xSEVYLmdldEhleE9mVl9BdE9iaih3LHhbMV0pO3RyeXtzLnBia2RmMkl0ZXI9cGFyc2VJbnQodSwxNil9Y2F0Y2godil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdCBwYmtkZjJJdGVyOiAiK3V9cmV0dXJuIHN9LGdldFBCS0RGMktleUhleEZyb21QYXJhbTpmdW5jdGlvbih1LHApe3ZhciB0PUNyeXB0b0pTLmVuYy5IZXgucGFyc2UodS5wYmtkZjJTYWx0KTt2YXIgcT11LnBia2RmMkl0ZXI7dmFyIHM9Q3J5cHRvSlMuUEJLREYyKHAsdCx7a2V5U2l6ZToxOTIvMzIsaXRlcmF0aW9uczpxfSk7dmFyIHI9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocyk7cmV0dXJuIHJ9LGdldFBsYWluUEtDUzhIZXhGcm9tRW5jcnlwdGVkUEtDUzhQRU06ZnVuY3Rpb24oeCx5KXt2YXIgcj10aGlzLmdldEhleEZyb21QRU0oeCwiRU5DUllQVEVEIFBSSVZBVEUgS0VZIik7dmFyIHA9dGhpcy5wYXJzZUhleE9mRW5jcnlwdGVkUEtDUzgocik7dmFyIHU9S0VZVVRJTC5nZXRQQktERjJLZXlIZXhGcm9tUGFyYW0ocCx5KTt2YXIgdj17fTt2LmNpcGhlcnRleHQ9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShwLmNpcGhlcnRleHQpO3ZhciB0PUNyeXB0b0pTLmVuYy5IZXgucGFyc2UodSk7dmFyIHM9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShwLmVuY3J5cHRpb25TY2hlbWVJVik7dmFyIHc9Q3J5cHRvSlMuVHJpcGxlREVTLmRlY3J5cHQodix0LHtpdjpzfSk7dmFyIHE9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkodyk7cmV0dXJuIHF9LGdldFJTQUtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTTpmdW5jdGlvbihzLHIpe3ZhciBxPXRoaXMuZ2V0UGxhaW5QS0NTOEhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTShzLHIpO3ZhciBwPXRoaXMuZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhIZXgocSk7cmV0dXJuIHB9LGdldEtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTTpmdW5jdGlvbihzLHEpe3ZhciBwPXRoaXMuZ2V0UGxhaW5QS0NTOEhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTShzLHEpO3ZhciByPXRoaXMuZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4KHApO3JldHVybiByfSxwYXJzZVBsYWluUHJpdmF0ZVBLQ1M4SGV4OmZ1bmN0aW9uKHMpe3ZhciBxPXt9O3EuYWxncGFyYW09bnVsbDtpZihzLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgcGxhaW4gUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDEpIn12YXIgcj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLDApO2lmKHIubGVuZ3RoIT0zKXt0aHJvdyJtYWxmb3JtZWQgcGxhaW4gUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDIpIn1pZihzLnN1YnN0cihyWzFdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDMpIn12YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLHJbMV0pO2lmKHAubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDQpIn1pZihzLnN1YnN0cihwWzBdLDIpIT0iMDYiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDUpIn1xLmFsZ29pZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihzLHBbMF0pO2lmKHMuc3Vic3RyKHBbMV0sMik9PSIwNiIpe3EuYWxncGFyYW09QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocyxwWzFdKX1pZihzLnN1YnN0cihyWzJdLDIpIT0iMDQiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDYpIn1xLmtleWlkeD1BU04xSEVYLmdldFN0YXJ0UG9zT2ZWX0F0T2JqKHMsclsyXSk7cmV0dXJuIHF9LGdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOFBFTTpmdW5jdGlvbihxKXt2YXIgcD10aGlzLmdldEhleEZyb21QRU0ocSwiUFJJVkFURSBLRVkiKTt2YXIgcj10aGlzLmdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOEhleChwKTtyZXR1cm4gcn0sZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4OmZ1bmN0aW9uKHApe3ZhciB3PXRoaXMucGFyc2VQbGFpblByaXZhdGVQS0NTOEhleChwKTtpZih3LmFsZ29pZD09IjJhODY0ODg2ZjcwZDAxMDEwMSIpe3RoaXMucGFyc2VQcml2YXRlUmF3UlNBS2V5SGV4QXRPYmoocCx3KTt2YXIgdT13LmtleTt2YXIgej1uZXcgUlNBS2V5KCk7ei5zZXRQcml2YXRlRXgodS5uLHUuZSx1LmQsdS5wLHUucSx1LmRwLHUuZHEsdS5jbyk7cmV0dXJuIHp9ZWxzZXtpZih3LmFsZ29pZD09IjJhODY0OGNlM2QwMjAxIil7dGhpcy5wYXJzZVByaXZhdGVSYXdFQ0tleUhleEF0T2JqKHAsdyk7aWYoS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3cuYWxncGFyYW1dPT09dW5kZWZpbmVkKXt0aHJvdyJLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWUgdW5kZWZpbmVkOiAiK3cuYWxncGFyYW19dmFyIHY9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3cuYWxncGFyYW1dO3ZhciB6PW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6dn0pO3ouc2V0UHVibGljS2V5SGV4KHcucHVia2V5KTt6LnNldFByaXZhdGVLZXlIZXgody5rZXkpO3ouaXNQdWJsaWM9ZmFsc2U7cmV0dXJuIHp9ZWxzZXtpZih3LmFsZ29pZD09IjJhODY0OGNlMzgwNDAxIil7dmFyIHQ9QVNOMUhFWC5nZXRWYnlMaXN0KHAsMCxbMSwxLDBdLCIwMiIpO3ZhciBzPUFTTjFIRVguZ2V0VmJ5TGlzdChwLDAsWzEsMSwxXSwiMDIiKTt2YXIgeT1BU04xSEVYLmdldFZieUxpc3QocCwwLFsxLDEsMl0sIjAyIik7dmFyIEI9QVNOMUhFWC5nZXRWYnlMaXN0KHAsMCxbMiwwXSwiMDIiKTt2YXIgcj1uZXcgQmlnSW50ZWdlcih0LDE2KTt2YXIgcT1uZXcgQmlnSW50ZWdlcihzLDE2KTt2YXIgeD1uZXcgQmlnSW50ZWdlcih5LDE2KTt2YXIgQT1uZXcgQmlnSW50ZWdlcihCLDE2KTt2YXIgej1uZXcgS0pVUi5jcnlwdG8uRFNBKCk7ei5zZXRQcml2YXRlKHIscSx4LG51bGwsQSk7cmV0dXJuIHp9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBwcml2YXRlIGtleSBhbGdvcml0aG0ifX19fSxnZXRSU0FLZXlGcm9tUHVibGljUEtDUzhQRU06ZnVuY3Rpb24ocSl7dmFyIHI9dGhpcy5nZXRIZXhGcm9tUEVNKHEsIlBVQkxJQyBLRVkiKTt2YXIgcD10aGlzLmdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleChyKTtyZXR1cm4gcH0sZ2V0S2V5RnJvbVB1YmxpY1BLQ1M4UEVNOmZ1bmN0aW9uKHEpe3ZhciByPXRoaXMuZ2V0SGV4RnJvbVBFTShxLCJQVUJMSUMgS0VZIik7dmFyIHA9dGhpcy5nZXRLZXlGcm9tUHVibGljUEtDUzhIZXgocik7cmV0dXJuIHB9LGdldEtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbihxKXt2YXIgcD10aGlzLnBhcnNlUHVibGljUEtDUzhIZXgocSk7aWYocC5hbGdvaWQ9PSIyYTg2NDg4NmY3MGQwMTAxMDEiKXt2YXIgdT10aGlzLnBhcnNlUHVibGljUmF3UlNBS2V5SGV4KHAua2V5KTt2YXIgcj1uZXcgUlNBS2V5KCk7ci5zZXRQdWJsaWModS5uLHUuZSk7cmV0dXJuIHJ9ZWxzZXtpZihwLmFsZ29pZD09IjJhODY0OGNlM2QwMjAxIil7aWYoS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3AuYWxncGFyYW1dPT09dW5kZWZpbmVkKXt0aHJvdyJLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWUgdW5kZWZpbmVkOiAiK3AuYWxncGFyYW19dmFyIHM9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3AuYWxncGFyYW1dO3ZhciByPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6cyxwdWI6cC5rZXl9KTtyZXR1cm4gcn1lbHNle2lmKHAuYWxnb2lkPT0iMmE4NjQ4Y2UzODA0MDEiKXt2YXIgdD1wLmFsZ3BhcmFtO3ZhciB2PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHAua2V5LDApO3ZhciByPW5ldyBLSlVSLmNyeXB0by5EU0EoKTtyLnNldFB1YmxpYyhuZXcgQmlnSW50ZWdlcih0LnAsMTYpLG5ldyBCaWdJbnRlZ2VyKHQucSwxNiksbmV3IEJpZ0ludGVnZXIodC5nLDE2KSxuZXcgQmlnSW50ZWdlcih2LDE2KSk7cmV0dXJuIHJ9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBwdWJsaWMga2V5IGFsZ29yaXRobSJ9fX19LHBhcnNlUHVibGljUmF3UlNBS2V5SGV4OmZ1bmN0aW9uKHIpe3ZhciBwPXt9O2lmKHIuc3Vic3RyKDAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDAxKSJ9dmFyIHE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoociwwKTtpZihxLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDIpIn1pZihyLnN1YnN0cihxWzBdLDIpIT0iMDIiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwMykifXAubj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihyLHFbMF0pO2lmKHIuc3Vic3RyKHFbMV0sMikhPSIwMiIpe3Rocm93Im1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDA0KSJ9cC5lPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHIscVsxXSk7cmV0dXJuIHB9LHBhcnNlUHJpdmF0ZVJhd1JTQUtleUhleEF0T2JqOmZ1bmN0aW9uKHEscyl7dmFyIHI9cy5rZXlpZHg7aWYocS5zdWJzdHIociwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFJTQSBwcml2YXRlIGtleShjb2RlOjAwMSkifXZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEscik7aWYocC5sZW5ndGghPTkpe3Rocm93Im1hbGZvcm1lZCBSU0EgcHJpdmF0ZSBrZXkoY29kZTowMDIpIn1zLmtleT17fTtzLmtleS5uPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFsxXSk7cy5rZXkuZT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbMl0pO3Mua2V5LmQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzNdKTtzLmtleS5wPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFs0XSk7cy5rZXkucT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbNV0pO3Mua2V5LmRwPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFs2XSk7cy5rZXkuZHE9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzddKTtzLmtleS5jbz1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbOF0pfSxwYXJzZVByaXZhdGVSYXdFQ0tleUhleEF0T2JqOmZ1bmN0aW9uKHAsdCl7dmFyIHE9dC5rZXlpZHg7dmFyIHI9QVNOMUhFWC5nZXRWYnlMaXN0KHAscSxbMV0sIjA0Iik7dmFyIHM9QVNOMUhFWC5nZXRWYnlMaXN0KHAscSxbMiwwXSwiMDMiKS5zdWJzdHIoMik7dC5rZXk9cjt0LnB1YmtleT1zfSxwYXJzZVB1YmxpY1BLQ1M4SGV4OmZ1bmN0aW9uKHMpe3ZhciBxPXt9O3EuYWxncGFyYW09bnVsbDt2YXIgcj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLDApO2lmKHIubGVuZ3RoIT0yKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrci5sZW5ndGh9dmFyIHQ9clswXTtpZihzLnN1YnN0cih0LDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwMSkifXZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHMsdCk7aWYocC5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAyKSJ9aWYocy5zdWJzdHIocFswXSwyKSE9IjA2Iil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDMpIn1xLmFsZ29pZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihzLHBbMF0pO2lmKHMuc3Vic3RyKHBbMV0sMik9PSIwNiIpe3EuYWxncGFyYW09QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocyxwWzFdKX1lbHNle2lmKHMuc3Vic3RyKHBbMV0sMik9PSIzMCIpe3EuYWxncGFyYW09e307cS5hbGdwYXJhbS5wPUFTTjFIRVguZ2V0VmJ5TGlzdChzLHBbMV0sWzBdLCIwMiIpO3EuYWxncGFyYW0ucT1BU04xSEVYLmdldFZieUxpc3QocyxwWzFdLFsxXSwiMDIiKTtxLmFsZ3BhcmFtLmc9QVNOMUhFWC5nZXRWYnlMaXN0KHMscFsxXSxbMl0sIjAyIil9fWlmKHMuc3Vic3RyKHJbMV0sMikhPSIwMyIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDA0KSJ9cS5rZXk9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocyxyWzFdKS5zdWJzdHIoMik7cmV0dXJuIHF9LGdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbih0KXt2YXIgcz1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaih0LDApO2lmKHMubGVuZ3RoIT0yKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrcy5sZW5ndGh9dmFyIHI9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaih0LHNbMF0pO2lmKHIhPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZCBpcyBub3QgcnNhRW5jcnlwdGlvbiJ9aWYodC5zdWJzdHIoc1sxXSwyKSE9IjAzIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgQklUU1RSSU5HIGVuY2Fwc2xhdGVkLiJ9dmFyIHY9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaih0LHNbMV0pKzI7aWYodC5zdWJzdHIodiwyKSE9IjMwIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgU0VRVUVOQ0UuIn12YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaih0LHYpO2lmKHAubGVuZ3RoIT0yKXt0aHJvdyJpbm5lciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrcC5sZW5ndGh9aWYodC5zdWJzdHIocFswXSwyKSE9IjAyIil7dGhyb3ciTiBpcyBub3QgQVNOLjEgSU5URUdFUiJ9aWYodC5zdWJzdHIocFsxXSwyKSE9IjAyIil7dGhyb3ciRSBpcyBub3QgQVNOLjEgSU5URUdFUiJ9dmFyIHc9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodCxwWzBdKTt2YXIgdT1BU04xSEVYLmdldEhleE9mVl9BdE9iaih0LHBbMV0pO3ZhciBxPW5ldyBSU0FLZXkoKTtxLnNldFB1YmxpYyh3LHUpO3JldHVybiBxfSx9fSgpO0tFWVVUSUwuZ2V0S2V5PWZ1bmN0aW9uKGYsZSxoKXtpZih0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmZiBpbnN0YW5jZW9mIFJTQUtleSl7cmV0dXJuIGZ9aWYodHlwZW9mIEtKVVIuY3J5cHRvLkVDRFNBIT0idW5kZWZpbmVkIiYmZiBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBKXtyZXR1cm4gZn1pZih0eXBlb2YgS0pVUi5jcnlwdG8uRFNBIT0idW5kZWZpbmVkIiYmZiBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkRTQSl7cmV0dXJuIGZ9aWYoZi5jdXJ2ZSE9PXVuZGVmaW5lZCYmZi54eSE9PXVuZGVmaW5lZCYmZi5kPT09dW5kZWZpbmVkKXtyZXR1cm4gbmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtwdWI6Zi54eSxjdXJ2ZTpmLmN1cnZlfSl9aWYoZi5jdXJ2ZSE9PXVuZGVmaW5lZCYmZi5kIT09dW5kZWZpbmVkKXtyZXR1cm4gbmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtwcnY6Zi5kLGN1cnZlOmYuY3VydmV9KX1pZihmLmt0eT09PXVuZGVmaW5lZCYmZi5uIT09dW5kZWZpbmVkJiZmLmUhPT11bmRlZmluZWQmJmYuZD09PXVuZGVmaW5lZCl7dmFyIHc9bmV3IFJTQUtleSgpO3cuc2V0UHVibGljKGYubixmLmUpO3JldHVybiB3fWlmKGYua3R5PT09dW5kZWZpbmVkJiZmLm4hPT11bmRlZmluZWQmJmYuZSE9PXVuZGVmaW5lZCYmZi5kIT09dW5kZWZpbmVkJiZmLnAhPT11bmRlZmluZWQmJmYucSE9PXVuZGVmaW5lZCYmZi5kcCE9PXVuZGVmaW5lZCYmZi5kcSE9PXVuZGVmaW5lZCYmZi5jbyE9PXVuZGVmaW5lZCYmZi5xaT09PXVuZGVmaW5lZCl7dmFyIHc9bmV3IFJTQUtleSgpO3cuc2V0UHJpdmF0ZUV4KGYubixmLmUsZi5kLGYucCxmLnEsZi5kcCxmLmRxLGYuY28pO3JldHVybiB3fWlmKGYua3R5PT09dW5kZWZpbmVkJiZmLm4hPT11bmRlZmluZWQmJmYuZSE9PXVuZGVmaW5lZCYmZi5kIT09dW5kZWZpbmVkJiZmLnA9PT11bmRlZmluZWQpe3ZhciB3PW5ldyBSU0FLZXkoKTt3LnNldFByaXZhdGUoZi5uLGYuZSxmLmQpO3JldHVybiB3fWlmKGYucCE9PXVuZGVmaW5lZCYmZi5xIT09dW5kZWZpbmVkJiZmLmchPT11bmRlZmluZWQmJmYueSE9PXVuZGVmaW5lZCYmZi54PT09dW5kZWZpbmVkKXt2YXIgdz1uZXcgS0pVUi5jcnlwdG8uRFNBKCk7dy5zZXRQdWJsaWMoZi5wLGYucSxmLmcsZi55KTtyZXR1cm4gd31pZihmLnAhPT11bmRlZmluZWQmJmYucSE9PXVuZGVmaW5lZCYmZi5nIT09dW5kZWZpbmVkJiZmLnkhPT11bmRlZmluZWQmJmYueCE9PXVuZGVmaW5lZCl7dmFyIHc9bmV3IEtKVVIuY3J5cHRvLkRTQSgpO3cuc2V0UHJpdmF0ZShmLnAsZi5xLGYuZyxmLnksZi54KTtyZXR1cm4gd31pZihmLmt0eT09PSJSU0EiJiZmLm4hPT11bmRlZmluZWQmJmYuZSE9PXVuZGVmaW5lZCYmZi5kPT09dW5kZWZpbmVkKXt2YXIgdz1uZXcgUlNBS2V5KCk7dy5zZXRQdWJsaWMoYjY0dXRvaGV4KGYubiksYjY0dXRvaGV4KGYuZSkpO3JldHVybiB3fWlmKGYua3R5PT09IlJTQSImJmYubiE9PXVuZGVmaW5lZCYmZi5lIT09dW5kZWZpbmVkJiZmLmQhPT11bmRlZmluZWQmJmYucCE9PXVuZGVmaW5lZCYmZi5xIT09dW5kZWZpbmVkJiZmLmRwIT09dW5kZWZpbmVkJiZmLmRxIT09dW5kZWZpbmVkJiZmLnFpIT09dW5kZWZpbmVkKXt2YXIgdz1uZXcgUlNBS2V5KCk7dy5zZXRQcml2YXRlRXgoYjY0dXRvaGV4KGYubiksYjY0dXRvaGV4KGYuZSksYjY0dXRvaGV4KGYuZCksYjY0dXRvaGV4KGYucCksYjY0dXRvaGV4KGYucSksYjY0dXRvaGV4KGYuZHApLGI2NHV0b2hleChmLmRxKSxiNjR1dG9oZXgoZi5xaSkpO3JldHVybiB3fWlmKGYua3R5PT09IlJTQSImJmYubiE9PXVuZGVmaW5lZCYmZi5lIT09dW5kZWZpbmVkJiZmLmQhPT11bmRlZmluZWQpe3ZhciB3PW5ldyBSU0FLZXkoKTt3LnNldFByaXZhdGUoYjY0dXRvaGV4KGYubiksYjY0dXRvaGV4KGYuZSksYjY0dXRvaGV4KGYuZCkpO3JldHVybiB3fWlmKGYua3R5PT09IkVDIiYmZi5jcnYhPT11bmRlZmluZWQmJmYueCE9PXVuZGVmaW5lZCYmZi55IT09dW5kZWZpbmVkJiZmLmQ9PT11bmRlZmluZWQpe3ZhciBkPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6Zi5jcnZ9KTt2YXIgbD1kLmVjcGFyYW1zLmtleWxlbi80O3ZhciByPSgiMDAwMDAwMDAwMCIrYjY0dXRvaGV4KGYueCkpLnNsaWNlKC1sKTt2YXIgbj0oIjAwMDAwMDAwMDAiK2I2NHV0b2hleChmLnkpKS5zbGljZSgtbCk7dmFyIG09IjA0IityK247ZC5zZXRQdWJsaWNLZXlIZXgobSk7cmV0dXJuIGR9aWYoZi5rdHk9PT0iRUMiJiZmLmNydiE9PXVuZGVmaW5lZCYmZi54IT09dW5kZWZpbmVkJiZmLnkhPT11bmRlZmluZWQmJmYuZCE9PXVuZGVmaW5lZCl7dmFyIGQ9bmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtjdXJ2ZTpmLmNydn0pO3ZhciBsPWQuZWNwYXJhbXMua2V5bGVuLzQ7dmFyIGE9KCIwMDAwMDAwMDAwIitiNjR1dG9oZXgoZi5kKSkuc2xpY2UoLWwpO2Quc2V0UHJpdmF0ZUtleUhleChhKTtyZXR1cm4gZH1pZihmLmluZGV4T2YoIi1FTkQgQ0VSVElGSUNBVEUtIiwwKSE9LTF8fGYuaW5kZXhPZigiLUVORCBYNTA5IENFUlRJRklDQVRFLSIsMCkhPS0xfHxmLmluZGV4T2YoIi1FTkQgVFJVU1RFRCBDRVJUSUZJQ0FURS0iLDApIT0tMSl7cmV0dXJuIFg1MDkuZ2V0UHVibGljS2V5RnJvbUNlcnRQRU0oZil9aWYoaD09PSJwa2NzOHB1YiIpe3JldHVybiBLRVlVVElMLmdldEtleUZyb21QdWJsaWNQS0NTOEhleChmKX1pZihmLmluZGV4T2YoIi1FTkQgUFVCTElDIEtFWS0iKSE9LTEpe3JldHVybiBLRVlVVElMLmdldEtleUZyb21QdWJsaWNQS0NTOFBFTShmKX1pZihoPT09InBrY3M1cHJ2Iil7dmFyIHc9bmV3IFJTQUtleSgpO3cucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhmKTtyZXR1cm4gd31pZihoPT09InBrY3M1cHJ2Iil7dmFyIHc9bmV3IFJTQUtleSgpO3cucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhmKTtyZXR1cm4gd31pZihmLmluZGV4T2YoIi1FTkQgUlNBIFBSSVZBVEUgS0VZLSIpIT0tMSYmZi5pbmRleE9mKCI0LEVOQ1JZUFRFRCIpPT0tMSl7dmFyIGk9S0VZVVRJTC5nZXRIZXhGcm9tUEVNKGYsIlJTQSBQUklWQVRFIEtFWSIpO3JldHVybiBLRVlVVElMLmdldEtleShpLG51bGwsInBrY3M1cHJ2Iil9aWYoZi5pbmRleE9mKCItRU5EIERTQSBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKT09LTEpe3ZhciB1PXRoaXMuZ2V0SGV4RnJvbVBFTShmLCJEU0EgUFJJVkFURSBLRVkiKTt2YXIgdD1BU04xSEVYLmdldFZieUxpc3QodSwwLFsxXSwiMDIiKTt2YXIgcz1BU04xSEVYLmdldFZieUxpc3QodSwwLFsyXSwiMDIiKTt2YXIgdj1BU04xSEVYLmdldFZieUxpc3QodSwwLFszXSwiMDIiKTt2YXIgaj1BU04xSEVYLmdldFZieUxpc3QodSwwLFs0XSwiMDIiKTt2YXIgaz1BU04xSEVYLmdldFZieUxpc3QodSwwLFs1XSwiMDIiKTt2YXIgdz1uZXcgS0pVUi5jcnlwdG8uRFNBKCk7dy5zZXRQcml2YXRlKG5ldyBCaWdJbnRlZ2VyKHQsMTYpLG5ldyBCaWdJbnRlZ2VyKHMsMTYpLG5ldyBCaWdJbnRlZ2VyKHYsMTYpLG5ldyBCaWdJbnRlZ2VyKGosMTYpLG5ldyBCaWdJbnRlZ2VyKGssMTYpKTtyZXR1cm4gd31pZihmLmluZGV4T2YoIi1FTkQgUFJJVkFURSBLRVktIikhPS0xKXtyZXR1cm4gS0VZVVRJTC5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhQRU0oZil9aWYoZi5pbmRleE9mKCItRU5EIFJTQSBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKSE9LTEpe3JldHVybiBLRVlVVElMLmdldFJTQUtleUZyb21FbmNyeXB0ZWRQS0NTNVBFTShmLGUpfWlmKGYuaW5kZXhPZigiLUVORCBFQyBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKSE9LTEpe3ZhciB1PUtFWVVUSUwuZ2V0RGVjcnlwdGVkS2V5SGV4KGYsZSk7dmFyIHc9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMV0sIjA0Iik7dmFyIGM9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMiwwXSwiMDYiKTt2YXIgbz1BU04xSEVYLmdldFZieUxpc3QodSwwLFszLDBdLCIwMyIpLnN1YnN0cigyKTt2YXIgYj0iIjtpZihLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWVbY10hPT11bmRlZmluZWQpe2I9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW2NdfWVsc2V7dGhyb3cidW5kZWZpbmVkIE9JRChoZXgpIGluIEtKVVIuY3J5cHRvLk9JRDogIitjfXZhciBkPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7bmFtZTpifSk7ZC5zZXRQdWJsaWNLZXlIZXgobyk7ZC5zZXRQcml2YXRlS2V5SGV4KHcpO2QuaXNQdWJsaWM9ZmFsc2U7cmV0dXJuIGR9aWYoZi5pbmRleE9mKCItRU5EIERTQSBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKSE9LTEpe3ZhciB1PUtFWVVUSUwuZ2V0RGVjcnlwdGVkS2V5SGV4KGYsZSk7dmFyIHQ9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMV0sIjAyIik7dmFyIHM9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMl0sIjAyIik7dmFyIHY9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbM10sIjAyIik7dmFyIGo9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbNF0sIjAyIik7dmFyIGs9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbNV0sIjAyIik7dmFyIHc9bmV3IEtKVVIuY3J5cHRvLkRTQSgpO3cuc2V0UHJpdmF0ZShuZXcgQmlnSW50ZWdlcih0LDE2KSxuZXcgQmlnSW50ZWdlcihzLDE2KSxuZXcgQmlnSW50ZWdlcih2LDE2KSxuZXcgQmlnSW50ZWdlcihqLDE2KSxuZXcgQmlnSW50ZWdlcihrLDE2KSk7cmV0dXJuIHd9aWYoZi5pbmRleE9mKCItRU5EIEVOQ1JZUFRFRCBQUklWQVRFIEtFWS0iKSE9LTEpe3JldHVybiBLRVlVVElMLmdldEtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTShmLGUpfXRocm93Im5vdCBzdXBwb3J0ZWQgYXJndW1lbnQifTtLRVlVVElMLmdlbmVyYXRlS2V5cGFpcj1mdW5jdGlvbihhLGMpe2lmKGE9PSJSU0EiKXt2YXIgYj1jO3ZhciBoPW5ldyBSU0FLZXkoKTtoLmdlbmVyYXRlKGIsIjEwMDAxIik7aC5pc1ByaXZhdGU9dHJ1ZTtoLmlzUHVibGljPXRydWU7dmFyIGY9bmV3IFJTQUtleSgpO3ZhciBlPWgubi50b1N0cmluZygxNik7dmFyIGk9aC5lLnRvU3RyaW5nKDE2KTtmLnNldFB1YmxpYyhlLGkpO2YuaXNQcml2YXRlPWZhbHNlO2YuaXNQdWJsaWM9dHJ1ZTt2YXIgaz17fTtrLnBydktleU9iaj1oO2sucHViS2V5T2JqPWY7cmV0dXJuIGt9ZWxzZXtpZihhPT0iRUMiKXt2YXIgZD1jO3ZhciBnPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6ZH0pO3ZhciBqPWcuZ2VuZXJhdGVLZXlQYWlySGV4KCk7dmFyIGg9bmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtjdXJ2ZTpkfSk7aC5zZXRQcml2YXRlS2V5SGV4KGouZWNwcnZoZXgpO2guaXNQcml2YXRlPXRydWU7aC5pc1B1YmxpYz1mYWxzZTt2YXIgZj1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOmR9KTtmLnNldFB1YmxpY0tleUhleChqLmVjcHViaGV4KTtmLmlzUHJpdmF0ZT1mYWxzZTtmLmlzUHVibGljPXRydWU7dmFyIGs9e307ay5wcnZLZXlPYmo9aDtrLnB1YktleU9iaj1mO3JldHVybiBrfWVsc2V7dGhyb3cidW5rbm93biBhbGdvcml0aG06ICIrYX19fTtLRVlVVElMLmdldFBFTT1mdW5jdGlvbihhLHIsbyxnLGope3ZhciB2PUtKVVIuYXNuMTt2YXIgdT1LSlVSLmNyeXB0bztmdW5jdGlvbiBwKHMpe3ZhciB3PUtKVVIuYXNuMS5BU04xVXRpbC5uZXdPYmplY3Qoe3NlcTpbeyJpbnQiOjB9LHsiaW50Ijp7YmlnaW50OnMubn19LHsiaW50IjpzLmV9LHsiaW50Ijp7YmlnaW50OnMuZH19LHsiaW50Ijp7YmlnaW50OnMucH19LHsiaW50Ijp7YmlnaW50OnMucX19LHsiaW50Ijp7YmlnaW50OnMuZG1wMX19LHsiaW50Ijp7YmlnaW50OnMuZG1xMX19LHsiaW50Ijp7YmlnaW50OnMuY29lZmZ9fV19KTtyZXR1cm4gd31mdW5jdGlvbiBxKHcpe3ZhciBzPUtKVVIuYXNuMS5BU04xVXRpbC5uZXdPYmplY3Qoe3NlcTpbeyJpbnQiOjF9LHtvY3RzdHI6e2hleDp3LnBydktleUhleH19LHt0YWc6WyJhMCIsdHJ1ZSx7b2lkOntuYW1lOncuY3VydmVOYW1lfX1dfSx7dGFnOlsiYTEiLHRydWUse2JpdHN0cjp7aGV4OiIwMCIrdy5wdWJLZXlIZXh9fV19XX0pO3JldHVybiBzfWZ1bmN0aW9uIG4ocyl7dmFyIHc9S0pVUi5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh7c2VxOlt7ImludCI6MH0seyJpbnQiOntiaWdpbnQ6cy5wfX0seyJpbnQiOntiaWdpbnQ6cy5xfX0seyJpbnQiOntiaWdpbnQ6cy5nfX0seyJpbnQiOntiaWdpbnQ6cy55fX0seyJpbnQiOntiaWdpbnQ6cy54fX1dfSk7cmV0dXJuIHd9aWYoKCh0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIFJTQUtleSl8fCh0eXBlb2YgdS5EU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgdS5EU0EpfHwodHlwZW9mIHUuRUNEU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgdS5FQ0RTQSkpJiZhLmlzUHVibGljPT10cnVlJiYocj09PXVuZGVmaW5lZHx8cj09IlBLQ1M4UFVCIikpe3ZhciB0PW5ldyBLSlVSLmFzbjEueDUwOS5TdWJqZWN0UHVibGljS2V5SW5mbyhhKTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIlBVQkxJQyBLRVkiKX1pZihyPT0iUEtDUzFQUlYiJiZ0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIFJTQUtleSYmKG89PT11bmRlZmluZWR8fG89PW51bGwpJiZhLmlzUHJpdmF0ZT09dHJ1ZSl7dmFyIHQ9cChhKTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIlJTQSBQUklWQVRFIEtFWSIpfWlmKHI9PSJQS0NTMVBSViImJnR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0EmJihvPT09dW5kZWZpbmVkfHxvPT1udWxsKSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciBmPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcih7bmFtZTphLmN1cnZlTmFtZX0pO3ZhciBsPWYuZ2V0RW5jb2RlZEhleCgpO3ZhciBlPXEoYSk7dmFyIGs9ZS5nZXRFbmNvZGVkSGV4KCk7dmFyIGk9IiI7aSs9di5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGwsIkVDIFBBUkFNRVRFUlMiKTtpKz12LkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgoaywiRUMgUFJJVkFURSBLRVkiKTtyZXR1cm4gaX1pZihyPT0iUEtDUzFQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRFNBIT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkRTQSYmKG89PT11bmRlZmluZWR8fG89PW51bGwpJiZhLmlzUHJpdmF0ZT09dHJ1ZSl7dmFyIHQ9bihhKTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIkRTQSBQUklWQVRFIEtFWSIpfWlmKHI9PSJQS0NTNVBSViImJnR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgUlNBS2V5JiYobyE9PXVuZGVmaW5lZCYmbyE9bnVsbCkmJmEuaXNQcml2YXRlPT10cnVlKXt2YXIgdD1wKGEpO3ZhciBtPXQuZ2V0RW5jb2RlZEhleCgpO2lmKGc9PT11bmRlZmluZWQpe2c9IkRFUy1FREUzLUNCQyJ9cmV0dXJuIHRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KCJSU0EiLG0sbyxnKX1pZihyPT0iUEtDUzVQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRUNEU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0EmJihvIT09dW5kZWZpbmVkJiZvIT1udWxsKSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciB0PXEoYSk7dmFyIG09dC5nZXRFbmNvZGVkSGV4KCk7aWYoZz09PXVuZGVmaW5lZCl7Zz0iREVTLUVERTMtQ0JDIn1yZXR1cm4gdGhpcy5nZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21QcnZLZXlIZXgoIkVDIixtLG8sZyl9aWYocj09IlBLQ1M1UFJWIiYmdHlwZW9mIEtKVVIuY3J5cHRvLkRTQSE9InVuZGVmaW5lZCImJmEgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0EmJihvIT09dW5kZWZpbmVkJiZvIT1udWxsKSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciB0PW4oYSk7dmFyIG09dC5nZXRFbmNvZGVkSGV4KCk7aWYoZz09PXVuZGVmaW5lZCl7Zz0iREVTLUVERTMtQ0JDIn1yZXR1cm4gdGhpcy5nZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21QcnZLZXlIZXgoIkRTQSIsbSxvLGcpfXZhciBoPWZ1bmN0aW9uKHcscyl7dmFyIHk9Yih3LHMpO3ZhciB4PW5ldyBLSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3tzZXE6W3tvaWQ6e25hbWU6InBrY3M1UEJFUzIifX0se3NlcTpbe3NlcTpbe29pZDp7bmFtZToicGtjczVQQktERjIifX0se3NlcTpbe29jdHN0cjp7aGV4OnkucGJrZGYyU2FsdH19LHsiaW50Ijp5LnBia2RmMkl0ZXJ9XX1dfSx7c2VxOlt7b2lkOntuYW1lOiJkZXMtRURFMy1DQkMifX0se29jdHN0cjp7aGV4OnkuZW5jcnlwdGlvblNjaGVtZUlWfX1dfV19XX0se29jdHN0cjp7aGV4OnkuY2lwaGVydGV4dH19XX0pO3JldHVybiB4LmdldEVuY29kZWRIZXgoKX07dmFyIGI9ZnVuY3Rpb24oRCxFKXt2YXIgeD0xMDA7dmFyIEM9Q3J5cHRvSlMubGliLldvcmRBcnJheS5yYW5kb20oOCk7dmFyIEI9IkRFUy1FREUzLUNCQyI7dmFyIHM9Q3J5cHRvSlMubGliLldvcmRBcnJheS5yYW5kb20oOCk7dmFyIHk9Q3J5cHRvSlMuUEJLREYyKEUsQyx7a2V5U2l6ZToxOTIvMzIsaXRlcmF0aW9uczp4fSk7dmFyIHo9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShEKTt2YXIgQT1DcnlwdG9KUy5UcmlwbGVERVMuZW5jcnlwdCh6LHkse2l2OnN9KSsiIjt2YXIgdz17fTt3LmNpcGhlcnRleHQ9QTt3LnBia2RmMlNhbHQ9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkoQyk7dy5wYmtkZjJJdGVyPXg7dy5lbmNyeXB0aW9uU2NoZW1lQWxnPUI7dy5lbmNyeXB0aW9uU2NoZW1lSVY9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocyk7cmV0dXJuIHd9O2lmKHI9PSJQS0NTOFBSViImJnR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgUlNBS2V5JiZhLmlzUHJpdmF0ZT09dHJ1ZSl7dmFyIGQ9cChhKTt2YXIgYz1kLmdldEVuY29kZWRIZXgoKTt2YXIgdD1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50IjowfSx7c2VxOlt7b2lkOntuYW1lOiJyc2FFbmNyeXB0aW9uIn19LHsibnVsbCI6dHJ1ZX1dfSx7b2N0c3RyOntoZXg6Y319XX0pO3ZhciBtPXQuZ2V0RW5jb2RlZEhleCgpO2lmKG89PT11bmRlZmluZWR8fG89PW51bGwpe3JldHVybiB2LkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgobSwiUFJJVkFURSBLRVkiKX1lbHNle3ZhciBrPWgobSxvKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGssIkVOQ1JZUFRFRCBQUklWQVRFIEtFWSIpfX1pZihyPT0iUEtDUzhQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRUNEU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0EmJmEuaXNQcml2YXRlPT10cnVlKXt2YXIgZD1uZXcgS0pVUi5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh7c2VxOlt7ImludCI6MX0se29jdHN0cjp7aGV4OmEucHJ2S2V5SGV4fX0se3RhZzpbImExIix0cnVlLHtiaXRzdHI6e2hleDoiMDAiK2EucHViS2V5SGV4fX1dfV19KTt2YXIgYz1kLmdldEVuY29kZWRIZXgoKTt2YXIgdD1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50IjowfSx7c2VxOlt7b2lkOntuYW1lOiJlY1B1YmxpY0tleSJ9fSx7b2lkOntuYW1lOmEuY3VydmVOYW1lfX1dfSx7b2N0c3RyOntoZXg6Y319XX0pO3ZhciBtPXQuZ2V0RW5jb2RlZEhleCgpO2lmKG89PT11bmRlZmluZWR8fG89PW51bGwpe3JldHVybiB2LkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgobSwiUFJJVkFURSBLRVkiKX1lbHNle3ZhciBrPWgobSxvKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGssIkVOQ1JZUFRFRCBQUklWQVRFIEtFWSIpfX1pZihyPT0iUEtDUzhQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRFNBIT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkRTQSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciBkPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmEueH0pO3ZhciBjPWQuZ2V0RW5jb2RlZEhleCgpO3ZhciB0PUtKVVIuYXNuMS5BU04xVXRpbC5uZXdPYmplY3Qoe3NlcTpbeyJpbnQiOjB9LHtzZXE6W3tvaWQ6e25hbWU6ImRzYSJ9fSx7c2VxOlt7ImludCI6e2JpZ2ludDphLnB9fSx7ImludCI6e2JpZ2ludDphLnF9fSx7ImludCI6e2JpZ2ludDphLmd9fV19XX0se29jdHN0cjp7aGV4OmN9fV19KTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtpZihvPT09dW5kZWZpbmVkfHxvPT1udWxsKXtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIlBSSVZBVEUgS0VZIil9ZWxzZXt2YXIgaz1oKG0sbyk7cmV0dXJuIHYuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChrLCJFTkNSWVBURUQgUFJJVkFURSBLRVkiKX19dGhyb3cidW5zdXBwb3J0ZWQgb2JqZWN0IG5vciBmb3JtYXQifTtLRVlVVElMLmdldEtleUZyb21DU1JQRU09ZnVuY3Rpb24oYil7dmFyIGE9S0VZVVRJTC5nZXRIZXhGcm9tUEVNKGIsIkNFUlRJRklDQVRFIFJFUVVFU1QiKTt2YXIgYz1LRVlVVElMLmdldEtleUZyb21DU1JIZXgoYSk7cmV0dXJuIGN9O0tFWVVUSUwuZ2V0S2V5RnJvbUNTUkhleD1mdW5jdGlvbihhKXt2YXIgYz1LRVlVVElMLnBhcnNlQ1NSSGV4KGEpO3ZhciBiPUtFWVVUSUwuZ2V0S2V5KGMucDhwdWJrZXloZXgsbnVsbCwicGtjczhwdWIiKTtyZXR1cm4gYn07S0VZVVRJTC5wYXJzZUNTUkhleD1mdW5jdGlvbihjKXt2YXIgYj17fTt2YXIgZT1jO2lmKGUuc3Vic3RyKDAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBDU1IoY29kZTowMDEpIn12YXIgZD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihlLDApO2lmKGQubGVuZ3RoPDEpe3Rocm93Im1hbGZvcm1lZCBDU1IoY29kZTowMDIpIn1pZihlLnN1YnN0cihkWzBdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgQ1NSKGNvZGU6MDAzKSJ9dmFyIGE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZSxkWzBdKTtpZihhLmxlbmd0aDwzKXt0aHJvdyJtYWxmb3JtZWQgQ1NSKGNvZGU6MDA0KSJ9Yi5wOHB1YmtleWhleD1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGUsYVsyXSk7cmV0dXJuIGJ9OwovKiEgcnNhcGVtLTEuMS5qcyAoYykgMjAxMiBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KZnVuY3Rpb24gX3JzYXBlbV9wZW1Ub0Jhc2U2NChiKXt2YXIgYT1iO2E9YS5yZXBsYWNlKCItLS0tLUJFR0lOIFJTQSBQUklWQVRFIEtFWS0tLS0tIiwiIik7YT1hLnJlcGxhY2UoIi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tIiwiIik7YT1hLnJlcGxhY2UoL1sgXG5dKy9nLCIiKTtyZXR1cm4gYX1mdW5jdGlvbiBfcnNhcGVtX2dldFBvc0FycmF5T2ZDaGlsZHJlbkZyb21IZXgoZCl7dmFyIGo9bmV3IEFycmF5KCk7dmFyIGs9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihkLDApO3ZhciBmPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGspO3ZhciBoPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGYpO3ZhciBiPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGgpO3ZhciBsPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGIpO3ZhciBlPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGwpO3ZhciBnPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGUpO3ZhciBjPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGcpO3ZhciBpPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGMpO2oucHVzaChrLGYsaCxiLGwsZSxnLGMsaSk7cmV0dXJuIGp9ZnVuY3Rpb24gX3JzYXBlbV9nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXgoaSl7dmFyIG89X3JzYXBlbV9nZXRQb3NBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGkpO3ZhciByPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1swXSk7dmFyIGY9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzFdKTt2YXIgaj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bMl0pO3ZhciBrPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1szXSk7dmFyIGM9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzRdKTt2YXIgYj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bNV0pO3ZhciBoPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1s2XSk7dmFyIGc9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzddKTt2YXIgbD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bOF0pO3ZhciBtPW5ldyBBcnJheSgpO20ucHVzaChyLGYsaixrLGMsYixoLGcsbCk7cmV0dXJuIG19ZnVuY3Rpb24gX3JzYXBlbV9yZWFkUHJpdmF0ZUtleUZyb21BU04xSGV4U3RyaW5nKGMpe3ZhciBiPV9yc2FwZW1fZ2V0SGV4VmFsdWVBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGMpO3RoaXMuc2V0UHJpdmF0ZUV4KGJbMV0sYlsyXSxiWzNdLGJbNF0sYls1XSxiWzZdLGJbN10sYls4XSl9ZnVuY3Rpb24gX3JzYXBlbV9yZWFkUHJpdmF0ZUtleUZyb21QRU1TdHJpbmcoZSl7dmFyIGM9X3JzYXBlbV9wZW1Ub0Jhc2U2NChlKTt2YXIgZD1iNjR0b2hleChjKTt2YXIgYj1fcnNhcGVtX2dldEhleFZhbHVlQXJyYXlPZkNoaWxkcmVuRnJvbUhleChkKTt0aGlzLnNldFByaXZhdGVFeChiWzFdLGJbMl0sYlszXSxiWzRdLGJbNV0sYls2XSxiWzddLGJbOF0pfVJTQUtleS5wcm90b3R5cGUucmVhZFByaXZhdGVLZXlGcm9tUEVNU3RyaW5nPV9yc2FwZW1fcmVhZFByaXZhdGVLZXlGcm9tUEVNU3RyaW5nO1JTQUtleS5wcm90b3R5cGUucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZz1fcnNhcGVtX3JlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmc7Ci8qISByc2FzaWduLTEuMi43LmpzIChjKSAyMDEyIEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwp2YXIgX1JFX0hFWERFQ09OTFk9bmV3IFJlZ0V4cCgiIik7X1JFX0hFWERFQ09OTFkuY29tcGlsZSgiW14wLTlhLWZdIiwiZ2kiKTtmdW5jdGlvbiBfcnNhc2lnbl9nZXRIZXhQYWRkZWREaWdlc3RJbmZvRm9yU3RyaW5nKGQsZSxhKXt2YXIgYj1mdW5jdGlvbihmKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGYsYSl9O3ZhciBjPWIoZCk7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuZ2V0UGFkZGVkRGlnZXN0SW5mb0hleChjLGEsZSl9ZnVuY3Rpb24gX3plcm9QYWRkaW5nT2ZTaWduYXR1cmUoZSxkKXt2YXIgYz0iIjt2YXIgYT1kLzQtZS5sZW5ndGg7Zm9yKHZhciBiPTA7YjxhO2IrKyl7Yz1jKyIwIn1yZXR1cm4gYytlfWZ1bmN0aW9uIF9yc2FzaWduX3NpZ25TdHJpbmcoZCxhKXt2YXIgYj1mdW5jdGlvbihlKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGUsYSl9O3ZhciBjPWIoZCk7cmV0dXJuIHRoaXMuc2lnbldpdGhNZXNzYWdlSGFzaChjLGEpfWZ1bmN0aW9uIF9yc2FzaWduX3NpZ25XaXRoTWVzc2FnZUhhc2goZSxjKXt2YXIgZj1LSlVSLmNyeXB0by5VdGlsLmdldFBhZGRlZERpZ2VzdEluZm9IZXgoZSxjLHRoaXMubi5iaXRMZW5ndGgoKSk7dmFyIGI9cGFyc2VCaWdJbnQoZiwxNik7dmFyIGQ9dGhpcy5kb1ByaXZhdGUoYik7dmFyIGE9ZC50b1N0cmluZygxNik7cmV0dXJuIF96ZXJvUGFkZGluZ09mU2lnbmF0dXJlKGEsdGhpcy5uLmJpdExlbmd0aCgpKX1mdW5jdGlvbiBfcnNhc2lnbl9zaWduU3RyaW5nV2l0aFNIQTEoYSl7cmV0dXJuIF9yc2FzaWduX3NpZ25TdHJpbmcuY2FsbCh0aGlzLGEsInNoYTEiKX1mdW5jdGlvbiBfcnNhc2lnbl9zaWduU3RyaW5nV2l0aFNIQTI1NihhKXtyZXR1cm4gX3JzYXNpZ25fc2lnblN0cmluZy5jYWxsKHRoaXMsYSwic2hhMjU2Iil9ZnVuY3Rpb24gcHNzX21nZjFfc3RyKGMsYSxlKXt2YXIgYj0iIixkPTA7d2hpbGUoYi5sZW5ndGg8YSl7Yis9aGV4dG9yc3RyKGUocnN0cnRvaGV4KGMrU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsWyhkJjQyNzgxOTAwODApPj4yNCwoZCYxNjcxMTY4MCk+PjE2LChkJjY1MjgwKT4+OCxkJjI1NV0pKSkpO2QrPTF9cmV0dXJuIGJ9ZnVuY3Rpb24gX3JzYXNpZ25fc2lnblN0cmluZ1BTUyhlLGEsZCl7dmFyIGM9ZnVuY3Rpb24oZil7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChmLGEpfTt2YXIgYj1jKHJzdHJ0b2hleChlKSk7aWYoZD09PXVuZGVmaW5lZCl7ZD0tMX1yZXR1cm4gdGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoUFNTKGIsYSxkKX1mdW5jdGlvbiBfcnNhc2lnbl9zaWduV2l0aE1lc3NhZ2VIYXNoUFNTKGwsYSxrKXt2YXIgYj1oZXh0b3JzdHIobCk7dmFyIGc9Yi5sZW5ndGg7dmFyIG09dGhpcy5uLmJpdExlbmd0aCgpLTE7dmFyIGM9TWF0aC5jZWlsKG0vOCk7dmFyIGQ7dmFyIG89ZnVuY3Rpb24oaSl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChpLGEpfTtpZihrPT09LTF8fGs9PT11bmRlZmluZWQpe2s9Z31lbHNle2lmKGs9PT0tMil7az1jLWctMn1lbHNle2lmKGs8LTIpe3Rocm93ImludmFsaWQgc2FsdCBsZW5ndGgifX19aWYoYzwoZytrKzIpKXt0aHJvdyJkYXRhIHRvbyBsb25nIn12YXIgZj0iIjtpZihrPjApe2Y9bmV3IEFycmF5KGspO25ldyBTZWN1cmVSYW5kb20oKS5uZXh0Qnl0ZXMoZik7Zj1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxmKX12YXIgbj1oZXh0b3JzdHIobyhyc3RydG9oZXgoIlx4MDBceDAwXHgwMFx4MDBceDAwXHgwMFx4MDBceDAwIitiK2YpKSk7dmFyIGo9W107Zm9yKGQ9MDtkPGMtay1nLTI7ZCs9MSl7altkXT0wfXZhciBlPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGopKyJceDAxIitmO3ZhciBoPXBzc19tZ2YxX3N0cihuLGUubGVuZ3RoLG8pO3ZhciBxPVtdO2ZvcihkPTA7ZDxlLmxlbmd0aDtkKz0xKXtxW2RdPWUuY2hhckNvZGVBdChkKV5oLmNoYXJDb2RlQXQoZCl9dmFyIHA9KDY1MjgwPj4oOCpjLW0pKSYyNTU7cVswXSY9fnA7Zm9yKGQ9MDtkPGc7ZCsrKXtxLnB1c2gobi5jaGFyQ29kZUF0KGQpKX1xLnB1c2goMTg4KTtyZXR1cm4gX3plcm9QYWRkaW5nT2ZTaWduYXR1cmUodGhpcy5kb1ByaXZhdGUobmV3IEJpZ0ludGVnZXIocSkpLnRvU3RyaW5nKDE2KSx0aGlzLm4uYml0TGVuZ3RoKCkpfWZ1bmN0aW9uIF9yc2FzaWduX2dldERlY3J5cHRTaWduYXR1cmVCSShhLGQsYyl7dmFyIGI9bmV3IFJTQUtleSgpO2Iuc2V0UHVibGljKGQsYyk7dmFyIGU9Yi5kb1B1YmxpYyhhKTtyZXR1cm4gZX1mdW5jdGlvbiBfcnNhc2lnbl9nZXRIZXhEaWdlc3RJbmZvRnJvbVNpZyhhLGMsYil7dmFyIGU9X3JzYXNpZ25fZ2V0RGVjcnlwdFNpZ25hdHVyZUJJKGEsYyxiKTt2YXIgZD1lLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLCIiKTtyZXR1cm4gZH1mdW5jdGlvbiBfcnNhc2lnbl9nZXRBbGdOYW1lQW5kSGFzaEZyb21IZXhEaXNnZXN0SW5mbyhmKXtmb3IodmFyIGUgaW4gS0pVUi5jcnlwdG8uVXRpbC5ESUdFU1RJTkZPSEVBRCl7dmFyIGQ9S0pVUi5jcnlwdG8uVXRpbC5ESUdFU1RJTkZPSEVBRFtlXTt2YXIgYj1kLmxlbmd0aDtpZihmLnN1YnN0cmluZygwLGIpPT1kKXt2YXIgYz1bZSxmLnN1YnN0cmluZyhiKV07cmV0dXJuIGN9fXJldHVybltdfWZ1bmN0aW9uIF9yc2FzaWduX3ZlcmlmeVNpZ25hdHVyZVdpdGhBcmdzKGYsYixnLGope3ZhciBlPV9yc2FzaWduX2dldEhleERpZ2VzdEluZm9Gcm9tU2lnKGIsZyxqKTt2YXIgaD1fcnNhc2lnbl9nZXRBbGdOYW1lQW5kSGFzaEZyb21IZXhEaXNnZXN0SW5mbyhlKTtpZihoLmxlbmd0aD09MCl7cmV0dXJuIGZhbHNlfXZhciBkPWhbMF07dmFyIGk9aFsxXTt2YXIgYT1mdW5jdGlvbihrKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGssZCl9O3ZhciBjPWEoZik7cmV0dXJuKGk9PWMpfWZ1bmN0aW9uIF9yc2FzaWduX3ZlcmlmeUhleFNpZ25hdHVyZUZvck1lc3NhZ2UoYyxiKXt2YXIgZD1wYXJzZUJpZ0ludChjLDE2KTt2YXIgYT1fcnNhc2lnbl92ZXJpZnlTaWduYXR1cmVXaXRoQXJncyhiLGQsdGhpcy5uLnRvU3RyaW5nKDE2KSx0aGlzLmUudG9TdHJpbmcoMTYpKTtyZXR1cm4gYX1mdW5jdGlvbiBfcnNhc2lnbl92ZXJpZnlTdHJpbmcoZixqKXtqPWoucmVwbGFjZShfUkVfSEVYREVDT05MWSwiIik7aj1qLnJlcGxhY2UoL1sgXG5dKy9nLCIiKTt2YXIgYj1wYXJzZUJpZ0ludChqLDE2KTtpZihiLmJpdExlbmd0aCgpPnRoaXMubi5iaXRMZW5ndGgoKSl7cmV0dXJuIDB9dmFyIGk9dGhpcy5kb1B1YmxpYyhiKTt2YXIgZT1pLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLCIiKTt2YXIgZz1fcnNhc2lnbl9nZXRBbGdOYW1lQW5kSGFzaEZyb21IZXhEaXNnZXN0SW5mbyhlKTtpZihnLmxlbmd0aD09MCl7cmV0dXJuIGZhbHNlfXZhciBkPWdbMF07dmFyIGg9Z1sxXTt2YXIgYT1mdW5jdGlvbihrKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGssZCl9O3ZhciBjPWEoZik7cmV0dXJuKGg9PWMpfWZ1bmN0aW9uIF9yc2FzaWduX3ZlcmlmeVdpdGhNZXNzYWdlSGFzaChlLGEpe2E9YS5yZXBsYWNlKF9SRV9IRVhERUNPTkxZLCIiKTthPWEucmVwbGFjZSgvWyBcbl0rL2csIiIpO3ZhciBiPXBhcnNlQmlnSW50KGEsMTYpO2lmKGIuYml0TGVuZ3RoKCk+dGhpcy5uLmJpdExlbmd0aCgpKXtyZXR1cm4gMH12YXIgaD10aGlzLmRvUHVibGljKGIpO3ZhciBnPWgudG9TdHJpbmcoMTYpLnJlcGxhY2UoL14xZiswMC8sIiIpO3ZhciBjPV9yc2FzaWduX2dldEFsZ05hbWVBbmRIYXNoRnJvbUhleERpc2dlc3RJbmZvKGcpO2lmKGMubGVuZ3RoPT0wKXtyZXR1cm4gZmFsc2V9dmFyIGQ9Y1swXTt2YXIgZj1jWzFdO3JldHVybihmPT1lKX1mdW5jdGlvbiBfcnNhc2lnbl92ZXJpZnlTdHJpbmdQU1MoYyxiLGEsZil7dmFyIGU9ZnVuY3Rpb24oZyl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChnLGEpfTt2YXIgZD1lKHJzdHJ0b2hleChjKSk7aWYoZj09PXVuZGVmaW5lZCl7Zj0tMX1yZXR1cm4gdGhpcy52ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1MoZCxiLGEsZil9ZnVuY3Rpb24gX3JzYXNpZ25fdmVyaWZ5V2l0aE1lc3NhZ2VIYXNoUFNTKGYscyxsLGMpe3ZhciBrPW5ldyBCaWdJbnRlZ2VyKHMsMTYpO2lmKGsuYml0TGVuZ3RoKCk+dGhpcy5uLmJpdExlbmd0aCgpKXtyZXR1cm4gZmFsc2V9dmFyIHI9ZnVuY3Rpb24oaSl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChpLGwpfTt2YXIgaj1oZXh0b3JzdHIoZik7dmFyIGg9ai5sZW5ndGg7dmFyIGc9dGhpcy5uLmJpdExlbmd0aCgpLTE7dmFyIG09TWF0aC5jZWlsKGcvOCk7dmFyIHE7aWYoYz09PS0xfHxjPT09dW5kZWZpbmVkKXtjPWh9ZWxzZXtpZihjPT09LTIpe2M9bS1oLTJ9ZWxzZXtpZihjPC0yKXt0aHJvdyJpbnZhbGlkIHNhbHQgbGVuZ3RoIn19fWlmKG08KGgrYysyKSl7dGhyb3ciZGF0YSB0b28gbG9uZyJ9dmFyIGE9dGhpcy5kb1B1YmxpYyhrKS50b0J5dGVBcnJheSgpO2ZvcihxPTA7cTxhLmxlbmd0aDtxKz0xKXthW3FdJj0yNTV9d2hpbGUoYS5sZW5ndGg8bSl7YS51bnNoaWZ0KDApfWlmKGFbbS0xXSE9PTE4OCl7dGhyb3ciZW5jb2RlZCBtZXNzYWdlIGRvZXMgbm90IGVuZCBpbiAweGJjIn1hPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGEpO3ZhciBkPWEuc3Vic3RyKDAsbS1oLTEpO3ZhciBlPWEuc3Vic3RyKGQubGVuZ3RoLGgpO3ZhciBwPSg2NTI4MD4+KDgqbS1nKSkmMjU1O2lmKChkLmNoYXJDb2RlQXQoMCkmcCkhPT0wKXt0aHJvdyJiaXRzIGJleW9uZCBrZXlzaXplIG5vdCB6ZXJvIn12YXIgbj1wc3NfbWdmMV9zdHIoZSxkLmxlbmd0aCxyKTt2YXIgbz1bXTtmb3IocT0wO3E8ZC5sZW5ndGg7cSs9MSl7b1txXT1kLmNoYXJDb2RlQXQocSlebi5jaGFyQ29kZUF0KHEpfW9bMF0mPX5wO3ZhciBiPW0taC1jLTI7Zm9yKHE9MDtxPGI7cSs9MSl7aWYob1txXSE9PTApe3Rocm93ImxlZnRtb3N0IG9jdGV0cyBub3QgemVybyJ9fWlmKG9bYl0hPT0xKXt0aHJvdyIweDAxIG1hcmtlciBub3QgZm91bmQifXJldHVybiBlPT09aGV4dG9yc3RyKHIocnN0cnRvaGV4KCJceDAwXHgwMFx4MDBceDAwXHgwMFx4MDBceDAwXHgwMCIraitTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxvLnNsaWNlKC1jKSkpKSl9UlNBS2V5LnByb3RvdHlwZS5zaWduV2l0aE1lc3NhZ2VIYXNoPV9yc2FzaWduX3NpZ25XaXRoTWVzc2FnZUhhc2g7UlNBS2V5LnByb3RvdHlwZS5zaWduU3RyaW5nPV9yc2FzaWduX3NpZ25TdHJpbmc7UlNBS2V5LnByb3RvdHlwZS5zaWduU3RyaW5nV2l0aFNIQTE9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEExO1JTQUtleS5wcm90b3R5cGUuc2lnblN0cmluZ1dpdGhTSEEyNTY9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEEyNTY7UlNBS2V5LnByb3RvdHlwZS5zaWduPV9yc2FzaWduX3NpZ25TdHJpbmc7UlNBS2V5LnByb3RvdHlwZS5zaWduV2l0aFNIQTE9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEExO1JTQUtleS5wcm90b3R5cGUuc2lnbldpdGhTSEEyNTY9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEEyNTY7UlNBS2V5LnByb3RvdHlwZS5zaWduV2l0aE1lc3NhZ2VIYXNoUFNTPV9yc2FzaWduX3NpZ25XaXRoTWVzc2FnZUhhc2hQU1M7UlNBS2V5LnByb3RvdHlwZS5zaWduU3RyaW5nUFNTPV9yc2FzaWduX3NpZ25TdHJpbmdQU1M7UlNBS2V5LnByb3RvdHlwZS5zaWduUFNTPV9yc2FzaWduX3NpZ25TdHJpbmdQU1M7UlNBS2V5LlNBTFRfTEVOX0hMRU49LTE7UlNBS2V5LlNBTFRfTEVOX01BWD0tMjtSU0FLZXkucHJvdG90eXBlLnZlcmlmeVdpdGhNZXNzYWdlSGFzaD1fcnNhc2lnbl92ZXJpZnlXaXRoTWVzc2FnZUhhc2g7UlNBS2V5LnByb3RvdHlwZS52ZXJpZnlTdHJpbmc9X3JzYXNpZ25fdmVyaWZ5U3RyaW5nO1JTQUtleS5wcm90b3R5cGUudmVyaWZ5SGV4U2lnbmF0dXJlRm9yTWVzc2FnZT1fcnNhc2lnbl92ZXJpZnlIZXhTaWduYXR1cmVGb3JNZXNzYWdlO1JTQUtleS5wcm90b3R5cGUudmVyaWZ5PV9yc2FzaWduX3ZlcmlmeVN0cmluZztSU0FLZXkucHJvdG90eXBlLnZlcmlmeUhleFNpZ25hdHVyZUZvckJ5dGVBcnJheU1lc3NhZ2U9X3JzYXNpZ25fdmVyaWZ5SGV4U2lnbmF0dXJlRm9yTWVzc2FnZTtSU0FLZXkucHJvdG90eXBlLnZlcmlmeVdpdGhNZXNzYWdlSGFzaFBTUz1fcnNhc2lnbl92ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1M7UlNBS2V5LnByb3RvdHlwZS52ZXJpZnlTdHJpbmdQU1M9X3JzYXNpZ25fdmVyaWZ5U3RyaW5nUFNTO1JTQUtleS5wcm90b3R5cGUudmVyaWZ5UFNTPV9yc2FzaWduX3ZlcmlmeVN0cmluZ1BTUztSU0FLZXkuU0FMVF9MRU5fUkVDT1ZFUj0tMjsKLyohIHg1MDktMS4xLjYuanMgKGMpIDIwMTItMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KZnVuY3Rpb24gWDUwOSgpe3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQT1udWxsO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oTj1udWxsO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oRT1udWxsO3RoaXMuaGV4PW51bGw7dGhpcy5nZXRTZXJpYWxOdW1iZXJIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhWQnlOdGhMaXN0KHRoaXMuaGV4LDAsWzAsMV0pfTt0aGlzLmdldElzc3VlckhleD1mdW5jdGlvbigpe3JldHVybiBBU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdCh0aGlzLmhleCwwLFswLDNdKX07dGhpcy5nZXRJc3N1ZXJTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gWDUwOS5oZXgyZG4oQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3QodGhpcy5oZXgsMCxbMCwzXSkpfTt0aGlzLmdldFN1YmplY3RIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3QodGhpcy5oZXgsMCxbMCw1XSl9O3RoaXMuZ2V0U3ViamVjdFN0cmluZz1mdW5jdGlvbigpe3JldHVybiBYNTA5LmhleDJkbihBU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdCh0aGlzLmhleCwwLFswLDVdKSl9O3RoaXMuZ2V0Tm90QmVmb3JlPWZ1bmN0aW9uKCl7dmFyIGE9QVNOMUhFWC5nZXREZWNlbmRhbnRIZXhWQnlOdGhMaXN0KHRoaXMuaGV4LDAsWzAsNCwwXSk7YT1hLnJlcGxhY2UoLyguLikvZywiJSQxIik7YT1kZWNvZGVVUklDb21wb25lbnQoYSk7cmV0dXJuIGF9O3RoaXMuZ2V0Tm90QWZ0ZXI9ZnVuY3Rpb24oKXt2YXIgYT1BU04xSEVYLmdldERlY2VuZGFudEhleFZCeU50aExpc3QodGhpcy5oZXgsMCxbMCw0LDFdKTthPWEucmVwbGFjZSgvKC4uKS9nLCIlJDEiKTthPWRlY29kZVVSSUNvbXBvbmVudChhKTtyZXR1cm4gYX07dGhpcy5yZWFkQ2VydFBFTT1mdW5jdGlvbihjKXt2YXIgZT1YNTA5LnBlbVRvSGV4KGMpO3ZhciBiPVg1MDkuZ2V0UHVibGljS2V5SGV4QXJyYXlGcm9tQ2VydEhleChlKTt2YXIgZD1uZXcgUlNBS2V5KCk7ZC5zZXRQdWJsaWMoYlswXSxiWzFdKTt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0E9ZDt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0FfaE49YlswXTt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0FfaEU9YlsxXTt0aGlzLmhleD1lfTt0aGlzLnJlYWRDZXJ0UEVNV2l0aG91dFJTQUluaXQ9ZnVuY3Rpb24oYyl7dmFyIGQ9WDUwOS5wZW1Ub0hleChjKTt2YXIgYj1YNTA5LmdldFB1YmxpY0tleUhleEFycmF5RnJvbUNlcnRIZXgoZCk7dGhpcy5zdWJqZWN0UHVibGljS2V5UlNBLnNldFB1YmxpYyhiWzBdLGJbMV0pO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oTj1iWzBdO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oRT1iWzFdO3RoaXMuaGV4PWR9fVg1MDkucGVtVG9CYXNlNjQ9ZnVuY3Rpb24oYSl7dmFyIGI9YTtiPWIucmVwbGFjZSgiLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tIiwiIik7Yj1iLnJlcGxhY2UoIi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0iLCIiKTtiPWIucmVwbGFjZSgvWyBcbl0rL2csIiIpO3JldHVybiBifTtYNTA5LnBlbVRvSGV4PWZ1bmN0aW9uKGEpe3ZhciBjPVg1MDkucGVtVG9CYXNlNjQoYSk7dmFyIGI9YjY0dG9oZXgoYyk7cmV0dXJuIGJ9O1g1MDkuZ2V0U3ViamVjdFB1YmxpY0tleVBvc0Zyb21DZXJ0SGV4PWZ1bmN0aW9uKGYpe3ZhciBlPVg1MDkuZ2V0U3ViamVjdFB1YmxpY0tleUluZm9Qb3NGcm9tQ2VydEhleChmKTtpZihlPT0tMSl7cmV0dXJuIC0xfXZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGYsZSk7aWYoYi5sZW5ndGghPTIpe3JldHVybiAtMX12YXIgZD1iWzFdO2lmKGYuc3Vic3RyaW5nKGQsZCsyKSE9IjAzIil7cmV0dXJuIC0xfXZhciBjPUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmooZixkKTtpZihmLnN1YnN0cmluZyhjLGMrMikhPSIwMCIpe3JldHVybiAtMX1yZXR1cm4gYysyfTtYNTA5LmdldFN1YmplY3RQdWJsaWNLZXlJbmZvUG9zRnJvbUNlcnRIZXg9ZnVuY3Rpb24oZCl7dmFyIGM9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihkLDApO3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGQsYyk7aWYoYi5sZW5ndGg8MSl7cmV0dXJuIC0xfWlmKGQuc3Vic3RyaW5nKGJbMF0sYlswXSsxMCk9PSJhMDAzMDIwMTAyIil7aWYoYi5sZW5ndGg8Nil7cmV0dXJuIC0xfXJldHVybiBiWzZdfWVsc2V7aWYoYi5sZW5ndGg8NSl7cmV0dXJuIC0xfXJldHVybiBiWzVdfX07WDUwOS5nZXRQdWJsaWNLZXlIZXhBcnJheUZyb21DZXJ0SGV4PWZ1bmN0aW9uKGYpe3ZhciBlPVg1MDkuZ2V0U3ViamVjdFB1YmxpY0tleVBvc0Zyb21DZXJ0SGV4KGYpO3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGYsZSk7aWYoYi5sZW5ndGghPTIpe3JldHVybltdfXZhciBkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGYsYlswXSk7dmFyIGM9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZixiWzFdKTtpZihkIT1udWxsJiZjIT1udWxsKXtyZXR1cm5bZCxjXX1lbHNle3JldHVybltdfX07WDUwOS5nZXRIZXhUYnNDZXJ0aWZpY2F0ZUZyb21DZXJ0PWZ1bmN0aW9uKGIpe3ZhciBhPUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmooYiwwKTtyZXR1cm4gYX07WDUwOS5nZXRQdWJsaWNLZXlIZXhBcnJheUZyb21DZXJ0UEVNPWZ1bmN0aW9uKGMpe3ZhciBkPVg1MDkucGVtVG9IZXgoYyk7dmFyIGI9WDUwOS5nZXRQdWJsaWNLZXlIZXhBcnJheUZyb21DZXJ0SGV4KGQpO3JldHVybiBifTtYNTA5LmhleDJkbj1mdW5jdGlvbihlKXt2YXIgZj0iIjt2YXIgYz1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihlLDApO2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgYj1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGUsY1tkXSk7Zj1mKyIvIitYNTA5LmhleDJyZG4oYil9cmV0dXJuIGZ9O1g1MDkuaGV4MnJkbj1mdW5jdGlvbihhKXt2YXIgZj1BU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdChhLDAsWzAsMF0pO3ZhciBlPUFTTjFIRVguZ2V0RGVjZW5kYW50SGV4VkJ5TnRoTGlzdChhLDAsWzAsMV0pO3ZhciBjPSIiO3RyeXtjPVg1MDkuRE5fQVRUUkhFWFtmXX1jYXRjaChiKXtjPWZ9ZT1lLnJlcGxhY2UoLyguLikvZywiJSQxIik7dmFyIGQ9ZGVjb2RlVVJJQ29tcG9uZW50KGUpO3JldHVybiBjKyI9IitkfTtYNTA5LkROX0FUVFJIRVg9eyIwNjAzNTUwNDA2IjoiQyIsIjA2MDM1NTA0MGEiOiJPIiwiMDYwMzU1MDQwYiI6Ik9VIiwiMDYwMzU1MDQwMyI6IkNOIiwiMDYwMzU1MDQwNSI6IlNOIiwiMDYwMzU1MDQwOCI6IlNUIiwiMDYwMzU1MDQwNyI6IkwiLH07WDUwOS5nZXRQdWJsaWNLZXlGcm9tQ2VydFBFTT1mdW5jdGlvbihmKXt2YXIgYz1YNTA5LmdldFB1YmxpY0tleUluZm9Qcm9wT2ZDZXJ0UEVNKGYpO2lmKGMuYWxnb2lkPT0iMmE4NjQ4ODZmNzBkMDEwMTAxIil7dmFyIGk9S0VZVVRJTC5wYXJzZVB1YmxpY1Jhd1JTQUtleUhleChjLmtleWhleCk7dmFyIGo9bmV3IFJTQUtleSgpO2ouc2V0UHVibGljKGkubixpLmUpO3JldHVybiBqfWVsc2V7aWYoYy5hbGdvaWQ9PSIyYTg2NDhjZTNkMDIwMSIpe3ZhciBlPUtKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVtjLmFsZ3BhcmFtXTt2YXIgaj1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOmUsaW5mbzpjLmtleWhleH0pO2ouc2V0UHVibGljS2V5SGV4KGMua2V5aGV4KTtyZXR1cm4gan1lbHNle2lmKGMuYWxnb2lkPT0iMmE4NjQ4Y2UzODA0MDEiKXt2YXIgYj1BU04xSEVYLmdldFZieUxpc3QoYy5hbGdwYXJhbSwwLFswXSwiMDIiKTt2YXIgYT1BU04xSEVYLmdldFZieUxpc3QoYy5hbGdwYXJhbSwwLFsxXSwiMDIiKTt2YXIgZD1BU04xSEVYLmdldFZieUxpc3QoYy5hbGdwYXJhbSwwLFsyXSwiMDIiKTt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihjLmtleWhleCwwKTtoPWguc3Vic3RyKDIpO3ZhciBqPW5ldyBLSlVSLmNyeXB0by5EU0EoKTtqLnNldFB1YmxpYyhuZXcgQmlnSW50ZWdlcihiLDE2KSxuZXcgQmlnSW50ZWdlcihhLDE2KSxuZXcgQmlnSW50ZWdlcihkLDE2KSxuZXcgQmlnSW50ZWdlcihoLDE2KSk7cmV0dXJuIGp9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBrZXkifX19fTtYNTA5LmdldFB1YmxpY0tleUluZm9Qcm9wT2ZDZXJ0UEVNPWZ1bmN0aW9uKGUpe3ZhciBjPXt9O2MuYWxncGFyYW09bnVsbDt2YXIgZz1YNTA5LnBlbVRvSGV4KGUpO3ZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGcsMCk7aWYoZC5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAxKSJ9aWYoZy5zdWJzdHIoZFswXSwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDIpIn12YXIgYj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihnLGRbMF0pO2lmKGIubGVuZ3RoPDcpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAzKSJ9dmFyIGg9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxiWzZdKTtpZihoLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDQpIn12YXIgZj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihnLGhbMF0pO2lmKGYubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwNSkifWMuYWxnb2lkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGcsZlswXSk7aWYoZy5zdWJzdHIoZlsxXSwyKT09IjA2Iil7Yy5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihnLGZbMV0pfWVsc2V7aWYoZy5zdWJzdHIoZlsxXSwyKT09IjMwIil7Yy5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGcsZlsxXSl9fWlmKGcuc3Vic3RyKGhbMV0sMikhPSIwMyIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDA2KSJ9dmFyIGE9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxoWzFdKTtjLmtleWhleD1hLnN1YnN0cigyKTtyZXR1cm4gY307WDUwOS5nZXRQdWJsaWNLZXlJbmZvUG9zT2ZDZXJ0SEVYPWZ1bmN0aW9uKGMpe3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGMsMCk7aWYoYi5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAxKSJ9aWYoYy5zdWJzdHIoYlswXSwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDIpIn12YXIgYT1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihjLGJbMF0pO2lmKGEubGVuZ3RoPDcpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAzKSJ9cmV0dXJuIGFbNl19O1g1MDkuZ2V0VjNFeHRJbmZvTGlzdE9mQ2VydEhleD1mdW5jdGlvbihnKXt2YXIgYj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihnLDApO2lmKGIubGVuZ3RoIT0zKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwMSkifWlmKGcuc3Vic3RyKGJbMF0sMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAyKSJ9dmFyIGE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxiWzBdKTtpZihhLmxlbmd0aDw4KXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwMykifWlmKGcuc3Vic3RyKGFbN10sMikhPSJhMyIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDA0KSJ9dmFyIGg9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxhWzddKTtpZihoLmxlbmd0aCE9MSl7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDUpIn1pZihnLnN1YnN0cihoWzBdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwNikifXZhciBmPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGcsaFswXSk7dmFyIGU9Zi5sZW5ndGg7dmFyIGQ9bmV3IEFycmF5KGUpO2Zvcih2YXIgYz0wO2M8ZTtjKyspe2RbY109WDUwOS5nZXRWM0V4dEl0ZW1JbmZvX0F0T2JqKGcsZltjXSl9cmV0dXJuIGR9O1g1MDkuZ2V0VjNFeHRJdGVtSW5mb19BdE9iaj1mdW5jdGlvbihmLGcpe3ZhciBlPXt9O2UucG9zVExWPWc7dmFyIGI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZixnKTtpZihiLmxlbmd0aCE9MiYmYi5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBYLjUwOXYzIEV4dCAoY29kZTowMDEpIn1pZihmLnN1YnN0cihiWzBdLDIpIT0iMDYiKXt0aHJvdyJtYWxmb3JtZWQgWC41MDl2MyBFeHQgKGNvZGU6MDAyKSJ9dmFyIGQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZixiWzBdKTtlLm9pZD1BU04xSEVYLmhleHRvb2lkc3RyKGQpO2UuY3JpdGljYWw9ZmFsc2U7aWYoYi5sZW5ndGg9PTMpe2UuY3JpdGljYWw9dHJ1ZX12YXIgYz1iW2IubGVuZ3RoLTFdO2lmKGYuc3Vic3RyKGMsMikhPSIwNCIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOXYzIEV4dCAoY29kZTowMDMpIn1lLnBvc1Y9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihmLGMpO3JldHVybiBlfTtYNTA5LmdldEhleE9mVExWX1YzRXh0VmFsdWU9ZnVuY3Rpb24oYixhKXt2YXIgYz1YNTA5LmdldFBvc09mVExWX1YzRXh0VmFsdWUoYixhKTtpZihjPT0tMSl7cmV0dXJuIiJ9cmV0dXJuIEFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooYixjKX07WDUwOS5nZXRIZXhPZlZfVjNFeHRWYWx1ZT1mdW5jdGlvbihiLGEpe3ZhciBjPVg1MDkuZ2V0UG9zT2ZUTFZfVjNFeHRWYWx1ZShiLGEpO2lmKGM9PS0xKXtyZXR1cm4iIn1yZXR1cm4gQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooYixjKX07WDUwOS5nZXRQb3NPZlRMVl9WM0V4dFZhbHVlPWZ1bmN0aW9uKGYsYil7dmFyIGQ9YjtpZighYi5tYXRjaCgvXlswLTkuXSskLykpe2Q9S0pVUi5hc24xLng1MDkuT0lELm5hbWUyb2lkKGIpfWlmKGQ9PSIiKXtyZXR1cm4gLTF9dmFyIGM9WDUwOS5nZXRWM0V4dEluZm9MaXN0T2ZDZXJ0SGV4KGYpO2Zvcih2YXIgYT0wO2E8Yy5sZW5ndGg7YSsrKXt2YXIgZT1jW2FdO2lmKGUub2lkPT1kKXtyZXR1cm4gZS5wb3NWfX1yZXR1cm4gLTF9O1g1MDkuS0VZVVNBR0VfTkFNRT1bImRpZ2l0YWxTaWduYXR1cmUiLCJub25SZXB1ZGlhdGlvbiIsImtleUVuY2lwaGVybWVudCIsImRhdGFFbmNpcGhlcm1lbnQiLCJrZXlBZ3JlZW1lbnQiLCJrZXlDZXJ0U2lnbiIsImNSTFNpZ24iLCJlbmNpcGhlck9ubHkiLCJkZWNpcGhlck9ubHkiXTtYNTA5LmdldEV4dEtleVVzYWdlQmluPWZ1bmN0aW9uKGQpe3ZhciBiPVg1MDkuZ2V0SGV4T2ZWX1YzRXh0VmFsdWUoZCwia2V5VXNhZ2UiKTtpZihiPT0iIil7cmV0dXJuIiJ9aWYoYi5sZW5ndGglMiE9MHx8Yi5sZW5ndGg8PTIpe3Rocm93Im1hbGZvcm1lZCBrZXkgdXNhZ2UgdmFsdWUifXZhciBhPXBhcnNlSW50KGIuc3Vic3RyKDAsMikpO3ZhciBjPXBhcnNlSW50KGIuc3Vic3RyKDIpLDE2KS50b1N0cmluZygyKTtyZXR1cm4gYy5zdWJzdHIoMCxjLmxlbmd0aC1hKX07WDUwOS5nZXRFeHRLZXlVc2FnZVN0cmluZz1mdW5jdGlvbihlKXt2YXIgZD1YNTA5LmdldEV4dEtleVVzYWdlQmluKGUpO3ZhciBiPW5ldyBBcnJheSgpO2Zvcih2YXIgYz0wO2M8ZC5sZW5ndGg7YysrKXtpZihkLnN1YnN0cihjLDEpPT0iMSIpe2IucHVzaChYNTA5LktFWVVTQUdFX05BTUVbY10pfX1yZXR1cm4gYi5qb2luKCIsIil9O1g1MDkuZ2V0RXh0QUlBSW5mbz1mdW5jdGlvbihnKXt2YXIgaj17fTtqLm9jc3A9W107ai5jYWlzc3Vlcj1bXTt2YXIgaD1YNTA5LmdldFBvc09mVExWX1YzRXh0VmFsdWUoZywiYXV0aG9yaXR5SW5mb0FjY2VzcyIpO2lmKGg9PS0xKXtyZXR1cm4gbnVsbH1pZihnLnN1YnN0cihoLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgQUlBIEV4dG4gVmFsdWUifXZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGcsaCk7Zm9yKHZhciBjPTA7YzxkLmxlbmd0aDtjKyspe3ZhciBhPWRbY107dmFyIGI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxhKTtpZihiLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIEFjY2Vzc0Rlc2NyaXB0aW9uIG9mIEFJQSBFeHRuIn12YXIgZT1iWzBdO3ZhciBmPWJbMV07aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxlKT09IjJiMDYwMTA1MDUwNzMwMDEiKXtpZihnLnN1YnN0cihmLDIpPT0iODYiKXtqLm9jc3AucHVzaChoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxmKSkpfX1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaihnLGUpPT0iMmIwNjAxMDUwNTA3MzAwMiIpe2lmKGcuc3Vic3RyKGYsMik9PSI4NiIpe2ouY2Fpc3N1ZXIucHVzaChoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxmKSkpfX19cmV0dXJuIGp9OwovKiEgTWlrZSBTYW11ZWwgKGMpIDIwMDkgfCBjb2RlLmdvb2dsZS5jb20vcC9qc29uLXNhbnMtZXZhbAogKi8KdmFyIGpzb25QYXJzZT0oZnVuY3Rpb24oKXt2YXIgZT0iKD86LT9cXGIoPzowfFsxLTldWzAtOV0qKSg/OlxcLlswLTldKyk/KD86W2VFXVsrLV0/WzAtOV0rKT9cXGIpIjt2YXIgaj0nKD86W15cXDAtXFx4MDhcXHgwYS1cXHgxZiJcXFxcXXxcXFxcKD86WyIvXFxcXGJmbnJ0XXx1WzAtOUEtRmEtZl17NH0pKSc7dmFyIGk9Jyg/OiInK2orJyoiKSc7dmFyIGQ9bmV3IFJlZ0V4cCgiKD86ZmFsc2V8dHJ1ZXxudWxsfFtcXHtcXH1cXFtcXF1dfCIrZSsifCIraSsiKSIsImciKTt2YXIgaz1uZXcgUmVnRXhwKCJcXFxcKD86KFtedV0pfHUoLns0fSkpIiwiZyIpO3ZhciBnPXsnIic6JyInLCIvIjoiLyIsIlxcIjoiXFwiLGI6IlxiIixmOiJcZiIsbjoiXG4iLHI6IlxyIix0OiJcdCJ9O2Z1bmN0aW9uIGgobCxtLG4pe3JldHVybiBtP2dbbV06U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChuLDE2KSl9dmFyIGM9bmV3IFN0cmluZygiIik7dmFyIGE9IlxcIjt2YXIgZj17InsiOk9iamVjdCwiWyI6QXJyYXl9O3ZhciBiPU9iamVjdC5oYXNPd25Qcm9wZXJ0eTtyZXR1cm4gZnVuY3Rpb24odSxxKXt2YXIgcD11Lm1hdGNoKGQpO3ZhciB4O3ZhciB2PXBbMF07dmFyIGw9ZmFsc2U7aWYoInsiPT09dil7eD17fX1lbHNle2lmKCJbIj09PXYpe3g9W119ZWxzZXt4PVtdO2w9dHJ1ZX19dmFyIHQ7dmFyIHI9W3hdO2Zvcih2YXIgbz0xLWwsbT1wLmxlbmd0aDtvPG07KytvKXt2PXBbb107dmFyIHc7c3dpdGNoKHYuY2hhckNvZGVBdCgwKSl7ZGVmYXVsdDp3PXJbMF07d1t0fHx3Lmxlbmd0aF09Kyh2KTt0PXZvaWQgMDticmVhaztjYXNlIDM0OnY9di5zdWJzdHJpbmcoMSx2Lmxlbmd0aC0xKTtpZih2LmluZGV4T2YoYSkhPT0tMSl7dj12LnJlcGxhY2UoayxoKX13PXJbMF07aWYoIXQpe2lmKHcgaW5zdGFuY2VvZiBBcnJheSl7dD13Lmxlbmd0aH1lbHNle3Q9dnx8YzticmVha319d1t0XT12O3Q9dm9pZCAwO2JyZWFrO2Nhc2UgOTE6dz1yWzBdO3IudW5zaGlmdCh3W3R8fHcubGVuZ3RoXT1bXSk7dD12b2lkIDA7YnJlYWs7Y2FzZSA5MzpyLnNoaWZ0KCk7YnJlYWs7Y2FzZSAxMDI6dz1yWzBdO3dbdHx8dy5sZW5ndGhdPWZhbHNlO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTEwOnc9clswXTt3W3R8fHcubGVuZ3RoXT1udWxsO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTE2Onc9clswXTt3W3R8fHcubGVuZ3RoXT10cnVlO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTIzOnc9clswXTtyLnVuc2hpZnQod1t0fHx3Lmxlbmd0aF09e30pO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTI1OnIuc2hpZnQoKTticmVha319aWYobCl7aWYoci5sZW5ndGghPT0xKXt0aHJvdyBuZXcgRXJyb3IoKX14PXhbMF19ZWxzZXtpZihyLmxlbmd0aCl7dGhyb3cgbmV3IEVycm9yKCl9fWlmKHEpe3ZhciBzPWZ1bmN0aW9uKEMsQil7dmFyIEQ9Q1tCXTtpZihEJiZ0eXBlb2YgRD09PSJvYmplY3QiKXt2YXIgbj1udWxsO2Zvcih2YXIgeiBpbiBEKXtpZihiLmNhbGwoRCx6KSYmRCE9PUMpe3ZhciB5PXMoRCx6KTtpZih5IT09dm9pZCAwKXtEW3pdPXl9ZWxzZXtpZighbil7bj1bXX1uLnB1c2goeil9fX1pZihuKXtmb3IodmFyIEE9bi5sZW5ndGg7LS1BPj0wOyl7ZGVsZXRlIERbbltBXV19fX1yZXR1cm4gcS5jYWxsKEMsQixEKX07eD1zKHsiIjp4fSwiIil9cmV0dXJuIHh9fSkoKTsKLyohIGp3cy0zLjMuMyAoYykgMjAxMy0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmp3cz09InVuZGVmaW5lZCJ8fCFLSlVSLmp3cyl7S0pVUi5qd3M9e319S0pVUi5qd3MuSldTPWZ1bmN0aW9uKCl7dmFyIGE9S0pVUi5qd3MuSldTO3RoaXMucGFyc2VKV1M9ZnVuY3Rpb24oZSxnKXtpZigodGhpcy5wYXJzZWRKV1MhPT11bmRlZmluZWQpJiYoZ3x8KHRoaXMucGFyc2VkSldTLnNpZ3ZhbEghPT11bmRlZmluZWQpKSl7cmV0dXJufWlmKGUubWF0Y2goL14oW14uXSspXC4oW14uXSspXC4oW14uXSspJC8pPT1udWxsKXt0aHJvdyJKV1Mgc2lnbmF0dXJlIGlzIG5vdCBhIGZvcm0gb2YgJ0hlYWQuUGF5bG9hZC5TaWdWYWx1ZScuIn12YXIgaD1SZWdFeHAuJDE7dmFyIGM9UmVnRXhwLiQyO3ZhciBpPVJlZ0V4cC4kMzt2YXIgaz1oKyIuIitjO3RoaXMucGFyc2VkSldTPXt9O3RoaXMucGFyc2VkSldTLmhlYWRCNjRVPWg7dGhpcy5wYXJzZWRKV1MucGF5bG9hZEI2NFU9Yzt0aGlzLnBhcnNlZEpXUy5zaWd2YWxCNjRVPWk7dGhpcy5wYXJzZWRKV1Muc2k9aztpZighZyl7dmFyIGY9YjY0dXRvaGV4KGkpO3ZhciBkPXBhcnNlQmlnSW50KGYsMTYpO3RoaXMucGFyc2VkSldTLnNpZ3ZhbEg9Zjt0aGlzLnBhcnNlZEpXUy5zaWd2YWxCST1kfXZhciBiPWI2NHV0b3V0ZjgoaCk7dmFyIGo9YjY0dXRvdXRmOChjKTt0aGlzLnBhcnNlZEpXUy5oZWFkUz1iO3RoaXMucGFyc2VkSldTLnBheWxvYWRTPWo7aWYoIWEuaXNTYWZlSlNPTlN0cmluZyhiLHRoaXMucGFyc2VkSldTLCJoZWFkUCIpKXt0aHJvdyJtYWxmb3JtZWQgSlNPTiBzdHJpbmcgZm9yIEpXUyBIZWFkOiAiK2J9fX07S0pVUi5qd3MuSldTLnNpZ249ZnVuY3Rpb24oYSxpLGMsbSxsKXt2YXIgaz1LSlVSLmp3cy5KV1M7dmFyIHEsZSxqO2lmKHR5cGVvZiBpIT0ic3RyaW5nIiYmdHlwZW9mIGkhPSJvYmplY3QiKXt0aHJvdyJzcEhlYWRlciBtdXN0IGJlIEpTT04gc3RyaW5nIG9yIG9iamVjdDogIitpfWlmKHR5cGVvZiBpPT0ib2JqZWN0Iil7ZT1pO3E9SlNPTi5zdHJpbmdpZnkoZSl9aWYodHlwZW9mIGk9PSJzdHJpbmciKXtxPWk7aWYoIWsuaXNTYWZlSlNPTlN0cmluZyhxKSl7dGhyb3ciSldTIEhlYWQgaXMgbm90IHNhZmUgSlNPTiBzdHJpbmc6ICIrcX1lPWsucmVhZFNhZmVKU09OU3RyaW5nKHEpfWo9YztpZih0eXBlb2YgYz09Im9iamVjdCIpe2o9SlNPTi5zdHJpbmdpZnkoYyl9aWYoKGE9PSIifHxhPT1udWxsKSYmZS5hbGchPT11bmRlZmluZWQpe2E9ZS5hbGd9aWYoKGEhPSIiJiZhIT1udWxsKSYmZS5hbGc9PT11bmRlZmluZWQpe2UuYWxnPWE7cT1KU09OLnN0cmluZ2lmeShlKX1pZihhIT09ZS5hbGcpe3Rocm93ImFsZyBhbmQgc0hlYWRlci5hbGcgZG9lc24ndCBtYXRjaDogIithKyIhPSIrZS5hbGd9dmFyIGQ9bnVsbDtpZihrLmp3c2FsZzJzaWdhbGdbYV09PT11bmRlZmluZWQpe3Rocm93InVuc3VwcG9ydGVkIGFsZyBuYW1lOiAiK2F9ZWxzZXtkPWsuandzYWxnMnNpZ2FsZ1thXX12YXIgYj11dGY4dG9iNjR1KHEpO3ZhciBnPXV0Zjh0b2I2NHUoaik7dmFyIG89YisiLiIrZzt2YXIgbj0iIjtpZihkLnN1YnN0cigwLDQpPT0iSG1hYyIpe2lmKG09PT11bmRlZmluZWQpe3Rocm93Im1hYyBrZXkgc2hhbGwgYmUgc3BlY2lmaWVkIGZvciBIUyogYWxnIn12YXIgaD1uZXcgS0pVUi5jcnlwdG8uTWFjKHthbGc6ZCxwcm92OiJjcnlwdG9qcyIscGFzczptfSk7aC51cGRhdGVTdHJpbmcobyk7bj1oLmRvRmluYWwoKX1lbHNle2lmKGQuaW5kZXhPZigid2l0aEVDRFNBIikhPS0xKXt2YXIgcD1uZXcgS0pVUi5jcnlwdG8uU2lnbmF0dXJlKHthbGc6ZH0pO3AuaW5pdChtLGwpO3AudXBkYXRlU3RyaW5nKG8pO2hBU04xU2lnPXAuc2lnbigpO249S0pVUi5jcnlwdG8uRUNEU0EuYXNuMVNpZ1RvQ29uY2F0U2lnKGhBU04xU2lnKX1lbHNle2lmKGQhPSJub25lIil7dmFyIHA9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOmR9KTtwLmluaXQobSxsKTtwLnVwZGF0ZVN0cmluZyhvKTtuPXAuc2lnbigpfX19dmFyIGY9aGV4dG9iNjR1KG4pO3JldHVybiBvKyIuIitmfTtLSlVSLmp3cy5KV1MudmVyaWZ5PWZ1bmN0aW9uKHAsdCxqKXt2YXIgbT1LSlVSLmp3cy5KV1M7dmFyIHE9cC5zcGxpdCgiLiIpO3ZhciBkPXFbMF07dmFyIGw9cVsxXTt2YXIgYj1kKyIuIitsO3ZhciByPWI2NHV0b2hleChxWzJdKTt2YXIgaT1tLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KHFbMF0pKTt2YXIgaD1udWxsO3ZhciBzPW51bGw7aWYoaS5hbGc9PT11bmRlZmluZWQpe3Rocm93ImFsZ29yaXRobSBub3Qgc3BlY2lmaWVkIGluIGhlYWRlciJ9ZWxzZXtoPWkuYWxnO3M9aC5zdWJzdHIoMCwyKX1pZihqIT1udWxsJiZPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaik9PT0iW29iamVjdCBBcnJheV0iJiZqLmxlbmd0aD4wKXt2YXIgYz0iOiIrai5qb2luKCI6IikrIjoiO2lmKGMuaW5kZXhPZigiOiIraCsiOiIpPT0tMSl7dGhyb3ciYWxnb3JpdGhtICciK2grIicgbm90IGFjY2VwdGVkIGluIHRoZSBsaXN0In19aWYoaCE9Im5vbmUiJiZ0PT09bnVsbCl7dGhyb3cia2V5IHNoYWxsIGJlIHNwZWNpZmllZCB0byB2ZXJpZnkuIn1pZih0eXBlb2YgdD09InN0cmluZyImJnQuaW5kZXhPZigiLS0tLS1CRUdJTiAiKSE9LTEpe3Q9S0VZVVRJTC5nZXRLZXkodCl9aWYocz09IlJTInx8cz09IlBTIil7aWYoISh0IGluc3RhbmNlb2YgUlNBS2V5KSl7dGhyb3cia2V5IHNoYWxsIGJlIGEgUlNBS2V5IG9iaiBmb3IgUlMqIGFuZCBQUyogYWxncyJ9fWlmKHM9PSJFUyIpe2lmKCEodCBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBKSl7dGhyb3cia2V5IHNoYWxsIGJlIGEgRUNEU0Egb2JqIGZvciBFUyogYWxncyJ9fWlmKGg9PSJub25lIil7fXZhciBuPW51bGw7aWYobS5qd3NhbGcyc2lnYWxnW2kuYWxnXT09PXVuZGVmaW5lZCl7dGhyb3cidW5zdXBwb3J0ZWQgYWxnIG5hbWU6ICIraH1lbHNle249bS5qd3NhbGcyc2lnYWxnW2hdfWlmKG49PSJub25lIil7dGhyb3cibm90IHN1cHBvcnRlZCJ9ZWxzZXtpZihuLnN1YnN0cigwLDQpPT0iSG1hYyIpe3ZhciBrPW51bGw7aWYodD09PXVuZGVmaW5lZCl7dGhyb3ciaGV4YWRlY2ltYWwga2V5IHNoYWxsIGJlIHNwZWNpZmllZCBmb3IgSE1BQyJ9dmFyIGc9bmV3IEtKVVIuY3J5cHRvLk1hYyh7YWxnOm4scGFzczp0fSk7Zy51cGRhdGVTdHJpbmcoYik7az1nLmRvRmluYWwoKTtyZXR1cm4gcj09a31lbHNle2lmKG4uaW5kZXhPZigid2l0aEVDRFNBIikhPS0xKXt2YXIgZj1udWxsO3RyeXtmPUtKVVIuY3J5cHRvLkVDRFNBLmNvbmNhdFNpZ1RvQVNOMVNpZyhyKX1jYXRjaChvKXtyZXR1cm4gZmFsc2V9dmFyIGU9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOm59KTtlLmluaXQodCk7ZS51cGRhdGVTdHJpbmcoYik7cmV0dXJuIGUudmVyaWZ5KGYpfWVsc2V7dmFyIGU9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOm59KTtlLmluaXQodCk7ZS51cGRhdGVTdHJpbmcoYik7cmV0dXJuIGUudmVyaWZ5KHIpfX19fTtLSlVSLmp3cy5KV1MucGFyc2U9ZnVuY3Rpb24oZyl7dmFyIGM9Zy5zcGxpdCgiLiIpO3ZhciBiPXt9O3ZhciBmLGUsZDtpZihjLmxlbmd0aCE9MiYmYy5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBzSldTOiB3cm9uZyBudW1iZXIgb2YgJy4nIHNwbGl0dGVkIGVsZW1lbnRzIn1mPWNbMF07ZT1jWzFdO2lmKGMubGVuZ3RoPT0zKXtkPWNbMl19Yi5oZWFkZXJPYmo9S0pVUi5qd3MuSldTLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGYpKTtiLnBheWxvYWRPYmo9S0pVUi5qd3MuSldTLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGUpKTtiLmhlYWRlclBQPUpTT04uc3RyaW5naWZ5KGIuaGVhZGVyT2JqLG51bGwsIiAgIik7aWYoYi5wYXlsb2FkT2JqPT1udWxsKXtiLnBheWxvYWRQUD1iNjR1dG91dGY4KGUpfWVsc2V7Yi5wYXlsb2FkUFA9SlNPTi5zdHJpbmdpZnkoYi5wYXlsb2FkT2JqLG51bGwsIiAgIil9aWYoZCE9PXVuZGVmaW5lZCl7Yi5zaWdIZXg9YjY0dXRvaGV4KGQpfXJldHVybiBifTtLSlVSLmp3cy5KV1MudmVyaWZ5SldUPWZ1bmN0aW9uKGQsaixsKXt2YXIgaD1LSlVSLmp3cy5KV1M7dmFyIGk9ZC5zcGxpdCgiLiIpO3ZhciBjPWlbMF07dmFyIGc9aVsxXTt2YXIgbT1jKyIuIitnO3ZhciBrPWI2NHV0b2hleChpWzJdKTt2YXIgZj1oLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGMpKTt2YXIgZT1oLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGcpKTtpZihmLmFsZz09PXVuZGVmaW5lZCl7cmV0dXJuIGZhbHNlfWlmKGwuYWxnPT09dW5kZWZpbmVkKXt0aHJvdyJhY2NlcHRGaWVsZC5hbGcgc2hhbGwgYmUgc3BlY2lmaWVkIn1pZighaC5pbkFycmF5KGYuYWxnLGwuYWxnKSl7cmV0dXJuIGZhbHNlfWlmKGUuaXNzIT09dW5kZWZpbmVkJiZ0eXBlb2YgbC5pc3M9PT0ib2JqZWN0Iil7aWYoIWguaW5BcnJheShlLmlzcyxsLmlzcykpe3JldHVybiBmYWxzZX19aWYoZS5zdWIhPT11bmRlZmluZWQmJnR5cGVvZiBsLnN1Yj09PSJvYmplY3QiKXtpZighaC5pbkFycmF5KGUuc3ViLGwuc3ViKSl7cmV0dXJuIGZhbHNlfX1pZihlLmF1ZCE9PXVuZGVmaW5lZCYmdHlwZW9mIGwuYXVkPT09Im9iamVjdCIpe2lmKHR5cGVvZiBlLmF1ZD09InN0cmluZyIpe2lmKCFoLmluQXJyYXkoZS5hdWQsbC5hdWQpKXtyZXR1cm4gZmFsc2V9fWVsc2V7aWYodHlwZW9mIGUuYXVkPT0ib2JqZWN0Iil7aWYoIWguaW5jbHVkZWRBcnJheShlLmF1ZCxsLmF1ZCkpe3JldHVybiBmYWxzZX19fX12YXIgYj1LSlVSLmp3cy5JbnREYXRlLmdldE5vdygpO2lmKGwudmVyaWZ5QXQhPT11bmRlZmluZWQmJnR5cGVvZiBsLnZlcmlmeUF0PT0ibnVtYmVyIil7Yj1sLnZlcmlmeUF0fWlmKGUuZXhwIT09dW5kZWZpbmVkJiZ0eXBlb2YgZS5leHA9PSJudW1iZXIiKXtpZihlLmV4cDxiKXtyZXR1cm4gZmFsc2V9fWlmKGUubmJmIT09dW5kZWZpbmVkJiZ0eXBlb2YgZS5uYmY9PSJudW1iZXIiKXtpZihiPGUubmJmKXtyZXR1cm4gZmFsc2V9fWlmKGUuaWF0IT09dW5kZWZpbmVkJiZ0eXBlb2YgZS5pYXQ9PSJudW1iZXIiKXtpZihiPGUuaWF0KXtyZXR1cm4gZmFsc2V9fWlmKGUuanRpIT09dW5kZWZpbmVkJiZsLmp0aSE9PXVuZGVmaW5lZCl7aWYoZS5qdGkhPT1sLmp0aSl7cmV0dXJuIGZhbHNlfX1pZighS0pVUi5qd3MuSldTLnZlcmlmeShkLGosbC5hbGcpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9O0tKVVIuandzLkpXUy5pbmNsdWRlZEFycmF5PWZ1bmN0aW9uKGIsYSl7dmFyIGQ9S0pVUi5qd3MuSldTLmluQXJyYXk7aWYoYj09PW51bGwpe3JldHVybiBmYWxzZX1pZih0eXBlb2YgYiE9PSJvYmplY3QiKXtyZXR1cm4gZmFsc2V9aWYodHlwZW9mIGIubGVuZ3RoIT09Im51bWJlciIpe3JldHVybiBmYWxzZX1mb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7aWYoIWQoYltjXSxhKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX07S0pVUi5qd3MuSldTLmluQXJyYXk9ZnVuY3Rpb24oZCxiKXtpZihiPT09bnVsbCl7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBiIT09Im9iamVjdCIpe3JldHVybiBmYWxzZX1pZih0eXBlb2YgYi5sZW5ndGghPT0ibnVtYmVyIil7cmV0dXJuIGZhbHNlfWZvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXtpZihiW2NdPT1kKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfTtLSlVSLmp3cy5KV1MuandzYWxnMnNpZ2FsZz17SFMyNTY6IkhtYWNTSEEyNTYiLEhTMzg0OiJIbWFjU0hBMzg0IixIUzUxMjoiSG1hY1NIQTUxMiIsUlMyNTY6IlNIQTI1NndpdGhSU0EiLFJTMzg0OiJTSEEzODR3aXRoUlNBIixSUzUxMjoiU0hBNTEyd2l0aFJTQSIsRVMyNTY6IlNIQTI1NndpdGhFQ0RTQSIsRVMzODQ6IlNIQTM4NHdpdGhFQ0RTQSIsUFMyNTY6IlNIQTI1NndpdGhSU0FhbmRNR0YxIixQUzM4NDoiU0hBMzg0d2l0aFJTQWFuZE1HRjEiLFBTNTEyOiJTSEE1MTJ3aXRoUlNBYW5kTUdGMSIsbm9uZToibm9uZSIsfTtLSlVSLmp3cy5KV1MuaXNTYWZlSlNPTlN0cmluZz1mdW5jdGlvbihjLGIsZCl7dmFyIGU9bnVsbDt0cnl7ZT1qc29uUGFyc2UoYyk7aWYodHlwZW9mIGUhPSJvYmplY3QiKXtyZXR1cm4gMH1pZihlLmNvbnN0cnVjdG9yPT09QXJyYXkpe3JldHVybiAwfWlmKGIpe2JbZF09ZX1yZXR1cm4gMX1jYXRjaChhKXtyZXR1cm4gMH19O0tKVVIuandzLkpXUy5yZWFkU2FmZUpTT05TdHJpbmc9ZnVuY3Rpb24oYil7dmFyIGM9bnVsbDt0cnl7Yz1qc29uUGFyc2UoYik7aWYodHlwZW9mIGMhPSJvYmplY3QiKXtyZXR1cm4gbnVsbH1pZihjLmNvbnN0cnVjdG9yPT09QXJyYXkpe3JldHVybiBudWxsfXJldHVybiBjfWNhdGNoKGEpe3JldHVybiBudWxsfX07S0pVUi5qd3MuSldTLmdldEVuY29kZWRTaWduYXR1cmVWYWx1ZUZyb21KV1M9ZnVuY3Rpb24oYSl7aWYoYS5tYXRjaCgvXlteLl0rXC5bXi5dK1wuKFteLl0rKSQvKT09bnVsbCl7dGhyb3ciSldTIHNpZ25hdHVyZSBpcyBub3QgYSBmb3JtIG9mICdIZWFkLlBheWxvYWQuU2lnVmFsdWUnLiJ9cmV0dXJuIFJlZ0V4cC4kMX07S0pVUi5qd3MuSldTLmdldEpXS3RodW1icHJpbnQ9ZnVuY3Rpb24oZCl7aWYoZC5rdHkhPT0iUlNBIiYmZC5rdHkhPT0iRUMiJiZkLmt0eSE9PSJvY3QiKXt0aHJvdyJ1bnN1cHBvcnRlZCBhbGdvcml0aG0gZm9yIEpXSyBUaHVtcHJpbnQifXZhciBhPSJ7IjtpZihkLmt0eT09PSJSU0EiKXtpZih0eXBlb2YgZC5uIT0ic3RyaW5nInx8dHlwZW9mIGQuZSE9InN0cmluZyIpe3Rocm93Indyb25nIG4gYW5kIGUgdmFsdWUgZm9yIFJTQSBrZXkifWErPSciZSI6IicrZC5lKyciLCc7YSs9JyJrdHkiOiInK2Qua3R5KyciLCc7YSs9JyJuIjoiJytkLm4rJyJ9J31lbHNle2lmKGQua3R5PT09IkVDIil7aWYodHlwZW9mIGQuY3J2IT0ic3RyaW5nInx8dHlwZW9mIGQueCE9InN0cmluZyJ8fHR5cGVvZiBkLnkhPSJzdHJpbmciKXt0aHJvdyJ3cm9uZyBjcnYsIHggYW5kIHkgdmFsdWUgZm9yIEVDIGtleSJ9YSs9JyJjcnYiOiInK2QuY3J2KyciLCc7YSs9JyJrdHkiOiInK2Qua3R5KyciLCc7YSs9JyJ4IjoiJytkLngrJyIsJzthKz0nInkiOiInK2QueSsnIn0nfWVsc2V7aWYoZC5rdHk9PT0ib2N0Iil7aWYodHlwZW9mIGQuayE9InN0cmluZyIpe3Rocm93Indyb25nIGsgdmFsdWUgZm9yIG9jdChzeW1tZXRyaWMpIGtleSJ9YSs9JyJrdHkiOiInK2Qua3R5KyciLCc7YSs9JyJrIjoiJytkLmsrJyJ9J319fXZhciBiPXJzdHJ0b2hleChhKTt2YXIgYz1LSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoYiwic2hhMjU2Iik7dmFyIGU9aGV4dG9iNjR1KGMpO3JldHVybiBlfTtLSlVSLmp3cy5JbnREYXRlPXt9O0tKVVIuandzLkludERhdGUuZ2V0PWZ1bmN0aW9uKGEpe2lmKGE9PSJub3ciKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXROb3coKX1lbHNle2lmKGE9PSJub3cgKyAxaG91ciIpe3JldHVybiBLSlVSLmp3cy5JbnREYXRlLmdldE5vdygpKzYwKjYwfWVsc2V7aWYoYT09Im5vdyArIDFkYXkiKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXROb3coKSs2MCo2MCoyNH1lbHNle2lmKGE9PSJub3cgKyAxbW9udGgiKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXROb3coKSs2MCo2MCoyNCozMH1lbHNle2lmKGE9PSJub3cgKyAxeWVhciIpe3JldHVybiBLSlVSLmp3cy5JbnREYXRlLmdldE5vdygpKzYwKjYwKjI0KjM2NX1lbHNle2lmKGEubWF0Y2goL1okLykpe3JldHVybiBLSlVSLmp3cy5JbnREYXRlLmdldFp1bHUoYSl9ZWxzZXtpZihhLm1hdGNoKC9eWzAtOV0rJC8pKXtyZXR1cm4gcGFyc2VJbnQoYSl9fX19fX19dGhyb3cidW5zdXBwb3J0ZWQgZm9ybWF0OiAiK2F9O0tKVVIuandzLkludERhdGUuZ2V0WnVsdT1mdW5jdGlvbihsKXt2YXIgaztpZihrPWwubWF0Y2goLyhcZCspKFxkXGQpKFxkXGQpKFxkXGQpKFxkXGQpKFxkXGQpWi8pKXt2YXIgYj1SZWdFeHAuJDE7dmFyIGk9cGFyc2VJbnQoYik7aWYoYi5sZW5ndGg9PTQpe31lbHNle2lmKGIubGVuZ3RoPT0yKXtpZig1MDw9aSYmaTwxMDApe2k9MTkwMCtpfWVsc2V7aWYoMDw9aSYmaTw1MCl7aT0yMDAwK2l9ZWxzZXt0aHJvdyJtYWxmb3JtZWQgeWVhciBzdHJpbmcgZm9yIFVUQ1RpbWUifX19ZWxzZXt0aHJvdyJtYWxmb3JtZWQgeWVhciBzdHJpbmcifX12YXIgZz1wYXJzZUludChSZWdFeHAuJDIpLTE7dmFyIGo9cGFyc2VJbnQoUmVnRXhwLiQzKTt2YXIgYz1wYXJzZUludChSZWdFeHAuJDQpO3ZhciBlPXBhcnNlSW50KFJlZ0V4cC4kNSk7dmFyIGY9cGFyc2VJbnQoUmVnRXhwLiQ2KTt2YXIgaD1uZXcgRGF0ZShEYXRlLlVUQyhpLGcsaixjLGUsZikpO3JldHVybiB+fihoLzEwMDApfXRocm93InVuc3VwcG9ydGVkIGZvcm1hdDogIitsfTtLSlVSLmp3cy5JbnREYXRlLmdldE5vdz1mdW5jdGlvbigpe3ZhciBhPX5+KG5ldyBEYXRlKCkvMTAwMCk7cmV0dXJuIGF9O0tKVVIuandzLkludERhdGUuaW50RGF0ZTJVVENTdHJpbmc9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IERhdGUoYSoxMDAwKTtyZXR1cm4gYi50b1VUQ1N0cmluZygpfTtLSlVSLmp3cy5JbnREYXRlLmludERhdGUyWnVsdT1mdW5jdGlvbihlKXt2YXIgaT1uZXcgRGF0ZShlKjEwMDApO3ZhciBoPSgiMDAwMCIraS5nZXRVVENGdWxsWWVhcigpKS5zbGljZSgtNCk7dmFyIGc9KCIwMCIrKGkuZ2V0VVRDTW9udGgoKSsxKSkuc2xpY2UoLTIpO3ZhciBiPSgiMDAiK2kuZ2V0VVRDRGF0ZSgpKS5zbGljZSgtMik7dmFyIGE9KCIwMCIraS5nZXRVVENIb3VycygpKS5zbGljZSgtMik7dmFyIGM9KCIwMCIraS5nZXRVVENNaW51dGVzKCkpLnNsaWNlKC0yKTt2YXIgZj0oIjAwIitpLmdldFVUQ1NlY29uZHMoKSkuc2xpY2UoLTIpO3JldHVybiBoK2crYithK2MrZisiWiJ9OwovKiEgandzanMtMi4wLjEgKGMpIDIwMTAtMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc2p3cy9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmp3cz09InVuZGVmaW5lZCJ8fCFLSlVSLmp3cyl7S0pVUi5qd3M9e319S0pVUi5qd3MuSldTSlM9ZnVuY3Rpb24oKXt2YXIgYT1LSlVSLmp3cy5KV1M7dGhpcy5hSGVhZGVyPVtdO3RoaXMuc1BheWxvYWQ9IiI7dGhpcy5hU2lnbmF0dXJlPVtdO3RoaXMuaW5pdD1mdW5jdGlvbigpe3RoaXMuYUhlYWRlcj1bXTt0aGlzLnNQYXlsb2FkPSIiO3RoaXMuYVNpZ25hdHVyZT1bXX07dGhpcy5pbml0V2l0aEpXUz1mdW5jdGlvbihjKXt0aGlzLmluaXQoKTt2YXIgYj1uZXcgS0pVUi5qd3MuSldTKCk7Yi5wYXJzZUpXUyhjKTt0aGlzLmFIZWFkZXIucHVzaChiLnBhcnNlZEpXUy5oZWFkQjY0VSk7dGhpcy5zUGF5bG9hZD1iLnBhcnNlZEpXUy5wYXlsb2FkQjY0VTt0aGlzLmFTaWduYXR1cmUucHVzaChiLnBhcnNlZEpXUy5zaWd2YWxCNjRVKX07dGhpcy5hZGRTaWduYXR1cmVCeUhlYWRlcktleT1mdW5jdGlvbihlLGIpe3ZhciBkPWI2NHV0b3V0ZjgodGhpcy5zUGF5bG9hZCk7dmFyIGM9bmV3IEtKVVIuandzLkpXUygpO3ZhciBmPWMuZ2VuZXJhdGVKV1NCeVAxUHJ2S2V5KGUsZCxiKTt0aGlzLmFIZWFkZXIucHVzaChjLnBhcnNlZEpXUy5oZWFkQjY0VSk7dGhpcy5hU2lnbmF0dXJlLnB1c2goYy5wYXJzZWRKV1Muc2lndmFsQjY0VSl9O3RoaXMuYWRkU2lnbmF0dXJlQnlIZWFkZXJQYXlsb2FkS2V5PWZ1bmN0aW9uKGUsZCxiKXt2YXIgYz1uZXcgS0pVUi5qd3MuSldTKCk7dmFyIGY9Yy5nZW5lcmF0ZUpXU0J5UDFQcnZLZXkoZSxkLGIpO3RoaXMuYUhlYWRlci5wdXNoKGMucGFyc2VkSldTLmhlYWRCNjRVKTt0aGlzLnNQYXlsb2FkPWMucGFyc2VkSldTLnBheWxvYWRCNjRVO3RoaXMuYVNpZ25hdHVyZS5wdXNoKGMucGFyc2VkSldTLnNpZ3ZhbEI2NFUpfTt0aGlzLnZlcmlmeVdpdGhDZXJ0cz1mdW5jdGlvbihjKXtpZih0aGlzLmFIZWFkZXIubGVuZ3RoIT1jLmxlbmd0aCl7dGhyb3cibnVtIGhlYWRlcnMgZG9lcyBub3QgbWF0Y2ggd2l0aCBudW0gY2VydHMifWlmKHRoaXMuYVNpZ25hdHVyZS5sZW5ndGghPWMubGVuZ3RoKXt0aHJvdyJudW0gc2lnbmF0dXJlcyBkb2VzIG5vdCBtYXRjaCB3aXRoIG51bSBjZXJ0cyJ9dmFyIGs9dGhpcy5zUGF5bG9hZDt2YXIgZz0iIjtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTt2YXIgZj10aGlzLmFIZWFkZXJbZF07dmFyIG09dGhpcy5hU2lnbmF0dXJlW2RdO3ZhciBiPWYrIi4iK2srIi4iK207dmFyIGo9bmV3IEtKVVIuandzLkpXUygpO3RyeXt2YXIgbD1qLnZlcmlmeUpXU0J5UGVtWDUwOUNlcnQoYixlKTtpZihsIT0xKXtnKz0oZCsxKSsidGggc2lnbmF0dXJlIHVubWF0Y2guICJ9fWNhdGNoKGgpe2crPShkKzEpKyJ0aCBzaWduYXR1cmUgZmFpbCgiK2grIikuICJ9fWlmKGc9PSIiKXtyZXR1cm4gMX1lbHNle3Rocm93IGd9fTt0aGlzLnJlYWRKV1NKUz1mdW5jdGlvbihiKXt2YXIgYz1hLnJlYWRTYWZlSlNPTlN0cmluZyhiKTtpZihjPT1udWxsKXt0aHJvdyJhcmd1bWVudCBpcyBub3QgSlNPTiBzdHJpbmc6ICIrYn10aGlzLmFIZWFkZXI9Yy5oZWFkZXJzO3RoaXMuc1BheWxvYWQ9Yy5wYXlsb2FkO3RoaXMuYVNpZ25hdHVyZT1jLnNpZ25hdHVyZXN9O3RoaXMuZ2V0SlNPTj1mdW5jdGlvbigpe3JldHVybntoZWFkZXJzOnRoaXMuYUhlYWRlcixwYXlsb2FkOnRoaXMuc1BheWxvYWQsc2lnbmF0dXJlczp0aGlzLmFTaWduYXR1cmV9fTt0aGlzLmlzRW1wdHk9ZnVuY3Rpb24oKXtpZih0aGlzLmFIZWFkZXIubGVuZ3RoPT0wKXtyZXR1cm4gMX1yZXR1cm4gMH19OwovKiEgbm9kZXV0aWwtMS4wLjAgKGMpIDIwMTUgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmZ1bmN0aW9uIHJlYWRGaWxlVVRGOChhKXtyZXR1cm4gcmVxdWlyZSgiZnMiKS5yZWFkRmlsZVN5bmMoYSwidXRmOCIpfWZ1bmN0aW9uIHJlYWRGaWxlSGV4QnlCaW4oYyl7dmFyIGI9cmVxdWlyZSgianNyc2FzaWduIik7dmFyIGE9cmVxdWlyZSgiZnMiKTtyZXR1cm4gYi5yc3RydG9oZXgoYS5yZWFkRmlsZVN5bmMoYywiYmluYXJ5IikpfWZ1bmN0aW9uIHJlYWRGaWxlKGIpe3ZhciBhPXJlcXVpcmUoImZzIik7cmV0dXJuIGEucmVhZEZpbGVTeW5jKGIsImJpbmFyeSIpfWZ1bmN0aW9uIHNhdmVGaWxlKGMsYil7dmFyIGE9cmVxdWlyZSgiZnMiKTthLndyaXRlRmlsZVN5bmMoYyxiLCJiaW5hcnkiKX1mdW5jdGlvbiBzYXZlRmlsZUJpbkJ5SGV4KGUsYil7dmFyIGE9cmVxdWlyZSgiZnMiKTt2YXIgYz1yZXF1aXJlKCJqc3JzYXNpZ24iKTt2YXIgZD1jLmhleHRvcnN0cihiKTthLndyaXRlRmlsZVN5bmMoZSxkLCJiaW5hcnkiKX07CgpleHBvcnRzLkJpZ0ludGVnZXIgPSBCaWdJbnRlZ2VyOwpleHBvcnRzLlJTQUtleSA9IFJTQUtleTsKZXhwb3J0cy5FQ0RTQSA9IEtKVVIuY3J5cHRvLkVDRFNBOwpleHBvcnRzLkRTQSA9IEtKVVIuY3J5cHRvLkRTQTsKZXhwb3J0cy5TaWduYXR1cmUgPSBLSlVSLmNyeXB0by5TaWduYXR1cmU7CmV4cG9ydHMuTWVzc2FnZURpZ2VzdCA9IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Q7CmV4cG9ydHMuTWFjID0gS0pVUi5jcnlwdG8uTWFjOwpleHBvcnRzLktFWVVUSUwgPSBLRVlVVElMOwpleHBvcnRzLkFTTjFIRVggPSBBU04xSEVYOwpleHBvcnRzLlg1MDkgPSBYNTA5OwpleHBvcnRzLkNyeXB0b0pTID0gQ3J5cHRvSlM7CgovLyBleHQvYmFzZTY0LmpzCmV4cG9ydHMuYjY0dG9oZXggPSBiNjR0b2hleDsKZXhwb3J0cy5iNjR0b0JBID0gYjY0dG9CQTsKCi8vIGJhc2U2NHguanMKZXhwb3J0cy5zdG9CQSA9IHN0b0JBOwpleHBvcnRzLkJBdG9zID0gQkF0b3M7CmV4cG9ydHMuQkF0b2hleCA9IEJBdG9oZXg7CmV4cG9ydHMuc3RvaGV4ID0gc3RvaGV4OwpleHBvcnRzLnN0b2I2NCA9IHN0b2I2NDsKZXhwb3J0cy5zdG9iNjR1ID0gc3RvYjY0dTsKZXhwb3J0cy5iNjR1dG9zID0gYjY0dXRvczsKZXhwb3J0cy5iNjR0b2I2NHUgPSBiNjR0b2I2NHU7CmV4cG9ydHMuYjY0dXRvYjY0ID0gYjY0dXRvYjY0OwpleHBvcnRzLmhleDJiNjQgPSBoZXgyYjY0OwpleHBvcnRzLmhleHRvYjY0dSA9IGhleHRvYjY0dTsKZXhwb3J0cy5iNjR1dG9oZXggPSBiNjR1dG9oZXg7CmV4cG9ydHMuYjY0dG9oZXggPSBiNjR0b2hleDsKZXhwb3J0cy51dGY4dG9iNjR1ID0gdXRmOHRvYjY0dTsKZXhwb3J0cy5iNjR1dG91dGY4ID0gYjY0dXRvdXRmODsKZXhwb3J0cy51dGY4dG9iNjQgPSB1dGY4dG9iNjQ7CmV4cG9ydHMuYjY0dG91dGY4ID0gYjY0dG91dGY4OwpleHBvcnRzLnV0Zjh0b2hleCA9IHV0Zjh0b2hleDsKZXhwb3J0cy5oZXh0b3V0ZjggPSBoZXh0b3V0Zjg7CmV4cG9ydHMuaGV4dG9yc3RyID0gaGV4dG9yc3RyOwpleHBvcnRzLnJzdHJ0b2hleCA9IHJzdHJ0b2hleDsKZXhwb3J0cy5uZXdsaW5lX3RvVW5peCA9IG5ld2xpbmVfdG9Vbml4OwpleHBvcnRzLm5ld2xpbmVfdG9Eb3MgPSBuZXdsaW5lX3RvRG9zOwpleHBvcnRzLmludGFyeXN0cnRvaGV4ID0gaW50YXJ5c3RydG9oZXg7CmV4cG9ydHMuc3RyZGlmZmlkeCA9IHN0cmRpZmZpZHg7CgpleHBvcnRzLmNyeXB0byA9IEtKVVIuY3J5cHRvOwpleHBvcnRzLmFzbjEgPSBLSlVSLmFzbjE7CmV4cG9ydHMuandzID0gS0pVUi5qd3M7CgpleHBvcnRzLnJlYWRGaWxlVVRGOCA9IHJlYWRGaWxlVVRGODsKZXhwb3J0cy5yZWFkRmlsZUhleEJ5QmluID0gcmVhZEZpbGVIZXhCeUJpbjsKZXhwb3J0cy5yZWFkRmlsZSA9IHJlYWRGaWxlOwpleHBvcnRzLnNhdmVGaWxlID0gc2F2ZUZpbGU7CmV4cG9ydHMuc2F2ZUZpbGVCaW5CeUhleCA9IHNhdmVGaWxlQmluQnlIZXg7CgoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzYsImZzIjo2OSwianNyc2FzaWduIjoxMzJ9XSwxMzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgYm4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgYnJvcmFuZCA9IHJlcXVpcmUoJ2Jyb3JhbmQnKTsKCmZ1bmN0aW9uIE1pbGxlclJhYmluKHJhbmQpIHsKICB0aGlzLnJhbmQgPSByYW5kIHx8IG5ldyBicm9yYW5kLlJhbmQoKTsKfQptb2R1bGUuZXhwb3J0cyA9IE1pbGxlclJhYmluOwoKTWlsbGVyUmFiaW4uY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHJhbmQpIHsKICByZXR1cm4gbmV3IE1pbGxlclJhYmluKHJhbmQpOwp9OwoKTWlsbGVyUmFiaW4ucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogIHZhciBsZW4gPSBuLmJpdExlbmd0aCgpOwogIHZhciBidWYgPSB0aGlzLnJhbmQuZ2VuZXJhdGUoTWF0aC5jZWlsKGxlbiAvIDgpKTsKCiAgLy8gU2V0IGxvdyBiaXRzCiAgYnVmWzBdIHw9IDM7CgogIC8vIE1hc2sgaGlnaCBiaXRzCiAgdmFyIG1hc2sgPSBsZW4gJiAweDc7CiAgaWYgKG1hc2sgIT09IDApCiAgICBidWZbYnVmLmxlbmd0aCAtIDFdID4+PSA3IC0gbWFzazsKCiAgcmV0dXJuIG5ldyBibihidWYpOwp9CgpNaWxsZXJSYWJpbi5wcm90b3R5cGUudGVzdCA9IGZ1bmN0aW9uIHRlc3QobiwgaywgY2IpIHsKICB2YXIgbGVuID0gbi5iaXRMZW5ndGgoKTsKICB2YXIgcmVkID0gYm4ubW9udChuKTsKICB2YXIgcm9uZSA9IG5ldyBibigxKS50b1JlZChyZWQpOwoKICBpZiAoIWspCiAgICBrID0gTWF0aC5tYXgoMSwgKGxlbiAvIDQ4KSB8IDApOwoKICAvLyBGaW5kIGQgYW5kIHMsIChuIC0gMSkgPSAoMiBeIHMpICogZDsKICB2YXIgbjEgPSBuLnN1Ym4oMSk7CiAgdmFyIG4yID0gbjEuc3VibigxKTsKICBmb3IgKHZhciBzID0gMDsgIW4xLnRlc3RuKHMpOyBzKyspIHt9CiAgdmFyIGQgPSBuLnNocm4ocyk7CgogIHZhciBybjEgPSBuMS50b1JlZChyZWQpOwoKICB2YXIgcHJpbWUgPSB0cnVlOwogIGZvciAoOyBrID4gMDsgay0tKSB7CiAgICB2YXIgYSA9IHRoaXMuX3JhbmQobjIpOwogICAgaWYgKGNiKQogICAgICBjYihhKTsKCiAgICB2YXIgeCA9IGEudG9SZWQocmVkKS5yZWRQb3coZCk7CiAgICBpZiAoeC5jbXAocm9uZSkgPT09IDAgfHwgeC5jbXAocm4xKSA9PT0gMCkKICAgICAgY29udGludWU7CgogICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzOyBpKyspIHsKICAgICAgeCA9IHgucmVkU3FyKCk7CgogICAgICBpZiAoeC5jbXAocm9uZSkgPT09IDApCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICBpZiAoeC5jbXAocm4xKSA9PT0gMCkKICAgICAgICBicmVhazsKICAgIH0KCiAgICBpZiAoaSA9PT0gcykKICAgICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIHByaW1lOwp9OwoKTWlsbGVyUmFiaW4ucHJvdG90eXBlLmdldERpdmlzb3IgPSBmdW5jdGlvbiBnZXREaXZpc29yKG4sIGspIHsKICB2YXIgbGVuID0gbi5iaXRMZW5ndGgoKTsKICB2YXIgcmVkID0gYm4ubW9udChuKTsKICB2YXIgcm9uZSA9IG5ldyBibigxKS50b1JlZChyZWQpOwoKICBpZiAoIWspCiAgICBrID0gTWF0aC5tYXgoMSwgKGxlbiAvIDQ4KSB8IDApOwoKICAvLyBGaW5kIGQgYW5kIHMsIChuIC0gMSkgPSAoMiBeIHMpICogZDsKICB2YXIgbjEgPSBuLnN1Ym4oMSk7CiAgdmFyIG4yID0gbjEuc3VibigxKTsKICBmb3IgKHZhciBzID0gMDsgIW4xLnRlc3RuKHMpOyBzKyspIHt9CiAgdmFyIGQgPSBuLnNocm4ocyk7CgogIHZhciBybjEgPSBuMS50b1JlZChyZWQpOwoKICBmb3IgKDsgayA+IDA7IGstLSkgewogICAgdmFyIGEgPSB0aGlzLl9yYW5kKG4yKTsKCiAgICB2YXIgZyA9IG4uZ2NkKGEpOwogICAgaWYgKGcuY21wbigxKSAhPT0gMCkKICAgICAgcmV0dXJuIGc7CgogICAgdmFyIHggPSBhLnRvUmVkKHJlZCkucmVkUG93KGQpOwogICAgaWYgKHguY21wKHJvbmUpID09PSAwIHx8IHguY21wKHJuMSkgPT09IDApCiAgICAgIGNvbnRpbnVlOwoKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgczsgaSsrKSB7CiAgICAgIHggPSB4LnJlZFNxcigpOwoKICAgICAgaWYgKHguY21wKHJvbmUpID09PSAwKQogICAgICAgIHJldHVybiB4LmZyb21SZWQoKS5zdWJuKDEpLmdjZChuKTsKICAgICAgaWYgKHguY21wKHJuMSkgPT09IDApCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgaWYgKGkgPT09IHMpIHsKICAgICAgeCA9IHgucmVkU3FyKCk7CiAgICAgIHJldHVybiB4LmZyb21SZWQoKS5zdWJuKDEpLmdjZChuKTsKICAgIH0KICB9CgogIHJldHVybiBmYWxzZTsKfTsKCn0seyJibi5qcyI6NDIsImJyb3JhbmQiOjQzfV0sMTM0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBhc3NlcnQ7CgpmdW5jdGlvbiBhc3NlcnQodmFsLCBtc2cpIHsKICBpZiAoIXZhbCkKICAgIHRocm93IG5ldyBFcnJvcihtc2cgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnKTsKfQoKYXNzZXJ0LmVxdWFsID0gZnVuY3Rpb24gYXNzZXJ0RXF1YWwobCwgciwgbXNnKSB7CiAgaWYgKGwgIT0gcikKICAgIHRocm93IG5ldyBFcnJvcihtc2cgfHwgKCdBc3NlcnRpb24gZmFpbGVkOiAnICsgbCArICcgIT0gJyArIHIpKTsKfTsKCn0se31dLDEzNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsiMi4xNi44NDAuMS4xMDEuMy40LjEuMSI6ICJhZXMtMTI4LWVjYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yIjogImFlcy0xMjgtY2JjIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjMiOiAiYWVzLTEyOC1vZmIiLAoiMi4xNi44NDAuMS4xMDEuMy40LjEuNCI6ICJhZXMtMTI4LWNmYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yMSI6ICJhZXMtMTkyLWVjYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yMiI6ICJhZXMtMTkyLWNiYyIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yMyI6ICJhZXMtMTkyLW9mYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yNCI6ICJhZXMtMTkyLWNmYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40MSI6ICJhZXMtMjU2LWVjYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40MiI6ICJhZXMtMjU2LWNiYyIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40MyI6ICJhZXMtMjU2LW9mYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40NCI6ICJhZXMtMjU2LWNmYiIKfQp9LHt9XSwxMzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L3NlbGYtc2lnbmVkL2Jsb2IvZ2gtcGFnZXMvbGliL2FzbjEuanMKLy8gRmVkb3IsIHlvdSBhcmUgYW1hemluZy4KCnZhciBhc24xID0gcmVxdWlyZSgnYXNuMS5qcycpCgp2YXIgUlNBUHJpdmF0ZUtleSA9IGFzbjEuZGVmaW5lKCdSU0FQcml2YXRlS2V5JywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ3ZlcnNpb24nKS5pbnQoKSwKICAgIHRoaXMua2V5KCdtb2R1bHVzJykuaW50KCksCiAgICB0aGlzLmtleSgncHVibGljRXhwb25lbnQnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwcml2YXRlRXhwb25lbnQnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwcmltZTEnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwcmltZTInKS5pbnQoKSwKICAgIHRoaXMua2V5KCdleHBvbmVudDEnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdleHBvbmVudDInKS5pbnQoKSwKICAgIHRoaXMua2V5KCdjb2VmZmljaWVudCcpLmludCgpCiAgKQp9KQpleHBvcnRzLlJTQVByaXZhdGVLZXkgPSBSU0FQcml2YXRlS2V5Cgp2YXIgUlNBUHVibGljS2V5ID0gYXNuMS5kZWZpbmUoJ1JTQVB1YmxpY0tleScsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCdtb2R1bHVzJykuaW50KCksCiAgICB0aGlzLmtleSgncHVibGljRXhwb25lbnQnKS5pbnQoKQogICkKfSkKZXhwb3J0cy5SU0FQdWJsaWNLZXkgPSBSU0FQdWJsaWNLZXkKCnZhciBQdWJsaWNLZXkgPSBhc24xLmRlZmluZSgnU3ViamVjdFB1YmxpY0tleUluZm8nLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgnYWxnb3JpdGhtJykudXNlKEFsZ29yaXRobUlkZW50aWZpZXIpLAogICAgdGhpcy5rZXkoJ3N1YmplY3RQdWJsaWNLZXknKS5iaXRzdHIoKQogICkKfSkKZXhwb3J0cy5QdWJsaWNLZXkgPSBQdWJsaWNLZXkKCnZhciBBbGdvcml0aG1JZGVudGlmaWVyID0gYXNuMS5kZWZpbmUoJ0FsZ29yaXRobUlkZW50aWZpZXInLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgnYWxnb3JpdGhtJykub2JqaWQoKSwKICAgIHRoaXMua2V5KCdub25lJykubnVsbF8oKS5vcHRpb25hbCgpLAogICAgdGhpcy5rZXkoJ2N1cnZlJykub2JqaWQoKS5vcHRpb25hbCgpLAogICAgdGhpcy5rZXkoJ3BhcmFtcycpLnNlcSgpLm9iaigKICAgICAgdGhpcy5rZXkoJ3AnKS5pbnQoKSwKICAgICAgdGhpcy5rZXkoJ3EnKS5pbnQoKSwKICAgICAgdGhpcy5rZXkoJ2cnKS5pbnQoKQogICAgKS5vcHRpb25hbCgpCiAgKQp9KQoKdmFyIFByaXZhdGVLZXlJbmZvID0gYXNuMS5kZWZpbmUoJ1ByaXZhdGVLZXlJbmZvJywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ3ZlcnNpb24nKS5pbnQoKSwKICAgIHRoaXMua2V5KCdhbGdvcml0aG0nKS51c2UoQWxnb3JpdGhtSWRlbnRpZmllciksCiAgICB0aGlzLmtleSgnc3ViamVjdFByaXZhdGVLZXknKS5vY3RzdHIoKQogICkKfSkKZXhwb3J0cy5Qcml2YXRlS2V5ID0gUHJpdmF0ZUtleUluZm8KdmFyIEVuY3J5cHRlZFByaXZhdGVLZXlJbmZvID0gYXNuMS5kZWZpbmUoJ0VuY3J5cHRlZFByaXZhdGVLZXlJbmZvJywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ2FsZ29yaXRobScpLnNlcSgpLm9iaigKICAgICAgdGhpcy5rZXkoJ2lkJykub2JqaWQoKSwKICAgICAgdGhpcy5rZXkoJ2RlY3J5cHQnKS5zZXEoKS5vYmooCiAgICAgICAgdGhpcy5rZXkoJ2tkZScpLnNlcSgpLm9iaigKICAgICAgICAgIHRoaXMua2V5KCdpZCcpLm9iamlkKCksCiAgICAgICAgICB0aGlzLmtleSgna2RlcGFyYW1zJykuc2VxKCkub2JqKAogICAgICAgICAgICB0aGlzLmtleSgnc2FsdCcpLm9jdHN0cigpLAogICAgICAgICAgICB0aGlzLmtleSgnaXRlcnMnKS5pbnQoKQogICAgICAgICAgKQogICAgICAgICksCiAgICAgICAgdGhpcy5rZXkoJ2NpcGhlcicpLnNlcSgpLm9iaigKICAgICAgICAgIHRoaXMua2V5KCdhbGdvJykub2JqaWQoKSwKICAgICAgICAgIHRoaXMua2V5KCdpdicpLm9jdHN0cigpCiAgICAgICAgKQogICAgICApCiAgICApLAogICAgdGhpcy5rZXkoJ3N1YmplY3RQcml2YXRlS2V5Jykub2N0c3RyKCkKICApCn0pCgpleHBvcnRzLkVuY3J5cHRlZFByaXZhdGVLZXkgPSBFbmNyeXB0ZWRQcml2YXRlS2V5SW5mbwoKdmFyIERTQVByaXZhdGVLZXkgPSBhc24xLmRlZmluZSgnRFNBUHJpdmF0ZUtleScsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCd2ZXJzaW9uJykuaW50KCksCiAgICB0aGlzLmtleSgncCcpLmludCgpLAogICAgdGhpcy5rZXkoJ3EnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdnJykuaW50KCksCiAgICB0aGlzLmtleSgncHViX2tleScpLmludCgpLAogICAgdGhpcy5rZXkoJ3ByaXZfa2V5JykuaW50KCkKICApCn0pCmV4cG9ydHMuRFNBUHJpdmF0ZUtleSA9IERTQVByaXZhdGVLZXkKCmV4cG9ydHMuRFNBcGFyYW0gPSBhc24xLmRlZmluZSgnRFNBcGFyYW0nLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5pbnQoKQp9KQp2YXIgRUNQcml2YXRlS2V5ID0gYXNuMS5kZWZpbmUoJ0VDUHJpdmF0ZUtleScsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCd2ZXJzaW9uJykuaW50KCksCiAgICB0aGlzLmtleSgncHJpdmF0ZUtleScpLm9jdHN0cigpLAogICAgdGhpcy5rZXkoJ3BhcmFtZXRlcnMnKS5vcHRpb25hbCgpLmV4cGxpY2l0KDApLnVzZShFQ1BhcmFtZXRlcnMpLAogICAgdGhpcy5rZXkoJ3B1YmxpY0tleScpLm9wdGlvbmFsKCkuZXhwbGljaXQoMSkuYml0c3RyKCkKICApCn0pCmV4cG9ydHMuRUNQcml2YXRlS2V5ID0gRUNQcml2YXRlS2V5CnZhciBFQ1BhcmFtZXRlcnMgPSBhc24xLmRlZmluZSgnRUNQYXJhbWV0ZXJzJywgZnVuY3Rpb24gKCkgewogIHRoaXMuY2hvaWNlKHsKICAgIG5hbWVkQ3VydmU6IHRoaXMub2JqaWQoKQogIH0pCn0pCgpleHBvcnRzLnNpZ25hdHVyZSA9IGFzbjEuZGVmaW5lKCdzaWduYXR1cmUnLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgncicpLmludCgpLAogICAgdGhpcy5rZXkoJ3MnKS5pbnQoKQogICkKfSkKCn0seyJhc24xLmpzIjoxfV0sMTM3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBhZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2FwYXRpbC9wZW1zdHJpcAp2YXIgZmluZFByb2MgPSAvUHJvYy1UeXBlOiA0LEVOQ1JZUFRFRFxyP1xuREVLLUluZm86IEFFUy0oKD86MTI4KXwoPzoxOTIpfCg/OjI1NikpLUNCQywoWzAtOUEtSF0rKVxyP1xuXHI/XG4oWzAtOUEtelxuXHJcK1wvXD1dKylccj9cbi9tCnZhciBzdGFydFJlZ2V4ID0gL14tLS0tLUJFR0lOICguKikgS0VZLS0tLS1ccj9cbi9tCnZhciBmdWxsUmVnZXggPSAvXi0tLS0tQkVHSU4gKC4qKSBLRVktLS0tLVxyP1xuKFswLTlBLXpcblxyXCtcL1w9XSspXHI/XG4tLS0tLUVORCBcMSBLRVktLS0tLSQvbQp2YXIgZXZwID0gcmVxdWlyZSgnZXZwX2J5dGVzdG9rZXknKQp2YXIgY2lwaGVycyA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktYWVzJykKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2tleSwgcGFzc3dvcmQpIHsKICB2YXIga2V5ID0gb2tleS50b1N0cmluZygpCiAgdmFyIG1hdGNoID0ga2V5Lm1hdGNoKGZpbmRQcm9jKQogIHZhciBkZWNyeXB0ZWQKICBpZiAoIW1hdGNoKSB7CiAgICB2YXIgbWF0Y2gyID0ga2V5Lm1hdGNoKGZ1bGxSZWdleCkKICAgIGRlY3J5cHRlZCA9IG5ldyBCdWZmZXIobWF0Y2gyWzJdLnJlcGxhY2UoL1xyP1xuL2csICcnKSwgJ2Jhc2U2NCcpCiAgfSBlbHNlIHsKICAgIHZhciBzdWl0ZSA9ICdhZXMnICsgbWF0Y2hbMV0KICAgIHZhciBpdiA9IG5ldyBCdWZmZXIobWF0Y2hbMl0sICdoZXgnKQogICAgdmFyIGNpcGhlclRleHQgPSBuZXcgQnVmZmVyKG1hdGNoWzNdLnJlcGxhY2UoL1xyP1xuL2csICcnKSwgJ2Jhc2U2NCcpCiAgICB2YXIgY2lwaGVyS2V5ID0gZXZwKHBhc3N3b3JkLCBpdi5zbGljZSgwLCA4KSwgcGFyc2VJbnQobWF0Y2hbMV0sIDEwKSkua2V5CiAgICB2YXIgb3V0ID0gW10KICAgIHZhciBjaXBoZXIgPSBjaXBoZXJzLmNyZWF0ZURlY2lwaGVyaXYoc3VpdGUsIGNpcGhlcktleSwgaXYpCiAgICBvdXQucHVzaChjaXBoZXIudXBkYXRlKGNpcGhlclRleHQpKQogICAgb3V0LnB1c2goY2lwaGVyLmZpbmFsKCkpCiAgICBkZWNyeXB0ZWQgPSBCdWZmZXIuY29uY2F0KG91dCkKICB9CiAgdmFyIHRhZyA9IGtleS5tYXRjaChzdGFydFJlZ2V4KVsxXSArICcgS0VZJwogIHJldHVybiB7CiAgICB0YWc6IHRhZywKICAgIGRhdGE6IGRlY3J5cHRlZAogIH0KfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJyb3dzZXJpZnktYWVzIjo0NywiYnVmZmVyIjo3NiwiZXZwX2J5dGVzdG9rZXkiOjExOX1dLDEzODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFzbjEgPSByZXF1aXJlKCcuL2FzbjEnKQp2YXIgYWVzaWQgPSByZXF1aXJlKCcuL2Flc2lkLmpzb24nKQp2YXIgZml4UHJvYyA9IHJlcXVpcmUoJy4vZml4UHJvYycpCnZhciBjaXBoZXJzID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1hZXMnKQp2YXIgY29tcGF0ID0gcmVxdWlyZSgncGJrZGYyJykKbW9kdWxlLmV4cG9ydHMgPSBwYXJzZUtleXMKCmZ1bmN0aW9uIHBhcnNlS2V5cyAoYnVmZmVyKSB7CiAgdmFyIHBhc3N3b3JkCiAgaWYgKHR5cGVvZiBidWZmZXIgPT09ICdvYmplY3QnICYmICFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSkgewogICAgcGFzc3dvcmQgPSBidWZmZXIucGFzc3BocmFzZQogICAgYnVmZmVyID0gYnVmZmVyLmtleQogIH0KICBpZiAodHlwZW9mIGJ1ZmZlciA9PT0gJ3N0cmluZycpIHsKICAgIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyKQogIH0KCiAgdmFyIHN0cmlwcGVkID0gZml4UHJvYyhidWZmZXIsIHBhc3N3b3JkKQoKICB2YXIgdHlwZSA9IHN0cmlwcGVkLnRhZwogIHZhciBkYXRhID0gc3RyaXBwZWQuZGF0YQogIHZhciBzdWJ0eXBlLCBuZGF0YQogIHN3aXRjaCAodHlwZSkgewogICAgY2FzZSAnUFVCTElDIEtFWSc6CiAgICAgIG5kYXRhID0gYXNuMS5QdWJsaWNLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICBzdWJ0eXBlID0gbmRhdGEuYWxnb3JpdGhtLmFsZ29yaXRobS5qb2luKCcuJykKICAgICAgc3dpdGNoIChzdWJ0eXBlKSB7CiAgICAgICAgY2FzZSAnMS4yLjg0MC4xMTM1NDkuMS4xLjEnOgogICAgICAgICAgcmV0dXJuIGFzbjEuUlNBUHVibGljS2V5LmRlY29kZShuZGF0YS5zdWJqZWN0UHVibGljS2V5LmRhdGEsICdkZXInKQogICAgICAgIGNhc2UgJzEuMi44NDAuMTAwNDUuMi4xJzoKICAgICAgICAgIG5kYXRhLnN1YmplY3RQcml2YXRlS2V5ID0gbmRhdGEuc3ViamVjdFB1YmxpY0tleQogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdHlwZTogJ2VjJywKICAgICAgICAgICAgZGF0YTogbmRhdGEKICAgICAgICAgIH0KICAgICAgICBjYXNlICcxLjIuODQwLjEwMDQwLjQuMSc6CiAgICAgICAgICBuZGF0YS5hbGdvcml0aG0ucGFyYW1zLnB1Yl9rZXkgPSBhc24xLkRTQXBhcmFtLmRlY29kZShuZGF0YS5zdWJqZWN0UHVibGljS2V5LmRhdGEsICdkZXInKQogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdHlwZTogJ2RzYScsCiAgICAgICAgICAgIGRhdGE6IG5kYXRhLmFsZ29yaXRobS5wYXJhbXMKICAgICAgICAgIH0KICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24ga2V5IGlkICcgKyBzdWJ0eXBlKQogICAgICB9CiAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBrZXkgdHlwZSAnICsgdHlwZSkKICAgIGNhc2UgJ0VOQ1JZUFRFRCBQUklWQVRFIEtFWSc6CiAgICAgIGRhdGEgPSBhc24xLkVuY3J5cHRlZFByaXZhdGVLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICBkYXRhID0gZGVjcnlwdChkYXRhLCBwYXNzd29yZCkKICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgY2FzZSAnUFJJVkFURSBLRVknOgogICAgICBuZGF0YSA9IGFzbjEuUHJpdmF0ZUtleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICAgIHN1YnR5cGUgPSBuZGF0YS5hbGdvcml0aG0uYWxnb3JpdGhtLmpvaW4oJy4nKQogICAgICBzd2l0Y2ggKHN1YnR5cGUpIHsKICAgICAgICBjYXNlICcxLjIuODQwLjExMzU0OS4xLjEuMSc6CiAgICAgICAgICByZXR1cm4gYXNuMS5SU0FQcml2YXRlS2V5LmRlY29kZShuZGF0YS5zdWJqZWN0UHJpdmF0ZUtleSwgJ2RlcicpCiAgICAgICAgY2FzZSAnMS4yLjg0MC4xMDA0NS4yLjEnOgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY3VydmU6IG5kYXRhLmFsZ29yaXRobS5jdXJ2ZSwKICAgICAgICAgICAgcHJpdmF0ZUtleTogYXNuMS5FQ1ByaXZhdGVLZXkuZGVjb2RlKG5kYXRhLnN1YmplY3RQcml2YXRlS2V5LCAnZGVyJykucHJpdmF0ZUtleQogICAgICAgICAgfQogICAgICAgIGNhc2UgJzEuMi44NDAuMTAwNDAuNC4xJzoKICAgICAgICAgIG5kYXRhLmFsZ29yaXRobS5wYXJhbXMucHJpdl9rZXkgPSBhc24xLkRTQXBhcmFtLmRlY29kZShuZGF0YS5zdWJqZWN0UHJpdmF0ZUtleSwgJ2RlcicpCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0eXBlOiAnZHNhJywKICAgICAgICAgICAgcGFyYW1zOiBuZGF0YS5hbGdvcml0aG0ucGFyYW1zCiAgICAgICAgICB9CiAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSBpZCAnICsgc3VidHlwZSkKICAgICAgfQogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24ga2V5IHR5cGUgJyArIHR5cGUpCiAgICBjYXNlICdSU0EgUFVCTElDIEtFWSc6CiAgICAgIHJldHVybiBhc24xLlJTQVB1YmxpY0tleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICBjYXNlICdSU0EgUFJJVkFURSBLRVknOgogICAgICByZXR1cm4gYXNuMS5SU0FQcml2YXRlS2V5LmRlY29kZShkYXRhLCAnZGVyJykKICAgIGNhc2UgJ0RTQSBQUklWQVRFIEtFWSc6CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogJ2RzYScsCiAgICAgICAgcGFyYW1zOiBhc24xLkRTQVByaXZhdGVLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICB9CiAgICBjYXNlICdFQyBQUklWQVRFIEtFWSc6CiAgICAgIGRhdGEgPSBhc24xLkVDUHJpdmF0ZUtleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICAgIHJldHVybiB7CiAgICAgICAgY3VydmU6IGRhdGEucGFyYW1ldGVycy52YWx1ZSwKICAgICAgICBwcml2YXRlS2V5OiBkYXRhLnByaXZhdGVLZXkKICAgICAgfQogICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSB0eXBlICcgKyB0eXBlKQogIH0KfQpwYXJzZUtleXMuc2lnbmF0dXJlID0gYXNuMS5zaWduYXR1cmUKZnVuY3Rpb24gZGVjcnlwdCAoZGF0YSwgcGFzc3dvcmQpIHsKICB2YXIgc2FsdCA9IGRhdGEuYWxnb3JpdGhtLmRlY3J5cHQua2RlLmtkZXBhcmFtcy5zYWx0CiAgdmFyIGl0ZXJzID0gcGFyc2VJbnQoZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5rZGUua2RlcGFyYW1zLml0ZXJzLnRvU3RyaW5nKCksIDEwKQogIHZhciBhbGdvID0gYWVzaWRbZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5jaXBoZXIuYWxnby5qb2luKCcuJyldCiAgdmFyIGl2ID0gZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5jaXBoZXIuaXYKICB2YXIgY2lwaGVyVGV4dCA9IGRhdGEuc3ViamVjdFByaXZhdGVLZXkKICB2YXIga2V5bGVuID0gcGFyc2VJbnQoYWxnby5zcGxpdCgnLScpWzFdLCAxMCkgLyA4CiAgdmFyIGtleSA9IGNvbXBhdC5wYmtkZjJTeW5jKHBhc3N3b3JkLCBzYWx0LCBpdGVycywga2V5bGVuKQogIHZhciBjaXBoZXIgPSBjaXBoZXJzLmNyZWF0ZURlY2lwaGVyaXYoYWxnbywga2V5LCBpdikKICB2YXIgb3V0ID0gW10KICBvdXQucHVzaChjaXBoZXIudXBkYXRlKGNpcGhlclRleHQpKQogIG91dC5wdXNoKGNpcGhlci5maW5hbCgpKQogIHJldHVybiBCdWZmZXIuY29uY2F0KG91dCkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYWVzaWQuanNvbiI6MTM1LCIuL2FzbjEiOjEzNiwiLi9maXhQcm9jIjoxMzcsImJyb3dzZXJpZnktYWVzIjo0NywiYnVmZmVyIjo3NiwicGJrZGYyIjoxMzl9XSwxMzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBjcmVhdGVIbWFjID0gcmVxdWlyZSgnY3JlYXRlLWhtYWMnKQp2YXIgTUFYX0FMTE9DID0gTWF0aC5wb3coMiwgMzApIC0gMSAvLyBkZWZhdWx0IGluIGlvanMKCmV4cG9ydHMucGJrZGYyID0gcGJrZGYyCmZ1bmN0aW9uIHBia2RmMiAocGFzc3dvcmQsIHNhbHQsIGl0ZXJhdGlvbnMsIGtleWxlbiwgZGlnZXN0LCBjYWxsYmFjaykgewogIGlmICh0eXBlb2YgZGlnZXN0ID09PSAnZnVuY3Rpb24nKSB7CiAgICBjYWxsYmFjayA9IGRpZ2VzdAogICAgZGlnZXN0ID0gdW5kZWZpbmVkCiAgfQoKICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNhbGxiYWNrIHByb3ZpZGVkIHRvIHBia2RmMicpCiAgfQoKICB2YXIgcmVzdWx0ID0gcGJrZGYyU3luYyhwYXNzd29yZCwgc2FsdCwgaXRlcmF0aW9ucywga2V5bGVuLCBkaWdlc3QpCiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICBjYWxsYmFjayh1bmRlZmluZWQsIHJlc3VsdCkKICB9KQp9CgpleHBvcnRzLnBia2RmMlN5bmMgPSBwYmtkZjJTeW5jCmZ1bmN0aW9uIHBia2RmMlN5bmMgKHBhc3N3b3JkLCBzYWx0LCBpdGVyYXRpb25zLCBrZXlsZW4sIGRpZ2VzdCkgewogIGlmICh0eXBlb2YgaXRlcmF0aW9ucyAhPT0gJ251bWJlcicpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0l0ZXJhdGlvbnMgbm90IGEgbnVtYmVyJykKICB9CgogIGlmIChpdGVyYXRpb25zIDwgMCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQmFkIGl0ZXJhdGlvbnMnKQogIH0KCiAgaWYgKHR5cGVvZiBrZXlsZW4gIT09ICdudW1iZXInKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdLZXkgbGVuZ3RoIG5vdCBhIG51bWJlcicpCiAgfQoKICBpZiAoa2V5bGVuIDwgMCB8fCBrZXlsZW4gPiBNQVhfQUxMT0MpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JhZCBrZXkgbGVuZ3RoJykKICB9CgogIGRpZ2VzdCA9IGRpZ2VzdCB8fCAnc2hhMScKCiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIocGFzc3dvcmQpKSBwYXNzd29yZCA9IG5ldyBCdWZmZXIocGFzc3dvcmQsICdiaW5hcnknKQogIGlmICghQnVmZmVyLmlzQnVmZmVyKHNhbHQpKSBzYWx0ID0gbmV3IEJ1ZmZlcihzYWx0LCAnYmluYXJ5JykKCiAgdmFyIGhMZW4KICB2YXIgbCA9IDEKICB2YXIgREsgPSBuZXcgQnVmZmVyKGtleWxlbikKICB2YXIgYmxvY2sxID0gbmV3IEJ1ZmZlcihzYWx0Lmxlbmd0aCArIDQpCiAgc2FsdC5jb3B5KGJsb2NrMSwgMCwgMCwgc2FsdC5sZW5ndGgpCgogIHZhciByCiAgdmFyIFQKCiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gbDsgaSsrKSB7CiAgICBibG9jazEud3JpdGVVSW50MzJCRShpLCBzYWx0Lmxlbmd0aCkKICAgIHZhciBVID0gY3JlYXRlSG1hYyhkaWdlc3QsIHBhc3N3b3JkKS51cGRhdGUoYmxvY2sxKS5kaWdlc3QoKQoKICAgIGlmICghaExlbikgewogICAgICBoTGVuID0gVS5sZW5ndGgKICAgICAgVCA9IG5ldyBCdWZmZXIoaExlbikKICAgICAgbCA9IE1hdGguY2VpbChrZXlsZW4gLyBoTGVuKQogICAgICByID0ga2V5bGVuIC0gKGwgLSAxKSAqIGhMZW4KICAgIH0KCiAgICBVLmNvcHkoVCwgMCwgMCwgaExlbikKCiAgICBmb3IgKHZhciBqID0gMTsgaiA8IGl0ZXJhdGlvbnM7IGorKykgewogICAgICBVID0gY3JlYXRlSG1hYyhkaWdlc3QsIHBhc3N3b3JkKS51cGRhdGUoVSkuZGlnZXN0KCkKCiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgaExlbjsgaysrKSB7CiAgICAgICAgVFtrXSBePSBVW2tdCiAgICAgIH0KICAgIH0KCiAgICB2YXIgZGVzdFBvcyA9IChpIC0gMSkgKiBoTGVuCiAgICB2YXIgbGVuID0gKGkgPT09IGwgPyByIDogaExlbikKICAgIFQuY29weShESywgZGVzdFBvcywgMCwgbGVuKQogIH0KCiAgcmV0dXJuIERLCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjc2LCJjcmVhdGUtaG1hYyI6ODR9XSwxNDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKHByb2Nlc3MpewondXNlIHN0cmljdCc7CgppZiAoIXByb2Nlc3MudmVyc2lvbiB8fAogICAgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YwLicpID09PSAwIHx8CiAgICBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjEuJykgPT09IDAgJiYgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YxLjguJykgIT09IDApIHsKICBtb2R1bGUuZXhwb3J0cyA9IG5leHRUaWNrOwp9IGVsc2UgewogIG1vZHVsZS5leHBvcnRzID0gcHJvY2Vzcy5uZXh0VGljazsKfQoKZnVuY3Rpb24gbmV4dFRpY2soZm4pIHsKICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7CiAgdmFyIGkgPSAwOwogIHdoaWxlIChpIDwgYXJncy5sZW5ndGgpIHsKICAgIGFyZ3NbaSsrXSA9IGFyZ3VtZW50c1tpXTsKICB9CiAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2soKSB7CiAgICBmbi5hcHBseShudWxsLCBhcmdzKTsKICB9KTsKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpCn0seyJfcHJvY2VzcyI6MTQxfV0sMTQxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyCgp2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307CnZhciBxdWV1ZSA9IFtdOwp2YXIgZHJhaW5pbmcgPSBmYWxzZTsKdmFyIGN1cnJlbnRRdWV1ZTsKdmFyIHF1ZXVlSW5kZXggPSAtMTsKCmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHsKICAgIGRyYWluaW5nID0gZmFsc2U7CiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkgewogICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7CiAgICB9IGVsc2UgewogICAgICAgIHF1ZXVlSW5kZXggPSAtMTsKICAgIH0KICAgIGlmIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgICBkcmFpblF1ZXVlKCk7CiAgICB9Cn0KCmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7CiAgICBpZiAoZHJhaW5pbmcpIHsKICAgICAgICByZXR1cm47CiAgICB9CiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTsKICAgIGRyYWluaW5nID0gdHJ1ZTsKCiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoOwogICAgd2hpbGUobGVuKSB7CiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7CiAgICAgICAgcXVldWUgPSBbXTsKICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBxdWV1ZUluZGV4ID0gLTE7CiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoOwogICAgfQogICAgY3VycmVudFF1ZXVlID0gbnVsbDsKICAgIGRyYWluaW5nID0gZmFsc2U7CiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7Cn0KCnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7CiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTsKICAgICAgICB9CiAgICB9CiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpOwogICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHsKICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApOwogICAgfQp9OwoKLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0cwpmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHsKICAgIHRoaXMuZnVuID0gZnVuOwogICAgdGhpcy5hcnJheSA9IGFycmF5Owp9Ckl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpOwp9Owpwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInOwpwcm9jZXNzLmJyb3dzZXIgPSB0cnVlOwpwcm9jZXNzLmVudiA9IHt9Owpwcm9jZXNzLmFyZ3YgPSBbXTsKcHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzCnByb2Nlc3MudmVyc2lvbnMgPSB7fTsKCmZ1bmN0aW9uIG5vb3AoKSB7fQoKcHJvY2Vzcy5vbiA9IG5vb3A7CnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wOwpwcm9jZXNzLm9uY2UgPSBub29wOwpwcm9jZXNzLm9mZiA9IG5vb3A7CnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wOwpwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7CnByb2Nlc3MuZW1pdCA9IG5vb3A7Cgpwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpOwp9OwoKcHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTsKcHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHsKICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7Cn07CnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07Cgp9LHt9XSwxNDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzLnB1YmxpY0VuY3J5cHQgPSByZXF1aXJlKCcuL3B1YmxpY0VuY3J5cHQnKTsKZXhwb3J0cy5wcml2YXRlRGVjcnlwdCA9IHJlcXVpcmUoJy4vcHJpdmF0ZURlY3J5cHQnKTsKCmV4cG9ydHMucHJpdmF0ZUVuY3J5cHQgPSBmdW5jdGlvbiBwcml2YXRlRW5jcnlwdChrZXksIGJ1ZikgewogIHJldHVybiBleHBvcnRzLnB1YmxpY0VuY3J5cHQoa2V5LCBidWYsIHRydWUpOwp9OwoKZXhwb3J0cy5wdWJsaWNEZWNyeXB0ID0gZnVuY3Rpb24gcHVibGljRGVjcnlwdChrZXksIGJ1ZikgewogIHJldHVybiBleHBvcnRzLnByaXZhdGVEZWNyeXB0KGtleSwgYnVmLCB0cnVlKTsKfTsKfSx7Ii4vcHJpdmF0ZURlY3J5cHQiOjE0NCwiLi9wdWJsaWNFbmNyeXB0IjoxNDV9XSwxNDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBjcmVhdGVIYXNoID0gcmVxdWlyZSgnY3JlYXRlLWhhc2gnKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VlZCwgbGVuKSB7CiAgdmFyIHQgPSBuZXcgQnVmZmVyKCcnKTsKICB2YXIgIGkgPSAwLCBjOwogIHdoaWxlICh0Lmxlbmd0aCA8IGxlbikgewogICAgYyA9IGkyb3BzKGkrKyk7CiAgICB0ID0gQnVmZmVyLmNvbmNhdChbdCwgY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShzZWVkKS51cGRhdGUoYykuZGlnZXN0KCldKTsKICB9CiAgcmV0dXJuIHQuc2xpY2UoMCwgbGVuKTsKfTsKCmZ1bmN0aW9uIGkyb3BzKGMpIHsKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcig0KTsKICBvdXQud3JpdGVVSW50MzJCRShjLDApOwogIHJldHVybiBvdXQ7Cn0KfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzYsImNyZWF0ZS1oYXNoIjo4MX1dLDE0NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHBhcnNlS2V5cyA9IHJlcXVpcmUoJ3BhcnNlLWFzbjEnKTsKdmFyIG1nZiA9IHJlcXVpcmUoJy4vbWdmJyk7CnZhciB4b3IgPSByZXF1aXJlKCcuL3hvcicpOwp2YXIgYm4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgY3J0ID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1yc2EnKTsKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpOwp2YXIgd2l0aFB1YmxpYyA9IHJlcXVpcmUoJy4vd2l0aFB1YmxpYycpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHByaXZhdGVEZWNyeXB0KHByaXZhdGVfa2V5LCBlbmMsIHJldmVyc2UpIHsKICB2YXIgcGFkZGluZzsKICBpZiAocHJpdmF0ZV9rZXkucGFkZGluZykgewogICAgcGFkZGluZyA9IHByaXZhdGVfa2V5LnBhZGRpbmc7CiAgfSBlbHNlIGlmIChyZXZlcnNlKSB7CiAgICBwYWRkaW5nID0gMTsKICB9IGVsc2UgewogICAgcGFkZGluZyA9IDQ7CiAgfQogIAogIHZhciBrZXkgPSBwYXJzZUtleXMocHJpdmF0ZV9rZXkpOwogIHZhciBrID0ga2V5Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpOwogIGlmIChlbmMubGVuZ3RoID4gayB8fCBuZXcgYm4oZW5jKS5jbXAoa2V5Lm1vZHVsdXMpID49IDApIHsKICAgIHRocm93IG5ldyBFcnJvcignZGVjcnlwdGlvbiBlcnJvcicpOwogIH0KICB2YXIgbXNnOwogIGlmIChyZXZlcnNlKSB7CiAgICBtc2cgPSB3aXRoUHVibGljKG5ldyBibihlbmMpLCBrZXkpOwogIH0gZWxzZSB7CiAgICBtc2cgPSBjcnQoZW5jLCBrZXkpOwogIH0KICB2YXIgekJ1ZmZlciA9IG5ldyBCdWZmZXIoayAtIG1zZy5sZW5ndGgpOwogIHpCdWZmZXIuZmlsbCgwKTsKICBtc2cgPSBCdWZmZXIuY29uY2F0KFt6QnVmZmVyLCBtc2ddLCBrKTsKICBpZiAocGFkZGluZyA9PT0gNCkgewogICAgcmV0dXJuIG9hZXAoa2V5LCBtc2cpOwogIH0gZWxzZSBpZiAocGFkZGluZyA9PT0gMSkgewogICAgcmV0dXJuIHBrY3MxKGtleSwgbXNnLCByZXZlcnNlKTsKICB9IGVsc2UgaWYgKHBhZGRpbmcgPT09IDMpIHsKICAgIHJldHVybiBtc2c7CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBwYWRkaW5nJyk7CiAgfQp9OwoKZnVuY3Rpb24gb2FlcChrZXksIG1zZyl7CiAgdmFyIG4gPSBrZXkubW9kdWx1czsKICB2YXIgayA9IGtleS5tb2R1bHVzLmJ5dGVMZW5ndGgoKTsKICB2YXIgbUxlbiA9IG1zZy5sZW5ndGg7CiAgdmFyIGlIYXNoID0gY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShuZXcgQnVmZmVyKCcnKSkuZGlnZXN0KCk7CiAgdmFyIGhMZW4gPSBpSGFzaC5sZW5ndGg7CiAgdmFyIGhMZW4yID0gMiAqIGhMZW47CiAgaWYgKG1zZ1swXSAhPT0gMCkgewogICAgdGhyb3cgbmV3IEVycm9yKCdkZWNyeXB0aW9uIGVycm9yJyk7CiAgfQogIHZhciBtYXNrZWRTZWVkID0gbXNnLnNsaWNlKDEsIGhMZW4gKyAxKTsKICB2YXIgbWFza2VkRGIgPSAgbXNnLnNsaWNlKGhMZW4gKyAxKTsKICB2YXIgc2VlZCA9IHhvcihtYXNrZWRTZWVkLCBtZ2YobWFza2VkRGIsIGhMZW4pKTsKICB2YXIgZGIgPSB4b3IobWFza2VkRGIsIG1nZihzZWVkLCBrIC0gaExlbiAtIDEpKTsKICBpZiAoY29tcGFyZShpSGFzaCwgZGIuc2xpY2UoMCwgaExlbikpKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlY3J5cHRpb24gZXJyb3InKTsKICB9CiAgdmFyIGkgPSBoTGVuOwogIHdoaWxlIChkYltpXSA9PT0gMCkgewogICAgaSsrOwogIH0KICBpZiAoZGJbaSsrXSAhPT0gMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdkZWNyeXB0aW9uIGVycm9yJyk7CiAgfQogIHJldHVybiBkYi5zbGljZShpKTsKfQoKZnVuY3Rpb24gcGtjczEoa2V5LCBtc2csIHJldmVyc2UpewogIHZhciBwMSA9IG1zZy5zbGljZSgwLCAyKTsKICB2YXIgaSA9IDI7CiAgdmFyIHN0YXR1cyA9IDA7CiAgd2hpbGUgKG1zZ1tpKytdICE9PSAwKSB7CiAgICBpZiAoaSA+PSBtc2cubGVuZ3RoKSB7CiAgICAgIHN0YXR1cysrOwogICAgICBicmVhazsKICAgIH0KICB9CiAgdmFyIHBzID0gbXNnLnNsaWNlKDIsIGkgLSAxKTsKICB2YXIgcDIgPSBtc2cuc2xpY2UoaSAtIDEsIGkpOwoKICBpZiAoKHAxLnRvU3RyaW5nKCdoZXgnKSAhPT0gJzAwMDInICYmICFyZXZlcnNlKSB8fCAocDEudG9TdHJpbmcoJ2hleCcpICE9PSAnMDAwMScgJiYgcmV2ZXJzZSkpewogICAgc3RhdHVzKys7CiAgfQogIGlmIChwcy5sZW5ndGggPCA4KSB7CiAgICBzdGF0dXMrKzsKICB9CiAgaWYgKHN0YXR1cykgewogICAgdGhyb3cgbmV3IEVycm9yKCdkZWNyeXB0aW9uIGVycm9yJyk7CiAgfQogIHJldHVybiAgbXNnLnNsaWNlKGkpOwp9CmZ1bmN0aW9uIGNvbXBhcmUoYSwgYil7CiAgYSA9IG5ldyBCdWZmZXIoYSk7CiAgYiA9IG5ldyBCdWZmZXIoYik7CiAgdmFyIGRpZiA9IDA7CiAgdmFyIGxlbiA9IGEubGVuZ3RoOwogIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHsKICAgIGRpZisrOwogICAgbGVuID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKTsKICB9CiAgdmFyIGkgPSAtMTsKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBkaWYgKz0gKGFbaV0gXiBiW2ldKTsKICB9CiAgcmV0dXJuIGRpZjsKfQp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9tZ2YiOjE0MywiLi93aXRoUHVibGljIjoxNDYsIi4veG9yIjoxNDcsImJuLmpzIjo0MiwiYnJvd3NlcmlmeS1yc2EiOjYzLCJidWZmZXIiOjc2LCJjcmVhdGUtaGFzaCI6ODEsInBhcnNlLWFzbjEiOjEzOH1dLDE0NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHBhcnNlS2V5cyA9IHJlcXVpcmUoJ3BhcnNlLWFzbjEnKTsKdmFyIHJhbmRvbUJ5dGVzID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKTsKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpOwp2YXIgbWdmID0gcmVxdWlyZSgnLi9tZ2YnKTsKdmFyIHhvciA9IHJlcXVpcmUoJy4veG9yJyk7CnZhciBibiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciB3aXRoUHVibGljID0gcmVxdWlyZSgnLi93aXRoUHVibGljJyk7CnZhciBjcnQgPSByZXF1aXJlKCdicm93c2VyaWZ5LXJzYScpOwoKdmFyIGNvbnN0YW50cyA9IHsKICBSU0FfUEtDUzFfT0FFUF9QQURESU5HOiA0LAogIFJTQV9QS0NTMV9QQURESU46IDEsCiAgUlNBX05PX1BBRERJTkc6IDMKfTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcHVibGljRW5jcnlwdChwdWJsaWNfa2V5LCBtc2csIHJldmVyc2UpIHsKICB2YXIgcGFkZGluZzsKICBpZiAocHVibGljX2tleS5wYWRkaW5nKSB7CiAgICBwYWRkaW5nID0gcHVibGljX2tleS5wYWRkaW5nOwogIH0gZWxzZSBpZiAocmV2ZXJzZSkgewogICAgcGFkZGluZyA9IDE7CiAgfSBlbHNlIHsKICAgIHBhZGRpbmcgPSA0OwogIH0KICB2YXIga2V5ID0gcGFyc2VLZXlzKHB1YmxpY19rZXkpOwogIHZhciBwYWRkZWRNc2c7CiAgaWYgKHBhZGRpbmcgPT09IDQpIHsKICAgIHBhZGRlZE1zZyA9IG9hZXAoa2V5LCBtc2cpOwogIH0gZWxzZSBpZiAocGFkZGluZyA9PT0gMSkgewogICAgcGFkZGVkTXNnID0gcGtjczEoa2V5LCBtc2csIHJldmVyc2UpOwogIH0gZWxzZSBpZiAocGFkZGluZyA9PT0gMykgewogICAgcGFkZGVkTXNnID0gbmV3IGJuKG1zZyk7CiAgICBpZiAocGFkZGVkTXNnLmNtcChrZXkubW9kdWx1cykgPj0gMCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdG9vIGxvbmcgZm9yIG1vZHVsdXMnKTsKICAgIH0KICB9IGVsc2UgewogICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIHBhZGRpbmcnKTsKICB9CiAgaWYgKHJldmVyc2UpIHsKICAgIHJldHVybiBjcnQocGFkZGVkTXNnLCBrZXkpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gd2l0aFB1YmxpYyhwYWRkZWRNc2csIGtleSk7CiAgfQp9OwoKZnVuY3Rpb24gb2FlcChrZXksIG1zZyl7CiAgdmFyIGsgPSBrZXkubW9kdWx1cy5ieXRlTGVuZ3RoKCk7CiAgdmFyIG1MZW4gPSBtc2cubGVuZ3RoOwogIHZhciBpSGFzaCA9IGNyZWF0ZUhhc2goJ3NoYTEnKS51cGRhdGUobmV3IEJ1ZmZlcignJykpLmRpZ2VzdCgpOwogIHZhciBoTGVuID0gaUhhc2gubGVuZ3RoOwogIHZhciBoTGVuMiA9IDIgKiBoTGVuOwogIGlmIChtTGVuID4gayAtIGhMZW4yIC0gMikgewogICAgdGhyb3cgbmV3IEVycm9yKCdtZXNzYWdlIHRvbyBsb25nJyk7CiAgfQogIHZhciBwcyA9IG5ldyBCdWZmZXIoayAtIG1MZW4gLSBoTGVuMiAtIDIpOwogIHBzLmZpbGwoMCk7CiAgdmFyIGRibGVuID0gayAtIGhMZW4gLSAxOwogIHZhciBzZWVkID0gcmFuZG9tQnl0ZXMoaExlbik7CiAgdmFyIG1hc2tlZERiID0geG9yKEJ1ZmZlci5jb25jYXQoW2lIYXNoLCBwcywgbmV3IEJ1ZmZlcihbMV0pLCBtc2ddLCBkYmxlbiksIG1nZihzZWVkLCBkYmxlbikpOwogIHZhciBtYXNrZWRTZWVkID0geG9yKHNlZWQsIG1nZihtYXNrZWREYiwgaExlbikpOwogIHJldHVybiBuZXcgYm4oQnVmZmVyLmNvbmNhdChbbmV3IEJ1ZmZlcihbMF0pLCBtYXNrZWRTZWVkLCBtYXNrZWREYl0sIGspKTsKfQpmdW5jdGlvbiBwa2NzMShrZXksIG1zZywgcmV2ZXJzZSl7CiAgdmFyIG1MZW4gPSBtc2cubGVuZ3RoOwogIHZhciBrID0ga2V5Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpOwogIGlmIChtTGVuID4gayAtIDExKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ21lc3NhZ2UgdG9vIGxvbmcnKTsKICB9CiAgdmFyIHBzOwogIGlmIChyZXZlcnNlKSB7CiAgICBwcyA9IG5ldyBCdWZmZXIoayAtIG1MZW4gLSAzKTsKICAgIHBzLmZpbGwoMHhmZik7CiAgfSBlbHNlIHsKICAgIHBzID0gbm9uWmVybyhrIC0gbUxlbiAtIDMpOwogIH0KICByZXR1cm4gbmV3IGJuKEJ1ZmZlci5jb25jYXQoW25ldyBCdWZmZXIoWzAsIHJldmVyc2U/MToyXSksIHBzLCBuZXcgQnVmZmVyKFswXSksIG1zZ10sIGspKTsKfQpmdW5jdGlvbiBub25aZXJvKGxlbiwgY3J5cHRvKSB7CiAgdmFyIG91dCA9IG5ldyBCdWZmZXIobGVuKTsKICB2YXIgaSA9IDA7CiAgdmFyIGNhY2hlID0gcmFuZG9tQnl0ZXMobGVuKjIpOwogIHZhciBjdXIgPSAwOwogIHZhciBudW07CiAgd2hpbGUgKGkgPCBsZW4pIHsKICAgIGlmIChjdXIgPT09IGNhY2hlLmxlbmd0aCkgewogICAgICBjYWNoZSA9IHJhbmRvbUJ5dGVzKGxlbioyKTsKICAgICAgY3VyID0gMDsKICAgIH0KICAgIG51bSA9IGNhY2hlW2N1cisrXTsKICAgIGlmIChudW0pIHsKICAgICAgb3V0W2krK10gPSBudW07CiAgICB9CiAgfQogIHJldHVybiBvdXQ7Cn0KfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vbWdmIjoxNDMsIi4vd2l0aFB1YmxpYyI6MTQ2LCIuL3hvciI6MTQ3LCJibi5qcyI6NDIsImJyb3dzZXJpZnktcnNhIjo2MywiYnVmZmVyIjo3NiwiY3JlYXRlLWhhc2giOjgxLCJwYXJzZS1hc24xIjoxMzgsInJhbmRvbWJ5dGVzIjoxNDh9XSwxNDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBibiA9IHJlcXVpcmUoJ2JuLmpzJyk7CmZ1bmN0aW9uIHdpdGhQdWJsaWMocGFkZGVkTXNnLCBrZXkpIHsKICByZXR1cm4gbmV3IEJ1ZmZlcihwYWRkZWRNc2cKICAgIC50b1JlZChibi5tb250KGtleS5tb2R1bHVzKSkKICAgIC5yZWRQb3cobmV3IGJuKGtleS5wdWJsaWNFeHBvbmVudCkpCiAgICAuZnJvbVJlZCgpCiAgICAudG9BcnJheSgpKTsKfQoKbW9kdWxlLmV4cG9ydHMgPSB3aXRoUHVibGljOwp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYm4uanMiOjQyLCJidWZmZXIiOjc2fV0sMTQ3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB4b3IoYSwgYikgewogIHZhciBsZW4gPSBhLmxlbmd0aDsKICB2YXIgaSA9IC0xOwogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIGFbaV0gXj0gYltpXTsKICB9CiAgcmV0dXJuIGEKfTsKfSx7fV0sMTQ4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCxCdWZmZXIpewondXNlIHN0cmljdCcKCmZ1bmN0aW9uIG9sZEJyb3dzZXIgKCkgewogIHRocm93IG5ldyBFcnJvcignc2VjdXJlIHJhbmRvbSBudW1iZXIgZ2VuZXJhdGlvbiBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3NlclxudXNlIGNocm9tZSwgRmlyZUZveCBvciBJbnRlcm5ldCBFeHBsb3JlciAxMScpCn0KCnZhciBjcnlwdG8gPSBnbG9iYWwuY3J5cHRvIHx8IGdsb2JhbC5tc0NyeXB0bwoKaWYgKGNyeXB0byAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7CiAgbW9kdWxlLmV4cG9ydHMgPSByYW5kb21CeXRlcwp9IGVsc2UgewogIG1vZHVsZS5leHBvcnRzID0gb2xkQnJvd3Nlcgp9CgpmdW5jdGlvbiByYW5kb21CeXRlcyAoc2l6ZSwgY2IpIHsKICAvLyBwaGFudG9tanMgbmVlZHMgdG8gdGhyb3cKICBpZiAoc2l6ZSA+IDY1NTM2KSB0aHJvdyBuZXcgRXJyb3IoJ3JlcXVlc3RlZCB0b28gbWFueSByYW5kb20gYnl0ZXMnKQogIC8vIGluIGNhc2UgYnJvd3NlcmlmeSAgaXNuJ3QgdXNpbmcgdGhlIFVpbnQ4QXJyYXkgdmVyc2lvbgogIHZhciByYXdCeXRlcyA9IG5ldyBnbG9iYWwuVWludDhBcnJheShzaXplKQoKICAvLyBUaGlzIHdpbGwgbm90IHdvcmsgaW4gb2xkZXIgYnJvd3NlcnMuCiAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS93aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcwogIGlmIChzaXplID4gMCkgeyAgLy8gZ2V0UmFuZG9tVmFsdWVzIGZhaWxzIG9uIElFIGlmIHNpemUgPT0gMAogICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhyYXdCeXRlcykKICB9CiAgLy8gcGhhbnRvbWpzIGRvZXNuJ3QgbGlrZSBhIGJ1ZmZlciBiZWluZyBwYXNzZWQgaGVyZQogIHZhciBieXRlcyA9IG5ldyBCdWZmZXIocmF3Qnl0ZXMuYnVmZmVyKQoKICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIGNiKG51bGwsIGJ5dGVzKQogICAgfSkKICB9CgogIHJldHVybiBieXRlcwp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9LHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Il9wcm9jZXNzIjoxNDEsImJ1ZmZlciI6NzZ9XSwxNDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoIi4vbGliL19zdHJlYW1fZHVwbGV4LmpzIikKCn0seyIuL2xpYi9fc3RyZWFtX2R1cGxleC5qcyI6MTUwfV0sMTUwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gYSBkdXBsZXggc3RyZWFtIGlzIGp1c3QgYSBzdHJlYW0gdGhhdCBpcyBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZS4KLy8gU2luY2UgSlMgZG9lc24ndCBoYXZlIG11bHRpcGxlIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UsIHRoaXMgY2xhc3MKLy8gcHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gUmVhZGFibGUsIGFuZCB0aGVuIHBhcmFzaXRpY2FsbHkgZnJvbQovLyBXcml0YWJsZS4KCid1c2Ugc3RyaWN0JzsKCi8qPHJlcGxhY2VtZW50PiovCnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikgewogIHZhciBrZXlzID0gW107CiAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7CiAgcmV0dXJuIGtleXM7Cn0KLyo8L3JlcGxhY2VtZW50PiovCgoKbW9kdWxlLmV4cG9ydHMgPSBEdXBsZXg7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgcHJvY2Vzc05leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTsKLyo8L3JlcGxhY2VtZW50PiovCgoKCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7CnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCnZhciBSZWFkYWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV9yZWFkYWJsZScpOwp2YXIgV3JpdGFibGUgPSByZXF1aXJlKCcuL19zdHJlYW1fd3JpdGFibGUnKTsKCnV0aWwuaW5oZXJpdHMoRHVwbGV4LCBSZWFkYWJsZSk7Cgp2YXIga2V5cyA9IG9iamVjdEtleXMoV3JpdGFibGUucHJvdG90eXBlKTsKZm9yICh2YXIgdiA9IDA7IHYgPCBrZXlzLmxlbmd0aDsgdisrKSB7CiAgdmFyIG1ldGhvZCA9IGtleXNbdl07CiAgaWYgKCFEdXBsZXgucHJvdG90eXBlW21ldGhvZF0pCiAgICBEdXBsZXgucHJvdG90eXBlW21ldGhvZF0gPSBXcml0YWJsZS5wcm90b3R5cGVbbWV0aG9kXTsKfQoKZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkKICAgIHJldHVybiBuZXcgRHVwbGV4KG9wdGlvbnMpOwoKICBSZWFkYWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpOwogIFdyaXRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7CgogIGlmIChvcHRpb25zICYmIG9wdGlvbnMucmVhZGFibGUgPT09IGZhbHNlKQogICAgdGhpcy5yZWFkYWJsZSA9IGZhbHNlOwoKICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLndyaXRhYmxlID09PSBmYWxzZSkKICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTsKCiAgdGhpcy5hbGxvd0hhbGZPcGVuID0gdHJ1ZTsKICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFsbG93SGFsZk9wZW4gPT09IGZhbHNlKQogICAgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7CgogIHRoaXMub25jZSgnZW5kJywgb25lbmQpOwp9CgovLyB0aGUgbm8taGFsZi1vcGVuIGVuZm9yY2VyCmZ1bmN0aW9uIG9uZW5kKCkgewogIC8vIGlmIHdlIGFsbG93IGhhbGYtb3BlbiBzdGF0ZSwgb3IgaWYgdGhlIHdyaXRhYmxlIHNpZGUgZW5kZWQsCiAgLy8gdGhlbiB3ZSdyZSBvay4KICBpZiAodGhpcy5hbGxvd0hhbGZPcGVuIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQpCiAgICByZXR1cm47CgogIC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi4KICAvLyBCdXQgYWxsb3cgbW9yZSB3cml0ZXMgdG8gaGFwcGVuIGluIHRoaXMgdGljay4KICBwcm9jZXNzTmV4dFRpY2sob25FbmROVCwgdGhpcyk7Cn0KCmZ1bmN0aW9uIG9uRW5kTlQoc2VsZikgewogIHNlbGYuZW5kKCk7Cn0KCmZ1bmN0aW9uIGZvckVhY2ggKHhzLCBmKSB7CiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgIGYoeHNbaV0sIGkpOwogIH0KfQoKfSx7Ii4vX3N0cmVhbV9yZWFkYWJsZSI6MTUyLCIuL19zdHJlYW1fd3JpdGFibGUiOjE1NCwiY29yZS11dGlsLWlzIjo3OSwiaW5oZXJpdHMiOjEyOSwicHJvY2Vzcy1uZXh0aWNrLWFyZ3MiOjE0MH1dLDE1MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGEgcGFzc3Rocm91Z2ggc3RyZWFtLgovLyBiYXNpY2FsbHkganVzdCB0aGUgbW9zdCBtaW5pbWFsIHNvcnQgb2YgVHJhbnNmb3JtIHN0cmVhbS4KLy8gRXZlcnkgd3JpdHRlbiBjaHVuayBnZXRzIG91dHB1dCBhcy1pcy4KCid1c2Ugc3RyaWN0JzsKCm1vZHVsZS5leHBvcnRzID0gUGFzc1Rocm91Z2g7Cgp2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnLi9fc3RyZWFtX3RyYW5zZm9ybScpOwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTsKdXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKdXRpbC5pbmhlcml0cyhQYXNzVGhyb3VnaCwgVHJhbnNmb3JtKTsKCmZ1bmN0aW9uIFBhc3NUaHJvdWdoKG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUGFzc1Rocm91Z2gpKQogICAgcmV0dXJuIG5ldyBQYXNzVGhyb3VnaChvcHRpb25zKTsKCiAgVHJhbnNmb3JtLmNhbGwodGhpcywgb3B0aW9ucyk7Cn0KClBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikgewogIGNiKG51bGwsIGNodW5rKTsKfTsKCn0seyIuL19zdHJlYW1fdHJhbnNmb3JtIjoxNTMsImNvcmUtdXRpbC1pcyI6NzksImluaGVyaXRzIjoxMjl9XSwxNTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKHByb2Nlc3MpewondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlOwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIHByb2Nlc3NOZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MtbmV4dGljay1hcmdzJyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKCi8qPHJlcGxhY2VtZW50PiovCnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCgovKjxyZXBsYWNlbWVudD4qLwp2YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwovKjwvcmVwbGFjZW1lbnQ+Ki8KClJlYWRhYmxlLlJlYWRhYmxlU3RhdGUgPSBSZWFkYWJsZVN0YXRlOwoKdmFyIEVFID0gcmVxdWlyZSgnZXZlbnRzJyk7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgRUVsaXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkgewogIHJldHVybiBlbWl0dGVyLmxpc3RlbmVycyh0eXBlKS5sZW5ndGg7Cn07Ci8qPC9yZXBsYWNlbWVudD4qLwoKCgovKjxyZXBsYWNlbWVudD4qLwp2YXIgU3RyZWFtOwooZnVuY3Rpb24gKCl7dHJ5ewogIFN0cmVhbSA9IHJlcXVpcmUoJ3N0JyArICdyZWFtJyk7Cn1jYXRjaChfKXt9ZmluYWxseXsKICBpZiAoIVN0cmVhbSkKICAgIFN0cmVhbSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjsKfX0oKSkKLyo8L3JlcGxhY2VtZW50PiovCgp2YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTsKdXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKCgovKjxyZXBsYWNlbWVudD4qLwp2YXIgZGVidWdVdGlsID0gcmVxdWlyZSgndXRpbCcpOwp2YXIgZGVidWc7CmlmIChkZWJ1Z1V0aWwgJiYgZGVidWdVdGlsLmRlYnVnbG9nKSB7CiAgZGVidWcgPSBkZWJ1Z1V0aWwuZGVidWdsb2coJ3N0cmVhbScpOwp9IGVsc2UgewogIGRlYnVnID0gZnVuY3Rpb24gKCkge307Cn0KLyo8L3JlcGxhY2VtZW50PiovCgp2YXIgU3RyaW5nRGVjb2RlcjsKCnV0aWwuaW5oZXJpdHMoUmVhZGFibGUsIFN0cmVhbSk7Cgp2YXIgRHVwbGV4OwpmdW5jdGlvbiBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkgewogIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcuIFVzZWQgdG8gbWFrZSByZWFkKG4pIGlnbm9yZSBuIGFuZCB0bwogIC8vIG1ha2UgYWxsIHRoZSBidWZmZXIgbWVyZ2luZyBhbmQgbGVuZ3RoIGNoZWNrcyBnbyBhd2F5CiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7CgogIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpCiAgICB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLnJlYWRhYmxlT2JqZWN0TW9kZTsKCiAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIGl0IHN0b3BzIGNhbGxpbmcgX3JlYWQoKSB0byBmaWxsIHRoZSBidWZmZXIKICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zICJkb24ndCBjYWxsIF9yZWFkIHByZWVtcHRpdmVseSBldmVyIgogIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7CiAgdmFyIGRlZmF1bHRId20gPSB0aGlzLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDsKICB0aGlzLmhpZ2hXYXRlck1hcmsgPSAoaHdtIHx8IGh3bSA9PT0gMCkgPyBod20gOiBkZWZhdWx0SHdtOwoKICAvLyBjYXN0IHRvIGludHMuCiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gfn50aGlzLmhpZ2hXYXRlck1hcms7CgogIHRoaXMuYnVmZmVyID0gW107CiAgdGhpcy5sZW5ndGggPSAwOwogIHRoaXMucGlwZXMgPSBudWxsOwogIHRoaXMucGlwZXNDb3VudCA9IDA7CiAgdGhpcy5mbG93aW5nID0gbnVsbDsKICB0aGlzLmVuZGVkID0gZmFsc2U7CiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7CiAgdGhpcy5yZWFkaW5nID0gZmFsc2U7CgogIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LAogIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55CiAgLy8gYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgImxhdGVyIiBzaG91bGQgZ2VuZXJhbGx5IGFsc28KICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC4KICB0aGlzLnN5bmMgPSB0cnVlOwoKICAvLyB3aGVuZXZlciB3ZSByZXR1cm4gbnVsbCwgdGhlbiB3ZSBzZXQgYSBmbGFnIHRvIHNheQogIC8vIHRoYXQgd2UncmUgYXdhaXRpbmcgYSAncmVhZGFibGUnIGV2ZW50IGVtaXNzaW9uLgogIHRoaXMubmVlZFJlYWRhYmxlID0gZmFsc2U7CiAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsKICB0aGlzLnJlYWRhYmxlTGlzdGVuaW5nID0gZmFsc2U7CgogIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmcKICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuCiAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLgogIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnOwoKICAvLyB3aGVuIHBpcGluZywgd2Ugb25seSBjYXJlIGFib3V0ICdyZWFkYWJsZScgZXZlbnRzIHRoYXQgaGFwcGVuCiAgLy8gYWZ0ZXIgcmVhZCgpaW5nIGFsbCB0aGUgYnl0ZXMgYW5kIG5vdCBnZXR0aW5nIGFueSBwdXNoYmFjay4KICB0aGlzLnJhbk91dCA9IGZhbHNlOwoKICAvLyB0aGUgbnVtYmVyIG9mIHdyaXRlcnMgdGhhdCBhcmUgYXdhaXRpbmcgYSBkcmFpbiBldmVudCBpbiAucGlwZSgpcwogIHRoaXMuYXdhaXREcmFpbiA9IDA7CgogIC8vIGlmIHRydWUsIGEgbWF5YmVSZWFkTW9yZSBoYXMgYmVlbiBzY2hlZHVsZWQKICB0aGlzLnJlYWRpbmdNb3JlID0gZmFsc2U7CgogIHRoaXMuZGVjb2RlciA9IG51bGw7CiAgdGhpcy5lbmNvZGluZyA9IG51bGw7CiAgaWYgKG9wdGlvbnMuZW5jb2RpbmcpIHsKICAgIGlmICghU3RyaW5nRGVjb2RlcikKICAgICAgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7CiAgICB0aGlzLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihvcHRpb25zLmVuY29kaW5nKTsKICAgIHRoaXMuZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nOwogIH0KfQoKdmFyIER1cGxleDsKZnVuY3Rpb24gUmVhZGFibGUob3B0aW9ucykgewogIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZWFkYWJsZSkpCiAgICByZXR1cm4gbmV3IFJlYWRhYmxlKG9wdGlvbnMpOwoKICB0aGlzLl9yZWFkYWJsZVN0YXRlID0gbmV3IFJlYWRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7CgogIC8vIGxlZ2FjeQogIHRoaXMucmVhZGFibGUgPSB0cnVlOwoKICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5yZWFkID09PSAnZnVuY3Rpb24nKQogICAgdGhpcy5fcmVhZCA9IG9wdGlvbnMucmVhZDsKCiAgU3RyZWFtLmNhbGwodGhpcyk7Cn0KCi8vIE1hbnVhbGx5IHNob3ZlIHNvbWV0aGluZyBpbnRvIHRoZSByZWFkKCkgYnVmZmVyLgovLyBUaGlzIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGlnaFdhdGVyTWFyayBoYXMgbm90IGJlZW4gaGl0IHlldCwKLy8gc2ltaWxhciB0byBob3cgV3JpdGFibGUud3JpdGUoKSByZXR1cm5zIHRydWUgaWYgeW91IHNob3VsZAovLyB3cml0ZSgpIHNvbWUgbW9yZS4KUmVhZGFibGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoKICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykgewogICAgZW5jb2RpbmcgPSBlbmNvZGluZyB8fCBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7CiAgICBpZiAoZW5jb2RpbmcgIT09IHN0YXRlLmVuY29kaW5nKSB7CiAgICAgIGNodW5rID0gbmV3IEJ1ZmZlcihjaHVuaywgZW5jb2RpbmcpOwogICAgICBlbmNvZGluZyA9ICcnOwogICAgfQogIH0KCiAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgZmFsc2UpOwp9OwoKLy8gVW5zaGlmdCBzaG91bGQgKmFsd2F5cyogYmUgc29tZXRoaW5nIGRpcmVjdGx5IG91dCBvZiByZWFkKCkKUmVhZGFibGUucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbihjaHVuaykgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCAnJywgdHJ1ZSk7Cn07CgpSZWFkYWJsZS5wcm90b3R5cGUuaXNQYXVzZWQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID09PSBmYWxzZTsKfTsKCmZ1bmN0aW9uIHJlYWRhYmxlQWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBhZGRUb0Zyb250KSB7CiAgdmFyIGVyID0gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuayk7CiAgaWYgKGVyKSB7CiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CiAgfSBlbHNlIGlmIChjaHVuayA9PT0gbnVsbCkgewogICAgc3RhdGUucmVhZGluZyA9IGZhbHNlOwogICAgb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKTsKICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkgewogICAgaWYgKHN0YXRlLmVuZGVkICYmICFhZGRUb0Zyb250KSB7CiAgICAgIHZhciBlID0gbmV3IEVycm9yKCdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpOwogICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlKTsKICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kRW1pdHRlZCAmJiBhZGRUb0Zyb250KSB7CiAgICAgIHZhciBlID0gbmV3IEVycm9yKCdzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudCcpOwogICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFhZGRUb0Zyb250ICYmICFlbmNvZGluZykKICAgICAgICBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspOwoKICAgICAgaWYgKCFhZGRUb0Zyb250KQogICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKCiAgICAgIC8vIGlmIHdlIHdhbnQgdGhlIGRhdGEgbm93LCBqdXN0IGVtaXQgaXQuCiAgICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykgewogICAgICAgIHN0cmVhbS5lbWl0KCdkYXRhJywgY2h1bmspOwogICAgICAgIHN0cmVhbS5yZWFkKDApOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uCiAgICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwogICAgICAgIGlmIChhZGRUb0Zyb250KQogICAgICAgICAgc3RhdGUuYnVmZmVyLnVuc2hpZnQoY2h1bmspOwogICAgICAgIGVsc2UKICAgICAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTsKCiAgICAgICAgaWYgKHN0YXRlLm5lZWRSZWFkYWJsZSkKICAgICAgICAgIGVtaXRSZWFkYWJsZShzdHJlYW0pOwogICAgICB9CgogICAgICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpOwogICAgfQogIH0gZWxzZSBpZiAoIWFkZFRvRnJvbnQpIHsKICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKICB9CgogIHJldHVybiBuZWVkTW9yZURhdGEoc3RhdGUpOwp9CgoKLy8gaWYgaXQncyBwYXN0IHRoZSBoaWdoIHdhdGVyIG1hcmssIHdlIGNhbiBwdXNoIGluIHNvbWUgbW9yZS4KLy8gQWxzbywgaWYgd2UgaGF2ZSBubyBkYXRhIHlldCwgd2UgY2FuIHN0YW5kIHNvbWUKLy8gbW9yZSBieXRlcy4gIFRoaXMgaXMgdG8gd29yayBhcm91bmQgY2FzZXMgd2hlcmUgaHdtPTAsCi8vIHN1Y2ggYXMgdGhlIHJlcGwuICBBbHNvLCBpZiB0aGUgcHVzaCgpIHRyaWdnZXJlZCBhCi8vIHJlYWRhYmxlIGV2ZW50LCBhbmQgdGhlIHVzZXIgY2FsbGVkIHJlYWQobGFyZ2VOdW1iZXIpIHN1Y2ggdGhhdAovLyBuZWVkUmVhZGFibGUgd2FzIHNldCwgdGhlbiB3ZSBvdWdodCB0byBwdXNoIG1vcmUsIHNvIHRoYXQgYW5vdGhlcgovLyAncmVhZGFibGUnIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkLgpmdW5jdGlvbiBuZWVkTW9yZURhdGEoc3RhdGUpIHsKICByZXR1cm4gIXN0YXRlLmVuZGVkICYmCiAgICAgICAgIChzdGF0ZS5uZWVkUmVhZGFibGUgfHwKICAgICAgICAgIHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwKICAgICAgICAgIHN0YXRlLmxlbmd0aCA9PT0gMCk7Cn0KCi8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgpSZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbihlbmMpIHsKICBpZiAoIVN0cmluZ0RlY29kZXIpCiAgICBTdHJpbmdEZWNvZGVyID0gcmVxdWlyZSgnc3RyaW5nX2RlY29kZXIvJykuU3RyaW5nRGVjb2RlcjsKICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpOwogIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSBlbmM7CiAgcmV0dXJuIHRoaXM7Cn07CgovLyBEb24ndCByYWlzZSB0aGUgaHdtID4gOE1CCnZhciBNQVhfSFdNID0gMHg4MDAwMDA7CmZ1bmN0aW9uIGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pIHsKICBpZiAobiA+PSBNQVhfSFdNKSB7CiAgICBuID0gTUFYX0hXTTsKICB9IGVsc2UgewogICAgLy8gR2V0IHRoZSBuZXh0IGhpZ2hlc3QgcG93ZXIgb2YgMgogICAgbi0tOwogICAgbiB8PSBuID4+PiAxOwogICAgbiB8PSBuID4+PiAyOwogICAgbiB8PSBuID4+PiA0OwogICAgbiB8PSBuID4+PiA4OwogICAgbiB8PSBuID4+PiAxNjsKICAgIG4rKzsKICB9CiAgcmV0dXJuIG47Cn0KCmZ1bmN0aW9uIGhvd011Y2hUb1JlYWQobiwgc3RhdGUpIHsKICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKQogICAgcmV0dXJuIDA7CgogIGlmIChzdGF0ZS5vYmplY3RNb2RlKQogICAgcmV0dXJuIG4gPT09IDAgPyAwIDogMTsKCiAgaWYgKG4gPT09IG51bGwgfHwgaXNOYU4obikpIHsKICAgIC8vIG9ubHkgZmxvdyBvbmUgYnVmZmVyIGF0IGEgdGltZQogICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUuYnVmZmVyLmxlbmd0aCkKICAgICAgcmV0dXJuIHN0YXRlLmJ1ZmZlclswXS5sZW5ndGg7CiAgICBlbHNlCiAgICAgIHJldHVybiBzdGF0ZS5sZW5ndGg7CiAgfQoKICBpZiAobiA8PSAwKQogICAgcmV0dXJuIDA7CgogIC8vIElmIHdlJ3JlIGFza2luZyBmb3IgbW9yZSB0aGFuIHRoZSB0YXJnZXQgYnVmZmVyIGxldmVsLAogIC8vIHRoZW4gcmFpc2UgdGhlIHdhdGVyIG1hcmsuICBCdW1wIHVwIHRvIHRoZSBuZXh0IGhpZ2hlc3QKICAvLyBwb3dlciBvZiAyLCB0byBwcmV2ZW50IGluY3JlYXNpbmcgaXQgZXhjZXNzaXZlbHkgaW4gdGlueQogIC8vIGFtb3VudHMuCiAgaWYgKG4gPiBzdGF0ZS5oaWdoV2F0ZXJNYXJrKQogICAgc3RhdGUuaGlnaFdhdGVyTWFyayA9IGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pOwoKICAvLyBkb24ndCBoYXZlIHRoYXQgbXVjaC4gIHJldHVybiBudWxsLCB1bmxlc3Mgd2UndmUgZW5kZWQuCiAgaWYgKG4gPiBzdGF0ZS5sZW5ndGgpIHsKICAgIGlmICghc3RhdGUuZW5kZWQpIHsKICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgICAgcmV0dXJuIDA7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc3RhdGUubGVuZ3RoOwogICAgfQogIH0KCiAgcmV0dXJuIG47Cn0KCi8vIHlvdSBjYW4gb3ZlcnJpZGUgZWl0aGVyIHRoaXMgbWV0aG9kLCBvciB0aGUgYXN5bmMgX3JlYWQobikgYmVsb3cuClJlYWRhYmxlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24obikgewogIGRlYnVnKCdyZWFkJywgbik7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICB2YXIgbk9yaWcgPSBuOwoKICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPiAwKQogICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7CgogIC8vIGlmIHdlJ3JlIGRvaW5nIHJlYWQoMCkgdG8gdHJpZ2dlciBhIHJlYWRhYmxlIGV2ZW50LCBidXQgd2UKICAvLyBhbHJlYWR5IGhhdmUgYSBidW5jaCBvZiBkYXRhIGluIHRoZSBidWZmZXIsIHRoZW4ganVzdCB0cmlnZ2VyCiAgLy8gdGhlICdyZWFkYWJsZScgZXZlbnQgYW5kIG1vdmUgb24uCiAgaWYgKG4gPT09IDAgJiYKICAgICAgc3RhdGUubmVlZFJlYWRhYmxlICYmCiAgICAgIChzdGF0ZS5sZW5ndGggPj0gc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5lbmRlZCkpIHsKICAgIGRlYnVnKCdyZWFkOiBlbWl0UmVhZGFibGUnLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTsKICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpCiAgICAgIGVuZFJlYWRhYmxlKHRoaXMpOwogICAgZWxzZQogICAgICBlbWl0UmVhZGFibGUodGhpcyk7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIG4gPSBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKTsKCiAgLy8gaWYgd2UndmUgZW5kZWQsIGFuZCB3ZSdyZSBub3cgY2xlYXIsIHRoZW4gZmluaXNoIGl0IHVwLgogIGlmIChuID09PSAwICYmIHN0YXRlLmVuZGVkKSB7CiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKQogICAgICBlbmRSZWFkYWJsZSh0aGlzKTsKICAgIHJldHVybiBudWxsOwogIH0KCiAgLy8gQWxsIHRoZSBhY3R1YWwgY2h1bmsgZ2VuZXJhdGlvbiBsb2dpYyBuZWVkcyB0byBiZQogIC8vICpiZWxvdyogdGhlIGNhbGwgdG8gX3JlYWQuICBUaGUgcmVhc29uIGlzIHRoYXQgaW4gY2VydGFpbgogIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWQKICAvLyBtYXkgYmUgYSBjb21wbGV0ZWx5IHN5bmNocm9ub3VzIG9wZXJhdGlvbiB3aGljaCBtYXkgY2hhbmdlCiAgLy8gdGhlIHN0YXRlIG9mIHRoZSByZWFkIGJ1ZmZlciwgcHJvdmlkaW5nIGVub3VnaCBkYXRhIHdoZW4KICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC4KICAvLwogIC8vIFNvLCB0aGUgc3RlcHMgYXJlOgogIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG8KICAvLyBhIHJlYWQgZnJvbSB0aGUgYnVmZmVyLgogIC8vCiAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC4KICAvLyBOb3RlIHRoYXQgdGhpcyBtYXkgYmUgYXN5bmNocm9ub3VzLCBvciBzeW5jaHJvbm91cy4gIFllcywgaXQgaXMKICAvLyBkZWVwbHkgdWdseSB0byB3cml0ZSBBUElzIHRoaXMgd2F5LCBidXQgdGhhdCBzdGlsbCBkb2Vzbid0IG1lYW4KICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlCiAgLy8gZGVzaWduZWQgdG8gYmUgc3luYy9hc3luYyBhZ25vc3RpYy4KICAvLyBUYWtlIG5vdGUgaWYgdGhlIF9yZWFkIGNhbGwgaXMgc3luYyBvciBhc3luYyAoaWUsIGlmIHRoZSByZWFkIGNhbGwKICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0CiAgLy8gJ3JlYWRhYmxlJyBldGMuCiAgLy8KICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uCgogIC8vIGlmIHdlIG5lZWQgYSByZWFkYWJsZSBldmVudCwgdGhlbiB3ZSBuZWVkIHRvIGRvIHNvbWUgcmVhZGluZy4KICB2YXIgZG9SZWFkID0gc3RhdGUubmVlZFJlYWRhYmxlOwogIGRlYnVnKCduZWVkIHJlYWRhYmxlJywgZG9SZWFkKTsKCiAgLy8gaWYgd2UgY3VycmVudGx5IGhhdmUgbGVzcyB0aGFuIHRoZSBoaWdoV2F0ZXJNYXJrLCB0aGVuIGFsc28gcmVhZCBzb21lCiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCB8fCBzdGF0ZS5sZW5ndGggLSBuIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykgewogICAgZG9SZWFkID0gdHJ1ZTsKICAgIGRlYnVnKCdsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFyaycsIGRvUmVhZCk7CiAgfQoKICAvLyBob3dldmVyLCBpZiB3ZSd2ZSBlbmRlZCwgdGhlbiB0aGVyZSdzIG5vIHBvaW50LCBhbmQgaWYgd2UncmUgYWxyZWFkeQogIC8vIHJlYWRpbmcsIHRoZW4gaXQncyB1bm5lY2Vzc2FyeS4KICBpZiAoc3RhdGUuZW5kZWQgfHwgc3RhdGUucmVhZGluZykgewogICAgZG9SZWFkID0gZmFsc2U7CiAgICBkZWJ1ZygncmVhZGluZyBvciBlbmRlZCcsIGRvUmVhZCk7CiAgfQoKICBpZiAoZG9SZWFkKSB7CiAgICBkZWJ1ZygnZG8gcmVhZCcpOwogICAgc3RhdGUucmVhZGluZyA9IHRydWU7CiAgICBzdGF0ZS5zeW5jID0gdHJ1ZTsKICAgIC8vIGlmIHRoZSBsZW5ndGggaXMgY3VycmVudGx5IHplcm8sIHRoZW4gd2UgKm5lZWQqIGEgcmVhZGFibGUgZXZlbnQuCiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKQogICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwogICAgLy8gY2FsbCBpbnRlcm5hbCByZWFkIG1ldGhvZAogICAgdGhpcy5fcmVhZChzdGF0ZS5oaWdoV2F0ZXJNYXJrKTsKICAgIHN0YXRlLnN5bmMgPSBmYWxzZTsKICB9CgogIC8vIElmIF9yZWFkIHB1c2hlZCBkYXRhIHN5bmNocm9ub3VzbHksIHRoZW4gYHJlYWRpbmdgIHdpbGwgYmUgZmFsc2UsCiAgLy8gYW5kIHdlIG5lZWQgdG8gcmUtZXZhbHVhdGUgaG93IG11Y2ggZGF0YSB3ZSBjYW4gcmV0dXJuIHRvIHRoZSB1c2VyLgogIGlmIChkb1JlYWQgJiYgIXN0YXRlLnJlYWRpbmcpCiAgICBuID0gaG93TXVjaFRvUmVhZChuT3JpZywgc3RhdGUpOwoKICB2YXIgcmV0OwogIGlmIChuID4gMCkKICAgIHJldCA9IGZyb21MaXN0KG4sIHN0YXRlKTsKICBlbHNlCiAgICByZXQgPSBudWxsOwoKICBpZiAocmV0ID09PSBudWxsKSB7CiAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwogICAgbiA9IDA7CiAgfQoKICBzdGF0ZS5sZW5ndGggLT0gbjsKCiAgLy8gSWYgd2UgaGF2ZSBub3RoaW5nIGluIHRoZSBidWZmZXIsIHRoZW4gd2Ugd2FudCB0byBrbm93CiAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLgogIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgIXN0YXRlLmVuZGVkKQogICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKCiAgLy8gSWYgd2UgdHJpZWQgdG8gcmVhZCgpIHBhc3QgdGhlIEVPRiwgdGhlbiBlbWl0IGVuZCBvbiB0aGUgbmV4dCB0aWNrLgogIGlmIChuT3JpZyAhPT0gbiAmJiBzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApCiAgICBlbmRSZWFkYWJsZSh0aGlzKTsKCiAgaWYgKHJldCAhPT0gbnVsbCkKICAgIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7CgogIHJldHVybiByZXQ7Cn07CgpmdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7CiAgdmFyIGVyID0gbnVsbDsKICBpZiAoIShCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSAmJgogICAgICB0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmCiAgICAgIGNodW5rICE9PSBudWxsICYmCiAgICAgIGNodW5rICE9PSB1bmRlZmluZWQgJiYKICAgICAgIXN0YXRlLm9iamVjdE1vZGUpIHsKICAgIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpOwogIH0KICByZXR1cm4gZXI7Cn0KCgpmdW5jdGlvbiBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpIHsKICBpZiAoc3RhdGUuZW5kZWQpIHJldHVybjsKICBpZiAoc3RhdGUuZGVjb2RlcikgewogICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTsKICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHsKICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspOwogICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CiAgICB9CiAgfQogIHN0YXRlLmVuZGVkID0gdHJ1ZTsKCiAgLy8gZW1pdCAncmVhZGFibGUnIG5vdyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBwaWNrZWQgdXAuCiAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7Cn0KCi8vIERvbid0IGVtaXQgcmVhZGFibGUgcmlnaHQgYXdheSBpbiBzeW5jIG1vZGUsIGJlY2F1c2UgdGhpcyBjYW4gdHJpZ2dlcgovLyBhbm90aGVyIHJlYWQoKSBjYWxsID0+IHN0YWNrIG92ZXJmbG93LiAgVGhpcyB3YXksIGl0IG1pZ2h0IHRyaWdnZXIKLy8gYSBuZXh0VGljayByZWN1cnNpb24gd2FybmluZywgYnV0IHRoYXQncyBub3Qgc28gYmFkLgpmdW5jdGlvbiBlbWl0UmVhZGFibGUoc3RyZWFtKSB7CiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwogIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlOwogIGlmICghc3RhdGUuZW1pdHRlZFJlYWRhYmxlKSB7CiAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlJywgc3RhdGUuZmxvd2luZyk7CiAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSB0cnVlOwogICAgaWYgKHN0YXRlLnN5bmMpCiAgICAgIHByb2Nlc3NOZXh0VGljayhlbWl0UmVhZGFibGVfLCBzdHJlYW0pOwogICAgZWxzZQogICAgICBlbWl0UmVhZGFibGVfKHN0cmVhbSk7CiAgfQp9CgpmdW5jdGlvbiBlbWl0UmVhZGFibGVfKHN0cmVhbSkgewogIGRlYnVnKCdlbWl0IHJlYWRhYmxlJyk7CiAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7CiAgZmxvdyhzdHJlYW0pOwp9CgoKLy8gYXQgdGhpcyBwb2ludCwgdGhlIHVzZXIgaGFzIHByZXN1bWFibHkgc2VlbiB0aGUgJ3JlYWRhYmxlJyBldmVudCwKLy8gYW5kIGNhbGxlZCByZWFkKCkgdG8gY29uc3VtZSBzb21lIGRhdGEuICB0aGF0IG1heSBoYXZlIHRyaWdnZXJlZAovLyBpbiB0dXJuIGFub3RoZXIgX3JlYWQobikgY2FsbCwgaW4gd2hpY2ggY2FzZSByZWFkaW5nID0gdHJ1ZSBpZgovLyBpdCdzIGluIHByb2dyZXNzLgovLyBIb3dldmVyLCBpZiB3ZSdyZSBub3QgZW5kZWQsIG9yIHJlYWRpbmcsIGFuZCB0aGUgbGVuZ3RoIDwgaHdtLAovLyB0aGVuIGdvIGFoZWFkIGFuZCB0cnkgdG8gcmVhZCBzb21lIG1vcmUgcHJlZW1wdGl2ZWx5LgpmdW5jdGlvbiBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpIHsKICBpZiAoIXN0YXRlLnJlYWRpbmdNb3JlKSB7CiAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IHRydWU7CiAgICBwcm9jZXNzTmV4dFRpY2sobWF5YmVSZWFkTW9yZV8sIHN0cmVhbSwgc3RhdGUpOwogIH0KfQoKZnVuY3Rpb24gbWF5YmVSZWFkTW9yZV8oc3RyZWFtLCBzdGF0ZSkgewogIHZhciBsZW4gPSBzdGF0ZS5sZW5ndGg7CiAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJgogICAgICAgICBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7CiAgICBkZWJ1ZygnbWF5YmVSZWFkTW9yZSByZWFkIDAnKTsKICAgIHN0cmVhbS5yZWFkKDApOwogICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKQogICAgICAvLyBkaWRuJ3QgZ2V0IGFueSBkYXRhLCBzdG9wIHNwaW5uaW5nLgogICAgICBicmVhazsKICAgIGVsc2UKICAgICAgbGVuID0gc3RhdGUubGVuZ3RoOwogIH0KICBzdGF0ZS5yZWFkaW5nTW9yZSA9IGZhbHNlOwp9CgovLyBhYnN0cmFjdCBtZXRob2QuICB0byBiZSBvdmVycmlkZGVuIGluIHNwZWNpZmljIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuCi8vIGNhbGwgY2IoZXIsIGRhdGEpIHdoZXJlIGRhdGEgaXMgPD0gbiBpbiBsZW5ndGguCi8vIGZvciB2aXJ0dWFsIChub24tc3RyaW5nLCBub24tYnVmZmVyKSBzdHJlYW1zLCAibGVuZ3RoIiBpcyBzb21ld2hhdAovLyBhcmJpdHJhcnksIGFuZCBwZXJoYXBzIG5vdCB2ZXJ5IG1lYW5pbmdmdWwuClJlYWRhYmxlLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uKG4pIHsKICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKSk7Cn07CgpSZWFkYWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIHBpcGVPcHRzKSB7CiAgdmFyIHNyYyA9IHRoaXM7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCiAgc3dpdGNoIChzdGF0ZS5waXBlc0NvdW50KSB7CiAgICBjYXNlIDA6CiAgICAgIHN0YXRlLnBpcGVzID0gZGVzdDsKICAgICAgYnJlYWs7CiAgICBjYXNlIDE6CiAgICAgIHN0YXRlLnBpcGVzID0gW3N0YXRlLnBpcGVzLCBkZXN0XTsKICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICBzdGF0ZS5waXBlcy5wdXNoKGRlc3QpOwogICAgICBicmVhazsKICB9CiAgc3RhdGUucGlwZXNDb3VudCArPSAxOwogIGRlYnVnKCdwaXBlIGNvdW50PSVkIG9wdHM9JWonLCBzdGF0ZS5waXBlc0NvdW50LCBwaXBlT3B0cyk7CgogIHZhciBkb0VuZCA9ICghcGlwZU9wdHMgfHwgcGlwZU9wdHMuZW5kICE9PSBmYWxzZSkgJiYKICAgICAgICAgICAgICBkZXN0ICE9PSBwcm9jZXNzLnN0ZG91dCAmJgogICAgICAgICAgICAgIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyOwoKICB2YXIgZW5kRm4gPSBkb0VuZCA/IG9uZW5kIDogY2xlYW51cDsKICBpZiAoc3RhdGUuZW5kRW1pdHRlZCkKICAgIHByb2Nlc3NOZXh0VGljayhlbmRGbik7CiAgZWxzZQogICAgc3JjLm9uY2UoJ2VuZCcsIGVuZEZuKTsKCiAgZGVzdC5vbigndW5waXBlJywgb251bnBpcGUpOwogIGZ1bmN0aW9uIG9udW5waXBlKHJlYWRhYmxlKSB7CiAgICBkZWJ1Zygnb251bnBpcGUnKTsKICAgIGlmIChyZWFkYWJsZSA9PT0gc3JjKSB7CiAgICAgIGNsZWFudXAoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG9uZW5kKCkgewogICAgZGVidWcoJ29uZW5kJyk7CiAgICBkZXN0LmVuZCgpOwogIH0KCiAgLy8gd2hlbiB0aGUgZGVzdCBkcmFpbnMsIGl0IHJlZHVjZXMgdGhlIGF3YWl0RHJhaW4gY291bnRlcgogIC8vIG9uIHRoZSBzb3VyY2UuICBUaGlzIHdvdWxkIGJlIG1vcmUgZWxlZ2FudCB3aXRoIGEgLm9uY2UoKQogIC8vIGhhbmRsZXIgaW4gZmxvdygpLCBidXQgYWRkaW5nIGFuZCByZW1vdmluZyByZXBlYXRlZGx5IGlzCiAgLy8gdG9vIHNsb3cuCiAgdmFyIG9uZHJhaW4gPSBwaXBlT25EcmFpbihzcmMpOwogIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7CgogIHZhciBjbGVhbmVkVXAgPSBmYWxzZTsKICBmdW5jdGlvbiBjbGVhbnVwKCkgewogICAgZGVidWcoJ2NsZWFudXAnKTsKICAgIC8vIGNsZWFudXAgZXZlbnQgaGFuZGxlcnMgb25jZSB0aGUgcGlwZSBpcyBicm9rZW4KICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ3VucGlwZScsIG9udW5waXBlKTsKICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpOwogICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBjbGVhbnVwKTsKICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uZGF0YSk7CgogICAgY2xlYW5lZFVwID0gdHJ1ZTsKCiAgICAvLyBpZiB0aGUgcmVhZGVyIGlzIHdhaXRpbmcgZm9yIGEgZHJhaW4gZXZlbnQgZnJvbSB0aGlzCiAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnQKICAgIC8vIGZsb3dpbmcgYWdhaW4uCiAgICAvLyBTbywgaWYgdGhpcyBpcyBhd2FpdGluZyBhIGRyYWluLCB0aGVuIHdlIGp1c3QgY2FsbCBpdCBub3cuCiAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuCiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiAmJgogICAgICAgICghZGVzdC5fd3JpdGFibGVTdGF0ZSB8fCBkZXN0Ll93cml0YWJsZVN0YXRlLm5lZWREcmFpbikpCiAgICAgIG9uZHJhaW4oKTsKICB9CgogIHNyYy5vbignZGF0YScsIG9uZGF0YSk7CiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7CiAgICBkZWJ1Zygnb25kYXRhJyk7CiAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7CiAgICBpZiAoZmFsc2UgPT09IHJldCkgewogICAgICAvLyBJZiB0aGUgdXNlciB1bnBpcGVkIGR1cmluZyBgZGVzdC53cml0ZSgpYCwgaXQgaXMgcG9zc2libGUKICAgICAgLy8gdG8gZ2V0IHN0dWNrIGluIGEgcGVybWFuZW50bHkgcGF1c2VkIHN0YXRlIGlmIHRoYXQgd3JpdGUKICAgICAgLy8gYWxzbyByZXR1cm5lZCBmYWxzZS4KICAgICAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEgJiYKICAgICAgICAgIHN0YXRlLnBpcGVzWzBdID09PSBkZXN0ICYmCiAgICAgICAgICBzcmMubGlzdGVuZXJDb3VudCgnZGF0YScpID09PSAxICYmCiAgICAgICAgICAhY2xlYW5lZFVwKSB7CiAgICAgICAgZGVidWcoJ2ZhbHNlIHdyaXRlIHJlc3BvbnNlLCBwYXVzZScsIHNyYy5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKTsKICAgICAgICBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbisrOwogICAgICB9CiAgICAgIHNyYy5wYXVzZSgpOwogICAgfQogIH0KCiAgLy8gaWYgdGhlIGRlc3QgaGFzIGFuIGVycm9yLCB0aGVuIHN0b3AgcGlwaW5nIGludG8gaXQuCiAgLy8gaG93ZXZlciwgZG9uJ3Qgc3VwcHJlc3MgdGhlIHRocm93aW5nIGJlaGF2aW9yIGZvciB0aGlzLgogIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHsKICAgIGRlYnVnKCdvbmVycm9yJywgZXIpOwogICAgdW5waXBlKCk7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpOwogICAgaWYgKEVFbGlzdGVuZXJDb3VudChkZXN0LCAnZXJyb3InKSA9PT0gMCkKICAgICAgZGVzdC5lbWl0KCdlcnJvcicsIGVyKTsKICB9CiAgLy8gVGhpcyBpcyBhIGJydXRhbGx5IHVnbHkgaGFjayB0byBtYWtlIHN1cmUgdGhhdCBvdXIgZXJyb3IgaGFuZGxlcgogIC8vIGlzIGF0dGFjaGVkIGJlZm9yZSBhbnkgdXNlcmxhbmQgb25lcy4gIE5FVkVSIERPIFRISVMuCiAgaWYgKCFkZXN0Ll9ldmVudHMgfHwgIWRlc3QuX2V2ZW50cy5lcnJvcikKICAgIGRlc3Qub24oJ2Vycm9yJywgb25lcnJvcik7CiAgZWxzZSBpZiAoaXNBcnJheShkZXN0Ll9ldmVudHMuZXJyb3IpKQogICAgZGVzdC5fZXZlbnRzLmVycm9yLnVuc2hpZnQob25lcnJvcik7CiAgZWxzZQogICAgZGVzdC5fZXZlbnRzLmVycm9yID0gW29uZXJyb3IsIGRlc3QuX2V2ZW50cy5lcnJvcl07CgoKICAvLyBCb3RoIGNsb3NlIGFuZCBmaW5pc2ggc2hvdWxkIHRyaWdnZXIgdW5waXBlLCBidXQgb25seSBvbmNlLgogIGZ1bmN0aW9uIG9uY2xvc2UoKSB7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7CiAgICB1bnBpcGUoKTsKICB9CiAgZGVzdC5vbmNlKCdjbG9zZScsIG9uY2xvc2UpOwogIGZ1bmN0aW9uIG9uZmluaXNoKCkgewogICAgZGVidWcoJ29uZmluaXNoJyk7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpOwogICAgdW5waXBlKCk7CiAgfQogIGRlc3Qub25jZSgnZmluaXNoJywgb25maW5pc2gpOwoKICBmdW5jdGlvbiB1bnBpcGUoKSB7CiAgICBkZWJ1ZygndW5waXBlJyk7CiAgICBzcmMudW5waXBlKGRlc3QpOwogIH0KCiAgLy8gdGVsbCB0aGUgZGVzdCB0aGF0IGl0J3MgYmVpbmcgcGlwZWQgdG8KICBkZXN0LmVtaXQoJ3BpcGUnLCBzcmMpOwoKICAvLyBzdGFydCB0aGUgZmxvdyBpZiBpdCBoYXNuJ3QgYmVlbiBzdGFydGVkIGFscmVhZHkuCiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7CiAgICBkZWJ1ZygncGlwZSByZXN1bWUnKTsKICAgIHNyYy5yZXN1bWUoKTsKICB9CgogIHJldHVybiBkZXN0Owp9OwoKZnVuY3Rpb24gcGlwZU9uRHJhaW4oc3JjKSB7CiAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgdmFyIHN0YXRlID0gc3JjLl9yZWFkYWJsZVN0YXRlOwogICAgZGVidWcoJ3BpcGVPbkRyYWluJywgc3RhdGUuYXdhaXREcmFpbik7CiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbikKICAgICAgc3RhdGUuYXdhaXREcmFpbi0tOwogICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gPT09IDAgJiYgRUVsaXN0ZW5lckNvdW50KHNyYywgJ2RhdGEnKSkgewogICAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsKICAgICAgZmxvdyhzcmMpOwogICAgfQogIH07Cn0KCgpSZWFkYWJsZS5wcm90b3R5cGUudW5waXBlID0gZnVuY3Rpb24oZGVzdCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgogIC8vIGlmIHdlJ3JlIG5vdCBwaXBpbmcgYW55d2hlcmUsIHRoZW4gZG8gbm90aGluZy4KICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMCkKICAgIHJldHVybiB0aGlzOwoKICAvLyBqdXN0IG9uZSBkZXN0aW5hdGlvbi4gIG1vc3QgY29tbW9uIGNhc2UuCiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHsKICAgIC8vIHBhc3NlZCBpbiBvbmUsIGJ1dCBpdCdzIG5vdCB0aGUgcmlnaHQgb25lLgogICAgaWYgKGRlc3QgJiYgZGVzdCAhPT0gc3RhdGUucGlwZXMpCiAgICAgIHJldHVybiB0aGlzOwoKICAgIGlmICghZGVzdCkKICAgICAgZGVzdCA9IHN0YXRlLnBpcGVzOwoKICAgIC8vIGdvdCBhIG1hdGNoLgogICAgc3RhdGUucGlwZXMgPSBudWxsOwogICAgc3RhdGUucGlwZXNDb3VudCA9IDA7CiAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7CiAgICBpZiAoZGVzdCkKICAgICAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLy8gc2xvdyBjYXNlLiBtdWx0aXBsZSBwaXBlIGRlc3RpbmF0aW9ucy4KCiAgaWYgKCFkZXN0KSB7CiAgICAvLyByZW1vdmUgYWxsLgogICAgdmFyIGRlc3RzID0gc3RhdGUucGlwZXM7CiAgICB2YXIgbGVuID0gc3RhdGUucGlwZXNDb3VudDsKICAgIHN0YXRlLnBpcGVzID0gbnVsbDsKICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwOwogICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspCiAgICAgIGRlc3RzW2ldLmVtaXQoJ3VucGlwZScsIHRoaXMpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvLyB0cnkgdG8gZmluZCB0aGUgcmlnaHQgb25lLgogIHZhciBpID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7CiAgaWYgKGkgPT09IC0xKQogICAgcmV0dXJuIHRoaXM7CgogIHN0YXRlLnBpcGVzLnNwbGljZShpLCAxKTsKICBzdGF0ZS5waXBlc0NvdW50IC09IDE7CiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpCiAgICBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdOwoKICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMpOwoKICByZXR1cm4gdGhpczsKfTsKCi8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3IKLy8gRW5zdXJlIHJlYWRhYmxlIGxpc3RlbmVycyBldmVudHVhbGx5IGdldCBzb21ldGhpbmcKUmVhZGFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24oZXYsIGZuKSB7CiAgdmFyIHJlcyA9IFN0cmVhbS5wcm90b3R5cGUub24uY2FsbCh0aGlzLCBldiwgZm4pOwoKICAvLyBJZiBsaXN0ZW5pbmcgdG8gZGF0YSwgYW5kIGl0IGhhcyBub3QgZXhwbGljaXRseSBiZWVuIHBhdXNlZCwKICAvLyB0aGVuIGNhbGwgcmVzdW1lIHRvIHN0YXJ0IHRoZSBmbG93IG9mIGRhdGEgb24gdGhlIG5leHQgdGljay4KICBpZiAoZXYgPT09ICdkYXRhJyAmJiBmYWxzZSAhPT0gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKSB7CiAgICB0aGlzLnJlc3VtZSgpOwogIH0KCiAgaWYgKGV2ID09PSAncmVhZGFibGUnICYmIHRoaXMucmVhZGFibGUpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgICBpZiAoIXN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nKSB7CiAgICAgIHN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nID0gdHJ1ZTsKICAgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7CiAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CiAgICAgIGlmICghc3RhdGUucmVhZGluZykgewogICAgICAgIHByb2Nlc3NOZXh0VGljayhuUmVhZGluZ05leHRUaWNrLCB0aGlzKTsKICAgICAgfSBlbHNlIGlmIChzdGF0ZS5sZW5ndGgpIHsKICAgICAgICBlbWl0UmVhZGFibGUodGhpcywgc3RhdGUpOwogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gcmVzOwp9OwpSZWFkYWJsZS5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBSZWFkYWJsZS5wcm90b3R5cGUub247CgpmdW5jdGlvbiBuUmVhZGluZ05leHRUaWNrKHNlbGYpIHsKICBkZWJ1ZygncmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwJyk7CiAgc2VsZi5yZWFkKDApOwp9CgovLyBwYXVzZSgpIGFuZCByZXN1bWUoKSBhcmUgcmVtbmFudHMgb2YgdGhlIGxlZ2FjeSByZWFkYWJsZSBzdHJlYW0gQVBJCi8vIElmIHRoZSB1c2VyIHVzZXMgdGhlbSwgdGhlbiBzd2l0Y2ggaW50byBvbGQgbW9kZS4KUmVhZGFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uKCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7CiAgICBkZWJ1ZygncmVzdW1lJyk7CiAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsKICAgIHJlc3VtZSh0aGlzLCBzdGF0ZSk7CiAgfQogIHJldHVybiB0aGlzOwp9OwoKZnVuY3Rpb24gcmVzdW1lKHN0cmVhbSwgc3RhdGUpIHsKICBpZiAoIXN0YXRlLnJlc3VtZVNjaGVkdWxlZCkgewogICAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gdHJ1ZTsKICAgIHByb2Nlc3NOZXh0VGljayhyZXN1bWVfLCBzdHJlYW0sIHN0YXRlKTsKICB9Cn0KCmZ1bmN0aW9uIHJlc3VtZV8oc3RyZWFtLCBzdGF0ZSkgewogIGlmICghc3RhdGUucmVhZGluZykgewogICAgZGVidWcoJ3Jlc3VtZSByZWFkIDAnKTsKICAgIHN0cmVhbS5yZWFkKDApOwogIH0KCiAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7CiAgc3RyZWFtLmVtaXQoJ3Jlc3VtZScpOwogIGZsb3coc3RyZWFtKTsKICBpZiAoc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUucmVhZGluZykKICAgIHN0cmVhbS5yZWFkKDApOwp9CgpSZWFkYWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpIHsKICBkZWJ1ZygnY2FsbCBwYXVzZSBmbG93aW5nPSVqJywgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKTsKICBpZiAoZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykgewogICAgZGVidWcoJ3BhdXNlJyk7CiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPSBmYWxzZTsKICAgIHRoaXMuZW1pdCgncGF1c2UnKTsKICB9CiAgcmV0dXJuIHRoaXM7Cn07CgpmdW5jdGlvbiBmbG93KHN0cmVhbSkgewogIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKICBkZWJ1ZygnZmxvdycsIHN0YXRlLmZsb3dpbmcpOwogIGlmIChzdGF0ZS5mbG93aW5nKSB7CiAgICBkbyB7CiAgICAgIHZhciBjaHVuayA9IHN0cmVhbS5yZWFkKCk7CiAgICB9IHdoaWxlIChudWxsICE9PSBjaHVuayAmJiBzdGF0ZS5mbG93aW5nKTsKICB9Cn0KCi8vIHdyYXAgYW4gb2xkLXN0eWxlIHN0cmVhbSBhcyB0aGUgYXN5bmMgZGF0YSBzb3VyY2UuCi8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS4KLy8gSXQgaXMgYW4gdWdseSB1bmZvcnR1bmF0ZSBtZXNzIG9mIGhpc3RvcnkuClJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24oc3RyZWFtKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICB2YXIgcGF1c2VkID0gZmFsc2U7CgogIHZhciBzZWxmID0gdGhpczsKICBzdHJlYW0ub24oJ2VuZCcsIGZ1bmN0aW9uKCkgewogICAgZGVidWcoJ3dyYXBwZWQgZW5kJyk7CiAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhc3RhdGUuZW5kZWQpIHsKICAgICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTsKICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkKICAgICAgICBzZWxmLnB1c2goY2h1bmspOwogICAgfQoKICAgIHNlbGYucHVzaChudWxsKTsKICB9KTsKCiAgc3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24oY2h1bmspIHsKICAgIGRlYnVnKCd3cmFwcGVkIGRhdGEnKTsKICAgIGlmIChzdGF0ZS5kZWNvZGVyKQogICAgICBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspOwoKICAgIC8vIGRvbid0IHNraXAgb3ZlciBmYWxzeSB2YWx1ZXMgaW4gb2JqZWN0TW9kZQogICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgJiYgKGNodW5rID09PSBudWxsIHx8IGNodW5rID09PSB1bmRlZmluZWQpKQogICAgICByZXR1cm47CiAgICBlbHNlIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJiAoIWNodW5rIHx8ICFjaHVuay5sZW5ndGgpKQogICAgICByZXR1cm47CgogICAgdmFyIHJldCA9IHNlbGYucHVzaChjaHVuayk7CiAgICBpZiAoIXJldCkgewogICAgICBwYXVzZWQgPSB0cnVlOwogICAgICBzdHJlYW0ucGF1c2UoKTsKICAgIH0KICB9KTsKCiAgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLgogIC8vIGltcG9ydGFudCB3aGVuIHdyYXBwaW5nIGZpbHRlcnMgYW5kIGR1cGxleGVzLgogIGZvciAodmFyIGkgaW4gc3RyZWFtKSB7CiAgICBpZiAodGhpc1tpXSA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzdHJlYW1baV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgdGhpc1tpXSA9IGZ1bmN0aW9uKG1ldGhvZCkgeyByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHN0cmVhbVttZXRob2RdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTsKICAgICAgfTsgfShpKTsKICAgIH0KICB9CgogIC8vIHByb3h5IGNlcnRhaW4gaW1wb3J0YW50IGV2ZW50cy4KICB2YXIgZXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddOwogIGZvckVhY2goZXZlbnRzLCBmdW5jdGlvbihldikgewogICAgc3RyZWFtLm9uKGV2LCBzZWxmLmVtaXQuYmluZChzZWxmLCBldikpOwogIH0pOwoKICAvLyB3aGVuIHdlIHRyeSB0byBjb25zdW1lIHNvbWUgbW9yZSBieXRlcywgc2ltcGx5IHVucGF1c2UgdGhlCiAgLy8gdW5kZXJseWluZyBzdHJlYW0uCiAgc2VsZi5fcmVhZCA9IGZ1bmN0aW9uKG4pIHsKICAgIGRlYnVnKCd3cmFwcGVkIF9yZWFkJywgbik7CiAgICBpZiAocGF1c2VkKSB7CiAgICAgIHBhdXNlZCA9IGZhbHNlOwogICAgICBzdHJlYW0ucmVzdW1lKCk7CiAgICB9CiAgfTsKCiAgcmV0dXJuIHNlbGY7Cn07CgoKLy8gZXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LgpSZWFkYWJsZS5fZnJvbUxpc3QgPSBmcm9tTGlzdDsKCi8vIFBsdWNrIG9mZiBuIGJ5dGVzIGZyb20gYW4gYXJyYXkgb2YgYnVmZmVycy4KLy8gTGVuZ3RoIGlzIHRoZSBjb21iaW5lZCBsZW5ndGhzIG9mIGFsbCB0aGUgYnVmZmVycyBpbiB0aGUgbGlzdC4KZnVuY3Rpb24gZnJvbUxpc3Qobiwgc3RhdGUpIHsKICB2YXIgbGlzdCA9IHN0YXRlLmJ1ZmZlcjsKICB2YXIgbGVuZ3RoID0gc3RhdGUubGVuZ3RoOwogIHZhciBzdHJpbmdNb2RlID0gISFzdGF0ZS5kZWNvZGVyOwogIHZhciBvYmplY3RNb2RlID0gISFzdGF0ZS5vYmplY3RNb2RlOwogIHZhciByZXQ7CgogIC8vIG5vdGhpbmcgaW4gdGhlIGxpc3QsIGRlZmluaXRlbHkgZW1wdHkuCiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKQogICAgcmV0dXJuIG51bGw7CgogIGlmIChsZW5ndGggPT09IDApCiAgICByZXQgPSBudWxsOwogIGVsc2UgaWYgKG9iamVjdE1vZGUpCiAgICByZXQgPSBsaXN0LnNoaWZ0KCk7CiAgZWxzZSBpZiAoIW4gfHwgbiA+PSBsZW5ndGgpIHsKICAgIC8vIHJlYWQgaXQgYWxsLCB0cnVuY2F0ZSB0aGUgYXJyYXkuCiAgICBpZiAoc3RyaW5nTW9kZSkKICAgICAgcmV0ID0gbGlzdC5qb2luKCcnKTsKICAgIGVsc2UgaWYgKGxpc3QubGVuZ3RoID09PSAxKQogICAgICByZXQgPSBsaXN0WzBdOwogICAgZWxzZQogICAgICByZXQgPSBCdWZmZXIuY29uY2F0KGxpc3QsIGxlbmd0aCk7CiAgICBsaXN0Lmxlbmd0aCA9IDA7CiAgfSBlbHNlIHsKICAgIC8vIHJlYWQganVzdCBzb21lIG9mIGl0LgogICAgaWYgKG4gPCBsaXN0WzBdLmxlbmd0aCkgewogICAgICAvLyBqdXN0IHRha2UgYSBwYXJ0IG9mIHRoZSBmaXJzdCBsaXN0IGl0ZW0uCiAgICAgIC8vIHNsaWNlIGlzIHRoZSBzYW1lIGZvciBidWZmZXJzIGFuZCBzdHJpbmdzLgogICAgICB2YXIgYnVmID0gbGlzdFswXTsKICAgICAgcmV0ID0gYnVmLnNsaWNlKDAsIG4pOwogICAgICBsaXN0WzBdID0gYnVmLnNsaWNlKG4pOwogICAgfSBlbHNlIGlmIChuID09PSBsaXN0WzBdLmxlbmd0aCkgewogICAgICAvLyBmaXJzdCBsaXN0IGlzIGEgcGVyZmVjdCBtYXRjaAogICAgICByZXQgPSBsaXN0LnNoaWZ0KCk7CiAgICB9IGVsc2UgewogICAgICAvLyBjb21wbGV4IGNhc2UuCiAgICAgIC8vIHdlIGhhdmUgZW5vdWdoIHRvIGNvdmVyIGl0LCBidXQgaXQgc3BhbnMgcGFzdCB0aGUgZmlyc3QgYnVmZmVyLgogICAgICBpZiAoc3RyaW5nTW9kZSkKICAgICAgICByZXQgPSAnJzsKICAgICAgZWxzZQogICAgICAgIHJldCA9IG5ldyBCdWZmZXIobik7CgogICAgICB2YXIgYyA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbGlzdC5sZW5ndGg7IGkgPCBsICYmIGMgPCBuOyBpKyspIHsKICAgICAgICB2YXIgYnVmID0gbGlzdFswXTsKICAgICAgICB2YXIgY3B5ID0gTWF0aC5taW4obiAtIGMsIGJ1Zi5sZW5ndGgpOwoKICAgICAgICBpZiAoc3RyaW5nTW9kZSkKICAgICAgICAgIHJldCArPSBidWYuc2xpY2UoMCwgY3B5KTsKICAgICAgICBlbHNlCiAgICAgICAgICBidWYuY29weShyZXQsIGMsIDAsIGNweSk7CgogICAgICAgIGlmIChjcHkgPCBidWYubGVuZ3RoKQogICAgICAgICAgbGlzdFswXSA9IGJ1Zi5zbGljZShjcHkpOwogICAgICAgIGVsc2UKICAgICAgICAgIGxpc3Quc2hpZnQoKTsKCiAgICAgICAgYyArPSBjcHk7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkgewogIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKCiAgLy8gSWYgd2UgZ2V0IGhlcmUgYmVmb3JlIGNvbnN1bWluZyBhbGwgdGhlIGJ5dGVzLCB0aGVuIHRoYXQgaXMgYQogIC8vIGJ1ZyBpbiBub2RlLiAgU2hvdWxkIG5ldmVyIGhhcHBlbi4KICBpZiAoc3RhdGUubGVuZ3RoID4gMCkKICAgIHRocm93IG5ldyBFcnJvcignZW5kUmVhZGFibGUgY2FsbGVkIG9uIG5vbi1lbXB0eSBzdHJlYW0nKTsKCiAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkKSB7CiAgICBzdGF0ZS5lbmRlZCA9IHRydWU7CiAgICBwcm9jZXNzTmV4dFRpY2soZW5kUmVhZGFibGVOVCwgc3RhdGUsIHN0cmVhbSk7CiAgfQp9CgpmdW5jdGlvbiBlbmRSZWFkYWJsZU5UKHN0YXRlLCBzdHJlYW0pIHsKICAvLyBDaGVjayB0aGF0IHdlIGRpZG4ndCBnZXQgb25lIGxhc3QgdW5zaGlmdC4KICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQgJiYgc3RhdGUubGVuZ3RoID09PSAwKSB7CiAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTsKICAgIHN0cmVhbS5yZWFkYWJsZSA9IGZhbHNlOwogICAgc3RyZWFtLmVtaXQoJ2VuZCcpOwogIH0KfQoKZnVuY3Rpb24gZm9yRWFjaCAoeHMsIGYpIHsKICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgZih4c1tpXSwgaSk7CiAgfQp9CgpmdW5jdGlvbiBpbmRleE9mICh4cywgeCkgewogIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICBpZiAoeHNbaV0gPT09IHgpIHJldHVybiBpOwogIH0KICByZXR1cm4gLTE7Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKQp9LHsiLi9fc3RyZWFtX2R1cGxleCI6MTUwLCJfcHJvY2VzcyI6MTQxLCJidWZmZXIiOjc2LCJjb3JlLXV0aWwtaXMiOjc5LCJldmVudHMiOjExOCwiaW5oZXJpdHMiOjEyOSwiaXNhcnJheSI6MTMxLCJwcm9jZXNzLW5leHRpY2stYXJncyI6MTQwLCJzdHJpbmdfZGVjb2Rlci8iOjE3MiwidXRpbCI6NDR9XSwxNTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBhIHRyYW5zZm9ybSBzdHJlYW0gaXMgYSByZWFkYWJsZS93cml0YWJsZSBzdHJlYW0gd2hlcmUgeW91IGRvCi8vIHNvbWV0aGluZyB3aXRoIHRoZSBkYXRhLiAgU29tZXRpbWVzIGl0J3MgY2FsbGVkIGEgImZpbHRlciIsCi8vIGJ1dCB0aGF0J3Mgbm90IGEgZ3JlYXQgbmFtZSBmb3IgaXQsIHNpbmNlIHRoYXQgaW1wbGllcyBhIHRoaW5nIHdoZXJlCi8vIHNvbWUgYml0cyBwYXNzIHRocm91Z2gsIGFuZCBvdGhlcnMgYXJlIHNpbXBseSBpZ25vcmVkLiAgKFRoYXQgd291bGQKLy8gYmUgYSB2YWxpZCBleGFtcGxlIG9mIGEgdHJhbnNmb3JtLCBvZiBjb3Vyc2UuKQovLwovLyBXaGlsZSB0aGUgb3V0cHV0IGlzIGNhdXNhbGx5IHJlbGF0ZWQgdG8gdGhlIGlucHV0LCBpdCdzIG5vdCBhCi8vIG5lY2Vzc2FyaWx5IHN5bW1ldHJpYyBvciBzeW5jaHJvbm91cyB0cmFuc2Zvcm1hdGlvbi4gIEZvciBleGFtcGxlLAovLyBhIHpsaWIgc3RyZWFtIG1pZ2h0IHRha2UgbXVsdGlwbGUgcGxhaW4tdGV4dCB3cml0ZXMoKSwgYW5kIHRoZW4KLy8gZW1pdCBhIHNpbmdsZSBjb21wcmVzc2VkIGNodW5rIHNvbWUgdGltZSBpbiB0aGUgZnV0dXJlLgovLwovLyBIZXJlJ3MgaG93IHRoaXMgd29ya3M6Ci8vCi8vIFRoZSBUcmFuc2Zvcm0gc3RyZWFtIGhhcyBhbGwgdGhlIGFzcGVjdHMgb2YgdGhlIHJlYWRhYmxlIGFuZCB3cml0YWJsZQovLyBzdHJlYW0gY2xhc3Nlcy4gIFdoZW4geW91IHdyaXRlKGNodW5rKSwgdGhhdCBjYWxscyBfd3JpdGUoY2h1bmssY2IpCi8vIGludGVybmFsbHksIGFuZCByZXR1cm5zIGZhbHNlIGlmIHRoZXJlJ3MgYSBsb3Qgb2YgcGVuZGluZyB3cml0ZXMKLy8gYnVmZmVyZWQgdXAuICBXaGVuIHlvdSBjYWxsIHJlYWQoKSwgdGhhdCBjYWxscyBfcmVhZChuKSB1bnRpbAovLyB0aGVyZSdzIGVub3VnaCBwZW5kaW5nIHJlYWRhYmxlIGRhdGEgYnVmZmVyZWQgdXAuCi8vCi8vIEluIGEgdHJhbnNmb3JtIHN0cmVhbSwgdGhlIHdyaXR0ZW4gZGF0YSBpcyBwbGFjZWQgaW4gYSBidWZmZXIuICBXaGVuCi8vIF9yZWFkKG4pIGlzIGNhbGxlZCwgaXQgdHJhbnNmb3JtcyB0aGUgcXVldWVkIHVwIGRhdGEsIGNhbGxpbmcgdGhlCi8vIGJ1ZmZlcmVkIF93cml0ZSBjYidzIGFzIGl0IGNvbnN1bWVzIGNodW5rcy4gIElmIGNvbnN1bWluZyBhIHNpbmdsZQovLyB3cml0dGVuIGNodW5rIHdvdWxkIHJlc3VsdCBpbiBtdWx0aXBsZSBvdXRwdXQgY2h1bmtzLCB0aGVuIHRoZSBmaXJzdAovLyBvdXRwdXR0ZWQgYml0IGNhbGxzIHRoZSByZWFkY2IsIGFuZCBzdWJzZXF1ZW50IGNodW5rcyBqdXN0IGdvIGludG8KLy8gdGhlIHJlYWQgYnVmZmVyLCBhbmQgd2lsbCBjYXVzZSBpdCB0byBlbWl0ICdyZWFkYWJsZScgaWYgbmVjZXNzYXJ5LgovLwovLyBUaGlzIHdheSwgYmFjay1wcmVzc3VyZSBpcyBhY3R1YWxseSBkZXRlcm1pbmVkIGJ5IHRoZSByZWFkaW5nIHNpZGUsCi8vIHNpbmNlIF9yZWFkIGhhcyB0byBiZSBjYWxsZWQgdG8gc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBjaHVuay4gIEhvd2V2ZXIsCi8vIGEgcGF0aG9sb2dpY2FsIGluZmxhdGUgdHlwZSBvZiB0cmFuc2Zvcm0gY2FuIGNhdXNlIGV4Y2Vzc2l2ZSBidWZmZXJpbmcKLy8gaGVyZS4gIEZvciBleGFtcGxlLCBpbWFnaW5lIGEgc3RyZWFtIHdoZXJlIGV2ZXJ5IGJ5dGUgb2YgaW5wdXQgaXMKLy8gaW50ZXJwcmV0ZWQgYXMgYW4gaW50ZWdlciBmcm9tIDAtMjU1LCBhbmQgdGhlbiByZXN1bHRzIGluIHRoYXQgbWFueQovLyBieXRlcyBvZiBvdXRwdXQuICBXcml0aW5nIHRoZSA0IGJ5dGVzIHtmZixmZixmZixmZn0gd291bGQgcmVzdWx0IGluCi8vIDFrYiBvZiBkYXRhIGJlaW5nIG91dHB1dC4gIEluIHRoaXMgY2FzZSwgeW91IGNvdWxkIHdyaXRlIGEgdmVyeSBzbWFsbAovLyBhbW91bnQgb2YgaW5wdXQsIGFuZCBlbmQgdXAgd2l0aCBhIHZlcnkgbGFyZ2UgYW1vdW50IG9mIG91dHB1dC4gIEluCi8vIHN1Y2ggYSBwYXRob2xvZ2ljYWwgaW5mbGF0aW5nIG1lY2hhbmlzbSwgdGhlcmUnZCBiZSBubyB3YXkgdG8gdGVsbAovLyB0aGUgc3lzdGVtIHRvIHN0b3AgZG9pbmcgdGhlIHRyYW5zZm9ybS4gIEEgc2luZ2xlIDRNQiB3cml0ZSBjb3VsZAovLyBjYXVzZSB0aGUgc3lzdGVtIHRvIHJ1biBvdXQgb2YgbWVtb3J5LgovLwovLyBIb3dldmVyLCBldmVuIGluIHN1Y2ggYSBwYXRob2xvZ2ljYWwgY2FzZSwgb25seSBhIHNpbmdsZSB3cml0dGVuIGNodW5rCi8vIHdvdWxkIGJlIGNvbnN1bWVkLCBhbmQgdGhlbiB0aGUgcmVzdCB3b3VsZCB3YWl0ICh1bi10cmFuc2Zvcm1lZCkgdW50aWwKLy8gdGhlIHJlc3VsdHMgb2YgdGhlIHByZXZpb3VzIHRyYW5zZm9ybWVkIGNodW5rIHdlcmUgY29uc3VtZWQuCgondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IFRyYW5zZm9ybTsKCnZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpOwp1dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKLyo8L3JlcGxhY2VtZW50PiovCgp1dGlsLmluaGVyaXRzKFRyYW5zZm9ybSwgRHVwbGV4KTsKCgpmdW5jdGlvbiBUcmFuc2Zvcm1TdGF0ZShzdHJlYW0pIHsKICB0aGlzLmFmdGVyVHJhbnNmb3JtID0gZnVuY3Rpb24oZXIsIGRhdGEpIHsKICAgIHJldHVybiBhZnRlclRyYW5zZm9ybShzdHJlYW0sIGVyLCBkYXRhKTsKICB9OwoKICB0aGlzLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTsKICB0aGlzLnRyYW5zZm9ybWluZyA9IGZhbHNlOwogIHRoaXMud3JpdGVjYiA9IG51bGw7CiAgdGhpcy53cml0ZWNodW5rID0gbnVsbDsKfQoKZnVuY3Rpb24gYWZ0ZXJUcmFuc2Zvcm0oc3RyZWFtLCBlciwgZGF0YSkgewogIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7CiAgdHMudHJhbnNmb3JtaW5nID0gZmFsc2U7CgogIHZhciBjYiA9IHRzLndyaXRlY2I7CgogIGlmICghY2IpCiAgICByZXR1cm4gc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdubyB3cml0ZWNiIGluIFRyYW5zZm9ybSBjbGFzcycpKTsKCiAgdHMud3JpdGVjaHVuayA9IG51bGw7CiAgdHMud3JpdGVjYiA9IG51bGw7CgogIGlmIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHVuZGVmaW5lZCkKICAgIHN0cmVhbS5wdXNoKGRhdGEpOwoKICBpZiAoY2IpCiAgICBjYihlcik7CgogIHZhciBycyA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKICBycy5yZWFkaW5nID0gZmFsc2U7CiAgaWYgKHJzLm5lZWRSZWFkYWJsZSB8fCBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKSB7CiAgICBzdHJlYW0uX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7CiAgfQp9CgoKZnVuY3Rpb24gVHJhbnNmb3JtKG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHJhbnNmb3JtKSkKICAgIHJldHVybiBuZXcgVHJhbnNmb3JtKG9wdGlvbnMpOwoKICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTsKCiAgdGhpcy5fdHJhbnNmb3JtU3RhdGUgPSBuZXcgVHJhbnNmb3JtU3RhdGUodGhpcyk7CgogIC8vIHdoZW4gdGhlIHdyaXRhYmxlIHNpZGUgZmluaXNoZXMsIHRoZW4gZmx1c2ggb3V0IGFueXRoaW5nIHJlbWFpbmluZy4KICB2YXIgc3RyZWFtID0gdGhpczsKCiAgLy8gc3RhcnQgb3V0IGFza2luZyBmb3IgYSByZWFkYWJsZSBldmVudCBvbmNlIGRhdGEgaXMgdHJhbnNmb3JtZWQuCiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwoKICAvLyB3ZSBoYXZlIGltcGxlbWVudGVkIHRoZSBfcmVhZCBtZXRob2QsIGFuZCBkb25lIHRoZSBvdGhlciB0aGluZ3MKICAvLyB0aGF0IFJlYWRhYmxlIHdhbnRzIGJlZm9yZSB0aGUgZmlyc3QgX3JlYWQgY2FsbCwgc28gdW5zZXQgdGhlCiAgLy8gc3luYyBndWFyZCBmbGFnLgogIHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYyA9IGZhbHNlOwoKICBpZiAob3B0aW9ucykgewogICAgaWYgKHR5cGVvZiBvcHRpb25zLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJykKICAgICAgdGhpcy5fdHJhbnNmb3JtID0gb3B0aW9ucy50cmFuc2Zvcm07CgogICAgaWYgKHR5cGVvZiBvcHRpb25zLmZsdXNoID09PSAnZnVuY3Rpb24nKQogICAgICB0aGlzLl9mbHVzaCA9IG9wdGlvbnMuZmx1c2g7CiAgfQoKICB0aGlzLm9uY2UoJ3ByZWZpbmlzaCcsIGZ1bmN0aW9uKCkgewogICAgaWYgKHR5cGVvZiB0aGlzLl9mbHVzaCA9PT0gJ2Z1bmN0aW9uJykKICAgICAgdGhpcy5fZmx1c2goZnVuY3Rpb24oZXIpIHsKICAgICAgICBkb25lKHN0cmVhbSwgZXIpOwogICAgICB9KTsKICAgIGVsc2UKICAgICAgZG9uZShzdHJlYW0pOwogIH0pOwp9CgpUcmFuc2Zvcm0ucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcpIHsKICB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5uZWVkVHJhbnNmb3JtID0gZmFsc2U7CiAgcmV0dXJuIER1cGxleC5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBlbmNvZGluZyk7Cn07CgovLyBUaGlzIGlzIHRoZSBwYXJ0IHdoZXJlIHlvdSBkbyBzdHVmZiEKLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgovLyAnY2h1bmsnIGlzIGFuIGlucHV0IGNodW5rLgovLwovLyBDYWxsIGBwdXNoKG5ld0NodW5rKWAgdG8gcGFzcyBhbG9uZyB0cmFuc2Zvcm1lZCBvdXRwdXQKLy8gdG8gdGhlIHJlYWRhYmxlIHNpZGUuICBZb3UgbWF5IGNhbGwgJ3B1c2gnIHplcm8gb3IgbW9yZSB0aW1lcy4KLy8KLy8gQ2FsbCBgY2IoZXJyKWAgd2hlbiB5b3UgYXJlIGRvbmUgd2l0aCB0aGlzIGNodW5rLiAgSWYgeW91IHBhc3MKLy8gYW4gZXJyb3IsIHRoZW4gdGhhdCdsbCBwdXQgdGhlIGh1cnQgb24gdGhlIHdob2xlIG9wZXJhdGlvbi4gIElmIHlvdQovLyBuZXZlciBjYWxsIGNiKCksIHRoZW4geW91J2xsIG5ldmVyIGdldCBhbm90aGVyIGNodW5rLgpUcmFuc2Zvcm0ucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgdGhyb3cgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKTsKfTsKClRyYW5zZm9ybS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikgewogIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlOwogIHRzLndyaXRlY2IgPSBjYjsKICB0cy53cml0ZWNodW5rID0gY2h1bms7CiAgdHMud3JpdGVlbmNvZGluZyA9IGVuY29kaW5nOwogIGlmICghdHMudHJhbnNmb3JtaW5nKSB7CiAgICB2YXIgcnMgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogICAgaWYgKHRzLm5lZWRUcmFuc2Zvcm0gfHwKICAgICAgICBycy5uZWVkUmVhZGFibGUgfHwKICAgICAgICBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKQogICAgICB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspOwogIH0KfTsKCi8vIERvZXNuJ3QgbWF0dGVyIHdoYXQgdGhlIGFyZ3MgYXJlIGhlcmUuCi8vIF90cmFuc2Zvcm0gZG9lcyBhbGwgdGhlIHdvcmsuCi8vIFRoYXQgd2UgZ290IGhlcmUgbWVhbnMgdGhhdCB0aGUgcmVhZGFibGUgc2lkZSB3YW50cyBtb3JlIGRhdGEuClRyYW5zZm9ybS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbihuKSB7CiAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7CgogIGlmICh0cy53cml0ZWNodW5rICE9PSBudWxsICYmIHRzLndyaXRlY2IgJiYgIXRzLnRyYW5zZm9ybWluZykgewogICAgdHMudHJhbnNmb3JtaW5nID0gdHJ1ZTsKICAgIHRoaXMuX3RyYW5zZm9ybSh0cy53cml0ZWNodW5rLCB0cy53cml0ZWVuY29kaW5nLCB0cy5hZnRlclRyYW5zZm9ybSk7CiAgfSBlbHNlIHsKICAgIC8vIG1hcmsgdGhhdCB3ZSBuZWVkIGEgdHJhbnNmb3JtLCBzbyB0aGF0IGFueSBkYXRhIHRoYXQgY29tZXMgaW4KICAgIC8vIHdpbGwgZ2V0IHByb2Nlc3NlZCwgbm93IHRoYXQgd2UndmUgYXNrZWQgZm9yIGl0LgogICAgdHMubmVlZFRyYW5zZm9ybSA9IHRydWU7CiAgfQp9OwoKCmZ1bmN0aW9uIGRvbmUoc3RyZWFtLCBlcikgewogIGlmIChlcikKICAgIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CgogIC8vIGlmIHRoZXJlJ3Mgbm90aGluZyBpbiB0aGUgd3JpdGUgYnVmZmVyLCB0aGVuIHRoYXQgbWVhbnMKICAvLyB0aGF0IG5vdGhpbmcgbW9yZSB3aWxsIGV2ZXIgYmUgcHJvdmlkZWQKICB2YXIgd3MgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7CiAgdmFyIHRzID0gc3RyZWFtLl90cmFuc2Zvcm1TdGF0ZTsKCiAgaWYgKHdzLmxlbmd0aCkKICAgIHRocm93IG5ldyBFcnJvcignY2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwJyk7CgogIGlmICh0cy50cmFuc2Zvcm1pbmcpCiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmcnKTsKCiAgcmV0dXJuIHN0cmVhbS5wdXNoKG51bGwpOwp9Cgp9LHsiLi9fc3RyZWFtX2R1cGxleCI6MTUwLCJjb3JlLXV0aWwtaXMiOjc5LCJpbmhlcml0cyI6MTI5fV0sMTU0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gQSBiaXQgc2ltcGxlciB0aGFuIHJlYWRhYmxlIHN0cmVhbXMuCi8vIEltcGxlbWVudCBhbiBhc3luYyAuX3dyaXRlKGNodW5rLCBlbmNvZGluZywgY2IpLCBhbmQgaXQnbGwgaGFuZGxlIGFsbAovLyB0aGUgZHJhaW4gZXZlbnQgZW1pc3Npb24gYW5kIGJ1ZmZlcmluZy4KCid1c2Ugc3RyaWN0JzsKCm1vZHVsZS5leHBvcnRzID0gV3JpdGFibGU7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgcHJvY2Vzc05leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTsKLyo8L3JlcGxhY2VtZW50PiovCgoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKLyo8L3JlcGxhY2VtZW50PiovCgpXcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTsKCgovKjxyZXBsYWNlbWVudD4qLwp2YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpOwp1dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKLyo8L3JlcGxhY2VtZW50PiovCgoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIGludGVybmFsVXRpbCA9IHsKICBkZXByZWNhdGU6IHJlcXVpcmUoJ3V0aWwtZGVwcmVjYXRlJykKfTsKLyo8L3JlcGxhY2VtZW50PiovCgoKCi8qPHJlcGxhY2VtZW50PiovCnZhciBTdHJlYW07CihmdW5jdGlvbiAoKXt0cnl7CiAgU3RyZWFtID0gcmVxdWlyZSgnc3QnICsgJ3JlYW0nKTsKfWNhdGNoKF8pe31maW5hbGx5ewogIGlmICghU3RyZWFtKQogICAgU3RyZWFtID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyOwp9fSgpKQovKjwvcmVwbGFjZW1lbnQ+Ki8KCnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7Cgp1dGlsLmluaGVyaXRzKFdyaXRhYmxlLCBTdHJlYW0pOwoKZnVuY3Rpb24gbm9wKCkge30KCmZ1bmN0aW9uIFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICB0aGlzLmNodW5rID0gY2h1bms7CiAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwogIHRoaXMuY2FsbGJhY2sgPSBjYjsKICB0aGlzLm5leHQgPSBudWxsOwp9Cgp2YXIgRHVwbGV4OwpmdW5jdGlvbiBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkgewogIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciBvciBub3QgdGhpcyBzdHJlYW0KICAvLyBjb250YWlucyBidWZmZXJzIG9yIG9iamVjdHMuCiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7CgogIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpCiAgICB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTsKCiAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIHdyaXRlKCkgc3RhcnRzIHJldHVybmluZyBmYWxzZQogIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgdGhhdCB3ZSBhbHdheXMgcmV0dXJuIGZhbHNlIGlmCiAgLy8gdGhlIGVudGlyZSBidWZmZXIgaXMgbm90IGZsdXNoZWQgaW1tZWRpYXRlbHkgb24gd3JpdGUoKQogIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7CiAgdmFyIGRlZmF1bHRId20gPSB0aGlzLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDsKICB0aGlzLmhpZ2hXYXRlck1hcmsgPSAoaHdtIHx8IGh3bSA9PT0gMCkgPyBod20gOiBkZWZhdWx0SHdtOwoKICAvLyBjYXN0IHRvIGludHMuCiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gfn50aGlzLmhpZ2hXYXRlck1hcms7CgogIHRoaXMubmVlZERyYWluID0gZmFsc2U7CiAgLy8gYXQgdGhlIHN0YXJ0IG9mIGNhbGxpbmcgZW5kKCkKICB0aGlzLmVuZGluZyA9IGZhbHNlOwogIC8vIHdoZW4gZW5kKCkgaGFzIGJlZW4gY2FsbGVkLCBhbmQgcmV0dXJuZWQKICB0aGlzLmVuZGVkID0gZmFsc2U7CiAgLy8gd2hlbiAnZmluaXNoJyBpcyBlbWl0dGVkCiAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOwoKICAvLyBzaG91bGQgd2UgZGVjb2RlIHN0cmluZ3MgaW50byBidWZmZXJzIGJlZm9yZSBwYXNzaW5nIHRvIF93cml0ZT8KICAvLyB0aGlzIGlzIGhlcmUgc28gdGhhdCBzb21lIG5vZGUtY29yZSBzdHJlYW1zIGNhbiBvcHRpbWl6ZSBzdHJpbmcKICAvLyBoYW5kbGluZyBhdCBhIGxvd2VyIGxldmVsLgogIHZhciBub0RlY29kZSA9IG9wdGlvbnMuZGVjb2RlU3RyaW5ncyA9PT0gZmFsc2U7CiAgdGhpcy5kZWNvZGVTdHJpbmdzID0gIW5vRGVjb2RlOwoKICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nCiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLgogIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC4KICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JzsKCiAgLy8gbm90IGFuIGFjdHVhbCBidWZmZXIgd2Uga2VlcCB0cmFjayBvZiwgYnV0IGEgbWVhc3VyZW1lbnQKICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nCiAgLy8gc29ja2V0IG9yIGZpbGUuCiAgdGhpcy5sZW5ndGggPSAwOwoKICAvLyBhIGZsYWcgdG8gc2VlIHdoZW4gd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhIHdyaXRlLgogIHRoaXMud3JpdGluZyA9IGZhbHNlOwoKICAvLyB3aGVuIHRydWUgYWxsIHdyaXRlcyB3aWxsIGJlIGJ1ZmZlcmVkIHVudGlsIC51bmNvcmsoKSBjYWxsCiAgdGhpcy5jb3JrZWQgPSAwOwoKICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSwKICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueQogIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsICJsYXRlciIgc2hvdWxkIGdlbmVyYWxseSBhbHNvCiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuCiAgdGhpcy5zeW5jID0gdHJ1ZTsKCiAgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaAogIC8vIG1heSBjYWxsIHRoZSBfd3JpdGUoKSBjYWxsYmFjayBpbiB0aGUgc2FtZSB0aWNrLCBzbyB0aGF0IHdlIGRvbid0CiAgLy8gZW5kIHVwIGluIGFuIG92ZXJsYXBwZWQgb253cml0ZSBzaXR1YXRpb24uCiAgdGhpcy5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7CgogIC8vIHRoZSBjYWxsYmFjayB0aGF0J3MgcGFzc2VkIHRvIF93cml0ZShjaHVuayxjYikKICB0aGlzLm9ud3JpdGUgPSBmdW5jdGlvbihlcikgewogICAgb253cml0ZShzdHJlYW0sIGVyKTsKICB9OwoKICAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYikKICB0aGlzLndyaXRlY2IgPSBudWxsOwoKICAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuCiAgdGhpcy53cml0ZWxlbiA9IDA7CgogIHRoaXMuYnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKICB0aGlzLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOwoKICAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrcwogIC8vIHRoaXMgbXVzdCBiZSAwIGJlZm9yZSAnZmluaXNoJyBjYW4gYmUgZW1pdHRlZAogIHRoaXMucGVuZGluZ2NiID0gMDsKCiAgLy8gZW1pdCBwcmVmaW5pc2ggaWYgdGhlIG9ubHkgdGhpbmcgd2UncmUgd2FpdGluZyBmb3IgaXMgX3dyaXRlIGNicwogIC8vIFRoaXMgaXMgcmVsZXZhbnQgZm9yIHN5bmNocm9ub3VzIFRyYW5zZm9ybSBzdHJlYW1zCiAgdGhpcy5wcmVmaW5pc2hlZCA9IGZhbHNlOwoKICAvLyBUcnVlIGlmIHRoZSBlcnJvciB3YXMgYWxyZWFkeSBlbWl0dGVkIGFuZCBzaG91bGQgbm90IGJlIHRocm93biBhZ2FpbgogIHRoaXMuZXJyb3JFbWl0dGVkID0gZmFsc2U7Cn0KCldyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIHdyaXRhYmxlU3RhdGVHZXRCdWZmZXIoKSB7CiAgdmFyIGN1cnJlbnQgPSB0aGlzLmJ1ZmZlcmVkUmVxdWVzdDsKICB2YXIgb3V0ID0gW107CiAgd2hpbGUgKGN1cnJlbnQpIHsKICAgIG91dC5wdXNoKGN1cnJlbnQpOwogICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDsKICB9CiAgcmV0dXJuIG91dDsKfTsKCihmdW5jdGlvbiAoKXt0cnkgewpPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGVTdGF0ZS5wcm90b3R5cGUsICdidWZmZXInLCB7CiAgZ2V0OiBpbnRlcm5hbFV0aWwuZGVwcmVjYXRlKGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCk7CiAgfSwgJ193cml0YWJsZVN0YXRlLmJ1ZmZlciBpcyBkZXByZWNhdGVkLiBVc2UgX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyICcgKwogICAgICdpbnN0ZWFkLicpCn0pOwp9Y2F0Y2goXyl7fX0oKSk7CgoKdmFyIER1cGxleDsKZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykgewogIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgogIC8vIFdyaXRhYmxlIGN0b3IgaXMgYXBwbGllZCB0byBEdXBsZXhlcywgdGhvdWdoIHRoZXkncmUgbm90CiAgLy8gaW5zdGFuY2VvZiBXcml0YWJsZSwgdGhleSdyZSBpbnN0YW5jZW9mIFJlYWRhYmxlLgogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBXcml0YWJsZSkgJiYgISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkKICAgIHJldHVybiBuZXcgV3JpdGFibGUob3B0aW9ucyk7CgogIHRoaXMuX3dyaXRhYmxlU3RhdGUgPSBuZXcgV3JpdGFibGVTdGF0ZShvcHRpb25zLCB0aGlzKTsKCiAgLy8gbGVnYWN5LgogIHRoaXMud3JpdGFibGUgPSB0cnVlOwoKICBpZiAob3B0aW9ucykgewogICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRlID09PSAnZnVuY3Rpb24nKQogICAgICB0aGlzLl93cml0ZSA9IG9wdGlvbnMud3JpdGU7CgogICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRldiA9PT0gJ2Z1bmN0aW9uJykKICAgICAgdGhpcy5fd3JpdGV2ID0gb3B0aW9ucy53cml0ZXY7CiAgfQoKICBTdHJlYW0uY2FsbCh0aGlzKTsKfQoKLy8gT3RoZXJ3aXNlIHBlb3BsZSBjYW4gcGlwZSBXcml0YWJsZSBzdHJlYW1zLCB3aGljaCBpcyBqdXN0IHdyb25nLgpXcml0YWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKCkgewogIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLiBOb3QgcmVhZGFibGUuJykpOwp9OwoKCmZ1bmN0aW9uIHdyaXRlQWZ0ZXJFbmQoc3RyZWFtLCBjYikgewogIHZhciBlciA9IG5ldyBFcnJvcignd3JpdGUgYWZ0ZXIgZW5kJyk7CiAgLy8gVE9ETzogZGVmZXIgZXJyb3IgZXZlbnRzIGNvbnNpc3RlbnRseSBldmVyeXdoZXJlLCBub3QganVzdCB0aGUgY2IKICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CiAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7Cn0KCi8vIElmIHdlIGdldCBzb21ldGhpbmcgdGhhdCBpcyBub3QgYSBidWZmZXIsIHN0cmluZywgbnVsbCwgb3IgdW5kZWZpbmVkLAovLyBhbmQgd2UncmUgbm90IGluIG9iamVjdE1vZGUsIHRoZW4gdGhhdCdzIGFuIGVycm9yLgovLyBPdGhlcndpc2Ugc3RyZWFtIGNodW5rcyBhcmUgYWxsIGNvbnNpZGVyZWQgdG8gYmUgb2YgbGVuZ3RoPTEsIGFuZCB0aGUKLy8gd2F0ZXJtYXJrcyBkZXRlcm1pbmUgaG93IG1hbnkgb2JqZWN0cyB0byBrZWVwIGluIHRoZSBidWZmZXIsIHJhdGhlciB0aGFuCi8vIGhvdyBtYW55IGJ5dGVzIG9yIGNoYXJhY3RlcnMuCmZ1bmN0aW9uIHZhbGlkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGNiKSB7CiAgdmFyIHZhbGlkID0gdHJ1ZTsKCiAgaWYgKCEoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgJiYKICAgICAgdHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJgogICAgICBjaHVuayAhPT0gbnVsbCAmJgogICAgICBjaHVuayAhPT0gdW5kZWZpbmVkICYmCiAgICAgICFzdGF0ZS5vYmplY3RNb2RlKSB7CiAgICB2YXIgZXIgPSBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG5vbi1zdHJpbmcvYnVmZmVyIGNodW5rJyk7CiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CiAgICBwcm9jZXNzTmV4dFRpY2soY2IsIGVyKTsKICAgIHZhbGlkID0gZmFsc2U7CiAgfQogIHJldHVybiB2YWxpZDsKfQoKV3JpdGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikgewogIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7CiAgdmFyIHJldCA9IGZhbHNlOwoKICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnZnVuY3Rpb24nKSB7CiAgICBjYiA9IGVuY29kaW5nOwogICAgZW5jb2RpbmcgPSBudWxsOwogIH0KCiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpCiAgICBlbmNvZGluZyA9ICdidWZmZXInOwogIGVsc2UgaWYgKCFlbmNvZGluZykKICAgIGVuY29kaW5nID0gc3RhdGUuZGVmYXVsdEVuY29kaW5nOwoKICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKQogICAgY2IgPSBub3A7CgogIGlmIChzdGF0ZS5lbmRlZCkKICAgIHdyaXRlQWZ0ZXJFbmQodGhpcywgY2IpOwogIGVsc2UgaWYgKHZhbGlkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCBjYikpIHsKICAgIHN0YXRlLnBlbmRpbmdjYisrOwogICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgfQoKICByZXR1cm4gcmV0Owp9OwoKV3JpdGFibGUucHJvdG90eXBlLmNvcmsgPSBmdW5jdGlvbigpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoKICBzdGF0ZS5jb3JrZWQrKzsKfTsKCldyaXRhYmxlLnByb3RvdHlwZS51bmNvcmsgPSBmdW5jdGlvbigpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoKICBpZiAoc3RhdGUuY29ya2VkKSB7CiAgICBzdGF0ZS5jb3JrZWQtLTsKCiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiYKICAgICAgICAhc3RhdGUuY29ya2VkICYmCiAgICAgICAgIXN0YXRlLmZpbmlzaGVkICYmCiAgICAgICAgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYKICAgICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QpCiAgICAgIGNsZWFyQnVmZmVyKHRoaXMsIHN0YXRlKTsKICB9Cn07CgpXcml0YWJsZS5wcm90b3R5cGUuc2V0RGVmYXVsdEVuY29kaW5nID0gZnVuY3Rpb24gc2V0RGVmYXVsdEVuY29kaW5nKGVuY29kaW5nKSB7CiAgLy8gbm9kZTo6UGFyc2VFbmNvZGluZygpIHJlcXVpcmVzIGxvd2VyIGNhc2UuCiAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycpCiAgICBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7CiAgaWYgKCEoWydoZXgnLCAndXRmOCcsICd1dGYtOCcsICdhc2NpaScsICdiaW5hcnknLCAnYmFzZTY0JywKJ3VjczInLCAndWNzLTInLCd1dGYxNmxlJywgJ3V0Zi0xNmxlJywgJ3JhdyddCi5pbmRleE9mKChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpKSA+IC0xKSkKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZyk7CiAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZWZhdWx0RW5jb2RpbmcgPSBlbmNvZGluZzsKfTsKCmZ1bmN0aW9uIGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpIHsKICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYKICAgICAgc3RhdGUuZGVjb2RlU3RyaW5ncyAhPT0gZmFsc2UgJiYKICAgICAgdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykgewogICAgY2h1bmsgPSBuZXcgQnVmZmVyKGNodW5rLCBlbmNvZGluZyk7CiAgfQogIHJldHVybiBjaHVuazsKfQoKLy8gaWYgd2UncmUgYWxyZWFkeSB3cml0aW5nIHNvbWV0aGluZywgdGhlbiBqdXN0IHB1dCB0aGlzCi8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlCi8vIElmIHdlIHJldHVybiBmYWxzZSwgdGhlbiB3ZSBuZWVkIGEgZHJhaW4gZXZlbnQsIHNvIHNldCB0aGF0IGZsYWcuCmZ1bmN0aW9uIHdyaXRlT3JCdWZmZXIoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYikgewogIGNodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7CgogIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKQogICAgZW5jb2RpbmcgPSAnYnVmZmVyJzsKICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CgogIHN0YXRlLmxlbmd0aCArPSBsZW47CgogIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrOwogIC8vIHdlIG11c3QgZW5zdXJlIHRoYXQgcHJldmlvdXMgbmVlZERyYWluIHdpbGwgbm90IGJlIHJlc2V0IHRvIGZhbHNlLgogIGlmICghcmV0KQogICAgc3RhdGUubmVlZERyYWluID0gdHJ1ZTsKCiAgaWYgKHN0YXRlLndyaXRpbmcgfHwgc3RhdGUuY29ya2VkKSB7CiAgICB2YXIgbGFzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CiAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbmV3IFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpOwogICAgaWYgKGxhc3QpIHsKICAgICAgbGFzdC5uZXh0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKICAgIH0gZWxzZSB7CiAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CiAgICB9CiAgfSBlbHNlIHsKICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpmdW5jdGlvbiBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHdyaXRldiwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgc3RhdGUud3JpdGVsZW4gPSBsZW47CiAgc3RhdGUud3JpdGVjYiA9IGNiOwogIHN0YXRlLndyaXRpbmcgPSB0cnVlOwogIHN0YXRlLnN5bmMgPSB0cnVlOwogIGlmICh3cml0ZXYpCiAgICBzdHJlYW0uX3dyaXRldihjaHVuaywgc3RhdGUub253cml0ZSk7CiAgZWxzZQogICAgc3RyZWFtLl93cml0ZShjaHVuaywgZW5jb2RpbmcsIHN0YXRlLm9ud3JpdGUpOwogIHN0YXRlLnN5bmMgPSBmYWxzZTsKfQoKZnVuY3Rpb24gb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYikgewogIC0tc3RhdGUucGVuZGluZ2NiOwogIGlmIChzeW5jKQogICAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7CiAgZWxzZQogICAgY2IoZXIpOwoKICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTsKICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7Cn0KCmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkgewogIHN0YXRlLndyaXRpbmcgPSBmYWxzZTsKICBzdGF0ZS53cml0ZWNiID0gbnVsbDsKICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47CiAgc3RhdGUud3JpdGVsZW4gPSAwOwp9CgpmdW5jdGlvbiBvbndyaXRlKHN0cmVhbSwgZXIpIHsKICB2YXIgc3RhdGUgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7CiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jOwogIHZhciBjYiA9IHN0YXRlLndyaXRlY2I7CgogIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7CgogIGlmIChlcikKICAgIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpOwogIGVsc2UgewogICAgLy8gQ2hlY2sgaWYgd2UncmUgYWN0dWFsbHkgcmVhZHkgdG8gZmluaXNoLCBidXQgZG9uJ3QgZW1pdCB5ZXQKICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RhdGUpOwoKICAgIGlmICghZmluaXNoZWQgJiYKICAgICAgICAhc3RhdGUuY29ya2VkICYmCiAgICAgICAgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYKICAgICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QpIHsKICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7CiAgICB9CgogICAgaWYgKHN5bmMpIHsKICAgICAgcHJvY2Vzc05leHRUaWNrKGFmdGVyV3JpdGUsIHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7CiAgICB9IGVsc2UgewogICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikgewogIGlmICghZmluaXNoZWQpCiAgICBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7CiAgc3RhdGUucGVuZGluZ2NiLS07CiAgY2IoKTsKICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKfQoKLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3QKLy8gZW1pdCAnZHJhaW4nIGJlZm9yZSB0aGUgd3JpdGUoKSBjb25zdW1lciBnZXRzIHRoZSAnZmFsc2UnIHJldHVybgovLyB2YWx1ZSwgYW5kIGhhcyBhIGNoYW5jZSB0byBhdHRhY2ggYSAnZHJhaW4nIGxpc3RlbmVyLgpmdW5jdGlvbiBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSkgewogIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUubmVlZERyYWluKSB7CiAgICBzdGF0ZS5uZWVkRHJhaW4gPSBmYWxzZTsKICAgIHN0cmVhbS5lbWl0KCdkcmFpbicpOwogIH0KfQoKCi8vIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGluIHRoZSBidWZmZXIgd2FpdGluZywgdGhlbiBwcm9jZXNzIGl0CmZ1bmN0aW9uIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpIHsKICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gdHJ1ZTsKICB2YXIgZW50cnkgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3Q7CgogIGlmIChzdHJlYW0uX3dyaXRldiAmJiBlbnRyeSAmJiBlbnRyeS5uZXh0KSB7CiAgICAvLyBGYXN0IGNhc2UsIHdyaXRlIGV2ZXJ5dGhpbmcgdXNpbmcgX3dyaXRldigpCiAgICB2YXIgYnVmZmVyID0gW107CiAgICB2YXIgY2JzID0gW107CiAgICB3aGlsZSAoZW50cnkpIHsKICAgICAgY2JzLnB1c2goZW50cnkuY2FsbGJhY2spOwogICAgICBidWZmZXIucHVzaChlbnRyeSk7CiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDsKICAgIH0KCiAgICAvLyBjb3VudCB0aGUgb25lIHdlIGFyZSBhZGRpbmcsIGFzIHdlbGwuCiAgICAvLyBUT0RPKGlzYWFjcykgY2xlYW4gdGhpcyB1cAogICAgc3RhdGUucGVuZGluZ2NiKys7CiAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgdHJ1ZSwgc3RhdGUubGVuZ3RoLCBidWZmZXIsICcnLCBmdW5jdGlvbihlcnIpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBzdGF0ZS5wZW5kaW5nY2ItLTsKICAgICAgICBjYnNbaV0oZXJyKTsKICAgICAgfQogICAgfSk7CgogICAgLy8gQ2xlYXIgYnVmZmVyCiAgfSBlbHNlIHsKICAgIC8vIFNsb3cgY2FzZSwgd3JpdGUgY2h1bmtzIG9uZS1ieS1vbmUKICAgIHdoaWxlIChlbnRyeSkgewogICAgICB2YXIgY2h1bmsgPSBlbnRyeS5jaHVuazsKICAgICAgdmFyIGVuY29kaW5nID0gZW50cnkuZW5jb2Rpbmc7CiAgICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrOwogICAgICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CgogICAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpOwogICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7CiAgICAgIC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuCiAgICAgIC8vIGl0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byB3YWl0IHVudGlsIGl0IGRvZXMuCiAgICAgIC8vIGFsc28sIHRoYXQgbWVhbnMgdGhhdCB0aGUgY2h1bmsgYW5kIGNiIGFyZSBjdXJyZW50bHkKICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uCiAgICAgIGlmIChzdGF0ZS53cml0aW5nKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZW50cnkgPT09IG51bGwpCiAgICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOwogIH0KICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPSBlbnRyeTsKICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7Cn0KCldyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgY2IobmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKSk7Cn07CgpXcml0YWJsZS5wcm90b3R5cGUuX3dyaXRldiA9IG51bGw7CgpXcml0YWJsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikgewogIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7CgogIGlmICh0eXBlb2YgY2h1bmsgPT09ICdmdW5jdGlvbicpIHsKICAgIGNiID0gY2h1bms7CiAgICBjaHVuayA9IG51bGw7CiAgICBlbmNvZGluZyA9IG51bGw7CiAgfSBlbHNlIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHsKICAgIGNiID0gZW5jb2Rpbmc7CiAgICBlbmNvZGluZyA9IG51bGw7CiAgfQoKICBpZiAoY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCkKICAgIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nKTsKCiAgLy8gLmVuZCgpIGZ1bGx5IHVuY29ya3MKICBpZiAoc3RhdGUuY29ya2VkKSB7CiAgICBzdGF0ZS5jb3JrZWQgPSAxOwogICAgdGhpcy51bmNvcmsoKTsKICB9CgogIC8vIGlnbm9yZSB1bm5lY2Vzc2FyeSBlbmQoKSBjYWxscy4KICBpZiAoIXN0YXRlLmVuZGluZyAmJiAhc3RhdGUuZmluaXNoZWQpCiAgICBlbmRXcml0YWJsZSh0aGlzLCBzdGF0ZSwgY2IpOwp9OwoKCmZ1bmN0aW9uIG5lZWRGaW5pc2goc3RhdGUpIHsKICByZXR1cm4gKHN0YXRlLmVuZGluZyAmJgogICAgICAgICAgc3RhdGUubGVuZ3RoID09PSAwICYmCiAgICAgICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPT09IG51bGwgJiYKICAgICAgICAgICFzdGF0ZS5maW5pc2hlZCAmJgogICAgICAgICAgIXN0YXRlLndyaXRpbmcpOwp9CgpmdW5jdGlvbiBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSkgewogIGlmICghc3RhdGUucHJlZmluaXNoZWQpIHsKICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTsKICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTsKICB9Cn0KCmZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHsKICB2YXIgbmVlZCA9IG5lZWRGaW5pc2goc3RhdGUpOwogIGlmIChuZWVkKSB7CiAgICBpZiAoc3RhdGUucGVuZGluZ2NiID09PSAwKSB7CiAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTsKICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlOwogICAgICBzdHJlYW0uZW1pdCgnZmluaXNoJyk7CiAgICB9IGVsc2UgewogICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7CiAgICB9CiAgfQogIHJldHVybiBuZWVkOwp9CgpmdW5jdGlvbiBlbmRXcml0YWJsZShzdHJlYW0sIHN0YXRlLCBjYikgewogIHN0YXRlLmVuZGluZyA9IHRydWU7CiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7CiAgaWYgKGNiKSB7CiAgICBpZiAoc3RhdGUuZmluaXNoZWQpCiAgICAgIHByb2Nlc3NOZXh0VGljayhjYik7CiAgICBlbHNlCiAgICAgIHN0cmVhbS5vbmNlKCdmaW5pc2gnLCBjYik7CiAgfQogIHN0YXRlLmVuZGVkID0gdHJ1ZTsKfQoKfSx7Ii4vX3N0cmVhbV9kdXBsZXgiOjE1MCwiYnVmZmVyIjo3NiwiY29yZS11dGlsLWlzIjo3OSwiZXZlbnRzIjoxMTgsImluaGVyaXRzIjoxMjksInByb2Nlc3MtbmV4dGljay1hcmdzIjoxNDAsInV0aWwtZGVwcmVjYXRlIjoxNzV9XSwxNTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoIi4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiKQoKfSx7Ii4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiOjE1MX1dLDE1NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBTdHJlYW0gPSAoZnVuY3Rpb24gKCl7CiAgdHJ5IHsKICAgIHJldHVybiByZXF1aXJlKCdzdCcgKyAncmVhbScpOyAvLyBoYWNrIHRvIGZpeCBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgaXNzdWUgd2hlbiB1c2VkIHdpdGggYnJvd3NlcmlmeQogIH0gY2F0Y2goXyl7fQp9KCkpOwpleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzJyk7CmV4cG9ydHMuU3RyZWFtID0gU3RyZWFtIHx8IGV4cG9ydHM7CmV4cG9ydHMuUmVhZGFibGUgPSBleHBvcnRzOwpleHBvcnRzLldyaXRhYmxlID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcycpOwpleHBvcnRzLkR1cGxleCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fZHVwbGV4LmpzJyk7CmV4cG9ydHMuVHJhbnNmb3JtID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMnKTsKZXhwb3J0cy5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMnKTsKCn0seyIuL2xpYi9fc3RyZWFtX2R1cGxleC5qcyI6MTUwLCIuL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzIjoxNTEsIi4vbGliL19zdHJlYW1fcmVhZGFibGUuanMiOjE1MiwiLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMiOjE1MywiLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcyI6MTU0fV0sMTU3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCIuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcyIpCgp9LHsiLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMiOjE1M31dLDE1ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgiLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcyIpCgp9LHsiLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcyI6MTU0fV0sMTU5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKgpDcnlwdG9KUyB2My4xLjIKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCi8qKiBAcHJlc2VydmUKKGMpIDIwMTIgYnkgQ8OpZHJpYyBNZXNuaWwuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCgpSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6CgogICAgLSBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAgICAtIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KClRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTIElTIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiovCgovLyBjb25zdGFudHMgdGFibGUKdmFyIHpsID0gWwogIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsCiAgNywgNCwgMTMsIDEsIDEwLCA2LCAxNSwgMywgMTIsIDAsIDksIDUsIDIsIDE0LCAxMSwgOCwKICAzLCAxMCwgMTQsIDQsIDksIDE1LCA4LCAxLCAyLCA3LCAwLCA2LCAxMywgMTEsIDUsIDEyLAogIDEsIDksIDExLCAxMCwgMCwgOCwgMTIsIDQsIDEzLCAzLCA3LCAxNSwgMTQsIDUsIDYsIDIsCiAgNCwgMCwgNSwgOSwgNywgMTIsIDIsIDEwLCAxNCwgMSwgMywgOCwgMTEsIDYsIDE1LCAxMwpdCgp2YXIgenIgPSBbCiAgNSwgMTQsIDcsIDAsIDksIDIsIDExLCA0LCAxMywgNiwgMTUsIDgsIDEsIDEwLCAzLCAxMiwKICA2LCAxMSwgMywgNywgMCwgMTMsIDUsIDEwLCAxNCwgMTUsIDgsIDEyLCA0LCA5LCAxLCAyLAogIDE1LCA1LCAxLCAzLCA3LCAxNCwgNiwgOSwgMTEsIDgsIDEyLCAyLCAxMCwgMCwgNCwgMTMsCiAgOCwgNiwgNCwgMSwgMywgMTEsIDE1LCAwLCA1LCAxMiwgMiwgMTMsIDksIDcsIDEwLCAxNCwKICAxMiwgMTUsIDEwLCA0LCAxLCA1LCA4LCA3LCA2LCAyLCAxMywgMTQsIDAsIDMsIDksIDExCl0KCnZhciBzbCA9IFsKICAxMSwgMTQsIDE1LCAxMiwgNSwgOCwgNywgOSwgMTEsIDEzLCAxNCwgMTUsIDYsIDcsIDksIDgsCiAgNywgNiwgOCwgMTMsIDExLCA5LCA3LCAxNSwgNywgMTIsIDE1LCA5LCAxMSwgNywgMTMsIDEyLAogIDExLCAxMywgNiwgNywgMTQsIDksIDEzLCAxNSwgMTQsIDgsIDEzLCA2LCA1LCAxMiwgNywgNSwKICAxMSwgMTIsIDE0LCAxNSwgMTQsIDE1LCA5LCA4LCA5LCAxNCwgNSwgNiwgOCwgNiwgNSwgMTIsCiAgOSwgMTUsIDUsIDExLCA2LCA4LCAxMywgMTIsIDUsIDEyLCAxMywgMTQsIDExLCA4LCA1LCA2Cl0KCnZhciBzciA9IFsKICA4LCA5LCA5LCAxMSwgMTMsIDE1LCAxNSwgNSwgNywgNywgOCwgMTEsIDE0LCAxNCwgMTIsIDYsCiAgOSwgMTMsIDE1LCA3LCAxMiwgOCwgOSwgMTEsIDcsIDcsIDEyLCA3LCA2LCAxNSwgMTMsIDExLAogIDksIDcsIDE1LCAxMSwgOCwgNiwgNiwgMTQsIDEyLCAxMywgNSwgMTQsIDEzLCAxMywgNywgNSwKICAxNSwgNSwgOCwgMTEsIDE0LCAxNCwgNiwgMTQsIDYsIDksIDEyLCA5LCAxMiwgNSwgMTUsIDgsCiAgOCwgNSwgMTIsIDksIDEyLCA1LCAxNCwgNiwgOCwgMTMsIDYsIDUsIDE1LCAxMywgMTEsIDExCl0KCnZhciBobCA9IFsweDAwMDAwMDAwLCAweDVBODI3OTk5LCAweDZFRDlFQkExLCAweDhGMUJCQ0RDLCAweEE5NTNGRDRFXQp2YXIgaHIgPSBbMHg1MEEyOEJFNiwgMHg1QzRERDEyNCwgMHg2RDcwM0VGMywgMHg3QTZENzZFOSwgMHgwMDAwMDAwMF0KCmZ1bmN0aW9uIGJ5dGVzVG9Xb3JkcyAoYnl0ZXMpIHsKICB2YXIgd29yZHMgPSBbXQogIGZvciAodmFyIGkgPSAwLCBiID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrLCBiICs9IDgpIHsKICAgIHdvcmRzW2IgPj4+IDVdIHw9IGJ5dGVzW2ldIDw8ICgyNCAtIGIgJSAzMikKICB9CiAgcmV0dXJuIHdvcmRzCn0KCmZ1bmN0aW9uIHdvcmRzVG9CeXRlcyAod29yZHMpIHsKICB2YXIgYnl0ZXMgPSBbXQogIGZvciAodmFyIGIgPSAwOyBiIDwgd29yZHMubGVuZ3RoICogMzI7IGIgKz0gOCkgewogICAgYnl0ZXMucHVzaCgod29yZHNbYiA+Pj4gNV0gPj4+ICgyNCAtIGIgJSAzMikpICYgMHhGRikKICB9CiAgcmV0dXJuIGJ5dGVzCn0KCmZ1bmN0aW9uIHByb2Nlc3NCbG9jayAoSCwgTSwgb2Zmc2V0KSB7CiAgLy8gc3dhcCBlbmRpYW4KICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHsKICAgIHZhciBvZmZzZXRfaSA9IG9mZnNldCArIGkKICAgIHZhciBNX29mZnNldF9pID0gTVtvZmZzZXRfaV0KCiAgICAvLyBTd2FwCiAgICBNW29mZnNldF9pXSA9ICgKICAgICAgKCgoTV9vZmZzZXRfaSA8PCA4KSB8IChNX29mZnNldF9pID4+PiAyNCkpICYgMHgwMGZmMDBmZikgfAogICAgICAoKChNX29mZnNldF9pIDw8IDI0KSB8IChNX29mZnNldF9pID4+PiA4KSkgJiAweGZmMDBmZjAwKQogICAgKQogIH0KCiAgLy8gV29ya2luZyB2YXJpYWJsZXMKICB2YXIgYWwsIGJsLCBjbCwgZGwsIGVsCiAgdmFyIGFyLCBiciwgY3IsIGRyLCBlcgoKICBhciA9IGFsID0gSFswXQogIGJyID0gYmwgPSBIWzFdCiAgY3IgPSBjbCA9IEhbMl0KICBkciA9IGRsID0gSFszXQogIGVyID0gZWwgPSBIWzRdCgogIC8vIGNvbXB1dGF0aW9uCiAgdmFyIHQKICBmb3IgKGkgPSAwOyBpIDwgODA7IGkgKz0gMSkgewogICAgdCA9IChhbCArIE1bb2Zmc2V0ICsgemxbaV1dKSB8IDAKICAgIGlmIChpIDwgMTYpIHsKICAgICAgdCArPSBmMShibCwgY2wsIGRsKSArIGhsWzBdCiAgICB9IGVsc2UgaWYgKGkgPCAzMikgewogICAgICB0ICs9IGYyKGJsLCBjbCwgZGwpICsgaGxbMV0KICAgIH0gZWxzZSBpZiAoaSA8IDQ4KSB7CiAgICAgIHQgKz0gZjMoYmwsIGNsLCBkbCkgKyBobFsyXQogICAgfSBlbHNlIGlmIChpIDwgNjQpIHsKICAgICAgdCArPSBmNChibCwgY2wsIGRsKSArIGhsWzNdCiAgICB9IGVsc2Ugey8vIGlmIChpPDgwKSB7CiAgICAgIHQgKz0gZjUoYmwsIGNsLCBkbCkgKyBobFs0XQogICAgfQogICAgdCA9IHQgfCAwCiAgICB0ID0gcm90bCh0LCBzbFtpXSkKICAgIHQgPSAodCArIGVsKSB8IDAKICAgIGFsID0gZWwKICAgIGVsID0gZGwKICAgIGRsID0gcm90bChjbCwgMTApCiAgICBjbCA9IGJsCiAgICBibCA9IHQKCiAgICB0ID0gKGFyICsgTVtvZmZzZXQgKyB6cltpXV0pIHwgMAogICAgaWYgKGkgPCAxNikgewogICAgICB0ICs9IGY1KGJyLCBjciwgZHIpICsgaHJbMF0KICAgIH0gZWxzZSBpZiAoaSA8IDMyKSB7CiAgICAgIHQgKz0gZjQoYnIsIGNyLCBkcikgKyBoclsxXQogICAgfSBlbHNlIGlmIChpIDwgNDgpIHsKICAgICAgdCArPSBmMyhiciwgY3IsIGRyKSArIGhyWzJdCiAgICB9IGVsc2UgaWYgKGkgPCA2NCkgewogICAgICB0ICs9IGYyKGJyLCBjciwgZHIpICsgaHJbM10KICAgIH0gZWxzZSB7Ly8gaWYgKGk8ODApIHsKICAgICAgdCArPSBmMShiciwgY3IsIGRyKSArIGhyWzRdCiAgICB9CgogICAgdCA9IHQgfCAwCiAgICB0ID0gcm90bCh0LCBzcltpXSkKICAgIHQgPSAodCArIGVyKSB8IDAKICAgIGFyID0gZXIKICAgIGVyID0gZHIKICAgIGRyID0gcm90bChjciwgMTApCiAgICBjciA9IGJyCiAgICBiciA9IHQKICB9CgogIC8vIGludGVybWVkaWF0ZSBoYXNoIHZhbHVlCiAgdCA9IChIWzFdICsgY2wgKyBkcikgfCAwCiAgSFsxXSA9IChIWzJdICsgZGwgKyBlcikgfCAwCiAgSFsyXSA9IChIWzNdICsgZWwgKyBhcikgfCAwCiAgSFszXSA9IChIWzRdICsgYWwgKyBicikgfCAwCiAgSFs0XSA9IChIWzBdICsgYmwgKyBjcikgfCAwCiAgSFswXSA9IHQKfQoKZnVuY3Rpb24gZjEgKHgsIHksIHopIHsKICByZXR1cm4gKCh4KSBeICh5KSBeICh6KSkKfQoKZnVuY3Rpb24gZjIgKHgsIHksIHopIHsKICByZXR1cm4gKCgoeCkgJiAoeSkpIHwgKCh+eCkgJiAoeikpKQp9CgpmdW5jdGlvbiBmMyAoeCwgeSwgeikgewogIHJldHVybiAoKCh4KSB8ICh+KHkpKSkgXiAoeikpCn0KCmZ1bmN0aW9uIGY0ICh4LCB5LCB6KSB7CiAgcmV0dXJuICgoKHgpICYgKHopKSB8ICgoeSkgJiAofih6KSkpKQp9CgpmdW5jdGlvbiBmNSAoeCwgeSwgeikgewogIHJldHVybiAoKHgpIF4gKCh5KSB8ICh+KHopKSkpCn0KCmZ1bmN0aW9uIHJvdGwgKHgsIG4pIHsKICByZXR1cm4gKHggPDwgbikgfCAoeCA+Pj4gKDMyIC0gbikpCn0KCmZ1bmN0aW9uIHJpcGVtZDE2MCAobWVzc2FnZSkgewogIHZhciBIID0gWzB4Njc0NTIzMDEsIDB4RUZDREFCODksIDB4OThCQURDRkUsIDB4MTAzMjU0NzYsIDB4QzNEMkUxRjBdCgogIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHsKICAgIG1lc3NhZ2UgPSBuZXcgQnVmZmVyKG1lc3NhZ2UsICd1dGY4JykKICB9CgogIHZhciBtID0gYnl0ZXNUb1dvcmRzKG1lc3NhZ2UpCgogIHZhciBuQml0c0xlZnQgPSBtZXNzYWdlLmxlbmd0aCAqIDgKICB2YXIgbkJpdHNUb3RhbCA9IG1lc3NhZ2UubGVuZ3RoICogOAoKICAvLyBBZGQgcGFkZGluZwogIG1bbkJpdHNMZWZ0ID4+PiA1XSB8PSAweDgwIDw8ICgyNCAtIG5CaXRzTGVmdCAlIDMyKQogIG1bKCgobkJpdHNMZWZ0ICsgNjQpID4+PiA5KSA8PCA0KSArIDE0XSA9ICgKICAgICgoKG5CaXRzVG90YWwgPDwgOCkgfCAobkJpdHNUb3RhbCA+Pj4gMjQpKSAmIDB4MDBmZjAwZmYpIHwKICAgICgoKG5CaXRzVG90YWwgPDwgMjQpIHwgKG5CaXRzVG90YWwgPj4+IDgpKSAmIDB4ZmYwMGZmMDApCiAgKQoKICBmb3IgKHZhciBpID0gMDsgaSA8IG0ubGVuZ3RoOyBpICs9IDE2KSB7CiAgICBwcm9jZXNzQmxvY2soSCwgbSwgaSkKICB9CgogIC8vIHN3YXAgZW5kaWFuCiAgZm9yIChpID0gMDsgaSA8IDU7IGkrKykgewogICAgLy8gc2hvcnRjdXQKICAgIHZhciBIX2kgPSBIW2ldCgogICAgLy8gU3dhcAogICAgSFtpXSA9ICgoKEhfaSA8PCA4KSB8IChIX2kgPj4+IDI0KSkgJiAweDAwZmYwMGZmKSB8CiAgICAgICgoKEhfaSA8PCAyNCkgfCAoSF9pID4+PiA4KSkgJiAweGZmMDBmZjAwKQogIH0KCiAgdmFyIGRpZ2VzdGJ5dGVzID0gd29yZHNUb0J5dGVzKEgpCiAgcmV0dXJuIG5ldyBCdWZmZXIoZGlnZXN0Ynl0ZXMpCn0KCm1vZHVsZS5leHBvcnRzID0gcmlwZW1kMTYwCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3Nn1dLDE2MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3IgUnVudGltZUNhdGFsb2d1ZS5qcyAKLy8gdmVyc2lvbjogMC4xLjAKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5SdW50aW1lQ2F0YWxvZ3VlPWUoKX19KGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIGZ1bmN0aW9uIHQoZSxyLG4pe2Z1bmN0aW9uIGkoYSxzKXtpZighclthXSl7aWYoIWVbYV0pe3ZhciB1PSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFzJiZ1KXJldHVybiB1KGEsITApO2lmKG8pcmV0dXJuIG8oYSwhMCk7dmFyIGM9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrYSsiJyIpO3Rocm93IGMuY29kZT0iTU9EVUxFX05PVF9GT1VORCIsY312YXIgbD1yW2FdPXtleHBvcnRzOnt9fTtlW2FdWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKHQpe3ZhciByPWVbYV1bMV1bdF07cmV0dXJuIGkocj9yOnQpfSxsLGwuZXhwb3J0cyx0LGUscixuKX1yZXR1cm4gclthXS5leHBvcnRzfWZvcih2YXIgbz0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxhPTA7YTxuLmxlbmd0aDthKyspaShuW2FdKTtyZXR1cm4gaX0oezE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2NyZWF0ZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIjoxOH1dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoxOX1dLDM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjoyMH1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjIxfV0sNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6MjJ9XSw2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSI6MjN9XSw3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wiOjI0fV0sODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wvaXRlcmF0b3IiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sL2l0ZXJhdG9yIjoyNX1dLDk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi9jbGFzc0NhbGxDaGVjay5qcyIpfSx7Ii4vY2xhc3NDYWxsQ2hlY2suanMiOjEwfV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDExOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vY3JlYXRlQ2xhc3MuanMiKX0seyIuL2NyZWF0ZUNsYXNzLmpzIjoxMn1dLDEyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBpPWUoIi4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLG89bihpKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsInZhbHVlImluIG4mJihuLndyaXRhYmxlPSEwKSwoMCxvWyJkZWZhdWx0Il0pKGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpfSx7Ii4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSI6Mn1dLDEzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBpPWUoIi4uL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxvPW4oaSksYT1lKCIuLi9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKSxzPW4oYSk7clsiZGVmYXVsdCJdPWZ1bmN0aW9uIHUoZSx0LHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBuPSgwLHNbImRlZmF1bHQiXSkoZSx0KTtpZih2b2lkIDA9PT1uKXt2YXIgaT0oMCxvWyJkZWZhdWx0Il0pKGUpO3JldHVybiBudWxsPT09aT92b2lkIDA6dShpLHQscil9aWYoInZhbHVlImluIG4pcmV0dXJuIG4udmFsdWU7dmFyIGE9bi5nZXQ7aWYodm9pZCAwIT09YSlyZXR1cm4gYS5jYWxsKHIpfX0seyIuLi9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjMsIi4uL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjR9XSwxNDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgaT1lKCIuLi9jb3JlLWpzL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIiksbz1uKGkpLGE9ZSgiLi4vY29yZS1qcy9vYmplY3QvY3JlYXRlIikscz1uKGEpLHU9ZSgiLi4vaGVscGVycy90eXBlb2YiKSxjPW4odSk7clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIisoInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOigwLGNbImRlZmF1bHQiXSkodCkpKTtlLnByb3RvdHlwZT0oMCxzWyJkZWZhdWx0Il0pKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYob1siZGVmYXVsdCJdPygwLG9bImRlZmF1bHQiXSkoZSx0KTplLl9fcHJvdG9fXz10KX19LHsiLi4vY29yZS1qcy9vYmplY3QvY3JlYXRlIjoxLCIuLi9jb3JlLWpzL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIjo1LCIuLi9oZWxwZXJzL3R5cGVvZiI6MTd9XSwxNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpfSx7Ii4vaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIjoxNn1dLDE2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3IuX19lc01vZHVsZT0hMCxyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19fSx7fV0sMTc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX12YXIgaT0iZnVuY3Rpb24iPT10eXBlb2YgX1N5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBfU3ltYm9sJGl0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBfU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09X1N5bWJvbD8ic3ltYm9sIjp0eXBlb2YgZX07ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yIiksYT1uKG8pLHM9ZSgiLi4vY29yZS1qcy9zeW1ib2wiKSx1PW4ocyk7clsiZGVmYXVsdCJdPSJmdW5jdGlvbiI9PXR5cGVvZiB1WyJkZWZhdWx0Il0mJiJzeW1ib2wiPT09aShhWyJkZWZhdWx0Il0pP2Z1bmN0aW9uKGUpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjppKGUpfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmImZ1bmN0aW9uIj09dHlwZW9mIHVbImRlZmF1bHQiXSYmZS5jb25zdHJ1Y3Rvcj09PXVbImRlZmF1bHQiXT8ic3ltYm9sIjoidW5kZWZpbmVkIj09dHlwZW9mIGU/InVuZGVmaW5lZCI6aShlKX19LHsiLi4vY29yZS1qcy9zeW1ib2wiOjcsIi4uL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yIjo4fV0sMTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jcmVhdGUoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy8kIjo1Nn1dLDE5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5zZXREZXNjKGUsdCxyKX19LHsiLi4vLi4vbW9kdWxlcy8kIjo1Nn1dLDIwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmdldERlc2MoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy8kIjo1NiwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6ODF9XSwyMTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmdldFByb3RvdHlwZU9mfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiOjgyfV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5zZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIjo4M31dLDIzOltmdW5jdGlvbihlLHQscil7ZSgiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLGUoIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLGUoIi4uL21vZHVsZXMvZXM2LnByb21pc2UiKSx0LmV4cG9ydHM9ZSgiLi4vbW9kdWxlcy8kLmNvcmUiKS5Qcm9taXNlfSx7Ii4uL21vZHVsZXMvJC5jb3JlIjozMSwiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6ODQsIi4uL21vZHVsZXMvZXM2LnByb21pc2UiOjg1LCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjg2LCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjg4fV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiKSxlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuU3ltYm9sfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6ODQsIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCI6ODd9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uLy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQud2tzIikoIml0ZXJhdG9yIil9LHsiLi4vLi4vbW9kdWxlcy8kLndrcyI6NzgsIi4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI6ODYsIi4uLy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI6ODh9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIGZ1bmN0aW9uISIpO3JldHVybiBlfX0se31dLDI3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKCl7fX0se31dLDI4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhbiBvYmplY3QhIik7cmV0dXJuIGV9fSx7Ii4vJC5pcy1vYmplY3QiOjQ5fV0sMjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIiksaT1lKCIuLyQud2tzIikoInRvU3RyaW5nVGFnIiksbz0iQXJndW1lbnRzIj09bihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyLGE7cmV0dXJuIHZvaWQgMD09PWU/IlVuZGVmaW5lZCI6bnVsbD09PWU/Ik51bGwiOiJzdHJpbmciPT10eXBlb2Yocj0odD1PYmplY3QoZSkpW2ldKT9yOm8/bih0KToiT2JqZWN0Ij09KGE9bih0KSkmJiJmdW5jdGlvbiI9PXR5cGVvZiB0LmNhbGxlZT8iQXJndW1lbnRzIjphfX0seyIuLyQuY29mIjozMCwiLi8kLndrcyI6Nzh9XSwzMDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbi5jYWxsKGUpLnNsaWNlKDgsLTEpfX0se31dLDMxOltmdW5jdGlvbihlLHQscil7dmFyIG49dC5leHBvcnRzPXt2ZXJzaW9uOiIxLjIuNiJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPW4pfSx7fV0sMzI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYS1mdW5jdGlvbiIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixpKXtyZXR1cm4gZS5jYWxsKHQscixuLGkpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0seyIuLyQuYS1mdW5jdGlvbiI6MjZ9XSwzMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZih2b2lkIDA9PWUpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIitlKTtyZXR1cm4gZX19LHt9XSwzNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hZSgiLi8kLmZhaWxzIikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSx7Ii4vJC5mYWlscyI6Mzh9XSwzNTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKSxpPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCxvPW4oaSkmJm4oaS5jcmVhdGVFbGVtZW50KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG8/aS5jcmVhdGVFbGVtZW50KGUpOnt9fX0seyIuLyQuZ2xvYmFsIjo0MSwiLi8kLmlzLW9iamVjdCI6NDl9XSwzNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uLmdldEtleXMoZSkscj1uLmdldFN5bWJvbHM7aWYocilmb3IodmFyIGksbz1yKGUpLGE9bi5pc0VudW0scz0wO28ubGVuZ3RoPnM7KWEuY2FsbChlLGk9b1tzKytdKSYmdC5wdXNoKGkpO3JldHVybiB0fX0seyIuLyQiOjU2fV0sMzc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksaT1lKCIuLyQuY29yZSIpLG89ZSgiLi8kLmN0eCIpLGE9InByb3RvdHlwZSIscz1mdW5jdGlvbihlLHQscil7dmFyIHUsYyxsLGY9ZSZzLkYscD1lJnMuRyxoPWUmcy5TLGQ9ZSZzLlAseT1lJnMuQixtPWUmcy5XLGc9cD9pOmlbdF18fChpW3RdPXt9KSx2PXA/bjpoP25bdF06KG5bdF18fHt9KVthXTtwJiYocj10KTtmb3IodSBpbiByKWM9IWYmJnYmJnUgaW4gdixjJiZ1IGluIGd8fChsPWM/dlt1XTpyW3VdLGdbdV09cCYmImZ1bmN0aW9uIiE9dHlwZW9mIHZbdV0/clt1XTp5JiZjP28obCxuKTptJiZ2W3VdPT1sP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZT9uZXcgZSh0KTplKHQpfTtyZXR1cm4gdFthXT1lW2FdLHR9KGwpOmQmJiJmdW5jdGlvbiI9PXR5cGVvZiBsP28oRnVuY3Rpb24uY2FsbCxsKTpsLGQmJigoZ1thXXx8KGdbYV09e30pKVt1XT1sKSl9O3MuRj0xLHMuRz0yLHMuUz00LHMuUD04LHMuQj0xNixzLlc9MzIsdC5leHBvcnRzPXN9LHsiLi8kLmNvcmUiOjMxLCIuLyQuY3R4IjozMiwiLi8kLmdsb2JhbCI6NDF9XSwzODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fX0se31dLDM5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmN0eCIpLGk9ZSgiLi8kLml0ZXItY2FsbCIpLG89ZSgiLi8kLmlzLWFycmF5LWl0ZXIiKSxhPWUoIi4vJC5hbi1vYmplY3QiKSxzPWUoIi4vJC50by1sZW5ndGgiKSx1PWUoIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGMpe3ZhciBsLGYscCxoPXUoZSksZD1uKHIsYyx0PzI6MSkseT0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBoKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpO2lmKG8oaCkpZm9yKGw9cyhlLmxlbmd0aCk7bD55O3krKyl0P2QoYShmPWVbeV0pWzBdLGZbMV0pOmQoZVt5XSk7ZWxzZSBmb3IocD1oLmNhbGwoZSk7IShmPXAubmV4dCgpKS5kb25lOylpKHAsZCxmLnZhbHVlLHQpfX0seyIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmN0eCI6MzIsIi4vJC5pcy1hcnJheS1pdGVyIjo0NywiLi8kLml0ZXItY2FsbCI6NTAsIi4vJC50by1sZW5ndGgiOjc1LCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6Nzl9XSw0MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pb2JqZWN0IiksaT1lKCIuLyQiKS5nZXROYW1lcyxvPXt9LnRvU3RyaW5nLGE9Im9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10scz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIGkoZSl9Y2F0Y2godCl7cmV0dXJuIGEuc2xpY2UoKX19O3QuZXhwb3J0cy5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGEmJiJbb2JqZWN0IFdpbmRvd10iPT1vLmNhbGwoZSk/cyhlKTppKG4oZSkpfX0seyIuLyQiOjU2LCIuLyQudG8taW9iamVjdCI6NzR9XSw0MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0se31dLDQyOltmdW5jdGlvbihlLHQscil7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQpfX0se31dLDQzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksaT1lKCIuLyQucHJvcGVydHktZGVzYyIpO3QuZXhwb3J0cz1lKCIuLyQuZGVzY3JpcHRvcnMiKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQsaSgxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LHsiLi8kIjo1NiwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLnByb3BlcnR5LWRlc2MiOjYxfV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LHsiLi8kLmdsb2JhbCI6NDF9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSx7fV0sNDY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4iU3RyaW5nIj09bihlKT9lLnNwbGl0KCIiKTpPYmplY3QoZSl9fSx7Ii4vJC5jb2YiOjMwfV0sNDc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIiksaT1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksbz1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobi5BcnJheT09PWV8fG9baV09PT1lKX19LHsiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC53a3MiOjc4fV0sNDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJBcnJheSI9PW4oZSl9fSx7Ii4vJC5jb2YiOjMwfV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0se31dLDUwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixpKXt0cnl7cmV0dXJuIGk/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2gobyl7dmFyIGE9ZVsicmV0dXJuIl07dGhyb3cgdm9pZCAwIT09YSYmbihhLmNhbGwoZSkpLG99fX0seyIuLyQuYW4tb2JqZWN0IjoyOH1dLDUxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLGk9ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxvPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGE9e307ZSgiLi8kLmhpZGUiKShhLGUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uLmNyZWF0ZShhLHtuZXh0OmkoMSxyKX0pLG8oZSx0KyIgSXRlcmF0b3IiKX19LHsiLi8kIjo1NiwiLi8kLmhpZGUiOjQzLCIuLyQucHJvcGVydHktZGVzYyI6NjEsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC53a3MiOjc4fV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmxpYnJhcnkiKSxpPWUoIi4vJC5leHBvcnQiKSxvPWUoIi4vJC5yZWRlZmluZSIpLGE9ZSgiLi8kLmhpZGUiKSxzPWUoIi4vJC5oYXMiKSx1PWUoIi4vJC5pdGVyYXRvcnMiKSxjPWUoIi4vJC5pdGVyLWNyZWF0ZSIpLGw9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksZj1lKCIuLyQiKS5nZXRQcm90byxwPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxoPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLGQ9IkBAaXRlcmF0b3IiLHk9ImtleXMiLG09InZhbHVlcyIsZz1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsdixiLF8sTyl7YyhyLHQsdik7dmFyICQsRSxQPWZ1bmN0aW9uKGUpe2lmKCFoJiZlIGluIHcpcmV0dXJuIHdbZV07c3dpdGNoKGUpe2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX07Y2FzZSBtOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LGo9dCsiIEl0ZXJhdG9yIixrPWI9PW0sUz0hMSx3PWUucHJvdG90eXBlLFI9d1twXXx8d1tkXXx8YiYmd1tiXSx4PVJ8fFAoYik7aWYoUil7dmFyIE09Zih4LmNhbGwobmV3IGUpKTtsKE0saiwhMCksIW4mJnModyxkKSYmYShNLHAsZyksayYmUi5uYW1lIT09bSYmKFM9ITAseD1mdW5jdGlvbigpe3JldHVybiBSLmNhbGwodGhpcyl9KX1pZihuJiYhT3x8IWgmJiFTJiZ3W3BdfHxhKHcscCx4KSx1W3RdPXgsdVtqXT1nLGIpaWYoJD17dmFsdWVzOms/eDpQKG0pLGtleXM6Xz94OlAoeSksZW50cmllczprP1AoImVudHJpZXMiKTp4fSxPKWZvcihFIGluICQpRSBpbiB3fHxvKHcsRSwkW0VdKTtlbHNlIGkoaS5QK2kuRiooaHx8UyksdCwkKTtyZXR1cm4gJH19LHsiLi8kIjo1NiwiLi8kLmV4cG9ydCI6MzcsIi4vJC5oYXMiOjQyLCIuLyQuaGlkZSI6NDMsIi4vJC5pdGVyLWNyZWF0ZSI6NTEsIi4vJC5pdGVyYXRvcnMiOjU1LCIuLyQubGlicmFyeSI6NTgsIi4vJC5yZWRlZmluZSI6NjMsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC53a3MiOjc4fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT0hMTt0cnl7dmFyIG89WzddW25dKCk7b1sicmV0dXJuIl09ZnVuY3Rpb24oKXtpPSEwfSxBcnJheS5mcm9tKG8sZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2goYSl7fXQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhaSlyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIG89WzddLGE9b1tuXSgpO2EubmV4dD1mdW5jdGlvbigpe3I9ITB9LG9bbl09ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZShvKX1jYXRjaChzKXt9cmV0dXJuIHJ9fSx7Ii4vJC53a3MiOjc4fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSx7fV0sNTU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e319LHt9XSw1NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU9iamVjdDt0LmV4cG9ydHM9e2NyZWF0ZTpuLmNyZWF0ZSxnZXRQcm90bzpuLmdldFByb3RvdHlwZU9mLGlzRW51bTp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxnZXREZXNjOm4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHNldERlc2M6bi5kZWZpbmVQcm9wZXJ0eSxzZXREZXNjczpuLmRlZmluZVByb3BlcnRpZXMsZ2V0S2V5czpuLmtleXMsZ2V0TmFtZXM6bi5nZXRPd25Qcm9wZXJ0eU5hbWVzLGdldFN5bWJvbHM6bi5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZWFjaDpbXS5mb3JFYWNofX0se31dLDU3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksaT1lKCIuLyQudG8taW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcixvPWkoZSksYT1uLmdldEtleXMobykscz1hLmxlbmd0aCx1PTA7cz51OylpZihvW3I9YVt1KytdXT09PXQpcmV0dXJuIHJ9fSx7Ii4vJCI6NTYsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDU4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSEwfSx7fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixpLG8sYT1lKCIuLyQuZ2xvYmFsIikscz1lKCIuLyQudGFzayIpLnNldCx1PWEuTXV0YXRpb25PYnNlcnZlcnx8YS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGM9YS5wcm9jZXNzLGw9YS5Qcm9taXNlLGY9InByb2Nlc3MiPT1lKCIuLyQuY29mIikoYykscD1mdW5jdGlvbigpe3ZhciBlLHQscjtmb3IoZiYmKGU9Yy5kb21haW4pJiYoYy5kb21haW49bnVsbCxlLmV4aXQoKSk7bjspdD1uLmRvbWFpbixyPW4uZm4sdCYmdC5lbnRlcigpLHIoKSx0JiZ0LmV4aXQoKSxuPW4ubmV4dDtpPXZvaWQgMCxlJiZlLmVudGVyKCl9O2lmKGYpbz1mdW5jdGlvbigpe2MubmV4dFRpY2socCl9O2Vsc2UgaWYodSl7dmFyIGg9MSxkPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgdShwKS5vYnNlcnZlKGQse2NoYXJhY3RlckRhdGE6ITB9KSxvPWZ1bmN0aW9uKCl7ZC5kYXRhPWg9LWh9fWVsc2Ugbz1sJiZsLnJlc29sdmU/ZnVuY3Rpb24oKXtsLnJlc29sdmUoKS50aGVuKHApfTpmdW5jdGlvbigpe3MuY2FsbChhLHApfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDAsZG9tYWluOmYmJmMuZG9tYWlufTtpJiYoaS5uZXh0PXQpLG58fChuPXQsbygpKSxpPXR9fSx7Ii4vJC5jb2YiOjMwLCIuLyQuZ2xvYmFsIjo0MSwiLi8kLnRhc2siOjcyfV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQuY29yZSIpLG89ZSgiLi8kLmZhaWxzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KGkuT2JqZWN0fHx7fSlbZV18fE9iamVjdFtlXSxhPXt9O2FbZV09dChyKSxuKG4uUytuLkYqbyhmdW5jdGlvbigpe3IoMSl9KSwiT2JqZWN0IixhKX19LHsiLi8kLmNvcmUiOjMxLCIuLyQuZXhwb3J0IjozNywiLi8kLmZhaWxzIjozOH1dLDYxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0se31dLDYyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnJlZGVmaW5lIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpbihlLHIsdFtyXSk7cmV0dXJuIGV9fSx7Ii4vJC5yZWRlZmluZSI6NjN9XSw2MzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuaGlkZSIpfSx7Ii4vJC5oaWRlIjo0M31dLDY0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPU9iamVjdC5pc3x8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQ/MCE9PWV8fDEvZT09PTEvdDplIT1lJiZ0IT10fX0se31dLDY1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuZ2V0RGVzYyxpPWUoIi4vJC5pcy1vYmplY3QiKSxvPWUoIi4vJC5hbi1vYmplY3QiKSxhPWZ1bmN0aW9uKGUsdCl7aWYobyhlKSwhaSh0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHQscixpKXt0cnl7aT1lKCIuLyQuY3R4IikoRnVuY3Rpb24uY2FsbCxuKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxpKHQsW10pLHI9ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKG8pe3I9ITB9cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEoZSx0KSxyP2UuX19wcm90b19fPXQ6aShlLHQpLGV9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazphfX0seyIuLyQiOjU2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmN0eCI6MzIsIi4vJC5pcy1vYmplY3QiOjQ5fV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJCIpLG89ZSgiLi8kLmRlc2NyaXB0b3JzIiksYT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTtvJiZ0JiYhdFthXSYmaS5zZXREZXNjKHQsYSx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfX0seyIuLyQiOjU2LCIuLyQuY29yZSI6MzEsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC53a3MiOjc4fV0sNjc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5zZXREZXNjLGk9ZSgiLi8kLmhhcyIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIWkoZT1yP2U6ZS5wcm90b3R5cGUsbykmJm4oZSxvLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0seyIuLyQiOjU2LCIuLyQuaGFzIjo0MiwiLi8kLndrcyI6Nzh9XSw2ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxpPSJfX2NvcmUtanNfc2hhcmVkX18iLG89bltpXXx8KG5baV09e30pO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gb1tlXXx8KG9bZV09e30pfX0seyIuLyQuZ2xvYmFsIjo0MX1dLDY5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpLGk9ZSgiLi8kLmEtZnVuY3Rpb24iKSxvPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLGE9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09YXx8dm9pZCAwPT0ocj1uKGEpW29dKT90Omkocil9fSx7Ii4vJC5hLWZ1bmN0aW9uIjoyNiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC53a3MiOjc4fV0sNzA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IFR5cGVFcnJvcihyKyI6IHVzZSB0aGUgJ25ldycgb3BlcmF0b3IhIik7cmV0dXJuIGV9fSx7fV0sNzE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLGk9ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIG8sYSxzPVN0cmluZyhpKHQpKSx1PW4ociksYz1zLmxlbmd0aDtyZXR1cm4gMD51fHx1Pj1jP2U/IiI6dm9pZCAwOihvPXMuY2hhckNvZGVBdCh1KSw1NTI5Nj5vfHxvPjU2MzE5fHx1KzE9PT1jfHwoYT1zLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fGE+NTczNDM/ZT9zLmNoYXJBdCh1KTpvOmU/cy5zbGljZSh1LHUrMik6KG8tNTUyOTY8PDEwKSsoYS01NjMyMCkrNjU1MzYpfX19LHsiLi8kLmRlZmluZWQiOjMzLCIuLyQudG8taW50ZWdlciI6NzN9XSw3MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGksbyxhPWUoIi4vJC5jdHgiKSxzPWUoIi4vJC5pbnZva2UiKSx1PWUoIi4vJC5odG1sIiksYz1lKCIuLyQuZG9tLWNyZWF0ZSIpLGw9ZSgiLi8kLmdsb2JhbCIpLGY9bC5wcm9jZXNzLHA9bC5zZXRJbW1lZGlhdGUsaD1sLmNsZWFySW1tZWRpYXRlLGQ9bC5NZXNzYWdlQ2hhbm5lbCx5PTAsbT17fSxnPSJvbnJlYWR5c3RhdGVjaGFuZ2UiLHY9ZnVuY3Rpb24oKXt2YXIgZT0rdGhpcztpZihtLmhhc093blByb3BlcnR5KGUpKXt2YXIgdD1tW2VdO2RlbGV0ZSBtW2VdLHQoKX19LGI9ZnVuY3Rpb24oZSl7di5jYWxsKGUuZGF0YSl9O3AmJmh8fChwPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7YXJndW1lbnRzLmxlbmd0aD5yOyl0LnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiBtWysreV09ZnVuY3Rpb24oKXtzKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4oeSkseX0saD1mdW5jdGlvbihlKXtkZWxldGUgbVtlXX0sInByb2Nlc3MiPT1lKCIuLyQuY29mIikoZik/bj1mdW5jdGlvbihlKXtmLm5leHRUaWNrKGEodixlLDEpKX06ZD8oaT1uZXcgZCxvPWkucG9ydDIsaS5wb3J0MS5vbm1lc3NhZ2U9YixuPWEoby5wb3N0TWVzc2FnZSxvLDEpKTpsLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWwuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtsLnBvc3RNZXNzYWdlKGUrIiIsIioiKX0sbC5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixiLCExKSk6bj1nIGluIGMoInNjcmlwdCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYygic2NyaXB0IikpW2ddPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSx2LmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGEodixlLDEpLDApfSksdC5leHBvcnRzPXtzZXQ6cCxjbGVhcjpofX0seyIuLyQuY29mIjozMCwiLi8kLmN0eCI6MzIsIi4vJC5kb20tY3JlYXRlIjozNSwiLi8kLmdsb2JhbCI6NDEsIi4vJC5odG1sIjo0NCwiLi8kLmludm9rZSI6NDV9XSw3MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguY2VpbCxpPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/aTpuKShlKX19LHt9XSw3NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pb2JqZWN0IiksaT1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihpKGUpKX19LHsiLi8kLmRlZmluZWQiOjMzLCIuLyQuaW9iamVjdCI6NDZ9XSw3NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksaT1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9pKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LHsiLi8kLnRvLWludGVnZXIiOjczfV0sNzY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0seyIuLyQuZGVmaW5lZCI6MzN9XSw3NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAsaT1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWU/IiI6ZSwiKV8iLCgrK24raSkudG9TdHJpbmcoMzYpKX19LHt9XSw3ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5zaGFyZWQiKSgid2tzIiksaT1lKCIuLyQudWlkIiksbz1lKCIuLyQuZ2xvYmFsIikuU3ltYm9sO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09byYmb1tlXXx8KG98fGkpKCJTeW1ib2wuIitlKSl9fSx7Ii4vJC5nbG9iYWwiOjQxLCIuLyQuc2hhcmVkIjo2OCwiLi8kLnVpZCI6Nzd9XSw3OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jbGFzc29mIiksaT1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksbz1lKCIuLyQuaXRlcmF0b3JzIik7dC5leHBvcnRzPWUoIi4vJC5jb3JlIikuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZT9lW2ldfHxlWyJAQGl0ZXJhdG9yIl18fG9bbihlKV06dm9pZCAwfX0seyIuLyQuY2xhc3NvZiI6MjksIi4vJC5jb3JlIjozMSwiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC53a3MiOjc4fV0sODA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmFkZC10by11bnNjb3BhYmxlcyIpLGk9ZSgiLi8kLml0ZXItc3RlcCIpLG89ZSgiLi8kLml0ZXJhdG9ycyIpLGE9ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZSgiLi8kLml0ZXItZGVmaW5lIikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9YShlKSx0aGlzLl9pPTAsdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsaSgxKSk6ImtleXMiPT10P2koMCxyKToidmFsdWVzIj09dD9pKDAsZVtyXSk6aSgwLFtyLGVbcl1dKX0sInZhbHVlcyIpLG8uQXJndW1lbnRzPW8uQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0seyIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIjoyNywiLi8kLml0ZXItZGVmaW5lIjo1MiwiLi8kLml0ZXItc3RlcCI6NTQsIi4vJC5pdGVyYXRvcnMiOjU1LCIuLyQudG8taW9iamVjdCI6NzR9XSw4MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXtyZXR1cm4gZShuKHQpLHIpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo2MCwiLi8kLnRvLWlvYmplY3QiOjc0fV0sODI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8tb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgiZ2V0UHJvdG90eXBlT2YiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZShuKHQpKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1vYmplY3QiOjc2fV0sODM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iik7bihuLlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOmUoIi4vJC5zZXQtcHJvdG8iKS5zZXR9KX0seyIuLyQuZXhwb3J0IjozNywiLi8kLnNldC1wcm90byI6NjV9XSw4NDpbZnVuY3Rpb24oZSx0LHIpe30se31dLDg1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLGk9ZSgiLi8kIiksbz1lKCIuLyQubGlicmFyeSIpLGE9ZSgiLi8kLmdsb2JhbCIpLHM9ZSgiLi8kLmN0eCIpLHU9ZSgiLi8kLmNsYXNzb2YiKSxjPWUoIi4vJC5leHBvcnQiKSxsPWUoIi4vJC5pcy1vYmplY3QiKSxmPWUoIi4vJC5hbi1vYmplY3QiKSxwPWUoIi4vJC5hLWZ1bmN0aW9uIiksaD1lKCIuLyQuc3RyaWN0LW5ldyIpLGQ9ZSgiLi8kLmZvci1vZiIpLHk9ZSgiLi8kLnNldC1wcm90byIpLnNldCxtPWUoIi4vJC5zYW1lLXZhbHVlIiksZz1lKCIuLyQud2tzIikoInNwZWNpZXMiKSx2PWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksYj1lKCIuLyQubWljcm90YXNrIiksXz0iUHJvbWlzZSIsTz1hLnByb2Nlc3MsJD0icHJvY2VzcyI9PXUoTyksRT1hW19dLFA9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEUoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSxFLnJlc29sdmUodCk9PT10fSxqPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgRShlKTtyZXR1cm4geShyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPUUmJkUucmVzb2x2ZSYmUCgpLHkodCxFKSx0LnByb3RvdHlwZT1pLmNyZWF0ZShFLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTtFLnJlc29sdmUoaS5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChvKXtyPSExfXJldHVybiByfSgpLGs9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbyYmZT09PUUmJnQ9PT1uPyEwOm0oZSx0KX0sUz1mdW5jdGlvbihlKXt2YXIgdD1mKGUpW2ddO3JldHVybiB2b2lkIDAhPXQ/dDplfSx3PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBsKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFI9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPXAodCksdGhpcy5yZWplY3Q9cChyKX0seD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LE09ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO2IoZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LGk9MT09ZS5zLG89MCxzPWZ1bmN0aW9uKHQpe3ZhciByLG8sYT1pP3Qub2s6dC5mYWlsLHM9dC5yZXNvbHZlLHU9dC5yZWplY3Q7dHJ5e2E/KGl8fChlLmg9ITApLHI9YT09PSEwP246YShuKSxyPT09dC5wcm9taXNlP3UoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihvPXcocikpP28uY2FsbChyLHMsdSk6cyhyKSk6dShuKX1jYXRjaChjKXt1KGMpfX07ci5sZW5ndGg+bzspcyhyW28rK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLGk9ZS5wO0EoaSkmJigkP08uZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLGkpOih0PWEub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6aSxyZWFzb246bn0pOihyPWEuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxBPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLGk9MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5pOylpZih0PW5baSsrXSx0LmZhaWx8fCFBKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LE49ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLE0odCwhMCkpfSxUPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PXcoZSkpP2IoZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxzKFQsbiwxKSxzKE4sbiwxKSl9Y2F0Y2goaSl7Ti5jYWxsKG4saSl9fSk6KHIudj1lLHIucz0xLE0ociwhMSkpfWNhdGNoKG4pe04uY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2p8fChFPWZ1bmN0aW9uKGUpe3AoZSk7dmFyIHQ9dGhpcy5fZD17cDpoKHRoaXMsRSxfKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UocyhULHQsMSkscyhOLHQsMSkpfWNhdGNoKHIpe04uY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKEUucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFIodih0aGlzLEUpKSxuPXIucHJvbWlzZSxpPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsaS5jLnB1c2gociksaS5hJiZpLmEucHVzaChyKSxpLnMmJk0oaSwhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksYyhjLkcrYy5XK2MuRiohaix7UHJvbWlzZTpFfSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikoRSxfKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShfKSxuPWUoIi4vJC5jb3JlIilbX10sYyhjLlMrYy5GKiFqLF8se3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUih0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSxjKGMuUytjLkYqKCFqfHxQKCEwKSksXyx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgRSYmayhlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBSKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSxjKGMuUytjLkYqIShqJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXtFLmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLF8se2FsbDpmdW5jdGlvbihlKXt2YXIgdD1TKHRoaXMpLHI9bmV3IFIodCksbj1yLnJlc29sdmUsbz1yLnJlamVjdCxhPVtdLHM9eChmdW5jdGlvbigpe2QoZSwhMSxhLnB1c2gsYSk7dmFyIHI9YS5sZW5ndGgscz1BcnJheShyKTtyP2kuZWFjaC5jYWxsKGEsZnVuY3Rpb24oZSxpKXt2YXIgYT0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXthfHwoYT0hMCxzW2ldPWUsLS1yfHxuKHMpKX0sbyl9KTpuKHMpfSk7cmV0dXJuIHMmJm8ocy5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PVModGhpcykscj1uZXcgUih0KSxuPXIucmVqZWN0LGk9eChmdW5jdGlvbigpe2QoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBpJiZuKGkuZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjU2LCIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY2xhc3NvZiI6MjksIi4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5leHBvcnQiOjM3LCIuLyQuZm9yLW9mIjozOSwiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5LCIuLyQuaXRlci1kZXRlY3QiOjUzLCIuLyQubGlicmFyeSI6NTgsIi4vJC5taWNyb3Rhc2siOjU5LCIuLyQucmVkZWZpbmUtYWxsIjo2MiwiLi8kLnNhbWUtdmFsdWUiOjY0LCIuLyQuc2V0LXByb3RvIjo2NSwiLi8kLnNldC1zcGVjaWVzIjo2NiwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjY5LCIuLyQuc3RyaWN0LW5ldyI6NzAsIi4vJC53a3MiOjc4fV0sODY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5zdHJpbmctYXQiOjcxfV0sODc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksaT1lKCIuLyQuZ2xvYmFsIiksbz1lKCIuLyQuaGFzIiksYT1lKCIuLyQuZGVzY3JpcHRvcnMiKSxzPWUoIi4vJC5leHBvcnQiKSx1PWUoIi4vJC5yZWRlZmluZSIpLGM9ZSgiLi8kLmZhaWxzIiksbD1lKCIuLyQuc2hhcmVkIiksZj1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxwPWUoIi4vJC51aWQiKSxoPWUoIi4vJC53a3MiKSxkPWUoIi4vJC5rZXlvZiIpLHk9ZSgiLi8kLmdldC1uYW1lcyIpLG09ZSgiLi8kLmVudW0ta2V5cyIpLGc9ZSgiLi8kLmlzLWFycmF5Iiksdj1lKCIuLyQuYW4tb2JqZWN0IiksYj1lKCIuLyQudG8taW9iamVjdCIpLF89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxPPW4uZ2V0RGVzYywkPW4uc2V0RGVzYyxFPW4uY3JlYXRlLFA9eS5nZXQsaj1pLlN5bWJvbCxrPWkuSlNPTixTPWsmJmsuc3RyaW5naWZ5LHc9ITEsUj1oKCJfaGlkZGVuIikseD1uLmlzRW51bSxNPWwoInN5bWJvbC1yZWdpc3RyeSIpLEE9bCgic3ltYm9scyIpLE49ImZ1bmN0aW9uIj09dHlwZW9mIGosVD1PYmplY3QucHJvdG90eXBlLEk9YSYmYyhmdW5jdGlvbigpe3JldHVybiA3IT1FKCQoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49TyhULHQpO24mJmRlbGV0ZSBUW3RdLCQoZSx0LHIpLG4mJmUhPT1UJiYkKFQsdCxuKX06JCxDPWZ1bmN0aW9uKGUpe3ZhciB0PUFbZV09RShqLnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSxhJiZ3JiZJKFQsZSx7Y29uZmlndXJhYmxlOiEwLHNldDpmdW5jdGlvbih0KXtvKHRoaXMsUikmJm8odGhpc1tSXSxlKSYmKHRoaXNbUl1bZV09ITEpLEkodGhpcyxlLF8oMSx0KSl9fSksdH0sVT1mdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV9LEQ9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiByJiZvKEEsdCk/KHIuZW51bWVyYWJsZT8obyhlLFIpJiZlW1JdW3RdJiYoZVtSXVt0XT0hMSkscj1FKHIse2VudW1lcmFibGU6XygwLCExKX0pKToobyhlLFIpfHwkKGUsUixfKDEse30pKSxlW1JdW3RdPSEwKSxJKGUsdCxyKSk6JChlLHQscil9LEw9ZnVuY3Rpb24oZSx0KXt2KGUpO2Zvcih2YXIgcixuPW0odD1iKHQpKSxpPTAsbz1uLmxlbmd0aDtvPmk7KUQoZSxyPW5baSsrXSx0W3JdKTtyZXR1cm4gZX0sRj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P0UoZSk6TChFKGUpLHQpfSxIPWZ1bmN0aW9uKGUpe3ZhciB0PXguY2FsbCh0aGlzLGUpO3JldHVybiB0fHwhbyh0aGlzLGUpfHwhbyhBLGUpfHxvKHRoaXMsUikmJnRoaXNbUl1bZV0/dDohMH0sWT1mdW5jdGlvbihlLHQpe3ZhciByPU8oZT1iKGUpLHQpO3JldHVybiFyfHwhbyhBLHQpfHxvKGUsUikmJmVbUl1bdF18fChyLmVudW1lcmFibGU9ITApLHJ9LEI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9UChiKGUpKSxuPVtdLGk9MDtyLmxlbmd0aD5pOylvKEEsdD1yW2krK10pfHx0PT1SfHxuLnB1c2godCk7cmV0dXJuIG59LEs9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9UChiKGUpKSxuPVtdLGk9MDtyLmxlbmd0aD5pOylvKEEsdD1yW2krK10pJiZuLnB1c2goQVt0XSk7cmV0dXJuIG59LHE9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSYmIVUoZSkpe2Zvcih2YXIgdCxyLG49W2VdLGk9MSxvPWFyZ3VtZW50cztvLmxlbmd0aD5pOyluLnB1c2gob1tpKytdKTtyZXR1cm4gdD1uWzFdLCJmdW5jdGlvbiI9PXR5cGVvZiB0JiYocj10KSwocnx8IWcodCkpJiYodD1mdW5jdGlvbihlLHQpe3JldHVybiByJiYodD1yLmNhbGwodGhpcyxlLHQpKSxVKHQpP3ZvaWQgMDp0fSksblsxXT10LFMuYXBwbHkoayxuKX19LEo9YyhmdW5jdGlvbigpe3ZhciBlPWooKTtyZXR1cm4iW251bGxdIiE9UyhbZV0pfHwie30iIT1TKHthOmV9KXx8Int9IiE9UyhPYmplY3QoZSkpfSk7Tnx8KGo9ZnVuY3Rpb24oKXtpZihVKHRoaXMpKXRocm93IFR5cGVFcnJvcigiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIik7cmV0dXJuIEMocChhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCkpfSx1KGoucHJvdG90eXBlLCJ0b1N0cmluZyIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLFU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBqfSxuLmNyZWF0ZT1GLG4uaXNFbnVtPUgsbi5nZXREZXNjPVksbi5zZXREZXNjPUQsbi5zZXREZXNjcz1MLG4uZ2V0TmFtZXM9eS5nZXQ9QixuLmdldFN5bWJvbHM9SyxhJiYhZSgiLi8kLmxpYnJhcnkiKSYmdShULCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsSCwhMCkpO3ZhciBHPXsiZm9yIjpmdW5jdGlvbihlKXtyZXR1cm4gbyhNLGUrPSIiKT9NW2VdOk1bZV09aihlKX0sa2V5Rm9yOmZ1bmN0aW9uKGUpe3JldHVybiBkKE0sZSl9LHVzZVNldHRlcjpmdW5jdGlvbigpe3c9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe3c9ITF9fTtuLmVhY2guY2FsbCgiaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMiLnNwbGl0KCIsIiksZnVuY3Rpb24oZSl7dmFyIHQ9aChlKTtHW2VdPU4/dDpDKHQpfSksdz0hMCxzKHMuRytzLlcse1N5bWJvbDpqfSkscyhzLlMsIlN5bWJvbCIsRykscyhzLlMrcy5GKiFOLCJPYmplY3QiLHtjcmVhdGU6RixkZWZpbmVQcm9wZXJ0eTpELGRlZmluZVByb3BlcnRpZXM6TCxnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6WSxnZXRPd25Qcm9wZXJ0eU5hbWVzOkIsZ2V0T3duUHJvcGVydHlTeW1ib2xzOkt9KSxrJiZzKHMuUytzLkYqKCFOfHxKKSwiSlNPTiIse3N0cmluZ2lmeTpxfSksZihqLCJTeW1ib2wiKSxmKE1hdGgsIk1hdGgiLCEwKSxmKGkuSlNPTiwiSlNPTiIsITApfSx7Ii4vJCI6NTYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQuZW51bS1rZXlzIjozNiwiLi8kLmV4cG9ydCI6MzcsIi4vJC5mYWlscyI6MzgsIi4vJC5nZXQtbmFtZXMiOjQwLCIuLyQuZ2xvYmFsIjo0MSwiLi8kLmhhcyI6NDIsIi4vJC5pcy1hcnJheSI6NDgsIi4vJC5rZXlvZiI6NTcsIi4vJC5saWJyYXJ5Ijo1OCwiLi8kLnByb3BlcnR5LWRlc2MiOjYxLCIuLyQucmVkZWZpbmUiOjYzLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQuc2hhcmVkIjo2OCwiLi8kLnRvLWlvYmplY3QiOjc0LCIuLyQudWlkIjo3NywiLi8kLndrcyI6Nzh9XSw4ODpbZnVuY3Rpb24oZSx0LHIpe2UoIi4vZXM2LmFycmF5Lml0ZXJhdG9yIik7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpO24uTm9kZUxpc3Q9bi5IVE1MQ29sbGVjdGlvbj1uLkFycmF5fSx7Ii4vJC5pdGVyYXRvcnMiOjU1LCIuL2VzNi5hcnJheS5pdGVyYXRvciI6ODB9XSw4OTpbZnVuY3Rpb24odCxyLG4peyFmdW5jdGlvbih0LG4peyJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFtZD9lKFtdLG4pOiJ1bmRlZmluZWQiIT10eXBlb2YgciYmci5leHBvcnRzP3IuZXhwb3J0cz1uKCk6dC50djQ9bigpfSh0aGlzLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZW5jb2RlVVJJKGUpLnJlcGxhY2UoLyUyNVswLTldWzAtOV0vZyxmdW5jdGlvbihlKXtyZXR1cm4iJSIrZS5zdWJzdHJpbmcoMyl9KX1mdW5jdGlvbiB0KHQpe3ZhciByPSIiO3BbdC5jaGFyQXQoMCldJiYocj10LmNoYXJBdCgwKSx0PXQuc3Vic3RyaW5nKDEpKTt2YXIgbj0iIixpPSIiLG89ITAsYT0hMSxzPSExOyIrIj09PXI/bz0hMToiLiI9PT1yPyhpPSIuIixuPSIuIik6Ii8iPT09cj8oaT0iLyIsbj0iLyIpOiIjIj09PXI/KGk9IiMiLG89ITEpOiI7Ij09PXI/KGk9IjsiLG49IjsiLGE9ITAscz0hMCk6Ij8iPT09cj8oaT0iPyIsbj0iJiIsYT0hMCk6IiYiPT09ciYmKGk9IiYiLG49IiYiLGE9ITApO2Zvcih2YXIgdT1bXSxjPXQuc3BsaXQoIiwiKSxsPVtdLGY9e30sZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgeT1jW2RdLG09bnVsbDtpZigtMSE9PXkuaW5kZXhPZigiOiIpKXt2YXIgZz15LnNwbGl0KCI6Iik7eT1nWzBdLG09cGFyc2VJbnQoZ1sxXSwxMCl9Zm9yKHZhciB2PXt9O2hbeS5jaGFyQXQoeS5sZW5ndGgtMSldOyl2W3kuY2hhckF0KHkubGVuZ3RoLTEpXT0hMCx5PXkuc3Vic3RyaW5nKDAseS5sZW5ndGgtMSk7dmFyIGI9e3RydW5jYXRlOm0sbmFtZTp5LHN1ZmZpY2VzOnZ9O2wucHVzaChiKSxmW3ldPWIsdS5wdXNoKHkpfXZhciBfPWZ1bmN0aW9uKHQpe2Zvcih2YXIgcj0iIix1PTAsYz0wO2M8bC5sZW5ndGg7YysrKXt2YXIgZj1sW2NdLHA9dChmLm5hbWUpO2lmKG51bGw9PT1wfHx2b2lkIDA9PT1wfHxBcnJheS5pc0FycmF5KHApJiYwPT09cC5sZW5ndGh8fCJvYmplY3QiPT10eXBlb2YgcCYmMD09PU9iamVjdC5rZXlzKHApLmxlbmd0aCl1Kys7ZWxzZSBpZihyKz1jPT09dT9pOm58fCIsIixBcnJheS5pc0FycmF5KHApKXthJiYocis9Zi5uYW1lKyI9Iik7Zm9yKHZhciBoPTA7aDxwLmxlbmd0aDtoKyspaD4wJiYocis9Zi5zdWZmaWNlc1siKiJdP258fCIsIjoiLCIsZi5zdWZmaWNlc1siKiJdJiZhJiYocis9Zi5uYW1lKyI9IikpLHIrPW8/ZW5jb2RlVVJJQ29tcG9uZW50KHBbaF0pLnJlcGxhY2UoLyEvZywiJTIxIik6ZShwW2hdKX1lbHNlIGlmKCJvYmplY3QiPT10eXBlb2YgcCl7YSYmIWYuc3VmZmljZXNbIioiXSYmKHIrPWYubmFtZSsiPSIpO3ZhciBkPSEwO2Zvcih2YXIgeSBpbiBwKWR8fChyKz1mLnN1ZmZpY2VzWyIqIl0/bnx8IiwiOiIsIiksZD0hMSxyKz1vP2VuY29kZVVSSUNvbXBvbmVudCh5KS5yZXBsYWNlKC8hL2csIiUyMSIpOmUoeSkscis9Zi5zdWZmaWNlc1siKiJdPyI9IjoiLCIscis9bz9lbmNvZGVVUklDb21wb25lbnQocFt5XSkucmVwbGFjZSgvIS9nLCIlMjEiKTplKHBbeV0pfWVsc2UgYSYmKHIrPWYubmFtZSxzJiYiIj09PXB8fChyKz0iPSIpKSxudWxsIT1mLnRydW5jYXRlJiYocD1wLnN1YnN0cmluZygwLGYudHJ1bmNhdGUpKSxyKz1vP2VuY29kZVVSSUNvbXBvbmVudChwKS5yZXBsYWNlKC8hL2csIiUyMSIpOmUocCl9cmV0dXJuIHJ9O3JldHVybiBfLnZhck5hbWVzPXUse3ByZWZpeDppLHN1YnN0aXR1dGlvbjpffX1mdW5jdGlvbiByKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHIpKXJldHVybiBuZXcgcihlKTtmb3IodmFyIG49ZS5zcGxpdCgieyIpLGk9W24uc2hpZnQoKV0sbz1bXSxhPVtdLHM9W107bi5sZW5ndGg+MDspe3ZhciB1PW4uc2hpZnQoKSxjPXUuc3BsaXQoIn0iKVswXSxsPXUuc3Vic3RyaW5nKGMubGVuZ3RoKzEpLGY9dChjKTthLnB1c2goZi5zdWJzdGl0dXRpb24pLG8ucHVzaChmLnByZWZpeCksaS5wdXNoKGwpLHM9cy5jb25jYXQoZi5zdWJzdGl0dXRpb24udmFyTmFtZXMpfXRoaXMuZmlsbD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9aVswXSxyPTA7cjxhLmxlbmd0aDtyKyspe3ZhciBuPWFbcl07dCs9bihlKSx0Kz1pW3IrMV19cmV0dXJuIHR9LHRoaXMudmFyTmFtZXM9cyx0aGlzLnRlbXBsYXRlPWV9ZnVuY3Rpb24gbihlLHQpe2lmKGU9PT10KXJldHVybiEwO2lmKGUmJnQmJiJvYmplY3QiPT10eXBlb2YgZSYmIm9iamVjdCI9PXR5cGVvZiB0KXtpZihBcnJheS5pc0FycmF5KGUpIT09QXJyYXkuaXNBcnJheSh0KSlyZXR1cm4hMTtpZihBcnJheS5pc0FycmF5KGUpKXtpZihlLmxlbmd0aCE9PXQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWlmKCFuKGVbcl0sdFtyXSkpcmV0dXJuITF9ZWxzZXt2YXIgaTtmb3IoaSBpbiBlKWlmKHZvaWQgMD09PXRbaV0mJnZvaWQgMCE9PWVbaV0pcmV0dXJuITE7Zm9yKGkgaW4gdClpZih2b2lkIDA9PT1lW2ldJiZ2b2lkIDAhPT10W2ldKXJldHVybiExO2ZvcihpIGluIGUpaWYoIW4oZVtpXSx0W2ldKSlyZXR1cm4hMX1yZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBpKGUpe3ZhciB0PVN0cmluZyhlKS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIikubWF0Y2goL14oW146XC8/I10rOik/KFwvXC8oPzpbXjpAXSooPzo6W146QF0qKT9AKT8oKFteOlwvPyNdKikoPzo6KFxkKikpPykpPyhbXj8jXSopKFw/W14jXSopPygjW1xzXFNdKik/Lyk7cmV0dXJuIHQ/e2hyZWY6dFswXXx8IiIscHJvdG9jb2w6dFsxXXx8IiIsYXV0aG9yaXR5OnRbMl18fCIiLGhvc3Q6dFszXXx8IiIsaG9zdG5hbWU6dFs0XXx8IiIscG9ydDp0WzVdfHwiIixwYXRobmFtZTp0WzZdfHwiIixzZWFyY2g6dFs3XXx8IiIsaGFzaDp0WzhdfHwiIn06bnVsbH1mdW5jdGlvbiBvKGUsdCl7ZnVuY3Rpb24gcihlKXt2YXIgdD1bXTtyZXR1cm4gZS5yZXBsYWNlKC9eKFwuXC4/KFwvfCQpKSsvLCIiKS5yZXBsYWNlKC9cLyhcLihcL3wkKSkrL2csIi8iKS5yZXBsYWNlKC9cL1wuXC4kLywiLy4uLyIpLnJlcGxhY2UoL1wvP1teXC9dKi9nLGZ1bmN0aW9uKGUpeyIvLi4iPT09ZT90LnBvcCgpOnQucHVzaChlKX0pLHQuam9pbigiIikucmVwbGFjZSgvXlwvLywiLyI9PT1lLmNoYXJBdCgwKT8iLyI6IiIpfXJldHVybiB0PWkodHx8IiIpLGU9aShlfHwiIiksdCYmZT8odC5wcm90b2NvbHx8ZS5wcm90b2NvbCkrKHQucHJvdG9jb2x8fHQuYXV0aG9yaXR5P3QuYXV0aG9yaXR5OmUuYXV0aG9yaXR5KStyKHQucHJvdG9jb2x8fHQuYXV0aG9yaXR5fHwiLyI9PT10LnBhdGhuYW1lLmNoYXJBdCgwKT90LnBhdGhuYW1lOnQucGF0aG5hbWU/KGUuYXV0aG9yaXR5JiYhZS5wYXRobmFtZT8iLyI6IiIpK2UucGF0aG5hbWUuc2xpY2UoMCxlLnBhdGhuYW1lLmxhc3RJbmRleE9mKCIvIikrMSkrdC5wYXRobmFtZTplLnBhdGhuYW1lKSsodC5wcm90b2NvbHx8dC5hdXRob3JpdHl8fHQucGF0aG5hbWU/dC5zZWFyY2g6dC5zZWFyY2h8fGUuc2VhcmNoKSt0Lmhhc2g6bnVsbH1mdW5jdGlvbiBhKGUpe3JldHVybiBlLnNwbGl0KCIjIilbMF19ZnVuY3Rpb24gcyhlLHQpe2lmKGUmJiJvYmplY3QiPT10eXBlb2YgZSlpZih2b2lkIDA9PT10P3Q9ZS5pZDoic3RyaW5nIj09dHlwZW9mIGUuaWQmJih0PW8odCxlLmlkKSxlLmlkPXQpLEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspcyhlW3JdLHQpO2Vsc2V7InN0cmluZyI9PXR5cGVvZiBlLiRyZWYmJihlLiRyZWY9byh0LGUuJHJlZikpO2Zvcih2YXIgbiBpbiBlKSJlbnVtIiE9PW4mJnMoZVtuXSx0KX19ZnVuY3Rpb24gdShlKXtlPWV8fCJlbiI7dmFyIHQ9T1tlXTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9dFtlLmNvZGVdfHxfW2UuY29kZV07aWYoInN0cmluZyIhPXR5cGVvZiByKXJldHVybiJVbmtub3duIGVycm9yIGNvZGUgIitlLmNvZGUrIjogIitKU09OLnN0cmluZ2lmeShlLm1lc3NhZ2VQYXJhbXMpOwp2YXIgbj1lLnBhcmFtcztyZXR1cm4gci5yZXBsYWNlKC9ceyhbXnt9XSopXH0vZyxmdW5jdGlvbihlLHQpe3ZhciByPW5bdF07cmV0dXJuInN0cmluZyI9PXR5cGVvZiByfHwibnVtYmVyIj09dHlwZW9mIHI/cjplfSl9fWZ1bmN0aW9uIGMoZSx0LHIsbixpKXtpZihFcnJvci5jYWxsKHRoaXMpLHZvaWQgMD09PWUpdGhyb3cgbmV3IEVycm9yKCJObyBlcnJvciBjb2RlIHN1cHBsaWVkOiAiK24pO3RoaXMubWVzc2FnZT0iIix0aGlzLnBhcmFtcz10LHRoaXMuY29kZT1lLHRoaXMuZGF0YVBhdGg9cnx8IiIsdGhpcy5zY2hlbWFQYXRoPW58fCIiLHRoaXMuc3ViRXJyb3JzPWl8fG51bGw7dmFyIG89bmV3IEVycm9yKHRoaXMubWVzc2FnZSk7aWYodGhpcy5zdGFjaz1vLnN0YWNrfHxvLnN0YWNrdHJhY2UsIXRoaXMuc3RhY2spdHJ5e3Rocm93IG99Y2F0Y2gobyl7dGhpcy5zdGFjaz1vLnN0YWNrfHxvLnN0YWNrdHJhY2V9fWZ1bmN0aW9uIGwoZSx0KXtpZih0LnN1YnN0cmluZygwLGUubGVuZ3RoKT09PWUpe3ZhciByPXQuc3Vic3RyaW5nKGUubGVuZ3RoKTtpZih0Lmxlbmd0aD4wJiYiLyI9PT10LmNoYXJBdChlLmxlbmd0aC0xKXx8IiMiPT09ci5jaGFyQXQoMCl8fCI/Ij09PXIuY2hhckF0KDApKXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGYoZSl7dmFyIHQscixuPW5ldyBkLGk9e3NldEVycm9yUmVwb3J0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP3RoaXMubGFuZ3VhZ2UoZSk6KHI9ZSwhMCl9LGFkZEZvcm1hdDpmdW5jdGlvbigpe24uYWRkRm9ybWF0LmFwcGx5KG4sYXJndW1lbnRzKX0sbGFuZ3VhZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/KE9bZV18fChlPWUuc3BsaXQoIi0iKVswXSksT1tlXT8odD1lLGUpOiExKTp0fSxhZGRMYW5ndWFnZTpmdW5jdGlvbihlLHQpe3ZhciByO2ZvcihyIGluIGcpdFtyXSYmIXRbZ1tyXV0mJih0W2dbcl1dPXRbcl0pO3ZhciBuPWUuc3BsaXQoIi0iKVswXTtpZihPW25dKXtPW2VdPU9iamVjdC5jcmVhdGUoT1tuXSk7Zm9yKHIgaW4gdCkidW5kZWZpbmVkIj09dHlwZW9mIE9bbl1bcl0mJihPW25dW3JdPXRbcl0pLE9bZV1bcl09dFtyXX1lbHNlIE9bZV09dCxPW25dPXQ7cmV0dXJuIHRoaXN9LGZyZXNoQXBpOmZ1bmN0aW9uKGUpe3ZhciB0PWYoKTtyZXR1cm4gZSYmdC5sYW5ndWFnZShlKSx0fSx2YWxpZGF0ZTpmdW5jdGlvbihlLGksbyxhKXt2YXIgcz11KHQpLGM9cj9mdW5jdGlvbihlLHQsbil7cmV0dXJuIHIoZSx0LG4pfHxzKGUsdCxuKX06cyxsPW5ldyBkKG4sITEsYyxvLGEpOyJzdHJpbmciPT10eXBlb2YgaSYmKGk9eyRyZWY6aX0pLGwuYWRkU2NoZW1hKCIiLGkpO3ZhciBmPWwudmFsaWRhdGVBbGwoZSxpLG51bGwsbnVsbCwiIik7cmV0dXJuIWYmJmEmJihmPWwuYmFuVW5rbm93blByb3BlcnRpZXMoZSxpKSksdGhpcy5lcnJvcj1mLHRoaXMubWlzc2luZz1sLm1pc3NpbmcsdGhpcy52YWxpZD1udWxsPT09Zix0aGlzLnZhbGlkfSx2YWxpZGF0ZVJlc3VsdDpmdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiB0aGlzLnZhbGlkYXRlLmFwcGx5KGUsYXJndW1lbnRzKSxlfSx2YWxpZGF0ZU11bHRpcGxlOmZ1bmN0aW9uKGUsaSxvLGEpe3ZhciBzPXUodCksYz1yP2Z1bmN0aW9uKGUsdCxuKXtyZXR1cm4gcihlLHQsbil8fHMoZSx0LG4pfTpzLGw9bmV3IGQobiwhMCxjLG8sYSk7InN0cmluZyI9PXR5cGVvZiBpJiYoaT17JHJlZjppfSksbC5hZGRTY2hlbWEoIiIsaSksbC52YWxpZGF0ZUFsbChlLGksbnVsbCxudWxsLCIiKSxhJiZsLmJhblVua25vd25Qcm9wZXJ0aWVzKGUsaSk7dmFyIGY9e307cmV0dXJuIGYuZXJyb3JzPWwuZXJyb3JzLGYubWlzc2luZz1sLm1pc3NpbmcsZi52YWxpZD0wPT09Zi5lcnJvcnMubGVuZ3RoLGZ9LGFkZFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiBuLmFkZFNjaGVtYS5hcHBseShuLGFyZ3VtZW50cyl9LGdldFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiBuLmdldFNjaGVtYS5hcHBseShuLGFyZ3VtZW50cyl9LGdldFNjaGVtYU1hcDpmdW5jdGlvbigpe3JldHVybiBuLmdldFNjaGVtYU1hcC5hcHBseShuLGFyZ3VtZW50cyl9LGdldFNjaGVtYVVyaXM6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRTY2hlbWFVcmlzLmFwcGx5KG4sYXJndW1lbnRzKX0sZ2V0TWlzc2luZ1VyaXM6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRNaXNzaW5nVXJpcy5hcHBseShuLGFyZ3VtZW50cyl9LGRyb3BTY2hlbWFzOmZ1bmN0aW9uKCl7bi5kcm9wU2NoZW1hcy5hcHBseShuLGFyZ3VtZW50cyl9LGRlZmluZUtleXdvcmQ6ZnVuY3Rpb24oKXtuLmRlZmluZUtleXdvcmQuYXBwbHkobixhcmd1bWVudHMpfSxkZWZpbmVFcnJvcjpmdW5jdGlvbihlLHQscil7aWYoInN0cmluZyIhPXR5cGVvZiBlfHwhL15bQS1aXSsoX1tBLVpdKykqJC8udGVzdChlKSl0aHJvdyBuZXcgRXJyb3IoIkNvZGUgbmFtZSBtdXN0IGJlIGEgc3RyaW5nIGluIFVQUEVSX0NBU0VfV0lUSF9VTkRFUlNDT1JFUyIpO2lmKCJudW1iZXIiIT10eXBlb2YgdHx8dCUxIT09MHx8MWU0PnQpdGhyb3cgbmV3IEVycm9yKCJDb2RlIG51bWJlciBtdXN0IGJlIGFuIGludGVnZXIgPiAxMDAwMCIpO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgZ1tlXSl0aHJvdyBuZXcgRXJyb3IoIkVycm9yIGFscmVhZHkgZGVmaW5lZDogIitlKyIgYXMgIitnW2VdKTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHZbdF0pdGhyb3cgbmV3IEVycm9yKCJFcnJvciBjb2RlIGFscmVhZHkgdXNlZDogIit2W3RdKyIgYXMgIit0KTtnW2VdPXQsdlt0XT1lLF9bZV09X1t0XT1yO2Zvcih2YXIgbiBpbiBPKXt2YXIgaT1PW25dO2lbZV0mJihpW3RdPWlbdF18fGlbZV0pfX0scmVzZXQ6ZnVuY3Rpb24oKXtuLnJlc2V0KCksdGhpcy5lcnJvcj1udWxsLHRoaXMubWlzc2luZz1bXSx0aGlzLnZhbGlkPSEwfSxtaXNzaW5nOltdLGVycm9yOm51bGwsdmFsaWQ6ITAsbm9ybVNjaGVtYTpzLHJlc29sdmVVcmw6byxnZXREb2N1bWVudFVyaTphLGVycm9yQ29kZXM6Z307cmV0dXJuIGkubGFuZ3VhZ2UoZXx8ImVuIiksaX1PYmplY3Qua2V5c3x8KE9iamVjdC5rZXlzPWZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSx0PSF7dG9TdHJpbmc6bnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoInRvU3RyaW5nIikscj1bInRvU3RyaW5nIiwidG9Mb2NhbGVTdHJpbmciLCJ2YWx1ZU9mIiwiaGFzT3duUHJvcGVydHkiLCJpc1Byb3RvdHlwZU9mIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJjb25zdHJ1Y3RvciJdLG49ci5sZW5ndGg7cmV0dXJuIGZ1bmN0aW9uKGkpe2lmKCJvYmplY3QiIT10eXBlb2YgaSYmImZ1bmN0aW9uIiE9dHlwZW9mIGl8fG51bGw9PT1pKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5rZXlzIGNhbGxlZCBvbiBub24tb2JqZWN0Iik7dmFyIG89W107Zm9yKHZhciBhIGluIGkpZS5jYWxsKGksYSkmJm8ucHVzaChhKTtpZih0KWZvcih2YXIgcz0wO24+cztzKyspZS5jYWxsKGkscltzXSkmJm8ucHVzaChyW3NdKTtyZXR1cm4gb319KCkpLE9iamVjdC5jcmVhdGV8fChPYmplY3QuY3JlYXRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZnVuY3Rpb24odCl7aWYoMSE9PWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJPYmplY3QuY3JlYXRlIGltcGxlbWVudGF0aW9uIG9ubHkgYWNjZXB0cyBvbmUgcGFyYW1ldGVyLiIpO3JldHVybiBlLnByb3RvdHlwZT10LG5ldyBlfX0oKSksQXJyYXkuaXNBcnJheXx8KEFycmF5LmlzQXJyYXk9ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0pLEFycmF5LnByb3RvdHlwZS5pbmRleE9mfHwoQXJyYXkucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24oZSl7aWYobnVsbD09PXRoaXMpdGhyb3cgbmV3IFR5cGVFcnJvcjt2YXIgdD1PYmplY3QodGhpcykscj10Lmxlbmd0aD4+PjA7aWYoMD09PXIpcmV0dXJuLTE7dmFyIG49MDtpZihhcmd1bWVudHMubGVuZ3RoPjEmJihuPU51bWJlcihhcmd1bWVudHNbMV0pLG4hPT1uP249MDowIT09biYmbiE9PTEvMCYmbiE9PS0oMS8wKSYmKG49KG4+MHx8LTEpKk1hdGguZmxvb3IoTWF0aC5hYnMobikpKSksbj49cilyZXR1cm4tMTtmb3IodmFyIGk9bj49MD9uOk1hdGgubWF4KHItTWF0aC5hYnMobiksMCk7cj5pO2krKylpZihpIGluIHQmJnRbaV09PT1lKXJldHVybiBpO3JldHVybi0xfSksT2JqZWN0LmlzRnJvemVufHwoT2JqZWN0LmlzRnJvemVuPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0idHY0X3Rlc3RfZnJvemVuX2tleSI7ZS5oYXNPd25Qcm9wZXJ0eSh0KTspdCs9TWF0aC5yYW5kb20oKTt0cnl7cmV0dXJuIGVbdF09ITAsZGVsZXRlIGVbdF0sITF9Y2F0Y2gocil7cmV0dXJuITB9fSk7dmFyIHA9eyIrIjohMCwiIyI6ITAsIi4iOiEwLCIvIjohMCwiOyI6ITAsIj8iOiEwLCImIjohMH0saD17IioiOiEwfTtyLnByb3RvdHlwZT17dG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZW1wbGF0ZX0sZmlsbEZyb21PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZmlsbChmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfX07dmFyIGQ9ZnVuY3Rpb24oZSx0LHIsbixpKXtpZih0aGlzLm1pc3Npbmc9W10sdGhpcy5taXNzaW5nTWFwPXt9LHRoaXMuZm9ybWF0VmFsaWRhdG9ycz1lP09iamVjdC5jcmVhdGUoZS5mb3JtYXRWYWxpZGF0b3JzKTp7fSx0aGlzLnNjaGVtYXM9ZT9PYmplY3QuY3JlYXRlKGUuc2NoZW1hcyk6e30sdGhpcy5jb2xsZWN0TXVsdGlwbGU9dCx0aGlzLmVycm9ycz1bXSx0aGlzLmhhbmRsZUVycm9yPXQ/dGhpcy5jb2xsZWN0RXJyb3I6dGhpcy5yZXR1cm5FcnJvcixuJiYodGhpcy5jaGVja1JlY3Vyc2l2ZT0hMCx0aGlzLnNjYW5uZWQ9W10sdGhpcy5zY2FubmVkRnJvemVuPVtdLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXM9W10sdGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9ycz1bXSx0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXk9InR2NF92YWxpZGF0aW9uX2lkIix0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXk9InR2NF92YWxpZGF0aW9uX2Vycm9yc19pZCIpLGkmJih0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXM9ITAsdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy51bmtub3duUHJvcGVydHlQYXRocz17fSksdGhpcy5lcnJvclJlcG9ydGVyPXJ8fHUoImVuIiksInN0cmluZyI9PXR5cGVvZiB0aGlzLmVycm9yUmVwb3J0ZXIpdGhyb3cgbmV3IEVycm9yKCJkZWJ1ZyIpO2lmKHRoaXMuZGVmaW5lZEtleXdvcmRzPXt9LGUpZm9yKHZhciBvIGluIGUuZGVmaW5lZEtleXdvcmRzKXRoaXMuZGVmaW5lZEtleXdvcmRzW29dPWUuZGVmaW5lZEtleXdvcmRzW29dLnNsaWNlKDApfTtkLnByb3RvdHlwZS5kZWZpbmVLZXl3b3JkPWZ1bmN0aW9uKGUsdCl7dGhpcy5kZWZpbmVkS2V5d29yZHNbZV09dGhpcy5kZWZpbmVkS2V5d29yZHNbZV18fFtdLHRoaXMuZGVmaW5lZEtleXdvcmRzW2VdLnB1c2godCl9LGQucHJvdG90eXBlLmNyZWF0ZUVycm9yPWZ1bmN0aW9uKGUsdCxyLG4saSxvLGEpe3ZhciBzPW5ldyBjKGUsdCxyLG4saSk7cmV0dXJuIHMubWVzc2FnZT10aGlzLmVycm9yUmVwb3J0ZXIocyxvLGEpLHN9LGQucHJvdG90eXBlLnJldHVybkVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxkLnByb3RvdHlwZS5jb2xsZWN0RXJyb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJnRoaXMuZXJyb3JzLnB1c2goZSksbnVsbH0sZC5wcm90b3R5cGUucHJlZml4RXJyb3JzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49ZTtuPHRoaXMuZXJyb3JzLmxlbmd0aDtuKyspdGhpcy5lcnJvcnNbbl09dGhpcy5lcnJvcnNbbl0ucHJlZml4V2l0aCh0LHIpO3JldHVybiB0aGlzfSxkLnByb3RvdHlwZS5iYW5Vbmtub3duUHJvcGVydGllcz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzKXt2YXIgbj10aGlzLmNyZWF0ZUVycm9yKGcuVU5LTk9XTl9QUk9QRVJUWSx7cGF0aDpyfSxyLCIiLG51bGwsZSx0KSxpPXRoaXMuaGFuZGxlRXJyb3Iobik7aWYoaSlyZXR1cm4gaX1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUuYWRkRm9ybWF0PWZ1bmN0aW9uKGUsdCl7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXtmb3IodmFyIHIgaW4gZSl0aGlzLmFkZEZvcm1hdChyLGVbcl0pO3JldHVybiB0aGlzfXRoaXMuZm9ybWF0VmFsaWRhdG9yc1tlXT10fSxkLnByb3RvdHlwZS5yZXNvbHZlUmVmcz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PWUuJHJlZil7aWYodD10fHx7fSx0W2UuJHJlZl0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoZy5DSVJDVUxBUl9SRUZFUkVOQ0Use3VybHM6T2JqZWN0LmtleXModCkuam9pbigiLCAiKX0sIiIsIiIsbnVsbCx2b2lkIDAsZSk7dFtlLiRyZWZdPSEwLGU9dGhpcy5nZXRTY2hlbWEoZS4kcmVmLHQpfXJldHVybiBlfSxkLnByb3RvdHlwZS5nZXRTY2hlbWE9ZnVuY3Rpb24oZSx0KXt2YXIgcjtpZih2b2lkIDAhPT10aGlzLnNjaGVtYXNbZV0pcmV0dXJuIHI9dGhpcy5zY2hlbWFzW2VdLHRoaXMucmVzb2x2ZVJlZnMocix0KTt2YXIgbj1lLGk9IiI7aWYoLTEhPT1lLmluZGV4T2YoIiMiKSYmKGk9ZS5zdWJzdHJpbmcoZS5pbmRleE9mKCIjIikrMSksbj1lLnN1YnN0cmluZygwLGUuaW5kZXhPZigiIyIpKSksIm9iamVjdCI9PXR5cGVvZiB0aGlzLnNjaGVtYXNbbl0pe3I9dGhpcy5zY2hlbWFzW25dO3ZhciBvPWRlY29kZVVSSUNvbXBvbmVudChpKTtpZigiIj09PW8pcmV0dXJuIHRoaXMucmVzb2x2ZVJlZnMocix0KTtpZigiLyIhPT1vLmNoYXJBdCgwKSlyZXR1cm47Zm9yKHZhciBhPW8uc3BsaXQoIi8iKS5zbGljZSgxKSxzPTA7czxhLmxlbmd0aDtzKyspe3ZhciB1PWFbc10ucmVwbGFjZSgvfjEvZywiLyIpLnJlcGxhY2UoL34wL2csIn4iKTtpZih2b2lkIDA9PT1yW3VdKXtyPXZvaWQgMDticmVha31yPXJbdV19aWYodm9pZCAwIT09cilyZXR1cm4gdGhpcy5yZXNvbHZlUmVmcyhyLHQpfXZvaWQgMD09PXRoaXMubWlzc2luZ1tuXSYmKHRoaXMubWlzc2luZy5wdXNoKG4pLHRoaXMubWlzc2luZ1tuXT1uLHRoaXMubWlzc2luZ01hcFtuXT1uKX0sZC5wcm90b3R5cGUuc2VhcmNoU2NoZW1hcz1mdW5jdGlvbihlLHQpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspdGhpcy5zZWFyY2hTY2hlbWFzKGVbcl0sdCk7ZWxzZSBpZihlJiYib2JqZWN0Ij09dHlwZW9mIGUpeyJzdHJpbmciPT10eXBlb2YgZS5pZCYmbCh0LGUuaWQpJiZ2b2lkIDA9PT10aGlzLnNjaGVtYXNbZS5pZF0mJih0aGlzLnNjaGVtYXNbZS5pZF09ZSk7Zm9yKHZhciBuIGluIGUpaWYoImVudW0iIT09bilpZigib2JqZWN0Ij09dHlwZW9mIGVbbl0pdGhpcy5zZWFyY2hTY2hlbWFzKGVbbl0sdCk7ZWxzZSBpZigiJHJlZiI9PT1uKXt2YXIgaT1hKGVbbl0pO2kmJnZvaWQgMD09PXRoaXMuc2NoZW1hc1tpXSYmdm9pZCAwPT09dGhpcy5taXNzaW5nTWFwW2ldJiYodGhpcy5taXNzaW5nTWFwW2ldPWkpfX19LGQucHJvdG90eXBlLmFkZFNjaGVtYT1mdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0KXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fCJzdHJpbmciIT10eXBlb2YgZS5pZClyZXR1cm47dD1lLGU9dC5pZH1lPT09YShlKSsiIyImJihlPWEoZSkpLHRoaXMuc2NoZW1hc1tlXT10LGRlbGV0ZSB0aGlzLm1pc3NpbmdNYXBbZV0scyh0LGUpLHRoaXMuc2VhcmNoU2NoZW1hcyh0LGUpfSxkLnByb3RvdHlwZS5nZXRTY2hlbWFNYXA9ZnVuY3Rpb24oKXt2YXIgZT17fTtmb3IodmFyIHQgaW4gdGhpcy5zY2hlbWFzKWVbdF09dGhpcy5zY2hlbWFzW3RdO3JldHVybiBlfSxkLnByb3RvdHlwZS5nZXRTY2hlbWFVcmlzPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiB0aGlzLnNjaGVtYXMpKCFlfHxlLnRlc3QocikpJiZ0LnB1c2gocik7cmV0dXJuIHR9LGQucHJvdG90eXBlLmdldE1pc3NpbmdVcmlzPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiB0aGlzLm1pc3NpbmdNYXApKCFlfHxlLnRlc3QocikpJiZ0LnB1c2gocik7cmV0dXJuIHR9LGQucHJvdG90eXBlLmRyb3BTY2hlbWFzPWZ1bmN0aW9uKCl7dGhpcy5zY2hlbWFzPXt9LHRoaXMucmVzZXQoKX0sZC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLm1pc3Npbmc9W10sdGhpcy5taXNzaW5nTWFwPXt9LHRoaXMuZXJyb3JzPVtdfSxkLnByb3RvdHlwZS52YWxpZGF0ZUFsbD1mdW5jdGlvbihlLHQscixuLGkpe3ZhciBvO2lmKHQ9dGhpcy5yZXNvbHZlUmVmcyh0KSwhdClyZXR1cm4gbnVsbDtpZih0IGluc3RhbmNlb2YgYylyZXR1cm4gdGhpcy5lcnJvcnMucHVzaCh0KSx0O3ZhciBhLHM9dGhpcy5lcnJvcnMubGVuZ3RoLHU9bnVsbCxsPW51bGw7aWYodGhpcy5jaGVja1JlY3Vyc2l2ZSYmZSYmIm9iamVjdCI9PXR5cGVvZiBlKXtpZihvPSF0aGlzLnNjYW5uZWQubGVuZ3RoLGVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XSl7dmFyIGY9ZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldLmluZGV4T2YodCk7aWYoLTEhPT1mKXJldHVybiB0aGlzLmVycm9ycz10aGlzLmVycm9ycy5jb25jYXQoZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW2ZdKSxudWxsfWlmKE9iamVjdC5pc0Zyb3plbihlKSYmKGE9dGhpcy5zY2FubmVkRnJvemVuLmluZGV4T2YoZSksLTEhPT1hKSl7dmFyIHA9dGhpcy5zY2FubmVkRnJvemVuU2NoZW1hc1thXS5pbmRleE9mKHQpO2lmKC0xIT09cClyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuY29uY2F0KHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnNbYV1bcF0pLG51bGx9aWYodGhpcy5zY2FubmVkLnB1c2goZSksT2JqZWN0LmlzRnJvemVuKGUpKS0xPT09YSYmKGE9dGhpcy5zY2FubmVkRnJvemVuLmxlbmd0aCx0aGlzLnNjYW5uZWRGcm96ZW4ucHVzaChlKSx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzLnB1c2goW10pKSx1PXRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbYV0ubGVuZ3RoLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbYV1bdV09dCx0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW2FdW3VdPVtdO2Vsc2V7aWYoIWVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XSl0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5LHt2YWx1ZTpbXSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXkse3ZhbHVlOltdLGNvbmZpZ3VyYWJsZTohMH0pfWNhdGNoKGgpe2VbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XT1bXSxlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV09W119bD1lW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0ubGVuZ3RoLGVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XVtsXT10LGVbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XVtsXT1bXX19dmFyIGQ9dGhpcy5lcnJvcnMubGVuZ3RoLHk9dGhpcy52YWxpZGF0ZUJhc2ljKGUsdCxpKXx8dGhpcy52YWxpZGF0ZU51bWVyaWMoZSx0LGkpfHx0aGlzLnZhbGlkYXRlU3RyaW5nKGUsdCxpKXx8dGhpcy52YWxpZGF0ZUFycmF5KGUsdCxpKXx8dGhpcy52YWxpZGF0ZU9iamVjdChlLHQsaSl8fHRoaXMudmFsaWRhdGVDb21iaW5hdGlvbnMoZSx0LGkpfHx0aGlzLnZhbGlkYXRlSHlwZXJtZWRpYShlLHQsaSl8fHRoaXMudmFsaWRhdGVGb3JtYXQoZSx0LGkpfHx0aGlzLnZhbGlkYXRlRGVmaW5lZEtleXdvcmRzKGUsdCxpKXx8bnVsbDtpZihvKXtmb3IoO3RoaXMuc2Nhbm5lZC5sZW5ndGg7KXt2YXIgbT10aGlzLnNjYW5uZWQucG9wKCk7ZGVsZXRlIG1bdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XX10aGlzLnNjYW5uZWRGcm96ZW49W10sdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcz1bXX1pZih5fHxkIT09dGhpcy5lcnJvcnMubGVuZ3RoKWZvcig7ciYmci5sZW5ndGh8fG4mJm4ubGVuZ3RoOyl7dmFyIGc9ciYmci5sZW5ndGg/IiIrci5wb3AoKTpudWxsLHY9biYmbi5sZW5ndGg/IiIrbi5wb3AoKTpudWxsO3kmJih5PXkucHJlZml4V2l0aChnLHYpKSx0aGlzLnByZWZpeEVycm9ycyhkLGcsdil9cmV0dXJuIG51bGwhPT11P3RoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnNbYV1bdV09dGhpcy5lcnJvcnMuc2xpY2Uocyk6bnVsbCE9PWwmJihlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV1bbF09dGhpcy5lcnJvcnMuc2xpY2UocykpLHRoaXMuaGFuZGxlRXJyb3IoeSl9LGQucHJvdG90eXBlLnZhbGlkYXRlRm9ybWF0PWZ1bmN0aW9uKGUsdCl7aWYoInN0cmluZyIhPXR5cGVvZiB0LmZvcm1hdHx8IXRoaXMuZm9ybWF0VmFsaWRhdG9yc1t0LmZvcm1hdF0pcmV0dXJuIG51bGw7dmFyIHI9dGhpcy5mb3JtYXRWYWxpZGF0b3JzW3QuZm9ybWF0XS5jYWxsKG51bGwsZSx0KTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHJ8fCJudW1iZXIiPT10eXBlb2Ygcj90aGlzLmNyZWF0ZUVycm9yKGcuRk9STUFUX0NVU1RPTSx7bWVzc2FnZTpyfSwiIiwiL2Zvcm1hdCIsbnVsbCxlLHQpOnImJiJvYmplY3QiPT10eXBlb2Ygcj90aGlzLmNyZWF0ZUVycm9yKGcuRk9STUFUX0NVU1RPTSx7bWVzc2FnZTpyLm1lc3NhZ2V8fCI/In0sci5kYXRhUGF0aHx8IiIsci5zY2hlbWFQYXRofHwiL2Zvcm1hdCIsbnVsbCxlLHQpOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlRGVmaW5lZEtleXdvcmRzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG4gaW4gdGhpcy5kZWZpbmVkS2V5d29yZHMpaWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0W25dKWZvcih2YXIgaT10aGlzLmRlZmluZWRLZXl3b3Jkc1tuXSxvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciBhPWlbb10scz1hKGUsdFtuXSx0LHIpO2lmKCJzdHJpbmciPT10eXBlb2Ygc3x8Im51bWJlciI9PXR5cGVvZiBzKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKGcuS0VZV09SRF9DVVNUT00se2tleTpuLG1lc3NhZ2U6c30sIiIsIiIsbnVsbCxlLHQpLnByZWZpeFdpdGgobnVsbCxuKTtpZihzJiYib2JqZWN0Ij09dHlwZW9mIHMpe3ZhciB1PXMuY29kZTtpZigic3RyaW5nIj09dHlwZW9mIHUpe2lmKCFnW3VdKXRocm93IG5ldyBFcnJvcigiVW5kZWZpbmVkIGVycm9yIGNvZGUgKHVzZSBkZWZpbmVFcnJvcik6ICIrdSk7dT1nW3VdfWVsc2UibnVtYmVyIiE9dHlwZW9mIHUmJih1PWcuS0VZV09SRF9DVVNUT00pO3ZhciBjPSJvYmplY3QiPT10eXBlb2Ygcy5tZXNzYWdlP3MubWVzc2FnZTp7a2V5Om4sbWVzc2FnZTpzLm1lc3NhZ2V8fCI/In0sbD1zLnNjaGVtYVBhdGh8fCIvIituLnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpO3JldHVybiB0aGlzLmNyZWF0ZUVycm9yKHUsYyxzLmRhdGFQYXRofHxudWxsLGwsbnVsbCxlLHQpfX1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVCYXNpYz1mdW5jdGlvbihlLHQscil7dmFyIG47cmV0dXJuKG49dGhpcy52YWxpZGF0ZVR5cGUoZSx0LHIpKT9uLnByZWZpeFdpdGgobnVsbCwidHlwZSIpOihuPXRoaXMudmFsaWRhdGVFbnVtKGUsdCxyKSk/bi5wcmVmaXhXaXRoKG51bGwsInR5cGUiKTpudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZVR5cGU9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10LnR5cGUpcmV0dXJuIG51bGw7dmFyIHI9dHlwZW9mIGU7bnVsbD09PWU/cj0ibnVsbCI6QXJyYXkuaXNBcnJheShlKSYmKHI9ImFycmF5Iik7dmFyIG49dC50eXBlO0FycmF5LmlzQXJyYXkobil8fChuPVtuXSk7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBvPW5baV07aWYobz09PXJ8fCJpbnRlZ2VyIj09PW8mJiJudW1iZXIiPT09ciYmZSUxPT09MClyZXR1cm4gbnVsbH1yZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihnLklOVkFMSURfVFlQRSx7dHlwZTpyLGV4cGVjdGVkOm4uam9pbigiLyIpfSwiIiwiIixudWxsLGUsdCl9LGQucHJvdG90eXBlLnZhbGlkYXRlRW51bT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXRbImVudW0iXSlyZXR1cm4gbnVsbDtmb3IodmFyIHI9MDtyPHRbImVudW0iXS5sZW5ndGg7cisrKXt2YXIgaT10WyJlbnVtIl1bcl07aWYobihlLGkpKXJldHVybiBudWxsfXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKGcuRU5VTV9NSVNNQVRDSCx7dmFsdWU6InVuZGVmaW5lZCIhPXR5cGVvZiBKU09OP0pTT04uc3RyaW5naWZ5KGUpOmV9LCIiLCIiLG51bGwsZSx0KX0sZC5wcm90b3R5cGUudmFsaWRhdGVOdW1lcmljPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy52YWxpZGF0ZU11bHRpcGxlT2YoZSx0LHIpfHx0aGlzLnZhbGlkYXRlTWluTWF4KGUsdCxyKXx8dGhpcy52YWxpZGF0ZU5hTihlLHQscil8fG51bGx9O3ZhciB5PU1hdGgucG93KDIsLTUxKSxtPTEteTtkLnByb3RvdHlwZS52YWxpZGF0ZU11bHRpcGxlT2Y9ZnVuY3Rpb24oZSx0KXt2YXIgcj10Lm11bHRpcGxlT2Z8fHQuZGl2aXNpYmxlQnk7aWYodm9pZCAwPT09cilyZXR1cm4gbnVsbDtpZigibnVtYmVyIj09dHlwZW9mIGUpe3ZhciBuPWUvciUxO2lmKG4+PXkmJm0+bilyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihnLk5VTUJFUl9NVUxUSVBMRV9PRix7dmFsdWU6ZSxtdWx0aXBsZU9mOnJ9LCIiLCIiLG51bGwsZSx0KX1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVNaW5NYXg9ZnVuY3Rpb24oZSx0KXtpZigibnVtYmVyIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7aWYodm9pZCAwIT09dC5taW5pbXVtKXtpZihlPHQubWluaW11bSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihnLk5VTUJFUl9NSU5JTVVNLHt2YWx1ZTplLG1pbmltdW06dC5taW5pbXVtfSwiIiwiL21pbmltdW0iLG51bGwsZSx0KTtpZih0LmV4Y2x1c2l2ZU1pbmltdW0mJmU9PT10Lm1pbmltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoZy5OVU1CRVJfTUlOSU1VTV9FWENMVVNJVkUse3ZhbHVlOmUsbWluaW11bTp0Lm1pbmltdW19LCIiLCIvZXhjbHVzaXZlTWluaW11bSIsbnVsbCxlLHQpfWlmKHZvaWQgMCE9PXQubWF4aW11bSl7aWYoZT50Lm1heGltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoZy5OVU1CRVJfTUFYSU1VTSx7dmFsdWU6ZSxtYXhpbXVtOnQubWF4aW11bX0sIiIsIi9tYXhpbXVtIixudWxsLGUsdCk7aWYodC5leGNsdXNpdmVNYXhpbXVtJiZlPT09dC5tYXhpbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKGcuTlVNQkVSX01BWElNVU1fRVhDTFVTSVZFLHt2YWx1ZTplLG1heGltdW06dC5tYXhpbXVtfSwiIiwiL2V4Y2x1c2l2ZU1heGltdW0iLG51bGwsZSx0KX1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVOYU49ZnVuY3Rpb24oZSx0KXtyZXR1cm4ibnVtYmVyIiE9dHlwZW9mIGU/bnVsbDppc05hTihlKT09PSEwfHxlPT09MS8wfHxlPT09LSgxLzApP3RoaXMuY3JlYXRlRXJyb3IoZy5OVU1CRVJfTk9UX0FfTlVNQkVSLHt2YWx1ZTplfSwiIiwiL3R5cGUiLG51bGwsZSx0KTpudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVTdHJpbmdMZW5ndGgoZSx0LHIpfHx0aGlzLnZhbGlkYXRlU3RyaW5nUGF0dGVybihlLHQscil8fG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlU3RyaW5nTGVuZ3RoPWZ1bmN0aW9uKGUsdCl7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlP251bGw6dm9pZCAwIT09dC5taW5MZW5ndGgmJmUubGVuZ3RoPHQubWluTGVuZ3RoP3RoaXMuY3JlYXRlRXJyb3IoZy5TVFJJTkdfTEVOR1RIX1NIT1JULHtsZW5ndGg6ZS5sZW5ndGgsbWluaW11bTp0Lm1pbkxlbmd0aH0sIiIsIi9taW5MZW5ndGgiLG51bGwsZSx0KTp2b2lkIDAhPT10Lm1heExlbmd0aCYmZS5sZW5ndGg+dC5tYXhMZW5ndGg/dGhpcy5jcmVhdGVFcnJvcihnLlNUUklOR19MRU5HVEhfTE9ORyx7bGVuZ3RoOmUubGVuZ3RoLG1heGltdW06dC5tYXhMZW5ndGh9LCIiLCIvbWF4TGVuZ3RoIixudWxsLGUsdCk6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVTdHJpbmdQYXR0ZXJuPWZ1bmN0aW9uKGUsdCl7aWYoInN0cmluZyIhPXR5cGVvZiBlfHwic3RyaW5nIiE9dHlwZW9mIHQucGF0dGVybiYmISh0LnBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApKXJldHVybiBudWxsO3ZhciByO2lmKHQucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cClyPXQucGF0dGVybjtlbHNle3ZhciBuLGk9IiIsbz10LnBhdHRlcm4ubWF0Y2goL15cLyguKylcLyhbaW1nXSopJC8pO28/KG49b1sxXSxpPW9bMl0pOm49dC5wYXR0ZXJuLHI9bmV3IFJlZ0V4cChuLGkpfXJldHVybiByLnRlc3QoZSk/bnVsbDp0aGlzLmNyZWF0ZUVycm9yKGcuU1RSSU5HX1BBVFRFUk4se3BhdHRlcm46dC5wYXR0ZXJufSwiIiwiL3BhdHRlcm4iLG51bGwsZSx0KX0sZC5wcm90b3R5cGUudmFsaWRhdGVBcnJheT1mdW5jdGlvbihlLHQscil7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/dGhpcy52YWxpZGF0ZUFycmF5TGVuZ3RoKGUsdCxyKXx8dGhpcy52YWxpZGF0ZUFycmF5VW5pcXVlSXRlbXMoZSx0LHIpfHx0aGlzLnZhbGlkYXRlQXJyYXlJdGVtcyhlLHQscil8fG51bGw6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVBcnJheUxlbmd0aD1mdW5jdGlvbihlLHQpe3ZhciByO3JldHVybiB2b2lkIDAhPT10Lm1pbkl0ZW1zJiZlLmxlbmd0aDx0Lm1pbkl0ZW1zJiYocj10aGlzLmNyZWF0ZUVycm9yKGcuQVJSQVlfTEVOR1RIX1NIT1JULHtsZW5ndGg6ZS5sZW5ndGgsbWluaW11bTp0Lm1pbkl0ZW1zfSwiIiwiL21pbkl0ZW1zIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjp2b2lkIDAhPT10Lm1heEl0ZW1zJiZlLmxlbmd0aD50Lm1heEl0ZW1zJiYocj10aGlzLmNyZWF0ZUVycm9yKGcuQVJSQVlfTEVOR1RIX0xPTkcse2xlbmd0aDplLmxlbmd0aCxtYXhpbXVtOnQubWF4SXRlbXN9LCIiLCIvbWF4SXRlbXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlVbmlxdWVJdGVtcz1mdW5jdGlvbihlLHQpe2lmKHQudW5pcXVlSXRlbXMpZm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspZm9yKHZhciBpPXIrMTtpPGUubGVuZ3RoO2krKylpZihuKGVbcl0sZVtpXSkpe3ZhciBvPXRoaXMuY3JlYXRlRXJyb3IoZy5BUlJBWV9VTklRVUUse21hdGNoMTpyLG1hdGNoMjppfSwiIiwiL3VuaXF1ZUl0ZW1zIixudWxsLGUsdCk7aWYodGhpcy5oYW5kbGVFcnJvcihvKSlyZXR1cm4gb31yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVBcnJheUl0ZW1zPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10Lml0ZW1zKXJldHVybiBudWxsO3ZhciBuLGk7aWYoQXJyYXkuaXNBcnJheSh0Lml0ZW1zKSl7Zm9yKGk9MDtpPGUubGVuZ3RoO2krKylpZihpPHQuaXRlbXMubGVuZ3RoKXtpZihuPXRoaXMudmFsaWRhdGVBbGwoZVtpXSx0Lml0ZW1zW2ldLFtpXSxbIml0ZW1zIixpXSxyKyIvIitpKSlyZXR1cm4gbn1lbHNlIGlmKHZvaWQgMCE9PXQuYWRkaXRpb25hbEl0ZW1zKWlmKCJib29sZWFuIj09dHlwZW9mIHQuYWRkaXRpb25hbEl0ZW1zKXtpZighdC5hZGRpdGlvbmFsSXRlbXMmJihuPXRoaXMuY3JlYXRlRXJyb3IoZy5BUlJBWV9BRERJVElPTkFMX0lURU1TLHt9LCIvIitpLCIvYWRkaXRpb25hbEl0ZW1zIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihuKSkpcmV0dXJuIG59ZWxzZSBpZihuPXRoaXMudmFsaWRhdGVBbGwoZVtpXSx0LmFkZGl0aW9uYWxJdGVtcyxbaV0sWyJhZGRpdGlvbmFsSXRlbXMiXSxyKyIvIitpKSlyZXR1cm4gbn1lbHNlIGZvcihpPTA7aTxlLmxlbmd0aDtpKyspaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5pdGVtcyxbaV0sWyJpdGVtcyJdLHIrIi8iK2kpKXJldHVybiBuO3JldHVybiBudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdD1mdW5jdGlvbihlLHQscil7cmV0dXJuIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZXx8QXJyYXkuaXNBcnJheShlKT9udWxsOnRoaXMudmFsaWRhdGVPYmplY3RNaW5NYXhQcm9wZXJ0aWVzKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU9iamVjdFJlcXVpcmVkUHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3RQcm9wZXJ0aWVzKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU9iamVjdERlcGVuZGVuY2llcyhlLHQscil8fG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0TWluTWF4UHJvcGVydGllcz1mdW5jdGlvbihlLHQpe3ZhciByLG49T2JqZWN0LmtleXMoZSk7cmV0dXJuIHZvaWQgMCE9PXQubWluUHJvcGVydGllcyYmbi5sZW5ndGg8dC5taW5Qcm9wZXJ0aWVzJiYocj10aGlzLmNyZWF0ZUVycm9yKGcuT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTSx7cHJvcGVydHlDb3VudDpuLmxlbmd0aCxtaW5pbXVtOnQubWluUHJvcGVydGllc30sIiIsIi9taW5Qcm9wZXJ0aWVzIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjp2b2lkIDAhPT10Lm1heFByb3BlcnRpZXMmJm4ubGVuZ3RoPnQubWF4UHJvcGVydGllcyYmKHI9dGhpcy5jcmVhdGVFcnJvcihnLk9CSkVDVF9QUk9QRVJUSUVTX01BWElNVU0se3Byb3BlcnR5Q291bnQ6bi5sZW5ndGgsbWF4aW11bTp0Lm1heFByb3BlcnRpZXN9LCIiLCIvbWF4UHJvcGVydGllcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3RSZXF1aXJlZFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT10LnJlcXVpcmVkKWZvcih2YXIgcj0wO3I8dC5yZXF1aXJlZC5sZW5ndGg7cisrKXt2YXIgbj10LnJlcXVpcmVkW3JdO2lmKHZvaWQgMD09PWVbbl0pe3ZhciBpPXRoaXMuY3JlYXRlRXJyb3IoZy5PQkpFQ1RfUkVRVUlSRUQse2tleTpufSwiIiwiL3JlcXVpcmVkLyIrcixudWxsLGUsdCk7aWYodGhpcy5oYW5kbGVFcnJvcihpKSlyZXR1cm4gaX19cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0UHJvcGVydGllcz1mdW5jdGlvbihlLHQscil7dmFyIG47Zm9yKHZhciBpIGluIGUpe3ZhciBvPXIrIi8iK2kucmVwbGFjZSgvfi9nLCJ+MCIpLnJlcGxhY2UoL1wvL2csIn4xIiksYT0hMTtpZih2b2lkIDAhPT10LnByb3BlcnRpZXMmJnZvaWQgMCE9PXQucHJvcGVydGllc1tpXSYmKGE9ITAsbj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5wcm9wZXJ0aWVzW2ldLFtpXSxbInByb3BlcnRpZXMiLGldLG8pKSlyZXR1cm4gbjtpZih2b2lkIDAhPT10LnBhdHRlcm5Qcm9wZXJ0aWVzKWZvcih2YXIgcyBpbiB0LnBhdHRlcm5Qcm9wZXJ0aWVzKXt2YXIgdT1uZXcgUmVnRXhwKHMpO2lmKHUudGVzdChpKSYmKGE9ITAsbj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5wYXR0ZXJuUHJvcGVydGllc1tzXSxbaV0sWyJwYXR0ZXJuUHJvcGVydGllcyIsc10sbykpKXJldHVybiBufWlmKGEpdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy5rbm93blByb3BlcnR5UGF0aHNbb109ITAsZGVsZXRlIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHNbb10pO2Vsc2UgaWYodm9pZCAwIT09dC5hZGRpdGlvbmFsUHJvcGVydGllcyl7aWYodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy5rbm93blByb3BlcnR5UGF0aHNbb109ITAsZGVsZXRlIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHNbb10pLCJib29sZWFuIj09dHlwZW9mIHQuYWRkaXRpb25hbFByb3BlcnRpZXMpe2lmKCF0LmFkZGl0aW9uYWxQcm9wZXJ0aWVzJiYobj10aGlzLmNyZWF0ZUVycm9yKGcuT0JKRUNUX0FERElUSU9OQUxfUFJPUEVSVElFUyx7a2V5Oml9LCIiLCIvYWRkaXRpb25hbFByb3BlcnRpZXMiLG51bGwsZSx0KS5wcmVmaXhXaXRoKGksbnVsbCksdGhpcy5oYW5kbGVFcnJvcihuKSkpcmV0dXJuIG59ZWxzZSBpZihuPXRoaXMudmFsaWRhdGVBbGwoZVtpXSx0LmFkZGl0aW9uYWxQcm9wZXJ0aWVzLFtpXSxbImFkZGl0aW9uYWxQcm9wZXJ0aWVzIl0sbykpcmV0dXJuIG59ZWxzZSB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJiF0aGlzLmtub3duUHJvcGVydHlQYXRoc1tvXSYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHNbb109ITApfXJldHVybiBudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdERlcGVuZGVuY2llcz1mdW5jdGlvbihlLHQscil7dmFyIG47aWYodm9pZCAwIT09dC5kZXBlbmRlbmNpZXMpZm9yKHZhciBpIGluIHQuZGVwZW5kZW5jaWVzKWlmKHZvaWQgMCE9PWVbaV0pe3ZhciBvPXQuZGVwZW5kZW5jaWVzW2ldO2lmKCJzdHJpbmciPT10eXBlb2Ygbyl7aWYodm9pZCAwPT09ZVtvXSYmKG49dGhpcy5jcmVhdGVFcnJvcihnLk9CSkVDVF9ERVBFTkRFTkNZX0tFWSx7a2V5OmksbWlzc2luZzpvfSwiIiwiIixudWxsLGUsdCkucHJlZml4V2l0aChudWxsLGkpLnByZWZpeFdpdGgobnVsbCwiZGVwZW5kZW5jaWVzIiksdGhpcy5oYW5kbGVFcnJvcihuKSkpcmV0dXJuIG59ZWxzZSBpZihBcnJheS5pc0FycmF5KG8pKWZvcih2YXIgYT0wO2E8by5sZW5ndGg7YSsrKXt2YXIgcz1vW2FdO2lmKHZvaWQgMD09PWVbc10mJihuPXRoaXMuY3JlYXRlRXJyb3IoZy5PQkpFQ1RfREVQRU5ERU5DWV9LRVkse2tleTppLG1pc3Npbmc6c30sIiIsIi8iK2EsbnVsbCxlLHQpLnByZWZpeFdpdGgobnVsbCxpKS5wcmVmaXhXaXRoKG51bGwsImRlcGVuZGVuY2llcyIpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKGUsbyxbXSxbImRlcGVuZGVuY2llcyIsaV0scikpcmV0dXJuIG59cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQ29tYmluYXRpb25zPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy52YWxpZGF0ZUFsbE9mKGUsdCxyKXx8dGhpcy52YWxpZGF0ZUFueU9mKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU9uZU9mKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU5vdChlLHQscil8fG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQWxsT2Y9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQuYWxsT2YpcmV0dXJuIG51bGw7Zm9yKHZhciBuLGk9MDtpPHQuYWxsT2YubGVuZ3RoO2krKyl7dmFyIG89dC5hbGxPZltpXTtpZihuPXRoaXMudmFsaWRhdGVBbGwoZSxvLFtdLFsiYWxsT2YiLGldLHIpKXJldHVybiBufXJldHVybiBudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUFueU9mPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10LmFueU9mKXJldHVybiBudWxsO3ZhciBuLGksbz1bXSxhPXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsaT10aGlzLmtub3duUHJvcGVydHlQYXRocyk7Zm9yKHZhciBzPSEwLHU9MDt1PHQuYW55T2YubGVuZ3RoO3UrKyl7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz17fSx0aGlzLmtub3duUHJvcGVydHlQYXRocz17fSk7dmFyIGM9dC5hbnlPZlt1XSxsPXRoaXMuZXJyb3JzLmxlbmd0aCxmPXRoaXMudmFsaWRhdGVBbGwoZSxjLFtdLFsiYW55T2YiLHVdLHIpO2lmKG51bGw9PT1mJiZsPT09dGhpcy5lcnJvcnMubGVuZ3RoKXtpZih0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLGEpLHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyl7Zm9yKHZhciBwIGluIHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzKWlbcF09ITAsZGVsZXRlIG5bcF07Zm9yKHZhciBoIGluIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMpaVtoXXx8KG5baF09ITApO3M9ITE7Y29udGludWV9cmV0dXJuIG51bGx9ZiYmby5wdXNoKGYucHJlZml4V2l0aChudWxsLCIiK3UpLnByZWZpeFdpdGgobnVsbCwiYW55T2YiKSl9cmV0dXJuIHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9bix0aGlzLmtub3duUHJvcGVydHlQYXRocz1pKSxzPyhvPW8uY29uY2F0KHRoaXMuZXJyb3JzLnNsaWNlKGEpKSx0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLGEpLHRoaXMuY3JlYXRlRXJyb3IoZy5BTllfT0ZfTUlTU0lORyx7fSwiIiwiL2FueU9mIixvLGUsdCkpOnZvaWQgMH0sZC5wcm90b3R5cGUudmFsaWRhdGVPbmVPZj1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5vbmVPZilyZXR1cm4gbnVsbDt2YXIgbixpLG89bnVsbCxhPVtdLHM9dGhpcy5lcnJvcnMubGVuZ3RoO3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKG49dGhpcy51bmtub3duUHJvcGVydHlQYXRocyxpPXRoaXMua25vd25Qcm9wZXJ0eVBhdGhzKTtmb3IodmFyIHU9MDt1PHQub25lT2YubGVuZ3RoO3UrKyl7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz17fSx0aGlzLmtub3duUHJvcGVydHlQYXRocz17fSk7dmFyIGM9dC5vbmVPZlt1XSxsPXRoaXMuZXJyb3JzLmxlbmd0aCxmPXRoaXMudmFsaWRhdGVBbGwoZSxjLFtdLFsib25lT2YiLHVdLHIpO2lmKG51bGw9PT1mJiZsPT09dGhpcy5lcnJvcnMubGVuZ3RoKXtpZihudWxsIT09bylyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSx0aGlzLmNyZWF0ZUVycm9yKGcuT05FX09GX01VTFRJUExFLHtpbmRleDE6byxpbmRleDI6dX0sIiIsIi9vbmVPZiIsbnVsbCxlLHQpO2lmKG89dSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpe2Zvcih2YXIgcCBpbiB0aGlzLmtub3duUHJvcGVydHlQYXRocylpW3BdPSEwLGRlbGV0ZSBuW3BdO2Zvcih2YXIgaCBpbiB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzKWlbaF18fChuW2hdPSEwKX19ZWxzZSBmJiZhLnB1c2goZil9cmV0dXJuIHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9bix0aGlzLmtub3duUHJvcGVydHlQYXRocz1pKSxudWxsPT09bz8oYT1hLmNvbmNhdCh0aGlzLmVycm9ycy5zbGljZShzKSksdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSx0aGlzLmNyZWF0ZUVycm9yKGcuT05FX09GX01JU1NJTkcse30sIiIsIi9vbmVPZiIsYSxlLHQpKToodGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSxudWxsKX0sZC5wcm90b3R5cGUudmFsaWRhdGVOb3Q9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQubm90KXJldHVybiBudWxsO3ZhciBuLGksbz10aGlzLmVycm9ycy5sZW5ndGg7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYobj10aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzLGk9dGhpcy5rbm93blByb3BlcnR5UGF0aHMsdGhpcy51bmtub3duUHJvcGVydHlQYXRocz17fSx0aGlzLmtub3duUHJvcGVydHlQYXRocz17fSk7dmFyIGE9dGhpcy52YWxpZGF0ZUFsbChlLHQubm90LG51bGwsbnVsbCxyKSxzPXRoaXMuZXJyb3JzLnNsaWNlKG8pO3JldHVybiB0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLG8pLHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9bix0aGlzLmtub3duUHJvcGVydHlQYXRocz1pKSxudWxsPT09YSYmMD09PXMubGVuZ3RoP3RoaXMuY3JlYXRlRXJyb3IoZy5OT1RfUEFTU0VELHt9LCIiLCIvbm90IixudWxsLGUsdCk6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVIeXBlcm1lZGlhPWZ1bmN0aW9uKGUsdCxuKXtpZighdC5saW5rcylyZXR1cm4gbnVsbDtmb3IodmFyIGksbz0wO288dC5saW5rcy5sZW5ndGg7bysrKXt2YXIgYT10LmxpbmtzW29dO2lmKCJkZXNjcmliZWRieSI9PT1hLnJlbCl7Zm9yKHZhciBzPW5ldyByKGEuaHJlZiksdT0hMCxjPTA7YzxzLnZhck5hbWVzLmxlbmd0aDtjKyspaWYoIShzLnZhck5hbWVzW2NdaW4gZSkpe3U9ITE7YnJlYWt9aWYodSl7dmFyIGw9cy5maWxsRnJvbU9iamVjdChlKSxmPXskcmVmOmx9O2lmKGk9dGhpcy52YWxpZGF0ZUFsbChlLGYsW10sWyJsaW5rcyIsb10sbikpcmV0dXJuIGl9fX19O3ZhciBnPXtJTlZBTElEX1RZUEU6MCxFTlVNX01JU01BVENIOjEsQU5ZX09GX01JU1NJTkc6MTAsT05FX09GX01JU1NJTkc6MTEsT05FX09GX01VTFRJUExFOjEyLE5PVF9QQVNTRUQ6MTMsTlVNQkVSX01VTFRJUExFX09GOjEwMCxOVU1CRVJfTUlOSU1VTToxMDEsTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFOjEwMixOVU1CRVJfTUFYSU1VTToxMDMsTlVNQkVSX01BWElNVU1fRVhDTFVTSVZFOjEwNCxOVU1CRVJfTk9UX0FfTlVNQkVSOjEwNSxTVFJJTkdfTEVOR1RIX1NIT1JUOjIwMCxTVFJJTkdfTEVOR1RIX0xPTkc6MjAxLFNUUklOR19QQVRURVJOOjIwMixPQkpFQ1RfUFJPUEVSVElFU19NSU5JTVVNOjMwMCxPQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNOjMwMSxPQkpFQ1RfUkVRVUlSRUQ6MzAyLE9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVM6MzAzLE9CSkVDVF9ERVBFTkRFTkNZX0tFWTozMDQsQVJSQVlfTEVOR1RIX1NIT1JUOjQwMCxBUlJBWV9MRU5HVEhfTE9ORzo0MDEsQVJSQVlfVU5JUVVFOjQwMixBUlJBWV9BRERJVElPTkFMX0lURU1TOjQwMyxGT1JNQVRfQ1VTVE9NOjUwMCxLRVlXT1JEX0NVU1RPTTo1MDEsQ0lSQ1VMQVJfUkVGRVJFTkNFOjYwMCxVTktOT1dOX1BST1BFUlRZOjFlM30sdj17fTtmb3IodmFyIGIgaW4gZyl2W2dbYl1dPWI7dmFyIF89e0lOVkFMSURfVFlQRToiSW52YWxpZCB0eXBlOiB7dHlwZX0gKGV4cGVjdGVkIHtleHBlY3RlZH0pIixFTlVNX01JU01BVENIOiJObyBlbnVtIG1hdGNoIGZvcjoge3ZhbHVlfSIsQU5ZX09GX01JU1NJTkc6J0RhdGEgZG9lcyBub3QgbWF0Y2ggYW55IHNjaGVtYXMgZnJvbSAiYW55T2YiJyxPTkVfT0ZfTUlTU0lORzonRGF0YSBkb2VzIG5vdCBtYXRjaCBhbnkgc2NoZW1hcyBmcm9tICJvbmVPZiInLE9ORV9PRl9NVUxUSVBMRTonRGF0YSBpcyB2YWxpZCBhZ2FpbnN0IG1vcmUgdGhhbiBvbmUgc2NoZW1hIGZyb20gIm9uZU9mIjogaW5kaWNlcyB7aW5kZXgxfSBhbmQge2luZGV4Mn0nLE5PVF9QQVNTRUQ6J0RhdGEgbWF0Y2hlcyBzY2hlbWEgZnJvbSAibm90IicsTlVNQkVSX01VTFRJUExFX09GOiJWYWx1ZSB7dmFsdWV9IGlzIG5vdCBhIG11bHRpcGxlIG9mIHttdWx0aXBsZU9mfSIsTlVNQkVSX01JTklNVU06IlZhbHVlIHt2YWx1ZX0gaXMgbGVzcyB0aGFuIG1pbmltdW0ge21pbmltdW19IixOVU1CRVJfTUlOSU1VTV9FWENMVVNJVkU6IlZhbHVlIHt2YWx1ZX0gaXMgZXF1YWwgdG8gZXhjbHVzaXZlIG1pbmltdW0ge21pbmltdW19IixOVU1CRVJfTUFYSU1VTToiVmFsdWUge3ZhbHVlfSBpcyBncmVhdGVyIHRoYW4gbWF4aW11bSB7bWF4aW11bX0iLE5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRToiVmFsdWUge3ZhbHVlfSBpcyBlcXVhbCB0byBleGNsdXNpdmUgbWF4aW11bSB7bWF4aW11bX0iLE5VTUJFUl9OT1RfQV9OVU1CRVI6IlZhbHVlIHt2YWx1ZX0gaXMgbm90IGEgdmFsaWQgbnVtYmVyIixTVFJJTkdfTEVOR1RIX1NIT1JUOiJTdHJpbmcgaXMgdG9vIHNob3J0ICh7bGVuZ3RofSBjaGFycyksIG1pbmltdW0ge21pbmltdW19IixTVFJJTkdfTEVOR1RIX0xPTkc6IlN0cmluZyBpcyB0b28gbG9uZyAoe2xlbmd0aH0gY2hhcnMpLCBtYXhpbXVtIHttYXhpbXVtfSIsU1RSSU5HX1BBVFRFUk46IlN0cmluZyBkb2VzIG5vdCBtYXRjaCBwYXR0ZXJuOiB7cGF0dGVybn0iLE9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU06IlRvbyBmZXcgcHJvcGVydGllcyBkZWZpbmVkICh7cHJvcGVydHlDb3VudH0pLCBtaW5pbXVtIHttaW5pbXVtfSIsT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTToiVG9vIG1hbnkgcHJvcGVydGllcyBkZWZpbmVkICh7cHJvcGVydHlDb3VudH0pLCBtYXhpbXVtIHttYXhpbXVtfSIsT0JKRUNUX1JFUVVJUkVEOiJNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5OiB7a2V5fSIsT0JKRUNUX0FERElUSU9OQUxfUFJPUEVSVElFUzoiQWRkaXRpb25hbCBwcm9wZXJ0aWVzIG5vdCBhbGxvd2VkIixPQkpFQ1RfREVQRU5ERU5DWV9LRVk6IkRlcGVuZGVuY3kgZmFpbGVkIC0ga2V5IG11c3QgZXhpc3Q6IHttaXNzaW5nfSAoZHVlIHRvIGtleToge2tleX0pIixBUlJBWV9MRU5HVEhfU0hPUlQ6IkFycmF5IGlzIHRvbyBzaG9ydCAoe2xlbmd0aH0pLCBtaW5pbXVtIHttaW5pbXVtfSIsQVJSQVlfTEVOR1RIX0xPTkc6IkFycmF5IGlzIHRvbyBsb25nICh7bGVuZ3RofSksIG1heGltdW0ge21heGltdW19IixBUlJBWV9VTklRVUU6IkFycmF5IGl0ZW1zIGFyZSBub3QgdW5pcXVlIChpbmRpY2VzIHttYXRjaDF9IGFuZCB7bWF0Y2gyfSkiLEFSUkFZX0FERElUSU9OQUxfSVRFTVM6IkFkZGl0aW9uYWwgaXRlbXMgbm90IGFsbG93ZWQiLEZPUk1BVF9DVVNUT006IkZvcm1hdCB2YWxpZGF0aW9uIGZhaWxlZCAoe21lc3NhZ2V9KSIsS0VZV09SRF9DVVNUT006IktleXdvcmQgZmFpbGVkOiB7a2V5fSAoe21lc3NhZ2V9KSIsQ0lSQ1VMQVJfUkVGRVJFTkNFOiJDaXJjdWxhciAkcmVmczoge3VybHN9IixVTktOT1dOX1BST1BFUlRZOiJVbmtub3duIHByb3BlcnR5IChub3QgaW4gc2NoZW1hKSJ9O2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jLGMucHJvdG90eXBlLm5hbWU9IlZhbGlkYXRpb25FcnJvciIsYy5wcm90b3R5cGUucHJlZml4V2l0aD1mdW5jdGlvbihlLHQpe2lmKG51bGwhPT1lJiYoZT1lLnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpLHRoaXMuZGF0YVBhdGg9Ii8iK2UrdGhpcy5kYXRhUGF0aCksbnVsbCE9PXQmJih0PXQucmVwbGFjZSgvfi9nLCJ+MCIpLnJlcGxhY2UoL1wvL2csIn4xIiksdGhpcy5zY2hlbWFQYXRoPSIvIit0K3RoaXMuc2NoZW1hUGF0aCksbnVsbCE9PXRoaXMuc3ViRXJyb3JzKWZvcih2YXIgcj0wO3I8dGhpcy5zdWJFcnJvcnMubGVuZ3RoO3IrKyl0aGlzLnN1YkVycm9yc1tyXS5wcmVmaXhXaXRoKGUsdCk7cmV0dXJuIHRoaXN9O3ZhciBPPXt9LCQ9ZigpO3JldHVybiAkLmFkZExhbmd1YWdlKCJlbi1nYiIsXyksJC50djQ9JCwkfSl9LHt9XSw5MDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1lKCIuL3J1bnRpbWUtY2F0YWxvZ3VlL1J1bnRpbWVDYXRhbG9ndWUtTG9jYWwiKSxvPW4oaSk7clsiZGVmYXVsdCJdPW9bImRlZmF1bHQiXSx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vcnVudGltZS1jYXRhbG9ndWUvUnVudGltZUNhdGFsb2d1ZS1Mb2NhbCI6MTAwLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE1fV0sOTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixvLGEscyx1KXtpKHRoaXMsZSksdGhpcy5fZ3VpZD10LHRoaXMuX3R5cGU9cix0aGlzLl92ZXJzaW9uPW4sdGhpcy5fb2JqZWN0TmFtZT1vLHRoaXMuX2Rlc2NyaXB0aW9uPWEsdGhpcy5fbGFuZ3VhZ2U9cyx0aGlzLl9zb3VyY2VQYWNrYWdlVVJMPXUsdGhpcy5fc2lnbmF0dXJlPW51bGwsdGhpcy5fc291cmNlUGFja2FnZT1udWxsfXJldHVybiBuKGUsW3trZXk6Imd1aWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ndWlkfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2d1aWQ9ZSl9fSx7a2V5OiJ0eXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl90eXBlPWUpfX0se2tleToidmVyc2lvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZlcnNpb259LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fdmVyc2lvbj1lKX19LHtrZXk6Im9iamVjdE5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYmplY3ROYW1lfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX29iamVjdE5hbWU9ZSl9fSx7a2V5OiJkZXNjcmlwdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2Rlc2NyaXB0aW9uPWUpfX0se2tleToibGFuZ3VhZ2UiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYW5ndWFnZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9sYW5ndWFnZT1lKX19LHtrZXk6InNpZ25hdHVyZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpZ25hdHVyZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9zaWduYXR1cmU9ZSl9fSx7a2V5OiJzb3VyY2VQYWNrYWdlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlUGFja2FnZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9zb3VyY2VQYWNrYWdlPWUpfX0se2tleToic291cmNlUGFja2FnZVVSTCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZVBhY2thZ2VVUkx9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc291cmNlUGFja2FnZVVSTD1lKX19XSksZX0oKSxhPXtIWVBFUlRZOiJoeXBlcnR5IixQUk9UT1NUVUI6InByb3Rvc3R1YiIsSFlQRVJUWV9SVU5USU1FOiJoeXBlcnR5X3J1bnRpbWUiLEhZUEVSVFlfSU5URVJDRVBUT1I6Imh5cGVydHlfaW5zcGVjdG9yIixIWVBFUlRZX0RBVEFfT0JKRUNUOiJoeXBlcnR5X2RhdGFfb2JqZWN0IixQT0xJQ1lfRU5GT1JDRVI6InBvbGljeV9lbmZvcmNlciIsREFUQV9TQ0hFTUE6ImRhdGFfc2NoZW1hIn07ci5DYXRhbG9ndWVPYmplY3RUeXBlPWE7dmFyIHM9e0pBVkFTQ1JJUFRfRUNNQTY6ImphdmFzY3JpcHRfZWNtYTYiLEpBVkFTQ1JJUFRfRUNNQTU6ImphdmFzY3JpcHRfZWNtYTUiLEpTT05fU0NIRU1BX1Y0OiJqc29uX3NjaGVtYV92NCIsUFlUSE9OOiJweXRob24iLFRZUEVTQ1JJUFQ6InR5cGVzY3JpcHQifTtyLkRhdGFPYmplY3RTb3VyY2VMYW5ndWFnZT1zLHJbImRlZmF1bHQiXT1vfSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMX1dLDkyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHU9ZSgiLi4vcmVUSElOS09iamVjdC9SZXRoaW5rT2JqZWN0IiksYz1zKHUpLGw9ZSgiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IiksZj1zKGwpLHA9ZSgiLi9Tb3VyY2VQYWNrYWdlIiksaD1zKHApLGQ9ZSgiLi9IeXBlcnR5RGVzY3JpcHRvciIpLHk9cyhkKSxtPWUoIi4vUHJvdG9jb2xTdHViRGVzY3JpcHRvciIpLGc9cyhtKSx2PWUoIi4vSHlwZXJ0eVJ1bnRpbWVEZXNjcmlwdG9yIiksYj1zKHYpLF89ZSgiLi9Qb2xpY3lFbmZvcmNlckRlc2NyaXB0b3IiKSxPPXMoXyksJD1lKCIuL0RhdGFPYmplY3RTY2hlbWEiKSxFPXMoJCksUD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscil7YSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIpfXJldHVybiBpKHQsZSksbyh0LFt7a2V5OiJjcmVhdGVDYXRhbG9ndWVEYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLGksbyxhKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2YgaXx8InVuZGVmaW5lZCI9PXR5cGVvZiBvfHwidW5kZWZpbmVkIj09dHlwZW9mIGEpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyBmWyJkZWZhdWx0Il0oZSx0LHIsbixpLG8sYSl9fSx7a2V5OiJjcmVhdGVIeXBlcnR5RGVzY3JpcHRvck9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSxzKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2YgaXx8InVuZGVmaW5lZCI9PXR5cGVvZiBvfHwidW5kZWZpbmVkIj09dHlwZW9mIGF8fCJ1bmRlZmluZWQiPT10eXBlb2Ygcyl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IHlbImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5IWVBFUlRZLHQscixuLGksbyxhLHMpfX0se2tleToiY3JlYXRlUHJvdG9TdHViRGVzY3JpcHRvck9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSxzLHUpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIG98fCJ1bmRlZmluZWQiPT10eXBlb2YgYXx8InVuZGVmaW5lZCI9PXR5cGVvZiBzfHwidW5kZWZpbmVkIj09dHlwZW9mIHUpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyBnWyJkZWZhdWx0Il0oZSxsLkNhdGFsb2d1ZU9iamVjdFR5cGUuUFJPVE9TVFVCLHQscixuLGksbyxhLHMsdSl9fSx7a2V5OiJjcmVhdGVIeXBlcnR5UnVudGltZURlc2NyaXB0b3JPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSxvLGEscyx1KXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2YgaXx8InVuZGVmaW5lZCI9PXR5cGVvZiBvfHwidW5kZWZpbmVkIj09dHlwZW9mIGF8fCJ1bmRlZmluZWQiPT10eXBlb2Ygc3x8InVuZGVmaW5lZCI9PXR5cGVvZiB1KXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgYlsiZGVmYXVsdCJdKGUsbC5DYXRhbG9ndWVPYmplY3RUeXBlLkhZUEVSVFlfUlVOVElNRSx0LHIsbixpLG8sYSxzLHUpfX0se2tleToiY3JlYXRlUG9saWN5RW5mb3JjZXJEZXNjcmlwdG9yT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLGksbyxhLHMpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIG98fCJ1bmRlZmluZWQiPT10eXBlb2YgYXx8InVuZGVmaW5lZCI9PXR5cGVvZiBzKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgT1siZGVmYXVsdCJdKGUsbC5DYXRhbG9ndWVPYmplY3RUeXBlLlBPTElDWV9FTkZPUkNFUix0LHIsbixpLG8sYSxzKX19LHtrZXk6ImNyZWF0ZURhdGFPYmplY3RTY2hlbWEiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSxvKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2YgaXx8InVuZGVmaW5lZCI9PXR5cGVvZiBvKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgRVsiZGVmYXVsdCJdKGUsbC5DYXRhbG9ndWVPYmplY3RUeXBlLkRBVEFfU0NIRU1BLHQscixuLGksbyl9fSx7a2V5OiJjcmVhdGVTb3VyY2VQYWNrYWdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgaFsiZGVmYXVsdCJdKGUsdCl9fV0pLHR9KGNbImRlZmF1bHQiXSk7clsiZGVmYXVsdCJdPVAsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi9yZVRISU5LT2JqZWN0L1JldGhpbmtPYmplY3QiOjk5LCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiOjkxLCIuL0RhdGFPYmplY3RTY2hlbWEiOjkzLCIuL0h5cGVydHlEZXNjcmlwdG9yIjo5NCwiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiOjk1LCIuL1BvbGljeUVuZm9yY2VyRGVzY3JpcHRvciI6OTYsIi4vUHJvdG9jb2xTdHViRGVzY3JpcHRvciI6OTcsIi4vU291cmNlUGFja2FnZSI6OTgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTV9XSw5MzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcz1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSx1PWEocyksYz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLGEscyx1LGMpe28odGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksYSxzLHUsYyl9cmV0dXJuIGkodCxlKSx0fSh1WyJkZWZhdWx0Il0pLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsaSxhLHMsdSxjKXtvKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixpLGEscyx1LGMpfXJldHVybiBpKHQsZSksdH0oYyk7ci5NZXNzYWdlRGF0YU9iamVjdFNjaGVtYT1sO3ZhciBmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLGksYSxzLHUsYyxsKXtvKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixpLGEscyx1LGMpLHRoaXMuX2FjY2Vzc0NvbnRyb2xQb2xpY3k9bH1yZXR1cm4gaSh0LGUpLHR9KGMpO3IuSHlwZXJ0eURhdGFPYmplY3RTY2hlbWE9Zjt2YXIgcD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLGEscyx1LGMsbCl7byh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsaSxhLHMsdSxjLGwpfXJldHVybiBpKHQsZSksdH0oZik7ci5Db21tdW5pY2F0aW9uRGF0YU9iamVjdFNjaGVtYT1wO3ZhciBoPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLGksYSxzLHUsYyxsKXtvKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixpLGEscyx1LGMsbCl9cmV0dXJuIGkodCxlKSx0fShmKTtyLkNvbm5lY3Rpb25EYXRhT2JqZWN0U2NoZW1hPWg7dmFyIGQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsaSxhLHMsdSxjLGwpe28odGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksYSxzLHUsYyxsKTsKfXJldHVybiBpKHQsZSksdH0oZik7ci5JZGVudGlmeURhdGFPYmplY3RTY2hlbWE9ZDt2YXIgeT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLGEscyx1LGMsbCl7byh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsaSxhLHMsdSxjLGwpfXJldHVybiBpKHQsZSksdH0oZik7ci5Db250ZXh0RGF0YU9iamVjdFNjaGVtYT15LHJbImRlZmF1bHQiXT1jfSx7Ii4vQ2F0YWxvZ3VlRGF0YU9iamVjdCI6OTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxNX1dLDk0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHU9ZSgiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IiksYz1zKHUpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsaSxvLHMsdSxjLGwsZil7YSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsaSxvLHMsdSxjKSx0aGlzLl9jb25maWd1cmF0aW9uPXt9LHRoaXMuX2NvbnN0cmFpbnRzPXt9LHRoaXMuX3BvbGljaWVzPXt9LHRoaXMuX21lc3NhZ2VTY2hlbWE9bnVsbCx0aGlzLl9oeXBlcnR5VHlwZT1sLHRoaXMuX2RhdGFPYmplY3RzPWZ9cmV0dXJuIGkodCxlKSxvKHQsW3trZXk6Imh5cGVydHlUeXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHlwZXJ0eVR5cGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5faHlwZXJ0eVR5cGU9ZSl9fSx7a2V5OiJkYXRhT2JqZWN0cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFPYmplY3RzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2RhdGFPYmplY3RzPWUpfX0se2tleToiY29uZmlndXJhdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ3VyYXRpb259LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fY29uZmlndXJhdGlvbj1lKX19LHtrZXk6ImNvbnN0cmFpbnRzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uc3RyYWludHN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fY29uc3RyYWludHM9ZSl9fSx7a2V5OiJtZXNzYWdlU2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZVNjaGVtYX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9tZXNzYWdlU2NoZW1hPWUpfX0se2tleToicG9saWNpZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2xpY2llc30sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9wb2xpY2llcz1lKX19XSksdH0oY1siZGVmYXVsdCJdKSxmPXt9O3IuUnVudGltZUh5cGVydHlDYXBhYmlsaXR5VHlwZT1mO3ZhciBwPXtDT01NVU5JQ0FUT1I6ImNvbW11bmljYXRvciIsSURFTlRJVFk6ImlkZW50aXR5IixDT05URVhUOiJjb250ZXh0In07ci5IeXBlcnR5VHlwZT1wLHJbImRlZmF1bHQiXT1sfSx7Ii4vQ2F0YWxvZ3VlRGF0YU9iamVjdCI6OTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTV9XSw5NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciB1PWUoIi4vQ2F0YWxvZ3VlRGF0YU9iamVjdCIpLGM9cyh1KSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLGksbyxzLHUsYyxsLGYscCl7YSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsaSxvLHMsdSxjKSx0aGlzLl9ydW50aW1lVHlwZT1sLGY/dGhpcy5faHlwZXJ0eUNhcGFiaWxpdGllcz1mOnRoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXM9e30scD90aGlzLl9wcm90b2NvbENhcGFiaWxpdGllcz1wOnRoaXMuX3Byb3RvY29sQ2FwYWJpbGl0aWVzPXt9fXJldHVybiBpKHQsZSksbyh0LFt7a2V5OiJydW50aW1lVHlwZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3J1bnRpbWVUeXBlfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3J1bnRpbWVUeXBlPWUpfX0se2tleToiaHlwZXJ0eUNhcGFiaWxpdGllcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5faHlwZXJ0eUNhcGFiaWxpdGllcz1lKX19LHtrZXk6InByb3RvY29sQ2FwYWJpbGl0aWVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHlwZXJ0eUNhcGFiaWxpdGllc30sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9wcm90b2NvbENhcGFiaWxpdGllcz1lKX19XSksdH0oY1siZGVmYXVsdCJdKSxmPXtCUk9XU0VSOiJicm93c2VyIixTVEFOREFMT05FOiJzdGFuZGFsb25lIixTRVJWRVI6InNlcnZlciIsR0FURVdBWToiZ2F0ZXdheSJ9O3IuUnVudGltZVR5cGU9Zjt2YXIgcD17TUlDOiJtaWMiLENBTUVSQToiY2FtZXJhIixTRU5TT1I6InNlbnNvciIsV0VCUlRDOiJ3ZWJydGMiLE9SVEM6Im9ydGMifTtyLlJ1bnRpbWVIeXBlcnR5Q2FwYWJpbGl0eVR5cGU9cDt2YXIgaD17SFRUUDoiaHR0cCIsSFRUUFM6Imh0dHBzIixXUzoid3MiLFdTUzoid3NzIixDT0FQOiJjb2FwIixEQVRBQ0hBTkVMOiJkYXRhY2hhbm5lbCJ9O3IuUnVudGltZVByb3RvY29sQ2FwYWJpbGl0eVR5cGU9aCxyWyJkZWZhdWx0Il09bH0seyIuL0NhdGFsb2d1ZURhdGFPYmplY3QiOjkxLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE1fV0sOTY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSxjPXModSksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLG8scyx1LGMsbCxmKXthKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixpLG8scyx1LGMpLHRoaXMuX2NvbmZpZ3VyYXRpb249bCx0aGlzLl9wb2xpY2llcz1mfXJldHVybiBpKHQsZSksbyh0LFt7a2V5OiJjb25maWd1cmF0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uZmlndXJhdGlvbn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2NvbmZpZ3VyYXRpb249ZX19LHtrZXk6InBvbGljaWVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9saWNpZXN9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9wb2xpY2llcz1lfX1dKSx0fShjWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT1sLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo5MSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxNX1dLDk3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHU9ZSgiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IiksYz1zKHUpLGw9ZSgiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiKSxmPShzKGwpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLGksbyxzLHUsYyxsLGYscCl7YSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsaSxvLHMsdSxjKSx0aGlzLl9tZXNzYWdlU2NoZW1hcz1sLGY/dGhpcy5fY29uZmlndXJhdGlvbj1mOnRoaXMuX2NvbmZpZ3VyYXRpb249e30scD90aGlzLl9jb25zdHJhaW50cz1wOnRoaXMuX2NvbnN0cmFpbnRzPXt9fXJldHVybiBpKHQsZSksbyh0LFt7a2V5OiJtZXNzYWdlU2NoZW1hcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc3NhZ2VTY2hlbWFzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX21lc3NhZ2VTY2hlbWFzPWUpfX0se2tleToiY29uc3RyYWludHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25zdHJhaW50c30sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9jb25zdHJhaW50cz1lKX19LHtrZXk6ImNvbmZpZ3VyYXRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25maWd1cmF0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2NvbmZpZ3VyYXRpb249ZSl9fV0pLHR9KGNbImRlZmF1bHQiXSkpO3JbImRlZmF1bHQiXT1mLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo5MSwiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiOjk1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE1fV0sOTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpe2kodGhpcyxlKSx0aGlzLl9zb3VyY2VDb2RlPXIsdGhpcy5fc291cmNlQ29kZUNsYXNzbmFtZT10LHRoaXMuX2VuY29kaW5nPW51bGwsdGhpcy5fc2lnbmF0dXJlPW51bGx9cmV0dXJuIG4oZSxbe2tleToic291cmNlQ29kZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZUNvZGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc291cmNlQ29kZT1lKX19LHtrZXk6InNvdXJjZUNvZGVDbGFzc25hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VDb2RlQ2xhc3NuYW1lfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NvdXJjZUNvZGVDbGFzc25hbWU9ZSl9fSx7a2V5OiJlbmNvZGluZyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuY29kaW5nfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2VuY29kaW5nPWUpfX0se2tleToic2lnbmF0dXJlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2lnbmF0dXJlfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NpZ25hdHVyZT1lKX19XSksZX0oKTtyWyJkZWZhdWx0Il09byx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMX1dLDk5OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGE9ZSgidHY0Iikscz1vKGEpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7aSh0aGlzLGUpO3RoaXMudmFsaWRhdGlvbj10LHRoaXMuc2NoZW1hPXJ9cmV0dXJuIG4oZSxbe2tleToidmFsaWRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNjaGVtYT9zWyJkZWZhdWx0Il0udmFsaWRhdGUoZSx0aGlzLnNjaGVtYSk6ITF9fV0pLGV9KCk7ci5SZXRoaW5rT2JqZWN0PXUsclsiZGVmYXVsdCJdPXV9LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE1LHR2NDo4OX1dLDEwMDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBzPWUoIi4uL3V0aWxzL3V0aWxzIiksdT1lKCIuLi9jYXRhbG9ndWUtZmFjdG9yeS9DYXRhbG9ndWVEYXRhT2JqZWN0RmFjdG9yeSIpLGM9YSh1KSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtpZihpKHRoaXMsZSksIXQpdGhyb3cgRXJyb3IoIlRoZSBjYXRhbG9ndWUgbmVlZHMgdGhlIHJ1bnRpbWVGYWN0b3J5Iik7dmFyIHI9dGhpcztyLl9mYWN0b3J5PW5ldyBjWyJkZWZhdWx0Il0oITEsdm9pZCAwKSxyLmh0dHBSZXF1ZXN0PXQuY3JlYXRlSHR0cFJlcXVlc3QoKX1yZXR1cm4gbihlLFt7a2V5OiJnZXRIeXBlcnR5UnVudGltZVVSTCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBlLl9oeXBlcnR5UnVudGltZVVSTH19LHtrZXk6ImdldEh5cGVydHlEZXNjcmlwdG9yIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgbyhmdW5jdGlvbihyLG4pe3ZhciBpPSgwLHMuZGl2aWRlVVJMKShlKSxvPWkudHlwZSxhPWkuZG9tYWluLHU9aS5pZGVudGl0eTthfHwoYT1lKSx1JiYodT11LnN1YnN0cmluZyh1Lmxhc3RJbmRleE9mKCIvIikrMSkpLHQuaHR0cFJlcXVlc3QuZ2V0KG8rIjovLyIrYSsiL3Jlc291cmNlcy9kZXNjcmlwdG9ycy9IeXBlcnRpZXMuanNvbiIpLnRoZW4oZnVuY3Rpb24oZSl7dC5IeXBlcnRpZXM9SlNPTi5wYXJzZShlKTt2YXIgaT10Lkh5cGVydGllc1t1XTtpZihpLmVycm9yKW4oaSk7ZWxzZXt2YXIgbz10Ll9mYWN0b3J5LmNyZWF0ZUh5cGVydHlEZXNjcmlwdG9yT2JqZWN0KGkuY2d1aWQsaS52ZXJzaW9uLGkub2JqZWN0TmFtZSxpLmRlc2NyaXB0aW9uLGkubGFuZ3VhZ2UsaS5zb3VyY2VQYWNrYWdlVVJMLGkudHlwZXx8aS5oeXBlcnR5VHlwZSxpLmRhdGFPYmplY3RzKTtvLmNvbmZpZ3VyYXRpb249aS5jb25maWd1cmF0aW9uLG8uY29uc3RyYWludHM9aS5jb25zdHJhaW50cyxvLm1lc3NhZ2VTY2hlbWE9aS5tZXNzYWdlU2NoZW1hLG8ucG9saWNpZXM9aS5wb2xpY2llcyxvLnNpZ25hdHVyZT1pLnNpZ25hdHVyZTt2YXIgYT1pLnNvdXJjZVBhY2thZ2U7YSYmKG8uc291cmNlUGFja2FnZT10Ll9jcmVhdGVTb3VyY2VQYWNrYWdlKHQuX2ZhY3RvcnksYSkpLGNvbnNvbGUubG9nKCJoeXBlcnR5IGhhcyBzb3VyY2VQYWNrYWdlOiIsbykscihvKX19KX0pfX0se2tleToiZ2V0UnVudGltZURlc2NyaXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvKGZ1bmN0aW9uKHIsbil7dmFyIGk9KDAscy5kaXZpZGVVUkwpKGUpLG89aS50eXBlLGE9aS5kb21haW4sdT1pLmlkZW50aXR5O3UmJih1PXUuc3Vic3RyaW5nKHUubGFzdEluZGV4T2YoIi8iKSsxKSksdC5odHRwUmVxdWVzdC5nZXQobysiOi8vIithKyIvcmVzb3VyY2VzL2Rlc2NyaXB0b3JzL1J1bnRpbWVzLmpzb24iKS50aGVuKGZ1bmN0aW9uKGUpe3QuUnVudGltZXM9SlNPTi5wYXJzZShlKTt2YXIgaT10LlJ1bnRpbWVzW3VdO2lmKGkuRVJST1IpbihpKTtlbHNle3RyeXtpLmh5cGVydHlDYXBhYmlsaXRpZXM9SlNPTi5wYXJzZShpLmh5cGVydHlDYXBhYmlsaXRpZXMpLGkucHJvdG9jb2xDYXBhYmlsaXRpZXM9SlNPTi5wYXJzZShpLnByb3RvY29sQ2FwYWJpbGl0aWVzKX1jYXRjaChvKXt9Y29uc29sZS5sb2coImNyZWF0aW5nIHJ1bnRpbWUgZGVzY3JpcHRvciBiYXNlZCBvbjogIixpKTt2YXIgYT10Ll9mYWN0b3J5LmNyZWF0ZUh5cGVydHlSdW50aW1lRGVzY3JpcHRvck9iamVjdChpLmNndWlkLGkudmVyc2lvbixpLm9iamVjdE5hbWUsaS5kZXNjcmlwdGlvbixpLmxhbmd1YWdlLGkuc291cmNlUGFja2FnZVVSTCxpLnR5cGV8fGkucnVudGltZVR5cGUsaS5oeXBlcnR5Q2FwYWJpbGl0aWVzLGkucHJvdG9jb2xDYXBhYmlsaXRpZXMpO2NvbnNvbGUubG9nKCJjcmVhdGVkIHJ1bnRpbWUgZGVzY3JpcHRvciBvYmplY3Q6IixhKTt2YXIgcz1pLnNvdXJjZVBhY2thZ2U7cyYmKGEuc291cmNlUGFja2FnZT10Ll9jcmVhdGVTb3VyY2VQYWNrYWdlKHQuX2ZhY3RvcnkscykpLHIoYSl9fSl9KX19LHtrZXk6ImdldElkcFByb3h5RGVzY3JpcHRvciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8oZnVuY3Rpb24ocixuKXt2YXIgaT0oMCxzLmRpdmlkZVVSTCkoZSksbz1pLnR5cGUsYT1pLmRvbWFpbix1PWkuaWRlbnRpdHk7dSYmKHU9dS5zdWJzdHJpbmcodS5sYXN0SW5kZXhPZigiLyIpKzEpKSx0Lmh0dHBSZXF1ZXN0LmdldChvKyI6Ly8iK2ErIi9yZXNvdXJjZXMvZGVzY3JpcHRvcnMvSURQUHJveHlzLmpzb24iKS50aGVuKGZ1bmN0aW9uKGUpe3QuSURQUHJveHlzPUpTT04ucGFyc2UoZSk7dmFyIHI9dC5JRFBQcm94eXNbdV07aWYoIXIuRVJST1Ipe3ZhciBpPXQuX2ZhY3RvcnkuY3JlYXRlUHJvdG9TdHViRGVzY3JpcHRvck9iamVjdChyLmNndWlkLHIudmVyc2lvbixyLm9iamVjdE5hbWUsci5kZXNjcmlwdGlvbixyLmxhbmd1YWdlLHIuc291cmNlUGFja2FnZVVSTCxyLm1lc3NhZ2VTY2hlbWFzLEpTT04uc3RyaW5naWZ5KHIuY29uZmlndXJhdGlvbiksci5jb25zdHJhaW50cyk7aS5zaWduYXR1cmU9ci5zaWduYXR1cmUsY29uc29sZS5sb2coIkFTU0FEQUQ6IixyKTt2YXIgbz1yLnNvdXJjZVBhY2thZ2U7cmV0dXJuIG8mJihjb25zb2xlLmxvZyh0Ll9jcmVhdGVTb3VyY2VQYWNrYWdlKSxvPXQuX2NyZWF0ZVNvdXJjZVBhY2thZ2UodCxvKSxpLnNvdXJjZVBhY2thZ2U9byksaX1uKHIpfSl9KX19LHtrZXk6ImdldFN0dWJEZXNjcmlwdG9yIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgbyhmdW5jdGlvbihyLG4pe3ZhciBpPSgwLHMuZGl2aWRlVVJMKShlKSxvPWkudHlwZSxhPWkuZG9tYWluLHU9aS5pZGVudGl0eTthfHwoYT1lKSx1PXU/dS5zdWJzdHJpbmcodS5sYXN0SW5kZXhPZigiLyIpKzEpOiJkZWZhdWx0Iix0Lmh0dHBSZXF1ZXN0LmdldChvKyI6Ly8iK2ErIi9yZXNvdXJjZXMvZGVzY3JpcHRvcnMvUHJvdG9TdHVicy5qc29uIikudGhlbihmdW5jdGlvbihlKXt0LlByb3RvU3R1YnM9SlNPTi5wYXJzZShlKTt2YXIgaT10LlByb3RvU3R1YnNbdV07aWYoaS5lcnJvciluKGkpO2Vsc2V7Y29uc29sZS5sb2coImNyZWF0aW5nIHN0dWIgZGVzY3JpcHRvciBiYXNlZCBvbjogIixpKTt2YXIgbz10Ll9mYWN0b3J5LmNyZWF0ZVByb3RvU3R1YkRlc2NyaXB0b3JPYmplY3QoaS5jZ3VpZCxpLnZlcnNpb24saS5vYmplY3ROYW1lLGkuZGVzY3JpcHRpb24saS5sYW5ndWFnZSxpLnNvdXJjZVBhY2thZ2VVUkwsaS5tZXNzYWdlU2NoZW1hcyxKU09OLnN0cmluZ2lmeShpLmNvbmZpZ3VyYXRpb24pLGkuY29uc3RyYWludHMpLGE9aS5zb3VyY2VQYWNrYWdlO2EmJihhPXQuX2NyZWF0ZVNvdXJjZVBhY2thZ2UodC5fZmFjdG9yeSxhKSxvLnNvdXJjZVBhY2thZ2U9YSkscihvKX19KX0pfX0se2tleToiZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvKGZ1bmN0aW9uKHIsbil7dmFyIGk9KDAscy5kaXZpZGVVUkwpKGUpLG89aS50eXBlLGE9aS5kb21haW4sdT1pLmlkZW50aXR5O3UmJih1PXUuc3Vic3RyaW5nKHUubGFzdEluZGV4T2YoIi8iKSsxKSksY29uc29sZS5sb2coImdldERhdGFTY2hlbWFEZXNjcmlwdG9yOiAiLGUsaSksdC5odHRwUmVxdWVzdC5nZXQobysiOi8vIithKyIvcmVzb3VyY2VzL2Rlc2NyaXB0b3JzL0RhdGFTY2hlbWFzLmpzb24iKS50aGVuKGZ1bmN0aW9uKGUpe3QuRGF0YVNjaGVtYXM9SlNPTi5wYXJzZShlKTt2YXIgaT10LkRhdGFTY2hlbWFzW3VdO2lmKGkuRVJST1IpbihpKTtlbHNle2NvbnNvbGUubG9nKCJjcmVhdGluZyBkYXRhU2NoZW1hIGJhc2VkIG9uOiAiLGkpO3ZhciBvPXQuX2ZhY3RvcnkuY3JlYXRlRGF0YU9iamVjdFNjaGVtYShpLmNndWlkLGkudmVyc2lvbixpLm9iamVjdE5hbWUsaS5kZXNjcmlwdGlvbixpLmxhbmd1YWdlLGkuc291cmNlUGFja2FnZVVSTCk7by5zaWduYXR1cmU9aS5zaWduYXR1cmUsY29uc29sZS5sb2coImNyZWF0ZWQgZGF0YVNjaGVtYSBkZXNjcmlwdG9yIG9iamVjdDoiLG8pO3ZhciBhPWkuc291cmNlUGFja2FnZTthJiYoby5zb3VyY2VQYWNrYWdlPXQuX2NyZWF0ZVNvdXJjZVBhY2thZ2UodC5fZmFjdG9yeSxhKSwic3RyaW5nIj09dHlwZW9mIG8uc291cmNlUGFja2FnZS5zb3VyY2VDb2RlJiYoby5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGU9SlNPTi5wYXJzZShvLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZSkpKSxyKG8pfX0pfSl9fSx7a2V5OiJnZXRTb3VyY2VQYWNrYWdlRnJvbVVSTCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8oZnVuY3Rpb24ocixuKXsiL3NvdXJjZVBhY2thZ2UiPT09ZSYmbigic291cmNlUGFja2FnZSBpcyBhbHJlYWR5IGNvbnRhaW5lZCBpbiBkZXNjcmlwdG9yLCBwbGVhc2UgdXNlIGl0IGRpcmVjdGx5IiksdC5odHRwUmVxdWVzdC5nZXQoZSkudGhlbihmdW5jdGlvbihlKXtpZihlLmVycm9yKW4oZSk7ZWxzZXtlPUpTT04ucGFyc2UoZSk7dmFyIGk9ZS5zb3VyY2VQYWNrYWdlO2k/KGk9dC5fY3JlYXRlU291cmNlUGFja2FnZSh0Ll9mYWN0b3J5LGkpLHIoaSkpOm4oIm5vIHNvdXJjZSBwYWNrYWdlIil9fSlbImNhdGNoIl0oZnVuY3Rpb24oZSl7bihlKX0pfSl9fSx7a2V5OiJfY3JlYXRlU291cmNlUGFja2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0cnl7dD1KU09OLnBhcnNlKHQpfWNhdGNoKHIpe2NvbnNvbGUubG9nKCJwYXJzaW5nIHNvdXJjZVBhY2thZ2UgZmFpbGVkLiBhbHJlYWR5IHBhcnNlZD8gLT4gIix0KX0iYmFzZTY0Ij09PXQuZW5jb2RpbmcmJih0LnNvdXJjZUNvZGU9YXRvYih0LnNvdXJjZUNvZGUpLHQuZW5jb2Rpbmc9IlVURi04IiksY29uc29sZS5sb2coZSk7dmFyIG49ZS5jcmVhdGVTb3VyY2VQYWNrYWdlKHQuc291cmNlQ29kZUNsYXNzbmFtZSx0LnNvdXJjZUNvZGUpO3JldHVybiB0Lmhhc093blByb3BlcnR5KCJlbmNvZGluZyIpJiYobi5lbmNvZGluZz10LmVuY29kaW5nKSx0Lmhhc093blByb3BlcnR5KCJzaWduYXR1cmUiKSYmKG4uc2lnbmF0dXJlPXQuc2lnbmF0dXJlKSxufX0se2tleToicnVudGltZVVSTCIsc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fcnVudGltZVVSTD1lfSxnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBlLl9ydW50aW1lVVJMfX1dKSxlfSgpO3JbImRlZmF1bHQiXT1sLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi4vY2F0YWxvZ3VlLWZhY3RvcnkvQ2F0YWxvZ3VlRGF0YU9iamVjdEZhY3RvcnkiOjkyLCIuLi91dGlscy91dGlscyI6MTAxLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSI6NiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE1fV0sMTAxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBpPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIGl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZT9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTp2b2lkIDB9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuZGl2aWRlVVJMPW4sci5kZWVwQ2xvbmU9aX0se31dfSx7fSxbOTBdKSg5MCl9KTsKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dLDE2MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3Igc2VydmljZS1mcmFtZXdvcmsuanMgCi8vIHZlcnNpb246IDAuMS4wCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuc2VydmljZUZyYW1ld29yaz1lKCl9fShmdW5jdGlvbigpe3ZhciBlO3JldHVybiBmdW5jdGlvbiB0KGUscixuKXtmdW5jdGlvbiBvKHMsYSl7aWYoIXJbc10pe2lmKCFlW3NdKXt2YXIgdT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYSYmdSlyZXR1cm4gdShzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciBjPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyBjLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGN9dmFyIGw9cltzXT17ZXhwb3J0czp7fX07ZVtzXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbih0KXt2YXIgcj1lW3NdWzFdW3RdO3JldHVybiBvKHI/cjp0KX0sbCxsLmV4cG9ydHMsdCxlLHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2NyZWF0ZSI6MjJ9XSwyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSI6MjN9XSwzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9mcmVlemUiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2ZyZWV6ZSI6MjR9XSw0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6MjV9XSw1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjoyNn1dLDY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2tleXMiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2tleXMiOjI3fV0sNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6Mjh9XSw4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSI6Mjl9XSw5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wiOjMwfV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sL2l0ZXJhdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbC9pdGVyYXRvciI6MzF9XSwxMTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuL2NsYXNzQ2FsbENoZWNrLmpzIil9LHsiLi9jbGFzc0NhbGxDaGVjay5qcyI6MTJ9XSwxMjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi9jcmVhdGVDbGFzcy5qcyIpfSx7Ii4vY3JlYXRlQ2xhc3MuanMiOjE0fV0sMTQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sMTU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGk9bihvKSxzPWUoIi4uL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLGE9bihzKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24gdShlLHQscil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG49KDAsYVsiZGVmYXVsdCJdKShlLHQpO2lmKHZvaWQgMD09PW4pe3ZhciBvPSgwLGlbImRlZmF1bHQiXSkoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp1KG8sdCxyKX1pZigidmFsdWUiaW4gbilyZXR1cm4gbi52YWx1ZTt2YXIgcz1uLmdldDtpZih2b2lkIDAhPT1zKXJldHVybiBzLmNhbGwocil9fSx7Ii4uL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6NCwiLi4vY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6NX1dLDE2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxpPW4obykscz1lKCIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGUiKSxhPW4ocyksdT1lKCIuLi9oZWxwZXJzL3R5cGVvZiIpLGM9bih1KTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiKygidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6KDAsY1siZGVmYXVsdCJdKSh0KSkpO2UucHJvdG90eXBlPSgwLGFbImRlZmF1bHQiXSkodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihpWyJkZWZhdWx0Il0/KDAsaVsiZGVmYXVsdCJdKShlLHQpOmUuX19wcm90b19fPXQpfX0seyIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjEsIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjcsIi4uL2hlbHBlcnMvdHlwZW9mIjoxOX1dLDE3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIil9LHsiLi9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiOjE4fV0sMTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX19LHt9XSwxOTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXZhciBvPSJmdW5jdGlvbiI9PXR5cGVvZiBfU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIF9TeW1ib2wkaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmImZ1bmN0aW9uIj09dHlwZW9mIF9TeW1ib2wmJmUuY29uc3RydWN0b3I9PT1fU3ltYm9sPyJzeW1ib2wiOnR5cGVvZiBlfTtyLl9fZXNNb2R1bGU9ITA7dmFyIGk9ZSgiLi4vY29yZS1qcy9zeW1ib2wvaXRlcmF0b3IiKSxzPW4oaSksYT1lKCIuLi9jb3JlLWpzL3N5bWJvbCIpLHU9bihhKTtyWyJkZWZhdWx0Il09ImZ1bmN0aW9uIj09dHlwZW9mIHVbImRlZmF1bHQiXSYmInN5bWJvbCI9PT1vKHNbImRlZmF1bHQiXSk/ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBlPyJ1bmRlZmluZWQiOm8oZSl9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgdVsiZGVmYXVsdCJdJiZlLmNvbnN0cnVjdG9yPT09dVsiZGVmYXVsdCJdPyJzeW1ib2wiOiJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjpvKGUpfX0seyIuLi9jb3JlLWpzL3N5bWJvbCI6OSwiLi4vY29yZS1qcy9zeW1ib2wvaXRlcmF0b3IiOjEwfV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24ocil7dmFyIG49Im9iamVjdCI9PXR5cGVvZiByP3I6Im9iamVjdCI9PXR5cGVvZiB3aW5kb3c/d2luZG93OiJvYmplY3QiPT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsbz1uLnJlZ2VuZXJhdG9yUnVudGltZSYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobikuaW5kZXhPZigicmVnZW5lcmF0b3JSdW50aW1lIik+PTAsaT1vJiZuLnJlZ2VuZXJhdG9yUnVudGltZTtpZihuLnJlZ2VuZXJhdG9yUnVudGltZT12b2lkIDAsdC5leHBvcnRzPWUoIi4vcnVudGltZSIpLG8pbi5yZWdlbmVyYXRvclJ1bnRpbWU9aTtlbHNlIHRyeXtkZWxldGUgbi5yZWdlbmVyYXRvclJ1bnRpbWV9Y2F0Y2gocyl7bi5yZWdlbmVyYXRvclJ1bnRpbWU9dm9pZCAwfXQuZXhwb3J0cz17ImRlZmF1bHQiOnQuZXhwb3J0cyxfX2VzTW9kdWxlOiEwfX0pLmNhbGwodGhpcywidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0seyIuL3J1bnRpbWUiOjIxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24ocixuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX12YXIgaT1lKCIuLi9jb3JlLWpzL3Byb21pc2UiKSxzPW8oaSksYT1lKCIuLi9jb3JlLWpzL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIiksdT1vKGEpLGM9ZSgiLi4vY29yZS1qcy9vYmplY3QvY3JlYXRlIiksbD1vKGMpLGY9ZSgiLi4vaGVscGVycy90eXBlb2YiKSxwPW8oZiksaD1lKCIuLi9jb3JlLWpzL3N5bWJvbC9pdGVyYXRvciIpLGQ9byhoKSx5PWUoIi4uL2NvcmUtanMvc3ltYm9sIiksYj1vKHkpOyFmdW5jdGlvbihlKXtmdW5jdGlvbiBuKGUsdCxyLG4pe3ZhciBvPSgwLGxbImRlZmF1bHQiXSkoKHR8fGkpLnByb3RvdHlwZSkscz1uZXcgXyhufHxbXSk7cmV0dXJuIG8uX2ludm9rZT12KGUscixzKSxvfWZ1bmN0aW9uIG8oZSx0LHIpe3RyeXtyZXR1cm57dHlwZToibm9ybWFsIixhcmc6ZS5jYWxsKHQscil9fWNhdGNoKG4pe3JldHVybnt0eXBlOiJ0aHJvdyIsYXJnOm59fX1mdW5jdGlvbiBpKCl7fWZ1bmN0aW9uIGEoKXt9ZnVuY3Rpb24gYygpe31mdW5jdGlvbiBmKGUpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaChmdW5jdGlvbih0KXtlW3RdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9pbnZva2UodCxlKX19KX1mdW5jdGlvbiBoKGUpe3RoaXMuYXJnPWV9ZnVuY3Rpb24geShlKXtmdW5jdGlvbiB0KHQscil7dmFyIG49ZVt0XShyKSxvPW4udmFsdWU7cmV0dXJuIG8gaW5zdGFuY2VvZiBoP3NbImRlZmF1bHQiXS5yZXNvbHZlKG8uYXJnKS50aGVuKGksYSk6c1siZGVmYXVsdCJdLnJlc29sdmUobykudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbi52YWx1ZT1lLG59KX1mdW5jdGlvbiBuKGUscil7ZnVuY3Rpb24gbigpe3JldHVybiB0KGUscil9cmV0dXJuIG89bz9vLnRoZW4obixuKTpuZXcgc1siZGVmYXVsdCJdKGZ1bmN0aW9uKGUpe2UobigpKX0pfSJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2Ygcj8idW5kZWZpbmVkIjooMCxwWyJkZWZhdWx0Il0pKHIpKSYmci5kb21haW4mJih0PXIuZG9tYWluLmJpbmQodCkpO3ZhciBvLGk9dC5iaW5kKGUsIm5leHQiKSxhPXQuYmluZChlLCJ0aHJvdyIpO3QuYmluZChlLCJyZXR1cm4iKTt0aGlzLl9pbnZva2U9bn1mdW5jdGlvbiB2KGUsdCxyKXt2YXIgbj1SO3JldHVybiBmdW5jdGlvbihpLHMpe2lmKG49PT1NKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKG49PT1UKXtpZigidGhyb3ciPT09aSl0aHJvdyBzO3JldHVybiBqKCl9Zm9yKDs7KXt2YXIgYT1yLmRlbGVnYXRlO2lmKGEpe2lmKCJyZXR1cm4iPT09aXx8InRocm93Ij09PWkmJmEuaXRlcmF0b3JbaV09PT1FKXtyLmRlbGVnYXRlPW51bGw7dmFyIHU9YS5pdGVyYXRvclsicmV0dXJuIl07aWYodSl7dmFyIGM9byh1LGEuaXRlcmF0b3Iscyk7aWYoInRocm93Ij09PWMudHlwZSl7aT0idGhyb3ciLHM9Yy5hcmc7Y29udGludWV9fWlmKCJyZXR1cm4iPT09aSljb250aW51ZX12YXIgYz1vKGEuaXRlcmF0b3JbaV0sYS5pdGVyYXRvcixzKTtpZigidGhyb3ciPT09Yy50eXBlKXtyLmRlbGVnYXRlPW51bGwsaT0idGhyb3ciLHM9Yy5hcmc7Y29udGludWV9aT0ibmV4dCIscz1FO3ZhciBsPWMuYXJnO2lmKCFsLmRvbmUpcmV0dXJuIG49UyxsO3JbYS5yZXN1bHROYW1lXT1sLnZhbHVlLHIubmV4dD1hLm5leHRMb2Msci5kZWxlZ2F0ZT1udWxsfWlmKCJuZXh0Ij09PWkpci5fc2VudD1zLG49PT1TP3Iuc2VudD1zOnIuc2VudD1FO2Vsc2UgaWYoInRocm93Ij09PWkpe2lmKG49PT1SKXRocm93IG49VCxzO3IuZGlzcGF0Y2hFeGNlcHRpb24ocykmJihpPSJuZXh0IixzPUUpfWVsc2UicmV0dXJuIj09PWkmJnIuYWJydXB0KCJyZXR1cm4iLHMpO249TTt2YXIgYz1vKGUsdCxyKTtpZigibm9ybWFsIj09PWMudHlwZSl7bj1yLmRvbmU/VDpTO3ZhciBsPXt2YWx1ZTpjLmFyZyxkb25lOnIuZG9uZX07aWYoYy5hcmchPT14KXJldHVybiBsO3IuZGVsZWdhdGUmJiJuZXh0Ij09PWkmJihzPUUpfWVsc2UidGhyb3ciPT09Yy50eXBlJiYobj1ULGk9InRocm93IixzPWMuYXJnKX19fWZ1bmN0aW9uIG0oZSl7dmFyIHQ9e3RyeUxvYzplWzBdfTsxIGluIGUmJih0LmNhdGNoTG9jPWVbMV0pLDIgaW4gZSYmKHQuZmluYWxseUxvYz1lWzJdLHQuYWZ0ZXJMb2M9ZVszXSksdGhpcy50cnlFbnRyaWVzLnB1c2godCl9ZnVuY3Rpb24gZyhlKXt2YXIgdD1lLmNvbXBsZXRpb258fHt9O3QudHlwZT0ibm9ybWFsIixkZWxldGUgdC5hcmcsZS5jb21wbGV0aW9uPXR9ZnVuY3Rpb24gXyhlKXt0aGlzLnRyeUVudHJpZXM9W3t0cnlMb2M6InJvb3QifV0sZS5mb3JFYWNoKG0sdGhpcyksdGhpcy5yZXNldCghMCl9ZnVuY3Rpb24gTyhlKXtpZihlKXt2YXIgdD1lW2tdO2lmKHQpcmV0dXJuIHQuY2FsbChlKTtpZigiZnVuY3Rpb24iPT10eXBlb2YgZS5uZXh0KXJldHVybiBlO2lmKCFpc05hTihlLmxlbmd0aCkpe3ZhciByPS0xLG49ZnVuY3Rpb24gbygpe2Zvcig7KytyPGUubGVuZ3RoOylpZih3LmNhbGwoZSxyKSlyZXR1cm4gby52YWx1ZT1lW3JdLG8uZG9uZT0hMSxvO3JldHVybiBvLnZhbHVlPUUsby5kb25lPSEwLG99O3JldHVybiBuLm5leHQ9bn19cmV0dXJue25leHQ6an19ZnVuY3Rpb24gaigpe3JldHVybnt2YWx1ZTpFLGRvbmU6ITB9fXZhciBFLHc9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxrPSJmdW5jdGlvbiI9PXR5cGVvZiBiWyJkZWZhdWx0Il0mJmRbImRlZmF1bHQiXXx8IkBAaXRlcmF0b3IiLCQ9Im9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOigwLHBbImRlZmF1bHQiXSkodCkpLFA9ZS5yZWdlbmVyYXRvclJ1bnRpbWU7aWYoUClyZXR1cm4gdm9pZCgkJiYodC5leHBvcnRzPVApKTtQPWUucmVnZW5lcmF0b3JSdW50aW1lPSQ/dC5leHBvcnRzOnt9LFAud3JhcD1uO3ZhciBSPSJzdXNwZW5kZWRTdGFydCIsUz0ic3VzcGVuZGVkWWllbGQiLE09ImV4ZWN1dGluZyIsVD0iY29tcGxldGVkIix4PXt9LEE9Yy5wcm90b3R5cGU9aS5wcm90b3R5cGU7YS5wcm90b3R5cGU9QS5jb25zdHJ1Y3Rvcj1jLGMuY29uc3RydWN0b3I9YSxhLmRpc3BsYXlOYW1lPSJHZW5lcmF0b3JGdW5jdGlvbiIsUC5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmNvbnN0cnVjdG9yO3JldHVybiB0P3Q9PT1hfHwiR2VuZXJhdG9yRnVuY3Rpb24iPT09KHQuZGlzcGxheU5hbWV8fHQubmFtZSk6ITF9LFAubWFyaz1mdW5jdGlvbihlKXtyZXR1cm4gdVsiZGVmYXVsdCJdPygwLHVbImRlZmF1bHQiXSkoZSxjKTplLl9fcHJvdG9fXz1jLGUucHJvdG90eXBlPSgwLGxbImRlZmF1bHQiXSkoQSksZX0sUC5hd3JhcD1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IGgoZSl9LGYoeS5wcm90b3R5cGUpLFAuYXN5bmM9ZnVuY3Rpb24oZSx0LHIsbyl7dmFyIGk9bmV3IHkobihlLHQscixvKSk7cmV0dXJuIFAuaXNHZW5lcmF0b3JGdW5jdGlvbih0KT9pOmkubmV4dCgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuZG9uZT9lLnZhbHVlOmkubmV4dCgpfSl9LGYoQSksQVtrXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxBLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgR2VuZXJhdG9yXSJ9LFAua2V5cz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gZSl0LnB1c2gocik7cmV0dXJuIHQucmV2ZXJzZSgpLGZ1bmN0aW9uIG4oKXtmb3IoO3QubGVuZ3RoOyl7dmFyIHI9dC5wb3AoKTtpZihyIGluIGUpcmV0dXJuIG4udmFsdWU9cixuLmRvbmU9ITEsbn1yZXR1cm4gbi5kb25lPSEwLG59fSxQLnZhbHVlcz1PLF8ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpfLHJlc2V0OmZ1bmN0aW9uKGUpe2lmKHRoaXMucHJldj0wLHRoaXMubmV4dD0wLHRoaXMuc2VudD1FLHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy50cnlFbnRyaWVzLmZvckVhY2goZyksIWUpZm9yKHZhciB0IGluIHRoaXMpInQiPT09dC5jaGFyQXQoMCkmJncuY2FsbCh0aGlzLHQpJiYhaXNOYU4oK3Quc2xpY2UoMSkpJiYodGhpc1t0XT1FKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgZT10aGlzLnRyeUVudHJpZXNbMF0sdD1lLmNvbXBsZXRpb247aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4gdGhpcy5ydmFsfSxkaXNwYXRjaEV4Y2VwdGlvbjpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7cmV0dXJuIGkudHlwZT0idGhyb3ciLGkuYXJnPWUsci5uZXh0PXQsISFufWlmKHRoaXMuZG9uZSl0aHJvdyBlO2Zvcih2YXIgcj10aGlzLG49dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO24+PTA7LS1uKXt2YXIgbz10aGlzLnRyeUVudHJpZXNbbl0saT1vLmNvbXBsZXRpb247aWYoInJvb3QiPT09by50cnlMb2MpcmV0dXJuIHQoImVuZCIpO2lmKG8udHJ5TG9jPD10aGlzLnByZXYpe3ZhciBzPXcuY2FsbChvLCJjYXRjaExvYyIpLGE9dy5jYWxsKG8sImZpbmFsbHlMb2MiKTtpZihzJiZhKXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gdChvLmNhdGNoTG9jLCEwKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiB0KG8uZmluYWxseUxvYyl9ZWxzZSBpZihzKXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gdChvLmNhdGNoTG9jLCEwKX1lbHNle2lmKCFhKXRocm93IG5ldyBFcnJvcigidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHkiKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiB0KG8uZmluYWxseUxvYyl9fX19LGFicnVwdDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7cj49MDstLXIpe3ZhciBuPXRoaXMudHJ5RW50cmllc1tyXTtpZihuLnRyeUxvYzw9dGhpcy5wcmV2JiZ3LmNhbGwobiwiZmluYWxseUxvYyIpJiZ0aGlzLnByZXY8bi5maW5hbGx5TG9jKXt2YXIgbz1uO2JyZWFrfX1vJiYoImJyZWFrIj09PWV8fCJjb250aW51ZSI9PT1lKSYmby50cnlMb2M8PXQmJnQ8PW8uZmluYWxseUxvYyYmKG89bnVsbCk7dmFyIGk9bz9vLmNvbXBsZXRpb246e307cmV0dXJuIGkudHlwZT1lLGkuYXJnPXQsbz90aGlzLm5leHQ9by5maW5hbGx5TG9jOnRoaXMuY29tcGxldGUoaSkseH0sY29tcGxldGU6ZnVuY3Rpb24oZSx0KXtpZigidGhyb3ciPT09ZS50eXBlKXRocm93IGUuYXJnOyJicmVhayI9PT1lLnR5cGV8fCJjb250aW51ZSI9PT1lLnR5cGU/dGhpcy5uZXh0PWUuYXJnOiJyZXR1cm4iPT09ZS50eXBlPyh0aGlzLnJ2YWw9ZS5hcmcsdGhpcy5uZXh0PSJlbmQiKToibm9ybWFsIj09PWUudHlwZSYmdCYmKHRoaXMubmV4dD10KX0sZmluaXNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7dD49MDstLXQpe3ZhciByPXRoaXMudHJ5RW50cmllc1t0XTtpZihyLmZpbmFsbHlMb2M9PT1lKXJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbixyLmFmdGVyTG9jKSxnKHIpLHh9fSwiY2F0Y2giOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7dD49MDstLXQpe3ZhciByPXRoaXMudHJ5RW50cmllc1t0XTtpZihyLnRyeUxvYz09PWUpe3ZhciBuPXIuY29tcGxldGlvbjtpZigidGhyb3ciPT09bi50eXBlKXt2YXIgbz1uLmFyZztnKHIpfXJldHVybiBvfX10aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6TyhlKSxyZXN1bHROYW1lOnQsbmV4dExvYzpyfSx4fX19KCJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2Ygbj8idW5kZWZpbmVkIjooMCxwWyJkZWZhdWx0Il0pKG4pKT9uOiJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2Ygd2luZG93PyJ1bmRlZmluZWQiOigwLHBbImRlZmF1bHQiXSkod2luZG93KSk/d2luZG93OiJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2Ygc2VsZj8idW5kZWZpbmVkIjooMCxwWyJkZWZhdWx0Il0pKHNlbGYpKT9zZWxmOnZvaWQgMCl9KS5jYWxsKHRoaXMsZSgiX3Byb2Nlc3MiKSwidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0seyIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjEsIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjcsIi4uL2NvcmUtanMvcHJvbWlzZSI6OCwiLi4vY29yZS1qcy9zeW1ib2wiOjksIi4uL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yIjoxMCwiLi4vaGVscGVycy90eXBlb2YiOjE5LF9wcm9jZXNzOjk3fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jcmVhdGUoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy8kIjo2Mn1dLDIzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5zZXREZXNjKGUsdCxyKX19LHsiLi4vLi4vbW9kdWxlcy8kIjo2Mn1dLDI0OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmZyZWV6ZSIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5mcmVlemV9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjM3LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZnJlZXplIjo4N31dLDI1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmdldERlc2MoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy8kIjo2MiwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6ODh9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmdldFByb3RvdHlwZU9mfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozNywiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiOjg5fV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5rZXlzfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozNywiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiOjkwfV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5zZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzcsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIjo5MX1dLDI5OltmdW5jdGlvbihlLHQscil7ZSgiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLGUoIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLGUoIi4uL21vZHVsZXMvZXM2LnByb21pc2UiKSx0LmV4cG9ydHM9ZSgiLi4vbW9kdWxlcy8kLmNvcmUiKS5Qcm9taXNlfSx7Ii4uL21vZHVsZXMvJC5jb3JlIjozNywiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6OTIsIi4uL21vZHVsZXMvZXM2LnByb21pc2UiOjkzLCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjk0LCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjk2fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiKSxlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuU3ltYm9sfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozNywiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6OTIsIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCI6OTV9XSwzMTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uLy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQud2tzIikoIml0ZXJhdG9yIil9LHsiLi4vLi4vbW9kdWxlcy8kLndrcyI6ODQsIi4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI6OTQsIi4uLy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI6OTZ9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIGZ1bmN0aW9uISIpO3JldHVybiBlfX0se31dLDMzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKCl7fX0se31dLDM0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhbiBvYmplY3QhIik7cmV0dXJuIGV9fSx7Ii4vJC5pcy1vYmplY3QiOjU1fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIiksbz1lKCIuLyQud2tzIikoInRvU3RyaW5nVGFnIiksaT0iQXJndW1lbnRzIj09bihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyLHM7cmV0dXJuIHZvaWQgMD09PWU/IlVuZGVmaW5lZCI6bnVsbD09PWU/Ik51bGwiOiJzdHJpbmciPT10eXBlb2Yocj0odD1PYmplY3QoZSkpW29dKT9yOmk/bih0KToiT2JqZWN0Ij09KHM9bih0KSkmJiJmdW5jdGlvbiI9PXR5cGVvZiB0LmNhbGxlZT8iQXJndW1lbnRzIjpzfX0seyIuLyQuY29mIjozNiwiLi8kLndrcyI6ODR9XSwzNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbi5jYWxsKGUpLnNsaWNlKDgsLTEpfX0se31dLDM3OltmdW5jdGlvbihlLHQscil7dmFyIG49dC5leHBvcnRzPXt2ZXJzaW9uOiIxLjIuNiJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPW4pfSx7fV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYS1mdW5jdGlvbiIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixvKXtyZXR1cm4gZS5jYWxsKHQscixuLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0seyIuLyQuYS1mdW5jdGlvbiI6MzJ9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZih2b2lkIDA9PWUpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIitlKTtyZXR1cm4gZX19LHt9XSw0MDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hZSgiLi8kLmZhaWxzIikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSx7Ii4vJC5mYWlscyI6NDR9XSw0MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKSxvPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCxpPW4obykmJm4oby5jcmVhdGVFbGVtZW50KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGk/by5jcmVhdGVFbGVtZW50KGUpOnt9fX0seyIuLyQuZ2xvYmFsIjo0NywiLi8kLmlzLW9iamVjdCI6NTV9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uLmdldEtleXMoZSkscj1uLmdldFN5bWJvbHM7aWYocilmb3IodmFyIG8saT1yKGUpLHM9bi5pc0VudW0sYT0wO2kubGVuZ3RoPmE7KXMuY2FsbChlLG89aVthKytdKSYmdC5wdXNoKG8pO3JldHVybiB0fX0seyIuLyQiOjYyfV0sNDM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmN0eCIpLHM9InByb3RvdHlwZSIsYT1mdW5jdGlvbihlLHQscil7dmFyIHUsYyxsLGY9ZSZhLkYscD1lJmEuRyxoPWUmYS5TLGQ9ZSZhLlAseT1lJmEuQixiPWUmYS5XLHY9cD9vOm9bdF18fChvW3RdPXt9KSxtPXA/bjpoP25bdF06KG5bdF18fHt9KVtzXTtwJiYocj10KTtmb3IodSBpbiByKWM9IWYmJm0mJnUgaW4gbSxjJiZ1IGluIHZ8fChsPWM/bVt1XTpyW3VdLHZbdV09cCYmImZ1bmN0aW9uIiE9dHlwZW9mIG1bdV0/clt1XTp5JiZjP2kobCxuKTpiJiZtW3VdPT1sP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZT9uZXcgZSh0KTplKHQpfTtyZXR1cm4gdFtzXT1lW3NdLHR9KGwpOmQmJiJmdW5jdGlvbiI9PXR5cGVvZiBsP2koRnVuY3Rpb24uY2FsbCxsKTpsLGQmJigodltzXXx8KHZbc109e30pKVt1XT1sKSl9O2EuRj0xLGEuRz0yLGEuUz00LGEuUD04LGEuQj0xNixhLlc9MzIsdC5leHBvcnRzPWF9LHsiLi8kLmNvcmUiOjM3LCIuLyQuY3R4IjozOCwiLi8kLmdsb2JhbCI6NDd9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fX0se31dLDQ1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmN0eCIpLG89ZSgiLi8kLml0ZXItY2FsbCIpLGk9ZSgiLi8kLmlzLWFycmF5LWl0ZXIiKSxzPWUoIi4vJC5hbi1vYmplY3QiKSxhPWUoIi4vJC50by1sZW5ndGgiKSx1PWUoIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGMpe3ZhciBsLGYscCxoPXUoZSksZD1uKHIsYyx0PzI6MSkseT0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBoKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpO2lmKGkoaCkpZm9yKGw9YShlLmxlbmd0aCk7bD55O3krKyl0P2QocyhmPWVbeV0pWzBdLGZbMV0pOmQoZVt5XSk7ZWxzZSBmb3IocD1oLmNhbGwoZSk7IShmPXAubmV4dCgpKS5kb25lOylvKHAsZCxmLnZhbHVlLHQpfX0seyIuLyQuYW4tb2JqZWN0IjozNCwiLi8kLmN0eCI6MzgsIi4vJC5pcy1hcnJheS1pdGVyIjo1MywiLi8kLml0ZXItY2FsbCI6NTYsIi4vJC50by1sZW5ndGgiOjgxLCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6ODV9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pb2JqZWN0Iiksbz1lKCIuLyQiKS5nZXROYW1lcyxpPXt9LnRvU3RyaW5nLHM9Im9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10sYT1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIG8oZSl9Y2F0Y2godCl7cmV0dXJuIHMuc2xpY2UoKX19O3QuZXhwb3J0cy5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHMmJiJbb2JqZWN0IFdpbmRvd10iPT1pLmNhbGwoZSk/YShlKTpvKG4oZSkpfX0seyIuLyQiOjYyLCIuLyQudG8taW9iamVjdCI6ODB9XSw0NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0se31dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQpfX0se31dLDQ5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpO3QuZXhwb3J0cz1lKCIuLyQuZGVzY3JpcHRvcnMiKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LHsiLi8kIjo2MiwiLi8kLmRlc2NyaXB0b3JzIjo0MCwiLi8kLnByb3BlcnR5LWRlc2MiOjY3fV0sNTA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LHsiLi8kLmdsb2JhbCI6NDd9XSw1MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSx7fV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4iU3RyaW5nIj09bihlKT9lLnNwbGl0KCIiKTpPYmplY3QoZSl9fSx7Ii4vJC5jb2YiOjM2fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobi5BcnJheT09PWV8fGlbb109PT1lKX19LHsiLi8kLml0ZXJhdG9ycyI6NjEsIi4vJC53a3MiOjg0fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJBcnJheSI9PW4oZSl9fSx7Ii4vJC5jb2YiOjM2fV0sNTU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0se31dLDU2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixvKXt0cnl7cmV0dXJuIG8/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2goaSl7dmFyIHM9ZVsicmV0dXJuIl07dGhyb3cgdm9pZCAwIT09cyYmbihzLmNhbGwoZSkpLGl9fX0seyIuLyQuYW4tb2JqZWN0IjozNH1dLDU3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxpPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLHM9e307ZSgiLi8kLmhpZGUiKShzLGUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uLmNyZWF0ZShzLHtuZXh0Om8oMSxyKX0pLGkoZSx0KyIgSXRlcmF0b3IiKX19LHsiLi8kIjo2MiwiLi8kLmhpZGUiOjQ5LCIuLyQucHJvcGVydHktZGVzYyI6NjcsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NzMsIi4vJC53a3MiOjg0fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmxpYnJhcnkiKSxvPWUoIi4vJC5leHBvcnQiKSxpPWUoIi4vJC5yZWRlZmluZSIpLHM9ZSgiLi8kLmhpZGUiKSxhPWUoIi4vJC5oYXMiKSx1PWUoIi4vJC5pdGVyYXRvcnMiKSxjPWUoIi4vJC5pdGVyLWNyZWF0ZSIpLGw9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksZj1lKCIuLyQiKS5nZXRQcm90byxwPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxoPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLGQ9IkBAaXRlcmF0b3IiLHk9ImtleXMiLGI9InZhbHVlcyIsdj1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbSxnLF8sTyl7YyhyLHQsbSk7dmFyIGosRSx3PWZ1bmN0aW9uKGUpe2lmKCFoJiZlIGluIFIpcmV0dXJuIFJbZV07c3dpdGNoKGUpe2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX07Y2FzZSBiOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LGs9dCsiIEl0ZXJhdG9yIiwkPWc9PWIsUD0hMSxSPWUucHJvdG90eXBlLFM9UltwXXx8UltkXXx8ZyYmUltnXSxNPVN8fHcoZyk7aWYoUyl7dmFyIFQ9ZihNLmNhbGwobmV3IGUpKTtsKFQsaywhMCksIW4mJmEoUixkKSYmcyhULHAsdiksJCYmUy5uYW1lIT09YiYmKFA9ITAsTT1mdW5jdGlvbigpe3JldHVybiBTLmNhbGwodGhpcyl9KX1pZihuJiYhT3x8IWgmJiFQJiZSW3BdfHxzKFIscCxNKSx1W3RdPU0sdVtrXT12LGcpaWYoaj17dmFsdWVzOiQ/TTp3KGIpLGtleXM6Xz9NOncoeSksZW50cmllczokP3coImVudHJpZXMiKTpNfSxPKWZvcihFIGluIGopRSBpbiBSfHxpKFIsRSxqW0VdKTtlbHNlIG8oby5QK28uRiooaHx8UCksdCxqKTtyZXR1cm4gan19LHsiLi8kIjo2MiwiLi8kLmV4cG9ydCI6NDMsIi4vJC5oYXMiOjQ4LCIuLyQuaGlkZSI6NDksIi4vJC5pdGVyLWNyZWF0ZSI6NTcsIi4vJC5pdGVyYXRvcnMiOjYxLCIuLyQubGlicmFyeSI6NjQsIi4vJC5yZWRlZmluZSI6NjksIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NzMsIi4vJC53a3MiOjg0fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksbz0hMTt0cnl7dmFyIGk9WzddW25dKCk7aVsicmV0dXJuIl09ZnVuY3Rpb24oKXtvPSEwfSxBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2gocyl7fXQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhbylyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIGk9WzddLHM9aVtuXSgpO3MubmV4dD1mdW5jdGlvbigpe3I9ITB9LGlbbl09ZnVuY3Rpb24oKXtyZXR1cm4gc30sZShpKX1jYXRjaChhKXt9cmV0dXJuIHJ9fSx7Ii4vJC53a3MiOjg0fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSx7fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e319LHt9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU9iamVjdDt0LmV4cG9ydHM9e2NyZWF0ZTpuLmNyZWF0ZSxnZXRQcm90bzpuLmdldFByb3RvdHlwZU9mLGlzRW51bTp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxnZXREZXNjOm4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHNldERlc2M6bi5kZWZpbmVQcm9wZXJ0eSxzZXREZXNjczpuLmRlZmluZVByb3BlcnRpZXMsZ2V0S2V5czpuLmtleXMsZ2V0TmFtZXM6bi5nZXRPd25Qcm9wZXJ0eU5hbWVzLGdldFN5bWJvbHM6bi5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZWFjaDpbXS5mb3JFYWNofX0se31dLDYzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQudG8taW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcixpPW8oZSkscz1uLmdldEtleXMoaSksYT1zLmxlbmd0aCx1PTA7YT51OylpZihpW3I9c1t1KytdXT09PXQpcmV0dXJuIHJ9fSx7Ii4vJCI6NjIsIi4vJC50by1pb2JqZWN0Ijo4MH1dLDY0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSEwfSx7fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuZ2xvYmFsIiksYT1lKCIuLyQudGFzayIpLnNldCx1PXMuTXV0YXRpb25PYnNlcnZlcnx8cy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGM9cy5wcm9jZXNzLGw9cy5Qcm9taXNlLGY9InByb2Nlc3MiPT1lKCIuLyQuY29mIikoYykscD1mdW5jdGlvbigpe3ZhciBlLHQscjtmb3IoZiYmKGU9Yy5kb21haW4pJiYoYy5kb21haW49bnVsbCxlLmV4aXQoKSk7bjspdD1uLmRvbWFpbixyPW4uZm4sdCYmdC5lbnRlcigpLHIoKSx0JiZ0LmV4aXQoKSxuPW4ubmV4dDtvPXZvaWQgMCxlJiZlLmVudGVyKCl9O2lmKGYpaT1mdW5jdGlvbigpe2MubmV4dFRpY2socCl9O2Vsc2UgaWYodSl7dmFyIGg9MSxkPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgdShwKS5vYnNlcnZlKGQse2NoYXJhY3RlckRhdGE6ITB9KSxpPWZ1bmN0aW9uKCl7ZC5kYXRhPWg9LWh9fWVsc2UgaT1sJiZsLnJlc29sdmU/ZnVuY3Rpb24oKXtsLnJlc29sdmUoKS50aGVuKHApfTpmdW5jdGlvbigpe2EuY2FsbChzLHApfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDAsZG9tYWluOmYmJmMuZG9tYWlufTtvJiYoby5uZXh0PXQpLG58fChuPXQsaSgpKSxvPXR9fSx7Ii4vJC5jb2YiOjM2LCIuLyQuZ2xvYmFsIjo0NywiLi8kLnRhc2siOjc4fV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmZhaWxzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KG8uT2JqZWN0fHx7fSlbZV18fE9iamVjdFtlXSxzPXt9O3NbZV09dChyKSxuKG4uUytuLkYqaShmdW5jdGlvbigpe3IoMSl9KSwiT2JqZWN0IixzKX19LHsiLi8kLmNvcmUiOjM3LCIuLyQuZXhwb3J0Ijo0MywiLi8kLmZhaWxzIjo0NH1dLDY3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0se31dLDY4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnJlZGVmaW5lIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpbihlLHIsdFtyXSk7cmV0dXJuIGV9fSx7Ii4vJC5yZWRlZmluZSI6Njl9XSw2OTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuaGlkZSIpfSx7Ii4vJC5oaWRlIjo0OX1dLDcwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPU9iamVjdC5pc3x8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQ/MCE9PWV8fDEvZT09PTEvdDplIT1lJiZ0IT10fX0se31dLDcxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuZ2V0RGVzYyxvPWUoIi4vJC5pcy1vYmplY3QiKSxpPWUoIi4vJC5hbi1vYmplY3QiKSxzPWZ1bmN0aW9uKGUsdCl7aWYoaShlKSwhbyh0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHQscixvKXt0cnl7bz1lKCIuLyQuY3R4IikoRnVuY3Rpb24uY2FsbCxuKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxvKHQsW10pLHI9ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKGkpe3I9ITB9cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMoZSx0KSxyP2UuX19wcm90b19fPXQ6byhlLHQpLGV9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazpzfX0seyIuLyQiOjYyLCIuLyQuYW4tb2JqZWN0IjozNCwiLi8kLmN0eCI6MzgsIi4vJC5pcy1vYmplY3QiOjU1fV0sNzI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmNvcmUiKSxvPWUoIi4vJCIpLGk9ZSgiLi8kLmRlc2NyaXB0b3JzIikscz1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTtpJiZ0JiYhdFtzXSYmby5zZXREZXNjKHQscyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfX0seyIuLyQiOjYyLCIuLyQuY29yZSI6MzcsIi4vJC5kZXNjcmlwdG9ycyI6NDAsIi4vJC53a3MiOjg0fV0sNzM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5zZXREZXNjLG89ZSgiLi8kLmhhcyIpLGk9ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIW8oZT1yP2U6ZS5wcm90b3R5cGUsaSkmJm4oZSxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0seyIuLyQiOjYyLCIuLyQuaGFzIjo0OCwiLi8kLndrcyI6ODR9XSw3NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPSJfX2NvcmUtanNfc2hhcmVkX18iLGk9bltvXXx8KG5bb109e30pO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaVtlXXx8KGlbZV09e30pfX0seyIuLyQuZ2xvYmFsIjo0N31dLDc1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpLG89ZSgiLi8kLmEtZnVuY3Rpb24iKSxpPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09c3x8dm9pZCAwPT0ocj1uKHMpW2ldKT90Om8ocil9fSx7Ii4vJC5hLWZ1bmN0aW9uIjozMiwiLi8kLmFuLW9iamVjdCI6MzQsIi4vJC53a3MiOjg0fV0sNzY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IFR5cGVFcnJvcihyKyI6IHVzZSB0aGUgJ25ldycgb3BlcmF0b3IhIik7cmV0dXJuIGV9fSx7fV0sNzc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIGkscyxhPVN0cmluZyhvKHQpKSx1PW4ociksYz1hLmxlbmd0aDtyZXR1cm4gMD51fHx1Pj1jP2U/IiI6dm9pZCAwOihpPWEuY2hhckNvZGVBdCh1KSw1NTI5Nj5pfHxpPjU2MzE5fHx1KzE9PT1jfHwocz1hLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fHM+NTczNDM/ZT9hLmNoYXJBdCh1KTppOmU/YS5zbGljZSh1LHUrMik6KGktNTUyOTY8PDEwKSsocy01NjMyMCkrNjU1MzYpfX19LHsiLi8kLmRlZmluZWQiOjM5LCIuLyQudG8taW50ZWdlciI6Nzl9XSw3ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5jdHgiKSxhPWUoIi4vJC5pbnZva2UiKSx1PWUoIi4vJC5odG1sIiksYz1lKCIuLyQuZG9tLWNyZWF0ZSIpLGw9ZSgiLi8kLmdsb2JhbCIpLGY9bC5wcm9jZXNzLHA9bC5zZXRJbW1lZGlhdGUsaD1sLmNsZWFySW1tZWRpYXRlLGQ9bC5NZXNzYWdlQ2hhbm5lbCx5PTAsYj17fSx2PSJvbnJlYWR5c3RhdGVjaGFuZ2UiLG09ZnVuY3Rpb24oKXt2YXIgZT0rdGhpcztpZihiLmhhc093blByb3BlcnR5KGUpKXt2YXIgdD1iW2VdO2RlbGV0ZSBiW2VdLHQoKX19LGc9ZnVuY3Rpb24oZSl7bS5jYWxsKGUuZGF0YSl9O3AmJmh8fChwPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7YXJndW1lbnRzLmxlbmd0aD5yOyl0LnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiBiWysreV09ZnVuY3Rpb24oKXthKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4oeSkseX0saD1mdW5jdGlvbihlKXtkZWxldGUgYltlXX0sInByb2Nlc3MiPT1lKCIuLyQuY29mIikoZik/bj1mdW5jdGlvbihlKXtmLm5leHRUaWNrKHMobSxlLDEpKX06ZD8obz1uZXcgZCxpPW8ucG9ydDIsby5wb3J0MS5vbm1lc3NhZ2U9ZyxuPXMoaS5wb3N0TWVzc2FnZSxpLDEpKTpsLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWwuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtsLnBvc3RNZXNzYWdlKGUrIiIsIioiKX0sbC5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixnLCExKSk6bj12IGluIGMoInNjcmlwdCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYygic2NyaXB0IikpW3ZdPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxtLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KHMobSxlLDEpLDApfSksdC5leHBvcnRzPXtzZXQ6cCxjbGVhcjpofX0seyIuLyQuY29mIjozNiwiLi8kLmN0eCI6MzgsIi4vJC5kb20tY3JlYXRlIjo0MSwiLi8kLmdsb2JhbCI6NDcsIi4vJC5odG1sIjo1MCwiLi8kLmludm9rZSI6NTF9XSw3OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguY2VpbCxvPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bzpuKShlKX19LHt9XSw4MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pb2JqZWN0Iiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihvKGUpKX19LHsiLi8kLmRlZmluZWQiOjM5LCIuLyQuaW9iamVjdCI6NTJ9XSw4MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9vKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LHsiLi8kLnRvLWludGVnZXIiOjc5fV0sODI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0seyIuLyQuZGVmaW5lZCI6Mzl9XSw4MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAsbz1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWU/IiI6ZSwiKV8iLCgrK24rbykudG9TdHJpbmcoMzYpKX19LHt9XSw4NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5zaGFyZWQiKSgid2tzIiksbz1lKCIuLyQudWlkIiksaT1lKCIuLyQuZ2xvYmFsIikuU3ltYm9sO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09aSYmaVtlXXx8KGl8fG8pKCJTeW1ib2wuIitlKSl9fSx7Ii4vJC5nbG9iYWwiOjQ3LCIuLyQuc2hhcmVkIjo3NCwiLi8kLnVpZCI6ODN9XSw4NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jbGFzc29mIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1lKCIuLyQuaXRlcmF0b3JzIik7dC5leHBvcnRzPWUoIi4vJC5jb3JlIikuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZT9lW29dfHxlWyJAQGl0ZXJhdG9yIl18fGlbbihlKV06dm9pZCAwfX0seyIuLyQuY2xhc3NvZiI6MzUsIi4vJC5jb3JlIjozNywiLi8kLml0ZXJhdG9ycyI6NjEsIi4vJC53a3MiOjg0fV0sODY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmFkZC10by11bnNjb3BhYmxlcyIpLG89ZSgiLi8kLml0ZXItc3RlcCIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpLHM9ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZSgiLi8kLml0ZXItZGVmaW5lIikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9cyhlKSx0aGlzLl9pPTAsdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6ImtleXMiPT10P28oMCxyKToidmFsdWVzIj09dD9vKDAsZVtyXSk6bygwLFtyLGVbcl1dKX0sInZhbHVlcyIpLGkuQXJndW1lbnRzPWkuQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0seyIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIjozMywiLi8kLml0ZXItZGVmaW5lIjo1OCwiLi8kLml0ZXItc3RlcCI6NjAsIi4vJC5pdGVyYXRvcnMiOjYxLCIuLyQudG8taW9iamVjdCI6ODB9XSw4NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJmcmVlemUiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSYmbih0KT9lKHQpOnR9fSl9LHsiLi8kLmlzLW9iamVjdCI6NTUsIi4vJC5vYmplY3Qtc2FwIjo2Nn1dLDg4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3JldHVybiBlKG4odCkscil9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjY2LCIuLyQudG8taW9iamVjdCI6ODB9XSw4OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRQcm90b3R5cGVPZiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo2NiwiLi8kLnRvLW9iamVjdCI6ODJ9XSw5MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjY2LCIuLyQudG8tb2JqZWN0Ijo4Mn1dLDkxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpO24obi5TLCJPYmplY3QiLHtzZXRQcm90b3R5cGVPZjplKCIuLyQuc2V0LXByb3RvIikuc2V0fSl9LHsiLi8kLmV4cG9ydCI6NDMsIi4vJC5zZXQtcHJvdG8iOjcxfV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXt9LHt9XSw5MzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixvPWUoIi4vJCIpLGk9ZSgiLi8kLmxpYnJhcnkiKSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC5jdHgiKSx1PWUoIi4vJC5jbGFzc29mIiksYz1lKCIuLyQuZXhwb3J0IiksbD1lKCIuLyQuaXMtb2JqZWN0IiksZj1lKCIuLyQuYW4tb2JqZWN0IikscD1lKCIuLyQuYS1mdW5jdGlvbiIpLGg9ZSgiLi8kLnN0cmljdC1uZXciKSxkPWUoIi4vJC5mb3Itb2YiKSx5PWUoIi4vJC5zZXQtcHJvdG8iKS5zZXQsYj1lKCIuLyQuc2FtZS12YWx1ZSIpLHY9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIiksbT1lKCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciIpLGc9ZSgiLi8kLm1pY3JvdGFzayIpLF89IlByb21pc2UiLE89cy5wcm9jZXNzLGo9InByb2Nlc3MiPT11KE8pLEU9c1tfXSx3PWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBFKGZ1bmN0aW9uKCl7fSk7cmV0dXJuIGUmJih0LmNvbnN0cnVjdG9yPU9iamVjdCksRS5yZXNvbHZlKHQpPT09dH0saz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9bmV3IEUoZSk7cmV0dXJuIHkocix0LnByb3RvdHlwZSkscn12YXIgcj0hMTt0cnl7aWYocj1FJiZFLnJlc29sdmUmJncoKSx5KHQsRSksdC5wcm90b3R5cGU9by5jcmVhdGUoRS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0fX0pLHQucmVzb2x2ZSg1KS50aGVuKGZ1bmN0aW9uKCl7fSlpbnN0YW5jZW9mIHR8fChyPSExKSxyJiZlKCIuLyQuZGVzY3JpcHRvcnMiKSl7dmFyIG49ITE7RS5yZXNvbHZlKG8uc2V0RGVzYyh7fSwidGhlbiIse2dldDpmdW5jdGlvbigpe249ITB9fSkpLHI9bn19Y2F0Y2goaSl7cj0hMX1yZXR1cm4gcn0oKSwkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkmJmU9PT1FJiZ0PT09bj8hMDpiKGUsdCl9LFA9ZnVuY3Rpb24oZSl7dmFyIHQ9ZihlKVt2XTtyZXR1cm4gdm9pZCAwIT10P3Q6ZX0sUj1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbChlKSYmImZ1bmN0aW9uIj09dHlwZW9mKHQ9ZS50aGVuKT90OiExfSxTPWZ1bmN0aW9uKGUpe3ZhciB0LHI7dGhpcy5wcm9taXNlPW5ldyBlKGZ1bmN0aW9uKGUsbil7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09cil0aHJvdyBUeXBlRXJyb3IoIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yIik7dD1lLHI9bn0pLHRoaXMucmVzb2x2ZT1wKHQpLHRoaXMucmVqZWN0PXAocil9LE09ZnVuY3Rpb24oZSl7dHJ5e2UoKX1jYXRjaCh0KXtyZXR1cm57ZXJyb3I6dH19fSxUPWZ1bmN0aW9uKGUsdCl7aWYoIWUubil7ZS5uPSEwO3ZhciByPWUuYztnKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUudixvPTE9PWUucyxpPTAsYT1mdW5jdGlvbih0KXt2YXIgcixpLHM9bz90Lm9rOnQuZmFpbCxhPXQucmVzb2x2ZSx1PXQucmVqZWN0O3RyeXtzPyhvfHwoZS5oPSEwKSxyPXM9PT0hMD9uOnMobikscj09PXQucHJvbWlzZT91KFR5cGVFcnJvcigiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKTooaT1SKHIpKT9pLmNhbGwocixhLHUpOmEocikpOnUobil9Y2F0Y2goYyl7dShjKX19O3IubGVuZ3RoPmk7KWEocltpKytdKTtyLmxlbmd0aD0wLGUubj0hMSx0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQscixvPWUucDt4KG8pJiYoaj9PLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsbixvKToodD1zLm9udW5oYW5kbGVkcmVqZWN0aW9uKT90KHtwcm9taXNlOm8scmVhc29uOm59KToocj1zLmNvbnNvbGUpJiZyLmVycm9yJiZyLmVycm9yKCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24iLG4pKSxlLmE9dm9pZCAwfSwxKX0pfX0seD1mdW5jdGlvbihlKXt2YXIgdCxyPWUuX2Qsbj1yLmF8fHIuYyxvPTA7aWYoci5oKXJldHVybiExO2Zvcig7bi5sZW5ndGg+bzspaWYodD1uW28rK10sdC5mYWlsfHwheCh0LnByb21pc2UpKXJldHVybiExO3JldHVybiEwfSxBPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5kfHwodC5kPSEwLHQ9dC5yfHx0LHQudj1lLHQucz0yLHQuYT10LmMuc2xpY2UoKSxUKHQsITApKX0sTj1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7aWYoIXIuZCl7ci5kPSEwLHI9ci5yfHxyO3RyeXtpZihyLnA9PT1lKXRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsodD1SKGUpKT9nKGZ1bmN0aW9uKCl7dmFyIG49e3I6cixkOiExfTt0cnl7dC5jYWxsKGUsYShOLG4sMSksYShBLG4sMSkpfWNhdGNoKG8pe0EuY2FsbChuLG8pfX0pOihyLnY9ZSxyLnM9MSxUKHIsITEpKX1jYXRjaChuKXtBLmNhbGwoe3I6cixkOiExfSxuKX19fTtrfHwoRT1mdW5jdGlvbihlKXtwKGUpO3ZhciB0PXRoaXMuX2Q9e3A6aCh0aGlzLEUsXyksYzpbXSxhOnZvaWQgMCxzOjAsZDohMSx2OnZvaWQgMCxoOiExLG46ITF9O3RyeXtlKGEoTix0LDEpLGEoQSx0LDEpKX1jYXRjaChyKXtBLmNhbGwodCxyKX19LGUoIi4vJC5yZWRlZmluZS1hbGwiKShFLnByb3RvdHlwZSx7dGhlbjpmdW5jdGlvbihlLHQpe3ZhciByPW5ldyBTKG0odGhpcyxFKSksbj1yLnByb21pc2Usbz10aGlzLl9kO3JldHVybiByLm9rPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6ITAsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LG8uYy5wdXNoKHIpLG8uYSYmby5hLnB1c2gociksby5zJiZUKG8sITEpLG59LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSkpLGMoYy5HK2MuVytjLkYqIWsse1Byb21pc2U6RX0pLGUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpKEUsXyksZSgiLi8kLnNldC1zcGVjaWVzIikoXyksbj1lKCIuLyQuY29yZSIpW19dLGMoYy5TK2MuRiohayxfLHtyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFModGhpcykscj10LnJlamVjdDtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksYyhjLlMrYy5GKigha3x8dyghMCkpLF8se3Jlc29sdmU6ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIEUmJiQoZS5jb25zdHJ1Y3Rvcix0aGlzKSlyZXR1cm4gZTt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVzb2x2ZTtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksYyhjLlMrYy5GKiEoayYmZSgiLi8kLml0ZXItZGV0ZWN0IikoZnVuY3Rpb24oZSl7RS5hbGwoZSlbImNhdGNoIl0oZnVuY3Rpb24oKXt9KX0pKSxfLHthbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9UCh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qscz1bXSxhPU0oZnVuY3Rpb24oKXtkKGUsITEscy5wdXNoLHMpO3ZhciByPXMubGVuZ3RoLGE9QXJyYXkocik7cj9vLmVhY2guY2FsbChzLGZ1bmN0aW9uKGUsbyl7dmFyIHM9ITE7dC5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7c3x8KHM9ITAsYVtvXT1lLC0tcnx8bihhKSl9LGkpfSk6bihhKX0pO3JldHVybiBhJiZpKGEuZXJyb3IpLHIucHJvbWlzZX0scmFjZTpmdW5jdGlvbihlKXt2YXIgdD1QKHRoaXMpLHI9bmV3IFModCksbj1yLnJlamVjdCxvPU0oZnVuY3Rpb24oKXtkKGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gbyYmbihvLmVycm9yKSxyLnByb21pc2V9fSl9LHsiLi8kIjo2MiwiLi8kLmEtZnVuY3Rpb24iOjMyLAoiLi8kLmFuLW9iamVjdCI6MzQsIi4vJC5jbGFzc29mIjozNSwiLi8kLmNvcmUiOjM3LCIuLyQuY3R4IjozOCwiLi8kLmRlc2NyaXB0b3JzIjo0MCwiLi8kLmV4cG9ydCI6NDMsIi4vJC5mb3Itb2YiOjQ1LCIuLyQuZ2xvYmFsIjo0NywiLi8kLmlzLW9iamVjdCI6NTUsIi4vJC5pdGVyLWRldGVjdCI6NTksIi4vJC5saWJyYXJ5Ijo2NCwiLi8kLm1pY3JvdGFzayI6NjUsIi4vJC5yZWRlZmluZS1hbGwiOjY4LCIuLyQuc2FtZS12YWx1ZSI6NzAsIi4vJC5zZXQtcHJvdG8iOjcxLCIuLyQuc2V0LXNwZWNpZXMiOjcyLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjczLCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciI6NzUsIi4vJC5zdHJpY3QtbmV3Ijo3NiwiLi8kLndrcyI6ODR9XSw5NDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuc3RyaW5nLWF0IikoITApO2UoIi4vJC5pdGVyLWRlZmluZSIpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihlKXt0aGlzLl90PVN0cmluZyhlKSx0aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLl90LHI9dGhpcy5faTtyZXR1cm4gcj49dC5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfTooZT1uKHQsciksdGhpcy5faSs9ZS5sZW5ndGgse3ZhbHVlOmUsZG9uZTohMX0pfSl9LHsiLi8kLml0ZXItZGVmaW5lIjo1OCwiLi8kLnN0cmluZy1hdCI6Nzd9XSw5NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5nbG9iYWwiKSxpPWUoIi4vJC5oYXMiKSxzPWUoIi4vJC5kZXNjcmlwdG9ycyIpLGE9ZSgiLi8kLmV4cG9ydCIpLHU9ZSgiLi8kLnJlZGVmaW5lIiksYz1lKCIuLyQuZmFpbHMiKSxsPWUoIi4vJC5zaGFyZWQiKSxmPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLHA9ZSgiLi8kLnVpZCIpLGg9ZSgiLi8kLndrcyIpLGQ9ZSgiLi8kLmtleW9mIikseT1lKCIuLyQuZ2V0LW5hbWVzIiksYj1lKCIuLyQuZW51bS1rZXlzIiksdj1lKCIuLyQuaXMtYXJyYXkiKSxtPWUoIi4vJC5hbi1vYmplY3QiKSxnPWUoIi4vJC50by1pb2JqZWN0IiksXz1lKCIuLyQucHJvcGVydHktZGVzYyIpLE89bi5nZXREZXNjLGo9bi5zZXREZXNjLEU9bi5jcmVhdGUsdz15LmdldCxrPW8uU3ltYm9sLCQ9by5KU09OLFA9JCYmJC5zdHJpbmdpZnksUj0hMSxTPWgoIl9oaWRkZW4iKSxNPW4uaXNFbnVtLFQ9bCgic3ltYm9sLXJlZ2lzdHJ5IikseD1sKCJzeW1ib2xzIiksQT0iZnVuY3Rpb24iPT10eXBlb2YgayxOPU9iamVjdC5wcm90b3R5cGUsQz1zJiZjKGZ1bmN0aW9uKCl7cmV0dXJuIDchPUUoaih7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiBqKHRoaXMsImEiLHt2YWx1ZTo3fSkuYX19KSkuYX0pP2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PKE4sdCk7biYmZGVsZXRlIE5bdF0saihlLHQsciksbiYmZSE9PU4mJmooTix0LG4pfTpqLEk9ZnVuY3Rpb24oZSl7dmFyIHQ9eFtlXT1FKGsucHJvdG90eXBlKTtyZXR1cm4gdC5faz1lLHMmJlImJkMoTixlLHtjb25maWd1cmFibGU6ITAsc2V0OmZ1bmN0aW9uKHQpe2kodGhpcyxTKSYmaSh0aGlzW1NdLGUpJiYodGhpc1tTXVtlXT0hMSksQyh0aGlzLGUsXygxLHQpKX19KSx0fSxEPWZ1bmN0aW9uKGUpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgZX0sVT1mdW5jdGlvbihlLHQscil7cmV0dXJuIHImJmkoeCx0KT8oci5lbnVtZXJhYmxlPyhpKGUsUykmJmVbU11bdF0mJihlW1NdW3RdPSExKSxyPUUocix7ZW51bWVyYWJsZTpfKDAsITEpfSkpOihpKGUsUyl8fGooZSxTLF8oMSx7fSkpLGVbU11bdF09ITApLEMoZSx0LHIpKTpqKGUsdCxyKX0sTD1mdW5jdGlvbihlLHQpe20oZSk7Zm9yKHZhciByLG49Yih0PWcodCkpLG89MCxpPW4ubGVuZ3RoO2k+bzspVShlLHI9bltvKytdLHRbcl0pO3JldHVybiBlfSxGPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQ/RShlKTpMKEUoZSksdCl9LEI9ZnVuY3Rpb24oZSl7dmFyIHQ9TS5jYWxsKHRoaXMsZSk7cmV0dXJuIHR8fCFpKHRoaXMsZSl8fCFpKHgsZSl8fGkodGhpcyxTKSYmdGhpc1tTXVtlXT90OiEwfSxIPWZ1bmN0aW9uKGUsdCl7dmFyIHI9TyhlPWcoZSksdCk7cmV0dXJuIXJ8fCFpKHgsdCl8fGkoZSxTKSYmZVtTXVt0XXx8KHIuZW51bWVyYWJsZT0hMCkscn0scT1mdW5jdGlvbihlKXtmb3IodmFyIHQscj13KGcoZSkpLG49W10sbz0wO3IubGVuZ3RoPm87KWkoeCx0PXJbbysrXSl8fHQ9PVN8fG4ucHVzaCh0KTtyZXR1cm4gbn0sWT1mdW5jdGlvbihlKXtmb3IodmFyIHQscj13KGcoZSkpLG49W10sbz0wO3IubGVuZ3RoPm87KWkoeCx0PXJbbysrXSkmJm4ucHVzaCh4W3RdKTtyZXR1cm4gbn0sRz1mdW5jdGlvbihlKXtpZih2b2lkIDAhPT1lJiYhRChlKSl7Zm9yKHZhciB0LHIsbj1bZV0sbz0xLGk9YXJndW1lbnRzO2kubGVuZ3RoPm87KW4ucHVzaChpW28rK10pO3JldHVybiB0PW5bMV0sImZ1bmN0aW9uIj09dHlwZW9mIHQmJihyPXQpLChyfHwhdih0KSkmJih0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHImJih0PXIuY2FsbCh0aGlzLGUsdCkpLEQodCk/dm9pZCAwOnR9KSxuWzFdPXQsUC5hcHBseSgkLG4pfX0sSz1jKGZ1bmN0aW9uKCl7dmFyIGU9aygpO3JldHVybiJbbnVsbF0iIT1QKFtlXSl8fCJ7fSIhPVAoe2E6ZX0pfHwie30iIT1QKE9iamVjdChlKSl9KTtBfHwoaz1mdW5jdGlvbigpe2lmKEQodGhpcykpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IiKTtyZXR1cm4gSShwKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSl9LHUoay5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksRD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGt9LG4uY3JlYXRlPUYsbi5pc0VudW09QixuLmdldERlc2M9SCxuLnNldERlc2M9VSxuLnNldERlc2NzPUwsbi5nZXROYW1lcz15LmdldD1xLG4uZ2V0U3ltYm9scz1ZLHMmJiFlKCIuLyQubGlicmFyeSIpJiZ1KE4sInByb3BlcnR5SXNFbnVtZXJhYmxlIixCLCEwKSk7dmFyIFY9eyJmb3IiOmZ1bmN0aW9uKGUpe3JldHVybiBpKFQsZSs9IiIpP1RbZV06VFtlXT1rKGUpfSxrZXlGb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGQoVCxlKX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7Uj0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7Uj0hMX19O24uZWFjaC5jYWxsKCJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSxmdW5jdGlvbihlKXt2YXIgdD1oKGUpO1ZbZV09QT90OkkodCl9KSxSPSEwLGEoYS5HK2EuVyx7U3ltYm9sOmt9KSxhKGEuUywiU3ltYm9sIixWKSxhKGEuUythLkYqIUEsIk9iamVjdCIse2NyZWF0ZTpGLGRlZmluZVByb3BlcnR5OlUsZGVmaW5lUHJvcGVydGllczpMLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjpILGdldE93blByb3BlcnR5TmFtZXM6cSxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6WX0pLCQmJmEoYS5TK2EuRiooIUF8fEspLCJKU09OIix7c3RyaW5naWZ5Okd9KSxmKGssIlN5bWJvbCIpLGYoTWF0aCwiTWF0aCIsITApLGYoby5KU09OLCJKU09OIiwhMCl9LHsiLi8kIjo2MiwiLi8kLmFuLW9iamVjdCI6MzQsIi4vJC5kZXNjcmlwdG9ycyI6NDAsIi4vJC5lbnVtLWtleXMiOjQyLCIuLyQuZXhwb3J0Ijo0MywiLi8kLmZhaWxzIjo0NCwiLi8kLmdldC1uYW1lcyI6NDYsIi4vJC5nbG9iYWwiOjQ3LCIuLyQuaGFzIjo0OCwiLi8kLmlzLWFycmF5Ijo1NCwiLi8kLmtleW9mIjo2MywiLi8kLmxpYnJhcnkiOjY0LCIuLyQucHJvcGVydHktZGVzYyI6NjcsIi4vJC5yZWRlZmluZSI6NjksIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NzMsIi4vJC5zaGFyZWQiOjc0LCIuLyQudG8taW9iamVjdCI6ODAsIi4vJC51aWQiOjgzLCIuLyQud2tzIjo4NH1dLDk2OltmdW5jdGlvbihlLHQscil7ZSgiLi9lczYuYXJyYXkuaXRlcmF0b3IiKTt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIik7bi5Ob2RlTGlzdD1uLkhUTUxDb2xsZWN0aW9uPW4uQXJyYXl9LHsiLi8kLml0ZXJhdG9ycyI6NjEsIi4vZXM2LmFycmF5Lml0ZXJhdG9yIjo4Nn1dLDk3OltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbigpe2w9ITEsYS5sZW5ndGg/Yz1hLmNvbmNhdChjKTpmPS0xLGMubGVuZ3RoJiZvKCl9ZnVuY3Rpb24gbygpe2lmKCFsKXt2YXIgZT1zZXRUaW1lb3V0KG4pO2w9ITA7Zm9yKHZhciB0PWMubGVuZ3RoO3Q7KXtmb3IoYT1jLGM9W107KytmPHQ7KWEmJmFbZl0ucnVuKCk7Zj0tMSx0PWMubGVuZ3RofWE9bnVsbCxsPSExLGNsZWFyVGltZW91dChlKX19ZnVuY3Rpb24gaShlLHQpe3RoaXMuZnVuPWUsdGhpcy5hcnJheT10fWZ1bmN0aW9uIHMoKXt9dmFyIGEsdT10LmV4cG9ydHM9e30sYz1bXSxsPSExLGY9LTE7dS5uZXh0VGljaz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdO2MucHVzaChuZXcgaShlLHQpKSwxIT09Yy5sZW5ndGh8fGx8fHNldFRpbWVvdXQobywwKX0saS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0sdS50aXRsZT0iYnJvd3NlciIsdS5icm93c2VyPSEwLHUuZW52PXt9LHUuYXJndj1bXSx1LnZlcnNpb249IiIsdS52ZXJzaW9ucz17fSx1Lm9uPXMsdS5hZGRMaXN0ZW5lcj1zLHUub25jZT1zLHUub2ZmPXMsdS5yZW1vdmVMaXN0ZW5lcj1zLHUucmVtb3ZlQWxsTGlzdGVuZXJzPXMsdS5lbWl0PXMsdS5iaW5kaW5nPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQiKX0sdS5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm4iLyJ9LHUuY2hkaXI9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKX0sdS51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0se31dLDk4OltmdW5jdGlvbih0LHIsbil7IWZ1bmN0aW9uKHQsbil7ImZ1bmN0aW9uIj09dHlwZW9mIGUmJmUuYW1kP2UoW10sbik6InVuZGVmaW5lZCIhPXR5cGVvZiByJiZyLmV4cG9ydHM/ci5leHBvcnRzPW4oKTp0LnR2ND1uKCl9KHRoaXMsZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybiBlbmNvZGVVUkkoZSkucmVwbGFjZSgvJTI1WzAtOV1bMC05XS9nLGZ1bmN0aW9uKGUpe3JldHVybiIlIitlLnN1YnN0cmluZygzKX0pfWZ1bmN0aW9uIHQodCl7dmFyIHI9IiI7cFt0LmNoYXJBdCgwKV0mJihyPXQuY2hhckF0KDApLHQ9dC5zdWJzdHJpbmcoMSkpO3ZhciBuPSIiLG89IiIsaT0hMCxzPSExLGE9ITE7IisiPT09cj9pPSExOiIuIj09PXI/KG89Ii4iLG49Ii4iKToiLyI9PT1yPyhvPSIvIixuPSIvIik6IiMiPT09cj8obz0iIyIsaT0hMSk6IjsiPT09cj8obz0iOyIsbj0iOyIscz0hMCxhPSEwKToiPyI9PT1yPyhvPSI/IixuPSImIixzPSEwKToiJiI9PT1yJiYobz0iJiIsbj0iJiIscz0hMCk7Zm9yKHZhciB1PVtdLGM9dC5zcGxpdCgiLCIpLGw9W10sZj17fSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciB5PWNbZF0sYj1udWxsO2lmKC0xIT09eS5pbmRleE9mKCI6Iikpe3ZhciB2PXkuc3BsaXQoIjoiKTt5PXZbMF0sYj1wYXJzZUludCh2WzFdLDEwKX1mb3IodmFyIG09e307aFt5LmNoYXJBdCh5Lmxlbmd0aC0xKV07KW1beS5jaGFyQXQoeS5sZW5ndGgtMSldPSEwLHk9eS5zdWJzdHJpbmcoMCx5Lmxlbmd0aC0xKTt2YXIgZz17dHJ1bmNhdGU6YixuYW1lOnksc3VmZmljZXM6bX07bC5wdXNoKGcpLGZbeV09Zyx1LnB1c2goeSl9dmFyIF89ZnVuY3Rpb24odCl7Zm9yKHZhciByPSIiLHU9MCxjPTA7YzxsLmxlbmd0aDtjKyspe3ZhciBmPWxbY10scD10KGYubmFtZSk7aWYobnVsbD09PXB8fHZvaWQgMD09PXB8fEFycmF5LmlzQXJyYXkocCkmJjA9PT1wLmxlbmd0aHx8Im9iamVjdCI9PXR5cGVvZiBwJiYwPT09T2JqZWN0LmtleXMocCkubGVuZ3RoKXUrKztlbHNlIGlmKHIrPWM9PT11P286bnx8IiwiLEFycmF5LmlzQXJyYXkocCkpe3MmJihyKz1mLm5hbWUrIj0iKTtmb3IodmFyIGg9MDtoPHAubGVuZ3RoO2grKyloPjAmJihyKz1mLnN1ZmZpY2VzWyIqIl0/bnx8IiwiOiIsIixmLnN1ZmZpY2VzWyIqIl0mJnMmJihyKz1mLm5hbWUrIj0iKSkscis9aT9lbmNvZGVVUklDb21wb25lbnQocFtoXSkucmVwbGFjZSgvIS9nLCIlMjEiKTplKHBbaF0pfWVsc2UgaWYoIm9iamVjdCI9PXR5cGVvZiBwKXtzJiYhZi5zdWZmaWNlc1siKiJdJiYocis9Zi5uYW1lKyI9Iik7dmFyIGQ9ITA7Zm9yKHZhciB5IGluIHApZHx8KHIrPWYuc3VmZmljZXNbIioiXT9ufHwiLCI6IiwiKSxkPSExLHIrPWk/ZW5jb2RlVVJJQ29tcG9uZW50KHkpLnJlcGxhY2UoLyEvZywiJTIxIik6ZSh5KSxyKz1mLnN1ZmZpY2VzWyIqIl0/Ij0iOiIsIixyKz1pP2VuY29kZVVSSUNvbXBvbmVudChwW3ldKS5yZXBsYWNlKC8hL2csIiUyMSIpOmUocFt5XSl9ZWxzZSBzJiYocis9Zi5uYW1lLGEmJiIiPT09cHx8KHIrPSI9IikpLG51bGwhPWYudHJ1bmNhdGUmJihwPXAuc3Vic3RyaW5nKDAsZi50cnVuY2F0ZSkpLHIrPWk/ZW5jb2RlVVJJQ29tcG9uZW50KHApLnJlcGxhY2UoLyEvZywiJTIxIik6ZShwKX1yZXR1cm4gcn07cmV0dXJuIF8udmFyTmFtZXM9dSx7cHJlZml4Om8sc3Vic3RpdHV0aW9uOl99fWZ1bmN0aW9uIHIoZSl7aWYoISh0aGlzIGluc3RhbmNlb2YgcikpcmV0dXJuIG5ldyByKGUpO2Zvcih2YXIgbj1lLnNwbGl0KCJ7Iiksbz1bbi5zaGlmdCgpXSxpPVtdLHM9W10sYT1bXTtuLmxlbmd0aD4wOyl7dmFyIHU9bi5zaGlmdCgpLGM9dS5zcGxpdCgifSIpWzBdLGw9dS5zdWJzdHJpbmcoYy5sZW5ndGgrMSksZj10KGMpO3MucHVzaChmLnN1YnN0aXR1dGlvbiksaS5wdXNoKGYucHJlZml4KSxvLnB1c2gobCksYT1hLmNvbmNhdChmLnN1YnN0aXR1dGlvbi52YXJOYW1lcyl9dGhpcy5maWxsPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1vWzBdLHI9MDtyPHMubGVuZ3RoO3IrKyl7dmFyIG49c1tyXTt0Kz1uKGUpLHQrPW9bcisxXX1yZXR1cm4gdH0sdGhpcy52YXJOYW1lcz1hLHRoaXMudGVtcGxhdGU9ZX1mdW5jdGlvbiBuKGUsdCl7aWYoZT09PXQpcmV0dXJuITA7aWYoZSYmdCYmIm9iamVjdCI9PXR5cGVvZiBlJiYib2JqZWN0Ij09dHlwZW9mIHQpe2lmKEFycmF5LmlzQXJyYXkoZSkhPT1BcnJheS5pc0FycmF5KHQpKXJldHVybiExO2lmKEFycmF5LmlzQXJyYXkoZSkpe2lmKGUubGVuZ3RoIT09dC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspaWYoIW4oZVtyXSx0W3JdKSlyZXR1cm4hMX1lbHNle3ZhciBvO2ZvcihvIGluIGUpaWYodm9pZCAwPT09dFtvXSYmdm9pZCAwIT09ZVtvXSlyZXR1cm4hMTtmb3IobyBpbiB0KWlmKHZvaWQgMD09PWVbb10mJnZvaWQgMCE9PXRbb10pcmV0dXJuITE7Zm9yKG8gaW4gZSlpZighbihlW29dLHRbb10pKXJldHVybiExfXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9U3RyaW5nKGUpLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKS5tYXRjaCgvXihbXjpcLz8jXSs6KT8oXC9cLyg/OlteOkBdKig/OjpbXjpAXSopP0ApPygoW146XC8/I10qKSg/OjooXGQqKSk/KSk/KFtePyNdKikoXD9bXiNdKik/KCNbXHNcU10qKT8vKTtyZXR1cm4gdD97aHJlZjp0WzBdfHwiIixwcm90b2NvbDp0WzFdfHwiIixhdXRob3JpdHk6dFsyXXx8IiIsaG9zdDp0WzNdfHwiIixob3N0bmFtZTp0WzRdfHwiIixwb3J0OnRbNV18fCIiLHBhdGhuYW1lOnRbNl18fCIiLHNlYXJjaDp0WzddfHwiIixoYXNoOnRbOF18fCIifTpudWxsfWZ1bmN0aW9uIGkoZSx0KXtmdW5jdGlvbiByKGUpe3ZhciB0PVtdO3JldHVybiBlLnJlcGxhY2UoL14oXC5cLj8oXC98JCkpKy8sIiIpLnJlcGxhY2UoL1wvKFwuKFwvfCQpKSsvZywiLyIpLnJlcGxhY2UoL1wvXC5cLiQvLCIvLi4vIikucmVwbGFjZSgvXC8/W15cL10qL2csZnVuY3Rpb24oZSl7Ii8uLiI9PT1lP3QucG9wKCk6dC5wdXNoKGUpfSksdC5qb2luKCIiKS5yZXBsYWNlKC9eXC8vLCIvIj09PWUuY2hhckF0KDApPyIvIjoiIil9cmV0dXJuIHQ9byh0fHwiIiksZT1vKGV8fCIiKSx0JiZlPyh0LnByb3RvY29sfHxlLnByb3RvY29sKSsodC5wcm90b2NvbHx8dC5hdXRob3JpdHk/dC5hdXRob3JpdHk6ZS5hdXRob3JpdHkpK3IodC5wcm90b2NvbHx8dC5hdXRob3JpdHl8fCIvIj09PXQucGF0aG5hbWUuY2hhckF0KDApP3QucGF0aG5hbWU6dC5wYXRobmFtZT8oZS5hdXRob3JpdHkmJiFlLnBhdGhuYW1lPyIvIjoiIikrZS5wYXRobmFtZS5zbGljZSgwLGUucGF0aG5hbWUubGFzdEluZGV4T2YoIi8iKSsxKSt0LnBhdGhuYW1lOmUucGF0aG5hbWUpKyh0LnByb3RvY29sfHx0LmF1dGhvcml0eXx8dC5wYXRobmFtZT90LnNlYXJjaDp0LnNlYXJjaHx8ZS5zZWFyY2gpK3QuaGFzaDpudWxsfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGUuc3BsaXQoIiMiKVswXX1mdW5jdGlvbiBhKGUsdCl7aWYoZSYmIm9iamVjdCI9PXR5cGVvZiBlKWlmKHZvaWQgMD09PXQ/dD1lLmlkOiJzdHJpbmciPT10eXBlb2YgZS5pZCYmKHQ9aSh0LGUuaWQpLGUuaWQ9dCksQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKylhKGVbcl0sdCk7ZWxzZXsic3RyaW5nIj09dHlwZW9mIGUuJHJlZiYmKGUuJHJlZj1pKHQsZS4kcmVmKSk7Zm9yKHZhciBuIGluIGUpImVudW0iIT09biYmYShlW25dLHQpfX1mdW5jdGlvbiB1KGUpe2U9ZXx8ImVuIjt2YXIgdD1PW2VdO3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj10W2UuY29kZV18fF9bZS5jb2RlXTtpZigic3RyaW5nIiE9dHlwZW9mIHIpcmV0dXJuIlVua25vd24gZXJyb3IgY29kZSAiK2UuY29kZSsiOiAiK0pTT04uc3RyaW5naWZ5KGUubWVzc2FnZVBhcmFtcyk7dmFyIG49ZS5wYXJhbXM7cmV0dXJuIHIucmVwbGFjZSgvXHsoW157fV0qKVx9L2csZnVuY3Rpb24oZSx0KXt2YXIgcj1uW3RdO3JldHVybiJzdHJpbmciPT10eXBlb2Ygcnx8Im51bWJlciI9PXR5cGVvZiByP3I6ZX0pfX1mdW5jdGlvbiBjKGUsdCxyLG4sbyl7aWYoRXJyb3IuY2FsbCh0aGlzKSx2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcigiTm8gZXJyb3IgY29kZSBzdXBwbGllZDogIituKTt0aGlzLm1lc3NhZ2U9IiIsdGhpcy5wYXJhbXM9dCx0aGlzLmNvZGU9ZSx0aGlzLmRhdGFQYXRoPXJ8fCIiLHRoaXMuc2NoZW1hUGF0aD1ufHwiIix0aGlzLnN1YkVycm9ycz1vfHxudWxsO3ZhciBpPW5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpO2lmKHRoaXMuc3RhY2s9aS5zdGFja3x8aS5zdGFja3RyYWNlLCF0aGlzLnN0YWNrKXRyeXt0aHJvdyBpfWNhdGNoKGkpe3RoaXMuc3RhY2s9aS5zdGFja3x8aS5zdGFja3RyYWNlfX1mdW5jdGlvbiBsKGUsdCl7aWYodC5zdWJzdHJpbmcoMCxlLmxlbmd0aCk9PT1lKXt2YXIgcj10LnN1YnN0cmluZyhlLmxlbmd0aCk7aWYodC5sZW5ndGg+MCYmIi8iPT09dC5jaGFyQXQoZS5sZW5ndGgtMSl8fCIjIj09PXIuY2hhckF0KDApfHwiPyI9PT1yLmNoYXJBdCgwKSlyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBmKGUpe3ZhciB0LHIsbj1uZXcgZCxvPXtzZXRFcnJvclJlcG9ydGVyOmZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZT90aGlzLmxhbmd1YWdlKGUpOihyPWUsITApfSxhZGRGb3JtYXQ6ZnVuY3Rpb24oKXtuLmFkZEZvcm1hdC5hcHBseShuLGFyZ3VtZW50cyl9LGxhbmd1YWdlOmZ1bmN0aW9uKGUpe3JldHVybiBlPyhPW2VdfHwoZT1lLnNwbGl0KCItIilbMF0pLE9bZV0/KHQ9ZSxlKTohMSk6dH0sYWRkTGFuZ3VhZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgcjtmb3IociBpbiB2KXRbcl0mJiF0W3Zbcl1dJiYodFt2W3JdXT10W3JdKTt2YXIgbj1lLnNwbGl0KCItIilbMF07aWYoT1tuXSl7T1tlXT1PYmplY3QuY3JlYXRlKE9bbl0pO2ZvcihyIGluIHQpInVuZGVmaW5lZCI9PXR5cGVvZiBPW25dW3JdJiYoT1tuXVtyXT10W3JdKSxPW2VdW3JdPXRbcl19ZWxzZSBPW2VdPXQsT1tuXT10O3JldHVybiB0aGlzfSxmcmVzaEFwaTpmdW5jdGlvbihlKXt2YXIgdD1mKCk7cmV0dXJuIGUmJnQubGFuZ3VhZ2UoZSksdH0sdmFsaWRhdGU6ZnVuY3Rpb24oZSxvLGkscyl7dmFyIGE9dSh0KSxjPXI/ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByKGUsdCxuKXx8YShlLHQsbil9OmEsbD1uZXcgZChuLCExLGMsaSxzKTsic3RyaW5nIj09dHlwZW9mIG8mJihvPXskcmVmOm99KSxsLmFkZFNjaGVtYSgiIixvKTt2YXIgZj1sLnZhbGlkYXRlQWxsKGUsbyxudWxsLG51bGwsIiIpO3JldHVybiFmJiZzJiYoZj1sLmJhblVua25vd25Qcm9wZXJ0aWVzKGUsbykpLHRoaXMuZXJyb3I9Zix0aGlzLm1pc3Npbmc9bC5taXNzaW5nLHRoaXMudmFsaWQ9bnVsbD09PWYsdGhpcy52YWxpZH0sdmFsaWRhdGVSZXN1bHQ6ZnVuY3Rpb24oKXt2YXIgZT17fTtyZXR1cm4gdGhpcy52YWxpZGF0ZS5hcHBseShlLGFyZ3VtZW50cyksZX0sdmFsaWRhdGVNdWx0aXBsZTpmdW5jdGlvbihlLG8saSxzKXt2YXIgYT11KHQpLGM9cj9mdW5jdGlvbihlLHQsbil7cmV0dXJuIHIoZSx0LG4pfHxhKGUsdCxuKX06YSxsPW5ldyBkKG4sITAsYyxpLHMpOyJzdHJpbmciPT10eXBlb2YgbyYmKG89eyRyZWY6b30pLGwuYWRkU2NoZW1hKCIiLG8pLGwudmFsaWRhdGVBbGwoZSxvLG51bGwsbnVsbCwiIikscyYmbC5iYW5Vbmtub3duUHJvcGVydGllcyhlLG8pO3ZhciBmPXt9O3JldHVybiBmLmVycm9ycz1sLmVycm9ycyxmLm1pc3Npbmc9bC5taXNzaW5nLGYudmFsaWQ9MD09PWYuZXJyb3JzLmxlbmd0aCxmfSxhZGRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gbi5hZGRTY2hlbWEuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRTY2hlbWEuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWFNYXA6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRTY2hlbWFNYXAuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWFVcmlzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0U2NoZW1hVXJpcy5hcHBseShuLGFyZ3VtZW50cyl9LGdldE1pc3NpbmdVcmlzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0TWlzc2luZ1VyaXMuYXBwbHkobixhcmd1bWVudHMpfSxkcm9wU2NoZW1hczpmdW5jdGlvbigpe24uZHJvcFNjaGVtYXMuYXBwbHkobixhcmd1bWVudHMpfSxkZWZpbmVLZXl3b3JkOmZ1bmN0aW9uKCl7bi5kZWZpbmVLZXl3b3JkLmFwcGx5KG4sYXJndW1lbnRzKX0sZGVmaW5lRXJyb3I6ZnVuY3Rpb24oZSx0LHIpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8IS9eW0EtWl0rKF9bQS1aXSspKiQvLnRlc3QoZSkpdGhyb3cgbmV3IEVycm9yKCJDb2RlIG5hbWUgbXVzdCBiZSBhIHN0cmluZyBpbiBVUFBFUl9DQVNFX1dJVEhfVU5ERVJTQ09SRVMiKTtpZigibnVtYmVyIiE9dHlwZW9mIHR8fHQlMSE9PTB8fDFlND50KXRocm93IG5ldyBFcnJvcigiQ29kZSBudW1iZXIgbXVzdCBiZSBhbiBpbnRlZ2VyID4gMTAwMDAiKTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHZbZV0pdGhyb3cgbmV3IEVycm9yKCJFcnJvciBhbHJlYWR5IGRlZmluZWQ6ICIrZSsiIGFzICIrdltlXSk7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBtW3RdKXRocm93IG5ldyBFcnJvcigiRXJyb3IgY29kZSBhbHJlYWR5IHVzZWQ6ICIrbVt0XSsiIGFzICIrdCk7dltlXT10LG1bdF09ZSxfW2VdPV9bdF09cjtmb3IodmFyIG4gaW4gTyl7dmFyIG89T1tuXTtvW2VdJiYob1t0XT1vW3RdfHxvW2VdKX19LHJlc2V0OmZ1bmN0aW9uKCl7bi5yZXNldCgpLHRoaXMuZXJyb3I9bnVsbCx0aGlzLm1pc3Npbmc9W10sdGhpcy52YWxpZD0hMH0sbWlzc2luZzpbXSxlcnJvcjpudWxsLHZhbGlkOiEwLG5vcm1TY2hlbWE6YSxyZXNvbHZlVXJsOmksZ2V0RG9jdW1lbnRVcmk6cyxlcnJvckNvZGVzOnZ9O3JldHVybiBvLmxhbmd1YWdlKGV8fCJlbiIpLG99T2JqZWN0LmtleXN8fChPYmplY3Qua2V5cz1mdW5jdGlvbigpe3ZhciBlPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdD0he3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCJ0b1N0cmluZyIpLHI9WyJ0b1N0cmluZyIsInRvTG9jYWxlU3RyaW5nIiwidmFsdWVPZiIsImhhc093blByb3BlcnR5IiwiaXNQcm90b3R5cGVPZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiY29uc3RydWN0b3IiXSxuPXIubGVuZ3RoO3JldHVybiBmdW5jdGlvbihvKXtpZigib2JqZWN0IiE9dHlwZW9mIG8mJiJmdW5jdGlvbiIhPXR5cGVvZiBvfHxudWxsPT09byl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdCIpO3ZhciBpPVtdO2Zvcih2YXIgcyBpbiBvKWUuY2FsbChvLHMpJiZpLnB1c2gocyk7aWYodClmb3IodmFyIGE9MDtuPmE7YSsrKWUuY2FsbChvLHJbYV0pJiZpLnB1c2goclthXSk7cmV0dXJuIGl9fSgpKSxPYmplY3QuY3JlYXRlfHwoT2JqZWN0LmNyZWF0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKDEhPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiT2JqZWN0LmNyZWF0ZSBpbXBsZW1lbnRhdGlvbiBvbmx5IGFjY2VwdHMgb25lIHBhcmFtZXRlci4iKTtyZXR1cm4gZS5wcm90b3R5cGU9dCxuZXcgZX19KCkpLEFycmF5LmlzQXJyYXl8fChBcnJheS5pc0FycmF5PWZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9KSxBcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8KEFycmF5LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKGUpe2lmKG51bGw9PT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIHQ9T2JqZWN0KHRoaXMpLHI9dC5sZW5ndGg+Pj4wO2lmKDA9PT1yKXJldHVybi0xO3ZhciBuPTA7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiYobj1OdW1iZXIoYXJndW1lbnRzWzFdKSxuIT09bj9uPTA6MCE9PW4mJm4hPT0xLzAmJm4hPT0tKDEvMCkmJihuPShuPjB8fC0xKSpNYXRoLmZsb29yKE1hdGguYWJzKG4pKSkpLG4+PXIpcmV0dXJuLTE7Zm9yKHZhciBvPW4+PTA/bjpNYXRoLm1heChyLU1hdGguYWJzKG4pLDApO3I+bztvKyspaWYobyBpbiB0JiZ0W29dPT09ZSlyZXR1cm4gbztyZXR1cm4tMX0pLE9iamVjdC5pc0Zyb3plbnx8KE9iamVjdC5pc0Zyb3plbj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9InR2NF90ZXN0X2Zyb3plbl9rZXkiO2UuaGFzT3duUHJvcGVydHkodCk7KXQrPU1hdGgucmFuZG9tKCk7dHJ5e3JldHVybiBlW3RdPSEwLGRlbGV0ZSBlW3RdLCExfWNhdGNoKHIpe3JldHVybiEwfX0pO3ZhciBwPXsiKyI6ITAsIiMiOiEwLCIuIjohMCwiLyI6ITAsIjsiOiEwLCI/IjohMCwiJiI6ITB9LGg9eyIqIjohMH07ci5wcm90b3R5cGU9e3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVtcGxhdGV9LGZpbGxGcm9tT2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmZpbGwoZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19KX19O3ZhciBkPWZ1bmN0aW9uKGUsdCxyLG4sbyl7aWYodGhpcy5taXNzaW5nPVtdLHRoaXMubWlzc2luZ01hcD17fSx0aGlzLmZvcm1hdFZhbGlkYXRvcnM9ZT9PYmplY3QuY3JlYXRlKGUuZm9ybWF0VmFsaWRhdG9ycyk6e30sdGhpcy5zY2hlbWFzPWU/T2JqZWN0LmNyZWF0ZShlLnNjaGVtYXMpOnt9LHRoaXMuY29sbGVjdE11bHRpcGxlPXQsdGhpcy5lcnJvcnM9W10sdGhpcy5oYW5kbGVFcnJvcj10P3RoaXMuY29sbGVjdEVycm9yOnRoaXMucmV0dXJuRXJyb3IsbiYmKHRoaXMuY2hlY2tSZWN1cnNpdmU9ITAsdGhpcy5zY2FubmVkPVtdLHRoaXMuc2Nhbm5lZEZyb3plbj1bXSx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzPVtdLHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnM9W10sdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5PSJ0djRfdmFsaWRhdGlvbl9pZCIsdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5PSJ0djRfdmFsaWRhdGlvbl9lcnJvcnNfaWQiKSxvJiYodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzPSEwLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30pLHRoaXMuZXJyb3JSZXBvcnRlcj1yfHx1KCJlbiIpLCJzdHJpbmciPT10eXBlb2YgdGhpcy5lcnJvclJlcG9ydGVyKXRocm93IG5ldyBFcnJvcigiZGVidWciKTtpZih0aGlzLmRlZmluZWRLZXl3b3Jkcz17fSxlKWZvcih2YXIgaSBpbiBlLmRlZmluZWRLZXl3b3Jkcyl0aGlzLmRlZmluZWRLZXl3b3Jkc1tpXT1lLmRlZmluZWRLZXl3b3Jkc1tpXS5zbGljZSgwKX07ZC5wcm90b3R5cGUuZGVmaW5lS2V5d29yZD1mdW5jdGlvbihlLHQpe3RoaXMuZGVmaW5lZEtleXdvcmRzW2VdPXRoaXMuZGVmaW5lZEtleXdvcmRzW2VdfHxbXSx0aGlzLmRlZmluZWRLZXl3b3Jkc1tlXS5wdXNoKHQpfSxkLnByb3RvdHlwZS5jcmVhdGVFcnJvcj1mdW5jdGlvbihlLHQscixuLG8saSxzKXt2YXIgYT1uZXcgYyhlLHQscixuLG8pO3JldHVybiBhLm1lc3NhZ2U9dGhpcy5lcnJvclJlcG9ydGVyKGEsaSxzKSxhfSxkLnByb3RvdHlwZS5yZXR1cm5FcnJvcj1mdW5jdGlvbihlKXtyZXR1cm4gZX0sZC5wcm90b3R5cGUuY29sbGVjdEVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZ0aGlzLmVycm9ycy5wdXNoKGUpLG51bGx9LGQucHJvdG90eXBlLnByZWZpeEVycm9ycz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPWU7bjx0aGlzLmVycm9ycy5sZW5ndGg7bisrKXRoaXMuZXJyb3JzW25dPXRoaXMuZXJyb3JzW25dLnByZWZpeFdpdGgodCxyKTtyZXR1cm4gdGhpc30sZC5wcm90b3R5cGUuYmFuVW5rbm93blByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocyl7dmFyIG49dGhpcy5jcmVhdGVFcnJvcih2LlVOS05PV05fUFJPUEVSVFkse3BhdGg6cn0sciwiIixudWxsLGUsdCksbz10aGlzLmhhbmRsZUVycm9yKG4pO2lmKG8pcmV0dXJuIG99cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLmFkZEZvcm1hdD1mdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKHZhciByIGluIGUpdGhpcy5hZGRGb3JtYXQocixlW3JdKTtyZXR1cm4gdGhpc310aGlzLmZvcm1hdFZhbGlkYXRvcnNbZV09dH0sZC5wcm90b3R5cGUucmVzb2x2ZVJlZnM9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT1lLiRyZWYpe2lmKHQ9dHx8e30sdFtlLiRyZWZdKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKHYuQ0lSQ1VMQVJfUkVGRVJFTkNFLHt1cmxzOk9iamVjdC5rZXlzKHQpLmpvaW4oIiwgIil9LCIiLCIiLG51bGwsdm9pZCAwLGUpO3RbZS4kcmVmXT0hMCxlPXRoaXMuZ2V0U2NoZW1hKGUuJHJlZix0KX1yZXR1cm4gZX0sZC5wcm90b3R5cGUuZ2V0U2NoZW1hPWZ1bmN0aW9uKGUsdCl7dmFyIHI7aWYodm9pZCAwIT09dGhpcy5zY2hlbWFzW2VdKXJldHVybiByPXRoaXMuc2NoZW1hc1tlXSx0aGlzLnJlc29sdmVSZWZzKHIsdCk7dmFyIG49ZSxvPSIiO2lmKC0xIT09ZS5pbmRleE9mKCIjIikmJihvPWUuc3Vic3RyaW5nKGUuaW5kZXhPZigiIyIpKzEpLG49ZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIiMiKSkpLCJvYmplY3QiPT10eXBlb2YgdGhpcy5zY2hlbWFzW25dKXtyPXRoaXMuc2NoZW1hc1tuXTt2YXIgaT1kZWNvZGVVUklDb21wb25lbnQobyk7aWYoIiI9PT1pKXJldHVybiB0aGlzLnJlc29sdmVSZWZzKHIsdCk7aWYoIi8iIT09aS5jaGFyQXQoMCkpcmV0dXJuO2Zvcih2YXIgcz1pLnNwbGl0KCIvIikuc2xpY2UoMSksYT0wO2E8cy5sZW5ndGg7YSsrKXt2YXIgdT1zW2FdLnJlcGxhY2UoL34xL2csIi8iKS5yZXBsYWNlKC9+MC9nLCJ+Iik7aWYodm9pZCAwPT09clt1XSl7cj12b2lkIDA7YnJlYWt9cj1yW3VdfWlmKHZvaWQgMCE9PXIpcmV0dXJuIHRoaXMucmVzb2x2ZVJlZnMocix0KX12b2lkIDA9PT10aGlzLm1pc3Npbmdbbl0mJih0aGlzLm1pc3NpbmcucHVzaChuKSx0aGlzLm1pc3Npbmdbbl09bix0aGlzLm1pc3NpbmdNYXBbbl09bil9LGQucHJvdG90eXBlLnNlYXJjaFNjaGVtYXM9ZnVuY3Rpb24oZSx0KXtpZihBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXRoaXMuc2VhcmNoU2NoZW1hcyhlW3JdLHQpO2Vsc2UgaWYoZSYmIm9iamVjdCI9PXR5cGVvZiBlKXsic3RyaW5nIj09dHlwZW9mIGUuaWQmJmwodCxlLmlkKSYmdm9pZCAwPT09dGhpcy5zY2hlbWFzW2UuaWRdJiYodGhpcy5zY2hlbWFzW2UuaWRdPWUpO2Zvcih2YXIgbiBpbiBlKWlmKCJlbnVtIiE9PW4paWYoIm9iamVjdCI9PXR5cGVvZiBlW25dKXRoaXMuc2VhcmNoU2NoZW1hcyhlW25dLHQpO2Vsc2UgaWYoIiRyZWYiPT09bil7dmFyIG89cyhlW25dKTtvJiZ2b2lkIDA9PT10aGlzLnNjaGVtYXNbb10mJnZvaWQgMD09PXRoaXMubWlzc2luZ01hcFtvXSYmKHRoaXMubWlzc2luZ01hcFtvXT1vKX19fSxkLnByb3RvdHlwZS5hZGRTY2hlbWE9ZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIiE9dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHwic3RyaW5nIiE9dHlwZW9mIGUuaWQpcmV0dXJuO3Q9ZSxlPXQuaWR9ZT09PXMoZSkrIiMiJiYoZT1zKGUpKSx0aGlzLnNjaGVtYXNbZV09dCxkZWxldGUgdGhpcy5taXNzaW5nTWFwW2VdLGEodCxlKSx0aGlzLnNlYXJjaFNjaGVtYXModCxlKX0sZC5wcm90b3R5cGUuZ2V0U2NoZW1hTWFwPWZ1bmN0aW9uKCl7dmFyIGU9e307Zm9yKHZhciB0IGluIHRoaXMuc2NoZW1hcyllW3RdPXRoaXMuc2NoZW1hc1t0XTtyZXR1cm4gZX0sZC5wcm90b3R5cGUuZ2V0U2NoZW1hVXJpcz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gdGhpcy5zY2hlbWFzKSghZXx8ZS50ZXN0KHIpKSYmdC5wdXNoKHIpO3JldHVybiB0fSxkLnByb3RvdHlwZS5nZXRNaXNzaW5nVXJpcz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gdGhpcy5taXNzaW5nTWFwKSghZXx8ZS50ZXN0KHIpKSYmdC5wdXNoKHIpO3JldHVybiB0fSxkLnByb3RvdHlwZS5kcm9wU2NoZW1hcz1mdW5jdGlvbigpe3RoaXMuc2NoZW1hcz17fSx0aGlzLnJlc2V0KCl9LGQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5taXNzaW5nPVtdLHRoaXMubWlzc2luZ01hcD17fSx0aGlzLmVycm9ycz1bXX0sZC5wcm90b3R5cGUudmFsaWRhdGVBbGw9ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgaTtpZih0PXRoaXMucmVzb2x2ZVJlZnModCksIXQpcmV0dXJuIG51bGw7aWYodCBpbnN0YW5jZW9mIGMpcmV0dXJuIHRoaXMuZXJyb3JzLnB1c2godCksdDt2YXIgcyxhPXRoaXMuZXJyb3JzLmxlbmd0aCx1PW51bGwsbD1udWxsO2lmKHRoaXMuY2hlY2tSZWN1cnNpdmUmJmUmJiJvYmplY3QiPT10eXBlb2YgZSl7aWYoaT0hdGhpcy5zY2FubmVkLmxlbmd0aCxlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pe3ZhciBmPWVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XS5pbmRleE9mKHQpO2lmKC0xIT09ZilyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuY29uY2F0KGVbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XVtmXSksbnVsbH1pZihPYmplY3QuaXNGcm96ZW4oZSkmJihzPXRoaXMuc2Nhbm5lZEZyb3plbi5pbmRleE9mKGUpLC0xIT09cykpe3ZhciBwPXRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbc10uaW5kZXhPZih0KTtpZigtMSE9PXApcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLmNvbmNhdCh0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW3NdW3BdKSxudWxsfWlmKHRoaXMuc2Nhbm5lZC5wdXNoKGUpLE9iamVjdC5pc0Zyb3plbihlKSktMT09PXMmJihzPXRoaXMuc2Nhbm5lZEZyb3plbi5sZW5ndGgsdGhpcy5zY2FubmVkRnJvemVuLnB1c2goZSksdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcy5wdXNoKFtdKSksdT10aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW3NdLmxlbmd0aCx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW3NdW3VdPXQsdGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9yc1tzXVt1XT1bXTtlbHNle2lmKCFlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pdHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHRoaXMudmFsaWRhdGVkU2NoZW1hc0tleSx7dmFsdWU6W10sY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5LHt2YWx1ZTpbXSxjb25maWd1cmFibGU6ITB9KX1jYXRjaChoKXtlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV09W10sZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldPVtdfWw9ZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldLmxlbmd0aCxlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV1bbF09dCxlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV1bbF09W119fXZhciBkPXRoaXMuZXJyb3JzLmxlbmd0aCx5PXRoaXMudmFsaWRhdGVCYXNpYyhlLHQsbyl8fHRoaXMudmFsaWRhdGVOdW1lcmljKGUsdCxvKXx8dGhpcy52YWxpZGF0ZVN0cmluZyhlLHQsbyl8fHRoaXMudmFsaWRhdGVBcnJheShlLHQsbyl8fHRoaXMudmFsaWRhdGVPYmplY3QoZSx0LG8pfHx0aGlzLnZhbGlkYXRlQ29tYmluYXRpb25zKGUsdCxvKXx8dGhpcy52YWxpZGF0ZUh5cGVybWVkaWEoZSx0LG8pfHx0aGlzLnZhbGlkYXRlRm9ybWF0KGUsdCxvKXx8dGhpcy52YWxpZGF0ZURlZmluZWRLZXl3b3JkcyhlLHQsbyl8fG51bGw7aWYoaSl7Zm9yKDt0aGlzLnNjYW5uZWQubGVuZ3RoOyl7dmFyIGI9dGhpcy5zY2FubmVkLnBvcCgpO2RlbGV0ZSBiW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV19dGhpcy5zY2FubmVkRnJvemVuPVtdLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXM9W119aWYoeXx8ZCE9PXRoaXMuZXJyb3JzLmxlbmd0aClmb3IoO3ImJnIubGVuZ3RofHxuJiZuLmxlbmd0aDspe3ZhciB2PXImJnIubGVuZ3RoPyIiK3IucG9wKCk6bnVsbCxtPW4mJm4ubGVuZ3RoPyIiK24ucG9wKCk6bnVsbDt5JiYoeT15LnByZWZpeFdpdGgodixtKSksdGhpcy5wcmVmaXhFcnJvcnMoZCx2LG0pfXJldHVybiBudWxsIT09dT90aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW3NdW3VdPXRoaXMuZXJyb3JzLnNsaWNlKGEpOm51bGwhPT1sJiYoZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW2xdPXRoaXMuZXJyb3JzLnNsaWNlKGEpKSx0aGlzLmhhbmRsZUVycm9yKHkpfSxkLnByb3RvdHlwZS52YWxpZGF0ZUZvcm1hdD1mdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgdC5mb3JtYXR8fCF0aGlzLmZvcm1hdFZhbGlkYXRvcnNbdC5mb3JtYXRdKXJldHVybiBudWxsO3ZhciByPXRoaXMuZm9ybWF0VmFsaWRhdG9yc1t0LmZvcm1hdF0uY2FsbChudWxsLGUsdCk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiByfHwibnVtYmVyIj09dHlwZW9mIHI/dGhpcy5jcmVhdGVFcnJvcih2LkZPUk1BVF9DVVNUT00se21lc3NhZ2U6cn0sIiIsIi9mb3JtYXQiLG51bGwsZSx0KTpyJiYib2JqZWN0Ij09dHlwZW9mIHI/dGhpcy5jcmVhdGVFcnJvcih2LkZPUk1BVF9DVVNUT00se21lc3NhZ2U6ci5tZXNzYWdlfHwiPyJ9LHIuZGF0YVBhdGh8fCIiLHIuc2NoZW1hUGF0aHx8Ii9mb3JtYXQiLG51bGwsZSx0KTpudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZURlZmluZWRLZXl3b3Jkcz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuIGluIHRoaXMuZGVmaW5lZEtleXdvcmRzKWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgdFtuXSlmb3IodmFyIG89dGhpcy5kZWZpbmVkS2V5d29yZHNbbl0saT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9cyhlLHRbbl0sdCxyKTtpZigic3RyaW5nIj09dHlwZW9mIGF8fCJudW1iZXIiPT10eXBlb2YgYSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih2LktFWVdPUkRfQ1VTVE9NLHtrZXk6bixtZXNzYWdlOmF9LCIiLCIiLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsbik7aWYoYSYmIm9iamVjdCI9PXR5cGVvZiBhKXt2YXIgdT1hLmNvZGU7aWYoInN0cmluZyI9PXR5cGVvZiB1KXtpZighdlt1XSl0aHJvdyBuZXcgRXJyb3IoIlVuZGVmaW5lZCBlcnJvciBjb2RlICh1c2UgZGVmaW5lRXJyb3IpOiAiK3UpO3U9dlt1XX1lbHNlIm51bWJlciIhPXR5cGVvZiB1JiYodT12LktFWVdPUkRfQ1VTVE9NKTt2YXIgYz0ib2JqZWN0Ij09dHlwZW9mIGEubWVzc2FnZT9hLm1lc3NhZ2U6e2tleTpuLG1lc3NhZ2U6YS5tZXNzYWdlfHwiPyJ9LGw9YS5zY2hlbWFQYXRofHwiLyIrbi5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKTtyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih1LGMsYS5kYXRhUGF0aHx8bnVsbCxsLG51bGwsZSx0KX19cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQmFzaWM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO3JldHVybihuPXRoaXMudmFsaWRhdGVUeXBlKGUsdCxyKSk/bi5wcmVmaXhXaXRoKG51bGwsInR5cGUiKToobj10aGlzLnZhbGlkYXRlRW51bShlLHQscikpP24ucHJlZml4V2l0aChudWxsLCJ0eXBlIik6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVUeXBlPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dC50eXBlKXJldHVybiBudWxsO3ZhciByPXR5cGVvZiBlO251bGw9PT1lP3I9Im51bGwiOkFycmF5LmlzQXJyYXkoZSkmJihyPSJhcnJheSIpO3ZhciBuPXQudHlwZTtBcnJheS5pc0FycmF5KG4pfHwobj1bbl0pO2Zvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXt2YXIgaT1uW29dO2lmKGk9PT1yfHwiaW50ZWdlciI9PT1pJiYibnVtYmVyIj09PXImJmUlMT09PTApcmV0dXJuIG51bGx9cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3Iodi5JTlZBTElEX1RZUEUse3R5cGU6cixleHBlY3RlZDpuLmpvaW4oIi8iKX0sIiIsIiIsbnVsbCxlLHQpfSxkLnByb3RvdHlwZS52YWxpZGF0ZUVudW09ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10WyJlbnVtIl0pcmV0dXJuIG51bGw7Zm9yKHZhciByPTA7cjx0WyJlbnVtIl0ubGVuZ3RoO3IrKyl7dmFyIG89dFsiZW51bSJdW3JdO2lmKG4oZSxvKSlyZXR1cm4gbnVsbH1yZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih2LkVOVU1fTUlTTUFUQ0gse3ZhbHVlOiJ1bmRlZmluZWQiIT10eXBlb2YgSlNPTj9KU09OLnN0cmluZ2lmeShlKTplfSwiIiwiIixudWxsLGUsdCl9LGQucHJvdG90eXBlLnZhbGlkYXRlTnVtZXJpYz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVNdWx0aXBsZU9mKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU1pbk1heChlLHQscil8fHRoaXMudmFsaWRhdGVOYU4oZSx0LHIpfHxudWxsfTt2YXIgeT1NYXRoLnBvdygyLC01MSksYj0xLXk7ZC5wcm90b3R5cGUudmFsaWRhdGVNdWx0aXBsZU9mPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5tdWx0aXBsZU9mfHx0LmRpdmlzaWJsZUJ5O2lmKHZvaWQgMD09PXIpcmV0dXJuIG51bGw7aWYoIm51bWJlciI9PXR5cGVvZiBlKXt2YXIgbj1lL3IlMTtpZihuPj15JiZiPm4pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3Iodi5OVU1CRVJfTVVMVElQTEVfT0Yse3ZhbHVlOmUsbXVsdGlwbGVPZjpyfSwiIiwiIixudWxsLGUsdCl9cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlTWluTWF4PWZ1bmN0aW9uKGUsdCl7aWYoIm51bWJlciIhPXR5cGVvZiBlKXJldHVybiBudWxsO2lmKHZvaWQgMCE9PXQubWluaW11bSl7aWYoZTx0Lm1pbmltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3Iodi5OVU1CRVJfTUlOSU1VTSx7dmFsdWU6ZSxtaW5pbXVtOnQubWluaW11bX0sIiIsIi9taW5pbXVtIixudWxsLGUsdCk7aWYodC5leGNsdXNpdmVNaW5pbXVtJiZlPT09dC5taW5pbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKHYuTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFLHt2YWx1ZTplLG1pbmltdW06dC5taW5pbXVtfSwiIiwiL2V4Y2x1c2l2ZU1pbmltdW0iLG51bGwsZSx0KX1pZih2b2lkIDAhPT10Lm1heGltdW0pe2lmKGU+dC5tYXhpbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKHYuTlVNQkVSX01BWElNVU0se3ZhbHVlOmUsbWF4aW11bTp0Lm1heGltdW19LCIiLCIvbWF4aW11bSIsbnVsbCxlLHQpO2lmKHQuZXhjbHVzaXZlTWF4aW11bSYmZT09PXQubWF4aW11bSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih2Lk5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRSx7dmFsdWU6ZSxtYXhpbXVtOnQubWF4aW11bX0sIiIsIi9leGNsdXNpdmVNYXhpbXVtIixudWxsLGUsdCl9cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlTmFOPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBlP251bGw6aXNOYU4oZSk9PT0hMHx8ZT09PTEvMHx8ZT09PS0oMS8wKT90aGlzLmNyZWF0ZUVycm9yKHYuTlVNQkVSX05PVF9BX05VTUJFUix7dmFsdWU6ZX0sIiIsIi90eXBlIixudWxsLGUsdCk6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVTdHJpbmc9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLnZhbGlkYXRlU3RyaW5nTGVuZ3RoKGUsdCxyKXx8dGhpcy52YWxpZGF0ZVN0cmluZ1BhdHRlcm4oZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZ0xlbmd0aD1mdW5jdGlvbihlLHQpe3JldHVybiJzdHJpbmciIT10eXBlb2YgZT9udWxsOnZvaWQgMCE9PXQubWluTGVuZ3RoJiZlLmxlbmd0aDx0Lm1pbkxlbmd0aD90aGlzLmNyZWF0ZUVycm9yKHYuU1RSSU5HX0xFTkdUSF9TSE9SVCx7bGVuZ3RoOmUubGVuZ3RoLG1pbmltdW06dC5taW5MZW5ndGh9LCIiLCIvbWluTGVuZ3RoIixudWxsLGUsdCk6dm9pZCAwIT09dC5tYXhMZW5ndGgmJmUubGVuZ3RoPnQubWF4TGVuZ3RoP3RoaXMuY3JlYXRlRXJyb3Iodi5TVFJJTkdfTEVOR1RIX0xPTkcse2xlbmd0aDplLmxlbmd0aCxtYXhpbXVtOnQubWF4TGVuZ3RofSwiIiwiL21heExlbmd0aCIsbnVsbCxlLHQpOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlU3RyaW5nUGF0dGVybj1mdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8InN0cmluZyIhPXR5cGVvZiB0LnBhdHRlcm4mJiEodC5wYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKSlyZXR1cm4gbnVsbDt2YXIgcjtpZih0LnBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApcj10LnBhdHRlcm47ZWxzZXt2YXIgbixvPSIiLGk9dC5wYXR0ZXJuLm1hdGNoKC9eXC8oLispXC8oW2ltZ10qKSQvKTtpPyhuPWlbMV0sbz1pWzJdKTpuPXQucGF0dGVybixyPW5ldyBSZWdFeHAobixvKX1yZXR1cm4gci50ZXN0KGUpP251bGw6dGhpcy5jcmVhdGVFcnJvcih2LlNUUklOR19QQVRURVJOLHtwYXR0ZXJuOnQucGF0dGVybn0sIiIsIi9wYXR0ZXJuIixudWxsLGUsdCl9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXk9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP3RoaXMudmFsaWRhdGVBcnJheUxlbmd0aChlLHQscil8fHRoaXMudmFsaWRhdGVBcnJheVVuaXF1ZUl0ZW1zKGUsdCxyKXx8dGhpcy52YWxpZGF0ZUFycmF5SXRlbXMoZSx0LHIpfHxudWxsOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlMZW5ndGg9ZnVuY3Rpb24oZSx0KXt2YXIgcjtyZXR1cm4gdm9pZCAwIT09dC5taW5JdGVtcyYmZS5sZW5ndGg8dC5taW5JdGVtcyYmKHI9dGhpcy5jcmVhdGVFcnJvcih2LkFSUkFZX0xFTkdUSF9TSE9SVCx7bGVuZ3RoOmUubGVuZ3RoLG1pbmltdW06dC5taW5JdGVtc30sIiIsIi9taW5JdGVtcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6dm9pZCAwIT09dC5tYXhJdGVtcyYmZS5sZW5ndGg+dC5tYXhJdGVtcyYmKHI9dGhpcy5jcmVhdGVFcnJvcih2LkFSUkFZX0xFTkdUSF9MT05HLHtsZW5ndGg6ZS5sZW5ndGgsbWF4aW11bTp0Lm1heEl0ZW1zfSwiIiwiL21heEl0ZW1zIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjpudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5VW5pcXVlSXRlbXM9ZnVuY3Rpb24oZSx0KXtpZih0LnVuaXF1ZUl0ZW1zKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWZvcih2YXIgbz1yKzE7bzxlLmxlbmd0aDtvKyspaWYobihlW3JdLGVbb10pKXt2YXIgaT10aGlzLmNyZWF0ZUVycm9yKHYuQVJSQVlfVU5JUVVFLHttYXRjaDE6cixtYXRjaDI6b30sIiIsIi91bmlxdWVJdGVtcyIsbnVsbCxlLHQpO2lmKHRoaXMuaGFuZGxlRXJyb3IoaSkpcmV0dXJuIGl9cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlJdGVtcz1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5pdGVtcylyZXR1cm4gbnVsbDt2YXIgbixvO2lmKEFycmF5LmlzQXJyYXkodC5pdGVtcykpe2ZvcihvPTA7bzxlLmxlbmd0aDtvKyspaWYobzx0Lml0ZW1zLmxlbmd0aCl7aWYobj10aGlzLnZhbGlkYXRlQWxsKGVbb10sdC5pdGVtc1tvXSxbb10sWyJpdGVtcyIsb10scisiLyIrbykpcmV0dXJuIG59ZWxzZSBpZih2b2lkIDAhPT10LmFkZGl0aW9uYWxJdGVtcylpZigiYm9vbGVhbiI9PXR5cGVvZiB0LmFkZGl0aW9uYWxJdGVtcyl7aWYoIXQuYWRkaXRpb25hbEl0ZW1zJiYobj10aGlzLmNyZWF0ZUVycm9yKHYuQVJSQVlfQURESVRJT05BTF9JVEVNUyx7fSwiLyIrbywiL2FkZGl0aW9uYWxJdGVtcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbb10sdC5hZGRpdGlvbmFsSXRlbXMsW29dLFsiYWRkaXRpb25hbEl0ZW1zIl0scisiLyIrbykpcmV0dXJuIG59ZWxzZSBmb3Iobz0wO288ZS5sZW5ndGg7bysrKWlmKG49dGhpcy52YWxpZGF0ZUFsbChlW29dLHQuaXRlbXMsW29dLFsiaXRlbXMiXSxyKyIvIitvKSlyZXR1cm4gbjtyZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3Q9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWV8fEFycmF5LmlzQXJyYXkoZSk/bnVsbDp0aGlzLnZhbGlkYXRlT2JqZWN0TWluTWF4UHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3RSZXF1aXJlZFByb3BlcnRpZXMoZSx0LHIpfHx0aGlzLnZhbGlkYXRlT2JqZWN0UHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXMoZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdE1pbk1heFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXt2YXIgcixuPU9iamVjdC5rZXlzKGUpO3JldHVybiB2b2lkIDAhPT10Lm1pblByb3BlcnRpZXMmJm4ubGVuZ3RoPHQubWluUHJvcGVydGllcyYmKHI9dGhpcy5jcmVhdGVFcnJvcih2Lk9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU0se3Byb3BlcnR5Q291bnQ6bi5sZW5ndGgsbWluaW11bTp0Lm1pblByb3BlcnRpZXN9LCIiLCIvbWluUHJvcGVydGllcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6dm9pZCAwIT09dC5tYXhQcm9wZXJ0aWVzJiZuLmxlbmd0aD50Lm1heFByb3BlcnRpZXMmJihyPXRoaXMuY3JlYXRlRXJyb3Iodi5PQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNLHtwcm9wZXJ0eUNvdW50Om4ubGVuZ3RoLG1heGltdW06dC5tYXhQcm9wZXJ0aWVzfSwiIiwiL21heFByb3BlcnRpZXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0UmVxdWlyZWRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09dC5yZXF1aXJlZClmb3IodmFyIHI9MDtyPHQucmVxdWlyZWQubGVuZ3RoO3IrKyl7dmFyIG49dC5yZXF1aXJlZFtyXTtpZih2b2lkIDA9PT1lW25dKXt2YXIgbz10aGlzLmNyZWF0ZUVycm9yKHYuT0JKRUNUX1JFUVVJUkVELHtrZXk6bn0sIiIsIi9yZXF1aXJlZC8iK3IsbnVsbCxlLHQpO2lmKHRoaXMuaGFuZGxlRXJyb3IobykpcmV0dXJuIG99fXJldHVybiBudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO2Zvcih2YXIgbyBpbiBlKXt2YXIgaT1yKyIvIitvLnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpLHM9ITE7aWYodm9pZCAwIT09dC5wcm9wZXJ0aWVzJiZ2b2lkIDAhPT10LnByb3BlcnRpZXNbb10mJihzPSEwLG49dGhpcy52YWxpZGF0ZUFsbChlW29dLHQucHJvcGVydGllc1tvXSxbb10sWyJwcm9wZXJ0aWVzIixvXSxpKSkpcmV0dXJuIG47aWYodm9pZCAwIT09dC5wYXR0ZXJuUHJvcGVydGllcylmb3IodmFyIGEgaW4gdC5wYXR0ZXJuUHJvcGVydGllcyl7dmFyIHU9bmV3IFJlZ0V4cChhKTtpZih1LnRlc3QobykmJihzPSEwLG49dGhpcy52YWxpZGF0ZUFsbChlW29dLHQucGF0dGVyblByb3BlcnRpZXNbYV0sW29dLFsicGF0dGVyblByb3BlcnRpZXMiLGFdLGkpKSlyZXR1cm4gbn1pZihzKXRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW2ldPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW2ldKTtlbHNlIGlmKHZvaWQgMCE9PXQuYWRkaXRpb25hbFByb3BlcnRpZXMpe2lmKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW2ldPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW2ldKSwiYm9vbGVhbiI9PXR5cGVvZiB0LmFkZGl0aW9uYWxQcm9wZXJ0aWVzKXtpZighdC5hZGRpdGlvbmFsUHJvcGVydGllcyYmKG49dGhpcy5jcmVhdGVFcnJvcih2Lk9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVMse2tleTpvfSwiIiwiL2FkZGl0aW9uYWxQcm9wZXJ0aWVzIixudWxsLGUsdCkucHJlZml4V2l0aChvLG51bGwpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbb10sdC5hZGRpdGlvbmFsUHJvcGVydGllcyxbb10sWyJhZGRpdGlvbmFsUHJvcGVydGllcyJdLGkpKXJldHVybiBufWVsc2UgdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYhdGhpcy5rbm93blByb3BlcnR5UGF0aHNbaV0mJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW2ldPSEwKX1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO2lmKHZvaWQgMCE9PXQuZGVwZW5kZW5jaWVzKWZvcih2YXIgbyBpbiB0LmRlcGVuZGVuY2llcylpZih2b2lkIDAhPT1lW29dKXt2YXIgaT10LmRlcGVuZGVuY2llc1tvXTtpZigic3RyaW5nIj09dHlwZW9mIGkpe2lmKHZvaWQgMD09PWVbaV0mJihuPXRoaXMuY3JlYXRlRXJyb3Iodi5PQkpFQ1RfREVQRU5ERU5DWV9LRVkse2tleTpvLG1pc3Npbmc6aX0sIiIsIiIsbnVsbCxlLHQpLnByZWZpeFdpdGgobnVsbCxvKS5wcmVmaXhXaXRoKG51bGwsImRlcGVuZGVuY2llcyIpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYoQXJyYXkuaXNBcnJheShpKSlmb3IodmFyIHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGE9aVtzXTtpZih2b2lkIDA9PT1lW2FdJiYobj10aGlzLmNyZWF0ZUVycm9yKHYuT0JKRUNUX0RFUEVOREVOQ1lfS0VZLHtrZXk6byxtaXNzaW5nOmF9LCIiLCIvIitzLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsbykucHJlZml4V2l0aChudWxsLCJkZXBlbmRlbmNpZXMiKSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKG49dGhpcy52YWxpZGF0ZUFsbChlLGksW10sWyJkZXBlbmRlbmNpZXMiLG9dLHIpKXJldHVybiBufXJldHVybiBudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUNvbWJpbmF0aW9ucz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVBbGxPZihlLHQscil8fHRoaXMudmFsaWRhdGVBbnlPZihlLHQscil8fHRoaXMudmFsaWRhdGVPbmVPZihlLHQscil8fHRoaXMudmFsaWRhdGVOb3QoZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUFsbE9mPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10LmFsbE9mKXJldHVybiBudWxsO2Zvcih2YXIgbixvPTA7bzx0LmFsbE9mLmxlbmd0aDtvKyspe3ZhciBpPXQuYWxsT2Zbb107aWYobj10aGlzLnZhbGlkYXRlQWxsKGUsaSxbXSxbImFsbE9mIixvXSxyKSlyZXR1cm4gbn1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVBbnlPZj1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5hbnlPZilyZXR1cm4gbnVsbDt2YXIgbixvLGk9W10scz10aGlzLmVycm9ycy5sZW5ndGg7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYobj10aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzLG89dGhpcy5rbm93blByb3BlcnR5UGF0aHMpO2Zvcih2YXIgYT0hMCx1PTA7dTx0LmFueU9mLmxlbmd0aDt1Kyspe3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBjPXQuYW55T2ZbdV0sbD10aGlzLmVycm9ycy5sZW5ndGgsZj10aGlzLnZhbGlkYXRlQWxsKGUsYyxbXSxbImFueU9mIix1XSxyKTtpZihudWxsPT09ZiYmbD09PXRoaXMuZXJyb3JzLmxlbmd0aCl7aWYodGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpe2Zvcih2YXIgcCBpbiB0aGlzLmtub3duUHJvcGVydHlQYXRocylvW3BdPSEwLGRlbGV0ZSBuW3BdO2Zvcih2YXIgaCBpbiB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzKW9baF18fChuW2hdPSEwKTthPSExO2NvbnRpbnVlfXJldHVybiBudWxsfWYmJmkucHVzaChmLnByZWZpeFdpdGgobnVsbCwiIit1KS5wcmVmaXhXaXRoKG51bGwsImFueU9mIikpfXJldHVybiB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9byksYT8oaT1pLmNvbmNhdCh0aGlzLmVycm9ycy5zbGljZShzKSksdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSx0aGlzLmNyZWF0ZUVycm9yKHYuQU5ZX09GX01JU1NJTkcse30sIiIsIi9hbnlPZiIsaSxlLHQpKTp2b2lkIDB9LGQucHJvdG90eXBlLnZhbGlkYXRlT25lT2Y9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQub25lT2YpcmV0dXJuIG51bGw7dmFyIG4sbyxpPW51bGwscz1bXSxhPXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsbz10aGlzLmtub3duUHJvcGVydHlQYXRocyk7Zm9yKHZhciB1PTA7dTx0Lm9uZU9mLmxlbmd0aDt1Kyspe3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBjPXQub25lT2ZbdV0sbD10aGlzLmVycm9ycy5sZW5ndGgsZj10aGlzLnZhbGlkYXRlQWxsKGUsYyxbXSxbIm9uZU9mIix1XSxyKTtpZihudWxsPT09ZiYmbD09PXRoaXMuZXJyb3JzLmxlbmd0aCl7aWYobnVsbCE9PWkpcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksdGhpcy5jcmVhdGVFcnJvcih2Lk9ORV9PRl9NVUxUSVBMRSx7aW5kZXgxOmksaW5kZXgyOnV9LCIiLCIvb25lT2YiLG51bGwsZSx0KTtpZihpPXUsdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKXtmb3IodmFyIHAgaW4gdGhpcy5rbm93blByb3BlcnR5UGF0aHMpb1twXT0hMCxkZWxldGUgbltwXTtmb3IodmFyIGggaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocylvW2hdfHwobltoXT0hMCl9fWVsc2UgZiYmcy5wdXNoKGYpfXJldHVybiB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9byksbnVsbD09PWk/KHM9cy5jb25jYXQodGhpcy5lcnJvcnMuc2xpY2UoYSkpLHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksdGhpcy5jcmVhdGVFcnJvcih2Lk9ORV9PRl9NSVNTSU5HLHt9LCIiLCIvb25lT2YiLHMsZSx0KSk6KHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksbnVsbCl9LGQucHJvdG90eXBlLnZhbGlkYXRlTm90PWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10Lm5vdClyZXR1cm4gbnVsbDt2YXIgbixvLGk9dGhpcy5lcnJvcnMubGVuZ3RoO3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKG49dGhpcy51bmtub3duUHJvcGVydHlQYXRocyxvPXRoaXMua25vd25Qcm9wZXJ0eVBhdGhzLHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBzPXRoaXMudmFsaWRhdGVBbGwoZSx0Lm5vdCxudWxsLG51bGwsciksYT10aGlzLmVycm9ycy5zbGljZShpKTtyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxpKSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9byksbnVsbD09PXMmJjA9PT1hLmxlbmd0aD90aGlzLmNyZWF0ZUVycm9yKHYuTk9UX1BBU1NFRCx7fSwiIiwiL25vdCIsbnVsbCxlLHQpOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlSHlwZXJtZWRpYT1mdW5jdGlvbihlLHQsbil7aWYoIXQubGlua3MpcmV0dXJuIG51bGw7Zm9yKHZhciBvLGk9MDtpPHQubGlua3MubGVuZ3RoO2krKyl7dmFyIHM9dC5saW5rc1tpXTtpZigiZGVzY3JpYmVkYnkiPT09cy5yZWwpe2Zvcih2YXIgYT1uZXcgcihzLmhyZWYpLHU9ITAsYz0wO2M8YS52YXJOYW1lcy5sZW5ndGg7YysrKWlmKCEoYS52YXJOYW1lc1tjXWluIGUpKXt1PSExO2JyZWFrfWlmKHUpe3ZhciBsPWEuZmlsbEZyb21PYmplY3QoZSksZj17JHJlZjpsfTtpZihvPXRoaXMudmFsaWRhdGVBbGwoZSxmLFtdLFsibGlua3MiLGldLG4pKXJldHVybiBvfX19fTt2YXIgdj17SU5WQUxJRF9UWVBFOjAsRU5VTV9NSVNNQVRDSDoxLEFOWV9PRl9NSVNTSU5HOjEwLE9ORV9PRl9NSVNTSU5HOjExLE9ORV9PRl9NVUxUSVBMRToxMixOT1RfUEFTU0VEOjEzLE5VTUJFUl9NVUxUSVBMRV9PRjoxMDAsTlVNQkVSX01JTklNVU06MTAxLE5VTUJFUl9NSU5JTVVNX0VYQ0xVU0lWRToxMDIsTlVNQkVSX01BWElNVU06MTAzLE5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRToxMDQsTlVNQkVSX05PVF9BX05VTUJFUjoxMDUsU1RSSU5HX0xFTkdUSF9TSE9SVDoyMDAsU1RSSU5HX0xFTkdUSF9MT05HOjIwMSxTVFJJTkdfUEFUVEVSTjoyMDIsT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTTozMDAsT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTTozMDEsT0JKRUNUX1JFUVVJUkVEOjMwMixPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOjMwMyxPQkpFQ1RfREVQRU5ERU5DWV9LRVk6MzA0LEFSUkFZX0xFTkdUSF9TSE9SVDo0MDAsQVJSQVlfTEVOR1RIX0xPTkc6NDAxLEFSUkFZX1VOSVFVRTo0MDIsQVJSQVlfQURESVRJT05BTF9JVEVNUzo0MDMsRk9STUFUX0NVU1RPTTo1MDAsS0VZV09SRF9DVVNUT006NTAxLENJUkNVTEFSX1JFRkVSRU5DRTo2MDAsVU5LTk9XTl9QUk9QRVJUWToxZTN9LG09e307Zm9yKHZhciBnIGluIHYpbVt2W2ddXT1nO3ZhciBfPXtJTlZBTElEX1RZUEU6IkludmFsaWQgdHlwZToge3R5cGV9IChleHBlY3RlZCB7ZXhwZWN0ZWR9KSIsRU5VTV9NSVNNQVRDSDoiTm8gZW51bSBtYXRjaCBmb3I6IHt2YWx1ZX0iLEFOWV9PRl9NSVNTSU5HOidEYXRhIGRvZXMgbm90IG1hdGNoIGFueSBzY2hlbWFzIGZyb20gImFueU9mIicsT05FX09GX01JU1NJTkc6J0RhdGEgZG9lcyBub3QgbWF0Y2ggYW55IHNjaGVtYXMgZnJvbSAib25lT2YiJyxPTkVfT0ZfTVVMVElQTEU6J0RhdGEgaXMgdmFsaWQgYWdhaW5zdCBtb3JlIHRoYW4gb25lIHNjaGVtYSBmcm9tICJvbmVPZiI6IGluZGljZXMge2luZGV4MX0gYW5kIHtpbmRleDJ9JyxOT1RfUEFTU0VEOidEYXRhIG1hdGNoZXMgc2NoZW1hIGZyb20gIm5vdCInLE5VTUJFUl9NVUxUSVBMRV9PRjoiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSBtdWx0aXBsZSBvZiB7bXVsdGlwbGVPZn0iLE5VTUJFUl9NSU5JTVVNOiJWYWx1ZSB7dmFsdWV9IGlzIGxlc3MgdGhhbiBtaW5pbXVtIHttaW5pbXVtfSIsTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFOiJWYWx1ZSB7dmFsdWV9IGlzIGVxdWFsIHRvIGV4Y2x1c2l2ZSBtaW5pbXVtIHttaW5pbXVtfSIsTlVNQkVSX01BWElNVU06IlZhbHVlIHt2YWx1ZX0gaXMgZ3JlYXRlciB0aGFuIG1heGltdW0ge21heGltdW19IiwKTlVNQkVSX01BWElNVU1fRVhDTFVTSVZFOiJWYWx1ZSB7dmFsdWV9IGlzIGVxdWFsIHRvIGV4Y2x1c2l2ZSBtYXhpbXVtIHttYXhpbXVtfSIsTlVNQkVSX05PVF9BX05VTUJFUjoiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSB2YWxpZCBudW1iZXIiLFNUUklOR19MRU5HVEhfU0hPUlQ6IlN0cmluZyBpcyB0b28gc2hvcnQgKHtsZW5ndGh9IGNoYXJzKSwgbWluaW11bSB7bWluaW11bX0iLFNUUklOR19MRU5HVEhfTE9ORzoiU3RyaW5nIGlzIHRvbyBsb25nICh7bGVuZ3RofSBjaGFycyksIG1heGltdW0ge21heGltdW19IixTVFJJTkdfUEFUVEVSTjoiU3RyaW5nIGRvZXMgbm90IG1hdGNoIHBhdHRlcm46IHtwYXR0ZXJufSIsT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTToiVG9vIGZldyBwcm9wZXJ0aWVzIGRlZmluZWQgKHtwcm9wZXJ0eUNvdW50fSksIG1pbmltdW0ge21pbmltdW19IixPQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNOiJUb28gbWFueSBwcm9wZXJ0aWVzIGRlZmluZWQgKHtwcm9wZXJ0eUNvdW50fSksIG1heGltdW0ge21heGltdW19IixPQkpFQ1RfUkVRVUlSRUQ6Ik1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHk6IHtrZXl9IixPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOiJBZGRpdGlvbmFsIHByb3BlcnRpZXMgbm90IGFsbG93ZWQiLE9CSkVDVF9ERVBFTkRFTkNZX0tFWToiRGVwZW5kZW5jeSBmYWlsZWQgLSBrZXkgbXVzdCBleGlzdDoge21pc3Npbmd9IChkdWUgdG8ga2V5OiB7a2V5fSkiLEFSUkFZX0xFTkdUSF9TSE9SVDoiQXJyYXkgaXMgdG9vIHNob3J0ICh7bGVuZ3RofSksIG1pbmltdW0ge21pbmltdW19IixBUlJBWV9MRU5HVEhfTE9ORzoiQXJyYXkgaXMgdG9vIGxvbmcgKHtsZW5ndGh9KSwgbWF4aW11bSB7bWF4aW11bX0iLEFSUkFZX1VOSVFVRToiQXJyYXkgaXRlbXMgYXJlIG5vdCB1bmlxdWUgKGluZGljZXMge21hdGNoMX0gYW5kIHttYXRjaDJ9KSIsQVJSQVlfQURESVRJT05BTF9JVEVNUzoiQWRkaXRpb25hbCBpdGVtcyBub3QgYWxsb3dlZCIsRk9STUFUX0NVU1RPTToiRm9ybWF0IHZhbGlkYXRpb24gZmFpbGVkICh7bWVzc2FnZX0pIixLRVlXT1JEX0NVU1RPTToiS2V5d29yZCBmYWlsZWQ6IHtrZXl9ICh7bWVzc2FnZX0pIixDSVJDVUxBUl9SRUZFUkVOQ0U6IkNpcmN1bGFyICRyZWZzOiB7dXJsc30iLFVOS05PV05fUFJPUEVSVFk6IlVua25vd24gcHJvcGVydHkgKG5vdCBpbiBzY2hlbWEpIn07Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPWMsYy5wcm90b3R5cGUubmFtZT0iVmFsaWRhdGlvbkVycm9yIixjLnByb3RvdHlwZS5wcmVmaXhXaXRoPWZ1bmN0aW9uKGUsdCl7aWYobnVsbCE9PWUmJihlPWUucmVwbGFjZSgvfi9nLCJ+MCIpLnJlcGxhY2UoL1wvL2csIn4xIiksdGhpcy5kYXRhUGF0aD0iLyIrZSt0aGlzLmRhdGFQYXRoKSxudWxsIT09dCYmKHQ9dC5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKSx0aGlzLnNjaGVtYVBhdGg9Ii8iK3QrdGhpcy5zY2hlbWFQYXRoKSxudWxsIT09dGhpcy5zdWJFcnJvcnMpZm9yKHZhciByPTA7cjx0aGlzLnN1YkVycm9ycy5sZW5ndGg7cisrKXRoaXMuc3ViRXJyb3JzW3JdLnByZWZpeFdpdGgoZSx0KTtyZXR1cm4gdGhpc307dmFyIE89e30saj1mKCk7cmV0dXJuIGouYWRkTGFuZ3VhZ2UoImVuLWdiIixfKSxqLnR2ND1qLGp9KX0se31dLDk5OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4saSxzLGEpe28odGhpcyxlKSx0aGlzLl9ndWlkPXQsdGhpcy5fdHlwZT1yLHRoaXMuX29iamVjdE5hbWU9bix0aGlzLl9kZXNjcmlwdGlvbj1pLHRoaXMuX2xhbmd1YWdlPXMsdGhpcy5fc291cmNlUGFja2FnZVVSTD1hLHRoaXMuX3NpZ25hdHVyZT1udWxsLHRoaXMuX3NvdXJjZVBhY2thZ2U9bnVsbH1yZXR1cm4gbihlLFt7a2V5OiJndWlkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ3VpZH0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9ndWlkPWUpfX0se2tleToidHlwZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fdHlwZT1lKX19LHtrZXk6Im9iamVjdE5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYmplY3ROYW1lfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX29iamVjdE5hbWU9ZSl9fSx7a2V5OiJkZXNjcmlwdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2Rlc2NyaXB0aW9uPWUpfX0se2tleToibGFuZ3VhZ2UiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYW5ndWFnZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9sYW5ndWFnZT1lKX19LHtrZXk6InNpZ25hdHVyZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpZ25hdHVyZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9zaWduYXR1cmU9ZSl9fSx7a2V5OiJzb3VyY2VQYWNrYWdlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlUGFja2FnZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9zb3VyY2VQYWNrYWdlPWUpfX0se2tleToic291cmNlUGFja2FnZVVSTCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZVBhY2thZ2VVUkx9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc291cmNlUGFja2FnZVVSTD1lKX19XSksZX0oKSxzPXtIWVBFUlRZOiJoeXBlcnR5IixQUk9UT1NUVUI6InByb3Rvc3R1YiIsSFlQRVJUWV9SVU5USU1FOiJoeXBlcnR5X3J1bnRpbWUiLEhZUEVSVFlfSU5URVJDRVBUT1I6Imh5cGVydHlfaW5zcGVjdG9yIixIWVBFUlRZX0RBVEFfT0JKRUNUOiJoeXBlcnR5X2RhdGFfb2JqZWN0IixQT0xJQ1lfRU5GT1JDRVI6InBvbGljeV9lbmZvcmNlciIsREFUQV9TQ0hFTUE6ImRhdGFfc2NoZW1hIn07ci5DYXRhbG9ndWVPYmplY3RUeXBlPXM7dmFyIGE9e0pBVkFTQ1JJUFRfRUNNQTY6ImphdmFzY3JpcHRfZWNtYTYiLEpBVkFTQ1JJUFRfRUNNQTU6ImphdmFzY3JpcHRfZWNtYTUiLEpTT05fU0NIRU1BX1Y0OiJqc29uX3NjaGVtYV92NCIsUFlUSE9OOiJweXRob24iLFRZUEVTQ1JJUFQ6InR5cGVzY3JpcHQifTtyLkRhdGFPYmplY3RTb3VyY2VMYW5ndWFnZT1hLHJbImRlZmF1bHQiXT1pfSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTN9XSwxMDA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuLi9yZVRISU5LT2JqZWN0L1JldGhpbmtPYmplY3QiKSxjPWEodSksbD1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSxmPWEobCkscD1lKCIuL1NvdXJjZVBhY2thZ2UiKSxoPWEocCksZD1lKCIuL0h5cGVydHlEZXNjcmlwdG9yIikseT1hKGQpLGI9ZSgiLi9Qcm90b2NvbFN0dWJEZXNjcmlwdG9yIiksdj1hKGIpLG09ZSgiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiKSxnPWEobSksXz1lKCIuL1BvbGljeUVuZm9yY2VyRGVzY3JpcHRvciIpLE89YShfKSxqPWUoIi4vRGF0YU9iamVjdFNjaGVtYSIpLEU9YShqKSx3PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscil9cmV0dXJuIG8odCxlKSxpKHQsW3trZXk6ImNyZWF0ZUNhdGFsb2d1ZURhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyxpKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgZlsiZGVmYXVsdCJdKGUsdCxyLG4sbyxpKX19LHtrZXk6ImNyZWF0ZUh5cGVydHlEZXNjcmlwdG9yT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8saSxzKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIHMpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyB5WyJkZWZhdWx0Il0oZSxsLkNhdGFsb2d1ZU9iamVjdFR5cGUuSFlQRVJUWSx0LHIsbixvLGkscyl9fSx7a2V5OiJjcmVhdGVQcm90b1N0dWJEZXNjcmlwdG9yT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8saSxzLGEpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBvfHwidW5kZWZpbmVkIj09dHlwZW9mIGl8fCJ1bmRlZmluZWQiPT10eXBlb2Ygc3x8InVuZGVmaW5lZCI9PXR5cGVvZiBhKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgdlsiZGVmYXVsdCJdKGUsbC5DYXRhbG9ndWVPYmplY3RUeXBlLlBST1RPU1RVQix0LHIsbixvLGkscyxhKX19LHtrZXk6ImNyZWF0ZUh5cGVydHlSdW50aW1lRGVzY3JpcHRvck9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvLGkscyxhKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIHN8fCJ1bmRlZmluZWQiPT10eXBlb2YgYSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IGdbImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5IWVBFUlRZX1JVTlRJTUUsdCxyLG4sbyxpLHMsYSl9fSx7a2V5OiJjcmVhdGVQb2xpY3lFbmZvcmNlckRlc2NyaXB0b3JPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyxpLHMpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBvfHwidW5kZWZpbmVkIj09dHlwZW9mIGl8fCJ1bmRlZmluZWQiPT10eXBlb2Ygcyl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IE9bImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5QT0xJQ1lfRU5GT1JDRVIsdCxyLG4sbyxpLHMpfX0se2tleToiY3JlYXRlRGF0YU9iamVjdFNjaGVtYSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygbyl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IEVbImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5EQVRBX1NDSEVNQSx0LHIsbixvKX19LHtrZXk6ImNyZWF0ZVNvdXJjZVBhY2thZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyBoWyJkZWZhdWx0Il0oZSx0KX19XSksdH0oY1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09dyx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3JlVEhJTktPYmplY3QvUmV0aGlua09iamVjdCI6MTEwLCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiOjk5LCIuL0RhdGFPYmplY3RTY2hlbWEiOjEwMSwiLi9IeXBlcnR5RGVzY3JpcHRvciI6MTAyLCIuL0h5cGVydHlSdW50aW1lRGVzY3JpcHRvciI6MTAzLCIuL1BvbGljeUVuZm9yY2VyRGVzY3JpcHRvciI6MTA0LCIuL1Byb3RvY29sU3R1YkRlc2NyaXB0b3IiOjEwNSwiLi9Tb3VyY2VQYWNrYWdlIjoxMDYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjE1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTAxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBhPWUoIi4vQ2F0YWxvZ3VlRGF0YU9iamVjdCIpLHU9cyhhKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8scyxhLHUpe2kodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8scyxhLHUpfXJldHVybiBvKHQsZSksdH0odVsiZGVmYXVsdCJdKSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8scyxhLHUpe2kodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8scyxhLHUpfXJldHVybiBvKHQsZSksdH0oYyk7ci5NZXNzYWdlRGF0YU9iamVjdFNjaGVtYT1sO3ZhciBmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8scyxhLHUsYyl7aSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxzLGEsdSksdGhpcy5fYWNjZXNzQ29udHJvbFBvbGljeT1jfXJldHVybiBvKHQsZSksdH0oYyk7ci5IeXBlcnR5RGF0YU9iamVjdFNjaGVtYT1mO3ZhciBwPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8scyxhLHUsYyl7aSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxzLGEsdSxjKX1yZXR1cm4gbyh0LGUpLHR9KGYpO3IuQ29tbXVuaWNhdGlvbkRhdGFPYmplY3RTY2hlbWE9cDt2YXIgaD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLHMsYSx1LGMpe2kodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8scyxhLHUsYyl9cmV0dXJuIG8odCxlKSx0fShmKTtyLkNvbm5lY3Rpb25EYXRhT2JqZWN0U2NoZW1hPWg7dmFyIGQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbyxzLGEsdSxjKXtpKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLHMsYSx1LGMpfXJldHVybiBvKHQsZSksdH0oZik7ci5JZGVudGlmeURhdGFPYmplY3RTY2hlbWE9ZDt2YXIgeT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLHMsYSx1LGMpe2kodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8scyxhLHUsYyl9cmV0dXJuIG8odCxlKSx0fShmKTtyLkNvbnRleHREYXRhT2JqZWN0U2NoZW1hPXksclsiZGVmYXVsdCJdPWN9LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo5OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxNSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxN31dLDEwMjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciB1PWUoIi4vQ2F0YWxvZ3VlRGF0YU9iamVjdCIpLGM9YSh1KSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8saSxhLHUsYyxsKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLGksYSx1KSx0aGlzLl9jb25maWd1cmF0aW9uPXt9LHRoaXMuX2NvbnN0cmFpbnRzPXt9LHRoaXMuX3BvbGljaWVzPXt9LHRoaXMuX21lc3NhZ2VTY2hlbWE9bnVsbCx0aGlzLl9oeXBlcnR5VHlwZT1jLHRoaXMuX2RhdGFPYmplY3RzPWx9cmV0dXJuIG8odCxlKSxpKHQsW3trZXk6Imh5cGVydHlUeXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHlwZXJ0eVR5cGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5faHlwZXJ0eVR5cGU9ZSl9fSx7a2V5OiJkYXRhT2JqZWN0cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFPYmplY3RzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2RhdGFPYmplY3RzPWUpfX0se2tleToiY29uZmlndXJhdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ3VyYXRpb259LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fY29uZmlndXJhdGlvbj1lKX19LHtrZXk6ImNvbnN0cmFpbnRzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uc3RyYWludHN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fY29uc3RyYWludHM9ZSl9fSx7a2V5OiJtZXNzYWdlU2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZVNjaGVtYX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9tZXNzYWdlU2NoZW1hPWUpfX0se2tleToicG9saWNpZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2xpY2llc30sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9wb2xpY2llcz1lKX19XSksdH0oY1siZGVmYXVsdCJdKSxmPXt9O3IuUnVudGltZUh5cGVydHlDYXBhYmlsaXR5VHlwZT1mO3ZhciBwPXtDT01NVU5JQ0FUT1I6ImNvbW11bmljYXRvciIsSURFTlRJVFk6ImlkZW50aXR5IixDT05URVhUOiJjb250ZXh0In07ci5IeXBlcnR5VHlwZT1wLHJbImRlZmF1bHQiXT1sfSx7Ii4vQ2F0YWxvZ3VlRGF0YU9iamVjdCI6OTksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjE1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTAzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHU9ZSgiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IiksYz1hKHUpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbyxpLGEsdSxjLGwsZil7cyh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxpLGEsdSksdGhpcy5fcnVudGltZVR5cGU9YyxsP3RoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXM9bDp0aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzPXt9LGY/dGhpcy5fcHJvdG9jb2xDYXBhYmlsaXRpZXM9Zjp0aGlzLl9wcm90b2NvbENhcGFiaWxpdGllcz17fX1yZXR1cm4gbyh0LGUpLGkodCxbe2tleToicnVudGltZVR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ydW50aW1lVHlwZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9ydW50aW1lVHlwZT1lKX19LHtrZXk6Imh5cGVydHlDYXBhYmlsaXRpZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXM9ZSl9fSx7a2V5OiJwcm90b2NvbENhcGFiaWxpdGllcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fcHJvdG9jb2xDYXBhYmlsaXRpZXM9ZSl9fV0pLHR9KGNbImRlZmF1bHQiXSksZj17QlJPV1NFUjoiYnJvd3NlciIsU1RBTkRBTE9ORToic3RhbmRhbG9uZSIsU0VSVkVSOiJzZXJ2ZXIiLEdBVEVXQVk6ImdhdGV3YXkifTtyLlJ1bnRpbWVUeXBlPWY7dmFyIHA9e01JQzoibWljIixDQU1FUkE6ImNhbWVyYSIsU0VOU09SOiJzZW5zb3IiLFdFQlJUQzoid2VicnRjIixPUlRDOiJvcnRjIn07ci5SdW50aW1lSHlwZXJ0eUNhcGFiaWxpdHlUeXBlPXA7dmFyIGg9e0hUVFA6Imh0dHAiLEhUVFBTOiJodHRwcyIsV1M6IndzIixXU1M6IndzcyIsQ09BUDoiY29hcCIsREFUQUNIQU5FTDoiZGF0YWNoYW5uZWwifTtyLlJ1bnRpbWVQcm90b2NvbENhcGFiaWxpdHlUeXBlPWgsclsiZGVmYXVsdCJdPWx9LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo5OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMDQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSxjPWEodSksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLGksYSx1LGMsbCl7cyh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxpLGEsdSksdGhpcy5fY29uZmlndXJhdGlvbj1jLHRoaXMuX3BvbGljaWVzPWx9cmV0dXJuIG8odCxlKSxpKHQsW3trZXk6ImNvbmZpZ3VyYXRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25maWd1cmF0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fY29uZmlndXJhdGlvbj1lfX0se2tleToicG9saWNpZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2xpY2llc30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3BvbGljaWVzPWV9fV0pLHR9KGNbImRlZmF1bHQiXSk7clsiZGVmYXVsdCJdPWwsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL0NhdGFsb2d1ZURhdGFPYmplY3QiOjk5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxNSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxN31dLDEwNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciB1PWUoIi4vQ2F0YWxvZ3VlRGF0YU9iamVjdCIpLGM9YSh1KSxsPWUoIi4vSHlwZXJ0eVJ1bnRpbWVEZXNjcmlwdG9yIiksZj0oYShsKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLGksYSx1LGMsbCxmKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLGksYSx1KSx0aGlzLl9tZXNzYWdlU2NoZW1hcz1jLGw/dGhpcy5fY29uZmlndXJhdGlvbj1sOnRoaXMuX2NvbmZpZ3VyYXRpb249e30sZj90aGlzLl9jb25zdHJhaW50cz1mOnRoaXMuX2NvbnN0cmFpbnRzPXt9fXJldHVybiBvKHQsZSksaSh0LFt7a2V5OiJtZXNzYWdlU2NoZW1hcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc3NhZ2VTY2hlbWFzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX21lc3NhZ2VTY2hlbWFzPWUpfX0se2tleToiY29uc3RyYWludHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25zdHJhaW50c30sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9jb25zdHJhaW50cz1lKX19LHtrZXk6ImNvbmZpZ3VyYXRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25maWd1cmF0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2NvbmZpZ3VyYXRpb249ZSl9fV0pLHR9KGNbImRlZmF1bHQiXSkpO3JbImRlZmF1bHQiXT1mLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo5OSwiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiOjEwMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMDY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpe28odGhpcyxlKSx0aGlzLl9zb3VyY2VDb2RlPXIsdGhpcy5fc291cmNlQ29kZUNsYXNzbmFtZT10LHRoaXMuX2VuY29kaW5nPW51bGwsdGhpcy5fc2lnbmF0dXJlPW51bGx9cmV0dXJuIG4oZSxbe2tleToic291cmNlQ29kZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZUNvZGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc291cmNlQ29kZT1lKX19LHtrZXk6InNvdXJjZUNvZGVDbGFzc25hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VDb2RlQ2xhc3NuYW1lfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NvdXJjZUNvZGVDbGFzc25hbWU9ZSl9fSx7a2V5OiJlbmNvZGluZyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuY29kaW5nfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2VuY29kaW5nPWUpfX0se2tleToic2lnbmF0dXJlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2lnbmF0dXJlfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NpZ25hdHVyZT1lKX19XSksZX0oKTtyWyJkZWZhdWx0Il09aSx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTN9XSwxMDc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixpLHMpe28odGhpcyxlKSx0aGlzLmlkPXQsdGhpcy5mcm9tPXIsdGhpcy50bz1uLHRoaXMudHlwZT1pLHRoaXMuYm9keT1zfXJldHVybiBuKGUsW3trZXk6ImFzc2VydElkZW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCFlfHwhdCl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UsIHRva2VuIHRvIGJlIHJlbW92ZWQsIGFuZCBhc3NlcnRlZElkZW50aXR5IG11c3QgYmUgcHJvdmlkZWQiKTt2YXIgcj10aGlzLmJvZHk7cmV0dXJuIHIuaWRUb2tlbj1udWxsLHIuYXNzZXJ0ZWRJZGVudGl0eT10LHRoaXMuYm9keT1yLHRoaXN9fSx7a2V5OiJhZGRJZFRva2VuIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UsIHRva2VuIHRvIGJlIGFkZGVkLCBtdXN0IGJlIHByb3ZpZGVkIik7dmFyIHQ9dGhpcy5ib2R5O3JldHVybiB0LmlkVG9rZW49ZSx0aGlzLmJvZHk9dCx0aGlzfX0se2tleToiYWRkQWNjZXNzVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigibWVzc2FnZSwgdG9rZW4gdG8gYmUgYWRkZWQsIG11c3QgYmUgcHJvdmlkZWQiKTt2YXIgdD10aGlzLmJvZHk7cmV0dXJuIHQuYWNjZXNzVG9rZW49ZSx0aGlzLmJvZHk9dCx0aGlzfX1dKSxlfSgpO3IuTWVzc2FnZT1pO3ZhciBzPXtDUkVBVEU6ImNyZWF0ZSIsUkVBRDoicmVhZCIsVVBEQVRFOiJ1cGRhdGUiLERFTEVURToiZGVsZXRlIixTVUJTQ1JJQkU6InN1YnNjcmliZSIsVU5TVUJTQ1JJQkU6InVuc3Vic2NyaWJlIixSRVNQT05TRToicmVzcG9uc2UiLEZPUldBUkQ6ImZvcndhcmQifTtyLk1lc3NhZ2VUeXBlPXMsclsiZGVmYXVsdCJdPWl9LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxM31dLDEwODpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3ZhciB0PWEoZSkucmVkdWNlKGZ1bmN0aW9uKHQscil7cmV0dXJuIHRbZVtyXV09cix0fSx7fSk7cmV0dXJuIHUoYShlKS5yZWR1Y2UoZnVuY3Rpb24odCxyKXtyZXR1cm4gdFtyXT1lW3JdLHR9LGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSkpfXZhciBvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpWyJkZWZhdWx0Il0sdT1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2ZyZWV6ZSIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuRW51bT1uO3ZhciBjPWZ1bmN0aW9uIG0oZSx0LHIsbixpKXtvKHRoaXMsbSksdGhpcy5pZFRva2VuPWUsdGhpcy5hY2Nlc3NUb2tlbj10LHRoaXMucmVzb3VyY2U9cix0aGlzLnNjaGVtYT1uLHRoaXMuYXNzZXJ0ZWRJZGVudGl0eT1pfTtyLk1lc3NhZ2VCb2R5PWM7dmFyIGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixzLGEsdSxjKXtpZihvKHRoaXMsdCksIWUpdGhyb3cgbmV3IEVycm9yKCJUaGUgdmFsdWUgcGFyYW1ldGVyIGlzIG51bGwiKTtpKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsbixzLGEsdSxjLHUsYyksdGhpcy52YWx1ZT1lLHImJih0aGlzLnBvbGljeT1yKX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuQ3JlYXRlTWVzc2FnZUJvZHk9bDt2YXIgZj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLHMsYSx1LGMsbCl7byh0aGlzLHQpLGkoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbixzLGEpLHUmJih0aGlzLmF0dHJpYnV0ZT11KSxjJiYodGhpcy5jcml0ZXJpYVN5bnRheD1jKSxsJiYodGhpcy5jcml0ZXJpYT1sKX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuUmVhZE1lc3NhZ2VCb2R5PWY7dmFyIHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixzLGEsdSl7byh0aGlzLHQpLGkoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbixzLGEpLHUmJih0aGlzLmF0dHJpYnV0ZT11KX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuRGVsZXRlTWVzc2FnZUJvZHk9cDt2YXIgaD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLHMsYSx1LGMpe28odGhpcyx0KSxpKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG4scyxhKSx0aGlzLmF0dHJpYnV0ZT11LHRoaXMudmFsdWU9Y31yZXR1cm4gcyh0LGUpLHR9KGMpO3IuVXBkYXRlTWVzc2FnZUJvZHk9aDt2YXIgZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLHMsYSx1KXtvKHRoaXMsdCksaShPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixuLHMsYSksdGhpcy5tZXNzYWdlPXV9cmV0dXJuIHModCxlKSx0fShjKTtyLkZvcndhcmRNZXNzYWdlQm9keT1kO3ZhciB5PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG4scyxhKXtvKHRoaXMsdCksaShPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixuKSxzJiYodGhpcy5jb2RlPXMsdGhpcy5kZXNjcmlwdGlvbj12W3NdKSxhJiYodGhpcy52YWx1ZT1hKX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuUmVzcG9uc2VNZXNzYWdlQm9keT15O3ZhciBiPW4oezEwMDoiMTAwIiwxMDE6IjEwMSIsMjAwOiIyMDAiLDIwMToiMjAxIiwyMDI6IjIwMiIsMjAzOiIyMDMiLDIwNDoiMjA0IiwyMDU6IjIwNSIsMjA2OiIyMDYiLDMwMDoiMzAwIiwzMDE6IjMwMSIsMzAyOiIzMDIiLDMwMzoiMzAzIiwzMDQ6IjMwNCIsMzA1OiIzMDUiLDMwNzoiMzA3Iiw0MDA6IjQwMCIsNDAxOiI0MDEiLDQwMjoiNDAyIiw0MDM6IjQwMyIsNDA0OiI0MDQiLDQwNToiNDA1Iiw0MDY6IjQwNiIsNDA3OiI0MDciLDQwODoiNDA4Iiw0MDk6IjQwOSIsNDEwOiI0MTAiLDQxMToiNDExIiw0MTI6IjQxMiIsNDEzOiI0MTMiLDQxNDoiNDE0Iiw0MTU6IjQxNSIsNDE2OiI0MTYiLDQxNzoiNDE3Iiw0MjY6IjQyNiIsNTAwOiI1MDAiLDUwMToiNTAxIiw1MDI6IjUwMiIsNTAzOiI1MDMiLDUwNDoiNTA0Iiw1MDU6IjUwNSJ9KTtyLlJFU1BPTlNFX0NPREU9Yjt2YXIgdj1uKHsxMDA6IkNvbnRpbnVlIiwxMDE6IlN3aXRjaGluZyBQcm90b2NvbHMiLDIwMDoiT0siLDIwMToiQ3JlYXRlZCIsMjAyOiJBY2NlcHRlZCIsMjAzOiJOb24tQXV0aG9yaXRhdGl2ZSBJbmZvcm1hdGlvbiIsMjA0OiJObyBDb250ZW50IiwyMDU6IlJlc2V0IENvbnRlbnQiLDIwNjoiUGFydGlhbCBDb250ZW50IiwzMDA6Ik11bHRpcGxlIENob2ljZXMiLDMwMToiTW92ZWQgUGVybWFuZW50bHkiLDMwMjoiRm91bmQiLDMwMzoiU2VlIE90aGVyIiwzMDQ6Ik5vdCBNb2RpZmllZCIsMzA1OiJVc2UgUHJveHkiLDMwNzoiVGVtcG9yYXJ5IFJlZGlyZWN0Iiw0MDA6IkJhZCBSZXF1ZXN0Iiw0MDE6IlVuYXV0aG9yaXplZCIsNDAyOiJQYXltZW50IFJlcXVpcmVkIiw0MDM6IkZvcmJpZGRlbiIsNDA0OiJOb3QgRm91bmQiLDQwNToiTWV0aG9kIE5vdCBBbGxvd2VkIiw0MDY6Ik5vdCBBY2NlcHRhYmxlIiw0MDc6IlByb3h5IEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkIiw0MDg6IlJlcXVlc3QgVGltZW91dCIsNDA5OiJDb25mbGljdCIsNDEwOiJHb25lIiw0MTE6Ikxlbmd0aCBSZXF1aXJlZCIsNDEyOiJQcmVjb25kaXRpb24gRmFpbGVkIiw0MTM6IlBheWxvYWQgVG9vIExhcmdlIiw0MTQ6IlJlcXVlc3QtVVJJIFRvbyBMb25nIiw0MTU6IlVuc3VwcG9ydGVkIE1lZGlhIFR5cGUiLDQxNjoiUmFuZ2UgTm90IFNhdGlzZmlhYmxlIiw0MTc6IkV4cGVjdGF0aW9uIEZhaWxlZCIsNDI2OiJVcGdyYWRlIFJlcXVpcmVkIiw1MDA6IkludGVybmFsIFNlcnZlciBFcnJvciIsNTAxOiJOb3QgSW1wbGVtZW50ZWQiLDUwMjoiQmFkIEdhdGV3YXkiLDUwMzoiU2VydmljZSBVbmF2YWlsYWJsZSIsNTA0OiJHYXRld2F5IFRpbWUtb3V0Iiw1MDU6IkhUVFAgVmVyc2lvbiBOb3QgU3VwcG9ydGVkIn0pO3IuUkVBU09OX1BIUkFTRT12LHJbImRlZmF1bHQiXT1jfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZnJlZXplIjozLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTZ9XSwxMDk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL3JlZ2VuZXJhdG9yIilbImRlZmF1bHQiXSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBjPWUoIi4uL3JlVEhJTktPYmplY3QvUmV0aGlua09iamVjdC5qcyIpLGw9dShjKSxmPWUoIi4vTWVzc2FnZS5qcyIpLHA9dShmKSxoPWUoIi4vTWVzc2FnZUJvZHkuanMiKSxkPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUsciksdGhpcy5teUdlbmVyYXRvcj0obmV3IHkpLmlkTWFrZXIoKX1yZXR1cm4gbyh0LGUpLGkodCxbe2tleToidmFsaWRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksInZhbGlkYXRlIix0aGlzKS5jYWxsKHRoaXMsZSl9fSx7a2V5OiJjcmVhdGVDcmVhdGVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7aWYoIWV8fCF0fHwhcil0aHJvdyBuZXcgRXJyb3IoImZyb20sIHRvLCBhbmQgdmFsdWUgb2Ygb2JqZWN0IHRvIGJlIGNyZWF0ZWQgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBoLkNyZWF0ZU1lc3NhZ2VCb2R5KHIsbixudWxsLG51bGwsbnVsbCxudWxsLG51bGwpLHM9bmV3IHBbImRlZmF1bHQiXShvLGUsdCxmLk1lc3NhZ2VUeXBlLkNSRUFURSxpKTtyZXR1cm4gc319LHtrZXk6ImNyZWF0ZUZvcndhcmRNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2lmKCFlfHwhdHx8IXIpdGhyb3cgbmV3IEVycm9yKCJmcm9tLCB0bywgYW5kIG1lc3NhZ2UgdG8gZm9yd2FyZCBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBuPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLG89bmV3IGguRm9yd2FyZE1lc3NhZ2VCb2R5KG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxyKSxpPW5ldyBwWyJkZWZhdWx0Il0obixlLHQsZi5NZXNzYWdlVHlwZS5GT1JXQVJELG8pO3JldHVybiBpfX0se2tleToiY3JlYXRlRGVsZXRlTWVzc2FnZVJlcXVlc3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe2lmKCFlfHwhdCl0aHJvdyBuZXcgRXJyb3IoImZyb20gYW5kIHRvIHBhcmFtZXRlcnMgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBoLkRlbGV0ZU1lc3NhZ2VCb2R5KG51bGwsbnVsbCxyLG4sbnVsbCxudWxsKSxzPW5ldyBwWyJkZWZhdWx0Il0obyxlLHQsZi5NZXNzYWdlVHlwZS5ERUxFVEUsaSk7cmV0dXJuIHN9fSx7a2V5OiJjcmVhdGVVcGRhdGVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvKXtpZighZXx8IXR8fCFyKXRocm93IG5ldyBFcnJvcigiZnJvbSwgYW5kIHRvIGFuZCB2YWx1ZSBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBpPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLHM9bmV3IGguVXBkYXRlTWVzc2FnZUJvZHkobnVsbCxudWxsLG4sbnVsbCxudWxsLG8sciksYT1uZXcgcFsiZGVmYXVsdCJdKGksZSx0LGYuTWVzc2FnZVR5cGUuVVBEQVRFLHMpO3JldHVybiBhfX0se2tleToiY3JlYXRlUmVhZE1lc3NhZ2VSZXF1ZXN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZighZXx8IXR8fCFyKXRocm93IG5ldyBFcnJvcigiZnJvbSwgdG8gYW5kIHRoZSByZXNvdXJjZSB0byByZWFkIGZyb20gTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBoLlJlYWRNZXNzYWdlQm9keShudWxsLG51bGwscixudWxsLG51bGwsbixudWxsLG51bGwpLHM9bmV3IHBbImRlZmF1bHQiXShvLGUsdCxmLk1lc3NhZ2VUeXBlLlJFQUQsaSk7cmV0dXJuIHN9fSx7a2V5OiJjcmVhdGVTdWJzY3JpYmVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2lmKCFlfHwhdHx8IXIpdGhyb3cgbmV3IEVycm9yKCJmcm9tLCB0byBhbmQgdGhlIHJlc291cmNlIHRvIHN1YnNjcmliZSB0byBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBuPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLG89bmV3IGguTWVzc2FnZUJvZHkobnVsbCxudWxsLHIsbnVsbCxudWxsKSxpPW5ldyBwWyJkZWZhdWx0Il0obixlLHQsZi5NZXNzYWdlVHlwZS5TVUJTQ1JJQkUsbyk7cmV0dXJuIGl9fSx7a2V5OiJjcmVhdGVVbnN1YnNjcmliZU1lc3NhZ2VSZXF1ZXN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscil7aWYoIWV8fCF0fHwhcil0aHJvdyBuZXcgRXJyb3IoImZyb20sIHRvIGFuZCB0aGUgcmVzb3VyY2UgdG8gc3Vic2NyaWJlIHRvIE1VU1QgYmUgc3BlY2lmaWVkIik7dmFyIG49dGhpcy5teUdlbmVyYXRvci5uZXh0KCkudmFsdWUsbz1uZXcgaC5NZXNzYWdlQm9keShudWxsLG51bGwscixudWxsLG51bGwpLGk9bmV3IHBbImRlZmF1bHQiXShuLGUsdCxmLk1lc3NhZ2VUeXBlLlVOU1VCU0NSSUJFLG8pO3JldHVybiBpfX0se2tleToiY3JlYXRlTWVzc2FnZVJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoInJlc3BvbnNlIENvZGUgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz1uZXcgaC5SZXNwb25zZU1lc3NhZ2VCb2R5KG51bGwsbnVsbCxudWxsLHQscixuKTtyZXR1cm4gbmV3IHBbImRlZmF1bHQiXShlLmlkLGUudG8sZS5mcm9tLGYuTWVzc2FnZVR5cGUuUkVTUE9OU0Usbyl9fSx7a2V5OiJnZW5lcmF0ZU1lc3NhZ2VSZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2lmKCFlfHwhdCl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UgYW5kIHJlc3BvbnNlIGNvZGUgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbj1lLmJvZHksbz1uLmlkVG9rZW4saT1uLmFjY2Vzc1Rva2VuLHM9bi5yZXNvdXJjZSxhPW5ldyBoLlJlc3BvbnNlTWVzc2FnZUJvZHkobyxpLHMsdCxyKSx1PXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlO3JldHVybiBuZXcgcFsiZGVmYXVsdCJdKHUsZS50byxlLmZyb20sZi5NZXNzYWdlVHlwZS5SRVNQT05TRSxhKX19XSksdH0obFsiZGVmYXVsdCJdKSx5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ModGhpcyxlKX1yZXR1cm4gaShlLFt7a2V5OiJpZE1ha2VyIix2YWx1ZTphLm1hcmsoZnVuY3Rpb24gdCgpe3ZhciBlO3JldHVybiBhLndyYXAoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6ZT0xO2Nhc2UgMTppZighKDFlNT5lKSl7dC5uZXh0PTY7YnJlYWt9cmV0dXJuIHQubmV4dD00LGUrKztjYXNlIDQ6dC5uZXh0PTE7YnJlYWs7Y2FzZSA2OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSx0LHRoaXMpfSl9XSksZX0oKTtyLklkR2VuZXJhdG9yPXksclsiZGVmYXVsdCJdPWR9LHsiLi4vcmVUSElOS09iamVjdC9SZXRoaW5rT2JqZWN0LmpzIjoxMTAsIi4vTWVzc2FnZS5qcyI6MTA3LCIuL01lc3NhZ2VCb2R5LmpzIjoxMDgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjE1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3LCJiYWJlbC1ydW50aW1lL3JlZ2VuZXJhdG9yIjoyMH1dLDExMDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBzPWUoInR2NCIpLGE9aShzKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpe28odGhpcyxlKTt0aGlzLnZhbGlkYXRpb249dCx0aGlzLnNjaGVtYT1yfXJldHVybiBuKGUsW3trZXk6InZhbGlkYXRlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zY2hlbWE/YVsiZGVmYXVsdCJdLnZhbGlkYXRlKGUsdGhpcy5zY2hlbWEpOiExfX1dKSxlfSgpO3IuUmV0aGlua09iamVjdD11LHJbImRlZmF1bHQiXT11fSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTcsdHY0Ojk4fV0sMTExOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoIi4vY2F0YWxvZ3VlLWZhY3RvcnkvQ2F0YWxvZ3VlRGF0YU9iamVjdEZhY3RvcnkiKSxpPW4obykscz1lKCIuL21lc3NhZ2UtZmFjdG9yeS9NZXNzYWdlRmFjdG9yeSIpLGE9bihzKSx1PWUoIi4vc3luY2hlci9TeW5jaGVyIiksYz1uKHUpLGw9ZSgiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciIpLGY9bihsKSxwPWUoIi4vc3luY2hlci9EYXRhT2JqZWN0T2JzZXJ2ZXIiKSxoPW4ocCksZD1lKCIuL2NhdGFsb2d1ZS1mYWN0b3J5L0h5cGVydHlEZXNjcmlwdG9yIikseT1uKGQpLGI9ZSgiLi9jYXRhbG9ndWUtZmFjdG9yeS9Qcm90b2NvbFN0dWJEZXNjcmlwdG9yIiksdj1uKGIpLG09ZSgiLi9jYXRhbG9ndWUtZmFjdG9yeS9Tb3VyY2VQYWNrYWdlIiksZz1uKG0pO3IuQ2F0YWxvZ3VlRmFjdG9yeT1pWyJkZWZhdWx0Il0sci5NZXNzYWdlRmFjdG9yeT1hWyJkZWZhdWx0Il0sci5TeW5jaGVyPWNbImRlZmF1bHQiXSxyLkRhdGFPYmplY3RSZXBvcnRlcj1mWyJkZWZhdWx0Il0sci5EYXRhT2JqZWN0T2JzZXJ2ZXI9aFsiZGVmYXVsdCJdLHIuSHlwZXJ0eURlc2NyaXB0b3I9eVsiZGVmYXVsdCJdLHIuUHJvdG9jb2xTdHViRGVzY3JpcHRvcj12WyJkZWZhdWx0Il0sci5Tb3VyY2VQYWNrYWdlPWdbImRlZmF1bHQiXX0seyIuL2NhdGFsb2d1ZS1mYWN0b3J5L0NhdGFsb2d1ZURhdGFPYmplY3RGYWN0b3J5IjoxMDAsIi4vY2F0YWxvZ3VlLWZhY3RvcnkvSHlwZXJ0eURlc2NyaXB0b3IiOjEwMiwiLi9jYXRhbG9ndWUtZmFjdG9yeS9Qcm90b2NvbFN0dWJEZXNjcmlwdG9yIjoxMDUsIi4vY2F0YWxvZ3VlLWZhY3RvcnkvU291cmNlUGFja2FnZSI6MTA2LCIuL21lc3NhZ2UtZmFjdG9yeS9NZXNzYWdlRmFjdG9yeSI6MTA5LCIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIjoxMTQsIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiOjExNSwiLi9zeW5jaGVyL1N5bmNoZXIiOjExOCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxN31dLDExMjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuL1N5bmNPYmplY3QiKSxjPWEodSksbD1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGY9YShsKSxwPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4saSxzLGEpe28odGhpcyxlKTt2YXIgdT10aGlzO3UuX3N5bmNoZXI9dCx1Ll91cmw9cix1Ll9zY2hlbWE9bix1Ll9zdGF0dXM9aSx1Ll9zeW5jT2JqPW5ldyBjWyJkZWZhdWx0Il0ocyksdS5fY2hpbGRyZW5zPWEsdS5fdmVyc2lvbj0wLHUuX2NoaWxkSWQ9MCx1Ll9jaGlsZHJlbk9iamVjdHM9e30sdS5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sdS5fb3duZXI9dC5fb3duZXIsdS5fYnVzPXQuX2J1c31yZXR1cm4gbihlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMscj10Ll91cmwrIi9jaGlsZHJlbi8iO3QuX2NoaWxkcmVucyYmdC5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24obil7dmFyIG89cituLGk9dC5fYnVzLmFkZExpc3RlbmVyKG8sZnVuY3Rpb24ocil7aWYoY29uc29sZS5sb2coIkRhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAiLHIpLHIuZnJvbSE9PWUuX293bmVyKXN3aXRjaChyLnR5cGUpe2Nhc2UiY3JlYXRlIjp0Ll9vbkNoaWxkcmVuQ3JlYXRlKHIpO2JyZWFrO2Nhc2UiZGVsZXRlIjpjb25zb2xlLmxvZyhyKTticmVhaztkZWZhdWx0OnQuX2NoYW5nZUNoaWxkcmVuKHIpfX0pO3QuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goaSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSksaShlLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hpbGRyZW5PYmplY3RzW3RdLl9yZWxlYXNlTGlzdGVuZXJzKCl9KX19LHtrZXk6InBhdXNlIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJyZXN1bWUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InN0b3AiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6ImFkZENoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7ci5fY2hpbGRJZCsrO3ZhciBuPXIuX293bmVyKyIjIityLl9jaGlsZElkLG89ci5fdXJsKyIvY2hpbGRyZW4vIitlLGk9e3R5cGU6ImNyZWF0ZSIsZnJvbTpyLl9vd25lcix0bzpvLGJvZHk6e3Jlc291cmNlOm4sdmFsdWU6dH19O3JldHVybiBuZXcgcyhmdW5jdGlvbihlKXt2YXIgcz1yLl9idXMucG9zdE1lc3NhZ2UoaSk7Y29uc29sZS5sb2coImNyZWF0ZS1yZXBvcnRlci1jaGlsZCggIityLl9vd25lcisiICk6ICIsaSk7dmFyIGE9bmV3IGZbImRlZmF1bHQiXShyLHIuX293bmVyLG4scyx0KTthLm9uQ2hhbmdlKGZ1bmN0aW9uKGUpe3IuX29uQ2hhbmdlKGUse3BhdGg6byxjaGlsZElkOm59KX0pLHIuX2NoaWxkcmVuT2JqZWN0c1tuXT1hLGUoYSl9KX19LHtrZXk6Im9uQWRkQ2hpbGRyZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyPWV9fSx7a2V5OiJfb25DaGlsZHJlbkNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZTtjb25zb2xlLmxvZygiY3JlYXRlLW9ic2VydmVyLWNoaWxkKCAiK3QuX293bmVyKyIgKTogIixlKTt2YXIgbj1uZXcgZlsiZGVmYXVsdCJdKHQsZS5mcm9tLHIsMCxlLmJvZHkudmFsdWUpO3QuX2NoaWxkcmVuT2JqZWN0c1tyXT1uLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsc291cmNlOnQuX293bmVyfX0pfSk7dmFyIG89e3R5cGU6ZS50eXBlLGZyb206ZS5mcm9tLHVybDplLnRvLHZhbHVlOmUuYm9keS52YWx1ZSxjaGlsZElkOnJ9O3QuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiYoY29uc29sZS5sb2coIkFERC1DSElMRFJFTi1FVkVOVDogIixvKSx0Ll9vbkFkZENoaWxkcmVuSGFuZGxlcihvKSl9fSx7a2V5OiJfb25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl92ZXJzaW9uKyssIm9uIj09PXIuX3N0YXR1cyl7dmFyIG49e3R5cGU6InVwZGF0ZSIsZnJvbTpyLl91cmwsdG86ci5fdXJsKyIvY2hhbmdlcyIsYm9keTp7dmVyc2lvbjpyLl92ZXJzaW9uLGF0dHJpYnV0ZTplLmZpZWxkfX07ZS5vVHlwZT09PXUuT2JqZWN0VHlwZS5PQkpFQ1Q/ZS5jVHlwZSE9PXUuQ2hhbmdlVHlwZS5SRU1PVkUmJihuLmJvZHkudmFsdWU9ZS5kYXRhKToobi5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxuLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT11LkNoYW5nZVR5cGUuVVBEQVRFJiYobi5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKG4udG89dC5wYXRoLG4uYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLHIuX2J1cy5wb3N0TWVzc2FnZShuKX19fSx7a2V5OiJfY2hhbmdlT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5fdmVyc2lvbisxPT09dC5ib2R5LnZlcnNpb24pe3IuX3ZlcnNpb24rKzt2YXIgbj10LmJvZHkuYXR0cmlidXRlLG89KDAscC5kZWVwQ2xvbmUpKHQuYm9keS52YWx1ZSksaT1lLmZpbmRCZWZvcmUobik7aWYodC5ib2R5LmF0dHJpYnV0ZVR5cGU9PT11Lk9iamVjdFR5cGUuQVJSQVkpaWYodC5ib2R5Lm9wZXJhdGlvbj09PXUuQ2hhbmdlVHlwZS5BREQpe3ZhciBzPWkub2JqLGE9aS5sYXN0O0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkocyxbYSwwXS5jb25jYXQobykpfWVsc2UgaWYodC5ib2R5Lm9wZXJhdGlvbj09PXUuQ2hhbmdlVHlwZS5SRU1PVkUpe3ZhciBzPWkub2JqLGE9aS5sYXN0O3Muc3BsaWNlKGEsbyl9ZWxzZSBpLm9ialtpLmxhc3RdPW87ZWxzZSB0LmJvZHkudmFsdWU/aS5vYmpbaS5sYXN0XT1vOmRlbGV0ZSBpLm9ialtpLmxhc3RdfWVsc2UgY29uc29sZS5sb2coIlVOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICIrci5fdmVyc2lvbisiLCBtc2cgPT4gIit0LmJvZHkudmVyc2lvbisiKSIpfX0se2tleToiX2NoYW5nZUNoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NvbnNvbGUubG9nKCJDaGFuZ2UgY2hpbGRyZW46ICIsdC5fb3duZXIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlLG49dC5fY2hpbGRyZW5PYmplY3RzW3JdO24/dC5fY2hhbmdlT2JqZWN0KG4uX3N5bmNPYmosZSk6Y29uc29sZS5sb2coIk5vIGNoaWxkcmVuIGZvdW5kIGZvcjogIixyKX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYX19LHtrZXk6InN0YXR1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c319LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fSx7a2V5OiJjaGlsZHJlbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuT2JqZWN0c319XSksZX0oKTtyWyJkZWZhdWx0Il09aCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMTksIi4vRGF0YU9iamVjdENoaWxkIjoxMTMsIi4vU3luY09iamVjdCI6MTE3LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo4LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTEzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHM9ZSgiLi9TeW5jT2JqZWN0IiksYT1pKHMpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLGkscyl7byh0aGlzLGUpO3ZhciB1PXRoaXM7dS5fcGFyZW50PXQsdS5fb3duZXI9cix1Ll9jaGlsZElkPW4sdS5fbXNnSWQ9aSx1Ll9zeW5jT2JqPW5ldyBhWyJkZWZhdWx0Il0ocyksdS5fYnVzPXQuX2J1cyx1Ll9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybiBuKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9vd25lcixmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6Iix0KSxlLl9vblJlc3BvbnNlKHQpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2RlbGV0ZSBlLl9wYXJlbnQuX2NoaWxkcmVuW2UuX2NoaWxkSWRdLGUuX3JlbGVhc2VMaXN0ZW5lcnMoKX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24odCl7ZSh0KX0pfX0se2tleToib25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmJvZHkuc291cmNlLGNvZGU6ZS5ib2R5LmNvZGV9O3QuX29uUmVzcG9uc2VIYW5kbGVyJiZ0Ll9vblJlc3BvbnNlSGFuZGxlcihyKX19LHtrZXk6ImNoaWxkSWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZElkfX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19XSksZX0oKTtyWyJkZWZhdWx0Il09dSx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vU3luY09iamVjdCI6MTE3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTE0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIilbImRlZmF1bHQiXSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYz1lKCIuL0RhdGFPYmplY3QiKSxsPXUoYyksZj17QU5ZOiJhbnkiLFNUQVJUOiJzdGFydCIsRVhBQ1Q6ImV4YWN0In0scD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLGksYSx1LGMpe3ModGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8saSxhLHUpO3ZhciBsPXRoaXM7bC5fdmVyc2lvbj1jLGwuX2ZpbHRlcnM9e30sbC5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uKGUpe2wuX29uRmlsdGVyKGUpfSksbC5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4gbyh0LGUpLGkodCxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe24oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiX2FsbG9jYXRlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCsiL2NoYW5nZXMiLGZ1bmN0aW9uKHQpeyJ1cGRhdGUiPT09dC50eXBlJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VPYmplY3QoZS5fc3luY09iaix0KSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe24oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiX3JlbGVhc2VMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF19fSx7a2V5OiJ1bnN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9vYnNlcnZlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsbj17dHlwZTpmLkVYQUNULGNhbGxiYWNrOnR9LG89ZS5pbmRleE9mKCIqIik7bz09PWUubGVuZ3RoLTEmJigwPT09bz9uLnR5cGU9Zi5BTlk6KG4udHlwZT1mLlNUQVJULHI9ZS5zdWJzdHIoMCxlLmxlbmd0aC0xKSkpLHRoaXMuX2ZpbHRlcnNbcl09bn19LHtrZXk6Il9vbkZpbHRlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczthKHQuX2ZpbHRlcnMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fZmlsdGVyc1tyXTtuLnR5cGU9PT1mLkFOWT9uLmNhbGxiYWNrKGUpOm4udHlwZT09PWYuU1RBUlQ/MD09PWUuZmllbGQuaW5kZXhPZihyKSYmbi5jYWxsYmFjayhlKTpuLnR5cGU9PT1mLkVYQUNUJiZlLmZpZWxkPT09ciYmbi5jYWxsYmFjayhlKX0pfX1dKSx0fShsWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT1wLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0IjoxMTIsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMTU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuL0RhdGFPYmplY3QiKSxjPWEodSksbD1lKCIuLi91dGlscy91dGlscy5qcyIpLGY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbyxpLGEsdSl7cyh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxpLGEsdSk7dmFyIGM9dGhpcztjLl9zdWJzY3JpcHRpb25zPXt9LGMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLSIrcisiLVNFTkQ6ICIsZSksYy5fb25DaGFuZ2UoZSl9KSxjLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybiBvKHQsZSksaSh0LFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7bihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9yZXNwb25zZUxpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7InJlc3BvbnNlIj09PXQudHlwZSYmZS5fb25SZXNwb25zZSh0KX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7bihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJfcmVsZWFzZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX3Jlc3BvbnNlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJkZWxldGUiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9yZXBvcnRlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXI9ZX19LHtrZXk6Im9uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5OiJfb25Gb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogIixlKSxlLmJvZHkudHlwZSl7Y2FzZSJzdWJzY3JpYmUiOnQuX29uU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnQuX29uVW5TdWJzY3JpYmUoZSl9fX0se2tleToiX29uU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmZyb20sbj17dHlwZTplLmJvZHkudHlwZSx1cmw6cixhY2NlcHQ6ZnVuY3Rpb24oKXt2YXIgbj17dXJsOnIsc3RhdHVzOiJvbiJ9O3JldHVybiB0Ll9zdWJzY3JpcHRpb25zW3JdPW4sdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNjaGVtYTp0Ll9zY2hlbWEsdmVyc2lvbjp0Ll92ZXJzaW9uLHZhbHVlOigwLGwuZGVlcENsb25lKSh0LmRhdGEpfX0pLG59LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDMsZGVzYzpyfX0pfX07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlNVQlNDUklQVElPTi1FVkVOVDogIixuKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXQuX3N1YnNjcmlwdGlvbnNbcl07ZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl07dmFyIG89e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOnIsb2JqZWN0Om59O3QuX29uU3Vic2NyaXB0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJVTi1TVUJTQ1JJUFRJT04tRVZFTlQ6ICIsbyksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKG8pKX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJihjb25zb2xlLmxvZygiUkVTUE9OU0UtRVZFTlQ6ICIsciksdC5fb25SZXNwb25zZUhhbmRsZXIocikpfX0se2tleToic3Vic2NyaXB0aW9ucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbnN9fV0pLHR9KGNbImRlZmF1bHQiXSk7clsiZGVmYXVsdCJdPWYsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTE5LCIuL0RhdGFPYmplY3QiOjExMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMTY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixpKXtvKHRoaXMsZSk7dmFyIHM9dGhpcztzLl9vd25lcj10LHMuX3VybD1yLHMuX2J1cz1uLHMuX2NoaWxkcmVuPWkscy5fY2hhbmdlcz1bXSxzLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybiBuKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFQcm92aXNpb25hbC0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VzLnB1c2godCl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJhcHBseSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCl9KX19LHtrZXk6ImNoaWxkcmVuIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW59fV0pLGV9KCk7clsiZGVmYXVsdCJdPWksdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzfV0sMTE3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHM9ZSgiLi4vdXRpbHMvdXRpbHMuanMiKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSk7dmFyIHI9dGhpcztyLl9vYnNlcnZlcnM9W10sci5fZmlsdGVycz17fSx0P3IuX2RhdGE9KDAscy5kZWVwQ2xvbmUpKHQpOnIuX2RhdGE9e30sci5faW50ZXJuYWxPYnNlcnZlKG5ldyB1LHIuX2RhdGEpfXJldHVybiBuKGUsW3trZXk6Im9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5wdXNoKGUpfX0se2tleToiZmluZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLiIpO3JldHVybiB0aGlzLl9maW5kV2l0aFNwbGl0KHQpfX0se2tleToiZmluZEJlZm9yZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30scj1lLnNwbGl0KCIuIik7cmV0dXJuIHQubGFzdD1yLnBvcCgpLHQub2JqPXRoaXMuX2ZpbmRXaXRoU3BsaXQociksdH19LHtrZXk6Il9maW5kV2l0aFNwbGl0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dD10W2VdfSksdH19LHtrZXk6Il9maXJlRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX19LHtrZXk6Il9pc09ic2VydmFibGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnN0cnVjdG9yPT09T2JqZWN0fHxlLmNvbnN0cnVjdG9yPT09QXJyYXk/ITA6ITF9fSx7a2V5OiJfaW50ZXJuYWxPYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbj1mdW5jdGlvbih0KXtyLl9vbkNoYW5nZXMoZSx0KX07aWYodC5jb25zdHJ1Y3Rvcj09PU9iamVjdCl7T2JqZWN0Lm9ic2VydmUodCxuKTtmb3IodmFyIG8gaW4gdClyLl9pc09ic2VydmFibGUodFtvXSkmJnIuX2ludGVybmFsT2JzZXJ2ZShlWyJuZXciXShvKSx0W29dKX1lbHNlIGlmKHQuY29uc3RydWN0b3I9PT1BcnJheSl7QXJyYXkub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgbyBpbiB0KWlmKHIuX2lzT2JzZXJ2YWJsZSh0W29dKSl7dmFyIGk9ZVsibmV3Il0obmV3IGModFtvXSxvKSk7ci5faW50ZXJuYWxPYnNlcnZlKGksdFtvXSl9fX19fSx7a2V5OiJfb25DaGFuZ2VzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7Zm9yKHZhciBuIGluIHQpe3ZhciBvPXRbbl0ub2JqZWN0LGk9dm9pZCAwO2lmKG8uY29uc3RydWN0b3I9PT1PYmplY3QmJihpPWYuT0JKRUNUKSxvLmNvbnN0cnVjdG9yPT09QXJyYXkmJihpPWYuQVJSQVkpLCJzcGxpY2UiPT09dFtuXS50eXBlKSFmdW5jdGlvbigpe3ZhciBhPXRbbl0uaW5kZXgsdT1lWyJuZXciXSgiIithKSxmPXUudG9TdHJpbmcoKSxwPXRbbl0ucmVtb3ZlZC5sZW5ndGg7aWYoMCE9PXApe3ZhciBoPXRbbl0ucmVtb3ZlZDtoLmZvckVhY2goZnVuY3Rpb24odCxuKXtyLl9pc09ic2VydmFibGUodCkmJmUucmVtb3ZlSW5kZXgoYStuKX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6bC5SRU1PVkUsb1R5cGU6aSxmaWVsZDpmLGRhdGE6cH0pfXZhciBkPXRbbl0uYWRkZWRDb3VudDtpZigwIT09ZCl7dmFyIHk9by5zbGljZShhLGErZCk7eS5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbz1lWyJuZXciXShuZXcgYyh0LGErbikpO3IuX2ludGVybmFsT2JzZXJ2ZShvLHQpfX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6bC5BREQsb1R5cGU6aSxmaWVsZDpmLGRhdGE6KDAscy5kZWVwQ2xvbmUpKHkpfSl9YSE9PW8ubGVuZ3RoLTEmJmUucmVJbmRleEZyb20obyl9KCk7ZWxzZXt2YXIgYT1lWyJuZXciXSh0W25dLm5hbWUpLHU9YS50b1N0cmluZygpO2lmKC0xIT09dS5pbmRleE9mKCJTeW1ib2wiKSljb250aW51ZTt2YXIgcD1vW3Rbbl0ubmFtZV07InVwZGF0ZSI9PT10W25dLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6bC5VUERBVEUsb1R5cGU6aSxmaWVsZDp1LGRhdGE6KDAscy5kZWVwQ2xvbmUpKHApfSksImFkZCI9PT10W25dLnR5cGUmJih0aGlzLl9pbnRlcm5hbE9ic2VydmUoYSxwKSx0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmwuQURELG9UeXBlOmksZmllbGQ6dSxkYXRhOigwLHMuZGVlcENsb25lKShwKX0pKSwiZGVsZXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpsLlJFTU9WRSxvVHlwZTppLGZpZWxkOnV9KX19fX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fV0pLGV9KCksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtvKHRoaXMsZSksdGhpcy5fcGF0aD1bXSx0aGlzLl9vYnNlcnZhYmxlcz17fX1yZXR1cm4gbihlLFt7a2V5OiJyZW1vdmVJbmRleCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuX29ic2VydmFibGVzW2VdfX0se2tleToicmVJbmRleEZyb20iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aSh0aGlzLl9vYnNlcnZhYmxlcykuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj10Ll9vYnNlcnZhYmxlc1tyXSxvPWUuaW5kZXhPZihuLm9iaik7bi5pZHghPW8mJihuLmlkeD1vLGRlbGV0ZSB0Ll9vYnNlcnZhYmxlc1tyXSx0Ll9vYnNlcnZhYmxlc1tvXT1uKX0pfX0se2tleToibmV3Iix2YWx1ZTpmdW5jdGlvbihlKXtlLmNvbnN0cnVjdG9yPT1jJiYodGhpcy5fb2JzZXJ2YWJsZXNbZS5pZHhdPWUpO3ZhciB0PXRoaXMuY2xvbmUoKTtyZXR1cm4gdC5fcGF0aC5wdXNoKGUpLHR9fSx7a2V5OiJjbG9uZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZTtyZXR1cm4gdGhpcy5fcGF0aC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX3BhdGgucHVzaChlKX0pLHR9fSx7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0iIjtyZXR1cm4gdGhpcy5fcGF0aC5mb3JFYWNoKGZ1bmN0aW9uKHQscil7MD09PXI/ZT10LnRvU3RyaW5nKCk6ZSs9Ii4iK3QudG9TdHJpbmcoKX0pLGV9fV0pLGV9KCksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyKXtvKHRoaXMsZSksdGhpcy5vYmo9dCx0aGlzLmlkeD1yfXJldHVybiBuKGUsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkeC50b1N0cmluZygpfX1dKSxlfSgpLGw9e1VQREFURToidXBkYXRlIixBREQ6ImFkZCIsUkVNT1ZFOiJyZW1vdmUifTtyLkNoYW5nZVR5cGU9bDt2YXIgZj17T0JKRUNUOiJvYmplY3QiLEFSUkFZOiJhcnJheSJ9O3IuT2JqZWN0VHlwZT1mLHJbImRlZmF1bHQiXT1hfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMTksImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxM31dLDExODpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIilbImRlZmF1bHQiXSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBhPWUoIi4vRGF0YU9iamVjdFJlcG9ydGVyIiksdT1zKGEpLGM9ZSgiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiKSxsPXMoYyksZj1lKCIuL0RhdGFQcm92aXNpb25hbCIpLHA9cyhmKSxoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbil7byh0aGlzLGUpO3ZhciBpPXRoaXM7aS5fb3duZXI9dCxpLl9idXM9cixpLl9zdWJVUkw9bi5ydW50aW1lVVJMKyIvc20iLGkuX3JlcG9ydGVycz17fSxpLl9vYnNlcnZlcnM9e30saS5fcHJvdmlzaW9uYWxzPXt9LHIuYWRkTGlzdGVuZXIodCxmdW5jdGlvbihlKXtzd2l0Y2goY29uc29sZS5sb2coIlN5bmNoZXItUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJmb3J3YXJkIjppLl9vbkZvcndhcmQoZSk7YnJlYWs7Y2FzZSJjcmVhdGUiOmkuX29uUmVtb3RlQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjppLl9vblJlbW90ZURlbGV0ZShlKX19KX1yZXR1cm4gbihlLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLG89e3R5cGU6ImNyZWF0ZSIsZnJvbTpuLl9vd25lcix0bzpuLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUsdmFsdWU6cixhdXRob3Jpc2U6dH19O3JldHVybiBuZXcgaShmdW5jdGlvbih0LGkpe24uX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKG8pe2lmKGNvbnNvbGUubG9nKCJjcmVhdGUtcmVzcG9uc2U6ICIsbyksMjAwPT09by5ib2R5LmNvZGUpe3ZhciBzPW8uYm9keS5yZXNvdXJjZSxhPW5ldyB1WyJkZWZhdWx0Il0obixzLGUsIm9uIixyLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyk7bi5fcmVwb3J0ZXJzW3NdPWEsdChhKX1lbHNlIGkoby5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e3R5cGU6InN1YnNjcmliZSIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUscmVzb3VyY2U6dH19O3JldHVybiBuZXcgaShmdW5jdGlvbihvLGkpe3IuX2J1cy5wb3N0TWVzc2FnZShuLGZ1bmN0aW9uKG4pe2NvbnNvbGUubG9nKCJzdWJzY3JpYmUtcmVzcG9uc2U6ICIsbik7dmFyIHM9ci5fcHJvdmlzaW9uYWxzW3RdO2lmKGRlbGV0ZSByLl9wcm92aXNpb25hbHNbdF0scyYmcy5fcmVsZWFzZUxpc3RlbmVycygpLG4uYm9keS5jb2RlPDIwMClzPW5ldyBwWyJkZWZhdWx0Il0oci5fb3duZXIsdCxyLl9idXMsbi5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKSxyLl9wcm92aXNpb25hbHNbdF09cztlbHNlIGlmKDIwMD09PW4uYm9keS5jb2RlKXt2YXIgYT1uZXcgbFsiZGVmYXVsdCJdKHIsdCxlLCJvbiIsbi5ib2R5LnZhbHVlLHMuY2hpbGRyZW4sbi5ib2R5LnZlcnNpb24pO3IuX29ic2VydmVyc1t0XT1hLG8oYSkscy5hcHBseShhKX1lbHNlIGkobi5ib2R5LmRlc2MpfSl9KX19LHtrZXk6Im9uTm90aWZpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10Ll9yZXBvcnRlcnNbZS5ib2R5LnRvXTtyLl9vbkZvcndhcmQoZSl9fSx7a2V5OiJfb25SZW1vdGVDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20uc2xpY2UoMCwtMTMpLG49e3R5cGU6ZS50eXBlLGZyb206ZS5ib2R5LnNvdXJjZSx1cmw6cixzY2hlbWE6ZS5ib2R5LnNjaGVtYSx2YWx1ZTplLmJvZHkudmFsdWUsaWRlbnRpdHk6ZS5ib2R5LmlkVG9rZW4sYWNrOmZ1bmN0aW9uKHIpe3ZhciBuPTIwMDtyJiYobj1yKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpufX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixuKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uUmVtb3RlRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fb2JzZXJ2ZXJzW3JdO2lmKG4pe3ZhciBvPXt0eXBlOmUudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRUb2tlbixhY2s6ZnVuY3Rpb24ocil7dmFyIG89MjAwO3ImJihvPXIpLDIwMD09PW8mJm5bImRlbGV0ZSJdKCksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6byxzb3VyY2U6dC5fb3duZXJ9fSl9fTt0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiTk9USUZJQ0FUSU9OLUVWRU5UOiAiLG8pLHQuX29uTm90aWZpY2F0aW9uSGFuZGxlcihvKSl9ZWxzZSB0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDQsc291cmNlOnQuX293bmVyfX0pfX0se2tleToib3duZXIiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vd25lcn19LHtrZXk6InJlcG9ydGVycyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcG9ydGVyc319LHtrZXk6Im9ic2VydmVycyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29ic2VydmVyc319XSksZX0oKTtyWyJkZWZhdWx0Il09aCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdE9ic2VydmVyIjoxMTQsIi4vRGF0YU9iamVjdFJlcG9ydGVyIjoxMTUsIi4vRGF0YVByb3Zpc2lvbmFsIjoxMTYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo4LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTE5OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTp2b2lkIDB9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuZGl2aWRlVVJMPW4sci5kZWVwQ2xvbmU9b30se31dfSx7fSxbMTExXSkoMTExKX0pOwp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sMTYyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBwcm90b3R5cGUgY2xhc3MgZm9yIGhhc2ggZnVuY3Rpb25zCmZ1bmN0aW9uIEhhc2ggKGJsb2NrU2l6ZSwgZmluYWxTaXplKSB7CiAgdGhpcy5fYmxvY2sgPSBuZXcgQnVmZmVyKGJsb2NrU2l6ZSkKICB0aGlzLl9maW5hbFNpemUgPSBmaW5hbFNpemUKICB0aGlzLl9ibG9ja1NpemUgPSBibG9ja1NpemUKICB0aGlzLl9sZW4gPSAwCiAgdGhpcy5fcyA9IDAKfQoKSGFzaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRhdGEsIGVuYykgewogIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgIGVuYyA9IGVuYyB8fCAndXRmOCcKICAgIGRhdGEgPSBuZXcgQnVmZmVyKGRhdGEsIGVuYykKICB9CgogIHZhciBsID0gdGhpcy5fbGVuICs9IGRhdGEubGVuZ3RoCiAgdmFyIHMgPSB0aGlzLl9zIHx8IDAKICB2YXIgZiA9IDAKICB2YXIgYnVmZmVyID0gdGhpcy5fYmxvY2sKCiAgd2hpbGUgKHMgPCBsKSB7CiAgICB2YXIgdCA9IE1hdGgubWluKGRhdGEubGVuZ3RoLCBmICsgdGhpcy5fYmxvY2tTaXplIC0gKHMgJSB0aGlzLl9ibG9ja1NpemUpKQogICAgdmFyIGNoID0gKHQgLSBmKQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2g7IGkrKykgewogICAgICBidWZmZXJbKHMgJSB0aGlzLl9ibG9ja1NpemUpICsgaV0gPSBkYXRhW2kgKyBmXQogICAgfQoKICAgIHMgKz0gY2gKICAgIGYgKz0gY2gKCiAgICBpZiAoKHMgJSB0aGlzLl9ibG9ja1NpemUpID09PSAwKSB7CiAgICAgIHRoaXMuX3VwZGF0ZShidWZmZXIpCiAgICB9CiAgfQogIHRoaXMuX3MgPSBzCgogIHJldHVybiB0aGlzCn0KCkhhc2gucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uIChlbmMpIHsKICAvLyBTdXBwb3NlIHRoZSBsZW5ndGggb2YgdGhlIG1lc3NhZ2UgTSwgaW4gYml0cywgaXMgbAogIHZhciBsID0gdGhpcy5fbGVuICogOAoKICAvLyBBcHBlbmQgdGhlIGJpdCAxIHRvIHRoZSBlbmQgb2YgdGhlIG1lc3NhZ2UKICB0aGlzLl9ibG9ja1t0aGlzLl9sZW4gJSB0aGlzLl9ibG9ja1NpemVdID0gMHg4MAoKICAvLyBhbmQgdGhlbiBrIHplcm8gYml0cywgd2hlcmUgayBpcyB0aGUgc21hbGxlc3Qgbm9uLW5lZ2F0aXZlIHNvbHV0aW9uIHRvIHRoZSBlcXVhdGlvbiAobCArIDEgKyBrKSA9PT0gZmluYWxTaXplIG1vZCBibG9ja1NpemUKICB0aGlzLl9ibG9jay5maWxsKDAsIHRoaXMuX2xlbiAlIHRoaXMuX2Jsb2NrU2l6ZSArIDEpCgogIGlmIChsICUgKHRoaXMuX2Jsb2NrU2l6ZSAqIDgpID49IHRoaXMuX2ZpbmFsU2l6ZSAqIDgpIHsKICAgIHRoaXMuX3VwZGF0ZSh0aGlzLl9ibG9jaykKICAgIHRoaXMuX2Jsb2NrLmZpbGwoMCkKICB9CgogIC8vIHRvIHRoaXMgYXBwZW5kIHRoZSBibG9jayB3aGljaCBpcyBlcXVhbCB0byB0aGUgbnVtYmVyIGwgd3JpdHRlbiBpbiBiaW5hcnkKICAvLyBUT0RPOiBoYW5kbGUgY2FzZSB3aGVyZSBsIGlzID4gTWF0aC5wb3coMiwgMjkpCiAgdGhpcy5fYmxvY2sud3JpdGVJbnQzMkJFKGwsIHRoaXMuX2Jsb2NrU2l6ZSAtIDQpCgogIHZhciBoYXNoID0gdGhpcy5fdXBkYXRlKHRoaXMuX2Jsb2NrKSB8fCB0aGlzLl9oYXNoKCkKCiAgcmV0dXJuIGVuYyA/IGhhc2gudG9TdHJpbmcoZW5jKSA6IGhhc2gKfQoKSGFzaC5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ191cGRhdGUgbXVzdCBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzcycpCn0KCm1vZHVsZS5leHBvcnRzID0gSGFzaAoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzZ9XSwxNjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gU0hBIChhbGdvcml0aG0pIHsKICBhbGdvcml0aG0gPSBhbGdvcml0aG0udG9Mb3dlckNhc2UoKQoKICB2YXIgQWxnb3JpdGhtID0gZXhwb3J0c1thbGdvcml0aG1dCiAgaWYgKCFBbGdvcml0aG0pIHRocm93IG5ldyBFcnJvcihhbGdvcml0aG0gKyAnIGlzIG5vdCBzdXBwb3J0ZWQgKHdlIGFjY2VwdCBwdWxsIHJlcXVlc3RzKScpCgogIHJldHVybiBuZXcgQWxnb3JpdGhtKCkKfQoKZXhwb3J0cy5zaGEgPSByZXF1aXJlKCcuL3NoYScpCmV4cG9ydHMuc2hhMSA9IHJlcXVpcmUoJy4vc2hhMScpCmV4cG9ydHMuc2hhMjI0ID0gcmVxdWlyZSgnLi9zaGEyMjQnKQpleHBvcnRzLnNoYTI1NiA9IHJlcXVpcmUoJy4vc2hhMjU2JykKZXhwb3J0cy5zaGEzODQgPSByZXF1aXJlKCcuL3NoYTM4NCcpCmV4cG9ydHMuc2hhNTEyID0gcmVxdWlyZSgnLi9zaGE1MTInKQoKfSx7Ii4vc2hhIjoxNjQsIi4vc2hhMSI6MTY1LCIuL3NoYTIyNCI6MTY2LCIuL3NoYTI1NiI6MTY3LCIuL3NoYTM4NCI6MTY4LCIuL3NoYTUxMiI6MTY5fV0sMTY0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKgogKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNlY3VyZSBIYXNoIEFsZ29yaXRobSwgU0hBLTAsIGFzIGRlZmluZWQKICogaW4gRklQUyBQVUIgMTgwLTEKICogVGhpcyBzb3VyY2UgY29kZSBpcyBkZXJpdmVkIGZyb20gc2hhMS5qcyBvZiB0aGUgc2FtZSByZXBvc2l0b3J5LgogKiBUaGUgZGlmZmVyZW5jZSBiZXR3ZWVuIFNIQS0wIGFuZCBTSEEtMSBpcyBqdXN0IGEgYml0d2lzZSByb3RhdGUgbGVmdAogKiBvcGVyYXRpb24gd2FzIGFkZGVkLgogKi8KCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIEsgPSBbCiAgMHg1YTgyNzk5OSwgMHg2ZWQ5ZWJhMSwgMHg4ZjFiYmNkYyB8IDAsIDB4Y2E2MmMxZDYgfCAwCl0KCnZhciBXID0gbmV3IEFycmF5KDgwKQoKZnVuY3Rpb24gU2hhICgpIHsKICB0aGlzLmluaXQoKQogIHRoaXMuX3cgPSBXCgogIEhhc2guY2FsbCh0aGlzLCA2NCwgNTYpCn0KCmluaGVyaXRzKFNoYSwgSGFzaCkKClNoYS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLl9hID0gMHg2NzQ1MjMwMQogIHRoaXMuX2IgPSAweGVmY2RhYjg5CiAgdGhpcy5fYyA9IDB4OThiYWRjZmUKICB0aGlzLl9kID0gMHgxMDMyNTQ3NgogIHRoaXMuX2UgPSAweGMzZDJlMWYwCgogIHJldHVybiB0aGlzCn0KCmZ1bmN0aW9uIHJvdGw1IChudW0pIHsKICByZXR1cm4gKG51bSA8PCA1KSB8IChudW0gPj4+IDI3KQp9CgpmdW5jdGlvbiByb3RsMzAgKG51bSkgewogIHJldHVybiAobnVtIDw8IDMwKSB8IChudW0gPj4+IDIpCn0KCmZ1bmN0aW9uIGZ0IChzLCBiLCBjLCBkKSB7CiAgaWYgKHMgPT09IDApIHJldHVybiAoYiAmIGMpIHwgKCh+YikgJiBkKQogIGlmIChzID09PSAyKSByZXR1cm4gKGIgJiBjKSB8IChiICYgZCkgfCAoYyAmIGQpCiAgcmV0dXJuIGIgXiBjIF4gZAp9CgpTaGEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoTSkgewogIHZhciBXID0gdGhpcy5fdwoKICB2YXIgYSA9IHRoaXMuX2EgfCAwCiAgdmFyIGIgPSB0aGlzLl9iIHwgMAogIHZhciBjID0gdGhpcy5fYyB8IDAKICB2YXIgZCA9IHRoaXMuX2QgfCAwCiAgdmFyIGUgPSB0aGlzLl9lIHwgMAoKICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIFdbaV0gPSBNLnJlYWRJbnQzMkJFKGkgKiA0KQogIGZvciAoOyBpIDwgODA7ICsraSkgV1tpXSA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl0KCiAgZm9yICh2YXIgaiA9IDA7IGogPCA4MDsgKytqKSB7CiAgICB2YXIgcyA9IH5+KGogLyAyMCkKICAgIHZhciB0ID0gKHJvdGw1KGEpICsgZnQocywgYiwgYywgZCkgKyBlICsgV1tqXSArIEtbc10pIHwgMAoKICAgIGUgPSBkCiAgICBkID0gYwogICAgYyA9IHJvdGwzMChiKQogICAgYiA9IGEKICAgIGEgPSB0CiAgfQoKICB0aGlzLl9hID0gKGEgKyB0aGlzLl9hKSB8IDAKICB0aGlzLl9iID0gKGIgKyB0aGlzLl9iKSB8IDAKICB0aGlzLl9jID0gKGMgKyB0aGlzLl9jKSB8IDAKICB0aGlzLl9kID0gKGQgKyB0aGlzLl9kKSB8IDAKICB0aGlzLl9lID0gKGUgKyB0aGlzLl9lKSB8IDAKfQoKU2hhLnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgSCA9IG5ldyBCdWZmZXIoMjApCgogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2EgfCAwLCAwKQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2IgfCAwLCA0KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2MgfCAwLCA4KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2QgfCAwLCAxMikKICBILndyaXRlSW50MzJCRSh0aGlzLl9lIHwgMCwgMTYpCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjoxNjIsImJ1ZmZlciI6NzYsImluaGVyaXRzIjoxMjl9XSwxNjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8qCiAqIEEgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgU2VjdXJlIEhhc2ggQWxnb3JpdGhtLCBTSEEtMSwgYXMgZGVmaW5lZAogKiBpbiBGSVBTIFBVQiAxODAtMQogKiBWZXJzaW9uIDIuMWEgQ29weXJpZ2h0IFBhdWwgSm9obnN0b24gMjAwMCAtIDIwMDIuCiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXQKICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlCiAqIFNlZSBodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1IGZvciBkZXRhaWxzLgogKi8KCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIEsgPSBbCiAgMHg1YTgyNzk5OSwgMHg2ZWQ5ZWJhMSwgMHg4ZjFiYmNkYyB8IDAsIDB4Y2E2MmMxZDYgfCAwCl0KCnZhciBXID0gbmV3IEFycmF5KDgwKQoKZnVuY3Rpb24gU2hhMSAoKSB7CiAgdGhpcy5pbml0KCkKICB0aGlzLl93ID0gVwoKICBIYXNoLmNhbGwodGhpcywgNjQsIDU2KQp9Cgppbmhlcml0cyhTaGExLCBIYXNoKQoKU2hhMS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLl9hID0gMHg2NzQ1MjMwMQogIHRoaXMuX2IgPSAweGVmY2RhYjg5CiAgdGhpcy5fYyA9IDB4OThiYWRjZmUKICB0aGlzLl9kID0gMHgxMDMyNTQ3NgogIHRoaXMuX2UgPSAweGMzZDJlMWYwCgogIHJldHVybiB0aGlzCn0KCmZ1bmN0aW9uIHJvdGwxIChudW0pIHsKICByZXR1cm4gKG51bSA8PCAxKSB8IChudW0gPj4+IDMxKQp9CgpmdW5jdGlvbiByb3RsNSAobnVtKSB7CiAgcmV0dXJuIChudW0gPDwgNSkgfCAobnVtID4+PiAyNykKfQoKZnVuY3Rpb24gcm90bDMwIChudW0pIHsKICByZXR1cm4gKG51bSA8PCAzMCkgfCAobnVtID4+PiAyKQp9CgpmdW5jdGlvbiBmdCAocywgYiwgYywgZCkgewogIGlmIChzID09PSAwKSByZXR1cm4gKGIgJiBjKSB8ICgofmIpICYgZCkKICBpZiAocyA9PT0gMikgcmV0dXJuIChiICYgYykgfCAoYiAmIGQpIHwgKGMgJiBkKQogIHJldHVybiBiIF4gYyBeIGQKfQoKU2hhMS5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChNKSB7CiAgdmFyIFcgPSB0aGlzLl93CgogIHZhciBhID0gdGhpcy5fYSB8IDAKICB2YXIgYiA9IHRoaXMuX2IgfCAwCiAgdmFyIGMgPSB0aGlzLl9jIHwgMAogIHZhciBkID0gdGhpcy5fZCB8IDAKICB2YXIgZSA9IHRoaXMuX2UgfCAwCgogIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkgV1tpXSA9IE0ucmVhZEludDMyQkUoaSAqIDQpCiAgZm9yICg7IGkgPCA4MDsgKytpKSBXW2ldID0gcm90bDEoV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XSkKCiAgZm9yICh2YXIgaiA9IDA7IGogPCA4MDsgKytqKSB7CiAgICB2YXIgcyA9IH5+KGogLyAyMCkKICAgIHZhciB0ID0gKHJvdGw1KGEpICsgZnQocywgYiwgYywgZCkgKyBlICsgV1tqXSArIEtbc10pIHwgMAoKICAgIGUgPSBkCiAgICBkID0gYwogICAgYyA9IHJvdGwzMChiKQogICAgYiA9IGEKICAgIGEgPSB0CiAgfQoKICB0aGlzLl9hID0gKGEgKyB0aGlzLl9hKSB8IDAKICB0aGlzLl9iID0gKGIgKyB0aGlzLl9iKSB8IDAKICB0aGlzLl9jID0gKGMgKyB0aGlzLl9jKSB8IDAKICB0aGlzLl9kID0gKGQgKyB0aGlzLl9kKSB8IDAKICB0aGlzLl9lID0gKGUgKyB0aGlzLl9lKSB8IDAKfQoKU2hhMS5wcm90b3R5cGUuX2hhc2ggPSBmdW5jdGlvbiAoKSB7CiAgdmFyIEggPSBuZXcgQnVmZmVyKDIwKQoKICBILndyaXRlSW50MzJCRSh0aGlzLl9hIHwgMCwgMCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9iIHwgMCwgNCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9jIHwgMCwgOCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9kIHwgMCwgMTIpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZSB8IDAsIDE2KQoKICByZXR1cm4gSAp9Cgptb2R1bGUuZXhwb3J0cyA9IFNoYTEKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2hhc2giOjE2MiwiYnVmZmVyIjo3NiwiaW5oZXJpdHMiOjEyOX1dLDE2NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLyoqCiAqIEEgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgU2VjdXJlIEhhc2ggQWxnb3JpdGhtLCBTSEEtMjU2LCBhcyBkZWZpbmVkCiAqIGluIEZJUFMgMTgwLTIKICogVmVyc2lvbiAyLjItYmV0YSBDb3B5cmlnaHQgQW5nZWwgTWFyaW4sIFBhdWwgSm9obnN0b24gMjAwMCAtIDIwMDkuCiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXQKICoKICovCgp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBTaGEyNTYgPSByZXF1aXJlKCcuL3NoYTI1NicpCnZhciBIYXNoID0gcmVxdWlyZSgnLi9oYXNoJykKCnZhciBXID0gbmV3IEFycmF5KDY0KQoKZnVuY3Rpb24gU2hhMjI0ICgpIHsKICB0aGlzLmluaXQoKQoKICB0aGlzLl93ID0gVyAvLyBuZXcgQXJyYXkoNjQpCgogIEhhc2guY2FsbCh0aGlzLCA2NCwgNTYpCn0KCmluaGVyaXRzKFNoYTIyNCwgU2hhMjU2KQoKU2hhMjI0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2EgPSAweGMxMDU5ZWQ4CiAgdGhpcy5fYiA9IDB4MzY3Y2Q1MDcKICB0aGlzLl9jID0gMHgzMDcwZGQxNwogIHRoaXMuX2QgPSAweGY3MGU1OTM5CiAgdGhpcy5fZSA9IDB4ZmZjMDBiMzEKICB0aGlzLl9mID0gMHg2ODU4MTUxMQogIHRoaXMuX2cgPSAweDY0Zjk4ZmE3CiAgdGhpcy5faCA9IDB4YmVmYTRmYTQKCiAgcmV0dXJuIHRoaXMKfQoKU2hhMjI0LnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgSCA9IG5ldyBCdWZmZXIoMjgpCgogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2EsIDApCiAgSC53cml0ZUludDMyQkUodGhpcy5fYiwgNCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9jLCA4KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2QsIDEyKQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2UsIDE2KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2YsIDIwKQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2csIDI0KQoKICByZXR1cm4gSAp9Cgptb2R1bGUuZXhwb3J0cyA9IFNoYTIyNAoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vaGFzaCI6MTYyLCIuL3NoYTI1NiI6MTY3LCJidWZmZXIiOjc2LCJpbmhlcml0cyI6MTI5fV0sMTY3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKioKICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBTZWN1cmUgSGFzaCBBbGdvcml0aG0sIFNIQS0yNTYsIGFzIGRlZmluZWQKICogaW4gRklQUyAxODAtMgogKiBWZXJzaW9uIDIuMi1iZXRhIENvcHlyaWdodCBBbmdlbCBNYXJpbiwgUGF1bCBKb2huc3RvbiAyMDAwIC0gMjAwOS4KICogT3RoZXIgY29udHJpYnV0b3JzOiBHcmVnIEhvbHQsIEFuZHJldyBLZXBlcnQsIFlkbmFyLCBMb3N0aW5ldAogKgogKi8KCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIEsgPSBbCiAgMHg0MjhBMkY5OCwgMHg3MTM3NDQ5MSwgMHhCNUMwRkJDRiwgMHhFOUI1REJBNSwKICAweDM5NTZDMjVCLCAweDU5RjExMUYxLCAweDkyM0Y4MkE0LCAweEFCMUM1RUQ1LAogIDB4RDgwN0FBOTgsIDB4MTI4MzVCMDEsIDB4MjQzMTg1QkUsIDB4NTUwQzdEQzMsCiAgMHg3MkJFNUQ3NCwgMHg4MERFQjFGRSwgMHg5QkRDMDZBNywgMHhDMTlCRjE3NCwKICAweEU0OUI2OUMxLCAweEVGQkU0Nzg2LCAweDBGQzE5REM2LCAweDI0MENBMUNDLAogIDB4MkRFOTJDNkYsIDB4NEE3NDg0QUEsIDB4NUNCMEE5REMsIDB4NzZGOTg4REEsCiAgMHg5ODNFNTE1MiwgMHhBODMxQzY2RCwgMHhCMDAzMjdDOCwgMHhCRjU5N0ZDNywKICAweEM2RTAwQkYzLCAweEQ1QTc5MTQ3LCAweDA2Q0E2MzUxLCAweDE0MjkyOTY3LAogIDB4MjdCNzBBODUsIDB4MkUxQjIxMzgsIDB4NEQyQzZERkMsIDB4NTMzODBEMTMsCiAgMHg2NTBBNzM1NCwgMHg3NjZBMEFCQiwgMHg4MUMyQzkyRSwgMHg5MjcyMkM4NSwKICAweEEyQkZFOEExLCAweEE4MUE2NjRCLCAweEMyNEI4QjcwLCAweEM3NkM1MUEzLAogIDB4RDE5MkU4MTksIDB4RDY5OTA2MjQsIDB4RjQwRTM1ODUsIDB4MTA2QUEwNzAsCiAgMHgxOUE0QzExNiwgMHgxRTM3NkMwOCwgMHgyNzQ4Nzc0QywgMHgzNEIwQkNCNSwKICAweDM5MUMwQ0IzLCAweDRFRDhBQTRBLCAweDVCOUNDQTRGLCAweDY4MkU2RkYzLAogIDB4NzQ4RjgyRUUsIDB4NzhBNTYzNkYsIDB4ODRDODc4MTQsIDB4OENDNzAyMDgsCiAgMHg5MEJFRkZGQSwgMHhBNDUwNkNFQiwgMHhCRUY5QTNGNywgMHhDNjcxNzhGMgpdCgp2YXIgVyA9IG5ldyBBcnJheSg2NCkKCmZ1bmN0aW9uIFNoYTI1NiAoKSB7CiAgdGhpcy5pbml0KCkKCiAgdGhpcy5fdyA9IFcgLy8gbmV3IEFycmF5KDY0KQoKICBIYXNoLmNhbGwodGhpcywgNjQsIDU2KQp9Cgppbmhlcml0cyhTaGEyNTYsIEhhc2gpCgpTaGEyNTYucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgdGhpcy5fYSA9IDB4NmEwOWU2NjcKICB0aGlzLl9iID0gMHhiYjY3YWU4NQogIHRoaXMuX2MgPSAweDNjNmVmMzcyCiAgdGhpcy5fZCA9IDB4YTU0ZmY1M2EKICB0aGlzLl9lID0gMHg1MTBlNTI3ZgogIHRoaXMuX2YgPSAweDliMDU2ODhjCiAgdGhpcy5fZyA9IDB4MWY4M2Q5YWIKICB0aGlzLl9oID0gMHg1YmUwY2QxOQoKICByZXR1cm4gdGhpcwp9CgpmdW5jdGlvbiBjaCAoeCwgeSwgeikgewogIHJldHVybiB6IF4gKHggJiAoeSBeIHopKQp9CgpmdW5jdGlvbiBtYWogKHgsIHksIHopIHsKICByZXR1cm4gKHggJiB5KSB8ICh6ICYgKHggfCB5KSkKfQoKZnVuY3Rpb24gc2lnbWEwICh4KSB7CiAgcmV0dXJuICh4ID4+PiAyIHwgeCA8PCAzMCkgXiAoeCA+Pj4gMTMgfCB4IDw8IDE5KSBeICh4ID4+PiAyMiB8IHggPDwgMTApCn0KCmZ1bmN0aW9uIHNpZ21hMSAoeCkgewogIHJldHVybiAoeCA+Pj4gNiB8IHggPDwgMjYpIF4gKHggPj4+IDExIHwgeCA8PCAyMSkgXiAoeCA+Pj4gMjUgfCB4IDw8IDcpCn0KCmZ1bmN0aW9uIGdhbW1hMCAoeCkgewogIHJldHVybiAoeCA+Pj4gNyB8IHggPDwgMjUpIF4gKHggPj4+IDE4IHwgeCA8PCAxNCkgXiAoeCA+Pj4gMykKfQoKZnVuY3Rpb24gZ2FtbWExICh4KSB7CiAgcmV0dXJuICh4ID4+PiAxNyB8IHggPDwgMTUpIF4gKHggPj4+IDE5IHwgeCA8PCAxMykgXiAoeCA+Pj4gMTApCn0KClNoYTI1Ni5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChNKSB7CiAgdmFyIFcgPSB0aGlzLl93CgogIHZhciBhID0gdGhpcy5fYSB8IDAKICB2YXIgYiA9IHRoaXMuX2IgfCAwCiAgdmFyIGMgPSB0aGlzLl9jIHwgMAogIHZhciBkID0gdGhpcy5fZCB8IDAKICB2YXIgZSA9IHRoaXMuX2UgfCAwCiAgdmFyIGYgPSB0aGlzLl9mIHwgMAogIHZhciBnID0gdGhpcy5fZyB8IDAKICB2YXIgaCA9IHRoaXMuX2ggfCAwCgogIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkgV1tpXSA9IE0ucmVhZEludDMyQkUoaSAqIDQpCiAgZm9yICg7IGkgPCA2NDsgKytpKSBXW2ldID0gKGdhbW1hMShXW2kgLSAyXSkgKyBXW2kgLSA3XSArIGdhbW1hMChXW2kgLSAxNV0pICsgV1tpIC0gMTZdKSB8IDAKCiAgZm9yICh2YXIgaiA9IDA7IGogPCA2NDsgKytqKSB7CiAgICB2YXIgVDEgPSAoaCArIHNpZ21hMShlKSArIGNoKGUsIGYsIGcpICsgS1tqXSArIFdbal0pIHwgMAogICAgdmFyIFQyID0gKHNpZ21hMChhKSArIG1haihhLCBiLCBjKSkgfCAwCgogICAgaCA9IGcKICAgIGcgPSBmCiAgICBmID0gZQogICAgZSA9IChkICsgVDEpIHwgMAogICAgZCA9IGMKICAgIGMgPSBiCiAgICBiID0gYQogICAgYSA9IChUMSArIFQyKSB8IDAKICB9CgogIHRoaXMuX2EgPSAoYSArIHRoaXMuX2EpIHwgMAogIHRoaXMuX2IgPSAoYiArIHRoaXMuX2IpIHwgMAogIHRoaXMuX2MgPSAoYyArIHRoaXMuX2MpIHwgMAogIHRoaXMuX2QgPSAoZCArIHRoaXMuX2QpIHwgMAogIHRoaXMuX2UgPSAoZSArIHRoaXMuX2UpIHwgMAogIHRoaXMuX2YgPSAoZiArIHRoaXMuX2YpIHwgMAogIHRoaXMuX2cgPSAoZyArIHRoaXMuX2cpIHwgMAogIHRoaXMuX2ggPSAoaCArIHRoaXMuX2gpIHwgMAp9CgpTaGEyNTYucHJvdG90eXBlLl9oYXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBIID0gbmV3IEJ1ZmZlcigzMikKCiAgSC53cml0ZUludDMyQkUodGhpcy5fYSwgMCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9iLCA0KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2MsIDgpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZCwgMTIpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZSwgMTYpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZiwgMjApCiAgSC53cml0ZUludDMyQkUodGhpcy5fZywgMjQpCiAgSC53cml0ZUludDMyQkUodGhpcy5faCwgMjgpCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhMjU2Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjoxNjIsImJ1ZmZlciI6NzYsImluaGVyaXRzIjoxMjl9XSwxNjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIFNIQTUxMiA9IHJlcXVpcmUoJy4vc2hhNTEyJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIFcgPSBuZXcgQXJyYXkoMTYwKQoKZnVuY3Rpb24gU2hhMzg0ICgpIHsKICB0aGlzLmluaXQoKQogIHRoaXMuX3cgPSBXCgogIEhhc2guY2FsbCh0aGlzLCAxMjgsIDExMikKfQoKaW5oZXJpdHMoU2hhMzg0LCBTSEE1MTIpCgpTaGEzODQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgdGhpcy5fYWggPSAweGNiYmI5ZDVkCiAgdGhpcy5fYmggPSAweDYyOWEyOTJhCiAgdGhpcy5fY2ggPSAweDkxNTkwMTVhCiAgdGhpcy5fZGggPSAweDE1MmZlY2Q4CiAgdGhpcy5fZWggPSAweDY3MzMyNjY3CiAgdGhpcy5fZmggPSAweDhlYjQ0YTg3CiAgdGhpcy5fZ2ggPSAweGRiMGMyZTBkCiAgdGhpcy5faGggPSAweDQ3YjU0ODFkCgogIHRoaXMuX2FsID0gMHhjMTA1OWVkOAogIHRoaXMuX2JsID0gMHgzNjdjZDUwNwogIHRoaXMuX2NsID0gMHgzMDcwZGQxNwogIHRoaXMuX2RsID0gMHhmNzBlNTkzOQogIHRoaXMuX2VsID0gMHhmZmMwMGIzMQogIHRoaXMuX2ZsID0gMHg2ODU4MTUxMQogIHRoaXMuX2dsID0gMHg2NGY5OGZhNwogIHRoaXMuX2hsID0gMHhiZWZhNGZhNAoKICByZXR1cm4gdGhpcwp9CgpTaGEzODQucHJvdG90eXBlLl9oYXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBIID0gbmV3IEJ1ZmZlcig0OCkKCiAgZnVuY3Rpb24gd3JpdGVJbnQ2NEJFIChoLCBsLCBvZmZzZXQpIHsKICAgIEgud3JpdGVJbnQzMkJFKGgsIG9mZnNldCkKICAgIEgud3JpdGVJbnQzMkJFKGwsIG9mZnNldCArIDQpCiAgfQoKICB3cml0ZUludDY0QkUodGhpcy5fYWgsIHRoaXMuX2FsLCAwKQogIHdyaXRlSW50NjRCRSh0aGlzLl9iaCwgdGhpcy5fYmwsIDgpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2NoLCB0aGlzLl9jbCwgMTYpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2RoLCB0aGlzLl9kbCwgMjQpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2VoLCB0aGlzLl9lbCwgMzIpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2ZoLCB0aGlzLl9mbCwgNDApCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhMzg0Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjoxNjIsIi4vc2hhNTEyIjoxNjksImJ1ZmZlciI6NzYsImluaGVyaXRzIjoxMjl9XSwxNjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIEsgPSBbCiAgMHg0MjhhMmY5OCwgMHhkNzI4YWUyMiwgMHg3MTM3NDQ5MSwgMHgyM2VmNjVjZCwKICAweGI1YzBmYmNmLCAweGVjNGQzYjJmLCAweGU5YjVkYmE1LCAweDgxODlkYmJjLAogIDB4Mzk1NmMyNWIsIDB4ZjM0OGI1MzgsIDB4NTlmMTExZjEsIDB4YjYwNWQwMTksCiAgMHg5MjNmODJhNCwgMHhhZjE5NGY5YiwgMHhhYjFjNWVkNSwgMHhkYTZkODExOCwKICAweGQ4MDdhYTk4LCAweGEzMDMwMjQyLCAweDEyODM1YjAxLCAweDQ1NzA2ZmJlLAogIDB4MjQzMTg1YmUsIDB4NGVlNGIyOGMsIDB4NTUwYzdkYzMsIDB4ZDVmZmI0ZTIsCiAgMHg3MmJlNWQ3NCwgMHhmMjdiODk2ZiwgMHg4MGRlYjFmZSwgMHgzYjE2OTZiMSwKICAweDliZGMwNmE3LCAweDI1YzcxMjM1LCAweGMxOWJmMTc0LCAweGNmNjkyNjk0LAogIDB4ZTQ5YjY5YzEsIDB4OWVmMTRhZDIsIDB4ZWZiZTQ3ODYsIDB4Mzg0ZjI1ZTMsCiAgMHgwZmMxOWRjNiwgMHg4YjhjZDViNSwgMHgyNDBjYTFjYywgMHg3N2FjOWM2NSwKICAweDJkZTkyYzZmLCAweDU5MmIwMjc1LCAweDRhNzQ4NGFhLCAweDZlYTZlNDgzLAogIDB4NWNiMGE5ZGMsIDB4YmQ0MWZiZDQsIDB4NzZmOTg4ZGEsIDB4ODMxMTUzYjUsCiAgMHg5ODNlNTE1MiwgMHhlZTY2ZGZhYiwgMHhhODMxYzY2ZCwgMHgyZGI0MzIxMCwKICAweGIwMDMyN2M4LCAweDk4ZmIyMTNmLCAweGJmNTk3ZmM3LCAweGJlZWYwZWU0LAogIDB4YzZlMDBiZjMsIDB4M2RhODhmYzIsIDB4ZDVhNzkxNDcsIDB4OTMwYWE3MjUsCiAgMHgwNmNhNjM1MSwgMHhlMDAzODI2ZiwgMHgxNDI5Mjk2NywgMHgwYTBlNmU3MCwKICAweDI3YjcwYTg1LCAweDQ2ZDIyZmZjLCAweDJlMWIyMTM4LCAweDVjMjZjOTI2LAogIDB4NGQyYzZkZmMsIDB4NWFjNDJhZWQsIDB4NTMzODBkMTMsIDB4OWQ5NWIzZGYsCiAgMHg2NTBhNzM1NCwgMHg4YmFmNjNkZSwgMHg3NjZhMGFiYiwgMHgzYzc3YjJhOCwKICAweDgxYzJjOTJlLCAweDQ3ZWRhZWU2LCAweDkyNzIyYzg1LCAweDE0ODIzNTNiLAogIDB4YTJiZmU4YTEsIDB4NGNmMTAzNjQsIDB4YTgxYTY2NGIsIDB4YmM0MjMwMDEsCiAgMHhjMjRiOGI3MCwgMHhkMGY4OTc5MSwgMHhjNzZjNTFhMywgMHgwNjU0YmUzMCwKICAweGQxOTJlODE5LCAweGQ2ZWY1MjE4LCAweGQ2OTkwNjI0LCAweDU1NjVhOTEwLAogIDB4ZjQwZTM1ODUsIDB4NTc3MTIwMmEsIDB4MTA2YWEwNzAsIDB4MzJiYmQxYjgsCiAgMHgxOWE0YzExNiwgMHhiOGQyZDBjOCwgMHgxZTM3NmMwOCwgMHg1MTQxYWI1MywKICAweDI3NDg3NzRjLCAweGRmOGVlYjk5LCAweDM0YjBiY2I1LCAweGUxOWI0OGE4LAogIDB4MzkxYzBjYjMsIDB4YzVjOTVhNjMsIDB4NGVkOGFhNGEsIDB4ZTM0MThhY2IsCiAgMHg1YjljY2E0ZiwgMHg3NzYzZTM3MywgMHg2ODJlNmZmMywgMHhkNmIyYjhhMywKICAweDc0OGY4MmVlLCAweDVkZWZiMmZjLCAweDc4YTU2MzZmLCAweDQzMTcyZjYwLAogIDB4ODRjODc4MTQsIDB4YTFmMGFiNzIsIDB4OGNjNzAyMDgsIDB4MWE2NDM5ZWMsCiAgMHg5MGJlZmZmYSwgMHgyMzYzMWUyOCwgMHhhNDUwNmNlYiwgMHhkZTgyYmRlOSwKICAweGJlZjlhM2Y3LCAweGIyYzY3OTE1LCAweGM2NzE3OGYyLCAweGUzNzI1MzJiLAogIDB4Y2EyNzNlY2UsIDB4ZWEyNjYxOWMsIDB4ZDE4NmI4YzcsIDB4MjFjMGMyMDcsCiAgMHhlYWRhN2RkNiwgMHhjZGUwZWIxZSwgMHhmNTdkNGY3ZiwgMHhlZTZlZDE3OCwKICAweDA2ZjA2N2FhLCAweDcyMTc2ZmJhLCAweDBhNjM3ZGM1LCAweGEyYzg5OGE2LAogIDB4MTEzZjk4MDQsIDB4YmVmOTBkYWUsIDB4MWI3MTBiMzUsIDB4MTMxYzQ3MWIsCiAgMHgyOGRiNzdmNSwgMHgyMzA0N2Q4NCwgMHgzMmNhYWI3YiwgMHg0MGM3MjQ5MywKICAweDNjOWViZTBhLCAweDE1YzliZWJjLCAweDQzMWQ2N2M0LCAweDljMTAwZDRjLAogIDB4NGNjNWQ0YmUsIDB4Y2IzZTQyYjYsIDB4NTk3ZjI5OWMsIDB4ZmM2NTdlMmEsCiAgMHg1ZmNiNmZhYiwgMHgzYWQ2ZmFlYywgMHg2YzQ0MTk4YywgMHg0YTQ3NTgxNwpdCgp2YXIgVyA9IG5ldyBBcnJheSgxNjApCgpmdW5jdGlvbiBTaGE1MTIgKCkgewogIHRoaXMuaW5pdCgpCiAgdGhpcy5fdyA9IFcKCiAgSGFzaC5jYWxsKHRoaXMsIDEyOCwgMTEyKQp9Cgppbmhlcml0cyhTaGE1MTIsIEhhc2gpCgpTaGE1MTIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgdGhpcy5fYWggPSAweDZhMDllNjY3CiAgdGhpcy5fYmggPSAweGJiNjdhZTg1CiAgdGhpcy5fY2ggPSAweDNjNmVmMzcyCiAgdGhpcy5fZGggPSAweGE1NGZmNTNhCiAgdGhpcy5fZWggPSAweDUxMGU1MjdmCiAgdGhpcy5fZmggPSAweDliMDU2ODhjCiAgdGhpcy5fZ2ggPSAweDFmODNkOWFiCiAgdGhpcy5faGggPSAweDViZTBjZDE5CgogIHRoaXMuX2FsID0gMHhmM2JjYzkwOAogIHRoaXMuX2JsID0gMHg4NGNhYTczYgogIHRoaXMuX2NsID0gMHhmZTk0ZjgyYgogIHRoaXMuX2RsID0gMHg1ZjFkMzZmMQogIHRoaXMuX2VsID0gMHhhZGU2ODJkMQogIHRoaXMuX2ZsID0gMHgyYjNlNmMxZgogIHRoaXMuX2dsID0gMHhmYjQxYmQ2YgogIHRoaXMuX2hsID0gMHgxMzdlMjE3OQoKICByZXR1cm4gdGhpcwp9CgpmdW5jdGlvbiBDaCAoeCwgeSwgeikgewogIHJldHVybiB6IF4gKHggJiAoeSBeIHopKQp9CgpmdW5jdGlvbiBtYWogKHgsIHksIHopIHsKICByZXR1cm4gKHggJiB5KSB8ICh6ICYgKHggfCB5KSkKfQoKZnVuY3Rpb24gc2lnbWEwICh4LCB4bCkgewogIHJldHVybiAoeCA+Pj4gMjggfCB4bCA8PCA0KSBeICh4bCA+Pj4gMiB8IHggPDwgMzApIF4gKHhsID4+PiA3IHwgeCA8PCAyNSkKfQoKZnVuY3Rpb24gc2lnbWExICh4LCB4bCkgewogIHJldHVybiAoeCA+Pj4gMTQgfCB4bCA8PCAxOCkgXiAoeCA+Pj4gMTggfCB4bCA8PCAxNCkgXiAoeGwgPj4+IDkgfCB4IDw8IDIzKQp9CgpmdW5jdGlvbiBHYW1tYTAgKHgsIHhsKSB7CiAgcmV0dXJuICh4ID4+PiAxIHwgeGwgPDwgMzEpIF4gKHggPj4+IDggfCB4bCA8PCAyNCkgXiAoeCA+Pj4gNykKfQoKZnVuY3Rpb24gR2FtbWEwbCAoeCwgeGwpIHsKICByZXR1cm4gKHggPj4+IDEgfCB4bCA8PCAzMSkgXiAoeCA+Pj4gOCB8IHhsIDw8IDI0KSBeICh4ID4+PiA3IHwgeGwgPDwgMjUpCn0KCmZ1bmN0aW9uIEdhbW1hMSAoeCwgeGwpIHsKICByZXR1cm4gKHggPj4+IDE5IHwgeGwgPDwgMTMpIF4gKHhsID4+PiAyOSB8IHggPDwgMykgXiAoeCA+Pj4gNikKfQoKZnVuY3Rpb24gR2FtbWExbCAoeCwgeGwpIHsKICByZXR1cm4gKHggPj4+IDE5IHwgeGwgPDwgMTMpIF4gKHhsID4+PiAyOSB8IHggPDwgMykgXiAoeCA+Pj4gNiB8IHhsIDw8IDI2KQp9CgpmdW5jdGlvbiBnZXRDYXJyeSAoYSwgYikgewogIHJldHVybiAoYSA+Pj4gMCkgPCAoYiA+Pj4gMCkgPyAxIDogMAp9CgpTaGE1MTIucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoTSkgewogIHZhciBXID0gdGhpcy5fdwoKICB2YXIgYWggPSB0aGlzLl9haCB8IDAKICB2YXIgYmggPSB0aGlzLl9iaCB8IDAKICB2YXIgY2ggPSB0aGlzLl9jaCB8IDAKICB2YXIgZGggPSB0aGlzLl9kaCB8IDAKICB2YXIgZWggPSB0aGlzLl9laCB8IDAKICB2YXIgZmggPSB0aGlzLl9maCB8IDAKICB2YXIgZ2ggPSB0aGlzLl9naCB8IDAKICB2YXIgaGggPSB0aGlzLl9oaCB8IDAKCiAgdmFyIGFsID0gdGhpcy5fYWwgfCAwCiAgdmFyIGJsID0gdGhpcy5fYmwgfCAwCiAgdmFyIGNsID0gdGhpcy5fY2wgfCAwCiAgdmFyIGRsID0gdGhpcy5fZGwgfCAwCiAgdmFyIGVsID0gdGhpcy5fZWwgfCAwCiAgdmFyIGZsID0gdGhpcy5fZmwgfCAwCiAgdmFyIGdsID0gdGhpcy5fZ2wgfCAwCiAgdmFyIGhsID0gdGhpcy5faGwgfCAwCgogIGZvciAodmFyIGkgPSAwOyBpIDwgMzI7IGkgKz0gMikgewogICAgV1tpXSA9IE0ucmVhZEludDMyQkUoaSAqIDQpCiAgICBXW2kgKyAxXSA9IE0ucmVhZEludDMyQkUoaSAqIDQgKyA0KQogIH0KICBmb3IgKDsgaSA8IDE2MDsgaSArPSAyKSB7CiAgICB2YXIgeGggPSBXW2kgLSAxNSAqIDJdCiAgICB2YXIgeGwgPSBXW2kgLSAxNSAqIDIgKyAxXQogICAgdmFyIGdhbW1hMCA9IEdhbW1hMCh4aCwgeGwpCiAgICB2YXIgZ2FtbWEwbCA9IEdhbW1hMGwoeGwsIHhoKQoKICAgIHhoID0gV1tpIC0gMiAqIDJdCiAgICB4bCA9IFdbaSAtIDIgKiAyICsgMV0KICAgIHZhciBnYW1tYTEgPSBHYW1tYTEoeGgsIHhsKQogICAgdmFyIGdhbW1hMWwgPSBHYW1tYTFsKHhsLCB4aCkKCiAgICAvLyBXW2ldID0gZ2FtbWEwICsgV1tpIC0gN10gKyBnYW1tYTEgKyBXW2kgLSAxNl0KICAgIHZhciBXaTdoID0gV1tpIC0gNyAqIDJdCiAgICB2YXIgV2k3bCA9IFdbaSAtIDcgKiAyICsgMV0KCiAgICB2YXIgV2kxNmggPSBXW2kgLSAxNiAqIDJdCiAgICB2YXIgV2kxNmwgPSBXW2kgLSAxNiAqIDIgKyAxXQoKICAgIHZhciBXaWwgPSAoZ2FtbWEwbCArIFdpN2wpIHwgMAogICAgdmFyIFdpaCA9IChnYW1tYTAgKyBXaTdoICsgZ2V0Q2FycnkoV2lsLCBnYW1tYTBsKSkgfCAwCiAgICBXaWwgPSAoV2lsICsgZ2FtbWExbCkgfCAwCiAgICBXaWggPSAoV2loICsgZ2FtbWExICsgZ2V0Q2FycnkoV2lsLCBnYW1tYTFsKSkgfCAwCiAgICBXaWwgPSAoV2lsICsgV2kxNmwpIHwgMAogICAgV2loID0gKFdpaCArIFdpMTZoICsgZ2V0Q2FycnkoV2lsLCBXaTE2bCkpIHwgMAoKICAgIFdbaV0gPSBXaWgKICAgIFdbaSArIDFdID0gV2lsCiAgfQoKICBmb3IgKHZhciBqID0gMDsgaiA8IDE2MDsgaiArPSAyKSB7CiAgICBXaWggPSBXW2pdCiAgICBXaWwgPSBXW2ogKyAxXQoKICAgIHZhciBtYWpoID0gbWFqKGFoLCBiaCwgY2gpCiAgICB2YXIgbWFqbCA9IG1haihhbCwgYmwsIGNsKQoKICAgIHZhciBzaWdtYTBoID0gc2lnbWEwKGFoLCBhbCkKICAgIHZhciBzaWdtYTBsID0gc2lnbWEwKGFsLCBhaCkKICAgIHZhciBzaWdtYTFoID0gc2lnbWExKGVoLCBlbCkKICAgIHZhciBzaWdtYTFsID0gc2lnbWExKGVsLCBlaCkKCiAgICAvLyB0MSA9IGggKyBzaWdtYTEgKyBjaCArIEtbal0gKyBXW2pdCiAgICB2YXIgS2loID0gS1tqXQogICAgdmFyIEtpbCA9IEtbaiArIDFdCgogICAgdmFyIGNoaCA9IENoKGVoLCBmaCwgZ2gpCiAgICB2YXIgY2hsID0gQ2goZWwsIGZsLCBnbCkKCiAgICB2YXIgdDFsID0gKGhsICsgc2lnbWExbCkgfCAwCiAgICB2YXIgdDFoID0gKGhoICsgc2lnbWExaCArIGdldENhcnJ5KHQxbCwgaGwpKSB8IDAKICAgIHQxbCA9ICh0MWwgKyBjaGwpIHwgMAogICAgdDFoID0gKHQxaCArIGNoaCArIGdldENhcnJ5KHQxbCwgY2hsKSkgfCAwCiAgICB0MWwgPSAodDFsICsgS2lsKSB8IDAKICAgIHQxaCA9ICh0MWggKyBLaWggKyBnZXRDYXJyeSh0MWwsIEtpbCkpIHwgMAogICAgdDFsID0gKHQxbCArIFdpbCkgfCAwCiAgICB0MWggPSAodDFoICsgV2loICsgZ2V0Q2FycnkodDFsLCBXaWwpKSB8IDAKCiAgICAvLyB0MiA9IHNpZ21hMCArIG1hagogICAgdmFyIHQybCA9IChzaWdtYTBsICsgbWFqbCkgfCAwCiAgICB2YXIgdDJoID0gKHNpZ21hMGggKyBtYWpoICsgZ2V0Q2FycnkodDJsLCBzaWdtYTBsKSkgfCAwCgogICAgaGggPSBnaAogICAgaGwgPSBnbAogICAgZ2ggPSBmaAogICAgZ2wgPSBmbAogICAgZmggPSBlaAogICAgZmwgPSBlbAogICAgZWwgPSAoZGwgKyB0MWwpIHwgMAogICAgZWggPSAoZGggKyB0MWggKyBnZXRDYXJyeShlbCwgZGwpKSB8IDAKICAgIGRoID0gY2gKICAgIGRsID0gY2wKICAgIGNoID0gYmgKICAgIGNsID0gYmwKICAgIGJoID0gYWgKICAgIGJsID0gYWwKICAgIGFsID0gKHQxbCArIHQybCkgfCAwCiAgICBhaCA9ICh0MWggKyB0MmggKyBnZXRDYXJyeShhbCwgdDFsKSkgfCAwCiAgfQoKICB0aGlzLl9hbCA9ICh0aGlzLl9hbCArIGFsKSB8IDAKICB0aGlzLl9ibCA9ICh0aGlzLl9ibCArIGJsKSB8IDAKICB0aGlzLl9jbCA9ICh0aGlzLl9jbCArIGNsKSB8IDAKICB0aGlzLl9kbCA9ICh0aGlzLl9kbCArIGRsKSB8IDAKICB0aGlzLl9lbCA9ICh0aGlzLl9lbCArIGVsKSB8IDAKICB0aGlzLl9mbCA9ICh0aGlzLl9mbCArIGZsKSB8IDAKICB0aGlzLl9nbCA9ICh0aGlzLl9nbCArIGdsKSB8IDAKICB0aGlzLl9obCA9ICh0aGlzLl9obCArIGhsKSB8IDAKCiAgdGhpcy5fYWggPSAodGhpcy5fYWggKyBhaCArIGdldENhcnJ5KHRoaXMuX2FsLCBhbCkpIHwgMAogIHRoaXMuX2JoID0gKHRoaXMuX2JoICsgYmggKyBnZXRDYXJyeSh0aGlzLl9ibCwgYmwpKSB8IDAKICB0aGlzLl9jaCA9ICh0aGlzLl9jaCArIGNoICsgZ2V0Q2FycnkodGhpcy5fY2wsIGNsKSkgfCAwCiAgdGhpcy5fZGggPSAodGhpcy5fZGggKyBkaCArIGdldENhcnJ5KHRoaXMuX2RsLCBkbCkpIHwgMAogIHRoaXMuX2VoID0gKHRoaXMuX2VoICsgZWggKyBnZXRDYXJyeSh0aGlzLl9lbCwgZWwpKSB8IDAKICB0aGlzLl9maCA9ICh0aGlzLl9maCArIGZoICsgZ2V0Q2FycnkodGhpcy5fZmwsIGZsKSkgfCAwCiAgdGhpcy5fZ2ggPSAodGhpcy5fZ2ggKyBnaCArIGdldENhcnJ5KHRoaXMuX2dsLCBnbCkpIHwgMAogIHRoaXMuX2hoID0gKHRoaXMuX2hoICsgaGggKyBnZXRDYXJyeSh0aGlzLl9obCwgaGwpKSB8IDAKfQoKU2hhNTEyLnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgSCA9IG5ldyBCdWZmZXIoNjQpCgogIGZ1bmN0aW9uIHdyaXRlSW50NjRCRSAoaCwgbCwgb2Zmc2V0KSB7CiAgICBILndyaXRlSW50MzJCRShoLCBvZmZzZXQpCiAgICBILndyaXRlSW50MzJCRShsLCBvZmZzZXQgKyA0KQogIH0KCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2FoLCB0aGlzLl9hbCwgMCkKICB3cml0ZUludDY0QkUodGhpcy5fYmgsIHRoaXMuX2JsLCA4KQogIHdyaXRlSW50NjRCRSh0aGlzLl9jaCwgdGhpcy5fY2wsIDE2KQogIHdyaXRlSW50NjRCRSh0aGlzLl9kaCwgdGhpcy5fZGwsIDI0KQogIHdyaXRlSW50NjRCRSh0aGlzLl9laCwgdGhpcy5fZWwsIDMyKQogIHdyaXRlSW50NjRCRSh0aGlzLl9maCwgdGhpcy5fZmwsIDQwKQogIHdyaXRlSW50NjRCRSh0aGlzLl9naCwgdGhpcy5fZ2wsIDQ4KQogIHdyaXRlSW50NjRCRSh0aGlzLl9oaCwgdGhpcy5faGwsIDU2KQoKICByZXR1cm4gSAp9Cgptb2R1bGUuZXhwb3J0cyA9IFNoYTUxMgoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vaGFzaCI6MTYyLCJidWZmZXIiOjc2LCJpbmhlcml0cyI6MTI5fV0sMTcwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiO2Z1bmN0aW9uIHEoYSl7dGhyb3cgYTt9dmFyIHM9dm9pZCAwLHU9ITE7dmFyIHNqY2w9e2NpcGhlcjp7fSxoYXNoOnt9LGtleWV4Y2hhbmdlOnt9LG1vZGU6e30sbWlzYzp7fSxjb2RlYzp7fSxleGNlcHRpb246e2NvcnJ1cHQ6ZnVuY3Rpb24oYSl7dGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJDT1JSVVBUOiAiK3RoaXMubWVzc2FnZX07dGhpcy5tZXNzYWdlPWF9LGludmFsaWQ6ZnVuY3Rpb24oYSl7dGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJJTlZBTElEOiAiK3RoaXMubWVzc2FnZX07dGhpcy5tZXNzYWdlPWF9LGJ1ZzpmdW5jdGlvbihhKXt0aGlzLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkJVRzogIit0aGlzLm1lc3NhZ2V9O3RoaXMubWVzc2FnZT1hfSxub3RSZWFkeTpmdW5jdGlvbihhKXt0aGlzLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIk5PVCBSRUFEWTogIit0aGlzLm1lc3NhZ2V9O3RoaXMubWVzc2FnZT1hfX19OwoidW5kZWZpbmVkIiE9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzJiYobW9kdWxlLmV4cG9ydHM9c2pjbCk7ImZ1bmN0aW9uIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZShbXSxmdW5jdGlvbigpe3JldHVybiBzamNsfSk7CnNqY2wuY2lwaGVyLmFlcz1mdW5jdGlvbihhKXt0aGlzLmtbMF1bMF1bMF18fHRoaXMuRCgpO3ZhciBiLGMsZCxlLGY9dGhpcy5rWzBdWzRdLGc9dGhpcy5rWzFdO2I9YS5sZW5ndGg7dmFyIGg9MTs0IT09YiYmKDYhPT1iJiY4IT09YikmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImludmFsaWQgYWVzIGtleSBzaXplIikpO3RoaXMuYj1bZD1hLnNsaWNlKDApLGU9W11dO2ZvcihhPWI7YTw0KmIrMjg7YSsrKXtjPWRbYS0xXTtpZigwPT09YSVifHw4PT09YiYmND09PWElYiljPWZbYz4+PjI0XTw8MjReZltjPj4xNiYyNTVdPDwxNl5mW2M+PjgmMjU1XTw8OF5mW2MmMjU1XSwwPT09YSViJiYoYz1jPDw4XmM+Pj4yNF5oPDwyNCxoPWg8PDFeMjgzKihoPj43KSk7ZFthXT1kW2EtYl1eY31mb3IoYj0wO2E7YisrLGEtLSljPWRbYiYzP2E6YS00XSxlW2JdPTQ+PWF8fDQ+Yj9jOmdbMF1bZltjPj4+MjRdXV5nWzFdW2ZbYz4+MTYmMjU1XV1eZ1syXVtmW2M+PjgmMjU1XV1eZ1szXVtmW2MmCjI1NV1dfTsKc2pjbC5jaXBoZXIuYWVzLnByb3RvdHlwZT17ZW5jcnlwdDpmdW5jdGlvbihhKXtyZXR1cm4gdyh0aGlzLGEsMCl9LGRlY3J5cHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHcodGhpcyxhLDEpfSxrOltbW10sW10sW10sW10sW11dLFtbXSxbXSxbXSxbXSxbXV1dLEQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmtbMF0sYj10aGlzLmtbMV0sYz1hWzRdLGQ9Yls0XSxlLGYsZyxoPVtdLGw9W10sayxuLG0scDtmb3IoZT0wOzB4MTAwPmU7ZSsrKWxbKGhbZV09ZTw8MV4yODMqKGU+PjcpKV5lXT1lO2ZvcihmPWc9MDshY1tmXTtmXj1rfHwxLGc9bFtnXXx8MSl7bT1nXmc8PDFeZzw8Ml5nPDwzXmc8PDQ7bT1tPj44Xm0mMjU1Xjk5O2NbZl09bTtkW21dPWY7bj1oW2U9aFtrPWhbZl1dXTtwPTB4MTAxMDEwMSpuXjB4MTAwMDEqZV4weDEwMSprXjB4MTAxMDEwMCpmO249MHgxMDEqaFttXV4weDEwMTAxMDAqbTtmb3IoZT0wOzQ+ZTtlKyspYVtlXVtmXT1uPW48PDI0Xm4+Pj44LGJbZV1bbV09cD1wPDwyNF5wPj4+OH1mb3IoZT0KMDs1PmU7ZSsrKWFbZV09YVtlXS5zbGljZSgwKSxiW2VdPWJbZV0uc2xpY2UoMCl9fTsKZnVuY3Rpb24gdyhhLGIsYyl7NCE9PWIubGVuZ3RoJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJpbnZhbGlkIGFlcyBibG9jayBzaXplIikpO3ZhciBkPWEuYltjXSxlPWJbMF1eZFswXSxmPWJbYz8zOjFdXmRbMV0sZz1iWzJdXmRbMl07Yj1iW2M/MTozXV5kWzNdO3ZhciBoLGwsayxuPWQubGVuZ3RoLzQtMixtLHA9NCx0PVswLDAsMCwwXTtoPWEua1tjXTthPWhbMF07dmFyIHI9aFsxXSx2PWhbMl0seT1oWzNdLHo9aFs0XTtmb3IobT0wO208bjttKyspaD1hW2U+Pj4yNF1ecltmPj4xNiYyNTVdXnZbZz4+OCYyNTVdXnlbYiYyNTVdXmRbcF0sbD1hW2Y+Pj4yNF1ecltnPj4xNiYyNTVdXnZbYj4+OCYyNTVdXnlbZSYyNTVdXmRbcCsxXSxrPWFbZz4+PjI0XV5yW2I+PjE2JjI1NV1edltlPj44JjI1NV1eeVtmJjI1NV1eZFtwKzJdLGI9YVtiPj4+MjRdXnJbZT4+MTYmMjU1XV52W2Y+PjgmMjU1XV55W2cmMjU1XV5kW3ArM10scCs9NCxlPWgsZj1sLGc9aztmb3IobT0wOzQ+Cm07bSsrKXRbYz8zJi1tOm1dPXpbZT4+PjI0XTw8MjReeltmPj4xNiYyNTVdPDwxNl56W2c+PjgmMjU1XTw8OF56W2ImMjU1XV5kW3ArK10saD1lLGU9ZixmPWcsZz1iLGI9aDtyZXR1cm4gdH0Kc2pjbC5iaXRBcnJheT17Yml0U2xpY2U6ZnVuY3Rpb24oYSxiLGMpe2E9c2pjbC5iaXRBcnJheS5QKGEuc2xpY2UoYi8zMiksMzItKGImMzEpKS5zbGljZSgxKTtyZXR1cm4gYz09PXM/YTpzamNsLmJpdEFycmF5LmNsYW1wKGEsYy1iKX0sZXh0cmFjdDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9TWF0aC5mbG9vcigtYi1jJjMxKTtyZXR1cm4oKGIrYy0xXmIpJi0zMj9hW2IvMzJ8MF08PDMyLWReYVtiLzMyKzF8MF0+Pj5kOmFbYi8zMnwwXT4+PmQpJigxPDxjKS0xfSxjb25jYXQ6ZnVuY3Rpb24oYSxiKXtpZigwPT09YS5sZW5ndGh8fDA9PT1iLmxlbmd0aClyZXR1cm4gYS5jb25jYXQoYik7dmFyIGM9YVthLmxlbmd0aC0xXSxkPXNqY2wuYml0QXJyYXkuZ2V0UGFydGlhbChjKTtyZXR1cm4gMzI9PT1kP2EuY29uY2F0KGIpOnNqY2wuYml0QXJyYXkuUChiLGQsY3wwLGEuc2xpY2UoMCxhLmxlbmd0aC0xKSl9LGJpdExlbmd0aDpmdW5jdGlvbihhKXt2YXIgYj1hLmxlbmd0aDtyZXR1cm4gMD09PQpiPzA6MzIqKGItMSkrc2pjbC5iaXRBcnJheS5nZXRQYXJ0aWFsKGFbYi0xXSl9LGNsYW1wOmZ1bmN0aW9uKGEsYil7aWYoMzIqYS5sZW5ndGg8YilyZXR1cm4gYTthPWEuc2xpY2UoMCxNYXRoLmNlaWwoYi8zMikpO3ZhciBjPWEubGVuZ3RoO2ImPTMxOzA8YyYmYiYmKGFbYy0xXT1zamNsLmJpdEFycmF5LnBhcnRpYWwoYixhW2MtMV0mMjE0NzQ4MzY0OD4+Yi0xLDEpKTtyZXR1cm4gYX0scGFydGlhbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDMyPT09YT9iOihjP2J8MDpiPDwzMi1hKSsweDEwMDAwMDAwMDAwKmF9LGdldFBhcnRpYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucm91bmQoYS8weDEwMDAwMDAwMDAwKXx8MzJ9LGVxdWFsOmZ1bmN0aW9uKGEsYil7aWYoc2pjbC5iaXRBcnJheS5iaXRMZW5ndGgoYSkhPT1zamNsLmJpdEFycmF5LmJpdExlbmd0aChiKSlyZXR1cm4gdTt2YXIgYz0wLGQ7Zm9yKGQ9MDtkPGEubGVuZ3RoO2QrKyljfD1hW2RdXmJbZF07cmV0dXJuIDA9PT0KY30sUDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZTtlPTA7Zm9yKGQ9PT1zJiYoZD1bXSk7MzI8PWI7Yi09MzIpZC5wdXNoKGMpLGM9MDtpZigwPT09YilyZXR1cm4gZC5jb25jYXQoYSk7Zm9yKGU9MDtlPGEubGVuZ3RoO2UrKylkLnB1c2goY3xhW2VdPj4+YiksYz1hW2VdPDwzMi1iO2U9YS5sZW5ndGg/YVthLmxlbmd0aC0xXTowO2E9c2pjbC5iaXRBcnJheS5nZXRQYXJ0aWFsKGUpO2QucHVzaChzamNsLmJpdEFycmF5LnBhcnRpYWwoYithJjMxLDMyPGIrYT9jOmQucG9wKCksMSkpO3JldHVybiBkfSxsOmZ1bmN0aW9uKGEsYil7cmV0dXJuW2FbMF1eYlswXSxhWzFdXmJbMV0sYVsyXV5iWzJdLGFbM11eYlszXV19LGJ5dGVzd2FwTTpmdW5jdGlvbihhKXt2YXIgYixjO2ZvcihiPTA7YjxhLmxlbmd0aDsrK2IpYz1hW2JdLGFbYl09Yz4+PjI0fGM+Pj44JjB4ZmYwMHwoYyYweGZmMDApPDw4fGM8PDI0O3JldHVybiBhfX07CnNqY2wuY29kZWMudXRmOFN0cmluZz17ZnJvbUJpdHM6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYz1zamNsLmJpdEFycmF5LmJpdExlbmd0aChhKSxkLGU7Zm9yKGQ9MDtkPGMvODtkKyspMD09PShkJjMpJiYoZT1hW2QvNF0pLGIrPVN0cmluZy5mcm9tQ2hhckNvZGUoZT4+PjI0KSxlPDw9ODtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShiKSl9LHRvQml0czpmdW5jdGlvbihhKXthPXVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhKSk7dmFyIGI9W10sYyxkPTA7Zm9yKGM9MDtjPGEubGVuZ3RoO2MrKylkPWQ8PDh8YS5jaGFyQ29kZUF0KGMpLDM9PT0oYyYzKSYmKGIucHVzaChkKSxkPTApO2MmMyYmYi5wdXNoKHNqY2wuYml0QXJyYXkucGFydGlhbCg4KihjJjMpLGQpKTtyZXR1cm4gYn19OwpzamNsLmNvZGVjLmhleD17ZnJvbUJpdHM6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYztmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWIrPSgoYVtjXXwwKSsweGYwMDAwMDAwMDAwMCkudG9TdHJpbmcoMTYpLnN1YnN0cig0KTtyZXR1cm4gYi5zdWJzdHIoMCxzamNsLmJpdEFycmF5LmJpdExlbmd0aChhKS80KX0sdG9CaXRzOmZ1bmN0aW9uKGEpe3ZhciBiLGM9W10sZDthPWEucmVwbGFjZSgvXHN8MHgvZywiIik7ZD1hLmxlbmd0aDthKz0iMDAwMDAwMDAiO2ZvcihiPTA7YjxhLmxlbmd0aDtiKz04KWMucHVzaChwYXJzZUludChhLnN1YnN0cihiLDgpLDE2KV4wKTtyZXR1cm4gc2pjbC5iaXRBcnJheS5jbGFtcChjLDQqZCl9fTsKc2pjbC5jb2RlYy5iYXNlNjQ9e0o6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLGZyb21CaXRzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iIixlPTAsZj1zamNsLmNvZGVjLmJhc2U2NC5KLGc9MCxoPXNqY2wuYml0QXJyYXkuYml0TGVuZ3RoKGEpO2MmJihmPWYuc3Vic3RyKDAsNjIpKyItXyIpO2ZvcihjPTA7NipkLmxlbmd0aDxoOylkKz1mLmNoYXJBdCgoZ15hW2NdPj4+ZSk+Pj4yNiksNj5lPyhnPWFbY108PDYtZSxlKz0yNixjKyspOihnPDw9NixlLT02KTtmb3IoO2QubGVuZ3RoJjMmJiFiOylkKz0iPSI7cmV0dXJuIGR9LHRvQml0czpmdW5jdGlvbihhLGIpe2E9YS5yZXBsYWNlKC9cc3w9L2csIiIpO3ZhciBjPVtdLGQsZT0wLGY9c2pjbC5jb2RlYy5iYXNlNjQuSixnPTAsaDtiJiYoZj1mLnN1YnN0cigwLDYyKSsiLV8iKTtmb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKWg9Zi5pbmRleE9mKGEuY2hhckF0KGQpKSwKMD5oJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJ0aGlzIGlzbid0IGJhc2U2NCEiKSksMjY8ZT8oZS09MjYsYy5wdXNoKGdeaD4+PmUpLGc9aDw8MzItZSk6KGUrPTYsZ149aDw8MzItZSk7ZSY1NiYmYy5wdXNoKHNqY2wuYml0QXJyYXkucGFydGlhbChlJjU2LGcsMSkpO3JldHVybiBjfX07c2pjbC5jb2RlYy5iYXNlNjR1cmw9e2Zyb21CaXRzOmZ1bmN0aW9uKGEpe3JldHVybiBzamNsLmNvZGVjLmJhc2U2NC5mcm9tQml0cyhhLDEsMSl9LHRvQml0czpmdW5jdGlvbihhKXtyZXR1cm4gc2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGEsMSl9fTtzamNsLmhhc2guc2hhMjU2PWZ1bmN0aW9uKGEpe3RoaXMuYlswXXx8dGhpcy5EKCk7YT8odGhpcy5yPWEuci5zbGljZSgwKSx0aGlzLm89YS5vLnNsaWNlKDApLHRoaXMuaD1hLmgpOnRoaXMucmVzZXQoKX07c2pjbC5oYXNoLnNoYTI1Ni5oYXNoPWZ1bmN0aW9uKGEpe3JldHVybihuZXcgc2pjbC5oYXNoLnNoYTI1NikudXBkYXRlKGEpLmZpbmFsaXplKCl9OwpzamNsLmhhc2guc2hhMjU2LnByb3RvdHlwZT17YmxvY2tTaXplOjUxMixyZXNldDpmdW5jdGlvbigpe3RoaXMucj10aGlzLk4uc2xpY2UoMCk7dGhpcy5vPVtdO3RoaXMuaD0wO3JldHVybiB0aGlzfSx1cGRhdGU6ZnVuY3Rpb24oYSl7InN0cmluZyI9PT10eXBlb2YgYSYmKGE9c2pjbC5jb2RlYy51dGY4U3RyaW5nLnRvQml0cyhhKSk7dmFyIGIsYz10aGlzLm89c2pjbC5iaXRBcnJheS5jb25jYXQodGhpcy5vLGEpO2I9dGhpcy5oO2E9dGhpcy5oPWIrc2pjbC5iaXRBcnJheS5iaXRMZW5ndGgoYSk7Zm9yKGI9NTEyK2ImLTUxMjtiPD1hO2IrPTUxMil4KHRoaXMsYy5zcGxpY2UoMCwxNikpO3JldHVybiB0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5vLGM9dGhpcy5yLGI9c2pjbC5iaXRBcnJheS5jb25jYXQoYixbc2pjbC5iaXRBcnJheS5wYXJ0aWFsKDEsMSldKTtmb3IoYT1iLmxlbmd0aCsyO2EmMTU7YSsrKWIucHVzaCgwKTtiLnB1c2goTWF0aC5mbG9vcih0aGlzLmgvCjQyOTQ5NjcyOTYpKTtmb3IoYi5wdXNoKHRoaXMuaHwwKTtiLmxlbmd0aDspeCh0aGlzLGIuc3BsaWNlKDAsMTYpKTt0aGlzLnJlc2V0KCk7cmV0dXJuIGN9LE46W10sYjpbXSxEOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gMHgxMDAwMDAwMDAqKGEtTWF0aC5mbG9vcihhKSl8MH12YXIgYj0wLGM9MixkO2E6Zm9yKDs2ND5iO2MrKyl7Zm9yKGQ9MjtkKmQ8PWM7ZCsrKWlmKDA9PT1jJWQpY29udGludWUgYTs4PmImJih0aGlzLk5bYl09YShNYXRoLnBvdyhjLDAuNSkpKTt0aGlzLmJbYl09YShNYXRoLnBvdyhjLDEvMykpO2IrK319fTsKZnVuY3Rpb24geChhLGIpe3ZhciBjLGQsZSxmPWIuc2xpY2UoMCksZz1hLnIsaD1hLmIsbD1nWzBdLGs9Z1sxXSxuPWdbMl0sbT1nWzNdLHA9Z1s0XSx0PWdbNV0scj1nWzZdLHY9Z1s3XTtmb3IoYz0wOzY0PmM7YysrKTE2PmM/ZD1mW2NdOihkPWZbYysxJjE1XSxlPWZbYysxNCYxNV0sZD1mW2MmMTVdPShkPj4+N15kPj4+MTheZD4+PjNeZDw8MjVeZDw8MTQpKyhlPj4+MTdeZT4+PjE5XmU+Pj4xMF5lPDwxNV5lPDwxMykrZltjJjE1XStmW2MrOSYxNV18MCksZD1kK3YrKHA+Pj42XnA+Pj4xMV5wPj4+MjVecDw8MjZecDw8MjFecDw8NykrKHJecCYodF5yKSkraFtjXSx2PXIscj10LHQ9cCxwPW0rZHwwLG09bixuPWssaz1sLGw9ZCsoayZuXm0mKGtebikpKyhrPj4+Ml5rPj4+MTNeaz4+PjIyXms8PDMwXms8PDE5Xms8PDEwKXwwO2dbMF09Z1swXStsfDA7Z1sxXT1nWzFdK2t8MDtnWzJdPWdbMl0rbnwwO2dbM109Z1szXSttfDA7Z1s0XT1nWzRdK3B8MDtnWzVdPWdbNV0rdHwwO2dbNl09CmdbNl0rcnwwO2dbN109Z1s3XSt2fDB9CnNqY2wubW9kZS5jY209e25hbWU6ImNjbSIsZW5jcnlwdDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGc9Yi5zbGljZSgwKSxoPXNqY2wuYml0QXJyYXksbD1oLmJpdExlbmd0aChjKS84LGs9aC5iaXRMZW5ndGgoZykvODtlPWV8fDY0O2Q9ZHx8W107Nz5sJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJjY206IGl2IG11c3QgYmUgYXQgbGVhc3QgNyBieXRlcyIpKTtmb3IoZj0yOzQ+ZiYmaz4+PjgqZjtmKyspO2Y8MTUtbCYmKGY9MTUtbCk7Yz1oLmNsYW1wKGMsOCooMTUtZikpO2I9c2pjbC5tb2RlLmNjbS5MKGEsYixjLGQsZSxmKTtnPXNqY2wubW9kZS5jY20ucChhLGcsYyxiLGUsZik7cmV0dXJuIGguY29uY2F0KGcuZGF0YSxnLnRhZyl9LGRlY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtlPWV8fDY0O2Q9ZHx8W107dmFyIGY9c2pjbC5iaXRBcnJheSxnPWYuYml0TGVuZ3RoKGMpLzgsaD1mLmJpdExlbmd0aChiKSxsPWYuY2xhbXAoYixoLWUpLGs9Zi5iaXRTbGljZShiLApoLWUpLGg9KGgtZSkvODs3PmcmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImNjbTogaXYgbXVzdCBiZSBhdCBsZWFzdCA3IGJ5dGVzIikpO2ZvcihiPTI7ND5iJiZoPj4+OCpiO2IrKyk7YjwxNS1nJiYoYj0xNS1nKTtjPWYuY2xhbXAoYyw4KigxNS1iKSk7bD1zamNsLm1vZGUuY2NtLnAoYSxsLGMsayxlLGIpO2E9c2pjbC5tb2RlLmNjbS5MKGEsbC5kYXRhLGMsZCxlLGIpO2YuZXF1YWwobC50YWcsYSl8fHEobmV3IHNqY2wuZXhjZXB0aW9uLmNvcnJ1cHQoImNjbTogdGFnIGRvZXNuJ3QgbWF0Y2giKSk7cmV0dXJuIGwuZGF0YX0sTDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9W10saD1zamNsLmJpdEFycmF5LGw9aC5sO2UvPTg7KGUlMnx8ND5lfHwxNjxlKSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgiY2NtOiBpbnZhbGlkIHRhZyBsZW5ndGgiKSk7KDB4ZmZmZmZmZmY8ZC5sZW5ndGh8fDB4ZmZmZmZmZmY8Yi5sZW5ndGgpJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5idWcoImNjbTogY2FuJ3QgZGVhbCB3aXRoIDRHaUIgb3IgbW9yZSBkYXRhIikpOwpmPVtoLnBhcnRpYWwoOCwoZC5sZW5ndGg/NjQ6MCl8ZS0yPDwyfGYtMSldO2Y9aC5jb25jYXQoZixjKTtmWzNdfD1oLmJpdExlbmd0aChiKS84O2Y9YS5lbmNyeXB0KGYpO2lmKGQubGVuZ3RoKXtjPWguYml0TGVuZ3RoKGQpLzg7NjUyNzk+PWM/Zz1baC5wYXJ0aWFsKDE2LGMpXToweGZmZmZmZmZmPj1jJiYoZz1oLmNvbmNhdChbaC5wYXJ0aWFsKDE2LDY1NTM0KV0sW2NdKSk7Zz1oLmNvbmNhdChnLGQpO2ZvcihkPTA7ZDxnLmxlbmd0aDtkKz00KWY9YS5lbmNyeXB0KGwoZixnLnNsaWNlKGQsZCs0KS5jb25jYXQoWzAsMCwwXSkpKX1mb3IoZD0wO2Q8Yi5sZW5ndGg7ZCs9NClmPWEuZW5jcnlwdChsKGYsYi5zbGljZShkLGQrNCkuY29uY2F0KFswLDAsMF0pKSk7cmV0dXJuIGguY2xhbXAoZiw4KmUpfSxwOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZyxoPXNqY2wuYml0QXJyYXk7Zz1oLmw7dmFyIGw9Yi5sZW5ndGgsaz1oLmJpdExlbmd0aChiKTtjPWguY29uY2F0KFtoLnBhcnRpYWwoOCwKZi0xKV0sYykuY29uY2F0KFswLDAsMF0pLnNsaWNlKDAsNCk7ZD1oLmJpdFNsaWNlKGcoZCxhLmVuY3J5cHQoYykpLDAsZSk7aWYoIWwpcmV0dXJue3RhZzpkLGRhdGE6W119O2ZvcihnPTA7ZzxsO2crPTQpY1szXSsrLGU9YS5lbmNyeXB0KGMpLGJbZ11ePWVbMF0sYltnKzFdXj1lWzFdLGJbZysyXV49ZVsyXSxiW2crM11ePWVbM107cmV0dXJue3RhZzpkLGRhdGE6aC5jbGFtcChiLGspfX19OwpzamNsLm1vZGUub2NiMj17bmFtZToib2NiMiIsZW5jcnlwdDpmdW5jdGlvbihhLGIsYyxkLGUsZil7MTI4IT09c2pjbC5iaXRBcnJheS5iaXRMZW5ndGgoYykmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoIm9jYiBpdiBtdXN0IGJlIDEyOCBiaXRzIikpO3ZhciBnLGg9c2pjbC5tb2RlLm9jYjIuSCxsPXNqY2wuYml0QXJyYXksaz1sLmwsbj1bMCwwLDAsMF07Yz1oKGEuZW5jcnlwdChjKSk7dmFyIG0scD1bXTtkPWR8fFtdO2U9ZXx8NjQ7Zm9yKGc9MDtnKzQ8Yi5sZW5ndGg7Zys9NCltPWIuc2xpY2UoZyxnKzQpLG49ayhuLG0pLHA9cC5jb25jYXQoayhjLGEuZW5jcnlwdChrKGMsbSkpKSksYz1oKGMpO209Yi5zbGljZShnKTtiPWwuYml0TGVuZ3RoKG0pO2c9YS5lbmNyeXB0KGsoYyxbMCwwLDAsYl0pKTttPWwuY2xhbXAoayhtLmNvbmNhdChbMCwwLDBdKSxnKSxiKTtuPWsobixrKG0uY29uY2F0KFswLDAsMF0pLGcpKTtuPWEuZW5jcnlwdChrKG4sayhjLGgoYykpKSk7ZC5sZW5ndGgmJgoobj1rKG4sZj9kOnNqY2wubW9kZS5vY2IyLnBtYWMoYSxkKSkpO3JldHVybiBwLmNvbmNhdChsLmNvbmNhdChtLGwuY2xhbXAobixlKSkpfSxkZWNyeXB0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXsxMjghPT1zamNsLmJpdEFycmF5LmJpdExlbmd0aChjKSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgib2NiIGl2IG11c3QgYmUgMTI4IGJpdHMiKSk7ZT1lfHw2NDt2YXIgZz1zamNsLm1vZGUub2NiMi5ILGg9c2pjbC5iaXRBcnJheSxsPWgubCxrPVswLDAsMCwwXSxuPWcoYS5lbmNyeXB0KGMpKSxtLHAsdD1zamNsLmJpdEFycmF5LmJpdExlbmd0aChiKS1lLHI9W107ZD1kfHxbXTtmb3IoYz0wO2MrNDx0LzMyO2MrPTQpbT1sKG4sYS5kZWNyeXB0KGwobixiLnNsaWNlKGMsYys0KSkpKSxrPWwoayxtKSxyPXIuY29uY2F0KG0pLG49ZyhuKTtwPXQtMzIqYzttPWEuZW5jcnlwdChsKG4sWzAsMCwwLHBdKSk7bT1sKG0saC5jbGFtcChiLnNsaWNlKGMpLHApLmNvbmNhdChbMCwwLDBdKSk7Cms9bChrLG0pO2s9YS5lbmNyeXB0KGwoayxsKG4sZyhuKSkpKTtkLmxlbmd0aCYmKGs9bChrLGY/ZDpzamNsLm1vZGUub2NiMi5wbWFjKGEsZCkpKTtoLmVxdWFsKGguY2xhbXAoayxlKSxoLmJpdFNsaWNlKGIsdCkpfHxxKG5ldyBzamNsLmV4Y2VwdGlvbi5jb3JydXB0KCJvY2I6IHRhZyBkb2Vzbid0IG1hdGNoIikpO3JldHVybiByLmNvbmNhdChoLmNsYW1wKG0scCkpfSxwbWFjOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1zamNsLm1vZGUub2NiMi5ILGU9c2pjbC5iaXRBcnJheSxmPWUubCxnPVswLDAsMCwwXSxoPWEuZW5jcnlwdChbMCwwLDAsMF0pLGg9ZihoLGQoZChoKSkpO2ZvcihjPTA7Yys0PGIubGVuZ3RoO2MrPTQpaD1kKGgpLGc9ZihnLGEuZW5jcnlwdChmKGgsYi5zbGljZShjLGMrNCkpKSk7Yz1iLnNsaWNlKGMpOzEyOD5lLmJpdExlbmd0aChjKSYmKGg9ZihoLGQoaCkpLGM9ZS5jb25jYXQoYyxbLTIxNDc0ODM2NDgsMCwwLDBdKSk7Zz1mKGcsYyk7cmV0dXJuIGEuZW5jcnlwdChmKGQoZihoLApkKGgpKSksZykpfSxIOmZ1bmN0aW9uKGEpe3JldHVyblthWzBdPDwxXmFbMV0+Pj4zMSxhWzFdPDwxXmFbMl0+Pj4zMSxhWzJdPDwxXmFbM10+Pj4zMSxhWzNdPDwxXjEzNSooYVswXT4+PjMxKV19fTsKc2pjbC5tb2RlLmdjbT17bmFtZToiZ2NtIixlbmNyeXB0OmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Yi5zbGljZSgwKTtiPXNqY2wuYml0QXJyYXk7ZD1kfHxbXTthPXNqY2wubW9kZS5nY20ucCghMCxhLGYsZCxjLGV8fDEyOCk7cmV0dXJuIGIuY29uY2F0KGEuZGF0YSxhLnRhZyl9LGRlY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1iLnNsaWNlKDApLGc9c2pjbC5iaXRBcnJheSxoPWcuYml0TGVuZ3RoKGYpO2U9ZXx8MTI4O2Q9ZHx8W107ZTw9aD8oYj1nLmJpdFNsaWNlKGYsaC1lKSxmPWcuYml0U2xpY2UoZiwwLGgtZSkpOihiPWYsZj1bXSk7YT1zamNsLm1vZGUuZ2NtLnAodSxhLGYsZCxjLGUpO2cuZXF1YWwoYS50YWcsYil8fHEobmV3IHNqY2wuZXhjZXB0aW9uLmNvcnJ1cHQoImdjbTogdGFnIGRvZXNuJ3QgbWF0Y2giKSk7cmV0dXJuIGEuZGF0YX0sWjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGcsaD1zamNsLmJpdEFycmF5Lmw7ZT1bMCwwLDAsMF07Zj1iLnNsaWNlKDApOwpmb3IoYz0wOzEyOD5jO2MrKyl7KGQ9MCE9PShhW01hdGguZmxvb3IoYy8zMildJjE8PDMxLWMlMzIpKSYmKGU9aChlLGYpKTtnPTAhPT0oZlszXSYxKTtmb3IoZD0zOzA8ZDtkLS0pZltkXT1mW2RdPj4+MXwoZltkLTFdJjEpPDwzMTtmWzBdPj4+PTE7ZyYmKGZbMF1ePS0weDFmMDAwMDAwKX1yZXR1cm4gZX0sZzpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT1jLmxlbmd0aDtiPWIuc2xpY2UoMCk7Zm9yKGQ9MDtkPGU7ZCs9NCliWzBdXj0weGZmZmZmZmZmJmNbZF0sYlsxXV49MHhmZmZmZmZmZiZjW2QrMV0sYlsyXV49MHhmZmZmZmZmZiZjW2QrMl0sYlszXV49MHhmZmZmZmZmZiZjW2QrM10sYj1zamNsLm1vZGUuZ2NtLlooYixhKTtyZXR1cm4gYn0scDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGcsaCxsLGssbixtLHAsdCxyPXNqY2wuYml0QXJyYXk7bT1jLmxlbmd0aDtwPXIuYml0TGVuZ3RoKGMpO3Q9ci5iaXRMZW5ndGgoZCk7aD1yLmJpdExlbmd0aChlKTtnPWIuZW5jcnlwdChbMCwKMCwwLDBdKTs5Nj09PWg/KGU9ZS5zbGljZSgwKSxlPXIuY29uY2F0KGUsWzFdKSk6KGU9c2pjbC5tb2RlLmdjbS5nKGcsWzAsMCwwLDBdLGUpLGU9c2pjbC5tb2RlLmdjbS5nKGcsZSxbMCwwLE1hdGguZmxvb3IoaC8weDEwMDAwMDAwMCksaCYweGZmZmZmZmZmXSkpO2g9c2pjbC5tb2RlLmdjbS5nKGcsWzAsMCwwLDBdLGQpO249ZS5zbGljZSgwKTtkPWguc2xpY2UoMCk7YXx8KGQ9c2pjbC5tb2RlLmdjbS5nKGcsaCxjKSk7Zm9yKGs9MDtrPG07ays9NCluWzNdKyssbD1iLmVuY3J5cHQobiksY1trXV49bFswXSxjW2srMV1ePWxbMV0sY1trKzJdXj1sWzJdLGNbayszXV49bFszXTtjPXIuY2xhbXAoYyxwKTthJiYoZD1zamNsLm1vZGUuZ2NtLmcoZyxoLGMpKTthPVtNYXRoLmZsb29yKHQvMHgxMDAwMDAwMDApLHQmMHhmZmZmZmZmZixNYXRoLmZsb29yKHAvMHgxMDAwMDAwMDApLHAmMHhmZmZmZmZmZl07ZD1zamNsLm1vZGUuZ2NtLmcoZyxkLGEpO2w9Yi5lbmNyeXB0KGUpO2RbMF1ePWxbMF07CmRbMV1ePWxbMV07ZFsyXV49bFsyXTtkWzNdXj1sWzNdO3JldHVybnt0YWc6ci5iaXRTbGljZShkLDAsZiksZGF0YTpjfX19O3NqY2wubWlzYy5obWFjPWZ1bmN0aW9uKGEsYil7dGhpcy5NPWI9Ynx8c2pjbC5oYXNoLnNoYTI1Njt2YXIgYz1bW10sW11dLGQsZT1iLnByb3RvdHlwZS5ibG9ja1NpemUvMzI7dGhpcy5uPVtuZXcgYixuZXcgYl07YS5sZW5ndGg+ZSYmKGE9Yi5oYXNoKGEpKTtmb3IoZD0wO2Q8ZTtkKyspY1swXVtkXT1hW2RdXjkwOTUyMjQ4NixjWzFdW2RdPWFbZF1eMTU0OTU1NjgyODt0aGlzLm5bMF0udXBkYXRlKGNbMF0pO3RoaXMublsxXS51cGRhdGUoY1sxXSk7dGhpcy5HPW5ldyBiKHRoaXMublswXSl9OwpzamNsLm1pc2MuaG1hYy5wcm90b3R5cGUuZW5jcnlwdD1zamNsLm1pc2MuaG1hYy5wcm90b3R5cGUubWFjPWZ1bmN0aW9uKGEpe3RoaXMuUSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgiZW5jcnlwdCBvbiBhbHJlYWR5IHVwZGF0ZWQgaG1hYyBjYWxsZWQhIikpO3RoaXMudXBkYXRlKGEpO3JldHVybiB0aGlzLmRpZ2VzdChhKX07c2pjbC5taXNjLmhtYWMucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5HPW5ldyB0aGlzLk0odGhpcy5uWzBdKTt0aGlzLlE9dX07c2pjbC5taXNjLmhtYWMucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhKXt0aGlzLlE9ITA7dGhpcy5HLnVwZGF0ZShhKX07c2pjbC5taXNjLmhtYWMucHJvdG90eXBlLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuRy5maW5hbGl6ZSgpLGE9KG5ldyB0aGlzLk0odGhpcy5uWzFdKSkudXBkYXRlKGEpLmZpbmFsaXplKCk7dGhpcy5yZXNldCgpO3JldHVybiBhfTsKc2pjbC5taXNjLnBia2RmMj1mdW5jdGlvbihhLGIsYyxkLGUpe2M9Y3x8MUUzOygwPmR8fDA+YykmJnEoc2pjbC5leGNlcHRpb24uaW52YWxpZCgiaW52YWxpZCBwYXJhbXMgdG8gcGJrZGYyIikpOyJzdHJpbmciPT09dHlwZW9mIGEmJihhPXNqY2wuY29kZWMudXRmOFN0cmluZy50b0JpdHMoYSkpOyJzdHJpbmciPT09dHlwZW9mIGImJihiPXNqY2wuY29kZWMudXRmOFN0cmluZy50b0JpdHMoYikpO2U9ZXx8c2pjbC5taXNjLmhtYWM7YT1uZXcgZShhKTt2YXIgZixnLGgsbCxrPVtdLG49c2pjbC5iaXRBcnJheTtmb3IobD0xOzMyKmsubGVuZ3RoPChkfHwxKTtsKyspe2U9Zj1hLmVuY3J5cHQobi5jb25jYXQoYixbbF0pKTtmb3IoZz0xO2c8YztnKyspe2Y9YS5lbmNyeXB0KGYpO2ZvcihoPTA7aDxmLmxlbmd0aDtoKyspZVtoXV49ZltoXX1rPWsuY29uY2F0KGUpfWQmJihrPW4uY2xhbXAoayxkKSk7cmV0dXJuIGt9OwpzamNsLnBybmc9ZnVuY3Rpb24oYSl7dGhpcy5jPVtuZXcgc2pjbC5oYXNoLnNoYTI1Nl07dGhpcy5pPVswXTt0aGlzLkY9MDt0aGlzLnM9e307dGhpcy5DPTA7dGhpcy5LPXt9O3RoaXMuTz10aGlzLmQ9dGhpcy5qPXRoaXMuVz0wO3RoaXMuYj1bMCwwLDAsMCwwLDAsMCwwXTt0aGlzLmY9WzAsMCwwLDBdO3RoaXMuQT1zO3RoaXMuQj1hO3RoaXMucT11O3RoaXMudz17cHJvZ3Jlc3M6e30sc2VlZGVkOnt9fTt0aGlzLm09dGhpcy5WPTA7dGhpcy50PTE7dGhpcy51PTI7dGhpcy5TPTB4MTAwMDA7dGhpcy5JPVswLDQ4LDY0LDk2LDEyOCwxOTIsMHgxMDAsMzg0LDUxMiw3NjgsMTAyNF07dGhpcy5UPTNFNDt0aGlzLlI9ODB9OwpzamNsLnBybmcucHJvdG90eXBlPXtyYW5kb21Xb3JkczpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ7ZD10aGlzLmlzUmVhZHkoYik7dmFyIGU7ZD09PXRoaXMubSYmcShuZXcgc2pjbC5leGNlcHRpb24ubm90UmVhZHkoImdlbmVyYXRvciBpc24ndCBzZWVkZWQiKSk7aWYoZCZ0aGlzLnUpe2Q9IShkJnRoaXMudCk7ZT1bXTt2YXIgZj0wLGc7dGhpcy5PPWVbMF09KG5ldyBEYXRlKS52YWx1ZU9mKCkrdGhpcy5UO2ZvcihnPTA7MTY+ZztnKyspZS5wdXNoKDB4MTAwMDAwMDAwKk1hdGgucmFuZG9tKCl8MCk7Zm9yKGc9MDtnPHRoaXMuYy5sZW5ndGgmJiEoZT1lLmNvbmNhdCh0aGlzLmNbZ10uZmluYWxpemUoKSksZis9dGhpcy5pW2ddLHRoaXMuaVtnXT0wLCFkJiZ0aGlzLkYmMTw8Zyk7ZysrKTt0aGlzLkY+PTE8PHRoaXMuYy5sZW5ndGgmJih0aGlzLmMucHVzaChuZXcgc2pjbC5oYXNoLnNoYTI1NiksdGhpcy5pLnB1c2goMCkpO3RoaXMuZC09ZjtmPnRoaXMuaiYmKHRoaXMuaj1mKTt0aGlzLkYrKzsKdGhpcy5iPXNqY2wuaGFzaC5zaGEyNTYuaGFzaCh0aGlzLmIuY29uY2F0KGUpKTt0aGlzLkE9bmV3IHNqY2wuY2lwaGVyLmFlcyh0aGlzLmIpO2ZvcihkPTA7ND5kJiYhKHRoaXMuZltkXT10aGlzLmZbZF0rMXwwLHRoaXMuZltkXSk7ZCsrKTt9Zm9yKGQ9MDtkPGE7ZCs9NCkwPT09KGQrMSkldGhpcy5TJiZBKHRoaXMpLGU9Qih0aGlzKSxjLnB1c2goZVswXSxlWzFdLGVbMl0sZVszXSk7QSh0aGlzKTtyZXR1cm4gYy5zbGljZSgwLGEpfSxzZXREZWZhdWx0UGFyYW5vaWE6ZnVuY3Rpb24oYSxiKXswPT09YSYmIlNldHRpbmcgcGFyYW5vaWE9MCB3aWxsIHJ1aW4geW91ciBzZWN1cml0eTsgdXNlIGl0IG9ubHkgZm9yIHRlc3RpbmciIT09YiYmcSgiU2V0dGluZyBwYXJhbm9pYT0wIHdpbGwgcnVpbiB5b3VyIHNlY3VyaXR5OyB1c2UgaXQgb25seSBmb3IgdGVzdGluZyIpO3RoaXMuQj1hfSxhZGRFbnRyb3B5OmZ1bmN0aW9uKGEsYixjKXtjPWN8fCJ1c2VyIjt2YXIgZCxlLGY9KG5ldyBEYXRlKS52YWx1ZU9mKCksCmc9dGhpcy5zW2NdLGg9dGhpcy5pc1JlYWR5KCksbD0wO2Q9dGhpcy5LW2NdO2Q9PT1zJiYoZD10aGlzLktbY109dGhpcy5XKyspO2c9PT1zJiYoZz10aGlzLnNbY109MCk7dGhpcy5zW2NdPSh0aGlzLnNbY10rMSkldGhpcy5jLmxlbmd0aDtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgIm51bWJlciI6Yj09PXMmJihiPTEpO3RoaXMuY1tnXS51cGRhdGUoW2QsdGhpcy5DKyssMSxiLGYsMSxhfDBdKTticmVhaztjYXNlICJvYmplY3QiOmM9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpO2lmKCJbb2JqZWN0IFVpbnQzMkFycmF5XSI9PT1jKXtlPVtdO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspZS5wdXNoKGFbY10pO2E9ZX1lbHNleyJbb2JqZWN0IEFycmF5XSIhPT1jJiYobD0xKTtmb3IoYz0wO2M8YS5sZW5ndGgmJiFsO2MrKykibnVtYmVyIiE9PXR5cGVvZiBhW2NdJiYobD0xKX1pZighbCl7aWYoYj09PXMpZm9yKGM9Yj0wO2M8YS5sZW5ndGg7YysrKWZvcihlPWFbY107MDxlOyliKyssCmU+Pj49MTt0aGlzLmNbZ10udXBkYXRlKFtkLHRoaXMuQysrLDIsYixmLGEubGVuZ3RoXS5jb25jYXQoYSkpfWJyZWFrO2Nhc2UgInN0cmluZyI6Yj09PXMmJihiPWEubGVuZ3RoKTt0aGlzLmNbZ10udXBkYXRlKFtkLHRoaXMuQysrLDMsYixmLGEubGVuZ3RoXSk7dGhpcy5jW2ddLnVwZGF0ZShhKTticmVhaztkZWZhdWx0Omw9MX1sJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5idWcoInJhbmRvbTogYWRkRW50cm9weSBvbmx5IHN1cHBvcnRzIG51bWJlciwgYXJyYXkgb2YgbnVtYmVycyBvciBzdHJpbmciKSk7dGhpcy5pW2ddKz1iO3RoaXMuZCs9YjtoPT09dGhpcy5tJiYodGhpcy5pc1JlYWR5KCkhPT10aGlzLm0mJkMoInNlZWRlZCIsTWF0aC5tYXgodGhpcy5qLHRoaXMuZCkpLEMoInByb2dyZXNzIix0aGlzLmdldFByb2dyZXNzKCkpKX0saXNSZWFkeTpmdW5jdGlvbihhKXthPXRoaXMuSVthIT09cz9hOnRoaXMuQl07cmV0dXJuIHRoaXMuaiYmdGhpcy5qPj1hP3RoaXMuaVswXT50aGlzLlImJgoobmV3IERhdGUpLnZhbHVlT2YoKT50aGlzLk8/dGhpcy51fHRoaXMudDp0aGlzLnQ6dGhpcy5kPj1hP3RoaXMudXx0aGlzLm06dGhpcy5tfSxnZXRQcm9ncmVzczpmdW5jdGlvbihhKXthPXRoaXMuSVthP2E6dGhpcy5CXTtyZXR1cm4gdGhpcy5qPj1hPzE6dGhpcy5kPmE/MTp0aGlzLmQvYX0sc3RhcnRDb2xsZWN0b3JzOmZ1bmN0aW9uKCl7dGhpcy5xfHwodGhpcy5hPXtsb2FkVGltZUNvbGxlY3RvcjpEKHRoaXMsdGhpcy5hYSksbW91c2VDb2xsZWN0b3I6RCh0aGlzLHRoaXMuYmEpLGtleWJvYXJkQ29sbGVjdG9yOkQodGhpcyx0aGlzLiQpLGFjY2VsZXJvbWV0ZXJDb2xsZWN0b3I6RCh0aGlzLHRoaXMuVSksdG91Y2hDb2xsZWN0b3I6RCh0aGlzLHRoaXMuZGEpfSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcj8od2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLHRoaXMuYS5sb2FkVGltZUNvbGxlY3Rvcix1KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLmEubW91c2VDb2xsZWN0b3IsCnUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlwcmVzcyIsdGhpcy5hLmtleWJvYXJkQ29sbGVjdG9yLHUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJkZXZpY2Vtb3Rpb24iLHRoaXMuYS5hY2NlbGVyb21ldGVyQ29sbGVjdG9yLHUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLHRoaXMuYS50b3VjaENvbGxlY3Rvcix1KSk6ZG9jdW1lbnQuYXR0YWNoRXZlbnQ/KGRvY3VtZW50LmF0dGFjaEV2ZW50KCJvbmxvYWQiLHRoaXMuYS5sb2FkVGltZUNvbGxlY3RvciksZG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9ubW91c2Vtb3ZlIix0aGlzLmEubW91c2VDb2xsZWN0b3IpLGRvY3VtZW50LmF0dGFjaEV2ZW50KCJrZXlwcmVzcyIsdGhpcy5hLmtleWJvYXJkQ29sbGVjdG9yKSk6cShuZXcgc2pjbC5leGNlcHRpb24uYnVnKCJjYW4ndCBhdHRhY2ggZXZlbnQiKSksdGhpcy5xPSEwKX0sc3RvcENvbGxlY3RvcnM6ZnVuY3Rpb24oKXt0aGlzLnEmJih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcj8KKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIix0aGlzLmEubG9hZFRpbWVDb2xsZWN0b3IsdSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5hLm1vdXNlQ29sbGVjdG9yLHUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlwcmVzcyIsdGhpcy5hLmtleWJvYXJkQ29sbGVjdG9yLHUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJkZXZpY2Vtb3Rpb24iLHRoaXMuYS5hY2NlbGVyb21ldGVyQ29sbGVjdG9yLHUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLHRoaXMuYS50b3VjaENvbGxlY3Rvcix1KSk6ZG9jdW1lbnQuZGV0YWNoRXZlbnQmJihkb2N1bWVudC5kZXRhY2hFdmVudCgib25sb2FkIix0aGlzLmEubG9hZFRpbWVDb2xsZWN0b3IpLGRvY3VtZW50LmRldGFjaEV2ZW50KCJvbm1vdXNlbW92ZSIsdGhpcy5hLm1vdXNlQ29sbGVjdG9yKSxkb2N1bWVudC5kZXRhY2hFdmVudCgia2V5cHJlc3MiLAp0aGlzLmEua2V5Ym9hcmRDb2xsZWN0b3IpKSx0aGlzLnE9dSl9LGFkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLndbYV1bdGhpcy5WKytdPWJ9LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcy53W2FdLGY9W107Zm9yKGQgaW4gZSllLmhhc093blByb3BlcnR5KGQpJiZlW2RdPT09YiYmZi5wdXNoKGQpO2ZvcihjPTA7YzxmLmxlbmd0aDtjKyspZD1mW2NdLGRlbGV0ZSBlW2RdfSwkOmZ1bmN0aW9uKCl7RSgxKX0sYmE6ZnVuY3Rpb24oYSl7dmFyIGIsYzt0cnl7Yj1hLnh8fGEuY2xpZW50WHx8YS5vZmZzZXRYfHwwLGM9YS55fHxhLmNsaWVudFl8fGEub2Zmc2V0WXx8MH1jYXRjaChkKXtjPWI9MH0wIT1iJiYwIT1jJiZzamNsLnJhbmRvbS5hZGRFbnRyb3B5KFtiLGNdLDIsIm1vdXNlIik7RSgwKX0sZGE6ZnVuY3Rpb24oYSl7YT1hLnRvdWNoZXNbMF18fGEuY2hhbmdlZFRvdWNoZXNbMF07c2pjbC5yYW5kb20uYWRkRW50cm9weShbYS5wYWdlWHx8CmEuY2xpZW50WCxhLnBhZ2VZfHxhLmNsaWVudFldLDEsInRvdWNoIik7RSgwKX0sYWE6ZnVuY3Rpb24oKXtFKDIpfSxVOmZ1bmN0aW9uKGEpe2E9YS5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5Lnh8fGEuYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eS55fHxhLmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHkuejtpZih3aW5kb3cub3JpZW50YXRpb24pe3ZhciBiPXdpbmRvdy5vcmllbnRhdGlvbjsibnVtYmVyIj09PXR5cGVvZiBiJiZzamNsLnJhbmRvbS5hZGRFbnRyb3B5KGIsMSwiYWNjZWxlcm9tZXRlciIpfWEmJnNqY2wucmFuZG9tLmFkZEVudHJvcHkoYSwyLCJhY2NlbGVyb21ldGVyIik7RSgwKX19O2Z1bmN0aW9uIEMoYSxiKXt2YXIgYyxkPXNqY2wucmFuZG9tLndbYV0sZT1bXTtmb3IoYyBpbiBkKWQuaGFzT3duUHJvcGVydHkoYykmJmUucHVzaChkW2NdKTtmb3IoYz0wO2M8ZS5sZW5ndGg7YysrKWVbY10oYil9CmZ1bmN0aW9uIEUoYSl7InVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cucGVyZm9ybWFuY2UmJiJmdW5jdGlvbiI9PT10eXBlb2Ygd2luZG93LnBlcmZvcm1hbmNlLm5vdz9zamNsLnJhbmRvbS5hZGRFbnRyb3B5KHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSxhLCJsb2FkdGltZSIpOnNqY2wucmFuZG9tLmFkZEVudHJvcHkoKG5ldyBEYXRlKS52YWx1ZU9mKCksYSwibG9hZHRpbWUiKX1mdW5jdGlvbiBBKGEpe2EuYj1CKGEpLmNvbmNhdChCKGEpKTthLkE9bmV3IHNqY2wuY2lwaGVyLmFlcyhhLmIpfWZ1bmN0aW9uIEIoYSl7Zm9yKHZhciBiPTA7ND5iJiYhKGEuZltiXT1hLmZbYl0rMXwwLGEuZltiXSk7YisrKTtyZXR1cm4gYS5BLmVuY3J5cHQoYS5mKX1mdW5jdGlvbiBEKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7Yi5hcHBseShhLGFyZ3VtZW50cyl9fXNqY2wucmFuZG9tPW5ldyBzamNsLnBybmcoNik7CmE6dHJ5e3ZhciBGLEcsSCxJO2lmKEk9InVuZGVmaW5lZCIhPT10eXBlb2YgbW9kdWxlKXt2YXIgSjtpZihKPW1vZHVsZS5leHBvcnRzKXt2YXIgSzt0cnl7Sz1yZXF1aXJlKCJjcnlwdG8iKX1jYXRjaChMKXtLPW51bGx9Sj0oRz1LKSYmRy5yYW5kb21CeXRlc31JPUp9aWYoSSlGPUcucmFuZG9tQnl0ZXMoMTI4KSxGPW5ldyBVaW50MzJBcnJheSgobmV3IFVpbnQ4QXJyYXkoRikpLmJ1ZmZlciksc2pjbC5yYW5kb20uYWRkRW50cm9weShGLDEwMjQsImNyeXB0b1sncmFuZG9tQnl0ZXMnXSIpO2Vsc2UgaWYoInVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93JiYidW5kZWZpbmVkIiE9PXR5cGVvZiBVaW50MzJBcnJheSl7SD1uZXcgVWludDMyQXJyYXkoMzIpO2lmKHdpbmRvdy5jcnlwdG8mJndpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKXdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKEgpO2Vsc2UgaWYod2luZG93Lm1zQ3J5cHRvJiZ3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKXdpbmRvdy5tc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMoSCk7CmVsc2UgYnJlYWsgYTtzamNsLnJhbmRvbS5hZGRFbnRyb3B5KEgsMTAyNCwiY3J5cHRvWydnZXRSYW5kb21WYWx1ZXMnXSIpfX1jYXRjaChNKXsidW5kZWZpbmVkIiE9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy5jb25zb2xlJiYoY29uc29sZS5sb2coIlRoZXJlIHdhcyBhbiBlcnJvciBjb2xsZWN0aW5nIGVudHJvcHkgZnJvbSB0aGUgYnJvd3NlcjoiKSxjb25zb2xlLmxvZyhNKSl9CnNqY2wuanNvbj17ZGVmYXVsdHM6e3Y6MSxpdGVyOjFFMyxrczoxMjgsdHM6NjQsbW9kZToiY2NtIixhZGF0YToiIixjaXBoZXI6ImFlcyJ9LFk6ZnVuY3Rpb24oYSxiLGMsZCl7Yz1jfHx7fTtkPWR8fHt9O3ZhciBlPXNqY2wuanNvbixmPWUuZSh7aXY6c2pjbC5yYW5kb20ucmFuZG9tV29yZHMoNCwwKX0sZS5kZWZhdWx0cyksZztlLmUoZixjKTtjPWYuYWRhdGE7InN0cmluZyI9PT10eXBlb2YgZi5zYWx0JiYoZi5zYWx0PXNqY2wuY29kZWMuYmFzZTY0LnRvQml0cyhmLnNhbHQpKTsic3RyaW5nIj09PXR5cGVvZiBmLml2JiYoZi5pdj1zamNsLmNvZGVjLmJhc2U2NC50b0JpdHMoZi5pdikpOyghc2pjbC5tb2RlW2YubW9kZV18fCFzamNsLmNpcGhlcltmLmNpcGhlcl18fCJzdHJpbmciPT09dHlwZW9mIGEmJjEwMD49Zi5pdGVyfHw2NCE9PWYudHMmJjk2IT09Zi50cyYmMTI4IT09Zi50c3x8MTI4IT09Zi5rcyYmMTkyIT09Zi5rcyYmMHgxMDAhPT1mLmtzfHwyPmYuaXYubGVuZ3RofHw0PApmLml2Lmxlbmd0aCkmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImpzb24gZW5jcnlwdDogaW52YWxpZCBwYXJhbWV0ZXJzIikpOyJzdHJpbmciPT09dHlwZW9mIGE/KGc9c2pjbC5taXNjLmNhY2hlZFBia2RmMihhLGYpLGE9Zy5rZXkuc2xpY2UoMCxmLmtzLzMyKSxmLnNhbHQ9Zy5zYWx0KTpzamNsLmVjYyYmYSBpbnN0YW5jZW9mIHNqY2wuZWNjLmVsR2FtYWwucHVibGljS2V5JiYoZz1hLmtlbSgpLGYua2VtdGFnPWcudGFnLGE9Zy5rZXkuc2xpY2UoMCxmLmtzLzMyKSk7InN0cmluZyI9PT10eXBlb2YgYiYmKGI9c2pjbC5jb2RlYy51dGY4U3RyaW5nLnRvQml0cyhiKSk7InN0cmluZyI9PT10eXBlb2YgYyYmKGYuYWRhdGE9Yz1zamNsLmNvZGVjLnV0ZjhTdHJpbmcudG9CaXRzKGMpKTtnPW5ldyBzamNsLmNpcGhlcltmLmNpcGhlcl0oYSk7ZS5lKGQsZik7ZC5rZXk9YTtmLmN0PXNqY2wubW9kZVtmLm1vZGVdLmVuY3J5cHQoZyxiLGYuaXYsYyxmLnRzKTtyZXR1cm4gZn0sCmVuY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9c2pjbC5qc29uLGY9ZS5ZLmFwcGx5KGUsYXJndW1lbnRzKTtyZXR1cm4gZS5lbmNvZGUoZil9LFg6ZnVuY3Rpb24oYSxiLGMsZCl7Yz1jfHx7fTtkPWR8fHt9O3ZhciBlPXNqY2wuanNvbjtiPWUuZShlLmUoZS5lKHt9LGUuZGVmYXVsdHMpLGIpLGMsITApO3ZhciBmLGc7Zj1iLmFkYXRhOyJzdHJpbmciPT09dHlwZW9mIGIuc2FsdCYmKGIuc2FsdD1zamNsLmNvZGVjLmJhc2U2NC50b0JpdHMoYi5zYWx0KSk7InN0cmluZyI9PT10eXBlb2YgYi5pdiYmKGIuaXY9c2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGIuaXYpKTsoIXNqY2wubW9kZVtiLm1vZGVdfHwhc2pjbC5jaXBoZXJbYi5jaXBoZXJdfHwic3RyaW5nIj09PXR5cGVvZiBhJiYxMDA+PWIuaXRlcnx8NjQhPT1iLnRzJiY5NiE9PWIudHMmJjEyOCE9PWIudHN8fDEyOCE9PWIua3MmJjE5MiE9PWIua3MmJjB4MTAwIT09Yi5rc3x8IWIuaXZ8fDI+Yi5pdi5sZW5ndGh8fDQ8Yi5pdi5sZW5ndGgpJiYKcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgianNvbiBkZWNyeXB0OiBpbnZhbGlkIHBhcmFtZXRlcnMiKSk7InN0cmluZyI9PT10eXBlb2YgYT8oZz1zamNsLm1pc2MuY2FjaGVkUGJrZGYyKGEsYiksYT1nLmtleS5zbGljZSgwLGIua3MvMzIpLGIuc2FsdD1nLnNhbHQpOnNqY2wuZWNjJiZhIGluc3RhbmNlb2Ygc2pjbC5lY2MuZWxHYW1hbC5zZWNyZXRLZXkmJihhPWEudW5rZW0oc2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGIua2VtdGFnKSkuc2xpY2UoMCxiLmtzLzMyKSk7InN0cmluZyI9PT10eXBlb2YgZiYmKGY9c2pjbC5jb2RlYy51dGY4U3RyaW5nLnRvQml0cyhmKSk7Zz1uZXcgc2pjbC5jaXBoZXJbYi5jaXBoZXJdKGEpO2Y9c2pjbC5tb2RlW2IubW9kZV0uZGVjcnlwdChnLGIuY3QsYi5pdixmLGIudHMpO2UuZShkLGIpO2Qua2V5PWE7cmV0dXJuIDE9PT1jLnJhdz9mOnNqY2wuY29kZWMudXRmOFN0cmluZy5mcm9tQml0cyhmKX0sZGVjcnlwdDpmdW5jdGlvbihhLGIsCmMsZCl7dmFyIGU9c2pjbC5qc29uO3JldHVybiBlLlgoYSxlLmRlY29kZShiKSxjLGQpfSxlbmNvZGU6ZnVuY3Rpb24oYSl7dmFyIGIsYz0ieyIsZD0iIjtmb3IoYiBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYikpc3dpdGNoKGIubWF0Y2goL15bYS16MC05XSskL2kpfHxxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJqc29uIGVuY29kZTogaW52YWxpZCBwcm9wZXJ0eSBuYW1lIikpLGMrPWQrJyInK2IrJyI6JyxkPSIsIix0eXBlb2YgYVtiXSl7Y2FzZSAibnVtYmVyIjpjYXNlICJib29sZWFuIjpjKz1hW2JdO2JyZWFrO2Nhc2UgInN0cmluZyI6Yys9JyInK2VzY2FwZShhW2JdKSsnIic7YnJlYWs7Y2FzZSAib2JqZWN0IjpjKz0nIicrc2pjbC5jb2RlYy5iYXNlNjQuZnJvbUJpdHMoYVtiXSwwKSsnIic7YnJlYWs7ZGVmYXVsdDpxKG5ldyBzamNsLmV4Y2VwdGlvbi5idWcoImpzb24gZW5jb2RlOiB1bnN1cHBvcnRlZCB0eXBlIikpfXJldHVybiBjKyJ9In0sZGVjb2RlOmZ1bmN0aW9uKGEpe2E9CmEucmVwbGFjZSgvXHMvZywiIik7YS5tYXRjaCgvXlx7LipcfSQvKXx8cShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgianNvbiBkZWNvZGU6IHRoaXMgaXNuJ3QganNvbiEiKSk7YT1hLnJlcGxhY2UoL15ce3xcfSQvZywiIikuc3BsaXQoLywvKTt2YXIgYj17fSxjLGQ7Zm9yKGM9MDtjPGEubGVuZ3RoO2MrKykoZD1hW2NdLm1hdGNoKC9eXHMqKD86KFsiJ10/KShbYS16XVthLXowLTldKilcMSlccyo6XHMqKD86KC0/XGQrKXwiKFthLXowLTkrXC8lKl8uQD1cLV0qKSJ8KHRydWV8ZmFsc2UpKSQvaSkpfHxxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJqc29uIGRlY29kZTogdGhpcyBpc24ndCBqc29uISIpKSxkWzNdP2JbZFsyXV09cGFyc2VJbnQoZFszXSwxMCk6ZFs0XT9iW2RbMl1dPWRbMl0ubWF0Y2goL14oY3R8YWRhdGF8c2FsdHxpdikkLyk/c2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGRbNF0pOnVuZXNjYXBlKGRbNF0pOmRbNV0mJihiW2RbMl1dPSJ0cnVlIj09PQpkWzVdKTtyZXR1cm4gYn0sZTpmdW5jdGlvbihhLGIsYyl7YT09PXMmJihhPXt9KTtpZihiPT09cylyZXR1cm4gYTtmb3IodmFyIGQgaW4gYiliLmhhc093blByb3BlcnR5KGQpJiYoYyYmKGFbZF0hPT1zJiZhW2RdIT09YltkXSkmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoInJlcXVpcmVkIHBhcmFtZXRlciBvdmVycmlkZGVuIikpLGFbZF09YltkXSk7cmV0dXJuIGF9LGZhOmZ1bmN0aW9uKGEsYil7dmFyIGM9e30sZDtmb3IoZCBpbiBhKWEuaGFzT3duUHJvcGVydHkoZCkmJmFbZF0hPT1iW2RdJiYoY1tkXT1hW2RdKTtyZXR1cm4gY30sZWE6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fSxkO2ZvcihkPTA7ZDxiLmxlbmd0aDtkKyspYVtiW2RdXSE9PXMmJihjW2JbZF1dPWFbYltkXV0pO3JldHVybiBjfX07c2pjbC5lbmNyeXB0PXNqY2wuanNvbi5lbmNyeXB0O3NqY2wuZGVjcnlwdD1zamNsLmpzb24uZGVjcnlwdDtzamNsLm1pc2MuY2E9e307CnNqY2wubWlzYy5jYWNoZWRQYmtkZjI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1zamNsLm1pc2MuY2EsZDtiPWJ8fHt9O2Q9Yi5pdGVyfHwxRTM7Yz1jW2FdPWNbYV18fHt9O2Q9Y1tkXT1jW2RdfHx7Zmlyc3RTYWx0OmIuc2FsdCYmYi5zYWx0Lmxlbmd0aD9iLnNhbHQuc2xpY2UoMCk6c2pjbC5yYW5kb20ucmFuZG9tV29yZHMoMiwwKX07Yz1iLnNhbHQ9PT1zP2QuZmlyc3RTYWx0OmIuc2FsdDtkW2NdPWRbY118fHNqY2wubWlzYy5wYmtkZjIoYSxjLGIuaXRlcik7cmV0dXJue2tleTpkW2NdLnNsaWNlKDApLHNhbHQ6Yy5zbGljZSgwKX19OwoKfSx7ImNyeXB0byI6ODV9XSwxNzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQovLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAovLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwovLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgovLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgptb2R1bGUuZXhwb3J0cyA9IFN0cmVhbTsKCnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCmluaGVyaXRzKFN0cmVhbSwgRUUpOwpTdHJlYW0uUmVhZGFibGUgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanMnKTsKU3RyZWFtLldyaXRhYmxlID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3dyaXRhYmxlLmpzJyk7ClN0cmVhbS5EdXBsZXggPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vZHVwbGV4LmpzJyk7ClN0cmVhbS5UcmFuc2Zvcm0gPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzJyk7ClN0cmVhbS5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcycpOwoKLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC40LngKU3RyZWFtLlN0cmVhbSA9IFN0cmVhbTsKCgoKLy8gb2xkLXN0eWxlIHN0cmVhbXMuICBOb3RlIHRoYXQgdGhlIHBpcGUgbWV0aG9kICh0aGUgb25seSByZWxldmFudAovLyBwYXJ0IG9mIHRoaXMgY2xhc3MpIGlzIG92ZXJyaWRkZW4gaW4gdGhlIFJlYWRhYmxlIGNsYXNzLgoKZnVuY3Rpb24gU3RyZWFtKCkgewogIEVFLmNhbGwodGhpcyk7Cn0KClN0cmVhbS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIG9wdGlvbnMpIHsKICB2YXIgc291cmNlID0gdGhpczsKCiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7CiAgICBpZiAoZGVzdC53cml0YWJsZSkgewogICAgICBpZiAoZmFsc2UgPT09IGRlc3Qud3JpdGUoY2h1bmspICYmIHNvdXJjZS5wYXVzZSkgewogICAgICAgIHNvdXJjZS5wYXVzZSgpOwogICAgICB9CiAgICB9CiAgfQoKICBzb3VyY2Uub24oJ2RhdGEnLCBvbmRhdGEpOwoKICBmdW5jdGlvbiBvbmRyYWluKCkgewogICAgaWYgKHNvdXJjZS5yZWFkYWJsZSAmJiBzb3VyY2UucmVzdW1lKSB7CiAgICAgIHNvdXJjZS5yZXN1bWUoKTsKICAgIH0KICB9CgogIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7CgogIC8vIElmIHRoZSAnZW5kJyBvcHRpb24gaXMgbm90IHN1cHBsaWVkLCBkZXN0LmVuZCgpIHdpbGwgYmUgY2FsbGVkIHdoZW4KICAvLyBzb3VyY2UgZ2V0cyB0aGUgJ2VuZCcgb3IgJ2Nsb3NlJyBldmVudHMuICBPbmx5IGRlc3QuZW5kKCkgb25jZS4KICBpZiAoIWRlc3QuX2lzU3RkaW8gJiYgKCFvcHRpb25zIHx8IG9wdGlvbnMuZW5kICE9PSBmYWxzZSkpIHsKICAgIHNvdXJjZS5vbignZW5kJywgb25lbmQpOwogICAgc291cmNlLm9uKCdjbG9zZScsIG9uY2xvc2UpOwogIH0KCiAgdmFyIGRpZE9uRW5kID0gZmFsc2U7CiAgZnVuY3Rpb24gb25lbmQoKSB7CiAgICBpZiAoZGlkT25FbmQpIHJldHVybjsKICAgIGRpZE9uRW5kID0gdHJ1ZTsKCiAgICBkZXN0LmVuZCgpOwogIH0KCgogIGZ1bmN0aW9uIG9uY2xvc2UoKSB7CiAgICBpZiAoZGlkT25FbmQpIHJldHVybjsKICAgIGRpZE9uRW5kID0gdHJ1ZTsKCiAgICBpZiAodHlwZW9mIGRlc3QuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgZGVzdC5kZXN0cm95KCk7CiAgfQoKICAvLyBkb24ndCBsZWF2ZSBkYW5nbGluZyBwaXBlcyB3aGVuIHRoZXJlIGFyZSBlcnJvcnMuCiAgZnVuY3Rpb24gb25lcnJvcihlcikgewogICAgY2xlYW51cCgpOwogICAgaWYgKEVFLmxpc3RlbmVyQ291bnQodGhpcywgJ2Vycm9yJykgPT09IDApIHsKICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCBzdHJlYW0gZXJyb3IgaW4gcGlwZS4KICAgIH0KICB9CgogIHNvdXJjZS5vbignZXJyb3InLCBvbmVycm9yKTsKICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpOwoKICAvLyByZW1vdmUgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMgdGhhdCB3ZXJlIGFkZGVkLgogIGZ1bmN0aW9uIGNsZWFudXAoKSB7CiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTsKCiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTsKICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTsKCiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpOwoKICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7CiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7CgogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTsKICB9CgogIHNvdXJjZS5vbignZW5kJywgY2xlYW51cCk7CiAgc291cmNlLm9uKCdjbG9zZScsIGNsZWFudXApOwoKICBkZXN0Lm9uKCdjbG9zZScsIGNsZWFudXApOwoKICBkZXN0LmVtaXQoJ3BpcGUnLCBzb3VyY2UpOwoKICAvLyBBbGxvdyBmb3IgdW5peC1saWtlIHVzYWdlOiBBLnBpcGUoQikucGlwZShDKQogIHJldHVybiBkZXN0Owp9OwoKfSx7ImV2ZW50cyI6MTE4LCJpbmhlcml0cyI6MTI5LCJyZWFkYWJsZS1zdHJlYW0vZHVwbGV4LmpzIjoxNDksInJlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcyI6MTU1LCJyZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanMiOjE1NiwicmVhZGFibGUtc3RyZWFtL3RyYW5zZm9ybS5qcyI6MTU3LCJyZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMiOjE1OH1dLDE3MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQovLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCi8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAovLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0Ci8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQovLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgovLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7Cgp2YXIgaXNCdWZmZXJFbmNvZGluZyA9IEJ1ZmZlci5pc0VuY29kaW5nCiAgfHwgZnVuY3Rpb24oZW5jb2RpbmcpIHsKICAgICAgIHN3aXRjaCAoZW5jb2RpbmcgJiYgZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkgewogICAgICAgICBjYXNlICdoZXgnOiBjYXNlICd1dGY4JzogY2FzZSAndXRmLTgnOiBjYXNlICdhc2NpaSc6IGNhc2UgJ2JpbmFyeSc6IGNhc2UgJ2Jhc2U2NCc6IGNhc2UgJ3VjczInOiBjYXNlICd1Y3MtMic6IGNhc2UgJ3V0ZjE2bGUnOiBjYXNlICd1dGYtMTZsZSc6IGNhc2UgJ3Jhdyc6IHJldHVybiB0cnVlOwogICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7CiAgICAgICB9CiAgICAgfQoKCmZ1bmN0aW9uIGFzc2VydEVuY29kaW5nKGVuY29kaW5nKSB7CiAgaWYgKGVuY29kaW5nICYmICFpc0J1ZmZlckVuY29kaW5nKGVuY29kaW5nKSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpOwogIH0KfQoKLy8gU3RyaW5nRGVjb2RlciBwcm92aWRlcyBhbiBpbnRlcmZhY2UgZm9yIGVmZmljaWVudGx5IHNwbGl0dGluZyBhIHNlcmllcyBvZgovLyBidWZmZXJzIGludG8gYSBzZXJpZXMgb2YgSlMgc3RyaW5ncyB3aXRob3V0IGJyZWFraW5nIGFwYXJ0IG11bHRpLWJ5dGUKLy8gY2hhcmFjdGVycy4gQ0VTVS04IGlzIGhhbmRsZWQgYXMgcGFydCBvZiB0aGUgVVRGLTggZW5jb2RpbmcuCi8vCi8vIEBUT0RPIEhhbmRsaW5nIGFsbCBlbmNvZGluZ3MgaW5zaWRlIGEgc2luZ2xlIG9iamVjdCBtYWtlcyBpdCB2ZXJ5IGRpZmZpY3VsdAovLyB0byByZWFzb24gYWJvdXQgdGhpcyBjb2RlLCBzbyBpdCBzaG91bGQgYmUgc3BsaXQgdXAgaW4gdGhlIGZ1dHVyZS4KLy8gQFRPRE8gVGhlcmUgc2hvdWxkIGJlIGEgdXRmOC1zdHJpY3QgZW5jb2RpbmcgdGhhdCByZWplY3RzIGludmFsaWQgVVRGLTggY29kZQovLyBwb2ludHMgYXMgdXNlZCBieSBDRVNVLTguCnZhciBTdHJpbmdEZWNvZGVyID0gZXhwb3J0cy5TdHJpbmdEZWNvZGVyID0gZnVuY3Rpb24oZW5jb2RpbmcpIHsKICB0aGlzLmVuY29kaW5nID0gKGVuY29kaW5nIHx8ICd1dGY4JykudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bLV9dLywgJycpOwogIGFzc2VydEVuY29kaW5nKGVuY29kaW5nKTsKICBzd2l0Y2ggKHRoaXMuZW5jb2RpbmcpIHsKICAgIGNhc2UgJ3V0ZjgnOgogICAgICAvLyBDRVNVLTggcmVwcmVzZW50cyBlYWNoIG9mIFN1cnJvZ2F0ZSBQYWlyIGJ5IDMtYnl0ZXMKICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMzsKICAgICAgYnJlYWs7CiAgICBjYXNlICd1Y3MyJzoKICAgIGNhc2UgJ3V0ZjE2bGUnOgogICAgICAvLyBVVEYtMTYgcmVwcmVzZW50cyBlYWNoIG9mIFN1cnJvZ2F0ZSBQYWlyIGJ5IDItYnl0ZXMKICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMjsKICAgICAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXI7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnYmFzZTY0JzoKICAgICAgLy8gQmFzZS02NCBzdG9yZXMgMyBieXRlcyBpbiA0IGNoYXJzLCBhbmQgcGFkcyB0aGUgcmVtYWluZGVyLgogICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAzOwogICAgICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyID0gYmFzZTY0RGV0ZWN0SW5jb21wbGV0ZUNoYXI7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgdGhpcy53cml0ZSA9IHBhc3NUaHJvdWdoV3JpdGU7CiAgICAgIHJldHVybjsKICB9CgogIC8vIEVub3VnaCBzcGFjZSB0byBzdG9yZSBhbGwgYnl0ZXMgb2YgYSBzaW5nbGUgY2hhcmFjdGVyLiBVVEYtOCBuZWVkcyA0CiAgLy8gYnl0ZXMsIGJ1dCBDRVNVLTggbWF5IHJlcXVpcmUgdXAgdG8gNiAoMyBieXRlcyBwZXIgc3Vycm9nYXRlKS4KICB0aGlzLmNoYXJCdWZmZXIgPSBuZXcgQnVmZmVyKDYpOwogIC8vIE51bWJlciBvZiBieXRlcyByZWNlaXZlZCBmb3IgdGhlIGN1cnJlbnQgaW5jb21wbGV0ZSBtdWx0aS1ieXRlIGNoYXJhY3Rlci4KICB0aGlzLmNoYXJSZWNlaXZlZCA9IDA7CiAgLy8gTnVtYmVyIG9mIGJ5dGVzIGV4cGVjdGVkIGZvciB0aGUgY3VycmVudCBpbmNvbXBsZXRlIG11bHRpLWJ5dGUgY2hhcmFjdGVyLgogIHRoaXMuY2hhckxlbmd0aCA9IDA7Cn07CgoKLy8gd3JpdGUgZGVjb2RlcyB0aGUgZ2l2ZW4gYnVmZmVyIGFuZCByZXR1cm5zIGl0IGFzIEpTIHN0cmluZyB0aGF0IGlzCi8vIGd1YXJhbnRlZWQgdG8gbm90IGNvbnRhaW4gYW55IHBhcnRpYWwgbXVsdGktYnl0ZSBjaGFyYWN0ZXJzLiBBbnkgcGFydGlhbAovLyBjaGFyYWN0ZXIgZm91bmQgYXQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyIGlzIGJ1ZmZlcmVkIHVwLCBhbmQgd2lsbCBiZQovLyByZXR1cm5lZCB3aGVuIGNhbGxpbmcgd3JpdGUgYWdhaW4gd2l0aCB0aGUgcmVtYWluaW5nIGJ5dGVzLgovLwovLyBOb3RlOiBDb252ZXJ0aW5nIGEgQnVmZmVyIGNvbnRhaW5pbmcgYW4gb3JwaGFuIHN1cnJvZ2F0ZSB0byBhIFN0cmluZwovLyBjdXJyZW50bHkgd29ya3MsIGJ1dCBjb252ZXJ0aW5nIGEgU3RyaW5nIHRvIGEgQnVmZmVyICh2aWEgYG5ldyBCdWZmZXJgLCBvcgovLyBCdWZmZXIjd3JpdGUpIHdpbGwgcmVwbGFjZSBpbmNvbXBsZXRlIHN1cnJvZ2F0ZXMgd2l0aCB0aGUgdW5pY29kZQovLyByZXBsYWNlbWVudCBjaGFyYWN0ZXIuIFNlZSBodHRwczovL2NvZGVyZXZpZXcuY2hyb21pdW0ub3JnLzEyMTE3MzAwOS8gLgpTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGJ1ZmZlcikgewogIHZhciBjaGFyU3RyID0gJyc7CiAgLy8gaWYgb3VyIGxhc3Qgd3JpdGUgZW5kZWQgd2l0aCBhbiBpbmNvbXBsZXRlIG11bHRpYnl0ZSBjaGFyYWN0ZXIKICB3aGlsZSAodGhpcy5jaGFyTGVuZ3RoKSB7CiAgICAvLyBkZXRlcm1pbmUgaG93IG1hbnkgcmVtYWluaW5nIGJ5dGVzIHRoaXMgYnVmZmVyIGhhcyB0byBvZmZlciBmb3IgdGhpcyBjaGFyCiAgICB2YXIgYXZhaWxhYmxlID0gKGJ1ZmZlci5sZW5ndGggPj0gdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQpID8KICAgICAgICB0aGlzLmNoYXJMZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCA6CiAgICAgICAgYnVmZmVyLmxlbmd0aDsKCiAgICAvLyBhZGQgdGhlIG5ldyBieXRlcyB0byB0aGUgY2hhciBidWZmZXIKICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgdGhpcy5jaGFyUmVjZWl2ZWQsIDAsIGF2YWlsYWJsZSk7CiAgICB0aGlzLmNoYXJSZWNlaXZlZCArPSBhdmFpbGFibGU7CgogICAgaWYgKHRoaXMuY2hhclJlY2VpdmVkIDwgdGhpcy5jaGFyTGVuZ3RoKSB7CiAgICAgIC8vIHN0aWxsIG5vdCBlbm91Z2ggY2hhcnMgaW4gdGhpcyBidWZmZXI/IHdhaXQgZm9yIG1vcmUgLi4uCiAgICAgIHJldHVybiAnJzsKICAgIH0KCiAgICAvLyByZW1vdmUgYnl0ZXMgYmVsb25naW5nIHRvIHRoZSBjdXJyZW50IGNoYXJhY3RlciBmcm9tIHRoZSBidWZmZXIKICAgIGJ1ZmZlciA9IGJ1ZmZlci5zbGljZShhdmFpbGFibGUsIGJ1ZmZlci5sZW5ndGgpOwoKICAgIC8vIGdldCB0aGUgY2hhcmFjdGVyIHRoYXQgd2FzIHNwbGl0CiAgICBjaGFyU3RyID0gdGhpcy5jaGFyQnVmZmVyLnNsaWNlKDAsIHRoaXMuY2hhckxlbmd0aCkudG9TdHJpbmcodGhpcy5lbmNvZGluZyk7CgogICAgLy8gQ0VTVS04OiBsZWFkIHN1cnJvZ2F0ZSAoRDgwMC1EQkZGKSBpcyBhbHNvIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlcgogICAgdmFyIGNoYXJDb2RlID0gY2hhclN0ci5jaGFyQ29kZUF0KGNoYXJTdHIubGVuZ3RoIC0gMSk7CiAgICBpZiAoY2hhckNvZGUgPj0gMHhEODAwICYmIGNoYXJDb2RlIDw9IDB4REJGRikgewogICAgICB0aGlzLmNoYXJMZW5ndGggKz0gdGhpcy5zdXJyb2dhdGVTaXplOwogICAgICBjaGFyU3RyID0gJyc7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgdGhpcy5jaGFyUmVjZWl2ZWQgPSB0aGlzLmNoYXJMZW5ndGggPSAwOwoKICAgIC8vIGlmIHRoZXJlIGFyZSBubyBtb3JlIGJ5dGVzIGluIHRoaXMgYnVmZmVyLCBqdXN0IGVtaXQgb3VyIGNoYXIKICAgIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybiBjaGFyU3RyOwogICAgfQogICAgYnJlYWs7CiAgfQoKICAvLyBkZXRlcm1pbmUgYW5kIHNldCBjaGFyTGVuZ3RoIC8gY2hhclJlY2VpdmVkCiAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpOwoKICB2YXIgZW5kID0gYnVmZmVyLmxlbmd0aDsKICBpZiAodGhpcy5jaGFyTGVuZ3RoKSB7CiAgICAvLyBidWZmZXIgdGhlIGluY29tcGxldGUgY2hhcmFjdGVyIGJ5dGVzIHdlIGdvdAogICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCAwLCBidWZmZXIubGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQsIGVuZCk7CiAgICBlbmQgLT0gdGhpcy5jaGFyUmVjZWl2ZWQ7CiAgfQoKICBjaGFyU3RyICs9IGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCBlbmQpOwoKICB2YXIgZW5kID0gY2hhclN0ci5sZW5ndGggLSAxOwogIHZhciBjaGFyQ29kZSA9IGNoYXJTdHIuY2hhckNvZGVBdChlbmQpOwogIC8vIENFU1UtODogbGVhZCBzdXJyb2dhdGUgKEQ4MDAtREJGRikgaXMgYWxzbyB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXIKICBpZiAoY2hhckNvZGUgPj0gMHhEODAwICYmIGNoYXJDb2RlIDw9IDB4REJGRikgewogICAgdmFyIHNpemUgPSB0aGlzLnN1cnJvZ2F0ZVNpemU7CiAgICB0aGlzLmNoYXJMZW5ndGggKz0gc2l6ZTsKICAgIHRoaXMuY2hhclJlY2VpdmVkICs9IHNpemU7CiAgICB0aGlzLmNoYXJCdWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIHNpemUsIDAsIHNpemUpOwogICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCAwLCAwLCBzaXplKTsKICAgIHJldHVybiBjaGFyU3RyLnN1YnN0cmluZygwLCBlbmQpOwogIH0KCiAgLy8gb3IganVzdCBlbWl0IHRoZSBjaGFyU3RyCiAgcmV0dXJuIGNoYXJTdHI7Cn07CgovLyBkZXRlY3RJbmNvbXBsZXRlQ2hhciBkZXRlcm1pbmVzIGlmIHRoZXJlIGlzIGFuIGluY29tcGxldGUgVVRGLTggY2hhcmFjdGVyIGF0Ci8vIHRoZSBlbmQgb2YgdGhlIGdpdmVuIGJ1ZmZlci4gSWYgc28sIGl0IHNldHMgdGhpcy5jaGFyTGVuZ3RoIHRvIHRoZSBieXRlCi8vIGxlbmd0aCB0aGF0IGNoYXJhY3RlciwgYW5kIHNldHMgdGhpcy5jaGFyUmVjZWl2ZWQgdG8gdGhlIG51bWJlciBvZiBieXRlcwovLyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHRoaXMgY2hhcmFjdGVyLgpTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IGZ1bmN0aW9uKGJ1ZmZlcikgewogIC8vIGRldGVybWluZSBob3cgbWFueSBieXRlcyB3ZSBoYXZlIHRvIGNoZWNrIGF0IHRoZSBlbmQgb2YgdGhpcyBidWZmZXIKICB2YXIgaSA9IChidWZmZXIubGVuZ3RoID49IDMpID8gMyA6IGJ1ZmZlci5sZW5ndGg7CgogIC8vIEZpZ3VyZSBvdXQgaWYgb25lIG9mIHRoZSBsYXN0IGkgYnl0ZXMgb2Ygb3VyIGJ1ZmZlciBhbm5vdW5jZXMgYW4KICAvLyBpbmNvbXBsZXRlIGNoYXIuCiAgZm9yICg7IGkgPiAwOyBpLS0pIHsKICAgIHZhciBjID0gYnVmZmVyW2J1ZmZlci5sZW5ndGggLSBpXTsKCiAgICAvLyBTZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VVEYtOCNEZXNjcmlwdGlvbgoKICAgIC8vIDExMFhYWFhYCiAgICBpZiAoaSA9PSAxICYmIGMgPj4gNSA9PSAweDA2KSB7CiAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDI7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIC8vIDExMTBYWFhYCiAgICBpZiAoaSA8PSAyICYmIGMgPj4gNCA9PSAweDBFKSB7CiAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDM7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIC8vIDExMTEwWFhYCiAgICBpZiAoaSA8PSAzICYmIGMgPj4gMyA9PSAweDFFKSB7CiAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDQ7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICB0aGlzLmNoYXJSZWNlaXZlZCA9IGk7Cn07CgpTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihidWZmZXIpIHsKICB2YXIgcmVzID0gJyc7CiAgaWYgKGJ1ZmZlciAmJiBidWZmZXIubGVuZ3RoKQogICAgcmVzID0gdGhpcy53cml0ZShidWZmZXIpOwoKICBpZiAodGhpcy5jaGFyUmVjZWl2ZWQpIHsKICAgIHZhciBjciA9IHRoaXMuY2hhclJlY2VpdmVkOwogICAgdmFyIGJ1ZiA9IHRoaXMuY2hhckJ1ZmZlcjsKICAgIHZhciBlbmMgPSB0aGlzLmVuY29kaW5nOwogICAgcmVzICs9IGJ1Zi5zbGljZSgwLCBjcikudG9TdHJpbmcoZW5jKTsKICB9CgogIHJldHVybiByZXM7Cn07CgpmdW5jdGlvbiBwYXNzVGhyb3VnaFdyaXRlKGJ1ZmZlcikgewogIHJldHVybiBidWZmZXIudG9TdHJpbmcodGhpcy5lbmNvZGluZyk7Cn0KCmZ1bmN0aW9uIHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKSB7CiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBidWZmZXIubGVuZ3RoICUgMjsKICB0aGlzLmNoYXJMZW5ndGggPSB0aGlzLmNoYXJSZWNlaXZlZCA/IDIgOiAwOwp9CgpmdW5jdGlvbiBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpIHsKICB0aGlzLmNoYXJSZWNlaXZlZCA9IGJ1ZmZlci5sZW5ndGggJSAzOwogIHRoaXMuY2hhckxlbmd0aCA9IHRoaXMuY2hhclJlY2VpdmVkID8gMyA6IDA7Cn0KCn0seyJidWZmZXIiOjc2fV0sMTczOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCgpmdW5jdGlvbiBUZlR5cGVFcnJvciAodHlwZSwgdmFsdWUpIHsKICB0aGlzLnRmRXJyb3IgPSBFcnJvci5jYWxsKHRoaXMpCgogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykgewogICAgdGhpcy5tZXNzYWdlID0gdHlwZQogIH0gZWxzZSB7CiAgICB0aGlzLnRmVHlwZSA9IHR5cGUKICAgIHRoaXMudGZWYWx1ZSA9IHZhbHVlCgogICAgdmFyIG1lc3NhZ2UKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbWVzc2FnZScsIHsKICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKG1lc3NhZ2UpIHJldHVybiBtZXNzYWdlCiAgICAgICAgbWVzc2FnZSA9IHRmRXJyb3JTdHJpbmcodHlwZSwgdmFsdWUpCgogICAgICAgIHJldHVybiBtZXNzYWdlCiAgICAgIH0KICAgIH0pCiAgfQp9Cgppbmhlcml0cyhUZlR5cGVFcnJvciwgRXJyb3IpCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZlR5cGVFcnJvciwgJ3N0YWNrJywgeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMudGZFcnJvci5zdGFjayB9IH0pCgpmdW5jdGlvbiBUZlByb3BlcnR5VHlwZUVycm9yICh0eXBlLCBwcm9wZXJ0eSwgdmFsdWUsIGVycm9yKSB7CiAgdGhpcy50ZkVycm9yID0gZXJyb3IgfHwgRXJyb3IuY2FsbCh0aGlzKQogIHRoaXMudGZQcm9wZXJ0eSA9IHByb3BlcnR5CiAgdGhpcy50ZlR5cGUgPSB0eXBlCiAgdGhpcy50ZlZhbHVlID0gdmFsdWUKCiAgdmFyIG1lc3NhZ2UKICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ21lc3NhZ2UnLCB7CiAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKG1lc3NhZ2UpIHJldHVybiBtZXNzYWdlCiAgICAgIGlmICh0eXBlKSB7CiAgICAgICAgbWVzc2FnZSA9IHRmUHJvcGVydHlFcnJvclN0cmluZyh0eXBlLCBwcm9wZXJ0eSwgdmFsdWUpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWVzc2FnZSA9ICdVbmV4cGVjdGVkIHByb3BlcnR5ICInICsgcHJvcGVydHkgKyAnIicKICAgICAgfQoKICAgICAgcmV0dXJuIG1lc3NhZ2UKICAgIH0KICB9KQp9Cgppbmhlcml0cyhUZlByb3BlcnR5VHlwZUVycm9yLCBFcnJvcikKT2JqZWN0LmRlZmluZVByb3BlcnR5KFRmUHJvcGVydHlUeXBlRXJyb3IsICdzdGFjaycsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnRmRXJyb3Iuc3RhY2sgfSB9KQoKVGZQcm9wZXJ0eVR5cGVFcnJvci5wcm90b3R5cGUuYXNDaGlsZE9mID0gZnVuY3Rpb24gKHByb3BlcnR5KSB7CiAgcmV0dXJuIG5ldyBUZlByb3BlcnR5VHlwZUVycm9yKHRoaXMudGZUeXBlLCBwcm9wZXJ0eSArICcuJyArIHRoaXMudGZQcm9wZXJ0eSwgdGhpcy50ZlZhbHVlLCB0aGlzLnRmRXJyb3IpCn0KCmZ1bmN0aW9uIGdldEZ1bmN0aW9uTmFtZSAoZm4pIHsKICByZXR1cm4gZm4ubmFtZSB8fCBmbi50b1N0cmluZygpLm1hdGNoKC9mdW5jdGlvbiAoLio/KVxzKlwoLylbMV0KfQoKZnVuY3Rpb24gZ2V0VmFsdWVUeXBlTmFtZSAodmFsdWUpIHsKICBpZiAobmF0aXZlVHlwZXMuTnVsbCh2YWx1ZSkpIHJldHVybiAnJwoKICByZXR1cm4gZ2V0RnVuY3Rpb25OYW1lKHZhbHVlLmNvbnN0cnVjdG9yKQp9CgpmdW5jdGlvbiBnZXRWYWx1ZSAodmFsdWUpIHsKICBpZiAobmF0aXZlVHlwZXMuRnVuY3Rpb24odmFsdWUpKSByZXR1cm4gJycKICBpZiAobmF0aXZlVHlwZXMuU3RyaW5nKHZhbHVlKSkgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKQogIGlmICh2YWx1ZSAmJiBuYXRpdmVUeXBlcy5PYmplY3QodmFsdWUpKSByZXR1cm4gJycKCiAgcmV0dXJuIHZhbHVlCn0KCmZ1bmN0aW9uIHRmSlNPTiAodHlwZSkgewogIGlmIChuYXRpdmVUeXBlcy5GdW5jdGlvbih0eXBlKSkgcmV0dXJuIHR5cGUudG9KU09OID8gdHlwZS50b0pTT04oKSA6IGdldEZ1bmN0aW9uTmFtZSh0eXBlKQogIGlmIChuYXRpdmVUeXBlcy5BcnJheSh0eXBlKSkgcmV0dXJuICdBcnJheScKICBpZiAodHlwZSAmJiBuYXRpdmVUeXBlcy5PYmplY3QodHlwZSkpIHJldHVybiAnT2JqZWN0JwoKICByZXR1cm4gdHlwZSB8fCAnJwp9CgpmdW5jdGlvbiBzdGZKU09OICh0eXBlKSB7CiAgdHlwZSA9IHRmSlNPTih0eXBlKQoKICByZXR1cm4gbmF0aXZlVHlwZXMuT2JqZWN0KHR5cGUpID8gSlNPTi5zdHJpbmdpZnkodHlwZSkgOiB0eXBlCn0KCmZ1bmN0aW9uIHRmRXJyb3JTdHJpbmcgKHR5cGUsIHZhbHVlKSB7CiAgdmFyIHZhbHVlVHlwZU5hbWUgPSBnZXRWYWx1ZVR5cGVOYW1lKHZhbHVlKQogIHZhciB2YWx1ZVZhbHVlID0gZ2V0VmFsdWUodmFsdWUpCgogIHJldHVybiAnRXhwZWN0ZWQgJyArIHN0ZkpTT04odHlwZSkgKyAnLCBnb3QnICsgKHZhbHVlVHlwZU5hbWUgIT09ICcnID8gJyAnICsgdmFsdWVUeXBlTmFtZSA6ICcnKSArICh2YWx1ZVZhbHVlICE9PSAnJyA/ICcgJyArIHZhbHVlVmFsdWUgOiAnJykKfQoKZnVuY3Rpb24gdGZQcm9wZXJ0eUVycm9yU3RyaW5nICh0eXBlLCBuYW1lLCB2YWx1ZSkgewogIHJldHVybiB0ZkVycm9yU3RyaW5nKCdwcm9wZXJ0eSBcIicgKyBzdGZKU09OKG5hbWUpICsgJ1wiIG9mIHR5cGUgJyArIHN0ZkpTT04odHlwZSksIHZhbHVlKQp9Cgp2YXIgbmF0aXZlVHlwZXMgPSB7CiAgQXJyYXk6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgfSwKICBCb29sZWFuOiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nIH0sCiAgQnVmZmVyOiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcih2YWx1ZSkgfSwKICBGdW5jdGlvbjogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgfSwKICBOdWxsOiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwgfSwKICBOdW1iZXI6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB9LAogIE9iamVjdDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnIH0sCiAgU3RyaW5nOiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfSwKICAnJzogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZSB9Cn0KCnZhciBvdGhlclR5cGVzID0gewogIGFycmF5T2Y6IGZ1bmN0aW9uIGFycmF5T2YgKHR5cGUpIHsKICAgIGZ1bmN0aW9uIGFycmF5T2YgKHZhbHVlLCBzdHJpY3QpIHsKICAgICAgaWYgKCFuYXRpdmVUeXBlcy5BcnJheSh2YWx1ZSkpIHJldHVybiBmYWxzZQoKICAgICAgcmV0dXJuIHZhbHVlLmV2ZXJ5KGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIHR5cGVmb3JjZSh0eXBlLCB4LCBzdHJpY3QsIGFycmF5T2YpCiAgICAgIH0pCiAgICB9CiAgICBhcnJheU9mLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFt0ZkpTT04odHlwZSldIH0KCiAgICByZXR1cm4gYXJyYXlPZgogIH0sCgogIG1heWJlOiBmdW5jdGlvbiBtYXliZSAodHlwZSkgewogICAgZnVuY3Rpb24gbWF5YmUgKHZhbHVlLCBzdHJpY3QpIHsKICAgICAgcmV0dXJuIG5hdGl2ZVR5cGVzLk51bGwodmFsdWUpIHx8IHR5cGVmb3JjZSh0eXBlLCB2YWx1ZSwgc3RyaWN0LCBtYXliZSkKICAgIH0KICAgIG1heWJlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICc/JyArIHN0ZkpTT04odHlwZSkgfQoKICAgIHJldHVybiBtYXliZQogIH0sCgogIG9iamVjdDogZnVuY3Rpb24gb2JqZWN0ICh0eXBlKSB7CiAgICBmdW5jdGlvbiBvYmplY3QgKHZhbHVlLCBzdHJpY3QpIHsKICAgICAgaWYgKCFuYXRpdmVUeXBlcy5PYmplY3QodmFsdWUpKSByZXR1cm4gZmFsc2UKICAgICAgaWYgKG5hdGl2ZVR5cGVzLk51bGwodmFsdWUpKSByZXR1cm4gZmFsc2UKCiAgICAgIHZhciBwcm9wZXJ0eU5hbWUKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChwcm9wZXJ0eU5hbWUgaW4gdHlwZSkgewogICAgICAgICAgdmFyIHByb3BlcnR5VHlwZSA9IHR5cGVbcHJvcGVydHlOYW1lXQogICAgICAgICAgdmFyIHByb3BlcnR5VmFsdWUgPSB2YWx1ZVtwcm9wZXJ0eU5hbWVdCgogICAgICAgICAgdHlwZWZvcmNlKHByb3BlcnR5VHlwZSwgcHJvcGVydHlWYWx1ZSwgc3RyaWN0KQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGlmIChlIGluc3RhbmNlb2YgVGZQcm9wZXJ0eVR5cGVFcnJvcikgewogICAgICAgICAgdGhyb3cgZS5hc0NoaWxkT2YocHJvcGVydHlOYW1lKQogICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFRmVHlwZUVycm9yKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVGZQcm9wZXJ0eVR5cGVFcnJvcihlLnRmVHlwZSwgcHJvcGVydHlOYW1lLCBlLnRmVmFsdWUsIGUudGZFcnJvcikKICAgICAgICB9CgogICAgICAgIHRocm93IGUKICAgICAgfQoKICAgICAgaWYgKHN0cmljdCkgewogICAgICAgIGZvciAocHJvcGVydHlOYW1lIGluIHZhbHVlKSB7CiAgICAgICAgICBpZiAodHlwZVtwcm9wZXJ0eU5hbWVdKSBjb250aW51ZQoKICAgICAgICAgIHRocm93IG5ldyBUZlByb3BlcnR5VHlwZUVycm9yKHVuZGVmaW5lZCwgcHJvcGVydHlOYW1lKQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIG9iamVjdC50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0ZkpTT04odHlwZSkgfQoKICAgIHJldHVybiBvYmplY3QKICB9LAoKICBtYXA6IGZ1bmN0aW9uIG1hcCAocHJvcGVydHlUeXBlLCBwcm9wZXJ0eUtleVR5cGUpIHsKICAgIGZ1bmN0aW9uIG1hcCAodmFsdWUsIHN0cmljdCkgewogICAgICB0eXBlZm9yY2UobmF0aXZlVHlwZXMuT2JqZWN0LCB2YWx1ZSwgc3RyaWN0KQogICAgICBpZiAobmF0aXZlVHlwZXMuTnVsbCh2YWx1ZSkpIHJldHVybiBmYWxzZQoKICAgICAgdmFyIHByb3BlcnR5TmFtZQoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKHByb3BlcnR5TmFtZSBpbiB2YWx1ZSkgewogICAgICAgICAgaWYgKHByb3BlcnR5S2V5VHlwZSkgewogICAgICAgICAgICB0eXBlZm9yY2UocHJvcGVydHlLZXlUeXBlLCBwcm9wZXJ0eU5hbWUsIHN0cmljdCkKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcHJvcGVydHlWYWx1ZSA9IHZhbHVlW3Byb3BlcnR5TmFtZV0KICAgICAgICAgIHR5cGVmb3JjZShwcm9wZXJ0eVR5cGUsIHByb3BlcnR5VmFsdWUsIHN0cmljdCkKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFRmUHJvcGVydHlUeXBlRXJyb3IpIHsKICAgICAgICAgIHRocm93IGUuYXNDaGlsZE9mKHByb3BlcnR5TmFtZSkKICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBUZlR5cGVFcnJvcikgewogICAgICAgICAgdGhyb3cgbmV3IFRmUHJvcGVydHlUeXBlRXJyb3IoZS50ZlR5cGUsIHByb3BlcnR5S2V5VHlwZSB8fCBwcm9wZXJ0eU5hbWUsIGUudGZWYWx1ZSkKICAgICAgICB9CgogICAgICAgIHRocm93IGUKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICBpZiAocHJvcGVydHlLZXlUeXBlKSB7CiAgICAgIG1hcC50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAneycgKyBzdGZKU09OKHByb3BlcnR5S2V5VHlwZSkgKyAnOiAnICsgc3RmSlNPTihwcm9wZXJ0eVR5cGUpICsgJ30nIH0KICAgIH0gZWxzZSB7CiAgICAgIG1hcC50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAneycgKyBzdGZKU09OKHByb3BlcnR5VHlwZSkgKyAnfScgfQogICAgfQoKICAgIHJldHVybiBtYXAKICB9LAoKICBvbmVPZjogZnVuY3Rpb24gb25lT2YgKCkgewogICAgdmFyIHR5cGVzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpCgogICAgZnVuY3Rpb24gb25lT2YgKHZhbHVlLCBzdHJpY3QpIHsKICAgICAgcmV0dXJuIHR5cGVzLnNvbWUoZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIHR5cGVmb3JjZSh0eXBlLCB2YWx1ZSwgc3RyaWN0KQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgVGZUeXBlRXJyb3IgfHwgZSBpbnN0YW5jZW9mIFRmUHJvcGVydHlUeXBlRXJyb3IpIHJldHVybiBmYWxzZQoKICAgICAgICAgIHRocm93IGUKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgICBvbmVPZi50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0eXBlcy5tYXAoc3RmSlNPTikuam9pbignfCcpIH0KCiAgICByZXR1cm4gb25lT2YKICB9LAoKICBxdWFja3NMaWtlOiBmdW5jdGlvbiBxdWFja3NMaWtlICh0eXBlKSB7CiAgICBmdW5jdGlvbiBxdWFja3NMaWtlICh2YWx1ZSkgewogICAgICByZXR1cm4gdHlwZSA9PT0gZ2V0VmFsdWVUeXBlTmFtZSh2YWx1ZSkKICAgIH0KICAgIHF1YWNrc0xpa2UudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHlwZSB9CgogICAgcmV0dXJuIHF1YWNrc0xpa2UKICB9LAoKICB0dXBsZTogZnVuY3Rpb24gdHVwbGUgKCkgewogICAgdmFyIHR5cGVzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpCgogICAgZnVuY3Rpb24gdHVwbGUgKHZhbHVlLCBzdHJpY3QpIHsKICAgICAgcmV0dXJuIHR5cGVzLmV2ZXJ5KGZ1bmN0aW9uICh0eXBlLCBpKSB7CiAgICAgICAgcmV0dXJuIHR5cGVmb3JjZSh0eXBlLCB2YWx1ZVtpXSwgc3RyaWN0KQogICAgICB9KQogICAgfQogICAgdHVwbGUudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJygnICsgdHlwZXMubWFwKHN0ZkpTT04pLmpvaW4oJywgJykgKyAnKScgfQoKICAgIHJldHVybiB0dXBsZQogIH0sCgogIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSAoZXhwZWN0ZWQpIHsKICAgIGZ1bmN0aW9uIHZhbHVlIChhY3R1YWwpIHsKICAgICAgcmV0dXJuIGFjdHVhbCA9PT0gZXhwZWN0ZWQKICAgIH0KICAgIHZhbHVlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV4cGVjdGVkIH0KCiAgICByZXR1cm4gdmFsdWUKICB9Cn0KCmZ1bmN0aW9uIGNvbXBpbGUgKHR5cGUpIHsKICBpZiAobmF0aXZlVHlwZXMuU3RyaW5nKHR5cGUpKSB7CiAgICBpZiAodHlwZVswXSA9PT0gJz8nKSByZXR1cm4gb3RoZXJUeXBlcy5tYXliZShjb21waWxlKHR5cGUuc2xpY2UoMSkpKQoKICAgIHJldHVybiBuYXRpdmVUeXBlc1t0eXBlXSB8fCBvdGhlclR5cGVzLnF1YWNrc0xpa2UodHlwZSkKICB9IGVsc2UgaWYgKHR5cGUgJiYgbmF0aXZlVHlwZXMuT2JqZWN0KHR5cGUpKSB7CiAgICBpZiAobmF0aXZlVHlwZXMuQXJyYXkodHlwZSkpIHJldHVybiBvdGhlclR5cGVzLmFycmF5T2YoY29tcGlsZSh0eXBlWzBdKSkKCiAgICB2YXIgY29tcGlsZWQgPSB7fQoKICAgIGZvciAodmFyIHByb3BlcnR5TmFtZSBpbiB0eXBlKSB7CiAgICAgIGNvbXBpbGVkW3Byb3BlcnR5TmFtZV0gPSBjb21waWxlKHR5cGVbcHJvcGVydHlOYW1lXSkKICAgIH0KCiAgICByZXR1cm4gb3RoZXJUeXBlcy5vYmplY3QoY29tcGlsZWQpCiAgfSBlbHNlIGlmIChuYXRpdmVUeXBlcy5GdW5jdGlvbih0eXBlKSkgewogICAgcmV0dXJuIHR5cGUKICB9CgogIHJldHVybiBvdGhlclR5cGVzLnZhbHVlKHR5cGUpCn0KCmZ1bmN0aW9uIHR5cGVmb3JjZSAodHlwZSwgdmFsdWUsIHN0cmljdCwgc3Vycm9nYXRlKSB7CiAgaWYgKG5hdGl2ZVR5cGVzLkZ1bmN0aW9uKHR5cGUpKSB7CiAgICBpZiAodHlwZSh2YWx1ZSwgc3RyaWN0KSkgcmV0dXJuIHRydWUKCiAgICB0aHJvdyBuZXcgVGZUeXBlRXJyb3Ioc3Vycm9nYXRlIHx8IHR5cGUsIHZhbHVlKQogIH0KCiAgLy8gSklUCiAgcmV0dXJuIHR5cGVmb3JjZShjb21waWxlKHR5cGUpLCB2YWx1ZSwgc3RyaWN0KQp9CgovLyBhc3NpZ24gYWxsIHR5cGVzIHRvIHR5cGVmb3JjZSBmdW5jdGlvbgp2YXIgdHlwZU5hbWUKT2JqZWN0LmtleXMobmF0aXZlVHlwZXMpLmZvckVhY2goZnVuY3Rpb24gKHR5cGVOYW1lKSB7CiAgdmFyIG5hdGl2ZVR5cGUgPSBuYXRpdmVUeXBlc1t0eXBlTmFtZV0KICBuYXRpdmVUeXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHR5cGVOYW1lIH0KCiAgdHlwZWZvcmNlW3R5cGVOYW1lXSA9IG5hdGl2ZVR5cGUKfSkKCmZvciAodHlwZU5hbWUgaW4gb3RoZXJUeXBlcykgewogIHR5cGVmb3JjZVt0eXBlTmFtZV0gPSBvdGhlclR5cGVzW3R5cGVOYW1lXQp9Cgptb2R1bGUuZXhwb3J0cyA9IHR5cGVmb3JjZQptb2R1bGUuZXhwb3J0cy5jb21waWxlID0gY29tcGlsZQoKLy8gZXhwb3J0IEVycm9yIG9iamVjdHMKbW9kdWxlLmV4cG9ydHMuVGZUeXBlRXJyb3IgPSBUZlR5cGVFcnJvcgptb2R1bGUuZXhwb3J0cy5UZlByb3BlcnR5VHlwZUVycm9yID0gVGZQcm9wZXJ0eVR5cGVFcnJvcgoKfSkuY2FsbCh0aGlzLHsiaXNCdWZmZXIiOnJlcXVpcmUoIi4uL2lzLWJ1ZmZlci9pbmRleC5qcyIpfSkKfSx7Ii4uL2lzLWJ1ZmZlci9pbmRleC5qcyI6MTMwLCJpbmhlcml0cyI6MTI5fV0sMTc0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChyb290KSB7CiAgICJ1c2Ugc3RyaWN0IjsKCi8qKioqKiB1bm9ybS5qcyAqKioqKi8KCi8qCiAqIFVuaWNvZGVOb3JtYWxpemVyIDEuMC4wCiAqIENvcHlyaWdodCAoYykgMjAwOCBNYXRzdXphCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoTUlULUxJQ0VOU0UudHh0KSBhbmQgR1BMIChHUEwtTElDRU5TRS50eHQpIGxpY2Vuc2VzLgogKiAkRGF0ZTogMjAwOC0wNi0wNSAxNjo0NDoxNyArMDIwMCAoVGh1LCAwNSBKdW4gMjAwOCkgJAogKiAkUmV2OiAxMzMwOSAkCiAqLwoKICAgdmFyIERFRkFVTFRfRkVBVFVSRSA9IFtudWxsLCAwLCB7fV07CiAgIHZhciBDQUNIRV9USFJFU0hPTEQgPSAxMDsKICAgdmFyIFNCYXNlID0gMHhBQzAwLCBMQmFzZSA9IDB4MTEwMCwgVkJhc2UgPSAweDExNjEsIFRCYXNlID0gMHgxMUE3LCBMQ291bnQgPSAxOSwgVkNvdW50ID0gMjEsIFRDb3VudCA9IDI4OwogICB2YXIgTkNvdW50ID0gVkNvdW50ICogVENvdW50OyAvLyA1ODgKICAgdmFyIFNDb3VudCA9IExDb3VudCAqIE5Db3VudDsgLy8gMTExNzIKCiAgIHZhciBVQ2hhciA9IGZ1bmN0aW9uKGNwLCBmZWF0dXJlKXsKICAgICAgdGhpcy5jb2RlcG9pbnQgPSBjcDsKICAgICAgdGhpcy5mZWF0dXJlID0gZmVhdHVyZTsKICAgfTsKCiAgIC8vIFN0cmF0ZWdpZXMKICAgdmFyIGNhY2hlID0ge307CiAgIHZhciBjYWNoZUNvdW50ZXIgPSBbXTsKICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gMHhGRjsgKytpKXsKICAgICAgY2FjaGVDb3VudGVyW2ldID0gMDsKICAgfQoKICAgZnVuY3Rpb24gZnJvbUNhY2hlKG5leHQsIGNwLCBuZWVkRmVhdHVyZSl7CiAgICAgIHZhciByZXQgPSBjYWNoZVtjcF07CiAgICAgIGlmKCFyZXQpewogICAgICAgICByZXQgPSBuZXh0KGNwLCBuZWVkRmVhdHVyZSk7CiAgICAgICAgIGlmKCEhcmV0LmZlYXR1cmUgJiYgKytjYWNoZUNvdW50ZXJbKGNwID4+IDgpICYgMHhGRl0gPiBDQUNIRV9USFJFU0hPTEQpewogICAgICAgICAgICBjYWNoZVtjcF0gPSByZXQ7CiAgICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmV0OwogICB9CgogICBmdW5jdGlvbiBmcm9tRGF0YShuZXh0LCBjcCwgbmVlZEZlYXR1cmUpewogICAgICB2YXIgaGFzaCA9IGNwICYgMHhGRjAwOwogICAgICB2YXIgZHVuaXQgPSBVQ2hhci51ZGF0YVtoYXNoXSB8fCB7fTsKICAgICAgdmFyIGYgPSBkdW5pdFtjcF07CiAgICAgIHJldHVybiBmID8gbmV3IFVDaGFyKGNwLCBmKSA6IG5ldyBVQ2hhcihjcCwgREVGQVVMVF9GRUFUVVJFKTsKICAgfQogICBmdW5jdGlvbiBmcm9tQ3BPbmx5KG5leHQsIGNwLCBuZWVkRmVhdHVyZSl7CiAgICAgIHJldHVybiAhIW5lZWRGZWF0dXJlID8gbmV4dChjcCwgbmVlZEZlYXR1cmUpIDogbmV3IFVDaGFyKGNwLCBudWxsKTsKICAgfQogICBmdW5jdGlvbiBmcm9tUnVsZUJhc2VkSmFtbyhuZXh0LCBjcCwgbmVlZEZlYXR1cmUpewogICAgICB2YXIgajsKICAgICAgaWYoY3AgPCBMQmFzZSB8fCAoTEJhc2UgKyBMQ291bnQgPD0gY3AgJiYgY3AgPCBTQmFzZSkgfHwgKFNCYXNlICsgU0NvdW50IDwgY3ApKXsKICAgICAgICAgcmV0dXJuIG5leHQoY3AsIG5lZWRGZWF0dXJlKTsKICAgICAgfQogICAgICBpZihMQmFzZSA8PSBjcCAmJiBjcCA8IExCYXNlICsgTENvdW50KXsKICAgICAgICAgdmFyIGMgPSB7fTsKICAgICAgICAgdmFyIGJhc2UgPSAoY3AgLSBMQmFzZSkgKiBWQ291bnQ7CiAgICAgICAgIGZvciAoaiA9IDA7IGogPCBWQ291bnQ7ICsrail7CiAgICAgICAgICAgIGNbVkJhc2UgKyBqXSA9IFNCYXNlICsgVENvdW50ICogKGogKyBiYXNlKTsKICAgICAgICAgfQogICAgICAgICByZXR1cm4gbmV3IFVDaGFyKGNwLCBbLCxjXSk7CiAgICAgIH0KCiAgICAgIHZhciBTSW5kZXggPSBjcCAtIFNCYXNlOwogICAgICB2YXIgVEluZGV4ID0gU0luZGV4ICUgVENvdW50OwogICAgICB2YXIgZmVhdHVyZSA9IFtdOwogICAgICBpZihUSW5kZXggIT09IDApewogICAgICAgICBmZWF0dXJlWzBdID0gW1NCYXNlICsgU0luZGV4IC0gVEluZGV4LCBUQmFzZSArIFRJbmRleF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgIGZlYXR1cmVbMF0gPSBbTEJhc2UgKyBNYXRoLmZsb29yKFNJbmRleCAvIE5Db3VudCksIFZCYXNlICsgTWF0aC5mbG9vcigoU0luZGV4ICUgTkNvdW50KSAvIFRDb3VudCldOwogICAgICAgICBmZWF0dXJlWzJdID0ge307CiAgICAgICAgIGZvciAoaiA9IDE7IGogPCBUQ291bnQ7ICsrail7CiAgICAgICAgICAgIGZlYXR1cmVbMl1bVEJhc2UgKyBqXSA9IGNwICsgajsKICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBuZXcgVUNoYXIoY3AsIGZlYXR1cmUpOwogICB9CiAgIGZ1bmN0aW9uIGZyb21DcEZpbHRlcihuZXh0LCBjcCwgbmVlZEZlYXR1cmUpewogICAgICByZXR1cm4gY3AgPCA2MCB8fCAxMzMxMSA8IGNwICYmIGNwIDwgNDI2MDcgPyBuZXcgVUNoYXIoY3AsIERFRkFVTFRfRkVBVFVSRSkgOiBuZXh0KGNwLCBuZWVkRmVhdHVyZSk7CiAgIH0KCiAgIHZhciBzdHJhdGVnaWVzID0gW2Zyb21DcEZpbHRlciwgZnJvbUNhY2hlLCBmcm9tQ3BPbmx5LCBmcm9tUnVsZUJhc2VkSmFtbywgZnJvbURhdGFdOwoKICAgVUNoYXIuZnJvbUNoYXJDb2RlID0gc3RyYXRlZ2llcy5yZWR1Y2VSaWdodChmdW5jdGlvbiAobmV4dCwgc3RyYXRlZ3kpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjcCwgbmVlZEZlYXR1cmUpIHsKICAgICAgICAgcmV0dXJuIHN0cmF0ZWd5KG5leHQsIGNwLCBuZWVkRmVhdHVyZSk7CiAgICAgIH07CiAgIH0sIG51bGwpOwoKICAgVUNoYXIuaXNIaWdoU3Vycm9nYXRlID0gZnVuY3Rpb24oY3ApewogICAgICByZXR1cm4gY3AgPj0gMHhEODAwICYmIGNwIDw9IDB4REJGRjsKICAgfTsKICAgVUNoYXIuaXNMb3dTdXJyb2dhdGUgPSBmdW5jdGlvbihjcCl7CiAgICAgIHJldHVybiBjcCA+PSAweERDMDAgJiYgY3AgPD0gMHhERkZGOwogICB9OwoKICAgVUNoYXIucHJvdG90eXBlLnByZXBGZWF0dXJlID0gZnVuY3Rpb24oKXsKICAgICAgaWYoIXRoaXMuZmVhdHVyZSl7CiAgICAgICAgIHRoaXMuZmVhdHVyZSA9IFVDaGFyLmZyb21DaGFyQ29kZSh0aGlzLmNvZGVwb2ludCwgdHJ1ZSkuZmVhdHVyZTsKICAgICAgfQogICB9OwoKICAgVUNoYXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKXsKICAgICAgaWYodGhpcy5jb2RlcG9pbnQgPCAweDEwMDAwKXsKICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5jb2RlcG9pbnQpOwogICAgICB9IGVsc2UgewogICAgICAgICB2YXIgeCA9IHRoaXMuY29kZXBvaW50IC0gMHgxMDAwMDsKICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoTWF0aC5mbG9vcih4IC8gMHg0MDApICsgMHhEODAwLCB4ICUgMHg0MDAgKyAweERDMDApOwogICAgICB9CiAgIH07CgogICBVQ2hhci5wcm90b3R5cGUuZ2V0RGVjb21wID0gZnVuY3Rpb24oKXsKICAgICAgdGhpcy5wcmVwRmVhdHVyZSgpOwogICAgICByZXR1cm4gdGhpcy5mZWF0dXJlWzBdIHx8IG51bGw7CiAgIH07CgogICBVQ2hhci5wcm90b3R5cGUuaXNDb21wYXRpYmlsaXR5ID0gZnVuY3Rpb24oKXsKICAgICAgdGhpcy5wcmVwRmVhdHVyZSgpOwogICAgICByZXR1cm4gISF0aGlzLmZlYXR1cmVbMV0gJiYgKHRoaXMuZmVhdHVyZVsxXSAmICgxIDw8IDgpKTsKICAgfTsKICAgVUNoYXIucHJvdG90eXBlLmlzRXhjbHVkZSA9IGZ1bmN0aW9uKCl7CiAgICAgIHRoaXMucHJlcEZlYXR1cmUoKTsKICAgICAgcmV0dXJuICEhdGhpcy5mZWF0dXJlWzFdICYmICh0aGlzLmZlYXR1cmVbMV0gJiAoMSA8PCA5KSk7CiAgIH07CiAgIFVDaGFyLnByb3RvdHlwZS5nZXRDYW5vbmljYWxDbGFzcyA9IGZ1bmN0aW9uKCl7CiAgICAgIHRoaXMucHJlcEZlYXR1cmUoKTsKICAgICAgcmV0dXJuICEhdGhpcy5mZWF0dXJlWzFdID8gKHRoaXMuZmVhdHVyZVsxXSAmIDB4ZmYpIDogMDsKICAgfTsKICAgVUNoYXIucHJvdG90eXBlLmdldENvbXBvc2l0ZSA9IGZ1bmN0aW9uKGZvbGxvd2luZyl7CiAgICAgIHRoaXMucHJlcEZlYXR1cmUoKTsKICAgICAgaWYoIXRoaXMuZmVhdHVyZVsyXSl7CiAgICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciBjcCA9IHRoaXMuZmVhdHVyZVsyXVtmb2xsb3dpbmcuY29kZXBvaW50XTsKICAgICAgcmV0dXJuIGNwID8gVUNoYXIuZnJvbUNoYXJDb2RlKGNwKSA6IG51bGw7CiAgIH07CgogICB2YXIgVUNoYXJJdGVyYXRvciA9IGZ1bmN0aW9uKHN0cil7CiAgICAgIHRoaXMuc3RyID0gc3RyOwogICAgICB0aGlzLmN1cnNvciA9IDA7CiAgIH07CiAgIFVDaGFySXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbigpewogICAgICBpZighIXRoaXMuc3RyICYmIHRoaXMuY3Vyc29yIDwgdGhpcy5zdHIubGVuZ3RoKXsKICAgICAgICAgdmFyIGNwID0gdGhpcy5zdHIuY2hhckNvZGVBdCh0aGlzLmN1cnNvcisrKTsKICAgICAgICAgdmFyIGQ7CiAgICAgICAgIGlmKFVDaGFyLmlzSGlnaFN1cnJvZ2F0ZShjcCkgJiYgdGhpcy5jdXJzb3IgPCB0aGlzLnN0ci5sZW5ndGggJiYgVUNoYXIuaXNMb3dTdXJyb2dhdGUoKGQgPSB0aGlzLnN0ci5jaGFyQ29kZUF0KHRoaXMuY3Vyc29yKSkpKXsKICAgICAgICAgICAgY3AgPSAoY3AgLSAweEQ4MDApICogMHg0MDAgKyAoZCAtMHhEQzAwKSArIDB4MTAwMDA7CiAgICAgICAgICAgICsrdGhpcy5jdXJzb3I7CiAgICAgICAgIH0KICAgICAgICAgcmV0dXJuIFVDaGFyLmZyb21DaGFyQ29kZShjcCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgIHRoaXMuc3RyID0gbnVsbDsKICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgfTsKCiAgIHZhciBSZWN1cnNEZWNvbXBJdGVyYXRvciA9IGZ1bmN0aW9uKGl0LCBjYW5vKXsKICAgICAgdGhpcy5pdCA9IGl0OwogICAgICB0aGlzLmNhbm9uaWNhbCA9IGNhbm87CiAgICAgIHRoaXMucmVzQnVmID0gW107CiAgIH07CgogICBSZWN1cnNEZWNvbXBJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKCl7CiAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZURlY29tcChjYW5vLCB1Y2hhcil7CiAgICAgICAgIHZhciBkZWNvbXAgPSB1Y2hhci5nZXREZWNvbXAoKTsKICAgICAgICAgaWYoISFkZWNvbXAgJiYgIShjYW5vICYmIHVjaGFyLmlzQ29tcGF0aWJpbGl0eSgpKSl7CiAgICAgICAgICAgIHZhciByZXQgPSBbXTsKICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRlY29tcC5sZW5ndGg7ICsraSl7CiAgICAgICAgICAgICAgIHZhciBhID0gcmVjdXJzaXZlRGVjb21wKGNhbm8sIFVDaGFyLmZyb21DaGFyQ29kZShkZWNvbXBbaV0pKTsKICAgICAgICAgICAgICAgIHJldCA9IHJldC5jb25jYXQoYSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIFt1Y2hhcl07CiAgICAgICAgIH0KICAgICAgfQogICAgICBpZih0aGlzLnJlc0J1Zi5sZW5ndGggPT09IDApewogICAgICAgICB2YXIgdWNoYXIgPSB0aGlzLml0Lm5leHQoKTsKICAgICAgICAgaWYoIXVjaGFyKXsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgIH0KICAgICAgICAgdGhpcy5yZXNCdWYgPSByZWN1cnNpdmVEZWNvbXAodGhpcy5jYW5vbmljYWwsIHVjaGFyKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5yZXNCdWYuc2hpZnQoKTsKICAgfTsKCiAgIHZhciBEZWNvbXBJdGVyYXRvciA9IGZ1bmN0aW9uKGl0KXsKICAgICAgdGhpcy5pdCA9IGl0OwogICAgICB0aGlzLnJlc0J1ZiA9IFtdOwogICB9OwoKICAgRGVjb21wSXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbigpewogICAgICB2YXIgY2M7CiAgICAgIGlmKHRoaXMucmVzQnVmLmxlbmd0aCA9PT0gMCl7CiAgICAgICAgIGRvewogICAgICAgICAgICB2YXIgdWNoYXIgPSB0aGlzLml0Lm5leHQoKTsKICAgICAgICAgICAgaWYoIXVjaGFyKXsKICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2MgPSB1Y2hhci5nZXRDYW5vbmljYWxDbGFzcygpOwogICAgICAgICAgICB2YXIgaW5zcHQgPSB0aGlzLnJlc0J1Zi5sZW5ndGg7CiAgICAgICAgICAgIGlmKGNjICE9PSAwKXsKICAgICAgICAgICAgICAgZm9yKDsgaW5zcHQgPiAwOyAtLWluc3B0KXsKICAgICAgICAgICAgICAgICAgdmFyIHVjaGFyMiA9IHRoaXMucmVzQnVmW2luc3B0IC0gMV07CiAgICAgICAgICAgICAgICAgIHZhciBjYzIgPSB1Y2hhcjIuZ2V0Q2Fub25pY2FsQ2xhc3MoKTsKICAgICAgICAgICAgICAgICAgaWYoY2MyIDw9IGNjKXsKICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMucmVzQnVmLnNwbGljZShpbnNwdCwgMCwgdWNoYXIpOwogICAgICAgICB9IHdoaWxlKGNjICE9PSAwKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5yZXNCdWYuc2hpZnQoKTsKICAgfTsKCiAgIHZhciBDb21wSXRlcmF0b3IgPSBmdW5jdGlvbihpdCl7CiAgICAgIHRoaXMuaXQgPSBpdDsKICAgICAgdGhpcy5wcm9jQnVmID0gW107CiAgICAgIHRoaXMucmVzQnVmID0gW107CiAgICAgIHRoaXMubGFzdENsYXNzID0gbnVsbDsKICAgfTsKCiAgIENvbXBJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKCl7CiAgICAgIHdoaWxlKHRoaXMucmVzQnVmLmxlbmd0aCA9PT0gMCl7CiAgICAgICAgIHZhciB1Y2hhciA9IHRoaXMuaXQubmV4dCgpOwogICAgICAgICBpZighdWNoYXIpewogICAgICAgICAgICB0aGlzLnJlc0J1ZiA9IHRoaXMucHJvY0J1ZjsKICAgICAgICAgICAgdGhpcy5wcm9jQnVmID0gW107CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICB9CiAgICAgICAgIGlmKHRoaXMucHJvY0J1Zi5sZW5ndGggPT09IDApewogICAgICAgICAgICB0aGlzLmxhc3RDbGFzcyA9IHVjaGFyLmdldENhbm9uaWNhbENsYXNzKCk7CiAgICAgICAgICAgIHRoaXMucHJvY0J1Zi5wdXNoKHVjaGFyKTsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHN0YXJ0ZXIgPSB0aGlzLnByb2NCdWZbMF07CiAgICAgICAgICAgIHZhciBjb21wb3NpdGUgPSBzdGFydGVyLmdldENvbXBvc2l0ZSh1Y2hhcik7CiAgICAgICAgICAgIHZhciBjYyA9IHVjaGFyLmdldENhbm9uaWNhbENsYXNzKCk7CiAgICAgICAgICAgIGlmKCEhY29tcG9zaXRlICYmICh0aGlzLmxhc3RDbGFzcyA8IGNjIHx8IHRoaXMubGFzdENsYXNzID09PSAwKSl7CiAgICAgICAgICAgICAgIHRoaXMucHJvY0J1ZlswXSA9IGNvbXBvc2l0ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgaWYoY2MgPT09IDApewogICAgICAgICAgICAgICAgICB0aGlzLnJlc0J1ZiA9IHRoaXMucHJvY0J1ZjsKICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jQnVmID0gW107CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgdGhpcy5sYXN0Q2xhc3MgPSBjYzsKICAgICAgICAgICAgICAgdGhpcy5wcm9jQnVmLnB1c2godWNoYXIpOwogICAgICAgICAgICB9CiAgICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGhpcy5yZXNCdWYuc2hpZnQoKTsKICAgfTsKCiAgIHZhciBjcmVhdGVJdGVyYXRvciA9IGZ1bmN0aW9uKG1vZGUsIHN0cil7CiAgICAgIHN3aXRjaChtb2RlKXsKICAgICAgICAgY2FzZSAiTkZEIjoKICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNvbXBJdGVyYXRvcihuZXcgUmVjdXJzRGVjb21wSXRlcmF0b3IobmV3IFVDaGFySXRlcmF0b3Ioc3RyKSwgdHJ1ZSkpOwogICAgICAgICBjYXNlICJORktEIjoKICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNvbXBJdGVyYXRvcihuZXcgUmVjdXJzRGVjb21wSXRlcmF0b3IobmV3IFVDaGFySXRlcmF0b3Ioc3RyKSwgZmFsc2UpKTsKICAgICAgICAgY2FzZSAiTkZDIjoKICAgICAgICAgICAgcmV0dXJuIG5ldyBDb21wSXRlcmF0b3IobmV3IERlY29tcEl0ZXJhdG9yKG5ldyBSZWN1cnNEZWNvbXBJdGVyYXRvcihuZXcgVUNoYXJJdGVyYXRvcihzdHIpLCB0cnVlKSkpOwogICAgICAgICBjYXNlICJORktDIjoKICAgICAgICAgICAgcmV0dXJuIG5ldyBDb21wSXRlcmF0b3IobmV3IERlY29tcEl0ZXJhdG9yKG5ldyBSZWN1cnNEZWNvbXBJdGVyYXRvcihuZXcgVUNoYXJJdGVyYXRvcihzdHIpLCBmYWxzZSkpKTsKICAgICAgfQogICAgICB0aHJvdyBtb2RlICsgIiBpcyBpbnZhbGlkIjsKICAgfTsKICAgdmFyIG5vcm1hbGl6ZSA9IGZ1bmN0aW9uKG1vZGUsIHN0cil7CiAgICAgIHZhciBpdCA9IGNyZWF0ZUl0ZXJhdG9yKG1vZGUsIHN0cik7CiAgICAgIHZhciByZXQgPSAiIjsKICAgICAgdmFyIHVjaGFyOwogICAgICB3aGlsZSghISh1Y2hhciA9IGl0Lm5leHQoKSkpewogICAgICAgICByZXQgKz0gdWNoYXIudG9TdHJpbmcoKTsKICAgICAgfQogICAgICByZXR1cm4gcmV0OwogICB9OwoKICAgLyogQVBJIGZ1bmN0aW9ucyAqLwogICBmdW5jdGlvbiBuZmQoc3RyKXsKICAgICAgcmV0dXJuIG5vcm1hbGl6ZSgiTkZEIiwgc3RyKTsKICAgfQoKICAgZnVuY3Rpb24gbmZrZChzdHIpewogICAgICByZXR1cm4gbm9ybWFsaXplKCJORktEIiwgc3RyKTsKICAgfQoKICAgZnVuY3Rpb24gbmZjKHN0cil7CiAgICAgIHJldHVybiBub3JtYWxpemUoIk5GQyIsIHN0cik7CiAgIH0KCiAgIGZ1bmN0aW9uIG5ma2Moc3RyKXsKICAgICAgcmV0dXJuIG5vcm1hbGl6ZSgiTkZLQyIsIHN0cik7CiAgIH0KCi8qIFVuaWNvZGUgZGF0YSAqLwpVQ2hhci51ZGF0YT17CjA6ezYwOlssLHs4MjQ6ODgxNH1dLDYxOlssLHs4MjQ6ODgwMH1dLDYyOlssLHs4MjQ6ODgxNX1dLDY1OlssLHs3Njg6MTkyLDc2OToxOTMsNzcwOjE5NCw3NzE6MTk1LDc3MjoyNTYsNzc0OjI1OCw3NzU6NTUwLDc3NjoxOTYsNzc3Ojc4NDIsNzc4OjE5Nyw3ODA6NDYxLDc4Mzo1MTIsNzg1OjUxNCw4MDM6Nzg0MCw4MDU6NzY4MCw4MDg6MjYwfV0sNjY6Wywsezc3NTo3NjgyLDgwMzo3Njg0LDgxNzo3Njg2fV0sNjc6Wywsezc2OToyNjIsNzcwOjI2NCw3NzU6MjY2LDc4MDoyNjgsODA3OjE5OX1dLDY4OlssLHs3NzU6NzY5MCw3ODA6MjcwLDgwMzo3NjkyLDgwNzo3Njk2LDgxMzo3Njk4LDgxNzo3Njk0fV0sNjk6Wywsezc2ODoyMDAsNzY5OjIwMSw3NzA6MjAyLDc3MTo3ODY4LDc3MjoyNzQsNzc0OjI3Niw3NzU6Mjc4LDc3NjoyMDMsNzc3Ojc4NjYsNzgwOjI4Miw3ODM6NTE2LDc4NTo1MTgsODAzOjc4NjQsODA3OjU1Miw4MDg6MjgwLDgxMzo3NzA0LDgxNjo3NzA2fV0sNzA6Wywsezc3NTo3NzEwfV0sNzE6Wywsezc2OTo1MDAsNzcwOjI4NCw3NzI6NzcxMiw3NzQ6Mjg2LDc3NToyODgsNzgwOjQ4Niw4MDc6MjkwfV0sNzI6Wywsezc3MDoyOTIsNzc1Ojc3MTQsNzc2Ojc3MTgsNzgwOjU0Miw4MDM6NzcxNiw4MDc6NzcyMCw4MTQ6NzcyMn1dLDczOlssLHs3Njg6MjA0LDc2OToyMDUsNzcwOjIwNiw3NzE6Mjk2LDc3MjoyOTgsNzc0OjMwMCw3NzU6MzA0LDc3NjoyMDcsNzc3Ojc4ODAsNzgwOjQ2Myw3ODM6NTIwLDc4NTo1MjIsODAzOjc4ODIsODA4OjMwMiw4MTY6NzcyNH1dLDc0OlssLHs3NzA6MzA4fV0sNzU6Wywsezc2OTo3NzI4LDc4MDo0ODgsODAzOjc3MzAsODA3OjMxMCw4MTc6NzczMn1dLDc2OlssLHs3Njk6MzEzLDc4MDozMTcsODAzOjc3MzQsODA3OjMxNSw4MTM6Nzc0MCw4MTc6NzczOH1dLDc3OlssLHs3Njk6Nzc0Miw3NzU6Nzc0NCw4MDM6Nzc0Nn1dLDc4OlssLHs3Njg6NTA0LDc2OTozMjMsNzcxOjIwOSw3NzU6Nzc0OCw3ODA6MzI3LDgwMzo3NzUwLDgwNzozMjUsODEzOjc3NTQsODE3Ojc3NTJ9XSw3OTpbLCx7NzY4OjIxMCw3Njk6MjExLDc3MDoyMTIsNzcxOjIxMyw3NzI6MzMyLDc3NDozMzQsNzc1OjU1OCw3NzY6MjE0LDc3Nzo3ODg2LDc3OTozMzYsNzgwOjQ2NSw3ODM6NTI0LDc4NTo1MjYsNzk1OjQxNiw4MDM6Nzg4NCw4MDg6NDkwfV0sODA6Wywsezc2OTo3NzY0LDc3NTo3NzY2fV0sODI6Wywsezc2OTozNDAsNzc1Ojc3NjgsNzgwOjM0NCw3ODM6NTI4LDc4NTo1MzAsODAzOjc3NzAsODA3OjM0Miw4MTc6Nzc3NH1dLDgzOlssLHs3Njk6MzQ2LDc3MDozNDgsNzc1Ojc3NzYsNzgwOjM1Miw4MDM6Nzc3OCw4MDY6NTM2LDgwNzozNTB9XSw4NDpbLCx7Nzc1Ojc3ODYsNzgwOjM1Niw4MDM6Nzc4OCw4MDY6NTM4LDgwNzozNTQsODEzOjc3OTIsODE3Ojc3OTB9XSw4NTpbLCx7NzY4OjIxNyw3Njk6MjE4LDc3MDoyMTksNzcxOjM2MCw3NzI6MzYyLDc3NDozNjQsNzc2OjIyMCw3Nzc6NzkxMCw3Nzg6MzY2LDc3OTozNjgsNzgwOjQ2Nyw3ODM6NTMyLDc4NTo1MzQsNzk1OjQzMSw4MDM6NzkwOCw4MDQ6Nzc5NCw4MDg6MzcwLDgxMzo3Nzk4LDgxNjo3Nzk2fV0sODY6Wywsezc3MTo3ODA0LDgwMzo3ODA2fV0sODc6Wywsezc2ODo3ODA4LDc2OTo3ODEwLDc3MDozNzIsNzc1Ojc4MTQsNzc2Ojc4MTIsODAzOjc4MTZ9XSw4ODpbLCx7Nzc1Ojc4MTgsNzc2Ojc4MjB9XSw4OTpbLCx7NzY4Ojc5MjIsNzY5OjIyMSw3NzA6Mzc0LDc3MTo3OTI4LDc3Mjo1NjIsNzc1Ojc4MjIsNzc2OjM3Niw3Nzc6NzkyNiw4MDM6NzkyNH1dLDkwOlssLHs3Njk6Mzc3LDc3MDo3ODI0LDc3NTozNzksNzgwOjM4MSw4MDM6NzgyNiw4MTc6NzgyOH1dLDk3OlssLHs3Njg6MjI0LDc2OToyMjUsNzcwOjIyNiw3NzE6MjI3LDc3MjoyNTcsNzc0OjI1OSw3NzU6NTUxLDc3NjoyMjgsNzc3Ojc4NDMsNzc4OjIyOSw3ODA6NDYyLDc4Mzo1MTMsNzg1OjUxNSw4MDM6Nzg0MSw4MDU6NzY4MSw4MDg6MjYxfV0sOTg6Wywsezc3NTo3NjgzLDgwMzo3Njg1LDgxNzo3Njg3fV0sOTk6Wywsezc2OToyNjMsNzcwOjI2NSw3NzU6MjY3LDc4MDoyNjksODA3OjIzMX1dLDEwMDpbLCx7Nzc1Ojc2OTEsNzgwOjI3MSw4MDM6NzY5Myw4MDc6NzY5Nyw4MTM6NzY5OSw4MTc6NzY5NX1dLDEwMTpbLCx7NzY4OjIzMiw3Njk6MjMzLDc3MDoyMzQsNzcxOjc4NjksNzcyOjI3NSw3NzQ6Mjc3LDc3NToyNzksNzc2OjIzNSw3Nzc6Nzg2Nyw3ODA6MjgzLDc4Mzo1MTcsNzg1OjUxOSw4MDM6Nzg2NSw4MDc6NTUzLDgwODoyODEsODEzOjc3MDUsODE2Ojc3MDd9XSwxMDI6Wywsezc3NTo3NzExfV0sMTAzOlssLHs3Njk6NTAxLDc3MDoyODUsNzcyOjc3MTMsNzc0OjI4Nyw3NzU6Mjg5LDc4MDo0ODcsODA3OjI5MX1dLDEwNDpbLCx7NzcwOjI5Myw3NzU6NzcxNSw3NzY6NzcxOSw3ODA6NTQzLDgwMzo3NzE3LDgwNzo3NzIxLDgxNDo3NzIzLDgxNzo3ODMwfV0sMTA1OlssLHs3Njg6MjM2LDc2OToyMzcsNzcwOjIzOCw3NzE6Mjk3LDc3MjoyOTksNzc0OjMwMSw3NzY6MjM5LDc3Nzo3ODgxLDc4MDo0NjQsNzgzOjUyMSw3ODU6NTIzLDgwMzo3ODgzLDgwODozMDMsODE2Ojc3MjV9XSwxMDY6Wywsezc3MDozMDksNzgwOjQ5Nn1dLDEwNzpbLCx7NzY5Ojc3MjksNzgwOjQ4OSw4MDM6NzczMSw4MDc6MzExLDgxNzo3NzMzfV0sMTA4OlssLHs3Njk6MzE0LDc4MDozMTgsODAzOjc3MzUsODA3OjMxNiw4MTM6Nzc0MSw4MTc6NzczOX1dLDEwOTpbLCx7NzY5Ojc3NDMsNzc1Ojc3NDUsODAzOjc3NDd9XSwxMTA6Wywsezc2ODo1MDUsNzY5OjMyNCw3NzE6MjQxLDc3NTo3NzQ5LDc4MDozMjgsODAzOjc3NTEsODA3OjMyNiw4MTM6Nzc1NSw4MTc6Nzc1M31dLDExMTpbLCx7NzY4OjI0Miw3Njk6MjQzLDc3MDoyNDQsNzcxOjI0NSw3NzI6MzMzLDc3NDozMzUsNzc1OjU1OSw3NzY6MjQ2LDc3Nzo3ODg3LDc3OTozMzcsNzgwOjQ2Niw3ODM6NTI1LDc4NTo1MjcsNzk1OjQxNyw4MDM6Nzg4NSw4MDg6NDkxfV0sMTEyOlssLHs3Njk6Nzc2NSw3NzU6Nzc2N31dLDExNDpbLCx7NzY5OjM0MSw3NzU6Nzc2OSw3ODA6MzQ1LDc4Mzo1MjksNzg1OjUzMSw4MDM6Nzc3MSw4MDc6MzQzLDgxNzo3Nzc1fV0sMTE1OlssLHs3Njk6MzQ3LDc3MDozNDksNzc1Ojc3NzcsNzgwOjM1Myw4MDM6Nzc3OSw4MDY6NTM3LDgwNzozNTF9XSwxMTY6Wywsezc3NTo3Nzg3LDc3Njo3ODMxLDc4MDozNTcsODAzOjc3ODksODA2OjUzOSw4MDc6MzU1LDgxMzo3NzkzLDgxNzo3NzkxfV0sMTE3OlssLHs3Njg6MjQ5LDc2OToyNTAsNzcwOjI1MSw3NzE6MzYxLDc3MjozNjMsNzc0OjM2NSw3NzY6MjUyLDc3Nzo3OTExLDc3ODozNjcsNzc5OjM2OSw3ODA6NDY4LDc4Mzo1MzMsNzg1OjUzNSw3OTU6NDMyLDgwMzo3OTA5LDgwNDo3Nzk1LDgwODozNzEsODEzOjc3OTksODE2Ojc3OTd9XSwxMTg6Wywsezc3MTo3ODA1LDgwMzo3ODA3fV0sMTE5OlssLHs3Njg6NzgwOSw3Njk6NzgxMSw3NzA6MzczLDc3NTo3ODE1LDc3Njo3ODEzLDc3ODo3ODMyLDgwMzo3ODE3fV0sMTIwOlssLHs3NzU6NzgxOSw3NzY6NzgyMX1dLDEyMTpbLCx7NzY4Ojc5MjMsNzY5OjI1Myw3NzA6Mzc1LDc3MTo3OTI5LDc3Mjo1NjMsNzc1Ojc4MjMsNzc2OjI1NSw3Nzc6NzkyNyw3Nzg6NzgzMyw4MDM6NzkyNX1dLDEyMjpbLCx7NzY5OjM3OCw3NzA6NzgyNSw3NzU6MzgwLDc4MDozODIsODAzOjc4MjcsODE3Ojc4Mjl9XSwxNjA6W1szMl0sMjU2XSwxNjg6W1szMiw3NzZdLDI1Nix7NzY4OjgxNzMsNzY5OjkwMSw4MzQ6ODEyOX1dLDE3MDpbWzk3XSwyNTZdLDE3NTpbWzMyLDc3Ml0sMjU2XSwxNzg6W1s1MF0sMjU2XSwxNzk6W1s1MV0sMjU2XSwxODA6W1szMiw3NjldLDI1Nl0sMTgxOltbOTU2XSwyNTZdLDE4NDpbWzMyLDgwN10sMjU2XSwxODU6W1s0OV0sMjU2XSwxODY6W1sxMTFdLDI1Nl0sMTg4OltbNDksODI2MCw1Ml0sMjU2XSwxODk6W1s0OSw4MjYwLDUwXSwyNTZdLDE5MDpbWzUxLDgyNjAsNTJdLDI1Nl0sMTkyOltbNjUsNzY4XV0sMTkzOltbNjUsNzY5XV0sMTk0OltbNjUsNzcwXSwsezc2ODo3ODQ2LDc2OTo3ODQ0LDc3MTo3ODUwLDc3Nzo3ODQ4fV0sMTk1OltbNjUsNzcxXV0sMTk2OltbNjUsNzc2XSwsezc3Mjo0Nzh9XSwxOTc6W1s2NSw3NzhdLCx7NzY5OjUwNn1dLDE5ODpbLCx7NzY5OjUwOCw3NzI6NDgyfV0sMTk5OltbNjcsODA3XSwsezc2OTo3Njg4fV0sMjAwOltbNjksNzY4XV0sMjAxOltbNjksNzY5XV0sMjAyOltbNjksNzcwXSwsezc2ODo3ODcyLDc2OTo3ODcwLDc3MTo3ODc2LDc3Nzo3ODc0fV0sMjAzOltbNjksNzc2XV0sMjA0OltbNzMsNzY4XV0sMjA1OltbNzMsNzY5XV0sMjA2OltbNzMsNzcwXV0sMjA3OltbNzMsNzc2XSwsezc2OTo3NzI2fV0sMjA5OltbNzgsNzcxXV0sMjEwOltbNzksNzY4XV0sMjExOltbNzksNzY5XV0sMjEyOltbNzksNzcwXSwsezc2ODo3ODkwLDc2OTo3ODg4LDc3MTo3ODk0LDc3Nzo3ODkyfV0sMjEzOltbNzksNzcxXSwsezc2OTo3NzU2LDc3Mjo1NTYsNzc2Ojc3NTh9XSwyMTQ6W1s3OSw3NzZdLCx7NzcyOjU1NH1dLDIxNjpbLCx7NzY5OjUxMH1dLDIxNzpbWzg1LDc2OF1dLDIxODpbWzg1LDc2OV1dLDIxOTpbWzg1LDc3MF1dLDIyMDpbWzg1LDc3Nl0sLHs3Njg6NDc1LDc2OTo0NzEsNzcyOjQ2OSw3ODA6NDczfV0sMjIxOltbODksNzY5XV0sMjI0OltbOTcsNzY4XV0sMjI1OltbOTcsNzY5XV0sMjI2OltbOTcsNzcwXSwsezc2ODo3ODQ3LDc2OTo3ODQ1LDc3MTo3ODUxLDc3Nzo3ODQ5fV0sMjI3OltbOTcsNzcxXV0sMjI4OltbOTcsNzc2XSwsezc3Mjo0Nzl9XSwyMjk6W1s5Nyw3NzhdLCx7NzY5OjUwN31dLDIzMDpbLCx7NzY5OjUwOSw3NzI6NDgzfV0sMjMxOltbOTksODA3XSwsezc2OTo3Njg5fV0sMjMyOltbMTAxLDc2OF1dLDIzMzpbWzEwMSw3NjldXSwyMzQ6W1sxMDEsNzcwXSwsezc2ODo3ODczLDc2OTo3ODcxLDc3MTo3ODc3LDc3Nzo3ODc1fV0sMjM1OltbMTAxLDc3Nl1dLDIzNjpbWzEwNSw3NjhdXSwyMzc6W1sxMDUsNzY5XV0sMjM4OltbMTA1LDc3MF1dLDIzOTpbWzEwNSw3NzZdLCx7NzY5Ojc3Mjd9XSwyNDE6W1sxMTAsNzcxXV0sMjQyOltbMTExLDc2OF1dLDI0MzpbWzExMSw3NjldXSwyNDQ6W1sxMTEsNzcwXSwsezc2ODo3ODkxLDc2OTo3ODg5LDc3MTo3ODk1LDc3Nzo3ODkzfV0sMjQ1OltbMTExLDc3MV0sLHs3Njk6Nzc1Nyw3NzI6NTU3LDc3Njo3NzU5fV0sMjQ2OltbMTExLDc3Nl0sLHs3NzI6NTU1fV0sMjQ4OlssLHs3Njk6NTExfV0sMjQ5OltbMTE3LDc2OF1dLDI1MDpbWzExNyw3NjldXSwyNTE6W1sxMTcsNzcwXV0sMjUyOltbMTE3LDc3Nl0sLHs3Njg6NDc2LDc2OTo0NzIsNzcyOjQ3MCw3ODA6NDc0fV0sMjUzOltbMTIxLDc2OV1dLDI1NTpbWzEyMSw3NzZdXX0sCjI1Njp7MjU2OltbNjUsNzcyXV0sMjU3OltbOTcsNzcyXV0sMjU4OltbNjUsNzc0XSwsezc2ODo3ODU2LDc2OTo3ODU0LDc3MTo3ODYwLDc3Nzo3ODU4fV0sMjU5OltbOTcsNzc0XSwsezc2ODo3ODU3LDc2OTo3ODU1LDc3MTo3ODYxLDc3Nzo3ODU5fV0sMjYwOltbNjUsODA4XV0sMjYxOltbOTcsODA4XV0sMjYyOltbNjcsNzY5XV0sMjYzOltbOTksNzY5XV0sMjY0OltbNjcsNzcwXV0sMjY1OltbOTksNzcwXV0sMjY2OltbNjcsNzc1XV0sMjY3OltbOTksNzc1XV0sMjY4OltbNjcsNzgwXV0sMjY5OltbOTksNzgwXV0sMjcwOltbNjgsNzgwXV0sMjcxOltbMTAwLDc4MF1dLDI3NDpbWzY5LDc3Ml0sLHs3Njg6NzcwMCw3Njk6NzcwMn1dLDI3NTpbWzEwMSw3NzJdLCx7NzY4Ojc3MDEsNzY5Ojc3MDN9XSwyNzY6W1s2OSw3NzRdXSwyNzc6W1sxMDEsNzc0XV0sMjc4OltbNjksNzc1XV0sMjc5OltbMTAxLDc3NV1dLDI4MDpbWzY5LDgwOF1dLDI4MTpbWzEwMSw4MDhdXSwyODI6W1s2OSw3ODBdXSwyODM6W1sxMDEsNzgwXV0sMjg0OltbNzEsNzcwXV0sMjg1OltbMTAzLDc3MF1dLDI4NjpbWzcxLDc3NF1dLDI4NzpbWzEwMyw3NzRdXSwyODg6W1s3MSw3NzVdXSwyODk6W1sxMDMsNzc1XV0sMjkwOltbNzEsODA3XV0sMjkxOltbMTAzLDgwN11dLDI5MjpbWzcyLDc3MF1dLDI5MzpbWzEwNCw3NzBdXSwyOTY6W1s3Myw3NzFdXSwyOTc6W1sxMDUsNzcxXV0sMjk4OltbNzMsNzcyXV0sMjk5OltbMTA1LDc3Ml1dLDMwMDpbWzczLDc3NF1dLDMwMTpbWzEwNSw3NzRdXSwzMDI6W1s3Myw4MDhdXSwzMDM6W1sxMDUsODA4XV0sMzA0OltbNzMsNzc1XV0sMzA2OltbNzMsNzRdLDI1Nl0sMzA3OltbMTA1LDEwNl0sMjU2XSwzMDg6W1s3NCw3NzBdXSwzMDk6W1sxMDYsNzcwXV0sMzEwOltbNzUsODA3XV0sMzExOltbMTA3LDgwN11dLDMxMzpbWzc2LDc2OV1dLDMxNDpbWzEwOCw3NjldXSwzMTU6W1s3Niw4MDddXSwzMTY6W1sxMDgsODA3XV0sMzE3OltbNzYsNzgwXV0sMzE4OltbMTA4LDc4MF1dLDMxOTpbWzc2LDE4M10sMjU2XSwzMjA6W1sxMDgsMTgzXSwyNTZdLDMyMzpbWzc4LDc2OV1dLDMyNDpbWzExMCw3NjldXSwzMjU6W1s3OCw4MDddXSwzMjY6W1sxMTAsODA3XV0sMzI3OltbNzgsNzgwXV0sMzI4OltbMTEwLDc4MF1dLDMyOTpbWzcwMCwxMTBdLDI1Nl0sMzMyOltbNzksNzcyXSwsezc2ODo3NzYwLDc2OTo3NzYyfV0sMzMzOltbMTExLDc3Ml0sLHs3Njg6Nzc2MSw3Njk6Nzc2M31dLDMzNDpbWzc5LDc3NF1dLDMzNTpbWzExMSw3NzRdXSwzMzY6W1s3OSw3NzldXSwzMzc6W1sxMTEsNzc5XV0sMzQwOltbODIsNzY5XV0sMzQxOltbMTE0LDc2OV1dLDM0MjpbWzgyLDgwN11dLDM0MzpbWzExNCw4MDddXSwzNDQ6W1s4Miw3ODBdXSwzNDU6W1sxMTQsNzgwXV0sMzQ2OltbODMsNzY5XSwsezc3NTo3NzgwfV0sMzQ3OltbMTE1LDc2OV0sLHs3NzU6Nzc4MX1dLDM0ODpbWzgzLDc3MF1dLDM0OTpbWzExNSw3NzBdXSwzNTA6W1s4Myw4MDddXSwzNTE6W1sxMTUsODA3XV0sMzUyOltbODMsNzgwXSwsezc3NTo3NzgyfV0sMzUzOltbMTE1LDc4MF0sLHs3NzU6Nzc4M31dLDM1NDpbWzg0LDgwN11dLDM1NTpbWzExNiw4MDddXSwzNTY6W1s4NCw3ODBdXSwzNTc6W1sxMTYsNzgwXV0sMzYwOltbODUsNzcxXSwsezc2OTo3ODAwfV0sMzYxOltbMTE3LDc3MV0sLHs3Njk6NzgwMX1dLDM2MjpbWzg1LDc3Ml0sLHs3NzY6NzgwMn1dLDM2MzpbWzExNyw3NzJdLCx7Nzc2Ojc4MDN9XSwzNjQ6W1s4NSw3NzRdXSwzNjU6W1sxMTcsNzc0XV0sMzY2OltbODUsNzc4XV0sMzY3OltbMTE3LDc3OF1dLDM2ODpbWzg1LDc3OV1dLDM2OTpbWzExNyw3NzldXSwzNzA6W1s4NSw4MDhdXSwzNzE6W1sxMTcsODA4XV0sMzcyOltbODcsNzcwXV0sMzczOltbMTE5LDc3MF1dLDM3NDpbWzg5LDc3MF1dLDM3NTpbWzEyMSw3NzBdXSwzNzY6W1s4OSw3NzZdXSwzNzc6W1s5MCw3NjldXSwzNzg6W1sxMjIsNzY5XV0sMzc5OltbOTAsNzc1XV0sMzgwOltbMTIyLDc3NV1dLDM4MTpbWzkwLDc4MF1dLDM4MjpbWzEyMiw3ODBdXSwzODM6W1sxMTVdLDI1Nix7Nzc1Ojc4MzV9XSw0MTY6W1s3OSw3OTVdLCx7NzY4Ojc5MDAsNzY5Ojc4OTgsNzcxOjc5MDQsNzc3Ojc5MDIsODAzOjc5MDZ9XSw0MTc6W1sxMTEsNzk1XSwsezc2ODo3OTAxLDc2OTo3ODk5LDc3MTo3OTA1LDc3Nzo3OTAzLDgwMzo3OTA3fV0sNDMxOltbODUsNzk1XSwsezc2ODo3OTE0LDc2OTo3OTEyLDc3MTo3OTE4LDc3Nzo3OTE2LDgwMzo3OTIwfV0sNDMyOltbMTE3LDc5NV0sLHs3Njg6NzkxNSw3Njk6NzkxMyw3NzE6NzkxOSw3Nzc6NzkxNyw4MDM6NzkyMX1dLDQzOTpbLCx7NzgwOjQ5NH1dLDQ1MjpbWzY4LDM4MV0sMjU2XSw0NTM6W1s2OCwzODJdLDI1Nl0sNDU0OltbMTAwLDM4Ml0sMjU2XSw0NTU6W1s3Niw3NF0sMjU2XSw0NTY6W1s3NiwxMDZdLDI1Nl0sNDU3OltbMTA4LDEwNl0sMjU2XSw0NTg6W1s3OCw3NF0sMjU2XSw0NTk6W1s3OCwxMDZdLDI1Nl0sNDYwOltbMTEwLDEwNl0sMjU2XSw0NjE6W1s2NSw3ODBdXSw0NjI6W1s5Nyw3ODBdXSw0NjM6W1s3Myw3ODBdXSw0NjQ6W1sxMDUsNzgwXV0sNDY1OltbNzksNzgwXV0sNDY2OltbMTExLDc4MF1dLDQ2NzpbWzg1LDc4MF1dLDQ2ODpbWzExNyw3ODBdXSw0Njk6W1syMjAsNzcyXV0sNDcwOltbMjUyLDc3Ml1dLDQ3MTpbWzIyMCw3NjldXSw0NzI6W1syNTIsNzY5XV0sNDczOltbMjIwLDc4MF1dLDQ3NDpbWzI1Miw3ODBdXSw0NzU6W1syMjAsNzY4XV0sNDc2OltbMjUyLDc2OF1dLDQ3ODpbWzE5Niw3NzJdXSw0Nzk6W1syMjgsNzcyXV0sNDgwOltbNTUwLDc3Ml1dLDQ4MTpbWzU1MSw3NzJdXSw0ODI6W1sxOTgsNzcyXV0sNDgzOltbMjMwLDc3Ml1dLDQ4NjpbWzcxLDc4MF1dLDQ4NzpbWzEwMyw3ODBdXSw0ODg6W1s3NSw3ODBdXSw0ODk6W1sxMDcsNzgwXV0sNDkwOltbNzksODA4XSwsezc3Mjo0OTJ9XSw0OTE6W1sxMTEsODA4XSwsezc3Mjo0OTN9XSw0OTI6W1s0OTAsNzcyXV0sNDkzOltbNDkxLDc3Ml1dLDQ5NDpbWzQzOSw3ODBdXSw0OTU6W1s2NTgsNzgwXV0sNDk2OltbMTA2LDc4MF1dLDQ5NzpbWzY4LDkwXSwyNTZdLDQ5ODpbWzY4LDEyMl0sMjU2XSw0OTk6W1sxMDAsMTIyXSwyNTZdLDUwMDpbWzcxLDc2OV1dLDUwMTpbWzEwMyw3NjldXSw1MDQ6W1s3OCw3NjhdXSw1MDU6W1sxMTAsNzY4XV0sNTA2OltbMTk3LDc2OV1dLDUwNzpbWzIyOSw3NjldXSw1MDg6W1sxOTgsNzY5XV0sNTA5OltbMjMwLDc2OV1dLDUxMDpbWzIxNiw3NjldXSw1MTE6W1syNDgsNzY5XV0sNjYwNDU6WywyMjBdfSwKNTEyOns1MTI6W1s2NSw3ODNdXSw1MTM6W1s5Nyw3ODNdXSw1MTQ6W1s2NSw3ODVdXSw1MTU6W1s5Nyw3ODVdXSw1MTY6W1s2OSw3ODNdXSw1MTc6W1sxMDEsNzgzXV0sNTE4OltbNjksNzg1XV0sNTE5OltbMTAxLDc4NV1dLDUyMDpbWzczLDc4M11dLDUyMTpbWzEwNSw3ODNdXSw1MjI6W1s3Myw3ODVdXSw1MjM6W1sxMDUsNzg1XV0sNTI0OltbNzksNzgzXV0sNTI1OltbMTExLDc4M11dLDUyNjpbWzc5LDc4NV1dLDUyNzpbWzExMSw3ODVdXSw1Mjg6W1s4Miw3ODNdXSw1Mjk6W1sxMTQsNzgzXV0sNTMwOltbODIsNzg1XV0sNTMxOltbMTE0LDc4NV1dLDUzMjpbWzg1LDc4M11dLDUzMzpbWzExNyw3ODNdXSw1MzQ6W1s4NSw3ODVdXSw1MzU6W1sxMTcsNzg1XV0sNTM2OltbODMsODA2XV0sNTM3OltbMTE1LDgwNl1dLDUzODpbWzg0LDgwNl1dLDUzOTpbWzExNiw4MDZdXSw1NDI6W1s3Miw3ODBdXSw1NDM6W1sxMDQsNzgwXV0sNTUwOltbNjUsNzc1XSwsezc3Mjo0ODB9XSw1NTE6W1s5Nyw3NzVdLCx7NzcyOjQ4MX1dLDU1MjpbWzY5LDgwN10sLHs3NzQ6NzcwOH1dLDU1MzpbWzEwMSw4MDddLCx7Nzc0Ojc3MDl9XSw1NTQ6W1syMTQsNzcyXV0sNTU1OltbMjQ2LDc3Ml1dLDU1NjpbWzIxMyw3NzJdXSw1NTc6W1syNDUsNzcyXV0sNTU4OltbNzksNzc1XSwsezc3Mjo1NjB9XSw1NTk6W1sxMTEsNzc1XSwsezc3Mjo1NjF9XSw1NjA6W1s1NTgsNzcyXV0sNTYxOltbNTU5LDc3Ml1dLDU2MjpbWzg5LDc3Ml1dLDU2MzpbWzEyMSw3NzJdXSw2NTg6Wywsezc4MDo0OTV9XSw2ODg6W1sxMDRdLDI1Nl0sNjg5OltbNjE0XSwyNTZdLDY5MDpbWzEwNl0sMjU2XSw2OTE6W1sxMTRdLDI1Nl0sNjkyOltbNjMzXSwyNTZdLDY5MzpbWzYzNV0sMjU2XSw2OTQ6W1s2NDFdLDI1Nl0sNjk1OltbMTE5XSwyNTZdLDY5NjpbWzEyMV0sMjU2XSw3Mjg6W1szMiw3NzRdLDI1Nl0sNzI5OltbMzIsNzc1XSwyNTZdLDczMDpbWzMyLDc3OF0sMjU2XSw3MzE6W1szMiw4MDhdLDI1Nl0sNzMyOltbMzIsNzcxXSwyNTZdLDczMzpbWzMyLDc3OV0sMjU2XSw3MzY6W1s2MTFdLDI1Nl0sNzM3OltbMTA4XSwyNTZdLDczODpbWzExNV0sMjU2XSw3Mzk6W1sxMjBdLDI1Nl0sNzQwOltbNjYxXSwyNTZdLDY2MjcyOlssMjIwXX0sCjc2ODp7NzY4OlssMjMwXSw3Njk6WywyMzBdLDc3MDpbLDIzMF0sNzcxOlssMjMwXSw3NzI6WywyMzBdLDc3MzpbLDIzMF0sNzc0OlssMjMwXSw3NzU6WywyMzBdLDc3NjpbLDIzMCx7NzY5OjgzNn1dLDc3NzpbLDIzMF0sNzc4OlssMjMwXSw3Nzk6WywyMzBdLDc4MDpbLDIzMF0sNzgxOlssMjMwXSw3ODI6WywyMzBdLDc4MzpbLDIzMF0sNzg0OlssMjMwXSw3ODU6WywyMzBdLDc4NjpbLDIzMF0sNzg3OlssMjMwXSw3ODg6WywyMzBdLDc4OTpbLDIzMl0sNzkwOlssMjIwXSw3OTE6WywyMjBdLDc5MjpbLDIyMF0sNzkzOlssMjIwXSw3OTQ6WywyMzJdLDc5NTpbLDIxNl0sNzk2OlssMjIwXSw3OTc6WywyMjBdLDc5ODpbLDIyMF0sNzk5OlssMjIwXSw4MDA6WywyMjBdLDgwMTpbLDIwMl0sODAyOlssMjAyXSw4MDM6WywyMjBdLDgwNDpbLDIyMF0sODA1OlssMjIwXSw4MDY6WywyMjBdLDgwNzpbLDIwMl0sODA4OlssMjAyXSw4MDk6WywyMjBdLDgxMDpbLDIyMF0sODExOlssMjIwXSw4MTI6WywyMjBdLDgxMzpbLDIyMF0sODE0OlssMjIwXSw4MTU6WywyMjBdLDgxNjpbLDIyMF0sODE3OlssMjIwXSw4MTg6WywyMjBdLDgxOTpbLDIyMF0sODIwOlssMV0sODIxOlssMV0sODIyOlssMV0sODIzOlssMV0sODI0OlssMV0sODI1OlssMjIwXSw4MjY6WywyMjBdLDgyNzpbLDIyMF0sODI4OlssMjIwXSw4Mjk6WywyMzBdLDgzMDpbLDIzMF0sODMxOlssMjMwXSw4MzI6W1s3NjhdLDIzMF0sODMzOltbNzY5XSwyMzBdLDgzNDpbLDIzMF0sODM1OltbNzg3XSwyMzBdLDgzNjpbWzc3Niw3NjldLDIzMF0sODM3OlssMjQwXSw4Mzg6WywyMzBdLDgzOTpbLDIyMF0sODQwOlssMjIwXSw4NDE6WywyMjBdLDg0MjpbLDIzMF0sODQzOlssMjMwXSw4NDQ6WywyMzBdLDg0NTpbLDIyMF0sODQ2OlssMjIwXSw4NDg6WywyMzBdLDg0OTpbLDIzMF0sODUwOlssMjMwXSw4NTE6WywyMjBdLDg1MjpbLDIyMF0sODUzOlssMjIwXSw4NTQ6WywyMjBdLDg1NTpbLDIzMF0sODU2OlssMjMyXSw4NTc6WywyMjBdLDg1ODpbLDIyMF0sODU5OlssMjMwXSw4NjA6WywyMzNdLDg2MTpbLDIzNF0sODYyOlssMjM0XSw4NjM6WywyMzNdLDg2NDpbLDIzNF0sODY1OlssMjM0XSw4NjY6WywyMzNdLDg2NzpbLDIzMF0sODY4OlssMjMwXSw4Njk6WywyMzBdLDg3MDpbLDIzMF0sODcxOlssMjMwXSw4NzI6WywyMzBdLDg3MzpbLDIzMF0sODc0OlssMjMwXSw4NzU6WywyMzBdLDg3NjpbLDIzMF0sODc3OlssMjMwXSw4Nzg6WywyMzBdLDg3OTpbLDIzMF0sODg0OltbNjk3XV0sODkwOltbMzIsODM3XSwyNTZdLDg5NDpbWzU5XV0sOTAwOltbMzIsNzY5XSwyNTZdLDkwMTpbWzE2OCw3NjldXSw5MDI6W1s5MTMsNzY5XV0sOTAzOltbMTgzXV0sOTA0OltbOTE3LDc2OV1dLDkwNTpbWzkxOSw3NjldXSw5MDY6W1s5MjEsNzY5XV0sOTA4OltbOTI3LDc2OV1dLDkxMDpbWzkzMyw3NjldXSw5MTE6W1s5MzcsNzY5XV0sOTEyOltbOTcwLDc2OV1dLDkxMzpbLCx7NzY4OjgxMjIsNzY5OjkwMiw3NzI6ODEyMSw3NzQ6ODEyMCw3ODc6Nzk0NCw3ODg6Nzk0NSw4Mzc6ODEyNH1dLDkxNzpbLCx7NzY4OjgxMzYsNzY5OjkwNCw3ODc6Nzk2MCw3ODg6Nzk2MX1dLDkxOTpbLCx7NzY4OjgxMzgsNzY5OjkwNSw3ODc6Nzk3Niw3ODg6Nzk3Nyw4Mzc6ODE0MH1dLDkyMTpbLCx7NzY4OjgxNTQsNzY5OjkwNiw3NzI6ODE1Myw3NzQ6ODE1Miw3NzY6OTM4LDc4Nzo3OTkyLDc4ODo3OTkzfV0sOTI3OlssLHs3Njg6ODE4NCw3Njk6OTA4LDc4Nzo4MDA4LDc4ODo4MDA5fV0sOTI5OlssLHs3ODg6ODE3Mn1dLDkzMzpbLCx7NzY4OjgxNzAsNzY5OjkxMCw3NzI6ODE2OSw3NzQ6ODE2OCw3NzY6OTM5LDc4ODo4MDI1fV0sOTM3OlssLHs3Njg6ODE4Niw3Njk6OTExLDc4Nzo4MDQwLDc4ODo4MDQxLDgzNzo4MTg4fV0sOTM4OltbOTIxLDc3Nl1dLDkzOTpbWzkzMyw3NzZdXSw5NDA6W1s5NDUsNzY5XSwsezgzNzo4MTE2fV0sOTQxOltbOTQ5LDc2OV1dLDk0MjpbWzk1MSw3NjldLCx7ODM3OjgxMzJ9XSw5NDM6W1s5NTMsNzY5XV0sOTQ0OltbOTcxLDc2OV1dLDk0NTpbLCx7NzY4OjgwNDgsNzY5Ojk0MCw3NzI6ODExMyw3NzQ6ODExMiw3ODc6NzkzNiw3ODg6NzkzNyw4MzQ6ODExOCw4Mzc6ODExNX1dLDk0OTpbLCx7NzY4OjgwNTAsNzY5Ojk0MSw3ODc6Nzk1Miw3ODg6Nzk1M31dLDk1MTpbLCx7NzY4OjgwNTIsNzY5Ojk0Miw3ODc6Nzk2OCw3ODg6Nzk2OSw4MzQ6ODEzNCw4Mzc6ODEzMX1dLDk1MzpbLCx7NzY4OjgwNTQsNzY5Ojk0Myw3NzI6ODE0NSw3NzQ6ODE0NCw3NzY6OTcwLDc4Nzo3OTg0LDc4ODo3OTg1LDgzNDo4MTUwfV0sOTU5OlssLHs3Njg6ODA1Niw3Njk6OTcyLDc4Nzo4MDAwLDc4ODo4MDAxfV0sOTYxOlssLHs3ODc6ODE2NCw3ODg6ODE2NX1dLDk2NTpbLCx7NzY4OjgwNTgsNzY5Ojk3Myw3NzI6ODE2MSw3NzQ6ODE2MCw3NzY6OTcxLDc4Nzo4MDE2LDc4ODo4MDE3LDgzNDo4MTY2fV0sOTY5OlssLHs3Njg6ODA2MCw3Njk6OTc0LDc4Nzo4MDMyLDc4ODo4MDMzLDgzNDo4MTgyLDgzNzo4MTc5fV0sOTcwOltbOTUzLDc3Nl0sLHs3Njg6ODE0Niw3Njk6OTEyLDgzNDo4MTUxfV0sOTcxOltbOTY1LDc3Nl0sLHs3Njg6ODE2Miw3Njk6OTQ0LDgzNDo4MTY3fV0sOTcyOltbOTU5LDc2OV1dLDk3MzpbWzk2NSw3NjldXSw5NzQ6W1s5NjksNzY5XSwsezgzNzo4MTgwfV0sOTc2OltbOTQ2XSwyNTZdLDk3NzpbWzk1Ml0sMjU2XSw5Nzg6W1s5MzNdLDI1Nix7NzY5Ojk3OSw3NzY6OTgwfV0sOTc5OltbOTc4LDc2OV1dLDk4MDpbWzk3OCw3NzZdXSw5ODE6W1s5NjZdLDI1Nl0sOTgyOltbOTYwXSwyNTZdLDEwMDg6W1s5NTRdLDI1Nl0sMTAwOTpbWzk2MV0sMjU2XSwxMDEwOltbOTYyXSwyNTZdLDEwMTI6W1s5MjBdLDI1Nl0sMTAxMzpbWzk0OV0sMjU2XSwxMDE3OltbOTMxXSwyNTZdLDY2NDIyOlssMjMwXSw2NjQyMzpbLDIzMF0sNjY0MjQ6WywyMzBdLDY2NDI1OlssMjMwXSw2NjQyNjpbLDIzMF19LAoxMDI0OnsxMDI0OltbMTA0NSw3NjhdXSwxMDI1OltbMTA0NSw3NzZdXSwxMDI3OltbMTA0Myw3NjldXSwxMDMwOlssLHs3NzY6MTAzMX1dLDEwMzE6W1sxMDMwLDc3Nl1dLDEwMzY6W1sxMDUwLDc2OV1dLDEwMzc6W1sxMDQ4LDc2OF1dLDEwMzg6W1sxMDU5LDc3NF1dLDEwNDA6Wywsezc3NDoxMjMyLDc3NjoxMjM0fV0sMTA0MzpbLCx7NzY5OjEwMjd9XSwxMDQ1OlssLHs3Njg6MTAyNCw3NzQ6MTIzOCw3NzY6MTAyNX1dLDEwNDY6Wywsezc3NDoxMjE3LDc3NjoxMjQ0fV0sMTA0NzpbLCx7Nzc2OjEyNDZ9XSwxMDQ4OlssLHs3Njg6MTAzNyw3NzI6MTI1MCw3NzQ6MTA0OSw3NzY6MTI1Mn1dLDEwNDk6W1sxMDQ4LDc3NF1dLDEwNTA6Wywsezc2OToxMDM2fV0sMTA1NDpbLCx7Nzc2OjEyNTR9XSwxMDU5OlssLHs3NzI6MTI2Miw3NzQ6MTAzOCw3NzY6MTI2NCw3Nzk6MTI2Nn1dLDEwNjM6Wywsezc3NjoxMjY4fV0sMTA2NzpbLCx7Nzc2OjEyNzJ9XSwxMDY5OlssLHs3NzY6MTI2MH1dLDEwNzI6Wywsezc3NDoxMjMzLDc3NjoxMjM1fV0sMTA3NTpbLCx7NzY5OjExMDd9XSwxMDc3OlssLHs3Njg6MTEwNCw3NzQ6MTIzOSw3NzY6MTEwNX1dLDEwNzg6Wywsezc3NDoxMjE4LDc3NjoxMjQ1fV0sMTA3OTpbLCx7Nzc2OjEyNDd9XSwxMDgwOlssLHs3Njg6MTExNyw3NzI6MTI1MSw3NzQ6MTA4MSw3NzY6MTI1M31dLDEwODE6W1sxMDgwLDc3NF1dLDEwODI6Wywsezc2OToxMTE2fV0sMTA4NjpbLCx7Nzc2OjEyNTV9XSwxMDkxOlssLHs3NzI6MTI2Myw3NzQ6MTExOCw3NzY6MTI2NSw3Nzk6MTI2N31dLDEwOTU6Wywsezc3NjoxMjY5fV0sMTA5OTpbLCx7Nzc2OjEyNzN9XSwxMTAxOlssLHs3NzY6MTI2MX1dLDExMDQ6W1sxMDc3LDc2OF1dLDExMDU6W1sxMDc3LDc3Nl1dLDExMDc6W1sxMDc1LDc2OV1dLDExMTA6Wywsezc3NjoxMTExfV0sMTExMTpbWzExMTAsNzc2XV0sMTExNjpbWzEwODIsNzY5XV0sMTExNzpbWzEwODAsNzY4XV0sMTExODpbWzEwOTEsNzc0XV0sMTE0MDpbLCx7NzgzOjExNDJ9XSwxMTQxOlssLHs3ODM6MTE0M31dLDExNDI6W1sxMTQwLDc4M11dLDExNDM6W1sxMTQxLDc4M11dLDExNTU6WywyMzBdLDExNTY6WywyMzBdLDExNTc6WywyMzBdLDExNTg6WywyMzBdLDExNTk6WywyMzBdLDEyMTc6W1sxMDQ2LDc3NF1dLDEyMTg6W1sxMDc4LDc3NF1dLDEyMzI6W1sxMDQwLDc3NF1dLDEyMzM6W1sxMDcyLDc3NF1dLDEyMzQ6W1sxMDQwLDc3Nl1dLDEyMzU6W1sxMDcyLDc3Nl1dLDEyMzg6W1sxMDQ1LDc3NF1dLDEyMzk6W1sxMDc3LDc3NF1dLDEyNDA6Wywsezc3NjoxMjQyfV0sMTI0MTpbLCx7Nzc2OjEyNDN9XSwxMjQyOltbMTI0MCw3NzZdXSwxMjQzOltbMTI0MSw3NzZdXSwxMjQ0OltbMTA0Niw3NzZdXSwxMjQ1OltbMTA3OCw3NzZdXSwxMjQ2OltbMTA0Nyw3NzZdXSwxMjQ3OltbMTA3OSw3NzZdXSwxMjUwOltbMTA0OCw3NzJdXSwxMjUxOltbMTA4MCw3NzJdXSwxMjUyOltbMTA0OCw3NzZdXSwxMjUzOltbMTA4MCw3NzZdXSwxMjU0OltbMTA1NCw3NzZdXSwxMjU1OltbMTA4Niw3NzZdXSwxMjU2OlssLHs3NzY6MTI1OH1dLDEyNTc6Wywsezc3NjoxMjU5fV0sMTI1ODpbWzEyNTYsNzc2XV0sMTI1OTpbWzEyNTcsNzc2XV0sMTI2MDpbWzEwNjksNzc2XV0sMTI2MTpbWzExMDEsNzc2XV0sMTI2MjpbWzEwNTksNzcyXV0sMTI2MzpbWzEwOTEsNzcyXV0sMTI2NDpbWzEwNTksNzc2XV0sMTI2NTpbWzEwOTEsNzc2XV0sMTI2NjpbWzEwNTksNzc5XV0sMTI2NzpbWzEwOTEsNzc5XV0sMTI2ODpbWzEwNjMsNzc2XV0sMTI2OTpbWzEwOTUsNzc2XV0sMTI3MjpbWzEwNjcsNzc2XV0sMTI3MzpbWzEwOTksNzc2XV19LAoxMjgwOnsxNDE1OltbMTM4MSwxNDEwXSwyNTZdLDE0MjU6WywyMjBdLDE0MjY6WywyMzBdLDE0Mjc6WywyMzBdLDE0Mjg6WywyMzBdLDE0Mjk6WywyMzBdLDE0MzA6WywyMjBdLDE0MzE6WywyMzBdLDE0MzI6WywyMzBdLDE0MzM6WywyMzBdLDE0MzQ6WywyMjJdLDE0MzU6WywyMjBdLDE0MzY6WywyMzBdLDE0Mzc6WywyMzBdLDE0Mzg6WywyMzBdLDE0Mzk6WywyMzBdLDE0NDA6WywyMzBdLDE0NDE6WywyMzBdLDE0NDI6WywyMjBdLDE0NDM6WywyMjBdLDE0NDQ6WywyMjBdLDE0NDU6WywyMjBdLDE0NDY6WywyMjBdLDE0NDc6WywyMjBdLDE0NDg6WywyMzBdLDE0NDk6WywyMzBdLDE0NTA6WywyMjBdLDE0NTE6WywyMzBdLDE0NTI6WywyMzBdLDE0NTM6WywyMjJdLDE0NTQ6WywyMjhdLDE0NTU6WywyMzBdLDE0NTY6WywxMF0sMTQ1NzpbLDExXSwxNDU4OlssMTJdLDE0NTk6WywxM10sMTQ2MDpbLDE0XSwxNDYxOlssMTVdLDE0NjI6WywxNl0sMTQ2MzpbLDE3XSwxNDY0OlssMThdLDE0NjU6WywxOV0sMTQ2NjpbLDE5XSwxNDY3OlssMjBdLDE0Njg6WywyMV0sMTQ2OTpbLDIyXSwxNDcxOlssMjNdLDE0NzM6WywyNF0sMTQ3NDpbLDI1XSwxNDc2OlssMjMwXSwxNDc3OlssMjIwXSwxNDc5OlssMThdfSwKMTUzNjp7MTU1MjpbLDIzMF0sMTU1MzpbLDIzMF0sMTU1NDpbLDIzMF0sMTU1NTpbLDIzMF0sMTU1NjpbLDIzMF0sMTU1NzpbLDIzMF0sMTU1ODpbLDIzMF0sMTU1OTpbLDIzMF0sMTU2MDpbLDMwXSwxNTYxOlssMzFdLDE1NjI6WywzMl0sMTU3MDpbWzE1NzUsMTYxOV1dLDE1NzE6W1sxNTc1LDE2MjBdXSwxNTcyOltbMTYwOCwxNjIwXV0sMTU3MzpbWzE1NzUsMTYyMV1dLDE1NzQ6W1sxNjEwLDE2MjBdXSwxNTc1OlssLHsxNjE5OjE1NzAsMTYyMDoxNTcxLDE2MjE6MTU3M31dLDE2MDg6WywsezE2MjA6MTU3Mn1dLDE2MTA6WywsezE2MjA6MTU3NH1dLDE2MTE6WywyN10sMTYxMjpbLDI4XSwxNjEzOlssMjldLDE2MTQ6WywzMF0sMTYxNTpbLDMxXSwxNjE2OlssMzJdLDE2MTc6WywzM10sMTYxODpbLDM0XSwxNjE5OlssMjMwXSwxNjIwOlssMjMwXSwxNjIxOlssMjIwXSwxNjIyOlssMjIwXSwxNjIzOlssMjMwXSwxNjI0OlssMjMwXSwxNjI1OlssMjMwXSwxNjI2OlssMjMwXSwxNjI3OlssMjMwXSwxNjI4OlssMjIwXSwxNjI5OlssMjMwXSwxNjMwOlssMjMwXSwxNjMxOlssMjIwXSwxNjQ4OlssMzVdLDE2NTM6W1sxNTc1LDE2NTJdLDI1Nl0sMTY1NDpbWzE2MDgsMTY1Ml0sMjU2XSwxNjU1OltbMTczNSwxNjUyXSwyNTZdLDE2NTY6W1sxNjEwLDE2NTJdLDI1Nl0sMTcyODpbWzE3NDksMTYyMF1dLDE3Mjk6WywsezE2MjA6MTczMH1dLDE3MzA6W1sxNzI5LDE2MjBdXSwxNzQ2OlssLHsxNjIwOjE3NDd9XSwxNzQ3OltbMTc0NiwxNjIwXV0sMTc0OTpbLCx7MTYyMDoxNzI4fV0sMTc1MDpbLDIzMF0sMTc1MTpbLDIzMF0sMTc1MjpbLDIzMF0sMTc1MzpbLDIzMF0sMTc1NDpbLDIzMF0sMTc1NTpbLDIzMF0sMTc1NjpbLDIzMF0sMTc1OTpbLDIzMF0sMTc2MDpbLDIzMF0sMTc2MTpbLDIzMF0sMTc2MjpbLDIzMF0sMTc2MzpbLDIyMF0sMTc2NDpbLDIzMF0sMTc2NzpbLDIzMF0sMTc2ODpbLDIzMF0sMTc3MDpbLDIyMF0sMTc3MTpbLDIzMF0sMTc3MjpbLDIzMF0sMTc3MzpbLDIyMF19LAoxNzkyOnsxODA5OlssMzZdLDE4NDA6WywyMzBdLDE4NDE6WywyMjBdLDE4NDI6WywyMzBdLDE4NDM6WywyMzBdLDE4NDQ6WywyMjBdLDE4NDU6WywyMzBdLDE4NDY6WywyMzBdLDE4NDc6WywyMjBdLDE4NDg6WywyMjBdLDE4NDk6WywyMjBdLDE4NTA6WywyMzBdLDE4NTE6WywyMjBdLDE4NTI6WywyMjBdLDE4NTM6WywyMzBdLDE4NTQ6WywyMjBdLDE4NTU6WywyMzBdLDE4NTY6WywyMzBdLDE4NTc6WywyMzBdLDE4NTg6WywyMjBdLDE4NTk6WywyMzBdLDE4NjA6WywyMjBdLDE4NjE6WywyMzBdLDE4NjI6WywyMjBdLDE4NjM6WywyMzBdLDE4NjQ6WywyMjBdLDE4NjU6WywyMzBdLDE4NjY6WywyMzBdLDIwMjc6WywyMzBdLDIwMjg6WywyMzBdLDIwMjk6WywyMzBdLDIwMzA6WywyMzBdLDIwMzE6WywyMzBdLDIwMzI6WywyMzBdLDIwMzM6WywyMzBdLDIwMzQ6WywyMjBdLDIwMzU6WywyMzBdfSwKMjA0ODp7MjA3MDpbLDIzMF0sMjA3MTpbLDIzMF0sMjA3MjpbLDIzMF0sMjA3MzpbLDIzMF0sMjA3NTpbLDIzMF0sMjA3NjpbLDIzMF0sMjA3NzpbLDIzMF0sMjA3ODpbLDIzMF0sMjA3OTpbLDIzMF0sMjA4MDpbLDIzMF0sMjA4MTpbLDIzMF0sMjA4MjpbLDIzMF0sMjA4MzpbLDIzMF0sMjA4NTpbLDIzMF0sMjA4NjpbLDIzMF0sMjA4NzpbLDIzMF0sMjA4OTpbLDIzMF0sMjA5MDpbLDIzMF0sMjA5MTpbLDIzMF0sMjA5MjpbLDIzMF0sMjA5MzpbLDIzMF0sMjEzNzpbLDIyMF0sMjEzODpbLDIyMF0sMjEzOTpbLDIyMF0sMjI3NjpbLDIzMF0sMjI3NzpbLDIzMF0sMjI3ODpbLDIyMF0sMjI3OTpbLDIzMF0sMjI4MDpbLDIzMF0sMjI4MTpbLDIyMF0sMjI4MjpbLDIzMF0sMjI4MzpbLDIzMF0sMjI4NDpbLDIzMF0sMjI4NTpbLDIyMF0sMjI4NjpbLDIyMF0sMjI4NzpbLDIyMF0sMjI4ODpbLDI3XSwyMjg5OlssMjhdLDIyOTA6WywyOV0sMjI5MTpbLDIzMF0sMjI5MjpbLDIzMF0sMjI5MzpbLDIzMF0sMjI5NDpbLDIyMF0sMjI5NTpbLDIzMF0sMjI5NjpbLDIzMF0sMjI5NzpbLDIyMF0sMjI5ODpbLDIyMF0sMjI5OTpbLDIzMF0sMjMwMDpbLDIzMF0sMjMwMTpbLDIzMF0sMjMwMjpbLDIzMF0sMjMwMzpbLDIzMF19LAoyMzA0OnsyMzQ0OlssLHsyMzY0OjIzNDV9XSwyMzQ1OltbMjM0NCwyMzY0XV0sMjM1MjpbLCx7MjM2NDoyMzUzfV0sMjM1MzpbWzIzNTIsMjM2NF1dLDIzNTU6WywsezIzNjQ6MjM1Nn1dLDIzNTY6W1syMzU1LDIzNjRdXSwyMzY0OlssN10sMjM4MTpbLDldLDIzODU6WywyMzBdLDIzODY6WywyMjBdLDIzODc6WywyMzBdLDIzODg6WywyMzBdLDIzOTI6W1syMzI1LDIzNjRdLDUxMl0sMjM5MzpbWzIzMjYsMjM2NF0sNTEyXSwyMzk0OltbMjMyNywyMzY0XSw1MTJdLDIzOTU6W1syMzMyLDIzNjRdLDUxMl0sMjM5NjpbWzIzMzcsMjM2NF0sNTEyXSwyMzk3OltbMjMzOCwyMzY0XSw1MTJdLDIzOTg6W1syMzQ3LDIzNjRdLDUxMl0sMjM5OTpbWzIzNTEsMjM2NF0sNTEyXSwyNDkyOlssN10sMjUwMzpbLCx7MjQ5NDoyNTA3LDI1MTk6MjUwOH1dLDI1MDc6W1syNTAzLDI0OTRdXSwyNTA4OltbMjUwMywyNTE5XV0sMjUwOTpbLDldLDI1MjQ6W1syNDY1LDI0OTJdLDUxMl0sMjUyNTpbWzI0NjYsMjQ5Ml0sNTEyXSwyNTI3OltbMjQ3OSwyNDkyXSw1MTJdfSwKMjU2MDp7MjYxMTpbWzI2MTAsMjYyMF0sNTEyXSwyNjE0OltbMjYxNiwyNjIwXSw1MTJdLDI2MjA6Wyw3XSwyNjM3OlssOV0sMjY0OTpbWzI1ODIsMjYyMF0sNTEyXSwyNjUwOltbMjU4MywyNjIwXSw1MTJdLDI2NTE6W1syNTg4LDI2MjBdLDUxMl0sMjY1NDpbWzI2MDMsMjYyMF0sNTEyXSwyNzQ4OlssN10sMjc2NTpbLDldLDY4MTA5OlssMjIwXSw2ODExMTpbLDIzMF0sNjgxNTI6WywyMzBdLDY4MTUzOlssMV0sNjgxNTQ6WywyMjBdLDY4MTU5OlssOV0sNjgzMjU6WywyMzBdLDY4MzI2OlssMjIwXX0sCjI4MTY6ezI4NzY6Wyw3XSwyODg3OlssLHsyODc4OjI4OTEsMjkwMjoyODg4LDI5MDM6Mjg5Mn1dLDI4ODg6W1syODg3LDI5MDJdXSwyODkxOltbMjg4NywyODc4XV0sMjg5MjpbWzI4ODcsMjkwM11dLDI4OTM6Wyw5XSwyOTA4OltbMjg0OSwyODc2XSw1MTJdLDI5MDk6W1syODUwLDI4NzZdLDUxMl0sMjk2MjpbLCx7MzAzMToyOTY0fV0sMjk2NDpbWzI5NjIsMzAzMV1dLDMwMTQ6WywsezMwMDY6MzAxOCwzMDMxOjMwMjB9XSwzMDE1OlssLHszMDA2OjMwMTl9XSwzMDE4OltbMzAxNCwzMDA2XV0sMzAxOTpbWzMwMTUsMzAwNl1dLDMwMjA6W1szMDE0LDMwMzFdXSwzMDIxOlssOV19LAozMDcyOnszMTQyOlssLHszMTU4OjMxNDR9XSwzMTQ0OltbMzE0MiwzMTU4XV0sMzE0OTpbLDldLDMxNTc6Wyw4NF0sMzE1ODpbLDkxXSwzMjYwOlssN10sMzI2MzpbLCx7MzI4NTozMjY0fV0sMzI2NDpbWzMyNjMsMzI4NV1dLDMyNzA6WywsezMyNjY6MzI3NCwzMjg1OjMyNzEsMzI4NjozMjcyfV0sMzI3MTpbWzMyNzAsMzI4NV1dLDMyNzI6W1szMjcwLDMyODZdXSwzMjc0OltbMzI3MCwzMjY2XSwsezMyODU6MzI3NX1dLDMyNzU6W1szMjc0LDMyODVdXSwzMjc3OlssOV19LAozMzI4OnszMzk4OlssLHszMzkwOjM0MDIsMzQxNTozNDA0fV0sMzM5OTpbLCx7MzM5MDozNDAzfV0sMzQwMjpbWzMzOTgsMzM5MF1dLDM0MDM6W1szMzk5LDMzOTBdXSwzNDA0OltbMzM5OCwzNDE1XV0sMzQwNTpbLDldLDM1MzA6Wyw5XSwzNTQ1OlssLHszNTMwOjM1NDYsMzUzNTozNTQ4LDM1NTE6MzU1MH1dLDM1NDY6W1szNTQ1LDM1MzBdXSwzNTQ4OltbMzU0NSwzNTM1XSwsezM1MzA6MzU0OX1dLDM1NDk6W1szNTQ4LDM1MzBdXSwzNTUwOltbMzU0NSwzNTUxXV19LAozNTg0OnszNjM1OltbMzY2MSwzNjM0XSwyNTZdLDM2NDA6WywxMDNdLDM2NDE6WywxMDNdLDM2NDI6Wyw5XSwzNjU2OlssMTA3XSwzNjU3OlssMTA3XSwzNjU4OlssMTA3XSwzNjU5OlssMTA3XSwzNzYzOltbMzc4OSwzNzYyXSwyNTZdLDM3Njg6WywxMThdLDM3Njk6WywxMThdLDM3ODQ6WywxMjJdLDM3ODU6WywxMjJdLDM3ODY6WywxMjJdLDM3ODc6WywxMjJdLDM4MDQ6W1szNzU1LDM3MzddLDI1Nl0sMzgwNTpbWzM3NTUsMzc0NV0sMjU2XX0sCjM4NDA6ezM4NTI6W1szODUxXSwyNTZdLDM4NjQ6WywyMjBdLDM4NjU6WywyMjBdLDM4OTM6WywyMjBdLDM4OTU6WywyMjBdLDM4OTc6WywyMTZdLDM5MDc6W1szOTA2LDQwMjNdLDUxMl0sMzkxNzpbWzM5MTYsNDAyM10sNTEyXSwzOTIyOltbMzkyMSw0MDIzXSw1MTJdLDM5Mjc6W1szOTI2LDQwMjNdLDUxMl0sMzkzMjpbWzM5MzEsNDAyM10sNTEyXSwzOTQ1OltbMzkwNCw0MDIxXSw1MTJdLDM5NTM6WywxMjldLDM5NTQ6WywxMzBdLDM5NTU6W1szOTUzLDM5NTRdLDUxMl0sMzk1NjpbLDEzMl0sMzk1NzpbWzM5NTMsMzk1Nl0sNTEyXSwzOTU4OltbNDAxOCwzOTY4XSw1MTJdLDM5NTk6W1s0MDE4LDM5NjldLDI1Nl0sMzk2MDpbWzQwMTksMzk2OF0sNTEyXSwzOTYxOltbNDAxOSwzOTY5XSwyNTZdLDM5NjI6WywxMzBdLDM5NjM6WywxMzBdLDM5NjQ6WywxMzBdLDM5NjU6WywxMzBdLDM5Njg6WywxMzBdLDM5Njk6W1szOTUzLDM5NjhdLDUxMl0sMzk3MDpbLDIzMF0sMzk3MTpbLDIzMF0sMzk3MjpbLDldLDM5NzQ6WywyMzBdLDM5NzU6WywyMzBdLDM5ODc6W1szOTg2LDQwMjNdLDUxMl0sMzk5NzpbWzM5OTYsNDAyM10sNTEyXSw0MDAyOltbNDAwMSw0MDIzXSw1MTJdLDQwMDc6W1s0MDA2LDQwMjNdLDUxMl0sNDAxMjpbWzQwMTEsNDAyM10sNTEyXSw0MDI1OltbMzk4NCw0MDIxXSw1MTJdLDQwMzg6WywyMjBdfSwKNDA5Njp7NDEzMzpbLCx7NDE0Mjo0MTM0fV0sNDEzNDpbWzQxMzMsNDE0Ml1dLDQxNTE6Wyw3XSw0MTUzOlssOV0sNDE1NDpbLDldLDQyMzc6WywyMjBdLDQzNDg6W1s0MzE2XSwyNTZdLDY5NzAyOlssOV0sNjk3NTk6Wyw5XSw2OTc4NTpbLCx7Njk4MTg6Njk3ODZ9XSw2OTc4NjpbWzY5Nzg1LDY5ODE4XV0sNjk3ODc6WywsezY5ODE4OjY5Nzg4fV0sNjk3ODg6W1s2OTc4Nyw2OTgxOF1dLDY5Nzk3OlssLHs2OTgxODo2OTgwM31dLDY5ODAzOltbNjk3OTcsNjk4MThdXSw2OTgxNzpbLDldLDY5ODE4OlssN119LAo0MzUyOns2OTg4ODpbLDIzMF0sNjk4ODk6WywyMzBdLDY5ODkwOlssMjMwXSw2OTkzNDpbWzY5OTM3LDY5OTI3XV0sNjk5MzU6W1s2OTkzOCw2OTkyN11dLDY5OTM3OlssLHs2OTkyNzo2OTkzNH1dLDY5OTM4OlssLHs2OTkyNzo2OTkzNX1dLDY5OTM5OlssOV0sNjk5NDA6Wyw5XSw3MDAwMzpbLDddLDcwMDgwOlssOV19LAo0NjA4Ons3MDE5NzpbLDldLDcwMTk4OlssN10sNzAzNzc6Wyw3XSw3MDM3ODpbLDldfSwKNDg2NDp7NDk1NzpbLDIzMF0sNDk1ODpbLDIzMF0sNDk1OTpbLDIzMF0sNzA0NjA6Wyw3XSw3MDQ3MTpbLCx7NzA0NjI6NzA0NzUsNzA0ODc6NzA0NzZ9XSw3MDQ3NTpbWzcwNDcxLDcwNDYyXV0sNzA0NzY6W1s3MDQ3MSw3MDQ4N11dLDcwNDc3OlssOV0sNzA1MDI6WywyMzBdLDcwNTAzOlssMjMwXSw3MDUwNDpbLDIzMF0sNzA1MDU6WywyMzBdLDcwNTA2OlssMjMwXSw3MDUwNzpbLDIzMF0sNzA1MDg6WywyMzBdLDcwNTEyOlssMjMwXSw3MDUxMzpbLDIzMF0sNzA1MTQ6WywyMzBdLDcwNTE1OlssMjMwXSw3MDUxNjpbLDIzMF19LAo1MTIwOns3MDg0MTpbLCx7NzA4MzI6NzA4NDQsNzA4NDI6NzA4NDMsNzA4NDU6NzA4NDZ9XSw3MDg0MzpbWzcwODQxLDcwODQyXV0sNzA4NDQ6W1s3MDg0MSw3MDgzMl1dLDcwODQ2OltbNzA4NDEsNzA4NDVdXSw3MDg1MDpbLDldLDcwODUxOlssN119LAo1Mzc2Ons3MTA5NjpbLCx7NzEwODc6NzEwOTh9XSw3MTA5NzpbLCx7NzEwODc6NzEwOTl9XSw3MTA5ODpbWzcxMDk2LDcxMDg3XV0sNzEwOTk6W1s3MTA5Nyw3MTA4N11dLDcxMTAzOlssOV0sNzExMDQ6Wyw3XX0sCjU2MzI6ezcxMjMxOlssOV0sNzEzNTA6Wyw5XSw3MTM1MTpbLDddfSwKNTg4ODp7NTkwODpbLDldLDU5NDA6Wyw5XSw2MDk4OlssOV0sNjEwOTpbLDIzMF19LAo2MTQ0Ons2MzEzOlssMjI4XX0sCjY0MDA6ezY0NTc6WywyMjJdLDY0NTg6WywyMzBdLDY0NTk6WywyMjBdfSwKNjY1Njp7NjY3OTpbLDIzMF0sNjY4MDpbLDIyMF0sNjc1MjpbLDldLDY3NzM6WywyMzBdLDY3NzQ6WywyMzBdLDY3NzU6WywyMzBdLDY3NzY6WywyMzBdLDY3Nzc6WywyMzBdLDY3Nzg6WywyMzBdLDY3Nzk6WywyMzBdLDY3ODA6WywyMzBdLDY3ODM6WywyMjBdLDY4MzI6WywyMzBdLDY4MzM6WywyMzBdLDY4MzQ6WywyMzBdLDY4MzU6WywyMzBdLDY4MzY6WywyMzBdLDY4Mzc6WywyMjBdLDY4Mzg6WywyMjBdLDY4Mzk6WywyMjBdLDY4NDA6WywyMjBdLDY4NDE6WywyMjBdLDY4NDI6WywyMjBdLDY4NDM6WywyMzBdLDY4NDQ6WywyMzBdLDY4NDU6WywyMjBdfSwKNjkxMjp7NjkxNzpbLCx7Njk2NTo2OTE4fV0sNjkxODpbWzY5MTcsNjk2NV1dLDY5MTk6WywsezY5NjU6NjkyMH1dLDY5MjA6W1s2OTE5LDY5NjVdXSw2OTIxOlssLHs2OTY1OjY5MjJ9XSw2OTIyOltbNjkyMSw2OTY1XV0sNjkyMzpbLCx7Njk2NTo2OTI0fV0sNjkyNDpbWzY5MjMsNjk2NV1dLDY5MjU6WywsezY5NjU6NjkyNn1dLDY5MjY6W1s2OTI1LDY5NjVdXSw2OTI5OlssLHs2OTY1OjY5MzB9XSw2OTMwOltbNjkyOSw2OTY1XV0sNjk2NDpbLDddLDY5NzA6WywsezY5NjU6Njk3MX1dLDY5NzE6W1s2OTcwLDY5NjVdXSw2OTcyOlssLHs2OTY1OjY5NzN9XSw2OTczOltbNjk3Miw2OTY1XV0sNjk3NDpbLCx7Njk2NTo2OTc2fV0sNjk3NTpbLCx7Njk2NTo2OTc3fV0sNjk3NjpbWzY5NzQsNjk2NV1dLDY5Nzc6W1s2OTc1LDY5NjVdXSw2OTc4OlssLHs2OTY1OjY5Nzl9XSw2OTc5OltbNjk3OCw2OTY1XV0sNjk4MDpbLDldLDcwMTk6WywyMzBdLDcwMjA6WywyMjBdLDcwMjE6WywyMzBdLDcwMjI6WywyMzBdLDcwMjM6WywyMzBdLDcwMjQ6WywyMzBdLDcwMjU6WywyMzBdLDcwMjY6WywyMzBdLDcwMjc6WywyMzBdLDcwODI6Wyw5XSw3MDgzOlssOV0sNzE0MjpbLDddLDcxNTQ6Wyw5XSw3MTU1OlssOV19LAo3MTY4Ons3MjIzOlssN10sNzM3NjpbLDIzMF0sNzM3NzpbLDIzMF0sNzM3ODpbLDIzMF0sNzM4MDpbLDFdLDczODE6WywyMjBdLDczODI6WywyMjBdLDczODM6WywyMjBdLDczODQ6WywyMjBdLDczODU6WywyMjBdLDczODY6WywyMzBdLDczODc6WywyMzBdLDczODg6WywyMjBdLDczODk6WywyMjBdLDczOTA6WywyMjBdLDczOTE6WywyMjBdLDczOTI6WywyMzBdLDczOTQ6WywxXSw3Mzk1OlssMV0sNzM5NjpbLDFdLDczOTc6WywxXSw3Mzk4OlssMV0sNzM5OTpbLDFdLDc0MDA6WywxXSw3NDA1OlssMjIwXSw3NDEyOlssMjMwXSw3NDE2OlssMjMwXSw3NDE3OlssMjMwXX0sCjc0MjQ6ezc0Njg6W1s2NV0sMjU2XSw3NDY5OltbMTk4XSwyNTZdLDc0NzA6W1s2Nl0sMjU2XSw3NDcyOltbNjhdLDI1Nl0sNzQ3MzpbWzY5XSwyNTZdLDc0NzQ6W1szOThdLDI1Nl0sNzQ3NTpbWzcxXSwyNTZdLDc0NzY6W1s3Ml0sMjU2XSw3NDc3OltbNzNdLDI1Nl0sNzQ3ODpbWzc0XSwyNTZdLDc0Nzk6W1s3NV0sMjU2XSw3NDgwOltbNzZdLDI1Nl0sNzQ4MTpbWzc3XSwyNTZdLDc0ODI6W1s3OF0sMjU2XSw3NDg0OltbNzldLDI1Nl0sNzQ4NTpbWzU0Nl0sMjU2XSw3NDg2OltbODBdLDI1Nl0sNzQ4NzpbWzgyXSwyNTZdLDc0ODg6W1s4NF0sMjU2XSw3NDg5OltbODVdLDI1Nl0sNzQ5MDpbWzg3XSwyNTZdLDc0OTE6W1s5N10sMjU2XSw3NDkyOltbNTkyXSwyNTZdLDc0OTM6W1s1OTNdLDI1Nl0sNzQ5NDpbWzc0MjZdLDI1Nl0sNzQ5NTpbWzk4XSwyNTZdLDc0OTY6W1sxMDBdLDI1Nl0sNzQ5NzpbWzEwMV0sMjU2XSw3NDk4OltbNjAxXSwyNTZdLDc0OTk6W1s2MDNdLDI1Nl0sNzUwMDpbWzYwNF0sMjU2XSw3NTAxOltbMTAzXSwyNTZdLDc1MDM6W1sxMDddLDI1Nl0sNzUwNDpbWzEwOV0sMjU2XSw3NTA1OltbMzMxXSwyNTZdLDc1MDY6W1sxMTFdLDI1Nl0sNzUwNzpbWzU5Nl0sMjU2XSw3NTA4OltbNzQ0Nl0sMjU2XSw3NTA5OltbNzQ0N10sMjU2XSw3NTEwOltbMTEyXSwyNTZdLDc1MTE6W1sxMTZdLDI1Nl0sNzUxMjpbWzExN10sMjU2XSw3NTEzOltbNzQ1M10sMjU2XSw3NTE0OltbNjIzXSwyNTZdLDc1MTU6W1sxMThdLDI1Nl0sNzUxNjpbWzc0NjFdLDI1Nl0sNzUxNzpbWzk0Nl0sMjU2XSw3NTE4OltbOTQ3XSwyNTZdLDc1MTk6W1s5NDhdLDI1Nl0sNzUyMDpbWzk2Nl0sMjU2XSw3NTIxOltbOTY3XSwyNTZdLDc1MjI6W1sxMDVdLDI1Nl0sNzUyMzpbWzExNF0sMjU2XSw3NTI0OltbMTE3XSwyNTZdLDc1MjU6W1sxMThdLDI1Nl0sNzUyNjpbWzk0Nl0sMjU2XSw3NTI3OltbOTQ3XSwyNTZdLDc1Mjg6W1s5NjFdLDI1Nl0sNzUyOTpbWzk2Nl0sMjU2XSw3NTMwOltbOTY3XSwyNTZdLDc1NDQ6W1sxMDg1XSwyNTZdLDc1Nzk6W1s1OTRdLDI1Nl0sNzU4MDpbWzk5XSwyNTZdLDc1ODE6W1s1OTddLDI1Nl0sNzU4MjpbWzI0MF0sMjU2XSw3NTgzOltbNjA0XSwyNTZdLDc1ODQ6W1sxMDJdLDI1Nl0sNzU4NTpbWzYwN10sMjU2XSw3NTg2OltbNjA5XSwyNTZdLDc1ODc6W1s2MTNdLDI1Nl0sNzU4ODpbWzYxNl0sMjU2XSw3NTg5OltbNjE3XSwyNTZdLDc1OTA6W1s2MThdLDI1Nl0sNzU5MTpbWzc1NDddLDI1Nl0sNzU5MjpbWzY2OV0sMjU2XSw3NTkzOltbNjIxXSwyNTZdLDc1OTQ6W1s3NTU3XSwyNTZdLDc1OTU6W1s2NzFdLDI1Nl0sNzU5NjpbWzYyNV0sMjU2XSw3NTk3OltbNjI0XSwyNTZdLDc1OTg6W1s2MjZdLDI1Nl0sNzU5OTpbWzYyN10sMjU2XSw3NjAwOltbNjI4XSwyNTZdLDc2MDE6W1s2MjldLDI1Nl0sNzYwMjpbWzYzMl0sMjU2XSw3NjAzOltbNjQyXSwyNTZdLDc2MDQ6W1s2NDNdLDI1Nl0sNzYwNTpbWzQyN10sMjU2XSw3NjA2OltbNjQ5XSwyNTZdLDc2MDc6W1s2NTBdLDI1Nl0sNzYwODpbWzc0NTJdLDI1Nl0sNzYwOTpbWzY1MV0sMjU2XSw3NjEwOltbNjUyXSwyNTZdLDc2MTE6W1sxMjJdLDI1Nl0sNzYxMjpbWzY1Nl0sMjU2XSw3NjEzOltbNjU3XSwyNTZdLDc2MTQ6W1s2NThdLDI1Nl0sNzYxNTpbWzk1Ml0sMjU2XSw3NjE2OlssMjMwXSw3NjE3OlssMjMwXSw3NjE4OlssMjIwXSw3NjE5OlssMjMwXSw3NjIwOlssMjMwXSw3NjIxOlssMjMwXSw3NjIyOlssMjMwXSw3NjIzOlssMjMwXSw3NjI0OlssMjMwXSw3NjI1OlssMjMwXSw3NjI2OlssMjIwXSw3NjI3OlssMjMwXSw3NjI4OlssMjMwXSw3NjI5OlssMjM0XSw3NjMwOlssMjE0XSw3NjMxOlssMjIwXSw3NjMyOlssMjAyXSw3NjMzOlssMjMwXSw3NjM0OlssMjMwXSw3NjM1OlssMjMwXSw3NjM2OlssMjMwXSw3NjM3OlssMjMwXSw3NjM4OlssMjMwXSw3NjM5OlssMjMwXSw3NjQwOlssMjMwXSw3NjQxOlssMjMwXSw3NjQyOlssMjMwXSw3NjQzOlssMjMwXSw3NjQ0OlssMjMwXSw3NjQ1OlssMjMwXSw3NjQ2OlssMjMwXSw3NjQ3OlssMjMwXSw3NjQ4OlssMjMwXSw3NjQ5OlssMjMwXSw3NjUwOlssMjMwXSw3NjUxOlssMjMwXSw3NjUyOlssMjMwXSw3NjUzOlssMjMwXSw3NjU0OlssMjMwXSw3NjU1OlssMjMwXSw3NjU2OlssMjMwXSw3NjU3OlssMjMwXSw3NjU4OlssMjMwXSw3NjU5OlssMjMwXSw3NjYwOlssMjMwXSw3NjYxOlssMjMwXSw3NjYyOlssMjMwXSw3NjYzOlssMjMwXSw3NjY0OlssMjMwXSw3NjY1OlssMjMwXSw3NjY2OlssMjMwXSw3NjY3OlssMjMwXSw3NjY4OlssMjMwXSw3NjY5OlssMjMwXSw3Njc2OlssMjMzXSw3Njc3OlssMjIwXSw3Njc4OlssMjMwXSw3Njc5OlssMjIwXX0sCjc2ODA6ezc2ODA6W1s2NSw4MDVdXSw3NjgxOltbOTcsODA1XV0sNzY4MjpbWzY2LDc3NV1dLDc2ODM6W1s5OCw3NzVdXSw3Njg0OltbNjYsODAzXV0sNzY4NTpbWzk4LDgwM11dLDc2ODY6W1s2Niw4MTddXSw3Njg3OltbOTgsODE3XV0sNzY4ODpbWzE5OSw3NjldXSw3Njg5OltbMjMxLDc2OV1dLDc2OTA6W1s2OCw3NzVdXSw3NjkxOltbMTAwLDc3NV1dLDc2OTI6W1s2OCw4MDNdXSw3NjkzOltbMTAwLDgwM11dLDc2OTQ6W1s2OCw4MTddXSw3Njk1OltbMTAwLDgxN11dLDc2OTY6W1s2OCw4MDddXSw3Njk3OltbMTAwLDgwN11dLDc2OTg6W1s2OCw4MTNdXSw3Njk5OltbMTAwLDgxM11dLDc3MDA6W1syNzQsNzY4XV0sNzcwMTpbWzI3NSw3NjhdXSw3NzAyOltbMjc0LDc2OV1dLDc3MDM6W1syNzUsNzY5XV0sNzcwNDpbWzY5LDgxM11dLDc3MDU6W1sxMDEsODEzXV0sNzcwNjpbWzY5LDgxNl1dLDc3MDc6W1sxMDEsODE2XV0sNzcwODpbWzU1Miw3NzRdXSw3NzA5OltbNTUzLDc3NF1dLDc3MTA6W1s3MCw3NzVdXSw3NzExOltbMTAyLDc3NV1dLDc3MTI6W1s3MSw3NzJdXSw3NzEzOltbMTAzLDc3Ml1dLDc3MTQ6W1s3Miw3NzVdXSw3NzE1OltbMTA0LDc3NV1dLDc3MTY6W1s3Miw4MDNdXSw3NzE3OltbMTA0LDgwM11dLDc3MTg6W1s3Miw3NzZdXSw3NzE5OltbMTA0LDc3Nl1dLDc3MjA6W1s3Miw4MDddXSw3NzIxOltbMTA0LDgwN11dLDc3MjI6W1s3Miw4MTRdXSw3NzIzOltbMTA0LDgxNF1dLDc3MjQ6W1s3Myw4MTZdXSw3NzI1OltbMTA1LDgxNl1dLDc3MjY6W1syMDcsNzY5XV0sNzcyNzpbWzIzOSw3NjldXSw3NzI4OltbNzUsNzY5XV0sNzcyOTpbWzEwNyw3NjldXSw3NzMwOltbNzUsODAzXV0sNzczMTpbWzEwNyw4MDNdXSw3NzMyOltbNzUsODE3XV0sNzczMzpbWzEwNyw4MTddXSw3NzM0OltbNzYsODAzXSwsezc3Mjo3NzM2fV0sNzczNTpbWzEwOCw4MDNdLCx7NzcyOjc3Mzd9XSw3NzM2OltbNzczNCw3NzJdXSw3NzM3OltbNzczNSw3NzJdXSw3NzM4OltbNzYsODE3XV0sNzczOTpbWzEwOCw4MTddXSw3NzQwOltbNzYsODEzXV0sNzc0MTpbWzEwOCw4MTNdXSw3NzQyOltbNzcsNzY5XV0sNzc0MzpbWzEwOSw3NjldXSw3NzQ0OltbNzcsNzc1XV0sNzc0NTpbWzEwOSw3NzVdXSw3NzQ2OltbNzcsODAzXV0sNzc0NzpbWzEwOSw4MDNdXSw3NzQ4OltbNzgsNzc1XV0sNzc0OTpbWzExMCw3NzVdXSw3NzUwOltbNzgsODAzXV0sNzc1MTpbWzExMCw4MDNdXSw3NzUyOltbNzgsODE3XV0sNzc1MzpbWzExMCw4MTddXSw3NzU0OltbNzgsODEzXV0sNzc1NTpbWzExMCw4MTNdXSw3NzU2OltbMjEzLDc2OV1dLDc3NTc6W1syNDUsNzY5XV0sNzc1ODpbWzIxMyw3NzZdXSw3NzU5OltbMjQ1LDc3Nl1dLDc3NjA6W1szMzIsNzY4XV0sNzc2MTpbWzMzMyw3NjhdXSw3NzYyOltbMzMyLDc2OV1dLDc3NjM6W1szMzMsNzY5XV0sNzc2NDpbWzgwLDc2OV1dLDc3NjU6W1sxMTIsNzY5XV0sNzc2NjpbWzgwLDc3NV1dLDc3Njc6W1sxMTIsNzc1XV0sNzc2ODpbWzgyLDc3NV1dLDc3Njk6W1sxMTQsNzc1XV0sNzc3MDpbWzgyLDgwM10sLHs3NzI6Nzc3Mn1dLDc3NzE6W1sxMTQsODAzXSwsezc3Mjo3NzczfV0sNzc3MjpbWzc3NzAsNzcyXV0sNzc3MzpbWzc3NzEsNzcyXV0sNzc3NDpbWzgyLDgxN11dLDc3NzU6W1sxMTQsODE3XV0sNzc3NjpbWzgzLDc3NV1dLDc3Nzc6W1sxMTUsNzc1XV0sNzc3ODpbWzgzLDgwM10sLHs3NzU6Nzc4NH1dLDc3Nzk6W1sxMTUsODAzXSwsezc3NTo3Nzg1fV0sNzc4MDpbWzM0Niw3NzVdXSw3NzgxOltbMzQ3LDc3NV1dLDc3ODI6W1szNTIsNzc1XV0sNzc4MzpbWzM1Myw3NzVdXSw3Nzg0OltbNzc3OCw3NzVdXSw3Nzg1OltbNzc3OSw3NzVdXSw3Nzg2OltbODQsNzc1XV0sNzc4NzpbWzExNiw3NzVdXSw3Nzg4OltbODQsODAzXV0sNzc4OTpbWzExNiw4MDNdXSw3NzkwOltbODQsODE3XV0sNzc5MTpbWzExNiw4MTddXSw3NzkyOltbODQsODEzXV0sNzc5MzpbWzExNiw4MTNdXSw3Nzk0OltbODUsODA0XV0sNzc5NTpbWzExNyw4MDRdXSw3Nzk2OltbODUsODE2XV0sNzc5NzpbWzExNyw4MTZdXSw3Nzk4OltbODUsODEzXV0sNzc5OTpbWzExNyw4MTNdXSw3ODAwOltbMzYwLDc2OV1dLDc4MDE6W1szNjEsNzY5XV0sNzgwMjpbWzM2Miw3NzZdXSw3ODAzOltbMzYzLDc3Nl1dLDc4MDQ6W1s4Niw3NzFdXSw3ODA1OltbMTE4LDc3MV1dLDc4MDY6W1s4Niw4MDNdXSw3ODA3OltbMTE4LDgwM11dLDc4MDg6W1s4Nyw3NjhdXSw3ODA5OltbMTE5LDc2OF1dLDc4MTA6W1s4Nyw3NjldXSw3ODExOltbMTE5LDc2OV1dLDc4MTI6W1s4Nyw3NzZdXSw3ODEzOltbMTE5LDc3Nl1dLDc4MTQ6W1s4Nyw3NzVdXSw3ODE1OltbMTE5LDc3NV1dLDc4MTY6W1s4Nyw4MDNdXSw3ODE3OltbMTE5LDgwM11dLDc4MTg6W1s4OCw3NzVdXSw3ODE5OltbMTIwLDc3NV1dLDc4MjA6W1s4OCw3NzZdXSw3ODIxOltbMTIwLDc3Nl1dLDc4MjI6W1s4OSw3NzVdXSw3ODIzOltbMTIxLDc3NV1dLDc4MjQ6W1s5MCw3NzBdXSw3ODI1OltbMTIyLDc3MF1dLDc4MjY6W1s5MCw4MDNdXSw3ODI3OltbMTIyLDgwM11dLDc4Mjg6W1s5MCw4MTddXSw3ODI5OltbMTIyLDgxN11dLDc4MzA6W1sxMDQsODE3XV0sNzgzMTpbWzExNiw3NzZdXSw3ODMyOltbMTE5LDc3OF1dLDc4MzM6W1sxMjEsNzc4XV0sNzgzNDpbWzk3LDcwMl0sMjU2XSw3ODM1OltbMzgzLDc3NV1dLDc4NDA6W1s2NSw4MDNdLCx7NzcwOjc4NTIsNzc0Ojc4NjJ9XSw3ODQxOltbOTcsODAzXSwsezc3MDo3ODUzLDc3NDo3ODYzfV0sNzg0MjpbWzY1LDc3N11dLDc4NDM6W1s5Nyw3NzddXSw3ODQ0OltbMTk0LDc2OV1dLDc4NDU6W1syMjYsNzY5XV0sNzg0NjpbWzE5NCw3NjhdXSw3ODQ3OltbMjI2LDc2OF1dLDc4NDg6W1sxOTQsNzc3XV0sNzg0OTpbWzIyNiw3NzddXSw3ODUwOltbMTk0LDc3MV1dLDc4NTE6W1syMjYsNzcxXV0sNzg1MjpbWzc4NDAsNzcwXV0sNzg1MzpbWzc4NDEsNzcwXV0sNzg1NDpbWzI1OCw3NjldXSw3ODU1OltbMjU5LDc2OV1dLDc4NTY6W1syNTgsNzY4XV0sNzg1NzpbWzI1OSw3NjhdXSw3ODU4OltbMjU4LDc3N11dLDc4NTk6W1syNTksNzc3XV0sNzg2MDpbWzI1OCw3NzFdXSw3ODYxOltbMjU5LDc3MV1dLDc4NjI6W1s3ODQwLDc3NF1dLDc4NjM6W1s3ODQxLDc3NF1dLDc4NjQ6W1s2OSw4MDNdLCx7NzcwOjc4Nzh9XSw3ODY1OltbMTAxLDgwM10sLHs3NzA6Nzg3OX1dLDc4NjY6W1s2OSw3NzddXSw3ODY3OltbMTAxLDc3N11dLDc4Njg6W1s2OSw3NzFdXSw3ODY5OltbMTAxLDc3MV1dLDc4NzA6W1syMDIsNzY5XV0sNzg3MTpbWzIzNCw3NjldXSw3ODcyOltbMjAyLDc2OF1dLDc4NzM6W1syMzQsNzY4XV0sNzg3NDpbWzIwMiw3NzddXSw3ODc1OltbMjM0LDc3N11dLDc4NzY6W1syMDIsNzcxXV0sNzg3NzpbWzIzNCw3NzFdXSw3ODc4OltbNzg2NCw3NzBdXSw3ODc5OltbNzg2NSw3NzBdXSw3ODgwOltbNzMsNzc3XV0sNzg4MTpbWzEwNSw3NzddXSw3ODgyOltbNzMsODAzXV0sNzg4MzpbWzEwNSw4MDNdXSw3ODg0OltbNzksODAzXSwsezc3MDo3ODk2fV0sNzg4NTpbWzExMSw4MDNdLCx7NzcwOjc4OTd9XSw3ODg2OltbNzksNzc3XV0sNzg4NzpbWzExMSw3NzddXSw3ODg4OltbMjEyLDc2OV1dLDc4ODk6W1syNDQsNzY5XV0sNzg5MDpbWzIxMiw3NjhdXSw3ODkxOltbMjQ0LDc2OF1dLDc4OTI6W1syMTIsNzc3XV0sNzg5MzpbWzI0NCw3NzddXSw3ODk0OltbMjEyLDc3MV1dLDc4OTU6W1syNDQsNzcxXV0sNzg5NjpbWzc4ODQsNzcwXV0sNzg5NzpbWzc4ODUsNzcwXV0sNzg5ODpbWzQxNiw3NjldXSw3ODk5OltbNDE3LDc2OV1dLDc5MDA6W1s0MTYsNzY4XV0sNzkwMTpbWzQxNyw3NjhdXSw3OTAyOltbNDE2LDc3N11dLDc5MDM6W1s0MTcsNzc3XV0sNzkwNDpbWzQxNiw3NzFdXSw3OTA1OltbNDE3LDc3MV1dLDc5MDY6W1s0MTYsODAzXV0sNzkwNzpbWzQxNyw4MDNdXSw3OTA4OltbODUsODAzXV0sNzkwOTpbWzExNyw4MDNdXSw3OTEwOltbODUsNzc3XV0sNzkxMTpbWzExNyw3NzddXSw3OTEyOltbNDMxLDc2OV1dLDc5MTM6W1s0MzIsNzY5XV0sNzkxNDpbWzQzMSw3NjhdXSw3OTE1OltbNDMyLDc2OF1dLDc5MTY6W1s0MzEsNzc3XV0sNzkxNzpbWzQzMiw3NzddXSw3OTE4OltbNDMxLDc3MV1dLDc5MTk6W1s0MzIsNzcxXV0sNzkyMDpbWzQzMSw4MDNdXSw3OTIxOltbNDMyLDgwM11dLDc5MjI6W1s4OSw3NjhdXSw3OTIzOltbMTIxLDc2OF1dLDc5MjQ6W1s4OSw4MDNdXSw3OTI1OltbMTIxLDgwM11dLDc5MjY6W1s4OSw3NzddXSw3OTI3OltbMTIxLDc3N11dLDc5Mjg6W1s4OSw3NzFdXSw3OTI5OltbMTIxLDc3MV1dfSwKNzkzNjp7NzkzNjpbWzk0NSw3ODddLCx7NzY4Ojc5MzgsNzY5Ojc5NDAsODM0Ojc5NDIsODM3OjgwNjR9XSw3OTM3OltbOTQ1LDc4OF0sLHs3Njg6NzkzOSw3Njk6Nzk0MSw4MzQ6Nzk0Myw4Mzc6ODA2NX1dLDc5Mzg6W1s3OTM2LDc2OF0sLHs4Mzc6ODA2Nn1dLDc5Mzk6W1s3OTM3LDc2OF0sLHs4Mzc6ODA2N31dLDc5NDA6W1s3OTM2LDc2OV0sLHs4Mzc6ODA2OH1dLDc5NDE6W1s3OTM3LDc2OV0sLHs4Mzc6ODA2OX1dLDc5NDI6W1s3OTM2LDgzNF0sLHs4Mzc6ODA3MH1dLDc5NDM6W1s3OTM3LDgzNF0sLHs4Mzc6ODA3MX1dLDc5NDQ6W1s5MTMsNzg3XSwsezc2ODo3OTQ2LDc2OTo3OTQ4LDgzNDo3OTUwLDgzNzo4MDcyfV0sNzk0NTpbWzkxMyw3ODhdLCx7NzY4Ojc5NDcsNzY5Ojc5NDksODM0Ojc5NTEsODM3OjgwNzN9XSw3OTQ2OltbNzk0NCw3NjhdLCx7ODM3OjgwNzR9XSw3OTQ3OltbNzk0NSw3NjhdLCx7ODM3OjgwNzV9XSw3OTQ4OltbNzk0NCw3NjldLCx7ODM3OjgwNzZ9XSw3OTQ5OltbNzk0NSw3NjldLCx7ODM3OjgwNzd9XSw3OTUwOltbNzk0NCw4MzRdLCx7ODM3OjgwNzh9XSw3OTUxOltbNzk0NSw4MzRdLCx7ODM3OjgwNzl9XSw3OTUyOltbOTQ5LDc4N10sLHs3Njg6Nzk1NCw3Njk6Nzk1Nn1dLDc5NTM6W1s5NDksNzg4XSwsezc2ODo3OTU1LDc2OTo3OTU3fV0sNzk1NDpbWzc5NTIsNzY4XV0sNzk1NTpbWzc5NTMsNzY4XV0sNzk1NjpbWzc5NTIsNzY5XV0sNzk1NzpbWzc5NTMsNzY5XV0sNzk2MDpbWzkxNyw3ODddLCx7NzY4Ojc5NjIsNzY5Ojc5NjR9XSw3OTYxOltbOTE3LDc4OF0sLHs3Njg6Nzk2Myw3Njk6Nzk2NX1dLDc5NjI6W1s3OTYwLDc2OF1dLDc5NjM6W1s3OTYxLDc2OF1dLDc5NjQ6W1s3OTYwLDc2OV1dLDc5NjU6W1s3OTYxLDc2OV1dLDc5Njg6W1s5NTEsNzg3XSwsezc2ODo3OTcwLDc2OTo3OTcyLDgzNDo3OTc0LDgzNzo4MDgwfV0sNzk2OTpbWzk1MSw3ODhdLCx7NzY4Ojc5NzEsNzY5Ojc5NzMsODM0Ojc5NzUsODM3OjgwODF9XSw3OTcwOltbNzk2OCw3NjhdLCx7ODM3OjgwODJ9XSw3OTcxOltbNzk2OSw3NjhdLCx7ODM3OjgwODN9XSw3OTcyOltbNzk2OCw3NjldLCx7ODM3OjgwODR9XSw3OTczOltbNzk2OSw3NjldLCx7ODM3OjgwODV9XSw3OTc0OltbNzk2OCw4MzRdLCx7ODM3OjgwODZ9XSw3OTc1OltbNzk2OSw4MzRdLCx7ODM3OjgwODd9XSw3OTc2OltbOTE5LDc4N10sLHs3Njg6Nzk3OCw3Njk6Nzk4MCw4MzQ6Nzk4Miw4Mzc6ODA4OH1dLDc5Nzc6W1s5MTksNzg4XSwsezc2ODo3OTc5LDc2OTo3OTgxLDgzNDo3OTgzLDgzNzo4MDg5fV0sNzk3ODpbWzc5NzYsNzY4XSwsezgzNzo4MDkwfV0sNzk3OTpbWzc5NzcsNzY4XSwsezgzNzo4MDkxfV0sNzk4MDpbWzc5NzYsNzY5XSwsezgzNzo4MDkyfV0sNzk4MTpbWzc5NzcsNzY5XSwsezgzNzo4MDkzfV0sNzk4MjpbWzc5NzYsODM0XSwsezgzNzo4MDk0fV0sNzk4MzpbWzc5NzcsODM0XSwsezgzNzo4MDk1fV0sNzk4NDpbWzk1Myw3ODddLCx7NzY4Ojc5ODYsNzY5Ojc5ODgsODM0Ojc5OTB9XSw3OTg1OltbOTUzLDc4OF0sLHs3Njg6Nzk4Nyw3Njk6Nzk4OSw4MzQ6Nzk5MX1dLDc5ODY6W1s3OTg0LDc2OF1dLDc5ODc6W1s3OTg1LDc2OF1dLDc5ODg6W1s3OTg0LDc2OV1dLDc5ODk6W1s3OTg1LDc2OV1dLDc5OTA6W1s3OTg0LDgzNF1dLDc5OTE6W1s3OTg1LDgzNF1dLDc5OTI6W1s5MjEsNzg3XSwsezc2ODo3OTk0LDc2OTo3OTk2LDgzNDo3OTk4fV0sNzk5MzpbWzkyMSw3ODhdLCx7NzY4Ojc5OTUsNzY5Ojc5OTcsODM0Ojc5OTl9XSw3OTk0OltbNzk5Miw3NjhdXSw3OTk1OltbNzk5Myw3NjhdXSw3OTk2OltbNzk5Miw3NjldXSw3OTk3OltbNzk5Myw3NjldXSw3OTk4OltbNzk5Miw4MzRdXSw3OTk5OltbNzk5Myw4MzRdXSw4MDAwOltbOTU5LDc4N10sLHs3Njg6ODAwMiw3Njk6ODAwNH1dLDgwMDE6W1s5NTksNzg4XSwsezc2ODo4MDAzLDc2OTo4MDA1fV0sODAwMjpbWzgwMDAsNzY4XV0sODAwMzpbWzgwMDEsNzY4XV0sODAwNDpbWzgwMDAsNzY5XV0sODAwNTpbWzgwMDEsNzY5XV0sODAwODpbWzkyNyw3ODddLCx7NzY4OjgwMTAsNzY5OjgwMTJ9XSw4MDA5OltbOTI3LDc4OF0sLHs3Njg6ODAxMSw3Njk6ODAxM31dLDgwMTA6W1s4MDA4LDc2OF1dLDgwMTE6W1s4MDA5LDc2OF1dLDgwMTI6W1s4MDA4LDc2OV1dLDgwMTM6W1s4MDA5LDc2OV1dLDgwMTY6W1s5NjUsNzg3XSwsezc2ODo4MDE4LDc2OTo4MDIwLDgzNDo4MDIyfV0sODAxNzpbWzk2NSw3ODhdLCx7NzY4OjgwMTksNzY5OjgwMjEsODM0OjgwMjN9XSw4MDE4OltbODAxNiw3NjhdXSw4MDE5OltbODAxNyw3NjhdXSw4MDIwOltbODAxNiw3NjldXSw4MDIxOltbODAxNyw3NjldXSw4MDIyOltbODAxNiw4MzRdXSw4MDIzOltbODAxNyw4MzRdXSw4MDI1OltbOTMzLDc4OF0sLHs3Njg6ODAyNyw3Njk6ODAyOSw4MzQ6ODAzMX1dLDgwMjc6W1s4MDI1LDc2OF1dLDgwMjk6W1s4MDI1LDc2OV1dLDgwMzE6W1s4MDI1LDgzNF1dLDgwMzI6W1s5NjksNzg3XSwsezc2ODo4MDM0LDc2OTo4MDM2LDgzNDo4MDM4LDgzNzo4MDk2fV0sODAzMzpbWzk2OSw3ODhdLCx7NzY4OjgwMzUsNzY5OjgwMzcsODM0OjgwMzksODM3OjgwOTd9XSw4MDM0OltbODAzMiw3NjhdLCx7ODM3OjgwOTh9XSw4MDM1OltbODAzMyw3NjhdLCx7ODM3OjgwOTl9XSw4MDM2OltbODAzMiw3NjldLCx7ODM3OjgxMDB9XSw4MDM3OltbODAzMyw3NjldLCx7ODM3OjgxMDF9XSw4MDM4OltbODAzMiw4MzRdLCx7ODM3OjgxMDJ9XSw4MDM5OltbODAzMyw4MzRdLCx7ODM3OjgxMDN9XSw4MDQwOltbOTM3LDc4N10sLHs3Njg6ODA0Miw3Njk6ODA0NCw4MzQ6ODA0Niw4Mzc6ODEwNH1dLDgwNDE6W1s5MzcsNzg4XSwsezc2ODo4MDQzLDc2OTo4MDQ1LDgzNDo4MDQ3LDgzNzo4MTA1fV0sODA0MjpbWzgwNDAsNzY4XSwsezgzNzo4MTA2fV0sODA0MzpbWzgwNDEsNzY4XSwsezgzNzo4MTA3fV0sODA0NDpbWzgwNDAsNzY5XSwsezgzNzo4MTA4fV0sODA0NTpbWzgwNDEsNzY5XSwsezgzNzo4MTA5fV0sODA0NjpbWzgwNDAsODM0XSwsezgzNzo4MTEwfV0sODA0NzpbWzgwNDEsODM0XSwsezgzNzo4MTExfV0sODA0ODpbWzk0NSw3NjhdLCx7ODM3OjgxMTR9XSw4MDQ5OltbOTQwXV0sODA1MDpbWzk0OSw3NjhdXSw4MDUxOltbOTQxXV0sODA1MjpbWzk1MSw3NjhdLCx7ODM3OjgxMzB9XSw4MDUzOltbOTQyXV0sODA1NDpbWzk1Myw3NjhdXSw4MDU1OltbOTQzXV0sODA1NjpbWzk1OSw3NjhdXSw4MDU3OltbOTcyXV0sODA1ODpbWzk2NSw3NjhdXSw4MDU5OltbOTczXV0sODA2MDpbWzk2OSw3NjhdLCx7ODM3OjgxNzh9XSw4MDYxOltbOTc0XV0sODA2NDpbWzc5MzYsODM3XV0sODA2NTpbWzc5MzcsODM3XV0sODA2NjpbWzc5MzgsODM3XV0sODA2NzpbWzc5MzksODM3XV0sODA2ODpbWzc5NDAsODM3XV0sODA2OTpbWzc5NDEsODM3XV0sODA3MDpbWzc5NDIsODM3XV0sODA3MTpbWzc5NDMsODM3XV0sODA3MjpbWzc5NDQsODM3XV0sODA3MzpbWzc5NDUsODM3XV0sODA3NDpbWzc5NDYsODM3XV0sODA3NTpbWzc5NDcsODM3XV0sODA3NjpbWzc5NDgsODM3XV0sODA3NzpbWzc5NDksODM3XV0sODA3ODpbWzc5NTAsODM3XV0sODA3OTpbWzc5NTEsODM3XV0sODA4MDpbWzc5NjgsODM3XV0sODA4MTpbWzc5NjksODM3XV0sODA4MjpbWzc5NzAsODM3XV0sODA4MzpbWzc5NzEsODM3XV0sODA4NDpbWzc5NzIsODM3XV0sODA4NTpbWzc5NzMsODM3XV0sODA4NjpbWzc5NzQsODM3XV0sODA4NzpbWzc5NzUsODM3XV0sODA4ODpbWzc5NzYsODM3XV0sODA4OTpbWzc5NzcsODM3XV0sODA5MDpbWzc5NzgsODM3XV0sODA5MTpbWzc5NzksODM3XV0sODA5MjpbWzc5ODAsODM3XV0sODA5MzpbWzc5ODEsODM3XV0sODA5NDpbWzc5ODIsODM3XV0sODA5NTpbWzc5ODMsODM3XV0sODA5NjpbWzgwMzIsODM3XV0sODA5NzpbWzgwMzMsODM3XV0sODA5ODpbWzgwMzQsODM3XV0sODA5OTpbWzgwMzUsODM3XV0sODEwMDpbWzgwMzYsODM3XV0sODEwMTpbWzgwMzcsODM3XV0sODEwMjpbWzgwMzgsODM3XV0sODEwMzpbWzgwMzksODM3XV0sODEwNDpbWzgwNDAsODM3XV0sODEwNTpbWzgwNDEsODM3XV0sODEwNjpbWzgwNDIsODM3XV0sODEwNzpbWzgwNDMsODM3XV0sODEwODpbWzgwNDQsODM3XV0sODEwOTpbWzgwNDUsODM3XV0sODExMDpbWzgwNDYsODM3XV0sODExMTpbWzgwNDcsODM3XV0sODExMjpbWzk0NSw3NzRdXSw4MTEzOltbOTQ1LDc3Ml1dLDgxMTQ6W1s4MDQ4LDgzN11dLDgxMTU6W1s5NDUsODM3XV0sODExNjpbWzk0MCw4MzddXSw4MTE4OltbOTQ1LDgzNF0sLHs4Mzc6ODExOX1dLDgxMTk6W1s4MTE4LDgzN11dLDgxMjA6W1s5MTMsNzc0XV0sODEyMTpbWzkxMyw3NzJdXSw4MTIyOltbOTEzLDc2OF1dLDgxMjM6W1s5MDJdXSw4MTI0OltbOTEzLDgzN11dLDgxMjU6W1szMiw3ODddLDI1Nl0sODEyNjpbWzk1M11dLDgxMjc6W1szMiw3ODddLDI1Nix7NzY4OjgxNDEsNzY5OjgxNDIsODM0OjgxNDN9XSw4MTI4OltbMzIsODM0XSwyNTZdLDgxMjk6W1sxNjgsODM0XV0sODEzMDpbWzgwNTIsODM3XV0sODEzMTpbWzk1MSw4MzddXSw4MTMyOltbOTQyLDgzN11dLDgxMzQ6W1s5NTEsODM0XSwsezgzNzo4MTM1fV0sODEzNTpbWzgxMzQsODM3XV0sODEzNjpbWzkxNyw3NjhdXSw4MTM3OltbOTA0XV0sODEzODpbWzkxOSw3NjhdXSw4MTM5OltbOTA1XV0sODE0MDpbWzkxOSw4MzddXSw4MTQxOltbODEyNyw3NjhdXSw4MTQyOltbODEyNyw3NjldXSw4MTQzOltbODEyNyw4MzRdXSw4MTQ0OltbOTUzLDc3NF1dLDgxNDU6W1s5NTMsNzcyXV0sODE0NjpbWzk3MCw3NjhdXSw4MTQ3OltbOTEyXV0sODE1MDpbWzk1Myw4MzRdXSw4MTUxOltbOTcwLDgzNF1dLDgxNTI6W1s5MjEsNzc0XV0sODE1MzpbWzkyMSw3NzJdXSw4MTU0OltbOTIxLDc2OF1dLDgxNTU6W1s5MDZdXSw4MTU3OltbODE5MCw3NjhdXSw4MTU4OltbODE5MCw3NjldXSw4MTU5OltbODE5MCw4MzRdXSw4MTYwOltbOTY1LDc3NF1dLDgxNjE6W1s5NjUsNzcyXV0sODE2MjpbWzk3MSw3NjhdXSw4MTYzOltbOTQ0XV0sODE2NDpbWzk2MSw3ODddXSw4MTY1OltbOTYxLDc4OF1dLDgxNjY6W1s5NjUsODM0XV0sODE2NzpbWzk3MSw4MzRdXSw4MTY4OltbOTMzLDc3NF1dLDgxNjk6W1s5MzMsNzcyXV0sODE3MDpbWzkzMyw3NjhdXSw4MTcxOltbOTEwXV0sODE3MjpbWzkyOSw3ODhdXSw4MTczOltbMTY4LDc2OF1dLDgxNzQ6W1s5MDFdXSw4MTc1OltbOTZdXSw4MTc4OltbODA2MCw4MzddXSw4MTc5OltbOTY5LDgzN11dLDgxODA6W1s5NzQsODM3XV0sODE4MjpbWzk2OSw4MzRdLCx7ODM3OjgxODN9XSw4MTgzOltbODE4Miw4MzddXSw4MTg0OltbOTI3LDc2OF1dLDgxODU6W1s5MDhdXSw4MTg2OltbOTM3LDc2OF1dLDgxODc6W1s5MTFdXSw4MTg4OltbOTM3LDgzN11dLDgxODk6W1sxODBdXSw4MTkwOltbMzIsNzg4XSwyNTYsezc2ODo4MTU3LDc2OTo4MTU4LDgzNDo4MTU5fV19LAo4MTkyOns4MTkyOltbODE5NF1dLDgxOTM6W1s4MTk1XV0sODE5NDpbWzMyXSwyNTZdLDgxOTU6W1szMl0sMjU2XSw4MTk2OltbMzJdLDI1Nl0sODE5NzpbWzMyXSwyNTZdLDgxOTg6W1szMl0sMjU2XSw4MTk5OltbMzJdLDI1Nl0sODIwMDpbWzMyXSwyNTZdLDgyMDE6W1szMl0sMjU2XSw4MjAyOltbMzJdLDI1Nl0sODIwOTpbWzgyMDhdLDI1Nl0sODIxNTpbWzMyLDgxOV0sMjU2XSw4MjI4OltbNDZdLDI1Nl0sODIyOTpbWzQ2LDQ2XSwyNTZdLDgyMzA6W1s0Niw0Niw0Nl0sMjU2XSw4MjM5OltbMzJdLDI1Nl0sODI0MzpbWzgyNDIsODI0Ml0sMjU2XSw4MjQ0OltbODI0Miw4MjQyLDgyNDJdLDI1Nl0sODI0NjpbWzgyNDUsODI0NV0sMjU2XSw4MjQ3OltbODI0NSw4MjQ1LDgyNDVdLDI1Nl0sODI1MjpbWzMzLDMzXSwyNTZdLDgyNTQ6W1szMiw3NzNdLDI1Nl0sODI2MzpbWzYzLDYzXSwyNTZdLDgyNjQ6W1s2MywzM10sMjU2XSw4MjY1OltbMzMsNjNdLDI1Nl0sODI3OTpbWzgyNDIsODI0Miw4MjQyLDgyNDJdLDI1Nl0sODI4NzpbWzMyXSwyNTZdLDgzMDQ6W1s0OF0sMjU2XSw4MzA1OltbMTA1XSwyNTZdLDgzMDg6W1s1Ml0sMjU2XSw4MzA5OltbNTNdLDI1Nl0sODMxMDpbWzU0XSwyNTZdLDgzMTE6W1s1NV0sMjU2XSw4MzEyOltbNTZdLDI1Nl0sODMxMzpbWzU3XSwyNTZdLDgzMTQ6W1s0M10sMjU2XSw4MzE1OltbODcyMl0sMjU2XSw4MzE2OltbNjFdLDI1Nl0sODMxNzpbWzQwXSwyNTZdLDgzMTg6W1s0MV0sMjU2XSw4MzE5OltbMTEwXSwyNTZdLDgzMjA6W1s0OF0sMjU2XSw4MzIxOltbNDldLDI1Nl0sODMyMjpbWzUwXSwyNTZdLDgzMjM6W1s1MV0sMjU2XSw4MzI0OltbNTJdLDI1Nl0sODMyNTpbWzUzXSwyNTZdLDgzMjY6W1s1NF0sMjU2XSw4MzI3OltbNTVdLDI1Nl0sODMyODpbWzU2XSwyNTZdLDgzMjk6W1s1N10sMjU2XSw4MzMwOltbNDNdLDI1Nl0sODMzMTpbWzg3MjJdLDI1Nl0sODMzMjpbWzYxXSwyNTZdLDgzMzM6W1s0MF0sMjU2XSw4MzM0OltbNDFdLDI1Nl0sODMzNjpbWzk3XSwyNTZdLDgzMzc6W1sxMDFdLDI1Nl0sODMzODpbWzExMV0sMjU2XSw4MzM5OltbMTIwXSwyNTZdLDgzNDA6W1s2MDFdLDI1Nl0sODM0MTpbWzEwNF0sMjU2XSw4MzQyOltbMTA3XSwyNTZdLDgzNDM6W1sxMDhdLDI1Nl0sODM0NDpbWzEwOV0sMjU2XSw4MzQ1OltbMTEwXSwyNTZdLDgzNDY6W1sxMTJdLDI1Nl0sODM0NzpbWzExNV0sMjU2XSw4MzQ4OltbMTE2XSwyNTZdLDgzNjA6W1s4MiwxMTVdLDI1Nl0sODQwMDpbLDIzMF0sODQwMTpbLDIzMF0sODQwMjpbLDFdLDg0MDM6WywxXSw4NDA0OlssMjMwXSw4NDA1OlssMjMwXSw4NDA2OlssMjMwXSw4NDA3OlssMjMwXSw4NDA4OlssMV0sODQwOTpbLDFdLDg0MTA6WywxXSw4NDExOlssMjMwXSw4NDEyOlssMjMwXSw4NDE3OlssMjMwXSw4NDIxOlssMV0sODQyMjpbLDFdLDg0MjM6WywyMzBdLDg0MjQ6WywyMjBdLDg0MjU6WywyMzBdLDg0MjY6WywxXSw4NDI3OlssMV0sODQyODpbLDIyMF0sODQyOTpbLDIyMF0sODQzMDpbLDIyMF0sODQzMTpbLDIyMF0sODQzMjpbLDIzMF19LAo4NDQ4Ons4NDQ4OltbOTcsNDcsOTldLDI1Nl0sODQ0OTpbWzk3LDQ3LDExNV0sMjU2XSw4NDUwOltbNjddLDI1Nl0sODQ1MTpbWzE3Niw2N10sMjU2XSw4NDUzOltbOTksNDcsMTExXSwyNTZdLDg0NTQ6W1s5OSw0NywxMTddLDI1Nl0sODQ1NTpbWzQwMF0sMjU2XSw4NDU3OltbMTc2LDcwXSwyNTZdLDg0NTg6W1sxMDNdLDI1Nl0sODQ1OTpbWzcyXSwyNTZdLDg0NjA6W1s3Ml0sMjU2XSw4NDYxOltbNzJdLDI1Nl0sODQ2MjpbWzEwNF0sMjU2XSw4NDYzOltbMjk1XSwyNTZdLDg0NjQ6W1s3M10sMjU2XSw4NDY1OltbNzNdLDI1Nl0sODQ2NjpbWzc2XSwyNTZdLDg0Njc6W1sxMDhdLDI1Nl0sODQ2OTpbWzc4XSwyNTZdLDg0NzA6W1s3OCwxMTFdLDI1Nl0sODQ3MzpbWzgwXSwyNTZdLDg0NzQ6W1s4MV0sMjU2XSw4NDc1OltbODJdLDI1Nl0sODQ3NjpbWzgyXSwyNTZdLDg0Nzc6W1s4Ml0sMjU2XSw4NDgwOltbODMsNzddLDI1Nl0sODQ4MTpbWzg0LDY5LDc2XSwyNTZdLDg0ODI6W1s4NCw3N10sMjU2XSw4NDg0OltbOTBdLDI1Nl0sODQ4NjpbWzkzN11dLDg0ODg6W1s5MF0sMjU2XSw4NDkwOltbNzVdXSw4NDkxOltbMTk3XV0sODQ5MjpbWzY2XSwyNTZdLDg0OTM6W1s2N10sMjU2XSw4NDk1OltbMTAxXSwyNTZdLDg0OTY6W1s2OV0sMjU2XSw4NDk3OltbNzBdLDI1Nl0sODQ5OTpbWzc3XSwyNTZdLDg1MDA6W1sxMTFdLDI1Nl0sODUwMTpbWzE0ODhdLDI1Nl0sODUwMjpbWzE0ODldLDI1Nl0sODUwMzpbWzE0OTBdLDI1Nl0sODUwNDpbWzE0OTFdLDI1Nl0sODUwNTpbWzEwNV0sMjU2XSw4NTA3OltbNzAsNjUsODhdLDI1Nl0sODUwODpbWzk2MF0sMjU2XSw4NTA5OltbOTQ3XSwyNTZdLDg1MTA6W1s5MTVdLDI1Nl0sODUxMTpbWzkyOF0sMjU2XSw4NTEyOltbODcyMV0sMjU2XSw4NTE3OltbNjhdLDI1Nl0sODUxODpbWzEwMF0sMjU2XSw4NTE5OltbMTAxXSwyNTZdLDg1MjA6W1sxMDVdLDI1Nl0sODUyMTpbWzEwNl0sMjU2XSw4NTI4OltbNDksODI2MCw1NV0sMjU2XSw4NTI5OltbNDksODI2MCw1N10sMjU2XSw4NTMwOltbNDksODI2MCw0OSw0OF0sMjU2XSw4NTMxOltbNDksODI2MCw1MV0sMjU2XSw4NTMyOltbNTAsODI2MCw1MV0sMjU2XSw4NTMzOltbNDksODI2MCw1M10sMjU2XSw4NTM0OltbNTAsODI2MCw1M10sMjU2XSw4NTM1OltbNTEsODI2MCw1M10sMjU2XSw4NTM2OltbNTIsODI2MCw1M10sMjU2XSw4NTM3OltbNDksODI2MCw1NF0sMjU2XSw4NTM4OltbNTMsODI2MCw1NF0sMjU2XSw4NTM5OltbNDksODI2MCw1Nl0sMjU2XSw4NTQwOltbNTEsODI2MCw1Nl0sMjU2XSw4NTQxOltbNTMsODI2MCw1Nl0sMjU2XSw4NTQyOltbNTUsODI2MCw1Nl0sMjU2XSw4NTQzOltbNDksODI2MF0sMjU2XSw4NTQ0OltbNzNdLDI1Nl0sODU0NTpbWzczLDczXSwyNTZdLDg1NDY6W1s3Myw3Myw3M10sMjU2XSw4NTQ3OltbNzMsODZdLDI1Nl0sODU0ODpbWzg2XSwyNTZdLDg1NDk6W1s4Niw3M10sMjU2XSw4NTUwOltbODYsNzMsNzNdLDI1Nl0sODU1MTpbWzg2LDczLDczLDczXSwyNTZdLDg1NTI6W1s3Myw4OF0sMjU2XSw4NTUzOltbODhdLDI1Nl0sODU1NDpbWzg4LDczXSwyNTZdLDg1NTU6W1s4OCw3Myw3M10sMjU2XSw4NTU2OltbNzZdLDI1Nl0sODU1NzpbWzY3XSwyNTZdLDg1NTg6W1s2OF0sMjU2XSw4NTU5OltbNzddLDI1Nl0sODU2MDpbWzEwNV0sMjU2XSw4NTYxOltbMTA1LDEwNV0sMjU2XSw4NTYyOltbMTA1LDEwNSwxMDVdLDI1Nl0sODU2MzpbWzEwNSwxMThdLDI1Nl0sODU2NDpbWzExOF0sMjU2XSw4NTY1OltbMTE4LDEwNV0sMjU2XSw4NTY2OltbMTE4LDEwNSwxMDVdLDI1Nl0sODU2NzpbWzExOCwxMDUsMTA1LDEwNV0sMjU2XSw4NTY4OltbMTA1LDEyMF0sMjU2XSw4NTY5OltbMTIwXSwyNTZdLDg1NzA6W1sxMjAsMTA1XSwyNTZdLDg1NzE6W1sxMjAsMTA1LDEwNV0sMjU2XSw4NTcyOltbMTA4XSwyNTZdLDg1NzM6W1s5OV0sMjU2XSw4NTc0OltbMTAwXSwyNTZdLDg1NzU6W1sxMDldLDI1Nl0sODU4NTpbWzQ4LDgyNjAsNTFdLDI1Nl0sODU5MjpbLCx7ODI0Ojg2MDJ9XSw4NTk0OlssLHs4MjQ6ODYwM31dLDg1OTY6WywsezgyNDo4NjIyfV0sODYwMjpbWzg1OTIsODI0XV0sODYwMzpbWzg1OTQsODI0XV0sODYyMjpbWzg1OTYsODI0XV0sODY1MzpbWzg2NTYsODI0XV0sODY1NDpbWzg2NjAsODI0XV0sODY1NTpbWzg2NTgsODI0XV0sODY1NjpbLCx7ODI0Ojg2NTN9XSw4NjU4OlssLHs4MjQ6ODY1NX1dLDg2NjA6WywsezgyNDo4NjU0fV19LAo4NzA0Ons4NzA3OlssLHs4MjQ6ODcwOH1dLDg3MDg6W1s4NzA3LDgyNF1dLDg3MTI6WywsezgyNDo4NzEzfV0sODcxMzpbWzg3MTIsODI0XV0sODcxNTpbLCx7ODI0Ojg3MTZ9XSw4NzE2OltbODcxNSw4MjRdXSw4NzM5OlssLHs4MjQ6ODc0MH1dLDg3NDA6W1s4NzM5LDgyNF1dLDg3NDE6WywsezgyNDo4NzQyfV0sODc0MjpbWzg3NDEsODI0XV0sODc0ODpbWzg3NDcsODc0N10sMjU2XSw4NzQ5OltbODc0Nyw4NzQ3LDg3NDddLDI1Nl0sODc1MTpbWzg3NTAsODc1MF0sMjU2XSw4NzUyOltbODc1MCw4NzUwLDg3NTBdLDI1Nl0sODc2NDpbLCx7ODI0Ojg3Njl9XSw4NzY5OltbODc2NCw4MjRdXSw4NzcxOlssLHs4MjQ6ODc3Mn1dLDg3NzI6W1s4NzcxLDgyNF1dLDg3NzM6WywsezgyNDo4Nzc1fV0sODc3NTpbWzg3NzMsODI0XV0sODc3NjpbLCx7ODI0Ojg3Nzd9XSw4Nzc3OltbODc3Niw4MjRdXSw4NzgxOlssLHs4MjQ6ODgxM31dLDg4MDA6W1s2MSw4MjRdXSw4ODAxOlssLHs4MjQ6ODgwMn1dLDg4MDI6W1s4ODAxLDgyNF1dLDg4MDQ6WywsezgyNDo4ODE2fV0sODgwNTpbLCx7ODI0Ojg4MTd9XSw4ODEzOltbODc4MSw4MjRdXSw4ODE0OltbNjAsODI0XV0sODgxNTpbWzYyLDgyNF1dLDg4MTY6W1s4ODA0LDgyNF1dLDg4MTc6W1s4ODA1LDgyNF1dLDg4MTg6WywsezgyNDo4ODIwfV0sODgxOTpbLCx7ODI0Ojg4MjF9XSw4ODIwOltbODgxOCw4MjRdXSw4ODIxOltbODgxOSw4MjRdXSw4ODIyOlssLHs4MjQ6ODgyNH1dLDg4MjM6WywsezgyNDo4ODI1fV0sODgyNDpbWzg4MjIsODI0XV0sODgyNTpbWzg4MjMsODI0XV0sODgyNjpbLCx7ODI0Ojg4MzJ9XSw4ODI3OlssLHs4MjQ6ODgzM31dLDg4Mjg6WywsezgyNDo4OTI4fV0sODgyOTpbLCx7ODI0Ojg5Mjl9XSw4ODMyOltbODgyNiw4MjRdXSw4ODMzOltbODgyNyw4MjRdXSw4ODM0OlssLHs4MjQ6ODgzNn1dLDg4MzU6WywsezgyNDo4ODM3fV0sODgzNjpbWzg4MzQsODI0XV0sODgzNzpbWzg4MzUsODI0XV0sODgzODpbLCx7ODI0Ojg4NDB9XSw4ODM5OlssLHs4MjQ6ODg0MX1dLDg4NDA6W1s4ODM4LDgyNF1dLDg4NDE6W1s4ODM5LDgyNF1dLDg4NDk6WywsezgyNDo4OTMwfV0sODg1MDpbLCx7ODI0Ojg5MzF9XSw4ODY2OlssLHs4MjQ6ODg3Nn1dLDg4NzI6WywsezgyNDo4ODc3fV0sODg3MzpbLCx7ODI0Ojg4Nzh9XSw4ODc1OlssLHs4MjQ6ODg3OX1dLDg4NzY6W1s4ODY2LDgyNF1dLDg4Nzc6W1s4ODcyLDgyNF1dLDg4Nzg6W1s4ODczLDgyNF1dLDg4Nzk6W1s4ODc1LDgyNF1dLDg4ODI6WywsezgyNDo4OTM4fV0sODg4MzpbLCx7ODI0Ojg5Mzl9XSw4ODg0OlssLHs4MjQ6ODk0MH1dLDg4ODU6WywsezgyNDo4OTQxfV0sODkyODpbWzg4MjgsODI0XV0sODkyOTpbWzg4MjksODI0XV0sODkzMDpbWzg4NDksODI0XV0sODkzMTpbWzg4NTAsODI0XV0sODkzODpbWzg4ODIsODI0XV0sODkzOTpbWzg4ODMsODI0XV0sODk0MDpbWzg4ODQsODI0XV0sODk0MTpbWzg4ODUsODI0XV19LAo4OTYwOns5MDAxOltbMTIyOTZdXSw5MDAyOltbMTIyOTddXX0sCjkyMTY6ezkzMTI6W1s0OV0sMjU2XSw5MzEzOltbNTBdLDI1Nl0sOTMxNDpbWzUxXSwyNTZdLDkzMTU6W1s1Ml0sMjU2XSw5MzE2OltbNTNdLDI1Nl0sOTMxNzpbWzU0XSwyNTZdLDkzMTg6W1s1NV0sMjU2XSw5MzE5OltbNTZdLDI1Nl0sOTMyMDpbWzU3XSwyNTZdLDkzMjE6W1s0OSw0OF0sMjU2XSw5MzIyOltbNDksNDldLDI1Nl0sOTMyMzpbWzQ5LDUwXSwyNTZdLDkzMjQ6W1s0OSw1MV0sMjU2XSw5MzI1OltbNDksNTJdLDI1Nl0sOTMyNjpbWzQ5LDUzXSwyNTZdLDkzMjc6W1s0OSw1NF0sMjU2XSw5MzI4OltbNDksNTVdLDI1Nl0sOTMyOTpbWzQ5LDU2XSwyNTZdLDkzMzA6W1s0OSw1N10sMjU2XSw5MzMxOltbNTAsNDhdLDI1Nl0sOTMzMjpbWzQwLDQ5LDQxXSwyNTZdLDkzMzM6W1s0MCw1MCw0MV0sMjU2XSw5MzM0OltbNDAsNTEsNDFdLDI1Nl0sOTMzNTpbWzQwLDUyLDQxXSwyNTZdLDkzMzY6W1s0MCw1Myw0MV0sMjU2XSw5MzM3OltbNDAsNTQsNDFdLDI1Nl0sOTMzODpbWzQwLDU1LDQxXSwyNTZdLDkzMzk6W1s0MCw1Niw0MV0sMjU2XSw5MzQwOltbNDAsNTcsNDFdLDI1Nl0sOTM0MTpbWzQwLDQ5LDQ4LDQxXSwyNTZdLDkzNDI6W1s0MCw0OSw0OSw0MV0sMjU2XSw5MzQzOltbNDAsNDksNTAsNDFdLDI1Nl0sOTM0NDpbWzQwLDQ5LDUxLDQxXSwyNTZdLDkzNDU6W1s0MCw0OSw1Miw0MV0sMjU2XSw5MzQ2OltbNDAsNDksNTMsNDFdLDI1Nl0sOTM0NzpbWzQwLDQ5LDU0LDQxXSwyNTZdLDkzNDg6W1s0MCw0OSw1NSw0MV0sMjU2XSw5MzQ5OltbNDAsNDksNTYsNDFdLDI1Nl0sOTM1MDpbWzQwLDQ5LDU3LDQxXSwyNTZdLDkzNTE6W1s0MCw1MCw0OCw0MV0sMjU2XSw5MzUyOltbNDksNDZdLDI1Nl0sOTM1MzpbWzUwLDQ2XSwyNTZdLDkzNTQ6W1s1MSw0Nl0sMjU2XSw5MzU1OltbNTIsNDZdLDI1Nl0sOTM1NjpbWzUzLDQ2XSwyNTZdLDkzNTc6W1s1NCw0Nl0sMjU2XSw5MzU4OltbNTUsNDZdLDI1Nl0sOTM1OTpbWzU2LDQ2XSwyNTZdLDkzNjA6W1s1Nyw0Nl0sMjU2XSw5MzYxOltbNDksNDgsNDZdLDI1Nl0sOTM2MjpbWzQ5LDQ5LDQ2XSwyNTZdLDkzNjM6W1s0OSw1MCw0Nl0sMjU2XSw5MzY0OltbNDksNTEsNDZdLDI1Nl0sOTM2NTpbWzQ5LDUyLDQ2XSwyNTZdLDkzNjY6W1s0OSw1Myw0Nl0sMjU2XSw5MzY3OltbNDksNTQsNDZdLDI1Nl0sOTM2ODpbWzQ5LDU1LDQ2XSwyNTZdLDkzNjk6W1s0OSw1Niw0Nl0sMjU2XSw5MzcwOltbNDksNTcsNDZdLDI1Nl0sOTM3MTpbWzUwLDQ4LDQ2XSwyNTZdLDkzNzI6W1s0MCw5Nyw0MV0sMjU2XSw5MzczOltbNDAsOTgsNDFdLDI1Nl0sOTM3NDpbWzQwLDk5LDQxXSwyNTZdLDkzNzU6W1s0MCwxMDAsNDFdLDI1Nl0sOTM3NjpbWzQwLDEwMSw0MV0sMjU2XSw5Mzc3OltbNDAsMTAyLDQxXSwyNTZdLDkzNzg6W1s0MCwxMDMsNDFdLDI1Nl0sOTM3OTpbWzQwLDEwNCw0MV0sMjU2XSw5MzgwOltbNDAsMTA1LDQxXSwyNTZdLDkzODE6W1s0MCwxMDYsNDFdLDI1Nl0sOTM4MjpbWzQwLDEwNyw0MV0sMjU2XSw5MzgzOltbNDAsMTA4LDQxXSwyNTZdLDkzODQ6W1s0MCwxMDksNDFdLDI1Nl0sOTM4NTpbWzQwLDExMCw0MV0sMjU2XSw5Mzg2OltbNDAsMTExLDQxXSwyNTZdLDkzODc6W1s0MCwxMTIsNDFdLDI1Nl0sOTM4ODpbWzQwLDExMyw0MV0sMjU2XSw5Mzg5OltbNDAsMTE0LDQxXSwyNTZdLDkzOTA6W1s0MCwxMTUsNDFdLDI1Nl0sOTM5MTpbWzQwLDExNiw0MV0sMjU2XSw5MzkyOltbNDAsMTE3LDQxXSwyNTZdLDkzOTM6W1s0MCwxMTgsNDFdLDI1Nl0sOTM5NDpbWzQwLDExOSw0MV0sMjU2XSw5Mzk1OltbNDAsMTIwLDQxXSwyNTZdLDkzOTY6W1s0MCwxMjEsNDFdLDI1Nl0sOTM5NzpbWzQwLDEyMiw0MV0sMjU2XSw5Mzk4OltbNjVdLDI1Nl0sOTM5OTpbWzY2XSwyNTZdLDk0MDA6W1s2N10sMjU2XSw5NDAxOltbNjhdLDI1Nl0sOTQwMjpbWzY5XSwyNTZdLDk0MDM6W1s3MF0sMjU2XSw5NDA0OltbNzFdLDI1Nl0sOTQwNTpbWzcyXSwyNTZdLDk0MDY6W1s3M10sMjU2XSw5NDA3OltbNzRdLDI1Nl0sOTQwODpbWzc1XSwyNTZdLDk0MDk6W1s3Nl0sMjU2XSw5NDEwOltbNzddLDI1Nl0sOTQxMTpbWzc4XSwyNTZdLDk0MTI6W1s3OV0sMjU2XSw5NDEzOltbODBdLDI1Nl0sOTQxNDpbWzgxXSwyNTZdLDk0MTU6W1s4Ml0sMjU2XSw5NDE2OltbODNdLDI1Nl0sOTQxNzpbWzg0XSwyNTZdLDk0MTg6W1s4NV0sMjU2XSw5NDE5OltbODZdLDI1Nl0sOTQyMDpbWzg3XSwyNTZdLDk0MjE6W1s4OF0sMjU2XSw5NDIyOltbODldLDI1Nl0sOTQyMzpbWzkwXSwyNTZdLDk0MjQ6W1s5N10sMjU2XSw5NDI1OltbOThdLDI1Nl0sOTQyNjpbWzk5XSwyNTZdLDk0Mjc6W1sxMDBdLDI1Nl0sOTQyODpbWzEwMV0sMjU2XSw5NDI5OltbMTAyXSwyNTZdLDk0MzA6W1sxMDNdLDI1Nl0sOTQzMTpbWzEwNF0sMjU2XSw5NDMyOltbMTA1XSwyNTZdLDk0MzM6W1sxMDZdLDI1Nl0sOTQzNDpbWzEwN10sMjU2XSw5NDM1OltbMTA4XSwyNTZdLDk0MzY6W1sxMDldLDI1Nl0sOTQzNzpbWzExMF0sMjU2XSw5NDM4OltbMTExXSwyNTZdLDk0Mzk6W1sxMTJdLDI1Nl0sOTQ0MDpbWzExM10sMjU2XSw5NDQxOltbMTE0XSwyNTZdLDk0NDI6W1sxMTVdLDI1Nl0sOTQ0MzpbWzExNl0sMjU2XSw5NDQ0OltbMTE3XSwyNTZdLDk0NDU6W1sxMThdLDI1Nl0sOTQ0NjpbWzExOV0sMjU2XSw5NDQ3OltbMTIwXSwyNTZdLDk0NDg6W1sxMjFdLDI1Nl0sOTQ0OTpbWzEyMl0sMjU2XSw5NDUwOltbNDhdLDI1Nl19LAoxMDc1Mjp7MTA3NjQ6W1s4NzQ3LDg3NDcsODc0Nyw4NzQ3XSwyNTZdLDEwODY4OltbNTgsNTgsNjFdLDI1Nl0sMTA4Njk6W1s2MSw2MV0sMjU2XSwxMDg3MDpbWzYxLDYxLDYxXSwyNTZdLDEwOTcyOltbMTA5NzMsODI0XSw1MTJdfSwKMTEyNjQ6ezExMzg4OltbMTA2XSwyNTZdLDExMzg5OltbODZdLDI1Nl0sMTE1MDM6WywyMzBdLDExNTA0OlssMjMwXSwxMTUwNTpbLDIzMF19LAoxMTUyMDp7MTE2MzE6W1sxMTYxN10sMjU2XSwxMTY0NzpbLDldLDExNzQ0OlssMjMwXSwxMTc0NTpbLDIzMF0sMTE3NDY6WywyMzBdLDExNzQ3OlssMjMwXSwxMTc0ODpbLDIzMF0sMTE3NDk6WywyMzBdLDExNzUwOlssMjMwXSwxMTc1MTpbLDIzMF0sMTE3NTI6WywyMzBdLDExNzUzOlssMjMwXSwxMTc1NDpbLDIzMF0sMTE3NTU6WywyMzBdLDExNzU2OlssMjMwXSwxMTc1NzpbLDIzMF0sMTE3NTg6WywyMzBdLDExNzU5OlssMjMwXSwxMTc2MDpbLDIzMF0sMTE3NjE6WywyMzBdLDExNzYyOlssMjMwXSwxMTc2MzpbLDIzMF0sMTE3NjQ6WywyMzBdLDExNzY1OlssMjMwXSwxMTc2NjpbLDIzMF0sMTE3Njc6WywyMzBdLDExNzY4OlssMjMwXSwxMTc2OTpbLDIzMF0sMTE3NzA6WywyMzBdLDExNzcxOlssMjMwXSwxMTc3MjpbLDIzMF0sMTE3NzM6WywyMzBdLDExNzc0OlssMjMwXSwxMTc3NTpbLDIzMF19LAoxMTc3Njp7MTE5MzU6W1syNzU5N10sMjU2XSwxMjAxOTpbWzQwODYzXSwyNTZdfSwKMTIwMzI6ezEyMDMyOltbMTk5NjhdLDI1Nl0sMTIwMzM6W1syMDAwOF0sMjU2XSwxMjAzNDpbWzIwMDIyXSwyNTZdLDEyMDM1OltbMjAwMzFdLDI1Nl0sMTIwMzY6W1syMDA1N10sMjU2XSwxMjAzNzpbWzIwMTAxXSwyNTZdLDEyMDM4OltbMjAxMDhdLDI1Nl0sMTIwMzk6W1syMDEyOF0sMjU2XSwxMjA0MDpbWzIwMTU0XSwyNTZdLDEyMDQxOltbMjA3OTldLDI1Nl0sMTIwNDI6W1syMDgzN10sMjU2XSwxMjA0MzpbWzIwODQzXSwyNTZdLDEyMDQ0OltbMjA4NjZdLDI1Nl0sMTIwNDU6W1syMDg4Nl0sMjU2XSwxMjA0NjpbWzIwOTA3XSwyNTZdLDEyMDQ3OltbMjA5NjBdLDI1Nl0sMTIwNDg6W1syMDk4MV0sMjU2XSwxMjA0OTpbWzIwOTkyXSwyNTZdLDEyMDUwOltbMjExNDddLDI1Nl0sMTIwNTE6W1syMTI0MV0sMjU2XSwxMjA1MjpbWzIxMjY5XSwyNTZdLDEyMDUzOltbMjEyNzRdLDI1Nl0sMTIwNTQ6W1syMTMwNF0sMjU2XSwxMjA1NTpbWzIxMzEzXSwyNTZdLDEyMDU2OltbMjEzNDBdLDI1Nl0sMTIwNTc6W1syMTM1M10sMjU2XSwxMjA1ODpbWzIxMzc4XSwyNTZdLDEyMDU5OltbMjE0MzBdLDI1Nl0sMTIwNjA6W1syMTQ0OF0sMjU2XSwxMjA2MTpbWzIxNDc1XSwyNTZdLDEyMDYyOltbMjIyMzFdLDI1Nl0sMTIwNjM6W1syMjMwM10sMjU2XSwxMjA2NDpbWzIyNzYzXSwyNTZdLDEyMDY1OltbMjI3ODZdLDI1Nl0sMTIwNjY6W1syMjc5NF0sMjU2XSwxMjA2NzpbWzIyODA1XSwyNTZdLDEyMDY4OltbMjI4MjNdLDI1Nl0sMTIwNjk6W1syMjg5OV0sMjU2XSwxMjA3MDpbWzIzMzc2XSwyNTZdLDEyMDcxOltbMjM0MjRdLDI1Nl0sMTIwNzI6W1syMzU0NF0sMjU2XSwxMjA3MzpbWzIzNTY3XSwyNTZdLDEyMDc0OltbMjM1ODZdLDI1Nl0sMTIwNzU6W1syMzYwOF0sMjU2XSwxMjA3NjpbWzIzNjYyXSwyNTZdLDEyMDc3OltbMjM2NjVdLDI1Nl0sMTIwNzg6W1syNDAyN10sMjU2XSwxMjA3OTpbWzI0MDM3XSwyNTZdLDEyMDgwOltbMjQwNDldLDI1Nl0sMTIwODE6W1syNDA2Ml0sMjU2XSwxMjA4MjpbWzI0MTc4XSwyNTZdLDEyMDgzOltbMjQxODZdLDI1Nl0sMTIwODQ6W1syNDE5MV0sMjU2XSwxMjA4NTpbWzI0MzA4XSwyNTZdLDEyMDg2OltbMjQzMThdLDI1Nl0sMTIwODc6W1syNDMzMV0sMjU2XSwxMjA4ODpbWzI0MzM5XSwyNTZdLDEyMDg5OltbMjQ0MDBdLDI1Nl0sMTIwOTA6W1syNDQxN10sMjU2XSwxMjA5MTpbWzI0NDM1XSwyNTZdLDEyMDkyOltbMjQ1MTVdLDI1Nl0sMTIwOTM6W1syNTA5Nl0sMjU2XSwxMjA5NDpbWzI1MTQyXSwyNTZdLDEyMDk1OltbMjUxNjNdLDI1Nl0sMTIwOTY6W1syNTkwM10sMjU2XSwxMjA5NzpbWzI1OTA4XSwyNTZdLDEyMDk4OltbMjU5OTFdLDI1Nl0sMTIwOTk6W1syNjAwN10sMjU2XSwxMjEwMDpbWzI2MDIwXSwyNTZdLDEyMTAxOltbMjYwNDFdLDI1Nl0sMTIxMDI6W1syNjA4MF0sMjU2XSwxMjEwMzpbWzI2MDg1XSwyNTZdLDEyMTA0OltbMjYzNTJdLDI1Nl0sMTIxMDU6W1syNjM3Nl0sMjU2XSwxMjEwNjpbWzI2NDA4XSwyNTZdLDEyMTA3OltbMjc0MjRdLDI1Nl0sMTIxMDg6W1syNzQ5MF0sMjU2XSwxMjEwOTpbWzI3NTEzXSwyNTZdLDEyMTEwOltbMjc1NzFdLDI1Nl0sMTIxMTE6W1syNzU5NV0sMjU2XSwxMjExMjpbWzI3NjA0XSwyNTZdLDEyMTEzOltbMjc2MTFdLDI1Nl0sMTIxMTQ6W1syNzY2M10sMjU2XSwxMjExNTpbWzI3NjY4XSwyNTZdLDEyMTE2OltbMjc3MDBdLDI1Nl0sMTIxMTc6W1syODc3OV0sMjU2XSwxMjExODpbWzI5MjI2XSwyNTZdLDEyMTE5OltbMjkyMzhdLDI1Nl0sMTIxMjA6W1syOTI0M10sMjU2XSwxMjEyMTpbWzI5MjQ3XSwyNTZdLDEyMTIyOltbMjkyNTVdLDI1Nl0sMTIxMjM6W1syOTI3M10sMjU2XSwxMjEyNDpbWzI5Mjc1XSwyNTZdLDEyMTI1OltbMjkzNTZdLDI1Nl0sMTIxMjY6W1syOTU3Ml0sMjU2XSwxMjEyNzpbWzI5NTc3XSwyNTZdLDEyMTI4OltbMjk5MTZdLDI1Nl0sMTIxMjk6W1syOTkyNl0sMjU2XSwxMjEzMDpbWzI5OTc2XSwyNTZdLDEyMTMxOltbMjk5ODNdLDI1Nl0sMTIxMzI6W1syOTk5Ml0sMjU2XSwxMjEzMzpbWzMwMDAwXSwyNTZdLDEyMTM0OltbMzAwOTFdLDI1Nl0sMTIxMzU6W1szMDA5OF0sMjU2XSwxMjEzNjpbWzMwMzI2XSwyNTZdLDEyMTM3OltbMzAzMzNdLDI1Nl0sMTIxMzg6W1szMDM4Ml0sMjU2XSwxMjEzOTpbWzMwMzk5XSwyNTZdLDEyMTQwOltbMzA0NDZdLDI1Nl0sMTIxNDE6W1szMDY4M10sMjU2XSwxMjE0MjpbWzMwNjkwXSwyNTZdLDEyMTQzOltbMzA3MDddLDI1Nl0sMTIxNDQ6W1szMTAzNF0sMjU2XSwxMjE0NTpbWzMxMTYwXSwyNTZdLDEyMTQ2OltbMzExNjZdLDI1Nl0sMTIxNDc6W1szMTM0OF0sMjU2XSwxMjE0ODpbWzMxNDM1XSwyNTZdLDEyMTQ5OltbMzE0ODFdLDI1Nl0sMTIxNTA6W1szMTg1OV0sMjU2XSwxMjE1MTpbWzMxOTkyXSwyNTZdLDEyMTUyOltbMzI1NjZdLDI1Nl0sMTIxNTM6W1szMjU5M10sMjU2XSwxMjE1NDpbWzMyNjUwXSwyNTZdLDEyMTU1OltbMzI3MDFdLDI1Nl0sMTIxNTY6W1szMjc2OV0sMjU2XSwxMjE1NzpbWzMyNzgwXSwyNTZdLDEyMTU4OltbMzI3ODZdLDI1Nl0sMTIxNTk6W1szMjgxOV0sMjU2XSwxMjE2MDpbWzMyODk1XSwyNTZdLDEyMTYxOltbMzI5MDVdLDI1Nl0sMTIxNjI6W1szMzI1MV0sMjU2XSwxMjE2MzpbWzMzMjU4XSwyNTZdLDEyMTY0OltbMzMyNjddLDI1Nl0sMTIxNjU6W1szMzI3Nl0sMjU2XSwxMjE2NjpbWzMzMjkyXSwyNTZdLDEyMTY3OltbMzMzMDddLDI1Nl0sMTIxNjg6W1szMzMxMV0sMjU2XSwxMjE2OTpbWzMzMzkwXSwyNTZdLDEyMTcwOltbMzMzOTRdLDI1Nl0sMTIxNzE6W1szMzQwMF0sMjU2XSwxMjE3MjpbWzM0MzgxXSwyNTZdLDEyMTczOltbMzQ0MTFdLDI1Nl0sMTIxNzQ6W1szNDg4MF0sMjU2XSwxMjE3NTpbWzM0ODkyXSwyNTZdLDEyMTc2OltbMzQ5MTVdLDI1Nl0sMTIxNzc6W1szNTE5OF0sMjU2XSwxMjE3ODpbWzM1MjExXSwyNTZdLDEyMTc5OltbMzUyODJdLDI1Nl0sMTIxODA6W1szNTMyOF0sMjU2XSwxMjE4MTpbWzM1ODk1XSwyNTZdLDEyMTgyOltbMzU5MTBdLDI1Nl0sMTIxODM6W1szNTkyNV0sMjU2XSwxMjE4NDpbWzM1OTYwXSwyNTZdLDEyMTg1OltbMzU5OTddLDI1Nl0sMTIxODY6W1szNjE5Nl0sMjU2XSwxMjE4NzpbWzM2MjA4XSwyNTZdLDEyMTg4OltbMzYyNzVdLDI1Nl0sMTIxODk6W1szNjUyM10sMjU2XSwxMjE5MDpbWzM2NTU0XSwyNTZdLDEyMTkxOltbMzY3NjNdLDI1Nl0sMTIxOTI6W1szNjc4NF0sMjU2XSwxMjE5MzpbWzM2Nzg5XSwyNTZdLDEyMTk0OltbMzcwMDldLDI1Nl0sMTIxOTU6W1szNzE5M10sMjU2XSwxMjE5NjpbWzM3MzE4XSwyNTZdLDEyMTk3OltbMzczMjRdLDI1Nl0sMTIxOTg6W1szNzMyOV0sMjU2XSwxMjE5OTpbWzM4MjYzXSwyNTZdLDEyMjAwOltbMzgyNzJdLDI1Nl0sMTIyMDE6W1szODQyOF0sMjU2XSwxMjIwMjpbWzM4NTgyXSwyNTZdLDEyMjAzOltbMzg1ODVdLDI1Nl0sMTIyMDQ6W1szODYzMl0sMjU2XSwxMjIwNTpbWzM4NzM3XSwyNTZdLDEyMjA2OltbMzg3NTBdLDI1Nl0sMTIyMDc6W1szODc1NF0sMjU2XSwxMjIwODpbWzM4NzYxXSwyNTZdLDEyMjA5OltbMzg4NTldLDI1Nl0sMTIyMTA6W1szODg5M10sMjU2XSwxMjIxMTpbWzM4ODk5XSwyNTZdLDEyMjEyOltbMzg5MTNdLDI1Nl0sMTIyMTM6W1szOTA4MF0sMjU2XSwxMjIxNDpbWzM5MTMxXSwyNTZdLDEyMjE1OltbMzkxMzVdLDI1Nl0sMTIyMTY6W1szOTMxOF0sMjU2XSwxMjIxNzpbWzM5MzIxXSwyNTZdLDEyMjE4OltbMzkzNDBdLDI1Nl0sMTIyMTk6W1szOTU5Ml0sMjU2XSwxMjIyMDpbWzM5NjQwXSwyNTZdLDEyMjIxOltbMzk2NDddLDI1Nl0sMTIyMjI6W1szOTcxN10sMjU2XSwxMjIyMzpbWzM5NzI3XSwyNTZdLDEyMjI0OltbMzk3MzBdLDI1Nl0sMTIyMjU6W1szOTc0MF0sMjU2XSwxMjIyNjpbWzM5NzcwXSwyNTZdLDEyMjI3OltbNDAxNjVdLDI1Nl0sMTIyMjg6W1s0MDU2NV0sMjU2XSwxMjIyOTpbWzQwNTc1XSwyNTZdLDEyMjMwOltbNDA2MTNdLDI1Nl0sMTIyMzE6W1s0MDYzNV0sMjU2XSwxMjIzMjpbWzQwNjQzXSwyNTZdLDEyMjMzOltbNDA2NTNdLDI1Nl0sMTIyMzQ6W1s0MDY1N10sMjU2XSwxMjIzNTpbWzQwNjk3XSwyNTZdLDEyMjM2OltbNDA3MDFdLDI1Nl0sMTIyMzc6W1s0MDcxOF0sMjU2XSwxMjIzODpbWzQwNzIzXSwyNTZdLDEyMjM5OltbNDA3MzZdLDI1Nl0sMTIyNDA6W1s0MDc2M10sMjU2XSwxMjI0MTpbWzQwNzc4XSwyNTZdLDEyMjQyOltbNDA3ODZdLDI1Nl0sMTIyNDM6W1s0MDg0NV0sMjU2XSwxMjI0NDpbWzQwODYwXSwyNTZdLDEyMjQ1OltbNDA4NjRdLDI1Nl19LAoxMjI4ODp7MTIyODg6W1szMl0sMjU2XSwxMjMzMDpbLDIxOF0sMTIzMzE6WywyMjhdLDEyMzMyOlssMjMyXSwxMjMzMzpbLDIyMl0sMTIzMzQ6WywyMjRdLDEyMzM1OlssMjI0XSwxMjM0MjpbWzEyMzA2XSwyNTZdLDEyMzQ0OltbMjEzMTNdLDI1Nl0sMTIzNDU6W1syMTMxNl0sMjU2XSwxMjM0NjpbWzIxMzE3XSwyNTZdLDEyMzU4OlssLHsxMjQ0MToxMjQzNn1dLDEyMzYzOlssLHsxMjQ0MToxMjM2NH1dLDEyMzY0OltbMTIzNjMsMTI0NDFdXSwxMjM2NTpbLCx7MTI0NDE6MTIzNjZ9XSwxMjM2NjpbWzEyMzY1LDEyNDQxXV0sMTIzNjc6WywsezEyNDQxOjEyMzY4fV0sMTIzNjg6W1sxMjM2NywxMjQ0MV1dLDEyMzY5OlssLHsxMjQ0MToxMjM3MH1dLDEyMzcwOltbMTIzNjksMTI0NDFdXSwxMjM3MTpbLCx7MTI0NDE6MTIzNzJ9XSwxMjM3MjpbWzEyMzcxLDEyNDQxXV0sMTIzNzM6WywsezEyNDQxOjEyMzc0fV0sMTIzNzQ6W1sxMjM3MywxMjQ0MV1dLDEyMzc1OlssLHsxMjQ0MToxMjM3Nn1dLDEyMzc2OltbMTIzNzUsMTI0NDFdXSwxMjM3NzpbLCx7MTI0NDE6MTIzNzh9XSwxMjM3ODpbWzEyMzc3LDEyNDQxXV0sMTIzNzk6WywsezEyNDQxOjEyMzgwfV0sMTIzODA6W1sxMjM3OSwxMjQ0MV1dLDEyMzgxOlssLHsxMjQ0MToxMjM4Mn1dLDEyMzgyOltbMTIzODEsMTI0NDFdXSwxMjM4MzpbLCx7MTI0NDE6MTIzODR9XSwxMjM4NDpbWzEyMzgzLDEyNDQxXV0sMTIzODU6WywsezEyNDQxOjEyMzg2fV0sMTIzODY6W1sxMjM4NSwxMjQ0MV1dLDEyMzg4OlssLHsxMjQ0MToxMjM4OX1dLDEyMzg5OltbMTIzODgsMTI0NDFdXSwxMjM5MDpbLCx7MTI0NDE6MTIzOTF9XSwxMjM5MTpbWzEyMzkwLDEyNDQxXV0sMTIzOTI6WywsezEyNDQxOjEyMzkzfV0sMTIzOTM6W1sxMjM5MiwxMjQ0MV1dLDEyMzk5OlssLHsxMjQ0MToxMjQwMCwxMjQ0MjoxMjQwMX1dLDEyNDAwOltbMTIzOTksMTI0NDFdXSwxMjQwMTpbWzEyMzk5LDEyNDQyXV0sMTI0MDI6WywsezEyNDQxOjEyNDAzLDEyNDQyOjEyNDA0fV0sMTI0MDM6W1sxMjQwMiwxMjQ0MV1dLDEyNDA0OltbMTI0MDIsMTI0NDJdXSwxMjQwNTpbLCx7MTI0NDE6MTI0MDYsMTI0NDI6MTI0MDd9XSwxMjQwNjpbWzEyNDA1LDEyNDQxXV0sMTI0MDc6W1sxMjQwNSwxMjQ0Ml1dLDEyNDA4OlssLHsxMjQ0MToxMjQwOSwxMjQ0MjoxMjQxMH1dLDEyNDA5OltbMTI0MDgsMTI0NDFdXSwxMjQxMDpbWzEyNDA4LDEyNDQyXV0sMTI0MTE6WywsezEyNDQxOjEyNDEyLDEyNDQyOjEyNDEzfV0sMTI0MTI6W1sxMjQxMSwxMjQ0MV1dLDEyNDEzOltbMTI0MTEsMTI0NDJdXSwxMjQzNjpbWzEyMzU4LDEyNDQxXV0sMTI0NDE6Wyw4XSwxMjQ0MjpbLDhdLDEyNDQzOltbMzIsMTI0NDFdLDI1Nl0sMTI0NDQ6W1szMiwxMjQ0Ml0sMjU2XSwxMjQ0NTpbLCx7MTI0NDE6MTI0NDZ9XSwxMjQ0NjpbWzEyNDQ1LDEyNDQxXV0sMTI0NDc6W1sxMjQyNCwxMjQyNl0sMjU2XSwxMjQ1NDpbLCx7MTI0NDE6MTI1MzJ9XSwxMjQ1OTpbLCx7MTI0NDE6MTI0NjB9XSwxMjQ2MDpbWzEyNDU5LDEyNDQxXV0sMTI0NjE6WywsezEyNDQxOjEyNDYyfV0sMTI0NjI6W1sxMjQ2MSwxMjQ0MV1dLDEyNDYzOlssLHsxMjQ0MToxMjQ2NH1dLDEyNDY0OltbMTI0NjMsMTI0NDFdXSwxMjQ2NTpbLCx7MTI0NDE6MTI0NjZ9XSwxMjQ2NjpbWzEyNDY1LDEyNDQxXV0sMTI0Njc6WywsezEyNDQxOjEyNDY4fV0sMTI0Njg6W1sxMjQ2NywxMjQ0MV1dLDEyNDY5OlssLHsxMjQ0MToxMjQ3MH1dLDEyNDcwOltbMTI0NjksMTI0NDFdXSwxMjQ3MTpbLCx7MTI0NDE6MTI0NzJ9XSwxMjQ3MjpbWzEyNDcxLDEyNDQxXV0sMTI0NzM6WywsezEyNDQxOjEyNDc0fV0sMTI0NzQ6W1sxMjQ3MywxMjQ0MV1dLDEyNDc1OlssLHsxMjQ0MToxMjQ3Nn1dLDEyNDc2OltbMTI0NzUsMTI0NDFdXSwxMjQ3NzpbLCx7MTI0NDE6MTI0Nzh9XSwxMjQ3ODpbWzEyNDc3LDEyNDQxXV0sMTI0Nzk6WywsezEyNDQxOjEyNDgwfV0sMTI0ODA6W1sxMjQ3OSwxMjQ0MV1dLDEyNDgxOlssLHsxMjQ0MToxMjQ4Mn1dLDEyNDgyOltbMTI0ODEsMTI0NDFdXSwxMjQ4NDpbLCx7MTI0NDE6MTI0ODV9XSwxMjQ4NTpbWzEyNDg0LDEyNDQxXV0sMTI0ODY6WywsezEyNDQxOjEyNDg3fV0sMTI0ODc6W1sxMjQ4NiwxMjQ0MV1dLDEyNDg4OlssLHsxMjQ0MToxMjQ4OX1dLDEyNDg5OltbMTI0ODgsMTI0NDFdXSwxMjQ5NTpbLCx7MTI0NDE6MTI0OTYsMTI0NDI6MTI0OTd9XSwxMjQ5NjpbWzEyNDk1LDEyNDQxXV0sMTI0OTc6W1sxMjQ5NSwxMjQ0Ml1dLDEyNDk4OlssLHsxMjQ0MToxMjQ5OSwxMjQ0MjoxMjUwMH1dLDEyNDk5OltbMTI0OTgsMTI0NDFdXSwxMjUwMDpbWzEyNDk4LDEyNDQyXV0sMTI1MDE6WywsezEyNDQxOjEyNTAyLDEyNDQyOjEyNTAzfV0sMTI1MDI6W1sxMjUwMSwxMjQ0MV1dLDEyNTAzOltbMTI1MDEsMTI0NDJdXSwxMjUwNDpbLCx7MTI0NDE6MTI1MDUsMTI0NDI6MTI1MDZ9XSwxMjUwNTpbWzEyNTA0LDEyNDQxXV0sMTI1MDY6W1sxMjUwNCwxMjQ0Ml1dLDEyNTA3OlssLHsxMjQ0MToxMjUwOCwxMjQ0MjoxMjUwOX1dLDEyNTA4OltbMTI1MDcsMTI0NDFdXSwxMjUwOTpbWzEyNTA3LDEyNDQyXV0sMTI1Mjc6WywsezEyNDQxOjEyNTM1fV0sMTI1Mjg6WywsezEyNDQxOjEyNTM2fV0sMTI1Mjk6WywsezEyNDQxOjEyNTM3fV0sMTI1MzA6WywsezEyNDQxOjEyNTM4fV0sMTI1MzI6W1sxMjQ1NCwxMjQ0MV1dLDEyNTM1OltbMTI1MjcsMTI0NDFdXSwxMjUzNjpbWzEyNTI4LDEyNDQxXV0sMTI1Mzc6W1sxMjUyOSwxMjQ0MV1dLDEyNTM4OltbMTI1MzAsMTI0NDFdXSwxMjU0MTpbLCx7MTI0NDE6MTI1NDJ9XSwxMjU0MjpbWzEyNTQxLDEyNDQxXV0sMTI1NDM6W1sxMjQ2NywxMjQ4OF0sMjU2XX0sCjEyNTQ0OnsxMjU5MzpbWzQzNTJdLDI1Nl0sMTI1OTQ6W1s0MzUzXSwyNTZdLDEyNTk1OltbNDUyMl0sMjU2XSwxMjU5NjpbWzQzNTRdLDI1Nl0sMTI1OTc6W1s0NTI0XSwyNTZdLDEyNTk4OltbNDUyNV0sMjU2XSwxMjU5OTpbWzQzNTVdLDI1Nl0sMTI2MDA6W1s0MzU2XSwyNTZdLDEyNjAxOltbNDM1N10sMjU2XSwxMjYwMjpbWzQ1MjhdLDI1Nl0sMTI2MDM6W1s0NTI5XSwyNTZdLDEyNjA0OltbNDUzMF0sMjU2XSwxMjYwNTpbWzQ1MzFdLDI1Nl0sMTI2MDY6W1s0NTMyXSwyNTZdLDEyNjA3OltbNDUzM10sMjU2XSwxMjYwODpbWzQzNzhdLDI1Nl0sMTI2MDk6W1s0MzU4XSwyNTZdLDEyNjEwOltbNDM1OV0sMjU2XSwxMjYxMTpbWzQzNjBdLDI1Nl0sMTI2MTI6W1s0Mzg1XSwyNTZdLDEyNjEzOltbNDM2MV0sMjU2XSwxMjYxNDpbWzQzNjJdLDI1Nl0sMTI2MTU6W1s0MzYzXSwyNTZdLDEyNjE2OltbNDM2NF0sMjU2XSwxMjYxNzpbWzQzNjVdLDI1Nl0sMTI2MTg6W1s0MzY2XSwyNTZdLDEyNjE5OltbNDM2N10sMjU2XSwxMjYyMDpbWzQzNjhdLDI1Nl0sMTI2MjE6W1s0MzY5XSwyNTZdLDEyNjIyOltbNDM3MF0sMjU2XSwxMjYyMzpbWzQ0NDldLDI1Nl0sMTI2MjQ6W1s0NDUwXSwyNTZdLDEyNjI1OltbNDQ1MV0sMjU2XSwxMjYyNjpbWzQ0NTJdLDI1Nl0sMTI2Mjc6W1s0NDUzXSwyNTZdLDEyNjI4OltbNDQ1NF0sMjU2XSwxMjYyOTpbWzQ0NTVdLDI1Nl0sMTI2MzA6W1s0NDU2XSwyNTZdLDEyNjMxOltbNDQ1N10sMjU2XSwxMjYzMjpbWzQ0NThdLDI1Nl0sMTI2MzM6W1s0NDU5XSwyNTZdLDEyNjM0OltbNDQ2MF0sMjU2XSwxMjYzNTpbWzQ0NjFdLDI1Nl0sMTI2MzY6W1s0NDYyXSwyNTZdLDEyNjM3OltbNDQ2M10sMjU2XSwxMjYzODpbWzQ0NjRdLDI1Nl0sMTI2Mzk6W1s0NDY1XSwyNTZdLDEyNjQwOltbNDQ2Nl0sMjU2XSwxMjY0MTpbWzQ0NjddLDI1Nl0sMTI2NDI6W1s0NDY4XSwyNTZdLDEyNjQzOltbNDQ2OV0sMjU2XSwxMjY0NDpbWzQ0NDhdLDI1Nl0sMTI2NDU6W1s0MzcyXSwyNTZdLDEyNjQ2OltbNDM3M10sMjU2XSwxMjY0NzpbWzQ1NTFdLDI1Nl0sMTI2NDg6W1s0NTUyXSwyNTZdLDEyNjQ5OltbNDU1Nl0sMjU2XSwxMjY1MDpbWzQ1NThdLDI1Nl0sMTI2NTE6W1s0NTYzXSwyNTZdLDEyNjUyOltbNDU2N10sMjU2XSwxMjY1MzpbWzQ1NjldLDI1Nl0sMTI2NTQ6W1s0MzgwXSwyNTZdLDEyNjU1OltbNDU3M10sMjU2XSwxMjY1NjpbWzQ1NzVdLDI1Nl0sMTI2NTc6W1s0MzgxXSwyNTZdLDEyNjU4OltbNDM4Ml0sMjU2XSwxMjY1OTpbWzQzODRdLDI1Nl0sMTI2NjA6W1s0Mzg2XSwyNTZdLDEyNjYxOltbNDM4N10sMjU2XSwxMjY2MjpbWzQzOTFdLDI1Nl0sMTI2NjM6W1s0MzkzXSwyNTZdLDEyNjY0OltbNDM5NV0sMjU2XSwxMjY2NTpbWzQzOTZdLDI1Nl0sMTI2NjY6W1s0Mzk3XSwyNTZdLDEyNjY3OltbNDM5OF0sMjU2XSwxMjY2ODpbWzQzOTldLDI1Nl0sMTI2Njk6W1s0NDAyXSwyNTZdLDEyNjcwOltbNDQwNl0sMjU2XSwxMjY3MTpbWzQ0MTZdLDI1Nl0sMTI2NzI6W1s0NDIzXSwyNTZdLDEyNjczOltbNDQyOF0sMjU2XSwxMjY3NDpbWzQ1OTNdLDI1Nl0sMTI2NzU6W1s0NTk0XSwyNTZdLDEyNjc2OltbNDQzOV0sMjU2XSwxMjY3NzpbWzQ0NDBdLDI1Nl0sMTI2Nzg6W1s0NDQxXSwyNTZdLDEyNjc5OltbNDQ4NF0sMjU2XSwxMjY4MDpbWzQ0ODVdLDI1Nl0sMTI2ODE6W1s0NDg4XSwyNTZdLDEyNjgyOltbNDQ5N10sMjU2XSwxMjY4MzpbWzQ0OThdLDI1Nl0sMTI2ODQ6W1s0NTAwXSwyNTZdLDEyNjg1OltbNDUxMF0sMjU2XSwxMjY4NjpbWzQ1MTNdLDI1Nl0sMTI2OTA6W1sxOTk2OF0sMjU2XSwxMjY5MTpbWzIwMTA4XSwyNTZdLDEyNjkyOltbMTk5NzddLDI1Nl0sMTI2OTM6W1syMjIzNV0sMjU2XSwxMjY5NDpbWzE5OTc4XSwyNTZdLDEyNjk1OltbMjAwMTNdLDI1Nl0sMTI2OTY6W1sxOTk3OV0sMjU2XSwxMjY5NzpbWzMwMDAyXSwyNTZdLDEyNjk4OltbMjAwNTddLDI1Nl0sMTI2OTk6W1sxOTk5M10sMjU2XSwxMjcwMDpbWzE5OTY5XSwyNTZdLDEyNzAxOltbMjI4MjVdLDI1Nl0sMTI3MDI6W1syMjMyMF0sMjU2XSwxMjcwMzpbWzIwMTU0XSwyNTZdfSwKMTI4MDA6ezEyODAwOltbNDAsNDM1Miw0MV0sMjU2XSwxMjgwMTpbWzQwLDQzNTQsNDFdLDI1Nl0sMTI4MDI6W1s0MCw0MzU1LDQxXSwyNTZdLDEyODAzOltbNDAsNDM1Nyw0MV0sMjU2XSwxMjgwNDpbWzQwLDQzNTgsNDFdLDI1Nl0sMTI4MDU6W1s0MCw0MzU5LDQxXSwyNTZdLDEyODA2OltbNDAsNDM2MSw0MV0sMjU2XSwxMjgwNzpbWzQwLDQzNjMsNDFdLDI1Nl0sMTI4MDg6W1s0MCw0MzY0LDQxXSwyNTZdLDEyODA5OltbNDAsNDM2Niw0MV0sMjU2XSwxMjgxMDpbWzQwLDQzNjcsNDFdLDI1Nl0sMTI4MTE6W1s0MCw0MzY4LDQxXSwyNTZdLDEyODEyOltbNDAsNDM2OSw0MV0sMjU2XSwxMjgxMzpbWzQwLDQzNzAsNDFdLDI1Nl0sMTI4MTQ6W1s0MCw0MzUyLDQ0NDksNDFdLDI1Nl0sMTI4MTU6W1s0MCw0MzU0LDQ0NDksNDFdLDI1Nl0sMTI4MTY6W1s0MCw0MzU1LDQ0NDksNDFdLDI1Nl0sMTI4MTc6W1s0MCw0MzU3LDQ0NDksNDFdLDI1Nl0sMTI4MTg6W1s0MCw0MzU4LDQ0NDksNDFdLDI1Nl0sMTI4MTk6W1s0MCw0MzU5LDQ0NDksNDFdLDI1Nl0sMTI4MjA6W1s0MCw0MzYxLDQ0NDksNDFdLDI1Nl0sMTI4MjE6W1s0MCw0MzYzLDQ0NDksNDFdLDI1Nl0sMTI4MjI6W1s0MCw0MzY0LDQ0NDksNDFdLDI1Nl0sMTI4MjM6W1s0MCw0MzY2LDQ0NDksNDFdLDI1Nl0sMTI4MjQ6W1s0MCw0MzY3LDQ0NDksNDFdLDI1Nl0sMTI4MjU6W1s0MCw0MzY4LDQ0NDksNDFdLDI1Nl0sMTI4MjY6W1s0MCw0MzY5LDQ0NDksNDFdLDI1Nl0sMTI4Mjc6W1s0MCw0MzcwLDQ0NDksNDFdLDI1Nl0sMTI4Mjg6W1s0MCw0MzY0LDQ0NjIsNDFdLDI1Nl0sMTI4Mjk6W1s0MCw0MzYzLDQ0NTcsNDM2NCw0NDUzLDQ1MjMsNDFdLDI1Nl0sMTI4MzA6W1s0MCw0MzYzLDQ0NTcsNDM3MCw0NDYyLDQxXSwyNTZdLDEyODMyOltbNDAsMTk5NjgsNDFdLDI1Nl0sMTI4MzM6W1s0MCwyMDEwOCw0MV0sMjU2XSwxMjgzNDpbWzQwLDE5OTc3LDQxXSwyNTZdLDEyODM1OltbNDAsMjIyMzUsNDFdLDI1Nl0sMTI4MzY6W1s0MCwyMDExNiw0MV0sMjU2XSwxMjgzNzpbWzQwLDIwODQ1LDQxXSwyNTZdLDEyODM4OltbNDAsMTk5NzEsNDFdLDI1Nl0sMTI4Mzk6W1s0MCwyMDg0Myw0MV0sMjU2XSwxMjg0MDpbWzQwLDIwMDYxLDQxXSwyNTZdLDEyODQxOltbNDAsMjEzMTMsNDFdLDI1Nl0sMTI4NDI6W1s0MCwyNjM3Niw0MV0sMjU2XSwxMjg0MzpbWzQwLDI4Nzc5LDQxXSwyNTZdLDEyODQ0OltbNDAsMjc3MDAsNDFdLDI1Nl0sMTI4NDU6W1s0MCwyNjQwOCw0MV0sMjU2XSwxMjg0NjpbWzQwLDM3MzI5LDQxXSwyNTZdLDEyODQ3OltbNDAsMjIzMDMsNDFdLDI1Nl0sMTI4NDg6W1s0MCwyNjA4NSw0MV0sMjU2XSwxMjg0OTpbWzQwLDI2NjY2LDQxXSwyNTZdLDEyODUwOltbNDAsMjYzNzcsNDFdLDI1Nl0sMTI4NTE6W1s0MCwzMTAzOCw0MV0sMjU2XSwxMjg1MjpbWzQwLDIxNTE3LDQxXSwyNTZdLDEyODUzOltbNDAsMjkzMDUsNDFdLDI1Nl0sMTI4NTQ6W1s0MCwzNjAwMSw0MV0sMjU2XSwxMjg1NTpbWzQwLDMxMDY5LDQxXSwyNTZdLDEyODU2OltbNDAsMjExNzIsNDFdLDI1Nl0sMTI4NTc6W1s0MCwyMDE5NSw0MV0sMjU2XSwxMjg1ODpbWzQwLDIxNjI4LDQxXSwyNTZdLDEyODU5OltbNDAsMjMzOTgsNDFdLDI1Nl0sMTI4NjA6W1s0MCwzMDQzNSw0MV0sMjU2XSwxMjg2MTpbWzQwLDIwMjI1LDQxXSwyNTZdLDEyODYyOltbNDAsMzYwMzksNDFdLDI1Nl0sMTI4NjM6W1s0MCwyMTMzMiw0MV0sMjU2XSwxMjg2NDpbWzQwLDMxMDg1LDQxXSwyNTZdLDEyODY1OltbNDAsMjAyNDEsNDFdLDI1Nl0sMTI4NjY6W1s0MCwzMzI1OCw0MV0sMjU2XSwxMjg2NzpbWzQwLDMzMjY3LDQxXSwyNTZdLDEyODY4OltbMjE4MzldLDI1Nl0sMTI4Njk6W1syNDE4OF0sMjU2XSwxMjg3MDpbWzI1OTkxXSwyNTZdLDEyODcxOltbMzE2MzFdLDI1Nl0sMTI4ODA6W1s4MCw4NCw2OV0sMjU2XSwxMjg4MTpbWzUwLDQ5XSwyNTZdLDEyODgyOltbNTAsNTBdLDI1Nl0sMTI4ODM6W1s1MCw1MV0sMjU2XSwxMjg4NDpbWzUwLDUyXSwyNTZdLDEyODg1OltbNTAsNTNdLDI1Nl0sMTI4ODY6W1s1MCw1NF0sMjU2XSwxMjg4NzpbWzUwLDU1XSwyNTZdLDEyODg4OltbNTAsNTZdLDI1Nl0sMTI4ODk6W1s1MCw1N10sMjU2XSwxMjg5MDpbWzUxLDQ4XSwyNTZdLDEyODkxOltbNTEsNDldLDI1Nl0sMTI4OTI6W1s1MSw1MF0sMjU2XSwxMjg5MzpbWzUxLDUxXSwyNTZdLDEyODk0OltbNTEsNTJdLDI1Nl0sMTI4OTU6W1s1MSw1M10sMjU2XSwxMjg5NjpbWzQzNTJdLDI1Nl0sMTI4OTc6W1s0MzU0XSwyNTZdLDEyODk4OltbNDM1NV0sMjU2XSwxMjg5OTpbWzQzNTddLDI1Nl0sMTI5MDA6W1s0MzU4XSwyNTZdLDEyOTAxOltbNDM1OV0sMjU2XSwxMjkwMjpbWzQzNjFdLDI1Nl0sMTI5MDM6W1s0MzYzXSwyNTZdLDEyOTA0OltbNDM2NF0sMjU2XSwxMjkwNTpbWzQzNjZdLDI1Nl0sMTI5MDY6W1s0MzY3XSwyNTZdLDEyOTA3OltbNDM2OF0sMjU2XSwxMjkwODpbWzQzNjldLDI1Nl0sMTI5MDk6W1s0MzcwXSwyNTZdLDEyOTEwOltbNDM1Miw0NDQ5XSwyNTZdLDEyOTExOltbNDM1NCw0NDQ5XSwyNTZdLDEyOTEyOltbNDM1NSw0NDQ5XSwyNTZdLDEyOTEzOltbNDM1Nyw0NDQ5XSwyNTZdLDEyOTE0OltbNDM1OCw0NDQ5XSwyNTZdLDEyOTE1OltbNDM1OSw0NDQ5XSwyNTZdLDEyOTE2OltbNDM2MSw0NDQ5XSwyNTZdLDEyOTE3OltbNDM2Myw0NDQ5XSwyNTZdLDEyOTE4OltbNDM2NCw0NDQ5XSwyNTZdLDEyOTE5OltbNDM2Niw0NDQ5XSwyNTZdLDEyOTIwOltbNDM2Nyw0NDQ5XSwyNTZdLDEyOTIxOltbNDM2OCw0NDQ5XSwyNTZdLDEyOTIyOltbNDM2OSw0NDQ5XSwyNTZdLDEyOTIzOltbNDM3MCw0NDQ5XSwyNTZdLDEyOTI0OltbNDM2Niw0NDQ5LDQ1MzUsNDM1Miw0NDU3XSwyNTZdLDEyOTI1OltbNDM2NCw0NDYyLDQzNjMsNDQ2OF0sMjU2XSwxMjkyNjpbWzQzNjMsNDQ2Ml0sMjU2XSwxMjkyODpbWzE5OTY4XSwyNTZdLDEyOTI5OltbMjAxMDhdLDI1Nl0sMTI5MzA6W1sxOTk3N10sMjU2XSwxMjkzMTpbWzIyMjM1XSwyNTZdLDEyOTMyOltbMjAxMTZdLDI1Nl0sMTI5MzM6W1syMDg0NV0sMjU2XSwxMjkzNDpbWzE5OTcxXSwyNTZdLDEyOTM1OltbMjA4NDNdLDI1Nl0sMTI5MzY6W1syMDA2MV0sMjU2XSwxMjkzNzpbWzIxMzEzXSwyNTZdLDEyOTM4OltbMjYzNzZdLDI1Nl0sMTI5Mzk6W1syODc3OV0sMjU2XSwxMjk0MDpbWzI3NzAwXSwyNTZdLDEyOTQxOltbMjY0MDhdLDI1Nl0sMTI5NDI6W1szNzMyOV0sMjU2XSwxMjk0MzpbWzIyMzAzXSwyNTZdLDEyOTQ0OltbMjYwODVdLDI1Nl0sMTI5NDU6W1syNjY2Nl0sMjU2XSwxMjk0NjpbWzI2Mzc3XSwyNTZdLDEyOTQ3OltbMzEwMzhdLDI1Nl0sMTI5NDg6W1syMTUxN10sMjU2XSwxMjk0OTpbWzI5MzA1XSwyNTZdLDEyOTUwOltbMzYwMDFdLDI1Nl0sMTI5NTE6W1szMTA2OV0sMjU2XSwxMjk1MjpbWzIxMTcyXSwyNTZdLDEyOTUzOltbMzExOTJdLDI1Nl0sMTI5NTQ6W1szMDAwN10sMjU2XSwxMjk1NTpbWzIyODk5XSwyNTZdLDEyOTU2OltbMzY5NjldLDI1Nl0sMTI5NTc6W1syMDc3OF0sMjU2XSwxMjk1ODpbWzIxMzYwXSwyNTZdLDEyOTU5OltbMjc4ODBdLDI1Nl0sMTI5NjA6W1szODkxN10sMjU2XSwxMjk2MTpbWzIwMjQxXSwyNTZdLDEyOTYyOltbMjA4ODldLDI1Nl0sMTI5NjM6W1syNzQ5MV0sMjU2XSwxMjk2NDpbWzE5OTc4XSwyNTZdLDEyOTY1OltbMjAwMTNdLDI1Nl0sMTI5NjY6W1sxOTk3OV0sMjU2XSwxMjk2NzpbWzI0MDM4XSwyNTZdLDEyOTY4OltbMjE0OTFdLDI1Nl0sMTI5Njk6W1syMTMwN10sMjU2XSwxMjk3MDpbWzIzNDQ3XSwyNTZdLDEyOTcxOltbMjMzOThdLDI1Nl0sMTI5NzI6W1szMDQzNV0sMjU2XSwxMjk3MzpbWzIwMjI1XSwyNTZdLDEyOTc0OltbMzYwMzldLDI1Nl0sMTI5NzU6W1syMTMzMl0sMjU2XSwxMjk3NjpbWzIyODEyXSwyNTZdLDEyOTc3OltbNTEsNTRdLDI1Nl0sMTI5Nzg6W1s1MSw1NV0sMjU2XSwxMjk3OTpbWzUxLDU2XSwyNTZdLDEyOTgwOltbNTEsNTddLDI1Nl0sMTI5ODE6W1s1Miw0OF0sMjU2XSwxMjk4MjpbWzUyLDQ5XSwyNTZdLDEyOTgzOltbNTIsNTBdLDI1Nl0sMTI5ODQ6W1s1Miw1MV0sMjU2XSwxMjk4NTpbWzUyLDUyXSwyNTZdLDEyOTg2OltbNTIsNTNdLDI1Nl0sMTI5ODc6W1s1Miw1NF0sMjU2XSwxMjk4ODpbWzUyLDU1XSwyNTZdLDEyOTg5OltbNTIsNTZdLDI1Nl0sMTI5OTA6W1s1Miw1N10sMjU2XSwxMjk5MTpbWzUzLDQ4XSwyNTZdLDEyOTkyOltbNDksMjYzNzZdLDI1Nl0sMTI5OTM6W1s1MCwyNjM3Nl0sMjU2XSwxMjk5NDpbWzUxLDI2Mzc2XSwyNTZdLDEyOTk1OltbNTIsMjYzNzZdLDI1Nl0sMTI5OTY6W1s1MywyNjM3Nl0sMjU2XSwxMjk5NzpbWzU0LDI2Mzc2XSwyNTZdLDEyOTk4OltbNTUsMjYzNzZdLDI1Nl0sMTI5OTk6W1s1NiwyNjM3Nl0sMjU2XSwxMzAwMDpbWzU3LDI2Mzc2XSwyNTZdLDEzMDAxOltbNDksNDgsMjYzNzZdLDI1Nl0sMTMwMDI6W1s0OSw0OSwyNjM3Nl0sMjU2XSwxMzAwMzpbWzQ5LDUwLDI2Mzc2XSwyNTZdLDEzMDA0OltbNzIsMTAzXSwyNTZdLDEzMDA1OltbMTAxLDExNCwxMDNdLDI1Nl0sMTMwMDY6W1sxMDEsODZdLDI1Nl0sMTMwMDc6W1s3Niw4NCw2OF0sMjU2XSwxMzAwODpbWzEyNDUwXSwyNTZdLDEzMDA5OltbMTI0NTJdLDI1Nl0sMTMwMTA6W1sxMjQ1NF0sMjU2XSwxMzAxMTpbWzEyNDU2XSwyNTZdLDEzMDEyOltbMTI0NThdLDI1Nl0sMTMwMTM6W1sxMjQ1OV0sMjU2XSwxMzAxNDpbWzEyNDYxXSwyNTZdLDEzMDE1OltbMTI0NjNdLDI1Nl0sMTMwMTY6W1sxMjQ2NV0sMjU2XSwxMzAxNzpbWzEyNDY3XSwyNTZdLDEzMDE4OltbMTI0NjldLDI1Nl0sMTMwMTk6W1sxMjQ3MV0sMjU2XSwxMzAyMDpbWzEyNDczXSwyNTZdLDEzMDIxOltbMTI0NzVdLDI1Nl0sMTMwMjI6W1sxMjQ3N10sMjU2XSwxMzAyMzpbWzEyNDc5XSwyNTZdLDEzMDI0OltbMTI0ODFdLDI1Nl0sMTMwMjU6W1sxMjQ4NF0sMjU2XSwxMzAyNjpbWzEyNDg2XSwyNTZdLDEzMDI3OltbMTI0ODhdLDI1Nl0sMTMwMjg6W1sxMjQ5MF0sMjU2XSwxMzAyOTpbWzEyNDkxXSwyNTZdLDEzMDMwOltbMTI0OTJdLDI1Nl0sMTMwMzE6W1sxMjQ5M10sMjU2XSwxMzAzMjpbWzEyNDk0XSwyNTZdLDEzMDMzOltbMTI0OTVdLDI1Nl0sMTMwMzQ6W1sxMjQ5OF0sMjU2XSwxMzAzNTpbWzEyNTAxXSwyNTZdLDEzMDM2OltbMTI1MDRdLDI1Nl0sMTMwMzc6W1sxMjUwN10sMjU2XSwxMzAzODpbWzEyNTEwXSwyNTZdLDEzMDM5OltbMTI1MTFdLDI1Nl0sMTMwNDA6W1sxMjUxMl0sMjU2XSwxMzA0MTpbWzEyNTEzXSwyNTZdLDEzMDQyOltbMTI1MTRdLDI1Nl0sMTMwNDM6W1sxMjUxNl0sMjU2XSwxMzA0NDpbWzEyNTE4XSwyNTZdLDEzMDQ1OltbMTI1MjBdLDI1Nl0sMTMwNDY6W1sxMjUyMV0sMjU2XSwxMzA0NzpbWzEyNTIyXSwyNTZdLDEzMDQ4OltbMTI1MjNdLDI1Nl0sMTMwNDk6W1sxMjUyNF0sMjU2XSwxMzA1MDpbWzEyNTI1XSwyNTZdLDEzMDUxOltbMTI1MjddLDI1Nl0sMTMwNTI6W1sxMjUyOF0sMjU2XSwxMzA1MzpbWzEyNTI5XSwyNTZdLDEzMDU0OltbMTI1MzBdLDI1Nl19LAoxMzA1Njp7MTMwNTY6W1sxMjQ1MCwxMjQ5NywxMjU0MCwxMjQ4OF0sMjU2XSwxMzA1NzpbWzEyNDUwLDEyNTIzLDEyNTAxLDEyNDQ5XSwyNTZdLDEzMDU4OltbMTI0NTAsMTI1MzEsMTI1MDYsMTI0NTBdLDI1Nl0sMTMwNTk6W1sxMjQ1MCwxMjU0MCwxMjUyM10sMjU2XSwxMzA2MDpbWzEyNDUyLDEyNDkxLDEyNTMxLDEyNDY0XSwyNTZdLDEzMDYxOltbMTI0NTIsMTI1MzEsMTI0ODFdLDI1Nl0sMTMwNjI6W1sxMjQ1NCwxMjQ1NywxMjUzMV0sMjU2XSwxMzA2MzpbWzEyNDU2LDEyNDczLDEyNDYzLDEyNTQwLDEyNDg5XSwyNTZdLDEzMDY0OltbMTI0NTYsMTI1NDAsMTI0NTksMTI1NDBdLDI1Nl0sMTMwNjU6W1sxMjQ1OCwxMjUzMSwxMjQ3M10sMjU2XSwxMzA2NjpbWzEyNDU4LDEyNTQwLDEyNTEyXSwyNTZdLDEzMDY3OltbMTI0NTksMTI0NTIsMTI1MjJdLDI1Nl0sMTMwNjg6W1sxMjQ1OSwxMjUyMSwxMjQ4MywxMjQ4OF0sMjU2XSwxMzA2OTpbWzEyNDU5LDEyNTI1LDEyNTIyLDEyNTQwXSwyNTZdLDEzMDcwOltbMTI0NjAsMTI1MjUsMTI1MzFdLDI1Nl0sMTMwNzE6W1sxMjQ2MCwxMjUzMSwxMjUxMF0sMjU2XSwxMzA3MjpbWzEyNDYyLDEyNDYwXSwyNTZdLDEzMDczOltbMTI0NjIsMTI0OTEsMTI1NDBdLDI1Nl0sMTMwNzQ6W1sxMjQ2MSwxMjUxNywxMjUyMiwxMjU0MF0sMjU2XSwxMzA3NTpbWzEyNDYyLDEyNTIzLDEyNDgwLDEyNTQwXSwyNTZdLDEzMDc2OltbMTI0NjEsMTI1MjVdLDI1Nl0sMTMwNzc6W1sxMjQ2MSwxMjUyNSwxMjQ2NCwxMjUyMSwxMjUxMl0sMjU2XSwxMzA3ODpbWzEyNDYxLDEyNTI1LDEyNTEzLDEyNTQwLDEyNDg4LDEyNTIzXSwyNTZdLDEzMDc5OltbMTI0NjEsMTI1MjUsMTI1MjcsMTI0ODMsMTI0ODhdLDI1Nl0sMTMwODA6W1sxMjQ2NCwxMjUyMSwxMjUxMl0sMjU2XSwxMzA4MTpbWzEyNDY0LDEyNTIxLDEyNTEyLDEyNDg4LDEyNTMxXSwyNTZdLDEzMDgyOltbMTI0NjMsMTI1MjMsMTI0NzYsMTI0NTIsMTI1MjVdLDI1Nl0sMTMwODM6W1sxMjQ2MywxMjUyNSwxMjU0MCwxMjQ5M10sMjU2XSwxMzA4NDpbWzEyNDY1LDEyNTQwLDEyNDczXSwyNTZdLDEzMDg1OltbMTI0NjcsMTI1MjMsMTI0OTBdLDI1Nl0sMTMwODY6W1sxMjQ2NywxMjU0MCwxMjUwOV0sMjU2XSwxMzA4NzpbWzEyNDY5LDEyNDUyLDEyNDYzLDEyNTIzXSwyNTZdLDEzMDg4OltbMTI0NjksMTI1MzEsMTI0ODEsMTI1NDAsMTI1MTJdLDI1Nl0sMTMwODk6W1sxMjQ3MSwxMjUyMiwxMjUzMSwxMjQ2NF0sMjU2XSwxMzA5MDpbWzEyNDc1LDEyNTMxLDEyNDgxXSwyNTZdLDEzMDkxOltbMTI0NzUsMTI1MzEsMTI0ODhdLDI1Nl0sMTMwOTI6W1sxMjQ4MCwxMjU0MCwxMjQ3M10sMjU2XSwxMzA5MzpbWzEyNDg3LDEyNDcxXSwyNTZdLDEzMDk0OltbMTI0ODksMTI1MjNdLDI1Nl0sMTMwOTU6W1sxMjQ4OCwxMjUzMV0sMjU2XSwxMzA5NjpbWzEyNDkwLDEyNDk0XSwyNTZdLDEzMDk3OltbMTI0OTQsMTI0ODMsMTI0ODhdLDI1Nl0sMTMwOTg6W1sxMjQ5NSwxMjQ1MiwxMjQ4NF0sMjU2XSwxMzA5OTpbWzEyNDk3LDEyNTQwLDEyNDc1LDEyNTMxLDEyNDg4XSwyNTZdLDEzMTAwOltbMTI0OTcsMTI1NDAsMTI0ODRdLDI1Nl0sMTMxMDE6W1sxMjQ5NiwxMjU0MCwxMjUyNCwxMjUyM10sMjU2XSwxMzEwMjpbWzEyNTAwLDEyNDUwLDEyNDczLDEyNDg4LDEyNTIzXSwyNTZdLDEzMTAzOltbMTI1MDAsMTI0NjMsMTI1MjNdLDI1Nl0sMTMxMDQ6W1sxMjUwMCwxMjQ2N10sMjU2XSwxMzEwNTpbWzEyNDk5LDEyNTIzXSwyNTZdLDEzMTA2OltbMTI1MDEsMTI0NDksMTI1MjEsMTI0ODMsMTI0ODldLDI1Nl0sMTMxMDc6W1sxMjUwMSwxMjQ1MSwxMjU0MCwxMjQ4OF0sMjU2XSwxMzEwODpbWzEyNTAyLDEyNDgzLDEyNDcxLDEyNDU1LDEyNTIzXSwyNTZdLDEzMTA5OltbMTI1MDEsMTI1MjEsMTI1MzFdLDI1Nl0sMTMxMTA6W1sxMjUwNCwxMjQ2MywxMjQ3OSwxMjU0MCwxMjUyM10sMjU2XSwxMzExMTpbWzEyNTA2LDEyNDc3XSwyNTZdLDEzMTEyOltbMTI1MDYsMTI0OTEsMTI0OThdLDI1Nl0sMTMxMTM6W1sxMjUwNCwxMjUyMywxMjQ4NF0sMjU2XSwxMzExNDpbWzEyNTA2LDEyNTMxLDEyNDczXSwyNTZdLDEzMTE1OltbMTI1MDYsMTI1NDAsMTI0NzJdLDI1Nl0sMTMxMTY6W1sxMjUwNSwxMjU0MCwxMjQ3OV0sMjU2XSwxMzExNzpbWzEyNTA5LDEyNDUyLDEyNTMxLDEyNDg4XSwyNTZdLDEzMTE4OltbMTI1MDgsMTI1MjMsMTI0ODhdLDI1Nl0sMTMxMTk6W1sxMjUwNywxMjUzMV0sMjU2XSwxMzEyMDpbWzEyNTA5LDEyNTMxLDEyNDg5XSwyNTZdLDEzMTIxOltbMTI1MDcsMTI1NDAsMTI1MjNdLDI1Nl0sMTMxMjI6W1sxMjUwNywxMjU0MCwxMjUzMV0sMjU2XSwxMzEyMzpbWzEyNTEwLDEyNDUyLDEyNDYzLDEyNTI1XSwyNTZdLDEzMTI0OltbMTI1MTAsMTI0NTIsMTI1MjNdLDI1Nl0sMTMxMjU6W1sxMjUxMCwxMjQ4MywxMjQ5NV0sMjU2XSwxMzEyNjpbWzEyNTEwLDEyNTIzLDEyNDYzXSwyNTZdLDEzMTI3OltbMTI1MTAsMTI1MzEsMTI0NzEsMTI1MTksMTI1MzFdLDI1Nl0sMTMxMjg6W1sxMjUxMSwxMjQ2MywxMjUyNSwxMjUzMV0sMjU2XSwxMzEyOTpbWzEyNTExLDEyNTIyXSwyNTZdLDEzMTMwOltbMTI1MTEsMTI1MjIsMTI0OTYsMTI1NDAsMTI1MjNdLDI1Nl0sMTMxMzE6W1sxMjUxMywxMjQ2MF0sMjU2XSwxMzEzMjpbWzEyNTEzLDEyNDYwLDEyNDg4LDEyNTMxXSwyNTZdLDEzMTMzOltbMTI1MTMsMTI1NDAsMTI0ODgsMTI1MjNdLDI1Nl0sMTMxMzQ6W1sxMjUxNiwxMjU0MCwxMjQ4OV0sMjU2XSwxMzEzNTpbWzEyNTE2LDEyNTQwLDEyNTIzXSwyNTZdLDEzMTM2OltbMTI1MTgsMTI0NTAsMTI1MzFdLDI1Nl0sMTMxMzc6W1sxMjUyMiwxMjQ4MywxMjQ4OCwxMjUyM10sMjU2XSwxMzEzODpbWzEyNTIyLDEyNTIxXSwyNTZdLDEzMTM5OltbMTI1MjMsMTI1MDAsMTI1NDBdLDI1Nl0sMTMxNDA6W1sxMjUyMywxMjU0MCwxMjUwMiwxMjUyM10sMjU2XSwxMzE0MTpbWzEyNTI0LDEyNTEyXSwyNTZdLDEzMTQyOltbMTI1MjQsMTI1MzEsMTI0ODgsMTI0NjYsMTI1MzFdLDI1Nl0sMTMxNDM6W1sxMjUyNywxMjQ4MywxMjQ4OF0sMjU2XSwxMzE0NDpbWzQ4LDI4ODU3XSwyNTZdLDEzMTQ1OltbNDksMjg4NTddLDI1Nl0sMTMxNDY6W1s1MCwyODg1N10sMjU2XSwxMzE0NzpbWzUxLDI4ODU3XSwyNTZdLDEzMTQ4OltbNTIsMjg4NTddLDI1Nl0sMTMxNDk6W1s1MywyODg1N10sMjU2XSwxMzE1MDpbWzU0LDI4ODU3XSwyNTZdLDEzMTUxOltbNTUsMjg4NTddLDI1Nl0sMTMxNTI6W1s1NiwyODg1N10sMjU2XSwxMzE1MzpbWzU3LDI4ODU3XSwyNTZdLDEzMTU0OltbNDksNDgsMjg4NTddLDI1Nl0sMTMxNTU6W1s0OSw0OSwyODg1N10sMjU2XSwxMzE1NjpbWzQ5LDUwLDI4ODU3XSwyNTZdLDEzMTU3OltbNDksNTEsMjg4NTddLDI1Nl0sMTMxNTg6W1s0OSw1MiwyODg1N10sMjU2XSwxMzE1OTpbWzQ5LDUzLDI4ODU3XSwyNTZdLDEzMTYwOltbNDksNTQsMjg4NTddLDI1Nl0sMTMxNjE6W1s0OSw1NSwyODg1N10sMjU2XSwxMzE2MjpbWzQ5LDU2LDI4ODU3XSwyNTZdLDEzMTYzOltbNDksNTcsMjg4NTddLDI1Nl0sMTMxNjQ6W1s1MCw0OCwyODg1N10sMjU2XSwxMzE2NTpbWzUwLDQ5LDI4ODU3XSwyNTZdLDEzMTY2OltbNTAsNTAsMjg4NTddLDI1Nl0sMTMxNjc6W1s1MCw1MSwyODg1N10sMjU2XSwxMzE2ODpbWzUwLDUyLDI4ODU3XSwyNTZdLDEzMTY5OltbMTA0LDgwLDk3XSwyNTZdLDEzMTcwOltbMTAwLDk3XSwyNTZdLDEzMTcxOltbNjUsODVdLDI1Nl0sMTMxNzI6W1s5OCw5NywxMTRdLDI1Nl0sMTMxNzM6W1sxMTEsODZdLDI1Nl0sMTMxNzQ6W1sxMTIsOTldLDI1Nl0sMTMxNzU6W1sxMDAsMTA5XSwyNTZdLDEzMTc2OltbMTAwLDEwOSwxNzhdLDI1Nl0sMTMxNzc6W1sxMDAsMTA5LDE3OV0sMjU2XSwxMzE3ODpbWzczLDg1XSwyNTZdLDEzMTc5OltbMjQxNzksMjUxMDRdLDI1Nl0sMTMxODA6W1syNjE1NywyMTY0NF0sMjU2XSwxMzE4MTpbWzIyODIzLDI3NDkxXSwyNTZdLDEzMTgyOltbMjYxMjYsMjc4MzVdLDI1Nl0sMTMxODM6W1syNjY2NiwyNDMzNSwyMDI1MCwzMTAzOF0sMjU2XSwxMzE4NDpbWzExMiw2NV0sMjU2XSwxMzE4NTpbWzExMCw2NV0sMjU2XSwxMzE4NjpbWzk1Niw2NV0sMjU2XSwxMzE4NzpbWzEwOSw2NV0sMjU2XSwxMzE4ODpbWzEwNyw2NV0sMjU2XSwxMzE4OTpbWzc1LDY2XSwyNTZdLDEzMTkwOltbNzcsNjZdLDI1Nl0sMTMxOTE6W1s3MSw2Nl0sMjU2XSwxMzE5MjpbWzk5LDk3LDEwOF0sMjU2XSwxMzE5MzpbWzEwNyw5OSw5NywxMDhdLDI1Nl0sMTMxOTQ6W1sxMTIsNzBdLDI1Nl0sMTMxOTU6W1sxMTAsNzBdLDI1Nl0sMTMxOTY6W1s5NTYsNzBdLDI1Nl0sMTMxOTc6W1s5NTYsMTAzXSwyNTZdLDEzMTk4OltbMTA5LDEwM10sMjU2XSwxMzE5OTpbWzEwNywxMDNdLDI1Nl0sMTMyMDA6W1s3MiwxMjJdLDI1Nl0sMTMyMDE6W1sxMDcsNzIsMTIyXSwyNTZdLDEzMjAyOltbNzcsNzIsMTIyXSwyNTZdLDEzMjAzOltbNzEsNzIsMTIyXSwyNTZdLDEzMjA0OltbODQsNzIsMTIyXSwyNTZdLDEzMjA1OltbOTU2LDg0NjddLDI1Nl0sMTMyMDY6W1sxMDksODQ2N10sMjU2XSwxMzIwNzpbWzEwMCw4NDY3XSwyNTZdLDEzMjA4OltbMTA3LDg0NjddLDI1Nl0sMTMyMDk6W1sxMDIsMTA5XSwyNTZdLDEzMjEwOltbMTEwLDEwOV0sMjU2XSwxMzIxMTpbWzk1NiwxMDldLDI1Nl0sMTMyMTI6W1sxMDksMTA5XSwyNTZdLDEzMjEzOltbOTksMTA5XSwyNTZdLDEzMjE0OltbMTA3LDEwOV0sMjU2XSwxMzIxNTpbWzEwOSwxMDksMTc4XSwyNTZdLDEzMjE2OltbOTksMTA5LDE3OF0sMjU2XSwxMzIxNzpbWzEwOSwxNzhdLDI1Nl0sMTMyMTg6W1sxMDcsMTA5LDE3OF0sMjU2XSwxMzIxOTpbWzEwOSwxMDksMTc5XSwyNTZdLDEzMjIwOltbOTksMTA5LDE3OV0sMjU2XSwxMzIyMTpbWzEwOSwxNzldLDI1Nl0sMTMyMjI6W1sxMDcsMTA5LDE3OV0sMjU2XSwxMzIyMzpbWzEwOSw4NzI1LDExNV0sMjU2XSwxMzIyNDpbWzEwOSw4NzI1LDExNSwxNzhdLDI1Nl0sMTMyMjU6W1s4MCw5N10sMjU2XSwxMzIyNjpbWzEwNyw4MCw5N10sMjU2XSwxMzIyNzpbWzc3LDgwLDk3XSwyNTZdLDEzMjI4OltbNzEsODAsOTddLDI1Nl0sMTMyMjk6W1sxMTQsOTcsMTAwXSwyNTZdLDEzMjMwOltbMTE0LDk3LDEwMCw4NzI1LDExNV0sMjU2XSwxMzIzMTpbWzExNCw5NywxMDAsODcyNSwxMTUsMTc4XSwyNTZdLDEzMjMyOltbMTEyLDExNV0sMjU2XSwxMzIzMzpbWzExMCwxMTVdLDI1Nl0sMTMyMzQ6W1s5NTYsMTE1XSwyNTZdLDEzMjM1OltbMTA5LDExNV0sMjU2XSwxMzIzNjpbWzExMiw4Nl0sMjU2XSwxMzIzNzpbWzExMCw4Nl0sMjU2XSwxMzIzODpbWzk1Niw4Nl0sMjU2XSwxMzIzOTpbWzEwOSw4Nl0sMjU2XSwxMzI0MDpbWzEwNyw4Nl0sMjU2XSwxMzI0MTpbWzc3LDg2XSwyNTZdLDEzMjQyOltbMTEyLDg3XSwyNTZdLDEzMjQzOltbMTEwLDg3XSwyNTZdLDEzMjQ0OltbOTU2LDg3XSwyNTZdLDEzMjQ1OltbMTA5LDg3XSwyNTZdLDEzMjQ2OltbMTA3LDg3XSwyNTZdLDEzMjQ3OltbNzcsODddLDI1Nl0sMTMyNDg6W1sxMDcsOTM3XSwyNTZdLDEzMjQ5OltbNzcsOTM3XSwyNTZdLDEzMjUwOltbOTcsNDYsMTA5LDQ2XSwyNTZdLDEzMjUxOltbNjYsMTEzXSwyNTZdLDEzMjUyOltbOTksOTldLDI1Nl0sMTMyNTM6W1s5OSwxMDBdLDI1Nl0sMTMyNTQ6W1s2Nyw4NzI1LDEwNywxMDNdLDI1Nl0sMTMyNTU6W1s2NywxMTEsNDZdLDI1Nl0sMTMyNTY6W1sxMDAsNjZdLDI1Nl0sMTMyNTc6W1s3MSwxMjFdLDI1Nl0sMTMyNTg6W1sxMDQsOTddLDI1Nl0sMTMyNTk6W1s3Miw4MF0sMjU2XSwxMzI2MDpbWzEwNSwxMTBdLDI1Nl0sMTMyNjE6W1s3NSw3NV0sMjU2XSwxMzI2MjpbWzc1LDc3XSwyNTZdLDEzMjYzOltbMTA3LDExNl0sMjU2XSwxMzI2NDpbWzEwOCwxMDldLDI1Nl0sMTMyNjU6W1sxMDgsMTEwXSwyNTZdLDEzMjY2OltbMTA4LDExMSwxMDNdLDI1Nl0sMTMyNjc6W1sxMDgsMTIwXSwyNTZdLDEzMjY4OltbMTA5LDk4XSwyNTZdLDEzMjY5OltbMTA5LDEwNSwxMDhdLDI1Nl0sMTMyNzA6W1sxMDksMTExLDEwOF0sMjU2XSwxMzI3MTpbWzgwLDcyXSwyNTZdLDEzMjcyOltbMTEyLDQ2LDEwOSw0Nl0sMjU2XSwxMzI3MzpbWzgwLDgwLDc3XSwyNTZdLDEzMjc0OltbODAsODJdLDI1Nl0sMTMyNzU6W1sxMTUsMTE0XSwyNTZdLDEzMjc2OltbODMsMTE4XSwyNTZdLDEzMjc3OltbODcsOThdLDI1Nl0sMTMyNzg6W1s4Niw4NzI1LDEwOV0sMjU2XSwxMzI3OTpbWzY1LDg3MjUsMTA5XSwyNTZdLDEzMjgwOltbNDksMjYwODVdLDI1Nl0sMTMyODE6W1s1MCwyNjA4NV0sMjU2XSwxMzI4MjpbWzUxLDI2MDg1XSwyNTZdLDEzMjgzOltbNTIsMjYwODVdLDI1Nl0sMTMyODQ6W1s1MywyNjA4NV0sMjU2XSwxMzI4NTpbWzU0LDI2MDg1XSwyNTZdLDEzMjg2OltbNTUsMjYwODVdLDI1Nl0sMTMyODc6W1s1NiwyNjA4NV0sMjU2XSwxMzI4ODpbWzU3LDI2MDg1XSwyNTZdLDEzMjg5OltbNDksNDgsMjYwODVdLDI1Nl0sMTMyOTA6W1s0OSw0OSwyNjA4NV0sMjU2XSwxMzI5MTpbWzQ5LDUwLDI2MDg1XSwyNTZdLDEzMjkyOltbNDksNTEsMjYwODVdLDI1Nl0sMTMyOTM6W1s0OSw1MiwyNjA4NV0sMjU2XSwxMzI5NDpbWzQ5LDUzLDI2MDg1XSwyNTZdLDEzMjk1OltbNDksNTQsMjYwODVdLDI1Nl0sMTMyOTY6W1s0OSw1NSwyNjA4NV0sMjU2XSwxMzI5NzpbWzQ5LDU2LDI2MDg1XSwyNTZdLDEzMjk4OltbNDksNTcsMjYwODVdLDI1Nl0sMTMyOTk6W1s1MCw0OCwyNjA4NV0sMjU2XSwxMzMwMDpbWzUwLDQ5LDI2MDg1XSwyNTZdLDEzMzAxOltbNTAsNTAsMjYwODVdLDI1Nl0sMTMzMDI6W1s1MCw1MSwyNjA4NV0sMjU2XSwxMzMwMzpbWzUwLDUyLDI2MDg1XSwyNTZdLDEzMzA0OltbNTAsNTMsMjYwODVdLDI1Nl0sMTMzMDU6W1s1MCw1NCwyNjA4NV0sMjU2XSwxMzMwNjpbWzUwLDU1LDI2MDg1XSwyNTZdLDEzMzA3OltbNTAsNTYsMjYwODVdLDI1Nl0sMTMzMDg6W1s1MCw1NywyNjA4NV0sMjU2XSwxMzMwOTpbWzUxLDQ4LDI2MDg1XSwyNTZdLDEzMzEwOltbNTEsNDksMjYwODVdLDI1Nl0sMTMzMTE6W1sxMDMsOTcsMTA4XSwyNTZdfSwKMjcxMzY6ezkyOTEyOlssMV0sOTI5MTM6WywxXSw5MjkxNDpbLDFdLDkyOTE1OlssMV0sOTI5MTY6WywxXX0sCjI3MzkyOns5Mjk3NjpbLDIzMF0sOTI5Nzc6WywyMzBdLDkyOTc4OlssMjMwXSw5Mjk3OTpbLDIzMF0sOTI5ODA6WywyMzBdLDkyOTgxOlssMjMwXSw5Mjk4MjpbLDIzMF19LAo0MjQ5Njp7NDI2MDc6WywyMzBdLDQyNjEyOlssMjMwXSw0MjYxMzpbLDIzMF0sNDI2MTQ6WywyMzBdLDQyNjE1OlssMjMwXSw0MjYxNjpbLDIzMF0sNDI2MTc6WywyMzBdLDQyNjE4OlssMjMwXSw0MjYxOTpbLDIzMF0sNDI2MjA6WywyMzBdLDQyNjIxOlssMjMwXSw0MjY1MjpbWzEwOThdLDI1Nl0sNDI2NTM6W1sxMTAwXSwyNTZdLDQyNjU1OlssMjMwXSw0MjczNjpbLDIzMF0sNDI3Mzc6WywyMzBdfSwKNDI3NTI6ezQyODY0OltbNDI4NjNdLDI1Nl0sNDMwMDA6W1syOTRdLDI1Nl0sNDMwMDE6W1szMzldLDI1Nl19LAo0MzAwODp7NDMwMTQ6Wyw5XSw0MzIwNDpbLDldLDQzMjMyOlssMjMwXSw0MzIzMzpbLDIzMF0sNDMyMzQ6WywyMzBdLDQzMjM1OlssMjMwXSw0MzIzNjpbLDIzMF0sNDMyMzc6WywyMzBdLDQzMjM4OlssMjMwXSw0MzIzOTpbLDIzMF0sNDMyNDA6WywyMzBdLDQzMjQxOlssMjMwXSw0MzI0MjpbLDIzMF0sNDMyNDM6WywyMzBdLDQzMjQ0OlssMjMwXSw0MzI0NTpbLDIzMF0sNDMyNDY6WywyMzBdLDQzMjQ3OlssMjMwXSw0MzI0ODpbLDIzMF0sNDMyNDk6WywyMzBdfSwKNDMyNjQ6ezQzMzA3OlssMjIwXSw0MzMwODpbLDIyMF0sNDMzMDk6WywyMjBdLDQzMzQ3OlssOV0sNDM0NDM6Wyw3XSw0MzQ1NjpbLDldfSwKNDM1MjA6ezQzNjk2OlssMjMwXSw0MzY5ODpbLDIzMF0sNDM2OTk6WywyMzBdLDQzNzAwOlssMjIwXSw0MzcwMzpbLDIzMF0sNDM3MDQ6WywyMzBdLDQzNzEwOlssMjMwXSw0MzcxMTpbLDIzMF0sNDM3MTM6WywyMzBdLDQzNzY2OlssOV19LAo0Mzc3Njp7NDM4Njg6W1s0Mjc5MV0sMjU2XSw0Mzg2OTpbWzQzODMxXSwyNTZdLDQzODcwOltbNjE5XSwyNTZdLDQzODcxOltbNDM4NThdLDI1Nl0sNDQwMTM6Wyw5XX0sCjQ4MTI4OnsxMTM4MjI6WywxXX0sCjUzNTA0OnsxMTkxMzQ6W1sxMTkxMjcsMTE5MTQxXSw1MTJdLDExOTEzNTpbWzExOTEyOCwxMTkxNDFdLDUxMl0sMTE5MTM2OltbMTE5MTM1LDExOTE1MF0sNTEyXSwxMTkxMzc6W1sxMTkxMzUsMTE5MTUxXSw1MTJdLDExOTEzODpbWzExOTEzNSwxMTkxNTJdLDUxMl0sMTE5MTM5OltbMTE5MTM1LDExOTE1M10sNTEyXSwxMTkxNDA6W1sxMTkxMzUsMTE5MTU0XSw1MTJdLDExOTE0MTpbLDIxNl0sMTE5MTQyOlssMjE2XSwxMTkxNDM6WywxXSwxMTkxNDQ6WywxXSwxMTkxNDU6WywxXSwxMTkxNDk6WywyMjZdLDExOTE1MDpbLDIxNl0sMTE5MTUxOlssMjE2XSwxMTkxNTI6WywyMTZdLDExOTE1MzpbLDIxNl0sMTE5MTU0OlssMjE2XSwxMTkxNjM6WywyMjBdLDExOTE2NDpbLDIyMF0sMTE5MTY1OlssMjIwXSwxMTkxNjY6WywyMjBdLDExOTE2NzpbLDIyMF0sMTE5MTY4OlssMjIwXSwxMTkxNjk6WywyMjBdLDExOTE3MDpbLDIyMF0sMTE5MTczOlssMjMwXSwxMTkxNzQ6WywyMzBdLDExOTE3NTpbLDIzMF0sMTE5MTc2OlssMjMwXSwxMTkxNzc6WywyMzBdLDExOTE3ODpbLDIyMF0sMTE5MTc5OlssMjIwXSwxMTkyMTA6WywyMzBdLDExOTIxMTpbLDIzMF0sMTE5MjEyOlssMjMwXSwxMTkyMTM6WywyMzBdLDExOTIyNzpbWzExOTIyNSwxMTkxNDFdLDUxMl0sMTE5MjI4OltbMTE5MjI2LDExOTE0MV0sNTEyXSwxMTkyMjk6W1sxMTkyMjcsMTE5MTUwXSw1MTJdLDExOTIzMDpbWzExOTIyOCwxMTkxNTBdLDUxMl0sMTE5MjMxOltbMTE5MjI3LDExOTE1MV0sNTEyXSwxMTkyMzI6W1sxMTkyMjgsMTE5MTUxXSw1MTJdfSwKNTM3NjA6ezExOTM2MjpbLDIzMF0sMTE5MzYzOlssMjMwXSwxMTkzNjQ6WywyMzBdfSwKNTQyNzI6ezExOTgwODpbWzY1XSwyNTZdLDExOTgwOTpbWzY2XSwyNTZdLDExOTgxMDpbWzY3XSwyNTZdLDExOTgxMTpbWzY4XSwyNTZdLDExOTgxMjpbWzY5XSwyNTZdLDExOTgxMzpbWzcwXSwyNTZdLDExOTgxNDpbWzcxXSwyNTZdLDExOTgxNTpbWzcyXSwyNTZdLDExOTgxNjpbWzczXSwyNTZdLDExOTgxNzpbWzc0XSwyNTZdLDExOTgxODpbWzc1XSwyNTZdLDExOTgxOTpbWzc2XSwyNTZdLDExOTgyMDpbWzc3XSwyNTZdLDExOTgyMTpbWzc4XSwyNTZdLDExOTgyMjpbWzc5XSwyNTZdLDExOTgyMzpbWzgwXSwyNTZdLDExOTgyNDpbWzgxXSwyNTZdLDExOTgyNTpbWzgyXSwyNTZdLDExOTgyNjpbWzgzXSwyNTZdLDExOTgyNzpbWzg0XSwyNTZdLDExOTgyODpbWzg1XSwyNTZdLDExOTgyOTpbWzg2XSwyNTZdLDExOTgzMDpbWzg3XSwyNTZdLDExOTgzMTpbWzg4XSwyNTZdLDExOTgzMjpbWzg5XSwyNTZdLDExOTgzMzpbWzkwXSwyNTZdLDExOTgzNDpbWzk3XSwyNTZdLDExOTgzNTpbWzk4XSwyNTZdLDExOTgzNjpbWzk5XSwyNTZdLDExOTgzNzpbWzEwMF0sMjU2XSwxMTk4Mzg6W1sxMDFdLDI1Nl0sMTE5ODM5OltbMTAyXSwyNTZdLDExOTg0MDpbWzEwM10sMjU2XSwxMTk4NDE6W1sxMDRdLDI1Nl0sMTE5ODQyOltbMTA1XSwyNTZdLDExOTg0MzpbWzEwNl0sMjU2XSwxMTk4NDQ6W1sxMDddLDI1Nl0sMTE5ODQ1OltbMTA4XSwyNTZdLDExOTg0NjpbWzEwOV0sMjU2XSwxMTk4NDc6W1sxMTBdLDI1Nl0sMTE5ODQ4OltbMTExXSwyNTZdLDExOTg0OTpbWzExMl0sMjU2XSwxMTk4NTA6W1sxMTNdLDI1Nl0sMTE5ODUxOltbMTE0XSwyNTZdLDExOTg1MjpbWzExNV0sMjU2XSwxMTk4NTM6W1sxMTZdLDI1Nl0sMTE5ODU0OltbMTE3XSwyNTZdLDExOTg1NTpbWzExOF0sMjU2XSwxMTk4NTY6W1sxMTldLDI1Nl0sMTE5ODU3OltbMTIwXSwyNTZdLDExOTg1ODpbWzEyMV0sMjU2XSwxMTk4NTk6W1sxMjJdLDI1Nl0sMTE5ODYwOltbNjVdLDI1Nl0sMTE5ODYxOltbNjZdLDI1Nl0sMTE5ODYyOltbNjddLDI1Nl0sMTE5ODYzOltbNjhdLDI1Nl0sMTE5ODY0OltbNjldLDI1Nl0sMTE5ODY1OltbNzBdLDI1Nl0sMTE5ODY2OltbNzFdLDI1Nl0sMTE5ODY3OltbNzJdLDI1Nl0sMTE5ODY4OltbNzNdLDI1Nl0sMTE5ODY5OltbNzRdLDI1Nl0sMTE5ODcwOltbNzVdLDI1Nl0sMTE5ODcxOltbNzZdLDI1Nl0sMTE5ODcyOltbNzddLDI1Nl0sMTE5ODczOltbNzhdLDI1Nl0sMTE5ODc0OltbNzldLDI1Nl0sMTE5ODc1OltbODBdLDI1Nl0sMTE5ODc2OltbODFdLDI1Nl0sMTE5ODc3OltbODJdLDI1Nl0sMTE5ODc4OltbODNdLDI1Nl0sMTE5ODc5OltbODRdLDI1Nl0sMTE5ODgwOltbODVdLDI1Nl0sMTE5ODgxOltbODZdLDI1Nl0sMTE5ODgyOltbODddLDI1Nl0sMTE5ODgzOltbODhdLDI1Nl0sMTE5ODg0OltbODldLDI1Nl0sMTE5ODg1OltbOTBdLDI1Nl0sMTE5ODg2OltbOTddLDI1Nl0sMTE5ODg3OltbOThdLDI1Nl0sMTE5ODg4OltbOTldLDI1Nl0sMTE5ODg5OltbMTAwXSwyNTZdLDExOTg5MDpbWzEwMV0sMjU2XSwxMTk4OTE6W1sxMDJdLDI1Nl0sMTE5ODkyOltbMTAzXSwyNTZdLDExOTg5NDpbWzEwNV0sMjU2XSwxMTk4OTU6W1sxMDZdLDI1Nl0sMTE5ODk2OltbMTA3XSwyNTZdLDExOTg5NzpbWzEwOF0sMjU2XSwxMTk4OTg6W1sxMDldLDI1Nl0sMTE5ODk5OltbMTEwXSwyNTZdLDExOTkwMDpbWzExMV0sMjU2XSwxMTk5MDE6W1sxMTJdLDI1Nl0sMTE5OTAyOltbMTEzXSwyNTZdLDExOTkwMzpbWzExNF0sMjU2XSwxMTk5MDQ6W1sxMTVdLDI1Nl0sMTE5OTA1OltbMTE2XSwyNTZdLDExOTkwNjpbWzExN10sMjU2XSwxMTk5MDc6W1sxMThdLDI1Nl0sMTE5OTA4OltbMTE5XSwyNTZdLDExOTkwOTpbWzEyMF0sMjU2XSwxMTk5MTA6W1sxMjFdLDI1Nl0sMTE5OTExOltbMTIyXSwyNTZdLDExOTkxMjpbWzY1XSwyNTZdLDExOTkxMzpbWzY2XSwyNTZdLDExOTkxNDpbWzY3XSwyNTZdLDExOTkxNTpbWzY4XSwyNTZdLDExOTkxNjpbWzY5XSwyNTZdLDExOTkxNzpbWzcwXSwyNTZdLDExOTkxODpbWzcxXSwyNTZdLDExOTkxOTpbWzcyXSwyNTZdLDExOTkyMDpbWzczXSwyNTZdLDExOTkyMTpbWzc0XSwyNTZdLDExOTkyMjpbWzc1XSwyNTZdLDExOTkyMzpbWzc2XSwyNTZdLDExOTkyNDpbWzc3XSwyNTZdLDExOTkyNTpbWzc4XSwyNTZdLDExOTkyNjpbWzc5XSwyNTZdLDExOTkyNzpbWzgwXSwyNTZdLDExOTkyODpbWzgxXSwyNTZdLDExOTkyOTpbWzgyXSwyNTZdLDExOTkzMDpbWzgzXSwyNTZdLDExOTkzMTpbWzg0XSwyNTZdLDExOTkzMjpbWzg1XSwyNTZdLDExOTkzMzpbWzg2XSwyNTZdLDExOTkzNDpbWzg3XSwyNTZdLDExOTkzNTpbWzg4XSwyNTZdLDExOTkzNjpbWzg5XSwyNTZdLDExOTkzNzpbWzkwXSwyNTZdLDExOTkzODpbWzk3XSwyNTZdLDExOTkzOTpbWzk4XSwyNTZdLDExOTk0MDpbWzk5XSwyNTZdLDExOTk0MTpbWzEwMF0sMjU2XSwxMTk5NDI6W1sxMDFdLDI1Nl0sMTE5OTQzOltbMTAyXSwyNTZdLDExOTk0NDpbWzEwM10sMjU2XSwxMTk5NDU6W1sxMDRdLDI1Nl0sMTE5OTQ2OltbMTA1XSwyNTZdLDExOTk0NzpbWzEwNl0sMjU2XSwxMTk5NDg6W1sxMDddLDI1Nl0sMTE5OTQ5OltbMTA4XSwyNTZdLDExOTk1MDpbWzEwOV0sMjU2XSwxMTk5NTE6W1sxMTBdLDI1Nl0sMTE5OTUyOltbMTExXSwyNTZdLDExOTk1MzpbWzExMl0sMjU2XSwxMTk5NTQ6W1sxMTNdLDI1Nl0sMTE5OTU1OltbMTE0XSwyNTZdLDExOTk1NjpbWzExNV0sMjU2XSwxMTk5NTc6W1sxMTZdLDI1Nl0sMTE5OTU4OltbMTE3XSwyNTZdLDExOTk1OTpbWzExOF0sMjU2XSwxMTk5NjA6W1sxMTldLDI1Nl0sMTE5OTYxOltbMTIwXSwyNTZdLDExOTk2MjpbWzEyMV0sMjU2XSwxMTk5NjM6W1sxMjJdLDI1Nl0sMTE5OTY0OltbNjVdLDI1Nl0sMTE5OTY2OltbNjddLDI1Nl0sMTE5OTY3OltbNjhdLDI1Nl0sMTE5OTcwOltbNzFdLDI1Nl0sMTE5OTczOltbNzRdLDI1Nl0sMTE5OTc0OltbNzVdLDI1Nl0sMTE5OTc3OltbNzhdLDI1Nl0sMTE5OTc4OltbNzldLDI1Nl0sMTE5OTc5OltbODBdLDI1Nl0sMTE5OTgwOltbODFdLDI1Nl0sMTE5OTgyOltbODNdLDI1Nl0sMTE5OTgzOltbODRdLDI1Nl0sMTE5OTg0OltbODVdLDI1Nl0sMTE5OTg1OltbODZdLDI1Nl0sMTE5OTg2OltbODddLDI1Nl0sMTE5OTg3OltbODhdLDI1Nl0sMTE5OTg4OltbODldLDI1Nl0sMTE5OTg5OltbOTBdLDI1Nl0sMTE5OTkwOltbOTddLDI1Nl0sMTE5OTkxOltbOThdLDI1Nl0sMTE5OTkyOltbOTldLDI1Nl0sMTE5OTkzOltbMTAwXSwyNTZdLDExOTk5NTpbWzEwMl0sMjU2XSwxMTk5OTc6W1sxMDRdLDI1Nl0sMTE5OTk4OltbMTA1XSwyNTZdLDExOTk5OTpbWzEwNl0sMjU2XSwxMjAwMDA6W1sxMDddLDI1Nl0sMTIwMDAxOltbMTA4XSwyNTZdLDEyMDAwMjpbWzEwOV0sMjU2XSwxMjAwMDM6W1sxMTBdLDI1Nl0sMTIwMDA1OltbMTEyXSwyNTZdLDEyMDAwNjpbWzExM10sMjU2XSwxMjAwMDc6W1sxMTRdLDI1Nl0sMTIwMDA4OltbMTE1XSwyNTZdLDEyMDAwOTpbWzExNl0sMjU2XSwxMjAwMTA6W1sxMTddLDI1Nl0sMTIwMDExOltbMTE4XSwyNTZdLDEyMDAxMjpbWzExOV0sMjU2XSwxMjAwMTM6W1sxMjBdLDI1Nl0sMTIwMDE0OltbMTIxXSwyNTZdLDEyMDAxNTpbWzEyMl0sMjU2XSwxMjAwMTY6W1s2NV0sMjU2XSwxMjAwMTc6W1s2Nl0sMjU2XSwxMjAwMTg6W1s2N10sMjU2XSwxMjAwMTk6W1s2OF0sMjU2XSwxMjAwMjA6W1s2OV0sMjU2XSwxMjAwMjE6W1s3MF0sMjU2XSwxMjAwMjI6W1s3MV0sMjU2XSwxMjAwMjM6W1s3Ml0sMjU2XSwxMjAwMjQ6W1s3M10sMjU2XSwxMjAwMjU6W1s3NF0sMjU2XSwxMjAwMjY6W1s3NV0sMjU2XSwxMjAwMjc6W1s3Nl0sMjU2XSwxMjAwMjg6W1s3N10sMjU2XSwxMjAwMjk6W1s3OF0sMjU2XSwxMjAwMzA6W1s3OV0sMjU2XSwxMjAwMzE6W1s4MF0sMjU2XSwxMjAwMzI6W1s4MV0sMjU2XSwxMjAwMzM6W1s4Ml0sMjU2XSwxMjAwMzQ6W1s4M10sMjU2XSwxMjAwMzU6W1s4NF0sMjU2XSwxMjAwMzY6W1s4NV0sMjU2XSwxMjAwMzc6W1s4Nl0sMjU2XSwxMjAwMzg6W1s4N10sMjU2XSwxMjAwMzk6W1s4OF0sMjU2XSwxMjAwNDA6W1s4OV0sMjU2XSwxMjAwNDE6W1s5MF0sMjU2XSwxMjAwNDI6W1s5N10sMjU2XSwxMjAwNDM6W1s5OF0sMjU2XSwxMjAwNDQ6W1s5OV0sMjU2XSwxMjAwNDU6W1sxMDBdLDI1Nl0sMTIwMDQ2OltbMTAxXSwyNTZdLDEyMDA0NzpbWzEwMl0sMjU2XSwxMjAwNDg6W1sxMDNdLDI1Nl0sMTIwMDQ5OltbMTA0XSwyNTZdLDEyMDA1MDpbWzEwNV0sMjU2XSwxMjAwNTE6W1sxMDZdLDI1Nl0sMTIwMDUyOltbMTA3XSwyNTZdLDEyMDA1MzpbWzEwOF0sMjU2XSwxMjAwNTQ6W1sxMDldLDI1Nl0sMTIwMDU1OltbMTEwXSwyNTZdLDEyMDA1NjpbWzExMV0sMjU2XSwxMjAwNTc6W1sxMTJdLDI1Nl0sMTIwMDU4OltbMTEzXSwyNTZdLDEyMDA1OTpbWzExNF0sMjU2XSwxMjAwNjA6W1sxMTVdLDI1Nl0sMTIwMDYxOltbMTE2XSwyNTZdLDEyMDA2MjpbWzExN10sMjU2XSwxMjAwNjM6W1sxMThdLDI1Nl19LAo1NDUyODp7MTIwMDY0OltbMTE5XSwyNTZdLDEyMDA2NTpbWzEyMF0sMjU2XSwxMjAwNjY6W1sxMjFdLDI1Nl0sMTIwMDY3OltbMTIyXSwyNTZdLDEyMDA2ODpbWzY1XSwyNTZdLDEyMDA2OTpbWzY2XSwyNTZdLDEyMDA3MTpbWzY4XSwyNTZdLDEyMDA3MjpbWzY5XSwyNTZdLDEyMDA3MzpbWzcwXSwyNTZdLDEyMDA3NDpbWzcxXSwyNTZdLDEyMDA3NzpbWzc0XSwyNTZdLDEyMDA3ODpbWzc1XSwyNTZdLDEyMDA3OTpbWzc2XSwyNTZdLDEyMDA4MDpbWzc3XSwyNTZdLDEyMDA4MTpbWzc4XSwyNTZdLDEyMDA4MjpbWzc5XSwyNTZdLDEyMDA4MzpbWzgwXSwyNTZdLDEyMDA4NDpbWzgxXSwyNTZdLDEyMDA4NjpbWzgzXSwyNTZdLDEyMDA4NzpbWzg0XSwyNTZdLDEyMDA4ODpbWzg1XSwyNTZdLDEyMDA4OTpbWzg2XSwyNTZdLDEyMDA5MDpbWzg3XSwyNTZdLDEyMDA5MTpbWzg4XSwyNTZdLDEyMDA5MjpbWzg5XSwyNTZdLDEyMDA5NDpbWzk3XSwyNTZdLDEyMDA5NTpbWzk4XSwyNTZdLDEyMDA5NjpbWzk5XSwyNTZdLDEyMDA5NzpbWzEwMF0sMjU2XSwxMjAwOTg6W1sxMDFdLDI1Nl0sMTIwMDk5OltbMTAyXSwyNTZdLDEyMDEwMDpbWzEwM10sMjU2XSwxMjAxMDE6W1sxMDRdLDI1Nl0sMTIwMTAyOltbMTA1XSwyNTZdLDEyMDEwMzpbWzEwNl0sMjU2XSwxMjAxMDQ6W1sxMDddLDI1Nl0sMTIwMTA1OltbMTA4XSwyNTZdLDEyMDEwNjpbWzEwOV0sMjU2XSwxMjAxMDc6W1sxMTBdLDI1Nl0sMTIwMTA4OltbMTExXSwyNTZdLDEyMDEwOTpbWzExMl0sMjU2XSwxMjAxMTA6W1sxMTNdLDI1Nl0sMTIwMTExOltbMTE0XSwyNTZdLDEyMDExMjpbWzExNV0sMjU2XSwxMjAxMTM6W1sxMTZdLDI1Nl0sMTIwMTE0OltbMTE3XSwyNTZdLDEyMDExNTpbWzExOF0sMjU2XSwxMjAxMTY6W1sxMTldLDI1Nl0sMTIwMTE3OltbMTIwXSwyNTZdLDEyMDExODpbWzEyMV0sMjU2XSwxMjAxMTk6W1sxMjJdLDI1Nl0sMTIwMTIwOltbNjVdLDI1Nl0sMTIwMTIxOltbNjZdLDI1Nl0sMTIwMTIzOltbNjhdLDI1Nl0sMTIwMTI0OltbNjldLDI1Nl0sMTIwMTI1OltbNzBdLDI1Nl0sMTIwMTI2OltbNzFdLDI1Nl0sMTIwMTI4OltbNzNdLDI1Nl0sMTIwMTI5OltbNzRdLDI1Nl0sMTIwMTMwOltbNzVdLDI1Nl0sMTIwMTMxOltbNzZdLDI1Nl0sMTIwMTMyOltbNzddLDI1Nl0sMTIwMTM0OltbNzldLDI1Nl0sMTIwMTM4OltbODNdLDI1Nl0sMTIwMTM5OltbODRdLDI1Nl0sMTIwMTQwOltbODVdLDI1Nl0sMTIwMTQxOltbODZdLDI1Nl0sMTIwMTQyOltbODddLDI1Nl0sMTIwMTQzOltbODhdLDI1Nl0sMTIwMTQ0OltbODldLDI1Nl0sMTIwMTQ2OltbOTddLDI1Nl0sMTIwMTQ3OltbOThdLDI1Nl0sMTIwMTQ4OltbOTldLDI1Nl0sMTIwMTQ5OltbMTAwXSwyNTZdLDEyMDE1MDpbWzEwMV0sMjU2XSwxMjAxNTE6W1sxMDJdLDI1Nl0sMTIwMTUyOltbMTAzXSwyNTZdLDEyMDE1MzpbWzEwNF0sMjU2XSwxMjAxNTQ6W1sxMDVdLDI1Nl0sMTIwMTU1OltbMTA2XSwyNTZdLDEyMDE1NjpbWzEwN10sMjU2XSwxMjAxNTc6W1sxMDhdLDI1Nl0sMTIwMTU4OltbMTA5XSwyNTZdLDEyMDE1OTpbWzExMF0sMjU2XSwxMjAxNjA6W1sxMTFdLDI1Nl0sMTIwMTYxOltbMTEyXSwyNTZdLDEyMDE2MjpbWzExM10sMjU2XSwxMjAxNjM6W1sxMTRdLDI1Nl0sMTIwMTY0OltbMTE1XSwyNTZdLDEyMDE2NTpbWzExNl0sMjU2XSwxMjAxNjY6W1sxMTddLDI1Nl0sMTIwMTY3OltbMTE4XSwyNTZdLDEyMDE2ODpbWzExOV0sMjU2XSwxMjAxNjk6W1sxMjBdLDI1Nl0sMTIwMTcwOltbMTIxXSwyNTZdLDEyMDE3MTpbWzEyMl0sMjU2XSwxMjAxNzI6W1s2NV0sMjU2XSwxMjAxNzM6W1s2Nl0sMjU2XSwxMjAxNzQ6W1s2N10sMjU2XSwxMjAxNzU6W1s2OF0sMjU2XSwxMjAxNzY6W1s2OV0sMjU2XSwxMjAxNzc6W1s3MF0sMjU2XSwxMjAxNzg6W1s3MV0sMjU2XSwxMjAxNzk6W1s3Ml0sMjU2XSwxMjAxODA6W1s3M10sMjU2XSwxMjAxODE6W1s3NF0sMjU2XSwxMjAxODI6W1s3NV0sMjU2XSwxMjAxODM6W1s3Nl0sMjU2XSwxMjAxODQ6W1s3N10sMjU2XSwxMjAxODU6W1s3OF0sMjU2XSwxMjAxODY6W1s3OV0sMjU2XSwxMjAxODc6W1s4MF0sMjU2XSwxMjAxODg6W1s4MV0sMjU2XSwxMjAxODk6W1s4Ml0sMjU2XSwxMjAxOTA6W1s4M10sMjU2XSwxMjAxOTE6W1s4NF0sMjU2XSwxMjAxOTI6W1s4NV0sMjU2XSwxMjAxOTM6W1s4Nl0sMjU2XSwxMjAxOTQ6W1s4N10sMjU2XSwxMjAxOTU6W1s4OF0sMjU2XSwxMjAxOTY6W1s4OV0sMjU2XSwxMjAxOTc6W1s5MF0sMjU2XSwxMjAxOTg6W1s5N10sMjU2XSwxMjAxOTk6W1s5OF0sMjU2XSwxMjAyMDA6W1s5OV0sMjU2XSwxMjAyMDE6W1sxMDBdLDI1Nl0sMTIwMjAyOltbMTAxXSwyNTZdLDEyMDIwMzpbWzEwMl0sMjU2XSwxMjAyMDQ6W1sxMDNdLDI1Nl0sMTIwMjA1OltbMTA0XSwyNTZdLDEyMDIwNjpbWzEwNV0sMjU2XSwxMjAyMDc6W1sxMDZdLDI1Nl0sMTIwMjA4OltbMTA3XSwyNTZdLDEyMDIwOTpbWzEwOF0sMjU2XSwxMjAyMTA6W1sxMDldLDI1Nl0sMTIwMjExOltbMTEwXSwyNTZdLDEyMDIxMjpbWzExMV0sMjU2XSwxMjAyMTM6W1sxMTJdLDI1Nl0sMTIwMjE0OltbMTEzXSwyNTZdLDEyMDIxNTpbWzExNF0sMjU2XSwxMjAyMTY6W1sxMTVdLDI1Nl0sMTIwMjE3OltbMTE2XSwyNTZdLDEyMDIxODpbWzExN10sMjU2XSwxMjAyMTk6W1sxMThdLDI1Nl0sMTIwMjIwOltbMTE5XSwyNTZdLDEyMDIyMTpbWzEyMF0sMjU2XSwxMjAyMjI6W1sxMjFdLDI1Nl0sMTIwMjIzOltbMTIyXSwyNTZdLDEyMDIyNDpbWzY1XSwyNTZdLDEyMDIyNTpbWzY2XSwyNTZdLDEyMDIyNjpbWzY3XSwyNTZdLDEyMDIyNzpbWzY4XSwyNTZdLDEyMDIyODpbWzY5XSwyNTZdLDEyMDIyOTpbWzcwXSwyNTZdLDEyMDIzMDpbWzcxXSwyNTZdLDEyMDIzMTpbWzcyXSwyNTZdLDEyMDIzMjpbWzczXSwyNTZdLDEyMDIzMzpbWzc0XSwyNTZdLDEyMDIzNDpbWzc1XSwyNTZdLDEyMDIzNTpbWzc2XSwyNTZdLDEyMDIzNjpbWzc3XSwyNTZdLDEyMDIzNzpbWzc4XSwyNTZdLDEyMDIzODpbWzc5XSwyNTZdLDEyMDIzOTpbWzgwXSwyNTZdLDEyMDI0MDpbWzgxXSwyNTZdLDEyMDI0MTpbWzgyXSwyNTZdLDEyMDI0MjpbWzgzXSwyNTZdLDEyMDI0MzpbWzg0XSwyNTZdLDEyMDI0NDpbWzg1XSwyNTZdLDEyMDI0NTpbWzg2XSwyNTZdLDEyMDI0NjpbWzg3XSwyNTZdLDEyMDI0NzpbWzg4XSwyNTZdLDEyMDI0ODpbWzg5XSwyNTZdLDEyMDI0OTpbWzkwXSwyNTZdLDEyMDI1MDpbWzk3XSwyNTZdLDEyMDI1MTpbWzk4XSwyNTZdLDEyMDI1MjpbWzk5XSwyNTZdLDEyMDI1MzpbWzEwMF0sMjU2XSwxMjAyNTQ6W1sxMDFdLDI1Nl0sMTIwMjU1OltbMTAyXSwyNTZdLDEyMDI1NjpbWzEwM10sMjU2XSwxMjAyNTc6W1sxMDRdLDI1Nl0sMTIwMjU4OltbMTA1XSwyNTZdLDEyMDI1OTpbWzEwNl0sMjU2XSwxMjAyNjA6W1sxMDddLDI1Nl0sMTIwMjYxOltbMTA4XSwyNTZdLDEyMDI2MjpbWzEwOV0sMjU2XSwxMjAyNjM6W1sxMTBdLDI1Nl0sMTIwMjY0OltbMTExXSwyNTZdLDEyMDI2NTpbWzExMl0sMjU2XSwxMjAyNjY6W1sxMTNdLDI1Nl0sMTIwMjY3OltbMTE0XSwyNTZdLDEyMDI2ODpbWzExNV0sMjU2XSwxMjAyNjk6W1sxMTZdLDI1Nl0sMTIwMjcwOltbMTE3XSwyNTZdLDEyMDI3MTpbWzExOF0sMjU2XSwxMjAyNzI6W1sxMTldLDI1Nl0sMTIwMjczOltbMTIwXSwyNTZdLDEyMDI3NDpbWzEyMV0sMjU2XSwxMjAyNzU6W1sxMjJdLDI1Nl0sMTIwMjc2OltbNjVdLDI1Nl0sMTIwMjc3OltbNjZdLDI1Nl0sMTIwMjc4OltbNjddLDI1Nl0sMTIwMjc5OltbNjhdLDI1Nl0sMTIwMjgwOltbNjldLDI1Nl0sMTIwMjgxOltbNzBdLDI1Nl0sMTIwMjgyOltbNzFdLDI1Nl0sMTIwMjgzOltbNzJdLDI1Nl0sMTIwMjg0OltbNzNdLDI1Nl0sMTIwMjg1OltbNzRdLDI1Nl0sMTIwMjg2OltbNzVdLDI1Nl0sMTIwMjg3OltbNzZdLDI1Nl0sMTIwMjg4OltbNzddLDI1Nl0sMTIwMjg5OltbNzhdLDI1Nl0sMTIwMjkwOltbNzldLDI1Nl0sMTIwMjkxOltbODBdLDI1Nl0sMTIwMjkyOltbODFdLDI1Nl0sMTIwMjkzOltbODJdLDI1Nl0sMTIwMjk0OltbODNdLDI1Nl0sMTIwMjk1OltbODRdLDI1Nl0sMTIwMjk2OltbODVdLDI1Nl0sMTIwMjk3OltbODZdLDI1Nl0sMTIwMjk4OltbODddLDI1Nl0sMTIwMjk5OltbODhdLDI1Nl0sMTIwMzAwOltbODldLDI1Nl0sMTIwMzAxOltbOTBdLDI1Nl0sMTIwMzAyOltbOTddLDI1Nl0sMTIwMzAzOltbOThdLDI1Nl0sMTIwMzA0OltbOTldLDI1Nl0sMTIwMzA1OltbMTAwXSwyNTZdLDEyMDMwNjpbWzEwMV0sMjU2XSwxMjAzMDc6W1sxMDJdLDI1Nl0sMTIwMzA4OltbMTAzXSwyNTZdLDEyMDMwOTpbWzEwNF0sMjU2XSwxMjAzMTA6W1sxMDVdLDI1Nl0sMTIwMzExOltbMTA2XSwyNTZdLDEyMDMxMjpbWzEwN10sMjU2XSwxMjAzMTM6W1sxMDhdLDI1Nl0sMTIwMzE0OltbMTA5XSwyNTZdLDEyMDMxNTpbWzExMF0sMjU2XSwxMjAzMTY6W1sxMTFdLDI1Nl0sMTIwMzE3OltbMTEyXSwyNTZdLDEyMDMxODpbWzExM10sMjU2XSwxMjAzMTk6W1sxMTRdLDI1Nl19LAo1NDc4NDp7MTIwMzIwOltbMTE1XSwyNTZdLDEyMDMyMTpbWzExNl0sMjU2XSwxMjAzMjI6W1sxMTddLDI1Nl0sMTIwMzIzOltbMTE4XSwyNTZdLDEyMDMyNDpbWzExOV0sMjU2XSwxMjAzMjU6W1sxMjBdLDI1Nl0sMTIwMzI2OltbMTIxXSwyNTZdLDEyMDMyNzpbWzEyMl0sMjU2XSwxMjAzMjg6W1s2NV0sMjU2XSwxMjAzMjk6W1s2Nl0sMjU2XSwxMjAzMzA6W1s2N10sMjU2XSwxMjAzMzE6W1s2OF0sMjU2XSwxMjAzMzI6W1s2OV0sMjU2XSwxMjAzMzM6W1s3MF0sMjU2XSwxMjAzMzQ6W1s3MV0sMjU2XSwxMjAzMzU6W1s3Ml0sMjU2XSwxMjAzMzY6W1s3M10sMjU2XSwxMjAzMzc6W1s3NF0sMjU2XSwxMjAzMzg6W1s3NV0sMjU2XSwxMjAzMzk6W1s3Nl0sMjU2XSwxMjAzNDA6W1s3N10sMjU2XSwxMjAzNDE6W1s3OF0sMjU2XSwxMjAzNDI6W1s3OV0sMjU2XSwxMjAzNDM6W1s4MF0sMjU2XSwxMjAzNDQ6W1s4MV0sMjU2XSwxMjAzNDU6W1s4Ml0sMjU2XSwxMjAzNDY6W1s4M10sMjU2XSwxMjAzNDc6W1s4NF0sMjU2XSwxMjAzNDg6W1s4NV0sMjU2XSwxMjAzNDk6W1s4Nl0sMjU2XSwxMjAzNTA6W1s4N10sMjU2XSwxMjAzNTE6W1s4OF0sMjU2XSwxMjAzNTI6W1s4OV0sMjU2XSwxMjAzNTM6W1s5MF0sMjU2XSwxMjAzNTQ6W1s5N10sMjU2XSwxMjAzNTU6W1s5OF0sMjU2XSwxMjAzNTY6W1s5OV0sMjU2XSwxMjAzNTc6W1sxMDBdLDI1Nl0sMTIwMzU4OltbMTAxXSwyNTZdLDEyMDM1OTpbWzEwMl0sMjU2XSwxMjAzNjA6W1sxMDNdLDI1Nl0sMTIwMzYxOltbMTA0XSwyNTZdLDEyMDM2MjpbWzEwNV0sMjU2XSwxMjAzNjM6W1sxMDZdLDI1Nl0sMTIwMzY0OltbMTA3XSwyNTZdLDEyMDM2NTpbWzEwOF0sMjU2XSwxMjAzNjY6W1sxMDldLDI1Nl0sMTIwMzY3OltbMTEwXSwyNTZdLDEyMDM2ODpbWzExMV0sMjU2XSwxMjAzNjk6W1sxMTJdLDI1Nl0sMTIwMzcwOltbMTEzXSwyNTZdLDEyMDM3MTpbWzExNF0sMjU2XSwxMjAzNzI6W1sxMTVdLDI1Nl0sMTIwMzczOltbMTE2XSwyNTZdLDEyMDM3NDpbWzExN10sMjU2XSwxMjAzNzU6W1sxMThdLDI1Nl0sMTIwMzc2OltbMTE5XSwyNTZdLDEyMDM3NzpbWzEyMF0sMjU2XSwxMjAzNzg6W1sxMjFdLDI1Nl0sMTIwMzc5OltbMTIyXSwyNTZdLDEyMDM4MDpbWzY1XSwyNTZdLDEyMDM4MTpbWzY2XSwyNTZdLDEyMDM4MjpbWzY3XSwyNTZdLDEyMDM4MzpbWzY4XSwyNTZdLDEyMDM4NDpbWzY5XSwyNTZdLDEyMDM4NTpbWzcwXSwyNTZdLDEyMDM4NjpbWzcxXSwyNTZdLDEyMDM4NzpbWzcyXSwyNTZdLDEyMDM4ODpbWzczXSwyNTZdLDEyMDM4OTpbWzc0XSwyNTZdLDEyMDM5MDpbWzc1XSwyNTZdLDEyMDM5MTpbWzc2XSwyNTZdLDEyMDM5MjpbWzc3XSwyNTZdLDEyMDM5MzpbWzc4XSwyNTZdLDEyMDM5NDpbWzc5XSwyNTZdLDEyMDM5NTpbWzgwXSwyNTZdLDEyMDM5NjpbWzgxXSwyNTZdLDEyMDM5NzpbWzgyXSwyNTZdLDEyMDM5ODpbWzgzXSwyNTZdLDEyMDM5OTpbWzg0XSwyNTZdLDEyMDQwMDpbWzg1XSwyNTZdLDEyMDQwMTpbWzg2XSwyNTZdLDEyMDQwMjpbWzg3XSwyNTZdLDEyMDQwMzpbWzg4XSwyNTZdLDEyMDQwNDpbWzg5XSwyNTZdLDEyMDQwNTpbWzkwXSwyNTZdLDEyMDQwNjpbWzk3XSwyNTZdLDEyMDQwNzpbWzk4XSwyNTZdLDEyMDQwODpbWzk5XSwyNTZdLDEyMDQwOTpbWzEwMF0sMjU2XSwxMjA0MTA6W1sxMDFdLDI1Nl0sMTIwNDExOltbMTAyXSwyNTZdLDEyMDQxMjpbWzEwM10sMjU2XSwxMjA0MTM6W1sxMDRdLDI1Nl0sMTIwNDE0OltbMTA1XSwyNTZdLDEyMDQxNTpbWzEwNl0sMjU2XSwxMjA0MTY6W1sxMDddLDI1Nl0sMTIwNDE3OltbMTA4XSwyNTZdLDEyMDQxODpbWzEwOV0sMjU2XSwxMjA0MTk6W1sxMTBdLDI1Nl0sMTIwNDIwOltbMTExXSwyNTZdLDEyMDQyMTpbWzExMl0sMjU2XSwxMjA0MjI6W1sxMTNdLDI1Nl0sMTIwNDIzOltbMTE0XSwyNTZdLDEyMDQyNDpbWzExNV0sMjU2XSwxMjA0MjU6W1sxMTZdLDI1Nl0sMTIwNDI2OltbMTE3XSwyNTZdLDEyMDQyNzpbWzExOF0sMjU2XSwxMjA0Mjg6W1sxMTldLDI1Nl0sMTIwNDI5OltbMTIwXSwyNTZdLDEyMDQzMDpbWzEyMV0sMjU2XSwxMjA0MzE6W1sxMjJdLDI1Nl0sMTIwNDMyOltbNjVdLDI1Nl0sMTIwNDMzOltbNjZdLDI1Nl0sMTIwNDM0OltbNjddLDI1Nl0sMTIwNDM1OltbNjhdLDI1Nl0sMTIwNDM2OltbNjldLDI1Nl0sMTIwNDM3OltbNzBdLDI1Nl0sMTIwNDM4OltbNzFdLDI1Nl0sMTIwNDM5OltbNzJdLDI1Nl0sMTIwNDQwOltbNzNdLDI1Nl0sMTIwNDQxOltbNzRdLDI1Nl0sMTIwNDQyOltbNzVdLDI1Nl0sMTIwNDQzOltbNzZdLDI1Nl0sMTIwNDQ0OltbNzddLDI1Nl0sMTIwNDQ1OltbNzhdLDI1Nl0sMTIwNDQ2OltbNzldLDI1Nl0sMTIwNDQ3OltbODBdLDI1Nl0sMTIwNDQ4OltbODFdLDI1Nl0sMTIwNDQ5OltbODJdLDI1Nl0sMTIwNDUwOltbODNdLDI1Nl0sMTIwNDUxOltbODRdLDI1Nl0sMTIwNDUyOltbODVdLDI1Nl0sMTIwNDUzOltbODZdLDI1Nl0sMTIwNDU0OltbODddLDI1Nl0sMTIwNDU1OltbODhdLDI1Nl0sMTIwNDU2OltbODldLDI1Nl0sMTIwNDU3OltbOTBdLDI1Nl0sMTIwNDU4OltbOTddLDI1Nl0sMTIwNDU5OltbOThdLDI1Nl0sMTIwNDYwOltbOTldLDI1Nl0sMTIwNDYxOltbMTAwXSwyNTZdLDEyMDQ2MjpbWzEwMV0sMjU2XSwxMjA0NjM6W1sxMDJdLDI1Nl0sMTIwNDY0OltbMTAzXSwyNTZdLDEyMDQ2NTpbWzEwNF0sMjU2XSwxMjA0NjY6W1sxMDVdLDI1Nl0sMTIwNDY3OltbMTA2XSwyNTZdLDEyMDQ2ODpbWzEwN10sMjU2XSwxMjA0Njk6W1sxMDhdLDI1Nl0sMTIwNDcwOltbMTA5XSwyNTZdLDEyMDQ3MTpbWzExMF0sMjU2XSwxMjA0NzI6W1sxMTFdLDI1Nl0sMTIwNDczOltbMTEyXSwyNTZdLDEyMDQ3NDpbWzExM10sMjU2XSwxMjA0NzU6W1sxMTRdLDI1Nl0sMTIwNDc2OltbMTE1XSwyNTZdLDEyMDQ3NzpbWzExNl0sMjU2XSwxMjA0Nzg6W1sxMTddLDI1Nl0sMTIwNDc5OltbMTE4XSwyNTZdLDEyMDQ4MDpbWzExOV0sMjU2XSwxMjA0ODE6W1sxMjBdLDI1Nl0sMTIwNDgyOltbMTIxXSwyNTZdLDEyMDQ4MzpbWzEyMl0sMjU2XSwxMjA0ODQ6W1szMDVdLDI1Nl0sMTIwNDg1OltbNTY3XSwyNTZdLDEyMDQ4ODpbWzkxM10sMjU2XSwxMjA0ODk6W1s5MTRdLDI1Nl0sMTIwNDkwOltbOTE1XSwyNTZdLDEyMDQ5MTpbWzkxNl0sMjU2XSwxMjA0OTI6W1s5MTddLDI1Nl0sMTIwNDkzOltbOTE4XSwyNTZdLDEyMDQ5NDpbWzkxOV0sMjU2XSwxMjA0OTU6W1s5MjBdLDI1Nl0sMTIwNDk2OltbOTIxXSwyNTZdLDEyMDQ5NzpbWzkyMl0sMjU2XSwxMjA0OTg6W1s5MjNdLDI1Nl0sMTIwNDk5OltbOTI0XSwyNTZdLDEyMDUwMDpbWzkyNV0sMjU2XSwxMjA1MDE6W1s5MjZdLDI1Nl0sMTIwNTAyOltbOTI3XSwyNTZdLDEyMDUwMzpbWzkyOF0sMjU2XSwxMjA1MDQ6W1s5MjldLDI1Nl0sMTIwNTA1OltbMTAxMl0sMjU2XSwxMjA1MDY6W1s5MzFdLDI1Nl0sMTIwNTA3OltbOTMyXSwyNTZdLDEyMDUwODpbWzkzM10sMjU2XSwxMjA1MDk6W1s5MzRdLDI1Nl0sMTIwNTEwOltbOTM1XSwyNTZdLDEyMDUxMTpbWzkzNl0sMjU2XSwxMjA1MTI6W1s5MzddLDI1Nl0sMTIwNTEzOltbODcxMV0sMjU2XSwxMjA1MTQ6W1s5NDVdLDI1Nl0sMTIwNTE1OltbOTQ2XSwyNTZdLDEyMDUxNjpbWzk0N10sMjU2XSwxMjA1MTc6W1s5NDhdLDI1Nl0sMTIwNTE4OltbOTQ5XSwyNTZdLDEyMDUxOTpbWzk1MF0sMjU2XSwxMjA1MjA6W1s5NTFdLDI1Nl0sMTIwNTIxOltbOTUyXSwyNTZdLDEyMDUyMjpbWzk1M10sMjU2XSwxMjA1MjM6W1s5NTRdLDI1Nl0sMTIwNTI0OltbOTU1XSwyNTZdLDEyMDUyNTpbWzk1Nl0sMjU2XSwxMjA1MjY6W1s5NTddLDI1Nl0sMTIwNTI3OltbOTU4XSwyNTZdLDEyMDUyODpbWzk1OV0sMjU2XSwxMjA1Mjk6W1s5NjBdLDI1Nl0sMTIwNTMwOltbOTYxXSwyNTZdLDEyMDUzMTpbWzk2Ml0sMjU2XSwxMjA1MzI6W1s5NjNdLDI1Nl0sMTIwNTMzOltbOTY0XSwyNTZdLDEyMDUzNDpbWzk2NV0sMjU2XSwxMjA1MzU6W1s5NjZdLDI1Nl0sMTIwNTM2OltbOTY3XSwyNTZdLDEyMDUzNzpbWzk2OF0sMjU2XSwxMjA1Mzg6W1s5NjldLDI1Nl0sMTIwNTM5OltbODcwNl0sMjU2XSwxMjA1NDA6W1sxMDEzXSwyNTZdLDEyMDU0MTpbWzk3N10sMjU2XSwxMjA1NDI6W1sxMDA4XSwyNTZdLDEyMDU0MzpbWzk4MV0sMjU2XSwxMjA1NDQ6W1sxMDA5XSwyNTZdLDEyMDU0NTpbWzk4Ml0sMjU2XSwxMjA1NDY6W1s5MTNdLDI1Nl0sMTIwNTQ3OltbOTE0XSwyNTZdLDEyMDU0ODpbWzkxNV0sMjU2XSwxMjA1NDk6W1s5MTZdLDI1Nl0sMTIwNTUwOltbOTE3XSwyNTZdLDEyMDU1MTpbWzkxOF0sMjU2XSwxMjA1NTI6W1s5MTldLDI1Nl0sMTIwNTUzOltbOTIwXSwyNTZdLDEyMDU1NDpbWzkyMV0sMjU2XSwxMjA1NTU6W1s5MjJdLDI1Nl0sMTIwNTU2OltbOTIzXSwyNTZdLDEyMDU1NzpbWzkyNF0sMjU2XSwxMjA1NTg6W1s5MjVdLDI1Nl0sMTIwNTU5OltbOTI2XSwyNTZdLDEyMDU2MDpbWzkyN10sMjU2XSwxMjA1NjE6W1s5MjhdLDI1Nl0sMTIwNTYyOltbOTI5XSwyNTZdLDEyMDU2MzpbWzEwMTJdLDI1Nl0sMTIwNTY0OltbOTMxXSwyNTZdLDEyMDU2NTpbWzkzMl0sMjU2XSwxMjA1NjY6W1s5MzNdLDI1Nl0sMTIwNTY3OltbOTM0XSwyNTZdLDEyMDU2ODpbWzkzNV0sMjU2XSwxMjA1Njk6W1s5MzZdLDI1Nl0sMTIwNTcwOltbOTM3XSwyNTZdLDEyMDU3MTpbWzg3MTFdLDI1Nl0sMTIwNTcyOltbOTQ1XSwyNTZdLDEyMDU3MzpbWzk0Nl0sMjU2XSwxMjA1NzQ6W1s5NDddLDI1Nl0sMTIwNTc1OltbOTQ4XSwyNTZdfSwKNTUwNDA6ezEyMDU3NjpbWzk0OV0sMjU2XSwxMjA1Nzc6W1s5NTBdLDI1Nl0sMTIwNTc4OltbOTUxXSwyNTZdLDEyMDU3OTpbWzk1Ml0sMjU2XSwxMjA1ODA6W1s5NTNdLDI1Nl0sMTIwNTgxOltbOTU0XSwyNTZdLDEyMDU4MjpbWzk1NV0sMjU2XSwxMjA1ODM6W1s5NTZdLDI1Nl0sMTIwNTg0OltbOTU3XSwyNTZdLDEyMDU4NTpbWzk1OF0sMjU2XSwxMjA1ODY6W1s5NTldLDI1Nl0sMTIwNTg3OltbOTYwXSwyNTZdLDEyMDU4ODpbWzk2MV0sMjU2XSwxMjA1ODk6W1s5NjJdLDI1Nl0sMTIwNTkwOltbOTYzXSwyNTZdLDEyMDU5MTpbWzk2NF0sMjU2XSwxMjA1OTI6W1s5NjVdLDI1Nl0sMTIwNTkzOltbOTY2XSwyNTZdLDEyMDU5NDpbWzk2N10sMjU2XSwxMjA1OTU6W1s5NjhdLDI1Nl0sMTIwNTk2OltbOTY5XSwyNTZdLDEyMDU5NzpbWzg3MDZdLDI1Nl0sMTIwNTk4OltbMTAxM10sMjU2XSwxMjA1OTk6W1s5NzddLDI1Nl0sMTIwNjAwOltbMTAwOF0sMjU2XSwxMjA2MDE6W1s5ODFdLDI1Nl0sMTIwNjAyOltbMTAwOV0sMjU2XSwxMjA2MDM6W1s5ODJdLDI1Nl0sMTIwNjA0OltbOTEzXSwyNTZdLDEyMDYwNTpbWzkxNF0sMjU2XSwxMjA2MDY6W1s5MTVdLDI1Nl0sMTIwNjA3OltbOTE2XSwyNTZdLDEyMDYwODpbWzkxN10sMjU2XSwxMjA2MDk6W1s5MThdLDI1Nl0sMTIwNjEwOltbOTE5XSwyNTZdLDEyMDYxMTpbWzkyMF0sMjU2XSwxMjA2MTI6W1s5MjFdLDI1Nl0sMTIwNjEzOltbOTIyXSwyNTZdLDEyMDYxNDpbWzkyM10sMjU2XSwxMjA2MTU6W1s5MjRdLDI1Nl0sMTIwNjE2OltbOTI1XSwyNTZdLDEyMDYxNzpbWzkyNl0sMjU2XSwxMjA2MTg6W1s5MjddLDI1Nl0sMTIwNjE5OltbOTI4XSwyNTZdLDEyMDYyMDpbWzkyOV0sMjU2XSwxMjA2MjE6W1sxMDEyXSwyNTZdLDEyMDYyMjpbWzkzMV0sMjU2XSwxMjA2MjM6W1s5MzJdLDI1Nl0sMTIwNjI0OltbOTMzXSwyNTZdLDEyMDYyNTpbWzkzNF0sMjU2XSwxMjA2MjY6W1s5MzVdLDI1Nl0sMTIwNjI3OltbOTM2XSwyNTZdLDEyMDYyODpbWzkzN10sMjU2XSwxMjA2Mjk6W1s4NzExXSwyNTZdLDEyMDYzMDpbWzk0NV0sMjU2XSwxMjA2MzE6W1s5NDZdLDI1Nl0sMTIwNjMyOltbOTQ3XSwyNTZdLDEyMDYzMzpbWzk0OF0sMjU2XSwxMjA2MzQ6W1s5NDldLDI1Nl0sMTIwNjM1OltbOTUwXSwyNTZdLDEyMDYzNjpbWzk1MV0sMjU2XSwxMjA2Mzc6W1s5NTJdLDI1Nl0sMTIwNjM4OltbOTUzXSwyNTZdLDEyMDYzOTpbWzk1NF0sMjU2XSwxMjA2NDA6W1s5NTVdLDI1Nl0sMTIwNjQxOltbOTU2XSwyNTZdLDEyMDY0MjpbWzk1N10sMjU2XSwxMjA2NDM6W1s5NThdLDI1Nl0sMTIwNjQ0OltbOTU5XSwyNTZdLDEyMDY0NTpbWzk2MF0sMjU2XSwxMjA2NDY6W1s5NjFdLDI1Nl0sMTIwNjQ3OltbOTYyXSwyNTZdLDEyMDY0ODpbWzk2M10sMjU2XSwxMjA2NDk6W1s5NjRdLDI1Nl0sMTIwNjUwOltbOTY1XSwyNTZdLDEyMDY1MTpbWzk2Nl0sMjU2XSwxMjA2NTI6W1s5NjddLDI1Nl0sMTIwNjUzOltbOTY4XSwyNTZdLDEyMDY1NDpbWzk2OV0sMjU2XSwxMjA2NTU6W1s4NzA2XSwyNTZdLDEyMDY1NjpbWzEwMTNdLDI1Nl0sMTIwNjU3OltbOTc3XSwyNTZdLDEyMDY1ODpbWzEwMDhdLDI1Nl0sMTIwNjU5OltbOTgxXSwyNTZdLDEyMDY2MDpbWzEwMDldLDI1Nl0sMTIwNjYxOltbOTgyXSwyNTZdLDEyMDY2MjpbWzkxM10sMjU2XSwxMjA2NjM6W1s5MTRdLDI1Nl0sMTIwNjY0OltbOTE1XSwyNTZdLDEyMDY2NTpbWzkxNl0sMjU2XSwxMjA2NjY6W1s5MTddLDI1Nl0sMTIwNjY3OltbOTE4XSwyNTZdLDEyMDY2ODpbWzkxOV0sMjU2XSwxMjA2Njk6W1s5MjBdLDI1Nl0sMTIwNjcwOltbOTIxXSwyNTZdLDEyMDY3MTpbWzkyMl0sMjU2XSwxMjA2NzI6W1s5MjNdLDI1Nl0sMTIwNjczOltbOTI0XSwyNTZdLDEyMDY3NDpbWzkyNV0sMjU2XSwxMjA2NzU6W1s5MjZdLDI1Nl0sMTIwNjc2OltbOTI3XSwyNTZdLDEyMDY3NzpbWzkyOF0sMjU2XSwxMjA2Nzg6W1s5MjldLDI1Nl0sMTIwNjc5OltbMTAxMl0sMjU2XSwxMjA2ODA6W1s5MzFdLDI1Nl0sMTIwNjgxOltbOTMyXSwyNTZdLDEyMDY4MjpbWzkzM10sMjU2XSwxMjA2ODM6W1s5MzRdLDI1Nl0sMTIwNjg0OltbOTM1XSwyNTZdLDEyMDY4NTpbWzkzNl0sMjU2XSwxMjA2ODY6W1s5MzddLDI1Nl0sMTIwNjg3OltbODcxMV0sMjU2XSwxMjA2ODg6W1s5NDVdLDI1Nl0sMTIwNjg5OltbOTQ2XSwyNTZdLDEyMDY5MDpbWzk0N10sMjU2XSwxMjA2OTE6W1s5NDhdLDI1Nl0sMTIwNjkyOltbOTQ5XSwyNTZdLDEyMDY5MzpbWzk1MF0sMjU2XSwxMjA2OTQ6W1s5NTFdLDI1Nl0sMTIwNjk1OltbOTUyXSwyNTZdLDEyMDY5NjpbWzk1M10sMjU2XSwxMjA2OTc6W1s5NTRdLDI1Nl0sMTIwNjk4OltbOTU1XSwyNTZdLDEyMDY5OTpbWzk1Nl0sMjU2XSwxMjA3MDA6W1s5NTddLDI1Nl0sMTIwNzAxOltbOTU4XSwyNTZdLDEyMDcwMjpbWzk1OV0sMjU2XSwxMjA3MDM6W1s5NjBdLDI1Nl0sMTIwNzA0OltbOTYxXSwyNTZdLDEyMDcwNTpbWzk2Ml0sMjU2XSwxMjA3MDY6W1s5NjNdLDI1Nl0sMTIwNzA3OltbOTY0XSwyNTZdLDEyMDcwODpbWzk2NV0sMjU2XSwxMjA3MDk6W1s5NjZdLDI1Nl0sMTIwNzEwOltbOTY3XSwyNTZdLDEyMDcxMTpbWzk2OF0sMjU2XSwxMjA3MTI6W1s5NjldLDI1Nl0sMTIwNzEzOltbODcwNl0sMjU2XSwxMjA3MTQ6W1sxMDEzXSwyNTZdLDEyMDcxNTpbWzk3N10sMjU2XSwxMjA3MTY6W1sxMDA4XSwyNTZdLDEyMDcxNzpbWzk4MV0sMjU2XSwxMjA3MTg6W1sxMDA5XSwyNTZdLDEyMDcxOTpbWzk4Ml0sMjU2XSwxMjA3MjA6W1s5MTNdLDI1Nl0sMTIwNzIxOltbOTE0XSwyNTZdLDEyMDcyMjpbWzkxNV0sMjU2XSwxMjA3MjM6W1s5MTZdLDI1Nl0sMTIwNzI0OltbOTE3XSwyNTZdLDEyMDcyNTpbWzkxOF0sMjU2XSwxMjA3MjY6W1s5MTldLDI1Nl0sMTIwNzI3OltbOTIwXSwyNTZdLDEyMDcyODpbWzkyMV0sMjU2XSwxMjA3Mjk6W1s5MjJdLDI1Nl0sMTIwNzMwOltbOTIzXSwyNTZdLDEyMDczMTpbWzkyNF0sMjU2XSwxMjA3MzI6W1s5MjVdLDI1Nl0sMTIwNzMzOltbOTI2XSwyNTZdLDEyMDczNDpbWzkyN10sMjU2XSwxMjA3MzU6W1s5MjhdLDI1Nl0sMTIwNzM2OltbOTI5XSwyNTZdLDEyMDczNzpbWzEwMTJdLDI1Nl0sMTIwNzM4OltbOTMxXSwyNTZdLDEyMDczOTpbWzkzMl0sMjU2XSwxMjA3NDA6W1s5MzNdLDI1Nl0sMTIwNzQxOltbOTM0XSwyNTZdLDEyMDc0MjpbWzkzNV0sMjU2XSwxMjA3NDM6W1s5MzZdLDI1Nl0sMTIwNzQ0OltbOTM3XSwyNTZdLDEyMDc0NTpbWzg3MTFdLDI1Nl0sMTIwNzQ2OltbOTQ1XSwyNTZdLDEyMDc0NzpbWzk0Nl0sMjU2XSwxMjA3NDg6W1s5NDddLDI1Nl0sMTIwNzQ5OltbOTQ4XSwyNTZdLDEyMDc1MDpbWzk0OV0sMjU2XSwxMjA3NTE6W1s5NTBdLDI1Nl0sMTIwNzUyOltbOTUxXSwyNTZdLDEyMDc1MzpbWzk1Ml0sMjU2XSwxMjA3NTQ6W1s5NTNdLDI1Nl0sMTIwNzU1OltbOTU0XSwyNTZdLDEyMDc1NjpbWzk1NV0sMjU2XSwxMjA3NTc6W1s5NTZdLDI1Nl0sMTIwNzU4OltbOTU3XSwyNTZdLDEyMDc1OTpbWzk1OF0sMjU2XSwxMjA3NjA6W1s5NTldLDI1Nl0sMTIwNzYxOltbOTYwXSwyNTZdLDEyMDc2MjpbWzk2MV0sMjU2XSwxMjA3NjM6W1s5NjJdLDI1Nl0sMTIwNzY0OltbOTYzXSwyNTZdLDEyMDc2NTpbWzk2NF0sMjU2XSwxMjA3NjY6W1s5NjVdLDI1Nl0sMTIwNzY3OltbOTY2XSwyNTZdLDEyMDc2ODpbWzk2N10sMjU2XSwxMjA3Njk6W1s5NjhdLDI1Nl0sMTIwNzcwOltbOTY5XSwyNTZdLDEyMDc3MTpbWzg3MDZdLDI1Nl0sMTIwNzcyOltbMTAxM10sMjU2XSwxMjA3NzM6W1s5NzddLDI1Nl0sMTIwNzc0OltbMTAwOF0sMjU2XSwxMjA3NzU6W1s5ODFdLDI1Nl0sMTIwNzc2OltbMTAwOV0sMjU2XSwxMjA3Nzc6W1s5ODJdLDI1Nl0sMTIwNzc4OltbOTg4XSwyNTZdLDEyMDc3OTpbWzk4OV0sMjU2XSwxMjA3ODI6W1s0OF0sMjU2XSwxMjA3ODM6W1s0OV0sMjU2XSwxMjA3ODQ6W1s1MF0sMjU2XSwxMjA3ODU6W1s1MV0sMjU2XSwxMjA3ODY6W1s1Ml0sMjU2XSwxMjA3ODc6W1s1M10sMjU2XSwxMjA3ODg6W1s1NF0sMjU2XSwxMjA3ODk6W1s1NV0sMjU2XSwxMjA3OTA6W1s1Nl0sMjU2XSwxMjA3OTE6W1s1N10sMjU2XSwxMjA3OTI6W1s0OF0sMjU2XSwxMjA3OTM6W1s0OV0sMjU2XSwxMjA3OTQ6W1s1MF0sMjU2XSwxMjA3OTU6W1s1MV0sMjU2XSwxMjA3OTY6W1s1Ml0sMjU2XSwxMjA3OTc6W1s1M10sMjU2XSwxMjA3OTg6W1s1NF0sMjU2XSwxMjA3OTk6W1s1NV0sMjU2XSwxMjA4MDA6W1s1Nl0sMjU2XSwxMjA4MDE6W1s1N10sMjU2XSwxMjA4MDI6W1s0OF0sMjU2XSwxMjA4MDM6W1s0OV0sMjU2XSwxMjA4MDQ6W1s1MF0sMjU2XSwxMjA4MDU6W1s1MV0sMjU2XSwxMjA4MDY6W1s1Ml0sMjU2XSwxMjA4MDc6W1s1M10sMjU2XSwxMjA4MDg6W1s1NF0sMjU2XSwxMjA4MDk6W1s1NV0sMjU2XSwxMjA4MTA6W1s1Nl0sMjU2XSwxMjA4MTE6W1s1N10sMjU2XSwxMjA4MTI6W1s0OF0sMjU2XSwxMjA4MTM6W1s0OV0sMjU2XSwxMjA4MTQ6W1s1MF0sMjU2XSwxMjA4MTU6W1s1MV0sMjU2XSwxMjA4MTY6W1s1Ml0sMjU2XSwxMjA4MTc6W1s1M10sMjU2XSwxMjA4MTg6W1s1NF0sMjU2XSwxMjA4MTk6W1s1NV0sMjU2XSwxMjA4MjA6W1s1Nl0sMjU2XSwxMjA4MjE6W1s1N10sMjU2XSwxMjA4MjI6W1s0OF0sMjU2XSwxMjA4MjM6W1s0OV0sMjU2XSwxMjA4MjQ6W1s1MF0sMjU2XSwxMjA4MjU6W1s1MV0sMjU2XSwxMjA4MjY6W1s1Ml0sMjU2XSwxMjA4Mjc6W1s1M10sMjU2XSwxMjA4Mjg6W1s1NF0sMjU2XSwxMjA4Mjk6W1s1NV0sMjU2XSwxMjA4MzA6W1s1Nl0sMjU2XSwxMjA4MzE6W1s1N10sMjU2XX0sCjU5MzkyOnsxMjUxMzY6WywyMjBdLDEyNTEzNzpbLDIyMF0sMTI1MTM4OlssMjIwXSwxMjUxMzk6WywyMjBdLDEyNTE0MDpbLDIyMF0sMTI1MTQxOlssMjIwXSwxMjUxNDI6WywyMjBdfSwKNjA5Mjg6ezEyNjQ2NDpbWzE1NzVdLDI1Nl0sMTI2NDY1OltbMTU3Nl0sMjU2XSwxMjY0NjY6W1sxNTgwXSwyNTZdLDEyNjQ2NzpbWzE1ODNdLDI1Nl0sMTI2NDY5OltbMTYwOF0sMjU2XSwxMjY0NzA6W1sxNTg2XSwyNTZdLDEyNjQ3MTpbWzE1ODFdLDI1Nl0sMTI2NDcyOltbMTU5MV0sMjU2XSwxMjY0NzM6W1sxNjEwXSwyNTZdLDEyNjQ3NDpbWzE2MDNdLDI1Nl0sMTI2NDc1OltbMTYwNF0sMjU2XSwxMjY0NzY6W1sxNjA1XSwyNTZdLDEyNjQ3NzpbWzE2MDZdLDI1Nl0sMTI2NDc4OltbMTU4N10sMjU2XSwxMjY0Nzk6W1sxNTkzXSwyNTZdLDEyNjQ4MDpbWzE2MDFdLDI1Nl0sMTI2NDgxOltbMTU4OV0sMjU2XSwxMjY0ODI6W1sxNjAyXSwyNTZdLDEyNjQ4MzpbWzE1ODVdLDI1Nl0sMTI2NDg0OltbMTU4OF0sMjU2XSwxMjY0ODU6W1sxNTc4XSwyNTZdLDEyNjQ4NjpbWzE1NzldLDI1Nl0sMTI2NDg3OltbMTU4Ml0sMjU2XSwxMjY0ODg6W1sxNTg0XSwyNTZdLDEyNjQ4OTpbWzE1OTBdLDI1Nl0sMTI2NDkwOltbMTU5Ml0sMjU2XSwxMjY0OTE6W1sxNTk0XSwyNTZdLDEyNjQ5MjpbWzE2NDZdLDI1Nl0sMTI2NDkzOltbMTcyMl0sMjU2XSwxMjY0OTQ6W1sxNjk3XSwyNTZdLDEyNjQ5NTpbWzE2NDddLDI1Nl0sMTI2NDk3OltbMTU3Nl0sMjU2XSwxMjY0OTg6W1sxNTgwXSwyNTZdLDEyNjUwMDpbWzE2MDddLDI1Nl0sMTI2NTAzOltbMTU4MV0sMjU2XSwxMjY1MDU6W1sxNjEwXSwyNTZdLDEyNjUwNjpbWzE2MDNdLDI1Nl0sMTI2NTA3OltbMTYwNF0sMjU2XSwxMjY1MDg6W1sxNjA1XSwyNTZdLDEyNjUwOTpbWzE2MDZdLDI1Nl0sMTI2NTEwOltbMTU4N10sMjU2XSwxMjY1MTE6W1sxNTkzXSwyNTZdLDEyNjUxMjpbWzE2MDFdLDI1Nl0sMTI2NTEzOltbMTU4OV0sMjU2XSwxMjY1MTQ6W1sxNjAyXSwyNTZdLDEyNjUxNjpbWzE1ODhdLDI1Nl0sMTI2NTE3OltbMTU3OF0sMjU2XSwxMjY1MTg6W1sxNTc5XSwyNTZdLDEyNjUxOTpbWzE1ODJdLDI1Nl0sMTI2NTIxOltbMTU5MF0sMjU2XSwxMjY1MjM6W1sxNTk0XSwyNTZdLDEyNjUzMDpbWzE1ODBdLDI1Nl0sMTI2NTM1OltbMTU4MV0sMjU2XSwxMjY1Mzc6W1sxNjEwXSwyNTZdLDEyNjUzOTpbWzE2MDRdLDI1Nl0sMTI2NTQxOltbMTYwNl0sMjU2XSwxMjY1NDI6W1sxNTg3XSwyNTZdLDEyNjU0MzpbWzE1OTNdLDI1Nl0sMTI2NTQ1OltbMTU4OV0sMjU2XSwxMjY1NDY6W1sxNjAyXSwyNTZdLDEyNjU0ODpbWzE1ODhdLDI1Nl0sMTI2NTUxOltbMTU4Ml0sMjU2XSwxMjY1NTM6W1sxNTkwXSwyNTZdLDEyNjU1NTpbWzE1OTRdLDI1Nl0sMTI2NTU3OltbMTcyMl0sMjU2XSwxMjY1NTk6W1sxNjQ3XSwyNTZdLDEyNjU2MTpbWzE1NzZdLDI1Nl0sMTI2NTYyOltbMTU4MF0sMjU2XSwxMjY1NjQ6W1sxNjA3XSwyNTZdLDEyNjU2NzpbWzE1ODFdLDI1Nl0sMTI2NTY4OltbMTU5MV0sMjU2XSwxMjY1Njk6W1sxNjEwXSwyNTZdLDEyNjU3MDpbWzE2MDNdLDI1Nl0sMTI2NTcyOltbMTYwNV0sMjU2XSwxMjY1NzM6W1sxNjA2XSwyNTZdLDEyNjU3NDpbWzE1ODddLDI1Nl0sMTI2NTc1OltbMTU5M10sMjU2XSwxMjY1NzY6W1sxNjAxXSwyNTZdLDEyNjU3NzpbWzE1ODldLDI1Nl0sMTI2NTc4OltbMTYwMl0sMjU2XSwxMjY1ODA6W1sxNTg4XSwyNTZdLDEyNjU4MTpbWzE1NzhdLDI1Nl0sMTI2NTgyOltbMTU3OV0sMjU2XSwxMjY1ODM6W1sxNTgyXSwyNTZdLDEyNjU4NTpbWzE1OTBdLDI1Nl0sMTI2NTg2OltbMTU5Ml0sMjU2XSwxMjY1ODc6W1sxNTk0XSwyNTZdLDEyNjU4ODpbWzE2NDZdLDI1Nl0sMTI2NTkwOltbMTY5N10sMjU2XSwxMjY1OTI6W1sxNTc1XSwyNTZdLDEyNjU5MzpbWzE1NzZdLDI1Nl0sMTI2NTk0OltbMTU4MF0sMjU2XSwxMjY1OTU6W1sxNTgzXSwyNTZdLDEyNjU5NjpbWzE2MDddLDI1Nl0sMTI2NTk3OltbMTYwOF0sMjU2XSwxMjY1OTg6W1sxNTg2XSwyNTZdLDEyNjU5OTpbWzE1ODFdLDI1Nl0sMTI2NjAwOltbMTU5MV0sMjU2XSwxMjY2MDE6W1sxNjEwXSwyNTZdLDEyNjYwMzpbWzE2MDRdLDI1Nl0sMTI2NjA0OltbMTYwNV0sMjU2XSwxMjY2MDU6W1sxNjA2XSwyNTZdLDEyNjYwNjpbWzE1ODddLDI1Nl0sMTI2NjA3OltbMTU5M10sMjU2XSwxMjY2MDg6W1sxNjAxXSwyNTZdLDEyNjYwOTpbWzE1ODldLDI1Nl0sMTI2NjEwOltbMTYwMl0sMjU2XSwxMjY2MTE6W1sxNTg1XSwyNTZdLDEyNjYxMjpbWzE1ODhdLDI1Nl0sMTI2NjEzOltbMTU3OF0sMjU2XSwxMjY2MTQ6W1sxNTc5XSwyNTZdLDEyNjYxNTpbWzE1ODJdLDI1Nl0sMTI2NjE2OltbMTU4NF0sMjU2XSwxMjY2MTc6W1sxNTkwXSwyNTZdLDEyNjYxODpbWzE1OTJdLDI1Nl0sMTI2NjE5OltbMTU5NF0sMjU2XSwxMjY2MjU6W1sxNTc2XSwyNTZdLDEyNjYyNjpbWzE1ODBdLDI1Nl0sMTI2NjI3OltbMTU4M10sMjU2XSwxMjY2Mjk6W1sxNjA4XSwyNTZdLDEyNjYzMDpbWzE1ODZdLDI1Nl0sMTI2NjMxOltbMTU4MV0sMjU2XSwxMjY2MzI6W1sxNTkxXSwyNTZdLDEyNjYzMzpbWzE2MTBdLDI1Nl0sMTI2NjM1OltbMTYwNF0sMjU2XSwxMjY2MzY6W1sxNjA1XSwyNTZdLDEyNjYzNzpbWzE2MDZdLDI1Nl0sMTI2NjM4OltbMTU4N10sMjU2XSwxMjY2Mzk6W1sxNTkzXSwyNTZdLDEyNjY0MDpbWzE2MDFdLDI1Nl0sMTI2NjQxOltbMTU4OV0sMjU2XSwxMjY2NDI6W1sxNjAyXSwyNTZdLDEyNjY0MzpbWzE1ODVdLDI1Nl0sMTI2NjQ0OltbMTU4OF0sMjU2XSwxMjY2NDU6W1sxNTc4XSwyNTZdLDEyNjY0NjpbWzE1NzldLDI1Nl0sMTI2NjQ3OltbMTU4Ml0sMjU2XSwxMjY2NDg6W1sxNTg0XSwyNTZdLDEyNjY0OTpbWzE1OTBdLDI1Nl0sMTI2NjUwOltbMTU5Ml0sMjU2XSwxMjY2NTE6W1sxNTk0XSwyNTZdfSwKNjE2OTY6ezEyNzIzMjpbWzQ4LDQ2XSwyNTZdLDEyNzIzMzpbWzQ4LDQ0XSwyNTZdLDEyNzIzNDpbWzQ5LDQ0XSwyNTZdLDEyNzIzNTpbWzUwLDQ0XSwyNTZdLDEyNzIzNjpbWzUxLDQ0XSwyNTZdLDEyNzIzNzpbWzUyLDQ0XSwyNTZdLDEyNzIzODpbWzUzLDQ0XSwyNTZdLDEyNzIzOTpbWzU0LDQ0XSwyNTZdLDEyNzI0MDpbWzU1LDQ0XSwyNTZdLDEyNzI0MTpbWzU2LDQ0XSwyNTZdLDEyNzI0MjpbWzU3LDQ0XSwyNTZdLDEyNzI0ODpbWzQwLDY1LDQxXSwyNTZdLDEyNzI0OTpbWzQwLDY2LDQxXSwyNTZdLDEyNzI1MDpbWzQwLDY3LDQxXSwyNTZdLDEyNzI1MTpbWzQwLDY4LDQxXSwyNTZdLDEyNzI1MjpbWzQwLDY5LDQxXSwyNTZdLDEyNzI1MzpbWzQwLDcwLDQxXSwyNTZdLDEyNzI1NDpbWzQwLDcxLDQxXSwyNTZdLDEyNzI1NTpbWzQwLDcyLDQxXSwyNTZdLDEyNzI1NjpbWzQwLDczLDQxXSwyNTZdLDEyNzI1NzpbWzQwLDc0LDQxXSwyNTZdLDEyNzI1ODpbWzQwLDc1LDQxXSwyNTZdLDEyNzI1OTpbWzQwLDc2LDQxXSwyNTZdLDEyNzI2MDpbWzQwLDc3LDQxXSwyNTZdLDEyNzI2MTpbWzQwLDc4LDQxXSwyNTZdLDEyNzI2MjpbWzQwLDc5LDQxXSwyNTZdLDEyNzI2MzpbWzQwLDgwLDQxXSwyNTZdLDEyNzI2NDpbWzQwLDgxLDQxXSwyNTZdLDEyNzI2NTpbWzQwLDgyLDQxXSwyNTZdLDEyNzI2NjpbWzQwLDgzLDQxXSwyNTZdLDEyNzI2NzpbWzQwLDg0LDQxXSwyNTZdLDEyNzI2ODpbWzQwLDg1LDQxXSwyNTZdLDEyNzI2OTpbWzQwLDg2LDQxXSwyNTZdLDEyNzI3MDpbWzQwLDg3LDQxXSwyNTZdLDEyNzI3MTpbWzQwLDg4LDQxXSwyNTZdLDEyNzI3MjpbWzQwLDg5LDQxXSwyNTZdLDEyNzI3MzpbWzQwLDkwLDQxXSwyNTZdLDEyNzI3NDpbWzEyMzA4LDgzLDEyMzA5XSwyNTZdLDEyNzI3NTpbWzY3XSwyNTZdLDEyNzI3NjpbWzgyXSwyNTZdLDEyNzI3NzpbWzY3LDY4XSwyNTZdLDEyNzI3ODpbWzg3LDkwXSwyNTZdLDEyNzI4MDpbWzY1XSwyNTZdLDEyNzI4MTpbWzY2XSwyNTZdLDEyNzI4MjpbWzY3XSwyNTZdLDEyNzI4MzpbWzY4XSwyNTZdLDEyNzI4NDpbWzY5XSwyNTZdLDEyNzI4NTpbWzcwXSwyNTZdLDEyNzI4NjpbWzcxXSwyNTZdLDEyNzI4NzpbWzcyXSwyNTZdLDEyNzI4ODpbWzczXSwyNTZdLDEyNzI4OTpbWzc0XSwyNTZdLDEyNzI5MDpbWzc1XSwyNTZdLDEyNzI5MTpbWzc2XSwyNTZdLDEyNzI5MjpbWzc3XSwyNTZdLDEyNzI5MzpbWzc4XSwyNTZdLDEyNzI5NDpbWzc5XSwyNTZdLDEyNzI5NTpbWzgwXSwyNTZdLDEyNzI5NjpbWzgxXSwyNTZdLDEyNzI5NzpbWzgyXSwyNTZdLDEyNzI5ODpbWzgzXSwyNTZdLDEyNzI5OTpbWzg0XSwyNTZdLDEyNzMwMDpbWzg1XSwyNTZdLDEyNzMwMTpbWzg2XSwyNTZdLDEyNzMwMjpbWzg3XSwyNTZdLDEyNzMwMzpbWzg4XSwyNTZdLDEyNzMwNDpbWzg5XSwyNTZdLDEyNzMwNTpbWzkwXSwyNTZdLDEyNzMwNjpbWzcyLDg2XSwyNTZdLDEyNzMwNzpbWzc3LDg2XSwyNTZdLDEyNzMwODpbWzgzLDY4XSwyNTZdLDEyNzMwOTpbWzgzLDgzXSwyNTZdLDEyNzMxMDpbWzgwLDgwLDg2XSwyNTZdLDEyNzMxMTpbWzg3LDY3XSwyNTZdLDEyNzMzODpbWzc3LDY3XSwyNTZdLDEyNzMzOTpbWzc3LDY4XSwyNTZdLDEyNzM3NjpbWzY4LDc0XSwyNTZdfSwKNjE5NTI6ezEyNzQ4ODpbWzEyNDExLDEyMzYzXSwyNTZdLDEyNzQ4OTpbWzEyNDY3LDEyNDY3XSwyNTZdLDEyNzQ5MDpbWzEyNDY5XSwyNTZdLDEyNzUwNDpbWzI1MTYzXSwyNTZdLDEyNzUwNTpbWzIzMzgzXSwyNTZdLDEyNzUwNjpbWzIxNDUyXSwyNTZdLDEyNzUwNzpbWzEyNDg3XSwyNTZdLDEyNzUwODpbWzIwMTA4XSwyNTZdLDEyNzUwOTpbWzIyODEwXSwyNTZdLDEyNzUxMDpbWzM1Mjk5XSwyNTZdLDEyNzUxMTpbWzIyODI1XSwyNTZdLDEyNzUxMjpbWzIwMTMyXSwyNTZdLDEyNzUxMzpbWzI2MTQ0XSwyNTZdLDEyNzUxNDpbWzI4OTYxXSwyNTZdLDEyNzUxNTpbWzI2MDA5XSwyNTZdLDEyNzUxNjpbWzIxMDY5XSwyNTZdLDEyNzUxNzpbWzI0NDYwXSwyNTZdLDEyNzUxODpbWzIwODc3XSwyNTZdLDEyNzUxOTpbWzI2MDMyXSwyNTZdLDEyNzUyMDpbWzIxMDIxXSwyNTZdLDEyNzUyMTpbWzMyMDY2XSwyNTZdLDEyNzUyMjpbWzI5OTgzXSwyNTZdLDEyNzUyMzpbWzM2MDA5XSwyNTZdLDEyNzUyNDpbWzIyNzY4XSwyNTZdLDEyNzUyNTpbWzIxNTYxXSwyNTZdLDEyNzUyNjpbWzI4NDM2XSwyNTZdLDEyNzUyNzpbWzI1MjM3XSwyNTZdLDEyNzUyODpbWzI1NDI5XSwyNTZdLDEyNzUyOTpbWzE5OTY4XSwyNTZdLDEyNzUzMDpbWzE5OTc3XSwyNTZdLDEyNzUzMTpbWzM2OTM4XSwyNTZdLDEyNzUzMjpbWzI0MDM4XSwyNTZdLDEyNzUzMzpbWzIwMDEzXSwyNTZdLDEyNzUzNDpbWzIxNDkxXSwyNTZdLDEyNzUzNTpbWzI1MzUxXSwyNTZdLDEyNzUzNjpbWzM2MjA4XSwyNTZdLDEyNzUzNzpbWzI1MTcxXSwyNTZdLDEyNzUzODpbWzMxMTA1XSwyNTZdLDEyNzUzOTpbWzMxMzU0XSwyNTZdLDEyNzU0MDpbWzIxNTEyXSwyNTZdLDEyNzU0MTpbWzI4Mjg4XSwyNTZdLDEyNzU0MjpbWzI2Mzc3XSwyNTZdLDEyNzU0MzpbWzI2Mzc2XSwyNTZdLDEyNzU0NDpbWzMwMDAzXSwyNTZdLDEyNzU0NTpbWzIxMTA2XSwyNTZdLDEyNzU0NjpbWzIxOTQyXSwyNTZdLDEyNzU1MjpbWzEyMzA4LDI2NDEyLDEyMzA5XSwyNTZdLDEyNzU1MzpbWzEyMzA4LDE5OTc3LDEyMzA5XSwyNTZdLDEyNzU1NDpbWzEyMzA4LDIwMTA4LDEyMzA5XSwyNTZdLDEyNzU1NTpbWzEyMzA4LDIzNDMzLDEyMzA5XSwyNTZdLDEyNzU1NjpbWzEyMzA4LDI4ODU3LDEyMzA5XSwyNTZdLDEyNzU1NzpbWzEyMzA4LDI1MTcxLDEyMzA5XSwyNTZdLDEyNzU1ODpbWzEyMzA4LDMwNDIzLDEyMzA5XSwyNTZdLDEyNzU1OTpbWzEyMzA4LDIxMjEzLDEyMzA5XSwyNTZdLDEyNzU2MDpbWzEyMzA4LDI1OTQzLDEyMzA5XSwyNTZdLDEyNzU2ODpbWzI0NDcxXSwyNTZdLDEyNzU2OTpbWzIxNDg3XSwyNTZdfSwKNjM0ODg6ezE5NDU2MDpbWzIwMDI5XV0sMTk0NTYxOltbMjAwMjRdXSwxOTQ1NjI6W1syMDAzM11dLDE5NDU2MzpbWzEzMTM2Ml1dLDE5NDU2NDpbWzIwMzIwXV0sMTk0NTY1OltbMjAzOThdXSwxOTQ1NjY6W1syMDQxMV1dLDE5NDU2NzpbWzIwNDgyXV0sMTk0NTY4OltbMjA2MDJdXSwxOTQ1Njk6W1syMDYzM11dLDE5NDU3MDpbWzIwNzExXV0sMTk0NTcxOltbMjA2ODddXSwxOTQ1NzI6W1sxMzQ3MF1dLDE5NDU3MzpbWzEzMjY2Nl1dLDE5NDU3NDpbWzIwODEzXV0sMTk0NTc1OltbMjA4MjBdXSwxOTQ1NzY6W1syMDgzNl1dLDE5NDU3NzpbWzIwODU1XV0sMTk0NTc4OltbMTMyMzgwXV0sMTk0NTc5OltbMTM0OTddXSwxOTQ1ODA6W1syMDgzOV1dLDE5NDU4MTpbWzIwODc3XV0sMTk0NTgyOltbMTMyNDI3XV0sMTk0NTgzOltbMjA4ODddXSwxOTQ1ODQ6W1syMDkwMF1dLDE5NDU4NTpbWzIwMTcyXV0sMTk0NTg2OltbMjA5MDhdXSwxOTQ1ODc6W1syMDkxN11dLDE5NDU4ODpbWzE2ODQxNV1dLDE5NDU4OTpbWzIwOTgxXV0sMTk0NTkwOltbMjA5OTVdXSwxOTQ1OTE6W1sxMzUzNV1dLDE5NDU5MjpbWzIxMDUxXV0sMTk0NTkzOltbMjEwNjJdXSwxOTQ1OTQ6W1syMTEwNl1dLDE5NDU5NTpbWzIxMTExXV0sMTk0NTk2OltbMTM1ODldXSwxOTQ1OTc6W1syMTE5MV1dLDE5NDU5ODpbWzIxMTkzXV0sMTk0NTk5OltbMjEyMjBdXSwxOTQ2MDA6W1syMTI0Ml1dLDE5NDYwMTpbWzIxMjUzXV0sMTk0NjAyOltbMjEyNTRdXSwxOTQ2MDM6W1syMTI3MV1dLDE5NDYwNDpbWzIxMzIxXV0sMTk0NjA1OltbMjEzMjldXSwxOTQ2MDY6W1syMTMzOF1dLDE5NDYwNzpbWzIxMzYzXV0sMTk0NjA4OltbMjEzNzNdXSwxOTQ2MDk6W1syMTM3NV1dLDE5NDYxMDpbWzIxMzc1XV0sMTk0NjExOltbMjEzNzVdXSwxOTQ2MTI6W1sxMzM2NzZdXSwxOTQ2MTM6W1syODc4NF1dLDE5NDYxNDpbWzIxNDUwXV0sMTk0NjE1OltbMjE0NzFdXSwxOTQ2MTY6W1sxMzM5ODddXSwxOTQ2MTc6W1syMTQ4M11dLDE5NDYxODpbWzIxNDg5XV0sMTk0NjE5OltbMjE1MTBdXSwxOTQ2MjA6W1syMTY2Ml1dLDE5NDYyMTpbWzIxNTYwXV0sMTk0NjIyOltbMjE1NzZdXSwxOTQ2MjM6W1syMTYwOF1dLDE5NDYyNDpbWzIxNjY2XV0sMTk0NjI1OltbMjE3NTBdXSwxOTQ2MjY6W1syMTc3Nl1dLDE5NDYyNzpbWzIxODQzXV0sMTk0NjI4OltbMjE4NTldXSwxOTQ2Mjk6W1syMTg5Ml1dLDE5NDYzMDpbWzIxODkyXV0sMTk0NjMxOltbMjE5MTNdXSwxOTQ2MzI6W1syMTkzMV1dLDE5NDYzMzpbWzIxOTM5XV0sMTk0NjM0OltbMjE5NTRdXSwxOTQ2MzU6W1syMjI5NF1dLDE5NDYzNjpbWzIyMDIyXV0sMTk0NjM3OltbMjIyOTVdXSwxOTQ2Mzg6W1syMjA5N11dLDE5NDYzOTpbWzIyMTMyXV0sMTk0NjQwOltbMjA5OTldXSwxOTQ2NDE6W1syMjc2Nl1dLDE5NDY0MjpbWzIyNDc4XV0sMTk0NjQzOltbMjI1MTZdXSwxOTQ2NDQ6W1syMjU0MV1dLDE5NDY0NTpbWzIyNDExXV0sMTk0NjQ2OltbMjI1NzhdXSwxOTQ2NDc6W1syMjU3N11dLDE5NDY0ODpbWzIyNzAwXV0sMTk0NjQ5OltbMTM2NDIwXV0sMTk0NjUwOltbMjI3NzBdXSwxOTQ2NTE6W1syMjc3NV1dLDE5NDY1MjpbWzIyNzkwXV0sMTk0NjUzOltbMjI4MTBdXSwxOTQ2NTQ6W1syMjgxOF1dLDE5NDY1NTpbWzIyODgyXV0sMTk0NjU2OltbMTM2ODcyXV0sMTk0NjU3OltbMTM2OTM4XV0sMTk0NjU4OltbMjMwMjBdXSwxOTQ2NTk6W1syMzA2N11dLDE5NDY2MDpbWzIzMDc5XV0sMTk0NjYxOltbMjMwMDBdXSwxOTQ2NjI6W1syMzE0Ml1dLDE5NDY2MzpbWzE0MDYyXV0sMTk0NjY0OltbMTQwNzZdXSwxOTQ2NjU6W1syMzMwNF1dLDE5NDY2NjpbWzIzMzU4XV0sMTk0NjY3OltbMjMzNThdXSwxOTQ2Njg6W1sxMzc2NzJdXSwxOTQ2Njk6W1syMzQ5MV1dLDE5NDY3MDpbWzIzNTEyXV0sMTk0NjcxOltbMjM1MjddXSwxOTQ2NzI6W1syMzUzOV1dLDE5NDY3MzpbWzEzODAwOF1dLDE5NDY3NDpbWzIzNTUxXV0sMTk0Njc1OltbMjM1NThdXSwxOTQ2NzY6W1syNDQwM11dLDE5NDY3NzpbWzIzNTg2XV0sMTk0Njc4OltbMTQyMDldXSwxOTQ2Nzk6W1syMzY0OF1dLDE5NDY4MDpbWzIzNjYyXV0sMTk0NjgxOltbMjM3NDRdXSwxOTQ2ODI6W1syMzY5M11dLDE5NDY4MzpbWzEzODcyNF1dLDE5NDY4NDpbWzIzODc1XV0sMTk0Njg1OltbMTM4NzI2XV0sMTk0Njg2OltbMjM5MThdXSwxOTQ2ODc6W1syMzkxNV1dLDE5NDY4ODpbWzIzOTMyXV0sMTk0Njg5OltbMjQwMzNdXSwxOTQ2OTA6W1syNDAzNF1dLDE5NDY5MTpbWzE0MzgzXV0sMTk0NjkyOltbMjQwNjFdXSwxOTQ2OTM6W1syNDEwNF1dLDE5NDY5NDpbWzI0MTI1XV0sMTk0Njk1OltbMjQxNjldXSwxOTQ2OTY6W1sxNDQzNF1dLDE5NDY5NzpbWzEzOTY1MV1dLDE5NDY5ODpbWzE0NDYwXV0sMTk0Njk5OltbMjQyNDBdXSwxOTQ3MDA6W1syNDI0M11dLDE5NDcwMTpbWzI0MjQ2XV0sMTk0NzAyOltbMjQyNjZdXSwxOTQ3MDM6W1sxNzI5NDZdXSwxOTQ3MDQ6W1syNDMxOF1dLDE5NDcwNTpbWzE0MDA4MV1dLDE5NDcwNjpbWzE0MDA4MV1dLDE5NDcwNzpbWzMzMjgxXV0sMTk0NzA4OltbMjQzNTRdXSwxOTQ3MDk6W1syNDM1NF1dLDE5NDcxMDpbWzE0NTM1XV0sMTk0NzExOltbMTQ0MDU2XV0sMTk0NzEyOltbMTU2MTIyXV0sMTk0NzEzOltbMjQ0MThdXSwxOTQ3MTQ6W1syNDQyN11dLDE5NDcxNTpbWzE0NTYzXV0sMTk0NzE2OltbMjQ0NzRdXSwxOTQ3MTc6W1syNDUyNV1dLDE5NDcxODpbWzI0NTM1XV0sMTk0NzE5OltbMjQ1NjldXSwxOTQ3MjA6W1syNDcwNV1dLDE5NDcyMTpbWzE0NjUwXV0sMTk0NzIyOltbMTQ2MjBdXSwxOTQ3MjM6W1syNDcyNF1dLDE5NDcyNDpbWzE0MTAxMl1dLDE5NDcyNTpbWzI0Nzc1XV0sMTk0NzI2OltbMjQ5MDRdXSwxOTQ3Mjc6W1syNDkwOF1dLDE5NDcyODpbWzI0OTEwXV0sMTk0NzI5OltbMjQ5MDhdXSwxOTQ3MzA6W1syNDk1NF1dLDE5NDczMTpbWzI0OTc0XV0sMTk0NzMyOltbMjUwMTBdXSwxOTQ3MzM6W1syNDk5Nl1dLDE5NDczNDpbWzI1MDA3XV0sMTk0NzM1OltbMjUwNTRdXSwxOTQ3MzY6W1syNTA3NF1dLDE5NDczNzpbWzI1MDc4XV0sMTk0NzM4OltbMjUxMDRdXSwxOTQ3Mzk6W1syNTExNV1dLDE5NDc0MDpbWzI1MTgxXV0sMTk0NzQxOltbMjUyNjVdXSwxOTQ3NDI6W1syNTMwMF1dLDE5NDc0MzpbWzI1NDI0XV0sMTk0NzQ0OltbMTQyMDkyXV0sMTk0NzQ1OltbMjU0MDVdXSwxOTQ3NDY6W1syNTM0MF1dLDE5NDc0NzpbWzI1NDQ4XV0sMTk0NzQ4OltbMjU0NzVdXSwxOTQ3NDk6W1syNTU3Ml1dLDE5NDc1MDpbWzE0MjMyMV1dLDE5NDc1MTpbWzI1NjM0XV0sMTk0NzUyOltbMjU1NDFdXSwxOTQ3NTM6W1syNTUxM11dLDE5NDc1NDpbWzE0ODk0XV0sMTk0NzU1OltbMjU3MDVdXSwxOTQ3NTY6W1syNTcyNl1dLDE5NDc1NzpbWzI1NzU3XV0sMTk0NzU4OltbMjU3MTldXSwxOTQ3NTk6W1sxNDk1Nl1dLDE5NDc2MDpbWzI1OTM1XV0sMTk0NzYxOltbMjU5NjRdXSwxOTQ3NjI6W1sxNDMzNzBdXSwxOTQ3NjM6W1syNjA4M11dLDE5NDc2NDpbWzI2MzYwXV0sMTk0NzY1OltbMjYxODVdXSwxOTQ3NjY6W1sxNTEyOV1dLDE5NDc2NzpbWzI2MjU3XV0sMTk0NzY4OltbMTUxMTJdXSwxOTQ3Njk6W1sxNTA3Nl1dLDE5NDc3MDpbWzIwODgyXV0sMTk0NzcxOltbMjA4ODVdXSwxOTQ3NzI6W1syNjM2OF1dLDE5NDc3MzpbWzI2MjY4XV0sMTk0Nzc0OltbMzI5NDFdXSwxOTQ3NzU6W1sxNzM2OV1dLDE5NDc3NjpbWzI2MzkxXV0sMTk0Nzc3OltbMjYzOTVdXSwxOTQ3Nzg6W1syNjQwMV1dLDE5NDc3OTpbWzI2NDYyXV0sMTk0NzgwOltbMjY0NTFdXSwxOTQ3ODE6W1sxNDQzMjNdXSwxOTQ3ODI6W1sxNTE3N11dLDE5NDc4MzpbWzI2NjE4XV0sMTk0Nzg0OltbMjY1MDFdXSwxOTQ3ODU6W1syNjcwNl1dLDE5NDc4NjpbWzI2NzU3XV0sMTk0Nzg3OltbMTQ0NDkzXV0sMTk0Nzg4OltbMjY3NjZdXSwxOTQ3ODk6W1syNjY1NV1dLDE5NDc5MDpbWzI2OTAwXV0sMTk0NzkxOltbMTUyNjFdXSwxOTQ3OTI6W1syNjk0Nl1dLDE5NDc5MzpbWzI3MDQzXV0sMTk0Nzk0OltbMjcxMTRdXSwxOTQ3OTU6W1syNzMwNF1dLDE5NDc5NjpbWzE0NTA1OV1dLDE5NDc5NzpbWzI3MzU1XV0sMTk0Nzk4OltbMTUzODRdXSwxOTQ3OTk6W1syNzQyNV1dLDE5NDgwMDpbWzE0NTU3NV1dLDE5NDgwMTpbWzI3NDc2XV0sMTk0ODAyOltbMTU0MzhdXSwxOTQ4MDM6W1syNzUwNl1dLDE5NDgwNDpbWzI3NTUxXV0sMTk0ODA1OltbMjc1NzhdXSwxOTQ4MDY6W1syNzU3OV1dLDE5NDgwNzpbWzE0NjA2MV1dLDE5NDgwODpbWzEzODUwN11dLDE5NDgwOTpbWzE0NjE3MF1dLDE5NDgxMDpbWzI3NzI2XV0sMTk0ODExOltbMTQ2NjIwXV0sMTk0ODEyOltbMjc4MzldXSwxOTQ4MTM6W1syNzg1M11dLDE5NDgxNDpbWzI3NzUxXV0sMTk0ODE1OltbMjc5MjZdXX0sCjYzNzQ0Ons2Mzc0NDpbWzM1OTEyXV0sNjM3NDU6W1syNjM1Nl1dLDYzNzQ2OltbMzY1NTRdXSw2Mzc0NzpbWzM2MDQwXV0sNjM3NDg6W1syODM2OV1dLDYzNzQ5OltbMjAwMThdXSw2Mzc1MDpbWzIxNDc3XV0sNjM3NTE6W1s0MDg2MF1dLDYzNzUyOltbNDA4NjBdXSw2Mzc1MzpbWzIyODY1XV0sNjM3NTQ6W1szNzMyOV1dLDYzNzU1OltbMjE4OTVdXSw2Mzc1NjpbWzIyODU2XV0sNjM3NTc6W1syNTA3OF1dLDYzNzU4OltbMzAzMTNdXSw2Mzc1OTpbWzMyNjQ1XV0sNjM3NjA6W1szNDM2N11dLDYzNzYxOltbMzQ3NDZdXSw2Mzc2MjpbWzM1MDY0XV0sNjM3NjM6W1szNzAwN11dLDYzNzY0OltbMjcxMzhdXSw2Mzc2NTpbWzI3OTMxXV0sNjM3NjY6W1syODg4OV1dLDYzNzY3OltbMjk2NjJdXSw2Mzc2ODpbWzMzODUzXV0sNjM3Njk6W1szNzIyNl1dLDYzNzcwOltbMzk0MDldXSw2Mzc3MTpbWzIwMDk4XV0sNjM3NzI6W1syMTM2NV1dLDYzNzczOltbMjczOTZdXSw2Mzc3NDpbWzI5MjExXV0sNjM3NzU6W1szNDM0OV1dLDYzNzc2OltbNDA0NzhdXSw2Mzc3NzpbWzIzODg4XV0sNjM3Nzg6W1syODY1MV1dLDYzNzc5OltbMzQyNTNdXSw2Mzc4MDpbWzM1MTcyXV0sNjM3ODE6W1syNTI4OV1dLDYzNzgyOltbMzMyNDBdXSw2Mzc4MzpbWzM0ODQ3XV0sNjM3ODQ6W1syNDI2Nl1dLDYzNzg1OltbMjYzOTFdXSw2Mzc4NjpbWzI4MDEwXV0sNjM3ODc6W1syOTQzNl1dLDYzNzg4OltbMzcwNzBdXSw2Mzc4OTpbWzIwMzU4XV0sNjM3OTA6W1syMDkxOV1dLDYzNzkxOltbMjEyMTRdXSw2Mzc5MjpbWzI1Nzk2XV0sNjM3OTM6W1syNzM0N11dLDYzNzk0OltbMjkyMDBdXSw2Mzc5NTpbWzMwNDM5XV0sNjM3OTY6W1szMjc2OV1dLDYzNzk3OltbMzQzMTBdXSw2Mzc5ODpbWzM0Mzk2XV0sNjM3OTk6W1szNjMzNV1dLDYzODAwOltbMzg3MDZdXSw2MzgwMTpbWzM5NzkxXV0sNjM4MDI6W1s0MDQ0Ml1dLDYzODAzOltbMzA4NjBdXSw2MzgwNDpbWzMxMTAzXV0sNjM4MDU6W1szMjE2MF1dLDYzODA2OltbMzM3MzddXSw2MzgwNzpbWzM3NjM2XV0sNjM4MDg6W1s0MDU3NV1dLDYzODA5OltbMzU1NDJdXSw2MzgxMDpbWzIyNzUxXV0sNjM4MTE6W1syNDMyNF1dLDYzODEyOltbMzE4NDBdXSw2MzgxMzpbWzMyODk0XV0sNjM4MTQ6W1syOTI4Ml1dLDYzODE1OltbMzA5MjJdXSw2MzgxNjpbWzM2MDM0XV0sNjM4MTc6W1szODY0N11dLDYzODE4OltbMjI3NDRdXSw2MzgxOTpbWzIzNjUwXV0sNjM4MjA6W1syNzE1NV1dLDYzODIxOltbMjgxMjJdXSw2MzgyMjpbWzI4NDMxXV0sNjM4MjM6W1szMjA0N11dLDYzODI0OltbMzIzMTFdXSw2MzgyNTpbWzM4NDc1XV0sNjM4MjY6W1syMTIwMl1dLDYzODI3OltbMzI5MDddXSw2MzgyODpbWzIwOTU2XV0sNjM4Mjk6W1syMDk0MF1dLDYzODMwOltbMzEyNjBdXSw2MzgzMTpbWzMyMTkwXV0sNjM4MzI6W1szMzc3N11dLDYzODMzOltbMzg1MTddXSw2MzgzNDpbWzM1NzEyXV0sNjM4MzU6W1syNTI5NV1dLDYzODM2OltbMjcxMzhdXSw2MzgzNzpbWzM1NTgyXV0sNjM4Mzg6W1syMDAyNV1dLDYzODM5OltbMjM1MjddXSw2Mzg0MDpbWzI0NTk0XV0sNjM4NDE6W1syOTU3NV1dLDYzODQyOltbMzAwNjRdXSw2Mzg0MzpbWzIxMjcxXV0sNjM4NDQ6W1szMDk3MV1dLDYzODQ1OltbMjA0MTVdXSw2Mzg0NjpbWzI0NDg5XV0sNjM4NDc6W1sxOTk4MV1dLDYzODQ4OltbMjc4NTJdXSw2Mzg0OTpbWzI1OTc2XV0sNjM4NTA6W1szMjAzNF1dLDYzODUxOltbMjE0NDNdXSw2Mzg1MjpbWzIyNjIyXV0sNjM4NTM6W1szMDQ2NV1dLDYzODU0OltbMzM4NjVdXSw2Mzg1NTpbWzM1NDk4XV0sNjM4NTY6W1syNzU3OF1dLDYzODU3OltbMzY3ODRdXSw2Mzg1ODpbWzI3Nzg0XV0sNjM4NTk6W1syNTM0Ml1dLDYzODYwOltbMzM1MDldXSw2Mzg2MTpbWzI1NTA0XV0sNjM4NjI6W1szMDA1M11dLDYzODYzOltbMjAxNDJdXSw2Mzg2NDpbWzIwODQxXV0sNjM4NjU6W1syMDkzN11dLDYzODY2OltbMjY3NTNdXSw2Mzg2NzpbWzMxOTc1XV0sNjM4Njg6W1szMzM5MV1dLDYzODY5OltbMzU1MzhdXSw2Mzg3MDpbWzM3MzI3XV0sNjM4NzE6W1syMTIzN11dLDYzODcyOltbMjE1NzBdXSw2Mzg3MzpbWzIyODk5XV0sNjM4NzQ6W1syNDMwMF1dLDYzODc1OltbMjYwNTNdXSw2Mzg3NjpbWzI4NjcwXV0sNjM4Nzc6W1szMTAxOF1dLDYzODc4OltbMzgzMTddXSw2Mzg3OTpbWzM5NTMwXV0sNjM4ODA6W1s0MDU5OV1dLDYzODgxOltbNDA2NTRdXSw2Mzg4MjpbWzIxMTQ3XV0sNjM4ODM6W1syNjMxMF1dLDYzODg0OltbMjc1MTFdXSw2Mzg4NTpbWzM2NzA2XV0sNjM4ODY6W1syNDE4MF1dLDYzODg3OltbMjQ5NzZdXSw2Mzg4ODpbWzI1MDg4XV0sNjM4ODk6W1syNTc1NF1dLDYzODkwOltbMjg0NTFdXSw2Mzg5MTpbWzI5MDAxXV0sNjM4OTI6W1syOTgzM11dLDYzODkzOltbMzExNzhdXSw2Mzg5NDpbWzMyMjQ0XV0sNjM4OTU6W1szMjg3OV1dLDYzODk2OltbMzY2NDZdXSw2Mzg5NzpbWzM0MDMwXV0sNjM4OTg6W1szNjg5OV1dLDYzODk5OltbMzc3MDZdXSw2MzkwMDpbWzIxMDE1XV0sNjM5MDE6W1syMTE1NV1dLDYzOTAyOltbMjE2OTNdXSw2MzkwMzpbWzI4ODcyXV0sNjM5MDQ6W1szNTAxMF1dLDYzOTA1OltbMzU0OThdXSw2MzkwNjpbWzI0MjY1XV0sNjM5MDc6W1syNDU2NV1dLDYzOTA4OltbMjU0NjddXSw2MzkwOTpbWzI3NTY2XV0sNjM5MTA6W1szMTgwNl1dLDYzOTExOltbMjk1NTddXSw2MzkxMjpbWzIwMTk2XV0sNjM5MTM6W1syMjI2NV1dLDYzOTE0OltbMjM1MjddXSw2MzkxNTpbWzIzOTk0XV0sNjM5MTY6W1syNDYwNF1dLDYzOTE3OltbMjk2MThdXSw2MzkxODpbWzI5ODAxXV0sNjM5MTk6W1szMjY2Nl1dLDYzOTIwOltbMzI4MzhdXSw2MzkyMTpbWzM3NDI4XV0sNjM5MjI6W1szODY0Nl1dLDYzOTIzOltbMzg3MjhdXSw2MzkyNDpbWzM4OTM2XV0sNjM5MjU6W1syMDM2M11dLDYzOTI2OltbMzExNTBdXSw2MzkyNzpbWzM3MzAwXV0sNjM5Mjg6W1szODU4NF1dLDYzOTI5OltbMjQ4MDFdXSw2MzkzMDpbWzIwMTAyXV0sNjM5MzE6W1syMDY5OF1dLDYzOTMyOltbMjM1MzRdXSw2MzkzMzpbWzIzNjE1XV0sNjM5MzQ6W1syNjAwOV1dLDYzOTM1OltbMjcxMzhdXSw2MzkzNjpbWzI5MTM0XV0sNjM5Mzc6W1szMDI3NF1dLDYzOTM4OltbMzQwNDRdXSw2MzkzOTpbWzM2OTg4XV0sNjM5NDA6W1s0MDg0NV1dLDYzOTQxOltbMjYyNDhdXSw2Mzk0MjpbWzM4NDQ2XV0sNjM5NDM6W1syMTEyOV1dLDYzOTQ0OltbMjY0OTFdXSw2Mzk0NTpbWzI2NjExXV0sNjM5NDY6W1syNzk2OV1dLDYzOTQ3OltbMjgzMTZdXSw2Mzk0ODpbWzI5NzA1XV0sNjM5NDk6W1szMDA0MV1dLDYzOTUwOltbMzA4MjddXSw2Mzk1MTpbWzMyMDE2XV0sNjM5NTI6W1szOTAwNl1dLDYzOTUzOltbMjA4NDVdXSw2Mzk1NDpbWzI1MTM0XV0sNjM5NTU6W1szODUyMF1dLDYzOTU2OltbMjA1MjNdXSw2Mzk1NzpbWzIzODMzXV0sNjM5NTg6W1syODEzOF1dLDYzOTU5OltbMzY2NTBdXSw2Mzk2MDpbWzI0NDU5XV0sNjM5NjE6W1syNDkwMF1dLDYzOTYyOltbMjY2NDddXSw2Mzk2MzpbWzI5NTc1XV0sNjM5NjQ6W1szODUzNF1dLDYzOTY1OltbMjEwMzNdXSw2Mzk2NjpbWzIxNTE5XV0sNjM5Njc6W1syMzY1M11dLDYzOTY4OltbMjYxMzFdXSw2Mzk2OTpbWzI2NDQ2XV0sNjM5NzA6W1syNjc5Ml1dLDYzOTcxOltbMjc4NzddXSw2Mzk3MjpbWzI5NzAyXV0sNjM5NzM6W1szMDE3OF1dLDYzOTc0OltbMzI2MzNdXSw2Mzk3NTpbWzM1MDIzXV0sNjM5NzY6W1szNTA0MV1dLDYzOTc3OltbMzczMjRdXSw2Mzk3ODpbWzM4NjI2XV0sNjM5Nzk6W1syMTMxMV1dLDYzOTgwOltbMjgzNDZdXSw2Mzk4MTpbWzIxNTMzXV0sNjM5ODI6W1syOTEzNl1dLDYzOTgzOltbMjk4NDhdXSw2Mzk4NDpbWzM0Mjk4XV0sNjM5ODU6W1szODU2M11dLDYzOTg2OltbNDAwMjNdXSw2Mzk4NzpbWzQwNjA3XV0sNjM5ODg6W1syNjUxOV1dLDYzOTg5OltbMjgxMDddXSw2Mzk5MDpbWzMzMjU2XV0sNjM5OTE6W1szMTQzNV1dLDYzOTkyOltbMzE1MjBdXSw2Mzk5MzpbWzMxODkwXV0sNjM5OTQ6W1syOTM3Nl1dLDYzOTk1OltbMjg4MjVdXSw2Mzk5NjpbWzM1NjcyXV0sNjM5OTc6W1syMDE2MF1dLDYzOTk4OltbMzM1OTBdXSw2Mzk5OTpbWzIxMDUwXV0sMTk0ODE2OltbMjc5NjZdXSwxOTQ4MTc6W1syODAyM11dLDE5NDgxODpbWzI3OTY5XV0sMTk0ODE5OltbMjgwMDldXSwxOTQ4MjA6W1syODAyNF1dLDE5NDgyMTpbWzI4MDM3XV0sMTk0ODIyOltbMTQ2NzE4XV0sMTk0ODIzOltbMjc5NTZdXSwxOTQ4MjQ6W1syODIwN11dLDE5NDgyNTpbWzI4MjcwXV0sMTk0ODI2OltbMTU2NjddXSwxOTQ4Mjc6W1syODM2M11dLDE5NDgyODpbWzI4MzU5XV0sMTk0ODI5OltbMTQ3MTUzXV0sMTk0ODMwOltbMjgxNTNdXSwxOTQ4MzE6W1syODUyNl1dLDE5NDgzMjpbWzE0NzI5NF1dLDE5NDgzMzpbWzE0NzM0Ml1dLDE5NDgzNDpbWzI4NjE0XV0sMTk0ODM1OltbMjg3MjldXSwxOTQ4MzY6W1syODcwMl1dLDE5NDgzNzpbWzI4Njk5XV0sMTk0ODM4OltbMTU3NjZdXSwxOTQ4Mzk6W1syODc0Nl1dLDE5NDg0MDpbWzI4Nzk3XV0sMTk0ODQxOltbMjg3OTFdXSwxOTQ4NDI6W1syODg0NV1dLDE5NDg0MzpbWzEzMjM4OV1dLDE5NDg0NDpbWzI4OTk3XV0sMTk0ODQ1OltbMTQ4MDY3XV0sMTk0ODQ2OltbMjkwODRdXSwxOTQ4NDc6W1sxNDgzOTVdXSwxOTQ4NDg6W1syOTIyNF1dLDE5NDg0OTpbWzI5MjM3XV0sMTk0ODUwOltbMjkyNjRdXSwxOTQ4NTE6W1sxNDkwMDBdXSwxOTQ4NTI6W1syOTMxMl1dLDE5NDg1MzpbWzI5MzMzXV0sMTk0ODU0OltbMTQ5MzAxXV0sMTk0ODU1OltbMTQ5NTI0XV0sMTk0ODU2OltbMjk1NjJdXSwxOTQ4NTc6W1syOTU3OV1dLDE5NDg1ODpbWzE2MDQ0XV0sMTk0ODU5OltbMjk2MDVdXSwxOTQ4NjA6W1sxNjA1Nl1dLDE5NDg2MTpbWzE2MDU2XV0sMTk0ODYyOltbMjk3NjddXSwxOTQ4NjM6W1syOTc4OF1dLDE5NDg2NDpbWzI5ODA5XV0sMTk0ODY1OltbMjk4MjldXSwxOTQ4NjY6W1syOTg5OF1dLDE5NDg2NzpbWzE2MTU1XV0sMTk0ODY4OltbMjk5ODhdXSwxOTQ4Njk6W1sxNTA1ODJdXSwxOTQ4NzA6W1szMDAxNF1dLDE5NDg3MTpbWzE1MDY3NF1dLDE5NDg3MjpbWzMwMDY0XV0sMTk0ODczOltbMTM5Njc5XV0sMTk0ODc0OltbMzAyMjRdXSwxOTQ4NzU6W1sxNTE0NTddXSwxOTQ4NzY6W1sxNTE0ODBdXSwxOTQ4Nzc6W1sxNTE2MjBdXSwxOTQ4Nzg6W1sxNjM4MF1dLDE5NDg3OTpbWzE2MzkyXV0sMTk0ODgwOltbMzA0NTJdXSwxOTQ4ODE6W1sxNTE3OTVdXSwxOTQ4ODI6W1sxNTE3OTRdXSwxOTQ4ODM6W1sxNTE4MzNdXSwxOTQ4ODQ6W1sxNTE4NTldXSwxOTQ4ODU6W1szMDQ5NF1dLDE5NDg4NjpbWzMwNDk1XV0sMTk0ODg3OltbMzA0OTVdXSwxOTQ4ODg6W1szMDUzOF1dLDE5NDg4OTpbWzE2NDQxXV0sMTk0ODkwOltbMzA2MDNdXSwxOTQ4OTE6W1sxNjQ1NF1dLDE5NDg5MjpbWzE2NTM0XV0sMTk0ODkzOltbMTUyNjA1XV0sMTk0ODk0OltbMzA3OThdXSwxOTQ4OTU6W1szMDg2MF1dLDE5NDg5NjpbWzMwOTI0XV0sMTk0ODk3OltbMTY2MTFdXSwxOTQ4OTg6W1sxNTMxMjZdXSwxOTQ4OTk6W1szMTA2Ml1dLDE5NDkwMDpbWzE1MzI0Ml1dLDE5NDkwMTpbWzE1MzI4NV1dLDE5NDkwMjpbWzMxMTE5XV0sMTk0OTAzOltbMzEyMTFdXSwxOTQ5MDQ6W1sxNjY4N11dLDE5NDkwNTpbWzMxMjk2XV0sMTk0OTA2OltbMzEzMDZdXSwxOTQ5MDc6W1szMTMxMV1dLDE5NDkwODpbWzE1Mzk4MF1dLDE5NDkwOTpbWzE1NDI3OV1dLDE5NDkxMDpbWzE1NDI3OV1dLDE5NDkxMTpbWzMxNDcwXV0sMTk0OTEyOltbMTY4OThdXSwxOTQ5MTM6W1sxNTQ1MzldXSwxOTQ5MTQ6W1szMTY4Nl1dLDE5NDkxNTpbWzMxNjg5XV0sMTk0OTE2OltbMTY5MzVdXSwxOTQ5MTc6W1sxNTQ3NTJdXSwxOTQ5MTg6W1szMTk1NF1dLDE5NDkxOTpbWzE3MDU2XV0sMTk0OTIwOltbMzE5NzZdXSwxOTQ5MjE6W1szMTk3MV1dLDE5NDkyMjpbWzMyMDAwXV0sMTk0OTIzOltbMTU1NTI2XV0sMTk0OTI0OltbMzIwOTldXSwxOTQ5MjU6W1sxNzE1M11dLDE5NDkyNjpbWzMyMTk5XV0sMTk0OTI3OltbMzIyNThdXSwxOTQ5Mjg6W1szMjMyNV1dLDE5NDkyOTpbWzE3MjA0XV0sMTk0OTMwOltbMTU2MjAwXV0sMTk0OTMxOltbMTU2MjMxXV0sMTk0OTMyOltbMTcyNDFdXSwxOTQ5MzM6W1sxNTYzNzddXSwxOTQ5MzQ6W1szMjYzNF1dLDE5NDkzNTpbWzE1NjQ3OF1dLDE5NDkzNjpbWzMyNjYxXV0sMTk0OTM3OltbMzI3NjJdXSwxOTQ5Mzg6W1szMjc3M11dLDE5NDkzOTpbWzE1Njg5MF1dLDE5NDk0MDpbWzE1Njk2M11dLDE5NDk0MTpbWzMyODY0XV0sMTk0OTQyOltbMTU3MDk2XV0sMTk0OTQzOltbMzI4ODBdXSwxOTQ5NDQ6W1sxNDQyMjNdXSwxOTQ5NDU6W1sxNzM2NV1dLDE5NDk0NjpbWzMyOTQ2XV0sMTk0OTQ3OltbMzMwMjddXSwxOTQ5NDg6W1sxNzQxOV1dLDE5NDk0OTpbWzMzMDg2XV0sMTk0OTUwOltbMjMyMjFdXSwxOTQ5NTE6W1sxNTc2MDddXSwxOTQ5NTI6W1sxNTc2MjFdXSwxOTQ5NTM6W1sxNDQyNzVdXSwxOTQ5NTQ6W1sxNDQyODRdXSwxOTQ5NTU6W1szMzI4MV1dLDE5NDk1NjpbWzMzMjg0XV0sMTk0OTU3OltbMzY3NjZdXSwxOTQ5NTg6W1sxNzUxNV1dLDE5NDk1OTpbWzMzNDI1XV0sMTk0OTYwOltbMzM0MTldXSwxOTQ5NjE6W1szMzQzN11dLDE5NDk2MjpbWzIxMTcxXV0sMTk0OTYzOltbMzM0NTddXSwxOTQ5NjQ6W1szMzQ1OV1dLDE5NDk2NTpbWzMzNDY5XV0sMTk0OTY2OltbMzM1MTBdXSwxOTQ5Njc6W1sxNTg1MjRdXSwxOTQ5Njg6W1szMzUwOV1dLDE5NDk2OTpbWzMzNTY1XV0sMTk0OTcwOltbMzM2MzVdXSwxOTQ5NzE6W1szMzcwOV1dLDE5NDk3MjpbWzMzNTcxXV0sMTk0OTczOltbMzM3MjVdXSwxOTQ5NzQ6W1szMzc2N11dLDE5NDk3NTpbWzMzODc5XV0sMTk0OTc2OltbMzM2MTldXSwxOTQ5Nzc6W1szMzczOF1dLDE5NDk3ODpbWzMzNzQwXV0sMTk0OTc5OltbMzM3NTZdXSwxOTQ5ODA6W1sxNTg3NzRdXSwxOTQ5ODE6W1sxNTkwODNdXSwxOTQ5ODI6W1sxNTg5MzNdXSwxOTQ5ODM6W1sxNzcwN11dLDE5NDk4NDpbWzM0MDMzXV0sMTk0OTg1OltbMzQwMzVdXSwxOTQ5ODY6W1szNDA3MF1dLDE5NDk4NzpbWzE2MDcxNF1dLDE5NDk4ODpbWzM0MTQ4XV0sMTk0OTg5OltbMTU5NTMyXV0sMTk0OTkwOltbMTc3NTddXSwxOTQ5OTE6W1sxNzc2MV1dLDE5NDk5MjpbWzE1OTY2NV1dLDE5NDk5MzpbWzE1OTk1NF1dLDE5NDk5NDpbWzE3NzcxXV0sMTk0OTk1OltbMzQzODRdXSwxOTQ5OTY6W1szNDM5Nl1dLDE5NDk5NzpbWzM0NDA3XV0sMTk0OTk4OltbMzQ0MDldXSwxOTQ5OTk6W1szNDQ3M11dLDE5NTAwMDpbWzM0NDQwXV0sMTk1MDAxOltbMzQ1NzRdXSwxOTUwMDI6W1szNDUzMF1dLDE5NTAwMzpbWzM0NjgxXV0sMTk1MDA0OltbMzQ2MDBdXSwxOTUwMDU6W1szNDY2N11dLDE5NTAwNjpbWzM0Njk0XV0sMTk1MDA3OltbMTc4NzldXSwxOTUwMDg6W1szNDc4NV1dLDE5NTAwOTpbWzM0ODE3XV0sMTk1MDEwOltbMTc5MTNdXSwxOTUwMTE6W1szNDkxMl1dLDE5NTAxMjpbWzM0OTE1XV0sMTk1MDEzOltbMTYxMzgzXV0sMTk1MDE0OltbMzUwMzFdXSwxOTUwMTU6W1szNTAzOF1dLDE5NTAxNjpbWzE3OTczXV0sMTk1MDE3OltbMzUwNjZdXSwxOTUwMTg6W1sxMzQ5OV1dLDE5NTAxOTpbWzE2MTk2Nl1dLDE5NTAyMDpbWzE2MjE1MF1dLDE5NTAyMTpbWzE4MTEwXV0sMTk1MDIyOltbMTgxMTldXSwxOTUwMjM6W1szNTQ4OF1dLDE5NTAyNDpbWzM1NTY1XV0sMTk1MDI1OltbMzU3MjJdXSwxOTUwMjY6W1szNTkyNV1dLDE5NTAyNzpbWzE2Mjk4NF1dLDE5NTAyODpbWzM2MDExXV0sMTk1MDI5OltbMzYwMzNdXSwxOTUwMzA6W1szNjEyM11dLDE5NTAzMTpbWzM2MjE1XV0sMTk1MDMyOltbMTYzNjMxXV0sMTk1MDMzOltbMTMzMTI0XV0sMTk1MDM0OltbMzYyOTldXSwxOTUwMzU6W1szNjI4NF1dLDE5NTAzNjpbWzM2MzM2XV0sMTk1MDM3OltbMTMzMzQyXV0sMTk1MDM4OltbMzY1NjRdXSwxOTUwMzk6W1szNjY2NF1dLDE5NTA0MDpbWzE2NTMzMF1dLDE5NTA0MTpbWzE2NTM1N11dLDE5NTA0MjpbWzM3MDEyXV0sMTk1MDQzOltbMzcxMDVdXSwxOTUwNDQ6W1szNzEzN11dLDE5NTA0NTpbWzE2NTY3OF1dLDE5NTA0NjpbWzM3MTQ3XV0sMTk1MDQ3OltbMzc0MzJdXSwxOTUwNDg6W1szNzU5MV1dLDE5NTA0OTpbWzM3NTkyXV0sMTk1MDUwOltbMzc1MDBdXSwxOTUwNTE6W1szNzg4MV1dLDE5NTA1MjpbWzM3OTA5XV0sMTk1MDUzOltbMTY2OTA2XV0sMTk1MDU0OltbMzgyODNdXSwxOTUwNTU6W1sxODgzN11dLDE5NTA1NjpbWzM4MzI3XV0sMTk1MDU3OltbMTY3Mjg3XV0sMTk1MDU4OltbMTg5MThdXSwxOTUwNTk6W1szODU5NV1dLDE5NTA2MDpbWzIzOTg2XV0sMTk1MDYxOltbMzg2OTFdXSwxOTUwNjI6W1sxNjgyNjFdXSwxOTUwNjM6W1sxNjg0NzRdXSwxOTUwNjQ6W1sxOTA1NF1dLDE5NTA2NTpbWzE5MDYyXV0sMTk1MDY2OltbMzg4ODBdXSwxOTUwNjc6W1sxNjg5NzBdXSwxOTUwNjg6W1sxOTEyMl1dLDE5NTA2OTpbWzE2OTExMF1dLDE5NTA3MDpbWzM4OTIzXV0sMTk1MDcxOltbMzg5MjNdXX0sCjY0MDAwOns2NDAwMDpbWzIwOTk5XV0sNjQwMDE6W1syNDIzMF1dLDY0MDAyOltbMjUyOTldXSw2NDAwMzpbWzMxOTU4XV0sNjQwMDQ6W1syMzQyOV1dLDY0MDA1OltbMjc5MzRdXSw2NDAwNjpbWzI2MjkyXV0sNjQwMDc6W1szNjY2N11dLDY0MDA4OltbMzQ4OTJdXSw2NDAwOTpbWzM4NDc3XV0sNjQwMTA6W1szNTIxMV1dLDY0MDExOltbMjQyNzVdXSw2NDAxMjpbWzIwODAwXV0sNjQwMTM6W1syMTk1Ml1dLDY0MDE2OltbMjI2MThdXSw2NDAxODpbWzI2MjI4XV0sNjQwMjE6W1syMDk1OF1dLDY0MDIyOltbMjk0ODJdXSw2NDAyMzpbWzMwNDEwXV0sNjQwMjQ6W1szMTAzNl1dLDY0MDI1OltbMzEwNzBdXSw2NDAyNjpbWzMxMDc3XV0sNjQwMjc6W1szMTExOV1dLDY0MDI4OltbMzg3NDJdXSw2NDAyOTpbWzMxOTM0XV0sNjQwMzA6W1szMjcwMV1dLDY0MDMyOltbMzQzMjJdXSw2NDAzNDpbWzM1NTc2XV0sNjQwMzc6W1szNjkyMF1dLDY0MDM4OltbMzcxMTddXSw2NDA0MjpbWzM5MTUxXV0sNjQwNDM6W1szOTE2NF1dLDY0MDQ0OltbMzkyMDhdXSw2NDA0NTpbWzQwMzcyXV0sNjQwNDY6W1szNzA4Nl1dLDY0MDQ3OltbMzg1ODNdXSw2NDA0ODpbWzIwMzk4XV0sNjQwNDk6W1syMDcxMV1dLDY0MDUwOltbMjA4MTNdXSw2NDA1MTpbWzIxMTkzXV0sNjQwNTI6W1syMTIyMF1dLDY0MDUzOltbMjEzMjldXSw2NDA1NDpbWzIxOTE3XV0sNjQwNTU6W1syMjAyMl1dLDY0MDU2OltbMjIxMjBdXSw2NDA1NzpbWzIyNTkyXV0sNjQwNTg6W1syMjY5Nl1dLDY0MDU5OltbMjM2NTJdXSw2NDA2MDpbWzIzNjYyXV0sNjQwNjE6W1syNDcyNF1dLDY0MDYyOltbMjQ5MzZdXSw2NDA2MzpbWzI0OTc0XV0sNjQwNjQ6W1syNTA3NF1dLDY0MDY1OltbMjU5MzVdXSw2NDA2NjpbWzI2MDgyXV0sNjQwNjc6W1syNjI1N11dLDY0MDY4OltbMjY3NTddXSw2NDA2OTpbWzI4MDIzXV0sNjQwNzA6W1syODE4Nl1dLDY0MDcxOltbMjg0NTBdXSw2NDA3MjpbWzI5MDM4XV0sNjQwNzM6W1syOTIyN11dLDY0MDc0OltbMjk3MzBdXSw2NDA3NTpbWzMwODY1XV0sNjQwNzY6W1szMTAzOF1dLDY0MDc3OltbMzEwNDldXSw2NDA3ODpbWzMxMDQ4XV0sNjQwNzk6W1szMTA1Nl1dLDY0MDgwOltbMzEwNjJdXSw2NDA4MTpbWzMxMDY5XV0sNjQwODI6W1szMTExN11dLDY0MDgzOltbMzExMThdXSw2NDA4NDpbWzMxMjk2XV0sNjQwODU6W1szMTM2MV1dLDY0MDg2OltbMzE2ODBdXSw2NDA4NzpbWzMyMjQ0XV0sNjQwODg6W1szMjI2NV1dLDY0MDg5OltbMzIzMjFdXSw2NDA5MDpbWzMyNjI2XV0sNjQwOTE6W1szMjc3M11dLDY0MDkyOltbMzMyNjFdXSw2NDA5MzpbWzMzNDAxXV0sNjQwOTQ6W1szMzQwMV1dLDY0MDk1OltbMzM4NzldXSw2NDA5NjpbWzM1MDg4XV0sNjQwOTc6W1szNTIyMl1dLDY0MDk4OltbMzU1ODVdXSw2NDA5OTpbWzM1NjQxXV0sNjQxMDA6W1szNjA1MV1dLDY0MTAxOltbMzYxMDRdXSw2NDEwMjpbWzM2NzkwXV0sNjQxMDM6W1szNjkyMF1dLDY0MTA0OltbMzg2MjddXSw2NDEwNTpbWzM4OTExXV0sNjQxMDY6W1szODk3MV1dLDY0MTA3OltbMjQ2OTNdXSw2NDEwODpbWzE0ODIwNl1dLDY0MTA5OltbMzMzMDRdXSw2NDExMjpbWzIwMDA2XV0sNjQxMTM6W1syMDkxN11dLDY0MTE0OltbMjA4NDBdXSw2NDExNTpbWzIwMzUyXV0sNjQxMTY6W1syMDgwNV1dLDY0MTE3OltbMjA4NjRdXSw2NDExODpbWzIxMTkxXV0sNjQxMTk6W1syMTI0Ml1dLDY0MTIwOltbMjE5MTddXSw2NDEyMTpbWzIxODQ1XV0sNjQxMjI6W1syMTkxM11dLDY0MTIzOltbMjE5ODZdXSw2NDEyNDpbWzIyNjE4XV0sNjQxMjU6W1syMjcwN11dLDY0MTI2OltbMjI4NTJdXSw2NDEyNzpbWzIyODY4XV0sNjQxMjg6W1syMzEzOF1dLDY0MTI5OltbMjMzMzZdXSw2NDEzMDpbWzI0Mjc0XV0sNjQxMzE6W1syNDI4MV1dLDY0MTMyOltbMjQ0MjVdXSw2NDEzMzpbWzI0NDkzXV0sNjQxMzQ6W1syNDc5Ml1dLDY0MTM1OltbMjQ5MTBdXSw2NDEzNjpbWzI0ODQwXV0sNjQxMzc6W1syNDk3NF1dLDY0MTM4OltbMjQ5MjhdXSw2NDEzOTpbWzI1MDc0XV0sNjQxNDA6W1syNTE0MF1dLDY0MTQxOltbMjU1NDBdXSw2NDE0MjpbWzI1NjI4XV0sNjQxNDM6W1syNTY4Ml1dLDY0MTQ0OltbMjU5NDJdXSw2NDE0NTpbWzI2MjI4XV0sNjQxNDY6W1syNjM5MV1dLDY0MTQ3OltbMjYzOTVdXSw2NDE0ODpbWzI2NDU0XV0sNjQxNDk6W1syNzUxM11dLDY0MTUwOltbMjc1NzhdXSw2NDE1MTpbWzI3OTY5XV0sNjQxNTI6W1syODM3OV1dLDY0MTUzOltbMjgzNjNdXSw2NDE1NDpbWzI4NDUwXV0sNjQxNTU6W1syODcwMl1dLDY0MTU2OltbMjkwMzhdXSw2NDE1NzpbWzMwNjMxXV0sNjQxNTg6W1syOTIzN11dLDY0MTU5OltbMjkzNTldXSw2NDE2MDpbWzI5NDgyXV0sNjQxNjE6W1syOTgwOV1dLDY0MTYyOltbMjk5NThdXSw2NDE2MzpbWzMwMDExXV0sNjQxNjQ6W1szMDIzN11dLDY0MTY1OltbMzAyMzldXSw2NDE2NjpbWzMwNDEwXV0sNjQxNjc6W1szMDQyN11dLDY0MTY4OltbMzA0NTJdXSw2NDE2OTpbWzMwNTM4XV0sNjQxNzA6W1szMDUyOF1dLDY0MTcxOltbMzA5MjRdXSw2NDE3MjpbWzMxNDA5XV0sNjQxNzM6W1szMTY4MF1dLDY0MTc0OltbMzE4NjddXSw2NDE3NTpbWzMyMDkxXV0sNjQxNzY6W1szMjI0NF1dLDY0MTc3OltbMzI1NzRdXSw2NDE3ODpbWzMyNzczXV0sNjQxNzk6W1szMzYxOF1dLDY0MTgwOltbMzM3NzVdXSw2NDE4MTpbWzM0NjgxXV0sNjQxODI6W1szNTEzN11dLDY0MTgzOltbMzUyMDZdXSw2NDE4NDpbWzM1MjIyXV0sNjQxODU6W1szNTUxOV1dLDY0MTg2OltbMzU1NzZdXSw2NDE4NzpbWzM1NTMxXV0sNjQxODg6W1szNTU4NV1dLDY0MTg5OltbMzU1ODJdXSw2NDE5MDpbWzM1NTY1XV0sNjQxOTE6W1szNTY0MV1dLDY0MTkyOltbMzU3MjJdXSw2NDE5MzpbWzM2MTA0XV0sNjQxOTQ6W1szNjY2NF1dLDY0MTk1OltbMzY5NzhdXSw2NDE5NjpbWzM3MjczXV0sNjQxOTc6W1szNzQ5NF1dLDY0MTk4OltbMzg1MjRdXSw2NDE5OTpbWzM4NjI3XV0sNjQyMDA6W1szODc0Ml1dLDY0MjAxOltbMzg4NzVdXSw2NDIwMjpbWzM4OTExXV0sNjQyMDM6W1szODkyM11dLDY0MjA0OltbMzg5NzFdXSw2NDIwNTpbWzM5Njk4XV0sNjQyMDY6W1s0MDg2MF1dLDY0MjA3OltbMTQxMzg2XV0sNjQyMDg6W1sxNDEzODBdXSw2NDIwOTpbWzE0NDM0MV1dLDY0MjEwOltbMTUyNjFdXSw2NDIxMTpbWzE2NDA4XV0sNjQyMTI6W1sxNjQ0MV1dLDY0MjEzOltbMTUyMTM3XV0sNjQyMTQ6W1sxNTQ4MzJdXSw2NDIxNTpbWzE2MzUzOV1dLDY0MjE2OltbNDA3NzFdXSw2NDIxNzpbWzQwODQ2XV0sMTk1MDcyOltbMzg5NTNdXSwxOTUwNzM6W1sxNjkzOThdXSwxOTUwNzQ6W1szOTEzOF1dLDE5NTA3NTpbWzE5MjUxXV0sMTk1MDc2OltbMzkyMDldXSwxOTUwNzc6W1szOTMzNV1dLDE5NTA3ODpbWzM5MzYyXV0sMTk1MDc5OltbMzk0MjJdXSwxOTUwODA6W1sxOTQwNl1dLDE5NTA4MTpbWzE3MDgwMF1dLDE5NTA4MjpbWzM5Njk4XV0sMTk1MDgzOltbNDAwMDBdXSwxOTUwODQ6W1s0MDE4OV1dLDE5NTA4NTpbWzE5NjYyXV0sMTk1MDg2OltbMTk2OTNdXSwxOTUwODc6W1s0MDI5NV1dLDE5NTA4ODpbWzE3MjIzOF1dLDE5NTA4OTpbWzE5NzA0XV0sMTk1MDkwOltbMTcyMjkzXV0sMTk1MDkxOltbMTcyNTU4XV0sMTk1MDkyOltbMTcyNjg5XV0sMTk1MDkzOltbNDA2MzVdXSwxOTUwOTQ6W1sxOTc5OF1dLDE5NTA5NTpbWzQwNjk3XV0sMTk1MDk2OltbNDA3MDJdXSwxOTUwOTc6W1s0MDcwOV1dLDE5NTA5ODpbWzQwNzE5XV0sMTk1MDk5OltbNDA3MjZdXSwxOTUxMDA6W1s0MDc2M11dLDE5NTEwMTpbWzE3MzU2OF1dfSwKNjQyNTY6ezY0MjU2OltbMTAyLDEwMl0sMjU2XSw2NDI1NzpbWzEwMiwxMDVdLDI1Nl0sNjQyNTg6W1sxMDIsMTA4XSwyNTZdLDY0MjU5OltbMTAyLDEwMiwxMDVdLDI1Nl0sNjQyNjA6W1sxMDIsMTAyLDEwOF0sMjU2XSw2NDI2MTpbWzM4MywxMTZdLDI1Nl0sNjQyNjI6W1sxMTUsMTE2XSwyNTZdLDY0Mjc1OltbMTM5NiwxMzk4XSwyNTZdLDY0Mjc2OltbMTM5NiwxMzgxXSwyNTZdLDY0Mjc3OltbMTM5NiwxMzg3XSwyNTZdLDY0Mjc4OltbMTQwNiwxMzk4XSwyNTZdLDY0Mjc5OltbMTM5NiwxMzg5XSwyNTZdLDY0Mjg1OltbMTQ5NywxNDYwXSw1MTJdLDY0Mjg2OlssMjZdLDY0Mjg3OltbMTUyMiwxNDYzXSw1MTJdLDY0Mjg4OltbMTUwNl0sMjU2XSw2NDI4OTpbWzE0ODhdLDI1Nl0sNjQyOTA6W1sxNDkxXSwyNTZdLDY0MjkxOltbMTQ5Ml0sMjU2XSw2NDI5MjpbWzE0OTldLDI1Nl0sNjQyOTM6W1sxNTAwXSwyNTZdLDY0Mjk0OltbMTUwMV0sMjU2XSw2NDI5NTpbWzE1MTJdLDI1Nl0sNjQyOTY6W1sxNTE0XSwyNTZdLDY0Mjk3OltbNDNdLDI1Nl0sNjQyOTg6W1sxNTEzLDE0NzNdLDUxMl0sNjQyOTk6W1sxNTEzLDE0NzRdLDUxMl0sNjQzMDA6W1s2NDMyOSwxNDczXSw1MTJdLDY0MzAxOltbNjQzMjksMTQ3NF0sNTEyXSw2NDMwMjpbWzE0ODgsMTQ2M10sNTEyXSw2NDMwMzpbWzE0ODgsMTQ2NF0sNTEyXSw2NDMwNDpbWzE0ODgsMTQ2OF0sNTEyXSw2NDMwNTpbWzE0ODksMTQ2OF0sNTEyXSw2NDMwNjpbWzE0OTAsMTQ2OF0sNTEyXSw2NDMwNzpbWzE0OTEsMTQ2OF0sNTEyXSw2NDMwODpbWzE0OTIsMTQ2OF0sNTEyXSw2NDMwOTpbWzE0OTMsMTQ2OF0sNTEyXSw2NDMxMDpbWzE0OTQsMTQ2OF0sNTEyXSw2NDMxMjpbWzE0OTYsMTQ2OF0sNTEyXSw2NDMxMzpbWzE0OTcsMTQ2OF0sNTEyXSw2NDMxNDpbWzE0OTgsMTQ2OF0sNTEyXSw2NDMxNTpbWzE0OTksMTQ2OF0sNTEyXSw2NDMxNjpbWzE1MDAsMTQ2OF0sNTEyXSw2NDMxODpbWzE1MDIsMTQ2OF0sNTEyXSw2NDMyMDpbWzE1MDQsMTQ2OF0sNTEyXSw2NDMyMTpbWzE1MDUsMTQ2OF0sNTEyXSw2NDMyMzpbWzE1MDcsMTQ2OF0sNTEyXSw2NDMyNDpbWzE1MDgsMTQ2OF0sNTEyXSw2NDMyNjpbWzE1MTAsMTQ2OF0sNTEyXSw2NDMyNzpbWzE1MTEsMTQ2OF0sNTEyXSw2NDMyODpbWzE1MTIsMTQ2OF0sNTEyXSw2NDMyOTpbWzE1MTMsMTQ2OF0sNTEyXSw2NDMzMDpbWzE1MTQsMTQ2OF0sNTEyXSw2NDMzMTpbWzE0OTMsMTQ2NV0sNTEyXSw2NDMzMjpbWzE0ODksMTQ3MV0sNTEyXSw2NDMzMzpbWzE0OTksMTQ3MV0sNTEyXSw2NDMzNDpbWzE1MDgsMTQ3MV0sNTEyXSw2NDMzNTpbWzE0ODgsMTUwMF0sMjU2XSw2NDMzNjpbWzE2NDldLDI1Nl0sNjQzMzc6W1sxNjQ5XSwyNTZdLDY0MzM4OltbMTY1OV0sMjU2XSw2NDMzOTpbWzE2NTldLDI1Nl0sNjQzNDA6W1sxNjU5XSwyNTZdLDY0MzQxOltbMTY1OV0sMjU2XSw2NDM0MjpbWzE2NjJdLDI1Nl0sNjQzNDM6W1sxNjYyXSwyNTZdLDY0MzQ0OltbMTY2Ml0sMjU2XSw2NDM0NTpbWzE2NjJdLDI1Nl0sNjQzNDY6W1sxNjY0XSwyNTZdLDY0MzQ3OltbMTY2NF0sMjU2XSw2NDM0ODpbWzE2NjRdLDI1Nl0sNjQzNDk6W1sxNjY0XSwyNTZdLDY0MzUwOltbMTY1OF0sMjU2XSw2NDM1MTpbWzE2NThdLDI1Nl0sNjQzNTI6W1sxNjU4XSwyNTZdLDY0MzUzOltbMTY1OF0sMjU2XSw2NDM1NDpbWzE2NjNdLDI1Nl0sNjQzNTU6W1sxNjYzXSwyNTZdLDY0MzU2OltbMTY2M10sMjU2XSw2NDM1NzpbWzE2NjNdLDI1Nl0sNjQzNTg6W1sxNjU3XSwyNTZdLDY0MzU5OltbMTY1N10sMjU2XSw2NDM2MDpbWzE2NTddLDI1Nl0sNjQzNjE6W1sxNjU3XSwyNTZdLDY0MzYyOltbMTcwMF0sMjU2XSw2NDM2MzpbWzE3MDBdLDI1Nl0sNjQzNjQ6W1sxNzAwXSwyNTZdLDY0MzY1OltbMTcwMF0sMjU2XSw2NDM2NjpbWzE3MDJdLDI1Nl0sNjQzNjc6W1sxNzAyXSwyNTZdLDY0MzY4OltbMTcwMl0sMjU2XSw2NDM2OTpbWzE3MDJdLDI1Nl0sNjQzNzA6W1sxNjY4XSwyNTZdLDY0MzcxOltbMTY2OF0sMjU2XSw2NDM3MjpbWzE2NjhdLDI1Nl0sNjQzNzM6W1sxNjY4XSwyNTZdLDY0Mzc0OltbMTY2N10sMjU2XSw2NDM3NTpbWzE2NjddLDI1Nl0sNjQzNzY6W1sxNjY3XSwyNTZdLDY0Mzc3OltbMTY2N10sMjU2XSw2NDM3ODpbWzE2NzBdLDI1Nl0sNjQzNzk6W1sxNjcwXSwyNTZdLDY0MzgwOltbMTY3MF0sMjU2XSw2NDM4MTpbWzE2NzBdLDI1Nl0sNjQzODI6W1sxNjcxXSwyNTZdLDY0MzgzOltbMTY3MV0sMjU2XSw2NDM4NDpbWzE2NzFdLDI1Nl0sNjQzODU6W1sxNjcxXSwyNTZdLDY0Mzg2OltbMTY3N10sMjU2XSw2NDM4NzpbWzE2NzddLDI1Nl0sNjQzODg6W1sxNjc2XSwyNTZdLDY0Mzg5OltbMTY3Nl0sMjU2XSw2NDM5MDpbWzE2NzhdLDI1Nl0sNjQzOTE6W1sxNjc4XSwyNTZdLDY0MzkyOltbMTY3Ml0sMjU2XSw2NDM5MzpbWzE2NzJdLDI1Nl0sNjQzOTQ6W1sxNjg4XSwyNTZdLDY0Mzk1OltbMTY4OF0sMjU2XSw2NDM5NjpbWzE2ODFdLDI1Nl0sNjQzOTc6W1sxNjgxXSwyNTZdLDY0Mzk4OltbMTcwNV0sMjU2XSw2NDM5OTpbWzE3MDVdLDI1Nl0sNjQ0MDA6W1sxNzA1XSwyNTZdLDY0NDAxOltbMTcwNV0sMjU2XSw2NDQwMjpbWzE3MTFdLDI1Nl0sNjQ0MDM6W1sxNzExXSwyNTZdLDY0NDA0OltbMTcxMV0sMjU2XSw2NDQwNTpbWzE3MTFdLDI1Nl0sNjQ0MDY6W1sxNzE1XSwyNTZdLDY0NDA3OltbMTcxNV0sMjU2XSw2NDQwODpbWzE3MTVdLDI1Nl0sNjQ0MDk6W1sxNzE1XSwyNTZdLDY0NDEwOltbMTcxM10sMjU2XSw2NDQxMTpbWzE3MTNdLDI1Nl0sNjQ0MTI6W1sxNzEzXSwyNTZdLDY0NDEzOltbMTcxM10sMjU2XSw2NDQxNDpbWzE3MjJdLDI1Nl0sNjQ0MTU6W1sxNzIyXSwyNTZdLDY0NDE2OltbMTcyM10sMjU2XSw2NDQxNzpbWzE3MjNdLDI1Nl0sNjQ0MTg6W1sxNzIzXSwyNTZdLDY0NDE5OltbMTcyM10sMjU2XSw2NDQyMDpbWzE3MjhdLDI1Nl0sNjQ0MjE6W1sxNzI4XSwyNTZdLDY0NDIyOltbMTcyOV0sMjU2XSw2NDQyMzpbWzE3MjldLDI1Nl0sNjQ0MjQ6W1sxNzI5XSwyNTZdLDY0NDI1OltbMTcyOV0sMjU2XSw2NDQyNjpbWzE3MjZdLDI1Nl0sNjQ0Mjc6W1sxNzI2XSwyNTZdLDY0NDI4OltbMTcyNl0sMjU2XSw2NDQyOTpbWzE3MjZdLDI1Nl0sNjQ0MzA6W1sxNzQ2XSwyNTZdLDY0NDMxOltbMTc0Nl0sMjU2XSw2NDQzMjpbWzE3NDddLDI1Nl0sNjQ0MzM6W1sxNzQ3XSwyNTZdLDY0NDY3OltbMTcwOV0sMjU2XSw2NDQ2ODpbWzE3MDldLDI1Nl0sNjQ0Njk6W1sxNzA5XSwyNTZdLDY0NDcwOltbMTcwOV0sMjU2XSw2NDQ3MTpbWzE3MzVdLDI1Nl0sNjQ0NzI6W1sxNzM1XSwyNTZdLDY0NDczOltbMTczNF0sMjU2XSw2NDQ3NDpbWzE3MzRdLDI1Nl0sNjQ0NzU6W1sxNzM2XSwyNTZdLDY0NDc2OltbMTczNl0sMjU2XSw2NDQ3NzpbWzE2NTVdLDI1Nl0sNjQ0Nzg6W1sxNzM5XSwyNTZdLDY0NDc5OltbMTczOV0sMjU2XSw2NDQ4MDpbWzE3MzNdLDI1Nl0sNjQ0ODE6W1sxNzMzXSwyNTZdLDY0NDgyOltbMTczN10sMjU2XSw2NDQ4MzpbWzE3MzddLDI1Nl0sNjQ0ODQ6W1sxNzQ0XSwyNTZdLDY0NDg1OltbMTc0NF0sMjU2XSw2NDQ4NjpbWzE3NDRdLDI1Nl0sNjQ0ODc6W1sxNzQ0XSwyNTZdLDY0NDg4OltbMTYwOV0sMjU2XSw2NDQ4OTpbWzE2MDldLDI1Nl0sNjQ0OTA6W1sxNTc0LDE1NzVdLDI1Nl0sNjQ0OTE6W1sxNTc0LDE1NzVdLDI1Nl0sNjQ0OTI6W1sxNTc0LDE3NDldLDI1Nl0sNjQ0OTM6W1sxNTc0LDE3NDldLDI1Nl0sNjQ0OTQ6W1sxNTc0LDE2MDhdLDI1Nl0sNjQ0OTU6W1sxNTc0LDE2MDhdLDI1Nl0sNjQ0OTY6W1sxNTc0LDE3MzVdLDI1Nl0sNjQ0OTc6W1sxNTc0LDE3MzVdLDI1Nl0sNjQ0OTg6W1sxNTc0LDE3MzRdLDI1Nl0sNjQ0OTk6W1sxNTc0LDE3MzRdLDI1Nl0sNjQ1MDA6W1sxNTc0LDE3MzZdLDI1Nl0sNjQ1MDE6W1sxNTc0LDE3MzZdLDI1Nl0sNjQ1MDI6W1sxNTc0LDE3NDRdLDI1Nl0sNjQ1MDM6W1sxNTc0LDE3NDRdLDI1Nl0sNjQ1MDQ6W1sxNTc0LDE3NDRdLDI1Nl0sNjQ1MDU6W1sxNTc0LDE2MDldLDI1Nl0sNjQ1MDY6W1sxNTc0LDE2MDldLDI1Nl0sNjQ1MDc6W1sxNTc0LDE2MDldLDI1Nl0sNjQ1MDg6W1sxNzQwXSwyNTZdLDY0NTA5OltbMTc0MF0sMjU2XSw2NDUxMDpbWzE3NDBdLDI1Nl0sNjQ1MTE6W1sxNzQwXSwyNTZdfSwKNjQ1MTI6ezY0NTEyOltbMTU3NCwxNTgwXSwyNTZdLDY0NTEzOltbMTU3NCwxNTgxXSwyNTZdLDY0NTE0OltbMTU3NCwxNjA1XSwyNTZdLDY0NTE1OltbMTU3NCwxNjA5XSwyNTZdLDY0NTE2OltbMTU3NCwxNjEwXSwyNTZdLDY0NTE3OltbMTU3NiwxNTgwXSwyNTZdLDY0NTE4OltbMTU3NiwxNTgxXSwyNTZdLDY0NTE5OltbMTU3NiwxNTgyXSwyNTZdLDY0NTIwOltbMTU3NiwxNjA1XSwyNTZdLDY0NTIxOltbMTU3NiwxNjA5XSwyNTZdLDY0NTIyOltbMTU3NiwxNjEwXSwyNTZdLDY0NTIzOltbMTU3OCwxNTgwXSwyNTZdLDY0NTI0OltbMTU3OCwxNTgxXSwyNTZdLDY0NTI1OltbMTU3OCwxNTgyXSwyNTZdLDY0NTI2OltbMTU3OCwxNjA1XSwyNTZdLDY0NTI3OltbMTU3OCwxNjA5XSwyNTZdLDY0NTI4OltbMTU3OCwxNjEwXSwyNTZdLDY0NTI5OltbMTU3OSwxNTgwXSwyNTZdLDY0NTMwOltbMTU3OSwxNjA1XSwyNTZdLDY0NTMxOltbMTU3OSwxNjA5XSwyNTZdLDY0NTMyOltbMTU3OSwxNjEwXSwyNTZdLDY0NTMzOltbMTU4MCwxNTgxXSwyNTZdLDY0NTM0OltbMTU4MCwxNjA1XSwyNTZdLDY0NTM1OltbMTU4MSwxNTgwXSwyNTZdLDY0NTM2OltbMTU4MSwxNjA1XSwyNTZdLDY0NTM3OltbMTU4MiwxNTgwXSwyNTZdLDY0NTM4OltbMTU4MiwxNTgxXSwyNTZdLDY0NTM5OltbMTU4MiwxNjA1XSwyNTZdLDY0NTQwOltbMTU4NywxNTgwXSwyNTZdLDY0NTQxOltbMTU4NywxNTgxXSwyNTZdLDY0NTQyOltbMTU4NywxNTgyXSwyNTZdLDY0NTQzOltbMTU4NywxNjA1XSwyNTZdLDY0NTQ0OltbMTU4OSwxNTgxXSwyNTZdLDY0NTQ1OltbMTU4OSwxNjA1XSwyNTZdLDY0NTQ2OltbMTU5MCwxNTgwXSwyNTZdLDY0NTQ3OltbMTU5MCwxNTgxXSwyNTZdLDY0NTQ4OltbMTU5MCwxNTgyXSwyNTZdLDY0NTQ5OltbMTU5MCwxNjA1XSwyNTZdLDY0NTUwOltbMTU5MSwxNTgxXSwyNTZdLDY0NTUxOltbMTU5MSwxNjA1XSwyNTZdLDY0NTUyOltbMTU5MiwxNjA1XSwyNTZdLDY0NTUzOltbMTU5MywxNTgwXSwyNTZdLDY0NTU0OltbMTU5MywxNjA1XSwyNTZdLDY0NTU1OltbMTU5NCwxNTgwXSwyNTZdLDY0NTU2OltbMTU5NCwxNjA1XSwyNTZdLDY0NTU3OltbMTYwMSwxNTgwXSwyNTZdLDY0NTU4OltbMTYwMSwxNTgxXSwyNTZdLDY0NTU5OltbMTYwMSwxNTgyXSwyNTZdLDY0NTYwOltbMTYwMSwxNjA1XSwyNTZdLDY0NTYxOltbMTYwMSwxNjA5XSwyNTZdLDY0NTYyOltbMTYwMSwxNjEwXSwyNTZdLDY0NTYzOltbMTYwMiwxNTgxXSwyNTZdLDY0NTY0OltbMTYwMiwxNjA1XSwyNTZdLDY0NTY1OltbMTYwMiwxNjA5XSwyNTZdLDY0NTY2OltbMTYwMiwxNjEwXSwyNTZdLDY0NTY3OltbMTYwMywxNTc1XSwyNTZdLDY0NTY4OltbMTYwMywxNTgwXSwyNTZdLDY0NTY5OltbMTYwMywxNTgxXSwyNTZdLDY0NTcwOltbMTYwMywxNTgyXSwyNTZdLDY0NTcxOltbMTYwMywxNjA0XSwyNTZdLDY0NTcyOltbMTYwMywxNjA1XSwyNTZdLDY0NTczOltbMTYwMywxNjA5XSwyNTZdLDY0NTc0OltbMTYwMywxNjEwXSwyNTZdLDY0NTc1OltbMTYwNCwxNTgwXSwyNTZdLDY0NTc2OltbMTYwNCwxNTgxXSwyNTZdLDY0NTc3OltbMTYwNCwxNTgyXSwyNTZdLDY0NTc4OltbMTYwNCwxNjA1XSwyNTZdLDY0NTc5OltbMTYwNCwxNjA5XSwyNTZdLDY0NTgwOltbMTYwNCwxNjEwXSwyNTZdLDY0NTgxOltbMTYwNSwxNTgwXSwyNTZdLDY0NTgyOltbMTYwNSwxNTgxXSwyNTZdLDY0NTgzOltbMTYwNSwxNTgyXSwyNTZdLDY0NTg0OltbMTYwNSwxNjA1XSwyNTZdLDY0NTg1OltbMTYwNSwxNjA5XSwyNTZdLDY0NTg2OltbMTYwNSwxNjEwXSwyNTZdLDY0NTg3OltbMTYwNiwxNTgwXSwyNTZdLDY0NTg4OltbMTYwNiwxNTgxXSwyNTZdLDY0NTg5OltbMTYwNiwxNTgyXSwyNTZdLDY0NTkwOltbMTYwNiwxNjA1XSwyNTZdLDY0NTkxOltbMTYwNiwxNjA5XSwyNTZdLDY0NTkyOltbMTYwNiwxNjEwXSwyNTZdLDY0NTkzOltbMTYwNywxNTgwXSwyNTZdLDY0NTk0OltbMTYwNywxNjA1XSwyNTZdLDY0NTk1OltbMTYwNywxNjA5XSwyNTZdLDY0NTk2OltbMTYwNywxNjEwXSwyNTZdLDY0NTk3OltbMTYxMCwxNTgwXSwyNTZdLDY0NTk4OltbMTYxMCwxNTgxXSwyNTZdLDY0NTk5OltbMTYxMCwxNTgyXSwyNTZdLDY0NjAwOltbMTYxMCwxNjA1XSwyNTZdLDY0NjAxOltbMTYxMCwxNjA5XSwyNTZdLDY0NjAyOltbMTYxMCwxNjEwXSwyNTZdLDY0NjAzOltbMTU4NCwxNjQ4XSwyNTZdLDY0NjA0OltbMTU4NSwxNjQ4XSwyNTZdLDY0NjA1OltbMTYwOSwxNjQ4XSwyNTZdLDY0NjA2OltbMzIsMTYxMiwxNjE3XSwyNTZdLDY0NjA3OltbMzIsMTYxMywxNjE3XSwyNTZdLDY0NjA4OltbMzIsMTYxNCwxNjE3XSwyNTZdLDY0NjA5OltbMzIsMTYxNSwxNjE3XSwyNTZdLDY0NjEwOltbMzIsMTYxNiwxNjE3XSwyNTZdLDY0NjExOltbMzIsMTYxNywxNjQ4XSwyNTZdLDY0NjEyOltbMTU3NCwxNTg1XSwyNTZdLDY0NjEzOltbMTU3NCwxNTg2XSwyNTZdLDY0NjE0OltbMTU3NCwxNjA1XSwyNTZdLDY0NjE1OltbMTU3NCwxNjA2XSwyNTZdLDY0NjE2OltbMTU3NCwxNjA5XSwyNTZdLDY0NjE3OltbMTU3NCwxNjEwXSwyNTZdLDY0NjE4OltbMTU3NiwxNTg1XSwyNTZdLDY0NjE5OltbMTU3NiwxNTg2XSwyNTZdLDY0NjIwOltbMTU3NiwxNjA1XSwyNTZdLDY0NjIxOltbMTU3NiwxNjA2XSwyNTZdLDY0NjIyOltbMTU3NiwxNjA5XSwyNTZdLDY0NjIzOltbMTU3NiwxNjEwXSwyNTZdLDY0NjI0OltbMTU3OCwxNTg1XSwyNTZdLDY0NjI1OltbMTU3OCwxNTg2XSwyNTZdLDY0NjI2OltbMTU3OCwxNjA1XSwyNTZdLDY0NjI3OltbMTU3OCwxNjA2XSwyNTZdLDY0NjI4OltbMTU3OCwxNjA5XSwyNTZdLDY0NjI5OltbMTU3OCwxNjEwXSwyNTZdLDY0NjMwOltbMTU3OSwxNTg1XSwyNTZdLDY0NjMxOltbMTU3OSwxNTg2XSwyNTZdLDY0NjMyOltbMTU3OSwxNjA1XSwyNTZdLDY0NjMzOltbMTU3OSwxNjA2XSwyNTZdLDY0NjM0OltbMTU3OSwxNjA5XSwyNTZdLDY0NjM1OltbMTU3OSwxNjEwXSwyNTZdLDY0NjM2OltbMTYwMSwxNjA5XSwyNTZdLDY0NjM3OltbMTYwMSwxNjEwXSwyNTZdLDY0NjM4OltbMTYwMiwxNjA5XSwyNTZdLDY0NjM5OltbMTYwMiwxNjEwXSwyNTZdLDY0NjQwOltbMTYwMywxNTc1XSwyNTZdLDY0NjQxOltbMTYwMywxNjA0XSwyNTZdLDY0NjQyOltbMTYwMywxNjA1XSwyNTZdLDY0NjQzOltbMTYwMywxNjA5XSwyNTZdLDY0NjQ0OltbMTYwMywxNjEwXSwyNTZdLDY0NjQ1OltbMTYwNCwxNjA1XSwyNTZdLDY0NjQ2OltbMTYwNCwxNjA5XSwyNTZdLDY0NjQ3OltbMTYwNCwxNjEwXSwyNTZdLDY0NjQ4OltbMTYwNSwxNTc1XSwyNTZdLDY0NjQ5OltbMTYwNSwxNjA1XSwyNTZdLDY0NjUwOltbMTYwNiwxNTg1XSwyNTZdLDY0NjUxOltbMTYwNiwxNTg2XSwyNTZdLDY0NjUyOltbMTYwNiwxNjA1XSwyNTZdLDY0NjUzOltbMTYwNiwxNjA2XSwyNTZdLDY0NjU0OltbMTYwNiwxNjA5XSwyNTZdLDY0NjU1OltbMTYwNiwxNjEwXSwyNTZdLDY0NjU2OltbMTYwOSwxNjQ4XSwyNTZdLDY0NjU3OltbMTYxMCwxNTg1XSwyNTZdLDY0NjU4OltbMTYxMCwxNTg2XSwyNTZdLDY0NjU5OltbMTYxMCwxNjA1XSwyNTZdLDY0NjYwOltbMTYxMCwxNjA2XSwyNTZdLDY0NjYxOltbMTYxMCwxNjA5XSwyNTZdLDY0NjYyOltbMTYxMCwxNjEwXSwyNTZdLDY0NjYzOltbMTU3NCwxNTgwXSwyNTZdLDY0NjY0OltbMTU3NCwxNTgxXSwyNTZdLDY0NjY1OltbMTU3NCwxNTgyXSwyNTZdLDY0NjY2OltbMTU3NCwxNjA1XSwyNTZdLDY0NjY3OltbMTU3NCwxNjA3XSwyNTZdLDY0NjY4OltbMTU3NiwxNTgwXSwyNTZdLDY0NjY5OltbMTU3NiwxNTgxXSwyNTZdLDY0NjcwOltbMTU3NiwxNTgyXSwyNTZdLDY0NjcxOltbMTU3NiwxNjA1XSwyNTZdLDY0NjcyOltbMTU3NiwxNjA3XSwyNTZdLDY0NjczOltbMTU3OCwxNTgwXSwyNTZdLDY0Njc0OltbMTU3OCwxNTgxXSwyNTZdLDY0Njc1OltbMTU3OCwxNTgyXSwyNTZdLDY0Njc2OltbMTU3OCwxNjA1XSwyNTZdLDY0Njc3OltbMTU3OCwxNjA3XSwyNTZdLDY0Njc4OltbMTU3OSwxNjA1XSwyNTZdLDY0Njc5OltbMTU4MCwxNTgxXSwyNTZdLDY0NjgwOltbMTU4MCwxNjA1XSwyNTZdLDY0NjgxOltbMTU4MSwxNTgwXSwyNTZdLDY0NjgyOltbMTU4MSwxNjA1XSwyNTZdLDY0NjgzOltbMTU4MiwxNTgwXSwyNTZdLDY0Njg0OltbMTU4MiwxNjA1XSwyNTZdLDY0Njg1OltbMTU4NywxNTgwXSwyNTZdLDY0Njg2OltbMTU4NywxNTgxXSwyNTZdLDY0Njg3OltbMTU4NywxNTgyXSwyNTZdLDY0Njg4OltbMTU4NywxNjA1XSwyNTZdLDY0Njg5OltbMTU4OSwxNTgxXSwyNTZdLDY0NjkwOltbMTU4OSwxNTgyXSwyNTZdLDY0NjkxOltbMTU4OSwxNjA1XSwyNTZdLDY0NjkyOltbMTU5MCwxNTgwXSwyNTZdLDY0NjkzOltbMTU5MCwxNTgxXSwyNTZdLDY0Njk0OltbMTU5MCwxNTgyXSwyNTZdLDY0Njk1OltbMTU5MCwxNjA1XSwyNTZdLDY0Njk2OltbMTU5MSwxNTgxXSwyNTZdLDY0Njk3OltbMTU5MiwxNjA1XSwyNTZdLDY0Njk4OltbMTU5MywxNTgwXSwyNTZdLDY0Njk5OltbMTU5MywxNjA1XSwyNTZdLDY0NzAwOltbMTU5NCwxNTgwXSwyNTZdLDY0NzAxOltbMTU5NCwxNjA1XSwyNTZdLDY0NzAyOltbMTYwMSwxNTgwXSwyNTZdLDY0NzAzOltbMTYwMSwxNTgxXSwyNTZdLDY0NzA0OltbMTYwMSwxNTgyXSwyNTZdLDY0NzA1OltbMTYwMSwxNjA1XSwyNTZdLDY0NzA2OltbMTYwMiwxNTgxXSwyNTZdLDY0NzA3OltbMTYwMiwxNjA1XSwyNTZdLDY0NzA4OltbMTYwMywxNTgwXSwyNTZdLDY0NzA5OltbMTYwMywxNTgxXSwyNTZdLDY0NzEwOltbMTYwMywxNTgyXSwyNTZdLDY0NzExOltbMTYwMywxNjA0XSwyNTZdLDY0NzEyOltbMTYwMywxNjA1XSwyNTZdLDY0NzEzOltbMTYwNCwxNTgwXSwyNTZdLDY0NzE0OltbMTYwNCwxNTgxXSwyNTZdLDY0NzE1OltbMTYwNCwxNTgyXSwyNTZdLDY0NzE2OltbMTYwNCwxNjA1XSwyNTZdLDY0NzE3OltbMTYwNCwxNjA3XSwyNTZdLDY0NzE4OltbMTYwNSwxNTgwXSwyNTZdLDY0NzE5OltbMTYwNSwxNTgxXSwyNTZdLDY0NzIwOltbMTYwNSwxNTgyXSwyNTZdLDY0NzIxOltbMTYwNSwxNjA1XSwyNTZdLDY0NzIyOltbMTYwNiwxNTgwXSwyNTZdLDY0NzIzOltbMTYwNiwxNTgxXSwyNTZdLDY0NzI0OltbMTYwNiwxNTgyXSwyNTZdLDY0NzI1OltbMTYwNiwxNjA1XSwyNTZdLDY0NzI2OltbMTYwNiwxNjA3XSwyNTZdLDY0NzI3OltbMTYwNywxNTgwXSwyNTZdLDY0NzI4OltbMTYwNywxNjA1XSwyNTZdLDY0NzI5OltbMTYwNywxNjQ4XSwyNTZdLDY0NzMwOltbMTYxMCwxNTgwXSwyNTZdLDY0NzMxOltbMTYxMCwxNTgxXSwyNTZdLDY0NzMyOltbMTYxMCwxNTgyXSwyNTZdLDY0NzMzOltbMTYxMCwxNjA1XSwyNTZdLDY0NzM0OltbMTYxMCwxNjA3XSwyNTZdLDY0NzM1OltbMTU3NCwxNjA1XSwyNTZdLDY0NzM2OltbMTU3NCwxNjA3XSwyNTZdLDY0NzM3OltbMTU3NiwxNjA1XSwyNTZdLDY0NzM4OltbMTU3NiwxNjA3XSwyNTZdLDY0NzM5OltbMTU3OCwxNjA1XSwyNTZdLDY0NzQwOltbMTU3OCwxNjA3XSwyNTZdLDY0NzQxOltbMTU3OSwxNjA1XSwyNTZdLDY0NzQyOltbMTU3OSwxNjA3XSwyNTZdLDY0NzQzOltbMTU4NywxNjA1XSwyNTZdLDY0NzQ0OltbMTU4NywxNjA3XSwyNTZdLDY0NzQ1OltbMTU4OCwxNjA1XSwyNTZdLDY0NzQ2OltbMTU4OCwxNjA3XSwyNTZdLDY0NzQ3OltbMTYwMywxNjA0XSwyNTZdLDY0NzQ4OltbMTYwMywxNjA1XSwyNTZdLDY0NzQ5OltbMTYwNCwxNjA1XSwyNTZdLDY0NzUwOltbMTYwNiwxNjA1XSwyNTZdLDY0NzUxOltbMTYwNiwxNjA3XSwyNTZdLDY0NzUyOltbMTYxMCwxNjA1XSwyNTZdLDY0NzUzOltbMTYxMCwxNjA3XSwyNTZdLDY0NzU0OltbMTYwMCwxNjE0LDE2MTddLDI1Nl0sNjQ3NTU6W1sxNjAwLDE2MTUsMTYxN10sMjU2XSw2NDc1NjpbWzE2MDAsMTYxNiwxNjE3XSwyNTZdLDY0NzU3OltbMTU5MSwxNjA5XSwyNTZdLDY0NzU4OltbMTU5MSwxNjEwXSwyNTZdLDY0NzU5OltbMTU5MywxNjA5XSwyNTZdLDY0NzYwOltbMTU5MywxNjEwXSwyNTZdLDY0NzYxOltbMTU5NCwxNjA5XSwyNTZdLDY0NzYyOltbMTU5NCwxNjEwXSwyNTZdLDY0NzYzOltbMTU4NywxNjA5XSwyNTZdLDY0NzY0OltbMTU4NywxNjEwXSwyNTZdLDY0NzY1OltbMTU4OCwxNjA5XSwyNTZdLDY0NzY2OltbMTU4OCwxNjEwXSwyNTZdLDY0NzY3OltbMTU4MSwxNjA5XSwyNTZdfSwKNjQ3Njg6ezY0NzY4OltbMTU4MSwxNjEwXSwyNTZdLDY0NzY5OltbMTU4MCwxNjA5XSwyNTZdLDY0NzcwOltbMTU4MCwxNjEwXSwyNTZdLDY0NzcxOltbMTU4MiwxNjA5XSwyNTZdLDY0NzcyOltbMTU4MiwxNjEwXSwyNTZdLDY0NzczOltbMTU4OSwxNjA5XSwyNTZdLDY0Nzc0OltbMTU4OSwxNjEwXSwyNTZdLDY0Nzc1OltbMTU5MCwxNjA5XSwyNTZdLDY0Nzc2OltbMTU5MCwxNjEwXSwyNTZdLDY0Nzc3OltbMTU4OCwxNTgwXSwyNTZdLDY0Nzc4OltbMTU4OCwxNTgxXSwyNTZdLDY0Nzc5OltbMTU4OCwxNTgyXSwyNTZdLDY0NzgwOltbMTU4OCwxNjA1XSwyNTZdLDY0NzgxOltbMTU4OCwxNTg1XSwyNTZdLDY0NzgyOltbMTU4NywxNTg1XSwyNTZdLDY0NzgzOltbMTU4OSwxNTg1XSwyNTZdLDY0Nzg0OltbMTU5MCwxNTg1XSwyNTZdLDY0Nzg1OltbMTU5MSwxNjA5XSwyNTZdLDY0Nzg2OltbMTU5MSwxNjEwXSwyNTZdLDY0Nzg3OltbMTU5MywxNjA5XSwyNTZdLDY0Nzg4OltbMTU5MywxNjEwXSwyNTZdLDY0Nzg5OltbMTU5NCwxNjA5XSwyNTZdLDY0NzkwOltbMTU5NCwxNjEwXSwyNTZdLDY0NzkxOltbMTU4NywxNjA5XSwyNTZdLDY0NzkyOltbMTU4NywxNjEwXSwyNTZdLDY0NzkzOltbMTU4OCwxNjA5XSwyNTZdLDY0Nzk0OltbMTU4OCwxNjEwXSwyNTZdLDY0Nzk1OltbMTU4MSwxNjA5XSwyNTZdLDY0Nzk2OltbMTU4MSwxNjEwXSwyNTZdLDY0Nzk3OltbMTU4MCwxNjA5XSwyNTZdLDY0Nzk4OltbMTU4MCwxNjEwXSwyNTZdLDY0Nzk5OltbMTU4MiwxNjA5XSwyNTZdLDY0ODAwOltbMTU4MiwxNjEwXSwyNTZdLDY0ODAxOltbMTU4OSwxNjA5XSwyNTZdLDY0ODAyOltbMTU4OSwxNjEwXSwyNTZdLDY0ODAzOltbMTU5MCwxNjA5XSwyNTZdLDY0ODA0OltbMTU5MCwxNjEwXSwyNTZdLDY0ODA1OltbMTU4OCwxNTgwXSwyNTZdLDY0ODA2OltbMTU4OCwxNTgxXSwyNTZdLDY0ODA3OltbMTU4OCwxNTgyXSwyNTZdLDY0ODA4OltbMTU4OCwxNjA1XSwyNTZdLDY0ODA5OltbMTU4OCwxNTg1XSwyNTZdLDY0ODEwOltbMTU4NywxNTg1XSwyNTZdLDY0ODExOltbMTU4OSwxNTg1XSwyNTZdLDY0ODEyOltbMTU5MCwxNTg1XSwyNTZdLDY0ODEzOltbMTU4OCwxNTgwXSwyNTZdLDY0ODE0OltbMTU4OCwxNTgxXSwyNTZdLDY0ODE1OltbMTU4OCwxNTgyXSwyNTZdLDY0ODE2OltbMTU4OCwxNjA1XSwyNTZdLDY0ODE3OltbMTU4NywxNjA3XSwyNTZdLDY0ODE4OltbMTU4OCwxNjA3XSwyNTZdLDY0ODE5OltbMTU5MSwxNjA1XSwyNTZdLDY0ODIwOltbMTU4NywxNTgwXSwyNTZdLDY0ODIxOltbMTU4NywxNTgxXSwyNTZdLDY0ODIyOltbMTU4NywxNTgyXSwyNTZdLDY0ODIzOltbMTU4OCwxNTgwXSwyNTZdLDY0ODI0OltbMTU4OCwxNTgxXSwyNTZdLDY0ODI1OltbMTU4OCwxNTgyXSwyNTZdLDY0ODI2OltbMTU5MSwxNjA1XSwyNTZdLDY0ODI3OltbMTU5MiwxNjA1XSwyNTZdLDY0ODI4OltbMTU3NSwxNjExXSwyNTZdLDY0ODI5OltbMTU3NSwxNjExXSwyNTZdLDY0ODQ4OltbMTU3OCwxNTgwLDE2MDVdLDI1Nl0sNjQ4NDk6W1sxNTc4LDE1ODEsMTU4MF0sMjU2XSw2NDg1MDpbWzE1NzgsMTU4MSwxNTgwXSwyNTZdLDY0ODUxOltbMTU3OCwxNTgxLDE2MDVdLDI1Nl0sNjQ4NTI6W1sxNTc4LDE1ODIsMTYwNV0sMjU2XSw2NDg1MzpbWzE1NzgsMTYwNSwxNTgwXSwyNTZdLDY0ODU0OltbMTU3OCwxNjA1LDE1ODFdLDI1Nl0sNjQ4NTU6W1sxNTc4LDE2MDUsMTU4Ml0sMjU2XSw2NDg1NjpbWzE1ODAsMTYwNSwxNTgxXSwyNTZdLDY0ODU3OltbMTU4MCwxNjA1LDE1ODFdLDI1Nl0sNjQ4NTg6W1sxNTgxLDE2MDUsMTYxMF0sMjU2XSw2NDg1OTpbWzE1ODEsMTYwNSwxNjA5XSwyNTZdLDY0ODYwOltbMTU4NywxNTgxLDE1ODBdLDI1Nl0sNjQ4NjE6W1sxNTg3LDE1ODAsMTU4MV0sMjU2XSw2NDg2MjpbWzE1ODcsMTU4MCwxNjA5XSwyNTZdLDY0ODYzOltbMTU4NywxNjA1LDE1ODFdLDI1Nl0sNjQ4NjQ6W1sxNTg3LDE2MDUsMTU4MV0sMjU2XSw2NDg2NTpbWzE1ODcsMTYwNSwxNTgwXSwyNTZdLDY0ODY2OltbMTU4NywxNjA1LDE2MDVdLDI1Nl0sNjQ4Njc6W1sxNTg3LDE2MDUsMTYwNV0sMjU2XSw2NDg2ODpbWzE1ODksMTU4MSwxNTgxXSwyNTZdLDY0ODY5OltbMTU4OSwxNTgxLDE1ODFdLDI1Nl0sNjQ4NzA6W1sxNTg5LDE2MDUsMTYwNV0sMjU2XSw2NDg3MTpbWzE1ODgsMTU4MSwxNjA1XSwyNTZdLDY0ODcyOltbMTU4OCwxNTgxLDE2MDVdLDI1Nl0sNjQ4NzM6W1sxNTg4LDE1ODAsMTYxMF0sMjU2XSw2NDg3NDpbWzE1ODgsMTYwNSwxNTgyXSwyNTZdLDY0ODc1OltbMTU4OCwxNjA1LDE1ODJdLDI1Nl0sNjQ4NzY6W1sxNTg4LDE2MDUsMTYwNV0sMjU2XSw2NDg3NzpbWzE1ODgsMTYwNSwxNjA1XSwyNTZdLDY0ODc4OltbMTU5MCwxNTgxLDE2MDldLDI1Nl0sNjQ4Nzk6W1sxNTkwLDE1ODIsMTYwNV0sMjU2XSw2NDg4MDpbWzE1OTAsMTU4MiwxNjA1XSwyNTZdLDY0ODgxOltbMTU5MSwxNjA1LDE1ODFdLDI1Nl0sNjQ4ODI6W1sxNTkxLDE2MDUsMTU4MV0sMjU2XSw2NDg4MzpbWzE1OTEsMTYwNSwxNjA1XSwyNTZdLDY0ODg0OltbMTU5MSwxNjA1LDE2MTBdLDI1Nl0sNjQ4ODU6W1sxNTkzLDE1ODAsMTYwNV0sMjU2XSw2NDg4NjpbWzE1OTMsMTYwNSwxNjA1XSwyNTZdLDY0ODg3OltbMTU5MywxNjA1LDE2MDVdLDI1Nl0sNjQ4ODg6W1sxNTkzLDE2MDUsMTYwOV0sMjU2XSw2NDg4OTpbWzE1OTQsMTYwNSwxNjA1XSwyNTZdLDY0ODkwOltbMTU5NCwxNjA1LDE2MTBdLDI1Nl0sNjQ4OTE6W1sxNTk0LDE2MDUsMTYwOV0sMjU2XSw2NDg5MjpbWzE2MDEsMTU4MiwxNjA1XSwyNTZdLDY0ODkzOltbMTYwMSwxNTgyLDE2MDVdLDI1Nl0sNjQ4OTQ6W1sxNjAyLDE2MDUsMTU4MV0sMjU2XSw2NDg5NTpbWzE2MDIsMTYwNSwxNjA1XSwyNTZdLDY0ODk2OltbMTYwNCwxNTgxLDE2MDVdLDI1Nl0sNjQ4OTc6W1sxNjA0LDE1ODEsMTYxMF0sMjU2XSw2NDg5ODpbWzE2MDQsMTU4MSwxNjA5XSwyNTZdLDY0ODk5OltbMTYwNCwxNTgwLDE1ODBdLDI1Nl0sNjQ5MDA6W1sxNjA0LDE1ODAsMTU4MF0sMjU2XSw2NDkwMTpbWzE2MDQsMTU4MiwxNjA1XSwyNTZdLDY0OTAyOltbMTYwNCwxNTgyLDE2MDVdLDI1Nl0sNjQ5MDM6W1sxNjA0LDE2MDUsMTU4MV0sMjU2XSw2NDkwNDpbWzE2MDQsMTYwNSwxNTgxXSwyNTZdLDY0OTA1OltbMTYwNSwxNTgxLDE1ODBdLDI1Nl0sNjQ5MDY6W1sxNjA1LDE1ODEsMTYwNV0sMjU2XSw2NDkwNzpbWzE2MDUsMTU4MSwxNjEwXSwyNTZdLDY0OTA4OltbMTYwNSwxNTgwLDE1ODFdLDI1Nl0sNjQ5MDk6W1sxNjA1LDE1ODAsMTYwNV0sMjU2XSw2NDkxMDpbWzE2MDUsMTU4MiwxNTgwXSwyNTZdLDY0OTExOltbMTYwNSwxNTgyLDE2MDVdLDI1Nl0sNjQ5MTQ6W1sxNjA1LDE1ODAsMTU4Ml0sMjU2XSw2NDkxNTpbWzE2MDcsMTYwNSwxNTgwXSwyNTZdLDY0OTE2OltbMTYwNywxNjA1LDE2MDVdLDI1Nl0sNjQ5MTc6W1sxNjA2LDE1ODEsMTYwNV0sMjU2XSw2NDkxODpbWzE2MDYsMTU4MSwxNjA5XSwyNTZdLDY0OTE5OltbMTYwNiwxNTgwLDE2MDVdLDI1Nl0sNjQ5MjA6W1sxNjA2LDE1ODAsMTYwNV0sMjU2XSw2NDkyMTpbWzE2MDYsMTU4MCwxNjA5XSwyNTZdLDY0OTIyOltbMTYwNiwxNjA1LDE2MTBdLDI1Nl0sNjQ5MjM6W1sxNjA2LDE2MDUsMTYwOV0sMjU2XSw2NDkyNDpbWzE2MTAsMTYwNSwxNjA1XSwyNTZdLDY0OTI1OltbMTYxMCwxNjA1LDE2MDVdLDI1Nl0sNjQ5MjY6W1sxNTc2LDE1ODIsMTYxMF0sMjU2XSw2NDkyNzpbWzE1NzgsMTU4MCwxNjEwXSwyNTZdLDY0OTI4OltbMTU3OCwxNTgwLDE2MDldLDI1Nl0sNjQ5Mjk6W1sxNTc4LDE1ODIsMTYxMF0sMjU2XSw2NDkzMDpbWzE1NzgsMTU4MiwxNjA5XSwyNTZdLDY0OTMxOltbMTU3OCwxNjA1LDE2MTBdLDI1Nl0sNjQ5MzI6W1sxNTc4LDE2MDUsMTYwOV0sMjU2XSw2NDkzMzpbWzE1ODAsMTYwNSwxNjEwXSwyNTZdLDY0OTM0OltbMTU4MCwxNTgxLDE2MDldLDI1Nl0sNjQ5MzU6W1sxNTgwLDE2MDUsMTYwOV0sMjU2XSw2NDkzNjpbWzE1ODcsMTU4MiwxNjA5XSwyNTZdLDY0OTM3OltbMTU4OSwxNTgxLDE2MTBdLDI1Nl0sNjQ5Mzg6W1sxNTg4LDE1ODEsMTYxMF0sMjU2XSw2NDkzOTpbWzE1OTAsMTU4MSwxNjEwXSwyNTZdLDY0OTQwOltbMTYwNCwxNTgwLDE2MTBdLDI1Nl0sNjQ5NDE6W1sxNjA0LDE2MDUsMTYxMF0sMjU2XSw2NDk0MjpbWzE2MTAsMTU4MSwxNjEwXSwyNTZdLDY0OTQzOltbMTYxMCwxNTgwLDE2MTBdLDI1Nl0sNjQ5NDQ6W1sxNjEwLDE2MDUsMTYxMF0sMjU2XSw2NDk0NTpbWzE2MDUsMTYwNSwxNjEwXSwyNTZdLDY0OTQ2OltbMTYwMiwxNjA1LDE2MTBdLDI1Nl0sNjQ5NDc6W1sxNjA2LDE1ODEsMTYxMF0sMjU2XSw2NDk0ODpbWzE2MDIsMTYwNSwxNTgxXSwyNTZdLDY0OTQ5OltbMTYwNCwxNTgxLDE2MDVdLDI1Nl0sNjQ5NTA6W1sxNTkzLDE2MDUsMTYxMF0sMjU2XSw2NDk1MTpbWzE2MDMsMTYwNSwxNjEwXSwyNTZdLDY0OTUyOltbMTYwNiwxNTgwLDE1ODFdLDI1Nl0sNjQ5NTM6W1sxNjA1LDE1ODIsMTYxMF0sMjU2XSw2NDk1NDpbWzE2MDQsMTU4MCwxNjA1XSwyNTZdLDY0OTU1OltbMTYwMywxNjA1LDE2MDVdLDI1Nl0sNjQ5NTY6W1sxNjA0LDE1ODAsMTYwNV0sMjU2XSw2NDk1NzpbWzE2MDYsMTU4MCwxNTgxXSwyNTZdLDY0OTU4OltbMTU4MCwxNTgxLDE2MTBdLDI1Nl0sNjQ5NTk6W1sxNTgxLDE1ODAsMTYxMF0sMjU2XSw2NDk2MDpbWzE2MDUsMTU4MCwxNjEwXSwyNTZdLDY0OTYxOltbMTYwMSwxNjA1LDE2MTBdLDI1Nl0sNjQ5NjI6W1sxNTc2LDE1ODEsMTYxMF0sMjU2XSw2NDk2MzpbWzE2MDMsMTYwNSwxNjA1XSwyNTZdLDY0OTY0OltbMTU5MywxNTgwLDE2MDVdLDI1Nl0sNjQ5NjU6W1sxNTg5LDE2MDUsMTYwNV0sMjU2XSw2NDk2NjpbWzE1ODcsMTU4MiwxNjEwXSwyNTZdLDY0OTY3OltbMTYwNiwxNTgwLDE2MTBdLDI1Nl0sNjUwMDg6W1sxNTg5LDE2MDQsMTc0Nl0sMjU2XSw2NTAwOTpbWzE2MDIsMTYwNCwxNzQ2XSwyNTZdLDY1MDEwOltbMTU3NSwxNjA0LDE2MDQsMTYwN10sMjU2XSw2NTAxMTpbWzE1NzUsMTYwMywxNTc2LDE1ODVdLDI1Nl0sNjUwMTI6W1sxNjA1LDE1ODEsMTYwNSwxNTgzXSwyNTZdLDY1MDEzOltbMTU4OSwxNjA0LDE1OTMsMTYwNV0sMjU2XSw2NTAxNDpbWzE1ODUsMTU4NywxNjA4LDE2MDRdLDI1Nl0sNjUwMTU6W1sxNTkzLDE2MDQsMTYxMCwxNjA3XSwyNTZdLDY1MDE2OltbMTYwOCwxNTg3LDE2MDQsMTYwNV0sMjU2XSw2NTAxNzpbWzE1ODksMTYwNCwxNjA5XSwyNTZdLDY1MDE4OltbMTU4OSwxNjA0LDE2MDksMzIsMTU3NSwxNjA0LDE2MDQsMTYwNywzMiwxNTkzLDE2MDQsMTYxMCwxNjA3LDMyLDE2MDgsMTU4NywxNjA0LDE2MDVdLDI1Nl0sNjUwMTk6W1sxNTgwLDE2MDQsMzIsMTU4MCwxNjA0LDE1NzUsMTYwNCwxNjA3XSwyNTZdLDY1MDIwOltbMTU4NSwxNzQwLDE1NzUsMTYwNF0sMjU2XX0sCjY1MDI0Ons2NTA0MDpbWzQ0XSwyNTZdLDY1MDQxOltbMTIyODldLDI1Nl0sNjUwNDI6W1sxMjI5MF0sMjU2XSw2NTA0MzpbWzU4XSwyNTZdLDY1MDQ0OltbNTldLDI1Nl0sNjUwNDU6W1szM10sMjU2XSw2NTA0NjpbWzYzXSwyNTZdLDY1MDQ3OltbMTIzMTBdLDI1Nl0sNjUwNDg6W1sxMjMxMV0sMjU2XSw2NTA0OTpbWzgyMzBdLDI1Nl0sNjUwNTY6WywyMzBdLDY1MDU3OlssMjMwXSw2NTA1ODpbLDIzMF0sNjUwNTk6WywyMzBdLDY1MDYwOlssMjMwXSw2NTA2MTpbLDIzMF0sNjUwNjI6WywyMzBdLDY1MDYzOlssMjIwXSw2NTA2NDpbLDIyMF0sNjUwNjU6WywyMjBdLDY1MDY2OlssMjIwXSw2NTA2NzpbLDIyMF0sNjUwNjg6WywyMjBdLDY1MDY5OlssMjIwXSw2NTA3MjpbWzgyMjldLDI1Nl0sNjUwNzM6W1s4MjEyXSwyNTZdLDY1MDc0OltbODIxMV0sMjU2XSw2NTA3NTpbWzk1XSwyNTZdLDY1MDc2OltbOTVdLDI1Nl0sNjUwNzc6W1s0MF0sMjU2XSw2NTA3ODpbWzQxXSwyNTZdLDY1MDc5OltbMTIzXSwyNTZdLDY1MDgwOltbMTI1XSwyNTZdLDY1MDgxOltbMTIzMDhdLDI1Nl0sNjUwODI6W1sxMjMwOV0sMjU2XSw2NTA4MzpbWzEyMzA0XSwyNTZdLDY1MDg0OltbMTIzMDVdLDI1Nl0sNjUwODU6W1sxMjI5OF0sMjU2XSw2NTA4NjpbWzEyMjk5XSwyNTZdLDY1MDg3OltbMTIyOTZdLDI1Nl0sNjUwODg6W1sxMjI5N10sMjU2XSw2NTA4OTpbWzEyMzAwXSwyNTZdLDY1MDkwOltbMTIzMDFdLDI1Nl0sNjUwOTE6W1sxMjMwMl0sMjU2XSw2NTA5MjpbWzEyMzAzXSwyNTZdLDY1MDk1OltbOTFdLDI1Nl0sNjUwOTY6W1s5M10sMjU2XSw2NTA5NzpbWzgyNTRdLDI1Nl0sNjUwOTg6W1s4MjU0XSwyNTZdLDY1MDk5OltbODI1NF0sMjU2XSw2NTEwMDpbWzgyNTRdLDI1Nl0sNjUxMDE6W1s5NV0sMjU2XSw2NTEwMjpbWzk1XSwyNTZdLDY1MTAzOltbOTVdLDI1Nl0sNjUxMDQ6W1s0NF0sMjU2XSw2NTEwNTpbWzEyMjg5XSwyNTZdLDY1MTA2OltbNDZdLDI1Nl0sNjUxMDg6W1s1OV0sMjU2XSw2NTEwOTpbWzU4XSwyNTZdLDY1MTEwOltbNjNdLDI1Nl0sNjUxMTE6W1szM10sMjU2XSw2NTExMjpbWzgyMTJdLDI1Nl0sNjUxMTM6W1s0MF0sMjU2XSw2NTExNDpbWzQxXSwyNTZdLDY1MTE1OltbMTIzXSwyNTZdLDY1MTE2OltbMTI1XSwyNTZdLDY1MTE3OltbMTIzMDhdLDI1Nl0sNjUxMTg6W1sxMjMwOV0sMjU2XSw2NTExOTpbWzM1XSwyNTZdLDY1MTIwOltbMzhdLDI1Nl0sNjUxMjE6W1s0Ml0sMjU2XSw2NTEyMjpbWzQzXSwyNTZdLDY1MTIzOltbNDVdLDI1Nl0sNjUxMjQ6W1s2MF0sMjU2XSw2NTEyNTpbWzYyXSwyNTZdLDY1MTI2OltbNjFdLDI1Nl0sNjUxMjg6W1s5Ml0sMjU2XSw2NTEyOTpbWzM2XSwyNTZdLDY1MTMwOltbMzddLDI1Nl0sNjUxMzE6W1s2NF0sMjU2XSw2NTEzNjpbWzMyLDE2MTFdLDI1Nl0sNjUxMzc6W1sxNjAwLDE2MTFdLDI1Nl0sNjUxMzg6W1szMiwxNjEyXSwyNTZdLDY1MTQwOltbMzIsMTYxM10sMjU2XSw2NTE0MjpbWzMyLDE2MTRdLDI1Nl0sNjUxNDM6W1sxNjAwLDE2MTRdLDI1Nl0sNjUxNDQ6W1szMiwxNjE1XSwyNTZdLDY1MTQ1OltbMTYwMCwxNjE1XSwyNTZdLDY1MTQ2OltbMzIsMTYxNl0sMjU2XSw2NTE0NzpbWzE2MDAsMTYxNl0sMjU2XSw2NTE0ODpbWzMyLDE2MTddLDI1Nl0sNjUxNDk6W1sxNjAwLDE2MTddLDI1Nl0sNjUxNTA6W1szMiwxNjE4XSwyNTZdLDY1MTUxOltbMTYwMCwxNjE4XSwyNTZdLDY1MTUyOltbMTU2OV0sMjU2XSw2NTE1MzpbWzE1NzBdLDI1Nl0sNjUxNTQ6W1sxNTcwXSwyNTZdLDY1MTU1OltbMTU3MV0sMjU2XSw2NTE1NjpbWzE1NzFdLDI1Nl0sNjUxNTc6W1sxNTcyXSwyNTZdLDY1MTU4OltbMTU3Ml0sMjU2XSw2NTE1OTpbWzE1NzNdLDI1Nl0sNjUxNjA6W1sxNTczXSwyNTZdLDY1MTYxOltbMTU3NF0sMjU2XSw2NTE2MjpbWzE1NzRdLDI1Nl0sNjUxNjM6W1sxNTc0XSwyNTZdLDY1MTY0OltbMTU3NF0sMjU2XSw2NTE2NTpbWzE1NzVdLDI1Nl0sNjUxNjY6W1sxNTc1XSwyNTZdLDY1MTY3OltbMTU3Nl0sMjU2XSw2NTE2ODpbWzE1NzZdLDI1Nl0sNjUxNjk6W1sxNTc2XSwyNTZdLDY1MTcwOltbMTU3Nl0sMjU2XSw2NTE3MTpbWzE1NzddLDI1Nl0sNjUxNzI6W1sxNTc3XSwyNTZdLDY1MTczOltbMTU3OF0sMjU2XSw2NTE3NDpbWzE1NzhdLDI1Nl0sNjUxNzU6W1sxNTc4XSwyNTZdLDY1MTc2OltbMTU3OF0sMjU2XSw2NTE3NzpbWzE1NzldLDI1Nl0sNjUxNzg6W1sxNTc5XSwyNTZdLDY1MTc5OltbMTU3OV0sMjU2XSw2NTE4MDpbWzE1NzldLDI1Nl0sNjUxODE6W1sxNTgwXSwyNTZdLDY1MTgyOltbMTU4MF0sMjU2XSw2NTE4MzpbWzE1ODBdLDI1Nl0sNjUxODQ6W1sxNTgwXSwyNTZdLDY1MTg1OltbMTU4MV0sMjU2XSw2NTE4NjpbWzE1ODFdLDI1Nl0sNjUxODc6W1sxNTgxXSwyNTZdLDY1MTg4OltbMTU4MV0sMjU2XSw2NTE4OTpbWzE1ODJdLDI1Nl0sNjUxOTA6W1sxNTgyXSwyNTZdLDY1MTkxOltbMTU4Ml0sMjU2XSw2NTE5MjpbWzE1ODJdLDI1Nl0sNjUxOTM6W1sxNTgzXSwyNTZdLDY1MTk0OltbMTU4M10sMjU2XSw2NTE5NTpbWzE1ODRdLDI1Nl0sNjUxOTY6W1sxNTg0XSwyNTZdLDY1MTk3OltbMTU4NV0sMjU2XSw2NTE5ODpbWzE1ODVdLDI1Nl0sNjUxOTk6W1sxNTg2XSwyNTZdLDY1MjAwOltbMTU4Nl0sMjU2XSw2NTIwMTpbWzE1ODddLDI1Nl0sNjUyMDI6W1sxNTg3XSwyNTZdLDY1MjAzOltbMTU4N10sMjU2XSw2NTIwNDpbWzE1ODddLDI1Nl0sNjUyMDU6W1sxNTg4XSwyNTZdLDY1MjA2OltbMTU4OF0sMjU2XSw2NTIwNzpbWzE1ODhdLDI1Nl0sNjUyMDg6W1sxNTg4XSwyNTZdLDY1MjA5OltbMTU4OV0sMjU2XSw2NTIxMDpbWzE1ODldLDI1Nl0sNjUyMTE6W1sxNTg5XSwyNTZdLDY1MjEyOltbMTU4OV0sMjU2XSw2NTIxMzpbWzE1OTBdLDI1Nl0sNjUyMTQ6W1sxNTkwXSwyNTZdLDY1MjE1OltbMTU5MF0sMjU2XSw2NTIxNjpbWzE1OTBdLDI1Nl0sNjUyMTc6W1sxNTkxXSwyNTZdLDY1MjE4OltbMTU5MV0sMjU2XSw2NTIxOTpbWzE1OTFdLDI1Nl0sNjUyMjA6W1sxNTkxXSwyNTZdLDY1MjIxOltbMTU5Ml0sMjU2XSw2NTIyMjpbWzE1OTJdLDI1Nl0sNjUyMjM6W1sxNTkyXSwyNTZdLDY1MjI0OltbMTU5Ml0sMjU2XSw2NTIyNTpbWzE1OTNdLDI1Nl0sNjUyMjY6W1sxNTkzXSwyNTZdLDY1MjI3OltbMTU5M10sMjU2XSw2NTIyODpbWzE1OTNdLDI1Nl0sNjUyMjk6W1sxNTk0XSwyNTZdLDY1MjMwOltbMTU5NF0sMjU2XSw2NTIzMTpbWzE1OTRdLDI1Nl0sNjUyMzI6W1sxNTk0XSwyNTZdLDY1MjMzOltbMTYwMV0sMjU2XSw2NTIzNDpbWzE2MDFdLDI1Nl0sNjUyMzU6W1sxNjAxXSwyNTZdLDY1MjM2OltbMTYwMV0sMjU2XSw2NTIzNzpbWzE2MDJdLDI1Nl0sNjUyMzg6W1sxNjAyXSwyNTZdLDY1MjM5OltbMTYwMl0sMjU2XSw2NTI0MDpbWzE2MDJdLDI1Nl0sNjUyNDE6W1sxNjAzXSwyNTZdLDY1MjQyOltbMTYwM10sMjU2XSw2NTI0MzpbWzE2MDNdLDI1Nl0sNjUyNDQ6W1sxNjAzXSwyNTZdLDY1MjQ1OltbMTYwNF0sMjU2XSw2NTI0NjpbWzE2MDRdLDI1Nl0sNjUyNDc6W1sxNjA0XSwyNTZdLDY1MjQ4OltbMTYwNF0sMjU2XSw2NTI0OTpbWzE2MDVdLDI1Nl0sNjUyNTA6W1sxNjA1XSwyNTZdLDY1MjUxOltbMTYwNV0sMjU2XSw2NTI1MjpbWzE2MDVdLDI1Nl0sNjUyNTM6W1sxNjA2XSwyNTZdLDY1MjU0OltbMTYwNl0sMjU2XSw2NTI1NTpbWzE2MDZdLDI1Nl0sNjUyNTY6W1sxNjA2XSwyNTZdLDY1MjU3OltbMTYwN10sMjU2XSw2NTI1ODpbWzE2MDddLDI1Nl0sNjUyNTk6W1sxNjA3XSwyNTZdLDY1MjYwOltbMTYwN10sMjU2XSw2NTI2MTpbWzE2MDhdLDI1Nl0sNjUyNjI6W1sxNjA4XSwyNTZdLDY1MjYzOltbMTYwOV0sMjU2XSw2NTI2NDpbWzE2MDldLDI1Nl0sNjUyNjU6W1sxNjEwXSwyNTZdLDY1MjY2OltbMTYxMF0sMjU2XSw2NTI2NzpbWzE2MTBdLDI1Nl0sNjUyNjg6W1sxNjEwXSwyNTZdLDY1MjY5OltbMTYwNCwxNTcwXSwyNTZdLDY1MjcwOltbMTYwNCwxNTcwXSwyNTZdLDY1MjcxOltbMTYwNCwxNTcxXSwyNTZdLDY1MjcyOltbMTYwNCwxNTcxXSwyNTZdLDY1MjczOltbMTYwNCwxNTczXSwyNTZdLDY1Mjc0OltbMTYwNCwxNTczXSwyNTZdLDY1Mjc1OltbMTYwNCwxNTc1XSwyNTZdLDY1Mjc2OltbMTYwNCwxNTc1XSwyNTZdfSwKNjUyODA6ezY1MjgxOltbMzNdLDI1Nl0sNjUyODI6W1szNF0sMjU2XSw2NTI4MzpbWzM1XSwyNTZdLDY1Mjg0OltbMzZdLDI1Nl0sNjUyODU6W1szN10sMjU2XSw2NTI4NjpbWzM4XSwyNTZdLDY1Mjg3OltbMzldLDI1Nl0sNjUyODg6W1s0MF0sMjU2XSw2NTI4OTpbWzQxXSwyNTZdLDY1MjkwOltbNDJdLDI1Nl0sNjUyOTE6W1s0M10sMjU2XSw2NTI5MjpbWzQ0XSwyNTZdLDY1MjkzOltbNDVdLDI1Nl0sNjUyOTQ6W1s0Nl0sMjU2XSw2NTI5NTpbWzQ3XSwyNTZdLDY1Mjk2OltbNDhdLDI1Nl0sNjUyOTc6W1s0OV0sMjU2XSw2NTI5ODpbWzUwXSwyNTZdLDY1Mjk5OltbNTFdLDI1Nl0sNjUzMDA6W1s1Ml0sMjU2XSw2NTMwMTpbWzUzXSwyNTZdLDY1MzAyOltbNTRdLDI1Nl0sNjUzMDM6W1s1NV0sMjU2XSw2NTMwNDpbWzU2XSwyNTZdLDY1MzA1OltbNTddLDI1Nl0sNjUzMDY6W1s1OF0sMjU2XSw2NTMwNzpbWzU5XSwyNTZdLDY1MzA4OltbNjBdLDI1Nl0sNjUzMDk6W1s2MV0sMjU2XSw2NTMxMDpbWzYyXSwyNTZdLDY1MzExOltbNjNdLDI1Nl0sNjUzMTI6W1s2NF0sMjU2XSw2NTMxMzpbWzY1XSwyNTZdLDY1MzE0OltbNjZdLDI1Nl0sNjUzMTU6W1s2N10sMjU2XSw2NTMxNjpbWzY4XSwyNTZdLDY1MzE3OltbNjldLDI1Nl0sNjUzMTg6W1s3MF0sMjU2XSw2NTMxOTpbWzcxXSwyNTZdLDY1MzIwOltbNzJdLDI1Nl0sNjUzMjE6W1s3M10sMjU2XSw2NTMyMjpbWzc0XSwyNTZdLDY1MzIzOltbNzVdLDI1Nl0sNjUzMjQ6W1s3Nl0sMjU2XSw2NTMyNTpbWzc3XSwyNTZdLDY1MzI2OltbNzhdLDI1Nl0sNjUzMjc6W1s3OV0sMjU2XSw2NTMyODpbWzgwXSwyNTZdLDY1MzI5OltbODFdLDI1Nl0sNjUzMzA6W1s4Ml0sMjU2XSw2NTMzMTpbWzgzXSwyNTZdLDY1MzMyOltbODRdLDI1Nl0sNjUzMzM6W1s4NV0sMjU2XSw2NTMzNDpbWzg2XSwyNTZdLDY1MzM1OltbODddLDI1Nl0sNjUzMzY6W1s4OF0sMjU2XSw2NTMzNzpbWzg5XSwyNTZdLDY1MzM4OltbOTBdLDI1Nl0sNjUzMzk6W1s5MV0sMjU2XSw2NTM0MDpbWzkyXSwyNTZdLDY1MzQxOltbOTNdLDI1Nl0sNjUzNDI6W1s5NF0sMjU2XSw2NTM0MzpbWzk1XSwyNTZdLDY1MzQ0OltbOTZdLDI1Nl0sNjUzNDU6W1s5N10sMjU2XSw2NTM0NjpbWzk4XSwyNTZdLDY1MzQ3OltbOTldLDI1Nl0sNjUzNDg6W1sxMDBdLDI1Nl0sNjUzNDk6W1sxMDFdLDI1Nl0sNjUzNTA6W1sxMDJdLDI1Nl0sNjUzNTE6W1sxMDNdLDI1Nl0sNjUzNTI6W1sxMDRdLDI1Nl0sNjUzNTM6W1sxMDVdLDI1Nl0sNjUzNTQ6W1sxMDZdLDI1Nl0sNjUzNTU6W1sxMDddLDI1Nl0sNjUzNTY6W1sxMDhdLDI1Nl0sNjUzNTc6W1sxMDldLDI1Nl0sNjUzNTg6W1sxMTBdLDI1Nl0sNjUzNTk6W1sxMTFdLDI1Nl0sNjUzNjA6W1sxMTJdLDI1Nl0sNjUzNjE6W1sxMTNdLDI1Nl0sNjUzNjI6W1sxMTRdLDI1Nl0sNjUzNjM6W1sxMTVdLDI1Nl0sNjUzNjQ6W1sxMTZdLDI1Nl0sNjUzNjU6W1sxMTddLDI1Nl0sNjUzNjY6W1sxMThdLDI1Nl0sNjUzNjc6W1sxMTldLDI1Nl0sNjUzNjg6W1sxMjBdLDI1Nl0sNjUzNjk6W1sxMjFdLDI1Nl0sNjUzNzA6W1sxMjJdLDI1Nl0sNjUzNzE6W1sxMjNdLDI1Nl0sNjUzNzI6W1sxMjRdLDI1Nl0sNjUzNzM6W1sxMjVdLDI1Nl0sNjUzNzQ6W1sxMjZdLDI1Nl0sNjUzNzU6W1sxMDYyOV0sMjU2XSw2NTM3NjpbWzEwNjMwXSwyNTZdLDY1Mzc3OltbMTIyOTBdLDI1Nl0sNjUzNzg6W1sxMjMwMF0sMjU2XSw2NTM3OTpbWzEyMzAxXSwyNTZdLDY1MzgwOltbMTIyODldLDI1Nl0sNjUzODE6W1sxMjUzOV0sMjU2XSw2NTM4MjpbWzEyNTMwXSwyNTZdLDY1MzgzOltbMTI0NDldLDI1Nl0sNjUzODQ6W1sxMjQ1MV0sMjU2XSw2NTM4NTpbWzEyNDUzXSwyNTZdLDY1Mzg2OltbMTI0NTVdLDI1Nl0sNjUzODc6W1sxMjQ1N10sMjU2XSw2NTM4ODpbWzEyNTE1XSwyNTZdLDY1Mzg5OltbMTI1MTddLDI1Nl0sNjUzOTA6W1sxMjUxOV0sMjU2XSw2NTM5MTpbWzEyNDgzXSwyNTZdLDY1MzkyOltbMTI1NDBdLDI1Nl0sNjUzOTM6W1sxMjQ1MF0sMjU2XSw2NTM5NDpbWzEyNDUyXSwyNTZdLDY1Mzk1OltbMTI0NTRdLDI1Nl0sNjUzOTY6W1sxMjQ1Nl0sMjU2XSw2NTM5NzpbWzEyNDU4XSwyNTZdLDY1Mzk4OltbMTI0NTldLDI1Nl0sNjUzOTk6W1sxMjQ2MV0sMjU2XSw2NTQwMDpbWzEyNDYzXSwyNTZdLDY1NDAxOltbMTI0NjVdLDI1Nl0sNjU0MDI6W1sxMjQ2N10sMjU2XSw2NTQwMzpbWzEyNDY5XSwyNTZdLDY1NDA0OltbMTI0NzFdLDI1Nl0sNjU0MDU6W1sxMjQ3M10sMjU2XSw2NTQwNjpbWzEyNDc1XSwyNTZdLDY1NDA3OltbMTI0NzddLDI1Nl0sNjU0MDg6W1sxMjQ3OV0sMjU2XSw2NTQwOTpbWzEyNDgxXSwyNTZdLDY1NDEwOltbMTI0ODRdLDI1Nl0sNjU0MTE6W1sxMjQ4Nl0sMjU2XSw2NTQxMjpbWzEyNDg4XSwyNTZdLDY1NDEzOltbMTI0OTBdLDI1Nl0sNjU0MTQ6W1sxMjQ5MV0sMjU2XSw2NTQxNTpbWzEyNDkyXSwyNTZdLDY1NDE2OltbMTI0OTNdLDI1Nl0sNjU0MTc6W1sxMjQ5NF0sMjU2XSw2NTQxODpbWzEyNDk1XSwyNTZdLDY1NDE5OltbMTI0OThdLDI1Nl0sNjU0MjA6W1sxMjUwMV0sMjU2XSw2NTQyMTpbWzEyNTA0XSwyNTZdLDY1NDIyOltbMTI1MDddLDI1Nl0sNjU0MjM6W1sxMjUxMF0sMjU2XSw2NTQyNDpbWzEyNTExXSwyNTZdLDY1NDI1OltbMTI1MTJdLDI1Nl0sNjU0MjY6W1sxMjUxM10sMjU2XSw2NTQyNzpbWzEyNTE0XSwyNTZdLDY1NDI4OltbMTI1MTZdLDI1Nl0sNjU0Mjk6W1sxMjUxOF0sMjU2XSw2NTQzMDpbWzEyNTIwXSwyNTZdLDY1NDMxOltbMTI1MjFdLDI1Nl0sNjU0MzI6W1sxMjUyMl0sMjU2XSw2NTQzMzpbWzEyNTIzXSwyNTZdLDY1NDM0OltbMTI1MjRdLDI1Nl0sNjU0MzU6W1sxMjUyNV0sMjU2XSw2NTQzNjpbWzEyNTI3XSwyNTZdLDY1NDM3OltbMTI1MzFdLDI1Nl0sNjU0Mzg6W1sxMjQ0MV0sMjU2XSw2NTQzOTpbWzEyNDQyXSwyNTZdLDY1NDQwOltbMTI2NDRdLDI1Nl0sNjU0NDE6W1sxMjU5M10sMjU2XSw2NTQ0MjpbWzEyNTk0XSwyNTZdLDY1NDQzOltbMTI1OTVdLDI1Nl0sNjU0NDQ6W1sxMjU5Nl0sMjU2XSw2NTQ0NTpbWzEyNTk3XSwyNTZdLDY1NDQ2OltbMTI1OThdLDI1Nl0sNjU0NDc6W1sxMjU5OV0sMjU2XSw2NTQ0ODpbWzEyNjAwXSwyNTZdLDY1NDQ5OltbMTI2MDFdLDI1Nl0sNjU0NTA6W1sxMjYwMl0sMjU2XSw2NTQ1MTpbWzEyNjAzXSwyNTZdLDY1NDUyOltbMTI2MDRdLDI1Nl0sNjU0NTM6W1sxMjYwNV0sMjU2XSw2NTQ1NDpbWzEyNjA2XSwyNTZdLDY1NDU1OltbMTI2MDddLDI1Nl0sNjU0NTY6W1sxMjYwOF0sMjU2XSw2NTQ1NzpbWzEyNjA5XSwyNTZdLDY1NDU4OltbMTI2MTBdLDI1Nl0sNjU0NTk6W1sxMjYxMV0sMjU2XSw2NTQ2MDpbWzEyNjEyXSwyNTZdLDY1NDYxOltbMTI2MTNdLDI1Nl0sNjU0NjI6W1sxMjYxNF0sMjU2XSw2NTQ2MzpbWzEyNjE1XSwyNTZdLDY1NDY0OltbMTI2MTZdLDI1Nl0sNjU0NjU6W1sxMjYxN10sMjU2XSw2NTQ2NjpbWzEyNjE4XSwyNTZdLDY1NDY3OltbMTI2MTldLDI1Nl0sNjU0Njg6W1sxMjYyMF0sMjU2XSw2NTQ2OTpbWzEyNjIxXSwyNTZdLDY1NDcwOltbMTI2MjJdLDI1Nl0sNjU0NzQ6W1sxMjYyM10sMjU2XSw2NTQ3NTpbWzEyNjI0XSwyNTZdLDY1NDc2OltbMTI2MjVdLDI1Nl0sNjU0Nzc6W1sxMjYyNl0sMjU2XSw2NTQ3ODpbWzEyNjI3XSwyNTZdLDY1NDc5OltbMTI2MjhdLDI1Nl0sNjU0ODI6W1sxMjYyOV0sMjU2XSw2NTQ4MzpbWzEyNjMwXSwyNTZdLDY1NDg0OltbMTI2MzFdLDI1Nl0sNjU0ODU6W1sxMjYzMl0sMjU2XSw2NTQ4NjpbWzEyNjMzXSwyNTZdLDY1NDg3OltbMTI2MzRdLDI1Nl0sNjU0OTA6W1sxMjYzNV0sMjU2XSw2NTQ5MTpbWzEyNjM2XSwyNTZdLDY1NDkyOltbMTI2MzddLDI1Nl0sNjU0OTM6W1sxMjYzOF0sMjU2XSw2NTQ5NDpbWzEyNjM5XSwyNTZdLDY1NDk1OltbMTI2NDBdLDI1Nl0sNjU0OTg6W1sxMjY0MV0sMjU2XSw2NTQ5OTpbWzEyNjQyXSwyNTZdLDY1NTAwOltbMTI2NDNdLDI1Nl0sNjU1MDQ6W1sxNjJdLDI1Nl0sNjU1MDU6W1sxNjNdLDI1Nl0sNjU1MDY6W1sxNzJdLDI1Nl0sNjU1MDc6W1sxNzVdLDI1Nl0sNjU1MDg6W1sxNjZdLDI1Nl0sNjU1MDk6W1sxNjVdLDI1Nl0sNjU1MTA6W1s4MzYxXSwyNTZdLDY1NTEyOltbOTQ3NF0sMjU2XSw2NTUxMzpbWzg1OTJdLDI1Nl0sNjU1MTQ6W1s4NTkzXSwyNTZdLDY1NTE1OltbODU5NF0sMjU2XSw2NTUxNjpbWzg1OTVdLDI1Nl0sNjU1MTc6W1s5NjMyXSwyNTZdLDY1NTE4OltbOTY3NV0sMjU2XX0KCn07CgogICAvKioqKiogTW9kdWxlIHRvIGV4cG9ydCAqLwogICB2YXIgdW5vcm0gPSB7CiAgICAgIG5mYzogbmZjLAogICAgICBuZmQ6IG5mZCwKICAgICAgbmZrYzogbmZrYywKICAgICAgbmZrZDogbmZrZAogICB9OwoKICAgLypnbG9iYWxzIG1vZHVsZTp0cnVlLGRlZmluZTp0cnVlKi8KCiAgIC8vIENvbW1vbkpTCiAgIGlmICh0eXBlb2YgbW9kdWxlID09PSAib2JqZWN0IikgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHVub3JtOwoKICAgLy8gQU1ECiAgIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kKSB7CiAgICAgIGRlZmluZSgidW5vcm0iLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgIHJldHVybiB1bm9ybTsKICAgICAgfSk7CgogICAvLyBHbG9iYWwKICAgfSBlbHNlIHsKICAgICAgcm9vdC51bm9ybSA9IHVub3JtOwogICB9CgogICAvKioqKiogRXhwb3J0IGFzIHNoaW0gZm9yIFN0cmluZzo6bm9ybWFsaXplIG1ldGhvZCAqKioqKi8KICAgLyoKICAgICAgaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9aGFybW9ueTpzcGVjaWZpY2F0aW9uX2RyYWZ0cyNub3ZlbWJlcl84XzIwMTNfZHJhZnRfcmV2XzIxCgogICAgICAyMS4xLjMuMTIgU3RyaW5nLnByb3RvdHlwZS5ub3JtYWxpemUoZm9ybT0iTkZDIikKICAgICAgV2hlbiB0aGUgbm9ybWFsaXplIG1ldGhvZCBpcyBjYWxsZWQgd2l0aCBvbmUgYXJndW1lbnQgZm9ybSwgdGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46CgogICAgICAxLiBMZXQgTyBiZSBDaGVja09iamVjdENvZXJjaWJsZSh0aGlzIHZhbHVlKS4KICAgICAgMi4gTGV0IFMgYmUgVG9TdHJpbmcoTykuCiAgICAgIDMuIFJldHVybklmQWJydXB0KFMpLgogICAgICA0LiBJZiBmb3JtIGlzIG5vdCBwcm92aWRlZCBvciB1bmRlZmluZWQgbGV0IGZvcm0gYmUgIk5GQyIuCiAgICAgIDUuIExldCBmIGJlIFRvU3RyaW5nKGZvcm0pLgogICAgICA2LiBSZXR1cm5JZkFicnVwdChmKS4KICAgICAgNy4gSWYgZiBpcyBub3Qgb25lIG9mICJORkMiLCAiTkZEIiwgIk5GS0MiLCBvciAiTkZLRCIsIHRoZW4gdGhyb3cgYSBSYW5nZUVycm9yIEV4Y2VwdGlvbi4KICAgICAgOC4gTGV0IG5zIGJlIHRoZSBTdHJpbmcgdmFsdWUgaXMgdGhlIHJlc3VsdCBvZiBub3JtYWxpemluZyBTIGludG8gdGhlIG5vcm1hbGl6YXRpb24gZm9ybSBuYW1lZCBieSBmIGFzIHNwZWNpZmllZCBpbiBVbmljb2RlIFN0YW5kYXJkIEFubmV4ICMxNSwgVW5pY29kZU5vcm1hbGl6YXRvaW4gRm9ybXMuCiAgICAgIDkuIFJldHVybiBucy4KCiAgICAgIFRoZSBsZW5ndGggcHJvcGVydHkgb2YgdGhlIG5vcm1hbGl6ZSBtZXRob2QgaXMgMC4KCiAgICAgICpOT1RFKiBUaGUgbm9ybWFsaXplIGZ1bmN0aW9uIGlzIGludGVudGlvbmFsbHkgZ2VuZXJpYzsgaXQgZG9lcyBub3QgcmVxdWlyZSB0aGF0IGl0cyB0aGlzIHZhbHVlIGJlIGEgU3RyaW5nIG9iamVjdC4gVGhlcmVmb3JlIGl0IGNhbiBiZSB0cmFuc2ZlcnJlZCB0byBvdGhlciBraW5kcyBvZiBvYmplY3RzIGZvciB1c2UgYXMgYSBtZXRob2QuCiAgICovCiAgICB1bm9ybS5zaGltQXBwbGllZCA9IGZhbHNlOwoKICAgaWYgKCFTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZSkgewogICAgICBTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKGZvcm0pIHsKICAgICAgICAgdmFyIHN0ciA9ICIiICsgdGhpczsKICAgICAgICAgZm9ybSA9ICBmb3JtID09PSB1bmRlZmluZWQgPyAiTkZDIiA6IGZvcm07CgogICAgICAgICBpZiAoZm9ybSA9PT0gIk5GQyIpIHsKICAgICAgICAgICAgcmV0dXJuIHVub3JtLm5mYyhzdHIpOwogICAgICAgICB9IGVsc2UgaWYgKGZvcm0gPT09ICJORkQiKSB7CiAgICAgICAgICAgIHJldHVybiB1bm9ybS5uZmQoc3RyKTsKICAgICAgICAgfSBlbHNlIGlmIChmb3JtID09PSAiTkZLQyIpIHsKICAgICAgICAgICAgcmV0dXJuIHVub3JtLm5ma2Moc3RyKTsKICAgICAgICAgfSBlbHNlIGlmIChmb3JtID09PSAiTkZLRCIpIHsKICAgICAgICAgICAgcmV0dXJuIHVub3JtLm5ma2Qoc3RyKTsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbm9ybWFsaXphdGlvbiBmb3JtOiAiICsgZm9ybSk7CiAgICAgICAgIH0KICAgICAgfTsKCiAgICAgIHVub3JtLnNoaW1BcHBsaWVkID0gdHJ1ZTsKICAgfQp9KHRoaXMpKTsKCn0se31dLDE3NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKCi8qKgogKiBNb2R1bGUgZXhwb3J0cy4KICovCgptb2R1bGUuZXhwb3J0cyA9IGRlcHJlY2F0ZTsKCi8qKgogKiBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLgogKiBSZXR1cm5zIGEgbW9kaWZpZWQgZnVuY3Rpb24gd2hpY2ggd2FybnMgb25jZSBieSBkZWZhdWx0LgogKgogKiBJZiBgbG9jYWxTdG9yYWdlLm5vRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC4KICoKICogSWYgYGxvY2FsU3RvcmFnZS50aHJvd0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGRlcHJlY2F0ZWQgZnVuY3Rpb25zCiAqIHdpbGwgdGhyb3cgYW4gRXJyb3Igd2hlbiBpbnZva2VkLgogKgogKiBJZiBgbG9jYWxTdG9yYWdlLnRyYWNlRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnMKICogd2lsbCBpbnZva2UgYGNvbnNvbGUudHJhY2UoKWAgaW5zdGVhZCBvZiBgY29uc29sZS5lcnJvcigpYC4KICoKICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSB0aGUgZnVuY3Rpb24gdG8gZGVwcmVjYXRlCiAqIEBwYXJhbSB7U3RyaW5nfSBtc2cgLSB0aGUgc3RyaW5nIHRvIHByaW50IHRvIHRoZSBjb25zb2xlIHdoZW4gYGZuYCBpcyBpbnZva2VkCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gYSBuZXcgImRlcHJlY2F0ZWQiIHZlcnNpb24gb2YgYGZuYAogKiBAYXBpIHB1YmxpYwogKi8KCmZ1bmN0aW9uIGRlcHJlY2F0ZSAoZm4sIG1zZykgewogIGlmIChjb25maWcoJ25vRGVwcmVjYXRpb24nKSkgewogICAgcmV0dXJuIGZuOwogIH0KCiAgdmFyIHdhcm5lZCA9IGZhbHNlOwogIGZ1bmN0aW9uIGRlcHJlY2F0ZWQoKSB7CiAgICBpZiAoIXdhcm5lZCkgewogICAgICBpZiAoY29uZmlnKCd0aHJvd0RlcHJlY2F0aW9uJykpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTsKICAgICAgfSBlbHNlIGlmIChjb25maWcoJ3RyYWNlRGVwcmVjYXRpb24nKSkgewogICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLndhcm4obXNnKTsKICAgICAgfQogICAgICB3YXJuZWQgPSB0cnVlOwogICAgfQogICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICByZXR1cm4gZGVwcmVjYXRlZDsKfQoKLyoqCiAqIENoZWNrcyBgbG9jYWxTdG9yYWdlYCBmb3IgYm9vbGVhbiB2YWx1ZXMgZm9yIHRoZSBnaXZlbiBgbmFtZWAuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lCiAqIEByZXR1cm5zIHtCb29sZWFufQogKiBAYXBpIHByaXZhdGUKICovCgpmdW5jdGlvbiBjb25maWcgKG5hbWUpIHsKICAvLyBhY2Nlc3NpbmcgZ2xvYmFsLmxvY2FsU3RvcmFnZSBjYW4gdHJpZ2dlciBhIERPTUV4Y2VwdGlvbiBpbiBzYW5kYm94ZWQgaWZyYW1lcwogIHRyeSB7CiAgICBpZiAoIWdsb2JhbC5sb2NhbFN0b3JhZ2UpIHJldHVybiBmYWxzZTsKICB9IGNhdGNoIChfKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHZhciB2YWwgPSBnbG9iYWwubG9jYWxTdG9yYWdlW25hbWVdOwogIGlmIChudWxsID09IHZhbCkgcmV0dXJuIGZhbHNlOwogIHJldHVybiBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7Cn0KCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwxNzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQnVmZmVyKGFyZykgewogIHJldHVybiBhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcKICAgICYmIHR5cGVvZiBhcmcuY29weSA9PT0gJ2Z1bmN0aW9uJwogICAgJiYgdHlwZW9mIGFyZy5maWxsID09PSAnZnVuY3Rpb24nCiAgICAmJiB0eXBlb2YgYXJnLnJlYWRVSW50OCA9PT0gJ2Z1bmN0aW9uJzsKfQp9LHt9XSwxNzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKHByb2Nlc3MsZ2xvYmFsKXsKLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuCi8vCi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKLy8gIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwovLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQKLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlCi8vIGZvbGxvd2luZyBjb25kaXRpb25zOgovLwovLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZAovLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KLy8KLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MKLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgovLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOCi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLAovLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRQovLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoKdmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkaiVdL2c7CmV4cG9ydHMuZm9ybWF0ID0gZnVuY3Rpb24oZikgewogIGlmICghaXNTdHJpbmcoZikpIHsKICAgIHZhciBvYmplY3RzID0gW107CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICBvYmplY3RzLnB1c2goaW5zcGVjdChhcmd1bWVudHNbaV0pKTsKICAgIH0KICAgIHJldHVybiBvYmplY3RzLmpvaW4oJyAnKTsKICB9CgogIHZhciBpID0gMTsKICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICB2YXIgbGVuID0gYXJncy5sZW5ndGg7CiAgdmFyIHN0ciA9IFN0cmluZyhmKS5yZXBsYWNlKGZvcm1hdFJlZ0V4cCwgZnVuY3Rpb24oeCkgewogICAgaWYgKHggPT09ICclJScpIHJldHVybiAnJSc7CiAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4OwogICAgc3dpdGNoICh4KSB7CiAgICAgIGNhc2UgJyVzJzogcmV0dXJuIFN0cmluZyhhcmdzW2krK10pOwogICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTsKICAgICAgY2FzZSAnJWonOgogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTsKICAgICAgICB9IGNhdGNoIChfKSB7CiAgICAgICAgICByZXR1cm4gJ1tDaXJjdWxhcl0nOwogICAgICAgIH0KICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4geDsKICAgIH0KICB9KTsKICBmb3IgKHZhciB4ID0gYXJnc1tpXTsgaSA8IGxlbjsgeCA9IGFyZ3NbKytpXSkgewogICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHsKICAgICAgc3RyICs9ICcgJyArIHg7CiAgICB9IGVsc2UgewogICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTsKICAgIH0KICB9CiAgcmV0dXJuIHN0cjsKfTsKCgovLyBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLgovLyBSZXR1cm5zIGEgbW9kaWZpZWQgZnVuY3Rpb24gd2hpY2ggd2FybnMgb25jZSBieSBkZWZhdWx0LgovLyBJZiAtLW5vLWRlcHJlY2F0aW9uIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLgpleHBvcnRzLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKGZuLCBtc2cpIHsKICAvLyBBbGxvdyBmb3IgZGVwcmVjYXRpbmcgdGhpbmdzIGluIHRoZSBwcm9jZXNzIG9mIHN0YXJ0aW5nIHVwLgogIGlmIChpc1VuZGVmaW5lZChnbG9iYWwucHJvY2VzcykpIHsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGV4cG9ydHMuZGVwcmVjYXRlKGZuLCBtc2cpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0KCiAgaWYgKHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkgewogICAgcmV0dXJuIGZuOwogIH0KCiAgdmFyIHdhcm5lZCA9IGZhbHNlOwogIGZ1bmN0aW9uIGRlcHJlY2F0ZWQoKSB7CiAgICBpZiAoIXdhcm5lZCkgewogICAgICBpZiAocHJvY2Vzcy50aHJvd0RlcHJlY2F0aW9uKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7CiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKSB7CiAgICAgICAgY29uc29sZS50cmFjZShtc2cpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTsKICAgICAgfQogICAgICB3YXJuZWQgPSB0cnVlOwogICAgfQogICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICByZXR1cm4gZGVwcmVjYXRlZDsKfTsKCgp2YXIgZGVidWdzID0ge307CnZhciBkZWJ1Z0Vudmlyb247CmV4cG9ydHMuZGVidWdsb2cgPSBmdW5jdGlvbihzZXQpIHsKICBpZiAoaXNVbmRlZmluZWQoZGVidWdFbnZpcm9uKSkKICAgIGRlYnVnRW52aXJvbiA9IHByb2Nlc3MuZW52Lk5PREVfREVCVUcgfHwgJyc7CiAgc2V0ID0gc2V0LnRvVXBwZXJDYXNlKCk7CiAgaWYgKCFkZWJ1Z3Nbc2V0XSkgewogICAgaWYgKG5ldyBSZWdFeHAoJ1xcYicgKyBzZXQgKyAnXFxiJywgJ2knKS50ZXN0KGRlYnVnRW52aXJvbikpIHsKICAgICAgdmFyIHBpZCA9IHByb2Nlc3MucGlkOwogICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBtc2cgPSBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpOwogICAgICAgIGNvbnNvbGUuZXJyb3IoJyVzICVkOiAlcycsIHNldCwgcGlkLCBtc2cpOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHt9OwogICAgfQogIH0KICByZXR1cm4gZGVidWdzW3NldF07Cn07CgoKLyoqCiAqIEVjaG9zIHRoZSB2YWx1ZSBvZiBhIHZhbHVlLiBUcnlzIHRvIHByaW50IHRoZSB2YWx1ZSBvdXQKICogaW4gdGhlIGJlc3Qgd2F5IHBvc3NpYmxlIGdpdmVuIHRoZSBkaWZmZXJlbnQgdHlwZXMuCiAqCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBwcmludCBvdXQuCiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIE9wdGlvbmFsIG9wdGlvbnMgb2JqZWN0IHRoYXQgYWx0ZXJzIHRoZSBvdXRwdXQuCiAqLwovKiBsZWdhY3k6IG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycyovCmZ1bmN0aW9uIGluc3BlY3Qob2JqLCBvcHRzKSB7CiAgLy8gZGVmYXVsdCBvcHRpb25zCiAgdmFyIGN0eCA9IHsKICAgIHNlZW46IFtdLAogICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3IKICB9OwogIC8vIGxlZ2FjeS4uLgogIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTsKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSA0KSBjdHguY29sb3JzID0gYXJndW1lbnRzWzNdOwogIGlmIChpc0Jvb2xlYW4ob3B0cykpIHsKICAgIC8vIGxlZ2FjeS4uLgogICAgY3R4LnNob3dIaWRkZW4gPSBvcHRzOwogIH0gZWxzZSBpZiAob3B0cykgewogICAgLy8gZ290IGFuICJvcHRpb25zIiBvYmplY3QKICAgIGV4cG9ydHMuX2V4dGVuZChjdHgsIG9wdHMpOwogIH0KICAvLyBzZXQgZGVmYXVsdCBvcHRpb25zCiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSkgY3R4LnNob3dIaWRkZW4gPSBmYWxzZTsKICBpZiAoaXNVbmRlZmluZWQoY3R4LmRlcHRoKSkgY3R4LmRlcHRoID0gMjsKICBpZiAoaXNVbmRlZmluZWQoY3R4LmNvbG9ycykpIGN0eC5jb2xvcnMgPSBmYWxzZTsKICBpZiAoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKSBjdHguY3VzdG9tSW5zcGVjdCA9IHRydWU7CiAgaWYgKGN0eC5jb2xvcnMpIGN0eC5zdHlsaXplID0gc3R5bGl6ZVdpdGhDb2xvcjsKICByZXR1cm4gZm9ybWF0VmFsdWUoY3R4LCBvYmosIGN0eC5kZXB0aCk7Cn0KZXhwb3J0cy5pbnNwZWN0ID0gaW5zcGVjdDsKCgovLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FOU0lfZXNjYXBlX2NvZGUjZ3JhcGhpY3MKaW5zcGVjdC5jb2xvcnMgPSB7CiAgJ2JvbGQnIDogWzEsIDIyXSwKICAnaXRhbGljJyA6IFszLCAyM10sCiAgJ3VuZGVybGluZScgOiBbNCwgMjRdLAogICdpbnZlcnNlJyA6IFs3LCAyN10sCiAgJ3doaXRlJyA6IFszNywgMzldLAogICdncmV5JyA6IFs5MCwgMzldLAogICdibGFjaycgOiBbMzAsIDM5XSwKICAnYmx1ZScgOiBbMzQsIDM5XSwKICAnY3lhbicgOiBbMzYsIDM5XSwKICAnZ3JlZW4nIDogWzMyLCAzOV0sCiAgJ21hZ2VudGEnIDogWzM1LCAzOV0sCiAgJ3JlZCcgOiBbMzEsIDM5XSwKICAneWVsbG93JyA6IFszMywgMzldCn07CgovLyBEb24ndCB1c2UgJ2JsdWUnIG5vdCB2aXNpYmxlIG9uIGNtZC5leGUKaW5zcGVjdC5zdHlsZXMgPSB7CiAgJ3NwZWNpYWwnOiAnY3lhbicsCiAgJ251bWJlcic6ICd5ZWxsb3cnLAogICdib29sZWFuJzogJ3llbGxvdycsCiAgJ3VuZGVmaW5lZCc6ICdncmV5JywKICAnbnVsbCc6ICdib2xkJywKICAnc3RyaW5nJzogJ2dyZWVuJywKICAnZGF0ZSc6ICdtYWdlbnRhJywKICAvLyAibmFtZSI6IGludGVudGlvbmFsbHkgbm90IHN0eWxpbmcKICAncmVnZXhwJzogJ3JlZCcKfTsKCgpmdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7CiAgdmFyIHN0eWxlID0gaW5zcGVjdC5zdHlsZXNbc3R5bGVUeXBlXTsKCiAgaWYgKHN0eWxlKSB7CiAgICByZXR1cm4gJ1x1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzBdICsgJ20nICsgc3RyICsKICAgICAgICAgICAnXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMV0gKyAnbSc7CiAgfSBlbHNlIHsKICAgIHJldHVybiBzdHI7CiAgfQp9CgoKZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHsKICByZXR1cm4gc3RyOwp9CgoKZnVuY3Rpb24gYXJyYXlUb0hhc2goYXJyYXkpIHsKICB2YXIgaGFzaCA9IHt9OwoKICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCwgaWR4KSB7CiAgICBoYXNoW3ZhbF0gPSB0cnVlOwogIH0pOwoKICByZXR1cm4gaGFzaDsKfQoKCmZ1bmN0aW9uIGZvcm1hdFZhbHVlKGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcykgewogIC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy4KICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXQKICBpZiAoY3R4LmN1c3RvbUluc3BlY3QgJiYKICAgICAgdmFsdWUgJiYKICAgICAgaXNGdW5jdGlvbih2YWx1ZS5pbnNwZWN0KSAmJgogICAgICAvLyBGaWx0ZXIgb3V0IHRoZSB1dGlsIG1vZHVsZSwgaXQncyBpbnNwZWN0IGZ1bmN0aW9uIGlzIHNwZWNpYWwKICAgICAgdmFsdWUuaW5zcGVjdCAhPT0gZXhwb3J0cy5pbnNwZWN0ICYmCiAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLgogICAgICAhKHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSA9PT0gdmFsdWUpKSB7CiAgICB2YXIgcmV0ID0gdmFsdWUuaW5zcGVjdChyZWN1cnNlVGltZXMsIGN0eCk7CiAgICBpZiAoIWlzU3RyaW5nKHJldCkpIHsKICAgICAgcmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH0KCiAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXMKICB2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpOwogIGlmIChwcmltaXRpdmUpIHsKICAgIHJldHVybiBwcmltaXRpdmU7CiAgfQoKICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuCiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7CiAgdmFyIHZpc2libGVLZXlzID0gYXJyYXlUb0hhc2goa2V5cyk7CgogIGlmIChjdHguc2hvd0hpZGRlbikgewogICAga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTsKICB9CgogIC8vIElFIGRvZXNuJ3QgbWFrZSBlcnJvciBmaWVsZHMgbm9uLWVudW1lcmFibGUKICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweAogIGlmIChpc0Vycm9yKHZhbHVlKQogICAgICAmJiAoa2V5cy5pbmRleE9mKCdtZXNzYWdlJykgPj0gMCB8fCBrZXlzLmluZGV4T2YoJ2Rlc2NyaXB0aW9uJykgPj0gMCkpIHsKICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7CiAgfQoKICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuCiAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7CiAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHsKICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJzsKICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZSArICddJywgJ3NwZWNpYWwnKTsKICAgIH0KICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHsKICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTsKICAgIH0KICAgIGlmIChpc0RhdGUodmFsdWUpKSB7CiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTsKICAgIH0KICAgIGlmIChpc0Vycm9yKHZhbHVlKSkgewogICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpOwogICAgfQogIH0KCiAgdmFyIGJhc2UgPSAnJywgYXJyYXkgPSBmYWxzZSwgYnJhY2VzID0gWyd7JywgJ30nXTsKCiAgLy8gTWFrZSBBcnJheSBzYXkgdGhhdCB0aGV5IGFyZSBBcnJheQogIGlmIChpc0FycmF5KHZhbHVlKSkgewogICAgYXJyYXkgPSB0cnVlOwogICAgYnJhY2VzID0gWydbJywgJ10nXTsKICB9CgogIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9ucwogIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkgewogICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJzsKICAgIGJhc2UgPSAnIFtGdW5jdGlvbicgKyBuICsgJ10nOwogIH0KCiAgLy8gTWFrZSBSZWdFeHBzIHNheSB0aGF0IHRoZXkgYXJlIFJlZ0V4cHMKICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7CiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTsKICB9CgogIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZQogIGlmIChpc0RhdGUodmFsdWUpKSB7CiAgICBiYXNlID0gJyAnICsgRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbCh2YWx1ZSk7CiAgfQoKICAvLyBNYWtlIGVycm9yIHdpdGggbWVzc2FnZSBmaXJzdCBzYXkgdGhlIGVycm9yCiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7CiAgICBiYXNlID0gJyAnICsgZm9ybWF0RXJyb3IodmFsdWUpOwogIH0KCiAgaWYgKGtleXMubGVuZ3RoID09PSAwICYmICghYXJyYXkgfHwgdmFsdWUubGVuZ3RoID09IDApKSB7CiAgICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArIGJyYWNlc1sxXTsKICB9CgogIGlmIChyZWN1cnNlVGltZXMgPCAwKSB7CiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7CiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTsKICAgIH0KICB9CgogIGN0eC5zZWVuLnB1c2godmFsdWUpOwoKICB2YXIgb3V0cHV0OwogIGlmIChhcnJheSkgewogICAgb3V0cHV0ID0gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cyk7CiAgfSBlbHNlIHsKICAgIG91dHB1dCA9IGtleXMubWFwKGZ1bmN0aW9uKGtleSkgewogICAgICByZXR1cm4gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSk7CiAgICB9KTsKICB9CgogIGN0eC5zZWVuLnBvcCgpOwoKICByZXR1cm4gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpOwp9CgoKZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHsKICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKQogICAgcmV0dXJuIGN0eC5zdHlsaXplKCd1bmRlZmluZWQnLCAndW5kZWZpbmVkJyk7CiAgaWYgKGlzU3RyaW5nKHZhbHVlKSkgewogICAgdmFyIHNpbXBsZSA9ICdcJycgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkucmVwbGFjZSgvXiJ8IiQvZywgJycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8nL2csICJcXCciKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwiL2csICciJykgKyAnXCcnOwogICAgcmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwgJ3N0cmluZycpOwogIH0KICBpZiAoaXNOdW1iZXIodmFsdWUpKQogICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdudW1iZXInKTsKICBpZiAoaXNCb29sZWFuKHZhbHVlKSkKICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpOwogIC8vIEZvciBzb21lIHJlYXNvbiB0eXBlb2YgbnVsbCBpcyAib2JqZWN0Iiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuCiAgaWYgKGlzTnVsbCh2YWx1ZSkpCiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ251bGwnLCAnbnVsbCcpOwp9CgoKZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHsKICByZXR1cm4gJ1snICsgRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpICsgJ10nOwp9CgoKZnVuY3Rpb24gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cykgewogIHZhciBvdXRwdXQgPSBbXTsKICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7ICsraSkgewogICAgaWYgKGhhc093blByb3BlcnR5KHZhbHVlLCBTdHJpbmcoaSkpKSB7CiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsCiAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTsKICAgIH0gZWxzZSB7CiAgICAgIG91dHB1dC5wdXNoKCcnKTsKICAgIH0KICB9CiAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgaWYgKCFrZXkubWF0Y2goL15cZCskLykpIHsKICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywKICAgICAgICAgIGtleSwgdHJ1ZSkpOwogICAgfQogIH0pOwogIHJldHVybiBvdXRwdXQ7Cn0KCgpmdW5jdGlvbiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KSB7CiAgdmFyIG5hbWUsIHN0ciwgZGVzYzsKICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KSB8fCB7IHZhbHVlOiB2YWx1ZVtrZXldIH07CiAgaWYgKGRlc2MuZ2V0KSB7CiAgICBpZiAoZGVzYy5zZXQpIHsKICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXIvU2V0dGVyXScsICdzcGVjaWFsJyk7CiAgICB9IGVsc2UgewogICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpOwogICAgfQogIH0gZWxzZSB7CiAgICBpZiAoZGVzYy5zZXQpIHsKICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tTZXR0ZXJdJywgJ3NwZWNpYWwnKTsKICAgIH0KICB9CiAgaWYgKCFoYXNPd25Qcm9wZXJ0eSh2aXNpYmxlS2V5cywga2V5KSkgewogICAgbmFtZSA9ICdbJyArIGtleSArICddJzsKICB9CiAgaWYgKCFzdHIpIHsKICAgIGlmIChjdHguc2Vlbi5pbmRleE9mKGRlc2MudmFsdWUpIDwgMCkgewogICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHsKICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIG51bGwpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7CiAgICAgIH0KICAgICAgaWYgKHN0ci5pbmRleE9mKCdcbicpID4gLTEpIHsKICAgICAgICBpZiAoYXJyYXkpIHsKICAgICAgICAgIHN0ciA9IHN0ci5zcGxpdCgnXG4nKS5tYXAoZnVuY3Rpb24obGluZSkgewogICAgICAgICAgICByZXR1cm4gJyAgJyArIGxpbmU7CiAgICAgICAgICB9KS5qb2luKCdcbicpLnN1YnN0cigyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3RyID0gJ1xuJyArIHN0ci5zcGxpdCgnXG4nKS5tYXAoZnVuY3Rpb24obGluZSkgewogICAgICAgICAgICByZXR1cm4gJyAgICcgKyBsaW5lOwogICAgICAgICAgfSkuam9pbignXG4nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbQ2lyY3VsYXJdJywgJ3NwZWNpYWwnKTsKICAgIH0KICB9CiAgaWYgKGlzVW5kZWZpbmVkKG5hbWUpKSB7CiAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXGQrJC8pKSB7CiAgICAgIHJldHVybiBzdHI7CiAgICB9CiAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpOwogICAgaWYgKG5hbWUubWF0Y2goL14iKFthLXpBLVpfXVthLXpBLVpfMC05XSopIiQvKSkgewogICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMSwgbmFtZS5sZW5ndGggLSAyKTsKICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7CiAgICB9IGVsc2UgewogICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC8nL2csICJcXCciKQogICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCIvZywgJyInKQogICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXiJ8IiQpL2csICInIik7CiAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnc3RyaW5nJyk7CiAgICB9CiAgfQoKICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7Cn0KCgpmdW5jdGlvbiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcykgewogIHZhciBudW1MaW5lc0VzdCA9IDA7CiAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7CiAgICBudW1MaW5lc0VzdCsrOwogICAgaWYgKGN1ci5pbmRleE9mKCdcbicpID49IDApIG51bUxpbmVzRXN0Kys7CiAgICByZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cdTAwMWJcW1xkXGQ/bS9nLCAnJykubGVuZ3RoICsgMTsKICB9LCAwKTsKCiAgaWYgKGxlbmd0aCA+IDYwKSB7CiAgICByZXR1cm4gYnJhY2VzWzBdICsKICAgICAgICAgICAoYmFzZSA9PT0gJycgPyAnJyA6IGJhc2UgKyAnXG4gJykgKwogICAgICAgICAgICcgJyArCiAgICAgICAgICAgb3V0cHV0LmpvaW4oJyxcbiAgJykgKwogICAgICAgICAgICcgJyArCiAgICAgICAgICAgYnJhY2VzWzFdOwogIH0KCiAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTsKfQoKCi8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYAovLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC4KZnVuY3Rpb24gaXNBcnJheShhcikgewogIHJldHVybiBBcnJheS5pc0FycmF5KGFyKTsKfQpleHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5OwoKZnVuY3Rpb24gaXNCb29sZWFuKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7Cn0KZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47CgpmdW5jdGlvbiBpc051bGwoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PT0gbnVsbDsKfQpleHBvcnRzLmlzTnVsbCA9IGlzTnVsbDsKCmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykgewogIHJldHVybiBhcmcgPT0gbnVsbDsKfQpleHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7CgpmdW5jdGlvbiBpc051bWJlcihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7Cn0KZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyOwoKZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnOwp9CmV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZzsKCmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJzsKfQpleHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7CgpmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHsKICByZXR1cm4gYXJnID09PSB2b2lkIDA7Cn0KZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkOwoKZnVuY3Rpb24gaXNSZWdFeHAocmUpIHsKICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7Cn0KZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwOwoKZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDsKfQpleHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7CgpmdW5jdGlvbiBpc0RhdGUoZCkgewogIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nOwp9CmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlOwoKZnVuY3Rpb24gaXNFcnJvcihlKSB7CiAgcmV0dXJuIGlzT2JqZWN0KGUpICYmCiAgICAgIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpOwp9CmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7CgpmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nOwp9CmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247CgpmdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHsKICByZXR1cm4gYXJnID09PSBudWxsIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbAogICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJzsKfQpleHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7CgpleHBvcnRzLmlzQnVmZmVyID0gcmVxdWlyZSgnLi9zdXBwb3J0L2lzQnVmZmVyJyk7CgpmdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7CiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTsKfQoKCmZ1bmN0aW9uIHBhZChuKSB7CiAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4udG9TdHJpbmcoMTApIDogbi50b1N0cmluZygxMCk7Cn0KCgp2YXIgbW9udGhzID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsCiAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107CgovLyAyNiBGZWIgMTY6MTk6MzQKZnVuY3Rpb24gdGltZXN0YW1wKCkgewogIHZhciBkID0gbmV3IERhdGUoKTsKICB2YXIgdGltZSA9IFtwYWQoZC5nZXRIb3VycygpKSwKICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLAogICAgICAgICAgICAgIHBhZChkLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTsKICByZXR1cm4gW2QuZ2V0RGF0ZSgpLCBtb250aHNbZC5nZXRNb250aCgpXSwgdGltZV0uam9pbignICcpOwp9CgoKLy8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcApleHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCkgewogIGNvbnNvbGUubG9nKCclcyAtICVzJywgdGltZXN0YW1wKCksIGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cykpOwp9OwoKCi8qKgogKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXIuCiAqCiAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmUKICogZnVuY3Rpb24gKG5vdCBvbiBGdW5jdGlvbi5wcm90b3R5cGUpLiBOT1RFOiBJZiB0aGlzIGZpbGUgaXMgdG8gYmUgbG9hZGVkCiAqIGR1cmluZyBib290c3RyYXBwaW5nIHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmV3cml0dGVuIHVzaW5nIHNvbWUgbmF0aXZlCiAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhcwogKiBleHBlY3RlZCBkdXJpbmcgYm9vdHN0cmFwcGluZyAoc2VlIG1pcnJvci5qcyBpbiByMTE0OTAzKS4KICoKICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZQogKiAgICAgcHJvdG90eXBlLgogKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdXBlckN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gaW5oZXJpdCBwcm90b3R5cGUgZnJvbS4KICovCmV4cG9ydHMuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwoKZXhwb3J0cy5fZXh0ZW5kID0gZnVuY3Rpb24ob3JpZ2luLCBhZGQpIHsKICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiBhZGQgaXNuJ3QgYW4gb2JqZWN0CiAgaWYgKCFhZGQgfHwgIWlzT2JqZWN0KGFkZCkpIHJldHVybiBvcmlnaW47CgogIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYWRkKTsKICB2YXIgaSA9IGtleXMubGVuZ3RoOwogIHdoaWxlIChpLS0pIHsKICAgIG9yaWdpbltrZXlzW2ldXSA9IGFkZFtrZXlzW2ldXTsKICB9CiAgcmV0dXJuIG9yaWdpbjsKfTsKCmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkgewogIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJyksdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7Ii4vc3VwcG9ydC9pc0J1ZmZlciI6MTc2LCJfcHJvY2VzcyI6MTQxLCJpbmhlcml0cyI6MTI5fV0sMTc4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGluZGV4T2YgPSByZXF1aXJlKCdpbmRleG9mJyk7Cgp2YXIgT2JqZWN0X2tleXMgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBpZiAoT2JqZWN0LmtleXMpIHJldHVybiBPYmplY3Qua2V5cyhvYmopCiAgICBlbHNlIHsKICAgICAgICB2YXIgcmVzID0gW107CiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgcmVzLnB1c2goa2V5KQogICAgICAgIHJldHVybiByZXM7CiAgICB9Cn07Cgp2YXIgZm9yRWFjaCA9IGZ1bmN0aW9uICh4cywgZm4pIHsKICAgIGlmICh4cy5mb3JFYWNoKSByZXR1cm4geHMuZm9yRWFjaChmbikKICAgIGVsc2UgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykgewogICAgICAgIGZuKHhzW2ldLCBpLCB4cyk7CiAgICB9Cn07Cgp2YXIgZGVmaW5lUHJvcCA9IChmdW5jdGlvbigpIHsKICAgIHRyeSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnXycsIHt9KTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBuYW1lLCB2YWx1ZSkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCB7CiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgICAgIH0pCiAgICAgICAgfTsKICAgIH0gY2F0Y2goZSkgewogICAgICAgIHJldHVybiBmdW5jdGlvbihvYmosIG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICAgIH07CiAgICB9Cn0oKSk7Cgp2YXIgZ2xvYmFscyA9IFsnQXJyYXknLCAnQm9vbGVhbicsICdEYXRlJywgJ0Vycm9yJywgJ0V2YWxFcnJvcicsICdGdW5jdGlvbicsCidJbmZpbml0eScsICdKU09OJywgJ01hdGgnLCAnTmFOJywgJ051bWJlcicsICdPYmplY3QnLCAnUmFuZ2VFcnJvcicsCidSZWZlcmVuY2VFcnJvcicsICdSZWdFeHAnLCAnU3RyaW5nJywgJ1N5bnRheEVycm9yJywgJ1R5cGVFcnJvcicsICdVUklFcnJvcicsCidkZWNvZGVVUkknLCAnZGVjb2RlVVJJQ29tcG9uZW50JywgJ2VuY29kZVVSSScsICdlbmNvZGVVUklDb21wb25lbnQnLCAnZXNjYXBlJywKJ2V2YWwnLCAnaXNGaW5pdGUnLCAnaXNOYU4nLCAncGFyc2VGbG9hdCcsICdwYXJzZUludCcsICd1bmRlZmluZWQnLCAndW5lc2NhcGUnXTsKCmZ1bmN0aW9uIENvbnRleHQoKSB7fQpDb250ZXh0LnByb3RvdHlwZSA9IHt9OwoKdmFyIFNjcmlwdCA9IGV4cG9ydHMuU2NyaXB0ID0gZnVuY3Rpb24gTm9kZVNjcmlwdCAoY29kZSkgewogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNjcmlwdCkpIHJldHVybiBuZXcgU2NyaXB0KGNvZGUpOwogICAgdGhpcy5jb2RlID0gY29kZTsKfTsKClNjcmlwdC5wcm90b3R5cGUucnVuSW5Db250ZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHsKICAgIGlmICghKGNvbnRleHQgaW5zdGFuY2VvZiBDb250ZXh0KSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIm5lZWRzIGEgJ2NvbnRleHQnIGFyZ3VtZW50LiIpOwogICAgfQogICAgCiAgICB2YXIgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7CiAgICBpZiAoIWlmcmFtZS5zdHlsZSkgaWZyYW1lLnN0eWxlID0ge307CiAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIAogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpOwogICAgCiAgICB2YXIgd2luID0gaWZyYW1lLmNvbnRlbnRXaW5kb3c7CiAgICB2YXIgd0V2YWwgPSB3aW4uZXZhbCwgd0V4ZWNTY3JpcHQgPSB3aW4uZXhlY1NjcmlwdDsKCiAgICBpZiAoIXdFdmFsICYmIHdFeGVjU2NyaXB0KSB7CiAgICAgICAgLy8gd2luLmV2YWwoKSBtYWdpY2FsbHkgYXBwZWFycyB3aGVuIHRoaXMgaXMgY2FsbGVkIGluIElFOgogICAgICAgIHdFeGVjU2NyaXB0LmNhbGwod2luLCAnbnVsbCcpOwogICAgICAgIHdFdmFsID0gd2luLmV2YWw7CiAgICB9CiAgICAKICAgIGZvckVhY2goT2JqZWN0X2tleXMoY29udGV4dCksIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB3aW5ba2V5XSA9IGNvbnRleHRba2V5XTsKICAgIH0pOwogICAgZm9yRWFjaChnbG9iYWxzLCBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKGNvbnRleHRba2V5XSkgewogICAgICAgICAgICB3aW5ba2V5XSA9IGNvbnRleHRba2V5XTsKICAgICAgICB9CiAgICB9KTsKICAgIAogICAgdmFyIHdpbktleXMgPSBPYmplY3Rfa2V5cyh3aW4pOwoKICAgIHZhciByZXMgPSB3RXZhbC5jYWxsKHdpbiwgdGhpcy5jb2RlKTsKICAgIAogICAgZm9yRWFjaChPYmplY3Rfa2V5cyh3aW4pLCBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgLy8gQXZvaWQgY29weWluZyBjaXJjdWxhciBvYmplY3RzIGxpa2UgYHRvcGAgYW5kIGB3aW5kb3dgIGJ5IG9ubHkKICAgICAgICAvLyB1cGRhdGluZyBleGlzdGluZyBjb250ZXh0IHByb3BlcnRpZXMgb3IgbmV3IHByb3BlcnRpZXMgaW4gdGhlIGB3aW5gCiAgICAgICAgLy8gdGhhdCB3YXMgb25seSBpbnRyb2R1Y2VkIGFmdGVyIHRoZSBldmFsLgogICAgICAgIGlmIChrZXkgaW4gY29udGV4dCB8fCBpbmRleE9mKHdpbktleXMsIGtleSkgPT09IC0xKSB7CiAgICAgICAgICAgIGNvbnRleHRba2V5XSA9IHdpbltrZXldOwogICAgICAgIH0KICAgIH0pOwoKICAgIGZvckVhY2goZ2xvYmFscywgZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmICghKGtleSBpbiBjb250ZXh0KSkgewogICAgICAgICAgICBkZWZpbmVQcm9wKGNvbnRleHQsIGtleSwgd2luW2tleV0pOwogICAgICAgIH0KICAgIH0pOwogICAgCiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7CiAgICAKICAgIHJldHVybiByZXM7Cn07CgpTY3JpcHQucHJvdG90eXBlLnJ1bkluVGhpc0NvbnRleHQgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gZXZhbCh0aGlzLmNvZGUpOyAvLyBtYXliZS4uLgp9OwoKU2NyaXB0LnByb3RvdHlwZS5ydW5Jbk5ld0NvbnRleHQgPSBmdW5jdGlvbiAoY29udGV4dCkgewogICAgdmFyIGN0eCA9IFNjcmlwdC5jcmVhdGVDb250ZXh0KGNvbnRleHQpOwogICAgdmFyIHJlcyA9IHRoaXMucnVuSW5Db250ZXh0KGN0eCk7CgogICAgZm9yRWFjaChPYmplY3Rfa2V5cyhjdHgpLCBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgY29udGV4dFtrZXldID0gY3R4W2tleV07CiAgICB9KTsKCiAgICByZXR1cm4gcmVzOwp9OwoKZm9yRWFjaChPYmplY3Rfa2V5cyhTY3JpcHQucHJvdG90eXBlKSwgZnVuY3Rpb24gKG5hbWUpIHsKICAgIGV4cG9ydHNbbmFtZV0gPSBTY3JpcHRbbmFtZV0gPSBmdW5jdGlvbiAoY29kZSkgewogICAgICAgIHZhciBzID0gU2NyaXB0KGNvZGUpOwogICAgICAgIHJldHVybiBzW25hbWVdLmFwcGx5KHMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7CiAgICB9Owp9KTsKCmV4cG9ydHMuY3JlYXRlU2NyaXB0ID0gZnVuY3Rpb24gKGNvZGUpIHsKICAgIHJldHVybiBleHBvcnRzLlNjcmlwdChjb2RlKTsKfTsKCmV4cG9ydHMuY3JlYXRlQ29udGV4dCA9IFNjcmlwdC5jcmVhdGVDb250ZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHsKICAgIHZhciBjb3B5ID0gbmV3IENvbnRleHQoKTsKICAgIGlmKHR5cGVvZiBjb250ZXh0ID09PSAnb2JqZWN0JykgewogICAgICAgIGZvckVhY2goT2JqZWN0X2tleXMoY29udGV4dCksIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgICAgY29weVtrZXldID0gY29udGV4dFtrZXldOwogICAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIGNvcHk7Cn07Cgp9LHsiaW5kZXhvZiI6MTI4fV0sMTc5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYnM1OGNoZWNrID0gcmVxdWlyZSgnYnM1OGNoZWNrJykKCmZ1bmN0aW9uIGRlY29kZVJhdyAodmVyc2lvbiwgYnVmZmVyKSB7CiAgaWYgKGJ1ZmZlclswXSAhPT0gdmVyc2lvbikgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG5ldHdvcmsgdmVyc2lvbicpCgogIC8vIGNvbXByZXNzaW9uIGZsYWc/CiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDM0KSB7CiAgICBpZiAoYnVmZmVyWzMzXSAhPT0gMHgwMSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbXByZXNzaW9uIGZsYWcnKQoKICAgIC8vIHRydW5jYXRlIHRoZSB2ZXJzaW9uIGJ5dGUvY29tcHJlc3Npb24gZmxhZwogICAgcmV0dXJuIHsKICAgICAgdmVyc2lvbjogYnVmZmVyWzBdLAogICAgICBkOiBidWZmZXIuc2xpY2UoMSwgLTEpLAogICAgICBjb21wcmVzc2VkOiB0cnVlCiAgICB9CiAgfQoKICAvLyBubyBjb21wcmVzc2lvbiBmbGFnCiAgaWYgKGJ1ZmZlci5sZW5ndGggIT09IDMzKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgV0lGIGxlbmd0aCcpCgogIHJldHVybiB7CiAgICB2ZXJzaW9uOiBidWZmZXJbMF0sCiAgICBkOiBidWZmZXIuc2xpY2UoMSksCiAgICBjb21wcmVzc2VkOiBmYWxzZQogIH0KfQoKZnVuY3Rpb24gZGVjb2RlICh2ZXJzaW9uLCBzdHJpbmcpIHsKICByZXR1cm4gZGVjb2RlUmF3KHZlcnNpb24sIGJzNThjaGVjay5kZWNvZGUoc3RyaW5nKSkKfQoKZnVuY3Rpb24gZW5jb2RlUmF3ICh2ZXJzaW9uLCBkLCBjb21wcmVzc2VkKSB7CiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIoY29tcHJlc3NlZCA/IDM0IDogMzMpCgogIGJ1ZmZlci53cml0ZVVJbnQ4KHZlcnNpb24sIDApCiAgZC5jb3B5KGJ1ZmZlciwgMSkKCiAgaWYgKGNvbXByZXNzZWQpIHsKICAgIGJ1ZmZlclszM10gPSAweDAxCiAgfQoKICByZXR1cm4gYnVmZmVyCn0KCmZ1bmN0aW9uIGVuY29kZSAodmVyc2lvbiwgZCwgY29tcHJlc3NlZCkgewogIHJldHVybiBiczU4Y2hlY2suZW5jb2RlKGVuY29kZVJhdyh2ZXJzaW9uLCBkLCBjb21wcmVzc2VkKSkKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgZGVjb2RlOiBkZWNvZGUsCiAgZGVjb2RlUmF3OiBkZWNvZGVSYXcsCiAgZW5jb2RlOiBlbmNvZGUsCiAgZW5jb2RlUmF3OiBlbmNvZGVSYXcKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJzNThjaGVjayI6NzEsImJ1ZmZlciI6NzZ9XSwxODA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiogQGF1dGhvciBtaWNhZWxwZWRyb3NhQGdtYWlsLmNvbQoqIE1pbmltYWwgaW50ZXJmYWNlIGFuZCBpbXBsZW1lbnRhdGlvbiB0byBzZW5kIGFuZCByZWNlaXZlIG1lc3NhZ2VzLiBJdCBjYW4gYmUgcmV1c2VkIGluIG1hbnkgdHlwZSBvZiBjb21wb25lbnRzLgoqIENvbXBvbmVudHMgdGhhdCBuZWVkIGEgbWVzc2FnZSBzeXN0ZW0gc2hvdWxkIHJlY2VpdmUgdGhpcyBjbGFzcyBhcyBhIGRlcGVuZGVuY3kgb3IgZXh0ZW5kIGl0LgoqIEV4dGVuc2lvbnMgc2hvdWxkIGltcGxlbWVudCB0aGUgZm9sbG93aW5nIHByaXZhdGUgbWV0aG9kczogX29uUG9zdE1lc3NhZ2UgYW5kIF9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXIKKi8KCnZhciBCdXMgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogIF9tc2dJZDogbnVtYmVyOwogIF9zdWJzY3JpcHRpb25zOiA8dXJsOiBNc2dMaXN0ZW5lcltdPgogICBfcmVzcG9uc2VUaW1lT3V0OiBudW1iZXIKICBfcmVzcG9uc2VDYWxsYmFja3M6IDx1cmwraWQ6IChtc2cpID0+IHZvaWQ+CiAgICovCgogIGZ1bmN0aW9uIEJ1cygpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCdXMpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBfdGhpcy5fbXNnSWQgPSAwOwogICAgX3RoaXMuX3N1YnNjcmlwdGlvbnMgPSB7fTsKCiAgICBfdGhpcy5fcmVzcG9uc2VUaW1lT3V0ID0gNTAwMDsgLy9kZWZhdWx0IHRvIDNzCiAgICBfdGhpcy5fcmVzcG9uc2VDYWxsYmFja3MgPSB7fTsKCiAgICBfdGhpcy5fcmVnaXN0ZXJFeHRlcm5hbExpc3RlbmVyKCk7CiAgfQoKICAvKioKICAqIFJlZ2lzdGVyIGxpc3RlbmVyIHRvIHJlY2VpdmUgbWVzc2FnZSB3aGVuICJtc2cudG8gPT09IHVybCIuCiAgKiBTcGVjaWFsIHVybCAiKiIgZm9yIGRlZmF1bHQgbGlzdGVuZXIgaXMgYWNjZXB0ZWQgdG8gaW50ZXJjZXB0IGFsbCBtZXNzYWdlcy4KICAqIEBwYXJhbSB7VVJMfSB1cmwgQWRkcmVzcyB0byBpbnRlcmNlcHQsIHRoYSBpcyBpbiB0aGUgbWVzc2FnZSAidG8iCiAgKiBAcGFyYW0ge0xpc3RlbmVyfSBsaXN0ZW5lciBsaXN0ZW5lcgogICogQHJldHVybiB7TXNnTGlzdGVuZXJ9IGluc3RhbmNlIG9mIE1zZ0xpc3RlbmVyCiAgKi8KCgogIF9jcmVhdGVDbGFzcyhCdXMsIFt7CiAgICBrZXk6ICdhZGRMaXN0ZW5lcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkTGlzdGVuZXIodXJsLCBsaXN0ZW5lcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGl0ZW0gPSBuZXcgTXNnTGlzdGVuZXIoX3RoaXMuX3N1YnNjcmlwdGlvbnMsIHVybCwgbGlzdGVuZXIpOwogICAgICB2YXIgaXRlbUxpc3QgPSBfdGhpcy5fc3Vic2NyaXB0aW9uc1t1cmxdOwogICAgICBpZiAoIWl0ZW1MaXN0KSB7CiAgICAgICAgaXRlbUxpc3QgPSBbXTsKICAgICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uc1t1cmxdID0gaXRlbUxpc3Q7CiAgICAgIH0KCiAgICAgIGl0ZW1MaXN0LnB1c2goaXRlbSk7CiAgICAgIHJldHVybiBpdGVtOwogICAgfQoKICAgIC8qKgogICAgICogTWFudWFsbHkgYWRkIGEgcmVzcG9uc2UgbGlzdGVuZXIuIE9ubHkgb25lIGxpc3RlbmVyIHBlciBtZXNzYWdlIElEIHNob3VsZCBleGlzdC4KICAgICAqIEFURU5USU9OLCB0aGVyZSBpcyBubyB0aW1lb3V0IGZvciB0aGlzIGxpc3RlbmVyLgogICAgICogVGhlIGxpc3RlbmVyIHNob3VsZCBiZSByZW1vdmVkIHdpdGggYSByZW1vdmVSZXNwb25zZUxpc3RlbmVyLCBmYWlsaW5nIHRvIGRvIHRoaXMgd2lsbCByZXN1bHQgaW4gYSB1bnJlbGVhc2VkIG1lbW9yeSBwcm9ibGVtLgogICAgICogQHBhcmFtIHtVUkx9IHVybCBPcmlnaW4gYWRkcmVzcyBvZiB0aGUgbWVzc2FnZSBzZW50LCAibXNnLmZyb20iLgogICAgICogQHBhcmFtIHtudW1iZXJ9IG1zZ0lkIE1lc3NhZ2UgSUQgdGhhdCBpcyByZXR1cm5lZCBmcm9tIHRoZSBwb3N0TWVzc2FnZS4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc3BvbnNlTGlzdGVuZXIgQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIHRoZSByZXNwb25zZQogICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZFJlc3BvbnNlTGlzdGVuZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFJlc3BvbnNlTGlzdGVuZXIodXJsLCBtc2dJZCwgcmVzcG9uc2VMaXN0ZW5lcikgewogICAgICB0aGlzLl9yZXNwb25zZUNhbGxiYWNrc1t1cmwgKyBtc2dJZF0gPSByZXNwb25zZUxpc3RlbmVyOwogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSByZXNwb25zZSBsaXN0ZW5lci4KICAgICAqIEBwYXJhbSB7VVJMfSB1cmwgT3JpZ2luIGFkZHJlc3Mgb2YgdGhlIG1lc3NhZ2Ugc2VudCwgIm1zZy5mcm9tIi4KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtc2dJZCAgTWVzc2FnZSBJRCB0aGF0IGlzIHJldHVybmVkIGZyb20gdGhlIHBvc3RNZXNzYWdlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcih1cmwsIG1zZ0lkKSB7CiAgICAgIGRlbGV0ZSB0aGlzLl9yZXNwb25zZUNhbGxiYWNrc1t1cmwgKyBtc2dJZF07CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgYWxsIGV4aXN0ZW50IGxpc3RlbmVycyBmb3IgdGhlIFVSTAogICAgICogQHBhcmFtICB7VVJMfSB1cmwgQWRkcmVzcyByZWdpc3RlcmVkCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncmVtb3ZlQWxsTGlzdGVuZXJzT2YnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVyc09mKHVybCkgewogICAgICBkZWxldGUgdGhpcy5fc3Vic2NyaXB0aW9uc1t1cmxdOwogICAgfQoKICAgIC8qKgogICAgICogSGVscGVyIG1ldGhvZCB0byBiaW5kIGxpc3RlbmVycyAoaW4gYm90aCBkaXJlY3Rpb25zKSBpbnRvIG90aGVyIE1pbmlCdXMgdGFyZ2V0LgogICAgICogQHBhcmFtICB7VVJMfSBvdXRVcmwgT3V0Ym91bmQgVVJMLCByZWdpc3RlciBsaXN0ZW5lciBmb3IgdXJsIGluIGRpcmVjdGlvbiAidGhpcyAtPiB0YXJnZXQiCiAgICAgKiBAcGFyYW0gIHtVUkx9IGluVXJsIEluYm91bmQgVVJMLCByZWdpc3RlciBsaXN0ZW5lciBmb3IgdXJsIGluIGRpcmVjdGlvbiAidGFyZ2V0IC0+IHRoaXMiCiAgICAgKiBAcGFyYW0gIHtNaW5pQnVzfSB0YXJnZXQgVGhlIG90aGVyIHRhcmdldCBNaW5pQnVzCiAgICAgKiBAcmV0dXJuIHtCb3VuZH0gYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHByb3BlcnRpZXMgW3RoaXNMaXN0ZW5lciwgdGFyZ2V0TGlzdGVuZXJdIGFuZCB0aGUgdW5iaW5kIG1ldGhvZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdiaW5kJywKICAgIHZhbHVlOiBmdW5jdGlvbiBiaW5kKG91dFVybCwgaW5VcmwsIHRhcmdldCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdGhpc0xpc3RuID0gX3RoaXMuYWRkTGlzdGVuZXIob3V0VXJsLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgdGFyZ2V0LnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgIH0pOwoKICAgICAgdmFyIHRhcmdldExpc3RuID0gdGFyZ2V0LmFkZExpc3RlbmVyKGluVXJsLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgX3RoaXMucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgfSk7CgogICAgICByZXR1cm4gewogICAgICAgIHRoaXNMaXN0ZW5lcjogdGhpc0xpc3RuLAogICAgICAgIHRhcmdldExpc3RlbmVyOiB0YXJnZXRMaXN0biwKICAgICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHsKICAgICAgICAgIF90aGlzMi50aGlzTGlzdGVuZXIucmVtb3ZlKCk7CiAgICAgICAgICBfdGhpczIudGFyZ2V0TGlzdGVuZXIucmVtb3ZlKCk7CiAgICAgICAgfQogICAgICB9OwogICAgfQoKICAgIC8vcHVibGlzaCBvbiBkZWZhdWx0IGxpc3RlbmVycwoKICB9LCB7CiAgICBrZXk6ICdfcHVibGlzaE9uRGVmYXVsdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3B1Ymxpc2hPbkRlZmF1bHQobXNnKSB7CiAgICAgIC8vaXMgdGhlcmUgYW55ICIqIiAoZGVmYXVsdCkgbGlzdGVuZXJzPwogICAgICB2YXIgaXRlbUxpc3QgPSB0aGlzLl9zdWJzY3JpcHRpb25zWycqJ107CiAgICAgIGlmIChpdGVtTGlzdCkgewogICAgICAgIHRoaXMuX3B1Ymxpc2hPbihpdGVtTGlzdCwgbXNnKTsKICAgICAgfQogICAgfQoKICAgIC8vcHVibGlzaCBvbiBhIHN1YnNjcmlwdGlvbiBsaXN0LgoKICB9LCB7CiAgICBrZXk6ICdfcHVibGlzaE9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcHVibGlzaE9uKGl0ZW1MaXN0LCBtc2cpIHsKICAgICAgaXRlbUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7CiAgICAgICAgc3ViLl9jYWxsYmFjayhtc2cpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfcmVzcG9uc2VDYWxsYmFjaycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3Jlc3BvbnNlQ2FsbGJhY2soaW5Nc2csIHJlc3BvbnNlQ2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vYXV0b21hdGljIG1hbmFnZW1lbnQgb2YgcmVzcG9uc2UgaGFuZGxlcnMKICAgICAgaWYgKHJlc3BvbnNlQ2FsbGJhY2spIHsKICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHJlc3BvbnNlSWQgPSBpbk1zZy5mcm9tICsgaW5Nc2cuaWQ7CiAgICAgICAgICBfdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbcmVzcG9uc2VJZF0gPSByZXNwb25zZUNhbGxiYWNrOwoKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcmVzcG9uc2VGdW4gPSBfdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbcmVzcG9uc2VJZF07CiAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbcmVzcG9uc2VJZF07CgogICAgICAgICAgICBpZiAocmVzcG9uc2VGdW4pIHsKICAgICAgICAgICAgICB2YXIgZXJyb3JNc2cgPSB7CiAgICAgICAgICAgICAgICBpZDogaW5Nc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsCiAgICAgICAgICAgICAgICBib2R5OiB7IGNvZGU6IDQwOCwgZGVzYzogJ1Jlc3BvbnNlIHRpbWVvdXQhJywgdmFsdWU6IGluTXNnIH0KICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICByZXNwb25zZUZ1bihlcnJvck1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF90aGlzLl9yZXNwb25zZVRpbWVPdXQpOwogICAgICAgIH0pKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25SZXNwb25zZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVzcG9uc2UobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAobXNnLnR5cGUgPT09ICdyZXNwb25zZScpIHsKICAgICAgICB2YXIgcmVzcG9uc2VJZCA9IG1zZy50byArIG1zZy5pZDsKICAgICAgICB2YXIgcmVzcG9uc2VGdW4gPSBfdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbcmVzcG9uc2VJZF07CgogICAgICAgIC8vaWYgaXQncyBhIHByb3Zpc2lvbmFsIHJlc3BvbnNlLCBkb24ndCBkZWxldGUgcmVzcG9uc2UgbGlzdGVuZXIKICAgICAgICBpZiAobXNnLmJvZHkuY29kZSA+PSAyMDApIHsKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbcmVzcG9uc2VJZF07CiAgICAgICAgfQoKICAgICAgICBpZiAocmVzcG9uc2VGdW4pIHsKICAgICAgICAgIHJlc3BvbnNlRnVuKG1zZyk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvL3JlY2VpdmUgbWVzc2FnZXMgZnJvbSBleHRlcm5hbCBpbnRlcmZhY2UKCiAgfSwgewogICAga2V5OiAnX29uTWVzc2FnZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uTWVzc2FnZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghX3RoaXMuX29uUmVzcG9uc2UobXNnKSkgewogICAgICAgIHZhciBpdGVtTGlzdCA9IF90aGlzLl9zdWJzY3JpcHRpb25zW21zZy50b107CiAgICAgICAgaWYgKGl0ZW1MaXN0KSB7CiAgICAgICAgICBfdGhpcy5fcHVibGlzaE9uKGl0ZW1MaXN0LCBtc2cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5fcHVibGlzaE9uRGVmYXVsdChtc2cpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19nZW5JZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2dlbklkKGluTXNnKSB7CiAgICAgIC8vVE9ETzogaG93IGRvIHdlIG1hbmFnZSBtZXNzYWdlIElEJ3M/IFNob3VsZCBpdCBiZSBhIGdsb2JhbCBydW50aW1lIGNvdW50ZXIsIG9yIHBlciBVUkwgYWRkcmVzcz8KICAgICAgLy9HbG9iYWwgY291bnRlciB3aWxsIG5vdCB3b3JrLCBiZWNhdXNlIHRoZXJlIHdpbGwgYmUgbXVsdGlwbGUgTWluaUJ1cyBpbnN0YW5jZXMhCiAgICAgIC8vUGVyIFVSTCwgY2FuIGJlIGEgbG90IG9mIGRhdGEgdG8gbWFpbnRhaW4hCiAgICAgIC8vTWF5YmUgYSBjb3VudGVyIHBlciBNaW5pQnVzIGluc3RhbmNlLiBUaGlzIGlzIHRoZSBhc3N1bWVkIHNvbHV0aW9uIGZvciBub3cuCiAgICAgIGlmICghaW5Nc2cuaWQgfHwgaW5Nc2cuaWQgPT09IDApIHsKICAgICAgICB0aGlzLl9tc2dJZCsrOwogICAgICAgIGluTXNnLmlkID0gdGhpcy5fbXNnSWQ7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogU2VuZCBtZXNzYWdlcyB0byBsb2NhbCBsaXN0ZW5lcnMsIG9yIGlmIG5vdCBleGlzdHMgdG8gZXh0ZXJuYWwgbGlzdGVuZXJzLgogICAgKiBJdCdzIGhhcyBhbiBvcHRpb25hbCBtZWNoYW5pc20gZm9yIGF1dG9tYXRpYyBtYW5hZ2VtZW50IG9mIHJlc3BvbnNlIGhhbmRsZXJzLgogICAgKiBUaGUgcmVzcG9uc2UgaGFuZGxlciB3aWxsIGJlIHVucmVnaXN0ZXJlZCBhZnRlciByZWNlaXZpbmcgdGhlIHJlc3BvbnNlLCBvciBhZnRlciByZXNwb25zZSB0aW1lb3V0IChkZWZhdWx0IHRvIDNzKS4KICAgICogQHBhcmFtICB7TWVzc2FnZX0gbXNnIE1lc3NhZ2UgdG8gc2VuZC4gTWVzc2FnZSBJRCBpcyBhdXRvbWF0aWNhbGx5IGFkZGVkIHRvIHRoZSBtZXNzYWdlLgogICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gcmVzcG9uc2VDYWxsYmFjayBPcHRpb25hbCBwYXJhbWV0ZXIsIGlmIHRoZSBkZXZlbG9wZXIgd2hhdCdzIGF1dG9tYXRpYyByZXNwb25zZSBtYW5hZ2VtZW50LgogICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJldHVybnMgdGhlIG1lc3NhZ2UgSUQsIGluIGNhc2UgaXQgc2hvdWxkIGJlIG5lZWRlZCBmb3IgbWFudWFsIG1hbmFnZW1lbnQgb2YgdGhlIHJlc3BvbnNlIGhhbmRsZXIuCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdwb3N0TWVzc2FnZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcG9zdE1lc3NhZ2UoaW5Nc2csIHJlc3BvbnNlQ2FsbGJhY2spIHt9CgogICAgLyoqCiAgICAgKiBOb3QgcHVibGljIGF2YWlsYWJsZSwgdXNlZCBieSB0aGUgY2xhc3MgZXh0ZW5zaW9uIGltcGxlbWVudGF0aW9uLCB0byBwcm9jZXNzIG1lc3NhZ2VzIGZyb20gdGhlIHB1YmxpYyAicG9zdE1lc3NhZ2UiIHdpdGhvdXQgYSByZWdpc3RlcmVkIGxpc3RlbmVyLgogICAgICogVXNlZCB0byBzZW5kIHRoZSBtZXNzYWdlIHRvIGFuIGV4dGVybmFsIGludGVyZmFjZSwgbGlrZSBhIFdlYldvcmtlciwgSUZyYW1lLCBldGMuCiAgICAgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9IG1zZyBNZXNzYWdlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnX29uUG9zdE1lc3NhZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblBvc3RNZXNzYWdlKG1zZykge30gLyppbXBsZW1lbnRhdGlvbiB3aWxsIHNlbmQgbWVzc2FnZSB0byBleHRlcm5hbCBzeXN0ZW0qLwoKICAgIC8qKgogICAgICogTm90IHB1YmxpYyBhdmFpbGFibGUsIHVzZWQgYnkgdGhlIGNsYXNzIGV4dGVuc2lvbiBpbXBsZW1lbnRhdGlvbiwgdG8gcHJvY2VzcyBhbGwgbWVzc2FnZXMgdGhhdCBlbnRlciB0aGUgTWluaUJ1cyBmcm9tIGFuIGV4dGVybmFsIGludGVyZmFjZSwgbGlrZSBhIFdlYldvcmtlciwgSUZyYW1lLCBldGMuCiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgb25lIHRpbWUgaW4gdGhlIGNvbnN0cnVjdG9yIHRvIHJlZ2lzdGVyIGV4dGVybmFsIGxpc3RlbmVycy4KICAgICAqIFRoZSBpbXBsZW1lbnRhdGlvbiB3aWxsIHByb2JhYmx5IGNhbGwgdGhlICJfb25NZXNzYWdlIiBtZXRob2QgdG8gcHVibGlzaCBpbiB0aGUgbG9jYWwgbGlzdGVuZXJzLgogICAgICogRE8gTk9UIGNhbGwgInBvc3RNZXNzYWdlIiwgdGhlcmUgaXMgYSBkYW5nZXIgdGhhdCB0aGUgbWVzc2FnZSBlbnRlcnMgaW4gYSBjeWNsZSEKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfcmVnaXN0ZXJFeHRlcm5hbExpc3RlbmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVnaXN0ZXJFeHRlcm5hbExpc3RlbmVyKCkgey8qaW1wbGVtZW50YXRpb24gd2lsbCByZWdpc3RlciBleHRlcm5hbCBsaXN0ZW5lciBhbmQgY2FsbCAidGhpcy5fb25NZXNzYWdlKG1zZykiICovfQogIH1dKTsKCiAgcmV0dXJuIEJ1czsKfSgpOwoKdmFyIE1zZ0xpc3RlbmVyID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICBfc3Vic2NyaXB0aW9uczogPHN0cmluZzogTXNnTGlzdGVuZXJbXT47CiAgX3VybDogc3RyaW5nOwogIF9jYWxsYmFjazogKG1zZykgPT4gdm9pZDsKICAqLwoKICBmdW5jdGlvbiBNc2dMaXN0ZW5lcihzdWJzY3JpcHRpb25zLCB1cmwsIGNhbGxiYWNrKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTXNnTGlzdGVuZXIpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX3N1YnNjcmlwdGlvbnMgPSBzdWJzY3JpcHRpb25zOwogICAgX3RoaXMuX3VybCA9IHVybDsKICAgIF90aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrOwogIH0KCiAgX2NyZWF0ZUNsYXNzKE1zZ0xpc3RlbmVyLCBbewogICAga2V5OiAncmVtb3ZlJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgc3VicyA9IF90aGlzLl9zdWJzY3JpcHRpb25zW190aGlzLl91cmxdOwogICAgICBpZiAoc3VicykgewogICAgICAgIHZhciBpbmRleCA9IHN1YnMuaW5kZXhPZihfdGhpcyk7CiAgICAgICAgc3Vicy5zcGxpY2UoaW5kZXgsIDEpOwoKICAgICAgICAvL2lmIHRoZXJlIGFyZSBubyBsaXN0ZW5lcnMsIHJlbW92ZSB0aGUgc3Vic2NyaXB0aW9uIGVudGlyZWx5LgogICAgICAgIGlmIChzdWJzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgZGVsZXRlIF90aGlzLl9zdWJzY3JpcHRpb25zW190aGlzLl91cmxdOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ3VybCcsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3VybDsKICAgIH0KICB9XSk7CgogIHJldHVybiBNc2dMaXN0ZW5lcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gQnVzOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDE4MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKdmFyIF9CdXMyID0gcmVxdWlyZSgnLi9CdXMnKTsKCnZhciBfQnVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0J1czIpOwoKdmFyIF9QaXBlbGluZSA9IHJlcXVpcmUoJy4vUGlwZWxpbmUnKTsKCnZhciBfUGlwZWxpbmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGlwZWxpbmUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfQoKLyoqCiogTWVzc2FnZSBCVVMgSW50ZXJmYWNlIGlzIGFuIGV4dGVuc2lvbiBvZiB0aGUgTWluaUJ1cwoqIEl0IGRvZXNuJ3Qgc3VwcG9ydCB0aGUgZGVmYXVsdCAnKicgbGlzdGVuZXIsIGluc3RlYWQgaXQgdXNlcyB0aGUgcmVnaXN0cnkucmVzb2x2ZSguLikKKi8KCnZhciBNZXNzYWdlQnVzID0gZnVuY3Rpb24gKF9CdXMpIHsKICBfaW5oZXJpdHMoTWVzc2FnZUJ1cywgX0J1cyk7CgogIC8qIHByaXZhdGUKICBfcmVnaXN0cnk6IFJlZ2lzdHJ5CiAgX2ZvcndhcmRzOiB7IDxmcm9tLXVybD46IHsgZmw6IE1zZ0xpc3RlbmVyLCBzYW5kYm94VG9VcmxzOiBNYXAoU2FuZGJveCwgW3RvLXVybF0pLCB1cmxUb1NhbmRib3g6IHsgdG8tdXJsOiBTYW5kYm94IH0gfSB9CiAgIF9waXBlbGluZTogUGlwZWxpbmUKICAqLwoKICAvL1RPRE86IGZ1dHVyZSBvcHRpbWl6YXRpb24KICAvLzEuIG1lc3NhZ2UgYmF0Y2ggcHJvY2Vzc2luZyB3aXRoIHNldEludGVydmFsCiAgLy8yLiByZXNvbHZlIGRlZmF1bHQgZ2F0ZXdheS9wcm90b3N0dWIgd2l0aCByZWdpc3Rlci5yZXNvbHZlCgogIGZ1bmN0aW9uIE1lc3NhZ2VCdXMocmVnaXN0cnkpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNZXNzYWdlQnVzKTsKCiAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1lc3NhZ2VCdXMpLmNhbGwodGhpcykpOwoKICAgIF90aGlzMi5fcmVnaXN0cnkgPSByZWdpc3RyeTsKICAgIF90aGlzMi5fZm9yd2FyZHMgPSB7fTsKCiAgICBfdGhpczIuX3BpcGVsaW5lID0gbmV3IF9QaXBlbGluZTIuZGVmYXVsdChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coJ1BJUEVMSU5FLUVSUk9SOiAnLCBKU09OLnN0cmluZ2lmeShlcnJvcikpOwogICAgfSk7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgX2NyZWF0ZUNsYXNzKE1lc3NhZ2VCdXMsIFt7CiAgICBrZXk6ICdwb3N0TWVzc2FnZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcG9zdE1lc3NhZ2UoaW5Nc2csIHJlc3BvbnNlQ2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9nZW5JZChpbk1zZyk7CgogICAgICBfdGhpcy5fcGlwZWxpbmUucHJvY2Vzcyhpbk1zZywgZnVuY3Rpb24gKG1zZykgewoKICAgICAgICBfdGhpcy5fcmVzcG9uc2VDYWxsYmFjayhpbk1zZywgcmVzcG9uc2VDYWxsYmFjayk7CgogICAgICAgIGlmICghX3RoaXMuX29uUmVzcG9uc2UobXNnKSkgewogICAgICAgICAgdmFyIGl0ZW1MaXN0ID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbbXNnLnRvXTsKICAgICAgICAgIGlmIChpdGVtTGlzdCkgewogICAgICAgICAgICAvL2RvIG5vdCBwdWJsaXNoIG9uIGRlZmF1bHQgYWRkcmVzcywgYmVjYXVzZSBvZiBsb29wYmFjayBjeWNsZQogICAgICAgICAgICBfdGhpcy5fcHVibGlzaE9uKGl0ZW1MaXN0LCBtc2cpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy9pZiB0aGVyZSBpcyBubyBsaXN0ZW5lciwgc2VuZCB0byBleHRlcm5hbCBpbnRlcmZhY2UKICAgICAgICAgICAgX3RoaXMuX29uUG9zdE1lc3NhZ2UobXNnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIGluTXNnLmlkOwogICAgfQogIH0sIHsKICAgIGtleTogJ2FkZEZvcndhcmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEZvcndhcmQoZnJvbSwgdG8pIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy92ZXJpZnkgaWYgZm9yd2FyZCBleGlzdAogICAgICB2YXIgY29uZiA9IF90aGlzLl9mb3J3YXJkc1tmcm9tXTsKICAgICAgaWYgKCFjb25mKSB7CiAgICAgICAgdmFyIGZvcndhcmRMaXN0ZW5lciA9IF90aGlzLmFkZExpc3RlbmVyKGZyb20sIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgIGNvbmYuc2FuZGJveFRvVXJscy5mb3JFYWNoKGZ1bmN0aW9uICh1cmxzLCBzYW5kYm94KSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNQi1GT1JXQVJEOiAoICcgKyBmcm9tICsgJyB0byAnICsgdXJscy5zaXplICsgJyBkZXN0aW5hdGlvbnMpJyk7CiAgICAgICAgICAgIHVybHMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU0VORC1UTzogJywgdmFsdWUpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHNhbmRib3gucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICBjb25mID0gewogICAgICAgICAgZnJvbTogZnJvbSwKICAgICAgICAgIGZsOiBmb3J3YXJkTGlzdGVuZXIsCiAgICAgICAgICBzYW5kYm94VG9VcmxzOiBuZXcgTWFwKCksCiAgICAgICAgICB1cmxUb1NhbmRib3g6IG5ldyBNYXAoKSwKCiAgICAgICAgICAvL3JlbW92ZSBmb3J3YXJkIGRldGluYXRpb24KICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKHVybCkgewogICAgICAgICAgICB2YXIgc2FuZGJveCA9IF90aGlzMy51cmxUb1NhbmRib3guZ2V0KHVybCk7CiAgICAgICAgICAgIGlmIChzYW5kYm94KSB7CiAgICAgICAgICAgICAgX3RoaXMzLnVybFRvU2FuZGJveC5kZWxldGUodXJsKTsKICAgICAgICAgICAgICBfdGhpczMuc2FuZGJveFRvVXJscy5nZXQoc2FuZGJveCkuZGVsZXRlKHVybCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBfdGhpcy5fZm9yd2FyZHNbZnJvbV0gPSBjb25mOwogICAgICB9CgogICAgICAvL2FkZCBmb3J3YXJkIGRldGluYXRpb24KICAgICAgdGhpcy5fcmVnaXN0cnkuZ2V0U2FuZGJveCh0bykudGhlbihmdW5jdGlvbiAoc2FuZGJveCkgewogICAgICAgIHZhciB1cmxzID0gY29uZi5zYW5kYm94VG9VcmxzLmdldChzYW5kYm94KTsKICAgICAgICBpZiAoIXVybHMpIHsKICAgICAgICAgIHVybHMgPSBuZXcgU2V0KCk7CiAgICAgICAgICBjb25mLnNhbmRib3hUb1VybHMuc2V0KHNhbmRib3gsIHVybHMpOwogICAgICAgIH0KCiAgICAgICAgdXJscy5hZGQodG8pOwogICAgICAgIGNvbmYudXJsVG9TYW5kYm94LnNldCh0bywgc2FuZGJveCk7CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIGNvbmY7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3B1Ymxpc2gnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9wdWJsaXNoKHVybCwgbXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaXRlbUxpc3QgPSBfdGhpcy5fc3Vic2NyaXB0aW9uc1t1cmxdOwogICAgICBpZiAoaXRlbUxpc3QpIHsKICAgICAgICBfdGhpcy5fcHVibGlzaE9uKGl0ZW1MaXN0LCBtc2cpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX29uUG9zdE1lc3NhZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblBvc3RNZXNzYWdlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9yZXNvbHZlIGV4dGVybmFsIHByb3Rvc3R1Yi4uLgogICAgICBfdGhpcy5fcmVnaXN0cnkucmVzb2x2ZShtc2cudG8pLnRoZW4oZnVuY3Rpb24gKHJvdXRlKSB7CiAgICAgICAgX3RoaXMuX3B1Ymxpc2gocm91dGUsIG1zZyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1JFU09MVkUtRVJST1I6ICcsIGUpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdwaXBlbGluZScsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3BpcGVsaW5lOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE1lc3NhZ2VCdXM7Cn0oX0J1czMuZGVmYXVsdCk7CgpleHBvcnRzLmRlZmF1bHQgPSBNZXNzYWdlQnVzOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuL0J1cyI6MTgwLCIuL1BpcGVsaW5lIjoxODJ9XSwxODI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiogQGF1dGhvciBtaWNhZWxwZWRyb3NhQGdtYWlsLmNvbQoqIFBpcGVsaW5lCiogU2VxdWVuY2lhbCBwcm9jZXNzb3Igb2YgbWV0aG9kcy4gU2ltaWxhciB0byBob3cgU2VxdWVudGlhbCBQcm9taXNlJ3Mgd29yaywgYnV0IGJldHRlciBmaXQgZm9yIG1lc3NhZ2UgcHJvY2Vzc2luZy4KKi8KCnZhciBQaXBlbGluZSA9IGZ1bmN0aW9uICgpIHsKICAvKiBwdWJsaWMKICAgIGhhbmRsZXJzOiAoKFBpcGVDb250ZXh0KSA9PiB2b2lkKVtdCiAgICBvbkZhaWw6IChlcnJvcikgPT4gdm9pZAogICovCgogIGZ1bmN0aW9uIFBpcGVsaW5lKF9vbkZhaWwpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQaXBlbGluZSk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5oYW5kbGVycyA9IFtdOwogICAgX3RoaXMub25GYWlsID0gX29uRmFpbDsKICB9CgogIF9jcmVhdGVDbGFzcyhQaXBlbGluZSwgW3sKICAgIGtleTogInByb2Nlc3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb2Nlc3MobXNnLCBvbkRlbGl2ZXIpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpcy5oYW5kbGVycy5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIGl0ZXIgPSBuZXcgSXRlcmF0b3IoX3RoaXMuaGFuZGxlcnMpOwogICAgICAgIGl0ZXIubmV4dChuZXcgUGlwZUNvbnRleHQoX3RoaXMsIGl0ZXIsIG1zZywgb25EZWxpdmVyKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb25EZWxpdmVyKG1zZyk7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBQaXBlbGluZTsKfSgpOwoKdmFyIFBpcGVDb250ZXh0ID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgIF9pblN0b3A6IGJvb2xlYW4KICAgICBfcGlwZWxpbmU6IFBpcGVsaW5lCiAgICBfaXRlcjogSXRlcmF0b3IKICAgIF9tc2c6IE1lc3NhZ2UKICAqLwoKICBmdW5jdGlvbiBQaXBlQ29udGV4dChwaXBlbGluZSwgaXRlciwgbXNnLCBvbkRlbGl2ZXIpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQaXBlQ29udGV4dCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5faW5TdG9wID0gZmFsc2U7CgogICAgX3RoaXMuX3BpcGVsaW5lID0gcGlwZWxpbmU7CiAgICBfdGhpcy5faXRlciA9IGl0ZXI7CiAgICBfdGhpcy5fbXNnID0gbXNnOwogICAgX3RoaXMuX29uRGVsaXZlciA9IG9uRGVsaXZlcjsKICB9CgogIF9jcmVhdGVDbGFzcyhQaXBlQ29udGV4dCwgW3sKICAgIGtleTogIm5leHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIV90aGlzLl9pblN0b3ApIHsKICAgICAgICBpZiAoX3RoaXMuX2l0ZXIuaGFzTmV4dCkgewogICAgICAgICAgX3RoaXMuX2l0ZXIubmV4dChfdGhpcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLl9vbkRlbGl2ZXIoX3RoaXMuX21zZyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVsaXZlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVsaXZlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKCFfdGhpcy5faW5TdG9wKSB7CiAgICAgICAgX3RoaXMuX2luU3RvcCA9IHRydWU7CiAgICAgICAgX3RoaXMuX29uRGVsaXZlcihfdGhpcy5fbXNnKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImZhaWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZhaWwoZXJyb3IpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghX3RoaXMuX2luU3RvcCkgewogICAgICAgIF90aGlzLl9pblN0b3AgPSB0cnVlOwogICAgICAgIGlmIChfdGhpcy5fcGlwZWxpbmUub25GYWlsKSB7CiAgICAgICAgICBfdGhpcy5fcGlwZWxpbmUub25GYWlsKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJwaXBlbGluZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3BpcGVsaW5lOwogICAgfQogIH0sIHsKICAgIGtleTogIm1zZyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX21zZzsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChpbk1zZykgewogICAgICB0aGlzLl9tc2cgPSBpbk1zZzsKICAgIH0KICB9XSk7CgogIHJldHVybiBQaXBlQ29udGV4dDsKfSgpOwoKdmFyIEl0ZXJhdG9yID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgIF9pbmRleDogbnVtYmVyCiAgICBfYXJyYXk6IFtdCiAgKi8KCiAgZnVuY3Rpb24gSXRlcmF0b3IoYXJyYXkpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJdGVyYXRvcik7CgogICAgdGhpcy5faW5kZXggPSAtMTsKICAgIHRoaXMuX2FycmF5ID0gYXJyYXk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoSXRlcmF0b3IsIFt7CiAgICBrZXk6ICJoYXNOZXh0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5faW5kZXggPCB0aGlzLl9hcnJheS5sZW5ndGggLSAxOwogICAgfQogIH0sIHsKICAgIGtleTogIm5leHQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHRoaXMuX2luZGV4Kys7CiAgICAgIHJldHVybiB0aGlzLl9hcnJheVt0aGlzLl9pbmRleF07CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSXRlcmF0b3I7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IFBpcGVsaW5lOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDE4MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKgpBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2phc29uZGF2aWVzL2Jsb29tZmlsdGVyLmpzCgpPcmlnaW5hbCBMaWNlbnNlOgoKQ29weXJpZ2h0IChjKSAyMDExLCBKYXNvbiBEYXZpZXMKQWxsIHJpZ2h0cyByZXNlcnZlZC4KClJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAptb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDoKCiAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMKICAgIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLgoKICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwKICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24KICAgIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLgoKICAqIFRoZSBuYW1lIEphc29uIERhdmllcyBtYXkgbm90IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzCiAgICBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KClRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTIElTIiBBTkQKQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRUQKV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRQpESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBKQVNPTiBEQVZJRVMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwKSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVApMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IKUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRgpMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFCk9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYKQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiovCgovKioKKiBJbXBsZW1lbnRzIGEgQmxvb20gZmlsdGVyLgoqIEBhdXRob3IgSmFzb24gRGF2aWVzOyBhZGFwdGVkIGFuZCBleHRlbmRlZCBieSBiZWllcmxlQHR1LWJlcmxpbi5kZQoqLwoKdmFyIEJsb29tRmlsdGVyID0gZnVuY3Rpb24gKCkgewoKICAvL3ZhciB0eXBlZEFycmF5cyA9IHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCc7CgogIC8vIENyZWF0ZXMgYSBuZXcgYmxvb20gZmlsdGVyLiAgSWYgKm0qIGlzIGFuIGFycmF5LWxpa2Ugb2JqZWN0LCB3aXRoIGEgbGVuZ3RoCiAgLy8gcHJvcGVydHksIHRoZW4gdGhlIGJsb29tIGZpbHRlciBpcyBsb2FkZWQgd2l0aCBkYXRhIGZyb20gdGhlIGFycmF5LCB3aGVyZQogIC8vIGVhY2ggZWxlbWVudCBpcyBhIDMyLWJpdCBpbnRlZ2VyLiAgT3RoZXJ3aXNlLCAqbSogc2hvdWxkIHNwZWNpZnkgdGhlCiAgLy8gbnVtYmVyIG9mIGJpdHMuICBOb3RlIHRoYXQgKm0qIGlzIHJvdW5kZWQgdXAgdG8gdGhlIG5lYXJlc3QgbXVsdGlwbGUgb2YKICAvLyAzMi4gICprKiBzcGVjaWZpZXMgdGhlIG51bWJlciBvZiBoYXNoaW5nIGZ1bmN0aW9ucy4KCiAgZnVuY3Rpb24gQmxvb21GaWx0ZXIobSwgaykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJsb29tRmlsdGVyKTsKCiAgICB2YXIgdHlwZWRBcnJheXMgPSB0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnOwoKICAgIHZhciBhOwogICAgaWYgKHR5cGVvZiBtICE9PSAnbnVtYmVyJykgewogICAgICBhID0gbTsKICAgICAgbSA9IGEubGVuZ3RoICogMzI7CiAgICB9CgogICAgdmFyIG4gPSBNYXRoLmNlaWwobSAvIDMyKTsKICAgIHZhciBpID0gLTE7CiAgICB0aGlzLm0gPSBtID0gbiAqIDMyOwogICAgdGhpcy5rID0gazsKCiAgICBpZiAodHlwZWRBcnJheXMpIHsKICAgICAgdmFyIGtieXRlcyA9IDEgPDwgTWF0aC5jZWlsKE1hdGgubG9nKE1hdGguY2VpbChNYXRoLmxvZyhtKSAvIE1hdGguTE4yIC8gOCkpIC8gTWF0aC5MTjIpOwogICAgICB2YXIgYXJyYXkgPSBrYnl0ZXMgPT09IDEgPyBVaW50OEFycmF5IDoga2J5dGVzID09PSAyID8gVWludDE2QXJyYXkgOiBVaW50MzJBcnJheTsKICAgICAgdmFyIGtidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoa2J5dGVzICogayk7CiAgICAgIHRoaXMuYnVja2V0cyA9IG5ldyBJbnQzMkFycmF5KG4pOwogICAgICBpZiAoYSkgd2hpbGUgKCsraSA8IG4pIHsKICAgICAgICBidWNrZXRzW2ldID0gYVtpXTsKICAgICAgfXRoaXMuX2xvY2F0aW9ucyA9IG5ldyBBcnJheShrYnVmZmVyKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vdmFyIGJ1Y2tldHMgPSB0aGlzLmJ1Y2tldHMgPSBbXTsKICAgICAgdGhpcy5idWNrZXRzID0gW107CiAgICAgIGlmIChhKSB3aGlsZSAoKytpIDwgbikgewogICAgICAgIGJ1Y2tldHNbaV0gPSBhW2ldOwogICAgICB9IGVsc2Ugd2hpbGUgKCsraSA8IG4pIHsKICAgICAgICBidWNrZXRzW2ldID0gMDsKICAgICAgfXRoaXMuX2xvY2F0aW9ucyA9IFtdOwogICAgfQogIH0KCiAgLy8gU2VlIGh0dHA6Ly93aWxsd2hpbS53cGVuZ2luZS5jb20vMjAxMS8wOS8wMy9wcm9kdWNpbmctbi1oYXNoLWZ1bmN0aW9ucy1ieS1oYXNoaW5nLW9ubHktb25jZS8KCgogIF9jcmVhdGVDbGFzcyhCbG9vbUZpbHRlciwgW3sKICAgIGtleTogJ2xvY2F0aW9ucycsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9jYXRpb25zKHYpIHsKICAgICAgdmFyIGsgPSB0aGlzLms7CiAgICAgIHZhciBtID0gdGhpcy5tOwogICAgICB2YXIgciA9IHRoaXMuX2xvY2F0aW9uczsKICAgICAgdmFyIGEgPSB0aGlzLmZudjFhKHYpOwogICAgICB2YXIgYiA9IHRoaXMuZm52MWFiKGEpOwogICAgICB2YXIgeCA9IGEgJSBtOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGs7ICsraSkgewogICAgICAgIHJbaV0gPSB4IDwgMCA/IHggKyBtIDogeDsKICAgICAgICB4ID0gKHggKyBiKSAlIG07CiAgICAgIH0KICAgICAgcmV0dXJuIHI7CiAgICB9CiAgfSwgewogICAga2V5OiAnYWRkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQodikgewogICAgICB2YXIgbCA9IHRoaXMubG9jYXRpb25zKHYgKyAnJyk7CiAgICAgIHZhciBrID0gdGhpcy5rOwogICAgICB2YXIgYnVja2V0cyA9IHRoaXMuYnVja2V0czsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrOyArK2kpIHsKICAgICAgICBidWNrZXRzW01hdGguZmxvb3IobFtpXSAvIDMyKV0gfD0gMSA8PCBsW2ldICUgMzI7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICd0ZXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiB0ZXN0KHYpIHsKICAgICAgdmFyIGwgPSB0aGlzLmxvY2F0aW9ucyh2ICsgJycpOwogICAgICB2YXIgayA9IHRoaXMuazsKICAgICAgdmFyIGJ1Y2tldHMgPSB0aGlzLmJ1Y2tldHM7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgazsgKytpKSB7CiAgICAgICAgdmFyIGIgPSBsW2ldOwogICAgICAgIGlmICgoYnVja2V0c1tNYXRoLmZsb29yKGIgLyAzMildICYgMSA8PCBiICUgMzIpID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIE5FVzogT1JzIHRoZSBCbG9vbUZpbHRlciBmcm9tIHRoZSBwYXJhbWV0ZXIKICAgIC8vIHBhcmFtIGhhcyB0byBiZSBhIEJGOyBCRnMgc2hvdWxkIGJlIHNhbWUgbGVuZ3RoCgogIH0sIHsKICAgIGtleTogJ2FkZEJsb29tRmlsdGVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRCbG9vbUZpbHRlcih2KSB7CiAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwogICAgICB2YXIgYnVja2V0c1BhcmFtID0gdi5idWNrZXRzOwogICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGJ1Y2tldHMubGVuZ3RoOyBpIDwgbjsgKytpKSB7CiAgICAgICAgYnVja2V0c1tpXSA9IGJ1Y2tldHNbaV0gfCBidWNrZXRzUGFyYW1baV07CiAgICAgIH0KICAgIH0KCiAgICAvLyBFc3RpbWF0ZWQgY2FyZGluYWxpdHkuCgogIH0sIHsKICAgIGtleTogJ3NpemUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNpemUoKSB7CiAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwogICAgICB2YXIgYml0cyA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gYnVja2V0cy5sZW5ndGg7IGkgPCBuOyArK2kpIHsKICAgICAgICBiaXRzICs9IHRoaXMucG9wY250KGJ1Y2tldHNbaV0pOwogICAgICB9cmV0dXJuIC10aGlzLm0gKiBNYXRoLmxvZygxIC0gYml0cyAvIHRoaXMubSkgLyB0aGlzLms7CiAgICB9CgogICAgLy8gaHR0cDovL2dyYXBoaWNzLnN0YW5mb3JkLmVkdS9+c2VhbmRlci9iaXRoYWNrcy5odG1sI0NvdW50Qml0c1NldFBhcmFsbGVsCgogIH0sIHsKICAgIGtleTogJ3BvcGNudCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcG9wY250KHYpIHsKICAgICAgdiAtPSB2ID4+IDEgJiAweDU1NTU1NTU1OwogICAgICB2ID0gKHYgJiAweDMzMzMzMzMzKSArICh2ID4+IDIgJiAweDMzMzMzMzMzKTsKICAgICAgcmV0dXJuICh2ICsgKHYgPj4gNCkgJiAweGYwZjBmMGYpICogMHgxMDEwMTAxID4+IDI0OwogICAgfQoKICAgIC8vIEZvd2xlci9Ob2xsL1ZvIGhhc2hpbmcuCgogIH0sIHsKICAgIGtleTogJ2ZudjFhJywKICAgIHZhbHVlOiBmdW5jdGlvbiBmbnYxYSh2KSB7CiAgICAgIHZhciBhID0gMjE2NjEzNjI2MTsKICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSB2Lmxlbmd0aDsgaSA8IG47ICsraSkgewogICAgICAgIHZhciBjID0gdi5jaGFyQ29kZUF0KGkpOwogICAgICAgIHZhciBkID0gYyAmIDB4ZmYwMDsKICAgICAgICBpZiAoZCkgYSA9IHRoaXMuZm52bXVsdGlwbHkoYSBeIGQgPj4gOCk7CiAgICAgICAgYSA9IHRoaXMuZm52bXVsdGlwbHkoYSBeIGMgJiAweGZmKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mbnZtaXgoYSk7CiAgICB9CgogICAgLy8gYSAqIDE2Nzc3NjE5IG1vZCAyKiozMgoKICB9LCB7CiAgICBrZXk6ICdmbnZtdWx0aXBseScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm52bXVsdGlwbHkoYSkgewogICAgICByZXR1cm4gYSArIChhIDw8IDEpICsgKGEgPDwgNCkgKyAoYSA8PCA3KSArIChhIDw8IDgpICsgKGEgPDwgMjQpOwogICAgfQoKICAgIC8vIE9uZSBhZGRpdGlvbmFsIGl0ZXJhdGlvbiBvZiBGTlYsIGdpdmVuIGEgaGFzaC4KCiAgfSwgewogICAga2V5OiAnZm52MWFiJywKICAgIHZhbHVlOiBmdW5jdGlvbiBmbnYxYWIoYSkgewogICAgICByZXR1cm4gdGhpcy5mbnZtaXgodGhpcy5mbnZtdWx0aXBseShhKSk7CiAgICB9CgogICAgLy8gU2VlIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDEzMTAxOTAxMzIyNS9odHRwOi8vaG9tZS5jb21jYXN0Lm5ldC9+YnJldG0vaGFzaC82Lmh0bWwKCiAgfSwgewogICAga2V5OiAnZm52bWl4JywKICAgIHZhbHVlOiBmdW5jdGlvbiBmbnZtaXgoYSkgewogICAgICBhICs9IGEgPDwgMTM7CiAgICAgIGEgXj0gYSA+Pj4gNzsKICAgICAgYSArPSBhIDw8IDM7CiAgICAgIGEgXj0gYSA+Pj4gMTc7CiAgICAgIGEgKz0gYSA8PCA1OwogICAgICByZXR1cm4gYSAmIDB4ZmZmZmZmZmY7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQmxvb21GaWx0ZXI7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IEJsb29tRmlsdGVyOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDE4NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioKKiBSZXByZXNlbnRzIHRoZSB1c2VyJ3MgaW5mb3JtYXRpb24gZm9yIHRoZSBnbG9iYWwgcmVnaXN0cnkuCiogQGF1dGhvciBiZWllcmxlQHR1LWJlcmxpbi5kZQoqLwoKdmFyIEdsb2JhbFJlZ2lzdHJ5UmVjb3JkID0gZnVuY3Rpb24gKCkgewoKICAvKioKICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGVtcHR5IG9iamVjdC4KICAgKi8KCiAgZnVuY3Rpb24gR2xvYmFsUmVnaXN0cnlSZWNvcmQoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2xvYmFsUmVnaXN0cnlSZWNvcmQpOwoKICAgIHRoaXMuZ3VpZDsKICAgIHRoaXMuc2FsdDsKICAgIHRoaXMudXNlcklEcyA9IFtdOwogICAgdGhpcy5sYXN0VXBkYXRlOwogICAgdGhpcy50aW1lb3V0OwogICAgdGhpcy5wdWJsaWNLZXk7CiAgICB0aGlzLmFjdGl2ZTsKICAgIHRoaXMucmV2b2tlZDsKICB9CgogIC8qKgogICAqIENvbnN0cnVjdHMgYSBuZXcgb2JqZWN0IHJlcHJlc2VudGluZyBpbmZvcm1hdGlvbiBhYm91dCBvbmUgY29udGFjdC4KICAgKiBAcmV0dXJucyB7T2JqZWN0fSAgb2JqZWN0ICBBIEphdmFTY3JpcHQgT2JqZWN0IHdpdGggYWxsIGZpZWxkcyBmb3IgdGhlIEdsb2JhbCBSZWdpc3RyeSBSZWNvcmQuCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoR2xvYmFsUmVnaXN0cnlSZWNvcmQsIFt7CiAgICBrZXk6ICJnZXRSZWNvcmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlY29yZCgpIHsKCiAgICAgIC8vIFRPRE86IGdpdmUgZXJyb3IgaWYgZmllbGRzIGFyZSBtaXNzaW5nCgogICAgICB2YXIgcmVjb3JkID0gbmV3IE9iamVjdCgpOwogICAgICByZWNvcmQuZ3VpZCA9IHRoaXMuZ3VpZDsKICAgICAgcmVjb3JkLnNhbHQgPSB0aGlzLnNhbHQ7CiAgICAgIHJlY29yZC51c2VySURzID0gdGhpcy51c2VySWRzOwogICAgICByZWNvcmQubGFzdFVwZGF0ZSA9IHRoaXMubGFzdFVwZGF0ZTsKICAgICAgcmVjb3JkLnRpbWVvdXQgPSB0aGlzLnRpbWVvdXQ7CiAgICAgIHJlY29yZC5wdWJsaWNLZXkgPSB0aGlzLnB1YmxpY0tleTsKICAgICAgcmVjb3JkLmFjdGl2ZSA9IHRoaXMuYWN0aXZlOwogICAgICByZWNvcmQucmV2b2tlZCA9IHRoaXMucmV2b2tlZDsKCiAgICAgIHJldHVybiByZWNvcmQ7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gR2xvYmFsUmVnaXN0cnlSZWNvcmQ7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IEdsb2JhbFJlZ2lzdHJ5UmVjb3JkOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDE4NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX0dyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEgPSByZXF1aXJlKCcuL0dyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEnKTsKCnZhciBfR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9HcmFwaENvbm5lY3RvckNvbnRhY3REYXRhKTsKCnZhciBfQmxvb21GaWx0ZXIgPSByZXF1aXJlKCcuL0Jsb29tRmlsdGVyJyk7Cgp2YXIgX0Jsb29tRmlsdGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Jsb29tRmlsdGVyKTsKCnZhciBfR2xvYmFsUmVnaXN0cnlSZWNvcmQgPSByZXF1aXJlKCcuL0dsb2JhbFJlZ2lzdHJ5UmVjb3JkJyk7Cgp2YXIgX0dsb2JhbFJlZ2lzdHJ5UmVjb3JkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0dsb2JhbFJlZ2lzdHJ5UmVjb3JkKTsKCnZhciBfYml0Y29pbmpzTGliID0gcmVxdWlyZSgnYml0Y29pbmpzLWxpYicpOwoKdmFyIF9iaXRjb2luanNMaWIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYml0Y29pbmpzTGliKTsKCnZhciBfYmlwID0gcmVxdWlyZSgnYmlwMzknKTsKCnZhciBfYmlwMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpcCk7Cgp2YXIgX3NqY2wgPSByZXF1aXJlKCdzamNsJyk7Cgp2YXIgX3NqY2wyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2pjbCk7Cgp2YXIgX2pzcnNhc2lnbiA9IHJlcXVpcmUoJ2pzcnNhc2lnbicpOwoKdmFyIF9qc3JzYXNpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfanNyc2FzaWduKTsKCnZhciBfYmFzZTY0VXJsID0gcmVxdWlyZSgnYmFzZTY0LXVybCcpOwoKdmFyIF9iYXNlNjRVcmwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmFzZTY0VXJsKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgoqIFRoZSBHcmFwaCBDb25uZWN0b3IgY29udGFpbnMgdGhlIGNvbnRhY3QgbGlzdC9hZGRyZXNzIGJvb2suCiogQGF1dGhvciBiZWllcmxlQHR1LWJlcmxpbi5kZQoqLwoKdmFyIEdyYXBoQ29ubmVjdG9yID0gZnVuY3Rpb24gKCkgewoKICAvLyBUT0RPOiBpbXBvcnQgLyBleHBvcnQgbWV0aG9kcwoKICAvKioKICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGFuZCBlbXB0eSBHcmFwaCBDb25uZWN0b3IuCiAgICogQHBhcmFtIHtzdHJpbmd9ICAgSHlwZXJ0eVJ1bnRpbWVVUkwgICAgVGhlIEh5cGVydHkgUnVudGltZSBVUkwuCiAgICogQHBhcmFtIHttZXNzYWdlQnVzfSAgICBNZXNzYWdlQnVzICAgICAgVGhlIE1lc3NhZ2UgQnVzLgogICAqLwoKICBmdW5jdGlvbiBHcmFwaENvbm5lY3RvcihoeXBlcnR5UnVudGltZVVSTCwgbWVzc2FnZUJ1cykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdyYXBoQ29ubmVjdG9yKTsKCiAgICB0aGlzLmNvbnRhY3RzID0gW107CiAgICB0aGlzLmxhc3RDYWxjdWxhdGlvbkJsb29tRmlsdGVyMUhvcCA9IG5ldyBEYXRlKDApLnRvSVNPU3RyaW5nKCk7CgogICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZCA9IG5ldyBfR2xvYmFsUmVnaXN0cnlSZWNvcmQyLmRlZmF1bHQoKTsKICAgIHRoaXMuX3BydktleTsKCiAgICB0aGlzLmdyb3VwcyA9IFtdOwogICAgdGhpcy5yZXNpZGVuY2VMb2NhdGlvbjsKICAgIHRoaXMuZmlyc3ROYW1lOwogICAgdGhpcy5sYXN0TmFtZTsKCiAgICB0aGlzLl9tZXNzYWdlQnVzID0gbWVzc2FnZUJ1czsKICAgIHRoaXMuX2h5cGVydHlSdW50aW1lVVJMID0gaHlwZXJ0eVJ1bnRpbWVVUkw7CiAgfQoKICAvKioKICAqIFJldHVybnMgdGhlIE1lc3NhZ2VCdXMuCiAgKiBAcGFyYW0ge01lc3NhZ2VCdXN9ICAgICAgICAgICBtZXNzYWdlQnVzICAgIFRoZSBNZXNzYWdlIEJ1cy4KICAqLwoKCiAgX2NyZWF0ZUNsYXNzKEdyYXBoQ29ubmVjdG9yLCBbewogICAga2V5OiAnZ2VuZXJhdGVHVUlEJywKCgogICAgLyoqCiAgICAgKiBHZW5lcmF0ZXMgYSBHVUlEIGFuZCByZXR1cm5zIGEgbW5lbW9uaWMgZnJvbSB3aGljaCB0aGUgR1VJRCBjYW4gYmUgcmUtY3JlYXRlZCBsYXRlci4KICAgICAqIEByZXR1cm5zICB7c3RyaW5nfSAgICBtbmVtb25pYyAgICAgIEEgc3RyaW5nIHdpdGggMTYgd29yZHMuCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUdVSUQoKSB7CgogICAgICAvLyBnZW5lcmF0ZSBtbmVtb25pYyBhbmQgc2FsdAogICAgICBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IHRydWU7CiAgICAgIHZhciBtbmVtb25pYyA9IF9iaXAyLmRlZmF1bHQuZ2VuZXJhdGVNbmVtb25pYygxNjApOwoKICAgICAgdmFyIHNhbHRXb3JkID0gX2JpcDIuZGVmYXVsdC5nZW5lcmF0ZU1uZW1vbmljKDgpOwogICAgICB0aGlzLl9jcmVhdGVLZXlzKG1uZW1vbmljLCBzYWx0V29yZCk7CgogICAgICAvLyBzZXQgbGFzVXBkYXRlIGRhdGUKICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5sYXN0VXBkYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoKICAgICAgLy8gc2V0IGRlZnVhbHQgdGltZW91dAogICAgICB2YXIgdGltZW91dCA9IG5ldyBEYXRlKCk7CiAgICAgIHRpbWVvdXQuc2V0TW9udGgodGltZW91dC5nZXRNb250aCgpICsgMTIwKTsKICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC50aW1lb3V0ID0gdGltZW91dC50b0lTT1N0cmluZygpOwoKICAgICAgLy8gc2V0IGRlZmF1bHQgdmFsdWVzCiAgICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuYWN0aXZlID0gMTsKICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5yZXZva2VkID0gMDsKCiAgICAgIC8vIHJldHVybiBtbmVtb25pYwogICAgICB2YXIgcnRuID0gbW5lbW9uaWMgKyAnICcgKyBzYWx0V29yZDsKICAgICAgcmV0dXJuIHJ0bjsKICAgIH0KCiAgICAvKioKICAgICAqIEdlbmVyYXRlcyBhIHB1YmxpYy9wcml2YXRlIGtleSBwYWlyIGZyb20gYSBnaXZlbiBtbmVtb25pYyAoMTYgd29yZHMpLgogICAgICogRXhwZWN0cyBhIHN0cmluZyBjb250YWluaW5nIDE2IHdvcmRzIHNlcGVyYXRlZCBieSBzaW5nbGUgc3BhY2VzLgogICAgICogUmV0cmlldmVzIGRhdGEgZnJvbSB0aGUgR2xvYmFsIFJlZ2lzdHJ5LgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgbW5lbW9uaWNBbmRTYWx0ICAgICBBIHN0cmluZyBvZiAxNiB3b3Jkcy4KICAgICAqIEByZXR1cm5zICB7UHJvbWlzZX0gIFByb21pc2UgICAgICAgICAgR2xvYmFsIFJlZ2lzdHJ5IFJlY29yZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICd1c2VHVUlEJywKICAgIHZhbHVlOiBmdW5jdGlvbiB1c2VHVUlEKG1uZW1vbmljQW5kU2FsdCkgewogICAgICAvLyBUT0RPOiBjaGVjayBpZiBmb3JtYXQgaXMgY29ycmVjdCBhbmQgaWYgYWxsIHdvcmRzIGFyZSBmcm9tIGJpcDM5IGVuZ2xpc2ggd29yZGxpc3QKICAgICAgdmFyIGxhc3RJbmRleCA9IG1uZW1vbmljQW5kU2FsdC5sYXN0SW5kZXhPZignICcpOwogICAgICB2YXIgbW5lbW9uaWMgPSBtbmVtb25pY0FuZFNhbHQuc3Vic3RyaW5nKDAsIGxhc3RJbmRleCk7CiAgICAgIHZhciBzYWx0V29yZCA9IG1uZW1vbmljQW5kU2FsdC5zdWJzdHJpbmcobGFzdEluZGV4ICsgMSwgbW5lbW9uaWNBbmRTYWx0Lmxlbmd0aCk7CiAgICAgIHRoaXMuX2NyZWF0ZUtleXMobW5lbW9uaWMsIHNhbHRXb3JkKTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyByZXRyaWV2ZSBjdXJyZW50IGluZm8gZnJvbSBHbG9iYWwgUmVnaXN0cnkgYW5kIGZpbGwgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZAogICAgICB2YXIgbXNnID0gewogICAgICAgIHR5cGU6ICdSRUFEJywKICAgICAgICBmcm9tOiB0aGlzLl9oeXBlcnR5UnVudGltZVVSTCArICcvZ3JhcGgtY29ubmVjdG9yJywKICAgICAgICB0bzogJ2dsb2JhbDovL3JlZ2lzdHJ5LycsCiAgICAgICAgYm9keTogeyBndWlkOiB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmd1aWQgfQogICAgICB9OwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgaWYgKF90aGlzLm1lc3NhZ2VCdXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVqZWN0KCdNZXNzYWdlQnVzIG5vdCBmb3VuZCBvbiBHcmFwaENvbm5lY3RvcicpOwogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2csIGZ1bmN0aW9uIChyZXBseSkgewoKICAgICAgICAgICAgLy8gcmVwbHkgc2hvdWxkIGJlIHRoZSBKU09OIHJldHVybmVkIGZyb20gdGhlIEdsb2JhbCBSZWdpc3RyeSBSRVNULWludGVyZmFjZQogICAgICAgICAgICB2YXIgdW53cmFwcGVkSldUID0gS0pVUi5qd3MuSldTLnBhcnNlKHJlcGx5LmJvZHkuZGF0YSk7CiAgICAgICAgICAgIHZhciBkYXRhRW5jb2RlZCA9IHVud3JhcHBlZEpXVC5wYXlsb2FkT2JqLmRhdGE7CiAgICAgICAgICAgIHZhciBkYXRhRGVjb2RlZCA9IF9iYXNlNjRVcmwyLmRlZmF1bHQuZGVjb2RlKGRhdGFFbmNvZGVkKTsKICAgICAgICAgICAgdmFyIGRhdGFKU09OID0gSlNPTi5wYXJzZShkYXRhRGVjb2RlZCk7CgogICAgICAgICAgICAvLyBwdWJsaWMga2V5IHNob3VsZCBtYXRjaAogICAgICAgICAgICB2YXIgc2FtZUtleSA9IGRhdGFKU09OLnB1YmxpY0tleSA9PSBfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5wdWJsaWNLZXk7CiAgICAgICAgICAgIGlmICghc2FtZUtleSkgewogICAgICAgICAgICAgIHJlamVjdCgnUmV0cmlldmVkIGtleSBkb2VzIG5vdCBtYXRjaCEnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YXIgcHVibGljS2V5T2JqZWN0ID0gX2pzcnNhc2lnbjIuZGVmYXVsdC5LRVlVVElMLmdldEtleShkYXRhSlNPTi5wdWJsaWNLZXkpOwogICAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gS0pVUi5qd3MuSldTLnZlcmlmeShyZXBseS5ib2R5LmRhdGEsIHB1YmxpY0tleU9iamVjdCwgWydFUzI1NiddKTsKICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnUmV0cmlldmVkIFJlY29yZCBub3QgdmFsaWQhJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YUpTT04udXNlcklEcyAhPSAndW5kZWZpbmVkJyAmJiBkYXRhSlNPTi51c2VySURzICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEcyA9IGRhdGFKU09OLnVzZXJJRHM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5sYXN0VXBkYXRlID0gZGF0YUpTT04ubGFzdFVwZGF0ZTsKICAgICAgICAgICAgICAgIF90aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnRpbWVvdXQgPSBkYXRhSlNPTi50aW1lb3V0OwogICAgICAgICAgICAgICAgX3RoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuc2FsdCA9IGRhdGFKU09OLnNhbHQ7CiAgICAgICAgICAgICAgICBfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5hY3RpdmUgPSBkYXRhSlNPTi5hY3RpdmU7CiAgICAgICAgICAgICAgICBfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5yZXZva2VkID0gZGF0YUpTT04ucmV2b2tlZDsKICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZXMgdGhlIGtleXMgZnJvbSBtbmVtb25pYyBhbmQgc2FsdC4gQWxzbyBzZXRzIHB1YmxpYyBrZXksIGd1aWQsIGFuZCBzYWx0IGZvciBnbG9iYWxSZWdpc3RyeVJlY29yZC4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIG1uZW1vbmljICAgICBBIHN0cmluZyB3aXRoIDE1IHdvcmRzLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgc2FsdCAgICAgICAgIEEgd29yZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfY3JlYXRlS2V5cycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUtleXMobW5lbW9uaWMsIHNhbHRXb3JkKSB7CgogICAgICAvLyBnZW5lcmF0ZSBrZXkgcGFpcgogICAgICB2YXIgc2VlZCA9IF9iaXAyLmRlZmF1bHQubW5lbW9uaWNUb1NlZWQobW5lbW9uaWMpOwogICAgICBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGZhbHNlOwogICAgICB2YXIgaGRub2RlID0gX2JpdGNvaW5qc0xpYjIuZGVmYXVsdC5IRE5vZGUuZnJvbVNlZWRCdWZmZXIoc2VlZCk7CiAgICAgIHZhciBlY3BhcmFtcyA9IEtKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIuZ2V0QnlOYW1lKCdzZWNwMjU2azEnKTsKICAgICAgdmFyIGJpUHJ2ID0gaGRub2RlLmtleVBhaXIuZDsgLy8gcHJpdmF0ZSBrZXkgYmlnIGludGVnZXIKICAgICAgdmFyIGVwUHViID0gZWNwYXJhbXMuRy5tdWx0aXBseShiaVBydik7IC8vIGQqRwogICAgICB2YXIgYmlYID0gZXBQdWIuZ2V0WCgpLnRvQmlnSW50ZWdlcigpOyAvLyB4IGZyb20gUQogICAgICB2YXIgYmlZID0gZXBQdWIuZ2V0WSgpLnRvQmlnSW50ZWdlcigpOyAvLyB5IGZyb20gUQogICAgICB2YXIgY2hhcmxlbiA9IGVjcGFyYW1zLmtleWxlbiAvIDQ7CiAgICAgIHZhciBoUHJ2ID0gKCcwMDAwMDAwMDAwJyArIGJpUHJ2LnRvU3RyaW5nKDE2KSkuc2xpY2UoLWNoYXJsZW4pOwogICAgICB2YXIgaFggPSAoJzAwMDAwMDAwMDAnICsgYmlYLnRvU3RyaW5nKDE2KSkuc2xpY2UoLWNoYXJsZW4pOwogICAgICB2YXIgaFkgPSAoJzAwMDAwMDAwMDAnICsgYmlZLnRvU3RyaW5nKDE2KSkuc2xpY2UoLWNoYXJsZW4pOwogICAgICB2YXIgaFB1YiA9ICcwNCcgKyBoWCArIGhZOwogICAgICB0aGlzLl9wcnZLZXkgPSBuZXcgS0pVUi5jcnlwdG8uRUNEU0EoeyBjdXJ2ZTogJ3NlY3AyNTZrMScgfSk7CiAgICAgIHRoaXMuX3BydktleS5zZXRQcml2YXRlS2V5SGV4KGhQcnYpOwogICAgICB0aGlzLl9wcnZLZXkuaXNQcml2YXRlID0gdHJ1ZTsKICAgICAgdGhpcy5fcHJ2S2V5LmlzUHVibGljID0gZmFsc2U7CiAgICAgIHZhciBwdWJLZXkgPSBuZXcgS0pVUi5jcnlwdG8uRUNEU0EoeyBjdXJ2ZTogJ3NlY3AyNTZrMScgfSk7CiAgICAgIHB1YktleS5zZXRQdWJsaWNLZXlIZXgoaFB1Yik7CiAgICAgIHB1YktleS5pc1ByaXZhdGUgPSBmYWxzZTsKICAgICAgcHViS2V5LmlzUHVibGljID0gdHJ1ZTsKICAgICAgdmFyIHB1YmxpY0tleSA9IF9qc3JzYXNpZ24yLmRlZmF1bHQuS0VZVVRJTC5nZXRQRU0ocHViS2V5LCAnUEtDUzhQVUInKTsKICAgICAgcHVibGljS2V5ID0gcHVibGljS2V5LnJlcGxhY2UoLyhcclxufFxufFxyKS9nbSwgJycpOwogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnB1YmxpY0tleSA9IHB1YmxpY0tleTsKCiAgICAgIC8vIGdlbmVyYXRlIHNhbHQKICAgICAgdmFyIHNhbHRIYXNoZWRCaXRBcnJheSA9IF9zamNsMi5kZWZhdWx0Lmhhc2guc2hhMjU2Lmhhc2goc2FsdFdvcmQpOwogICAgICB2YXIgc2FsdCA9IF9zamNsMi5kZWZhdWx0LmNvZGVjLmJhc2U2NC5mcm9tQml0cyhzYWx0SGFzaGVkQml0QXJyYXkpOwogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnNhbHQgPSBzYWx0OwoKICAgICAgLy8gZ2VuZXJhdGUgR1VJRAogICAgICB2YXIgaXRlcmF0aW9ucyA9IDEwMDAwOwogICAgICB2YXIgZ3VpZEJpdEFycmF5ID0gX3NqY2wyLmRlZmF1bHQubWlzYy5wYmtkZjIodGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5wdWJsaWNLZXksIHNhbHQsIGl0ZXJhdGlvbnMpOwogICAgICB2YXIgZ3VpZCA9IF9zamNsMi5kZWZhdWx0LmNvZGVjLmJhc2U2NHVybC5mcm9tQml0cyhndWlkQml0QXJyYXkpOwogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmd1aWQgPSBndWlkOwogICAgfQoKICAgIC8qKgogICAgICogU2lnbkdlbmVyYXRlcyBhIHB1YmxpYy9wcml2YXRlIGtleSBwYWlyIGZyb20gYSBnaXZlbiBtbmVtb25pYy4KICAgICAqIEByZXR1cm5zICB7c3RyaW5nfSAgICAgSldUICAgICBKU09OIFdlYiBUb2tlbiByZWFkeSB0byBjb21taXQgdG8gR2xvYmFsIFJlZ2lzdHJ5LgogICAgICovCgogIH0sIHsKICAgIGtleTogJ3NpZ25HbG9iYWxSZWdpc3RyeVJlY29yZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2lnbkdsb2JhbFJlZ2lzdHJ5UmVjb3JkKCkgewoKICAgICAgdmFyIHJlY29yZCA9IHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuZ2V0UmVjb3JkKCk7CiAgICAgIHZhciByZWNvcmRTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShyZWNvcmQpOwogICAgICB2YXIgcmVjb3JkU3RyaW5nQmFzZTY0ID0gX2Jhc2U2NFVybDIuZGVmYXVsdC5lbmNvZGUocmVjb3JkU3RyaW5nKTsKCiAgICAgIHZhciBqd3QgPSBLSlVSLmp3cy5KV1Muc2lnbihudWxsLCB7IGFsZzogJ0VTMjU2JyB9LCB7IGRhdGE6IHJlY29yZFN0cmluZ0Jhc2U2NCB9LCB0aGlzLl9wcnZLZXkpOwogICAgICByZXR1cm4gand0OwogICAgfQoKICAgIC8qKgogICAgICogVGFrZXMgdGhlIEdsb2JhbCBSZWdpc3RyeSBSZWNvcmQgYXMgYSBzaWduZWQgSldUIGFuZCBzZW5kcyBpdCB0byB0aGUgR2xvYmFsIFJlZ2lzdHJ5IHZpYSB0aGUgTWVzc2FnZUJ1cy4KICAgICAqIFJldHVybnMgdGhlIHJlc3BvbnNlIGNvZGUgb2YgdGhlIFJFU1QtaW50ZXJmYWNlIG9mIHRoZSBHbG9iYWwgUmVnaXN0cnkgYXMgYSBQcm9taXNlLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgand0ICAgICBUaGUgR2xvYmFsIFJlZ2lzdHJ5IFJlY29yZCBhcyBhIHNpZ25lZCBKV1QuCiAgICAgKiBAcmV0dXJucyB7UHJvcG1pc2V9ICBQcm9taXNlIFJlc3BvbnNlIENvZGUgZnJvbSBHbG9iYWwgUmVnaXN0cnkuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnc2VuZEdsb2JhbFJlZ2lzdHJ5UmVjb3JkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kR2xvYmFsUmVnaXN0cnlSZWNvcmQoand0KSB7CgogICAgICB2YXIgcGF5bG9hZE9iaiA9IEtKVVIuandzLkpXUy5wYXJzZShqd3QpLnBheWxvYWRPYmo7CiAgICAgIHZhciBndWlkID0gcGF5bG9hZE9iai5ndWlkOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ0NSRUFURScsCiAgICAgICAgZnJvbTogdGhpcy5faHlwZXJ0eVJ1bnRpbWVVUkwgKyAnL2dyYXBoLWNvbm5lY3RvcicsCiAgICAgICAgdG86ICdnbG9iYWw6Ly9yZWdpc3RyeS8nLAogICAgICAgIGJvZHk6IHsgZ3VpZDogdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5ndWlkLCBqd3Q6IGp3dCB9CiAgICAgIH07CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBpZiAoX3RoaXMubWVzc2FnZUJ1cyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZWplY3QoJ01lc3NhZ2VCdXMgbm90IGZvdW5kIG9uIEdyYXBoQ29ubmVjdG9yJyk7CiAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CgogICAgICAgICAgICB2YXIgcmVzcG9uc2VDb2RlID0gcmVwbHkuYm9keS5yZXNwb25zZUNvZGU7CiAgICAgICAgICAgIGlmIChyZXNwb25zZUNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgcmVzb2x2ZSgyMDApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZUNvZGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogUXVlcmllcyB0aGUgR2xvYmFsIFJlZ2lzdHJ5IGZvciBhIGdpdmVuIEdVSUQuCiAgICAgKiBSZXR1cm5zIGEgR3JhcGggQ29ubmVjdG9yIENvbnRhY3QgRGF0YSBhcyBhIFByb21pc2UuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgZ3VpZCAgVGhlIEdVSUQgdG8gcXVlcnkgdGhlIEdsb2JhbCBSZWdpc3RyeSBmb3IKICAgICAqIEByZXR1cm5zICAge1Byb21pc2V9ICAgUHJvbWlzZSAgIEdyYXBoIENvbm5lY3RvciBDb250YWN0IERhdGEgY29udGFpbmluZyBVc2VySURzLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ3F1ZXJ5R2xvYmFsUmVnaXN0cnknLAogICAgdmFsdWU6IGZ1bmN0aW9uIHF1ZXJ5R2xvYmFsUmVnaXN0cnkoZ3VpZCkgewoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ1JFQUQnLAogICAgICAgIGZyb206IHRoaXMuX2h5cGVydHlSdW50aW1lVVJMICsgJy9ncmFwaC1jb25uZWN0b3InLAogICAgICAgIHRvOiAnZ2xvYmFsOi8vcmVnaXN0cnkvJywKICAgICAgICBib2R5OiB7IGd1aWQ6IGd1aWQgfQogICAgICB9OwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgaWYgKF90aGlzLm1lc3NhZ2VCdXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVqZWN0KCdNZXNzYWdlQnVzIG5vdCBmb3VuZCBvbiBHcmFwaENvbm5lY3RvcicpOwogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2csIGZ1bmN0aW9uIChyZXBseSkgewoKICAgICAgICAgICAgLy8gcmVwbHkgc2hvdWxkIGJlIHRoZSBKU09OIHJldHVybmVkIGZyb20gdGhlIEdsb2JhbCBSZWdpc3RyeSBSRVNULWludGVyZmFjZQogICAgICAgICAgICB2YXIgdW53cmFwcGVkSldUID0gS0pVUi5qd3MuSldTLnBhcnNlKHJlcGx5LmJvZHkuZGF0YSk7CiAgICAgICAgICAgIHZhciBkYXRhRW5jb2RlZCA9IHVud3JhcHBlZEpXVC5wYXlsb2FkT2JqLmRhdGE7CiAgICAgICAgICAgIHZhciBkYXRhRGVjb2RlZCA9IF9iYXNlNjRVcmwyLmRlZmF1bHQuZGVjb2RlKGRhdGFFbmNvZGVkKTsKICAgICAgICAgICAgdmFyIGRhdGFKU09OID0gSlNPTi5wYXJzZShkYXRhRGVjb2RlZCk7CgogICAgICAgICAgICB2YXIgcHVibGljS2V5T2JqZWN0ID0gX2pzcnNhc2lnbjIuZGVmYXVsdC5LRVlVVElMLmdldEtleShkYXRhSlNPTi5wdWJsaWNLZXkpOwogICAgICAgICAgICB2YXIgaXNWYWxpZCA9IEtKVVIuandzLkpXUy52ZXJpZnkocmVwbHkuYm9keS5kYXRhLCBwdWJsaWNLZXlPYmplY3QsIFsnRVMyNTYnXSk7CiAgICAgICAgICAgIGlmICghaXNWYWxpZCkgewogICAgICAgICAgICAgIHJlamVjdCgnUmV0cmlldmVkIFJlY29yZCBub3QgdmFsaWQhJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIHF1ZXJpZWRDb250YWN0ID0gbmV3IF9HcmFwaENvbm5lY3RvckNvbnRhY3REYXRhMi5kZWZhdWx0KGRhdGFKU09OLmd1aWQsICcnLCAnJyk7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhSlNPTi51c2VySURzICE9ICd1bmRlZmluZWQnICYmIGRhdGFKU09OLnVzZXJJRHMgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcXVlcmllZENvbnRhY3QudXNlcklEcyA9IGRhdGFKU09OLnVzZXJJRHM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJlc29sdmUocXVlcmllZENvbnRhY3QpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogQWRkcyBhIFVzZXJJRCBmb3IgdGhlIHVzZXIuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICB1c2VySUQgICAgICAgICAgVGhlIFVzZXJJRCBmb3IgYSBEb21haW4gUmVnaXN0cnkgdG8gYWRkIGZvciB0aGUgdXNlci4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdhZGRVc2VySUQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFVzZXJJRCh1c2VySUQpIHsKICAgICAgLy8gY2hlY2sgaWYgYWxyZWFkeSBpbnNpZGUKICAgICAgdmFyIGZvdW5kID0gZmFsc2U7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC51c2VySURzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEcyA9PSB1c2VySUQpIHsKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEcy5wdXNoKHVzZXJJRCk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBVc2VySUQgZm9yIHRoZSB1c2VyLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgdXNlcklEICAgICAgICAgIFRoZSBVc2VySUQgdG8gcmVtb3ZlLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlbW92ZVVzZXJJRCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlVXNlcklEKHVzZXJJRCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnVzZXJJRHMgPT0gdXNlcklEKSB7CiAgICAgICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnVzZXJJRHMuc3BsaWNlKGksIDEpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQWRkIGEgY29udGFjdCB0byB0aGUgR3JhcGggQ29ubmVjdG9yLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgIGd1aWQgICAgICAgICAgR1VJRCBvZiB0aGUgbmV3IGNvbnRhY3QuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgZmlyc3ROYW1lICAgICBGaXJzdCBuYW1lIG9mIHRoZSBuZXcgY29udGFjdC4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICBsYXN0bmFtZSAgICAgIExhc3QgbmFtZSBvZiB0aGUgbmV3IGNvbnRhY3QuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnYWRkQ29udGFjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ29udGFjdChndWlkLCBmaXJzdE5hbWUsIGxhc3ROYW1lKSB7CgogICAgICAvLyBUT0RPOiB3aGF0IGlmIHR3byBjb250YWN0cyBoYXZlIHRoZSBzYW1lIEdVSUQ/CiAgICAgIC8vIFRPRE86IHJlamVjdCBpbnZhbGlkIEdVSURzCgogICAgICB0aGlzLmNvbnRhY3RzLnB1c2gobmV3IF9HcmFwaENvbm5lY3RvckNvbnRhY3REYXRhMi5kZWZhdWx0KGd1aWQsIGZpcnN0TmFtZSwgbGFzdE5hbWUpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZSBhIGNvbnRhY3QgZnJvbSB0aGUgR3JhcGggQ29ubmVjdG9yLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgZ3VpZCAgICAgIEdVSUQgb2YgdGhlIHVzZXIgdG8gYmUgcmVtb3ZlZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZW1vdmVDb250YWN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVDb250YWN0KGd1aWQpIHsKICAgICAgLy8gcmVtb3ZlIGZyb20gY29udGFjdHMKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbnRhY3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuY29udGFjdHNbaV0uZ3VpZCA9PSBndWlkKSB7CiAgICAgICAgICB0aGlzLmNvbnRhY3RzLnNwbGljZShpLCAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIHJlLWNhbGN1bGF0ZSBCRjFob3AKICAgICAgdGhpcy5jYWxjdWxhdGVCbG9vbUZpbHRlcjFIb3AoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIEJsb29tIGZpbHRlciBjb250YWluaW5nIGFsbCBub24tcHJpdmF0ZSBjb250YWN0cy4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdjYWxjdWxhdGVCbG9vbUZpbHRlcjFIb3AnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGN1bGF0ZUJsb29tRmlsdGVyMUhvcCgpIHsKICAgICAgdmFyIGJmID0gbmV3IF9CbG9vbUZpbHRlcjIuZGVmYXVsdCg0MzEzMjgsIC8vIG51bWJlciBvZiBiaXRzIHRvIGFsbG9jYXRlLiBXaXRoIDMwMDAwIGVudHJpZXMsIHdlIGhhdmUgYSBmYWxzZSBwb3NpdGl2ZSByYXRlIG9mIDAuMSAlLgogICAgICAxMCAvLyBudW1iZXIgb2YgaGFzaCBmdW5jdGlvbnMuCiAgICAgICk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb250YWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICghdGhpcy5jb250YWN0c1tpXS5wcml2YXRlQ29udGFjdCkgewogICAgICAgICAgYmYuYWRkKHRoaXMuY29udGFjdHNbaV0uZ3VpZCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuY29udGFjdHNCbG9vbUZpbHRlcjFIb3AgPSBiZjsKICAgICAgdGhpcy5sYXN0Q2FsY3VsYXRpb25CbG9vbUZpbHRlcjFIb3AgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXRzIGNvbnRhY3RzIGJ5IG5hbWUuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgbmFtZSAgICBGaXJzdCBvciBsYXN0IG5hbWUgdG8gbG9vayBmb3IgaW4gdGhlIGNvbnRhY3QgbGlzdC4KICAgICAqIEByZXR1cm5zICB7YXJyYXl9ICAgbWF0Y2hpbmdDb250YWN0cyAgICAgICBDb250YWN0cyBtYXRjaGluZyB0aGUgZ2l2ZW4gbmFtZS4gVGhlIGZvcm1hdCBpczogQ29udGFjdHM8R3JhcGhDb25uZWN0b3JDb250YWN0RGF0YT4uCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0Q29udGFjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGFjdChuYW1lKSB7CiAgICAgIC8vIFRPRE86IG9wdGltaXplLCBlLmcuLCBmaW5kIG1pc3NwZWxsZWQgcGVvcGxlCiAgICAgIHZhciBydG5BcnJheSA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29udGFjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5jb250YWN0c1tpXS5maXJzdE5hbWUgPT0gbmFtZSB8fCB0aGlzLmNvbnRhY3RzW2ldLmxhc3ROYW1lID09IG5hbWUpIHsKICAgICAgICAgIHJ0bkFycmF5LnB1c2godGhpcy5jb250YWN0c1tpXSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBydG5BcnJheTsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrcywgaWYgdGhlIGdpdmVuIEdVSUQgaXMga25vd24gYW5kIHJldHVybnMgYSBsaXN0IG9mIGNvbnRhY3MgdGhhdCBhcmUgZGlyZWN0IGNvbm5lY3Rpb25zIGFzIHdlbGwgYXMgYSBsaXN0IG9mIGNvbnRhY3RzIHRoYXQgKG1vc3QgbGlrZWx5KSBrbm93IHRoZSBnaXZlbiBjb250YWN0LgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgZ3VpZCAgICAgIEdVSUQgb2YgdGhlIGNvbnRhY3QgdG8gbG9vayBmb3IuCiAgICAgKiBAcmV0dXJucyAge2FycmF5fSAgICByZWxhdGVkQ29udGFjdHMgICAgIExpc3Qgb2YgcmVsYXRlZCBkaXJlY3QgY29udGFjdHMgYW5kIG9mIHJlbGF0ZWQgZnJpZW5kcy1vZi1mcmllbmRzIGNvbnRhY3RzLlRoZSBmb3JtYXQgaXM6IFJlbGF0ZWRDb250YWN0czxEaXJlY3Q8R3JhcGhDb25uZWN0b3JDb250YWN0RGF0YT4sRm9GPEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGE+Pi4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdjaGVja0dVSUQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrR1VJRChndWlkKSB7CiAgICAgIHZhciBkaXJlY3RDb250YWN0c0FycmF5ID0gW107CiAgICAgIHZhciBmb2ZDb250YWN0c0FycmF5ID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb250YWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLmNvbnRhY3RzW2ldLmd1aWQgPT0gZ3VpZCkgewogICAgICAgICAgZGlyZWN0Q29udGFjdHNBcnJheS5wdXNoKHRoaXMuY29udGFjdHNbaV0pOwogICAgICAgIH0KICAgICAgICB2YXIgYmYxaG9wID0gdGhpcy5jb250YWN0c1tpXS5jb250YWN0c0Jsb29tRmlsdGVyMUhvcDsKICAgICAgICBpZiAoYmYxaG9wICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGlmIChiZjFob3AudGVzdChndWlkKSkgewogICAgICAgICAgICBmb2ZDb250YWN0c0FycmF5LnB1c2godGhpcy5jb250YWN0c1tpXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBydG5BcnJheSA9IFtdOwogICAgICBydG5BcnJheS5wdXNoKGRpcmVjdENvbnRhY3RzQXJyYXksIGZvZkNvbnRhY3RzQXJyYXkpOwogICAgICByZXR1cm4gcnRuQXJyYXk7CiAgICB9CgogICAgLy8gVE9ETzogZXhwb3J0R3JhcGhEYXRhKD8pe30KICAgIC8vIFRPRE86IGltcG9ydEdyYXBoRGF0YSg/KXt9CgogIH0sIHsKICAgIGtleTogJ21lc3NhZ2VCdXMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9tZXNzYWdlQnVzOwogICAgfQoKICAgIC8qKgogICAgKiBTZXRzIHRoZSBNZXNzYWdlQnVzLgogICAgKiBAcGFyYW0ge01lc3NhZ2VCdXN9ICAgICAgICAgICBtZXNzYWdlQnVzICAgIFRoZSBNZXNzYWdlIEJ1cy4KICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChtZXNzYWdlQnVzKSB7CiAgICAgIHRoaXMuX21lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEdyYXBoQ29ubmVjdG9yOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBHcmFwaENvbm5lY3RvcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9CbG9vbUZpbHRlciI6MTgzLCIuL0dsb2JhbFJlZ2lzdHJ5UmVjb3JkIjoxODQsIi4vR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YSI6MTg2LCJiYXNlNjQtdXJsIjoxNywiYmlwMzkiOjIyLCJiaXRjb2luanMtbGliIjozMywiYnVmZmVyIjo3NiwianNyc2FzaWduIjoxMzIsInNqY2wiOjE3MH1dLDE4NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioKKiBSZXByZXNlbnRzIGluZm9ybWF0aW9uIGFib3V0IGEgY29udGFjdC4KKiBAYXV0aG9yIGJlaWVybGVAdHUtYmVybGluLmRlCiovCgp2YXIgR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YSA9IGZ1bmN0aW9uICgpIHsKCiAgLyoqCiAgICogQ29uc3RydWN0cyBhIG5ldyBvYmplY3QgcmVwcmVzZW50aW5nIGluZm9ybWF0aW9uIGFib3V0IG9uZSBjb250YWN0LgogICAqIEBwYXJhbSAge1N0cmluZ30gICAgIGd1aWQgICAgICAgIFRoZSBHVUlEIG9mIHRoZSBuZXcgY29udGFjdC4KICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZmlyc3ROYW1lICAgVGhlIGZpcnN0IG5hbWUgb2YgdGhlIG5ldyBjb250YWN0LgogICAqIEBwYXJhbSAge1N0cmluZ30gICBsYXN0TmFtZSAgICBUaGUgbGFzdCBuYW1lIG9mIHRoZSBuZXcgY29udGFjdC4KICAgKi8KCiAgZnVuY3Rpb24gR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YShndWlkLCBmaXJzdE5hbWUsIGxhc3ROYW1lKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YSk7CgogICAgdGhpcy5fZ3VpZCA9IGd1aWQ7CiAgICB0aGlzLl91c2VySURzID0gW107CiAgICB0aGlzLl9maXJzdE5hbWUgPSBmaXJzdE5hbWU7CiAgICB0aGlzLl9sYXN0TmFtZSA9IGxhc3ROYW1lOwogICAgdGhpcy5fcHJpdmF0ZUNvbnRhY3QgPSBmYWxzZTsKICAgIHRoaXMuX2xhc3RTeW5jQmxvb21GaWx0ZXIxSG9wID0gbmV3IERhdGUoMCkudG9JU09TdHJpbmcoKTsKICAgIHRoaXMuX2xhc3RTeW5jRG9tYWluVXNlcklEcyA9IG5ldyBEYXRlKDApLnRvSVNPU3RyaW5nKCk7CiAgICB0aGlzLl9yZXNpZGVuY2VMb2NhdGlvbjsKICAgIHRoaXMuX2dyb3VwcyA9IFtdOwogIH0KCiAgLyoqCiAgICogUmV0dXJucyB0aGUgR1VJRC4KICAgKiBAcmV0dXJucyAge1N0cmluZ30gICAgIEdVSUQgICAgICAgIEdVSUQgb2YgdGhlIGNvbnRhY3QuCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YSwgW3sKICAgIGtleTogImd1aWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9ndWlkOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgR1VJRC4KICAgICAqIEBwYXJhbSAge1N0cmluZ30gICAgIEdVSUQgICAgICAgIEdVSUQgb2YgdGhlIGNvbnRhdC4KICAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZ3VpZCkgewogICAgICB0aGlzLl9ndWlkID0gZ3VpZDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHVzZXIgSURzLgogICAgICogQHJldHVybnMgIHtMaXN0PFN0cmluZz59ICAgICB1c2VySURzICAgICAgICBVc2VySURzIG9mIHRoZSBjb250YWN0LgogICAgICovCgogIH0sIHsKICAgIGtleTogInVzZXJJRHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl91c2VySURzOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgdXNlcklEcy4KICAgICAqIEBwYXJhbSAge0xpc3Q8U3RyaW5nPn0gICAgIHVzZXJJRHMgICAgICAgIFVzZXJJRHMgb2YgdGhlIGNvbnRhdC4KICAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQodXNlcklEcykgewogICAgICB0aGlzLl91c2VySURzID0gdXNlcklEczsKICAgICAgdGhpcy5fbGFzdFN5bmNEb21haW5Vc2VySURzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZmlyc3QgbmFtZS4KICAgICAqIEByZXR1cm5zICB7U3RyaW5nfSAgICAgZmlyc3ROYW1lICAgICAgICBGaXJzdCBuYW1lIG9mIHRoZSBjb250YWN0LgogICAgICovCgogIH0sIHsKICAgIGtleTogImZpcnN0TmFtZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ZpcnN0TmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIGZpcnN0IG5hbWUuCiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICBmaXJzdE5hbWUgICAgICAgIEZpcnN0IG5hbWUgb2YgdGhlIGNvbnRhdC4KICAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZmlyc3ROYW1lKSB7CiAgICAgIHRoaXMuX2ZpcnN0TmFtZSA9IGZpcnN0TmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGxhc3QgbmFtZS4KICAgICAqIEByZXR1cm5zICB7U3RyaW5nfSAgICAgbGFzdE5hbWUgICAgICAgIExhc3QgbmFtZSBvZiB0aGUgY29udGFjdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJsYXN0TmFtZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2xhc3ROYW1lOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgbGFzdCBuYW1lLgogICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgbGFzdE5hbWUgICAgICAgIExhc3QgbmFtZSBvZiB0aGUgY29udGF0LgogICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChsYXN0TmFtZSkgewogICAgICB0aGlzLl9sYXN0TmFtZSA9IGxhc3ROYW1lOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgcHJpdmFjeSBzdGF0dXMgb2YgdGhlIGNvbnRhY3QuCiAgICAgKiBAcmV0dXJucyAge0Jvb2xlYW59ICAgICBwcml2YXRlQ29udGFjdCAgICAgICAgVHJ1ZS9mYWxzZSB2YWx1ZSBpbmRpY2F0aW5nIHRoZSBwcml2YWN5IHN0YXR1cyBvZiB0aGUgY29udGFjdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJwcml2YXRlQ29udGFjdCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3ByaXZhdGVDb250YWN0OwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgcHJpdmFjeSBzdGF0dXMgb2YgdGhlIGNvbnRhY3QgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBCb29sZWFuIHZhbHVlLgogICAgICogQHBhcmFtICB7Qm9vbGVhbn0gICAgIGJvb2xQcml2YXRlICAgICAgICBUcnVlL2ZhbHNlIHZhbHVlIGluZGljYXRpbmcgdGhlIHByaXZhY3kgc3RhdHVzIG9mIHRoZSBjb250YWN0LgogICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChib29sUHJpdmF0ZSkgewogICAgICB0aGlzLl9wcml2YXRlQ29udGFjdCA9IGJvb2xQcml2YXRlOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgQmxvb20gZmlsdGVyIGNvbnRhaW5pbmcgdGhlIGhhc2hlZCBHVUlEcyBvZiB0aGUgY29udGFjdHMgZm9yIHRoZSBjb250YWN0LgogICAgICogQHJldHVybnMgIHtCbG9vbUZpbHRlcn0gICAgIGJmICAgICAgICBCbG9vbSBmaWx0ZXIgZm9yIHRoZSBjb250YWN0LgogICAgICovCgogIH0sIHsKICAgIGtleTogImNvbnRhY3RzQmxvb21GaWx0ZXIxSG9wIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY29udGFjdHNCbG9vbUZpbHRlcjFIb3A7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBmcmllbmRzLW9mLWZyaWVuZHMgQmxvb20gZmlsdGVyIGNvbnRhaW5pbmcgdGhlIGhhc2hlZCBHVUlEcyBvZiB0aGUgY29udGFjdHMgZm9yIHRoZSBjb250YWN0LgogICAgICogQHBhcmFtICB7Qmxvb21GaWx0ZXJ9ICAgICBiZiAgICAgICAgQmxvb20gZmlsdGVyIGZvciB0aGUgY29udGFjdC4KICAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQoYmYpIHsKICAgICAgdGhpcy5fY29udGFjdHNCbG9vbUZpbHRlcjFIb3AgPSBiZjsKICAgICAgdGhpcy5fbGFzdFN5bmNCbG9vbUZpbHRlcjFIb3AgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBnZW9oYXNoIG9mIHRoZSByZXNpZGVuY2UgbG9jYXRpb24uCiAgICAgKiBAcmV0dXJucyAge1N0cmluZ30gICAgIGdlb2hhc2ggICAgICAgIEdlb2hhc2ggb2YgdGhlIHJlc2lkZW5jZSBsb2NhdGlvbi4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZXNpZGVuY2VMb2NhdGlvbiIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3Jlc2lkZW5jZUxvY2F0aW9uOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgZ2VvaGFzaCBvZiB0aGUgcmVzaWRlbmNlIGxvY2F0aW9uLgogICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgZ2VvaGFzaCAgICAgICAgR2VvaGFzaCBvZiB0aGUgcmVzaWRlbmNlIGxvY2F0aW9uLgogICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChnZW9oYXNoKSB7CiAgICAgIHRoaXMuX3Jlc2lkZW5jZUxvY2F0aW9uID0gZ2VvaGFzaDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGdyb3Vwcy4KICAgICAqIEByZXR1cm5zICB7TGlzdDxTdHJpbmc+fSAgICAgZ3JvdXBzICAgICAgICBHcm91cHMgb2YgdGhlIGNvbnRhY3QuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ3JvdXBzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fZ3JvdXBzOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgZ3JvdXBzLgogICAgICogQHBhcmFtICB7TGlzdDxTdHJpbmc+fSAgICAgZ3JvdXBzICAgICAgICBHcm91cHMgb2YgdGhlIGNvbnRhdC4KICAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZ3JvdXBzKSB7CiAgICAgIHRoaXMuX2dyb3VwcyA9IGdyb3VwczsKICAgIH0KICB9XSk7CgogIHJldHVybiBHcmFwaENvbm5lY3RvckNvbnRhY3REYXRhOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBHcmFwaENvbm5lY3RvckNvbnRhY3REYXRhOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDE4NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKdmFyIF9oZWxsb2pzID0gcmVxdWlyZSgnaGVsbG9qcycpOwoKdmFyIF9oZWxsb2pzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hlbGxvanMpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCioKKiBUaGUgSWRlbnRpdHkgTW9kdWxlIChJZCBNb2R1bGUpIGlzIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGhhbmRsaW5nIHRoZQoqIHVzZXIgaWRlbnRpdHkgYW5kIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGlzIGlkZW50aXR5IHdpdGggdGhlIEh5cGVydHkgaW5zdGFuY2VzLAoqIGluIG9yZGVyIHRvIG1ha2UgSHlwZXJ0eSBpbnN0YW5jZXMgaWRlbnRpZmlhYmxlLiBUaGUgaWRlbnRpdHkgaW4gdGhlIHJlVEhJTksgcHJvamVjdAoqIGlzIG5vdCBmaXhlZCB0byBhIHVuaXF1ZSBJZGVudGl0eSBTZXJ2aWNlIFByb3ZpZGVyLCBidXQgb2J0YWluZWQgdGhyb3VnaCBzZXZlcmFsCiogZGlmZmVyZW50IElkZW50aXR5IHNvdXJjZXMuIFdpdGggdGhpcyBhcHByb2FjaCwgdGhlIElkIE1vZHVsZSBwcm92aWRlcyB0byB0aGUgdXNlciB0aGUKKiBvcHRpb24gdG8gY2hvb3NlIHRoZSBwcmVmZXJyZWQgbWV0aG9kIGZvciBhdXRoZW50aWNhdGlvbi4KKiBUaGlzIG1vZHVsZSB3aWxsIHRodXMgYWJsZSB0byBzdXBwb3J0IG11bHRpcGxlIElkZW50aXR5IGFjcXVpc2l0aW9uIG1ldGhvZHMsCiogc3VjaCBhcyBPcGVuSUQgY29ubmVjdCAxLjAsIEtlcmJlcm9zIFN5c3RlbSwgb3IgYXV0aGVudGljYXRpb24gdGhyb3VnaCBzbWFydCBjYXJkcy4KKiBGb3IgZXhhbXBsZSwgYSB1c2VyIHdpdGggYSBHb29nbGUgYWNjb3VudCBjYW4gdXNlIHRoZSBHb29nbGUgYXMgYW4gSWRlbnRpdHkgUHJvdmlkZXIgdG8gcHJvdmlkZSBJZGVudGl0eSBUb2tlbnMsCiogIHdoaWNoIGNhbiBiZSB1c2VkIGJ5IHRoZSBJZGVudGl0eSBNb2R1bGUgdG8gYXNzb2NpYXRlIGl0IHdpdGggYSBIeXBlcnR5IGluc3RhbmNlLgoqCiogVGhlIElkZW50aXR5IE1vZHVsZSB1c2VzIGEgbm9kZSBwYWNrYWdlLCB0aGUgSGVsbG9KUywgd2hpY2ggaXMgYSBjbGllbnQtc2lkZSBKYXZhU2NyaXB0IEFQSSBmb3IgYXV0aGVudGljYXRpb24KKiB0aGF0IGZhY2lsaXRhdGVzIHRoZSByZXF1ZXN0cyBmb3IgdGhlIE9wZW5JRCBjb25uZWN0IHByb3RvY29sLiBUaGlzIG1ldGhvZCBhbGxvd3MgZm9yIHNvbWUgYWJzdHJhY3Rpb24KKiB3aGVuIG1ha2luZyByZXF1ZXN0cyBmb3IgZGlmZmVyZW50IElkZW50aXR5IFByb3ZpZGVycywgc3VjaCBhcyBPcGVuSUQgY29ubmVjdCB1c2VkIGJ5IEdvb2dsZSwgRmFjZWJvb2ssIE1pY3Jvc29mdCwgZm9yIGV4YW1wbGUuCioKKiBXaGVuIGEgcmVxdWVzdCBmb3IgYSB1c2VyIGlkZW50aXR5IGlzIG1hZGUgdXNpbmcgdGhlIG1ldGhvZCBsb2dpbldpdGhSUChpZGVudGlmaWVyLCBzY29wZSksCiogdGhpcyBtZXRob2Qgd2lsbCBhbmFseXNlIHRoZSBJZGVudGl0eSBQcm92aWRlciBjaG9zZW4gdG8gb2J0YWluIGFuIGlkZW50aXR5IGFuZCB3aWxsIHVzZSB0aGUgSGVsbG9KUyBub2RlIHBhY2thZ2UKKiB3aXRoIHRoZSBzZWxlY3RlZCBJZGVudGl0eSBQcm92aWRlciBhbmQgaWRlbnRpdHkgc2NvcGUuIEFmdGVyIHRoZSBIZWxsb0pTIHJlcXVlc3QgZm9yIGFuIEFjY2VzcyBUb2tlbgoqIHRvIHRoZSBJZGVudGl0eSBQcm92aWRlcnMsIHRoZSB1c2VyIHdpbGwgYmUgcHJvbXB0ZWQgdG8gYXV0aGVudGljYXRlIHRvd2FyZHMgdGhlIElkZW50aXR5IFByb3ZpZGVyLgoqIFVwb24gcmVjZWl2aW5nIHRoZSBBY2Nlc3MgVG9rZW4sIHRoaXMgdG9rZW4gaXMgdmFsaWRhdGVkIHdpdGggYSBSRVNUZnVsIHdlYiBzZXJ2aWNlIHJlcXVlc3QgdG8gYW4gZW5kcG9pbnQKKiBvbiB0aGUgSWRlbnRpdHkgUHJvdmlkZXIgQXV0aG9yaXphdGlvbiBTZXJ2ZXIsIGFuZCBhZnRlciB0aGUgdmFsaWRhdGlvbiBpcyBkb25lLAoqIGFuIElEIHRva2VuIGlzIG9idGFpbmVkIHdpdGggdGhlIGluZm9ybWF0aW9uIGFjY29yZGluZyB0byB0aGUgc2NvcGUgcmVxdWlyZWQuCiogVGhpcyBJRCB0b2tlbiBpcyB0aGVuIHByZXNlcnZlZCBpbiB0aGlzIG1vZHVsZSB0aGF0IGNhbiBvYnRhaW5lZCB0aHJvdWdoIHRoZSBnZXRJZGVudGl0aWVzKCkKKiBhbmQgaXMgcGFzc2VkIGFzIHJldHVybiB2YWx1ZSBvZiB0aGUgbG9naW5XaXRoUlAgZnVuY3Rpb24uIFRoZSBtZXRob2RzIGdlbmVyYXRlQXNzZXJ0aW9uIGFuZCB2YWxpZGF0ZUFzc2VydGlvbiBoYXZlIG5vdCB5ZXQgYmVlbiBkZXZlbG9wZWQuCioKKi8KCnZhciBJZGVudGl0eU1vZHVsZSA9IGZ1bmN0aW9uICgpIHsKCiAgLyoqCiAgKiBUaGlzIGlzIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXNlIHRoZSBJZGVudGl0eSBNb2R1bGUgaXQgZG9lcyBub3QgcmVxdWlyZSBhbnkgaW5wdXQuCiAgKi8KCiAgZnVuY3Rpb24gSWRlbnRpdHlNb2R1bGUoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSWRlbnRpdHlNb2R1bGUpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAvL3RvIHN0b3JlIGl0ZW1zIHdpdGggdGhpcyBmb3JtYXQ6IHtpZGVudGl0eTogaWRlbnRpdHlVUkwsIHRva2VuOiB0b2tlbklEfQogICAgX3RoaXMuaWRlbnRpdGllcyA9IFtdOwogIH0KCiAgLyoqCiAgKiBSZWdpc3RlciBhIG5ldyBJZGVudGl0eSB3aXRoIGFuIElkZW50aXR5IFByb3ZpZGVyCiAgKi8KCgogIF9jcmVhdGVDbGFzcyhJZGVudGl0eU1vZHVsZSwgW3sKICAgIGtleTogJ3JlZ2lzdGVySWRlbnRpdHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVySWRlbnRpdHkoKSB7fQogICAgLy8gQm9keS4uLgoKCiAgICAvKioKICAgICogSW4gcmVsYXRpb24gd2l0aCBhIGNsYXNzaWNhbCBSZWx5aW5nIFBhcnR5OiBSZWdpc3RyYXRpb24KICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlZ2lzdGVyV2l0aFJQJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlcldpdGhSUCgpIHt9CiAgICAvLyBCb2R5Li4uCgoKICAgIC8qKgogICAgKiBGdW5jdGlvbiB0byByZXR1cm4gYWxsIHRoZSBpZGVudGl0aWVzIHJlZ2lzdGVyZWQgd2l0aGluIGEgc2Vzc2lvbiBieSBhIHVzZXIuCiAgICAqIFRoZXNlIGlkZW50aXRpZXMgYXJlIHJldHVybmVkIGluIGFuIGFycmF5IGNvbnRhaW5pbmcgYSBKU09OIHBhY2thZ2UgZm9yIGVhY2ggdXNlciBpZGVudGl0eS4KICAgICogQHJldHVybiB7QXJyYXk8SWRlbnRpdGllcz59ICAgICAgICAgQXJyYXkgICAgICAgICBJZGVudGl0aWVzCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRJZGVudGl0aWVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJZGVudGl0aWVzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuaWRlbnRpdGllczsKICAgIH0KCiAgICAvKioKICAgICogRnVuY3Rpb24gdG8gcmVxdWVzdCBhbiBJRCBUb2tlbiBmcm9tIGEgdXNlci4gSWYgbm8gdG9rZW4gZXhpc3RzLCB0aGUgSWRlbnRpdHkgTW9kdWxlCiAgICAqIHdpbGwgdHJ5IHRvIG9idGFpbiBvbmUgZnJvbSBhbiBJZGVudGl0eSBQcm92aWRlciwgYW5kIHRoZSB1c2VyIHdpbGwgYmUgYXNrZWQgdG8gYXV0aGVudGljYXRlCiAgICAqICB0b3dhcmRzIHRoZSBJZGVudGl0eSBQcm92aWRlci4KICAgICogVGhlIGZ1bmN0aW9uIHJldHVybnMgYSBwcm9taXNlIHdpdGggYSB0b2tlbiBjb250YWluaW5nIHRoZSB1c2VyIGluZm9ybWF0aW9uLgogICAgKgogICAgKiBAcGFyYW0gIHtJZGVudGlmaWVyfSAgICAgIGlkZW50aWZpZXIgICAgICBpZGVudGlmaWVyCiAgICAqIEBwYXJhbSAge1Njb3BlfSAgICAgICAgICAgc2NvcGUgICAgICAgICAgIHNjb3BlCiAgICAqIEByZXR1cm4ge1Byb21pc2V9ICAgICAgICAgUHJvbWlzZSAgICAgICAgIElEVG9rZW4gY29udGFpbmluZyB0aGUgdXNlciBpbmZvcm1hdGlvbgogICAgKi8KCiAgfSwgewogICAga2V5OiAnbG9naW5XaXRoUlAnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ2luV2l0aFJQKGlkZW50aWZpZXIsIHNjb3BlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvKgogICAgICAgIFdoZW4gY2FsbGluZyB0aGlzIGZ1bmN0aW9uLCBpZiBldmVyeXRoaW5nIGlzIGZpbmUsIGEgc21hbGwgcG9wLXVwIHdpbGwgb3BlbiByZXF1ZXN0aW5nIGEgbG9naW4gd2l0aCBhIGdvb2dsZSBhY2NvdW50LiBBZnRlciB0aGUgbG9naW4gaXMgbWFkZSwgdGhlIHBvcC11cCB3aWxsIGNsb3NlIGFuZCB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIElEIHRva2VuLgogICAgICAgIFRoaXMgZnVuY3Rpb24gd2FzIHRlc3RlZCB3aXRoIHRoZSBVUkw6IGh0dHA6Ly8xMjcuMC4wLjE6ODA4MC8gYW5kIHdpdGggdGhlIHNhbWUgcmVkaXJlY3QgVVJJCiAgICAgICAJSW4gY2FzZSB0aGUgcmVkaXJlY3QgVVJJIGlzIG5vdCBhY2NlcHRlZCBvciBpcyByZXF1aXJlZCB0byBhZGQgb3RoZXJzIHJlZGlyZWN0IFVSSXMsIGEgbGl0dGxlIGluZm9ybWF0aW9uIGlzIHByb3ZpZGVkIHRvIGZpeCB0aGUgcHJvYmxlbToKICAgICAgIAlTbyB0aGF0IGFuIGFwcGxpY2F0aW9uIGNhbiB1c2UgR29vZ2xlJ3MgT0F1dGggMi4wIGF1dGhlbnRpY2F0aW9uIHN5c3RlbSBmb3IgdXNlciBsb2dpbiwKICAgICAgCWZpcnN0IGlzIHJlcXVpcmVkIHRvIHNldCB1cCBhIHByb2plY3QgaW4gdGhlIEdvb2dsZSBEZXZlbG9wZXJzIENvbnNvbGUgdG8gb2J0YWluIE9BdXRoIDIuMCBjcmVkZW50aWFscyBhbmQgc2V0IGEgcmVkaXJlY3QgVVJJLgogICAgICAJQSB0ZXN0IGFjY291bnQgd2FzIGNyZWF0ZWQgdG8gc2V0IHRoZSBwcm9qZWN0IGluIHRoZSBHb29nbGUgRGV2ZWxvcGVycyBDb25zb2xlIHRvIG9idGFpbiBPQXV0aCAyLjAgY3JlZGVudGlhbHMsCXdpdGggdGhlIGZvbGxvd2luZyBjcmVkZW50aWFsczoKICAgICAgICAgICAJdXNlcm5hbWU6IG9wZW5pZHRlc3QxMEBnbWFpbC5jb20KICAgICAgICAgICAgIHBhc3N3b3JkOiB0ZXN0T3BlbklEMTAKICAgICAgIAlUbyBhZGQgbW9yZSBVUkkncywgZm9sbG93IHRoZSBzdGVwczoKICAgICAgCTHCuiBjaG9vc2UgdGhlIHByb2plY3QgKCBjYW4gYmUgdGhlIE15IE9wZW5JRCBQcm9qZWN0KQkgZnJvbSAgaHR0cHM6Ly9jb25zb2xlLmRldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm9qZWN0c2VsZWN0b3IvYXBpcy9jcmVkZW50aWFscyB1c2luZyB0aGUgY3JlZGVudGlhbHMgcHJvdmlkZWQgYWJvdmUuCiAgICAgIAkywrogT3BlbiBUaGUgQ2xpZW50IFdlYiAxIGxpc3RlZCBpbiBPQXV0aCAyLjAgQ2xpZW50IElEJ3MKICAgICAgCTPCuiBBZGQgdGhlIFVSSSAgaW4gdGhlIGF1dGhvcml6ZWQgcmVkaXJlY3QgVVJJIHNlY3Rpb24uCiAgICAgICAgNMK6IGNoYW5nZSB0aGUgUkVESVJFQ1QgcGFyYW1ldGVyIGJlbGxvdyB3aXRoIHRoZSBwcmV0ZW5kZWQgVVJJCiAgICAgICAgIGlkZW50aXR5TW9kdWxlLl9oZWxsby5pbml0KHtnb29nbGU6ICI4MDgzMjk1NjYwMTItdHFyOHFvaDExMTk0MmdkMmtnMDA3dDBzOGYyNzdyb2kuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20ifSk7CiAgICAgICAgaWRlbnRpdHlNb2R1bGUuX2hlbGxvKCJnb29nbGUiKS5sb2dpbigpOwogICAgICAgKi8KCiAgICAgIHZhciBWQUxJRFVSTCA9ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjEvdG9rZW5pbmZvP2FjY2Vzc190b2tlbj0nOwogICAgICB2YXIgVVNFUklORlVSTCA9ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjEvdXNlcmluZm8/YWNjZXNzX3Rva2VuPSc7CiAgICAgIHZhciBhY1Rva2VuID0gdm9pZCAwOwogICAgICB2YXIgdG9rZW5UeXBlID0gdm9pZCAwOwogICAgICB2YXIgZXhwaXJlc0luID0gdm9pZCAwOwogICAgICB2YXIgdXNlciA9IHZvaWQgMDsKICAgICAgdmFyIHRva2VuSUQgPSB2b2lkIDA7CiAgICAgIHZhciBpbmZvVG9rZW4gPSB2b2lkIDA7CiAgICAgIHZhciBsb2dnZWRJbiA9IGZhbHNlOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgaWYgKF90aGlzLmluZm9Ub2tlbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvL1RPRE8gdmVyaWZ5IHdoZXRoZXIgdGhlIHRva2VuIGlzIHN0aWxsIHZhbGlkIG9yIG5vdC4KICAgICAgICAgIHJldHVybiByZXNvbHZlKF90aGlzLmluZm9Ub2tlbik7CiAgICAgICAgfQoKICAgICAgICAvL2Z1bmN0aW9uIHRvIHZhbGlkYXRlIHRoZSBhY2Nlc3MgdG9rZW4gcmVjZWl2ZWQgZHVyaW5nIHRoZSBhdXRoZW50aWNhdGlvbgogICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlVG9rZW4odG9rZW4pIHsKICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgIHJlcS5vcGVuKCdHRVQnLCBWQUxJRFVSTCArIHRva2VuLCB0cnVlKTsKCiAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHsKICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICAgIGdldEluZm9Ub2tlbih0b2tlbik7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXEuc3RhdHVzID09IDQwMCkgewogICAgICAgICAgICAgICAgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgdG9rZW4nKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVqZWN0KCdzb21ldGhpbmcgZWxzZSBvdGhlciB0aGFuIDIwMCB3YXMgcmV0dXJuZWQnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICByZXEuc2VuZCgpOwogICAgICAgIH0KCiAgICAgICAgLy9mdW5jdGlvbiB0byBleGNoYW5nZSB0aGUgYWNjZXNzIHRva2VuIHdpdGggYW4gSUQgVG9rZW4gY29udGFpbmluZyB0aGUgaW5mb3JtYXRpb24KICAgICAgICBmdW5jdGlvbiBnZXRJbmZvVG9rZW4odG9rZW4pIHsKICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgIHJlcS5vcGVuKCdHRVQnLCBVU0VSSU5GVVJMICsgdG9rZW4sIHRydWUpOwoKICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT09IDQpIHsKICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICBpbmZvVG9rZW4gPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgX3RoaXMuaW5mb1Rva2VuID0gaW5mb1Rva2VuOwogICAgICAgICAgICAgICAgdmFyIGVtYWlsID0gaW5mb1Rva2VuLmVtYWlsOwoKICAgICAgICAgICAgICAgIC8vY29udHJ1Y3QgdGhlIGlkZW50aXR5VVJMIHRvIGJlIGRlZmluZWQgYXMgaW4gc3BlY2lmaWNhdGlvbgogICAgICAgICAgICAgICAgLy8gbW9kZWw6IHVzZXI6Ly88aWRwZG9tYWluPi88dXNlci1pZGVudGlmaWVyPgogICAgICAgICAgICAgICAgdmFyIGlkZW50aXR5VVJMID0gJ3VzZXI6Ly8nICsgZW1haWwuc3Vic3RyaW5nKGVtYWlsLmluZGV4T2YoJ0AnKSArIDEsIGVtYWlsLmxlbmd0aCkgKyAnLycgKyBlbWFpbC5zdWJzdHJpbmcoMCwgZW1haWwuaW5kZXhPZignQCcpKTsKCiAgICAgICAgICAgICAgICAvL1RPRE8gcmVtb3ZlIGxhdGVyIHRoZSAndG9rZW4nIGZpZWxkIGtleQogICAgICAgICAgICAgICAgdmFyIGlkZW50aXR5QnVuZGxlID0geyBpZGVudGl0eTogaWRlbnRpdHlVUkwsIHRva2VuOiBpbmZvVG9rZW4sIGFjY2Vzc1Rva2VuOiB0b2tlbiwgaWRUb2tlbjoge30sIGluZm9Ub2tlbjogaW5mb1Rva2VuIH07CgogICAgICAgICAgICAgICAgZ2V0SURUb2tlbih0b2tlbiwgaWRlbnRpdHlCdW5kbGUpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxLnN0YXR1cyA9PT0gNDAwKSB7CiAgICAgICAgICAgICAgICByZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciBwcm9jZXNzaW5nIHRoZSB0b2tlbicpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZWplY3QoJ3NvbWV0aGluZyBlbHNlIG90aGVyIHRoYW4gMjAwIHdhcyByZXR1cm5lZCcpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIHJlcS5zZW5kKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRJRFRva2VuKHRva2VuLCBpZGVudGl0eUJ1bmRsZSkgewogICAgICAgICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgcmVxLm9wZW4oJ0dFVCcsIFZBTElEVVJMICsgdG9rZW4sIHRydWUpOwoKICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT09IDQpIHsKICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0b2tlbklEID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2VUZXh0KTsKCiAgICAgICAgICAgICAgICBpZGVudGl0eUJ1bmRsZS5pZFRva2VuID0gdG9rZW5JRDsKICAgICAgICAgICAgICAgIF90aGlzLmlkZW50aXRpZXMucHVzaChpZGVudGl0eUJ1bmRsZSk7CiAgICAgICAgICAgICAgICByZXNvbHZlKGlkZW50aXR5QnVuZGxlLnRva2VuKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcS5zdGF0dXMgPT09IDQwMCkgewogICAgICAgICAgICAgICAgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgdG9rZW4nKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVqZWN0KCdzb21ldGhpbmcgZWxzZSBvdGhlciB0aGFuIDIwMCB3YXMgcmV0dXJuZWQnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICByZXEuc2VuZCgpOwogICAgICAgIH0KCiAgICAgICAgX2hlbGxvanMyLmRlZmF1bHQuaW5pdCh7IGdvb2dsZTogJzgwODMyOTU2NjAxMi10cXI4cW9oMTExOTQyZ2Qya2cwMDd0MHM4ZjI3N3JvaS5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbScgfSk7CiAgICAgICAgKDAsIF9oZWxsb2pzMi5kZWZhdWx0KSgnZ29vZ2xlJykubG9naW4oeyBzY29wZTogJ2VtYWlsJyB9KS50aGVuKGZ1bmN0aW9uICh0b2tlbikgewoKICAgICAgICAgIHZhbGlkYXRlVG9rZW4odG9rZW4uYXV0aFJlc3BvbnNlLmFjY2Vzc190b2tlbik7CiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3JWYWxpZGF0aW5nICcsIGVycm9yKTsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBJbiByZWxhdGlvbiB3aXRoIGEgSHlwZXJ0eSBJbnN0YW5jZTogQXNzb2NpYXRlIGlkZW50aXR5CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzZXRIeXBlcnR5SWRlbnRpdHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEh5cGVydHlJZGVudGl0eSgpIHt9CiAgICAvLyBCb2R5Li4uCgoKICAgIC8qKgogICAgKiBHZW5lcmF0ZXMgYW4gSWRlbnRpdHkgQXNzZXJ0aW9uCiAgICAqCiAgICAqIEBwYXJhbSAge0RPTVN0cmluZ30gY29udGVudHMgICAgIGNvbnRlbnRzCiAgICAqIEBwYXJhbSAge0RPTVN0cmluZ30gb3JpZ2luICAgICAgIG9yaWdpbgogICAgKiBAcGFyYW0gIHtET01TdHJpbmd9IHVzZXJuYW1lSGludCB1c2VybmFtZUhpbnQKICAgICogQHJldHVybiB7SWRBc3NlcnRpb259ICAgICAgICAgICAgICBJZEFzc2VydGlvbgogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2VuZXJhdGVBc3NlcnRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlQXNzZXJ0aW9uKGNvbnRlbnRzLCBvcmlnaW4sIHVzZXJuYW1lSGludCkge30KICAgIC8vIEJvZHkuLi4KCgogICAgLyoqCiAgICAqIE9USEVSIFVTRVInUyBJREVOVElUWQogICAgKi8KCiAgICAvKioKICAgICogRnVuY3Rpb24gdG8gdmFsaWRhdGUgYW4gaWRlbnRpdHkgYXNzZXJ0aW9uIGdlbmVyYXRlZCBwcmV2aW91c2x5LgogICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB3aXRoIHRoZSByZXN1bHQgZnJvbSB0aGUgdmFsaWRhdGlvbi4KICAgICogQHBhcmFtICB7RE9NU3RyaW5nfSBhc3NlcnRpb24KICAgICogQHJldHVybiB7UHJvbWlzZX0gICAgICAgICBQcm9taXNlICAgICAgICAgcHJvbWlzZSB3aXRoIHRoZSByZXN1bHQgZnJvbSB0aGUgdmFsaWRhdGlvbgogICAgKi8KCiAgfSwgewogICAga2V5OiAndmFsaWRhdGVBc3NlcnRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbGlkYXRlQXNzZXJ0aW9uKGFzc2VydGlvbikge30KICAgIC8vIEJvZHkuLi4KCgogICAgLyoqCiAgICAqIFRydXN0IGxldmVsIGV2YWx1YXRpb24gb2YgYSByZWNlaXZlZCBJZEFzc2VydGlvbgogICAgKiBAcGFyYW0gIHtET01TdHJpbmd9IGFzc2VydGlvbiBhc3NlcnRpb24KICAgICovCgogIH0sIHsKICAgIGtleTogJ2dldEFzc2VydGlvblRydXN0TGV2ZWwnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFzc2VydGlvblRydXN0TGV2ZWwoYXNzZXJ0aW9uKSB7CiAgICAgIC8vIEJvZHkuLi4KICAgIH0KICB9XSk7CgogIHJldHVybiBJZGVudGl0eU1vZHVsZTsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gSWRlbnRpdHlNb2R1bGU7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7ImhlbGxvanMiOjEyNn1dLDE4ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9Cgp2YXIgUERQID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFBEUCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQRFApOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBfdGhpcy5ibGFja0xpc3QgPSBbXTsKICAgIF90aGlzLndoaXRlTGlzdCA9IFtdOwogIH0KCiAgLyogdXNlIGhhc2h0YWJsZSB0byBhbGxvdyBkeW5hbWljIG1hbmFnZW1lbnQgKi8KCgogIF9jcmVhdGVDbGFzcyhQRFAsIFt7CiAgICBrZXk6ICdldmFsdWF0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXZhbHVhdGUocmVnaXN0cnksIG1lc3NhZ2UsIGh5cGVydHlUb1ZlcmlmeSwgcG9saWNpZXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHJlc3VsdHMgPSBbdHJ1ZV07CiAgICAgIHZhciBhY3Rpb25zID0gW107CgogICAgICBmb3IgKHZhciBpIGluIHBvbGljaWVzKSB7CiAgICAgICAgdmFyIHBvbGljeSA9IHBvbGljaWVzW2ldOwogICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgICB2YXIgY29uZGl0aW9uID0gcG9saWN5LmNvbmRpdGlvbi5zcGxpdCgnICcpOwogICAgICAgIHN3aXRjaCAoY29uZGl0aW9uWzBdKSB7CiAgICAgICAgICBjYXNlICdibGFja2xpc3RlZCc6CiAgICAgICAgICAgIHJlc3VsdFswXSA9IF90aGlzLmlzQmxhY2tMaXN0ZWQocmVnaXN0cnksIGh5cGVydHlUb1ZlcmlmeSkgPyBwb2xpY3kuYXV0aG9yaXNlIDogIXBvbGljeS5hdXRob3Jpc2U7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnd2hpdGVsaXN0ZWQnOgogICAgICAgICAgICByZXN1bHRbMF0gPSBfdGhpcy5pc1doaXRlTGlzdGVkKGh5cGVydHlUb1ZlcmlmeSkgPyBwb2xpY3kuYXV0aG9yaXNlIDogIXBvbGljeS5hdXRob3Jpc2U7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAndGltZSc6CiAgICAgICAgICAgIHZhciBzdGFydCA9IGNvbmRpdGlvblsxXTsKICAgICAgICAgICAgdmFyIGVuZCA9IGNvbmRpdGlvblsyXTsKICAgICAgICAgICAgcmVzdWx0WzBdID0gX3RoaXMuaXNUaW1lQmV0d2VlbihzdGFydCwgZW5kKSA/IHBvbGljeS5hdXRob3Jpc2UgOiAhcG9saWN5LmF1dGhvcmlzZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgoKICAgICAgICAgICAgLy8gVE9ETzogZG8gYWN0aW9ucyBkZXBlbmQgb24gdGhlIGRlY2lzaW9uPwogICAgICAgICAgICByZXN1bHRbMV0gPSBwb2xpY3kuYWN0aW9uczsKICAgICAgICB9CgogICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHRbMF0pOwogICAgICAgIGFjdGlvbnMucHVzaChyZXN1bHRbMV0pOwogICAgICB9CgogICAgICB2YXIgYXV0aERlY2lzaW9uID0gX3RoaXMuZ2V0RGVjaXNpb24ocmVzdWx0cyk7CiAgICAgIHJldHVybiBbYXV0aERlY2lzaW9uLCBhY3Rpb25zXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdpc1NhbWVPcmlnaW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2FtZU9yaWdpbigpIHt9CiAgfSwgewogICAga2V5OiAnaXNCbGFja0xpc3RlZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNCbGFja0xpc3RlZChyZWdpc3RyeSwgaHlwZXJ0eVRvVmVyaWZ5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBibGFja0xpc3QgPSBfdGhpcy5ibGFja0xpc3Q7CiAgICAgIGZvciAodmFyIGkgaW4gYmxhY2tMaXN0KSB7CiAgICAgICAgaWYgKF90aGlzLmh5cGVydGllc01hdGNoKHJlZ2lzdHJ5LCBibGFja0xpc3RbaV0pLCBoeXBlcnR5VG9WZXJpZnkpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyogVE9ETzogY2FjaGUgdGhpcz8gKi8KCiAgfSwgewogICAga2V5OiAnaHlwZXJ0aWVzTWF0Y2gnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGh5cGVydGllc01hdGNoKHJlZ2lzdHJ5LCBVUkxUb1ZlcmlmeSwgaHlwZXJ0eVRvVmVyaWZ5KSB7CiAgICAgIHJlZ2lzdHJ5LmdldFVzZXJIeXBlcnR5KFVSTFRvVmVyaWZ5KS50aGVuKGZ1bmN0aW9uIChoeXBlcnR5KSB7CiAgICAgICAgcmV0dXJuIGh5cGVydHkuaHlwZXJ0eVVSTCA9PT0gaHlwZXJ0eVRvVmVyaWZ5OwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdpc1doaXRlTGlzdGVkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1doaXRlTGlzdGVkKHVzZXJJRCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMud2hpdGVMaXN0LmluZGV4T2YodXNlcklEKSA+IC0xOwogICAgfQogIH0sIHsKICAgIGtleTogJ2lzVGltZUJldHdlZW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzVGltZUJldHdlZW4oc3RhcnQsIGVuZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKICAgICAgdmFyIG5vd01pbnV0ZXMgPSBfdGhpcy5nZXRNaW51dGVzKHBhcnNlSW50KG5vdy5nZXRIb3VycygpKSArICc6JyArIG5vdy5nZXRNaW51dGVzKCkpOwogICAgICB2YXIgc3RhcnRNaW51dGVzID0gX3RoaXMuZ2V0TWludXRlcyhzdGFydCk7CiAgICAgIHZhciBlbmRNaW51dGVzID0gX3RoaXMuZ2V0TWludXRlcyhlbmQpOwogICAgICBpZiAoZW5kTWludXRlcyA+IHN0YXJ0TWludXRlcykgewogICAgICAgIHJldHVybiBub3dNaW51dGVzID4gc3RhcnRNaW51dGVzICYmIG5vd01pbnV0ZXMgPCBlbmRNaW51dGVzOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChub3dNaW51dGVzIDwgc3RhcnRNaW51dGVzKSB7CiAgICAgICAgICBub3dNaW51dGVzICs9IDI0ICogNjA7CiAgICAgICAgfQogICAgICAgIGVuZE1pbnV0ZXMgKz0gMjQgKiA2MDsKICAgICAgICByZXR1cm4gbm93TWludXRlcyA+IHN0YXJ0TWludXRlcyAmJiBub3dNaW51dGVzIDwgZW5kTWludXRlczsKICAgICAgfQogICAgfQoKICAgIC8qIEF1eCBmdW5jdGlvbiBmb3IgaXNUaW1lQmV0d2VlbigpICovCgogIH0sIHsKICAgIGtleTogJ2dldE1pbnV0ZXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1pbnV0ZXModGltZSkgewogICAgICB2YXIgdGltZVNwbGl0ID0gdGltZS5zcGxpdCgnOicpOwogICAgICByZXR1cm4gcGFyc2VJbnQodGltZVNwbGl0WzBdKSAqIDYwICsgcGFyc2VJbnQodGltZVNwbGl0WzFdKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdnZXRCbGFja0xpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEJsYWNrTGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLmJsYWNrTGlzdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdpc0NvbnRleHQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ29udGV4dCgpIHt9CiAgfSwgewogICAga2V5OiAnaXNIeXBlcnR5VHlwZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNIeXBlcnR5VHlwZSgpIHt9CgogICAgLyogQXV4IGZ1bmN0aW9uIGZvciBldmFsdWF0ZSgpICovCgogIH0sIHsKICAgIGtleTogJ2dldERlY2lzaW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZWNpc2lvbihyZXN1bHRzKSB7CiAgICAgIHJldHVybiByZXN1bHRzLmluZGV4T2YoZmFsc2UpID09PSAtMTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdhZGRUb0JsYWNrTGlzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVG9CbGFja0xpc3QodXNlcklEKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGlmIChfdGhpcy5ibGFja0xpc3QuaW5kZXhPZih1c2VySUQpID09PSAtMSkgewogICAgICAgIF90aGlzLmJsYWNrTGlzdC5wdXNoKHVzZXJJRCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdyZW1vdmVGcm9tQmxhY2tMaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVGcm9tQmxhY2tMaXN0KHVzZXJJRCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgYmxhY2tMaXN0ID0gX3RoaXMuYmxhY2tMaXN0OwogICAgICBmb3IgKHZhciBpIGluIGJsYWNrTGlzdCkgewogICAgICAgIGlmIChibGFja0xpc3RbaV0gPT09IHVzZXJJRCkgewogICAgICAgICAgYmxhY2tMaXN0LnNwbGljZShpLCAxKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ2FkZFRvV2hpdGVMaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRUb1doaXRlTGlzdCh1c2VySUQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKF90aGlzLmJsYWNrTGlzdC5pbmRleE9mKHVzZXJJRCkgPT09IC0xKSB7CiAgICAgICAgX3RoaXMud2hpdGVMaXN0LnB1c2godXNlcklEKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ3JlbW92ZUZyb21XaGl0ZUxpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZyb21XaGl0ZUxpc3QodXNlcklEKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciB3aGl0ZUxpc3QgPSBfdGhpcy53aGl0ZUxpc3Q7CiAgICAgIGZvciAodmFyIGkgaW4gd2hpdGVMaXN0KSB7CiAgICAgICAgaWYgKHdoaXRlTGlzdFtpXSA9PT0gdXNlcklEKSB7CiAgICAgICAgICB3aGl0ZUxpc3Quc3BsaWNlKGksIDEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUERQOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBQRFA7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTg5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCnZhciBQRVAgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUEVQKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBFUCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUEVQLCBbewogICAga2V5OiAiZW5mb3JjZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZW5mb3JjZSgpIHt9CiAgfSwgewogICAga2V5OiAic2VuZEF1dG9tYXRpY01lc3NhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRBdXRvbWF0aWNNZXNzYWdlKCkge30KICB9LCB7CiAgICBrZXk6ICJmb3J3YXJkVG9JRCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9yd2FyZFRvSUQoKSB7fQogIH0sIHsKICAgIGtleTogImZvcndhcmRUb0h5cGVydHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcndhcmRUb0h5cGVydHkoKSB7fQogIH1dKTsKCiAgcmV0dXJuIFBFUDsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUEVQOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDE5MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKdmFyIF9QRVAgPSByZXF1aXJlKCcuL1BFUCcpOwoKdmFyIF9QRVAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUEVQKTsKCnZhciBfUERQID0gcmVxdWlyZSgnLi9QRFAnKTsKCnZhciBfUERQMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BEUCk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovLyBpbXBvcnQgUG9saWN5IGZyb20gJy4vUG9saWN5JzsKCnZhciBQb2xpY3lFbmdpbmUgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUG9saWN5RW5naW5lKGlkZW50aXR5TW9kdWxlLCBydW50aW1lUmVnaXN0cnkpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQb2xpY3lFbmdpbmUpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBfdGhpcy5pZE1vZHVsZSA9IGlkZW50aXR5TW9kdWxlOwogICAgX3RoaXMucmVnaXN0cnkgPSBydW50aW1lUmVnaXN0cnk7CiAgICBfdGhpcy5wZXAgPSBuZXcgX1BFUDIuZGVmYXVsdCgpOwogICAgX3RoaXMucGRwID0gbmV3IF9QRFAyLmRlZmF1bHQoKTsKICAgIF90aGlzLnBvbGljaWVzID0ge307CiAgfQoKICAvLyBUT0RPOiB2ZXJpZnkgZHVwbGljYXRlcwogIC8vIFRPRE86IGNvbmZsaWN0IGRldGVjdGlvbgoKCiAgX2NyZWF0ZUNsYXNzKFBvbGljeUVuZ2luZSwgW3sKICAgIGtleTogJ2FkZFBvbGljaWVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRQb2xpY2llcyhrZXksIHBvbGljaWVzKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGZvciAodmFyIGkgaW4gcG9saWNpZXMpIHsKICAgICAgICBpZiAoX3RoaXMucG9saWNpZXNba2V5XSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBfdGhpcy5wb2xpY2llc1trZXldID0gW107CiAgICAgICAgfQogICAgICAgIHZhciBleGlzdHMgPSBmYWxzZTsKICAgICAgICBmb3IgKHZhciBwb2xpY3kgaW4gX3RoaXMucG9saWNpZXNba2V5XSkgewogICAgICAgICAgaWYgKF90aGlzLnBvbGljaWVzW2tleV1bcG9saWN5XS5pZCA9PT0gcG9saWNpZXNbaV0uaWQpIHsKICAgICAgICAgICAgZXhpc3RzID0gdHJ1ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghZXhpc3RzKSB7CiAgICAgICAgICBfdGhpcy5wb2xpY2llc1trZXldLnB1c2gocG9saWNpZXNbaV0pOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8qc2ltdWxhdGUoa2V5KSB7CiAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgICB5dGUKICAgICAgbGV0IHBvbGljeTIgPSBuZXcgUG9saWN5KHBvbGljeS5pZCwgcG9saWN5LnNjb3BlLCBwb2xpY3kuY29uZGl0aW9uLAogICAgICAgIHBvbGljeS5hdXRob3Jpc2UsIHBvbGljeS5hY3Rpb25zKTsKICAgICAgIHBvbGljeSA9IHsKICAgICAgICBpZDogJ2FsbG93LXdoaXRlbGlzdGVkJywKICAgICAgICBzY29wZTogJ3VzZXInLAogICAgICAgIGNvbmRpdGlvbjogJ3doaXRlbGlzdGVkJ2MsCiAgICAgICAgYXV0aG9yaXNlOiB0cnVlLAogICAgICAgIGFjdGlvbnM6IFtdCiAgICAgIH07CiAgICAgIGxldCBwb2xpY3kzID0gbmV3IFBvbGljeShwb2xpY3kuaWQsIHBvbGljeS5zY29wZSwgcG9saWN5LmNvbmRpdGlvbiwKICAgICAgICBwb2xpY3kuYXV0aG9yaXNlLCBwb2xpY3kuYWN0aW9ucyk7CiAgICAgICBwb2xpY3kgPSB7CiAgICAgICAgaWQ6ICdibG9jay0wOC0yMCcsCiAgICAgICAgc2NvcGU6ICd1c2VyJywKICAgICAgICBjb25kaXRpb246ICd0aW1lIDA4OjAwIDIwOjAwJywKICAgICAgICBhdXRob3Jpc2U6IGZhbHNlLAogICAgICAgIGFjdGlvbnM6IFtdCiAgICAgIH07CiAgICAgIGxldCBwb2xpY3k0ID0gbmV3IFBvbGljeShwb2xpY3kuaWQsIHBvbGljeS5zY29wZSwgcG9saWN5LmNvbmRpdGlvbiwKICAgICAgICBwb2xpY3kuYXV0aG9yaXNlLCBwb2xpY3kuYWN0aW9ucyk7CiAgICAgICBfdGhpcy5hZGRQb2xpY2llcyhrZXksIFtwb2xpY3k0XSk7CiAgICB9Ki8KCiAgfSwgewogICAga2V5OiAncmVtb3ZlUG9saWNpZXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVBvbGljaWVzKGtleSwgcG9saWN5SWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGFsbFBvbGljaWVzID0gX3RoaXMucG9saWNpZXM7CgogICAgICBpZiAoa2V5IGluIGFsbFBvbGljaWVzKSB7CiAgICAgICAgaWYgKHBvbGljeUlkICE9PSAnYWxsJykgewogICAgICAgICAgdmFyIHBvbGljaWVzID0gYWxsUG9saWNpZXNba2V5XTsKICAgICAgICAgIHZhciBudW1Qb2xpY2llcyA9IHBvbGljaWVzLmxlbmd0aDsKCiAgICAgICAgICBmb3IgKHZhciBwb2xpY3kgPSAwOyBwb2xpY3kgPCBudW1Qb2xpY2llczsgcG9saWN5KyspIHsKICAgICAgICAgICAgaWYgKHBvbGljaWVzW3BvbGljeV0uaWQgPT09IHBvbGljeUlkKSB7CiAgICAgICAgICAgICAgcG9saWNpZXMuc3BsaWNlKHBvbGljeSwgMSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVsZXRlIF90aGlzLnBvbGljaWVzW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnYWRkVG9CbGFja0xpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFRvQmxhY2tMaXN0KHVzZXJJRCkgewogICAgICB0aGlzLnBkcC5hZGRUb0JsYWNrTGlzdCh1c2VySUQpOwogICAgfQogIH0sIHsKICAgIGtleTogJ3JlbW92ZUZyb21CbGFja0xpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZyb21CbGFja0xpc3QodXNlcklEKSB7CiAgICAgIHRoaXMucGRwLnJlbW92ZUZyb21CbGFja0xpc3QodXNlcklEKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdhZGRUb1doaXRlTGlzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVG9XaGl0ZUxpc3QodXNlcklEKSB7CiAgICAgIHRoaXMucGRwLmFkZFRvV2hpdGVMaXN0KHVzZXJJRCk7CiAgICB9CiAgfSwgewogICAga2V5OiAncmVtb3ZlRnJvbVdoaXRlTGlzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRnJvbVdoaXRlTGlzdCh1c2VySUQpIHsKICAgICAgdGhpcy5wZHAucmVtb3ZlRnJvbVdoaXRlTGlzdCh1c2VySUQpOwogICAgfQogIH0sIHsKICAgIGtleTogJ2F1dGhvcmlzZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXV0aG9yaXNlKG1lc3NhZ2UpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgLypsZXQgbWVzc2FnZSA9IHsgaWQ6IDEyMywgdHlwZTonUkVBRCcsIGZyb206J2h5cGVydHk6Ly91YS5wdC9hc2RmJywKICAgICAgICAgICAgICAgICAgICB0bzonZG9tYWluOi8vcmVnaXN0cnkudWEucHQvaHlwZXJ0eS1pbnN0YW5jZS91c2VyJyB9OwogICAgICBfdGhpcy5zaW11bGF0ZShtZXNzYWdlLmZyb20pOyovCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXMuaWRNb2R1bGUubG9naW5XaXRoUlAoJ2dvb2dsZSBpZGVudGl0eScsICdzY29wZScpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICB2YXIgYXNzZXJ0ZWRJRCA9IF90aGlzLmlkTW9kdWxlLmdldElkZW50aXRpZXMoKTsKCiAgICAgICAgICBpZiAoIW1lc3NhZ2UuaGFzT3duUHJvcGVydHkoJ2JvZHknKSkgewogICAgICAgICAgICBtZXNzYWdlLmJvZHkgPSB7fTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgaHlwZXJ0eVRvVmVyaWZ5ID0gdm9pZCAwOwogICAgICAgICAgaWYgKCFtZXNzYWdlLmJvZHkuaGFzT3duUHJvcGVydHkoJ2Fzc2VydGVkSWRlbnRpdHknKSkgewogICAgICAgICAgICBtZXNzYWdlLmJvZHkuYXNzZXJ0ZWRJZGVudGl0eSA9IGFzc2VydGVkSURbMF0uaWRlbnRpdHk7CiAgICAgICAgICAgIG1lc3NhZ2UuYm9keS5pZFRva2VuID0gdmFsdWU7CiAgICAgICAgICAgIGh5cGVydHlUb1ZlcmlmeSA9IG1lc3NhZ2UudG87CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBoeXBlcnR5VG9WZXJpZnkgPSBtZXNzYWdlLmZyb207CiAgICAgICAgICB9CgogICAgICAgICAgLyogVE9ETzogZ2V0IHNjb3BlIG9mIHRoZSBtZXNzYWdlICovCiAgICAgICAgICB2YXIgc2NvcGUgPSAndXNlcic7CgogICAgICAgICAgdmFyIGFwcGxpY2FibGVQb2xpY2llcyA9IF90aGlzLmdldEFwcGxpY2FibGVQb2xpY2llcyhzY29wZSk7CiAgICAgICAgICB2YXIgcG9saWNpZXNSZXN1bHQgPSB2b2lkIDA7CiAgICAgICAgICBpZiAoaHlwZXJ0eVRvVmVyaWZ5LnNwbGl0KCc6JylbMF0gPT09ICdoeXBlcnR5JykgewogICAgICAgICAgICBwb2xpY2llc1Jlc3VsdCA9IF90aGlzLnBkcC5ldmFsdWF0ZShfdGhpcy5yZWdpc3RyeSwgbWVzc2FnZSwgaHlwZXJ0eVRvVmVyaWZ5LCBhcHBsaWNhYmxlUG9saWNpZXMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcG9saWNpZXNSZXN1bHQgPSBbdHJ1ZSwgW11dOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzLnBlcC5lbmZvcmNlKHBvbGljaWVzUmVzdWx0WzFdKTsKCiAgICAgICAgICBpZiAocG9saWNpZXNSZXN1bHRbMF0pIHsKICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChtZXNzYWdlKTsKICAgICAgICAgIH0KICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2dldEFwcGxpY2FibGVQb2xpY2llcycsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXBwbGljYWJsZVBvbGljaWVzKHNjb3BlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBhcHBsaWNhYmxlUG9saWNpZXMgPSBfdGhpcy5wb2xpY2llc1tzY29wZV07CiAgICAgIGlmIChhcHBsaWNhYmxlUG9saWNpZXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIGFwcGxpY2FibGVQb2xpY2llcyA9IFtdOwogICAgICB9CiAgICAgIHJldHVybiBhcHBsaWNhYmxlUG9saWNpZXM7CiAgICB9CiAgfSwgewogICAga2V5OiAnZ2V0QmxhY2tMaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRCbGFja0xpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5wZHAuZ2V0QmxhY2tMaXN0KCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUG9saWN5RW5naW5lOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBQb2xpY3lFbmdpbmU7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4vUERQIjoxODgsIi4vUEVQIjoxODl9XSwxOTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLy8gaW1wb3J0IE1lc3NhZ2VGYWN0b3J5IGZyb20gJy4uLy4uL3Jlc291cmNlcy9NZXNzYWdlRmFjdG9yeSc7CgovKioKICogQ2xhc3Mgd2lsbCBhc2sgdG8gdGhlIG1lc3NhZ2Ugbm9kZSBmb3IgYWRkcmVzc2VzCiAqLwoKdmFyIEFkZHJlc3NBbGxvY2F0aW9uID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICBfdXJsOiBVUkwKICBfYnVzOiBNaW5pQnVzCiAgKi8KCiAgLyoqCiAgICogQ3JlYXRlIGFuIEFkZHJlc3MgQWxsb2NhdGlvbgogICAqIEBwYXJhbSAge1VSTC5VUkx9ICAgICAgdXJsIC0gdXJsIGZyb20gd2hvIGlzIHNlbmRpbmcgdGhlIG1lc3NhZ2UKICAgKiBAcGFyYW0gIHtNaW5pQnVzfSAgICAgIGJ1cyAtIE1pbmlCdXMgdXNlZCBmb3IgYWRkcmVzcyBhbGxvY2F0aW9uCiAgICovCgogIGZ1bmN0aW9uIEFkZHJlc3NBbGxvY2F0aW9uKHVybCwgYnVzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWRkcmVzc0FsbG9jYXRpb24pOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gbGV0IG1lc3NhZ2VGYWN0b3J5ID0gbmV3IE1lc3NhZ2VGYWN0b3J5KCk7CiAgICAvLwogICAgLy8gX3RoaXMuX21lc3NhZ2VGYWN0b3J5ID0gbWVzc2FnZUZhY3Rvcnk7CiAgICBfdGhpcy5fdXJsID0gdXJsOwogICAgX3RoaXMuX2J1cyA9IGJ1czsKICB9CgogIC8qKgogICAqIGdldCB0aGUgVVJMIHZhbHVlCiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdXJsIHZhbHVlOwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKEFkZHJlc3NBbGxvY2F0aW9uLCBbewogICAga2V5OiAnY3JlYXRlJywKCgogICAgLyoqCiAgICAgKiBBc2sgZm9yIGNyZWF0aW9uIG9mIGEgbnVtYmVyIG9mIEh5cGVydHkgYWRkcmVzc2VzLCB0byB0aGUgZG9tYWluIG1lc3NhZ2Ugbm9kZS4KICAgICAqIEBwYXJhbSAge0RvbWFpbn0gZG9tYWluIC0gRG9tYWluIG9mIHRoZSBtZXNzYWdlIG5vZGUuCiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IG51bWJlciAtIE51bWJlciBvZiBhZGRyZXNzZXMgdG8gcmVxdWVzdAogICAgICogQHJldHVybnMge1Byb21pc2U8SHlwZXJ0eVVSTD59ICBBIGxpc3Qgb2YgSHlwZXJ0eVVSTCdzCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUoZG9tYWluLCBudW1iZXIpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIGxldCBtZXNzYWdlRmFjdG9yeSA9IF90aGlzLl9tZXNzYWdlRmFjdG9yeTsKCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl91cmwsIHRvOiAnZG9tYWluOi8vbXNnLW5vZGUuJyArIGRvbWFpbiArICcvaHlwZXJ0eS1hZGRyZXNzLWFsbG9jYXRpb24nLAogICAgICAgIGJvZHk6IHsgdmFsdWU6IHsgbnVtYmVyOiBudW1iZXIgfSB9CiAgICAgIH07CgogICAgICAvLyBUT0RPOiBBcHBseSB0aGUgbWVzc2FnZSBmYWN0b3J5CiAgICAgIC8vIFRoZSBtc2ctbm9kZS12ZXJ0eCBzaG91bGQgYmUgY2hhbmdlZCB0aGUgYm9keSBmaWVsZCB0byByZWNlaXZlCiAgICAgIC8vIHRoZSBmb2xsb3dpbmcgZm9ybWF0IGJvZHk6IHt2YWx1ZToge251bWJlcjogbnVtYmVyfX0gYmVjYXVzZQogICAgICAvLyB0aGUgbWVzc2FnZSBpcyBnZW5lcmF0ZWQgaW4gdGhhdCB3YXkgYnkgdGhlIG1lc3NhZ2UgZmFjdG9yeTsKICAgICAgLy8gbGV0IG1zZyA9IG1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXF1ZXN0KF90aGlzLl91cmwsICdkb21haW46Ly9tc2ctbm9kZS4nICsgZG9tYWluICsgJy9oeXBlcnR5LWFkZHJlc3MtYWxsb2NhdGlvbicsICcnLCB7bnVtYmVyOiBudW1iZXJ9KTsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIC8vIFRPRE86IGNoYW5nZSB0aGlzIHJlc3BvbnNlIE1lc3NhZ2UgdXNpbmcgdGhlIE1lc3NhZ2VGYWN0b3J5CiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHJlc29sdmUocmVwbHkuYm9keS52YWx1ZS5hbGxvY2F0ZWQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ3VybCcsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3VybDsKICAgIH0KICB9XSk7CgogIHJldHVybiBBZGRyZXNzQWxsb2NhdGlvbjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gQWRkcmVzc0FsbG9jYXRpb247Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTkyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX1JlZ2lzdHJ5RGF0YU1vZGVsMiA9IHJlcXVpcmUoJy4vUmVnaXN0cnlEYXRhTW9kZWwnKTsKCnZhciBfUmVnaXN0cnlEYXRhTW9kZWwzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmVnaXN0cnlEYXRhTW9kZWwyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0KCi8qKgoqICAgQGF1dGhvcjogR2lsIERpYXMgKGdpbC5kaWFzQHRlY25pY28udWxpc2JvYS5wdCkKKiAgIEh5cGVydHlJbnN0YW5jZSBEYXRhIE1vZGVsIHVzZWQgdG8gbW9kZWwgaW5zdGFuY2VzIG9mIEh5cGVydGllcyBydW5uaW5nIGluIGRldmljZXMgYW5kIHNlcnZlcnMuCiovCgp2YXIgSHlwZXJ0eUluc3RhbmNlID0gZnVuY3Rpb24gKF9SZWdpc3RyeURhdGFNb2RlbCkgewogIF9pbmhlcml0cyhIeXBlcnR5SW5zdGFuY2UsIF9SZWdpc3RyeURhdGFNb2RlbCk7CgogIGZ1bmN0aW9uIEh5cGVydHlJbnN0YW5jZShpZCwgdXJsLCBkZXNjcmlwdG9yLCBoeXBlcnR5VVJMLCB1c2VyLCBndWlkLCBydW50aW1lLCBjb250ZXh0KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSHlwZXJ0eUluc3RhbmNlKTsKCiAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKEh5cGVydHlJbnN0YW5jZSkuY2FsbCh0aGlzLCBpZCwgdXJsLCBkZXNjcmlwdG9yKSk7CgogICAgdmFyIF90aGlzID0gX3RoaXMyOwogICAgX3RoaXMuX2h5cGVydHlVUkwgPSBoeXBlcnR5VVJMOwogICAgX3RoaXMuX3VzZXIgPSB1c2VyOwogICAgX3RoaXMuX2d1aWQgPSBndWlkOwogICAgX3RoaXMuX3J1bnRpbWUgPSBydW50aW1lOwogICAgX3RoaXMuX2NvbnRleHQgPSBjb250ZXh0OwogICAgcmV0dXJuIF90aGlzMjsKICB9CgogIF9jcmVhdGVDbGFzcyhIeXBlcnR5SW5zdGFuY2UsIFt7CiAgICBrZXk6ICd1c2VyJywKICAgIHNldDogZnVuY3Rpb24gc2V0KGlkZW50aXR5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLnVzZXIgPSBpZGVudGl0eTsKICAgIH0sCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl91c2VyOwogICAgfQogIH0sIHsKICAgIGtleTogJ2h5cGVydHlVUkwnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5faHlwZXJ0eVVSTDsKICAgIH0KICB9XSk7CgogIHJldHVybiBIeXBlcnR5SW5zdGFuY2U7Cn0oX1JlZ2lzdHJ5RGF0YU1vZGVsMy5kZWZhdWx0KTsKCmV4cG9ydHMuZGVmYXVsdCA9IEh5cGVydHlJbnN0YW5jZTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi9SZWdpc3RyeURhdGFNb2RlbCI6MTk0fV0sMTkzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX0V2ZW50RW1pdHRlcjIgPSByZXF1aXJlKCcuLi91dGlscy9FdmVudEVtaXR0ZXInKTsKCnZhciBfRXZlbnRFbWl0dGVyMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0V2ZW50RW1pdHRlcjIpOwoKdmFyIF9BZGRyZXNzQWxsb2NhdGlvbiA9IHJlcXVpcmUoJy4vQWRkcmVzc0FsbG9jYXRpb24nKTsKCnZhciBfQWRkcmVzc0FsbG9jYXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQWRkcmVzc0FsbG9jYXRpb24pOwoKdmFyIF9IeXBlcnR5SW5zdGFuY2UgPSByZXF1aXJlKCcuL0h5cGVydHlJbnN0YW5jZScpOwoKdmFyIF9IeXBlcnR5SW5zdGFuY2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSHlwZXJ0eUluc3RhbmNlKTsKCnZhciBfc2VydmljZUZyYW1ld29yayA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrJyk7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMuanMnKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0KCi8qKgoqIFJ1bnRpbWUgUmVnaXN0cnkgSW50ZXJmYWNlCiovCgp2YXIgUmVnaXN0cnkgPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikgewogIF9pbmhlcml0cyhSZWdpc3RyeSwgX0V2ZW50RW1pdHRlcik7CgogIC8qKgogICogVG8gaW5pdGlhbGlzZSB0aGUgUnVudGltZSBSZWdpc3RyeSB3aXRoIHRoZSBSdW50aW1lVVJMIHRoYXQgd2lsbCBiZSB0aGUgYmFzaXMgdG8gZGVyaXZlIHRoZSBpbnRlcm5hbCBydW50aW1lIGFkZHJlc3NlcyB3aGVuIGFsbG9jYXRpbmcgYWRkcmVzc2VzIHRvIGludGVybmFsIHJ1bnRpbWUgY29tcG9uZW50LiBJbiBhZGRpdGlvbiwgdGhlIFJlZ2lzdHJ5IGRvbWFpbiBiYWNrLWVuZCB0byBiZSB1c2VkIHRvIHJlbW90ZWx5IHJlZ2lzdGVyIFJ1bnRpbWUgY29tcG9uZW50cywgaXMgYWxzbyBwYXNzZWQgYXMgaW5wdXQgcGFyYW1ldGVyLgogICogQHBhcmFtICB7TWVzc2FnZUJ1c30gICAgICAgICAgbXNnYnVzICAgICAgICAgICAgICAgIG1zZ2J1cwogICogQHBhcmFtICB7SHlwZXJ0eVJ1bnRpbWVVUkx9ICAgcnVudGltZVVSTCAgICAgICAgICAgIHJ1bnRpbWVVUkwKICAqIEBwYXJhbSAge0FwcFNhbmRib3h9ICAgICAgICAgIGFwcFNhbmRib3ggICAgICAgICAgICBhcHBTYW5kYm94CiAgKiBAcGFyYW0gIHtEb21haW5VUkx9ICAgICAgICAgICByZW1vdGVSZWdpc3RyeSAgICAgICAgcmVtb3RlUmVnaXN0cnkKICAqLwoKICBmdW5jdGlvbiBSZWdpc3RyeShydW50aW1lVVJMLCBhcHBTYW5kYm94LCBpZGVudGl0eU1vZHVsZSwgcmVtb3RlUmVnaXN0cnkpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWdpc3RyeSk7CgogICAgLy8gaG93IHNvbWUgZnVuY3Rpb25zIHJlY2VpdmUgdGhlIHBhcmFtZXRlcnMgZm9yIGV4YW1wbGU6CiAgICAvLyBuZXcgUmVnaXN0cnkoJ2h5cGVydHktcnVudGltZTovL3NwMS8xMjMnLCBhcHBTYW5kYm94LCBpZE1vZHVsZSwgcmVtb3RlUmVnaXN0cnkpOwogICAgLy8gcmVnaXN0cnkucmVnaXN0ZXJTdHViKHNhbmRib3gsICdzcDEnKTsKICAgIC8vIHJlZ2lzdHJ5LnJlZ2lzdGVySHlwZXJ0eShzYW5kQm94LCAnaHlwZXJ0eS1ydW50aW1lOi8vc3AxLzEyMycpOwogICAgLy8gcmVnaXN0cnkucmVzb2x2ZSgnaHlwZXJ0eS1ydW50aW1lOi8vc3AxLzEyMycpOwoKICAgIHZhciBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUmVnaXN0cnkpLmNhbGwodGhpcykpOwoKICAgIGlmICghcnVudGltZVVSTCkgdGhyb3cgbmV3IEVycm9yKCdydW50aW1lVVJMIGlzIG1pc3NpbmcuJyk7CiAgICAvKmlmICghcmVtb3RlUmVnaXN0cnkpIHRocm93IG5ldyBFcnJvcigncmVtb3RlUmVnaXN0cnkgaXMgbWlzc2luZycpOyovCgogICAgdmFyIF90aGlzID0gX3RoaXMyOwoKICAgIF90aGlzLnJlZ2lzdHJ5VVJMID0gcnVudGltZVVSTCArICcvcmVnaXN0cnkvMTIzJzsKICAgIF90aGlzLmFwcFNhbmRib3ggPSBhcHBTYW5kYm94OwogICAgX3RoaXMucnVudGltZVVSTCA9IHJ1bnRpbWVVUkw7CiAgICBfdGhpcy5yZW1vdGVSZWdpc3RyeSA9IHJlbW90ZVJlZ2lzdHJ5OwogICAgX3RoaXMuaWRNb2R1bGUgPSBpZGVudGl0eU1vZHVsZTsKICAgIF90aGlzLmlkZW50aWZpZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCArIDEpOwoKICAgIF90aGlzLmh5cGVydGllc0xpc3RUb1JlbW92ZSA9IHt9OwogICAgX3RoaXMuaHlwZXJ0aWVzTGlzdCA9IFtdOwogICAgX3RoaXMucHJvdG9zdHVic0xpc3QgPSB7fTsKICAgIF90aGlzLnNhbmRib3hlc0xpc3QgPSB7IHNhbmRib3g6IHt9LCBhcHBTYW5kYm94OiB7fSB9OwogICAgX3RoaXMucGVwTGlzdCA9IHt9OwoKICAgIF90aGlzLl9kb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkoX3RoaXMucmVnaXN0cnlVUkwpLmRvbWFpbjsKICAgIF90aGlzLnNhbmRib3hlc0xpc3QuYXBwU2FuZGJveFtydW50aW1lVVJMXSA9IGFwcFNhbmRib3g7CiAgICB2YXIgbXNnRmFjdG9yeSA9IG5ldyBfc2VydmljZUZyYW1ld29yay5NZXNzYWdlRmFjdG9yeSgnZmFsc2UnLCAne30nKTsKICAgIF90aGlzLm1lc3NhZ2VGYWN0b3J5ID0gbXNnRmFjdG9yeTsKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICAvKioKICAqIHJldHVybiB0aGUgbWVzc2FnZUJ1cyBpbiB0aGlzIFJlZ2lzdHJ5CiAgKiBAcGFyYW0ge01lc3NhZ2VCdXN9ICAgICAgICAgICBtZXNzYWdlQnVzCiAgKi8KCgogIF9jcmVhdGVDbGFzcyhSZWdpc3RyeSwgW3sKICAgIGtleTogJ2dldEFwcFNhbmRib3gnLAoKCiAgICAvKioKICAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHJldHVybiB0aGUgc2FuZGJveCBpbnN0YW5jZSB3aGVyZSB0aGUgQXBwbGljYXRpb24gaXMgZXhlY3V0aW5nLiBJdCBpcyBhc3N1bWVkIHRoZXJlIGlzIGp1c3Qgb25lIEFwcCBwZXIgUnVudGltZSBpbnN0YW5jZS4KICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXBwU2FuZGJveCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLmFwcFNhbmRib3g7CiAgICB9CgogICAgLyoqCiAgICAqIEZ1bmN0aW9uIHRvIHF1ZXJ5IHRoZSBEb21haW4gcmVnaXN0cnksIHdpdGggYW4gdXNlciBlbWFpbC4KICAgICovCgogIH0sIHsKICAgIGtleTogJ2dldFVzZXJIeXBlcnR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVc2VySHlwZXJ0eShpZGVudGlmaWVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBpZGVudGl0eVVSTCA9IHZvaWQgMDsKICAgICAgdmFyIGVtYWlsID0gdm9pZCAwOwogICAgICBpZiAoaWRlbnRpZmllci5pbmRleE9mKCdAJykgPiAtMSkgewogICAgICAgIGlkZW50aXR5VVJMID0gJ3VzZXI6Ly8nICsgaWRlbnRpZmllci5zdWJzdHJpbmcoaWRlbnRpZmllci5pbmRleE9mKCdAJykgKyAxLCBpZGVudGlmaWVyLmxlbmd0aCkgKyAnLycgKyBpZGVudGlmaWVyLnN1YnN0cmluZygwLCBpZGVudGlmaWVyLmluZGV4T2YoJ0AnKSk7CiAgICAgICAgZW1haWwgPSBpZGVudGlmaWVyOwogICAgICB9IGVsc2UgewogICAgICAgIGlkZW50aXR5VVJMID0gaWRlbnRpZmllcjsKICAgICAgICBlbWFpbCA9ICgwLCBfdXRpbHMuZ2V0VXNlckVtYWlsRnJvbVVSTCkoaWRlbnRpZmllcik7CiAgICAgIH0KICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAnUkVBRCcsIGZyb206IF90aGlzLnJlZ2lzdHJ5VVJMLCB0bzogJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBfdGhpcy5fZG9tYWluICsgJy8nLCBib2R5OiB7IHJlc291cmNlOiBpZGVudGl0eVVSTCB9CiAgICAgIH07CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgLy9jb25zb2xlLmxvZygnTUVTU0FHRScsIHJlcGx5KTsKCiAgICAgICAgICB2YXIgaHlwZXJ0eSA9IHZvaWQgMDsKICAgICAgICAgIHZhciBtb3N0UmVjZW50ID0gdm9pZCAwOwogICAgICAgICAgdmFyIGxhc3RIeXBlcnR5ID0gdm9pZCAwOwogICAgICAgICAgdmFyIHZhbHVlID0gcmVwbHkuYm9keS52YWx1ZTsKICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXBseScsIHZhbHVlKTsKICAgICAgICAgIGZvciAoaHlwZXJ0eSBpbiB2YWx1ZSkgewogICAgICAgICAgICBpZiAodmFsdWVbaHlwZXJ0eV0ubGFzdE1vZGlmaWVkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBpZiAobW9zdFJlY2VudCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBtb3N0UmVjZW50ID0gbmV3IERhdGUodmFsdWVbaHlwZXJ0eV0ubGFzdE1vZGlmaWVkKTsKICAgICAgICAgICAgICAgIGxhc3RIeXBlcnR5ID0gaHlwZXJ0eTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIGh5cGVydHlEYXRlID0gbmV3IERhdGUodmFsdWVbaHlwZXJ0eV0ubGFzdE1vZGlmaWVkKTsKICAgICAgICAgICAgICAgIGlmIChtb3N0UmVjZW50LmdldFRpbWUoKSA8IGh5cGVydHlEYXRlLmdldFRpbWUoKSkgewogICAgICAgICAgICAgICAgICBtb3N0UmVjZW50ID0gaHlwZXJ0eURhdGU7CiAgICAgICAgICAgICAgICAgIGxhc3RIeXBlcnR5ID0gaHlwZXJ0eTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHZhciBoeXBlcnR5VVJMID0gbGFzdEh5cGVydHk7CgogICAgICAgICAgaWYgKGh5cGVydHlVUkwgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXR1cm4gcmVqZWN0KCdVc2VyIEh5cGVydHkgbm90IGZvdW5kJyk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGlkUGFja2FnZSA9IHsKICAgICAgICAgICAgaWQ6IGVtYWlsLAogICAgICAgICAgICBkZXNjcmlwdG9yOiB2YWx1ZVtoeXBlcnR5VVJMXS5kZXNjcmlwdG9yLAogICAgICAgICAgICBoeXBlcnR5VVJMOiBoeXBlcnR5VVJMCiAgICAgICAgICB9OwoKICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT0+IFJlZ2lzdGVySHlwZXJ0eSBtZXNzYWdlQnVuZGxlOiAnLCBpZFBhY2thZ2UpOwogICAgICAgICAgcmVzb2x2ZShpZFBhY2thZ2UpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogIGZ1bmN0aW9uIHRvIGRlbGV0ZSBhbiBoeXBlcnR5SW5zdGFuY2UgaW4gdGhlIERvbWFpbiBSZWdpc3RyeQogICAgKi8KCiAgfSwgewogICAga2V5OiAnZGVsZXRlSHlwZXJ0eUluc3RhbmNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVIeXBlcnR5SW5zdGFuY2UodXNlciwgaHlwZXJ0eUluc3RhbmNlKSB7CiAgICAgIC8vVE9ETyB3b3JraW5nIGJ1dCB0aGUgdXNlcgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1lc3NhZ2UgPSB7IHR5cGU6ICdERUxFVEUnLCBmcm9tOiBfdGhpcy5yZWdpc3RyeVVSTCwKICAgICAgICB0bzogJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBfdGhpcy5fZG9tYWluICsgJy8nLAogICAgICAgIGJvZHk6IHsgdmFsdWU6IHsgdXNlcjogdXNlciwgaHlwZXJ0eVVSTDogaHlwZXJ0eUluc3RhbmNlIH0gfSB9OwoKICAgICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZSBoeXBlcnR5IFJlcGx5JywgcmVwbHkpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogRnVuY3Rpb24gdG8gdXBkYXRlIGFuIEh5cGVydHkKICAgICovCgogIH0sIHsKICAgIGtleTogJ3VwZGF0ZUh5cGVydHlJbnN0YW5jZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlSHlwZXJ0eUluc3RhbmNlKHJlc291cmNlLCB2YWx1ZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1lc3NhZ2UgPSB7IHR5cGU6ICdVUERBVEUnLCBmcm9tOiBfdGhpcy5yZWdpc3RyeVVSTCwKICAgICAgICB0bzogJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBfdGhpcy5fZG9tYWluICsgJy8nLAogICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IHJlc291cmNlLCB2YWx1ZTogdmFsdWUgfSB9OwoKICAgICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdC5wb3N0TWVzc2FnZShtZXNzYWdlLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRlZCBoeXBlcnR5IHJlcGx5JywgcmVwbHkpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogVG8gcmVnaXN0ZXIgYSBuZXcgSHlwZXJ0eSBpbiB0aGUgcnVudGltZSB3aGljaCByZXR1cm5zIHRoZSBIeXBlcnR5VVJMIGFsbG9jYXRlZCB0byB0aGUgbmV3IEh5cGVydHkuCiAgICAqIEBwYXJhbSAge1NhbmRib3h9ICAgICAgICAgICAgIHNhbmRib3ggICAgICAgICAgICAgICBzYW5kYm94CiAgICAqIEBwYXJhbSAge0h5cGVydHlDYXRhbG9ndWVVUkx9IEh5cGVydHlDYXRhbG9ndWVVUkwgICBkZXNjcmlwdG9yCiAgICAqIEByZXR1cm4ge0h5cGVydHlVUkx9ICAgICAgICAgIEh5cGVydHlVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlZ2lzdGVySHlwZXJ0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJIeXBlcnR5KHNhbmRib3gsIGRlc2NyaXB0b3IpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vYXNzdW1pbmcgZGVzY3JpcHRvciBjb21lIGluIHRoaXMgZm9ybWF0LCB0aGUgc2VydmljZS1wcm92aWRlci1kb21haW4gdXJsIGlzIHJldHJpZXZlZCBieSBhIHNwbGl0IGluc3RydWN0aW9uCiAgICAgIC8vaHlwZXJ0eS1jYXRhbG9ndWU6Ly88c2VydmljZS1wcm92aWRlci1kb21haW4+LzxjYXRhbG9ndWUtb2JqZWN0LWlkZW50aWZpZXI+CiAgICAgIHZhciBkb21haW5VcmwgPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkoZGVzY3JpcHRvcikuZG9tYWluOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgX3RoaXMuaWRNb2R1bGUubG9naW5XaXRoUlAoJ2dvb2dsZScsICdtZScpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgdmFyIGVtYWlsID0gcmVzdWx0LmVtYWlsOwogICAgICAgICAgdmFyIGlkZW50aXR5VVJMID0gJ3VzZXI6Ly8nICsgZW1haWwuc3Vic3RyaW5nKGVtYWlsLmluZGV4T2YoJ0AnKSArIDEsIGVtYWlsLmxlbmd0aCkgKyAnLycgKyBlbWFpbC5zdWJzdHJpbmcoMCwgZW1haWwuaW5kZXhPZignQCcpKTsKCiAgICAgICAgICBpZiAoX3RoaXMuX21lc3NhZ2VCdXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZWplY3QoJ01lc3NhZ2VCdXMgbm90IGZvdW5kIG9uIHJlZ2lzdGVyU3R1YicpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy9jYWxsIGNoZWNrIGlmIHRoZSBwcm90b3N0dWIgZXhpc3QKICAgICAgICAgICAgX3RoaXMucmVzb2x2ZSgnaHlwZXJ0eS1ydW50aW1lOi8vJyArIGRvbWFpblVybCkudGhlbihmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgIF90aGlzLnJlZ2lzdHJ5RG9tYWluID0gZG9tYWluVXJsOwoKICAgICAgICAgICAgICAvLyBUT0RPOiBzaG91bGQgYmUgaW1wbGVtZW50ZWQgd2l0aCBhZGRyZXNzZXMgcG9sbAogICAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSB3ZSB3aWxsIHJlcXVlc3QgYW5kIHJldHVybiBvbmx5IG9uZQogICAgICAgICAgICAgIC8vIGFkZHJlc3MKICAgICAgICAgICAgICB2YXIgbnVtYmVyT2ZBZGRyZXNzZXMgPSAxOwogICAgICAgICAgICAgIF90aGlzLmFkZHJlc3NBbGxvY2F0aW9uLmNyZWF0ZShkb21haW5VcmwsIG51bWJlck9mQWRkcmVzc2VzKS50aGVuKGZ1bmN0aW9uIChhZGRlcmVzc0xpc3QpIHsKCiAgICAgICAgICAgICAgICBhZGRlcmVzc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAoYWRkcmVzcykgewoKICAgICAgICAgICAgICAgICAgX3RoaXMuX21lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoYWRkcmVzcyArICcvc3RhdHVzJywgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNZXNzYWdlIGFkZExpc3RlbmVyIGZvciA6ICcsIGFkZHJlc3MgKyAnL3N0YXR1cyAtPiAnICsgbXNnKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB2YXIgaHlwZXJ0eSA9IG5ldyBfSHlwZXJ0eUluc3RhbmNlMi5kZWZhdWx0KF90aGlzLmlkZW50aWZpZXIsIF90aGlzLnJlZ2lzdHJ5VVJMLCBkZXNjcmlwdG9yLCBhZGRlcmVzc0xpc3RbMF0sIGlkZW50aXR5VVJMKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5oeXBlcnRpZXNMaXN0LnB1c2goaHlwZXJ0eSk7CgogICAgICAgICAgICAgICAgLy9jaGVjayB3aGV0aGVyIHRoZSByZWNlaXZlZCBzYW5ib3ggZSBBcHBsaWNhdGlvblNhbmRib3ggb3IgYSBub3JtYWwgc2FuZGJveAogICAgICAgICAgICAgICAgaWYgKHNhbmRib3gudHlwZSA9PT0gJ2FwcCcpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuc2FuZGJveGVzTGlzdC5hcHBTYW5kYm94W2FkZGVyZXNzTGlzdFswXV0gPSBzYW5kYm94OwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzYW5kYm94LnR5cGUgPT09ICdub3JtYWwnKSB7CgogICAgICAgICAgICAgICAgICBfdGhpcy5zYW5kYm94ZXNMaXN0LnNhbmRib3hbYWRkZXJlc3NMaXN0WzBdXSA9IHNhbmRib3g7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZWplY3QoJ1dyb25nIFNhbmRib3hUeXBlJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy9tZXNzYWdlIHRvIHJlZ2lzdGVyIHRoZSBuZXcgaHlwZXJ0eSwgd2l0aGluIHRoZSBkb21haW4gcmVnaXN0cnkKICAgICAgICAgICAgICAgIC8vVE9ETyB1bmNvbW1lbnQgYW5kIHJlbW92ZSB0aGUgbXNnIHZhcmlhYmxlIHdoZW4gdGhlIG1lc3NhZ2VGYWN0b3J5IGlzIHVwLgogICAgICAgICAgICAgICAgLypsZXQgbWVzc2FnZVZhbHVlID0ge3VzZXI6IGlkZW50aXR5VVJMLCAgaHlwZXJ0eURlc2NyaXB0b3JVUkw6IGRlc2NyaXB0b3IsIGh5cGVydHlVUkw6IGFkZGVyZXNzTGlzdFswXX07CiAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBfdGhpcy5tZXNzYWdlRmFjdG9yeS5jcmVhdGVDcmVhdGVNZXNzYWdlUmVxdWVzdCgKICAgICAgICAgICAgICAgICAgX3RoaXMucmVnaXN0cnlVUkwsCiAgICAgICAgICAgICAgICAgICdkb21haW46Ly9yZWdpc3RyeS4nICsgX3RoaXMucmVnaXN0cnlEb21haW4gKyAnLycsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2VWYWx1ZSwKICAgICAgICAgICAgICAgICAgJ3BvbGljeScKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbWVzc2FnZWZhY3RvcnknLCBtZXNzYWdlKTsqLwogICAgICAgICAgICAgICAgdmFyIG1zZyA9IHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ0NSRUFURScsIGZyb206IF90aGlzLnJlZ2lzdHJ5VVJMLCB0bzogJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBfdGhpcy5yZWdpc3RyeURvbWFpbiArICcvJywgYm9keTogeyB2YWx1ZTogeyB1c2VyOiBpZGVudGl0eVVSTCwgaHlwZXJ0eURlc2NyaXB0b3JVUkw6IGRlc2NyaXB0b3IsIGh5cGVydHlVUkw6IGFkZGVyZXNzTGlzdFswXSB9IH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbWVzc2FnZW5vcm1hbCcsIG1zZyk7CiAgICAgICAgICAgICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnPT09PiBSZWdpc3Rlckh5cGVydHkgUmVwbHk6ICcsIHJlcGx5KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJlc29sdmUoYWRkZXJlc3NMaXN0WzBdKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBZGRyZXNzIFJlYXNvbjogJywgcmVhc29uKTsKICAgICAgICAgICAgICByZWplY3QocmVhc29uKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgcmVqZWN0KCdGYWlsZWQgdG8gb2J0YWluIGFuIGlkZW50aXR5Jyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBUbyB1bnJlZ2lzdGVyIGEgcHJldmlvdXNseSByZWdpc3RlcmVkIEh5cGVydHkKICAgICogQHBhcmFtICB7SHlwZXJ0eVVSTH0gICAgICAgICAgSHlwZXJ0eVVSTCB1cmwgICAgICAgIHVybAogICAgKi8KCiAgfSwgewogICAga2V5OiAndW5yZWdpc3Rlckh5cGVydHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVucmVnaXN0ZXJIeXBlcnR5KHVybCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7CiAgICAgICAgdmFyIGluZGV4ID0gMDsKCiAgICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgX3RoaXMuaHlwZXJ0aWVzTGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgIHZhciBoeXBlcnR5ID0gX3RoaXMuaHlwZXJ0aWVzTGlzdFtpbmRleF07CiAgICAgICAgICBpZiAoaHlwZXJ0eSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGlmIChoeXBlcnR5Lmh5cGVydHlVUkwgPT09IHVybCkgewogICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGZvdW5kID09PSBmYWxzZSkgewogICAgICAgICAgcmVqZWN0KCdIeXBlcnR5IG5vdCBmb3VuZCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkZWxldGUgX3RoaXMuaHlwZXJ0aWVzTGlzdFtpbmRleF07CiAgICAgICAgICByZXNvbHZlKCdIeXBlcnR5IHN1Y2Nlc3NmdWxseSBkZWxldGVkJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogVG8gZGlzY292ZXIgcHJvdG9jb2wgc3R1YnMgYXZhaWxhYmxlIGluIHRoZSBydW50aW1lIGZvciBhIGNlcnRhaW4gZG9tYWluLiBJZiBhdmFpbGFibGUsIGl0IHJldHVybnMgdGhlIHJ1bnRpbWUgdXJsIGZvciB0aGUgcHJvdG9jb2wgc3R1YiB0aGF0IGNvbm5lY3RzIHRvIHRoZSByZXF1ZXN0ZWQgZG9tYWluLiBSZXF1aXJlZCBieSB0aGUgcnVudGltZSBCVVMgdG8gcm91dGUgbWVzc2FnZXMgdG8gcmVtb3RlIHNlcnZlcnMgb3IgcGVlcnMgKGRvIHdlIG5lZWQgc29tZXRoaW5nIHNpbWlsYXIgZm9yIEh5cGVydGllcz8pLgogICAgKiBAcGFyYW0gIHtEb21haW5VUkx9ICAgICAgICAgICBEb21haW5VUkwgICAgICAgICAgICB1cmwKICAgICogQHJldHVybiB7UnVudGltZVVSTH0gICAgICAgICAgIFJ1bnRpbWVVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ2Rpc2NvdmVyUHJvdG9zdHViJywKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb3ZlclByb3Rvc3R1Yih1cmwpIHsKICAgICAgaWYgKCF1cmwpIHRocm93IG5ldyBFcnJvcignUGFyYW1ldGVyIHVybCBuZWVkZWQnKTsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciByZXF1ZXN0ID0gX3RoaXMucHJvdG9zdHVic0xpc3RbdXJsXTsKCiAgICAgICAgaWYgKHJlcXVlc3QgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVqZWN0KCdyZXF1ZXN0VXBkYXRlIGNvdWxkblwnIGdldCB0aGUgUHJvdG9zdHViVVJMJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc29sdmUocmVxdWVzdCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFRvIHJlZ2lzdGVyIGEgbmV3IFByb3RvY29sIFN0dWIgaW4gdGhlIHJ1bnRpbWUgaW5jbHVkaW5nIGFzIGlucHV0IHBhcmFtZXRlcnMgdGhlIGZ1bmN0aW9uIHRvIHBvc3RNZXNzYWdlLCB0aGUgRG9tYWluVVJMIHRoYXQgaXMgY29ubmVjdGVkIHdpdGggdGhlIHN0dWIsIHdoaWNoIHJldHVybnMgdGhlIFJ1bnRpbWVVUkwgYWxsb2NhdGVkIHRvIHRoZSBuZXcgUHJvdG9jb2xTdHViLgogICAgICogQHBhcmFtIHtTYW5kYm94fSAgICAgICAgU2FuZGJveAogICAgICogQHBhcmFtICB7RG9tYWluVVJMfSAgICAgRG9tYWluVVJMIHNlcnZpY2UgcHJvdmlkZXIgZG9tYWluCiAgICAgKiBAcmV0dXJuIHtSdW50aW1lUHJvdG9TdHViVVJMfQogICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlZ2lzdGVyU3R1YicsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJTdHViKHNhbmRib3gsIGRvbWFpblVSTCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgcnVudGltZVByb3RvU3R1YlVSTCA9IHZvaWQgMDsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIC8vY2hlY2sgaWYgbWVzc2FnZUJ1cyBpcyByZWdpc3RlcmVkIGluIHJlZ2lzdHJ5IG9yIG5vdAogICAgICAgIGlmIChfdGhpcy5fbWVzc2FnZUJ1cyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZWplY3QoJ01lc3NhZ2VCdXMgbm90IGZvdW5kIG9uIHJlZ2lzdGVyU3R1YicpOwogICAgICAgIH0KCiAgICAgICAgLy9UT0RPIGltcGxlbWVudCBhIHVuaXF1ZSBudW1iZXIgZm9yIHRoZSBwcm90b3N0dWJVUkwKICAgICAgICBpZiAoIWRvbWFpblVSTC5pbmRleE9mKCdtc2ctbm9kZS4nKSkgewogICAgICAgICAgZG9tYWluVVJMID0gZG9tYWluVVJMLnN1YnN0cmluZyhkb21haW5VUkwuaW5kZXhPZignLicpICsgMSk7CiAgICAgICAgfQoKICAgICAgICBydW50aW1lUHJvdG9TdHViVVJMID0gJ21zZy1ub2RlLicgKyBkb21haW5VUkwgKyAnL3Byb3Rvc3R1Yi8nICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAgKyAxKTsKCiAgICAgICAgLy8gVE9ETzogT3B0aW1pemUgdGhpcwogICAgICAgIF90aGlzLnByb3Rvc3R1YnNMaXN0W2RvbWFpblVSTF0gPSBydW50aW1lUHJvdG9TdHViVVJMOwogICAgICAgIF90aGlzLnNhbmRib3hlc0xpc3Quc2FuZGJveFtydW50aW1lUHJvdG9TdHViVVJMXSA9IHNhbmRib3g7CgogICAgICAgIC8vIHNhbmRib3guYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbihtc2cpIHsKICAgICAgICAvLyAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgLy8gfSk7CgogICAgICAgIHJlc29sdmUocnVudGltZVByb3RvU3R1YlVSTCk7CgogICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKHJ1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cycsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgIGlmIChtc2cucmVzb3VyY2UgPT09IG1zZy50byArICcvc3RhdHVzJykgewogICAgICAgICAgICBjb25zb2xlLmxvZygnUnVudGltZVByb3Rvc3R1YlVSTC9zdGF0dXMgbWVzc2FnZTogJywgbXNnLmJvZHkudmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogVG8gdW5yZWdpc3RlciBhIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCBwcm90b2NvbCBzdHViCiAgICAqIEBwYXJhbSAge0h5cGVydHlSdW50aW1lVVJMfSAgIEh5cGVydHlSdW50aW1lVVJMICAgICBoeXBlcnR5UnVudGltZVVSTAogICAgKi8KCiAgfSwgewogICAga2V5OiAndW5yZWdpc3RlclN0dWInLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVucmVnaXN0ZXJTdHViKGh5cGVydHlSdW50aW1lVVJMKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBydW50aW1lUHJvdG9TdHViVVJMID0gdm9pZCAwOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdmFyIGRhdGEgPSBfdGhpcy5wcm90b3N0dWJzTGlzdFtoeXBlcnR5UnVudGltZVVSTF07CgogICAgICAgIGlmIChkYXRhID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJlamVjdCgnRXJyb3Igb24gdW5yZWdpc3RlclN0dWI6IEh5cGVydHkgbm90IGZvdW5kJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5wcm90b3N0dWJzTGlzdFtoeXBlcnR5UnVudGltZVVSTF07CiAgICAgICAgICByZXNvbHZlKCdQcm90b3N0dWJVUkwgcmVtb3ZlZCcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHJlZ2lzdGVyIGEgbmV3IFBvbGljeSBFbmZvcmNlciBpbiB0aGUgcnVudGltZSBpbmNsdWRpbmcgYXMgaW5wdXQgcGFyYW1ldGVycyB0aGUgZnVuY3Rpb24gdG8gcG9zdE1lc3NhZ2UsIHRoZSBIeXBlcnR5VVJMIGFzc29jaWF0ZWQgd2l0aCB0aGUgUEVQLCB3aGljaCByZXR1cm5zIHRoZSBSdW50aW1lVVJMIGFsbG9jYXRlZCB0byB0aGUgbmV3IFBvbGljeSBFbmZvcmNlciBjb21wb25lbnQuCiAgICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gcG9zdE1lc3NhZ2UgcG9zdE1lc3NhZ2UKICAgICogQHBhcmFtICB7SHlwZXJ0eVVSTH0gICAgICAgICAgSHlwZXJ0eVVSTCAgICAgICAgICAgIGh5cGVydHkKICAgICogQHJldHVybiB7SHlwZXJ0eVJ1bnRpbWVVUkx9ICAgSHlwZXJ0eVJ1bnRpbWVVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlZ2lzdGVyUEVQJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlclBFUChwb3N0TWVzc2FnZSwgaHlwZXJ0eSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAvL1RPRE8gY2hlY2sgd2hhdCBwYXJhbWV0ZXIgaW4gdGhlIHBvc3RNZXNzYWdlIHRoZSBwZXAgaXMuCiAgICAgICAgX3RoaXMucGVwTGlzdFtoeXBlcnR5XSA9IHBvc3RNZXNzYWdlOwogICAgICAgIHJlc29sdmUoJ1BFUCByZWdpc3RlcmVkIHdpdGggc3VjY2VzcycpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogVG8gdW5yZWdpc3RlciBhIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCBwcm90b2NvbCBzdHViCiAgICAqIEBwYXJhbSAge0h5cGVydHlSdW50aW1lVVJMfSAgIEh5cGVydHlSdW50aW1lVVJMICAgICBIeXBlcnR5UnVudGltZVVSTAogICAgKi8KCiAgfSwgewogICAga2V5OiAndW5yZWdpc3RlclBFUCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5yZWdpc3RlclBFUChIeXBlcnR5UnVudGltZVVSTCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdmFyIHJlc3VsdCA9IF90aGlzLnBlcExpc3RbSHlwZXJ0eVJ1bnRpbWVVUkxdOwoKICAgICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJlamVjdCgnUGVwIE5vdCBmb3VuZC4nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzb2x2ZSgnUEVQIHN1Y2Nlc3NmdWxseSByZW1vdmVkLicpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHJlY2VpdmUgc3RhdHVzIGV2ZW50cyBmcm9tIGNvbXBvbmVudHMgcmVnaXN0ZXJlZCBpbiB0aGUgUmVnaXN0cnkuCiAgICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gICAgIE1lc3NhZ2UuTWVzc2FnZSAgICAgICBldmVudAogICAgKi8KCiAgfSwgewogICAga2V5OiAnb25FdmVudCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25FdmVudChldmVudCkge30KICAgIC8vIFRPRE8gYm9keS4uLgoKCiAgICAvKioKICAgICogVG8gZGlzY292ZXIgc2FuZGJveGVzIGF2YWlsYWJsZSBpbiB0aGUgcnVudGltZSBmb3IgYSBjZXJ0YWluIGRvbWFpbi4gUmVxdWlyZWQgYnkgdGhlIHJ1bnRpbWUgVUEgdG8gYXZvaWQgbW9yZSB0aGFuIG9uZSBzYW5kYm94IGZvciB0aGUgc2FtZSBkb21haW4uCiAgICAqIEBwYXJhbSAge0RvbWFpblVSTH0gRG9tYWluVVJMIHVybAogICAgKiBAcmV0dXJuIHtSdW50aW1lU2FuZGJveH0gICAgICAgICAgIFJ1bnRpbWVTYW5kYm94CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRTYW5kYm94JywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTYW5kYm94KHVybCkgewogICAgICBpZiAoIXVybCkgdGhyb3cgbmV3IEVycm9yKCdQYXJhbWV0ZXIgdXJsIG5lZWRlZCcpOwogICAgICBjb25zb2xlLmxvZygnZ2V0U2FuZGJveDogJywgdXJsKTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciByZXF1ZXN0ID0gdm9pZCAwOwoKICAgICAgICAvL2ZpcnN0IHRyeSB0byBmaW5kIHRoZSB1cmwgaW4gdGhlIGFwcFNhbmRib3ggbGlzdAogICAgICAgIHJlcXVlc3QgPSBfdGhpcy5zYW5kYm94ZXNMaXN0LmFwcFNhbmRib3hbdXJsXTsKCiAgICAgICAgLy9pZiBubyBhcHBTYW5kYm94IHdhcyBmb3VuZCwgdHJ5IHRvIHNlYXJjaCBpbiB0aGUgbm9ybWFsIHNhbmRib3hlcyBsaXN0CiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7CiAgICAgICAgICByZXF1ZXN0ID0gX3RoaXMuc2FuZGJveGVzTGlzdC5zYW5kYm94W3VybF07CgogICAgICAgICAgaWYgKCFyZXF1ZXN0KSB7CgogICAgICAgICAgICB2YXIgZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKHVybCkuZG9tYWluOwoKICAgICAgICAgICAgLy8gc2VhcmNoIGluIHRoZSBzYW5kYm94ZXMgbGlzdCBmb3IgYSBlbnRyeSBjb250YWluaW5nIHRoZSBkb21haW4gZ2l2ZW4KICAgICAgICAgICAgZm9yICh2YXIgc2FuZGJveCBpbiBfdGhpcy5zYW5kYm94ZXNMaXN0LnNhbmRib3gpIHsKICAgICAgICAgICAgICBpZiAoc2FuZGJveC5pbmNsdWRlcyhkb21haW4pKSB7CiAgICAgICAgICAgICAgICByZXF1ZXN0ID0gX3RoaXMuc2FuZGJveGVzTGlzdC5zYW5kYm94W3NhbmRib3hdOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoIXJlcXVlc3QpIHsKICAgICAgICAgIHJlamVjdCgnbm8gc2FuZGJveCBmb3VuZCBmb3I6ICcgKyB1cmwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXNvbHZlKHJlcXVlc3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHZlcmlmeSBpZiBzb3VyY2UgaXMgdmFsaWQgYW5kIHRvIHJlc29sdmUgdGFyZ2V0IHJ1bnRpbWUgdXJsIGFkZHJlc3MgaWYgbmVlZGVkIChlZyBwcm90b3N0dWIgcnVudGltZSB1cmwgaW4gY2FzZSB0aGUgbWVzc2FnZSBpcyB0byBiZSBkaXNwYXRjaGVkIHRvIGEgcmVtb3RlIGVuZHBvaW50KS4KICAgICogQHBhcmFtICB7VVJMLlVSTH0gIHVybCAgICAgICB1cmwKICAgICogQHJldHVybiB7UHJvbWlzZTxVUkwuVVJMPn0gICAgICAgICAgICAgICAgIFByb21pc2UgPFVSTC5VUkw+CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZXNvbHZlJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlKHVybCkgewogICAgICBjb25zb2xlLmxvZygncmVzb2x2ZSAnICsgdXJsKTsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vc3BsaXQgdGhlIHVybCB0byBmaW5kIHRoZSBkb21haW5VUkwuIGRlYWxzIHdpdGggdGhlIHVybCBmb3IgZXhhbXBsZSBhczoKICAgICAgLy8iaHlwZXJ0eS1ydW50aW1lOi8vc3AxL3Byb3Rvc3R1Yi8xMjMiLAogICAgICB2YXIgZG9tYWluVXJsID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKHVybCkuZG9tYWluOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgaWYgKCFkb21haW5VcmwuaW5kZXhPZignbXNnLW5vZGUuJykgfHwgIWRvbWFpblVybC5pbmRleE9mKCdyZWdpc3RyeS4nKSkgewogICAgICAgICAgZG9tYWluVXJsID0gZG9tYWluVXJsLnN1YnN0cmluZyhkb21haW5VcmwuaW5kZXhPZignLicpICsgMSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVxdWVzdCA9IF90aGlzLnByb3Rvc3R1YnNMaXN0W2RvbWFpblVybF07CgogICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3J1bnRpbWU6c3R1YkxvYWRlZCcsIGZ1bmN0aW9uIChkb21haW5VcmwpIHsKICAgICAgICAgIHJlcXVlc3QgPSBfdGhpcy5wcm90b3N0dWJzTGlzdFtkb21haW5VcmxdOwogICAgICAgICAgY29uc29sZS5pbmZvKCdSZXNvbHZlZDogJywgcmVxdWVzdCk7CiAgICAgICAgICByZXNvbHZlKHJlcXVlc3QpOwogICAgICAgIH0pOwoKICAgICAgICBpZiAocmVxdWVzdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJ1Jlc29sdmVkOiAnLCByZXF1ZXN0KTsKICAgICAgICAgIHJlc29sdmUocmVxdWVzdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ3J1bnRpbWU6bG9hZFN0dWInLCBkb21haW5VcmwpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnbWVzc2FnZUJ1cycsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl9tZXNzYWdlQnVzOwogICAgfQoKICAgIC8qKgogICAgKiBTZXQgdGhlIG1lc3NhZ2VCdXMgaW4gdGhpcyBSZWdpc3RyeQogICAgKiBAcGFyYW0ge01lc3NhZ2VCdXN9ICAgICAgICAgICBtZXNzYWdlQnVzCiAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQobWVzc2FnZUJ1cykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpcy5fbWVzc2FnZUJ1cyA9IG1lc3NhZ2VCdXM7CgogICAgICAvLyBJbnN0YWxsIEFkZHJlc3NBbGxvY2F0aW9uCiAgICAgIHZhciBhZGRyZXNzQWxsb2NhdGlvbiA9IG5ldyBfQWRkcmVzc0FsbG9jYXRpb24yLmRlZmF1bHQoX3RoaXMucmVnaXN0cnlVUkwsIG1lc3NhZ2VCdXMpOwogICAgICBfdGhpcy5hZGRyZXNzQWxsb2NhdGlvbiA9IGFkZHJlc3NBbGxvY2F0aW9uOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFJlZ2lzdHJ5Owp9KF9FdmVudEVtaXR0ZXIzLmRlZmF1bHQpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUmVnaXN0cnk7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uL3V0aWxzL0V2ZW50RW1pdHRlciI6MjAxLCIuLi91dGlscy91dGlscy5qcyI6MjAyLCIuL0FkZHJlc3NBbGxvY2F0aW9uIjoxOTEsIi4vSHlwZXJ0eUluc3RhbmNlIjoxOTIsInNlcnZpY2UtZnJhbWV3b3JrIjoxNjF9XSwxOTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiogICBAYXV0aG9yOiBHaWwgRGlhcyAoZ2lsLmRpYXNAdGVjbmljby51bGlzYm9hLnB0KQoqICAgUmVnaXN0cnkgRGF0YSBNb2RlbCBpbmNsdWRlcyBhbGwgT2JqZWN0cyB0byBiZSBoYW5kbGVkIGJ5IHRoZSBSZWdpc3RyeSBmdW5jdGlvbmFsaXR5IGluY2x1ZGluZwoqLwoKdmFyIFJlZ2lzdHJ5RGF0YU1vZGVsID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFJlZ2lzdHJ5RGF0YU1vZGVsKGlkLCB1cmwsIGRlc2NyaXB0b3IsIHN0YXJ0aW5nVGltZSwgbGFzdE1vZGlmaWVkLCBzdGF0dXMsIHN0dWJzLCBzdHVic0NvbmZpZ3VyYXRpb24pIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWdpc3RyeURhdGFNb2RlbCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5faWQgPSBpZDsKICAgIF90aGlzLl91cmwgPSB1cmw7CiAgICBfdGhpcy5fZGVzY3JpcHRvciA9IGRlc2NyaXB0b3I7CiAgICBfdGhpcy5fc3RhcnRpbmdUaW1lID0gc3RhcnRpbmdUaW1lOwogICAgX3RoaXMuX2xhc3RNb2RpZmllZCA9IGxhc3RNb2RpZmllZDsKICAgIF90aGlzLl9zdGF0dXMgPSBzdGF0dXM7CiAgICBfdGhpcy5fc3R1YnMgPSBzdHViczsKICAgIF90aGlzLl9zdHVic0NvbmZpZ3VyYXRpb24gPSBzdHVic0NvbmZpZ3VyYXRpb247CiAgfQoKICBfY3JlYXRlQ2xhc3MoUmVnaXN0cnlEYXRhTW9kZWwsIFt7CiAgICBrZXk6ICJpZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl9pZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cmwiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5fdXJsOwogICAgfQogIH0sIHsKICAgIGtleTogImRlc2NyaXB0b3IiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5fZGVzY3JpcHRvcjsKICAgIH0KICB9XSk7CgogIHJldHVybiBSZWdpc3RyeURhdGFNb2RlbDsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUmVnaXN0cnlEYXRhTW9kZWw7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTk1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7IC8vIFNlcnZpY2UgRnJhbWV3b3JrIGRlcGVuZGVjaWVzCgoKLy9NYWluIGRlcGVuZGVjaWVzCgoKdmFyIF9SdW50aW1lQ2F0YWxvZ3VlID0gcmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9SdW50aW1lQ2F0YWxvZ3VlJyk7Cgp2YXIgX1J1bnRpbWVDYXRhbG9ndWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUnVudGltZUNhdGFsb2d1ZSk7Cgp2YXIgX1JlZ2lzdHJ5ID0gcmVxdWlyZSgnLi4vcmVnaXN0cnkvUmVnaXN0cnknKTsKCnZhciBfUmVnaXN0cnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmVnaXN0cnkpOwoKdmFyIF9JZGVudGl0eU1vZHVsZSA9IHJlcXVpcmUoJy4uL2lkZW50aXR5L0lkZW50aXR5TW9kdWxlJyk7Cgp2YXIgX0lkZW50aXR5TW9kdWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0lkZW50aXR5TW9kdWxlKTsKCnZhciBfUG9saWN5RW5naW5lID0gcmVxdWlyZSgnLi4vcG9saWN5L1BvbGljeUVuZ2luZScpOwoKdmFyIF9Qb2xpY3lFbmdpbmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUG9saWN5RW5naW5lKTsKCnZhciBfTWVzc2FnZUJ1cyA9IHJlcXVpcmUoJy4uL2J1cy9NZXNzYWdlQnVzJyk7Cgp2YXIgX01lc3NhZ2VCdXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWVzc2FnZUJ1cyk7Cgp2YXIgX0dyYXBoQ29ubmVjdG9yID0gcmVxdWlyZSgnLi4vZ3JhcGhjb25uZWN0b3IvR3JhcGhDb25uZWN0b3InKTsKCnZhciBfR3JhcGhDb25uZWN0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfR3JhcGhDb25uZWN0b3IpOwoKdmFyIF9TeW5jaGVyTWFuYWdlciA9IHJlcXVpcmUoJy4uL3N5bmNoZXIvU3luY2hlck1hbmFnZXInKTsKCnZhciBfU3luY2hlck1hbmFnZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3luY2hlck1hbmFnZXIpOwoKdmFyIF91dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzJyk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioKICogUnVudGltZSBVc2VyIEFnZW50IEludGVyZmFjZSB3aWxsIHByb2Nlc3MgYWxsIHRoZSBkZXBlbmRlY2llcyBvZiB0aGUgY29yZSBydW50aW1lOwogKiBAYXV0aG9yIFZpdG9yIFNpbHZhIFt2aXRvci10LXNpbHZhQHRlbGVjb20ucHRdCiAqIEB2ZXJzaW9uIDAuNC4wCiAqCiAqIEBwcm9wZXJ0eSB7cnVudGltZUZhY3Rvcnl9IHJ1bnRpbWVGYWN0b3J5IC0gU3BlY2lmaWMgaW1wbGVtZW50YXRpb24gb2Ygc2FuZGJveDsKICogQHByb3BlcnR5IHtSdW50aW1lQ2F0YWxvZ3VlfSBydW50aW1lQ2F0YWxvZ3VlIC0gQ2F0YWxvZ3VlIG9mIGNvbXBvbmVudHMgY2FuIGJlIGluc3RhbGxlZDsKICogQHByb3BlcnR5IHtydW50aW1lVVJMfSBydW50aW1lVVJMIC0gVGhpcyBpZGVudGlmeSB0aGUgY29yZSBydW50aW1lLCBzaG91bGQgYmUgdW5pcXVlOwogKiBAcHJvcGVydHkge0lkZW50aXR5TW9kdWxlfSBpZGVudGl0eU1vZHVsZSAtIElkZW50aXR5IE1vZHVsZTsKICogQHByb3BlcnR5IHtQb2xpY3lFbmdpbmV9IHBvbGljeUVuZ2luZSAtIFBvbGljeSBFbmdpbmUgTW9kdWxlOwogKiBAcHJvcGVydHkge1JlZ2lzdHJ5fSByZWdpc3RyeSAtIFJlZ2lzdHJ5IE1vZHVsZTsKICogQHByb3BlcnR5IHtNZXNzYWdlQnVzfSBtZXNzYWdlQnVzIC0gTWVzc2FnZSBCdXMgaXMgdXNlZCBsaWtlIGEgcm91dGVyIHRvIHJlZGlyZWN0IHRoZSBtZXNzYWdlcyBmcm9tIG9uZSBjb21wb25lbnQgdG8gb3RoZXIocykKICogQHByb3BlcnR5IHtHcmFwaENvbm5lY3Rvcn0gZ3JhcGhDb25uZWN0b3IgLSBHcmFwaCBDb25uZWN0b3IgaGFuZGxpbmcgR1VJRCBhbmQgY29udGFjdHMKICovCgp2YXIgUnVudGltZVVBID0gZnVuY3Rpb24gKCkgewoKICAvKioKICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgUnVudGltZSBVc2VyIEFnZW50CiAgICogQHBhcmFtIHtydW50aW1lRmFjdG9yeX0gcnVudGltZUZhY3RvcnkgLSBTcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIGVudmlyb25tZW50IHdoZXJlIHRoZSBjb3JlIHJ1bnRpbWUgd2lsbCBydW47CiAgICogQHBhcmFtIHtkb21haW59IGRvbWFpblVSTCAtIHNwZWNpZnkgdGhlIGRvbWFpbiBiYXNlIGZvciB0aGUgcnVudGltZTsKICAgKi8KCiAgZnVuY3Rpb24gUnVudGltZVVBKHJ1bnRpbWVGYWN0b3J5LCBkb21haW4pIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSdW50aW1lVUEpOwoKICAgIGlmICghcnVudGltZUZhY3RvcnkpIHRocm93IG5ldyBFcnJvcignVGhlIHNhbmRib3ggZmFjdG9yeSBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKICAgIGlmICghZG9tYWluKSB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBuZWVkIHRoZSBkb21haW4gb2YgcnVudGltZScpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMucnVudGltZUZhY3RvcnkgPSBydW50aW1lRmFjdG9yeTsKCiAgICBjb25zb2xlLmxvZyhfUnVudGltZUNhdGFsb2d1ZTIuZGVmYXVsdCk7CgogICAgX3RoaXMucnVudGltZUNhdGFsb2d1ZSA9IG5ldyBfUnVudGltZUNhdGFsb2d1ZTIuZGVmYXVsdChydW50aW1lRmFjdG9yeSk7CgogICAgLy8gVE9ETzogcG9zdCBhbmQgcmV0dXJuIHJlZ2lzdHJ5L2h5cGVydHlSdW50aW1lSW5zdGFuY2UgdG8gYW5kIGZyb20gQmFjay1lbmQgU2VydmljZQogICAgLy8gdGhlIHJlc3BvbnNlIGlzIGxpa2U6IHJ1bnRpbWU6Ly9zcDEvMTIzCgogICAgdmFyIHJ1bnRpbWVVUkwgPSAncnVudGltZTovLycgKyBkb21haW4gKyAnLycgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCArIDEpOwogICAgX3RoaXMucnVudGltZVVSTCA9IHJ1bnRpbWVVUkw7CiAgICBfdGhpcy5kb21haW4gPSBkb21haW47CgogICAgLy8gVE9ETzogY2hlY2sgaWYgcnVudGltZSBjYXRhbG9ndWUgbmVlZCB0aGUgcnVudGltZVVSTDsKICAgIF90aGlzLnJ1bnRpbWVDYXRhbG9ndWUucnVudGltZVVSTCA9IHJ1bnRpbWVVUkw7CgogICAgLy8gSW5zdGFudGlhdGUgdGhlIGlkZW50aXR5IE1vZHVsZQogICAgX3RoaXMuaWRlbnRpdHlNb2R1bGUgPSBuZXcgX0lkZW50aXR5TW9kdWxlMi5kZWZhdWx0KCk7CgogICAgLy8gVXNlIHRoZSBzYW5kYm94IGZhY3RvcnkgdG8gY3JlYXRlIGFuIEFwcFNhbmRib3g7CiAgICAvLyBJbiB0aGUgZnV0dXJlIGNhbiBiZSBkZWNpZGVkIGJ5IHBvbGljeUVuZ2luZSBpZiB3ZSBuZWVkCiAgICAvLyBjcmVhdGUgYSBBcHBTYW5kYm94IG9yIG5vdDsKICAgIHZhciBhcHBTYW5kYm94ID0gcnVudGltZUZhY3RvcnkuY3JlYXRlQXBwU2FuZGJveCgpOwoKICAgIC8vIEluc3RhbnRpYXRlIHRoZSBSZWdpc3RyeSBNb2R1bGUKICAgIF90aGlzLnJlZ2lzdHJ5ID0gbmV3IF9SZWdpc3RyeTIuZGVmYXVsdChydW50aW1lVVJMLCBhcHBTYW5kYm94LCBfdGhpcy5pZGVudGl0eU1vZHVsZSk7CgogICAgLy8gSW5zdGFudGlhdGUgdGhlIFBvbGljeSBFbmdpbmUKICAgIF90aGlzLnBvbGljeUVuZ2luZSA9IG5ldyBfUG9saWN5RW5naW5lMi5kZWZhdWx0KF90aGlzLmlkZW50aXR5TW9kdWxlLCBfdGhpcy5yZWdpc3RyeSk7CgogICAgLy8gSW5zdGFudGlhdGUgdGhlIE1lc3NhZ2UgQnVzCiAgICBfdGhpcy5tZXNzYWdlQnVzID0gbmV3IF9NZXNzYWdlQnVzMi5kZWZhdWx0KF90aGlzLnJlZ2lzdHJ5KTsKICAgIF90aGlzLm1lc3NhZ2VCdXMucGlwZWxpbmUuaGFuZGxlcnMgPSBbCgogICAgLy8gUG9saWN5IG1lc3NhZ2UgYXV0aG9yaXNlCiAgICBmdW5jdGlvbiAoY3R4KSB7CiAgICAgIF90aGlzLnBvbGljeUVuZ2luZS5hdXRob3Jpc2UoY3R4Lm1zZykudGhlbihmdW5jdGlvbiAoY2hhbmdlZE1ncykgewogICAgICAgIGN0eC5tc2cgPSBjaGFuZ2VkTWdzOwogICAgICAgIGN0eC5uZXh0KCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgICAgY3R4LmZhaWwocmVhc29uKTsKICAgICAgfSk7CiAgICB9XTsKCiAgICAvLyBBZGQgdG8gQXBwIFNhbmRib3ggdGhlIGxpc3RlbmVyOwogICAgYXBwU2FuZGJveC5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgfSk7CgogICAgLy8gUmVnaXN0ZXIgbWVzc2FnZUJ1cyBvbiBSZWdpc3RyeQogICAgX3RoaXMucmVnaXN0cnkubWVzc2FnZUJ1cyA9IF90aGlzLm1lc3NhZ2VCdXM7CgogICAgX3RoaXMucmVnaXN0cnkuYWRkRXZlbnRMaXN0ZW5lcigncnVudGltZTpsb2FkU3R1YicsIGZ1bmN0aW9uIChkb21haW5VUkwpIHsKCiAgICAgIF90aGlzLmxvYWRTdHViKGRvbWFpblVSTCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMucmVnaXN0cnkudHJpZ2dlcigncnVudGltZTpzdHViTG9hZGVkJywgZG9tYWluVVJMKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTsKICAgICAgfSk7CiAgICB9KTsKCiAgICAvLyBVc2Ugc2FuZGJveCBmYWN0b3J5IHRvIHVzZSBzcGVjaWZpYyBtZXRob2RzCiAgICAvLyBhbmQgc2V0IHRoZSBtZXNzYWdlIGJ1cyB0byB0aGUgZmFjdG9yeQogICAgcnVudGltZUZhY3RvcnkubWVzc2FnZUJ1cyA9IF90aGlzLm1lc3NhZ2VCdXM7CgogICAgLy8gSW5zdGFuY2lhdGUgdGhlIFN5bmNoZXJNYW5hZ2VyOwogICAgX3RoaXMuc3luY2hlck1hbmFnZXIgPSBuZXcgX1N5bmNoZXJNYW5hZ2VyMi5kZWZhdWx0KF90aGlzLnJ1bnRpbWVVUkwsIF90aGlzLm1lc3NhZ2VCdXMsIHt9LCBfdGhpcy5ydW50aW1lQ2F0YWxvZ3VlKTsKCiAgICAvLyBJbnN0YW50aWF0ZSB0aGUgR3JhcGggQ29ubmVjdG9yCiAgICBfdGhpcy5ncmFwaENvbm5lY3RvciA9IG5ldyBfR3JhcGhDb25uZWN0b3IyLmRlZmF1bHQoX3RoaXMucnVudGltZVVSTCwgX3RoaXMubWVzc2FnZUJ1cyk7CiAgfQoKICAvKioKICAqIEFjY29tb2RhdGUgaW50ZXJvcGVyYWJpbGl0eSBpbiBIMkggYW5kIHByb3RvIG9uIHRoZSBmbHkgZm9yIG5ld2x5IGRpc2NvdmVyZWQgZGV2aWNlcyBpbiBNMk0KICAqIEBwYXJhbSAge0NhdGFsb2d1ZURhdGFPYmplY3QuSHlwZXJ0eURlc2NyaXB0b3J9ICAgZGVzY3JpcHRvciAgICBkZXNjcmlwdG9yCiAgKi8KCgogIF9jcmVhdGVDbGFzcyhSdW50aW1lVUEsIFt7CiAgICBrZXk6ICdkaXNjb3ZlckhpcGVydHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2NvdmVySGlwZXJ0eShkZXNjcmlwdG9yKSB7fQogICAgLy8gQm9keS4uLgoKCiAgICAvKioKICAgICogUmVnaXN0ZXIgSHlwZXJ0eSBkZXBsb3llZCBieSB0aGUgQXBwIHRoYXQgaXMgcGFzc2VkIGFzIGlucHV0IHBhcmFtZXRlci4gVG8gYmUgdXNlZCB3aGVuIEFwcCBhbmQgSHlwZXJ0aWVzIGFyZSBmcm9tIHRoZSBzYW1lIGRvbWFpbiBvdGhlcndpc2UgdGhlIFJ1bnRpbWVVQSB3aWxsIHJhaXNlIGFuIGV4Y2VwdGlvbiBhbmQgdGhlIEFwcCBoYXMgdG8gdXNlIHRoZSBsb2FkSHlwZXJ0eSguLikgZnVuY3Rpb24uCiAgICAqIEBwYXJhbSAge09iamVjdH0gT2JqZWN0ICAgICAgICAgICAgICAgICAgIGh5cGVydHlJbnN0YW5jZQogICAgKiBAcGFyYW0gIHtVUkwuSHlwZXJ0eUNhdGFsb2d1ZVVSTH0gICAgICAgICBkZXNjcmlwdG9yICAgICAgZGVzY3JpcHRvcgogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVnaXN0ZXJIeXBlcnR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3Rlckh5cGVydHkoaHlwZXJ0eUluc3RhbmNlLCBkZXNjcmlwdG9yKSB7fQogICAgLy8gQm9keS4uLgoKCiAgICAvKioKICAgICogRGVwbG95IEh5cGVydHkgZnJvbSBDYXRhbG9ndWUgVVJMCiAgICAqIEBwYXJhbSAge1VSTC5IeXBlcnR5Q2F0YWxvZ3VlVVJMfSAgICBoeXBlcnR5IGh5cGVydHlEZXNjcmlwdG9yIHVybDsKICAgICovCgogIH0sIHsKICAgIGtleTogJ2xvYWRIeXBlcnR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkSHlwZXJ0eShoeXBlcnR5RGVzY3JpcHRvclVSTCkgewoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghaHlwZXJ0eURlc2NyaXB0b3JVUkwpIHRocm93IG5ldyBFcnJvcignSHlwZXJ0eSBkZXNjcmlwdG9yIHVybCBwYXJhbWV0ZXIgaXMgbmVlZGVkJyk7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICB2YXIgX2h5cGVydHlVUkwgPSB2b2lkIDA7CiAgICAgICAgdmFyIF9oeXBlcnR5U2FuZGJveCA9IHZvaWQgMDsKICAgICAgICB2YXIgX2h5cGVydHlEZXNjcmlwdG9yID0gdm9pZCAwOwogICAgICAgIHZhciBfaHlwZXJ0eVNvdXJjZVBhY2thZ2UgPSB2b2lkIDA7CgogICAgICAgIHZhciBlcnJvclJlYXNvbiA9IGZ1bmN0aW9uIGVycm9yUmVhc29uKHJlYXNvbikgewogICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgfTsKCiAgICAgICAgLy8gR2V0IEh5cGVydHkgZGVzY3JpcHRvcgogICAgICAgIC8vIFRPRE86IHRoZSByZXF1ZXN0IE1vZHVsZSBzaG91bGQgYmUgY2hhbmdlZCwKICAgICAgICAvLyBiZWNhdXNlIGF0IHRoaXMgbW9tZW50IGl0IGlzIGluY29tcGF0aWJsZSB3aXRoIG5vZGVqczsKICAgICAgICAvLyBQcm9iYWJseSB3ZSBuZWVkIHRvIHBhc3MgYSBmYWN0b3J5IGxpa2Ugd2UgZG8gZm9yIHNhbmRib3hlczsKICAgICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLSBIeXBlcnR5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpOwogICAgICAgIGNvbnNvbGUuaW5mbygnR2V0IGh5cGVydHkgZGVzY3JpcHRvciBmb3IgOicsIGh5cGVydHlEZXNjcmlwdG9yVVJMKTsKICAgICAgICBfdGhpcy5ydW50aW1lQ2F0YWxvZ3VlLmdldEh5cGVydHlEZXNjcmlwdG9yKGh5cGVydHlEZXNjcmlwdG9yVVJMKS50aGVuKGZ1bmN0aW9uIChoeXBlcnR5RGVzY3JpcHRvcikgewogICAgICAgICAgLy8gYXQgdGhpcyBwb2ludCwgd2UgaGF2ZSBjb21wbGV0ZWQgInN0ZXAgMiBhbmQgMyIgYXMgc2hvd24gaW4gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZAogICAgICAgICAgY29uc29sZS5pbmZvKCcxOiByZXR1cm4gaHlwZXJ0eSBkZXNjcmlwdG9yJywgaHlwZXJ0eURlc2NyaXB0b3IpOwoKICAgICAgICAgIC8vIGh5cGVydHkgY29udGFpbnMgdGhlIGZ1bGwgcGF0aCBvZiB0aGUgY2F0YWxvZ3VlIFVSTCwgZS5nLgogICAgICAgICAgLy8gY2F0YWxvZ3VlLnJldGhpbmsuZXUvLndlbGwta25vd24vLi4uLi4uLi4uLgogICAgICAgICAgX2h5cGVydHlEZXNjcmlwdG9yID0gaHlwZXJ0eURlc2NyaXB0b3I7CgogICAgICAgICAgdmFyIHNvdXJjZVBhY2thZ2VVUkwgPSBoeXBlcnR5RGVzY3JpcHRvci5zb3VyY2VQYWNrYWdlVVJMOwoKICAgICAgICAgIGlmIChzb3VyY2VQYWNrYWdlVVJMID09PSAnL3NvdXJjZVBhY2thZ2UnKSB7CiAgICAgICAgICAgIHJldHVybiBoeXBlcnR5RGVzY3JpcHRvci5zb3VyY2VQYWNrYWdlOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEdldCB0aGUgaHlwZXJ0eSBzb3VyY2UgY29kZQogICAgICAgICAgcmV0dXJuIF90aGlzLnJ1bnRpbWVDYXRhbG9ndWUuZ2V0U291cmNlUGFja2FnZUZyb21VUkwoc291cmNlUGFja2FnZVVSTCk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc291cmNlUGFja2FnZSkgewogICAgICAgICAgY29uc29sZS5pbmZvKCcyOiByZXR1cm4gaHlwZXJ0eSBzb3VyY2UgY29kZScpOwoKICAgICAgICAgIC8vIGF0IHRoaXMgcG9pbnQsIHdlIGhhdmUgY29tcGxldGVkICJzdGVwIDQgYW5kIDUiIGFzIHNob3duIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQKCiAgICAgICAgICBfaHlwZXJ0eVNvdXJjZVBhY2thZ2UgPSBzb3VyY2VQYWNrYWdlOwoKICAgICAgICAgIC8vCiAgICAgICAgICAvLyBzdGVwcyA2IC0tIDkgYXJlIHNraXBwZWQuCiAgICAgICAgICAvLyBUT0RPOiBvbiByZWxlYXNlIG9mIGNvcmUgMC4yOwogICAgICAgICAgLy8gVE9ETzogUHJvbWlzZSB0byBjaGVjayB0aGUgcG9saWN5IGVuZ2luZQoKICAgICAgICAgIC8vIG1vY2stdXAgY29kZTsKICAgICAgICAgIC8vIHRlbXBvcmFyeSBjb2RlLCBvbmx5CiAgICAgICAgICB2YXIgcG9saWN5ID0gdHJ1ZTsKCiAgICAgICAgICByZXR1cm4gcG9saWN5OwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHBvbGljeVJlc3VsdCkgewogICAgICAgICAgY29uc29sZS5pbmZvKCczOiByZXR1cm4gcG9saWN5IGVuZ2luZSByZXN1bHQ6ICcsIHBvbGljeVJlc3VsdCk7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCA2IHRvIDkgb2YgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZCByaWdodCBub3cuCiAgICAgICAgICAvLwogICAgICAgICAgLy8gU3RlcHMgNiAtLSA5CiAgICAgICAgICAvLyBBcyBhIHJlc3VsdCBvZiB0aGUgc2lwcGVkIHN0ZXBzLCB3ZSBrbm93IGF0IHRoaXMgcG9pbnQgaWYgd2UgZXhlY3V0ZQogICAgICAgICAgLy8gaW5TYW1lU2FuZGJveCBvciBub3QuCiAgICAgICAgICAvLwoKICAgICAgICAgIC8vIEZvciB0ZXN0aW5nLCBqdXN0IGFzc3VtZSB3ZSBleGVjdXRlIGluIHNhbWUgU2FuZGJveC4KICAgICAgICAgIHZhciBpblNhbWVTYW5kYm94ID0gdHJ1ZTsKICAgICAgICAgIHZhciBzYW5kYm94ID0gdm9pZCAwOwoKICAgICAgICAgIGlmIChpblNhbWVTYW5kYm94KSB7CgogICAgICAgICAgICAvLyB0aGlzIGRvbid0IG5lZWQgYmUgYSBQcm9taXNlOwogICAgICAgICAgICBzYW5kYm94ID0gX3RoaXMucmVnaXN0cnkuZ2V0QXBwU2FuZGJveCgpOwoKICAgICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAxMSBoZXJlLgogICAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICAgICAgdmFyIGRvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShoeXBlcnR5RGVzY3JpcHRvclVSTCkuZG9tYWluOwoKICAgICAgICAgICAgICAvLyBnZXRTYW5kYm94LCB0aGlzIHdpbGwgcmV0dXJuIGEgcHJvbWlzZTsKICAgICAgICAgICAgICBzYW5kYm94ID0gX3RoaXMucmVnaXN0cnkuZ2V0U2FuZGJveChkb21haW4pOwogICAgICAgICAgICB9CgogICAgICAgICAgLy8gdGhpcyB3aWxsIHJldHVybiB0aGUgc2FuZGJveCBvciBvbmUgcHJvbWlzZSB0byBnZXRTYW5kYm94OwogICAgICAgICAgcmV0dXJuIHNhbmRib3g7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc2FuZGJveCkgewogICAgICAgICAgY29uc29sZS5pbmZvKCc0OiByZXR1cm4gdGhlIHNhbmRib3gnLCBzYW5kYm94KTsKCiAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNhbmRib3ggaW5kZXBlbnRlbHkgaWYgaXQgcnVubmluZyBpbiB0aGUgc2FtZSBzYW5kYm94IG9yIG5vdAogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAxNCBoZXJlLgogICAgICAgICAgcmV0dXJuIHNhbmRib3g7CiAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgY29uc29sZS5lcnJvcignNC4xOiB0cnkgdG8gcmVnaXN0ZXIgYSBuZXcgc2FuZGJveCcsIHJlYXNvbik7CgogICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHNhbmRib3ggaXMgcmVnaXN0ZWQgZm9yIHRoaXMgaHlwZXJ0eSBkZXNjcmlwdG9yIHVybDsKICAgICAgICAgIC8vIE1ha2UgU3RlcHMgeHh4IC0tLSB4eHgKICAgICAgICAgIC8vIEluc3RhbnRpYXRlIHRoZSBTYW5kYm94CiAgICAgICAgICB2YXIgc2FuZGJveCA9IF90aGlzLnJ1bnRpbWVGYWN0b3J5LmNyZWF0ZVNhbmRib3goKTsKCiAgICAgICAgICBzYW5kYm94LmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm4gc2FuZGJveDsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChzYW5kYm94KSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJzU6IHJldHVybiBzYW5kYm94IGFuZCByZWdpc3RlcicpOwoKICAgICAgICAgIF9oeXBlcnR5U2FuZGJveCA9IHNhbmRib3g7CgogICAgICAgICAgLy8gUmVnaXN0ZXIgaHlwZXJ0eQogICAgICAgICAgcmV0dXJuIF90aGlzLnJlZ2lzdHJ5LnJlZ2lzdGVySHlwZXJ0eShzYW5kYm94LCBoeXBlcnR5RGVzY3JpcHRvclVSTCk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoaHlwZXJ0eVVSTCkgewogICAgICAgICAgY29uc29sZS5pbmZvKCc2OiBIeXBlcnR5IHVybCwgYWZ0ZXIgcmVnaXN0ZXIgaHlwZXJ0eScsIGh5cGVydHlVUkwpOwoKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMTYgb2YgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZCByaWdodCBub3cuCgogICAgICAgICAgX2h5cGVydHlVUkwgPSBoeXBlcnR5VVJMOwoKICAgICAgICAgIGNvbnNvbGUubG9nKF9oeXBlcnR5RGVzY3JpcHRvcik7CgogICAgICAgICAgLy8gRXh0ZW5kIG9yaWdpbmFsIGh5cGVydHkgY29uZmlndXJhdGlvbjsKICAgICAgICAgIHZhciBjb25maWd1cmF0aW9uID0ge307CiAgICAgICAgICBpZiAoISgwLCBfdXRpbHMuZW1wdHlPYmplY3QpKF9oeXBlcnR5RGVzY3JpcHRvci5jb25maWd1cmF0aW9uKSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBKU09OLnBhcnNlKF9oeXBlcnR5RGVzY3JpcHRvci5jb25maWd1cmF0aW9uKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25maWd1cmF0aW9uID0gX2h5cGVydHlEZXNjcmlwdG9yLmNvbmZpZ3VyYXRpb247CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucnVudGltZVVSTCA9IF90aGlzLnJ1bnRpbWVVUkw7CgogICAgICAgICAgLy8gV2Ugd2lsbCBkZXBsb3kgdGhlIGNvbXBvbmVudCAtIHN0ZXAgMTcgb2YgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZCByaWdodCBub3cuCiAgICAgICAgICByZXR1cm4gX2h5cGVydHlTYW5kYm94LmRlcGxveUNvbXBvbmVudChfaHlwZXJ0eVNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZSwgX2h5cGVydHlVUkwsIGNvbmZpZ3VyYXRpb24pOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRlcGxveUNvbXBvbmVudFN0YXR1cykgewogICAgICAgICAgY29uc29sZS5pbmZvKCc3OiBEZXBsb3kgY29tcG9uZW50IHN0YXR1cyBmb3IgaHlwZXJ0eTogJywgZGVwbG95Q29tcG9uZW50U3RhdHVzKTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDE5IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgoKICAgICAgICAgIC8vIEFkZCB0aGUgbWVzc2FnZSBidXMgbGlzdGVuZXIgdG8gdGhlIGFwcFNhbmRib3ggb3IgaHlwZXJ0U2FuZGJveDsKICAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoX2h5cGVydHlVUkwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgX2h5cGVydHlTYW5kYm94LnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDIwIG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgogICAgICAgICAgdmFyIGh5cGVydHkgPSB7CiAgICAgICAgICAgIHJ1bnRpbWVIeXBlcnR5VVJMOiBfaHlwZXJ0eVVSTCwKICAgICAgICAgICAgc3RhdHVzOiBkZXBsb3lDb21wb25lbnRTdGF0dXMKICAgICAgICAgIH07CgogICAgICAgICAgcmVzb2x2ZShoeXBlcnR5KTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDIxIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgogICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7CiAgICAgICAgfSkuY2F0Y2goZXJyb3JSZWFzb24pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogRGVwbG95IFN0dWIgZnJvbSBDYXRhbG9ndWUgVVJMIG9yIGRvbWFpbiB1cmwKICAgICogQHBhcmFtICB7VVJMLlVSTH0gICAgIGRvbWFpbiAgICAgICAgICBkb21haW4KICAgICovCgogIH0sIHsKICAgIGtleTogJ2xvYWRTdHViJywKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkU3R1Yihwcm90b3N0dWJVUkwpIHsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXByb3Rvc3R1YlVSTCkgdGhyb3cgbmV3IEVycm9yKCdkb21haW4gcGFyYW1ldGVyIGlzIG5lZWRlZCcpOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdmFyIGRvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShwcm90b3N0dWJVUkwpLmRvbWFpbjsKCiAgICAgICAgaWYgKCFkb21haW4pIHsKICAgICAgICAgIGRvbWFpbiA9IHByb3Rvc3R1YlVSTDsKICAgICAgICB9CgogICAgICAgIHZhciBfc3R1YlNhbmRib3ggPSB2b2lkIDA7CiAgICAgICAgdmFyIF9zdHViRGVzY3JpcHRvciA9IHZvaWQgMDsKICAgICAgICB2YXIgX3J1bnRpbWVQcm90b1N0dWJVUkwgPSB2b2lkIDA7CiAgICAgICAgdmFyIF9zdHViU291cmNlUGFja2FnZSA9IHZvaWQgMDsKCiAgICAgICAgdmFyIGVycm9yUmVhc29uID0gZnVuY3Rpb24gZXJyb3JSZWFzb24ocmVhc29uKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgICAgICByZWplY3QocmVhc29uKTsKICAgICAgICB9OwoKICAgICAgICAvLyBEaXNjb3ZlciBQcm90b2NvbCBTdHViCiAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tIFByb3RvU3R1YiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbicpOwogICAgICAgIGNvbnNvbGUuaW5mbygnRGlzY292ZXIgb3IgQ3JlYXRlIGEgbmV3IFByb3RvU3R1YiBmb3IgZG9tYWluOiAnLCBkb21haW4pOwogICAgICAgIF90aGlzLnJlZ2lzdHJ5LmRpc2NvdmVyUHJvdG9zdHViKGRvbWFpbikudGhlbihmdW5jdGlvbiAoZGVzY3JpcHRvcikgewogICAgICAgICAgLy8gSXMgcmVnaXN0ZWQ/CiAgICAgICAgICBjb25zb2xlLmluZm8oJzEuIFByb3RvIFN0dWIgRGlzY292ZXJlZDogJywgZGVzY3JpcHRvcik7CiAgICAgICAgICBfc3R1YkRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yOwoKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICByZXR1cm4gX3N0dWJEZXNjcmlwdG9yOwogICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIC8vIGlzIG5vdCByZWdpc3RlZD8KICAgICAgICAgIGNvbnNvbGUuaW5mbygnMS4gUHJvdG8gU3R1YiBub3QgZm91bmQ6JywgcmVhc29uKTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDMgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCgogICAgICAgICAgLy8gd2UgbmVlZCB0byBnZXQgUHJvdG9TdHViIGRlc2NyaXB0b3Igc3RlcCA0IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAogICAgICAgICAgcmV0dXJuIF90aGlzLnJ1bnRpbWVDYXRhbG9ndWUuZ2V0U3R1YkRlc2NyaXB0b3IocHJvdG9zdHViVVJMKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChzdHViRGVzY3JpcHRvcikgewoKICAgICAgICAgIGNvbnNvbGUuaW5mbygnMi4gcmV0dXJuIHRoZSBQcm90b1N0dWIgZGVzY3JpcHRvcjonLCBzdHViRGVzY3JpcHRvcik7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCA1IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAoKICAgICAgICAgIF9zdHViRGVzY3JpcHRvciA9IHN0dWJEZXNjcmlwdG9yOwoKICAgICAgICAgIHZhciBzb3VyY2VQYWNrYWdlVVJMID0gc3R1YkRlc2NyaXB0b3Iuc291cmNlUGFja2FnZVVSTDsKCiAgICAgICAgICBpZiAoc291cmNlUGFja2FnZVVSTCA9PT0gJy9zb3VyY2VQYWNrYWdlJykgewogICAgICAgICAgICByZXR1cm4gc3R1YkRlc2NyaXB0b3Iuc291cmNlUGFja2FnZTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGdldCBQcm90b1N0dWIgU291cmNlIGNvZGUgZnJvbSBkZXNjcmlwdG9yIC0gc3RlcCA2IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAogICAgICAgICAgcmV0dXJuIF90aGlzLnJ1bnRpbWVDYXRhbG9ndWUuZ2V0U291cmNlUGFja2FnZUZyb21VUkwoc291cmNlUGFja2FnZVVSTCk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc3R1YlNvdXJjZVBhY2thZ2UpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnMy4gcmV0dXJuIHRoZSBQcm90b1N0dWIgU291cmNlIENvZGU6ICcsIHN0dWJTb3VyY2VQYWNrYWdlKTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDcgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCgogICAgICAgICAgX3N0dWJTb3VyY2VQYWNrYWdlID0gc3R1YlNvdXJjZVBhY2thZ2U7CgogICAgICAgICAgLy8gVE9ETzogQ2hlY2sgb24gUEVQIChwb2xpY3kgRW5naW5lKSBpZiB3ZSBuZWVkIHRoZSBzYW5kYm94IGFuZCBjaGVjayBpZiB0aGUgU2FuZGJveCBGYWN0b3J5IGhhdmUgdGhlIGNvbnRleHQgc2FuZGJveDsKICAgICAgICAgIHZhciBwb2xpY3kgPSB0cnVlOwogICAgICAgICAgcmV0dXJuIHBvbGljeTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChwb2xpY3kpIHsKICAgICAgICAgIC8vIHRoaXMgd2lsbCByZXR1cm4gdGhlIHNhbmRib3ggb3Igb25lIHByb21pc2UgdG8gZ2V0U2FuZGJveDsKICAgICAgICAgIHJldHVybiBfdGhpcy5yZWdpc3RyeS5nZXRTYW5kYm94KGRvbWFpbik7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc3R1YlNhbmRib3gpIHsKCiAgICAgICAgICBjb25zb2xlLmluZm8oJzQuIGlmIHRoZSBzYW5kYm94IGlzIHJlZ2lzdGVyZWQgdGhlbiByZXR1cm4gdGhlIHNhbmRib3gnLCBzdHViU2FuZGJveCk7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCB4eHggaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCgogICAgICAgICAgX3N0dWJTYW5kYm94ID0gc3R1YlNhbmRib3g7CiAgICAgICAgICByZXR1cm4gc3R1YlNhbmRib3g7CiAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgY29uc29sZS5pbmZvKCc1LiBTYW5kYm94IHdhcyBub3QgZm91bmQsIGNyZWF0aW5nIGEgbmV3IG9uZScsIHJlYXNvbik7CgogICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHNhbmRib3ggaXMgcmVnaXN0ZWQgZm9yIHRoaXMgc3R1YiBkZXNjcmlwdG9yIHVybDsKICAgICAgICAgIC8vIE1ha2UgU3RlcHMgeHh4IC0tLSB4eHgKICAgICAgICAgIC8vIEluc3RhbnRpYXRlIHRoZSBTYW5kYm94CiAgICAgICAgICB2YXIgc2FuZGJveCA9IF90aGlzLnJ1bnRpbWVGYWN0b3J5LmNyZWF0ZVNhbmRib3goKTsKICAgICAgICAgIHNhbmRib3guYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybiBzYW5kYm94OwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHNhbmRib3gpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNi4gcmV0dXJuIHRoZSBzYW5kYm94IGluc3RhbmNlIGFuZCByZWdpc3RlcicsIHNhbmRib3gsICd0byBkb21haW4gJywgZG9tYWluKTsKCiAgICAgICAgICBfc3R1YlNhbmRib3ggPSBzYW5kYm94OwoKICAgICAgICAgIC8vIHdlIG5lZWQgcmVnaXN0ZXIgc3R1YiBvbiByZWdpc3RyeSAtIHN0ZXAgeHh4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAogICAgICAgICAgcmV0dXJuIF90aGlzLnJlZ2lzdHJ5LnJlZ2lzdGVyU3R1Yihfc3R1YlNhbmRib3gsIGRvbWFpbik7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocnVudGltZVByb3RvU3R1YlVSTCkgewoKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNy4gcmV0dXJuIHRoZSBydW50aW1lIHByb3Rvc3R1YiB1cmw6ICcsIHJ1bnRpbWVQcm90b1N0dWJVUkwpOwoKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgeHh4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAoKICAgICAgICAgIF9ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsKCiAgICAgICAgICBjb25zb2xlLmxvZyhfc3R1YkRlc2NyaXB0b3IpOwoKICAgICAgICAgIC8vIEV4dGVuZCBvcmlnaW5hbCBoeXBlcnR5IGNvbmZpZ3VyYXRpb247CiAgICAgICAgICB2YXIgY29uZmlndXJhdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIEpTT04ucGFyc2UoX3N0dWJEZXNjcmlwdG9yLmNvbmZpZ3VyYXRpb24pKTsKICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucnVudGltZVVSTCA9IF90aGlzLnJ1bnRpbWVVUkw7CgogICAgICAgICAgLy8gRGVwbG95IENvbXBvbmVudCBzdGVwIHh4eAogICAgICAgICAgcmV0dXJuIF9zdHViU2FuZGJveC5kZXBsb3lDb21wb25lbnQoX3N0dWJTb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUsIHJ1bnRpbWVQcm90b1N0dWJVUkwsIGNvbmZpZ3VyYXRpb24pOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRlcGxveUNvbXBvbmVudFN0YXR1cykgewogICAgICAgICAgY29uc29sZS5pbmZvKCc4OiByZXR1cm4gZGVwbG95IGNvbXBvbmVudCBmb3Igc2FuZGJveCBzdGF0dXM6ICcsIGRlcGxveUNvbXBvbmVudFN0YXR1cyk7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCB4eHggaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCgogICAgICAgICAgLy8gQWRkIHRoZSBtZXNzYWdlIGJ1cyBsaXN0ZW5lcgogICAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihfcnVudGltZVByb3RvU3R1YlVSTCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICBfc3R1YlNhbmRib3gucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgeHh4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAoKICAgICAgICAgIC8vIExvYWQgU3R1YiBmdW5jdGlvbiByZXNvbHZlZCB3aXRoIHN1Y2Nlc3M7CiAgICAgICAgICB2YXIgc3R1YiA9IHsKICAgICAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTDogX3J1bnRpbWVQcm90b1N0dWJVUkwsCiAgICAgICAgICAgIHN0YXR1czogZGVwbG95Q29tcG9uZW50U3RhdHVzCiAgICAgICAgICB9OwoKICAgICAgICAgIHJlc29sdmUoc3R1Yik7CiAgICAgICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuJyk7CiAgICAgICAgfSkuY2F0Y2goZXJyb3JSZWFzb24pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogVXNlZCB0byBjaGVjayBmb3IgdXBkYXRlcyBhYm91dCBjb21wb25lbnRzIGhhbmRsZWQgaW4gdGhlIENhdGFsb2d1ZSBpbmNsdWRpbmcgcHJvdG9jb2wgc3R1YnMgYW5kIEh5cGVydGllcy4gY2hlY2sgcmVsYXRpb25zaGlwIHdpdGggbGlmZWN5Y2xlIG1hbmFnZW1lbnQgcHJvdmlkZWQgYnkgU2VydmljZSBXb3JrZXJzCiAgICAqIEBwYXJhbSAge0NhdGFsb2d1ZVVSTH0gICAgICAgdXJsIHVybAogICAgKi8KCiAgfSwgewogICAga2V5OiAnY2hlY2tGb3JVcGRhdGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrRm9yVXBkYXRlKHVybCkgewogICAgICAvLyBCb2R5Li4uCiAgICB9CiAgfV0pOwoKICByZXR1cm4gUnVudGltZVVBOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBSdW50aW1lVUE7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uL2J1cy9NZXNzYWdlQnVzIjoxODEsIi4uL2dyYXBoY29ubmVjdG9yL0dyYXBoQ29ubmVjdG9yIjoxODUsIi4uL2lkZW50aXR5L0lkZW50aXR5TW9kdWxlIjoxODcsIi4uL3BvbGljeS9Qb2xpY3lFbmdpbmUiOjE5MCwiLi4vcmVnaXN0cnkvUmVnaXN0cnkiOjE5MywiLi4vc3luY2hlci9TeW5jaGVyTWFuYWdlciI6MjAwLCIuLi91dGlscy91dGlscyI6MjAyLCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1J1bnRpbWVDYXRhbG9ndWUiOjE2MH1dLDE5NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9Cgp2YXIgT2JqZWN0QWxsb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX3VybDogVVJMCiAgX2J1czogTWluaUJ1cwogICovCgogIC8qKgogICAqIENyZWF0ZSBhbiBPYmplY3QgQWxsb2NhdGlvbgogICAqIEBwYXJhbSAge1VSTC5VUkx9ICAgICAgdXJsIC0gdXJsIGZyb20gd2hvIGlzIHNlbmRpbmcgdGhlIG1lc3NhZ2UKICAgKiBAcGFyYW0gIHtNaW5pQnVzfSAgICAgIGJ1cyAtIE1pbmlCdXMgdXNlZCBmb3IgYWRkcmVzcyBhbGxvY2F0aW9uCiAgICovCgogIGZ1bmN0aW9uIE9iamVjdEFsbG9jYXRpb24odXJsLCBidXMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYmplY3RBbGxvY2F0aW9uKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl91cmwgPSB1cmw7CiAgICBfdGhpcy5fYnVzID0gYnVzOwogIH0KCiAgLyoqCiAgICogZ2V0IHRoZSBVUkwgdmFsdWUKICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB1cmwgdmFsdWU7CiAgICovCgoKICBfY3JlYXRlQ2xhc3MoT2JqZWN0QWxsb2NhdGlvbiwgW3sKICAgIGtleTogJ2NyZWF0ZScsCgoKICAgIC8qKgogICAgICogQXNrIGZvciBjcmVhdGlvbiBvZiBhIG51bWJlciBvZiBPYmplY3QgYWRkcmVzc2VzLCB0byB0aGUgZG9tYWluIG1lc3NhZ2Ugbm9kZS4KICAgICAqIEBwYXJhbSAge0RvbWFpbn0gZG9tYWluIC0gRG9tYWluIG9mIHRoZSBtZXNzYWdlIG5vZGUuCiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IG51bWJlciAtIE51bWJlciBvZiBhZGRyZXNzZXMgdG8gcmVxdWVzdAogICAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0VVJMPn0gIEEgbGlzdCBvZiBPYmplY3RVUkwncwogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKGRvbWFpbiwgc2NoZW1lLCBjaGlsZHJlbiwgbnVtYmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbXNnID0gewogICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBkb21haW4gKyAnL29iamVjdC1hZGRyZXNzLWFsbG9jYXRpb24nLAogICAgICAgIGJvZHk6IHsgc2NoZW1lOiBzY2hlbWUsIGNoaWxkcmVuUmVzb3VyY2VzOiBjaGlsZHJlbiwgdmFsdWU6IHsgbnVtYmVyOiBudW1iZXIgfSB9CiAgICAgIH07CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICByZXNvbHZlKHJlcGx5LmJvZHkudmFsdWUuYWxsb2NhdGVkKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICd1cmwnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl91cmw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gT2JqZWN0QWxsb2NhdGlvbjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gT2JqZWN0QWxsb2NhdGlvbjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwxOTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy91dGlscycpOwoKdmFyIF9TdWJzY3JpcHRpb24gPSByZXF1aXJlKCcuL1N1YnNjcmlwdGlvbicpOwoKdmFyIF9TdWJzY3JpcHRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3Vic2NyaXB0aW9uKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCnZhciBPYnNlcnZlck9iamVjdCA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBPYnNlcnZlck9iamVjdChwYXJlbnQsIHVybCwgY2hpbGRyZW5zKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT2JzZXJ2ZXJPYmplY3QpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX3BhcmVudCA9IHBhcmVudDsKICAgIF90aGlzLl91cmwgPSB1cmw7CiAgICBfdGhpcy5fY2hpbGRyZW5zID0gY2hpbGRyZW5zOwoKICAgIF90aGlzLl9idXMgPSBwYXJlbnQuX2J1czsKICAgIF90aGlzLl9zdWJzY3JpcHRpb25zID0ge307CiAgfQoKICBfY3JlYXRlQ2xhc3MoT2JzZXJ2ZXJPYmplY3QsIFt7CiAgICBrZXk6ICdhZGRTdWJzY3JpcHRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFN1YnNjcmlwdGlvbihoeXBlcnR5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5XSA9IG5ldyBfU3Vic2NyaXB0aW9uMi5kZWZhdWx0KF90aGlzLl9idXMsIGh5cGVydHksIF90aGlzLl91cmwsIF90aGlzLl9jaGlsZHJlbnMpOwogICAgfQogIH0sIHsKICAgIGtleTogJ3JlbW92ZVN1YnNjcmlwdGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlU3Vic2NyaXB0aW9uKGh5cGVydHkpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkoaHlwZXJ0eSkuZG9tYWluOwogICAgICB2YXIgb2JqVVJMU3Vic2NyaXB0aW9uID0gX3RoaXMuX3VybCArICcvc3Vic2NyaXB0aW9uJzsKCiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5XTsKICAgICAgaWYgKHN1YnNjcmlwdGlvbikgewogICAgICAgIC8vdW5zdWJzY3JpYmUgbXNnIHRvIHRoZSBSZXBvcnRlciBTTQogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3Vuc3Vic2NyaWJlJywgZnJvbTogX3RoaXMuX3BhcmVudC5fdXJsLCB0bzogb2JqVVJMU3Vic2NyaXB0aW9uLAogICAgICAgICAgYm9keTogeyByZXNvdXJjZTogX3RoaXMuX3VybCB9CiAgICAgICAgfSk7CgogICAgICAgIC8vVE9ETzogc2hvdWxkIEkgd2FpdCBmb3IgcmVzcG9uc2UgYmVmb3JlIHVuc3Vic2NyaWJlIG9uIG1zZy1ub2RlCiAgICAgICAgLy91bnN1YnNjcmliZSBtc2cgdG8gdGhlIGRvbWFpbiBub2RlCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAndW5zdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fcGFyZW50Ll91cmwsIHRvOiAnZG9tYWluOi8vbXNnLW5vZGUuJyArIGRvbWFpbiArICcvc20nLAogICAgICAgICAgYm9keTogeyByZXNvdXJjZTogX3RoaXMuX3VybCwgY2hpbGRyZW5SZXNvdXJjZXM6IF90aGlzLl9jaGlsZHJlbnMgfQogICAgICAgIH0pOwoKICAgICAgICBzdWJzY3JpcHRpb24uX3JlbGVhc2VMaXN0ZW5lcnMoKTsKICAgICAgICBkZWxldGUgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eV07CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBPYnNlcnZlck9iamVjdDsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gT2JzZXJ2ZXJPYmplY3Q7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uL3V0aWxzL3V0aWxzIjoyMDIsIi4vU3Vic2NyaXB0aW9uIjoxOTl9XSwxOTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy91dGlscycpOwoKdmFyIF9TdWJzY3JpcHRpb24gPSByZXF1aXJlKCcuL1N1YnNjcmlwdGlvbicpOwoKdmFyIF9TdWJzY3JpcHRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3Vic2NyaXB0aW9uKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCnZhciBSZXBvcnRlck9iamVjdCA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBSZXBvcnRlck9iamVjdChwYXJlbnQsIG93bmVyLCB1cmwsIGNoaWxkcmVucykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlcG9ydGVyT2JqZWN0KTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9wYXJlbnQgPSBwYXJlbnQ7CiAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsKICAgIF90aGlzLl91cmwgPSB1cmw7CiAgICBfdGhpcy5fY2hpbGRyZW5zID0gY2hpbGRyZW5zOwoKICAgIF90aGlzLl9vYmpTdWJzY3JpcHRvclVSTCA9IF90aGlzLl91cmwgKyAnL3N1YnNjcmlwdGlvbic7CiAgICBfdGhpcy5fYnVzID0gcGFyZW50Ll9idXM7CiAgICBfdGhpcy5fc3Vic2NyaXB0aW9ucyA9IHt9OwoKICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFJlcG9ydGVyT2JqZWN0LCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL2FkZCBvYmplY3RVUkwgZm9yd2FyZC4uLgogICAgICBfdGhpcy5fb2JqRm9yd2FyZCA9IF90aGlzLl9idXMuYWRkRm9yd2FyZChfdGhpcy5fdXJsLCBfdGhpcy5fb3duZXIpOwoKICAgICAgLy9hZGQgc3Vic2NyaXB0aW9uIGxpc3RlbmVyLi4uCiAgICAgIF90aGlzLl9zdWJzY3JpcHRpb25MaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX29ialN1YnNjcmlwdG9yVVJMLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgY29uc29sZS5sb2coX3RoaXMuX29ialN1YnNjcmlwdG9yVVJMICsgJy1SQ1Y6ICcsIG1zZyk7CiAgICAgICAgc3dpdGNoIChtc2cudHlwZSkgewogICAgICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICAgICAgX3RoaXMuX29uUmVtb3RlU3Vic2NyaWJlKG1zZyk7YnJlYWs7CiAgICAgICAgICBjYXNlICd1bnN1YnNjcmliZSc6CiAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZVVuU3Vic2NyaWJlKG1zZyk7YnJlYWs7CiAgICAgICAgICBjYXNlICdyZXNwb25zZSc6CiAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZVJlc3BvbnNlKG1zZyk7YnJlYWs7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIC8vYWRkIGNoaWxkcmVuIGxpc3RlbmVycy4uLgogICAgICB2YXIgY2hpbGRCYXNlVVJMID0gX3RoaXMuX3VybCArICcvY2hpbGRyZW4vJzsKICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzID0gW107CiAgICAgIF90aGlzLl9jaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICB2YXIgY2hpbGRVUkwgPSBjaGlsZEJhc2VVUkwgKyBjaGlsZDsKICAgICAgICB2YXIgY2hpbGRMaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoY2hpbGRVUkwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgIC8vVE9ETzogd2hhdCB0b2RvIGhlcmU/IFByb2Nlc3MgY2hpbGQgY3JlYXRpb25zPwogICAgICAgICAgY29uc29sZS5sb2coJ1N5bmNoZXJNYW5hZ2VyLScgKyBjaGlsZFVSTCArICctUkNWOiAnLCBtc2cpOwogICAgICAgIH0pOwoKICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChjaGlsZExpc3RlbmVyKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX29iakZvcndhcmQucmVtb3ZlKCk7CgogICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uTGlzdGVuZXIucmVtb3ZlKCk7CgogICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoY2wpIHsKICAgICAgICBjbC5yZW1vdmUoKTsKICAgICAgfSk7CgogICAgICAvL3JlbW92ZSBhbGwgc3Vic2NyaXB0aW9ucwogICAgICBPYmplY3Qua2V5cyhfdGhpcy5fc3Vic2NyaXB0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbnNba2V5XS5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdkZWxldGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkoX3RoaXMuX293bmVyKS5kb21haW47CgogICAgICAvL2RlbGV0ZSBtc2cgdG8gYWxsIHN1YnNjcmlwdGlvbnMKICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgdHlwZTogJ2RlbGV0ZScsIGZyb206IF90aGlzLl9vYmpTdWJzY3JpcHRvclVSTCwgdG86IF90aGlzLl91cmwgKyAnL2NoYW5nZXMnCiAgICAgIH0pOwoKICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgdHlwZTogJ2RlbGV0ZScsIGZyb206IF90aGlzLl9wYXJlbnQuX3VybCwgdG86ICdkb21haW46Ly9tc2ctbm9kZS4nICsgZG9tYWluICsgJy9vYmplY3QtYWRkcmVzcy1hbGxvY2F0aW9uJywKICAgICAgICBib2R5OiB7IHJlc291cmNlOiBfdGhpcy5fdXJsLCBjaGlsZHJlblJlc291cmNlczogX3RoaXMuX2NoaWxkcmVucyB9CiAgICAgIH0pOwoKICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKICAgICAgZGVsZXRlIF90aGlzLl9wYXJlbnQuX3JlcG9ydGVyc1tfdGhpcy5fdXJsXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25SZW1vdGVSZXNwb25zZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVtb3RlUmVzcG9uc2UobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBfdGhpcy5fdXJsLAogICAgICAgIGJvZHk6IHsgY29kZTogbXNnLmJvZHkuY29kZSwgc291cmNlOiBtc2cuZnJvbSB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vblJlbW90ZVN1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVtb3RlU3Vic2NyaWJlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgaHlwZXJ0eVVSTCA9IG1zZy5ib2R5LnN1YnNjcmliZXI7CgogICAgICAvL3ZhbGlkYXRlIGlmIHN1YnNjcmlwdGlvbiBhbHJlYWR5IGV4aXN0cz8KICAgICAgaWYgKF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVUkxdKSB7CiAgICAgICAgdmFyIGVycm9yTXNnID0gewogICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogaHlwZXJ0eVVSTCwKICAgICAgICAgIGJvZHk6IHsgY29kZTogNTAwLCBkZXNjOiAnU3Vic2NyaXB0aW9uIGZvciAoJyArIF90aGlzLl91cmwgKyAnIDogJyArIGh5cGVydHlVUkwgKyAnKSBhbHJlYWR5IGV4aXN0cyEnIH0KICAgICAgICB9OwoKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKGVycm9yTXNnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vYXNrIHRvIHN1YnNjcmliZSB0byBTeW5jaGVyPyAoZGVwZW5kcyBvbiB0aGUgb3BlcmF0aW9uIG1vZGUpCiAgICAgIC8vVE9ETzogZ2V0IG1vZGUgZnJvbSBvYmplY3QhCiAgICAgIHZhciBtb2RlID0gJ3N1Yi9wdWInOwoKICAgICAgaWYgKG1vZGUgPT09ICdzdWIvcHViJykgewogICAgICAgIC8vZm9yd2FyZCB0byBIeXBlcnR5IG93bmVyCiAgICAgICAgdmFyIGZvcndhcmRNc2cgPSB7CiAgICAgICAgICB0eXBlOiAnZm9yd2FyZCcsIGZyb206IF90aGlzLl91cmwsIHRvOiBfdGhpcy5fb3duZXIsCiAgICAgICAgICBib2R5OiB7IHR5cGU6IG1zZy50eXBlLCBmcm9tOiBoeXBlcnR5VVJMLCB0bzogX3RoaXMuX3VybCB9CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShmb3J3YXJkTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdmb3J3YXJkLXJlcGx5OiAnLCByZXBseSk7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVSTF0gPSBuZXcgX1N1YnNjcmlwdGlvbjIuZGVmYXVsdChfdGhpcy5fYnVzLCBoeXBlcnR5VVJMLCBfdGhpcy5fdXJsLCBfdGhpcy5fY2hpbGRyZW5zKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvL3NlbmQgc3Vic2NyaWJlLXJlc3BvbnNlCiAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICAgIGJvZHk6IHJlcGx5LmJvZHkKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX29uUmVtb3RlVW5TdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlbW90ZVVuU3Vic2NyaWJlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgaHlwZXJ0eVVSTCA9IG1zZy5ib2R5LnN1YnNjcmliZXI7CgogICAgICB2YXIgc3Vic2NyaXB0aW9uID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVSTF07CiAgICAgIGlmIChzdWJzY3JpcHRpb24pIHsKICAgICAgICBzdWJzY3JpcHRpb24uX3JlbGVhc2VMaXN0ZW5lcnMoKTsKICAgICAgICBkZWxldGUgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVSTF07CgogICAgICAgIC8vVE9ETzogc2VuZCB1bi1zdWJzY3JpYmUgbWVzc2FnZSB0byBTeW5jaGVyPyAoZGVwZW5kcyBvbiB0aGUgb3BlcmF0aW9uIG1vZGUpCiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBSZXBvcnRlck9iamVjdDsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUmVwb3J0ZXJPYmplY3Q7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uL3V0aWxzL3V0aWxzIjoyMDIsIi4vU3Vic2NyaXB0aW9uIjoxOTl9XSwxOTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTdWJzY3JpcHRpb24oYnVzLCBoeXBlcnR5LCB1cmwsIGNoaWxkcmVucykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN1YnNjcmlwdGlvbik7CgogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHZhciBjaGlsZEJhc2VVUkwgPSB1cmwgKyAnL2NoaWxkcmVuLyc7CiAgICB2YXIgY2hhbmdlVVJMID0gdXJsICsgJy9jaGFuZ2VzJzsKCiAgICAvL3Byb2Nlc3MgZGVsZXRlIG1lc3NhZ2UKICAgIF90aGlzLl9kZWxldGVMaXN0ZW5lciA9IGJ1cy5hZGRMaXN0ZW5lcihjaGFuZ2VVUkwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgaWYgKG1zZy50eXBlID09PSAnZGVsZXRlJykgewogICAgICAgIGNvbnNvbGUubG9nKCdTdWJzY3JpcHRpb24tREVMRVRFOiAnLCBtc2cpOwogICAgICAgIHZhciBkZWxldGVNZXNzYWdlVG9IeXBlcnR5ID0gewogICAgICAgICAgdHlwZTogJ2RlbGV0ZScsIGZyb206IG1zZy5mcm9tLCB0bzogaHlwZXJ0eSwKICAgICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IHVybCB9CiAgICAgICAgfTsKCiAgICAgICAgLy9zZW5kIGRlbGV0ZSB0byBoeXBlcnR5CiAgICAgICAgYnVzLnBvc3RNZXNzYWdlKGRlbGV0ZU1lc3NhZ2VUb0h5cGVydHksIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmlwdGlvbi1ERUxFVEUtUkVQTFk6ICcsIHJlcGx5KTsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAgICAvL3N1YnNjcmlwdGlvbiBhY2NlcHRlZCAoYWRkIGZvcndhcmQgYW5kIHN1YnNjcmlwdGlvbikKICAgIF90aGlzLl9jaGFuZ2VMaXN0ZW5lciA9IGJ1cy5hZGRGb3J3YXJkKGNoYW5nZVVSTCwgaHlwZXJ0eSk7CgogICAgLy9hZGQgZm9yd2FyZCBmb3IgY2hpbGRyZW4KICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycyA9IFtdOwogICAgY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgIHZhciBjaGlsZHJlbkZvcndhcmQgPSBidXMuYWRkRm9yd2FyZChjaGlsZEJhc2VVUkwgKyBjaGlsZCwgaHlwZXJ0eSk7CiAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKGNoaWxkcmVuRm9yd2FyZCk7CiAgICB9KTsKICB9CgogIF9jcmVhdGVDbGFzcyhTdWJzY3JpcHRpb24sIFt7CiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fZGVsZXRlTGlzdGVuZXIucmVtb3ZlKCk7CiAgICAgIF90aGlzLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKTsKICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGZvcndhcmQpIHsKICAgICAgICBmb3J3YXJkLnJlbW92ZSgpOwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBTdWJzY3JpcHRpb247Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IFN1YnNjcmlwdGlvbjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwyMDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy91dGlscycpOwoKdmFyIF9PYmplY3RBbGxvY2F0aW9uID0gcmVxdWlyZSgnLi9PYmplY3RBbGxvY2F0aW9uJyk7Cgp2YXIgX09iamVjdEFsbG9jYXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfT2JqZWN0QWxsb2NhdGlvbik7Cgp2YXIgX1JlcG9ydGVyT2JqZWN0ID0gcmVxdWlyZSgnLi9SZXBvcnRlck9iamVjdCcpOwoKdmFyIF9SZXBvcnRlck9iamVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SZXBvcnRlck9iamVjdCk7Cgp2YXIgX09ic2VydmVyT2JqZWN0ID0gcmVxdWlyZSgnLi9PYnNlcnZlck9iamVjdCcpOwoKdmFyIF9PYnNlcnZlck9iamVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PYnNlcnZlck9iamVjdCk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioKICogQGF1dGhvciBtaWNhZWxwZWRyb3NhQGdtYWlsLmNvbQogKiBDb3JlIFN5bmNyb25pemF0aW9uIHN5c3RlbS4KICovCgp2YXIgU3luY2hlck1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogIF91cmw6IFVSTAogIF9idXM6IE1pbmlCdXMKICBfcmVnaXN0cnk6IFJlZ2lzdHJ5CiAgX2FsbG9jYXRvcjogT2JqZWN0QWxsb2NhdGlvbgogICBfcmVwb3J0ZXJzOiB7IE9iamVjdFVSTDogUmVwb3J0ZXJPYmplY3QgfQogIF9vYnNlcnZlcnM6IHsgT2JqZWN0VVJMOiBPYnNlcnZlck9iamVjdCB9CiAgKi8KCiAgZnVuY3Rpb24gU3luY2hlck1hbmFnZXIocnVudGltZVVSTCwgYnVzLCByZWdpc3RyeSwgY2F0YWxvZywgYWxsb2NhdG9yKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3luY2hlck1hbmFnZXIpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX2J1cyA9IGJ1czsKICAgIF90aGlzLl9yZWdpc3RyeSA9IHJlZ2lzdHJ5OwogICAgX3RoaXMuX2NhdGFsb2cgPSBjYXRhbG9nOwoKICAgIC8vVE9ETzogdGhlc2Ugc2hvdWxkIGJlIHNhdmVkIGluIHBlcnNpc3RlbmNlIGVuZ2luZT8KICAgIF90aGlzLl91cmwgPSBydW50aW1lVVJMICsgJy9zbSc7CiAgICBfdGhpcy5fb2JqZWN0VVJMID0gcnVudGltZVVSTCArICcvb2JqZWN0LWFsbG9jYXRpb24nOwoKICAgIF90aGlzLl9yZXBvcnRlcnMgPSB7fTsKICAgIF90aGlzLl9vYnNlcnZlcnMgPSB7fTsKCiAgICAvL1RPRE86IHRoaXMgc2hvdWxkIG5vdCBiZSBoYXJkY29kZWQhCiAgICBfdGhpcy5fZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKHJ1bnRpbWVVUkwpLmRvbWFpbjsKCiAgICBpZiAoYWxsb2NhdG9yKSB7CiAgICAgIF90aGlzLl9hbGxvY2F0b3IgPSBhbGxvY2F0b3I7CiAgICB9IGVsc2UgewogICAgICBfdGhpcy5fYWxsb2NhdG9yID0gbmV3IF9PYmplY3RBbGxvY2F0aW9uMi5kZWZhdWx0KF90aGlzLl9vYmplY3RVUkwsIGJ1cyk7CiAgICB9CgogICAgYnVzLmFkZExpc3RlbmVyKF90aGlzLl91cmwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgY29uc29sZS5sb2coJ1N5bmNoZXJNYW5hZ2VyLVJDVjogJywgbXNnKTsKICAgICAgc3dpdGNoIChtc2cudHlwZSkgewogICAgICAgIGNhc2UgJ2NyZWF0ZSc6CiAgICAgICAgICBfdGhpcy5fb25DcmVhdGUobXNnKTticmVhazsKICAgICAgICBjYXNlICdkZWxldGUnOgogICAgICAgICAgX3RoaXMuX29uRGVsZXRlKG1zZyk7YnJlYWs7CiAgICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICAgIF90aGlzLl9vbkxvY2FsU3Vic2NyaWJlKG1zZyk7YnJlYWs7CiAgICAgICAgY2FzZSAndW5zdWJzY3JpYmUnOgogICAgICAgICAgX3RoaXMuX29uTG9jYWxVblN1YnNjcmliZShtc2cpO2JyZWFrOwogICAgICB9CiAgICB9KTsKICB9CgogIF9jcmVhdGVDbGFzcyhTeW5jaGVyTWFuYWdlciwgW3sKICAgIGtleTogJ19vbkNyZWF0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ3JlYXRlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgb3duZXIgPSBtc2cuZnJvbTsKICAgICAgdmFyIGRvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShtc2cuZnJvbSkuZG9tYWluOwoKICAgICAgLy9UT0RPOiA1LTcgYXV0aG9yaXplT2JqZWN0Q3JlYXRpb24ob3duZXIsIG9iaiA/Pz8/ICkKICAgICAgLy9UT0RPOiBvdGhlciBvcHRpb25hbCBzdGVwcwoKICAgICAgLy9nZXQgc2NoZW1hIGZyb20gY2F0YWxvZ3VlIGFuZCBwYXJzZSAtPiAoc2NoZW1lLCBjaGlsZHJlbikKICAgICAgX3RoaXMuX2NhdGFsb2cuZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3IobXNnLmJvZHkuc2NoZW1hKS50aGVuKGZ1bmN0aW9uIChkZXNjcmlwdG9yKSB7CiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBkZXNjcmlwdG9yLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZS5wcm9wZXJ0aWVzOwogICAgICAgIHZhciBzY2hlbWUgPSBwcm9wZXJ0aWVzLnNjaGVtZSA/IHByb3BlcnRpZXMuc2NoZW1lLmNvbnN0YW50IDogJ3Jlc291cmNlJzsKICAgICAgICB2YXIgY2hpbGRyZW5zID0gcHJvcGVydGllcy5jaGlsZHJlbiA/IHByb3BlcnRpZXMuY2hpbGRyZW4uY29uc3RhbnQgOiBbXTsKCiAgICAgICAgX3RoaXMuX2FsbG9jYXRvci5jcmVhdGUoZG9tYWluLCBzY2hlbWUsIGNoaWxkcmVucywgMSkudGhlbihmdW5jdGlvbiAoYWxsb2NhdGVkKSB7CiAgICAgICAgICAvL1RPRE86IGdldCBhZGRyZXNzIGZyb20gYWRkcmVzcyBhbGxvY2F0b3IgPwogICAgICAgICAgdmFyIG9ialVSTCA9IGFsbG9jYXRlZFswXTsKICAgICAgICAgIHZhciBvYmpTdWJzY3JpcHRvclVSTCA9IG9ialVSTCArICcvc3Vic2NyaXB0aW9uJzsKCiAgICAgICAgICBfdGhpcy5fcmVwb3J0ZXJzW29ialVSTF0gPSBuZXcgX1JlcG9ydGVyT2JqZWN0Mi5kZWZhdWx0KF90aGlzLCBvd25lciwgb2JqVVJMLCBjaGlsZHJlbnMpOwoKICAgICAgICAgIC8vYWxsIG9rLCBzZW5kIHJlc3BvbnNlCiAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogb3duZXIsCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCByZXNvdXJjZTogb2JqVVJMLCBjaGlsZHJlblJlc291cmNlczogY2hpbGRyZW5zIH0KICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vc2VuZCBjcmVhdGUgdG8gYWxsIG9ic2VydmVycywgcmVzcG9uc2VzIHdpbGwgYmUgZGVsaXZlciB0byB0aGUgSHlwZXJ0eSBvd25lcj8KICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvL3NjaGVkdWxlIGZvciBuZXh0IGN5Y2xlIG5lZWRlZCwgYmVjYXVzZSB0aGUgUmVwb3J0ZXIgc2hvdWxkIGJlIGF2YWlsYWJsZS4KICAgICAgICAgICAgbXNnLmJvZHkuYXV0aG9yaXNlLmZvckVhY2goZnVuY3Rpb24gKGh5cGVydHlVUkwpIHsKICAgICAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBvYmpTdWJzY3JpcHRvclVSTCwgdG86IGh5cGVydHlVUkwsCiAgICAgICAgICAgICAgICBib2R5OiB7IHNvdXJjZTogbXNnLmZyb20sIHZhbHVlOiBtc2cuYm9keS52YWx1ZSwgc2NoZW1hOiBtc2cuYm9keS5zY2hlbWEgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBvd25lciwKICAgICAgICAgIGJvZHk6IHsgY29kZTogNTAwLCBkZXNjOiByZWFzb24gfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25EZWxldGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkRlbGV0ZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBvYmpVUkwgPSBtc2cuYm9keS5yZXNvdXJjZTsKCiAgICAgIHZhciBvYmplY3QgPSBfdGhpcy5fcmVwb3J0ZXJzW29ialVSTF07CiAgICAgIGlmIChvYmplY3QpIHsKICAgICAgICAvL1RPRE86IGlzIHRoZXJlIGFueSBwb2xpY3kgdmVyaWZpY2F0aW9uIGJlZm9yZSBkZWxldGU/CiAgICAgICAgb2JqZWN0LmRlbGV0ZSgpOwoKICAgICAgICAvL1RPRE86IHVucmVnaXN0ZXIgb2JqZWN0PwogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25Mb2NhbFN1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uTG9jYWxTdWJzY3JpYmUobXNnKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBoeXBlcnR5VVJMID0gbXNnLmZyb207CiAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkoaHlwZXJ0eVVSTCkuZG9tYWluOwogICAgICB2YXIgb2JqVVJMID0gbXNnLmJvZHkucmVzb3VyY2U7CiAgICAgIHZhciBvYmpVUkxTdWJzY3JpcHRpb24gPSBvYmpVUkwgKyAnL3N1YnNjcmlwdGlvbic7CgogICAgICAvL2dldCBzY2hlbWEgZnJvbSBjYXRhbG9ndWUgYW5kIHBhcnNlIC0+IChjaGlsZHJlbikKICAgICAgX3RoaXMuX2NhdGFsb2cuZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3IobXNnLmJvZHkuc2NoZW1hKS50aGVuKGZ1bmN0aW9uIChkZXNjcmlwdG9yKSB7CiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBkZXNjcmlwdG9yLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZS5wcm9wZXJ0aWVzOwogICAgICAgIHZhciBjaGlsZHJlbnMgPSBwcm9wZXJ0aWVzLmNoaWxkcmVuID8gcHJvcGVydGllcy5jaGlsZHJlbi5jb25zdGFudCA6IFtdOwoKICAgICAgICAvL3N1YnNjcmliZSBtc2cgZm9yIHRoZSBkb21haW4gbm9kZQogICAgICAgIHZhciBub2RlU3Vic2NyaWJlTXNnID0gewogICAgICAgICAgdHlwZTogJ3N1YnNjcmliZScsIGZyb206IF90aGlzLl91cmwsIHRvOiAnZG9tYWluOi8vbXNnLW5vZGUuJyArIGRvbWFpbiArICcvc20nLAogICAgICAgICAgYm9keTogeyByZXNvdXJjZTogb2JqVVJMLCBjaGlsZHJlblJlc291cmNlczogY2hpbGRyZW5zLCBzY2hlbWE6IG1zZy5ib2R5LnNjaGVtYSB9CiAgICAgICAgfTsKCiAgICAgICAgLy9zdWJzY3JpYmUgaW4gbXNnLW5vZGUKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG5vZGVTdWJzY3JpYmVNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ25vZGUtc3Vic2NyaWJlLXJlc3BvbnNlOiAnLCByZXBseSk7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKCiAgICAgICAgICAgIC8vc2VuZCBwcm92aXNpb25hbCByZXNwb25zZQogICAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBoeXBlcnR5VVJMLAogICAgICAgICAgICAgIGJvZHk6IHsgY29kZTogMTAwLCBjaGlsZHJlblJlc291cmNlczogY2hpbGRyZW5zIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB2YXIgb2JqU3Vic2NyaWJlTXNnID0gewogICAgICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogb2JqVVJMU3Vic2NyaXB0aW9uLAogICAgICAgICAgICAgIGJvZHk6IHsgc3Vic2NyaWJlcjogaHlwZXJ0eVVSTCB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvL3N1YnNjcmliZSB0byByZXBvcnRlciBTTQogICAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG9ialN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcG9ydGVyLXN1YnNjcmliZS1yZXNwb25zZTogJywgcmVwbHkpOwogICAgICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewoKICAgICAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXTsKICAgICAgICAgICAgICAgIGlmICghb2JzZXJ2ZXIpIHsKICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXcgX09ic2VydmVyT2JqZWN0Mi5kZWZhdWx0KF90aGlzLCBvYmpVUkwsIGNoaWxkcmVucyk7CiAgICAgICAgICAgICAgICAgIF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXSA9IG9ic2VydmVyOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG9ic2VydmVyLmFkZFN1YnNjcmlwdGlvbihoeXBlcnR5VVJMKTsKCiAgICAgICAgICAgICAgICAvL2ZvcndhcmQgdG8gaHlwZXJ0eToKICAgICAgICAgICAgICAgIHJlcGx5LmlkID0gbXNnLmlkOwogICAgICAgICAgICAgICAgcmVwbHkuZnJvbSA9IF90aGlzLl91cmw7CiAgICAgICAgICAgICAgICByZXBseS50byA9IGh5cGVydHlVUkw7CiAgICAgICAgICAgICAgICBfdGhpczIuX2J1cy5wb3N0TWVzc2FnZShyZXBseSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vbGlzdGVuZXIgcmVqZWN0ZWQKICAgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogaHlwZXJ0eVVSTCwKICAgICAgICAgICAgICBib2R5OiByZXBseS5ib2R5CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25Mb2NhbFVuU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Mb2NhbFVuU3Vic2NyaWJlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGh5cGVydHlVUkwgPSBtc2cuZnJvbTsKICAgICAgdmFyIG9ialVSTCA9IG1zZy5ib2R5LnJlc291cmNlOwoKICAgICAgdmFyIG9ic2VydmVyID0gX3RoaXMuX29ic2VydmVyc1tvYmpVUkxdOwogICAgICBpZiAob2JzZXJ2ZXIpIHsKICAgICAgICAvL1RPRE86IGlzIHRoZXJlIGFueSBwb2xpY3kgdmVyaWZpY2F0aW9uIGJlZm9yZSBkZWxldGU/CiAgICAgICAgb2JzZXJ2ZXIucmVtb3ZlU3Vic2NyaXB0aW9uKGh5cGVydHlVUkwpOwoKICAgICAgICAvL1RPRE86IGRlc3Ryb3kgb2JqZWN0IGluIHRoZSByZWdpc3RyeT8KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgYm9keTogeyBjb2RlOiAyMDAgfQogICAgICAgIH0pOwoKICAgICAgICAvL1RPRE86IHJlbW92ZSBPYmplY3QgaWYgbm8gbW9yZSBzdWJzY3JpcHRpb24/CiAgICAgICAgLy9kZWxldGUgX3RoaXMuX29ic2VydmVyc1tvYmpVUkxdOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAndXJsJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdXJsOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFN5bmNoZXJNYW5hZ2VyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBTeW5jaGVyTWFuYWdlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvdXRpbHMiOjIwMiwiLi9PYmplY3RBbGxvY2F0aW9uIjoxOTYsIi4vT2JzZXJ2ZXJPYmplY3QiOjE5NywiLi9SZXBvcnRlck9iamVjdCI6MTk4fV0sMjAxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgogKiBFdmVudEVtaXR0ZXIKICogQWxsIGNsYXNzZXMgd2hpY2ggZXh0ZW5kcyB0aGlzLCBjYW4gaGF2ZSBhZGRFdmVudExpc3RlbmVyIGFuZCB0cmlnZ2VyIGV2ZW50czsKICovCgp2YXIgRXZlbnRFbWl0dGVyID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudEVtaXR0ZXIpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEV2ZW50RW1pdHRlciwgW3sKICAgIGtleTogImFkZEV2ZW50TGlzdGVuZXIiLAoKCiAgICAvKioKICAgICAqIGFkZEV2ZW50TGlzdGVuZXIgbGlzdGVuIGZvciBhbiBldmVudFR5cGUKICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgICAgICBldmVudFR5cGUgLSBsaXN0ZW5pbmcgZm9yIHRoaXMgdHlwZSBvZiBldmVudAogICAgICogQHBhcmFtICB7RnVuY3Rpb259ICAgICAgIGNiICAgICAgICAtIGNhbGxiYWNrIGZ1bmN0aW9uIHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB0aGUgZXZlbnQgaXQgaXMgaW52b2tlZAogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNiKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzW2V2ZW50VHlwZV0gPSBjYjsKICAgIH0KCiAgICAvKioKICAgICAqIEludm9rZSB0aGUgZXZlbnRUeXBlCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGV2ZW50VHlwZSAtIGV2ZW50IHdpbGwgYmUgaW52b2tlZAogICAgICogQHBhcmFtICB7b2JqZWN0fSBwYXJhbXMgLSBwYXJhbWV0ZXJzIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBhZGRFdmVudExpc3RlbmVyCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidHJpZ2dlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlcihldmVudFR5cGUsIHBhcmFtcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzW2V2ZW50VHlwZV0pIHsKICAgICAgICBfdGhpc1tldmVudFR5cGVdKHBhcmFtcyk7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBFdmVudEVtaXR0ZXI7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IEV2ZW50RW1pdHRlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwyMDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGl2aWRlVVJMID0gZGl2aWRlVVJMOwpleHBvcnRzLmVtcHR5T2JqZWN0ID0gZW1wdHlPYmplY3Q7CmV4cG9ydHMuZGVlcENsb25lID0gZGVlcENsb25lOwpleHBvcnRzLmdldFVzZXJVUkxGcm9tRW1haWwgPSBnZXRVc2VyVVJMRnJvbUVtYWlsOwpleHBvcnRzLmdldFVzZXJFbWFpbEZyb21VUkwgPSBnZXRVc2VyRW1haWxGcm9tVVJMOwovKioKICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bAogKiBAbW9kdWxlIHV0aWxzCiAqLwoKLyoqCiAqIEB0eXBlZGVmIGRpdmlkZVVSTAogKiBAdHlwZSBPYmplY3QKICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGlkZW50aXR5IFRoZSBpZGVudGl0eSBvZiBVUkwKICovCgovKioKICogRGl2aWRlIGFuIHVybCBpbiB0eXBlLCBkb21haW4gYW5kIGlkZW50aXR5CiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzCiAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwKICovCmZ1bmN0aW9uIGRpdmlkZVVSTCh1cmwpIHsKCiAgLy8gbGV0IHJlID0gLyhbYS16QS1aLV0qKT86XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn1cLlthLXpdezIsNn1cYikqKFwvW1wvXGRcd1wuLV0qKSooPzpbXD9dKSooLispKi9naTsKICB2YXIgcmUgPSAvKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naTsKICB2YXIgc3Vic3QgPSAnJDEsJDIsJDMnOwogIHZhciBwYXJ0cyA9IHVybC5yZXBsYWNlKHJlLCBzdWJzdCkuc3BsaXQoJywnKTsKCiAgLy8gSWYgdGhlIHVybCBoYXMgbm8gcHJvdG9jb2wsIHRoZSBkZWZhdWx0IHByb3RvY29sIHNldCBpcyBodHRwcwogIGlmIChwYXJ0c1swXSA9PT0gdXJsKSB7CiAgICBwYXJ0c1swXSA9ICdodHRwcyc7CiAgICBwYXJ0c1sxXSA9IHVybDsKICB9CgogIHZhciByZXN1bHQgPSB7CiAgICB0eXBlOiBwYXJ0c1swXSwKICAgIGRvbWFpbjogcGFydHNbMV0sCiAgICBpZGVudGl0eTogcGFydHNbMl0KICB9OwoKICByZXR1cm4gcmVzdWx0Owp9CgovKioKICogQ2hlY2sgaWYgYW4gT2JqZWN0IGlzIGVtcHR5CiAqIEBwYXJhbSAge09iamVjdH0gb2JqZWN0IE9iamVjdCB0byBiZSBjaGVja2VkCiAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgIHN0YXR1cyBvZiBPYmplY3QsIGVtcHR5IG9yIG5vdCAodHJ1ZXxmYWxzZSk7CiAqLwpmdW5jdGlvbiBlbXB0eU9iamVjdChvYmplY3QpIHsKICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KS5sZW5ndGggPiAwID8gZmFsc2UgOiB0cnVlOwp9CgovKioKICogTWFrZSBhIENPUFkgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICogQHBhcmFtICB7T2JqZWN0fSAgb2JqIC0gb2JqZWN0IHRvIGJlIGNsb25lZAogKiBAcmV0dXJuIHtPYmplY3R9CiAqLwpmdW5jdGlvbiBkZWVwQ2xvbmUob2JqKSB7CiAgLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgogIGlmIChvYmopIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpOwp9CgovKioKICogT2J0YWlucyB0aGUgdXNlciBVUkwgdGhhdCBjb3JyZXNwb25kcyB0byBhIGdpdmVuIGVtYWlsCiAqIEBwYXJhbSAge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsCiAqIEByZXR1cm4ge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMCiAqLwpmdW5jdGlvbiBnZXRVc2VyVVJMRnJvbUVtYWlsKHVzZXJFbWFpbCkgewogIHZhciBpbmRleE9mQXQgPSB1c2VyRW1haWwuaW5kZXhPZignQCcpOwogIHJldHVybiAndXNlcjovLycgKyB1c2VyRW1haWwuc3Vic3RyaW5nKGluZGV4T2ZBdCArIDEsIHVzZXJFbWFpbC5sZW5ndGgpICsgJy8nICsgdXNlckVtYWlsLnN1YnN0cmluZygwLCBpbmRleE9mQXQpOwp9CgovKioKICogT2J0YWlucyB0aGUgdXNlciBlbWFpbCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gVVJMCiAqIEBwYXJhbSAge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMCiAqIEByZXR1cm4ge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsCiAqLwpmdW5jdGlvbiBnZXRVc2VyRW1haWxGcm9tVVJMKHVzZXJVUkwpIHsKICB2YXIgdXJsID0gZGl2aWRlVVJMKHVzZXJVUkwpOwogIHJldHVybiB1cmwuaWRlbnRpdHkucmVwbGFjZSgnLycsICcnKSArICdAJyArIHVybC5kb21haW47IC8vIGlkZW50aXR5IGZpZWxkIGhhcyAnL2V4YW1wbGVJRCcgaW5zdGVhZCBvZiAnZXhhbXBsZUlEJwp9Cgp9LHt9XX0se30sWzE5NV0pKDE5NSkKfSk7",
      "sourceCodeClassname": "RuntimeUA",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 1,
    "type": "Runtimes",
    "version": "0.1",
    "description": "Description of RuntimeUA",
    "objectName": "RuntimeUA",
    "configuration": {},
    "runtimeType": "browser",
    "hypertyCapabilities": {
      "mic": false
    },
    "protocolCapabilities": {
      "http": true
    },
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  }
}